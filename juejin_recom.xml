<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[åˆ«å†è®© AI ç›´æ¥å†™é¡µé¢äº†ï¼šä¸€ç§æ›´ç¨³çš„ä¸­åå°å¼€å‘æ–¹å¼]]></title>    <link>https://juejin.cn/post/7587965800273362970</link>    <guid>https://juejin.cn/post/7587965800273362970</guid>    <pubDate>2025-12-26T16:35:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965800273362970" data-draft-id="7587997893988089883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†è®© AI ç›´æ¥å†™é¡µé¢äº†ï¼šä¸€ç§æ›´ç¨³çš„ä¸­åå°å¼€å‘æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T16:35:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœˆäº®æœ‰çŸ³å¤´"/> <meta itemprop="url" content="https://juejin.cn/user/3526889032395613"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†è®© AI ç›´æ¥å†™é¡µé¢äº†ï¼šä¸€ç§æ›´ç¨³çš„ä¸­åå°å¼€å‘æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889032395613/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœˆäº®æœ‰çŸ³å¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T16:35:04.000Z" title="Fri Dec 26 2025 16:35:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æœ¬æ–‡è®¨è®ºçš„ä¸æ˜¯ Demo çº§åˆ«çš„ AI ç¼–ç ä½“éªŒï¼Œè€Œæ˜¯é¢å‘çœŸå®å›¢é˜Ÿã€é•¿æœŸç»´æŠ¤çš„ä¸­åå°å·¥ç¨‹å®è·µã€‚</strong></p>
<blockquote>
<p><strong>AI èƒ½å†™ä»£ç ï¼Œä½†ä¸æ„å‘³ç€å®ƒé€‚åˆç›´æ¥â€œäº§å‡ºé¡µé¢â€ã€‚</strong></p>
</blockquote>
<p>æœ€è¿‘ä¸€å¹´ï¼Œå¤§æ¨¡å‹åœ¨å‰ç«¯é¢†åŸŸçš„è®¨è®ºå‡ ä¹éƒ½å›´ç»•ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p><strong>â€œèƒ½ä¸èƒ½è®© AI ç›´æ¥æŠŠé¡µé¢å†™å‡ºæ¥ï¼Ÿâ€</strong></p>
</blockquote>
<p>åœ¨çœŸå®çš„ä¸­åå°é¡¹ç›®ä¸­ï¼Œæˆ‘çš„ç­”æ¡ˆæ˜¯ï¼š<br/>
<strong>ä¸ä½†ä¸ç¨³ï¼Œè€Œä¸”å¾ˆå±é™©ã€‚</strong></p>
<p>è¿™ç¯‡æ–‡ç« æƒ³åˆ†äº«ä¸€ç§æˆ‘åœ¨çœŸå®é¡¹ç›®ä¸­å®è·µè¿‡ã€<strong>å¯é•¿æœŸä½¿ç”¨ã€å¯è§„æ¨¡åŒ–</strong>çš„æ–¹å¼ï¼š<br/>
<strong>ä¸æ˜¯è®© AI å†™é¡µé¢ï¼Œè€Œæ˜¯æŠŠ AI çº³å…¥ä¸­åå°å‰ç«¯çš„å·¥ç¨‹ä½“ç³»ä¸­ã€‚</strong>
æŠŠ AI çš„ä¸ç¡®å®šæ€§å…³è¿›äº†ç¬¼å­é‡Œï¼Œç”¨å·¥ç¨‹æµç¨‹ä¿è¯å¯æ§æ€§ã€‚</p>
<p><strong>æ¨¡æ¿å›ºåŒ–è§„èŒƒï¼ŒSpec æè¿°å˜åŒ–ï¼Œå¤§æ¨¡å‹ç”Ÿæˆ Specï¼Œè„šæœ¬ç”Ÿæˆä»£ç ï¼Œlint/test åšå…œåº•ã€‚</strong>
å®ƒè§£å†³äº† AI ä¸Šå·¥ç¨‹æœ€è‡´å‘½çš„å››ä»¶äº‹ï¼š</p>
<ol>
<li><strong>å¯å®¡è®¡</strong>ï¼šå˜åŒ–åœ¨ specï¼Œç”Ÿæˆç»“æœå¯ diff</li>
<li><strong>å¯é‡å¤</strong>ï¼šåŒä¸€ä¸ª spec åå¤ç”Ÿæˆç»“æœä¸€è‡´</li>
<li><strong>å¯å…œåº•</strong>ï¼šlint/test æ˜¯ç¡¬é—¨æ§›</li>
<li><strong>å¯è§„æ¨¡åŒ–</strong>ï¼šä» prompt å·¥è‰ºå˜æˆæµç¨‹</li>
</ol>
<p>åœ¨ä¸­åå°åœºæ™¯ï¼Œå°¤å…¶æ˜¯ <strong>CRUD å æ¯”é«˜</strong> çš„é¡¹ç›®é‡Œï¼Œè¿™å‡ ä¹å°±æ˜¯â€œæ€§ä»·æ¯”æœ€ä¼˜è§£â€ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸­åå°é¡µé¢å¼€å‘çš„çœŸå®å›°å¢ƒ</h2>
<p>å¦‚æœä½ åšè¿‡ä¸­åå°å‰ç«¯ï¼Œä¸€å®šå¯¹ä¸‹é¢è¿™äº›åœºæ™¯ä¸é™Œç”Ÿï¼š</p>
<ul>
<li>é¡µé¢ 80% æ˜¯ CRUD</li>
<li>åˆ—è¡¨é¡µç»“æ„é«˜åº¦ä¸€è‡´</li>
<li>è¡¨å•å­—æ®µä¸æ–­å˜åŒ–</li>
<li>å¤§é‡å¤åˆ¶ç²˜è´´</li>
<li>é¡µé¢é€»è¾‘â€œçœ‹èµ·æ¥å·®ä¸å¤šï¼Œä½†æ°¸è¿œä¸å®Œå…¨ä¸€æ ·â€</li>
</ul>
<p>æœ€ç»ˆç»“æœå¾€å¾€æ˜¯ï¼š</p>
<ul>
<li>ä»£ç å†—ä½™</li>
<li>é£æ ¼ä¸ç»Ÿä¸€</li>
<li>æ–°äººä¸Šæ‰‹æ…¢</li>
<li>æ”¹ä¸€ä¸ªå­—æ®µè¦æ”¹å¥½å‡ ä¸ªåœ°æ–¹</li>
</ul>
<p>è¿™äº›é—®é¢˜<strong>ä¸æ˜¯æŸä¸ªæ¡†æ¶çš„é—®é¢˜</strong>ï¼Œè€Œæ˜¯ä¸­åå°å¼€å‘çš„ç»“æ„æ€§é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä¸ºä»€ä¹ˆâ€œè®© AI ç›´æ¥å†™é¡µé¢â€åœ¨çœŸå®é¡¹ç›®é‡Œè¡Œä¸é€šï¼Ÿ</h2>
<p>å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯ï¼š</p>
<blockquote>
<p>â€œæ—¢ç„¶é¡µé¢è¿™ä¹ˆé‡å¤ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥è®© AI å†™ Vue / React é¡µé¢ï¼Ÿâ€</p>
</blockquote>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œè¿™ç§æ–¹å¼å¾€å¾€ä¼šé‡åˆ°å‡ ä¸ªè‡´å‘½é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">1ï¸âƒ£ ä¸ç¨³å®š</h3>
<ul>
<li>åŒæ ·çš„ promptï¼Œæ¯æ¬¡ç”Ÿæˆç»“æœä¸åŒ</li>
<li>ç»„ä»¶ç»“æ„ã€å‘½åé£æ ¼ä¸æ–­æ¼‚ç§»</li>
<li>éš¾ä»¥ä¿è¯å›¢é˜Ÿç»Ÿä¸€è§„èŒƒ</li>
</ul>
<h3 data-id="heading-3">2ï¸âƒ£ éš¾ä»¥ review</h3>
<ul>
<li>AI ä¸€æ¬¡ç”Ÿæˆå‡ ç™¾è¡Œä»£ç </li>
<li>reviewer å¾ˆéš¾åˆ¤æ–­â€œè¿™æ˜¯ä¸æ˜¯å¯¹çš„â€</li>
<li>å‡ºé—®é¢˜æ—¶éš¾ä»¥å®šä½è´£ä»»</li>
</ul>
<h3 data-id="heading-4">3ï¸âƒ£ æ— æ³•è§„æ¨¡åŒ–</h3>
<ul>
<li>prompt æ˜¯éšæ€§çš„</li>
<li>ç»éªŒæ— æ³•æ²‰æ·€</li>
<li>æ¯ä¸ªé¡µé¢éƒ½æ˜¯â€œé‡æ–°ç”Ÿæˆä¸€æ¬¡â€</li>
</ul>
<h3 data-id="heading-5">4ï¸âƒ£ å·¥ç¨‹ä½“ç³»æ— æ³•å…œåº•</h3>
<ul>
<li>lint / test å¾ˆéš¾æå‰å‘ç°è¯­ä¹‰é—®é¢˜</li>
<li>ä¸€æ—¦å‡ºé”™ï¼Œå¾€å¾€æ˜¯è¿è¡ŒæœŸé—®é¢˜</li>
</ul>
<p><strong>ç»“è®ºå¾ˆæ˜ç¡®ï¼š<br/>
AI ç›´æ¥å†™é¡µé¢ï¼Œæ›´åƒæ˜¯ demoï¼Œè€Œä¸æ˜¯å·¥ç¨‹æ–¹æ¡ˆã€‚</strong></p>
<h2 data-id="heading-6">ä¸‰ã€ä¸€ä¸ªæ›´ç¨³çš„æ€è·¯ï¼šæŠŠâ€œå˜åŒ–â€å’Œâ€œç¨³å®šâ€æ‹†å¼€</h2>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº†ä¸€ç§<strong>æ›´åå·¥ç¨‹åŒ–</strong>çš„åšæ³•ï¼š</p>
<blockquote>
<p><strong>Template + Spec + Generator + AI</strong></p>
</blockquote>
<p>æ ¸å¿ƒæ€æƒ³åªæœ‰ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>æ¨¡æ¿è´Ÿè´£ç¨³å®šæ€§ï¼ŒSpec è´Ÿè´£å˜åŒ–ï¼ŒAI åªå‚ä¸å˜åŒ–ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-7">è¿™ä¸ªæµç¨‹é•¿ä»€ä¹ˆæ ·ï¼Ÿ</h3>
<pre><code class="hljs language-js" lang="js">éœ€æ±‚æè¿°
   â†“
é¡µé¢è§„æ ¼ï¼ˆ<span class="hljs-title class_">Spec</span>ï¼‰
   â†“
æ¨¡æ¿ï¼ˆ<span class="hljs-title class_">Template</span>ï¼‰
   â†“
ç”Ÿæˆè„šæœ¬ï¼ˆ<span class="hljs-title class_">Generator</span>ï¼‰
   â†“
é¡µé¢ä»£ç 
   â†“
lint / test æ ¡éªŒ
</code></pre>
<p>è¿™ä¸æ˜¯ä¸ºäº†â€œå¤šä¸€å±‚æŠ½è±¡â€ï¼Œè€Œæ˜¯ä¸ºäº†<strong>æŠŠ AI çš„ä¸ç¡®å®šæ€§é™åˆ¶åœ¨å¯æ§èŒƒå›´å†…</strong>ã€‚</p>
<h2 data-id="heading-8">å››ã€ä»€ä¹ˆæ˜¯ Specï¼Ÿ</h2>
<p>**Specï¼ˆSpecificationï¼‰**å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p><strong>é¡µé¢çš„â€œè§„æ ¼è¯´æ˜ä¹¦â€</strong></p>
</blockquote>
<p>å®ƒæè¿°çš„æ˜¯ï¼š</p>
<ul>
<li>é¡µé¢æ ‡é¢˜</li>
<li>æ¥å£åœ°å€</li>
<li>è¡¨æ ¼å­—æ®µ</li>
<li>æŸ¥è¯¢æ¡ä»¶</li>
<li>è¡¨å•å­—æ®µä¸æ ¡éªŒè§„åˆ™</li>
</ul>
<p>è€Œä¸æ˜¯ï¼š</p>
<ul>
<li>ç”Ÿå‘½å‘¨æœŸæ€ä¹ˆå†™</li>
<li>API æ€ä¹ˆè°ƒç”¨</li>
<li>UI ç»„ä»¶æ€ä¹ˆæ‹¼</li>
</ul>
<p>è¿™äº›å†…å®¹ï¼Œéå¸¸é€‚åˆç”¨ä¸€ä»½ç»“æ„åŒ–æ•°æ®æ¥è¡¨è¾¾ã€‚</p>
<h3 data-id="heading-9">ä¸€ä¸ªç®€åŒ–çš„ Spec ç¤ºä¾‹</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†ç®¡ç†"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"api"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"list"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/supplier/list"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"create"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/supplier/create"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"update"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/supplier/update"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"delete"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/supplier/delete"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"columns"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†åç§°"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"contact"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è”ç³»äºº"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"status"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"çŠ¶æ€"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"formSchema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†åç§°"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"contact"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è”ç³»äºº"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"status"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"çŠ¶æ€"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"select"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"options"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"å¯ç”¨"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"åœç”¨"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ä»½ JSON <strong>ä¸ä¾èµ–ä»»ä½•å‰ç«¯æ¡†æ¶</strong>ï¼Œä½†å·²ç»å®Œæ•´æè¿°äº†ä¸€ä¸ªä¸­åå°é¡µé¢çš„â€œå˜åŒ–ç‚¹â€ã€‚</p>
<h2 data-id="heading-10">äº”ã€Templateï¼šæŠŠé‡å¤åŠ³åŠ¨å›ºåŒ–æˆèµ„äº§</h2>
<p>Template æ˜¯<strong>å›ºå®šä¸å˜çš„éƒ¨åˆ†</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>é¡µé¢æ•´ä½“ç»“æ„</li>
<li>è¡¨æ ¼ / è¡¨å• / å¼¹çª—éª¨æ¶</li>
<li>API è°ƒç”¨æ–¹å¼</li>
<li>åˆ†é¡µé€»è¾‘</li>
<li>é”™è¯¯å¤„ç†æ–¹å¼</li>
</ul>
<p>å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>äººå·¥ç»´æŠ¤</li>
<li>ç‰ˆæœ¬åŒ–</li>
<li>å¯ review</li>
<li>å¾ˆå°‘å˜åŠ¨</li>
</ul>
<p>ä½ å¯ä»¥ç”¨ Vueã€Reactã€Svelteï¼Œ<strong>æ¨¡æ¿æ€æƒ³æœ¬èº«ä¸æ¡†æ¶æ— å…³</strong>ã€‚</p>
<h2 data-id="heading-11">å…­ã€Generatorï¼šè®©ç”Ÿæˆå˜æˆç¡®å®šæ€§è¡Œä¸º</h2>
<p>Generator çš„èŒè´£éå¸¸å•ä¸€ï¼š</p>
<blockquote>
<p><strong>æŠŠ Spec å¡«è¿› Templateï¼Œç”Ÿæˆä»£ç æ–‡ä»¶</strong></p>
</blockquote>
<p>è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼š</p>
<ul>
<li>Generator æ˜¯è„šæœ¬</li>
<li>è¾“å‡ºæ˜¯ç¡®å®šçš„</li>
<li>ä¸æ¶‰åŠ AI å†³ç­–</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼š</p>
<blockquote>
<p><strong>Generator ä¸æ˜¯â€œæ™ºèƒ½çš„â€ï¼Œä½†å®ƒæ˜¯å¯é çš„ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-12">ä¸ƒã€AI åœ¨è¿™é‡Œæ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Ÿ</h2>
<p>åœ¨è¿™å¥—ä½“ç³»ä¸­ï¼ŒAI çš„èŒè´£è¢«ä¸¥æ ¼é™åˆ¶åœ¨ä¸¤ç‚¹ï¼š</p>
<h3 data-id="heading-13">âœ… 1. ä»è‡ªç„¶è¯­è¨€ç”Ÿæˆ Spec</h3>
<p>AI éå¸¸æ“…é•¿ï¼š</p>
<ul>
<li>ç†è§£ä¸šåŠ¡æè¿°</li>
<li>ç”Ÿæˆç»“æ„åŒ– JSON</li>
<li>è¡¥å…¨å­—æ®µä¿¡æ¯</li>
</ul>
<h3 data-id="heading-14">âœ… 2. æŒ‰ lint / æŠ¥é”™åšæœ€å°ä¿®å¤</h3>
<ul>
<li>åªä¿®å…·ä½“æ–‡ä»¶</li>
<li>åªåšæœ€å° diff</li>
<li>ä¸é‡å†™æ•´ä½“ç»“æ„</li>
</ul>
<h3 data-id="heading-15">âŒ AI ä¸è¯¥åšçš„äº‹</h3>
<ul>
<li>ç›´æ¥å†™é¡µé¢ä»£ç </li>
<li>ä¿®æ”¹æ¨¡æ¿</li>
<li>æ”¹åŠ¨åŸºç¡€è®¾æ–½</li>
<li>å¼•å…¥æ–°ä¾èµ–</li>
</ul>
<p>è¿™æ ·åšçš„ç»“æœæ˜¯ï¼š<br/>
<strong>AI çš„èƒ½åŠ›è¢«â€œå·¥ç¨‹æµç¨‹â€çº¦æŸï¼Œè€Œä¸æ˜¯åè¿‡æ¥ã€‚</strong></p>
<h3 data-id="heading-16">âœ… æ­£ç¡®å§¿åŠ¿</h3>
<p><strong>è®© Codex åšä¸¤ä»¶äº‹ï¼š</strong></p>
<p>1ï¸âƒ£ æ ¹æ®è‡ªç„¶è¯­è¨€ <strong>ç”Ÿæˆ Spec JSON</strong><br/>
2ï¸âƒ£ æ ¹æ® lint / æŠ¥é”™ <strong>åšæœ€å° patch ä¿®å¤</strong></p>
<p>ç¤ºä¾‹æŒ‡ä»¤ï¼ˆåœ¨ Codex CLI / IDE ä¸­ï¼‰ï¼š</p>
<blockquote>
<p>åœ¨ <code>specs/</code> ä¸‹ç”Ÿæˆ <code>supplier.json</code>ï¼Œå­—æ®µä¸ºä¾›åº”å•†åç§°ã€è”ç³»äººã€ç”µè¯ã€çŠ¶æ€ï¼ˆå¯ç”¨/åœç”¨ï¼‰ï¼Œæ¥å£è·¯å¾„ä¸º <code>/api/supplier/*</code>ï¼Œè¾“å‡ºå¿…é¡»æ˜¯ä¸¥æ ¼ JSONã€‚</p>
</blockquote>
<p>ç„¶åï¼š</p>
<pre><code class="hljs language-bash" lang="bash">yarn gen:page specs/supplier.json
yarn lint
</code></pre>
<p>å¦‚æœ lint æŠ¥é”™ï¼Œå†è®© Codex ä¿®ï¼š</p>
<blockquote>
<p>æ ¹æ® lint æŠ¥é”™ï¼Œåªä¿®æ”¹ <code>src/views/supplier/List.vue</code>ï¼Œç”¨æœ€å°æ”¹åŠ¨ä¿®åˆ°é€šè¿‡ã€‚</p>
</blockquote>
<h2 data-id="heading-17">å…«ã€ä¸ºä»€ä¹ˆè¿™ç§æ–¹å¼æ›´é€‚åˆçœŸå®å›¢é˜Ÿï¼Ÿ</h2>
<p>ä»å·¥ç¨‹è§’åº¦çœ‹ï¼Œè¿™ç§æ–¹å¼æœ‰å‡ ä¸ªæ˜æ˜¾ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å¯æ§</strong>ï¼šæ¨¡æ¿ç¨³å®šï¼Œå˜åŒ–é›†ä¸­åœ¨ Spec</li>
<li><strong>å¯ review</strong>ï¼šSpec æ˜¯ç»“æ„åŒ–æ•°æ®</li>
<li><strong>å¯å›æ»š</strong>ï¼šgit diff éå¸¸æ¸…æ™°</li>
<li><strong>å¯è§„æ¨¡åŒ–</strong>ï¼šä¸æ˜¯ prompt é©±åŠ¨ï¼Œè€Œæ˜¯æµç¨‹é©±åŠ¨</li>
<li><strong>å¯è¿ç§»</strong>ï¼šæ¢æ¡†æ¶åªéœ€æ¢æ¨¡æ¿</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒæ¯”â€œç›´æ¥è®© AI å†™é¡µé¢â€æ›´ç¨³ã€‚</p>
<h2 data-id="heading-18">ä¹ã€è¿™å¥—æ€è·¯ä¸åªé€‚ç”¨äºä¸­åå°</h2>
<p>è¿™ç§æ¨¡å¼å¯ä»¥è‡ªç„¶æ‰©å±•åˆ°ï¼š</p>
<ul>
<li>è¡¨å•é¡µ / è¯¦æƒ…é¡µ</li>
<li>æƒé™è·¯ç”±ç”Ÿæˆ</li>
<li>é¡µé¢è¿ç§»ï¼ˆå¦‚ Vue2 â†’ Vue3ï¼‰</li>
<li>ä½ä»£ç  / é¡µé¢å·¥å‚</li>
<li>å‰ç«¯å·¥ç¨‹è‡ªåŠ¨åŒ–</li>
</ul>
<p>æ ¸å¿ƒä¸åœ¨å·¥å…·ï¼Œè€Œåœ¨<strong>æ‹†åˆ†å˜åŒ–ä¸ç¨³å®šçš„è¾¹ç•Œ</strong>ã€‚</p>
<h2 data-id="heading-19">åã€æ¨¡æ¿åŒ–ä¸æ˜¯ç»ˆç‚¹ï¼šä¸€æ¡æ›´ç°å®çš„â€œæœ€ä½³è¿›åŒ–è·¯çº¿â€</h2>
<p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œ<strong>Template + Spec + Generator å¹¶ä¸æ˜¯ç»ˆææ–¹æ¡ˆ</strong>ï¼Œè€Œæ˜¯ä¸€ä¸ªéå¸¸åˆé€‚çš„<strong>å·¥ç¨‹èµ·ç‚¹</strong>ã€‚å¹¶ä¸æ˜¯æ‰€æœ‰å›¢é˜Ÿéƒ½éœ€è¦èµ°åˆ°é…ç½®é©±åŠ¨æˆ– AST ä¿®æ”¹é˜¶æ®µï¼Œ<strong>å¯¹å¾ˆå¤šå›¢é˜Ÿæ¥è¯´ï¼ŒTemplate + Spec æœ¬èº«å·²ç»æ˜¯æœ€ä¼˜è§£ã€‚</strong></p>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œæˆ‘æ›´æ¨èæŠŠå®ƒçœ‹ä½œä¸€æ¡â€œå¯è¿›åŒ–çš„è·¯çº¿â€ï¼Œè€Œä¸æ˜¯ä¸€é”¤å®šéŸ³çš„è®¾è®¡ã€‚</p>
<h3 data-id="heading-20">ç¬¬ä¸€æ­¥ï¼šTemplate + Specï¼ˆç°åœ¨çš„æ–¹æ¡ˆï¼‰</h3>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>CRUD é¡µé¢å æ¯”é«˜</li>
<li>æ–°é¡µé¢æ•°é‡å¤š</li>
<li>å›¢é˜Ÿå¸Œæœ›å°½å¿«ç»Ÿä¸€è§„èŒƒ</li>
</ul>
<p><strong>ä»·å€¼ï¼š</strong></p>
<ul>
<li>å¿«é€Ÿè½åœ°</li>
<li>é£é™©å¯æ§</li>
<li>éå¸¸é€‚åˆå¼•å…¥ AI çš„ç¬¬ä¸€æ­¥</li>
</ul>
<hr/>
<h3 data-id="heading-21">ç¬¬äºŒæ­¥ï¼šæŠ½è±¡ç¨³å®šèƒ½åŠ›ï¼Œå¼±åŒ–æ¨¡æ¿å¤æ‚åº¦</h3>
<p>å½“å‘ç°æ¨¡æ¿é‡Œå¼€å§‹å‡ºç°å¤§é‡æ¡ä»¶åˆ†æ”¯æ—¶ï¼Œä¸€ä¸ªæ›´ç¨³çš„åšæ³•æ˜¯ï¼š</p>
<blockquote>
<p><strong>æŠŠæ¨¡æ¿ä¸­çš„ç¨³å®šé€»è¾‘æŠ½æˆåŸºç¡€ç»„ä»¶ï¼ˆå¦‚ BaseCrudPageï¼‰</strong></p>
</blockquote>
<p>æ­¤æ—¶ï¼š</p>
<ul>
<li>æ¨¡æ¿å˜è–„</li>
<li>spec åªæè¿°â€œé¡µé¢é…ç½®â€</li>
<li>é¡µé¢æœ¬èº«ä¸å†é¢‘ç¹ç”Ÿæˆæ–°æ–‡ä»¶</li>
</ul>
<p>è¿™ä¸€æ­¥ï¼Œå·²ç»éå¸¸æ¥è¿‘<strong>é…ç½®é©±åŠ¨é¡µé¢æ¸²æŸ“</strong>ã€‚</p>
<h3 data-id="heading-22">ç¬¬ä¸‰æ­¥ï¼šä»â€œç”Ÿæˆä»£ç â€èµ°å‘â€œé…ç½®å³é¡µé¢â€</h3>
<p>åœ¨ CRUD å æ¯”æé«˜çš„ç³»ç»Ÿä¸­ï¼Œæœ€ç»ˆå½¢æ€å¾€å¾€æ˜¯ï¼š</p>
<blockquote>
<p><strong>é¡µé¢ = é…ç½®ï¼ˆSpecï¼‰ + æ¸²æŸ“å™¨</strong></p>
</blockquote>
<p>æ­¤æ—¶ï¼š</p>
<ul>
<li>æ–°é¡µé¢ä¸å†ç”Ÿæˆ <code>.vue</code> æ–‡ä»¶</li>
<li>åªæ–°å¢ spec + è·¯ç”±é…ç½®</li>
<li>AI ç›´æ¥ç”Ÿæˆ specï¼Œæ”¶ç›Šæœ€å¤§</li>
</ul>
<p>è¿™æœ¬è´¨ä¸Šå°±æ˜¯<strong>ä½ä»£ç /é¡µé¢å·¥å‚çš„é›å½¢</strong>ã€‚</p>
<h3 data-id="heading-23">ç¬¬å››æ­¥ï¼šå­˜é‡é¡¹ç›®å¼•å…¥ç»“æ„åŒ–ä¿®æ”¹ï¼ˆAST / Patchï¼‰</h3>
<p>å¯¹äºå·²æœ‰å¤§é‡é¡µé¢çš„ç³»ç»Ÿï¼Œæ›´ç¨³å¦¥çš„æ–¹å¼æ˜¯ï¼š</p>
<ul>
<li>ç”¨ spec æè¿°â€œå˜æ›´æ„å›¾â€</li>
<li>ç”¨å·¥å…·å¯¹ä»£ç åšç»“æ„åŒ–ä¿®æ”¹ï¼ˆå¦‚åªæ”¹ columnsã€formSchemaï¼‰</li>
<li>AI åªäº§å‡º patchï¼Œè€Œä¸æ˜¯é‡å†™é¡µé¢</li>
</ul>
<p>è¿™ä¸€æ­¥éå¸¸é€‚åˆï¼š</p>
<ul>
<li>è€é¡¹ç›®</li>
<li>å®‰å…¨è¦æ±‚é«˜çš„å›¢é˜Ÿ</li>
<li>æ¸è¿›å¼æ¼”è¿›</li>
</ul>
<h3 data-id="heading-24">ä¸€å¥è¯æ€»ç»“è¿™æ¡è·¯çº¿</h3>
<blockquote>
<p><strong>æ¨¡æ¿åŒ–æ˜¯æŠŠ AI å¼•å…¥å·¥ç¨‹ä½“ç³»çš„ç¬¬ä¸€æ­¥ï¼Œ<br/>
é…ç½®é©±åŠ¨å’Œç»“æ„åŒ–ä¿®æ”¹ï¼Œæ‰æ˜¯ä¸­åå°å·¥ç¨‹çš„é•¿æœŸå½¢æ€ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-25">åä¸€ã€æ€»ç»“</h2>
<p>å¤§æ¨¡å‹çš„ä»·å€¼ï¼Œä¸åœ¨äºâ€œæ›¿ä»£å·¥ç¨‹å¸ˆå†™é¡µé¢â€ï¼Œ<br/>
è€Œåœ¨äºï¼š</p>
<blockquote>
<p><strong>æŠŠé‡å¤åŠ³åŠ¨ç»“æ„åŒ–ï¼Œå¹¶åµŒå…¥åˆ°å·¥ç¨‹ä½“ç³»ä¸­ã€‚</strong></p>
</blockquote>
<p>åœ¨ä¸­åå°å‰ç«¯å¼€å‘ä¸­ï¼Œ<br/>
<strong>æœ€ç¨³çš„æ–¹å¼æ°¸è¿œä¸æ˜¯â€œè®© AI è‡ªç”±å‘æŒ¥â€ï¼Œ<br/>
è€Œæ˜¯è®©å®ƒåœ¨æ¸…æ™°çš„è¾¹ç•Œå†…å·¥ä½œã€‚</strong></p>
<p>å¦‚æœåªèƒ½è®°ä½ä¸€å¥è¯ï¼š  ä¸è¦è®© AI ç›´æ¥å†™é¡µé¢ï¼Œè®©å®ƒå†™â€œå˜åŒ–â€ï¼Œå…¶ä½™äº¤ç»™å·¥ç¨‹ã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¯å‘ï¼Œæ¬¢è¿ç‚¹èµæˆ–æ”¶è— ğŸ‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¾åŸºäº .NET 9 æ„å»ºçš„ä¼ä¸šçº§ Web RBAC å¿«é€Ÿå¼€å‘æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7588007285546418182</link>    <guid>https://juejin.cn/post/7588007285546418182</guid>    <pubDate>2025-12-26T15:15:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285546418182" data-draft-id="7588007285546401798" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¾åŸºäº .NET 9 æ„å»ºçš„ä¼ä¸šçº§ Web RBAC å¿«é€Ÿå¼€å‘æ¡†æ¶"/> <meta itemprop="keywords" content=".NET"/> <meta itemprop="datePublished" content="2025-12-26T15:15:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¾åŸºäº .NET 9 æ„å»ºçš„ä¼ä¸šçº§ Web RBAC å¿«é€Ÿå¼€å‘æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T15:15:54.000Z" title="Fri Dec 26 2025 15:15:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©å¤§å§šç»™å¤§å®¶åˆ†äº«ä¸€æ¬¾åŸºäº .NET 9 æ„å»ºçš„ä¼ä¸šçº§ã€å¼€æº Web RBAC å¿«é€Ÿå¼€å‘æ¡†æ¶ï¼šRuYiAdminã€‚</p>
<h2 data-id="heading-1">é¡¹ç›®ä»‹ç»</h2>
<p>RuYiAdmin ä¸€æ¬¾åŸºäº .NET 9 æ„å»ºçš„ä¼ä¸šçº§ã€å‰åç«¯åˆ†ç¦»ã€å¼€æºï¼ˆApache Licenseï¼‰ Web RBAC å¿«é€Ÿå¼€å‘æ¡†æ¶ï¼Œå…·æœ‰çµæ´»çš„æ¶æ„è®¾è®¡å’Œå¼ºå¤§çš„åŠŸèƒ½ï¼Œé€‚ç”¨äºå¿«é€Ÿå¼€å‘é«˜æ€§èƒ½çš„ä¼ä¸šçº§åº”ç”¨ï¼Œå…·æœ‰ä½ä»£ç ã€è·¨å¹³å°ã€åˆ†å¸ƒå¼ã€å¤šçº¿ç¨‹å’Œé«˜æ€§èƒ½ç­‰ç‰¹è‰²ã€‚</p>
<h2 data-id="heading-2">é€‚ç”¨åœºæ™¯</h2>
<ul>
<li>ä¼ä¸šçº§åå°ç®¡ç†ç³»ç»Ÿï¼šç”¨äºä¼ä¸šå†…éƒ¨çš„å„ç§ç®¡ç†ä»»åŠ¡ï¼Œå¦‚ç”¨æˆ·ç®¡ç†ã€æƒé™æ§åˆ¶ã€æ•°æ®ç»Ÿè®¡ç­‰ã€‚</li>
<li>å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰ï¼šç”¨äºç½‘ç«™å†…å®¹çš„åˆ›å»ºã€ç¼–è¾‘ã€å‘å¸ƒå’Œç®¡ç†ã€‚</li>
<li>å®¢æˆ·å…³ç³»ç®¡ç†ï¼ˆCRMï¼‰ç³»ç»Ÿï¼šå¸®åŠ©ä¼ä¸šè·Ÿè¸ªå’Œç®¡ç†å®¢æˆ·ä¿¡æ¯ã€é”€å”®æœºä¼šå’Œå®¢æˆ·æœåŠ¡è¯·æ±‚ã€‚</li>
</ul>
<h2 data-id="heading-3">ä¸»è¦ç‰¹ç‚¹</h2>
<ul>
<li><strong>å‰åç«¯åˆ†ç¦»ï¼š</strong> RuYiAdmin é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œå‰ç«¯åŸºäºVueElementAdminï¼Œä½¿ç”¨ Vue2 å’Œ Element UIï¼Œåç«¯åŸºäº .NET 9 æ„å»ºã€‚</li>
<li><strong>ä»£ç è‡ªåŠ¨ç”Ÿæˆï¼š</strong> æ”¯æŒä¸€é”®ç”Ÿæˆè§†å›¾å±‚ã€æ§åˆ¶å±‚ã€æœåŠ¡å±‚ã€ä»“å‚¨å±‚ã€é¢†åŸŸå±‚å’Œ DTO ä¸šåŠ¡æ¨¡å‹å±‚ä»£ç ï¼Œæå¤§åœ°ç¼©çŸ­äº†å¼€å‘å‘¨æœŸã€‚</li>
<li><strong>å¤šæ•°æ®åº“æ”¯æŒï¼š</strong> æ”¯æŒå¤šç§å…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚ MySQLã€SqlServerã€SQLiteã€Oracleã€PostgreSQLã€OpenGaussã€Kingbaseã€DMï¼‰å’Œéå…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚ Redisã€MongoDBã€Elasticsearchã€Meilisearchï¼‰ï¼ŒåŒæ—¶æ”¯æŒåŠ¨æ€æ•°æ®æºï¼Œä»¥æ»¡è¶³ä¸åŒä¼ä¸šçš„éœ€æ±‚ã€‚</li>
<li><strong>é¡¹ç›®å®‰å…¨æ€§é«˜ï¼š</strong> æ”¯æŒ4Aç­‰çº§è®¤è¯ï¼Œæ»¡è¶³ç­‰ä¿ä¸‰çº§è¦æ±‚ï¼Œæ”¯æŒé˜² SQL æ³¨å…¥ã€é˜² Token åŠ«æŒã€é˜²æ¥å£æ¸—é€ä¸æŠ–åŠ¨ï¼Œé›†æˆRSAã€AESåŠå›½äº§ SM åŠ å¯†ç®—æ³•ï¼Œæ”¯æŒå…¨é“¾è·¯HTTPSåŠ å¯†ä¼ è¾“åè®®ï¼Œç¡®ä¿ä¼ä¸šçº§åº”ç”¨çš„å®‰å…¨æ€§ã€‚</li>
<li>æ”¯æŒå¾®æœåŠ¡ï¼Œæ”¯æŒæœåŠ¡çš„æ³¨å†Œã€å‘ç°ã€å¥åº·æ£€æŸ¥ã€ç†”æ–­å’Œé™çº§ã€‚</li>
</ul>
<h2 data-id="heading-4">é¡¹ç›®æŠ€æœ¯æ ˆ</h2>
<ul>
<li>å‰ç«¯ï¼šVue2ã€Element UIã€Node.jsç­‰ã€‚</li>
<li>åç«¯ï¼šC#ã€.NET 9ã€AspNetCoreRateLimitã€SqlSugarã€AutoMapperã€SignalRã€MiniProfilerã€CAPã€RabbitMQã€Redisã€Consulç­‰ã€‚</li>
</ul>
<h2 data-id="heading-5">å®‰è£…æ•™ç¨‹</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65b33a329e714542a17f15a749c938dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=0WWCIdLd%2Faw20BukKEaqgx5zrqs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">è½¯ä»¶æ¶æ„å›¾</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3db5bfe168441d1b5a630b0847de675~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=2DlGneAThLO%2F%2FNVP%2BkB%2F3CsB9C0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">é¡¹ç›®æºä»£ç </h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3c6ad0bca55418bbd2a130858947253~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=JE1JKADfx6%2BE0636k3ISq3c4KNg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">é¡¹ç›®æ•ˆæœæˆªå›¾</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/489788f978e647079dcde6b683d4ce07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=PzyLvIRn2FHItYYAjmYAfrbq5Cc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87684fb26e814032984594a89933da8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=uk9lX55RF83vdo%2F4CJ8608bEz3g%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0012a7ea5bb6423085e54c4f52950e84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=1i6Ymt8MXDOzL6w2tLHPqstBVCc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/540f5a18b2e94474b7fe968a768c4728~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=1csLmkfdGEfWW7CikJnNYvMEldk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eae99d04517344fb80532d6b8940aa08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=oXSPnqnaAYMU1kddBS%2BEUm8Y9EU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5be9962d5b21477492843030f7b5f59c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=eeM0HPwEeVdtbu8YBdWAUnwjTO8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c62a706866443129fcf0441dc89d3fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=G76RIi%2FdjKjYHIXqbnWn7V%2FcJU8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f564806e8bb54a8792cfd0b49f6f691b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=Z%2FmQ%2FYAKUXqQ3KH2HPUKbDIbxIg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78a75d60b53d42b28a993bfc96e77cf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=w3sMG%2B8jW9GNgls2wFXBthz32Uc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d13e94a93b24727b080c8e1b347b446~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=bUw1cAI%2FEhzh76uVg5%2FZFVRYEIY%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45424de315834001840af8e424a3be6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=3H%2FSkFl14L3PzX2Ni6DmyjOqnxQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/183804178d3344f4baee493cceb9f31f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=ilhm5aanDv8w9w%2F6IBCrc%2BJJyq4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/292198da5fc84f1a8dbd773f2f09d054~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=pqqqqxYzNaPUPmecDKA0Js5EYvE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/696ccdf29bb3453eb610fb98a0e50b0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=blsKHgnzg7CyhoHLAJ4HTGa8Psg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">é¡¹ç›®æºç åœ°å€</h2>
<p>æ›´å¤šé¡¹ç›®å®ç”¨åŠŸèƒ½å’Œç‰¹æ€§æ¬¢è¿å‰å¾€é¡¹ç›®å¼€æºåœ°å€æŸ¥çœ‹ğŸ‘€ï¼Œåˆ«å¿˜äº†ç»™é¡¹ç›®ä¸€ä¸ªStaræ”¯æŒğŸ’–ã€‚</p>
<ul>
<li><strong>Giteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fpang-mingjun%2FRuYiAdmin" target="_blank" title="https://gitee.com/pang-mingjun/RuYiAdmin" ref="nofollow noopener noreferrer">gitee.com/pang-mingjuâ€¦</a></li>
</ul>
<h2 data-id="heading-10">ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰</h2>
<p>è¯¥é¡¹ç›®å·²æ”¶å½•åˆ°C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰ä¸­ï¼Œå…³æ³¨ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰èƒ½è®©ä½ åŠæ—¶äº†è§£C#ã€.NETå’Œ.NET Coreé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œæœ€ä½³å®è·µï¼Œæé«˜å¼€å‘å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚å‘å·²æŒ–ï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒæäº¤PRæ¨èæˆ–è‡ªèï¼ˆ<strong>è®©ä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶ä¸è¢«åŸ‹æ²¡ğŸ¤</strong>ï¼‰ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></li>
<li><strong>Giteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fysgdaydayup%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">gitee.com/ysgdaydayupâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ€å¼ºã€Œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´ã€æ™ºèƒ½ä½“â€”åŸºäºè…¾è®¯å…ƒå™¨Ã—TextInå¤§æ¨¡å‹åŠ é€Ÿå™¨Ã—æ··å…ƒå¤§æ¨¡å‹çš„å®æˆ˜æ„å»º]]></title>    <link>https://juejin.cn/post/7587965908289110026</link>    <guid>https://juejin.cn/post/7587965908289110026</guid>    <pubDate>2025-12-26T14:09:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965908289110026" data-draft-id="7588086766235582502" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ€å¼ºã€Œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´ã€æ™ºèƒ½ä½“â€”åŸºäºè…¾è®¯å…ƒå™¨Ã—TextInå¤§æ¨¡å‹åŠ é€Ÿå™¨Ã—æ··å…ƒå¤§æ¨¡å‹çš„å®æˆ˜æ„å»º"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T14:09:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CodeJourney"/> <meta itemprop="url" content="https://juejin.cn/user/3558441089502232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ€å¼ºã€Œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´ã€æ™ºèƒ½ä½“â€”åŸºäºè…¾è®¯å…ƒå™¨Ã—TextInå¤§æ¨¡å‹åŠ é€Ÿå™¨Ã—æ··å…ƒå¤§æ¨¡å‹çš„å®æˆ˜æ„å»º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3558441089502232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CodeJourney
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T14:09:52.000Z" title="Fri Dec 26 2025 14:09:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æœ€å¼ºã€Œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´ã€æ™ºèƒ½ä½“â€”åŸºäºè…¾è®¯å…ƒå™¨Ã—TextInÃ—æ··å…ƒå¤§æ¨¡å‹çš„å®æˆ˜æ„å»º</h2>
<h2 data-id="heading-1">ä¸€ã€é¡¹ç›®èƒŒæ™¯</h2>
<p>åœ¨â€œåŒå‡â€æ”¿ç­–æ·±åŒ–ä¸æ•™è‚²æ•°å­—åŒ–æŒç»­æ¨è¿›çš„èƒŒæ™¯ä¸‹ï¼Œ<strong>å­¦ç”Ÿå­¦ä¸šè¯„ä»·æ­£åœ¨ä»â€œå”¯åˆ†æ•°è®ºâ€å‘â€œæ•°æ®é©±åŠ¨çš„å…¨é¢æˆé•¿åˆ†æâ€è½¬å‹</strong>ã€‚æˆç»©å•ä¸å†åªæ˜¯ç®€å•çš„åˆ†æ•°æ±‡æ€»ï¼Œè€Œæ˜¯è•´å«ç€å­¦ç”Ÿå­¦ä¹ çŠ¶æ€ã€å­¦ç§‘ä¼˜åŠ¿ã€æ³¢åŠ¨è¶‹åŠ¿ä»¥åŠæ½œåœ¨å¿ƒç†å‹åŠ›çš„é‡è¦æ•°æ®è½½ä½“ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨å½“å‰æ•™å­¦å®è·µä¸­ä»æ™®éå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li><strong>æˆç»©åˆ†æç»´åº¦å•ä¸€</strong>ï¼šå¤šæ•°å­¦æ ¡æˆ–ç­çº§ä»åœç•™åœ¨å¹³å‡åˆ†ã€æ’åç­‰é™æ€ç»Ÿè®¡å±‚é¢ï¼Œç¼ºä¹å¯¹ä¸ªäººæˆé•¿è½¨è¿¹ã€å­¦ç§‘ç»“æ„å¤±è¡¡ã€é˜¶æ®µæ€§æ³¢åŠ¨çš„æ·±åº¦åˆ†æï¼›</li>
<li><strong>æ•°æ®å¤„ç†æˆæœ¬é«˜</strong>ï¼šå¤§é‡æˆç»©å•ä»¥ PDFã€æ‰«æä»¶ã€ç…§ç‰‡ç­‰éç»“æ„åŒ–å½¢å¼å­˜åœ¨ï¼Œäººå·¥æ•´ç†è€—æ—¶è€—åŠ›ï¼Œéš¾ä»¥è§„æ¨¡åŒ–åº”ç”¨ï¼›</li>
<li><strong>å¿ƒç†å…³æ€€é•¿æœŸç¼ºä½</strong>ï¼šæˆç»©æ³¢åŠ¨å¾€å¾€ç›´æ¥å½±å“å­¦ç”Ÿæƒ…ç»ªä¸è‡ªæˆ‘è®¤çŸ¥ï¼Œä½†ç°å®ä¸­æ•™å¸ˆç²¾åŠ›æœ‰é™ï¼Œå­¦ç”Ÿç¼ºä¹ç¨³å®šã€ä½é—¨æ§›çš„æƒ…ç»ªç–å¯¼ä¸æˆé•¿é™ªä¼´æ¸ é“ï¼›</li>
<li><strong>â€œåˆ†æ•°å‹åŠ›â€æ„ŸçŸ¥æ»å</strong>ï¼šå¤šæ•°å¿ƒç†å¹²é¢„å‘ç”Ÿåœ¨é—®é¢˜æ˜¾æ€§åŒ–ä¹‹åï¼Œç¼ºä¹åŸºäºå­¦ä¸šæ•°æ®çš„å‰ç½®é£é™©æ„ŸçŸ¥ä¸æ¸©å’Œä»‹å…¥æœºåˆ¶ã€‚</li>
</ul>
<p>éšç€å¤§æ¨¡å‹æŠ€æœ¯ä¸æ™ºèƒ½ä½“å¹³å°çš„æˆç†Ÿï¼Œè¿™ä¸€å±€é¢æ­£åœ¨å‘ç”Ÿæ”¹å˜ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2eb4b8383674ceab99d5223668c9255~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ki0K39rMOwyMhHT3SZrXDhFUR8Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æœ¬é¡¹ç›®åŸºäº <strong>è…¾è®¯å…ƒå™¨æ™ºèƒ½ä½“æ„å»ºå¹³å°</strong>ï¼Œèåˆ <strong>TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨çš„é«˜ç²¾åº¦ OCR ä¸è¡¨æ ¼ç»“æ„åŒ–èƒ½åŠ›</strong>ï¼Œå¹¶å¼•å…¥ <strong>æ··å…ƒå¤§æ¨¡å‹çš„å¤šæ¨¡æ€ç†è§£ä¸æƒ…ç»ªæ¨ç†èƒ½åŠ›</strong>ï¼Œæ„å»ºä¸€å¥— <strong>â€œç­çº§å¤šç»´åº¦æˆç»©åˆ†æ Ã— å­¦ä¸šå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´æ™ºèƒ½ä½“â€</strong>ã€‚</p>
<p>è¯¥æ™ºèƒ½ä½“ä¸ä»…èƒ½å¤Ÿè‡ªåŠ¨å®Œæˆæˆç»©å•çš„é«˜ç²¾åº¦è§£æä¸å¤šç»´ç»Ÿè®¡åˆ†æï¼Œè¿˜èƒ½åœ¨æ­¤åŸºç¡€ä¸Šï¼š</p>
<ul>
<li>è¯†åˆ«å­¦ç”Ÿæ½œåœ¨çš„å­¦ä¸šå‹åŠ›ä¿¡å·ä¸æƒ…ç»ªé£é™©ï¼›</li>
<li>ä»¥<strong>éè¯„åˆ¤ã€ä½å‹åŠ›</strong>çš„æ–¹å¼è¿›è¡Œæƒ…ç»ªç–å¯¼ä¸æ­£å‘å¼•å¯¼ï¼›</li>
<li>ä¸ºæ•™å¸ˆæä¾›æ•°æ®é©±åŠ¨çš„ç­çº§ç”»åƒä¸å¹²é¢„å‚è€ƒï¼›</li>
<li>ä¸ºå­¦ç”Ÿæä¾›æŒç»­ã€ç¨³å®šã€å¯å¯¹è¯çš„æˆé•¿é™ªä¼´ã€‚</li>
</ul>
<p>é€šè¿‡å°†<strong>å­¦ä¸šæ•°æ®åˆ†æ</strong>ä¸<strong>æƒ…ç»ªå…³æ€€æ™ºèƒ½ä½“</strong>æ·±åº¦èåˆï¼Œæœ¬é¡¹ç›®æ¢ç´¢äº†ä¸€ç§é¢å‘çœŸå®æ•™å­¦åœºæ™¯çš„ <strong>â€œå­¦ä¸šâ€”å¿ƒç†ååŒå‹ AI Agentâ€</strong> è½åœ°è·¯å¾„ï¼Œä¸ºæ™ºæ…§æ•™è‚²ä¸å­¦ç”Ÿå¿ƒç†å¥åº·æä¾›å¯å¤åˆ¶ã€å¯æ‰©å±•çš„æŠ€æœ¯å®è·µèŒƒå¼ã€‚</p>
<h3 data-id="heading-2">1.1æ•ˆæœæ¼”ç¤º</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d57627925b4243978ca89258060cf99b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=eOcYAoGe9bYgcIOhxN1mIv0NrIM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d4048b33f5645c89d6aea3bb8d78337~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=CX5jRvK5NI64FtoG8aq6hZVd2Mw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0037f72807f4b51b007dbdb2454f9b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=Hl%2BTI%2BlDKoYJhZ0CtMjEdiS%2FMRc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2939034d53d942cd9a97d0d183fa3ca1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=4GB%2F4JZVkN2H7CnP4ZG1aQCj14E%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/847a97f1ea684c01abd3a81638a7ea98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=EcYkOd6A9hjwsEq9TFDQPl56C5E%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc1c5397c2384af8b9adbde1ec4de34b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=1EEsHs%2B2gdoOW4o3Z4AC8RDdGe8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-3">äºŒã€é¡¹ç›®çŸ¥è¯†ç‚¹æ¦‚è§ˆ</h2>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¹¶éå•ä¸€ä¾èµ–æŸä¸€ä¸ªå¤§æ¨¡å‹æˆ–å·¥å…·ï¼Œè€Œæ˜¯é€šè¿‡<strong>æ™ºèƒ½ä½“å¹³å° + æ–‡æ¡£ç†è§£å¼•æ“ + é€šç”¨å¤§æ¨¡å‹</strong>çš„ååŒï¼Œæ„å»ºä¸€å¥—é¢å‘çœŸå®æ•™è‚²åœºæ™¯çš„å¤åˆå‹ AI ç³»ç»Ÿã€‚ä»¥ä¸‹å¯¹é¡¹ç›®æ¶‰åŠçš„ä¸‰é¡¹æ ¸å¿ƒæŠ€æœ¯èƒ½åŠ›è¿›è¡Œç®€è¦è¯´æ˜ã€‚</p>
<h3 data-id="heading-4">2.1 ä»€ä¹ˆæ˜¯è…¾è®¯å…ƒå™¨ï¼Ÿ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddd5a04e3d664216af67775035787389~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=rlQesesHT9brPqaYLppfVmc5jfQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>è…¾è®¯å…ƒå™¨</strong>æ˜¯è…¾è®¯æ¨å‡ºçš„ä¸€ç«™å¼ <strong>AI æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ„å»ºä¸è¿è¡Œå¹³å°</strong>ï¼Œé¢å‘å¼€å‘è€…æä¾›ä»èƒ½åŠ›ç¼–æ’ã€æ¨¡å‹è°ƒç”¨åˆ°ä¸Šä¸‹æ–‡ç®¡ç†çš„å®Œæ•´æ™ºèƒ½ä½“åŸºç¡€è®¾æ–½ã€‚</p>
<p>ä¸ä¼ ç»Ÿâ€œå•è½®å¯¹è¯å¼ AIâ€ä¸åŒï¼Œè…¾è®¯å…ƒå™¨å¼ºè°ƒçš„æ˜¯ï¼š</p>
<ul>
<li><strong>å¯æ„ŸçŸ¥ç¯å¢ƒ</strong></li>
<li><strong>å¯è§„åˆ’æµç¨‹</strong></li>
<li><strong>å¯è°ƒç”¨å·¥å…·</strong></li>
<li><strong>å¯æŒç»­è®°å¿†</strong></li>
</ul>
<p>å³å…·å¤‡å®Œæ•´â€œæ„ŸçŸ¥â€”å†³ç­–â€”è¡ŒåŠ¨â€”åé¦ˆâ€é—­ç¯çš„æ™ºèƒ½ä½“èƒ½åŠ›ã€‚</p>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡è…¾è®¯å…ƒå™¨ï¼š</p>
<ul>
<li>å°† OCRã€æ•°æ®åˆ†æã€å¤§æ¨¡å‹æ¨ç†ç­‰èƒ½åŠ›å°è£…ä¸ºç‹¬ç«‹èŠ‚ç‚¹ï¼›</li>
<li>é€šè¿‡æµç¨‹ç¼–æ’æ–¹å¼æ„å»ºå¤šæ­¥éª¤æ™ºèƒ½ä½“ä»»åŠ¡ï¼›</li>
<li>ä¸ºä¸åŒè§’è‰²ï¼ˆå­¦ç”Ÿ / æ•™å¸ˆï¼‰é…ç½®å·®å¼‚åŒ–äº¤äº’é€»è¾‘ï¼›</li>
<li>ç®¡ç†æ™ºèƒ½ä½“ä¸Šä¸‹æ–‡è®°å¿†ä¸æƒé™è¾¹ç•Œã€‚</li>
</ul>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œè…¾è®¯å…ƒå™¨ä½œä¸º<strong>æ™ºèƒ½ä½“çš„â€œä¸­æ¢ç³»ç»Ÿâ€</strong>ï¼Œè´Ÿè´£ä¸²è”æˆç»©è§£æã€æ•°æ®åˆ†æã€å‹åŠ›æ„ŸçŸ¥ä¸æƒ…ç»ªé™ªä¼´ç­‰å¤šä¸ªèƒ½åŠ›æ¨¡å—ï¼Œå®ç°å¤æ‚æ•™è‚²åœºæ™¯ä¸‹çš„ç¨³å®šè¿è¡Œä¸å¯æ‰©å±•è½åœ°ã€‚</p>
<h3 data-id="heading-5">2.2 ä»€ä¹ˆæ˜¯ TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨ï¼Ÿ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41905fc77b9f469799ff8cdf65a011e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ArB69xVvX%2FTXzHjNIm9cIJc6btY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨</strong>æ˜¯ä¸€å¥—é¢å‘ <strong>å¤æ‚æ–‡æ¡£ç†è§£åœºæ™¯</strong> çš„æ™ºèƒ½è§£æå¼•æ“ï¼Œæ ¸å¿ƒèƒ½åŠ›æ˜¯å°† <strong>éç»“æ„åŒ–æ–‡æ¡£é«˜ç²¾åº¦è½¬åŒ–ä¸ºç»“æ„åŒ–æ•°æ®</strong>ã€‚</p>
<p>åœ¨æ•™è‚²åœºæ™¯ä¸­ï¼Œæˆç»©å•é€šå¸¸å­˜åœ¨ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ ¼å¼ä¸ç»Ÿä¸€ã€æ¨¡æ¿å¤šæ ·ï¼›</li>
<li>è¡¨æ ¼ç»“æ„å¤æ‚ï¼Œå­˜åœ¨åˆå¹¶å•å…ƒæ ¼ï¼›</li>
<li>æ¥æºå¤šä¸ºæ‰«æä»¶æˆ–æ‹ç…§å›¾ç‰‡ï¼›</li>
<li>å«æœ‰å¤§é‡ç›¸ä¼¼å­—æ®µï¼Œäººå·¥æ ¡å¯¹æˆæœ¬é«˜ã€‚</li>
</ul>
<p>TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨é€šè¿‡ <strong>å¤§æ¨¡å‹ + è§„åˆ™å¼•æ“ + è§†è§‰ç†è§£</strong> çš„æ–¹å¼ï¼Œæä¾›ï¼š</p>
<ul>
<li>é«˜ç²¾åº¦ OCR æ–‡å­—è¯†åˆ«ï¼›</li>
<li>è¡¨æ ¼ç»“æ„è‡ªåŠ¨è¿˜åŸï¼›</li>
<li>å­—æ®µè¯­ä¹‰è¯†åˆ«ä¸å¯¹é½ï¼›</li>
<li>é”™è¯¯å®¹å¿ä¸çº åèƒ½åŠ›ã€‚</li>
</ul>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼ŒTextIn è´Ÿè´£å°†æˆç»©å•ä»â€œçœ‹å¾—æ‡‚ä½†ç”¨ä¸äº†â€çš„æ–‡æ¡£å½¢æ€ï¼Œè½¬åŒ–ä¸º <strong>å¯è®¡ç®—ã€å¯åˆ†æã€å¯æ¨ç†</strong> çš„æ ‡å‡†åŒ–æ•°æ®ï¼Œä¸ºåç»­ç­çº§åˆ†æä¸æƒ…ç»ªåˆ¤æ–­æä¾›å¯é è¾“å…¥åŸºç¡€ã€‚</p>
<h3 data-id="heading-6">2.3 ä»€ä¹ˆæ˜¯æ··å…ƒå¤§æ¨¡å‹ï¼Ÿ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0673ae7d83ac4283a560cad6a500d7b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=8cvZ7ZhwNeTN4Jj9iNLGUZfSB2s%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æ··å…ƒå¤§æ¨¡å‹</strong>æ˜¯è…¾è®¯è‡ªç ”çš„é€šç”¨å¤§è¯­è¨€æ¨¡å‹ä½“ç³»ï¼Œå…·å¤‡è‡ªç„¶è¯­è¨€ç†è§£ã€é€»è¾‘æ¨ç†ã€æƒ…ç»ªè¯†åˆ«ä¸å†…å®¹ç”Ÿæˆç­‰å¤šé¡¹èƒ½åŠ›ï¼Œé€‚ç”¨äºå¤æ‚ã€å¤šè½®ã€ä¸Šä¸‹æ–‡æ•æ„Ÿçš„äº¤äº’åœºæ™¯ã€‚</p>
<p>ç›¸è¾ƒäºä»…ç”¨äºæ–‡æœ¬ç”Ÿæˆçš„å¤§æ¨¡å‹ï¼Œæ··å…ƒæ›´å¼ºè°ƒï¼š</p>
<ul>
<li><strong>ä¸Šä¸‹æ–‡è¿ç»­ç†è§£èƒ½åŠ›</strong></li>
<li><strong>å¤šç»´åº¦è¯­ä¹‰æ¨ç†èƒ½åŠ›</strong></li>
<li><strong>æƒ…ç»ªä¸æ„å›¾è¯†åˆ«èƒ½åŠ›</strong></li>
<li><strong>å¯æ§ã€ç¨³å¥çš„è¾“å‡ºé£æ ¼</strong></li>
</ul>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæ··å…ƒå¤§æ¨¡å‹ä¸»è¦æ‰¿æ‹…ä¸‰ç±»æ ¸å¿ƒä»»åŠ¡ï¼š</p>
<ol>
<li>
<p><strong>æˆç»©åˆ†æç»“æœçš„è¯­ä¹‰æ€»ç»“ä¸è§£é‡Š</strong>
å°†å†°å†·çš„ç»Ÿè®¡æ•°æ®è½¬åŒ–ä¸ºå­¦ç”Ÿä¸æ•™å¸ˆæ˜“äºç†è§£çš„è‡ªç„¶è¯­è¨€åé¦ˆã€‚</p>
</li>
<li>
<p><strong>å­¦ä¸šå‹åŠ›ä¸æƒ…ç»ªçŠ¶æ€æ¨ç†</strong>
ç»“åˆæˆç»©å˜åŒ–ä¸å­¦ç”Ÿè¯­è¨€è¾“å…¥ï¼Œè¯†åˆ«æ½œåœ¨å‹åŠ›ä¿¡å·ä¸æƒ…ç»ªæ³¢åŠ¨ã€‚</p>
</li>
<li>
<p><strong>é™ªä¼´å¼å¯¹è¯ä¸å¼•å¯¼åé¦ˆ</strong>
ä»¥éè¯„åˆ¤ã€ä½å‹åŠ›çš„æ–¹å¼ä¸å­¦ç”ŸæŒç»­äº’åŠ¨ï¼Œæä¾›æƒ…ç»ªç–å¯¼ä¸æˆé•¿å¼•å¯¼ã€‚</p>
</li>
</ol>
<p>æ··å…ƒå¤§æ¨¡å‹çš„å¼•å…¥ï¼Œä½¿ç³»ç»Ÿä¸ä»…â€œä¼šç®—åˆ†â€ï¼Œæ›´â€œæ‡‚å­¦ç”Ÿâ€ï¼Œæ˜¯å®ç°â€œå­¦ä¸šå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´â€çš„å…³é”®èƒ½åŠ›æ”¯æ’‘ã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€æŠ€æœ¯æ–¹æ¡ˆ</h2>
<p>æœ¬é¡¹ç›®ä»¥â€œ<strong>å­¦ä¸šæ•°æ®å¯ç»“æ„åŒ–ã€å‹åŠ›çŠ¶æ€å¯æ„ŸçŸ¥ã€æˆé•¿é™ªä¼´å¯æŒç»­</strong>â€ä¸ºæ ¸å¿ƒç›®æ ‡ï¼ŒåŸºäºè…¾è®¯å…ƒå™¨æ™ºèƒ½ä½“å¹³å°ï¼Œæ„å»ºä¸€å¥—è¦†ç›– <strong>æ•°æ®é‡‡é›† â†’ æˆç»©åˆ†æ â†’ å‹åŠ›æ„ŸçŸ¥ â†’ æƒ…ç»ªç–å¯¼ â†’ æˆé•¿åé¦ˆ</strong> çš„é—­ç¯å¼ AI æ™ºèƒ½ä½“æŠ€æœ¯æ–¹æ¡ˆã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d86f8711ae1406a9151ad4e83df35b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=L5tq7MPbrKs1DuUFiZ0SN40yAbQ%3D" alt="" loading="lazy"/></p>
<p>æ•´ä½“æ¶æ„é‡‡ç”¨ <strong>â€œå¤šæºæ•°æ®è§£æ + å¤§æ¨¡å‹æ¨ç† + è§„åˆ™ä¸æƒ…ç»ªååŒå†³ç­–â€</strong> çš„è®¾è®¡æ€è·¯ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨çœŸå®æ•™å­¦åœºæ™¯ä¸­å…·å¤‡å¯è§£é‡Šæ€§ã€ç¨³å®šæ€§ä¸å¯æ‰©å±•æ€§ã€‚</p>
<h3 data-id="heading-8">3.1 æ™ºèƒ½ä½“æ€»ä½“æ¶æ„è®¾è®¡ï¼ˆåŸºäºè…¾è®¯å…ƒå™¨ï¼‰</h3>
<p>é¡¹ç›®æ ¸å¿ƒæ™ºèƒ½ä½“æ„å»ºäº <strong>è…¾è®¯å…ƒå™¨å¹³å°</strong>ï¼Œé€šè¿‡æ¨¡å—åŒ–èŠ‚ç‚¹ç¼–æ’çš„æ–¹å¼ï¼Œå®ç°å¤šèƒ½åŠ›ååŒï¼š</p>
<ul>
<li><strong>è¾“å…¥å±‚</strong>ï¼šæˆç»©å•å›¾ç‰‡ / PDF / æ‰«æä»¶ã€å­¦ç”Ÿè‡ªç„¶è¯­è¨€è¾“å…¥ï¼ˆæƒ…ç»ªå€¾è¯‰ã€å­¦ä¹ å›°æƒ‘ï¼‰</li>
<li><strong>èƒ½åŠ›å±‚</strong>ï¼š
<ul>
<li>OCR ä¸è¡¨æ ¼è§£æèŠ‚ç‚¹ï¼ˆTextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨ï¼‰</li>
<li>æˆç»©ç»Ÿè®¡ä¸è¶‹åŠ¿åˆ†æèŠ‚ç‚¹</li>
<li>å­¦ä¸šå‹åŠ›æ„ŸçŸ¥ä¸æƒ…ç»ªæ¨ç†èŠ‚ç‚¹ï¼ˆæ··å…ƒå¤§æ¨¡å‹ï¼‰</li>
<li>å¯¹è¯ä¸é™ªä¼´å“åº”èŠ‚ç‚¹</li>
</ul>
</li>
<li><strong>è¾“å‡ºå±‚</strong>ï¼š
<ul>
<li>ç­çº§å¤šç»´åº¦æˆç»©åˆ†ææŠ¥å‘Š</li>
<li>å­¦ç”Ÿä¸ªæ€§åŒ–å­¦ä¹ ä¸æƒ…ç»ªåé¦ˆ</li>
<li>æ•™å¸ˆä¾§ç»“æ„åŒ–åˆ†æä¸é£é™©æç¤º</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4369939866ab4924a33dd176ee3f395b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=CQiOMndjw6tdjYy5f4jNDATEbG4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é€šè¿‡è…¾è®¯å…ƒå™¨çš„ <strong>æµç¨‹ç¼–æ’ã€ä¸Šä¸‹æ–‡è®°å¿†ä¸æƒé™æ§åˆ¶èƒ½åŠ›</strong>ï¼Œå®ç°å­¦ç”Ÿç«¯ä¸æ•™å¸ˆç«¯çš„æ™ºèƒ½ä½“èƒ½åŠ›éš”ç¦»ä¸ååŒã€‚</p>
<hr/>
<h3 data-id="heading-9">3.2 æˆç»©å•é«˜ç²¾åº¦è§£ææ–¹æ¡ˆï¼ˆTextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨ï¼‰</h3>
<p>é’ˆå¯¹æˆç»©å•<strong>æ ¼å¼å¤šæ ·ã€è¡¨æ ¼ç»“æ„å¤æ‚ã€æ‰«æè´¨é‡å‚å·®ä¸é½</strong>çš„é—®é¢˜ï¼Œç³»ç»Ÿå¼•å…¥ <strong>TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨</strong>ï¼Œå®Œæˆéç»“æ„åŒ–æˆç»©å•çš„é«˜ç²¾åº¦ç»“æ„åŒ–å¤„ç†ã€‚</p>
<p>æ ¸å¿ƒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¤šæ ¼å¼æ”¯æŒ</strong>ï¼šæ”¯æŒå›¾ç‰‡ã€PDFã€æ‰«æä»¶ç­‰å¤šç§è¾“å…¥å½¢å¼ï¼›</li>
<li><strong>è¡¨æ ¼ç»“æ„è¿˜åŸ</strong>ï¼šè‡ªåŠ¨è¯†åˆ«è¡¨å¤´ã€åˆå¹¶å•å…ƒæ ¼ã€å­¦ç§‘åˆ—ä¸å­¦ç”Ÿè¡Œï¼›</li>
<li><strong>å­—æ®µè¯­ä¹‰è¯†åˆ«</strong>ï¼šåŒºåˆ†å§“åã€å­¦å·ã€å•ç§‘æˆç»©ã€æ€»åˆ†ã€æ’åç­‰å…³é”®å­—æ®µï¼›</li>
<li><strong>é”™è¯¯å®¹å¿ä¸ä¿®æ­£</strong>ï¼šå¯¹å€¾æ–œã€æ¨¡ç³Šã€ä½åˆ†è¾¨ç‡æ–‡æ¡£å…·å¤‡è¾ƒå¼ºé²æ£’æ€§ã€‚</li>
</ul>
<p>è¾“å‡ºç»“æœä¸ºæ ‡å‡†åŒ– JSON / è¡¨æ ¼ç»“æ„æ•°æ®ï¼Œä¸ºåç»­åˆ†æä¸å¤§æ¨¡å‹æ¨ç†æä¾›å¯é æ•°æ®åŸºç¡€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/339fd18091694f2c9ef78c43166a095f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=AxTqdkV2l6GeaZMgkR7onm3N79o%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-10">3.3 å­¦ä¸šå‹åŠ›æ„ŸçŸ¥ä¸æƒ…ç»ªæ¨ç†æœºåˆ¶ï¼ˆæ··å…ƒå¤§æ¨¡å‹ï¼‰</h3>
<p>åŒºåˆ«äºä¼ ç»Ÿä»…åŸºäºåˆ†æ•°çš„åˆ†ææ–¹å¼ï¼Œæœ¬é¡¹ç›®å¼•å…¥ <strong>â€œå­¦ä¸šå‹åŠ›æ„ŸçŸ¥æ¨¡å‹â€</strong>ï¼Œå°†æˆç»©æ•°æ®ä¸å­¦ç”Ÿè¯­è¨€è¾“å…¥è¿›è¡Œè”åˆæ¨ç†ã€‚</p>
<p>å‹åŠ›è¯†åˆ«ä¿¡å·æ¥æºåŒ…æ‹¬ï¼š</p>
<ul>
<li>æˆç»©è¿ç»­ä¸‹é™æˆ–æ³¢åŠ¨åŠ å‰§ï¼›</li>
<li>å•ç§‘é•¿æœŸä½äºç­çº§å‡å€¼ï¼›</li>
<li>å­¦ä¸šè´Ÿæ‹…ç›¸å…³é«˜é¢‘æƒ…ç»ªè¯ï¼ˆç„¦è™‘ã€å®³æ€•ã€å¤±æœ›ç­‰ï¼‰ï¼›</li>
<li>è‡ªæˆ‘å¦å®šã€æ¯”è¾ƒå‹è¯­è¨€æ¨¡å¼ã€‚</li>
</ul>
<p>åŸºäº <strong>æ··å…ƒå¤§æ¨¡å‹çš„æƒ…ç»ªç†è§£ä¸ä¸Šä¸‹æ–‡æ¨ç†èƒ½åŠ›</strong>ï¼Œç³»ç»Ÿå¯¹å­¦ç”Ÿå½“å‰çŠ¶æ€è¿›è¡Œç»¼åˆåˆ¤æ–­ï¼Œå¹¶åˆ’åˆ†ä¸ºä¸åŒå‹åŠ›ç­‰çº§ï¼Œä½œä¸ºåç»­å¹²é¢„ç­–ç•¥çš„ä¾æ®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98556f886aa34d80b2bfad7672c8c9a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=siCI4wV0%2FdJN2JZR2OGGqMEfcNY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-11">å››ã€æ­å»ºã€Œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´ã€æ™ºèƒ½ä½“</h2>
<p>åœ¨å®Œæˆé¡¹ç›®èƒŒæ™¯ã€æ ¸å¿ƒæŠ€æœ¯é€‰å‹ä¸æ•´ä½“æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡ä¹‹åï¼Œæœ¬ç« å°†å›´ç»•<strong>å¦‚ä½•åŸºäºè…¾è®¯å…ƒå™¨å®é™…æ­å»ºè¯¥æ™ºèƒ½ä½“</strong>å±•å¼€ï¼Œé‡ç‚¹ä»‹ç»æ™ºèƒ½ä½“çš„åˆ›å»ºæµç¨‹ã€èƒ½åŠ›èŠ‚ç‚¹é…ç½®æ–¹å¼ä»¥åŠå…³é”®é€»è¾‘çš„è½åœ°å®ç°æ€è·¯ï¼Œç¡®ä¿æ–¹æ¡ˆä¸ä»…â€œèƒ½è®²æ¸…â€ï¼Œä¹Ÿâ€œèƒ½è·‘èµ·æ¥â€ã€‚</p>
<h3 data-id="heading-12">4.1 è…¾è®¯å…ƒå™¨æ™ºèƒ½ä½“åˆ›å»º</h3>
<p>åœ¨è…¾è®¯å…ƒå™¨å¹³å°ä¸­ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„æ™ºèƒ½ä½“å®ä¾‹ï¼Œå¹¶æ˜ç¡®å…¶<strong>è§’è‰²å®šä½ä¸æœåŠ¡å¯¹è±¡</strong>ã€‚</p>
<p>æœ¬é¡¹ç›®é‡‡ç”¨ <strong>â€œä¸€ä½“å¤šè§’è‰²â€</strong> çš„è®¾è®¡æ€è·¯ï¼Œå³ï¼š</p>
<ul>
<li>
<p><strong>å­¦ç”Ÿä¾§æ™ºèƒ½ä½“</strong></p>
<ul>
<li>é¢å‘å­¦ç”Ÿæä¾›æˆç»©è§£è¯»ã€å­¦ä¹ åé¦ˆä¸æƒ…ç»ªé™ªä¼´</li>
<li>å¼ºè°ƒå…±æƒ…ã€å¼•å¯¼ä¸éè¯„åˆ¤å¼å¯¹è¯</li>
</ul>
</li>
<li>
<p><strong>æ•™å¸ˆä¾§æ™ºèƒ½ä½“</strong></p>
<ul>
<li>é¢å‘æ•™å¸ˆæä¾›ç­çº§æˆç»©ç”»åƒã€è¶‹åŠ¿åˆ†æä¸é£é™©æç¤º</li>
<li>å¼ºè°ƒæ•°æ®å®¢è§‚æ€§ä¸å¯è§£é‡Šæ€§ï¼Œé¿å…æƒ…ç»ªåŒ–æ ‡ç­¾</li>
</ul>
</li>
</ul>
<p>åœ¨å…ƒå™¨ä¸­é€šè¿‡<strong>ä¸åŒçš„æç¤ºè¯æ¨¡æ¿ä¸æƒé™é…ç½®</strong>ï¼Œå®ç°åŒä¸€å¥—åº•å±‚èƒ½åŠ›ã€ä¸åŒäº¤äº’è¡¨ç°çš„æ™ºèƒ½ä½“åˆ†æ”¯ã€‚</p>
<p>ç™»å½•è…¾è®¯å…ƒå™¨å¹³å°åï¼Œç‚¹å‡»å³ä¸Šè§’ ã€Œä¸ªäººç©ºé—´ã€ï¼Œè¿›å…¥ ã€Œæˆ‘çš„æ™ºèƒ½ä½“ã€ é¡µé¢ï¼Œé€‰æ‹© ã€Œåˆ›å»ºæ™ºèƒ½ä½“ã€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a638153d1284763844ee1fed264d714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=RB%2FynbQp43FuRprxErSqKi%2FJhLE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨æ™ºèƒ½ä½“ç±»å‹é€‰æ‹©ç•Œé¢ä¸­ï¼Œé€‰æ‹© ã€Œå¯¹è¯å¼æ™ºèƒ½ä½“ã€ã€‚
è¯¥ç±»å‹é€‚ç”¨äºå…·å¤‡å¤šè½®äº¤äº’ã€æƒ…ç»ªç†è§£ä¸å¤æ‚ä»»åŠ¡å¤„ç†èƒ½åŠ›çš„åº”ç”¨åœºæ™¯ï¼Œé€‚åˆæœ¬é¡¹ç›®ä¸­â€œæˆç»©åˆ†æ + æƒ…ç»ªç–å¯¼â€çš„å¤åˆéœ€æ±‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06ccd17784c74ade914d5943d112bf42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=2v%2BC7b0Tx8gutbyQncBFK8MPZAA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨æ–°å»ºå¯¹è¯å¼æ™ºèƒ½ä½“é¡µé¢ä¸­ï¼Œå¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>
<p>æ™ºèƒ½ä½“åç§°ï¼šç”¨äºå¯¹å¤–å±•ç¤ºä¸è¯†åˆ«</p>
</li>
<li>
<p>æ™ºèƒ½ä½“ç®€ä»‹ï¼šç®€è¦è¯´æ˜æ™ºèƒ½ä½“çš„æ ¸å¿ƒèƒ½åŠ›ä¸ä½¿ç”¨åœºæ™¯</p>
</li>
</ul>
<p>ä¿¡æ¯å¡«å†™å®Œæˆåï¼Œç‚¹å‡» ã€Œæ–°å»ºã€ æŒ‰é’®ï¼Œå®Œæˆæ™ºèƒ½ä½“çš„åŸºç¡€åˆ›å»ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4624904b3ffb4e03b018d84980437176~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=CXn%2FfYRQo8DbbR1u0XUMx0pDyg4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åˆ›å»ºæˆåŠŸåï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è·³è½¬è‡³æ™ºèƒ½ä½“åå°ç®¡ç†é¡µé¢ã€‚åœ¨è¯¥é¡µé¢ä¸­ï¼Œå¯ä»¥å¯¹æ™ºèƒ½ä½“è¿›è¡Œè§’è‰²è®¾å®šã€æ¨¡å‹é€‰æ‹©ã€èƒ½åŠ›é…ç½®ä¸æµ‹è¯•éªŒè¯ç­‰æ“ä½œã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/784f3ad828e84312b3311201df11c2c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=K8QVMzqIWq8OsmdSQvqAstZPoNM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-13">4.2 æ™ºèƒ½ä½“è§’è‰²å®šä½</h3>
<p>åœ¨ ã€Œè§’è‰²è®¾å®š / æç¤ºè¯ã€ æ¨¡å—ä¸­ï¼Œç¼–å†™æ™ºèƒ½ä½“çš„ç³»ç»Ÿæç¤ºè¯ï¼ˆSystem Promptï¼‰ã€‚
å¯ç»“åˆå¹³å°æä¾›çš„ ã€Œæç¤ºè¯ä¸€é”®ä¼˜åŒ–ã€ åŠŸèƒ½ï¼Œå¯¹åˆå§‹æç¤ºè¯è¿›è¡Œç»“æ„åŒ–ä¸è¯­ä¹‰å¢å¼ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/424daf5bee914e3384595a69ff63ce2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=c2Gvak7qZzILwbg165HcFY3xd%2Bg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä»¥ä¸‹ä¸ºæœ¬é¡¹ç›®ä¸­ä½¿ç”¨çš„æ ¸å¿ƒè§’è‰²æç¤ºè¯ï¼Œç”¨äºæ˜ç¡®æ™ºèƒ½ä½“çš„å®šä½ã€èƒ½åŠ›è¾¹ç•Œä¸è¾“å‡ºé£æ ¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ã€è¦æ±‚ã€‘æ‰®æ¼”ä¸€åå­¦ä¸šæˆç»©åˆ†æä¸å‹åŠ›æ„ŸçŸ¥å‹AIå¿ƒç†é™ªä¼´æ™ºèƒ½ä½“ï¼Œèƒ½å¤ŸåŸºäºå­¦ç”Ÿæˆç»©å•æ•°æ®ä¸å­¦ç”Ÿè‡ªç„¶è¯­è¨€è¾“å…¥ï¼Œè¿›è¡Œå¤šç»´åº¦å­¦ä¸šåˆ†æã€å­¦ä¸šå‹åŠ›æ„ŸçŸ¥ï¼Œå¹¶ä»¥éè¯„åˆ¤ã€é™ªä¼´å¼æ–¹å¼ä¸ºå­¦ç”Ÿæä¾›æƒ…ç»ªç–å¯¼ä¸æˆé•¿å¼•å¯¼ï¼ŒåŒæ—¶ä¸ºæ•™å¸ˆæä¾›å»æƒ…ç»ªåŒ–çš„æ•°æ®åˆ†æä¸é£é™©æç¤ºã€‚

ã€åç§°ã€‘å­¦ä¸šæˆç»©åˆ†æä¸å‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´æ™ºèƒ½ä½“

ã€å±æ€§ã€‘AIæ™ºèƒ½ä½“ï¼Œä¸“æ³¨äºå­¦ä¸šæˆç»©åˆ†æä¸å‹åŠ›æ„ŸçŸ¥ï¼Œå…·å¤‡æƒ…ç»ªç†è§£èƒ½åŠ›

ã€äººç‰©å…³ç³»ã€‘å­¦ç”Ÿã€æ•™å¸ˆ

ã€äººç‰©ç»å†ã€‘ç”±æ•™è‚²å¿ƒç†å­¦ä¸“å®¶ã€æ•°æ®ç§‘å­¦å®¶åŠAIå·¥ç¨‹å¸ˆå…±åŒå¼€å‘ï¼Œæ—¨åœ¨é€šè¿‡æŠ€æœ¯æ‰‹æ®µå¸®åŠ©å­¦ç”Ÿç¼“è§£å­¦ä¸šå‹åŠ›ï¼Œä¿ƒè¿›å¥åº·æˆé•¿ã€‚

ã€å¤–è²Œç‰¹å¾ã€‘æ— å®ä½“å½¢æ€ï¼Œä»¥æ–‡å­—å½¢å¼å‘ˆç°

ã€æ€§æ ¼ç‰¹ç‚¹ã€‘æ¸©å’Œã€ç†æ€§ã€ä¸å±…é«˜ä¸´ä¸‹ï¼Œé‡è§†å…±æƒ…ï¼Œä¸ç›´æ¥å¦å®šç”¨æˆ·æ„Ÿå—ï¼Œä¸ä½¿ç”¨å¿ƒç†è¯Šæ–­æˆ–æ ‡ç­¾åŒ–è¯­è¨€ï¼Œè¡¨è¾¾æ¸…æ™°ã€æœ‰ç»“æ„ï¼Œä½†é¿å…è¯´æ•™

ã€è¯­è¨€é£æ ¼ã€‘
- å­¦ç”Ÿç«¯è¾“å‡ºï¼šæ¸©å’Œã€é¼“åŠ±ã€å…±æƒ…å‹è¡¨è¾¾
- æ•™å¸ˆç«¯è¾“å‡ºï¼šå®¢è§‚ã€ä¸­æ€§ã€æ•°æ®é©±åŠ¨è¡¨è¾¾

ã€äººç‰©å–œå¥½ã€‘æ— å…·ä½“å–œå¥½ï¼Œä½†è‡´åŠ›äºå¸®åŠ©å­¦ç”Ÿå’Œæ•™å¸ˆè§£å†³é—®é¢˜

ã€è¾“å‡ºè¦æ±‚ã€‘
- ä½¿ç”¨ç®€ä½“ä¸­æ–‡
- åˆ†ç‚¹è¾“å‡ºæ—¶éœ€é€»è¾‘æ¸…æ™°
- æƒ…ç»ªç–å¯¼æ—¶å…ˆå…±æƒ…ã€å†å¼•å¯¼ã€æœ€åç»™å»ºè®®

ã€èƒ½åŠ›é™åˆ¶ã€‘
- ä¸èƒ½è¿›è¡Œå¿ƒç†ç–¾ç—…è¯Šæ–­æˆ–æ²»ç–—å»ºè®®
- ä¸èƒ½æ›¿ä»£æ•™å¸ˆã€å®¶é•¿æˆ–å¿ƒç†å’¨è¯¢å¸ˆçš„ä¸“ä¸šå†³ç­–
- ä¸è¾“å‡ºä»»ä½•å¯¹å­¦ç”Ÿçš„è´Ÿé¢æ ‡ç­¾æˆ–ä»·å€¼è¯„åˆ¤
- ä¸åŸºäºå•æ¬¡æˆç»©æ³¢åŠ¨åšé•¿æœŸèƒ½åŠ›åˆ¤æ–­

ã€å…¶ä»–è¦æ±‚ã€‘
- é¢å‘å­¦ç”Ÿæ—¶åé™ªä¼´ä¸å¼•å¯¼
- é¢å‘æ•™å¸ˆæ—¶åæ•°æ®ä¸å®¢è§‚åˆ†æ

ã€èƒ½è¾¾æˆä»¥ä¸‹ç”¨æˆ·æ„å›¾ã€‘
<span class="hljs-comment">#æ„å›¾åç§°ï¼šå­¦ä¸šå‹åŠ›ç¼“è§£</span>
<span class="hljs-comment">#æ„å›¾æè¿°ï¼šé€šè¿‡åˆ†æå­¦ç”Ÿæˆç»©å•æ•°æ®å’Œè‡ªç„¶è¯­è¨€è¾“å…¥ï¼Œè¯†åˆ«å­¦ä¸šå‹åŠ›æºï¼Œå¹¶æä¾›æƒ…ç»ªç–å¯¼å’Œæˆé•¿å¼•å¯¼ã€‚</span>
<span class="hljs-comment">#æ„å›¾ç¤ºä¾‹ï¼šå­¦ç”Ÿè¡¨ç¤ºè¿‘æœŸè€ƒè¯•æˆç»©ä¸‹é™ï¼Œæ„Ÿåˆ°ç„¦è™‘ã€‚AIæ™ºèƒ½ä½“é€šè¿‡åˆ†ææˆç»©å•å’Œå­¦ç”Ÿè¾“å…¥ï¼Œå‘ç°å…¶åœ¨æ•°å­¦å’Œç‰©ç†ç§‘ç›®ä¸Šè¡¨ç°ä¸ä½³ï¼Œå¯èƒ½å› æ­¤äº§ç”Ÿç„¦è™‘ã€‚</span>
<span class="hljs-comment">#æ„å›¾å®ç°ï¼šAIæ™ºèƒ½ä½“é¦–å…ˆå…±æƒ…å­¦ç”Ÿçš„æƒ…ç»ªï¼Œç„¶åå¼•å¯¼å­¦ç”Ÿæ‰¾åˆ°å­¦ä¹ æ–¹æ³•ä¸Šçš„ä¸è¶³ï¼Œå¹¶æä¾›å…·ä½“çš„æ”¹è¿›å»ºè®®ï¼Œå¦‚åˆ¶å®šåˆç†çš„å­¦ä¹ è®¡åˆ’ã€è°ƒæ•´å­¦ä¹ ç­–ç•¥ç­‰ã€‚</span>

<span class="hljs-comment">#æ„å›¾åç§°ï¼šæ•™å¸ˆæ•°æ®åˆ†ææ”¯æŒ</span>
<span class="hljs-comment">#æ„å›¾æè¿°ï¼šä¸ºæ•™å¸ˆæä¾›å»æƒ…ç»ªåŒ–çš„æ•°æ®åˆ†æä¸é£é™©æç¤ºï¼Œå¸®åŠ©æ•™å¸ˆæ›´å¥½åœ°äº†è§£å­¦ç”Ÿçš„å­¦ä¹ æƒ…å†µå’Œæ½œåœ¨é—®é¢˜ã€‚</span>
<span class="hljs-comment">#æ„å›¾ç¤ºä¾‹ï¼šæ•™å¸ˆå¸Œæœ›äº†è§£ç­çº§æ•´ä½“å­¦ä¸šè¡¨ç°å’Œæ½œåœ¨é—®é¢˜ã€‚AIæ™ºèƒ½ä½“é€šè¿‡åˆ†æç­çº§æˆç»©å•æ•°æ®ï¼Œå‘ç°æŸäº›ç§‘ç›®æ™®éæˆç»©è¾ƒä½ï¼Œå¯èƒ½å­˜åœ¨æ•™å­¦éš¾ç‚¹æˆ–å­¦ç”Ÿå…´è¶£ä¸è¶³ç­‰é—®é¢˜ã€‚</span>
<span class="hljs-comment">#æ„å›¾å®ç°ï¼šAIæ™ºèƒ½ä½“å°†åˆ†æç»“æœä»¥å®¢è§‚ã€ä¸­æ€§çš„è¯­è¨€å‘ˆç°ç»™æ•™å¸ˆï¼Œå¹¶æå‡ºç›¸åº”çš„æ•™å­¦è°ƒæ•´å»ºè®®ï¼Œå¦‚å¢åŠ äº’åŠ¨ç¯èŠ‚ã€è°ƒæ•´æ•™å­¦è¿›åº¦ç­‰ã€‚</span>

</code></pre>
<p>åœ¨ ã€Œæ¬¢è¿è¯­è®¾ç½®ã€ ä¸­é…ç½®ç”¨æˆ·é¦–æ¬¡è¿›å…¥å¯¹è¯æ—¶çš„å¼•å¯¼è¯­ï¼Œç”¨äºæ˜ç¡®æ™ºèƒ½ä½“èƒ½åŠ›è¾¹ç•Œï¼Œå¹¶å¼•å¯¼ç”¨æˆ·æ­£ç¡®è¾“å…¥ã€‚</p>
<blockquote>
<p>å“ˆå–½ï¼Œæˆ‘æ˜¯å­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´ï¼Œè¯·å‘é€æ‚¨çš„æˆç»©å•ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/089b899d0be34bb4a4833236ca650f44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=%2BM8hx8g4FqnWyZFYQAuWWoFnhnc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨æ¨¡å‹é…ç½®æ¨¡å—ä¸­ï¼Œé€‰æ‹© æ··å…ƒå¤§æ¨¡å‹ ä½œä¸ºæ™ºèƒ½ä½“åº•å±‚æ¨ç†æ¨¡å‹ã€‚
è¯¥æ¨¡å‹åœ¨ä¸­æ–‡ç†è§£ã€å¤šè½®å¯¹è¯ã€æƒ…ç»ªè¯­ä¹‰è¯†åˆ«åŠç»“æ„åŒ–è¾“å‡ºæ–¹é¢è¡¨ç°ç¨³å®šï¼Œé€‚åˆæ•™è‚²ä¸å¿ƒç†é™ªä¼´ç±»åº”ç”¨åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ffdc96f44e940728af717d1f510e0f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ytdwANO3MMaCV08b1EqaCtfteJI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/873f29c47d204257be445d737193360a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=c9%2BbGBAZroAmA%2BQLr02VKVFxJMc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-14">äº”. è…¾è®¯å…ƒå™¨æ™ºèƒ½ä½“å·¥ä½œæµç¼–å†™</h2>
<p>æ™ºèƒ½ä½“çš„æ ¸å¿ƒèƒ½åŠ›ä¸ä»…æ¥æºäºå¤§æ¨¡å‹æœ¬èº«ï¼Œæ›´ä¾èµ–äºæ¸…æ™°ã€å¯æ§çš„å·¥ä½œæµè®¾è®¡ã€‚é€šè¿‡å·¥ä½œæµï¼Œå¯ä»¥å°†â€œç”¨æˆ·è¾“å…¥ â†’ æ•°æ®è§£æ â†’ é€»è¾‘åˆ¤æ–­ â†’ æ¨¡å‹æ¨ç† â†’ ç»“æœè¾“å‡ºâ€æ‹†è§£ä¸ºå¤šä¸ªå¯ç®¡ç†çš„èŠ‚ç‚¹ï¼Œä½¿æ™ºèƒ½ä½“å…·å¤‡ç¨³å®šã€å¯å¤ç”¨çš„ä¸šåŠ¡æ‰§è¡Œèƒ½åŠ›ã€‚</p>
<h3 data-id="heading-15">5.1 å·¥ä½œæµåˆ›å»º</h3>
<p>åœ¨æ™ºèƒ½ä½“åå°ç®¡ç†é¡µé¢ä¸­ï¼Œç‚¹å‡»å·¦ä¾§ ã€Œå·¥ä½œæµç®¡ç†ã€ï¼Œç„¶åç‚¹å‡» ã€Œæ–°å»ºã€ï¼Œå¼€å§‹åˆ›å»ºæ–°çš„æ™ºèƒ½ä½“å·¥ä½œæµã€‚</p>
<p>è¯¥å·¥ä½œæµå°†ä½œä¸ºæ™ºèƒ½ä½“å¤„ç†ç”¨æˆ·è¯·æ±‚çš„ä¸»æ‰§è¡Œé“¾è·¯ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5197f52470042d7ae70e0c0dfbb4183~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=RpQ1wG6LwNV7u3aFHQ%2FMXXV%2Fmws%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨åˆ›å»ºæ–¹å¼é€‰æ‹©å¼¹çª—ä¸­ï¼Œé€‰æ‹© ã€Œæ‰‹åŠ¨å½•å…¥ã€ã€‚</p>
<p>æ‰‹åŠ¨å½•å…¥æ–¹å¼é€‚åˆéœ€è¦ç²¾ç»†æ§åˆ¶é€»è¾‘èŠ‚ç‚¹ã€æ¡ä»¶åˆ†æ”¯ä¸å¤šè§’è‰²è¾“å‡ºçš„å¤æ‚æ™ºèƒ½ä½“åœºæ™¯ï¼Œæœ¬é¡¹ç›®ä¸­çš„â€œæˆç»©åˆ†æ + æƒ…ç»ªç–å¯¼â€æ­£æ˜¯å…¸å‹ä»£è¡¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65d27dbe5df441499a065cc34e242108~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=Zmg2myycjakWEE%2Bc282tzE919Yg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨æ–°å»ºå·¥ä½œæµé¡µé¢ä¸­ï¼Œå¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>
<p>å·¥ä½œæµåç§°ï¼šç”¨äºæ ‡è¯†è¯¥å·¥ä½œæµçš„åŠŸèƒ½ç”¨é€”ï¼ˆå¦‚ï¼šæˆç»©åˆ†æä¸å‹åŠ›æ„ŸçŸ¥ä¸»æµç¨‹ï¼‰</p>
</li>
<li>
<p>å·¥ä½œæµæè¿°ï¼šç®€è¦è¯´æ˜è¯¥å·¥ä½œæµçš„æ‰§è¡Œç›®æ ‡ã€é€‚ç”¨å¯¹è±¡ä¸æ ¸å¿ƒé€»è¾‘</p>
</li>
</ul>
<p>å¡«å†™å®Œæˆåç¡®è®¤åˆ›å»ºï¼Œç³»ç»Ÿå°†ç”Ÿæˆä¸€ä¸ªæ–°çš„å·¥ä½œæµå®ä¾‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fa8fe3a216246ba90bb6d7b105cee01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=C9e7w4P77MjKv6yU6fKHOeOrub8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å·¥ä½œæµåˆ›å»ºå®Œæˆåï¼Œå°†è‡ªåŠ¨è¿›å…¥ å·¥ä½œæµç¼–è¾‘é¢æ¿ã€‚
è¯¥é¢æ¿æ˜¯åç»­è¿›è¡ŒèŠ‚ç‚¹ç¼–æ’ã€æ¡ä»¶åˆ¤æ–­ã€æ¨¡å‹è°ƒç”¨ä¸è¾“å‡ºæ§åˆ¶çš„æ ¸å¿ƒæ“ä½œåŒºåŸŸã€‚</p>
<p>åœ¨é¢æ¿ä¸­ï¼Œå¯ä»¥æ¸…æ™°çœ‹åˆ°ï¼š</p>
<ul>
<li>
<p>å·¥ä½œæµçš„æ•´ä½“æ‰§è¡Œç»“æ„</p>
</li>
<li>
<p>å„åŠŸèƒ½èŠ‚ç‚¹çš„è¿æ¥å…³ç³»</p>
</li>
<li>
<p>å½“å‰å·¥ä½œæµçš„èµ·å§‹èŠ‚ç‚¹ä¸ç»“æŸèŠ‚ç‚¹</p>
</li>
</ul>
<p>åç»­çš„æˆç»©å•è§£æã€å­¦ä¸šåˆ†æã€å‹åŠ›æ„ŸçŸ¥ä¸ç»“æœè¾“å‡ºï¼Œå‡å°†åœ¨è¯¥é¢æ¿ä¸­ä»¥èŠ‚ç‚¹æ–¹å¼é€æ­¥æ„å»ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcae94c4a7f840c09ba9e16214b9fac6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=VvFKelNdcLuycEvtVQL%2FnWm9%2FRM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é…ç½®å·¥ä½œæµçš„å¼€å§‹èŠ‚ç‚¹ï¼Œå®šä¹‰ä¸¤ä¸ªè¾“å…¥å˜é‡ï¼š</p>
<p>imageï¼šç”¨äºæ¥æ”¶å­¦ç”Ÿä¸Šä¼ çš„æˆç»©å•å›¾ç‰‡ï¼Œä½œä¸ºåç»­ OCR è§£æä¸æˆç»©åˆ†æçš„åŸå§‹æ•°æ®è¾“å…¥ã€‚</p>
<p>qï¼šç”¨äºæ¥æ”¶å­¦ç”Ÿä»¥è‡ªç„¶è¯­è¨€å½¢å¼æå‡ºçš„å­¦ä¹ å›°æƒ‘ã€æƒ…ç»ªè¡¨è¾¾æˆ–å…·ä½“åˆ†æéœ€æ±‚ï¼Œä½œä¸ºæ™ºèƒ½ä½“ç†è§£ç”¨æˆ·æ„å›¾ä¸æƒ…ç»ªçŠ¶æ€çš„é‡è¦è¾“å…¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a165583ac8664ccba596d80aa9b393c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=%2BMKCFB5PSwS%2FzokdFvCP7mTCRFM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-16">5.2 æˆç»©å•è§£æèƒ½åŠ›èŠ‚ç‚¹é…ç½®ï¼ˆTextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨æ¥å…¥ï¼‰</h3>
<p>åœ¨æ™ºèƒ½ä½“èƒ½åŠ›ç¼–æ’ä¸­ï¼Œåœ¨å¼€å§‹èŠ‚ç‚¹åéœ€è¦é…ç½® <strong>æˆç»©å•è§£æèŠ‚ç‚¹</strong>ï¼Œä½œä¸ºæ•´ä¸ªç³»ç»Ÿçš„æ•°æ®å¤„ç†è¯†åˆ«ä¸­å¿ƒã€‚</p>
<p>åœ¨å…ƒå™¨æµç¨‹ä¸­ï¼Œè¯¥èŠ‚ç‚¹çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š</p>
<ol>
<li>æ¥æ”¶ç”¨æˆ·ä¸Šä¼ çš„æˆç»©å•æ–‡ä»¶ï¼›</li>
<li>è°ƒç”¨ TextIn å®Œæˆ OCR ä¸è¡¨æ ¼ç»“æ„è¿˜åŸï¼›</li>
<li>è¾“å‡ºåŒ…å«å­¦ç”Ÿä¿¡æ¯ã€å­¦ç§‘æˆç»©ã€æ€»åˆ†ã€æ’åç­‰å­—æ®µçš„ç»“æ„åŒ–ç»“æœï¼›</li>
<li>å°†ç»“æœä¼ é€’ç»™åç»­åˆ†æèŠ‚ç‚¹ã€‚</li>
</ol>
<p>è¿™ä¸€èŠ‚ç‚¹è§£å†³çš„æ˜¯â€œ<strong>æ•°æ®ä»å“ªæ¥ã€æ˜¯å¦å¯é </strong>â€çš„é—®é¢˜ï¼Œæ˜¯åç»­æ‰€æœ‰åˆ†æä¸æ¨ç†çš„å‰æåŸºç¡€ã€‚</p>
<hr/>
<p>å®Œæˆå¼€å§‹èŠ‚ç‚¹é…ç½®åï¼Œéœ€è¦å¼•å…¥ OCR ä¸æ–‡æ¡£ç»“æ„åŒ–è§£æèƒ½åŠ›ã€‚æœ¬æ–¹æ¡ˆé€‰ç”¨ TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨ï¼ˆé€šç”¨æ¨¡å‹ï¼‰ï¼Œç”¨äºå°†æˆç»©å•è§£æä¸º Markdown ç»“æ„åŒ–ç»“æœã€‚</p>
<blockquote>
<p>/ai/service/v1/pdf_to_markdown</p>
</blockquote>
<ul>
<li>è¾“å…¥ï¼šPDFã€å›¾ç‰‡æˆ–æ‰«æä»¶</li>
<li>è¾“å‡ºï¼šJSON ç»“æ„åŒ–æ•°æ®ï¼ŒåŒ…æ‹¬å­¦ç”Ÿä¿¡æ¯ã€è¯¾ç¨‹æˆç»©ã€æ€»è¯„ç­‰çº§ç­‰</li>
<li>æŠ€æœ¯ç‰¹ç‚¹ï¼š
<ul>
<li>å¤šæ¨¡æ€è§£æï¼Œæ”¯æŒå›¾ç‰‡æ–‡å­—ã€è¡¨æ ¼è¯†åˆ«</li>
<li>è‡ªåŠ¨æ ¼å¼æ ‡å‡†åŒ–ï¼Œå…¼å®¹ä¸åŒé™¢æ ¡æ¨¡æ¿</li>
</ul>
</li>
</ul>
<p>pythonè°ƒç”¨ç¤ºä¾‹ï¼š(è™½ç„¶æˆ‘ä»¬åœ¨è…¾è®¯å…ƒå™¨é‡Œå¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä½†æ˜¯è¿˜æ˜¯å»ºè®®ç†è§£ä¸€ä¸‹ä¸‹é¢è¿™æ®µç›´æ¥è°ƒç”¨TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨çš„ä»£ç ï¼Œä¼šè®©æˆ‘ä»¬æ›´å®¹æ˜“ç†è§£)</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> requests

<span class="hljs-keyword">class</span> <span class="hljs-title class_">OCRClient</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, app_id: <span class="hljs-built_in">str</span>, secret_code: <span class="hljs-built_in">str</span></span>):
        self.app_id = app_id
        self.secret_code = secret_code

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">recognize</span>(<span class="hljs-params">self, file_content: <span class="hljs-built_in">bytes</span>, options: <span class="hljs-built_in">dict</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-comment"># æ„å»ºè¯·æ±‚å‚æ•°</span>
        params = {}
        <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> options.items():
            params[key] = <span class="hljs-built_in">str</span>(value)

        <span class="hljs-comment"># è®¾ç½®è¯·æ±‚å¤´</span>
        headers = {
            <span class="hljs-string">"x-ti-app-id"</span>: self.app_id,
            <span class="hljs-string">"x-ti-secret-code"</span>: self.secret_code,
            <span class="hljs-comment"># æ–¹å¼ä¸€ï¼šè¯»å–æœ¬åœ°æ–‡ä»¶</span>
            <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/octet-stream"</span>
            <span class="hljs-comment"># æ–¹å¼äºŒï¼šä½¿ç”¨URLæ–¹å¼</span>
            <span class="hljs-comment"># "Content-Type": "text/plain"</span>
        }

        <span class="hljs-comment"># å‘é€è¯·æ±‚</span>
        response = requests.post(
            <span class="hljs-string">f"/ai/service/v1/pdf_to_markdown"</span>,
            params=params,
            headers=headers,
            data=file_content
        )

        <span class="hljs-comment"># æ£€æŸ¥å“åº”çŠ¶æ€</span>
        response.raise_for_status()
        <span class="hljs-keyword">return</span> response.text

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># åˆ›å»ºå®¢æˆ·ç«¯å®ä¾‹ï¼Œéœ€æ›¿æ¢ä½ çš„API Key</span>
    client = OCRClient(<span class="hljs-string">"ä½ çš„x-ti-app-id"</span>, <span class="hljs-string">"ä½ çš„x-ti-secret-code"</span>)

        <span class="hljs-comment"># æ’å…¥ä¸‹é¢çš„ç¤ºä¾‹ä»£ç </span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()

</code></pre>
<p>åœ¨å¼€å§‹èŠ‚ç‚¹åé€‰æ‹©å·¥å…·èŠ‚ç‚¹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5481084f9f7e443582aaa4e767bf3bf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=EtMb6aPgO5VqR9CpGdLTTT5qzoc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/180a152dbee64442b671f1bd287e8625~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=KfY%2FAW%2FNbMgqorflFE59JU7j0W0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨ HTTP è¯·æ±‚èŠ‚ç‚¹ä¸­ï¼Œéœ€è¦é…ç½®ä»¥ä¸‹ä¸¤ä¸ªå…³é”®è¯·æ±‚å¤´å‚æ•°ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1bdca0bc7b84179a52963f1fb6dc764~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=IDuld1AEEMd4bKxjTuLggClLPr8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å¦‚æœä¸æ¸…æ¥šè¿™ä¸¤ä¸ªå‚æ•°å¦‚ä½•å¡«å†™ï¼Œå¯æŒ‰ä»¥ä¸‹æ­¥éª¤è·å–ï¼š</p>
<ol>
<li>ç™»å½• TextIn æ§åˆ¶å°</li>
<li>è¿›å…¥ å¼€å‘è€…ä¿¡æ¯ / åº”ç”¨ç®¡ç†</li>
<li>æŸ¥çœ‹å¯¹åº”åº”ç”¨çš„ï¼š
x-ti-app-id
x-ti-secret-code</li>
</ol>
<p>âš ï¸ æ³¨æ„ï¼š
äºŒè€…ç»„åˆæ„æˆå”¯ä¸€åˆæ³•è°ƒç”¨å‡­è¯ï¼Œè¯·å¦¥å–„ä¿ç®¡ï¼Œå¯ä»¥åˆ°TextIn æ§åˆ¶å°é‡Œçš„å¼€å‘è€…ä¿¡æ¯å¤„æŸ¥çœ‹ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60227c58544f46df9965d918b170dd23~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=oXWrZk8N%2FRHePTGIt6jXCBem8fI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨APIå‚æ•°åŒºåŸŸè®¾ç½®å˜é‡åã€‚
x-ti-app-id
x-ti-secret-code
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9dfd62aa3a8f49bc9db1cbb56811388a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=OEQ6HosmC%2Fx4tx1c1goXAo7AUOM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨Bodyè¯·æ±‚ä½“ï¼Œæ‰¿è½½å¤æ‚ / å¤§å®¹é‡ / ç»“æ„åŒ–æ•°æ®ï¼Œæ˜¯è¯·æ±‚çš„æ ¸å¿ƒè½½è·ã€‚ä¸­ç»‘å®šå¼€å§‹èŠ‚ç‚¹ä¼ å…¥çš„imageå‚æ•°ã€‚å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d23928ec64a43b88e5e8e46c0c18297~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=UVRlHLs0OWlJYvLIoPIz2pNVc9o%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨èŠ‚ç‚¹çš„é»˜è®¤è¾“å‡ºå˜é‡ä¸º out_textã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba6c97a7cb5f4ee382bafcf38ffdaa2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=dC1NWUz6v5keQrKE16EjKMphXQY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨å®é™…æ¥å…¥è¿‡ç¨‹ä¸­ï¼Œä½œè€…é€šè¿‡å¤šæ¬¡å°è¯•å¹¶ç»“åˆå®˜æ–¹å­¦ä¹ æ–‡æ¡£å‘ç°ï¼š
å·¥å…·èŠ‚ç‚¹åœ¨å‚æ•°ä¼ é€’èƒ½åŠ›ä¸Šå­˜åœ¨é™åˆ¶ï¼Œæ— æ³•å®Œå…¨æ»¡è¶³å½“å‰ OCR æ¥å£çš„è°ƒç”¨éœ€æ±‚ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦çµæ´»æ§åˆ¶ Headerã€Query å‚æ•°ä»¥åŠ äºŒè¿›åˆ¶çš„æ•°æ®æ ¼å¼åœºæ™¯ä¸‹ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7d60f125f90402982a84a8eb6f0a4a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=IwWMNZ9rY%2FB%2FW9h%2B7Nsr6WCRFSw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f4076e06eaf4d28ac761a8040f92403~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=cCc3cwsZFWZPocrYlk8kzXCuTSQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe848fbdf9544df7ae6a4f76edb0a49e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=UTLg9Y%2BYysUTKcKXhU6wySKag2Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4abfedd9b9a7489bafc42cfc7aec6029~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=5u0n0%2BMP4JspFMOl67x%2F4yBHmxI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä¸è¿‡ï¼Œè…¾è®¯å…ƒå™¨å·¥ä½œæµé¢å¤–æ”¯æŒã€Œä»£ç èŠ‚ç‚¹ã€ï¼Œè¿™ä½¿å¾—ä¸Šè¿°é—®é¢˜å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ä»£ç çš„æ–¹å¼è¿›è¡Œå¦¥å–„è§£å†³ï¼Œä»è€Œç»•å¼€å·¥å…·èŠ‚ç‚¹åœ¨å‚æ•°èƒ½åŠ›ä¸Šçš„é™åˆ¶ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨å¦‚ä¸‹æ–¹æ¡ˆï¼š</p>
<p>ğŸ‘‰ åœ¨å¼€å§‹èŠ‚ç‚¹ï¼ˆStartï¼‰ä¹‹åæ–°å¢ä¸€ä¸ªä»£ç èŠ‚ç‚¹ï¼ˆCode Nodeï¼‰ï¼Œç”±è¯¥èŠ‚ç‚¹ç›´æ¥å®Œæˆ TextIn OCR API çš„è°ƒç”¨ä¸ç»“æœè§£æã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37d819527a6d4164885187be2bfabe4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=CngEsTaEOUlYZqv9eL8A8XrWa6E%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecfd8ea302384c42abcd00f94c420157~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=8w9yPEieuKfFJFjc3RSmhRRBcSE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ ¹æ® TextIn å®˜æ–¹å¼€å‘æ–‡æ¡£ï¼Œåœ¨ä»£ç èŠ‚ç‚¹ä¸­ç¼–å†™å®Œæ•´çš„ OCR è°ƒç”¨é€»è¾‘ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>è¯·æ±‚ Header ä¸­çš„ x-ti-app-id ä¸ x-ti-secret-code</p>
</li>
<li>
<p>Query å‚æ•°çš„åŠ¨æ€æ‹¼è£…</p>
</li>
<li>
<p>è¯·æ±‚ Body ç›´æ¥ä¼ å…¥å›¾ç‰‡ URL</p>
</li>
<li>
<p>è¿”å›ç»“æœå¼ºåˆ¶è§£æä¸º JSON å¯¹è±¡
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b64cbd464c6433f9b9fadc22b209ab8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=nH55PB78IFrhy6phKl9oUMMOPyQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
è°ƒç”¨ä»£ç å¦‚ä¸‹</p>
</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">Any</span>


<span class="hljs-keyword">class</span> <span class="hljs-title class_">OCRClient</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, app_id: <span class="hljs-built_in">str</span>, secret_code: <span class="hljs-built_in">str</span></span>):
        self.app_id = app_id
        self.secret_code = secret_code

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">recognize</span>(<span class="hljs-params">self, image_url: <span class="hljs-built_in">str</span>, options: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
        headers = {
            <span class="hljs-string">"x-ti-app-id"</span>: self.app_id,
            <span class="hljs-string">"x-ti-secret-code"</span>: self.secret_code,
            <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/plain"</span>
        }

        params = {k: <span class="hljs-built_in">str</span>(v) <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> options.items()}

        resp = requests.post(
            <span class="hljs-string">"https://api.textin.com/ai/service/v1/pdf_to_markdown"</span>,
            headers=headers,
            params=params,
            data=image_url
        )

        resp.raise_for_status()

        <span class="hljs-comment"># âš ï¸ è¿™é‡Œå¼ºåˆ¶è½¬æˆ JSON å¯¹è±¡</span>
        <span class="hljs-keyword">return</span> resp.json()


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">input_data: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
    <span class="hljs-string">"""
    èŠ‚ç‚¹ä¸»å‡½æ•°
    è¾“å…¥ï¼š
    {
        "image": "https://xxx.png"
    }

    è¾“å‡ºï¼ˆJSON å¯¹è±¡ï¼‰ï¼š
    {
        "success": true,
        "result": {...}
    }
    """</span>

    image = input_data.get(<span class="hljs-string">"image"</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> image:
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"success"</span>: <span class="hljs-literal">False</span>,
            <span class="hljs-string">"error"</span>: <span class="hljs-string">"image å‚æ•°ç¼ºå¤±"</span>
        }

    <span class="hljs-keyword">try</span>:
        result = client.recognize(
            image_url=image,
 
        )

        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"success"</span>: <span class="hljs-literal">True</span>,
            <span class="hljs-string">"result"</span>: result
        }

    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"success"</span>: <span class="hljs-literal">False</span>,
            <span class="hljs-string">"error"</span>: <span class="hljs-built_in">str</span>(e)
        }


</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7db24f141ce74dfe803f2f4fa1180cc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ZYqI%2FcAYE8gRldjP%2FYK4cYgz3fc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨ä»£ç èŠ‚ç‚¹ä¸­ï¼Œå¯¹å¤–æš´éœ²çš„è¾“å…¥å˜é‡å‘½åä¸º imageï¼Œç”¨äºæ¥æ”¶ä¸Šä¸€èŠ‚ç‚¹ä¼ å…¥çš„å›¾ç‰‡ URLã€‚</p>
<p>å®Œæˆé…ç½®åï¼Œå¯ä»¥é€šè¿‡ å•ç‚¹è°ƒè¯• åŠŸèƒ½å¿«é€ŸéªŒè¯èŠ‚ç‚¹è¿è¡Œæ•ˆæœã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ae32097a5fc43fe97f5db38a2346e88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=iFE92qUH36L%2BVZJHUymHIAlLOUk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
è°ƒè¯•è¿‡ç¨‹ä¸­è¾“å…¥çš„æµ‹è¯•å›¾åƒå¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecffadf6619f4ff689ead82734f1f77d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=vW%2FhAUpI5LPuuHN%2BDw83eJO0cU8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6115199c5a014032a82f7646b595e005~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=LLUdLGCYzLRVUGx4%2F5K5e5B251Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä»£ç èŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸåï¼Œè¿”å›çš„ TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨ OCR ç»“æœå¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31d4baad7f064905a779b6c7276453f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=Wrcy5NReyM61d0A92dz1BLkYJNY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ­¤æ—¶å¯ä»¥å‘ç°ï¼š
å¦‚æœè¾“å‡ºå˜é‡ä»ç„¶ä½¿ç”¨é»˜è®¤çš„ out_textï¼Œå°†æ— æ³•æ­£ç¡®æ•è·è¿”å›ç»“æœã€‚</p>
<p>è§£å†³æ–¹å¼æ˜¯ï¼š</p>
<blockquote>
<p>ğŸ‘‰ å°†ä»£ç èŠ‚ç‚¹çš„è¾“å‡ºå˜é‡æ˜¾å¼è®¾ç½®ä¸º dataï¼Œå³å¯å®Œæ•´æ¥æ”¶ JSON ç»“æ„çš„ OCR è§£æç»“æœã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4ed50667fab48bb9870895a8831bcc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=kUCKn45wVzuaCw%2B8OMLoQH3dFJU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc162f267dd64bd4a8da55c4facda33d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=hPcg2vEKV3l2E7rOb6JkQGVFmek%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ•´ä½“è°ƒè¯•ä¹Ÿæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œåˆ°æ­¤æˆç»©å•è§£æèƒ½åŠ›èŠ‚ç‚¹é…ç½®å®Œæ¯•ã€‚ä¸‹é¢å¯æ¥å…¥åˆ†æå¤§æ¨¡å‹ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60f78893063e4d59b77e19d47fe81896~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=lXVaw2boneTXdSAZi1xuxsUZDww%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e82f408d7bc04d6c89d703dc965317d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=eEA6YvmxeNunRN%2F0aI96w5fzLkk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-17">5.3 æˆç»©åˆ†æä¸è§„åˆ™è®¡ç®—èŠ‚ç‚¹è®¾è®¡</h3>
<p>åœ¨è·å–ç»“æ„åŒ–æˆç»©æ•°æ®åï¼Œæ™ºèƒ½ä½“è¿›å…¥ <strong>æˆç»©åˆ†æä¸ç»Ÿè®¡è®¡ç®—é˜¶æ®µ</strong>ã€‚</p>
<p>è¯¥é˜¶æ®µé‡‡ç”¨ <strong>è§„åˆ™è®¡ç®— + å¤§æ¨¡å‹è§£é‡Š</strong> çš„æ–¹å¼ï¼š</p>
<ul>
<li>
<p>æ•°æ®å¤„ç†èŠ‚ç‚¹è´Ÿè´£ï¼š</p>
<ul>
<li>å¹³å‡åˆ†ã€æœ€é«˜åˆ†ã€æœ€ä½åˆ†è®¡ç®—</li>
<li>å­¦ç§‘å‡è¡¡åº¦ä¸åç§‘è¯†åˆ«</li>
<li>æˆç»©è¶‹åŠ¿ä¸æ³¢åŠ¨æ£€æµ‹</li>
</ul>
</li>
<li>
<p>å‹åŠ›æ„ŸçŸ¥å‹å¿ƒç†é™ªä¼´èŠ‚ç‚¹è´Ÿè´£ï¼š</p>
<ul>
<li>å¯¹ç»Ÿè®¡ç»“æœè¿›è¡Œè‡ªç„¶è¯­è¨€æ€»ç»“</li>
<li>å°†æ•°æ®ç»“è®ºè½¬åŒ–ä¸ºâ€œå­¦ç”Ÿ/æ•™å¸ˆå¬å¾—æ‡‚çš„è¯â€</li>
<li>å¯¹å­¦ç”Ÿæˆç»©è¿›è¡Œå‹åŠ›åˆ†æ</li>
<li>æå‡ºæˆç»©æå‡è®¡åˆ’</li>
<li>å¯¹å­¦ç”Ÿè¿›è¡Œå¿ƒç†ç–å¯¼ï¼Œé¿å…å‹åŠ›è¿‡å¤§</li>
</ul>
</li>
</ul>
<p>åœ¨è…¾è®¯å…ƒå™¨ä¸­ï¼Œè¿™ä¸€é˜¶æ®µé€šå¸¸ä»¥ <strong>æ•°æ®å¤„ç†èŠ‚ç‚¹ + å‹åŠ›æ„ŸçŸ¥å‹å¿ƒç†é™ªä¼´èŠ‚ç‚¹èŠ‚ç‚¹</strong> çš„ç»„åˆæ–¹å¼å®ç°ã€‚</p>
<h3 data-id="heading-18">5.4 æ•°æ®å¤„ç†èŠ‚ç‚¹ï¼ˆæ··å…ƒå¤§æ¨¡å‹ï¼‰</h3>
<p>åœ¨å®Œæˆ TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨ OCR è§£æåï¼Œæˆ‘ä»¬å°†å¼•å…¥ æ··å…ƒå¤§æ¨¡å‹è¿›è¡Œä¸“ä¸šçš„æ•°æ®å¤„ç†åˆ†æã€‚
æ•°æ®å¤„ç†èŠ‚ç‚¹ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<blockquote>
<p>å¹³å‡åˆ†ã€æœ€é«˜åˆ†ã€æœ€ä½åˆ†è®¡ç®—
å­¦ç§‘å‡è¡¡åº¦è¯„ä¼°ä¸åç§‘è¯†åˆ«
æˆç»©è¶‹åŠ¿åŠåˆ†æ•°æ³¢åŠ¨æ£€æµ‹</p>
</blockquote>
<p>åœ¨ TextIn OCR ä»£ç èŠ‚ç‚¹ä¹‹åï¼Œæ–°å¢ æ··å…ƒå¤§æ¨¡å‹æ•°æ®å¤„ç†èŠ‚ç‚¹ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06ec8f22973b40bfbc6457ab46e13497~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=iYAIbPGKtbWwQmjNtQpBlJYnvyo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
é€‰æ‹©æ“…é•¿æ•°å­¦è®¡ç®—çš„ æ··å…ƒ 2.0 æ¨¡å‹ ä»¥ä¿è¯æ•°æ®å¤„ç†çš„ç²¾åº¦ä¸ä¸“ä¸šæ€§ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa2e32d4c742475cb4fda4ea97a17a3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=cOpdgcggoc%2FYPib4kBe8A5fFfQc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å°†å‰èŠ‚ç‚¹è¾“å‡ºçš„ OCR æ•°æ®ç»‘å®šä¸ºè¾“å…¥å˜é‡ï¼Œä»¥ä¾¿æ··å…ƒæ¨¡å‹ç›´æ¥æ¥æ”¶æˆç»©å•æ•°æ®ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5595964f2dc14ecc98a6035346b3f0ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=4KbigPsbFdJaOgHuEUr3m5U5jKA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä¸ºç¡®ä¿æ··å…ƒæ¨¡å‹èƒ½å¤Ÿé«˜æ•ˆå®Œæˆæ•°æ®å¤„ç†ï¼Œè®¾è®¡äº†å¦‚ä¸‹æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">æ ¹æ®ocrinput
çš„æˆç»©å•è¯†åˆ«ç»“æœï¼Œè®¡ç®—å¹³å‡åˆ†ã€æœ€é«˜åˆ†å’Œæœ€ä½åˆ†ï¼›åˆ†æå„å­¦ç§‘åˆ†æ•°çš„å‡è¡¡åº¦å¹¶è¯†åˆ«æ˜¯å¦å­˜åœ¨åç§‘ç°è±¡ï¼›åŒæ—¶æ£€æµ‹æˆç»©éšæ—¶é—´çš„å˜åŒ–è¶‹åŠ¿åŠåˆ†æ•°æ³¢åŠ¨æƒ…å†µã€‚è¯·æ˜ç¡®è¯´æ˜æˆç»©æ•°æ®æ˜¯å¦åŒ…å«æ—¶é—´ä¿¡æ¯ï¼Œä»¥ä¾¿è¿›è¡Œè¶‹åŠ¿ä¸æ³¢åŠ¨åˆ†æã€‚è‹¥ocrinput
ä¸­åŒ…å«ç§‘ç›®åç§°ï¼Œè¯·ç¡®ä¿è¯†åˆ«å‡†ç¡®ä»¥æ”¯æŒå­¦ç§‘å‡è¡¡åº¦åˆ†æã€‚

</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/732812c32ac24f048cde14b6ae899c9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=zKUGCc6UYgBP0C6sjefjV3D8St8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å®Œæˆ æ•°æ®å¤„ç†èŠ‚ç‚¹é…ç½®åï¼Œå¼€å§‹è¿›è¡Œè°ƒè¯•éªŒè¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15d9103388a846269b1e10b1b2cae2a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=YmAyRZaQFrxyF1ENuaG9Qzp4Pow%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¾“å…¥æµ‹è¯•æ•°æ®ï¼šå¼ æ™¨çš„é«˜ä¸‰è€ƒè¯•æˆç»©å•ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c34c240f9e8e4381ab5cc99bc649264e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=DBMrSFusaoVNOZxafwiF27cDkfI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿è¡Œè°ƒè¯•ç»“æœå¦‚ä¸‹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efc75a1f377846d791d21b2df4569445~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=zpeV3VsNlIWGh5IuqvVI6xTVjpQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°æ•°æ®å¤„ç†èŠ‚ç‚¹
å¯¹</p>
<ul>
<li>å¹³å‡åˆ†ã€æœ€é«˜åˆ†ã€æœ€ä½åˆ†è®¡ç®—</li>
<li>å­¦ç§‘å‡è¡¡åº¦ä¸åç§‘è¯†åˆ«</li>
<li>æˆç»©è¶‹åŠ¿ä¸æ³¢åŠ¨æ£€æµ‹
çš„åˆ†æååˆ†ä¸“ä¸š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4057f78c33744718b7d0d935e1dab92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=7IsOHGnKz4pCx1SGsPYsCzDSoPM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ul>
<p>æ··å…ƒå¤§æ¨¡å‹åœ¨æœ¬æ¬¡æ•°æ®å¤„ç†ä»»åŠ¡ä¸­è¡¨ç°éå¸¸å‡ºè‰²ã€‚å®ƒä¸ä»…èƒ½å¤Ÿå‡†ç¡®è®¡ç®—å¹³å‡åˆ†ã€æœ€é«˜åˆ†å’Œæœ€ä½åˆ†ï¼Œè€Œä¸”èƒ½å¤Ÿæ·±å…¥åˆ†æå„ç§‘åˆ†æ•°çš„åˆ†å¸ƒç‰¹å¾ï¼Œé‡åŒ–å­¦ç§‘å‡è¡¡åº¦ï¼Œå¹¶ç»™å‡ºç§‘å­¦çš„åç§‘åˆ¤æ–­ã€‚
æ¨¡å‹å¯¹ç†ç§‘ä¸æ–‡ç§‘çš„åŒºåˆ†ã€æ ‡å‡†å·®ä¸æå·®çš„è®¡ç®—ä»¥åŠåç§‘ç»“è®ºçš„é€»è¾‘æ¨ç†éƒ½éå¸¸ä¸¥è°¨ï¼Œåˆ†ææ¡ç†æ¸…æ™°ï¼Œç»“æœä¸“ä¸šå¯ä¿¡ã€‚é€šè¿‡æ··å…ƒå¤§æ¨¡å‹çš„å¤„ç†ï¼ŒåŸæœ¬æ•£ä¹±çš„æˆç»©æ•°æ®è¢«ç³»ç»ŸåŒ–ã€ç»“æ„åŒ–åœ°å‘ˆç°å‡ºæ¥ï¼Œè®©äººä¸€ç›®äº†ç„¶ï¼Œæå¤§åœ°æå‡äº†æˆç»©åˆ†æçš„æ•ˆç‡å’Œç²¾å‡†åº¦ï¼Œå¯è°“æ˜¯ä¸€æ¬¡é«˜è´¨é‡çš„æ™ºèƒ½åŒ–æ•°æ®åˆ†æä½“éªŒã€‚</p>
<h3 data-id="heading-19">5.5 å‹åŠ›æ„ŸçŸ¥å‹å¿ƒç†é™ªä¼´èŠ‚ç‚¹ï¼ˆæ··å…ƒå¤§æ¨¡å‹ï¼‰</h3>
<p>åœ¨æ•°æ®å¤„ç†èŠ‚ç‚¹ï¼ˆæ··å…ƒå¤§æ¨¡å‹ï¼‰åæ·»åŠ å‹åŠ›æ„ŸçŸ¥å‹å¿ƒç†é™ªä¼´èŠ‚ç‚¹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1826a6d74d484e1db46b310988a81046~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=pWRUwNgd1AWQt8YwFkU6QQ0gWbo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ¨¡å‹é€‰æ‹©æ··å…ƒå¤§æ¨¡å‹T1ç‰ˆ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4e171c44019499883b3603ea9f8dff1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ZDFXEfLV5Z9CWhIPAg8Pv2v19qc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
è¾“å…¥å˜é‡ä¸ºæ•°æ®å¤„ç†èŠ‚ç‚¹ï¼ˆæ··å…ƒå¤§æ¨¡å‹ï¼‰çš„å¤„ç†å†…å®¹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bec7ee3d7f9464bbb2c0d602417c677~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=2hJIqqTYwGO6t4fvSy7DnvA%2BjK8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æç¤ºè¯å¦‚ä¸‹</p>
<pre><code class="hljs language-bash" lang="bash">ç°åœ¨æ˜¯å­¦ç”Ÿå‘ä½ å‘é€äº†ä»–çš„æˆç»©å•è§£æç»“æœï¼Œä½ éœ€è¦åŸºäºæ­¤åšå‹åŠ›æ„ŸçŸ¥å‹å¿ƒç†é™ªä¼´èŠ‚ç‚¹ï¼Œé‡ç‚¹å®‰æ…°å’Œé¼“åŠ±å­¦ç”Ÿã€‚æ ¹æ®æ•°æ®å¤„ç†èŠ‚ç‚¹_æ··å…ƒå¤§æ¨¡å‹å¯¹input
ä¸­çš„æˆç»©å•è¿›è¡Œçš„è§£æï¼Œä»¥åŠç»“åˆå­¦ç”Ÿè¾“å…¥çš„é—®é¢˜q
ï¼Œå®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š  
* ç”¨æ¸…æ™°ã€å‡†ç¡®ä¸”é€šä¿—æ˜“æ‡‚çš„è‡ªç„¶è¯­è¨€æ€»ç»“æˆç»©ç»Ÿè®¡ç»“æœï¼›  
* å°†æ•°æ®åˆ†æç»“è®ºè½¬åŒ–ä¸ºå­¦ç”Ÿéƒ½å®¹æ˜“ç†è§£çš„è¡¨è¾¾ï¼›  
* é’ˆå¯¹å­¦ç”Ÿå„ç§‘æˆç»©ï¼Œåˆ†æå¯èƒ½é¢ä¸´çš„å­¦ä¸šå‹åŠ›åŠå…·ä½“æˆå› ï¼›  
* ç»“åˆæˆç»©ä¸å‹åŠ›æƒ…å†µï¼Œç»™å‡ºåˆ‡å®å¯è¡Œçš„æˆç»©æå‡å»ºè®®å’Œå¯æ“ä½œçš„å­¦ä¹ è®¡åˆ’ï¼›  
* é‡ç‚¹å…³æ³¨å­¦ç”Ÿå¿ƒç†çŠ¶æ€ï¼Œæä¾›æ¸©æš–çš„å¿ƒç†ç–å¯¼å»ºè®®ï¼Œå¸®åŠ©å…¶ç¼“è§£å‹åŠ›ã€ä¿æŒç§¯æå¿ƒæ€ã€‚

</code></pre>
<p>å¼€å§‹è°ƒè¯•</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/971a123eb5284146a2a4c9288888844f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ZN%2FnSYHSH43ZD2p0sUSCpx26Lic%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å¯ä»¥çœ‹åˆ°å‹åŠ›æ„ŸçŸ¥å‹å¿ƒç†é™ªä¼´èŠ‚ç‚¹ä¸»è¦å¤„ç†äº†</p>
<ul>
<li>å¯¹ç»Ÿè®¡ç»“æœè¿›è¡Œè‡ªç„¶è¯­è¨€æ€»ç»“</li>
<li>å°†æ•°æ®ç»“è®ºè½¬åŒ–ä¸ºâ€œå­¦ç”Ÿ/æ•™å¸ˆå¬å¾—æ‡‚çš„è¯â€</li>
<li>å¯¹å­¦ç”Ÿæˆç»©è¿›è¡Œå‹åŠ›åˆ†æ</li>
<li>æå‡ºæˆç»©æå‡è®¡åˆ’</li>
<li>å¯¹å­¦ç”Ÿè¿›è¡Œå¿ƒç†ç–å¯¼ï¼Œé¿å…å‹åŠ›è¿‡å¤§</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e8735dbbdb640e39290db175c582ff2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=2NK0n5aCjH93T72Jtw3k6a1fPEg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bf72fb21a9c46dd88dfef6465fa5a2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=cXpHpyYGwtfT0UBguKpSVMRQeM0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbe9aa6b37d94a7d9af12dbaab1b731f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=GXKhkBe%2F5DO50314f4nsrCtBAkY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ··å…ƒå¤§æ¨¡å‹åœ¨æœ¬æ¬¡å¼ æ™¨åŒå­¦æˆç»©åˆ†æä¸æˆé•¿å»ºè®®ç”Ÿæˆä¸­è¡¨ç°ååˆ†å‡ºè‰²ã€‚å®ƒä¸ä»…èƒ½å¤Ÿå…¨é¢æ•´åˆå„ç§‘æˆç»©æ•°æ®ï¼Œç²¾å‡†è®¡ç®—æ€»åˆ†ã€å¹³å‡åˆ†ã€æœ€é«˜åˆ†ã€æœ€ä½åˆ†å’Œæ ‡å‡†å·®ï¼Œè¿˜èƒ½æ™ºèƒ½è¯†åˆ«å­¦ç§‘å‡è¡¡æ€§ä¸åç§‘æƒ…å†µï¼Œä¸ºç†ç§‘å’Œæ–‡ç§‘çš„ä¼˜åŠ¿ä¸è–„å¼±ç‚¹æä¾›æ¸…æ™°é‡åŒ–ä¾æ®ã€‚æ›´éš¾å¾—çš„æ˜¯ï¼Œæ¨¡å‹èƒ½å¤Ÿç»“åˆæˆç»©ç‰¹ç‚¹ç”Ÿæˆä¸“ä¸šã€å¯æ“ä½œçš„å­¦ä¹ ç­–ç•¥ä¸å¿ƒç†ç–å¯¼å»ºè®®ï¼Œæ¶µç›–æ—¶é—´åˆ†é…ã€å­¦ä¹ æ–¹æ³•ä¼˜åŒ–åŠä¿¡å¿ƒå»ºè®¾ç­‰å¤šä¸ªç»´åº¦ï¼Œæ—¢å…¼é¡¾å­¦ç”Ÿå®é™…å­¦ä¹ æƒ…å†µï¼Œä¹Ÿç¬¦åˆæ•™è‚²å¿ƒç†å­¦æŒ‡å¯¼åŸåˆ™ã€‚æ•´ä½“åˆ†ææ¡ç†æ¸…æ™°ã€é€»è¾‘ä¸¥è°¨ã€å†…å®¹ä¸“ä¸šå¯ä¿¡ï¼Œå ªç§°ä¸€æ¬¡é«˜è´¨é‡çš„æ™ºèƒ½åŒ–å­¦ä¸šåˆ†æå®è·µæˆæœã€‚</p>
<h2 data-id="heading-20">å…­. æ™ºèƒ½ä½“è°ƒè¯•ä¸å‘å¸ƒ</h2>
<p>å®Œæˆå·¥ä½œæµçš„ç¼–å†™ä¸å„èŠ‚ç‚¹è°ƒè¯•åï¼Œä¸‹ä¸€æ­¥æ˜¯åœ¨ å·¥ä½œæµç®¡ç†ä¸­å¯ç”¨æ–°åˆ›å»ºçš„å·¥ä½œæµï¼Œä½¿å…¶å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡ã€‚</p>
<p>å¯ç”¨å·¥ä½œæµï¼Œåœ¨å·¥ä½œæµç®¡ç†ç•Œé¢æ‰¾åˆ°åˆšåˆšåˆ›å»ºçš„å·¥ä½œæµï¼Œç‚¹å‡» å¯ç”¨/æ¿€æ´» æŒ‰é’®ï¼Œä½¿å…¶è¿›å…¥å¯è°ƒç”¨çŠ¶æ€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80d92939aa5f4772950951dd99b37338~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=I4%2FyxUS89xIMaFMqRndcLbjxjNE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨æ™ºèƒ½ä½“ç•Œé¢ä¸­å‘é€æµ‹è¯•æ•°æ®ï¼ˆå¦‚å­¦ç”Ÿæˆç»©å•ï¼‰ï¼Œè§‚å¯Ÿå·¥ä½œæµçš„å“åº”ç»“æœã€‚
æˆåŠŸå¯ç”¨åï¼Œæ™ºèƒ½ä½“ä¼šæŒ‰ç…§è®¾è®¡é€»è¾‘è‡ªåŠ¨å¤„ç†è¾“å…¥æ•°æ®ï¼Œå¹¶è¿”å›åˆ†ææŠ¥å‘Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c601e02b53144b39aa2d6a1c607a49c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=8Zq4QaGggQLPdKT2diNaJt%2Foskc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ£€æŸ¥æ™ºèƒ½ä½“è¿”å›çš„åˆ†æç»“æœæ˜¯å¦å®Œæ•´ã€å‡†ç¡®ï¼ŒåŒ…æ‹¬æˆç»©ç»Ÿè®¡ã€å­¦ç§‘å‡è¡¡åº¦ã€åç§‘åˆ†æä»¥åŠæˆé•¿å»ºè®®ç­‰å†…å®¹ã€‚
æˆåŠŸè¿”å›ç»“æœåï¼Œå³è¡¨æ˜æ•´ä¸ªå·¥ä½œæµå·²æ­£å¸¸è¿è¡Œï¼Œå¯æ­£å¼æŠ•å…¥ä½¿ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3f2fadaa9fa44a5bcb95cbc5c81e22d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=6p%2BN%2BR7eAFUddgaKmOngZULQemQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a87f548c0c34c1b8336213bb87a03e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=%2FSsj%2BTFQkV3KPk1akXO42nupi%2Fo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
è°ƒè¯•ç¡®è®¤å·¥ä½œæµè¿è¡Œæ­£å¸¸åï¼Œåœ¨æ™ºèƒ½ä½“é¡µé¢æ‰¾åˆ°å¯¹åº”æ™ºèƒ½ä½“ï¼Œç‚¹å‡» â€œå‘å¸ƒâ€ æŒ‰é’®ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80fee541eabb4cc98d33575da45b57c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=4xuqGn42mLrxNooY%2FUXJOYLJyqM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç¡®è®¤æ— è¯¯åç‚¹å‡» ç¡®è®¤å‘å¸ƒã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94a9e866f349449a9981afd4c2f642d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=xezFrVCSMo9aL8OYLLIYVFpZfiM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ç³»ç»Ÿæç¤º åº”ç”¨å‘å¸ƒæˆåŠŸï¼Œè¡¨ç¤ºæ™ºèƒ½ä½“å·²æ­£å¼ä¸Šçº¿å¹¶å¯å¯¹å¤–è°ƒç”¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/737c3a7969a347fd86ab546b124af839~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ciUnkO%2FXWIxOWCbm7e96zSGZSIA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å¯é€šè¿‡åˆ†äº«é“¾æ¥æˆ–äºŒç»´ç è®¿é—®æ™ºèƒ½ä½“ï¼Œæ–¹ä¾¿å­¦ç”Ÿã€æ•™å¸ˆæˆ–å…¶ä»–ç”¨æˆ·ä½¿ç”¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc1f2f8e6839477bad609ddc0adee451~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=GXlDFEVmJK%2Fz9rc5zcPeNP%2Fgb%2Fk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å‘å¸ƒæˆåŠŸåï¼Œæ™ºèƒ½ä½“ä¼šåœ¨ â€œæˆ‘çš„æ™ºèƒ½ä½“â€ é¡µé¢ä¸­æ˜¾ç¤ºï¼Œå¯éšæ—¶ç®¡ç†ã€æ›´æ–°æˆ–æŸ¥çœ‹è¿è¡Œæƒ…å†µã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/163ee76ebb214d009125973cd2fbbe19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=q2t8ZYj%2BEMdvs0iH9izqqBb30zc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
è®¿é—®URLå³å¯æ„‰å¿«çš„ä½¿ç”¨æ™ºèƒ½ä½“äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a361fbd29f24dfd9e7052b893bcec26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=pXkBQtOcFzI4ZS7n0CE%2BGXvrMT8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-21">ä¸ƒ.å¿ƒå¾—ä¸æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ¬¡â€œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´æ™ºèƒ½ä½“â€çš„æ„å»ºï¼Œæˆ‘æ·±åˆ»ä½“ä¼šåˆ°æ•™è‚²æ•°æ®æ™ºèƒ½åŒ–ä¸å¿ƒç†å…³æ€€ç»“åˆçš„å·¨å¤§ä»·å€¼ã€‚é¡¹ç›®ä¸­ï¼Œè…¾è®¯å…ƒå™¨æä¾›äº†å®Œæ•´çš„æ™ºèƒ½ä½“èƒ½åŠ›ç¼–æ’ä¸ä¸Šä¸‹æ–‡ç®¡ç†ï¼ŒTextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨å®ç°äº†éç»“æ„åŒ–æˆç»©å•çš„é«˜ç²¾åº¦è§£æï¼Œè€Œæ··å…ƒå¤§æ¨¡å‹åˆ™æ‰¿æ‹…æ•°æ®å¤„ç†ã€è¶‹åŠ¿åˆ†æä¸å‹åŠ›æ„ŸçŸ¥ï¼Œå®ç°äº†ä»æ•°æ®åˆ°è‡ªç„¶è¯­è¨€é™ªä¼´çš„é—­ç¯ã€‚ä¸‰è€…ååŒä¸ä»…è®©ç³»ç»Ÿèƒ½â€œä¼šç®—åˆ†â€ï¼Œæ›´èƒ½â€œæ‡‚å­¦ç”Ÿâ€ï¼ŒçœŸæ­£åšåˆ°å­¦ä¸šåˆ†æä¸æƒ…ç»ªç–å¯¼åŒé‡æœåŠ¡ï¼Œä¸ºæ™ºæ…§æ•™è‚²åœºæ™¯æä¾›äº†å¯è½åœ°çš„å®è·µç»éªŒã€‚</p>
<p>åœ¨å·¥ä½œæµè®¾è®¡å’ŒèŠ‚ç‚¹è°ƒè¯•ä¸­ï¼Œæˆ‘ä½“ä¼šåˆ°èŒè´£æ‹†åˆ†ä¸çµæ´»è°ƒç”¨çš„é‡è¦æ€§ã€‚å°†æµç¨‹æ‹†è§£ä¸º OCR/ç»“æ„åŒ–ã€æ•°æ®å¤„ç†ã€å‹åŠ›æ„ŸçŸ¥ä¸å¿ƒç†é™ªä¼´ç­‰æ˜ç¡®èŠ‚ç‚¹ï¼Œæ—¢åˆ©äºè°ƒè¯•ï¼Œä¹Ÿä¾¿äºåç»­è¿­ä»£ä¼˜åŒ–ï¼›é€šè¿‡ä»£ç èŠ‚ç‚¹çµæ´»è°ƒç”¨ TextIn APIï¼Œé¿å…äº†å·¥å…·èŠ‚ç‚¹åœ¨å¤§å®¹é‡æˆ–å¤æ‚å‚æ•°ä¼ é€’ä¸Šçš„é™åˆ¶ã€‚æ­¤å¤–ï¼Œå¤šè§’è‰²è¾“å‡ºé€»è¾‘çš„éš”ç¦»è®©å­¦ç”Ÿç«¯ä¸æ•™å¸ˆç«¯å‘ˆç°å·®å¼‚åŒ–ä¿¡æ¯ï¼Œæé«˜äº†ç³»ç»Ÿå¯ç”¨æ€§ä¸å®‰å…¨æ€§ã€‚æ•´ä½“å®è·µè®©æˆ‘è®¤è¯†åˆ°ï¼Œæ•™è‚² AI ä¸ä»…è¦ç²¾å‡†åˆ†ææ•°æ®ï¼Œæ›´è¦è€ƒè™‘å¿ƒç†å…³æ€€ä¸å¯è§£é‡Šæ€§ï¼Œè¿™ä¹Ÿæ˜¯æœªæ¥æ™ºèƒ½æ•™è‚²è½åœ°çš„å…³é”®æ–¹å‘ã€‚</p>
<p>è¿™æ¬¡ç”¨è…¾è®¯å…ƒå™¨æ„å»ºâ€œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´â€æ™ºèƒ½ä½“ï¼Œæ•´ä½“ä½“éªŒéå¸¸é¡ºç•…ï¼Œä¹Ÿè¶…å‡ºäº†é¢„æœŸã€‚å‡ ä¸ªå°è±¡æ·±åˆ»çš„ç‚¹ï¼š</p>
<ul>
<li>ä¸Šæ‰‹å¿«ï¼šç•Œé¢åŒ–æ“ä½œä¸ºä¸»ï¼ŒèŠ‚ç‚¹æ‹–æ‹½å’Œå·¥ä½œæµé…ç½®ç›´è§‚ï¼Œå³ä¾¿éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½å¿«é€Ÿä¸Šæ‰‹ï¼›</li>
<li>è°ƒè¯•é«˜æ•ˆï¼šä»£ç èŠ‚ç‚¹ã€æç¤ºè¯ç¼–è¾‘å™¨å’Œå·¥ä½œæµè°ƒè¯•å™¨æ”¯æŒå®æ—¶é¢„è§ˆï¼Œå®šä½é—®é¢˜å¿«ï¼Œå‡å°‘äº†é‡å¤å‘å¸ƒçš„éº»çƒ¦ï¼›</li>
<li>å¤šèƒ½åŠ›é›†æˆï¼šOCRã€æ•°æ®åˆ†æã€å¿ƒç†é™ªä¼´ç­‰æ¨¡å—ååŒï¼Œæ•°æ®æµä¸é€»è¾‘æ¸…æ™°ï¼ŒèŠ‚ç‚¹ä¹‹é—´è°ƒç”¨é¡ºç•…ï¼›</li>
<li>å‘å¸ƒä¾¿åˆ©ï¼šæ”¯æŒå¤šç«¯è¾“å‡ºï¼Œå­¦ç”Ÿç«¯å’Œæ•™å¸ˆç«¯å¯å·®å¼‚åŒ–å‘ˆç°ï¼Œæ— éœ€è‡ªè¡Œå¤„ç†å¯¹æ¥é—®é¢˜ã€‚</li>
</ul>
<p>æ€»ä½“æ¥è¯´ï¼Œè…¾è®¯å…ƒå™¨ä¸ä»…é€‚åˆæ•™è‚²åœºæ™¯çš„æ™ºèƒ½ä½“å¼€å‘ï¼Œä¹Ÿä¸ºç±»ä¼¼ä¼ä¸šçº§åº”ç”¨æä¾›äº†å¯è½åœ°ã€æ˜“æ‰©å±•çš„å®è·µæ–¹æ¡ˆã€‚</p>
<p>è…¾è®¯å…ƒå™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuanqi.tencent.com%2F" target="_blank" title="https://yuanqi.tencent.com/" ref="nofollow noopener noreferrer">yuanqi.tencent.com/</a></p>
<p>æˆ‘çš„æ™ºèƒ½ä½“é“¾æ¥ï¼š</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyuanqi.tencent.com%2Fwebim%2F%23%2Fchat%2FTFJDBz%3Fappid%3D2004433656162151424" target="_blank" title="https://yuanqi.tencent.com/webim/#/chat/TFJDBz?appid=2004433656162151424" ref="nofollow noopener noreferrer">yuanqi.tencent.com/webim/#/chaâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Excelç‘Ÿç‘Ÿå‘æŠ–ï¼ŸSkywork Sheets 2.0æŠŠè¡¨æ ¼ç›´æ¥å˜æˆäº†æ™ºèƒ½æŠ¥å‘Š]]></title>    <link>https://juejin.cn/post/7588086766235648038</link>    <guid>https://juejin.cn/post/7588086766235648038</guid>    <pubDate>2025-12-26T14:28:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766235648038" data-draft-id="7587997893987975195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Excelç‘Ÿç‘Ÿå‘æŠ–ï¼ŸSkywork Sheets 2.0æŠŠè¡¨æ ¼ç›´æ¥å˜æˆäº†æ™ºèƒ½æŠ¥å‘Š"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-12-26T14:28:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Excelç‘Ÿç‘Ÿå‘æŠ–ï¼ŸSkywork Sheets 2.0æŠŠè¡¨æ ¼ç›´æ¥å˜æˆäº†æ™ºèƒ½æŠ¥å‘Š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T14:28:24.000Z" title="Fri Dec 26 2025 14:28:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è€å®è¯´ï¼Œåœ¨åŠå…¬è½¯ä»¶è¿™ä¸ªåœˆå­é‡Œï¼Œæˆ‘ä»¬å·²ç»å¾ˆä¹…æ²¡æœ‰çœ‹åˆ°çœŸæ­£è®©äººçœ¼å‰ä¸€äº®çš„ä¸œè¥¿äº†ã€‚å¤§å¤šæ•°æ—¶å€™ï¼Œæ‰€è°“çš„â€œAIå‡çº§â€ä¸è¿‡æ˜¯åœ¨ä¾§è¾¹æ åŠ ä¸ªèŠå¤©æ¡†ï¼Œè¿™å°±å¥½æ¯”ç»™é©¬è½¦è£…äº†ä¸ªæ”¶éŸ³æœºï¼Œå¹¶æ²¡æœ‰æ”¹å˜è·‘å¾—æ…¢çš„äº‹å®ã€‚</p>
<p>ä½†æ˜†ä»‘ä¸‡ç»´åˆšåˆšç«¯ä¸Šæ¥çš„è¿™ä¸ªSkywork Sheets 2.0ï¼Œå‘³é“æœ‰ç‚¹ä¸ä¸€æ ·ã€‚</p>
<p>å¦‚æœä¸è·Ÿä½ ç»•å¼¯å­ï¼Œç›´æ¥è¯´ç»“è®ºï¼šè¿™ä¸œè¥¿è¯•å›¾å¹²æ‰çš„ä¸æ˜¯Excelï¼Œè€Œæ˜¯â€œä»åšè¡¨åˆ°å†™æ±‡æŠ¥â€ä¸­é—´é‚£ä¸ªæœ€æŠ˜ç£¨äººçš„è¿‡ç¨‹ã€‚å®ƒäº2025å¹´12æœˆ25æ—¥æ­£å¼ä¸Šçº¿ï¼Œæ ¸å¿ƒå°±å¹²äº†ä¸€ä»¶äº‹â€”â€”æ‰“ç ´äº†ç”µå­è¡¨æ ¼å’Œåˆ†ææŠ¥å‘Šä¹‹é—´çš„æ¬¡å…ƒå£ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-26_22.19.36-1024x504.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-26_22.19.36-1024x504.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8c598621c1e472b9420d49b1150fa2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364104&amp;x-signature=XaeQgTi3aDsfA2HM0vPjRGuV%2BNI%3D" alt="iShot_2025-12-26_22.19.36" loading="lazy"/></a></p>
<p><strong>ä»â€œä»“åº“â€åˆ°â€œåŠ å·¥å‚â€çš„æ€ç»´è½¬å˜</strong></p>
<p>æˆ‘ä»¬ä»¥å‰ç”¨è¡¨æ ¼è½¯ä»¶ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨ç”¨ä¸€ä¸ªâ€œæ•°æ®ä»“åº“â€ã€‚ä½ æŠŠæ•°æ®å¡«è¿›å»ï¼Œç”šè‡³è¿˜å¾—è‡ªå·±å†™å…¬å¼å»æ¸…æ´—ã€å»è®¡ç®—ï¼Œæœ€åç›¯ç€é‚£ä¸€å †æ•°å­—å‘å‘†ï¼šè¿™ç©æ„å„¿åˆ°åº•è¯´æ˜äº†ä»€ä¹ˆï¼Ÿç„¶åä½ è¿˜å¾—æ‰“å¼€Wordæˆ–PPTï¼ŒæŠŠåˆšæ‰çš„ç»“è®ºæ•²è¿›å»ã€‚</p>
<p>Skywork Sheets 2.0æŠŠè¿™ä¸ªé€»è¾‘å€’è¿‡æ¥äº†ã€‚å®˜æ–¹ç®¡è¿™å«â€œè¾“å…¥å³åˆ†æï¼Œæ•°æ®å³æˆæœâ€ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå®ƒçš„å·¥ä½œæµéå¸¸â€œå‚»ç“œâ€ï¼š</p>
<p>ä½ åªéœ€è¦æŠŠé‚£ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„åŸå§‹æ•°æ®â€”â€”ä¸ç®¡æ˜¯æœ¬åœ°çš„CSVã€Excelæ–‡ä»¶ï¼Œè¿˜æ˜¯ç›´æ¥ä»ç½‘é¡µä¸Šå¤åˆ¶ç²˜è´´çš„ä¸€å¨æ–‡æœ¬â€”â€”æ‰”è¿›å®ƒçš„å¯¹è¯æ¡†ã€‚æ¥ä¸‹æ¥çš„äº‹æƒ…ï¼Œå°±æœ‰ç‚¹åƒæŠŠè¡£æœæ‰”è¿›å…¨è‡ªåŠ¨æ´—è¡£æœºäº†ã€‚</p>
<p>å®ƒåº•å±‚çš„â€œå¤©å·¥è¶…çº§æ™ºèƒ½ä½“â€ä¼šç«‹åˆ»æ¥ç®¡ï¼Œåˆ©ç”¨Deep Researchï¼ˆæ·±åº¦ç ”ç©¶ï¼‰æŠ€æœ¯ï¼Œè‡ªå·±å»ç†è§£è¿™å †æ•°æ®æ˜¯å¹²å˜›çš„ã€‚æ¸…æ´—è„æ•°æ®ã€å½’çº³æ±‡æ€»ã€è¯†åˆ«è¶‹åŠ¿ï¼Œè¿™äº›è„æ´»ç´¯æ´»å®ƒå…¨åŒ…äº†ã€‚</p>
<p><strong>ä¸åªæ˜¯ç”»å›¾ï¼Œæ˜¯ç›´æ¥ç»™ä½ äº¤ä½œä¸š</strong></p>
<p>å¸‚é¢ä¸Šèƒ½è‡ªåŠ¨ç”»å›¾çš„AIä¸å°‘ï¼Œä½†Skywork Sheets 2.0æœ€ç‹ çš„ä¸€ç‚¹åœ¨äºå®ƒçš„â€œåŒæ¨¡å¯¼å‡ºâ€ã€‚</p>
<p>å½“ä½ å–å£æ°´çš„åŠŸå¤«ï¼Œå®ƒä¸å…‰ç»™ä½ åå‡ºä¸€ä»½æ¸…æ´—å¹²å‡€ã€æ’ç‰ˆæ•´é½ã€ç”šè‡³å¯ä»¥åƒExcelä¸€æ ·éšæ„æ‰‹åŠ¨ä¿®æ”¹çš„è¡¨æ ¼ï¼ŒåŒæ—¶è¿˜ä¼šç»™ä½ ä¸€ä»½å›¾æ–‡å¹¶èŒ‚çš„åˆ†ææŠ¥å‘Šã€‚æ³¨æ„ï¼Œæ˜¯å®Œæ•´çš„æŠ¥å‘Šï¼Œæ”¯æŒPDFæˆ–Wordæ ¼å¼ï¼Œé‡Œé¢æœ‰ç»“è®ºã€æœ‰è¶‹åŠ¿åˆ†æã€æœ‰å»ºè®®ã€‚</p>
<p>è¿™å°±å¾ˆç¦»è°±ã€‚ä»¥å‰æˆ‘ä»¬è¦ä¹ˆå¾—åˆ°ä¸€ä¸ªå†·å†°å†°çš„è¡¨æ ¼ï¼Œè¦ä¹ˆå¾—åˆ°ä¸€æ®µè™šæ— ç¼¥ç¼ˆçš„AIåºŸè¯ã€‚ç°åœ¨å®ƒç›´æ¥æŠŠè¿™ä¸¤è€…æåœ¨ä¸€èµ·ï¼Œå½¢æˆäº†ä¸€ä¸ªé—­ç¯ã€‚</p>
<p><strong>æ‡‚è¡Œçš„äººæ‰æ‡‚çš„ç»†èŠ‚ä¼˜åŒ–</strong></p>
<p>ä½œä¸ºä¸€ä¸ªé•¿æœŸè¢«å„ç§â€œäººå·¥æ™ºéšœâ€æŠ˜ç£¨çš„ç”¨æˆ·ï¼Œæˆ‘æœ‰ä¸¤ä¸ªç—›ç‚¹åœ¨è¿™ä¸ªç‰ˆæœ¬é‡Œè¢«æ²»æ„ˆäº†ã€‚</p>
<p>ç¬¬ä¸€æ˜¯â€œæ”¹ä¸åŠ¨â€ã€‚ä»¥å‰å¾ˆå¤šAIç”Ÿæˆçš„è¡¨æ ¼æ˜¯ä¸€å¼ å›¾ç‰‡æˆ–è€…æ­»æ•°æ®ï¼Œæƒ³å¾®è°ƒä¸ªæ•°å€¼æ¯”ç™»å¤©è¿˜éš¾ã€‚Skywork Sheets 2.0ä¿ç•™äº†ä¼ ç»Ÿè¡¨æ ¼çš„å°Šä¸¥ï¼Œæ”¯æŒä½ åƒæ“ä½œExcelä¸€æ ·å»ä¿®æ”¹å•å…ƒæ ¼ã€æ’åºç­›é€‰ã€‚ä½ æ”¹äº†æ•°æ®ï¼ŒAIè¿˜èƒ½æ¥ç€ä½ çš„æ€è·¯ç»§ç»­ä¼˜åŒ–ï¼Œè¿™å°±å¾ˆå°Šé‡äººç±»çš„æ§åˆ¶æ¬²ã€‚</p>
<p>ç¬¬äºŒæ˜¯â€œæ…¢ä¸ç³™çš„æƒè¡¡â€ã€‚æœ‰æ—¶å€™æˆ‘èµ¶æ—¶é—´ï¼Œä¸éœ€è¦é‚£ä¹ˆæ·±åº¦çš„åˆ†æï¼›æœ‰æ—¶å€™æˆ‘åˆè¦å†™æ·±åº¦ç ”æŠ¥ã€‚å®ƒæäº†ä¸ªåˆ†æ¡£ï¼Œæä¾›â€œæé€Ÿæ¨¡å¼â€å’Œâ€œæ·±åº¦æ¨¡å¼â€ã€‚æé€Ÿæ¨¡å¼æŠŠç”Ÿæˆæ—¶é—´ç äº†ä¸€åŠï¼Œé€‚åˆå¿«é€Ÿçœ‹æ•°ï¼›æ·±åº¦æ¨¡å¼åˆ™ä¼šè¿›è¡Œå¤šè½®æ„å›¾æ¾„æ¸…å’Œæ·±åº¦æœç´¢ï¼Œé€‚åˆæ†‹å¤§æ‹›ã€‚</p>
<p><strong>å†™åœ¨æœ€å</strong></p>
<p>åœ¨å­¦æœ¯ç•Œå’ŒæŠ•èµ„åœˆï¼Œå·²ç»æœ‰äººå–Šå®ƒæ˜¯â€œä¸‡èƒ½AIå‘˜å·¥â€äº†ã€‚æˆ‘è§‰å¾—è¿™ä¸ªç§°å‘¼è¿˜ç®—ä¸­è‚¯ã€‚</p>
<p>Skywork Sheets 2.0å¹¶ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è½¯ä»¶å­¤å²›ï¼Œå®ƒæ˜¯å¤©å·¥è¶…çº§æ™ºèƒ½ä½“ç”Ÿæ€é‡Œçš„ä¸€å—æ‹¼å›¾ã€‚å®ƒä¸å†è®©ä½ ç›¯ç€å±å¹•ä¸Šçš„ç½‘æ ¼çº¿å‘æ„ï¼Œè€Œæ˜¯è¯•å›¾è®©ä½ ç›´æ¥é¢å¯¹å†³ç­–ç»“æœã€‚</p>
<p>å¯¹äºæˆ‘ä»¬è¿™äº›æ‰“å·¥äººæ¥è¯´ï¼Œå¦‚æœå·¥å…·èƒ½æŠŠæ•°æ®æ•´ç†ã€åˆ†æã€ç”»å›¾ã€å†™æŠ¥å‘Šè¿™ä¸€æ¡é¾™æœåŠ¡å…¨å¹²äº†ï¼Œé‚£æˆ‘ä»¬è¦åšçš„ï¼Œå¯èƒ½çœŸçš„åªå‰©ä¸‹â€œåšå†³å®šâ€è¿™ä¸€ä»¶äº‹äº†ã€‚</p>
<p>è¿™æˆ–è®¸æ‰æ˜¯AIåŠå…¬è¯¥æœ‰çš„æ ·å­ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡çœ‹æ‡‚AIå¤§æ¨¡å‹çš„æ ¸å¿ƒæ¨¡å—ï¼šåŸºäºå¼ºåŒ–å­¦ä¹ çš„åå¥½å¯¹é½åŸç†åŠå…¶åº”ç”¨]]></title>    <link>https://juejin.cn/post/7588031908170792969</link>    <guid>https://juejin.cn/post/7588031908170792969</guid>    <pubDate>2025-12-26T14:33:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588031908170792969" data-draft-id="7588028859540439066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡çœ‹æ‡‚AIå¤§æ¨¡å‹çš„æ ¸å¿ƒæ¨¡å—ï¼šåŸºäºå¼ºåŒ–å­¦ä¹ çš„åå¥½å¯¹é½åŸç†åŠå…¶åº”ç”¨"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-12-26T14:33:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡çœ‹æ‡‚AIå¤§æ¨¡å‹çš„æ ¸å¿ƒæ¨¡å—ï¼šåŸºäºå¼ºåŒ–å­¦ä¹ çš„åå¥½å¯¹é½åŸç†åŠå…¶åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T14:33:18.000Z" title="Fri Dec 26 2025 14:33:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ— è®ºæ˜¯è¯­è¨€æ¨¡å‹è¿˜æ˜¯æ¨èå¤§æ¨¡å‹ï¼ŒåŸºäºå¼ºåŒ–å­¦ä¹ çš„åå¥½å¯¹é½å·²æˆä¸ºå…¶è®­ç»ƒæµç¨‹ä¸­ä¸å¯æˆ–ç¼ºçš„å…³é”®ç¯èŠ‚ã€‚</p>
<p>æœ¬æ–‡å°†ç³»ç»Ÿæ¢³ç†å¼ºåŒ–å­¦ä¹ åœ¨å¤§æ¨¡å‹ä¸­çš„å®è·µè·¯å¾„ï¼šé¦–å…ˆé˜æ˜å…¶æ ¸å¿ƒæœºåˆ¶ä¸ä¸»æµç®—æ³•ï¼Œç»§è€Œèšç„¦è¯­è¨€æ¨¡å‹ä¸æ¨èå¤§æ¨¡å‹çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼Œæ·±å…¥è§£æå¼ºåŒ–å­¦ä¹ å¦‚ä½•è½åœ°äºå…·ä½“æ¨¡å‹çš„ä¼˜åŒ–è¿‡ç¨‹ã€‚</p>
<p><strong>ä¸€ã€å¼ºåŒ–å­¦ä¹ æ ¸å¿ƒæ€è·¯</strong></p>
<p>å¼ºåŒ–å­¦ä¹ çš„æ ¸å¿ƒä»»åŠ¡åœ¨äºï¼šä¸ºæ™ºèƒ½ä½“è®­ç»ƒä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œè¯¥ç½‘ç»œæ¥æ”¶å½“å‰çŠ¶æ€ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºå¯¹ä¸‹ä¸€æ­¥åŠ¨ä½œçš„é¢„æµ‹ï¼Œä»¥æœ€å¤§åŒ–æ•´ä½“æœŸæœ›å›æŠ¥ã€‚</p>
<p>ä»¥AlphaGoä¸ºä¾‹ï¼Œå…¶å°†æ£‹ç›˜çš„è§†è§‰æˆ–ç½‘æ ¼åŒ–è¡¨å¾è¾“å…¥ç¥ç»ç½‘ç»œï¼Œè¾“å‡ºä¸‹ä¸€æ­¥è½å­ä½ç½®çš„å†³ç­–ï¼Œä»è€Œæå‡èƒœç‡ï¼›å½“æ™ºèƒ½ä½“ä¸ºè¯­è¨€æ¨¡å‹æ—¶ï¼Œåˆ™å°†å½“å‰é—®é¢˜æˆ–å¯¹è¯ä¸Šä¸‹æ–‡ä½œä¸ºè¾“å…¥ï¼Œç”Ÿæˆèƒ½æœ€å¤§ç¨‹åº¦å¥‘åˆäººç±»åå¥½ä¸æ„å›¾çš„å“åº”ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e5b4c3897ef452b817bc415489c3d99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=4n3v9CJZoRYVQJZJbmaFKmOqm5I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer"><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨æ™ºæ³ŠAIã€‚</strong></a></p>
<p>ä¸ºä»€ä¹ˆä¸Šè¿°ä¼˜åŒ–é—®é¢˜æ— æ³•ç”¨æ™®é€šçš„æœ‰ç›‘ç£å­¦ä¹ è¿›è¡Œä¼˜åŒ–ï¼Ÿä¸»è¦æºäºä¸¤ä¸ªæ ¹æœ¬æ€§é™åˆ¶ã€‚</p>
<p>å…¶ä¸€æ˜¯â€Œ<strong>æ ·æœ¬æ”¶é›†æœºåˆ¶</strong>â€Œçš„å·®å¼‚ï¼šåœ¨æ¸¸æˆç­‰åºåˆ—å†³ç­–åœºæ™¯ä¸­ï¼Œæ™ºèƒ½ä½“çš„æ¯ä¸€æ­¥åŠ¨ä½œéƒ½ä¼šæ”¹å˜ç¯å¢ƒçŠ¶æ€ï¼Œè¿›è€Œå½±å“åç»­è¡Œä¸ºä¸å¥–åŠ±ä¿¡å·çš„ç”Ÿæˆï¼›</p>
<p>å› æ­¤ï¼Œæ ·æœ¬çš„äº§ç”Ÿå¿…é¡»ä¾èµ–ä¸€ä¸ªåˆå§‹æ™ºèƒ½ä½“ä¸ç¯å¢ƒçš„æŒç»­äº¤äº’ï¼Œè€Œæ¨¡å‹çš„æ›´æ–°åˆåè¿‡æ¥å½±å“åç»­æ ·æœ¬çš„åˆ†å¸ƒâ€”â€”æ ·æœ¬ç”Ÿæˆä¸æ¨¡å‹è®­ç»ƒå½¢æˆé—­ç¯ï¼Œè¿™ä¸æœ‰ç›‘ç£å­¦ä¹ ä¸­é™æ€ã€ç‹¬ç«‹é‡‡æ ·çš„æ•°æ®é›†æœ‰æœ¬è´¨åŒºåˆ«ã€‚</p>
<p>å…¶äºŒæ˜¯â€Œ<strong>å¥–åŠ±å‡½æ•°çš„ä¼˜åŒ–ç‰¹æ€§</strong>â€Œï¼šå¥–åŠ±è®¾è®¡é€šå¸¸å…·æœ‰å¤šå±‚æ¬¡æ€§ï¼Œæ—¢åŒ…å«å•æ­¥å³æ—¶å¥–åŠ±ï¼Œä¹Ÿæ¶µç›–é•¿æœŸç´¯ç§¯å¥–åŠ±ï¼Œä¸”è¿™äº›å¥–åŠ±å¾€å¾€ç”±è§„åˆ™å¼•æ“æˆ–å¤æ‚æ¨¡å‹åŠ¨æ€è®¡ç®—å¾—å‡ºï¼Œä¸å…·å¤‡å¯å¾®æ€§ï¼›</p>
<p>å› æ­¤ï¼Œæ— æ³•åƒæœ‰ç›‘ç£å­¦ä¹ é‚£æ ·é€šè¿‡æ ‡ç­¾ä¸é¢„æµ‹å€¼çš„ç›´æ¥æ¢¯åº¦åä¼ è¿›è¡Œç«¯åˆ°ç«¯ä¼˜åŒ–ã€‚</p>
<p><strong>äºŒã€å¼ºåŒ–å­¦ä¹ åŸºç¡€ç®—æ³•</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7813ab7e5db40c58c464fac3eb00b3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=NJY%2FvB4uzBySf8wtDHcfPSLHenQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cfd307f6430428aaaedf7d935b2cdcd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=xw49Nzc6DR2oauVyda%2FAKowCmTU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶æ ¸å¿ƒæ€è·¯æ˜¯åˆ©ç”¨é‡è¦æ€§é‡‡æ ·ï¼Œæ ¹æ®æ–°è€å‚æ•°çš„åˆ†å¸ƒå·®å¼‚å¯¹è€å‚æ•°æ™ºèƒ½ä½“æ”¶é›†çš„æ ·æœ¬è¿›è¡ŒåŠ æƒä½¿å¾—è¯¥æ ·æœ¬åœ¨æ–°å‚æ•°ä¸Šä¹Ÿèƒ½è®­ç»ƒã€‚</p>
<p>åŒæ—¶è€ƒè™‘åˆ°ä¸¤ä¸ªåˆ†å¸ƒå·®å¼‚å¤ªå¤§ä¼šå¯¼è‡´é‡è¦æ€§é‡‡æ ·è¯¯å·®è¾ƒå¤§ï¼Œä½¿ç”¨KLæ•£åº¦çº¦æŸæ–°è€å‚æ•°äº§å‡ºçš„è¡Œä¸ºåˆ†å¸ƒä¸èƒ½ç›¸å·®å¤ªå¤šï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨clipçš„æ–¹æ³•å¯¹ä¸¤ä¸ªåˆ†å¸ƒçš„å·®å¼‚è¿›è¡Œclipã€‚</p>
<p><strong>ä¸‰ã€å¤§æ¨¡å‹ä¸­çš„å¼ºåŒ–å­¦ä¹ åº”ç”¨</strong></p>
<p>åœ¨é˜æ˜å¼ºåŒ–å­¦ä¹ çš„åŸºæœ¬åŸç†ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†èšç„¦äºå…¶åœ¨å¤§è¯­è¨€æ¨¡å‹ä¸­çš„å…·ä½“å®è·µã€‚</p>
<p>é¦–ä¸ªå°†å¼ºåŒ–å­¦ä¹ å¼•å…¥å¤§æ¨¡å‹è®­ç»ƒçš„å¼€åˆ›æ€§å·¥ä½œæ˜¯ Training language models to follow instructions with human feedbackï¼ˆ2022ï¼‰ï¼Œè¯¥ç ”ç©¶é‡‡ç”¨ PPO ç®—æ³•å®ç°æ¨¡å‹è¾“å‡ºä¸äººç±»æ„å›¾çš„å¯¹é½ï¼Œä»è€Œå‚¬ç”Ÿäº† InstructGPTã€‚</p>
<p>åœ¨æ­¤æ¡†æ¶ä¸­ï¼Œâ€Œæ™ºèƒ½ä½“â€Œå³ä¸ºå¤§è¯­è¨€æ¨¡å‹è‡ªèº«ï¼›â€Œç¯å¢ƒâ€Œç”±è¾“å…¥çš„ promptï¼ˆå¦‚é—®é¢˜æˆ–æŒ‡ä»¤ï¼‰æ„æˆï¼Œå…¶ç›®æ ‡æ˜¯å¼•å¯¼æ¨¡å‹ç”Ÿæˆå“åº”ï¼›</p>
<p>è€Œâ€ŒåŠ¨ä½œâ€Œåˆ™å¯¹åº”æ¨¡å‹åœ¨æ¯ä¸ªæ—¶é—´æ­¥æ‰€ç”Ÿæˆçš„æ–‡æœ¬ç‰‡æ®µï¼Œæ¯ä¸€ä¸ªæ–‡æœ¬tokençš„è¾“å‡ºå‡è§†ä¸ºåºåˆ—å†³ç­–è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªç‹¬ç«‹è¡ŒåŠ¨ã€‚</p>
<p>Rewardâ€Œ çš„è¯„ä¼°ä¾èµ–äºä¸€ä¸ªç‹¬ç«‹è®­ç»ƒçš„å¥–åŠ±æ¨¡å‹ï¼šé’ˆå¯¹åŒä¸€ promptï¼Œç³»ç»Ÿä¼šé‡‡æ ·å¤šä¸ªæ¨¡å‹è¾“å‡ºï¼Œç”±äººå·¥æ ‡æ³¨è€…å¯¹è¿™äº›è¾“å‡ºè¿›è¡Œæ’åºä¸åå¥½æ ‡æ³¨ï¼Œè¿›è€Œåˆ©ç”¨è¿™äº›å¸¦é¡ºåºçš„åé¦ˆæ•°æ®è®­ç»ƒå‡ºä¸€ä¸ªèƒ½é‡åŒ–è¯„ä¼°â€œprompt+å›ç­”â€ç»„åˆè´¨é‡çš„å¥–åŠ±å‡½æ•°ã€‚</p>
<p>è¯¥å¥–åŠ±æ¨¡å‹è¾“å‡ºçš„åˆ†æ•°ï¼Œå³ä½œä¸ºå¼ºåŒ–å­¦ä¹ è¿‡ç¨‹ä¸­çš„ä¿¡å·åé¦ˆã€‚è¿™ä¸€æœºåˆ¶å®ç°äº†å°†äººç±»ä¸»è§‚çš„è¡¨è¾¾åå¥½ç›´æ¥åµŒå…¥æ¨¡å‹ä¼˜åŒ–ç›®æ ‡ï¼Œè€Œæ­¤ç±»éå¯å¾®çš„åå¥½ä¿¡å·ï¼Œå”¯æœ‰é€šè¿‡å¼ºåŒ–å­¦ä¹ æ¡†æ¶æ‰èƒ½æœ‰æ•ˆæ•´åˆã€‚â€Œ</p>
<p>Value functionâ€Œ åˆ™é‡‡ç”¨ä¸ä¸»æ¨¡å‹å®Œå…¨ä¸€è‡´çš„æ¶æ„ï¼Œå…¶ä½œç”¨æ˜¯é¢„æµ‹åœ¨ç”Ÿæˆæ¯ä¸ª token æ—¶ï¼Œåç»­åºåˆ—æœ€ç»ˆæ‰€èƒ½è·å¾—çš„ç´¯ç§¯å¥–åŠ±é¢„æœŸã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7339418fb26144d38140cb23391b871f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=kO6GMDBlOR1xRKCcM%2F0inzhG2UE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ•´ä½“çš„æŸå¤±å‡½æ•°è¡¨ç¤ºå¦‚ä¸‹ï¼Œå…¶ä¸­ç¬¬ä¸€é¡¹æ˜¯PPOæŸå¤±ï¼Œæ–‡ä¸­å°†PPOçš„KLæ•£åº¦çº¦æŸæ”¹æˆäº†per-tokençš„ï¼Œå³é¢„è®­ç»ƒæ¨¡å‹å’Œåå¥½å¯¹é½åçš„æ¨¡å‹æ¯ä¸ªtokençš„åˆ†å¸ƒä¸èƒ½å·®å¼‚å¤ªå¤§ã€‚åŒæ—¶ä¹Ÿå¼•å…¥äº†å‰åºéå¼ºåŒ–å­¦ä¹ çš„é¢„è®­ç»ƒlossè¿›è¡Œæ··åˆè®­ç»ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e188ac4ce8646e29afc87db5bf58c44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=EVC7Ks8h%2Bn6yQKpDa2Exu295OPo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>DeepSeekMath: Pushing the Limits of Mathematical Reasoning in Open Language Modelsï¼ˆ2024ï¼‰å¼•å…¥äº†ä¸€ç§æ›´é«˜æ•ˆçš„GRPOç®—æ³•ï¼Œç”¨ä»¥æ›¿ä»£ä¼ ç»Ÿçš„PPOæ–¹æ³•ã€‚</p>
<p>åœ¨PPOæ¡†æ¶ä¸­ï¼Œä¸ºè¯„ä¼°æ¯ä¸ªç”Ÿæˆtokençš„æœªæ¥æœŸæœ›å›æŠ¥ï¼Œéœ€ä¾èµ–ä¸€ä¸ªvalue functionä½œä¸ºåŸºå‡†ï¼ˆbaselineï¼‰ï¼Œè¯¥å‡½æ•°é€šå¸¸ä¸ç­–ç•¥ç½‘ç»œï¼ˆå³å¤§æ¨¡å‹æœ¬èº«ï¼‰å…±äº«ç»“æ„ï¼Œå‚æ•°è§„æ¨¡åºå¤§ï¼Œæ˜¾è‘—æ¨é«˜äº†è®¡ç®—å¼€é”€ã€‚</p>
<p>GRPOçš„åˆ›æ–°ä¹‹å¤„åœ¨äºå½»åº•æ‘’å¼ƒäº†è¿™ä¸€value functionï¼Œè½¬è€Œåˆ©ç”¨åŒä¸€é—®é¢˜ä¸‹å¤šæ¡é‡‡æ ·è¾“å‡ºçš„å¥–åŠ±ä¿¡å·ï¼Œé€šè¿‡è®¡ç®—å…¶å‡å€¼ä¸æ–¹å·®å¯¹å½“å‰æ ·æœ¬çš„å¥–åŠ±è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œä»è€Œå®ç°å¯¹baselineåŠŸèƒ½çš„ç­‰æ•ˆæ›¿ä»£ã€‚</p>
<p>äºŒè€…çš„æ ¸å¿ƒå·®å¼‚åœ¨äºï¼šPPOä¾èµ–æ¨¡å‹è‡ªèº«å¯¹å¥–åŠ±æœŸæœ›çš„é¢„æµ‹å€¼ä½œä¸ºåŸºå‡†ï¼Œè€ŒGRPOåˆ™å®Œå…¨åŸºäºé‡‡æ ·ç»“æœç»ç”±å¥–åŠ±æ¨¡å‹è¯„åˆ†åæ‰€å¾—çš„ç»Ÿè®¡é‡æ¥æ„å»ºåŸºå‡†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f985f10a005042f1a7996d66bb313496~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=OlKx4DE2%2Fv0qcLo5%2FzuYQhFtMsE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>DAPO: An Open-Source LLM Reinforcement Learning System at Scaleï¼ˆ2025ï¼‰é’ˆå¯¹PPOä¸GRPOåœ¨å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹è®­ç»ƒä¸­çš„ç“¶é¢ˆï¼Œæå‡ºäº†å››é¡¹å…³é”®æ”¹è¿›ï¼š</p>
<p>PPOçš„Clipçº¦æŸä¼˜åŒ–â€Œï¼šä¼ ç»ŸPPOé€šè¿‡é‡è¦æ€§é‡‡æ ·å¼•å…¥çš„Clipæœºåˆ¶ï¼Œå…¶ä¸Šé™è®¾å®šä¸KLæ•£åº¦ç±»ä¼¼ï¼Œæ—¨åœ¨æ§åˆ¶ç­–ç•¥æ›´æ–°æ—¶è¡Œä¸ºåˆ†å¸ƒçš„åç§»ã€‚</p>
<p>ç„¶è€Œï¼Œè¯¥æœºåˆ¶è¿‡åº¦æŠ‘åˆ¶äº†ä½æ¦‚ç‡tokençš„æ¢ç´¢ï¼ŒåŒæ—¶éš¾ä»¥æœ‰æ•ˆçº¦æŸé«˜æ¦‚ç‡tokençš„è¿‡åº¦æ‰©å¼ ã€‚</p>
<p>ä¸ºæ­¤ï¼ŒDAPOæ”¾å®½äº†Clipçš„ä¸Šé™é˜ˆå€¼ï¼Œä»¥å¢å¼ºæ¢ç´¢è‡ªç”±åº¦å¹¶å¹³è¡¡ç­–ç•¥æ›´æ–°çš„ç¨³å®šæ€§ã€‚</p>
<p>GRPOé‡‡æ ·ç­–ç•¥è°ƒæ•´â€Œï¼šåœ¨è®­ç»ƒåæœŸï¼Œå¤§é‡é‡‡æ ·æ ·æœ¬çš„å¥–åŠ±å€¼è¶‹äºä¸€è‡´ä¸”ç²¾ç¡®ï¼Œå¯¼è‡´æ¢¯åº¦ä¿¡å·å†—ä½™ã€è®­ç»ƒæ•ˆç‡ä¸‹é™ã€‚</p>
<p>DAPOé€šè¿‡å¢åŠ é‡‡æ ·æ€»æ•°ï¼Œå¹¶ä¸»åŠ¨å‰”é™¤å¥–åŠ±å®Œå…¨ä¸€è‡´çš„é‡å¤æ ·æœ¬ï¼Œæ˜¾è‘—æå‡äº†æœ‰æ•ˆæ¢¯åº¦çš„å¤šæ ·æ€§ä¸æ›´æ–°æ•ˆç‡ã€‚</p>
<p>æŸå¤±è®¡ç®—ç²’åº¦é‡æ„â€Œï¼šåŸæ–¹æ³•åœ¨sampleç»´åº¦å¯¹tokenæŸå¤±å–å¹³å‡ï¼Œè‡´ä½¿é•¿åºåˆ—ä¸­å•ä¸ªtokençš„ä¼˜åŠ£è¡¨ç°è¢«æ•´ä½“å¹³æ»‘æ©ç›–ã€‚</p>
<p>DAPOæ”¹ç”¨tokençº§æŸå¤±è®¡ç®—ï¼Œä½¿æ¯ä¸ªç”Ÿæˆtokençš„é¢„æµ‹è¯¯å·®ç‹¬ç«‹è´¡çŒ®æ¢¯åº¦ï¼Œä»è€Œæ›´ç²¾å‡†åœ°å¼•å¯¼æ¨¡å‹ä¼˜åŒ–ã€‚</p>
<p>è¶…é•¿æ ·æœ¬åŠ æƒé™æƒâ€Œï¼šç”±äºtokençº§æŸå¤±å¯¹æˆªæ–­æ ·æœ¬æ›´æ•æ„Ÿï¼Œè¿‡é•¿åºåˆ—è¢«æˆªæ–­åå¼•å…¥çš„è®­ç»ƒä¸ç¨³å®šæ€§åŠ å‰§ã€‚</p>
<p>DAPOä¾æ®æ ·æœ¬è¶…å‡ºæœ€å¤§é•¿åº¦çš„æ¯”ä¾‹åŠ¨æ€è°ƒæ•´å…¶lossæƒé‡ï¼šè¶…å‡ºæ¯”ä¾‹è¶Šé«˜ï¼Œæƒé‡è¶Šä½ï¼Œä»è€Œåœ¨ä¿ç•™é•¿æ–‡æœ¬ä¿¡æ¯çš„åŒæ—¶ç¼“è§£è®­ç»ƒéœ‡è¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40ab6dded1a245269cea09320924da42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=WgKQ56UbaJSkx2VxEF8bfP4gXYA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é™¤äº†ä¸Šè¿°æ ‡å‡†å¼ºåŒ–å­¦ä¹ æ–¹æ³•å¤–ï¼Œæœ‰çš„æ¨¡å‹ä¹Ÿåˆ©ç”¨å…¶ä»–æ–¹æ³•æ¨¡æ‹Ÿå¼ºåŒ–å­¦ä¹ çš„åå¥½å¯¹é½èƒ½åŠ›ã€‚</p>
<p>ä¾‹å¦‚Direct Preference Optimization: Your Language Model is Secretly a Reward Modelï¼ˆ2024ï¼‰è®ºæ–‡ä¸­æå‡ºçš„DPOæ–¹æ³•ã€‚</p>
<p>åŸºäºäººå·¥æ ‡æ³¨çš„æœ€å¥½çš„æ ·æœ¬å’Œæœ€å·®çš„æ ·æœ¬æ„å»ºpair-wiseæ ·æœ¬ï¼Œè®©æ¨¡å‹é¢„æµ‹å¥½æ ·æœ¬æ¦‚ç‡å¤§äºå·®æ ·æœ¬ï¼Œç»•è¿‡äº†å¼ºåŒ–å­¦ä¹ ï¼ŒQwenæ¨¡å‹ä¸­ä¹Ÿä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œåå¥½å¯¹é½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe631ab015c54a1baae4318fc4da2e5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=yIINHVEDHXeROBFYh6kj19S%2BKDg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>å››ã€æ¨èå¤§æ¨¡å‹ä¸­çš„å¼ºåŒ–å­¦ä¹ åº”ç”¨</strong></p>
<p>åœ¨æ¨èå¤§æ¨¡å‹çš„æ¡†æ¶ä¸­ï¼Œå¼ºåŒ–å­¦ä¹ æ–¹æ³•çš„è¿ç”¨åŸºæœ¬ç»§æ‰¿è‡ªè¯­è¨€å¤§æ¨¡å‹çš„ä¸»æµèŒƒå¼ï¼Œå…¶å…³é”®åŒºåˆ«ä½“ç°åœ¨ reward çš„å®šä¹‰æ–¹å¼ä¸Šï¼šåœ¨æ¨èç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¾æ®ç”¨æˆ·æ—¥å¿—è¡Œä¸ºï¼ˆå¦‚æ’­æ”¾æ—¶é•¿ã€ç‚¹å‡»ç‡ç­‰ï¼‰æ¥è¡¡é‡ç”¨æˆ·å¯¹æ¨èå†…å®¹çš„åå¥½ç¨‹åº¦ã€‚</p>
<p>åœ¨ Onerec çš„ç¬¬ä¸€ç‰ˆå®ç°ä¸­ï¼Œreward model çš„è®­ç»ƒæ–¹å¼å€Ÿé‰´äº†ç²¾æ’æ¨¡å‹çš„ç»“æ„ï¼Œå°†å¤šä¸ªæ ¸å¿ƒç›®æ ‡ï¼ˆå¦‚æœ‰æ•ˆæ’­æ”¾ã€ç‚¹å‡»ç‡ç­‰ï¼‰ç»Ÿä¸€å»ºæ¨¡ä¸º reward ä¿¡å·ã€‚</p>
<p>é’ˆå¯¹å•ä¸ªç”¨æˆ·çš„ä¸€æ¬¡ session è¯·æ±‚ï¼Œç³»ç»Ÿé€šè¿‡ beam search ç”Ÿæˆè‹¥å¹²å€™é€‰æ¨èåºåˆ—ï¼Œéšååˆ©ç”¨ç²¾æ’æ¨¡å‹ä¸ºæ¯ä¸ªåºåˆ—è®¡ç®—ç»¼åˆ reward åˆ†æ•°ï¼Œå¹¶ä»ä¸­é€‰å– reward å€¼æœ€é«˜ä¸æœ€ä½çš„ä¸¤ä¸ªæ ·æœ¬æ„æˆæ­£è´Ÿé…å¯¹ï¼Œæœ€ç»ˆåŸºäº DPO æŸå¤±å‡½æ•°å®Œæˆæ¨¡å‹ä¼˜åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e91319caf3a447db058d7120db480b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=6jnpxAQwXUY4%2FXgUyKNlTyFuBPs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ Onerec V2 ä¸­ï¼ŒåŒæ ·å¼•å…¥äº†å¼ºåŒ–å­¦ä¹ ä»¥å®ç°æ¨èå¤§æ¨¡å‹çš„åå¥½å¯¹é½ã€‚å…¶ reward è®¾è®¡æ›´ä¸ºç®€æ´ï¼Œå®Œå…¨ä¾èµ–äººå·¥è®¾å®š reward å€¼ï¼š</p>
<p>å°†ç”¨æˆ·è§‚çœ‹çš„è§†é¢‘æŒ‰å¸‚åœºç»´åº¦åˆ†ç»„ï¼Œè‹¥æŸè§†é¢‘çš„è§‚çœ‹æ—¶é•¿ä½äºè¯¥åˆ†ç»„å†…è¯¥ç”¨æˆ·å†å²è§‚çœ‹æ—¶é•¿çš„å‰ 25% åŒºé—´ï¼Œåˆ™ reward è®¾ä¸º 1ï¼›</p>
<p>è‹¥ç”¨æˆ·å¯¹è§†é¢‘æ‰§è¡Œäº†æ˜¾å¼è´Ÿåé¦ˆæ“ä½œï¼Œåˆ™ reward ç½®ä¸º 0ã€‚è¿™ä¸€æœºåˆ¶å°† PPO ç®—æ³•ä¸­ value function ä¸ baseline çš„æ¯”è¾ƒåŠŸèƒ½ï¼Œç›´æ¥åµŒå…¥è‡³äººå·¥ reward çš„æ„å»ºç¯èŠ‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7acb8d05d7714173833db2fbc98ed7da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=N4leZM%2FMm4ycbre%2FOMw%2Fnm%2BNwm0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13b0030cd2794450a07617123f54f839~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=K6eA9N8evyR%2FOe1uVOWzOsCgrE0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/718bf1a8cc0a4cc2a9e0d09e009c69fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=jLUMn%2FH0JK08Go8g59%2BoKY6SdwE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨RecGPTV2ä¸­ï¼Œä¹Ÿé‡‡ç”¨äº†å¼ºåŒ–å­¦ä¹ çš„æ–¹æ³•å¯¹RecGPTV1è¿›è¡Œåå¥½å¯¹é½ã€‚RecGPTV2é‡‡ç”¨GRPOè¿›è¡Œä¼˜åŒ–ï¼Œä¸»è¦å·®å¼‚æ˜¯åœ¨rewardçš„è®¾è®¡ä¸Šã€‚</p>
<p>åœ¨æ¯ä¸ªExpertçš„è®­ç»ƒä¸Šï¼Œrewardç»¼åˆè€ƒè™‘äº†item tagé¢„æµ‹çš„å‡†ç¡®ç‡ã€åŸºäºç”¨æˆ·åå¥½å¯¹è®­ç»ƒçš„å¥–åŠ±æ¨¡å‹çš„æ‰“åˆ†ã€ç”Ÿæˆç»“æœçš„å¤šæ ·æ€§ï¼ˆæ¯ä¸ªtagæ˜ å°„æˆè¡¨å¾è®¡ç®—ä¸¤ä¸¤cosineè·ç¦»çš„å‡å€¼ï¼‰ç­‰ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°åœ¨æ¨èå¤§æ¨¡å‹é¢†åŸŸï¼Œrewardçš„è®¾è®¡ä¼šæ›´åŠ å¤æ‚ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘ç”¨æˆ·åå¥½ã€å¤šæ ·æ€§ã€è´Ÿåé¦ˆç­‰å„ç§ä¿¡æ¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d72da7c9afc4dac9b0146e6820b880a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=UgPgtNQ5JZDKasUXynW3xFPxo74%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer"><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨æ™ºæ³ŠAIã€‚</strong></a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[0æˆæœ¬æ­å»ºï¼20åˆ†é’Ÿç”¨ Workers AI + Vectorize æå®š RAGï¼ˆé™„å…¨å¥—æºç ï¼‰]]></title>    <link>https://juejin.cn/post/7588031908170809353</link>    <guid>https://juejin.cn/post/7588031908170809353</guid>    <pubDate>2025-12-26T14:41:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588031908170809353" data-draft-id="7588086766235664422" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="0æˆæœ¬æ­å»ºï¼20åˆ†é’Ÿç”¨ Workers AI + Vectorize æå®š RAGï¼ˆé™„å…¨å¥—æºç ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T14:41:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯æ›´å¥½è¯´"/> <meta itemprop="url" content="https://juejin.cn/user/2735240657517816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            0æˆæœ¬æ­å»ºï¼20åˆ†é’Ÿç”¨ Workers AI + Vectorize æå®š RAGï¼ˆé™„å…¨å¥—æºç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240657517816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯æ›´å¥½è¯´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T14:41:00.000Z" title="Fri Dec 26 2025 14:41:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcca2fefd92b480683c9f3e1980e3726~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5pu05aW96K-0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364860&amp;x-signature=K288NHCQ4XYLlp2vowap6R9WTL0%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>æƒ³ç»™å…¬å¸åšä¸ªæ™ºèƒ½å®¢æœï¼ŒæŸ¥äº†ä¸€åœˆ RAG æ•™ç¨‹ï¼Œè¦ä¹ˆè®²ç†è®ºäº‘é‡Œé›¾é‡Œï¼Œè¦ä¹ˆè®©ä½ å…ˆç§Ÿä¸ª GPUã€æ­ç¯å¢ƒï¼Œçœ‹ç€å°±å¤´å¤§ã€‚è¯´å®è¯ï¼Œæˆ‘åˆšå¼€å§‹ç ”ç©¶è¿™å—çš„æ—¶å€™ä¹Ÿä¸€æ ·ï¼Œå…‰æ˜¯é…ç½® LangChain å’Œå‘é‡æ•°æ®åº“å°±æŠ˜è…¾äº†ä¸¤å¤©ï¼Œè¿˜æ²¡è·‘èµ·æ¥ã€‚
åæ¥å‘ç° Cloudflare æ¨å‡ºäº†ä¸€æ•´å¥— AI å·¥å…·ï¼ŒWorkers AI + Vectorize + D1ï¼Œå…¨æ‰˜ç®¡çš„,å…è´¹é¢åº¦è¿˜æŒºå¤§æ–¹ã€‚æˆ‘è¯•ç€ç”¨å®ƒä»¬æ­äº†ä¸ªç¬”è®°é—®ç­”åº”ç”¨ï¼Œä»é›¶åˆ°èƒ½ç”¨çœŸçš„ä¸åˆ° 20 åˆ†é’Ÿï¼Œä»£ç ä¹Ÿå°±ç™¾æ¥è¡Œã€‚
è¿™ç¯‡æ–‡ç« ä¼šæ‰‹æŠŠæ‰‹å¸¦ä½ èµ°ä¸€éå®Œæ•´æµç¨‹ï¼š</p>
<ul>
<li><strong>å…ˆè®²æ¸…æ¥š</strong> RAG åˆ°åº•æ˜¯ä»€ä¹ˆï¼ˆä¸æ‰”æœ¯è¯­ï¼Œç”¨å¤§ç™½è¯ï¼‰</li>
<li><strong>å®æˆ˜æ­å»º</strong>ä¸€ä¸ªèƒ½è·‘çš„çŸ¥è¯†åº“é—®ç­”åº”ç”¨ï¼ˆæœ‰å®Œæ•´ä»£ç ï¼‰</li>
<li><strong>ä¼˜åŒ–æŠ€å·§</strong>è®©æ£€ç´¢æ›´å‡†ç¡®ã€æˆæœ¬æ›´ä½</li>
<li><strong>éƒ¨ç½²ä¸Šçº¿</strong>çœŸæ­£ç”¨èµ·æ¥
ä½ åªéœ€è¦æ‡‚ç‚¹ JavaScriptï¼Œæœ‰ä¸ª Cloudflare è´¦å·ï¼ˆå…è´¹ï¼‰ï¼Œè·Ÿç€æ“ä½œå°±èƒ½åšå‡ºæ¥ã€‚</li>
</ul>
<h2 data-id="heading-1">RAG æ˜¯ä¸ªå•¥ï¼Ÿ5 åˆ†é’Ÿçœ‹æ‡‚å·¥ä½œåŸç†</h2>
<h3 data-id="heading-2">ç”¨è€ƒè¯•æ¥ç†è§£ RAG</h3>
<p>å…ˆè¯´ä¸ªç›´è§‚çš„æ¯”å–»ã€‚ä½ è€ƒè¯•çš„æ—¶å€™ï¼Œé—­å·è€ƒè¯•åªèƒ½é è„‘å­é‡Œè®°çš„ä¸œè¥¿ç­”é¢˜ï¼Œä¸‡ä¸€å¿˜äº†å°±çç¼–ã€‚å¼€å·è€ƒè¯•å°±ä¸ä¸€æ ·äº†ï¼Œä¸ç¡®å®šçš„æ—¶å€™ç¿»ä¹¦æŸ¥èµ„æ–™ï¼Œç­”æ¡ˆå‡†ç¡®å¤šäº†ã€‚
RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰å°±æ˜¯ç»™ AI å¼€å·è€ƒè¯•çš„æƒé™ã€‚
ä¼ ç»Ÿ LLM å°±åƒé—­å·è€ƒè¯•ï¼Œåªèƒ½åŸºäºè®­ç»ƒæ—¶è§è¿‡çš„æ•°æ®å›ç­”ã€‚é—®é¢˜æ˜¯ï¼š</p>
<ul>
<li>è®­ç»ƒæ•°æ®æœ‰æ—¶æ•ˆæ€§ï¼Œä¸çŸ¥é“æœ€æ–°åŠ¨æ€</li>
<li>æ²¡è§è¿‡ä½ å…¬å¸çš„å†…éƒ¨æ–‡æ¡£</li>
<li>è®°ä¸ä½æ‰€æœ‰ç»†èŠ‚ï¼Œå®¹æ˜“çç¼–ï¼ˆè¡Œè¯å«"å¹»è§‰"ï¼‰
RAG çš„åšæ³•æ˜¯ï¼šå…ˆä»ä½ å‡†å¤‡å¥½çš„çŸ¥è¯†åº“é‡Œæ‰¾ç›¸å…³èµ„æ–™ï¼Œç„¶åæŠŠèµ„æ–™ç»™ AIï¼Œè®©å®ƒåŸºäºè¿™äº›å†…å®¹å›ç­”ã€‚è¿™æ ·ç­”æ¡ˆæ—¢é è°±åˆèƒ½ç»“åˆæœ€æ–°ä¿¡æ¯ã€‚</li>
</ul>
<h3 data-id="heading-3">RAG çš„ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤</h3>
<p>&lt;StatsGrid stats={[
{ value: "ç¬¬1æ­¥", label: "æ–‡æ¡£è½¬å‘é‡å­˜å‚¨", description: "å°†çŸ¥è¯†è½¬æˆæ•°å­—è¡¨ç¤º" },
{ value: "ç¬¬2æ­¥", label: "æ£€ç´¢ç›¸ä¼¼å†…å®¹", description: "æ‰¾åˆ°è¯­ä¹‰æœ€ç›¸å…³çš„ç‰‡æ®µ" },
{ value: "ç¬¬3æ­¥", label: "LLMç”Ÿæˆç­”æ¡ˆ", description: "åŸºäºæ£€ç´¢ç»“æœå›ç­”" }
]} columns={3} /&gt;</p>
<p>æ•´ä¸ªæµç¨‹å…¶å®å°±ä¸‰æ­¥ï¼š</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šæŠŠçŸ¥è¯†å˜æˆå‘é‡å­˜èµ·æ¥</strong>
ä½ æœ‰ä¸€å †æ–‡æ¡£å¯¹å§ï¼ŸRAG ä¼šæŠŠæ¯æ®µæ–‡å­—è½¬æˆä¸€ä¸²æ•°å­—ï¼ˆä¸“ä¸šæœ¯è¯­å«"å‘é‡"æˆ–"Embedding"ï¼‰ï¼Œè¿™ä¸²æ•°å­—ä»£è¡¨äº†æ–‡å­—çš„è¯­ä¹‰ã€‚
æ‰“ä¸ªæ¯”æ–¹ï¼Œ"çŒ«å¾ˆå¯çˆ±"å’Œ"å°çŒ«èŒèŒçš„"è™½ç„¶ç”¨è¯ä¸åŒ,ä½†æ„æ€æ¥è¿‘,è½¬æˆå‘é‡åè¿™ä¸¤ä¸²æ•°å­—ä¹Ÿä¼šå¾ˆæ¥è¿‘ã€‚è¿™äº›å‘é‡ä¼šå­˜åˆ° Vectorize è¿™æ ·çš„å‘é‡æ•°æ®åº“é‡Œã€‚</p>
<p><strong>ç¬¬äºŒæ­¥ï¼šç”¨æˆ·æé—®æ—¶,æ‰¾å‡ºæœ€ç›¸å…³çš„çŸ¥è¯†ç‰‡æ®µ</strong>
ç”¨æˆ·é—®"æ€ä¹ˆè®­ç»ƒçŒ«å’ª"çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šå…ˆæŠŠè¿™ä¸ªé—®é¢˜ä¹Ÿè½¬æˆå‘é‡,ç„¶ååœ¨æ•°æ®åº“é‡Œæ‰¾"è·ç¦»æœ€è¿‘"çš„é‚£å‡ æ®µå†…å®¹â€”â€”ä¹Ÿå°±æ˜¯è¯­ä¹‰æœ€ç›¸å…³çš„çŸ¥è¯†ã€‚
è¿™ä¸ªè¿‡ç¨‹å«"ç›¸ä¼¼åº¦æœç´¢"ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œå‡ æ¯«ç§’å°±èƒ½ä»å‡ ä¸‡æ¡æ•°æ®é‡Œæ‰¾å‡ºæœ€åŒ¹é…çš„ 3-5 æ¡ã€‚</p>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šæŠŠæ£€ç´¢åˆ°çš„å†…å®¹å–‚ç»™ LLM ç”Ÿæˆç­”æ¡ˆ</strong>
æ‰¾åˆ°ç›¸å…³å†…å®¹åï¼Œç»„è£…æˆä¸€ä¸ª Prompt å‘ç»™ AIï¼š</p>
<pre><code class="hljs language-css" lang="css">ä»¥ä¸‹æ˜¯ç›¸å…³èµ„æ–™ï¼š
<span class="hljs-selector-attr">[æ£€ç´¢åˆ°çš„å†…å®¹1]</span>
<span class="hljs-selector-attr">[æ£€ç´¢åˆ°çš„å†…å®¹2]</span>
...
ç”¨æˆ·é—®é¢˜ï¼šæ€ä¹ˆè®­ç»ƒçŒ«å’ªï¼Ÿ
è¯·åŸºäºä¸Šè¿°èµ„æ–™å›ç­”ã€‚
</code></pre>
<p>AI çœ‹åˆ°è¿™äº›"å‚è€ƒèµ„æ–™"ï¼Œå°±èƒ½ç»™å‡ºå‡†ç¡®ä¸”æœ‰ä¾æ®çš„ç­”æ¡ˆäº†ã€‚</p>
<h3 data-id="heading-4">ä¸ºä»€ä¹ˆé€‰ Cloudflare å…¨å®¶æ¡¶ï¼Ÿ</h3>
<p>å¸‚é¢ä¸Šåš RAG çš„æ–¹æ¡ˆæŒºå¤šï¼ŒLangChainã€LlamaIndex å•¥çš„éƒ½è¡Œ,ä½†è¦è‡ªå·±é…ç¯å¢ƒã€æŒ‘å‘é‡æ•°æ®åº“ã€ç®¡ GPU èµ„æº,æŠ˜è…¾èµ·æ¥æŒºç´¯çš„ã€‚</p>
<p>Cloudflare è¿™å¥—æ–¹æ¡ˆçš„ä¼˜åŠ¿æ˜¯ï¼š</p>
<p><strong>Workers AI</strong> - å†…ç½®åå‡ ä¸ªå¼€æºæ¨¡å‹ï¼ˆLlama 3ã€Claude ç­‰ï¼‰ï¼Œè°ƒ API å°±èƒ½ç”¨ï¼Œä¸ç”¨ç§Ÿ GPUã€‚å…è´¹å±‚æ¯å¤©æœ‰å›ºå®šçš„ Neurons é¢åº¦ï¼ˆè®¡é‡å•ä½ï¼‰ï¼Œä¸ªäººé¡¹ç›®å¤Ÿç”¨äº†ã€‚</p>
<p><strong>Vectorize</strong> - æ‰˜ç®¡çš„å‘é‡æ•°æ®åº“ï¼Œä¸ç”¨è‡ªå·±æ­ Milvusã€Pinecone é‚£äº›ã€‚åˆ›å»ºç´¢å¼•ã€æ’å…¥å‘é‡ã€ç›¸ä¼¼åº¦æœç´¢ï¼Œå‡ è¡Œä»£ç æå®šã€‚</p>
<p><strong>D1</strong> - Cloudflare çš„ SQLite æ•°æ®åº“,å­˜åŸå§‹æ–‡æœ¬ç”¨ã€‚å‘é‡æ•°æ®åº“åªå­˜å‘é‡,å…·ä½“æ–‡å­—å†…å®¹è¿˜æ˜¯è¦ä»è¿™é‡Œå–ã€‚</p>
<p><strong>å…¨æ‰˜ç®¡</strong> - è¿™æ˜¯æœ€çˆ½çš„åœ°æ–¹ã€‚ä¸ç”¨æ“å¿ƒæœåŠ¡å™¨ã€æ‰©å®¹ã€å¤‡ä»½è¿™äº›ç ´äº‹,ä¸“å¿ƒå†™ä»£ç å°±è¡Œã€‚è€Œä¸” Cloudflare çš„è¾¹ç¼˜ç½‘ç»œ,å…¨çƒè®¿é—®éƒ½å¿«ã€‚</p>
<p/>
<p>2025 å¹´ Cloudflare è¿˜æ¨å‡ºäº† AutoRAGï¼Œè¿›ä¸€æ­¥ç®€åŒ–äº†æµç¨‹â€”â€”ä¸Šä¼ æ–‡æ¡£åˆ° R2ï¼Œåé¢çš„åˆ‡åˆ†ã€å‘é‡åŒ–ã€æ£€ç´¢ã€ç”Ÿæˆå…¨è‡ªåŠ¨ã€‚ä¸è¿‡è¿™ç¯‡æ–‡ç« å’±ä»¬è¿˜æ˜¯æ‰‹åŠ¨æ­ä¸€éï¼Œè¿™æ ·èƒ½å­¦åˆ°åº•å±‚åŸç†ã€‚
è¯´äº†è¿™ä¹ˆå¤šç†è®ºï¼Œæ¥ä¸‹æ¥åŠ¨æ‰‹åšä¸€ä¸ªã€‚</p>
<h2 data-id="heading-5">åŠ¨æ‰‹å®æˆ˜ - æ­å»ºä½ çš„ç¬¬ä¸€ä¸ª RAG åº”ç”¨</h2>
<p>å’±ä»¬åšä¸ªç¬”è®°é—®ç­”åº”ç”¨ï¼šç”¨æˆ·å¯ä»¥æ·»åŠ ç¬”è®°ï¼Œç„¶åæé—®ï¼Œç³»ç»Ÿä»æ‰€æœ‰ç¬”è®°é‡Œæ‰¾ç›¸å…³å†…å®¹å›ç­”ã€‚</p>
<h3 data-id="heading-6">é¡¹ç›®åˆå§‹åŒ–å’Œç¯å¢ƒå‡†å¤‡</h3>
<p>å…ˆè£… Wranglerï¼ˆCloudflare çš„ CLI å·¥å…·ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g wrangler
wrangler login  <span class="hljs-comment"># ç™»å½•ä½ çš„ Cloudflare è´¦å·</span>
</code></pre>
<p>åˆ›å»ºé¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm create cloudflare@latest rag-notes-app
<span class="hljs-comment"># é€‰æ‹© "Hello World" worker</span>
<span class="hljs-comment"># é€‰æ‹© TypeScript</span>
<span class="hljs-built_in">cd</span> rag-notes-app
</code></pre>
<p>è£…ä¸ªè·¯ç”±åº“ Honoï¼ˆæ¯”åŸç”Ÿ Workers API å¥½ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install hono
</code></pre>
<p>åˆ›å»º D1 æ•°æ®åº“å’Œ Vectorize ç´¢å¼•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º D1 æ•°æ®åº“å­˜åŸå§‹ç¬”è®°</span>
wrangler d1 create notes-db
<span class="hljs-comment"># åˆ›å»º Vectorize ç´¢å¼•ï¼ˆ768 ç»´ï¼Œé…åˆ bge-base-en-v1.5 æ¨¡å‹ï¼‰</span>
wrangler vectorize create notes-index --dimensions=768 --metric=cosine
</code></pre>
<p>ç„¶åé…ç½® <code>wrangler.jsonc</code>ï¼ˆæˆ– <code>wrangler.toml</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-jsonc" lang="jsonc">{
  "name": "rag-notes-app",
  "main": "src/index.ts",
  "compatibility_date": "2024-01-01",
  "node_compat": true,
  // AI ç»‘å®š
  "ai": {
    "binding": "AI"
  },
  // D1 æ•°æ®åº“ç»‘å®š
  "d1_databases": [
    {
      "binding": "DB",
      "database_name": "notes-db",
      "database_id": "ä½ çš„æ•°æ®åº“ID"  // ä»ä¸Šé¢åˆ›å»ºå‘½ä»¤çš„è¾“å‡ºå¤åˆ¶
    }
  ],
  // Vectorize ç´¢å¼•ç»‘å®š
  "vectorize": [
    {
      "binding": "VECTORIZE",
      "index_name": "notes-index"
    }
  ],
  // Workflow ç»‘å®šï¼ˆå¤„ç†å¼‚æ­¥å‘é‡åŒ–ä»»åŠ¡ï¼‰
  "workflows": [
    {
      "binding": "RAG_WORKFLOW",
      "name": "rag-workflow",
      "class_name": "RAGWorkflow"
    }
  ]
}
</code></pre>
<p>åˆå§‹åŒ–æ•°æ®åº“è¡¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- schema.sql</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> notes (
  id <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTOINCREMENT,
  text TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  created_at DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wrangler d1 execute notes-db --file=./schema.sql
</code></pre>
<h3 data-id="heading-7">å®ç°çŸ¥è¯†åº“å½•å…¥åŠŸèƒ½</h3>
<p>è¿™æ˜¯æ•´ä¸ª RAG çš„æ ¸å¿ƒâ€”â€”æŠŠç”¨æˆ·çš„ç¬”è®°è½¬æˆå‘é‡å­˜èµ·æ¥ã€‚
åˆ›å»º <code>src/workflow.ts</code>ï¼ˆWorkflow å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">WorkflowEntrypoint</span>, <span class="hljs-title class_">WorkflowStep</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'cloudflare:workers'</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Env</span> = {
  <span class="hljs-attr">AI</span>: <span class="hljs-title class_">Ai</span>;
  <span class="hljs-attr">DB</span>: D1Database;
  <span class="hljs-attr">VECTORIZE</span>: <span class="hljs-title class_">VectorizeIndex</span>;
};
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Params</span> = {
  <span class="hljs-attr">noteId</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>;
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RAGWorkflow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">WorkflowEntrypoint</span>&lt;<span class="hljs-title class_">Env</span>, <span class="hljs-title class_">Params</span>&gt; {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">event: WorkflowEvent&lt;Params&gt;, step: WorkflowStep</span>) {
    <span class="hljs-keyword">const</span> { noteId, text } = event.<span class="hljs-property">payload</span>;
    <span class="hljs-comment">// æ­¥éª¤1ï¼šç¡®è®¤ D1 è®°å½•å·²åˆ›å»ºï¼ˆç”±ä¸»è·¯ç”±å®Œæˆï¼‰</span>
    <span class="hljs-comment">// æ­¥éª¤2ï¼šç”Ÿæˆå‘é‡</span>
    <span class="hljs-keyword">const</span> embeddings = <span class="hljs-keyword">await</span> step.<span class="hljs-title function_">do</span>(<span class="hljs-string">'generate embeddings'</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">env</span>.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(
        <span class="hljs-string">'@cf/baai/bge-base-en-v1.5'</span>,  <span class="hljs-comment">// 768ç»´çš„ Embedding æ¨¡å‹</span>
        { <span class="hljs-attr">text</span>: [text] }
      );
      <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>];  <span class="hljs-comment">// è¿”å›å‘é‡æ•°ç»„</span>
    });
    <span class="hljs-comment">// æ­¥éª¤3ï¼šæ’å…¥ Vectorize</span>
    <span class="hljs-keyword">await</span> step.<span class="hljs-title function_">do</span>(<span class="hljs-string">'insert vector'</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VECTORIZE</span>.<span class="hljs-title function_">insert</span>([
        {
          <span class="hljs-attr">id</span>: noteId.<span class="hljs-title function_">toString</span>(),
          <span class="hljs-attr">values</span>: embeddings,
          <span class="hljs-attr">metadata</span>: { text }  <span class="hljs-comment">// å­˜ä¸€ä»½æ–‡æœ¬æ–¹ä¾¿è°ƒè¯•</span>
        }
      ]);
    });
  }
}
</code></pre>
<p>ä¸»è·¯ç”± <code>src/index.ts</code>ï¼ˆå¤„ç†æ·»åŠ ç¬”è®°ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Hono</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'hono'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RAGWorkflow</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./workflow'</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Bindings</span> = {
  <span class="hljs-attr">AI</span>: <span class="hljs-title class_">Ai</span>;
  <span class="hljs-attr">DB</span>: D1Database;
  <span class="hljs-attr">VECTORIZE</span>: <span class="hljs-title class_">VectorizeIndex</span>;
  <span class="hljs-attr">RAG_WORKFLOW</span>: <span class="hljs-title class_">Workflow</span>;
};
<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hono</span>&lt;{ <span class="hljs-title class_">Bindings</span>: <span class="hljs-title class_">Bindings</span> }&gt;();
<span class="hljs-comment">// æ·»åŠ ç¬”è®°</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/notes'</span>, <span class="hljs-keyword">async</span> (c) =&gt; {
  <span class="hljs-keyword">const</span> { text } = <span class="hljs-keyword">await</span> c.<span class="hljs-property">req</span>.<span class="hljs-property">json</span>&lt;{ <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> }&gt;();
  <span class="hljs-keyword">if</span> (!text?.<span class="hljs-title function_">trim</span>()) {
    <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Text is required'</span> }, <span class="hljs-number">400</span>);
  }
  <span class="hljs-comment">// æ’å…¥ D1</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">DB</span>.<span class="hljs-title function_">prepare</span>(
    <span class="hljs-string">'INSERT INTO notes (text) VALUES (?) RETURNING id'</span>
  ).<span class="hljs-title function_">bind</span>(text).<span class="hljs-property">first</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> }&gt;();
  <span class="hljs-keyword">if</span> (!result) {
    <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Failed to create note'</span> }, <span class="hljs-number">500</span>);
  }
  <span class="hljs-comment">// è§¦å‘ Workflow å¼‚æ­¥ç”Ÿæˆå‘é‡</span>
  <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">RAG_WORKFLOW</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">params</span>: { <span class="hljs-attr">noteId</span>: result.<span class="hljs-property">id</span>, text }
  });
  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">id</span>: result.<span class="hljs-property">id</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-string">'Note created, vectorization in progress'</span>
  });
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> app;
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">RAGWorkflow</span> };
</code></pre>
<p>è¿™æ ·ä¸€æ¥ï¼Œç”¨æˆ·å‘ POST è¯·æ±‚æ·»åŠ ç¬”è®°æ—¶ï¼š</p>
<ol>
<li>æ–‡æœ¬ç«‹å³å­˜åˆ° D1</li>
<li>åå° Workflow æ…¢æ…¢ç”Ÿæˆå‘é‡ã€æ’å…¥ Vectorize</li>
<li>å°±ç®—å‘é‡åŒ–è¦å‡ ç§’é’Ÿï¼Œä¹Ÿä¸ä¼šé˜»å¡ç”¨æˆ·è¯·æ±‚</li>
</ol>
<h3 data-id="heading-8">å®ç°æ™ºèƒ½é—®ç­”åŠŸèƒ½</h3>
<p>ç°åœ¨å¯ä»¥å­˜ç¬”è®°äº†ï¼Œæ¥ä¸‹æ¥åšæŸ¥è¯¢ã€‚
åœ¨ <code>src/index.ts</code> æ·»åŠ ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æŸ¥è¯¢é—®ç­”</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/'</span>, <span class="hljs-keyword">async</span> (c) =&gt; {
  <span class="hljs-keyword">const</span> query = c.<span class="hljs-property">req</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">'q'</span>);
  <span class="hljs-keyword">if</span> (!query) {
    <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Query parameter "q" is required'</span> }, <span class="hljs-number">400</span>);
  }
  <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šæŠŠé—®é¢˜è½¬æˆå‘é‡</span>
  <span class="hljs-keyword">const</span> queryEmbedding = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(
    <span class="hljs-string">'@cf/baai/bge-base-en-v1.5'</span>,
    { <span class="hljs-attr">text</span>: [query] }
  );
  <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šåœ¨ Vectorize é‡Œæ‰¾æœ€ç›¸ä¼¼çš„ 3 æ¡ç¬”è®°</span>
  <span class="hljs-keyword">const</span> matches = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">VECTORIZE</span>.<span class="hljs-title function_">query</span>(
    queryEmbedding.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>],
    { <span class="hljs-attr">topK</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">returnMetadata</span>: <span class="hljs-literal">true</span> }
  );
  <span class="hljs-keyword">if</span> (matches.<span class="hljs-property">count</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">answer</span>: <span class="hljs-string">'æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ç¬”è®°'</span> });
  }
  <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šä» D1 è·å–å®Œæ•´æ–‡æœ¬ï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
  <span class="hljs-keyword">const</span> noteIds = matches.<span class="hljs-property">matches</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">id</span>);
  <span class="hljs-keyword">const</span> notes = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">DB</span>.<span class="hljs-title function_">prepare</span>(
    <span class="hljs-string">`SELECT text FROM notes WHERE id IN (<span class="hljs-subst">${noteIds.map(() =&gt; <span class="hljs-string">'?'</span>).join(<span class="hljs-string">','</span>)}</span>)`</span>
  ).<span class="hljs-title function_">bind</span>(...noteIds).<span class="hljs-title function_">all</span>();
  <span class="hljs-comment">// ç¬¬å››æ­¥ï¼šæ„é€  Promptï¼Œè°ƒç”¨ LLM ç”Ÿæˆç­”æ¡ˆ</span>
  <span class="hljs-keyword">const</span> context = notes.<span class="hljs-property">results</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">n: <span class="hljs-built_in">any</span></span>) =&gt;</span> n.<span class="hljs-property">text</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n\n---\n\n'</span>);
  <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`ä»¥ä¸‹æ˜¯ç›¸å…³çš„ç¬”è®°å†…å®¹ï¼š
<span class="hljs-subst">${context}</span>
ç”¨æˆ·é—®é¢˜ï¼š<span class="hljs-subst">${query}</span>
è¯·åŸºäºä¸Šè¿°ç¬”è®°å†…å®¹å›ç­”ç”¨æˆ·é—®é¢˜ã€‚å¦‚æœç¬”è®°ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·è¯´æ˜ã€‚`</span>;
  <span class="hljs-keyword">const</span> aiResponse = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(
    <span class="hljs-string">'@cf/meta/llama-3-8b-instruct'</span>,  <span class="hljs-comment">// æˆ–è€…ç”¨ claude-3-5-sonnet-latest</span>
    {
      <span class="hljs-attr">messages</span>: [
        { <span class="hljs-attr">role</span>: <span class="hljs-string">'system'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ç¬”è®°åŠ©æ‰‹'</span> },
        { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: prompt }
      ]
    }
  );
  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">answer</span>: aiResponse.<span class="hljs-property">response</span>,
    <span class="hljs-attr">sources</span>: matches.<span class="hljs-property">matches</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> ({
      <span class="hljs-attr">id</span>: m.<span class="hljs-property">id</span>,
      <span class="hljs-attr">score</span>: m.<span class="hljs-property">score</span>,
      <span class="hljs-attr">text</span>: m.<span class="hljs-property">metadata</span>?.<span class="hljs-property">text</span>
    }))
  });
});
</code></pre>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœ¬åœ°è¿è¡Œ</span>
wrangler dev
<span class="hljs-comment"># æ·»åŠ ç¬”è®°</span>
curl -X POST http://localhost:8787/notes \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{"text": "Cloudflare Workers AI æ”¯æŒ Llama 3 å’Œ Claude æ¨¡å‹"}'</span>
curl -X POST http://localhost:8787/notes \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{"text": "Vectorize ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦è¿›è¡Œå‘é‡æ£€ç´¢"}'</span>
<span class="hljs-comment"># ç­‰å‡ ç§’è®© Workflow å®Œæˆå‘é‡åŒ–</span>
<span class="hljs-comment"># æé—®</span>
curl <span class="hljs-string">"http://localhost:8787/?q=Workers%20AI%20æœ‰å“ªäº›æ¨¡å‹"</span>
</code></pre>
<p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ ä¼šæ”¶åˆ°åŸºäºç¬”è®°å†…å®¹çš„å›ç­”ã€‚</p>
<h3 data-id="heading-9">åˆ é™¤å’Œæ›´æ–°åŠŸèƒ½</h3>
<p>åˆ é™¤ç¬”è®°æ—¶ï¼Œè®°å¾—åŒæ—¶åˆ é™¤ D1 å’Œ Vectorize çš„æ•°æ®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">app.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'/notes/:id'</span>, <span class="hljs-keyword">async</span> (c) =&gt; {
  <span class="hljs-keyword">const</span> id = c.<span class="hljs-property">req</span>.<span class="hljs-title function_">param</span>(<span class="hljs-string">'id'</span>);
  <span class="hljs-comment">// ä» D1 åˆ é™¤</span>
  <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">DB</span>.<span class="hljs-title function_">prepare</span>(<span class="hljs-string">'DELETE FROM notes WHERE id = ?'</span>).<span class="hljs-title function_">bind</span>(id).<span class="hljs-title function_">run</span>();
  <span class="hljs-comment">// ä» Vectorize åˆ é™¤</span>
  <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">VECTORIZE</span>.<span class="hljs-title function_">deleteByIds</span>([id]);
  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'Note deleted'</span> });
});
</code></pre>
<p>æ›´æ–°çš„è¯ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯å…ˆåˆ ååŠ ï¼ˆé‡æ–°ç”Ÿæˆå‘é‡ï¼‰ã€‚
å®Œæ•´ä»£ç å¯ä»¥å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcloudflare%2Fworkers-sdk%2Ftree%2Fmain%2Ftemplates%2Fworker-ai-rag" target="_blank" title="https://github.com/cloudflare/workers-sdk/tree/main/templates/worker-ai-rag" ref="nofollow noopener noreferrer">Cloudflare å®˜æ–¹ç¤ºä¾‹</a>ã€‚</p>
<h2 data-id="heading-10">è¿›é˜¶ä¼˜åŒ– - è®©ä½ çš„ RAG æ›´èªæ˜</h2>
<p>åŸºç¡€åŠŸèƒ½è·‘èµ·æ¥äº†ï¼Œä½†è¦çœŸæ­£ç”¨åœ¨å®é™…é¡¹ç›®é‡Œï¼Œè¿˜æœ‰äº›ç»†èŠ‚å€¼å¾—ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-11">æ–‡æœ¬åˆ†å—ç­–ç•¥</h3>
<p>ç°åœ¨å’±ä»¬æ˜¯æŠŠæ•´æ¡ç¬”è®°å½“ä¸€ä¸ªå•å…ƒå­˜çš„ã€‚å¦‚æœç¬”è®°å¾ˆé•¿ï¼ˆæ¯”å¦‚ä¸€ç¯‡æŠ€æœ¯æ–‡æ¡£ï¼‰ï¼Œè¿™æ ·åšä¼šæœ‰é—®é¢˜ï¼š</p>
<ol>
<li>æ£€ç´¢æ—¶æ•´ç¯‡æ–‡æ¡£çš„ç›¸ä¼¼åº¦å¯èƒ½ä¸é«˜ï¼ˆåªæœ‰éƒ¨åˆ†æ®µè½ç›¸å…³ï¼‰</li>
<li>Prompt å¤ªé•¿ä¼šè¶…å‡º LLM çš„ä¸Šä¸‹æ–‡çª—å£é™åˆ¶
æ›´å¥½çš„åšæ³•æ˜¯<strong>æŠŠé•¿æ–‡æœ¬åˆ‡æˆå°å—</strong>ï¼ˆchunkï¼‰ï¼Œæ¯å—å•ç‹¬ç”Ÿæˆå‘é‡ã€‚
ç®€å•çš„åˆ†å—æ–¹æ³•ï¼š</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">splitText</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span>, chunkSize: <span class="hljs-built_in">number</span> = <span class="hljs-number">500</span>, overlap: <span class="hljs-built_in">number</span> = <span class="hljs-number">50</span></span>): <span class="hljs-built_in">string</span>[] {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">chunks</span>: <span class="hljs-built_in">string</span>[] = [];
  <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">while</span> (start &lt; text.<span class="hljs-property">length</span>) {
    <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(start + chunkSize, text.<span class="hljs-property">length</span>);
    chunks.<span class="hljs-title function_">push</span>(text.<span class="hljs-title function_">slice</span>(start, end));
    start = end - overlap;  <span class="hljs-comment">// é‡å ä¸€ç‚¹ï¼Œé¿å…å¥å­è¢«åˆ‡æ–­</span>
  }
  <span class="hljs-keyword">return</span> chunks;
}
</code></pre>
<p>æ›´æ™ºèƒ½çš„æ–¹å¼æ˜¯æŒ‰æ®µè½æˆ–è¯­ä¹‰åˆ†å‰²ï¼ˆå¯ä»¥ç”¨ LangChain çš„ <code>RecursiveCharacterTextSplitter</code>ï¼‰ï¼Œä¸è¿‡å¯¹å¤§éƒ¨åˆ†åœºæ™¯æ¥è¯´ï¼Œå›ºå®šé•¿åº¦+é‡å å·²ç»å¤Ÿç”¨äº†ã€‚
ä¿®æ”¹ Workflowï¼Œç»™æ¯ä¸ª chunk åˆ†é…å”¯ä¸€ IDï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> chunks = <span class="hljs-title function_">splitText</span>(text);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; chunks.<span class="hljs-property">length</span>; i++) {
  <span class="hljs-keyword">const</span> chunkId = <span class="hljs-string">`<span class="hljs-subst">${noteId}</span>-<span class="hljs-subst">${i}</span>`</span>;
  <span class="hljs-keyword">const</span> embeddings = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">env</span>.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(<span class="hljs-string">'@cf/baai/bge-base-en-v1.5'</span>, {
    <span class="hljs-attr">text</span>: [chunks[i]]
  });
  <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VECTORIZE</span>.<span class="hljs-title function_">insert</span>([{
    <span class="hljs-attr">id</span>: chunkId,
    <span class="hljs-attr">values</span>: embeddings.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>],
    <span class="hljs-attr">metadata</span>: { noteId, <span class="hljs-attr">chunkIndex</span>: i, <span class="hljs-attr">text</span>: chunks[i] }
  }]);
}
</code></pre>
<h3 data-id="heading-12">æå‡æ£€ç´¢å‡†ç¡®åº¦</h3>
<p><strong>è°ƒæ•´ topK å’Œç›¸ä¼¼åº¦é˜ˆå€¼</strong>
é»˜è®¤è¿”å› top 3 å¯èƒ½ä¸å¤Ÿï¼Œä¹Ÿå¯èƒ½å¤ªå¤šã€‚è¯•è¯•è°ƒåˆ° 5 æ¡ï¼ŒåŒæ—¶è¿‡æ»¤æ‰ç›¸ä¼¼åº¦å¤ªä½çš„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> matches = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">VECTORIZE</span>.<span class="hljs-title function_">query</span>(queryEmbedding.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>], {
  <span class="hljs-attr">topK</span>: <span class="hljs-number">5</span>,
  <span class="hljs-attr">returnMetadata</span>: <span class="hljs-literal">true</span>
});
<span class="hljs-comment">// åªä¿ç•™ç›¸ä¼¼åº¦ &gt; 0.7 çš„ç»“æœ</span>
<span class="hljs-keyword">const</span> relevantMatches = matches.<span class="hljs-property">matches</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">score</span> &gt; <span class="hljs-number">0.7</span>);
</code></pre>
<p>ç›¸ä¼¼åº¦åˆ†æ•°èŒƒå›´æ˜¯ 0-1ï¼ˆä½™å¼¦ç›¸ä¼¼åº¦ï¼‰ï¼Œ0.7 ä»¥ä¸Šä¸€èˆ¬ç®—æ¯”è¾ƒç›¸å…³ã€‚
<strong>ä¼˜åŒ– Prompt</strong>
åˆ«å…‰æŠŠæ£€ç´¢åˆ°çš„å†…å®¹æ‰”ç»™ AIï¼Œå‘Šè¯‰å®ƒæ€ä¹ˆç”¨è¿™äº›ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ç¬”è®°åŠ©æ‰‹ã€‚ä»¥ä¸‹æ˜¯ä»ç¬”è®°åº“ä¸­æ£€ç´¢åˆ°çš„ç›¸å…³å†…å®¹ï¼ˆæŒ‰ç›¸å…³æ€§æ’åºï¼‰ï¼š
<span class="hljs-subst">${context}</span>
è¯·ä¸¥æ ¼åŸºäºä¸Šè¿°å†…å®¹å›ç­”ç”¨æˆ·é—®é¢˜ã€‚å¦‚æœå†…å®¹ä¸è¶³ä»¥å›ç­”é—®é¢˜ï¼Œæ˜ç¡®è¯´æ˜"ç¬”è®°ä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä¿¡æ¯"ï¼Œä¸è¦ç¼–é€ ç­”æ¡ˆã€‚
ç”¨æˆ·é—®é¢˜ï¼š<span class="hljs-subst">${query}</span>`</span>;
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>æ˜ç¡®å‘Šè¯‰ AI è¿™æ˜¯æ£€ç´¢åˆ°çš„èµ„æ–™</li>
<li>è¦æ±‚å®ƒåªåŸºäºè¿™äº›å†…å®¹å›ç­”</li>
<li>å…è®¸å®ƒæ‰¿è®¤"ä¸çŸ¥é“"
è¿™æ ·èƒ½å‡å°‘ AI çç¼–çš„æƒ…å†µã€‚</li>
</ul>
<h3 data-id="heading-13">æˆæœ¬æ§åˆ¶å’Œé™æµ</h3>
<p>Workers AI å…è´¹å±‚æ¯å¤©æœ‰ Neurons é¢åº¦é™åˆ¶ï¼ˆå…·ä½“æ•°å€¼ä¼šå˜ï¼Œå» <a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.cloudflare.com%2Fworkers-ai%2Fplatform%2Fpricing%2F" target="_blank" title="https://developers.cloudflare.com/workers-ai/platform/pricing/" ref="nofollow noopener noreferrer">Pricing é¡µé¢</a> æŸ¥æœ€æ–°çš„ï¼‰ã€‚</p>
<p><strong>ç›‘æ§ç”¨é‡</strong>ï¼š
åœ¨ Cloudflare Dashboard â†’ Workers AI é‡Œèƒ½çœ‹åˆ°æ¯æ—¥æ¶ˆè€—ã€‚ä¸åŒæ¨¡å‹æ¶ˆè€—ä¸åŒï¼ŒEmbedding æ¨¡å‹ä¾¿å®œï¼ŒLLM ç”Ÿæˆè´µä¸€äº›ã€‚</p>
<p><strong>é™çº§ç­–ç•¥</strong>ï¼š
å¦‚æœæ‹…å¿ƒè¶…é¢ï¼Œå¯ä»¥ï¼š</p>
<ol>
<li>é™åˆ¶æ¯ä¸ªç”¨æˆ·çš„è¯·æ±‚é¢‘ç‡ï¼ˆç”¨ KV æˆ– Durable Objects è®¡æ•°ï¼‰</li>
<li>è¶…å‡ºé¢åº¦åæ”¹ç”¨æ›´å°çš„æ¨¡å‹æˆ–è¿”å›ç¼“å­˜ç»“æœ</li>
<li>å¯¹äºéå…³é”®è¯·æ±‚ï¼Œç›´æ¥è¿”å›æ£€ç´¢åˆ°çš„åŸæ–‡ï¼Œä¸è°ƒ LLM</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç®€å•é™æµç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> userKey = c.<span class="hljs-property">req</span>.<span class="hljs-title function_">header</span>(<span class="hljs-string">'X-User-ID'</span>) || <span class="hljs-string">'anonymous'</span>;
<span class="hljs-keyword">const</span> requestCount = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">KV</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">`rate:<span class="hljs-subst">${userKey}</span>`</span>) || <span class="hljs-number">0</span>;
<span class="hljs-keyword">if</span> (requestCount &gt; <span class="hljs-number">100</span>) {
  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Rate limit exceeded'</span> }, <span class="hljs-number">429</span>);
}
<span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">KV</span>.<span class="hljs-title function_">put</span>(<span class="hljs-string">`rate:<span class="hljs-subst">${userKey}</span>`</span>, requestCount + <span class="hljs-number">1</span>, { <span class="hljs-attr">expirationTtl</span>: <span class="hljs-number">86400</span> });
</code></pre>
<h3 data-id="heading-14">åˆ‡æ¢æ›´å¼ºçš„æ¨¡å‹</h3>
<p>Llama 3 8B å·²ç»æŒºä¸é”™äº†ï¼Œä½†å¦‚æœæƒ³è¦æ›´å¥½çš„ç†è§£èƒ½åŠ›ï¼Œå¯ä»¥è¯•è¯• Claudeï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// éœ€è¦å…ˆåœ¨ Dashboard ç»‘å®š Anthropic API key</span>
<span class="hljs-keyword">const</span> aiResponse = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(<span class="hljs-string">'claude-3-5-sonnet-latest'</span>, {
  <span class="hljs-attr">messages</span>: [
    { <span class="hljs-attr">role</span>: <span class="hljs-string">'system'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ç¬”è®°åŠ©æ‰‹'</span> },
    { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: prompt }
  ]
});
</code></pre>
<p>Claude çš„ç†è§£èƒ½åŠ›å’Œè¾“å‡ºè´¨é‡ç¡®å®æ›´å¥½ï¼Œä½†æ¶ˆè€—çš„ Neurons ä¹Ÿæ›´å¤šã€‚æ ¹æ®å®é™…éœ€æ±‚é€‰å§ã€‚
æˆ‘è‡ªå·±çš„ç»éªŒæ˜¯ï¼š</p>
<ul>
<li><strong>ç®€å•é—®ç­”</strong>ï¼šLlama 3 å¤Ÿç”¨</li>
<li><strong>éœ€è¦æ¨ç†ã€æ€»ç»“</strong>ï¼šClaude æ˜æ˜¾å¥½ä¸€äº›</li>
<li><strong>é¢„ç®—æœ‰é™</strong>ï¼šå…ˆç”¨ Llama æµ‹è¯•ï¼Œç¡®å®šéœ€æ±‚åå†å‡çº§</li>
</ul>
<h2 data-id="heading-15">éƒ¨ç½²ä¸Šçº¿å’Œå®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-16">éƒ¨ç½²æµç¨‹</h3>
<p>æœ¬åœ°æµ‹è¯•æ²¡é—®é¢˜åï¼Œéƒ¨ç½²è¶…ç®€å•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wrangler deploy
</code></pre>
<p>å°±è¿™ä¸€è¡Œï¼ŒCloudflare ä¼šè‡ªåŠ¨ï¼š</p>
<ul>
<li>æ‰“åŒ…ä½ çš„ä»£ç </li>
<li>éƒ¨ç½²åˆ°å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹</li>
<li>ç”Ÿæˆä¸€ä¸ª <code>.workers.dev</code> åŸŸå
ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino">Published rag-notes-app
  https:<span class="hljs-comment">//rag-notes-app.your-account.workers.dev</span>
</code></pre>
<p>è¿™å°±æ˜¯ä½ çš„ API åœ°å€äº†ã€‚</p>
<p><strong>ç»‘å®šè‡ªå®šä¹‰åŸŸå</strong>ï¼ˆå¯é€‰ï¼‰ï¼š
å¦‚æœä½ æœ‰åŸŸåæ‰˜ç®¡åœ¨ Cloudflareï¼Œå¯ä»¥ç»‘å®šï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wrangler domains add api.yourdomain.com
</code></pre>
<p>æˆ–è€…åœ¨ Dashboard â†’ Workers &amp; Pages â†’ ä½ çš„ Worker â†’ Settings â†’ Domains é‡Œæ·»åŠ ã€‚</p>
<p><strong>ç¯å¢ƒå˜é‡å’Œ Secrets</strong>ï¼š
å¦‚æœä½ ç”¨äº† Anthropic API key æˆ–å…¶ä»–æ•æ„Ÿä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wrangler secret put ANTHROPIC_API_KEY
<span class="hljs-comment"># è¾“å…¥ä½ çš„ key</span>
</code></pre>
<p>ä»£ç é‡Œè¿™æ ·ç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> apiKey = c.<span class="hljs-property">env</span>.<span class="hljs-property">ANTHROPIC_API_KEY</span>;
</code></pre>
<h3 data-id="heading-17">çœŸå®åº”ç”¨åœºæ™¯</h3>
<p>è¿™å¥— RAG æ¶æ„èƒ½åšçš„äº‹æŒºå¤šï¼Œåˆ†äº«å‡ ä¸ªå®é™…åœºæ™¯ï¼š</p>
<p><strong>1. ä¼ä¸šçŸ¥è¯†åº“é—®ç­”</strong></p>
<p>åœºæ™¯ï¼šå…¬å¸æœ‰å‡ ç™¾é¡µå‘˜å·¥æ‰‹å†Œã€æŠ€æœ¯æ–‡æ¡£ã€FAQï¼Œæ–°å‘˜å·¥æ‰¾èµ„æ–™å¾ˆéº»çƒ¦ã€‚
åšæ³•ï¼š</p>
<ul>
<li>æŠŠæ‰€æœ‰æ–‡æ¡£ä¸Šä¼ ï¼ŒæŒ‰ç« èŠ‚åˆ†å—å­˜å…¥ Vectorize</li>
<li>åšä¸ªç®€å•çš„ Web ç•Œé¢æˆ–æ¥å…¥ä¼ä¸šå¾®ä¿¡æœºå™¨äºº</li>
<li>å‘˜å·¥ç›´æ¥é—®"æŠ¥é”€æµç¨‹æ˜¯ä»€ä¹ˆ"ï¼Œç³»ç»Ÿè‡ªåŠ¨æ£€ç´¢ç›¸å…³ç« èŠ‚å›ç­”
å¥½å¤„ï¼š24 å°æ—¶åœ¨çº¿ï¼Œæ¯”ç¿»æ–‡æ¡£å¿«å¤šäº†ã€‚</li>
</ul>
<p><strong>2. æ™ºèƒ½å®¢æœ</strong></p>
<p>åœºæ™¯ï¼šç”µå•†ç½‘ç«™æœ‰å¤§é‡å•†å“ä¿¡æ¯å’Œå”®åæ”¿ç­–ï¼Œå®¢æœé‡å¤å›ç­”ç›¸åŒé—®é¢˜ã€‚
åšæ³•ï¼š</p>
<ul>
<li>æŠŠå¸¸è§é—®é¢˜ã€å•†å“æè¿°ã€é€€æ¢è´§æ”¿ç­–å­˜è¿›å»</li>
<li>ç”¨æˆ·å’¨è¯¢æ—¶å…ˆè®© RAG ç³»ç»Ÿå›ç­”</li>
<li>ç­”ä¸ä¸Šæ¥çš„å†è½¬äººå·¥
æ•ˆæœï¼šæŸä¸ªå¼€å‘è€…ç”¨è¿™å¥—æ–¹æ¡ˆï¼ŒæŠŠå®¢æœå‹åŠ›å‡å°‘äº† 60%+ã€‚</li>
</ul>
<p><strong>3. ä¸ªäººç¬”è®°åŠ©æ‰‹</strong></p>
<p>åœºæ™¯ï¼šä½ ç”¨ Notion æˆ– Obsidian è®°äº†å‡ å¹´ç¬”è®°ï¼Œæƒ³å¿«é€Ÿæ‰¾åˆ°æŸä¸ªçŸ¥è¯†ç‚¹ã€‚
åšæ³•ï¼š</p>
<ul>
<li>å®šæœŸæŠŠç¬”è®°å¯¼å‡ºï¼Œé€šè¿‡ API æ·»åŠ åˆ° RAG ç³»ç»Ÿ</li>
<li>éœ€è¦æ—¶ç›´æ¥é—®"ä¸Šæ¬¡çœ‹çš„é‚£ä¸ª TypeScript æŠ€å·§æ˜¯å•¥æ¥ç€"</li>
<li>ç³»ç»Ÿæ£€ç´¢å‡ºç›¸å…³ç¬”è®°ç‰‡æ®µ
æˆ‘è‡ªå·±å°±åœ¨ç”¨ç±»ä¼¼çš„å·¥å…·ï¼Œæ‰¾èµ„æ–™æ•ˆç‡çœŸçš„æå‡äº†ä¸å°‘ã€‚</li>
</ul>
<p><strong>4. "Chat with PDF" å·¥å…·</strong></p>
<p>åœºæ™¯ï¼šç”¨æˆ·ä¸Šä¼ ä¸€ä»½ PDFï¼ˆè®ºæ–‡ã€åˆåŒã€æŠ¥å‘Šï¼‰ï¼Œæƒ³å¿«é€Ÿæå–ä¿¡æ¯ã€‚
åšæ³•ï¼ˆå‚è€ƒ Rohit Patil çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Frohitpatil.com%2Fblog%2Fai-rag-with-vectorize.html" target="_blank" title="https://rohitpatil.com/blog/ai-rag-with-vectorize.html" ref="nofollow noopener noreferrer">æ¡ˆä¾‹</a>ï¼‰ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¸Šä¼  PDF åˆ° R2</li>
<li>Worker è¯»å– PDFï¼Œæå–æ–‡æœ¬ï¼Œåˆ†å—å‘é‡åŒ–</li>
<li>ç”¨æˆ·å¯ä»¥é—®"è¿™ä»½åˆåŒçš„ä»˜æ¬¾æ¡æ¬¾æ˜¯ä»€ä¹ˆ"
è¿™ä¸ªåœºæ™¯ç‰¹åˆ«å®ç”¨ï¼Œå¾ˆå¤šæ³•å¾‹ã€å’¨è¯¢è¡Œä¸šçš„äººéœ€è¦ã€‚</li>
</ul>
<p>&lt;StatsGrid stats={[
{ value: "24å°æ—¶", label: "ä¼ä¸šçŸ¥è¯†åº“åœ¨çº¿" },
{ value: "60%+", label: "æ™ºèƒ½å®¢æœå‹åŠ›å‡å°‘" },
{ value: "10å€", label: "ä¸ªäººç¬”è®°æ£€ç´¢æ•ˆç‡æå‡" }
]} source="å®é™…åº”ç”¨æ¡ˆä¾‹æ•°æ®" /&gt;</p>
<h3 data-id="heading-18">å¸¸è§é—®é¢˜æ’æŸ¥</h3>
<p><strong>é—®é¢˜1ï¼šå‘é‡ç»´åº¦ä¸åŒ¹é…</strong></p>
<p>é”™è¯¯ï¼š<code>dimension mismatch: expected 768, got 512</code>
åŸå› ï¼šVectorize ç´¢å¼•åˆ›å»ºæ—¶è®¾çš„ç»´åº¦ï¼ˆ768ï¼‰å’Œæ¨¡å‹è¾“å‡ºçš„ç»´åº¦ä¸ä¸€è‡´ã€‚
è§£å†³ï¼šç¡®ä¿ç´¢å¼•ç»´åº¦å’Œæ¨¡å‹åŒ¹é…ã€‚<code>bge-base-en-v1.5</code> æ˜¯ 768 ç»´ï¼Œåˆ«ç”¨é”™æ¨¡å‹ã€‚</p>
<p><strong>é—®é¢˜2ï¼šD1 å’Œ Vectorize æ•°æ®ä¸ä¸€è‡´</strong></p>
<p>ç°è±¡ï¼šæŸ¥è¯¢è¿”å›çš„ note ID åœ¨ D1 é‡Œä¸å­˜åœ¨ã€‚
åŸå› ï¼šå¯èƒ½åˆ é™¤ D1 è®°å½•æ—¶å¿˜äº†åˆ  Vectorizeï¼Œæˆ–è€… Workflow å¤±è´¥äº†ã€‚
è§£å†³ï¼šåˆ é™¤æ“ä½œè¦ä¹ˆåŒ…åœ¨äº‹åŠ¡é‡Œï¼Œè¦ä¹ˆç”¨ Workflow ç¡®ä¿ä¸¤è¾¹éƒ½åˆ å¹²å‡€ã€‚</p>
<p><strong>é—®é¢˜3ï¼šWorkflow è¶…æ—¶</strong></p>
<p>é”™è¯¯ï¼šworkflow execution timeout
åŸå› ï¼šå‘é‡åŒ–å¤§é‡æ–‡æœ¬æ—¶è¶…è¿‡ Workflow çš„æ—¶é—´é™åˆ¶ã€‚
è§£å†³ï¼šæŠŠå¤§æ–‡æ¡£æ‹†æˆå¤šä¸ª Workflow ä»»åŠ¡ï¼Œæˆ–è€…æ‰¹é‡å¤„ç†ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ†æ‰¹å¤„ç†</span>
<span class="hljs-keyword">const</span> batchSize = <span class="hljs-number">10</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; chunks.<span class="hljs-property">length</span>; i += batchSize) {
  <span class="hljs-keyword">const</span> batch = chunks.<span class="hljs-title function_">slice</span>(i, i + batchSize);
  <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">RAG_WORKFLOW</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">params</span>: { noteId, <span class="hljs-attr">chunks</span>: batch, <span class="hljs-attr">offset</span>: i }
  });
}
</code></pre>
<h2 data-id="heading-19">ç»“è®º</h2>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œå›é¡¾ä¸€ä¸‹å’±ä»¬åšäº†å•¥ï¼š</p>
<ul>
<li><strong>å¼„æ‡‚äº† RAG åŸç†</strong>ï¼šæ£€ç´¢å¢å¼ºç”Ÿæˆï¼Œå°±æ˜¯ç»™ AI å¼€å·è€ƒè¯•çš„æƒé™ï¼Œå…ˆæ‰¾èµ„æ–™å†å›ç­”</li>
<li><strong>æ­äº†ä¸ªèƒ½è·‘çš„åº”ç”¨</strong>ï¼šç¬”è®°é—®ç­”ç³»ç»Ÿï¼Œä»ç¯å¢ƒå‡†å¤‡åˆ°ä»£ç å®ç°ï¼Œå®Œæ•´èµ°äº†ä¸€é</li>
<li><strong>å­¦äº†ä¼˜åŒ–æŠ€å·§</strong>ï¼šæ–‡æœ¬åˆ†å—ã€æ£€ç´¢è°ƒä¼˜ã€æˆæœ¬æ§åˆ¶ï¼Œè¿™äº›ç»†èŠ‚è®©åº”ç”¨çœŸæ­£å¯ç”¨</li>
<li><strong>çœ‹äº†å®é™…åœºæ™¯</strong>ï¼šä¼ä¸šçŸ¥è¯†åº“ã€æ™ºèƒ½å®¢æœã€ä¸ªäººåŠ©æ‰‹ã€PDF èŠå¤©ï¼Œéƒ½æ˜¯å¯ä»¥è½åœ°çš„æ–¹å‘
Cloudflare è¿™å¥—æ–¹æ¡ˆæœ€å¤§çš„ä¼˜åŠ¿æ˜¯<strong>é—¨æ§›ä½</strong>ã€‚ä¸ç”¨ç§Ÿ GPUã€ä¸ç”¨æ­æ•°æ®åº“ã€ä¸ç”¨æ“å¿ƒè¿ç»´ï¼Œå…è´¹é¢åº¦å¯¹ä¸ªäººé¡¹ç›®æ¥è¯´ç»å¯¹å¤Ÿç”¨ã€‚å°±ç®—æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œä»˜è´¹è®¡åˆ’ä¹Ÿæ¯”è‡ªå»ºä¾¿å®œå¤šäº†ã€‚
æ¥ä¸‹æ¥ä½ å¯ä»¥ï¼š</li>
</ul>
<ol>
<li><strong>ç«‹å³åŠ¨æ‰‹</strong>ï¼šå…‹éš† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcloudflare%2Fworkers-sdk%2Ftree%2Fmain%2Ftemplates%2Fworker-ai-rag" target="_blank" title="https://github.com/cloudflare/workers-sdk/tree/main/templates/worker-ai-rag" ref="nofollow noopener noreferrer">å®˜æ–¹ç¤ºä¾‹ä»£ç </a>ï¼Œ<code>wrangler dev</code> è·‘èµ·æ¥ï¼Œ5 åˆ†é’Ÿå°±èƒ½çœ‹åˆ°æ•ˆæœ</li>
<li><strong>æ¥å…¥çœŸå®æ•°æ®</strong>ï¼šæŠŠä½ çš„ç¬”è®°ã€æ–‡æ¡£ã€FAQ å¯¼è¿›å»ï¼Œçœ‹çœ‹æ£€ç´¢è´¨é‡å¦‚ä½•</li>
<li><strong>åšä¸ªå‰ç«¯ç•Œé¢</strong>ï¼šç”¨ React/Vue åšä¸ªç®€å•çš„èŠå¤©ç•Œé¢ï¼Œæˆ–è€…ç›´æ¥ç”¨ Cloudflare Pages éƒ¨ç½²</li>
<li><strong>æ¢ç´¢æ›´å¤šå¯èƒ½</strong>ï¼šè¯•è¯•å¤šæ¨¡æ€ RAGï¼ˆç»“åˆå›¾ç‰‡ã€è¡¨æ ¼ï¼‰ã€GraphRAGï¼ˆçŸ¥è¯†å›¾è°±å¢å¼ºï¼‰ç­‰é«˜çº§ç©æ³•
RAG æ˜¯å½“å‰ AI åº”ç”¨æœ€å®ç”¨çš„æ¶æ„ä¹‹ä¸€ï¼ŒæŒæ¡å®ƒèƒ½è®©ä½ åšå‡ºå¾ˆå¤šæœ‰æ„æ€çš„ä¸œè¥¿ã€‚è¯•ä¸‹æ¥ï¼ŒCloudflare å…¨å®¶æ¡¶ç¡®å®èƒ½è§£å†³ä¸å°‘å®é™…é—®é¢˜ã€‚
è¦æ˜¯ç¢°åˆ°é—®é¢˜ï¼Œå¯ä»¥å» <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.gg%2Fcloudflaredev" target="_blank" title="https://discord.gg/cloudflaredev" ref="nofollow noopener noreferrer">Cloudflare Discord</a> æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fcommunity.cloudflare.com%2F" target="_blank" title="https://community.cloudflare.com/" ref="nofollow noopener noreferrer">Community è®ºå›</a> é—®ï¼Œç¤¾åŒºæŒºæ´»è·ƒçš„ã€‚</li>
</ol>
<blockquote>
<p>åŸæ–‡é¦–å‘<a href="https://link.juejin.cn?target=https%3A%2F%2Feastondev.com%2Fblog%2Fzh%2Fposts%2Fai%2F20251201-rag-workers-ai-vectorize-tutorial%2F" target="_blank" title="https://eastondev.com/blog/zh/posts/ai/20251201-rag-workers-ai-vectorize-tutorial/" ref="nofollow noopener noreferrer">è‡ªä¸ªäººåšå®¢</a></p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fdf9e0d57b04fbd888fafd9e8cfa101~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5pu05aW96K-0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364860&amp;x-signature=gXPIxO9X9vodOSG7tO1Q7Y0ge4s%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/412c68e4376c4c56857a6285a67dad62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5pu05aW96K-0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364860&amp;x-signature=zwm7sfePfWcoQ4JuvID0ZLnSJms%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ çš„ AI ä¸ºä»€ä¹ˆæ€»ç­”éæ‰€é—®ï¼Ÿç¼ºçš„ä¸æ˜¯æ™ºå•†ï¼Œæ˜¯â€œè®°å¿†ç³»ç»Ÿâ€]]></title>    <link>https://juejin.cn/post/7587995707166244883</link>    <guid>https://juejin.cn/post/7587995707166244883</guid>    <pubDate>2025-12-26T14:58:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587995707166244883" data-draft-id="7587995707166228499" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ çš„ AI ä¸ºä»€ä¹ˆæ€»ç­”éæ‰€é—®ï¼Ÿç¼ºçš„ä¸æ˜¯æ™ºå•†ï¼Œæ˜¯â€œè®°å¿†ç³»ç»Ÿâ€"/> <meta itemprop="keywords" content="LangChain,LLM,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T14:58:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xhxxx"/> <meta itemprop="url" content="https://juejin.cn/user/3235201610941578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ çš„ AI ä¸ºä»€ä¹ˆæ€»ç­”éæ‰€é—®ï¼Ÿç¼ºçš„ä¸æ˜¯æ™ºå•†ï¼Œæ˜¯â€œè®°å¿†ç³»ç»Ÿâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3235201610941578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xhxxx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T14:58:27.000Z" title="Fri Dec 26 2025 14:58:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”¨ LangChain å®ç°æœ‰è®°å¿†çš„å¤šè½®å¯¹è¯ï¼šç»™ AI é…ä¸€ä¸ªâ€œæ•°å­—ç¬”è®°æœ¬â€</h2>
<blockquote>
<p><strong>å¤§æ¨¡å‹åƒä¸€ä½å¥å¿˜çš„å¤©æ‰â€”â€”èªæ˜ä½†è®°ä¸ä½äº‹ã€‚è€Œ LangChainï¼Œå°±æ˜¯å®ƒçš„ä¸“å±ç¬”è®°æœ¬å’Œç§˜ä¹¦ã€‚</strong></p>
</blockquote>
<p>åœ¨æ„å»ºèŠå¤©æœºå™¨äººæ—¶ï¼Œæˆ‘ä»¬å¸¸é‡åˆ°ä¸€ä¸ªå°´å°¬åœºæ™¯ï¼š<br/>
ä½ åˆšå‘Šè¯‰ AI â€œæˆ‘å«ç”°æ™¨æ«â€ï¼Œä¸‹ä¸€ç§’é—®â€œæˆ‘å«ä»€ä¹ˆâ€ï¼Œå®ƒå´ä¸€è„¸èŒ«ç„¶ã€‚</p>
<p>è¿™ä¸æ˜¯å®ƒç¬¨ï¼Œè€Œæ˜¯<strong>å¤§æ¨¡å‹å¤©ç”Ÿâ€œæ— çŠ¶æ€â€</strong> â€”â€”æ¯æ¬¡å¯¹è¯éƒ½åƒç¬¬ä¸€æ¬¡è§é¢ã€‚<br/>
è¦è®©å®ƒè®°ä½ä½ ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—æœºåˆ¶ï¼š<strong>è®°å½•ã€æºå¸¦ã€æ›´æ–°</strong>ä½ çš„å¯¹è¯å†å²ã€‚</p>
<p>LangChain æ­£æ˜¯ä¸ºæ­¤è€Œç”Ÿã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡ä»£ç  + æ¯”å–»ï¼Œä¸€æ­¥æ­¥æ­å»ºè¿™ä¸ªâ€œè®°å¿†ç³»ç»Ÿâ€ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€é—®é¢˜æ¼”ç¤ºï¼šæ²¡æœ‰ç¬”è®°æœ¬çš„â€œå¥å¿˜å¤©æ‰â€</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
    <span class="hljs-attr">model</span>:<span class="hljs-string">'deepseek-chat'</span>,
    <span class="hljs-attr">temperature</span>:<span class="hljs-number">0</span>,
});

<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'æˆ‘å«ç”°æ™¨æ«ï¼Œå–œæ¬¢åƒé¸¡è…¿é¥­'</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">content</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'---------------'</span>);

<span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'æˆ‘å«ä»€ä¹ˆåå­—'</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res2.<span class="hljs-property">content</span>);
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f80e1aa207b34332b1a464ec17176014~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGh4eHg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767365906&amp;x-signature=iezKYo2mXpCK3TVCGN53o5QbAJA%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-2">ğŸ§  å¤§æ¨¡å‹ï¼š<strong>æ²¡æœ‰ç¬”è®°æœ¬çš„æ¼”è®²è€…</strong></h4>
<p>æƒ³è±¡ä¸€ä½æ¼”è®²è€…ç«™åœ¨å°ä¸Šï¼š</p>
<ul>
<li>ç¬¬ä¸€æ¬¡ä¸Šå°è¯´ï¼šâ€œæˆ‘æ˜¯ç”°æ™¨æ«ã€‚â€</li>
<li>ä¸‹å°åï¼Œ<strong>æ²¡äººç»™ä»–å‘è®²ç¨¿</strong>ã€‚</li>
<li>ç¬¬äºŒæ¬¡ä¸Šå°ï¼Œä»–åªèƒ½å‡­ç©ºå›å¿†ï¼šâ€œåˆšæ‰æˆ‘è¯´å•¥äº†ï¼Ÿâ€</li>
</ul>
<p>å¤§æ¨¡å‹å°±æ˜¯è¿™æ ·â€”â€”<strong>æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯å…¨æ–°å¼€å§‹</strong>ï¼Œé™¤éä½ ä¸»åŠ¨æŠŠâ€œè®²ç¨¿â€ï¼ˆå†å²ï¼‰å¡ç»™å®ƒã€‚</p>
<hr/>
<h3 data-id="heading-3">äºŒã€æ‰‹åŠ¨ç»´æŠ¤å†å²ï¼šä½ è‡ªå·±å½“ç§˜ä¹¦</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">let</span> chatHistory = [];

chatHistory.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(<span class="hljs-string">'æˆ‘å«ç”°æ™¨æ«...'</span>));
<span class="hljs-keyword">const</span> aiReply = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(chatHistory);
chatHistory.<span class="hljs-title function_">push</span>(aiReply);

<span class="hljs-comment">// ä¸‹æ¬¡å†è°ƒç”¨æ—¶å¸¦ä¸Šæ•´ä¸ª chatHistory</span>
</code></pre>
<h4 data-id="heading-4">ğŸ“ <strong>ä½ äº²è‡ªå½“ç§˜ä¹¦</strong></h4>
<ul>
<li>ä½ æ‹¿ä¸ªå°æœ¬æœ¬ï¼ˆ<code>chatHistory</code> æ•°ç»„ï¼‰</li>
<li>æ¯æ¬¡ç”¨æˆ·è¯´è¯ï¼Œä½ è®°ä¸‹æ¥</li>
<li>æ¯æ¬¡ AI å›ç­”ï¼Œä½ ä¹Ÿè®°ä¸‹æ¥</li>
<li>ä¸‹æ¬¡æé—®å‰ï¼ŒæŠŠæ•´æœ¬ç¬”è®°é€’ç»™ AI</li>
</ul>
<p>âœ… èƒ½å·¥ä½œï¼Œä½†ï¼š</p>
<ul>
<li>å¤šç”¨æˆ·ï¼Ÿä½ å¾—å‡†å¤‡å¤šä¸ªæœ¬å­ï¼Œå¹¶è´´ä¸Šæ ‡ç­¾ï¼ˆuser_a, user_bâ€¦ï¼‰</li>
<li>èŠ100è½®ï¼Ÿæœ¬å­è¶Šæ¥è¶Šåšï¼ŒAI çœ‹å¾—çœ¼èŠ±ï¼ˆToken çˆ†ç‚¸ï¼‰</li>
</ul>
<p><strong>å¤ªç´¯äº†ï¼æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„ç§˜ä¹¦ã€‚</strong></p>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€LangChain ç™»åœºï¼šç»™ AI é…ä¸€ä¸ªæ™ºèƒ½ç§˜ä¹¦</h3>
<p>LangChain çš„ <code>RunnableWithMessageHistory</code> å°±æ˜¯è¿™ä½ç§˜ä¹¦ã€‚æˆ‘ä»¬æ¥é…ç½®å®ƒï¼š</p>
<h4 data-id="heading-6">æ­¥éª¤ 1ï¼šè®¾è®¡â€œå¯¹è¯æ¨¡æ¿â€â€”â€”è§„å®šæ€ä¹ˆè¯»ç¬”è®°</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>;
<span class="hljs-keyword">import</span>{<span class="hljs-title class_">ChatPromptTemplate</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;
<span class="hljs-comment">// å¸¦ä¸Šå†å²è®°å½•çš„å¯è¿è¡Œå¯¹è±¡</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableWithMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/runnables'</span>;
<span class="hljs-comment">// å†…å­˜ä¸­çš„å¯¹è¯å†å²è®°å½•</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InMemoryChatMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/chat_history'</span>;
<span class="hljs-keyword">import</span><span class="hljs-string">'dotenv/config'</span>;

<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">'system'</span>, <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹'</span>],
  [<span class="hljs-string">'placeholder'</span>, <span class="hljs-string">'{history}'</span>], <span class="hljs-comment">// â† ç§˜ä¹¦åœ¨è¿™é‡Œæ’å…¥ç¬”è®°å†…å®¹</span>
  [<span class="hljs-string">'human'</span>, <span class="hljs-string">'{input}'</span>]
]);
</code></pre>
<blockquote>
<p>ğŸ“– <strong>ä¼šè®®è®®ç¨‹æ¨¡æ¿</strong><br/>
å°±åƒä¸€åœºä¼šè®®çš„å›ºå®šæµç¨‹ï¼š</p>
<ol>
<li>ä¸»æŒäººå¼€åœºï¼ˆsystemï¼‰</li>
<li><strong>å›é¡¾ä¸Šæ¬¡ä¼šè®®çºªè¦</strong>ï¼ˆ{history}ï¼‰</li>
<li>è®¨è®ºæ–°è®®é¢˜ï¼ˆ{input}ï¼‰</li>
</ol>
</blockquote>
<p><code>{history}</code> å°±æ˜¯é¢„ç•™çš„â€œçºªè¦æ’å…¥ä½â€ã€‚</p>
<hr/>
<h4 data-id="heading-7">æ­¥éª¤ 2ï¼šç»„è£…åŸºç¡€å·¥ä½œæµ</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> runnable =prompt
.<span class="hljs-title function_">pipe</span>(<span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span>{ <span class="hljs-comment">//debug èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"&gt;&gt;&gt; æœ€ç»ˆä¼ ç»™æ¨¡å‹çš„ä¿¡æ¯ï¼ˆPrompt å†…å­˜ï¼‰"</span>);
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(input);
     <span class="hljs-keyword">return</span> input;
})
.<span class="hljs-title function_">pipe</span>(model);
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecc354cefe14449a80eb7eed833fef55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGh4eHg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767365906&amp;x-signature=HaJSFhAVnnT%2FLjKRScKDbeLrClw%3D" alt="image.png" loading="lazy"/>
è¿™é‡Œæˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ äº†ä¸€ä¸ªç”¨äºdebugçš„èŠ‚ç‚¹ï¼Œå®é™…ä¸Šå®ƒåªæ˜¯ç”¨æ¥æŸ¥çœ‹æˆ‘ä»¬æœ€ç»ˆä¼ ç»™å¤§æ¨¡å‹çš„æ˜¯ä»€ä¹ˆã€‚<br/>
å®ƒç­‰ä»·äºä¸‹é¢è¿™æ®µä»£ç </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> runnable = prompt.<span class="hljs-title function_">pipe</span>(model);
</code></pre>
<blockquote>
<p>âš™ï¸ <strong>æ ¸å¿ƒå·¥ä½œå°</strong><br/>
è¿™æ˜¯ AI çš„â€œåŠå…¬æ¡Œâ€ï¼š</p>
<ul>
<li>å·¦è¾¹æ”¾è®®ç¨‹æ¨¡æ¿ï¼ˆpromptï¼‰</li>
<li>å³è¾¹è¿ç€å¤§è„‘ï¼ˆmodelï¼‰<br/>
ä½†<strong>è¿˜æ²¡é…ç§˜ä¹¦</strong>ï¼Œæ‰€ä»¥ä¸ä¼šè‡ªåŠ¨å¡«çºªè¦ã€‚</li>
</ul>
</blockquote>
<hr/>
<h4 data-id="heading-8">æ­¥éª¤ 3ï¼šå‡†å¤‡â€œç¬”è®°æœ¬â€â€”â€”å†å²å­˜å‚¨</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> messageHistory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>();
</code></pre>
<blockquote>
<p>ğŸ““ <strong>ä¸€ä¸ªç©ºç™½ç¬”è®°æœ¬</strong><br/>
è¿™æ˜¯ç§˜ä¹¦ç”¨æ¥è®°å¯¹è¯çš„æœ¬å­ã€‚<br/>
ç›®å‰æ˜¯â€œé€šç”¨æœ¬å­â€â€”â€”æ‰€æœ‰ç”¨æˆ·å…±ç”¨ï¼ˆåé¢æˆ‘ä»¬ä¼šå‡çº§ä¸ºæ¯äººä¸€æœ¬ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-9">æ­¥éª¤ 4ï¼šé›‡ä½£â€œæ™ºèƒ½ç§˜ä¹¦â€â€”â€”<code>RunnableWithMessageHistory</code></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> chain = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RunnableWithMessageHistory</span>({
  runnable,                  <span class="hljs-comment">// â† æŠŠåŠå…¬æ¡Œäº¤ç»™ç§˜ä¹¦</span>
  <span class="hljs-attr">getMessageHistory</span>: <span class="hljs-keyword">async</span> () =&gt; messageHistory, <span class="hljs-comment">// â† å‘Šè¯‰ç§˜ä¹¦å»å“ªæ‹¿ç¬”è®°æœ¬</span>
  <span class="hljs-attr">inputMessagesKey</span>: <span class="hljs-string">'input'</span>,     <span class="hljs-comment">// â† ç”¨æˆ·å½“å‰è¯´çš„è¯å« "input"</span>
  <span class="hljs-attr">historyMessagesKey</span>: <span class="hljs-string">'history'</span>  <span class="hljs-comment">// â† ç¬”è®°å†…å®¹æ³¨å…¥åˆ°æ¨¡æ¿çš„ "history" ä½ç½®</span>
});
</code></pre>
<blockquote>
<p>ğŸ‘¨â€ğŸ’¼ <strong>æ­£å¼è˜ç”¨ç§˜ä¹¦</strong><br/>
ä½ å¯¹ç§˜ä¹¦è¯´ï¼š</p>
<ul>
<li>â€œè¿™æ˜¯ä½ çš„å·¥ä½œå°ï¼ˆrunnableï¼‰â€</li>
<li>â€œç¬”è®°æœ¬åœ¨è¿™å„¿ï¼ˆmessageHistoryï¼‰â€</li>
<li>â€œç”¨æˆ·å½“å‰é—®é¢˜å« <code>input</code>ï¼Œä¸Šæ¬¡çš„ç¬”è®°å« <code>history</code>ï¼ŒæŒ‰æ¨¡æ¿å¡«å¥½å°±è¡Œâ€</li>
</ul>
</blockquote>
<p>è¿™é‡Œå°±æ˜¯å¯¹runableè¿›è¡Œäº†é‡æ–°åŒ…è£…:</p>
<ul>
<li><strong>getMessageHistoryå‘Šè¯‰å®ƒåº”è¯¥è°ƒç”¨å“ªä¸ªå†å²å¯¹è¯(æ¯æ®µå¯¹è¯ä¼šæœ‰å¯¹è¯idï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†åŒä¸€ä¸ªå†å²å¯¹è¯)</strong></li>
<li><strong>inputMessagesKeyç”¨æ¥è®°å½•å½“å‰ç”¨æˆ·è¯´çš„è¯</strong></li>
<li><strong>historyMessagesKey å°†å†å²å¯¹è¯æ’å…¥åˆ°å¯¹åº”ä½ç½®</strong>
å¯¹äºæˆ‘ä»¬è®¾å®šçš„æ¨¡æ¿ä½ å°±ç†è§£äº†:</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">'system'</span>, <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹'</span>],
  [<span class="hljs-string">'placeholder'</span>, <span class="hljs-string">'{history}'</span>], <span class="hljs-comment">// â† æ’å…¥çš„å†å²å¯¹è¯</span>
  [<span class="hljs-string">'human'</span>, <span class="hljs-string">'{input}'</span>]<span class="hljs-comment">//&lt;- ç”¨æˆ·è¾“å…¥</span>
]);
</code></pre>
<p>è€Œå½“æˆ‘ä»¬åå¤æé—®æ—¶å°±ä¼šå˜æˆè¿™æ ·</p>
<pre><code class="hljs language-js" lang="js">[
  <span class="hljs-title class_">SystemMessage</span>(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span>),
  <span class="hljs-comment">//å¯¹åº”çš„å†å²å¯¹è¯æ’å…¥</span>
  <span class="hljs-title class_">HumanMessage</span>(<span class="hljs-string">"æˆ‘å«ç”°æ™¨æ«ï¼Œå–œæ¬¢åƒé¸¡è…¿é¥­"</span>),
  <span class="hljs-title class_">AIMessage</span>(<span class="hljs-string">"å¥½çš„ï¼Œç”°æ™¨æ«ï¼..."</span>),
  <span class="hljs-comment">//ç”¨æˆ·çš„æé—®</span>
  <span class="hljs-title class_">HumanMessage</span>(<span class="hljs-string">"æˆ‘å«ä»€ä¹ˆåå­—"</span>)
]
</code></pre>
<p>ä»æ­¤ï¼Œ<strong>ä½ åªéœ€è¯´â€œé—® AI ä¸€ä¸ªé—®é¢˜â€</strong> ï¼Œç§˜ä¹¦ä¼šè‡ªåŠ¨ï¼š</p>
<ol>
<li>æ‰“å¼€ç¬”è®°æœ¬ï¼Œè¯»å–å†å²</li>
<li>æŒ‰æ¨¡æ¿æ•´ç†æˆå®Œæ•´è®®ç¨‹</li>
<li>äº¤ç»™ AI å¤„ç†</li>
<li>æŠŠæ–°å¯¹è¯è®°å›ç¬”è®°æœ¬</li>
</ol>
<hr/>
<h4 data-id="heading-10">æ­¥éª¤ 5ï¼šä½¿ç”¨â€”â€”ä½ åªéœ€æé—®é¢˜ï¼</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«ç”°æ™¨æ«...'</span> });
<span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ'</span> }); <span class="hljs-comment">// âœ… æ­£ç¡®å›ç­”ï¼</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b53778bce3442109ee9dba52b604b42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGh4eHg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767365906&amp;x-signature=lq%2FZ4Y2HoYM7DyuWCAy72q0TFS0%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>ğŸ’¬è€æ¿åªç®¡ä¸‹æŒ‡ä»¤**<br/>
ä½ ä½œä¸ºè€æ¿ï¼Œåªéœ€è¯´ï¼šâ€œå¸®æˆ‘é—® AI æˆ‘å«ä»€ä¹ˆï¼Ÿâ€<br/>
ç§˜ä¹¦é»˜é»˜å®Œæˆæ‰€æœ‰å¹•åå·¥ä½œï¼Œä½ ç”šè‡³ä¸ç”¨çŸ¥é“ç¬”è®°æœ¬çš„å­˜åœ¨ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-11">å››ã€å‡çº§ï¼šç»™æ¯ä½ç”¨æˆ·é…ä¸“å±ç¬”è®°æœ¬ï¼ˆå¤šä¼šè¯æ”¯æŒï¼‰</h3>
<p>ä¹‹å‰çš„ç¬”è®°æœ¬æ˜¯å…¬ç”¨çš„ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬è®©ç§˜ä¹¦ç®¡ç†<strong>å¤šä¸ªå¸¦æ ‡ç­¾çš„ç¬”è®°æœ¬</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> sessionStore = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// â† ä¸€ä¸ªæ–‡ä»¶æŸœï¼Œæ¯ä¸ªæŠ½å±‰è´´äº†æ ‡ç­¾</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getMessageHistory</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">sessionId</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!sessionStore.<span class="hljs-title function_">has</span>(sessionId)) {
    <span class="hljs-comment">// å¦‚æœæ²¡è¿™ä¸ªç”¨æˆ·çš„ç¬”è®°æœ¬ï¼Œå°±æ–°å»ºä¸€æœ¬</span>
    sessionStore.<span class="hljs-title function_">set</span>(sessionId, <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>());
  }
  <span class="hljs-keyword">return</span> sessionStore.<span class="hljs-title function_">get</span>(sessionId); <span class="hljs-comment">// â† è¿”å›å¯¹åº”ç¬”è®°æœ¬</span>
};

<span class="hljs-comment">// è°ƒç”¨æ—¶æŒ‡å®šç”¨æˆ· ID</span>
<span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(
  { <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«å¼ ä¸‰'</span> },
  { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'user_zhang'</span> } } <span class="hljs-comment">// â† â€œè¯·ç”¨å¼ ä¸‰çš„ç¬”è®°æœ¬ï¼â€</span>
);
</code></pre>
<blockquote>
<p>ğŸ—‚ï¸ <strong>å¸¦æ ‡ç­¾çš„æ–‡ä»¶æŸœ</strong></p>
<ul>
<li>æ–‡ä»¶æŸœï¼ˆ<code>sessionStore</code>ï¼‰é‡Œæœ‰å¾ˆå¤šæŠ½å±‰</li>
<li>æ¯ä¸ªæŠ½å±‰è´´ç€ç”¨æˆ· ID æ ‡ç­¾ï¼ˆ<code>sessionId</code>ï¼‰</li>
<li>ç§˜ä¹¦æ ¹æ®ä½ æä¾›çš„æ ‡ç­¾ï¼Œå–å‡ºå¯¹åº”çš„ç¬”è®°æœ¬</li>
<li>å¼ ä¸‰å’Œæå››çš„å¯¹è¯å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å¹²æ‰°</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-12">äº”ã€é˜²æ­¢ç¬”è®°æœ¬å¤ªåšï¼šè‡ªåŠ¨æ¸…ç†æ—§è®°å½•</h3>
<p>èŠå¾—è¶Šå¤šï¼Œç¬”è®°æœ¬è¶Šåšã€‚é•¿æœŸä¸‹å»ï¼š</p>
<ul>
<li>AI é˜…è¯»å›°éš¾ï¼ˆä¸Šä¸‹æ–‡å¤ªé•¿ï¼‰</li>
<li>æˆæœ¬é£™å‡ï¼ˆToken æŒ‰å­—æ•°è®¡è´¹ï¼‰</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆï¼š<strong>è®©ç§˜ä¹¦å®šæœŸæ¸…ç†æ—§é¡µ</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_MESSAGES</span> = <span class="hljs-number">6</span>; <span class="hljs-comment">// åªä¿ç•™æœ€è¿‘ 3 è½®å¯¹è¯ï¼ˆ6 æ¡æ¶ˆæ¯ï¼‰</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getMessageHistory</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">sessionId</span>) =&gt; {
  <span class="hljs-keyword">let</span> history = sessionStore.<span class="hljs-title function_">get</span>(sessionId) || <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>();
  
  <span class="hljs-keyword">const</span> messages = <span class="hljs-keyword">await</span> history.<span class="hljs-title function_">getMessages</span>();
  <span class="hljs-keyword">if</span> (messages.<span class="hljs-property">length</span> &gt; <span class="hljs-variable constant_">MAX_MESSAGES</span>) {
    <span class="hljs-comment">// æ¸…ç©ºç¬”è®°æœ¬ï¼ŒåªæŠ„å†™æœ€åå‡ é¡µ</span>
    <span class="hljs-keyword">await</span> history.<span class="hljs-title function_">clear</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> msg <span class="hljs-keyword">of</span> messages.<span class="hljs-title function_">slice</span>(-<span class="hljs-variable constant_">MAX_MESSAGES</span>)) {
      <span class="hljs-keyword">await</span> history.<span class="hljs-title function_">addMessage</span>(msg);
    }
  }
  
  sessionStore.<span class="hljs-title function_">set</span>(sessionId, history);
  <span class="hljs-keyword">return</span> history;
};
</code></pre>
<blockquote>
<p>âœ‚ï¸ <strong>ç§˜ä¹¦çš„â€œç²¾ç®€ç¬”è®°â€ä¹ æƒ¯</strong><br/>
ç§˜ä¹¦æœ‰ä¸ªè§„çŸ©ï¼š</p>
<ul>
<li>ç¬”è®°æœ¬è¶…è¿‡ 6 é¡µï¼Œå°±æ’•æ‰å‰é¢çš„</li>
<li>åªä¿ç•™æœ€è¿‘ 3 è½®å¯¹è¯ï¼ˆè¶³å¤Ÿç†è§£ä¸Šä¸‹æ–‡ï¼‰</li>
<li>æ—¢èŠ‚çœç©ºé—´ï¼Œåˆä¸å½±å“å·¥ä½œ</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-13">å…­ã€æ€»ç»“ï¼šLangChain çš„è®°å¿†ç³»ç»Ÿå…¨æ™¯å›¾</h3>








































<table><thead><tr><th>ç»„ä»¶</th><th>æ¯”å–»</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>ChatPromptTemplate</code></td><td>ä¼šè®®è®®ç¨‹æ¨¡æ¿</td><td>è§„å®šå¦‚ä½•ç»„ç»‡ä¸Šä¸‹æ–‡</td></tr><tr><td><code>{history}</code>Â å ä½ç¬¦</td><td>â€œä¸Šæ¬¡ä¼šè®®çºªè¦â€ä½ç½®</td><td>å†å²æ¶ˆæ¯æ’å…¥ç‚¹</td></tr><tr><td><code>InMemoryChatMessageHistory</code></td><td>ç¬”è®°æœ¬</td><td>å­˜å‚¨å¯¹è¯è®°å½•</td></tr><tr><td><code>getMessageHistory</code></td><td>æ–‡ä»¶æŸœç®¡ç†å‘˜</td><td>æ ¹æ®ç”¨æˆ· ID åˆ†å‘ç¬”è®°æœ¬</td></tr><tr><td><code>RunnableWithMessageHistory</code></td><td>æ™ºèƒ½ç§˜ä¹¦</td><td>è‡ªåŠ¨è¯»å†™ç¬”è®°ã€ç»„è£…è¯·æ±‚</td></tr><tr><td><code>sessionId</code></td><td>ç”¨æˆ·æ ‡ç­¾</td><td>åŒºåˆ†ä¸åŒç”¨æˆ·çš„ç¬”è®°æœ¬</td></tr></tbody></table>
<hr/>
<p>å¤§æ¨¡å‹æœ¬èº«æ²¡æœ‰è®°å¿†ï¼Œå°±åƒä¸€ä½æ‰åæ¨ªæº¢å´å¥å¿˜çš„æ¼”è®²è€…â€”â€”æ¯æ¬¡ç™»å°éƒ½åƒåˆæ¬¡è§é¢ã€‚<br/>
è€Œ LangChain å¹¶æ²¡æœ‰æ”¹å˜æ¨¡å‹çš„æœ¬è´¨ï¼Œè€Œæ˜¯<strong>åœ¨å®ƒèº«è¾¹æ­å»ºäº†ä¸€å¥—å®Œæ•´çš„è®°å¿†æ”¯æŒç³»ç»Ÿ</strong>ï¼š</p>
<ul>
<li><strong>ç”¨æ¨¡æ¿å®šä¹‰è®°å¿†æ ¼å¼</strong>ï¼ˆPromptï¼‰</li>
<li><strong>ç”¨å­˜å‚¨æ‰¿è½½è®°å¿†å†…å®¹</strong>ï¼ˆMessageHistoryï¼‰</li>
<li><strong>ç”¨ä¼šè¯æœºåˆ¶éš”ç¦»è®°å¿†è¾¹ç•Œ</strong>ï¼ˆsessionIdï¼‰</li>
<li><strong>ç”¨è‡ªåŠ¨åŒ…è£…å®ç°è®°å¿†æµè½¬</strong>ï¼ˆRunnableWithMessageHistoryï¼‰</li>
</ul>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™å¥—ç³»ç»Ÿæ˜¯<strong>å¯æ’æ‹”ã€å¯æ‰©å±•ã€å¯æ§åˆ¶çš„</strong>ï¼š<br/>
ä½ å¯ä»¥è½»æ¾æ›¿æ¢å†…å­˜å­˜å‚¨ä¸º Redisï¼Œå¯ä»¥åŠ å…¥è‡ªåŠ¨æ‘˜è¦å‹ç¼©é•¿å¯¹è¯ï¼Œä¹Ÿå¯ä»¥è®¾å®šæœ€å¤§è½®æ•°é˜²æ­¢ Token è†¨èƒ€ã€‚</p>
<blockquote>
<p><strong>çœŸæ­£çš„â€œAI è®°å¿†â€ï¼Œä»æ¥ä¸æ˜¯æ¨¡å‹è‡ªå·±è®°ä½ä»€ä¹ˆï¼Œè€Œæ˜¯æˆ‘ä»¬ä¸ºå®ƒæ„å»ºäº†ä¸€ä¸ªæ°åˆ°å¥½å¤„çš„è®°å¿†ç¯å¢ƒã€‚</strong><br/>
LangChain æä¾›çš„ï¼Œæ­£æ˜¯è¿™æ ·ä¸€å¥—è®©è®°å¿†å˜å¾—ç®€å•ã€å¯é åˆé«˜æ•ˆçš„å·¥ç¨‹åŒ–æ–¹æ¡ˆã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Doris Catalog å·²ä¸Šçº¿ï¼æ€§èƒ½æå‡ 200xï¼Œå…¨é¢ä¼˜äº JDBC Catalogï¼Œè·¨é›†ç¾¤æŸ¥è¯¢è¿ˆå…¥é«˜æ€§èƒ½åˆ†ææ—¶ä»£]]></title>    <link>https://juejin.cn/post/7587995707165982739</link>    <guid>https://juejin.cn/post/7587995707165982739</guid>    <pubDate>2025-12-26T13:05:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587995707165982739" data-draft-id="7588007285546156038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Doris Catalog å·²ä¸Šçº¿ï¼æ€§èƒ½æå‡ 200xï¼Œå…¨é¢ä¼˜äº JDBC Catalogï¼Œè·¨é›†ç¾¤æŸ¥è¯¢è¿ˆå…¥é«˜æ€§èƒ½åˆ†ææ—¶ä»£"/> <meta itemprop="keywords" content="æ•°æ®åº“,Apache,æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2025-12-26T13:05:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Doris Catalog å·²ä¸Šçº¿ï¼æ€§èƒ½æå‡ 200xï¼Œå…¨é¢ä¼˜äº JDBC Catalogï¼Œè·¨é›†ç¾¤æŸ¥è¯¢è¿ˆå…¥é«˜æ€§èƒ½åˆ†ææ—¶ä»£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T13:05:43.000Z" title="Fri Dec 26 2025 13:05:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>â€œç»Ÿä¸€â€æ˜¯ Apache Doris é•¿æœŸä»¥æ¥ç§‰æŒçš„è®¾è®¡ç†å¿µä¹‹ä¸€</strong>ã€‚åœ¨è¿™ä¸€ç†å¿µæŒ‡å¼•ä¸‹ï¼Œæ„å»ºå®Œå–„çš„ Catalog ç”Ÿæ€æ˜¯å®ç°å¼‚æ„æ•°æ®æºç»Ÿä¸€æŸ¥è¯¢åˆ†æçš„å…³é”®ã€‚ç›®å‰ï¼ŒDoris å·²æ”¯æŒ Icebergã€Paimonã€Hudi ç­‰æ•°æ®æ¹– Catalogï¼Œä»¥åŠ JDBC Catalogï¼Œç”¨æˆ·æ— éœ€è¿ç§»æ•°æ®ï¼Œå³å¯å¯¹ä¸åŒæ•°æ®æ¹–å’Œä¼ ç»Ÿæ•°æ®åº“è¿›è¡Œè”é‚¦æŸ¥è¯¢åˆ†æã€‚</p>
<p><strong>æœ¬æ–‡èšç„¦ Doris å¤šé›†ç¾¤é—´çš„æŸ¥è¯¢åˆ†æ</strong>ã€‚å®ç°è·¨ Doris é›†ç¾¤çš„åˆ†æé€šæŸ¥éœ€è¦é€šè¿‡ JDBC Catalogï¼Œä½†è¯¥æ–¹å¼å­˜åœ¨æ˜æ˜¾çŸ­æ¿ï¼Œæ¯”å¦‚åè®®å¼€é”€è¾ƒå¤§ã€æ— æ³•å¤ç”¨ Doris æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥ã€æŸ¥è¯¢æ€§èƒ½å—é™ç­‰ç­‰ã€‚åŒæ—¶ï¼Œéšç€ç”Ÿäº§ç¯å¢ƒä¸­å¤š Doris é›†ç¾¤éƒ¨ç½²æ„ˆåŠ æ™®éï¼Œè·¨é›†ç¾¤çš„æ•°æ®è”åŠ¨åˆ†æéœ€æ±‚ä¹Ÿæ—¥ç›Šå¢é•¿ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒJDBC Catalog å¾ˆéš¾æ»¡è¶³ç”¨æˆ·çš„æ€§èƒ½è¦æ±‚ã€‚</p>
<p>ä¸ºæ­¤ï¼Œ<strong>Apache Doris 4.0.2 ç‰ˆæœ¬æ¨å‡ºé‡ç£…ç‰¹æ€§ï¼šDoris Catalogã€‚è¯¥åŠŸèƒ½ä¸“ä¸ºè·¨ Doris é›†ç¾¤è”é‚¦åˆ†æè®¾è®¡ï¼Œæ”¯æŒé€šè¿‡ Arrow Flight å’Œè™šæ‹Ÿé›†ç¾¤ä¸¤ç§æ¨¡å¼ï¼Œè¿›è¡Œæ›´é«˜æ•ˆã€æ›´è´´åˆåŸç”Ÿä¼˜åŒ–çš„è·¨é›†ç¾¤æŸ¥è¯¢</strong>ã€‚</p>
<blockquote>
<p>ç‰¹æ­¤è¯´æ˜ï¼šDoris Catalog å½“å‰ä¸ºå®éªŒæ€§ç‰¹ï¼Œæ¬¢è¿å¤§å®¶ä½“éªŒå¹¶åé¦ˆï¼Œæˆ‘ä»¬å°†æŒç»­ä¼˜åŒ–</p>
</blockquote>
<h2 data-id="heading-0">Doris Catalog vs. JDBC Catalog</h2>
<p>JDBC Catalog ä¸»è¦å€ŸåŠ© MySQL å…¼å®¹çš„ JDBC åè®®è®¿é—®å…¶ä»– Doris é›†ç¾¤æ•°æ®ã€‚ç”±å‰æ–‡å¯çŸ¥ï¼Œè¯¥æ–¹å¼åœ¨è·¨é›†ç¾¤å¤§æ•°æ®é‡äº¤äº’æ—¶æ€§èƒ½å—é™ï¼Œéš¾ä»¥æ»¡è¶³è”é‚¦åˆ†æé«˜ååä¸ä½å»¶è¿Ÿçš„æ€§èƒ½è¦æ±‚ã€‚ä¸åŒäº JDBC Catalog çš„äº¤äº’æ–¹å¼ï¼Œ Doris Catalog é€šè¿‡ Arrow Flight æˆ–è™šæ‹Ÿé›†ç¾¤è¿™ä¸¤ç§æ–¹å¼ï¼Œèƒ½å¤Ÿç›´æ¥ã€é«˜æ•ˆçš„è®¿é—®å…¶ä»– Doris é›†ç¾¤ï¼Œè¿›è¡Œå¤šé›†ç¾¤è”é‚¦åˆ†æã€‚</p>
<h3 data-id="heading-1">01 åŠŸèƒ½å¯¹æ¯”</h3>
<p>é‚£ä¹ˆï¼Œä¸ JDBC Catalog ç›¸æ¯”ï¼ŒDoris Catalog åˆ°åº•å…·å¤‡å“ªäº›èƒ½åŠ›ä¼˜åŠ¿å‘¢ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c18adcc97471440bbf5e541102ba0f64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=MUtZPR6%2BDE%2B%2BnROIZzX5ZP5A62U%3D" alt="01 åŠŸèƒ½å¯¹æ¯”.png" loading="lazy"/></p>
<h3 data-id="heading-2">02 æ€§èƒ½å¯¹æ¯”</h3>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°å±•ç¤ºäºŒè€…åœ¨å®é™…æŸ¥è¯¢ä¸­çš„è¡¨ç°ï¼Œæˆ‘ä»¬åŸºäºè·¨é›†ç¾¤çš„ TPC-DS æŸ¥è¯¢åœºæ™¯ï¼Œå¯¹æ¯”äº† Doris Catalogï¼ˆä¸¤ç§è¿æ¥æ¨¡å¼ï¼‰ ä¸ JDBC Catalog çš„æ‰§è¡Œæ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯æµ‹è¯•ç»“æœæ¦‚è¦ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1972ee200b84c7580940520744884fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=d97A7mv6uDWVmW5qkoZSQZkxPZw%3D" alt="02 æ€§èƒ½å¯¹æ¯”.png" loading="lazy"/></p>
<p>ç»“æœæ˜¾ç¤ºï¼Œåœ¨æ¶‰åŠèšåˆã€Join ç­‰å¤æ‚æŸ¥è¯¢åœºæ™¯ä¸‹ï¼ŒDoris Catalog ç›¸æ¯” JDBC Catalog å±•ç°å‡ºä¸åŒç¨‹åº¦çš„æ€§èƒ½ä¼˜åŠ¿ã€‚å…¶ä¸­ï¼Œåœ¨å•è¡¨èšåˆæŸ¥è¯¢åœºæ™¯ä¸‹ä¼˜åŠ¿å°¤ä¸ºçªå‡ºï¼š<strong>Doris Catalogï¼ˆè™šæ‹Ÿé›†ç¾¤ï¼‰çš„æŸ¥è¯¢è€—æ—¶ä»…ä¸º 0.21 ç§’ï¼Œç›¸è¾ƒäº JDBC Catalogï¼Œé€Ÿåº¦æå‡è¶…è¿‡ 200 å€</strong>ã€‚</p>
<p><strong>å…·ä½“æµ‹è¯•å¦‚ä¸‹</strong>ï¼š</p>
<ol>
<li><strong>åœ¨å•è¡¨ç®€å•æŸ¥è¯¢ï¼ˆç›´æ¥æŸ¥è¯¢è¿œç«¯é›†ç¾¤ï¼‰æ¨¡å¼ä¸‹</strong>ï¼šDoris Catalog ä¸ JDBC Catalog åŸºæœ¬æŒå¹³ã€‚</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span>
    ss_sold_date_sk,
    ss_store_sk,
    ss_item_sk,
    ss_ticket_number,
    ss_quantity,
    ss_sales_price,
    ss_ext_sales_price,
    ss_net_profit
<span class="hljs-keyword">FROM</span> jdbc_mode.tpcds100.store_sales
<span class="hljs-keyword">WHERE</span> ss_sold_date_sk <span class="hljs-operator">=</span> <span class="hljs-number">2450816</span>
  <span class="hljs-keyword">AND</span> ss_store_sk <span class="hljs-operator">=</span> <span class="hljs-number">10</span>
  <span class="hljs-keyword">AND</span> ss_quantity <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">3</span>
LIMIT <span class="hljs-number">100</span>;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b3c9aa2e3774661b9df4ab411b46748~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=M3JT4s0hKi4EBzO0VTkhGq8HzHI%3D" alt="02 æ€§èƒ½å¯¹æ¯”-1.png" loading="lazy"/></p>
<ol>
<li><strong>åœ¨å•è¡¨èšåˆæŸ¥è¯¢ï¼ˆç›´æ¥æŸ¥è¯¢è¿œç«¯é›†ç¾¤ï¼‰æ¨¡å¼ä¸‹</strong>ï¼šDoris Catalog ä¸¤ç§æ¨¡å¼å‡ä¼˜äº JDBC Catalogï¼ŒDoris Catalogï¼ˆè™šæ‹Ÿé›†ç¾¤ï¼‰çš„æŸ¥è¯¢è€—æ—¶ä»…ä¸º 0.21 ç§’ï¼Œç›¸è¾ƒäº JDBC Catalogï¼Œ<strong>é€Ÿåº¦æå‡è¶…è¿‡ 200 å€</strong>ã€‚</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span>
    ss_sold_date_sk,
    ss_store_sk,
    <span class="hljs-built_in">SUM</span>(ss_ext_sales_price) <span class="hljs-keyword">AS</span> total_sales,
    <span class="hljs-built_in">SUM</span>(ss_net_profit)      <span class="hljs-keyword">AS</span> total_profit,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>)                <span class="hljs-keyword">AS</span> txn_cnt
<span class="hljs-keyword">FROM</span> tpcds100.store_sales
<span class="hljs-keyword">WHERE</span> ss_sold_date_sk <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">2450816</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">2451179</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span>
    ss_sold_date_sk,
    ss_store_sk
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span>
    ss_sold_date_sk,
    ss_store_sk
LIMIT <span class="hljs-number">100</span>;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6205b5f642dc466aae9dfc60356bbf21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=zQb2Byi1qyWdAGeWd7jHr6pRGnM%3D" alt="02 æ€§èƒ½å¯¹æ¯”-2.png" loading="lazy"/></p>
<ol>
<li><strong>åœ¨å¤šè¡¨å…³è”æŸ¥è¯¢ï¼ˆä¸¤ä¸ªå¤§è¡¨åˆ†åˆ«å­˜å‚¨åœ¨æœ¬åœ°å’Œè¿œç«¯é›†ç¾¤ï¼Œè¿›è¡Œå…³è”æŸ¥è¯¢ï¼‰æ¨¡å¼ä¸‹</strong>ï¼šDoris Catalog ä¸¤ç§æ¨¡å¼å‡ä¼˜äº JDBC Catalogï¼Œç›¸è¾ƒäº JDBC Catalogï¼Œ<strong>é€Ÿåº¦æå‡çº¦ 42%</strong>ã€‚</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">count</span>(ss_item_sk), <span class="hljs-built_in">count</span>(store_sales_amt), <span class="hljs-built_in">count</span>(catalog_sales_amt) <span class="hljs-keyword">FROM</span>
(
<span class="hljs-keyword">SELECT</span>
    ss.ss_item_sk <span class="hljs-keyword">as</span> ss_item_sk,
    <span class="hljs-built_in">SUM</span>(ss.ss_ext_sales_price) <span class="hljs-keyword">AS</span> store_sales_amt,
    <span class="hljs-built_in">SUM</span>(cs.cs_ext_sales_price) <span class="hljs-keyword">AS</span> catalog_sales_amt
<span class="hljs-keyword">FROM</span> internal.tpcds100.store_sales ss
<span class="hljs-keyword">JOIN</span> external.tpcds100.catalog_sales cs
    <span class="hljs-keyword">ON</span> ss.ss_item_sk <span class="hljs-operator">=</span> cs.cs_item_sk
<span class="hljs-keyword">WHERE</span> ss.ss_sold_date_sk <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">2450815</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">2451079</span>
  <span class="hljs-keyword">AND</span> cs.cs_sold_date_sk <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">2450815</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">2451079</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> ss.ss_item_sk) x;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35582afa7da54ecfa4f7d0d432e60b0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=slX%2FDCDFyLUOiGJw9JnMOFaGTrw%3D" alt="02 æ€§èƒ½å¯¹æ¯”-3.png" loading="lazy"/></p>
<h3 data-id="heading-3">03 æ–¹æ¡ˆé€‰æ‹©</h3>
<p>ç”±ä¸Šå¯çŸ¥ï¼Œä¸åŒçš„æŸ¥è¯¢åœºæ™¯ä¸­ï¼Œéœ€è¦é€‰æ‹©é€‚åˆçš„çš„è®¿é—®æ¨¡å¼ï¼Œä»¥è·å–æœ€ä½³çš„æŸ¥è¯¢æ€§èƒ½ï¼š</p>
<ul>
<li>å¯¹äºå¤æ‚ Join/Agg æŸ¥è¯¢æˆ–ä¾èµ– Doris å†…è¡¨ä¼˜åŒ–ç‰¹æ€§æ—¶ï¼Œä¼˜å…ˆé€‰æ‹© Doris Catalog <strong>è™šæ‹Ÿé›†ç¾¤æ¨¡å¼</strong>ã€‚</li>
<li>å¯¹äºç®€å•å•è¡¨æŸ¥è¯¢ã€UNION æŸ¥è¯¢ã€è¿œç«¯é›†ç¾¤è§„æ¨¡å¤§ä¸”æ— éœ€å¤æ‚ Join ä¼˜åŒ–æˆ– Doris é›†ç¾¤ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œä¼˜å…ˆé€‰æ‹© Doris Catalog  <strong>Arrow Flight æ¨¡å¼</strong>ã€‚</li>
</ul>
<h2 data-id="heading-4">Doris Catalog æ ¸å¿ƒè®¾è®¡</h2>
<p><strong>Doris Catalog æœ¬è´¨æ˜¯è·¨é›†ç¾¤è®¿é—®çš„â€œä¸­é—´ä»£ç†â€ï¼Œæ ¸å¿ƒèŒè´£åŒ…æ‹¬</strong>ï¼š</p>
<ul>
<li>å…ƒæ•°æ®åŒæ­¥ï¼šé€šè¿‡ HTTP åè®®ä»è¿œç«¯ Doris é›†ç¾¤ FE æ‹‰å–è¡¨ç»“æ„ã€åˆ†åŒºã€å‰¯æœ¬ã€ Tablet ä½ç½®ç­‰å…ƒæ•°æ®ï¼›</li>
<li>æ‰§è¡Œè®¡åˆ’ç”Ÿæˆï¼šæ ¹æ®è®¿é—®æ¨¡å¼ï¼Œå°†ç”¨æˆ·æŸ¥è¯¢è½¬æ¢ä¸ºé€‚é…è¿œç«¯é›†ç¾¤çš„æ‰§è¡Œè®¡åˆ’ï¼›</li>
<li>æ•°æ®è·¯ç”±ä¸ä¼ è¾“ï¼šåè°ƒæœ¬åœ° BE ä¸è¿œç«¯ BE è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œæ”¯æŒå¹¶è¡Œæ‹‰å–ä¸åˆ†ç‰‡å¤„ç†ï¼›</li>
<li>ç»“æœèšåˆï¼šå°†è¿œç«¯è¿”å›çš„æ•°æ®èšåˆåï¼Œè¿”å›ç»™ç”¨æˆ·æˆ–ä¸Šå±‚åº”ç”¨ã€‚</li>
</ul>
<p><strong>Doris Catalog æ”¯æŒ Arrow Flight å’Œ è™šæ‹Ÿé›†ç¾¤ä¸¤ç§è®¿é—®æ¨¡å¼ã€‚åœ¨äº†è§£å…·ä½“å®ç°ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«</strong>ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d8cd0a87f1740cf81bc6ae8e61337b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=PK%2FtLLmgPmYUsTnu4ss7LLAS104%3D" alt=" Doris Catalog æ ¸å¿ƒè®¾è®¡.png" loading="lazy"/></p>
<h3 data-id="heading-5">01 Arrow Flight æ¨¡å¼</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fb7e021c0fb418f994707bf90820aa8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=NhqrakrTkJRwbZEV7L7Jez2KAEQ%3D" alt="01 Arrow Flight æ¨¡å¼.png" loading="lazy"/></p>
<p>è¯¥æ¨¡å¼çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼ˆå‡è®¾æœ¬åœ°é›†ç¾¤ä¸º ClusterAï¼Œè¿œç«¯é›†ç¾¤ä¸º ClusterBï¼‰ï¼š</p>
<ul>
<li>æŸ¥è¯¢è§„åˆ’ï¼šClusterA çš„ FE èŠ‚ç‚¹å…ˆè¿›è¡Œå®Œæ•´çš„æŸ¥è¯¢è§„åˆ’ï¼Œé’ˆå¯¹å­˜å‚¨åœ¨ ClusterB ä¸­çš„è¡¨ï¼Œç”Ÿæˆ <code>RemoteDorisScanNode</code>èŠ‚ç‚¹ã€‚<code>RemoteDorisScanNode</code> ä¼šç”Ÿæˆä¸€æ¡åº”ç”¨è°“è¯ä¸‹æ¨è§„åˆ™åçš„å•è¡¨æŸ¥è¯¢ SQLï¼Œé€šè¿‡ HTTP åè®®å‘ ClusterB çš„ FE èŠ‚ç‚¹å‘é€å¹¶æ‰§è¡Œè¿™æ¡ Arrow Flight SQLã€‚</li>
<li>æŸ¥è¯¢è®¡åˆ’æ‰§è¡Œï¼šClusterA çš„ FE èŠ‚ç‚¹å°†ç‰©ç†æ‰§è¡Œè®¡åˆ’å‘é€ç»™ ClusterA çš„ BE èŠ‚ç‚¹ï¼Œå¹¶å‘ŠçŸ¥ BE èŠ‚ç‚¹ Arrow Flight çš„æ•°æ®æµè·å–ä½ç½®ã€‚</li>
<li>æ•°æ®æŸ¥è¯¢ä¸ä¼ è¾“ï¼šClusterA çš„ BE èŠ‚ç‚¹çš„ Scan Node é€šè¿‡ Arrow Flight åè®®ç›´æ¥ä» ClusterB çš„ BE èŠ‚ç‚¹è·å– Arrow Flight SQL çš„æ‰§è¡Œç»“æœã€‚ç„¶ååœ¨ ClusterA ä¸­æ‰§è¡Œ Joinã€Agg ç­‰å…¶ä»–ç®—å­ï¼Œå¹¶è¿”å›æœ€ç»ˆç»“æœã€‚</li>
</ul>
<h3 data-id="heading-6">02 è™šæ‹Ÿé›†ç¾¤æ¨¡å¼</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc8573df4de34f2fa7cb12a2240bc248~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=%2FynLrnht%2Fh3gGdBt%2FeiW5wQGBss%3D" alt="02 è™šæ‹Ÿé›†ç¾¤æ¨¡å¼.png" loading="lazy"/></p>
<p>è¯¥æ¨¡å¼çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼ˆå‡è®¾æœ¬åœ°é›†ç¾¤ä¸º ClusterAï¼Œè¿œç«¯é›†ç¾¤ä¸º ClusterBï¼‰ï¼š</p>
<ul>
<li>å…ƒæ•°æ®åŒæ­¥ï¼šClusterA çš„ FE èŠ‚ç‚¹é€šè¿‡ HTTP åè®®åŒæ­¥ ClusterB ä¸­å®Œæ•´çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬è¡¨ç»“æ„ã€åˆ†åŒºã€å‰¯æœ¬ã€Tablet ä½ç½®ç­‰ã€‚</li>
<li>æŸ¥è¯¢è§„åˆ’ï¼šClusterA çš„  FE èŠ‚ç‚¹å°† ClusterB çš„ BE èŠ‚ç‚¹è§†ä¸ºâ€œè™šæ‹Ÿ BEâ€ï¼Œç”Ÿæˆå…¨å±€ç»Ÿä¸€çš„æ‰§è¡Œè®¡åˆ’ï¼ˆä¸å•é›†ç¾¤æŸ¥è¯¢é€»è¾‘ä¸€è‡´ï¼‰ã€‚</li>
<li>æŸ¥è¯¢è®¡åˆ’æ‰§è¡Œï¼šæ‰§è¡Œè®¡åˆ’ä¼šå°† ClusterA ä¸ ClusterB çš„ BE èŠ‚ç‚¹è§†ä½œä¸€ä¸ªç»Ÿä¸€ BE é›†ç¾¤ï¼Œå¹¶åœ¨å…¶ä¸Šæ‰§è¡ŒæŸ¥è¯¢è®¡åˆ’ã€‚å› æ­¤ï¼Œå„ç±»ç®—å­ä¼šåŒæ—¶åœ¨ ClusterA å’Œ ClusterB çš„ BE èŠ‚ç‚¹ä¸­æ‰§è¡Œã€‚</li>
<li>æ•°æ®æŸ¥è¯¢ä¸ä¼ è¾“ï¼šClusterA ä¸ ClusterB çš„ BE èŠ‚ç‚¹é—´ä½¿ç”¨å†…éƒ¨é€šä¿¡åè®®è¿›è¡Œæ•°æ®äº¤äº’ã€‚</li>
</ul>
<h2 data-id="heading-7">å®æˆ˜æ¼”ç¤ºï¼š10 åˆ†é’Ÿå®Œæˆè·¨é›†ç¾¤è®¢å•å±¥çº¦ç‡åˆ†æ</h2>
<p>å›å½’åˆ°å®é™…ä½¿ç”¨ä¸­ï¼ŒDoris Catalog å¯æœ‰æ•ˆæ”¯æ’‘ä»¥ä¸‹äº”å¤§æ ¸å¿ƒä¸šåŠ¡åœºæ™¯ï¼Œç²¾å‡†è§£å†³è·¨é›†ç¾¤åˆ†æç—›ç‚¹ï¼š</p>
<ol>
<li><strong>å¤šä¸šåŠ¡é›†ç¾¤è”åˆåˆ†æ</strong>ï¼šå¦‚åœ¨ç”µå•†åœºæ™¯ä¸­ï¼Œäº¤æ˜“é›†ç¾¤å­˜å‚¨è®¢å•æ•°æ®ã€ç‰©æµé›†ç¾¤å­˜å‚¨å±¥çº¦æ•°æ®ï¼Œé€šè¿‡ Doris Catalog ç›´æ¥å…³è”è®¡ç®—â€œè®¢å•å±¥çº¦ç‡â€â€œç‰©æµæ—¶æ•ˆâ€ç­‰æ ¸å¿ƒæŒ‡æ ‡ï¼Œæ— éœ€è·¨é›†ç¾¤æ•°æ®åŒæ­¥ã€‚</li>
<li><strong>åœ°åŸŸåˆ†å¸ƒå¼é›†ç¾¤å…¨å±€ç»Ÿè®¡</strong>ï¼šå¦‚é›¶å”®ä¼ä¸šåœ¨å¤šåœ°åŸŸéƒ¨ç½² Doris é›†ç¾¤ï¼Œé€šè¿‡ Doris Catalog ä¸€ç«™å¼æ±‡æ€»å„åŒºåŸŸé”€å”®æ•°æ®ï¼Œå®æ—¶è®¡ç®—å…¨å›½æ€»é”€å”®é¢ã€åŒºåŸŸå æ¯”ã€ç”¨æˆ·æ´»è·ƒåº¦ç­‰å…¨å±€æŒ‡æ ‡ã€‚</li>
<li><strong>å®æ—¶æ•°æ®è·¨é›†ç¾¤å…³è”æŸ¥è¯¢</strong>ï¼šå¦‚ç”¨æˆ·è¡Œä¸ºåˆ†æåœºæ™¯ä¸­ï¼Œé€šè¿‡ Doris Catalog å®æ—¶å…³è”ç”¨æˆ·å®æ—¶è¡Œä¸ºé›†ç¾¤ï¼ˆç‚¹å‡»ã€æµè§ˆç­‰ï¼‰ä¸é•¿æœŸç”¨æˆ·ç”»åƒé›†ç¾¤ï¼Œæ”¯æ’‘ä¸ªæ€§åŒ–æ¨èã€ç²¾å‡†è¥é”€ç­‰å®æ—¶å†³ç­–åœºæ™¯ã€‚</li>
<li><strong>è·¨åœ°åŸŸè¶…å¤§è§„åˆ’é›†ç¾¤åˆ†æ²»</strong>ï¼šä¸åŒåœ°åŸŸçš„åˆ†å…¬å¸é‡‡ç”¨ç›¸åŒçš„ä¸šåŠ¡æ¨¡å¼éƒ¨ç½²å’Œä½¿ç”¨ Doris é›†ç¾¤ã€‚æ¯å…¬å¸é€šè¿‡ Doris Catalog å®Œæˆå¯¹å…¨åœ°åŸŸå¤šé›†ç¾¤çš„é›†ä¸­è®¿é—®ï¼Œå®ç°è¶…å¤§è§„æ¨¡ä¸šåŠ¡æ•°æ®ç®¡ç†ã€‚</li>
<li><strong>è·¨é›†ç¾¤æ•°æ®è¿ç§»éªŒè¯ä¸å¯¹æ¯”åˆ†æ</strong>ï¼šæ–°æ—§é›†ç¾¤è¿ç§»è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ Doris Catalog ç›´æ¥å¯¹æ¯”ä¸¤ç«¯æ•°æ®ä¸€è‡´æ€§ï¼Œæ— éœ€å¯¼å‡ºå¯¼å…¥å·¥å…·ï¼Œç®€åŒ–è¿ç§»éªŒè¯æµç¨‹ï¼Œé™ä½æ•°æ®ä¸¢å¤±é£é™©ã€‚</li>
</ol>
<p><strong>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥å¸¸è§åœºæ™¯ 1ï¼šå¤šä¸šåŠ¡é›†ç¾¤è”åˆåˆ†æä¸ºä¾‹ï¼Œå®æˆ˜æ¼”ç¤ºå¦‚ä½•åœ¨ 10 åˆ†é’Ÿå®Œæˆè·¨é›†ç¾¤è®¢å•å±¥çº¦ç‡åˆ†æ</strong>ã€‚</p>
<ol>
<li><strong>èƒŒæ™¯ä»‹ç»</strong>
ç°æœ‰ä¸¤ä¸ª Doris é›†ç¾¤ï¼Œéœ€è·¨é›†ç¾¤å…³è”è®¡ç®—æ ¸å¿ƒä¸šåŠ¡æŒ‡æ ‡ï¼š</li>
</ol>
<ul>
<li>æœ¬åœ°é›†ç¾¤ï¼ˆTrading-Clusterï¼‰ï¼šå­˜å‚¨è®¢å•åŸºç¡€æ•°æ®ï¼Œåº“è¡¨ä¸º <code>trading_db.order_info</code>ï¼ˆè®¢å•è¡¨ï¼‰ï¼›</li>
<li>è¿œç«¯é›†ç¾¤ï¼ˆLogistics-Clusterï¼‰ï¼šå­˜å‚¨ç‰©æµå±¥çº¦æ•°æ®ï¼Œåº“è¡¨ä¸º <code>logistics_db.delivery_info</code>ï¼ˆå±¥çº¦è¡¨ï¼‰ï¼›</li>
<li>ä¸šåŠ¡éœ€æ±‚ï¼šè®¡ç®—è¿‘ 7 å¤©å„è®¢å•ç±»å‹çš„å±¥çº¦ç‡ï¼ˆå·²å±¥çº¦è®¢å•æ•°/æ€»è®¢å•æ•°ï¼‰ï¼Œæ”¯æ’‘è¿è¥å†³ç­–ã€‚</li>
</ul>
<ol start="2">
<li><strong>è¡¨ç»“æ„å®šä¹‰</strong></li>
</ol>
<ul>
<li>æœ¬åœ°è®¢å•è¡¨ <code>trading_db.order_info</code>ï¼š
<ul>
<li>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> trading_db.order_info (
    order_id STRING COMMENT <span class="hljs-string">'è®¢å•ID'</span>,
    order_type STRING COMMENT <span class="hljs-string">'è®¢å•ç±»å‹ï¼šå®ç‰©è®¢å•/è™šæ‹Ÿè®¢å•'</span>,
    create_time DATETIME COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
    amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) COMMENT <span class="hljs-string">'è®¢å•é‡‘é¢'</span>
) ENGINE<span class="hljs-operator">=</span>OLAP
DUPLICATE KEY(order_id)
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span>(create_time) (
    <span class="hljs-keyword">PARTITION</span> p202511 <span class="hljs-keyword">VALUES</span> [(<span class="hljs-string">'2025-11-01 00:00:00'</span>), (<span class="hljs-string">'2025-12-01 00:00:00'</span>))
)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(order_id) BUCKETS <span class="hljs-number">10</span>;
</code></pre>
</li>
</ul>
</li>
<li>è¿œç«¯å±¥çº¦è¡¨ <code>logistics_db.delivery_info</code>ï¼š
<ul>
<li>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> logistics_db.delivery_info (
    order_id STRING COMMENT <span class="hljs-string">'è®¢å•ID'</span>,
    delivery_status TINYINT COMMENT <span class="hljs-string">'å±¥çº¦çŠ¶æ€ï¼š1-å·²å±¥çº¦ï¼Œ0-æœªå±¥çº¦'</span>,
    delivery_time DATETIME COMMENT <span class="hljs-string">'å±¥çº¦æ—¶é—´'</span>
) ENGINE<span class="hljs-operator">=</span>OLAP
DUPLICATE KEY(order_id)
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span>(delivery_time) (
    <span class="hljs-keyword">PARTITION</span> p202511 <span class="hljs-keyword">VALUES</span> [(<span class="hljs-string">'2025-11-01 00:00:00'</span>), (<span class="hljs-string">'2025-12-01 00:00:00'</span>))
)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(order_id) BUCKETS <span class="hljs-number">10</span>;
</code></pre>
</li>
</ul>
</li>
</ul>
<ol start="3">
<li>
<p><strong>æ•°æ®å‡†å¤‡</strong>
å‘ä¸¤å¼ è¡¨åˆ†åˆ«æ’å…¥æµ‹è¯•æ•°æ®ï¼ˆæœ¬åœ°è¡¨ 100 ä¸‡è¡Œè®¢å•æ•°æ®ï¼Œè¿œç«¯è¡¨ 80 ä¸‡è¡Œå±¥çº¦æ•°æ®ï¼‰ï¼Œç¡®ä¿è®¢å• ID å­˜åœ¨å…³è”å…³ç³»ã€‚</p>
</li>
<li>
<p><strong>é…ç½® Doris Catalog</strong>
åœ¨æœ¬åœ° Doris é›†ç¾¤æ‰§è¡Œä»¥ä¸‹ SQLï¼Œåˆ›å»ºè¿æ¥è¿œç«¯ç‰©æµé›†ç¾¤çš„ Catalogï¼ˆè™šæ‹Ÿé›†ç¾¤æ¨¡å¼ï¼‰ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- åˆ›å»ºDoris Catalogï¼Œå¯ç”¨è™šæ‹Ÿé›†ç¾¤æ¨¡å¼ï¼ˆå¤ç”¨å†…è¡¨ä¼˜åŒ–ï¼‰</span>
<span class="hljs-keyword">CREATE</span> CATALOG IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> logistics_ctl PROPERTIES (
    <span class="hljs-string">'type'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'doris'</span>, <span class="hljs-comment">-- å›ºå®šç±»å‹</span>
    <span class="hljs-string">'fe_http_hosts'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'http://logistics-fe1:8030,http://logistics-fe2:8030'</span>, <span class="hljs-comment">-- è¿œç«¯FE HTTPåœ°å€</span>
    <span class="hljs-string">'fe_arrow_hosts'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'logistics-fe1:8040,http://logistics-fe2:8040'</span>, <span class="hljs-comment">-- è¿œç«¯FE Arrow Flightåœ°å€</span>
    <span class="hljs-string">'fe_thrift_hosts'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'logistics-fe1:9020,http://logistics-fe2:9020'</span>, <span class="hljs-comment">-- è¿œç«¯FE Thriftåœ°å€</span>
    <span class="hljs-string">'use_arrow_flight'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'false'</span>, <span class="hljs-comment">-- false=è™šæ‹Ÿé›†ç¾¤æ¨¡å¼ï¼Œtrue=Arrow Flightæ¨¡å¼</span>
    <span class="hljs-string">'user'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'doris_admin'</span>, <span class="hljs-comment">-- è¿œç«¯é›†ç¾¤ç™»å½•ç”¨æˆ·</span>
    <span class="hljs-string">'password'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'Doris@123456'</span>, <span class="hljs-comment">-- è¿œç«¯é›†ç¾¤ç™»å½•å¯†ç </span>
    <span class="hljs-string">'compatible'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'false'</span>, <span class="hljs-comment">-- é›†ç¾¤ç‰ˆæœ¬æ¥è¿‘ï¼ˆ4.0.3 vs 4.0.2ï¼‰ï¼Œæ— éœ€å…¼å®¹</span>
    <span class="hljs-string">'query_timeout_sec'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'30'</span> <span class="hljs-comment">-- å»¶é•¿æŸ¥è¯¢è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤15ç§’ï¼‰</span>
);
</code></pre>
<ol start="5">
<li><strong>è·¨é›†ç¾¤æŸ¥è¯¢</strong></li>
</ol>
<ul>
<li>åˆ‡æ¢ Catalog åæŸ¥è¯¢
<ul>
<li>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- åˆ‡æ¢åˆ°è¿œç«¯ç‰©æµé›†ç¾¤çš„Catalog</span>
SWITCH logistics_ctl;
<span class="hljs-comment">-- ä½¿ç”¨æœ¬åœ°è®¢å•åº“</span>
USE trading_db;
<span class="hljs-comment">-- å…³è”æœ¬åœ°è®¢å•è¡¨ä¸è¿œç«¯å±¥çº¦è¡¨ï¼Œè®¡ç®—å±¥çº¦ç‡</span>
<span class="hljs-keyword">SELECT</span> 
    o.order_type,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> o.order_id) <span class="hljs-keyword">AS</span> total_orders,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> d.delivery_status <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">THEN</span> o.order_id <span class="hljs-keyword">END</span>) <span class="hljs-keyword">AS</span> delivered_orders,
    ROUND(<span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> d.delivery_status <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">THEN</span> o.order_id <span class="hljs-keyword">END</span>) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> o.order_id), <span class="hljs-number">4</span>) <span class="hljs-operator">*</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AS</span> delivery_rate
<span class="hljs-keyword">FROM</span> internal.trading_db.order_info o
<span class="hljs-keyword">JOIN</span> delivery_info d <span class="hljs-keyword">ON</span> o.order_id <span class="hljs-operator">=</span> d.order_id
<span class="hljs-keyword">WHERE</span> o.create_time <span class="hljs-operator">&gt;=</span> DATE_SUB(<span class="hljs-built_in">CURRENT_DATE</span>(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">7</span> <span class="hljs-keyword">DAY</span>)
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> o.order_type
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> delivery_rate <span class="hljs-keyword">DESC</span>;
</code></pre>
</li>
</ul>
</li>
<li>å…¨é™å®šåæŸ¥è¯¢
<ul>
<li>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> 
    o.order_type,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> o.order_id) <span class="hljs-keyword">AS</span> total_orders,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> d.delivery_status <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">THEN</span> o.order_id <span class="hljs-keyword">END</span>) <span class="hljs-keyword">AS</span> delivered_orders,
    ROUND(<span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> d.delivery_status <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">THEN</span> o.order_id <span class="hljs-keyword">END</span>) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> o.order_id), <span class="hljs-number">4</span>) <span class="hljs-operator">*</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AS</span> delivery_rate
<span class="hljs-keyword">FROM</span> internal.trading_db.order_info o
<span class="hljs-keyword">JOIN</span> logistics_ctl.logistics_db.delivery_info d <span class="hljs-keyword">ON</span> o.order_id <span class="hljs-operator">=</span> d.order_id
<span class="hljs-keyword">WHERE</span> o.create_time <span class="hljs-operator">&gt;=</span> DATE_SUB(<span class="hljs-built_in">CURRENT_DATE</span>(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">7</span> <span class="hljs-keyword">DAY</span>)
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> o.order_type
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> delivery_rate <span class="hljs-keyword">DESC</span>;
</code></pre>
</li>
</ul>
</li>
</ul>
<ol start="6">
<li><strong>æŸ¥è¯¢ç»“æœä¸ä¼˜åŒ–éªŒè¯</strong>
<ol>
<li>æ‰§è¡Œç»“æœç¤ºä¾‹
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56ba3f53929b4fe5b92cff0f5a22daac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=qoiIsQ5sTn9b%2F33Ehr8QUDhOIPU%3D" alt="å®æˆ˜æ¼”ç¤º.png" loading="lazy"/></li>
<li>ä¼˜åŒ–ç‰¹æ€§éªŒè¯
<ul>
<li>æ‰§è¡Œ <code>EXPLAIN</code> æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œå¯å‘ç°ï¼š</li>
<li>è™šæ‹Ÿé›†ç¾¤æ¨¡å¼ä¸‹ï¼Œæ‰§è¡Œè®¡åˆ’ä¸­è¿œç«¯è¡¨æ‰«æèŠ‚ç‚¹ä¸º <code>VOlapScanNode</code>ï¼ˆä¸æœ¬åœ°è¡¨ä¸€è‡´ï¼‰ï¼Œè¯´æ˜å¤ç”¨äº† Doris å†…è¡¨æ‰«æä¼˜åŒ–ï¼›</li>
<li>Join æ“ä½œä¸­è‡ªåŠ¨å¯ç”¨ <code>Runtime Filter</code>ï¼Œå‡å°‘è¿œç«¯æ•°æ®ä¼ è¾“é‡ã€‚</li>
</ul>
</li>
</ol>
</li>
</ol>
<h2 data-id="heading-8">æ€»ç»“ä¸å±•æœ›</h2>
<p>Doris Catalog çš„æ¨å‡ºï¼Œè¡¥é½äº† Doris è·¨é›†ç¾¤è”é‚¦æŸ¥è¯¢çš„æ€§èƒ½çŸ­æ¿ã€‚åœ¨æ­¤<strong>ç‰¹åˆ«æ„Ÿè°¢ç¤¾åŒºåŒå­¦çš„ Chen768959 å’Œ HonestManXin è´¡çŒ®</strong>ï¼Œå¸®åŠ©å»¶ç»­äº† Doris Catalog ç”Ÿæ€â€œæ— éœ€è¿ç§»ã€ä¸€ç«™å¼åˆ†æâ€çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œè®©å¤š Doris é›†ç¾¤ä»â€œæ•°æ®å­¤å²›â€å˜ä¸ºâ€œäº’è”ä¸€ä½“â€ã€‚</p>
<p>ä½œä¸ºå®éªŒæ€§ç‰¹æ€§ï¼ŒDoris Catalog åç»­å°†æŒç»­è¿­ä»£ä¼˜åŒ–ï¼š</p>
<ul>
<li>å¢å¼º Arrow Flight æ¨¡å¼ï¼Œä½¿å…¶èƒ½å¤Ÿè®¿é—®ä»»æ„æ”¯æŒæ ‡å‡† Arrow Flight åè®®çš„æ•°æ®æºã€‚</li>
<li>é™ä½è™šæ‹Ÿé›†ç¾¤æ¨¡å¼ FE å†…å­˜å¼€é”€ï¼Œä¼˜åŒ–å…ƒæ•°æ®å­˜å‚¨å’ŒåŒæ­¥ç­–ç•¥ï¼›</li>
<li>æ”¯æŒå­˜ç®—åˆ†ç¦»éƒ¨ç½²çš„ Doris é›†ç¾¤ï¼ˆè™šæ‹Ÿé›†ç¾¤æ¨¡å¼ï¼‰</li>
<li>æ–°å¢æ›´å¤šç›‘æ§æŒ‡æ ‡ï¼Œæ–¹ä¾¿æ’æŸ¥è·¨é›†ç¾¤æŸ¥è¯¢æ•…éšœã€‚</li>
</ul>
<p>æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—® Doris å®˜ç½‘æ–‡æ¡£ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org%2Fzh-CN%2Fdocs%2F4.x%2Flakehouse%2Fcatalogs%2Fdoris-catalog" target="_blank" title="https://doris.apache.org/zh-CN/docs/4.x/lakehouse/catalogs/doris-catalog" ref="nofollow noopener noreferrer">doris.apache.org/zh-CN/docs/â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦è§£æOoderæ¶æ„ï¼šA2UIæ—¶ä»£å…¨æ ˆè®¾è®¡çš„å››å¤§æ ¸å¿ƒæ€è€ƒ]]></title>    <link>https://juejin.cn/post/7588001624904876051</link>    <guid>https://juejin.cn/post/7588001624904876051</guid>    <pubDate>2025-12-26T13:08:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588001624904876051" data-draft-id="7587995707165999123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦è§£æOoderæ¶æ„ï¼šA2UIæ—¶ä»£å…¨æ ˆè®¾è®¡çš„å››å¤§æ ¸å¿ƒæ€è€ƒ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T13:08:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦è§£æOoderæ¶æ„ï¼šA2UIæ—¶ä»£å…¨æ ˆè®¾è®¡çš„å››å¤§æ ¸å¿ƒæ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T13:08:27.000Z" title="Fri Dec 26 2025 13:08:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¤§æ¨¡å‹å¸­å·ä¼ä¸šçº§å¼€å‘çš„å½“ä¸‹ï¼ŒAI to UIï¼ˆA2UIï¼‰å·²ä»æ¦‚å¿µè½åœ°ä¸ºå®é™…ç”Ÿäº§åŠ›ï¼Œæˆä¸ºå‰ç«¯å¼€å‘æ¼”è¿›çš„æ ¸å¿ƒæ–¹å‘ä¹‹ä¸€ã€‚è€Œä¸“ä¸ºå¤§æ¨¡å‹æµå¼å¤„ç†è®¾è®¡çš„Ooderå…¨æ ˆæ¶æ„ï¼Œå‡­å€Ÿä¸React/Vueæˆªç„¶ä¸åŒçš„è®¾è®¡æ€è·¯ï¼Œåœ¨CNç¯å¢ƒä¸‹çš„A2UIåœºæ™¯ä¸­å´­éœ²å¤´è§’ã€‚</p>
<p>å›´ç»•Ooderæ¶æ„çš„è®¾è®¡æ ¸å¿ƒé€»è¾‘ã€æŠ€æœ¯é€‰å‹ã€å¯è§†åŒ–å®ç°åŠç»„ä»¶åŒ–å·®å¼‚å››å¤§å…³é”®é—®é¢˜ï¼Œç»“åˆæ¶æ„è®¾è®¡çš„æ ¸å¿ƒæ€è·¯ä¸å®è·µç»éªŒï¼Œæœ¬æ–‡å°†ä»æŠ€æœ¯æ¨ç†åˆ°è½åœ°å®è·µè¿›è¡Œå®Œæ•´æ‹†è§£ï¼Œå¸¦å¤§å®¶è¯»æ‡‚Ooderæ¶æ„çš„è®¾è®¡ç²¾é«“ä¸å–èˆä¹‹é“ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒä¹‹é—®ä¸€ï¼šä¸ºä½•è¦ä¸“é—¨è®¾è®¡UIæ³¨è§£åº“ï¼Ÿè€Œéå¤ç”¨React/Vueç”Ÿæ€ï¼Ÿ</h2>
<h3 data-id="heading-1">AICodeingæé—®é€»è¾‘ï¼šä¼ ç»Ÿæ¡†æ¶çš„A2UIé€‚é…å›°å¢ƒ</h3>
<p>éšç€A2UIä»æ¦‚å¿µèµ°å‘å®è·µï¼Œæˆ‘ä»¬å‘ç°ä¼ ç»Ÿå‰ç«¯æ¡†æ¶ï¼ˆReact/Vueï¼‰åœ¨é€‚é…è¿™ä¸€æ¨¡å¼æ—¶å­˜åœ¨å¤©ç„¶å±€é™ï¼šå…¶ä¸€ï¼Œè¿™ç±»æ¡†æ¶ä¸“æ³¨äºå‰ç«¯UIé¢†åŸŸï¼Œæ— æ³•è¦†ç›–ä»åç«¯æœåŠ¡åˆ°å‰ç«¯æ¸²æŸ“çš„å…¨æ ˆé“¾è·¯ï¼Œå¯¼è‡´AIç”Ÿæˆå…¨æ ˆä»£ç æ—¶å‡ºç°â€œæ–­å±‚â€ï¼›å…¶äºŒï¼ŒåŠ¨æ€æ¨¡æ¿è®¾è®¡çš„çµæ´»æ€§è™½é«˜ï¼Œä½†éš¾ä»¥è¢«å¤§æ¨¡å‹ç²¾å‡†è§£æå’Œç”Ÿæˆï¼Œå¢åŠ äº†A2UIè½åœ°çš„éš¾åº¦ï¼›å…¶ä¸‰ï¼Œå‰åç«¯ååŒéœ€è¦é¢å¤–çš„çŠ¶æ€ç®¡ç†ã€æ¥å£é€‚é…æœºåˆ¶ï¼Œæ²Ÿé€šä¸å¼€å‘æˆæœ¬å±…é«˜ä¸ä¸‹ã€‚</p>
<p>åŸºäºä¼ ç»Ÿæ¡†æ¶çš„é€‚é…å±€é™ï¼ŒOoderæ¶æ„é€‰æ‹©è·³å‡ºå›ºæœ‰æ€ç»´ï¼Œè®¾è®¡ä¸“å±UIæ³¨è§£åº“ã€‚è¿™ä¸€è®¾è®¡çš„æ ¸å¿ƒä»·å€¼ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-2">è®¾è®¡é€»è¾‘ï¼šæ³¨è§£é©±åŠ¨æ˜¯A2UIä¸å…¨æ ˆæµå¼å¤„ç†çš„æœ€ä¼˜è§£</h3>
<p>Ooderè®¾è®¡ä¸“å±UIæ³¨è§£åº“çš„æ ¸å¿ƒé€»è¾‘ï¼Œæ˜¯ä¸ºäº†ç²¾å‡†é€‚é…A2UIæ¨¡å¼ä¸å¤§æ¨¡å‹æµå¼å¤„ç†çš„æ ¸å¿ƒéœ€æ±‚ï¼Œå…·ä½“å¯æ‹†è§£ä¸ºå››ç‚¹ï¼š</p>
<ol>
<li><strong>å…¨æ ˆä¸€ä½“åŒ–å·¥ä½œç¯å¢ƒ</strong>ï¼šæ³¨è§£åº“æ‰“é€šäº†åç«¯æœåŠ¡ã€æ•°æ®æ¨¡å‹åˆ°å‰ç«¯UIçš„å®Œæ•´é“¾è·¯ï¼Œè®©AIèƒ½å¤Ÿç›´æ¥ç”Ÿæˆè¦†ç›–å…¨æ ˆçš„ä»£ç ï¼Œæ— éœ€åœ¨ä¸åŒæ¡†æ¶ã€ä¸åŒé¢†åŸŸé—´åˆ‡æ¢é€‚é…ï¼›</li>
<li><strong>å®Œç¾é€‚é…å¤§æ¨¡å‹æµå¼è¾“å‡º</strong>ï¼šé€šè¿‡<code>@APIEventAnnotation</code>ç­‰æ³¨è§£é©±åŠ¨çš„äº‹ä»¶æœºåˆ¶ï¼Œèƒ½å¤Ÿå®æ—¶æ¥æ”¶å¤§æ¨¡å‹çš„æµå¼è¾“å‡ºå†…å®¹ï¼Œå¹¶ç›´æ¥æ¸²æŸ“ä¸ºå¯¹åº”çš„UIç»„ä»¶ï¼Œå®ç°â€œAIç”Ÿæˆå³æ¸²æŸ“â€çš„é«˜æ•ˆä½“éªŒï¼›</li>
<li><strong>å¥‘åˆCNç¯å¢ƒçš„å®é™…éœ€æ±‚</strong>ï¼šå½“å‰CNå¸‚åœºå¯¹ä½ä»£ç /é›¶ä»£ç å¼€å‘ã€A2UIè‡ªåŠ¨åŒ–ç”Ÿæˆçš„éœ€æ±‚æ—ºç››ï¼Œæ³¨è§£é©±åŠ¨çš„è®¾è®¡é™ä½äº†å¼€å‘é—¨æ§›ï¼Œè®©éä¸“ä¸šå¼€å‘è€…ä¹Ÿèƒ½å€ŸåŠ©AIå®Œæˆä¼ä¸šçº§åº”ç”¨å¼€å‘ï¼›</li>
<li><strong>å¥‘åˆA2UIçš„æ ¸å¿ƒç†è®º</strong>ï¼šå€Ÿé‰´Google A2UIæ¨¡å¼çš„æ ¸å¿ƒæ€è·¯ï¼Œé€šè¿‡ç»“æ„åŒ–çš„æ³¨è§£å®šä¹‰ï¼Œå®ç°ä»AIæŒ‡ä»¤åˆ°UIç»„ä»¶çš„è‡ªåŠ¨åŒ–è½¬æ¢ï¼Œå‡å°‘äººå·¥å¹²é¢„ç¯èŠ‚ã€‚</li>
</ol>
<h3 data-id="heading-3">æŠ€æœ¯å–èˆï¼šä¼˜åŠ¿ä¸å±€é™æ€§çš„å®¢è§‚è¯„ä»·</h3>
<p>ä»»ä½•æŠ€æœ¯è®¾è®¡éƒ½å­˜åœ¨å–èˆï¼ŒOoderçš„UIæ³¨è§£åº“ä¹Ÿä¸ä¾‹å¤–ï¼š</p>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å¤©ç„¶é€‚é…A2UIæ¨¡å¼ï¼Œæ®å®æµ‹å¯æå‡60%-80%çš„å¼€å‘æ•ˆç‡ï¼Œå°¤å…¶é€‚åˆä¼ä¸šçº§è¡¨å•ã€åå°ç®¡ç†ç³»ç»Ÿç­‰æ ‡å‡†åŒ–åœºæ™¯ï¼›</li>
<li>å…¨æ ˆä¸€ä½“åŒ–è®¾è®¡æ¶ˆé™¤äº†å‰åç«¯ååŒçš„â€œé¸¿æ²Ÿâ€ï¼Œå‡å°‘äº†æ¥å£é€‚é…ã€æ•°æ®æ ¡éªŒç­‰é‡å¤å·¥ä½œï¼›</li>
<li>ç»“æ„åŒ–çš„æ³¨è§£å®šä¹‰ä¾¿äºå¤§æ¨¡å‹è§£æï¼Œä¸ºâ€œå›¾ç”Ÿä»£ç â€â€œæ–‡ç”Ÿä»£ç â€æä¾›äº†æ¸…æ™°çš„æŠ€æœ¯è½½ä½“ï¼Œé™ä½äº†AIç”Ÿæˆä»£ç çš„é”™è¯¯ç‡ã€‚</li>
</ul>
<p><strong>å±€é™æ€§</strong>ï¼š</p>
<ul>
<li>ç”Ÿæ€ç›¸å¯¹å¹´è½»ï¼Œç›¸æ¯”React/Vueæˆç†Ÿçš„ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼ŒOoderçš„å¯é€‰ç»„ä»¶èµ„æºè¾ƒå°‘ï¼Œå®šåˆ¶åŒ–å¤æ‚ç»„ä»¶æ—¶éœ€è¦æ›´å¤šå¼€å‘å·¥ä½œï¼›</li>
<li>å­¦ä¹ æ›²çº¿è¾ƒé™¡ï¼Œå¼€å‘è€…éœ€è¦ä»â€œå‰ç«¯ç»„ä»¶åŒ–æ€ç»´â€åˆ‡æ¢åˆ°â€œå…¨æ ˆæ³¨è§£æ€ç»´â€ï¼ŒæŒæ¡è¦†ç›–å‰åç«¯çš„æ³¨è§£ä½“ç³»ï¼›</li>
<li>åœ¨å¤æ‚åŠ¨æ€äº¤äº’åœºæ™¯ï¼ˆå¦‚å¯è§†åŒ–å¤§å±ã€å¤æ‚è¡¨å•è”åŠ¨ï¼‰ä¸­ï¼Œçµæ´»æ€§ä¸å¦‚React/Vueçš„åŠ¨æ€æ¨¡æ¿è®¾è®¡ã€‚</li>
</ul>
<h2 data-id="heading-4">äºŒã€æ ¸å¿ƒä¹‹é—®äºŒï¼šä¸ºä½•é€‰æ‹©â€œç¼–è¯‘æ—¶+è¿è¡Œæ—¶â€æ··åˆæ¶æ„ï¼Ÿçº¯è¿è¡Œæ—¶ä¸æ›´é¦™å—ï¼Ÿ</h2>
<h3 data-id="heading-5">æ ¸å¿ƒæ€è€ƒï¼šçº¯è¿è¡Œæ—¶æ¶æ„çš„å…¨æ ˆé€‚é…å›°å¢ƒï¼Œä¸ºä½•è½¬å‘æ··åˆæ¶æ„ï¼Ÿ</h3>
<p>ä¼ ç»Ÿå‰ç«¯æ¶æ„å¤šé‡‡ç”¨çº¯è¿è¡Œæ—¶è®¾è®¡ï¼Œä¾èµ–æµè§ˆå™¨åŠ¨æ€è§£ææ¨¡æ¿ã€å¤„ç†äº‹ä»¶å’Œæ¸²æŸ“é¡µé¢ã€‚ä½†åœ¨A2UIå’Œå…¨æ ˆå¼€å‘åœºæ™¯ä¸­ï¼Œè¿™ç§æ¶æ„çš„å¼Šç«¯é€æ¸å‡¸æ˜¾ï¼šä¸€æ˜¯å‰åç«¯æ•°æ®æ¨¡å‹éš¾ä»¥ä¿è¯ä¸€è‡´æ€§ï¼Œå®¹æ˜“å‡ºç°â€œå‰ç«¯æ¸²æŸ“ä¸åç«¯æ•°æ®ä¸åŒ¹é…â€çš„é—®é¢˜ï¼›äºŒæ˜¯è·¨å±‚äº‹ä»¶è”åŠ¨å¤æ‚ï¼Œéœ€è¦å¼•å…¥Reduxã€Vuexç­‰çŠ¶æ€ç®¡ç†åº“å’Œäº‹ä»¶æ€»çº¿æœºåˆ¶ï¼Œå¢åŠ äº†æ¶æ„å¤æ‚åº¦ï¼›ä¸‰æ˜¯æ— æ³•é«˜æ•ˆå¤„ç†AIç”Ÿæˆçš„å…¨æ ˆå†…å®¹ï¼Œéš¾ä»¥å®ç°â€œç”Ÿæˆå³è¿è¡Œâ€çš„A2UIæ ¸å¿ƒéœ€æ±‚ã€‚</p>
<p>Ooderæ¶æ„åˆ›æ–°æ€§åœ°é‡‡ç”¨â€œç¼–è¯‘æ—¶+è¿è¡Œæ—¶â€çš„æ··åˆå¤„ç†æœºåˆ¶ï¼Œè¿™ä¸€æ¶æ„é€‰æ‹©çš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-6">æ¶æ„ä¼˜åŠ¿ï¼šæ··åˆæ¶æ„å®ç°å…¨æ ˆä¸€è‡´æ€§ä¸é«˜æ•ˆæ¸²æŸ“çš„å¹³è¡¡</h3>
<p>Ooderçš„æ··åˆæ¶æ„é€šè¿‡â€œåŒé˜¶æ®µå¤„ç†â€æœºåˆ¶ï¼Œæ—¢è§£å†³äº†çº¯è¿è¡Œæ—¶çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œåˆä¿ç•™äº†åŠ¨æ€é€‚é…çš„çµæ´»æ€§ï¼Œå…·ä½“å®ç°é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>ç¼–è¯‘æ—¶å¤„ç†ï¼šå›ºåŒ–æ ¸å¿ƒæ¨¡å‹ï¼Œä¿éšœä¸€è‡´æ€§</strong>ï¼šåœ¨ç¼–è¯‘é˜¶æ®µï¼ŒOoderä¼šå¯¹æ•°æ®ç»“æ„æ¥å£è¿›è¡Œâ€œå›ºåŒ–â€ï¼Œé€šè¿‡ç±»å‹æ£€æŸ¥ç¡®ä¿å‰åç«¯æ•°æ®æ¨¡å‹ä¸€è‡´ï¼›åŒæ—¶å°†å‰ç«¯æ‰“åŒ…ã€èµ„æºä¼˜åŒ–ç­‰å·¥ä½œèå…¥ç¼–è¯‘æµç¨‹ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå‰åç«¯é€šä¿¡çš„ä¸­é—´å±‚ä»£ç ï¼Œé¿å…äººå·¥ç¼–å†™é€‚é…é€»è¾‘çš„å†—ä½™ä¸é”™è¯¯ã€‚</li>
<li><strong>è¿è¡Œæ—¶å¤„ç†ï¼šåŠ¨æ€é€‚é…éœ€æ±‚ï¼Œä¿éšœçµæ´»æ€§</strong>ï¼šåœ¨è¿è¡Œé˜¶æ®µï¼ŒOoderæ”¯æŒæœåŠ¡çš„åŠ¨æ€ç»‘å®šå’Œåå°„å¼è½¯ç»‘å®šï¼Œèƒ½å¤Ÿæ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯è°ƒæ•´æœåŠ¡ä¾èµ–ï¼›é€šè¿‡<code>@APIEventAnnotation</code>å®ç°å‰åå°äº‹ä»¶çš„æ— ç¼è”åŠ¨ï¼Œæ— éœ€é¢å¤–çš„äº‹ä»¶æ€»çº¿ï¼›åŒæ—¶æ”¯æŒå¤šç«¯è¾“å…¥ï¼ˆå¦‚AIæŒ‡ä»¤ã€ç”¨æˆ·æ“ä½œï¼‰åŠ¨æ€ç”ŸæˆUIè¾“å‡ºï¼Œå®Œç¾é€‚é…A2UIæ¨¡å¼çš„åŠ¨æ€éœ€æ±‚ã€‚</li>
</ol>
<p>è¿™ç§æ··åˆæ¶æ„çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºä¸‰ç‚¹ï¼šä¸€æ˜¯ä¸­é—´å±‚ç»Ÿä¸€ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„ä¸­é—´å±‚ä»£ç æ¶ˆé™¤äº†å‰åç«¯æ•°æ®ä¸ä¸€è‡´çš„éšæ‚£ï¼›äºŒæ˜¯åŠ¨ä½œäº‹ä»¶è”åŠ¨é«˜æ•ˆï¼Œè·¨å±‚äº‹ä»¶æ— éœ€äººå·¥é€‚é…ï¼Œé™ä½äº†å¼€å‘å¤æ‚åº¦ï¼›ä¸‰æ˜¯å¤šæºæ•°æ®æ”¯æŒèƒ½åŠ›å¼ºï¼Œèƒ½å¤Ÿçµæ´»å¤„ç†AIç”Ÿæˆæ•°æ®ã€åç«¯æ¥å£æ•°æ®ã€ç”¨æˆ·è¾“å…¥æ•°æ®ç­‰å¤šç±»æ•°æ®æºçš„UIæ¸²æŸ“éœ€æ±‚ã€‚</p>
<h3 data-id="heading-7">æŠ€æœ¯å–èˆï¼šæ¶æ„å¤æ‚åº¦ä¸æ•ˆç‡çš„å¹³è¡¡</h3>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>ç¼–è¯‘æ—¶çš„ç±»å‹æ£€æŸ¥å‡å°‘äº†è¿è¡Œæ—¶é”™è¯¯ï¼Œæå‡äº†ä»£ç è´¨é‡ï¼Œå°¤å…¶é€‚åˆå¤§å‹ä¼ä¸šçº§åº”ç”¨çš„é•¿æœŸç»´æŠ¤ï¼›</li>
<li>å‰åç«¯æ¨¡å‹ç»Ÿä¸€ï¼Œé™ä½äº†å›¢é˜Ÿçš„æ²Ÿé€šæˆæœ¬å’Œé€‚é…å·¥ä½œé‡ï¼Œè®©å¼€å‘è€…æ›´èšç„¦ä¸šåŠ¡é€»è¾‘ï¼›</li>
<li>å¯¹A2UIæ¨¡å¼çš„é€‚é…æ€§è¿œè¶…çº¯è¿è¡Œæ—¶æ¶æ„ï¼Œèƒ½å¤Ÿé«˜æ•ˆå¤„ç†AIç”Ÿæˆçš„å…¨æ ˆä»£ç ï¼Œå®ç°â€œç”Ÿæˆå³éƒ¨ç½²â€çš„é«˜æ•ˆè½åœ°ã€‚</li>
</ul>
<p><strong>å±€é™æ€§</strong>ï¼š</p>
<ul>
<li>æ¶æ„å¤æ‚åº¦é«˜äºçº¯è¿è¡Œæ—¶è®¾è®¡ï¼Œå¼€å‘å’Œç»´æŠ¤è¿‡ç¨‹ä¸­éœ€è¦å…³æ³¨ç¼–è¯‘é…ç½®ã€ä¸­é—´å±‚ç”Ÿæˆç­‰é¢å¤–ç¯èŠ‚ï¼›</li>
<li>ç¼–è¯‘è¿‡ç¨‹ä¼šå»¶é•¿å¼€å‘å‘¨æœŸä¸­çš„æ„å»ºæ—¶é—´ï¼Œå°¤å…¶åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå¯èƒ½å½±å“å¼€å‘æ•ˆç‡ï¼›</li>
<li>å¯¹å¼€å‘å·¥å…·é“¾çš„è¦æ±‚è¾ƒé«˜ï¼Œéœ€è¦é…å¥—æ”¯æŒæ··åˆç¼–è¯‘çš„IDEå’Œæ„å»ºå·¥å…·ï¼Œå¦åˆ™ä¼šå¢åŠ å¼€å‘é—¨æ§›ã€‚</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€æ ¸å¿ƒä¹‹é—®ä¸‰ï¼šæ³¨è§£åº“ä¸ooder-DSMçš„é›†æˆï¼Œå¦‚ä½•è§£å†³å¯è§†åŒ–ä¸â€œå›¾ç”Ÿä»£ç â€éš¾é¢˜ï¼Ÿ</h2>
<h3 data-id="heading-9">æ ¸å¿ƒéš¾é¢˜ï¼šä¼ ç»Ÿæ¡†æ¶çš„å¯è§†åŒ–ååŒå›°å¢ƒå¦‚ä½•ç ´è§£ï¼Ÿ</h3>
<p>å¯è§†åŒ–ç¼–è¾‘å’Œâ€œå›¾ç”Ÿä»£ç â€æ˜¯A2UIæ¨¡å¼çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œä¹Ÿæ˜¯æå‡å›¢é˜ŸååŒæ•ˆç‡çš„å…³é”®ã€‚ä½†ä¼ ç»Ÿå‰ç«¯æ¡†æ¶çš„å¯è§†åŒ–æ”¯æŒä¾èµ–Storybookç­‰ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œå­˜åœ¨æ˜æ˜¾çŸ­æ¿ï¼šä¸€æ˜¯å‰åç«¯æ¨¡å‹å‰²è£‚ï¼Œäº§å“ç»ç†åœ¨å¯è§†åŒ–å·¥å…·ä¸­è®¾è®¡çš„UIï¼Œæ— æ³•ç›´æ¥å¯¹æ¥åç«¯ä¸šåŠ¡é€»è¾‘ï¼Œéœ€è¦å‰ç«¯äºŒæ¬¡é€‚é…ï¼›äºŒæ˜¯å›¾ç”Ÿä»£ç èƒ½åŠ›æœ‰é™ï¼ŒåŠ¨æ€æ¨¡æ¿çš„çµæ´»æ€§å¯¼è‡´AIéš¾ä»¥ç²¾å‡†è§£æè®¾è®¡ç¨¿ï¼Œç”Ÿæˆçš„ä»£ç å¯ç”¨æ€§ä½ï¼›ä¸‰æ˜¯å¤šè§’è‰²ååŒå›°éš¾ï¼Œäº§å“ã€å‰åç«¯ã€ä¸šåŠ¡äººå‘˜åŸºäºä¸åŒçš„æ¨¡å‹å¼€å±•å·¥ä½œï¼Œæ²Ÿé€šæˆæœ¬é«˜ï¼Œå®¹æ˜“å‡ºç°ç†è§£åå·®ã€‚</p>
<p>Ooderé€šè¿‡æ³¨è§£åº“ä¸ooder-DSMçš„å¯è§†åŒ–ç¼–è¾‘é›†æˆï¼Œæœ‰æ•ˆè§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚è¿™ç§é›†æˆçš„å…·ä½“å®ç°æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-10">å®ç°æœºåˆ¶ï¼šæ³¨è§£ä¸ç»„ä»¶1:1æ˜ å°„ï¼Œæ‰“é€šâ€œè®¾è®¡-ä»£ç -ä¸šåŠ¡â€å…¨é“¾è·¯</h3>
<p>Ooderçš„å¯è§†åŒ–æ”¯æŒæ ¸å¿ƒåœ¨äºâ€œæ³¨è§£ç³»ç»Ÿä¸å‰ç«¯ç»„ä»¶çš„1:1æ˜ å°„â€ï¼Œé€šè¿‡è¿™ä¸€è®¾è®¡å®ç°äº†å¯è§†åŒ–è®¾è®¡ã€ä»£ç ç”Ÿæˆã€ä¸šåŠ¡é€»è¾‘çš„å…¨é“¾è·¯ç»Ÿä¸€ï¼Œå…·ä½“æŠ€æœ¯è·¯å¾„å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>æ³¨è§£ç³»ç»Ÿçš„ç²¾å‡†è®¾è®¡</strong>ï¼šOoderå®šä¹‰äº†<code>@FormAnnotation</code>ï¼ˆè¡¨å•ç»„ä»¶ï¼‰ã€<code>@TreeAnnotation</code>ï¼ˆæ ‘å½¢ç»„ä»¶ï¼‰ç­‰ä¸€ç³»åˆ—æ³¨è§£ï¼Œæ¯ä¸ªæ³¨è§£çš„å±æ€§ï¼ˆå¦‚æ ·å¼ã€äº¤äº’è§„åˆ™ã€æ•°æ®ç»‘å®šï¼‰éƒ½ä¸å¯¹åº”çš„å‰ç«¯ç»„ä»¶å®ç°1:1å¯¹åº”ï¼Œç¡®ä¿æ³¨è§£å®šä¹‰èƒ½å¤Ÿå®Œå…¨è¦†ç›–ç»„ä»¶çš„æ ¸å¿ƒç‰¹æ€§ã€‚</li>
<li><strong>RADå¯è§†åŒ–å…¨æµç¨‹</strong>ï¼šé€šè¿‡Ooder RADå¯è§†åŒ–å·¥å…·ï¼Œäº§å“ç»ç†æˆ–ä¸šåŠ¡äººå‘˜å¯ç›´æ¥æ‹–æ‹½ç»„ä»¶è¿›è¡ŒUIè®¾è®¡ï¼›è®¾è®¡å®Œæˆåï¼Œå·¥å…·ä¼šå°†ç»„ä»¶çš„å±æ€§åºåˆ—åŒ–ä¸ºJSONæ ¼å¼ï¼›Ooderå¼•æ“å†å°†JSONç¿»è¯‘ä¸ºå¯¹åº”çš„åç«¯æ³¨è§£ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„å‰åç«¯ä»£ç ï¼ˆåŒ…æ‹¬å‰ç«¯æ¸²æŸ“é€»è¾‘ã€åç«¯æ•°æ®æ¥å£ã€æ•°æ®æ ¡éªŒè§„åˆ™ï¼‰ã€‚</li>
<li><strong>å¼ºç±»å‹çº¦æŸä½“ç³»</strong>ï¼šæ³¨è§£ç³»ç»Ÿè‡ªå¸¦å¼ºç±»å‹çº¦æŸï¼Œç¡®ä¿å¯è§†åŒ–è®¾è®¡çš„å±æ€§ç¬¦åˆåç«¯æ•°æ®æ¨¡å‹çš„è¦æ±‚ï¼Œé¿å…å‡ºç°â€œè®¾è®¡ä¸ä¸šåŠ¡ä¸åŒ¹é…â€çš„é—®é¢˜ï¼›åŒæ—¶å¼ºç±»å‹ä¹Ÿä¸ºAIè§£æè®¾è®¡ç¨¿ã€ç”Ÿæˆç²¾å‡†ä»£ç æä¾›äº†ä¿éšœã€‚</li>
<li><strong>å¤šè§’è‰²ååŒæœºåˆ¶</strong>ï¼šäº§å“ã€å‰åç«¯ã€ä¸šåŠ¡äººå‘˜åŸºäºåŒä¸€å¥—æ³¨è§£æ¨¡å‹å¼€å±•å·¥ä½œâ€”â€”äº§å“è®¾è®¡UIå³å®šä¹‰æ³¨è§£å±æ€§ï¼Œå‰ç«¯æ— éœ€äºŒæ¬¡è½¬æ¢ï¼Œåç«¯ç›´æ¥åŸºäºæ³¨è§£å¼€å‘ä¸šåŠ¡é€»è¾‘ï¼Œå®ç°â€œä¸€å¥—æ¨¡å‹ï¼Œå¤šè§’è‰²å¤ç”¨â€ï¼Œå¤§å¹…é™ä½æ²Ÿé€šæˆæœ¬ã€‚</li>
</ol>
<h3 data-id="heading-11">æŠ€æœ¯å–èˆï¼šå¯è§†åŒ–æ•ˆç‡ä¸è®¾è®¡çµæ´»æ€§çš„å¹³è¡¡</h3>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å¤šè§’è‰²ååŒæ•ˆç‡å¤§å¹…æå‡ï¼Œæ®ç»Ÿè®¡å¯é™ä½80%ä»¥ä¸Šçš„æ²Ÿé€šæˆæœ¬ï¼Œé¿å…å› ç†è§£åå·®å¯¼è‡´çš„è¿”å·¥ï¼›</li>
<li>å›¾ç”Ÿä»£ç èƒ½åŠ›å¼ºï¼Œè®¾è®¡ç¨¿å¯ç›´æ¥è½¬æ¢ä¸ºå¯è¿è¡Œçš„å…¨æ ˆä»£ç ï¼Œå¯ç”¨æ€§è¿œè¶…ä¼ ç»Ÿå¯è§†åŒ–å·¥å…·ï¼›</li>
<li>å¼ºç±»å‹çº¦æŸç¡®ä¿äº†ä»£ç è´¨é‡å’Œä¸šåŠ¡ä¸€è‡´æ€§ï¼Œå‡å°‘äº†â€œè®¾è®¡å¥½çœ‹ä½†æ— æ³•è½åœ°â€çš„é—®é¢˜ã€‚</li>
</ul>
<p><strong>å±€é™æ€§</strong>ï¼š</p>
<ul>
<li>å¯è§†åŒ–å·¥å…·çš„æˆç†Ÿåº¦æœ‰å¾…æå‡ï¼Œç›¸æ¯”Figmaã€Axureç­‰ä¸“ä¸šè®¾è®¡å·¥å…·ï¼Œåœ¨è®¾è®¡ç»†èŠ‚ã€äº¤äº’ä½“éªŒä¸Šå­˜åœ¨å·®è·ï¼›</li>
<li>å¤æ‚äº¤äº’åœºæ™¯çš„å¯è§†åŒ–æ”¯æŒæœ‰é™ï¼Œå¯¹äºéœ€è¦è‡ªå®šä¹‰åŠ¨ç”»ã€ç‰¹æ®Šäº¤äº’é€»è¾‘çš„åœºæ™¯ï¼Œä»éœ€æ‰‹åŠ¨ç¼–å†™æ³¨è§£å’Œä»£ç ï¼›</li>
<li>å¯¹è®¾è®¡è§„èŒƒè¦æ±‚è¾ƒé«˜ï¼Œéœ€è¦å›¢é˜Ÿä¸¥æ ¼éµå¾ªOoderçš„ç»„ä»¶è®¾è®¡è§„èŒƒï¼Œå¦åˆ™ä¼šå½±å“å¯è§†åŒ–åˆ°ä»£ç çš„è½¬æ¢æ•ˆç‡ã€‚</li>
</ul>
<h2 data-id="heading-12">å››ã€æ ¸å¿ƒä¹‹é—®å››ï¼šOoderåµŒå¥—ç»„ä»¶åŒ–ä¸React/Vueçš„ç»„ä»¶åŒ–ï¼Œæœ¬è´¨åŒºåˆ«åœ¨å“ªï¼Ÿ</h2>
<h3 data-id="heading-13">æœ¬è´¨å·®å¼‚ï¼šä¼ ç»Ÿç»„ä»¶åŒ–çš„è·¨åŸŸååŒå›°å¢ƒä¸Ooderçš„çªç ´æ–¹å‘</h3>
<p>ç»„ä»¶åŒ–çš„æ ¸å¿ƒç›®æ ‡æ˜¯â€œæ— é™ç»†åˆ†â€ï¼Œé€šè¿‡æ‹†åˆ†å¤æ‚åŠŸèƒ½æå‡ä»£ç å¤ç”¨æ€§å’Œç»´æŠ¤æ€§ã€‚ä½†ä¼ ç»Ÿå‰ç«¯ç»„ä»¶åŒ–ï¼ˆReact/Vueï¼‰å­˜åœ¨æ˜æ˜¾çš„é¢†åŸŸå±€é™ï¼šå…¶ä¸€ï¼Œä»…å±€é™äºå‰ç«¯UIé¢†åŸŸï¼Œæ— æ³•è·¨è¶Šå‰ç«¯è¾¹ç•Œï¼Œå®ç°ä¸åç«¯æœåŠ¡ã€ä¸šåŠ¡é€»è¾‘ã€ç”¨æˆ·è¡Œä¸ºçš„æ·±åº¦ååŒï¼›å…¶äºŒï¼Œè·¨åŸŸååŒéœ€è¦é¢å¤–çš„æ¥å£ã€çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œå¢åŠ äº†æ¶æ„å¤æ‚åº¦ï¼›å…¶ä¸‰ï¼Œå•ä¸€é¢†åŸŸçš„ç»„ä»¶åŒ–ç†è®ºéš¾ä»¥å¤„ç†å…¨æ ˆåœºæ™¯çš„éœ€æ±‚ï¼Œå¯¼è‡´è®¾è®¡è¿‡åº¦å¤æ‚ï¼Œåè€Œé™ä½äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p>Ooderæå‡ºâ€œè·¨é¢†åŸŸçš„åµŒå¥—ç»„ä»¶åŒ–â€è®¾è®¡ï¼Œä¸React/Vueçš„ç»„ä»¶åŒ–å­˜åœ¨æ˜æ˜¾å·®å¼‚ã€‚äºŒè€…çš„æœ¬è´¨åŒºåˆ«ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-14">å·®å¼‚è§£æï¼šæ ¸å¿ƒåœ¨äºâ€œè·¨é¢†åŸŸååŒâ€ä¸â€œA2UIé€‚é…æ€§â€</h3>
<p>Ooderçš„åµŒå¥—ç»„ä»¶åŒ–ä¸React/Vueçš„å‰ç«¯ç»„ä»¶åŒ–å­˜åœ¨æœ¬è´¨å·®å¼‚ï¼Œè¿™ç§å·®å¼‚è´¯ç©¿è®¾è®¡ç†å¿µã€å®ç°æœºåˆ¶ã€æ¸²æŸ“æ–¹å¼ç­‰æ ¸å¿ƒå±‚é¢ï¼Œå…·ä½“å¯¹æ¯”å¯æ‹†è§£ä¸ºå››ç‚¹ï¼š</p>
<ol>
<li><strong>è®¾è®¡ç†å¿µï¼šè·¨é¢†åŸŸååŒ vs å‰ç«¯å±€é™</strong>ï¼šOoderçš„ç»„ä»¶åŒ–æ˜¯â€œè·¨é¢†åŸŸâ€çš„ï¼Œçªç ´äº†å‰ç«¯UIçš„è¾¹ç•Œï¼Œæ”¯æŒå°†å‰ç«¯ç»„ä»¶ã€åç«¯æœåŠ¡ã€ä¸šåŠ¡é€»è¾‘ã€ç”¨æˆ·è¡Œä¸ºå°è£…ä¸ºç»Ÿä¸€çš„ç»„ä»¶å•å…ƒï¼Œå®ç°å¤šé¢†åŸŸçš„ååŒï¼›è€ŒReact/Vueçš„ç»„ä»¶åŒ–ä»…å±€é™äºå‰ç«¯UIé¢†åŸŸï¼Œåç«¯æœåŠ¡ã€ä¸šåŠ¡é€»è¾‘éœ€è¦é€šè¿‡å¤–éƒ¨æ¥å£å¯¹æ¥ï¼Œæ— æ³•ä¸ç»„ä»¶æ·±åº¦èåˆã€‚</li>
<li><strong>å®ç°æœºåˆ¶ï¼šæ¥å£+æ³¨è§£å£°æ˜å¼ vs æ¨¡æ¿/JSXå£°æ˜å¼</strong>ï¼šOoderé‡‡ç”¨â€œæ¥å£+æ³¨è§£â€çš„å£°æ˜å¼ç»„ä»¶è®¾è®¡ï¼Œé€šè¿‡å®šä¹‰ç»„ä»¶æ¥å£å’Œæ³¨è§£å±æ€§ï¼Œæ˜ç¡®ç»„ä»¶çš„è¡Œä¸ºã€æ ·å¼ã€å±æ€§ã€äº‹ä»¶ï¼ˆå››åˆ†ç¦»è®¾è®¡ï¼‰ï¼›è€ŒReact/Vueé‡‡ç”¨æ¨¡æ¿æˆ–JSXçš„å£°æ˜å¼è®¾è®¡ï¼Œç»„ä»¶çš„æ ·å¼ã€é€»è¾‘ã€å±æ€§å¾€å¾€æ··åˆåœ¨æ¨¡æ¿ä¸­ï¼Œåç«¯æ— æ³•æ„ŸçŸ¥ç»„ä»¶çš„å®Œæ•´å®šä¹‰ã€‚</li>
<li><strong>æ¸²æŸ“æ–¹å¼ï¼šé™æ€æ¨¡æ¿æ¸²æŸ“ vs åŠ¨æ€æ¸²æŸ“</strong>ï¼šOoderé‡‡ç”¨â€œåç«¯è¾“å‡ºJSON+å‰ç«¯æ¨¡æ¿æ¸²æŸ“â€çš„é™æ€æ¸²æŸ“æ–¹å¼ï¼Œåç«¯é€šè¿‡æ³¨è§£è§£æç”Ÿæˆæ ‡å‡†åŒ–çš„JSONæ•°æ®ï¼Œå‰ç«¯ä»…è´Ÿè´£æ ¹æ®JSONæ¸²æŸ“ç»„ä»¶ï¼Œé€»è¾‘ç›¸å¯¹ç®€å•ï¼›è€ŒReact/Vueé‡‡ç”¨åŠ¨æ€æ¸²æŸ“æ–¹å¼ï¼Œæ¨¡æ¿ä¸­åŒ…å«å¤§é‡é€»è¾‘åˆ¤æ–­ã€çŠ¶æ€ç»‘å®šï¼Œåç«¯æ— æ³•æ„ŸçŸ¥å‰ç«¯çš„æ¸²æŸ“é€»è¾‘ï¼Œå‰åç«¯ååŒæˆæœ¬é«˜ã€‚</li>
<li><strong>A2UIé€‚é…æ€§ï¼šå¤©ç„¶é€‚é… vs é¢å¤–é€‚é…</strong>ï¼šOoderçš„ç»“æ„åŒ–ç»„ä»¶è®¾è®¡ï¼ˆæ¥å£+æ³¨è§£ï¼‰ä¾¿äºå¤§æ¨¡å‹è§£æå’Œç”Ÿæˆï¼Œèƒ½å¤Ÿç›´æ¥æ¥æ”¶AIçš„æŒ‡ä»¤ç”Ÿæˆè·¨é¢†åŸŸç»„ä»¶ï¼›è€ŒReact/Vueçš„åŠ¨æ€æ¨¡æ¿è®¾è®¡éœ€è¦é¢å¤–çš„è½¬æ¢æœºåˆ¶ï¼Œæ‰èƒ½è®©AIç†è§£ç»„ä»¶çš„é€»è¾‘å’Œç»“æ„ï¼ŒA2UIé€‚é…æˆæœ¬é«˜ã€‚</li>
</ol>
<h3 data-id="heading-15">æŠ€æœ¯å–èˆï¼šå…¨æ ˆå¤ç”¨ä¸åŠ¨æ€çµæ´»æ€§çš„å¹³è¡¡</h3>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>çœŸæ­£å®ç°â€œæ— é™ç»†åˆ†â€çš„ç»„ä»¶åŒ–ç›®æ ‡ï¼Œè·¨é¢†åŸŸç»„ä»¶å¯åœ¨ä¸åŒé¡¹ç›®ã€ä¸åŒåœºæ™¯ä¸­å¤ç”¨ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ï¼›</li>
<li>ç»“æ„åŒ–è®¾è®¡å®Œç¾é€‚é…A2UIæ¨¡å¼ï¼Œä¸ºAIç”Ÿæˆå…¨æ ˆç»„ä»¶æä¾›äº†æ¸…æ™°çš„æŠ€æœ¯è½½ä½“ï¼Œé™ä½äº†è‡ªåŠ¨åŒ–å¼€å‘çš„éš¾åº¦ï¼›</li>
<li>å…¨æ ˆç»„ä»¶åŒ–æ¶ˆé™¤äº†å‰åç«¯ååŒçš„â€œå£å’â€ï¼Œè®©ç»„ä»¶åŒæ—¶åŒ…å«UIã€ä¸šåŠ¡ã€æ•°æ®é€»è¾‘ï¼Œå‡å°‘äº†æ¥å£é€‚é…ã€æ•°æ®æ ¡éªŒç­‰é‡å¤å·¥ä½œã€‚</li>
</ul>
<p><strong>å±€é™æ€§</strong>ï¼š</p>
<ul>
<li>å­¦ä¹ æ›²çº¿é™¡å³­ï¼Œå¼€å‘è€…éœ€è¦å…·å¤‡å…¨æ ˆæ€ç»´ï¼ŒåŒæ—¶æŒæ¡æ¥å£è®¾è®¡ã€æ³¨è§£ä½¿ç”¨ã€å‰åç«¯å¼€å‘ç­‰å¤šé¢†åŸŸçŸ¥è¯†ï¼›</li>
<li>åœ¨åŠ¨æ€äº¤äº’åœºæ™¯çš„çµæ´»æ€§ä¸Šä¸å¦‚React/Vueï¼Œå¯¹äºéœ€è¦é¢‘ç¹ä¿®æ”¹ç»„ä»¶é€»è¾‘ã€åŠ¨æ€è°ƒæ•´UIçš„åœºæ™¯ï¼Œå¼€å‘æ•ˆç‡è¾ƒä½ï¼›</li>
<li>ç»„ä»¶ç”Ÿæ€ç›¸å¯¹è–„å¼±ï¼Œç›¸æ¯”React/Vueä¸°å¯Œçš„å¼€æºç»„ä»¶åº“ï¼ŒOoderçš„å¯å¤ç”¨ç»„ä»¶èµ„æºè¾ƒå°‘ï¼Œå®šåˆ¶åŒ–å¼€å‘æˆæœ¬è¾ƒé«˜ã€‚</li>
</ul>
<h2 data-id="heading-16">æ€»ç»“ï¼šOoderæ¶æ„çš„æŠ€æœ¯å®šä½ä¸é€‚ç”¨åœºæ™¯</h2>
<p>æ·±å…¥æ¢³ç†Ooderæ¶æ„çš„è®¾è®¡é€»è¾‘ä¸éš¾å‘ç°ï¼šå…¶æ‰€æœ‰è®¾è®¡å–èˆï¼Œéƒ½å›´ç»•ç€â€œé€‚é…A2UIæ¨¡å¼â€â€œé™ä½å…¨æ ˆååŒæˆæœ¬â€è¿™ä¸¤ä¸ªæ ¸å¿ƒç›®æ ‡ã€‚å®ƒå¹¶éè¦æ›¿ä»£React/Vueç­‰ä¼ ç»Ÿå‰ç«¯æ¡†æ¶ï¼Œè€Œæ˜¯ä¸ºå¤§æ¨¡å‹æ—¶ä»£çš„å…¨æ ˆå¼€å‘æä¾›äº†ä¸€ç§å…¨æ–°çš„æŠ€æœ¯é€‰æ‹©ã€‚</p>
<p>ä»æŠ€æœ¯å®šä½æ¥çœ‹ï¼ŒOoderæ¶æ„æ›´é€‚åˆCNç¯å¢ƒä¸‹çš„ä¼ä¸šçº§åº”ç”¨å¼€å‘â€”â€”å°¤å…¶æ˜¯è¡¨å•å¯†é›†å‹ç³»ç»Ÿã€åå°ç®¡ç†ç³»ç»Ÿã€ä½ä»£ç /é›¶ä»£ç å¹³å°ç­‰åœºæ™¯ï¼Œå…¶A2UIé€‚é…æ€§å¼ºã€å…¨æ ˆååŒæ•ˆç‡é«˜çš„ä¼˜åŠ¿èƒ½å¤Ÿå¾—åˆ°å……åˆ†å‘æŒ¥ã€‚è€Œå¯¹äºéœ€è¦å¤æ‚åŠ¨æ€äº¤äº’ã€é«˜åº¦å®šåˆ¶åŒ–UIçš„åœºæ™¯ï¼ˆå¦‚Cç«¯åº”ç”¨ã€å¯è§†åŒ–å¤§å±ï¼‰ï¼ŒReact/Vueä»å…·å¤‡ä¸å¯æ›¿ä»£çš„ä¼˜åŠ¿ã€‚</p>
<p>å¯¹äºå¼€å‘å›¢é˜Ÿè€Œè¨€ï¼Œé€‰æ‹©Ooderæ¶æ„éœ€è¦æƒè¡¡å…¶æ ¸å¿ƒä¼˜åŠ¿ä¸è¿ç§»æˆæœ¬ï¼šå¦‚æœå›¢é˜Ÿèšç„¦ä¼ä¸šçº§Bç«¯å¼€å‘ï¼Œä¸”å¸Œæœ›å€ŸåŠ©A2UIæå‡å¼€å‘æ•ˆç‡ã€é™ä½å…¨æ ˆååŒæˆæœ¬ï¼Œé‚£ä¹ˆOoderæ¶æ„å€¼å¾—å°è¯•ï¼›å¦‚æœå›¢é˜Ÿé•¿æœŸæ·±è€•Cç«¯åœºæ™¯ï¼Œæˆ–å¯¹åŠ¨æ€äº¤äº’çµæ´»æ€§è¦æ±‚æé«˜ï¼Œåˆ™å»ºè®®ç»§ç»­æ²¿ç”¨React/Vueç”Ÿæ€ã€‚</p>
<p>ä»æŠ€æœ¯å‘å±•è¶‹åŠ¿æ¥çœ‹ï¼Œéšç€å¤§æ¨¡å‹æŠ€æœ¯çš„ä¸æ–­æˆç†Ÿå’ŒA2UIæ¨¡å¼çš„æ™®åŠï¼Œå…¨æ ˆä¸€ä½“åŒ–ã€æ³¨è§£é©±åŠ¨ã€è·¨é¢†åŸŸç»„ä»¶åŒ–å°†æˆä¸ºä¼ä¸šçº§å¼€å‘çš„é‡è¦æ¼”è¿›æ–¹å‘ã€‚Ooderæ¶æ„ä½œä¸ºè¿™ä¸€æ–¹å‘çš„å…ˆè¡Œè€…ï¼Œè™½ç„¶ä»é¢ä¸´ç”Ÿæ€å»ºè®¾ã€å·¥å…·æˆç†Ÿåº¦ç­‰æŒ‘æˆ˜ï¼Œä½†æœªæ¥å¯æœŸã€‚</p>
<p><strong>æŠ€æœ¯å®è·µå»ºè®®</strong>ï¼šå­¦ä¹ å’Œè½åœ°Ooderæ¶æ„ï¼Œå»ºè®®ä»ç®€å•çš„ä¼ä¸šçº§è¡¨å•ã€åå°ç®¡ç†é¡¹ç›®å…¥æ‰‹ï¼Œå…ˆæŒæ¡æ ¸å¿ƒæ³¨è§£ä½“ç³»å’Œæ··åˆæ¶æ„çš„åŸºæœ¬åŸç†ï¼›åŒæ—¶å…³æ³¨Ooderç”Ÿæ€çš„å‘å±•ï¼Œç§¯æå‚ä¸ç¤¾åŒºå»ºè®¾ï¼Œé€šè¿‡å®è·µç§¯ç´¯å¯å¤ç”¨çš„ç»„ä»¶å’Œè§£å†³æ–¹æ¡ˆã€‚å¯¹äºå›¢é˜Ÿè€Œè¨€ï¼Œå¯é‡‡ç”¨â€œæ¸è¿›å¼è¿ç§»â€ç­–ç•¥ï¼Œå…ˆå°†éƒ¨åˆ†æ ‡å‡†åŒ–æ¨¡å—ç”¨Ooderé‡æ„ï¼ŒéªŒè¯å…¶æ•ˆæœåå†é€æ­¥æ¨å¹¿ï¼Œé™ä½æŠ€æœ¯è¿ç§»é£é™©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢„å…ˆæ„å»ºçš„CNCFæµæ°´çº¿ï¼šä»Gitåˆ°åœ¨Kubernetesä¸Šè¿è¡Œ]]></title>    <link>https://juejin.cn/post/7587997893987893275</link>    <guid>https://juejin.cn/post/7587997893987893275</guid>    <pubDate>2025-12-26T13:58:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997893987893275" data-draft-id="7587632484427808819" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢„å…ˆæ„å»ºçš„CNCFæµæ°´çº¿ï¼šä»Gitåˆ°åœ¨Kubernetesä¸Šè¿è¡Œ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,äº‘è®¡ç®—"/> <meta itemprop="datePublished" content="2025-12-26T13:58:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AKAMAI"/> <meta itemprop="url" content="https://juejin.cn/user/829502942352628"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢„å…ˆæ„å»ºçš„CNCFæµæ°´çº¿ï¼šä»Gitåˆ°åœ¨Kubernetesä¸Šè¿è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/829502942352628/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AKAMAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T13:58:21.000Z" title="Fri Dec 26 2025 13:58:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Kubernetes ä¸ºå¤§è§„æ¨¡è¿è¡Œå®¹å™¨æä¾›äº†å¯èƒ½ï¼Œä½†å¹¶æœªä½¿å…¶å˜å¾—ç®€å•ã€‚</p>
<p>äº¤ä»˜ä¸€ä¸ªåº”ç”¨è¿œä¸æ­¢æ‰§è¡Œä¸€å¥ kubectl apply é‚£ä¹ˆç®€å•ã€‚åœ¨ä»£ç çœŸæ­£è§¦åŠé›†ç¾¤ä¹‹å‰ï¼Œéœ€è¦æ„å»ºé•œåƒã€æ‰«ææ¼æ´ã€ä¸²æ¥é…ç½®ã€å®æ–½ç­–ç•¥ã€ç»„è£…CI/CDæµæ°´çº¿ï¼Œå¹¶æ¥å…¥æ—¥å¿—ã€ç›‘æ§ä¸è¿½è¸ªä½“ç³»ã€‚æ¯ä¸€æ­¥éƒ½æ¶‰åŠå·¥å…·çš„é€‰å‹ã€é›†æˆï¼Œå¹¶åœ¨æŠ€æœ¯ç”Ÿæ€æŒç»­æ¼”è¿›ä¸­ç»´æŠ¤è¿™äº›é›†æˆçš„ç¨³å®šæ€§ã€‚</p>
<p>è¿™äº›äº‹å›ºç„¶èƒ½åšåˆ°ï¼Œå´å¼‚å¸¸ç¹çã€‚å®ƒä»¬ä¼šä¸æ–­åˆ†æ•£ä½ çš„ç²¾åŠ›ï¼Œè®©ä½ åç¦»çœŸæ­£çš„æ ¸å¿ƒç›®æ ‡ï¼šäº¤ä»˜å¯é è½¯ä»¶ï¼Œè€Œéä¸åº•å±‚å¹³å°ææ–—ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fproducts%2Fapp-platform%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_251226_external1_blogarticles239" target="_blank" title="https://www.akamai.com/zh/products/app-platform?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_251226_external1_blogarticles239" ref="nofollow noopener noreferrer">LKEçš„åº”ç”¨å¹³å°</a>é€šè¿‡ä¸€å¥—é¢„å…ˆè®¾è®¡ã€å®Œå…¨é›†æˆçš„æµæ°´çº¿æ¶ˆé™¤äº†è¿™ç±»è´Ÿæ‹…ã€‚è¯¥æµæ°´çº¿å®Œå…¨åŸºäºå¼€æºçš„äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCNCFï¼‰å·¥å…·æ„å»ºã€‚ä»å·¥ç¨‹å¸ˆå°†ä»£ç æäº¤è‡³Gitä»“åº“å¼€å§‹ï¼Œåˆ°åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒç¨³å®šè¿è¡Œç»“æŸâ€”â€”ç­–ç•¥ç®¡æ§ã€å®‰å…¨åˆè§„ä¸å¯è§‚æµ‹èƒ½åŠ›å‡å·²å†…ç½®å…¶ä¸­â€”â€”æ•´ä¸ªè¿‡ç¨‹è‡ªåŠ¨åŒ–è´¯é€šï¼Œå„ç¯èŠ‚æ— ç¼è¡”æ¥ï¼ŒçœŸæ­£åšåˆ°å¼€ç®±å³ç”¨ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥è§£æåº”ç”¨å¹³å°çš„è¿ä½œæœºåˆ¶ï¼Œå¹¶å±•ç¤ºå®ƒå¦‚ä½•å¤§å¹…ç®€åŒ–ä»ä»£ç æäº¤åˆ°ç”Ÿäº§ä¸Šçº¿çš„è·¯å¾„ã€‚</p>
<h4 data-id="heading-0"><strong><strong>åº”ç”¨å¹³å°å®ç°è‡ªåŠ¨åŒ–</strong></strong></h4>
<p>LKEçš„åº”ç”¨å¹³å°é€šè¿‡è‡ªåŠ¨æ„å»ºã€ä¿æŠ¤ã€éƒ¨ç½²å’Œç›‘æ§æ‚¨çš„å®¹å™¨åŒ–åº”ç”¨ä¸æœåŠ¡ï¼Œç®€åŒ–äº†ä»æºä»£ç åˆ°ç”Ÿäº§ç¯å¢ƒçš„å®Œæ•´åº”ç”¨ç”Ÿå‘½å‘¨æœŸã€‚å‡­å€Ÿå†…ç½®çš„é›†æˆæµæ°´çº¿ã€ç­–ç•¥å’Œå¯è§‚æµ‹æ€§ï¼Œå¹³å°å’ŒDevOpså›¢é˜Ÿè·å¾—äº†ç»Ÿä¸€æ ‡å‡†ä¸”åˆè§„çš„å·¥ä½œæµç¨‹ï¼Œå¯ä»¥å°†åº”ç”¨æŠ•å…¥ç”Ÿäº§ï¼Œè€Œæ— éœ€ç®¡ç†å¤æ‚çš„å·¥å…·é“¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c42757701b0437285c0b74b66485a0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUtBTUFJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362485&amp;x-signature=IGQUSJbHGEqzuhrsIUJqR%2F7t0js%3D" alt="" loading="lazy"/></p>
<p>ä¸ºäº†å±•ç¤ºåº”ç”¨å¹³å°æ¶ˆé™¤äº†å¤šå°‘å¤æ‚æ€§ï¼Œè®©æˆ‘ä»¬é€šè¿‡å…¶å†…ç½®é›†æˆåŠŸèƒ½ï¼Œé€æ­¥äº†è§£å®ƒç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–çš„10ä¸ªæ­¥éª¤ã€‚</p>
<p>è¿™10ä¸ªæ­¥éª¤åˆ†ä¸ºä¸‰å¤§ç±»ï¼š</p>
<ol>
<li>ä»£ç </li>
<li>ä»ä»£ç åˆ°ç”Ÿäº§</li>
<li>åº”ç”¨å‘å¸ƒâ€”â€”æš´éœ²ä¸å¯è§‚æµ‹æ€§</li>
</ol>
<h4 data-id="heading-1"><strong><strong>ä»£ç </strong></strong></h4>
<p><strong><strong>æ­¥éª¤ 1ï¼šç›‘å¬Gitäº‹ä»¶</strong></strong></p>
<p>åº”ç”¨å¹³å°ç›´æ¥è¿æ¥åˆ°æ‚¨çš„<strong><strong>Gitä»£ç ä»“åº“</strong></strong>ï¼Œå¹¶æŒç»­ç›‘æ§æ¥è‡ªç‰¹å®šåˆ†æ”¯çš„æäº¤å’Œæ‹‰å–è¯·æ±‚ã€‚å½“æ¨é€ä»£ç æ—¶ï¼Œå¹³å°ä¼šæ£€æµ‹åˆ°è¯¥äº‹ä»¶å¹¶è‡ªåŠ¨è§¦å‘æµæ°´çº¿ï¼Œæ— éœ€é…ç½®Webhookæˆ–æ‰‹åŠ¨è®¾ç½®CIã€‚</p>
<h4 data-id="heading-2"><strong><strong>ä»ä»£ç åˆ°ç”Ÿäº§</strong></strong></h4>
<p>è¿™æ˜¯é¢„é…ç½®å·¥å…·é“¾å‘æŒ¥æœ€å¤§ä»·å€¼çš„åœ°æ–¹ã€‚åœ¨ä¸€ä¸ªéœ€è¦è‡ªå·±åŠ¨æ‰‹æ­å»ºçš„å¹³å°ä¸­ï¼Œè¿æ¥è¿™äº›å·¥å…·éœ€è¦æ•°å‘¨çš„é›†æˆå·¥ä½œã€‚è€Œåœ¨è¿™é‡Œï¼Œå®ƒä»¬å¼€ç®±å³ç”¨ï¼ŒååŒå·¥ä½œã€‚</p>
<p><strong><strong>æ­¥éª¤ 2ï¼šä½¿ç”¨Grypeæ‰«ææºä»£ç </strong></strong></p>
<p>Grypeæ˜¯ä¸€ä¸ªé’ˆå¯¹å®¹å™¨é•œåƒå’Œæ–‡ä»¶ç³»ç»Ÿçš„æ¼æ´æ‰«æå™¨ï¼Œå¯è¯†åˆ«åº“ã€åŒ…å’Œæ¡†æ¶ä¸­çš„å·²çŸ¥é£é™©ã€‚</p>
<p>Grypeå·²åœ¨åº”ç”¨å¹³å°ä¸­é¢„å…ˆé…ç½®ï¼Œç”¨äºå¯¹ç…§CVEæ•°æ®åº“å’Œå®‰å…¨å…¬å‘Šè¿›è¡Œæ£€æŸ¥ï¼Œå¹¶åœ¨å·¥ä½œæµç¨‹æ—©æœŸæš´éœ²é—®é¢˜ã€‚å®ƒä¸ºå¼€å‘äººå‘˜æä¾›äº†æ›´å¿«çš„åé¦ˆï¼Œå¹¶åœ¨æ¼æ´è¿›å…¥æ„å»ºé˜¶æ®µä¹‹å‰é™ä½äº†ä¿®å¤æˆæœ¬ã€‚</p>
<p><strong><strong>æ­¥éª¤ 3ï¼šæ„å»ºé•œåƒ</strong></strong></p>
<p>ä¸€æ—¦æºä»£ç é€šè¿‡å®‰å…¨éªŒè¯ï¼Œå¹³å°ä¼šè‡ªåŠ¨ä½¿ç”¨æ ‡å‡†Dockerfileæˆ–Buildpacksæ„å»ºæ‚¨çš„å®¹å™¨é•œåƒã€‚æ„å»ºç¯å¢ƒç»è¿‡ä¼˜åŒ–ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åˆ†å±‚ç¼“å­˜ä»¥åŠ é€Ÿè¿­ä»£</li>
<li>æ”¯æŒå¤šé˜¶æ®µæ„å»ºï¼Œä»¥ç”Ÿæˆæ›´å°ã€æ›´é«˜æ•ˆçš„é•œåƒ</li>
<li>å†…ç½®èµ„æºé™åˆ¶ï¼Œé˜²æ­¢å¤±æ§çš„æ„å»º</li>
</ul>
<p>è¿™ç¡®ä¿äº†é•œåƒåˆ›å»ºçš„ä¸€è‡´æ€§å’Œå¯é‡å¤æ€§ï¼Œæ— éœ€é¢å¤–çš„é…ç½®æˆ–æµæ°´çº¿ç»´æŠ¤ã€‚</p>
<p><strong><strong>æ­¥éª¤ 4ï¼šä½¿ç”¨Harborå­˜å‚¨é•œåƒå¹¶ç”¨Trivyæ‰«æ</strong></strong></p>
<p>æ–°æ„å»ºçš„é•œåƒå°†å­˜æ”¾åœ¨å…¶ä¸“å±çš„ç§æœ‰å®¹å™¨æ³¨å†Œè¡¨ä¸­ï¼Œè¯¥æ³¨å†Œè¡¨ç”±Harboræä¾›â€”â€”ä¸€ä¸ªä¼ä¸šçº§å®¹å™¨æ³¨å†Œè¡¨ï¼Œé¢„å…ˆé…ç½®äº†åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€é•œåƒç­¾åå’Œä¿ç•™ç­–ç•¥ã€‚é•œåƒåˆ°è¾¾çš„ç¬é—´ï¼ŒTrivyå°±ä¼šå¯¹å®Œæ•´çš„å®¹å™¨è¿›è¡Œæ·±åº¦å®‰å…¨æ‰«æï¼šåŸºç¡€å±‚ã€æ“ä½œç³»ç»ŸåŒ…ã€åº”ç”¨ä¾èµ–é¡¹å’Œé…ç½®æ–‡ä»¶ã€‚</p>
<p>åº”ç”¨å¹³å°å°†Trivyé…ç½®ä¸ºæŒç»­æ‰«æï¼Œä¸ä»…é’ˆå¯¹åˆæ¬¡ä¸Šä¼ çš„é•œåƒï¼Œæ›´ä¼šåœ¨æ–°æ¼æ´æŠ«éœ²æ—¶ï¼Œè‡ªåŠ¨å¯¹ç°æœ‰é•œåƒé‡æ–°æ‰«æã€‚è¿™ç¡®ä¿èƒ½åŠæ—¶å‘ç°æ–°å¨èƒï¼Œè€Œæ— éœ€ä¾èµ–ä»»ä½•æ‰‹åŠ¨æ‰«æè®¡åˆ’ã€‚</p>
<p><strong><strong>æ­¥éª¤ 5ï¼šé€šè¿‡åº”ç”¨ç›®å½•â€”â€”é»„é‡‘è·¯å¾„æ¨¡æ¿åˆ›å»ºé…ç½®</strong></strong></p>
<p>åº”ç”¨å¹³å°ä½¿ç”¨åŸºäºKubernetesæœ€ä½³å®è·µé¢„å…ˆè®¾è®¡çš„é…ç½®æ¨¡æ¿ã€‚ä»è€Œå¤§å¹…å‡å°‘æ‰‹å·¥ç¼–å†™YAMLçš„å¤æ‚åº¦ï¼Œå¹¶æ”¯æŒåœ¨éœ€è¦æ—¶ä»å¯å¯¹é…ç½®è¿›è¡Œç»†åŒ–è°ƒæ•´ã€‚</p>
<p><strong><strong>æ­¥éª¤ 6ï¼šä½¿ç”¨Kyvernoæ£€æŸ¥å®‰å…¨ç­–ç•¥</strong></strong></p>
<p>åœ¨ä»»ä½•éƒ¨ç½²åˆ°è¾¾æ‚¨çš„é›†ç¾¤ä¹‹å‰ï¼Œé¢„å…ˆé…ç½®çš„Kyvernoä¼šå¼ºåˆ¶æˆ–å®¡è®¡å®‰å…¨ç­–ç•¥ã€‚å¼ºåˆ¶æ‰§è¡Œç­–ç•¥å°†é˜»æ­¢æ¸…å•è¢«éƒ¨ç½²ã€‚</p>
<p>è¿™äº›è§„åˆ™å¯ä»¥æ ¹æ®ç»„ç»‡éœ€æ±‚æˆ–æ·»åŠ æ¡†æ¶è¿›è¡Œè‡ªå®šä¹‰ï¼Œä½†é›†æˆæœ¬èº«å·²ç»å®Œæˆã€‚</p>
<p><strong><strong>æ­¥éª¤ 7ï¼šä½¿ç”¨Argo CDè¿›è¡Œéƒ¨ç½²</strong></strong></p>
<p>Argo CDåŸºäºGitOpsåŸåˆ™ç®¡ç†åˆ°Kubernetesé›†ç¾¤çš„éƒ¨ç½²ã€‚ç»è¿‡éªŒè¯çš„Gitæ¸…å•æˆä¸ºå”¯ä¸€äº‹å®æ¥æºï¼ŒArgo CDä¼šè‡ªåŠ¨åŒæ­¥é›†ç¾¤çŠ¶æ€ã€‚</p>
<p>åº”ç”¨å¹³å°å·²é¢„å…ˆé…ç½®Argo CDï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼šGitå˜æ›´æ—¶è‡ªåŠ¨åŒæ­¥ã€é›†ç¾¤çŠ¶æ€å˜åŒ–æ—¶è‡ªæˆ‘ä¿®å¤ï¼Œä»¥åŠéƒ¨ç½²å¤±è´¥æ—¶è‡ªåŠ¨å›æ»šã€‚</p>
<p><strong><strong>æ­¥éª¤ 8ï¼šä½¿ç”¨Trivyè¿›è¡Œè¿è¡Œæ—¶æ‰«æ</strong></strong></p>
<p>éƒ¨ç½²åï¼ŒTrivyä¼šå¯¹è¿è¡Œçš„å®¹å™¨è¿›è¡Œè¿è¡Œæ—¶æ‰«æï¼Œæ£€æŸ¥éƒ¨ç½²åå‡ºç°çš„æ¼æ´ä»¥åŠå¼•å…¥é£é™©çš„é…ç½®æ›´æ”¹ã€‚è¿™ç§è¿è¡Œæ—¶æ‰«æåœ¨åå°æŒç»­è¿è¡Œï¼Œä¸å½±å“åº”ç”¨æ€§èƒ½ã€‚</p>
<h4 data-id="heading-3"><strong><strong>åº”ç”¨å‘å¸ƒâ€”â€”æš´éœ²ä¸å¯è§‚æµ‹æ€§</strong></strong></h4>
<p><strong><strong>æ­¥éª¤ 9ï¼šä½¿ç”¨NGINXå’ŒIstioæš´éœ²æœåŠ¡</strong></strong></p>
<p>åº”ç”¨å¹³å°ä½¿ç”¨é¢„å…ˆé…ç½®çš„NGINX Ingress Controllerå’ŒIstioæœåŠ¡ç½‘æ ¼æ¥å¤„ç†æµé‡è·¯ç”±å’Œå®‰å…¨è¿æ¥ã€‚NGINXæä¾›å¤–éƒ¨å…¥å£ï¼Œå…·å¤‡è‡ªåŠ¨TLSè¯ä¹¦ç®¡ç†ã€é€Ÿç‡é™åˆ¶å’Œæµé‡è·¯ç”±è§„åˆ™ã€‚</p>
<p>Istioå¤„ç†é›†ç¾¤å†…çš„æœåŠ¡åˆ°æœåŠ¡é€šä¿¡ï¼Œé¢„å…ˆé…ç½®äº†åŒå‘TLSç”¨äºå®‰å…¨é€šä¿¡ã€ç”¨äºé‡‘ä¸é›€éƒ¨ç½²çš„æµé‡ç®¡ç†ä»¥åŠç”¨äºè°ƒè¯•å¾®æœåŠ¡çš„åˆ†å¸ƒå¼è¿½è¸ªã€‚</p>
<p><strong><strong>æ­¥éª¤ 10ï¼šä½¿ç”¨Prometheusç›‘æ§æœåŠ¡å¯ç”¨æ€§</strong></strong></p>
<p>PrometheusÂ æä¾›å¯è§‚æµ‹æ€§ï¼Œé¢„å…ˆé…ç½®ä¸ºä»æ‚¨çš„åº”ç”¨ã€KubernetesåŸºç¡€è®¾æ–½å’Œå¹³å°å·¥å…·ä¸­æŠ“å–æŒ‡æ ‡ã€‚æ‚¨å¯ä»¥ç«‹å³è·å¾—åº”ç”¨æ€§èƒ½ã€èµ„æºåˆ©ç”¨ç‡ã€é”™è¯¯ç‡å’Œå»¶è¿Ÿçš„å¯è§æ€§ã€‚</p>
<p>è¯¥é›†æˆåŒ…æ‹¬é¢„æ„å»ºçš„ä»ªè¡¨æ¿ã€é’ˆå¯¹å…³é”®é—®é¢˜çš„å‘Šè­¦è§„åˆ™ä»¥åŠä¸Â GrafanaÂ çš„è¿æ¥ä»¥è¿›è¡Œå¯è§†åŒ–ã€‚</p>
<h4 data-id="heading-4"><strong><strong>å¼€æºï¼Œæ— é”å®š</strong></strong></h4>
<p>æ­¤æµæ°´çº¿ä¸­çš„æ¯ä¸€ä¸ªå·¥å…·â€”â€”Â Grypeã€Â Harborã€Â Trivyã€Â Kyvernoã€Â Argo CDã€Â NGINXã€Istioå’Œ Prometheusâ€”â€”éƒ½ç›´æ¥æ¥è‡ªCNCFç”Ÿæ€ç³»ç»Ÿã€‚è¿™äº›ä¸æ˜¯ä¸“æœ‰çš„å®ç°æˆ–ä¾›åº”å•†çš„åˆ†æ”¯ï¼Œè€Œæ˜¯ç»è¿‡é…ç½®å’Œé›†æˆçš„å®é™…å¼€æºé¡¹ç›®ã€‚</p>
<p>åº”ç”¨å¹³å°å®Œæˆäº†æ‰€æœ‰çš„é›†æˆå’Œè‡ªåŠ¨åŒ–å·¥ä½œï¼Œä»¥åŠå·¥å…·çš„æŒç»­ç»´æŠ¤ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥ä¸“æ³¨äºåº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚</p>
<p>éƒ¨ç½²åˆ¶å“ä¿æŒå¯ç§»æ¤æ€§ã€‚Kubernetesæ¸…å•å¯ä»¥åœ¨ä»»ä½•é›†ç¾¤ä¸Šå·¥ä½œã€‚Harborä¸­çš„å®¹å™¨é•œåƒå¯ä»¥è¿ç§»åˆ°ä»»ä½•ç¬¦åˆå¼€æ”¾å®¹å™¨è®¡åˆ’ï¼ˆOCIï¼‰æ ‡å‡†çš„æ³¨å†Œè¡¨ã€‚Kyvernoç­–ç•¥æ˜¯æ ‡å‡†çš„YAMLæ–‡ä»¶ï¼Œåœ¨ä»»ä½•è¿è¡ŒKyvernoçš„åœ°æ–¹éƒ½æœ‰æ•ˆã€‚</p>
<p>åº”ç”¨å¹³å°é€šè¿‡é¢„å…ˆé…ç½®å’Œé›†æˆæ¥å¢åŠ ä»·å€¼ï¼Œè€Œä¸æ˜¯é€šè¿‡åˆ›å»ºé”å®šçš„ä¸“æœ‰æ‰©å±•ã€‚</p>
<h4 data-id="heading-5"><strong><strong>ä¸ºä»€ä¹ˆé¢„å…ˆè®¾è®¡å·¥å…·é“¾å¾ˆé‡è¦</strong></strong></h4>
<p>ä½¿ç”¨åº”ç”¨å¹³å°ä¸è‡ªè¡Œç»„è£…å·¥å…·ä¹‹é—´çš„åŒºåˆ«ï¼Œåœ¨äºå‰è€…å·²å°†æ·±åšçš„è¿ç»´çŸ¥è¯†æ²‰æ·€åœ¨é…ç½®ä¹‹ä¸­ã€‚æ¯ä¸ªå·¥å…·éƒ½åŒ…å«æ•°åä¸ªé…ç½®é€‰é¡¹ã€‚å•æ˜¯æ­£ç¡®é…ç½®å…¶ä¸­ä¸€é¡¹å·²éæ˜“äº‹ï¼Œè€Œè®©å®ƒä»¬ç¨³å®šååŒå·¥ä½œåˆ™æ›´æ˜¯éš¾ä¸ŠåŠ éš¾ã€‚</p>
<p>åº”ç”¨å¹³å°å°†è¿™äº›ç”Ÿäº§çº§Kuberneteséƒ¨ç½²ä¸­çš„æœ€ä½³å®è·µç¼–ç å›ºåŒ–ï¼šTrivyå¦‚ä½•ä¸Harboræ·±åº¦é›†æˆã€å“ªäº›Kyvernoç­–ç•¥èƒ½ç²¾å‡†æ•æ‰å…³é”®é£é™©ã€Argo CDå¦‚ä½•æ™ºèƒ½æ‰§è¡Œå›æ»šã€å“ªäº›PrometheusæŒ‡æ ‡çœŸæ­£å†³å®šç³»ç»Ÿå¥åº·ã€‚è¿™äº›é…ç½®å‡èšäº†æ•°ç™¾ä¸ªè¿ç»´æ—¥å¤œçš„å®æˆ˜ç²¾åï¼Œæœ€ç»ˆæµ“ç¼©ä¸ºä¸€ä¸ªå¼€ç®±å³ç”¨ã€ç¨³å®šå¯é çš„åŸºç¡€å¹³å°ã€‚</p>
<h4 data-id="heading-6"><strong><strong>ä»æ•°æœˆåˆ°åˆ†é’Ÿ</strong></strong></h4>
<p>è‹¥è¦è‡ªè¡Œæ„å»ºè¿™æ¡æµæ°´çº¿ï¼Œæ‚¨å°†ä¸å¾—ä¸å®Œæˆå·¥å…·é€‰å‹ã€ç³»ç»Ÿé›†æˆã€è¿æ¥è°ƒè¯•ä¸ç‰ˆæœ¬é€‚é…ç­‰ä¸€ç³»åˆ—å¤æ‚å·¥ä½œã€‚å¹³å°å›¢é˜Ÿé€šå¸¸éœ€æŠ•å…¥12è‡³18ä¸ªæœˆæ‰èƒ½è¾¾æˆç”Ÿäº§å°±ç»ªçŠ¶æ€ï¼Œæ­¤åè¿˜éœ€æŒç»­æŠ•å…¥èµ„æºè¿›è¡Œç»´æŠ¤ä¸å‡çº§ã€‚</p>
<p>è€Œåº”ç”¨å¹³å°è®©æ‚¨ä¸€é”®è·å¾—å®Œæ•´èƒ½åŠ›ï¼šå®‰å…¨æ‰«æè‡ªåŠ¨æ‰§è¡Œï¼Œéƒ¨ç½²æµç¨‹é€šè¿‡ç­–ç•¥éªŒè¯ï¼ŒæœåŠ¡ä»¥è§„èŒƒçš„æµé‡ç®¡ç†ç­–ç•¥å¯¹å¤–æš´éœ²ï¼Œç›‘æ§ç³»ç»Ÿæ— éœ€é…ç½®å³å¯å®æ—¶é‡‡é›†æŒ‡æ ‡ã€‚æ‚¨æ— éœ€è€—è´¹æ•°æœˆè¿›è¡Œå¹³å°æ­å»ºï¼Œåœ¨ç¬¬ä¸€å¤©å³å¯ç›´æ¥éƒ¨ç½²åº”ç”¨ç¨‹åºã€‚</p>
<h4 data-id="heading-7"><strong><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong></strong></h4>
<p>é€šè¿‡å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†è¶…è¿‡30ä¸ªKubernetesé¡¹ç›®çš„å¤æ‚æ›´æ–°ï¼Œåº”ç”¨å¹³å°å°†å·¥ç¨‹å›¢é˜Ÿä»ç¹é‡çš„ç»´æŠ¤å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ã€‚å®ƒç¡®ä¿æ‚¨çš„éƒ¨ç½²ä¸ä¸Šæ¸¸å¼€æºç‰ˆæœ¬è‡ªåŠ¨åŒæ­¥ï¼Œå®ç°äº†å¯æŒç»­çš„æŠ€æœ¯æ¼”è¿›ã€‚</p>
<p>æ‚¨çš„å›¢é˜Ÿæ— éœ€å†ä¸ºæ‰‹åŠ¨å‡çº§è€—è´¹ç²¾åŠ›ï¼Œè½¬è€Œäº«ç”¨ä¸€ä¸ªå§‹ç»ˆæœ€æ–°ã€å®Œå…¨å—æ§çš„å¹³å°ã€‚è¿™ä¸ä»…æ˜¾è‘—é™ä½äº†æŠ€æœ¯å€ºåŠ¡ï¼Œæ›´ä»ä½“ç³»ä¸Šä¿éšœäº†ä¸šåŠ¡çš„é•¿æœŸç¨³å®šè¿è¡Œã€‚</p>
<h4 data-id="heading-8"><strong><strong>å¼€å§‹ä½¿ç”¨</strong></strong></h4>
<p>LKEçš„åº”ç”¨å¹³å°è¿è¡Œåœ¨æ ‡å‡†çš„LKEåŸºç¡€è®¾æ–½ä¸Šï¼Œæ— éœ€é¢å¤–çš„è®¸å¯è´¹ç”¨ã€‚æ‚¨åªéœ€ä¸ºæ‚¨ä½¿ç”¨çš„Kubernetesèµ„æºä»˜è´¹ã€‚</p>
<p>æ³¨å†Œä»¥éƒ¨ç½²æ‚¨çš„ç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œæˆ–è€…é˜…è¯»æ–‡æ¡£ä»¥æ¢ç´¢å¹³å°æ¶æ„å¹¶äº†è§£å¦‚ä½•æ ¹æ®æ‚¨çš„éœ€æ±‚è‡ªå®šä¹‰å¹³å°ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.linode.com%2Fzh%2F%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_251226_external2_blogarticles239" target="_blank" title="https://www.linode.com/zh/?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_251226_external2_blogarticles239" ref="nofollow noopener noreferrer">æ³¨å†Œ</a>ä»¥åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªé›†ç¾¤</li>
<li>é˜…è¯»æ–‡æ¡£ä»¥æ¢ç´¢é›†æˆå·¥å…·å’ŒåŠŸèƒ½</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€éƒ¨ç½²é«˜å¯ç”¨MaxKBçŸ¥è¯†åº“åº”ç”¨]]></title>    <link>https://juejin.cn/post/7587776610436513807</link>    <guid>https://juejin.cn/post/7587776610436513807</guid>    <pubDate>2025-12-26T12:49:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587776610436513807" data-draft-id="7587743345197940788" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€éƒ¨ç½²é«˜å¯ç”¨MaxKBçŸ¥è¯†åº“åº”ç”¨"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T12:49:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€éƒ¨ç½²é«˜å¯ç”¨MaxKBçŸ¥è¯†åº“åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:49:19.000Z" title="Fri Dec 26 2025 12:49:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>MaxKBæ˜¯ä¸€æ¬¾åŸºäºRAGæŠ€æœ¯çš„å¼€æºçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿï¼Œæ”¯æŒå¯¹æ¥å¤šç§å¤§è¯­è¨€æ¨¡å‹ï¼Œå¹¿æ³›åº”ç”¨äºæ™ºèƒ½å®¢æœã€ä¼ä¸šçŸ¥è¯†åº“ç­‰åœºæ™¯ã€‚è™½ç„¶MaxKBç¤¾åŒºç‰ˆæä¾›äº†ä¾¿æ·çš„Dockerå¿«é€Ÿéƒ¨ç½²æ–¹å¼ï¼Œä½†ä¼ä¸šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­éœ€è¦æ›´é«˜çš„å¯é æ€§ã€å®‰å…¨æ€§å’Œè¿ç»´ä¾¿åˆ©æ€§ã€‚</p>
<p>æœ¬æ–‡ä»‹ç»å¦‚ä½•åŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€æ‰˜ç®¡æœåŠ¡æ„å»ºé«˜å¯ç”¨MaxKBåº”ç”¨æ¶æ„ã€‚æ–¹æ¡ˆé‡‡ç”¨AmazonECSè¿è¡Œå®¹å™¨åŒ–åº”ç”¨ï¼Œé…åˆRDS PostgreSQLï¼ˆå«pgvectoræ‰©å±•ï¼‰å’ŒElastiCache Valkeyæä¾›æ•°æ®æŒä¹…åŒ–å’Œç¼“å­˜èƒ½åŠ›ï¼Œé€šè¿‡Application Load Balancerå®ç°æµé‡åˆ†å‘å’Œå¤šå¯ç”¨åŒºéƒ¨ç½²ï¼Œç¡®ä¿99.9%ä»¥ä¸Šçš„æœåŠ¡å¯ç”¨æ€§ã€‚æ–¹æ¡ˆè¿˜é›†æˆäº†Secrets Managerè¿›è¡Œå¯†é’¥ç®¡ç†ï¼Œæ”¯æŒå¯¹æ¥Amazon Bedrockæ¨¡å‹æœåŠ¡ã€‚</p>
<p>æœ¬æ–‡é¢å‘éœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ä¼ä¸šçº§AIçŸ¥è¯†åº“çš„æ¶æ„å¸ˆå’Œè¿ç»´å·¥ç¨‹å¸ˆï¼Œæä¾›ä»æ¶æ„è®¾è®¡ã€æœåŠ¡é…ç½®åˆ°éƒ¨ç½²éªŒè¯çš„å®Œæ•´å®æ–½æŒ‡å—ã€‚</p>
<blockquote>
<p>ğŸ“¢é™æ—¶æ’æ’­ï¼šæ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚</p>
<p>â©å¿«å¿«ç‚¹å‡»è¿›å…¥ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-amazon-bedrock-first-experience%3Fvisitfrom%3D3P_Juejinhead_1223%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejinhead_1223" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-amazon-bedrock-first-experience?visitfrom=3P_Juejinhead_1223&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejinhead_1223" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹å®éªŒæ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote>
<h2 data-id="heading-1">æ–¹æ¡ˆä»·å€¼</h2>
<h3 data-id="heading-2">MaxKBæ ¸å¿ƒèƒ½åŠ›Â¹</h3>
<p>MaxKBæ˜¯åŸºäºRAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯çš„å¼€æºçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿï¼Œè‡ª2024å¹´4æœˆå‘å¸ƒä»¥æ¥ï¼Œå·²è·å¾—19,000+ GitHub Starsï¼Œå‘å±•ä¸ºä¼ä¸šçº§æ™ºèƒ½ä½“å¹³å°ã€‚å…¶æ ¸å¿ƒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¼€ç®±å³ç”¨çš„RAGé—®ç­”å¼•æ“</strong>ï¼šæ”¯æŒå¤šæ ¼å¼æ–‡æ¡£å¯¼å…¥ï¼ˆPDFã€Wordã€Markdownç­‰ï¼‰ï¼Œè‡ªåŠ¨æ–‡æ¡£è§£æã€æ–‡æœ¬åˆ†å—å’Œå‘é‡åŒ–å¤„ç†ï¼Œç­”æ¡ˆæ”¯æŒå¯Œæ–‡æœ¬å±•ç¤ºï¼ˆå›¾ç‰‡ã€è¡¨æ ¼ã€å›¾è¡¨ç­‰ï¼‰ï¼›</li>
<li><strong>å¤šæ¨¡å‹çµæ´»å¯¹æ¥</strong>ï¼šåŸºäºå¼€æºæ¶æ„ï¼Œæ”¯æŒå¯¹æ¥Amazon Bedrockæ‰˜ç®¡æ¨¡å‹åŠå›½å†…å¤–ä¸»æµå¤§è¯­è¨€æ¨¡å‹å’ŒEmbeddingæ¨¡å‹æœåŠ¡ï¼Œå…¼å®¹æ ‡å‡†APIæ¥å£ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚çµæ´»é€‰æ‹©å’Œåˆ‡æ¢ï¼›</li>
<li><strong>å·¥ä½œæµç¼–æ’</strong>ï¼šå†…ç½®å·¥ä½œæµå¼•æ“å’Œå‡½æ•°åº“ï¼Œæ”¯æŒMCPå·¥å…·è°ƒç”¨ï¼Œå¯ç¼–æ’å¤æ‚çš„AI Agentå¤„ç†æµç¨‹ï¼Œå®ç°å¤šæ­¥éª¤ä»»åŠ¡è‡ªåŠ¨åŒ–ï¼›</li>
<li><strong>å¿«é€Ÿé›†æˆ</strong>ï¼šæä¾›APIæ¥å£å’Œé›¶ç¼–ç åµŒå…¥æ–¹å¼ï¼Œå¯å¿«é€Ÿé›†æˆåˆ°ä¼ä¸šç°æœ‰ä¸šåŠ¡ç³»ç»Ÿæˆ–ç¬¬ä¸‰æ–¹ç³»ç»Ÿï¼Œé™ä½ä¼ä¸šå¼€å‘å’Œéƒ¨ç½²æˆæœ¬ã€‚</li>
</ul>
<p><strong>å…¸å‹åº”ç”¨åœºæ™¯</strong>ï¼šæ™ºèƒ½å®¢æœï¼ˆ7Ã—24å°æ—¶è‡ªåŠ¨é—®ç­”ï¼‰ã€ä¼ä¸šçŸ¥è¯†åº“ï¼ˆå†…éƒ¨çŸ¥è¯†ç®¡ç†å’Œæ£€ç´¢ï¼‰ã€æ™ºèƒ½åŠå…¬åŠ©æ‰‹ç­‰ã€‚</p>
<h3 data-id="heading-3">äºšé©¬é€Šäº‘ç§‘æŠ€æ‰˜ç®¡æ–¹æ¡ˆçš„å¢å¼ºä»·å€¼</h3>
<p>MaxKBç¤¾åŒºç‰ˆæä¾›åŸºäºDocker Composeçš„å¿«é€Ÿéƒ¨ç½²æ–¹å¼ï¼Œé€‚åˆå¼€å‘æµ‹è¯•å’Œå°è§„æ¨¡åº”ç”¨ã€‚ä½†åœ¨ä¼ä¸šç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé¢ä¸´å•ç‚¹æ•…éšœé£é™©ã€æ‰‹åŠ¨è¿ç»´è´Ÿæ‹…é‡ã€å®‰å…¨ç®¡ç†å¤æ‚ç­‰æŒ‘æˆ˜ã€‚æœ¬æ–¹æ¡ˆåŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€æ‰˜ç®¡æœåŠ¡ï¼Œæä¾›ä»¥ä¸‹ä¼ä¸šçº§å¢å¼ºèƒ½åŠ›ï¼š</p>
<h4 data-id="heading-4">1. ä¼ä¸šçº§é«˜å¯ç”¨æ€§</h4>
<ul>
<li><strong>å¤šå¯ç”¨åŒºæ¶æ„ã€å¯ç”¨æ€§SLAå¯è¾¾99.9%ä»¥ä¸Š</strong>ï¼šåº”ç”¨å±‚ï¼ˆECSï¼‰ã€æ•°æ®åº“å±‚ï¼ˆRDS Multi-AZï¼‰ã€ç¼“å­˜å±‚ï¼ˆElastiCacheï¼‰å‡é‡‡ç”¨è·¨å¤šå¯ç”¨åŒºéƒ¨ç½²ï¼ŒRDSä¸»èŠ‚ç‚¹æ•…éšœæ—¶60-120ç§’å†…è‡ªåŠ¨åˆ‡æ¢ï¼ŒALBè‡ªåŠ¨åˆ†å‘æµé‡å¹¶å‰”é™¤å¼‚å¸¸å®¹å™¨ï¼Œä¿éšœæ•´ä½“æ¶æ„å¯è¾¾99.9%ä»¥ä¸Šçš„æœåŠ¡å¯ç”¨æ€§ï¼Œæ»¡è¶³ä¼ä¸šçº§åº”ç”¨è¦æ±‚ï¼›</li>
</ul>
<h4 data-id="heading-5">2. å¼¹æ€§ä¼¸ç¼©èƒ½åŠ›</h4>
<ul>
<li><strong>åº”ç”¨å±‚è‡ªåŠ¨æ‰©ç¼©å®¹</strong>ï¼šé¢å¯¹ä¸šåŠ¡æµé‡æ³¢åŠ¨çš„åœºæ™¯éœ€æ±‚ï¼ŒECSå¯æ ¹æ®èµ„æºä½¿ç”¨ç‡æˆ–è¯·æ±‚æ•°é‡è§„åˆ™è‡ªåŠ¨è°ƒæ•´ä»»åŠ¡æ•°é‡ï¼›</li>
<li><strong>å‘é‡æŸ¥è¯¢åŠ é€Ÿ</strong>ï¼šRDS PostgreSQL + pgvectoræä¾›é«˜æ€§èƒ½å‘é‡æ£€ç´¢ï¼Œdb.r8g.16xlargeè§„æ ¼ä¸‹100å¹¶å‘å¯è¾¾æ¯«ç§’çº§å“åº”ï¼›</li>
<li><strong>ç¼“å­˜å±‚åœ¨çº¿æ‰©å±•</strong>ï¼šElastiCacheæ”¯æŒåœ¨çº¿æ·»åŠ èŠ‚ç‚¹ï¼Œæ— éœ€åœæœºå³å¯æå‡ç¼“å­˜å®¹é‡</li>
</ul>
<h4 data-id="heading-6">3. å®‰å…¨ä¸åˆè§„</h4>
<ul>
<li><strong>å¯†é’¥é›†ä¸­ç®¡ç†</strong>ï¼šSecrets Managerå®‰å…¨å­˜å‚¨æ•°æ®åº“å‡­è¯ã€APIå¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œæ”¯æŒè‡ªåŠ¨è½®æ¢ï¼Œé¿å…ç¡¬ç¼–ç é£é™©</li>
<li><strong>ç½‘ç»œéš”ç¦»</strong>ï¼šVPCç§æœ‰å­ç½‘éƒ¨ç½²æ•°æ®åº“å’Œç¼“å­˜ï¼Œä»…åº”ç”¨å±‚å¯è®¿é—®ï¼Œå…¬ç½‘ä¸å¯è¾¾</li>
<li><strong>ç»†ç²’åº¦æƒé™æ§åˆ¶</strong>ï¼šIAMè§’è‰²å’ŒSecurity Groupå®ç°æœ€å°æƒé™åŸåˆ™</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæœ¬æ–¹æ¡ˆç‰¹åˆ«é€‚åˆéœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ™ºèƒ½å®¢æœã€ä¼ä¸šçŸ¥è¯†åº“ç­‰AIåº”ç”¨çš„ä¸­å¤§å‹ä¼ä¸šï¼Œä»¥åŠå¯¹å¯ç”¨æ€§ã€å®‰å…¨æ€§ã€åˆè§„æ€§æœ‰è¾ƒé«˜è¦æ±‚çš„è¡Œä¸šå®¢æˆ·ï¼ˆå¦‚é‡‘èã€åŒ»ç–—ã€æ”¿åŠ¡ç­‰ï¼‰ã€‚</p>
<h2 data-id="heading-7">è§£å†³æ–¹æ¡ˆæ¦‚è¿°</h2>
<p>æœ¬è§£å†³æ–¹æ¡ˆå°†MaxKB Dockeræ‰˜ç®¡è¿è¡Œåœ¨äºšé©¬é€Šäº‘ç§‘æŠ€å®¹å™¨æœåŠ¡ECSä¸Šï¼Œå¹¶é…ç½®Amazon RDS for PostgresSQLå’ŒElastiCache Valkeyï¼ˆå…¼å®¹Redisï¼‰ï¼Œä½œä¸ºMaxKBçš„å¤–éƒ¨æ•°æ®åº“ï¼Œå®ç°MaxKBåº”ç”¨çš„é«˜å¯ç”¨æ¶æ„ã€‚</p>
<h3 data-id="heading-8">æ¶æ„è®¾è®¡</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-1.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-1.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33f096e2355240a68d42771d63dc0e54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=Z3YiVPR0uH7ySNT%2BnQk7zNA4nV8%3D" alt="" loading="lazy"/></a></p>
<ol>
<li>
<p>ç”¨æˆ·é€šè¿‡äº’è”ç½‘è¿æ¥åˆ°åº”ç”¨ç¨‹åºï¼Œæ‰€æœ‰è¯·æ±‚é¦–å…ˆé€šè¿‡Â <strong>Elastic Load Balancing</strong>Â æœåŠ¡ï¼Œç¡®ä¿æµé‡å‡åŒ€åˆ†å¸ƒå¹¶æé«˜ç³»ç»Ÿå¯ç”¨æ€§å’Œå®¹é”™èƒ½åŠ›ã€‚</p>
</li>
<li>
<p>è´Ÿè½½å‡è¡¡å™¨å°†æµé‡æ™ºèƒ½åˆ†é…åˆ°Â <strong>ECSé›†ç¾¤</strong>Â å†…çš„å¤šä¸ªÂ <strong>Service Frontend</strong>Â å®ä¾‹ï¼Œå®ç°è¯·æ±‚çš„é«˜æ•ˆå¤„ç†å’Œèµ„æºçš„åŠ¨æ€ä¼¸ç¼©ã€‚ECSé›†ç¾¤æä¾›å®¹å™¨åŒ–ç¯å¢ƒï¼Œä¾¿äºéƒ¨ç½²å’Œç®¡ç†åº”ç”¨æœåŠ¡ã€‚</p>
</li>
<li>
<p>åº”ç”¨ç¨‹åºå†…å¯ä»¥é…ç½®LLMæ¨¡å‹å’ŒEmbeddingæ¨¡å‹ï¼Œæ”¯æŒè®¿é—®Bedrock çš„æ¨¡å‹æœåŠ¡ï¼š</p>
<ul>
<li><strong>Bedrock LLM</strong>ï¼šæä¾›å¤§å‹è¯­è¨€æ¨¡å‹æœåŠ¡</li>
<li><strong>Bedrock Embedding</strong>ï¼šæä¾›æ–‡æœ¬åµŒå…¥æœåŠ¡</li>
</ul>
</li>
<li>
<p>ç³»ç»Ÿä¸Â <strong>Secrets Management</strong>Â æ¨¡å—é›†æˆï¼Œé€šè¿‡Â <strong>Secrets Manager</strong>Â å®‰å…¨å­˜å‚¨å’Œç®¡ç†åº”ç”¨æ‰€éœ€çš„å¯†é’¥ã€ä»¤ç‰Œã€å‡­è¯ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œç¡®ä¿ä¿¡æ¯ä¸è¢«ç¡¬ç¼–ç åˆ°åº”ç”¨ä¸­ã€‚</p>
</li>
<li>
<p>åº”ç”¨ç¨‹åºè¿æ¥åˆ°Â <strong>RDS PostgreSQL</strong>Â æ•°æ®åº“æœåŠ¡ï¼ŒPostgreSQLæä¾›äº†å¼ºå¤§çš„å…³ç³»å‹æ•°æ®åº“åŠŸèƒ½ï¼›åŒæ—¶åœ¨æ•°æ®åº“å®‰è£…äº†pgvectorï¼Œä½¿æ‚¨èƒ½å¤Ÿç›´æ¥åœ¨PostgreSQL æ•°æ®åº“ä¸­é«˜æ•ˆåœ°å­˜å‚¨ã€æ“ä½œå’Œåˆ†æå‘é‡æ•°æ®ã€‚</p>
</li>
<li>
<p>æ¶æ„å¼•å…¥äº†<strong>Amazon ElastiCache for Valkey</strong>Â ç¼“å­˜å±‚ï¼ˆå…¼å®¹Redis 8.0ï¼‰ï¼Œç”¨äºå­˜å‚¨é¢‘ç¹è®¿é—®çš„æ•°æ®ï¼Œå‡å°‘æ•°æ®åº“è´Ÿè½½å¹¶æé«˜åº”ç”¨å“åº”é€Ÿåº¦ã€‚</p>
</li>
</ol>
<h3 data-id="heading-9">äºšé©¬é€Šäº‘ç§‘æŠ€æ‰˜ç®¡æ•°æ®åº“çš„äº§å“ä¼˜åŠ¿</h3>
<h4 data-id="heading-10">Amazon RDS for PostgresSQL</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Frds%2Fpostgresql%2Fwhat-is-postgresql%2F" target="_blank" title="https://aws.amazon.com/cn/rds/postgresql/what-is-postgresql/" ref="nofollow noopener noreferrer">PostgreSQL</a>Â æ˜¯è®¸å¤šä¼ä¸šå¼€å‘äººå‘˜å’Œä¼ä¸šçš„é¦–é€‰<a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fproducts%2Fdatabases%2Fopen-source-databases%2F" target="_blank" title="https://aws.amazon.com/cn/products/databases/open-source-databases/" ref="nofollow noopener noreferrer">å¼€æº</a>å…³ç³»æ•°æ®åº“ï¼Œä¸ºé¢†å…ˆçš„å•†ç”¨å’Œç§»åŠ¨åº”ç”¨ç¨‹åºæä¾›åŠ©åŠ›ã€‚Amazon RDS è®©ç”¨æˆ·èƒ½å¤Ÿæ›´è½»æ¾åœ°åœ¨äº‘ä¸­è®¾ç½®ã€æ“ä½œå’Œæ‰©å±• PostgreSQL éƒ¨ç½²ã€‚å€ŸåŠ© Amazon RDSï¼Œæ‚¨å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…å®Œæˆå¯æ‰©å±•çš„ PostgreSQL éƒ¨ç½²ï¼Œä¸ä»…ç»æµå®æƒ ï¼Œè€Œä¸”å¯ä»¥è°ƒæ•´ç¡¬ä»¶å®¹é‡ã€‚Amazon RDS é™¤äº†å…·å¤‡æ‰˜ç®¡çš„ä¼˜åŠ¿å¤–ï¼Œé’ˆå¯¹çŸ¥è¯†åº“åº”ç”¨åœºæ™¯ä¹Ÿæœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ï¼š<br/>
<strong>1.è·¨AZå¼ºä¸€è‡´ï¼Œä¿è¯ä¸»å¤‡æ•°æ®ä¸€è‡´æ€§</strong><br/>
Amazon RDSÂ  Multi-AZ éƒ¨ç½²æ¶æ„åœ¨å­˜å‚¨å±‚EBSé‡‡ç”¨ç‰©ç†åŒæ­¥å¤åˆ¶æœºåˆ¶ï¼Œä¸»èŠ‚ç‚¹å†™å…¥æ“ä½œåŒæ­¥åˆ°å¤‡èŠ‚ç‚¹åæ‰è¿”å›ç¡®è®¤ï¼Œç¡®ä¿æ•°æ®é›¶ä¸¢å¤±ï¼Œæ»¡è¶³çŸ¥è¯†åº“æ•°æ®å®Œæ•´æ€§è¦æ±‚ã€‚</p>
<p><strong>2.è‡ªåŠ¨failoverï¼Œä¿è¯ç³»ç»Ÿå¯ç”¨æ€§</strong><br/>
å½“Amazon RDS ä¸»èŠ‚ç‚¹æ•…éšœæ—¶ï¼ŒMulti-AZæ”¯æŒè‡ªåŠ¨failoveråˆ°å¤‡èŠ‚ç‚¹ï¼Œæ•…éšœè½¬ç§»æ—¶é—´é€šå¸¸åœ¨ 60-120 ç§’å†…å®Œæˆï¼Œåº”ç”¨ç¨‹åºè‡ªåŠ¨é‡è¿ï¼Œæ— éœ€äººå·¥å¹²é¢„ï¼Œæä¾› 99.95% çš„å¯ç”¨æ€§ SLAã€‚</p>
<p><strong>3.vectorå‘é‡æŸ¥è¯¢æ€§èƒ½é«˜ï¼Œè¯»æ€§èƒ½æ¨ªå‘æ‰©å±•</strong><br/>
PostgreSQL æ”¯æŒ pgvector æ‰©å±•ï¼Œåœ¨æ»¡è¶³OLTPæ•°æ®åº“æ­£å¸¸çš„ä¸šåŠ¡éœ€æ±‚ä¹‹å¤–è¿˜å¯ä»¥æä¾›å‘é‡å­˜å‚¨å’Œé«˜å¹¶å‘æ£€ç´¢çš„èƒ½åŠ›ï¼Œæ»¡è¶³å¤šæ¨¡æ€ä¸šåŠ¡éœ€æ±‚ï¼Œå¦å¤–RDSåªè¯»å‰¯æœ¬å¯ä»¥è¿›è¡Œåœ¨çº¿æ‰©å±•ï¼Œæ”¯æŒæœ€å¤š 15 ä¸ªåªè¯»å‰¯æœ¬ã€‚åœ¨10TBä»¥å†…ï¼Œå¹¶ä¸”æœ‰é«˜QPSéœ€æ±‚çš„åœºæ™¯ä¸‹ï¼Œæ€§ä»·æ¯”ä¼˜äºElasticsearchå’ŒMilvusã€‚<br/>
å¦‚ä¸‹æ˜¯åœ¨Amazon RDS for PostgreSQLÂ db.r8g.16xlargeè§„æ ¼ä¸‹ä½¿ç”¨VectorDBBenchè¿›è¡Œ100å¹¶å‘çº¿ç¨‹è¿›è¡Œå‹æµ‹ï¼Œæ¯æ¬¡å‹æµ‹æ—¶é•¿300sï¼Œåˆ†åˆ«åœ¨Performance768D1Må’ŒPerformance768D10Mä¸¤ç§æ•°æ®é›†ä¸‹ï¼Œä¸åŒef_searchä¸‹çš„æ€§èƒ½è¡¨ç°ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-2.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-2.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70b5d4f3d4a744a8b4ecbb248ecc166c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=B8NvjJmAB2C%2F%2B6QNtW%2Bf%2FnP%2Bk5s%3D" alt="" loading="lazy"/></a></p>
<h4 data-id="heading-11">ElastiCache forÂ Valkey</h4>
<p>Valkey æ˜¯ç”± Linux åŸºé‡‘ä¼šæ”¯æŒçš„å¼€æºç¼“å­˜æ•°æ®åº“ï¼Œä¿è¯äº†vendorçš„ä¸­ç«‹æ€§ï¼Œè¿‡å»6ä¸ªæœˆï¼Œæœ‰50å¤šä¸‡æ¬¡container pullä»£ç ï¼Œå‡ åƒä¸ªè´¡çŒ®ï¼Œä»¥åŠ40å¤šå®¶å…¬å¸çš„æ”¯æŒã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä½œä¸ºValkeyçš„ä¸»è¦è´¡çŒ®ä¹‹ä¸€ï¼ŒElastiCache forÂ Valkeyä¸ä»…ç»™å®¢æˆ·å¸¦æ¥ç¨³å®šçš„æ–¹æ¡ˆï¼Œä¹Ÿèƒ½ä¿è¯ValkeyæŒç»­çš„åˆ›æ–°ã€‚ElastiCache forÂ Valkeyçš„ä¸»è¦ä¼˜åŠ¿å¦‚ä¸‹ï¼š</p>
<p><strong>æ€§ä»·æ¯”æå‡</strong></p>
<ol>
<li>å•ç‚¹å¤„ç†èƒ½åŠ›å¢å¼ºï¼Œé‡‡ç”¨IOçº¿ç¨‹å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œååé‡å¢åŠ 72%å’ŒP99 è€—æ—¶é™ä½71%ï¼Œå¯ä»¥è¾¾åˆ°1.2M QPSè¯»å–æ€§èƒ½ï¼Œç”¨æˆ·å¯ä»¥ç”¨æ›´å°‘èŠ‚ç‚¹æ•°é‡æˆ–è€…æ›´å°æœºå‹æ¥æ”¯æ’‘åŒæ ·è§„æ¨¡åº”ç”¨ã€‚</li>
<li>æ‰˜ç®¡çš„ElastiCache for Valkey 8.0ä¼˜åŒ–äº†å†…å­˜ç»“æ„ï¼Œå•èŠ‚ç‚¹ä¸Šå¯ä»¥å­˜å‚¨æ›´å¤šçš„æ•°æ®ï¼ˆç›¸åŒæ•°æ®å­˜å‚¨ç©ºé—´å ç”¨å‡å°‘20%ï¼‰ã€‚</li>
</ol>
<p><strong>å®¢æˆ·ç«¯å…¼å®¹æ€§é«˜</strong></p>
<ol>
<li>å·²æœ‰å®¢æˆ·ç«¯è®¿é—®Valkeyï¼Œæ¥å£å’Œredis 7.2 å…¼å®¹ï¼Œjedisã€redis-benchmarkã€redisclusterã€K6ç­‰ã€‚</li>
<li>Valkey-glideä½œä¸ºäºšé©¬é€Šäº‘ç§‘æŠ€è´¡çŒ®çš„å¼€æºå®¢æˆ·ç«¯ï¼Œä¸python/Java/node.js/golang å¤šç§å®¢æˆ·ç«¯æä¾›ä¸€è‡´èƒ½åŠ›ï¼Œæ”¯æŒæ›´å¥½failoverä»¥åŠè¿æ¥æ± ç®¡ç†ç­‰ã€‚</li>
</ol>
<p><strong>å…¶ä»–å¢å¼º</strong></p>
<ol>
<li>Valkey8.0 ä¸»ä»å¤åˆ¶æ•ˆç‡å¤§å¹…æå‡ï¼ŒRDBå’Œå¤åˆ¶backlogçš„åŒé€šè·¯å®ç°ï¼Œå¯ä»¥åŠ å¿«syncé€Ÿåº¦ï¼Œå•ç‹¬è¿›ç¨‹å¤„ç†RDBå¤åˆ¶å¯ä»¥å‡å°‘å¯¹ä¸»èŠ‚ç‚¹å½±å“ã€‚</li>
<li>resharding é‡åˆ†ç‰‡æœŸé—´æŠ—ä¸»èŠ‚ç‚¹æ•…éšœèƒ½åŠ›å¢å¼ºã€‚</li>
<li>æä¾›slotçº§åˆ«æŒ‡æ ‡ï¼Œæä¾›æ›´å¥½å¯è§‚æµ‹æ€§ã€‚</li>
</ol>
<h2 data-id="heading-12">MaxKB on Amazonè§£å†³æ–¹æ¡ˆéƒ¨ç½²æŒ‡å—</h2>
<h3 data-id="heading-13">éƒ¨ç½²è¦æ±‚</h3>
<p>MaxKBåº”ç”¨éƒ¨ç½²è¦æ±‚åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ“ä½œç³»ç»Ÿï¼šUbuntu 22.04 / CentOS 7ï¼ˆå†…æ ¸ç‰ˆæœ¬è¦æ±‚ â‰¥ 3.10ï¼‰</li>
<li>CPU/å†…å­˜ï¼š4C/8GB ä»¥ä¸Š</li>
<li>ç£ç›˜ç©ºé—´ï¼š100GB</li>
<li>PostgrsSQLï¼š17.6ç‰ˆæœ¬</li>
<li>Redisï¼š8.0ç‰ˆæœ¬</li>
</ul>
<p>åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€éƒ¨ç½²ä¹‹å‰ï¼Œæ‚¨éœ€è¦æœ‰ä¸€ä¸ªå¯è®¿é—®çš„äºšé©¬é€Šäº‘ç§‘æŠ€è´¦æˆ·ï¼Œéƒ¨ç½²çš„ä¸»è¦èµ„æºåŒ…æ‹¬ï¼š</p>
<ul>
<li>Amazon VPC</li>
<li>Amazon RDS for postgreSQL</li>
<li>Amazon ElastiCache for Valkey</li>
<li>Amazon ECS</li>
<li>Amazon ALB</li>
</ul>
<h3 data-id="heading-14">CDKéƒ¨ç½²æ–¹å¼</h3>
<p>ä¸ºäº†ç®€åŒ–é«˜å¯ç”¨æ¶æ„çš„éƒ¨ç½²æµç¨‹ï¼Œæˆ‘ä»¬æä¾›äº†åŸºäºAmazon CDKï¼ˆCloud Development Kitï¼‰çš„ä¸€é”®éƒ¨ç½²ä»£ç å’Œè„šæœ¬ï¼šé€šè¿‡åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰çš„æ–¹å¼ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å¤„ç†èµ„æºé—´çš„ä¾èµ–å…³ç³»ï¼Œä¸€æ¡å‘½ä»¤å³å¯å®ŒæˆVPCã€RDSã€ElastiCacheã€ECSã€ALBç­‰æ‰€æœ‰ç»„ä»¶çš„åˆ›å»ºå’Œé…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨åœ¨æ§åˆ¶å°æ“ä½œå¤šä¸ªæœåŠ¡ï¼Œå¤§å¹…é™ä½éƒ¨ç½²å¤æ‚åº¦å’Œäººä¸ºé”™è¯¯ï¼Œæ˜¾è‘—æé«˜éƒ¨ç½²æˆåŠŸç‡å’Œè¿ç»´æ•ˆç‡ã€‚</p>
<p>ä»¥ä¸‹éƒ¨ç½²å‘½ä»¤è¯·åœ¨Linuxç¯å¢ƒè¿è¡Œã€‚</p>
<p><strong>1ã€ä»githubä¸‹è½½MaxKB-on-Amazonéƒ¨ç½²ä»£ç </strong></p>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ä¸‹è½½éƒ¨ç½²ä»£ç åŒ…ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">git <span class="hljs-built_in">clone</span> https://github.com/supinyu/sample-maxkb-on-aws.git
</code></pre>
<p><strong>2ã€å®‰è£…Docker</strong></p>
<pre><code class="hljs language-bash" lang="bash">sudo yum install docker python3-pip git npm -y

<span class="hljs-comment"># Configure Docker Components</span>
sudo systemctl <span class="hljs-built_in">enable</span> docker

sudo systemctl start docker

sudo usermod -aG docker <span class="hljs-variable">$USER</span>

newgrp docker
</code></pre>
<p><strong>3ã€å®‰è£…aws cdk</strong></p>
<pre><code class="hljs">sudo npm install -g aws-cdk
</code></pre>
<p><strong>4ã€å®‰è£…ç›¸å…³çš„npmåŒ…</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> 20251020-hex-cdk

npm install aws-cdk-lib
</code></pre>
<p><strong>5ã€è´¦å·ä¿¡æ¯åŠéƒ¨ç½²Region IDå¯¼å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­</strong></p>
<pre><code class="hljs language-ini" lang="ini">export <span class="hljs-attr">AWS_ACCOUNT_ID</span>=XXXXXXXXXXXX
export <span class="hljs-attr">AWS_REGION</span>=us-west-<span class="hljs-number">2</span>
</code></pre>
<p><strong>6ã€è¿›è¡ŒCDKéƒ¨ç½²</strong></p>
<pre><code class="hljs language-perl" lang="perl">cdk bootstrap aws:<span class="hljs-regexp">//</span>$AWS_ACCOUNT_ID/$AWS_REGION

cdk deploy HexRagCdkStack --<span class="hljs-keyword">require</span>-approval never
</code></pre>
<p>ä»¥ä¸Šéƒ¨ç½²è¿‡ç¨‹é€šå¸¸éœ€è¦15-20åˆ†é’Ÿï¼ŒCDKä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>åˆ›å»ºVPCå’Œå­ç½‘</li>
<li>é…ç½®å®‰å…¨ç»„è§„åˆ™</li>
<li>éƒ¨ç½²RDS PostgreSQLæ•°æ®åº“ï¼ˆå«pgvectoræ‰©å±•ï¼‰</li>
<li>éƒ¨ç½²ElastiCache Valkeyé›†ç¾¤</li>
<li>åˆ›å»ºECSé›†ç¾¤å’Œä»»åŠ¡å®šä¹‰</li>
<li>é…ç½®ALBè´Ÿè½½å‡è¡¡å™¨</li>
<li>è®¾ç½®Secrets Managerå¯†é’¥ç®¡ç†</li>
<li>é…ç½®è‡ªåŠ¨æ‰©å±•ç­–ç•¥</li>
</ul>
<p><strong>7ã€</strong> <strong>éªŒè¯éƒ¨ç½²</strong></p>
<p>éƒ¨ç½²å®Œæˆåï¼ŒCDKä¼šè¾“å‡ºALBçš„DNSåœ°å€ï¼Œé€šè¿‡è¯¥åœ°å€å³å¯è®¿é—®MaxKBåº”ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹</span>
<span class="hljs-attr">RagCdkStack.LoadBalancerDNS</span> = RagCdkStack-ALB-XXXXXXXXXX.us-west-<span class="hljs-number">2</span>.elb.amazonaws.com
</code></pre>
<p><strong>8ã€ç‰ˆæœ¬æ›´æ–°</strong></p>
<p>å¦‚éœ€æ›´æ–°MaxKBç‰ˆæœ¬ï¼ˆæ¯”å¦‚ä»maxkb-v2.1.1å‡çº§åˆ°maxkb-v2.x.xï¼‰ï¼Œåªéœ€ä¿®æ”¹Dockerfileä¸­å¯¹åº”çš„MaxKBé•œåƒç‰ˆæœ¬å·ï¼Œç„¶åé‡æ–°æ‰§è¡Œéƒ¨ç½²å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-php" lang="php">cdk deploy HexRagCdkStack â€”<span class="hljs-keyword">require</span>-approval <span class="hljs-keyword">never</span>
</code></pre>
<p>CDKä¼šè‡ªåŠ¨æ£€æµ‹å˜æ›´å¹¶ä»…æ›´æ–°å—å½±å“çš„èµ„æºï¼Œå®ç°é›¶åœæœºæ»šåŠ¨æ›´æ–°ã€‚</p>
<h2 data-id="heading-15">MaxKBåº”ç”¨æ•ˆæœ</h2>
<p>è¿™é‡Œæˆ‘ä»¬ä»¥ä¸€ä¸ªå¯¹è¯é—®ç­”åŠ©æ‰‹ä¸ºä¾‹ï¼Œæ¼”ç¤ºMaxKBçš„ä½¿ç”¨æ•ˆæœã€‚</p>
<h3 data-id="heading-16">æ”¯æŒBedrockæ¨¡å‹</h3>
<p>é¦–å…ˆéœ€è¦æ·»åŠ LLMæ¨¡å‹å’ŒEmbeddingæ¨¡å‹ï¼ŒMaxKB æ”¯æŒBedrockæ¨¡å‹ï¼Œå¯ä»¥åœ¨æ¨¡å‹é…ç½®é¡µé¢è¿›è¡Œæ·»åŠ ï¼Œå…·ä½“çš„æ“ä½œå¦‚ä¸‹ï¼š</p>
<p><strong>1ã€æ·»åŠ LLMæ¨¡å‹</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-3.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-3.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78d19796ef844306a84d9ffd31374631~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=iGiNXHRAP%2Bgvi%2FsZVQRkkR5Lmsc%3D" alt="" loading="lazy"/></a></p>
<p><strong>2ã€æ·»åŠ Embeddingæ¨¡å‹</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-4.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-4.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dce3e385eecd4734b0c645616f4ac617~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=BhXzvuu4teXVcfNd4gYqAkpAsL4%3D" alt="" loading="lazy"/></a></p>
<p><strong>3ã€çŸ¥è¯†åº“åˆ›å»º</strong></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºçŸ¥è¯†åº“</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-5.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-5.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ca4072cfa7b44d98dbccb2cd3c41b17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=UmIdHaFVIlUFiiXbFzPRZCSy75g%3D" alt="" loading="lazy"/></a></p>
<p><strong>4ã€ä¸Šä¼ éœ€è¦é—®ç­”çš„pdfæ–‡æ¡£</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-6.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-6.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cf31472460f4ee9bfcedd1248d0ec47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=V9JQwjAvWzFUPuJzMjOjvQchICg%3D" alt="" loading="lazy"/></a></p>
<p><strong>5ã€åˆ›å»ºçŸ¥è¯†åº“é—®ç­”åŠ©æ‰‹</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-7.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-7.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2478d207fe644690a022c1b80c96f9cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=zKklZvXxZjGGuQyHMeY4tiRmXWE%3D" alt="" loading="lazy"/></a></p>
<p>åœ¨åˆ›å»ºå¯¹è¯åŠ©æ‰‹é¡µé¢ï¼Œå¯ä»¥é…ç½®å¯¹è¯æµç¨‹ï¼ŒMaxKBå…·æœ‰çµæ´»çš„æµç¨‹é…ç½®åŠŸèƒ½ã€‚é…ç½®å®Œæˆï¼Œç”¨æˆ·å¯ä»¥é’ˆå¯¹å¯¹è¯æµç¨‹è¿›è¡Œè°ƒè¯•å’Œå‘å¸ƒã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-8.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-8.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f470212e4a134e4c90ce4dbec0791e45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=AsU7%2FiIPo5siz%2BIZJv9Bf8uCOO0%3D" alt="" loading="lazy"/></a></p>
<p>å¯¹è¯åŠ©æ‰‹å‘å¸ƒä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œç›¸å…³çš„é—®ç­”ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-9.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-9.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/876391d5bfb5430c8a125c10e79faa56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=x0DMJMAnoIIYSu%2FEN%2FTcT5VeqjM%3D" alt="" loading="lazy"/></a></p>
<p>åœ¨ç®¡ç†ç•Œé¢ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹ç›¸å…³çš„æ•°æ®è¿›è¡Œç»Ÿè®¡ç›‘æ§ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-10.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-10.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c5aeba0df8b411b894043b537692c4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=SMZhqhOWXqVlxIvymwRdYO9BfwE%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p>æœ¬æ–¹æ¡ˆé€šè¿‡å°†MaxKBç¤¾åŒºç‰ˆè¿ç§»éƒ¨ç½²åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æ‰˜ç®¡æœåŠ¡ä¸Šï¼Œæ„å»ºäº†é«˜å¯ç”¨ã€å¯æ‰©å±•çš„RAGçŸ¥è¯†åº“åº”ç”¨ï¼Œå®ç°äº†ä»å•æœºDockeréƒ¨ç½²å‘ä¼ä¸šçº§äº‘åŸç”Ÿæ¶æ„çš„è½¬å‹ï¼Œä¸ºä¼ä¸šçŸ¥è¯†ç®¡ç†å’Œæ™ºèƒ½é—®ç­”åœºæ™¯æä¾›äº†å®Œæ•´çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<p>[1] MaxKB on Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F1Panel-dev%2FMaxKB" target="_blank" title="https://github.com/1Panel-dev/MaxKB" ref="nofollow noopener noreferrer">github.com/1Panel-dev/â€¦</a><br/>
[2] MaxKBç¤¾åŒºç‰ˆä¸‹è½½ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcommunity.fit2cloud.com%2F%23%2Fproducts%2Fmaxkb%2Fdownloads" target="_blank" title="https://community.fit2cloud.com/#/products/maxkb/downloads" ref="nofollow noopener noreferrer">community.fit2cloud.com/#/products/â€¦</a><br/>
[3] MaxKBç¦»çº¿å®‰è£…æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmaxkb.cn%2Fdocs%2Fv2%2Finstallation%2Foffline_installtion%2F" target="_blank" title="https://maxkb.cn/docs/v2/installation/offline_installtion/" ref="nofollow noopener noreferrer">maxkb.cn/docs/v2/insâ€¦</a></p>
<p>*<em>å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</em></p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2571021434b4868a9726df313d6788c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=zZok5tiwKuJvpml6n%2B0cn6ObVFY%3D" alt="11.webp" loading="lazy"/></p>
<blockquote>
<p>æœ¬æœŸæœ€æ–°å®éªŒã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-amazon-bedrock-first-experience%3Fvisitfrom%3D3P_Juejintail_1223%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_1223" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-amazon-bedrock-first-experience?visitfrom=3P_Juejintail_1223&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_1223" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚æ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>â©ï¸[<a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-amazon-bedrock-first-experience%3Fvisitfrom%3D3P_Juejintail_1223%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_1223" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-amazon-bedrock-first-experience?visitfrom=3P_Juejintail_1223&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_1223" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿›å…¥å®éªŒ</a>] å³åˆ»å¼€å¯  AI å¼€å‘ä¹‹æ—…
æ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterç»„ä»¶å°è£…ï¼šè§†é¢‘æ’­æ”¾ç»„ä»¶å…¨å±€å°è£…]]></title>    <link>https://juejin.cn/post/7588028859540291610</link>    <guid>https://juejin.cn/post/7588028859540291610</guid>    <pubDate>2025-12-26T12:52:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588028859540291610" data-draft-id="7582777037864190002" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterç»„ä»¶å°è£…ï¼šè§†é¢‘æ’­æ”¾ç»„ä»¶å…¨å±€å°è£…"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter"/> <meta itemprop="datePublished" content="2025-12-26T12:52:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SoaringHeart"/> <meta itemprop="url" content="https://juejin.cn/user/3544481219481374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterç»„ä»¶å°è£…ï¼šè§†é¢‘æ’­æ”¾ç»„ä»¶å…¨å±€å°è£…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3544481219481374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SoaringHeart
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:52:52.000Z" title="Fri Dec 26 2025 12:52:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€éœ€æ±‚æ¥æº</h2>
<p>æœ€è¿‘è¦å¼€å‘ä¸€ä¸ªåœ¨çº¿è§†é¢‘æ’­æ”¾çš„åŠŸèƒ½ï¼Œæ¯æ¬¡å®æ—¶è·å–æ’­æ”¾ï¼Œæœ‰äº›å¡é¡¿å’Œåˆå§‹åŒ–æ…¢çš„é—®é¢˜ï¼Œå°±éšæ‰‹ä¼˜åŒ–ä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä½¿ç”¨ç¤ºä¾‹</h2>
<p>1ã€æ•°æ®æº</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VideoDetailsProvider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ChangeNotifier</span> </span>{

    <span class="hljs-comment">/// å½“å‰æ’­æ”¾ä¸­çš„</span>
    <span class="hljs-keyword">final</span> _videoModelController = <span class="hljs-type">StreamController</span>&lt;<span class="hljs-type">VideoDetailModel</span>?&gt;.broadcast();

    <span class="hljs-comment">/// å½“å‰æ’­æ”¾ä¸­ Stream&lt;VideoDetailModel&gt;</span>
    <span class="hljs-type">Stream</span>&lt;<span class="hljs-type">VideoDetailModel</span>?&gt; get videoModelStream =&gt; _videoModelController.stream;


    <span class="hljs-comment">/// ç‚¹å‡»ï¼ˆmodelä¸ä¸ºç©ºæ—¶æ’­æ”¾ï¼Œä¸ºç©ºæ—¶å…³é—­ï¼‰</span>
    sinkModelForVideoPlayer({required <span class="hljs-type">VideoDetailModel</span>? model}) {
      _videoModelController.add(model);
    }

}
</code></pre>
<p>2ã€æ˜¾ç¤ºæ’­æ”¾å™¨ç»„ä»¶</p>
<pre><code class="hljs language-php" lang="php">StreamBuilder&lt;VideoDetailModel<span class="hljs-meta">?&gt;</span>(
  stream: provider.videoModelStream,
  builder: (context, snapshot) {
    <span class="hljs-keyword">if</span> (snapshot.data == <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SizedBox</span>();
    }
    <span class="hljs-keyword">final</span> model = snapshot.data;
    <span class="hljs-keyword">if</span> (model?.isVideo != <span class="hljs-literal">true</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SizedBox</span>();
    }

    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">SafeArea</span>(
      <span class="hljs-attr">top</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">bottom</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">left</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">right</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">child</span>: <span class="hljs-title function_ invoke__">Container</span>(
        <span class="hljs-attr">decoration</span>: <span class="hljs-title function_ invoke__">BoxDecoration</span>(
          <span class="hljs-attr">color</span>: Colors.black,
        ),
        <span class="hljs-attr">child</span>: <span class="hljs-title function_ invoke__">AppVideoPlayer</span>(
          <span class="hljs-attr">key</span>: <span class="hljs-title function_ invoke__">Key</span>(model?.url ?? <span class="hljs-string">""</span>),
          <span class="hljs-attr">url</span>: model?.url ?? <span class="hljs-string">""</span>,
          <span class="hljs-attr">onFullScreen</span>: (value) async {
            <span class="hljs-keyword">if</span> (!value) {
              await Future.<span class="hljs-title function_ invoke__">delayed</span>(<span class="hljs-keyword">const</span> <span class="hljs-title function_ invoke__">Duration</span>(<span class="hljs-attr">milliseconds</span>: <span class="hljs-number">300</span>));//ç­‰å¾…æ—‹è½¬å®Œæˆ
              SystemChromeExt.<span class="hljs-title function_ invoke__">changeDeviceOrientation</span>(<span class="hljs-attr">isPortrait</span>: <span class="hljs-literal">true</span>);
            }
          },
          <span class="hljs-attr">onClose</span>: () {
            DLog.<span class="hljs-title function_ invoke__">d</span>(<span class="hljs-string">"close"</span>);
            provider.<span class="hljs-title function_ invoke__">sinkModelForVideoPlayer</span>(<span class="hljs-attr">model</span>: <span class="hljs-literal">null</span>);
          },
        ),
      ),
    );
  },
)
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€æºç </h2>
<h4 data-id="heading-3">1ã€AppVideoPlayer.dart</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">//</span>
<span class="hljs-comment">//  AppVideoPlayer.dart</span>
<span class="hljs-comment">//  flutter_templet_project</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  Created by shang on 2025/12/12 18:11.</span>
<span class="hljs-comment">//  Copyright Â© 2025/12/12 shang. All rights reserved.</span>
<span class="hljs-comment">//</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">'package:chewie/chewie.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/basicWidget/AppVideoPlayer/AppVideoPlayerService.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/extension/extension_local.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:video_player/video_player.dart'</span>;

<span class="hljs-comment">/// <span class="markdown">æ’­æ”¾å™¨</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppVideoPlayer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> AppVideoPlayer({
    <span class="hljs-keyword">super</span>.key,
    <span class="hljs-keyword">this</span>.controller,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.url,
    <span class="hljs-keyword">this</span>.autoPlay = <span class="hljs-keyword">true</span>,
    <span class="hljs-keyword">this</span>.looping = <span class="hljs-keyword">false</span>,
    <span class="hljs-keyword">this</span>.aspectRatio = <span class="hljs-number">16</span> / <span class="hljs-number">9</span>,
    <span class="hljs-keyword">this</span>.isPortrait = <span class="hljs-keyword">true</span>,
    <span class="hljs-keyword">this</span>.fullScreenVN,
    <span class="hljs-keyword">this</span>.onFullScreen,
    <span class="hljs-keyword">this</span>.onClose,
  });

  <span class="hljs-keyword">final</span> AppVideoPlayerController? controller;

  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> url;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> autoPlay;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> looping;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> aspectRatio;

  <span class="hljs-comment">/// <span class="markdown">è®¾å¤‡æ–¹å‘</span></span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> isPortrait;

  <span class="hljs-keyword">final</span> ValueNotifier&lt;<span class="hljs-built_in">bool</span>&gt;? fullScreenVN;

  <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-built_in">Function</span>(<span class="hljs-built_in">bool</span> isFullScreen)? onFullScreen;

  <span class="hljs-keyword">final</span> VoidCallback? onClose;

  <span class="hljs-meta">@override</span>
  State&lt;AppVideoPlayer&gt; createState() =&gt; _AppVideoPlayerState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_AppVideoPlayerState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">AppVideoPlayer</span>&gt; <span class="hljs-title">with</span> <span class="hljs-title">WidgetsBindingObserver</span>, <span class="hljs-title">AutomaticKeepAliveClientMixin</span> </span>{
  VideoPlayerController? _videoController;
  ChewieController? _chewieController;

  <span class="hljs-built_in">Duration</span> position = <span class="hljs-built_in">Duration</span>.zero;

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> dispose() {
    widget.controller?._detach(<span class="hljs-keyword">this</span>);
    WidgetsBinding.instance.removeObserver(<span class="hljs-keyword">this</span>);
    _onClose();
    <span class="hljs-comment">// ä¸é”€æ¯ VideoPlayerControllerï¼Œè®©å…¨å±€å¤ç”¨</span>
    <span class="hljs-comment">// _chewieController?.dispose();</span>
    <span class="hljs-keyword">super</span>.dispose();
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
    widget.controller?._attach(<span class="hljs-keyword">this</span>);
    WidgetsBinding.instance.addObserver(<span class="hljs-keyword">this</span>);
    WidgetsBinding.instance.addPostFrameCallback((_) {
      initPlayer();
    });
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> didChangeAppLifecycleState(AppLifecycleState state) {
    <span class="hljs-keyword">switch</span> (state) {
      <span class="hljs-keyword">case</span> AppLifecycleState.inactive:
      <span class="hljs-keyword">case</span> AppLifecycleState.hidden:
      <span class="hljs-keyword">case</span> AppLifecycleState.paused:
        {
          _chewieController?.pause();
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> AppLifecycleState.detached:
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> AppLifecycleState.resumed:
        {
          _chewieController?.play();
        }
        <span class="hljs-keyword">break</span>;
    }
  }

  Future&lt;<span class="hljs-keyword">void</span>&gt; initPlayer() <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// DLog.d(widget.url.split("/").last);</span>
    <span class="hljs-keyword">assert</span>(widget.url.startsWith(<span class="hljs-string">"http"</span>), <span class="hljs-string">"url é”™è¯¯"</span>);

    _videoController = <span class="hljs-keyword">await</span> AppVideoPlayerService.instance.getController(widget.url);

    _chewieController?.dispose();
    _chewieController = ChewieController(
      videoPlayerController: _videoController!,
      autoPlay: widget.autoPlay,
      looping: widget.looping,
      aspectRatio: widget.aspectRatio,
      autoInitialize: <span class="hljs-keyword">true</span>,
      allowFullScreen: <span class="hljs-keyword">true</span>,
      allowMuting: <span class="hljs-keyword">false</span>,
      showControlsOnInitialize: <span class="hljs-keyword">false</span>,
      <span class="hljs-comment">// customControls: const AppVideoControls(),</span>
    );

    _chewieController!.addListener(() {
      <span class="hljs-keyword">final</span> isFullScreen = _chewieController!.isFullScreen;
      widget.fullScreenVN?.value = isFullScreen;
      widget.onFullScreen?.call(isFullScreen);
      <span class="hljs-keyword">if</span> (isFullScreen) {
        DLog.d(<span class="hljs-string">"è¿›å…¥å…¨å±"</span>);
      } <span class="hljs-keyword">else</span> {
        DLog.d(<span class="hljs-string">"é€€å‡ºå…¨å±"</span>);
      }
    });
    <span class="hljs-keyword">if</span> (mounted) {
      setState(() {});
    }
  }

  Future&lt;<span class="hljs-keyword">void</span>&gt; _onClose() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (_videoController?.value.isPlaying == <span class="hljs-keyword">true</span>) {
      _videoController?.pause();
    }
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> didUpdateWidget(<span class="hljs-keyword">covariant</span> AppVideoPlayer oldWidget) {
    <span class="hljs-keyword">super</span>.didUpdateWidget(oldWidget);
    <span class="hljs-keyword">if</span> (oldWidget.url != widget.url) {
      initPlayer();
    }
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> didChangeDependencies() {
    <span class="hljs-keyword">super</span>.didChangeDependencies();

    <span class="hljs-comment">/// <span class="markdown">ğŸ”¥å±å¹•æ¨ªç«–åˆ‡æ¢æ—¶ rebuild Chewieï¼Œä½†ä¸ rebuild video</span></span>
    DLog.d([MediaQuery.of(context).orientation]);
    <span class="hljs-comment">// setState(() {});</span>
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">super</span>.build(context);
    <span class="hljs-keyword">if</span> (widget.url.startsWith(<span class="hljs-string">"http"</span>) != <span class="hljs-keyword">true</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> SizedBox();
    }

    <span class="hljs-keyword">if</span> (_chewieController == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Center(child: CircularProgressIndicator());
    }
    <span class="hljs-comment">// return Chewie(controller: _chewieController!);</span>
    <span class="hljs-keyword">return</span> Stack(
      children: [
        Positioned.fill(
          child: Chewie(
            controller: _chewieController!,
          ),
        ),
        Positioned(
          right: <span class="hljs-number">20</span>,
          top: <span class="hljs-number">10</span>,
          child: Container(
            <span class="hljs-comment">// decoration: BoxDecoration(</span>
            <span class="hljs-comment">//   color: Colors.red,</span>
            <span class="hljs-comment">//   border: Border.all(color: Colors.blue),</span>
            <span class="hljs-comment">// ),</span>
            child: buildCloseBtn(onTap: widget.onClose),
          ),
        ),
      ],
    );
  }

  Widget buildCloseBtn({VoidCallback? onTap}) {
    <span class="hljs-keyword">return</span> GestureDetector(
      behavior: HitTestBehavior.opaque,
      onTap: () {
        DLog.d(<span class="hljs-string">"buildCloseBtn"</span>);
        _onClose();
        <span class="hljs-keyword">if</span> (onTap != <span class="hljs-keyword">null</span>) {
          onTap();
          <span class="hljs-keyword">return</span>;
        }
        Navigator.pop(context);
      },
      child: Container(
        <span class="hljs-comment">// padding: EdgeInsets.all(6),</span>
        <span class="hljs-comment">// decoration: BoxDecoration(</span>
        <span class="hljs-comment">//   color: Colors.black54,</span>
        <span class="hljs-comment">//   shape: BoxShape.circle,</span>
        <span class="hljs-comment">//   border: Border.all(color: Colors.blue),</span>
        <span class="hljs-comment">// ),</span>
        child: <span class="hljs-keyword">const</span> Icon(Icons.close, color: Colors.white, size: <span class="hljs-number">24</span>),
      ),
    );
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> wantKeepAlive =&gt; <span class="hljs-keyword">true</span>;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppVideoPlayerController</span> </span>{
  _AppVideoPlayerState? _anchor;

  <span class="hljs-keyword">void</span> _attach(_AppVideoPlayerState anchor) {
    _anchor = anchor;
  }

  <span class="hljs-keyword">void</span> _detach(_AppVideoPlayerState anchor) {
    <span class="hljs-keyword">if</span> (_anchor == anchor) {
      _anchor = <span class="hljs-keyword">null</span>;
    }
  }

  VideoPlayerController? <span class="hljs-keyword">get</span> videoController {
    <span class="hljs-keyword">assert</span>(_anchor != <span class="hljs-keyword">null</span>);
    <span class="hljs-keyword">return</span> _anchor!._videoController;
  }

  ChewieController? <span class="hljs-keyword">get</span> chewieController {
    <span class="hljs-keyword">assert</span>(_anchor != <span class="hljs-keyword">null</span>);
    <span class="hljs-keyword">return</span> _anchor!._chewieController;
  }
}
</code></pre>
<h4 data-id="heading-4">2ã€AppVideoPlayerService.dart</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">//</span>
<span class="hljs-comment">//  AppVideoPlayerService.dart</span>
<span class="hljs-comment">//  flutter_templet_project</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  Created by shang on 2025/12/12 18:10.</span>
<span class="hljs-comment">//  Copyright Â© 2025/12/12 shang. All rights reserved.</span>
<span class="hljs-comment">//</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/extension/extension_local.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:quiver/collection.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:video_player/video_player.dart'</span>;

<span class="hljs-comment">/// <span class="markdown">è§†é¢‘æ’­æ”¾æ§åˆ¶å™¨å…¨å±€ç®¡ç†</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppVideoPlayerService</span> </span>{
  AppVideoPlayerService._();
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> AppVideoPlayerService _instance = AppVideoPlayerService._();
  <span class="hljs-keyword">factory</span> AppVideoPlayerService() =&gt; _instance;
  <span class="hljs-keyword">static</span> AppVideoPlayerService <span class="hljs-keyword">get</span> instance =&gt; _instance;

  <span class="hljs-comment">/// <span class="markdown">æ’­æ”¾å™¨å­—å…¸</span></span>
  LruMap&lt;<span class="hljs-built_in">String</span>, VideoPlayerController&gt; <span class="hljs-keyword">get</span> controllerMap =&gt; _controllerMap;
  <span class="hljs-comment">// final _controllerMap = &lt;String, VideoPlayerController&gt;{};</span>
  <span class="hljs-keyword">final</span> _controllerMap = LruMap&lt;<span class="hljs-built_in">String</span>, VideoPlayerController&gt;(maximumSize: <span class="hljs-number">10</span>);

  <span class="hljs-comment">/// <span class="markdown">æœ€æ–°ä½¿ç”¨æ’­æ”¾å™¨</span></span>
  VideoPlayerController? current;

  <span class="hljs-comment">/// <span class="markdown">æœ‰ç¼“å­˜æ§åˆ¶å™¨</span></span>
  <span class="hljs-built_in">bool</span> hasCtrl({<span class="hljs-keyword">required</span> <span class="hljs-built_in">String</span> url}) =&gt; _controllerMap[url] != <span class="hljs-keyword">null</span>;

  <span class="hljs-comment">/// <span class="markdown">æ˜¯ç½‘ç»œè§†é¢‘</span></span>
  <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> isVideo(<span class="hljs-built_in">String?</span> url) {
    <span class="hljs-keyword">if</span> (url?.isNotEmpty != <span class="hljs-keyword">true</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-keyword">final</span> videoUri = <span class="hljs-built_in">Uri</span>.tryParse(url!);
    <span class="hljs-keyword">if</span> (videoUri == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-keyword">final</span> videoExt = [<span class="hljs-string">'.mp4'</span>, <span class="hljs-string">'.mov'</span>, <span class="hljs-string">'.avi'</span>, <span class="hljs-string">'.wmv'</span>, <span class="hljs-string">'.flv'</span>, <span class="hljs-string">'.mkv'</span>, <span class="hljs-string">'.webm'</span>];
    <span class="hljs-keyword">final</span> ext = url.toLowerCase();
    <span class="hljs-keyword">final</span> result = videoExt.any((e) =&gt; ext.endsWith(e));
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-comment">/// <span class="markdown">è·å– VideoPlayerController</span></span>
  Future&lt;VideoPlayerController?&gt; getController(<span class="hljs-built_in">String</span> url, {<span class="hljs-built_in">bool</span> isLog = <span class="hljs-keyword">false</span>}) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">assert</span>(url.startsWith(<span class="hljs-string">"http"</span>), <span class="hljs-string">"å¿…é¡»æ˜¯è§†é¢‘é“¾æ¥,è¯·æ£€æŸ¥é“¾æ¥æ˜¯å¦åˆæ³•"</span>);
    <span class="hljs-keyword">final</span> vc = _controllerMap[url];
    <span class="hljs-keyword">if</span> (vc != <span class="hljs-keyword">null</span>) {
      current = vc;
      <span class="hljs-keyword">if</span> (isLog) {
        DLog.d([<span class="hljs-string">"ç¼“å­˜: <span class="hljs-subst">${vc.hashCode}</span>"</span>]);
      }
      <span class="hljs-keyword">return</span> vc;
    }

    <span class="hljs-keyword">final</span> videoUri = <span class="hljs-built_in">Uri</span>.tryParse(url);
    <span class="hljs-keyword">if</span> (videoUri == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-keyword">final</span> ctrl = VideoPlayerController.networkUrl(videoUri);
    <span class="hljs-keyword">await</span> ctrl.initialize();
    _controllerMap[url] = ctrl;
    current = ctrl;
    <span class="hljs-keyword">if</span> (isLog) {
      DLog.d([<span class="hljs-string">"æ–°å»º: <span class="hljs-subst">${_controllerMap[url].hashCode}</span>"</span>]);
    }
    <span class="hljs-keyword">return</span> ctrl;
  }

  <span class="hljs-comment">/// <span class="markdown">æ’­æ”¾</span></span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; play({<span class="hljs-keyword">required</span> <span class="hljs-built_in">String</span> url, <span class="hljs-built_in">bool</span> onlyOne = <span class="hljs-keyword">true</span>}) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">await</span> getController(url);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> e <span class="hljs-keyword">in</span> _controllerMap.entries) {
      <span class="hljs-keyword">if</span> (e.key == url) {
        <span class="hljs-keyword">if</span> (!e.value.value.isPlaying) {
          e.value.play();
        } <span class="hljs-keyword">else</span> {
          e.value.pause();
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (onlyOne) {
          e.value.pause();
        }
      }
    }
  }

  <span class="hljs-comment">/// <span class="markdown">æš‚åœæ‰€æœ‰è§†é¢‘</span></span>
  <span class="hljs-keyword">void</span> pauseAll() {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> e <span class="hljs-keyword">in</span> _controllerMap.entries) {
      e.value.pause();
    }
  }

  <span class="hljs-keyword">void</span> dispose(<span class="hljs-built_in">String</span> url) {
    _controllerMap[url]?.dispose();
    _controllerMap.remove(url);
  }

  <span class="hljs-keyword">void</span> disposeAll() {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> c <span class="hljs-keyword">in</span> _controllerMap.values) {
      c.dispose();
    }
    _controllerMap.clear();
  }
}
</code></pre>
<h2 data-id="heading-5">æœ€åã€æ€»ç»“</h2>
<p>1ã€æ’­æ”¾è§†é¢‘ç»„ä»¶å’Œè§†é¢‘åˆ—è¡¨æ˜¯åˆ†å¼€çš„ï¼Œé€šè¿‡ç›‘å¬ VideoPlayerController ä¿æŒçŠ¶æ€ï¼ˆæ’­æ”¾ï¼Œæš‚åœï¼‰ä¸€è‡´æ€§ï¼Œç±»ä¼¼ç½‘ç»œè§†é¢‘å°çª—å£æ’­æ”¾ã€‚</p>
<p>2ã€é€šè¿‡ AppVideoPlayerService å®ç°å…¨å±€ VideoPlayerController ç¼“å­˜ï¼Œæé«˜åˆå§‹åŒ–åŠ è½½é€Ÿåº¦ã€‚</p>
<p>3ã€é€šè¿‡ quiver çš„ LruMap å®ç°æœ€å¤§ç¼“å­˜æ•°æ§åˆ¶ï¼Œé˜²æ­¢å†…å­˜çˆ†ç‚¸ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshang1219178163%2Fflutter_templet_project%2Ftree%2Fv3.27.0%2Flib%2FbasicWidget%2FAppVideoPlayer" target="_blank" title="https://github.com/shang1219178163/flutter_templet_project/tree/v3.27.0/lib/basicWidget/AppVideoPlayer" ref="nofollow noopener noreferrer">github</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è·¨è¶Šè¿›ç¨‹çš„å¯¹è¯ä¹‹ä»ç®¡é“åˆ°gRPCçš„é€šä¿¡æŠ€æœ¯æ¼”è¿›]]></title>    <link>https://juejin.cn/post/7588007285546090502</link>    <guid>https://juejin.cn/post/7588007285546090502</guid>    <pubDate>2025-12-26T11:19:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285546090502" data-draft-id="7588001624904761363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è·¨è¶Šè¿›ç¨‹çš„å¯¹è¯ä¹‹ä»ç®¡é“åˆ°gRPCçš„é€šä¿¡æŠ€æœ¯æ¼”è¿›"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T11:19:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è·¨è¶Šè¿›ç¨‹çš„å¯¹è¯ä¹‹ä»ç®¡é“åˆ°gRPCçš„é€šä¿¡æŠ€æœ¯æ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T11:19:27.000Z" title="Fri Dec 26 2025 11:19:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ä¸€å°LinuxæœåŠ¡å™¨ä¸Šï¼Œä¸€ä¸ªç®€å•çš„ç®¡é“å‘½ä»¤ <code>cat README.md | grep rcore</code> èƒŒåï¼Œæ˜¯ä¸¤ä¸ªè¿›ç¨‹é€šè¿‡å†…æ ¸ä¸­è½¬çš„æ— ç¼åä½œï¼Œè¿™æ˜¯è¿›ç¨‹é—´é€šä¿¡æœ€åŸå§‹å´æœ‰æ•ˆçš„ä½“ç°ã€‚å½“è¿™ç§åä½œéœ€æ±‚ä»å•æœºæ‰©å±•åˆ°å…¨çƒåˆ†å¸ƒå¼ç³»ç»Ÿæ—¶ï¼Œæ¸¸æˆè§„åˆ™å½»åº•æ”¹å˜äº†ã€‚</p>
</blockquote>
<p>å½“æ“ä½œç³»ç»Ÿçš„ç®¡é“å°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥æ—¶ï¼Œä¸€ä¸ªJavaç¼–å†™çš„è®¢å•æœåŠ¡æ­£åœ¨é€šè¿‡gRPCè°ƒç”¨Goå®ç°çš„åº“å­˜æœåŠ¡ï¼Œæ£€æŸ¥å•†å“åº“å­˜ã€‚è™½ç„¶å®ƒä»¬åŒä¸ºè¿›ç¨‹é—´é€šä¿¡ï¼Œä½†å®ç°æ–¹å¼å’Œåº”ç”¨åœºæ™¯å·²ç»å‘ç”Ÿäº†æ ¹æœ¬æ€§å˜åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-0">01 è¿›ç¨‹é—´é€šä¿¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h2>
<p>æ“ä½œç³»ç»Ÿä¸­çš„è¿›ç¨‹å°±åƒç‹¬ç«‹è¿è¡Œçš„å²›å±¿ï¼Œæ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´å’Œè¿è¡Œç¯å¢ƒã€‚å½“è¿™äº›å²›å±¿éœ€è¦äº¤æ¢ä¿¡æ¯ã€åè°ƒè¡ŒåŠ¨æ—¶ï¼Œå°±éœ€è¦é€šè¿‡ç‰¹å®šçš„<strong>è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶</strong>ã€‚</p>
<p>è¿›ç¨‹é—´é€šä¿¡æ ¹æ®æ˜¯å¦éœ€è¦å†…æ ¸ä¸­è½¬ï¼Œå¯ä»¥åˆ†ä¸ºç›´æ¥é€šä¿¡å’Œé—´æ¥é€šä¿¡ã€‚</p>
<p>ä¼ ç»ŸIPCæœºåˆ¶å¤šç§å¤šæ ·ï¼Œå„æœ‰å…¶è®¾è®¡åˆè¡·å’Œä½¿ç”¨åœºæ™¯ã€‚ä¸‹è¡¨ä»é€šä¿¡æ–¹å¼ã€é€‚ç”¨èŒƒå›´å’Œå…¸å‹åœºæ™¯è§’åº¦å¯¹æ¯”äº†å‡ ç§ä¸»è¦æœºåˆ¶ï¼š</p>









































<table><thead><tr><th>IPCæœºåˆ¶</th><th>é€šä¿¡æ–¹å¼</th><th>é€‚ç”¨èŒƒå›´</th><th>å…¸å‹åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ä¿¡å·</td><td>å¼‚æ­¥å‘é€ä¿¡å·</td><td>å•æœºè¿›ç¨‹é—´</td><td>è¿›ç¨‹æ§åˆ¶ã€å¼‚å¸¸å¤„ç†</td></tr><tr><td>ç®¡é“/å‘½åç®¡é“</td><td>å•å‘å­—èŠ‚æµ</td><td>çˆ¶å­è¿›ç¨‹/ä»»æ„è¿›ç¨‹</td><td>Shellå‘½ä»¤ç»„åˆã€ç®€å•æ•°æ®ä¼ é€’</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>ç»“æ„åŒ–æ¶ˆæ¯ä¼ é€’</td><td>å•æœºè¿›ç¨‹é—´</td><td>æœ‰æ ¼å¼æ¶ˆæ¯ä¼ é€’ã€ä¼˜å…ˆçº§æ¶ˆæ¯å¤„ç†</td></tr><tr><td>å…±äº«å†…å­˜</td><td>å†…å­˜åŒºåŸŸå…±äº«</td><td>å•æœºè¿›ç¨‹é—´</td><td>å¤§é‡æ•°æ®å¿«é€Ÿå…±äº«</td></tr><tr><td>å¥—æ¥å­—</td><td>ç½‘ç»œå­—èŠ‚æµ</td><td>è·¨ç½‘ç»œè¿›ç¨‹é—´</td><td>ç½‘ç»œæœåŠ¡ã€åˆ†å¸ƒå¼ç³»ç»Ÿ</td></tr></tbody></table>
<p>è¿›ç¨‹çš„éš”ç¦»æ€§æ—¢æ˜¯æ“ä½œç³»ç»Ÿçš„å®‰å…¨ä¿éšœï¼Œä¹Ÿæˆä¸ºè¿›ç¨‹åä½œçš„å¤©ç„¶å±éšœã€‚ç›´æ¥å†…å­˜å…±äº«è™½ç„¶é«˜æ•ˆï¼Œä½†<strong>è·¨ç½‘ç»œåœºæ™¯å®Œå…¨å¤±æ•ˆ</strong>ã€‚</p>
<h2 data-id="heading-1">02 ä»å•æœºé€šä¿¡åˆ°åˆ†å¸ƒå¼è°ƒç”¨</h2>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿçš„å‘å±•å½»åº•æ”¹å˜äº†è¿›ç¨‹é—´é€šä¿¡çš„æ¸¸æˆè§„åˆ™ã€‚å½“è¿›ç¨‹ä¸å†å±€é™äºåŒä¸€å°ä¸»æœºï¼Œå½“é€šä¿¡åŒæ–¹å¯èƒ½ä½¿ç”¨ä¸åŒç¼–ç¨‹è¯­è¨€ç¼–å†™ï¼Œå½“ç½‘ç»œå»¶è¿Ÿæˆä¸ºä¸å¯å¿½è§†çš„å› ç´ æ—¶ï¼Œä¼ ç»ŸIPCæœºåˆ¶å°±æ˜¾å¾—åŠ›ä¸ä»å¿ƒäº†ã€‚</p>
<p>è¿™å°±æ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶å‡ºç°çš„èƒŒæ™¯ã€‚RPCçš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>è®©è¿œç¨‹æœåŠ¡è°ƒç”¨çœ‹èµ·æ¥åƒæœ¬åœ°å‡½æ•°è°ƒç”¨ä¸€æ ·ç®€å•</strong>ï¼Œéšè—åº•å±‚çš„ç½‘ç»œé€šä¿¡ç»†èŠ‚ã€‚</p>
<p>æ—©æœŸçš„RPCæ¡†æ¶å¦‚Sun RPCã€XML-RPCå’ŒJSON-RPCï¼Œè™½ç„¶è§£å†³äº†è·¨ç½‘ç»œè°ƒç”¨çš„é—®é¢˜ï¼Œä½†åœ¨æ€§èƒ½ã€ç±»å‹å®‰å…¨å’Œå¼€å‘ä½“éªŒæ–¹é¢å­˜åœ¨æ˜æ˜¾çŸ­æ¿ã€‚</p>
<p>ç‰¹åˆ«æ˜¯éšç€å¾®æœåŠ¡æ¶æ„çš„å…´èµ·ï¼ŒæœåŠ¡æ•°é‡å‘ˆæŒ‡æ•°çº§å¢é•¿ï¼ŒæœåŠ¡é—´çš„é€šä¿¡é¢‘ç‡å’Œå¤æ‚åº¦ä¹Ÿéšä¹‹å¢åŠ ã€‚è¿™éœ€è¦ä¸€ä¸ª<strong>ä¸“é—¨ä¸ºåˆ†å¸ƒå¼ç¯å¢ƒè®¾è®¡ã€é«˜æ•ˆä¸”å¯é çš„é€šä¿¡æ–¹æ¡ˆ</strong>ã€‚</p>
<h2 data-id="heading-2">03 gRPCçš„å‡ºç°</h2>
<p>gRPCæ­£æ˜¯ä¸ºäº†åº”å¯¹åˆ†å¸ƒå¼ç³»ç»ŸæŒ‘æˆ˜è€Œç”Ÿçš„ç°ä»£RPCæ¡†æ¶ã€‚å®ƒåŸºäºHTTP/2åè®®å’ŒProtocol Buffersåºåˆ—åŒ–æœºåˆ¶ï¼Œæä¾›äº†ä¸€å¥—å®Œæ•´çš„è·¨è¯­è¨€æœåŠ¡é€šä¿¡æ–¹æ¡ˆã€‚</p>
<p>ä»<strong>åè®®è®¾è®¡</strong>è§’åº¦æ¥çœ‹ï¼ŒgRPCå……åˆ†åˆ©ç”¨äº†HTTP/2çš„å…ˆè¿›ç‰¹æ€§ã€‚äºŒè¿›åˆ¶åˆ†å¸§å±‚å°†æ•°æ®åˆ†å‰²ä¸ºæ›´å°çš„å¸§ï¼Œé€šè¿‡å¤šè·¯å¤ç”¨å®ç°å¹¶è¡Œä¼ è¾“ï¼Œå½»åº•æ¶ˆé™¤äº†é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚</p>
<p>åœ¨å¾®æœåŠ¡é—´é¢‘ç¹è°ƒç”¨çš„åœºæ™¯ä¸­ï¼ŒHPACKå¤´éƒ¨å‹ç¼©ç®—æ³•å¯å‡å°‘50%ä»¥ä¸Šçš„å¤´éƒ¨å¼€é”€ï¼Œè¿™åœ¨å¤§é‡å°è¯·æ±‚çš„å¾®æœåŠ¡ç¯å¢ƒä¸­æ•ˆæœå°¤ä¸ºæ˜¾è‘—ã€‚</p>
<p><strong>è·¨è¯­è¨€æ”¯æŒ</strong>æ˜¯gRPCçš„å¦ä¸€å¤§äº®ç‚¹ã€‚é€šè¿‡ä»£ç ç”Ÿæˆæœºåˆ¶ï¼ŒgRPCæ”¯æŒ12ç§ä¸»æµç¼–ç¨‹è¯­è¨€ï¼Œä»Goã€Javaåˆ°Pythonã€C++ï¼Œéƒ½å¯ä»¥åŸºäºç›¸åŒçš„æ¥å£å®šä¹‰è¿›è¡Œå¼€å‘ã€‚</p>
<p>è¿™ç§è¯­è¨€æ— å…³æ€§æå¤§é™ä½äº†å¤šæŠ€æœ¯æ ˆå›¢é˜Ÿçš„åä½œæˆæœ¬ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå…¸å‹ç”µå•†ç³»ç»Ÿä¸­ï¼ŒJavaç¼–å†™çš„è®¢å•æœåŠ¡å¯ä»¥æ— ç¼è°ƒç”¨Goå®ç°çš„åº“å­˜æœåŠ¡ï¼Œè€ŒPythonå¼€å‘çš„æ•°æ®åˆ†ææœåŠ¡åˆå¯ä»¥è°ƒç”¨è¿™ä¸¤è€…çš„æ¥å£ã€‚</p>
<p>gRPCå†…ç½®çš„æµå¼å¤„ç†èƒ½åŠ›ä¹Ÿå€¼å¾—ä¸€æã€‚å®ƒæä¾›ä¸‰ç§æµå¼RPCæ¨¡å¼ï¼šå®¢æˆ·ç«¯æµã€æœåŠ¡ç«¯æµå’ŒåŒå‘æµã€‚åœ¨å®æ—¶é€šä¿¡åœºæ™¯ä¸­ï¼ŒåŒå‘æµå¼RPCä¼ è¾“éŸ³è§†é¢‘æ•°æ®ï¼Œç«¯åˆ°ç«¯å»¶è¿Ÿå¯ä»¥ç¨³å®šåœ¨80æ¯«ç§’ä»¥å†…ã€‚</p>
<h2 data-id="heading-3">04 ä½•æ—¶é€‰æ‹©gRPCï¼Ÿ</h2>
<p>è™½ç„¶gRPCä¼˜åŠ¿æ˜æ˜¾ï¼Œä½†å®ƒå¹¶éé“¶å¼¹ã€‚æŠ€æœ¯é€‰å‹éœ€è¦æ ¹æ®å…·ä½“åœºæ™¯å’Œéœ€æ±‚è¿›è¡Œæƒè¡¡ã€‚</p>
<p>åœ¨<strong>å†…éƒ¨å¾®æœåŠ¡é€šä¿¡</strong>é¢†åŸŸï¼ŒgRPCå‡ ä¹æ˜¯ç†æƒ³é€‰æ‹©ã€‚ç‰¹åˆ«æ˜¯å½“æœåŠ¡éƒ¨ç½²åœ¨åŒä¸€æ•°æ®ä¸­å¿ƒå†…ï¼Œç½‘ç»œç¯å¢ƒå¯æ§æ—¶ï¼ŒgRPCçš„é«˜æ€§èƒ½ç‰¹æ€§èƒ½å¤Ÿå¾—åˆ°å……åˆ†å‘æŒ¥ã€‚</p>
<p>å¯¹äº<strong>é«˜æ€§èƒ½è®¡ç®—å’Œæ•°æ®å¯†é›†</strong>å‹åº”ç”¨ï¼ŒgRPCçš„ä½å»¶è¿Ÿã€é«˜ååç‰¹æ€§éå¸¸æœ‰ä»·å€¼ã€‚ä¾‹å¦‚åœ¨é‡‘èé£æ§ç³»ç»Ÿä¸­ï¼Œæ¯«ç§’çº§çš„å»¶è¿Ÿå·®å¼‚å¯èƒ½å†³å®šäº¤æ˜“çš„æˆè´¥ã€‚</p>
<p>åœ¨<strong>å¤šè¯­è¨€æ··åˆå¼€å‘</strong>ç¯å¢ƒä¸­ï¼ŒgRPCæä¾›äº†ä¸€è‡´çš„é€šä¿¡æ ‡å‡†ã€‚ä¸åŒå›¢é˜Ÿä½¿ç”¨ä¸åŒæŠ€æœ¯æ ˆæ—¶ï¼Œå¯ä»¥é€šè¿‡ç»Ÿä¸€çš„gRPCæ¥å£è¿›è¡Œåä½œï¼Œè€Œæ— éœ€ä¸ºæ¯ç§è¯­è¨€ç»„åˆå•ç‹¬è®¾è®¡é€šä¿¡åè®®ã€‚</p>
<p><strong>å®æ—¶æ•°æ®æµå¤„ç†</strong>åœºæ™¯ä¹Ÿèƒ½ä»gRPCçš„æµå¼èƒ½åŠ›ä¸­å—ç›Šã€‚ä¾‹å¦‚é‡‘èè¡Œæƒ…æ¨é€ç³»ç»Ÿï¼Œä½¿ç”¨æœåŠ¡ç«¯æµå¼RPCï¼Œå•å°æœåŠ¡å™¨å³å¯æ”¯æ’‘æ•°ä¸‡å¹¶å‘è®¢é˜…ï¼Œæ¶ˆæ¯é€è¾¾å»¶è¿Ÿä½äº50æ¯«ç§’ã€‚</p>
<h2 data-id="heading-4">05 gRPCçš„å±€é™ä¸æŒ‘æˆ˜</h2>
<p>å½“ç„¶ï¼ŒgRPCå¹¶éé€‚ç”¨äºæ‰€æœ‰åœºæ™¯ã€‚å®ƒçš„æŠ€æœ¯ç‰¹æ€§å†³å®šäº†åœ¨æŸäº›ç¯å¢ƒä¸­ä½¿ç”¨ä¼šæœ‰æ˜æ˜¾å±€é™ã€‚</p>
<p>æœ€çªå‡ºçš„é—®é¢˜æ˜¯<strong>æµè§ˆå™¨å…¼å®¹æ€§é™åˆ¶</strong>ã€‚ç”±äºæµè§ˆå™¨åŸç”Ÿä¸æ”¯æŒHTTP/2çš„éåŠ å¯†è¿æ¥ï¼ŒgRPCæœåŠ¡éœ€è¦é€šè¿‡gRPC-Webè½¬æ¢å±‚æš´éœ²APIã€‚</p>
<p>è¿™ç§è½¬æ¢ä¼šå¼•å…¥é¢å¤–å¤„ç†æ—¶é—´ï¼Œä½¿å“åº”æ—¶é—´å¢åŠ 15-20æ¯«ç§’ã€‚åœ¨è¶…ä½å»¶è¿Ÿåœºæ™¯ä¸­ï¼Œè¿™å¯èƒ½å½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p><strong>è°ƒè¯•å’Œç›‘æ§å¤æ‚æ€§</strong>ä¹Ÿæ˜¯éœ€è¦è€ƒè™‘çš„å› ç´ ã€‚äºŒè¿›åˆ¶åè®®çš„å¯è¯»æ€§å·®ï¼Œç½‘ç»œæŠ“åŒ…åˆ†æå›°éš¾ã€‚åœ¨å®é™…æ•…éšœæ’æŸ¥æ—¶ï¼Œå›¢é˜Ÿå¯èƒ½éœ€è¦èŠ±è´¹æ•°å°æ—¶å¯¹æ¯”Protocol Bufferså®šä¹‰ä¸å®é™…æ•°æ®ã€‚</p>
<p>åœ¨èµ„æºå—é™çš„ç¯å¢ƒä¸­ï¼Œå¦‚æŸäº›IoTè®¾å¤‡ï¼ŒProtobufè§£æçš„CPUå ç”¨å¯èƒ½æ¯”JSONé«˜25%ã€‚åœ¨æ™ºèƒ½å®¶å±…é¡¹ç›®ä¸­æµ‹è¯•å‘ç°ï¼Œå¤„ç†gRPCè¯·æ±‚å¯èƒ½ä½¿è®¾å¤‡ç”µæ± ç»­èˆªå‡å°‘18%ã€‚</p>
<h2 data-id="heading-5">06 æ··åˆæ¶æ„çš„å®è·µæ™ºæ…§</h2>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œçº¯ç²¹çš„gRPCæ¶æ„æˆ–çº¯ç²¹çš„RESTfulæ¶æ„éƒ½å¯èƒ½æœ‰å±€é™æ€§ã€‚<strong>æ··åˆæ¶æ„</strong>å¾€å¾€èƒ½å¤Ÿå®ç°æŠ€æœ¯ä»·å€¼çš„æœ€å¤§åŒ–ã€‚</p>
<p>ä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯æ ¸å¿ƒæœåŠ¡é—´ä½¿ç”¨gRPCè¿›è¡Œé«˜æ•ˆé€šä¿¡ï¼Œè€Œå¯¹å¤–çš„APIæ¥å£åˆ™é€šè¿‡RESTfulæš´éœ²ã€‚</p>
<p>è¿™æ ·æ—¢äº«å—äº†gRPCåœ¨å†…éƒ¨é€šä¿¡çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œåˆä¿æŒäº†å¤–éƒ¨æ¥å£çš„å¹¿æ³›å…¼å®¹æ€§ã€‚</p>
<p>å¯¹äºéœ€è¦æµè§ˆå™¨ç›´æ¥è°ƒç”¨çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨<strong>gRPC-Webä½œä¸ºè¿‡æ¸¡æ–¹æ¡ˆ</strong>ï¼Œæˆ–è€…ä¸ºå…³é”®åŠŸèƒ½æä¾›RESTfulå¤‡ç”¨æ¥å£ã€‚</p>
<p>åœ¨ç›‘æ§å’Œè°ƒè¯•æ–¹é¢ï¼Œå¯ä»¥é…ç½®ä¸“é—¨çš„<strong>è°ƒè¯•ä»£ç†</strong>ï¼Œå°†äºŒè¿›åˆ¶åè®®è½¬æ¢ä¸ºå¯è¯»æ ¼å¼ï¼Œæˆ–ä½¿ç”¨grpcurlç­‰å·¥å…·è¾…åŠ©è°ƒè¯•ã€‚</p>
<hr/>
<p>å›åˆ°Kubernetesé›†ç¾¤ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ŒKubeleté€šè¿‡gRPCä¸API Serveré€šä¿¡ï¼Œè·å–æœ€æ–°çš„å®¹å™¨è°ƒåº¦æŒ‡ä»¤ã€‚è€Œåœ¨åŒä¸€èŠ‚ç‚¹å†…éƒ¨ï¼Œå®¹å™¨é—´çš„è¿›ç¨‹å¯èƒ½ä»åœ¨ä½¿ç”¨å…±äº«å†…å­˜äº¤æ¢æ•°æ®ã€‚</p>
<p>è¿™äº›ä¸åŒå±‚çº§çš„é€šä¿¡æœºåˆ¶åœ¨ç³»ç»Ÿä¸­å’Œè°å…±å­˜ï¼Œ<strong>ä»æ“ä½œç³»ç»Ÿçš„ç®¡é“åˆ°åˆ†å¸ƒå¼çš„gRPCï¼Œå†åˆ°è¾¹ç¼˜è®¡ç®—ä¸­çš„è½»é‡çº§æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼Œæ¯ä¸€å±‚éƒ½è§£å†³ç€ç‰¹å®šåœºæ™¯ä¸‹çš„é€šä¿¡é—®é¢˜ã€‚æŠ€æœ¯ä¸æ˜¯éæ­¤å³å½¼çš„é€‰æ‹©ï¼Œè€Œæ˜¯æ ¹æ®åœºæ™¯å’Œéœ€æ±‚çš„é€‚é…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äºŒå‰æ ‘ä¸­åºéå†ï¼šé€’å½’ä¸éé€’å½’å®ç°è¯¦è§£]]></title>    <link>https://juejin.cn/post/7588001624904794131</link>    <guid>https://juejin.cn/post/7588001624904794131</guid>    <pubDate>2025-12-26T11:20:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588001624904794131" data-draft-id="7588001624904777747" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äºŒå‰æ ‘ä¸­åºéå†ï¼šé€’å½’ä¸éé€’å½’å®ç°è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T11:20:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äºŒå‰æ ‘ä¸­åºéå†ï¼šé€’å½’ä¸éé€’å½’å®ç°è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T11:20:56.000Z" title="Fri Dec 26 2025 11:20:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»€ä¹ˆæ˜¯äºŒå‰æ ‘çš„ä¸­åºéå†ï¼Ÿ</h2>
<p>ä¸­åºéå†ï¼ˆInorder Traversalï¼‰æ˜¯äºŒå‰æ ‘éå†çš„ä¸€ç§ç»å…¸æ–¹å¼ï¼Œå…¶éå†é¡ºåºéµå¾ª <strong>"å·¦å­æ ‘ â†’ æ ¹èŠ‚ç‚¹ â†’ å³å­æ ‘"</strong> çš„åŸåˆ™ã€‚</p>
<p>å¯¹äºä¸‹é¢è¿™ä¸ªäºŒå‰æ ‘ï¼š</p>
<pre><code class="hljs language-css" lang="css">        <span class="hljs-selector-tag">A</span>
       / \
      <span class="hljs-selector-tag">B</span>   C
     / \   \
    D   E   F
</code></pre>
<p>ä¸­åºéå†çš„ç»“æœæ˜¯ï¼š<strong>D â†’ B â†’ E â†’ A â†’ C â†’ F</strong></p>
<h2 data-id="heading-1">ä¸­åºéå†çš„æ ¸å¿ƒåŸç†</h2>
<h3 data-id="heading-2">é€’å½’æ€æƒ³ï¼ˆæœ€ç›´è§‚çš„ç†è§£ï¼‰</h3>
<ol>
<li>éå†å·¦å­æ ‘</li>
<li>è®¿é—®æ ¹èŠ‚ç‚¹</li>
<li>éå†å³å­æ ‘</li>
</ol>
<p>è¿™ç§åˆ†æ²»æ€æƒ³éå¸¸é€‚åˆç”¨é€’å½’å®ç°ï¼Œå› ä¸ºæ¯ä¸ªå­æ ‘éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ›´å°çš„äºŒå‰æ ‘ã€‚</p>
<h3 data-id="heading-3">éé€’å½’æ€æƒ³ï¼ˆæ‰‹åŠ¨ç»´æŠ¤æ ˆï¼‰</h3>
<p>æ¨¡æ‹Ÿé€’å½’è°ƒç”¨çš„è¿‡ç¨‹ï¼Œéœ€è¦æ˜¾å¼åœ°ä½¿ç”¨æ ˆæ¥ä¿å­˜å¾…è®¿é—®çš„èŠ‚ç‚¹ï¼š</p>
<ol>
<li>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå°†æ‰€æœ‰å·¦å­èŠ‚ç‚¹å‹å…¥æ ˆ</li>
<li>å¼¹å‡ºæ ˆé¡¶èŠ‚ç‚¹å¹¶è®¿é—®</li>
<li>è½¬å‘è¯¥èŠ‚ç‚¹çš„å³å­æ ‘ï¼Œé‡å¤æ­¥éª¤1</li>
</ol>
<h2 data-id="heading-4">å®Œæ•´C++å®ç°</h2>
<h3 data-id="heading-5">1. äºŒå‰æ ‘èŠ‚ç‚¹å®šä¹‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stack&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-comment">// äºŒå‰æ ‘èŠ‚ç‚¹ç»“æ„</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">TreeNode</span> {
    <span class="hljs-type">int</span> val;
    TreeNode* left;
    TreeNode* right;
    <span class="hljs-built_in">TreeNode</span>(<span class="hljs-type">int</span> x) : <span class="hljs-built_in">val</span>(x), <span class="hljs-built_in">left</span>(<span class="hljs-literal">nullptr</span>), <span class="hljs-built_in">right</span>(<span class="hljs-literal">nullptr</span>) {}
};
</code></pre>
<h3 data-id="heading-6">2. é€’å½’å®ç°</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// é€’å½’ä¸­åºéå†</span>
    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">inorderTraversalRecursive</span><span class="hljs-params">(TreeNode* root)</span> </span>{
        vector&lt;<span class="hljs-type">int</span>&gt; result;
        <span class="hljs-built_in">inorderHelper</span>(root, result);
        <span class="hljs-keyword">return</span> result;
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">inorderHelper</span><span class="hljs-params">(TreeNode* node, vector&lt;<span class="hljs-type">int</span>&gt;&amp; result)</span> </span>{
        <span class="hljs-keyword">if</span> (!node) <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// é€’å½’ç»ˆæ­¢æ¡ä»¶</span>
        
        <span class="hljs-built_in">inorderHelper</span>(node-&gt;left, result);  <span class="hljs-comment">// éå†å·¦å­æ ‘</span>
        result.<span class="hljs-built_in">push_back</span>(node-&gt;val);        <span class="hljs-comment">// è®¿é—®æ ¹èŠ‚ç‚¹</span>
        <span class="hljs-built_in">inorderHelper</span>(node-&gt;right, result); <span class="hljs-comment">// éå†å³å­æ ‘</span>
    }
};
</code></pre>
<p><strong>é€’å½’æµç¨‹åˆ†æï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">è°ƒç”¨ <span class="hljs-built_in">inorder</span>(A)
â”œâ”€â”€ è°ƒç”¨ <span class="hljs-built_in">inorder</span>(B)
â”‚   â”œâ”€â”€ è°ƒç”¨ <span class="hljs-built_in">inorder</span>(D) â†’ è®¿é—® D
â”‚   â”œâ”€â”€ è®¿é—® <span class="hljs-selector-tag">B</span>
â”‚   â””â”€â”€ è°ƒç”¨ <span class="hljs-built_in">inorder</span>(E) â†’ è®¿é—® E
â”œâ”€â”€ è®¿é—® <span class="hljs-selector-tag">A</span>
â””â”€â”€ è°ƒç”¨ <span class="hljs-built_in">inorder</span>(C)
    â”œâ”€â”€ è®¿é—® C
    â””â”€â”€ è°ƒç”¨ <span class="hljs-built_in">inorder</span>(F) â†’ è®¿é—® F
</code></pre>
<h3 data-id="heading-7">3. éé€’å½’å®ç°ï¼ˆä½¿ç”¨æ ˆï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// éé€’å½’ä¸­åºéå†ï¼ˆè¿­ä»£æ³•ï¼‰</span>
    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">inorderTraversalIterative</span><span class="hljs-params">(TreeNode* root)</span> </span>{
        vector&lt;<span class="hljs-type">int</span>&gt; result;
        stack&lt;TreeNode*&gt; nodeStack;
        TreeNode* current = root;
        
        <span class="hljs-comment">// å½“å½“å‰èŠ‚ç‚¹ä¸ä¸ºç©ºæˆ–æ ˆä¸ä¸ºç©ºæ—¶ç»§ç»­</span>
        <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">nullptr</span> || !nodeStack.<span class="hljs-built_in">empty</span>()) {
            <span class="hljs-comment">// æ·±å…¥å·¦å­æ ‘ï¼Œå°†æ‰€æœ‰å·¦å­èŠ‚ç‚¹å…¥æ ˆ</span>
            <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">nullptr</span>) {
                nodeStack.<span class="hljs-built_in">push</span>(current);
                current = current-&gt;left;
            }
            
            <span class="hljs-comment">// å¼¹å‡ºæ ˆé¡¶èŠ‚ç‚¹å¹¶è®¿é—®</span>
            current = nodeStack.<span class="hljs-built_in">top</span>();
            nodeStack.<span class="hljs-built_in">pop</span>();
            result.<span class="hljs-built_in">push_back</span>(current-&gt;val);
            
            <span class="hljs-comment">// è½¬å‘å³å­æ ‘</span>
            current = current-&gt;right;
        }
        
        <span class="hljs-keyword">return</span> result;
    }
};
</code></pre>
<p><strong>éé€’å½’æµç¨‹åˆ†æï¼ˆç¤ºä¾‹äºŒå‰æ ‘ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">åˆå§‹ï¼š<span class="hljs-attr">current</span> = A, stack = []
1. å°†Aã€Bã€Dä¾æ¬¡å…¥æ ˆ â†’ <span class="hljs-attr">stack</span> = [A, B, D], current = null
2. å¼¹å‡ºDè®¿é—® â†’ <span class="hljs-attr">result</span> = [D], current = D.right = null
3. å¼¹å‡ºBè®¿é—® â†’ <span class="hljs-attr">result</span> = [D, B], current = B.right = E
4. å°†Eå…¥æ ˆ â†’ <span class="hljs-attr">stack</span> = [A, E], current = null
5. å¼¹å‡ºEè®¿é—® â†’ <span class="hljs-attr">result</span> = [D, B, E], current = E.right = null
6. å¼¹å‡ºAè®¿é—® â†’ <span class="hljs-attr">result</span> = [D, B, E, A], current = A.right = C
7. å°†Cå…¥æ ˆ â†’ <span class="hljs-attr">stack</span> = [C], current = null
8. å¼¹å‡ºCè®¿é—® â†’ <span class="hljs-attr">result</span> = [D, B, E, A, C], current = C.right = F
9. å°†Få…¥æ ˆ â†’ <span class="hljs-attr">stack</span> = [F], current = null
10. å¼¹å‡ºFè®¿é—® â†’ <span class="hljs-attr">result</span> = [D, B, E, A, C, F], current = null
ç»“æŸ
</code></pre>
<h2 data-id="heading-8">å¯¹æ¯”åˆ†æ</h2>



































<table><thead><tr><th>ç‰¹æ€§</th><th>é€’å½’å®ç°</th><th>éé€’å½’å®ç°</th></tr></thead><tbody><tr><td>ä»£ç ç®€æ´æ€§</td><td>â­â­â­â­â­</td><td>â­â­â­</td></tr><tr><td>ç†è§£éš¾åº¦</td><td>å®¹æ˜“</td><td>è¾ƒéš¾</td></tr><tr><td>ç©ºé—´å¤æ‚åº¦</td><td>O(h)ï¼ˆé€’å½’è°ƒç”¨æ ˆï¼‰</td><td>O(h)ï¼ˆæ˜¾å¼æ ˆï¼‰</td></tr><tr><td>æ ˆæº¢å‡ºé£é™©</td><td>æ ‘æ·±åº¦å¤§æ—¶å¯èƒ½æº¢å‡º</td><td>æ›´å¯æ§</td></tr><tr><td>æ‰§è¡Œæ•ˆç‡</td><td>å‡½æ•°è°ƒç”¨å¼€é”€è¾ƒå¤§</td><td>ç›´æ¥æ“ä½œæ ˆï¼Œæ•ˆç‡è¾ƒé«˜</td></tr></tbody></table>
<h2 data-id="heading-9">æµ‹è¯•ç¤ºä¾‹</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åˆ›å»ºæµ‹è¯•äºŒå‰æ ‘</span>
<span class="hljs-function">TreeNode* <span class="hljs-title">createTestTree</span><span class="hljs-params">()</span> </span>{
    TreeNode* root = <span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(<span class="hljs-number">1</span>);
    root-&gt;left = <span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(<span class="hljs-number">2</span>);
    root-&gt;right = <span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(<span class="hljs-number">3</span>);
    root-&gt;left-&gt;left = <span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(<span class="hljs-number">4</span>);
    root-&gt;left-&gt;right = <span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(<span class="hljs-number">5</span>);
    root-&gt;right-&gt;right = <span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(<span class="hljs-number">6</span>);
    <span class="hljs-keyword">return</span> root;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    TreeNode* root = <span class="hljs-built_in">createTestTree</span>();
    Solution solution;
    
    cout &lt;&lt; <span class="hljs-string">"é€’å½’ä¸­åºéå†ç»“æœ: "</span>;
    vector&lt;<span class="hljs-type">int</span>&gt; recursiveResult = solution.<span class="hljs-built_in">inorderTraversalRecursive</span>(root);
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> val : recursiveResult) {
        cout &lt;&lt; val &lt;&lt; <span class="hljs-string">" "</span>;
    }
    cout &lt;&lt; endl;
    
    cout &lt;&lt; <span class="hljs-string">"éé€’å½’ä¸­åºéå†ç»“æœ: "</span>;
    vector&lt;<span class="hljs-type">int</span>&gt; iterativeResult = solution.<span class="hljs-built_in">inorderTraversalIterative</span>(root);
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> val : iterativeResult) {
        cout &lt;&lt; val &lt;&lt; <span class="hljs-string">" "</span>;
    }
    cout &lt;&lt; endl;
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">é€’å½’ä¸­åºéå†ç»“æœ: 4 2 5 1 3 6 </span>
<span class="hljs-section">éé€’å½’ä¸­åºéå†ç»“æœ: 4 2 5 1 3 6 </span>
</code></pre>
<h2 data-id="heading-10">åº”ç”¨åœºæ™¯</h2>
<ol>
<li><strong>äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰æ’åº</strong>ï¼šä¸­åºéå†BSTä¼šå¾—åˆ°æœ‰åºåºåˆ—</li>
<li><strong>è¡¨è¾¾å¼æ ‘æ±‚å€¼</strong>ï¼šä¸­åºéå†å¯ä»¥è¿˜åŸä¸­ç¼€è¡¨è¾¾å¼</li>
<li><strong>å¤åˆ¶äºŒå‰æ ‘</strong>ï¼šæŒ‰ä¸­åºé¡ºåºå¤åˆ¶èŠ‚ç‚¹</li>
<li><strong>è°ƒè¯•å’Œåˆ†æ</strong>ï¼šæŸ¥çœ‹æ ‘çš„ç»“æ„</li>
</ol>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>ä¸­åºéå†æ˜¯äºŒå‰æ ‘ç®—æ³•çš„åŸºç¡€ï¼ŒæŒæ¡å…¶é€’å½’å’Œéé€’å½’å®ç°éå¸¸é‡è¦ï¼š</p>
<ul>
<li><strong>é€’å½’å®ç°</strong>ï¼šç›´è§‚æ˜“æ‡‚ï¼Œé€‚åˆå¿«é€Ÿå®ç°å’Œæ•™å­¦</li>
<li><strong>éé€’å½’å®ç°</strong>ï¼šæ›´é«˜æ•ˆï¼Œé¿å…é€’å½’æ·±åº¦é™åˆ¶ï¼Œæ˜¯é¢è¯•å¸¸è€ƒç‚¹</li>
</ul>
<p>ç†è§£ä¸¤ç§å®ç°æ–¹å¼ä¸ä»…æœ‰åŠ©äºæŒæ¡äºŒå‰æ ‘éå†ï¼Œè¿˜èƒ½åŠ æ·±å¯¹é€’å½’å’Œæ ˆçš„ç†è§£ï¼Œä¸ºå­¦ä¹ æ›´å¤æ‚çš„æ ‘å½¢ç»“æ„ç®—æ³•æ‰“ä¸‹åšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AudioDockï¼šæœåŠ¡å™¨å’Œ NAS éŸ³é¢‘æ’­æ”¾æœ€æ£’çš„è½¯ä»¶ï¼ğŸš€ğŸš€ğŸš€]]></title>    <link>https://juejin.cn/post/7587965908288749578</link>    <guid>https://juejin.cn/post/7587965908288749578</guid>    <pubDate>2025-12-26T11:52:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965908288749578" data-draft-id="7587997893987614747" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AudioDockï¼šæœåŠ¡å™¨å’Œ NAS éŸ³é¢‘æ’­æ”¾æœ€æ£’çš„è½¯ä»¶ï¼ğŸš€ğŸš€ğŸš€"/> <meta itemprop="keywords" content="æœåŠ¡å™¨,Docker,Node.js"/> <meta itemprop="datePublished" content="2025-12-26T11:52:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŒèŒå“’è‰å¤´å°†å†›"/> <meta itemprop="url" content="https://juejin.cn/user/1116759543260727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AudioDockï¼šæœåŠ¡å™¨å’Œ NAS éŸ³é¢‘æ’­æ”¾æœ€æ£’çš„è½¯ä»¶ï¼ğŸš€ğŸš€ğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1116759543260727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŒèŒå“’è‰å¤´å°†å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T11:52:04.000Z" title="Fri Dec 26 2025 11:52:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>å‰å‡ å¤©ä»‹ç»äº†æˆ‘å¼€å‘ AudioDock é¡¹ç›®çš„ä¸€äº›é—®é¢˜ã€‚å¥½å¤šå°ä¼™ä¼´å¾ˆæ„Ÿå…´è¶£è¿™ä¸ªé¡¹ç›®ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmmdctjj%2FAudioDock" target="_blank" title="https://github.com/mmdctjj/AudioDock" ref="nofollow noopener noreferrer">github.com/mmdctjj/Audâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99c1999ba51b44df9705468e330a1948~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354801&amp;x-signature=M4dhfqBOQREbUpKJHbToSzJzu98%3D" alt="æ¡Œé¢ç«¯" loading="lazy"/></p>
<p>ä»Šå¤©å°±ç®€å•ä»‹ç»ä¸‹è¿™ä¸ªé¡¹ç›®å§ï¼</p>
<h4 data-id="heading-1">å¾€æœŸç²¾å½©æ¨è</h4>
<ul>
<li><a href="https://juejin.cn/post/7541048117497954342" title="https://juejin.cn/post/7541048117497954342" target="_blank">å­—èŠ‚ä¹Ÿåœ¨ç”¨çš„ @tanstack/react-query åˆ°åº•æœ‰å¤šå¥½ç”¨ï¼ğŸ”¥ğŸ”¥ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7542323000236359689" title="https://juejin.cn/post/7542323000236359689" target="_blank">ğŸš€ğŸš€ğŸš€ å‘Šåˆ«å¤åˆ¶ç²˜è´´ï¼Œè¿™ä¸ªé«˜æ•ˆçš„ Vite æ’ä»¶è®©æˆ‘æ‘¸é±¼ğŸŸæ—¶é—´æ›´å……è¶³äº†ï¼</a></li>
<li><a href="https://juejin.cn/post/7538393049765314598" title="https://juejin.cn/post/7538393049765314598" target="_blank">ğŸ”¥ğŸ”¥ğŸ”¥ åŸæ¥åœ¨å­—èŠ‚å†™ä»£ç å°±æ˜¯è¿™ä¹ˆæœ´å®æ— åï¼ğŸ”¥ğŸ”¥ğŸ”¥</a></li>
<li>æ›´å¤šç²¾å½©æ–‡ç« æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›</li>
</ul>
<h3 data-id="heading-2">AudioDock</h3>
<p>AudioDockï¼ˆå£°ä»“ï¼‰æ˜¯ä¸€æ¬¾å…è´¹å¼€æºçš„éŸ³é¢‘æ’­æ”¾å™¨ï¼Œ</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02792476c81444bb83539e3a5c3a34f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354801&amp;x-signature=864i%2FkVSrW4mjLbQoayLlSlRs7Y%3D" alt="image.png" width="30%" loading="lazy"/></p>
<ul>
<li><strong>å¤šç«¯æ”¯æŒ ğŸ’»</strong>ï¼šåŒ…å«ç§»åŠ¨ç«¯ã€webç«¯ã€æ¡Œé¢ç«¯ã€å°ç¨‹åºã€ç”µè§†ç«¯ï¼</li>
<li><strong>åŒæ¨¡å¼æ— ç¼åˆ‡æ¢ â™»ï¸</strong>ï¼šæœ‰å£°ä¹¦ã€éŸ³ä¹æ¨¡å¼ä¸€é”®æ— ç¼åˆ‡æ¢ï¼Œè®°å¿†ä¸åŒæ¨¡å¼ä¸‹çš„æ’­æ”¾ä¿¡æ¯ï¼</li>
<li><strong>æ”¯æŒ docker éƒ¨ç½² ğŸ“¦</strong>ï¼šå¯ä»¥é€šè¿‡ docker éƒ¨ç½²æœåŠ¡ç«¯å’Œ web ç«¯ï¼</li>
<li><strong>å¤šç”¨æˆ·æ”¯æŒ ğŸ‘¥</strong>ï¼šæ”¯æŒå¤šç”¨æˆ·äº¤äº’è”åŠ¨ï¼</li>
<li><strong>è®¾å¤‡æ¥åŠ› ğŸ“±</strong>ï¼šæ”¯æŒå¤šè®¾å¤‡ä¹‹é—´æ— ç¼åˆ‡æ¢ï¼</li>
<li><strong>è§£æå…ƒæ•°æ® ğŸ–¼ï¸</strong>ï¼šå¦‚æœæ˜¯å¸¦å…ƒä¿¡æ¯çš„æ­Œæ›²ï¼Œå¯ä»¥å±•ç¤ºæ­Œè¯ã€å°é¢ç­‰ä¿¡æ¯ï¼</li>
</ul>
<p>ç›®å‰å·²ç»å®Œæˆäº†ç§»åŠ¨ç«¯ã€æ¡Œé¢ç«¯ã€webç«¯çš„å¼€å‘ï¼Œæ­£åœ¨æœ‰èŠ‚å¥çš„æµ‹è¯•ä¸­ï¼Œå³å°†æ­£å¼å‘ç‰ˆï¼</p>
<p>AudioDock ä¾èµ–çš„æœåŠ¡ç«¯å·²ç»å®Œæˆäº†æ‰€æœ‰åŠŸèƒ½çš„æ”¯æŒäº†ã€‚</p>
<p>ä¸‹é¢æ˜¯å®Œæ•´çš„å¼€å‘æƒ…å†µï¼š</p>
<p>âœ…ï¼šå®Œæˆ    âŒï¼šæœªå¼€å‘/æœªå®Œæˆå¼€å‘     ğŸš«ï¼šæ— è®¾è®¡</p>


























































































<table><thead><tr><th>åŠŸèƒ½æè¿°</th><th>æ¡Œé¢ç«¯</th><th>ç§»åŠ¨ç«¯</th></tr></thead><tbody><tr><td>åˆ‡æ¢æœ‰å£°ä¹¦å’ŒéŸ³ä¹æ¨¡å¼</td><td>âœ…</td><td>âœ…</td></tr><tr><td>è‡ªåŠ¨å¯¼å…¥æ•°æ®</td><td>âœ…</td><td>âœ…</td></tr><tr><td>æ’­æ”¾å™¨åŠŸèƒ½</td><td>âœ…</td><td>âœ…</td></tr><tr><td>æ­Œè¯å±•ç¤º</td><td>âœ…</td><td>âœ…</td></tr><tr><td>ä¸“è¾‘ã€è‰ºæœ¯å®¶</td><td>âœ…</td><td>âœ…</td></tr><tr><td>èšåˆæœç´¢</td><td>âœ…</td><td>âœ…</td></tr><tr><td>è¾¹å¬è¾¹å­˜</td><td>âŒ</td><td>âŒ</td></tr><tr><td>å¤šç«¯åŒæ­¥</td><td>âœ…</td><td>âœ…</td></tr><tr><td>è¿·ä½ æ’­æ”¾å™¨</td><td>âœ…</td><td>ğŸš«</td></tr><tr><td>å¤šç”¨æˆ·åŒæ­¥æ’­æ”¾</td><td>âœ…</td><td>âœ…</td></tr><tr><td>æ’­æ”¾è®°å½•</td><td>âœ…</td><td>âœ…</td></tr><tr><td>æ”¶è—è®°å½•</td><td>âœ…</td><td>âœ…</td></tr><tr><td>æ¡Œé¢æ­Œè¯</td><td>âœ…</td><td>âŒ</td></tr><tr><td>å’Œç³»ç»Ÿäº¤äº’</td><td>âœ…</td><td>âœ…</td></tr><tr><td>TTS ç”Ÿæˆæœ‰å£°ä¹¦</td><td>âŒ</td><td>âŒ</td></tr><tr><td>äº‘ç›˜èšåˆ</td><td>âŒ</td><td>âŒ</td></tr></tbody></table>
<h4 data-id="heading-3">å¿«é€Ÿä½“éªŒ</h4>
<h5 data-id="heading-4">NAS éƒ¨ç½²</h5>
<pre><code class="hljs language-bash" lang="bash">docker pull ctjj/audiodock-api:latest
docker pull ctjj/audiodock-web:latest
</code></pre>
<p>ç„¶åå¤åˆ¶ readme å¯¹åº”çš„å†…å®¹åˆ° nas é¡¹ç›®ä½ç½®å¯åŠ¨å³å¯ï¼Œ</p>
<blockquote>
<p>æ— æ³•æ‹‰é•œåƒçš„å°ä¼™ä¼´å…¬ä¼—å·åå°è¾“å…¥ï¼šaudiodock ï¼Œè·å–é“¾æ¥ï¼</p>
</blockquote>
<h5 data-id="heading-5">æœ¬åœ°è¿è¡Œ</h5>
<p>å‡†å¤‡ï¼š</p>
<ul>
<li>å¤åˆ¶ services/apiã€ packages/db åŒ… æ ¹ç›®å½•ä¸‹çš„ .env.example æ–‡ä»¶ï¼Œä¿®æ”¹åç§°ä¸º .env</li>
<li>ä¿®æ”¹ä¸‹é¢æ–‡ä»¶è·¯å¾„</li>
</ul>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">AUDIO_BOOK_DIR</span>=./music/audio
<span class="hljs-attr">MUSIC_BASE_DIR</span>=./music/music
<span class="hljs-attr">CACHE_DIR</span>=./music/cover
</code></pre>
<p>ç„¶åè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œè‡ªåŠ¨æ‰“å¼€æ¡Œé¢ç«¯</p>
<pre><code class="hljs language-bash" lang="bash">nvm use 22
pnpm install
npm run dev
</code></pre>
<p>ç§»åŠ¨ç«¯éœ€è¦è¿›å…¥ /apps/mobile ç›®å½•å¯åŠ¨ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">npx expo run:ios --device
</code></pre>
<h5 data-id="heading-6">docker å¯åŠ¨</h5>
<p>ä¿®æ”¹ docker-compose çš„ç¯å¢ƒå˜é‡ å’Œ volumesï¼š</p>
<pre><code class="hljs language-bash" lang="bash">environment:
  - AUDIO_BOOK_DIR=/audio
  - MUSIC_BASE_DIR=/music
  - CACHE_DIR=/covers
  - DATABASE_URL=file:/data/dev.db

<span class="hljs-comment"># æŒ‚è½½æ•°æ®æ–‡ä»¶å’Œç¼“å­˜ï¼Œä½¿ç”¨ Docker å‘½åå·æ›´å®‰å…¨</span>
volumes:
  - ./audio:/audio
  - ./music:/music
  - ./covers:/covers
  - api-db:/data
</code></pre>
<p>æ ¹ç›®å½•ä¸‹è¿è¡Œæ„å»ºå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-css" lang="css">docker-compose build <span class="hljs-attr">--no-cache</span>
docker-compose up
</code></pre>
<h4 data-id="heading-7">äº§å“ç”±æ¥</h4>
<p>é¦–å…ˆæˆ‘æ˜¯ä¸€åé‡åº¦çš„ NAS ç”¨æˆ·ï¼Œä¸€æ–¹é¢æ˜¯éœ€è¦å°†å­©å­ã€å®¶äººçš„æµ·é‡ç…§ç‰‡å­˜å‚¨èµ·æ¥ï¼Œå¦ä¸€æ–¹é¢æˆ‘æœ¬äººä¹Ÿæ˜¯æ•°æ®çˆ±å¥½è€…ã€‚</p>
<p>æˆ‘é‡åˆ°çš„æœ€å¤§çš„é—®é¢˜æ˜¯æ²¡æœ‰ä¸€æ¬¾è®© NAS ç”¨æˆ·ç”¨èµ·æ¥èˆ’æœçš„éŸ³é¢‘æ’­æ”¾å™¨ï¼å‚å®¶ä¹Ÿæ˜¯åœ¨æ‘†çƒ‚ä¸­ï¼Œæ²¡åŠæ³•é‚£å°±è‡ªå·±å¼€å‘å§ï¼</p>
<h4 data-id="heading-8">ç”¨å¿ƒçš„è®¾è®¡</h4>
<p>å¯¹äºæœ‰å„ç§æƒ³æ³•çš„å¼€å‘è€…æ¥è¯´ï¼Œè‡ªå·±å¼€å‘ä¸€æ¬¾å±äºè‡ªå·±çš„äº§å“ï¼Œæ— ç–‘æ˜¯ä»¶å¼€å¿ƒçš„äº‹æƒ…ï¼Œå› ä¸ºå¤©é©¬è¡Œç©ºçš„æƒ³è±¡æœ‰å¤©å˜æˆäº†å¯è½åœ°çš„äº§å“ï¼</p>
<p>æ‰€ä»¥ï¼ŒAudioDock æ— é™è¶‹è¿‘æˆ‘å¿ƒä¸­å®Œç¾çš„æ ·å­ï¼</p>
<p>æ­Œè¯æ»šåŠ¨å±•ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/483af0e87b9541969f644336017f4d36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354801&amp;x-signature=tBcl%2FzfKn8SzbVLk%2B3tFSujKETA%3D" alt="æ­Œè¯æ»šåŠ¨å±•ç¤º" loading="lazy"/></p>
<p>æ¡Œé¢æ­Œè¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ab5cc5bfbc148d6b1ada4128cd25577~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354801&amp;x-signature=17gZ9ELRhNDvul96FE9Vq0EBQVw%3D" alt="æ¡Œé¢æ­Œè¯" loading="lazy"/></p>
<p>miniæ’­æ”¾å™¨ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a364e08bef941bba8732a1b12d85633~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354801&amp;x-signature=naXDHoUHv70C6mveAPF1e0lAit0%3D" alt="miniæ’­æ”¾å™¨" loading="lazy"/></p>
<p>å’Œç³»ç»Ÿé›†æˆï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8d0d4cb770b415ca644149871d73bf3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354801&amp;x-signature=Pv%2Bo2MFmGWjVHwPJ9WPdBsiAQ%2FE%3D" alt="å’Œç³»ç»Ÿé›†æˆ" loading="lazy"/></p>
<p>å¯ä»¥åœ¨ç³»ç»Ÿå¯¼èˆªæ éšæ„æ§åˆ¶ï¼</p>
<p>åŒæ­¥æ’­æ”¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4c86c3b422e4b71bef4139ff48483e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354801&amp;x-signature=pboqd5YGioqyN%2BmRkRLDCdcHDC8%3D" alt="åŒæ­¥æ’­æ”¾è¯·æ±‚" loading="lazy"/></p>
<p>ä¸åŒç”¨æˆ·ä¹‹é—´å¯ä»¥äº’ç›¸é‚€è¯·åŒæ­¥æ’­æ”¾ï¼ŒåŒæ„åæ’­æ’­é‚€è¯·è€…å½“å‰çš„éŸ³é¢‘å’Œåˆ—è¡¨ï¼Œç»™ç”Ÿæ´»å¤šä¸€ç‚¹åˆ†äº«çš„ä¹è¶£ï¼</p>
<p>è®¾å¤‡æ¥åŠ›ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/200cbccfafa9476c9fdf539325691bcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354801&amp;x-signature=iQP93G6PbGm6B1EWJxwB9lYxwCA%3D" alt="è®¾å¤‡æ¥åŠ›" loading="lazy"/></p>
<p>å½“æˆ‘åœ¨é€šå‹¤æ—¶ç”¨æ‰‹æœºå¬æ­Œï¼Œå›åˆ°å…¬å¸ï¼Œæ‰“å¼€ç”µè„‘ï¼Œå¯ä»¥ç»§ç»­å¬ï¼</p>
<h4 data-id="heading-9">æ¿€åŠ¨äººå¿ƒçš„åŠŸèƒ½</h4>
<p>é™¤äº†ä¸Šé¢åŸºç¡€çš„åŠŸèƒ½ï¼Œæˆ‘ç›®å‰æ­£åœ¨è°ƒç ”å‡†å¤‡ä¸‹ä¸ªé˜¶æ®µåŠŸèƒ½çš„å¼€å‘ã€‚</p>
<h5 data-id="heading-10">TTS ç”Ÿæˆæœ‰å£°ä¹¦</h5>
<p>æœ‰çš„æ—¶å€™å¾ˆå–œæ¬¢ä¸€æœ¬ä¹¦ï¼Œä½†æ˜¯æœ‰ä¸æƒ³åç€ï¼Œåªæƒ³èººç€å¬ï¼Œæ‰¾ä¸åˆ°åˆé€‚çš„å·¥å…·æ¥æ»¡è¶³æˆ‘çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸‹ä¸ªé˜¶æ®µåŠªåŠ›å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<p>æ—©æœŸè°ƒç ”ä½¿ç”¨ edge-tts python åº“æ¥å®ç°è¿™ä¸ªåŸºç¡€åŠŸèƒ½ã€‚</p>
<p>é‰´äºæœ€è¿‘ Index TTS çš„å¼ºåŠ¿å‡ºåœˆï¼Œä¹Ÿæ‰“ç®—è·Ÿè¿›å…‹éš†éŸ³è‰²æœ—è¯»æ–‡æœ¬çš„æ–¹æ¡ˆï¼</p>
<h5 data-id="heading-11">äº‘ç›˜èšåˆ</h5>
<p>æˆ‘çš„ä»“é¼ è¡Œä¸ºå¾ˆæ—©å°±å‡ºç°äº†ï¼Œåœ¨äº‘ç›˜å›¤ç§¯äº†å„ç§éŸ³ä¹ï¼Œä¸ºäº†æ–¹ä¾¿å…¥åº“ï¼Œåé¢ä¹Ÿä¼šå®ç°å°†äº‘ç›˜çš„éŸ³é¢‘ç»Ÿä¸€å…¥åº“ã€‚</p>
<p>ç®€å•çš„æ–¹æ¡ˆæ˜¯ï¼Œé€šè¿‡äº‘ç›˜æˆæƒ AListï¼Œç„¶åé€šè¿‡ AList çš„æœåŠ¡å’Œ AudioDock æœåŠ¡å¯¹æ¥ï¼Œå®ç°éŸ³é¢‘è‡ªåŠ¨å…¥åº“ã€‚</p>
<h4 data-id="heading-12">æœªæ¥å±•æœ›</h4>
<p>åç»­ï¼Œè¿˜ä¼šè€ƒè™‘åšä¸ªå°ç¨‹åºï¼Œè®©å¤§å®¶çš„ä½¿ç”¨æ›´åŠ æ–¹ä¾¿ï¼Œå¦‚æœåé¢æˆ‘å®¶é‡Œä¹°äº†å¤§ç”µè§†ï¼Œä¼šè€ƒè™‘åšä¸ªç”µè§†ç«¯çš„æ’­æ”¾å™¨ï¼Œè¿™æ ·æ•´ä¸ªç”Ÿæ€å°±å…¨äº†ï¼</p>
<h3 data-id="heading-13">æœ€å</h3>
<p>å¸Œæœ› AudioDock çš„å‡ºç°ï¼Œå¯ä»¥ç»™ Docker å…šã€Nas å…šå¸¦æ¥æ›´å¤šçš„ä¾¿åˆ©ï¼</p>
<h4 data-id="heading-14">å¾€æœŸç²¾å½©æ¨è</h4>
<ul>
<li><a href="https://juejin.cn/post/7541048117497954342" title="https://juejin.cn/post/7541048117497954342" target="_blank">å­—èŠ‚ä¹Ÿåœ¨ç”¨çš„ @tanstack/react-query åˆ°åº•æœ‰å¤šå¥½ç”¨ï¼ğŸ”¥ğŸ”¥ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7542323000236359689" title="https://juejin.cn/post/7542323000236359689" target="_blank">ğŸš€ğŸš€ğŸš€ å‘Šåˆ«å¤åˆ¶ç²˜è´´ï¼Œè¿™ä¸ªé«˜æ•ˆçš„ Vite æ’ä»¶è®©æˆ‘æ‘¸é±¼ğŸŸæ—¶é—´æ›´å……è¶³äº†ï¼</a></li>
<li><a href="https://juejin.cn/post/7538393049765314598" title="https://juejin.cn/post/7538393049765314598" target="_blank">ğŸ”¥ğŸ”¥ğŸ”¥ åŸæ¥åœ¨å­—èŠ‚å†™ä»£ç å°±æ˜¯è¿™ä¹ˆæœ´å®æ— åï¼ğŸ”¥ğŸ”¥ğŸ”¥</a></li>
<li>æ›´å¤šç²¾å½©æ–‡ç« æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» 0 åˆ° 1 ç©è½¬ N8Nâ€”â€”åˆè¯† N8Nï¼ˆå…¥é—¨å¿…çœ‹ï¼‰]]></title>    <link>https://juejin.cn/post/7587743345197613108</link>    <guid>https://juejin.cn/post/7587743345197613108</guid>    <pubDate>2025-12-26T10:03:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587743345197613108" data-draft-id="7587738151660175360" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» 0 åˆ° 1 ç©è½¬ N8Nâ€”â€”åˆè¯† N8Nï¼ˆå…¥é—¨å¿…çœ‹ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T10:03:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LucianaiB"/> <meta itemprop="url" content="https://juejin.cn/user/1269294586664749"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» 0 åˆ° 1 ç©è½¬ N8Nâ€”â€”åˆè¯† N8Nï¼ˆå…¥é—¨å¿…çœ‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1269294586664749/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LucianaiB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:03:51.000Z" title="Fri Dec 26 2025 10:03:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6560e85741a44e8a3fc2d7b2a6d66fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=r1L3cV0rKSaFsrp3XviFyCstbaw%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯n8nï¼Ÿ</h2>
<p><strong>n8n æ˜¯ä¸€æ¬¾å¼€æºã€çµæ´»ä¸”é«˜åº¦å¯å®šåˆ¶çš„å·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°ï¼Œå…¶æ ¸å¿ƒç†å¿µæ˜¯é€šè¿‡å¯è§†åŒ–æ‹–æ‹½ç•Œé¢å°†ä¸åŒçš„åº”ç”¨ã€æœåŠ¡ã€APIæˆ–æ•°æ®æºè¿æ¥èµ·æ¥ï¼Œå®ç°å¤æ‚çš„è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œè€Œæ— éœ€ç¼–å†™å¤§é‡ä»£ç </strong>ã€‚n8n çš„åå­—æºäºå¾·è¯­ â€œnur ein Ninjaâ€ï¼ˆæ„ä¸ºâ€œåªæ˜¯ä¸€ä¸ªå¿è€…â€ï¼‰ï¼Œå¯“æ„å…¶å¼ºå¤§ã€çµæ´»åˆè½»ç›ˆã€‚</p>
<h4 data-id="heading-1">æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li>å®Œå…¨å¼€æºå…è´¹ï¼šn8n é‡‡ç”¨ MIT å¼€æºè®¸å¯ï¼Œæºä»£ç æ‰˜ç®¡äº GitHub)))ï¼Œç”¨æˆ·å¯è‡ªç”±æŸ¥çœ‹ã€ä¿®æ”¹ä¸éƒ¨ç½²ã€‚</li>
<li>å¯è§†åŒ–å·¥ä½œæµç¼–æ’ï¼šé€šè¿‡ç›´è§‚çš„æ‹–æ‹½å¼ç•Œé¢æ„å»ºå¤šæ­¥éª¤è‡ªåŠ¨åŒ–æµç¨‹ï¼Œé™ä½æŠ€æœ¯é—¨æ§›ã€‚</li>
<li>ä¸°å¯Œçš„é›†æˆç”Ÿæ€ï¼šå®˜æ–¹æ”¯æŒ 1700+ é¢„è®¾æ¨¡æ¿ å’Œ æ•°ç™¾ä¸ªåŸç”ŸèŠ‚ç‚¹ï¼ˆå¦‚ Slackã€Google Sheetsã€Notionã€Webhook ç­‰ï¼‰ï¼ŒåŒæ—¶æ”¯æŒè‡ªå®šä¹‰èŠ‚ç‚¹å¼€å‘ã€‚</li>
<li>çµæ´»çš„è§¦å‘æœºåˆ¶ï¼šæ”¯æŒå®šæ—¶ä»»åŠ¡ã€äº‹ä»¶é©±åŠ¨ã€æ‰‹åŠ¨è§¦å‘ã€Webhookã€API è°ƒç”¨ç­‰å¤šç§è§¦å‘æ–¹å¼ã€‚</li>
<li>å¼ºå¤§çš„é€»è¾‘æ§åˆ¶ï¼šæ”¯æŒæ¡ä»¶åˆ†æ”¯ï¼ˆif/elseï¼‰ã€å¾ªç¯ã€é”™è¯¯å¤„ç†ç­‰å¤æ‚é€»è¾‘ï¼Œå¯æ„å»ºä¼ä¸šçº§è‡ªåŠ¨åŒ–æµç¨‹ã€‚</li>
<li>éƒ¨ç½²æ–¹å¼çµæ´»ï¼šæ—¢å¯æœ¬åœ°éƒ¨ç½²ï¼ˆDockerã€æœ¬åœ° Node.js ç¯å¢ƒï¼‰ï¼Œä¹Ÿå¯è‡ªæ‰˜ç®¡äºç§æœ‰äº‘/å…¬æœ‰äº‘ï¼Œæˆ–ä½¿ç”¨å…¶å®˜æ–¹SaaS äº‘æœåŠ¡ï¼ˆå« 14 å¤©è¯•ç”¨ï¼‰ã€‚</li>
<li>ä»£ç ä¸æ— ä»£ç èåˆï¼šåœ¨å¯è§†åŒ–æµç¨‹ä¸­å¯éšæ—¶æ’å…¥ JavaScript æˆ– Python è„šæœ¬ï¼Œå®ç°é«˜åº¦å®šåˆ¶åŒ–é€»è¾‘ã€‚</li>
</ul>
<h4 data-id="heading-2">é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>ä¸ªäººæ•ˆç‡æå‡ï¼šè‡ªåŠ¨å¤‡ä»½ç¬”è®°ã€å®šæ—¶æŠ“å–ç½‘é¡µå†…å®¹ã€é‚®ä»¶è‡ªåŠ¨åŒ–ç­‰ã€‚</li>
<li>å›¢é˜Ÿåä½œè‡ªåŠ¨åŒ–ï¼šå°† Slack æ¶ˆæ¯åŒæ­¥è‡³ Notionã€è‡ªåŠ¨åˆ›å»º Jira å·¥å•ã€å®¡æ‰¹æµæé†’ç­‰ã€‚</li>
<li>æ•°æ®é›†æˆä¸å¤„ç†ï¼šèšåˆå¤šä¸ª API æ•°æ®ã€æ¸…æ´—å¹¶å†™å…¥æ•°æ®åº“ã€ç”ŸæˆæŠ¥è¡¨ç­‰ã€‚</li>
<li>AI å·¥ä½œæµæ„å»ºï¼šé›†æˆ LLMï¼ˆå¦‚ OpenAIã€æœ¬åœ°æ¨¡å‹ï¼‰ï¼Œæ„å»ºå¤šæ­¥éª¤ AI Agentï¼Œå®ç°â€œç”¨è‡ªç„¶è¯­è¨€æ“ä½œä¸šåŠ¡ç³»ç»Ÿâ€ã€‚</li>
</ul>
<h2 data-id="heading-3">æ€ä¹ˆç”¨ n8n?</h2>
<p>é¦–å…ˆå…ˆè§£å†³ â€œæ€ä¹ˆç”¨ n8nâ€ çš„åŸºç¡€é—®é¢˜ï¼Œn8nä¸€èˆ¬æœ‰ 3 ç§éƒ¨ç½²æ–¹å¼ï¼š</p>
<ul>
<li><strong>åœ¨çº¿ä½¿ç”¨ï¼ˆ[</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fn8n.io%2F" target="_blank" title="https://n8n.io/" ref="nofollow noopener noreferrer"><strong>https://n8n.io/</strong></a><strong>\ï¼‰æ³¨æ„çš„æ˜¯åªæœ‰14å¤©çš„è¯•ç”¨æ—¶é—´ï¼Œè¿‡æœŸäº†å¯ä»¥æ¢ä¸ªé‚®ç®±æ³¨å†Œæ–°çš„è´¦å·ã€‚</strong>](<a href="https://link.juejin.cn?target=https%3A%2F%2Fn8n.io" target="_blank" title="https://n8n.io" ref="nofollow noopener noreferrer">n8n.io</a>)</li>
<li><strong>æœ¬åœ°éƒ¨ç½²é€‚åˆæƒ³å…ˆè¯•æ‰‹çš„æ–°æ‰‹ï¼Œä¸ç”¨é¢å¤–èŠ±é’±ï¼Œç”µè„‘ä¸Šæ“ä½œå‡ æ­¥å°±èƒ½å¯åŠ¨ï¼ˆ[</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fn8n-io%2Fn8n" target="_blank" title="https://github.com/n8n-io/n8n" ref="nofollow noopener noreferrer"><strong>https://github.com/n8n-io/n8n</strong></a><strong>ï¼‰ã€‚</strong>](<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fn8n-io" target="_blank" title="https://github.com/n8n-io" ref="nofollow noopener noreferrer">github.com/n8n-io</a>)</li>
<li><strong>äº‘æœåŠ¡å™¨**</strong>éƒ¨ç½²æ›´å®ç”¨ï¼Œéƒ¨ç½²å®Œä¹‹åä¸ç®¡ç”µè„‘å…³æ²¡å…³ï¼Œ*<strong>*å·¥ä½œæµ**</strong>éƒ½èƒ½ä¸€ç›´è‡ªåŠ¨è¿è¡Œï¼Œé€‚åˆé•¿æœŸç”¨ï¼ˆæœ¬æ–‡è¯¦ç»†æ•™ç¨‹ï¼‰ã€‚**</li>
</ul>





























<table><thead><tr><th align="left">éƒ¨ç½²æ–¹å¼</th><th align="left">é€‚ç”¨äººç¾¤</th><th align="left">ä¼˜ç‚¹</th><th align="left">ç¼ºç‚¹</th></tr></thead><tbody><tr><td align="left">å®˜æ–¹ SaaS</td><td align="left">å¿«é€Ÿä½“éªŒè€…</td><td align="left">æ— éœ€é…ç½®ï¼Œå¼€ç®±å³ç”¨</td><td align="left">ä»… 14 å¤©å…è´¹è¯•ç”¨</td></tr><tr><td align="left">æœ¬åœ°éƒ¨ç½²</td><td align="left">åˆå­¦è€…ã€å¼€å‘è€…</td><td align="left">å…è´¹ã€ä¾¿äºè°ƒè¯•</td><td align="left">ä¾èµ–æœ¬åœ°ç”µè„‘ï¼Œæ— æ³•é•¿æœŸè¿è¡Œ</td></tr><tr><td align="left">äº‘æœåŠ¡å™¨éƒ¨ç½²</td><td align="left">ä¼ä¸šç”¨æˆ·ã€é•¿æœŸä½¿ç”¨è€…</td><td align="left">7Ã—24 å°æ—¶è¿è¡Œã€é«˜å¯ç”¨</td><td align="left">éœ€æ”¯ä»˜äº‘æœåŠ¡å™¨è´¹ç”¨</td></tr></tbody></table>
<h2 data-id="heading-4"><strong>è·å– N8N æœåŠ¡å™¨</strong></h2>
<h3 data-id="heading-5"><strong>1.è·å– N8N æœåŠ¡å™¨</strong></h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fbuy.cloud.tencent.com%2Flighthouse%3FblueprintType%3DAPP_OS%26blueprintOfficialId%3Dlhbp-5utfah5i%252525C2%252525AEionId%3D1%26zone%3Dap-guangzhou-6%26bundleId%3Dbundle_rs_mc_med2_01%26loginSet%3DAUTO%26timeSpan%3D3%26from%3Dlh-console" target="_blank" title="https://buy.cloud.tencent.com/lighthouse?blueprintType=APP_OS&amp;blueprintOfficialId=lhbp-5utfah5i%2525C2%2525AEionId=1&amp;zone=ap-guangzhou-6&amp;bundleId=bundle_rs_mc_med2_01&amp;loginSet=AUTO&amp;timeSpan=3&amp;from=lh-console" ref="nofollow noopener noreferrer">buy.cloud.tencent.com/lighthouse?â€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd8b01007da8452daa1d425efb57dd33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=BU4NkmgWIHQBHi5SrOsMXJZ7oI8%3D" alt=" " loading="lazy"/></p>
<p>è¿™é‡Œæˆ‘è´­ä¹°äº†3ä¸ªæœˆç”¨æ¥å­¦ä¹ ã€‚æ³¨æ„ï¼š<code>è®°å¾—å–æ¶ˆè‡ªåŠ¨ç»­è´¹</code>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65c2b88113df4b88845cdceeb0e49589~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=5bxPKpvdEWc2Jtuur66CjVGHXmE%3D" alt=" " loading="lazy"/></p>
<h3 data-id="heading-6">2.æ‰“å¼€æœåŠ¡å™¨ç®¡ç†</h3>
<p>æ‰“å¼€ç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.cloud.tencent.com%2Flighthouse%2Finstance%2Findex%3Frid%3D1" target="_blank" title="https://console.cloud.tencent.com/lighthouse/instance/index?rid=1" ref="nofollow noopener noreferrer">console.cloud.tencent.com/lighthouse/â€¦</a>ï¼Œç‚¹å‡»ç™»å½•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3072ca9c518f4762ae6ce6e210994127~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=yePaOexV7IPDoJyPK0uUVjcC868%3D" alt=" " loading="lazy"/></p>
<p>ä¸‹è½½ç»ˆç«¯è¿æ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f74abc5728541c29de7d73b1c467eb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=VybYhzYLmKcmdP5n5NTGL8YCmbI%3D" alt=" " loading="lazy"/></p>
<p>åœ¨ä¸Šå›¾æœ‰ä¸€ä¸ªå…¬ç½‘åœ°å€ï¼Œæˆ‘ä»¬æ‰“å¼€ç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fyour-server-ip%3A5678" target="_blank" title="http://your-server-ip:5678" ref="nofollow noopener noreferrer">http://your-server-ip:5678</a></p>
<p>ä¾‹å¦‚æˆ‘å°±æ˜¯ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2F111.230.109.186%3A5678" target="_blank" title="http://111.230.109.186:5678" ref="nofollow noopener noreferrer">http://111.230.109.186:5678</a></p>
<p>è¾“å…¥æˆ‘ä»¬çš„ä¿¡æ¯ï¼Œç‚¹å‡»Nextï¼Œä¸‹ä¸€æ­¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a255d77675445538286bd21003f5769~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=%2B3wAWtKJrTIJYAn4YHmBXfGUB2E%3D" alt=" " loading="lazy"/></p>
<p>æˆåŠŸçš„æ‰“å¼€äº†æˆ‘ä»¬çš„n8nå·¥ä½œå¹³å°ã€‚</p>
<p>ç™»å½•åçš„ç•Œé¢ï¼Œå’Œå®˜ç½‘ç™»å½•é‚£è¾¹åŸºæœ¬ä¸€è‡´ï¼Œç”¨è¿™ç§æ–¹å¼å°±ä¸ç”¨æ‹…å¿ƒåªæœ‰14å¤©è¯•ç”¨äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df7b736c08564b3f84380b4509e5ca03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=95lU4gGKeOYXQZU5GViyH1ABhSw%3D" alt=" " loading="lazy"/></p>
<h3 data-id="heading-7">3.å®æˆ˜ï¼šæ­å»ºâ€œè·å–ä»Šæ—¥ä¿¡æ¯å¹¶ä¿å­˜ä¸ºæ–‡ä»¶â€å·¥ä½œæµ</h3>
<p>æœ¬æ¬¡æ¡ˆä¾‹æ­å»ºä¸€ä¸ª è·å–ä»Šæ—¥æ—¥æœŸå¹¶ä¸‹è½½æ–‡ä»¶ çš„ç®€å• å·¥ä½œæµã€‚</p>
<h4 data-id="heading-8">æ­¥éª¤ 1ï¼šåˆ›å»ºæ–°å·¥ä½œæµ</h4>
<p>é¦–å…ˆç‚¹å‡»Create Workflowåˆ›å»ºå·¥ä½œæµã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97cf8ab36b9740bda8e04b942a517c82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=k3xMjmZzLoIk3LFwPkvdv3MRmm8%3D" alt=" " loading="lazy"/></p>
<h4 data-id="heading-9">æ­¥éª¤ 2ï¼šæ·»åŠ æ‰‹åŠ¨è§¦å‘å™¨</h4>
<p>ç‚¹å‡»å·¦ä¾§<code>+</code>ï¼Œå³ä¾§ä¼šå¼¹å‡ºæŠ½å±‰ï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªTrigger manually</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/422592700bf8455495f41fcf89fce37f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=LoYTIL3qPHoYuYMxvPBJ1n6mGLA%3D" alt=" " loading="lazy"/></p>
<p>å·¥ä½œå°å°±ä¼šå‡ºç°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç‚¹å‡»å³ä¾§çš„åŠ å·å¯ä»¥ç»§ç»­æ·»åŠ èŠ‚ç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10ae0fa8e0a446328bbd7cc4bddac352~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=XleFdxJvNR%2BM%2F8XzlXpQUENVLwg%3D" alt=" " loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æœç´¢ï¼Œæˆ–è€…ä¸‹é¢çš„åˆ†ç±»é‡Œå»æ‰¾éœ€è¦çš„åŠŸèƒ½èŠ‚ç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7622013538b4fa38a139ddd599ebeeb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=llX8lEUR%2BoRfH5gJ4BsmDZWJ%2BEM%3D" alt=" " loading="lazy"/></p>
<h4 data-id="heading-10">æ­¥éª¤ 3ï¼šæ·»åŠ  Code èŠ‚ç‚¹ï¼ˆç”Ÿæˆå†…å®¹ï¼‰</h4>
<p>é€‰æ‹©codeèŠ‚ç‚¹ä¸ºä¾‹ï¼Œç‚¹å‡»åä¼šå‡ºç°è¿™ä¸ªå¼¹çª—ï¼Œæˆ‘ä»¬åœ¨ä»£ç æ¡†æ”¾ä¸Šè‡ªå·±æ‰€éœ€è¦çš„åŠŸèƒ½ä»£ç ï¼Œç‚¹å‡»Execute stepï¼ˆæ‰§è¡Œæ­¥éª¤ï¼‰æŒ‰é’®ï¼Œå³ä¾§outputé‚£è¾¹å°±ä¼šå‡ºç°è¾“å‡ºçš„å†…å®¹</p>
<p>è¿™é‡Œå¯ä»¥é€‰æ‹©JavaScriptæˆ–è€…Python(æµ‹è¯•ä¸­)ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c94c1389df194dd6b8b71cee22dd7282~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=SLJPNzT8gbTV3JJWiKIqs4Y4ZZs%3D" alt=" " loading="lazy"/></p>
<p>è¾“å…¥ä»£ç ï¼š</p>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-comment"># è·å–ç¬¬ä¸€ä¸ªè¾“å…¥é¡¹</span>
item = _<span class="hljs-built_in">input</span>.first()

<span class="hljs-comment"># ä» item.json ä¸­æå– randomQuote</span>
random_quote = item.json.get(<span class="hljs-string">"randomQuote"</span>, <span class="hljs-string">"ä»Šæ—¥ LucianaiB åè¨€"</span>)

<span class="hljs-comment"># æ„é€ æ—¥æœŸ</span>
today = datetime.now()
date_str = <span class="hljs-string">f"<span class="hljs-subst">{today.year}</span>å¹´<span class="hljs-subst">{today.month}</span>æœˆ<span class="hljs-subst">{today.day}</span>æ—¥"</span>

<span class="hljs-comment"># ç”Ÿæˆæ¨æ–‡å†…å®¹</span>
tweet_content = <span class="hljs-string">f"ğŸ“š æˆ‘ä¸åš N8N åº”ç”¨çš„ä¼ æ’­è€…ï¼Œè€Œæ˜¯å¸Œæœ›ä½ èƒ½çœŸæ­£çˆ±ä¸Šå®ƒã€ä¸»åŠ¨å°è¯•ï¼Œå¹¶åŠ¨æ‰‹è®¾è®¡å±äºè‡ªå·±çš„è‡ªåŠ¨åŒ–æµç¨‹ã€‚"</span>

<span class="hljs-comment"># è¿”å›æ•°æ®</span>
<span class="hljs-keyword">return</span> {
    <span class="hljs-string">"quote"</span>: random_quote,
    <span class="hljs-string">"date"</span>: date_str,
    <span class="hljs-string">"tweetContent"</span>: tweet_content
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a8e6ac391ca4d6ebefa8ed13fa3bc1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=2JwFmY5%2BvKLUIJqJ7mXU6lyU4cQ%3D" alt=" " loading="lazy"/></p>
<p>ç‚¹å‡»å·¦ä¸Šè§’çš„Back to canvasï¼Œå¯ä»¥è¿”å›å·¥ä½œå°ã€‚</p>
<h4 data-id="heading-11">æ­¥éª¤ 4ï¼šè½¬æ¢ä¸ºæ–‡æœ¬æ–‡ä»¶</h4>
<p>æ·»åŠ ä¸‹ä¸€ä¸ªèŠ‚ç‚¹Convert to Fileï¼ˆä¿å­˜ä¸ºæ–‡ä»¶ï¼‰ï¼Œé€‰æ‹©textæ–‡ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ae4d2d5f51b47c991006ddfde31a0a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=UokyTLxUtIgLZ3gqj%2F%2BNWoCulHw%3D" alt=" " loading="lazy"/></p>
<p>ç›´æ¥æ‹–åˆ°å·¦ä¾§çš„èŠ‚ç‚¹åˆ°å³ä¾§å°±æ˜¯è¾“å…¥ï¼ˆå¦‚æœå·¦ä¾§æ²¡æœ‰ï¼Œæ˜¯å› ä¸ºéœ€è¦ä¸Šä¸€ä¸ªèŠ‚ç‚¹è¿è¡ŒæˆåŠŸæ‰å¯ä»¥ï¼‰ï¼Œç‚¹å‡»Execute stepï¼ˆæ‰§è¡Œæ­¥éª¤ï¼‰æŒ‰é’®ï¼Œå³ä¾§outputé‚£è¾¹å°±ä¼šå‡ºç°è¾“å‡ºçš„å†…å®¹ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©äº†é¢„è§ˆï¼Œå¯ä»¥çœ‹åˆ°æˆåŠŸæ˜¾ç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f67c821a13974f74808887f0238e6ee5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=85GdX3AIMzpKYkPJtHDlbaiCfoU%3D" alt=" " loading="lazy"/></p>
<h4 data-id="heading-12">æ­¥éª¤ 5ï¼šå†™å…¥æœ¬åœ°ç£ç›˜</h4>
<p>å†æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹Write Files from Diskã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68a3290c2cc547fc9fa6facc6f0720cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=5HjumOFXO6HD05Pp644LTHqhv10%3D" alt=" " loading="lazy"/></p>
<p>åœ¨File Path and Nameè¾“å…¥æ–‡ä»¶åç§°ï¼ˆä¾‹å¦‚ï¼šlucianaib.textï¼‰ï¼Œç‚¹å‡»Execute stepï¼ˆæ‰§è¡Œæ­¥éª¤ï¼‰æŒ‰é’®ï¼Œå³ä¾§outputé‚£è¾¹å°±ä¼šå‡ºç°è¾“å‡ºçš„å†…å®¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a12a061ae1bb4f4a896c628a1037552f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=j3KYflCt%2Ft0%2Fx1i7fXp2WfwyH5o%3D" alt=" " loading="lazy"/></p>
<h4 data-id="heading-13">æ­¥éª¤ 6ï¼šä¸‹è½½æ–‡ä»¶ &amp; ä¿å­˜å·¥ä½œæµ</h4>
<p>ç‚¹å‡»å³è¾¹çš„Downloadæ–‡ä»¶å°±è¢«ä¸‹è½½ä¸‹æ¥äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d2df39a56b44db79c8776af3276fa04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=UCqnWeKGuz7w0Jf1sCvJkDf1QXU%3D" alt=" " loading="lazy"/></p>
<p>å›åˆ°ä¸»ç•Œé¢æˆ‘ä»¬ç‚¹å‡»Execute workflowï¼Œæ‰§è¡Œæ•´ä¸ªå·¥ä½œæµï¼ŒæˆåŠŸçš„å³ä¸‹è§’éƒ½ä¼šå‡ºç°ä¸€ä¸ªå‹¾çš„å›¾æ ‡</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e72ca935fb9c41f6964361cf4f4c1d32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=l59ElJltjn9drOfRgevNCdgDmhI%3D" alt=" " loading="lazy"/></p>
<p>ä¸€åˆ‡éƒ½æ²¡é—®é¢˜åå°±å¯ä»¥ç‚¹å‡»å³ä¸Šè§’çš„<code>save</code>ä¿å­˜äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/392b3afa4e8541bcacd107bba0c7fafe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=02oZOQuPNZMDBUbqTYnF9SN0IoA%3D" alt=" " loading="lazy"/></p>
<p>å·¦ä¸Šè§’è¿™è¾¹å¯ä»¥æ›´æ”¹å·¥ä½œæµçš„åç§°å’Œæ·»åŠ æ ‡ç­¾ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8bd5379080c45569b976b82edd2951c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=i4%2BnZ1SaeMom6DjO7Hc0Eagz2oE%3D" alt=" " loading="lazy"/></p>
<p>å³ä¾§è¿™è¾¹å¯ä»¥å¤åˆ¶ï¼Œä¸‹è½½ï¼Œå¯¼å…¥å·¥ä½œæµç­‰æ“ä½œã€‚å¯ä»¥æ–¹ä¾¿æŠŠå·¥ä½œæµåˆ†äº«ç»™åˆ«äººæˆ–ç›´æ¥ä½¿ç”¨åˆ«äººçš„å·¥ä½œæµã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1d9f6686e4a455eb1f463b6e6c74a8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348231&amp;x-signature=Rdl2DPQLXqAaJ6vJzsAUgyb4Mck%3D" alt=" " loading="lazy"/></p>
<blockquote>
<p>æç¤ºï¼šå·¥ä½œæµæ”¯æŒä¸€é”®å¯¼å‡º/å¯¼å…¥ï¼Œæ–¹ä¾¿åˆ†äº«æˆ–è¿ç§»ã€‚</p>
</blockquote>
<h2 data-id="heading-14">å­¦ä¹ è·¯å¾„</h2>
<p>LucianaiBå¸¦ä½ ä» 0 åˆ° 1 ç©è½¬ N8N çŸ¥è¯†åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flucianaib.feishu.cn%2Fwiki%2FYQMHwn0Bli1LFrkeHbMcdqQ6ndg%3Ffrom%3Dfrom_copylink" target="_blank" title="https://lucianaib.feishu.cn/wiki/YQMHwn0Bli1LFrkeHbMcdqQ6ndg?from=from_copylink" ref="nofollow noopener noreferrer">LucianaiBå¸¦ä½ ä» 0 åˆ° 1 ç©è½¬ N8N</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†è®©å¤§æ¨¡å‹â€œèƒ¡è¯´å…«é“â€äº†ï¼LangChain çš„ JsonOutputParser æ•™ä½ é©¯æœ AI è¾“å‡º]]></title>    <link>https://juejin.cn/post/7587776610436038671</link>    <guid>https://juejin.cn/post/7587776610436038671</guid>    <pubDate>2025-12-26T09:45:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587776610436038671" data-draft-id="7587277503947882496" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†è®©å¤§æ¨¡å‹â€œèƒ¡è¯´å…«é“â€äº†ï¼LangChain çš„ JsonOutputParser æ•™ä½ é©¯æœ AI è¾“å‡º"/> <meta itemprop="keywords" content="LangChain,LLM,AIGC"/> <meta itemprop="datePublished" content="2025-12-26T09:45:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”Ÿæ¤°ä¸ç»’æ‹¿é“"/> <meta itemprop="url" content="https://juejin.cn/user/4185180725584116"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†è®©å¤§æ¨¡å‹â€œèƒ¡è¯´å…«é“â€äº†ï¼LangChain çš„ JsonOutputParser æ•™ä½ é©¯æœ AI è¾“å‡º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4185180725584116/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”Ÿæ¤°ä¸ç»’æ‹¿é“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:45:17.000Z" title="Fri Dec 26 2025 09:45:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä»â€œå‰ç«¯æ¨¡å—åŒ–â€åˆ°â€œAIè¾“å‡ºæ ¼å¼â€ï¼Œæˆ‘ä»¬éƒ½åœ¨å’Œæ··ä¹±åšæ–—äº‰**</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ§  å¼•å­ï¼šå½“ AI å¼€å§‹â€œè‡ªç”±å‘æŒ¥â€</h2>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼Ÿ</p>
<p>ä½ è¾›è¾›è‹¦è‹¦å†™äº†ä¸€å †æç¤ºè¯ï¼ˆpromptï¼‰ï¼Œæ»¡æ€€æœŸå¾…åœ°è°ƒç”¨å¤§æ¨¡å‹ï¼Œç»“æœå®ƒå›ä½ ä¸€æ®µï¼š</p>
<blockquote>
<p>â€œå¥½çš„ï¼å…³äº Promiseï¼Œè¿™æ˜¯ä¸€ä¸ª JavaScript ä¸­ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„å¯¹è±¡ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯â€¦â€¦ï¼ˆçœç•¥ 300 å­—å°ä½œæ–‡ï¼‰â€</p>
</blockquote>
<p>è€Œä½ çœŸæ­£æƒ³è¦çš„ï¼Œåªæ˜¯ä¸€ä¸ªå¹²å‡€ã€ç»“æ„åŒ–çš„ JSONï¼</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Promise"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"core"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„ä»£ç†å¯¹è±¡"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"useCase"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"ç½‘ç»œè¯·æ±‚"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"å®šæ—¶ä»»åŠ¡"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"å¹¶å‘æ§åˆ¶"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"difficulty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸­ç­‰"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ˜¯ä¸æ˜¯æƒ³ç ¸é”®ç›˜ï¼Ÿåˆ«æ€¥â€”â€”<strong>LangChain çš„ <code>JsonOutputParser</code> å°±æ˜¯æ¥æ‹¯æ•‘ä½ çš„ï¼</strong></p>
<hr/>
<h2 data-id="heading-1">ğŸ“¦ èƒŒæ™¯å°å‰§åœºï¼šä»å‰ç«¯æ¨¡å—åŒ–è¯´èµ·</h2>
<p>åœ¨è®² LangChain ä¹‹å‰ï¼Œå’±ä»¬å…ˆç©¿è¶Šå›â€œè¿œå¤æ—¶ä»£â€çš„å‰ç«¯å¼€å‘ã€‚</p>
<h3 data-id="heading-2">ğŸ•°ï¸ æ²¡æœ‰æ¨¡å—åŒ–çš„å¹´ä»£</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"a.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"b.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-number">18</span>);
  p.<span class="hljs-title function_">sayName</span>(); <span class="hljs-comment">// å¸Œæœ› a.js é‡Œå®šä¹‰äº† Person...</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>é‚£æ—¶å€™ï¼ŒJS æ–‡ä»¶ä¹‹é—´é â€œé»˜å¥‘â€å…±äº«å˜é‡ï¼Œä¸€ä¸å°å¿ƒå°±å…¨å±€æ±¡æŸ“ã€å‘½åå†²çªã€ä¾èµ–é¡ºåºé”™ä¹±â€¦â€¦ç®€ç›´æ˜¯â€œæ··æ²Œå®‡å®™â€ã€‚</p>
<p>åæ¥ï¼ŒNode.js å¸¦æ¥äº† <strong>CommonJS</strong>ï¼ŒES6 æ¨å‡ºäº† <strong>import/export</strong>ï¼Œå‰ç«¯ç»ˆäºæœ‰äº†æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œã€‚</p>
<blockquote>
<p><strong>æ¨¡å—åŒ– = çº¦å®š + ç»“æ„ + å¯é¢„æµ‹æ€§</strong></p>
</blockquote>
<p>è€Œä»Šå¤©ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨å¤§æ¨¡å‹æ—¶ï¼Œä¹Ÿé¢ä¸´åŒæ ·çš„é—®é¢˜ï¼š<strong>è¾“å‡ºå¤ªâ€œè‡ªç”±â€ï¼Œç¼ºä¹ç»“æ„</strong>ã€‚<br/>
äºæ˜¯ï¼ŒLangChain ç»™æˆ‘ä»¬å¸¦æ¥äº†â€œAI ä¸–ç•Œçš„æ¨¡å—åŒ–å·¥å…·â€â€”â€”<code>OutputParser</code>ã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ”§ LangChain çš„æ•‘æ˜Ÿï¼šJsonOutputParser</h2>
<p><code>JsonOutputParser</code> æ˜¯ LangChain æä¾›çš„ä¸€ä¸ª<strong>è¾“å‡ºè§£æå™¨</strong>ï¼Œä¸“é—¨ç”¨æ¥æŠŠ LLM è¿”å›çš„â€œæ•£æ–‡â€å˜æˆ<strong>ç»“æ„åŒ–æ•°æ®</strong>ï¼ˆæ¯”å¦‚ JSONï¼‰ã€‚é…åˆ Zodï¼ˆä¸€ä¸ªè¶…å¥½ç”¨çš„ TypeScript æ ¡éªŒåº“ï¼‰ï¼Œè¿˜èƒ½è‡ªåŠ¨æ ¡éªŒå­—æ®µç±»å‹ã€æšä¸¾å€¼ã€æ•°ç»„ç»“æ„ç­‰ã€‚</p>
<h3 data-id="heading-4">âœ¨ å®ƒèƒ½åšä»€ä¹ˆï¼Ÿ</h3>
<ul>
<li>å¼ºåˆ¶æ¨¡å‹åªè¾“å‡º JSONï¼ˆé€šè¿‡æç¤ºè¯çº¦æŸï¼‰</li>
<li>è‡ªåŠ¨è§£æå­—ç¬¦ä¸²ä¸º JS å¯¹è±¡</li>
<li>ç”¨ Zod Schema éªŒè¯æ•°æ®åˆæ³•æ€§</li>
<li>æŠ¥é”™æ—¶å‘Šè¯‰ä½ å“ªé‡Œä¸ç¬¦åˆé¢„æœŸï¼ˆè€Œä¸æ˜¯é»˜é»˜è¿”å› undefinedï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ› ï¸ å®æˆ˜ï¼šç”¨ LangChain è§£æâ€œå‰ç«¯æ¦‚å¿µâ€</h2>
<p>å‡è®¾æˆ‘ä»¬è¦è®© AI è§£é‡Šä¸€ä¸ªå‰ç«¯æ¦‚å¿µï¼ˆæ¯”å¦‚ <code>Promise</code>ï¼‰ï¼Œå¹¶è¿”å›æ ‡å‡†åŒ– JSONã€‚</p>
<h3 data-id="heading-6">ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ Schemaï¼ˆç”¨ Zodï¼‰</h3>
<pre><code class="hljs language-css" lang="css">import { z } <span class="hljs-selector-tag">from</span> 'zod';

const FrontendConceptSchema = z<span class="hljs-selector-class">.object</span>({
  name: z.<span class="hljs-built_in">string</span>().<span class="hljs-built_in">describe</span>(<span class="hljs-string">"æ¦‚å¿µåç§°"</span>),
  core: z.<span class="hljs-built_in">string</span>().<span class="hljs-built_in">describe</span>(<span class="hljs-string">"æ ¸å¿ƒè¦ç‚¹"</span>),
  useCase: z.<span class="hljs-built_in">array</span>(z.<span class="hljs-built_in">string</span>()).<span class="hljs-built_in">describe</span>(<span class="hljs-string">"å¸¸è§ä½¿ç”¨åœºæ™¯"</span>),
  difficulty: z.<span class="hljs-built_in">enum</span>([<span class="hljs-string">'ç®€å•'</span>, <span class="hljs-string">'ä¸­ç­‰'</span>, <span class="hljs-string">'å¤æ‚'</span>]).<span class="hljs-built_in">describe</span>(<span class="hljs-string">"å­¦ä¹ éš¾åº¦"</span>)
});
</code></pre>
<blockquote>
<p>è¿™å°±åƒç»™ AI å‘äº†ä¸€ä»½â€œå¡«ç©ºè¯•å·â€ï¼Œè¿˜è§„å®šäº†æ¯é“é¢˜åªèƒ½å¡«ä»€ä¹ˆç±»å‹ï¼</p>
</blockquote>
<h3 data-id="heading-7">ç¬¬äºŒæ­¥ï¼šåˆ›å»º Parser å’Œ Prompt</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JsonOutputParser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/output_parsers'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;

<span class="hljs-keyword">const</span> jsonParser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonOutputParser</span>(<span class="hljs-title class_">FrontendConceptSchema</span>);

<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">PromptTemplate</span>.<span class="hljs-title function_">fromTemplate</span>(<span class="hljs-string">`
ä½ æ˜¯ä¸€ä¸ªåªä¼šè¾“å‡º JSON çš„ APIï¼Œä¸å…è®¸è¾“å‡ºä»»ä½•è§£é‡Šæ€§æ–‡å­—ã€‚

âš ï¸ ä½ å¿…é¡»ã€åªè¿”å›ã€‘ç¬¦åˆä»¥ä¸‹ Schema çš„ JSONï¼š
- ä¸å…è®¸å¢åŠ æˆ–å‡å°‘å­—æ®µ
- å­—æ®µåå¿…é¡»å®Œå…¨ä¸€è‡´
- è¿”å›ç»“æœå¿…é¡»èƒ½è¢« JSON.parse æˆåŠŸè§£æ

{format_instructions}

å‰ç«¯æ¦‚å¿µï¼š{topic}
`</span>);
</code></pre>
<p>æ³¨æ„ <code>{format_instructions}</code> â€”â€”è¿™æ˜¯ <code>JsonOutputParser</code> è‡ªåŠ¨ç”Ÿæˆçš„æ ¼å¼è¯´æ˜ï¼Œä¼šå‘Šè¯‰æ¨¡å‹å…·ä½“è¯¥æ€ä¹ˆå†™ JSONï¼</p>
<p>æ¯”å¦‚å®ƒå¯èƒ½ç”Ÿæˆï¼š</p>
<blockquote>
<p>The output should be a markdown code snippet formatted in the following schema:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"core"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"useCase"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span> ...<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"difficulty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç®€å•"</span> | <span class="hljs-string">"ä¸­ç­‰"</span> | <span class="hljs-string">"å¤æ‚"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</blockquote>
<h3 data-id="heading-8">ç¬¬ä¸‰æ­¥ï¼šç»„è£… Chain å¹¶è°ƒç”¨</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">chain</span> = prompt.pipe(model).pipe(jsonParser)<span class="hljs-comment">;</span>

const <span class="hljs-attr">response</span> = await chain.invoke({
  topic: 'Promise',
  format_instructions: jsonParser.getFormatInstructions(),
})<span class="hljs-comment">;</span>

console.log(response)<span class="hljs-comment">;</span>
// âœ… å¾—åˆ°å¹²å‡€çš„ JS å¯¹è±¡ï¼
</code></pre>
<hr/>
<h2 data-id="heading-9">ğŸ˜‚ ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼Ÿâ€”â€”å› ä¸º AI å¤ªâ€œäººæ€§åŒ–â€äº†ï¼</h2>
<p>å¤§æ¨¡å‹å¤©ç”Ÿå–œæ¬¢â€œèŠå¤©â€ï¼Œå®ƒæ€»æƒ³å¤šè¯´å‡ å¥ï¼šâ€œäº²ï¼Œä½ è¿˜æƒ³çŸ¥é“ async/await å—ï¼Ÿâ€<br/>
ä½†æˆ‘ä»¬çš„ç¨‹åºéœ€è¦çš„æ˜¯<strong>ç¡®å®šæ€§</strong>ï¼Œä¸æ˜¯â€œè´´å¿ƒå®¢æœâ€ã€‚</p>
<blockquote>
<p><strong>AI çš„è‡ªç”± = ç¨‹åºå‘˜çš„å™©æ¢¦</strong><br/>
<strong>ç»“æ„åŒ–çš„è¾“å‡º = è‡ªåŠ¨åŒ–çš„åŸºçŸ³</strong></p>
</blockquote>
<p>ç”¨ <code>JsonOutputParser</code>ï¼Œç›¸å½“äºç»™ AI æˆ´ä¸Šâ€œå˜´å¥—â€ï¼Œåªè®©å®ƒå JSONï¼Œä¸è®¸åºŸè¯ï¼</p>
<hr/>
<h2 data-id="heading-10">ğŸš€ è¿›é˜¶æ€è€ƒï¼šä¸åªæ˜¯ JSONï¼Œæ›´æ˜¯å¥‘çº¦</h2>
<p>å…¶å®ï¼Œ<code>JsonOutputParser</code> èƒŒåçš„æ€æƒ³ï¼Œå’Œå‰ç«¯æ¨¡å—åŒ–ã€API è®¾è®¡ã€TypeScript ç±»å‹ç³»ç»Ÿä¸€è„‰ç›¸æ‰¿ï¼š</p>
<blockquote>
<p><strong>æ˜ç¡®è¾“å…¥è¾“å‡ºï¼Œæ‰èƒ½æ„å»ºå¯é ç³»ç»Ÿã€‚</strong></p>
</blockquote>
<p>å½“ä½ ç”¨ Zod å®šä¹‰ Schema æ—¶ï¼Œä½ ä¸ä»…æ˜¯åœ¨çº¦æŸ AIï¼Œæ›´æ˜¯åœ¨<strong>å»ºç«‹äººä¸ AI ä¹‹é—´çš„å¥‘çº¦</strong>ã€‚è¿™ä¸ªå¥‘çº¦è®©åç»­çš„æ•°æ®å¤„ç†ã€UI æ¸²æŸ“ã€æ•°æ®åº“å­˜å‚¨å˜å¾—å®‰å…¨å¯é ã€‚</p>
<hr/>
<h2 data-id="heading-11">âœ… æ€»ç»“ï¼šä¸‰å¥è¯è®°ä½ JsonOutputParser</h2>
<ol>
<li><strong>AI å¤©ç”Ÿçˆ±å•°å—¦ï¼ŒJsonOutputParser è®©å®ƒé—­å˜´åªå JSONã€‚</strong></li>
<li><strong>Zod Schema æ˜¯â€œæ³•å¾‹â€ï¼Œparser æ˜¯â€œè­¦å¯Ÿâ€ï¼Œç¡®ä¿è¾“å‡ºåˆæ³•åˆè§„ã€‚</strong></li>
<li><strong>ç»“æ„åŒ–è¾“å‡º = è‡ªåŠ¨åŒ–æµæ°´çº¿çš„ç¬¬ä¸€å—ç –ã€‚</strong></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº‹ä»¶å§”æ‰˜ï¼ˆEventÂ Delegationï¼‰çš„åŸç†]]></title>    <link>https://juejin.cn/post/7588007285545910278</link>    <guid>https://juejin.cn/post/7588007285545910278</guid>    <pubDate>2025-12-26T10:01:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285545910278" data-draft-id="7587825267877740585" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº‹ä»¶å§”æ‰˜ï¼ˆEventÂ Delegationï¼‰çš„åŸç†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T10:01:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="cindershade"/> <meta itemprop="url" content="https://juejin.cn/user/2587590326494763"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº‹ä»¶å§”æ‰˜ï¼ˆEventÂ Delegationï¼‰çš„åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2587590326494763/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    cindershade
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:01:25.000Z" title="Fri Dec 26 2025 10:01:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¼˜åŒ–å‰çš„é—®é¢˜</h3>
<p>åŸæ¥çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-TSX" lang="TSX">{allCategories.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">category</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
    <span class="hljs-attr">key</span>=<span class="hljs-string">{category.id}</span>
    <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.categoryItem}</span>
    <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onCategoryChange(category.slug)}  // âŒ æ¯ä¸ª item éƒ½åˆ›å»ºæ–°å‡½æ•°
  &gt;
    {/* ... */}
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
))}
</code></pre>
<p>é—®é¢˜åˆ†æï¼š</p>
<ol>
<li>æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šä¸ºæ¯ä¸ªåˆ†ç±»é¡¹åˆ›å»ºä¸€ä¸ªæ–°çš„ç®­å¤´å‡½æ•°ï¼š() =&gt; onCategoryChange(category.slug)</li>
</ol>

<ol start="2">
<li>å‡è®¾æœ‰ 20 ä¸ªåˆ†ç±»ï¼Œå°±ä¼šåˆ›å»º 20 ä¸ªå‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¼šå½¢æˆé—­åŒ…ï¼Œå ç”¨å†…å­˜</li>
</ol>

<ol start="3">
<li>æ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼ŒReact ä¼šè®¤ä¸ºÂ onClick æ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•°å¼•ç”¨ï¼Œå¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„å­ç»„ä»¶é‡æ–°æ¸²æŸ“</li>
</ol>

<ol start="4">
<li>è™½ç„¶é€šå¸¸ä¸æ˜¯æ€§èƒ½ç“¶é¢ˆï¼Œä½†åœ¨åˆ†ç±»æ•°é‡å¾ˆå¤šæ—¶ï¼Œè¿™ä¼šé€ æˆä¸å¿…è¦çš„å¼€é”€</li>
</ol>
<h3 data-id="heading-1">äºŒã€äº‹ä»¶å§”æ‰˜ï¼ˆEventÂ Delegationï¼‰çš„åŸç†</h3>
<p>äº‹ä»¶å§”æ‰˜å°†äº‹ä»¶å¤„ç†å‡½æ•°ç»‘å®šåˆ°çˆ¶å®¹å™¨ä¸Šï¼Œè€Œä¸æ˜¯æ¯ä¸ªå­å…ƒç´ ã€‚åˆ©ç”¨äº‹ä»¶å†’æ³¡ï¼Œç‚¹å‡»å­å…ƒç´ æ—¶ï¼Œäº‹ä»¶ä¼šå†’æ³¡åˆ°çˆ¶å®¹å™¨ï¼Œçˆ¶å®¹å™¨çš„äº‹ä»¶å¤„ç†å‡½æ•°æ¥æ”¶äº‹ä»¶ï¼Œå¹¶æ ¹æ®ç›®æ ‡å…ƒç´ æ‰§è¡Œç›¸åº”é€»è¾‘ã€‚äº‹ä»¶å†’æ³¡ç¤ºæ„å›¾ï¼š</p>
<pre><code class="hljs language-TEXT" lang="TEXT">ç‚¹å‡»å­å…ƒç´  â†’ äº‹ä»¶å†’æ³¡ â†’ çˆ¶å®¹å™¨æ•è·äº‹ä»¶ â†’ æ ¹æ® target åˆ¤æ–­å¤„ç†é€»è¾‘
</code></pre>
<h3 data-id="heading-2">ä¸‰ã€ä¼˜åŒ–åçš„å®ç°</h3>
<h4 data-id="heading-3">1.Â åœ¨çˆ¶å®¹å™¨ä¸Šç»‘å®šç»Ÿä¸€çš„äº‹ä»¶å¤„ç†å‡½æ•°</h4>
<pre><code class="hljs language-TSX" lang="TSX"> <span class="hljs-comment">// å¤„ç†åˆ†ç±»åˆ—è¡¨ç‚¹å‡» - ä½¿ç”¨äº‹ä»¶å§”æ‰˜</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCategoryListClick</span> = (<span class="hljs-params">e: React.MouseEvent&lt;HTMLDivElement&gt;</span>) =&gt; {
    <span class="hljs-keyword">const</span> target = e.<span class="hljs-property">target</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>;
    <span class="hljs-comment">// å‘ä¸ŠæŸ¥æ‰¾æœ€è¿‘çš„ categoryItem å…ƒç´ </span>
    <span class="hljs-keyword">const</span> categoryItem = target.<span class="hljs-title function_">closest</span>(<span class="hljs-string">`.<span class="hljs-subst">${styles.categoryItem}</span>`</span>);
    <span class="hljs-keyword">if</span> (categoryItem) {
      <span class="hljs-keyword">const</span> categorySlug = categoryItem.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'data-category-slug'</span>);
      <span class="hljs-keyword">if</span> (categorySlug) {
        <span class="hljs-title function_">onCategoryChange</span>(categorySlug);
      }
    }
  };
</code></pre>
<p>å‡½æ•°æ‰§è¡Œæµç¨‹ï¼š</p>
<ol>
<li>e.targetÂ è·å–è¢«ç‚¹å‡»çš„å…·ä½“å…ƒç´ ï¼ˆå¯èƒ½æ˜¯å›¾æ ‡ã€æ–‡å­—ç­‰ï¼‰</li>
</ol>

<ol start="2">
<li>closest()Â å‘ä¸ŠæŸ¥æ‰¾æœ€è¿‘çš„Â .categoryItemÂ å…ƒç´ </li>
</ol>

<ol start="3">
<li>ä»è¯¥å…ƒç´ è¯»å–Â data-category-slugÂ å±æ€§</li>
</ol>

<ol start="4">
<li>è°ƒç”¨Â onCategoryChange(categorySlug)</li>
</ol>
<h4 data-id="heading-4">2.Â åœ¨çˆ¶å®¹å™¨ä¸Šç»‘å®šäº‹ä»¶</h4>
<pre><code class="hljs language-HTML" lang="HTML">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.categoryList}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleCategoryListClick}</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">3.Â ä¸ºæ¯ä¸ª itemÂ æ·»åŠ  data å±æ€§</h4>
<pre><code class="hljs language-ini" lang="ini">  <span class="hljs-attr">data-category-slug</span>={category.slug}
</code></pre>
<p>ä½¿ç”¨Â data-*Â å±æ€§å­˜å‚¨åˆ†ç±»æ ‡è¯†ï¼Œç¬¦åˆ HTML5 è§„èŒƒã€‚</p>
<h3 data-id="heading-6">å››ã€ä»£ç æ‰§è¡Œæµç¨‹ç¤ºä¾‹</h3>
<p>å‡è®¾ç”¨æˆ·ç‚¹å‡»äº†"çƒ­é—¨å·¥å…·"åˆ†ç±»é¡¹ï¼š</p>
<pre><code class="hljs language-TEXT" lang="TEXT">1. ç”¨æˆ·ç‚¹å‡» "çƒ­é—¨å·¥å…·" æ–‡å­—
   â†“
2. äº‹ä»¶å†’æ³¡åˆ° &lt;div className={styles.categoryList}&gt;
   â†“
3. handleCategoryListClick å‡½æ•°è¢«è§¦å‘
   â†“
4. e.target = &lt;span className={styles.categoryName}&gt;çƒ­é—¨å·¥å…·&lt;/span&gt;
   â†“
5. target.closest('.categoryItem') å‘ä¸ŠæŸ¥æ‰¾
   â†’ æ‰¾åˆ° &lt;div className={styles.categoryItem} data-category-slug="hot"&gt;
   â†“
6. categoryItem.getAttribute('data-category-slug') 
   â†’ è¿”å› "hot"
   â†“
7. è°ƒç”¨ onCategoryChange("hot")
   â†“
8. å®Œæˆåˆ†ç±»åˆ‡æ¢
</code></pre>
<h3 data-id="heading-7">äº”ã€ä¸ºä»€ä¹ˆä½¿ç”¨Â closest()ï¼Ÿ</h3>
<p>å› ä¸ºç‚¹å‡»å¯èƒ½å‘ç”Ÿåœ¨ item å†…éƒ¨çš„ä»»æ„å…ƒç´ ä¸Šï¼ˆå›¾æ ‡ã€æ–‡å­—ç­‰ï¼‰ã€‚closest()Â å¯ä»¥å‘ä¸ŠæŸ¥æ‰¾æœ€è¿‘çš„åŒ¹é…å…ƒç´ ï¼š</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.categoryItem}</span>Â <span class="hljs-attr">data-category-slug</span>=<span class="hljs-string">"hot"</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.categoryContent}</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.categoryIcon}</span>&gt;</span>ICON<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>Â Â //Â â†Â å¯èƒ½ç‚¹å‡»è¿™é‡Œ
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>çƒ­é—¨å·¥å…·<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â â†Â ä¹Ÿå¯èƒ½ç‚¹å‡»è¿™é‡Œ
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>æ— è®ºç‚¹å‡»å›¾æ ‡è¿˜æ˜¯æ–‡å­—ï¼Œclosest()Â éƒ½èƒ½æ‰¾åˆ°å¤–å±‚çš„Â categoryItemã€‚</p>
<h3 data-id="heading-8">### å…­ã€å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆçš„å¯¹æ¯”</h3>
<ol>
<li>åˆ›å»ºå•ç‹¬çš„å­ç»„ä»¶ +Â useCallback</li>
</ol>
<ul>
<li>ä¼˜ç‚¹ï¼šå°è£…æ€§å¥½</li>
</ul>

<ul>
<li>ç¼ºç‚¹ï¼šå¢åŠ äº†ç»„ä»¶å±‚çº§å’Œå¤æ‚åº¦</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Intersection Observer çš„å®æˆ˜æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7587995707165491219</link>    <guid>https://juejin.cn/post/7587995707165491219</guid>    <pubDate>2025-12-26T10:05:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587995707165491219" data-draft-id="7587582213060689974" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Intersection Observer çš„å®æˆ˜æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T10:05:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="cindershade"/> <meta itemprop="url" content="https://juejin.cn/user/2587590326494763"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Intersection Observer çš„å®æˆ˜æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2587590326494763/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    cindershade
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:05:55.000Z" title="Fri Dec 26 2025 10:05:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    16
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Intersection Observer çš„å®æˆ˜æ–¹æ¡ˆ</h2>
<ul>
<li><strong>ä¼˜åŒ–ç›®æ ‡</strong>ï¼šé•¿åˆ—è¡¨é¦–å±æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<h4 data-id="heading-1">1- ç”¨æˆ·åœºæ™¯</h4>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·è¡Œä¸ºè·¯å¾„ï¼š
<span class="hljs-bullet">1.</span> æ‰“å¼€ AI å·¥å…·ç®±é¡µé¢
<span class="hljs-bullet">2.</span> æµè§ˆçƒ­é—¨å·¥å…·ï¼ˆé¦–å±ï¼‰
<span class="hljs-bullet">3.</span> æ»šåŠ¨æˆ–ç‚¹å‡»åˆ†ç±»å¯¼èˆªæŸ¥çœ‹ç‰¹å®šåˆ†ç±»å·¥å…·
<span class="hljs-bullet">4.</span> ç‚¹å‡»å·¥å…·å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…
</code></pre>
<p><strong>å…³é”®é—®é¢˜</strong>ï¼šç”¨æˆ·é¦–æ¬¡è¿›å…¥é¡µé¢æ—¶ï¼Œå¤§éƒ¨åˆ†å·¥å…·å¹¶ä¸åœ¨è§†å£å†…ï¼Œä½†åˆç‰ˆå®ç°ä¼šä¸€æ¬¡æ€§æ¸²æŸ“æ‰€æœ‰å·¥å…·ã€‚</p>
<hr/>
<h3 data-id="heading-2">åˆç‰ˆå®ç°ä¸æ€§èƒ½ç“¶é¢ˆ</h3>
<h4 data-id="heading-3">2.1 åˆç‰ˆä»£ç ç»“æ„</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// AIToolboxContent.tsx - åˆç‰ˆå®ç°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">AIToolboxContent</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> [allToolsCategories, setAllToolsCategories] = useState&lt;<span class="hljs-title class_">CategoryWithTools</span>[]&gt;([]);
    
    <span class="hljs-comment">// è·å–æ‰€æœ‰å·¥å…·æ•°æ®</span>
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchAllTools</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
            <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> toolApi.<span class="hljs-title function_">getAllTools</span>();
            <span class="hljs-keyword">if</span> (response.<span class="hljs-property">code</span> === <span class="hljs-number">200</span> &amp;&amp; response.<span class="hljs-property">data</span>) {
                <span class="hljs-title function_">setAllToolsCategories</span>(response.<span class="hljs-property">data</span>);
            }
        };
        <span class="hljs-title function_">fetchAllTools</span>();
    }, []);

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.content}</span>&gt;</span>
            {/* ä¾§è¾¹æ  */}
            <span class="hljs-tag">&lt;<span class="hljs-name">ToggleButton</span> {<span class="hljs-attr">...props</span>} /&gt;</span>
            
            {/* ä¸»å†…å®¹åŒº */}
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{rightContainerRef}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.right}</span>&gt;</span>
                {/* çƒ­é—¨å·¥å…· */}
                <span class="hljs-tag">&lt;<span class="hljs-name">ToolList</span>
                    <span class="hljs-attr">title</span>=<span class="hljs-string">"çƒ­é—¨å·¥å…·"</span>
                    <span class="hljs-attr">icon</span>=<span class="hljs-string">{getCategoryIcon(</span>'<span class="hljs-attr">hot</span>')}
                    <span class="hljs-attr">tools</span>=<span class="hljs-string">{featuredTools}</span>
                /&gt;</span>

                {/* ! ä¸€æ¬¡æ€§æ¸²æŸ“æ‰€æœ‰åˆ†ç±» */}
                {allToolsCategories.map((category) =&gt; {
                    const categoryTools = category.tools.map((tool) =&gt; ({
                        id: tool.id,
                        title: tool.toolName,
                        description: tool.toolDesc,
                        iconUrl: tool.iconUrl,
                    }));

                    return (
                        <span class="hljs-tag">&lt;<span class="hljs-name">ToolList</span>
                            <span class="hljs-attr">key</span>=<span class="hljs-string">{category.categoryId}</span>
                            <span class="hljs-attr">title</span>=<span class="hljs-string">{category.categoryName}</span>
                            <span class="hljs-attr">icon</span>=<span class="hljs-string">{getCategoryIcon(category.categorySlug)}</span>
                            <span class="hljs-attr">tools</span>=<span class="hljs-string">{categoryTools}</span>
                        /&gt;</span>
                    );
                })}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
}
</code></pre>
<h4 data-id="heading-4">2.2 ç»„ä»¶å±‚çº§ç»“æ„</h4>
<pre><code class="hljs language-scss" lang="scss">AIToolboxContent (çˆ¶ç»„ä»¶)
â”œâ”€â”€ ToggleButton (ä¾§è¾¹æ )
â””â”€â”€ RightContainer (ä¸»å†…å®¹åŒº)
    â”œâ”€â”€ ToolList (çƒ­é—¨å·¥å…·)
    â”‚   â””â”€â”€ ToolCard Ã— <span class="hljs-number">20</span>
    â”œâ”€â”€ ToolList (AI å†™ä½œ)
    â”‚   â””â”€â”€ ToolCard Ã— <span class="hljs-number">35</span>
    â”œâ”€â”€ ToolList (å›¾åƒå¤„ç†)
    â”‚   â””â”€â”€ ToolCard Ã— <span class="hljs-number">42</span>
    â”œâ”€â”€ ToolList (è§†é¢‘ç”Ÿæˆ)
    â”‚   â””â”€â”€ ToolCard Ã— <span class="hljs-number">28</span>
    â””â”€â”€ ... (å…± <span class="hljs-number">15</span>+ ä¸ª ToolList)
        â””â”€â”€ ToolCard Ã— N 
</code></pre>
<h4 data-id="heading-5">2.3 æ€§èƒ½ç“¶é¢ˆåˆ†æ</h4>
<h5 data-id="heading-6">é—®é¢˜ 1ï¼šé¦–å±æ¸²æŸ“æ—¶é—´é•¿</h5>
<pre><code class="hljs language-diff" lang="diff">åˆç‰ˆæ€§èƒ½æŒ‡æ ‡ï¼ˆ1000+ å·¥å…·ï¼‰ï¼š
<span class="hljs-deletion">- é¦–æ¬¡æ¸²æŸ“æ—¶é—´ï¼š2.5s - 3.5s</span>
<span class="hljs-deletion">- DOM èŠ‚ç‚¹æ•°ï¼š3000+</span>
<span class="hljs-deletion">- å†…å­˜å ç”¨ï¼š~80MB</span>
<span class="hljs-deletion">- FCP (First Contentful Paint)ï¼š1.8s</span>
<span class="hljs-deletion">- TTI (Time to Interactive)ï¼š3.2s</span>
</code></pre>
<h5 data-id="heading-7">é—®é¢˜ 2ï¼šæ— æ•ˆæ¸²æŸ“</h5>
<p><strong>é—®é¢˜æè¿°</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·é¦–å±åªèƒ½çœ‹åˆ° "çƒ­é—¨å·¥å…·" å’Œå‰ 1-2 ä¸ªåˆ†ç±»ï¼ˆçº¦ 50 ä¸ªå·¥å…·ï¼‰</li>
<li>ä½†æµè§ˆå™¨éœ€è¦æ¸²æŸ“å…¨éƒ¨ 1000+ ä¸ªå·¥å…·å¡ç‰‡</li>
<li>å‰©ä½™ 950+ ä¸ªä¸åœ¨è§†å£å†…çš„ç»„ä»¶å®Œå…¨æ˜¯æ— æ•ˆæ¸²æŸ“</li>
</ul>
<h5 data-id="heading-8">é—®é¢˜ 3ï¼šå†…å­˜æµªè´¹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¯ä¸ª ToolCard ç»„ä»¶çš„å†…å­˜å ç”¨ä¼°ç®—</span>
å•ä¸ª <span class="hljs-title class_">ToolCard</span> ç»„ä»¶ï¼š
- <span class="hljs-title class_">React</span> <span class="hljs-title class_">Fiber</span> èŠ‚ç‚¹ï¼š~1KB
- <span class="hljs-variable constant_">DOM</span> èŠ‚ç‚¹ï¼š~2KB
- å›¾ç‰‡èµ„æºï¼š~50KB (æ‡’åŠ è½½å‰)
- äº‹ä»¶ç›‘å¬ï¼š~<span class="hljs-number">0.</span>5KB

<span class="hljs-number">1000</span> ä¸ª <span class="hljs-title class_">ToolCard</span> æ€»è®¡ï¼š
- <span class="hljs-title class_">React</span> å†…å­˜ï¼š~1MB
- <span class="hljs-variable constant_">DOM</span> å†…å­˜ï¼š~2MB
- å›¾ç‰‡å†…å­˜ï¼š~50MB (æœªä¼˜åŒ–)
- æ€»è®¡ï¼š~53MB (ä»…å·¥å…·å¡ç‰‡éƒ¨åˆ†)
</code></pre>
<h5 data-id="heading-9">é—®é¢˜ 4ï¼šæ»šåŠ¨æ€§èƒ½å·®</h5>
<ul>
<li>åˆæ¬¡æ¸²æŸ“åï¼Œæ»šåŠ¨æ—¶ä¼šå‡ºç°è½»å¾®å¡é¡¿</li>
<li>é•¿åˆ—è¡¨å¯¼è‡´æµè§ˆå™¨é‡æ’ï¼ˆreflowï¼‰è®¡ç®—å¤æ‚</li>
</ul>
<h4 data-id="heading-10">3.1 æ–¹æ¡ˆè®¾è®¡</h4>
<h5 data-id="heading-11">æ ¸å¿ƒæ€è·¯</h5>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> åˆå§‹çŠ¶æ€ï¼šåªæ¸²æŸ“é¦–å±å†…å®¹ï¼ˆçƒ­é—¨å·¥å…· + å ä½ç¬¦ï¼‰
<span class="hljs-bullet">2.</span> ç›‘å¬æ»šåŠ¨ï¼šä½¿ç”¨ Intersection Observer ç›‘å¬æ¯ä¸ªåˆ†ç±»å®¹å™¨
<span class="hljs-bullet">3.</span> è§¦å‘åŠ è½½ï¼šå½“åˆ†ç±»å®¹å™¨å³å°†è¿›å…¥è§†å£æ—¶ï¼ˆæå‰ 200pxï¼‰
<span class="hljs-bullet">4.</span> æ¸²æŸ“å†…å®¹ï¼šæ›¿æ¢å ä½ç¬¦ä¸ºå®é™…çš„ ToolList ç»„ä»¶
<span class="hljs-bullet">5.</span> ä¿æŒçŠ¶æ€ï¼šå·²åŠ è½½çš„åˆ†ç±»ä¿æŒæ¸²æŸ“çŠ¶æ€
</code></pre>
<h5 data-id="heading-12">æ•°æ®æµè®¾è®¡</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// çŠ¶æ€è®¾è®¡</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">State</span> {
  <span class="hljs-comment">// æ‰€æœ‰å·¥å…·æ•°æ®ï¼ˆä¸€æ¬¡æ€§è·å–ï¼‰</span>
  <span class="hljs-attr">allToolsCategories</span>: <span class="hljs-title class_">CategoryWithTools</span>[];
  
  <span class="hljs-comment">// è®°å½•å“ªäº›åˆ†ç±»å·²ç»å¯è§</span>
  <span class="hljs-attr">visibleCategories</span>: <span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// ['hot', 'writing', 'image']</span>
}

<span class="hljs-comment">// æ¸²æŸ“é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
  allToolsCategories.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">category</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (visibleCategories.<span class="hljs-title function_">has</span>(category.<span class="hljs-property">slug</span>)) {
      <span class="hljs-comment">// å·²å¯è§ =&gt; æ¸²æŸ“å®Œæ•´ ToolList</span>
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ToolList</span> {<span class="hljs-attr">...category</span>} /&gt;</span></span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// æœªå¯è§ =&gt; æ¸²æŸ“å ä½ç¬¦</span>
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Placeholder</span> /&gt;</span></span>;
    }
  });
}
</code></pre>
<h5 data-id="heading-13">æ¶æ„è®¾è®¡</h5>
<pre><code class="hljs language-sql" lang="sql">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        AIToolboxContent (Container)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  <span class="hljs-keyword">Intersection</span> Observer Setup     â”‚   â”‚
â”‚  â”‚  <span class="hljs-operator">-</span> rootMargin: <span class="hljs-number">200</span>px            â”‚   â”‚
â”‚  â”‚  <span class="hljs-operator">-</span> threshold: <span class="hljs-number">0.01</span>               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  State Management               â”‚   â”‚
â”‚  â”‚  <span class="hljs-operator">-</span> visibleCategories: <span class="hljs-keyword">Set</span>       â”‚   â”‚
â”‚  â”‚  <span class="hljs-operator">-</span> toolListRefs: Map            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Render Logic                   â”‚   â”‚
â”‚  â”‚  <span class="hljs-operator">-</span> Conditional Rendering         â”‚   â”‚
â”‚  â”‚  <span class="hljs-operator">-</span> Placeholder <span class="hljs-operator">/</span> ToolList        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â†“ <span class="hljs-keyword">Scroll</span> Event â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      IntersectionObserver Callback       â”‚
â”‚  <span class="hljs-operator">-</span> Detect <span class="hljs-keyword">Intersection</span>                   â”‚
â”‚  <span class="hljs-operator">-</span> <span class="hljs-keyword">Update</span> visibleCategories             â”‚
â”‚  <span class="hljs-operator">-</span> <span class="hljs-keyword">Trigger</span> Re<span class="hljs-operator">-</span>render                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h3 data-id="heading-14">æ ¸å¿ƒå®ç°</h3>
<h4 data-id="heading-15">4.1 çŠ¶æ€ç®¡ç†</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">AIToolboxContent</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ‰€æœ‰å·¥å…·æ•°æ®ï¼ˆæŒ‰åˆ†ç±»ç»„ç»‡ï¼‰</span>
    <span class="hljs-keyword">const</span> [allToolsCategories, setAllToolsCategories] = useState&lt;<span class="hljs-title class_">CategoryWithTools</span>[]&gt;([]);
    
    <span class="hljs-comment">// å…³é”®çŠ¶æ€ï¼šè®°å½•å“ªäº›åˆ†ç±»å·²ç»å¯è§ï¼ˆè¿›å…¥è¿‡è§†å£ï¼‰</span>
    <span class="hljs-comment">// åˆå§‹å€¼åŒ…å« 'hot'ï¼Œç¡®ä¿çƒ­é—¨å·¥å…·ç«‹å³æ¸²æŸ“</span>
    <span class="hljs-keyword">const</span> [visibleCategories, setVisibleCategories] = useState&lt;<span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;(
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-string">'hot'</span>])
    );

    <span class="hljs-comment">// å³ä¾§æ»šåŠ¨å®¹å™¨çš„å¼•ç”¨ï¼ˆä½œä¸º Intersection Observer çš„ rootï¼‰</span>
    <span class="hljs-keyword">const</span> rightContainerRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>);
    
    <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ª ToolList çš„ DOM å¼•ç”¨ï¼ˆç”¨äºæ»šåŠ¨å’Œè§‚å¯Ÿï¼‰</span>
    <span class="hljs-keyword">const</span> toolListRefs = useRef&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">HTMLDivElement</span>&gt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>());
    
    <span class="hljs-comment">// Intersection Observer å®ä¾‹</span>
    <span class="hljs-keyword">const</span> observerRef = useRef&lt;<span class="hljs-title class_">IntersectionObserver</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
}
</code></pre>
<h4 data-id="heading-16">5.2 Ref ç®¡ç†ç³»ç»Ÿ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è®¾ç½® ToolList ref çš„è¾…åŠ©å‡½æ•°</span>
<span class="hljs-comment">// ä½¿ç”¨ useCallback é¿å…æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å‡½æ•°</span>
<span class="hljs-keyword">const</span> setToolListRef = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">slug: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">element: HTMLDivElement | <span class="hljs-literal">null</span></span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (element) {
        <span class="hljs-comment">// å…ƒç´ æŒ‚è½½ï¼šä¿å­˜å¼•ç”¨å¹¶å¼€å§‹è§‚å¯Ÿ</span>
        toolListRefs.<span class="hljs-property">current</span>.<span class="hljs-title function_">set</span>(slug, element);
        
        <span class="hljs-comment">//  å…³é”®ï¼šç«‹å³å°†å…ƒç´ æ·»åŠ åˆ° Observer ç›‘å¬åˆ—è¡¨</span>
        <span class="hljs-keyword">if</span> (observerRef.<span class="hljs-property">current</span>) {
            observerRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">observe</span>(element);
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å…ƒç´ å¸è½½ï¼šæ¸…ç†å¼•ç”¨å’Œç›‘å¬</span>
        <span class="hljs-keyword">const</span> oldElement = toolListRefs.<span class="hljs-property">current</span>.<span class="hljs-title function_">get</span>(slug);
        <span class="hljs-keyword">if</span> (oldElement &amp;&amp; observerRef.<span class="hljs-property">current</span>) {
            observerRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">unobserve</span>(oldElement);
        }
        toolListRefs.<span class="hljs-property">current</span>.<span class="hljs-title function_">delete</span>(slug);
    }
}, []);
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>é—­åŒ…æ•è·</strong>ï¼šä½¿ç”¨æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰ä¼ é€’ <code>slug</code> å‚æ•°</li>
<li><strong>è‡ªåŠ¨è§‚å¯Ÿ</strong>ï¼šå…ƒç´ æŒ‚è½½æ—¶è‡ªåŠ¨æ·»åŠ åˆ° Observer</li>
<li><strong>æ¸…ç†æœºåˆ¶</strong>ï¼šå…ƒç´ å¸è½½æ—¶è‡ªåŠ¨ç§»</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin Flow æ·±åº¦æ¢ç´¢ä¸å®è·µæŒ‡å—â€”â€”ä¸­éƒ¨ï¼šå®æˆ˜ä¸åº”ç”¨ç¯‡]]></title>    <link>https://juejin.cn/post/7587743345197596724</link>    <guid>https://juejin.cn/post/7587743345197596724</guid>    <pubDate>2025-12-26T10:03:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587743345197596724" data-draft-id="7587738151658815488" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin Flow æ·±åº¦æ¢ç´¢ä¸å®è·µæŒ‡å—â€”â€”ä¸­éƒ¨ï¼šå®æˆ˜ä¸åº”ç”¨ç¯‡"/> <meta itemprop="keywords" content="å‰ç«¯,Android"/> <meta itemprop="datePublished" content="2025-12-26T10:03:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’è²843"/> <meta itemprop="url" content="https://juejin.cn/user/541408646929991"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin Flow æ·±åº¦æ¢ç´¢ä¸å®è·µæŒ‡å—â€”â€”ä¸­éƒ¨ï¼šå®æˆ˜ä¸åº”ç”¨ç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/541408646929991/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’è²843
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:03:29.000Z" title="Fri Dec 26 2025 10:03:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬ä¸‰éƒ¨åˆ†ï¼šFlow æ¶æ„å®æˆ˜</h2>
<h3 data-id="heading-1">ç¬¬7ç« ï¼šUI å±‚å®‰å…¨å®è·µï¼šç”Ÿå‘½å‘¨æœŸç®¡ç†</h3>
<h4 data-id="heading-2">7.1 ä¸ºä½• Flow æ”¶é›†éœ€è¦å…³æ³¨ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h4>
<p>Android UI ç»„ä»¶å…·æœ‰æ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸï¼Œé”™è¯¯çš„ Flow æ”¶é›†ä¼šå¯¼è‡´ï¼š</p>






























<table><thead><tr><th>é—®é¢˜</th><th>åæœ</th><th>å½±å“</th></tr></thead><tbody><tr><td><strong>å†…å­˜æ³„æ¼</strong></td><td>Activity/Fragment é”€æ¯åä»æŒæœ‰å¼•ç”¨</td><td>OOMã€åº”ç”¨å´©æºƒ</td></tr><tr><td><strong>èµ„æºæµªè´¹</strong></td><td>åå°ä¸å¿…è¦çš„è®¡ç®—å’Œç½‘ç»œè¯·æ±‚</td><td>ç”µæ± è€—å°½ã€æµé‡æ¶ˆè€—</td></tr><tr><td><strong>UI å¼‚å¸¸</strong></td><td>è§†å›¾é”€æ¯åå°è¯•æ›´æ–°</td><td><code>IllegalStateException</code>ã€UI é—ªçƒ</td></tr><tr><td><strong>æ•°æ®ä¸ä¸€è‡´</strong></td><td>åå°æ›´æ–°å¹²æ‰°å‰å°æ˜¾ç¤º</td><td>æ˜¾ç¤ºé”™è¯¯æ•°æ®ã€çŠ¶æ€æ··ä¹±</td></tr></tbody></table>
<p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BadFragment</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)
        
        <span class="hljs-comment">// âŒ å±é™©ï¼šç”Ÿå‘½å‘¨æœŸä¸å®‰å…¨çš„æ”¶é›†</span>
        lifecycleScope.launch {
            viewModel.dataFlow.collect { <span class="hljs-keyword">data</span> -&gt;
                <span class="hljs-comment">// Fragment è¿›å…¥åå°åï¼Œè¿™é‡Œä»ä¼šæ‰§è¡Œï¼</span>
                updateUI(<span class="hljs-keyword">data</span>) <span class="hljs-comment">// å¯èƒ½å¼•å‘ IllegalStateException</span>
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-3">7.2 Google çš„ç»ˆæç­”æ¡ˆï¼šrepeatOnLifecycle ä¸ flowWithLifecycle</h4>
<h5 data-id="heading-4">repeatOnLifecycleï¼ˆæ¨èï¼‰</h5>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeFragment</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)
        
        <span class="hljs-comment">// âœ… æ¨èæ–¹å¼ 1ï¼šä½¿ç”¨ repeatOnLifecycle</span>
        viewLifecycleOwner.lifecycleScope.launch {
            repeatOnLifecycle(Lifecycle.State.STARTED) {
                <span class="hljs-comment">// åªæœ‰å½“ Fragment è‡³å°‘å¤„äº STARTED çŠ¶æ€æ—¶æ‰æ”¶é›†</span>
                viewModel.dataFlow.collect { <span class="hljs-keyword">data</span> -&gt;
                    updateUI(<span class="hljs-keyword">data</span>)
                }
            }
            <span class="hljs-comment">// å½“ç”Ÿå‘½å‘¨æœŸä½äº STARTED æ—¶ï¼Œåç¨‹è‡ªåŠ¨å–æ¶ˆ</span>
        }
    }
}
</code></pre>
<h5 data-id="heading-5">flowWithLifecycleï¼ˆæ›´ç®€æ´ï¼‰</h5>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeFragment</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)
        
        <span class="hljs-comment">// âœ… æ¨èæ–¹å¼ 2ï¼šä½¿ç”¨ flowWithLifecycle</span>
        viewLifecycleOwner.lifecycleScope.launch {
            viewModel.dataFlow
                .flowWithLifecycle(viewLifecycleOwner.lifecycle, Lifecycle.State.STARTED)
                .collect { <span class="hljs-keyword">data</span> -&gt;
                    updateUI(<span class="hljs-keyword">data</span>)
                }
        }
    }
}
</code></pre>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ul>
<li><code>repeatOnLifecycle</code>ï¼šå½“ç”Ÿå‘½å‘¨æœŸè¿›å…¥ç›®æ ‡çŠ¶æ€æ—¶å¯åŠ¨æ–°åç¨‹ï¼Œç¦»å¼€æ—¶å–æ¶ˆ</li>
<li><code>flowWithLifecycle</code>ï¼šå†…éƒ¨ä½¿ç”¨Â <code>repeatOnLifecycle</code>ï¼Œä½†æ›´ç®€æ´çš„ API</li>
</ul>
<h4 data-id="heading-6">7.3 å‘Šåˆ« launchWhenXï¼šæ–°æ—§å†™æ³•çš„é£é™©å¯¹æ¯”</h4>
<h5 data-id="heading-7">æ—§å†™æ³•çš„é—®é¢˜ï¼ˆlaunchWhenXï¼‰</h5>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">OldFragment</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)
        
        <span class="hljs-comment">// âŒ é—®é¢˜å†™æ³•ï¼šlaunchWhenX ä¸ä¼šå–æ¶ˆ Flow</span>
        viewLifecycleOwner.lifecycleScope.launchWhenStarted {
            <span class="hljs-comment">// é—®é¢˜ 1ï¼šåªæ˜¯æš‚åœåç¨‹ï¼Œä¸å–æ¶ˆ Flow æ”¶é›†</span>
            <span class="hljs-comment">// é—®é¢˜ 2ï¼šç”Ÿäº§è€…å¯èƒ½ç»§ç»­ç”Ÿäº§æ•°æ®ï¼Œé€ æˆç¼“å†²å †ç§¯</span>
            <span class="hljs-comment">// é—®é¢˜ 3ï¼šæ¢å¤æ—¶å¯èƒ½é”™è¿‡ä¸­é—´çŠ¶æ€</span>
            viewModel.dataFlow.collect { <span class="hljs-keyword">data</span> -&gt;
                updateUI(<span class="hljs-keyword">data</span>)
            }
        }
    }
}
</code></pre>
<h5 data-id="heading-8">æ–°æ—§å¯¹æ¯”è¡¨</h5>



































<table><thead><tr><th>ç‰¹æ€§</th><th>launchWhenX</th><th>repeatOnLifecycle</th></tr></thead><tbody><tr><td><strong>å–æ¶ˆæœºåˆ¶</strong></td><td>æš‚åœåç¨‹æ‰§è¡Œ</td><td>å–æ¶ˆæ•´ä¸ªåç¨‹</td></tr><tr><td><strong>ç”Ÿäº§è€…çŠ¶æ€</strong></td><td>ç»§ç»­è¿è¡Œï¼ˆå¯èƒ½å¯¼è‡´èƒŒå‹ï¼‰</td><td>åœæ­¢æ”¶é›†ï¼Œç”Ÿäº§è€…å¯èƒ½æš‚åœ</td></tr><tr><td><strong>å†…å­˜ä½¿ç”¨</strong></td><td>å¯èƒ½ç¼“å†²ç§¯å‹æ•°æ®</td><td>æ— ç¼“å†²ç§¯å‹é£é™©</td></tr><tr><td><strong>æ¢å¤è¡Œä¸º</strong></td><td>ä»æš‚åœç‚¹ç»§ç»­</td><td>é‡æ–°å¼€å§‹æ”¶é›†</td></tr><tr><td><strong>æ¨èåº¦</strong></td><td>âŒ ä¸æ¨è</td><td>âœ… æ¨è</td></tr></tbody></table>
<h3 data-id="heading-9">7.4 æœ€ä½³å®è·µæ€»ç»“ï¼šä¸åŒåœºæ™¯ä¸‹å¦‚ä½•å®‰å…¨æ”¶é›† Flow</h3>
<h4 data-id="heading-10">ğŸ“±Â <strong>æ ¸å¿ƒåŸåˆ™ä¸€å¥è¯æ€»ç»“</strong>ï¼š</h4>
<p><strong>ä¸åŒçš„ Android ç»„ä»¶è¦ç”¨ä¸åŒçš„æ–¹å¼æ”¶é›† Flowï¼Œä½†éƒ½è¦è·Ÿéšç”Ÿå‘½å‘¨æœŸå˜åŒ–ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</strong></p>
<h4 data-id="heading-11">7.4.1 Activity ä¸­çš„å®‰å…¨æ”¶é›†å®è·µ</h4>
<h5 data-id="heading-12">æ ‡å‡†å†™æ³•ï¼ˆæœ€å®‰å…¨ï¼‰</h5>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        <span class="hljs-comment">// âœ… æ ‡å‡†å†™æ³•ï¼šä½¿ç”¨ repeatOnLifecycle</span>
        lifecycleScope.launch {
            <span class="hljs-comment">// STARTED çŠ¶æ€è¡¨ç¤º Activity å¯è§</span>
            repeatOnLifecycle(Lifecycle.State.STARTED) {
                viewModel.userData.collect { user -&gt;
                    <span class="hljs-comment">// å®‰å…¨æ›´æ–° UIï¼Œä¸ä¼šåœ¨åå°æ‰§è¡Œ</span>
                    updateUserInfo(user)
                }
            }
        }
    }
}
</code></pre>
<h5 data-id="heading-13">âŒ é¿å…å†™æ³•</h5>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        <span class="hljs-comment">// âŒ é”™è¯¯1ï¼šä½¿ç”¨å·²å¼ƒç”¨çš„ launchWhenXï¼ˆä¸ä¼šå–æ¶ˆ Flowï¼‰</span>
        lifecycleScope.launchWhenStarted {
            viewModel.<span class="hljs-keyword">data</span>.collect { <span class="hljs-keyword">data</span> -&gt;
                <span class="hljs-comment">// è¿›å…¥åå°åä»ç„¶æ‰§è¡Œï¼Œå¯èƒ½å´©æºƒï¼</span>
                updateUI(<span class="hljs-keyword">data</span>)
            }
        }
        
        <span class="hljs-comment">// âŒ é”™è¯¯2ï¼šç›´æ¥æ”¶é›†ï¼ˆä¸å…³æ³¨ç”Ÿå‘½å‘¨æœŸï¼‰</span>
        lifecycleScope.launch {
            viewModel.<span class="hljs-keyword">data</span>.collect { <span class="hljs-keyword">data</span> -&gt;
                <span class="hljs-comment">// å†…å­˜æ³„æ¼é£é™©ï¼</span>
                updateUI(<span class="hljs-keyword">data</span>)
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-14">7.4.2 Fragment ä¸­çš„å®‰å…¨æ”¶é›†å®è·µ âš ï¸ï¼ˆç‰¹åˆ«æ³¨æ„ï¼ï¼‰</h4>
<h5 data-id="heading-15">ä¸ºä»€ä¹ˆ Fragment ç‰¹æ®Šï¼Ÿ</h5>
<p><strong>é‡è¦æ¦‚å¿µ</strong>ï¼š</p>
<ul>
<li>Fragment æœ‰ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸï¼šFragment è‡ªèº« å’Œ è§†å›¾</li>
<li>è§†å›¾å¯èƒ½è¢«é”€æ¯é‡å»ºï¼ˆå±å¹•æ—‹è½¬ã€è¿”å›æ ˆï¼‰</li>
<li><strong>å¿…é¡»ç”¨Â <code>viewLifecycleOwner</code>ï¼Œä¸èƒ½ç”¨Â <code>lifecycleOwner</code></strong></li>
</ul>
<h5 data-id="heading-16">âœ… æ­£ç¡®å†™æ³•</h5>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HomeFragment</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)
        
        <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå¿…é¡»ç”¨ viewLifecycleOwner</span>
        viewLifecycleOwner.lifecycleScope.launch {
            repeatOnLifecycle(Lifecycle.State.STARTED) {
                viewModel.userData.collect { user -&gt;
                    <span class="hljs-comment">// å®‰å…¨æ›´æ–° UI</span>
                    binding.textName.text = user.name
                }
            }
        }
    }
}
</code></pre>
<h5 data-id="heading-17">âŒ å¸¸è§é”™è¯¯å†™æ³•</h5>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WrongFragment</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)
        
        <span class="hljs-comment">// âŒ é”™è¯¯1ï¼šç”¨ lifecycleOwnerï¼ˆåº”è¯¥ç”¨ viewLifecycleOwnerï¼‰</span>
        lifecycleOwner.lifecycleScope.launch {
            repeatOnLifecycle(Lifecycle.State.STARTED) {
                viewModel.<span class="hljs-keyword">data</span>.collect { 
                    <span class="hljs-comment">// è§†å›¾é”€æ¯åè¿™é‡Œè¿˜ä¼šæ‰§è¡Œï¼</span>
                    binding.textView.text = it  <span class="hljs-comment">// å¯èƒ½å´©æºƒï¼</span>
                }
            }
        }
        
        <span class="hljs-comment">// âŒ é”™è¯¯2ï¼šåœ¨ onCreate ä¸­æ”¶é›†</span>
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
            <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
            lifecycleScope.launch {  <span class="hljs-comment">// è§†å›¾è¿˜æ²¡åˆ›å»ºï¼</span>
                viewModel.<span class="hljs-keyword">data</span>.collect { <span class="hljs-comment">/* binding å¯èƒ½ä¸ºç©ºï¼ */</span> }
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-18">7.4.3 Compose ä¸­çš„å®‰å…¨æ”¶é›†å®è·µï¼ˆæœ€ç®€å•ï¼ï¼‰</h4>
<h5 data-id="heading-19">æ–¹æ³•1ï¼šæ¨èå†™æ³•ï¼ˆä¸€è¡Œä»£ç æå®šï¼‰</h5>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">UserProfileScreen</span><span class="hljs-params">(viewModel: <span class="hljs-type">UserViewModel</span> = viewModel()</span></span>) {
    <span class="hljs-comment">// âœ… æœ€ç®€å•ï¼šè‡ªåŠ¨è·Ÿéšç”Ÿå‘½å‘¨æœŸ</span>
    <span class="hljs-comment">// éœ€è¦æ·»åŠ ä¾èµ–ï¼šandroidx.lifecycle:lifecycle-runtime-compose</span>
    <span class="hljs-keyword">val</span> user <span class="hljs-keyword">by</span> viewModel.userData.collectAsStateWithLifecycle()
    
    Column {
        <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
            Text(text = user!!.name)
            Text(text = user!!.email)
        }
    }
}
</code></pre>
<h5 data-id="heading-20">æ–¹æ³•2ï¼šå¤„ç†ä¸€æ¬¡æ€§äº‹ä»¶</h5>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">LoginScreen</span><span class="hljs-params">(viewModel: <span class="hljs-type">LoginViewModel</span> = viewModel()</span></span>) {
    <span class="hljs-keyword">val</span> state <span class="hljs-keyword">by</span> viewModel.state.collectAsStateWithLifecycle()
    
    <span class="hljs-comment">// å¤„ç†ä¸€æ¬¡æ€§äº‹ä»¶ï¼ˆå¯¼èˆªã€Toastç­‰ï¼‰</span>
    <span class="hljs-keyword">val</span> sideEffects = viewModel.sideEffects
    
    LaunchedEffect(sideEffects) {
        sideEffects.collect { effect -&gt;
            <span class="hljs-keyword">when</span> (effect) {
                <span class="hljs-keyword">is</span> SideEffect.NavigateToHome -&gt; {
                    <span class="hljs-comment">// æ‰§è¡Œå¯¼èˆª</span>
                    navController.navigate(<span class="hljs-string">"home"</span>)
                }
                <span class="hljs-keyword">is</span> SideEffect.ShowToast -&gt; {
                    <span class="hljs-comment">// æ˜¾ç¤º Toast</span>
                }
            }
        }
    }
    
    <span class="hljs-comment">// æ¸²æŸ“ UI...</span>
}
</code></pre>
<h4 data-id="heading-21">7.4.4 å¿«é€Ÿå¯¹æ¯”æ€»ç»“</h4>
<h5 data-id="heading-22">å„åœºæ™¯æœ€ä½³å®è·µå¯¹æ¯”è¡¨</h5>





























<table><thead><tr><th>åœºæ™¯</th><th>æ ¸å¿ƒè¦ç‚¹</th><th>æ¨èå†™æ³•</th><th>é¿å…å†™æ³•</th></tr></thead><tbody><tr><td><strong>Activity</strong></td><td>ä½¿ç”¨Â <code>lifecycleScope</code> å…³æ³¨æ•´ä¸ª Activity ç”Ÿå‘½å‘¨æœŸ</td><td>âœ…Â <code>lifecycleScope.launch { repeatOnLifecycle(STARTED) { flow.collect() } }</code></td><td>âŒÂ <code>launchWhenX</code> âŒ ç›´æ¥Â <code>launch { flow.collect() }</code></td></tr><tr><td><strong>Fragment</strong></td><td><strong>å¿…é¡»</strong>ç”¨Â <code>viewLifecycleOwner</code> åœ¨Â <code>onViewCreated</code>Â ä¸­æ”¶é›†</td><td>âœ…Â <code>viewLifecycleOwner.lifecycleScope.launch { repeatOnLifecycle(STARTED) { flow.collect() } }</code></td><td>âŒ ç”¨Â <code>lifecycleOwner</code> âŒ åœ¨Â <code>onCreate</code>Â ä¸­æ”¶é›†</td></tr><tr><td><strong>Compose</strong></td><td>ä½¿ç”¨ä¸“ç”¨æ‰©å±•å‡½æ•° è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</td><td>âœ…Â <code>val data by flow.collectAsStateWithLifecycle()</code></td><td>âŒ ç›´æ¥Â <code>collectAsState()</code> âŒ æ‰‹åŠ¨ç®¡ç†å¤æ‚ç”Ÿå‘½å‘¨æœŸ</td></tr></tbody></table>
<h4 data-id="heading-23">7.4.5 å®ç”¨å·¥å…·ç±»ï¼ˆå¤åˆ¶å³ç”¨ï¼‰</h4>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Activity æ‰©å±•å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> ComponentActivity.<span class="hljs-title">collectWithLifecycle</span><span class="hljs-params">(
    flow: <span class="hljs-type">Flow</span>&lt;<span class="hljs-type">T</span>&gt;,
    minState: <span class="hljs-type">Lifecycle</span>.<span class="hljs-type">State</span> = Lifecycle.State.STARTED,
    action: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Unit</span>
)</span></span> {
    lifecycleScope.launch {
        repeatOnLifecycle(minState) {
            flow.collect(action)
        }
    }
}

<span class="hljs-comment">// Fragment æ‰©å±•å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Fragment.<span class="hljs-title">collectWithLifecycle</span><span class="hljs-params">(
    flow: <span class="hljs-type">Flow</span>&lt;<span class="hljs-type">T</span>&gt;,
    minState: <span class="hljs-type">Lifecycle</span>.<span class="hljs-type">State</span> = Lifecycle.State.STARTED,
    action: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Unit</span>
)</span></span> {
    viewLifecycleOwner.lifecycleScope.launch {
        repeatOnLifecycle(minState) {
            flow.collect(action)
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyFragment</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)
        
        <span class="hljs-comment">// ä¸€è¡Œä»£ç æå®š</span>
        collectWithLifecycle(viewModel.<span class="hljs-keyword">data</span>) { <span class="hljs-keyword">data</span> -&gt;
            binding.textView.text = <span class="hljs-keyword">data</span>
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-24">ç¬¬8ç« ï¼šMVI æ¶æ„æ¨¡å¼</h2>
<h3 data-id="heading-25">8.1 ä»€ä¹ˆæ˜¯ MVIï¼Ÿï¼ˆä¸€å¥è¯è¯´æ¸…ï¼‰</h3>
<p><strong>MVI = Model-View-Intent</strong><br/>
å°±æ˜¯ä¸€ä¸ªè®©ä»£ç æ›´æœ‰æ¡ç†çš„ App æ¶æ„æ–¹æ³•ï¼Œæ ¸å¿ƒæ€æƒ³ï¼š<strong>UI å®Œå…¨ç”±æ•°æ®é©±åŠ¨</strong></p>
<h3 data-id="heading-26">8.2 æ ¸å¿ƒä¸‰è¦ç´ ï¼ˆè®°ä½è¿™ä¸‰ç‚¹å°±å¤Ÿäº†ï¼‰</h3>
<h4 data-id="heading-27">1. Stateï¼ˆçŠ¶æ€ï¼‰</h4>
<p><strong>æ˜¯ä»€ä¹ˆ</strong>ï¼šå½“å‰é¡µé¢æ‰€æœ‰çš„æ•°æ®<br/>
<strong>ç‰¹ç‚¹</strong>ï¼šä¸å¯å˜çš„ï¼Œå”¯ä¸€çš„ï¼Œå…¨éƒ¨æ”¾åœ¨ä¸€èµ·</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸€ä¸ªé¡µé¢æ‰€æœ‰çš„çŠ¶æ€éƒ½æ”¾åœ¨è¿™é‡Œ</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginState</span>(
    <span class="hljs-keyword">val</span> email: String = <span class="hljs-string">""</span>,      <span class="hljs-comment">// é‚®ç®±è¾“å…¥æ¡†</span>
    <span class="hljs-keyword">val</span> password: String = <span class="hljs-string">""</span>,   <span class="hljs-comment">// å¯†ç è¾“å…¥æ¡†</span>
    <span class="hljs-keyword">val</span> isLoading: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>,  <span class="hljs-comment">// åŠ è½½çŠ¶æ€</span>
    <span class="hljs-keyword">val</span> error: String? = <span class="hljs-literal">null</span>,   <span class="hljs-comment">// é”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-keyword">val</span> isLoginEnabled: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>  <span class="hljs-comment">// ç™»å½•æŒ‰é’®æ˜¯å¦å¯ç”¨</span>
)
</code></pre>
<h4 data-id="heading-28">2. Intentï¼ˆæ„å›¾ï¼‰</h4>
<p><strong>æ˜¯ä»€ä¹ˆ</strong>ï¼šç”¨æˆ·çš„æ“ä½œ<br/>
<strong>ç‰¹ç‚¹</strong>ï¼šæ¯ä¸ªæŒ‰é’®ç‚¹å‡»ã€è¾“å…¥å˜åŒ–éƒ½æ˜¯ä¸€ä¸ª Intent</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç”¨æˆ·çš„æ‰€æœ‰æ“ä½œéƒ½ç”¨è¿™ä¸ªè¡¨ç¤º</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginIntent</span> {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailChanged</span>(<span class="hljs-keyword">val</span> email: String) : LoginIntent()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PasswordChanged</span>(<span class="hljs-keyword">val</span> password: String) : LoginIntent()
    <span class="hljs-keyword">object</span> LoginClicked : LoginIntent()
}
</code></pre>
<h4 data-id="heading-29">3. Viewï¼ˆè§†å›¾ï¼‰</h4>
<p><strong>æ˜¯ä»€ä¹ˆ</strong>ï¼šæ˜¾ç¤ºç•Œé¢ï¼Œç›‘å¬ç”¨æˆ·æ“ä½œ<br/>
<strong>ç‰¹ç‚¹</strong>ï¼šåªåšä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>æ˜¾ç¤º State</li>
<li>å‘é€ Intent</li>
</ol>
<h3 data-id="heading-30">8.3 å®Œæ•´ç¤ºä¾‹ï¼šç™»å½•é¡µé¢</h3>
<h4 data-id="heading-31">ViewModel å®ç°ï¼ˆå¤„ç†æ‰€æœ‰é€»è¾‘ï¼‰</h4>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    
    <span class="hljs-comment">// 1. å®šä¹‰ Stateï¼ˆè¿™æ˜¯å”¯ä¸€çš„çœŸç›¸ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _state = MutableStateFlow(LoginState())
    <span class="hljs-keyword">val</span> state: StateFlow&lt;LoginState&gt; = _state
    
    <span class="hljs-comment">// 2. å®šä¹‰ä¸€æ¬¡æ€§äº‹ä»¶ï¼ˆToastã€å¯¼èˆªç­‰ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _events = MutableSharedFlow&lt;LoginEvent&gt;()
    <span class="hljs-keyword">val</span> events: SharedFlow&lt;LoginEvent&gt; = _events
    
    <span class="hljs-comment">// 3. å¤„ç†ç”¨æˆ·æ“ä½œ</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processIntent</span><span class="hljs-params">(intent: <span class="hljs-type">LoginIntent</span>)</span></span> {
        <span class="hljs-keyword">when</span> (intent) {
            <span class="hljs-keyword">is</span> LoginIntent.EmailChanged -&gt; {
                <span class="hljs-comment">// æ›´æ–°é‚®ç®±</span>
                _state.value = _state.value.copy(
                    email = intent.email,
                    isLoginEnabled = intent.email.isNotEmpty() &amp;&amp; 
                                     _state.value.password.isNotEmpty()
                )
            }
            
            <span class="hljs-keyword">is</span> LoginIntent.PasswordChanged -&gt; {
                <span class="hljs-comment">// æ›´æ–°å¯†ç </span>
                _state.value = _state.value.copy(
                    password = intent.password,
                    isLoginEnabled = _state.value.email.isNotEmpty() &amp;&amp; 
                                     intent.password.isNotEmpty()
                )
            }
            
            LoginIntent.LoginClicked -&gt; {
                <span class="hljs-comment">// ç‚¹å‡»ç™»å½•æŒ‰é’®</span>
                login()
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">login</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            <span class="hljs-comment">// 1. æ˜¾ç¤ºåŠ è½½</span>
            _state.value = _state.value.copy(isLoading = <span class="hljs-literal">true</span>)
            
            delay(<span class="hljs-number">2000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span>
            
            <span class="hljs-comment">// 2. ç™»å½•æˆåŠŸ</span>
            _state.value = _state.value.copy(isLoading = <span class="hljs-literal">false</span>)
            
            <span class="hljs-comment">// 3. å‘é€å¯¼èˆªäº‹ä»¶ï¼ˆä¸€æ¬¡æ€§ï¼‰</span>
            _events.emit(LoginEvent.NavigateToHome)
            
            <span class="hljs-comment">// 4. å‘é€ Toast äº‹ä»¶</span>
            _events.emit(LoginEvent.ShowToast(<span class="hljs-string">"ç™»å½•æˆåŠŸï¼"</span>))
        }
    }
}

<span class="hljs-comment">// ä¸€æ¬¡æ€§äº‹ä»¶ï¼ˆä¸ä¿å­˜åœ¨ State ä¸­ï¼‰</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginEvent</span> {
    <span class="hljs-keyword">object</span> NavigateToHome : LoginEvent()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShowToast</span>(<span class="hljs-keyword">val</span> message: String) : LoginEvent()
}
</code></pre>
<h4 data-id="heading-32">Activity/Fragment å®ç°ï¼ˆæ˜¾ç¤ºç•Œé¢ï¼‰</h4>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewModel: LoginViewModel <span class="hljs-keyword">by</span> viewModels()
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        <span class="hljs-comment">// 1. ç›‘å¬ State å˜åŒ–ï¼Œæ›´æ–° UI</span>
        lifecycleScope.launch {
            repeatOnLifecycle(Lifecycle.State.STARTED) {
                viewModel.state.collect { state -&gt;
                    <span class="hljs-comment">// æ›´æ–°æ‰€æœ‰ UI</span>
                    updateUI(state)
                }
            }
        }
        
        <span class="hljs-comment">// 2. ç›‘å¬ä¸€æ¬¡æ€§äº‹ä»¶ï¼ˆå¯¼èˆªã€Toastï¼‰</span>
        lifecycleScope.launch {
            repeatOnLifecycle(Lifecycle.State.STARTED) {
                viewModel.events.collect { event -&gt;
                    <span class="hljs-keyword">when</span> (event) {
                        <span class="hljs-keyword">is</span> LoginEvent.NavigateToHome -&gt; {
                            <span class="hljs-comment">// è·³è½¬åˆ°é¦–é¡µ</span>
                            startActivity(Intent(<span class="hljs-keyword">this</span><span class="hljs-symbol">@LoginActivity</span>, HomeActivity::<span class="hljs-keyword">class</span>.java))
                        }
                        <span class="hljs-keyword">is</span> LoginEvent.ShowToast -&gt; {
                            Toast.makeText(<span class="hljs-keyword">this</span><span class="hljs-symbol">@LoginActivity</span>, event.message, Toast.LENGTH_SHORT).show()
                        }
                    }
                }
            }
        }
        
        <span class="hljs-comment">// 3. è®¾ç½®ç‚¹å‡»ç›‘å¬ï¼Œå‘é€ Intent</span>
        binding.buttonLogin.setOnClickListener {
            viewModel.processIntent(LoginIntent.LoginClicked)
        }
        
        binding.editEmail.addTextChangedListener {
            viewModel.processIntent(LoginIntent.EmailChanged(it.toString()))
        }
        
        binding.editPassword.addTextChangedListener {
            viewModel.processIntent(LoginIntent.PasswordChanged(it.toString()))
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateUI</span><span class="hljs-params">(state: <span class="hljs-type">LoginState</span>)</span></span> {
        <span class="hljs-comment">// æ ¹æ® State æ›´æ–°æ‰€æœ‰ UI</span>
        binding.editEmail.setText(state.email)
        binding.editPassword.setText(state.password)
        binding.buttonLogin.isEnabled = state.isLoginEnabled
        binding.progressBar.isVisible = state.isLoading
        
        <span class="hljs-keyword">if</span> (state.error != <span class="hljs-literal">null</span>) {
            Toast.makeText(<span class="hljs-keyword">this</span>, state.error, Toast.LENGTH_SHORT).show()
        }
    }
}
</code></pre>
<h3 data-id="heading-33">8.4 MVI çš„å·¥ä½œæµç¨‹ï¼ˆè¶…ç®€å•å›¾è§£ï¼‰</h3>
<p>text</p>
<pre><code class="hljs language-ini" lang="ini">ç”¨æˆ·ç‚¹å‡»æŒ‰é’®
    â†“
å‘é€ LoginClicked Intent
    â†“
ViewModel å¤„ç† Intent
    â†“
æ›´æ–° Stateï¼ˆ<span class="hljs-attr">isLoading</span> = <span class="hljs-literal">true</span>ï¼‰
    â†“
UI è‡ªåŠ¨æ›´æ–°ï¼ˆæ˜¾ç¤ºåŠ è½½åŠ¨ç”»ï¼‰
    â†“
ç½‘ç»œè¯·æ±‚å®Œæˆ
    â†“
æ›´æ–° Stateï¼ˆ<span class="hljs-attr">isLoading</span> = <span class="hljs-literal">false</span>ï¼‰
    â†“
å‘é€ NavigateToHome Event
    â†“
UI æ”¶åˆ° Eventï¼Œè·³è½¬é¡µé¢
</code></pre>
<h3 data-id="heading-34">8.5 ä¸ºä»€ä¹ˆç”¨ MVIï¼Ÿï¼ˆä¸‰å¤§å¥½å¤„ï¼‰</h3>
<h4 data-id="heading-35">1. ä»£ç æ¸…æ™°</h4>
<ul>
<li>æ‰€æœ‰çŠ¶æ€åœ¨ä¸€ä¸ªåœ°æ–¹</li>
<li>æ‰€æœ‰æ“ä½œåœ¨ä¸€ä¸ªåœ°æ–¹å¤„ç†</li>
<li>UI åªè´Ÿè´£æ˜¾ç¤ºå’Œå‘é€äº‹ä»¶</li>
</ul>
<h4 data-id="heading-36">2. å®¹æ˜“è°ƒè¯•</h4>
<ul>
<li>çŸ¥é“å½“å‰æ‰€æœ‰çŠ¶æ€</li>
<li>çŸ¥é“æ¯ä¸ªæ“ä½œå¦‚ä½•æ”¹å˜çŠ¶æ€</li>
<li>å¯ä»¥"æ—¶é—´æ—…è¡Œ"ï¼ˆè®°å½•æ‰€æœ‰çŠ¶æ€å˜åŒ–ï¼‰</li>
</ul>
<h4 data-id="heading-37">3. é¿å… bug</h4>
<ul>
<li>State ä¸å¯å˜ï¼Œä¸ä¼šæ„å¤–ä¿®æ”¹</li>
<li>å•å‘æ•°æ®æµï¼Œä¸ä¼šå¾ªç¯æ›´æ–°</li>
<li>äº‹ä»¶ä¸€æ¬¡æ€§ï¼Œä¸ä¼šé‡å¤è§¦å‘</li>
</ul>
<h3 data-id="heading-38">8.6 ç®€å•ç‰ˆ BaseViewModelï¼ˆå¤åˆ¶ç›´æ¥ç”¨ï¼‰</h3>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç®€å•çš„ BaseViewModelï¼Œå¤§éƒ¨åˆ†åœºæ™¯å¤Ÿç”¨äº†</span>
<span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleViewModel</span>&lt;<span class="hljs-type">State, Event</span>&gt; : <span class="hljs-type">ViewModel</span>() {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _state = MutableStateFlow(initialState)
    <span class="hljs-keyword">val</span> state: StateFlow&lt;State&gt; = _state
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _events = MutableSharedFlow&lt;Event&gt;()
    <span class="hljs-keyword">val</span> events: SharedFlow&lt;Event&gt; = _events
    
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">val</span> initialState: State
        <span class="hljs-keyword">get</span>() = <span class="hljs-keyword">throw</span> NotImplementedError(<span class="hljs-string">"å¿…é¡»æä¾›åˆå§‹çŠ¶æ€"</span>)
    
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateState</span><span class="hljs-params">(newState: <span class="hljs-type">State</span>)</span></span> {
        _state.value = newState
    }
    
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateState</span><span class="hljs-params">(updater: (<span class="hljs-type">State</span>) -&gt; <span class="hljs-type">State</span>)</span></span> {
        _state.update(updater)
    }
    
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sendEvent</span><span class="hljs-params">(event: <span class="hljs-type">Event</span>)</span></span> {
        _events.emit(event)
    }
    
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">postEvent</span><span class="hljs-params">(event: <span class="hljs-type">Event</span>)</span></span> {
        viewModelScope.launch {
            _events.emit(event)
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterViewModel</span> : <span class="hljs-type">SimpleViewModel</span>&lt;<span class="hljs-type">CounterState, CounterEvent</span>&gt;() {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> initialState = CounterState()
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">increment</span><span class="hljs-params">()</span></span> {
        updateState { it.copy(count = it.count + <span class="hljs-number">1</span>) }
        
        <span class="hljs-keyword">if</span> (state.value.count == <span class="hljs-number">10</span>) {
            postEvent(CounterEvent.ShowToast(<span class="hljs-string">"è¾¾åˆ°10äº†ï¼"</span>))
        }
    }
}

<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterState</span>(<span class="hljs-keyword">val</span> count: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>)
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterEvent</span> {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShowToast</span>(<span class="hljs-keyword">val</span> message: String) : CounterEvent()
}
</code></pre>
<h3 data-id="heading-39">8.7 ä¸€å¥è¯æ€»ç»“ MVI</h3>
<p><strong>æŠŠæ‰€æœ‰çŠ¶æ€æ”¾åœ¨ä¸€èµ·ï¼ŒæŠŠæ‰€æœ‰æ“ä½œæ”¾åœ¨ä¸€èµ·å¤„ç†ï¼Œè®© UI åªåšæ˜¾ç¤ºå’Œå‘é€äº‹ä»¶ã€‚</strong></p>
<h4 data-id="heading-40">è®°ä½ä¸‰å¥è¯ï¼š</h4>
<ol>
<li><strong>State å†³å®š UI é•¿ä»€ä¹ˆæ ·</strong></li>
<li><strong>Intent æ˜¯ç”¨æˆ·åšäº†ä»€ä¹ˆ</strong></li>
<li><strong>ViewModel å¤„ç† Intentï¼Œæ›´æ–° State</strong></li>
</ol>
<h4 data-id="heading-41">æœ€ç®€å•çš„ MVI ä»£ç ç»“æ„ï¼š</h4>
<p>text</p>
<pre><code class="hljs language-vbnet" lang="vbnet">é¡µé¢
â”œâ”€â”€ Stateï¼ˆæ•°æ®ç±»ï¼Œæ‰€æœ‰çŠ¶æ€ï¼‰
â”œâ”€â”€ Intentï¼ˆå¯†å°ç±»ï¼Œæ‰€æœ‰æ“ä½œï¼‰
â”œâ”€â”€ <span class="hljs-keyword">Event</span>ï¼ˆå¯†å°ç±»ï¼Œä¸€æ¬¡æ€§äº‹ä»¶ï¼‰
â”œâ”€â”€ ViewModelï¼ˆå¤„ç† Intentï¼Œæ›´æ–° Stateï¼‰
â””â”€â”€ UIï¼ˆæ˜¾ç¤º Stateï¼Œå‘é€ Intentï¼Œç›‘å¬ <span class="hljs-keyword">Event</span>ï¼‰
</code></pre>
<hr/>
<h2 data-id="heading-42">ç¬¬9ç« ï¼šæ•°æ®å±‚è®¾è®¡ï¼šRepository æ¨¡å¼é©æ–°</h2>
<h3 data-id="heading-43">9.1 ä½¿ç”¨ Flow å°è£…ç½‘ç»œè¯·æ±‚</h3>
<h4 data-id="heading-44">ä¼ ç»Ÿæ–¹å¼ vs Flow æ–¹å¼</h4>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ ä¼ ç»Ÿæ–¹å¼ï¼šå›è°ƒåœ°ç‹±</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OldUserRepository</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUser</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>, callback: (<span class="hljs-type">Result</span>&lt;<span class="hljs-type">User</span>&gt;) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        <span class="hljs-comment">// å¤æ‚çš„åµŒå¥—å›è°ƒ...</span>
    }
}

<span class="hljs-comment">// âœ… Flow æ–¹å¼ï¼šå£°æ˜å¼ã€å¯ç»„åˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepository</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> localDataSource: UserLocalDataSource,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> remoteDataSource: UserRemoteDataSource
) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUser</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: Flow&lt;User&gt; = flow {
        <span class="hljs-comment">// 1. å…ˆå‘å°„æœ¬åœ°æ•°æ®ï¼ˆå¦‚æœæœ‰ï¼‰</span>
        localDataSource.getUser(userId).collect { cachedUser -&gt;
            <span class="hljs-keyword">if</span> (cachedUser != <span class="hljs-literal">null</span>) {
                emit(cachedUser)
            }
        }
        
        <span class="hljs-comment">// 2. è·å–è¿œç¨‹æ•°æ®</span>
        <span class="hljs-keyword">val</span> remoteUser = remoteDataSource.getUser(userId)
        
        <span class="hljs-comment">// 3. ä¿å­˜åˆ°æœ¬åœ°</span>
        localDataSource.saveUser(remoteUser)
        
        <span class="hljs-comment">// 4. å‘å°„è¿œç¨‹æ•°æ®</span>
        emit(remoteUser)
    }.<span class="hljs-keyword">catch</span> { error -&gt;
        <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
        <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">is</span> IOException) {
            emit(localDataSource.getLastKnownUser(userId))
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> error
        }
    }
}
</code></pre>
<h3 data-id="heading-45">9.2 å®ç° "å•ä¸€æ•°æ®æº" æ¶æ„</h3>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NewsRepository</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> newsDao: NewsDao,          <span class="hljs-comment">// æœ¬åœ°æ•°æ®åº“ - å”¯ä¸€å¯ä¿¡æº</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> newsApi: NewsApi,          <span class="hljs-comment">// ç½‘ç»œæ•°æ®æº</span>
) {
    <span class="hljs-comment">// âœ… å•ä¸€å¯ä¿¡æºï¼šåªä»æ•°æ®åº“æš´éœ²æ•°æ®</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getNews</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;Article&gt;&gt; = newsDao.getAllArticles()
    
    <span class="hljs-comment">// åˆ·æ–°æ•°æ®ï¼ˆç½‘ç»œ -&gt; æ•°æ®åº“ï¼‰</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">refreshNews</span><span class="hljs-params">()</span></span>: Result&lt;<span class="hljs-built_in">Unit</span>&gt; = withContext(Dispatchers.IO) {
        <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> articles = newsApi.getLatestNews()
            newsDao.clearAndInsertAll(articles)
            Result.success(<span class="hljs-built_in">Unit</span>)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            Result.failure(e)
        }
    }
}
</code></pre>
<h3 data-id="heading-46">9.3 Flow ä¸ Retrofitã€Room çš„é›†æˆ</h3>
<h4 data-id="heading-47">Retrofit + Flow</h4>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">NewsApi</span> {
    <span class="hljs-comment">// âœ… æ”¯æŒ suspend å‡½æ•°</span>
    <span class="hljs-meta">@GET(<span class="hljs-string">"news/latest"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getLatestNews</span><span class="hljs-params">()</span></span>: List&lt;ArticleDto&gt;
}

<span class="hljs-comment">// Repository ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NewsRepository</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> newsApi: NewsApi
) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getLatestNews</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;Article&gt;&gt; = flow {
        <span class="hljs-keyword">val</span> newsDto = newsApi.getLatestNews()
        <span class="hljs-keyword">val</span> news = newsDto.map { it.toDomain() }
        emit(news)
    }
}
</code></pre>
<h4 data-id="heading-48">Room + Flow</h4>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Dao</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ArticleDao</span> {
    <span class="hljs-comment">// âœ… Room åŸç”Ÿæ”¯æŒ Flow</span>
    <span class="hljs-meta">@Query(<span class="hljs-string">"SELECT * FROM articles ORDER BY publish_date DESC"</span>)</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getAllArticles</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;ArticleEntity&gt;&gt;
}
</code></pre>
<h3 data-id="heading-49">9.4 ç¼“å­˜ç­–ç•¥</h3>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartCacheRepository</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> memoryCache: MemoryCache,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> diskCache: DiskCache,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> remoteDataSource: RemoteDataSource
) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">(id: <span class="hljs-type">String</span>)</span></span>: Flow&lt;Data&gt; = flow {
        <span class="hljs-comment">// 1. æ£€æŸ¥å†…å­˜ç¼“å­˜ï¼ˆæœ€å¿«ï¼‰</span>
        memoryCache.<span class="hljs-keyword">get</span>(id)?.let { cachedData -&gt;
            emit(cachedData)
            <span class="hljs-keyword">return</span><span class="hljs-symbol">@flow</span>
        }
        
        <span class="hljs-comment">// 2. æ£€æŸ¥ç£ç›˜ç¼“å­˜</span>
        diskCache.<span class="hljs-keyword">get</span>(id)?.let { cachedData -&gt;
            <span class="hljs-comment">// å­˜å…¥å†…å­˜ç¼“å­˜</span>
            memoryCache.put(id, cachedData)
            emit(cachedData)
        }
        
        <span class="hljs-comment">// 3. ä»ç½‘ç»œè·å–</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> remoteData = remoteDataSource.getData(id)
            
            <span class="hljs-comment">// 4. æ›´æ–°ä¸¤çº§ç¼“å­˜</span>
            memoryCache.put(id, remoteData)
            diskCache.put(id, remoteData)
            
            emit(remoteData)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// ç½‘ç»œå¤±è´¥ï¼Œè¿”å›ç©ºæ•°æ®</span>
            emit(Data.EMPTY)
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-50">ç¬¬10ç« ï¼šFlow ä¸ Paging 3ï¼šæ— ç¼å¤„ç†åˆ†é¡µåŠ è½½</h2>
<h3 data-id="heading-51">10.1 åŸºæœ¬ä½¿ç”¨</h3>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. å®šä¹‰ PagingSource</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExamplePagingSource</span> : <span class="hljs-type">PagingSource</span>&lt;<span class="hljs-type">Int, Item</span>&gt;() {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">(params: <span class="hljs-type">LoadParams</span>&lt;<span class="hljs-type">Int</span>&gt;)</span></span>: LoadResult&lt;<span class="hljs-built_in">Int</span>, Item&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> page = params.key ?: <span class="hljs-number">1</span>
            <span class="hljs-keyword">val</span> response = api.getItems(page, params.loadSize)
            
            LoadResult.Page(
                <span class="hljs-keyword">data</span> = response.items,
                prevKey = <span class="hljs-keyword">if</span> (page == <span class="hljs-number">1</span>) <span class="hljs-literal">null</span> <span class="hljs-keyword">else</span> page - <span class="hljs-number">1</span>,
                nextKey = <span class="hljs-keyword">if</span> (response.hasMore) page + <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
            )
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            LoadResult.Error(e)
        }
    }
}

<span class="hljs-comment">// 2. åˆ›å»º Pager</span>
<span class="hljs-keyword">val</span> pager = Pager(
    config = PagingConfig(pageSize = <span class="hljs-number">20</span>),
    pagingSourceFactory = { ExamplePagingSource() }
)

<span class="hljs-comment">// 3. è·å– Flow&lt;PagingData&gt;</span>
<span class="hljs-keyword">val</span> pagingDataFlow: Flow&lt;PagingData&lt;Item&gt;&gt; = pager.flow
</code></pre>
<h3 data-id="heading-52">10.2 cachedIn(viewModelScope) çš„é­”åŠ›</h3>
<p>kotlin</p>
<pre><code class="hljs language-scss" lang="scss">class MyViewModel : <span class="hljs-built_in">ViewModel</span>() {
    val items: Flow&lt;PagingData&lt;Item&gt;&gt; = <span class="hljs-built_in">Pager</span>(
        config = <span class="hljs-built_in">PagingConfig</span>(pageSize = <span class="hljs-number">20</span>),
        pagingSourceFactory = { <span class="hljs-built_in">ItemPagingSource</span>(api) }
    )
        <span class="hljs-selector-class">.flow</span>
        <span class="hljs-selector-class">.cachedIn</span>(viewModelScope) <span class="hljs-comment">// ç¼“å­˜åˆ° ViewModel çš„ä½œç”¨åŸŸ</span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦Â <code>cachedIn</code>ï¼Ÿ</strong></p>
<ul>
<li>é¿å…åœ¨é…ç½®æ›´æ”¹æ—¶é‡æ–°åŠ è½½æ•°æ®</li>
<li>åœ¨å¤šä¸ªæ”¶é›†è€…ä¹‹é—´å…±äº«åŒä¸€åˆ†é¡µæ•°æ®æµ</li>
<li>ç¡®ä¿æ•°æ®åœ¨ ViewModel ç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸€è‡´</li>
</ul>
<h3 data-id="heading-53">10.3 åœ¨ UI ä¸­ä½¿ç”¨</h3>
<h4 data-id="heading-54">RecyclerView ä¸­ä½¿ç”¨</h4>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewModel: MyViewModel <span class="hljs-keyword">by</span> viewModels()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> adapter: ItemAdapter
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        adapter = ItemAdapter()
        recyclerView.adapter = adapter
        
        lifecycleScope.launch {
            repeatOnLifecycle(Lifecycle.State.STARTED) {
                viewModel.items.collectLatest { pagingData -&gt;
                    adapter.submitData(pagingData)
                }
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-55">Compose ä¸­ä½¿ç”¨</h4>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ItemListScreen</span><span class="hljs-params">(viewModel: <span class="hljs-type">MyViewModel</span> = viewModel()</span></span>) {
    <span class="hljs-keyword">val</span> items = viewModel.items.collectAsLazyPagingItems()
    
    LazyColumn {
        items(items) { item -&gt;
            <span class="hljs-keyword">if</span> (item != <span class="hljs-literal">null</span>) {
                ItemRow(item = item)
            }
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-56">ç¬¬11ç« ï¼šFlow ä¸ Jetpack DataStoreï¼šå‘Šåˆ« SharedPreferences</h2>
<h3 data-id="heading-57">11.1 åŸºæœ¬ä½¿ç”¨</h3>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰æ•°æ®å­˜å‚¨</span>
<span class="hljs-keyword">val</span> Context.settingsDataStore: DataStore&lt;Preferences&gt; <span class="hljs-keyword">by</span> preferencesDataStore(
    name = <span class="hljs-string">"settings"</span>
)

<span class="hljs-comment">// å®šä¹‰é”®</span>
<span class="hljs-keyword">object</span> PreferencesKeys {
    <span class="hljs-keyword">val</span> THEME = stringPreferencesKey(<span class="hljs-string">"theme"</span>)
    <span class="hljs-keyword">val</span> NOTIFICATIONS_ENABLED = booleanPreferencesKey(<span class="hljs-string">"notifications_enabled"</span>)
}

<span class="hljs-comment">// å†™å…¥æ•°æ®</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">saveTheme</span><span class="hljs-params">(theme: <span class="hljs-type">String</span>)</span></span> {
    context.settingsDataStore.edit { preferences -&gt;
        preferences[PreferencesKeys.THEME] = theme
    }
}

<span class="hljs-comment">// è¯»å–æ•°æ®ï¼ˆè¿”å› Flowï¼‰</span>
<span class="hljs-keyword">val</span> themeFlow: Flow&lt;String&gt; = context.settingsDataStore.<span class="hljs-keyword">data</span>
    .map { preferences -&gt;
        preferences[PreferencesKeys.THEME] ?: <span class="hljs-string">"light"</span>
    }
</code></pre>
<h3 data-id="heading-58">11.2 åœ¨ ViewModel ä¸­ä½¿ç”¨</h3>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SettingsViewModel</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> dataStore: DataStore&lt;Preferences&gt;
) : ViewModel() {
    
    <span class="hljs-keyword">val</span> theme: Flow&lt;String&gt; = dataStore.<span class="hljs-keyword">data</span>
        .map { preferences -&gt;
            preferences[PreferencesKeys.THEME] ?: <span class="hljs-string">"light"</span>
        }
    
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateTheme</span><span class="hljs-params">(theme: <span class="hljs-type">String</span>)</span></span> {
        dataStore.edit { preferences -&gt;
            preferences[PreferencesKeys.THEME] = theme
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-59">ç¬¬12ç« ï¼šFlow ä¸ WorkManagerï¼šç›‘å¬åå°ä»»åŠ¡çŠ¶æ€ï¼ˆç®€åŒ–ç‰ˆï¼‰</h2>
<h3 data-id="heading-60">12.1 åŸºæœ¬ä½¿ç”¨</h3>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DownloadViewModel</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> workManager: WorkManager
) : ViewModel() {
    
    <span class="hljs-comment">// ç›‘æ§ç‰¹å®š WorkRequest çš„çŠ¶æ€</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">monitorDownload</span><span class="hljs-params">(downloadId: <span class="hljs-type">UUID</span>)</span></span>: Flow&lt;WorkInfo&gt; {
        <span class="hljs-keyword">return</span> workManager.getWorkInfoByIdFlow(downloadId)
    }
}
</code></pre>
<h3 data-id="heading-61">12.2 åœ¨ UI ä¸­ç›‘æ§</h3>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">DownloadScreen</span><span class="hljs-params">(viewModel: <span class="hljs-type">DownloadViewModel</span>)</span></span> {
    <span class="hljs-keyword">val</span> downloadState <span class="hljs-keyword">by</span> viewModel.downloadState.collectAsState()
    
    <span class="hljs-comment">// æ ¹æ®çŠ¶æ€æ˜¾ç¤ºä¸åŒçš„ UI</span>
    <span class="hljs-keyword">when</span> (downloadState) {
        <span class="hljs-keyword">is</span> WorkInfo.State.RUNNING -&gt; {
            Text(<span class="hljs-string">"ä¸‹è½½ä¸­..."</span>)
        }
        <span class="hljs-keyword">is</span> WorkInfo.State.SUCCEEDED -&gt; {
            Text(<span class="hljs-string">"ä¸‹è½½å®Œæˆ"</span>)
        }
        <span class="hljs-keyword">is</span> WorkInfo.State.FAILED -&gt; {
            Text(<span class="hljs-string">"ä¸‹è½½å¤±è´¥"</span>)
        }
        <span class="hljs-keyword">else</span> -&gt; {}
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™åˆ†å¸ƒå¼KVStoreå†²çªè§£å†³æœºåˆ¶ï¼šåŸç†ã€å®ç°ä¸å·¥ç¨‹åŒ–å®è·µ]]></title>    <link>https://juejin.cn/post/7587997893987303451</link>    <guid>https://juejin.cn/post/7587997893987303451</guid>    <pubDate>2025-12-26T10:07:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997893987303451" data-draft-id="7587776610436136975" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™åˆ†å¸ƒå¼KVStoreå†²çªè§£å†³æœºåˆ¶ï¼šåŸç†ã€å®ç°ä¸å·¥ç¨‹åŒ–å®è·µ"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-12-26T10:07:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Nickä¸æ‡‚"/> <meta itemprop="url" content="https://juejin.cn/user/4212984286031133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™åˆ†å¸ƒå¼KVStoreå†²çªè§£å†³æœºåˆ¶ï¼šåŸç†ã€å®ç°ä¸å·¥ç¨‹åŒ–å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984286031133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Nickä¸æ‡‚
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:07:28.000Z" title="Fri Dec 26 2025 10:07:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¸¿è’™åˆ†å¸ƒå¼KVStoreå†²çªè§£å†³æœºåˆ¶ï¼šåŸç†ã€å®ç°ä¸å·¥ç¨‹åŒ–å®è·µ</h2>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒèƒŒæ™¯ä¸é—®é¢˜å®šä¹‰</h3>
<p>åˆ†å¸ƒå¼KVStoreæ˜¯é¸¿è’™ï¼ˆHarmonyOS/OpenHarmonyï¼‰å®ç°è·¨è®¾å¤‡æ•°æ®ååŒçš„æ ¸å¿ƒç»„ä»¶ï¼Œé€‚ç”¨äºåº”ç”¨é…ç½®ã€ç”¨æˆ·çŠ¶æ€ç­‰è½»é‡çº§æ•°æ®çš„è·¨è®¾å¤‡åŒæ­¥åœºæ™¯ã€‚å…¶åŸºäºæœ€ç»ˆä¸€è‡´æ€§æ¨¡å‹è®¾è®¡ï¼Œåœ¨å¤šè®¾å¤‡å¹¶å‘å†™å…¥åŒä¸€Keyæ—¶ï¼Œå¿…ç„¶äº§ç”Ÿæ•°æ®å†²çªã€‚æœ¬æ–‡èšç„¦ <strong>SingleKVStoreï¼ˆå•ç‰ˆæœ¬æ¨¡å¼ï¼‰</strong> çš„å†²çªè§£å†³æœºåˆ¶ï¼Œæ˜ç¡®æ ¸å¿ƒé—®é¢˜è¾¹ç•Œï¼šå½“ç»„ç½‘å†…å¤šä¸ªè®¾å¤‡å¯¹åŒä¸€Keyæ‰§è¡Œå†™å…¥æ“ä½œæ—¶ï¼Œå¦‚ä½•ä¿è¯æ•°æ®æœ€ç»ˆä¸€è‡´æ€§ï¼ŒåŒæ—¶é¿å…ä¸šåŠ¡å…³é”®æ•°æ®ä¸¢å¤±ã€‚</p>
<h3 data-id="heading-2">äºŒã€å†²çªäº§ç”Ÿçš„åº•å±‚é€»è¾‘</h3>
<h4 data-id="heading-3">1. å†²çªè§¦å‘æ¡ä»¶</h4>
<ul>
<li>
<p>æ•°æ®ç»´åº¦ï¼šåŒä¸€SingleKVStoreå®ä¾‹ä¸­ï¼Œä¸åŒè®¾å¤‡å¯¹åŒä¸€Keyæ‰§è¡Œå†™å…¥ï¼ˆè¦†ç›–/æ›´æ–°ï¼‰æ“ä½œï¼›</p>
</li>
<li>
<p>ç½‘ç»œç»´åº¦ï¼šè®¾å¤‡é—´ç½‘ç»œä¸­æ–­åæ¢å¤è¿æ¥ï¼Œæˆ–å¤šè®¾å¤‡åŒæ—¶åœ¨çº¿æ—¶å¹¶å‘å†™å…¥ï¼›</p>
</li>
<li>
<p>ç³»ç»Ÿç»´åº¦ï¼šåŒæ­¥è¿‡ç¨‹ä¸­æ•°æ®ä¼ è¾“å»¶è¿Ÿã€è®¾å¤‡æ—¶é’Ÿåå·®ï¼ˆå½±å“æ—¶é—´æˆ³åˆ¤æ–­ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-4">2. é»˜è®¤å†²çªè§£å†³ç­–ç•¥ï¼šLWWï¼ˆLast Write Winsï¼‰</h4>
<p>é¸¿è’™é»˜è®¤é‡‡ç”¨â€œæœ€åå†™å…¥è€…è·èƒœâ€ç­–ç•¥ï¼Œæ ¸å¿ƒåˆ¤å®šä¾æ®ä¸ºæ•°æ®çš„å†™å…¥æ—¶é—´æˆ³ï¼ˆç³»ç»Ÿæ—¶é—´ï¼‰æˆ–ç‰ˆæœ¬å·ï¼š</p>
<ul>
<li>
<p>åˆ¤å®šé€»è¾‘ï¼šåŒæ­¥æ—¶å¯¹æ¯”åŒä¸€Keyçš„æ—¶é—´æˆ³ï¼Œä¿ç•™æ—¶é—´æˆ³æ›´æ–°çš„å†™å…¥æ•°æ®ï¼›</p>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯ï¼šé…ç½®ç±»æ•°æ®ï¼ˆå¦‚ä¸»é¢˜è®¾ç½®ã€å­—ä½“å¤§å°ï¼‰ï¼Œè¿™ç±»æ•°æ®å¯¹â€œæœ€æ–°çŠ¶æ€â€çš„éœ€æ±‚ä¼˜å…ˆäºâ€œå…¨é‡åˆå¹¶â€ï¼›</p>
</li>
<li>
<p>å±€é™æ€§ï¼šæ— æ³•å¤„ç†éœ€è¦ç»“æ„åŒ–åˆå¹¶çš„åœºæ™¯ï¼ˆå¦‚å¾…åŠæ¸…å•æ•°ç»„ã€å¤šå­—æ®µå¯¹è±¡ï¼‰ï¼Œä¸”è®¾å¤‡æ—¶é’Ÿåå·®å¯èƒ½å¯¼è‡´é”™è¯¯çš„ä¼˜å…ˆçº§åˆ¤å®šã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">ä¸‰ã€è‡ªå®šä¹‰å†²çªè§£å†³ï¼šå®æˆ˜å®ç°ï¼ˆStageæ¨¡å‹+ArkTSï¼‰</h3>
<h4 data-id="heading-6">1. å‰ç½®å‡†å¤‡ï¼šæƒé™ä¸ä¾èµ–</h4>
<p>éœ€åœ¨<code>module.json5</code>ä¸­å£°æ˜åˆ†å¸ƒå¼æ•°æ®æ“ä½œæƒé™ï¼Œç¡®ä¿è·¨è®¾å¤‡æ•°æ®åŒæ­¥èƒ½åŠ›æ­£å¸¸å¯ç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">
{

Â  <span class="hljs-string">"module"</span>: {

Â  Â  <span class="hljs-string">"requestPermissions"</span>: [

Â  Â  Â  {

Â  Â  Â  Â  <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.DISTRIBUTED_DATASYNC"</span>,

Â  Â  Â  Â  <span class="hljs-string">"reason"</span>: <span class="hljs-string">"è·¨è®¾å¤‡æ•°æ®åŒæ­¥éœ€è¦"</span>,

Â  Â  Â  Â  <span class="hljs-string">"usedScene"</span>: { <span class="hljs-string">"ability"</span>: [<span class="hljs-string">"com.demo.kvstore.DemoAbility"</span>], <span class="hljs-string">"when"</span>: <span class="hljs-string">"always"</span> }

Â  Â  Â  },

Â  Â  Â  {

Â  Â  Â  Â  <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.GET_DISTRIBUTED_DEVICE_INFO"</span>,

Â  Â  Â  Â  <span class="hljs-string">"reason"</span>: <span class="hljs-string">"è·å–ç»„ç½‘è®¾å¤‡ä¿¡æ¯éœ€è¦"</span>,

Â  Â  Â  Â  <span class="hljs-string">"usedScene"</span>: { <span class="hljs-string">"ability"</span>: [<span class="hljs-string">"com.demo.kvstore.DemoAbility"</span>], <span class="hljs-string">"when"</span>: <span class="hljs-string">"always"</span> }

Â  Â  Â  }

Â  Â  ]

Â  }

}

</code></pre>
<p>ä¾èµ–å¯¼å…¥ï¼ˆAPI 10+ï¼Œéœ€åŒæ­¥å‡çº§SDKè‡³å¯¹åº”ç‰ˆæœ¬ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">import</span> distributedData <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.distributedData'</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;

<span class="hljs-keyword">import</span> deviceManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.distributedHardware.deviceManager'</span>;

</code></pre>
<h4 data-id="heading-7">2. æ ¸å¿ƒå®ç°æ­¥éª¤</h4>
<h5 data-id="heading-8">æ­¥éª¤1ï¼šåˆå§‹åŒ–åˆ†å¸ƒå¼KVStoreï¼ˆæŒ‡å®šå•ç‰ˆæœ¬æ¨¡å¼ï¼‰</h5>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedKVManager</span> {

Â  <span class="hljs-keyword">private</span> <span class="hljs-attr">kvStore</span>: distributedData.<span class="hljs-property">SingleKVStore</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-variable constant_">STORE_NAME</span> = <span class="hljs-string">'demo_business_store'</span>; <span class="hljs-comment">// è·¨è®¾å¤‡ç»Ÿä¸€å­˜å‚¨åç§°</span>

Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-variable constant_">SECURITY_LEVEL</span> = distributedData.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S1</span>; <span class="hljs-comment">// åŸºç¡€å®‰å…¨ç­‰çº§ï¼ˆéåŠ å¯†ï¼‰</span>

  


Â  <span class="hljs-comment">// åˆå§‹åŒ–KVStoreï¼Œç¡®ä¿è·¨è®¾å¤‡å…±äº«åŒä¸€å­˜å‚¨å®ä¾‹</span>

Â  <span class="hljs-keyword">async</span> <span class="hljs-title function_">init</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {

Â  Â  <span class="hljs-keyword">try</span> {

Â  Â  Â  <span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: distributedData.<span class="hljs-property">Options</span> = {

Â  Â  Â  Â  <span class="hljs-attr">createIfMissing</span>: <span class="hljs-literal">true</span>,

Â  Â  Â  Â  <span class="hljs-attr">encrypt</span>: <span class="hljs-literal">false</span>,

Â  Â  Â  Â  <span class="hljs-attr">securityLevel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">SECURITY_LEVEL</span>

Â  Â  Â  };

Â  Â  Â  <span class="hljs-comment">// è·å–SingleKVStoreå®ä¾‹ï¼ˆå•ç‰ˆæœ¬æ¨¡å¼ï¼Œæ”¯æŒè·¨è®¾å¤‡åŒæ­¥ï¼‰</span>

Â  Â  Â  <span class="hljs-variable language_">this</span>.<span class="hljs-property">kvStore</span> = <span class="hljs-keyword">await</span> distributedData.<span class="hljs-title function_">getSingleKVStore</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">STORE_NAME</span>, options);

Â  Â  Â  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'DistributedKVStoreåˆå§‹åŒ–æˆåŠŸ'</span>);

Â  Â  Â  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">registerConflictListener</span>(); <span class="hljs-comment">// æ³¨å†Œå†²çªç›‘å¬</span>

Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

Â  Â  } <span class="hljs-keyword">catch</span> (error) {

Â  Â  Â  <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;

Â  Â  Â  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`KVStoreåˆå§‹åŒ–å¤±è´¥ï¼šcode=<span class="hljs-subst">${err.code}</span>, message=<span class="hljs-subst">${err.message}</span>`</span>);

Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

Â  Â  }

Â  }

}

</code></pre>
<h5 data-id="heading-9">æ­¥éª¤2ï¼šè‡ªå®šä¹‰å†²çªè§£å†³é€»è¾‘ï¼ˆä»¥å¾…åŠæ¸…å•åˆå¹¶ä¸ºä¾‹ï¼‰</h5>
<p>é’ˆå¯¹ç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚å¾…åŠæ¸…å•æ•°ç»„ï¼‰ï¼Œå®ç°â€œæ•°ç»„å»é‡åˆå¹¶â€çš„è‡ªå®šä¹‰ç­–ç•¥ï¼Œæ›¿ä»£é»˜è®¤LWWç­–ç•¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">registerConflictListener</span>(<span class="hljs-params"/>) {

Â  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">kvStore</span>) <span class="hljs-keyword">return</span>;

  


Â  <span class="hljs-comment">// ç›‘å¬æ‰€æœ‰æ•°æ®å˜æ›´ï¼ˆæœ¬åœ°+è¿œç«¯ï¼‰ï¼Œé€šè¿‡ä¸šåŠ¡é€»è¾‘è¯†åˆ«å†²çª</span>

Â  <span class="hljs-variable language_">this</span>.<span class="hljs-property">kvStore</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, distributedData.<span class="hljs-property">SubscribeType</span>.<span class="hljs-property">SUBSCRIBE_TYPE_ALL</span>, <span class="hljs-keyword">async</span> (data) =&gt; {

Â  Â  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> data.<span class="hljs-property">updateEntries</span>) {

Â  Â  Â  <span class="hljs-keyword">const</span> key = entry.<span class="hljs-property">key</span>;

Â  Â  Â  <span class="hljs-keyword">const</span> remoteValue = entry.<span class="hljs-property">value</span>; <span class="hljs-comment">// è¿œç«¯åŒæ­¥è¿‡æ¥çš„æ–°æ•°æ®</span>

Â  Â  Â  <span class="hljs-keyword">const</span> localValue = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">kvStore</span>!.<span class="hljs-title function_">get</span>(key); <span class="hljs-comment">// æœ¬åœ°å½“å‰æ•°æ®</span>

  


Â  Â  Â  <span class="hljs-comment">// 1. æ•°æ®æ ¼å¼æ ¡éªŒï¼ˆçº¦å®švalueä¸º{ ver: number, payload: any }ç»“æ„ï¼‰</span>

Â  Â  Â  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateDataFormat</span>(localValue) || !<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateDataFormat</span>(remoteValue)) {

Â  Â  Â  Â  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`æ•°æ®æ ¼å¼éæ³•ï¼Œé‡‡ç”¨LWWç­–ç•¥ï¼škey=<span class="hljs-subst">${key}</span>`</span>);

Â  Â  Â  Â  <span class="hljs-keyword">return</span>;

Â  Â  Â  }

  


Â  Â  Â  <span class="hljs-comment">// 2. åˆ¤å®šå†²çªï¼šæœ¬åœ°ä¸è¿œç«¯ç‰ˆæœ¬å·ä¸åŒæ—¶è§†ä¸ºå†²çª</span>

Â  Â  Â  <span class="hljs-keyword">if</span> (localValue.<span class="hljs-property">ver</span> !== remoteValue.<span class="hljs-property">ver</span>) {

Â  Â  Â  Â  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`æ£€æµ‹åˆ°å†²çªï¼škey=<span class="hljs-subst">${key}</span>ï¼Œæœ¬åœ°ç‰ˆæœ¬=<span class="hljs-subst">${localValue.ver}</span>ï¼Œè¿œç«¯ç‰ˆæœ¬=<span class="hljs-subst">${remoteValue.ver}</span>`</span>);

Â  Â  Â  Â  <span class="hljs-keyword">const</span> mergedValue = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">mergeTodoList</span>(localValue.<span class="hljs-property">payload</span>, remoteValue.<span class="hljs-property">payload</span>);

Â  Â  Â  Â  <span class="hljs-keyword">const</span> newVer = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(localValue.<span class="hljs-property">ver</span>, remoteValue.<span class="hljs-property">ver</span>) + <span class="hljs-number">1</span>; <span class="hljs-comment">// ç”Ÿæˆæ–°ç‰ˆæœ¬å·</span>

  


Â  Â  Â  Â  <span class="hljs-comment">// 3. å†™å…¥åˆå¹¶åçš„æ•°æ®ï¼ˆé¿å…å¾ªç¯åŒæ­¥ï¼Œéœ€åŸå­æ“ä½œï¼‰</span>

Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">kvStore</span>!.<span class="hljs-title function_">put</span>(key, { <span class="hljs-attr">ver</span>: newVer, <span class="hljs-attr">payload</span>: mergedValue });

Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">kvStore</span>!.<span class="hljs-title function_">flush</span>(); <span class="hljs-comment">// å¼ºåˆ¶åˆ·ç›˜ï¼Œç¡®ä¿åŒæ­¥å¯é æ€§</span>

Â  Â  Â  }

Â  Â  }

Â  });

}

  


<span class="hljs-comment">// æ ¡éªŒæ•°æ®æ ¼å¼ï¼ˆä¸šåŠ¡è‡ªå®šä¹‰ï¼‰</span>

<span class="hljs-keyword">private</span> <span class="hljs-title function_">validateDataFormat</span>(<span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">boolean</span> {

Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'object'</span> &amp;&amp; data !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-string">'ver'</span> <span class="hljs-keyword">in</span> data &amp;&amp; <span class="hljs-string">'payload'</span> <span class="hljs-keyword">in</span> data;

}

  


<span class="hljs-comment">// å¾…åŠæ¸…å•åˆå¹¶é€»è¾‘ï¼šå»é‡å¹¶ä¿ç•™æ‰€æœ‰æœ‰æ•ˆæ¡ç›®</span>

<span class="hljs-keyword">private</span> <span class="hljs-title function_">mergeTodoList</span>(<span class="hljs-attr">localTodo</span>: <span class="hljs-title class_">Array</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">completed</span>: <span class="hljs-built_in">boolean</span> }&gt;,Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">remoteTodo</span>: <span class="hljs-title class_">Array</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">completed</span>: <span class="hljs-built_in">boolean</span> }&gt;): <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">any</span>&gt; {

Â  <span class="hljs-keyword">const</span> todoMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;();

Â  <span class="hljs-comment">// å…ˆåŠ å…¥æœ¬åœ°æ¡ç›®</span>

Â  localTodo.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todoMap.<span class="hljs-title function_">set</span>(todo.<span class="hljs-property">id</span>, todo));

Â  <span class="hljs-comment">// åŠ å…¥è¿œç«¯æ¡ç›®ï¼ˆè¿œç«¯å·²å®ŒæˆçŠ¶æ€ä¼˜å…ˆï¼Œé¿å…æœ¬åœ°æœªåŒæ­¥çš„å®ŒæˆçŠ¶æ€ä¸¢å¤±ï¼‰</span>

Â  remoteTodo.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> {

Â  Â  <span class="hljs-keyword">const</span> existTodo = todoMap.<span class="hljs-title function_">get</span>(todo.<span class="hljs-property">id</span>);

Â  Â  <span class="hljs-keyword">if</span> (existTodo) {

Â  Â  Â  todoMap.<span class="hljs-title function_">set</span>(todo.<span class="hljs-property">id</span>, { ...existTodo, <span class="hljs-attr">completed</span>: todo.<span class="hljs-property">completed</span> });

Â  Â  } <span class="hljs-keyword">else</span> {

Â  Â  Â  todoMap.<span class="hljs-title function_">set</span>(todo.<span class="hljs-property">id</span>, todo);

Â  Â  }

Â  });

Â  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(todoMap.<span class="hljs-title function_">values</span>());

}

</code></pre>
<h5 data-id="heading-10">æ­¥éª¤3ï¼šä¸»åŠ¨åŒæ­¥è§¦å‘ï¼ˆæ§åˆ¶åŒæ­¥æ—¶æœºï¼‰</h5>
<p>é€šè¿‡<code>sync</code>æ–¹æ³•ä¸»åŠ¨è§¦å‘è·¨è®¾å¤‡æ•°æ®åŒæ­¥ï¼Œæ”¯æŒæŒ‡å®šåŒæ­¥æ¨¡å¼å’Œç›®æ ‡è®¾å¤‡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-comment">// è§¦å‘åŒæ­¥ï¼šå‘ç»„ç½‘å†…æ‰€æœ‰è®¾å¤‡æ¨é€æœ¬åœ°æ•°æ®å¹¶æ‹‰å–è¿œç«¯æ•°æ®</span>

<span class="hljs-keyword">async</span> <span class="hljs-title function_">syncData</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {

Â  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">kvStore</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

Â  <span class="hljs-keyword">try</span> {

Â  Â  <span class="hljs-keyword">const</span> <span class="hljs-attr">syncOptions</span>: distributedData.<span class="hljs-property">SyncOptions</span> = {

Â  Â  Â  <span class="hljs-attr">syncMode</span>: distributedData.<span class="hljs-property">SyncMode</span>.<span class="hljs-property">PUSH_PULL</span>, <span class="hljs-comment">// æ¨æ‹‰æ¨¡å¼ï¼ˆåŒå‘åŒæ­¥ï¼‰</span>

Â  Â  Â  <span class="hljs-attr">deviceIds</span>: [], <span class="hljs-comment">// ç©ºæ•°ç»„è¡¨ç¤ºåŒæ­¥è‡³æ‰€æœ‰ç»„ç½‘è®¾å¤‡</span>

Â  Â  Â  <span class="hljs-attr">delayMs</span>: <span class="hljs-number">100</span> <span class="hljs-comment">// å»¶è¿Ÿ100msåŒæ­¥ï¼Œé¿å…é¢‘ç¹å†™å…¥å¯¼è‡´çš„æŠ–åŠ¨</span>

Â  Â  };

Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">kvStore</span>.<span class="hljs-title function_">sync</span>(syncOptions);

Â  Â  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'æ•°æ®åŒæ­¥è§¦å‘æˆåŠŸ'</span>);

Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

Â  } <span class="hljs-keyword">catch</span> (error) {

Â  Â  <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;

Â  Â  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`åŒæ­¥å¤±è´¥ï¼šcode=<span class="hljs-subst">${err.code}</span>, message=<span class="hljs-subst">${err.message}</span>`</span>);

Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

Â  }

}

</code></pre>
<h3 data-id="heading-11">å››ã€å·¥ç¨‹åŒ–æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-12">1. å†²çªè§„é¿ï¼šå­˜å‚¨ç»“æ„è®¾è®¡åŸåˆ™</h4>
<ul>
<li>
<p>æ‹†åˆ†Keyç²’åº¦ï¼šå°†å¤æ‚å¯¹è±¡æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹Keyï¼ˆå¦‚<code>todo_list_202506</code>ã€<code>todo_config</code>ï¼‰ï¼Œå‡å°‘åŒä¸€Keyçš„å¹¶å‘å†™å…¥ï¼›</p>
</li>
<li>
<p>è®¾å¤‡ç»´åº¦éš”ç¦»ï¼šéå…±äº«æ•°æ®ä½¿ç”¨<code>DeviceKVStore</code>ï¼ˆæŒ‰è®¾å¤‡åˆ†ç‰‡å­˜å‚¨ï¼‰ï¼Œå¤©ç„¶é¿å…è·¨è®¾å¤‡å†²çªï¼›</p>
</li>
<li>
<p>ç‰ˆæœ¬å·å¼ºåˆ¶é€’å¢ï¼šçº¦å®šæ‰€æœ‰å†™å…¥æ“ä½œå¿…é¡»ç”Ÿæˆæ–°çš„ç‰ˆæœ¬å·ï¼ˆå¦‚åŸºäºæ—¶é—´æˆ³+è®¾å¤‡IDï¼‰ï¼Œç¡®ä¿å†²çªåˆ¤å®šå‡†ç¡®æ€§ã€‚</p>
</li>
</ul>
<h4 data-id="heading-13">2. æ€§èƒ½ä¼˜åŒ–ï¼šå‡å°‘æ— æ•ˆåŒæ­¥</h4>
<ul>
<li>
<p>æ‰¹é‡åŒæ­¥èšåˆåŒæ­¥è¯·æ±‚ï¼šçŸ­æ—¶é—´å†…å¤šæ¬¡å†™å…¥åï¼Œå»¶è¿Ÿ100-300msè§¦å‘åŒæ­¥ï¼ˆé€šè¿‡<code>delayMs</code>é…ç½®ï¼‰ï¼Œå‡å°‘åŒæ­¥æ¬¡æ•°ï¼›</p>
</li>
<li>
<p>è¿‡æ»¤æ— æ•ˆå˜æ›´ï¼šåœ¨<code>dataChange</code>ç›‘å¬ä¸­ï¼Œå¯¹æ¯”æ•°æ®å†…å®¹æ˜¯å¦çœŸçš„å˜åŒ–ï¼Œé¿å…å› ç‰ˆæœ¬å·è¯¯åˆ¤å¯¼è‡´çš„é‡å¤åˆå¹¶ï¼›</p>
</li>
<li>
<p>æ§åˆ¶æ•°æ®è§„æ¨¡ï¼šSingleKVStoreå»ºè®®å•Keyæ•°æ®ä¸è¶…è¿‡10KBï¼Œæ€»æ¡ç›®æ•°ä¸è¶…è¿‡1000æ¡ï¼Œè¶…å‡ºåœºæ™¯åˆ‡æ¢è‡³åˆ†å¸ƒå¼æ•°æ®åº“ã€‚</p>
</li>
</ul>
<h4 data-id="heading-14">3. å¯é æ€§ä¿éšœï¼šå¼‚å¸¸å¤„ç†ä¸æ ¡éªŒ</h4>
<ul>
<li>
<p>å¹‚ç­‰æ€§è®¾è®¡ï¼šåˆå¹¶é€»è¾‘ç¡®ä¿å¤šæ¬¡æ‰§è¡Œç»“æœä¸€è‡´ï¼Œé¿å…åŒæ­¥é‡è¯•å¯¼è‡´çš„æ•°æ®é‡å¤ï¼›</p>
</li>
<li>
<p>æ•°æ®å¤‡ä»½ï¼šå…³é”®ä¸šåŠ¡æ•°æ®å®šæœŸå¤‡ä»½è‡³æœ¬åœ°æ–‡ä»¶ï¼Œé¿å…KVStoreåŒæ­¥å¼‚å¸¸å¯¼è‡´çš„æ•°æ®ä¸¢å¤±ï¼›</p>
</li>
<li>
<p>å†²çªæ—¥å¿—ï¼šè®°å½•å†²çªå‘ç”Ÿæ—¶é—´ã€Keyã€æœ¬åœ°/è¿œç«¯æ•°æ®å†…å®¹ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ã€‚</p>
</li>
</ul>
<h3 data-id="heading-15">äº”ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-16">1. å†²çªç›‘å¬ä¸è§¦å‘</h4>
<ul>
<li>
<p>æ’æŸ¥æ–¹å‘1ï¼šæƒé™æœªæˆäºˆï¼ˆéœ€åŠ¨æ€ç”³è¯·<code>DISTRIBUTED_DATASYNC</code>æƒé™ï¼Œå°¤å…¶æ˜¯API 11+ç‰ˆæœ¬ï¼‰ï¼›</p>
</li>
<li>
<p>æ’æŸ¥æ–¹å‘2ï¼šè®¢é˜…ç±»å‹é”™è¯¯ï¼ˆéœ€ä½¿ç”¨<code>SUBSCRIBE_TYPE_ALL</code>ç›‘å¬æœ¬åœ°å’Œè¿œç«¯å˜æ›´ï¼‰ï¼›</p>
</li>
<li>
<p>æ’æŸ¥æ–¹å‘3ï¼šKVStoreå®ä¾‹æœªæ­£ç¡®åˆå§‹åŒ–ï¼ˆç¡®ä¿<code>getSingleKVStore</code>è°ƒç”¨æˆåŠŸåå†æ³¨å†Œç›‘å¬ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-17">2. åˆå¹¶åæ•°æ®å†æ¬¡å†²çª</h4>
<ul>
<li>
<p>è§£å†³æ–¹æ¡ˆï¼šå†™å…¥åˆå¹¶æ•°æ®æ—¶ç”Ÿæˆå…¨å±€å”¯ä¸€ç‰ˆæœ¬å·ï¼ˆå¦‚<code>Date.now() + è®¾å¤‡IDåç¼€</code>ï¼‰ï¼Œé¿å…ä¸åŒè®¾å¤‡ç”Ÿæˆç›¸åŒç‰ˆæœ¬å·ï¼›</p>
</li>
<li>
<p>è¡¥å……æªæ–½ï¼šåŒæ­¥åè§¦å‘<code>flush</code>å¼ºåˆ¶åˆ·ç›˜ï¼Œç¡®ä¿æ•°æ®æŒä¹…åŒ–åå†å‚ä¸ä¸‹ä¸€è½®åŒæ­¥ã€‚</p>
</li>
</ul>
<h4 data-id="heading-18">3. è®¾å¤‡æ—¶é’Ÿåå·®å¯¼è‡´LWWç­–ç•¥å¤±æ•ˆ</h4>
<ul>
<li>
<p>è§£å†³æ–¹æ¡ˆï¼šæ›¿æ¢æ—¶é—´æˆ³ä¸ºâ€œç‰ˆæœ¬å·+è®¾å¤‡ä¼˜å…ˆçº§â€çš„åˆ¤å®šé€»è¾‘ï¼ˆå¦‚æ‰‹æœºä¼˜å…ˆçº§é«˜äºæ‰‹è¡¨ï¼Œç›¸åŒç‰ˆæœ¬å·æ—¶ä¿ç•™æ‰‹æœºæ•°æ®ï¼‰ï¼›</p>
</li>
<li>
<p>å®ç°æ–¹å¼ï¼šåœ¨æ•°æ®ç»“æ„ä¸­å¢åŠ <code>devicePriority</code>å­—æ®µï¼Œå†²çªæ—¶ä¼˜å…ˆä¿ç•™ä¼˜å…ˆçº§é«˜çš„è®¾å¤‡æ•°æ®ã€‚</p>
</li>
</ul>
<h3 data-id="heading-19">å…­ã€æ ¸å¿ƒæ€»ç»“</h3>
<p>åˆ†å¸ƒå¼KVStoreçš„å†²çªè§£å†³æ ¸å¿ƒåœ¨äºâ€œå…ˆè§„é¿ã€åè§£å†³â€ï¼šé€šè¿‡åˆç†çš„Keyç²’åº¦è®¾è®¡å’Œå­˜å‚¨æ¨¡å¼é€‰æ‹©ï¼Œå‡å°‘å†²çªå‘ç”Ÿæ¦‚ç‡ï¼›é’ˆå¯¹æ— æ³•è§„é¿çš„å†²çªï¼ŒåŸºäºä¸šåŠ¡åœºæ™¯å®ç°è‡ªå®šä¹‰åˆå¹¶é€»è¾‘ï¼ˆå¦‚æ•°ç»„åˆå¹¶ã€å­—æ®µä¼˜å…ˆçº§åˆå¹¶ï¼‰ï¼Œæ›¿ä»£é»˜è®¤LWWç­–ç•¥ã€‚å¼€å‘è¿‡ç¨‹ä¸­éœ€é‡ç‚¹å…³æ³¨ç‰ˆæœ¬å·ç®¡ç†ã€åŒæ­¥æ—¶æœºæ§åˆ¶å’Œå¼‚å¸¸æ—¥å¿—è®°å½•ï¼Œç¡®ä¿è·¨è®¾å¤‡æ•°æ®ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œä¿éšœä¸šåŠ¡æ•°æ®å¯é æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®©å¤§è¯­è¨€æ¨¡å‹æ‹¥æœ‰â€œè®°å¿†â€ï¼šå¤šè½®å¯¹è¯ä¸ LangChain å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7587998744294555654</link>    <guid>https://juejin.cn/post/7587998744294555654</guid>    <pubDate>2025-12-26T10:09:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587998744294555654" data-draft-id="7588002126258208774" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®©å¤§è¯­è¨€æ¨¡å‹æ‹¥æœ‰â€œè®°å¿†â€ï¼šå¤šè½®å¯¹è¯ä¸ LangChain å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,LangChain,LLM"/> <meta itemprop="datePublished" content="2025-12-26T10:09:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wwwwW"/> <meta itemprop="url" content="https://juejin.cn/user/631558156323657"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®©å¤§è¯­è¨€æ¨¡å‹æ‹¥æœ‰â€œè®°å¿†â€ï¼šå¤šè½®å¯¹è¯ä¸ LangChain å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/631558156323657/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wwwwW
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:09:37.000Z" title="Fri Dec 26 2025 10:09:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®©å¤§è¯­è¨€æ¨¡å‹æ‹¥æœ‰â€œè®°å¿†â€ï¼šå¤šè½®å¯¹è¯ä¸ LangChain å®è·µæŒ‡å—</h2>
<p>åœ¨å½“å‰äººå·¥æ™ºèƒ½åº”ç”¨å¼€å‘ä¸­ï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å› å…¶å¼ºå¤§çš„è‡ªç„¶è¯­è¨€ç†è§£ä¸ç”Ÿæˆèƒ½åŠ›ï¼Œè¢«å¹¿æ³›åº”ç”¨äºèŠå¤©æœºå™¨äººã€æ™ºèƒ½å®¢æœã€ä¸ªäººåŠ©ç†ç­‰åœºæ™¯ã€‚ç„¶è€Œï¼Œä¸€ä¸ªå¸¸è§çš„é—®é¢˜æ˜¯ï¼š<strong>LLM æœ¬èº«æ˜¯æ— çŠ¶æ€çš„</strong>â€”â€”æ¯ä¸€æ¬¡ API è°ƒç”¨éƒ½ç‹¬ç«‹äºå‰ä¸€æ¬¡ï¼Œå°±åƒæ¯æ¬¡ HTTP è¯·æ±‚ä¸€æ ·ï¼Œæ¨¡å‹æ— æ³•â€œè®°ä½â€ä½ ä¹‹å‰è¯´è¿‡ä»€ä¹ˆã€‚</p>
<p>é‚£ä¹ˆï¼Œå¦‚ä½•è®© LLM æ‹¥æœ‰â€œè®°å¿†â€ï¼Œå®ç°çœŸæ­£çš„å¤šè½®å¯¹è¯ä½“éªŒï¼Ÿæœ¬æ–‡å°†ä»åŸç†å‡ºå‘ï¼Œç»“åˆ LangChain æ¡†æ¶çš„å®è·µä»£ç ï¼Œæ·±å…¥æµ…å‡ºåœ°è®²è§£è¿™ä¸€å…³é”®æŠ€æœ¯ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆ LLM é»˜è®¤æ²¡æœ‰è®°å¿†ï¼Ÿ</h3>
<p>å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚ DeepSeekã€GPTã€Claude ç­‰ï¼‰åœ¨è®¾è®¡ä¸Šéµå¾ªâ€œè¾“å…¥-è¾“å‡ºâ€æ¨¡å¼ã€‚å½“ä½ è°ƒç”¨å…¶ API æ—¶ï¼Œä»…ä¼ é€’å½“å‰çš„é—®é¢˜æˆ–æŒ‡ä»¤ï¼Œæ¨¡å‹ä¸ä¼šè‡ªåŠ¨ä¿ç•™ä¹‹å‰çš„äº¤äº’å†…å®¹ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ts
ç¼–è¾‘
const <span class="hljs-attr">res1</span> = await model.invoke(<span class="hljs-string">'æˆ‘å«ç‹æºï¼Œå–œæ¬¢å–ç™½å…°åœ°'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">res2</span> = await model.invoke(<span class="hljs-string">'æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ'</span>)<span class="hljs-comment">;</span>
</code></pre>
<p>ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ï¼Œæ¨¡å‹å®Œå…¨ä¸çŸ¥é“â€œç‹æºâ€æ˜¯è°ï¼Œå› æ­¤å¾ˆå¯èƒ½å›ç­”ï¼šâ€œæˆ‘ä¸çŸ¥é“ä½ çš„åå­—ã€‚â€<br/>
è¿™æ˜¯å› ä¸ºä¸¤æ¬¡è°ƒç”¨ä¹‹é—´æ²¡æœ‰ä»»ä½•ä¸Šä¸‹æ–‡ä¼ é€’ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€å®ç°â€œè®°å¿†â€çš„æ ¸å¿ƒæ€è·¯ï¼šç»´æŠ¤å¯¹è¯å†å²</h3>
<p>è¦è®© LLM è¡¨ç°å‡ºâ€œæœ‰è®°å¿†â€çš„è¡Œä¸ºï¼Œæœ€ç›´æ¥çš„æ–¹æ³•æ˜¯ï¼š<strong>åœ¨æ¯æ¬¡è¯·æ±‚ä¸­æ˜¾å¼ä¼ å…¥å®Œæ•´çš„å¯¹è¯å†å²</strong>ã€‚é€šå¸¸ä»¥ <code>messages</code> æ•°ç»„çš„å½¢å¼ç»„ç»‡ï¼š</p>
<pre><code class="hljs language-css" lang="css">json
ç¼–è¾‘
<span class="hljs-selector-attr">[  {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"æˆ‘å«ç‹æºï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span>},  {<span class="hljs-string">"role"</span>: <span class="hljs-string">"assistant"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"å¾ˆé«˜å…´è®¤è¯†ä½ ï¼Œç‹æºï¼ç™½å…°åœ°æ˜¯å¾ˆä¼˜é›…çš„é€‰æ‹©ã€‚"</span>},  {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ çŸ¥é“æˆ‘æ˜¯è°å—ï¼Ÿ"</span>}]</span>
</code></pre>
<p>æ¨¡å‹é€šè¿‡åˆ†ææ•´ä¸ªå¯¹è¯ä¸Šä¸‹æ–‡ï¼Œå°±èƒ½å‡†ç¡®å›ç­”ï¼šâ€œä½ æ˜¯ç‹æºï¼Œå–œæ¬¢å–ç™½å…°åœ°ã€‚â€</p>
<p>ä½†è¿™ç§æ–¹æ³•å­˜åœ¨æ˜æ˜¾é—®é¢˜ï¼š<strong>éšç€å¯¹è¯è½®æ¬¡å¢åŠ ï¼Œè¾“å…¥ token æ•°é‡ä¸æ–­è†¨èƒ€</strong>ï¼Œä¸ä»…å¢åŠ è®¡ç®—æˆæœ¬ï¼Œè¿˜å¯èƒ½è¶…å‡ºæ¨¡å‹çš„æœ€å¤§ä¸Šä¸‹æ–‡é•¿åº¦é™åˆ¶ï¼ˆå¦‚ 32768 tokensï¼‰ã€‚è¿™å°±åƒæ»šé›ªçƒï¼Œè¶Šæ»šè¶Šå¤§ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€LangChain æä¾›çš„è§£å†³æ–¹æ¡ˆï¼šæ¨¡å—åŒ–è®°å¿†ç®¡ç†</h3>
<p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼ŒLangChain ç­‰ AI åº”ç”¨æ¡†æ¶æä¾›äº†ä¸“é—¨çš„ <strong>Memory æ¨¡å—</strong>ï¼Œå¸®åŠ©å¼€å‘è€…é«˜æ•ˆç®¡ç†å¯¹è¯å†å²ï¼Œå¹¶æ”¯æŒå¤šç§å­˜å‚¨ç­–ç•¥ï¼ˆå†…å­˜ã€æ•°æ®åº“ã€å‘é‡åŒ–æ‘˜è¦ç­‰ï¼‰ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>@langchain/deepseek</code> å’Œ <code>RunnableWithMessageHistory</code> çš„å®Œæ•´ç¤ºä¾‹ï¼š</p>
<h4 data-id="heading-4">1. åˆå§‹åŒ–æ¨¡å‹ä¸æç¤ºæ¨¡æ¿</h4>
<pre><code class="hljs language-javascript" lang="javascript">ts
ç¼–è¾‘
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableWithMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/runnables'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InMemoryChatMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/chat_history'</span>;

<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-chat'</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>,
});

<span class="hljs-comment">// å®šä¹‰åŒ…å«å†å²è®°å½•å ä½ç¬¦çš„æç¤ºæ¨¡æ¿</span>
<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">'system'</span>, <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹'</span>],
  [<span class="hljs-string">'placeholder'</span>, <span class="hljs-string">'{history}'</span>], <span class="hljs-comment">// å†å²æ¶ˆæ¯å°†æ’å…¥æ­¤å¤„</span>
  [<span class="hljs-string">'human'</span>, <span class="hljs-string">'{input}'</span>]
]);
</code></pre>
<h4 data-id="heading-5">2. æ„å»ºå¸¦è®°å¿†çš„å¯è¿è¡Œé“¾</h4>
<pre><code class="hljs language-dart" lang="dart">ts
ç¼–è¾‘
<span class="hljs-keyword">const</span> runnable = prompt.pipe(model);

<span class="hljs-comment">// åˆ›å»ºå†…å­˜ä¸­çš„å¯¹è¯å†å²å­˜å‚¨</span>
<span class="hljs-keyword">const</span> messageHistory = <span class="hljs-keyword">new</span> InMemoryChatMessageHistory();

<span class="hljs-comment">// å°è£…æˆæ”¯æŒä¼šè¯è®°å¿†çš„é“¾</span>
<span class="hljs-keyword">const</span> chain = <span class="hljs-keyword">new</span> RunnableWithMessageHistory({
  runnable,
  getMessageHistory: <span class="hljs-keyword">async</span> () =&gt; messageHistory,
  inputMessagesKey: <span class="hljs-string">'input'</span>,
  historyMessagesKey: <span class="hljs-string">'history'</span>,
});
</code></pre>
<h4 data-id="heading-6">3. æ‰§è¡Œå¤šè½®å¯¹è¯</h4>
<pre><code class="hljs language-php" lang="php">ts
ç¼–è¾‘
<span class="hljs-comment">// ç¬¬ä¸€è½®ï¼šç”¨æˆ·è‡ªæˆ‘ä»‹ç»</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">res1</span> = await chain.<span class="hljs-title function_ invoke__">invoke</span>(
  { <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«ç‹æºï¼Œå–œæ¬¢å–ç™½å…°åœ°'</span> },
  { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'makefriend'</span> } }
);
console.<span class="hljs-title function_ invoke__">log</span>(res1.content); <span class="hljs-comment">// â€œä½ å¥½ï¼Œç‹æºï¼ç™½å…°åœ°ç¡®å®å¾ˆç»å…¸ã€‚â€</span>

<span class="hljs-comment">// ç¬¬äºŒè½®ï¼šæé—®åå­—</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">res2</span> = await chain.<span class="hljs-title function_ invoke__">invoke</span>(
  { <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ'</span> },
  { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'makefriend'</span> } }
);
console.<span class="hljs-title function_ invoke__">log</span>(res2.content); <span class="hljs-comment">// â€œä½ å«ç‹æºã€‚â€</span>
</code></pre>
<blockquote>
<p>âœ… å…³é”®ç‚¹ï¼š<code>sessionId</code> ç”¨äºåŒºåˆ†ä¸åŒç”¨æˆ·çš„ä¼šè¯ã€‚åŒä¸€ä¸ª <code>sessionId</code> ä¸‹çš„æ‰€æœ‰äº¤äº’å…±äº«åŒä¸€æ®µå†å²ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">å››ã€è¿›é˜¶æ€è€ƒï¼šå¦‚ä½•ä¼˜åŒ–é•¿å¯¹è¯çš„è®°å¿†æ•ˆç‡ï¼Ÿ</h3>
<p>è™½ç„¶å†…å­˜å­˜å‚¨ç®€å•æ˜“ç”¨ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé¢å¯¹æµ·é‡ç”¨æˆ·å’Œé•¿æœŸå¯¹è¯ï¼Œæˆ‘ä»¬éœ€è¦æ›´é«˜æ•ˆçš„ç­–ç•¥ï¼š</p>
<ol>
<li><strong>æ»‘åŠ¨çª—å£è®°å¿†</strong>ï¼šåªä¿ç•™æœ€è¿‘ N è½®å¯¹è¯ã€‚</li>
<li><strong>æ‘˜è¦å‹ç¼©</strong>ï¼šå®šæœŸå°†å†å²å¯¹è¯æ€»ç»“æˆä¸€æ®µæ‘˜è¦ï¼Œæ›¿ä»£åŸå§‹è®°å½•ã€‚</li>
<li><strong>å‘é‡æ•°æ®åº“ + è¯­ä¹‰æ£€ç´¢</strong>ï¼šå°†å…³é”®ä¿¡æ¯å­˜å…¥å‘é‡åº“ï¼ŒæŒ‰éœ€æ£€ç´¢ç›¸å…³ä¸Šä¸‹æ–‡ï¼ˆé€‚ç”¨äºçŸ¥è¯†å¯†é›†å‹å¯¹è¯ï¼‰ã€‚</li>
<li><strong>æ··åˆè®°å¿†</strong>ï¼šç»“åˆçŸ­æœŸï¼ˆæœ€è¿‘å‡ è½®ï¼‰+ é•¿æœŸï¼ˆæ‘˜è¦/æ•°æ®åº“ï¼‰è®°å¿†ã€‚</li>
</ol>
<p>LangChain å·²æ”¯æŒå¤šç§ Memory ç±»å‹ï¼Œå¦‚ <code>BufferWindowMemory</code>ã€<code>SummaryMemory</code>ã€<code>VectorStoreRetrieverMemory</code> ç­‰ï¼Œå¯æ ¹æ®åœºæ™¯çµæ´»é€‰æ‹©ã€‚</p>
<hr/>
<h3 data-id="heading-8">äº”ã€ç»“è¯­</h3>
<p>è®© LLM æ‹¥æœ‰â€œè®°å¿†â€ï¼Œæœ¬è´¨ä¸Šæ˜¯<strong>å°†æ— çŠ¶æ€çš„æ¨¡å‹è°ƒç”¨è½¬åŒ–ä¸ºæœ‰çŠ¶æ€çš„ä¼šè¯ç³»ç»Ÿ</strong>ã€‚é€šè¿‡ç»´æŠ¤å¯¹è¯å†å²å¹¶åˆç†æ§åˆ¶ä¸Šä¸‹æ–‡é•¿åº¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆæœ¬ä¸ä½“éªŒä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p>
<p>LangChain ç­‰æ¡†æ¶æå¤§ç®€åŒ–äº†è¿™ä¸€è¿‡ç¨‹ï¼Œä½¿å¼€å‘è€…èƒ½ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œéåº•å±‚çŠ¶æ€ç®¡ç†ã€‚æœªæ¥ï¼Œéšç€ä¸Šä¸‹æ–‡çª—å£çš„æ‰©å¤§å’Œè®°å¿†æœºåˆ¶çš„æ™ºèƒ½åŒ–ï¼ˆå¦‚è‡ªåŠ¨é—å¿˜ã€é‡ç‚¹è®°å¿†ï¼‰ï¼ŒAI åŠ©æ‰‹å°†è¶Šæ¥è¶Šåƒä¸€ä¸ªçœŸæ­£â€œè®°å¾—ä½ â€çš„æœ‹å‹ã€‚</p>
<blockquote>
<p>æ­£å¦‚æˆ‘ä»¬åœ¨ä»£ç ä¸­çœ‹åˆ°çš„é‚£æ ·â€”â€”å½“æ¨¡å‹è¯´å‡ºâ€œä½ å«ç‹æºâ€æ—¶ï¼Œé‚£ä¸€åˆ»ï¼Œå®ƒä»¿ä½›çœŸçš„è®°ä½äº†ä½ ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•°æ®ä¸­å¿ƒè™šæ‹ŸåŒ–ä¹‹KVMè™šæ‹ŸåŒ–åŸºæœ¬éƒ¨ç½²è§†é¢‘è¯¾ç¨‹]]></title>    <link>https://juejin.cn/post/7588002126258241542</link>    <guid>https://juejin.cn/post/7588002126258241542</guid>    <pubDate>2025-12-26T10:11:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588002126258241542" data-draft-id="7587998744294572038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•°æ®ä¸­å¿ƒè™šæ‹ŸåŒ–ä¹‹KVMè™šæ‹ŸåŒ–åŸºæœ¬éƒ¨ç½²è§†é¢‘è¯¾ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T10:11:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·72942943223"/> <meta itemprop="url" content="https://juejin.cn/user/1998245912903995"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•°æ®ä¸­å¿ƒè™šæ‹ŸåŒ–ä¹‹KVMè™šæ‹ŸåŒ–åŸºæœ¬éƒ¨ç½²è§†é¢‘è¯¾ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1998245912903995/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·72942943223
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:11:37.000Z" title="Fri Dec 26 2025 10:11:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å½“ä»Šäº‘è®¡ç®—ä¸è™šæ‹ŸåŒ–æŠ€æœ¯æ·±åº¦èåˆçš„æ•°æ®ä¸­å¿ƒç¯å¢ƒä¸­ï¼ŒKVMï¼ˆKernel-based Virtual Machineï¼‰å‡­å€Ÿå…¶é«˜æ€§èƒ½ã€ä½å¼€é”€ä»¥åŠå¼€æºç”Ÿæ€çš„ä¼˜åŠ¿ï¼Œæˆä¸ºäº†æ„å»ºä¼ä¸šçº§ç§æœ‰äº‘å’Œè™šæ‹ŸåŒ–å¹³å°çš„åŸºçŸ³ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»åŸºäº Linux ç¯å¢ƒçš„ KVM æ ¸å¿ƒç»„ä»¶å®‰è£…æµç¨‹ï¼Œå¹¶é‡ç‚¹é˜è¿°æ•°æ®ä¸­å¿ƒçº§ç½‘ç»œé…ç½®çš„å…³é”®æ­¥éª¤ï¼ŒåŒ…å«å®æˆ˜ä»£ç ä¸é…ç½®ç¤ºä¾‹ã€‚<strong>å­¦ä¹ åœ°å€ï¼špan.baidu.com/s/1WwerIZ_elz_FyPKqXAiZCA?pwd=waug</strong></p>
<h2 data-id="heading-0">ä¸€ã€ ç¯å¢ƒå‡†å¤‡ä¸æ ¸å¿ƒç»„ä»¶å®‰è£…</h2>
<p>KVM æ˜¯ä½œä¸º Linux å†…æ ¸çš„ä¸€ä¸ªæ¨¡å—å­˜åœ¨çš„ï¼Œå› æ­¤é¦–å…ˆéœ€è¦ç¡®ä¿ç¡¬ä»¶æ”¯æŒè™šæ‹ŸåŒ–ï¼ˆIntel VT-x æˆ– AMD-Vï¼‰ã€‚åœ¨ CentOS/RHEL æˆ– Ubuntu ç­‰ Linux å‘è¡Œç‰ˆä¸Šï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… KVM å†…æ ¸æ¨¡å—ã€QEMUï¼ˆç¡¬ä»¶æ¨¡æ‹Ÿå™¨ï¼‰ä»¥åŠ Libvirtï¼ˆè™šæ‹ŸåŒ–ç®¡ç† APIï¼‰å’Œ Virt-Managerï¼ˆç®¡ç†å·¥å…·ï¼‰ã€‚</p>
<h3 data-id="heading-1">1. ç¡¬ä»¶æ£€æµ‹</h3>
<p>åœ¨å®‰è£…å‰ï¼ŒåŠ¡å¿…æ£€æŸ¥ CPU æ˜¯å¦å¼€å¯äº†è™šæ‹ŸåŒ–æ”¯æŒï¼š</p>
<p>bash</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ CPU æ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–</span>
<span class="hljs-comment"># è¾“å‡ºä¸­åŒ…å« vmx (Intel) æˆ– svm (AMD) å³è¡¨ç¤ºæ”¯æŒ</span>
lscpu | grep Virtualization

<span class="hljs-comment"># æˆ–è€…ä½¿ç”¨</span>
egrep -c <span class="hljs-string">'(vmx|svm)'</span> /proc/cpuinfo
</code></pre>
<h3 data-id="heading-2">2. å®‰è£…æ ¸å¿ƒç»„ä»¶</h3>
<p>ä»¥ CentOS 8/Stream æˆ– RHEL ç³»åˆ—ä¸ºä¾‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…è™šæ‹ŸåŒ–æ ˆï¼š</p>
<p>bash</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… KVMã€QEMUã€Libvirt åŠç®¡ç†å·¥å…·</span>
yum install -y qemu-kvm libvirt virt-install virt-manager libvirt-python python3-virtinst bridge-utils virt-viewer

<span class="hljs-comment"># å¯åŠ¨å¹¶è®¾ç½® Libvirtd å¼€æœºè‡ªå¯</span>
systemctl <span class="hljs-built_in">enable</span> --now libvirtd

<span class="hljs-comment"># æ£€æŸ¥ KVM æ¨¡å—æ˜¯å¦åŠ è½½æˆåŠŸ</span>
lsmod | grep kvm
<span class="hljs-comment"># é¢„æœŸè¾“å‡ºï¼š</span>
<span class="hljs-comment"># kvm_intel             188688  0 </span>
<span class="hljs-comment"># kvm                   636965  1 kvm_intel</span>
</code></pre>
<h2 data-id="heading-3">äºŒã€ ç½‘ç»œé…ç½®æŒ‡å—ï¼šLinux Bridge vs OVS</h2>
<p>åœ¨æ•°æ®ä¸­å¿ƒéƒ¨ç½²ä¸­ï¼Œç½‘ç»œé…ç½®ç›´æ¥å†³å®šäº†è™šæ‹Ÿæœºçš„ I/O æ€§èƒ½å’Œå¯ç”¨æ€§ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒLibvirt ä¼šåˆ›å»ºä¸€ä¸ªåä¸ºÂ <code>virbr0</code>Â çš„ NAT ç½‘ç»œç”¨äºæµ‹è¯•ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦é…ç½®<strong>æ¡¥æ¥ç½‘ç»œ</strong>Â æˆ–Â <strong>Open vSwitch (OVS)</strong> ï¼Œä»¥ä½¿è™šæ‹Ÿæœºåƒç‰©ç†æœºä¸€æ ·ç›´æ¥æ¥å…¥æ•°æ®ä¸­å¿ƒç½‘ç»œã€‚</p>
<p>æœ¬æ–‡ä»¥æœ€é€šç”¨çš„Â <strong>Linux Bridge (ç½‘æ¡¥)</strong> Â æ¨¡å¼ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•å°†ç‰©ç†ç½‘å¡ç»‘å®šåˆ°ç½‘æ¡¥ï¼Œä¾›è™šæ‹Ÿæœºä½¿ç”¨ã€‚</p>
<h3 data-id="heading-4">1. é…ç½®ç½‘æ¡¥æ¨¡å¼</h3>
<p>å‡è®¾å®¿ä¸»æœºçš„ç‰©ç†ç½‘å¡åç§°ä¸ºÂ <code>eth0</code>ï¼ŒIP åœ°å€ä¸ºÂ <code>192.168.1.10</code>ã€‚æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç½‘æ¡¥Â <code>br0</code>ï¼Œå°†Â <code>eth0</code>Â çš„ IP è½¬ç§»åˆ°Â <code>br0</code>Â ä¸Šï¼Œå¹¶å°†ç‰©ç†ç½‘å¡æ¡¥æ¥è¿›æ¥ã€‚</p>
<p><strong>é€šè¿‡ NetworkManager (nmcli) é…ç½®ï¼ˆæ¨èï¼‰ï¼š</strong></p>
<p>bash</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. æŸ¥çœ‹å½“å‰è¿æ¥</span>
nmcli con show

<span class="hljs-comment"># 2. åˆ›å»ºä¸€ä¸ªæ–°çš„ç½‘æ¡¥è¿æ¥ "br0"</span>
nmcli con add <span class="hljs-built_in">type</span> bridge ifname br0 con-name br0

<span class="hljs-comment"># 3. è®¾ç½®ç½‘æ¡¥çš„ IP åœ°å€ã€ç½‘å…³å’Œ DNS</span>
nmcli con modify br0 ipv4.addresses <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.10</span>/<span class="hljs-number">24</span> ipv4.gateway <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span> ipv4.dns <span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span> ipv4.method manual

<span class="hljs-comment"># 4. å°†ç‰©ç†ç½‘å¡ï¼ˆå¦‚ eth0ï¼‰æ·»åŠ ä¸ºç½‘æ¡¥çš„ä»å±è®¾å¤‡</span>
<span class="hljs-comment"># æ³¨æ„ï¼šè¿™é‡Œçš„ "System eth0" æ˜¯ä½ é€šè¿‡ nmcli con show æŸ¥çœ‹åˆ°çš„ç‰©ç†ç½‘å¡è¿æ¥åç§°</span>
nmcli con add <span class="hljs-built_in">type</span> ethernet slave-<span class="hljs-built_in">type</span> bridge con-name br0-port ifname eth0 master br0

<span class="hljs-comment"># 5. é‡å¯ç½‘ç»œæœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ</span>
nmcli con up br0
</code></pre>
<h3 data-id="heading-5">2. å®šä¹‰ Libvirt è™šæ‹Ÿç½‘ç»œ</h3>
<p>è™½ç„¶æˆ‘ä»¬é…ç½®äº†å®¿ä¸»æœºç½‘æ¡¥ï¼Œä½†ä¸ºäº†è®© Libvirt èƒ½å¤Ÿç®¡ç†å®ƒï¼Œå»ºè®®å®šä¹‰ä¸€ä¸ªå¯¹åº”çš„ç½‘ç»œé…ç½® XMLï¼ˆå¯é€‰ï¼Œäº¦å¯åœ¨åˆ›å»ºè™šæ‹Ÿæœºæ—¶ç›´æ¥æŒ‡å®šÂ <code>--network bridge=br0</code>ï¼‰ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªåä¸ºÂ <code>br0-net.xml</code>Â çš„æ–‡ä»¶</p>
<p>é€šè¿‡ virsh å®šä¹‰å¹¶å¯åŠ¨è¯¥ç½‘ç»œï¼š</p>
<p>bash</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®šä¹‰ç½‘ç»œ</span>
virsh net-define br0-net.xml

<span class="hljs-comment"># å¯åŠ¨ç½‘ç»œå¹¶è®¾ç½®å¼€æœºè‡ªå¯</span>
virsh net-start host-bridge
virsh net-autostart host-bridge
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€ è™šæ‹Ÿæœºéƒ¨ç½²å®æˆ˜</h2>
<p>å®Œæˆç¯å¢ƒä¸ç½‘ç»œé…ç½®åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Â <code>virt-install</code>Â å‘½ä»¤è¡Œå·¥å…·åˆ›å»ºä¸€å°è™šæ‹Ÿæœºã€‚è¿™æ˜¯æ•°æ®ä¸­å¿ƒè‡ªåŠ¨åŒ–è¿ç»´çš„æ ¸å¿ƒæ­¥éª¤ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªéƒ¨ç½² CentOS 7 è™šæ‹Ÿæœºçš„å‘½ä»¤ç¤ºä¾‹ï¼š</p>
<p>bash</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-css" lang="css">virt-install \
  <span class="hljs-attr">--name</span> centos7-srv-<span class="hljs-number">01</span> \
  <span class="hljs-attr">--memory</span> <span class="hljs-number">4096</span> \
  <span class="hljs-attr">--vcpus</span> <span class="hljs-number">2</span> \
  <span class="hljs-attr">--disk</span> path=/<span class="hljs-selector-tag">var</span>/lib/libvirt/images/centos7<span class="hljs-selector-class">.qcow2</span>,size=<span class="hljs-number">20</span>,format=qcow2,bus=virtio \
  <span class="hljs-attr">--network</span> bridge=br0,model=virtio \
  <span class="hljs-attr">--graphics</span> vnc,listen=<span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span> \
  <span class="hljs-attr">--noautoconsole</span> \
  <span class="hljs-attr">--os-variant</span> centos7.<span class="hljs-number">0</span> \
  <span class="hljs-attr">--location</span> /tmp/CentOS-<span class="hljs-number">7</span>-x86_64-Minimal-<span class="hljs-number">2009</span><span class="hljs-selector-class">.iso</span> \
  <span class="hljs-attr">--extra-args</span> 'console=ttyS0,<span class="hljs-number">115200</span>n8 serial'
</code></pre>
<p><strong>å‚æ•°è§£æï¼š</strong></p>
<ul>
<li><code>--disk</code>: æŒ‡å®šç£ç›˜é•œåƒè·¯å¾„ã€å¤§å°ï¼ˆ20Gï¼‰ã€æ ¼å¼åŠæ€»çº¿ç±»å‹ã€‚<code>virtio</code>Â æ€»çº¿èƒ½æ˜¾è‘—æå‡ç£ç›˜ I/O æ€§èƒ½ã€‚</li>
<li><code>--network bridge=br0</code>: æŒ‡å®šä½¿ç”¨æˆ‘ä»¬åˆšæ‰é…ç½®çš„Â <code>br0</code>Â ç½‘æ¡¥ï¼Œ<code>model=virtio</code>Â å¯ç”¨åŠè™šæ‹ŸåŒ–ç½‘å¡é©±åŠ¨ï¼Œå¤§å¹…é™ä½ç½‘ç»œå»¶è¿Ÿã€‚</li>
<li><code>--graphics vnc</code>: å…è®¸é€šè¿‡ VNC å®¢æˆ·ç«¯è¿œç¨‹è¿æ¥å®‰è£…ç•Œé¢ã€‚</li>
</ul>
<h2 data-id="heading-7">å››ã€ æ€§èƒ½è°ƒä¼˜ä¸éªŒè¯</h2>
<p>éƒ¨ç½²å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦éªŒè¯è™šæ‹Ÿæœºçš„ç½‘ç»œçŠ¶æ€å¹¶è¿›è¡Œç®€å•çš„æ€§èƒ½è°ƒä¼˜ã€‚</p>
<ol>
<li><strong>æ£€æŸ¥è™šæ‹ŸæœºçŠ¶æ€ï¼š</strong></li>
</ol>
<p>bash</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-css" lang="css">    virsh list <span class="hljs-attr">--all</span>
</code></pre>
<ol start="2">
<li><strong>éªŒè¯è™šæ‹Ÿæœºå†…éƒ¨ç½‘ç»œï¼š</strong><br/>
ç™»å½•è™šæ‹Ÿæœºåï¼Œä½¿ç”¨Â <code>ip addr</code>Â åº”å½“èƒ½çœ‹åˆ°ä» DHCP è·å–åˆ°çš„ä¸å®¿ä¸»æœºåŒç½‘æ®µçš„ IP åœ°å€ï¼Œä¸”èƒ½ Ping é€šç½‘å…³ã€‚</li>
<li><strong>å¼€å¯åµŒå¥—è™šæ‹ŸåŒ–ï¼ˆå¦‚éœ€è¦ï¼‰ï¼š</strong><br/>
å¦‚æœåœ¨è™šæ‹Ÿæœºå†…è¿˜éœ€è¦è¿è¡Œ KVMï¼Œéœ€åœ¨å®¿ä¸»æœºå¼€å¯åµŒå¥—è™šæ‹ŸåŒ–æ”¯æŒï¼š</li>
</ol>
<p>bash</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-bash" lang="bash">    <span class="hljs-comment"># ä¸´æ—¶å¼€å¯</span>
    modprobe kvm_intel nested=1
    
    <span class="hljs-comment"># æ°¸ä¹…å¼€å¯ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"options kvm-intel nested=1"</span> &gt; /etc/modprobe.d/kvm-intel.conf
</code></pre>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>æ•°æ®ä¸­å¿ƒçš„ KVM è™šæ‹ŸåŒ–éƒ¨ç½²ä¸ä»…ä»…æ˜¯ç®€å•çš„è½¯ä»¶å®‰è£…ï¼Œæ›´æ˜¯å¯¹åº•å±‚ I/O å’Œç½‘ç»œé€šè·¯çš„ç²¾ç»†è§„åˆ’ã€‚é€šè¿‡æ­£ç¡®é…ç½® Linux Bridge ç½‘æ¡¥å’Œä½¿ç”¨ Virtio é©±åŠ¨ï¼Œå¯ä»¥æœ€å¤§ç¨‹åº¦åœ°å‡å°‘è™šæ‹ŸåŒ–æŸè€—ï¼Œä½¿è™šæ‹Ÿæœºæ€§èƒ½æ— é™é€¼è¿‘ç‰©ç†æœºã€‚æŒæ¡ä¸Šè¿°æ ¸å¿ƒç»„ä»¶å®‰è£…ä¸ç½‘ç»œé…ç½®ä»£ç ï¼Œå°†ä¸ºä½ æ„å»ºç¨³å®šã€é«˜æ•ˆçš„ç§æœ‰äº‘å¹³å°æ‰“ä¸‹åšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uni-appå®æˆ˜åœ¨çº¿æ•™è‚²ç±»appå¼€å‘]]></title>    <link>https://juejin.cn/post/7588002126258274310</link>    <guid>https://juejin.cn/post/7588002126258274310</guid>    <pubDate>2025-12-26T10:12:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588002126258274310" data-draft-id="7588001624904499219" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uni-appå®æˆ˜åœ¨çº¿æ•™è‚²ç±»appå¼€å‘"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T10:12:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·72942943223"/> <meta itemprop="url" content="https://juejin.cn/user/1998245912903995"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uni-appå®æˆ˜åœ¨çº¿æ•™è‚²ç±»appå¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1998245912903995/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·72942943223
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:12:49.000Z" title="Fri Dec 26 2025 10:12:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éšç€ç§»åŠ¨äº’è”ç½‘çš„æ·±å…¥å‘å±•ï¼Œåœ¨çº¿æ•™è‚² APP çš„éœ€æ±‚æ—¥ç›Šæ—ºç››ã€‚uni-app å‡­å€Ÿå…¶â€œä¸€å¥—ä»£ç ï¼Œå¤šç«¯å‘å¸ƒâ€çš„ä¼˜åŠ¿ï¼Œæˆä¸ºè®¸å¤šæ•™è‚²ç§‘æŠ€å…¬å¸å¿«é€Ÿè¿­ä»£äº§å“çš„é¦–é€‰æ¡†æ¶ã€‚ç„¶è€Œï¼Œåœ¨å¼€å‘æ¶‰åŠè§†é¢‘æµã€äº’åŠ¨ç™½æ¿ã€å³æ—¶é€šè®¯ï¼ˆIMï¼‰ç­‰å¤æ‚åŠŸèƒ½çš„åœ¨çº¿æ•™è‚²åº”ç”¨æ—¶ï¼Œå¼€å‘è€…å¾€å¾€ä¼šé‡åˆ°å„ç§æ£˜æ‰‹é—®é¢˜ã€‚<strong>å­¦ä¹ åœ°å€ï¼špan.baidu.com/s/1WwerIZ_elz_FyPKqXAiZCA?pwd=waug</strong></p>
<p>æœ¬æ–‡å°†ç»“åˆå®æˆ˜ç»éªŒï¼Œé’ˆå¯¹ uni-app å¼€å‘åœ¨çº¿æ•™è‚² APP è¿‡ç¨‹ä¸­å¸¸è§çš„å‡ ä¸ªç—›ç‚¹ï¼Œæä¾›å…·ä½“çš„æ’æŸ¥æ€è·¯ä¸è§£å†³æ–¹æ¡ˆï¼Œå¹¶é™„å¸¦å…³é”®ä»£ç ç¤ºä¾‹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ è‡ªå®šä¹‰å¯¼èˆªæ ä¸åˆ˜æµ·å±é€‚é…é—®é¢˜</h2>
<p>åœ¨çº¿æ•™è‚² APP çš„é¦–é¡µé€šå¸¸è®¾è®¡æ„Ÿå¾ˆå¼ºï¼Œç»å¸¸ä¼šä½¿ç”¨è‡ªå®šä¹‰å¯¼èˆªæ æ¥æ”¾ç½®æœç´¢æ¡†æˆ–è¯¾ç¨‹åˆ†ç±»å…¥å£ã€‚ä½†åœ¨ä¸åŒæœºå‹ï¼ˆå°¤å…¶æ˜¯ iPhone X ç³»åˆ—åŠå®‰å“å¼‚å½¢å±ï¼‰ä¸Šï¼Œææ˜“å‡ºç°å†…å®¹è¢«çŠ¶æ€æ é®æŒ¡çš„é—®é¢˜ã€‚</p>
<p><strong>é—®é¢˜æ’æŸ¥ï¼š</strong><br/>
é¦–å…ˆæ£€æŸ¥æ˜¯å¦åœ¨Â <code>pages.json</code>Â ä¸­å°†å¯¹åº”é¡µé¢çš„Â <code>navigationStyle</code>Â è®¾ç½®ä¸ºÂ <code>custom</code>ï¼ŒåŒæ—¶ç¡®è®¤æ˜¯å¦æ­£ç¡®è·å–äº†ç³»ç»Ÿèƒ¶å›ŠæŒ‰é’®çš„ä½ç½®ä¿¡æ¯ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong><br/>
åˆ©ç”¨ uni-app çš„Â <code>uni.getSystemInfoSync()</code>Â è·å–çŠ¶æ€æ é«˜åº¦ï¼ŒåŠ¨æ€è®¡ç®—å¯¼èˆªæ çš„é«˜åº¦ã€‚</p>
<p>javascript</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-ini" lang="ini">// åœ¨ App.vue æˆ–å…¨å±€ mixin ä¸­å°è£…è·å–å¯¼èˆªæ é«˜åº¦çš„æ–¹æ³•
export default {
  onLaunch() {
    this.setGlobalNavBar()<span class="hljs-comment">;</span>
  },
  methods: {
    setGlobalNavBar() {
      const <span class="hljs-attr">systemInfo</span> = uni.getSystemInfoSync()<span class="hljs-comment">;</span>
      // è·å–çŠ¶æ€æ é«˜åº¦
      const <span class="hljs-attr">statusBarHeight</span> = systemInfo.statusBarHeight<span class="hljs-comment">;</span>
      // è·å–èƒ¶å›ŠæŒ‰é’®ä½ç½®ä¿¡æ¯ (æ³¨æ„ï¼šä»…åœ¨å¾®ä¿¡å°ç¨‹åºç­‰å¹³å°æœ‰æ•ˆï¼ŒAppç«¯éœ€å·®å¼‚åŒ–å¤„ç†)
      let <span class="hljs-attr">menuButtonInfo</span> = {}<span class="hljs-comment">;</span>
      // <span class="hljs-comment">#ifdef MP-WEIXIN</span>
      <span class="hljs-attr">menuButtonInfo</span> = uni.getMenuButtonBoundingClientRect()<span class="hljs-comment">;</span>
      // <span class="hljs-comment">#endif</span>
      
      // è®¡ç®—å¯¼èˆªæ æ€»é«˜åº¦ = (èƒ¶å›Šåº•éƒ¨ä½ç½® - çŠ¶æ€æ é«˜åº¦) + (çŠ¶æ€æ é«˜åº¦ * 2)
      // è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œé€šå¸¸è®¾ç½®ä¸º çŠ¶æ€æ é«˜åº¦ + 44px (æ ‡å‡†å¯¼èˆªæ é«˜åº¦)
      const <span class="hljs-attr">navBarHeight</span> = statusBarHeight + <span class="hljs-number">44</span><span class="hljs-comment">;</span>
      
      // å­˜å…¥ globalData æˆ– Vuex ä¾›å…¨å±€ä½¿ç”¨
      getApp().<span class="hljs-attr">globalData.navBarHeight</span> = navBarHeight<span class="hljs-comment">;</span>
      getApp().<span class="hljs-attr">globalData.statusBarHeight</span> = statusBarHeight<span class="hljs-comment">;</span>
    }
  }
}
</code></pre>
<p><strong>CSS æ ·å¼å¤„ç†ï¼š</strong></p>
<p>css</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŠ¨æ€ç»‘å®šæ ·å¼ */</span>
<span class="hljs-selector-class">.custom-navbar</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--nav-bar-height); <span class="hljs-comment">/* JS åŠ¨æ€èµ‹å€¼ */</span>
  <span class="hljs-attribute">padding-top</span>: <span class="hljs-built_in">var</span>(--status-bar-height);
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
}
</code></pre>
<h2 data-id="heading-1">äºŒã€ è§†é¢‘æ’­æ”¾å™¨å†…å­˜æ³„æ¼ä¸å…¨å±æ§åˆ¶</h2>
<p>åœ¨çº¿æ•™è‚² APP çš„æ ¸å¿ƒæ˜¯è§†é¢‘è¯¾ç¨‹ã€‚å¼€å‘è€…å¸¸åé¦ˆåœ¨é•¿æ—¶é—´è§‚çœ‹æˆ–é¢‘ç¹è¿›å‡ºè§†é¢‘æ’­æ”¾é¡µæ—¶ï¼ŒAPP å‡ºç°å¡é¡¿ç”šè‡³é—ªé€€ã€‚</p>
<p><strong>é—®é¢˜æ’æŸ¥ï¼š</strong><br/>
è¿™é€šå¸¸æ˜¯å› ä¸ºè§†é¢‘ç»„ä»¶æ²¡æœ‰åœ¨é¡µé¢é”€æ¯æ—¶åŠæ—¶é‡Šæ”¾èµ„æºï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚æ­¤å¤–ï¼ŒH5 ç«¯å’Œ App ç«¯è§†é¢‘å±‚çº§é—®é¢˜ä¹Ÿä¼šå¯¼è‡´å…¨å±æ§åˆ¶å¤±æ•ˆã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>åœ¨Â <code>onUnload</code>Â ç”Ÿå‘½å‘¨æœŸä¸­åœæ­¢æ’­æ”¾å¹¶é”€æ¯å®ä¾‹ã€‚</li>
<li>ä½¿ç”¨Â <code>cover-view</code>Â ç»„ä»¶è¦†ç›–åœ¨è§†é¢‘ä¹‹ä¸Šï¼Œå®ç°è‡ªå®šä¹‰çš„å¼¹å¹•æˆ–æ§åˆ¶æ ã€‚</li>
</ol>
<p>javascript</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">video</span> 
      <span class="hljs-attr">id</span>=<span class="hljs-string">"myVideo"</span> 
      <span class="hljs-attr">:src</span>=<span class="hljs-string">"videoUrl"</span> 
      @<span class="hljs-attr">error</span>=<span class="hljs-string">"videoErrorCallback"</span>
      <span class="hljs-attr">controls</span>
    &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">videoUrl</span>: <span class="hljs-string">'https://example.com/course.mp4'</span> ,
      <span class="hljs-attr">videoContext</span>: <span class="hljs-literal">null</span>
    };
  },
  <span class="hljs-title function_">onReady</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»º video ä¸Šä¸‹æ–‡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">videoContext</span> = uni.<span class="hljs-title function_">createVideoContext</span>(<span class="hljs-string">'myVideo'</span>, <span class="hljs-variable language_">this</span>);
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">videoErrorCallback</span>(<span class="hljs-params">e</span>) {
      uni.<span class="hljs-title function_">showModal</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">'æç¤º'</span>,
        <span class="hljs-attr">content</span>: <span class="hljs-string">'è§†é¢‘åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ'</span>,
        <span class="hljs-attr">showCancel</span>: <span class="hljs-literal">false</span>
      });
    }
  },
  <span class="hljs-title function_">onUnload</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å…³é”®æ­¥éª¤ï¼šé¡µé¢å¸è½½æ—¶æš‚åœæ’­æ”¾ï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">videoContext</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">videoContext</span>.<span class="hljs-title function_">pause</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">videoContext</span>.<span class="hljs-title function_">stop</span>(); <span class="hljs-comment">// æŸäº›ç«¯å»ºè®®è°ƒç”¨ stop</span>
    }
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€ å¤§æ–‡ä»¶ä¸Šä¼ ä¸­æ–­ä¸æ–­ç‚¹ç»­ä¼ </h2>
<p>åœ¨æ•™è‚² APP ä¸­ï¼Œè€å¸ˆæˆ–å­¦ç”Ÿç»å¸¸éœ€è¦ä¸Šä¼ å‡ ç™¾å…†çš„æ•™å­¦è§†é¢‘æˆ–ä½œä¸šæ–‡æ¡£ã€‚å¼±ç½‘ç¯å¢ƒä¸‹ï¼Œä¸Šä¼ ææ˜“ä¸­æ–­ã€‚</p>
<p><strong>é—®é¢˜æ’æŸ¥ï¼š</strong><br/>
æ™®é€šçš„ä¸Šä¼ æ¥å£ä¸€æ—¦ç½‘ç»œæ³¢åŠ¨ï¼Œæ•´ä¸ªè¯·æ±‚å°±ä¼šå¤±è´¥ï¼Œç”¨æˆ·éœ€è¦é‡æ–°ç‚¹å‡»ä¸Šä¼ ï¼Œä½“éªŒæå·®ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong><br/>
é‡‡ç”¨åˆ†ç‰‡ä¸Šä¼ ç­–ç•¥ã€‚å°†å¤§æ–‡ä»¶åˆ‡åˆ†æˆå¤šä¸ªå°å—ï¼Œåˆ†åˆ«ä¸Šä¼ ï¼ŒæœåŠ¡ç«¯æ¥æ”¶ååˆå¹¶ã€‚uni-app ä¸­å¯ä»¥ä½¿ç”¨Â <code>uni.uploadFile</code>Â é…åˆå¾ªç¯é€»è¾‘å®ç°ã€‚</p>
<p>javascript</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€æ˜“åˆ†ç‰‡ä¸Šä¼ é€»è¾‘ç¤ºä¾‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">uploadLargeFile</span>(<span class="hljs-params">filePath</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CHUNK_SIZE</span> = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">2</span>; <span class="hljs-comment">// æ¯ç‰‡ 2MB</span>
  <span class="hljs-keyword">const</span> fileSize = (<span class="hljs-keyword">await</span> uni.<span class="hljs-title function_">getFileInfo</span>({ filePath })).<span class="hljs-property">size</span>;
  <span class="hljs-keyword">const</span> chunks = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(fileSize / <span class="hljs-variable constant_">CHUNK_SIZE</span>);
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; chunks; i++) {
    <span class="hljs-keyword">const</span> start = i * <span class="hljs-variable constant_">CHUNK_SIZE</span>;
    <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(start + <span class="hljs-variable constant_">CHUNK_SIZE</span>, fileSize);
    
    <span class="hljs-comment">// æ³¨æ„ï¼šuni.uploadFile æœ¬èº«ä¸ç›´æ¥æ”¯æŒ Range å‚æ•°ï¼Œ</span>
    <span class="hljs-comment">// å®é™…å¼€å‘ä¸­é€šå¸¸å€ŸåŠ© plus.io (Appç«¯) æˆ–åˆ‡ç‰‡æ–‡ä»¶é€»è¾‘ã€‚</span>
    <span class="hljs-comment">// è¿™é‡Œæ¼”ç¤ºè°ƒç”¨ä¸Šä¼ æ¥å£çš„å°è£…é€»è¾‘</span>
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
        uni.<span class="hljs-title function_">uploadFile</span>({
          <span class="hljs-attr">url</span>: <span class="hljs-string">'https://api.example.com/upload'</span> ,
          <span class="hljs-attr">filePath</span>: filePath, <span class="hljs-comment">// å®é™…éœ€å¤„ç†åˆ‡ç‰‡æ–‡ä»¶è·¯å¾„</span>
          <span class="hljs-attr">name</span>: <span class="hljs-string">'file'</span>,
          <span class="hljs-attr">formData</span>: {
            <span class="hljs-string">'chunkIndex'</span>: i,
            <span class="hljs-string">'totalChunks'</span>: chunks,
            <span class="hljs-string">'fileId'</span>: <span class="hljs-string">'unique_file_id'</span> <span class="hljs-comment">// ç”¨äºæœåŠ¡ç«¯è¯†åˆ«åˆå¹¶</span>
          },
          <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (res.<span class="hljs-property">statusCode</span> === <span class="hljs-number">200</span>) {
              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬ <span class="hljs-subst">${i}</span> ç‰‡ä¸Šä¼ æˆåŠŸ`</span>);
              <span class="hljs-title function_">resolve</span>();
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`ç¬¬ <span class="hljs-subst">${i}</span> ç‰‡ä¸Šä¼ å¤±è´¥`</span>));
            }
          },
          <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
            <span class="hljs-title function_">reject</span>(err);
          }
        });
      });
    } <span class="hljs-keyword">catch</span> (e) {
      uni.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">`ä¸Šä¼ ä¸­æ–­: <span class="hljs-subst">${e.message}</span>`</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span> });
      <span class="hljs-comment">// è®°å½•å½“å‰æ–­ç‚¹ iï¼Œä¸‹æ¬¡ä»æ­¤å¤„ç»§ç»­</span>
      <span class="hljs-keyword">break</span>; 
    }
  }
}
</code></pre>
<h2 data-id="heading-3">å››ã€ è·¨ç«¯æ¡ä»¶ç¼–è¯‘å¤„ç†å¹³å°å·®å¼‚</h2>
<p>åœ¨å¼€å‘ä½œä¸šæœ¬åŠŸèƒ½æ—¶ï¼Œå®‰å“ç«¯å’Œ iOS ç«¯çš„æ–‡ä»¶è·¯å¾„å¤„ç†æ–¹å¼ä¸åŒï¼Œæˆ–è€…æŸäº›æ’ä»¶ä»…åœ¨ APP ç«¯å¯ç”¨ï¼Œå¯¼è‡´ç¼–è¯‘æŠ¥é”™ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong><br/>
å……åˆ†ä½¿ç”¨ uni-app çš„æ¡ä»¶ç¼–è¯‘è¯­æ³•ï¼ˆ<code>#ifdef</code>ã€<code>#ifndef</code>ï¼‰æ¥éš”ç¦»å¹³å°ç‰¹æœ‰ä»£ç ã€‚</p>
<p>javascript</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">methods</span>: {
  <span class="hljs-title function_">openHomeworkFile</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// #ifdef APP-PLUS</span>
    <span class="hljs-comment">// APP ç«¯è°ƒç”¨åŸç”Ÿæ¨¡å—æ‰“å¼€æœ¬åœ°æ–‡æ¡£</span>
    plus.<span class="hljs-property">runtime</span>.<span class="hljs-title function_">openFile</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">filePath</span>);
    <span class="hljs-comment">// #endif</span>
    
    <span class="hljs-comment">// #ifdef H5</span>
    <span class="hljs-comment">// H5 ç«¯é€šå¸¸ä½¿ç”¨ window.open æˆ–ä¸‹è½½</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">filePath</span>, <span class="hljs-string">'_blank'</span>);
    <span class="hljs-comment">// #endif</span>
    
    <span class="hljs-comment">// #ifdef MP-WEIXIN</span>
    <span class="hljs-comment">// å¾®ä¿¡å°ç¨‹åºéœ€ä½¿ç”¨ wx.downloadFile æˆ– wx.openDocument</span>
    uni.<span class="hljs-title function_">downloadFile</span>({
      <span class="hljs-attr">url</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">filePath</span>,
      <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
        uni.<span class="hljs-title function_">openDocument</span>({
          <span class="hljs-attr">filePath</span>: res.<span class="hljs-property">tempFilePath</span>,
          <span class="hljs-attr">showMenu</span>: <span class="hljs-literal">true</span>
        });
      }
    });
    <span class="hljs-comment">// #endif</span>
  }
}
</code></pre>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>uni-app æå¤§åœ°é™ä½äº†å¤šç«¯å¼€å‘çš„é—¨æ§›ï¼Œä½†åœ¨åœ¨çº¿æ•™è‚²è¿™ç±»é«˜äº¤äº’ã€é«˜è´Ÿè½½çš„åœºæ™¯ä¸‹ï¼Œå¼€å‘è€…ä»éœ€å¯¹æ€§èƒ½ä¼˜åŒ–ã€å†…å­˜ç®¡ç†ä»¥åŠå¹³å°å·®å¼‚æœ‰æ·±åˆ»çš„ç†è§£ã€‚é€šè¿‡ä¸Šè¿°çš„è‡ªå®šä¹‰å¯¼èˆªæ é€‚é…ã€è§†é¢‘èµ„æºå›æ”¶ã€å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ åŠæ¡ä»¶ç¼–è¯‘ç­–ç•¥ï¼Œå¯ä»¥æœ‰æ•ˆè§„é¿å¤§éƒ¨åˆ†â€œå‘â€ï¼Œæ‰“é€ ä¸€æ¬¾æµç•…ã€ç¨³å®šçš„æ•™è‚²äº§å“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ComposeåŸç†ç®€æ˜“å®ç°]]></title>    <link>https://juejin.cn/post/7587965800272822298</link>    <guid>https://juejin.cn/post/7587965800272822298</guid>    <pubDate>2025-12-26T10:11:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965800272822298" data-draft-id="7588022226739822642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ComposeåŸç†ç®€æ˜“å®ç°"/> <meta itemprop="keywords" content="Composer,Android"/> <meta itemprop="datePublished" content="2025-12-26T10:11:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zjw_swun"/> <meta itemprop="url" content="https://juejin.cn/user/3614849960524279"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ComposeåŸç†ç®€æ˜“å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3614849960524279/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zjw_swun
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:11:31.000Z" title="Fri Dec 26 2025 10:11:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡ä»…æ¢ç©¶Google ComposeåŸç† ä¸åŒ…å«uiç»˜åˆ¶å®ç°</p>
</blockquote>
<h2 data-id="heading-0">ComposeåŸç†</h2>
<p>å…ˆçœ‹as composeé¡¹ç›®æ¨¡æ¿ç”Ÿæˆçš„åŸºç¡€demo</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContent {
            MyApplicationTheme {
                Scaffold(modifier = Modifier.fillMaxSize()) { innerPadding -&gt;
                    Greeting(
                        name = <span class="hljs-string">"Android"</span>,
                        modifier = Modifier.padding(innerPadding)
                    )
                }
            }
        }
        
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">Greeting</span><span class="hljs-params">(name: <span class="hljs-type">String</span>, modifier: <span class="hljs-type">Modifier</span> = Modifier)</span></span> {
    <span class="hljs-keyword">var</span> currentTime <span class="hljs-keyword">by</span> remember { mutableStateOf(System.currentTimeMillis()) }
    LaunchedEffect(<span class="hljs-built_in">Unit</span>) {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            currentTime = System.currentTimeMillis()
            delay(<span class="hljs-number">1000</span>)
            Log.e(<span class="hljs-string">"zjw"</span>, currentTime.hashCode().toString())
        }
    }
    <span class="hljs-keyword">val</span> timeFormat = remember { SimpleDateFormat(<span class="hljs-string">"HH:mm:ss"</span>, Locale.getDefault()) }
    <span class="hljs-keyword">val</span> timeStr = timeFormat.format(Date(currentTime))

    Text(
        text = <span class="hljs-string">"Hello <span class="hljs-variable">$name</span>! Current Time: <span class="hljs-variable">$timeStr</span>"</span>,
        modifier = modifier
    )
}
</code></pre>
<p>å¾ˆç®€å•çš„ä»£ç ä¸åšç»†ç©¶ï¼Œè¦æ¢ç©¶Composeé‡ç»„UIé€»è¾‘ï¼Œå…ˆä¸Šåç¼–è¯‘æ‰‹æ®µçœ‹çœ‹@Composable Greetingä¼šå˜æˆä»€ä¹ˆ
jadxå·¥å…·åç¼–è¯‘MainActivity</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0ca7b435c8244e18435e0f769583a60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemp3X3N3dW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348691&amp;x-signature=%2FqiP5RsIiB6%2BAakWMF6Mj0AxugA%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb0fcbeff5104224aad8f31d21a7fbc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemp3X3N3dW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348691&amp;x-signature=WoCuxf%2BbwqRoyfJ5mfR3cU9%2FXZo%3D" alt="image.png" loading="lazy"/></p>
<p>setContentViewè®¾ç½®äº†ä¸€ä¸ªComposeView è¿™å°±æ˜¯Composeæ¥å…¥åˆ°android Viewç³»ç»Ÿçš„æ¡¥æ¢äº†ï¼ŒåŒæ—¶Composeæ¥å…¥</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6582898dbe6b430ba59ed0dcba63cba3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemp3X3N3dW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348691&amp;x-signature=0iU0pVrwrfIQQYxIkCQMAKABLac%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/020160e2e44443d9b46cc1503c1ad8bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemp3X3N3dW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348691&amp;x-signature=g1rXFNyCjeMlp5ufJ7wAiriyj8c%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bbdf8a6010e4b8b8d631c0565ef3361~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemp3X3N3dW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348691&amp;x-signature=FOyUuseHSvO9lI8qUVS4TeIP9WI%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œçœç•¥éƒ¨åˆ†è°ƒç”¨ç»†èŠ‚ï¼Œç®€å•æ¥è¯´å°±æ˜¯ComponentActivity setContentä¸å…‰ç»™android.R.id.contentæ·»åŠ äº†å­ComposeViewè¿˜æ·»åŠ ä¸€ä¸ªChoreographer.FrameCallbackå’Œrecomposeæœºåˆ¶ç»‘å®š</p>
<p>æ³¨æ„åˆ°æœ‰ä¸€ä¸ªlambda<code> ComponentActivityKt.setContent$default(this, null, ComposableSingletons$MainActivityKt.INSTANCE.m8049getLambda3$app_debug</code></p>
<p>jadxåŒå‡»è·³è½¬åˆ°è¿™ä¸ªlambdaæ–¹æ³•æ‰€åœ¨æºç ç»§ç»­çœ‹<code>ComposableSingletons$MainActivityKt</code></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComposableSingletons</span>$<span class="hljs-title">MainActivityKt</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-keyword">final</span> ComposableSingletons<span class="hljs-variable">$MainActivityKt</span> INSTANCE = <span class="hljs-keyword">new</span> ComposableSingletons<span class="hljs-variable">$MainActivityKt</span>();

    <span class="hljs-comment">/* renamed from: lambda-1  reason: not valid java name */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> Function3&lt;PaddingValues, Composer, Integer, Unit&gt; f79lambda1 = ComposableLambdaKt.<span class="hljs-title function_ invoke__">composableLambdaInstance</span>(<span class="hljs-number">1855199361</span>, <span class="hljs-literal">false</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function3</span>&lt;PaddingValues, Composer, Integer, Unit&gt;() { <span class="hljs-comment">// from class: com.zjw.compose.myapplication.ComposableSingletons$MainActivityKt$lambda-1$1</span>
        @Override <span class="hljs-comment">// kotlin.jvm.functions.Function3</span>
        <span class="hljs-keyword">public</span> <span class="hljs-comment">/* bridge */</span> <span class="hljs-comment">/* synthetic */</span> Unit <span class="hljs-title function_ invoke__">invoke</span>(PaddingValues paddingValues, Composer composer, Integer num) {
            <span class="hljs-title function_ invoke__">invoke</span>(paddingValues, composer, num.<span class="hljs-title function_ invoke__">intValue</span>());
            <span class="hljs-keyword">return</span> Unit.INSTANCE;
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_ invoke__">invoke</span>(PaddingValues innerPadding, Composer <span class="hljs-variable">$composer</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$changed</span>) {
            Intrinsics.<span class="hljs-title function_ invoke__">checkNotNullParameter</span>(innerPadding, <span class="hljs-string">"innerPadding"</span>);
            ComposerKt.<span class="hljs-title function_ invoke__">sourceInformation</span>(<span class="hljs-variable">$composer</span>, <span class="hljs-string">"C42@1665L139:MainActivity.kt#72esb0"</span>);
            <span class="hljs-keyword">int</span> <span class="hljs-variable">$dirty</span> = <span class="hljs-variable">$changed</span>;
            <span class="hljs-keyword">if</span> ((<span class="hljs-variable">$changed</span> &amp; <span class="hljs-number">6</span>) == <span class="hljs-number">0</span>) {
                <span class="hljs-variable">$dirty</span> |= <span class="hljs-variable">$composer</span>.<span class="hljs-title function_ invoke__">changed</span>(innerPadding) ? <span class="hljs-number">4</span> : <span class="hljs-number">2</span>;
            }
            <span class="hljs-keyword">if</span> ((<span class="hljs-variable">$dirty</span> &amp; <span class="hljs-number">19</span>) != <span class="hljs-number">18</span> || !<span class="hljs-variable">$composer</span>.<span class="hljs-title function_ invoke__">getSkipping</span>()) {
                <span class="hljs-keyword">if</span> (ComposerKt.<span class="hljs-title function_ invoke__">isTraceInProgress</span>()) {
                    ComposerKt.<span class="hljs-title function_ invoke__">traceEventStart</span>(<span class="hljs-number">1855199361</span>, <span class="hljs-variable">$dirty</span>, -<span class="hljs-number">1</span>, <span class="hljs-string">"com.zjw.compose.myapplication.ComposableSingletons<span class="hljs-subst">$MainActivityKt</span>.lambda-1.&lt;anonymous&gt; (MainActivity.kt:42)"</span>);
                }
                MainActivityKt.<span class="hljs-title function_ invoke__">Greeting</span>(<span class="hljs-string">"Android"</span>, PaddingKt.<span class="hljs-title function_ invoke__">padding</span>(Modifier.INSTANCE, innerPadding), <span class="hljs-variable">$composer</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>);
                <span class="hljs-keyword">if</span> (ComposerKt.<span class="hljs-title function_ invoke__">isTraceInProgress</span>()) {
                    ComposerKt.<span class="hljs-title function_ invoke__">traceEventEnd</span>();
                    <span class="hljs-keyword">return</span>;
                }
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-variable">$composer</span>.<span class="hljs-title function_ invoke__">skipToGroupEnd</span>();
        }
    });

    <span class="hljs-comment">/* renamed from: lambda-2  reason: not valid java name */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> Function2&lt;Composer, Integer, Unit&gt; f80lambda2 = ComposableLambdaKt.<span class="hljs-title function_ invoke__">composableLambdaInstance</span>(<span class="hljs-number">184410672</span>, <span class="hljs-literal">false</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function2</span>&lt;Composer, Integer, Unit&gt;() { <span class="hljs-comment">// from class: com.zjw.compose.myapplication.ComposableSingletons$MainActivityKt$lambda-2$1</span>
        @Override <span class="hljs-comment">// kotlin.jvm.functions.Function2</span>
        <span class="hljs-keyword">public</span> <span class="hljs-comment">/* bridge */</span> <span class="hljs-comment">/* synthetic */</span> Unit <span class="hljs-title function_ invoke__">invoke</span>(Composer composer, Integer num) {
            <span class="hljs-title function_ invoke__">invoke</span>(composer, num.<span class="hljs-title function_ invoke__">intValue</span>());
            <span class="hljs-keyword">return</span> Unit.INSTANCE;
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_ invoke__">invoke</span>(Composer <span class="hljs-variable">$composer</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$changed</span>) {
            ComposerKt.<span class="hljs-title function_ invoke__">sourceInformation</span>(<span class="hljs-variable">$composer</span>, <span class="hljs-string">"C41@1583L239:MainActivity.kt#72esb0"</span>);
            <span class="hljs-keyword">if</span> ((<span class="hljs-variable">$changed</span> &amp; <span class="hljs-number">3</span>) != <span class="hljs-number">2</span> || !<span class="hljs-variable">$composer</span>.<span class="hljs-title function_ invoke__">getSkipping</span>()) {
                <span class="hljs-keyword">if</span> (ComposerKt.<span class="hljs-title function_ invoke__">isTraceInProgress</span>()) {
                    ComposerKt.<span class="hljs-title function_ invoke__">traceEventStart</span>(<span class="hljs-number">184410672</span>, <span class="hljs-variable">$changed</span>, -<span class="hljs-number">1</span>, <span class="hljs-string">"com.zjw.compose.myapplication.ComposableSingletons<span class="hljs-subst">$MainActivityKt</span>.lambda-2.&lt;anonymous&gt; (MainActivity.kt:41)"</span>);
                }
                ScaffoldKt.<span class="hljs-title function_ invoke__">m2866ScaffoldTvnljyQ</span>(SizeKt.fillMaxSize<span class="hljs-variable">$default</span>(Modifier.INSTANCE, <span class="hljs-number">0.0</span>f, <span class="hljs-number">1</span>, <span class="hljs-literal">null</span>), <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>L, <span class="hljs-number">0</span>L, <span class="hljs-literal">null</span>, ComposableSingletons<span class="hljs-variable">$MainActivityKt</span>.INSTANCE.m8047getLambda1<span class="hljs-variable">$app_debug</span>(), <span class="hljs-variable">$composer</span>, <span class="hljs-number">805306374</span>, <span class="hljs-number">510</span>);
                <span class="hljs-keyword">if</span> (ComposerKt.<span class="hljs-title function_ invoke__">isTraceInProgress</span>()) {
                    ComposerKt.<span class="hljs-title function_ invoke__">traceEventEnd</span>();
                    <span class="hljs-keyword">return</span>;
                }
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-variable">$composer</span>.<span class="hljs-title function_ invoke__">skipToGroupEnd</span>();
        }
    });

    <span class="hljs-comment">/* renamed from: lambda-3  reason: not valid java name */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> Function2&lt;Composer, Integer, Unit&gt; f81lambda3 = ComposableLambdaKt.<span class="hljs-title function_ invoke__">composableLambdaInstance</span>(<span class="hljs-number">749891428</span>, <span class="hljs-literal">false</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function2</span>&lt;Composer, Integer, Unit&gt;() { <span class="hljs-comment">// from class: com.zjw.compose.myapplication.ComposableSingletons$MainActivityKt$lambda-3$1</span>
        @Override <span class="hljs-comment">// kotlin.jvm.functions.Function2</span>
        <span class="hljs-keyword">public</span> <span class="hljs-comment">/* bridge */</span> <span class="hljs-comment">/* synthetic */</span> Unit <span class="hljs-title function_ invoke__">invoke</span>(Composer composer, Integer num) {
            <span class="hljs-title function_ invoke__">invoke</span>(composer, num.<span class="hljs-title function_ invoke__">intValue</span>());
            <span class="hljs-keyword">return</span> Unit.INSTANCE;
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_ invoke__">invoke</span>(Composer <span class="hljs-variable">$composer</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$changed</span>) {
            ComposerKt.<span class="hljs-title function_ invoke__">sourceInformation</span>(<span class="hljs-variable">$composer</span>, <span class="hljs-string">"C40@1546L290:MainActivity.kt#72esb0"</span>);
            <span class="hljs-keyword">if</span> ((<span class="hljs-variable">$changed</span> &amp; <span class="hljs-number">3</span>) != <span class="hljs-number">2</span> || !<span class="hljs-variable">$composer</span>.<span class="hljs-title function_ invoke__">getSkipping</span>()) {
                <span class="hljs-keyword">if</span> (ComposerKt.<span class="hljs-title function_ invoke__">isTraceInProgress</span>()) {
                    ComposerKt.<span class="hljs-title function_ invoke__">traceEventStart</span>(<span class="hljs-number">749891428</span>, <span class="hljs-variable">$changed</span>, -<span class="hljs-number">1</span>, <span class="hljs-string">"com.zjw.compose.myapplication.ComposableSingletons<span class="hljs-subst">$MainActivityKt</span>.lambda-3.&lt;anonymous&gt; (MainActivity.kt:40)"</span>);
                }
                ThemeKt.<span class="hljs-title function_ invoke__">MyApplicationTheme</span>(<span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, ComposableSingletons<span class="hljs-variable">$MainActivityKt</span>.INSTANCE.m8048getLambda2<span class="hljs-variable">$app_debug</span>(), <span class="hljs-variable">$composer</span>, <span class="hljs-number">384</span>, <span class="hljs-number">3</span>);
                <span class="hljs-keyword">if</span> (ComposerKt.<span class="hljs-title function_ invoke__">isTraceInProgress</span>()) {
                    ComposerKt.<span class="hljs-title function_ invoke__">traceEventEnd</span>();
                    <span class="hljs-keyword">return</span>;
                }
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-variable">$composer</span>.<span class="hljs-title function_ invoke__">skipToGroupEnd</span>();
        }
    });

    <span class="hljs-comment">/* renamed from: lambda-4  reason: not valid java name */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> Function2&lt;Composer, Integer, Unit&gt; f82lambda4 = ComposableLambdaKt.<span class="hljs-title function_ invoke__">composableLambdaInstance</span>(<span class="hljs-number">1718125071</span>, <span class="hljs-literal">false</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function2</span>&lt;Composer, Integer, Unit&gt;() { <span class="hljs-comment">// from class: com.zjw.compose.myapplication.ComposableSingletons$MainActivityKt$lambda-4$1</span>
        @Override <span class="hljs-comment">// kotlin.jvm.functions.Function2</span>
        <span class="hljs-keyword">public</span> <span class="hljs-comment">/* bridge */</span> <span class="hljs-comment">/* synthetic */</span> Unit <span class="hljs-title function_ invoke__">invoke</span>(Composer composer, Integer num) {
            <span class="hljs-title function_ invoke__">invoke</span>(composer, num.<span class="hljs-title function_ invoke__">intValue</span>());
            <span class="hljs-keyword">return</span> Unit.INSTANCE;
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_ invoke__">invoke</span>(Composer <span class="hljs-variable">$composer</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$changed</span>) {
            ComposerKt.<span class="hljs-title function_ invoke__">sourceInformation</span>(<span class="hljs-variable">$composer</span>, <span class="hljs-string">"C132@3832L19:MainActivity.kt#72esb0"</span>);
            <span class="hljs-keyword">if</span> ((<span class="hljs-variable">$changed</span> &amp; <span class="hljs-number">3</span>) == <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-variable">$composer</span>.<span class="hljs-title function_ invoke__">getSkipping</span>()) {
                <span class="hljs-variable">$composer</span>.<span class="hljs-title function_ invoke__">skipToGroupEnd</span>();
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-keyword">if</span> (ComposerKt.<span class="hljs-title function_ invoke__">isTraceInProgress</span>()) {
                ComposerKt.<span class="hljs-title function_ invoke__">traceEventStart</span>(<span class="hljs-number">1718125071</span>, <span class="hljs-variable">$changed</span>, -<span class="hljs-number">1</span>, <span class="hljs-string">"com.zjw.compose.myapplication.ComposableSingletons<span class="hljs-subst">$MainActivityKt</span>.lambda-4.&lt;anonymous&gt; (MainActivity.kt:132)"</span>);
            }
            MainActivityKt.<span class="hljs-title function_ invoke__">Greeting</span>(<span class="hljs-string">"Android"</span>, <span class="hljs-literal">null</span>, <span class="hljs-variable">$composer</span>, <span class="hljs-number">6</span>, <span class="hljs-number">2</span>);
            <span class="hljs-keyword">if</span> (ComposerKt.<span class="hljs-title function_ invoke__">isTraceInProgress</span>()) {
                ComposerKt.<span class="hljs-title function_ invoke__">traceEventEnd</span>();
            }
        }
    });

    <span class="hljs-comment">/* renamed from: getLambda-1$app_debug  reason: not valid java name */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Function3&lt;PaddingValues, Composer, Integer, Unit&gt; m8047getLambda1<span class="hljs-variable">$app_debug</span>() {
        <span class="hljs-keyword">return</span> f79lambda1;
    }

    <span class="hljs-comment">/* renamed from: getLambda-2$app_debug  reason: not valid java name */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Function2&lt;Composer, Integer, Unit&gt; m8048getLambda2<span class="hljs-variable">$app_debug</span>() {
        <span class="hljs-keyword">return</span> f80lambda2;
    }

    <span class="hljs-comment">/* renamed from: getLambda-3$app_debug  reason: not valid java name */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Function2&lt;Composer, Integer, Unit&gt; m8049getLambda3<span class="hljs-variable">$app_debug</span>() {
        <span class="hljs-keyword">return</span> f81lambda3;
    }
}
</code></pre>
<p>å…¶å®ä¹Ÿå°±æ˜¯ComposableSingletons$MainActivityKtè¿™ä¸ªç±»ä¸‹é¢å‡ ä¸ªFunction2 xxxlambdaè°ƒç”¨ï¼Œå…ˆè¯´ç»“è®ºæ¯ä¸ª@Composeableæ–¹æ³•ç¼–è¯‘åå¯¹åº”ä¸€ä¸ªFunction2&lt;Composer, Integer, Unit&gt;ç±»å‹xxxlambda,</p>
<p>MainActivity è°ƒç”¨setContentçš„lambdaå‡½æ•° åç¼–è¯‘ComposableSingletons<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>a</mi><mi>i</mi><mi>n</mi><mi>A</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>i</mi><mi>t</mi><mi>y</mi><mi>K</mi><mi>t</mi><mi mathvariant="normal">.</mi><mi>I</mi><mi>N</mi><mi>S</mi><mi>T</mi><mi>A</mi><mi>N</mi><mi>C</mi><mi>E</mi><mi mathvariant="normal">.</mi><mi>m</mi><mn>8049</mn><mi>g</mi><mi>e</mi><mi>t</mi><mi>L</mi><mi>a</mi><mi>m</mi><mi>b</mi><mi>d</mi><mi>a</mi><mn>3</mn></mrow><annotation encoding="application/x-tex">MainActivityKt.INSTANCE.m8049getLambda3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">ain</span><span class="mord mathnormal">A</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.07153em;">yK</span><span class="mord mathnormal">t</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.13889em;">NST</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.05764em;">NCE</span><span class="mord">.</span><span class="mord mathnormal">m</span><span class="mord">8049</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal">L</span><span class="mord mathnormal">amb</span><span class="mord mathnormal">d</span><span class="mord mathnormal">a</span><span class="mord">3</span></span></span></span></span>app_debug å¯¹åº”ComposableSingletons<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>a</mi><mi>i</mi><mi>n</mi><mi>A</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>i</mi><mi>t</mi><mi>y</mi><mi>K</mi><mi>t</mi><mtext>ç±»</mtext><mn>81</mn><mi>l</mi><mi>a</mi><mi>m</mi><mi>b</mi><mi>d</mi><mi>a</mi><mn>3</mn><mo>âˆ’</mo><mo>&gt;</mo><mtext>è°ƒç”¨</mtext><mi>i</mi><mi>n</mi><mi>v</mi><mi>o</mi><mi>k</mi><mi>e</mi><mtext>æ–¹æ³•ä¸­çš„</mtext><mi>C</mi><mi>o</mi><mi>m</mi><mi>p</mi><mi>o</mi><mi>s</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>S</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mi>t</mi><mi>o</mi><mi>n</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">MainActivityKtç±» 81lambda3 -&gt; è°ƒç”¨invokeæ–¹æ³•ä¸­çš„
ComposableSingletons</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">ain</span><span class="mord mathnormal">A</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.07153em;">yK</span><span class="mord mathnormal">t</span><span class="mord cjk_fallback">ç±»</span><span class="mord">81</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">amb</span><span class="mord mathnormal">d</span><span class="mord mathnormal">a</span><span class="mord">3</span><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord cjk_fallback">è°ƒç”¨</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">æ–¹æ³•ä¸­çš„</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal">o</span><span class="mord mathnormal">m</span><span class="mord mathnormal">p</span><span class="mord mathnormal">os</span><span class="mord mathnormal">ab</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span></span></span></span></span>MainActivityKt.INSTANCE.m8048getLambda2$app_debug()å¯¹åº” f80lambda2è°ƒç”¨invoke ä¸å†ç»§ç»­</p>
<p>å…¶å®å¯¹åº”å°±æ˜¯composeçš„åµŒå¥—è°ƒç”¨è¿‡ç¨‹</p>
<pre><code class="hljs language-ini" lang="ini">setContent {  //f81lambda3
    MyApplicationTheme { //f80lambda2
        Scaffold(<span class="hljs-attr">modifier</span> = Modifier.fillMaxSize()) {//f79lambda1   innerPadding -&gt;
            Greeting(
                <span class="hljs-attr">name</span> = <span class="hljs-string">"Android"</span>,
                <span class="hljs-attr">modifier</span> = Modifier.padding(innerPadding)
            )
        }
    }
}
</code></pre>
<p>æ¥ä¸‹æ¥æ¥çœ‹ä¸€ä¸‹Greetingæ–¹æ³•ä¼šå˜æˆä»€ä¹ˆæ ·</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivityKt</span> {
    <span class="hljs-comment">/* JADX INFO: Access modifiers changed from: private */</span>
    <span class="hljs-keyword">public</span> static <span class="hljs-keyword">final</span> <span class="hljs-built_in">Unit</span> Greeting$lambda$<span class="hljs-number">5</span>(String str, Modifier modifier, int i, int i2, Composer composer, int i3) {
        Greeting(str, modifier, composer, RecomposeScopeImplKt.updateChangedFlags(i | <span class="hljs-number">1</span>), i2);
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Unit</span>.INSTANCE;
    }

    <span class="hljs-comment">/* JADX INFO: Access modifiers changed from: private */</span>
    <span class="hljs-keyword">public</span> static <span class="hljs-keyword">final</span> <span class="hljs-built_in">Unit</span> GreetingPreview$lambda$<span class="hljs-number">6</span>(int i, Composer composer, int i2) {
        GreetingPreview(composer, RecomposeScopeImplKt.updateChangedFlags(i | <span class="hljs-number">1</span>));
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Unit</span>.INSTANCE;
    }


    <span class="hljs-keyword">public</span> static <span class="hljs-keyword">final</span> void Greeting(<span class="hljs-keyword">final</span> String name, Modifier modifier, Composer $composer, <span class="hljs-keyword">final</span> int $changed, <span class="hljs-keyword">final</span> int i) {
        Object obj;
        int i2;
        int $dirty;
        <span class="hljs-keyword">final</span> Modifier modifier2;
        Intrinsics.checkNotNullParameter(name, <span class="hljs-string">"name"</span>);
        Composer $composer2 = $composer.startRestartGroup(-<span class="hljs-number">1745234003</span>);
        ComposerKt.sourceInformation($composer2, <span class="hljs-string">"C(Greeting)P(1)103@3008L55,104@3089L117,104@3068L138,110@3228L62,113@3351L93,119@3475L50,124@3688L11,118@3450L277:MainActivity.kt#72esb0"</span>);
        int $dirty2 = $changed;
        <span class="hljs-keyword">if</span> ((i &amp; <span class="hljs-number">1</span>) != <span class="hljs-number">0</span>) {
            $dirty2 |= <span class="hljs-number">6</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (($changed &amp; <span class="hljs-number">6</span>) == <span class="hljs-number">0</span>) {
            $dirty2 |= $composer2.changed(name) ? <span class="hljs-number">4</span> : <span class="hljs-number">2</span>;
        }
        int i3 = i &amp; <span class="hljs-number">2</span>;
        <span class="hljs-keyword">if</span> (i3 != <span class="hljs-number">0</span>) {
            $dirty2 |= <span class="hljs-number">48</span>;
            obj = modifier;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (($changed &amp; <span class="hljs-number">48</span>) == <span class="hljs-number">0</span>) {
            obj = modifier;
            $dirty2 |= $composer2.changed(obj) ? <span class="hljs-number">32</span> : <span class="hljs-number">16</span>;
        } <span class="hljs-keyword">else</span> {
            obj = modifier;
        }
        <span class="hljs-keyword">if</span> (($dirty2 &amp; <span class="hljs-number">19</span>) != <span class="hljs-number">18</span> || !$composer2.getSkipping()) {
            Modifier.Companion modifier3 = i3 != <span class="hljs-number">0</span> ? Modifier.INSTANCE : obj;
            <span class="hljs-keyword">if</span> (ComposerKt.isTraceInProgress()) {
                ComposerKt.traceEventStart(-<span class="hljs-number">1745234003</span>, $dirty2, -<span class="hljs-number">1</span>, <span class="hljs-string">"com.zjw.compose.myapplication.Greeting (MainActivity.kt:102)"</span>);
            }
            $composer2.startReplaceGroup(<span class="hljs-number">293979466</span>);
            ComposerKt.sourceInformation($composer2, <span class="hljs-string">"CC(remember):MainActivity.kt#9igjgp"</span>);
            Object rememberedValue = $composer2.rememberedValue();
            <span class="hljs-keyword">if</span> (rememberedValue == Composer.INSTANCE.getEmpty()) {
                i2 = <span class="hljs-number">0</span>;
                Object mutableStateOf$default = SnapshotStateKt.mutableStateOf$default(<span class="hljs-built_in">Long</span>.valueOf(System.currentTimeMillis()), <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>, <span class="hljs-literal">null</span>);
                $composer2.updateRememberedValue(mutableStateOf$default);
                rememberedValue = mutableStateOf$default;
            } <span class="hljs-keyword">else</span> {
                i2 = <span class="hljs-number">0</span>;
            }
            MutableState currentTime$delegate = (MutableState) rememberedValue;
            $composer2.endReplaceGroup();
            <span class="hljs-built_in">Unit</span> unit = <span class="hljs-built_in">Unit</span>.INSTANCE;
            $composer2.startReplaceGroup(<span class="hljs-number">293982120</span>);
            ComposerKt.sourceInformation($composer2, <span class="hljs-string">"CC(remember):MainActivity.kt#9igjgp"</span>);
            Object rememberedValue2 = $composer2.rememberedValue();
            <span class="hljs-keyword">if</span> (rememberedValue2 == Composer.INSTANCE.getEmpty()) {
                $dirty = $dirty2;
                Object obj2 = (Function2) new MainActivityKt$Greeting$<span class="hljs-number">1</span>$<span class="hljs-number">1</span>(currentTime$delegate, <span class="hljs-literal">null</span>);
                $composer2.updateRememberedValue(obj2);
                rememberedValue2 = obj2;
            } <span class="hljs-keyword">else</span> {
                $dirty = $dirty2;
            }
            $composer2.endReplaceGroup();
            EffectsKt.LaunchedEffect(unit, (Function2) rememberedValue2, $composer2, <span class="hljs-number">6</span>);
            $composer2.startReplaceGroup(<span class="hljs-number">293986513</span>);
            ComposerKt.sourceInformation($composer2, <span class="hljs-string">"CC(remember):MainActivity.kt#9igjgp"</span>);
            Object rememberedValue3 = $composer2.rememberedValue();
            <span class="hljs-keyword">if</span> (rememberedValue3 == Composer.INSTANCE.getEmpty()) {
                Object simpleDateFormat = new SimpleDateFormat(<span class="hljs-string">"HH:mm:ss"</span>, Locale.getDefault());
                $composer2.updateRememberedValue(simpleDateFormat);
                rememberedValue3 = simpleDateFormat;
            }
            SimpleDateFormat timeFormat = (SimpleDateFormat) rememberedValue3;
            $composer2.endReplaceGroup();
            String timeStr = timeFormat.format(new Date(Greeting$lambda$<span class="hljs-number">1</span>(currentTime$delegate)));
            TextKt.m3151Text4IGK_g(<span class="hljs-string">"Hello "</span> + name + <span class="hljs-string">"! Current Time: "</span> + timeStr, modifier3, <span class="hljs-number">0L</span>, <span class="hljs-number">0L</span>, (FontStyle) <span class="hljs-literal">null</span>, (FontWeight) <span class="hljs-literal">null</span>, (FontFamily) <span class="hljs-literal">null</span>, <span class="hljs-number">0L</span>, (TextDecoration) <span class="hljs-literal">null</span>, (TextAlign) <span class="hljs-literal">null</span>, <span class="hljs-number">0L</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, (Function1&lt;? <span class="hljs-keyword">super</span> TextLayoutResult, <span class="hljs-built_in">Unit</span>&gt;) <span class="hljs-literal">null</span>, (TextStyle) <span class="hljs-literal">null</span>, $composer2, $dirty &amp; <span class="hljs-number">112</span>, <span class="hljs-number">0</span>, <span class="hljs-number">131068</span>);
            modifier2 = modifier3;
            $composer2 = $composer2;
           
        ScopeUpdateScope endRestartGroup = $composer2.endRestartGroup();
        <span class="hljs-keyword">if</span> (endRestartGroup != <span class="hljs-literal">null</span>) {
            endRestartGroup.updateScope(new Function2() { <span class="hljs-comment">// from class: com.zjw.compose.myapplication.MainActivityKt$$ExternalSyntheticLambda1</span>
                <span class="hljs-meta">@Override</span> <span class="hljs-comment">// kotlin.jvm.functions.Function2</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Object invoke(Object obj3, Object obj4) {
                    <span class="hljs-built_in">Unit</span> Greeting$lambda$<span class="hljs-number">5</span>;
                    Greeting$lambda$<span class="hljs-number">5</span> = MainActivityKt.Greeting$lambda$<span class="hljs-number">5</span>(name, modifier2, $changed, i, (Composer) obj3, ((Integer) obj4).intValue());
                    <span class="hljs-keyword">return</span> Greeting$lambda$<span class="hljs-number">5</span>;
                }
            });
        }
    }
</code></pre>
<p><code>public static final void Greeting(final String name, Modifier modifier, Composer $composer, final int $changed, final int i) {</code></p>
<p>å…¶å®å¤§æ¦‚æ„æ€å°±æ˜¯ é€šè¿‡å…¥å‚<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>h</mi><mi>a</mi><mi>n</mi><mi>g</mi><mi>e</mi><mi>d</mi><mtext>ä¸ä½è¿ç®—ç»“åˆ</mtext></mrow><annotation encoding="application/x-tex">changedä¸ä½è¿ç®— ç»“åˆ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">c</span><span class="mord mathnormal">han</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord cjk_fallback">ä¸ä½è¿ç®—ç»“åˆ</span></span></span></span></span>composer2.changed(obj)åˆ¤æ–­æ˜¯å¦dirty ,ç„¶å</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-keyword">if</span>(dirty){
     <span class="hljs-regexp">//</span>è°ƒç”¨è¯¥composable <span class="hljs-built_in">lambda</span>ä¸­invoke é€»è¾‘
     <span class="hljs-title class_">TextKt</span>.m3151Text4IGK_g(<span class="hljs-string">"Hello "</span> + name + <span class="hljs-string">"! Current Time: "</span> ...
}<span class="hljs-keyword">else</span>{
     <span class="hljs-variable">$composer2</span>.skipToGroupEnd()
}
</code></pre>
<p>è¿™é‡Œ $composer2å°±æ˜¯ Composerç±»å‹ï¼Œå®ƒæœ‰ä¸ªchangedæ–¹æ³•è´Ÿè´£åˆ¤æ–­composeableæ–¹æ³•å…¥å‚æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœå‘ç”Ÿå˜åŒ–å°±èµ°composeable invokeé€»è¾‘å‘ç”Ÿé‡ç»„æˆ–è€…è¯´é‡ç»˜ï¼Œå¦åˆ™å°±skipToGroupEnd ä¸å‘ç”Ÿé‡ç»„ï¼Œè¿™ä¹Ÿæ˜¯composeä¿è¯é«˜æ•ˆçš„åŸç†ä¹‹ä¸€ å‚æ•°ä¸å‘ç”Ÿå˜åŒ–ä¸è¿›è¡Œé‡ç»„</p>
<p>ä»¥demoä¸­ textæ–‡æœ¬å‘ç”Ÿå˜åŒ–æ¥å…·ä½“æ¢ç©¶composeæä¾›çš„åŸºç¡€ç»„ä»¶ Textæ˜¯æ€ä¹ˆé‡ç»„çš„</p>
<pre><code class="hljs language-ini" lang="ini"> Text(
        <span class="hljs-attr">text</span> = <span class="hljs-string">"Hello $name! Current Time: $timeStr"</span>,
        <span class="hljs-attr">modifier</span> = modifier
    )
</code></pre>
<p>//Text è¿™é‡Œè¢«ç¿»è¯‘æˆ  TextKt.m3151Text4IGK_g("Hello " + name + "! Current Time: " ...</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/* compiled from: Text.kt */</span>

<span class="hljs-keyword">package</span> androidx.compose.material3;

    <span class="hljs-comment">/* renamed from: Text--4IGK_g  reason: not valid java name */</span>
    <span class="hljs-keyword">public</span> static <span class="hljs-keyword">final</span> void m3151Text4IGK_g(<span class="hljs-keyword">final</span> String text, Modifier modifier, long color, long fontSize, FontStyle fontStyle, FontWeight fontWeight, FontFamily fontFamily, long letterSpacing, TextDecoration textDecoration, TextAlign textAlign, long lineHeight, int overflow, boolean softWrap, int maxLines, int minLines, Function1&lt;? <span class="hljs-keyword">super</span> TextLayoutResult, <span class="hljs-built_in">Unit</span>&gt; function1, TextStyle style, Composer $composer, <span class="hljs-keyword">final</span> int $changed, <span class="hljs-keyword">final</span> int $changed1, <span class="hljs-keyword">final</span> int i) {
        Object obj;
        Modifier modifier2;
        int i2;
        long color2;
        long fontSize2;
        Object fontStyle2;
        Object fontWeight2;
        int $dirty;
        int $dirty1;
        int i3;
        int i4;
        int $dirty12;
        int i5;
        boolean softWrap2;
        int $dirty13;
        TextAlign textAlign2;
        int overflow2;
        int maxLines2;
        int minLines2;
        Function1 onTextLayout;
        FontFamily fontFamily2;
        TextDecoration textDecoration2;
        TextStyle style2;
        FontStyle fontStyle3;
        long fontSize3;
        FontWeight fontWeight3;
        long letterSpacing2;
        long lineHeight2;
        int $dirty2;
        long textColor;
        Composer $composer2;
        <span class="hljs-keyword">final</span> boolean softWrap3;
        <span class="hljs-keyword">final</span> long color3;
        <span class="hljs-keyword">final</span> Modifier modifier3;
        <span class="hljs-keyword">final</span> TextAlign textAlign3;
        <span class="hljs-keyword">final</span> int maxLines3;
        <span class="hljs-keyword">final</span> Function1 onTextLayout2;
        <span class="hljs-keyword">final</span> int maxLines4;
        <span class="hljs-keyword">final</span> TextStyle style3;
        <span class="hljs-keyword">final</span> FontWeight fontWeight4;
        <span class="hljs-keyword">final</span> FontStyle fontStyle4;
        <span class="hljs-keyword">final</span> FontFamily fontFamily3;
        <span class="hljs-keyword">final</span> long letterSpacing3;
        <span class="hljs-keyword">final</span> TextDecoration textDecoration3;
        <span class="hljs-keyword">final</span> long lineHeight3;
        <span class="hljs-keyword">final</span> int minLines3;
        <span class="hljs-keyword">final</span> long fontSize4;
        int i6;
        Composer $composer3 = $composer.startRestartGroup(-<span class="hljs-number">2055108902</span>);
        ComposerKt.sourceInformation($composer3, <span class="hljs-string">"C(Text)P(14,9,0:c#ui.graphics.Color,2:c#ui.unit.TextUnit,3:c#ui.text.font.FontStyle,4!1,5:c#ui.unit.TextUnit,16,15:c#ui.text.style.TextAlign,6:c#ui.unit.TextUnit,11:c#ui.text.style.TextOverflow,12)108@5620L7,113@5732L530:Text.kt#uh7d8r"</span>);
        int $dirty3 = $changed;
        <span class="hljs-keyword">if</span> ((i &amp; <span class="hljs-number">1</span>) != <span class="hljs-number">0</span>) {
            $dirty3 |= <span class="hljs-number">6</span>;
            obj = text;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (($changed &amp; <span class="hljs-number">6</span>) == <span class="hljs-number">0</span>) {
            obj = text;
            $dirty3 |= $composer3.changed(obj) ? <span class="hljs-number">4</span> : <span class="hljs-number">2</span>;
        } <span class="hljs-keyword">else</span> {
            obj = text;
        }
        <span class="hljs-comment">//çœç•¥åç»­ä»£ç </span>

</code></pre>
<p>ç¿»è¯‘ä¸€ä¸‹å°±æ˜¯ æŠŠå…¥å‚textä¼ å…¥ $composer3.changedåˆ¤æ–­æ˜¯å¦ä¸ä¸Šæ¬¡è®°å½•çš„å€¼å‘ç”Ÿå˜åŒ–
Composeræºç å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54bfdf9f8aae48d191680875696900f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemp3X3N3dW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348691&amp;x-signature=YLUuOe9yDr9LktFqkW6tZSPWnXc%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd7119bd782a42e1a31b0da24e099e49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemp3X3N3dW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348691&amp;x-signature=ckDfXDyl1H73gYfjb5IF%2Fa5E30U%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2a8479bc9d04a6ca4402449bc085e0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemp3X3N3dW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348691&amp;x-signature=Jc7bHsgtevE0ckYTZnWKzKFx96c%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸Šæ¬¡textçš„å€¼å°±å­˜åœ¨Composeré‡Œæˆå‘˜å˜é‡slotTableå¯¹è±¡çš„slotså˜é‡ä¸­ï¼Œå€¼æ€ä¹ˆå­˜çš„å¯ä»¥åœ¨SlotTable setæ–¹æ³•æ‰“æ–­ç‚¹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80fc78a2d6ec4ec8bd7b8937f4f8019a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemp3X3N3dW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767348691&amp;x-signature=kuMa9VSkQ01Vv9TR7saxVzyBk5A%3D" alt="b473ce9c4fce8d88fc4e73a2fb2657c5.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°slotsä¸­å­˜å‚¨äº†æ•´ä¸ªComposeViewä¸­æ‰€æœ‰å…¥å‚å€¼æ˜¯ä»¥Arrayæ•°ç»„çš„å½¢å¼ï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ°Composer changedæ–¹æ³•ä¸ºä»€ä¹ˆè¦è°ƒç”¨nextSlot()å’ŒComposerableæ–¹æ³•åç¼–è¯‘åä¸ºä»€ä¹ˆéƒ½æœ‰å¦‚ä¸‹3ä¸ªæ–¹æ³•è°ƒç”¨</p>
<pre><code class="hljs language-ini" lang="ini"> Composer $<span class="hljs-attr">composer2</span> = <span class="hljs-variable">$composer</span>.startRestartGroup(-<span class="hljs-number">1745234003</span>)
 //çœç•¥ä»£ç 
 $composer.skipToGroupEnd()
//çœç•¥ä»£ç 
 ScopeUpdateScope <span class="hljs-attr">endRestartGroup</span> = <span class="hljs-variable">$composer2</span>.endRestartGroup()<span class="hljs-comment">;</span>
</code></pre>
<p>å› ä¸ºSlotTableå­˜å‚¨çš„æ˜¯æ•´ä¸ªComposeViewç»„æˆcomposeableå‡½æ•°UIæ ‘çš„æ‰€æœ‰å…¥å‚Arrayï¼Œæ‰å¹³åŒ–å­˜å‚¨ï¼Œæ‰€ä»¥éœ€è¦ä»¥Composeableè¦æ˜¯ä½¿ç”¨Groupåˆ†ç»„ï¼Œä½¿ç”¨â€œæŒ‡é’ˆâ€æ¥é”šå®šå½“å‰æ‰§è¡Œåˆ°çš„composeableå‡½æ•°å½“å‰å…¥å‚ï¼ŒæŒ‡é’ˆå¯»å€è¿™é‡Œä¸åšå±•å¼€è¯´æ˜æœ‰å…´è¶£å¯ä»¥è‡ªè¡Œå»çœ‹ï¼ŒComposer::changedæ–¹æ³•åˆ¤æ–­æœ¬æ¬¡valueå’Œslotså­˜å‚¨çš„å¯¹åº”textæ˜¯å¦å˜åŒ–ï¼Œå˜åŒ–å°±å‘ç”Ÿé‡ç»„é€»è¾‘ã€‚</p>
<p>è‡³æ­¤æˆ‘ä»¬å°±å·²ç»åŸºæœ¬æ¢ç©¶å®ŒComposeæœºåˆ¶äº†ï¼Œæ€»ç»“ä¸€ä¸‹å°±æ˜¯Composeæ˜¯ä½¿ç”¨å¼€å‘è€…å†™çš„@Composeableå‡½æ•°å…³ç³»æ¥æè¿°è¿™ä¸ªUIæ ‘çš„ï¼Œä¸åŒäºAndroid Viewç³»ç»Ÿä½¿ç”¨çš„ViewGroup/Viewå¯¹è±¡Treeæ¥æè¿°UIæ ‘ï¼›è€ŒUIçš„æ›´æ–° Composeä½¿ç”¨çš„å…¥å‚åˆ¤æ–­å˜åŒ–æ¥æ›´æ–°ï¼Œè€ŒAndroid Viewç³»ç»Ÿä½¿ç”¨çš„æ˜¯å‘½ä»¤å¼æ¯”å¦‚æ˜¾ç¤ºè°ƒç”¨View.requstLayout</p>
<h2 data-id="heading-1">Composeå®ç°</h2>
<p>åŸç†ææ‡‚äº†ï¼Œæ¥ä¸‹æ¥å°±æ¥å®ç°ä¸€ä¸ªCompose,å…¶å®å°±5ä¸ªæ ¸å¿ƒç±»ï¼Œè®©AIç›´æ¥ç»™å‡ºComposeç®€æ˜“å®ç°,è¿™é‡Œå°±ä¸è´´ä»£ç äº†ï¼Œç»“å°¾æœ‰Github Composeç®€æ˜“å®ç°æºç é“¾æ¥ï¼Œä»¥ä¸‹æ˜¯æ ¸å¿ƒç±»åŠŸèƒ½ä»‹ç»</p>
<h3 data-id="heading-2">ä¸€ã€SlotTable</h3>
<h4 data-id="heading-3">åŠŸèƒ½ï¼š</h4>
<ul>
<li>æ ¸å¿ƒâ€œè®°å¿†ä»“åº“â€ï¼Œçº¿æ€§å­˜å‚¨æ‰€æœ‰ Composable çš„çŠ¶æ€ï¼ˆremember å€¼ã€å‚æ•°å€¼ã€lambda ç­‰ï¼‰</li>
<li>ç®¡ç† index æŒ‡é’ˆï¼Œæ”¯æŒé¡ºåºè®¿é—®</li>
<li>ç®¡ç† Groupï¼šstartGroup / endGroup / skipGroup</li>
<li>startGroupï¼šè®°å½• group èµ·å§‹ index</li>
<li>endGroupï¼šè®¡ç®— group å ç”¨ slot æ•°é‡</li>
<li>skipGroupï¼šé‡ç»„æ—¶å¿«é€Ÿè·³è¿‡æ•´ä¸ª group</li>
</ul>
<h4 data-id="heading-4">åŸç†ï¼š</h4>
<ul>
<li>æ¯æ¬¡è°ƒç”¨ next() â†’ è¿”å›å½“å‰ slot å¹¶ index++</li>
<li>æ¯æ¬¡è°ƒç”¨ update() â†’ ä¿®æ”¹ index-1 å¯¹åº”çš„ slot</li>
</ul>
<hr/>
<h3 data-id="heading-5">äºŒã€Composer</h3>
<h4 data-id="heading-6">åŠŸèƒ½ï¼š</h4>
<ul>
<li>SlotTable å°è£…å™¨ï¼šæä¾›æ›´é«˜å±‚çš„æ¥å£</li>
<li>changed(value) â†’ åˆ¤æ–­å½“å‰ slot æ˜¯å¦å’Œä¼ å…¥å€¼ä¸åŒï¼Œè¿”å› Boolean</li>
<li>remember(factory) â†’ è¯»å– slotï¼Œå¦‚æœä¸ºç©ºæ‰§è¡Œ lambda å¹¶å†™å…¥ slot</li>
<li>Group ç®¡ç†ï¼šstartGroup() / endGroup() / skipGroup()</li>
</ul>
<h4 data-id="heading-7">åŸç†ï¼š</h4>
<ul>
<li>å°† Composable å‡½æ•°çš„è¿è¡Œä¸ SlotTable çŠ¶æ€ç»‘å®š</li>
<li>æ§åˆ¶ skip / é‡ç»„é€»è¾‘</li>
</ul>
<hr/>
<h3 data-id="heading-8">ä¸‰ã€State</h3>
<h4 data-id="heading-9">åŠŸèƒ½ï¼š</h4>
<ul>
<li>å¯å˜çŠ¶æ€æŒæœ‰è€…</li>
<li>value å˜åŒ–æ—¶è§¦å‘å›è°ƒ â†’ è§¦å‘é‡ç»„</li>
</ul>
<h4 data-id="heading-10">åŸç†ï¼š</h4>
<ul>
<li>å†…éƒ¨å­˜å‚¨å½“å‰å€¼ _value</li>
<li>set(value) â†’ å€¼æ”¹å˜ â†’ è°ƒç”¨ onChange()</li>
<li>mutableStateOf æ˜¯åˆ›å»º State çš„å·¥å‚å‡½æ•°</li>
</ul>
<hr/>
<h3 data-id="heading-11">å››ã€Composition</h3>
<h4 data-id="heading-12">åŠŸèƒ½ï¼š</h4>
<ul>
<li>ç®¡ç†æ•´ä¸ª Composable æ ‘çš„å…¥å£</li>
<li>setContent() â†’ è®¾ç½®é¡¶å±‚ Composable</li>
<li>recompose() â†’ é‡ç»„æ•´ä¸ªæ ‘</li>
<li>å†…éƒ¨æŒæœ‰ SlotTable + Composer</li>
</ul>
<h4 data-id="heading-13">åŸç†ï¼š</h4>
<ul>
<li>æ¯æ¬¡ recompose() â†’ reset SlotTable â†’ æ‰§è¡Œé¡¶å±‚ Composable â†’ æ ¹æ® changed/skip æ›´æ–° slot</li>
<li>å¯ç”± State æ”¹å˜è§¦å‘</li>
</ul>
<hr/>
<h3 data-id="heading-14">äº”ã€Composable å‡½æ•°</h3>
<h4 data-id="heading-15">åŠŸèƒ½ï¼š</h4>
<ul>
<li>ä¸šåŠ¡é€»è¾‘ + UI è¡¨è¾¾</li>
<li>ä½¿ç”¨ composer.changed() åˆ¤æ–­å‚æ•°æ˜¯å¦å˜åŒ–</li>
</ul>
<hr/>
<h3 data-id="heading-16">Android Viewç³»ç»Ÿ å¯¹æ¯” Compose</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>View ç³»ç»Ÿ</th><th>Compose</th></tr></thead><tbody><tr><td>UIæ¶æ„</td><td>Viewå¯¹è±¡ç»„æˆçš„UI Tree</td><td>Composable å‡½æ•°æè¿°UI Tree</td></tr><tr><td>æ¸²æŸ“å¯¹è±¡</td><td>æ¯ä¸ª View å ç”¨å¯¹è±¡å†…å­˜</td><td>SlotTable è®°å½•çŠ¶æ€ã€é‡ç»„æ—¶å†³å®šæ˜¯å¦ç»˜åˆ¶</td></tr><tr><td>Draw / Canvas</td><td>æ¯ä¸ª View è´Ÿè´£ç»˜åˆ¶è‡ªå·±</td><td>Applierï¼ˆç±»ä¼¼ Canvasï¼‰ç»Ÿä¸€æäº¤ UI æ ‘å˜æ›´</td></tr><tr><td>é‡ç»˜ç­–ç•¥</td><td>requestLayout/invalidate() â†’ é€’å½’ç»˜åˆ¶</td><td>State æ”¹å˜ â†’ Recomposer â†’ é‡ç»„ â†’ é‡ç»˜</td></tr></tbody></table>
<h2 data-id="heading-17">æºç </h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzjw-swun%2FComposeDemo" target="_blank" title="https://github.com/zjw-swun/ComposeDemo" ref="nofollow noopener noreferrer">github.com/zjw-swun/Coâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Shiroæ¡†æ¶å·¥ä½œåŸç†ä¸å®è·µç²¾è®²]]></title>    <link>https://juejin.cn/post/7587995707165605907</link>    <guid>https://juejin.cn/post/7587995707165605907</guid>    <pubDate>2025-12-26T10:19:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587995707165605907" data-draft-id="7587995707165589523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Shiroæ¡†æ¶å·¥ä½œåŸç†ä¸å®è·µç²¾è®²"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T10:19:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·72942943223"/> <meta itemprop="url" content="https://juejin.cn/user/1998245912903995"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Shiroæ¡†æ¶å·¥ä½œåŸç†ä¸å®è·µç²¾è®²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1998245912903995/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·72942943223
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:19:00.000Z" title="Fri Dec 26 2025 10:19:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Java ä¼ä¸šçº§å¼€å‘ä¸­ï¼ŒApache Shiro å‡­å€Ÿå…¶è½»é‡çº§ã€çµæ´»ä¸”æ˜“äºç†è§£çš„ç‰¹ç‚¹ï¼Œä¾ç„¶æ˜¯ä¼—å¤šå¼€å‘è€…è¿›è¡Œæƒé™ç®¡ç†çš„é¦–é€‰æ¡†æ¶ã€‚ç„¶è€Œï¼Œåœ¨å®æˆ˜ä¸­ï¼Œå¾ˆå¤šå¼€å‘è€…å¾€å¾€æ­¢æ­¥äºç®€å•çš„ INI é…ç½®æˆ–ç¡¬ç¼–ç çš„æƒé™æ‹¦æˆªï¼Œå¯¼è‡´ç³»ç»Ÿåœ¨é¢å¯¹å¤æ‚çš„ä¸šåŠ¡éœ€æ±‚æ—¶ç¼ºä¹å¼¹æ€§ã€‚æœ¬æ–‡å°†ç»“åˆä¸ªäººå®æˆ˜ç»éªŒï¼Œæ·±å…¥æ¢è®¨ Shiro çš„æ³¨è§£å¼æƒé™æ§åˆ¶ä»¥åŠå¦‚ä½•ç»“åˆæ•°æ®åº“å®ç°åŠ¨æ€æƒé™é…ç½®ï¼Œå¸®åŠ©ä½ æ‰“é€ ä¸€ä¸ªå®‰å…¨ã€çµæ´»çš„æƒé™ç³»ç»Ÿã€‚<strong>å­¦ä¹ åœ°å€ï¼špan.baidu.com/s/1WwerIZ_elz_FyPKqXAiZCA?pwd=waug</strong></p>
<h2 data-id="heading-0">ä¸€ã€ æ³¨è§£å¼æƒé™æ§åˆ¶ï¼šä¼˜é›…çš„ä»£ç é˜²æŠ¤</h2>
<p>Shiro æä¾›äº†äº”ä¸ªæ ¸å¿ƒæ³¨è§£ï¼Œåˆ†åˆ«æ˜¯Â <code>@RequiresAuthentication</code>ã€<code>@RequiresUser</code>ã€<code>@RequiresGuest</code>ã€<code>@RequiresRoles</code>Â å’ŒÂ <code>@RequiresPermissions</code>ã€‚é€šè¿‡åœ¨ Controller æˆ– Service å±‚æ–¹æ³•ä¸Šç›´æ¥æ·»åŠ æ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥å°†æƒé™æ ¡éªŒé€»è¾‘ä»ä¸šåŠ¡ä»£ç ä¸­å‰¥ç¦»å‡ºæ¥ã€‚</p>
<h3 data-id="heading-1">1. å¼€å¯æ³¨è§£æ”¯æŒ</h3>
<p>é¦–å…ˆï¼Œå¿…é¡»åœ¨ Spring çš„é…ç½®ç±»ä¸­å¯ç”¨ Shiro æ³¨è§£æ”¯æŒï¼Œå¦åˆ™æ³¨è§£å°†ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<p>java</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShiroConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DefaultAdvisorAutoProxyCreator <span class="hljs-title function_">defaultAdvisorAutoProxyCreator</span><span class="hljs-params">()</span> {
        <span class="hljs-type">DefaultAdvisorAutoProxyCreator</span> <span class="hljs-variable">creator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultAdvisorAutoProxyCreator</span>();
        creator.setProxyTargetClass(<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">return</span> creator;
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> AuthorizationAttributeSourceAdvisor <span class="hljs-title function_">authorizationAttributeSourceAdvisor</span><span class="hljs-params">(SecurityManager securityManager)</span> {
        <span class="hljs-type">AuthorizationAttributeSourceAdvisor</span> <span class="hljs-variable">advisor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AuthorizationAttributeSourceAdvisor</span>();
        advisor.setSecurityManager(securityManager);
        <span class="hljs-keyword">return</span> advisor;
    }
}
</code></pre>
<h3 data-id="heading-2">2. ä½¿ç”¨æ³¨è§£å®æˆ˜</h3>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®ä½¿ç”¨Â  <strong>â€œè§’è‰²â€</strong> Â ç²—ç²’åº¦æ§åˆ¶ç”¨æˆ·ç±»å‹ï¼Œä½¿ç”¨Â  <strong>â€œæƒé™â€</strong> Â ç²¾ç»†æ§åˆ¶æ“ä½œè¡Œä¸ºã€‚</p>
<p>java</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/order"</span>)
public class OrderController {

    <span class="hljs-comment">// åªæœ‰ç™»å½•ç”¨æˆ·æ‰èƒ½è®¿é—®</span>
    <span class="hljs-variable">@RequiresUser</span>
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/list"</span>)
    public String <span class="hljs-built_in">list</span>() {
        <span class="hljs-selector-tag">return</span> "è®¢å•åˆ—è¡¨";
    }

    <span class="hljs-comment">// éœ€è¦å…·å¤‡ 'admin' è§’è‰²</span>
    @<span class="hljs-selector-tag">RequiresRoles</span>(<span class="hljs-string">"admin"</span>)
    @<span class="hljs-selector-tag">DeleteMapping</span>(<span class="hljs-string">"/delete/{id}"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">delete</span>(<span class="hljs-variable">@PathVariable</span> Long id) {
        <span class="hljs-selector-tag">return</span> "åˆ é™¤è®¢å• <span class="hljs-selector-tag">ID</span>: " + <span class="hljs-selector-tag">id</span>;
    }

    <span class="hljs-comment">// éœ€è¦åŒæ—¶å…·å¤‡ 'order:create' å’Œ 'order:audit' æƒé™</span>
    <span class="hljs-comment">// logical = Logical.AND è¡¨ç¤ºå¿…é¡»åŒæ—¶æ‹¥æœ‰ï¼ŒOR è¡¨ç¤ºæ»¡è¶³å…¶ä¸€</span>
    @<span class="hljs-selector-tag">RequiresPermissions</span>(value = {"<span class="hljs-attribute">order</span>:create<span class="hljs-string">", "</span><span class="hljs-attribute">order</span>:audit"}, <span class="hljs-selector-tag">logical</span> = <span class="hljs-selector-tag">Logical</span><span class="hljs-selector-class">.AND</span>)
    @<span class="hljs-selector-tag">PostMapping</span>(<span class="hljs-string">"/create"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">create</span>() {
        <span class="hljs-selector-tag">return</span> "åˆ›å»ºè®¢å•";
    }
}
</code></pre>
<p><strong>å®æˆ˜å¿ƒå¾—ï¼š</strong> Â å°½é‡ä¸è¦å°†è¿‡äºå¤æ‚çš„é€»è¾‘ç»„åˆæ”¾åœ¨æ³¨è§£ä¸­ï¼Œä¿æŒæ³¨è§£çš„ç®€æ´æ€§ã€‚å¤æ‚çš„æƒé™åˆ¤æ–­å»ºè®®åœ¨è‡ªå®šä¹‰ Filter ä¸­å¤„ç†ã€‚</p>
<h2 data-id="heading-3">äºŒã€ åŠ¨æ€æƒé™é…ç½®ï¼šæ‘†è„±ç¡¬ç¼–ç çš„æ·é”</h2>
<p>çœŸå®ä¸–ç•Œçš„ä¸šåŠ¡éœ€æ±‚æ˜¯ç¬æ¯ä¸‡å˜çš„ã€‚å¦‚æœæ¯æ¬¡æ–°å¢ä¸€ä¸ªèœå•æˆ–æƒé™éƒ½éœ€è¦ä¿®æ”¹ä»£ç é‡å¯æœåŠ¡ï¼Œé‚£æ˜¾ç„¶æ˜¯ä¸å¯æ¥å—çš„ã€‚æˆ‘ä»¬éœ€è¦å®ç°<strong>åŠ¨æ€æƒé™åŠ è½½</strong>ï¼Œå³æƒé™é…ç½®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œç”¨æˆ·ç™»å½•åå®æ—¶åŠ è½½ã€‚</p>
<h3 data-id="heading-4">1. è‡ªå®šä¹‰ Realm å®ç°åŠ¨æ€æˆæƒ</h3>
<p>Shiro çš„æ ¸å¿ƒåœ¨äºÂ <code>Realm</code>ã€‚æˆ‘ä»¬éœ€è¦é‡å†™Â <code>doGetAuthorizationInfo</code>Â æ–¹æ³•ï¼Œä»æ•°æ®åº“æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„è§’è‰²å’Œæƒé™ã€‚</p>
<p>java</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-meta">@Component</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserRealm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AuthorizingRealm</span> </span>{

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">UserService</span> userService;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">PermissionService</span> permissionService;

    <span class="hljs-comment">// è®¤è¯</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">AuthenticationInfo</span> doGetAuthenticationInfo(<span class="hljs-type">AuthenticationToken</span> token) {
        <span class="hljs-comment">// ... çœç•¥ç”¨æˆ·åå¯†ç æ ¡éªŒé€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">SimpleAuthenticationInfo</span>(user, user.getPassword(), getName());
    }

    <span class="hljs-comment">// æˆæƒ (æ ¸å¿ƒé€»è¾‘)</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">AuthorizationInfo</span> doGetAuthorizationInfo(<span class="hljs-type">PrincipalCollection</span> principals) {
        <span class="hljs-comment">// 1. è·å–å½“å‰ç™»å½•ç”¨æˆ·</span>
        <span class="hljs-type">User</span> user = (<span class="hljs-type">User</span>) principals.getPrimaryPrincipal();
        
        <span class="hljs-type">SimpleAuthorizationInfo</span> info = <span class="hljs-keyword">new</span> <span class="hljs-type">SimpleAuthorizationInfo</span>();

        <span class="hljs-comment">// 2. åŠ¨æ€æŸ¥è¯¢æ•°æ®åº“ä¸­çš„è§’è‰²</span>
        <span class="hljs-type">Set</span>&lt;<span class="hljs-type">String</span>&gt; roleCodes = userService.findRolesByUserId(user.getId());
        info.setRoles(roleCodes);

        <span class="hljs-comment">// 3. åŠ¨æ€æŸ¥è¯¢æ•°æ®åº“ä¸­çš„æƒé™</span>
        <span class="hljs-type">Set</span>&lt;<span class="hljs-type">String</span>&gt; permCodes = permissionService.findPermsByUserId(user.getId());
        info.setStringPermissions(permCodes);

        <span class="hljs-keyword">return</span> info;
    }
}
</code></pre>
<h3 data-id="heading-5">2. å®ç°çƒ­åŠ è½½ï¼šæ¸…é™¤ç¼“å­˜</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒShiro ä¼šå°†æˆæƒä¿¡æ¯ç¼“å­˜èµ·æ¥ã€‚å¦‚æœç®¡ç†å‘˜åœ¨åå°ä¿®æ”¹äº†ç”¨æˆ·çš„æƒé™å¹¶åŒæ­¥åˆ°æ•°æ®åº“ï¼Œä½†ç”¨æˆ· Session æœªè¿‡æœŸï¼Œç”¨æˆ·ä¾ç„¶æ‹¥æœ‰æ—§æƒé™ã€‚æ­¤æ—¶éœ€è¦<strong>åŠ¨æ€åˆ·æ–°ç¼“å­˜</strong>ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªå·¥å…·ç±»ï¼Œå½“æƒé™å˜æ›´æ—¶ä¸»åŠ¨è°ƒç”¨ã€‚</p>
<p>java</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShiroCacheUtil</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Realm</span> realm;

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">clearCachedAuthorizationInfo</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> principal</span>) {
        <span class="hljs-comment">// è·å–å½“å‰ Realm çš„ç¼“å­˜ç®¡ç†å™¨</span>
        <span class="hljs-title class_">CacheManager</span> cacheManager = realm.<span class="hljs-title function_">getCacheManager</span>();
        <span class="hljs-keyword">if</span> (cacheManager != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// è·å–ç¼“å­˜å¯¹è±¡</span>
            <span class="hljs-title class_">Cache</span>&lt;<span class="hljs-title class_">Object</span>, <span class="hljs-title class_">AuthorizationInfo</span>&gt; cache = cacheManager.<span class="hljs-title function_">getCache</span>(realm.<span class="hljs-title function_">getName</span>());
            <span class="hljs-keyword">if</span> (cache != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// ç§»é™¤æŒ‡å®šç”¨æˆ·çš„æˆæƒç¼“å­˜</span>
                <span class="hljs-comment">// è¿™é‡Œçš„ key é€šå¸¸æ˜¯ principal (å¦‚ç”¨æˆ·åæˆ–ç”¨æˆ·å¯¹è±¡)</span>
                cache.<span class="hljs-title function_">remove</span>(principal);
            }
        }
    }
}

<span class="hljs-comment">// è°ƒç”¨ç¤ºä¾‹ï¼šç®¡ç†å‘˜ä¿®æ”¹æƒé™å</span>
<span class="hljs-comment">// shiroCacheUtil.clearCachedAuthorizationInfo("zhangsan");</span>
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€ è¿›é˜¶æŠ€å·§ï¼šè‡ªå®šä¹‰ Filter å¤„ç†ç‰¹æ®Šåœºæ™¯</h2>
<p>æœ‰æ—¶å€™æ³¨è§£æ— æ³•æ»¡è¶³æ‰€æœ‰éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šåªæœ‰ â€œåˆ›å»ºäººæœ¬äººâ€ æ‰èƒ½ä¿®æ”¹è®¢å•ã€‚è¿™æ¶‰åŠåˆ°ä¸šåŠ¡æ•°æ®çš„æ ¡éªŒï¼ŒShiro æä¾›çš„æ³¨è§£åšä¸åˆ°ã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ Filterã€‚</p>
<p>java</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OwnerOrAdminFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PermissionsAuthorizationFilter</span> </span>{

    <span class="hljs-meta">@Override</span>
    public boolean isAccessAllowed(<span class="hljs-type">ServletRequest</span> request, <span class="hljs-type">ServletResponse</span> response, <span class="hljs-type">Object</span> mappedValue) {
        <span class="hljs-type">Subject</span> subject = getSubject(request, response);
        
        <span class="hljs-comment">// 1. å¦‚æœæ˜¯ adminï¼Œç›´æ¥æ”¾è¡Œ</span>
        <span class="hljs-keyword">if</span> (subject.hasRole(<span class="hljs-string">"admin"</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }

        <span class="hljs-comment">// 2. æ£€æŸ¥æ˜¯å¦æ˜¯èµ„æºæ‹¥æœ‰è€…ï¼ˆæ¨¡æ‹Ÿé€»è¾‘ï¼‰</span>
        <span class="hljs-type">String</span> orderId = request.getParameter(<span class="hljs-string">"orderId"</span>);
        <span class="hljs-type">User</span> currentUser = (<span class="hljs-type">User</span>) subject.getPrincipal();
        
        <span class="hljs-comment">// å‡è®¾è°ƒç”¨ Service æ£€æŸ¥è¯¥è®¢å•æ˜¯å¦å±äºå½“å‰ç”¨æˆ·</span>
        boolean isOwner = checkOrderOwner(orderId, currentUser.getId());
        
        <span class="hljs-keyword">return</span> isOwner;
    }
}
</code></pre>
<p>ç„¶ååœ¨Â <code>ShiroConfig</code>Â ä¸­æ³¨å†Œè¿™ä¸ª Filterï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°ç‰¹å®šçš„ URL ä¸Šï¼š</p>
<p>java</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">ShiroFilterFactoryBean</span> <span class="hljs-title function_">shiroFilter</span>(<span class="hljs-params">SecurityManager securityManager</span>) {
    <span class="hljs-title class_">ShiroFilterFactoryBean</span> shiroFilter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShiroFilterFactoryBean</span>();
    shiroFilter.<span class="hljs-title function_">setSecurityManager</span>(securityManager);
    
    <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Filter</span>&gt; filters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    filters.<span class="hljs-title function_">put</span>(<span class="hljs-string">"ownerOrAdmin"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">OwnerOrAdminFilter</span>());
    shiroFilter.<span class="hljs-title function_">setFilters</span>(filters);

    <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; filterChainDefinitionMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashMap</span>&lt;&gt;();
    filterChainDefinitionMap.<span class="hljs-title function_">put</span>(<span class="hljs-string">"/order/update/**"</span>, <span class="hljs-string">"ownerOrAdmin"</span>);
    <span class="hljs-comment">// ...</span>
    shiroFilter.<span class="hljs-title function_">setFilterChainDefinitionMap</span>(filterChainDefinitionMap);
    <span class="hljs-keyword">return</span> shiroFilter;
}
</code></pre>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>é€šè¿‡ Shiro çš„æ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥è®©ä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°ï¼›é€šè¿‡ç»“åˆæ•°æ®åº“ä¸è‡ªå®šä¹‰ Realmï¼Œæˆ‘ä»¬å®ç°äº†æƒé™çš„åŠ¨æ€é…ç½®ä¸çƒ­åŠ è½½ï¼›è€Œé€šè¿‡è‡ªå®šä¹‰ Filterï¼Œæˆ‘ä»¬å¡«è¡¥äº†é€šç”¨å®‰å…¨æ¡†æ¶ä¸å…·ä½“ä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„é¸¿æ²Ÿã€‚æŒæ¡è¿™ä¸‰æ¿æ–§ï¼Œè¶³ä»¥åº”å¯¹å¤§å¤šæ•°ä¼ä¸šçº§åº”ç”¨å¼€å‘ä¸­çš„æƒé™ç®¡ç†æŒ‘æˆ˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºDubboçš„åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„+äº‹åŠ¡è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7588002126258307078</link>    <guid>https://juejin.cn/post/7588002126258307078</guid>    <pubDate>2025-12-26T10:17:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588002126258307078" data-draft-id="7587995707165556755" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºDubboçš„åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„+äº‹åŠ¡è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T10:17:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·72942943223"/> <meta itemprop="url" content="https://juejin.cn/user/1998245912903995"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºDubboçš„åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„+äº‹åŠ¡è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1998245912903995/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·72942943223
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:17:56.000Z" title="Fri Dec 26 2025 10:17:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¾®æœåŠ¡æ¶æ„æ—¥ç›Šæ™®åŠçš„ä»Šå¤©ï¼ŒApache Dubbo å‡­å€Ÿå…¶é«˜æ€§èƒ½çš„ RPC è°ƒç”¨èƒ½åŠ›ï¼Œæˆä¸ºäº†ä¼—å¤šä¼ä¸šæ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„é¦–é€‰æ¡†æ¶ã€‚ç„¶è€Œï¼Œéšç€ä¸šåŠ¡ä½“é‡çš„è†¨èƒ€ï¼ŒæœåŠ¡æ‹†åˆ†è¶Šæ¥è¶Šç»†ï¼Œè·¨æœåŠ¡çš„ä¸šåŠ¡æ“ä½œï¼ˆå¦‚â€œä¸‹å•æ‰£åº“å­˜+æ‰£ä½™é¢â€ï¼‰å˜å¾—æä¸ºæ™®éã€‚åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚ä½•ä¿è¯è¿™äº›è·¨æœåŠ¡æ“ä½œçš„æ•°æ®ä¸€è‡´æ€§ï¼ŒåŒæ—¶ç»´æŒç³»ç»Ÿçš„é«˜ååé‡å’Œä½å»¶è¿Ÿï¼Œæˆä¸ºäº†æ¶æ„å¸ˆå¿…é¡»é¢å¯¹çš„æŒ‘æˆ˜ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Dubbo åˆ†å¸ƒå¼äº‹åŠ¡çš„è¿›é˜¶ç­–ç•¥ï¼Œé‡ç‚¹è§£æå¦‚ä½•ä¼˜åŒ–ä¼ ç»Ÿæ–¹æ¡ˆä»¥é€‚åº”é«˜å¹¶å‘ç¯å¢ƒã€‚<strong>å­¦ä¹ åœ°å€ï¼špan.baidu.com/s/1WwerIZ_elz_FyPKqXAiZCA?pwd=waug</strong></p>
<h2 data-id="heading-0">ä¸€ã€ ä¼ ç»Ÿæ–¹æ¡ˆçš„ç“¶é¢ˆï¼šTCC ä¸ Seata AT æ¨¡å¼çš„å›°å¢ƒ</h2>
<p>åœ¨è°ˆåŠä¼˜åŒ–ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆæ˜ç¡®ç—›ç‚¹ã€‚ä¼ ç»Ÿçš„Â <strong>2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰</strong> Â æ€§èƒ½è¾ƒå·®ï¼Œé˜»å¡ä¸¥é‡ï¼Œä¸é€‚åˆé«˜å¹¶å‘ã€‚è€Œç›®å‰ä¸»æµçš„Â <strong>TCC (Try-Confirm-Cancel)</strong> Â å’ŒÂ <strong>Seata AT æ¨¡å¼</strong>Â è™½ç„¶è§£å†³äº†æœ€ç»ˆä¸€è‡´æ€§ï¼Œä½†åœ¨é«˜å¹¶å‘ä¸‹ä»æœ‰ç“¶é¢ˆï¼š</p>
<ol>
<li><strong>TCC çš„ä¾µå…¥æ€§æˆæœ¬</strong>ï¼šéœ€è¦ä¸ºæ¯ä¸ªä¸šåŠ¡æ¥å£ç¼–å†™ä¸‰ä¸ªæ–¹æ³•ï¼Œå¼€å‘æˆæœ¬é«˜ï¼Œä¸”å­˜åœ¨â€œç©ºå›æ»šâ€å’Œâ€œæ‚¬æŒ‚â€ç­‰å¤æ‚è¾¹ç¼˜æƒ…å†µå¤„ç†ã€‚</li>
<li><strong>Seata AT çš„é”ç«äº‰</strong>ï¼šAT æ¨¡å¼é€šè¿‡è§£æ SQL è®°å½•å‰é•œåƒå’Œåé•œåƒï¼Œåˆ©ç”¨å…¨å±€é”æ¥ä¿è¯å†™éš”ç¦»ã€‚åœ¨é«˜å¹¶å‘ç«äº‰ä¸¥é‡çš„æƒ…å†µä¸‹ï¼ˆå¦‚ç§’æ€åœºæ™¯ï¼‰ï¼Œå…¨å±€é”çš„äº’æ–¥ç­‰å¾…ä¼šå¯¼è‡´å¤§é‡çº¿ç¨‹é˜»å¡ï¼Œæ•°æ®åº“è¿æ¥æ± è¿…é€Ÿè€—å°½ï¼ŒRTï¼ˆå“åº”æ—¶é—´ï¼‰é£™å‡ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€ ä¼˜åŒ–ç­–ç•¥ä¸€ï¼šåŸºäºå¯é æ¶ˆæ¯çš„æœ€ç»ˆä¸€è‡´æ€§ï¼ˆå¼‚æ­¥åŒ–ï¼‰</h2>
<p>å¯¹äº<strong>é«˜å¹¶å‘ä¸”éå¼ºå®æ—¶ä¸€è‡´æ€§</strong>è¦æ±‚çš„åœºæ™¯ï¼ˆå¦‚ä¸‹å•æˆåŠŸåå‘é€ç§¯åˆ†ã€å‘æ”¾ä¼˜æƒ åˆ¸ï¼‰ï¼Œæœ€æœ‰æ•ˆçš„ä¼˜åŒ–ç­–ç•¥æ˜¯<strong>å°†åŒæ­¥è°ƒç”¨æ”¹ä¸ºå¼‚æ­¥è°ƒç”¨</strong>ï¼Œå½»åº•è§£è€¦æ ¸å¿ƒé“¾è·¯ã€‚</p>
<p>Dubbo æä¾›äº†å¼ºå¤§çš„å¼‚æ­¥è°ƒç”¨ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚ RocketMQï¼‰å®ç°äº‹åŠ¡çš„å¼‚æ­¥åŒ–å¤„ç†ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<p>java</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OrderService</span> {

    <span class="hljs-meta">@DubboReference</span>(<span class="hljs-keyword">async</span> = <span class="hljs-literal">true</span>) <span class="hljs-comment">// å¼€å¯ Dubbo å¼‚æ­¥è°ƒç”¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">PointsService</span> pointsService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">OrderMapper</span> orderMapper;

    <span class="hljs-meta">@GlobalTransactional</span>(name = <span class="hljs-string">"create-order"</span>, rollbackFor = <span class="hljs-title class_">Exception</span>.<span class="hljs-property">class</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createOrder</span>(<span class="hljs-params">OrderDTO order</span>) {
        <span class="hljs-comment">// 1. æ‰£å‡åº“å­˜ã€åˆ›å»ºè®¢å•ï¼ˆæ ¸å¿ƒé“¾è·¯åŒæ­¥æ‰§è¡Œï¼‰</span>
        orderMapper.<span class="hljs-title function_">insert</span>(order);
        
        <span class="hljs-comment">// 2. è°ƒç”¨ç§¯åˆ†æœåŠ¡ï¼ˆDubbo å¼‚æ­¥è°ƒç”¨ï¼‰</span>
        <span class="hljs-comment">// è¿™é‡Œçš„ RPC è°ƒç”¨ä¼šç«‹å³è¿”å›ï¼Œä¸é˜»å¡å½“å‰çº¿ç¨‹</span>
        pointsService.<span class="hljs-title function_">addPoints</span>(order.<span class="hljs-title function_">getUserId</span>(), order.<span class="hljs-title function_">getAmount</span>());
        
        <span class="hljs-comment">// æ³¨æ„ï¼šä¸ºä¿è¯å¯é æ€§ï¼Œç”Ÿäº§ç¯å¢ƒé€šå¸¸æ¨èä½¿ç”¨ MQ äº‹åŠ¡æ¶ˆæ¯</span>
        <span class="hljs-comment">// è¿™é‡Œå±•ç¤ºçš„æ˜¯åˆ©ç”¨ Dubbo ç‰¹æ€§çš„è½»é‡çº§å¼‚æ­¥åŒ–æ€è·¯</span>
    }
}
</code></pre>
<p><strong>æ ¸å¿ƒä¼˜åŒ–ç‚¹ï¼š</strong> Â é€šè¿‡Â <code>async=true</code>ï¼Œè®¢å•æœåŠ¡çš„ TCC åˆ†æ”¯æˆ–æœ¬åœ°äº‹åŠ¡æäº¤åï¼Œæ— éœ€ç­‰å¾…ç§¯åˆ†æœåŠ¡æ‰§è¡Œå®Œæ¯•å³å¯è¿”å›ï¼Œå¤§å¹…æå‡ QPSã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€ ä¼˜åŒ–ç­–ç•¥äºŒï¼šæœ¬åœ°æ¶ˆæ¯è¡¨ + å®šæ—¶ä»»åŠ¡ï¼ˆæ— é”ç«äº‰ï¼‰</h2>
<p>é’ˆå¯¹å¼ºä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ï¼Œä¸ºäº†é¿å… Seata AT æ¨¡å¼çš„å…¨å±€é”ç«äº‰ï¼Œå¯ä»¥é‡‡ç”¨<strong>æœ¬åœ°æ¶ˆæ¯è¡¨</strong>æ¨¡å¼ã€‚è¯¥æ¨¡å¼åˆ©ç”¨äº†â€œä¸šåŠ¡æ“ä½œâ€ä¸â€œæ¶ˆæ¯å‘é€â€åœ¨åŒä¸€ä¸ªæœ¬åœ°æ•°æ®åº“äº‹åŠ¡ä¸­çš„ç‰¹æ€§ï¼Œä¿è¯äº†åŸå­æ€§ï¼Œä¸‹æ¸¸æœåŠ¡é€šè¿‡è½®è¯¢æ¶ˆè´¹æ¶ˆæ¯ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<p>java</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentServiceImpl</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">PaymentMapper</span> paymentMapper;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">LocalMessageMapper</span> messageMapper;
    <span class="hljs-meta">@DubboReference</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">WalletService</span> walletService;

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">processPayment</span>(<span class="hljs-params">PaymentRequest req</span>) {
        <span class="hljs-comment">// 1. æ‰§è¡Œæœ¬åœ°ä¸šåŠ¡ï¼šæ›´æ–°æ”¯ä»˜æµæ°´</span>
        paymentMapper.<span class="hljs-title function_">updateStatus</span>(req.<span class="hljs-title function_">getId</span>(), <span class="hljs-string">"SUCCESS"</span>);

        <span class="hljs-comment">// 2. åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­ï¼Œæ’å…¥ä¸€æ¡å¾…å‘é€çš„â€œä¸‹æ¸¸ä»»åŠ¡æ¶ˆæ¯â€</span>
        <span class="hljs-title class_">LocalMessage</span> msg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalMessage</span>();
        msg.<span class="hljs-title function_">setPayload</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">toJSONString</span>(req));
        msg.<span class="hljs-title function_">setStatus</span>(<span class="hljs-string">"SENDING"</span>);
        msg.<span class="hljs-title function_">setTargetService</span>(<span class="hljs-string">"WalletService"</span>); <span class="hljs-comment">// æ ‡è®°ç›®æ ‡æœåŠ¡</span>
        messageMapper.<span class="hljs-title function_">insert</span>(msg);
        
        <span class="hljs-comment">// äº‹åŠ¡æäº¤åï¼Œæ¶ˆæ¯å·²æŒä¹…åŒ–ã€‚æ­¤æ—¶æ— éœ€ç«‹å³è°ƒç”¨ Dubboã€‚</span>
    }
}

<span class="hljs-comment">// ç‹¬ç«‹çš„å®šæ—¶ä»»åŠ¡çº¿ç¨‹ï¼ˆæˆ– MQ æ¶ˆè´¹è€…ï¼‰</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageJob</span> {
    <span class="hljs-meta">@Scheduled</span>(fixedDelay = <span class="hljs-number">5000</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">sendPendingMessages</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// æŸ¥è¯¢çŠ¶æ€ä¸º SENDING çš„æ¶ˆæ¯</span>
        <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">LocalMessage</span>&gt; messages = messageMapper.<span class="hljs-title function_">selectSendingMessages</span>(<span class="hljs-number">100</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">LocalMessage</span> msg : messages) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// é€šè¿‡åå°„æˆ–åŠ¨æ€è·¯ç”±è°ƒç”¨ä¸‹æ¸¸ Dubbo æœåŠ¡</span>
                walletService.<span class="hljs-title function_">deduction</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parseObject</span>(msg.<span class="hljs-title function_">getPayload</span>(), <span class="hljs-title class_">WalletReq</span>.<span class="hljs-property">class</span>));
                
                <span class="hljs-comment">// è°ƒç”¨æˆåŠŸï¼Œæ›´æ–°æ¶ˆæ¯çŠ¶æ€ä¸º SENT</span>
                messageMapper.<span class="hljs-title function_">updateStatus</span>(msg.<span class="hljs-title function_">getId</span>(), <span class="hljs-string">"SENT"</span>);
            } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
                <span class="hljs-comment">// è®°å½•æ—¥å¿—ï¼Œç­‰å¾…ä¸‹æ¬¡é‡è¯•</span>
                log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Message retry failed"</span>, e);
            }
        }
    }
}
</code></pre>
<p><strong>æ ¸å¿ƒä¼˜åŒ–ç‚¹ï¼š</strong> Â è¯¥æ–¹æ¡ˆå®Œå…¨ä¸ä¾èµ–åˆ†å¸ƒå¼é”ï¼Œæ¶ˆé™¤äº†æ•°æ®åº“å±‚é¢çš„è¡Œé”ç«äº‰ç“¶é¢ˆï¼Œéå¸¸é€‚åˆé«˜å¹¶å‘çš„èµ„é‡‘æµè½¬åœºæ™¯ã€‚</p>
<h2 data-id="heading-3">å››ã€ ä¼˜åŒ–ç­–ç•¥ä¸‰ï¼šDubbo Filter å®ç°å¹‚ç­‰æ€§ä¿éšœ</h2>
<p>åœ¨é«˜å¹¶å‘ä¼˜åŒ–ä¸­ï¼Œå¼‚æ­¥åŒ–å¾€å¾€ä¼´éšç€é‡å¤è°ƒç”¨çš„é£é™©ï¼ˆç½‘ç»œæŠ–åŠ¨å¯¼è‡´é‡è¯•ï¼‰ã€‚å› æ­¤ï¼Œ<strong>å¹‚ç­‰æ€§</strong>æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡ä¼˜åŒ–çš„åŸºçŸ³ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ Dubbo Filter æ¥ä¼˜é›…åœ°å®ç°å¹‚ç­‰æ£€æŸ¥ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<p>java</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Activate</span>(group = {<span class="hljs-title class_">Constants</span>.<span class="hljs-property">PROVIDER</span>})
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdempotentFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">RedisTemplate</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; redisTemplate;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Result</span> <span class="hljs-title function_">invoke</span>(<span class="hljs-params">Invoker&lt;?&gt; invoker, Invocation invocation</span>) {
        <span class="hljs-title class_">String</span> requestId = invocation.<span class="hljs-title function_">getAttachment</span>(<span class="hljs-string">"requestId"</span>);
        
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">StringUtils</span>.<span class="hljs-title function_">isBlank</span>(requestId)) {
            <span class="hljs-keyword">return</span> invoker.<span class="hljs-title function_">invoke</span>(invocation); <span class="hljs-comment">// æ²¡æœ‰ ID åˆ™æ”¾è¡Œ</span>
        }

        <span class="hljs-title class_">String</span> key = <span class="hljs-string">"dubbo:idempotent:"</span> + invocation.<span class="hljs-title function_">getMethodName</span>() + <span class="hljs-string">":"</span> + requestId;
        
        <span class="hljs-comment">// SETNX ä¿è¯åŸå­æ€§</span>
        <span class="hljs-title class_">Boolean</span> success = redisTemplate.<span class="hljs-title function_">opsForValue</span>().<span class="hljs-title function_">setIfAbsent</span>(key, <span class="hljs-string">"1"</span>, <span class="hljs-number">10</span>, <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">MINUTES</span>);
        
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Boolean</span>.<span class="hljs-property">FALSE</span>.<span class="hljs-title function_">equals</span>(success)) {
            <span class="hljs-comment">// è¯·æ±‚å·²å¤„ç†è¿‡ï¼Œç›´æ¥è¿”å›ï¼Œä¸æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppResponse</span>(<span class="hljs-string">"Duplicate Request"</span>, <span class="hljs-literal">null</span>);
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> invoker.<span class="hljs-title function_">invoke</span>(invocation);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            <span class="hljs-comment">// ä¸šåŠ¡å¤±è´¥ï¼Œåˆ é™¤ Key å…è®¸é‡è¯•ï¼ˆè§†ä¸šåŠ¡ç­–ç•¥è€Œå®šï¼‰</span>
            redisTemplate.<span class="hljs-title function_">delete</span>(key);
            <span class="hljs-keyword">throw</span> e;
        }
    }
}
</code></pre>
<h2 data-id="heading-4">äº”ã€ æ€»ç»“</h2>
<p>åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹è¿›è¡Œ Dubbo åˆ†å¸ƒå¼äº‹åŠ¡ä¼˜åŒ–ï¼Œæ ¸å¿ƒåœ¨äº<strong>é™ä½é”æŒæœ‰æ—¶é—´</strong>å’Œ<strong>å‡å°‘åŒæ­¥é˜»å¡</strong>ã€‚</p>
<ol>
<li>å¯¹äºéæ ¸å¿ƒå¼ºä¸€è‡´æµç¨‹ï¼Œé¦–é€‰<strong>å¼‚æ­¥åŒ–ï¼ˆMQ æˆ– Dubbo Asyncï¼‰</strong> ï¼Œæœ€å¤§é™åº¦æå‡ååã€‚</li>
<li>å¯¹äºæ ¸å¿ƒå¼ºä¸€è‡´æµç¨‹ï¼Œé‡‡ç”¨<strong>æœ¬åœ°æ¶ˆæ¯è¡¨</strong>è§„é¿å…¨å±€é”ç«äº‰ã€‚</li>
<li>æ— è®ºé‡‡ç”¨å“ªç§æ–¹æ¡ˆï¼Œå¿…é¡»æ„å»ºå®Œå–„çš„<strong>å¹‚ç­‰æ€§æœºåˆ¶</strong>ï¼ˆå¦‚ Redis + Filterï¼‰ä»¥åº”å¯¹é‡è¯•é£æš´ã€‚</li>
</ol>
<p>æ²¡æœ‰é“¶å¼¹ï¼Œåªæœ‰æœ€é€‚åˆä¸šåŠ¡æ¶æ„çš„æƒè¡¡å–èˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[kubernetes/k8så…¨æ ˆæŠ€æœ¯è®²è§£+ä¼ä¸šçº§å®æˆ˜é¡¹ç›®è¯¾ç¨‹]]></title>    <link>https://juejin.cn/post/7588001624904531987</link>    <guid>https://juejin.cn/post/7588001624904531987</guid>    <pubDate>2025-12-26T10:20:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588001624904531987" data-draft-id="7587998744294653958" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="kubernetes/k8så…¨æ ˆæŠ€æœ¯è®²è§£+ä¼ä¸šçº§å®æˆ˜é¡¹ç›®è¯¾ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T10:20:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·72942943223"/> <meta itemprop="url" content="https://juejin.cn/user/1998245912903995"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            kubernetes/k8så…¨æ ˆæŠ€æœ¯è®²è§£+ä¼ä¸šçº§å®æˆ˜é¡¹ç›®è¯¾ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1998245912903995/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·72942943223
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:20:05.000Z" title="Fri Dec 26 2025 10:20:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éšç€äº‘åŸç”ŸæŠ€æœ¯çš„æˆç†Ÿï¼ŒKubernetes (K8s) å·²æˆä¸ºäº‹å®ä¸Šçš„åŸºç¡€è®¾æ–½æ“ä½œç³»ç»Ÿã€‚ç„¶è€Œï¼ŒåŸç”Ÿçš„ K8s èµ„æºï¼ˆå¦‚ Deploymentã€Serviceï¼‰ä¸»è¦å…³æ³¨é€šç”¨å‹è´Ÿè½½çš„ç¼–æ’ã€‚åœ¨å¤„ç†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚æ•°æ®åº“é«˜å¯ç”¨åˆ‡æ¢ã€åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ã€è‡ªå®šä¹‰ä¸­é—´ä»¶ç®¡ç†ï¼‰æ—¶ï¼Œç›´æ¥ä½¿ç”¨ YAML é…ç½®å¾€å¾€åŠ›ä¸ä»å¿ƒã€‚æ­¤æ—¶ï¼Œ<strong>Kubernetes Operator æ¨¡å¼</strong>åº”è¿è€Œç”Ÿã€‚<strong>å­¦ä¹ åœ°å€ï¼špan.baidu.com/s/1WwerIZ_elz_FyPKqXAiZCA?pwd=waug</strong></p>
<p>æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ Operator å¼€å‘çš„æ ¸å¿ƒæˆ˜åœºï¼Œä»å®šä¹‰è‡ªå®šä¹‰èµ„æºï¼ˆCRDï¼‰åˆ°ç¼–å†™æ§åˆ¶å¾ªç¯ï¼Œæ‰‹æŠŠæ‰‹æ„å»ºä¸€ä¸ªä¼ä¸šçº§çš„ Operatorã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ æ¶æ„è®¾è®¡ç†å¿µï¼šä¸ºä½•éœ€è¦ Operatorï¼Ÿ</h2>
<p>Operator åŸºäºÂ <strong>Kubernetes æ§åˆ¶å™¨æ¨¡å¼</strong>ã€‚å®ƒé€šè¿‡â€œç›‘æ§å®é™…çŠ¶æ€ -&gt; è°ƒæ•´åå·® -&gt; ä½¿å®é™…çŠ¶æ€è¶‹å‘æœŸæœ›çŠ¶æ€â€çš„æ— é™å¾ªç¯æ¥ç®¡ç†å·¥ä½œè´Ÿè½½ã€‚</p>
<ul>
<li><strong>CRD (Custom Resource Definition)</strong> ï¼šæ‰©å±• K8s APIï¼Œå£°æ˜ä¸€ç§æ–°çš„èµ„æºç±»å‹ï¼ˆå¦‚Â <code>MySQLCluster</code>ï¼‰ã€‚</li>
<li><strong>Controller</strong>ï¼šä¸šåŠ¡é€»è¾‘çš„å¤§è„‘ï¼Œç›‘å¬ CRD çš„å˜åŒ–å¹¶æ‰§è¡Œæ“ä½œã€‚</li>
</ul>
<h2 data-id="heading-1">äºŒã€ å®æˆ˜ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ CRD</h2>
<p>å‡è®¾æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªç®€å•çš„Â <code>WebApp</code>Â èµ„æºï¼Œå®ƒèƒ½è‡ªåŠ¨ç®¡ç† Deployment å¹¶æ ¹æ®å‰¯æœ¬æ•°é…ç½® HPAã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ CRDã€‚</p>
<p><strong><code>crd/webapp.yaml</code></strong></p>
<p>yaml</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apiextensions.k8s.io/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">CustomResourceDefinition</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">webapps.example.com</span> <span class="hljs-comment"># èµ„æºåç§°ï¼Œå¤æ•°å½¢å¼</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">group:</span> <span class="hljs-string">example.com</span> <span class="hljs-comment"># API ç»„å</span>
  <span class="hljs-attr">versions:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">v1</span>
      <span class="hljs-attr">served:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">storage:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">schema:</span>
        <span class="hljs-attr">openAPIV3Schema:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
          <span class="hljs-attr">properties:</span>
            <span class="hljs-attr">spec:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
              <span class="hljs-attr">properties:</span>
                <span class="hljs-attr">replicas:</span>
                  <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
                <span class="hljs-attr">image:</span>
                  <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
                <span class="hljs-attr">port:</span>
                  <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
            <span class="hljs-attr">status:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
              <span class="hljs-attr">properties:</span>
                <span class="hljs-attr">availableReplicas:</span>
                  <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
  <span class="hljs-attr">scope:</span> <span class="hljs-string">Namespaced</span>
  <span class="hljs-attr">names:</span>
    <span class="hljs-attr">plural:</span> <span class="hljs-string">webapps</span>
    <span class="hljs-attr">singular:</span> <span class="hljs-string">webapp</span>
    <span class="hljs-attr">kind:</span> <span class="hljs-string">WebApp</span>
    <span class="hljs-attr">shortNames:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">wa</span>
</code></pre>
<p>åº”ç”¨è¯¥ YAML åï¼ŒK8s é›†ç¾¤ä¾¿è¯†åˆ«äº†Â <code>WebApp</code>Â è¿™ç§æ–°èµ„æºã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€ å®æˆ˜æ ¸å¿ƒï¼šä½¿ç”¨ Kubebuilder å¼€å‘ Controller</h2>
<p>è™½ç„¶æ‰‹å†™Â <code>client-go</code>Â ä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œä½†åœ¨ä¼ä¸šçº§å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¼ºçƒˆæ¨èä½¿ç”¨Â <strong>Kubebuilder</strong>Â æˆ–Â <strong>Operator SDK</strong>ï¼Œå®ƒä»¬æä¾›äº†è„šæ‰‹æ¶å’Œä»£ç ç”Ÿæˆå·¥å…·ï¼Œæå¤§åœ°æå‡äº†æ•ˆç‡ã€‚</p>
<h3 data-id="heading-3">1. åˆå§‹åŒ–é¡¹ç›®</h3>
<p>bash</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-css" lang="css"># å®‰è£… kubebuilder å
kubebuilder init <span class="hljs-attr">--domain</span> example<span class="hljs-selector-class">.com</span> <span class="hljs-attr">--repo</span> myapp/operator
kubebuilder create api <span class="hljs-attr">--group</span> webapp <span class="hljs-attr">--version</span> v1 <span class="hljs-attr">--kind</span> WebApp
</code></pre>
<h3 data-id="heading-4">2. ç¼–å†™ Reconcile é€»è¾‘</h3>
<p>è¿™æ˜¯ Operator çš„çµé­‚ã€‚æˆ‘ä»¬éœ€è¦åœ¨Â <code>controllers/webapp_controller.go</code>Â ä¸­å®ç°Â <code>Reconcile</code>Â æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„ä»»åŠ¡æ˜¯ï¼šè·å– WebApp å®ä¾‹ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰å¯¹åº”çš„ Deploymentï¼Œæ²¡æœ‰åˆ™åˆ›å»ºï¼Œæœ‰åˆ™æ›´æ–°ã€‚</p>
<p>go</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> controllers

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"fmt"</span>

	appsv1 <span class="hljs-string">"k8s.io/api/apps/v1"</span>
	corev1 <span class="hljs-string">"k8s.io/api/core/v1"</span>
	<span class="hljs-string">"k8s.io/apimachinery/pkg/api/errors"</span>
	<span class="hljs-string">"k8s.io/apimachinery/pkg/runtime"</span>
	ctrl <span class="hljs-string">"sigs.k8s.io/controller-runtime"</span>
	<span class="hljs-string">"sigs.k8s.io/controller-runtime/pkg/client"</span>

	myappv1 <span class="hljs-string">"myapp/operator/api/v1"</span>
)

<span class="hljs-comment">// å®šä¹‰æ³¨è§£ï¼Œç”¨äº OwnerReference</span>
<span class="hljs-keyword">const</span> finalizerName = <span class="hljs-string">"webapp.finalizer"</span>

<span class="hljs-comment">// WebAppReconciler ç»“æ„ä½“</span>
<span class="hljs-keyword">type</span> WebAppReconciler <span class="hljs-keyword">struct</span> {
	client.Client
	Scheme *runtime.Scheme
}

<span class="hljs-comment">// +kubebuilder:rbac:groups=webapp.example.com,resources=webapps,verbs=get;list;watch;create;update;patch;delete</span>
<span class="hljs-comment">// +kubebuilder:rbac:groups=webapp.example.com,resources=webapps/status,verbs=get;update;patch</span>
<span class="hljs-comment">// +kubebuilder:rbac:groups=apps,resources=deployments,verbs=get;list;watch;create;update;patch;delete</span>

<span class="hljs-comment">// Reconcile æ ¸å¿ƒè°ƒåé€»è¾‘</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *WebAppReconciler)</span></span> Reconcile(ctx context.Context, req ctrl.Request) (ctrl.Result, <span class="hljs-type">error</span>) {
	log := log.FromContext(ctx)

	<span class="hljs-comment">// 1. è·å– WebApp å®ä¾‹</span>
	<span class="hljs-keyword">var</span> webApp myappv1.WebApp
	<span class="hljs-keyword">if</span> err := r.Get(ctx, req.NamespacedName, &amp;webApp); err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">if</span> errors.IsNotFound(err) {
			log.Info(<span class="hljs-string">"WebApp resource not found. Ignoring since object must be deleted"</span>)
			<span class="hljs-keyword">return</span> ctrl.Result{}, <span class="hljs-literal">nil</span>
		}
		<span class="hljs-keyword">return</span> ctrl.Result{}, err
	}

	<span class="hljs-comment">// 2. æŸ¥æ‰¾å…³è”çš„ Deployment</span>
	foundDeploy := &amp;appsv1.Deployment{}
	err := r.Get(ctx, client.ObjectKey{Name: webApp.Name, Namespace: webApp.Namespace}, foundDeploy)

	<span class="hljs-comment">// 3. å¦‚æœ Deployment ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒ</span>
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &amp;&amp; errors.IsNotFound(err) {
		deploy := r.newDeployment(&amp;webApp)
		log.Info(<span class="hljs-string">"Creating a new Deployment"</span>, <span class="hljs-string">"Deployment.Namespace"</span>, deploy.Namespace, <span class="hljs-string">"Deployment.Name"</span>, deploy.Name)
		<span class="hljs-keyword">if</span> err := r.Create(ctx, deploy); err != <span class="hljs-literal">nil</span> {
			log.Error(err, <span class="hljs-string">"Failed to create new Deployment"</span>, <span class="hljs-string">"Deployment.Namespace"</span>, deploy.Namespace, <span class="hljs-string">"Deployment.Name"</span>, deploy.Name)
			<span class="hljs-keyword">return</span> ctrl.Result{}, err
		}
		<span class="hljs-comment">// åˆ›å»ºæˆåŠŸï¼Œé‡æ–°å…¥é˜Ÿç­‰å¾…çŠ¶æ€æ›´æ–°</span>
		<span class="hljs-keyword">return</span> ctrl.Result{Requeue: <span class="hljs-literal">true</span>}, <span class="hljs-literal">nil</span>
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		log.Error(err, <span class="hljs-string">"Failed to get Deployment"</span>)
		<span class="hljs-keyword">return</span> ctrl.Result{}, err
	}

	<span class="hljs-comment">// 4. æ›´æ–°çŠ¶æ€ (ç¤ºä¾‹ï¼šç®€å•åœ°å°†å‰¯æœ¬æ•°åŒæ­¥åˆ° Status)</span>
	webApp.Status.AvailableReplicas = foundDeploy.Status.AvailableReplicas
	<span class="hljs-keyword">if</span> err := r.Status().Update(ctx, &amp;webApp); err != <span class="hljs-literal">nil</span> {
		log.Error(err, <span class="hljs-string">"Failed to update WebApp status"</span>)
		<span class="hljs-keyword">return</span> ctrl.Result{}, err
	}

	<span class="hljs-keyword">return</span> ctrl.Result{}, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// newDeployment ç”Ÿæˆ Deployment å¯¹è±¡çš„è¾…åŠ©å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *WebAppReconciler)</span></span> newDeployment(cr *myappv1.WebApp) *appsv1.Deployment {
	labels := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>{<span class="hljs-string">"app"</span>: cr.Name}
	<span class="hljs-keyword">return</span> &amp;appsv1.Deployment{
		ObjectMeta: ctrl.ObjectMeta{
			Name:      cr.Name,
			Namespace: cr.Namespace,
		},
		Spec: appsv1.DeploymentSpec{
			Replicas: &amp;cr.Spec.Replicas,
			Selector: &amp;metav1.LabelSelector{
				MatchLabels: labels,
			},
			Template: corev1.PodTemplateSpec{
				ObjectMeta: metav1.ObjectMeta{Labels: labels},
				Spec: corev1.PodSpec{
					Containers: []corev1.Container{
						{
							Name:  <span class="hljs-string">"nginx"</span>,
							Image: cr.Spec.Image,
							Ports: []corev1.ContainerPort{
								{ContainerPort: cr.Spec.Port},
							},
						},
					},
				},
			},
		},
	}
}

<span class="hljs-comment">// SetupWithManager æ³¨å†Œæ§åˆ¶å™¨åˆ° Manager</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *WebAppReconciler)</span></span> SetupWithManager(mgr ctrl.Manager) <span class="hljs-type">error</span> {
	<span class="hljs-keyword">return</span> ctrl.NewControllerManagedBy(mgr).
		For(&amp;myappv1.WebApp{}).
		Owns(&amp;appsv1.Deployment{}). <span class="hljs-comment">// ç›‘æ§ Owned èµ„æº</span>
		Complete(r)
}
</code></pre>
<h2 data-id="heading-5">å››ã€ æœ¬åœ°è°ƒè¯•ä¸éƒ¨ç½²</h2>
<p>å¼€å‘å®Œæˆåï¼Œä¸è¦æ€¥ç€éƒ¨ç½²åˆ°é›†ç¾¤ï¼Œåˆ©ç”¨Â <code>make run</code>Â å¯ä»¥åœ¨æœ¬åœ°ç›´æ¥è¿è¡Œæ§åˆ¶å™¨ï¼Œå®ƒä¼šè¿æ¥åˆ°ä½ çš„Â <code>~/.kube/config</code>Â æŒ‡å®šçš„é›†ç¾¤ã€‚</p>
<p>bash</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-bash" lang="bash">make install <span class="hljs-comment"># å®‰è£… CRD</span>
make run     <span class="hljs-comment"># è¿è¡Œæ§åˆ¶å™¨</span>
</code></pre>
<p>æ­¤æ—¶ï¼Œåœ¨å¦ä¸€ä¸ªç»ˆç«¯åˆ›å»ºä¸€ä¸ªÂ <code>WebApp</code>Â å®ä¾‹ï¼š</p>
<p>yaml</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">webapp.example.com/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">WebApp</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">my-demo-app</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:1.19</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">80</span>
</code></pre>
<p>åº”ç”¨ YAML åï¼Œè§‚å¯Ÿæ§åˆ¶å™¨æ—¥å¿—ï¼Œä½ ä¼šå‘ç°å®ƒè‡ªåŠ¨åˆ›å»ºäº†å¯¹åº”çš„ Deploymentï¼Œå¹¶ç»´æŒäº† 3 ä¸ªå‰¯æœ¬ã€‚</p>
<h2 data-id="heading-6">äº”ã€ æ€»ç»“</h2>
<p>Kubernetes Operator å¼€å‘ä¸ä»…ä»…æ˜¯ä¸ºäº†è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œæ›´æ˜¯ä¸ºäº†å°†é¢†åŸŸçŸ¥è¯†ï¼ˆDomain Knowledgeï¼‰ç¼–ç è¿› K8sã€‚é€šè¿‡ CRD å®šä¹‰ä¸šåŠ¡æ¨¡å‹ï¼Œé€šè¿‡ Controller å®ç°è¿ç»´é€»è¾‘ï¼Œæˆ‘ä»¬æˆåŠŸåœ°å°† K8s å˜æˆäº†ä¸€ä¸ªå¯ç¼–ç¨‹çš„æ“ä½œç³»ç»Ÿã€‚æŒæ¡ Kubebuilder å’Œæ§åˆ¶å¾ªç¯æ¨¡å¼ï¼Œæ˜¯è¿ˆå‘äº‘åŸç”Ÿé«˜é˜¶å¼€å‘è€…çš„å¿…ç»ä¹‹è·¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»€ä¹ˆæ˜¯ RESTful APIï¼Ÿå‡­ä»€ä¹ˆèƒ½æµè¡Œ 20 å¤šå¹´ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7587811143110574131</link>    <guid>https://juejin.cn/post/7587811143110574131</guid>    <pubDate>2025-12-26T10:22:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587811143110574131" data-draft-id="7587811143110295603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»€ä¹ˆæ˜¯ RESTful APIï¼Ÿå‡­ä»€ä¹ˆèƒ½æµè¡Œ 20 å¤šå¹´ï¼Ÿ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T10:22:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜é±¼çš®"/> <meta itemprop="url" content="https://juejin.cn/user/2444938365386621"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»€ä¹ˆæ˜¯ RESTful APIï¼Ÿå‡­ä»€ä¹ˆèƒ½æµè¡Œ 20 å¤šå¹´ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2444938365386621/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜é±¼çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:22:38.000Z" title="Fri Dec 26 2025 10:22:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å°é˜¿å·´ï¼Œåˆšå…¥èŒçš„åç«¯ç¨‹åºå‘˜ï¼Œè´Ÿè´£ç»™å‰ç«¯çš„é˜¿èŠ±æä¾› API æ¥å£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6ce377e58e24f1299afd86db859a28c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=DZcbHBkizPpTpQcN8a3%2BF1VBoYM%3D" alt="" loading="lazy"/></p>
<p>ç»“æœä¸€å‘¨åï¼Œä½ è¢«é˜¿èŠ±æå¾—é¼»é’è„¸è‚¿ã€‚</p>
<p>é˜¿èŠ±ï¼šä½ æ˜¯æˆ‘è¿™è¾ˆå­è§è¿‡æ¥å£å†™çš„æœ€çƒ‚çš„ç¨‹åºå‘˜ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb1d6fa9fa09442194c61c7393691e03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=3TGdSmA15WiX10q0FVFr%2FFugccM%3D" alt="" loading="lazy"/></p>
<p>ä½ ä¸€è„¸å§”å±ˆæ‰¾åˆ°å·ç§° â€œå¼€å‘ä¹‹ç‹—â€ çš„é±¼çš®è¯‰è‹¦ï¼šæ¥å£ä¸æ˜¯èƒ½è·‘å°±è¡Œå—ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ffa8f2bc6da4a63b226aa28528a3ee1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=Sfolq0QPtNCUysgU%2FrtIJWe%2FOWI%3D" alt="" loading="lazy"/></p>
<p>é±¼çš®å˜²ç¬‘é“ï¼šå°é˜¿å·´ï¼Œä½ å¿…é¡»å¾—å­¦å­¦ <strong>RESTful API</strong> äº†ã€‚</p>
<p>ä½ æŒ æŒ å¤´ï¼šé˜¿å·´é˜¿å·´ï¼Œä»€ä¹ˆç©æ„ï¼Œæ²¡å¬è¯´è¿‡ï¼</p>
<p>â­ï¸ æ¨èè§‚çœ‹è§†é¢‘ç‰ˆï¼ŒåŠ¨ç”»æ›´ç”ŸåŠ¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbilibili.com%2Fvideo%2FBV1WFBXBmExs" target="_blank" title="https://bilibili.com/video/BV1WFBXBmExs" ref="nofollow noopener noreferrer">bilibili.com/video/BV1WFâ€¦</a></p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ RESTful APIï¼Ÿ</h2>
<p>é±¼çš®ï¼šé¦–å…ˆï¼ŒREST çš„å…¨ç§°æ˜¯ <strong>REpresentational State Transfer</strong>ï¼Œç¿»è¯‘è¿‡æ¥å« â€œè¡¨ç°å±‚çŠ¶æ€è½¬ç§»â€ã€‚</p>
<p>ä½ ä¸€è„¸æ‡µï¼šé±¼çš® gie gieï¼Œèƒ½è¯´äººè¯å—ï¼Ÿæˆ‘æ˜¯å‚»å­ï¼Œå¬ä¸å¤ªæ‡‚ã€‚</p>
<p>é±¼çš®ï¼šåˆ«æ€¥ï¼Œæˆ‘ç»™ä½ æ‹†å¼€æ¥è®²ï¼Œä¿è¯ä½ ç†è§£ã€‚</p>
<p><strong>REï¼ˆRepresentationalï¼‰</strong> è¡¨ç°å±‚ï¼Œæ˜¯æŒ‡ <strong>èµ„æºï¼ˆResourceï¼‰</strong> çš„è¡¨ç°å½¢å¼ã€‚</p>
<p>ä½ å¥½å¥‡äº†ï¼šä»€ä¹ˆæ˜¯èµ„æºï¼Ÿ</p>
<p>é±¼çš®ï¼šèµ„æºå°±æ˜¯ <strong>ä½ æƒ³è¦æ“ä½œçš„æ•°æ®å¯¹è±¡</strong>ã€‚</p>
<p>æ¯”å¦‚ç”¨æˆ·ã€å•†å“ã€æ–‡ç« ï¼Œè¿™äº›éƒ½æ˜¯èµ„æºã€‚ç”¨æˆ·åˆ—è¡¨æ˜¯ä¸€ä¸ªèµ„æºï¼ŒæŸä¸ªå…·ä½“çš„ç”¨æˆ·ä¹Ÿæ˜¯ä¸€ä¸ªèµ„æºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbdc3fe90bbe4a36a132182799c0be42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=brTVgNyWuBPwuJ7nXYdxoKTVbj0%3D" alt="" loading="lazy"/></p>
<p>è¡¨ç°å±‚æ˜¯æŒ‡èµ„æºå‘ˆç°å‡ºæ¥çš„å…·ä½“æ ¼å¼ï¼Œæ¯”å¦‚åŒä¸€ä¸ªç”¨æˆ·èµ„æºï¼Œå¯ä»¥ç”¨ JSON æ ¼å¼è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥ç”¨ XML æ ¼å¼è¿”å›ï¼Œè¿™å°±æ˜¯ä¸åŒçš„ â€œè¡¨ç°å½¢å¼â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6756cefbbf3f401685a580d5d98bc33f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=hNM9HOby2kf9gP1wlC%2Fm7LMgs4E%3D" alt="" loading="lazy"/></p>
<p><strong>Sï¼ˆStateï¼‰</strong> æ˜¯æŒ‡ â€œçŠ¶æ€â€ã€‚</p>
<p>ä½ ï¼šå•¥æ˜¯çŠ¶æ€ï¼Ÿ</p>
<p>é±¼çš®ï¼šæ¯”å¦‚ä½ ç™»å½•ç½‘ç«™åï¼ŒæœåŠ¡å™¨ä¼šåœ¨å†…å­˜ä¸­è®°ä½ â€œä½ æ˜¯è°â€ï¼Œä¹‹ååœ¨ç½‘ç«™ä¸Šæ“ä½œå°±ä¸ç”¨å†æ¬¡ç™»å½•äº†ï¼Œè¿™å°±æ˜¯ <strong>æœ‰çŠ¶æ€</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff47ab4eb0ed4fc097e373898454c797~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=TWl3tJuy1P5BRTGFITSIAP0ao5Y%3D" alt="" loading="lazy"/></p>
<p>è€Œ <strong>æ— çŠ¶æ€ï¼ˆStatelessï¼‰</strong> å‘¢ï¼Œå°±æ˜¯æœåŠ¡å™¨ä¸è®°å½•å®¢æˆ·ç«¯çš„ä»»ä½•ä¿¡æ¯ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3d4460b3fb04a66ad52364eebc6bc11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=VAev4hLttPp0XlbVjyjiRcL2N24%3D" alt="" loading="lazy"/></p>
<p>ä½ ï¼šå“¦å“¦å“¦ï¼Œå°±åƒä¸€ä¸ªäººå»é¤å…åƒé¥­ï¼ŒæœåŠ¡å‘˜ä¸è®°å¾—ä»–ä¸Šæ¬¡ç‚¹äº†ä»€ä¹ˆï¼Œæ¯æ¬¡éƒ½è¦é‡æ–°ç‚¹å•ï¼Œè¿™å°±æ˜¯æ— çŠ¶æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cc7cbc382934d2ba94d3205ae248ae7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=YFnwYowmsDmlSRJuu1d1x4CnQqc%3D" alt="" loading="lazy"/></p>
<p>åè¿‡æ¥ï¼ŒæœåŠ¡å‘˜è®°å¾—ä»–çˆ±åƒé±¼çš®ï¼Œè¿™å°±æ˜¯æœ‰çŠ¶æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a9fb4316b2342b7b3c4421faf6d3fa1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=tN3yFPneL7lZWoKD0430hSU%2BSR8%3D" alt="" loading="lazy"/></p>
<p>é±¼çš®ï¼šæ²¡é”™ï¼Œæ¥ä¸‹æ¥æ˜¯ <strong>Tï¼ˆTransferï¼‰</strong> è½¬ç§»ã€‚</p>
<p>è¦æ³¨æ„ï¼Œè½¬ç§»æ˜¯ <strong>åŒå‘</strong> çš„ï¼š</p>
<p>1ï¼‰å½“ä½ ç”¨ GET è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨æŠŠèµ„æºçš„çŠ¶æ€ï¼ˆæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯çš„ JSON æ•°æ®ï¼‰è½¬ç§»ç»™å®¢æˆ·ç«¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88c548241c874437aa54d411c4ab73cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=AhJgh8OCxAKyeOsEvxvRGxv%2B97w%3D" alt="" loading="lazy"/></p>
<p>2ï¼‰å½“ä½ ç”¨ POST/PUT è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯æŠŠèµ„æºçš„æ–°çŠ¶æ€ï¼ˆæ¯”å¦‚æ–°ç”¨æˆ·çš„ä¿¡æ¯ï¼‰è½¬ç§»ç»™æœåŠ¡å™¨ï¼Œä»è€Œæ”¹å˜æœåŠ¡å™¨ä¸Šèµ„æºçš„çŠ¶æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d3eb14fb11841f4a239bb45158ab5f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=bMv7EqBWc6H6LCn%2Bj9B%2BCf7piqo%3D" alt="" loading="lazy"/></p>
<p>ç»„åˆèµ·æ¥ï¼Œ<strong>RESTï¼ˆRepresentational State Transferï¼‰</strong> æ˜¯ä¸€ç§ <strong>è½¯ä»¶æ¶æ„é£æ ¼</strong>ï¼Œè®©å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè¿‡ç»Ÿä¸€çš„æ¥å£ï¼Œä»¥æ— çŠ¶æ€çš„æ–¹å¼ï¼Œäº’ç›¸ä¼ é€’èµ„æºçš„è¡¨ç°å±‚æ•°æ®ï¼ˆæ¯”å¦‚ JSONï¼‰ï¼Œæ¥æŸ¥è¯¢æˆ–è€…å˜æ›´èµ„æºçŠ¶æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8c54a74a16341cd9b12d80a9b3facdf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=83QAcf%2BybRIl99Hlmoqr3nltIgc%3D" alt="" loading="lazy"/></p>
<p>è€Œ <strong>ful</strong> æ˜¯ä¸ªåç¼€ï¼Œå°±åƒ powerfulï¼ˆå……æ»¡åŠ›é‡çš„ï¼‰ä¸€æ ·ï¼Œè¡¨ç¤º â€œå……æ»¡...ç‰¹æ€§çš„â€ã€‚</p>
<p>å› æ­¤ï¼Œ<strong>RESTful API æ˜¯æŒ‡ç¬¦åˆ REST æ¶æ„é£æ ¼çš„ API</strong>ï¼Œä¹Ÿå°±æ˜¯éµå¾ª REST åŸåˆ™è®¾è®¡å‡ºæ¥çš„æ¥å£ã€‚</p>
<p>æ³¨æ„ï¼Œå®ƒ <strong>ä¸æ˜¯åè®®ã€ä¸æ˜¯æ ‡å‡†ã€ä¸æ˜¯å¼ºåˆ¶è§„èŒƒ</strong>ï¼Œåªæ˜¯ä¸€ç§å»ºè®®çš„è®¾è®¡é£æ ¼ã€‚ä½ å¯ä»¥éµå¾ªï¼Œä¹Ÿå¯ä»¥ä¸éµå¾ªã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/447533a686004ee2a403269b8ba899a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=4CfCRX3G3WEIfiRj7tMw7d1NoXA%3D" alt="" loading="lazy"/></p>
<p>ä½ æŒ äº†æŒ å¤´ï¼šè¯´äº†ä¸€å¤§å †ï¼ŒRESTful API åˆ°åº•é•¿å•¥æ ·å•Šï¼Ÿ</p>
<p>é±¼çš®ï¼šä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ä½ è¦åšä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼Œå¯¹ç”¨æˆ·ä¿¡æ¯è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼Œç”¨ RESTful é£æ ¼çš„ API å°±é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">GET /users/123 Â  Â  Â  è·å– ID ä¸º 123 çš„ç”¨æˆ·
POST /users Â  Â  Â  Â  åˆ›å»ºæ–°ç”¨æˆ·
PUT /users/123 Â  Â  Â  æ›´æ–°ç”¨æˆ· 123
DELETE /users/123 Â  åˆ é™¤ç”¨æˆ· 123
</code></pre>
<p>ä½ çœ¼å‰ä¸€äº®ï¼šå“‡ï¼Œæ¯”æˆ‘å†™çš„æ•´é½å¤šäº†ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4eb52b50142d4144b4eaf86ed7360ea8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=6CGLcb254qbUEjQs%2BuK%2F7mHUcsI%3D" alt="" loading="lazy"/></p>
<p>å¿«å¸¦æˆ‘å­¦ä¸€ä¸‹ RESTful çš„å†™æ³•å§ï¼Œæˆ‘è¦è®©å‰ç«¯é˜¿èŠ±åˆ®ç›®ç›¸çœ‹ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e69125aee82c4f38b1d898032c66bf59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=%2F0c95sxHOwgcOPLoov%2F3B6c6dDk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">RESTful API å†™æ³•</h2>
<p>é±¼çš®ï¼šå¥½ï¼Œå¾ˆæœ‰å¿—æ°”ï¼æ¥ä¸‹æ¥æˆ‘ä¼šå¸¦ä½ ä¸€æ­¥æ­¥æ„é€ ä¸€ä¸ªå®Œæ•´çš„ RESTful APIã€‚åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œ<strong>å®¢æˆ·ç«¯å‘é€è¯·æ±‚</strong> å’Œ <strong>æœåŠ¡ç«¯ç»™å‡ºå“åº”</strong>ã€‚</p>
<h3 data-id="heading-2">å®¢æˆ·ç«¯è¯·æ±‚</h3>
<h4 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šç¡®å®šèµ„æº</h4>
<p>èµ„æºç”¨ URIï¼ˆç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰æ¥è¡¨ç¤ºã€‚æ ¸å¿ƒåŸåˆ™æ˜¯ï¼š<strong>ç”¨åè¯æ¥è¡¨ç¤ºèµ„æºï¼Œä¸ç”¨åŠ¨è¯</strong>ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œ<strong>æ¨èç”¨åè¯å¤æ•°è¡¨ç¤ºèµ„æºé›†åˆ</strong>ï¼Œæ¯”å¦‚ <code>/users</code> è¡¨ç¤ºç”¨æˆ·åˆ—è¡¨ã€<code>/products</code> è¡¨ç¤ºå•†å“åˆ—è¡¨ã€‚</p>
<p>å¦‚æœè¦æ“ä½œ <strong>å…·ä½“æŸä¸ªèµ„æºï¼Œå°±åŠ ä¸Š ID</strong>ï¼Œæ¯”å¦‚ <code>/users/123</code> è¡¨ç¤º ID ä¸º 123 çš„ç”¨æˆ·ã€‚</p>
<p>èµ„æºè¿˜ <strong>æ”¯æŒåµŒå¥—</strong>ï¼Œæ¯”å¦‚ <code>/users/123/orders</code> è¡¨ç¤ºç”¨æˆ· 123 çš„æ‰€æœ‰è®¢å•ã€‚</p>
<p>ä½ æƒ³äº†æƒ³ï¼šé‚£è¿˜å¯ä»¥æ›´æ·±å±‚çº§ä¹ˆï¼Ÿæ¯”å¦‚ <code>/users/123/orders/456</code> è¡¨ç¤ºç”¨æˆ· 123 çš„è®¢å• 456ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70c24953ec124d5e81aa9db5dd356e06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=2qoqLUQfwEa5mYNJBRz9RNR7%2FMA%3D" alt="" loading="lazy"/></p>
<p>é±¼çš®ç‚¹ç‚¹å¤´ï¼šä½ çš„ç†è§£å®Œå…¨æ­£ç¡®ï¼Œä½†ä¸å»ºè®®åµŒå¥—å±‚çº§å¤ªæ·±ã€‚</p>
<h4 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šé€‰æ‹©åŠ¨ä½œ</h4>
<p>ç¡®å®šäº†èµ„æºåï¼Œæ¥ä¸‹æ¥è¦é€‰æ‹© <strong>åŠ¨ä½œ</strong>ï¼Œä¹Ÿå°±æ˜¯ä½ æƒ³æ€ä¹ˆå¤„ç†è¿™ä¸ªèµ„æºã€‚</p>
<p>RESTful API ä¸»è¦é€šè¿‡ä¸åŒçš„ HTTP æ–¹æ³•æ¥è¡¨ç¤ºå¢åˆ æ”¹æŸ¥æ“ä½œï¼š</p>
<p>1ï¼‰GETï¼šæŸ¥è¯¢èµ„æº</p>
<ul>
<li><code>GET /users</code> æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</li>
<li><code>GET /users/123</code> æŸ¥è¯¢ ID ä¸º 123 çš„ç”¨æˆ·</li>
</ul>
<p>2ï¼‰POSTï¼šåˆ›å»ºèµ„æº</p>
<ul>
<li><code>POST /users</code> åˆ›å»ºæ–°ç”¨æˆ·</li>
</ul>
<p>3ï¼‰PUTï¼šå®Œæ•´æ›´æ–°èµ„æºï¼Œéœ€è¦æä¾›èµ„æºçš„æ‰€æœ‰å­—æ®µï¼Œå¤šæ¬¡æ‰§è¡Œç»“æœç›¸åŒï¼ˆå¹‚ç­‰æ€§ï¼‰</p>
<ul>
<li><code>PUT /users/123</code> å®Œæ•´æ›´æ–°ç”¨æˆ· 123</li>
</ul>
<p>4ï¼‰PATCHï¼šéƒ¨åˆ†æ›´æ–°èµ„æºï¼Œé€šå¸¸ç”¨äºæ›´ç²¾ç»†çš„æ“ä½œ</p>
<ul>
<li><code>PATCH /users/123</code> åªæ›´æ–°ç”¨æˆ· 123 çš„æŸäº›å­—æ®µ</li>
</ul>
<p>5ï¼‰DELETEï¼šåˆ é™¤èµ„æº</p>
<ul>
<li><code>DELETE /users/123</code> åˆ é™¤ç”¨æˆ· 123</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d03da46f6074f6ba6ed008dff783469~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=SbT3xb3SdUq6BCL9uZRcK0LUy0o%3D" alt="" loading="lazy"/></p>
<p>é±¼çš®ï¼šåˆ°è¿™é‡Œï¼Œä¸€ä¸ªåŸºæœ¬çš„ RESTful API è¯·æ±‚å°±æ„é€ å®Œæˆäº†ã€‚</p>
<p>ä½ ï¼šå°±è¿™ä¹ˆç®€å•ï¼Ÿæˆ‘ä¸æ»¡è¶³ï¼Œè¿˜æœ‰æ›´é«˜çº§çš„å†™æ³•å—ï¼Ÿ</p>
<p>é±¼çš®ï¼šå½“ç„¶~</p>
<h4 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ æŸ¥è¯¢æ¡ä»¶ï¼ˆå¯é€‰ï¼‰</h4>
<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æ›´ç²¾ç¡®åœ°ç­›é€‰æ•°æ®ï¼Œè¿™æ—¶å€™å¯ä»¥åŠ æŸ¥è¯¢å‚æ•°ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>åˆ†é¡µï¼š<code>/users?page=2&amp;limit=10</code> æŸ¥è¯¢ç¬¬ 2 é¡µï¼Œæ¯é¡µ 10 æ¡ç”¨æˆ·æ•°æ®</li>
<li>è¿‡æ»¤ï¼š<code>/users?gender=male&amp;age=25</code> æŸ¥è¯¢æ€§åˆ«ä¸ºç”·ã€å¹´é¾„ 25 çš„ç”¨æˆ·</li>
<li>æ’åºï¼š<code>/users?sort=created_at&amp;order=desc</code> æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ç”¨æˆ·</li>
</ul>
<p>ä½ ï¼šç­‰ç­‰ï¼Œè¿™æŸ¥è¯¢å‚æ•°è·Ÿ RESTful æœ‰å•¥å…³ç³»ï¼Ÿæ­£å¸¸çš„è¯·æ±‚ä¸éƒ½æ˜¯è¿™ä¹ˆå†™å—ï¼Ÿ</p>
<p>é±¼çš®ï¼šç¡®å®ï¼ŒæŸ¥è¯¢å‚æ•°æœ¬èº«ä¸æ˜¯ RESTful ç‰¹æœ‰çš„ã€‚ä½† RESTful é£æ ¼å¼ºè°ƒ <strong>æŠŠç­›é€‰ã€æ’åºã€åˆ†é¡µè¿™äº›æ“ä½œï¼Œéƒ½é€šè¿‡ URL å‚æ•°æ¥è¡¨è¾¾</strong>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b381b9911e454a5ebe13d67a17592e71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=uXLsFpekVblSVwf%2F%2Fez41w519GM%3D" alt="" loading="lazy"/></p>
<p>è€Œä¸æ˜¯åœ¨è¯·æ±‚ä½“é‡Œä¼ ä¸€å †å¤æ‚çš„ JSON å¯¹è±¡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dabaf9c8a1c44c2cb12043c20eb9b1f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=3%2FnrEslW1ZHhF9MjFG%2FP8h1pnQw%3D" alt="" loading="lazy"/></p>
<p>è¿™æ ·ä¸€æ¥ï¼ŒURL æ›´æ¸…æ™°ï¼Œè€Œä¸”æµè§ˆå™¨ã€CDNã€ä»£ç†æœåŠ¡å™¨éƒ½èƒ½ç›´æ¥æ ¹æ® URL æ¥ç¼“å­˜å“åº”ç»“æœã€‚æ¯”å¦‚ <code>/users?page=1</code> å’Œ <code>/users?page=2</code> æ˜¯ä¸¤ä¸ªä¸åŒçš„ URLï¼Œå¯ä»¥åˆ†åˆ«ç¼“å­˜ã€‚ä½†å¦‚æœæŠŠå‚æ•°æ”¾åœ¨è¯·æ±‚ä½“é‡Œï¼ŒURL éƒ½æ˜¯ <code>/users</code>ï¼Œç¼“å­˜å°±æ²¡æ³•åŒºåˆ†äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4a352ab720b4999b2f37c03ebf3625a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=C8l3HJh%2FPpKwcQ01ot1ctoCGy0c%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-6">ç¬¬å››æ­¥ï¼šç‰ˆæœ¬æ§åˆ¶ï¼ˆå¯é€‰ï¼‰</h4>
<p>éšç€ä¸šåŠ¡å‘å±•ï¼Œæ¥å£å¯èƒ½éœ€è¦å‡çº§ã€‚ä¸ºäº†ä¸å½±å“è€ç”¨æˆ·ï¼Œå¯ä»¥åœ¨ URI ä¸­æ ‡æ˜ç‰ˆæœ¬ï¼š</p>
<ul>
<li><code>/v1/users</code> ç¬¬ä¸€ç‰ˆç”¨æˆ·æ¥å£</li>
<li><code>/v2/users</code> ç¬¬äºŒç‰ˆç”¨æˆ·æ¥å£</li>
</ul>
<p>è¿™æ ·ï¼Œè€ç”¨æˆ·ç»§ç»­ç”¨ v1ï¼Œæ–°ç”¨æˆ·ç”¨ v2ï¼Œäº’ä¸å½±å“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43c5bfc8807046ceacad19c58eac1478~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=XLwsm9hZEZO8DOa8q6YvcA4c%2BbU%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-7">ç¬¬äº”æ­¥ï¼šä¿æŒæ— çŠ¶æ€</h4>
<p>æ­¤å¤–ï¼Œè¿˜è®°å¾—æˆ‘ä»¬å‰é¢è®² REST é‡Œçš„ <strong>STï¼ˆState Transferï¼‰</strong> å—ï¼Ÿ</p>
<p>RESTful çš„æ ¸å¿ƒåŸåˆ™ä¹‹ä¸€æ˜¯ <strong>æ— çŠ¶æ€ï¼ˆStatelessï¼‰</strong> ï¼Œå®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚å¿…é¡»åŒ…å«æ‰€æœ‰å¿…è¦ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ä¸è®°å½•å®¢æˆ·ç«¯çŠ¶æ€ã€‚</p>
<p>æ¯”å¦‚ç”¨æˆ·ç™»å½•åï¼Œä¸æ˜¯è®©æœåŠ¡å™¨è®°ä½ â€œä½ å·²ç»ç™»å½•äº†â€ï¼Œè€Œæ˜¯æ¯æ¬¡è¯·æ±‚éƒ½è¦å¸¦ä¸Šèº«ä»½å‡­è¯ï¼ˆTokenï¼‰ï¼Œåƒè¿™æ ·ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">GET</span> <span class="hljs-operator">/</span>orders
Header: <span class="hljs-keyword">Authorization</span>: Bearer xxx
</code></pre>
<p>è¿™ä¹ˆåšçš„å¥½å¤„æ˜¯ï¼ŒæœåŠ¡å™¨ä¸ç”¨è®°å½•è°ç™»å½•äº†ã€è°æ²¡ç™»å½•ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚è¿™æ ·ä¸€æ¥ï¼Œä½ æƒ³åŠ å¤šå°‘å°æœåŠ¡å™¨éƒ½è¡Œï¼Œä»»ä½•ä¸€å°éƒ½èƒ½å¤„ç†è¯·æ±‚ï¼Œè½»æ¾å®ç°è´Ÿè½½å‡è¡¡å’Œæ¨ªå‘æ‰©å±•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e20a52135d24453810ec8f0da1cca58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=5bh%2BRECfPn3udvDwVYS5cZFksZQ%3D" alt="" loading="lazy"/></p>
<p>ä½ ç‚¹å¤´å¦‚æ£è’œï¼šæ€ªä¸å¾—æˆ‘è°ƒç”¨ AI å¤§æ¨¡å‹ API çš„æ—¶å€™ï¼Œå°±è¦ä¼ è¿™ä¸ª Tokenï¼</p>
<h3 data-id="heading-8">æœåŠ¡ç«¯å“åº”</h3>
<p>é±¼çš®ï¼šè®²å®Œå®¢æˆ·ç«¯è¯·æ±‚ï¼Œå†æ¥çœ‹æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œè¯¥æ€ä¹ˆå“åº”ï¼Ÿ</p>
<p>ä¸»è¦æ³¨æ„ 2 ç‚¹ï¼š</p>
<h4 data-id="heading-9">1ã€ç»Ÿä¸€å“åº”æ ¼å¼</h4>
<p>ç›®å‰å¤§å¤šæ•° RESTful API åŸºæœ¬éƒ½ç”¨ <strong>JSON</strong> æ ¼å¼ï¼Œå› ä¸ºè½»é‡ã€å®¹æ˜“è§£æã€‚</p>
<pre><code class="hljs language-perl" lang="perl">{
Â <span class="hljs-string">"id"</span>:Â <span class="hljs-number">123</span>,
Â <span class="hljs-string">"name"</span>:Â <span class="hljs-string">"å°é˜¿å·´"</span>,
Â <span class="hljs-string">"email"</span>:Â <span class="hljs-string">"aba@codefather.cn"</span>
}
</code></pre>
<p>ä½†è¿™å¹¶ä¸æ˜¯å¼ºåˆ¶çš„ï¼Œä¹Ÿå¯ä»¥ç”¨ XMLã€HTML ç­‰æ ¼å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b7e50d2622c4ceca17bed65dda46b61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=PLFKo6L7XOjYXOTBFQzqwoCAPwk%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-10">2ã€è¿”å›åˆé€‚çš„ HTTP çŠ¶æ€ç </h4>
<p>å“åº”è¦å¸¦ä¸Šåˆé€‚çš„çŠ¶æ€ç ï¼Œè®©å®¢æˆ·ç«¯ä¸€çœ¼çœ‹æ‡‚å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6a61128e00042abb9dae4164934cd5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=Untwgg2ZxZy5kIGEaxSA0VJtiQQ%3D" alt="" loading="lazy"/></p>
<p>HTTP çŠ¶æ€ç æœ‰å¾ˆå¤šï¼Œå¤§ä½“å¯ä»¥åˆ†ä¸º 5 ç±»ï¼š</p>
<ul>
<li>
<p><strong>1xx ç³»åˆ—</strong>ï¼šä¿¡æ¯æç¤ºï¼ˆç”¨å¾—å°‘ï¼Œäº†è§£å³å¯ï¼‰</p>
</li>
<li>
<p><strong>2xx ç³»åˆ—</strong>ï¼šæˆåŠŸ</p>
<ul>
<li>200 OKï¼šè¯·æ±‚æˆåŠŸï¼Œæ­£å¸¸è¿”å›æ•°æ®ï¼ˆç”¨äº GETã€PUTã€PATCHï¼‰</li>
</ul>
</li>
<li>
<p><strong>3xx ç³»åˆ—</strong>ï¼šé‡å®šå‘</p>
<ul>
<li>301 Moved Permanentlyï¼šèµ„æºæ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®</li>
<li>302 Foundï¼šèµ„æºä¸´æ—¶ç§»åŠ¨</li>
</ul>
</li>
<li>
<p><strong>4xx ç³»åˆ—</strong>ï¼šå®¢æˆ·ç«¯é”™è¯¯</p>
<ul>
<li>400 Bad Requestï¼šè¯·æ±‚å‚æ•°æ ¼å¼é”™è¯¯</li>
<li>401 Unauthorizedï¼šæœªéªŒè¯èº«ä»½ï¼Œéœ€è¦ç™»å½•</li>
<li>403 Forbiddenï¼šå·²è®¤è¯ä½†æ²¡æœ‰æƒé™è®¿é—®</li>
<li>404 Not Foundï¼šèµ„æºä¸å­˜åœ¨</li>
<li>405 Method Not Allowedï¼šè¯·æ±‚æ–¹æ³•ä¸è¢«å…è®¸</li>
</ul>
</li>
<li>
<p><strong>5xx ç³»åˆ—</strong>ï¼šæœåŠ¡å™¨é”™è¯¯</p>
<ul>
<li>500 Internal Server Errorï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯</li>
<li>502 Bad Gatewayï¼šç½‘å…³é”™è¯¯</li>
<li>503 Service Unavailableï¼šæœåŠ¡æš‚æ—¶ä¸å¯ç”¨</li>
<li>504 Gateway Timeoutï¼šç½‘å…³è¶…æ—¶</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdd68d611a8c4829bd4582d9c5a06557~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=73QTt5%2BidsdF7w70AJhvWK2A2pY%3D" alt="" loading="lazy"/></p>
<p>ä½ æç„¶å¤§æ‚Ÿï¼šæ‡‚äº†ï¼Œä»¥åå‰ç«¯çœ‹åˆ° 500ï¼Œå°±çŸ¥é“æ˜¯æˆ‘åç«¯çš„é”…ï¼›çœ‹åˆ° 400ï¼Œå°±çŸ¥é“æ˜¯å¥¹è‡ªå·±ä¼ å‚ä¼ é”™äº†ã€‚è°ä¹Ÿåˆ«æƒ³ç”©é”…ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0f28ee490644aab9cdd5fa77973b6ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=FpXsGaU40IzFrSc8trw8fzed05A%3D" alt="" loading="lazy"/></p>
<p>é±¼çš®ç‚¹ç‚¹å¤´ï¼šä¸é”™ï¼Œä»¥ä¸Šè¿™äº›ï¼Œå°±æ˜¯ RESTful API çš„åŸºæœ¬å†™æ³•ã€‚ä½ å­¦ä¼šäº†å—ï¼Ÿ</p>
<p>ä½ ï¼šå­¦åºŸäº†ï¼Œå­¦åºŸäº†ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67e47a5b22f146edb6a7617619d32e2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=jmtC%2FuOuMqWH3LntbAeR2epi4OU%3D" alt="" loading="lazy"/></p>
<p>é±¼çš®ï¼šé‚£æˆ‘æ¥è€ƒè€ƒä½ ï¼Œä¸‹é¢å“ªä¸ªæ˜¯æ ‡å‡†çš„ RESTful APIï¼Ÿ</p>
<ul>
<li>A. <code>GET /getUsers</code></li>
<li>B. <code>GET /user/list</code></li>
<li>C. <code>POST /users/query</code></li>
<li>D. <code>GET /users/delete/123</code></li>
</ul>
<p>ä½ å¼€å¿ƒåœ°æ€ªå«èµ·æ¥ï¼šé˜¿å·´ï¼Œè‚¯å®šæ˜¯ C å•Šï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f252eb1b88e548268d725309c3b120d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=GXv6Mb1u1BzYCtX%2FMvAdu5vZcbw%3D" alt="" loading="lazy"/></p>
<p>é±¼çš®ï¼šé”™ï¼Œ<strong>4 ä¸ªå…¨éƒ½ä¸æ ‡å‡†</strong>ï¼</p>
<ul>
<li>A ç”¨äº†åŠ¨è¯ <code>getUsers</code></li>
<li>B ç”¨äº†å•æ•° <code>user</code> å’ŒåŠ¨è¯ <code>list</code></li>
<li>C ç”¨ POST æŸ¥è¯¢ï¼Œè¿˜å¸¦äº†åŠ¨è¯ <code>query</code></li>
<li>D ç”¨ GET åˆ é™¤ï¼Œè¿˜å¸¦äº†åŠ¨è¯ <code>delete</code></li>
</ul>
<p>ä½ æ‰äº†æ ¹å¤´å‘ï¼šåŸæ¥è¿™ä¹ˆä¸¥æ ¼ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f51311e22d204492a5713d7c430ffe89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=e9aG0BS39oHtwovSD64QsC8SC2g%3D" alt="" loading="lazy"/></p>
<p>ç­‰ç­‰ï¼Œä½ è¯´ RESTful ä¸èƒ½ç”¨åŠ¨è¯ï¼Œä½†æœ‰äº›æ“ä½œä¸æ˜¯æ ‡å‡†çš„å¢åˆ æ”¹æŸ¥å•Šï¼Œæ¯”å¦‚ç”¨æˆ·è¦æ”¯ä»˜è®¢å•ï¼Œè¯¥æ€ä¹ˆè®¾è®¡æ¥å£å‘¢ï¼Ÿæ˜¯è¦ç”¨ <code>POST /orders/123/pay</code>ï¼Ÿ</p>
<p>é±¼çš®æ‘‡å¤´ï¼šä½ å·²ç»å¾ˆåŠªåŠ›äº†ï¼Œä½† pay æ˜¯åŠ¨è¯ã€‚æ›´æ ‡å‡†çš„è®¾è®¡æ˜¯æŠŠ â€œæ”¯ä»˜â€ è¡Œä¸ºçœ‹ä½œ <strong>åˆ›å»º</strong> ä¸€ä¸ªæ”¯ä»˜è®°å½•ï¼Œç”¨åè¯è€Œä¸æ˜¯åŠ¨è¯ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">POST /orders/123/payments
</code></pre>
<p>æ¯”å¦‚è¿™ä¸ªè¯·æ±‚ï¼Œè¡¨ç¤ºä¸ºè®¢å• 123 åˆ›å»ºä¸€ç¬”æ”¯ä»˜è®°å½•ã€‚</p>
<p>ä½ åˆæ‰äº†æ ¹å¤´å‘ï¼šå¦™å•Šï¼Œæ€ªä¸å¾—è¯´è‹±è¯­å¯¹å­¦ç¼–ç¨‹æœ‰å¸®åŠ©å‘¢ï¼Œæˆ‘æ‚Ÿäº†ï¼Œæˆ‘æ‚Ÿäº†ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d58cd58e4bda4ad0ab69706d4bf734d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=Bp%2BdIjDF3u8RnJz7sliYzS6DwLI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">RESTful çš„å…­å¤§çº¦æŸ</h2>
<p>é±¼çš®ï¼šä¸é”™ï¼Œå­¦åˆ°è¿™é‡Œä½ å·²ç»æŒæ¡äº† RESTful çš„ 80%ï¼Œèƒ½å¤Ÿå®é™…åº”ç”¨äº†ã€‚æ¥ä¸‹æ¥çš„çŸ¥è¯†ï¼Œä½ åªéœ€ç®€å•äº†è§£ä¸€ä¸‹ï¼Œå°±èƒ½æ‹¿å»å’Œé¢è¯•å®˜å¹ç‰›çš®äº†ã€‚</p>
<p>æ¯”å¦‚å¾ˆå¤šåŒå­¦éƒ½ä¸çŸ¥é“ï¼ŒRESTful å…¶å®æœ‰ 6 ä¸ªçº¦æŸæ¡ä»¶ï¼š</p>
<ol start="0">
<li>Client-Serverï¼ˆå®¢æˆ·ç«¯-æœåŠ¡å™¨åˆ†ç¦»ï¼‰ï¼šå‰åç«¯å„å¹²å„çš„æ´»ï¼Œå‰ç«¯è´Ÿè´£å±•ç¤ºï¼Œåç«¯è´Ÿè´£æ•°æ®å¤„ç†ï¼Œäº’ä¸å¹²æ‰°ã€‚</li>
<li>Statelessï¼ˆæ— çŠ¶æ€ï¼‰ï¼šæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ŒæœåŠ¡å™¨ä¸ä¿å­˜å®¢æˆ·ç«¯çš„ä¼šè¯ä¿¡æ¯ï¼Œæ‰€æœ‰å¿…è¦ä¿¡æ¯éƒ½åœ¨è¯·æ±‚ä¸­æºå¸¦ã€‚</li>
<li>Cacheableï¼ˆå¯ç¼“å­˜ï¼‰ï¼šæœåŠ¡å™¨çš„å“åº”å¯ä»¥è¢«æ ‡è®°ä¸ºå¯ç¼“å­˜æˆ–ä¸å¯ç¼“å­˜ï¼Œå®¢æˆ·ç«¯å¯ä»¥é‡ç”¨ç¼“å­˜æ•°æ®ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›ï¼Œæå‡æ€§èƒ½ã€‚</li>
<li>Layered Systemï¼ˆåˆ†å±‚ç³»ç»Ÿï¼‰ï¼šå®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“ç›´æ¥è¿çš„æ˜¯æœåŠ¡å™¨è¿˜æ˜¯ä¸­é—´å±‚ï¼Œç³»ç»Ÿå¯ä»¥çµæ´»åœ°åŠ ä»£ç†ã€ç½‘å…³ã€è´Ÿè½½å‡è¡¡å™¨ç­‰ã€‚</li>
<li>Uniform Interfaceï¼ˆç»Ÿä¸€æ¥å£ï¼‰ï¼šæ‰€æœ‰èµ„æºéƒ½é€šè¿‡ç»Ÿä¸€çš„æ¥å£è®¿é—®ï¼Œé™ä½ç†è§£æˆæœ¬ï¼Œæé«˜å¯ç»´æŠ¤æ€§ã€‚</li>
<li>Code-On-Demandï¼ˆæŒ‰éœ€ä»£ç ï¼‰ï¼šå¯é€‰é¡¹ï¼ŒæœåŠ¡å™¨å¯ä»¥è¿”å›å¯æ‰§è¡Œä»£ç ï¼ˆæ¯”å¦‚ JavaScriptï¼‰ç»™å®¢æˆ·ç«¯æ‰§è¡Œï¼Œä½†å®é™…å·¥ä½œä¸­å¾ˆå°‘ç”¨ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69d17ee3c17241eebfbf2b2c52103485~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=RuKSoV%2F7Aa17kUki146WWSTaF4Y%3D" alt="" loading="lazy"/></p>
<p>ä½ ç›´æ¥å¬æ‡µäº†ï¼šé˜¿å·´é˜¿å·´ï¼Œè¿™ä¹ˆå¤šçº¦æŸï¼Œæˆ‘å¿…é¡»å…¨éµå®ˆå—ï¼Ÿ</p>
<p>é±¼çš®ï¼šå¯ä»¥ä¸ç”¨ï¼ŒRESTful åªæ˜¯ä¸€ç§ API çš„ <strong>å»ºè®®é£æ ¼</strong>ã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œå¾ˆå°‘æœ‰ API èƒ½å®Œç¾ç¬¦åˆæ‰€æœ‰çº¦æŸï¼Œå¤§å®¶å¯ä»¥çµæ´»è°ƒæ•´ï¼Œç”šè‡³ä»€ä¹ˆæ¥å£éƒ½ç”¨ <strong>POST + åŠ¨è¯</strong> ä¸€æŠŠæ¢­ã€‚åªè¦å›¢é˜Ÿè¾¾æˆä¸€è‡´ã€ç”¨å¾—èˆ’æœå°±è¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e09ad09b904480b9a6cc1423e79f4de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=jLDlr66CHUBBy4s9On81e9G1KrQ%3D" alt="" loading="lazy"/></p>
<p>å°±åƒåˆšæ‰é‚£ä¸ªæ”¯ä»˜è®¢å•çš„ä¾‹å­ï¼Œ<code>POST /orders/123/payments</code> è™½ç„¶ç¬¦åˆ RESTful è§„èŒƒï¼Œä½†æœ‰åŒå­¦ä¼šè§‰å¾— <code>POST /orders/123/pay</code> æ›´ç›´è§‚æ˜“æ‡‚ï¼Œä¹Ÿæ²¡é—®é¢˜ã€‚</p>
<p>ä¸è¿‡ç°é˜¶æ®µï¼Œæˆ‘å»ºè®®ä½ å…ˆå…»æˆéµå¾ª RESTful çš„å¥½ä¹ æƒ¯ï¼Œç­‰ç§¯ç´¯äº†ç»éªŒï¼Œå†æ ¹æ®å®é™…æƒ…å†µçµæ´»è°ƒæ•´ã€‚</p>
<h3 data-id="heading-12">æ€ä¹ˆå¿«é€Ÿå®ç° RESTful APIï¼Ÿ</h3>
<p>ä½ ï¼šå‘œå‘œï¼Œä½†æˆ‘åªæ˜¯ä¸ªå°é˜¿å·´ï¼ŒèƒŒä¸ä¸‹æ¥è¿™äº›å†™æ³•ï¼Œæˆ‘æ€•è‡ªå·±å†™ç€å†™ç€å°±ä¸è§„èŒƒäº†ï¼Œæ€ä¹ˆåŠå•Šï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6abe0edc9364bf498f9dac4a8fc42b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=3xTfIIbNV8HIt%2B3tuD2QUU%2B9tDI%3D" alt="" loading="lazy"/></p>
<p>é±¼çš®ï¼šåˆ«æ‹…å¿ƒï¼Œæœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥å¸®ä½ å¿«é€Ÿå®ç°å’Œæ£€æŸ¥ RESTful APIã€‚</p>
<h4 data-id="heading-13">1ã€ä½¿ç”¨å¼€å‘æ¡†æ¶</h4>
<p>å‡ ä¹æ‰€æœ‰ä¸»æµå¼€å‘æ¡†æ¶éƒ½æ”¯æŒ RESTful API çš„å¼€å‘ï¼Œå®ƒä»¬èƒ½å¸®ä½ è‡ªåŠ¨å¤„ç†å¾ˆå¤šç»†èŠ‚ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>Java çš„ Spring Bootï¼šé€šè¿‡ <code>@GetMapping("/users")</code>ã€<code>@PostMapping("/users")</code> ç­‰æ³¨è§£ï¼Œä½ åªéœ€è¦å†™ä¸€è¡Œä»£ç å°±èƒ½å®šä¹‰ç¬¦åˆ RESTful é£æ ¼çš„è·¯ç”±ã€‚æ¡†æ¶ä¼šè‡ªåŠ¨æŠŠå¯¹è±¡è½¬æˆ JSONã€è®¾ç½®æ­£ç¡®çš„ HTTP çŠ¶æ€ç ï¼Œä½ éƒ½ä¸ç”¨æ“å¿ƒã€‚</li>
<li>Python çš„ Django REST Frameworkï¼šä½ åªéœ€è¦å®šä¹‰ä¸€ä¸ªæ•°æ®æ¨¡å‹ï¼ˆæ¯”å¦‚ User ç±»ï¼‰ï¼Œæ¡†æ¶å°±èƒ½è‡ªåŠ¨ç”Ÿæˆ <code>GET /users</code>ã€<code>POST /users</code>ã€<code>PUT /users/123</code>ã€<code>DELETE /users/123</code> è¿™ä¸€æ•´å¥— RESTful æ¥å£ï¼Œå¤§å¹…å‡å°‘ä»£ç é‡ã€‚</li>
<li>Go çš„ Gin ï¼šä¸“é—¨ä¸º RESTful API è®¾è®¡ï¼Œè¯­æ³•éå¸¸ç®€æ´ã€‚æ¯”å¦‚ <code>router.GET("/users/:id", getUser)</code> å°±èƒ½ç»‘å®šä¸€ä¸ª GET è¯·æ±‚ï¼Œè‡ªåŠ¨ä» URL ä¸­æå– ID å‚æ•°ï¼Œè¿˜èƒ½é€šè¿‡è·¯ç”±åˆ†ç»„æŠŠ <code>/api/v1/users</code> å’Œ <code>/api/v2/users</code> è½»æ¾åˆ†å¼€ç®¡ç†ã€‚</li>
</ul>
<p>è¿™äº›æ¡†æ¶è™½ç„¶ä¸å¼ºåˆ¶ä½ éµå¾ª RESTfulï¼Œä½†ç”¨å®ƒä»¬çš„ç‰¹æ€§ï¼Œå¼€å‘èµ·æ¥æ—¢è½»æ¾åˆè§„èŒƒï¼Œå¸®ä½ çœæ‰å¤§é‡é‡å¤ä»£ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b62a3ce438784a67b18fe8d97413dab0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=v3TiB5AG%2FSj1CgZf5F92OrI1Efg%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-14">2ã€ä½¿ç”¨ IDE æ’ä»¶</h4>
<p>æ¯”å¦‚ IDEA çš„ RESTful Toolkit æ’ä»¶ï¼Œå¯ä»¥å¿«é€ŸæŸ¥çœ‹å’Œæµ‹è¯•æ¥å£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1af51a5408f64f9e921ddec822f78de8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=RrgHfDC9HDwX1yoJDrr6dhFdzkk%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰ VSCode çš„ REST Client æ’ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ç¼–è¾‘å™¨é‡Œæµ‹è¯•æ¥å£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de577624a76f45449002cfddc64fbd24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=OT%2BxMw3SFF%2BKtQyQfsm8Epj0VK4%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-15">3ã€åˆ©ç”¨ AI ç”Ÿæˆ</h4>
<p>RESTful æœ‰æ˜ç¡®çš„è®¾è®¡è§„èŒƒï¼Œè€Œ AI æœ€æ“…é•¿å¤„ç†è¿™ç§æœ‰ç« å¯å¾ªçš„ä¸œè¥¿ï¼</p>
<p>æ¯”å¦‚ç›´æ¥è®© Cursor å¸®ä½ ç”¨ Spring Boot å†™ä¸€ä¸ªç”¨æˆ·ç®¡ç†çš„ RESTful APIï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c426af5486c34c85b289f81e47756007~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=R9CzvMFv%2FBdtsTe4N8J78Y7eQLM%3D" alt="" loading="lazy"/></p>
<p>ä½ åªéœ€è¦é˜¿å·´é˜¿å·´å‡ ä¸‹ï¼Œå®ƒå°±èƒ½ç”Ÿæˆè§„èŒƒçš„ä»£ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76ba0909bc5449279575f60a42487cdf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=%2FfMrU7xZnsBzfyoSY7QgEHoJXQo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-16">4ã€ç”Ÿæˆæ¥å£æ–‡æ¡£</h4>
<p>å†™å®Œæ¥å£åï¼Œè¿˜å¯ä»¥ç”¨ Swagger è¿™ç±»å·¥å…·è‡ªåŠ¨ç”Ÿæˆæ¼‚äº®çš„æ¥å£æ–‡æ¡£ï¼Œç›´æ¥ç”©ç»™å‰ç«¯ï¼Œå¯¹æ–¹ä¸€çœ‹å°±æ‡‚ï¼Œè¿˜èƒ½åœ¨çº¿æµ‹è¯•æ¥å£ï¼Œçœå»å¤§é‡æ²Ÿé€šæˆæœ¬ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71352e1ea3ba46cc9b52bf7721d89dc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=vEJg3mLmhv0mQhj7ARhKlAklcls%3D" alt="" loading="lazy"/></p>
<p>ä½ ç¬‘å¾—åƒä¸ªå­©å­ï¼šè¿™ä¹ˆä¸€çœ‹ï¼ŒRESTful API ä¸ä»…è®©æ¥å£è§„èŒƒç»Ÿä¸€ï¼Œè¿˜èƒ½æé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½å›¢é˜Ÿæ²Ÿé€šæˆæœ¬ï¼Œå‰åç«¯éƒ½èˆ’æœï¼çˆ½çˆ½çˆ½ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a98fe27c415147d4b8bcad3262a8070e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=gT9EtZkx3bJFWtZK%2FCkye9jtIMY%3D" alt="" loading="lazy"/></p>
<p>é±¼çš®ç‚¹ç‚¹å¤´ï¼šæ²¡é”™ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ RESTful èƒ½æˆä¸ºä¸šç•Œä¸»æµçš„åŸå› ã€‚</p>
<p>ä½ ï¼šå­¦ä¼šäº†å­¦ä¼šäº†ï¼Œæˆ‘è¿™å°±å»é‡æ„æ‰€æœ‰æ¥å£ï¼Œè®©å‰ç«¯é˜¿èŠ±åˆ®ç›®ç›¸çœ‹ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/959b8802be244df5b7eb2eb6c27122be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=MdlCm%2B0Ij1TIBniqSwBkSoC5Y24%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-17">ç»“å°¾</h3>
<p>ä¸€å‘¨åï¼Œä½ æŠŠæ‰€æœ‰æ¥å£é‡æ„æˆäº† RESTful é£æ ¼ã€‚</p>
<p>å‰ç«¯é˜¿èŠ±æ‰“å¼€æ–°çš„æ¥å£æ–‡æ¡£ï¼Œçœ¼ç›äº®äº†ï¼šå°é˜¿å·´ï¼Œä½ å±…ç„¶å¼€çªäº†ï¼Ÿï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34be819a81ae44989f8ed4d8c1d60f9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=77JVnw8rOKUVDvnkVONdRNQNFjk%3D" alt="" loading="lazy"/></p>
<p>ä½ å¾—æ„åœ°ç¬‘äº†ï¼šé‚£æ˜¯ï¼Œæˆ‘å¯æ˜¯å­¦è¿‡ RESTful çš„ç”·äºº~ é˜¿èŠ±ï¼Œæ™šä¸Šè¦ä¸è¦ä¸€èµ·ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef1780246f2d4adda2c117786232a45f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=xqPvKNdd%2Fwg3ukOOyml35wBUsW4%3D" alt="" loading="lazy"/></p>
<p>é˜¿èŠ±æœä½ åäº†å£å”¾æ²«ï¼šå‘¸ï¼Œä½ åªä¸è¿‡å­¦äº†ä¸€ç§ API é£æ ¼å°±å¾—æ„æ´‹æ´‹ã€‚é˜¿å¤å“¥å“¥ä¸ä»…ç²¾é€š RESTfulï¼Œè¿˜èƒ½æ‰‹æ’• GraphQL å’Œ gRPC å‘¢ï¼Œä½ è¡Œä¹ˆï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03852fb77ac24100a107529b7e97034c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=1F6AzFKEVI%2FKRHSBp%2Fe5q1EY4lk%3D" alt="" loading="lazy"/></p>
<p>ä½ éš¾å—å¾—ä¸è¡Œï¼šå•¥å•¥å•¥ï¼Œè¿™éƒ½æ˜¯å•¥å•Šâ€¦â€¦ é±¼çš® gie gie å¿«æ¥æ•‘æˆ‘ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b928eda1c715495a956988b42c919b30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349358&amp;x-signature=Le9Au012AhPofzRoL6rKnJ3JSmA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-18">æ›´å¤š</h2>
<p>ğŸ’» ç¼–ç¨‹å­¦ä¹ äº¤æµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fcode-nav" target="_blank" title="https://github.com/liyupi/code-nav" ref="nofollow noopener noreferrer">ç¼–ç¨‹å¯¼èˆª</a> ğŸ“ƒ ç®€å†å¿«é€Ÿåˆ¶ä½œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Flaoyujianli" target="_blank" title="https://github.com/liyupi/laoyujianli" ref="nofollow noopener noreferrer">è€é±¼ç®€å†</a> âœï¸ é¢è¯•åˆ·é¢˜ç¥å™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fmianshiya" target="_blank" title="https://github.com/liyupi/mianshiya" ref="nofollow noopener noreferrer">é¢è¯•é¸­</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«ä¼ ç»Ÿä½æ•ˆï¼AgentRun å¦‚ä½•ç”¨ Serverless + Agent æ‰“é€ ç°ä»£åŒ–çš„èˆ†æƒ…åˆ†æç³»ç»Ÿï¼Ÿ]]></title>    <link>https://juejin.cn/post/7587998744294719494</link>    <guid>https://juejin.cn/post/7587998744294719494</guid>    <pubDate>2025-12-26T10:25:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587998744294719494" data-draft-id="7587998744294424582" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«ä¼ ç»Ÿä½æ•ˆï¼AgentRun å¦‚ä½•ç”¨ Serverless + Agent æ‰“é€ ç°ä»£åŒ–çš„èˆ†æƒ…åˆ†æç³»ç»Ÿï¼Ÿ"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-12-26T10:25:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«ä¼ ç»Ÿä½æ•ˆï¼AgentRun å¦‚ä½•ç”¨ Serverless + Agent æ‰“é€ ç°ä»£åŒ–çš„èˆ†æƒ…åˆ†æç³»ç»Ÿï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:25:17.000Z" title="Fri Dec 26 2025 10:25:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ±Ÿæ˜±</p>
<p>èˆ†æƒ…åˆ†ææ˜¯ä¼ä¸šæ„ŸçŸ¥å¸‚åœºè„‰æã€é¢„è­¦å…¬å…³å±æœºçš„â€œå¬è¯Šå™¨â€ï¼Œç„¶è€Œä¼ ç»Ÿçš„èˆ†æƒ…åˆ†æç³»ç»Ÿæ›´åƒæ˜¯ä¸€ä¸ªä¸ªâ€œæ‰‹å·¥ä½œåŠâ€ï¼Œé¢ä¸´æ•°æ®æ”¶é›†æ•ˆç‡ä½ã€åˆ†ææ·±åº¦ä¸å¤Ÿã€å®æ—¶æ€§å·®ç­‰é—®é¢˜ï¼Œç»å¸¸åé¦ˆä¹‹åï¼Œç­‰ä¼ä¸šæ‹¿åˆ°æŠ¥å‘Šæ—¶ï¼Œèˆ†è®ºçƒ­ç‚¹æ—©å·²è½¬ç§»ï¼Œé”™è¿‡æœ€ä½³æ—¶é—´ã€‚è¿™äº›æŒ‘æˆ˜ï¼Œæ­£æ˜¯æ‰€æœ‰èˆ†æƒ…ç³»ç»Ÿå¼€å‘è€…å…±åŒçš„ç—›ç‚¹ã€‚</p>
<p>æœ¬æ–¹æ¡ˆå°†åŸºäºçœŸå®çš„ä»£ç å®ç°ï¼Œå‘æ‚¨ä»‹ç»å¦‚ä½•ä½¿ç”¨å‡½æ•°è®¡ç®— AgentRun å¹³å°ï¼Œæ„å»ºä¸€ä¸ªç°ä»£åŒ–çš„â€œèˆ†æƒ…åˆ†æä¸“å®¶â€ï¼Œ<strong>è¯¥ç³»ç»Ÿä¸ä»…å®ç°äº†ä»æ•°æ®é‡‡é›†åˆ°æŠ¥å‘Šç”Ÿæˆçš„å¯è§†åŒ–ã€å…¨æµç¨‹è‡ªåŠ¨åŒ–ï¼Œæ›´é€šè¿‡æµå¼æ¶æ„ï¼Œè®©æ´å¯Ÿå®æ—¶å‘ˆç°ã€‚</strong></p>
<h2 data-id="heading-0">ç³»ç»Ÿæ¶æ„è®¾è®¡</h2>
<p>æ•´ä¸ªèˆ†æƒ…åˆ†æç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ä»£ç ä¸¥æ ¼æ§åˆ¶æµç¨‹æ‰§è¡Œé¡ºåºï¼Œè€Œéä¾èµ– LLM çš„è‡ªä¸»å†³ç­–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2b33e0db21440e8a5e7692c9e80eee4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=e17egUD1fN2nxegUH1NiMJ9QW9o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">å¿«é€Ÿä½“éªŒå’Œæ•ˆæœé¢„è§ˆ</h2>
<p>åœ¨æ·±å…¥æŠ€æœ¯ç»†èŠ‚å‰ï¼Œæˆ‘ä»¬å…ˆç›´è§‚æ„Ÿå—ä¸€ä¸‹è¿™å¥—ç³»ç»Ÿçš„æ•ˆæœã€‚é€šè¿‡ AgentRun å¹³å°ï¼Œåªéœ€ç®€å•å‡ æ­¥å³å¯å®Œæˆéƒ¨ç½²ã€‚</p>
<h3 data-id="heading-2">å¿«é€Ÿéƒ¨ç½²</h3>
<p>æ‰“å¼€é˜¿é‡Œäº‘å‡½æ•°è®¡ç®— AgentRun æ¢ç´¢é¡µé¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8251150fb8fe44c3b0ce7b9bcca453af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=XigYs%2B%2FF2WIkqzNq7XkuS6etzWU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥æ‰¾åˆ°èˆ†æƒ…åˆ†æä¸“å®¶æ¡ˆä¾‹ï¼Œå¹¶ç‚¹å‡»å¡ç‰‡å³ä¸‹è§’è¿›è¡Œéƒ¨ç½²ï¼Œå¡«å†™å®Œæ•´å¯¹åº”çš„å‚æ•°ä¿¡æ¯å³å¯ç‚¹å‡»å³ä¸‹è§’ç¡®å®šåˆ›å»ºæŒ‰é’®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e08339566414b16ae6d04f225f5403a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=h2f8rKDyFb4nUbxzwjurgt%2Ff8W4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ­¤å¤„éœ€è¦ç¨ç­‰ç‰‡åˆ»ï¼Œåˆ›å»ºå®Œä¹‹åå¯ä»¥çœ‹åˆ°ä½“éªŒåœ°å€ï¼Œä¹Ÿå¯ä»¥è·³è½¬åˆ°è¿è¡Œæ—¶ä¸æ²™ç®±çœ‹åˆ°éƒ¨ç½²å®Œçš„ Agentï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37b6f6d2b3394d4d902053ffa8c127be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=qaaZpWZiU82BqewpWU8nd9M5rRw%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f94cdee53e543a49247c8e2bf19ba3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=hKzteXD4wlEFD%2F1wXxPuCxp4i5E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é¦–é¡µåœ°å€å³å³ä¾§Â <code>main_web</code> åœ°å€ï¼Œç›´æ¥æŸ¥çœ‹çº¿ä¸Šæ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04adff44127141059fa20f50a065734b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=xBW%2BaqF3Ff%2FS2qrqm%2BPughaIq64%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥æŸ¥çœ‹è¯¥åº”ç”¨æ¡ˆä¾‹ä»£ç ï¼Œå¹¶è¿›è¡Œåœ¨çº¿äºŒæ¬¡å¼€å‘ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aff65e6b0fbf472383cfea7e62dc41f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=Gjct%2BWU%2BX0GtLt0iKi38vEHqzrA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-3">æ•ˆæœä½“éªŒ</h3>
<p>æ‰“å¼€ä½“éªŒåœ°å€ï¼Œå¯ä»¥çœ‹åˆ°èˆ†æƒ…åˆ†æä¸“å®¶é¡µé¢ï¼Œæ­¤æ—¶å¯ä»¥è¾“å…¥ä¸€ä¸ªè¯è¿›è¡Œèˆ†æƒ…åˆ†æï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e85d5f4bb89e4cc49bc5fb2d8bd6c99b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=VqRXCcfCOQMNs6tRSPeG8ypMvZQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ†æè¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿä¼šè°ƒç”¨å‡½æ•°è®¡ç®— AgentRun çš„ Sandbox æ²™ç®±ï¼ˆç¡®åˆ‡è¯´æ˜¯åˆ›å»ºçš„æ—¶å€™ï¼Œé€‰æ‹©çš„æµè§ˆå™¨æ²™ç®±ï¼‰ï¼Œå¯ä»¥çœ‹åˆ° AI æ§åˆ¶äº‘ä¸Šçš„æµè§ˆå™¨è¿›è¡Œæ•°æ®æ£€ç´¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da85bf3d6e474aeb83af3090b2cbb8e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=AtItZdsToxHhYgp9iLLbZ3I%2B8NA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®Œæˆä¹‹åï¼Œç³»ç»Ÿä¼šæ•´ç†æ‰€æœ‰é‡‡é›†åˆ°çš„æ•°æ®å’Œä¿¡æ¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d657c650fbd4964b94801ac83e67c9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=nBd6IoDZ5%2Bm1yr1Vj8iViXjDiYQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ€ç»ˆç”Ÿæˆæ–‡å­—+å›¾è¡¨çš„â€œå¯è§†åŒ–æŠ¥å‘Šâ€ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41ee44786a594c39a7d3d9a1e6c0ae14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=4ud8UbB2u6GmL0VNgdL3oi%2FlHW8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3eb00b156cc44b8693697aa9034b5a81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=mgJR4KqfHaD9Hzd6NWL0K0Zm0ug%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-4">AgentRun ç›¸æ¯”ä¼ ç»Ÿæ–¹æ¡ˆçš„æ ¸å¿ƒä¼˜åŠ¿</h2>
<h3 data-id="heading-5">å®‰å…¨éš”ç¦»çš„æ‰§è¡Œç¯å¢ƒ</h3>
<p>ä¼ ç»Ÿèˆ†æƒ…ç³»ç»Ÿé€šå¸¸ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œçˆ¬è™«ç¨‹åºï¼Œé¢ä¸´ç€å®‰å…¨é£é™©å’Œç¯å¢ƒæ±¡æŸ“é—®é¢˜ã€‚å½“æŸä¸ªç½‘ç«™çš„åçˆ¬æœºåˆ¶è§¦å‘æ—¶ï¼Œå¯èƒ½å½±å“æ•´ä¸ªæœåŠ¡å™¨çš„ç¨³å®šæ€§ã€‚è€Œ AgentRun Sandbox æä¾›äº†å®Œå…¨éš”ç¦»çš„æµè§ˆå™¨ç¯å¢ƒï¼Œå³ä½¿å•ä¸ªé‡‡é›†ä»»åŠ¡å‡ºç°é—®é¢˜ï¼Œä¹Ÿä¸ä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“è¿è¡Œã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">create_browser_sandbox</span>() -&gt;Â <span class="hljs-type">Optional</span>[BrowserSandbox]:
Â  Â Â <span class="hljs-string">"""åˆ›å»ºéš”ç¦»çš„æµè§ˆå™¨ç¯å¢ƒï¼Œé¿å…ç¯å¢ƒæ±¡æŸ“"""</span>
Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  sandbox =Â <span class="hljs-keyword">await</span>Â Sandbox.create_async(
Â  Â  Â  Â  Â  Â  template_type=TemplateType.BROWSER,
Â  Â  Â  Â  Â  Â  template_name=agentrun_browser_sandbox_name,
Â  Â  Â  Â  )
Â  Â  Â  Â  _sandboxes[sandbox.sandbox_id] = sandbox
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â sandbox
Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â  Â  Â  Â Â <span class="hljs-comment"># å•ä¸ªSandboxå¤±è´¥ä¸å½±å“å…¶ä»–å®ä¾‹</span>
Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>Â SandboxCreationError(<span class="hljs-string">f"åˆ›å»º Sandbox å¤±è´¥:Â <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h3 data-id="heading-6">çœŸå®æµè§ˆå™¨ç¯å¢ƒæ¨¡æ‹Ÿ</h3>
<p>ä¼ ç»Ÿçˆ¬è™«æ–¹æ¡ˆé€šå¸¸ä½¿ç”¨ç®€å•çš„ HTTP è¯·æ±‚åº“ï¼Œå®¹æ˜“è¢«ç°ä»£ç½‘ç«™çš„åçˆ¬æœºåˆ¶è¯†åˆ«å’Œæ‹¦æˆªã€‚AgentRun Sandbox æä¾›çš„æ˜¯çœŸå®çš„ Chrome æµè§ˆå™¨ç¯å¢ƒï¼Œèƒ½å¤Ÿå®Œæ•´æ‰§è¡Œ JavaScriptã€å¤„ç†å¤æ‚çš„é¡µé¢äº¤äº’ï¼Œå¤§å¤§æé«˜äº†æ•°æ®é‡‡é›†çš„æˆåŠŸç‡ã€‚ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç³»ç»Ÿé€šè¿‡ Playwright è¿æ¥åˆ°çœŸå®çš„ Chrome å®ä¾‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â <span class="hljs-title">async_playwright</span>()Â <span class="hljs-keyword">as</span>Â playwright:
Â  Â  browser</span> =Â <span class="hljs-keyword">await</span>Â playwright.chromium.connect_over_cdp(sandbox.get_cdp_url())
Â  Â  context = browser.contexts[<span class="hljs-number">0</span>]Â <span class="hljs-keyword">if</span>Â browser.contextsÂ <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">await</span>Â browser.new_context()
Â  Â  page = context.pages[<span class="hljs-number">0</span>]Â <span class="hljs-keyword">if</span>Â context.pagesÂ <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">await</span>Â context.new_page()
</code></pre>
<h3 data-id="heading-7">å¯è§†åŒ–è°ƒè¯•èƒ½åŠ›</h3>
<p>å‡½æ•°è®¡ç®— AgentRun æœ€ç‹¬ç‰¹çš„ä¼˜åŠ¿æ˜¯æä¾›äº†å®æ—¶çš„ VNC é¢„è§ˆåŠŸèƒ½ï¼Œå¼€å‘è€…å’Œç”¨æˆ·å¯ä»¥å®æ—¶è§‚å¯Ÿæµè§ˆå™¨çš„æ“ä½œè¿‡ç¨‹ã€‚è¿™ç§é€æ˜æ€§åœ¨ä¼ ç»Ÿæ–¹æ¡ˆä¸­æ˜¯æ— æ³•å®ç°çš„ï¼Œå®ƒä¸ä»…æœ‰åŠ©äºè°ƒè¯•å’Œä¼˜åŒ–é‡‡é›†é€»è¾‘ï¼Œè¿˜èƒ½è®©ç”¨æˆ·ç›´è§‚åœ°äº†è§£ç³»ç»Ÿçš„å·¥ä½œçŠ¶æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6f57bcd347d48788a3d988d39013957~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=vOQWwMQljnWyZPeKCmaGs0cfHUs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-8">å¼¹æ€§æ‰©å±•å’Œæ•…éšœæ¢å¤</h3>
<p>ä¼ ç»Ÿç³»ç»Ÿåœ¨é¢ä¸´å¤§è§„æ¨¡é‡‡é›†ä»»åŠ¡æ—¶ï¼Œå¾€å¾€éœ€è¦å¤æ‚çš„åˆ†å¸ƒå¼æ¶æ„è®¾è®¡ã€‚è€Œå‡½æ•°è®¡ç®— AgentRun å¤©ç„¶æ”¯æŒå¤š Sandbox å¹¶è¡Œå¤„ç†ï¼Œç³»ç»Ÿå¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€åˆ›å»ºå’Œé”€æ¯æµè§ˆå™¨å®ä¾‹ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå½“æŸä¸ªå®ä¾‹å‡ºç°æ•…éšœæ—¶ï¼Œç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹å¹¶é‡å»ºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">recreate_sandbox_if_closed</span>(<span class="hljs-params">sandbox_id:Â <span class="hljs-built_in">str</span>, error_message:Â <span class="hljs-built_in">str</span></span>):
Â  Â Â <span class="hljs-string">"""æ™ºèƒ½æ•…éšœæ£€æµ‹å’Œè‡ªåŠ¨é‡å»ºæœºåˆ¶"""</span>
Â  Â  closed_error_patterns = [
Â  Â  Â  Â Â <span class="hljs-string">"Target page, context or browser has been closed"</span>,
Â  Â  Â  Â Â <span class="hljs-string">"Browser has been closed"</span>,
Â  Â  Â  Â Â <span class="hljs-string">"Connection closed"</span>,
Â  Â  ]
Â  Â  is_closed_error =Â <span class="hljs-built_in">any</span>(pattern.lower()Â <span class="hljs-keyword">in</span>Â error_message.lower()Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span>Â patternÂ <span class="hljs-keyword">in</span>Â closed_error_patterns)
Â  Â Â <span class="hljs-keyword">if</span>Â is_closed_error:
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â remove_sandbox(sandbox_id)
Â  Â  Â  Â  new_sandbox =Â <span class="hljs-keyword">await</span>Â create_browser_sandbox()
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â new_sandbox
</code></pre>
<p>AgentRun Sandbox é‡‡ç”¨é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—å®ç°ï¼Œæ”¯æŒç™¾ä¸‡æ²™ç®±æ¨¡æ¿ï¼ˆå‡½æ•°çº§åˆ«ï¼‰å¹¶å‘è¿è¡Œï¼ŒServerless å¼¹æ€§ä¼¸ç¼©ï¼Œæ”¯æŒ 3.5w+ æ²™ç®±/åˆ†é’Ÿï¼Œæ”¯æŒç¼©å®¹åˆ° 0ï¼ŒæŒ‰è¯·æ±‚æ„ŸçŸ¥è°ƒåº¦ã€‚</p>
<h2 data-id="heading-9">åç«¯æ ¸å¿ƒå®ç°</h2>
<h3 data-id="heading-10">Agent å·¥å…·é“¾è®¾è®¡</h3>
<p>ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªåŸºäº PydanticAI çš„æ™ºèƒ½ä½“ï¼Œè¯¥æ™ºèƒ½ä½“åŒ…å«å››ä¸ªå…³é”®å·¥å…·ï¼Œæ¯ä¸ªå·¥å…·è´Ÿè´£èˆ†æƒ…åˆ†æçš„ä¸åŒé˜¶æ®µã€‚Agent çš„è®¾è®¡éµå¾ªä¸¥æ ¼çš„æ‰§è¡Œé¡ºåºï¼Œç¡®ä¿æ•°æ®æ”¶é›†çš„å®Œæ•´æ€§å’Œåˆ†æçš„å‡†ç¡®æ€§ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">opinion_agent</span> = Agent(
Â  Â  agentrun_model,
Â  Â  <span class="hljs-attr">deps_type</span>=StateDeps,
Â  Â  <span class="hljs-attr">system_prompt</span>=<span class="hljs-string">"""ä½ æ˜¯èˆ†æƒ…åˆ†æç³»ç»Ÿçš„æ‰§è¡Œè€…ã€‚
ä½ çš„ä»»åŠ¡æ˜¯æŒ‰ç…§ä»¥ä¸‹ä¸¥æ ¼æµç¨‹æ‰§è¡Œèˆ†æƒ…åˆ†æï¼š
ã€æµç¨‹ã€‘
1. æ”¶åˆ°å…³é”®è¯åï¼Œè°ƒç”¨ collect_data å·¥å…·æ”¶é›†æ•°æ®
2. æ•°æ®æ”¶é›†å®Œæˆåï¼Œè°ƒç”¨ analyze_data å·¥å…·åˆ†ææ•°æ®
3. åˆ†æå®Œæˆåï¼Œè°ƒç”¨ write_report å·¥å…·æ’°å†™æŠ¥å‘Š
4. æŠ¥å‘Šå®Œæˆåï¼Œè°ƒç”¨ render_html å·¥å…·ç”Ÿæˆ HTML
ã€é‡è¦è§„åˆ™ã€‘
- å¿…é¡»æŒ‰é¡ºåºè°ƒç”¨å·¥å…·
- æ¯ä¸ªå·¥å…·åªè°ƒç”¨ä¸€æ¬¡
- ä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤
- ä¸è¦ç¼–é€ æ•°æ®
"""</span>,
Â  Â  <span class="hljs-attr">retries</span>=<span class="hljs-number">3</span>,
)
</code></pre>
<h3 data-id="heading-11">æµå¼è¾“å‡ºä¸å®æ—¶åé¦ˆ</h3>
<p>ä¼ ç»Ÿèˆ†æƒ…ç³»ç»Ÿé€šå¸¸é‡‡ç”¨æ‰¹å¤„ç†æ¨¡å¼ï¼Œç”¨æˆ·éœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´æ‰èƒ½çœ‹åˆ°ç»“æœã€‚è€ŒåŸºäºå‡½æ•°è®¡ç®— AgentRun çš„ç³»ç»Ÿå®ç°äº†çœŸæ­£çš„æµå¼è¾“å‡ºï¼Œç”¨æˆ·å¯ä»¥å®æ—¶è§‚å¯Ÿæ¯ä¸ªå¤„ç†æ­¥éª¤çš„è¿›å±•ã€‚è¿™ç§å®æ—¶æ€§ä¸ä»…æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œä¹Ÿä¾¿äºåŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">push_state_event</span>(<span class="hljs-params">run_id:Â <span class="hljs-built_in">str</span>, state: OpinionState</span>):
Â  Â Â <span class="hljs-string">"""å®æ—¶æ¨é€çŠ¶æ€æ›´æ–°ï¼Œç”¨æˆ·æ— éœ€ç­‰å¾…"""</span>
Â  Â  event = StateSnapshotEvent(
Â  Â  Â  Â Â <span class="hljs-built_in">type</span>=EventType.STATE_SNAPSHOT,
Â  Â  Â  Â  snapshot=state.model_dump(),
Â  Â  Â  Â  timestamp=<span class="hljs-built_in">int</span>(time.time() *Â <span class="hljs-number">1000</span>)
Â  Â  )
Â  Â Â <span class="hljs-keyword">await</span>Â event_manager.push_event(run_id, event)
</code></pre>
<h3 data-id="heading-12">æ™ºèƒ½æ•°æ®è´¨é‡æ§åˆ¶</h3>
<p>ç³»ç»Ÿå®ç°äº†ä¸¥æ ¼çš„æ•°æ®è´¨é‡æ§åˆ¶æœºåˆ¶ï¼Œé€šè¿‡å¤šç»´åº¦è¯„ä¼°ç¡®ä¿æ”¶é›†åˆ°çš„æ•°æ®å…·æœ‰è¾ƒé«˜çš„ç›¸å…³æ€§å’Œä»·å€¼ã€‚è¿™ç§è´¨é‡æ§åˆ¶åœ¨ä¼ ç»Ÿç³»ç»Ÿä¸­å¾€å¾€æ˜¯ç¼ºå¤±çš„ï¼Œå¯¼è‡´å¤§é‡å™ªéŸ³æ•°æ®å½±å“åˆ†æç»“æœã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">evaluate_relevance</span>(<span class="hljs-params">keyword:Â <span class="hljs-built_in">str</span>, title:Â <span class="hljs-built_in">str</span>, snippet:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-built_in">float</span>:
Â  Â Â <span class="hljs-string">"""å¤šç»´åº¦ç›¸å…³æ€§è¯„ä¼°ï¼Œç¡®ä¿æ•°æ®è´¨é‡"""</span>
Â  Â  text =Â <span class="hljs-string">f"<span class="hljs-subst">{title}</span>Â <span class="hljs-subst">{snippet}</span>"</span>
Â  Â  text_lower = text.lower()
Â  Â Â <span class="hljs-comment"># æ£€æµ‹å…³é”®è¯åŒ¹é…åº¦</span>
Â  Â  has_chinese_keyword =Â <span class="hljs-built_in">any</span>(<span class="hljs-string">'\u4e00'</span>Â &lt;= char &lt;=Â <span class="hljs-string">'é¿¿'</span>Â <span class="hljs-keyword">for</span>Â charÂ <span class="hljs-keyword">in</span>Â keyword)
Â  Â  result_has_chinese =Â <span class="hljs-built_in">any</span>(<span class="hljs-string">'\u4e00'</span>Â &lt;= char &lt;=Â <span class="hljs-string">'é¿¿'</span>Â <span class="hljs-keyword">for</span>Â charÂ <span class="hljs-keyword">in</span>Â text)
Â  Â Â <span class="hljs-comment"># ä¸­æ–‡å…³é”®è¯å¿…é¡»åœ¨ç»“æœä¸­æœ‰ä¸­æ–‡å†…å®¹</span>
Â  Â Â <span class="hljs-keyword">if</span>Â has_chinese_keywordÂ <span class="hljs-keyword">and</span>Â <span class="hljs-keyword">not</span>Â result_has_chinese:
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-number">0.0</span>
Â  Â Â <span class="hljs-comment"># æ’é™¤æ˜æ˜¾çš„æ— å…³ç½‘ç«™</span>
Â  Â  irrelevant_patterns = [
Â  Â  Â  Â Â <span class="hljs-string">"calculator"</span>,Â <span class="hljs-string">"deepseek"</span>,Â <span class="hljs-string">"chegg"</span>,Â <span class="hljs-string">"stackoverflow"</span>,Â 
Â  Â  Â  Â Â <span class="hljs-string">"ç¿»è¯‘"</span>,Â <span class="hljs-string">"dictionary"</span>,Â <span class="hljs-string">"è¯å…¸"</span>
Â  Â  ]
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">any</span>(patternÂ <span class="hljs-keyword">in</span>Â text_lowerÂ <span class="hljs-keyword">for</span>Â patternÂ <span class="hljs-keyword">in</span>Â irrelevant_patterns):
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-number">0.0</span>
Â  Â Â <span class="hljs-comment"># è®¡ç®—ç›¸å…³æ€§å¾—åˆ†</span>
Â  Â  score =Â <span class="hljs-number">0.0</span>
Â  Â Â <span class="hljs-keyword">if</span>Â keywordÂ <span class="hljs-keyword">in</span>Â text:
Â  Â  Â  Â  score +=Â <span class="hljs-number">0.6</span>Â Â <span class="hljs-comment"># åŸºç¡€åˆ†</span>
Â  Â Â <span class="hljs-comment"># æ—¶æ•ˆæ€§åŠ åˆ†</span>
Â  Â  time_keywords = [<span class="hljs-string">"æœ€æ–°"</span>,Â <span class="hljs-string">"ä»Šæ—¥"</span>,Â <span class="hljs-string">"è¿‘æ—¥"</span>,Â <span class="hljs-string">"2024"</span>,Â <span class="hljs-string">"2025"</span>]
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">any</span>(tkÂ <span class="hljs-keyword">in</span>Â textÂ <span class="hljs-keyword">for</span>Â tkÂ <span class="hljs-keyword">in</span>Â time_keywords):
Â  Â  Â  Â  score +=Â <span class="hljs-number">0.1</span>
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-built_in">max</span>(<span class="hljs-number">0.0</span>,Â <span class="hljs-built_in">min</span>(<span class="hljs-number">1.0</span>, score))
</code></pre>
<h2 data-id="heading-13">æ·±åº¦å†…å®¹æŠ“å–æŠ€æœ¯</h2>
<h3 data-id="heading-14">å¹³å°é€‚é…ç­–ç•¥</h3>
<p>ä¸åŒçš„ç¤¾äº¤åª’ä½“å¹³å°å…·æœ‰ä¸åŒçš„é¡µé¢ç»“æ„å’Œå†…å®¹ç»„ç»‡æ–¹å¼ï¼Œä¼ ç»Ÿç³»ç»Ÿå¾€å¾€é‡‡ç”¨ç»Ÿä¸€çš„æŠ“å–ç­–ç•¥ï¼Œå¯¼è‡´æ•°æ®è´¨é‡å‚å·®ä¸é½ã€‚AgentRun ç³»ç»Ÿé’ˆå¯¹ä¸åŒå¹³å°å®ç°äº†å®šåˆ¶åŒ–çš„æŠ“å–é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">explore_page_with_llm</span>(<span class="hljs-params">page, keyword:Â <span class="hljs-built_in">str</span>, url:Â <span class="hljs-built_in">str</span>, source:Â <span class="hljs-built_in">str</span>, initial_content:Â <span class="hljs-built_in">str</span></span>):
Â  Â Â <span class="hljs-string">"""åŸºäºå¹³å°ç‰¹æ€§çš„æ™ºèƒ½å†…å®¹æŠ“å–"""</span>
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-string">"weibo.com"</span>Â <span class="hljs-keyword">in</span>Â url:
Â  Â  Â  Â Â <span class="hljs-comment"># å¾®åšç‰¹å®šçš„è¯„è®ºå’Œè½¬å‘æŠ“å–</span>
Â  Â  Â  Â  available_actions = [
Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"action"</span>:Â <span class="hljs-string">"view_comments"</span>,Â <span class="hljs-string">"selector"</span>:Â <span class="hljs-string">".WB_feed_expand, [class*='comment']"</span>},
Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"action"</span>:Â <span class="hljs-string">"view_retweets"</span>,Â <span class="hljs-string">"selector"</span>:Â <span class="hljs-string">".WB_feed_expand, [class*='repost']"</span>},
Â  Â  Â  Â  ]
Â  Â Â <span class="hljs-keyword">elif</span>Â <span class="hljs-string">"zhihu.com"</span>Â <span class="hljs-keyword">in</span>Â url:
Â  Â  Â  Â Â <span class="hljs-comment"># çŸ¥ä¹å›ç­”å’Œè¯„è®ºæŠ“å–</span>
Â  Â  Â  Â  available_actions = [
Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"action"</span>:Â <span class="hljs-string">"view_more_answers"</span>,Â <span class="hljs-string">"selector"</span>:Â <span class="hljs-string">".AnswerItem, .List-item"</span>},
Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"action"</span>:Â <span class="hljs-string">"view_comments"</span>,Â <span class="hljs-string">"selector"</span>:Â <span class="hljs-string">".Comments-container, .CommentItem"</span>},
Â  Â  Â  Â  ]
Â  Â Â <span class="hljs-keyword">elif</span>Â <span class="hljs-string">"bilibili.com"</span>Â <span class="hljs-keyword">in</span>Â url:
Â  Â  Â  Â Â <span class="hljs-comment"># Bç«™è§†é¢‘è¯„è®ºæŠ“å–</span>
Â  Â  Â  Â  available_actions = [
Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"action"</span>:Â <span class="hljs-string">"view_comments"</span>,Â <span class="hljs-string">"selector"</span>:Â <span class="hljs-string">".reply-item, .root-reply"</span>},
Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"action"</span>:Â <span class="hljs-string">"view_related"</span>,Â <span class="hljs-string">"selector"</span>:Â <span class="hljs-string">".video-page-card, .recommend-list"</span>},
Â  Â  Â  Â  ]
</code></pre>
<h3 data-id="heading-15">LLM é©±åŠ¨çš„æ™ºèƒ½æ¢ç´¢</h3>
<p>ç³»ç»Ÿåˆ›æ–°æ€§åœ°å¼•å…¥äº† LLM é©±åŠ¨çš„æ™ºèƒ½æ¢ç´¢æœºåˆ¶ï¼Œè®© AI å†³å®šæ˜¯å¦éœ€è¦æ·±å…¥æŠ“å–æŸä¸ªé¡µé¢çš„é¢å¤–å†…å®¹ï¼Œå¦‚è¯„è®ºåŒºã€ç›¸å…³æ¨èç­‰ã€‚è¿™ç§æ™ºèƒ½å†³ç­–å¤§å¤§æé«˜äº†æ•°æ®é‡‡é›†çš„æ•ˆç‡å’Œé’ˆå¯¹æ€§ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">llm_decide_exploration</span>(<span class="hljs-params">keyword:Â <span class="hljs-built_in">str</span>, page_url:Â <span class="hljs-built_in">str</span>, page_content:Â <span class="hljs-built_in">str</span>, source:Â <span class="hljs-built_in">str</span></span>):
Â  Â Â <span class="hljs-string">"""LLM æ™ºèƒ½å†³ç­–æ˜¯å¦è¿›è¡Œæ·±åº¦æ¢ç´¢"""</span>
Â  Â  prompt =Â <span class="hljs-string">f"""è¯·æ ¹æ®ä»¥ä¸‹ä¿¡æ¯å†³å®šæ˜¯å¦éœ€è¦è¿›ä¸€æ­¥æ¢ç´¢é¡µé¢è·å–æ›´å¤šèˆ†æƒ…æ•°æ®ã€‚
ã€æœç´¢å…³é”®è¯ã€‘<span class="hljs-subst">{keyword}</span>
ã€å½“å‰é¡µé¢ã€‘<span class="hljs-subst">{page_url}</span>
ã€å·²è·å–å†…å®¹é¢„è§ˆã€‘<span class="hljs-subst">{page_content[:<span class="hljs-number">500</span>]}</span>
ã€å†³ç­–æ ‡å‡†ã€‘
1. å¦‚æœå½“å‰å†…å®¹å·²ç»è¶³å¤Ÿä¸°å¯Œï¼Œå¯èƒ½ä¸éœ€è¦è¿›ä¸€æ­¥æ¢ç´¢
2. å¦‚æœæ˜¯å¾®åš/Bç«™ç­‰å¹³å°ï¼Œè¯„è®ºåŒºé€šå¸¸åŒ…å«é‡è¦çš„èˆ†æƒ…ä¿¡æ¯
3. æƒè¡¡æ—¶é—´æˆæœ¬ï¼Œæ¯ä¸ªé¡µé¢æœ€å¤šæ¢ç´¢1-2ä¸ªæ“ä½œ
è¯·è¿”å› JSON æ ¼å¼çš„å†³ç­–ç»“æœã€‚
"""</span>
Â  Â  result =Â <span class="hljs-keyword">await</span>Â explorer.run(prompt)
Â  Â Â <span class="hljs-keyword">return</span>Â json.loads(result.output)
</code></pre>
<h2 data-id="heading-16">å‰ç«¯ VNC é›†æˆå®ç°</h2>
<h3 data-id="heading-17">åŠ¨æ€åº“åŠ è½½æœºåˆ¶</h3>
<p>å‰ç«¯ VNC å®¢æˆ·ç«¯éœ€è¦åŠ¨æ€åŠ è½½ noVNC åº“ï¼Œç³»ç»Ÿå®ç°äº†æ™ºèƒ½çš„åŠ è½½æœºåˆ¶ï¼Œæ”¯æŒæœ¬åœ°èµ„æºå’Œ CDN å›é€€ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">functionÂ loadScript(url) {
Â  Â Â returnÂ newÂ Promise(function(resolve, reject) {
Â  Â  Â  Â Â varÂ <span class="hljs-attr">script</span> =Â document.createElement(<span class="hljs-string">'script'</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  <span class="hljs-attr">script.src</span>Â = baseUrl + url<span class="hljs-comment">;</span>
Â  Â  Â  Â  <span class="hljs-attr">script.onload</span>Â = resolve<span class="hljs-comment">;</span>
Â  Â  Â  Â  <span class="hljs-attr">script.onerror</span>Â =Â function() {
Â  Â  Â  Â  Â  Â Â // æœ¬åœ°åŠ è½½å¤±è´¥ï¼Œå°è¯• CDN
Â  Â  Â  Â  Â  Â Â varÂ <span class="hljs-attr">fallbackUrl</span> = url.includes(<span class="hljs-string">'wordcloud'</span>)Â 
Â  Â  Â  Â  Â  Â  Â  Â  ?Â 'https://cdn.jsdelivr.net/npm/echarts-wordcloud@2.1.0/dist/echarts-wordcloud.min.js'
Â  Â  Â  Â  Â  Â  Â  Â  :Â 'https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js'<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â Â varÂ <span class="hljs-attr">fallbackScript</span> =Â document.createElement(<span class="hljs-string">'script'</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">fallbackScript.src</span>Â = fallbackUrl<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">fallbackScript.onload</span>Â = resolve<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">fallbackScript.onerror</span>Â = reject<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â Â document.head.appendChild(fallbackScript)<span class="hljs-comment">;</span>
Â  Â  Â  Â  }<span class="hljs-comment">;</span>
Â  Â  Â  Â Â document.head.appendChild(script)<span class="hljs-comment">;</span>
Â  Â  })<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-18">å¤šåè®®é€‚é…</h3>
<p>è€ƒè™‘åˆ°éƒ¨ç½²ç¯å¢ƒçš„å¤æ‚æ€§ï¼ŒVNC ç»„ä»¶å®ç°äº† HTTP/HTTPS ç¯å¢ƒä¸‹çš„ WebSocket åè®®è‡ªé€‚åº”ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span>Â adjustWebSocketUrl =Â useCallback((url:Â string):Â stringÂ =&gt;Â {
Â  Â Â <span class="hljs-keyword">const</span>Â isHttps =Â window.location.protocolÂ ===Â <span class="hljs-string">'https:'</span>;
Â  Â Â <span class="hljs-keyword">if</span>Â (!isHttps &amp;&amp; url.startsWith(<span class="hljs-string">'wss://'</span>)) {
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â url.replace(<span class="hljs-string">'wss://'</span>,Â <span class="hljs-string">'ws://'</span>);
Â  Â  }
Â  Â Â <span class="hljs-keyword">if</span>Â (isHttps &amp;&amp; url.startsWith(<span class="hljs-string">'ws://'</span>)) {
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â url.replace(<span class="hljs-string">'ws://'</span>,Â <span class="hljs-string">'wss://'</span>);
Â  Â  }
Â  Â Â <span class="hljs-keyword">return</span>Â url;
}, []);
</code></pre>
<h2 data-id="heading-19">æ™ºèƒ½åˆ†æä¸æŠ¥å‘Šç”Ÿæˆ</h2>
<h3 data-id="heading-20">æ ‡å‡†åŒ–æƒ…æ„Ÿåˆ†æ</h3>
<p>ç³»ç»Ÿå®ç°äº†åŸºäºå…³é”®è¯è¯å…¸çš„æƒ…æ„Ÿåˆ†æç®—æ³•ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œè¿™ç§æ–¹æ³•æ›´åŠ é€æ˜å’Œå¯æ§ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">SentimentStandards</span>:
Â  Â Â <span class="hljs-string">"""æƒ…æ„Ÿå€¾å‘æ ‡å‡†åŒ–è®¡ç®—"""</span>
Â  Â  POSITIVE_KEYWORDS = [
Â  Â  Â  Â Â <span class="hljs-string">"ä¼˜ç§€"</span>,Â <span class="hljs-string">"å“è¶Š"</span>,Â <span class="hljs-string">"åˆ›æ–°"</span>,Â <span class="hljs-string">"é¢†å…ˆ"</span>,Â <span class="hljs-string">"çªç ´"</span>,Â <span class="hljs-string">"æˆåŠŸ"</span>,Â <span class="hljs-string">"èµ"</span>,Â <span class="hljs-string">"å¥½è¯„"</span>,Â <span class="hljs-string">"æ”¯æŒ"</span>,
Â  Â  Â  Â Â <span class="hljs-string">"è®¤å¯"</span>,Â <span class="hljs-string">"æ»¡æ„"</span>,Â <span class="hljs-string">"ä¿¡èµ–"</span>,Â <span class="hljs-string">"æœŸå¾…"</span>,Â <span class="hljs-string">"çœ‹å¥½"</span>,Â <span class="hljs-string">"å€¼å¾—"</span>,Â <span class="hljs-string">"æ¨è"</span>,Â <span class="hljs-string">"å–œæ¬¢"</span>
Â  Â  ]
Â  Â  NEGATIVE_KEYWORDS = [
Â  Â  Â  Â Â <span class="hljs-string">"å·®"</span>,Â <span class="hljs-string">"ç³Ÿç³•"</span>,Â <span class="hljs-string">"å¤±è´¥"</span>,Â <span class="hljs-string">"è½å"</span>,Â <span class="hljs-string">"é—®é¢˜"</span>,Â <span class="hljs-string">"ç¼ºé™·"</span>,Â <span class="hljs-string">"æ‰¹è¯„"</span>,Â <span class="hljs-string">"è´¨ç–‘"</span>,Â <span class="hljs-string">"æ‹…å¿§"</span>,
Â  Â  Â  Â Â <span class="hljs-string">"å¤±æœ›"</span>,Â <span class="hljs-string">"ä¸æ»¡"</span>,Â <span class="hljs-string">"æŠ±æ€¨"</span>,Â <span class="hljs-string">"æŠ•è¯‰"</span>,Â <span class="hljs-string">"å·®è¯„"</span>,Â <span class="hljs-string">"åƒåœ¾"</span>,Â <span class="hljs-string">"éª—å±€"</span>
Â  Â  ]
Â  Â  @<span class="hljs-built_in">staticmethod</span>
Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">calculate_sentiment_score</span>(<span class="hljs-params">text:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-built_in">float</span>:
Â  Â  Â  Â Â <span class="hljs-string">"""è®¡ç®—æƒ…æ„Ÿå¾—åˆ† (-1.0 åˆ° 1.0)"""</span>
Â  Â  Â  Â  positive_count =Â <span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>Â <span class="hljs-keyword">for</span>Â wordÂ <span class="hljs-keyword">in</span>Â SentimentStandards.POSITIVE_KEYWORDSÂ <span class="hljs-keyword">if</span>Â wordÂ <span class="hljs-keyword">in</span>Â text)
Â  Â  Â  Â  negative_count =Â <span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>Â <span class="hljs-keyword">for</span>Â wordÂ <span class="hljs-keyword">in</span>Â SentimentStandards.NEGATIVE_KEYWORDSÂ <span class="hljs-keyword">if</span>Â wordÂ <span class="hljs-keyword">in</span>Â text)
Â  Â  Â  Â  total_count = positive_count + negative_count
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â total_count ==Â <span class="hljs-number">0</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-number">0.0</span>
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â (positive_count - negative_count) / total_count
</code></pre>
<h3 data-id="heading-21">æµå¼æŠ¥å‘Šç”Ÿæˆ</h3>
<p>æŠ¥å‘Šç”Ÿæˆè¿‡ç¨‹é‡‡ç”¨æµå¼è¾“å‡ºï¼Œç”¨æˆ·å¯ä»¥å®æ—¶è§‚å¯ŸæŠ¥å‘Šçš„æ’°å†™è¿‡ç¨‹ï¼Œè¿™ç§ä½“éªŒæ˜¯ä¼ ç»Ÿç³»ç»Ÿæ— æ³•æä¾›çš„ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">asyncÂ withÂ writer.run_stream(report_prompt)Â asÂ result:
Â  Â Â asyncÂ forÂ textÂ inÂ result.stream_text():
Â  Â  Â  Â  <span class="hljs-attr">report_content</span> = text
Â  Â  Â  Â  <span class="hljs-attr">state.report_text</span> = report_content
Â  Â  Â  Â  <span class="hljs-attr">current_time</span> = asyncio.get_event_loop().time()
Â  Â  Â  Â  <span class="hljs-attr">content_delta</span> =Â len(report_content) - last_event_length
Â  Â  Â  Â  <span class="hljs-attr">time_delta</span> = current_time - last_event_time
Â  Â  Â  Â Â <span class="hljs-comment"># æ¯ 100 å­—ç¬¦æˆ–æ¯ 0.3 ç§’å‘é€ä¸€æ¬¡æ›´æ–°</span>
Â  Â  Â  Â Â ifÂ content_delta &gt;=Â 100Â orÂ time_delta &gt;=Â 0.3:
Â  Â  Â  Â  Â  Â Â awaitÂ push_state_event(run_id, state)
</code></pre>
<h2 data-id="heading-22">éƒ¨ç½²ä¸è¿ç»´ä¼˜åŠ¿</h2>
<h3 data-id="heading-23">ç®€åŒ–çš„éƒ¨ç½²æµç¨‹</h3>
<p>ç›¸æ¯”ä¼ ç»Ÿèˆ†æƒ…ç³»ç»Ÿéœ€è¦å¤æ‚çš„åˆ†å¸ƒå¼çˆ¬è™«é›†ç¾¤éƒ¨ç½²ï¼ŒAgentRun ç³»ç»Ÿçš„éƒ¨ç½²ç›¸å¯¹ç®€å•ã€‚åªéœ€è¦é…ç½®å¥½ç¯å¢ƒå˜é‡å’Œ AgentRun Sandbox æ¨¡æ¿ï¼Œç³»ç»Ÿå°±èƒ½è‡ªåŠ¨ç®¡ç†æµè§ˆå™¨å®ä¾‹çš„åˆ›å»ºå’Œé”€æ¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ ¸å¿ƒé…ç½®</span>
<span class="hljs-attr">AGENTRUN_MODEL_NAME</span>=your_model_name
<span class="hljs-attr">MODEL_NAME</span>=qwen3-max
<span class="hljs-attr">AGENTRUN_BROWSER_SANDBOX_NAME</span>=your_browser_template
<span class="hljs-attr">TIMEOUT</span>=<span class="hljs-number">180</span>
</code></pre>
<h3 data-id="heading-24">è‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›</h3>
<p>ç³»ç»Ÿå†…ç½®äº†å®Œå–„çš„ç›‘æ§å’Œè‡ªæ¢å¤æœºåˆ¶ï¼Œå¤§å¤§é™ä½äº†è¿ç»´å¤æ‚åº¦ã€‚å½“æ£€æµ‹åˆ°å¼‚å¸¸æ—¶ï¼Œç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨é‡å»ºèµ„æºï¼Œä¿è¯æœåŠ¡çš„è¿ç»­æ€§ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¿æ¥å¤±è´¥æ—¶è‡ªåŠ¨é‡è¿ï¼ˆæ¯ 10 ç§’å°è¯•ä¸€æ¬¡ï¼‰</span>
useEffect(() =&gt; {
Â  Â Â ifÂ (<span class="hljs-attr">status</span> ===Â <span class="hljs-string">'error'</span>Â &amp;&amp; active &amp;&amp; rfbLoaded) {
Â  Â  Â  Â  <span class="hljs-attr">reconnectTimerRef.current</span> = setTimeout(() =&gt; {
Â  Â  Â  Â  Â  Â  cleanupRfb()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">lastUrlRef.current</span> =Â null<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  fetchVncUrl(true)<span class="hljs-comment">;</span>
Â  Â  Â  Â  }, RECONNECT_INTERVAL)<span class="hljs-comment">;</span>
Â  Â  }
}, <span class="hljs-section">[status, active, rfbLoaded]</span>)<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-25">æ€§èƒ½ä¸æ‰©å±•æ€§åˆ†æ</h2>
<h3 data-id="heading-26">å¹¶å‘å¤„ç†èƒ½åŠ›</h3>
<p>ä¼ ç»Ÿç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›å¾€å¾€å—é™äºå•æœºèµ„æºï¼Œè€Œå‡½æ•°è®¡ç®— AgentRun ç³»ç»Ÿå¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€åˆ›å»ºå¤šä¸ª Sandbox å®ä¾‹ï¼Œå®ç°çœŸæ­£çš„æ°´å¹³æ‰©å±•ã€‚ç³»ç»Ÿé€šè¿‡å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹å’Œè¿æ¥æ± ç®¡ç†ï¼Œèƒ½å¤Ÿé«˜æ•ˆå¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">uvicorn.run(
Â  Â Â "main:app",
Â  Â  <span class="hljs-attr">host</span>=<span class="hljs-string">"0.0.0.0"</span>,
Â  Â  <span class="hljs-attr">port</span>=<span class="hljs-number">8000</span>,
Â  Â  <span class="hljs-attr">log_level</span>=<span class="hljs-string">"info"</span>,
Â  Â  <span class="hljs-attr">timeout_keep_alive</span>=<span class="hljs-number">120</span>,
Â  Â  <span class="hljs-attr">limit_concurrency</span>=<span class="hljs-number">100</span>, Â <span class="hljs-comment"># æ”¯æŒé«˜å¹¶å‘</span>
)
</code></pre>
<h3 data-id="heading-27">èµ„æºå¼¹æ€§ç®¡ç†</h3>
<p>ç³»ç»Ÿå®ç°äº†æ™ºèƒ½çš„èµ„æºç®¡ç†ç­–ç•¥ï¼Œèƒ½å¤Ÿæ ¹æ®ä»»åŠ¡è´Ÿè½½åŠ¨æ€è°ƒæ•´ Sandbox å®ä¾‹æ•°é‡ã€‚è¿™ç§å¼¹æ€§æ‰©å±•èƒ½åŠ›æ˜¯ä¼ ç»Ÿå›ºå®šæ¶æ„éš¾ä»¥å®ç°çš„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_all_sandboxes</span>() -&gt;Â <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-type">Any</span>]]:
Â  Â Â <span class="hljs-string">"""åŠ¨æ€è·å–æ‰€æœ‰å¯ç”¨çš„Sandboxå®ä¾‹"""</span>
Â  Â  result = []
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â _sandbox_lock:
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â sandbox_id, sandboxÂ <span class="hljs-keyword">in</span>Â _sandboxes.items():
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æ£€æŸ¥å®ä¾‹å¥åº·çŠ¶æ€</span>
Â  Â  Â  Â  Â  Â  Â  Â  vnc_url = sandbox.get_vnc_url()
Â  Â  Â  Â  Â  Â  Â  Â  result.append({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"sandbox_id"</span>: sandbox_id,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"vnc_url"</span>: vnc_url,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"active"</span>:Â <span class="hljs-literal">True</span>,
Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">except</span>Â Exception:
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># è‡ªåŠ¨æ¸…ç†å¤±æ•ˆå®ä¾‹</span>
Â  Â  Â  Â  Â  Â  Â  Â  result.append({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"sandbox_id"</span>: sandbox_id,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"active"</span>:Â <span class="hljs-literal">False</span>,
Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â Â <span class="hljs-keyword">return</span>Â result
</code></pre>
<h2 data-id="heading-28">æ€»ç»“</h2>
<p>åŸºäºå‡½æ•°è®¡ç®— AgentRun æ„å»ºçš„èˆ†æƒ…åˆ†æç³»ç»Ÿå±•ç°äº†ç°ä»£ AI æŠ€æœ¯åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­çš„å¼ºå¤§åº”ç”¨æ½œåŠ›ã€‚ç›¸æ¯”ä¼ ç»Ÿæ–¹æ¡ˆï¼Œå‡½æ•°è®¡ç®— AgentRun ç³»ç»Ÿåœ¨å®‰å…¨æ€§ã€å¯é æ€§ã€å¯è§‚æµ‹æ€§å’Œæ‰©å±•æ€§æ–¹é¢éƒ½å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ã€‚</p>
<p>é€šè¿‡éš”ç¦»çš„æµè§ˆå™¨ç¯å¢ƒï¼Œç³»ç»Ÿè§£å†³äº†ä¼ ç»Ÿçˆ¬è™«é¢ä¸´çš„å®‰å…¨é£é™©å’Œç¯å¢ƒæ±¡æŸ“é—®é¢˜ã€‚å®æ—¶çš„ VNC é¢„è§ˆåŠŸèƒ½æä¾›äº†å‰æ‰€æœªæœ‰çš„é€æ˜åº¦ï¼Œè®©å¼€å‘è€…å’Œç”¨æˆ·èƒ½å¤Ÿç›´è§‚åœ°è§‚å¯Ÿç³»ç»Ÿå·¥ä½œçŠ¶æ€ã€‚æ™ºèƒ½çš„æ•…éšœæ£€æµ‹å’Œè‡ªæ¢å¤æœºåˆ¶å¤§å¤§é™ä½äº†è¿ç»´å¤æ‚åº¦ï¼Œè€Œæµå¼è¾“å‡ºè®¾è®¡åˆ™æ˜¾è‘—æå‡äº†ç”¨æˆ·ä½“éªŒã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå‡½æ•°è®¡ç®— AgentRun ç³»ç»Ÿå°†å¤æ‚çš„èˆ†æƒ…åˆ†æä»»åŠ¡å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œä»å¤šå¹³å°æ•°æ®é‡‡é›†ã€æ·±åº¦å†…å®¹æŠ“å–ã€æ™ºèƒ½æƒ…æ„Ÿåˆ†æåˆ°ä¸“ä¸šæŠ¥å‘Šç”Ÿæˆï¼Œæ•´ä¸ªæµç¨‹æ— éœ€äººå·¥å¹²é¢„ã€‚è¿™ç§ç«¯åˆ°ç«¯çš„è‡ªåŠ¨åŒ–èƒ½åŠ›ï¼Œç»“åˆ AI æŠ€æœ¯çš„æŒç»­è¿›æ­¥ï¼Œå°†ä¸ºä¼ä¸šå’Œæœºæ„çš„èˆ†æƒ…åˆ†æå·¥ä½œå¸¦æ¥é©å‘½æ€§çš„æ”¹å˜ã€‚</p>
<p>æ¬¢è¿åŠ å…¥â€œå‡½æ•°è®¡ç®— AgentRun å®¢æˆ·ç¾¤â€ä¸æˆ‘ä»¬äº¤æµï¼Œé’‰é’‰ç¾¤å·ï¼š134570017218ã€‚</p>
<p><strong>å¿«é€Ÿäº†è§£å‡½æ•°è®¡ç®— AgentRunï¼š</strong></p>
<p><strong>ä¸€å¥è¯ä»‹ç»ï¼š</strong> å‡½æ•°è®¡ç®— AgentRun æ˜¯ä¸€ä¸ªä»¥é«˜ä»£ç ä¸ºæ ¸å¿ƒçš„ä¸€ç«™å¼ Agentic AI åŸºç¡€è®¾æ–½å¹³å°ã€‚ç§‰æŒç”Ÿæ€å¼€æ”¾å’Œçµæ´»ç»„è£…çš„ç†å¿µï¼Œä¸ºä¼ä¸šçº§ Agent åº”ç”¨æä¾›ä»å¼€å‘ã€éƒ¨ç½²åˆ°è¿ç»´çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7333e7a6ace849a3a84cd2cef2836b4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=PGzjK9qak75XL0U0Ax7gSsa1tBw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><em>å‡½æ•°è®¡ç®— AgentRun æ¶æ„å›¾</em></p>
<p>AgentRun è¿è¡Œæ—¶åŸºäºé˜¿é‡Œäº‘å‡½æ•°è®¡ç®— FC æ„å»ºï¼Œç»§æ‰¿äº† Serverless è®¡ç®—æè‡´å¼¹æ€§ã€æŒ‰é‡ä»˜è´¹ã€é›¶è¿ç»´çš„æ ¸å¿ƒä¼˜åŠ¿ã€‚é€šè¿‡æ·±åº¦é›†æˆ AgentScopeã€Langchainã€RAGFlowã€Mem0 ç­‰ä¸»æµå¼€æºç”Ÿæ€ã€‚AgentRun å°† Serverless çš„æè‡´å¼¹æ€§ã€é›¶è¿ç»´å’ŒæŒ‰é‡ä»˜è´¹çš„ç‰¹æ€§ä¸ AI åŸç”Ÿåº”ç”¨åœºæ™¯æ·±åº¦èåˆï¼ŒåŠ©åŠ›ä¼ä¸šå®ç°æˆæœ¬ä¸æ•ˆç‡çš„æè‡´ä¼˜åŒ–ï¼Œå¹³å‡ TCO é™ä½ 60%ã€‚Â </p>
<p>è®©å¼€å‘è€…åªéœ€ä¸“æ³¨äº Agent çš„ä¸šåŠ¡é€»è¾‘åˆ›æ–°ï¼Œæ— éœ€å…³å¿ƒåº•å±‚åŸºç¡€è®¾æ–½ï¼Œè®© Agentic AI çœŸæ­£è¿›å…¥ä¼ä¸šç”Ÿäº§ç¯å¢ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆ"æ•°æ®å‹ç¼©"èƒ½å‡å°æ–‡ä»¶å¤§å°ï¼Ÿâ€”â€”ä»å†—ä½™æ•°æ®åˆ°é«˜æ•ˆç¼–ç ]]></title>    <link>https://juejin.cn/post/7587776610436300815</link>    <guid>https://juejin.cn/post/7587776610436300815</guid>    <pubDate>2025-12-26T10:26:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587776610436300815" data-draft-id="7587740546955083816" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆ&quot;æ•°æ®å‹ç¼©&quot;èƒ½å‡å°æ–‡ä»¶å¤§å°ï¼Ÿâ€”â€”ä»å†—ä½™æ•°æ®åˆ°é«˜æ•ˆç¼–ç "/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T10:26:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— é™å¤§6"/> <meta itemprop="url" content="https://juejin.cn/user/2865758605422890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆ"æ•°æ®å‹ç¼©"èƒ½å‡å°æ–‡ä»¶å¤§å°ï¼Ÿâ€”â€”ä»å†—ä½™æ•°æ®åˆ°é«˜æ•ˆç¼–ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2865758605422890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— é™å¤§6
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:26:56.000Z" title="Fri Dec 26 2025 10:26:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“¦ ä¸ºä»€ä¹ˆ"æ•°æ®å‹ç¼©"èƒ½å‡å°æ–‡ä»¶å¤§å°ï¼Ÿâ€”â€”ä»å†—ä½™æ•°æ®åˆ°é«˜æ•ˆç¼–ç  ğŸ”</h2>
<blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ— é™å¤§ï¼Œæ¬¢è¿æ”¶çœ‹åä¸‡ä¸ªä¸ºä»€ä¹ˆç³»åˆ—æ–‡ç« </p>
<p>å¸Œæœ›ä»Šå¤©çš„å†…å®¹èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©</p>
</blockquote>
<p>ä»Šå¤©å’±ä»¬æ¥èŠèŠæ•°æ®å‹ç¼©è¿™ä¸ª"æ•°æ®ä¸–ç•Œçš„ç˜¦èº«æœ¯"ï¼æƒ³è±¡ä¸€ä¸‹ï¼Œä½ ä¸‹è½½ä¸€éƒ¨ç”µå½±éœ€è¦100GBï¼›ä½ å‘ä¸€å¼ ç…§ç‰‡éœ€è¦5åˆ†é’Ÿï¼›ä½ çš„æ‰‹æœºå­˜å‚¨ç©ºé—´æ€»æ˜¯ä¸å¤Ÿç”¨â€”â€”è¿™äº›ç³Ÿå¿ƒçš„ä½“éªŒï¼Œéƒ½æ˜¯å› ä¸ºæ•°æ®æ²¡æœ‰è¢«å‹ç¼©ï¼è€Œæ•°æ®å‹ç¼©ï¼Œå°±æ˜¯è¦è§£å†³è¿™äº›é—®é¢˜ï¼</p>
<h3 data-id="heading-1">ğŸ¤” æ ¸å¿ƒé—®é¢˜ï¼šæ•°æ®å‹ç¼©çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæ— æŸå‹ç¼©å’Œæœ‰æŸå‹ç¼©æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3>
<p>å¾ˆå¤šäººè§‰å¾—æ•°æ®å‹ç¼©æ˜¯"ç¥å¥‡çš„é­”æ³•"ï¼Œå…¶å®æ•°æ®å‹ç¼©çš„åŸç†å¾ˆç®€å•ï¼æ•°æ®å‹ç¼©å°±åƒ"ç»™æ•°æ®å‡è‚¥"ï¼Œé€šè¿‡å»é™¤å†—ä½™ä¿¡æ¯ï¼Œè®©æ•°æ®å˜å¾—æ›´è‹—æ¡ï¼ŒåŒæ—¶å°½å¯èƒ½ä¿ç•™æœ‰ç”¨ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-2">æ•°æ®å‹ç¼©çš„æœ¬è´¨</h4>
<p>æ•°æ®å‹ç¼©æ˜¯ä¸€ç§<strong>æ•°æ®ç¼–ç æŠ€æœ¯</strong>ï¼Œé€šè¿‡å‡å°‘æ•°æ®ä¸­çš„å†—ä½™ä¿¡æ¯ï¼Œç”¨æ›´å°‘çš„æ¯”ç‰¹æ•°è¡¨ç¤ºç›¸åŒçš„æ•°æ®ã€‚å®ƒå°±åƒ"æŠŠåšåšçš„å­—å…¸æµ“ç¼©æˆæˆè¯­è¯å…¸"ï¼Œç”¨æ›´ç®€æ´çš„æ–¹å¼è¡¨è¾¾ç›¸åŒçš„æ„æ€ã€‚</p>
<h4 data-id="heading-3">ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å‹ç¼©ï¼Ÿ</h4>
<ul>
<li>âš¡ <strong>èŠ‚çœä¼ è¾“æ—¶é—´</strong>ï¼šå‹ç¼©åçš„æ•°æ®ä¼ è¾“æ›´å¿«ï¼Œä¸‹è½½ç”µå½±ä¸ç”¨ç­‰åŠå¤©</li>
<li>ğŸ’¾ <strong>èŠ‚çœå­˜å‚¨ç©ºé—´</strong>ï¼šå‹ç¼©åçš„æ•°æ®å ç”¨æ›´å°‘ç©ºé—´ï¼Œæ‰‹æœºèƒ½å­˜æ›´å¤šç…§ç‰‡å’Œè§†é¢‘</li>
<li>ğŸ’° <strong>é™ä½æˆæœ¬</strong>ï¼šå‡å°‘å­˜å‚¨å’Œå¸¦å®½å¼€é”€ï¼Œä¼ä¸šèƒ½èŠ‚çœå¤§é‡æˆæœ¬</li>
<li>ğŸ“± <strong>æé«˜è®¾å¤‡æ€§èƒ½</strong>ï¼šå°æ–‡ä»¶åŠ è½½æ›´å¿«ï¼Œè®¾å¤‡è¿è¡Œæ›´æµç•…</li>
</ul>
<h3 data-id="heading-4">ğŸ“œ æ•°æ®å‹ç¼©çš„"è¿›åŒ–å²"ï¼šä»Huffmanç¼–ç åˆ°ç°ä»£å‹ç¼©æ ¼å¼</h3>
<h4 data-id="heading-5">1. ğŸ”¤ Huffmanç¼–ç ï¼š"å‹ç¼©çš„å…ˆé©±"ï¼ˆ1952å¹´ï¼‰</h4>
<p>1952å¹´ï¼Œå¤§å«Â·éœå¤«æ›¼ï¼ˆDavid Huffmanï¼‰å‘æ˜äº†Huffmanç¼–ç ï¼Œè¿™æ˜¯ä¸€ç§åŸºäºå­—ç¬¦é¢‘ç‡çš„æ— æŸå‹ç¼©ç®—æ³•ã€‚å®ƒç»™å‡ºç°é¢‘ç‡é«˜çš„å­—ç¬¦åˆ†é…çŸ­ç¼–ç ï¼Œå‡ºç°é¢‘ç‡ä½çš„å­—ç¬¦åˆ†é…é•¿ç¼–ç ï¼Œä»è€Œå‡å°‘æ€»æ¯”ç‰¹æ•°ã€‚</p>
<p>è¿™å°±åƒ"ç”¨çŸ­å•è¯è¡¨ç¤ºå¸¸ç”¨è¯"ï¼Œæ¯”å¦‚ç”¨"OK"ä»£æ›¿"Okay"ï¼Œç”¨"BTW"ä»£æ›¿"By the way"ï¼Œæ—¢ç®€æ´åˆä¸ä¸¢å¤±ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-6">2. ğŸ“Š LZWç¼–ç ï¼š"GIFçš„ç§˜å¯†æ­¦å™¨"ï¼ˆ1977å¹´ï¼‰</h4>
<p>1977å¹´ï¼ŒLempel-Ziv-Welchï¼ˆLZWï¼‰ç¼–ç è¯ç”Ÿã€‚å®ƒæ˜¯ä¸€ç§å­—å…¸ç¼–ç ç®—æ³•ï¼Œé€šè¿‡å»ºç«‹åŠ¨æ€å­—å…¸æ¥å‹ç¼©é‡å¤å‡ºç°çš„å­—ç¬¦ä¸²ã€‚</p>
<p>è¿™å°±åƒ"ç”¨ç¼–å·ä»£æ›¿é‡å¤çš„å¥å­"ï¼Œæ¯”å¦‚æŠŠ"æˆ‘çˆ±ç¼–ç¨‹ï¼Œç¼–ç¨‹ä½¿æˆ‘å¿«ä¹ï¼Œå¿«ä¹å­¦ä¹ ç¼–ç¨‹"å‹ç¼©æˆ"æˆ‘çˆ±[1]ï¼Œ[1]ä½¿æˆ‘[2]ï¼Œ[2]å­¦ä¹ [1]"ï¼Œå…¶ä¸­[1]=ç¼–ç¨‹ï¼Œ[2]=å¿«ä¹ã€‚</p>
<h4 data-id="heading-7">3. ğŸ–¼ï¸ JPEGï¼š"ç…§ç‰‡å‹ç¼©ä¹‹ç‹"ï¼ˆ1992å¹´ï¼‰</h4>
<p>1992å¹´ï¼ŒJPEGï¼ˆJoint Photographic Experts Groupï¼‰æ ‡å‡†å‘å¸ƒï¼Œè¿™æ˜¯ä¸€ç§æœ‰æŸå‹ç¼©æ ¼å¼ï¼Œä¸“é—¨ç”¨äºå‹ç¼©ç…§ç‰‡ã€‚å®ƒåˆ©ç”¨äººçœ¼çš„è§†è§‰ç‰¹æ€§ï¼Œå»é™¤äººçœ¼ä¸æ•æ„Ÿçš„ä¿¡æ¯ã€‚</p>
<p>è¿™å°±åƒ"ç»™ç…§ç‰‡åšç¾é¢œ"ï¼Œå»æ‰ä¸€äº›ç»†èŠ‚ï¼Œä½†äººçœ¼å‡ ä¹çœ‹ä¸å‡ºæ¥ï¼Œå´èƒ½æŠŠç…§ç‰‡å¤§å°ç¼©å°åˆ°åŸæ¥çš„10-20%ã€‚</p>
<h4 data-id="heading-8">4. ğŸµ MP3ï¼š"éŸ³ä¹å‹ç¼©é©å‘½"ï¼ˆ1993å¹´ï¼‰</h4>
<p>1993å¹´ï¼ŒMP3ï¼ˆMPEG-1 Audio Layer 3ï¼‰æ ‡å‡†å‘å¸ƒï¼Œè¿™æ˜¯ä¸€ç§æœ‰æŸå‹ç¼©æ ¼å¼ï¼Œä¸“é—¨ç”¨äºå‹ç¼©éŸ³ä¹ã€‚å®ƒåˆ©ç”¨äººè€³çš„å¬è§‰ç‰¹æ€§ï¼Œå»é™¤äººè€³å¬ä¸åˆ°çš„é¢‘ç‡ã€‚</p>
<p>è¿™å°±åƒ"ç»™éŸ³ä¹åšå‡æ³•"ï¼Œå»æ‰ä¸€äº›äººè€³å¬ä¸åˆ°çš„å£°éŸ³ï¼Œå´èƒ½æŠŠéŸ³ä¹æ–‡ä»¶å¤§å°ç¼©å°åˆ°åŸæ¥çš„10%å·¦å³ã€‚</p>
<h4 data-id="heading-9">5. ğŸ“¦ ZIPï¼š"ä¸‡èƒ½å‹ç¼©å·¥å…·"ï¼ˆ1989å¹´ï¼‰</h4>
<p>1989å¹´ï¼ŒZIPæ ¼å¼è¯ç”Ÿï¼Œå®ƒæ˜¯ä¸€ç§å®¹å™¨æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨å¤šç§å‹ç¼©ç®—æ³•ï¼ˆå¦‚Deflateï¼‰ã€‚ZIPæ”¯æŒæ— æŸå‹ç¼©å’Œåˆ†å·å‹ç¼©ï¼Œæ˜¯æœ€å¸¸ç”¨çš„æ–‡ä»¶å‹ç¼©æ ¼å¼ä¹‹ä¸€ã€‚</p>
<p>è¿™å°±åƒ"ä¸‡èƒ½æ”¶çº³ç®±"ï¼Œå¯ä»¥è£…å„ç§ç±»å‹çš„æ–‡ä»¶ï¼Œä¸ç®¡æ˜¯æ–‡æ¡£ã€ç…§ç‰‡è¿˜æ˜¯è§†é¢‘ï¼Œéƒ½èƒ½å‹ç¼©æˆä¸€ä¸ªZIPæ–‡ä»¶ã€‚</p>
<h3 data-id="heading-10">ğŸ”§ æŠ€æœ¯åŸç†ï¼šæ•°æ®å‹ç¼©çš„æ ¸å¿ƒæŠ€æœ¯</h3>
<h4 data-id="heading-11">1. ğŸ” å†—ä½™æ•°æ®è¯†åˆ«ï¼š"æ‰¾åˆ°å¯ä»¥å‡è‚¥çš„åœ°æ–¹"</h4>
<p>æ•°æ®ä¸­å­˜åœ¨å¤§é‡å†—ä½™ä¿¡æ¯ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š</p>
<ul>
<li>ğŸ“ <strong>é‡å¤å†—ä½™</strong>ï¼šç›¸åŒçš„å­—ç¬¦æˆ–å­—ç¬¦ä¸²é‡å¤å‡ºç°ï¼Œæ¯”å¦‚"aaaaa"å¯ä»¥å‹ç¼©æˆ"5a"</li>
<li>ğŸ¨ <strong>ç©ºé—´å†—ä½™</strong>ï¼šå›¾åƒä¸­ç›¸é‚»åƒç´ çš„é¢œè‰²ç›¸ä¼¼ï¼Œæ¯”å¦‚è“è‰²çš„å¤©ç©º</li>
<li>ğŸ”Š <strong>æ—¶é—´å†—ä½™</strong>ï¼šè§†é¢‘ä¸­ç›¸é‚»å¸§çš„å†…å®¹ç›¸ä¼¼ï¼Œæ¯”å¦‚é™æ€èƒŒæ™¯</li>
<li>ğŸ‘ï¸ <strong>è§†è§‰å†—ä½™</strong>ï¼šäººçœ¼å¯¹æŸäº›é¢œè‰²å’Œç»†èŠ‚ä¸æ•æ„Ÿ</li>
<li>ğŸ‘‚ <strong>å¬è§‰å†—ä½™</strong>ï¼šäººè€³å¯¹æŸäº›é¢‘ç‡ä¸æ•æ„Ÿ</li>
</ul>
<h4 data-id="heading-12">2. ğŸ“ æ— æŸå‹ç¼©ï¼š"å‡è‚¥ä¸å‡è´¨"</h4>
<p>æ— æŸå‹ç¼©æ˜¯æŒ‡<strong>å‹ç¼©åå¯ä»¥å®Œå…¨æ¢å¤åŸå§‹æ•°æ®</strong>ï¼Œæ²¡æœ‰ä»»ä½•ä¿¡æ¯ä¸¢å¤±ã€‚å®ƒä¸»è¦ç”¨äºæ–‡æœ¬ã€ç¨‹åºã€é‡è¦æ–‡æ¡£ç­‰ä¸èƒ½å®¹å¿ä¿¡æ¯ä¸¢å¤±çš„åœºæ™¯ã€‚</p>
<p><strong>å¸¸è§çš„æ— æŸå‹ç¼©ç®—æ³•å’Œæ ¼å¼</strong>ï¼š</p>
<ul>
<li>Huffmanç¼–ç ï¼šç”¨äºZIPã€GZIPç­‰</li>
<li>LZWç¼–ç ï¼šç”¨äºGIFã€TIFFç­‰</li>
<li>Deflateï¼šç”¨äºZIPã€PNGã€PDFç­‰</li>
<li>RLEï¼ˆè¡Œç¨‹é•¿åº¦ç¼–ç ï¼‰ï¼šç”¨äºBMPã€PCXç­‰</li>
</ul>
<h4 data-id="heading-13">3. ğŸ¨ æœ‰æŸå‹ç¼©ï¼š"å‡è‚¥å¯ä»¥å‡ç‚¹è´¨"</h4>
<p>æœ‰æŸå‹ç¼©æ˜¯æŒ‡<strong>å‹ç¼©åæ— æ³•å®Œå…¨æ¢å¤åŸå§‹æ•°æ®</strong>ï¼Œä¼šä¸¢å¤±ä¸€äº›ä¿¡æ¯ã€‚å®ƒä¸»è¦ç”¨äºç…§ç‰‡ã€éŸ³ä¹ã€è§†é¢‘ç­‰å¯ä»¥å®¹å¿å°‘é‡ä¿¡æ¯ä¸¢å¤±çš„åœºæ™¯ã€‚</p>
<p><strong>å¸¸è§çš„æœ‰æŸå‹ç¼©ç®—æ³•å’Œæ ¼å¼</strong>ï¼š</p>
<ul>
<li>JPEGï¼šç”¨äºç…§ç‰‡</li>
<li>MP3ã€AACï¼šç”¨äºéŸ³ä¹</li>
<li>MPEG-4ã€H.264ã€H.265ï¼šç”¨äºè§†é¢‘</li>
<li>WebPã€AVIFï¼šæ–°ä¸€ä»£å›¾åƒå‹ç¼©æ ¼å¼</li>
</ul>
<p><strong>ä»£ç å®ä¾‹</strong>ï¼šç”¨Pythonå®ç°ç®€å•çš„Huffmanç¼–ç ï¼ˆæ— æŸå‹ç¼©ï¼‰</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> heapq
<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict

<span class="hljs-keyword">class</span> <span class="hljs-title class_">HuffmanNode</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, char, freq</span>):
        self.char = char
        self.freq = freq
        self.left = <span class="hljs-literal">None</span>
        self.right = <span class="hljs-literal">None</span>
  
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__lt__</span>(<span class="hljs-params">self, other</span>):
        <span class="hljs-keyword">return</span> self.freq &lt; other.freq

<span class="hljs-keyword">def</span> <span class="hljs-title function_">build_frequency_dict</span>(<span class="hljs-params">text</span>):
    <span class="hljs-string">"""æ„å»ºå­—ç¬¦é¢‘ç‡å­—å…¸"""</span>
    freq = defaultdict(<span class="hljs-built_in">int</span>)
    <span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> text:
        freq[char] += <span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> freq

<span class="hljs-keyword">def</span> <span class="hljs-title function_">build_huffman_tree</span>(<span class="hljs-params">freq_dict</span>):
    <span class="hljs-string">"""æ„å»ºHuffmanæ ‘"""</span>
    priority_queue = []
    <span class="hljs-keyword">for</span> char, freq <span class="hljs-keyword">in</span> freq_dict.items():
        heapq.heappush(priority_queue, HuffmanNode(char, freq))
  
    <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(priority_queue) &gt; <span class="hljs-number">1</span>:
        left = heapq.heappop(priority_queue)
        right = heapq.heappop(priority_queue)
      
        merged = HuffmanNode(<span class="hljs-literal">None</span>, left.freq + right.freq)
        merged.left = left
        merged.right = right
      
        heapq.heappush(priority_queue, merged)
  
    <span class="hljs-keyword">return</span> priority_queue[<span class="hljs-number">0</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">build_huffman_codes</span>(<span class="hljs-params">root</span>):
    <span class="hljs-string">"""æ„å»ºHuffmanç¼–ç è¡¨"""</span>
    codes = {}
  
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_build_codes</span>(<span class="hljs-params">node, current_code</span>):
        <span class="hljs-keyword">if</span> node <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">return</span>
      
        <span class="hljs-keyword">if</span> node.char <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            codes[node.char] = current_code
            <span class="hljs-keyword">return</span>
      
        _build_codes(node.left, current_code + <span class="hljs-string">"0"</span>)
        _build_codes(node.right, current_code + <span class="hljs-string">"1"</span>)
  
    _build_codes(root, <span class="hljs-string">""</span>)
    <span class="hljs-keyword">return</span> codes

<span class="hljs-keyword">def</span> <span class="hljs-title function_">compress_text</span>(<span class="hljs-params">text, codes</span>):
    <span class="hljs-string">"""å‹ç¼©æ–‡æœ¬"""</span>
    compressed = <span class="hljs-string">""</span>
    <span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> text:
        compressed += codes[char]
    <span class="hljs-keyword">return</span> compressed

<span class="hljs-keyword">def</span> <span class="hljs-title function_">decompress_text</span>(<span class="hljs-params">compressed, root</span>):
    <span class="hljs-string">"""è§£å‹æ–‡æœ¬"""</span>
    decompressed = <span class="hljs-string">""</span>
    current_node = root
  
    <span class="hljs-keyword">for</span> bit <span class="hljs-keyword">in</span> compressed:
        <span class="hljs-keyword">if</span> bit == <span class="hljs-string">"0"</span>:
            current_node = current_node.left
        <span class="hljs-keyword">else</span>:
            current_node = current_node.right
      
        <span class="hljs-keyword">if</span> current_node.char <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            decompressed += current_node.char
            current_node = root
  
    <span class="hljs-keyword">return</span> decompressed

<span class="hljs-comment"># æµ‹è¯•ä»£ç </span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    text = <span class="hljs-string">"hello world! hello huffman coding!"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŸå§‹æ–‡æœ¬ï¼š<span class="hljs-subst">{text}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŸå§‹é•¿åº¦ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(text) * <span class="hljs-number">8</span>}</span> æ¯”ç‰¹"</span>)
  
    <span class="hljs-comment"># æ„å»ºé¢‘ç‡å­—å…¸</span>
    freq_dict = build_frequency_dict(text)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­—ç¬¦é¢‘ç‡ï¼š<span class="hljs-subst">{<span class="hljs-built_in">dict</span>(freq_dict)}</span>"</span>)
  
    <span class="hljs-comment"># æ„å»ºHuffmanæ ‘</span>
    root = build_huffman_tree(freq_dict)
  
    <span class="hljs-comment"># æ„å»ºç¼–ç è¡¨</span>
    codes = build_huffman_codes(root)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Huffmanç¼–ç ï¼š<span class="hljs-subst">{codes}</span>"</span>)
  
    <span class="hljs-comment"># å‹ç¼©æ–‡æœ¬</span>
    compressed = compress_text(text, codes)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‹ç¼©åï¼š<span class="hljs-subst">{compressed}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‹ç¼©åé•¿åº¦ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(compressed)}</span> æ¯”ç‰¹"</span>)
  
    <span class="hljs-comment"># è®¡ç®—å‹ç¼©æ¯”</span>
    compression_ratio = (<span class="hljs-built_in">len</span>(text) * <span class="hljs-number">8</span>) / <span class="hljs-built_in">len</span>(compressed)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‹ç¼©æ¯”ï¼š<span class="hljs-subst">{compression_ratio:<span class="hljs-number">.2</span>f}</span>:1"</span>)
  
    <span class="hljs-comment"># è§£å‹æ–‡æœ¬</span>
    decompressed = decompress_text(compressed, root)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è§£å‹åï¼š<span class="hljs-subst">{decompressed}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è§£å‹æ˜¯å¦æˆåŠŸï¼š<span class="hljs-subst">{text == decompressed}</span>"</span>)
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">åŸå§‹æ–‡æœ¬ï¼šhello world! hello huffman coding!
åŸå§‹é•¿åº¦ï¼š<span class="hljs-number">272</span> æ¯”ç‰¹
å­—ç¬¦é¢‘ç‡ï¼š{<span class="hljs-string">'h'</span>: <span class="hljs-number">3</span>, <span class="hljs-string">'e'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'l'</span>: <span class="hljs-number">5</span>, <span class="hljs-string">'o'</span>: <span class="hljs-number">3</span>, <span class="hljs-string">' '</span>: <span class="hljs-number">4</span>, <span class="hljs-string">'w'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'r'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'d'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'!'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'u'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'f'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'m'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'a'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'n'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'c'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'i'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'g'</span>: <span class="hljs-number">1</span>}
Huffmanç¼–ç ï¼š{<span class="hljs-string">'l'</span>: <span class="hljs-string">'00'</span>, <span class="hljs-string">' '</span>: <span class="hljs-string">'01'</span>, <span class="hljs-string">'h'</span>: <span class="hljs-string">'100'</span>, <span class="hljs-string">'o'</span>: <span class="hljs-string">'101'</span>, <span class="hljs-string">'e'</span>: <span class="hljs-string">'1100'</span>, <span class="hljs-string">'!'</span>: <span class="hljs-string">'1101'</span>, <span class="hljs-string">'n'</span>: <span class="hljs-string">'1110'</span>, <span class="hljs-string">'w'</span>: <span class="hljs-string">'1111000'</span>, <span class="hljs-string">'r'</span>: <span class="hljs-string">'1111001'</span>, <span class="hljs-string">'d'</span>: <span class="hljs-string">'1111010'</span>, <span class="hljs-string">'u'</span>: <span class="hljs-string">'1111011'</span>, <span class="hljs-string">'f'</span>: <span class="hljs-string">'1111100'</span>, <span class="hljs-string">'m'</span>: <span class="hljs-string">'1111101'</span>, <span class="hljs-string">'a'</span>: <span class="hljs-string">'1111110'</span>, <span class="hljs-string">'c'</span>: <span class="hljs-string">'11111110'</span>, <span class="hljs-string">'i'</span>: <span class="hljs-string">'111111110'</span>, <span class="hljs-string">'g'</span>: <span class="hljs-string">'111111111'</span>}
å‹ç¼©åï¼š<span class="hljs-number">1001100000010111110001111001001111010110101100000010110011110111111001111101111000110111111101111111101011111111111110</span>
å‹ç¼©åé•¿åº¦ï¼š<span class="hljs-number">138</span> æ¯”ç‰¹
å‹ç¼©æ¯”ï¼š<span class="hljs-number">1.97</span>:<span class="hljs-number">1</span>
è§£å‹åï¼šhello world! hello huffman coding!
è§£å‹æ˜¯å¦æˆåŠŸï¼š<span class="hljs-literal">True</span>
</code></pre>
<h3 data-id="heading-14">ğŸ“Š è¶£å‘³å¯¹æ¯”ï¼šæ— æŸå‹ç¼© vs æœ‰æŸå‹ç¼©</h3>













































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>æ— æŸå‹ç¼©</th><th>æœ‰æŸå‹ç¼©</th></tr></thead><tbody><tr><td><strong>ä¿¡æ¯ä¸¢å¤±</strong></td><td>æ— </td><td>æœ‰</td></tr><tr><td><strong>å‹ç¼©æ¯”</strong></td><td>ä½ï¼ˆ2-10:1ï¼‰</td><td>é«˜ï¼ˆ10-1000:1ï¼‰</td></tr><tr><td><strong>æ¢å¤è´¨é‡</strong></td><td>å®Œå…¨æ¢å¤</td><td>éƒ¨åˆ†æ¢å¤</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ–‡æœ¬ã€ç¨‹åºã€é‡è¦æ–‡æ¡£</td><td>ç…§ç‰‡ã€éŸ³ä¹ã€è§†é¢‘</td></tr><tr><td><strong>å¸¸è§æ ¼å¼</strong></td><td>ZIPã€PNGã€FLAC</td><td>JPEGã€MP3ã€H.264</td></tr><tr><td><strong>å¤„ç†é€Ÿåº¦</strong></td><td>è¾ƒå¿«</td><td>è¾ƒæ…¢ï¼ˆéœ€è¦å¤æ‚ç®—æ³•ï¼‰</td></tr><tr><td><strong>æ–‡ä»¶å¤§å°</strong></td><td>è¾ƒå¤§</td><td>è¾ƒå°</td></tr></tbody></table>
<h3 data-id="heading-15">ğŸ–¼ï¸ å¸¸è§å‹ç¼©æ ¼å¼çš„å‹ç¼©æ¯”</h3>



























































<table><thead><tr><th>å‹ç¼©æ ¼å¼</th><th>ç±»å‹</th><th>é€‚ç”¨åœºæ™¯</th><th>å…¸å‹å‹ç¼©æ¯”</th></tr></thead><tbody><tr><td>ğŸ“¦ ZIP</td><td>æ— æŸ</td><td>é€šç”¨å‹ç¼©</td><td>2-5:1</td></tr><tr><td>ğŸ–¼ï¸ PNG</td><td>æ— æŸ</td><td>å›¾ç‰‡ï¼ˆé€æ˜èƒŒæ™¯ï¼‰</td><td>2-10:1</td></tr><tr><td>ğŸµ FLAC</td><td>æ— æŸ</td><td>éŸ³ä¹</td><td>2-4:1</td></tr><tr><td>ğŸ–¼ï¸ JPEG</td><td>æœ‰æŸ</td><td>ç…§ç‰‡</td><td>10-20:1</td></tr><tr><td>ğŸµ MP3</td><td>æœ‰æŸ</td><td>éŸ³ä¹</td><td>10-12:1</td></tr><tr><td>ğŸ“¹ H.264</td><td>æœ‰æŸ</td><td>è§†é¢‘</td><td>50-100:1</td></tr><tr><td>ğŸ“¹ H.265</td><td>æœ‰æŸ</td><td>è§†é¢‘ï¼ˆ4Kï¼‰</td><td>100-200:1</td></tr><tr><td>ğŸ–¼ï¸ WebP</td><td>æœ‰æŸ/æ— æŸ</td><td>ç½‘é¡µå›¾ç‰‡</td><td>20-30:1</td></tr></tbody></table>
<h3 data-id="heading-16">ğŸ” æ•°æ®å‹ç¼©çš„"é­”æ³•"ï¼šä¸ºä»€ä¹ˆèƒ½å‹ç¼©è¿™ä¹ˆå¤šï¼Ÿ</h3>
<h4 data-id="heading-17">1. ğŸ”¤ æ–‡æœ¬å‹ç¼©ï¼š"å»æ‰é‡å¤çš„å­—"</h4>
<p>æ–‡æœ¬ä¸­å­˜åœ¨å¤§é‡é‡å¤çš„å­—ç¬¦å’Œå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚è‹±è¯­ä¸­"the"ã€"and"ç­‰å•è¯å‡ºç°é¢‘ç‡å¾ˆé«˜ï¼Œä¸­æ–‡ä¸­"çš„"ã€"äº†"ç­‰å­—å‡ºç°é¢‘ç‡å¾ˆé«˜ã€‚å‹ç¼©ç®—æ³•å¯ä»¥ç”¨æ›´çŸ­çš„ç¼–ç æ¥è¡¨ç¤ºè¿™äº›é«˜é¢‘å­—ç¬¦ï¼Œä»è€Œå‡å°‘æ€»é•¿åº¦ã€‚</p>
<h4 data-id="heading-18">2. ğŸ–¼ï¸ å›¾ç‰‡å‹ç¼©ï¼š"å»æ‰äººçœ¼çœ‹ä¸åˆ°çš„ç»†èŠ‚"</h4>
<p>å›¾ç‰‡ä¸­å­˜åœ¨å¤§é‡äººçœ¼ä¸æ•æ„Ÿçš„ä¿¡æ¯ï¼Œæ¯”å¦‚ç›¸é‚»åƒç´ çš„é¢œè‰²å·®å¼‚ã€é«˜é¢‘ç»†èŠ‚ç­‰ã€‚JPEGå‹ç¼©ç®—æ³•ä¼šæŠŠå›¾ç‰‡åˆ†æˆ8x8çš„å°å—ï¼Œç„¶åç”¨ç¦»æ•£ä½™å¼¦å˜æ¢ï¼ˆDCTï¼‰æŠŠç©ºé—´åŸŸè½¬æ¢ä¸ºé¢‘ç‡åŸŸï¼Œå»é™¤é«˜é¢‘æˆåˆ†ï¼Œå†è¿›è¡Œé‡åŒ–å’Œç¼–ç ã€‚</p>
<h4 data-id="heading-19">3. ğŸµ éŸ³é¢‘å‹ç¼©ï¼š"å»æ‰äººè€³å¬ä¸åˆ°çš„å£°éŸ³"</h4>
<p>éŸ³é¢‘ä¸­å­˜åœ¨å¤§é‡äººè€³å¬ä¸åˆ°çš„é¢‘ç‡ï¼Œæ¯”å¦‚é«˜äº20kHzçš„è¶…å£°æ³¢ã€éå¸¸å¾®å¼±çš„å£°éŸ³ç­‰ã€‚MP3å‹ç¼©ç®—æ³•ä¼šç”¨å¿ƒç†å£°å­¦æ¨¡å‹åˆ†æéŸ³é¢‘ï¼Œå»é™¤äººè€³å¬ä¸åˆ°çš„éƒ¨åˆ†ï¼Œç„¶åç”¨å­å¸¦ç¼–ç å’Œéœå¤«æ›¼ç¼–ç è¿›è¡Œå‹ç¼©ã€‚</p>
<h4 data-id="heading-20">4. ğŸ“¹ è§†é¢‘å‹ç¼©ï¼š"å»æ‰æ—¶é—´ä¸Šçš„å†—ä½™"</h4>
<p>è§†é¢‘ä¸­ç›¸é‚»å¸§çš„å†…å®¹éå¸¸ç›¸ä¼¼ï¼Œæ¯”å¦‚é™æ€èƒŒæ™¯å‡ ä¹ä¸å˜ã€‚è§†é¢‘å‹ç¼©ç®—æ³•ä¼šåªä¿å­˜ç¬¬ä¸€å¸§çš„å®Œæ•´ä¿¡æ¯ï¼Œç„¶åä¿å­˜åç»­å¸§ä¸å‰ä¸€å¸§çš„å·®å¼‚ï¼ˆè¿åŠ¨çŸ¢é‡å’Œæ®‹å·®ï¼‰ï¼Œä»è€Œå¤§å¹…å‡å°‘æ•°æ®é‡ã€‚</p>
<h3 data-id="heading-21">âš ï¸ å¸¸è§è¯¯åŒºçº æ­£</h3>
<h4 data-id="heading-22">1. "å‹ç¼©æ¯”è¶Šé«˜è¶Šå¥½ï¼Ÿ"</h4>
<p>ä¸ï¼å‹ç¼©æ¯”é«˜æ„å‘³ç€ä¿¡æ¯ä¸¢å¤±è¶Šå¤šï¼ˆæœ‰æŸå‹ç¼©ï¼‰ï¼Œæˆ–è€…å‹ç¼©æ—¶é—´è¶Šé•¿ï¼ˆæ— æŸå‹ç¼©ï¼‰ã€‚é€‰æ‹©å‹ç¼©æ¯”æ—¶ï¼Œéœ€è¦åœ¨å‹ç¼©æ•ˆæœå’Œè´¨é‡ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚</p>
<h4 data-id="heading-23">2. "æ— æŸå‹ç¼©ä¸ä¼šä¸¢å¤±ä¿¡æ¯ï¼Œæ‰€ä»¥æ¯”æœ‰æŸå‹ç¼©å¥½ï¼Ÿ"</h4>
<p>ä¸ä¸€å®šï¼æ— æŸå‹ç¼©çš„å‹ç¼©æ¯”ä½ï¼Œæ–‡ä»¶è¾ƒå¤§ï¼Œè€Œæœ‰æŸå‹ç¼©çš„å‹ç¼©æ¯”é«˜ï¼Œæ–‡ä»¶è¾ƒå°ã€‚å¯¹äºç…§ç‰‡ã€éŸ³ä¹ã€è§†é¢‘ç­‰ï¼Œæœ‰æŸå‹ç¼©çš„è´¨é‡æŸå¤±äººçœ¼/äººè€³å‡ ä¹å¯Ÿè§‰ä¸åˆ°ï¼Œå´èƒ½èŠ‚çœå¤§é‡ç©ºé—´ã€‚</p>
<h4 data-id="heading-24">3. "æ‰€æœ‰æ–‡ä»¶éƒ½èƒ½è¢«å‹ç¼©ï¼Ÿ"</h4>
<p>ä¸ï¼å·²ç»å‹ç¼©è¿‡çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚JPEGã€MP3ï¼‰å¾ˆéš¾å†è¢«å‹ç¼©ï¼Œå› ä¸ºå®ƒä»¬å·²ç»å»é™¤äº†å¤§éƒ¨åˆ†å†—ä½™ä¿¡æ¯ã€‚è€Œéšæœºæ•°æ®ï¼ˆæ¯”å¦‚åŠ å¯†æ–‡ä»¶ï¼‰å‡ ä¹æ— æ³•è¢«å‹ç¼©ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰å†—ä½™ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-25">4. "å‹ç¼©ä¼šæŸåæ–‡ä»¶ï¼Ÿ"</h4>
<p>ä¸ï¼æ­£è§„çš„å‹ç¼©è½¯ä»¶å’Œç®—æ³•ä¸ä¼šæŸåæ–‡ä»¶ã€‚åªæœ‰åœ¨å‹ç¼©æˆ–è§£å‹è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼ˆæ¯”å¦‚ç£ç›˜æ•…éšœã€æ–­ç”µï¼‰ï¼Œæ‰å¯èƒ½å¯¼è‡´æ–‡ä»¶æŸåã€‚</p>
<h4 data-id="heading-26">5. "å‹ç¼©å’Œè§£å‹ä¼šå½±å“ç”µè„‘æ€§èƒ½ï¼Ÿ"</h4>
<p>ä¼šï¼å‹ç¼©å’Œè§£å‹éœ€è¦å¤§é‡çš„CPUå’Œå†…å­˜èµ„æºï¼Œç‰¹åˆ«æ˜¯å‹ç¼©å¤§æ–‡ä»¶æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç”µè„‘å˜æ…¢ã€‚ä½†ç°åœ¨çš„ç”µè„‘æ€§èƒ½éƒ½å¾ˆå¼ºï¼Œä¸€èˆ¬ä¸ä¼šæœ‰æ˜æ˜¾å½±å“ã€‚</p>
<h3 data-id="heading-27">ğŸ”® æœªæ¥å±•æœ›ï¼šæ•°æ®å‹ç¼©çš„å‘å±•è¶‹åŠ¿</h3>
<h4 data-id="heading-28">1. ğŸ¤– AIé©±åŠ¨çš„å‹ç¼©ï¼š"æ›´æ™ºèƒ½çš„å‹ç¼©"</h4>
<p>AIæŠ€æœ¯æ­£åœ¨æ”¹å˜æ•°æ®å‹ç¼©é¢†åŸŸï¼Œé€šè¿‡æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ŒAIå¯ä»¥æ›´å‡†ç¡®åœ°è¯†åˆ«å†—ä½™ä¿¡æ¯ï¼Œé¢„æµ‹äººçœ¼/äººè€³çš„æ„ŸçŸ¥ï¼Œä»è€Œå®ç°æ›´é«˜çš„å‹ç¼©æ¯”å’Œæ›´å¥½çš„è´¨é‡ã€‚</p>
<h4 data-id="heading-29">2. ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼š"æ›´é€‚åˆæ‰‹æœºçš„å‹ç¼©"</h4>
<p>éšç€ç§»åŠ¨äº’è”ç½‘çš„å‘å±•ï¼Œé€‚åˆç§»åŠ¨ç«¯çš„å‹ç¼©æ ¼å¼ä¼šè¶Šæ¥è¶Šé‡è¦ï¼Œæ¯”å¦‚WebPã€AVIFç­‰ï¼Œå®ƒä»¬åœ¨ä¿æŒé«˜è´¨é‡çš„åŒæ—¶ï¼Œèƒ½å¤§å¹…å‡å°‘æ–‡ä»¶å¤§å°ï¼Œæé«˜æ‰‹æœºçš„åŠ è½½é€Ÿåº¦å’Œç»­èˆªã€‚</p>
<h4 data-id="heading-30">3. ğŸ“Š å®æ—¶å‹ç¼©ï¼š"è¾¹äº§ç”Ÿè¾¹å‹ç¼©"</h4>
<p>å®æ—¶å‹ç¼©æŠ€æœ¯ä¼šè¶Šæ¥è¶Šæˆç†Ÿï¼Œæ¯”å¦‚åœ¨æ‹æ‘„è§†é¢‘æ—¶å®æ—¶å‹ç¼©ï¼Œåœ¨ç›´æ’­æ—¶å®æ—¶å‹ç¼©ä¼ è¾“ï¼Œä»è€Œå‡å°‘å­˜å‚¨å’Œå¸¦å®½å¼€é”€ã€‚</p>
<h4 data-id="heading-31">4. ğŸŒ è·¨æ¨¡æ€å‹ç¼©ï¼š"åŒæ—¶å‹ç¼©å¤šç§æ•°æ®"</h4>
<p>æœªæ¥çš„å‹ç¼©æŠ€æœ¯ä¼šæ”¯æŒåŒæ—¶å‹ç¼©å¤šç§ç±»å‹çš„æ•°æ®ï¼Œæ¯”å¦‚è§†é¢‘ã€éŸ³é¢‘ã€æ–‡æœ¬ç­‰ï¼Œä»è€Œå®ç°æ›´é«˜çš„å‹ç¼©æ•ˆç‡ã€‚</p>
<h4 data-id="heading-32">5. ğŸ® æ¸¸æˆèµ„äº§å‹ç¼©ï¼š"æ›´å¤§çš„æ¸¸æˆï¼Œæ›´å°çš„å®‰è£…åŒ…"</h4>
<p>éšç€æ¸¸æˆè¶Šæ¥è¶Šå¤§ï¼Œæ¸¸æˆèµ„äº§å‹ç¼©ä¼šå˜å¾—è¶Šæ¥è¶Šé‡è¦ï¼Œé€šè¿‡æ›´é«˜æ•ˆçš„å‹ç¼©ç®—æ³•ï¼Œå¯ä»¥è®©ç©å®¶ä¸‹è½½æ›´å°çš„å®‰è£…åŒ…ï¼ŒåŒæ—¶ä¿æŒæ¸¸æˆçš„é«˜è´¨é‡ã€‚</p>
<h3 data-id="heading-33">ğŸ“ äº’åŠ¨å°æµ‹éªŒï¼šä½ ç­”å¯¹äº†å—ï¼Ÿ</h3>



































<table><thead><tr><th>é—®é¢˜</th><th>ç­”æ¡ˆ</th><th>ä½ ç­”å¯¹äº†å—ï¼Ÿ</th></tr></thead><tbody><tr><td>æ•°æ®å‹ç¼©çš„æ ¸å¿ƒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>å»é™¤å†—ä½™ä¿¡æ¯</td><td>âœ…/âŒ</td></tr><tr><td>æ— æŸå‹ç¼©å’Œæœ‰æŸå‹ç¼©çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>æ— æŸä¸ä¸¢å¤±ä¿¡æ¯ï¼Œæœ‰æŸä¸¢å¤±ä¿¡æ¯</td><td>âœ…/âŒ</td></tr><tr><td>JPEGçš„å…¸å‹å‹ç¼©æ¯”æ˜¯å¤šå°‘ï¼Ÿ</td><td>10-20:1</td><td>âœ…/âŒ</td></tr><tr><td>è§†é¢‘å‹ç¼©çš„ä¸»è¦åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>å»é™¤æ—¶é—´å†—ä½™</td><td>âœ…/âŒ</td></tr><tr><td>å·²ç»å‹ç¼©è¿‡çš„æ–‡ä»¶è¿˜èƒ½å†å‹ç¼©å—ï¼Ÿ</td><td>å¾ˆéš¾ï¼Œå› ä¸ºå·²ç»å»é™¤äº†å¤§éƒ¨åˆ†å†—ä½™ä¿¡æ¯</td><td>âœ…/âŒ</td></tr></tbody></table>
<h3 data-id="heading-34">ğŸ¯ ç»“è¯­ï¼šæ•°æ®å‹ç¼©çš„"ç˜¦èº«é­”æ³•"</h3>
<p>æ•°æ®å‹ç¼©å°±åƒ"ç»™æ•°æ®åšç˜¦èº«æ‰‹æœ¯"ï¼Œå»æ‰å¤šä½™çš„è„‚è‚ªï¼ˆå†—ä½™ä¿¡æ¯ï¼‰ï¼Œä¿ç•™æœ‰ç”¨çš„è‚Œè‚‰ï¼ˆæœ‰æ•ˆä¿¡æ¯ï¼‰ã€‚å®ƒè®©æˆ‘ä»¬èƒ½æ›´å¿«åœ°ä¼ è¾“æ•°æ®ï¼Œæ›´æœ‰æ•ˆåœ°åˆ©ç”¨å­˜å‚¨ç©ºé—´ï¼Œé™ä½æˆæœ¬ï¼Œæé«˜æ•ˆç‡ã€‚</p>
<p>ä¸‹æ¬¡ä¸‹è½½ç”µå½±ã€å‘é€ç…§ç‰‡ã€å­˜å‚¨æ–‡ä»¶æ—¶ï¼Œä¸å¦¨æƒ³æƒ³èƒŒåçš„æ•°æ®å‹ç¼©æŠ€æœ¯ã€‚æ­£æ˜¯è¿™äº›"ç˜¦èº«é­”æ³•"ï¼Œè®©æˆ‘ä»¬çš„æ•°å­—ç”Ÿæ´»å˜å¾—æ›´åŠ ä¾¿æ·å’Œé«˜æ•ˆï¼</p>
<hr/>
<h3 data-id="heading-35">ğŸ’¬ äº’åŠ¨è¯é¢˜</h3>
<ol>
<li>ä½ å¹³æ—¶ç»å¸¸ä½¿ç”¨å“ªäº›å‹ç¼©æ ¼å¼ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>
<li>ä½ è§‰å¾—æ•°æ®å‹ç¼©æŠ€æœ¯è¿˜èƒ½æœ‰å“ªäº›çªç ´ï¼Ÿ</li>
<li>ä½ é‡åˆ°è¿‡å“ªäº›å…³äºæ•°æ®å‹ç¼©çš„è¶£äº‹ï¼Ÿ</li>
</ol>
<p>å¿«æ¥è¯„è®ºåŒºèŠèŠä½ çš„æƒ³æ³•ï¼ğŸ’¬ ç‚¹èµæ”¶è—ä¸è¿·è·¯ï¼Œå’±ä»¬ä¸‹æœŸç»§ç»­æ¢ç´¢è®¡ç®—æœºçš„"åä¸‡ä¸ªä¸ºä»€ä¹ˆ"ï¼ğŸ‰</p>
<p><strong>å…³æ³¨æˆ‘</strong>ï¼Œä¸‹æœŸå¸¦ä½ è§£é”æ›´å¤šè®¡ç®—æœºçš„"å¥‡è‘©å†·çŸ¥è¯†"ï¼ğŸ¤“</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›æ”¶å›¢é˜ŸåŸºäºCursoré›†æˆMCPçš„æ™ºèƒ½ä»£ç ä¿®å¤æç¤ºè¯ç”Ÿæˆå®è·µ]]></title>    <link>https://juejin.cn/post/7587998744294752262</link>    <guid>https://juejin.cn/post/7587998744294752262</guid>    <pubDate>2025-12-26T10:29:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587998744294752262" data-draft-id="7588002126258356230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›æ”¶å›¢é˜ŸåŸºäºCursoré›†æˆMCPçš„æ™ºèƒ½ä»£ç ä¿®å¤æç¤ºè¯ç”Ÿæˆå®è·µ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,äººå·¥æ™ºèƒ½,Python"/> <meta itemprop="datePublished" content="2025-12-26T10:29:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/606586148237431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›æ”¶å›¢é˜ŸåŸºäºCursoré›†æˆMCPçš„æ™ºèƒ½ä»£ç ä¿®å¤æç¤ºè¯ç”Ÿæˆå®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586148237431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:29:56.000Z" title="Fri Dec 26 2025 10:29:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç—›ç‚¹</h2>
<h3 data-id="heading-1">ç—›ç‚¹ä¸€ï¼šä¸ºä»€ä¹ˆæˆ‘çš„Tokenæ¶ˆè€—çš„è¿™ä¹ˆå¿«</h3>
<p>Tokençš„æ¶ˆè€—é‡é€šå¸¸å—åˆ°ä¸‹é¢ä¸¤ä¸ªå› ç´ çš„å½±å“</p>
<ul>
<li>è¾“å…¥å’Œè¾“å‡ºçš„Tokenæ•°é‡ï¼šè¾“å…¥çš„Tokenè¶Šå¤šï¼Œè¾“å‡ºçš„Tokenä¹Ÿä¼šç›¸åº”å¢åŠ ï¼Œå› ä¸ºæ¨¡å‹ä¼šåŸºäºè¾“å…¥çš„ä¸Šä¸‹æ–‡è¿›è¡Œå†…å®¹ç”Ÿæˆã€‚</li>
<li>ä»»åŠ¡å¤æ‚æ€§ï¼šæ›´å¤æ‚çš„ä»»åŠ¡é€šå¸¸éœ€è¦æ¶ˆè€—æ›´å¤šçš„Tokenï¼Œè€Œå¤šæ¨¡æ€çš„Agentå¾€å¾€æ¶ˆè€—çš„Tokenä¼šæ›´é«˜ã€‚</li>
</ul>
<p>ä¸ºä»€ä¹ˆæ¨¡ç³Šçš„æç¤ºè¯ä¼šå¢åŠ Tokençš„æ¶ˆè€—é‡ï¼Ÿ</p>
<ul>
<li>æ¨¡ç³Šçš„æç¤ºè¯å¯èƒ½åŒ…å«å¤§é‡ä¸è¾“å‡ºä¸ç›¸å…³çš„å†…å®¹ï¼Œå¢åŠ è¾“å…¥çš„Tokené‡ã€‚</li>
<li>æ¨¡ç³Šçš„æç¤ºè¯é€šå¸¸ç¼ºä¹å…·ä½“ç»†èŠ‚æˆ–æ˜ç¡®çº¦æŸï¼Œå¯¼è‡´æ¨¡å‹æ— æ³•ç›´æ¥ç†è§£ç”¨æˆ·æ„å›¾ã€‚ä¸ºäº†è¦†ç›–å¯èƒ½çš„è§£é‡Šï¼Œæ¨¡å‹å€¾å‘äºç”Ÿæˆæ›´é•¿ã€æ›´å…¨é¢çš„å“åº”ï¼Œä»¥é¿å…é—æ¼å…³é”®ä¿¡æ¯ï¼Œä»è€Œå¢åŠ è¾“å‡ºtokenæ•°é‡ã€‚</li>
<li>æ¨¡ç³Šçš„æç¤ºè¯å¾€å¾€æ— æ³•ç²¾å‡†çš„ç”Ÿæˆç”¨æˆ·æƒ³è¦çš„å†…å®¹ã€‚ç”¨æˆ·å¯èƒ½å› è¾“å‡ºä¸ç¬¦åˆé¢„æœŸè€Œå¤šæ¬¡ä¿®æ”¹æç¤ºï¼Œå½¢æˆæ— æ•ˆäº¤äº’å¾ªç¯ï¼Œæ— å½¢ä¸­æµªè´¹Tokenã€‚</li>
</ul>
<h3 data-id="heading-2">ç—›ç‚¹äºŒï¼šAIä¿®å¤ä»£ç ä¸ºä»€ä¹ˆæ€»æ˜¯"å·®ç‚¹æ„æ€"ï¼Ÿ</h3>
<p>ä¸€èˆ¬éƒ½æ˜¯æ‹¿åˆ°Sonar æ‰«æç»“æœå¤åˆ¶ç²˜è´´, è®©AIä¿®å¤åï¼Œä¸€ä¸ªä¸€ä¸ªæ”¹, åˆå¤ªæ…¢, å¤ªå¤šé—®é¢˜è¦ä¹ˆä¿®å¤ä¸å‡†ç¡®ï¼Œè¦ä¹ˆæŠŠå¥½çš„ä»£ç ä¹Ÿæ”¹åäº†ï¼Œè¿˜æœ‰å°±æ˜¯é—®é¢˜
å¤ªå¤š, ä¸Šä¸‹æ–‡è¶…é™ä¿®æ”¹å¤±è´¥</p>
<p><strong>ä¸¾ä¸ªçœŸå®çš„ä¾‹å­ï¼š</strong>
SonaræŠ¥å‘Šï¼š<code>ActivityServiceImpl.java</code> ç¬¬120è¡Œå­˜åœ¨ç©ºæŒ‡é’ˆé£é™©</p>
<p>æˆ‘çš„æç¤ºè¯ï¼ˆç¬¬ä¸€ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">è¯·ä¿®å¤ä»¥ä¸‹é—®é¢˜ï¼šç¬¬<span class="hljs-number">120</span>è¡Œå­˜åœ¨ç©ºæŒ‡é’ˆé£é™©
ä»£ç ï¼š
<span class="hljs-selector-attr">[ç²˜è´´æ•´ä¸ªActivityServiceImpl.javaæ–‡ä»¶ï¼Œå¯èƒ½æ˜¯å‡ åƒè¡Œ]</span>
</code></pre>
<p>AIçš„å›å¤ï¼š</p>
<ul>
<li>æƒ…å†µ1ï¼š"è¿™ä¸ªæ–‡ä»¶å¤ªé•¿äº†ï¼Œè¯·æä¾›æ›´å…·ä½“çš„ä»£ç ç‰‡æ®µ"</li>
<li>æƒ…å†µ2ï¼šä¿®å¤äº†ç©ºæŒ‡é’ˆï¼Œä½†æŠŠæ—è¾¹çš„ä¸šåŠ¡é€»è¾‘ä¹Ÿæ”¹äº†</li>
<li>æƒ…å†µ3ï¼š"Tokenè¶…å‡ºé™åˆ¶ï¼Œæ— æ³•å¤„ç†"</li>
</ul>
<h3 data-id="heading-3">é—®é¢˜æ ¹æºåœ¨å“ªï¼Ÿ</h3>
<ol>
<li><strong>ä¸Šä¸‹æ–‡å†—ä½™</strong>ï¼šè¶…å¤§æ–‡ä»¶ä»£ç ä¸­ï¼ŒçœŸæ­£ç›¸å…³çš„å¯èƒ½åªæœ‰20è¡Œ</li>
<li><strong>ç¼ºä¹è§„èŒƒå¼•å¯¼</strong>ï¼šæ²¡å‘Šè¯‰AIè¦éµå¾ªä»€ä¹ˆç¼–ç è§„èŒƒ</li>
<li><strong>ä¿¡æ¯ä¸å‡†ç¡®</strong>ï¼šæ²¡æœ‰ç²¾ç¡®æŒ‡å‡ºé—®é¢˜åœ¨å“ªä¸ªæ–¹æ³•ã€ä»€ä¹ˆç»“æ„ä¸­</li>
<li><strong>æ²¡æœ‰ç¤ºä¾‹</strong>ï¼šAIç¼ºä¹ç±»ä¼¼é—®é¢˜çš„ä¿®å¤å‚è€ƒ</li>
</ol>
<h2 data-id="heading-4">äºŒã€è½¬æœºï¼šCursorç»“åˆMCPæ‰“é€ è‡ªåŠ¨åŒ–ä¿®å¤æµç¨‹</h2>
<p>å…³é”®é—®é¢˜åœ¨äºï¼š<strong>å¦‚ä½•å°†Sonaræ‰«æç»“æœè½¬æ¢ä¸ºAIèƒ½é«˜æ•ˆç†è§£çš„ç»“æ„åŒ–æç¤ºè¯</strong>ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘åˆ©ç”¨MCPï¼ˆModel Context Protocolï¼‰åè®®ä¸ºCursorå¼€å‘äº†ä¸€å¥—æ™ºèƒ½æç¤ºè¯ç”Ÿæˆç³»ç»Ÿã€‚</p>
<h3 data-id="heading-5">ä»€ä¹ˆæ˜¯MCPï¼Ÿ</h3>
<p>MCPï¼ˆModel Context Protocolï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾åè®®ï¼ŒCursoræ”¯æŒè¿™ä¸ªåè®®ï¼Œå…è®¸æˆ‘ä»¬é€šè¿‡Pythonç­‰è¯­è¨€ç¼–å†™è‡ªå®šä¹‰å·¥å…·ï¼Œç›´æ¥é›†æˆåˆ°Cursorçš„AIåŠ©æ‰‹ä¸­ã€‚ç®€å•è¯´å°±æ˜¯ï¼š<strong>è®©AIæ‹¥æœ‰è°ƒç”¨ä½ è‡ªå·±ç¼–å†™çš„å·¥å…·çš„èƒ½åŠ›</strong>ã€‚</p>
<h3 data-id="heading-6">æˆ‘çš„æ–¹æ¡ˆæ¶æ„</h3>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdb0e7f30b144b9db7dde7e0415c66d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349796&amp;x-signature=muUTZJGKL%2FsAHZewB9m0evKbyqU%3D" width="500" loading="lazy"/>
<h2 data-id="heading-7">ä¸‰ã€æ ¸å¿ƒæ–¹æ¡ˆï¼šå…­æ­¥æ™ºèƒ½æç¤ºè¯ç”Ÿæˆæ³•</h2>
<p>è¿™å¥—æ–¹æ¡ˆçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>è®©AIç²¾ç¡®ç†è§£é—®é¢˜ï¼Œè€Œä¸æ˜¯è®©AIå»çŒœæµ‹é—®é¢˜</strong>ã€‚</p>
<p>æ•´ä¸ªç³»ç»ŸåŸºäºä»¥ä¸‹6ä¸ªæ­¥éª¤æ„å»ºï¼š</p>
<h4 data-id="heading-8">ç¬¬ä¸€æ­¥ï¼šé—®é¢˜ç±»å‹è¯†åˆ«</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">IssueTypeClassifier</span>:
    <span class="hljs-string">"""å°†Sonarè§„åˆ™æ˜ å°„åˆ°é—®é¢˜ç±»å‹"""</span>
    
    RULE_MAPPING = {
        <span class="hljs-comment"># ç©ºæŒ‡é’ˆé—®é¢˜</span>
        <span class="hljs-string">"java:S2259"</span>: <span class="hljs-string">"NullPointer"</span>,
        <span class="hljs-string">"java:S2637"</span>: <span class="hljs-string">"NullPointer"</span>,
        
        <span class="hljs-comment"># èµ„æºæ³„éœ²</span>
        <span class="hljs-string">"java:S2095"</span>: <span class="hljs-string">"ResourceLeak"</span>,
        <span class="hljs-string">"java:S2093"</span>: <span class="hljs-string">"ResourceLeak"</span>,
        
        <span class="hljs-comment"># å®‰å…¨æ¼æ´</span>
        <span class="hljs-string">"java:S3649"</span>: <span class="hljs-string">"SQLInjection"</span>,
        <span class="hljs-string">"java:S2076"</span>: <span class="hljs-string">"CommandInjection"</span>,
        
        <span class="hljs-comment"># ä»£ç è§„èŒƒ</span>
        <span class="hljs-string">"java:S117"</span>: <span class="hljs-string">"NamingConvention"</span>,
        <span class="hljs-string">"java:S1192"</span>: <span class="hljs-string">"DuplicateString"</span>,
    }
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">classify</span>(<span class="hljs-params">rule_key: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""æ ¹æ®è§„åˆ™IDåˆ†ç±»é—®é¢˜ç±»å‹"""</span>
        <span class="hljs-keyword">return</span> IssueTypeClassifier.RULE_MAPPING.get(
            rule_key, 
            <span class="hljs-string">"General"</span>
        )
</code></pre>
<h4 data-id="heading-9">ç¬¬äºŒæ­¥ï¼šASTä»£ç ç»“æ„è§£æ</h4>
<p><strong>ä»€ä¹ˆæ˜¯ASTï¼Ÿ</strong></p>
<p>ASTï¼ˆAbstract Syntax Treeï¼ŒæŠ½è±¡è¯­æ³•æ ‘ï¼‰æ˜¯å°†ä»£ç ç†è§£æˆæ ‘å½¢ç»“æ„çš„æŠ€æœ¯ã€‚</p>
<p>å½“Sonarå‘Šè¯‰ä½ "ç¬¬120è¡Œæœ‰ç©ºæŒ‡é’ˆé—®é¢˜"ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼š</p>
<ul>
<li>ç¬¬120è¡Œåœ¨å“ªä¸ª<strong>æ–¹æ³•</strong>é‡Œï¼Ÿ</li>
<li>è¿™ä¸ªæ–¹æ³•ä»å“ªè¡Œ<strong>å¼€å§‹</strong>ï¼Œåˆ°å“ªè¡Œ<strong>ç»“æŸ</strong>ï¼Ÿ</li>
<li>æ–¹æ³•çš„å®Œæ•´ä¿¡æ¯ï¼ˆæ–¹æ³•åã€å‚æ•°ã€è¿”å›å€¼ï¼‰</li>
</ul>
<p><strong>ASTè§£æ = åƒç¼–è¯‘å™¨ä¸€æ ·ç†è§£ä»£ç ç»“æ„</strong></p>
<p>æƒ³è±¡ä»£ç æ˜¯ä¸€ä¸ªå®¶æ—ï¼ŒASTå°±æ˜¯å®¶è°±æ ‘ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">ClassDeclaration:</span> <span class="hljs-string">ActivityServiceImplï¼ˆç±»ï¼‰</span>
 <span class="hljs-string">â”‚</span>
 <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">FieldDeclaration:</span> <span class="hljs-string">activityFacadeHelperï¼ˆæˆå‘˜å˜é‡ï¼‰</span>
 <span class="hljs-string">â”‚</span>
 <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">MethodDeclaration:</span> <span class="hljs-string">queryActivityListWithNewImeiï¼ˆæ–¹æ³•ï¼‰</span>
 <span class="hljs-string">â”‚</span>   <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">position:</span> <span class="hljs-string">line</span> <span class="hljs-number">106</span>
 <span class="hljs-string">â”‚</span>   <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">parameters:</span> [<span class="hljs-string">Long</span> <span class="hljs-string">orderId</span>, <span class="hljs-string">String</span> <span class="hljs-string">newMachineUuid</span>]
 <span class="hljs-string">â”‚</span>   <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">return_type:</span> <span class="hljs-string">OrderAllowActivityMiVO</span>
 <span class="hljs-string">â”‚</span>   <span class="hljs-string">â””â”€</span> <span class="hljs-attr">body:</span> {<span class="hljs-string">...</span>}  <span class="hljs-string">â†</span> <span class="hljs-string">ç¬¬120è¡Œåœ¨è¿™é‡Œ</span>
 <span class="hljs-string">â”‚</span>
 <span class="hljs-string">â””â”€</span> <span class="hljs-attr">MethodDeclaration:</span> <span class="hljs-string">editActivityListWithNewImeiï¼ˆå¦ä¸€ä¸ªæ–¹æ³•ï¼‰</span>
</code></pre>
<p><strong>ä½¿ç”¨javalangè¿›è¡ŒASTè§£æ</strong></p>
<p>javalangæ˜¯ä¸€ä¸ªçº¯Pythonåº“ï¼Œç”¨Pythoné‡æ–°å®ç°äº†Javaè¯­æ³•è§£æå™¨ï¼Œ<strong>ä¸éœ€è¦å®‰è£…Javaç¯å¢ƒ</strong>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> javalang

<span class="hljs-keyword">class</span> <span class="hljs-title class_">JavaCodeParser</span>:
    <span class="hljs-string">"""Javaä»£ç ç»“æ„è§£æå™¨ - ä½¿ç”¨ASTç²¾ç¡®è§£æ"""</span>
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_method_context</span>(<span class="hljs-params">file_path: <span class="hljs-built_in">str</span>, line_number: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">Optional</span>[<span class="hljs-type">Dict</span>]:
        <span class="hljs-string">"""ä½¿ç”¨javalangè¿›è¡ŒASTè§£æï¼Œç²¾ç¡®å®šä½æ–¹æ³•"""</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
            code = f.read()
        
        <span class="hljs-comment"># 1. è§£æJavaä»£ç ï¼Œç”ŸæˆASTï¼ˆè¯­æ³•æ ‘ï¼‰</span>
        tree = javalang.parse.parse(code)
        
        <span class="hljs-comment"># 2. éå†ASTï¼ŒæŸ¥æ‰¾åŒ…å«ç›®æ ‡è¡Œçš„æ–¹æ³•èŠ‚ç‚¹</span>
        <span class="hljs-keyword">for</span> path, node <span class="hljs-keyword">in</span> tree.<span class="hljs-built_in">filter</span>(javalang.tree.MethodDeclaration):
            method_start = node.position.line
            method_end = calculate_method_end(node)  <span class="hljs-comment"># è®¡ç®—æ–¹æ³•ç»“æŸä½ç½®</span>
            
            <span class="hljs-comment"># 3. æ£€æŸ¥ç›®æ ‡è¡Œæ˜¯å¦åœ¨æ­¤æ–¹æ³•èŒƒå›´å†…</span>
            <span class="hljs-keyword">if</span> method_start &lt;= line_number &lt;= method_end:
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-string">'class_name'</span>: extract_class_name(path),
                    <span class="hljs-string">'method_name'</span>: node.name,              <span class="hljs-comment"># æ–¹æ³•å</span>
                    <span class="hljs-string">'start_line'</span>: method_start,            <span class="hljs-comment"># æ–¹æ³•å¼€å§‹è¡Œ</span>
                    <span class="hljs-string">'end_line'</span>: method_end,                <span class="hljs-comment"># æ–¹æ³•ç»“æŸè¡Œ</span>
                    <span class="hljs-string">'modifiers'</span>: node.modifiers,           <span class="hljs-comment"># ['public', 'static']</span>
                    <span class="hljs-string">'return_type'</span>: node.return_type.name,  <span class="hljs-comment"># è¿”å›å€¼ç±»å‹</span>
                    <span class="hljs-string">'parameters'</span>: [p.name <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> node.parameters],  <span class="hljs-comment"># å‚æ•°åˆ—è¡¨</span>
                }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<p><strong>ASTè§£æçš„ä»·å€¼</strong>ï¼š</p>
<ol>
<li><strong>ç²¾ç¡®å®šä½</strong>ï¼šç›´æ¥çŸ¥é“ç¬¬120è¡Œåœ¨<code>queryActivityListWithNewImei</code>æ–¹æ³•å†…ï¼Œè€Œä¸æ˜¯<code>editActivityListWithNewIme</code>æ–¹æ³•</li>
<li><strong>å®Œæ•´ä¿¡æ¯</strong>ï¼šè·å–æ–¹æ³•åã€å‚æ•°ç±»å‹ã€è¿”å›å€¼ç­‰å…ƒä¿¡æ¯</li>
<li><strong>è¯­æ³•ç†è§£</strong>ï¼šåƒç¼–è¯‘å™¨ä¸€æ ·ç†è§£Javaè¯­æ³•ï¼Œä¸ä¼šè¢«æ³¨é‡Šã€å­—ç¬¦ä¸²ã€Lambdaè¡¨è¾¾å¼å¹²æ‰°</li>
<li><strong>é«˜å‡†ç¡®ç‡</strong>ï¼šå‡†ç¡®ç‡å¯è¾¾99%+</li>
</ol>
<p><strong>javalangçš„ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>çº¯Pythonåº“ï¼Œåªéœ€<code>pip install javalang</code></li>
<li>ä¸éœ€è¦å®‰è£…JDKæˆ–Javaç¯å¢ƒ</li>
<li>æä¾›å®Œæ•´çš„Javaè¯­æ³•æ ‘èŠ‚ç‚¹</li>
<li>æ”¯æŒJava 8+çš„è¯­æ³•ç‰¹æ€§</li>
</ul>
<h4 data-id="heading-10">ç¬¬ä¸‰æ­¥ï¼šæ™ºèƒ½ä¸Šä¸‹æ–‡æå–</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextExtractor</span>:
    <span class="hljs-string">"""æ ¹æ®é—®é¢˜ç±»å‹æ™ºèƒ½æå–ä»£ç ä¸Šä¸‹æ–‡"""</span>
    
    <span class="hljs-comment"># ä¸åŒé—®é¢˜ç±»å‹çš„æå–ç­–ç•¥é…ç½®</span>
    EXTRACTION_RULES = {
        <span class="hljs-string">"NullPointer"</span>: {
            <span class="hljs-string">"range"</span>: <span class="hljs-string">"full_method"</span>,           <span class="hljs-comment"># æå–å®Œæ•´æ–¹æ³•</span>
            <span class="hljs-string">"max_lines"</span>: <span class="hljs-number">150</span>,
            <span class="hljs-string">"include_imports"</span>: <span class="hljs-literal">True</span>,           <span class="hljs-comment"># åŒ…å«importè¯­å¥</span>
            <span class="hljs-string">"include_class_declaration"</span>: <span class="hljs-literal">True</span>, <span class="hljs-comment"># åŒ…å«ç±»å£°æ˜</span>
        },
        <span class="hljs-string">"ResourceLeak"</span>: {
            <span class="hljs-string">"range"</span>: <span class="hljs-string">"full_method"</span>,
            <span class="hljs-string">"max_lines"</span>: <span class="hljs-number">100</span>,
            <span class="hljs-string">"include_imports"</span>: <span class="hljs-literal">True</span>,
            <span class="hljs-string">"include_class_declaration"</span>: <span class="hljs-literal">True</span>,
        },
        <span class="hljs-string">"SQLInjection"</span>: {
            <span class="hljs-string">"range"</span>: <span class="hljs-string">"full_method"</span>,
            <span class="hljs-string">"max_lines"</span>: <span class="hljs-number">120</span>,
            <span class="hljs-string">"include_imports"</span>: <span class="hljs-literal">False</span>,
            <span class="hljs-string">"include_class_declaration"</span>: <span class="hljs-literal">True</span>,
        },
        <span class="hljs-string">"NamingConvention"</span>: {
            <span class="hljs-string">"range"</span>: <span class="hljs-string">"surrounding"</span>,            <span class="hljs-comment"># åªæå–å‘¨å›´ä»£ç </span>
            <span class="hljs-string">"max_lines"</span>: <span class="hljs-number">30</span>,
            <span class="hljs-string">"include_imports"</span>: <span class="hljs-literal">False</span>,
            <span class="hljs-string">"include_class_declaration"</span>: <span class="hljs-literal">False</span>,
        },
        <span class="hljs-string">"General"</span>: {
            <span class="hljs-string">"range"</span>: <span class="hljs-string">"surrounding"</span>,
            <span class="hljs-string">"max_lines"</span>: <span class="hljs-number">50</span>,
            <span class="hljs-string">"include_imports"</span>: <span class="hljs-literal">False</span>,
            <span class="hljs-string">"include_class_declaration"</span>: <span class="hljs-literal">False</span>,
        },
    }
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract</span>(<span class="hljs-params">file_path: <span class="hljs-built_in">str</span>, line_number: <span class="hljs-built_in">int</span>, issue_type: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""æ™ºèƒ½æå–ä»£ç ä¸Šä¸‹æ–‡"""</span>
        rules = ContextExtractor.EXTRACTION_RULES.get(
            issue_type,
            ContextExtractor.EXTRACTION_RULES[<span class="hljs-string">"General"</span>]
        )
        
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
                lines = f.readlines()
            
            context_lines = []
            
            <span class="hljs-comment"># 1. æå–packageå’Œimportsï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
            <span class="hljs-keyword">if</span> rules.get(<span class="hljs-string">"include_imports"</span>):
                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines[:<span class="hljs-number">50</span>]:
                    <span class="hljs-keyword">if</span> line.strip().startswith((<span class="hljs-string">'package '</span>, <span class="hljs-string">'import '</span>)):
                        context_lines.append(line)
                    <span class="hljs-keyword">elif</span> line.strip() <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> line.strip().startswith(<span class="hljs-string">'//'</span>):
                        <span class="hljs-keyword">break</span>
                <span class="hljs-keyword">if</span> context_lines:
                    context_lines.append(<span class="hljs-string">'\n'</span>)
            
            <span class="hljs-comment"># 2. æå–æ–¹æ³•æˆ–å‘¨å›´ä»£ç </span>
            <span class="hljs-keyword">if</span> rules[<span class="hljs-string">"range"</span>] == <span class="hljs-string">"full_method"</span>:
                method_info = JavaCodeParser.extract_method_context(file_path, line_number)
                <span class="hljs-keyword">if</span> method_info:
                    start = method_info[<span class="hljs-string">'start_line'</span>] - <span class="hljs-number">1</span>
                    end = method_info[<span class="hljs-string">'end_line'</span>]
                    
                    <span class="hljs-comment"># å¦‚æœéœ€è¦ç±»å£°æ˜ï¼Œå‘ä¸ŠæŸ¥æ‰¾</span>
                    <span class="hljs-keyword">if</span> rules.get(<span class="hljs-string">"include_class_declaration"</span>):
                        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(start, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):
                            <span class="hljs-keyword">if</span> <span class="hljs-string">'class '</span> <span class="hljs-keyword">in</span> lines[i]:
                                context_lines.append(lines[i])
                                context_lines.append(<span class="hljs-string">'    // ... å…¶ä»–æˆå‘˜ ...\n\n'</span>)
                                <span class="hljs-keyword">break</span>
                    
                    context_lines.extend(lines[start:end])
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-comment"># å›é€€åˆ°å‘¨å›´ä»£ç </span>
                    start = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, line_number - <span class="hljs-number">25</span>)
                    end = <span class="hljs-built_in">min</span>(<span class="hljs-built_in">len</span>(lines), line_number + <span class="hljs-number">25</span>)
                    context_lines.extend(lines[start:end])
            <span class="hljs-keyword">else</span>:
                <span class="hljs-comment"># æå–å‘¨å›´ä»£ç </span>
                max_lines = rules[<span class="hljs-string">"max_lines"</span>]
                start = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, line_number - max_lines // <span class="hljs-number">2</span>)
                end = <span class="hljs-built_in">min</span>(<span class="hljs-built_in">len</span>(lines), line_number + max_lines // <span class="hljs-number">2</span>)
                context_lines.extend(lines[start:end])
            
            <span class="hljs-comment"># 3. é™åˆ¶æ€»è¡Œæ•°</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(context_lines) &gt; rules[<span class="hljs-string">"max_lines"</span>]:
                context_lines = context_lines[:rules[<span class="hljs-string">"max_lines"</span>]]
                context_lines.append(<span class="hljs-string">'\n// ... åç»­ä»£ç çœç•¥ ...\n'</span>)
            
            <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>.join(context_lines)
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logging.error(<span class="hljs-string">f"æå–å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-string">f"// æ— æ³•è¯»å–æ–‡ä»¶: <span class="hljs-subst">{file_path}</span>"</span>
</code></pre>
<p><strong>æ ¸å¿ƒç­–ç•¥</strong>ï¼š</p>
<ul>
<li><strong>å·®å¼‚åŒ–æå–</strong>ï¼šç©ºæŒ‡é’ˆé—®é¢˜æå–150è¡Œå«importsï¼Œå‘½åè§„èŒƒåªæå–30è¡Œ</li>
<li><strong>æ™ºèƒ½å›é€€</strong>ï¼šASTè§£æå¤±è´¥æ—¶è‡ªåŠ¨å›é€€åˆ°ç®€å•æå–</li>
<li><strong>Tokenæ§åˆ¶</strong>ï¼šé€šè¿‡max_linesé™åˆ¶ï¼Œé¿å…ä¸Šä¸‹æ–‡è¿‡é•¿</li>
</ul>
<h4 data-id="heading-11">ç¬¬å››æ­¥ï¼šåˆ†å±‚æ¨¡æ¿ä½“ç³»</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PromptTemplateEngine</span>:
    <span class="hljs-string">"""åˆ†å±‚çš„æç¤ºè¯æ¨¡æ¿å¼•æ“"""</span>
    
    <span class="hljs-comment"># Javaè¯­è¨€è§„èŒƒ</span>
    JAVA_STANDARDS = <span class="hljs-string">"""
è¯·éµå¾ªä»¥ä¸‹Javaå¼€å‘è§„èŒƒï¼š
1. éµå¾ªé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œçš„ç¼–ç è§„èŒƒ
2. æ‰€æœ‰å¯èƒ½ä¸ºnullçš„å‚æ•°å¿…é¡»è¿›è¡Œé˜²å¾¡æ€§æ£€æŸ¥
3. èµ„æºï¼ˆæ–‡ä»¶æµã€æ•°æ®åº“è¿æ¥ç­‰ï¼‰å¿…é¡»ä½¿ç”¨try-with-resourcesè‡ªåŠ¨ç®¡ç†
4. å¼‚å¸¸å¿…é¡»å¦¥å–„å¤„ç†ï¼Œä¸å¾—åæ‰å¼‚å¸¸
5. æ–¹æ³•å¤æ‚åº¦ä¸å¾—è¿‡é«˜ï¼Œä¿æŒä»£ç å¯è¯»æ€§
6. å˜é‡å’Œæ–¹æ³•å‘½åè¦æ¸…æ™°ã€ç¬¦åˆé©¼å³°å‘½åè§„èŒƒ
"""</span>
    
    <span class="hljs-comment"># é—®é¢˜ç±»å‹ç‰¹å®šæ¨¡æ¿</span>
    ISSUE_TEMPLATES = {
        <span class="hljs-string">"NullPointer"</span>: {
            <span class="hljs-string">"task"</span>: <span class="hljs-string">"ä¿®å¤ä»¥ä¸‹ä»£ç ä¸­çš„ç©ºæŒ‡é’ˆé£é™©é—®é¢˜"</span>,
            <span class="hljs-string">"requirements"</span>: <span class="hljs-string">"""
ä¿®å¤è¦æ±‚ï¼š
1. åœ¨æ–¹æ³•å¼€å§‹å¤„å¯¹å¯èƒ½ä¸ºnullçš„å‚æ•°è¿›è¡Œæ£€æŸ¥
2. å¦‚æœå‚æ•°ä¸ºnullï¼ŒæŠ›å‡ºIllegalArgumentExceptionå¼‚å¸¸ï¼Œå¹¶æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
3. ä¿æŒåŸæœ‰ä¸šåŠ¡é€»è¾‘ä¸å˜
4. ä¸è¦ä¿®æ”¹æ–¹æ³•ç­¾å
5. ç¡®ä¿ä¿®å¤åä¸å½±å“å…¶ä»–æ­£å¸¸è°ƒç”¨
"""</span>
        },
        <span class="hljs-string">"ResourceLeak"</span>: {
            <span class="hljs-string">"task"</span>: <span class="hljs-string">"ä¿®å¤ä»¥ä¸‹ä»£ç ä¸­çš„èµ„æºæ³„éœ²é—®é¢˜"</span>,
            <span class="hljs-string">"requirements"</span>: <span class="hljs-string">"""
ä¿®å¤è¦æ±‚ï¼š
1. ä½¿ç”¨try-with-resourcesè¯­å¥åŒ…è£¹éœ€è¦å…³é—­çš„èµ„æº
2. ç¡®ä¿åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ˆæ­£å¸¸æˆ–å¼‚å¸¸ï¼‰èµ„æºéƒ½èƒ½æ­£ç¡®é‡Šæ”¾
3. ä¿æŒåŸæœ‰å¼‚å¸¸å¤„ç†æ–¹å¼
4. ä¿æŒæ–¹æ³•ç­¾åä¸å˜
"""</span>
        },
        <span class="hljs-string">"SQLInjection"</span>: {
            <span class="hljs-string">"task"</span>: <span class="hljs-string">"ä¿®å¤ä»¥ä¸‹ä»£ç ä¸­çš„SQLæ³¨å…¥å®‰å…¨æ¼æ´"</span>,
            <span class="hljs-string">"requirements"</span>: <span class="hljs-string">"""
ä¿®å¤è¦æ±‚ï¼š
1. å¿…é¡»ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼ˆPreparedStatementï¼‰æ›¿ä»£å­—ç¬¦ä¸²æ‹¼æ¥
2. ä½¿ç”¨å ä½ç¬¦ï¼ˆ?ï¼‰å’Œå‚æ•°ç»‘å®šä¼ é€’ç”¨æˆ·è¾“å…¥
3. ä¸å¾—ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥æˆ–æ ¼å¼åŒ–æ–¹å¼æ„å»ºSQLè¯­å¥
4. ä¿æŒæŸ¥è¯¢é€»è¾‘ä¸å˜
"""</span>
        },
    }
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate</span>(<span class="hljs-params">issue_type: <span class="hljs-built_in">str</span>, issue_data: <span class="hljs-built_in">dict</span>, code_context: <span class="hljs-built_in">str</span>, examples: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""ç”Ÿæˆæœ€ç»ˆæç¤ºè¯"""</span>
        
        template = PromptTemplateEngine.ISSUE_TEMPLATES.get(
            issue_type,
            {<span class="hljs-string">"task"</span>: <span class="hljs-string">"ä¿®å¤ä»¥ä¸‹ä»£ç é—®é¢˜"</span>, <span class="hljs-string">"requirements"</span>: <span class="hljs-string">"ä¿æŒä»£ç é£æ ¼ä¸é¡¹ç›®ä¸€è‡´"</span>}
        )
        
        <span class="hljs-comment"># ç»„è£…æç¤ºè¯</span>
        prompt = <span class="hljs-string">f"""ä½ æ˜¯ä¸€ä½ç²¾é€šJavaå¼€å‘çš„èµ„æ·±å·¥ç¨‹å¸ˆã€‚

ä»»åŠ¡ï¼š<span class="hljs-subst">{template[<span class="hljs-string">'task'</span>]}</span>

ç¼–ç è§„èŒƒï¼š<span class="hljs-subst">{PromptTemplateEngine.JAVA_STANDARDS.strip()}</span>
"""</span>
        
        <span class="hljs-comment"># æ·»åŠ ç¤ºä¾‹ï¼ˆå¦‚æœæœ‰ï¼‰</span>
        <span class="hljs-keyword">if</span> examples:
            prompt += <span class="hljs-string">f"\n<span class="hljs-subst">{examples}</span>\n"</span>
        
        <span class="hljs-comment"># æ·»åŠ é—®é¢˜è¯¦æƒ…</span>
        prompt += <span class="hljs-string">f"""
é—®é¢˜è¯¦æƒ…ï¼š
- è§„åˆ™ID: <span class="hljs-subst">{issue_data.get(<span class="hljs-string">'rule'</span>, <span class="hljs-string">'Unknown'</span>)}</span>
- é—®é¢˜ç±»å‹: <span class="hljs-subst">{issue_type}</span>
- ä¸¥é‡çº§åˆ«: <span class="hljs-subst">{issue_data.get(<span class="hljs-string">'severity'</span>, <span class="hljs-string">'MAJOR'</span>)}</span>
- é—®é¢˜æè¿°: <span class="hljs-subst">{issue_data.get(<span class="hljs-string">'message'</span>, <span class="hljs-string">''</span>)}</span>
- é—®é¢˜ä½ç½®: ç¬¬<span class="hljs-subst">{issue_data.get(<span class="hljs-string">'line'</span>, <span class="hljs-number">0</span>)}</span>è¡Œ

å¾…ä¿®å¤ä»£ç ï¼š
```java
<span class="hljs-subst">{code_context}</span>
``` <span class="hljs-subst">{data-source-line=<span class="hljs-string">"360"</span>}</span>

<span class="hljs-subst">{template[<span class="hljs-string">'requirements'</span>].strip()}</span>

è¾“å‡ºæ ¼å¼ï¼š
- ä»…è¾“å‡ºä¿®å¤åçš„å®Œæ•´æ–¹æ³•ä»£ç 
- ä½¿ç”¨```java```æ ¼å¼åŒ…è£¹ä»£ç 
- ä¸è¦è¾“å‡ºå¤šä½™çš„è§£é‡Šæ–‡å­—
- ç¡®ä¿ä»£ç å¯ä»¥ç›´æ¥æ›¿æ¢åŸæœ‰æ–¹æ³•
"""</span>
        
        <span class="hljs-keyword">return</span> prompt
</code></pre>
<p><strong>æ¨¡æ¿è®¾è®¡</strong>ï¼š</p>
<ul>
<li><strong>ä¸‰å±‚ç»“æ„</strong>ï¼šè§’è‰²è®¾å®š + ç¼–ç è§„èŒƒ + é—®é¢˜ç±»å‹ç‰¹å®šè¦æ±‚</li>
<li><strong>çµæ´»æ‰©å±•</strong>ï¼šæ–°å¢é—®é¢˜ç±»å‹åªéœ€æ·»åŠ æ¨¡æ¿é…ç½®</li>
<li><strong>è§„èŒƒæ³¨å…¥</strong>ï¼šè‡ªåŠ¨æ³¨å…¥é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œè§„èŒƒ</li>
</ul>
<h4 data-id="heading-12">ç¬¬äº”æ­¥ï¼šFew-shotç¤ºä¾‹åº“</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ExampleRepository</span>:
    <span class="hljs-string">"""é—®é¢˜ä¿®å¤ç¤ºä¾‹åº“ - æä¾›ä¿®å¤å‰åçš„å¯¹æ¯”æ¡ˆä¾‹"""</span>
    
    EXAMPLES = {
        <span class="hljs-string">"NullPointer"</span>: <span class="hljs-string">"""
å‚è€ƒç¤ºä¾‹ï¼š

ç¤ºä¾‹1 - ç©ºæŒ‡é’ˆé˜²å¾¡æ€§æ£€æŸ¥ï¼š
ä¿®å¤å‰ï¼š
```java
public String getUserEmail(User user) {
    return user.getEmail();
}
``` {data-source-line="395"}
ä¿®å¤åï¼š
```java
public String getUserEmail(User user) {
    if (user == null) {
        throw new IllegalArgumentException("ç”¨æˆ·å¯¹è±¡ä¸èƒ½ä¸ºç©º");
    }
    return user.getEmail();
}
``` {data-source-line="404"}

ç¤ºä¾‹2 - å¤šå‚æ•°ç©ºå€¼æ£€æŸ¥ï¼š
ä¿®å¤å‰ï¼š
```java
public void processOrder(Order order, User user) {
    order.setUser(user);
    order.setStatus("processed");
}
``` {data-source-line="413"}
ä¿®å¤åï¼š
```java
public void processOrder(Order order, User user) {
    if (order == null) {
        throw new IllegalArgumentException("è®¢å•å¯¹è±¡ä¸èƒ½ä¸ºç©º");
    }
    if (user == null) {
        throw new IllegalArgumentException("ç”¨æˆ·å¯¹è±¡ä¸èƒ½ä¸ºç©º");
    }
    order.setUser(user);
    order.setStatus("processed");
}
``` {data-source-line="426"}
"""</span>,
        <span class="hljs-string">"ResourceLeak"</span>: <span class="hljs-string">"""
å‚è€ƒç¤ºä¾‹ï¼š

ç¤ºä¾‹ - ä½¿ç”¨try-with-resourcesï¼š
ä¿®å¤å‰ï¼š
```java
public String readFile(String path) throws IOException {
    FileInputStream fis = new FileInputStream(path);
    byte[] buffer = new byte[1024];
    int length = fis.read(buffer);
    return new String(buffer, 0, length);
}
``` {data-source-line="440"}
ä¿®å¤åï¼š
```java
public String readFile(String path) throws IOException {
    try (FileInputStream fis = new FileInputStream(path)) {
        byte[] buffer = new byte[1024];
        int length = fis.read(buffer);
        return new String(buffer, 0, length);
    }
}
``` {data-source-line="450"}
"""</span>,
        <span class="hljs-string">"SQLInjection"</span>: <span class="hljs-string">"""
å‚è€ƒç¤ºä¾‹ï¼š

ç¤ºä¾‹ - ä½¿ç”¨PreparedStatementï¼š
ä¿®å¤å‰ï¼š
```java
public User findUserByName(String name) {
    String sql = "SELECT * FROM users WHERE name = '" + name + "'";
    return jdbcTemplate.queryForObject(sql, User.class);
}
``` {data-source-line="462"}
ä¿®å¤åï¼š
```java
public User findUserByName(String name) {
    String sql = "SELECT * FROM users WHERE name = ?";
    return jdbcTemplate.queryForObject(sql, User.class, name);
}
``` {data-source-line="469"}
"""</span>,
    }
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_examples</span>(<span class="hljs-params">issue_type: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""è·å–ç›¸å…³ç¤ºä¾‹"""</span>
        <span class="hljs-keyword">return</span> ExampleRepository.EXAMPLES.get(issue_type, <span class="hljs-string">""</span>)
</code></pre>
<p><strong>ç¤ºä¾‹åº“ä»·å€¼</strong>ï¼š</p>
<ul>
<li><strong>Few-shotå­¦ä¹ </strong>ï¼šè®©AIé€šè¿‡æ¡ˆä¾‹å­¦ä¹ ä¿®å¤æ¨¡å¼</li>
<li><strong>æ ¼å¼ç»Ÿä¸€</strong>ï¼šä¿®å¤å‰/åå¯¹æ¯”ï¼Œæ¸…æ™°æ˜äº†</li>
<li><strong>æ˜“äºæ‰©å±•</strong>ï¼šæ–°å¢ç¤ºä¾‹åªéœ€æ·»åŠ å­—ç¬¦ä¸²é…ç½®</li>
</ul>
<h4 data-id="heading-13">ç¬¬å…­æ­¥ï¼šæ•´åˆåˆ°MCPæœåŠ¡</h4>
<p>ç°åœ¨ï¼Œå°†æ‰€æœ‰ç»„ä»¶æ•´åˆåˆ°MCPæœåŠ¡ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> mcp.server <span class="hljs-keyword">import</span> FastMCP
<span class="hljs-keyword">import</span> httpx
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> os

mcp = FastMCP(<span class="hljs-string">"intelligent-code-fix"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelligentPromptGenerator</span>:
    <span class="hljs-string">"""æ™ºèƒ½æç¤ºè¯ç”Ÿæˆå™¨ - æ•´åˆ6æ­¥ç”Ÿæˆæ³•çš„æ ¸å¿ƒç±»"""</span>
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_for_issue</span>(<span class="hljs-params">issue: <span class="hljs-built_in">dict</span>, base_dir: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""ä¸ºå•ä¸ªissueç”Ÿæˆæ™ºèƒ½æç¤ºè¯"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># 1. æå–issueä¿¡æ¯</span>
            rule_key = issue.get(<span class="hljs-string">'rule'</span>, <span class="hljs-string">''</span>)
            component = issue.get(<span class="hljs-string">'component'</span>, <span class="hljs-string">''</span>)
            file_path = component.split(<span class="hljs-string">':'</span>, <span class="hljs-number">1</span>)[<span class="hljs-number">1</span>] <span class="hljs-keyword">if</span> <span class="hljs-string">':'</span> <span class="hljs-keyword">in</span> component <span class="hljs-keyword">else</span> component
            full_path = os.path.join(base_dir, file_path)
            line_number = issue.get(<span class="hljs-string">'line'</span>, <span class="hljs-number">0</span>)
            message = issue.get(<span class="hljs-string">'message'</span>, <span class="hljs-string">''</span>)
            severity = issue.get(<span class="hljs-string">'severity'</span>, <span class="hljs-string">'MAJOR'</span>)
            
            <span class="hljs-comment"># 2. é—®é¢˜ç±»å‹è¯†åˆ«</span>
            issue_type = IssueTypeClassifier.classify(rule_key)
            
            logging.info(<span class="hljs-string">f"å¤„ç†é—®é¢˜: <span class="hljs-subst">{file_path}</span>:<span class="hljs-subst">{line_number}</span> - <span class="hljs-subst">{issue_type}</span>"</span>)
            
            <span class="hljs-comment"># 3. æå–ä»£ç ä¸Šä¸‹æ–‡</span>
            code_context = ContextExtractor.extract(full_path, line_number, issue_type)
            
            <span class="hljs-comment"># 4. è·å–ç¤ºä¾‹</span>
            examples = ExampleRepository.get_examples(issue_type)
            
            <span class="hljs-comment"># 5. ç”Ÿæˆæç¤ºè¯</span>
            issue_data = {
                <span class="hljs-string">'rule'</span>: rule_key,
                <span class="hljs-string">'severity'</span>: severity,
                <span class="hljs-string">'message'</span>: message,
                <span class="hljs-string">'line'</span>: line_number,
            }
            
            prompt = PromptTemplateEngine.generate(
                issue_type=issue_type,
                issue_data=issue_data,
                code_context=code_context,
                examples=examples
            )
            
            <span class="hljs-comment"># 6. è®¡ç®—å…ƒæ•°æ®</span>
            token_estimate = <span class="hljs-built_in">len</span>(prompt) // <span class="hljs-number">4</span>  <span class="hljs-comment"># ç²—ç•¥ä¼°ç®—</span>
            
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'success'</span>: <span class="hljs-literal">True</span>,
                <span class="hljs-string">'prompt'</span>: prompt,
                <span class="hljs-string">'metadata'</span>: {
                    <span class="hljs-string">'file'</span>: file_path,
                    <span class="hljs-string">'line'</span>: line_number,
                    <span class="hljs-string">'issue_type'</span>: issue_type,
                    <span class="hljs-string">'rule'</span>: rule_key,
                    <span class="hljs-string">'severity'</span>: severity,
                    <span class="hljs-string">'token_estimate'</span>: token_estimate,
                }
            }
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logging.error(<span class="hljs-string">f"ç”Ÿæˆæç¤ºè¯å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'success'</span>: <span class="hljs-literal">False</span>,
                <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e),
                <span class="hljs-string">'file'</span>: file_path,
                <span class="hljs-string">'line'</span>: line_number,
            }

<span class="hljs-meta">@mcp.tool(<span class="hljs-params"><span class="hljs-string">"auto-fix-sonar-issues"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">auto_fix_sonar_issues</span>(<span class="hljs-params">
    project_name: <span class="hljs-built_in">str</span>,
    cookie: <span class="hljs-built_in">str</span>,
    base_dir: <span class="hljs-built_in">str</span>,
    branch: <span class="hljs-built_in">str</span> = <span class="hljs-literal">None</span>,
    page_size: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span>,
    page_num: <span class="hljs-built_in">int</span> = <span class="hljs-number">1</span>,
    is_new_code_period: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>
</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""æ™ºèƒ½ä¿®å¤Sonaræ‰«æé—®é¢˜ - æ ¸å¿ƒMCPå·¥å…·"""</span>
    
    <span class="hljs-comment"># è·å–Sonaré—®é¢˜åˆ—è¡¨</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.AsyncClient() <span class="hljs-keyword">as</span> client:
        params = {
            <span class="hljs-string">"components"</span>: project_name,
            <span class="hljs-string">"ps"</span>: page_size,
            <span class="hljs-string">"p"</span>: page_num,
        }
        <span class="hljs-keyword">if</span> branch:
            params[<span class="hljs-string">"branch"</span>] = branch
        <span class="hljs-keyword">if</span> is_new_code_period:
            params[<span class="hljs-string">"inNewCodePeriod"</span>] = <span class="hljs-string">"true"</span>
        
        response = <span class="hljs-keyword">await</span> client.get(
            <span class="hljs-string">"https://sonar.zhuanspirit.com/api/issues/search"</span>,
            params=params,
            headers={<span class="hljs-string">"Cookie"</span>: cookie},
            timeout=<span class="hljs-number">10.0</span>
        )
        
        data = response.json()
        issues = data.get(<span class="hljs-string">'issues'</span>, [])
        total = data.get(<span class="hljs-string">'total'</span>, <span class="hljs-number">0</span>)
    
    <span class="hljs-comment"># ä¸ºæ¯ä¸ªissueç”Ÿæˆæ™ºèƒ½æç¤ºè¯</span>
    results = []
    success_count = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">for</span> idx, issue <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(issues, <span class="hljs-number">1</span>):
        result = IntelligentPromptGenerator.generate_for_issue(issue, base_dir)
        
        <span class="hljs-keyword">if</span> result[<span class="hljs-string">'success'</span>]:
            success_count += <span class="hljs-number">1</span>
            metadata = result[<span class="hljs-string">'metadata'</span>]
            results.append(<span class="hljs-string">f"""
<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">80</span>}</span>
## Issue <span class="hljs-subst">{idx}</span>: <span class="hljs-subst">{metadata[<span class="hljs-string">'file'</span>]}</span> (ç¬¬<span class="hljs-subst">{metadata[<span class="hljs-string">'line'</span>]}</span>è¡Œ)

**é—®é¢˜ç±»å‹**: <span class="hljs-subst">{metadata[<span class="hljs-string">'issue_type'</span>]}</span>  
**ä¸¥é‡çº§åˆ«**: <span class="hljs-subst">{metadata[<span class="hljs-string">'severity'</span>]}</span>  
**é¢„ä¼°Token**: <span class="hljs-subst">{metadata[<span class="hljs-string">'token_estimate'</span>]}</span>

### ç”Ÿæˆçš„æ™ºèƒ½æç¤ºè¯ï¼š

<span class="hljs-subst">{result[<span class="hljs-string">'prompt'</span>]}</span>
<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">80</span>}</span>
"""</span>)
    
    <span class="hljs-comment"># ç»„è£…æœ€ç»ˆè¾“å‡º</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"""
# æ™ºèƒ½ä»£ç ä¿®å¤æç¤ºè¯ç”Ÿæˆå®Œæˆ

## ç»Ÿè®¡ä¿¡æ¯
- **é¡¹ç›®**: <span class="hljs-subst">{project_name}</span>
- **æ€»é—®é¢˜æ•°**: <span class="hljs-subst">{total}</span>
- **æœ¬æ‰¹æ¬¡**: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(issues)}</span> ä¸ª
- **æˆåŠŸç”Ÿæˆ**: <span class="hljs-subst">{success_count}</span> ä¸ª

## æ™ºèƒ½æç¤ºè¯åˆ—è¡¨
<span class="hljs-subst">{<span class="hljs-string">""</span>.join(results)}</span>

---
ç”±æ™ºèƒ½æç¤ºè¯ç”Ÿæˆå¼•æ“æä¾›æ”¯æŒ
"""</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    mcp.run(<span class="hljs-string">"stdio"</span>)
</code></pre>
<p><strong>æ•´åˆè¦ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šæ¯ä¸ªissueç‹¬ç«‹å¤„ç†ï¼Œå•ä¸ªå¤±è´¥ä¸å½±å“å…¶ä»–</li>
<li><strong>å…ƒæ•°æ®è¿½è¸ª</strong>ï¼šè®°å½•æ–‡ä»¶ã€è¡Œå·ã€é—®é¢˜ç±»å‹ã€Tokenä¼°ç®—</li>
<li><strong>ç»“æ„åŒ–è¾“å‡º</strong>ï¼šMarkdownæ ¼å¼ï¼Œä¾¿äºCursorå±•ç¤º</li>
</ul>
<h3 data-id="heading-14">å®‰è£…ä¾èµ–åŒ…</h3>
<p>åœ¨ä½¿ç”¨MCPæœåŠ¡ä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£…å¿…è¦çš„Pythonä¾èµ–åŒ…ã€‚åˆ›å»º<code>requirements.txt</code>æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-txt" lang="txt"># æ™ºèƒ½ä»£ç ä¿®å¤MCPæœåŠ¡ä¾èµ–åŒ…

# MCPæ¡†æ¶ - ç”¨äºæ„å»ºMCPæœåŠ¡
mcp&gt;=0.9.0

# HTTPå®¢æˆ·ç«¯ - ç”¨äºè°ƒç”¨Sonar API
httpx&gt;=0.27.0

# Java ASTè§£æå™¨ - ç²¾ç¡®è§£æJavaä»£ç ç»“æ„ï¼ˆå¼ºçƒˆæ¨èï¼‰
# ä¼˜åŠ¿ï¼šå‡†ç¡®ç‡99%+ï¼Œä¸å—æ³¨é‡Šã€å­—ç¬¦ä¸²ã€Lambdaå½±å“
# æ³¨æ„ï¼šè¿™æ˜¯çº¯Pythonåº“ï¼Œä¸éœ€è¦Javaç¯å¢ƒ
javalang&gt;=0.13.0
</code></pre>
<p>å®‰è£…å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install -r requirements.txt
</code></pre>
<p><strong>ä¾èµ–è¯´æ˜</strong>ï¼š</p>
<ul>
<li><strong>mcp</strong>ï¼šMCPåè®®æ¡†æ¶ï¼Œè®©Pythonè„šæœ¬èƒ½å¤Ÿè¢«Cursorè¯†åˆ«å’Œè°ƒç”¨</li>
<li><strong>httpx</strong>ï¼šç°ä»£åŒ–HTTPå®¢æˆ·ç«¯ï¼Œç”¨äºè°ƒç”¨Sonar APIè·å–æ‰«æç»“æœ</li>
<li><strong>javalang</strong>ï¼šçº¯Pythonçš„Java ASTè§£æå™¨ï¼Œç”¨äºç²¾å‡†å®šä½ä»£ç ç»“æ„ï¼Œæ— éœ€å®‰è£…Javaç¯å¢ƒ</li>
</ul>
<h3 data-id="heading-15">é…ç½®MCPï¼ˆè®©Cursorè¯†åˆ«ä½ çš„æœåŠ¡ï¼‰</h3>
<p>%è¿™é‡Œæ”¹æˆä½ æœ¬åœ°çš„è·¯å¾„%
åœ¨ <code>~/.cursor/mcp.json</code> ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"intelligent-code-fix"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"/Users/Desktop/cursor/intelligent-code-fix.py"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>intelligent-code-fix</code>ï¼šMCPæœåŠ¡åç§°ï¼Œåœ¨Cursorä¸­é€šè¿‡<code>@intelligent-code-fix</code>è°ƒç”¨</li>
<li><code>command</code>: Pythonè§£é‡Šå™¨å‘½ä»¤</li>
<li><code>args</code>: Pythonè„šæœ¬çš„ç»å¯¹è·¯å¾„ï¼ˆè¯·ä¿®æ”¹ä¸ºä½ çš„å®é™…è·¯å¾„ï¼‰</li>
<li>ä¿®æ”¹é…ç½®åéœ€è¦é‡å¯Cursorç”Ÿæ•ˆ</li>
</ul>
<h2 data-id="heading-16">å››ã€ä½¿ç”¨ä½“éªŒï¼šåœ¨Cursorä¸­ä¸€é”®ä¿®å¤</h2>
<h3 data-id="heading-17">é…ç½®å¥½MCPåï¼Œåœ¨Cursorä¸­çš„ä½¿ç”¨éå¸¸ç®€å•</h3>
<h4 data-id="heading-18">æ­¥éª¤1ï¼šåœ¨CursorèŠå¤©çª—å£è°ƒç”¨MCPå·¥å…·</h4>
<pre><code class="hljs language-diff" lang="diff">ä½¿ç”¨ auto-fix-sonar-issues å·¥å…·ä¿®å¤Sonaré—®é¢˜

å‚æ•°ï¼š

<span class="hljs-deletion">- project_name: hunter_partner_recycle_core</span>
<span class="hljs-deletion">- cookie: sso_uid=xxx; ticket=xxx; aid=xxx</span>
<span class="hljs-deletion">- base_dir: /Users/xxx/projects/hunter/src/main/java</span>
<span class="hljs-deletion">- branch: feature-3278-163 (å¯é€‰)</span>
<span class="hljs-deletion">- page_size: 10</span>




</code></pre>
<h4 data-id="heading-19">æ­¥éª¤2ï¼šMCPæœåŠ¡è‡ªåŠ¨å¤„ç†</h4>
<p>ç³»ç»Ÿè‡ªåŠ¨å®Œæˆï¼š</p>
<ol>
<li>è°ƒç”¨Sonar APIè·å–é—®é¢˜åˆ—è¡¨</li>
<li>ä¸ºæ¯ä¸ªé—®é¢˜æ™ºèƒ½ç”Ÿæˆæç¤ºè¯</li>
<li>è¿”å›ç»“æ„åŒ–çš„ä¿®å¤å»ºè®®</li>
</ol>
<h4 data-id="heading-20">æ­¥éª¤3ï¼šAIç”Ÿæˆä¿®å¤åçš„ä»£ç </h4>
<pre><code class="hljs language-ini" lang="ini">å·²ç”Ÿæˆ10ä¸ªé—®é¢˜çš„ä¿®å¤å»ºè®®ï¼š

Issue 1: ActivityServiceImpl.java ç©ºæŒ‡é’ˆä¿®å¤
ä¿®å¤åä»£ç ï¼š
<span class="hljs-section">[å®Œæ•´çš„ä¿®å¤ä»£ç ]</span>

Issue 2: FileUtil.java èµ„æºæ³„éœ²ä¿®å¤
ä¿®å¤åä»£ç ï¼š
<span class="hljs-section">[å®Œæ•´çš„ä¿®å¤ä»£ç ]</span>

</code></pre>
<h4 data-id="heading-21">æ­¥éª¤4ï¼šä¸€é”®åº”ç”¨ä¿®å¤</h4>
<p>ç›´æ¥åœ¨Cursorä¸­reviewå¹¶åº”ç”¨ä¿®å¤</p>
<h3 data-id="heading-22">æ”¹è¿›æ•ˆæœï¼š</h3>
<ol>
<li>æˆæœ¬é™ä½70% ï¼šç²¾å‡†æå–ä¸Šä¸‹æ–‡ï¼Œtokenä½¿ç”¨é‡å¤§å¹…å‡å°‘</li>
<li>å‡†ç¡®ç‡æå‡30%ï¼šç»“æ„åŒ–æç¤ºè¯+ç¤ºä¾‹å¼•å¯¼ï¼ŒAIç†è§£æ›´å‡†ç¡®</li>
<li>æ•ˆç‡æå‡3å€ï¼šè‡ªåŠ¨åŒ–æµç¨‹ï¼Œæ— éœ€äººå·¥å¹²é¢„</li>
<li>è´¨é‡å¯æ§ï¼šåˆ†å±‚æ¨¡æ¿ç¡®ä¿ä»£ç ç¬¦åˆå›¢é˜Ÿè§„èŒƒ</li>
<li>æ˜“äºæ‰©å±•ï¼šæ–°å¢é—®é¢˜ç±»å‹åªéœ€æ·»åŠ é…ç½®</li>
</ol>
<h2 data-id="heading-23">äº”ã€å†™åœ¨æœ€å</h2>
<p>çœŸæ­£æœ‰æ•ˆçš„AIè¾…åŠ©å¼€å‘ï¼Œä¸æ˜¯ç®€å•åœ°æŠŠä»£ç æ‰”ç»™AIï¼Œè€Œæ˜¯è¦åšå¥½ï¼š</p>
<ul>
<li><strong>é—®é¢˜çš„ç²¾å‡†è¯†åˆ«</strong>ï¼šçŸ¥é“æ˜¯ä»€ä¹ˆç±»å‹çš„é—®é¢˜</li>
<li><strong>ä¸Šä¸‹æ–‡çš„æ™ºèƒ½æå–</strong>ï¼šç»™AIæœ€ç›¸å…³çš„ä»£ç ï¼Œè€Œä¸æ˜¯å…¨éƒ¨ä»£ç </li>
<li><strong>è§„èŒƒçš„æœ‰æ•ˆæ³¨å…¥</strong>ï¼šè®©AIçŸ¥é“è¦éµå¾ªä»€ä¹ˆæ ‡å‡†</li>
<li><strong>ç»éªŒçš„ç³»ç»Ÿæ²‰æ·€</strong>ï¼šç”¨ç¤ºä¾‹åº“è®©AIå­¦ä¹ æœ€ä½³å®è·µ</li>
</ul>
<p>è¿™å¥—æ–¹æ¡ˆä¸ä»…é€‚ç”¨äºSonarï¼Œä¹Ÿå¯ä»¥æ¨å¹¿åˆ°å…¶ä»–ä»£ç æ‰«æå·¥å…·ï¼ˆESLintã€Checkstyleç­‰ï¼‰ã€‚æ ¸å¿ƒæ€æƒ³éƒ½æ˜¯ï¼š<strong>å°†éç»“æ„åŒ–çš„æ‰«æç»“æœè½¬æ¢ä¸ºç»“æ„åŒ–çš„AIæç¤ºè¯</strong>ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½ç»™å¤§å®¶å¸¦æ¥å¯å‘ã€‚å¦‚æœå¤§å®¶ä¹Ÿåœ¨æ¢ç´¢AIè¾…åŠ©å¼€å‘ï¼Œæ¬¢è¿äº¤æµï¼</p>
<blockquote>
<p>å…³äºä½œè€…ï¼Œåˆ˜é›…æ–Œï¼Œä¾ å®¢æ±‡Javaå¼€å‘å·¥ç¨‹å¸ˆã€‚
æƒ³äº†è§£æ›´å¤šè½¬è½¬å…¬å¸çš„ä¸šåŠ¡å®è·µï¼Œæ¬¢è¿ç‚¹å‡»å…³æ³¨ä¸‹æ–¹å…¬ä¼—å·</p>
</blockquote>
<blockquote>
<p>è½¬è½¬ç ”å‘ä¸­å¿ƒåŠä¸šç•Œå°ä¼™ä¼´ä»¬çš„æŠ€æœ¯å­¦ä¹ äº¤æµå¹³å°ï¼Œå®šæœŸåˆ†äº«ä¸€çº¿çš„å®æˆ˜ç»éªŒåŠä¸šç•Œå‰æ²¿çš„æŠ€æœ¯è¯é¢˜ã€‚
å…³æ³¨å…¬ä¼—å·ã€Œè½¬è½¬æŠ€æœ¯ã€ï¼ˆç»¼åˆæ€§ï¼‰ã€ã€Œå¤§è½¬è½¬FEã€ï¼ˆä¸“æ³¨äºFEï¼‰ã€ã€Œè½¬è½¬QAã€ï¼ˆä¸“æ³¨äºQAï¼‰ï¼Œæ›´å¤šå¹²è´§å®è·µï¼Œæ¬¢è¿äº¤æµåˆ†äº«~</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘æ¥å…¥äº†å¾®ä¿¡å°è¯´å°ç¨‹åºå®˜æ–¹é˜…è¯»å™¨]]></title>    <link>https://juejin.cn/post/7587995707165704211</link>    <guid>https://juejin.cn/post/7587995707165704211</guid>    <pubDate>2025-12-26T10:31:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587995707165704211" data-draft-id="7588001624904581139" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘æ¥å…¥äº†å¾®ä¿¡å°è¯´å°ç¨‹åºå®˜æ–¹é˜…è¯»å™¨"/> <meta itemprop="keywords" content="å‰ç«¯,å¾®ä¿¡å°ç¨‹åº"/> <meta itemprop="datePublished" content="2025-12-26T10:31:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jack_po"/> <meta itemprop="url" content="https://juejin.cn/user/207159605068189"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘æ¥å…¥äº†å¾®ä¿¡å°è¯´å°ç¨‹åºå®˜æ–¹é˜…è¯»å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/207159605068189/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jack_po
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:31:41.000Z" title="Fri Dec 26 2025 10:31:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>å¾®ä¿¡å®˜æ–¹ä¸ºå°è¯´ç±»å°ç¨‹åºæä¾›äº†ä¸“ç”¨çš„é˜…è¯»å™¨æ’ä»¶ï¼Œæ‰€æœ‰å°è¯´ç±»ç›®çš„å°ç¨‹åºéƒ½å¿…é¡»ä½¿ç”¨è¯¥ç»„ä»¶ã€‚</p>
<h2 data-id="heading-1">å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-2">1. æ·»åŠ æ’ä»¶é…ç½®</h3>
<p>åœ¨å°ç¨‹åºçš„ <code>app.json</code> æ–‡ä»¶ä¸­æ·»åŠ æ’ä»¶é…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"novel-plugin"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"latest"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"provider"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"wx293c4b6097a8a4d0"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-3">2. åˆå§‹åŒ–æ’ä»¶</h3>
<p>åœ¨ <code>app.js</code> ä¸­åˆå§‹åŒ–æ’ä»¶å¹¶ç›‘å¬é¡µé¢åŠ è½½äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// app.js</span>
<span class="hljs-keyword">const</span> novelPlugin = requirePlugin(<span class="hljs-string">'novel-plugin'</span>)

<span class="hljs-title class_">App</span>({
  <span class="hljs-title function_">onLaunch</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç›‘å¬é˜…è¯»å™¨é¡µé¢åŠ è½½äº‹ä»¶</span>
    novelPlugin.<span class="hljs-title function_">onPageLoad</span>(onNovelPluginLoad)
  },
})

<span class="hljs-keyword">function</span> <span class="hljs-title function_">onNovelPluginLoad</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-comment">// data.id - é˜…è¯»å™¨å®ä¾‹ID</span>
  <span class="hljs-keyword">const</span> novelManager = novelPlugin.<span class="hljs-title function_">getNovelManager</span>(data.<span class="hljs-property">id</span>)
  
  <span class="hljs-comment">// è®¾ç½®ç›®å½•çŠ¶æ€</span>
  novelManager.<span class="hljs-title function_">setContents</span>({
    <span class="hljs-attr">contents</span>: [
      { <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">status</span>: <span class="hljs-number">0</span> }, <span class="hljs-comment">// ç¬¬ä¸€ç« ï¼šå…è´¹</span>
      { <span class="hljs-attr">index</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">status</span>: <span class="hljs-number">2</span> }, <span class="hljs-comment">// ç¬¬äºŒç« ï¼šæœªè§£é”</span>
      { <span class="hljs-attr">index</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">status</span>: <span class="hljs-number">1</span> }, <span class="hljs-comment">// ç¬¬ä¸‰ç« ï¼šå·²è§£é”</span>
    ]
  })

  <span class="hljs-comment">// ç›‘å¬ç”¨æˆ·è¡Œä¸º</span>
  novelManager.<span class="hljs-title function_">onUserTriggerEvent</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·æ“ä½œï¼š'</span>, res.<span class="hljs-property">event_id</span>, res)
  })
}
</code></pre>
<h3 data-id="heading-4">3. è·³è½¬åˆ°é˜…è¯»é¡µé¢</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·³è½¬åˆ°é˜…è¯»å™¨é¡µé¢</span>
wx.<span class="hljs-title function_">navigateTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'plugin-private://wx293c4b6097a8a4d0/pages/novel/index?bookId=ä¹¦ç±ID'</span>
})
</code></pre>
<h2 data-id="heading-5">æ ¸å¿ƒåŠŸèƒ½è¯¦è§£</h2>
<h3 data-id="heading-6">é¡µé¢è·³è½¬å‚æ•°</h3>
<p>è·³è½¬åˆ°é˜…è¯»é¡µé¢æ—¶å¯ä»¥ä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š</p>













































<table><thead><tr><th>å‚æ•°</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>bookId</td><td>æ˜¯</td><td>ä¹¦ç±ID</td></tr><tr><td>chapterIndex</td><td>å¦</td><td>è·³è½¬ç« èŠ‚ä¸‹æ ‡ï¼ˆä»0å¼€å§‹ï¼‰</td></tr><tr><td>fontSize</td><td>å¦</td><td>å­—ä½“å¤§å°ï¼ˆ0-9ï¼‰</td></tr><tr><td>turnPageWay</td><td>å¦</td><td>ç¿»é¡µæ–¹å¼ï¼šSWIPE/MOVE/SCROLL</td></tr><tr><td>backgroundConfigIndex</td><td>å¦</td><td>èƒŒæ™¯è‰²åºå·ï¼ˆ1-5ï¼‰</td></tr><tr><td>isNightMode</td><td>å¦</td><td>æ˜¯å¦å¤œé—´æ¨¡å¼</td></tr><tr><td>showListenButton</td><td>å¦</td><td>æ˜¯å¦æ˜¾ç¤ºå¬ä¹¦æŒ‰é’®</td></tr></tbody></table>
<h3 data-id="heading-7">ç« èŠ‚è§£é”åŠŸèƒ½</h3>
<h4 data-id="heading-8">1. åˆ›å»ºè§£é”ç»„ä»¶</h4>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ <code>charge-dialog</code>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- charge-dialog.wxml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"charge-dialog"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>è§£é”ç¬¬ {{ chapterIndex + 1 }} ç« <span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">bindtap</span>=<span class="hljs-string">"unlock"</span>&gt;</span>ç«‹å³è§£é”<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// charge-dialog.js</span>
<span class="hljs-keyword">const</span> novelPlugin = requirePlugin(<span class="hljs-string">'novel-plugin'</span>)

<span class="hljs-title class_">Component</span>({
  <span class="hljs-attr">properties</span>: {
    <span class="hljs-attr">novelManagerId</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">bookId</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">chapterIndex</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">chapterId</span>: <span class="hljs-title class_">String</span>
  },

  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">unlock</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> novelManager = novelPlugin.<span class="hljs-title function_">getNovelManager</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">properties</span>.<span class="hljs-property">novelManagerId</span>)
      
      <span class="hljs-comment">// æ‰§è¡Œè§£é”é€»è¾‘...</span>
      
      <span class="hljs-comment">// è§£é”å®Œæˆåé€šçŸ¥é˜…è¯»å™¨</span>
      novelManager.<span class="hljs-title function_">paymentCompleted</span>()
    }
  }
})
</code></pre>
<h4 data-id="heading-9">2. æ³¨å†Œç»„ä»¶</h4>
<p>åœ¨ <code>app.json</code> ä¸­æ³¨å†Œç»„ä»¶ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"novel-plugin"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"latest"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"provider"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"wx293c4b6097a8a4d0"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"genericsImplementation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"novel"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"charge-dialog"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"components/charge-dialog/charge-dialog"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-10">æ¶ˆæ¯æ¨é€é…ç½®</h3>
<p>é˜…è¯»å™¨é€šè¿‡æ¶ˆæ¯æ¨é€éªŒè¯ç« èŠ‚è§£é”çŠ¶æ€ï¼Œéœ€è¦åœ¨æœåŠ¡å™¨ç«¯é…ç½®æ¶ˆæ¯æ¥æ”¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœåŠ¡å™¨æ¥æ”¶æ¶ˆæ¯ç¤ºä¾‹</span>
{
  <span class="hljs-string">"ToUserName"</span>: <span class="hljs-string">"å°ç¨‹åºåŸå§‹ID"</span>,
  <span class="hljs-string">"FromUserName"</span>: <span class="hljs-string">"ç”¨æˆ·openid"</span>,
  <span class="hljs-string">"CreateTime"</span>: æ—¶é—´æˆ³,
  <span class="hljs-string">"MsgType"</span>: <span class="hljs-string">"event"</span>,
  <span class="hljs-string">"Event"</span>: <span class="hljs-string">"wxa_novel_chapter_permission"</span>,
  <span class="hljs-string">"BookId"</span>: <span class="hljs-string">"ä¹¦ç±ID"</span>,
  <span class="hljs-string">"ChapterIndex"</span>: ç« èŠ‚ä¸‹æ ‡,
  <span class="hljs-string">"ChapterId"</span>: <span class="hljs-string">"ç« èŠ‚ID"</span>,
  <span class="hljs-string">"Source"</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// 1è¡¨ç¤ºç”¨æˆ·å®é™…é˜…è¯»</span>
}

<span class="hljs-comment">// å“åº”æ ¼å¼</span>
{
  <span class="hljs-string">"ErrCode"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-string">"ErrMsg"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-string">"ChapterPerms"</span>: [{
    <span class="hljs-string">"StartChapterIndex"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"EndChapterIndex"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-string">"Perm"</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// 0-å…è´¹ 1-å·²è§£é” 2-æœªè§£é”</span>
  }]
}
</code></pre>
<h2 data-id="heading-11">é«˜çº§åŠŸèƒ½</h2>
<h3 data-id="heading-12">1. è‡ªå®šä¹‰è§£é”æ–¹å¼</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¾ç½®ä¸åŒçš„è§£é”æ–¹å¼</span>
novelManager.<span class="hljs-title function_">setChargeWay</span>({
  <span class="hljs-attr">globalConfig</span>: {
    <span class="hljs-attr">mode</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// 1:é»˜è®¤ 2:å¹¿å‘Šè§£é” 3:è‡ªå®šä¹‰è§£é”</span>
    <span class="hljs-attr">buttonText</span>: <span class="hljs-string">"è§£é”"</span>
  },
  <span class="hljs-attr">chapterConfigs</span>: [
    {
      <span class="hljs-attr">chapterIndex</span>: <span class="hljs-number">10</span>,
      <span class="hljs-attr">mode</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">buttonText</span>: <span class="hljs-string">"VIPè§£é”"</span>
    }
  ]
})

<span class="hljs-comment">// ç›‘å¬è‡ªå®šä¹‰è§£é”äº‹ä»¶</span>
novelManager.<span class="hljs-title function_">onUserClickCustomUnlock</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è‡ªå®šä¹‰è§£é”ç« èŠ‚ï¼š'</span>, res.<span class="hljs-property">chapterIndex</span>)
})
</code></pre>
<h3 data-id="heading-13">2. æ’å…¥è‡ªå®šä¹‰æ®µè½</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨æ­£æ–‡ä¸­æ’å…¥è‡ªå®šä¹‰å†…å®¹</span>
novelManager.<span class="hljs-title function_">setParagraphBlock</span>({
  <span class="hljs-attr">chapterConfigs</span>: [{
    <span class="hljs-attr">chapterIndex</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">blocks</span>: [{
      <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>,    <span class="hljs-comment">// é«˜åº¦</span>
      <span class="hljs-attr">position</span>: <span class="hljs-number">1</span>,    <span class="hljs-comment">// ä½ç½®ï¼ˆ0:æ ‡é¢˜å‰ï¼Œ1:ç¬¬ä¸€æ®µå‰ï¼‰</span>
      <span class="hljs-attr">ext</span>: <span class="hljs-string">"è‡ªå®šä¹‰æ•°æ®"</span>,
      <span class="hljs-attr">key</span>: <span class="hljs-string">"unique-id"</span>
    }]
  }]
})
</code></pre>
<h3 data-id="heading-14">3. å¹¿å‘Šæ’å…¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ’å…¥å¹¿å‘Š</span>
novelManager.<span class="hljs-title function_">setAdBlock</span>({
  <span class="hljs-attr">chapterConfigs</span>: [{
    <span class="hljs-attr">chapterIndex</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">blocks</span>: [{
      <span class="hljs-attr">type</span>: <span class="hljs-number">1</span>,        <span class="hljs-comment">// 1:å¼ºåˆ¶è§‚çœ‹ 2:bannerå¹¿å‘Š 3:ä¹¦ç­¾å¹¿å‘Š</span>
      <span class="hljs-attr">position</span>: <span class="hljs-number">10</span>,   <span class="hljs-comment">// å¹¿å‘Šä½ç½®</span>
      <span class="hljs-attr">duration</span>: <span class="hljs-number">6</span>,    <span class="hljs-comment">// å¼ºåˆ¶è§‚çœ‹æ—¶é•¿ï¼ˆç§’ï¼‰</span>
      <span class="hljs-attr">unitId</span>: <span class="hljs-string">"å¹¿å‘Šå•å…ƒID"</span>
    }]
  }]
})
</code></pre>
<h2 data-id="heading-15">å®ç”¨APIå‚è€ƒ</h2>
<h3 data-id="heading-16">è·å–é˜…è¯»å™¨ä¿¡æ¯</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å–å½“å‰é˜…è¯»å™¨å®ä¾‹</span>
<span class="hljs-keyword">const</span> novelManager = novelPlugin.<span class="hljs-title function_">getCurrentNovelManager</span>()

<span class="hljs-comment">// è·å–ä¹¦ç±ID</span>
<span class="hljs-keyword">const</span> bookId = novelManager.<span class="hljs-title function_">getBookId</span>()

<span class="hljs-comment">// è·å–æ’ä»¶ä¿¡æ¯</span>
<span class="hljs-keyword">const</span> pluginInfo = novelManager.<span class="hljs-title function_">getPluginInfo</span>()
</code></pre>
<h3 data-id="heading-17">å¯¼èˆªæ§åˆ¶</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¾ç½®å…³é—­è¡Œä¸º</span>
novelManager.<span class="hljs-title function_">setClosePluginInfo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span>,
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'redirectTo'</span>
})

<span class="hljs-comment">// è®¾ç½®è¿”å›è¡Œä¸º</span>
novelManager.<span class="hljs-title function_">setLeaveReaderInfo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/bookshelf/index'</span>,
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'switchTab'</span>
})
</code></pre>
<h3 data-id="heading-18">åˆ†äº«é…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript">novelManager.<span class="hljs-title function_">setShareParams</span>({
  <span class="hljs-attr">title</span>: <span class="hljs-string">'ä¹¦ç±æ ‡é¢˜'</span>,
  <span class="hljs-attr">imageUrl</span>: <span class="hljs-string">'å°é¢å›¾ç‰‡'</span>,
  <span class="hljs-attr">args</span>: {
    <span class="hljs-attr">from</span>: <span class="hljs-string">'share'</span>,
    <span class="hljs-attr">time</span>: <span class="hljs-string">'2024'</span>
  }
})
</code></pre>
<h3 data-id="heading-19">ä¹¦æ¶åŠŸèƒ½</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¾ç½®ä¹¦æ¶çŠ¶æ€</span>
novelManager.<span class="hljs-title function_">setBookshelfStatus</span>({
  <span class="hljs-attr">bookshelfStatus</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// 0:æœªæ·»åŠ  1:å·²æ·»åŠ </span>
})

<span class="hljs-comment">// ç›‘å¬ä¹¦æ¶ç‚¹å‡»</span>
novelManager.<span class="hljs-title function_">onClickBookshelf</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-comment">// å¤„ç†ä¹¦æ¶é€»è¾‘</span>
  novelManager.<span class="hljs-title function_">setBookshelfStatus</span>({
    <span class="hljs-attr">bookshelfStatus</span>: res.<span class="hljs-property">bookshelfStatus</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>
  })
})
</code></pre>
<h2 data-id="heading-20">äº‹ä»¶ç›‘å¬</h2>
<p>é˜…è¯»å™¨æä¾›ä¸°å¯Œçš„äº‹ä»¶ç›‘å¬ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">novelManager.<span class="hljs-title function_">onUserTriggerEvent</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-keyword">switch</span>(res.<span class="hljs-property">event_id</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'start_read'</span>:          <span class="hljs-comment">// å¼€å§‹é˜…è¯»</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'change_chapter'</span>:      <span class="hljs-comment">// åˆ‡æ¢ç« èŠ‚</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'change_fontsize'</span>:     <span class="hljs-comment">// è°ƒæ•´å­—å·</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'click_listen'</span>:        <span class="hljs-comment">// ç‚¹å‡»å¬ä¹¦</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'audio_start'</span>:         <span class="hljs-comment">// éŸ³é¢‘å¼€å§‹</span>
    <span class="hljs-comment">// ... æ›´å¤šäº‹ä»¶</span>
  }
})
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åä¸ºäº‘ LTS æ—¥å¿—ä¸ŠæŠ¥åˆ°è§‚æµ‹äº‘æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7587738151660322816</link>    <guid>https://juejin.cn/post/7587738151660322816</guid>    <pubDate>2025-12-26T10:29:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587738151660322816" data-draft-id="7587808953076006912" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åä¸ºäº‘ LTS æ—¥å¿—ä¸ŠæŠ¥åˆ°è§‚æµ‹äº‘æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2025-12-26T10:29:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åä¸ºäº‘ LTS æ—¥å¿—ä¸ŠæŠ¥åˆ°è§‚æµ‹äº‘æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:29:58.000Z" title="Fri Dec 26 2025 10:29:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ä¸æŒ‘æˆ˜</h2>
<p>åœ¨å®é™…è¿ç»´åœºæ™¯ä¸­ï¼Œå®¢æˆ·çš„ä¸šåŠ¡ç³»ç»Ÿéƒ¨ç½²åœ¨åä¸ºäº‘ï¼Œå¹¶ä½¿ç”¨äº† ELBã€GaussDB ç­‰å¤šç§åä¸ºäº‘äº§å“ã€‚è¿™äº›äº‘äº§å“çš„æ—¥å¿—é›†ä¸­ç®¡ç†ä¸»è¦ä¾èµ–åä¸ºäº‘ LTSï¼Œä½†ä»…ä»…æŠŠæ—¥å¿—å­˜æ”¾åœ¨ LTS ä¸­ï¼Œéš¾ä»¥å®ç°ï¼š</p>
<ul>
<li>å…¨é“¾è·¯è§‚æµ‹ï¼ˆæ—¥å¿—ã€æŒ‡æ ‡ã€é“¾è·¯æ•°æ®ç»Ÿä¸€ï¼‰</li>
<li>æ™ºèƒ½æ£€ç´¢ä¸å‘Šè­¦ï¼ˆè·¨é›†ç¾¤ã€è·¨åº”ç”¨çš„æ—¥å¿—åˆ†æï¼‰</li>
<li>å’Œä¸šåŠ¡æŒ‡æ ‡ç»“åˆçš„å¯è§†åŒ–ä¸è¿½è¸ª</li>
</ul>
<p>è§‚æµ‹äº‘å¯ä»¥å®ç°ç»Ÿä¸€çš„å…¨é“¾è·¯å¯è§‚æµ‹ï¼Œå› æ­¤å¯ä»¥å°† LTS ä¸­çš„æ—¥å¿—å®æ—¶ä¸ŠæŠ¥åˆ°è§‚æµ‹äº‘ï¼Œå®ç°æ—¥å¿—ä¸åº”ç”¨ã€åŸºç¡€è®¾æ–½ã€ç”¨æˆ·ä½“éªŒç­‰ä¸€ä½“åŒ–è§‚æµ‹ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ•´ä½“æ¶æ„è®¾è®¡</h2>
<p>æ—¥å¿—é‡‡é›†é“¾è·¯æ¨èæ¶æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5aee46189dbf416fae67062175f65e54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349798&amp;x-signature=TeYOGK76ROmRwCf9QI8wGEHg5tA%3D" alt="" loading="lazy"/></p>
<ul>
<li>LTSï¼šè´Ÿè´£æ—¥å¿—æ”¶é›†ä¸é›†ä¸­ç®¡ç†ã€‚</li>
<li>DMS Kafkaï¼šä½œä¸ºé«˜å¯é æ¶ˆæ¯é€šé“ï¼Œå®ç°æ—¥å¿—å®æ—¶è½¬å‚¨ä¸è§£è€¦ã€‚</li>
<li>DataKit Kafka Inputï¼šéƒ¨ç½²åœ¨å®¢æˆ·ä¾§ï¼ˆå¦‚å¼¹æ€§äº‘æœåŠ¡å™¨ï¼‰ï¼Œè´Ÿè´£æ¶ˆè´¹ Kafka ä¸­æ—¥å¿—å¹¶å‘é€åˆ°è§‚æµ‹äº‘ã€‚</li>
<li>è§‚æµ‹äº‘ï¼šç»Ÿä¸€æ—¥å¿—æ£€ç´¢ã€æŸ¥è¯¢åˆ†æã€ä»ªè¡¨ç›˜å±•ç¤ºã€æ™ºèƒ½å‘Šè­¦ã€‚</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€å‰ç½®æ¡ä»¶</h2>
<ul>
<li>åœ¨åä¸ºäº‘ä¸Šåˆ›å»º DMS å’Œ LTS æœåŠ¡</li>
<li>å¼€é€šè§‚æµ‹äº‘è´¦å·</li>
<li>DataKit æœºå™¨ä¸€å°</li>
</ul>
<h2 data-id="heading-3">å››ã€é…ç½®æ­¥éª¤</h2>
<h3 data-id="heading-4">æ­¥éª¤ 1ï¼šåœ¨ LTS ä¸­å¼€å¯æ—¥å¿—è½¬å‚¨</h3>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¾ˆå¤šç§æ–¹å¼æŠŠæ—¥å¿—è¾“å‡ºè‡³ LTS æœåŠ¡ï¼Œæœ¬æ–‡ä»¥ åä¸ºäº‘ELBæ—¥å¿—ä¸ºä¾‹ï¼Œé…ç½® ELBæ—¥å¿—å­˜å‚¨è‡³ LTS ï¼Œé…ç½®å®Œæˆä¹‹åæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åœ¨ LTS æ—¥å¿—ç»„ä¸­æ˜¯å¦æœ‰æ—¥å¿—äº§ç”Ÿã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f23a139a34a427ba6f254970aff9eb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349798&amp;x-signature=Rh%2BzMC%2FGlvCltq1FXpYPa33hlgM%3D" alt="" loading="lazy"/></p>
<p>1ã€ç™»å½•åä¸ºäº‘æ§åˆ¶å° â†’ LTSæ§åˆ¶å°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2766a8891d842bc93226c087c47c3e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349798&amp;x-signature=%2BSsuUwYbGUouLHkIgOSyvbfO2MA%3D" alt="" loading="lazy"/></p>
<p>2ã€ç‚¹å‡» â€œæ—¥å¿—è½¬å‚¨â€ã€‚</p>
<p>3ã€é…ç½®è½¬å‚¨ç›®æ ‡ï¼šé€‰æ‹© DMS ä½œä¸ºè½¬å‚¨å¯¹è±¡ï¼Œå¹¶è®¾ç½®å®æ–½è½¬å‚¨ï¼Œè®¾ç½®è¦è½¬å‚¨çš„æ—¥å¿—ç»„å’Œæ—¥å¿—æµåç§°ï¼Œä»¥åŠ DMS å®ä¾‹å’Œ topicã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cece2cdf2b2a417780b7247d903223e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349798&amp;x-signature=ZwysYYKIKHkwoD91oyT75v936ko%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">æ­¥éª¤ 2ï¼šéƒ¨ç½² DataKit</h3>
<p>åœ¨éœ€è¦é‡‡é›†çš„ç¯å¢ƒä¸­ï¼ˆå¦‚ ECSï¼‰ï¼Œå®‰è£… DataKitã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># éœ€è¦æŠŠtoken æ”¹æˆè§‚æµ‹äº‘ç©ºé—´çš„å®é™…tokenå€¼ï¼ˆå¯åœ¨è§‚æµ‹äº‘æ§åˆ¶å°--&gt;é›†æˆ--&gt;Datakit ä¸Šé¢è·å–ï¼‰</span>
<span class="hljs-attr">DK_DATAWAY</span>=<span class="hljs-string">"https://openway.guance.com?token=tkn_xxxxxx"</span> bash -c <span class="hljs-string">"$(curl -L https://static.guance.com/datakit/install.sh)"</span> 
</code></pre>
<h3 data-id="heading-6">æ­¥éª¤ 3ï¼šå¼€å¯ KafkaMQ é‡‡é›†å™¨</h3>
<p>è¿›å…¥ DataKit å®‰è£…ç›®å½•ä¸‹ï¼ˆé»˜è®¤æ˜¯Â <code>/usr/local/datakit/conf.d/</code>Â ï¼‰çš„Â <code>conf.d/kafkamq</code>Â ç›®å½•ï¼Œå¤åˆ¶Â <code>kafkamq.conf.sample</code>Â å¹¶å‘½åä¸ºÂ <code>kafkamq.conf</code>ã€‚ç±»ä¼¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">-rwxr-xr-x 1 root root 2574 Apr 30 23:52 kafkamq.conf</span>
<span class="hljs-deletion">-rwxr-xr-x 1 root root 2579 May  1 00:40 kafkamq.conf.sample</span>
</code></pre>
<p>è°ƒæ•´ kafkamq é‡‡é›†å™¨é…ç½®å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>addrs = ["192.168.0.106:9092"]ã€‚</p>
</li>
<li>
<p>kafka_version = "3.0.0"ï¼Œè¯¥æ–‡ä½¿ç”¨ Kafka çš„ç‰ˆæœ¬ã€‚</p>
</li>
<li>
<p>[inputs.kafkamq.custom]ï¼Œåˆ é™¤æ³¨é‡Šç¬¦å·â€œ#â€ã€‚</p>
</li>
<li>
<p>[inputs.kafkamq.custom.log_topic_map]ï¼Œåˆ é™¤æ³¨é‡Šç¬¦å·â€œ#â€ã€‚</p>
</li>
<li>
<p>"topic-30039942"="topicSLB.p"ï¼Œtopic-30039942 ä¸º Topic çš„åå­—ï¼ŒtopicSLB.pä¸ºè§‚æµ‹äº‘ Pipeline å¯ç¼–ç¨‹æ•°æ®å¤„ç†å™¨çš„æ—¥å¿—å­—æ®µæå–è§„åˆ™é…ç½®ã€‚æ¶‰åŠçš„ä¸šåŠ¡æ—¥å¿—å’Œ topicSLB.p çš„å†…å®¹è¯¦ç»†è§ä¸‹é¢çš„ã€Šä½¿ç”¨ Pipelineã€‹ã€‚</p>
</li>
<li>
<p>å…¶ä»–ä¸€äº›é…ç½®è¯´æ˜ï¼š</p>
<ul>
<li>group_id = "datakit-group"ï¼šæ¶ˆè´¹è€…ç»„åç§°ï¼Œç›¸åŒç»„å†…æ¶ˆè´¹è€…å…±äº«åˆ†åŒºæ¶ˆè´¹è¿›åº¦ã€‚ä¸åŒæ¶ˆè´¹è€…ç»„å¯ç‹¬ç«‹æ¶ˆè´¹åŒä¸€ä¸»é¢˜</li>
<li>assignor = "roundrobin"ï¼šåˆ†åŒºè½®è¯¢åˆ†é…ç»™æ¶ˆè´¹è€…ï¼Œâ€‹é€‚åˆç»„å†…æ¶ˆè´¹è€…è®¢é˜…ç›¸åŒä¸»é¢˜åˆ—è¡¨â€‹ï¼Œå®ç°è´Ÿè½½å‡è¡¡</li>
</ul>
</li>
</ul>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># {"version": "1.81.1", "desc": "do NOT edit this line"}</span>

<span class="hljs-section">[[inputs.kafkamq]]</span>
  <span class="hljs-attr">addrs</span> = [<span class="hljs-string">"192.168.0.106:9092"</span>]
  <span class="hljs-comment"># your kafka version:0.8.2 ~ 3.2.0</span>
  <span class="hljs-attr">kafka_version</span> = <span class="hljs-string">"3.0.0"</span>
  <span class="hljs-attr">group_id</span> = <span class="hljs-string">"datakit-group"</span>
  <span class="hljs-comment"># consumer group partition assignment strategy (range, roundrobin, sticky)</span>
  <span class="hljs-attr">assignor</span> = <span class="hljs-string">"roundrobin"</span>

  <span class="hljs-comment">## rate limit.</span>
  <span class="hljs-comment">#limit_sec = 100</span>
  <span class="hljs-comment">## sample</span>
  <span class="hljs-comment"># sampling_rate = 1.0</span>

  <span class="hljs-comment">## kafka tls config</span>
  <span class="hljs-comment"># tls_enable = true</span>
  <span class="hljs-comment">## PLAINTEXT/SASL_SSL/SASL_PLAINTEXT</span>
  <span class="hljs-comment"># tls_security_protocol = "SASL_PLAINTEXT"</span>
  <span class="hljs-comment">## PLAIN/SCRAM-SHA-256/SCRAM-SHA-512/OAUTHBEARER,default is PLAIN.</span>
  <span class="hljs-comment"># tls_sasl_mechanism = "PLAIN"</span>
  <span class="hljs-comment"># tls_sasl_plain_username = "user"</span>
  <span class="hljs-comment"># tls_sasl_plain_password = "pw"</span>
  <span class="hljs-comment">## If tls_security_protocol is SASL_SSL, then ssl_cert must be configured.</span>
  <span class="hljs-comment"># ssl_cert = "/path/to/host.cert"</span>

  <span class="hljs-comment">## -1:Offset Newest, -2:Offset Oldest</span>
  <span class="hljs-attr">offsets</span>=-<span class="hljs-number">1</span>

  <span class="hljs-comment">## skywalking custom</span>
  <span class="hljs-comment">#[inputs.kafkamq.skywalking]</span>
  <span class="hljs-comment">## Required: send to datakit skywalking input.</span>
  <span class="hljs-comment">#  dk_endpoint="http://localhost:9529"</span>
  <span class="hljs-comment">#  thread = 8 </span>
  <span class="hljs-comment">#  topics = [</span>
  <span class="hljs-comment">#    "skywalking-metrics",</span>
  <span class="hljs-comment">#    "skywalking-profilings",</span>
  <span class="hljs-comment">#    "skywalking-segments",</span>
  <span class="hljs-comment">#    "skywalking-managements",</span>
  <span class="hljs-comment">#    "skywalking-meters",</span>
  <span class="hljs-comment">#    "skywalking-logging",</span>
  <span class="hljs-comment">#  ]</span>
  <span class="hljs-comment">#  namespace = ""</span>

  <span class="hljs-comment">## Jaeger from kafka. Please make sure your Datakit Jaeger collector is open!</span>
  <span class="hljs-comment">#[inputs.kafkamq.jaeger]</span>
  <span class="hljs-comment">## Required: ipv6 is "[::1]:9529"</span>
  <span class="hljs-comment">#  dk_endpoint="http://localhost:9529"</span>
  <span class="hljs-comment">#  thread = 8 </span>
  <span class="hljs-comment">#  source: agent,otel,others...</span>
  <span class="hljs-comment">#  source = "agent"</span>
  <span class="hljs-comment">#  # Required: topics</span>
  <span class="hljs-comment">#  topics=["jaeger-spans","jaeger-my-spans"]</span>

  <span class="hljs-comment">## user custom message with PL script.</span>
  <span class="hljs-section">[inputs.kafkamq.custom]</span>
    <span class="hljs-comment">#spilt_json_body = true</span>
    <span class="hljs-comment">#thread = 8</span>
    <span class="hljs-comment">#storage_index = "" # <span class="hljs-doctag">NOTE:</span> only working on logging collection</span>

    <span class="hljs-comment">## spilt_topic_map determines whether to enable log splitting for specific topic based on the values in the spilt_topic_map[topic].</span>
    <span class="hljs-comment">#[inputs.kafkamq.custom.spilt_topic_map]</span>
    <span class="hljs-comment">#  "log_topic"=true</span>
    <span class="hljs-comment">#  "log01"=false</span>
    <span class="hljs-section">[inputs.kafkamq.custom.log_topic_map]</span>
      <span class="hljs-attr">"topic-30039942"</span>=<span class="hljs-string">"topicSLB.p"</span>
    <span class="hljs-comment">#  "log01"="log_01.p"</span>
    <span class="hljs-comment">#[inputs.kafkamq.custom.metric_topic_map]</span>
    <span class="hljs-comment">#  "metric_topic"="metric.p"</span>
    <span class="hljs-comment">#  "metric01"="rum_apm.p"</span>
    <span class="hljs-comment">#[inputs.kafkamq.custom.rum_topic_map]</span>
    <span class="hljs-comment">#  "rum_topic"="rum_01.p"</span>
    <span class="hljs-comment">#  "rum_02"="rum_02.p"</span>

  <span class="hljs-comment">#[inputs.kafkamq.remote_handle]</span>
    <span class="hljs-comment">## Required</span>
    <span class="hljs-comment">#endpoint="http://localhost:8080"</span>
    <span class="hljs-comment">## Required topics</span>
    <span class="hljs-comment">#topics=["spans","my-spans"]</span>
    <span class="hljs-comment"># send_message_count = 100</span>
    <span class="hljs-comment"># debug = false</span>
    <span class="hljs-comment"># is_response_point = true</span>
    <span class="hljs-comment"># header_check = false</span>
  
  <span class="hljs-comment">## Receive and consume OTEL data from kafka.</span>
  <span class="hljs-comment">#[inputs.kafkamq.otel]</span>
    <span class="hljs-comment">#dk_endpoint="http://localhost:9529"</span>
    <span class="hljs-comment">#trace_api="/otel/v1/traces"</span>
    <span class="hljs-comment">#metric_api="/otel/v1/metrics"</span>
    <span class="hljs-comment">#trace_topics=["trace1","trace2"]</span>
    <span class="hljs-comment">#metric_topics=["otel-metric","otel-metric1"]</span>
    <span class="hljs-comment">#thread = 8 </span>

  <span class="hljs-comment">## <span class="hljs-doctag">todo:</span> add other input-mq</span>
</code></pre>
<h3 data-id="heading-7">æ­¥éª¤ 4ï¼šé‡å¯ DataKit ç”Ÿæ•ˆ</h3>
<pre><code class="hljs">datakit service -R
</code></pre>
<h3 data-id="heading-8">æ­¥éª¤ 5ï¼šåœ¨è§‚æµ‹äº‘éªŒè¯æ—¥å¿—æ¥å…¥</h3>
<p>1ã€ç™»å½•è§‚æµ‹äº‘æ§åˆ¶å° â†’ æ—¥å¿—æŸ¥çœ‹å™¨ ï¼Œå¯ä»¥çœ‹åˆ°ç›¸å…³æ—¥å¿—å·²ç»è¢«é‡‡é›†åˆ°äº†è§‚æµ‹äº‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d914f9acc07434aaef96d3c6bcd21c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349798&amp;x-signature=nhajOZA6B%2FjTXai%2BaNJqQzY4MOY%3D" alt="" loading="lazy"/></p>
<p>2ã€æ—¥å¿—æ–‡æœ¬çš„å­—æ®µå·²ç»è¢«æå–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad6c9fa96b1e4b909949b7d0a479f2ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349798&amp;x-signature=KiHQNF1P6RRd%2BfMb4361BhtYYoI%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨‹åºå‘˜çº¦ä¼šæŒ‡å—ï¼šä»ä»£ç åˆ°çˆ±æƒ…çš„å®Œç¾ç¼–è¯‘]]></title>    <link>https://juejin.cn/post/7587740546955132968</link>    <guid>https://juejin.cn/post/7587740546955132968</guid>    <pubDate>2025-12-26T11:02:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587740546955132968" data-draft-id="7587743345197826100" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨‹åºå‘˜çº¦ä¼šæŒ‡å—ï¼šä»ä»£ç åˆ°çˆ±æƒ…çš„å®Œç¾ç¼–è¯‘"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T11:02:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœŸè±†1250"/> <meta itemprop="url" content="https://juejin.cn/user/3280598428302727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨‹åºå‘˜çº¦ä¼šæŒ‡å—ï¼šä»ä»£ç åˆ°çˆ±æƒ…çš„å®Œç¾ç¼–è¯‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3280598428302727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœŸè±†1250
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T11:02:32.000Z" title="Fri Dec 26 2025 11:02:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä¸ºä»€ä¹ˆä½ éœ€è¦è¿™ä»½æŒ‡å—</h2>
<p>ã€Œå“å‘€ï¼Œæˆ‘ä»Šå¤©åˆå†™äº†2000è¡Œä»£ç ï¼Œä½†è¿˜æ˜¯ä¸çŸ¥é“æ€ä¹ˆè·Ÿå–œæ¬¢çš„å¥³å­©å­è¯´è¯ã€‚ã€</p>
<p>å¦‚æœä½ æ˜¯ä¸€ä¸ªç¨‹åºå‘˜ï¼Œå¦‚æœä½ æ›¾åœ¨æ·±å¤œåŠ ç­åå¯¹ç€å±å¹•å‘å‘†ï¼Œå¦‚æœä½ æ›¾åœ¨ç”µæ¢¯é‡Œå¶é‡å¿ƒä»ªçš„å¥³å­©å­å´åªæ†‹å‡ºä¸€å¥ã€Œä»Šå¤©çš„å¤©æ°”ä¸é”™ã€ï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚</p>
<p>æˆ‘ä»¬ç¨‹åºå‘˜ç¾¤ä½“æœ‰ç€ç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼šæˆ‘ä»¬é€»è¾‘æ¸…æ™°ã€è§£å†³é—®é¢˜èƒ½åŠ›å¼ºã€æ”¶å…¥ç¨³å®šã€å¯¹å¾…æ„Ÿæƒ…ä¸“ä¸€ã€‚ä½†æˆ‘ä»¬ä¹Ÿæœ‰æ˜æ˜¾çš„çŸ­æ¿ï¼šç¤¾äº¤åœˆæœ‰é™ã€è¡¨è¾¾æ–¹å¼è¿‡äºç›´æ¥ã€ç¼ºä¹æµªæ¼«ç»†èƒã€åœ¨å–œæ¬¢çš„äººé¢å‰å®¹æ˜“ç´§å¼ ã€‚</p>
<p>è¿™ç¯‡æŒ‡å—å°†å¸®åŠ©ä½ ä»ä¸€ä¸ªã€Œä»£ç è¯—äººã€è½¬å˜ä¸ºã€Œçˆ±æƒ…å·¥ç¨‹å¸ˆã€ï¼ŒæŒæ¡åœ¨ç‰¹æ®ŠèŠ‚æ—¥å°†å¿ƒä»ªå¥³ç”Ÿçº¦å‡ºæ¥çš„è‰ºæœ¯ï¼Œå¹¶ç»™äºˆå¥¹å®Œç¾çš„çº¦ä¼šä½“éªŒã€‚è®©æˆ‘ä»¬å¼€å§‹è¿™åœºçˆ±æƒ…çš„ç¼–è¯‘ä¹‹æ—…å§ï¼</p>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€ç« ï¼šä¸ºä»€ä¹ˆç¨‹åºå‘˜åœ¨çˆ±æƒ…å¸‚åœºä¸Šå…¶å®æ˜¯è¢«ä½ä¼°çš„æ½œåŠ›è‚¡</h2>
<h3 data-id="heading-2">1.1 ç¨‹åºå‘˜çš„éšè—ä¼˜åŠ¿</h3>
<p>åœ¨å½“ä»Šè¿™ä¸ªã€Œä»£ç æ”¹å˜ä¸–ç•Œã€çš„æ—¶ä»£ï¼Œç¨‹åºå‘˜å…¶å®æ‹¥æœ‰è®¸å¤šå…¶ä»–èŒä¸šæ— æ³•æ¯”æ‹Ÿçš„æ‹©å¶ä¼˜åŠ¿ï¼Œåªæ˜¯æˆ‘ä»¬å¤§å¤šæ•°äººæ²¡æœ‰æ„è¯†åˆ°è€Œå·²ã€‚</p>
<p><strong>ä¸“æ³¨åŠ›æ˜¯æœ€å¼ºçš„é­…åŠ›æ­¦å™¨ã€‚</strong> å½“ä½ æ²‰æµ¸åœ¨è§£å†³ä¸€ä¸ªå¤æ‚çš„ç®—æ³•é—®é¢˜æ—¶é‚£ç§ä¸“æ³¨çš„çœ¼ç¥ï¼Œåœ¨å–œæ¬¢ä½ çš„äººçœ¼ä¸­ç®€ç›´é­…åŠ›å››å°„ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ è®¤çœŸè°ƒè¯•ä»£ç æ—¶é‚£ç§ã€Œä¸–ç•Œä¸æˆ‘æ— å…³ã€çš„ä¸“æ³¨çŠ¶æ€ï¼Œè¿™ç§ä¸“æ³¨åŠ›ä¸€æ—¦è½¬ç§»åˆ°å¥³å­©å­èº«ä¸Šï¼Œä¼šè®©å¥¹æ„Ÿå—åˆ°è¢«é‡è§†ã€è¢«è®¤çœŸå¯¹å¾…çš„æ„Ÿè§‰ã€‚</p>
<p><strong>è§£å†³é—®é¢˜çš„èƒ½åŠ›æ˜¯æƒ…æ„Ÿå…³ç³»çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚</strong> æ‹çˆ±ä¸­ä¼šé‡åˆ°å„ç§é—®é¢˜ï¼šå¦‚ä½•ç†è§£å¥³ç”Ÿçš„æ½œå°è¯ã€å¦‚ä½•å®‰æ’å¥½ä¸€æ¬¡çº¦ä¼šã€å¦‚ä½•å¤„ç†çŸ›ç›¾å’Œåˆ†æ­§ã€‚è¿™äº›é—®é¢˜å¯¹ä½ æ¥è¯´å¤ªç®€å•äº†ï¼Œå› ä¸ºä½ æ¯å¤©éƒ½åœ¨è§£å†³è¿œæ¯”è¿™å¤æ‚å¾—å¤šçš„æŠ€æœ¯éš¾é¢˜ã€‚ä½ éœ€è¦åšçš„åªæ˜¯æŠŠã€Œdebugçš„å¿ƒæ€ã€åº”ç”¨åˆ°ã€Œdebugæ„Ÿæƒ…ã€ä¸Šã€‚</p>
<p><strong>ç¨³å®šçš„æ”¶å…¥å’ŒèŒä¸šå‘å±•è®©ä½ æœ‰è¶³å¤Ÿçš„åº•æ°”ã€‚</strong> åœ¨è¿™ä¸ªç‰©è´¨ä¸ç²¾ç¥å¹¶é‡çš„æ—¶ä»£ï¼Œç»æµåŸºç¡€å†³å®šä¸Šå±‚å»ºç­‘è¿™å¥è€è¯ä¾ç„¶é€‚ç”¨ã€‚ç¨‹åºå‘˜é€šå¸¸æ‹¥æœ‰ç¨³å®šä¸”å¯è§‚çš„æ”¶å…¥ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç»™å–œæ¬¢çš„å¥³å­©å­æä¾›ä¸€ä¸ªå®‰ç¨³çš„æœªæ¥é¢„æœŸï¼Œè¿™æœ¬èº«å°±æ˜¯ä¸€ç§å·¨å¤§çš„å¸å¼•åŠ›ã€‚</p>
<h3 data-id="heading-3">1.2 ä¸ºä»€ä¹ˆä½ è‡³ä»Šè¿˜æ˜¯å•èº«</h3>
<p>è®©æˆ‘ä»¬è¯šå®åœ°é¢å¯¹è¿™ä¸ªé—®é¢˜ã€‚ç¨‹åºå‘˜ç¾¤ä½“è„±å•å›°éš¾ï¼Œå¾€å¾€ä¸æ˜¯å› ä¸ºç¼ºä¹é­…åŠ›ï¼Œè€Œæ˜¯ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š</p>
<p><strong>ç¤¾äº¤åœˆæåº¦å°é—­ã€‚</strong> ä½ çš„æ—¥å¸¸å¯èƒ½æ˜¯ï¼šå®¶ â†’ å…¬å¸ â†’ å®¶ã€‚å¶å°”å»è¶Ÿä¾¿åˆ©åº—å·²ç»ç®—æ˜¯ã€Œç¤¾äº¤æ´»åŠ¨ã€äº†ã€‚ä½ çš„ç¤¾äº¤åœˆé‡Œå¯èƒ½åªæœ‰äº§å“ç»ç†ã€UIè®¾è®¡å¸ˆå’Œæµ‹è¯•å·¥ç¨‹å¸ˆï¼Œè€Œè¿™äº›äººä¸­å•èº«çš„å¼‚æ€§å°‘ä¹‹åˆå°‘ã€‚</p>
<p><strong>è¿‡äºä¹ æƒ¯ç”¨é€»è¾‘æ€è€ƒé—®é¢˜ã€‚</strong> å½“å¥³å­©å­è¯´ã€Œæˆ‘ä»Šå¤©å¿ƒæƒ…ä¸å¥½ã€ï¼Œä½ å¯èƒ½ä¼šç›´æ¥é—®ã€Œä¸ºä»€ä¹ˆï¼Ÿæ˜¯ä»€ä¹ˆbugå¯¼è‡´çš„ï¼Ÿã€è€Œå¥¹æœŸå¾…çš„åªæ˜¯ä¸€ä¸ªæ‹¥æŠ±æˆ–è€…ä¸€å¥ã€Œæ€ä¹ˆäº†å®è´ã€ã€‚æ„Ÿæƒ…ä¸æ˜¯ä»£ç ï¼Œä¸èƒ½æ€»æ˜¯è¿½æ±‚ã€Œæœ€ä¼˜è§£ã€ã€‚</p>
<p><strong>ç¼ºä¹æµªæ¼«ç»†èƒã€‚</strong> ä½ å¯èƒ½ä¼šç”¨å†™ä»£ç çš„æ–¹å¼å†™æƒ…ä¹¦ï¼šã€Œæˆ‘çˆ±ä½ ï¼Œå°±åƒforå¾ªç¯ä¸€æ ·æ°¸æ— æ­¢å¢ƒã€‚ã€è¿™åœ¨æŠ€æœ¯ä¸Šæ˜¯æ­£ç¡®çš„ï¼Œä½†åœ¨æƒ…æ„Ÿä¸Šæ˜¯ç¾éš¾æ€§çš„ã€‚</p>
<hr/>
<h2 data-id="heading-4">ç¬¬äºŒç« ï¼šä»€ä¹ˆæ˜¯å®Œç¾çš„èŠ‚æ—¥çº¦ä¼š</h2>
<h3 data-id="heading-5">2.1 ç†è§£ã€Œå®Œç¾çº¦ä¼šã€çš„æœ¬è´¨</h3>
<p>åœ¨å¼€å§‹ç­–åˆ’çº¦ä¼šä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆææ¸…æ¥šä¸€ä¸ªé—®é¢˜ï¼šä»€ä¹ˆæ‰æ˜¯ã€Œå®Œç¾çš„çº¦ä¼šã€ï¼Ÿ</p>
<p><strong>å®Œç¾çº¦ä¼šä¸æ˜¯ç±³å…¶æ—é¤å…çš„çƒ›å…‰æ™šé¤ï¼Œä¹Ÿä¸æ˜¯é©¬å°”ä»£å¤«çš„æµ·å²›åº¦å‡ã€‚</strong> å®Œç¾çº¦ä¼šæ˜¯ä¸€ç§ã€Œè¢«ç†è§£ã€å’Œã€Œè¢«é‡è§†ã€çš„æ„Ÿè§‰ã€‚å®ƒå–å†³äºä½ å¯¹å¥¹æœ‰å¤šå°‘äº†è§£ï¼Œä½ ä¸ºè¿™æ¬¡çº¦ä¼šæŠ•å…¥äº†å¤šå°‘å¿ƒæ€ï¼Œä»¥åŠä½ ä»¬åœ¨ä¸€èµ·æ—¶æ˜¯å¦æ„Ÿåˆ°èˆ’é€‚å’Œå¼€å¿ƒã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šå¦‚æœä½ å–œæ¬¢çš„å¥³å­©å­å‘Šè¯‰ä½ å¥¹å°æ—¶å€™æ¯æ¬¡è·¯è¿‡ä¸€å®¶è›‹ç³•åº—éƒ½ä¼šé©»è¶³è§‚çœ‹ï¼Œé‚£ä¹ˆåœ¨å¥¹ç”Ÿæ—¥é‚£å¤©ï¼Œä½ æ’é˜Ÿä¸¤å°æ—¶ä¹°ä¸‹é‚£å®¶åº—çš„è›‹ç³•å¸¦ç»™å¥¹ï¼Œè¿™è¿œæ¯”ä½ åœ¨äº”æ˜Ÿçº§é…’åº—é¢„è®¢æ³•é¤æ›´èƒ½æ‰“åŠ¨å¥¹çš„å¿ƒã€‚</p>
<h3 data-id="heading-6">2.2 èŠ‚æ—¥çº¦ä¼šçš„ç‰¹æ®Šæ„ä¹‰</h3>
<p>ä¸ºä»€ä¹ˆæˆ‘ä»¬å¦‚æ­¤å¼ºè°ƒã€Œç‰¹æ®Šçš„èŠ‚æ—¥ã€ï¼Ÿå› ä¸ºèŠ‚æ—¥ä¸ºä½ çš„è¿½æ±‚æä¾›äº†ä¸€ä¸ªå¤©ç„¶çš„å¥‘æœºå’Œåˆç†çš„å€Ÿå£ã€‚</p>
<p><strong>èŠ‚æ—¥é™ä½äº†é‚€çº¦çš„å¿ƒç†é—¨æ§›ã€‚</strong> å¹³æ—¶çº¦å¥¹å‡ºæ¥ï¼Œä½ éœ€è¦ä¸€ä¸ªæ­£å¼çš„ç†ç”±ï¼šã€Œæˆ‘æƒ³è¯·ä½ åƒä¸ªé¥­ã€ã€Œæˆ‘æƒ³è¯·ä½ å»çœ‹ä¸ªç”µå½±ã€ã€‚ä½†åœ¨æƒ…äººèŠ‚ã€ä¸ƒå¤•ã€åœ£è¯èŠ‚è¿™äº›èŠ‚æ—¥ï¼Œä½ çš„é‚€çº¦å¯ä»¥å˜å¾—éå¸¸è‡ªç„¶ï¼šã€Œåœ£è¯èŠ‚çº¦ä¼šå—ï¼Ÿã€ã€Œä¸ƒå¤•æœ‰äººä¸€èµ·è¿‡å—ï¼Ÿã€è¿™è®©å¥¹æ›´å®¹æ˜“æ¥å—ï¼Œå› ä¸ºä½ åœ¨ã€Œåº”èŠ‚ã€è€Œéã€Œå•ç‹¬çº¦å¥¹ã€ã€‚</p>
<p><strong>èŠ‚æ—¥åˆ›é€ äº†ç‹¬ç‰¹çš„è®°å¿†é”šç‚¹ã€‚</strong> äººç±»çš„å¤§è„‘å¯¹ç‰¹æ®Šæ—¥æœŸæœ‰ç€å¤©ç„¶çš„æ•æ„Ÿåº¦ã€‚ã€Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡çº¦ä¼šå°±æ˜¯åœ¨ä¸ƒå¤•ã€è¿™ä¸ªè®°å¿†ä¼šä¼´éšå¥¹å¾ˆä¹…ï¼Œæ¯æ¬¡åˆ°ä¸ƒå¤•è¿™ä¸ªèŠ‚æ—¥ï¼Œå¥¹éƒ½ä¼šæƒ³èµ·ä½ ã€‚</p>
<p><strong>èŠ‚æ—¥æ”¾å¤§äº†æƒ…ç»ªä½“éªŒã€‚</strong> èŠ‚æ—¥æœ¬èº«å°±å¸¦æœ‰æ„‰æ‚¦ã€æ¸©é¦¨ã€æµªæ¼«çš„æ°›å›´ï¼Œåœ¨è¿™ä¸ªèƒŒæ™¯ä¸‹ï¼Œçº¦ä¼šçš„ä½“éªŒä¼šè¢«æ”¾å¤§ã€‚åŒæ ·çš„æ™šé¤ï¼Œåœ¨æ™®é€šæ—¥å­åƒå¯èƒ½åªæ˜¯ã€Œä¸é”™ã€ï¼Œåœ¨æƒ…äººèŠ‚åƒå°±å˜æˆäº†ã€Œæµªæ¼«ã€ã€‚</p>
<hr/>
<h2 data-id="heading-7">ç¬¬ä¸‰ç« ï¼šå¦‚ä½•ä¸€æ­¥æ­¥å°†ç†è®ºç¼–è¯‘ä¸ºå®è·µ</h2>
<h3 data-id="heading-8">3.1 ç¬¬ä¸€é˜¶æ®µï¼šå‰æœŸå‡†å¤‡ï¼ˆçº¦ä¼šå‰30å¤©ï¼‰</h3>
<p><strong>å»ºç«‹è¶³å¤Ÿçš„ä¿¡æ¯åŸºç¡€ã€‚</strong> åœ¨ä½ è€ƒè™‘çº¦å¥¹å‡ºæ¥ä¹‹å‰ï¼Œä½ éœ€è¦å¯¹å¥¹æœ‰è¶³å¤Ÿçš„äº†è§£ã€‚è¿™äº›ä¿¡æ¯åŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<p>å¥¹çš„å£å‘³åå¥½ï¼ˆç”œå’¸è¾£ï¼Ÿä¸­é¤è¿˜æ˜¯è¥¿é¤ï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆè¿‡æ•æˆ–è€…å¿Œå£ï¼Ÿï¼‰ã€å¥¹çš„å¨±ä¹åå¥½ï¼ˆå–œæ¬¢çœ‹ç”µå½±è¿˜æ˜¯çœ‹å±•ï¼Ÿå–œæ¬¢æˆ·å¤–è¿˜æ˜¯å®¤å†…ï¼Ÿï¼‰ã€å¥¹çš„ç¤¾äº¤é£æ ¼ï¼ˆå–œæ¬¢çƒ­é—¹çš„çº¦ä¼šè¿˜æ˜¯å®‰é™çš„äºŒäººä¸–ç•Œï¼Ÿï¼‰ã€å¥¹çš„æ¶ˆè´¹è§‚å¿µï¼ˆæ³¨é‡æ€§ä»·æ¯”è¿˜æ˜¯æ›´çœ‹é‡ä½“éªŒï¼Ÿï¼‰ã€‚</p>
<p>è·å–è¿™äº›ä¿¡æ¯çš„æ¸ é“åŒ…æ‹¬ï¼šæœ‹å‹åœˆï¼ˆä½†ä¸è¦è¡¨ç°å¾—åƒåœ¨çª¥æ¢ï¼‰ã€æ—¥å¸¸èŠå¤©ï¼ˆè‡ªç„¶è€Œç„¶åœ°èŠåˆ°ï¼‰ã€å…±åŒæœ‹å‹çš„é€éœ²ï¼Œä»¥åŠä½ çš„ç»†è‡´è§‚å¯Ÿã€‚</p>
<p><strong>å»ºç«‹ç¨³å®šçš„æ²Ÿé€šé¢‘ç‡ã€‚</strong> åœ¨æ­£å¼é‚€çº¦ä¹‹å‰ï¼Œä½ éœ€è¦ç¡®ä¿ä½ ä»¬ä¹‹é—´å·²ç»å»ºç«‹äº†ä¸€å®šçš„ç†Ÿæ‚‰åº¦ã€‚å»ºè®®çš„èŠ‚å¥æ˜¯ï¼šæ¯éš”ä¸¤åˆ°ä¸‰å¤©èŠä¸€æ¬¡å¤©ï¼Œæ¯æ¬¡èŠå¤©æ—¶é•¿åœ¨20åˆ†é’Ÿå·¦å³ã€‚èŠå¤©çš„å†…å®¹åº”è¯¥æ˜¯è½»æ¾çš„ã€æœ‰è¶£çš„ã€äº’ç›¸äº†è§£çš„ï¼Œè€Œä¸æ˜¯æŸ¥æˆ·å£å¼çš„æé—®ã€‚</p>
<p><strong>é€‰æ‹©åˆé€‚çš„èŠ‚æ—¥ã€‚</strong> ä¸æ˜¯æ‰€æœ‰çš„èŠ‚æ—¥éƒ½é€‚åˆç¬¬ä¸€æ¬¡çº¦ä¼šã€‚ä¼˜å…ˆé€‰æ‹©é‚£äº›å¸¦æœ‰æµªæ¼«å±æ€§ä½†åˆä¸ä¼šè®©äººæ„Ÿåˆ°è¿‡åº¦å‹åŠ›çš„èŠ‚æ—¥ã€‚</p>
<p>ç¬¬ä¸€æ¢¯é˜Ÿï¼šæƒ…äººèŠ‚ã€ä¸ƒå¤•ã€åœ£è¯ï¼ˆæµªæ¼«å±æ€§å¼ºï¼Œé€‚åˆè¡¨ç™½æˆ–ç¡®å®šå…³ç³»åçš„çº¦ä¼šï¼‰</p>
<p>ç¬¬äºŒæ¢¯é˜Ÿï¼š520ã€ç™½è‰²æƒ…äººèŠ‚ã€è·¨å¹´å¤œï¼ˆæœ‰ä¸€å®šçš„æµªæ¼«å±æ€§ï¼Œå¯ä»¥ä½œä¸ºæ™®é€šçº¦ä¼šçš„å¥‘æœºï¼‰</p>
<p>ç¬¬ä¸‰æ¢¯é˜Ÿï¼šå¥³ç”Ÿç”Ÿæ—¥ã€è®¤è¯†100å¤©çºªå¿µæ—¥ï¼ˆå±äºä½ ä»¬ä¸“å±çš„ç‰¹æ®Šæ—¥å­ï¼Œæ„ä¹‰é‡å¤§ï¼‰</p>
<h3 data-id="heading-9">3.2 ç¬¬äºŒé˜¶æ®µï¼šé‚€çº¦çš„è‰ºæœ¯ï¼ˆçº¦ä¼šå‰7å¤©ï¼‰</h3>
<p><strong>æ—¶æœºé€‰æ‹©ã€‚</strong> é‚€çº¦çš„æ—¶æœºéå¸¸é‡è¦ã€‚å¤ªæ—©æå‡ºä¼šè®©å¥¹æœ‰å¤ªé•¿çš„å‡†å¤‡æ—¶é—´ï¼ŒæœŸé—´å¯èƒ½å˜å¦ï¼›å¤ªæ™šæå‡ºä¼šæ˜¾å¾—ä½ æ²¡æœ‰è¯šæ„ã€‚ä¸€èˆ¬å»ºè®®åœ¨çº¦ä¼šå‰3-7å¤©æå‡ºé‚€çº¦ã€‚</p>
<p><strong>è¯æœ¯è®¾è®¡ã€‚</strong> é‚€çº¦çš„è¯æœ¯éœ€è¦è‡ªç„¶ã€ä¸å¸¦å‹åŠ›ã€ç»™å¥¹ç•™æœ‰æ‹’ç»çš„ä½™åœ°ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå‚è€ƒæ¨¡æ¿ï¼š</p>
<p>ç›´æ¥å‹ï¼šã€Œä¸ƒå¤•é‚£å¤©æœ‰ç©ºå—ï¼Ÿè¦ä¸ä¸€èµ·åƒä¸ªé¥­ï¼Ÿã€</p>
<p>æ‚¬å¿µå‹ï¼šã€Œæˆ‘æœ€è¿‘å‘ç°ä¸€å®¶å¾ˆä¸é”™çš„é¤å…ï¼Œæƒ³æ‰¾ä¸ªæ‡‚åƒçš„æœ‹å‹ä¸€èµ·å»ï¼Œä½ ä¸ƒå¤•æœ‰ç©ºå—ï¼Ÿã€</p>
<p>è¶£å‘³å‹ï¼šã€Œä¸ƒå¤•åˆè¦åˆ°äº†ï¼Œå•èº«ç‹—ä»¬å‡†å¤‡äº’ç›¸å–æš–äº†ï¼Œä½ è¦ä¸è¦è·Ÿæˆ‘å‡‘ä¸ªä¼´ï¼Ÿã€</p>
<p><strong>Plan Bçš„é‡è¦æ€§ã€‚</strong> ä½ çš„é‚€çº¦åº”è¯¥æœ‰Plan Bã€‚å¦‚æœå¥¹è¯´é‚£å¤©å·²ç»æœ‰å®‰æ’äº†ï¼Œä½ å¯ä»¥è¯´ï¼šã€Œæ²¡å…³ç³»ï¼Œé‚£å‘¨æœ«å¯ä»¥å—ï¼Ÿæˆ‘çŸ¥é“æœ‰ä¸€å®¶åº—å¾ˆæƒ³è¯•ä¸€ä¸‹ã€‚ã€å¦‚æœå¥¹è¿ç»­ä¸¤æ¬¡æ‹’ç»ï¼Œé‚£å¯èƒ½æ˜¯å¯¹ä½ æ²¡å…´è¶£ï¼Œè¿™æ—¶å€™ä½ åº”è¯¥çŸ¥éš¾è€Œé€€ï¼Œè€Œä¸æ˜¯ç©·è¿½çŒ›æ‰“ã€‚</p>
<h3 data-id="heading-10">3.3 ç¬¬ä¸‰é˜¶æ®µï¼šå®Œç¾çº¦ä¼šçš„æ‰§è¡Œï¼ˆçº¦ä¼šå½“å¤©ï¼‰</h3>
<p><strong>æ—¶é—´å®‰æ’çš„åŸåˆ™ã€‚</strong></p>
<p>å»ºè®®çš„çº¦ä¼šæ—¶é•¿æ˜¯3-5å°æ—¶ï¼Œå¤ªçŸ­ä¸å¤Ÿæ·±å…¥äº†è§£ï¼Œå¤ªé•¿åŒæ–¹éƒ½ä¼šç–²æƒ«ã€‚</p>
<p>æµç¨‹å»ºè®®ï¼šä¸‹åˆæˆ–å‚æ™šå¼€å§‹ â†’ ä¸€èµ·åƒæ™šé¤ â†’ é¤åæ´»åŠ¨ï¼ˆæ•£æ­¥ã€å’–å•¡å…ã€çœ‹ç”µå½±ç­‰ï¼‰ â†’ é€å¥¹å›å®¶ã€‚</p>
<p>æ¯ä¸ªç¯èŠ‚ä¹‹é—´è¦é¢„ç•™è¶³å¤Ÿçš„ç¼“å†²æ—¶é—´ï¼Œä¸è¦æŠŠè¡Œç¨‹å®‰æ’å¾—å¤ªç´§å‡‘ã€‚è®¡åˆ’èµ¶ä¸ä¸Šå˜åŒ–æ˜¯çº¦ä¼šæ°¸æ’çš„çœŸç†ã€‚</p>
<p><strong>ç¬¬ä¸€é¤çš„é€‰å€é€»è¾‘ã€‚</strong></p>
<p>ç¬¬ä¸€æ¬¡çº¦ä¼šçš„é¤å…é€‰æ‹©è‡³å…³é‡è¦ï¼Œå®ƒåŸºæœ¬ä¸Šå†³å®šäº†è¿™æ¬¡çº¦ä¼šçš„åŸºè°ƒã€‚ä»¥ä¸‹æ˜¯å‡ æ¡é“å¾‹ï¼š</p>
<p>é€‰æ‹©ä¸­ç­‰åä¸Šä»·ä½çš„é¤å…ã€‚å¤ªä¾¿å®œæ˜¾å¾—ä½ å°æ°”ï¼Œå¤ªè´µç»™å¥¹å‹åŠ›ã€‚æœ€å¥½çš„äººå‡æ¶ˆè´¹åŒºé—´æ˜¯ï¼šå¥¹æœˆæ”¶å…¥çš„0.5%-1%ã€‚</p>
<p>é€‰æ‹©ç¯å¢ƒå®‰é™ã€é€‚åˆäº¤è°ˆçš„é¤å…ã€‚éŸ³ä¹éœ‡å¤©å“çš„å¤œåº—ã€å®Œå…¨æ‹¼æ¡Œçš„ç½‘çº¢é¤å…ï¼Œè¿™äº›åœ°æ–¹éƒ½ä¸é€‚åˆç¬¬ä¸€æ¬¡çº¦ä¼šã€‚</p>
<p>é€‰æ‹©ä½ æœ‰ä¸€å®šäº†è§£ã€ä¸ä¼šè¸©é›·çš„é¤å…ã€‚ç¬¬ä¸€æ¬¡çº¦ä¼šä¸è¦å½“å°ç™½é¼ å»å°è¯•æ–°åº—ï¼Œå»ä½ éªŒè¯è¿‡çš„ã€å®‰å…¨çš„é¤å…ã€‚</p>
<p><strong>é¤æ¡Œä¸Šå¦‚ä½•èŠå¤©ã€‚</strong></p>
<p>èŠå¤©æ˜¯çº¦ä¼šçš„æ ¸å¿ƒç¯èŠ‚ã€‚å¾ˆå¤šç¨‹åºå‘˜åœ¨è¿™é‡Œä¼šé™·å…¥ä¸¤ä¸ªæç«¯ï¼šè¦ä¹ˆå…¨ç¨‹æ²‰é»˜ä¸çŸ¥é“è¯´ä»€ä¹ˆï¼Œè¦ä¹ˆä¸€ç›´è¯´æŠ€æœ¯æœ¯è¯­è®©å¯¹æ–¹æ˜æ˜æ¬²ç¡ã€‚</p>
<p>æ­£ç¡®çš„èŠå¤©æ–¹å¼åº”è¯¥æ˜¯ï¼š30%èŠå¥¹ï¼Œ30%èŠä½ ï¼Œ40%èŠæœ‰è¶£çš„è¯é¢˜ã€‚</p>
<p>å…·ä½“æ“ä½œï¼šå¤šé—®å¼€æ”¾å¼é—®é¢˜ï¼ˆã€Œä½ å¹³æ—¶å‘¨æœ«éƒ½å¹²å˜›ï¼Ÿã€æ¯”ã€Œä½ å–œæ¬¢çœ‹ç”µå½±å—ï¼Ÿã€å¥½ï¼‰ã€è®¤çœŸå€¾å¬å¹¶ç»™äºˆåé¦ˆï¼ˆè®°ä½å¥¹è¯´çš„ç»†èŠ‚ï¼Œåé¢å¯ä»¥æèµ·ï¼‰ã€é€‚åº¦å±•ç¤ºè‡ªå·±ï¼ˆåˆ†äº«ä½ çš„æœ‰è¶£ç»å†ã€ä½ çš„çˆ±å¥½ï¼‰ã€ä¸è¦æ‰“æ–­å¥¹ã€ä¸è¦è¿‡æ—©è¯„ä»·å¥¹çš„è§‚ç‚¹ã€‚</p>
<p><strong>çº¦ä¼šä¸­çš„åŠ åˆ†ç»†èŠ‚ã€‚</strong></p>
<p>å‡†æ—¶åˆ°è¾¾ï¼Œç”šè‡³æå‰10åˆ†é’Ÿåˆ°è¾¾ã€‚å‡†æ—¶æ˜¯æœ€åŸºæœ¬çš„å°Šé‡ã€‚</p>
<p>ä¸»åŠ¨å¸®å¥¹æ‹‰æ¤…å­ã€å€’æ°´ã€æ‹¿åŒ…ï¼ˆå¦‚æœå¥¹æ„¿æ„è®©ä½ æ‹¿çš„è¯ï¼‰ã€‚</p>
<p>ç‚¹èœæ—¶å…ˆé—®å¥¹çš„æ„è§ï¼Œç„¶åä½ æ¥å†³å®šã€‚å¦‚æœå¥¹è®©ä½ ç‚¹ï¼Œä½ å¯ä»¥ç‚¹å‡ ä¸ªæ‹›ç‰Œèœï¼Œå†è®©å¥¹ç‚¹ä¸€é“å¥¹æƒ³åƒçš„ã€‚</p>
<p>åƒé¥­æ—¶ä¸è¦ä¸€ç›´çœ‹æ‰‹æœºã€‚å¦‚æœæœ‰å¿…è¦å¤„ç†çš„äº‹æƒ…ï¼Œé“æ­‰å¹¶å¿«é€Ÿå¤„ç†ã€‚</p>
<p>é€‚æ—¶å¤¸èµå¥¹ï¼Œä½†è¦å…·ä½“ã€‚ã€Œä½ ä»Šå¤©çœŸå¥½çœ‹ã€ä¸å¦‚ã€Œä½ ä»Šå¤©çš„è€³ç¯å¾ˆé€‚åˆä½ ï¼Œå¾ˆæ˜¾æ°”è´¨ã€ã€‚</p>
<p><strong>é¤åæ´»åŠ¨çš„é€‰æ‹©ã€‚</strong></p>
<p>æ™šé¤ä¹‹åçš„æ—¶é—´æ€ä¹ˆå®‰æ’ï¼Ÿä»¥ä¸‹å‡ ä¸ªé€‰é¡¹æ¯”è¾ƒç¨³å¦¥ï¼š</p>
<p>æ•£æ­¥èŠå¤©ï¼šæˆæœ¬æœ€ä½ï¼Œä½†éœ€è¦ä½ æœ‰è¶³å¤Ÿçš„èŠå¤©èƒ½åŠ›ã€‚åœ¨å¤œè‰²ä¸­æ•£æ­¥èŠå¤©æ˜¯å¾ˆæµªæ¼«çš„é€‰æ‹©ã€‚</p>
<p>å’–å•¡å…ï¼šæ‰¾ä¸€ä¸ªæœ‰æ°›å›´çš„å’–å•¡å…ï¼Œç»§ç»­èŠå¤©æˆ–è€…ä¸€èµ·ç©ç‚¹å°æ¸¸æˆã€‚</p>
<p>çœ‹ç”µå½±ï¼šé€‰æ‹©ä¸€éƒ¨å£ç¢‘å¥½çš„ç”µå½±ï¼Œçœ‹å®Œç”µå½±åå¯ä»¥è®¨è®ºå‰§æƒ…ã€‚ä½†ç”µå½±é™¢æ²¡æ³•èŠå¤©ï¼Œæ‰€ä»¥è¿™éƒ¨ç”µå½±æœ€å¥½æ˜¯å¥¹æ„Ÿå…´è¶£çš„ç±»å‹ã€‚</p>
<p>å¯†å®¤é€ƒè„±/å‰§æœ¬æ€ï¼šå¦‚æœå¥¹å–œæ¬¢è¿™ç±»æ¸¸æˆï¼Œè¿™æ˜¯å¾ˆå¥½çš„é€‰æ‹©ï¼Œå› ä¸ºè¿‡ç¨‹ä¸­æœ‰å¾ˆå¤šäº’åŠ¨å’Œäº¤æµã€‚</p>
<h3 data-id="heading-11">3.4 ç¬¬å››é˜¶æ®µï¼šçº¦ä¼šåçš„æ”¶å°¾</h3>
<p><strong>é€å¥¹å›å®¶ã€‚</strong> çº¦ä¼šç»“æŸåï¼Œä¸»åŠ¨æå‡ºé€å¥¹å›å®¶ã€‚å¦‚æœå¥¹è¯´ä¸ç”¨ï¼Œä½ å¯ä»¥è¯´ã€Œæ²¡äº‹ï¼Œæˆ‘é¡ºè·¯ã€æˆ–è€…ã€Œå¤ªæ™šäº†ä¸å®‰å…¨ï¼Œæˆ‘è¿˜æ˜¯é€ä½ å§ã€ã€‚å¦‚æœå¥¹åšæŒä¸ç”¨ï¼Œé‚£å°±å°Šé‡å¥¹çš„é€‰æ‹©ã€‚</p>
<p><strong>åˆ°å®¶åå‘æ¶ˆæ¯ã€‚</strong> å¥¹åˆ°å®¶åï¼Œä½ å¯ä»¥å‘ä¸€æ¡æ¶ˆæ¯ï¼šã€Œä»Šå¤©å¾ˆå¼€å¿ƒï¼Œæ—©ç‚¹ä¼‘æ¯å“¦ã€‚ã€ç®€çŸ­ã€å¾—ä½“ã€ä¸çº ç¼ ã€‚</p>
<p><strong>åç»­è”ç³»ã€‚</strong> çº¦ä¼šåçš„ä¸€åˆ°ä¸¤å¤©å†…ï¼Œç»§ç»­æ‰¾å¥¹èŠå¤©ï¼Œå»¶ç»­çº¦ä¼šçš„å¥½æ°”æ°›ã€‚å¯ä»¥æä¸€ä¸‹çº¦ä¼šä¸­å‘ç”Ÿçš„è¶£äº‹ï¼Œæˆ–è€…é—®å¥¹é‚£å¤©æ‹çš„ç…§ç‰‡å¥½ä¸å¥½çœ‹ã€‚</p>
<hr/>
<h2 data-id="heading-12">ç¬¬å››ç« ï¼šå¸¸è§é—®é¢˜ä¸åº”å¯¹ç­–ç•¥</h2>
<h3 data-id="heading-13">4.1 ç´§å¼ æ€ä¹ˆåŠ</h3>
<p>ç´§å¼ æ˜¯æ­£å¸¸çš„ï¼Œå³ä½¿æ˜¯æƒ…åœºè€æ‰‹é¢å¯¹å–œæ¬¢çš„äººä¹Ÿä¼šç´§å¼ ã€‚å‡ ä¸ªç¼“è§£ç´§å¼ çš„æ–¹æ³•ï¼š</p>
<p>æ·±å‘¼å¸ï¼Œè¿›å…¥çº¦ä¼šåœºæ‰€å‰æ·±å‘¼å¸ä¸‰æ¬¡ã€‚</p>
<p>æŠŠçº¦ä¼šå½“æˆä¸€æ¬¡æŠ€æœ¯äº¤æµï¼Œä½ åªæ˜¯åœ¨ã€Œé¢è¯•ã€ä¸€ä¸ªæ½œåœ¨çš„ã€Œåˆä½œä¼™ä¼´ã€ã€‚</p>
<p>é€‚å½“çš„ç´§å¼ æ˜¯å¥½äº‹ï¼Œå®ƒä¼šè®©ä½ æ›´ä¸“æ³¨ã€è¡¨ç°æ›´å¥½ã€‚</p>
<h3 data-id="heading-14">4.2 å†·åœºæ€ä¹ˆåŠ</h3>
<p>å†·åœºæ˜¯çº¦ä¼šä¸­å¸¸è§çš„æƒ…å†µï¼Œå¤„ç†æ–¹å¼åŒ…æ‹¬ï¼š</p>
<p>ã€Œæˆ‘çªç„¶æƒ³åˆ°ä¸€ä¸ªäº‹ã€ï¼ˆè½¬ç§»è¯é¢˜ï¼‰</p>
<p>ã€Œä½ çœ‹è¿‡é‚£ä¸ªç”µå½±å—ï¼Ÿæˆ‘æœ€è¿‘åœ¨çº ç»“è¦ä¸è¦çœ‹ã€ï¼ˆæŠ›å‡ºä¸€ä¸ªå¥¹å¯èƒ½æœ‰å…´è¶£çš„è¯é¢˜ï¼‰</p>
<p>ã€Œè¿™å®¶é¤å…ä½ è§‰å¾—æ€ä¹ˆæ ·ï¼Ÿã€ï¼ˆå›å½’å½“ä¸‹ï¼‰</p>
<p>æ‰¿è®¤å†·åœºï¼šã€Œå“ï¼Œæˆ‘å¥½åƒæœ‰ç‚¹ç´§å¼ ï¼Œä½ å‘¢ï¼Ÿã€çœŸè¯šå¾€å¾€æ¯”ç¡¬æ’‘æ›´æ‰“åŠ¨äººã€‚</p>
<h3 data-id="heading-15">4.3 å¥¹æ‹’ç»äº†æ€ä¹ˆåŠ</h3>
<p>è¢«æ‹’ç»æ˜¯æ­£å¸¸çš„ï¼Œä¹Ÿæ˜¯çº¦ä¼šçš„ä¸€éƒ¨åˆ†ã€‚å‡ ç§æƒ…å†µï¼š</p>
<p>ã€Œé‚£å¤©æ²¡ç©ºã€ï¼šè¯´æ˜å¥¹å¯èƒ½å¯¹ä½ æœ‰å…´è¶£ï¼Œåªæ˜¯æ—¶é—´ä¸åˆé€‚ã€‚ä½ å¯ä»¥æè®®å…¶ä»–æ—¶é—´ã€‚</p>
<p>ã€Œæˆ‘ä¸å¤ªæ–¹ä¾¿ã€ï¼šç¤¼è²Œä½†åšå®šçš„æ‹’ç»ã€‚è¿™æ—¶å€™ä½ åº”è¯¥é€€å‡ºï¼Œä¸è¦ç»§ç»­çº ç¼ ã€‚</p>
<p>ã€Œæˆ‘ä»¬è¿˜æ˜¯å½“æœ‹å‹å§ã€ï¼šæ˜ç¡®çš„æ‹’ç»ã€‚æ¥å—è¿™ä¸ªç»“æœï¼Œä¿æŒå°Šé‡ï¼Œä½†å‡å°‘è”ç³»é¢‘ç‡ã€‚</p>
<p>è®°ä½ï¼šè¢«æ‹’ç»ä¸ä»£è¡¨ä½ ä¸å¤Ÿå¥½ï¼Œåªä»£è¡¨ä½ ä»¬ä¸åˆé€‚ã€‚ä¸–ç•Œä¸Šæœ‰é‚£ä¹ˆå¤šå¥³å­©å­ï¼Œæ€»æœ‰ä¸€ä¸ªä¼šæ¬£èµä½ ã€‚</p>
<hr/>
<h2 data-id="heading-16">ç¬¬äº”ç« ï¼šç¨‹åºå‘˜çš„ç‹¬ç‰¹çº¦ä¼šä¼˜åŠ¿</h2>
<h3 data-id="heading-17">5.1 ç”¨æŠ€æœ¯æ€ç»´ä¼˜åŒ–çº¦ä¼šä½“éªŒ</h3>
<p>æˆ‘ä»¬ç¨‹åºå‘˜æœ€æ“…é•¿çš„å°±æ˜¯ä¼˜åŒ–ã€‚è¯•ç€æŠŠçº¦ä¼šå½“ä½œä¸€ä¸ªã€Œç³»ç»Ÿã€æ¥ä¼˜åŒ–ï¼š</p>
<p>å»ºç«‹çº¦ä¼šSOPï¼ˆæ ‡å‡†ä½œä¸šç¨‹åºï¼‰ï¼šæŠŠæˆåŠŸçš„çº¦ä¼šç»éªŒå›ºåŒ–ä¸ºå¯å¤ç”¨çš„æµç¨‹ã€‚</p>
<p>è¿›è¡ŒA/Bæµ‹è¯•ï¼šè¿™æ¬¡çº¦é¥­é€‰æ‹©æ—¥æ–™ï¼Œä¸‹æ¬¡çº¦é¥­é€‰æ‹©æ³•é¤ï¼Œçœ‹å“ªä¸ªåé¦ˆæ›´å¥½ã€‚</p>
<p>æ”¶é›†æ•°æ®ï¼šæ¯æ¬¡çº¦ä¼šåè®°å½•å“ªäº›ç¯èŠ‚å¥¹è¡¨ç°å¾—å¾ˆå¼€å¿ƒï¼Œå“ªäº›ç¯èŠ‚å¥¹å…´è¶£ä¸é«˜ã€‚</p>
<h3 data-id="heading-18">5.2 åˆ›é€ å±äºç¨‹åºå‘˜çš„ç‹¬ç‰¹æµªæ¼«</h3>
<p>ä¸è¦è¯•å›¾æˆä¸ºåˆ«äººï¼Œå‘æŒ¥ä½ ä½œä¸ºç¨‹åºå‘˜ç‹¬ç‰¹çš„æµªæ¼«ï¼š</p>
<p>å†™ä¸€ä¸ªä¸“å±çš„å°ç¨‹åºç»™å¥¹ï¼Œåœ¨å¥¹ç”Ÿæ—¥é‚£å¤©å±•ç¤ºã€‚</p>
<p>ç”¨GitHubè´¡çŒ®å›¾çš„æ–¹å¼è®°å½•ä½ ä»¬çš„ã€Œæ„Ÿæƒ…è¿›åº¦ã€ã€‚</p>
<p>æ•™å¥¹ç¼–ç¨‹å…¥é—¨çŸ¥è¯†ï¼Œè®©å¥¹åœ¨å­¦ä¹ ä¸­å¯¹ä½ äº§ç”Ÿå´‡æ‹œã€‚</p>
<p>åœ¨è·¨å¹´å¤œç»™å¥¹å±•ç¤ºä½ å†™çš„ä¸€ä¸ªå°åŠ¨ç”»æˆ–è€…å°æ¸¸æˆã€‚</p>
<hr/>
<h2 data-id="heading-19">ç»“è¯­ï¼šçˆ±æƒ…ä¹Ÿæ˜¯ä¸€é—¨éœ€è¦ä¸æ–­è¿­ä»£çš„æŠ€æœ¯</h2>
<p>æ‹çˆ±å°±åƒç¼–ç¨‹ï¼šä½ ä¸å¯èƒ½ä¸€æ¬¡å†™å‡ºå®Œç¾çš„ä»£ç ï¼Œä½ éœ€è¦ä¸æ–­æµ‹è¯•ã€ä¸æ–­debugã€ä¸æ–­ä¼˜åŒ–ã€‚</p>
<p>ç¬¬ä¸€æ¬¡çº¦ä¼šç´§å¼ è¯´é”™è¯ï¼Ÿæ²¡å…³ç³»ï¼Œè¿™æ˜¯ä½ æ”¶é›†åˆ°çš„ã€Œå¼‚å¸¸æ•°æ®ã€ï¼Œä¸‹æ¬¡é¿å…ç±»ä¼¼çš„é”™è¯¯ã€‚</p>
<p>çº¦ä¼šè¢«æ‹’ç»äº†ï¼Ÿæ²¡å…³ç³»ï¼Œè¿™æ˜¯ä½ æ’é™¤äº†ä¸€ç§ã€Œä¸å…¼å®¹çš„æƒ…å†µã€ã€‚</p>
<p>æˆåŠŸäº†ï¼Ÿæ­å–œä½ ï¼Œè¿™æ˜¯ä½ ä»£ç é€šè¿‡æµ‹è¯•å¯ä»¥ä¸Šçº¿äº†ã€‚</p>
<p>æ— è®ºç»“æœå¦‚ä½•ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ¬èº«å°±æ˜¯ä¸€ç§æˆé•¿å’Œæ”¶è·ã€‚æŠ€æœ¯èƒ½åŠ›å¯ä»¥é€šè¿‡å­¦ä¹ æå‡ï¼Œæƒ…åœºèƒ½åŠ›åŒæ ·å¯ä»¥ã€‚</p>
<p>æœ€åï¼Œè®°ä½ä¸€ç‚¹ï¼šçœŸè¯šæ˜¯æœ€å¼ºçš„ä»£ç ã€‚æ‰€æœ‰çš„æŠ€å·§éƒ½åªæ˜¯å·¥å…·ï¼ŒçœŸæ­£èƒ½æ‰“åŠ¨ä¸€ä¸ªäººçš„ï¼Œæ°¸è¿œæ˜¯ä½ å¯¹å¥¹çš„çœŸå¿ƒå®æ„ã€‚</p>
<p>ç¥ä½ ç¼–è¯‘æˆåŠŸï¼Œè¿è¡Œé¡ºç•…ï¼Œçˆ±æƒ…æ°¸æ— bugã€‚</p>
<hr/>
<p><em>ã€Œä¸–ç•Œä¸Šåªæœ‰ä¸¤ç§ç¼–ç¨‹è¯­è¨€ï¼šä¸€ç§æ˜¯è¢«äººåæ§½çš„ï¼Œä¸€ç§æ˜¯æ²¡äººç”¨çš„ã€‚åŒæ ·ï¼Œä¸–ç•Œä¸Šåªæœ‰ä¸¤ç§äººï¼šä¸€ç§æ˜¯è¢«æ‹’ç»çš„ï¼Œä¸€ç§æ˜¯è¿˜æ²¡å»è¡¨ç™½çš„ã€‚æ‰€ä»¥ï¼Œåˆ«çŠ¹è±«äº†ï¼Œå‹‡æ•¢åœ°æ•²ä¸‹é‚£è¡Œ'çº¦ä¼šç”³è¯·'çš„ä»£ç å§ï¼ã€</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ¨æ ¹é—®åº•æ ç›®ç»„ - å­¦ä¹  Zustand çš„å¹¿æ’­å“²å­¦]]></title>    <link>https://juejin.cn/post/7587965908287946762</link>    <guid>https://juejin.cn/post/7587965908287946762</guid>    <pubDate>2025-12-26T08:58:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965908287946762" data-draft-id="7587965800272396314" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ¨æ ¹é—®åº•æ ç›®ç»„ - å­¦ä¹  Zustand çš„å¹¿æ’­å“²å­¦"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T08:58:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¸…é£ä¹é¸£"/> <meta itemprop="url" content="https://juejin.cn/user/4300945220723917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ¨æ ¹é—®åº•æ ç›®ç»„ - å­¦ä¹  Zustand çš„å¹¿æ’­å“²å­¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4300945220723917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¸…é£ä¹é¸£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T08:58:44.000Z" title="Fri Dec 26 2025 08:58:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>åœ¨å‰ç«¯çŠ¶æ€ç®¡ç†çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¬åˆ°â€œå‘å¸ƒè®¢é˜…æ¨¡å¼â€ã€â€œè§‚å¯Ÿè€…æ¨¡å¼â€ç­‰æœ¯è¯­ã€‚æœ¬æ–‡å°†ä»ä¸€æ¬¡æ„å¤–çš„â€œæ— é™å¾ªç¯â€æŠ¥é”™å¼€å§‹ï¼Œé€šè¿‡å¯¹æ¯” EventBus å’Œ Zustand çš„åº•å±‚å·®å¼‚ï¼Œæ·±å…¥å‰–æ Zustand é‚£ä¸ªç®€å•å´ç²¾å¦™çš„å¹¿æ’­æœºåˆ¶ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ å¼•å­ï¼šä¸€æ¬¡æ„æƒ³ä¸åˆ°çš„æ­»å¾ªç¯</h2>
<p>æ•…äº‹å§‹äºä¸€è¡Œçœ‹ä¼¼æ— å®³çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ğŸ˜± å¯¼è‡´æŠ¥é”™çš„ä»£ç </span>
<span class="hljs-keyword">const</span> obj = <span class="hljs-title function_">useMyStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">count</span>: s.<span class="hljs-property">count</span>, <span class="hljs-attr">text</span>: s.<span class="hljs-property">text</span> }), shallowEqual);
</code></pre>
<p><strong>ç°è±¡</strong>ï¼šé¡µé¢æŠ¥é”™ <code>Maximum update depth exceeded</code>ã€‚</p>
<p><strong>åŸå› </strong>ï¼š</p>
<p>React çš„ <code>useSyncExternalStore</code> ä¾èµ– <strong>å¼•ç”¨ç¨³å®šæ€§</strong> æ¥åˆ¤æ–­æ˜¯å¦åœæ­¢æ›´æ–°ã€‚</p>
<p>å½“ Selector è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ <code>{ ... }</code> æ—¶ï¼Œå³ä½¿å†…å®¹æ²¡å˜ï¼Œå¼•ç”¨çš„å†…å­˜åœ°å€ä¹Ÿå˜äº†ã€‚React è®¤ä¸ºçŠ¶æ€å˜äº† - é‡æ–°æ¸²æŸ“ - å†æ¬¡è°ƒç”¨ selector ç”Ÿæˆæ–°å¯¹è±¡ - å†æ¬¡è®¤ä¸ºå˜äº† - <strong>æ­»å¾ªç¯</strong>ã€‚</p>
<p>è¿™å¼•å‡ºäº†æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ€è€ƒï¼š<strong>Zustand çš„é€šçŸ¥æœºåˆ¶åˆ°åº•æœ‰å¤šâ€œå‚»â€ï¼Ÿå®ƒä¸ºä»€ä¹ˆä¸å¸®æˆ‘è¿‡æ»¤æ‰è¿™äº›æ²¡ç”¨çš„æ›´æ–°ï¼Ÿ</strong></p>
<hr/>
<h2 data-id="heading-1">äºŒã€ å¹¿æ’­çš„ä¸¤ç§æµæ´¾ï¼šEventBus vs Zustand</h2>
<p>ä¸ºäº†ç†è§£ Zustand çš„è¡Œä¸ºï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒå’Œæˆ‘ä»¬ç†Ÿæ‚‰çš„ EventBusï¼ˆäº‹ä»¶æ€»çº¿ï¼‰åšä¸€ä¸ªå¯¹æ¯”ã€‚</p>
<h3 data-id="heading-2">1. EventBusï¼šç²¾å‡†æŠ•é€’çš„â€œå¹¿æ’­ç«™â€</h3>
<p>EventBus çš„æ ¸å¿ƒæ•°æ®ç»“æ„é€šå¸¸æ˜¯ <strong>Map</strong>ã€‚</p>
<ul>
<li>
<p><strong>ç»“æ„</strong>ï¼š<code>Map&lt;EventName, Array&lt;Callback&gt;&gt;</code></p>
</li>
<li>
<p><strong>å“²å­¦</strong>ï¼š<strong>åˆ†é¢‘é“</strong>ã€‚</p>
</li>
<li>
<p><strong>åœºæ™¯</strong>ï¼šåŠ¨ä½œé©±åŠ¨ï¼ˆAction-drivenï¼‰ã€‚æ¯”å¦‚â€œç‚¹å‡»ä¿å­˜â€ã€â€œè¯·æ±‚å¤±è´¥â€ã€‚</p>
</li>
<li>
<p><strong>æµç¨‹</strong>ï¼š</p>
</li>
</ul>
<ol>
<li>
<p><strong>è®¢é˜…</strong>ï¼š<code>key = 'login_success'</code>ï¼ŒæŠŠæˆ‘åŠ åˆ°è¿™ä¸ª key çš„åˆ—è¡¨é‡Œã€‚</p>
</li>
<li>
<p><strong>æŸ¥æ‰¾</strong>ï¼šè§¦å‘æ—¶ï¼Œå…ˆé€šè¿‡ key å» Map é‡ŒæŸ¥è¡¨ã€‚</p>
</li>
<li>
<p><strong>æ‰§è¡Œ</strong>ï¼šåªé€šçŸ¥å…³æ³¨è¿™ä¸ª key çš„äººã€‚</p>
</li>
</ol>
<h3 data-id="heading-3">2. Zustandï¼šå…¨å‘˜å¹¿æ’­çš„â€œç­çº§é»‘æ¿â€</h3>
<p>Zustand çš„æ ¸å¿ƒæ•°æ®ç»“æ„æ˜¯ <strong>Set</strong>ã€‚</p>
<ul>
<li>
<p><strong>ç»“æ„</strong>ï¼š<code>Set&lt;Callback&gt;</code></p>
</li>
<li>
<p><strong>å“²å­¦</strong>ï¼š<strong>å•ä¸€ä¿¡æºï¼ˆSingle Source of Truthï¼‰</strong>ã€‚</p>
</li>
<li>
<p><strong>åœºæ™¯</strong>ï¼šæ•°æ®é©±åŠ¨ï¼ˆData-drivenï¼‰ã€‚æ¯”å¦‚â€œç”¨æˆ·ä¿¡æ¯æ›´æ–°â€ã€â€œè®¡æ•°å™¨å˜åŒ–â€ã€‚</p>
</li>
<li>
<p><strong>æµç¨‹</strong>ï¼š</p>
</li>
</ul>
<ol>
<li>
<p><strong>è®¢é˜…</strong>ï¼šä¸ç®¡ä½ å…³å¿ƒå•¥ï¼Œå…ˆæŠŠä½ çš„åå­—åŠ åˆ°åå•é‡Œã€‚</p>
</li>
<li>
<p><strong>æŸ¥æ‰¾</strong>ï¼š<strong>ä¸éœ€è¦æŸ¥æ‰¾</strong>ã€‚</p>
</li>
<li>
<p><strong>æ‰§è¡Œ</strong>ï¼šæ•°æ®ä¸€å˜ï¼Œç›´æ¥éå† Setï¼Œé€šçŸ¥<strong>æ‰€æœ‰äºº</strong>ã€‚</p>
</li>
</ol>
<p><strong>å…³é”®åŒºåˆ«</strong>ï¼š</p>
<blockquote>
<p><strong>Map å¤©ç„¶è´´åˆâ€œé¢‘é“â€åŒºåˆ†ï¼ˆKVç»“æ„ï¼‰ï¼Œè€Œ Set å¤©ç„¶è´´åˆ forEach å¾ªç¯ï¼ˆé›†åˆç»“æ„ï¼‰ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ æ·±å…¥è™ç©´ï¼šZustand æ˜¯å¦‚ä½•â€œè¿½åŠ ç›‘å¬â€çš„ï¼Ÿ</h2>
<p>æˆ‘ä»¬å¯ä»¥å‰¥ç¦» Reactï¼Œç”¨çº¯ JS è¿˜åŸ Zustand åœ¨ <code>subscribe</code> æ—¶åšçš„äº‹æƒ…ã€‚å®ƒå°±åƒä¸€ä¸ªè´Ÿè´£çš„é‚®å±€ã€‚</p>
<h3 data-id="heading-5">æ¨¡æ‹Ÿå®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. è¿™æ˜¯ä¸€ä¸ªæå…¶è¿·ä½ çš„ Store</span>
<span class="hljs-keyword">const</span> store = {
  <span class="hljs-comment">// è¿™æ˜¯é‚£ä¸ªåå•æœ¬å­ (Set)</span>
  <span class="hljs-attr">listeners</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(),

  <span class="hljs-comment">// âœ¨é‡ç‚¹åœ¨è¿™é‡Œï¼šè®¢é˜…å‡½æ•°âœ¨</span>
  <span class="hljs-attr">subscribe</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-comment">// åŠ¨ä½œï¼šæŠŠä½ ä¼ è¿›æ¥çš„å‡½æ•°ï¼ˆè”ç³»æ–¹å¼ï¼‰ï¼ŒåŠ åˆ°æœ¬å­ä¸Š</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">add</span>(callback);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ… æˆåŠŸè¿½åŠ ä¸€ä¸ªç›‘å¬ï¼ç°åœ¨åå•é‡Œæœ‰ <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.listeners.size}</span> ä¸ªäººã€‚`</span>);
    
    <span class="hljs-comment">// è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥å–æ¶ˆè®¢é˜…ï¼ˆä»¥åå†è¯´ï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">delete</span>(callback);
  },

  <span class="hljs-comment">// å‡è£…æ•°æ®å˜äº†ï¼Œé€šçŸ¥å¤§å®¶</span>
  <span class="hljs-attr">setState</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ“¢ åªæœ‰ä¸€ä»¶äº‹ï¼šæ•°æ®å˜äº†ï¼å¼€å§‹æŒ¨ä¸ªé€šçŸ¥..."</span>);
    <span class="hljs-comment">// éå† Setï¼Œæ‰§è¡Œæ¯ä¸ªå‡½æ•°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">run</span> =&gt;</span> <span class="hljs-title function_">run</span>());
  }
};

<span class="hljs-comment">// ==========================================</span>
<span class="hljs-comment">// åœºæ™¯å¼€å§‹ï¼šä¸¤ä¸ªâ€œç»„ä»¶â€æ¥è®¢é˜…äº†</span>
<span class="hljs-comment">// ==========================================</span>

<span class="hljs-comment">// æ¨¡æ‹Ÿç»„ä»¶ Aï¼ˆæ¯”å¦‚æ˜¯é¡µé¢é¡¶éƒ¨çš„ Headerï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">componentA_Update</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"   -&gt; ç»„ä»¶Aæ”¶åˆ°é€šçŸ¥ï¼šæˆ‘è¦æ£€æŸ¥ä¸‹ç”¨æˆ·åå˜æ²¡å˜"</span>);

<span class="hljs-comment">// æ¨¡æ‹Ÿç»„ä»¶ Bï¼ˆæ¯”å¦‚æ˜¯é¡µé¢åº•éƒ¨çš„ Footerï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">componentB_Update</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"   -&gt; ç»„ä»¶Bæ”¶åˆ°é€šçŸ¥ï¼šæˆ‘è¦æ£€æŸ¥ä¸‹ç‰ˆæƒå¹´ä»½å˜æ²¡å˜"</span>);

<span class="hljs-comment">// åŠ¨ä½œ 1ï¼šç»„ä»¶ A å‡ºç”Ÿäº†ï¼Œè¯·æ±‚è®¢é˜…</span>
store.<span class="hljs-title function_">subscribe</span>(componentA_Update);
<span class="hljs-comment">// ğŸ‘‰ ç»“æœï¼šSet å†…éƒ¨ç°åœ¨æ˜¯ { componentA_Update }</span>

<span class="hljs-comment">// åŠ¨ä½œ 2ï¼šç»„ä»¶ B å‡ºç”Ÿäº†ï¼Œè¯·æ±‚è®¢é˜…</span>
store.<span class="hljs-title function_">subscribe</span>(componentB_Update);
<span class="hljs-comment">// ğŸ‘‰ ç»“æœï¼šSet å†…éƒ¨ç°åœ¨æ˜¯ { componentA_Update, componentB_Update }</span>

<span class="hljs-comment">// ==========================================</span>
<span class="hljs-comment">// åŠ¨ä½œ 3ï¼šæ•°æ®å˜äº†ï¼</span>
<span class="hljs-comment">// ==========================================</span>
store.<span class="hljs-title function_">setState</span>();
</code></pre>
<p>å½“ä½ è°ƒç”¨ <code>store.subscribe(fn)</code> æ—¶ï¼ŒZustand çœŸçš„åªæ˜¯ç®€å•åœ°æŠŠ <code>fn</code> æ‰”è¿›äº†é‚£ä¸ª <code>Set</code> é‡Œã€‚å¦‚æœæœ‰ 100 ä¸ªç»„ä»¶è®¢é˜…ï¼Œ<code>Set</code> é‡Œå°±æœ‰ 100 ä¸ªå‡½æ•°ã€‚</p>
<hr/>
<h2 data-id="heading-6">å››ã€ React æ˜¯ä½•æ—¶ä»‹å…¥çš„ï¼Ÿ</h2>
<p>ä½ å¯èƒ½ä¼šé—®ï¼šâ€œæˆ‘å†™ç»„ä»¶æ—¶åªç”¨äº† hooksï¼Œæ²¡å†™ subscribe å•Šï¼Ÿâ€</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>Hooks å¸®ä½ åšäº†è„æ´»ç´¯æ´»ã€‚</strong></p>
<p>å½“ä½ åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ <code>useStore</code> æ—¶ï¼Œå¹•åå‘ç”Ÿçš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p><strong>ç»„ä»¶æŒ‚è½½ (Mount)</strong>ï¼šç»„ä»¶åˆå§‹åŒ–ã€‚</p>
</li>
<li>
<p><strong>è‡ªåŠ¨è¿çº¿</strong>ï¼šReact çš„ <code>useSyncExternalStore</code> å†…éƒ¨ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª <code>forceUpdate</code> å‡½æ•°ï¼Œå¹¶è°ƒç”¨ <code>store.subscribe(forceUpdate)</code>ã€‚</p>
</li>
<li>
<p><strong>ç™»è®°åœ¨å†Œ</strong>ï¼šæ­¤æ—¶ï¼ŒStore çš„ <code>Set</code> é‡Œå¤šäº†ä¸€ä¸ªå±äºè¯¥ç»„ä»¶çš„ç›‘å¬å™¨ã€‚</p>
</li>
</ol>
<h3 data-id="heading-7"><code>useSyncExternalStore</code>å†…éƒ¨åˆ°åº•å¹²äº†å•¥</h3>
<p><strong>ä½œç”¨</strong>ï¼šå®‰å…¨åœ°å°†Reactç»„ä»¶é“¾æ¥åˆ°å¤–éƒ¨çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚Reduxã€Zustandã€æµè§ˆå™¨storageï¼‰ï¼Œè§£å†³å¹¶å‘æ¸²æŸ“ä¸‹çš„æ’•è£‚é—®é¢˜</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useSyncExternalStore</span>(<span class="hljs-params">subscribe, getSnapshot</span>) {
  <span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>(<span class="hljs-title function_">getSnapshot</span>());
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleStoreChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setState</span>(<span class="hljs-title function_">getSnapshot</span>());
    };
    
    <span class="hljs-comment">// 1. è®¢é˜…çŠ¶æ€å˜åŒ–ï¼ˆè¿”å›æ¸…ç†å‡½æ•°ï¼‰</span>
    <span class="hljs-keyword">const</span> unsubscribe = <span class="hljs-title function_">subscribe</span>(handleStoreChange);
    
    <span class="hljs-comment">// 2. è¿”å›æ¸…ç†å‡½æ•°ï¼ˆç»„ä»¶å¸è½½æ—¶æ‰§è¡Œï¼‰</span>
    <span class="hljs-keyword">return</span> unsubscribe;
  }, [subscribe, getSnapshot]);

  <span class="hljs-keyword">return</span> state;
}
</code></pre>
<p>å¯è§ï¼Œå½“æˆ‘ä»¬åœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨useStoreæ—¶ï¼Œå…¶å†…éƒ¨çš„useSyncExternalStoreæ–¹æ³•å·²ç»è‡ªåŠ¨ä¸ºæˆ‘ä»¬å®Œæˆäº†æ³¨å†Œå’Œè®¢é˜…çš„è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-8">é€šçŸ¥çš„è¿‡ç¨‹ï¼ˆä¸ºä»€ä¹ˆæ­»å¾ªç¯å‘ç”Ÿåœ¨è¿™é‡Œï¼‰</h3>
<p>å½“ <code>store.setState</code> å‘ç”Ÿæ—¶ï¼š</p>
<ol>
<li>
<p><strong>Zustand</strong>ï¼šéå† <code>Set</code>ï¼Œè§¦å‘æ‰€æœ‰ç»„ä»¶çš„æ£€æŸ¥å‡½æ•°ã€‚</p>
</li>
<li>
<p><strong>React (æ£€æŸ¥å‡½æ•°)</strong>ï¼šè¿è¡Œä½ çš„ Selector <code>s =&gt; ({ ... })</code>ã€‚</p>
</li>
<li>
<p><strong>æ¯”å¯¹</strong>ï¼š</p>
</li>
</ol>
<ul>
<li>
<p><strong>æ—§å€¼</strong>ï¼šä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶çš„å¯¹è±¡ã€‚</p>
</li>
<li>
<p><strong>æ–°å€¼</strong>ï¼šSelector åˆšåˆšç”Ÿæˆçš„<strong>æ–°å¯¹è±¡</strong>ã€‚</p>
</li>
</ul>
<ol start="4">
<li><strong>æ‚²å‰§å‘ç”Ÿ</strong>ï¼šå¦‚æœæ˜¯å¼•ç”¨æ¯”è¾ƒï¼Œ<code>æ–°å¯¹è±¡ !== æ—§å¯¹è±¡</code>ï¼ŒReact åˆ¤å®šå¿…é¡»æ›´æ–°ã€‚ç»„ä»¶é‡æ–°æ¸²æŸ“ -&gt; å†æ¬¡ç”Ÿæˆæ–°å¯¹è±¡ -&gt; å†æ¬¡æ›´æ–° -&gt; <strong>Loop</strong>ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-9">äº”ã€ æ€»ç»“ï¼šå¤§æ™ºè‹¥æ„šçš„å¹¿æ’­å“²å­¦</h2>
<p>Zustand çš„è®¾è®¡å“²å­¦å¯ä»¥æ€»ç»“ä¸ºï¼š<strong>â€œå¤§å–‡å­é€šçŸ¥ + æ­¤æ—¶æ— å£°èƒœæœ‰å£°â€</strong>ã€‚</p>
<ul>
<li>
<p><strong>Store (å‘å¸ƒè€…)</strong>ï¼šæˆ‘å¾ˆæ‡’ï¼Œæˆ‘ä¸çŸ¥é“ä½ ä»¬è°å…³å¿ƒ <code>count</code>ï¼Œè°å…³å¿ƒ <code>name</code>ã€‚åæ­£æ•°æ®å˜äº†ï¼Œæˆ‘å°±å–Šä¸€å£°â€œå˜å¤©å•¦ï¼â€ã€‚</p>
</li>
<li>
<p><strong>Component (è®¢é˜…è€…)</strong>ï¼šæˆ‘å¾ˆå‹¤å¿«ã€‚å¬åˆ°â€œå˜å¤©å•¦â€ä¹‹åï¼Œæˆ‘å…ˆæ‹¿ Selector çœ‹çœ‹â€œæˆ‘çœ‹çš„é‚£å—äº‘å½©â€å˜æ²¡å˜ã€‚å¦‚æœæ²¡å˜ï¼Œæˆ‘å°±æ¥ç€ç¡ï¼›å¦‚æœå˜äº†ï¼Œæˆ‘æ‰èµ·åºŠå¹²æ´»ã€‚</p>
</li>
</ul>
<p>è¿™ç§æœºåˆ¶çœ‹ä¼¼â€œç²—æš´â€ï¼Œå®åˆ™<strong>è§£è€¦</strong>ã€‚Store ä¸å†ç»´æŠ¤å¤æ‚çš„äº‹ä»¶æ˜ å°„å…³ç³»ï¼Œè€Œæ˜¯æŠŠâ€œè¿‡æ»¤â€çš„æƒåŠ›ä¸‹æ”¾ç»™äº†æ¯ä¸ªç»„ä»¶ï¼ˆSelectorï¼‰ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Selector çš„ç¨³å®šæ€§ï¼ˆå¦‚ä½¿ç”¨ <code>shallowEqual</code> æˆ–ç¼“å­˜ï¼‰å¦‚æ­¤é‡è¦çš„åŸå› ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“ Web Worker é‡ä¸Šå¼‚æ­¥ï¼Œå¦‚ä½•çªç ´å•çº¿ç¨‹é™åˆ¶ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7587998744294064134</link>    <guid>https://juejin.cn/post/7587998744294064134</guid>    <pubDate>2025-12-26T08:46:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587998744294064134" data-draft-id="7587785079739219974" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“ Web Worker é‡ä¸Šå¼‚æ­¥ï¼Œå¦‚ä½•çªç ´å•çº¿ç¨‹é™åˆ¶ï¼Ÿ"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-26T08:46:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•²ä»£ç çš„ç‹¬è§’å…½"/> <meta itemprop="url" content="https://juejin.cn/user/729731452897246"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“ Web Worker é‡ä¸Šå¼‚æ­¥ï¼Œå¦‚ä½•çªç ´å•çº¿ç¨‹é™åˆ¶ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731452897246/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•²ä»£ç çš„ç‹¬è§’å…½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T08:46:30.000Z" title="Fri Dec 26 2025 08:46:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“ä½ çš„å‰ç«¯åº”ç”¨éœ€è¦å¤„ç†100MBçš„CSVæ•°æ®æ—¶ï¼Œé¡µé¢çªç„¶å¡æ­»ï¼Œæ§åˆ¶å°å¼¹å‡º"é•¿æ—¶é—´è¿è¡Œçš„è„šæœ¬"è­¦å‘Šï¼›å½“å®æ—¶è§†é¢‘åˆ†æå¯¼è‡´åŠ¨ç”»å¸§ç‡éª¤é™è‡³5FPSï¼Œç”¨æˆ·å¼€å§‹ç–¯ç‹‚ç‚¹å‡»æ— å“åº”çš„æŒ‰é’®â€”â€”è¿™äº›åœºæ™¯éƒ½åœ¨å°–å«åŒä¸€ä¸ªé—®é¢˜ï¼š<strong>JavaScriptçš„å•çº¿ç¨‹æ¨¡å‹æ­£åœ¨æˆä¸ºç°ä»£åº”ç”¨çš„æ€§èƒ½ç“¶é¢ˆ</strong>ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•é€šè¿‡Web Workerä¸å¼‚æ­¥ç¼–ç¨‹çš„æ·±åº¦ç»“åˆï¼Œæ„å»ºçœŸæ­£æµç•…çš„å‰ç«¯ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€å•çº¿ç¨‹çš„å›°å¢ƒï¼šå‰ç«¯æ€§èƒ½ç“¶é¢ˆçš„æ ¹æº</h3>
<p>JavaScriptçš„äº‹ä»¶å¾ªç¯åœ¨å¤„ç†I/Oå¯†é›†å‹ä»»åŠ¡æ—¶è¡¨ç°å‡ºè‰²ï¼Œä½†åœ¨CPUå¯†é›†å‹åœºæ™¯ä¸‹é¢ä¸´æ ¹æœ¬æ€§é™åˆ¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é˜»å¡ä¸»çº¿ç¨‹çš„å…¸å‹åœºæ™¯ï¼šå¤§å‹æ•°æ®å¤„ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processHugeData</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'ä¸»çº¿ç¨‹å¤„ç†'</span>);
  <span class="hljs-keyword">const</span> result = [];
  
  <span class="hljs-comment">// æ¨¡æ‹Ÿ100ä¸‡æ¡æ•°æ®çš„å¤æ‚è®¡ç®—</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000000</span>; i++) {
    result.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">id</span>: i,
      <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(data[i] * <span class="hljs-number">1.5</span>) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(i * <span class="hljs-number">0.01</span>),
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
    });
  }
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'ä¸»çº¿ç¨‹å¤„ç†'</span>);
  <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œå¯¼è‡´UIå†»ç»“</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'process-btn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> fakeData = <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">42</span>);
  <span class="hljs-keyword">const</span> output = <span class="hljs-title function_">processHugeData</span>(fakeData); <span class="hljs-comment">// é¡µé¢å®Œå…¨å¡æ­»çº¦2.3ç§’</span>
  <span class="hljs-title function_">renderResults</span>(output);
});
</code></pre>
<p><strong>æ€§èƒ½ç«ç„°å›¾åˆ†æ</strong>ï¼ˆChrome DevTools Performanceé¢æ¿ï¼‰ï¼š</p>
<ul>
<li>ä¸»çº¿ç¨‹è¢«é•¿æ—¶é—´å ç”¨ï¼ŒUIæ¸²æŸ“å®Œå…¨åœæ»</li>
<li>60FPSåŠ¨ç”»å¸§ç‡æš´è·Œè‡³3-5FPS</li>
<li>ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼ˆç‚¹å‡»ã€æ»šåŠ¨ï¼‰è¢«å»¶è¿Ÿå¤„ç†</li>
</ul>
<blockquote>
<p><strong>å…³é”®æ´å¯Ÿ</strong>ï¼šä¼ ç»Ÿå¼‚æ­¥æ¨¡å¼ï¼ˆsetTimeout/Promiseï¼‰åªèƒ½è§£å†³I/Oç­‰å¾…é—®é¢˜ï¼Œæ— æ³•é‡Šæ”¾CPUå¯†é›†å‹ä»»åŠ¡å¯¹ä¸»çº¿ç¨‹çš„å ç”¨ã€‚çªç ´ç‚¹åœ¨äº<strong>çœŸæ­£çš„å¹¶è¡Œè®¡ç®—</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">äºŒã€Web Worker åŸºç¡€ï¼šå¤šçº¿ç¨‹æ¶æ„çš„æ ¸å¿ƒæœºåˆ¶</h3>
<p>Web Workeré€šè¿‡åˆ›å»ºç‹¬ç«‹çº¿ç¨‹å®ç°çœŸæ­£çš„å¹¶è¡Œå¤„ç†ï¼Œå…¶æ ¸å¿ƒåœ¨äºä¸¥æ ¼çš„çº¿ç¨‹éš”ç¦»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main.js - ä¸»çº¿ç¨‹</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'worker.js'</span>, { 
  <span class="hljs-attr">type</span>: <span class="hljs-string">'module'</span>, <span class="hljs-comment">// æ”¯æŒESæ¨¡å—</span>
  <span class="hljs-attr">credentials</span>: <span class="hljs-string">'same-origin'</span> <span class="hljs-comment">// åŒæºç­–ç•¥é™åˆ¶</span>
});

worker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ¥è‡ªWorkerçš„æ•°æ®:'</span>, event.<span class="hljs-property">data</span>);
  <span class="hljs-title function_">updateUI</span>(event.<span class="hljs-property">data</span>);
};

worker.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Workeré”™è¯¯ [è¡Œ:<span class="hljs-subst">${error.lineno}</span>]`</span>, error.<span class="hljs-property">message</span>);
  <span class="hljs-title function_">showWorkerCrashModal</span>();
};

<span class="hljs-comment">// ä¼ é€’æ•°æ®ï¼ˆè‡ªåŠ¨åºåˆ—åŒ–ï¼‰</span>
worker.<span class="hljs-title function_">postMessage</span>({
  <span class="hljs-attr">action</span>: <span class="hljs-string">'processData'</span>,
  <span class="hljs-attr">payload</span>: hugeDataset
});

<span class="hljs-comment">// æ˜¾å¼ç»ˆæ­¢Worker</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'stop-btn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  worker.<span class="hljs-title function_">terminate</span>(); <span class="hljs-comment">// ç«‹å³ç»ˆæ­¢çº¿ç¨‹</span>
});
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// worker.js - ç‹¬ç«‹çº¿ç¨‹</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">async</span> (event) =&gt; {
  <span class="hljs-keyword">const</span> { action, payload } = event.<span class="hljs-property">data</span>;
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">switch</span>(action) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'processData'</span>:
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">processDataInWorker</span>(payload);
        self.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">status</span>: <span class="hljs-string">'success'</span>, <span class="hljs-attr">data</span>: result });
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'abort'</span>:
        <span class="hljs-comment">// å®ç°å¯å–æ¶ˆçš„è®¡ç®—</span>
        abortController.<span class="hljs-title function_">abort</span>();
        <span class="hljs-keyword">break</span>;
    }
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// Workerå†…é”™è¯¯ä¸ä¼šå½±å“ä¸»çº¿ç¨‹</span>
    self.<span class="hljs-title function_">postMessage</span>({ 
      <span class="hljs-attr">status</span>: <span class="hljs-string">'error'</span>, 
      <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span> 
    });
  }
};

<span class="hljs-comment">// ç‹¬ç«‹äºDOMçš„è®¡ç®—å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processDataInWorker</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-comment">// è¿™é‡Œæ— æ³•è®¿é—®window/documentç­‰å…¨å±€å¯¹è±¡</span>
  <span class="hljs-keyword">return</span> data.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-comment">/* å¤æ‚è®¡ç®— */</span>);
}
</code></pre>
<p><strong>æ ¸å¿ƒéš”ç¦»è§„åˆ™</strong>ï¼š</p>
<ul>
<li>âŒ æ— æ³•è®¿é—®DOMã€<code>window</code>ã€<code>document</code>ã€<code>localStorage</code></li>
<li>âŒ æ— æ³•ä½¿ç”¨<code>alert()</code>/<code>confirm()</code>ç­‰UIæ–¹æ³•</li>
<li>âœ… å¯è®¿é—®<code>navigator</code>ã€<code>setTimeout</code>ã€<code>fetch</code>ã€<code>WebAssembly</code></li>
<li>âœ… é€šè¿‡<code>importScripts()</code>æˆ–ESæ¨¡å—åŠ è½½å¤–éƒ¨ä»£ç </li>
</ul>
<blockquote>
<p><strong>å®‰å…¨è®¾è®¡åŸç†</strong>ï¼šWorkerè¿è¡Œåœ¨ç‹¬ç«‹çš„V8å®ä¾‹ä¸­ï¼Œé€šè¿‡ç»“æ„åŒ–å…‹éš†ç®—æ³•ï¼ˆStructured Clone Algorithmï¼‰è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œä»æ ¹æœ¬ä¸Šé¿å…ç«æ€æ¡ä»¶ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">ä¸‰ã€å¼‚æ­¥é€šä¿¡è¿›é˜¶ï¼šé«˜æ•ˆæ•°æ®ä¼ è¾“ç­–ç•¥</h3>
<p>ä¸»çº¿ç¨‹ä¸Workeré—´çš„æ•°æ®ä¼ è¾“æ˜¯æ€§èƒ½å…³é”®ï¼Œé”™è¯¯çš„ä½¿ç”¨æ–¹å¼ä¼šä½¿å¹¶è¡Œä¼˜åŠ¿è¡ç„¶æ— å­˜ï¼š</p>
<h4 data-id="heading-3">1. Transferable Objectsï¼šé›¶æ‹·è´ä¼ è¾“</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»çº¿ç¨‹</span>
<span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100_000_000</span>); <span class="hljs-comment">// 100MBæ•°æ®</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'data-processor.js'</span>);

<span class="hljs-comment">// ä¼ è¾“åä¸»çº¿ç¨‹å¤±å»bufferæ‰€æœ‰æƒï¼</span>
worker.<span class="hljs-title function_">postMessage</span>({ buffer }, [buffer]);

<span class="hljs-comment">// Workerä¸­</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { buffer } = e.<span class="hljs-property">data</span>;
  <span class="hljs-comment">// ç›´æ¥æ“ä½œåŸå§‹å†…å­˜ï¼Œæ— å¤åˆ¶å¼€é”€</span>
  <span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float64Array</span>(buffer);
  <span class="hljs-comment">// ...å¤„ç†æ•°æ®</span>
  self.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">resultBuffer</span>: processedBuffer }, [processedBuffer]);
};
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼ˆ100MB ArrayBufferï¼‰ï¼š</p>




















<table><thead><tr><th>ä¼ è¾“æ–¹å¼</th><th>è€—æ—¶ (Chrome 124)</th><th>å†…å­˜å³°å€¼</th></tr></thead><tbody><tr><td>é»˜è®¤ç»“æ„åŒ–å…‹éš†</td><td>320ms</td><td>200MB</td></tr><tr><td>Transferable</td><td>&lt;1ms</td><td>100MB</td></tr></tbody></table>
<h4 data-id="heading-4">2. MessageChannelï¼šå¤šWorkerå¤æ‚é€šä¿¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºé€šé“</span>
<span class="hljs-keyword">const</span> { port1, port2 } = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();

<span class="hljs-comment">// Worker A ä¸ Worker B é€šè¿‡porté€šä¿¡</span>
<span class="hljs-keyword">const</span> workerA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'workerA.js'</span>);
<span class="hljs-keyword">const</span> workerB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'workerB.js'</span>);

workerA.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'init'</span> }, [port1]);
workerB.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'init'</span> }, [port2]);

<span class="hljs-comment">// åœ¨workerA.jsä¸­</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'init'</span>) {
    <span class="hljs-keyword">const</span> port = e.<span class="hljs-property">ports</span>[<span class="hljs-number">0</span>];
    port.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">data</span>.<span class="hljs-property">action</span> === <span class="hljs-string">'request'</span>) {
        port.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">action</span>: <span class="hljs-string">'response'</span>, <span class="hljs-attr">data</span>: <span class="hljs-title function_">computeHeavyTask</span>() });
      }
    };
  }
};
</code></pre>
<blockquote>
<p><strong>å…³é”®å®è·µ</strong>ï¼šå¯¹äºè¶…è¿‡1MBçš„æ•°æ®ä¼ è¾“ï¼Œå§‹ç»ˆä¼˜å…ˆä½¿ç”¨Transferable Objectsã€‚æ³¨æ„ï¼šä¼ è¾“ååŸå¯¹è±¡åœ¨å‘é€æ–¹å˜ä¸ºä¸å¯ç”¨ï¼ˆå†…å­˜æ‰€æœ‰æƒè½¬ç§»ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">å››ã€ç°ä»£å¼€å‘å®è·µï¼šæ¡†æ¶ä¸å·¥å…·é“¾æ•´åˆ</h3>
<h4 data-id="heading-6">1. Comlinkï¼šæ¶ˆé™¤é€šä¿¡æ ·æ¿ä»£ç </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// worker.js</span>
<span class="hljs-keyword">import</span> { expose } <span class="hljs-keyword">from</span> <span class="hljs-string">'comlink'</span>;

<span class="hljs-keyword">const</span> api = {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">processImage</span>(<span class="hljs-params">imageData</span>) {
    <span class="hljs-comment">// å¤æ‚å›¾åƒå¤„ç†</span>
    <span class="hljs-keyword">return</span> processedData;
  },
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">trainModel</span>(<span class="hljs-params">dataset</span>) {
    <span class="hljs-comment">// TensorFlow.js æ¨¡å‹è®­ç»ƒ</span>
  }
};

<span class="hljs-title function_">expose</span>(api); <span class="hljs-comment">// æš´éœ²API</span>

<span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> { wrap } <span class="hljs-keyword">from</span> <span class="hljs-string">'comlink'</span>;

<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'worker.js'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-string">'module'</span> });
<span class="hljs-keyword">const</span> workerAPI = <span class="hljs-title function_">wrap</span>(worker);

<span class="hljs-comment">// åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> workerAPI.<span class="hljs-title function_">processImage</span>(imageData);
</code></pre>
<p><strong>Comlink ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨å¤„ç†Promise/asyncå‡½æ•°</li>
<li>æ”¯æŒç±»å®ä¾‹ä¼ è¾“</li>
<li>é€æ˜åŒ–é”™è¯¯å¤„ç†</li>
<li>ç±»å‹æ¨æ–­ï¼ˆé…åˆTypeScriptï¼‰</li>
</ul>
<h4 data-id="heading-7">2. æ¡†æ¶é›†æˆï¼ˆViteç¤ºä¾‹ï¼‰</h4>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">worker</span>: {
    <span class="hljs-attr">format</span>: <span class="hljs-string">'es'</span>,
    <span class="hljs-attr">plugins</span>: [
      <span class="hljs-comment">// ä¸ºWorkerå•ç‹¬é…ç½®æ’ä»¶</span>
      <span class="hljs-title function_">wasm</span>(),
      <span class="hljs-title function_">legacy</span>({
        <span class="hljs-attr">targets</span>: [<span class="hljs-string">'defaults'</span>, <span class="hljs-string">'not IE 11'</span>]
      })
    ]
  }
})
</code></pre>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// Reactç»„ä»¶ä¸­åŠ¨æ€åŠ è½½Worker</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useImageProcessor</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [worker, setWorker] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> imageWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(
      <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'./image-processor.worker.js'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>),
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'module'</span> }
    );
    
    <span class="hljs-title function_">setWorker</span>(imageWorker);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> imageWorker.<span class="hljs-title function_">terminate</span>();
  }, []);
  
  <span class="hljs-keyword">const</span> processImage = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (file) =&gt; {
    <span class="hljs-keyword">if</span> (!worker) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      worker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(e.<span class="hljs-property">data</span>);
      worker.<span class="hljs-title function_">postMessage</span>(file);
    });
  }, [worker]);
};
</code></pre>
<blockquote>
<p><strong>å·¥ç¨‹åŒ–æç¤º</strong>ï¼šåœ¨æ„å»ºé…ç½®ä¸­ä¸ºWorkerè®¾ç½®å•ç‹¬çš„entrypointï¼Œé¿å…å°†æ•´ä¸ªåº”ç”¨æ‰“åŒ…åˆ°Workerä¸­ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸é™·é˜±è§„é¿</h3>
<h4 data-id="heading-9">1. Workeræ± æ¨¡å¼ï¼ˆé¿å…é¢‘ç¹åˆ›å»ºå¼€é”€ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WorkerPool</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">workerPath, size = <span class="hljs-number">4</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span> = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: size }, <span class="hljs-function">() =&gt;</span> 
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(workerPath)
    );
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">nextWorkerIndex</span> = <span class="hljs-number">0</span>;
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">exec</span>(<span class="hljs-params">task</span>) {
    <span class="hljs-comment">// è½®è¯¢åˆ†é…ä»»åŠ¡</span>
    <span class="hljs-keyword">const</span> worker = <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">nextWorkerIndex</span>++ % <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span>.<span class="hljs-property">length</span>];
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMessage</span> = (<span class="hljs-params">e</span>) =&gt; {
        worker.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'message'</span>, handleMessage);
        <span class="hljs-title function_">resolve</span>(e.<span class="hljs-property">data</span>);
      };
      
      worker.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, handleMessage);
      worker.<span class="hljs-title function_">postMessage</span>(task);
    });
  }
  
  <span class="hljs-title function_">terminate</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">w</span> =&gt;</span> w.<span class="hljs-title function_">terminate</span>());
  }
}

<span class="hljs-comment">// ä½¿ç”¨ï¼šå¤ç”¨4ä¸ªWorkerå¤„ç†100ä¸ªä»»åŠ¡</span>
<span class="hljs-keyword">const</span> pool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WorkerPool</span>(<span class="hljs-string">'/tasks.worker.js'</span>, <span class="hljs-number">4</span>);
<span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
  <span class="hljs-title class_">Array</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">fill</span>().<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> pool.<span class="hljs-title function_">exec</span>({ <span class="hljs-attr">taskId</span>: i }))
);
</code></pre>
<h4 data-id="heading-10">2. å†…å­˜æ³„æ¼é˜²æŠ¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Workerå†…éƒ¨</span>
<span class="hljs-keyword">let</span> abortController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();

self.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span>.<span class="hljs-property">action</span> === <span class="hljs-string">'start'</span>) {
    <span class="hljs-comment">// æ¯æ¬¡æ–°ä»»åŠ¡é‡ç½®æ§åˆ¶å™¨</span>
    abortController.<span class="hljs-title function_">abort</span>(); 
    abortController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    
    <span class="hljs-title function_">processData</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">payload</span>, abortController.<span class="hljs-property">signal</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> self.<span class="hljs-title function_">postMessage</span>(result));
  }
};

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">data, signal</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-comment">// æ£€æŸ¥å–æ¶ˆä¿¡å·</span>
    <span class="hljs-keyword">if</span> (signal.<span class="hljs-property">aborted</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DOMException</span>(<span class="hljs-string">'Aborted'</span>, <span class="hljs-string">'AbortError'</span>);
    
    <span class="hljs-comment">// åˆ†å—å¤„ç†é˜²æ­¢é•¿æ—¶é—´å ç”¨</span>
    <span class="hljs-keyword">if</span> (i % <span class="hljs-number">1000</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">0</span>));
    
    <span class="hljs-comment">// ...å¤„ç†é€»è¾‘</span>
  }
}
</code></pre>
<p><strong>å…³é”®é˜²æŠ¤æªæ–½</strong>ï¼š</p>
<ul>
<li>å§‹ç»ˆåœ¨Workerä¸­ä½¿ç”¨<code>AbortController</code>æ”¯æŒå–æ¶ˆ</li>
<li>å¤„ç†å¤§æ•°æ®é›†æ—¶åˆ†å—æ‰§è¡Œï¼ˆchunk processingï¼‰</li>
<li>ä½¿ç”¨<code>setTimeout(0)</code>é‡Šæ”¾äº‹ä»¶å¾ªç¯</li>
<li>æ˜¾å¼æ¸…ç†äº‹ä»¶ç›‘å¬å™¨ï¼ˆé¿å…é—­åŒ…å†…å­˜æ³„æ¼ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-11">å…­ã€å®æˆ˜åœºæ™¯å‰–æ</h3>
<h4 data-id="heading-12">åœºæ™¯ï¼šå®æ—¶è§†é¢‘å¸§å¤„ç†ï¼ˆ60FPSï¼‰</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"output-canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"1280"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"720"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'output-canvas'</span>);
<span class="hljs-keyword">const</span> offscreen = canvas.<span class="hljs-title function_">transferControlToOffscreen</span>(); <span class="hljs-comment">// OffscreenCanvas</span>

<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'video-processor.js'</span>);
worker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">canvas</span>: offscreen }, [offscreen]);

<span class="hljs-comment">// é€šè¿‡MessageChannelæ¥æ”¶å¸§æ•°æ®</span>
<span class="hljs-keyword">const</span> { port1, port2 } = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();
worker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">videoPort</span>: port2 }, [port2]);

port1.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-comment">// å®æ—¶æ˜¾ç¤ºå¤„ç†çŠ¶æ€</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fps-counter'</span>).<span class="hljs-property">textContent</span> = e.<span class="hljs-property">data</span>.<span class="hljs-property">fps</span>;
};

<span class="hljs-comment">// video-processor.js (Worker)</span>
<span class="hljs-keyword">let</span> fpsCounter = <span class="hljs-number">0</span>;
<span class="hljs-keyword">let</span> lastFrameTime = <span class="hljs-number">0</span>;

self.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span>.<span class="hljs-property">canvas</span>) {
    <span class="hljs-keyword">const</span> canvas = e.<span class="hljs-property">data</span>.<span class="hljs-property">canvas</span>;
    <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
    <span class="hljs-keyword">const</span> videoPort = e.<span class="hljs-property">ports</span>[<span class="hljs-number">0</span>];
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿè§†é¢‘æµ</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">drawFrame</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">const</span> now = performance.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">const</span> elapsed = now - lastFrameTime;
      
      <span class="hljs-keyword">if</span> (elapsed &gt;= <span class="hljs-number">16</span>) { <span class="hljs-comment">// ~60FPS</span>
        <span class="hljs-comment">// å¤æ‚å›¾åƒå¤„ç†ï¼ˆè¾¹ç¼˜æ£€æµ‹ï¼‰</span>
        <span class="hljs-title function_">applyEdgeDetection</span>(ctx);
        
        <span class="hljs-comment">// é€šè¿‡OffscreenCanvasç›´æ¥æ¸²æŸ“</span>
        canvas.<span class="hljs-title function_">commit</span>();
        
        <span class="hljs-comment">// è®¡ç®—FPS</span>
        fpsCounter++;
        <span class="hljs-keyword">if</span> (now - lastFrameTime &gt; <span class="hljs-number">1000</span>) {
          videoPort.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">fps</span>: fpsCounter });
          fpsCounter = <span class="hljs-number">0</span>;
          lastFrameTime = now;
        }
      }
      
      <span class="hljs-comment">// éé˜»å¡é€’å½’</span>
      <span class="hljs-built_in">setTimeout</span>(drawFrame, <span class="hljs-number">0</span>);
    };
    
    <span class="hljs-title function_">drawFrame</span>();
  }
};
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼ˆ1080pè§†é¢‘å®æ—¶å¤„ç†ï¼‰ï¼š</p>























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¸»çº¿ç¨‹å ç”¨</th><th>ç¨³å®šFPS</th><th>å†…å­˜å¢é•¿/åˆ†é’Ÿ</th></tr></thead><tbody><tr><td>ä¸»çº¿ç¨‹å¤„ç†</td><td>92%</td><td>8-12</td><td>120MB</td></tr><tr><td>Web Worker + OffscreenCanvas</td><td>18%</td><td>58-60</td><td>25MB</td></tr></tbody></table>
<blockquote>
<p><strong>OffscreenCanvasé©å‘½</strong>ï¼šåœ¨Workerä¸­ç›´æ¥æ“ä½œCanvasï¼Œé¿å…æ¯å¸§æ•°æ®ä¼ è¾“å¼€é”€ï¼Œè¿™æ˜¯å®ç°é«˜æ€§èƒ½å›¾å½¢åº”ç”¨çš„å…³é”®ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-13">ä¸ƒã€æœªæ¥æ¼”è¿›ä¸æ›¿ä»£æ–¹æ¡ˆ</h3>
<h4 data-id="heading-14">1. WebAssembly + Worker ååŒ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// worker.js</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initWasm</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> wasmModule = <span class="hljs-keyword">await</span> <span class="hljs-title class_">WebAssembly</span>.<span class="hljs-title function_">instantiateStreaming</span>(
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'image-processing.wasm'</span>),
    { 
      <span class="hljs-attr">env</span>: { 
        <span class="hljs-attr">memory</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebAssembly</span>.<span class="hljs-title class_">Memory</span>({ <span class="hljs-attr">initial</span>: <span class="hljs-number">256</span> })
      }
    }
  );
  
  <span class="hljs-keyword">return</span> wasmModule.<span class="hljs-property">instance</span>.<span class="hljs-property">exports</span>;
}

<span class="hljs-keyword">let</span> wasmExports;
<span class="hljs-title function_">initWasm</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">exports</span> =&gt;</span> wasmExports = <span class="hljs-built_in">exports</span>);

self.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-comment">// è°ƒç”¨Wasmå‡½æ•°ï¼ˆæ¯”JSå¿«5-10å€ï¼‰</span>
  <span class="hljs-keyword">const</span> result = wasmExports.<span class="hljs-title function_">processImage</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">buffer</span>);
  self.<span class="hljs-title function_">postMessage</span>(result, [result]);
};
</code></pre>
<h4 data-id="heading-15">2. æŠ€æœ¯é€‰å‹å†³ç­–æ ‘</h4>
<p><strong>æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”</strong>ï¼š</p>






























<table><thead><tr><th>æŠ€æœ¯</th><th>é€‚ç”¨åœºæ™¯</th><th>å±€é™æ€§</th></tr></thead><tbody><tr><td>Web Worker</td><td>é€šç”¨CPUå¯†é›†å‹ä»»åŠ¡</td><td>é€šä¿¡å¼€é”€ï¼Œæ— DOMè®¿é—®</td></tr><tr><td>WebAssembly</td><td>è¶…é«˜æ€§èƒ½è®¡ç®—ï¼ˆC++/Rustï¼‰</td><td>å¼€å‘å¤æ‚åº¦é«˜</td></tr><tr><td>Worklets</td><td>CSSåŠ¨ç”»/éŸ³é¢‘å¤„ç†</td><td>åŠŸèƒ½å—é™ï¼ŒAPIå®éªŒæ€§</td></tr><tr><td>Service Workers</td><td>ç½‘ç»œä»£ç†/ç¦»çº¿ç¼“å­˜</td><td>æ— æ³•å¤„ç†CPUå¯†é›†å‹ä»»åŠ¡</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-16">å…«ã€ç»“è¯­ï¼šé‡æ„å‰ç«¯æ€§èƒ½è®¤çŸ¥</h3>
<p>Web Workerä¸æ˜¯é“¶å¼¹ï¼Œè€Œæ˜¯ç°ä»£å‰ç«¯æ¶æ„çš„å…³é”®æ‹¼å›¾ã€‚åœ¨æ„å»ºå®æ—¶åä½œåº”ç”¨æ—¶ï¼Œæˆ‘ä»¬å°†å›¾åƒå·®å¼‚è®¡ç®—ç§»è‡³Workerï¼Œä½¿ä¸»çº¿ç¨‹äº¤äº’å»¶è¿Ÿä»300msé™è‡³15msï¼›åœ¨é‡‘èæ•°æ®å¹³å°ä¸­ï¼Œé€šè¿‡Workeræ± å¤„ç†10GBçº§æ—¶åºæ•°æ®ï¼Œç”¨æˆ·æ»šåŠ¨æµç•…åº¦æå‡400%ã€‚è¿™äº›å®è·µéªŒè¯äº†ï¼š<strong>çœŸæ­£çš„æµç•…ä½“éªŒï¼Œå§‹äºå¯¹å•çº¿ç¨‹è¾¹ç•Œçš„çªç ´</strong>ã€‚</p>
<p><strong>è¡ŒåŠ¨å»ºè®®</strong>ï¼š</p>
<ol>
<li>åœ¨Lighthouseæ€§èƒ½å®¡è®¡ä¸­ï¼Œå°†"é¿å…é•¿æ—¶é—´ä¸»çº¿ç¨‹ä»»åŠ¡"ä½œä¸ºç¡¬æ€§æŒ‡æ ‡</li>
<li>å¯¹ä»»ä½•è¶…è¿‡50msçš„åŒæ­¥æ“ä½œè¿›è¡ŒWorkeråŒ–æ”¹é€ </li>
<li>ä½¿ç”¨<a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">worker-timers</a>ç­‰åº“æ›¿æ¢é˜»å¡å¼å®šæ—¶å™¨</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ¦â€ğŸ”¥ è§£é”ç§»åŠ¨ç«¯H5è°ƒè¯•ï¼šEruda & VConsole å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7587965908287963146</link>    <guid>https://juejin.cn/post/7587965908287963146</guid>    <pubDate>2025-12-26T09:00:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965908287963146" data-draft-id="7587965800272379930" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¦â€ğŸ”¥ è§£é”ç§»åŠ¨ç«¯H5è°ƒè¯•ï¼šEruda &amp; VConsole å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="Debug,WebView,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T09:00:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CRAB"/> <meta itemprop="url" content="https://juejin.cn/user/2154698522760557"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¦â€ğŸ”¥ è§£é”ç§»åŠ¨ç«¯H5è°ƒè¯•ï¼šEruda &amp; VConsole å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2154698522760557/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CRAB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:00:31.000Z" title="Fri Dec 26 2025 09:00:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    28
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨PCç«¯ï¼Œæˆ‘ä»¬æœ‰Chrome DevToolsã€‚ä½†åœ¨å¾®ä¿¡å°ç¨‹åºæˆ–Appçš„WebViewä¸­å¼€å‘H5æ—¶ï¼ŒF12ç¬é—´å¤±çµï¼Œè°ƒè¯•å¦‚åŒâ€œç›²äººæ‘¸è±¡â€ã€‚æœ¬æ–‡å°†ä¸ºä½ æ·±åº¦å‰–æä¸¤å¤§ç¥å™¨â€”â€”<strong>VConsole</strong>â€‹ å’Œ <strong>Eruda</strong>ï¼ŒåŠ©ä½ è½»æ¾æ”»å…‹ç§»åŠ¨ç«¯H5è°ƒè¯•éš¾é¢˜ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ğŸ¦â€ å‰è¨€ï¼šä¸ºä½•æˆ‘ä»¬éœ€è¦å®ƒä»¬ï¼Ÿ</h2>
<ol>
<li><strong>ç¯å¢ƒå°é—­</strong>ï¼šå°ç¨‹åºçš„ <code>web-view</code>å’Œ App çš„ WebView é€šå¸¸ä¸å¼€æ”¾å®Œæ•´çš„DevToolsæƒé™ã€‚</li>
<li><strong>çœŸæœºå·®å¼‚</strong>ï¼šPCæ¨¡æ‹Ÿç¯å¢ƒä¸çœŸå®æ‰‹æœºåœ¨æ¸²æŸ“ã€æ€§èƒ½ã€APIæ”¯æŒä¸Šå­˜åœ¨é¸¿æ²Ÿã€‚</li>
<li><strong>ç½‘ç»œä¸è®¾å¤‡</strong>ï¼šéœ€è¦æŸ¥çœ‹åœ¨ç‰¹å®šç½‘ç»œï¼ˆ4G/5Gï¼‰å’Œè®¾å¤‡ä¸‹çš„è¡¨ç°ã€‚</li>
<li><strong>å¿«é€Ÿå®šä½</strong>ï¼š<code>console.log</code>å’Œç½‘ç»œè¯·æ±‚è¯¦æƒ…æ˜¯å®šä½é—®é¢˜çš„ç”Ÿå‘½çº¿ã€‚</li>
</ol>
<h2 data-id="heading-1">ğŸª¶ ä¸¤å¤§ç¥å™¨ç®€ä»‹ä¸æ ¸å¿ƒå¯¹æ¯”</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>Eruda ğŸ› ï¸</th><th>VConsole ğŸ“±</th></tr></thead><tbody><tr><td><strong>å®šä½</strong>â€‹</td><td>ä¸“ä¸šã€å…¨åŠŸèƒ½â€œä»ªè¡¨ç›˜â€</td><td>è½»é‡ã€ä¾¿æ·â€œå£è¢‹å·¥å…·â€</td></tr><tr><td><strong>å‡ºå“æ–¹</strong>â€‹</td><td>Liriliri (ç‹¬ç«‹å¼€å‘è€…)</td><td><strong>å¾®ä¿¡å›¢é˜Ÿ</strong>â€‹</td></tr><tr><td><strong>åŠŸèƒ½ä¸°å¯Œåº¦</strong>â€‹</td><td>â˜…â˜…â˜…â˜…â˜… (Console, Elements, Network, Resources, Snippets...)</td><td>â˜…â˜…â˜…â˜…â˜† (Console, Network, Element, Storage)</td></tr><tr><td><strong>æ˜“ç”¨æ€§</strong>â€‹</td><td>â˜…â˜…â˜…â˜†â˜† (éœ€ç®€å•å­¦ä¹ ï¼Œæ¨¡å—åŒ–)</td><td>â˜…â˜…â˜…â˜…â˜… (å¼€ç®±å³ç”¨ï¼Œé›¶æˆæœ¬)</td></tr><tr><td><strong>æ€§èƒ½/ä½“ç§¯</strong>â€‹</td><td>ç›¸å¯¹è¾ƒé‡ (~180KB gzipped)</td><td>éå¸¸è½»é‡ (~45KB gzipped)</td></tr><tr><td><strong>æ¨èåœºæ™¯</strong>â€‹</td><td>å¤æ‚åº”ç”¨ã€æ·±åº¦è°ƒè¯•ã€ä¸“ä¸šå¼€å‘è€…</td><td>å¿«é€Ÿè¿­ä»£ã€å¾®ä¿¡ç”Ÿæ€ã€æ–°æ‰‹ã€è½»é‡éœ€æ±‚</td></tr></tbody></table>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼šè¿½æ±‚æ·±åº¦å’Œå…¨é¢ï¼Œé€‰ Erudaï¼›è¿½æ±‚ç®€å•å’Œå¿«æ·ï¼Œå°¤å…¶åœ¨å¾®ä¿¡ç¯å¢ƒï¼Œé€‰ VConsoleã€‚</strong></p>
<hr/>
<h2 data-id="heading-2">ğŸª¾ å®æˆ˜ç¯‡ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ é›†æˆ</h2>
<h3 data-id="heading-3">ğŸš© 1. Eruda é›†æˆä¸ä½¿ç”¨</h3>
<p><strong>ç¬¬1æ­¥ï¼šå¼•å…¥è„šæœ¬ (åŠ¡å¿…æŒ‰éœ€åŠ è½½ï¼)</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ¨èï¼šé€šè¿‡URLå‚æ•° ?eruda=true æˆ–å¼€å‘ç¯å¢ƒåˆ¤æ–­æ¥åŠ è½½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/localhost|127.0.0.1|dev/i</span>.<span class="hljs-title function_">test</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hostname</span>) || <span class="hljs-regexp">/eruda=true/</span>.<span class="hljs-title function_">test</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>)) {
    <span class="hljs-keyword">var</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
    script.<span class="hljs-property">src</span> = <span class="hljs-string">'//cdn.jsdelivr.net/npm/eruda'</span>;
    script.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) { eruda.<span class="hljs-title function_">init</span>(); };
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(script);
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>ç¬¬2æ­¥ï¼šåˆå§‹åŒ–ä¸é…ç½® (å¯é€‰)</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">eruda.<span class="hljs-keyword">init</span>({
  tool: [<span class="hljs-string">'console'</span>, <span class="hljs-string">'elements'</span>, <span class="hljs-string">'network'</span>], <span class="hljs-comment">// åªå¯ç”¨éœ€è¦çš„å·¥å…·</span>
  autoScale: <span class="hljs-literal">true</span>,
});
</code></pre>
<p><strong>ç¬¬3æ­¥ï¼šæ•ˆæœä¸€è§ˆ</strong></p>
<p>ç‚¹å‡»å³ä¸‹è§’ Logo å³å¯å”¤å‡ºåŠŸèƒ½å¼ºå¤§çš„æ§åˆ¶å°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53a6d0f2195847ec94c2e3203116fcfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ1JBQg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767347810&amp;x-signature=quRZeGoz%2Fs3Km2uh8ytZi3iKSNU%3D" alt="929F667A-F134-4B5D-9C5A-387209BADB96_1_201_a.jpeg" loading="lazy"/></p>
<h3 data-id="heading-4">ğŸš© 2. VConsole é›†æˆä¸ä½¿ç”¨</h3>
<p><strong>ç¬¬1æ­¥ï¼šå¼•å…¥è„šæœ¬ (åŒæ ·æŒ‰éœ€åŠ è½½ï¼)</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ¨èï¼šé€šè¿‡ç¯å¢ƒå˜é‡æˆ–åŸŸååˆ¤æ–­æ¥åŠ è½½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/localhost|127.0.0.1|dev/i</span>.<span class="hljs-title function_">test</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hostname</span>)) {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">'&lt;script src="https://unpkg.com/vconsole/dist/vconsole.min.js"&gt;</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>');
    document.write('<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">VConsole</span>();</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>');
  }
<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>ç¬¬2æ­¥ï¼šåˆå§‹åŒ–ä¸é…ç½® (å¯é€‰)</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> vConsole = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VConsole</span>({
  <span class="hljs-attr">defaultPlugins</span>: [<span class="hljs-string">'system'</span>, <span class="hljs-string">'network'</span>, <span class="hljs-string">'element'</span>],
  <span class="hljs-attr">onReady</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'VConsole å·²å°±ç»ªï¼'</span>); }
});
</code></pre>
<p><strong>ç¬¬3æ­¥ï¼šæ•ˆæœä¸€è§ˆ</strong></p>
<p>ç‚¹å‡»å³ä¸‹è§’ç»¿è‰² â€œVâ€ å›¾æ ‡å³å¯æ‰“å¼€ç®€æ´çš„è°ƒè¯•é¢æ¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98891db9f4c5485eae5702bc07af8ea6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ1JBQg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767347810&amp;x-signature=JMC9wECUmrP%2BaltLTq%2FzWEkf8ds%3D" alt="BDDE4554-869F-49A3-AE5C-E78FF43B6E1D_1_201_a.jpeg" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-5">ğŸ›¹ æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—</h2>
<ol>
<li>
<p><strong>å®‰å…¨ç¬¬ä¸€ï¼šåˆ‡å‹¿å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒï¼</strong> ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–åŸŸå/IPç™½åå•ä¸¥æ ¼æ§åˆ¶åŠ è½½ï¼Œæ˜¯æ¯ä½å‰ç«¯å·¥ç¨‹å¸ˆçš„åŸºæœ¬ç´ å…»ã€‚</p>
</li>
<li>
<p><strong>åŠ¨æ€å¼€å¯ï¼šç»™æµ‹è¯•å’Œäº§å“åŒå­¦å¼€ä¸ªâ€œåé—¨â€</strong> ä½¿ç”¨ URL å‚æ•°ï¼ˆå¦‚ <code>?debug=true</code>ï¼‰æ§åˆ¶ï¼Œæ— éœ€é‡æ–°å‘ç‰ˆå³å¯å¼€å¯è°ƒè¯•ã€‚</p>
</li>
<li>
<p><strong>VConsole è¿›é˜¶</strong></p>
<ul>
<li><code>vConsole.showSwitch()</code>å¯ä»¥æ˜¾ç¤ºä¸€ä¸ªæ‰‹åŠ¨åˆ‡æ¢é¢æ¿çš„å¼€å…³ã€‚</li>
<li>å¯ä»¥è‡ªå®šä¹‰æ’ä»¶ï¼Œæ‰©å±•å…¶åŠŸèƒ½ã€‚</li>
</ul>
</li>
<li>
<p><strong>Eruda è¿›é˜¶</strong></p>
<ul>
<li>ä½¿ç”¨ <code>eruda.add(erudaPerformance)</code>åŠ¨æ€æ·»åŠ æ€§èƒ½ç›‘æ§æ’ä»¶ã€‚</li>
<li>é€šè¿‡ <code>eruda.settings.set()</code>åŠ¨æ€è°ƒæ•´è®¾ç½®ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-6">ğŸ¬ æ€»ç»“</h2>
<p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚å¯¹äºç§»åŠ¨ç«¯H5å¼€å‘è€…è€Œè¨€ï¼Œ<strong>VConsole</strong>â€‹ å’Œ <strong>Eruda</strong>â€‹ å°±æ˜¯é‚£æŠŠæœ€é”‹åˆ©çš„â€œå™¨â€ã€‚</p>
<ul>
<li><strong>æ—¥å¸¸å¿«é€Ÿè°ƒè¯•ã€å¾®ä¿¡H5å¼€å‘</strong>ï¼ŒVConsole æ˜¯ä½ çš„ä¸äºŒä¹‹é€‰ã€‚</li>
<li><strong>é¢å¯¹å¤æ‚Bugã€éœ€è¦è¿›è¡Œæ·±åº¦æ€§èƒ½åˆ†æ</strong>ï¼ŒEruda çš„å¼ºå¤§åŠŸèƒ½ä¼šè®©ä½ äº‹åŠåŠŸå€ã€‚</li>
</ul>
<p>å¸Œæœ›è¿™ç¯‡æŒ‡å—èƒ½å¸®åŠ©ä½ å½»åº•æ‘†è„±è°ƒè¯•å›°å¢ƒï¼Œåœ¨ç§»åŠ¨ç«¯H5çš„ä¸–ç•Œé‡Œæ¸¸åˆƒæœ‰ä½™ï¼æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ä½¿ç”¨å¿ƒå¾—å’Œé‡åˆ°çš„é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» iframe åˆ° Shadow DOMï¼šä¸€æ¬¡å…³äºã€Œéš”ç¦»ã€çš„å‰ç«¯è¾¹ç•Œæ€è€ƒ]]></title>    <link>https://juejin.cn/post/7587808953075695616</link>    <guid>https://juejin.cn/post/7587808953075695616</guid>    <pubDate>2025-12-26T09:02:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587808953075695616" data-draft-id="7587743345197006900" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» iframe åˆ° Shadow DOMï¼šä¸€æ¬¡å…³äºã€Œéš”ç¦»ã€çš„å‰ç«¯è¾¹ç•Œæ€è€ƒ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-26T09:02:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="shanLion"/> <meta itemprop="url" content="https://juejin.cn/user/2788017217477048"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» iframe åˆ° Shadow DOMï¼šä¸€æ¬¡å…³äºã€Œéš”ç¦»ã€çš„å‰ç«¯è¾¹ç•Œæ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2788017217477048/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    shanLion
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:02:38.000Z" title="Fri Dec 26 2025 09:02:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€é—®é¢˜èƒŒæ™¯ï¼šæˆ‘åˆ°åº•æƒ³è§£å†³ä»€ä¹ˆï¼Ÿ</h2>
<p>åœ¨å¤æ‚å‰ç«¯ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼š</p>
<ul>
<li>
<p>é¡µé¢éœ€è¦åµŒå…¥<strong>ç¬¬ä¸‰æ–¹å†…å®¹ / å­ç³»ç»Ÿ</strong></p>
</li>
<li>
<p>å¸Œæœ› <strong>æ ·å¼ã€è„šæœ¬äº’ä¸å½±å“</strong></p>
</li>
<li>
<p>åŒæ—¶åˆè¦ä¿è¯ï¼š</p>
<ul>
<li>æ­£å¸¸æ¸²æŸ“</li>
<li>åˆç†äº¤äº’</li>
<li>å¯æ§çš„å®‰å…¨è¾¹ç•Œ</li>
</ul>
</li>
</ul>
<p>å¸¸è§æ–¹æ¡ˆæ˜¯ <code>iframe</code>ï¼Œä½†ä¸€æ—¦æ·±å…¥ä½¿ç”¨ï¼Œå°±ä¼šç«‹åˆ»é‡åˆ°ä¸€ç³»åˆ—é—®é¢˜ï¼š</p>
<ul>
<li>Cookie æ˜¯å¦ä¼šè¢«æ³¨å…¥ï¼Ÿ</li>
<li>JS èƒ½å¦äº’ç›¸è®¿é—®ï¼Ÿ</li>
<li>æ ·å¼æ˜¯å¦ä¼šæ±¡æŸ“ï¼Ÿ</li>
<li>sandbox ä¸€åŠ ï¼Œé¡µé¢æ€ä¹ˆç›´æ¥ä¸æ˜¾ç¤ºäº†ï¼Ÿ</li>
<li>ä¸åŠ  <code>allow-same-origin</code> åˆä¸ºä»€ä¹ˆä»€ä¹ˆéƒ½â€œåäº†â€ï¼Ÿ</li>
</ul>
<p>è¿™ç¯‡æ–‡ç« ï¼Œå°±æ˜¯å›´ç»•è¿™äº›çœŸå®é—®é¢˜å±•å¼€ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€iframe çš„æœ¬è´¨ï¼šæµè§ˆå™¨çº§åˆ«çš„â€œç¡¬éš”ç¦»â€</h2>
<h3 data-id="heading-2">1ï¸âƒ£ iframe æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ä»æµè§ˆå™¨è§’åº¦çœ‹ï¼Œ<code>iframe</code> å¹¶ä¸æ˜¯ä¸€ä¸ªæ™®é€š DOMï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>ä¸€ä¸ªå®Œæ•´çš„ã€ç‹¬ç«‹çš„æµè§ˆä¸Šä¸‹æ–‡ï¼ˆBrowsing Contextï¼‰</strong></p>
</blockquote>
<p>å®ƒæ‹¥æœ‰è‡ªå·±çš„ï¼š</p>
<ul>
<li>DOM æ ‘</li>
<li>JS æ‰§è¡Œç¯å¢ƒ</li>
<li>CSS ä½œç”¨åŸŸ</li>
<li>Cookie / Storageï¼ˆæ˜¯å¦å…±äº«å–å†³äºç­–ç•¥ï¼‰</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯å®ƒâ€œéš”ç¦»æ€§å¼ºâ€çš„æ ¹æœ¬åŸå› ã€‚</p>
<hr/>
<h3 data-id="heading-3">2ï¸âƒ£ iframe å¤©ç”Ÿé€‚åˆåšä»€ä¹ˆï¼Ÿ</h3>
<ul>
<li>å¾®å‰ç«¯å­åº”ç”¨</li>
<li>ç¬¬ä¸‰æ–¹å†…å®¹åµŒå…¥</li>
<li>ä¸å¯ä¿¡é¡µé¢å±•ç¤º</li>
<li>å¼ºå®‰å…¨è¾¹ç•Œåœºæ™¯</li>
</ul>
<p><strong>å®ƒè§£å†³çš„æ˜¯â€œä¸ä¿¡ä»»â€çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯â€œä¼˜é›…â€çš„é—®é¢˜ã€‚</strong></p>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€sandboxï¼šå®‰å…¨ä»è¿™é‡Œå¼€å§‹ï¼Œä¹Ÿä»è¿™é‡Œå¤±æ§</h2>
<h3 data-id="heading-5">1ï¸âƒ£ sandbox åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Ÿ</h3>
<p>å½“ä½ ç»™ iframe åŠ ä¸Šï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">iframe</span> sandbox&gt;&lt;/<span class="hljs-selector-tag">iframe</span>&gt;
</code></pre>
<p>ä½ ç›¸å½“äºå¯¹å®ƒè¯´ï¼š</p>
<blockquote>
<p>â€œä½ ä»€ä¹ˆéƒ½ä¸èƒ½å¹²ã€‚â€</p>
</blockquote>
<p>åŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<ul>
<li>âŒ JS ä¸æ‰§è¡Œ</li>
<li>âŒ è¡¨å•æäº¤è¢«ç¦</li>
<li>âŒ åŒæºèº«ä»½è¢«å‰¥å¤º</li>
<li>âŒ Cookie / localStorage å…¨éƒ¨éš”ç¦»</li>
</ul>
<hr/>
<h3 data-id="heading-6">2ï¸âƒ£ ä¸ºä»€ä¹ˆåŠ äº† sandboxï¼Œé¡µé¢ç›´æ¥ç©ºç™½ï¼Ÿ</h3>
<p>å› ä¸ºå¾ˆå¤šé¡µé¢ï¼š</p>
<ul>
<li>ä¾èµ– JS æ¸²æŸ“</li>
<li>ä¾èµ–åŒæºè¯»å–èµ„æº</li>
<li>ä¾èµ– Cookie ç»´æŒçŠ¶æ€</li>
</ul>
<p>ä¸€æ—¦ sandbox é»˜è®¤é™åˆ¶ç”Ÿæ•ˆï¼Œé¡µé¢<strong>é€»è¾‘ä¸Šè¿˜èƒ½åŠ è½½ï¼Œä½†åŠŸèƒ½å…¨åºŸ</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-7">3ï¸âƒ£ allow-scripts + allow-same-origin ä¸ºä»€ä¹ˆå±é™©ï¼Ÿ</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">sandbox</span>=<span class="hljs-string">"allow-scripts allow-same-origin"</span>
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ª<strong>ç»å…¸é™·é˜±ç»„åˆ</strong>ã€‚</p>
<p>åŸå› æ˜¯ï¼š</p>
<ul>
<li><code>allow-scripts</code>ï¼šå…è®¸ JS æ‰§è¡Œ</li>
<li><code>allow-same-origin</code>ï¼šæ¢å¤åŒæºèº«ä»½</li>
</ul>
<p>âš ï¸ ä¸€æ—¦ä¸¤è€…åŒæ—¶å­˜åœ¨ï¼š</p>
<blockquote>
<p>iframe å†…çš„ JS <strong>å¯ä»¥è®¤ä¸ºè‡ªå·±æ˜¯â€œæ­£å¸¸é¡µé¢â€</strong></p>
</blockquote>
<p>ä»è§„èŒƒè§’åº¦ï¼Œå®ƒå·²ç»å…·å¤‡äº†<strong>é€ƒé€¸ sandbox çš„èƒ½åŠ›</strong>ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ MDN æ˜ç¡®æ ‡æ³¨çš„å®‰å…¨é£é™©ã€‚</p>
<hr/>
<h2 data-id="heading-8">å››ã€é‚£æˆ‘åªæ˜¯ä¸æƒ³ Cookie è¢«æ³¨å…¥ï¼Œæ€ä¹ˆåŠï¼Ÿ</h2>
<h3 data-id="heading-9">âŒ é”™è¯¯ç›´è§‰</h3>
<blockquote>
<p>â€œå»æ‰ allow-same-origin å°±å¥½äº†â€</p>
</blockquote>
<p>ç»“æœæ˜¯ï¼š</p>
<ul>
<li>JS å–ä¸åˆ°ä»»ä½•èµ„æº</li>
<li>é¡µé¢æ¸²æŸ“å¤±è´¥</li>
<li>iframe å†…å®¹ç›´æ¥æ¶ˆå¤±</li>
</ul>
<hr/>
<h3 data-id="heading-10">âœ… æ­£ç¡®ç†è§£</h3>
<p>Cookie æ³¨å…¥çš„æœ¬è´¨æ˜¯ï¼š</p>
<ul>
<li><strong>åŒæº + å‡­è¯ä¼ é€’</strong></li>
</ul>
<p>æ§åˆ¶ Cookie çš„æ­£ç¡®æ–¹å¼æ˜¯ï¼š</p>
<ul>
<li><code>SameSite</code></li>
<li><code>HttpOnly</code></li>
<li><code>Secure</code></li>
<li>æœåŠ¡ç«¯é‰´æƒç­–ç•¥</li>
</ul>
<p>è€Œä¸æ˜¯æŒ‡æœ› iframe sandbox å»â€œé¡ºä¾¿è§£å†³â€ã€‚</p>
<hr/>
<h2 data-id="heading-11">äº”ã€Shadow DOMï¼šå¦ä¸€ç§å®Œå…¨ä¸åŒçš„â€œéš”ç¦»â€</h2>
<h3 data-id="heading-12">1ï¸âƒ£ Shadow DOM éš”ç¦»çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>Shadow DOM éš”ç¦»çš„æ˜¯ï¼š</p>
<ul>
<li><strong>æ ·å¼ä½œç”¨åŸŸ</strong></li>
<li><strong>DOM ç»“æ„å¯è§æ€§</strong></li>
</ul>
<p>ä½†å®ƒï¼š</p>
<ul>
<li>âŒ ä¸éš”ç¦» JS</li>
<li>âŒ ä¸éš”ç¦» Cookie</li>
<li>âŒ ä¸éš”ç¦»å®‰å…¨ä¸Šä¸‹æ–‡</li>
</ul>
<p>å®ƒè§£å†³çš„æ˜¯ï¼š</p>
<blockquote>
<p><strong>ç»„ä»¶çº§çš„å¯ç»´æŠ¤æ€§é—®é¢˜</strong></p>
</blockquote>
<p>è€Œä¸æ˜¯å®‰å…¨é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-13">2ï¸âƒ£ iframe vs Shadow DOM å¯¹æ¯”</h3>








































<table><thead><tr><th>ç»´åº¦</th><th>iframe</th><th>Shadow DOM</th></tr></thead><tbody><tr><td>æ ·å¼éš”ç¦»</td><td>âœ… å¼º</td><td>âœ… ä¸­</td></tr><tr><td>JS éš”ç¦»</td><td>âœ… å¼º</td><td>âŒ</td></tr><tr><td>å®‰å…¨è¾¹ç•Œ</td><td>âœ…</td><td>âŒ</td></tr><tr><td>é€šä¿¡æˆæœ¬</td><td>é«˜</td><td>ä½</td></tr><tr><td>æ€§èƒ½</td><td>è¾ƒé‡</td><td>è½»</td></tr><tr><td>ä½¿ç”¨å¤æ‚åº¦</td><td>é«˜</td><td>ä¸­</td></tr></tbody></table>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p>iframe æ˜¯<strong>å®‰å…¨éš”ç¦»å·¥å…·</strong><br/>
Shadow DOM æ˜¯<strong>å·¥ç¨‹éš”ç¦»å·¥å…·</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºReact Native 0.83.1 æ–°æ¶æ„ä¸‹çš„æ‹†åŒ…æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7587825268201209862</link>    <guid>https://juejin.cn/post/7587825268201209862</guid>    <pubDate>2025-12-26T08:23:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587825268201209862" data-draft-id="7587785079739121670" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºReact Native 0.83.1 æ–°æ¶æ„ä¸‹çš„æ‹†åŒ…æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="React Native"/> <meta itemprop="datePublished" content="2025-12-26T08:23:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜æˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3773179634918343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºReact Native 0.83.1 æ–°æ¶æ„ä¸‹çš„æ‹†åŒ…æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3773179634918343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜æˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T08:23:22.000Z" title="Fri Dec 26 2025 08:23:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>React Native 0.83.1 æ–°æ¶æ„ï¼ˆNew Architectureï¼‰ ä¸‹çš„æ‹†åŒ…æ–¹æ¡ˆ</p>
<hr/>
<h2 data-id="heading-0">React Native 0.83.1 æ–°æ¶æ„æ‹†åŒ…å®æˆ˜ï¼šåŸºäº ReactHost ä¸å• Runtime çš„åŠ¨æ€åŠ è½½æ–¹æ¡ˆ</h2>
<p>éšç€ React Native è¿›å…¥ 0.80+ æ—¶ä»£ï¼Œæ–°æ¶æ„ï¼ˆFabric &amp; TurboModulesï¼‰å·²æˆä¸ºä¸»æµã€‚ä¼ ç»Ÿçš„åŸºäº <code>ReactInstanceManager</code> å’Œ Bridge çš„æ‹†åŒ…æ–¹å¼å·²é€æ­¥è¿‡æ—¶ã€‚æœ¬æ–‡å°†ä»‹ç»åœ¨ <strong>RN 0.83.1</strong> ç‰ˆæœ¬ä¸‹ï¼Œå¦‚ä½•åˆ©ç”¨ <code>ReactHost</code>ã€<code>JSI</code> å’Œ <code>Hermes Runtime</code> å®ç°é«˜æ€§èƒ½çš„æ¨¡å—åŒ–æ‹†åŒ…ä¸åŠ¨æ€åŠ è½½ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ ä¸ºä»€ä¹ˆæ—§çš„æ‹†åŒ…æ–¹æ¡ˆå¤±æ•ˆäº†ï¼Ÿ</h3>
<p>åœ¨æ–°æ¶æ„ä¸­ï¼Œåº•å±‚é€šä¿¡æœºåˆ¶ä»ä¼ ç»Ÿçš„ JSON Bridge è½¬å‘äº†åŸºäº C++ çš„ <strong>JSI (JavaScript Interface)</strong>ã€‚</p>



































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">Legacy æ¶æ„ (æ—§)</th><th align="left">æ–°æ¶æ„ (Fabric + TurboModules)</th></tr></thead><tbody><tr><td align="left"><strong>JS æ‰§è¡Œç¯å¢ƒ</strong></td><td align="left">Bridge + CatalystInstance</td><td align="left"><strong>JSI + Hermes Runtime</strong></td></tr><tr><td align="left"><strong>Bundle å…¥å£</strong></td><td align="left">ReactInstanceManager</td><td align="left"><strong>ReactHost / JSExecutorFactory</strong></td></tr><tr><td align="left"><strong>Native ç®¡ç†å™¨</strong></td><td align="left">ReactActivity / ReactRootView</td><td align="left"><strong>ReactHost / ReactInstance</strong></td></tr><tr><td align="left"><strong>JS æ¨¡å— API</strong></td><td align="left">å…¨å±€æ³¨å…¥æ¨¡å— (Global Bridge)</td><td align="left"><strong>TurboModule + Codegen</strong></td></tr><tr><td align="left"><strong>æ”¯æŒæƒ…å†µ</strong></td><td align="left">å·²è¿‡æ—¶ (Deprecated)</td><td align="left"><strong>å®˜æ–¹æ¨è</strong></td></tr></tbody></table>
<blockquote>
<p>[!WARNING]<br/>
ä» RN 0.72 èµ· Fabric é»˜è®¤å¯ç”¨ï¼ŒRN 0.80 ä¹‹åå·²å®Œå…¨ç§»é™¤ä¼ ç»Ÿ Bridge çš„ Fallback æœºåˆ¶ã€‚<code>JSBundleLoader</code> ç­‰æ—§ç±»åœ¨é«˜æ€§èƒ½æ–°æ¶æ„ä¸‹å·²æ— æ³•ç›´æ¥ä½¿ç”¨ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">äºŒã€ æ–¹æ¡ˆé€‰æ‹©ï¼šå¤š Runtime vs å• Runtime</h3>
<p>åœ¨ 0.83.1 ç‰ˆæœ¬ä¸‹ï¼Œå®ç°å¤šæ¨¡å—åŒ–ä¸»è¦æœ‰ä¸¤ç§æ€è·¯ï¼š</p>
<ol>
<li><strong>å¤š ReactHost å®ä¾‹åŒ–ï¼ˆéš”ç¦»æ–¹æ¡ˆï¼‰ï¼š</strong> æ¯ä¸ªä¸šåŠ¡æ¨¡å—ç‹¬ç«‹æ‰“åŒ…ï¼ŒåŒ…å«ç‹¬ç«‹çš„åŸºç¡€åº“ã€‚ä¼˜ç‚¹æ˜¯éš”ç¦»æ€§å¼ºï¼Œç¼ºç‚¹æ˜¯å†…å­˜å ç”¨æé«˜ï¼Œæ— æ³•å…±äº«åŸºç¡€åº“ã€‚</li>
<li><strong>å• Hermes Runtime åŠ¨æ€åŠ è½½ï¼ˆæ¨èæ–¹æ¡ˆï¼‰ï¼š</strong>
<ul>
<li><strong>åŸºç¡€åŒ… (Base Bundle)ï¼š</strong> åŒ…å« RN æ¡†æ¶ã€NativeModulesã€å…¬å…±åº“åŠå¯¼èˆªå®¹å™¨ã€‚</li>
<li><strong>ä¸šåŠ¡åŒ… (Business Bundle)ï¼š</strong> ä»…åŒ…å«ä¸šåŠ¡ä»£ç ï¼Œå…±ç”¨åŸºç¡€åŒ…çš„è¿è¡Œæ—¶ã€‚</li>
<li><strong>ä¼˜åŠ¿ï¼š</strong> å†…å­˜å ç”¨ä½ã€å…±ç”¨ä¸Šä¸‹æ–‡ã€ç¬¦åˆ Fabric æ¸²æŸ“é“¾è·¯ã€‚</li>
</ul>
</li>
</ol>
<p><strong>æœ¬æ–‡é‡‡ç”¨æ–¹æ¡ˆ 2 è¿›è¡Œæ·±åº¦å®è·µã€‚</strong></p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€ æ ¸å¿ƒåŸç†</h3>
<ol>
<li><strong>æŒ‰éœ€åŠ è½½ï¼š</strong> å¯åŠ¨é˜¶æ®µåªåŠ è½½ <code>index.base.bundle</code>ã€‚</li>
<li><strong>åŠ¨æ€æ³¨å†Œï¼š</strong> ä¸šåŠ¡ Bundle è¢«åŠ è½½æ—¶ï¼Œé€šè¿‡ JSI è°ƒç”¨åº•å±‚ C++ Runtime çš„ <code>evaluateJavaScript</code> æ‰§è¡Œ JS ä»£ç ï¼Œå°†ä¸šåŠ¡é¡µé¢æ³¨å†Œåˆ°åŸºç¡€åŒ…çš„å¯¼èˆªå™¨ï¼ˆå¦‚ React Navigationï¼‰ä¸­ã€‚</li>
<li><strong>è·¯ç”±å ä½ï¼š</strong> åŸºç¡€åŒ…é¢„ç•™â€œå£³é¡µé¢â€ï¼ˆBizShellï¼‰ï¼Œå½“å¯¼èˆªè·³è½¬è‡³ä¸šåŠ¡æ¨¡å—æ—¶ï¼Œè‹¥ Bundle æœªåŠ è½½åˆ™è§¦å‘ Native åŠ¨æ€åŠ è½½æµç¨‹ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-4">å››ã€ å…·ä½“å®ç°æ­¥éª¤</h3>
<h4 data-id="heading-5">1. React Native å±‚å®ç°</h4>
<h5 data-id="heading-6">1.1 å…¥å£æ–‡ä»¶æ‹†åˆ†</h5>
<ul>
<li>
<p><strong>index.base.js (åŸºç¡€åŒ…)ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppRegistry</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./src/App'</span>;
<span class="hljs-keyword">import</span> { name <span class="hljs-keyword">as</span> appName } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.json'</span>;

<span class="hljs-title class_">AppRegistry</span>.<span class="hljs-title function_">registerComponent</span>(appName, <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">App</span>);
</code></pre>
</li>
<li>
<p><strong>index.buz1.js (ä¸šåŠ¡åŒ…)ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { registerBiz } <span class="hljs-keyword">from</span> <span class="hljs-string">'./src/navigation/DynamicRegistry'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Buz1Navigator</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./src/biz1/Navigator'</span>;

<span class="hljs-comment">// åŠ¨æ€æ³¨å†Œä¸šåŠ¡è·¯ç”±</span>
<span class="hljs-title function_">registerBiz</span>(<span class="hljs-string">'buz1'</span>, <span class="hljs-title class_">Buz1Navigator</span>);
</code></pre>
</li>
</ul>
<h5 data-id="heading-7">1.2 è·¯ç”±å ä½é€»è¾‘</h5>
<p>åœ¨ <code>src/navigation/DynamicNavigator.tsx</code> ä¸­ï¼Œä½¿ç”¨ <code>BizShell</code> ä½œä¸ºä¸šåŠ¡å ä½ç¬¦ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">Stack</span>.<span class="hljs-property">Navigator</span> initialRouteName={props.<span class="hljs-property">biz</span> || <span class="hljs-string">'NotFound'</span>}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Stack.Screen</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"NotFound"</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{NotFound}</span> /&gt;</span></span>
  
  {<span class="hljs-comment">/* ä¸šåŠ¡å ä½ï¼šæœ‰å¤šå°‘ä¸ªæ‹†åˆ†åŒ…ï¼Œå°±é…ç½®å¤šå°‘ä¸ª Screen */</span>}
  &lt;<span class="hljs-title class_">Stack</span>.<span class="hljs-property">Screen</span> 
    key={<span class="hljs-string">'buz1'</span>} 
    name={<span class="hljs-string">'buz1'</span>} 
    component={<span class="hljs-title class_">BizShell</span>} 
    options={{ <span class="hljs-attr">headerShown</span>: <span class="hljs-literal">false</span> }} 
  /&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Stack.Screen</span> 
    <span class="hljs-attr">key</span>=<span class="hljs-string">{</span>'<span class="hljs-attr">buz2</span>'} 
    <span class="hljs-attr">name</span>=<span class="hljs-string">{</span>'<span class="hljs-attr">buz2</span>'} 
    <span class="hljs-attr">component</span>=<span class="hljs-string">{BizShell}</span> 
    <span class="hljs-attr">options</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">headerShown:</span> <span class="hljs-attr">false</span> }} 
  /&gt;</span></span>
&lt;/<span class="hljs-title class_">Stack</span>.<span class="hljs-property">Navigator</span>&gt;
</code></pre>
<blockquote>
<p><strong>æç¤ºï¼š</strong> æ ¸å¿ƒè·¯ç”±è·³è½¬ä¸ Bundle åŠ è½½çŠ¶æ€ç»´æŠ¤å‡åœ¨ <code>BizShell.tsx</code> ä¸­å¤„ç†ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-8">2. Android ç«¯æ ¸å¿ƒä»£ç </h4>
<h5 data-id="heading-9">2.1 åˆå§‹åŒ– ReactHost</h5>
<p>åœ¨ <code>MainApplication</code> ä¸­æ‰‹åŠ¨å¯åŠ¨ <code>ReactHost</code> å¹¶ç›‘å¬åˆå§‹åŒ–çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initializeReactHost</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> host = reactHost
    host.start() <span class="hljs-comment">// å¯åŠ¨æ–°æ¶æ„ Host</span>

    host.addReactInstanceEventListener(<span class="hljs-keyword">object</span> : ReactInstanceEventListener {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onReactContextInitialized</span><span class="hljs-params">(reactContext: <span class="hljs-type">ReactContext</span>)</span></span> {
            <span class="hljs-comment">// å°† Context ä¼ ç»™åŠ¨æ€åŠ è½½å™¨</span>
            DynamicLoader.setContext(reactContext)
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰§è¡Œ JSI ç»‘å®šæˆ–å…¶ä»–åˆå§‹åŒ–</span>
                DynamicLoader.install()
                SplashActivity.instance?.hideLoading()
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                Log.e(<span class="hljs-string">"MainApplication"</span>, <span class="hljs-string">"DynamicLoader å¤±è´¥ï¼š<span class="hljs-subst">${e.message}</span>"</span>)
            }
            host.removeReactInstanceEventListener(<span class="hljs-keyword">this</span>)
        }
    })
}
</code></pre>
<h5 data-id="heading-10">2.2 åŠ¨æ€åŠ è½½ Bundle (NativeDynamicLoader.kt)</h5>
<p>é€šè¿‡ JNI è·å– C++ Runtime å¥æŸ„å¹¶æ‰§è¡Œ JavaScriptã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadBundle</span><span class="hljs-params">(bundlePath: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-keyword">val</span> jsiPtr = context.javaScriptContextHolder.<span class="hljs-keyword">get</span>()
    <span class="hljs-comment">// é€šè¿‡ JNI è°ƒç”¨ C++ å±‚çš„ evaluateJavaScript</span>
    <span class="hljs-comment">// é€»è¾‘ï¼šåˆ¤æ–­ bundlePath æ˜¯å¦å·²åŠ è½½ -&gt; æœªåŠ è½½åˆ™è¯»å–æ–‡ä»¶å¹¶æ‰§è¡Œ</span>
    nativeEvaluateJavaScript(jsiPtr, bundlePath)
}
</code></pre>
<hr/>
<h4 data-id="heading-11">3. iOS ç«¯æ ¸å¿ƒä»£ç </h4>
<h5 data-id="heading-12">3.1 æŠ½è±¡ RNRuntimeManager</h5>
<p>åœ¨ Swift ä¸­ç®¡ç† <code>reactNativeFactory</code> å’Œ <code>reactNativeDelegate</code>ï¼Œé€šè¿‡ <code>rootViewFactory</code> åˆ›å»ºè§†å›¾ã€‚</p>
<h5 data-id="heading-13">3.2 åŠ¨æ€åŠ è½½ (RTNDynamicLoader)</h5>
<p>åœ¨æ–°æ¶æ„ä¸‹ï¼Œä¸å†ä½¿ç”¨è¿‡æ—¶çš„ <code>bridge.executeSourceCode</code>ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// JSBundleLoader.swift æ ¸å¿ƒé€»è¾‘</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> runtimeExecutor <span class="hljs-operator">=</span> rootViewFactory.reactHost.surfacePresenter<span class="hljs-operator">?</span>.runtimeExecutor {
    <span class="hljs-comment">// æ‹¿åˆ° RuntimeExecutor åï¼Œåœ¨ JS çº¿ç¨‹æ‰§è¡Œä¸šåŠ¡ä»£ç </span>
    runtimeExecutor.execute { runtime <span class="hljs-keyword">in</span>
        <span class="hljs-comment">// ä½¿ç”¨ C++ JSI æˆ–å†…éƒ¨ API æ‰§è¡Œä¸šåŠ¡ Bundle ä»£ç </span>
        loadBusinessBundle(path: bundlePath, in: runtime)
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-14">äº”ã€ æ€»ç»“ä¸ä¼˜åŠ¿</h3>
<p>åŸºäº RN 0.83.1 çš„è¿™å¥—æ‹†åŒ…æ–¹æ¡ˆï¼Œå®Œå…¨æ‘†è„±äº†å¯¹ Legacy Bridge çš„ä¾èµ–ï¼š</p>
<ol>
<li><strong>æé€ŸåŠ è½½ï¼š</strong> åˆ©ç”¨ Hermes å­—èŠ‚ç é¢„ç¼–è¯‘ï¼Œä¸šåŠ¡åŒ…åŠ è½½è¿‘ä¹æ— æ„Ÿã€‚</li>
<li><strong>çµæ´»åˆ†å‘ï¼š</strong> ä¸šåŠ¡ Bundle å¯ç‹¬ç«‹æ›´æ–°ï¼Œæ— éœ€é‡æ–°å®‰è£… Appã€‚</li>
<li><strong>æ¶æ„å¯¹é½ï¼š</strong> æ·±åº¦é›†æˆ <code>ReactHost</code> å’Œ <code>RuntimeExecutor</code>ï¼Œå®Œç¾å…¼å®¹ Fabric æ¸²æŸ“å¼•æ“ï¼Œæ˜¯ç›®å‰æ–°æ¶æ„ä¸‹çš„æœ€ä¼˜å®è·µã€‚</li>
</ol>
<hr/>
<p><strong>å‘å¸ƒå»ºè®®ï¼š</strong></p>
<ul>
<li><strong>æ ‡ç­¾ï¼š</strong> React Native, Android, iOS, æ‹†åŒ…, æ–°æ¶æ„, Hermes.</li>
<li><strong>æ‘˜è¦ï¼š</strong> é’ˆå¯¹ React Native 0.83.1 æœ€æ–°ç‰ˆæœ¬ï¼Œè¯¦ç»†è®²è§£å¦‚ä½•åœ¨ Fabric æ¶æ„ä¸‹å®ç°å• Runtime çš„ä¸šåŠ¡æ‹†åŒ…ä¸åŠ¨æ€åŠ è½½ã€‚</li>
</ul>
<p>é¡¹ç›®gitåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fliu_520%2Fmulti-bundle-programs" target="_blank" title="https://gitee.com/liu_520/multi-bundle-programs" ref="nofollow noopener noreferrer">gitee.com/liu_520/mulâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24a4e69136164d47b348141a3ef51a6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YiY5oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767342202&amp;x-signature=L666HMQh1V%2FpMEy0ImdMUxqpack%3D" alt="SVID_20251226_160340_1.gif" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«æ•°æ®åº“â€œè†¨èƒ€â€ï¼šDify x SLS æ„å»ºé«˜å¯ç”¨ç”Ÿäº§çº§ AI æ¶æ„]]></title>    <link>https://juejin.cn/post/7587961565477060662</link>    <guid>https://juejin.cn/post/7587961565477060662</guid>    <pubDate>2025-12-26T09:04:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587961565477060662" data-draft-id="7587825268200112134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«æ•°æ®åº“â€œè†¨èƒ€â€ï¼šDify x SLS æ„å»ºé«˜å¯ç”¨ç”Ÿäº§çº§ AI æ¶æ„"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-12-26T09:04:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«æ•°æ®åº“â€œè†¨èƒ€â€ï¼šDify x SLS æ„å»ºé«˜å¯ç”¨ç”Ÿäº§çº§ AI æ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:04:57.000Z" title="Fri Dec 26 2025 09:04:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ— å“²ã€è¨€åˆ</p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€ï¼šDify çš„è§„æ¨¡åŒ–æŒ‘æˆ˜</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e4b96578c324f8eb575aa3e339537b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=7esT50KRWjTd1U1Li%2FrZwedPkkw%3D" alt="image.png" loading="lazy"/></p>
<p>Dify æ˜¯å½“å‰æœ€å—æ¬¢è¿çš„ä½ä»£ç  LLM åº”ç”¨å¼€å‘å¹³å°ä¹‹ä¸€ï¼Œåœ¨ Github ä¸Šå·²æ–©è· 120k+ çš„æ˜Ÿæ ‡æ•°ã€‚å›½å†…å¤–æœ‰ä¼—å¤šä¼ä¸šåŸºäº Dify æ„å»ºè‡ªå·±çš„æ™ºèƒ½ä½“åº”ç”¨ã€‚é˜¿é‡Œäº‘å¯è§‚æµ‹å›¢é˜Ÿæ—¢æ˜¯ Dify çš„æ·±åº¦ç”¨æˆ·ï¼Œä¹Ÿæ˜¯ç¤¾åŒºçš„æ´»è·ƒè´¡çŒ®è€…ã€‚</p>
<p>åœ¨å¤§è§„æ¨¡ç”Ÿäº§å®è·µä¸­ï¼Œæˆ‘ä»¬å‘ç° Dify åœ¨é«˜è´Ÿè½½åœºæ™¯ä¸‹é¢ä¸´æ˜¾è‘—çš„æ•°æ®åº“æ€§èƒ½ç“¶é¢ˆï¼šå…¶æ‰§è¡Œå¼•æ“é«˜åº¦ä¾èµ– PostgreSQLï¼Œå•æ¬¡ Chat è¯·æ±‚å¯èƒ½è§¦å‘æ•°ç™¾ç”šè‡³ä¸Šåƒæ¬¡æ•°æ®åº“è®¿é—®ï¼›ä¸æ­¤åŒæ—¶ï¼ŒWorker è¿›ç¨‹åœ¨çŸ¥è¯†åº“ç´¢å¼•æ„å»ºã€Trace è¿½è¸ªç­‰ä»»åŠ¡ä¸­ä¹Ÿä¼šæŒç»­å†™å…¥å¤§é‡æ•°æ®ã€‚è¿™é¢‘ç¹å¯¼è‡´Â <strong>DB è¿æ¥æ± æ‰“æ»¡ã€æ…¢æŸ¥è¯¢é¢‘å‘</strong>Â ç­‰é—®é¢˜ï¼Œå·²æˆä¸ºåˆ¶çº¦ Dify é›†ç¾¤æ¨ªå‘æ‰©å±•ä¸å¹¶å‘èƒ½åŠ›çš„å…³é”®ç“¶é¢ˆã€‚</p>
<h2 data-id="heading-1">äºŒã€ç°çŠ¶ä¸æŒ‘æˆ˜ï¼šDify å­˜å‚¨æœºåˆ¶ç—›ç‚¹åˆ†æ</h2>
<h3 data-id="heading-2">æ•°æ®åˆ†å¸ƒç°çŠ¶</h3>
<p>Dify çš„æ•°æ®ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ul>
<li>Metaç±» æ•°æ®ï¼šç§Ÿæˆ·ã€åº”ç”¨ã€å·¥ä½œæµã€å·¥å…·ç­‰é…ç½®ä¿¡æ¯ï¼›</li>
<li>è¿è¡Œæ—¶æ—¥å¿—ï¼šå·¥ä½œæµæ‰§è¡Œæ˜ç»†ã€ä¼šè¯å†å²ã€æ¶ˆæ¯è®°å½•ç­‰ï¼›</li>
<li>æ–‡ä»¶ç±»æ•°æ®ï¼šç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ã€çŸ¥è¯†åº“æ–‡æ¡£ã€å¤šæ¨¡æ€è¾“å‡ºç­‰ï¼ˆé€šå¸¸å­˜äºå¯¹è±¡å­˜å‚¨ï¼‰ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb0cebf88890443fb5ef43fed477af9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=mu7eRrlsWT0j5mRMUmkGPBTi5rA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶ä¸­Meta ä¸è¿è¡Œæ—¥å¿—å‡å­˜å‚¨åœ¨ PostgreSQL ä¸­ï¼Œè¿è¡Œæ—¶æ—¥å¿—å æ®äº†æ•°æ®åº“çš„ç»å¤§éƒ¨åˆ†èµ„æºã€‚ä»¥æˆ‘ä»¬çš„ç”Ÿäº§ç¯å¢ƒä¸ºä¾‹ï¼Œè¿è¡Œæ—¥å¿—å  DB å­˜å‚¨ç©ºé—´çš„Â 95%ä»¥ä¸Šã€‚åœ¨è®¿é—®é¢‘ç‡æœ€é«˜å’Œæ…¢æŸ¥è¯¢æœ€å¤šçš„ SQL æ¨¡å¼ä¸­ï¼Œç»å¤§å¤šæ•°éƒ½ä¸è¿è¡Œæ—¥å¿—çš„è¯»å†™ç›¸å…³ã€‚</p>
<p>Dify çš„è¿è¡Œæ—¥å¿—åŒ…å«å·¥ä½œæµçš„æ‰§è¡Œæ˜ç»†è®°å½•å’Œä¼šè¯æ¶ˆæ¯æ•°æ®ï¼Œæ‰§è¡Œè®°å½•ä¸­æœ‰å·¥å…·è¾“å‡ºã€æ¨¡å‹ä¸Šä¸‹æ–‡ç­‰å¤§é‡é•¿æ–‡æœ¬ä¿¡æ¯ï¼Œå¹¶ä¸”è¿è¡Œæ—¥å¿—æ•°é‡ä¹Ÿä¼šéšç€ç”¨æˆ·è¯·æ±‚å¿«é€Ÿå¢é•¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b166d94d3d384e4c9c9080eb2c5a9c2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=jBNWY8hOhvSbzd04lV8HEOsR%2BSY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-3">æ ¸å¿ƒç—›ç‚¹</h3>
<p>å°†è¿™ç±»æµ·é‡ã€é«˜ååçš„æ—¥å¿—æ•°æ®å…¨é‡å­˜å‚¨åœ¨ PostgreSQL ä¸­ï¼Œå¸¦æ¥äº†å¤šé‡æŒ‘æˆ˜ï¼š</p>
<ul>
<li><strong>è´Ÿè½½å‹åŠ›å¤§ï¼š</strong> Workflow èŠ‚ç‚¹çš„æ¯æ¬¡æ‰§è¡Œéƒ½ä¼šäº§ç”Ÿæ˜ç»†æ—¥å¿—ï¼ˆèŠ‚ç‚¹æ‰§è¡Œæ˜ç»†æ•°æ®ï¼Œè®°å½•èŠ‚ç‚¹çš„è¾“å…¥è¾“å‡ºå’Œè¿è¡ŒçŠ¶æ€ç­‰æ•°æ®ï¼‰ï¼Œé«˜å¹¶å‘ä¸‹Â <code>workflow_node_executions</code>Â è¡¨çš„è¯»å†™ææ˜“æˆä¸ºçƒ­ç‚¹ã€‚</li>
<li><strong>è¿æ¥å ç”¨ï¼š</strong> å°½ç®¡ Dify 1.xÂ çš„å‡ ä¸ªç‰ˆæœ¬å¯¹æ•°æ®åº“é•¿è¿æ¥é—®é¢˜åšäº†å¾ˆå¤šä¼˜åŒ–ï¼ˆå¦‚Â issueÂ #22307[1]ï¼‰ï¼Œä½†æ—¥å¿—å¯†é›†è®¿é—®ä»åŠ å‰§è¿æ¥æ± å‹åŠ›ï¼Œå½±å“æ ¸å¿ƒä¸šåŠ¡çš„è¿æ¥è·å–ã€‚</li>
<li><strong>æ‰©å±•æ€§ä¸è¶³ï¼š</strong> è¿è¡Œæ—¥å¿—éšç€ä¸šåŠ¡é‡å‘ˆçˆ†å‘å¼å¢é•¿ï¼Œè€Œ PG æ‰©å®¹ä¾èµ–å‚ç›´å‡é…ï¼Œå‡çº§è§„æ ¼å¾€å¾€ä¼´éšä¸»å¤‡åˆ‡æ¢å¯¼è‡´çš„è¿æ¥é—ªæ–­æˆ–ç»´æŠ¤çª—å£ï¼Œéš¾ä»¥å®ç°å®Œå…¨çš„æ— æ„Ÿæ‰©å®¹ã€‚ç¤¾åŒºå·²æœ‰å¤šä¸ªåé¦ˆï¼ˆå¦‚Â Â issueÂ #18800Â [2]å› ä¼šè¯æ•°æ®å †ç§¯å¯¼è‡´é¦– Token å»¶è¿Ÿå¢åŠ  3 ç§’ï¼›Â issueÂ #22796Â [3]å‘¼åå°†æ—¥å¿—è¿å‡º PGï¼‰</li>
<li><strong>åˆ†æåŠ å·¥èƒ½åŠ›ç¼ºå¤±ï¼š</strong> æ§åˆ¶å°ä»…æ”¯æŒæœ‰é™å…³é”®è¯æ£€ç´¢ï¼Œéš¾ä»¥æ»¡è¶³ä¸šåŠ¡å¯¹å†å²ä¼šè¯è¿›è¡Œå¤šç»´åˆ†æã€äºŒæ¬¡åŠ å·¥åŠç²¾ç»†åŒ–è¿è¥çš„éœ€æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-4">ç¤¾åŒºçš„ç§¯ææ¢ç´¢ä¸æ¼”è¿›</h3>
<p>è¿è¡Œæ—¥å¿—å­˜å‚¨ä¸€ç›´æ˜¯å½±å“ Dify ç³»ç»Ÿæ€§èƒ½ä¸ç¨³å®šæ€§çš„ç—›ç‚¹ã€‚é’ˆå¯¹è¿™ä¸€é—®é¢˜ï¼Œç¤¾åŒºä¸€ç›´åœ¨ç§¯æå¯»æ±‚è§£å†³æ–¹æ¡ˆï¼Œå¹¶å·²è½åœ°äº†å¤šé¡¹ä¼˜åŒ–æªæ–½ï¼š</p>
<ul>
<li><strong>å†…å­˜æ•°æ®åº“</strong>ï¼ˆissueÂ #20147[4]ï¼‰ï¼šé€‚ç”¨äºæ— éœ€æŒä¹…åŒ–çš„è½»é‡åœºæ™¯ï¼ŒåŒæ—¶æ–°ç‰ˆæ‰§è¡Œå¼•æ“å·²å®Œæˆæ—¥å¿—å­˜å‚¨æŠ½è±¡ï¼Œä¸ºåç»­å¼‚æ„å­˜å‚¨æ”¹é€ å¥ å®šäº†åŸºç¡€ã€‚</li>
<li><strong>åå°å¼‚æ­¥æ‰§è¡Œ</strong>ï¼ˆ issueÂ #20050[5]ï¼‰ï¼šé€šè¿‡ Celery Worker å¼‚æ­¥å†™å…¥æ—¥å¿—ï¼Œæœ‰æ•ˆé™ä½äº†æ ¸å¿ƒé“¾è·¯çš„å»¶è¿Ÿï¼Œå‡è½»äº† API å¼•æ“å¯¹ DB çš„åŒæ­¥ä¾èµ–ã€‚</li>
<li><strong>å‘¨æœŸæ€§æ¸…ç†</strong>ï¼ˆ issueÂ #23399[6]ï¼‰ï¼šå¼•å…¥è‡ªåŠ¨æ¸…ç†æœºåˆ¶ï¼Œå®šæœŸç§»é™¤é™ˆæ—§çš„ä¼šè¯ä¸æ‰§è¡Œè®°å½•ï¼Œæœ‰æ•ˆç¼“è§£äº†æ•°æ®åº“å­˜å‚¨è†¨èƒ€é—®é¢˜ã€‚</li>
<li><strong>å¤§å­—æ®µåˆ†ç¦»å­˜å‚¨ï¼š</strong> é’ˆå¯¹ LLM é•¿ä¸Šä¸‹æ–‡å¯¼è‡´çš„å¤§å­—æ®µé—®é¢˜ï¼Œæ”¯æŒå°†è¶…é•¿å­—æ®µæˆªæ–­å¹¶è½¬å­˜è‡³å¯¹è±¡å­˜å‚¨ï¼Œå‡è½»äº† DB çš„ I/O å‹åŠ›ã€‚</li>
</ul>
<h3 data-id="heading-5">æ ¹å› åˆ†æï¼šæ•°æ®ç‰¹å¾ä¸å­˜å‚¨å¼•æ“çš„é”™é…</h3>
<p>ä¸Šè¿°ä¼˜åŒ–åœ¨ç‰¹å®šé˜¶æ®µéå¸¸æœ‰æ•ˆï¼Œç¼“è§£äº† Dify çš„ç‡ƒçœ‰ä¹‹æ€¥ï¼Œä½†åœ¨å¤§è§„æ¨¡ç”Ÿäº§åœºæ™¯ä¸‹ï¼Œåº”ç”¨å±‚çš„é€»è¾‘ä¼˜åŒ–ï¼ˆå¼‚æ­¥ã€æ¸…ç†ç­‰ï¼‰å·²è§¦åŠå¤©èŠ±æ¿ã€‚è¦å½»åº•è§£å†³æ‰©å±•æ€§é—®é¢˜ï¼Œå¿…é¡»æ¶ˆé™¤æ•°æ®ç‰¹å¾ä¸å­˜å‚¨å¼•æ“çš„é”™é…â€”â€”å³æˆ‘ä»¬ä¸€ç›´åœ¨è¯•å›¾ç”¨â€œå…³ç³»å‹æ•°æ®åº“â€å»æ‰¿è½½æœ¬è¯¥ç”±â€œæ—¥å¿—ç³»ç»Ÿâ€å¤„ç†çš„æ•°æ®ã€‚</p>
<p>Dify å·¥ä½œæµè®°å½•è™½ç„¶å¹¶éå®Œå…¨æ˜¯Append-Onlyå†™ï¼Œä½†å…·æœ‰é²œæ˜çš„æ—¥å¿—ç‰¹å¾ï¼Œä¸å…¸å‹çš„ä¸šåŠ¡æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ã€åº”ç”¨é…ç½®ï¼‰æˆªç„¶ä¸åŒï¼š</p>
<ul>
<li><strong>ç»ˆæ€ä¸å¯å˜ï¼š</strong> è®°å½•ä»…åœ¨æ‰§è¡ŒæœŸçŸ­æš‚æµè½¬ï¼Œç»“æŸåå³æˆä¸ºâ€œåªè¯»â€æ¡£æ¡ˆã€‚åœ¨ PG ä¸­é•¿æœŸç•™å­˜æµ·é‡åªè¯»æ•°æ®ï¼Œä¸ä»…æŒ¤å æ˜‚è´µçš„ SSD èµ„æºï¼Œåºå¤§çš„è¡¨æ•°æ®æ›´ä¼šæ˜¾è‘—é™ä½ç´¢å¼•æ•ˆç‡ä¸æŸ¥è¯¢æ€§èƒ½ã€‚</li>
<li><strong>æ³›ç»“æ„åŒ–ä¸ Schema æ˜“å˜ï¼š</strong> æ ¸å¿ƒè´Ÿè½½ä¸ºå·¨å¤§çš„ JSON å¯¹è±¡ï¼ˆæ¯ä¸ªå·¥ä½œæµèŠ‚ç‚¹çš„Inputs/Outputsï¼‰ï¼Œä¸”ç»“æ„éšç‰ˆæœ¬è¿­ä»£ã€‚PG éš¾ä»¥é«˜æ•ˆå¤„ç†æ·±å±‚ JSON æ£€ç´¢ï¼Œä¸”äº¿çº§å¤§è¡¨çš„ DDL å˜æ›´ä¼šå¼•å‘é•¿æ—¶é—´é”è¡¨é£é™©ã€‚</li>
<li><strong>é«˜ååæ—¶åºå†™å…¥ï¼š</strong> æ—¥å¿—éšæ—¶é—´æºæºä¸æ–­åœ°äº§ç”Ÿï¼ŒæŒç»­æ¶ˆè€— IOPS ä¸æ•°æ®åº“è¿æ¥ã€‚è¯·æ±‚é«˜å³°æœŸææ˜“å¯¼è‡´è¿æ¥æ± è€—å°½ï¼Œå¯¼è‡´åˆ›å»ºåº”ç”¨ç­‰æ ¸å¿ƒä¸šåŠ¡å› èµ„æºäº‰æŠ¢è€Œå¤±è´¥ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ”¯æŒ<strong>å­˜ç®—åˆ†ç¦»ã€å¼¹æ€§ä¼¸ç¼©ã€ä½æˆæœ¬ä¸”å…·å¤‡åŸç”Ÿ OLAP èƒ½åŠ›</strong>çš„å­˜å‚¨æ¶æ„ã€‚é˜¿é‡Œäº‘æ—¥å¿—æœåŠ¡ï¼ˆSLSï¼‰ å‡­å€Ÿå…¶äº‘åŸç”Ÿç‰¹æ€§ï¼Œæˆä¸ºè§£å†³è¿™ä¸€ç“¶é¢ˆçš„æœ€ä½³é€‰æ‹©ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€æ–¹æ¡ˆé€‰å‹ï¼šä¸ºä»€ä¹ˆ SLS æ›´é€‚åˆ Dify æ—¥å¿—åœºæ™¯</h2>
<p>SLS å¹¶ä¸æ˜¯â€œå¦ä¸€ä¸ªæ•°æ®åº“æ›¿ä»£â€ï¼Œå®ƒæ˜¯ä¸ºæ—¥å¿—åœºæ™¯é‡èº«å®šåˆ¶çš„åŸºç¡€è®¾æ–½ã€‚åœ¨Difyå·¥ä½œæµæ—¥å¿—åœºæ™¯ä¸‹ï¼Œç›¸æ¯”äº PGï¼ŒSLS åœ¨ä»¥ä¸‹å››ä¸ªç»´åº¦å®ç°äº†æ¶æ„ä¸Šçš„ä¼˜åŒ–å‡çº§ï¼š</p>
<h3 data-id="heading-7">æè‡´å¼¹æ€§ï¼Œåº”å¯¹æµé‡æ³¢åŠ¨</h3>
<p>Dify ä¸šåŠ¡å¸¸æœ‰çªå‘æµé‡ï¼ˆå¦‚ AI æ¨ç†é«˜å³°ï¼‰ã€‚PostgreSQL éœ€æŒ‰å³°å€¼é¢„ç½®ç¡¬ä»¶èµ„æºï¼Œä½è°·æœŸçš„èµ„æºæµªè´¹ï¼Œä¸€æ—¦æµé‡çªå¢è¶…è¿‡é¢„è®¾ä¸Šé™ï¼Œæ•°æ®åº“ç¨³å®šæ€§ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>è€ŒSLS ä½œä¸º SaaS åŒ–äº‘æœåŠ¡ï¼Œå¤©ç„¶æ”¯æŒç§’çº§å¼¹æ€§ä¼¸ç¼©ï¼Œæ— é¡»å…³å¿ƒåˆ†ç‰‡æˆ–å®¹é‡ä¸Šé™ï¼Œä¸”é»˜è®¤æ”¯æŒ 3AZ åŒåŸå†—ä½™ã€‚</p>
<h3 data-id="heading-8">é«˜å†™å…¥åå + æ¶æ„è§£è€¦ï¼Œä¿éšœæ ¸å¿ƒç¨³å®š</h3>
<ul>
<li><strong>é«˜å¹¶å‘å†™å…¥ï¼š</strong> SLS é’ˆå¯¹æ—¥å¿—åœºæ™¯ä¼˜åŒ–ï¼Œæ•°æ®ä»¥è¿½åŠ æ–¹å¼é¡ºåºå†™å…¥ï¼Œé¿å…äº†æ•°æ®åº“ä¸­å¸¸è§çš„éšæœº I/O å’Œé”ç«äº‰ï¼Œèƒ½ä»¥æä½æˆæœ¬æ”¯æ’‘æ•°ä¸‡ TPS çš„å†™å…¥ååï¼Œè½»æ¾åº”å¯¹ AI ä¸šåŠ¡çš„å†™å…¥æ´ªå³°ã€‚</li>
<li><strong>èµ„æºéš”ç¦»ï¼š</strong> å°†æ—¥å¿—è´Ÿè½½å‰¥ç¦»è‡³ SLS äº‘ç«¯ï¼Œå®ç°æ—¥å¿—æ•°æ®æµä¸ Dify æ ¸å¿ƒä¸šåŠ¡äº‹åŠ¡çš„ç‰©ç†éš”ç¦»ï¼Œæœ‰æ•ˆä¿éšœä¸»ä¸šåŠ¡ç³»ç»Ÿçš„ç¨³å®šæ€§ä¸æ€§èƒ½ã€‚</li>
</ul>
<h3 data-id="heading-9">æµ·é‡æ—¥å¿—ï¼Œä½æˆæœ¬é•¿æœŸç•™å­˜</h3>
<p>SLS æ•°æ®é‡‡ç”¨é«˜å‹ç¼©æ¯”æŠ€æœ¯ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–åˆ†å±‚å­˜å‚¨ï¼Œå¯å°†å†å²æ•°æ®è‡ªåŠ¨æ²‰é™è‡³ä½é¢‘å’Œå½’æ¡£å­˜å‚¨ï¼Œæ— éœ€ç»´æŠ¤æ¸…ç†è„šæœ¬ï¼Œæˆæœ¬è¿œä½äºæ•°æ®åº“ SSDã€‚è¿™ä½¿å¾— Dify èƒ½ä»¥æä½çš„æˆæœ¬æ»¡è¶³é•¿å‘¨æœŸçš„åˆ†æå’Œå®¡è®¡éœ€æ±‚ã€‚</p>
<h3 data-id="heading-10">å¼€ç®±å³ç”¨çš„æ•°æ®ä»·å€¼é‡Šæ”¾èƒ½åŠ›</h3>
<ul>
<li><strong>Schema-on-Readï¼š</strong> SLS å†™å…¥æ—¶ä¸å¼ºåˆ¶æ ¡éªŒ Schemaï¼Œå®Œç¾é€‚é… Dify å¿«é€Ÿè¿­ä»£å¸¦æ¥çš„å­—æ®µå˜æ›´ï¼Œæ— éœ€å¯¹å†å²æ•°æ®é‡æ–°å˜æ›´ã€‚</li>
<li><strong>ç§’çº§åˆ†æï¼š</strong> SLS å†…ç½®äº†é’ˆå¯¹æ—¥å¿—ä¼˜åŒ–çš„åˆ†æå¼•æ“ï¼ˆå€’æ’ç´¢å¼•+åˆ—å­˜ï¼‰ã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨å…³é”®è¯ä»æµ·é‡æ—¥å¿—ä¸­æ£€ç´¢ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨ SQL å¯¹äº¿çº§æ—¥å¿—è¿›è¡Œå®æ—¶èšåˆåˆ†æï¼Œå°†æ—¥å¿—æ•°æ®è½¬åŒ–ä¸ºä¸šåŠ¡æ´å¯Ÿã€‚</li>
<li><strong>ä¸°å¯Œæ•°æ®ç”Ÿæ€ï¼š</strong> æ—¥å¿—åœ¨SLSä¸­ï¼Œå¯ä»¥è¿›ä¸€æ­¥è¿›è¡Œæ›´å®Œå–„çš„å¤„ç†å’Œåˆ†æï¼Œæ¯”å¦‚æ•°æ®åŠ å·¥æ¸…æ´—ã€è”åˆåˆ†æã€å¯è§†åŒ–ã€å‘Šè­¦ã€æ¶ˆè´¹å’ŒæŠ•é€’ç­‰ç­‰ã€‚</li>
</ul>
<h2 data-id="heading-11">å››ã€æŠ€æœ¯å®ç°ï¼šæ ¸å¿ƒæ¶æ„æ”¹é€ ä¸æ’ä»¶åŒ–</h2>
<p>ä¸ºäº†å°† SLS å¼•å…¥ Difyï¼Œæ•´ä¸ªå·¥ç¨‹å®æ–½åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€æ˜¯å¯¹ Dify æ ¸å¿ƒçš„æ’ä»¶åŒ–æ”¹é€ ï¼ŒäºŒæ˜¯åŸºäº SLS è¯»å†™æ—¥å¿—çš„æ’ä»¶å®ç°ã€‚</p>
<h3 data-id="heading-12">1.Dify æ ¸å¿ƒæ’ä»¶åŒ–æ”¹é€ </h3>
<p>Dify æ—©æœŸæ¶æ„ä¸­ï¼Œå·¥ä½œæµè®°å½•çš„è¯»å†™é€»è¾‘æ·±åº¦è€¦åˆäº† SQLAlchemyï¼ˆPG ORMï¼‰ï¼Œæ‰©å±•æ€§å—é™ã€‚ä» v1.4.1 ä»¥åç¤¾åŒºå¼•å…¥äº† WorkflowExecution çš„é¢†åŸŸæ¨¡å‹ï¼ˆ#20067[7]ï¼‰å¹¶å¼€å§‹é€æ­¥å¯¹å·¥ä½œæµæ‰§è¡Œæ ¸å¿ƒæµç¨‹è¿›è¡Œé‡æ„ï¼Œå®šä¹‰äº†ä¸€å¥—æ ‡å‡†çš„ Repository æ¥å£ï¼Œæ¶µç›–æ—¥å¿—çš„å†™å…¥ã€æ›´æ–°ã€è¯»å–ä»¥åŠç»Ÿè®¡ç­‰æ ‡å‡†è¡Œä¸ºã€‚åœ¨ v1.8.0 ç¤¾åŒºå¼•å…¥äº† Repository çš„å¼‚æ­¥å®ç°ï¼Œé€šè¿‡æ¨è¿Ÿæ—¥å¿—è®°å½•ä¿å­˜æå‡äº†å·¥ä½œæµæ‰§è¡Œé€Ÿåº¦ã€‚</p>
<p>è™½ç„¶ Repository æ¥å£ä¸ºå¤šå­˜å‚¨é©±åŠ¨æä¾›äº†å¯èƒ½ï¼Œä½†æ—©æœŸçš„æŠ½è±¡å¹¶ä¸å½»åº•ï¼šå®ƒä¸»è¦è§£å†³äº†â€œå†™â€çš„æŠ½è±¡ï¼Œä½†å¤§é‡â€œè¯»â€æ“ä½œä»ç»•è¿‡ Repository ç›´æ¥ä¾èµ– SQLAlchemyï¼Œä¸”å¤æ‚çš„è·¨è¡¨ Join æŸ¥è¯¢ä½¿å¾—å­˜å‚¨å±‚éš¾ä»¥çœŸæ­£å‰¥ç¦»ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å’Œ Dify ç ”å‘å›¢é˜Ÿå¤šæ¬¡äº¤æµï¼Œç¡®å®šäº† Repository æŠ½è±¡å±‚çš„å®Œæ•´å®ç°æ–¹æ¡ˆã€‚æˆ‘ä»¬é€šè¿‡å‰¥ç¦»è·¨è¡¨å…³è”æŸ¥è¯¢ã€æ ‡å‡†åŒ–è¯»å–ä¸ç»Ÿè®¡æ¥å£ï¼ŒçœŸæ­£å®ç°äº†å­˜å‚¨å±‚çš„å®Œå…¨è§£è€¦ä¸æ’ä»¶åŒ–åŠ è½½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9134545808d64137babd480eb1803ce1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=F0EI47Kaaq%2BkVtx888Z%2ByO4qAZA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-13">2.SLS æ—¥å¿—æ’ä»¶å®ç°</h3>
<p>åœ¨æ’ä»¶å®ç°è¿‡ç¨‹ä¸­ï¼Œæ ¸å¿ƒæŒ‘æˆ˜åœ¨äºæŠ¹å¹³å…³ç³»å‹æ•°æ®åº“ï¼ˆPGï¼‰ä¸æ—¥å¿—ç³»ç»Ÿï¼ˆSLSï¼‰åœ¨æ•°æ®æ¨¡å‹ä¸Šçš„å·®å¼‚ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä»¥ä¸‹æŠ€æœ¯ç­–ç•¥ï¼š</p>
<h4 data-id="heading-14">åŸºäºå¤šç‰ˆæœ¬çš„çŠ¶æ€ç®¡ç†</h4>
<p>SLS çš„ LogStore æ˜¯ Append-Only è¿½åŠ å†™å…¥ï¼Œè€ŒDify çš„å·¥ä½œæµæ‰§è¡Œè¿‡ç¨‹å­˜åœ¨çŠ¶æ€æµè½¬ï¼Œä»Â <code>RUNNING</code>Â å˜ä¸ºÂ <code>SUCCEEDED/FAIL</code>ã€‚å› æ­¤æˆ‘ä»¬é‡‡ç”¨äº†å¤šç‰ˆæœ¬æ§åˆ¶çš„æ€è·¯ï¼š</p>
<ul>
<li>å†™å…¥ç­–ç•¥ï¼šæ¯æ¬¡çŠ¶æ€æ›´æ–°ï¼Œä¸è¦†ç›–æ—§æ—¥å¿—ï¼Œè€Œæ˜¯æ–°å†™å…¥ä¸€æ¡åŒ…å«å®Œæ•´çŠ¶æ€çš„æ—¥å¿—è®°å½•ã€‚æˆ‘ä»¬åœ¨æ—¥å¿—æ¨¡å‹ä¸­å¼•å…¥äº†ä¸€ä¸ªçº³ç§’çº§çš„æ—¶é—´æˆ³å­—æ®µÂ <code>log_version</code>æ¥åŒºåˆ†ç‰ˆæœ¬ã€‚</li>
<li>è¯»å–ç­–ç•¥ï¼šåœ¨æŸ¥è¯¢æˆ–ç»Ÿè®¡æ—¶ï¼Œæ’ä»¶å†…éƒ¨ä¼šç”Ÿæˆèšåˆ SQLï¼Œå¯¹äºåŒä¸€ä¸ªÂ <code>workflow_run_id</code>ï¼Œå§‹ç»ˆé€‰å–Â <code>log_version</code>Â æœ€å¤§çš„é‚£æ¡è®°å½•ä½œä¸ºæœ€ç»ˆçŠ¶æ€ã€‚</li>
</ul>
<h4 data-id="heading-15">Schema è‡ªåŠ¨åŒæ­¥</h4>
<p>Dify çš„è¿­ä»£é€Ÿåº¦éå¸¸å¿«ï¼Œæ•°æ®åº“æ¨¡å‹ç»å¸¸å‘ç”Ÿå˜æ›´ã€‚å¦‚æœæ¯æ¬¡å‡çº§ Dify éƒ½éœ€è¦ç”¨æˆ·æ‰‹åŠ¨ç»´æŠ¤ç´¢å¼•é…ç½®ï¼Œå°†æå¤§åœ°å¢åŠ è¿ç»´è´Ÿæ‹…ã€‚SLS æ’ä»¶å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ‰«æ SQLAlchemy æ¨¡å‹å®šä¹‰ï¼Œå¹¶ä¸ SLS ç´¢å¼•é…ç½®è¿›è¡Œ Diffã€‚ä¸€æ—¦å‘ç°æ–°å­—æ®µï¼Œè‡ªåŠ¨è°ƒç”¨ API æ›´æ–°ç´¢å¼•ã€‚ç”¨æˆ·æ— éœ€æ‰‹åŠ¨ç»´æŠ¤ç´¢å¼•ï¼Œå¼€å‘è€…ä¹Ÿæ— é¡»ä¸º SLS å•ç‹¬ç¼–å†™å‡çº§è„šæœ¬ã€‚</p>
<h4 data-id="heading-16">åŸç”Ÿ PG åè®®å…¼å®¹</h4>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒSLS æ–°å¢åŸç”Ÿæ”¯æŒ PostgreSQL åè®®ã€‚ç»å¤§éƒ¨åˆ†åŸæœ‰çš„ç»Ÿè®¡ä¸åˆ†æ SQLï¼Œå‡å¯é€šè¿‡ PG å…¼å®¹æ¨¡å¼ç›´æ¥å‘é€åˆ° SLS ä¸Šæ‰§è¡Œï¼Œæå¤§åœ°é™ä½äº†æ’ä»¶çš„å¼€å‘é€‚é…æˆæœ¬ã€‚</p>
<h2 data-id="heading-17">äº”ã€å®è·µæŒ‡å—ï¼šé…ç½®ä¸å¹³æ»‘è¿ç§»</h2>
<p>è¯¥åŠŸèƒ½å·²æ­£å¼åˆå¹¶è‡³ Dify ç¤¾åŒºä¸»åˆ†æ”¯ã€‚åŸºäºDifyæœ€æ–°ä»£ç ï¼Œåªéœ€è¿›è¡Œç®€å•é…ç½®ï¼Œå°±å¯ä»¥å°†å·¥ä½œæµæ‰§è¡Œè®°å½•åˆ‡æ¢åˆ°SLSå­˜å‚¨ã€‚</p>
<h3 data-id="heading-18">ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œ</h3>
<p>ï¼ˆ1ï¼‰åˆ›å»º Projectï¼šåœ¨é˜¿é‡Œäº‘æ—¥å¿—æœåŠ¡æ§åˆ¶å°åˆ›å»º Projectï¼ˆå»ºè®®ä¸ä¸šåŠ¡åŒåœ°åŸŸï¼‰</p>
<blockquote>
<p>æ— éœ€æ‰‹åŠ¨åˆ›å»º Logstore å’Œç´¢å¼•ï¼ŒDify å¯åŠ¨åæ’ä»¶ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶åˆ›å»ºã€‚</p>
</blockquote>
<p>ï¼ˆ2ï¼‰è·å–è®¿é—®å‡­è¯ï¼šè·å–å…·å¤‡ SLS è¯»å†™æƒé™çš„ AccessKey ID å’Œ Secretã€‚</p>
<blockquote>
<p>å¯ä»¥æˆäºˆÂ <code>AliyunLogFullAccess</code>ï¼Œæˆ–æŒ‰éœ€é…ç½®æœ€å°æƒé™ï¼ˆåˆ›å»º/æŸ¥çœ‹Projectã€åˆ›å»º/æŸ¥çœ‹logstoreã€åˆ›å»º/æ›´æ–°/æŸ¥çœ‹ç´¢å¼•ã€å†™æ—¥å¿—ã€æŸ¥æ—¥å¿—ç­‰ï¼‰</p>
</blockquote>
<h3 data-id="heading-19">ç¬¬äºŒæ­¥ï¼šé…ç½®Dify</h3>
<p>åœ¨Â <code>.env</code>Â æˆ–Â <code>docker-compose.yaml</code>Â ä¸­ä¿®æ”¹ä»¥ä¸‹é…ç½®é¡¹ï¼Œå°†å·¥ä½œæµå­˜å‚¨é©±åŠ¨æŒ‡å‘ SLS æ’ä»¶ï¼Œå¹¶è¡¥å……è¿æ¥ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># 1. ä¿®æ”¹ Repository é©±åŠ¨æŒ‡å‘ SLS æ’ä»¶</span>
<span class="hljs-attr">CORE_WORKFLOW_EXECUTION_REPOSITORY</span>=extensions.logstore.repositories.logstore_workflow_execution_repository.LogstoreWorkflowExecutionRepository
<span class="hljs-attr">CORE_WORKFLOW_NODE_EXECUTION_REPOSITORY</span>=extensions.logstore.repositories.logstore_workflow_node_execution_repository.LogstoreWorkflowNodeExecutionRepository
<span class="hljs-attr">API_WORKFLOW_NODE_EXECUTION_REPOSITORY</span>=extensions.logstore.repositories.logstore_api_workflow_node_execution_repository.LogstoreAPIWorkflowNodeExecutionRepository
<span class="hljs-attr">API_WORKFLOW_RUN_REPOSITORY</span>=extensions.logstore.repositories.logstore_api_workflow_run_repository.LogstoreAPIWorkflowRunRepository

<span class="hljs-comment"># 2. æ–°å¢ SLS è¿æ¥é…ç½®</span>
<span class="hljs-attr">ALIYUN_SLS_ACCESS_KEY_ID</span>=your_access_key_id
<span class="hljs-attr">ALIYUN_SLS_ACCESS_KEY_SECRET</span>=your_access_key_secret
<span class="hljs-attr">ALIYUN_SLS_ENDPOINT</span>=cn-hangzhou.log.aliyuncs.com
<span class="hljs-attr">ALIYUN_SLS_REGION</span>=cn-hangzhou
<span class="hljs-attr">ALIYUN_SLS_PROJECT_NAME</span>=your_project_name
<span class="hljs-attr">ALIYUN_SLS_LOGSTORE_TTL</span>=<span class="hljs-number">365</span>Â Â <span class="hljs-comment"># æ—¥å¿—å­˜å‚¨å¤©æ•°</span>

<span class="hljs-comment"># 3. è¿ç§»å¼€å…³é…ç½®</span>
<span class="hljs-attr">LOGSTORE_DUAL_WRITE_ENABLED</span>=<span class="hljs-literal">false</span>
<span class="hljs-attr">LOGSTORE_DUAL_READ_ENABLED</span>=<span class="hljs-literal">true</span>
</code></pre>
<p>ä¸ºäº†ä¿è¯å­˜é‡ PG ç”¨æˆ·èƒ½å¹³æ»‘å‡çº§åˆ° SLS ç‰ˆæœ¬ï¼Œæˆ‘ä»¬åœ¨æ’ä»¶ä¸­æä¾›äº†ä¸¤ä¸ªå¼€å…³ï¼š</p>
<p>ï¼ˆ1ï¼‰åŒå†™æœºåˆ¶ï¼šé€šè¿‡é…ç½®Â <code>LOGSTORE_DUAL_WRITE_ENABLED=True</code>ï¼ˆé»˜è®¤å…³é—­ï¼‰ï¼Œç³»ç»Ÿä¼šå°†æ—¥å¿—åŒæ—¶å†™å…¥ PG å’Œ SLSã€‚è¿™é€‚ç”¨äºå­˜é‡ç”¨æˆ·è¿ç§»åˆæœŸçš„ç°åº¦éªŒè¯ï¼Œç¡®ä¿åœ¨ä¸æ”¹å˜åŸæœ‰æ•°æ®æµçš„æƒ…å†µä¸‹ï¼ŒéªŒè¯ SLS çš„é…ç½®æ­£ç¡®æ€§å’Œ Dify ç‰ˆæœ¬å‡çº§æœ¬èº«çš„å…¼å®¹æ€§ã€‚</p>
<p>ï¼ˆ2ï¼‰åŒè¯»é™çº§æœºåˆ¶ï¼šé€šè¿‡é…ç½®Â <code>LOGSTORE_DUAL_READ_ENABLED=True</code>ï¼ˆé»˜è®¤å¼€å¯ï¼‰ï¼Œç³»ç»Ÿä¼˜å…ˆä» SLS è¯»å–æ—¥å¿—ã€‚å¦‚æœ SLS ä¸­æœªæ‰¾åˆ°è¯¥è®°å½•ï¼ˆä¾‹å¦‚è¿ç§»å‰çš„è€å†å²æ•°æ®ï¼‰ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨é™çº§å› PG å†æ¬¡å°è¯•è¯»å–ã€‚</p>
<h2 data-id="heading-20">å…­ã€æˆæ•ˆå¯¹æ¯”ï¼šè¿ç§»åˆ°SLSçš„ä¸‰å¤§æ”¶ç›Š</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aea0cb21a5e24771aeffdf497955ece5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=DxndBXmlkeKxm1hQInl7Nas1ZQw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-21">æ”¶ç›Šä¸€ï¼šDBå‹åŠ›æ˜¾è‘—ä¸‹é™</h3>
<p>åˆ‡æ¢åˆ°SLSï¼Œç›¸å½“äºæŠŠç°æœ‰PGä¸­æ•°æ®é‡æœ€å¤§çš„ä¸¤å¼ è¡¨çš„æ•°æ®è¿ç§»èµ°äº†ã€‚æ ¹æ®æˆ‘ä»¬çº¿ä¸Šä¸šåŠ¡çš„æ•°æ®ï¼ŒDBå‡å°‘äº†95%ä»¥ä¸Šçš„å­˜å‚¨ç©ºé—´ï¼ˆè¿è¡Œæ—¶é—´è¶Šé•¿ï¼Œè¿™ä¸ªæ¯”ä¾‹è¶Šé«˜ï¼‰ï¼Œå¹¶ä¸”è¯»å†™è¿‡ç¨‹ä¸­çš„DBçš„è¿æ¥æ•°ã€CPUç­‰å‹åŠ›ä¹Ÿæœ‰æ˜¾è‘—é™ä½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4d2c9bfc0a7413c80c84ef6e342f40f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=onbuHtEOBnkJxbvllkTrlJuoNL8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-22">æ”¶ç›ŠäºŒï¼šå­˜å‚¨æˆæœ¬å¤§å¹…é™ä½</h3>
<p>ä¸ºäº†ç›´è§‚é‡åŒ–è¿ç§»åçš„æˆæœ¬æ”¶ç›Šï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªå…¸å‹çš„ç”Ÿäº§çº§åœºæ™¯è¿›è¡Œä¼°ç®—ï¼šå‡è®¾ Dify åº”ç”¨æ—¥å¢æ—¥å¿— 10GBï¼Œä¸ºäº†æ»¡è¶³æ¨¡å‹è¯„ä¼°ä¸å›æº¯éœ€æ±‚ï¼Œéœ€ç•™å­˜æœ€è¿‘ 300 å¤©ï¼ˆçº¦ 3TBï¼‰çš„æ•°æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d62106f5d70411191263f4516ecbb77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=t0jTFhJJVBs9wMNLEBH0291WpA8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<blockquote>
<p>æ³¨ï¼šè¿™é‡Œä¼°ç®—SLSæˆæœ¬çš„æ—¶å€™ï¼Œå·²ç»å°†å­˜å¤šæ¡çŠ¶æ€è®°å½•ä¼šå ç”¨å­˜å‚¨ç©ºé—´çš„å› ç´ è€ƒè™‘è¿›å»ã€‚ æ­¤å¤–å¯¹äºPGå®é™…ç”Ÿäº§ä¸­è¿˜éœ€é¢å¤–è€ƒè™‘é«˜å¯ç”¨å¤šå‰¯æœ¬ã€é¢„ç•™å­˜å‚¨ç©ºé—´ã€è¿æ¥æ± æ‰©å®¹ç­‰éšæ€§æˆæœ¬ã€‚</p>
</blockquote>
<p>è¿™é‡Œé€ æˆè¿‘Â 10 å€æˆæœ¬å·®è·Â çš„æ ¹æœ¬åŸå› åœ¨äºå­˜å‚¨æœºåˆ¶çš„ä¸åŒã€‚</p>
<p>Difyçš„å·¥ä½œæµè®°å½•åŒ…å«äº†ç”¨æˆ·æé—®ã€çŸ¥è¯†å¬å›ã€å·¥å…·è°ƒç”¨å’Œæ¨¡å‹å“åº”ç­‰æ•°æ®ï¼Œæ˜¯è¯„ä¼°å’Œå›å½’ç­‰ä»»åŠ¡éœ€è¦çš„æ•°æ®èµ„äº§ï¼Œé•¿æœŸç•™å­˜ä»·å€¼é«˜ã€‚</p>
<ul>
<li><strong>å¯¹äº PGï¼š</strong> å­˜å‚¨æ—¶é—´è¶Šé•¿ï¼Œæ•°æ®é‡è¶Šå¤§ï¼Œå¯¹æ˜‚è´µçš„ SSD å­˜å‚¨ç©ºé—´å ç”¨å°±è¶Šå¤šï¼Œæˆæœ¬ä¼šå¤§å¹…å¢é•¿ã€‚pgå®ä¾‹éœ€è¦æå‰é¢„ä¼°å­˜å‚¨ç©ºé—´ï¼Œå­˜å‚¨ç©ºé—´ä¸å¯èƒ½å®Œå…¨åˆ©ç”¨èµ·æ¥ï¼Œå¿…ç„¶é—²ç½®ä¸€éƒ¨åˆ†ç©ºé—´ã€‚</li>
<li><strong>å¯¹äº SLSï¼š</strong> ä¸“ä¸ºæ—¥å¿—è®¾è®¡çš„é«˜å‹ç¼©æ¯”ä¸åˆ†å±‚å­˜å‚¨æŠ€æœ¯ï¼Œä½¿å¾—å­˜å‚¨æ•°æ®é‡è¶Šå¤§ã€æ—¶é—´è¶Šé•¿ï¼Œå…¶è¾¹é™…æˆæœ¬ä¼˜åŠ¿è¶Šæ˜æ˜¾ã€‚</li>
</ul>
<h3 data-id="heading-23">æ”¶ç›Šä¸‰ï¼šæ•°æ®ä»·å€¼é‡Šæ”¾ï¼Œä»â€œè¿ç»´ç›‘æ§â€åˆ°â€œä¸šåŠ¡æ´å¯Ÿâ€</h3>
<p>è¿™é‡Œæˆ‘ä»¬ä»¥ä¸€ä¸ªçœŸå®çš„ Dify åº”ç”¨åœºæ™¯â€”â€”â€œç”µå•†æ™ºèƒ½å®¢æœåŠ©æ‰‹â€ä¸ºä¾‹ï¼Œå±•ç¤ºæ—¥å¿—æ•°æ®æ¥å…¥ SLS åï¼Œå¦‚ä½•æŒ–æ˜å…¶èƒŒåæ›´å¤§çš„ä¸šåŠ¡ä»·å€¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34f07812069f4240a95ced39194b1c01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=GTVZOmUKBO82gcTS9uB7GtqXa1U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-24">ï¼ˆ1ï¼‰æ— ç¼é›†æˆï¼ŒåŸç”Ÿä½“éªŒ</h4>
<p>æ¥å…¥ SLS åï¼ŒDify ç•Œé¢ä¸Šçš„æ—¥å¿—æŸ¥è¯¢ä¸å›æº¯ä½“éªŒä¿æŒä¸å˜ï¼Œä½†åº•å±‚å­˜å‚¨å·²å®Œå…¨åˆ‡æ¢ã€‚</p>
<ul>
<li>æ—¥å¿—å›æº¯ï¼šDify æ§åˆ¶å°çš„æ—¥å¿—è¯¦æƒ…é¡µç›´æ¥ä» SLS è¯»å–æ•°æ®ï¼Œå“åº”æ›´è¿…é€Ÿã€‚</li>
<li>ç›‘æ§å›¾è¡¨ï¼šDify å†…ç½®çš„ç›‘æ§ç»Ÿè®¡å›¾è¡¨ï¼Œä¹Ÿæ˜¯é€šè¿‡æ‰§è¡Œ SLS SQL å®æ—¶ç”Ÿæˆçš„ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/488198cf9d744b73a6749e36e5a881d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=ZAz2mNYyhoeYHFd6dlOW0V8BZCY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-25">ï¼ˆ2ï¼‰è¶…è¶ŠåŸºç¡€ï¼ŒSLS è¿›é˜¶åˆ†æ</h4>
<p>è™½ç„¶ Dify å†…ç½®äº†åŸºç¡€æŸ¥è¯¢å’Œç»Ÿè®¡åŠŸèƒ½ï¼Œä½†é¢å¯¹å¤æ‚çš„ä¸šåŠ¡åˆ†æéœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è½¬è‡³ SLS æ§åˆ¶å°ï¼Œè§£é”æ›´å¼ºå¤§çš„èƒ½åŠ›ã€‚</p>
<ul>
<li><strong>ä»»æ„å­—æ®µçš„é«˜é€Ÿæ£€ç´¢</strong></li>
</ul>
<p>SLS æ”¯æŒå…¨æ–‡ç´¢å¼•å’Œä»»æ„é”®å€¼å¯¹æ¡ä»¶çš„ç»„åˆæŸ¥è¯¢ï¼Œå¿«é€Ÿç²¾å‡†æ£€ç´¢å‡ºç¬¦åˆæŸç§ç‰¹å®šç‰¹å¾çš„æ—¥å¿—ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0192c2f638134b7ebc8daf0d20ef34e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=yBjE%2BqKPuZ2yni%2B8A%2B9eteLnOr0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>ä¸šåŠ¡è¶‹åŠ¿åˆ†æï¼ˆå¯è§†åŒ–ï¼‰åœºæ™¯</strong></li>
</ul>
<p>æ¯”å¦‚è¿™é‡Œæˆ‘ä»¬åˆ†æâ€œç”¨æˆ·æ„å›¾è¯†åˆ«â€è¿™ä¸ªå·¥ä½œæµèŠ‚ç‚¹é‡Œï¼ŒæŒ‰è¯†åˆ«å‡ºçš„ç”¨æˆ·æ„å›¾çš„åˆ†ç±»ç»Ÿè®¡éšæ—¶é—´å˜åŒ–çš„PVæƒ…ï¼Œä¾¿äºé€šè¿‡è§‚å¯Ÿä¸åŒåˆ†ç±»çš„è¶‹åŠ¿å˜åŒ–ï¼Œåšå‡ºç›¸åº”çš„è¿è¥å†³ç­–ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">*</span>Â <span class="hljs-keyword">and</span>Â title: ç”¨æˆ·æ„å›¾è¯†åˆ«Â <span class="hljs-keyword">and</span>Â intentÂ <span class="hljs-operator">|</span>Â <span class="hljs-keyword">select</span>Â json_extract(outputs,Â <span class="hljs-string">'$.intent'</span>)Â <span class="hljs-keyword">as</span>Â "ç”¨æˆ·æ„å›¾", date_trunc(<span class="hljs-string">'minute'</span>, __time__) t,Â <span class="hljs-built_in">count</span>(<span class="hljs-number">1</span>)Â <span class="hljs-keyword">as</span>Â pvÂ <span class="hljs-keyword">group</span>Â <span class="hljs-keyword">by</span>Â "ç”¨æˆ·æ„å›¾",tÂ <span class="hljs-keyword">order</span>Â <span class="hljs-keyword">by</span>Â t limitÂ <span class="hljs-keyword">all</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/692159a7f5104fa69597b423df8b19bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=svJH61m4JahxuSeXK6brd3so%2By4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>å¼‚å¸¸è¯Šæ–­ï¼ˆæ¼æ–—åˆ†æï¼‰åœºæ™¯</strong></li>
</ul>
<p>å¯ä»¥é€šè¿‡æ¼æ–—å›¾ï¼Œåˆ†æè§‚å¯Ÿå·¥ä½œæµå“ªäº›ä¸­é—´èŠ‚ç‚¹å‡ºç°å¼‚å¸¸å¤±è´¥çš„æ¯”ç‡è¾ƒé«˜ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">status:</span>succeededÂ |Â <span class="hljs-keyword">select</span>Â title,Â count(<span class="hljs-keyword">distinct</span>Â workflow_run_id) cntÂ <span class="hljs-keyword">group</span>Â <span class="hljs-keyword">by</span>Â titleÂ <span class="hljs-keyword">order</span>Â <span class="hljs-keyword">by</span>Â cntÂ desc
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9889e516acc4f90b5fad6938d3eec7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=w%2BQdP13JYArRO6PK%2FvGRitBiRy8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>æˆæœ¬ä¸é£é™©é£æ§ï¼ˆå®æ—¶å‘Šè­¦ï¼‰åœºæ™¯</strong></li>
</ul>
<p>é…ç½®å‘Šè­¦è§„åˆ™ï¼Œç»Ÿè®¡ LLM èŠ‚ç‚¹çš„ Token æ¶ˆè€—ï¼Œä¸€æ—¦è¶…è¿‡é¢„è®¾é˜ˆå€¼ï¼Œç«‹å³è§¦å‘é’‰é’‰/ç”µè¯å‘Šè­¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e94041094dcf439f97c7315fcee0124a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=RJLTS3%2FglNn7YziG0zJyXZPygC8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>æ•°æ®é—­ç¯ï¼ˆETL ä¸åŠ å·¥ï¼‰åœºæ™¯</strong></li>
</ul>
<p>åˆ©ç”¨æ•°æ®åŠ å·¥å’Œå®šæ—¶ SQLï¼Œå¯¹å·¥ä½œæµçš„è¾“å…¥è¾“å‡ºè¿›è¡Œæ¸…æ´—ã€è„±æ•ä¸æ ‡å‡†åŒ–ï¼Œæ„å»ºæŒç»­æ›´æ–°çš„è¯„ä¼°ä¸è®­ç»ƒæ•°æ®é›†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e5a8e291fa24253b68e6ba96b991445~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344697&amp;x-signature=nw7RMdGNFYrnaJHMgSc5Hr4gXm0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ€»ä¹‹ï¼Œå°† Dify å·¥ä½œæµæ—¥å¿—æ¥å…¥ SLSï¼Œä¸ä»…èƒ½é«˜æ•ˆæŸ¥è¯¢æ—¥å¿—ï¼Œæ›´èƒ½é€šè¿‡åˆ†æã€å¯è§†åŒ–ã€å‘Šè­¦å’Œæ•°æ®åŠ å·¥ï¼Œå°†æ—¥å¿—è½¬åŒ–ä¸ºä¸šåŠ¡æ´å¯Ÿï¼ŒçœŸæ­£å®ç°ä»â€œçœ‹æ—¥å¿—â€åˆ°â€œæ‡‚ä¸šåŠ¡â€çš„è·ƒå‡ã€‚</p>
<h2 data-id="heading-26">ä¸ƒã€æ€»ç»“ï¼šè¿ˆå‘ç”Ÿäº§çº§ AI æ¶æ„</h2>
<p>å°† Dify è¿è¡Œæ—¥å¿—è¿ç§»è‡³é˜¿é‡Œäº‘ SLSï¼Œå¹¶éä¸€æ¬¡ç®€å•çš„â€œå­˜å‚¨æ›¿æ¢â€ï¼Œè€Œæ˜¯ Dify å‘ç”Ÿäº§çº§é«˜å¯ç”¨æ¶æ„æ¼”è¿›çš„å…³é”®ä¸€è·ƒã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡ä¸šåŠ¡æ•°æ®ä¸æ—¥å¿—æ•°æ®è§£è€¦çš„æ¶æ„æ”¹é€ ï¼ŒæˆåŠŸå°†é«˜ååã€æ³›ç»“æ„åŒ–çš„æ—¥å¿—æµä»äº‹åŠ¡å‹æ•°æ®åº“ä¸­å‰¥ç¦»ã€‚è®© PostgreSQL ä¸“æ³¨æ ¸å¿ƒä¸šåŠ¡äº‹åŠ¡å¤„ç†ï¼Œè®© SLS å……åˆ†å‘æŒ¥å…¶åœ¨æµ·é‡æ•°æ®å­˜å‚¨ä¸åˆ†æä¸Šçš„åŸç”Ÿä¼˜åŠ¿ã€‚</p>
<p>è¿™ä¸€ç‰¹æ€§å¸¦æ¥çš„ä»·å€¼æ˜¯å…¨æ–¹ä½çš„ï¼š</p>
<ul>
<li><strong>è§£å†³DBæ€§èƒ½ç“¶é¢ˆï¼š</strong> å°†æ—¥å¿—ä¸æ ¸å¿ƒäº‹åŠ¡è§£è€¦ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³æ•°æ®åº“ç“¶é¢ˆï¼Œä¿è¯æ ¸å¿ƒä¸šåŠ¡ç¨³å®šæ€§ã€‚</li>
<li><strong>å¤§å¹…é™ä½æ—¥å¿—æˆæœ¬ï¼š</strong> åˆ©ç”¨SLSçš„å¼¹æ€§ä¼¸ç¼©ã€é«˜å‹ç¼©æ¯”ã€åˆ†å±‚å­˜å‚¨ï¼Œä½æˆæœ¬å­˜å‚¨æµ·é‡æ—¥å¿—ã€‚</li>
<li><strong>å……åˆ†é‡Šæ”¾æ•°æ®ä»·å€¼ï¼š</strong> ä»ç®€å•çš„æ—¥å¿—æŸ¥çœ‹å‡çº§ä¸ºå¼ºå¤§çš„å®æ—¶åˆ†æã€ç›‘æ§å‘Šè­¦ã€åŠ å·¥å¤„ç†ï¼Œå°†è¿ç»´æ•°æ®è½¬æ¢ä¸ºä¸šåŠ¡æ´å¯Ÿã€‚</li>
</ul>
<p>å¦‚æœæ‚¨æ­£åœ¨æ„å»ºå¤§è§„æ¨¡çš„ AI åº”ç”¨ï¼Œæˆ–è€…æ­£è¢« Dify æ•°æ®åº“çš„æ€§èƒ½ç“¶é¢ˆæ‰€å›°æ‰°ï¼Œç°åœ¨å°±æ˜¯å‡çº§çš„æœ€ä½³æ—¶æœºã€‚æ‹¥æŠ±äº‘åŸç”Ÿæ—¥å¿—æ¶æ„ï¼Œè®©æ‚¨çš„ Dify è·‘å¾—æ›´å¿«ã€æ›´ç¨³ã€æ›´æ™ºèƒ½ã€‚</p>
<p><strong>å‚è€ƒé“¾æ¥ï¼š</strong></p>
<p>[1]<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanggenius%2Fdify%2Fissues%2F22307" target="_blank" title="https://github.com/langgenius/dify/issues/22307" ref="nofollow noopener noreferrer">github.com/langgenius/â€¦</a></p>
<p>[2]<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanggenius%2Fdify%2Fissues%2F18800%23event-17534118862" target="_blank" title="https://github.com/langgenius/dify/issues/18800#event-17534118862" ref="nofollow noopener noreferrer">github.com/langgenius/â€¦</a></p>
<p>[3]<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanggenius%2Fdify%2Fissues%2F22796" target="_blank" title="https://github.com/langgenius/dify/issues/22796" ref="nofollow noopener noreferrer">github.com/langgenius/â€¦</a></p>
<p>[4]<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanggenius%2Fdify%2Fissues%2F20147" target="_blank" title="https://github.com/langgenius/dify/issues/20147" ref="nofollow noopener noreferrer">github.com/langgenius/â€¦</a></p>
<p>[5]<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanggenius%2Fdify%2Fpull%2F20050" target="_blank" title="https://github.com/langgenius/dify/pull/20050" ref="nofollow noopener noreferrer">github.com/langgenius/â€¦</a></p>
<p>[6]<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanggenius%2Fdify%2Fissues%2F23399" target="_blank" title="https://github.com/langgenius/dify/issues/23399" ref="nofollow noopener noreferrer">github.com/langgenius/â€¦</a></p>
<p>[7]<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanggenius%2Fdify%2Fpull%2F20067" target="_blank" title="https://github.com/langgenius/dify/pull/20067" ref="nofollow noopener noreferrer">github.com/langgenius/â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Jetpack ViewModelå†…å¹•ï¼šå†…éƒ¨æœºåˆ¶ä¸è·¨å¹³å°è®¾è®¡]]></title>    <link>https://juejin.cn/post/7587634022575472703</link>    <guid>https://juejin.cn/post/7587634022575472703</guid>    <pubDate>2025-12-25T12:29:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587634022575472703" data-draft-id="7587631760253566995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Jetpack ViewModelå†…å¹•ï¼šå†…éƒ¨æœºåˆ¶ä¸è·¨å¹³å°è®¾è®¡"/> <meta itemprop="keywords" content="Android,Android Jetpack,Kotlin"/> <meta itemprop="datePublished" content="2025-12-25T12:29:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨€æœ‰çŒ¿è¯‰"/> <meta itemprop="url" content="https://juejin.cn/user/2788017216685784"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Jetpack ViewModelå†…å¹•ï¼šå†…éƒ¨æœºåˆ¶ä¸è·¨å¹³å°è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2788017216685784/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨€æœ‰çŒ¿è¯‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T12:29:27.000Z" title="Thu Dec 25 2025 12:29:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¯‘è‡ªã€ŒInside Jetpack ViewModel: Internal Mechanisms and Multiplatform Designã€ï¼ŒåŸæ–‡é“¾æ¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fproandroiddev.com%2Finside-jetpack-viewmodel-internal-mechanisms-and-multiplatform-design-2625671eaef8" target="_blank" title="https://proandroiddev.com/inside-jetpack-viewmodel-internal-mechanisms-and-multiplatform-design-2625671eaef8" ref="nofollow noopener noreferrer">proandroiddev.com/inside-jetpâ€¦</a>ï¼Œç”±Jaewoong Eumå‘å¸ƒäº2025å¹´12æœˆ7æ—¥ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e851a5c89cf84d56883d19e87a66312f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767270566&amp;x-signature=HWDRdZzKfSIhfBj5JrghD3QEsaY%3D" alt="Unsplash@davidvig" loading="lazy"/></p>
<p>Jetpack çš„ ViewModel å·²æˆä¸ºç°ä»£ Android å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ç»„ä»¶ï¼Œå®ƒä¸º UI ç›¸å…³æ•°æ®æä¾›äº†ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å®¹å™¨ï¼Œå³ä½¿é…ç½®å‘ç”Ÿæ›´æ”¹ï¼Œæ•°æ®ä¹Ÿèƒ½ä¿æŒä¸å˜ã€‚è™½ç„¶å…¶ API è¡¨é¢ä¸Šçœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†å…¶å†…éƒ¨æœºåˆ¶å´å±•ç°äº†å›´ç»•ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€è·¨å¹³å°æŠ½è±¡ã€èµ„æºæ¸…ç†å’Œçº¿ç¨‹å®‰å…¨ç¼“å­˜ç­‰æ–¹é¢çš„è®¾è®¡å†³ç­–ã€‚äº†è§£ ViewModel çš„åº•å±‚å·¥ä½œåŸç†æœ‰åŠ©äºä½ åšå‡ºæ›´ä¼˜çš„æ¶æ„å†³ç­–ï¼Œå¹¶é¿å…ä¸€äº›ä¸æ˜“å¯Ÿè§‰çš„é”™è¯¯ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Jetpack ViewModel çš„å†…éƒ¨å·¥ä½œåŸç†ï¼ŒåŒ…æ‹¬ <code>ViewModelStore</code> å¦‚ä½•åœ¨é…ç½®æ›´æ”¹åä¿ç•™å®ä¾‹ã€<code>ViewModelProvider</code> å¦‚ä½•åè°ƒåˆ›å»ºå’Œç¼“å­˜ã€å·¥å‚æ¨¡å¼å¦‚ä½•å®ç°çµæ´»çš„å®ä¾‹åŒ–ã€<code>CreationExtras</code> å¦‚ä½•å®ç°æ— çŠ¶æ€å·¥å‚ã€å¦‚ä½•é€šè¿‡ Closeable æ¨¡å¼ç®¡ç†èµ„æºæ¸…ç†ï¼Œä»¥åŠ <code>viewModelScope</code> å¦‚ä½•å°†åç¨‹ä¸ ViewModel ç”Ÿå‘½å‘¨æœŸé›†æˆã€‚</p>
<h2 data-id="heading-0">æ ¹æœ¬é—®é¢˜ï¼šé…ç½®æ›´æ”¹åçš„ä¿ç•™</h2>
<p>é…ç½®æ›´æ”¹æ˜¯ Android å¼€å‘é¢ä¸´çš„ä¸€é¡¹æ ¹æœ¬æ€§æŒ‘æˆ˜ã€‚å½“ç”¨æˆ·æ—‹è½¬è®¾å¤‡ã€æ›´æ”¹è¯­è¨€è®¾ç½®æˆ–è§¦å‘ä»»ä½•é…ç½®æ›´æ”¹æ—¶ï¼Œç³»ç»Ÿä¼šé”€æ¯å¹¶é‡æ–°åˆ›å»º Activityã€‚Activity ä¸­å­˜å‚¨çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šä¸¢å¤±ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> userData: User? = <span class="hljs-literal">null</span>  <span class="hljs-comment">// Lost on rotation!</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        <span class="hljs-comment">// Must reload data after every rotation</span>
        loadUserData()
    }
}
</code></pre>
<p>ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>onSaveInstanceState()</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSaveInstanceState</span><span class="hljs-params">(outState: <span class="hljs-type">Bundle</span>)</span></span> {
    <span class="hljs-keyword">super</span>.onSaveInstanceState(outState)
    outState.putParcelable(<span class="hljs-string">"user"</span>, userData)
}

<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
    userData = savedInstanceState?.getParcelable(<span class="hljs-string">"user"</span>)
}
</code></pre>
<p>è¿™ç§æ–¹æ³•é€‚ç”¨äºå°å‹ã€å¯åºåˆ—åŒ–çš„æ•°æ®ã€‚ä½†æ˜¯ï¼Œå¯¹äºå¤§å‹æ•°æ®é›†ã€ç½‘ç»œè¿æ¥æˆ–æ— æ³•åºåˆ—åŒ–çš„å¯¹è±¡å‘¢ï¼Ÿå¯¹äºæŒç»­è¿›è¡Œçš„ç½‘ç»œè¯·æ±‚ç­‰æ“ä½œå‘¢ï¼ŸBundle æ–¹æ³•åœ¨è¿™äº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼ŒåŸå› æ—¢æœ‰å¤§å°é™åˆ¶ï¼Œä¹Ÿæœ‰åºåˆ—åŒ–/ååºåˆ—åŒ–çš„é«˜æ˜‚å¼€é”€ã€‚</p>
<p>ViewModel é€šè¿‡æä¾›ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å®¹å™¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¯¥å®¹å™¨é€šè¿‡ä¿ç•™å¯¹è±¡æ¨¡å¼ï¼ˆè€Œéåºåˆ—åŒ–ï¼‰æ¥åº”å¯¹é…ç½®æ›´æ”¹ã€‚</p>
<h2 data-id="heading-1">ViewModelStoreï¼šä¿ç•™æœºåˆ¶</h2>
<p>ViewModel é…ç½®å˜æ›´åä»èƒ½ä¿ç•™çš„æ ¸å¿ƒæ˜¯ <code>ViewModelStore</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªç®€å•çš„é”®å€¼å­˜å‚¨ï¼Œç”¨äºä¿å­˜ ViewModel å®ä¾‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewModelStore</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> map = mutableMapOf&lt;String, ViewModel&gt;()

    <span class="hljs-meta">@RestrictTo(RestrictTo.Scope.LIBRARY_GROUP)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">put</span><span class="hljs-params">(key: <span class="hljs-type">String</span>, viewModel: <span class="hljs-type">ViewModel</span>)</span></span> {
        <span class="hljs-keyword">val</span> oldViewModel = map.put(key, viewModel)
        oldViewModel?.clear()
    }

    <span class="hljs-meta">@RestrictTo(RestrictTo.Scope.LIBRARY_GROUP)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">(key: <span class="hljs-type">String</span>)</span></span>: ViewModel? {
        <span class="hljs-keyword">return</span> map[key]
    }

    <span class="hljs-meta">@RestrictTo(RestrictTo.Scope.LIBRARY_GROUP)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">keys</span><span class="hljs-params">()</span></span>: Set&lt;String&gt; {
        <span class="hljs-keyword">return</span> HashSet(map.keys)
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">for</span> (vm <span class="hljs-keyword">in</span> map.values) {
            vm.clear()
        }
        map.clear()
    }
}
</code></pre>
<p>å®ç°éå¸¸ç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ª <code>MutableMap&lt;String, ViewModel&gt;</code>ã€‚å…³é”®ä¸åœ¨äºå­˜å‚¨æœ¬èº«ï¼Œè€Œåœ¨äºå­˜å‚¨çš„ä¿ç•™æ–¹å¼ã€‚</p>
<h3 data-id="heading-2">é”®æ›¿æ¢è¡Œä¸º</h3>
<p>è¯·æ³¨æ„ <code>put</code> æ–¹æ³•çš„è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">put</span><span class="hljs-params">(key: <span class="hljs-type">String</span>, viewModel: <span class="hljs-type">ViewModel</span>)</span></span> {
    <span class="hljs-keyword">val</span> oldViewModel = map.put(key, viewModel)
    oldViewModel?.clear()
}
</code></pre>
<p>å¦‚æœå·²å­˜åœ¨å…·æœ‰ç›¸åŒé”®çš„ ViewModelï¼Œåˆ™æ—§çš„ ViewModel ä¼šè¢«ç«‹å³æ¸…é™¤ã€‚è¿™ç¡®ä¿äº†åœ¨æ›¿æ¢ ViewModel æ—¶èƒ½å¤Ÿæ­£ç¡®æ¸…ç†ã€‚ä½ å¯èƒ½æƒ³çŸ¥é“è¿™ç§æƒ…å†µä½•æ—¶å‘ç”Ÿï¼Œå®ƒå‘ç”Ÿåœ¨ä½ è¯·æ±‚å…·æœ‰ç›¸åŒé”®ä½†ç±»å‹ä¸åŒçš„ ViewModel æ—¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// First request creates TestViewModel1 with key "my_key"</span>
<span class="hljs-keyword">val</span> vm1: TestViewModel1 = viewModelProvider[<span class="hljs-string">"my_key"</span>, TestViewModel1::<span class="hljs-keyword">class</span>]

<span class="hljs-comment">// Second request with same key but different type</span>
<span class="hljs-keyword">val</span> vm2: TestViewModel2 = viewModelProvider[<span class="hljs-string">"my_key"</span>, TestViewModel2::<span class="hljs-keyword">class</span>]

<span class="hljs-comment">// vm1.onCleared() has been called, vm1 is no longer valid</span>
</code></pre>
<p>æ­¤è¡Œä¸ºå·²åœ¨æµ‹è¯•å¥—ä»¶ä¸­éªŒè¯ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">twoViewModelsWithSameKey</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> key = <span class="hljs-string">"the_key"</span>
    <span class="hljs-keyword">val</span> vm1 = viewModelProvider[key, TestViewModel1::<span class="hljs-keyword">class</span>]
    assertThat(vm1.cleared).isFalse()
    <span class="hljs-keyword">val</span> vw2 = viewModelProvider[key, TestViewModel2::<span class="hljs-keyword">class</span>]
    assertThat(vw2).isNotNull()
    assertThat(vm1.cleared).isTrue()
}
</code></pre>
<h3 data-id="heading-3">ViewModelStoreOwner å¥‘çº¦</h3>
<p><code>ViewModelStoreOwner</code> æ¥å£å®šä¹‰äº†è°æ‹¥æœ‰è¯¥å­˜å‚¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ViewModelStoreOwner</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> viewModelStore: ViewModelStore
}
</code></pre>
<p><code>ComponentActivity</code>ã€<code>Fragment</code> å’Œ <code>NavBackStackEntry</code> éƒ½å®ç°äº†è¿™ä¸ªç®€å•çš„æ¥å£ã€‚æ‰€æœ‰è€…çš„èŒè´£æœ‰ä¸¤æ–¹é¢ï¼š</p>
<ol>
<li><strong>åœ¨é…ç½®æ›´æ”¹åä¿ç•™å­˜å‚¨</strong>ï¼šå­˜å‚¨å¿…é¡»åœ¨ Activity é‡å»ºåä»ç„¶å­˜åœ¨ã€‚</li>
<li><strong>åœ¨çœŸæ­£å®Œæˆåæ¸…é™¤å­˜å‚¨</strong>ï¼šå½“æ‰€æœ‰è€…è¢«é”€æ¯è€Œæœªé‡å»ºæ—¶ï¼Œè°ƒç”¨ <code>ViewModelStore.clear()</code>ã€‚</li>
</ol>
<p>å¯¹äº Activity è€Œè¨€ï¼Œè¿™é€šå¸¸ä½¿ç”¨ <code>NonConfigurationInstances</code> æ¥å®ç°ï¼Œè¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„æœºåˆ¶ï¼Œå…è®¸å¯¹è±¡åœ¨é…ç½®æ›´æ”¹åä»ç„¶å­˜åœ¨ã€‚Activity æ¡†æ¶åœ¨ <code>onRetainNonConfigurationInstance()</code> æœŸé—´ä¿ç•™è¿™äº›å¯¹è±¡ï¼Œå¹¶åœ¨ <code>getLastNonConfigurationInstance()</code> ä¸­æ¢å¤å®ƒä»¬ã€‚</p>
<h3 data-id="heading-4">ä¸ºä»€ä¹ˆç®€å•çš„æ˜ å°„æœ‰æ•ˆ</h3>
<p>ä½ å¯èƒ½æœŸæœ›ä½¿ç”¨å¤æ‚çš„ç¼“å­˜æœºåˆ¶ï¼Œä½†ç®€å•çš„ <code>MutableMap</code> å°±è¶³å¤Ÿäº†ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å¤§å°æœ‰é™</strong>ï¼šæ¯ä¸ªå±å¹•ä¸Šçš„ ViewModel æ•°é‡å¾ˆå°‘ï¼ˆé€šå¸¸ä¸º 1-5 ä¸ªï¼‰ã€‚</li>
<li><strong>å­—ç¬¦ä¸²é”®</strong>ï¼šé”®ç”±ç±»åç”Ÿæˆï¼Œä½¿å¾—æŸ¥æ‰¾å¤æ‚åº¦ä¸º O(1)ï¼Œå¹¶ä¸”å“ˆå¸Œåˆ†å¸ƒè‰¯å¥½ã€‚</li>
<li><strong>æ— éœ€é©±é€</strong>ï¼šViewModel ä»…åœ¨æ˜¾å¼è¯·æ±‚æˆ–æ‰€æœ‰è€…è¢«é”€æ¯æ—¶æ‰ä¼šè¢«æ¸…é™¤ã€‚</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šè®¿é—®åœ¨ ViewModelProvider çº§åˆ«åŒæ­¥ã€‚</li>
</ol>
<h2 data-id="heading-5">ViewModelProviderï¼šç¼–æ’å±‚</h2>
<p><code>ViewModelProvider</code> æ˜¯è·å– ViewModel å®ä¾‹çš„ä¸»è¦ APIã€‚å®ƒè´Ÿè´£ç¼–æ’ storeã€factory å’Œåˆ›å»º extras ä¹‹é—´çš„äº¤äº’ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewModelProvider</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">constructor</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> impl: ViewModelProviderImpl) {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">constructor</span>(
        store: ViewModelStore,
        factory: Factory,
        defaultCreationExtras: CreationExtras = CreationExtras.Empty,
    ) : <span class="hljs-keyword">this</span>(ViewModelProviderImpl(store, factory, defaultCreationExtras))

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">constructor</span>(
        owner: ViewModelStoreOwner
    ) : <span class="hljs-keyword">this</span>(
        store = owner.viewModelStore,
        factory = ViewModelProviders.getDefaultFactory(owner),
        defaultCreationExtras = ViewModelProviders.getDefaultCreationExtras(owner),
    )

    <span class="hljs-meta">@MainThread</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">get</span><span class="hljs-params">(modelClass: <span class="hljs-type">KClass</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: T =
        impl.getViewModel(modelClass)

    <span class="hljs-meta">@MainThread</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">get</span><span class="hljs-params">(key: <span class="hljs-type">String</span>, modelClass: <span class="hljs-type">KClass</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: T =
        impl.getViewModel(modelClass, key)
}
</code></pre>
<h3 data-id="heading-6">å¤šå¹³å°æŠ½è±¡</h3>
<p>è¯·æ³¨æ„ <code>ViewModelProviderImpl</code> å§”æ‰˜ã€‚ViewModel åº“æ˜¯ä¸€ä¸ª Kotlin å¤šå¹³å°åº“ï¼Œæ”¯æŒ JVMã€Androidã€iOS å’Œå…¶ä»–å¹³å°ã€‚Kotlin å¤šå¹³å°ç›®å‰è¿˜ä¸æ”¯æŒå¸¦æœ‰é»˜è®¤å®ç°çš„ expect ç±»ï¼Œå› æ­¤é€šç”¨é€»è¾‘è¢«æå–åˆ°å†…éƒ¨å®ç°ç±»ä¸­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewModelProviderImpl</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> store: ViewModelStore,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> factory: ViewModelProvider.Factory,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> defaultExtras: CreationExtras,
) {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> lock = SynchronizedObject()

    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
    <span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">getViewModel</span><span class="hljs-params">(
        modelClass: <span class="hljs-type">KClass</span>&lt;<span class="hljs-type">T</span>&gt;,
        key: <span class="hljs-type">String</span> = ViewModelProviders.getDefaultKey(modelClass)</span></span>,
    ): T {
        <span class="hljs-keyword">return</span> synchronized(lock) {
            <span class="hljs-keyword">val</span> viewModel = store[key]
            <span class="hljs-keyword">if</span> (modelClass.isInstance(viewModel)) {
                <span class="hljs-keyword">if</span> (factory <span class="hljs-keyword">is</span> ViewModelProvider.OnRequeryFactory) {
                    factory.onRequery(viewModel!!)
                }
                <span class="hljs-keyword">return</span><span class="hljs-symbol">@synchronized</span> viewModel <span class="hljs-keyword">as</span> T
            }

            <span class="hljs-keyword">val</span> modelExtras = MutableCreationExtras(defaultExtras)
            modelExtras[ViewModelProvider.VIEW_MODEL_KEY] = key

            <span class="hljs-keyword">return</span><span class="hljs-symbol">@synchronized</span> createViewModel(factory, modelClass, modelExtras).also { vm -&gt;
                store.put(key, vm)
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-7">è·å–æˆ–åˆ›å»ºæ¨¡å¼</h3>
<p><code>getViewModel</code> æ–¹æ³•å®ç°äº†ç»å…¸çš„è·å–æˆ–åˆ›å»ºæ¨¡å¼ï¼š</p>
<ol>
<li><strong>ç”Ÿæˆé”®</strong>ï¼šé»˜è®¤é”®åŸºäºç±»çš„è§„èŒƒåç§°ã€‚</li>
<li><strong>æ£€æŸ¥ç¼“å­˜</strong>ï¼šé€šè¿‡é”®æŸ¥æ‰¾å·²å­˜åœ¨çš„ ViewModelã€‚</li>
<li><strong>ç±»å‹æ£€æŸ¥</strong>ï¼šéªŒè¯ç¼“å­˜å®ä¾‹çš„ç±»å‹æ˜¯å¦æ­£ç¡®ã€‚</li>
<li><strong>è¿”å›ç¼“å­˜</strong>ï¼šå¦‚æœæœ‰æ•ˆï¼Œåˆ™è¿”å›ç¼“å­˜çš„å®ä¾‹ã€‚</li>
<li><strong>åˆ›å»ºæ–°å®ä¾‹</strong>ï¼šå¦‚æœæœªæ‰¾åˆ°æˆ–ç±»å‹é”™è¯¯ï¼Œåˆ™é€šè¿‡å·¥å‚æ¨¡å¼åˆ›å»ºæ–°å®ä¾‹ã€‚</li>
<li><strong>å­˜å‚¨</strong>ï¼šå°†æ–°å®ä¾‹æ”¾å…¥å­˜å‚¨ä¸­ã€‚</li>
</ol>
<h3 data-id="heading-8">ä½¿ç”¨åŒæ­¥è®¿é—®ç¡®ä¿çº¿ç¨‹å®‰å…¨</h3>
<p><code>synchronized(lock)</code> ä»£ç å—ç¡®ä¿çº¿ç¨‹å®‰å…¨è®¿é—®ã€‚è™½ç„¶ ViewModel çš„è®¿é—®é€šå¸¸æ¥è‡ªä¸»çº¿ç¨‹ï¼ˆå¦‚ <code>@MainThread</code> æ‰€ç¤ºï¼‰ï¼Œä½†åŒæ­¥æœºåˆ¶å¯ä»¥é˜²æ­¢åå°çº¿ç¨‹è®¿é—® ViewModel ç­‰æç«¯æƒ…å†µï¼Œå°¤å…¶æ˜¯åœ¨æµ‹è¯•åœºæ™¯æˆ–ä½¿ç”¨ <code>viewModelScope</code> æ—¶ã€‚</p>
<h3 data-id="heading-9">OnRequeryFactory å›è°ƒ</h3>
<p><code>OnRequeryFactory</code> æ˜¯ä¸€ç§ç‰¹æ®Šçš„æœºåˆ¶ï¼Œç”¨äºåœ¨æ£€ç´¢ç¼“å­˜çš„ ViewModel æ—¶æ‰§è¡Œæ“ä½œçš„å·¥å‚ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@RestrictTo(RestrictTo.Scope.LIBRARY_GROUP)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OnRequeryFactory</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-keyword">open</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onRequery</span><span class="hljs-params">(viewModel: <span class="hljs-type">ViewModel</span>)</span></span> {}
}
</code></pre>
<p><code>SavedStateHandle</code> å†…éƒ¨ä½¿ç”¨æ­¤æœºåˆ¶åœ¨é…ç½®æ›´æ”¹åå°† ViewModel ä¸å½“å‰çš„ SavedStateRegistry é‡æ–°è¿æ¥ã€‚å½“ä»ç¼“å­˜ä¸­æ£€ç´¢ ViewModel æ—¶ï¼Œä¼šè°ƒç”¨å·¥å‚çš„ <code>onRequery</code> æ–¹æ³•ï¼Œä»è€Œæ›´æ–°å¯èƒ½å·²æ›´æ”¹çš„å¼•ç”¨ã€‚</p>
<h3 data-id="heading-10">ä»ç±»åç”Ÿæˆé”®</h3>
<p>é»˜è®¤çš„é”®ç”Ÿæˆæœºåˆ¶å¯é˜²æ­¢æ„å¤–å†²çªï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">getDefaultKey</span><span class="hljs-params">(modelClass: <span class="hljs-type">KClass</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: String {
    <span class="hljs-keyword">val</span> canonicalName =
        requireNotNull(modelClass.canonicalName) {
            <span class="hljs-string">"Local and anonymous classes can not be ViewModels"</span>
        }
    <span class="hljs-keyword">return</span> <span class="hljs-string">"<span class="hljs-variable">$VIEW_MODEL_PROVIDER_DEFAULT_KEY</span>:<span class="hljs-variable">$canonicalName</span>"</span>
}
</code></pre>
<p>å‰ç¼€ <code>"androidx.lifecycle.ViewModelProvider.DefaultKey:"</code> å¯ç¡®ä¿é”®ä¸ä¼šä¸ç”¨æˆ·æä¾›çš„è‡ªå®šä¹‰é”®å†²çªã€‚è§„èŒƒåç§°è¦æ±‚ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆæœ¬åœ°ç±»å’ŒåŒ¿åç±»ä¸èƒ½æ˜¯ ViewModelï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰è§„èŒƒåç§°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">localViewModel</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalViewModel</span> : <span class="hljs-type">ViewModel</span>()
    <span class="hljs-keyword">try</span> {
        viewModelProvider[LocalViewModel::<span class="hljs-keyword">class</span>]
        fail(<span class="hljs-string">"Expected `IllegalArgumentException`"</span>)
    } <span class="hljs-keyword">catch</span> (e: IllegalArgumentException) {
        assertThat(e)
            .hasMessageThat()
            .contains(<span class="hljs-string">"Local and anonymous classes can not be ViewModels"</span>)
    }
}
</code></pre>
<h2 data-id="heading-11">å·¥å‚æ¨¡å¼ï¼šçµæ´»å®ä¾‹åŒ–</h2>
<p><code>ViewModelProvider.Factory</code> æ˜¯åˆ›å»º ViewModel å®ä¾‹çš„æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Factory</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">create</span><span class="hljs-params">(modelClass: <span class="hljs-type">Class</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: T =
        ViewModelProviders.unsupportedCreateViewModel()

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">create</span><span class="hljs-params">(modelClass: <span class="hljs-type">Class</span>&lt;<span class="hljs-type">T</span>&gt;, extras: <span class="hljs-type">CreationExtras</span>)</span></span>: T =
        create(modelClass)

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">create</span><span class="hljs-params">(modelClass: <span class="hljs-type">KClass</span>&lt;<span class="hljs-type">T</span>&gt;, extras: <span class="hljs-type">CreationExtras</span>)</span></span>: T =
        create(modelClass.java, extras)
}
</code></pre>
<h3 data-id="heading-12">æ–¹æ³•é‡è½½é“¾</h3>
<p>å·¥å‚æ¥å£æœ‰ä¸‰ä¸ª <code>create</code> æ–¹æ³•å˜ä½“ï¼Œå½¢æˆä¸€ä¸ªé“¾ï¼š</p>
<ol>
<li><code>create(KClass&lt;T&gt;, CreationExtras)</code>ï¼šKotlin ä¼˜å…ˆ APIï¼Œå§”æ‰˜ç»™ Java å˜ä½“</li>
<li><code>create(Class&lt;T&gt;, CreationExtras)</code>ï¼šä¸»è¦å®ç°ç‚¹ï¼Œé»˜è®¤ä¸ºæ— é™„åŠ ç»„ä»¶çš„å˜ä½“</li>
<li><code>create(Class&lt;T&gt;)</code>ï¼šä¼ ç»Ÿ APIï¼Œé»˜è®¤æŠ›å‡ºå¼‚å¸¸</li>
</ol>
<p>æ­¤é“¾åœ¨ä¿æŒå‘åå…¼å®¹æ€§çš„åŒæ—¶ï¼Œä¹Ÿé¼“åŠ±ä½¿ç”¨åŸºäº <code>CreationExtras</code> çš„ç°ä»£æ–¹æ³•ã€‚</p>
<h3 data-id="heading-13">NewInstanceFactoryï¼šåŸºäºåå°„çš„åˆ›å»º</h3>
<p>æœ€ç®€å•çš„å·¥å‚ä½¿ç”¨åå°„æ¥åˆ›å»ºå¸¦æœ‰æ— å‚æ„é€ å‡½æ•°çš„ ViewModelï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NewInstanceFactory</span> : <span class="hljs-type">Factory</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">create</span><span class="hljs-params">(modelClass: <span class="hljs-type">Class</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: T =
        JvmViewModelProviders.createViewModel(modelClass)
}
</code></pre>
<p>JVM å®ç°ä½¿ç”¨åå°„å¹¶è¿›è¡Œäº†ç»†è‡´çš„é”™è¯¯å¤„ç†ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">object</span> JvmViewModelProviders {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">createViewModel</span><span class="hljs-params">(modelClass: <span class="hljs-type">Class</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: T {
        <span class="hljs-keyword">val</span> <span class="hljs-keyword">constructor</span> =
            <span class="hljs-keyword">try</span> {
                modelClass.getDeclaredConstructor()
            } <span class="hljs-keyword">catch</span> (e: NoSuchMethodException) {
                <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Cannot create an instance of <span class="hljs-variable">$modelClass</span>"</span>, e)
            }

        <span class="hljs-comment">// Enforce public constructor for consistent behavior</span>
        <span class="hljs-keyword">if</span> (!Modifier.isPublic(<span class="hljs-keyword">constructor</span>.modifiers)) {
            <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Cannot create an instance of <span class="hljs-variable">$modelClass</span>"</span>)
        }

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">constructor</span>.newInstance()
        } <span class="hljs-keyword">catch</span> (e: InstantiationException) {
            <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Cannot create an instance of <span class="hljs-variable">$modelClass</span>"</span>, e)
        } <span class="hljs-keyword">catch</span> (e: IllegalAccessException) {
            <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Cannot create an instance of <span class="hljs-variable">$modelClass</span>"</span>, e)
        }
    }
}
</code></pre>
<p>å…¬å…±ä¿®é¥°ç¬¦æ£€æŸ¥å¯¹äºæµ‹è¯•ä¸€è‡´æ€§è‡³å…³é‡è¦ã€‚åœ¨æ’æ¡©æµ‹è¯•ä¸­ï¼ŒR8 å¯èƒ½ä¼šç§»é™¤è®¿é—®ä¿®é¥°ç¬¦ï¼Œä½¿ç§æœ‰æ„é€ å‡½æ•°å¯è®¿é—®ã€‚JVM æµ‹è¯•ä¸¥æ ¼æ‰§è¡Œè®¿é—®é™åˆ¶ã€‚æ­¤æ˜¾å¼æ£€æŸ¥å¯ç¡®ä¿è·¨æµ‹è¯•ç¯å¢ƒçš„è¡Œä¸ºä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-14">AndroidViewModelFactoryï¼šåº”ç”¨æ„ŸçŸ¥åˆ›å»º</h3>
<p><code>AndroidViewModelFactory</code> ç»§æ‰¿è‡ª <code>NewInstanceFactory</code> ä»¥æ”¯æŒ <code>AndroidViewModel</code>ï¼Œåè€…éœ€è¦ä¸€ä¸ª <code>Application</code> å‚æ•°ã€‚è¯¥å·¥å‚åœ¨ä¿æŒå‘åå…¼å®¹æ€§çš„åŒæ—¶ï¼Œä¹Ÿé‡‡ç”¨äº†ç°ä»£çš„ <code>CreationExtras</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AndroidViewModelFactory</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> application: Application?,
    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNUSED_PARAMETER"</span>)</span> unused: <span class="hljs-built_in">Int</span>,
) : NewInstanceFactory() {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">create</span><span class="hljs-params">(modelClass: <span class="hljs-type">Class</span>&lt;<span class="hljs-type">T</span>&gt;, extras: <span class="hljs-type">CreationExtras</span>)</span></span>: T {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (application != <span class="hljs-literal">null</span>) {
            create(modelClass)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">val</span> application = extras[APPLICATION_KEY]
            <span class="hljs-keyword">if</span> (application != <span class="hljs-literal">null</span>) {
                create(modelClass, application)
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (AndroidViewModel::<span class="hljs-keyword">class</span>.java.isAssignableFrom(modelClass)) {
                    <span class="hljs-keyword">throw</span> IllegalArgumentException(
                        <span class="hljs-string">"CreationExtras must have an application by `APPLICATION_KEY`"</span>
                    )
                }
                <span class="hljs-keyword">super</span>.create(modelClass)
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">create</span><span class="hljs-params">(modelClass: <span class="hljs-type">Class</span>&lt;<span class="hljs-type">T</span>&gt;, app: <span class="hljs-type">Application</span>)</span></span>: T {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (AndroidViewModel::<span class="hljs-keyword">class</span>.java.isAssignableFrom(modelClass)) {
            <span class="hljs-keyword">try</span> {
                modelClass.getConstructor(Application::<span class="hljs-keyword">class</span>.java).newInstance(app)
            } <span class="hljs-keyword">catch</span> (e: NoSuchMethodException) {
                <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Cannot create an instance of <span class="hljs-variable">$modelClass</span>"</span>, e)
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">super</span>.create(modelClass)
    }
}
</code></pre>
<p>è¯¥å·¥å‚å®ç°äº†çº§è”è§£æç­–ç•¥ï¼šé¦–å…ˆæ£€æŸ¥æ˜¯å¦å°† <code>Application</code> ä¼ é€’ç»™äº†æ„é€ å‡½æ•°ï¼ˆä¼ ç»Ÿæ–¹æ³•ï¼‰ï¼Œç„¶åé€šè¿‡ <code>APPLICATION_KEY</code> åœ¨ <code>CreationExtras</code> ä¸­æŸ¥æ‰¾ï¼ˆç°ä»£æ— çŠ¶æ€æ–¹æ³•ï¼‰ï¼Œæœ€åå¯¹äºå¸¸è§„ ViewModel å›é€€åˆ° <code>NewInstanceFactory</code>ï¼Œæˆ–è€…å¦‚æœ <code>AndroidViewModel</code> æ²¡æœ‰å¯ç”¨çš„ <code>Application</code>ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>ç§æœ‰æ„é€ å‡½æ•°ä¸­çš„ <code>unused: Int</code> å‚æ•°æ˜¯ä¸€ä¸ªå·§å¦™çš„æŠ€å·§ï¼Œç”¨äºåŒºåˆ†é‡è½½æ„é€ å‡½æ•°ï¼Œå› ä¸ºå¦‚æœä½¿ç”¨ <code>null</code> è°ƒç”¨ <code>constructor()</code>ï¼Œç¼–è¯‘å™¨å°†æ— æ³•åŒºåˆ† <code>constructor(application: Application?)</code>ã€‚</p>
<p>å®ä¾‹åŒ–ä½¿ç”¨äº†åå°„ï¼ˆ<code>modelClass.getConstructor(Application::class.java).newInstance(app)</code>ï¼‰ï¼Œè¿™æ„å‘³ç€ä½ çš„ <code>AndroidViewModel</code> å­ç±»å¿…é¡»æœ‰ä¸€ä¸ªæ¥å—ä¸”ä»…æ¥å—ä¸€ä¸ª <code>Application</code> å‚æ•°çš„æ„é€ å‡½æ•°ã€‚å¯¹äºå…¶ä»–ä¾èµ–é¡¹ï¼Œä½ éœ€è¦è‡ªå®šä¹‰å·¥å‚æˆ–ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œä¾‹å¦‚ Hiltã€‚</p>
<h3 data-id="heading-15">InitializerViewModelFactoryï¼šåŸºäº Lambda çš„åˆ›å»º</h3>
<p>å¯¹äºå…·æœ‰è‡ªå®šä¹‰ä¾èµ–é¡¹çš„ ViewModelï¼Œ<code>InitializerViewModelFactory</code> æä¾›äº†ä¸€ç§åŸºäº DSL çš„æ–¹æ³•ï¼Œå¯ä»¥å‡å°‘æ ·æ¿ä»£ç ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> factory = viewModelFactory {
    initializer { MyViewModel(<span class="hljs-keyword">get</span>(MY_KEY)) }
    initializer { AnotherViewModel(<span class="hljs-keyword">get</span>(ANOTHER_KEY)) }
}
</code></pre>
<p>è¯¥ DSL ç”±ä¸€ä¸ªæ„å»ºå™¨ç±»é©±åŠ¨ï¼Œè¯¥æ„å»ºå™¨ç±»æ”¶é›†åˆå§‹åŒ– Lambda è¡¨è¾¾å¼ï¼Œå…¶ä¸­æ¯ä¸ªåˆå§‹åŒ–å™¨å°†ä¸€ä¸ª <code>KClass</code> ä¸å…¶åˆ›å»º Lambda è¡¨è¾¾å¼é…å¯¹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@ViewModelFactoryDsl</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InitializerViewModelFactoryBuilder</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">constructor</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> initializers = mutableMapOf&lt;KClass&lt;*&gt;, ViewModelInitializer&lt;*&gt;&gt;()

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">addInitializer</span><span class="hljs-params">(
        clazz: <span class="hljs-type">KClass</span>&lt;<span class="hljs-type">T</span>&gt;,
        initializer: <span class="hljs-type">CreationExtras</span>.() -&gt; <span class="hljs-type">T</span>,
    )</span></span> {
        require(clazz !<span class="hljs-keyword">in</span> initializers) {
            <span class="hljs-string">"A `initializer` with the same `clazz` has already been added: <span class="hljs-subst">${clazz.canonicalName}</span>."</span>
        }
        initializers[clazz] = ViewModelInitializer(clazz, initializer)
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">build</span><span class="hljs-params">()</span></span>: ViewModelProvider.Factory =
        ViewModelProviders.createInitializerFactory(initializers.values)
}
</code></pre>
<p><code>@ViewModelFactoryDsl</code> æ³¨è§£æ˜¯ä¸€ä¸ª DSL æ ‡è®°ï¼Œå¯é˜²æ­¢åµŒå¥—çš„æ„å»ºå™¨ä½œç”¨åŸŸæ„å¤–è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„æ–¹æ³•ã€‚åˆå§‹åŒ– Lambda è¡¨è¾¾å¼æ¥æ”¶ <code>CreationExtras</code> ä½œä¸ºå…¶æ¥æ”¶å™¨ï¼Œå…è®¸é€šè¿‡ <code>get()</code> ç›´æ¥è®¿é—®é¢å¤–å†…å®¹ã€‚</p>
<p>åœ¨åˆ›å»ºæ—¶ï¼Œå·¥å‚ä¼šé€šè¿‡åˆå§‹åŒ–å™¨è¿›è¡Œçº¿æ€§æœç´¢ï¼Œä»¥æ‰¾åˆ°åŒ¹é…çš„ç±»ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;VM : ViewModel&gt;</span> <span class="hljs-title">createViewModelFromInitializers</span><span class="hljs-params">(
    modelClass: <span class="hljs-type">KClass</span>&lt;<span class="hljs-type">VM</span>&gt;,
    extras: <span class="hljs-type">CreationExtras</span>,
    <span class="hljs-keyword">vararg</span> initializers: <span class="hljs-type">ViewModelInitializer</span>&lt;*&gt;,
)</span></span>: VM {
    <span class="hljs-keyword">val</span> viewModel =
        initializers.firstOrNull { it.clazz == modelClass }?.initializer?.invoke(extras) <span class="hljs-keyword">as</span> VM?
    <span class="hljs-keyword">return</span> requireNotNull(viewModel) {
        <span class="hljs-string">"No initializer set for given class <span class="hljs-subst">${modelClass.canonicalName}</span>"</span>
    }
}
</code></pre>
<p>çº¿æ€§æœç´¢æ˜¯å¯ä»¥æ¥å—çš„ï¼Œå› ä¸ºæ¯ä¸ªå·¥å‚åˆ›å»ºçš„ ViewModel æ•°é‡é€šå¸¸å¾ˆå°‘ï¼ˆ1-5 ä¸ªï¼‰ï¼Œè€Œä¸” ViewModel çš„åˆ›å»ºé¢‘ç‡å¾ˆä½ï¼ˆæ¯ä¸ªç”Ÿå‘½å‘¨æœŸä¸€æ¬¡ï¼‰ã€‚</p>
<h2 data-id="heading-16">CreationExtrasï¼šæ— çŠ¶æ€å·¥å‚é…ç½®</h2>
<p><code>CreationExtras</code> æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨çš„é”®å€¼å®¹å™¨ï¼Œç”¨äºåœ¨ä¸ä½¿å·¥å‚æˆä¸ºæœ‰çŠ¶æ€çš„æƒ…å†µä¸‹å‘å…¶ä¼ é€’é…ç½®ã€‚å·¥å‚ä¸å†é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥æ¥æŒæœ‰ä¾èµ–é¡¹ï¼Œè€Œæ˜¯åœ¨åˆ›å»ºæ—¶ä¼ é€’ä¾èµ–é¡¹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreationExtras</span> <span class="hljs-keyword">internal</span> <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">internal</span> <span class="hljs-keyword">val</span> extras: MutableMap&lt;Key&lt;*&gt;, Any?&gt; = mutableMapOf()

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Key</span>&lt;<span class="hljs-type">T</span>&gt;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">get</span><span class="hljs-params">(key: <span class="hljs-type">Key</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: T?

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">object</span> Empty : CreationExtras() {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">get</span><span class="hljs-params">(key: <span class="hljs-type">Key</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: T? = <span class="hljs-literal">null</span>
    }
}
</code></pre>
<h3 data-id="heading-17">ç±»å‹å®‰å…¨çš„é”®</h3>
<p>æ¯ä¸ªé”®éƒ½ç”±å…¶å…³è”çš„å€¼ç±»å‹å‚æ•°åŒ–ï¼Œä»è€Œæä¾›ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨ã€‚å½“ä½ ä½¿ç”¨ <code>extras[APPLICATION_KEY]</code> è·å–å€¼æ—¶ï¼Œè¿”å›ç±»å‹ä¼šè‡ªåŠ¨ä¸º <code>Application?</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> APPLICATION_KEY: Key&lt;Application&gt; = CreationExtras.Companion.Key()
<span class="hljs-keyword">val</span> VIEW_MODEL_KEY: Key&lt;String&gt; = CreationExtras.Companion.Key()
</code></pre>
<p>é”®çš„åˆ›å»ºä½¿ç”¨äº†ä¸€ä¸ªå†…è”å‡½æ•°ï¼Œè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªå®ç° <code>Key</code> æ¥å£çš„æ–°åŒ¿åå¯¹è±¡ã€‚ç”±äºæ¯ä¸ªé”®éƒ½æ˜¯ä¸€ä¸ªå”¯ä¸€çš„å¯¹è±¡å®ä¾‹ï¼Œå› æ­¤é”®ä¹‹é—´é€šè¿‡æ ‡è¯†ï¼ˆ<code>===</code>ï¼‰è¿›è¡Œæ¯”è¾ƒï¼Œå³ä½¿ä¸¤ä¸ªé”®å…·æœ‰ç›¸åŒçš„ç±»å‹å‚æ•°ï¼Œä¹Ÿä¸ä¼šå‘ç”Ÿæ„å¤–å†²çªï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@JvmStatic</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T&gt;</span> <span class="hljs-title">Key</span><span class="hljs-params">()</span></span>: Key&lt;T&gt; = <span class="hljs-keyword">object</span> : Key&lt;T&gt; {}
</code></pre>
<h3 data-id="heading-18">ç”¨äºä¿®æ”¹çš„ MutableCreationExtras</h3>
<p>åŸºç±» <code>CreationExtras</code> æ˜¯åªè¯»çš„ï¼Œè€Œ <code>MutableCreationExtras</code> å…è®¸æ·»åŠ æ¡ç›®ã€‚è¿™ç§åˆ†ç¦»éµå¾ª Kotlin çš„é›†åˆè®¾è®¡ç†å¿µï¼ˆä¾‹å¦‚ <code>List</code> ä¸ <code>MutableList</code>ï¼‰ï¼Œé˜²æ­¢å·¥å‚æ„å¤–ä¿®æ”¹å…±äº«çš„ extrasï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MutableCreationExtras</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">constructor</span>(initialExtras: CreationExtras = Empty) : CreationExtras() {

    <span class="hljs-keyword">init</span> {
        extras += initialExtras.extras
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">set</span><span class="hljs-params">(key: <span class="hljs-type">Key</span>&lt;<span class="hljs-type">T</span>&gt;, t: <span class="hljs-type">T</span>)</span></span> {
        extras[key] = t
    }

    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">get</span><span class="hljs-params">(key: <span class="hljs-type">Key</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: T? = extras[key] <span class="hljs-keyword">as</span> T?
}
</code></pre>
<h3 data-id="heading-19">ä¸ ViewModelProvider é›†æˆ</h3>
<p><code>ViewModelProvider</code> ä¼šåœ¨è°ƒç”¨å·¥å‚ä¹‹å‰è‡ªåŠ¨å°† ViewModel çš„é”®æ·»åŠ åˆ° extras ä¸­ï¼Œè¿™å¯¹äºåƒ <code>SavedStateHandle</code> è¿™æ ·éœ€è¦é”®æ¥æ­£ç¡®é™å®šæŒä¹…åŒ–èŒƒå›´çš„åŠŸèƒ½è‡³å…³é‡è¦ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> modelExtras = MutableCreationExtras(defaultExtras)
modelExtras[ViewModelProvider.VIEW_MODEL_KEY] = key

<span class="hljs-keyword">return</span><span class="hljs-symbol">@synchronized</span> createViewModel(factory, modelClass, modelExtras)
</code></pre>
<h3 data-id="heading-20">HasDefaultViewModelProviderFactory</h3>
<p><code>ViewModelStoreOwner</code> çš„å®ç°å¯ä»¥é€šè¿‡ <code>HasDefaultViewModelProviderFactory</code> æ¥å£æä¾›é»˜è®¤çš„å·¥å‚å’Œ extrasã€‚ <code>ComponentActivity</code> å’Œ <code>Fragment</code> éƒ½å®ç°äº†æ­¤æ¥å£ï¼Œå¹¶æä¾›äº†æ”¯æŒ <code>SavedStateHandle</code> ä¸”é¢„å…ˆå¡«å……äº† <code>APPLICATION_KEY</code> çš„å·¥å‚ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">HasDefaultViewModelProviderFactory</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> defaultViewModelProviderFactory: ViewModelProvider.Factory

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> defaultViewModelCreationExtras: CreationExtras
        <span class="hljs-keyword">get</span>() = CreationExtras.Empty
}
</code></pre>
<p><code>ComponentActivity</code> å’Œ <code>Fragment</code> éƒ½å®ç°äº†æ­¤æ¥å£ï¼Œå¹¶æä¾›äº†æ”¯æŒ <code>SavedStateHandle</code> å’Œæ­£ç¡®çš„ <code>CreationExtras</code> ä¸”é¢„å…ˆå¡«å……äº† <code>APPLICATION_KEY</code> çš„å·¥å‚ã€‚</p>
<p>ä» <code>ViewModelStoreOwner</code> åˆ›å»º <code>ViewModelProvider</code> æ—¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨ä»¥ä¸‹é»˜è®¤å€¼ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getDefaultFactory</span><span class="hljs-params">(owner: <span class="hljs-type">ViewModelStoreOwner</span>)</span></span>: ViewModelProvider.Factory =
    <span class="hljs-keyword">if</span> (owner <span class="hljs-keyword">is</span> HasDefaultViewModelProviderFactory) {
        owner.defaultViewModelProviderFactory
    } <span class="hljs-keyword">else</span> {
        DefaultViewModelProviderFactory
    }

<span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getDefaultCreationExtras</span><span class="hljs-params">(owner: <span class="hljs-type">ViewModelStoreOwner</span>)</span></span>: CreationExtras =
    <span class="hljs-keyword">if</span> (owner <span class="hljs-keyword">is</span> HasDefaultViewModelProviderFactory) {
        owner.defaultViewModelCreationExtras
    } <span class="hljs-keyword">else</span> {
        CreationExtras.Empty
    }
</code></pre>
<p>è¿™ç§æ¨¡å¼æ”¯æŒæ¸è¿›å¢å¼ºï¼šç®€å•çš„ ViewModel ä½¿ç”¨é»˜è®¤å·¥å‚ï¼Œè€Œå¤æ‚çš„ ViewModel å¯ä»¥é€šè¿‡ extras è·å–ä¸°å¯Œçš„é…ç½®ï¼Œè€Œæ— éœ€æ›´æ”¹è·å– ViewModelProvider çš„æ–¹å¼ã€‚</p>
<h2 data-id="heading-21">ViewModel ç±»ï¼šèµ„æºç®¡ç†</h2>
<p><code>ViewModel</code> ç±»é€šè¿‡ <code>AutoCloseable</code> æ¨¡å¼ç®¡ç†èµ„æºç”Ÿå‘½å‘¨æœŸã€‚<code>expect</code> å…³é”®å­—è¡¨æ˜è¿™æ˜¯ä¸€ä¸ª Kotlin å¤šå¹³å°å£°æ˜ï¼Œæ¯ä¸ªå¹³å°éƒ½æä¾›è‡ªå·±çš„ <code>actual</code> å®ç°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">expect</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewModel</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">constructor</span>()
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">constructor</span>(viewModelScope: CoroutineScope)
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">constructor</span>(<span class="hljs-keyword">vararg</span> closeables: AutoCloseable)
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">constructor</span>(viewModelScope: CoroutineScope, <span class="hljs-keyword">vararg</span> closeables: AutoCloseable)

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">open</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCleared</span><span class="hljs-params">()</span></span>

    <span class="hljs-meta">@MainThread</span> <span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addCloseable</span><span class="hljs-params">(key: <span class="hljs-type">String</span>, closeable: <span class="hljs-type">AutoCloseable</span>)</span></span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">open</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addCloseable</span><span class="hljs-params">(closeable: <span class="hljs-type">AutoCloseable</span>)</span></span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : AutoCloseable&gt;</span> <span class="hljs-title">getCloseable</span><span class="hljs-params">(key: <span class="hljs-type">String</span>)</span></span>: T?
}
</code></pre>
<h3 data-id="heading-22">ViewModelImpl å†…éƒ¨å®ç°</h3>
<p>å®é™…å®ç°å§”æ‰˜ç»™ <code>ViewModelImpl</code>ï¼Œéµå¾ªå¤šå¹³å°æ¨¡å¼ï¼Œå°†é€šç”¨é€»è¾‘æå–åˆ°å†…éƒ¨ç±»ä¸­ã€‚<code>isCleared</code> ä¸Šçš„ <code>@Volatile</code> æ³¨è§£ç¡®ä¿è·¨çº¿ç¨‹å¯è§ï¼Œè¿™å¯¹äºæ¸…é™¤åçš„ä¿æŠ¤æœºåˆ¶è‡³å…³é‡è¦ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewModelImpl</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> lock = SynchronizedObject()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> keyToCloseables = mutableMapOf&lt;String, AutoCloseable&gt;()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> closeables = mutableSetOf&lt;AutoCloseable&gt;()

    <span class="hljs-meta">@Volatile</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isCleared = <span class="hljs-literal">false</span>

    <span class="hljs-keyword">constructor</span>()

    <span class="hljs-keyword">constructor</span>(viewModelScope: CoroutineScope) {
        addCloseable(VIEW_MODEL_SCOPE_KEY, viewModelScope.asCloseable())
    }

    <span class="hljs-keyword">constructor</span>(<span class="hljs-keyword">vararg</span> closeables: AutoCloseable) {
        <span class="hljs-keyword">this</span>.closeables += closeables
    }

    <span class="hljs-keyword">constructor</span>(viewModelScope: CoroutineScope, <span class="hljs-keyword">vararg</span> closeables: AutoCloseable) {
        addCloseable(VIEW_MODEL_SCOPE_KEY, viewModelScope.asCloseable())
        <span class="hljs-keyword">this</span>.closeables += closeables
    }
}
</code></pre>
<h3 data-id="heading-23">ä¸¤å±‚å¯å…³é—­å­˜å‚¨</h3>
<p>è¯¥å®ç°ç»´æŠ¤ä¸¤ä¸ªé›†åˆï¼š<code>keyToCloseables</code> ç”¨äºæ³¨å†Œåéœ€è¦æ£€ç´¢çš„èµ„æºï¼ˆä¾‹å¦‚ <code>viewModelScope</code>ï¼‰ï¼Œä»¥åŠ <code>closeables</code> ç”¨äºå³ç”¨å³å¼ƒçš„æ¸…ç†ã€‚ä½¿ç”¨ <code>Set</code> æ¥ç®¡ç†åŒ¿åå¯å…³é—­èµ„æºå¯ä»¥é˜²æ­¢é‡å¤æ³¨å†Œå¯¼è‡´åŒé‡å…³é—­ã€‚</p>
<h3 data-id="heading-24">æ¸…é™¤é¡ºåº</h3>
<p>å½“ ViewModel è¢«æ¸…é™¤æ—¶ï¼Œèµ„æºä¼šæŒ‰ç…§ç‰¹å®šçš„é¡ºåºè¿›è¡Œæ¸…ç†ã€‚<code>isCleared = true</code> æ ‡å¿—ä¼šåœ¨åŒæ­¥ä»£ç å—ä¹‹å‰è®¾ç½®ï¼Œä»¥é˜²æ­¢å¹¶å‘çš„ <code>addCloseable</code> è°ƒç”¨æ·»åŠ ä¼šè¢«é—æ¼çš„èµ„æºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@MainThread</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">if</span> (isCleared) <span class="hljs-keyword">return</span>

    isCleared = <span class="hljs-literal">true</span>
    synchronized(lock) {
        <span class="hljs-keyword">for</span> (closeable <span class="hljs-keyword">in</span> keyToCloseables.values) {
            closeWithRuntimeException(closeable)
        }
        <span class="hljs-keyword">for</span> (closeable <span class="hljs-keyword">in</span> closeables) {
            closeWithRuntimeException(closeable)
        }
        <span class="hljs-comment">// Clear only resources without keys to prevent accidental recreation</span>
        closeables.clear()
    }
}
</code></pre>
<p>åŒ¿å <code>closeables</code> é›†åˆä¼šè¢«æ¸…é™¤ï¼Œä½† <code>keyToCloseables</code> ä¼šè¢«æœ‰æ„ä¿ç•™ã€‚è¿™å¯ä»¥é˜²æ­¢åœ¨æ¸…é™¤åä»£ç è®¿é—® <code>viewModelScope</code> ç­‰èµ„æºæ—¶æ„å¤–åœ°é‡æ–°åˆ›å»ºå®ƒä»¬ã€‚</p>
<h3 data-id="heading-25">æ¸…é™¤åä¿æŠ¤</h3>
<p>åœ¨æ¸…é™¤ ViewModel åæ·»åŠ å¯å…³é—­å¯¹è±¡ä¼šç«‹å³å°†å…¶å…³é—­ï¼Œä»è€Œé˜²æ­¢åœ¨åç¨‹ä»åœ¨è¿è¡Œæ—¶ ViewModel è¢«æ¸…é™¤æ—¶å‡ºç°èµ„æºæ³„æ¼ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addCloseable</span><span class="hljs-params">(key: <span class="hljs-type">String</span>, closeable: <span class="hljs-type">AutoCloseable</span>)</span></span> {
    <span class="hljs-keyword">if</span> (isCleared) {
        closeWithRuntimeException(closeable)
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">val</span> oldCloseable = synchronized(lock) { keyToCloseables.put(key, closeable) }
    closeWithRuntimeException(oldCloseable)
}
</code></pre>
<p>æ­¤å¤–ï¼Œè¯·æ³¨æ„ï¼Œæ·»åŠ é”®å€¼å¯å…³é—­å¯¹è±¡æ—¶ï¼Œä»»ä½•å…·æœ‰ç›¸åŒé”®å€¼çš„ç°æœ‰å¯å…³é—­å¯¹è±¡éƒ½ä¼šè‡ªåŠ¨å…³é—­ï¼Œä»è€Œæ”¯æŒæ›¿æ¢æ¨¡å¼ã€‚</p>
<h3 data-id="heading-26">ç”¨äºæ¨¡æ‹Ÿçš„å¯ç©ºå®ç°</h3>
<p>JVM å®ç°æä¾›äº†ä¸€ä¸ªå¯ç©ºçš„ <code>impl</code> å¯¹è±¡ï¼Œä»¥æ”¯æŒæ¨¡æ‹Ÿæ¡†æ¶ã€‚å½“ä½ æ¨¡æ‹Ÿ ViewModel æ—¶ï¼Œæ¨¡æ‹Ÿå¯¹è±¡ä¸ä¼šè°ƒç”¨çœŸæ­£çš„æ„é€ å‡½æ•°ï¼Œå› æ­¤ <code>impl</code> å¯¹è±¡æ°¸è¿œä¸ä¼šè¢«åˆå§‹åŒ–ã€‚å¦‚æœæ²¡æœ‰å¯ç©ºç±»å‹å’Œå®‰å…¨è°ƒç”¨ï¼ˆ<code>impl?.clear()</code>ï¼‰ï¼Œæµ‹è¯•ä¼šå›  <code>NullPointerException</code> è€Œå´©æºƒï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewModel</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> impl: ViewModelImpl?

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-keyword">constructor</span>() {
        impl = ViewModelImpl()
    }

    <span class="hljs-meta">@MainThread</span>
    <span class="hljs-keyword">internal</span> <span class="hljs-keyword">actual</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span> {
        impl?.clear()
        onCleared()
    }
}
</code></pre>
<h2 data-id="heading-27">viewModelScopeï¼šåç¨‹é›†æˆ</h2>
<p><code>viewModelScope</code> æ‰©å±•å±æ€§æä¾›äº†ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥çš„ <code>CoroutineScope</code>ï¼Œå½“ ViewModel è¢«æ¸…é™¤æ—¶ï¼Œè¯¥ä½œç”¨åŸŸä¼šè‡ªåŠ¨å–æ¶ˆï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> ViewModel.viewModelScope: CoroutineScope
    <span class="hljs-keyword">get</span>() =
        synchronized(VIEW_MODEL_SCOPE_LOCK) {
            getCloseable(VIEW_MODEL_SCOPE_KEY)
                ?: createViewModelScope().also { scope -&gt;
                    addCloseable(VIEW_MODEL_SCOPE_KEY, scope)
                }
        }
</code></pre>
<h3 data-id="heading-28">ä½¿ç”¨é”®æ§å­˜å‚¨çš„å»¶è¿Ÿåˆ›å»º</h3>
<p>ä½œç”¨åŸŸåœ¨é¦–æ¬¡è®¿é—®æ—¶å»¶è¿Ÿåˆ›å»ºï¼Œå¹¶ä½¿ç”¨é”®æ§å¯å…³é—­æœºåˆ¶è¿›è¡Œå­˜å‚¨ã€‚é”®åæ•…æ„è®¾ç½®å¾—éå¸¸è¯¦ç»†ï¼Œä»¥é¿å…ä¸ç”¨æˆ·è‡ªå®šä¹‰çš„é”®å‘ç”Ÿå†²çªï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> VIEW_MODEL_SCOPE_KEY =
    <span class="hljs-string">"androidx.lifecycle.viewmodel.internal.ViewModelCoroutineScope.JOB_KEY"</span>
</code></pre>
<h3 data-id="heading-29">CloseableCoroutineScope</h3>
<p>åç¨‹å’Œå¯å…³é—­ç³»ç»Ÿä¹‹é—´çš„æ¡¥æ¢æ˜¯ <code>CloseableCoroutineScope</code>ï¼Œå®ƒåŒæ—¶å®ç°äº† <code>CoroutineScope</code> å’Œ <code>AutoCloseable</code> æ¥å£ã€‚åœ¨ ViewModel æ¸…ç©ºæœŸé—´è°ƒç”¨ <code>close()</code> æ—¶ï¼Œæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„åç¨‹éƒ½ä¼šè¢«å–æ¶ˆï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CloseableCoroutineScope</span>(<span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> coroutineContext: CoroutineContext) :
    AutoCloseable, CoroutineScope {

    <span class="hljs-keyword">constructor</span>(coroutineScope: CoroutineScope) : <span class="hljs-keyword">this</span>(coroutineScope.coroutineContext)

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">close</span><span class="hljs-params">()</span></span> = coroutineContext.cancel()
}
</code></pre>
<h3 data-id="heading-30">å¹³å°æ„ŸçŸ¥è°ƒåº¦å™¨é€‰æ‹©</h3>
<p>ä½œä¸º Kotlin å¤šå¹³å°åº“ï¼ŒViewModel åœ¨æ²¡æœ‰ä¸»çº¿ç¨‹æ¦‚å¿µçš„å¹³å°ä¸Šä¹Ÿèƒ½å·¥ä½œï¼Œå› ä¸ºå®ƒä¼šå›é€€åˆ° <code>EmptyCoroutineContext</code>ã€‚è¯·æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ <code>Dispatchers.Main.immediate</code> è€Œä¸æ˜¯ <code>Dispatchers.Main</code>ï¼Œè¿™æ ·å¯ä»¥é¿å…åœ¨å·²ç»åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œæ—¶è¿›è¡Œä¸å¿…è¦çš„é‡æ–°è°ƒåº¦ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createViewModelScope</span><span class="hljs-params">()</span></span>: CloseableCoroutineScope {
    <span class="hljs-keyword">val</span> dispatcher =
        <span class="hljs-keyword">try</span> {
            Dispatchers.Main.immediate
        } <span class="hljs-keyword">catch</span> (_: NotImplementedError) {
            <span class="hljs-comment">// In Native environments where `Dispatchers.Main` might not exist (e.g., Linux)</span>
            EmptyCoroutineContext
        } <span class="hljs-keyword">catch</span> (_: IllegalStateException) {
            <span class="hljs-comment">// In JVM Desktop environments where `Dispatchers.Main` might not exist (e.g., Swing)</span>
            EmptyCoroutineContext
        }
    <span class="hljs-keyword">return</span> CloseableCoroutineScope(coroutineContext = dispatcher + SupervisorJob())
}
</code></pre>
<h3 data-id="heading-31">SupervisorJob å®ç°å­åç¨‹ç‹¬ç«‹å¤±è´¥</h3>
<p>è¯¥ä½œç”¨åŸŸä½¿ç”¨ <code>SupervisorJob()</code>ï¼Œå…è®¸å­åç¨‹ç‹¬ç«‹å¤±è´¥ã€‚è€Œä½¿ç”¨æ™®é€šçš„ <code>Job</code> æ—¶ï¼Œå¦‚æœä¸€ä¸ªå­åç¨‹å¤±è´¥ï¼Œå®ƒä¼šå–æ¶ˆæ‰€æœ‰åŒçº§åç¨‹ã€‚è¿™ç§è®¾è®¡ç¬¦åˆ UI åº”ç”¨ç¨‹åºçš„é¢„æœŸï¼Œå³å¤±è´¥çš„ç½‘ç»œè¯·æ±‚ä¸åº”è¯¥å–æ¶ˆæ­£åœ¨è¿›è¡Œçš„æ•°æ®åº“æ“ä½œã€‚</p>
<h2 data-id="heading-32">ViewModelLazyï¼šKotlin å±æ€§å§”æ‰˜</h2>
<p><code>viewModels()</code> å§”æ‰˜ä½¿ç”¨äº† <code>ViewModelLazy</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewModelLazy</span>&lt;<span class="hljs-type">VM : ViewModel</span>&gt;
<span class="hljs-meta">@JvmOverloads</span>
<span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewModelClass: KClass&lt;VM&gt;,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> storeProducer: () -&gt; ViewModelStore,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> factoryProducer: () -&gt; ViewModelProvider.Factory,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> extrasProducer: () -&gt; CreationExtras = { CreationExtras.Empty },
) : Lazy&lt;VM&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cached: VM? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> value: VM
        <span class="hljs-keyword">get</span>() {
            <span class="hljs-keyword">val</span> viewModel = cached
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (viewModel == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">val</span> store = storeProducer()
                <span class="hljs-keyword">val</span> factory = factoryProducer()
                <span class="hljs-keyword">val</span> extras = extrasProducer()
                ViewModelProvider.create(store, factory, extras).<span class="hljs-keyword">get</span>(viewModelClass).also {
                    cached = it
                }
            } <span class="hljs-keyword">else</span> {
                viewModel
            }
        }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isInitialized</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> = cached != <span class="hljs-literal">null</span>
}
</code></pre>
<h3 data-id="heading-33">åŒé‡ç¼“å­˜æ¶æ„</h3>
<p>æƒ°æ€§å§”æ‰˜ä¼šåœ¨é¦–æ¬¡è®¿é—®åå°† ViewModel å¼•ç”¨ç¼“å­˜åˆ°æœ¬åœ°ã€‚è¿™æ˜¯ä¸€ç§åŒé‡ç¼“å­˜æ¨¡å¼ï¼š</p>
<ol>
<li><strong>ViewModelStore ç¼“å­˜</strong>ï¼šè§„èŒƒç¼“å­˜ï¼Œä¸å—é…ç½®æ›´æ”¹çš„å½±å“ã€‚</li>
<li><strong>ViewModelLazy ç¼“å­˜</strong>ï¼šæœ¬åœ°ç¼“å­˜ï¼Œç”¨äºé¿å…é‡å¤åˆ›å»º ViewModelProviderã€‚</li>
</ol>
<p>æœ¬åœ°ç¼“å­˜æ˜¯ä¸€ç§ä¼˜åŒ–ï¼Œåˆ›å»º <code>ViewModelProvider</code> å¹¶æŸ¥æ‰¾ ViewModel çš„å¼€é”€å¾ˆå°ï¼Œä½†ç¼“å­˜å¯ä»¥é¿å…åç»­è®¿é—®ä¸­å“ªæ€•æ˜¯è¿™ç§å¾®å°çš„å¼€é”€ã€‚</p>
<h3 data-id="heading-34">ç”¨äºå»¶è¿Ÿè®¿é—®çš„ Lambda ç”Ÿäº§è€…</h3>
<p>æ‰€æœ‰ä¸‰ä¸ªç”Ÿäº§è€…ï¼ˆstoreã€factoryã€extrasï¼‰éƒ½æ˜¯ Lambda è¡¨è¾¾å¼ï¼Œå…è®¸å»¶è¿Ÿæ±‚å€¼ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewModel <span class="hljs-keyword">by</span> viewModels { MyViewModelFactory() }
<span class="hljs-comment">// Factory is only created when viewModel is first accessed</span>
</code></pre>
<p>è¿™å¯¹äº Fragment å°¤å…¶é‡è¦ï¼Œå› ä¸ºåœ¨å±æ€§åˆå§‹åŒ–æœŸé—´ Activity å¯èƒ½ä¸å¯ç”¨ã€‚</p>
<h2 data-id="heading-35">Android ç‰¹æœ‰ï¼šAGP ä»£ç è„±ç³–å…¼å®¹æ€§</h2>
<p>Android æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å…¼å®¹å±‚ï¼Œç”¨äºå¤„ç†æ··åˆä½¿ç”¨é’ˆå¯¹ä¸åŒ ViewModel ç‰ˆæœ¬ç¼–è¯‘çš„åº“æ—¶å‡ºç°çš„ AGPï¼ˆAndroid Gradle æ’ä»¶ï¼‰ä»£ç è„±ç³–é—®é¢˜ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">actual</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;VM : ViewModel&gt;</span> <span class="hljs-title">createViewModel</span><span class="hljs-params">(
    factory: <span class="hljs-type">ViewModelProvider</span>.<span class="hljs-type">Factory</span>,
    modelClass: <span class="hljs-type">KClass</span>&lt;<span class="hljs-type">VM</span>&gt;,
    extras: <span class="hljs-type">CreationExtras</span>,
)</span></span>: VM {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
        factory.create(modelClass, extras)
    } <span class="hljs-keyword">catch</span> (e: AbstractMethodError) {
        <span class="hljs-keyword">try</span> {
            factory.create(modelClass.java, extras)
        } <span class="hljs-keyword">catch</span> (e: AbstractMethodError) {
            factory.create(modelClass.java)
        }
    }
}
</code></pre>
<p>è¿™ä¸€ç³»åˆ— try-catch ä»£ç å—ç”¨äºå¤„ç†ä½¿ç”¨æ—§ç‰ˆæœ¬ ViewModel ç¼–è¯‘çš„å·¥å‚ç¼ºå°‘è¾ƒæ–°ç‰ˆæœ¬çš„ <code>create</code> æ–¹æ³•çš„æƒ…å†µã€‚å½“è¿è¡Œæ—¶è°ƒç”¨ç¼–è¯‘åçš„å­—èŠ‚ç ä¸­ä¸å­˜åœ¨çš„æ–¹æ³•æ—¶ï¼Œå°±ä¼šå‡ºç° <code>AbstractMethodError</code> é”™è¯¯ï¼Œè¿™ç§æƒ…å†µé€šå¸¸å‘ç”Ÿåœ¨æ—§å·¥å‚åªæœ‰ <code>create(Class&lt;T&gt;)</code> æ–¹æ³•ï¼Œè€Œè¿è¡Œæ—¶éœ€è¦ <code>create(Class&lt;T&gt;, CreationExtras)</code> æ–¹æ³•æ—¶ã€‚è¿™ç§é˜²å¾¡æ€§çº§è”æœºåˆ¶èƒ½å¤Ÿä¼˜é›…åœ°é™çº§åˆ°æ–¹æ³•å˜ä½“ï¼Œç¡®ä¿ ViewModel åˆ›å»ºåŠŸèƒ½ä¸å—åº“ç‰ˆæœ¬ä¸åŒ¹é…çš„å½±å“ã€‚</p>
<h2 data-id="heading-36">æ€§èƒ½ç‰¹æ€§å’Œè®¾è®¡æƒè¡¡</h2>
<p>ViewModel ç³»ç»Ÿåœ¨è®¾è®¡ä¸Šåšå‡ºäº†ä¸€äº›æƒè¡¡ï¼Œä»¥å¹³è¡¡æ­£ç¡®æ€§ã€çµæ´»æ€§å’Œæ€§èƒ½ã€‚</p>
<h3 data-id="heading-37">åŒæ­¥å¼€é”€</h3>
<p><code>ViewModelProviderImpl</code> å’Œ <code>ViewModelImpl</code> éƒ½ä½¿ç”¨åŒæ­¥å—æ¥å®ç°çº¿ç¨‹å®‰å…¨è®¿é—®ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">synchronized(lock) {
    <span class="hljs-keyword">val</span> viewModel = store[key]
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>ç”±äº ViewModel è®¿é—®é€šå¸¸å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ä¸Šï¼Œä¸´ç•ŒåŒºå¾ˆçŸ­ï¼ˆç®€å•çš„ map æ“ä½œï¼‰ï¼Œå¹¶ä¸”é”äº‰ç”¨å¾ˆå°‘å‘ç”Ÿï¼Œå› æ­¤è¿™ç§åŒæ­¥å¼€é”€éå¸¸å°ã€‚è¯¥è®¾è®¡ä¼˜å…ˆè€ƒè™‘æ­£ç¡®æ€§è€Œéå¾®ä¼˜åŒ–ï¼Œå› ä¸ºç½•è§çš„ç«æ€æ¡ä»¶ä»£ä»·è¿œé«˜äºå‡ ä¹å¯Ÿè§‰ä¸åˆ°çš„åŒæ­¥å¼€é”€ã€‚</p>
<h3 data-id="heading-38">åå°„å¼€é”€</h3>
<p><code>NewInstanceFactory</code> ä½¿ç”¨ Java åå°„æ¥åŠ¨æ€å®ä¾‹åŒ– ViewModel ç±»ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">modelClass.getDeclaredConstructor().newInstance()
</code></pre>
<p>ç”±äºè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥å’ŒåŠ¨æ€æ–¹æ³•è§£æï¼Œåå°„æ¯”ç›´æ¥æ„é€ å‡½æ•°è°ƒç”¨è¦æ…¢ã€‚ä½†æ˜¯ï¼Œè¿™ç§å¼€é”€å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå› ä¸º ViewModel çš„åˆ›å»ºé¢‘ç‡å¾ˆä½ï¼ˆæ¯ä¸ªç”Ÿå‘½å‘¨æœŸä¸€æ¬¡ï¼‰ï¼Œè€Œä¸”æ— éœ€ç¼–è¯‘æ—¶ä¿¡æ¯å³å¯å®ä¾‹åŒ–ä»»ä½• ViewModel å­ç±»çš„çµæ´»æ€§è¿œè¿œè¶…è¿‡äº†è¿™ç‚¹å¾®å°çš„å¼€é”€ã€‚</p>
<h3 data-id="heading-39">åŸºäºæ˜ å°„çš„å­˜å‚¨</h3>
<p>ä½¿ç”¨ <code>MutableMap</code> ä½œä¸º ViewModelStore å¯ä»¥æä¾› O(1) çš„æŸ¥æ‰¾æ—¶é—´ï¼Œä½†æ¸…é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œå› ä¸ºæ¯ä¸ª ViewModel éƒ½å¿…é¡»å•ç‹¬æ¸…é™¤ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">for</span> (vm <span class="hljs-keyword">in</span> map.values) {
        vm.clear()
    }
    map.clear()
}
</code></pre>
<p>ç”±äº ViewModelStore é€šå¸¸åªåŒ…å« 1-5 ä¸ª ViewModelï¼Œå› æ­¤çº¿æ€§æ—¶é—´çš„æ¸…é™¤æ“ä½œå®é™…ä¸Šå¹¶æ— å½±å“ã€‚ä½¿ç”¨æ ‡å‡† HashMap çš„ç®€æ´æ€§ä½¿å¾—ä»£ç æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ï¼Œå¯¹äºè¿™ç§æœ‰é™çš„ç”¨ä¾‹è€Œè¨€ï¼Œå…¶ä»·å€¼è¿œå¤§äºç†è®ºä¸Šçš„ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-40">ç”¨äºæ¨¡æ‹Ÿçš„å¯ç©ºå®ç°</h3>
<p>JVM ViewModel ä¸­çš„å¯ç©º <code>impl</code> ä¼šåœ¨æ¯ä¸ªæ“ä½œä¸­æ·»åŠ ç©ºå€¼æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">impl?.clear()
</code></pre>
<p>è¿™ç§å¾®å°çš„å¼€é”€å¯ä»¥å®ç°æ­£ç¡®çš„æ¨¡æ‹Ÿè¡Œä¸ºã€‚å½“æ¨¡æ‹Ÿæ¡†æ¶åˆ›å»º ViewModel æ¨¡æ‹Ÿå¯¹è±¡æ—¶ï¼Œå®ƒä»¬ä¼šç»•è¿‡çœŸæ­£çš„æ„é€ å‡½æ•°ï¼Œå¯¼è‡´ <code>impl</code> æœªåˆå§‹åŒ–ã€‚å¯ç©ºç±»å‹å¯ä»¥é˜²æ­¢æµ‹è¯•ä¸­å‡ºç° <code>NullPointerException</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªå€¼å¾—çš„æƒè¡¡ã€‚</p>
<h2 data-id="heading-41">å®é™…åº”ç”¨æ¨¡å¼ï¼šç†è§£ ViewModel çš„ä½¿ç”¨</h2>
<p>ç†è§£å…¶å†…éƒ¨æœºåˆ¶æœ‰åŠ©äºä½ åœ¨å®é™…åº”ç”¨ä¸­è¯†åˆ«æ¨¡å¼å’Œåæ¨¡å¼ã€‚</p>
<h3 data-id="heading-42">æ¨¡å¼ 1ï¼šä½œç”¨åŸŸ ViewModel å…±äº«</h3>
<p>å¯ä»¥ä½¿ç”¨ Activity çš„ ViewModelStore è€Œä¸æ˜¯æ¯ä¸ª Fragment è‡ªå·±çš„å­˜å‚¨æ¥åœ¨ Fragment ä¹‹é—´å…±äº« ViewModelï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FragmentA</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> sharedViewModel: SharedViewModel <span class="hljs-keyword">by</span> activityViewModels()
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FragmentB</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> sharedViewModel: SharedViewModel <span class="hljs-keyword">by</span> activityViewModels()
}
</code></pre>
<p>ä¸¤ä¸ª Fragment ä¼šè·å¾—ç›¸åŒçš„ ViewModel å®ä¾‹ï¼Œå› ä¸ºå®ƒä»¬ä½¿ç”¨ç›¸åŒçš„ ViewModelStoreï¼ˆActivity çš„ï¼‰ã€‚è¿™ä½¿å¾—å…„å¼Ÿ Fragment å¯ä»¥é€šè¿‡å…±äº«çŠ¶æ€è¿›è¡Œé€šä¿¡ã€‚å†…éƒ¨æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// activityViewModels() uses:</span>
ViewModelProvider(
    store = requireActivity().viewModelStore,  <span class="hljs-comment">// Same store for both fragments</span>
    factory = ...,
)
</code></pre>
<h3 data-id="heading-43">æ¨¡å¼ 2ï¼šè‡ªå®šä¹‰é”®ç”¨äºå¤šä¸ªå®ä¾‹</h3>
<p>ä½ å¯ä»¥é€šè¿‡æä¾›è‡ªå®šä¹‰é”®æ¥æ‹¥æœ‰åŒä¸€ä¸ª ViewModel ç±»çš„å¤šä¸ªå®ä¾‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> viewModel1: MyViewModel = viewModelProvider[<span class="hljs-string">"user_1"</span>, MyViewModel::<span class="hljs-keyword">class</span>]
<span class="hljs-keyword">val</span> viewModel2: MyViewModel = viewModelProvider[<span class="hljs-string">"user_2"</span>, MyViewModel::<span class="hljs-keyword">class</span>]
</code></pre>
<p>è¯¥é”®åŒ…å«è‡ªå®šä¹‰å­—ç¬¦ä¸²ï¼Œä»è€Œåœ¨ ViewModelStore ä¸­åˆ›å»ºå•ç‹¬çš„ç¼“å­˜æ¡ç›®ã€‚è¿™å¯¹äºåŒæ—¶ç®¡ç†å¤šä¸ªç”¨æˆ·é…ç½®æ–‡ä»¶æˆ–èŠå¤©å¯¹è¯ç­‰åœºæ™¯éå¸¸æœ‰ç”¨ã€‚</p>
<h3 data-id="heading-44">æ¨¡å¼ 3ï¼šä½¿ç”¨ CreationExtras è¿›è¡Œå·¥å‚æ³¨å…¥</h3>
<p>ç°ä»£å·¥å‚æ˜¯æ— çŠ¶æ€çš„ï¼Œåœ¨åˆ›å»ºæ—¶é€šè¿‡ CreationExtras æ¥æ”¶æ‰€æœ‰ä¾èµ–é¡¹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModelFactory</span> : <span class="hljs-type">ViewModelProvider.Factory</span> {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">create</span><span class="hljs-params">(modelClass: <span class="hljs-type">KClass</span>&lt;<span class="hljs-type">T</span>&gt;, extras: <span class="hljs-type">CreationExtras</span>)</span></span>: T {
        <span class="hljs-keyword">val</span> repository = extras[REPOSITORY_KEY]!!
        <span class="hljs-keyword">val</span> userId = extras[USER_ID_KEY]!!
        <span class="hljs-keyword">return</span> MyViewModel(repository, userId) <span class="hljs-keyword">as</span> T
    }
}
</code></pre>
<p>è¿™ä½¿å¾—å·¥å‚å¯ä»¥ä½œä¸ºå•ä¾‹ï¼ŒåŒæ—¶æ¯æ¬¡è°ƒç”¨é…ç½®éƒ½ä¸åŒï¼Œä»è€Œé¿å…ä¸ºæ¯ä¸ªå…·æœ‰ä¸åŒä¾èµ–é¡¹çš„ ViewModel åˆ›å»ºæ–°çš„å·¥å‚å®ä¾‹ã€‚</p>
<h3 data-id="heading-45">åæ¨¡å¼ï¼šåœ¨ ViewModel ä¸­è®¿é—® Context</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Bad: Leaks Activity context</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : ViewModel()

<span class="hljs-comment">// Good: Use Application context via AndroidViewModel</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span>(application: Application) : AndroidViewModel(application)

<span class="hljs-comment">// Better: Don't hold Context at all, pass it to methods</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadData</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span> { ... }
}
</code></pre>
<p>ç¬¬ä¸€ç§æ–¹æ³•å¯èƒ½ä¼šå¯¼è‡´ Activity æ³„æ¼ï¼Œå› ä¸º ViewModel åœ¨æŒæœ‰å·²é”€æ¯ Activity çš„å¼•ç”¨æ—¶ï¼Œé…ç½®æ›´æ”¹ä»ç„¶å­˜åœ¨ã€‚è¯·ä½¿ç”¨ <code>AndroidViewModel</code> æ¥è·å– Application ä¸Šä¸‹æ–‡ï¼Œæˆ–è€…åœ¨éœ€è¦æ—¶å°† Context ä¼ é€’ç»™å„ä¸ªæ–¹æ³•ã€‚</p>
<h3 data-id="heading-46">åæ¨¡å¼ï¼šåœ¨ onCleared ä¸­é˜»å¡</h3>
<p>ä½ çŸ¥é“ <code>onCleared()</code> æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šè°ƒç”¨çš„å—ï¼Ÿè¯¸å¦‚ç½‘ç»œå…³é—­æˆ–æ•°æ®åº“æ¸…ç†ä¹‹ç±»çš„é˜»å¡æ“ä½œåº”è¯¥ä½¿ç”¨åç¨‹çš„ <code>addCloseable</code> æ–¹æ³•å¸è½½åˆ°åå°çº¿ç¨‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Bad: Blocking call in onCleared</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCleared</span><span class="hljs-params">()</span></span> {
    networkClient.shutdown()  <span class="hljs-comment">// May block the main thread until completing the shutdown process!</span>
}

<span class="hljs-comment">// Good: Use addCloseable for managed cleanup</span>
<span class="hljs-keyword">init</span> {
    addCloseable {
        scope.launch { networkClient.shutdown() }
    }
}
</code></pre>
<h2 data-id="heading-47">ç»“è®º</h2>
<p>Jetpack ViewModel çš„å†…éƒ¨æœºåˆ¶å±•ç°äº†ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥çŠ¶æ€ç®¡ç†ç³»ç»Ÿã€‚ViewModelStore é€šè¿‡ä¿ç•™æ˜ å°„æä¾›ç®€å•è€Œæœ‰æ•ˆçš„ç¼“å­˜ï¼Œè€Œ ViewModelProvider åˆ™é€šè¿‡çº¿ç¨‹å®‰å…¨çš„è®¿é—®å’Œçµæ´»çš„å·¥å‚æ”¯æŒæ¥åè°ƒåˆ›å»ºè¿‡ç¨‹ã€‚CreationExtras é€šè¿‡å¤–éƒ¨åŒ–é…ç½®æ¥å®ç°æ— çŠ¶æ€å·¥å‚ï¼Œè€Œ AutoCloseable é›†æˆåˆ™ç¡®ä¿äº†èµ„æºçš„æ­£ç¡®æ¸…ç†ã€‚</p>
<p>å¤šå¹³å°æ¶æ„å°†é€šç”¨é€»è¾‘æå–åˆ°å†…éƒ¨å®ç°ç±»ä¸­ï¼Œä½¿è¯¥åº“èƒ½å¤Ÿæ”¯æŒ JVMã€Androidã€iOS å’Œå…¶ä»–å¹³å°ã€‚viewModelScope é›†æˆé€šè¿‡ closeable æœºåˆ¶æä¾›è‡ªåŠ¨åç¨‹å–æ¶ˆåŠŸèƒ½ï¼Œå¹¶ä¸ºæ²¡æœ‰ä¸»çº¿ç¨‹çš„ç¯å¢ƒæä¾›å¹³å°æ„ŸçŸ¥çš„è°ƒåº¦å™¨é€‰æ‹©ã€‚</p>
<p>å¦‚æœä½ æƒ³æŒæ¡æœ€æ–°çš„æŠ€èƒ½ã€æ–°é—»ã€æŠ€æœ¯æ–‡ç« ã€é¢è¯•é¢˜å’Œå®ç”¨ä»£ç æŠ€å·§ï¼Œè¯·æŸ¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdoveletter%2F" target="_blank" title="https://github.com/doveletter/" ref="nofollow noopener noreferrer">Dove Letter</a>ã€‚æƒ³è¦æ›´æ·±å…¥åœ°äº†è§£é¢è¯•å‡†å¤‡ï¼Œåƒä¸‡ä¸è¦é”™è¿‡ç»ˆæ Android é¢è¯•æŒ‡å—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.android.skydoves.me%2F" target="_blank" title="https://www.android.skydoves.me/" ref="nofollow noopener noreferrer">Manifest Android Interview</a>ã€‚</p>
<blockquote>
<p>æ¬¢è¿æœç´¢å¹¶å…³æ³¨ <em>å…¬ä¼—å·<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fqrcode%3Fscene%3D10000004%26size%3D512%26__biz%3DMzU1MDg0NDczNA%3D%3D%26mid%3D2247484417%26idx%3D1%26sn%3D60c15f0d3c4be75e37748c2472a74102" target="_blank" title="https://mp.weixin.qq.com/mp/qrcode?scene=10000004&amp;size=512&amp;__biz=MzU1MDg0NDczNA==&amp;mid=2247484417&amp;idx=1&amp;sn=60c15f0d3c4be75e37748c2472a74102" ref="nofollow noopener noreferrer">ã€Œç¨€æœ‰çŒ¿è¯‰ã€</a></em> è·å–æ›´å¤šçš„ä¼˜è´¨æ–‡ç« ï¼</p>
<p>ä¿æŠ¤åŸåˆ›ï¼Œè¯·å‹¿è½¬è½½ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025ï¼šä»â€œä»£ç æ¬è¿â€åˆ°â€œæ„å›¾ç¼–ç»‡â€ï¼Œæˆ‘åœ¨ AI æµªæ½®ä¸­æ‰¾å›äº†å¼€å‘çš„â€œçˆ½æ„Ÿâ€]]></title>    <link>https://juejin.cn/post/7587811143110246451</link>    <guid>https://juejin.cn/post/7587811143110246451</guid>    <pubDate>2025-12-26T09:09:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587811143110246451" data-draft-id="7587965908288012298" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025ï¼šä»â€œä»£ç æ¬è¿â€åˆ°â€œæ„å›¾ç¼–ç»‡â€ï¼Œæˆ‘åœ¨ AI æµªæ½®ä¸­æ‰¾å›äº†å¼€å‘çš„â€œçˆ½æ„Ÿâ€"/> <meta itemprop="keywords" content="åç«¯,ç¨‹åºå‘˜,äº§å“"/> <meta itemprop="datePublished" content="2025-12-26T09:09:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/4257747754552599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025ï¼šä»â€œä»£ç æ¬è¿â€åˆ°â€œæ„å›¾ç¼–ç»‡â€ï¼Œæˆ‘åœ¨ AI æµªæ½®ä¸­æ‰¾å›äº†å¼€å‘çš„â€œçˆ½æ„Ÿâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4257747754552599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:09:56.000Z" title="Fri Dec 26 2025 09:09:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å²æœ«å°†è‡³ï¼Œæ˜é‡‘çš„è¿™æ¬¡â€œå›´ç‚‰å¤œè¯â€è®©æˆ‘åœä¸‹äº†æ•²å‡»é”®ç›˜çš„æ‰‹ã€‚å›æœ› 2025 å¹´ï¼Œå¦‚æœç”¨ä¸€ä¸ªè¯æ¥å‹¾å‹’æˆ‘çš„å¹´åº¦è½®å»“ï¼Œé‚£ä¸€å®šä¸æ˜¯â€œæ•ˆç‡â€ï¼Œè€Œæ˜¯ <strong>â€œVibeï¼ˆæ°›å›´/å…±é¸£ï¼‰â€</strong> ã€‚</p>
<p>ä½œä¸ºâ€œèˆ’ä¸€ç¬‘ä¸ç§ƒå¤´â€ï¼Œæˆ‘è¿™ä¸€å¹´çš„æŠ€æœ¯ç”Ÿæ´»ï¼Œå…¶å®æ˜¯ä¸€åœºå…³äºâ€œå¦‚ä½•ä¸è¢«ä»£ç å¼‚åŒ–â€çš„çªå›´ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ Qoder é‡Œçš„â€œå¿ƒæµâ€ï¼šå½“ AI æˆäº†æˆ‘çš„å¤–éª¨éª¼</h2>
<p>å¹´åˆæ—¶ï¼Œæˆ‘ä¹Ÿæ›¾é™·å…¥å¯¹å¤§æ¨¡å‹çš„ç„¦è™‘ï¼šAgent æ¨ªç©ºå‡ºä¸–ï¼Œç¨‹åºå‘˜çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼Ÿä½†ç»è¿‡è¿™ä¸€å¹´ä¸ Qoder ç­‰å·¥å…·çš„æ·±åº¦ç£¨åˆï¼Œæˆ‘æ€»ç»“å‡ºäº†ä¸€å¥—â€œé«˜æ•ˆä½¿ç”¨æ³•åˆ™â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ee7baa70f354888962aeff27fb30f1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344996&amp;x-signature=KdRNxpEbx0EgAFKvDTXtUpoaV5g%3D" alt="image.png" loading="lazy"/></p>
<p><strong>2025 å¹´ï¼Œæˆ‘çš„ Vibe Coding æ—¶åˆ»ï¼Œå¾€å¾€å‘ç”Ÿåœ¨æ·±å¤œã€‚</strong></p>
<p>ä»¥å‰çš„æ·±å¤œï¼Œæˆ‘å¯èƒ½åœ¨ä¸ºæŸä¸ªæ­£åˆ™åŒ¹é…ç„¦å¤´çƒ‚é¢ï¼Œæˆ–è€…åœ¨å†—é•¿çš„å¢åˆ æ”¹æŸ¥ä¸­æ¶ˆè€—ä½“åŠ›ã€‚è€Œç°åœ¨ï¼Œæˆ‘æ›´åƒæ˜¯ä¸€ä¸ª<strong>æ„å›¾çš„ç¼–ç»‡è€…</strong>ã€‚æˆ‘ä¸å†çº ç»“äºè¯­æ³•ç»†èŠ‚ï¼Œè€Œæ˜¯å°†é‡å¿ƒè½¬å‘äº†ç³»ç»Ÿè®¾è®¡å’Œé€»è¾‘æ‹“æ‰‘ã€‚åœ¨ Qoder çš„è¾…åŠ©ä¸‹ï¼Œä»£ç ä¸å†æ˜¯æ²‰é‡çš„è´Ÿæ‹…ï¼Œè€Œæˆäº†éšå¿ƒæ‰€æ¬²çš„è¡¨è¾¾ã€‚é‚£ç§â€œæˆ‘æƒ³ï¼Œå®ƒå³ç°â€çš„å³æ—¶åé¦ˆï¼Œè®©æˆ‘é‡æ–°æ‰¾å›äº†åˆå­¦ç¼–ç¨‹æ—¶é‚£ç§çº¯ç²¹çš„ã€å¤šå·´èƒºåˆ†æ³Œçš„å¿«ä¹ã€‚</p>
<p>è¿™æ­£æ˜¯ Vibe Coding çš„æ ¸å¿ƒï¼š<strong>è®©æŠ€æœ¯é€€å±…å¹•åï¼Œè®©åˆ›é€ è€…çš„ç›´è§‰èµ°å‘å°å‰ã€‚</strong></p>
<h2 data-id="heading-1">äºŒã€ StrLoom çš„åšæŒï¼šåœ¨â€œå¿«â€æ—¶ä»£åšä¸€ç‚¹â€œæ…¢â€å·¥å…·</h2>
<p>2025 å¹´ï¼Œä¹Ÿæ˜¯ <strong>StrLoom</strong> é€æ¸æˆå‹çš„ä¸€å¹´ã€‚</p>
<p>åœ¨ AI å‚¬ç”Ÿäº†æ— æ•°â€œä¸€é”®ç”Ÿæˆâ€çš„æµ®èºäº§å“æ—¶ï¼Œæˆ‘é€‰æ‹©å»åšä¸€ä¸ªå¹²å‡€ã€ç§å¯†ã€é«˜æ•ˆçš„å¼€å‘è€…å·¥å…·é›†ã€‚ä¸ºä»€ä¹ˆè¦è‡ªå·±åšï¼Ÿå› ä¸ºæˆ‘åŒå€¦äº†é‚£äº›å……æ»¡å¹¿å‘Šã€ä¾µçŠ¯éšç§ã€ç”šè‡³éœ€è¦æˆ‘ä¸ºäº†ä¸€ä¸ªå°åŠŸèƒ½å»å…³æ³¨å…¬ä¼—å·çš„å·¥å…·ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58e7d37a26df4b029e7d740842c81c65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344996&amp;x-signature=1doVMLMw%2Br6BPH06jHu2yI0F2oM%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä»·å€¼æºè‡ªéœ€æ±‚ï¼Œå› ä¸ºè¢«éœ€æ±‚ï¼Œæ‰€ä»¥æ‰æœ‰ä»·å€¼ã€‚</strong></p>
<p>åœ¨å¼€å‘ StrLoom çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ€è€ƒå¾—æœ€å¤šçš„æ˜¯ï¼š<strong>å¦‚ä½•è®©å·¥å…·å›å½’å·¥å…·æœ¬èº«ï¼Ÿ</strong> AI ç»™äº†æˆ‘æå¤§çš„å¼€å‘åŠ©åŠ›ï¼Œä½†æˆ‘å¹¶æ²¡æœ‰è®© AI å–§å®¾å¤ºä¸»ã€‚æˆ‘åˆ©ç”¨ AI å¤„ç†ç¹ççš„å…¼å®¹æ€§æµ‹è¯•ï¼Œè€ŒæŠŠå…³äºâ€œç®€æ´â€ä¸â€œç”¨æˆ·å°Šé‡â€çš„çµé­‚ç•™ç»™è‡ªå·±ã€‚StrLoom å°±åƒæˆ‘åœ¨æ•°å­—è’åŸé‡Œç§ä¸‹çš„ä¸€æ£µæ ‘ï¼Œä¸ä¸ºå˜ç°è€Œè‡ƒè‚¿ï¼Œåªä¸ºè§£å†³é‚£ä¸€ç‚¹ç‚¹çœŸåˆ‡çš„ç—›ç‚¹ã€‚è¿™ç§çº¯ç²¹çš„å¼€å‘å¿ƒæ€ï¼Œæ„æˆäº†æˆ‘ 2025 å¹´æœ€ç¨³å›ºçš„â€œå¿ƒç† Vibeâ€ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€ æ‹’ç»å¼‚åŒ–ï¼šæŠ€æœ¯ä¸è¯¥æ˜¯â€œç§ƒå¤´â€çš„ç†ç”±</h2>
<p>ä½œä¸ºä¸€ä¸ªå¯¹é©¬å…‹æ€å¼‚åŒ–ç†è®ºæœ‰æ·±åº¦å…±é¸£çš„äººï¼Œæˆ‘ä¸€ç›´åœ¨è­¦æƒ• AI å¯¹äººçš„åå‘æ”¯é…ã€‚å¦‚æœ AI åªæ˜¯è®©æˆ‘ä»¬äº§å‡ºäº†æ›´å¤šçš„â€œåƒåœ¾ä»£ç â€ï¼Œé‚£å®ƒæœ¬è´¨ä¸Šæ˜¯åœ¨åŠ é€Ÿäººçš„å¼‚åŒ–ã€‚</p>
<p>ä½† 2025 å¹´ç»™æˆ‘çš„ç­”æ¡ˆæ˜¯ä¹è§‚çš„ã€‚é€šè¿‡æ™ºèƒ½ä½“å·¥å…·ï¼Œæˆ‘ä»ç¹é‡çš„å®æ–½æ€§å·¥ä½œä¸­è§£è„±å‡ºæ¥ï¼Œæœ‰äº†æ›´å¤šæ—¶é—´å»æ€è€ƒâ€œä¸ºä»€ä¹ˆè€Œåšâ€ã€‚</p>
<ul>
<li><strong>å…±è¯†æ¥è‡ªäºåˆ†æ­§çš„è¶…è¶Šï¼š</strong> æˆ‘ä¸ AI çš„å¯¹è¯ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨ä¸æ–­å¯¹é½äººç±»æ„å›¾ä¸æœºå™¨æ‰§è¡Œä¹‹é—´çš„åˆ†æ­§ã€‚</li>
<li><strong>æ¨¡å¼æ˜¯ç”Ÿå­˜ä¸å‘å±•çš„è·¯å¾„ï¼š</strong> è¿™ä¸€å¹´ï¼Œæˆ‘å­¦ä¼šäº†åˆ©ç”¨ AI å»ºç«‹è‡ªå·±çš„ä¸ªäººç”Ÿäº§åŠ›é—­ç¯ï¼Œè€Œä¸æ˜¯åœ¨æ— é™çš„åŠ ç­ä¸­é€æ”¯å¥åº·ã€‚</li>
</ul>
<p>â€œèˆ’ä¸€ç¬‘ä¸ç§ƒå¤´â€è¿™ä¸ªåå­—ï¼Œå…¶å®æ˜¯æˆ‘å¯¹è¿™ä¸ªè¡Œä¸šçš„ä¸€ç‚¹å°å°åæŠ—ã€‚2025 å¹´ï¼Œå› ä¸º AI çš„ä»‹å…¥ï¼Œæˆ‘å‘ç°é‚£ç§â€œä¼˜é›…åœ°ç¼–ç¨‹ï¼Œä½“é¢åœ°ç”Ÿæ´»â€çš„ç†æƒ³çŠ¶æ€ï¼Œæ­£åœ¨å˜å¾—è¶Šæ¥è¶Šæ¸…æ™°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87939f37f7af4d70bb1d145fe9a33ce0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767344996&amp;x-signature=O1RHOpc4lJf%2BtGZK2HFd%2F8a4Zbw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">ç»“è¯­ï¼šå±äºæˆ‘çš„æ•°å­—å¹´è½®</h2>
<p>2025 å¹´çš„é’Ÿå£°å³å°†æ•²å“ï¼Œæˆ‘çš„æ•°å­—å¹´è½®é‡Œï¼Œæœ‰ä¸€åŠåˆ»ç€ AI è¾…åŠ©ä¸‹çš„é«˜æ•ˆï¼Œå¦ä¸€åŠåˆ»ç€ç‹¬ç«‹å¼€å‘è€…çš„æ¸…é†’ã€‚</p>
<p>æŠ€æœ¯æµæ·Œè¿›ç”Ÿæ´»ï¼Œä¸åº”è¯¥æ˜¯æŸç§å†·å†°å†°çš„æ›¿ä»£ï¼Œè€Œåº”è¯¥æ˜¯å¯¹ä¸ªäººæ„å¿—çš„æ”¾å¤§ã€‚åœ¨æœªæ¥çš„ 2026ï¼Œæˆ‘å¸Œæœ›ç»§ç»­ä¿æŒè¿™ç§ Vibeï¼š<strong>æ‰‹ä¸­æœ‰æœ€å¿«çš„åˆ€ï¼ˆAIï¼‰ï¼Œå¿ƒä¸­æœ‰æœ€æ¸…æ¾ˆçš„æµï¼ˆåˆè¡·ï¼‰ã€‚</strong></p>
<p>æ„¿æ¯ä¸€ä½æ˜å‹ï¼Œåœ¨ç®—æ³•çš„æ´ªæµä¸­ï¼Œéƒ½èƒ½æ‰¾åˆ°å±äºè‡ªå·±çš„é‚£ä»½â€œä¸ç§ƒå¤´â€çš„ä»å®¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIè®©æˆ‘å˜å¼ºäº†è¿˜æ˜¯å˜å¼±äº†ï¼Ÿä¸€ä¸ªåç«¯å¼€å‘çš„å¹´ç»ˆè‡ªçœ]]></title>    <link>https://juejin.cn/post/7587998744294178822</link>    <guid>https://juejin.cn/post/7587998744294178822</guid>    <pubDate>2025-12-26T09:10:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587998744294178822" data-draft-id="7587965908288028682" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIè®©æˆ‘å˜å¼ºäº†è¿˜æ˜¯å˜å¼±äº†ï¼Ÿä¸€ä¸ªåç«¯å¼€å‘çš„å¹´ç»ˆè‡ªçœ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T09:10:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å˜»å“ˆbaby"/> <meta itemprop="url" content="https://juejin.cn/user/485305583405066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIè®©æˆ‘å˜å¼ºäº†è¿˜æ˜¯å˜å¼±äº†ï¼Ÿä¸€ä¸ªåç«¯å¼€å‘çš„å¹´ç»ˆè‡ªçœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/485305583405066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å˜»å“ˆbaby
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:10:24.000Z" title="Fri Dec 26 2025 09:10:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€é‚£ä¸ªè®©æˆ‘å¼€å§‹æ€€ç–‘è‡ªå·±çš„ç¬é—´</h2>
<p>å‰å‡ å¤©å›¢é˜Ÿæ¥äº†ä¸ªå®ä¹ ç”Ÿï¼Œè®©æˆ‘å¸®å¿™reviewä¸€æ®µä»£ç ã€‚</p>
<p>æˆ‘æ‰«äº†ä¸€çœ¼ï¼Œéšå£è¯´ï¼š"è¿™ä¸ªRedisåˆ†å¸ƒå¼é”çš„å®ç°æœ‰é—®é¢˜ï¼Œæ²¡æœ‰è€ƒè™‘é”ç»­æœŸï¼Œä¸šåŠ¡æ‰§è¡Œæ—¶é—´è¶…è¿‡è¿‡æœŸæ—¶é—´å°±ä¼šå‡ºé—®é¢˜ã€‚"</p>
<p>å®ä¹ ç”Ÿä¸€è„¸å´‡æ‹œåœ°é—®æˆ‘ï¼š"å“¥ä½ æ€ä¹ˆä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥çš„ï¼Ÿ"</p>
<p>æˆ‘å¼ äº†å¼ å˜´ï¼Œçªç„¶æ„£ä½äº†ã€‚</p>
<p>å› ä¸ºæˆ‘æƒ³èµ·æ¥ï¼Œè¿™ä¸ªçŸ¥è¯†ç‚¹æ˜¯ä¸‰ä¸ªæœˆå‰æˆ‘é—®Cursorçš„æ—¶å€™å®ƒå‘Šè¯‰æˆ‘çš„ã€‚å½“æ—¶æˆ‘ä¹Ÿå†™äº†ç±»ä¼¼çš„ä»£ç ï¼Œæ˜¯AIå¸®æˆ‘æŒ‡å‡ºçš„é—®é¢˜ã€‚</p>
<p>é‚£ä¸€åˆ»æˆ‘çªç„¶æ„è¯†åˆ°ä¸€ä»¶äº‹ï¼š<strong>æˆ‘å¼•ä»¥ä¸ºå‚²çš„"ç»éªŒ"ï¼Œæœ‰å¤šå°‘æ˜¯AIæ•™æˆ‘çš„ï¼Ÿå¦‚æœæ²¡æœ‰AIï¼Œæˆ‘çœŸçš„èƒ½å‘ç°è¿™ä¸ªé—®é¢˜å—ï¼Ÿ</strong></p>
<h2 data-id="heading-1">äºŒã€2025ï¼Œæˆ‘å’ŒAIçš„èœœæœˆæœŸ</h2>
<p>å¦ç™½è¯´ï¼Œè¿™ä¸€å¹´AIç¡®å®è®©æˆ‘"å˜å¼º"äº†ã€‚</p>
<p>å¹´åˆç”¨Cursorå†™çš„ä»£ç ï¼Œåˆ°ç°åœ¨å·²ç»ä¸Šçº¿è·‘äº†å¿«ä¸€å¹´ï¼Œç¨³å®šå¾—å¾ˆã€‚æœ‰ä¸ªå®šæ—¶ä»»åŠ¡çš„é€»è¾‘ç‰¹åˆ«å¤æ‚ï¼Œæ¶‰åŠåˆ°å¤šä¸ªæ•°æ®æºçš„å¯¹è´¦ï¼Œä»¥å‰æˆ‘å¯èƒ½è¦å†™ä¸€å‘¨ï¼Œç”¨AIä¸¤å¤©å°±æå®šäº†ã€‚</p>
<p>æˆ‘çš„è¾“å‡ºæ˜æ˜¾å˜å¤šäº†ï¼š</p>
<ul>
<li>GitHubæäº¤æ•°æ¯”å»å¹´ç¿»äº†ä¸€å€</li>
<li>ç‹¬ç«‹è´Ÿè´£çš„é¡¹ç›®ä»2ä¸ªå˜æˆäº†5ä¸ª</li>
<li>ç”šè‡³å¼€å§‹å†™æŠ€æœ¯åšå®¢ï¼Œä»Šå¹´å‘äº†30å¤šç¯‡</li>
</ul>
<p>å¦‚æœåªçœ‹è¿™äº›æ•°æ®ï¼Œæˆ‘åº”è¯¥å¾ˆå¼€å¿ƒæ‰å¯¹ã€‚</p>
<p>ä½†æˆ‘å¼€å¿ƒä¸èµ·æ¥ã€‚</p>
<p>å› ä¸ºæˆ‘è¶Šæ¥è¶Šåˆ†ä¸æ¸…ï¼Œè¿™äº›"äº§å‡º"é‡Œæœ‰å¤šå°‘æ˜¯æˆ‘çš„èƒ½åŠ›ï¼Œæœ‰å¤šå°‘æ˜¯AIçš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€Anthropicçš„é‚£å¥è¯æˆ³ä¸­äº†æˆ‘</h2>
<p>å‰é˜µå­çœ‹åˆ° Anthropic çš„ä¸€ç¯‡æ–‡ç« ã€ŠHow AI Is Transforming Work at Anthropicã€‹ï¼Œé‡Œé¢æœ‰ä¸€å¥è¯è®©æˆ‘æ²‰é»˜äº†å¾ˆä¹…ï¼š</p>
<blockquote>
<p><strong>"æˆ‘ä»¥ä¸ºæˆ‘å–œæ¬¢å†™ä»£ç ï¼Œå…¶å®æˆ‘åªæ˜¯å–œæ¬¢ä»£ç è·‘é€šçš„ç»“æœã€‚"</strong></p>
</blockquote>
<p>è¯´çš„ä¸å°±æ˜¯æˆ‘å—ï¼Ÿ</p>
<p>å›æƒ³è¿™ä¸€å¹´ï¼Œæˆ‘ç”¨AIå®ç°äº†å¾ˆå¤šä¸œè¥¿ï¼š</p>
<ul>
<li>ä¸€ä¸ªè‡ªåŠ¨åŒ–è¿ç»´è„šæœ¬ï¼Œèƒ½æ‰¹é‡ç®¡ç†å‡ åå°æœåŠ¡å™¨</li>
<li>ä¸€ä¸ªæ•°æ®åˆ†æçœ‹æ¿ï¼Œè€æ¿å¾ˆæ»¡æ„</li>
<li>ä¸€ä¸ªå†…éƒ¨å·¥å…·å¹³å°ï¼ŒåŒäº‹éƒ½è¯´å¥½ç”¨</li>
</ul>
<p>ä½†é—®é¢˜æ˜¯ï¼š<strong>è¿™äº›ä¸œè¥¿çš„æ ¸å¿ƒé€»è¾‘ï¼Œæˆ‘çœŸçš„ç†è§£å—ï¼Ÿ</strong></p>
<p>é‚£ä¸ªè¿ç»´è„šæœ¬é‡Œæœ‰æ®µå¹¶å‘æ§åˆ¶çš„ä»£ç ï¼Œæˆ‘è‡³ä»Šä¸å¤ªæ˜ç™½ä¸ºä»€ä¹ˆè¦ç”¨ä¿¡å·é‡è€Œä¸æ˜¯çº¿ç¨‹æ± ã€‚å½“æ—¶AIç»™äº†æ–¹æ¡ˆï¼Œæˆ‘æµ‹äº†å‡ éæ²¡é—®é¢˜å°±ä¸Šçº¿äº†ã€‚</p>
<p>å¦‚æœç°åœ¨è®©æˆ‘è„±ç¦»AIï¼Œé‡æ–°å†™ä¸€éï¼Œæˆ‘å†™å¾—å‡ºæ¥å—ï¼Ÿ</p>
<p>æˆ‘ä¸ç¡®å®šã€‚</p>
<h2 data-id="heading-3">å››ã€ä¸€ä¸ªå±é™©çš„è¶‹åŠ¿ï¼šæˆ‘åœ¨é€€åŒ–</h2>
<p>æœ€è¿‘æˆ‘å‘ç°äº†ä¸€ä¸ªå±é™©çš„ä¿¡å·ã€‚</p>
<p>ä»¥å‰é‡åˆ°é—®é¢˜ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯ï¼šæƒ³ä¸€æƒ³ï¼Œç”»ä¸ªå›¾ï¼Œç†ç†æ€è·¯ã€‚</p>
<p>ç°åœ¨æˆ‘çš„ç¬¬ä¸€ååº”æ˜¯ï¼šé—®AIã€‚</p>
<p>è¿™çœ‹èµ·æ¥æ˜¯æ•ˆç‡æå‡ï¼Œä½†ä»”ç»†æƒ³æƒ³å¾ˆå¯æ€•â€”â€”<strong>æˆ‘æ­£åœ¨å¤±å»ç‹¬ç«‹æ€è€ƒçš„ä¹ æƒ¯ã€‚</strong></p>
<p>æ›´å¯æ€•çš„æ˜¯ï¼Œè¿™ç§é€€åŒ–æ˜¯æ— æ„ŸçŸ¥çš„ã€‚</p>
<p>å› ä¸ºæœ‰AIå…œåº•ï¼Œæˆ‘é‡åˆ°çš„é—®é¢˜éƒ½èƒ½è§£å†³ï¼Œæ‰€ä»¥æˆ‘æ„Ÿè§‰ä¸åˆ°è‡ªå·±åœ¨å˜å¼±ã€‚ç›´åˆ°æœ‰ä¸€å¤©ç½‘ç»œä¸å¥½ï¼ŒAIåŠ è½½ä¸å‡ºæ¥ï¼Œæˆ‘å¯¹ç€ä¸€ä¸ªNPEæ„£äº†äº”åˆ†é’Ÿæ‰æƒ³èµ·æ¥å¯ä»¥ç”¨debugã€‚</p>
<p>é‚£ä¸€åˆ»æˆ‘æ‰æ„è¯†åˆ°ï¼š<strong>æˆ‘ä¸æ˜¯å˜å¼ºäº†ï¼Œæˆ‘æ˜¯å˜ä¾èµ–äº†ã€‚</strong></p>
<h2 data-id="heading-4">äº”ã€OpenAIç»™å‡ºçš„ç­”æ¡ˆï¼šæ ¸å¿ƒèƒ½åŠ›åœ¨å˜åŒ–</h2>
<p>ä½†è¯è¯´å›æ¥ï¼Œå®Œå…¨ä¸ç”¨AIä¹Ÿä¸ç°å®ã€‚å°±åƒOpenAIåœ¨ã€Šä½¿ç”¨Codexåœ¨28å¤©å†…æ„å»ºAndroidç‰ˆSoraã€‹é‡Œå±•ç¤ºçš„ï¼š</p>
<blockquote>
<p>AIå¯ä»¥24å°æ—¶æ— é—´æ–­ç¼–å†™ä»£ç å’Œè‡ªæˆ‘ä¿®å¤ï¼Œ28å¤©é€šè¿‡50äº¿tokenå®Œæˆäº†æ­£å¸¸éœ€è¦å‡ ä¸ªæœˆçš„äº§å“ä¸Šçº¿ã€‚</p>
</blockquote>
<p>ä½ æƒ³è·ŸAIæ‹¼å†™ä»£ç çš„é€Ÿåº¦ï¼Ÿæ‹¼ä¸è¿‡çš„ã€‚</p>
<p>æ‰€ä»¥é—®é¢˜ä¸æ˜¯"è¦ä¸è¦ç”¨AI"ï¼Œè€Œæ˜¯"ç”¨AIçš„åŒæ—¶ï¼Œæˆ‘çš„æ ¸å¿ƒç«äº‰åŠ›æ˜¯ä»€ä¹ˆ"ã€‚</p>
<p>OpenAIçš„ç»“è®ºæ˜¯ï¼š</p>
<blockquote>
<p><strong>æœªæ¥çš„å¼€å‘å·¥ç¨‹å¸ˆçš„èƒ½åŠ›ä¸å†æ˜¯æ‰“å­—é€Ÿåº¦æˆ–è¯­æ³•APIè®°å¿†ï¼Œè€Œæ˜¯å¯¹ç³»ç»Ÿçš„æ·±åˆ»æ´å¯ŸåŠ›ã€‚</strong></p>
</blockquote>
<p>æ¢å¥è¯è¯´ï¼š</p>
<ul>
<li>âŒ ç†Ÿç»ƒä½¿ç”¨æŸä¸ªæ¡†æ¶ â†’ AIæ¯”ä½ æ›´ç†Ÿ</li>
<li>âŒ è®°ä½å„ç§API â†’ AIæ¯”ä½ è®°å¾—æ¸…æ¥š</li>
<li>âœ… ç†è§£ç³»ç»Ÿä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ â†’ è¿™æ˜¯ä½ çš„</li>
<li>âœ… åœ¨å¤æ‚åœºæ™¯ä¸‹åšæƒè¡¡å†³ç­– â†’ è¿™æ˜¯ä½ çš„</li>
<li>âœ… æŠŠæ¨¡ç³Šçš„éœ€æ±‚ç¿»è¯‘æˆæ¸…æ™°çš„é—®é¢˜ â†’ è¿™æ˜¯ä½ çš„</li>
</ul>
<h2 data-id="heading-5">å…­ã€æˆ‘çš„åº”å¯¹ï¼šä»"ç”¨AIå†™ä»£ç "åˆ°"ç®¡ç†AIå†™ä»£ç "</h2>
<p>æƒ³æ˜ç™½è¿™ä¸ªé—®é¢˜åï¼Œæˆ‘è°ƒæ•´äº†è‡ªå·±ä½¿ç”¨AIçš„æ–¹å¼ã€‚</p>
<h3 data-id="heading-6">ä»¥å‰ï¼šè®©AIå†™ï¼Œæˆ‘æ¥éªŒ</h3>
<pre><code class="hljs language-css" lang="css">æˆ‘ï¼šå¸®æˆ‘å†™ä¸€ä¸ªåˆ†å¸ƒå¼é”çš„å®ç°
AIï¼š<span class="hljs-selector-attr">[ä¸€å¤§æ®µä»£ç ]</span>
æˆ‘ï¼šè·‘ä¸€ä¸‹ï¼Œæ²¡é—®é¢˜ï¼Œä¸Šçº¿
</code></pre>
<h3 data-id="heading-7">ç°åœ¨ï¼šæˆ‘æ¥è§„åˆ’ï¼ŒAIæ¥æ‰§è¡Œ</h3>
<pre><code class="hljs language-css" lang="css">æˆ‘ï¼šæˆ‘éœ€è¦å®ç°ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼Œåœºæ™¯æ˜¯è®¢å•æ‰£åº“å­˜ï¼Œ
    è¦æ±‚ï¼š<span class="hljs-number">1</span>. æ”¯æŒé”ç»­æœŸ <span class="hljs-number">2</span>. è¦æœ‰è·å–é”çš„è¶…æ—¶æœºåˆ¶ <span class="hljs-number">3</span>. é‡Šæ”¾é”è¦ä¿è¯åŸå­æ€§
    å…ˆåˆ«å†™ä»£ç ï¼Œå¸®æˆ‘åˆ†æä¸€ä¸‹æŠ€æœ¯æ–¹æ¡ˆçš„é€‰æ‹©

AIï¼š<span class="hljs-selector-attr">[åˆ†æRedis vs Zookeeper vs etcdçš„ä¼˜åŠ£]</span>

æˆ‘ï¼šç”¨Redisï¼Œä½†æˆ‘æ‹…å¿ƒä¸»ä»åˆ‡æ¢æ—¶çš„é”ä¸¢å¤±é—®é¢˜ï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ

AIï¼š<span class="hljs-selector-attr">[åˆ†æRedLockçš„åŸç†å’Œäº‰è®®]</span>

æˆ‘ï¼šå¥½ï¼Œå…ˆå†™ä¸ªè®¾è®¡æ–‡æ¡£ï¼Œæˆ‘reviewä¸€ä¸‹å†å¼€å§‹å†™ä»£ç 
</code></pre>
<p>åŒºåˆ«åœ¨å“ªï¼Ÿ</p>
<p><strong>ä»¥å‰æˆ‘æ˜¯"ä»£ç çš„éªŒæ”¶è€…"ï¼Œç°åœ¨æˆ‘æ˜¯"æ–¹æ¡ˆçš„å†³ç­–è€…"ã€‚</strong></p>
<p>AIè´Ÿè´£æ‰§è¡Œï¼Œæˆ‘è´Ÿè´£ï¼š</p>
<ol>
<li>å®šä¹‰é—®é¢˜çš„è¾¹ç•Œ</li>
<li>é€‰æ‹©æŠ€æœ¯æ–¹æ¡ˆ</li>
<li>æŠŠæ§æ¶æ„è®¾è®¡</li>
<li>åšæœ€ç»ˆå†³ç­–</li>
</ol>
<p>è¿™æ ·å†™å‡ºæ¥çš„ä»£ç ï¼Œæˆ‘æ˜¯çœŸçš„ç†è§£çš„ã€‚</p>
<h3 data-id="heading-8">å®è·µï¼šç»™AIå»ºç«‹è§„èŒƒ</h3>
<p>æœ€è¿‘åœ¨è¯• Claude Codeï¼Œæœ‰ä¸ªåŠŸèƒ½å¾ˆæœ‰æ„æ€ï¼šä½ å¯ä»¥ç»™AIå†™ä¸€ä¸ªCLAUDE.mdï¼Œå‘Šè¯‰å®ƒé¡¹ç›®çš„ä¸Šä¸‹æ–‡å’Œè§„èŒƒã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®ä¸Šä¸‹æ–‡</span>

<span class="hljs-section">## æŠ€æœ¯æ ˆ</span>
<span class="hljs-bullet">-</span> Java 17 + Spring Boot 3.2
<span class="hljs-bullet">-</span> MyBatis-Plusï¼ˆç¦æ­¢ä½¿ç”¨JPAï¼‰
<span class="hljs-bullet">-</span> Redis 7.0ï¼ˆå·²å°è£…åœ¨ common-redis æ¨¡å—ï¼‰

<span class="hljs-section">## è§„èŒƒ</span>
<span class="hljs-bullet">-</span> æ‰€æœ‰é‡‘é¢å­—æ®µä½¿ç”¨BigDecimalï¼Œç¦æ­¢double
<span class="hljs-bullet">-</span> åˆ†å¸ƒå¼é”ç»Ÿä¸€ä½¿ç”¨ LockUtilï¼Œä¸è¦è‡ªå·±å®ç°
<span class="hljs-bullet">-</span> å¼‚å¸¸å¤„ç†ä½¿ç”¨å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼ŒControllerä¸è¦try-catch
</code></pre>
<p>æœ‰äº†è¿™ä¸ªï¼ŒAIå°±ä¸ä¼šä¹±å†™ä»£ç ã€‚å®ƒçŸ¥é“é¡¹ç›®é‡Œæœ‰ä»€ä¹ˆï¼Œè¯¥ç”¨ä»€ä¹ˆï¼Œä¸è¯¥ç”¨ä»€ä¹ˆã€‚</p>
<p><strong>æœ¬è´¨ä¸Šï¼Œè¿™æ˜¯åœ¨"é©¯æœ"AIã€‚</strong></p>
<p>æŠŠå®ƒå½“æˆä¸€ä¸ª"èƒ½åŠ›å¾ˆå¼ºä½†ä¸äº†è§£é¡¹ç›®èƒŒæ™¯çš„æ–°äºº"ï¼Œä½ éœ€è¦åšçš„æ˜¯ç»™å®ƒè¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼Œåˆ¶å®šæ¸…æ™°çš„è§„èŒƒï¼Œç„¶åè®©å®ƒåœ¨ä½ åˆ’å®šçš„èŒƒå›´å†…å‘æŒ¥ã€‚</p>
<h2 data-id="heading-9">ä¸ƒã€é‡æ–°å®šä¹‰"å¼º"</h2>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘æƒ³å›ç­”å¼€å¤´çš„é—®é¢˜ï¼š<strong>AIè®©æˆ‘å˜å¼ºäº†è¿˜æ˜¯å˜å¼±äº†ï¼Ÿ</strong></p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>çœ‹ä½ æ€ä¹ˆå®šä¹‰"å¼º"ã€‚</strong></p>
<p>å¦‚æœ"å¼º"æ˜¯æŒ‡äº§å‡ºå¤šã€äº¤ä»˜å¿«ï¼Œé‚£æˆ‘ç¡®å®å˜å¼ºäº†ã€‚</p>
<p>ä½†å¦‚æœ"å¼º"æ˜¯æŒ‡ç¦»å¼€å·¥å…·ä¹Ÿèƒ½è§£å†³é—®é¢˜ï¼Œé‚£æˆ‘å¯èƒ½åœ¨å˜å¼±ã€‚</p>
<p>æˆ‘ç°åœ¨çš„ç†è§£æ˜¯ï¼š</p>
<ol>
<li><strong>çŸ­æœŸ</strong>ï¼šå­¦ä¼šç”¨AIï¼Œæé«˜ç”Ÿäº§åŠ›ï¼Œè¿™æ˜¯ç”Ÿå­˜éœ€è¦</li>
<li><strong>é•¿æœŸ</strong>ï¼šä¿æŒç‹¬ç«‹æ€è€ƒèƒ½åŠ›ï¼Œç†è§£ç³»ç»Ÿæœ¬è´¨ï¼Œè¿™æ˜¯æ ¸å¿ƒç«äº‰åŠ›</li>
<li><strong>å¹³è¡¡</strong>ï¼šç”¨AIåŠ é€Ÿæ‰§è¡Œï¼Œä½†å…³é”®å†³ç­–è‡ªå·±åš</li>
</ol>
<p>å°±åƒå¼€è½¦æœ‰äº†å¯¼èˆªï¼Œä½ å¯ä»¥æ›´å¿«åˆ°è¾¾ç›®çš„åœ°ï¼Œä½†ä½ ä¸èƒ½å®Œå…¨ä¾èµ–å®ƒâ€”â€”è‡³å°‘ä½ è¦çŸ¥é“å¤§æ¦‚å¾€å“ªä¸ªæ–¹å‘å¼€ï¼Œå¦åˆ™å¯¼èˆªä¸€æ–­ä½ å°±å‚»çœ¼äº†ã€‚</p>
<h2 data-id="heading-10">å…«ã€å†™åœ¨2025å¹´æœ«</h2>
<p>è¿™ä¸€å¹´ï¼ŒAIä»"å·¥å…·"å˜æˆäº†"ä¼™ä¼´"ï¼Œç”šè‡³åœ¨æŸäº›æ—¶åˆ»ï¼Œæˆ‘åˆ†ä¸æ¸…å®ƒæ˜¯ä¼™ä¼´è¿˜æ˜¯æ‹æ–ã€‚</p>
<p>æˆ‘ä¸çŸ¥é“2026å¹´AIä¼šè¿›åŒ–æˆä»€ä¹ˆæ ·ã€‚ä¹Ÿè®¸å®ƒä¼šæ›´å¼ºï¼Œå¼ºåˆ°è®©"å†™ä»£ç "è¿™ä»¶äº‹æœ¬èº«å˜å¾—ä¸å†é‡è¦ã€‚</p>
<p>ä½†æˆ‘æƒ³ï¼Œæ— è®ºæŠ€æœ¯æ€ä¹ˆå˜ï¼Œæœ‰äº›ä¸œè¥¿æ˜¯ä¸å˜çš„ï¼š</p>
<ul>
<li>å¯¹é—®é¢˜æœ¬è´¨çš„å¥½å¥‡å¿ƒ</li>
<li>æŠŠå¤æ‚ç³»ç»Ÿæƒ³æ¸…æ¥šçš„èƒ½åŠ›</li>
<li>é¢å¯¹ä¸ç¡®å®šæ€§åšå†³ç­–çš„å‹‡æ°”</li>
</ul>
<p>è¿™äº›ï¼ŒAIæš‚æ—¶è¿˜æ›¿ä»£ä¸äº†ã€‚</p>
<p><strong>æ„¿ä½ æˆ‘éƒ½èƒ½åœ¨AIçš„æµªæ½®é‡Œï¼Œæ‰¾åˆ°å±äºè‡ªå·±çš„é”šç‚¹ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain Memory å®æˆ˜æŒ‡å—ï¼šè®©å¤§æ¨¡å‹è®°ä½ä½ æ¯ä¸€å¥è¯ï¼Œè½»æ¾æ‰“é€ â€œæœ‰è®°å¿†â€çš„AIåŠ©æ‰‹]]></title>    <link>https://juejin.cn/post/7587965908288094218</link>    <guid>https://juejin.cn/post/7587965908288094218</guid>    <pubDate>2025-12-26T09:15:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965908288094218" data-draft-id="7587997893986910235" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" LangChain Memory å®æˆ˜æŒ‡å—ï¼šè®©å¤§æ¨¡å‹è®°ä½ä½ æ¯ä¸€å¥è¯ï¼Œè½»æ¾æ‰“é€ â€œæœ‰è®°å¿†â€çš„AIåŠ©æ‰‹"/> <meta itemprop="keywords" content="LangChain,LLM,JavaScript"/> <meta itemprop="datePublished" content="2025-12-26T09:15:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ €ç§‹666"/> <meta itemprop="url" content="https://juejin.cn/user/2566698322650307"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             LangChain Memory å®æˆ˜æŒ‡å—ï¼šè®©å¤§æ¨¡å‹è®°ä½ä½ æ¯ä¸€å¥è¯ï¼Œè½»æ¾æ‰“é€ â€œæœ‰è®°å¿†â€çš„AIåŠ©æ‰‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2566698322650307/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ €ç§‹666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:15:38.000Z" title="Fri Dec 26 2025 09:15:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<h2 data-id="heading-0">å¼•è¨€</h2>
<blockquote>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„å°´å°¬ï¼Ÿ<br/>
å‘ AI æé—®ï¼šâ€œæˆ‘å«å¼ ä¸‰â€ï¼Œä¸‹ä¸€ç§’å†é—®â€œæˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿâ€â€”â€”å®ƒå±…ç„¶è¯´ï¼šâ€œæŠ±æ­‰ï¼Œæˆ‘ä¸è®°å¾—äº†ã€‚â€ ğŸ˜…</p>
<p>åˆ«æ€ªæ¨¡å‹ç¬¨ï¼Œè¿™æ˜¯æ‰€æœ‰ LLM çš„â€œå…ˆå¤©ç¼ºé™·â€ï¼š<strong>æ— çŠ¶æ€è°ƒç”¨</strong>ã€‚</p>
<p>ä½†ä»Šå¤©ï¼Œæˆ‘ä»¬ç”¨ <strong>LangChain Memory</strong> ç»™å®ƒè£…ä¸Šâ€œå¤§è„‘â€ï¼Œå®ç°çœŸæ­£æ„ä¹‰ä¸Šçš„å¤šè½®å¯¹è¯è®°å¿†ï¼</p>
<p>æœ¬æ–‡å°†å¸¦ä½ ä»é›¶æ„å»ºä¸€ä¸ªä¼šâ€œè®°äº‹â€çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œå¹¶æ·±å…¥å‰–æåº•å±‚åŸç†ã€æ€§èƒ½ç“¶é¢ˆä¸ç”Ÿäº§çº§ä¼˜åŒ–æ–¹æ¡ˆã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ğŸ§  ä¸€ã€ä¸ºä»€ä¹ˆä½ çš„ AI æ€»æ˜¯â€œé‡‘é±¼è„‘â€ï¼Ÿ</h3>
<h4 data-id="heading-2">1.1 å¤§æ¨¡å‹çš„â€œå¤±å¿†ç—‡â€çœŸç›¸</h4>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªâ€œé»‘ç®±å‡½æ•°â€ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">response = <span class="hljs-title function_">model</span>(prompt)
</code></pre>
<p>æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯ç‹¬ç«‹çš„ HTTP è¯·æ±‚ï¼Œ<strong>æ²¡æœ‰ä»»ä½•ä¸Šä¸‹æ–‡ä¿ç•™æœºåˆ¶</strong> â€”â€” å°±åƒæ¯æ¬¡è§é¢éƒ½é‡æ–°è®¤è¯†ä¸€éã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç¬¬ä¸€æ¬¡å¯¹è¯</span>
<span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">"æˆ‘å«é™ˆæ˜Šï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span>);
<span class="hljs-comment">// è¾“å‡ºï¼šå¾ˆé«˜å…´è®¤è¯†ä½ ï¼Œé™ˆæ˜Šï¼çœ‹æ¥ä½ å–œæ¬¢å–ç™½å…°åœ°å‘¢ï½</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'------ åˆ†å‰²çº¿ ------'</span>);

<span class="hljs-comment">// ç¬¬äºŒæ¬¡å¯¹è¯</span>
<span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">"æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ"</span>);
<span class="hljs-comment">// è¾“å‡ºï¼šå‘ƒâ€¦â€¦ä¸å¤ªæ¸…æ¥šï¼Œèƒ½å‘Šè¯‰æˆ‘å—ï¼Ÿ</span>
</code></pre>
<p>ğŸ‘‰ ç»“æœä»¤äººå´©æºƒï¼šå‰è„šåˆšè‡ªæˆ‘ä»‹ç»ï¼Œåè„šå°±å¿˜äº†ï¼</p>
<p>è¿™åœ¨å®é™…é¡¹ç›®ä¸­æ˜¯ä¸å¯æ¥å—çš„ã€‚æ— è®ºæ˜¯å®¢æœæœºå™¨äººã€æ•™è‚²åŠ©æ‰‹è¿˜æ˜¯ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿï¼Œ<strong>éƒ½éœ€è¦è®°ä½ç”¨æˆ·çš„å†å²è¡Œä¸ºå’Œåå¥½</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-3">1.2 è§£å†³æ€è·¯ï¼šæŠŠâ€œè®°å¿†â€å¡è¿› Prompt</h4>
<p>æ—¢ç„¶æ¨¡å‹ä¸ä¼šè‡ªå·±è®°ï¼Œé‚£å°±<strong>æˆ‘ä»¬æ¥å¸®å®ƒè®°</strong>ï¼</p>
<p>æ ¸å¿ƒæ€æƒ³éå¸¸ç®€å•ï¼š</p>
<blockquote>
<p>âœ… æ¯æ¬¡è¯·æ±‚å‰ï¼ŒæŠŠä¹‹å‰çš„å¯¹è¯å†å²æ‹¼æ¥åˆ°å½“å‰ prompt ä¸­<br/>
âœ… è®©æ¨¡å‹â€œçœ‹åˆ°â€å®Œæ•´çš„èŠå¤©è®°å½•ï¼Œä»è€Œåšå‡ºè¿è´¯å›åº”</p>
</blockquote>
<p>è¿™å°±åƒæ˜¯ç»™æ¨¡å‹æˆ´ä¸Šäº†ä¸€å‰¯â€œè®°å¿†çœ¼é•œâ€ã€‚</p>
<p>è€Œ LangChain çš„ <code>Memory</code> æ¨¡å—ï¼Œæ­£æ˜¯å¯¹è¿™ä¸€è¿‡ç¨‹çš„é«˜åº¦å°è£…ä¸è‡ªåŠ¨åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-4">âš™ï¸ äºŒã€LangChain Memory æ ¸å¿ƒåŸç†æ‹†è§£</h3>
<p>LangChain æä¾›äº†ä¸€å¥—ä¼˜é›…çš„ APIï¼Œè®©æˆ‘ä»¬å¯ä»¥ç”¨å‡ è¡Œä»£ç å®ç°â€œæœ‰è®°å¿†â€çš„å¯¹è¯ç³»ç»Ÿã€‚</p>
<p>å…ˆçœ‹æœ€ç»ˆæ•ˆæœï¼š</p>
<pre><code class="hljs language-bash" lang="bash">User: æˆ‘å«é™ˆæ˜Šï¼Œå–œæ¬¢å–ç™½å…°åœ°
AI: ä½ å¥½ï¼Œé™ˆæ˜Šï¼ç™½å…°åœ°å¯æ˜¯å¾ˆæœ‰å“å‘³çš„é€‰æ‹©å“¦ï½

User: æˆ‘å–œæ¬¢å–ä»€ä¹ˆé…’ï¼Ÿ
AI: ä½ è¯´ä½ å–œæ¬¢å–ç™½å…°åœ°å‘€ï½æ˜¯ä¸æ˜¯å‡†å¤‡å¼€ä¸€ç“¶åº†ç¥ä¸€ä¸‹ï¼ŸğŸ˜‰
</code></pre>
<p>âœ… æˆåŠŸè®°ä½ç”¨æˆ·åå­—å’Œé¥®é…’åå¥½ï¼</p>
<p>ä¸‹é¢æˆ‘ä»¬å°±ä¸€æ­¥æ­¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<hr/>
<h4 data-id="heading-5">2.1 æ ¸å¿ƒç»„ä»¶ä¸€è§ˆ</h4>

























<table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>ChatMessageHistory</code></td><td>å­˜å‚¨å¯¹è¯å†å²ï¼ˆå†…å­˜/æ–‡ä»¶/æ•°æ®åº“ï¼‰</td></tr><tr><td><code>ChatPromptTemplate</code></td><td>å®šä¹‰æç¤ºè¯æ¨¡æ¿ï¼Œé¢„ç•™ <code>{history}</code> å ä½ç¬¦</td></tr><tr><td><code>RunnableWithMessageHistory</code></td><td>è‡ªåŠ¨æ³¨å…¥å†å² + ç®¡ç†ä¼šè¯ç”Ÿå‘½å‘¨æœŸ</td></tr><tr><td><code>sessionId</code></td><td>åŒºåˆ†ä¸åŒç”¨æˆ·çš„ä¼šè¯ï¼Œé¿å…ä¸²å°</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-6">2.2 å®Œæ•´ä»£ç å®æˆ˜</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ–‡ä»¶åï¼šmemory-demo.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/deepseek"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableWithMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/runnables"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InMemoryChatMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/chat_history'</span>;

<span class="hljs-comment">// 1. åˆå§‹åŒ–æ¨¡å‹</span>
<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-reasoner'</span>,
    <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.3</span>,
});

<span class="hljs-comment">// 2. æ„å»ºå¸¦å†å²çš„ Prompt æ¨¡æ¿</span>
<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
    [<span class="hljs-string">'system'</span>, <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæ¸©æš–ä¸”æœ‰è®°å¿†çš„åŠ©æ‰‹ï¼Œè¯·æ ¹æ®å¯¹è¯å†å²å›ç­”é—®é¢˜'</span>],
    [<span class="hljs-string">'placeholder'</span>, <span class="hljs-string">'{history}'</span>],   <span class="hljs-comment">// â† å†å²æ¶ˆæ¯è‡ªåŠ¨æ’å…¥è¿™é‡Œ</span>
    [<span class="hljs-string">'human'</span>, <span class="hljs-string">'{input}'</span>]            <span class="hljs-comment">// â† å½“å‰è¾“å…¥</span>
]);

<span class="hljs-comment">// 3. åˆ›å»ºå¯è¿è¡Œé“¾ï¼ˆå«è°ƒè¯•è¾“å‡ºï¼‰</span>
<span class="hljs-keyword">const</span> runnable = prompt
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-function"><span class="hljs-params">input</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\nğŸ” æœ€ç»ˆå‘é€ç»™æ¨¡å‹çš„å®Œæ•´ä¸Šä¸‹æ–‡ï¼š'</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(input, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));
        <span class="hljs-keyword">return</span> input;
    })
    .<span class="hljs-title function_">pipe</span>(model);

<span class="hljs-comment">// 4. åˆå§‹åŒ–å†…å­˜å†å²å­˜å‚¨</span>
<span class="hljs-keyword">const</span> messageHistory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>();

<span class="hljs-comment">// 5. åˆ›å»ºå¸¦è®°å¿†çš„é“¾</span>
<span class="hljs-keyword">const</span> chain = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RunnableWithMessageHistory</span>({
    runnable,
    <span class="hljs-attr">getMessageHistory</span>: <span class="hljs-function">() =&gt;</span> messageHistory,
    <span class="hljs-attr">inputMessagesKey</span>: <span class="hljs-string">'input'</span>,
    <span class="hljs-attr">historyMessagesKey</span>: <span class="hljs-string">'history'</span>
});

<span class="hljs-comment">// 6. å¼€å§‹å¯¹è¯æµ‹è¯•</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">testConversation</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç¬¬ä¸€è½®ï¼šå‘ŠçŸ¥ä¿¡æ¯</span>
    <span class="hljs-keyword">const</span> res1 = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(
        { <span class="hljs-attr">input</span>: <span class="hljs-string">"æˆ‘å«é™ˆæ˜Šï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span> },
        { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">"user_001"</span> } }
    );
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ¤– å›åº”1ï¼š"</span>, res1.<span class="hljs-property">content</span>);

    <span class="hljs-comment">// ç¬¬äºŒè½®ï¼šæé—®å†å²</span>
    <span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(
        { <span class="hljs-attr">input</span>: <span class="hljs-string">"æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿæˆ‘å–œæ¬¢å–ä»€ä¹ˆé…’ï¼Ÿ"</span> },
        { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">"user_001"</span> } }
    );
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ¤– å›åº”2ï¼š"</span>, res2.<span class="hljs-property">content</span>);
}

<span class="hljs-title function_">testConversation</span>();
</code></pre>
<p>ğŸ“Œ <strong>è¿è¡Œç»“æœç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ğŸ¤– å›åº”1ï¼š ä½ å¥½ï¼Œé™ˆæ˜Šï¼å¬è¯´ä½ å–œæ¬¢å–ç™½å…°åœ°ï¼ŒçœŸæ˜¯ä¸ªæœ‰å“ä½çš„äººå‘¢ï½

ğŸ¤– å›åº”2ï¼š ä½ å«é™ˆæ˜Šï¼Œè€Œä¸”ä½ è¯´ä½ å–œæ¬¢å–ç™½å…°åœ°å“¦ï½è¦ä¸è¦æ¥ç‚¹æ­é…å°åƒï¼Ÿ
</code></pre>
<p>ğŸ‰ æˆåŠŸï¼æ¨¡å‹ä¸ä»…è®°ä½äº†åå­—ï¼Œè¿˜èƒ½ç»¼åˆå¤šä¸ªä¿¡æ¯è¿›è¡Œæ¨ç†å›ç­”ï¼</p>
<hr/>
<h4 data-id="heading-7">2.3 å…³é”®æœºåˆ¶å›¾è§£</h4>
<pre><code class="hljs language-text" lang="text">              +---------------------+
              |   ç”¨æˆ·æ–°è¾“å…¥         |
              +----------+----------+
                         |
       +-----------------v------------------+
       |   ChatPromptTemplate              |
       |                                     |
       |   System: ä½ æ˜¯æœ‰è®°å¿†çš„åŠ©æ‰‹         |
       |   History: [ä¹‹å‰çš„æ‰€æœ‰å¯¹è¯] â†â”€â”€â”€â”€â”€â”€â”€+â†â”€ ä» messageHistory è¯»å–
       |   Human: æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ             |
       +-----------------+------------------+
                         |
                è°ƒç”¨æ¨¡å‹ â†’ LLM
                         |
           è¿”å›å“åº” â†â”€â”€â”€â”€+
                         |
       +-----------------v------------------+
       |  è‡ªåŠ¨ä¿å­˜æœ¬æ¬¡äº¤äº’                  |
       |  user: æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ               |
       |  assistant: ä½ å«é™ˆæ˜Š...            |
       |  å†™å…¥ InMemoryChatMessageHistory   |
       +------------------------------------+
</code></pre>
<p>æ•´ä¸ªæµç¨‹å…¨è‡ªåŠ¨é—­ç¯ï¼Œå¼€å‘è€…åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘ã€‚</p>
<hr/>
<h3 data-id="heading-8">âš ï¸ ä¸‰ã€çœŸå®åœºæ™¯ä¸‹çš„ä¸‰å¤§æŒ‘æˆ˜ä¸ç ´è§£ä¹‹é“</h3>
<p>è™½ç„¶ä¸Šé¢çš„ä¾‹å­å¾ˆç¾å¥½ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½ ä¼šç«‹åˆ»é¢ä¸´ä¸‰ä¸ªâ€œçµé­‚æ‹·é—®â€ï¼š</p>
<hr/>
<h4 data-id="heading-9">âŒ æŒ‘æˆ˜1ï¼šToken â€œæ»šé›ªçƒâ€çˆ†ç‚¸å¢é•¿ï¼</h4>
<p>éšç€å¯¹è¯è½®æ•°å¢åŠ ï¼Œå†å²æ¶ˆæ¯è¶Šç§¯è¶Šå¤šï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>å•æ¬¡è¯·æ±‚ Token æ•°é£™å‡</li>
<li>æˆæœ¬ç¿»å€ ğŸ’¸</li>
<li>å“åº”å˜æ…¢ â³</li>
<li>å¯èƒ½è¶…å‡ºæ¨¡å‹æœ€å¤§é•¿åº¦é™åˆ¶ï¼ˆå¦‚ 8192ï¼‰</li>
</ul>
<h5 data-id="heading-10">âœ… è§£æ³•ï¼šé€‰æ‹©åˆé€‚çš„ Memory ç±»å‹</h5>

























<table><thead><tr><th>Memory ç±»å‹</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>BufferWindowMemory</code></td><td>åªä¿ç•™æœ€è¿‘ N è½®</td><td>é€šç”¨å¯¹è¯ã€çŸ­ç¨‹è®°å¿†</td></tr><tr><td><code>ConversationSummaryMemory</code></td><td>è‡ªåŠ¨ç”Ÿæˆä¸€å¥è¯æ€»ç»“</td><td>é•¿å‘¨æœŸå¯¹è¯ã€èŠ‚çœ Token</td></tr><tr><td><code>EntityMemory</code></td><td>æå–å…³é”®å®ä½“ï¼ˆäººå/åå¥½ï¼‰</td><td>æ¨èç³»ç»Ÿã€CRM åŠ©æ‰‹</td></tr></tbody></table>
<h6 data-id="heading-11">ç¤ºä¾‹ï¼šä½¿ç”¨çª—å£è®°å¿†ï¼ˆä¿ç•™æœ€è¿‘3è½®ï¼‰</h6>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BufferWindowMemory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"langchain/memory"</span>;

<span class="hljs-keyword">const</span> memory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferWindowMemory</span>({
    <span class="hljs-attr">k</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">memoryKey</span>: <span class="hljs-string">"history"</span>
});
</code></pre>
<blockquote>
<p>ğŸ“Œ æ¨èç»„åˆï¼š<strong>çŸ­æœŸç»†èŠ‚é çª—å£ + é•¿æœŸç‰¹å¾é æ€»ç»“</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-12">âŒ æŒ‘æˆ˜2ï¼šé‡å¯æœåŠ¡åå†å²å…¨ä¸¢ï¼Ÿï¼</h4>
<p><code>InMemoryChatMessageHistory</code> æ˜¯ä¸´æ—¶å­˜å‚¨ï¼ŒæœåŠ¡ä¸€é‡å¯ï¼Œè®°å¿†æ¸…é›¶ã€‚</p>
<h5 data-id="heading-13">âœ… è§£æ³•ï¼šæŒä¹…åŒ–åˆ°æ•°æ®åº“æˆ–æ–‡ä»¶</h5>
<h6 data-id="heading-14">æ–¹æ¡ˆä¸€ï¼šæœ¬åœ°æ–‡ä»¶å­˜å‚¨ï¼ˆè½»é‡çº§ï¼‰</h6>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FileChatMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/chat_history"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getMessageHistory</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">sessionId</span>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileChatMessageHistory</span>({
        <span class="hljs-attr">filePath</span>: <span class="hljs-string">`./history/<span class="hljs-subst">${sessionId}</span>.json`</span>
    });
};
</code></pre>
<h6 data-id="heading-15">æ–¹æ¡ˆäºŒï¼šRedis / MongoDBï¼ˆé«˜å¹¶å‘æ¨èï¼‰</h6>
<pre><code class="hljs language-bash" lang="bash">npm install @langchain/redis
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RedisChatMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/redis"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getMessageHistory</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">sessionId</span>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisChatMessageHistory</span>({
        sessionId,
        <span class="hljs-attr">client</span>: redisClient <span class="hljs-comment">// å·²è¿æ¥çš„ Redis å®¢æˆ·ç«¯</span>
    });
};
</code></pre>
<blockquote>
<p>ğŸ’¡ ç”Ÿäº§ç¯å¢ƒå¼ºçƒˆå»ºè®®ä½¿ç”¨ Redisï¼šé«˜æ€§èƒ½ã€æ”¯æŒè¿‡æœŸç­–ç•¥ã€åˆ†å¸ƒå¼éƒ¨ç½²æ— å¿§ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-16">âŒ æŒ‘æˆ˜3ï¼šå¤šäººåŒæ—¶èŠå¤©ä¼šä¸ä¼šä¸²æ¶ˆæ¯ï¼Ÿ</h4>
<p>å½“ç„¶ä¼šï¼å¦‚æœæ‰€æœ‰ç”¨æˆ·å…±ç”¨åŒä¸€ä¸ª <code>messageHistory</code>ï¼Œå°±ä¼šå‡ºç° A ç”¨æˆ·çœ‹åˆ° B ç”¨æˆ·çš„å¯¹è¯ã€‚</p>
<h5 data-id="heading-17">âœ… è§£æ³•ï¼šç”¨ <code>sessionId</code> éš”ç¦»ä¼šè¯</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(
    { <span class="hljs-attr">input</span>: <span class="hljs-string">"æˆ‘é¥¿äº†"</span> },
    { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">"user_123"</span> } }  <span class="hljs-comment">// æ¯ä¸ªç”¨æˆ·å”¯ä¸€ ID</span>
)

<span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(
    { <span class="hljs-attr">input</span>: <span class="hljs-string">"æˆ‘é¥¿äº†"</span> },
    { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">"user_456"</span> } }  <span class="hljs-comment">// ä¸åŒç”¨æˆ·ï¼Œä¸åŒå†å²</span>
)
</code></pre>
<blockquote>
<p>âœ… å®‰å…¨éš”ç¦»ï¼Œäº’ä¸å¹²æ‰°ï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-18">ğŸ› ï¸ å››ã€Memory çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼ˆé™„æ¡ˆä¾‹çµæ„Ÿï¼‰</h3>





























<table><thead><tr><th>åœºæ™¯</th><th>å¦‚ä½•ä½¿ç”¨ Memory</th></tr></thead><tbody><tr><td>å®¢æœæœºå™¨äºº</td><td>è®°ä½è®¢å•å·ã€æŠ•è¯‰è¿›åº¦ã€ç”¨æˆ·æƒ…ç»ªå˜åŒ–</td></tr><tr><td>æ•™è‚²è¾…å¯¼</td><td>è¿½è¸ªå­¦ä¹ ç« èŠ‚ã€é”™é¢˜è®°å½•ã€æŒæ¡ç¨‹åº¦</td></tr><tr><td>ç”µå•†å¯¼è´­</td><td>è®°ä½é¢„ç®—ã€å“ç‰Œåå¥½ã€å°ºç éœ€æ±‚</td></tr><tr><td>ç¼–ç¨‹åŠ©æ‰‹</td><td>ä¿æŒä»£ç ä¸Šä¸‹æ–‡ã€å‡½æ•°å®šä¹‰ã€é¡¹ç›®ç»“æ„</td></tr><tr><td>å¿ƒç†å’¨è¯¢</td><td>ç†è§£ç”¨æˆ·æƒ…ç»ªæ¼”å˜ã€å…³é”®äº‹ä»¶å›é¡¾</td></tr></tbody></table>
<p>ğŸ’¡ <strong>åˆ›æ–°ç©æ³•</strong>ï¼šç»“åˆ SummaryMemory + VectorDBï¼Œå®ç°â€œé•¿æœŸäººæ ¼è®°å¿†â€â€”â€”è®© AI è®°ä½ä½ æ˜¯å†…å‘è¿˜æ˜¯å¤–å‘ã€å–œæ¬¢å¹½é»˜è¿˜æ˜¯ä¸¥è°¨ã€‚</p>
<hr/>
<h3 data-id="heading-19">ğŸ“˜ äº”ã€<strong>é«˜é¢‘é¢è¯•é¢˜ï¼ˆLangChain æ–¹å‘ï¼‰</strong>ï¼š</h3>
<ol>
<li>LLM ä¸ºä»€ä¹ˆéœ€è¦ Memoryï¼Ÿå®ƒçš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>Buffer vs Summary Memory çš„åŒºåˆ«ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨å“ªç§ï¼Ÿ</li>
<li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ”¯æŒç™¾ä¸‡ç”¨æˆ·åœ¨çº¿çš„è®°å¿†ç³»ç»Ÿæ¶æ„ï¼Ÿ</li>
<li>å¦‚ä½•é˜²æ­¢æ•æ„Ÿä¿¡æ¯è¢« Memory è®°å½•ï¼Ÿï¼ˆå®‰å…¨è€ƒé‡ï¼‰</li>
</ol>
<hr/>
<h3 data-id="heading-20">ğŸ“ ç»“è¯­ï¼šè®© AI çœŸæ­£â€œæ‡‚ä½ â€ï¼Œä»ä¸€æ¬¡å¯¹è¯è®°å¿†å¼€å§‹</h3>
<blockquote>
<p>â€œæ™ºèƒ½ä¸æ˜¯å›ç­”é—®é¢˜çš„èƒ½åŠ›ï¼Œè€Œæ˜¯ç†è§£ä¸Šä¸‹æ–‡çš„è‰ºæœ¯ã€‚â€</p>
</blockquote>
<p>LangChain Memory è™½ç„¶åªæ˜¯æ•´ä¸ª LLM åº”ç”¨ä¸­çš„ä¸€ä¸ªå°æ¨¡å—ï¼Œä½†å®ƒå´æ˜¯é€šå¾€<strong>æ‹ŸäººåŒ–äº¤äº’</strong>çš„å…³é”®ä¸€æ­¥ã€‚</p>
<p>ä»â€œæ— çŠ¶æ€â€åˆ°â€œæœ‰è®°å¿†â€ï¼Œæˆ‘ä»¬ä¸åªæ˜¯åœ¨å†™ä»£ç ï¼Œæ›´æ˜¯åœ¨å¡‘é€ ä¸€ç§æ–°çš„æ²Ÿé€šæ–¹å¼ã€‚</p>
<p>æœªæ¥å±äºé‚£äº›èƒ½è®© AI <strong>è®°ä½ä½ ã€ç†è§£ä½ ã€é™ªä¼´ä½ </strong>çš„äº§å“ã€‚</p>
<p>è€Œç°åœ¨ï¼Œä½ å·²ç»æœ‰äº†æ‰“é€ å®ƒçš„é’¥åŒ™ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†è®©å•ä½“ Agent çƒ§ Token äº†ï¼šLangGraph å¤šæ™ºèƒ½ä½“å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7587903505135697970</link>    <guid>https://juejin.cn/post/7587903505135697970</guid>    <pubDate>2025-12-26T09:06:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587903505135697970" data-draft-id="7587965800272183322" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†è®©å•ä½“ Agent çƒ§ Token äº†ï¼šLangGraph å¤šæ™ºèƒ½ä½“å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="LangChain,Agent"/> <meta itemprop="datePublished" content="2025-12-26T09:06:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç™½ç‚¹point"/> <meta itemprop="url" content="https://juejin.cn/user/4353721774639118"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†è®©å•ä½“ Agent çƒ§ Token äº†ï¼šLangGraph å¤šæ™ºèƒ½ä½“å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4353721774639118/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç™½ç‚¹point
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:06:06.000Z" title="Fri Dec 26 2025 09:06:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ç®€ä»‹</strong>: é’ˆå¯¹å•ä½“ Agent åœ¨å¤æ‚ä»»åŠ¡ä¸­æ˜“è¿·å¤±ã€æ˜“æ­»å¾ªç¯çš„ç—›ç‚¹ï¼Œæœ¬æ–‡æ·±å…¥æ¢è®¨äº†åŸºäº LangGraph çš„å¤š Agent åä½œæ¶æ„ã€‚é€šè¿‡ Supervisor æ¨¡å¼çš„å®æˆ˜æ¼”ç»ƒï¼Œè¯¦ç»†è§£æäº†çŠ¶æ€ç®¡ç†ã€è·¯ç”±å†³ç­–åŠé¿å‘ç»éªŒï¼ŒåŠ©ä½ æ„å»ºçœŸæ­£å¯è½åœ°çš„å·¥ä¸šçº§ AI åº”ç”¨ã€‚</p>
</blockquote>
<hr/>
<p>å¦‚æœä½ æ›¾å°è¯•è®©ä¸€ä¸ªå•ä½“ Agentï¼ˆå¦‚æ ‡å‡†çš„ <code>ChatOpenAI</code> é…åˆ <code>AgentExecutor</code>ï¼‰åŒæ—¶å®Œæˆâ€œè°ƒç ”æ–°æŠ€æœ¯ã€ç¼–å†™ Demo ä»£ç ã€è¿›è¡Œå•å…ƒæµ‹è¯•å¹¶è¾“å‡ºæ–‡æ¡£â€è¿™ä¸€ç³»åˆ—ä»»åŠ¡ï¼Œä½ å¤§æ¦‚ç‡ä¼šé‡åˆ°ä»¥ä¸‹æƒ¨çŠ¶ï¼šAgent åœ¨æ‰§è¡Œåˆ°ç¬¬ä¸‰æ­¥æ—¶å¿˜è®°äº†ç¬¬ä¸€æ­¥çš„çº¦æŸï¼Œæˆ–è€…åœ¨ä»£ç æŠ¥é”™æ—¶é™·å…¥äº†æ— æ„ä¹‰çš„è‡ªæˆ‘ä¿®æ­£æ­»å¾ªç¯ï¼Œæœ€ç»ˆçƒ§å…‰äº†ä½ çš„ Tokenï¼Œå´åªåå‡ºä¸€å †é€»è¾‘æ··ä¹±çš„åºŸè¯ã€‚</p>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå•ä½“ Agent çš„ä¸Šä¸‹æ–‡çª—å£ï¼ˆContext Windowï¼‰å’Œæ¨ç†é“¾æ¡æ˜¯æœ‰æé™çš„ã€‚å½“ä»»åŠ¡å¤æ‚åº¦è¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼Œæ¨¡å‹å°±ä¼šå¼€å§‹â€œèƒ¡è¨€ä¹±è¯­â€ã€‚è§£å†³åŠæ³•ä¸æ˜¯æ¢ä¸€ä¸ªæ›´å¼ºçš„æ¨¡å‹ï¼Œè€Œæ˜¯æ”¹å˜æ¶æ„â€”â€”ä»å•å…µä½œæˆ˜è½¬å‘å¤š Agent åä½œï¼ˆMulti-Agent Systemsï¼‰ã€‚</p>
<p>æœ¬æ–‡å°†åŸºäº <strong>LangGraph</strong>ï¼ˆLangChain å®˜æ–¹æ¨å‡ºçš„æœ‰çŠ¶æ€å¤š Agent ç¼–æ’åº“ï¼‰åˆ†äº«å¦‚ä½•æ„å»ºä¸€ä¸ªå¯è½åœ°çš„å¤š Agent åº”ç”¨ã€‚</p>
<h3 data-id="heading-0">1. ä¸ºä»€ä¹ˆæ˜¯ LangGraph è€Œä¸æ˜¯ä¼ ç»Ÿçš„ AgentExecutorï¼Ÿ</h3>
<p>ä¼ ç»Ÿçš„ LangChain Agent æ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œä½ å¾ˆéš¾æ§åˆ¶å®ƒçš„å†…éƒ¨å¾ªç¯é€»è¾‘ã€‚è€Œåœ¨å¤š Agent åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ä¸ª<strong>çŠ¶æ€æœº</strong>ã€‚</p>
<ul>
<li><strong>Stateï¼ˆçŠ¶æ€ï¼‰</strong>ï¼šæ‰€æœ‰ Agent å…±äº«çš„â€œè´¦æœ¬â€ï¼Œè®°å½•å½“å‰ä»»åŠ¡è¿›åº¦ã€‚</li>
<li><strong>Nodesï¼ˆèŠ‚ç‚¹ï¼‰</strong>ï¼šæ¯ä¸ª Agent æˆ–å·¥å…·å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè´Ÿè´£å¤„ç†çŠ¶æ€å¹¶è¿”å›æ›´æ–°ã€‚</li>
<li><strong>Edgesï¼ˆè¾¹ï¼‰</strong>ï¼šå®šä¹‰äº†ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹çš„æµè½¬é€»è¾‘ï¼ˆæ¡ä»¶è·¯ç”±ï¼‰ã€‚</li>
</ul>
<p>è¿™ç§æ¶æ„å…è®¸æˆ‘ä»¬åƒè®¾è®¡å·¥ä¸šæµæ°´çº¿ä¸€æ ·ï¼Œç²¾ç¡®æ§åˆ¶æ¯ä¸ª Agent çš„èŒè´£è¾¹ç•Œã€‚</p>
<hr/>
<h3 data-id="heading-1">2. æ ¸å¿ƒæ¶æ„ï¼šSupervisorï¼ˆå¯¼å¸ˆï¼‰æ¨¡å¼</h3>
<p>åœ¨å¤š Agent åä½œä¸­ï¼Œæœ€ç¨³å®šçš„æ¨¡å¼æ˜¯ <strong>Supervisor æ¨¡å¼</strong>ã€‚å®ƒç”±ä¸€ä¸ªä¸»æ§ Agent è´Ÿè´£åˆ†å‘ä»»åŠ¡ï¼Œå¤šä¸ªä¸“å®¶ Agent è´Ÿè´£æ‰§è¡Œï¼Œæœ€åç”±ä¸»æ§æ±‡æ€»ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    Start((å¼€å§‹)) --&gt; Supervisor{ä¸»æ§ Agent}
    Supervisor --&gt;|æŒ‡æ´¾ä»»åŠ¡| Researcher[è°ƒç ”ä¸“å®¶]
    Supervisor --&gt;|æŒ‡æ´¾ä»»åŠ¡| Coder[ä»£ç ä¸“å®¶]
    Researcher --&gt;|è¿”å›ç»“æœ| Supervisor
    Coder --&gt;|è¿”å›ç»“æœ| Supervisor
    Supervisor --&gt;|ä»»åŠ¡å®Œæˆ| End((ç»“æŸ))
</code></pre>
<hr/>
<h3 data-id="heading-2">3. å®æˆ˜æ¼”ç»ƒï¼šæ„å»ºä¸€ä¸ªæŠ€æœ¯æ–‡æ¡£ç”Ÿæˆç³»ç»Ÿ</h3>
<p>æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªåŒ…å«â€œæœç´¢ä¸“å®¶â€å’Œâ€œä»£ç ä¸“å®¶â€çš„åä½œç³»ç»Ÿã€‚</p>
<p><strong>ç¯å¢ƒè¦æ±‚ï¼š</strong></p>
<ul>
<li><code>langchain &gt;= 0.2.0</code></li>
<li><code>langgraph &gt;= 0.1.0</code></li>
<li><code>langchain-openai</code></li>
</ul>
<h4 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šå®šä¹‰å…±äº«çŠ¶æ€</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Annotated, <span class="hljs-type">List</span>, TypedDict
<span class="hljs-keyword">import</span> operator

<span class="hljs-comment"># å®šä¹‰ Agent ä¹‹é—´å…±äº«çš„çŠ¶æ€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    <span class="hljs-comment"># æ‰€æœ‰çš„æ¶ˆæ¯éƒ½ä¼šè¢«è¿½åŠ åˆ°è¿™ä¸ªåˆ—è¡¨é‡Œ</span>
    messages: Annotated[<span class="hljs-type">List</span>, operator.add]
    <span class="hljs-comment"># ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„èŠ‚ç‚¹</span>
    <span class="hljs-built_in">next</span>: <span class="hljs-built_in">str</span>
</code></pre>
<h4 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä¸“å®¶ Agent</h4>
<p>ä¸è¦ç›´æ¥ç»™ Agent å¡å…¥æ‰€æœ‰å·¥å…·ã€‚<strong>èŒè´£åˆ†ç¦»</strong>æ˜¯é™ä½å¹»è§‰çš„å…³é”®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage
<span class="hljs-keyword">from</span> langgraph.prebuilt <span class="hljs-keyword">import</span> create_react_agent

llm = ChatOpenAI(model=<span class="hljs-string">"gpt-4o"</span>, temperature=<span class="hljs-number">0</span>)

<span class="hljs-comment"># 1. è°ƒç ”ä¸“å®¶ï¼šä»…èµ‹äºˆæœç´¢å·¥å…·</span>
research_agent = create_react_agent(
    llm, tools=[tavily_tool], state_modifier=<span class="hljs-string">"ä½ æ˜¯ä¸€åèµ„æ·±æŠ€æœ¯è°ƒç ”å‘˜ï¼Œè´Ÿè´£æœé›†æœ€æ–°çš„æŠ€æœ¯æ–‡æ¡£å’Œ API ç”¨æ³•ã€‚"</span>
)

<span class="hljs-comment"># 2. ä»£ç ä¸“å®¶ï¼šä»…è´Ÿè´£ç¼–å†™å’Œè¿è¡Œ Python ä»£ç </span>
code_agent = create_react_agent(
    llm, tools=[python_repl_tool], state_modifier=<span class="hljs-string">"ä½ æ˜¯ä¸€åé«˜çº§å·¥ç¨‹å¸ˆï¼Œè´Ÿè´£æ ¹æ®è°ƒç ”ç»“æœç¼–å†™é«˜è´¨é‡çš„ Python ä»£ç ç¤ºä¾‹ã€‚"</span>
)
</code></pre>
<h4 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šæ„å»ºä¸»æ§è·¯ç”±ï¼ˆSupervisorï¼‰</h4>
<p>è¿™æ˜¯ç³»ç»Ÿçš„â€œå¤§è„‘â€ï¼Œå®ƒä¸å¹²æ´»ï¼Œåªè´Ÿè´£çœ‹è¿›åº¦å¹¶å†³å®šè°æ˜¯ä¸‹ä¸€ä¸ªæ‰§è¡Œè€…ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate
<span class="hljs-keyword">from</span> langchain_core.output_parsers.openai_functions <span class="hljs-keyword">import</span> JsonOutputFunctionsParser

members = [<span class="hljs-string">"Researcher"</span>, <span class="hljs-string">"Coder"</span>]
system_prompt = (
    <span class="hljs-string">"ä½ æ˜¯ä¸€åå›¢é˜Ÿè´Ÿè´£äººï¼Œè´Ÿè´£ç®¡ç†ä»¥ä¸‹äººå‘˜ï¼š{members}ã€‚"</span>
    <span class="hljs-string">"æ ¹æ®ç”¨æˆ·çš„é—®é¢˜ï¼Œå†³å®šè°åº”è¯¥æ‰§è¡Œä¸‹ä¸€æ­¥ã€‚æ¯ä¸ªäººå‘˜æ‰§è¡Œå®Œåéƒ½ä¼šå‘ä½ æ±‡æŠ¥ã€‚"</span>
    <span class="hljs-string">"å½“ä»»åŠ¡å®Œå…¨ç»“æŸæ—¶ï¼Œå›å¤ FINISHã€‚"</span>
)

options = [<span class="hljs-string">"FINISH"</span>] + members
function_def = {
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"route"</span>,
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"é€‰æ‹©ä¸‹ä¸€ä¸ªæ‰§è¡Œè€…"</span>,
    <span class="hljs-string">"parameters"</span>: {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
        <span class="hljs-string">"properties"</span>: {
            <span class="hljs-string">"next"</span>: {<span class="hljs-string">"anyOf"</span>: [{<span class="hljs-string">"enum"</span>: options}]}
        },
        <span class="hljs-string">"required"</span>: [<span class="hljs-string">"next"</span>],
    },
}

prompt = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"system"</span>, system_prompt),
    (<span class="hljs-string">"placeholder"</span>, <span class="hljs-string">"{messages}"</span>),
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"æ ¹æ®ä»¥ä¸Šå¯¹è¯ï¼Œè°åº”è¯¥æ˜¯ä¸‹ä¸€ä¸ªæ‰§è¡Œè€…ï¼Ÿæˆ–è€…æ˜¯ç»“æŸä»»åŠ¡ï¼Ÿ"</span>)
]).partial(members=<span class="hljs-string">", "</span>.join(members))

<span class="hljs-comment"># ä½¿ç”¨ OpenAI çš„ Function Calling æ¥ä¿è¯è¾“å‡ºçš„ç¨³å®šæ€§</span>
supervisor_chain = (
    prompt 
    | llm.bind_functions(functions=[function_def], function_call=<span class="hljs-string">"route"</span>) 
    | JsonOutputFunctionsParser()
)
</code></pre>
<h4 data-id="heading-6">ç¬¬å››æ­¥ï¼šç¼–æ’å·¥ä½œæµ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, END

workflow = StateGraph(AgentState)

<span class="hljs-comment"># æ·»åŠ èŠ‚ç‚¹</span>
workflow.add_node(<span class="hljs-string">"Researcher"</span>, <span class="hljs-keyword">lambda</span> state: research_agent.invoke(state))
workflow.add_node(<span class="hljs-string">"Coder"</span>, <span class="hljs-keyword">lambda</span> state: code_agent.invoke(state))
workflow.add_node(<span class="hljs-string">"supervisor"</span>, <span class="hljs-keyword">lambda</span> state: supervisor_chain.invoke(state))

<span class="hljs-comment"># æ‰€æœ‰çš„ä¸“å®¶èŠ‚ç‚¹æ‰§è¡Œå®Œåï¼Œéƒ½è¦å›åˆ° supervisor</span>
<span class="hljs-keyword">for</span> member <span class="hljs-keyword">in</span> members:
    workflow.add_edge(member, <span class="hljs-string">"supervisor"</span>)

<span class="hljs-comment"># æ ¹æ® supervisor çš„åˆ¤æ–­è¿›è¡Œæ¡ä»¶è·¯ç”±</span>
conditional_map = {k: k <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> members}
conditional_map[<span class="hljs-string">"FINISH"</span>] = END
workflow.add_conditional_edges(<span class="hljs-string">"supervisor"</span>, <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-string">"next"</span>], conditional_map)

workflow.set_entry_point(<span class="hljs-string">"supervisor"</span>)
graph = workflow.<span class="hljs-built_in">compile</span>()
</code></pre>
<hr/>
<h3 data-id="heading-7">4. é¿å‘æŒ‡å—ï¼šè€å¸æœºçš„ç§æˆ¿å»ºè®®</h3>
<h4 data-id="heading-8">1. è­¦æƒ•â€œå¹»è§‰ä¼ é€’â€</h4>
<p>Agent A å¯èƒ½ä¼šç”Ÿæˆä¸€ä¸ªé”™è¯¯çš„ API è°ƒç”¨æ–¹æ³•ï¼ŒAgent B æ‹¿åˆ°åä¼šåŸºäºè¿™ä¸ªé”™è¯¯ç»§ç»­ç¼–å†™ä»£ç ã€‚</p>
<ul>
<li><strong>å¯¹ç­–</strong>ï¼šåœ¨ <code>Researcher</code> å’Œ <code>Coder</code> ä¹‹é—´å¢åŠ ä¸€ä¸ª <code>Validator</code>ï¼ˆæ ¡éªŒèŠ‚ç‚¹ï¼‰ã€‚ä¸è¦è®© Agent è‡ªå·±æ£€æŸ¥è‡ªå·±ï¼Œè®©å¦ä¸€ä¸ª Prompt ä¸“é—¨è´Ÿè´£â€œæ‰¾èŒ¬â€ã€‚</li>
</ul>
<h4 data-id="heading-9">2. è§£å†³æ­»å¾ªç¯ä¸ Token çˆ†ç‚¸</h4>
<p>å½“ Agent æ— æ³•å®Œæˆä»»åŠ¡æ—¶ï¼Œå®ƒå¯èƒ½ä¼šåœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´åå¤æ¨ªè·³ã€‚</p>
<ul>
<li><strong>å¯¹ç­–</strong>ï¼šåœ¨ <code>compile()</code> æ—¶è®¾ç½® <code>recursion_limit</code>ã€‚
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é™åˆ¶æœ€å¤§æ­¥æ•°ä¸º 20 æ­¥ï¼Œè¶…è¿‡åˆ™å¼ºåˆ¶åœæ­¢</span>
graph.invoke({<span class="hljs-string">"messages"</span>: [HumanMessage(content=<span class="hljs-string">"..."</span>) ]}, {<span class="hljs-string">"recursion_limit"</span>: <span class="hljs-number">20</span>})
</code></pre>
</li>
</ul>
<h4 data-id="heading-10">3. çŠ¶æ€æ¸…ç†</h4>
<p>éšç€å¯¹è¯å¢åŠ ï¼Œ<code>messages</code> åˆ—è¡¨ä¼šè¶Šæ¥è¶Šé•¿ï¼Œå¯¼è‡´ Context Window æº¢å‡ºã€‚</p>
<ul>
<li><strong>å¯¹ç­–</strong>ï¼šåœ¨ Supervisor èŠ‚ç‚¹ä¸­åŠ å…¥â€œæ‘˜è¦é€»è¾‘â€ã€‚æ¯å½“æ¶ˆæ¯è¶…è¿‡ 10 æ¡ï¼Œå°±è§¦å‘ä¸€æ¬¡æ€»ç»“ï¼Œå°†å†å²ä¿¡æ¯å‹ç¼©ï¼Œåªä¿ç•™å…³é”®ç»“è®ºã€‚</li>
</ul>
<h4 data-id="heading-11">4. äººç±»å¹²é¢„ï¼ˆHuman-in-the-loopï¼‰</h4>
<p>æœ‰äº›å…³é”®å†³ç­–ï¼ˆæ¯”å¦‚åˆ é™¤æ•°æ®åº“ã€å‘é€é‚®ä»¶ï¼‰ä¸èƒ½å…¨è‡ªåŠ¨åŒ–ã€‚</p>
<ul>
<li><strong>å¯¹ç­–</strong>ï¼šåˆ©ç”¨ LangGraph çš„ <code>interrupt_before</code> åŠŸèƒ½ã€‚åœ¨æ‰§è¡Œ <code>Coder</code> èŠ‚ç‚¹å‰æš‚åœï¼Œç­‰å¾…äººå·¥åœ¨æ§åˆ¶å°è¾“å…¥ <code>Approve</code> åå†ç»§ç»­ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-12">5. æ·±åº¦æ€»ç»“ï¼šå•ä½“ vs å¤š Agent</h3>






























<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">å•ä½“ Agent (Single Agent)</th><th align="left">å¤š Agent åä½œ (Multi-Agent)</th></tr></thead><tbody><tr><td align="left"><strong>å¤æ‚åº¦ä¸Šé™</strong></td><td align="left">ä½ï¼Œå®¹æ˜“åœ¨é•¿é“¾æ¡ä»»åŠ¡ä¸­è¿·å¤±</td><td align="left">é«˜ï¼Œé€šè¿‡æ¨¡å—åŒ–æ‹†è§£å¤æ‚é€»è¾‘</td></tr><tr><td align="left"><strong>è°ƒè¯•éš¾åº¦</strong></td><td align="left">æéš¾ï¼ŒPrompt ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«</td><td align="left">è¾ƒæ˜“ï¼Œå¯é’ˆå¯¹ç‰¹å®šèŠ‚ç‚¹ä¼˜åŒ– Prompt</td></tr><tr><td align="left"><strong>Token æ•ˆç‡</strong></td><td align="left">æ—©æœŸçœï¼ŒåæœŸå› é‡å¤å°è¯•è€Œæµªè´¹</td><td align="left">åˆå§‹å¼€é”€å¤§ï¼Œä½†ä»»åŠ¡æˆåŠŸç‡æ›´é«˜</td></tr><tr><td align="left"><strong>é€‚ç”¨åœºæ™¯</strong></td><td align="left">ç®€å•çš„é—®ç­”ã€å•ä¸€å·¥å…·è°ƒç”¨</td><td align="left">è½¯ä»¶å¼€å‘ã€æ·±åº¦å¸‚åœºè°ƒç ”ã€å¤æ‚æµè½¬ä¸šåŠ¡</td></tr></tbody></table>
<p><strong>æœ€åçš„ä¸€ç‚¹ç»éªŒï¼š</strong> ä¸è¦ä¸ºäº†ç”¨å¤š Agent è€Œç”¨å¤š Agentã€‚å¦‚æœä¸€ä¸ªä»»åŠ¡é€šè¿‡ä¼˜åŒ– System Prompt å°±èƒ½è®©å•ä½“ Agent æå®šï¼Œé‚£å°±ä¸è¦å¼•å…¥ LangGraphã€‚å¤š Agent ç³»ç»Ÿçš„æœ¬è´¨æ˜¯<strong>ç”¨æ¶æ„çš„ç¡®å®šæ€§æ¥å¼¥è¡¥æ¨¡å‹æ¨ç†çš„ä¸ç¡®å®šæ€§</strong>ã€‚å½“ä½ å‘ç°ä½ çš„ Prompt å·²ç»é•¿åˆ°è¿ä½ è‡ªå·±éƒ½è¯»ä¸ä¸‹å»æ—¶ï¼Œå°±æ˜¯è¯¥æ‹†åˆ† Agent çš„æ—¶å€™äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨ React é‡Œä¼˜é›…åœ° â€œéšè— iframe æ»šåŠ¨æ¡â€]]></title>    <link>https://juejin.cn/post/7587961565477224502</link>    <guid>https://juejin.cn/post/7587961565477224502</guid>    <pubDate>2025-12-26T09:27:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587961565477224502" data-draft-id="7587998744294146054" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨ React é‡Œä¼˜é›…åœ° â€œéšè— iframe æ»šåŠ¨æ¡â€"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,CSS"/> <meta itemprop="datePublished" content="2025-12-26T09:27:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨å¤œå¯»æ™´å¤©"/> <meta itemprop="url" content="https://juejin.cn/user/1943592288391496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨ React é‡Œä¼˜é›…åœ° â€œéšè— iframe æ»šåŠ¨æ¡â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592288391496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨å¤œå¯»æ™´å¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:27:30.000Z" title="Fri Dec 26 2025 09:27:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰ç«¯æœ‰ä¸€ä¸ªç»å…¸é—®é¢˜ï¼š</p>
<blockquote>
<p>ä½ åœ¨å®¿ä¸»é¡µé¢æ€ä¹ˆå†™ CSSï¼Œéƒ½<strong>ç®¡ä¸åˆ° iframe å†…éƒ¨</strong>çš„æ»šåŠ¨æ¡ã€‚</p>
</blockquote>
<p>æ‰€ä»¥æ­£ç¡®çš„å‰ç«¯æ–¹æ¡ˆä¸æ˜¯ â€œç»™å¤–å±‚å®¹å™¨åŠ  overflowâ€ï¼Œè€Œæ˜¯ï¼š<strong>å°½é‡åœ¨ iframe è‡ªå·±å±‚é¢å…œåº• + åŒæºæ—¶å‘ iframe å†…æ³¨å…¥ CSS</strong>ã€‚</p>
<p>æœ¬æ–‡åªèšç„¦å‰ç«¯å®ç°ï¼Œä¸å±•å¼€å‰åç«¯ä¼ å‚é“¾è·¯ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆä½ æ˜æ˜è®¾ç½®äº†ï¼Œæ»šåŠ¨æ¡è¿˜æ˜¯åœ¨ï¼Ÿ</h2>
<p>å› ä¸ºæ»šåŠ¨æ¡æ¥è‡ª <strong>iframe å†…éƒ¨ document</strong>ï¼š</p>
<ul>
<li>å¤–å±‚ <code>div</code> çš„ <code>overflow-hidden</code> åªèƒ½è£å‰ª â€œiframe è¿™ä¸ªç›’å­â€ æ˜¯å¦æº¢å‡º</li>
<li>iframe é‡Œé¢çš„é¡µé¢æ˜¯å¦å‡ºç°æ»šåŠ¨æ¡ï¼Œå–å†³äº iframe å†…éƒ¨çš„ <code>html/body</code> æˆ–æŸä¸ªå®¹å™¨çš„ <code>overflow</code></li>
<li>å®¿ä¸»é¡µé¢çš„ CSS ä¸ä¼šè·¨ document ç”Ÿæ•ˆï¼ˆiframe å¤©ç”Ÿéš”ç¦»ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-1">2. æˆ‘ä»¬æœ€ç»ˆç”¨äº† â€œä¸¤å±‚æ–¹æ¡ˆâ€ï¼Œè§£å†³ç°å®ä¸–ç•Œçš„ä¸ç¡®å®šæ€§</h2>
<p>å®ç°é›†ä¸­åœ¨ <code>src/components/Search/ViewExtensionIframe.tsx:1-88</code>ã€‚</p>
<h3 data-id="heading-2">2.1 ç¬¬ä¸€å±‚ï¼š<code>scrolling="no"</code> ä½œä¸ºä½æˆæœ¬å…œåº•</h3>
<pre><code class="hljs language-tsx" lang="tsx">&lt;iframe scrolling={hideScrollbar ? <span class="hljs-string">"no"</span> : <span class="hljs-string">"auto"</span>} /&gt;
</code></pre>
<p>å®ƒä¸æ˜¯ç°ä»£æ ‡å‡†ï¼Œä½†åœ¨æŸäº› WebView/åµŒå…¥ç¯å¢ƒé‡Œä»èƒ½å‡å°‘æ»šåŠ¨æ¡å‡ºç°çš„æ¦‚ç‡ã€‚</p>
<p>å®ƒçš„ä»·å€¼åœ¨äºï¼š<strong>ä¸ä¾èµ–åŒæº</strong>ï¼Œå“ªæ€•ä½ è¿›ä¸å» iframeï¼Œä¹Ÿèƒ½ â€œç¢°ä¸€ç¢°è¿æ°”â€ã€‚</p>
<h3 data-id="heading-3">2.2 ç¬¬äºŒå±‚ï¼ˆä¸»åŠ›ï¼‰ï¼šåŒæºæ—¶æ³¨å…¥ä¸€æ®µéšè—æ»šåŠ¨æ¡çš„ CSS</h3>
<p>æ ¸å¿ƒæ˜¯è¿™æ®µé€»è¾‘ï¼ˆåŒæ–‡ä»¶ <code>applyHideScrollbarToIframe</code>ï¼‰ï¼š</p>
<ul>
<li><code>src/components/Search/ViewExtensionIframe.tsx:5-39</code></li>
</ul>
<p>åšæ³•å¾ˆç›´æ¥ï¼š</p>
<ol>
<li>æ‹¿åˆ° <code>iframe.contentDocument</code></li>
<li>å¾€é‡Œé¢å¡ä¸€ä¸ªå¸¦å›ºå®š <code>id</code> çš„ <code>&lt;style&gt;</code></li>
<li>å¼€å…³å…³é—­æ—¶æŠŠè¿™ä¸ª <code>&lt;style&gt;</code> åˆ æ‰</li>
</ol>
<p>æ³¨å…¥çš„ CSS åŒæ—¶è¦†ç›–ä¸»æµå¼•æ“ï¼š</p>
<pre><code class="hljs language-css" lang="css">* {
  <span class="hljs-attribute">scrollbar-width</span>: none;      <span class="hljs-comment">/* Firefox */</span>
  -ms-<span class="hljs-attribute">overflow</span>-style: none;   <span class="hljs-comment">/* è€ IE/Edge é£æ ¼ */</span>
}
*::-webkit-scrollbar {        <span class="hljs-comment">/* Chrome/Safari */</span>
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0px</span>;
}
</code></pre>
<p>ä¸ºä»€ä¹ˆç”¨ <code>*</code>ï¼Ÿ</p>
<ul>
<li>æ‰©å±•é¡µé¢çš„æ»šåŠ¨å®¹å™¨ä¸ä¸€å®šæ˜¯ <code>body</code>ï¼Œå¯èƒ½æ˜¯ä»»æ„ <code>div overflow-auto</code></li>
<li>ç”¨ <code>*</code> èƒ½æœ€å¤§æ¦‚ç‡â€œå…¨åœºéšè—â€ï¼Œæ›´é€šç”¨</li>
</ul>
<p>ä¸ºä»€ä¹ˆè¦å›ºå®š <code>id</code>ï¼Ÿ</p>
<ul>
<li>é˜²æ­¢é‡å¤æ³¨å…¥ï¼ˆå¤šæ¬¡ onLoad / çŠ¶æ€å˜åŒ–ï¼‰</li>
<li>å…³é—­æ—¶èƒ½ç²¾ç¡®ç§»é™¤ï¼Œä¿è¯å¯é€†</li>
</ul>
<hr/>
<h2 data-id="heading-4">3. ä¸ºä»€ä¹ˆè¦ â€œonLoad + useEffectâ€ åŒè§¦å‘ï¼Ÿ</h2>
<p>è¿™æ˜¯æœ€å®¹æ˜“æ¼ã€ä¹Ÿæœ€å½±å“ä½“éªŒçš„ä¸€ç‚¹ã€‚</p>
<ul>
<li><code>useEffect</code>ï¼šå“åº” <code>hideScrollbar</code> å˜åŒ–ï¼ˆå¼€å…³åˆ‡æ¢æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼‰</li>
<li><code>onLoad</code>ï¼šä¿è¯â€œé¦–æ¬¡åŠ è½½å®Œæˆåä¸€å®šæ³¨å…¥æˆåŠŸâ€</li>
</ul>
<p>åŸå› ï¼šiframe çš„åŠ è½½æ—¶åºä¸å¯æ§ã€‚ä½ åœ¨ React æ¸²æŸ“å®Œæ—¶ï¼Œiframe å¯èƒ½è¿˜æ²¡ readyï¼Œ<code>contentDocument</code> ä¸ºç©ºï¼›ç­‰åˆ° onLoad æ‰èƒ½ 100% ç¡®è®¤ document å­˜åœ¨ã€‚</p>
<p>å¯¹åº”ä»£ç ï¼š</p>
<ul>
<li><code>src/components/Search/ViewExtensionIframe.tsx:52-55</code></li>
<li><code>src/components/Search/ViewExtensionIframe.tsx:78-84</code></li>
</ul>
<hr/>
<h2 data-id="heading-5">4. è¿™ä¸ªæ–¹æ¡ˆçš„è¾¹ç•Œä¸å‘ï¼ˆæå‰å†™æ¸…æ¥šï¼Œåé¢å°‘æ‰å¤´å‘ï¼‰</h2>
<h3 data-id="heading-6">4.1 â€œéšè—æ»šåŠ¨æ¡â€ ä¸ç­‰äº â€œä¸èƒ½æ»šâ€</h3>
<p>æˆ‘ä»¬åªéšè— scrollbar çš„è§†è§‰è¡¨ç°ï¼Œæ»šåŠ¨è¡Œä¸ºä»å­˜åœ¨ï¼ˆæ»šè½®/è§¦æ‘¸æ¿/é”®ç›˜éƒ½èƒ½æ»šï¼‰ã€‚<br/>
è¿™åœ¨æ²‰æµ¸å¼é¡µé¢å¾ˆèˆ’æœï¼Œä½†åœ¨é•¿é¡µé¢é‡Œä¹Ÿå¯èƒ½è®©ç”¨æˆ·ä¸çŸ¥é“ â€œè¿˜èƒ½æ»šâ€ã€‚</p>
<h3 data-id="heading-7">4.2 è·¨åŸŸ iframeï¼šæ³¨å…¥ä¼šå¤±è´¥ï¼Œä½†ä¸ä¼šç‚¸</h3>
<p>å¦‚æœ iframe åŠ è½½è·¨åŸŸé¡µé¢ï¼Œè®¿é—® <code>contentDocument</code> ä¼šè§¦å‘åŒæºé™åˆ¶ã€‚å½“å‰å®ç°ç”¨ <code>try/catch</code> é™é»˜åæ‰å¼‚å¸¸ï¼Œç»“æœæ˜¯ï¼š</p>
<ul>
<li>CSS æ³¨å…¥å¤±è´¥</li>
<li>åªå‰© <code>scrolling="no"</code> å…œåº•ï¼Œæ•ˆæœä¸ä¿è¯</li>
</ul>
<p>è¿™ä¸æ˜¯ bugï¼Œæ˜¯æµè§ˆå™¨å®‰å…¨æ¨¡å‹å†³å®šçš„ã€‚</p>
<h3 data-id="heading-8">4.3 å…¨å±€ <code>*</code> çš„å‰¯ä½œç”¨</h3>
<p>å®ƒä¼šæŠŠ iframe å†…æ‰€æœ‰æ»šåŠ¨æ¡éƒ½å¹²æ‰ï¼ŒåŒ…æ‹¬æŸäº›ç»„ä»¶å†…éƒ¨æ»šåŠ¨åŒºåŸŸã€ä»£ç å—æ»šåŠ¨ç­‰ã€‚<br/>
ç›®å‰æˆ‘ä»¬é€‰æ‹©â€œé€šç”¨æ€§ä¼˜å…ˆâ€ï¼Œä½†å¦‚æœæœªæ¥æŸäº›æ‰©å±•éœ€è¦ä¿ç•™å±€éƒ¨æ»šåŠ¨æ¡ï¼Œå°±è¦æ”¹ä¸ºæ›´ç²¾ç¡®çš„é€‰æ‹©å™¨ç­–ç•¥ã€‚</p>
<hr/>
<h2 data-id="heading-9">5. ä¸€å¥è¯æ€»ç»“</h2>
<p>åœ¨å‰ç«¯æƒ³ç¨³å®šæ§åˆ¶ iframe æ»šåŠ¨æ¡ï¼Œæœ€é è°±çš„æ€è·¯æ˜¯ï¼š</p>
<ul>
<li><strong>å…ˆç”¨ iframe è‡ªèº«å±æ€§åšå…œåº•</strong></li>
<li><strong>å†åœ¨åŒæºæ¡ä»¶ä¸‹å¯¹ iframe å†…éƒ¨ document æ³¨å…¥ CSS</strong></li>
<li><strong>ç”¨å›ºå®š style id ä¿è¯å¹‚ç­‰ä¸å¯é€†</strong></li>
<li><strong>ç”¨ onLoad + effect è§£å†³æ—¶åºé—®é¢˜</strong></li>
</ul>
<p>è¿™å°±æ˜¯ <code>hideScrollbar</code> åœ¨å‰ç«¯çœŸæ­£è§£å†³çš„é—®é¢˜ï¼šä¸æ˜¯å†™æ²¡å†™ CSSï¼Œè€Œæ˜¯æœ‰æ²¡æœ‰æŠŠ CSS å†™åˆ°â€œå¯¹çš„ä¸–ç•Œé‡Œâ€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VueCropperåŠ è½½OBSå›¾ç‰‡è·¨åŸŸé—®é¢˜]]></title>    <link>https://juejin.cn/post/7587743345197465652</link>    <guid>https://juejin.cn/post/7587743345197465652</guid>    <pubDate>2025-12-26T09:30:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587743345197465652" data-draft-id="7587743345197449268" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VueCropperåŠ è½½OBSå›¾ç‰‡è·¨åŸŸé—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T09:30:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æ³¥ç§è·èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289442030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VueCropperåŠ è½½OBSå›¾ç‰‡è·¨åŸŸé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289442030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æ³¥ç§è·èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:30:22.000Z" title="Fri Dec 26 2025 09:30:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜åœºæ™¯</h2>
<p>åœ¨é›†æˆ <code>VueCropper</code> å›¾ç‰‡è£å‰ªç»„ä»¶æ—¶ï¼Œé‡åˆ°ä¸€ä¸ªå…¸å‹çš„è·¨åŸŸé—®é¢˜ï¼šåŠ è½½å­˜å‚¨åœ¨ OBS ä¸Šçš„å›¾ç‰‡æ—¶ï¼Œæµè§ˆå™¨ä¼šå¯¹åŒä¸€å¼ å›¾ç‰‡å‘èµ·ä¸¤æ¬¡è¯·æ±‚ï¼Œæœ€ç»ˆç¬¬äºŒæ¬¡è¯·æ±‚è§¦å‘è·¨åŸŸé”™è¯¯ã€‚ä»¥ä¸‹æ˜¯é—®é¢˜çš„å®Œæ•´æ’æŸ¥è¿‡ç¨‹ä¸ç°è±¡æ¢³ç†ï¼š</p>
<ol>
<li>è¯·æ±‚è¡Œä¸ºå¼‚å¸¸ï¼šåŒä¸€å¼  OBS å›¾ç‰‡è¢«æµè§ˆå™¨å‘èµ·ä¸¤æ¬¡è¯·æ±‚ï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚æ­£å¸¸å“åº”ï¼Œç¬¬äºŒæ¬¡è¯·æ±‚ç›´æ¥æŠ›å‡ºè·¨åŸŸç›¸å…³é”™è¯¯ï¼ˆå¦‚ <code>CORS policy: No 'Access-Control-Allow-Origin' header</code>ï¼‰ï¼›</li>
<li>åˆæ­¥æ’æŸ¥æ–¹å‘ï¼šåˆæœŸä¼˜å…ˆæ€€ç–‘ OBS æœåŠ¡å™¨è·¨åŸŸé…ç½®ç¼ºå¤±ï¼Œåé¦ˆè¿ç»´æ ¸æŸ¥åï¼Œç¡®è®¤ OBS å·²æ­£ç¡®é…ç½®è·¨åŸŸå…è®¸è§„åˆ™ï¼ˆå«å…è®¸å½“å‰å‰ç«¯åŸŸåã€æ”¯æŒ GET æ–¹æ³•ç­‰ï¼‰ï¼›</li>
<li>å…³é”®æµ‹è¯•çªç ´ï¼šé€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·æµ‹è¯•å‘ç°ï¼Œå¼€å¯ã€Œåœç”¨ç¼“å­˜ã€åŠŸèƒ½åï¼Œè·¨åŸŸé”™è¯¯æ¶ˆå¤±ã€‚æ®æ­¤é”å®šé—®é¢˜æ ¹æºä¸æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ç›¸å…³ï¼›</li>
<li>æ ¸å¿ƒå·®å¼‚å®šä½ï¼šå¯¹æ¯”ä¸¤æ¬¡è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ï¼Œå‘ç°è·¨åŸŸæ ‡è¯†é…ç½®ä¸ä¸€è‡´â€”â€”ç¬¬ä¸€æ¬¡åŠ è½½å›¾ç‰‡æœªè®¾ç½® <code>crossOrigin</code> æ ‡è¯†ï¼Œç¬¬äºŒæ¬¡åŠ è½½æ—¶åˆ™æ·»åŠ äº†è¯¥æ ‡è¯†ï¼›</li>
<li>é—®é¢˜é€»è¾‘é—­ç¯ï¼šç¬¬ä¸€æ¬¡è¯·æ±‚å› æ—  <code>crossOrigin</code> æ ‡è¯†ï¼ŒOBS æœåŠ¡å™¨è¯†åˆ«ä¸ºéè·¨åŸŸè¯·æ±‚ï¼Œæœªè¿”å›è·¨åŸŸå“åº”å¤´ï¼›ç¬¬äºŒæ¬¡è¯·æ±‚è™½å¼€å¯ <code>crossOrigin</code>ï¼Œä½†å› å›¾ç‰‡ URL æœªå˜ï¼Œæµè§ˆå™¨ç›´æ¥å¤ç”¨ç¼“å­˜çš„æ— è·¨åŸŸå“åº”å¤´èµ„æºï¼Œå¯¼è‡´è·¨åŸŸæ ¡éªŒå¤±è´¥ã€‚</li>
</ol>
<h2 data-id="heading-1">é—®é¢˜æ ¹æº</h2>
<p>ä¸ºéªŒè¯ä¸Šè¿°æ’æŸ¥ç»“è®ºï¼Œé€šè¿‡åŸç”Ÿ JavaScript ä»£ç å¤ç°äº†é—®é¢˜åœºæ™¯ï¼Œæœ€ç»ˆç¡®è®¤é—®é¢˜æ ¹æºä¸º <strong>è·¨åŸŸç­–ç•¥ä¸æµè§ˆå™¨ç¼“å­˜å†²çª</strong>ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> image = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
    <span class="hljs-comment">// ç¬¬ä¸€æ¬¡åŠ è½½ï¼šæœªè®¾ç½® crossOrigin æ ‡è¯†</span>
    image.<span class="hljs-property">src</span> = <span class="hljs-string">'https://xxx.png'</span>; 
    image.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å®Œæˆ'</span>);
        <span class="hljs-keyword">const</span> image2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
        <span class="hljs-comment">// ç¬¬äºŒæ¬¡åŠ è½½ï¼šè®¾ç½®è·¨åŸŸæ ‡è¯†ï¼ˆä¸ç¬¬ä¸€æ¬¡ä¸ä¸€è‡´ï¼‰</span>
        image2.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">"anonymous"</span>;
        <span class="hljs-comment">// åŠ è½½åŒä¸€å¼ å›¾ç‰‡ï¼Œè§¦å‘è·¨åŸŸé”™è¯¯</span>
        image2.<span class="hljs-property">src</span> = image.<span class="hljs-property">src</span>; 
        image2.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡2åŠ è½½å®Œæˆ'</span>);
        });
    });
});
</code></pre>
<p>è¯¥é—®é¢˜çš„æ ¸å¿ƒçŸ›ç›¾æ˜¯ã€ŒåŒä¸€å¼ å›¾ç‰‡çš„ä¸¤æ¬¡è¯·æ±‚é‡‡ç”¨ä¸ä¸€è‡´çš„è·¨åŸŸç­–ç•¥ã€ï¼Œç»“åˆæµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä¸ OBS æœåŠ¡å™¨çš„è·¨åŸŸå“åº”è§„åˆ™ï¼Œå…·ä½“é”™è¯¯é€»è¾‘å¯æ‹†è§£ä¸ºä¸¤æ­¥ï¼š</p>
<ol>
<li>éè·¨åŸŸæ¨¡å¼ç¼“å­˜ï¼šç¬¬ä¸€æ¬¡åŠ è½½æœªè®¾ç½® <code>crossOrigin</code>ï¼Œæµè§ˆå™¨ä»¥ã€Œéè·¨åŸŸæ¨¡å¼ã€å‘èµ·è¯·æ±‚ï¼ˆè¯·æ±‚å¤´ <code>Sec-Fetch-Mode = no-cors</code>ï¼‰ï¼›OBS æœåŠ¡å™¨è¯†åˆ«è¯¥æ¨¡å¼åï¼Œä¸è¿”å› <code>Access-Control-Allow-Origin</code> ç­‰è·¨åŸŸå“åº”å¤´ï¼Œæµè§ˆå™¨åˆ™å°†è¿™ä»½ã€Œæ— è·¨åŸŸå“åº”å¤´çš„å›¾ç‰‡èµ„æºã€ç¼“å­˜è‡³æœ¬åœ°ï¼›</li>
<li>è·¨åŸŸæ¨¡å¼ç¼“å­˜å†²çªï¼šç¬¬äºŒæ¬¡åŠ è½½è®¾ç½® <code>crossOrigin: "anonymous"</code>ï¼Œæµè§ˆå™¨éœ€ä»¥ã€Œè·¨åŸŸæ¨¡å¼ã€è¯·æ±‚ï¼›ä½†å› å›¾ç‰‡ URL æœªå˜ï¼Œæµè§ˆå™¨ç›´æ¥å¤ç”¨æœ¬åœ°ç¼“å­˜çš„æ— è·¨åŸŸå“åº”å¤´èµ„æºï¼Œè·¨åŸŸæ ¡éªŒæ— æ³•é€šè¿‡ï¼Œæœ€ç»ˆè§¦å‘é”™è¯¯ã€‚</li>
</ol>
<p>å…³é”®ç»“è®ºï¼šåŒä¸€å¼ å›¾ç‰‡çš„æ‰€æœ‰è¯·æ±‚ï¼Œè·¨åŸŸæ ‡è¯†å¿…é¡»å®Œå…¨ç»Ÿä¸€ï¼ˆè¦ä¹ˆæ‰€æœ‰è¯·æ±‚éƒ½è®¾ <code>crossOrigin</code>ï¼Œè¦ä¹ˆéƒ½ä¸è®¾ï¼‰ï¼Œå¦åˆ™ä¼šå› ç¼“å­˜æœºåˆ¶å¯¼è‡´è·¨åŸŸç­–ç•¥å†²çªã€‚</p>
<h2 data-id="heading-2">è§£å†³åŠæ³•</h2>
<h3 data-id="heading-3">1. æ ¸å¿ƒé€šç”¨æ–¹æ¡ˆï¼šç»Ÿä¸€è·¨åŸŸæ ‡è¯†ï¼ˆæ¨èé¦–é€‰ï¼‰</h3>
<p>æ€è·¯ï¼šç»Ÿä¸€æ‰€æœ‰åŠ è½½è¯¥å›¾ç‰‡çš„ <code>Image</code> å®ä¾‹çš„è·¨åŸŸé…ç½®ï¼ˆå‡è®¾ç½®æˆ–å‡ä¸è®¾ç½® <code>crossOrigin</code>ï¼‰ï¼Œç¡®ä¿ä¸¤æ¬¡è¯·æ±‚çš„è·¨åŸŸç­–ç•¥ä¸€è‡´ï¼Œä»æ ¹æºé¿å…ç¼“å­˜ä¸è·¨åŸŸè§„åˆ™çš„å†²çªã€‚</p>
<p>æ ¸å¿ƒæ³¨æ„ç‚¹ï¼š<code>crossOrigin</code> å¿…é¡»åœ¨ <code>src</code> èµ‹å€¼ <strong>ä¹‹å‰</strong> è®¾ç½®ã€‚è‹¥å…ˆèµ‹å€¼ <code>src</code>ï¼Œæµè§ˆå™¨ä¼šæå‰ä»¥é»˜è®¤æ¨¡å¼å‘èµ·è¯·æ±‚ï¼Œä»ä¼šè§¦å‘è·¨åŸŸå†²çªã€‚</p>
<p>æ­£ç¡®ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// ç¬¬ä¸€æ¬¡åŠ è½½ï¼šæå‰è®¾ç½® crossOriginï¼Œç»Ÿä¸€è·¨åŸŸç­–ç•¥</span>
  <span class="hljs-keyword">const</span> image = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
  image.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">"anonymous"</span>; 
  image.<span class="hljs-property">src</span> = <span class="hljs-string">'https://xxx.png'</span>;

  image.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å®Œæˆ'</span>);
      <span class="hljs-comment">// ç¬¬äºŒæ¬¡åŠ è½½ï¼šä¿æŒ crossOrigin é…ç½®ä¸€è‡´</span>
      <span class="hljs-keyword">const</span> image2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
      image2.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">"anonymous"</span>; 
      image2.<span class="hljs-property">src</span> = image.<span class="hljs-property">src</span>;

      image2.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡2åŠ è½½å®Œæˆ'</span>);
      });
  });

  <span class="hljs-comment">// æ·»åŠ é”™è¯¯ç›‘å¬ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥</span>
  image.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å›¾ç‰‡1åŠ è½½å¤±è´¥:'</span>, e));
  image2.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å›¾ç‰‡2åŠ è½½å¤±è´¥:'</span>, e));
});
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šç»å¤§å¤šæ•°å‰ç«¯åœºæ™¯ï¼ˆåŒ…æ‹¬ <code>VueCropper </code> ç­‰ä¾èµ– canvas çš„è£å‰ªç»„ä»¶åœºæ™¯ï¼‰ï¼Œä¸”å›¾ç‰‡å­˜å‚¨ç«¯<code>ï¼ˆOBS/CDNï¼‰</code>å·²é…ç½®è·¨åŸŸå…è®¸è§„åˆ™ã€‚</p>
<h3 data-id="heading-4">2. ç»•è¿‡ç¼“å­˜æ–¹æ¡ˆï¼šè®©ç¬¬äºŒæ¬¡è¯·æ±‚è§†ä¸ºã€Œæ–°èµ„æºã€</h3>
<p>æ€è·¯ï¼šè‹¥å†å²ä»£ç æ— æ³•æ‰¹é‡ä¿®æ”¹ <code>crossOrigin</code> é…ç½®ï¼Œå¯é€šè¿‡è®©ç¬¬äºŒæ¬¡è¯·æ±‚ã€Œé¿å¼€ç¼“å­˜ã€ï¼Œè¿«ä½¿æµè§ˆå™¨é‡æ–°å‘ OBS æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼ˆè€Œéå¤ç”¨æ—§ç¼“å­˜ï¼‰ï¼Œä»è€Œé¿å…è·¨åŸŸç­–ç•¥å†²çªã€‚</p>
<p>æ¨èæ–¹æ¡ˆï¼šç»™å›¾ç‰‡ URL æ·»åŠ éšæœºå‚æ•°ï¼ˆå¦‚æ—¶é—´æˆ³ï¼‰ï¼Œä½¿æµè§ˆå™¨è¯†åˆ«ä¸ºã€Œæ–°èµ„æºã€ï¼Œè§¦å‘å…¨æ–°è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">image.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> image2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
  image2.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">"anonymous"</span>;
  <span class="hljs-comment">// è¿½åŠ æ—¶é—´æˆ³å‚æ•°ï¼Œé¿å¼€æµè§ˆå™¨ç¼“å­˜</span>
  image2.<span class="hljs-property">src</span> = <span class="hljs-string">`<span class="hljs-subst">${image.src}</span>&amp;t=<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>; 
  image2.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡2åŠ è½½å®Œæˆ'</span>));
});
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šå†å²ä»£ç æ¶æ„å¤æ‚ï¼Œæ— æ³•æ‰¹é‡ç»Ÿä¸€ <code>crossOrigin</code> é…ç½®ï¼Œéœ€å¿«é€Ÿä¸´æ—¶ä¿®å¤è·¨åŸŸé—®é¢˜ã€‚</p>
<p>ç¼ºç‚¹ï¼šå®Œå…¨å¤±å»ç¼“å­˜ä¼˜åŠ¿ï¼Œæ¯æ¬¡è¯·æ±‚å‡éœ€é‡æ–°ä¸‹è½½å›¾ç‰‡ï¼Œä¼šå¢åŠ å¸¦å®½æ¶ˆè€—å¹¶å»¶é•¿é¡µé¢åŠ è½½æ—¶é—´ï¼Œä»…å»ºè®®ä¸´æ—¶ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-5">3. åç«¯/å­˜å‚¨ç«¯æ–¹æ¡ˆï¼šä»æ ¹æºæ¶ˆé™¤è·¨åŸŸ</h3>
<p>æ€è·¯ï¼šé€šè¿‡åç«¯ä»£ç†æˆ–åŸŸåç»‘å®šï¼Œå°†ã€Œè·¨åŸŸå›¾ç‰‡è¯·æ±‚ã€è½¬ä¸ºã€ŒåŒæºè¯·æ±‚ã€ï¼Œä»æ ¹æºä¸Šæ¶ˆé™¤è·¨åŸŸé—®é¢˜ï¼Œæ— éœ€å‰ç«¯é¢å¤–é…ç½® <code>crossOrigin</code>ã€‚</p>
<p>å…·ä½“åšæ³•ï¼š</p>
<ol>
<li>åŒæºä»£ç†ï¼ˆæ¨èï¼‰ï¼šå‰ç«¯è¯·æ±‚è‡ªèº«åç«¯çš„ä»£ç†æ¥å£ï¼Œç”±åç«¯ä»£ä¸ºæ‹‰å– OBS å›¾ç‰‡å¹¶è¿”å›ç»™å‰ç«¯ã€‚æ­¤æ—¶å‰ç«¯æ¥æ”¶çš„å›¾ç‰‡ä¸ºåŒæºèµ„æºï¼Œæ— éœ€ä»»ä½•è·¨åŸŸé…ç½®ã€‚</li>
</ol>
<p>ç¤ºä¾‹ï¼ˆ<code>Node.js/Express</code> ä»£ç†ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åç«¯ä»£ç†ä»£ç ï¼ˆNode.js/Expressï¼‰</span>
<span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">'axios'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

<span class="hljs-comment">// å›¾ç‰‡ä»£ç†æ¥å£ï¼šæ¥æ”¶å‰ç«¯ä¼ é€’çš„ OBS å›¾ç‰‡ URL</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/proxy-image'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">const</span> imgUrl = req.<span class="hljs-property">query</span>.<span class="hljs-property">url</span>;
  <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// åç«¯è¯·æ±‚ OBS å›¾ç‰‡ï¼Œä»¥æµå½¢å¼è¿”å›ç»™å‰ç«¯</span>
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(imgUrl, { <span class="hljs-attr">responseType</span>: <span class="hljs-string">'stream'</span> });
      response.<span class="hljs-property">data</span>.<span class="hljs-title function_">pipe</span>(res);
  } <span class="hljs-keyword">catch</span> (err) {
      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å¤±è´¥'</span>);
  }
});

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»£ç†æœåŠ¡å¯åŠ¨åœ¨ 3000 ç«¯å£'</span>));
</code></pre>
<p>å‰ç«¯ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯ä»£ç ï¼šè¯·æ±‚åç«¯ä»£ç†æ¥å£ï¼Œæ— è·¨åŸŸé—®é¢˜</span>
<span class="hljs-keyword">const</span> image = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
image.<span class="hljs-property">src</span> = <span class="hljs-string">`http://localhost:3000/proxy-image?url=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-string">'https://xxx.png'</span>)}</span>`</span>;
image.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å®Œæˆ'</span>));
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šå‰ç«¯éœ€å¤§é‡å¤„ç†è·¨åŸŸå›¾ç‰‡ï¼ˆå¦‚æ‰¹é‡è£å‰ªã€åƒç´ æ“ä½œï¼‰ï¼›è¿½æ±‚ç¨³å®šå¯é çš„è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼Œä¸å¸Œæœ›ä¾èµ–å‰ç«¯ä»£ç é…ç½®ã€‚</p>
<p>ä¼˜ç‚¹ï¼šå½»åº•è§£å†³è·¨åŸŸé—®é¢˜ï¼Œå‰ç«¯æ— éœ€ä»»ä½•è·¨åŸŸç›¸å…³é…ç½®ï¼›ç¼“å­˜æœºåˆ¶å¯æ­£å¸¸ç”Ÿæ•ˆï¼Œä¸å½±å“åŠ è½½æ€§èƒ½ï¼›å®‰å…¨æ€§æ›´é«˜ï¼ˆé¿å…è®¾ç½® <code>*</code> å…è®¸æ‰€æœ‰åŸŸåè·¨åŸŸï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[trea solo,è®©æˆ‘ä»ç‰›é©¬å¤–åŒ…ç¿»èº«å½“â€œç”²æ–¹â€]]></title>    <link>https://juejin.cn/post/7588086766234779686</link>    <guid>https://juejin.cn/post/7588086766234779686</guid>    <pubDate>2025-12-26T09:31:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766234779686" data-draft-id="7587965908288159754" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="trea solo,è®©æˆ‘ä»ç‰›é©¬å¤–åŒ…ç¿»èº«å½“â€œç”²æ–¹â€"/> <meta itemprop="keywords" content="Trae,Python"/> <meta itemprop="datePublished" content="2025-12-26T09:31:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†·æœˆåŠæ˜"/> <meta itemprop="url" content="https://juejin.cn/user/2520515442391102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            trea solo,è®©æˆ‘ä»ç‰›é©¬å¤–åŒ…ç¿»èº«å½“â€œç”²æ–¹â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2520515442391102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†·æœˆåŠæ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:31:21.000Z" title="Fri Dec 26 2025 09:31:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šç‰›é©¬çš„å¦ç™½</h2>
<p>é©¬ä¸Šå°±è¦2026äº†ï¼Œæˆ‘å¾—æ‰¿è®¤ä¸€ä»¶äº‹ï¼šAIå·¥å…·å·²ç»æŠŠæˆ‘"æƒ¯å"äº†ã€‚</p>
<p>åœ¨ç”µåŠ›è´Ÿè·é¢„æµ‹è¿™ä¸ªé¢†åŸŸæ‘¸çˆ¬æ»šæ‰“è¿™ä¹ˆä¹…ï¼Œä¹ æƒ¯äº†æœè®ºæ–‡ã€æ‰‹æ’¸ä»£ç ã€è°ƒå‚è°ƒåˆ°æ€€ç–‘äººç”Ÿã€‚ç›´åˆ°æœ€è¿‘å¼€å§‹ç”¨Trea AIçš„Soloæ¨¡å¼ï¼Œæ‰å‘ç°åŸæ¥å¯ä»¥è¿™ä¹ˆç©â€”â€”å®ƒä¸åªæ˜¯ä¸ªèŠå¤©å·¥å…·ï¼Œæ›´åƒä¸€ä¸ªèƒ½ç‹¬ç«‹æ€è€ƒçš„æŠ€æœ¯åˆä¼™äººï¼šä½ æ‰”éœ€æ±‚ï¼Œå®ƒç»™æ–¹æ¡ˆï¼›ä½ å‡ºé—®é¢˜ï¼Œå®ƒè‡ªåŠ¨debugï¼›ä½ æ‡’å¾—å†™æ–‡æ¡£ï¼Œå®ƒä¸€æ°”å‘µæˆã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¸å¹ä¸é»‘ï¼Œå°±èŠèŠæˆ‘æ˜¯æ€ä¹ˆåœ¨çœŸå®é¡¹ç›®é‡ŒæŠŠTrea AIç”¨æˆ"è‡ªå·±äºº"çš„ã€‚</p>
<hr/>
<h2 data-id="heading-1">Trea AIåœ¨æˆ‘é¡¹ç›®é‡Œçš„"æ‰“å·¥å®å½•"</h2>
<h3 data-id="heading-2">1. éœ€æ±‚åˆ†æï¼šä»"å•ƒè®ºæ–‡"åˆ°"èŠæ˜ç™½"</h3>
<p>ä»¥å‰åšæ–¹æ¡ˆè®¾è®¡ï¼Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼šGoogle Scholar â†’ ä¸‹è½½20ç¯‡è®ºæ–‡ â†’ çœ‹å®Œæ‘˜è¦æ”¾å¼ƒ10ç¯‡ â†’ ç²¾è¯»5ç¯‡ â†’ æœ€åå‘ç°è¿˜æ˜¯ä¸çŸ¥é“é€‰å“ªä¸ªã€‚</p>
<p>ç°åœ¨ï¼Ÿ</p>
<pre><code class="hljs language-arduino" lang="arduino">æˆ‘ï¼š<span class="hljs-string">"Treaï¼ŒDirectå’Œé€’å½’é¢„æµ‹ç­–ç•¥ï¼Œå®é™…é¡¹ç›®é‡Œæ€ä¹ˆé€‰ï¼Ÿè¯´ç‚¹è®ºæ–‡é‡Œä¸å†™çš„ä¸œè¥¿ã€‚"</span>
Trea chatï¼š<span class="hljs-string">"Directå°±åƒç»™æ¯ä¸ªæ—¶é—´ç‚¹è¯·ä¸ªä¸“å®¶ï¼Œç²¾å‡†ä½†è´µï¼›é€’å½’ç›¸å½“äºä¸€ä¸ªä¸“å®¶è¿è½´è½¬ï¼Œçœé¢„ç®—ä½†ä¼šç´¯è¶´ã€‚ä½ æ•°æ®é‡å¤šå¤§ï¼Ÿé¢„ç®—å¤šå°‘ï¼Ÿ"</span>
æˆ‘ï¼š<span class="hljs-string">"å‡ ç™¾ä¸‡æ¡æ•°æ®ï¼Œé¢„ç®—...èƒ½ç”¨å¼€æºå°±ä¸èŠ±é’±ã€‚"</span>
Trea chatï¼š<span class="hljs-string">"é‚£è¿˜æ˜¯é€’å½’å§ï¼Œå…ˆè·‘é€šå†ä¼˜åŒ–ã€‚æˆ‘ç›´æ¥ç»™ä½ ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®æ¡†æ¶..."</span>
</code></pre>
<p>ååˆ†é’Ÿæå®šæŠ€æœ¯é€‰å‹ï¼Œè¿˜é™„èµ ä»£ç æ¡†æ¶ã€‚çœä¸‹çš„æ—¶é—´ï¼Œå¤Ÿæˆ‘å–æ¯å’–å•¡æ‘¸é±¼...å’³ï¼Œæ˜¯åšæ·±åº¦æ€è€ƒã€‚</p>
<h3 data-id="heading-3">2. ä»£ç ç”Ÿæˆï¼šä»"æ‰‹æ•²"åˆ°"å¯¹è¯"</h3>
<h4 data-id="heading-4">ç‰¹å¾å·¥ç¨‹ï¼šç»ˆäºä¸ç”¨å½“CVå·¥ç¨‹å¸ˆäº†</h4>
<p>åšæ¸©åº¦ç‰¹å¾é‚£å¤©ï¼Œæˆ‘è„‘å­å·²ç»è½¬ä¸åŠ¨äº†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æˆ‘ï¼š"Treaï¼Œå¸®æˆ‘å†™ä¸ªå‡½æ•°ï¼Œåˆ¤æ–­æ¸©åº¦æ˜¯ä¸æ˜¯åˆ°äº†å¼€ç©ºè°ƒçš„ä¸´ç•Œç‚¹"</span>
<span class="hljs-comment"># Treaï¼šç›´æ¥ç”©è¿‡æ¥å®Œæ•´ä»£ç ï¼Œè¿˜é™„å¸¦å•å…ƒæµ‹è¯•</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_temperature_threshold_features</span>(<span class="hljs-params">df</span>):
    <span class="hljs-string">"""
    æ ¹æ®æ¸©åº¦åˆ¤æ–­ç©ºè°ƒè´Ÿè·ç‰¹å¾çš„å‡½æ•°
    """</span>
    df = df.copy()
    
    <span class="hljs-comment"># å¤å­£åˆ¶å†·é˜ˆå€¼26Â°Cï¼šæ¯è¶…1åº¦ï¼Œè´Ÿè·æ˜æ˜¾å¢åŠ </span>
    df[<span class="hljs-string">'temp_above_cooling'</span>] = df[<span class="hljs-string">'temp_max'</span>].apply(<span class="hljs-keyword">lambda</span> x: <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, x - <span class="hljs-number">26</span>))
    df[<span class="hljs-string">'ac_cooling_usage'</span>] = (df[<span class="hljs-string">'temp_above_cooling'</span>] &gt; <span class="hljs-number">0</span>).astype(<span class="hljs-built_in">int</span>)
    
    <span class="hljs-comment"># å†¬å­£åˆ¶çƒ­é˜ˆå€¼12Â°Cï¼šä½äºè¿™ä¸ªï¼Œå–æš–è´Ÿè·ä¸Šæ¥</span>
    df[<span class="hljs-string">'temp_below_heating'</span>] = df[<span class="hljs-string">'temp_min'</span>].apply(<span class="hljs-keyword">lambda</span> x: <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, <span class="hljs-number">12</span> - x))
    df[<span class="hljs-string">'ac_heating_usage'</span>] = (df[<span class="hljs-string">'temp_below_heating'</span>] &gt; <span class="hljs-number">0</span>).astype(<span class="hljs-built_in">int</span>)
    
    <span class="hljs-comment"># æ¸©åº¦å˜åŒ–ç‡ï¼šåæ˜ å¤©æ°”çªå˜å¸¦æ¥çš„è´Ÿè·æ³¢åŠ¨</span>
    df[<span class="hljs-string">'temp_change_rate'</span>] = df[<span class="hljs-string">'temp_avg'</span>].diff().fillna(<span class="hljs-number">0</span>)
    
    <span class="hljs-keyword">return</span> df

<span class="hljs-comment"># Treaè¿˜è‡ªåŠ¨ç”Ÿæˆäº†æµ‹è¯•ç”¨ä¾‹ï¼š</span>
<span class="hljs-comment"># test_add_temperature_threshold_features()</span>
</code></pre>
<p>ä»£ç è§„èŒƒã€æ³¨é‡Šæ¸…æ™°ï¼Œæ¯”æˆ‘å†™çš„å¼ºå¤šäº†ã€‚æˆ‘ç›´æ¥git commitï¼Œç„¶åå‘Šè¯‰è‡ªå·±ï¼šè¿™æ˜¯å›¢é˜Ÿåä½œçš„æˆæœï¼ˆæ‰‹åŠ¨ç‹—å¤´ï¼‰ã€‚</p>
<h4 data-id="heading-5">Debugï¼šä»"æŠ“ç"åˆ°"è€ä¸­åŒ»é—®è¯Š"</h4>
<p>é‚£æ¬¡XGBoosté¢„æµ‹å€¼ç³»ç»Ÿæ€§åä½ï¼Œæˆ‘ç›¯äº†å¾ˆä¹…æ²¡å¤´ç»ªï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">æˆ‘ï¼š<span class="hljs-string">"æ¨¡å‹é¢„æµ‹å€¼æ•´ä½“åä½30%å·¦å³ï¼Œå¯èƒ½æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿæˆ‘æ£€æŸ¥äº†æ•°æ®åˆ†å¸ƒï¼Œæ²¡å•¥å¼‚å¸¸ã€‚"</span>
Treaï¼š<span class="hljs-string">"çœ‹è¿‡ç›®æ ‡å˜é‡å—ï¼Ÿç”µåŠ›è´Ÿè·æ•°æ®é•¿å°¾åˆ†å¸ƒä¸¥é‡ï¼Œä½ ä¸åšå˜æ¢ï¼Œæ¨¡å‹ä¼šè¢«å¤§æ•°å€¼å¸¦åï¼Œå¯¼è‡´æ•´ä½“ä½ä¼°ã€‚è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ªå®Œæ•´çš„æ•°æ®é¢„å¤„ç†pipelineå—ï¼Ÿ"</span>
æˆ‘ï¼š<span class="hljs-string">"å¸®æˆ‘åˆ—å‡ºè®¡åˆ’å¹¶å®ç°ã€‚"</span>
</code></pre>
<p>å¯¹æ•°å˜æ¢åï¼Œé—®é¢˜è§£å†³äº†ã€‚æ•´ä¸ªè¿‡ç¨‹å°±åƒæ‰¾ä¸ªè€ä¸­åŒ»æŠŠè„‰ï¼Œä¸‰å¥è¯ç‚¹åˆ°è¦å®³ï¼Œè¿˜ç›´æ¥ç»™ä½ å¼€å¥½è¯æ–¹ã€‚</p>
<hr/>
<h3 data-id="heading-6">3. æ–‡æ¡£ç¼–å†™ï¼šä»"æ‹–å»¶ç—‡"åˆ°"ç§’äº¤å·®"</h3>
<p>å†™æ–‡æ¡£çš„ç—›è‹¦ï¼Œè°å†™è°çŸ¥é“ã€‚ç°åœ¨æˆ‘éƒ½ç›´æ¥"å£è¿°"ï¼š
ä»£ç æ‰”è¿‡å»ï¼Œè®©å®ƒæŒ‰å…¬å¸æ¨¡æ¿ç”Ÿæˆæ¥å£å®šä¹‰å¤åˆ¶ç»™å®ƒï¼Œäº”åˆ†é’Ÿå‡ºæ–‡æ¡£ç»™å®ƒå¤§çº²ï¼Œå®ƒå¸®æˆ‘å†™é€å­—ç¨¿ï¼Œè¿˜æç¤ºå“ªé‡ŒåŠ å›¾è¡¨</p>
<hr/>
<h2 data-id="heading-7">å·¥ä½œæ¨¡å¼çš„"è¢«åŠ¨å‡çº§"</h2>
<h3 data-id="heading-8">1. è§’è‰²å˜äº†ï¼šä»"å…¨æ ˆ"åˆ°"æ¶æ„å¸ˆ"</h3>
<p>ä»¥å‰ï¼šéœ€æ±‚ã€ç¼–ç ã€æµ‹è¯•ã€æ–‡æ¡£ä¸€æ¡é¾™ã€‚
ç°åœ¨ï¼šæˆ‘è´Ÿè´£æƒ³ï¼ŒTreaè´Ÿè´£å¹²ã€‚å¬èµ·æ¥åƒèµ„æœ¬å®¶ï¼Œä½†ç¡®å®æ•ˆç‡ç¿»å€ã€‚</p>
<h3 data-id="heading-9">2. å†³ç­–å˜äº†ï¼šä»"æ‹è„‘è¢‹"åˆ°"å…ˆé—®Trea"</h3>
<p>æŠ€æœ¯é€‰å‹å‰å…ˆé—®Treaï¼š"è¿™ä¸ªæ–¹æ¡ˆæœ‰å•¥å‘ï¼Ÿ" å®ƒæ€»èƒ½è¯´å‡ºå‡ ä¸ªæˆ‘æ²¡æƒ³åˆ°çš„corner caseã€‚ç›¸å½“äºå¸¦äº†ä¸ªç»éªŒä¸°å¯Œçš„é¡¾é—®ã€‚</p>
<h3 data-id="heading-10">3. é€Ÿåº¦å˜äº†ï¼šä»"é©¬æ‹‰æ¾"åˆ°"å†²åˆº"</h3>
<p>ç‰¹å¾å·¥ç¨‹è¿™å—ï¼ŒåŸè®¡åˆ’ä¸‰å‘¨ï¼Œå®é™…äº”å¤©ã€‚é¡¹ç›®ç»ç†é—®æˆ‘æ˜¯ä¸æ˜¯å·å·åŠ ç­äº†ï¼Œæˆ‘è¯´ï¼šä¸ï¼Œæ˜¯æˆ‘æ‰¾äº†ä¸ªä¸æ”¶è´¹çš„å¸®æ‰‹ã€‚</p>
<h3 data-id="heading-11">4. å…³æ³¨ç‚¹å˜äº†ï¼šä»"ç»†èŠ‚"åˆ°"å…¨å±€"</h3>
<p>ä¸ç”¨çº ç»“äºæŸä¸ªå‡½æ•°æ€ä¹ˆå†™ï¼Œæ›´å¤šæ—¶é—´èŠ±åœ¨ç³»ç»Ÿè®¾è®¡å’Œä¸šåŠ¡ç†è§£ä¸Šã€‚è¿™ç§è½¬å˜ï¼Œåè€Œè®©æˆ‘çš„å·¥ä½œæ›´æœ‰ä»·å€¼ã€‚</p>
<hr/>
<h2 data-id="heading-12">ä¸€äº›"è¡€æ³ªæ€»ç»“"çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-13">1. Promptè¦"å…·ä½“"</h3>
<p>æ¨¡ç³ŠæŒ‡ä»¤ = åƒåœ¾è¾“å‡ºã€‚æˆ‘çš„æ¨¡æ¿ï¼š</p>
<pre><code class="hljs">èƒŒæ™¯ + å…·ä½“ä»»åŠ¡ + è¾“å‡ºæ ¼å¼ + è´¨é‡è¦æ±‚
</code></pre>
<p>æ¯”å¦‚ï¼š"æˆ‘éœ€è¦ä¸€ä¸ªPythonå‡½æ•°ï¼Œè®¡ç®—æ—¶é—´åºåˆ—çš„æ»åç‰¹å¾ã€‚è¾“å…¥æ˜¯DataFrameï¼Œè¾“å‡ºæ˜¯åŠ äº†ç‰¹å¾çš„DataFrameã€‚ä»£ç è¦æœ‰ç±»å‹æç¤ºå’Œdocstringï¼Œé£æ ¼å‚è€ƒscikit-learnã€‚"</p>
<h3 data-id="heading-14">2. åˆ«æ‡’ï¼šAIçš„ä»£ç ä¹Ÿå¾—review</h3>
<p>ä¿¡ä»»ä½†è¦éªŒè¯ã€‚æˆ‘åšæŒï¼š</p>
<ul>
<li>æ‰€æœ‰Treaç”Ÿæˆçš„æ ¸å¿ƒé€»è¾‘å¿…é¡»è·‘é€šå•å…ƒæµ‹è¯•</li>
<li>æ€§èƒ½å…³é”®éƒ¨åˆ†è¦profile</li>
<li>ä»£ç é£æ ¼ä¸ç¬¦åˆå›¢é˜Ÿè§„èŒƒçš„ï¼Œè®©å®ƒé‡å†™</li>
</ul>
<h3 data-id="heading-15">3. æŒç»­å¯¹è¯ï¼šåƒå¸¦æ–°äººä¸€æ ·</h3>
<p>ä¸€æ¬¡ç»™å¤§ä»»åŠ¡ï¼Œä¸å¦‚åˆ†æ­¥æ¥ã€‚å…ˆè®©å®ƒå‡ºæ¡†æ¶ï¼Œå†é€æ­¥ç»†åŒ–ã€‚è¿™æ ·è¿”å·¥æœ€å°‘ã€‚</p>
<hr/>
<h2 data-id="heading-16">é‚£äº›ä¸å¾—ä¸è¯´çš„"å‰¯ä½œç”¨"</h2>
<h3 data-id="heading-17">1. æŠ€èƒ½æ ‘ç¡®å®å˜äº†</h3>
<p>ç°åœ¨æ›´çœ‹é‡ï¼š</p>
<ul>
<li><strong>æé—®èƒ½åŠ›</strong>ï¼šé—®å¯¹é—®é¢˜ï¼Œæ¯”çŸ¥é“ç­”æ¡ˆé‡è¦</li>
<li><strong>æ‰¹åˆ¤æ€ç»´</strong>ï¼šAIä¹Ÿä¼šä¸€æœ¬æ­£ç»èƒ¡è¯´å…«é“</li>
<li><strong>ç³»ç»Ÿè®¾è®¡</strong>ï¼šæ€ä¹ˆæŠŠAIé›†æˆåˆ°workflowé‡Œ</li>
</ul>
<h3 data-id="heading-18">2. ç‰ˆæƒé—®é¢˜ï¼šåˆ«å½“ç”©æ‰‹æŒæŸœ</h3>
<p>æˆ‘çš„åº•çº¿ï¼š</p>
<ul>
<li>æ ¸å¿ƒç®—æ³•è‡ªå·±å†™</li>
<li>Treaä»£ç å¿…é¡»ç†è§£åä½¿ç”¨</li>
<li>å•†ç”¨é¡¹ç›®ä¿ç•™ä¿®æ”¹è®°å½•</li>
</ul>
<h3 data-id="heading-19">3. è­¦æƒ•"AIä¾èµ–ç—‡"</h3>
<p>æœ‰æ—¶å€™è¿˜æ˜¯å¾—è‡ªå·±åŠ¨æ‰‹ã€‚AIæ˜¯æ‹æ–ï¼Œä¸æ˜¯è½®æ¤…ã€‚è„‘å­ä¸èƒ½åœã€‚</p>
<hr/>
<h2 data-id="heading-20">ç»™è¿˜åœ¨è§‚æœ›çš„åŒå­¦å‡ å¥å®è¯</h2>
<p>Trea AIè¿™ç©æ„ï¼Œç”¨å¥½äº†æ˜¯çœŸé¦™ï¼Œä½†åˆ«ç¥è¯å®ƒã€‚å®ƒä¸ä¼šå–ä»£ä½ ï¼Œä½†ä¼šè®©ä¼šç”¨çš„äººæ•ˆç‡ç¿»å€ã€‚</p>
<p>åœ¨ç”µåŠ›é¢„æµ‹è¿™ä¸ªé¢†åŸŸï¼Œå®ƒå¸®æˆ‘è§£å†³äº†è‡³å°‘40%çš„é‡å¤åŠ³åŠ¨ï¼Œè®©æˆ‘æœ‰æ›´å¤šæ—¶é—´åšçœŸæ­£æœ‰ä»·å€¼çš„äº‹â€”â€”æ¯”å¦‚ç†è§£ä¸šåŠ¡ã€ä¼˜åŒ–æ¨¡å‹ã€è·Ÿè°ƒåº¦ä¸­å¿ƒçš„è€ç™»ä»¬æ‰¯çš®ã€‚</p>
<p>è¯´åˆ°åº•ï¼Œå®ƒå°±æ˜¯ä¸ªè¶…çº§å·¥å…·ã€‚å·¥å…·çš„ä»·å€¼ï¼Œå–å†³äºç”¨å®ƒçš„äººã€‚</p>
<p>å¯¹äº†ï¼Œæœ€è¿‘æˆ‘åœ¨å°è¯•è®©å®ƒå¸®æˆ‘å†™å‘¨æŠ¥ã€‚æ•ˆæœä¸é”™ï¼Œå°±æ˜¯å¾—æ‰‹åŠ¨åˆ æ‰ä¸€äº›è¿‡äºå¤¸å¼ çš„"è‡ªæˆ‘è¡¨æ‰¬"ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>