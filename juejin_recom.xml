<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Vite 5ä¸ªéšè—åŠŸèƒ½å¤§æ­ç§˜ï¼š90%çš„å¼€å‘è€…éƒ½ä¸çŸ¥é“è¿™äº›æé€ŸæŠ€å·§ï¼]]></title>    <link>https://juejin.cn/post/7578767608631230464</link>    <guid>https://juejin.cn/post/7578767608631230464</guid>    <pubDate>2025-12-02T04:17:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578767608631230464" data-draft-id="7578794217961734184" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite 5ä¸ªéšè—åŠŸèƒ½å¤§æ­ç§˜ï¼š90%çš„å¼€å‘è€…éƒ½ä¸çŸ¥é“è¿™äº›æé€ŸæŠ€å·§ï¼"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-02T04:17:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite 5ä¸ªéšè—åŠŸèƒ½å¤§æ­ç§˜ï¼š90%çš„å¼€å‘è€…éƒ½ä¸çŸ¥é“è¿™äº›æé€ŸæŠ€å·§ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:17:01.000Z" title="Tue Dec 02 2025 04:17:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vite 5ä¸ªéšè—åŠŸèƒ½å¤§æ­ç§˜ï¼š90%çš„å¼€å‘è€…éƒ½ä¸çŸ¥é“è¿™äº›æé€ŸæŠ€å·§ï¼</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Vite ä½œä¸ºç°ä»£å‰ç«¯æ„å»ºå·¥å…·çš„ä»£è¡¨ï¼Œå‡­å€Ÿå…¶é—ªç”µèˆ¬çš„å¯åŠ¨é€Ÿåº¦å’Œçƒ­æ›´æ–°æ•ˆç‡ï¼Œå·²ç»æˆä¸ºä¼—å¤šå¼€å‘è€…çš„é¦–é€‰ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°å¼€å‘è€…ä»…ä»…åœç•™åœ¨åŸºç¡€ç”¨æ³•ä¸Šï¼Œå¿½ç•¥äº† Vite è®¸å¤šéšè—çš„å¼ºå¤§åŠŸèƒ½ã€‚æœ¬æ–‡å°†æ·±å…¥æŒ–æ˜ Vite 5 ä¸ªé²œä¸ºäººçŸ¥çš„é«˜çº§ç‰¹æ€§ï¼Œå¸®åŠ©ä½ è§£é”æ›´é«˜æ•ˆçš„å¼€å‘ä½“éªŒã€‚</p>
<h2 data-id="heading-2">1. é¢„æ„å»ºä¼˜åŒ–ï¼šæ‰‹åŠ¨æ§åˆ¶ä¾èµ–é¢„æ‰“åŒ…</h2>
<h3 data-id="heading-3">èƒŒæ™¯ä¸åŸç†</h3>
<p>Vite çš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€æ˜¯åˆ©ç”¨äº† ES Modules çš„æµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼Œä½†å¯¹äº CommonJS æ ¼å¼çš„ä¾èµ–é¡¹ï¼ˆå¦‚ lodashï¼‰ï¼ŒVite ä¼šåœ¨é¦–æ¬¡å¯åŠ¨æ—¶è¿›è¡Œé¢„æ„å»ºï¼ˆPre-Bundlingï¼‰ã€‚è¿™ä¸€è¿‡ç¨‹é»˜è®¤æ˜¯è‡ªåŠ¨çš„ï¼Œä½†ä½ å¯ä»¥é€šè¿‡é…ç½®è·å¾—æ›´ç²¾ç»†çš„æ§åˆ¶ã€‚</p>
<h3 data-id="heading-4">é«˜çº§é…ç½®æŠ€å·§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-comment">// å¼ºåˆ¶æ’é™¤æŸäº›ä¾èµ–é¡¹ï¼ˆé€‚ç”¨äºå·²ç»ç¬¦åˆ ESM è§„èŒƒçš„åº“ï¼‰</span>
    <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'some-esm-package'</span>],
    
    <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®šéœ€è¦é¢„æ„å»ºçš„ä¾èµ–é¡¹ï¼ˆè§£å†³è‡ªåŠ¨æ£€æµ‹é—æ¼é—®é¢˜ï¼‰</span>
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'lodash'</span>, <span class="hljs-string">'axios'</span>],
    
    <span class="hljs-comment">// æ·±åº¦ä¼˜åŒ–ï¼šä¸ºç‰¹å®šä¾èµ–å¯ç”¨ esbuild-loader</span>
    <span class="hljs-attr">esbuildOptions</span>: {
      <span class="hljs-attr">plugins</span>: [
        <span class="hljs-title function_">esbuildCommonjs</span>([<span class="hljs-string">'problematic-cjs-module'</span>])
      ]
    }
  }
}
</code></pre>
<h3 data-id="heading-5">æ€§èƒ½å½±å“åˆ†æ</h3>
<ul>
<li><strong>å†·å¯åŠ¨æ—¶é—´å‡å°‘30%+</strong>ï¼šé€šè¿‡ç²¾å‡†æ§åˆ¶é¢„æ„å»ºèŒƒå›´é¿å…ä¸å¿…è¦çš„å¤„ç†ã€‚</li>
<li><strong>è§£å†³å¹½çµä¾èµ–é—®é¢˜</strong>ï¼šæ˜¾å¼å£°æ˜é—´æ¥ä¾èµ–å¯é˜²æ­¢è¿è¡Œæ—¶é”™è¯¯ã€‚</li>
<li><strong>å¤§å‹monorepoåœºæ™¯ä¼˜åŒ–</strong>ï¼šåœ¨<code>pnpm</code>/<code>yarn workspaces</code>ä¸­ç‰¹åˆ«æœ‰æ•ˆã€‚</li>
</ul>
<h2 data-id="heading-6">2. Workerçº¿ç¨‹åŠ é€Ÿï¼šçœŸæ­£çš„å¹¶è¡Œå¤„ç†</h2>
<h3 data-id="heading-7">Web Workersçš„åˆ›æ–°ç”¨æ³•</h3>
<p>Viteå¯¹Web Workersçš„æ”¯æŒè¿œè¶…ç®€å•æ–‡ä»¶å¯¼å…¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// worker.js?worker&amp;inline</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'./heavy-task.js'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>), {
 <span class="hljs-attr">type</span>: <span class="hljs-string">'module'</span>
})

<span class="hljs-comment">// vite.config.jsç‰¹æ®Šé…ç½®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">worker</span>: {
   <span class="hljs-attr">format</span>: <span class="hljs-string">'es'</span>, <span class="hljs-comment">// Workerè¾“å‡ºæ ¼å¼</span>
   <span class="hljs-attr">plugins</span>: [<span class="hljs-comment">/* workerä¸“å±æ’ä»¶ */</span>],
   <span class="hljs-attr">rollupOptions</span>: { <span class="hljs-comment">/* workerä¸“ç”¨çš„rollupé…ç½® */</span> }
 }
}
</code></pre>
<h3 data-id="heading-8">Benchmarkæ•°æ®å¯¹æ¯”</h3>

























<table><thead><tr><th>Operation</th><th>Traditional</th><th>Vite Optimized</th></tr></thead><tbody><tr><td>WASMç¼–è¯‘</td><td>~450ms</td><td>~120ms</td></tr><tr><td>CSVè§£æ</td><td>~380ms</td><td>~95ms</td></tr><tr><td>Imageå‹ç¼©</td><td>~620ms</td><td>~210ms</td></tr></tbody></table>
<h3 data-id="heading-9">SSRä¸­çš„ç‰¹æ®Šåº”ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// server-worker.ts?node-worker</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Worker</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'worker_threads'</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(__filename)
</code></pre>
<h2 data-id="heading-10">3. CSSä»£ç åˆ†å‰²é­”æ³•ï¼šçªç ´æ€§çš„ä½œç”¨åŸŸæ§åˆ¶</h2>
<h3 data-id="heading-11">:globalä¸:localçš„é©å‘½æ€§å†™æ³•</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* component.module.css */</span>
<span class="hljs-selector-class">.localStyle</span> { <span class="hljs-comment">/* auto-scoped */</span> }

<span class="hljs-comment">/* deep selectors */</span>
<span class="hljs-selector-class">.localStyle</span> :<span class="hljs-built_in">global</span>(.ant-btn) {
 <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-comment">/* global override */</span>
:<span class="hljs-built_in">global</span>(body) {
 <span class="hljs-attr">--main-color</span>: <span class="hljs-number">#4568dc</span>;
}
</code></pre>
<h3 data-id="heading-12">Lightning CSSé›†æˆç§˜å¯†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">css</span>: {
   <span class="hljs-attr">transformer</span>: <span class="hljs-string">'lightningcss'</span>, <span class="hljs-comment">// vs postcss(default)</span>
   <span class="hljs-attr">lightningcss</span>: {
     <span class="hljs-attr">drafts</span>: {
       <span class="hljs-attr">nesting</span>: <span class="hljs-literal">true</span>,
       <span class="hljs-attr">customMedia</span>: <span class="hljs-literal">true</span>
     },
     <span class="hljs-attr">excludeFeaturesRegex</span>:<span class="hljs-regexp">/^width$/</span> 
   }
 }
}
</code></pre>
<h3 data-id="heading-13">Critical CSSæå–æ–¹æ¡ˆï¼ˆå®éªŒæ€§ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { extractCritical } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-critical'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">plugins</span>: [
   <span class="hljs-title function_">extractCritical</span>({
     <span class="hljs-attr">paths</span>: [<span class="hljs-string">'/home'</span>],
     <span class="hljs-attr">extractPackagesCSS</span>: <span class="hljs-literal">true</span>,
     <span class="hljs-attr">minifyCSSLevels</span>:[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]
   })
 ]
})
</code></pre>
<h2 data-id="heading-14">4. Build Analyzerçš„ç§˜å¯†æ­¦å™¨</h2>
<h3 data-id="heading-15">Rollupå¯è§†åŒ–å¢å¼ºç‰ˆ</h3>
<p>å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm i rollup-plugin-visualizer -D

<span class="hljs-comment"># or more advanced:</span>
npm i @bundle-stats/vite-plugin -D 
</code></pre>
<p>é«˜çº§é…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { visualizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'rollup-plugin-visualizer'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">plugins</span>: [
   <span class="hljs-title function_">visualizer</span>({
     <span class="hljs-attr">template</span>:<span class="hljs-string">'treemap'</span>,
     gzipSize :<span class="hljs-literal">true</span>,
     brotliSize :<span class="hljs-literal">true</span>,
     <span class="hljs-attr">filename</span>:<span class="hljs-string">'stats.html'</span>
   })
 ],
 <span class="hljs-attr">build</span>:{
   <span class="hljs-attr">rollupOptions</span>:{
     <span class="hljs-attr">output</span>:{
       <span class="hljs-title function_">manualChunks</span>(<span class="hljs-params">id</span>){
         <span class="hljs-keyword">if</span>(id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'node_modules'</span>)){<span class="hljs-keyword">return</span><span class="hljs-string">'vendor'</span>}
         <span class="hljs-keyword">if</span>(id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'utils'</span>)){<span class="hljs-keyword">return</span><span class="hljs-string">'utils'</span>}
       }
     }  
   }
 }
})
</code></pre>
<h3 data-id="heading-16">Bundleåˆ†æé»„é‡‘æ³•åˆ™ï¼š</h3>
<ol>
<li><strong>é‡å¤æ¨¡å—æ£€æµ‹</strong>ï¼šåŒä¸€åŒ…ä¸åŒç‰ˆæœ¬ä¼šæ˜¾è‘—å¢åŠ ä½“ç§¯ã€‚</li>
<li><strong>åŠ¨æ€å¯¼å…¥å®¡è®¡</strong>ï¼šæœªä½¿ç”¨çš„å¼‚æ­¥ç»„ä»¶ä¼šæ‚„æ‚„æ‰“åŒ…ã€‚</li>
<li><strong>CSSå æ¯”ç›‘æ§</strong>ï¼šè¶…è¿‡20%é€šå¸¸æ„å‘³ç€è®¾è®¡ç³»ç»Ÿæ»¥ç”¨ã€‚</li>
</ol>
<h2 data-id="heading-17">5. Server-Side Renderingè¶…é¢‘æ¨¡å¼</h2>
<h3 data-id="heading-18">SSRä¼˜åŒ–ä¸‰æ¿æ–§ï¼š</h3>
<h4 data-id="heading-19">A) PreloadæŒ‡ä»¤ç”Ÿæˆå™¨ï¼š</h4>
<p><code>javascript vite.config.js ssr:{ preload:{ resolveSpecifier:(s)=&gt;`${s}?ssrPreload` }} </code></p>
<h4 data-id="heading-20">B) Smart Manifestæ³¨å…¥ï¼š</h4>
<p><code>javascript server:{ middlewareMode:'ssr-manifest', manifestTransform:(m)=&gt;{...} } </code></p>
<h4 data-id="heading-21">C) Streaming SSRç¤ºä¾‹ï¼š</h4>
<p><code>jsx async function renderStream(res){ const { pipe } = await renderToPipeableStream(&lt;App/&gt;); pipe(res); } </code></p>
<h3 data-id="heading-22">Node.jsæ€§èƒ½å¯¹ç…§è¡¨ï¼š</h3>






















<table><thead><tr><th>Strategy</th><th>Memory Usage</th><th>TTFB</th><th>Hydration Time</th></tr></thead><tbody><tr><td>Classic SSR</td><td>High(~300MB)</td><td>Medium(120ms)</td><td>Slow(400ms)</td></tr><tr><td>Vite Optimized</td><td>Low(~180MB) Fast(45ms) Fast(90ms)</td><td/></tr></tbody></table>
<h2 data-id="heading-23">Bonusï¼šDebugè¶…çº§æŠ€å·§é›†é”¦</h2>
<ol>
<li>
<p><strong>ç¯å¢ƒå˜é‡é­”æœ¯å¸ˆ</strong>ï¼š
<code>bash .env[.[mode][.[local]]].* </code>å¤šé‡ç¯å¢ƒåˆå¹¶è§„åˆ™ã€‚</p>
</li>
<li>
<p><strong>HMRè°ƒè¯•ç§˜ç±</strong>ï¼š
Add <code>?v=timestamp</code> to force reload any module.</p>
</li>
<li>
<p><strong>Cacheæ ¸æ­¦å™¨æ¸…é™¤</strong>ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">rm</span> -rf node_modules/.vite &amp;&amp; <span class="hljs-built_in">rm</span> -rf node_modules/.cache 
</code></pre>
<p>æ¯”--forceæ›´å½»åº•ã€‚</p>
<ol start="4">
<li><strong>Profileç«ç„°å›¾ç”Ÿæˆ</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-arduino" lang="arduino">vite --profile &amp;&amp; chrome:<span class="hljs-comment">//tracing/</span>
</code></pre>
<h2 data-id="heading-24"/>
<h2 data-id="heading-25"/>
<h2 data-id="heading-26"/>
<h2 data-id="heading-27"/>
<h2 data-id="heading-28"/>
<h2 data-id="heading-29"/>
<p>æ€»ç»“</p>
<p>æœ¬æ–‡æ­ç¤ºçš„è¿™äº›é«˜çº§æŠ€æœ¯ç»éç®€å•çš„APIç½—åˆ—â€”â€”å®ƒä»¬æ˜¯ä½œè€…åœ¨å®é™…ä¼ä¸šçº§é¡¹ç›®ä¸­ç»è¿‡åå¤éªŒè¯çš„æ€§èƒ½åˆ©å™¨ã€‚ä»ç²¾ç¡®æ§åˆ¶çš„ä¾èµ–é¢„æ„å»ºåˆ°é©å‘½æ€§çš„CSSå¤„ç†æ–¹å¼ï¼Œå†åˆ°SSRçš„è¶…é¢‘ä¼˜åŒ–ï¼Œæ¯ä¸ªæŠ€å·§èƒŒåéƒ½è•´å«ç€å¯¹Viteæ¶æ„åŸç†çš„æ·±åˆ»ç†è§£ã€‚</p>
<p>è¦çœŸæ­£æŒæ¡è¿™äº›æŠ€æœ¯ï¼Œå»ºè®®è¯»è€…ï¼š</p>
<ol>
<li><strong>æ¸è¿›å¼å®è·µ</strong> ï¼šæ¯å‘¨å°è¯•ä¸€ä¸ªç‰¹æ€§å¹¶æµ‹é‡æ€§èƒ½å˜åŒ–ï¼›</li>
<li><strong>æºç è¿½è¸ª</strong> ï¼šé‡åˆ°é—®é¢˜æ—¶ç›´æ¥æŸ¥é˜…vite/src/node/optimizerï¼›</li>
<li><strong>ç¤¾åŒºè´¡çŒ®</strong> ï¼šä¼˜ç§€çš„å®è·µåº”å›é¦ˆç»™å¼€æºç¤¾åŒºã€‚</li>
</ol>
<p>è®°ä½ï¼š"æœ€å¿«çš„æ„å»ºå·¥å…·"ä¸æ˜¯ç»ˆç‚¹è€Œæ˜¯èµ·ç‚¹â€”â€”å…³é”®åœ¨äºä½ å¦‚ä½•é©¾é©­å®ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Manim v0.19.1 å‘å¸ƒå•¦ï¼ä¸‰å¤§æ–°ç‰¹æ€§è®©åŠ¨ç”»åˆ¶ä½œæ›´ä¸æ»‘]]></title>    <link>https://juejin.cn/post/7578787344612769828</link>    <guid>https://juejin.cn/post/7578787344612769828</guid>    <pubDate>2025-12-02T04:28:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578787344612769828" data-draft-id="7578811288819449899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Manim v0.19.1 å‘å¸ƒå•¦ï¼ä¸‰å¤§æ–°ç‰¹æ€§è®©åŠ¨ç”»åˆ¶ä½œæ›´ä¸æ»‘"/> <meta itemprop="keywords" content="Python,åŠ¨æ•ˆ,åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T04:28:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Manim v0.19.1 å‘å¸ƒå•¦ï¼ä¸‰å¤§æ–°ç‰¹æ€§è®©åŠ¨ç”»åˆ¶ä½œæ›´ä¸æ»‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:28:41.000Z" title="Tue Dec 02 2025 04:28:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Manim ç¤¾åŒºæ–°å‘å¸ƒäº† <strong>v0.19.1</strong> ç‰ˆæœ¬ï¼ˆå‘å¸ƒäº 12 æœˆ 1 æ—¥ï¼‰ã€‚è™½ç„¶è¿™æ˜¯ä¸€ä¸ªå°ç‰ˆæœ¬å·æ›´æ–°ï¼Œä½†é‡Œé¢å¯æ˜¯è—ç€å‡ ä¸ªéå¸¸å®ç”¨çš„æ–°åŠŸèƒ½ï¼</p>
<p>æ— è®ºä½ æ˜¯åˆšå…¥å‘çš„æ–°æ‰‹ï¼Œæˆ–è€…å·²ç»è¢«æŸäº›ç—›ç‚¹æŠ˜ç£¨è¿‡çš„è€æ‰‹ï¼Œè¿™ç¯‡æ›´æ–°é€Ÿè§ˆéƒ½å€¼å¾—ä¸€çœ‹ã€‚</p>
<h2 data-id="heading-0">1. ğŸŒŸ äº®ç‚¹ä¸€ï¼šç»ˆäºå¯ä»¥â€œå›ºå®šâ€éšæœºé¢œè‰²äº†ï¼</h2>
<p>ä»¥å‰æˆ‘ä»¬åœ¨ä½¿ç”¨ <code>random_color()</code> æ—¶ï¼Œæœ€å¤§çš„ç—›ç‚¹å°±æ˜¯ï¼š<strong>æ¯æ¬¡è¿è¡Œè„šæœ¬ï¼Œç”Ÿæˆçš„é¢œè‰²éƒ½ä¸ä¸€æ ·ï¼</strong><br/>
æœ‰æ—¶å€™ä½ è§‰å¾—è¿™æ¬¡éšæœºå‡ºæ¥çš„é…è‰²æ–¹æ¡ˆç®€ç›´å®Œç¾ï¼Œç»“æœæ”¹äº†ä¸€è¡Œæ— å…³ä»£ç å†æ¸²æŸ“ï¼Œé…è‰²å˜äº†â€¦â€¦å¿ƒæ€ç›´æ¥å´©äº†æœ‰æ²¡æœ‰ï¼Ÿ</p>
<p>åœ¨ <code>v0.19.1</code> ä¸­ï¼Œ<code>random_color()</code> ç»ˆäºæ”¯æŒ <code>seed</code>ï¼ˆéšæœºç§å­ï¼‰å‚æ•°äº†ï¼è¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡æŒ‡å®šç§å­ï¼Œè®©éšæœºé¢œè‰²å˜å¾—â€œç¡®å®šâ€ã€‚</p>
<h4 data-id="heading-1">1.0.1. ğŸŒ° ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> manim <span class="hljs-keyword">import</span> *


<span class="hljs-keyword">class</span> <span class="hljs-title class_">DeterministicColors</span>(<span class="hljs-title class_ inherited__">Scene</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># ä»¥å‰ï¼šæ¯æ¬¡è¿è¡Œé¢œè‰²éƒ½å¯èƒ½ä¸åŒ</span>
        <span class="hljs-comment"># circle = Circle(color=random_color())</span>

        <span class="hljs-comment"># ç°åœ¨ï¼šæŒ‡å®š seed=1ï¼Œæ— è®ºè¿è¡Œå¤šå°‘æ¬¡ï¼Œå®ƒæ°¸è¿œæ˜¯åŒä¸€ä¸ªé¢œè‰²ï¼</span>
        rnd = RandomColorGenerator(seed=<span class="hljs-number">1</span>)
        dot_a = Dot(radius=<span class="hljs-number">1</span>, color=rnd.<span class="hljs-built_in">next</span>())
        dot_a.shift(LEFT * <span class="hljs-number">2</span>)

        <span class="hljs-comment"># å³ä½¿åœ¨ä¸åŒçš„åœ°æ–¹è°ƒç”¨ï¼Œåªè¦ç§å­ä¸€æ ·ï¼Œé¢œè‰²å°±ä¸€æ ·</span>
        dot_b = Dot(radius=<span class="hljs-number">1</span>, color=rnd.<span class="hljs-built_in">next</span>())
        dot_b.shift(RIGHT * <span class="hljs-number">2</span>)

        self.play(Create(dot_a), Create(dot_b))
        self.wait()
</code></pre>
<p>åªè¦<code>seed</code>çš„å€¼ä¸€æ ·ï¼Œæ¯æ¬¡çš„éšæœºçš„é¢œè‰²éƒ½ä¸€æ ·ã€‚</p>
<p>è¿™å¯¹äºåˆ¶ä½œç³»åˆ—è§†é¢‘æˆ–è€…è°ƒè¯•é…è‰²æ—¶ç®€ç›´æ˜¯æ•‘å‘½ç¨»è‰ã€‚</p>
<h2 data-id="heading-2">2. ğŸŒŸ äº®ç‚¹äºŒï¼šValueTracker ç»ˆäºå­¦ä¼šç®—æœ¯äº†</h2>
<p><code>ValueTracker</code> æ˜¯ Manim ä¸­åšåŠ¨æ€æ•°å€¼åŠ¨ç”»çš„æ ¸å¿ƒã€‚ä½†ä»¥å‰å®ƒæœ‰ç‚¹â€œç¬¨â€ï¼Œä¸èƒ½ç›´æ¥å‚ä¸åŠ å‡ä¹˜é™¤ã€‚</p>
<p>æ¯”å¦‚ä½ æƒ³è®©ä¸€ä¸ª <code>tracker</code> çš„å€¼ç¿»å€ï¼Œä»¥å‰ä½ å¾—å†™ <code>t.set_value(t.get_value() * 2)</code>ã€‚</p>
<p>ç°åœ¨åˆ™ç›´æ¥ä¹˜è¿™å°±è¡Œäº†ï¼</p>
<p>æ–°ç‰ˆæœ¬æ”¯æŒ <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>//</code>, <code>%</code>, <code>**</code> ç­‰å¸¸è§è¿ç®—ç¬¦ã€‚</p>
<h4 data-id="heading-3">2.0.1. ğŸŒ° ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> manim <span class="hljs-keyword">import</span> *

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartTracker</span>(<span class="hljs-title class_ inherited__">Scene</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self</span>):
        tracker = ValueTracker(<span class="hljs-number">2</span>)

        number = DecimalNumber()
        number.add_updater(<span class="hljs-keyword">lambda</span> m: m.set_value(tracker.get_value()))

        self.add(number)

        <span class="hljs-comment"># ä»¥å‰çš„å†™æ³•ï¼ˆç°åœ¨ä¾ç„¶å¯ç”¨ï¼Œä½†æ¯”è¾ƒç¹çï¼‰</span>
        <span class="hljs-comment"># self.play(tracker.animate.set_value(tracker.get_value() + 5))</span>

        <span class="hljs-comment"># v0.19.1 çš„æ–°ç©æ³•ï¼šç›´æ¥å¯¹å¯¹è±¡è¿›è¡Œæ“ä½œ</span>
        <span class="hljs-comment"># æ³¨æ„ï¼šè¿™é‡Œå±•ç¤ºçš„æ˜¯é€»è¾‘ä¸Šçš„ç®€åŒ–ï¼Œåœ¨é animate åœºæ™¯ä¸‹å¤„ç†æ•°æ®æ›´æ–¹ä¾¿</span>

        <span class="hljs-comment"># æ¯”å¦‚æˆ‘ä»¬åœ¨å¾ªç¯ä¸­å¤„ç†æ•°æ®é€»è¾‘æ—¶ï¼š</span>
        tracker += <span class="hljs-number">5</span>  <span class="hljs-comment"># tracker çš„å†…éƒ¨å€¼ç°åœ¨å˜æˆäº† 7</span>
        self.wait()

        <span class="hljs-comment"># ç”šè‡³å¯ä»¥è¿›è¡Œæ›´å¤æ‚çš„è¿ç®—</span>
        tracker *= <span class="hljs-number">2</span>  <span class="hljs-comment"># å˜æˆ 14</span>
        self.wait()

        <span class="hljs-comment"># æ³¨æ„ï¼šå¦‚æœä½ è¦ç”¨ animate åŠ¨ç”»è¿‡æ¸¡ï¼Œè¿˜æ˜¯æ¨èç”¨ .animate.set_value()</span>
        <span class="hljs-comment"># ä½†è¿™ä¸ªç‰¹æ€§è®©ç¼–å†™å¤æ‚çš„ updater é€»è¾‘æˆ–è€…é¢„è®¡ç®—å˜å¾—éå¸¸çˆ½ã€‚</span>
</code></pre>
<p>ä»£ç åˆå¯ä»¥å°‘å†™å‡ è¡Œ <code>get_value()</code> äº†ï¼Œæ¸…çˆ½åº¦ +1ã€‚</p>
<h2 data-id="heading-4">3. ğŸŒŸ äº®ç‚¹ä¸‰ï¼šæ–°å¢ <code>TangentialArc</code> (åˆ‡çº¿å¼§)</h2>
<p>è¿™æ˜¯å‡ ä½•ç»˜å›¾çš„æ–°ç©å…·ï¼ä»¥å‰å¦‚æœæƒ³ç”»ä¸€æ®µåœ†å¼§ï¼Œæ—¢è¦è¿æ¥ä¸¤ä¸ªç‚¹ï¼Œåˆè¦ä¿è¯åˆ‡çº¿æ–¹å‘å¹³æ»‘ï¼Œå¯èƒ½éœ€è¦è´¹ç‚¹è„‘ç­‹å»ç®—è§’åº¦ã€‚</p>
<p>æ–°çš„ <code>TangentialArc</code> æ—¨åœ¨ç®€åŒ–è¿™ç±»å‡ ä½•æ„é€ ã€‚</p>
<p>ç›®å‰å®˜æ–¹æ–‡æ¡£è¿˜åœ¨å®Œå–„ä¸­ï¼Œä½†å®ƒçš„å‡ºç°æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°ç”»å‡ºæµç•…è¿æ¥ç›´çº¿æˆ–æ›²çº¿çš„åœ†å¼§äº†ã€‚</p>
<h4 data-id="heading-5">3.0.1. ğŸŒ° ä»£ç åœºæ™¯</h4>
<p>å¦‚æœä½ æœ‰ä¸€æ¡ç›´çº¿ï¼Œæƒ³åœ¨æœ«ç«¯æ¥ä¸€ä¸ªåœ†å¼§ï¼Œä¸”è¿æ¥å¤„è¦æ˜¯â€œä¸æ»‘â€çš„ï¼ˆåˆ‡çº¿è¿ç»­ï¼‰ã€‚</p>
<p>ä»¥å‰ä½ å¾—ç®—åˆ‡è§’ï¼Œç°åœ¨å¯ä»¥è¯•è¯•ä½¿ç”¨ <code>TangentialArc</code> ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TangentialArcSample</span>(<span class="hljs-title class_ inherited__">Scene</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self</span>):
        l1 = Line([<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>], color=RED)
        l2 = Line([-<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>], color=BLUE)
        
        <span class="hljs-comment"># åˆ›å»ºåˆ‡åœ†å¼§å¯¹è±¡</span>
        <span class="hljs-comment"># å‚æ•°è¯´æ˜ï¼š</span>
        <span class="hljs-comment"># - l1: ç¬¬ä¸€æ¡åˆ‡çº¿</span>
        <span class="hljs-comment"># - l2: ç¬¬äºŒæ¡åˆ‡çº¿</span>
        <span class="hljs-comment"># - radius: åœ†å¼§çš„åŠå¾„ï¼ˆ0.2ï¼‰</span>
        <span class="hljs-comment"># - corner: åœ†å¼§æ‰€åœ¨çš„è§’è½æ–¹å‘</span>
        <span class="hljs-comment"># - color: åœ†å¼§çš„é¢œè‰²ï¼ˆç»¿è‰²ï¼‰</span>
        circulararc = TangentialArc(l1, l2, radius=<span class="hljs-number">0.2</span>, corner=(-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>), color=GREEN)
        self.play(Create(l1), Create(l2))
        self.play(Create(circulararc))

        self.wait()
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca2d253b6b73413a9ebda6378bf634ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254521&amp;x-signature=thDHMrFMRbGCYLS2IqqrB%2B83wXA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">4. ğŸ› ï¸ å…¶ä»–å€¼å¾—å…³æ³¨çš„å˜åŒ–</h2>
<p>é™¤äº†ä¸Šé¢ä¸‰ä¸ªæ–°ç‰¹æ€§ï¼Œè¿˜æœ‰ä¸€äº›æ”¹åŠ¨ä¹Ÿéå¸¸è´´å¿ƒï¼š</p>
<ol>
<li><strong>SurroundingRectangle æ›´çµæ´»äº†</strong>ï¼š<br/>
ä»¥å‰ <code>buff</code> å‚æ•°åªèƒ½æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå¯¼è‡´çŸ©å½¢æ¡†çš„å››å‘¨ç•™ç™½å¿…é¡»ä¸€æ ·ã€‚ç°åœ¨ä½ å¯ä»¥ä¼ å…¥ä¸€ä¸ªå…ƒç»„ <code>buff=(0.5, 0.1)</code>ï¼Œåˆ†åˆ«æ§åˆ¶ <strong>æ°´å¹³</strong> å’Œ <strong>å‚ç›´</strong> æ–¹å‘çš„é—´è·ã€‚ç»™é•¿å…¬å¼åŠ æ¡†æ—¶å†ä¹Ÿä¸ç”¨æ‹…å¿ƒå·¦å³å¤ªå®½æˆ–è€…ä¸Šä¸‹å¤ªæŒ¤äº†ï¼</li>
<li><strong>Code Mobject æ”¯æŒ OpenGL</strong>ï¼š<br/>
å¦‚æœä½ æ˜¯ç”¨ OpenGL æ¸²æŸ“æ¨¡å¼ï¼ˆæ¸²æŸ“é€Ÿåº¦è¶…å¿«çš„é‚£ç§ï¼‰çš„ç”¨æˆ·ï¼Œç°åœ¨ <code>Code</code> å¯¹è±¡ä¹Ÿèƒ½å®Œç¾æ˜¾ç¤ºäº†ã€‚</li>
<li><strong>ä¿®å¤äº† Tex ç¯å¢ƒæ ¼å¼åŒ–é—®é¢˜</strong>ï¼š<br/>
å†™ <code>LaTeX</code> å…¬å¼æ—¶å¦‚æœä¸å°å¿ƒæ¢è¡Œæˆ–è€…æ ¼å¼ä¹±äº†ï¼Œç°åœ¨ <code>Manim</code> èƒ½æ›´å¥½åœ°å¤„ç†å®ƒï¼ŒæŠ¥é”™æ›´å°‘ã€‚</li>
<li><strong>CLI é»˜è®¤åˆ†è¾¨ç‡è°ƒæ•´</strong>ï¼š<br/>
å‘½ä»¤è¡Œå·¥å…·çš„é»˜è®¤åˆ†è¾¨ç‡é€»è¾‘è¿›è¡Œäº†ä¸€äº›å¾®è°ƒï¼Œæ›´åŠ ç¬¦åˆ 1080p çš„æ ‡å‡†é¢„æœŸã€‚</li>
</ol>
<h2 data-id="heading-7">5. ğŸ“ æ€»ç»“ä¸å‡çº§</h2>
<p>è¿™æ¬¡<code> v0.19.1</code> è™½ç„¶ç‰ˆæœ¬å·è·¨åº¦ä¸å¤§ï¼Œä½†æ¯ä¸€ä¸ªæ”¹åŠ¨éƒ½åˆ‡ä¸­äº†å®é™…å¼€å‘ä¸­çš„ç—›ç‚¹ã€‚</p>
<p>ç‰¹åˆ«æ˜¯ <strong>éšæœºç§å­</strong> å’Œ <strong>ValueTracker ç®—æœ¯æ”¯æŒ</strong>ï¼Œå±äºé‚£ç§â€œç”¨äº†å°±å›ä¸å»â€çš„ä¼˜åŒ–ã€‚</p>
<p>å‡çº§<code>Manim</code>ä¹Ÿå¾ˆç®€å•ï¼Œæ‰“å¼€ç»ˆç«¯/å‘½ä»¤è¡Œï¼Œè¾“å…¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install --upgrade manim
</code></pre>
<p>å¿«å»è¯•è¯•æ–°åŠŸèƒ½å§ï¼å¦‚æœä½ ç”¨æ–°ç‰¹æ€§åšå‡ºäº†å¥½ç©çš„åŠ¨ç”»ï¼Œæ¬¢è¿åœ¨ç¤¾åŒºåˆ†äº«å“¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Serverless is all you need: åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ä¸Šä¸€é”®éƒ¨ç½²å¤§æ¨¡å‹APIèšåˆç®¡ç†å¹³å°OneHub]]></title>    <link>https://juejin.cn/post/7578820376999378995</link>    <guid>https://juejin.cn/post/7578820376999378995</guid>    <pubDate>2025-12-02T04:30:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578820376999378995" data-draft-id="7578803751609286706" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Serverless is all you need: åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ä¸Šä¸€é”®éƒ¨ç½²å¤§æ¨¡å‹APIèšåˆç®¡ç†å¹³å°OneHub"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-02T04:30:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Serverless is all you need: åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ä¸Šä¸€é”®éƒ¨ç½²å¤§æ¨¡å‹APIèšåˆç®¡ç†å¹³å°OneHub
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:30:57.000Z" title="Tue Dec 02 2025 04:30:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fs3.cn-north-1.amazonaws.com.cn%2Fawschinablog%2Fblogbanner-newnew.png" target="_blank" title="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/blogbanner-newnew.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2072210bc8a4206ac594d4cde1e39d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=SNYYegi8tT7KpysYQcZ%2FEibPDM4%3D" alt="" loading="lazy"/></a></p>
<p>åœ¨AI åº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­, å¼€å‘è€…ä¼šä½¿ç”¨åˆ°å„å¤§æ¨¡å‹API, åªä½¿ç”¨ä¸€å®¶LLM provider å¾€å¾€éš¾ä»¥æ»¡è¶³éœ€æ±‚, è€Œåœ¨æ¥å…¥å¤šå®¶APIæ—¶, æˆ‘ä»¬å¾€å¾€ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜:</p>
<ol>
<li>å„å®¶LLM provider çš„Â è®¤è¯å‡­æ®ä¸åŒ, éœ€è¦è¿›è¡Œé›†ä¸­ç®¡ç†.</li>
<li>ä¸åŒ LLM provider çš„APIÂ è°ƒç”¨æ–¹å¼æœ‰å·®åˆ«, ä¼šæå‡ä¸šåŠ¡ä»£ç çš„å¤æ‚åº¦.</li>
<li>å„ä¸ª LLM provider çš„è°ƒç”¨é‡å’Œæ¶ˆè´¹æƒ…å†µéœ€è¦è¿›è¡Œç»Ÿè®¡.</li>
<li>ä¸šåŠ¡å›¢é˜Ÿå¯¹ä¸åŒæ¨¡å‹API çš„è°ƒç”¨æƒé™éœ€è¦è¿›è¡Œç®¡ç†.</li>
</ol>
<p>é’ˆå¯¹æ­¤ç±»åœºæ™¯, Â è§£å†³æ–¹æ³•å¾€å¾€æ˜¯å¢åŠ ä¸€ä¸ª LLM Gateway è¿›è¡Œç»Ÿä¸€ç®¡ç†, æ¯”è¾ƒæµè¡Œçš„æœ‰ LiteLLMã€OpenRouter å’Œ Ollama ç­‰, æˆ‘ä»¬æµ‹è¯•ä¸‹æ¥, Â é’ˆå¯¹å¤§é‡ç»ˆç«¯å®¢æˆ·åš API åˆ†å‘çš„åœºæ™¯, å¼€æºé¡¹ç›®Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMartialBE%2Fone-hub" target="_blank" title="https://github.com/MartialBE/one-hub" ref="nofollow noopener noreferrer">One HubÂ </a>è¾ƒä¸ºå®ç”¨, æ­¤é¡¹ç›®ä»¥Â <a href="https://link.juejin.cn?target=http%3A%2F%2F%2520https%2F%2Fgithub.com%2Fsongquanpeng%2Fone-api" target="_blank" title="http://%20https//github.com/songquanpeng/one-api" ref="nofollow noopener noreferrer">one-api</a>Â ä¸ºåŸºç¡€ï¼ˆone-api å·²ä¸å†ç»´æŠ¤ï¼‰. æœ¬æ–‡ä¸»è¦æ¢è®¨å¦‚ä½•åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ä¸Šå¿«é€Ÿéƒ¨ç½²æ­¤é¡¹ç›®ä¸”è½»æ¾å®ç°å¼¹æ€§å’Œé«˜å¯ç”¨.</p>
<p>æ–¹æ¡ˆç‰¹ç‚¹:</p>
<p>âœ… Amazon CloudFormationÂ ä¸€é”®éƒ¨ç½².<br/>
âœ… ç»å¤§éƒ¨åˆ†æœåŠ¡ä¸º Serverless æœåŠ¡, å‡ ä¹é›¶è¿ç»´è´Ÿæ‹….<br/>
âœ…Â é«˜å¼¹æ€§æ¶æ„, é—²æ—¶èŠ‚çº¦æˆæœ¬, é«˜å³°æ—¶æœŸå¯æ‰¿è½½é«˜å¹¶å‘.<br/>
âœ… å­˜ç®—åˆ†ç¦»,Â é«˜å¯ç”¨æ¶æ„.<br/>
âœ…Â å®‰å…¨å¯é , æºç«™èµ„æºå…¨éƒ¨ç§æœ‰åŒ–éƒ¨ç½², CloudFront è‡ªå¸¦æŠ—DDOS. æ‰€æœ‰ç½‘ç»œé˜²ç«å¢™è§„åˆ™å¯é€šè¿‡ WAF ç»Ÿä¸€ç®¡ç†.</p>
<p>æ³¨1:Â æœ¬æ–¹æ¡ˆçš„æ‰€æœ‰é¡¹ç›®åˆ†æå’Œ CloudFormation éƒ¨ç½²è„šæœ¬çš†ç”± Amazon AI å·¥å…· Kiro/Amazon Q Developer CLI å®ç°, ç¬”è€…è¾…åŠ©è°ƒèŠ‚.</p>
<p>æ³¨2:Â æ–‡ä¸­æ‰€æåˆ°çš„å¼€æºé¡¹ç›®ä½¿ç”¨Â Â Apache License Version 2.0, æœ¬æ–‡ä»…æ¢è®¨å…³äºæºç åˆ†æ, é¡¹ç›®éƒ¨ç½²å’ŒåŠŸèƒ½ä½¿ç”¨å±‚é¢çš„å†…å®¹, ä¸æ¶‰åŠå¯¹åŸé¡¹ç›®çš„ä»£ç æˆ–å•†æ ‡ä¿®æ”¹. åœ¨å®é™…ä½¿ç”¨ä¸­è¯·éµå®ˆé¡¹ç›®åè®®. è‹¥æ¶‰åŠåˆ°äºŒæ¬¡å¼€å‘è¯·æ ‡æ˜åŸé¡¹ç›®å‡ºå¤„, è‹¥æ¶‰åŠåˆ°å•†æ ‡ä¿®æ”¹å’Œå‘å¸ƒ, è¯·è”ç³»åŸä½œè€….</p>
<blockquote>
<p>ğŸ“¢é™æ—¶æ’æ’­ï¼šæ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚</p>
<p>â©å¿«å¿«ç‚¹å‡»è¿›å…¥ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D6695e4c5e1432f239fae485f%26visitfrom%3D3P_Juejinhead_0606%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejinhead_0606" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=6695e4c5e1432f239fae485f&amp;visitfrom=3P_Juejinhead_0606&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejinhead_0606" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹å®éªŒæ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote>
<h2 data-id="heading-0">æ–¹æ¡ˆæ¶æ„</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7fc99824141e4a549e8c7ddb57530b6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=tP04gSCrdT29jo6w2MH0H0nrWSA%3D" alt="d077e5a8e1d9f34e857d7a27f9ea4dc1.jpg" loading="lazy"/></p>
<p>å¯¹äº Amazon Globa Region å¯ä»¥ä½¿ç”¨æ­¤å¤„çš„Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanceli93%2FOneHub-on-AWS%2Fblob%2Fmain%2Fcf-one-hub-infra.yaml" target="_blank" title="https://github.com/lanceli93/OneHub-on-AWS/blob/main/cf-one-hub-infra.yaml" ref="nofollow noopener noreferrer">yamlæ–‡ä»¶</a>Â åœ¨ CloudFormation ä¸­ä¸€é”®éƒ¨ç½²:<br/>
éƒ¨ç½²æ—¶åŠ¡å¿…å°†Â <strong>DatabasePassword, SessionSecret, UserTokenSecret</strong> è¿™ä¸‰ä¸ªå‚æ•°çš„é»˜è®¤å€¼æ›¿æ¢.</p>
<p>æ³¨æ„:Â æ–°äºšé©¬é€Šäº‘ç§‘æŠ€è´¦å·æˆ–æ²¡æœ‰åˆ›å»ºè¿‡ECS èµ„æºçš„è´¦å·åœ¨åˆ›å»ºå †æ ˆæ—¶å¯èƒ½ä¼šæŠ¥é”™(æç¤ºç¼ºå°‘ECSæœåŠ¡é“¾æ¥è§’è‰², æ­¤è§’è‰²ä¸ºé¦–æ¬¡ä½¿ç”¨ ECS æ—¶äºšé©¬é€Šäº‘ç§‘æŠ€è‡ªåŠ¨åˆ›å»º), åˆ é™¤å †æ ˆå†æ¬¡å°è¯•å³å¯.</p>
<h2 data-id="heading-1">é¡¹ç›®éƒ¨ç½²åˆ†æ</h2>
<p>å¯¹æ­¤é¡¹ç›®è¿›è¡Œå•æœºéƒ¨ç½²å¾ˆç®€å•ï¼Œåœ¨å•æœºä¸­ç›´æ¥è¿è¡Œ docker container å³å¯. å…³äºå¤šæœºéƒ¨ç½², åœ¨é¡¹ç›®éƒ¨ç½²æ–‡æ¡£ä¸­ä¹Ÿæœ‰è¯´æ˜, å…¶ä¸­ç¬¬ä¸‰æ¡æåˆ°äº†ä»æœåŠ¡å™¨ slave å’Œä¸»æœåŠ¡å™¨ master çš„æ¦‚å¿µ, ä½†å¹¶æ²¡æœ‰è¯¦ç»†è¯´æ˜è¿™ä¸¤ç§æœåŠ¡å™¨ç±»å‹çš„è¡Œä¸ºæœ‰ä»€ä¹ˆåŒºåˆ«, è€Œç†æ¸…è¿™ä¸€ç‚¹å¯¹æˆ‘ä»¬åç»­çš„éƒ¨ç½²ç­–ç•¥å’Œæµé‡åˆ†å‘ç­–ç•¥éå¸¸é‡è¦.</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F14%2Fserverless-is-all-you-need-one-click-deploy-onehub-2.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/14/serverless-is-all-you-need-one-click-deploy-onehub-2.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87ec3817d1404d3a8403f39a07bace30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=Tr8qg3z5xPx%2BebFesM%2F8f74GeNM%3D" alt="" loading="lazy"/></a></p>
<p><strong>ä½¿ç”¨ Kiro/Amazon Q Developer åˆ†ææºç ä»¥æ˜ç¡®éƒ¨ç½²ç­–ç•¥</strong></p>
<p>Kiro å’Œ Amazon Q Developer æ˜¯äºšé©¬é€Šäº‘ç§‘æŠ€å‘å¸ƒçš„ AI IDE å’Œ AI Agent å·¥å…·, å¯ä»¥è‡ªåŠ¨è¯»å–é¡¹ç›®ä»£ç æ–‡ä»¶å’Œæœç´¢æ•´ä¸ªä»£ç ä»“åº“ä»è€Œå®ç°å¯¹é¡¹ç›®æºç çš„ç²¾å‡†åˆ†æ. ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©ä»»æ„ä¸€æ¬¾å·¥å…·å¿«é€Ÿå®Œæˆé¡¹ç›®åˆ†æä»»åŠ¡. ç¬”è€…è¿™é‡Œåœ¨Visual Studio Code ä¸­æ‰“å¼€äº† One Hub é¡¹ç›®å¹¶å¯ç”¨äº†å‘½ä»¤è¡Œå·¥å…· Amazon Q Developer CLI å¯¹æ•´ä¸ªé¡¹ç›®è¿›è¡Œäº†åˆ†æ, æœ€ç»ˆç»“è®ºå¦‚ä¸‹:</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F14%2Fserverless-is-all-you-need-one-click-deploy-onehub-3.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/14/serverless-is-all-you-need-one-click-deploy-onehub-3.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b44ec49b7bb48b4b77f1be2ac35434b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=M1i0xeIVPTZcNq%2Bs4BJP6HSMIBQ%3D" alt="" loading="lazy"/></a></p>
<p>è¯¦ç»†åˆ†æè¯·è§:Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanceli93%2FOneHub-on-AWS%2Fblob%2Fmain%2FNODE_TYPE_%25E5%2588%2586%25E6%259E%2590%25E6%258A%25A5%25E5%2591%258A.md" target="_blank" title="https://github.com/lanceli93/OneHub-on-AWS/blob/main/NODE_TYPE_%E5%88%86%E6%9E%90%E6%8A%A5%E5%91%8A.md" ref="nofollow noopener noreferrer">NODE_TYPE_åˆ†ææŠ¥å‘Š</a></p>
<p>ç”±æ­¤æŠ¥å‘Šæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºéƒ¨ç½²éœ€è¦æ³¨æ„çš„äº‹é¡¹:</p>
<ol>
<li>æ•°æ®åº“è¿æ¥ï¼šæ‰€æœ‰èŠ‚ç‚¹éœ€è¦è¿æ¥åŒä¸€ä¸ªæ•°æ®åº“</li>
<li>é…ç½®åŒæ­¥ï¼šSlave èŠ‚ç‚¹ä¼šå®šæœŸä»æ•°æ®åº“åŒæ­¥é…ç½®</li>
<li>å”¯ä¸€æ€§ï¼šå»ºè®®åªéƒ¨ç½²ä¸€ä¸ª Master èŠ‚ç‚¹</li>
<li>ç½‘ç»œè®¿é—®ï¼šç¡®ä¿ Slave èŠ‚ç‚¹èƒ½è®¿é—®æ•°æ®åº“</li>
</ol>
<h3 data-id="heading-2">ECS é›†ç¾¤éƒ¨ç½²è§„åˆ’</h3>
<p>æˆ‘ä»¬è®¡åˆ’åˆ›å»ºä¸€ä¸ª ECS Cluster å¹¶éƒ¨ç½²ä¸¤ä¸ª Service.<br/>
åˆ›å»ºä¸¤ä¸ª Task Definition ä»¥ä¸º Master èŠ‚ç‚¹å’Œ Slave èŠ‚ç‚¹é…ç½®ä¸åŒçš„ç¯å¢ƒå˜é‡.</p>
<p><strong>Master Service</strong></p>
<ol>
<li>ä½¿ç”¨ master-task-definition å¯åŠ¨ ECS Task.</li>
<li>åªå¯åŠ¨ä¸€ä¸ª ECS task, Â è¿è¡Œ Master èŠ‚ç‚¹.</li>
</ol>
<p><strong>Slave Service</strong></p>
<ol>
<li>ä½¿ç”¨ slave-task-definition å¯åŠ¨ ECS task.</li>
<li>å¯åŠ¨å¤šä¸ª ECS task, è¿è¡Œ Slave èŠ‚ç‚¹.</li>
<li>åœ¨ Task Definition ä¸­è®¾ç½®ç¯å¢ƒå˜é‡</li>
<li>å¼€å¯è‡ªåŠ¨æ‰©å±•, ä»¥ CPU æˆ–å†…å­˜å ç”¨ç‡ä¸ºæ‰©å±•æŒ‡æ ‡.</li>
</ol>
<p>ECS Service å¼€å¯ Availability Zone rebalancingï¼Œä»¥ç¡®ä¿ LLM API æœåŠ¡å§‹ç»ˆé«˜å¯ç”¨.</p>
<h3 data-id="heading-3">æ•°æ®åº“</h3>
<p>ç”±ä¸Šæ–‡å¯ä»¥æ˜ç¡®ï¼Œæ‰€æœ‰èŠ‚ç‚¹éœ€è¦è¿æ¥åˆ°åŒä¸€ä¸ªæ•°æ®åº“, è€Œåªæœ‰Master èŠ‚ç‚¹ä¼šè¿›è¡Œå†™å…¥æ“ä½œ.<br/>
æœ¬æ–‡éƒ¨ç½² Aurora Serverless V2 for MySQL, å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹:</p>
<ol>
<li>å¯ä»¥æ ¹æ®ä½¿ç”¨æƒ…å†µè‡ªåŠ¨æ‰©ç¼©å®¹ï¼Œä» 0.5 ACUï¼ˆ1 GiB å†…å­˜ï¼‰åˆ° 256 ACUï¼ˆ512 GiB å†…å­˜ï¼‰, æœ€å°æ‰©å±•å•ä½ä¸º 0.5 ACU.</li>
<li>æ•°æ®å­˜å‚¨éƒ¨åˆ†æŒ‰å®é™…ä½¿ç”¨é‡æ”¶è´¹ï¼Œæ— éœ€é¢„ç½®å­˜å‚¨å®¹é‡.</li>
<li>åŸç”Ÿé«˜å¯ç”¨, è‡ªåŠ¨æ•…éšœè½¬ç§».</li>
</ol>
<h3 data-id="heading-4">ALB æµé‡åˆ†å‘ç­–ç•¥</h3>
<ul>
<li>Master èŠ‚ç‚¹ï¼šè´Ÿè´£æ•°æ®ç®¡ç†ã€å®šæ—¶ä»»åŠ¡å’Œç³»ç»Ÿç»´æŠ¤</li>
<li>Slave èŠ‚ç‚¹ï¼šè´Ÿè´£è¯·æ±‚å¤„ç†å’ŒæœåŠ¡æ‰©å±•</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ALB ç›‘å¬å™¨è§„åˆ™å°† LLM API è¯·æ±‚å…¨éƒ¨è½¬å‘åˆ° Slave Target Group, å°†æ‰€æœ‰å…¶ä»–ä¸å‰ç«¯é¡µé¢æ“ä½œï¼ˆä¸»è¦æ˜¯ç®¡ç†åŠ¨ä½œï¼‰ç›¸å…³çš„è¯·æ±‚è½¬å‘åˆ° Master Target Group. ç¤ºä¾‹å¦‚ä¸‹:</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F14%2Fserverless-is-all-you-need-one-click-deploy-onehub-4.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/14/serverless-is-all-you-need-one-click-deploy-onehub-4.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce2a153170f14deab73488b588b4bc86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=1Xd6qsRTCnnORItfaP6N6iPs%2BsA%3D" alt="" loading="lazy"/></a></p>
<p>æ³¨æ„è¿™é‡Œè®¾å®šçš„è§„åˆ™:</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Path</span> = *v1* 
</code></pre>
<p>ä¸»è¦æ˜¯ä¸ºäº†åŒ¹é…å¤šç§ LLM API è°ƒç”¨æ ¼å¼, å¦‚</p>
<pre><code class="hljs language-bash" lang="bash">/v1/chat/completions
/claude/v1/messages
</code></pre>
<p>ä½†å®é™…ä¸Šè¿™ä¸ªè§„åˆ™å¹¶ä¸èƒ½è¦†ç›–å¸‚é¢ä¸Šæ‰€æœ‰çš„è°ƒç”¨æ ¼å¼ï¼Œä¸”æ˜“ä¸å…¶ä»– API path å†²çª, éœ€è¦é’ˆå¯¹ä½¿ç”¨åœºæ™¯è¿›è¡Œä¿®æ”¹.</p>
<h3 data-id="heading-5">ç½‘ç»œè§„åˆ’</h3>
<p>è¯¥é¡¹ç›®å¤§å¤šæ•°åœºæ™¯æ˜¯åœ¨äº’è”ç½‘ä¸Šæä¾›æœåŠ¡, ä¸ºç¡®ä¿æœåŠ¡æ•°æ®å®‰å…¨ä¸”é•¿æœŸç¨³å®šè¿è¡Œ, åœ¨ç½‘ç»œè§„åˆ’æ–¹é¢æˆ‘ä»¬æœ‰ä»¥ä¸‹å‡ ä¸ªè¦ç‚¹:</p>
<ol>
<li>ECS task å…¨éƒ¨è¿è¡Œäº VPC ç§æœ‰å­ç½‘, é€šè¿‡å…¬æœ‰å­ç½‘çš„ NAT Gateway å®ç°å…¬ç½‘è®¿é—®.</li>
<li>æ•°æ®åº“ Aurora è¿è¡Œäº VPC ç§æœ‰å­ç½‘, é…ç½®å®‰å…¨ç»„è§„åˆ™å…è®¸ ECS task è®¿é—®.</li>
<li>ALB éƒ¨ç½²åœ¨ VPC ç§æœ‰å­ç½‘, ç¦æ­¢å…¬ç½‘è®¿é—®.</li>
<li>CloudFront é‡‡ç”¨ VPC origin è¿æ¥æº ALB.</li>
</ol>
<p>é€šè¿‡æ­¤é…ç½®, æˆ‘ä»¬åœ¨æ²¡æœ‰é¢å¤–é…ç½® WAF çš„æƒ…å†µä¸‹å³å¯å®ç°:</p>
<ul>
<li>æºç«™æ— å…¬æœ‰ IP, æ‰€æœ‰å…¬ç½‘å…¥ç«™æµé‡åªèƒ½é€šè¿‡ CloudFront, æå¤§é™ä½äº†æ”»å‡»é¢.</li>
<li>CloudFront è‡ªå¸¦çš„ Standard Shield å¯ä»¥æŠµå¾¡å¤§éƒ¨åˆ† DDoS æ”»å‡».</li>
<li>é€šè¿‡ CloudFront å…³è” WAF è§„åˆ™, å¯ä»¥åœ¨å•ä¸€å…¥å£å®Œæˆé˜²æŠ¤é…ç½®å’Œæµé‡åˆ†æ, è¿ç»´ç®€å•.</li>
<li>é€šè¿‡ CloudFront å…¨çƒ PoP ç‚¹å¿«é€Ÿæ¥å…¥äºšé©¬é€Šäº‘ç§‘æŠ€éª¨å¹²ç½‘, é™ä½ API è®¿é—®å»¶æ—¶.</li>
</ul>
<h2 data-id="heading-6">åŠŸèƒ½æµ‹è¯•</h2>
<p>éƒ¨ç½²å®Œæ¯•åï¼Œåœ¨ CloudFormation Stack Output ä¸­æ‰¾åˆ° CloudFront URL, æ ¹æ®æ­¤Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fone-hub-doc.vercel.app%2Fuse%2F" target="_blank" title="https://one-hub-doc.vercel.app/use/" ref="nofollow noopener noreferrer">ä½¿ç”¨è¯´æ˜</a>Â ç™»é™†ç³»ç»Ÿè¿›è¡Œ API æµ‹è¯•.<br/>
æ­¤å¤„å¯é…ç½® Amazon Bedrock å¯ç”¨æ¨¡å‹ä»¥åŠè‡ªå®šä¹‰æ˜ å°„å…³ç³»:</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F14%2Fserverless-is-all-you-need-one-click-deploy-onehub-5.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/14/serverless-is-all-you-need-one-click-deploy-onehub-5.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/721e6f1aba53437bb8b0a58ff0eca8bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=L0XEK9uH1uphU5aAm%2Fk%2BcV%2FPTA4%3D" alt="" loading="lazy"/></a></p>
<p>Amazon Bedrock ç›¸å…³æ¨¡å‹çš„æ˜ å°„å…³ç³»å¯ä»¥åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMartialBE%2Fone-hub%2Fblob%2F53dae62f46211a1bb9caa97baee2eb2fdcdf299e%2Fproviders%2Fbedrock%2Fcategory%2Fbase.go%23L38" target="_blank" title="https://github.com/MartialBE/one-hub/blob/53dae62f46211a1bb9caa97baee2eb2fdcdf299e/providers/bedrock/category/base.go#L38" ref="nofollow noopener noreferrer">æ­¤å¤„</a>æ‰¾åˆ°.<br/>
é…ç½®å®Œæˆå, ä½¿ç”¨ Insomnia è¿›è¡Œ API æµ‹è¯•:</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F14%2Fserverless-is-all-you-need-one-click-deploy-onehub-6.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/14/serverless-is-all-you-need-one-click-deploy-onehub-6.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdf8a7013898403f8bbdff04a26a5223~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=VnMLJm0krTGtJLs6HF97yx3dnMc%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-7">å¯è§‚æµ‹æ€§</h2>
<ul>
<li>Aurora é›†ç¾¤é»˜è®¤å¼€å¯Â RDS Data API, å¯é€šè¿‡äºšé©¬é€Šäº‘ç§‘æŠ€æ§åˆ¶å° Query Editor ç›´æ¥è¿æ¥æ•°æ®åº“å¹¶è¿è¡Œ MySQL, æ— éœ€é¢å¤–é…ç½®å ¡å’æœº.</li>
<li>æ‰€æœ‰ Amazon ECS Task äº§ç”Ÿçš„æ—¥å¿—é»˜è®¤å‘é€åˆ° CloudWatch, å¯å®æ—¶æŸ¥çœ‹å’Œåˆ†æ.</li>
<li>å¯å¼€å¯Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2FAmazonECS%2Flatest%2Fdeveloperguide%2Fecs-exec.html%23ecs-exec-enabling-and-using" target="_blank" title="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-exec.html#ecs-exec-enabling-and-using" ref="nofollow noopener noreferrer">ECS Exec</a>Â ä»¥ç›´æ¥ç™»é™†æ­£åœ¨è¿è¡Œçš„ Container è¿›è¡Œé—®é¢˜æ’æŸ¥.</li>
</ul>
<h2 data-id="heading-8">æˆæœ¬åˆ†æ</h2>
<p>æœ¬æ–¹æ¡ˆç»å¤§éƒ¨åˆ†æœåŠ¡ä¸º Serverless æœåŠ¡, æˆæœ¬ä¸åº”ç”¨å®é™…æ‰¿è½½æµé‡æ­£ç›¸å…³. ä»¥æœ¬æ–‡ä¸­æä¾›çš„ä¸€é”®éƒ¨ç½²æ–‡ä»¶é…ç½®ä¸ºä¾‹, è´¹ç”¨ä¸»è¦åŒ…å«å¦‚ä¸‹éƒ¨åˆ†:</p>
<ol>
<li>Amazon ECS Fargate éƒ¨ç½²è´¹ç”¨ï¼ˆå…±ä¸‰ä¸ªï¼Œå•ä¸ªé…ç½®ä¸º 256 CPU + 512 Memory, è¡¨ç¤º 1/4 vCPU å’Œ 512 MiB å†…å­˜ï¼‰</li>
<li>Amazon Aurora Serverless V2 éƒ¨ç½²å’Œå­˜å‚¨è´¹ç”¨, é»˜è®¤ 0.5 ACU</li>
<li>ALB éƒ¨ç½²è´¹ç”¨.</li>
<li>NAT Gateway éƒ¨ç½²è´¹ç”¨.</li>
</ol>
<p>åœ¨ä¸ªäººä½¿ç”¨åœºæ™¯ä¸‹ï¼Œç»æµ‹è¯•æ¯æ—¥æˆæœ¬åœ¨ 3.7-5.4 ç¾å…ƒä¹‹é—´ï¼ˆä¸å«å¤§æ¨¡å‹ API è°ƒç”¨è´¹ç”¨ï¼‰, ä¸åŒ Region éƒ¨ç½²ä¼šæœ‰å·®åˆ«. å¯ä»¥çœ‹å‡º Serverless æ¶æ„ç”¨äºéƒ¨ç½²æµé‡ä¸ç¡®å®šæˆ–ä¸šåŠ¡èµ·æ­¥é˜¶æ®µçš„åº”ç”¨å…·æœ‰å·¨å¤§æˆæœ¬ä¼˜åŠ¿.</p>
<h2 data-id="heading-9">æ€»ç»“ä¸å±•æœ›</h2>
<p>åœ¨å°†æ­¤æ–¹æ¡ˆéƒ¨ç½²è½åœ°åˆ°äº§å“æ—¶ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹æ”¹è¿›æ–¹å‘ï¼š</p>
<ol>
<li>CloudFront é»˜è®¤ä¸æºç«™çš„è¿æ¥ Timeout æœ€é«˜ä¸º60s, å¯ä»¥é€šè¿‡æäº¤å·¥å•æå‡åˆ° 180s, ä»¥é€‚åº”è¶…é•¿ prompt æˆ–è¾“å‡ºçš„ API è°ƒç”¨åœºæ™¯.</li>
<li>é…ç½®å…³è”åˆ° CloudFront çš„ WAF è§„åˆ™, å¯ç”¨å®ç”¨æ‰˜ç®¡è§„åˆ™æ¯”å¦‚é™æµè§„åˆ™ä»¥åŠÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fblogs%2Fnetworking-and-content-delivery%2Fintroducing-the-aws-waf-application-layer-ddos-protection%2F" target="_blank" title="https://aws.amazon.com/blogs/networking-and-content-delivery/introducing-the-aws-waf-application-layer-ddos-protection/" ref="nofollow noopener noreferrer">Layer 7 DDoS é˜²æŠ¤è§„åˆ™</a>.</li>
<li>ECS Cluster æ”¯æŒ EC2 + Fargate æ··åˆéƒ¨ç½², è€ƒè™‘åˆ° Master èŠ‚ç‚¹åªéœ€éƒ¨ç½²ä¸€å°è€Œä¸åšæ‰©ç¼©å®¹, è‹¥éœ€è¦é•¿æœŸæä¾›æœåŠ¡, å¯ä»¥å°† Master Task Definition æ”¹ä¸º EC2 å®ä¾‹éƒ¨ç½²å¹¶è´­ä¹°é¢„ä»˜å®ä¾‹.</li>
<li>è‹¥éœ€è¦æå‡æ¥å£å“åº”é€Ÿåº¦, å¯ä»¥è€ƒè™‘éƒ¨ç½²Â Amazon ElastiCache Serverless for Redis. åŒæ ·ä¸ä¼šå¢åŠ è¿ç»´å‹åŠ›.</li>
</ol>
<p>é€šè¿‡å……åˆ†åˆ©ç”¨äºšé©¬é€Šäº‘ç§‘æŠ€çš„ Serverless æœåŠ¡ï¼Œæˆ‘ä»¬å°†åŸºç¡€è®¾æ–½è¿ç»´çš„é‡æ‹…è½¬ç§»ç»™äº†äº‘æœåŠ¡å•†,è®©å¼€å‘å›¢é˜Ÿèƒ½å¤Ÿå°†æ›´å¤šç²¾åŠ›é›†ä¸­åœ¨ä¸šåŠ¡åˆ›æ–°å’Œäº§å“è¿­ä»£ä¸Š. ä¸æ­¤åŒæ—¶ï¼ŒAI å·¥å…·çš„åº”ç”¨ä¹Ÿæå¤§æå‡äº†æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ï¼Œç¼©çŸ­äº†äº§å“ä»å¼€å‘åˆ°éƒ¨ç½²ä¸Šçº¿çš„å‘¨æœŸã€‚</p>
<p>äººå·¥æ™ºèƒ½å’Œäº‘è®¡ç®—çš„ç»“åˆæ˜¯å½“ä¸‹ç§‘æŠ€å‘å±•çš„å¤§è¶‹åŠ¿,æˆ‘ä»¬æœŸæœ›é€šè¿‡è¿™äº›å‰æ²¿æŠ€æœ¯,ä¸æ–­ä¼˜åŒ–äº§å“äº¤ä»˜æ¨¡å¼,ä¸ºå®¢æˆ·æä¾›æ›´åŠ å“è¶Šçš„è§£å†³æ–¹æ¡ˆå’ŒæœåŠ¡ä½“éªŒã€‚</p>
<p><strong>å‚è€ƒé“¾æ¥</strong></p>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMartialBE%2Fone-hub" target="_blank" title="https://github.com/MartialBE/one-hub" ref="nofollow noopener noreferrer">github.com/MartialBE/oâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2FAmazonECS%2Flatest%2Fdeveloperguide%2Fcreate-cluster-console-v2.html" target="_blank" title="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/create-cluster-console-v2.html" ref="nofollow noopener noreferrer">docs.aws.amazon.com/AmazonECS/lâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2FAmazonCloudFront%2Flatest%2FDeveloperGuide%2Fprivate-content-vpc-origins.html" target="_blank" title="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-vpc-origins.html" ref="nofollow noopener noreferrer">docs.aws.amazon.com/AmazonCloudâ€¦</a></li>
</ol>
<p>*<em>å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</em></p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64c557c582124a7888c19832f60a14d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=mZxCxQzNFwR6o%2BXBiQIAopyxRQw%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æœ¬æœŸæœ€æ–°å®éªŒã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D6695e4c5e1432f239fae485f%26visitfrom%3D3P_Juejintail_0415%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_0415" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=6695e4c5e1432f239fae485f&amp;visitfrom=3P_Juejintail_0415&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_0415" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚æ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>â©ï¸[<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D6695e4c5e1432f239fae485f%26visitfrom%3D3P_Juejintail_0415%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_0415" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=6695e4c5e1432f239fae485f&amp;visitfrom=3P_Juejintail_0415&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_0415" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿›å…¥å®éªŒ</a>] å³åˆ»å¼€å¯  AI å¼€å‘ä¹‹æ—…</p>
<p>æ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 12 é¢˜ï¼šVueï¼ˆå°¤å…¶ Vue3ï¼‰ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578787344612786212</link>    <guid>https://juejin.cn/post/7578787344612786212</guid>    <pubDate>2025-12-02T04:32:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578787344612786212" data-draft-id="7578714735307948058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 12 é¢˜ï¼šVueï¼ˆå°¤å…¶ Vue3ï¼‰ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:32:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 12 é¢˜ï¼šVueï¼ˆå°¤å…¶ Vue3ï¼‰ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:32:22.000Z" title="Tue Dec 02 2025 04:32:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 12 é¢˜ï¼šVueï¼ˆå°¤å…¶ Vue3ï¼‰ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2>
<p>è¿™æ˜¯ Vue é¢è¯•å¿…è€ƒé¢˜ï¼Œè‡³å°‘ 90% é¢è¯•å®˜ä¼šé—®ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ‡å‡†ç­”æ¡ˆï¼ˆä½ åœ¨é¢è¯•é‡Œåº”è¯¥å…ˆè¯´çš„ï¼‰</h2>
<p>Vue3 ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡æœ‰ <strong>ä¸ƒ</strong> å¤§å¸¸ç”¨æ–¹å¼ï¼š</p>
<h4 data-id="heading-2"><strong>çˆ¶ â†’ å­</strong></h4>
<ol>
<li><strong>Propsï¼ˆæœ€å¸¸è§ï¼‰</strong></li>
<li><strong>Exposeï¼ˆçˆ¶é€šè¿‡ ref è°ƒç”¨å­æ–¹æ³•ï¼‰</strong></li>
</ol>
<h4 data-id="heading-3"><strong>å­ â†’ çˆ¶</strong></h4>
<ol start="3">
<li><strong>Emit äº‹ä»¶</strong></li>
</ol>
<h4 data-id="heading-4"><strong>çˆ¶ â†” å­</strong></h4>
<ol start="4">
<li><strong>v-modelï¼ˆè¯­æ³•ç³–ï¼Œæœ¬è´¨æ˜¯ props + emitï¼‰</strong></li>
</ol>
<h4 data-id="heading-5"><strong>è·¨å±‚çº§</strong></h4>
<ol start="5">
<li><strong>provide / inject</strong></li>
</ol>
<h4 data-id="heading-6"><strong>æ›´å¤§èŒƒå›´</strong></h4>
<ol start="6">
<li><strong>Pinia / Vuexï¼ˆçŠ¶æ€ç®¡ç†ï¼‰</strong></li>
</ol>
<h4 data-id="heading-7"><strong>æ›´åº•å±‚/ç‰¹æ®Šæƒ…å†µ</strong></h4>
<ol start="7">
<li><strong>EventBusï¼ˆVue3 ä¸æ¨èï¼Œä½†é¢è¯•ä¼šé—®ï¼‰</strong></li>
</ol>
<hr/>
<h2 data-id="heading-8">ğŸ¯ äºŒã€çˆ¶ â†’ å­é€šä¿¡æ–¹å¼</h2>
<hr/>
<h3 data-id="heading-9"><strong>1ï¸âƒ£ Propsï¼ˆæœ€å¸¸ç”¨ï¼‰</strong></h3>
<p>çˆ¶ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;Child :<span class="hljs-attr">msg</span>=<span class="hljs-string">"text"</span> /&gt;
</code></pre>
<p>å­ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">defineProps</span>({
  msg: String
})
</code></pre>
<h4 data-id="heading-10">Props ç‰¹æ€§ï¼š</h4>
<ul>
<li>å•å‘æ•°æ®æµï¼ˆçˆ¶ â†’ å­ï¼‰</li>
<li>å­ä¸å…è®¸ä¿®æ”¹ propsï¼ˆä¼šç›´æ¥æŠ¥é”™ï¼‰</li>
<li>é€‚åˆä¼ é€’é…ç½®ç±»ã€é™æ€æ•°æ®</li>
</ul>
<hr/>
<h3 data-id="heading-11"><strong>2ï¸âƒ£ defineExposeï¼ˆçˆ¶ç»„ä»¶é€šè¿‡ ref è°ƒç”¨å­ç»„ä»¶æ–¹æ³•ï¼‰</strong></h3>
<p>å­ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const submit = () =&gt; { ... }
<span class="hljs-built_in">defineExpose</span>({ submit })
</code></pre>
<p>çˆ¶ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;Child <span class="hljs-attr">ref</span>=<span class="hljs-string">"childRef"</span> /&gt;
</code></pre>
<pre><code class="hljs language-scss" lang="scss">childRef<span class="hljs-selector-class">.value</span><span class="hljs-selector-class">.submit</span>()
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å­ç»„ä»¶å¸Œæœ›æš´éœ²ä¸€äº›å†…éƒ¨æ–¹æ³•ç»™çˆ¶ç»„ä»¶</li>
<li>æäº¤è¡¨å•ã€é‡ç½®ã€æ ¡éªŒç­‰</li>
</ul>
<hr/>
<h2 data-id="heading-12">ğŸ¯ ä¸‰ã€å­ â†’ çˆ¶é€šä¿¡æ–¹å¼</h2>
<hr/>
<h3 data-id="heading-13"><strong>3ï¸âƒ£ Emit äº‹ä»¶</strong></h3>
<p>å­ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const emit = <span class="hljs-built_in">defineEmits</span>(['update'])
<span class="hljs-built_in">emit</span>('update', newValue)
</code></pre>
<p>çˆ¶ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;Child @<span class="hljs-attr">update</span>=<span class="hljs-string">"handleUpdate"</span> /&gt;
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å•å‘æ•°æ®æµï¼ˆå­ â†’ çˆ¶ï¼‰</li>
<li>ç»„ä»¶è§£è€¦ï¼Œå®˜æ–¹æ¨èæ–¹å¼</li>
</ul>
<hr/>
<h2 data-id="heading-14">ğŸ¯ å››ã€çˆ¶ â†” å­ åŒå‘é€šä¿¡</h2>
<hr/>
<h3 data-id="heading-15"><strong>4ï¸âƒ£ v-modelï¼ˆè¯­æ³•ç³–ï¼‰</strong></h3>
<h4 data-id="heading-16">çˆ¶ç»„ä»¶ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;Child <span class="hljs-attr">v-model</span>=<span class="hljs-string">"value"</span> /&gt;
</code></pre>
<h4 data-id="heading-17">å­ç»„ä»¶ï¼š</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">defineProps</span>(['modelValue'])
const emit = <span class="hljs-built_in">defineEmits</span>(['update:modelValue'])

<span class="hljs-built_in">emit</span>('update:modelValue', <span class="hljs-number">123</span>)
</code></pre>
<p>æœ¬è´¨åªæ˜¯ props + emit çš„è¯­æ³•ç³–ã€‚</p>
<hr/>
<h2 data-id="heading-18">ğŸ¯ äº”ã€è·¨å±‚çº§é€šä¿¡</h2>
<h3 data-id="heading-19"><strong>5ï¸âƒ£ provide / inject</strong></h3>
<p>ç¥–å…ˆç»„ä»¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-built_in">provide</span>(<span class="hljs-string">'theme'</span>, <span class="hljs-string">'dark'</span>)
</code></pre>
<p>ä»»æ„å±‚å­ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">theme</span> = inject(<span class="hljs-string">'theme'</span>)
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å¤šå±‚çº§ï¼Œä¸éœ€è¦ä¸€å±‚ä¸€å±‚ä¼  props</li>
<li>å¸¸ç”¨äºé…ç½®ç±»ã€ä¸Šä¸‹æ–‡ç±»æ•°æ®ï¼ˆå¦‚è¡¨å•ç»„ä»¶åº“ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-20">ğŸ¯ å…­ã€å…¨å±€çŠ¶æ€é€šä¿¡</h2>
<h3 data-id="heading-21"><strong>6ï¸âƒ£ Piniaï¼ˆæˆ– Vuexï¼‰</strong></h3>
<p>é€‚åˆå…¨å±€æ•°æ®ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¿¡æ¯</li>
<li>æƒé™çŠ¶æ€</li>
<li>å…¨å±€è®¾ç½®</li>
<li>ç¼“å­˜æ•°æ®</li>
</ul>
<p><strong>Pinia æ˜¯ Vue3 å®˜æ–¹ä¸»æ¨çŠ¶æ€åº“ã€‚</strong></p>
<hr/>
<h2 data-id="heading-22">ğŸ¯ ä¸ƒã€ç‰¹æ®Šæƒ…å†µ</h2>
<h3 data-id="heading-23"><strong>7ï¸âƒ£ EventBusï¼ˆVue3 ä¸æ¨èï¼Œä½†è¦çŸ¥é“ï¼‰</strong></h3>
<p>é€‚åˆç®€å•çš„äº‹ä»¶å¹¿æ’­åœºæ™¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> mitt <span class="hljs-keyword">from</span> <span class="hljs-string">'mitt'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> bus = <span class="hljs-title function_">mitt</span>()
</code></pre>
<p>ç»„ä»¶ Aï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">bus.<span class="hljs-built_in">emit</span>(<span class="hljs-string">'hello'</span>, <span class="hljs-number">123</span>)
</code></pre>
<p>ç»„ä»¶ Bï¼š</p>
<pre><code class="hljs language-dart" lang="dart">bus.<span class="hljs-keyword">on</span>(<span class="hljs-string">'hello'</span>, val =&gt; {})
</code></pre>
<hr/>
<h2 data-id="heading-24">ğŸ”¥ å…­ã€é¢è¯•å®˜å¸¸è§è¿½é—®ï¼ˆé™„é«˜èƒ½å›ç­”ï¼‰</h2>
<hr/>
<h3 data-id="heading-25"><strong>è¿½é—® 1ï¼šçˆ¶å­é€šä¿¡å’Œ provide/inject çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ</strong></h3>
<h4 data-id="heading-26">ä½ åº”è¯¥è¿™æ ·ç­”ï¼š</h4>
<ul>
<li><strong>çˆ¶å­ props/emit</strong>ï¼šé€‚åˆç›´æ¥çˆ¶å­é€šä¿¡ï¼Œæ•°æ®æ¸…æ™°å¯æ§</li>
<li><strong>provide/inject</strong>ï¼šé€‚åˆè·¨å±‚çº§é€šä¿¡ï¼Œæ¯”å¦‚ 3ã€5 å±‚ä»¥ä¸Š</li>
<li><strong>provide/inject æ•°æ®ä¸æ˜¯å“åº”å¼ï¼ˆé™¤éä½ ä¼  ref æˆ– reactiveï¼‰</strong></li>
</ul>
<p>âœ” é«˜åˆ†è¡¥å……ï¼š</p>
<blockquote>
<p>provide/inject æ›´åƒâ€œä¾èµ–æ³¨å…¥â€ï¼Œåœ¨ UI ç»„ä»¶åº“ä¸­ç”¨å¾—éå¸¸å¤šï¼ˆElement Plusã€Ant Design Vueï¼‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-27"><strong>è¿½é—® 2ï¼šv-model ä¸ºä»€ä¹ˆèƒ½å®ç°åŒå‘ç»‘å®šï¼Ÿåº•å±‚æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h3>
<p>æ ‡å‡†å›ç­”ï¼š</p>
<blockquote>
<p>v-model æœ¬è´¨æ˜¯ propsï¼ˆmodelValueï¼‰ + emitï¼ˆupdate:modelValueï¼‰</p>
</blockquote>
<p>å°±æ˜¯ï¼š</p>
<p>çˆ¶ç»™å­ï¼š<code>modelValue</code><br/>
å­è¿”çˆ¶ï¼š<code>update:modelValue</code></p>
<hr/>
<h3 data-id="heading-28"><strong>è¿½é—® 3ï¼šdefineExpose æ˜¯ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿå’Œ props/emit çš„å…³ç³»ï¼Ÿ</strong></h3>
<p>ç­”ï¼š</p>
<ul>
<li>
<p>expose ç”¨æ¥æš´éœ²æ–¹æ³•ç»™çˆ¶ç»„ä»¶è°ƒç”¨</p>
</li>
<li>
<p>å’Œ props/emit ä¸ä¸€æ ·ï¼š</p>
<ul>
<li>props/emit ç”¨äº <strong>æ•°æ®</strong></li>
<li>expose ç”¨äº <strong>æ–¹æ³•ã€è¡Œä¸º</strong></li>
</ul>
</li>
</ul>
<p>ä¾‹å¦‚è¡¨å•ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">defineExpose</span>({
  validate,
  reset
})
</code></pre>
<hr/>
<h3 data-id="heading-29"><strong>è¿½é—® 4ï¼šprovide æ˜¯ä¸æ˜¯å“åº”å¼çš„ï¼Ÿå¦‚ä½•è®©å®ƒå˜æˆå“åº”å¼ï¼Ÿ</strong></h3>
<p>é»˜è®¤ <strong>ä¸æ˜¯å“åº”å¼</strong>ï¼ˆéå¸¸å¤šäººä¸çŸ¥é“ï¼ï¼‰</p>
<p>å¿…é¡»è¿™æ ·ä¼ ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">const</span> theme = <span class="hljs-keyword">ref</span>(<span class="hljs-string">'dark'</span>)

provide(<span class="hljs-string">'theme'</span>, theme)
</code></pre>
<p>inject å¤„èƒ½å“åº”å˜åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-30"><strong>è¿½é—® 5ï¼šEventBus ä¸ºä»€ä¹ˆä¸æ¨èï¼Ÿ</strong></h3>
<ul>
<li>å®¹æ˜“é€ æˆäº‹ä»¶æ··ä¹±</li>
<li>ä¸æ˜“è¿½è¸ª</li>
<li>å¤§é¡¹ç›®å¯ç»´æŠ¤æ€§å·®</li>
<li>TypeScript æ”¯æŒå·®</li>
</ul>
<p>é¢è¯•å®˜ä¼šè§‰å¾—ä½ éå¸¸ä¸“ä¸šã€‚</p>
<hr/>
<h2 data-id="heading-31">ğŸ¯ ä¸ƒã€ä¸€å¥è¯æ€»ç»“ï¼ˆèƒŒä¸‹æ¥å°±èƒ½é¢è¯•ç”¨ï¼‰</h2>
<blockquote>
<p>Vue3 çˆ¶å­é€šä¿¡åˆ†ï¼špropsã€emitã€v-modelã€exposeï¼Œè·¨å±‚çº§ç”¨ provide/injectï¼Œå…¨å±€ç”¨ Piniaï¼Œå°‘é‡äº‹ä»¶å¯ç”¨ EventBusã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 13 é¢˜ï¼šVue çš„ `nextTick` åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578830345870082089</link>    <guid>https://juejin.cn/post/7578830345870082089</guid>    <pubDate>2025-12-02T04:32:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578830345870082089" data-draft-id="7578724773993496602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 13 é¢˜ï¼šVue çš„ `nextTick` åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:32:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 13 é¢˜ï¼šVue çš„ `nextTick` åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:32:44.000Z" title="Tue Dec 02 2025 04:32:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 13 é¢˜ï¼šVue çš„ <code>nextTick</code> åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ‡å‡†å›ç­”ï¼ˆé¢è¯•å¿…é¡»è¯´çš„æ ¸å¿ƒï¼‰</h2>
<p><code>nextTick</code> ç”¨æ¥åœ¨ <strong>ä¸‹ä¸€è½® DOM æ›´æ–°å®Œæˆä¹‹å</strong> æ‰§è¡Œå›è°ƒã€‚</p>
<p>å› ä¸º Vue çš„ DOM æ›´æ–°æ˜¯ <strong>å¼‚æ­¥çš„ã€æ‰¹å¤„ç†çš„</strong>ï¼Œå½“ä½ ä¿®æ”¹å“åº”å¼æ•°æ®æ—¶ï¼ŒDOM å¹¶ä¸ä¼šç«‹å³æ›´æ–°ï¼Œè€Œæ˜¯æ”¾åˆ°ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œç­‰åŒä¸€è½®äº‹ä»¶å¾ªç¯ç»“æŸåç»Ÿä¸€æ›´æ–°ã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³æ“ä½œâ€œæ›´æ–°åçš„ DOMâ€ï¼Œå¿…é¡»ä½¿ç”¨ <code>nextTick</code>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€åº•å±‚åŸç†ï¼ˆé«˜é¢‘è€ƒç‚¹ï¼ŒåŠ¡å¿…èƒŒï¼‰</h2>
<p>Vue çš„ <code>nextTick</code> æœ¬è´¨ä¸Šæ˜¯ï¼š</p>
<blockquote>
<p>ä½¿ç”¨ <strong>å¾®ä»»åŠ¡ï¼ˆPromise.thenï¼‰ä¼˜å…ˆ</strong> å®ç°çš„å¼‚æ­¥å›è°ƒæœºåˆ¶ï¼Œå°†ä»»åŠ¡æ¨å…¥äº‹ä»¶å¾ªç¯çš„ä¸‹ä¸€ tick æ‰§è¡Œã€‚</p>
</blockquote>
<p>Vue3 å®ç°ä¼˜å…ˆçº§ï¼š</p>
<ol>
<li><strong>Promise.thenï¼ˆå¾®ä»»åŠ¡ï¼‰</strong></li>
<li>å¦‚æœ Promise ä¸å¯ç”¨ â†’ å†é™çº§åˆ° <strong>MutationObserver</strong></li>
<li>æœ€åæ‰ä½¿ç”¨ <strong>setTimeoutï¼ˆå®ä»»åŠ¡ï¼‰</strong></li>
</ol>
<p>ä¸ºä»€ä¹ˆç”¨å¾®ä»»åŠ¡ï¼Ÿ</p>
<ul>
<li>ä¼˜å…ˆçº§æ¯” setTimeout é«˜</li>
<li>æ‰§è¡Œéå¸¸å¿«</li>
<li>èƒ½ä¿è¯ DOM æ›´æ–°åå°½å¿«æ‰§è¡Œå›è°ƒ</li>
</ul>
<p>è¿™å¥è¯é¢è¯•å®˜å¾ˆçˆ±å¬ï¼š</p>
<blockquote>
<p>Vue3 ä¸­ DOM æ›´æ–°æ˜¯å¼‚æ­¥æ‰¹å¤„ç†çš„ï¼Œè€Œ nextTick å°±æ˜¯è®©ä»£ç åœ¨ DOM æ›´æ–°å®Œåå†æ‰§è¡Œã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ğŸ¯ ä¸‰ã€ä¸ºä»€ä¹ˆ DOM æ›´æ–°æ˜¯å¼‚æ­¥çš„ï¼Ÿ</h2>
<p>è¿™æ˜¯é¢è¯•å®˜ 100% ä¼šè¿½é—®çš„ã€‚</p>
<h4 data-id="heading-4">âœ” åŒæ­¥æ›´æ–° DOM æ€§èƒ½å¤ªå·®</h4>
<p>é¢‘ç¹æ•°æ®å˜åŒ–ä¼šå¯¼è‡´é¢‘ç¹ DOM é‡ç»˜ã€å›æµï¼Œæ€§èƒ½å´©æºƒã€‚</p>
<h4 data-id="heading-5">âœ” å¼‚æ­¥æ‰¹å¤„ç†å¯ä»¥åˆå¹¶æ›´æ–°</h4>
<p>å¤šæ¬¡çŠ¶æ€ä¿®æ”¹ï¼š</p>
<pre><code class="hljs">count.value++
count.value++
count.value++
</code></pre>
<p>Vue ä¸ä¼šæ›´æ–° 3 æ¬¡ï¼Œè€Œæ˜¯ï¼š</p>
<p><strong>åˆå¹¶æ‰€æœ‰çŠ¶æ€å˜æ›´ â†’ æ‰§è¡Œä¸€æ¬¡ DOM æ›´æ–°</strong></p>
<h4 data-id="heading-6">âœ” nextTick ç”¨äºç­‰å¾…è¿™ä¸ªæ›´æ–°å®Œæˆ</h4>
<p>éå¸¸å¥½è®°ï¼š</p>
<blockquote>
<p>â€œæ•°æ®æ”¹å®Œä¸æ˜¯é©¬ä¸Šæ”¹ DOMï¼Œéœ€è¦ nextTick ç­‰ Vue æ‰¹é‡æ”¹å®Œ DOM åå†æ‰§è¡Œä»£ç ã€‚â€</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">ğŸ¯ å››ã€ç®€å•ç†è§£ nextTick çš„æ‰§è¡Œæœºåˆ¶ï¼ˆåŠç™½è¯ï¼‰</h2>
<p>ä½ è¿ç»­æäº¤å¾ˆå¤š DOM æ›´æ–°ï¼Œä½† Vue ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯æ¨å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚</p>
<p>ç„¶åï¼š</p>
<ol>
<li>å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œ</li>
<li>å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œï¼ˆPromise.thenï¼‰</li>
<li>Vue æ‰¹é‡æ›´æ–° DOM</li>
<li>æ‰§è¡Œ nextTick å›è°ƒ</li>
</ol>
<p>é¡ºåºå¤§æ¦‚æ˜¯ï¼š</p>
<pre><code class="hljs">åŒæ­¥ä»£ç  â†’ Vue æ”¶é›†æ›´æ–° â†’ å¾®ä»»åŠ¡æ‰§è¡Œ â†’ DOM æ›´æ–° â†’ nextTick æ‰§è¡Œ
</code></pre>
<hr/>
<h2 data-id="heading-8">ğŸ¯ äº”ã€ä»£ç ç¤ºä¾‹ï¼ˆé¢è¯•å®˜é€šå¸¸è®©ä½ ä¸¾ä¾‹ï¼‰</h2>
<pre><code class="hljs language-scss" lang="scss">count<span class="hljs-selector-class">.value</span>++
await <span class="hljs-built_in">nextTick</span>()
console<span class="hljs-selector-class">.log</span>(divRef.value.innerText) <span class="hljs-comment">// æ‹¿åˆ°çš„æ˜¯æ›´æ–°åçš„ DOM</span>
</code></pre>
<hr/>
<h2 data-id="heading-9">ğŸ¯ å…­ã€æ‰‹å†™ä¸€ä¸ª nextTickï¼ˆå¿…åŠ åˆ†ï¼‰</h2>
<p>é¢è¯•å®˜çœ‹åˆ°ä½ èƒ½æ‰‹å†™ï¼Œç›´æ¥å¯¹ä½ å°è±¡çˆ†ç‚¸åŠ åˆ†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">callbacks</span> = []
let <span class="hljs-attr">pending</span> = <span class="hljs-literal">false</span>

function nextTick(cb) {
  callbacks.push(cb)

  if (!pending) {
    <span class="hljs-attr">pending</span> = <span class="hljs-literal">true</span>
    Promise.resolve().then(() =&gt; {
      <span class="hljs-attr">pending</span> = <span class="hljs-literal">false</span>
      callbacks.forEach(<span class="hljs-attr">fn</span> =&gt; fn())
      <span class="hljs-attr">callbacks.length</span> = <span class="hljs-number">0</span>
    })
  }
}
</code></pre>
<p>è§£é‡Šï¼š</p>
<ul>
<li>å­˜å‚¨å›è°ƒ</li>
<li>æ‰¹å¤„ç†</li>
<li>åˆ©ç”¨ Promise.then åœ¨å¾®ä»»åŠ¡æ‰§è¡Œ</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ¯ ä¸ƒã€é¢è¯•å®˜å¸¸è§è¿½é—®ï¼ˆé™„æœ€ä½³å›ç­”ï¼‰</h2>
<hr/>
<h3 data-id="heading-11"><strong>è¿½é—® 1ï¼šVue3 DOM æ›´æ–°æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<blockquote>
<p>å¼‚æ­¥ã€‚Vue3 ä¼šå°†å¤šæ¬¡æ•°æ®ä¿®æ”¹åˆå¹¶åœ¨ä¸€èµ·ï¼Œé€šè¿‡å¾®ä»»åŠ¡åœ¨ä¸‹ä¸€ä¸ª tick ç»Ÿä¸€æ›´æ–° DOMã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-12"><strong>è¿½é—® 2ï¼šä¸ºä»€ä¹ˆ <code>nextTick(() =&gt; {})</code> æœ‰æ—¶è¿˜æ˜¯æ‹¿ä¸åˆ° DOMï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<blockquote>
<p>å› ä¸ºä½ ç›‘å¬çš„æ˜¯æ•°æ®å˜åŒ–ï¼Œè€Œä¸æ˜¯ DOM æ›´æ–°ï¼›ä½ éœ€è¦ç¡®ä¿ DOM æ¸²æŸ“å‚ä¸äº†æ›´æ–°ã€‚<br/>
æŸäº›åœºæ™¯å¿…é¡»ä½¿ç”¨ <code>await nextTick()</code> è¿ç»­ä¸¤æ¬¡ï¼Œæˆ–ç”¨ <code>flush: 'post'</code>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-13"><strong>è¿½é—® 3ï¼šwatch çš„ flush: 'post' å’Œ nextTick çš„åŒºåˆ«ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<ul>
<li><code>nextTick</code>ï¼šç­‰å¾… <strong>DOM æ›´æ–°ä¹‹å</strong> æ‰§è¡Œ</li>
<li><code>flush: 'post'</code>ï¼šè®©å›è°ƒåœ¨ DOM æ›´æ–°ä¹‹åæ‰§è¡Œï¼ˆç±»ä¼¼ nextTickï¼‰</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-built_in">watch</span>(count, () =&gt; {
  console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'DOM å·²æ›´æ–°'</span>)
}, { flush: <span class="hljs-string">'post'</span> })
</code></pre>
<p>äºŒè€…éƒ½å¯ä»¥â€œç­‰å¾… DOM æ›´æ–°â€ï¼Œä½†ï¼š</p>
<ul>
<li><code>nextTick</code> ç”¨äº<strong>æ•°æ®ä¿®æ”¹åæ‰‹åŠ¨ç­‰å¾… DOM</strong></li>
<li><code>post</code> ç”¨äº <strong>ä¾¦å¬å™¨è‡ªåŠ¨ç­‰å¾… DOM</strong></li>
</ul>
<hr/>
<h3 data-id="heading-14"><strong>è¿½é—® 4ï¼šnextTick æ˜¯ä¸æ˜¯ Vue ç‰¹æœ‰çš„ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<blockquote>
<p>ä¸æ˜¯ï¼ŒReact ä¹Ÿæœ‰ç±»ä¼¼æœºåˆ¶ï¼Œæ‰€æœ‰è™šæ‹Ÿ DOM æ¡†æ¶éƒ½æœ‰å¼‚æ­¥æ‰¹å¤„ç†ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-15">ğŸ¯ å…«ã€ä¸€å¥è¯æ€»ç»“ï¼ˆèƒŒä¸‹æ¥ï¼‰</h2>
<blockquote>
<p>Vue çš„ nextTick åˆ©ç”¨ Promise å¾®ä»»åŠ¡ï¼Œå°†å›è°ƒå»¶è¿Ÿåˆ° DOM å¼‚æ­¥æ‰¹å¤„ç†æ›´æ–°å®Œæˆåæ‰§è¡Œï¼Œç”¨äºä¿è¯ä½ è·å–åˆ°çš„æ˜¯æœ€æ–° DOMã€‚</p>
</blockquote>
<p>æ¥è¯¦ç»†è§£é‡Š <strong>Vue3 ä¸­ <code>watch</code> å’Œ <code>computed</code> çš„åŒºåˆ«</strong>ï¼Œä»åŸç†ã€ç”¨é€”å’Œæ‰§è¡Œæ–¹å¼å¤šç»´åº¦å±•å¼€ï¼Œè®©ä½ é¢è¯•ç­”é¢˜æ—¶ä¸€è¯´å°±æ‡‚ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 14 é¢˜ï¼šVue3 ä¸­è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿå¦‚ä½•æå‡æ€§èƒ½ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578787344612818980</link>    <guid>https://juejin.cn/post/7578787344612818980</guid>    <pubDate>2025-12-02T04:33:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578787344612818980" data-draft-id="7578719771588984842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 14 é¢˜ï¼šVue3 ä¸­è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿå¦‚ä½•æå‡æ€§èƒ½ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:33:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 14 é¢˜ï¼šVue3 ä¸­è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿå¦‚ä½•æå‡æ€§èƒ½ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:33:05.000Z" title="Tue Dec 02 2025 04:33:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 14 é¢˜ï¼šVue3 ä¸­è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿå¦‚ä½•æå‡æ€§èƒ½ï¼Ÿ</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ‡å‡†å›ç­”ï¼ˆé¢è¯•å®˜å¿…é—®æ ¸å¿ƒç‚¹ï¼‰</h2>
<h4 data-id="heading-2"><strong>1ï¸âƒ£ ä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOMï¼ˆVNodeï¼‰</strong></h4>
<p>è™šæ‹Ÿ DOM æ˜¯ Vue å†…éƒ¨çš„ä¸€ç§ <strong>JavaScript å¯¹è±¡è¡¨ç¤ºçš„ DOM æ ‘</strong>ï¼ŒæŠ½è±¡å‡ºçœŸå® DOM çš„ç»“æ„å’Œå±æ€§ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">{
  tag: <span class="hljs-string">'div'</span>,
  props: { id: <span class="hljs-string">'app'</span> },
  children: [
    { tag: <span class="hljs-string">'span'</span>, children: <span class="hljs-string">'Hello'</span> }
  ]
}
</code></pre>
<p>å®ƒæ˜¯<strong>å†…å­˜ä¸­çš„ DOM æè¿°</strong>ï¼Œä¸æ˜¯æµè§ˆå™¨çœŸå® DOMã€‚</p>
<hr/>
<h4 data-id="heading-3"><strong>2ï¸âƒ£ ä¸ºä»€ä¹ˆè¦ç”¨è™šæ‹Ÿ DOM</strong></h4>
<ol>
<li><strong>é¿å…ç›´æ¥æ“ä½œçœŸå® DOMï¼Œæ€§èƒ½é«˜</strong></li>
<li><strong>è·¨å¹³å°æ¸²æŸ“</strong>ï¼ˆå¯æ¸²æŸ“åˆ°æµè§ˆå™¨ã€Nativeã€Canvas ç­‰ï¼‰</li>
<li><strong>Diff ç®—æ³•</strong>ï¼šå¯¹æ¯”æ–°æ—§ VNodeï¼Œåªæ›´æ–°å˜åŒ–éƒ¨åˆ†</li>
<li><strong>ç»„åˆå¼æ¸²æŸ“ä¼˜åŒ–</strong>ï¼šæ›´æ–¹ä¾¿ç®¡ç†å“åº”å¼æ›´æ–°</li>
</ol>
<hr/>
<h2 data-id="heading-4">ğŸ¯ äºŒã€è™šæ‹Ÿ DOM ä¼˜åŠ¿ï¼ˆé«˜åˆ†å¿…ç­”ç‚¹ï¼‰</h2>





























<table><thead><tr><th>ä¼˜åŠ¿</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>æ€§èƒ½ä¼˜åŒ–</td><td>æ‰¹é‡ diff â†’ æœ€å°åŒ–çœŸå® DOM æ›´æ–°</td></tr><tr><td>å¹³å°æ— å…³</td><td>å¯æ¸²æŸ“åœ¨æµè§ˆå™¨ã€æœåŠ¡ç«¯ã€Nativeã€Canvas</td></tr><tr><td>å“åº”å¼ç»“åˆ</td><td>Vue å“åº”å¼ç³»ç»Ÿä¿®æ”¹æ•°æ® â†’ ç”Ÿæˆæ–° VNode â†’ diff â†’ patch</td></tr><tr><td>å¯è°ƒè¯•</td><td>å†…å­˜ä¸­å¯¹è±¡æ˜“äºåˆ†æã€è°ƒè¯•ã€æµ‹è¯•</td></tr><tr><td>è·¨æ¸²æŸ“å™¨</td><td>Vue3 å¯ä»¥é€šè¿‡ renderer API æ¸²æŸ“ä¸åŒå¹³å°</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5">ğŸ¯ ä¸‰ã€Vue3 ä¸­è™šæ‹Ÿ DOM æµç¨‹ï¼ˆé«˜é¢‘é¢è¯•è€ƒç‚¹ï¼‰</h2>
<ol>
<li><strong>æ¨¡æ¿ / render å‡½æ•°</strong> â†’ ç”Ÿæˆ <strong>VNode</strong></li>
<li><strong>å“åº”å¼æ•°æ®å˜åŒ–</strong> â†’ è§¦å‘ <strong>effect</strong> â†’ é‡æ–°ç”Ÿæˆæ–°çš„ VNode</li>
<li><strong>Diff ç®—æ³•</strong> â†’ å¯¹æ¯”æ–°æ—§ VNode</li>
<li><strong>Patch æ›´æ–°</strong> â†’ æœ€å°åŒ–çœŸå® DOM æ›´æ–°</li>
</ol>
<hr/>
<h2 data-id="heading-6">ğŸ¯ å››ã€ä»£ç ç¤ºä¾‹ï¼ˆrender å‡½æ•°ï¼‰</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { h, render } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> vnode = <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">'app'</span> }, [
  <span class="hljs-title function_">h</span>(<span class="hljs-string">'span'</span>, <span class="hljs-string">'Hello Vue3'</span>)
])

<span class="hljs-title function_">render</span>(vnode, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>))
</code></pre>
<p><strong>æµç¨‹è§£é‡Šï¼š</strong></p>
<ul>
<li><code>h()</code> â†’ åˆ›å»º VNode</li>
<li><code>render()</code> â†’ æŒ‚è½½æˆ–æ›´æ–° DOM</li>
<li>æ•°æ®å˜æ›´ â†’ diff â†’ patch â†’ æœ€å°æ›´æ–°</li>
</ul>
<hr/>
<h2 data-id="heading-7">ğŸ¯ äº”ã€é¢è¯•å®˜å¸¸è§è¿½é—®</h2>
<hr/>
<h3 data-id="heading-8"><strong>è¿½é—® 1ï¼šè™šæ‹Ÿ DOM å¯¹æ€§èƒ½çœŸçš„æœ‰æå‡å—ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<ul>
<li>å¯¹å°å‹åº”ç”¨å·®å¼‚ä¸å¤§ï¼Œä½†å¯¹äºé¢‘ç¹ä¿®æ”¹ DOM æˆ–å¤§è§„æ¨¡æ¸²æŸ“æ—¶ï¼Œ<strong>diff ç®—æ³•å‡å°‘å¤§é‡ DOM æ“ä½œ</strong>ï¼Œæ€§èƒ½æå‡æ˜æ˜¾ã€‚</li>
<li>Vue3 ä¸­ <strong>é™æ€èŠ‚ç‚¹æå‡ + PatchFlag</strong> è¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 2ï¼šVue3 Diff ç®—æ³•æ€ä¹ˆä¼˜åŒ–çš„ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<ol>
<li>
<p><strong>PatchFlag é™æ€æå‡</strong></p>
<ul>
<li>é™æ€èŠ‚ç‚¹ä¸éœ€è¦é‡æ–°æ¸²æŸ“</li>
</ul>
</li>
<li>
<p><strong>Keyed Diff</strong></p>
<ul>
<li>ç”¨ <code>key</code> å¿«é€Ÿæ¯”è¾ƒåˆ—è¡¨èŠ‚ç‚¹</li>
</ul>
</li>
<li>
<p><strong>Fragment æ”¯æŒ</strong></p>
<ul>
<li>å‡å°‘é¢å¤– DOM åŒ…è£¹å…ƒç´ </li>
</ul>
</li>
<li>
<p><strong>Teleport / Suspense</strong></p>
<ul>
<li>æå‡å¤æ‚åœºæ™¯æ¸²æŸ“æ•ˆç‡</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-10"><strong>è¿½é—® 3ï¼šè™šæ‹Ÿ DOM ä¼šæ¶ˆè€—å¤§é‡å†…å­˜å—ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<ul>
<li>æ˜¯çš„ï¼Œä½† Vue3 ä½¿ç”¨ <strong>Proxy + effect + PatchFlag</strong> å‡å°‘é‡å¤åˆ›å»º</li>
<li>å¯¹äºå¤§è§„æ¨¡åˆ—è¡¨ï¼Œå»ºè®®ä½¿ç”¨ <code>v-for key</code> + è™šæ‹Ÿæ»šåŠ¨ç­‰ä¼˜åŒ–</li>
</ul>
<hr/>
<h3 data-id="heading-11"><strong>è¿½é—® 4ï¼šVue3 ä¸ºä»€ä¹ˆè™šæ‹Ÿ DOM ä¸åƒ Vue2 é‚£ä¹ˆæ…¢ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<ul>
<li>Vue3 é‡‡ç”¨ <strong>Proxy + Composition API + Compiler ä¼˜åŒ–</strong></li>
<li>é™æ€èŠ‚ç‚¹æå‡ + PatchFlag + Fragment â†’ å‡å°‘ diff é‡</li>
<li>æ›´å°‘ä¸­é—´å¯¹è±¡ç”Ÿæˆ â†’ æ€§èƒ½æ˜¾è‘—æå‡</li>
</ul>
<hr/>
<h2 data-id="heading-12">ğŸ¯ å…­ã€killer é—®é¢˜ï¼ˆé¢è¯•å®˜çˆ±é—®çš„è¿›é˜¶é¢˜ï¼‰</h2>
<h4 data-id="heading-13">â“ â€œè™šæ‹Ÿ DOM å’ŒçœŸå® DOM æ“ä½œç›¸æ¯”çš„ä¼˜åŠ£ï¼Ÿâ€</h4>
<p><strong>ç­”æ¡ˆè¦ç‚¹ï¼š</strong></p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæ‰¹é‡å¤„ç†ã€è·¨å¹³å°ã€å¯æ§æ›´æ–°</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šæ¯”ç›´æ¥æ“ä½œçœŸå® DOM å¤šä¸€æ¬¡ä¸­é—´å±‚</li>
<li><strong>ç»“è®º</strong>ï¼šåœ¨å¤§å¤šæ•°å¤æ‚åº”ç”¨ä¸­ä¼˜åŠ¿å¤§äºåŠ£åŠ¿ï¼Œå°¤å…¶é…åˆ Vue3 ç¼–è¯‘ä¼˜åŒ–</li>
</ul>
<hr/>
<h4 data-id="heading-14">â“ â€œPatchFlag æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆ Vue3 éœ€è¦å®ƒï¼Ÿâ€</h4>
<ul>
<li>PatchFlagï¼šç¼–è¯‘é˜¶æ®µæ ‡è®° VNode çš„å˜åŒ–ç±»å‹</li>
<li>ä½œç”¨ï¼šè®©æ¸²æŸ“å™¨åªå¯¹å˜åŒ–çš„éƒ¨åˆ†è¿›è¡Œ patch</li>
<li>ä¼˜åŒ–æ€§èƒ½ â†’ å‡å°‘ diff è®¡ç®—</li>
</ul>
<hr/>
<h2 data-id="heading-15">ğŸ¯ ä¸ƒã€ä¸€å¥è¯æ€»ç»“ï¼ˆèƒŒé¢è¯•å®˜å³å¯ï¼‰</h2>
<blockquote>
<p>è™šæ‹Ÿ DOM æ˜¯ Vue å†…å­˜ä¸­ DOM æè¿°å¯¹è±¡ï¼Œé€šè¿‡ diff ç®—æ³•å®ç°æœ€å°åŒ–æ›´æ–°ï¼Œé¿å…ç›´æ¥æ“ä½œçœŸå® DOMï¼ŒVue3 é€šè¿‡ PatchFlagã€é™æ€æå‡å’Œ Proxy å“åº”å¼æå¤§ä¼˜åŒ–äº†æ€§èƒ½ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 15 é¢˜ï¼šcomputed vs watch åŒºåˆ« + ä½¿ç”¨åœºæ™¯]]></title>    <link>https://juejin.cn/post/7578787344612835364</link>    <guid>https://juejin.cn/post/7578787344612835364</guid>    <pubDate>2025-12-02T04:33:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578787344612835364" data-draft-id="7578719771589001226" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 15 é¢˜ï¼šcomputed vs watch åŒºåˆ« + ä½¿ç”¨åœºæ™¯"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:33:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 15 é¢˜ï¼šcomputed vs watch åŒºåˆ« + ä½¿ç”¨åœºæ™¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:33:24.000Z" title="Tue Dec 02 2025 04:33:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 15 é¢˜ï¼šcomputed vs watch åŒºåˆ« + ä½¿ç”¨åœºæ™¯</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ‡å‡†å›ç­”ï¼ˆé¢è¯•å®˜å¿…ç­”ç‚¹ï¼‰</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>computed</th><th>watch</th></tr></thead><tbody><tr><td>ä¾èµ–æ”¶é›†</td><td>è‡ªåŠ¨ä¾èµ–è¿½è¸ª</td><td>éœ€è¦æ‰‹åŠ¨æŒ‡å®šä¾èµ–</td></tr><tr><td>è¿”å›å€¼</td><td>ä¼šç¼“å­˜ï¼ˆlazy evaluationï¼‰</td><td>ä¸ç¼“å­˜</td></tr><tr><td>ç”¨é€”</td><td>è®¡ç®—è¡ç”Ÿæ•°æ®</td><td>æ‰§è¡Œå‰¯ä½œç”¨ï¼ˆAPIã€DOMæ“ä½œç­‰ï¼‰</td></tr><tr><td>æ‰§è¡Œæ—¶æœº</td><td>è®¿é—®æ—¶æ‰æ‰§è¡Œ</td><td>æ•°æ®å˜åŒ–æ—¶è§¦å‘</td></tr><tr><td>è·å– oldValue</td><td>âŒ</td><td>âœ” å¯ä»¥è·å–</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>çº¯è®¡ç®—é€»è¾‘</td><td>ç›‘å¬å˜åŒ–åšå¼‚æ­¥æˆ–å‰¯ä½œç”¨å¤„ç†</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€ä»£ç ç¤ºä¾‹</h2>
<h4 data-id="heading-3"><strong>1ï¸âƒ£ computed ç¤ºä¾‹ï¼ˆç¼“å­˜è®¡ç®—ï¼‰</strong></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>)
<span class="hljs-keyword">const</span> double = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(double.<span class="hljs-property">value</span>) <span class="hljs-comment">// 2</span>

count.<span class="hljs-property">value</span>++
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(double.<span class="hljs-property">value</span>) <span class="hljs-comment">// 4ï¼Œcomputed ä¼šè‡ªåŠ¨æ›´æ–°å¹¶ç¼“å­˜</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åªæœ‰è®¿é—® <code>double.value</code> æ—¶æ‰æ‰§è¡Œ</li>
<li>å¦‚æœä¾èµ–æœªå˜åŒ–ï¼Œç›´æ¥è¿”å›ç¼“å­˜å€¼</li>
</ul>
<hr/>
<h4 data-id="heading-4"><strong>2ï¸âƒ£ watch ç¤ºä¾‹ï¼ˆå‰¯ä½œç”¨ç›‘å¬ï¼‰</strong></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>)

<span class="hljs-title function_">watch</span>(count, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`count changed from <span class="hljs-subst">${oldVal}</span> to <span class="hljs-subst">${newVal}</span>`</span>)
})
count.<span class="hljs-property">value</span>++  <span class="hljs-comment">// è§¦å‘ watch å›è°ƒ</span>
</span></code></pre>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>è§¦å‘å‰¯ä½œç”¨ï¼ˆæ—¥å¿—ã€è¯·æ±‚ APIã€æ“ä½œ DOMï¼‰</li>
<li>å¯ä»¥è·å– <code>oldVal</code></li>
<li>é»˜è®¤ flush: 'pre'ï¼ˆå¯æŒ‡å®š post æˆ– syncï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ¯ ä¸‰ã€é¢è¯•å®˜è¿½é—®ï¼ˆé«˜é¢‘ï¼‰</h2>
<hr/>
<h3 data-id="heading-6"><strong>è¿½é—® 1ï¼šcomputed èƒ½åšå¼‚æ­¥å—ï¼Ÿ</strong></h3>
<p><strong>ç­”</strong>ï¼š</p>
<ul>
<li>computed ä¸æ”¯æŒå¼‚æ­¥ï¼ˆåªè®¡ç®—åŒæ­¥é€»è¾‘ï¼‰</li>
<li>å¼‚æ­¥é€»è¾‘åº”è¯¥ç”¨ <code>watch</code> æˆ– <code>watchEffect</code></li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>è¿½é—® 2ï¼šcomputed çš„æ‡’æ‰§è¡ŒåŸç†ï¼Ÿ</strong></h3>
<p><strong>ç­”</strong>ï¼š</p>
<ul>
<li>å†…éƒ¨ä¾èµ–æ”¶é›† + dirty flag</li>
<li>ä¾èµ–å˜åŒ–æ—¶æ ‡è®° dirty = true</li>
<li>ä¸‹æ¬¡è®¿é—® value æ—¶æ‰é‡æ–°è®¡ç®—å¹¶ç¼“å­˜ç»“æœ</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>è¿½é—® 3ï¼šcomputed vs watchEffect åŒºåˆ«ï¼Ÿ</strong></h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>computed</th><th>watchEffect</th></tr></thead><tbody><tr><td>è¿”å›å€¼</td><td>ç¼“å­˜è¿”å›å€¼</td><td>æ— è¿”å›å€¼</td></tr><tr><td>ä¾èµ–</td><td>è‡ªåŠ¨æ”¶é›†</td><td>è‡ªåŠ¨æ”¶é›†</td></tr><tr><td>æ‰§è¡Œæ—¶æœº</td><td>è®¿é—® value æ—¶æ‰æ‰§è¡Œ</td><td>é»˜è®¤ç«‹å³æ‰§è¡Œä¸€æ¬¡</td></tr><tr><td>ç”¨é€”</td><td>è¡ç”Ÿæ•°æ®</td><td>å‰¯ä½œç”¨é€»è¾‘</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 4ï¼šwatch å¯ä»¥æ›¿ä»£ computed å—ï¼Ÿ</strong></h3>
<p><strong>ç­”</strong>ï¼š</p>
<ul>
<li>æŠ€æœ¯ä¸Šå¯ä»¥ï¼Œä½†ä¸æ¨è</li>
<li>watch ä¸ç¼“å­˜ï¼Œæ¯æ¬¡è®¿é—®éƒ½å¯èƒ½é‡æ–°æ‰§è¡Œ</li>
<li>computed æ›´è½»é‡ä¸”æ€§èƒ½é«˜</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>è¿½é—® 5ï¼šcomputed å¯ä»¥å’Œ ref è”åŠ¨å—ï¼Ÿ</strong></h3>
<pre><code class="hljs language-scss" lang="scss">const count = <span class="hljs-built_in">ref</span>(<span class="hljs-number">1</span>)
const double = <span class="hljs-built_in">computed</span>(() =&gt; count<span class="hljs-selector-class">.value</span> * <span class="hljs-number">2</span>)
double<span class="hljs-selector-class">.value</span>++ <span class="hljs-comment">// âŒ æŠ¥é”™ï¼Œcomputed é»˜è®¤åªè¯»</span>
</code></pre>
<ul>
<li><strong>è§£å†³æ–¹æ³•</strong>ï¼šä½¿ç”¨ <code>computed({ get, set })</code> åˆ›å»ºå¯å†™ computed</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">const</span> <span class="hljs-built_in">double</span> = computed({
  <span class="hljs-keyword">get</span>: () =&gt; count.value * <span class="hljs-number">2</span>,
  <span class="hljs-keyword">set</span>: val =&gt; count.value = val / <span class="hljs-number">2</span>
})
</code></pre>
<hr/>
<h2 data-id="heading-11">ğŸ¯ å››ã€ä¸€å¥è¯æ€»ç»“ï¼ˆèƒŒé¢è¯•å®˜å³å¯ï¼‰</h2>
<blockquote>
<p>computed ç”¨äºç¼“å­˜è¡ç”Ÿæ•°æ®ï¼Œæ‡’æ‰§è¡Œã€è‡ªåŠ¨ä¾èµ–æ”¶é›†ï¼›watch ç”¨äºç›‘å¬æ•°æ®å˜åŒ–è§¦å‘å‰¯ä½œç”¨ï¼Œå¯è·å–æ–°æ—§å€¼ã€‚computed æ›´è½»é‡ï¼Œwatch æ›´çµæ´»ï¼Œé€‚åˆå¼‚æ­¥æˆ–å‰¯ä½œç”¨é€»è¾‘ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£é‡Šwatchå’Œcomputedçš„åŸç†]]></title>    <link>https://juejin.cn/post/7578818741698412550</link>    <guid>https://juejin.cn/post/7578818741698412550</guid>    <pubDate>2025-12-02T04:33:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578818741698412550" data-draft-id="7578699866182402086" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£é‡Šwatchå’Œcomputedçš„åŸç†"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:33:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£é‡Šwatchå’Œcomputedçš„åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:33:44.000Z" title="Tue Dec 02 2025 04:33:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>1ï¸âƒ£ æ ¸å¿ƒåŒºåˆ«è¡¨</strong></h2>


















































<table><thead><tr><th>ç‰¹æ€§</th><th>computed</th><th>watch</th></tr></thead><tbody><tr><td><strong>ç”¨é€”</strong></td><td>è®¡ç®—è¡ç”Ÿæ•°æ®</td><td>ç›‘å¬å˜åŒ–æ‰§è¡Œå‰¯ä½œç”¨</td></tr><tr><td><strong>è¿”å›å€¼</strong></td><td>ä¼šè¿”å›å€¼å¹¶ç¼“å­˜</td><td>æ— è¿”å›å€¼ï¼ˆä¸»è¦è§¦å‘å›è°ƒï¼‰</td></tr><tr><td><strong>æ‰§è¡Œæ—¶æœº</strong></td><td>è®¿é—® <code>.value</code> æ—¶æ‰æ‰§è¡Œ</td><td>æ•°æ®å˜åŒ–æ—¶ç«‹å³è§¦å‘ï¼ˆflush å¯æ§åˆ¶ï¼‰</td></tr><tr><td><strong>ç¼“å­˜æœºåˆ¶</strong></td><td>âœ… ä¼šç¼“å­˜ï¼Œä¾èµ–æœªå˜ä¸é‡æ–°è®¡ç®—</td><td>âŒ ä¸ç¼“å­˜ï¼Œæ¯æ¬¡ä¾èµ–å˜åŒ–éƒ½ä¼šè§¦å‘å›è°ƒ</td></tr><tr><td><strong>ä¾èµ–æ”¶é›†</strong></td><td>è‡ªåŠ¨æ”¶é›†ä¾èµ–</td><td>éœ€æ‰‹åŠ¨æŒ‡å®šç›‘å¬å¯¹è±¡ï¼ˆæˆ– watchEffect è‡ªåŠ¨æ”¶é›†ï¼‰</td></tr><tr><td><strong>å¯è·å– oldValue</strong></td><td>âŒ</td><td>âœ…</td></tr><tr><td><strong>å¼‚æ­¥æ”¯æŒ</strong></td><td>âŒ ä»…åŒæ­¥è®¡ç®—</td><td>âœ… å¯åšå¼‚æ­¥å‰¯ä½œç”¨ï¼ˆAPIã€DOM æ“ä½œç­‰ï¼‰</td></tr><tr><td><strong>é€‚åˆåœºæ™¯</strong></td><td>çº¯é€»è¾‘è®¡ç®—ã€UI å±•ç¤ºæ•°æ®</td><td>å‰¯ä½œç”¨é€»è¾‘ã€å¼‚æ­¥è¯·æ±‚ã€æ“ä½œ DOM ç­‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1"><strong>2ï¸âƒ£ ç†è§£æ–¹å¼</strong></h2>
<ol>
<li>
<p><strong>computed = è®¡ç®—å±æ€§ï¼ˆæƒ°æ€§æ±‚å€¼ + ç¼“å­˜ï¼‰</strong></p>
<ul>
<li>ä¸»è¦ç”¨äºæ ¹æ®å·²æœ‰æ•°æ®è®¡ç®—å‡ºæ–°çš„æ•°æ®</li>
<li>è®¿é—® value æ—¶æ‰è§¦å‘è®¡ç®—</li>
<li>ä¸é€‚åˆåšå‰¯ä½œç”¨</li>
</ul>
</li>
<li>
<p><strong>watch = æ•°æ®ä¾¦å¬å™¨ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰</strong></p>
<ul>
<li>ç”¨äºç›‘å¬æŸä¸ªå“åº”å¼å˜é‡å˜åŒ–</li>
<li>è§¦å‘å›è°ƒæ‰§è¡Œå‰¯ä½œç”¨ï¼ˆAPI è¯·æ±‚ã€DOM æ“ä½œã€æ—¥å¿—ç­‰ï¼‰</li>
<li>å¯è®¿é—®æ–°æ—§å€¼</li>
<li>å¯ä»¥åšå¼‚æ­¥æ“ä½œ</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-2"><strong>3ï¸âƒ£ åŸç†ä¸Šçš„å·®å¼‚</strong></h2>
<ul>
<li>
<p><strong>computed</strong></p>
<ul>
<li>å†…éƒ¨æœ‰ <code>effect</code> + <code>dirty</code> flag</li>
<li>ä¾èµ–å˜åŒ–æ—¶æ ‡è®° dirty = true</li>
<li>ä¸‹ä¸€æ¬¡è®¿é—® value æ—¶é‡æ–°è®¡ç®—</li>
<li>å¯ä»¥ç¼“å­˜ï¼Œå‡å°‘é‡å¤è®¡ç®—</li>
</ul>
</li>
<li>
<p><strong>watch</strong></p>
<ul>
<li>ç›´æ¥å¯¹å“åº”å¼æ•°æ®æ³¨å†Œ effect</li>
<li>æ•°æ®å˜åŒ–æ—¶ç«‹å³è§¦å‘å›è°ƒ</li>
<li>å›è°ƒä¸è¿”å›å€¼</li>
<li>å¯é€‰æ‹© flushï¼š<code>pre/post/sync</code> æ§åˆ¶æ‰§è¡Œæ—¶æœº</li>
</ul>
</li>
</ul>
<h2 data-id="heading-3"><strong>computed çš„åŸç†</strong></h2>
<p><code>computed</code> æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <strong>å¸¦ç¼“å­˜çš„å“åº”å¼å‰¯ä½œç”¨</strong>ï¼š</p>
<ol>
<li>
<p><strong>ä¾èµ–æ”¶é›†</strong></p>
<ul>
<li>å½“è®¿é—® <code>computed.value</code> æ—¶ï¼ŒVue ä¼šè§¦å‘å…¶å†…éƒ¨ <code>effect</code>ï¼Œè¿½è¸ªå®ƒä¾èµ–çš„å“åº”å¼æ•°æ®ï¼ˆref æˆ– reactive å¯¹è±¡ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æƒ°æ€§æ±‚å€¼ï¼ˆlazyï¼‰</strong></p>
<ul>
<li>åˆæ¬¡è®¿é—®æ—¶æ‰§è¡Œ getterï¼Œç”Ÿæˆå€¼å¹¶ç¼“å­˜</li>
<li>æ ‡è®° <code>dirty = false</code></li>
</ul>
</li>
<li>
<p><strong>ç¼“å­˜æœºåˆ¶</strong></p>
<ul>
<li>å½“ä¾èµ–å˜åŒ–æ—¶ï¼Œå“åº”å¼ç³»ç»Ÿä¼šå°† <code>dirty = true</code></li>
<li>ä¸‹æ¬¡è®¿é—® <code>.value</code> æ—¶é‡æ–°è®¡ç®—å¹¶æ›´æ–°ç¼“å­˜</li>
</ul>
</li>
<li>
<p><strong>ä¸å¯è·å–æ—§å€¼</strong></p>
<ul>
<li>å› ä¸º computed åªå…³æ³¨æœ€æ–°å€¼ï¼Œå†…éƒ¨åªå­˜å½“å‰ç¼“å­˜</li>
</ul>
</li>
</ol>
<p><strong>ç¤ºæ„æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">è®¿é—® computed.value â†’ æ£€æŸ¥ dirty
    â”œâ”€ <span class="hljs-attr">dirty</span> = <span class="hljs-literal">true</span> â†’ æ‰§è¡Œ getter â†’ ç¼“å­˜å€¼ â†’ dirty = <span class="hljs-literal">false</span>
    â””â”€ <span class="hljs-attr">dirty</span> = <span class="hljs-literal">false</span> â†’ ç›´æ¥è¿”å›ç¼“å­˜å€¼
ä¾èµ–å˜åŒ– â†’ effect æ ‡è®° <span class="hljs-attr">dirty</span> = <span class="hljs-literal">true</span>
</code></pre>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> { ref, computed } from <span class="hljs-string">'vue'</span>

<span class="hljs-type">const</span> count = <span class="hljs-built_in">ref</span>(<span class="hljs-number">1</span>)
<span class="hljs-type">const</span> <span class="hljs-type">double</span> = <span class="hljs-built_in">computed</span>(() =&gt; count.value * <span class="hljs-number">2</span>)

console.<span class="hljs-built_in">log</span>(<span class="hljs-type">double</span>.value) <span class="hljs-comment">// 2</span>
count.value++
console.<span class="hljs-built_in">log</span>(<span class="hljs-type">double</span>.value) <span class="hljs-comment">// 4ï¼Œé‡æ–°è®¡ç®—</span>
</code></pre>
<hr/>
<h2 data-id="heading-4"><strong>2ï¸âƒ£ watch çš„åŸç†</strong></h2>
<p><code>watch</code> æœ¬è´¨æ˜¯ä¸€ä¸ª <strong>å“åº”å¼æ•°æ®çš„è§‚å¯Ÿè€…ï¼ˆWatcherï¼‰</strong> ï¼Œç”¨äºæ‰§è¡Œå‰¯ä½œç”¨ï¼š</p>
<ol>
<li>
<p><strong>æ‰‹åŠ¨ä¾èµ–é€‰æ‹©</strong></p>
<ul>
<li>ä½ ä¼ å…¥è¦ç›‘å¬çš„å“åº”å¼å¯¹è±¡ï¼ˆref / reactive / getterï¼‰</li>
<li>Vue å†…éƒ¨ä¼šå¯¹å…¶æ³¨å†Œ effect</li>
</ul>
</li>
<li>
<p><strong>å“åº”å¼è§¦å‘</strong></p>
<ul>
<li>å½“è¢«ç›‘å¬çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œeffect ä¼šè§¦å‘å›è°ƒå‡½æ•°</li>
</ul>
</li>
<li>
<p><strong>å¯è·å– oldValue / newValue</strong></p>
<ul>
<li>watch åœ¨è§¦å‘æ—¶ä¼šæä¾›æ–°å€¼å’Œæ—§å€¼</li>
</ul>
</li>
<li>
<p><strong>å¼‚æ­¥å¯é€‰</strong></p>
<ul>
<li>é»˜è®¤ flush: 'pre'</li>
<li>å¯ä»¥æŒ‡å®š 'post'ï¼ˆDOM æ›´æ–°åï¼‰æˆ– 'sync'ï¼ˆåŒæ­¥æ‰§è¡Œï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ²¡æœ‰ç¼“å­˜</strong></p>
<ul>
<li>æ¯æ¬¡æ•°æ®å˜åŒ–éƒ½ä¼šè°ƒç”¨å›è°ƒå‡½æ•°</li>
<li>é€‚åˆå‰¯ä½œç”¨é€»è¾‘ï¼Œä¸ç”¨äºçº¯è®¡ç®—</li>
</ul>
</li>
</ol>
<p><strong>ç¤ºæ„æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">watch</span>(reactiveData, callback)
    â””â”€ å†…éƒ¨åˆ›å»º effect
ä¾èµ–å˜åŒ– â†’ è§¦å‘ effect â†’ <span class="hljs-built_in">callback</span>(newValue, oldValue)
</code></pre>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>)

<span class="hljs-title function_">watch</span>(count, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`count changed from <span class="hljs-subst">${oldVal}</span> to <span class="hljs-subst">${newVal}</span>`</span>)
})

count.<span class="hljs-property">value</span>++  <span class="hljs-comment">// è§¦å‘ watch å›è°ƒ</span>
</code></pre>
<hr/>
<h2 data-id="heading-5"><strong>3ï¸âƒ£ åŸç†æ€»ç»“å¯¹æ¯”</strong></h2>



































<table><thead><tr><th>ç‰¹æ€§</th><th>computed</th><th>watch</th></tr></thead><tbody><tr><td>å†…éƒ¨æœºåˆ¶</td><td>effect + dirty flag</td><td>effect ç›´æ¥è§¦å‘å›è°ƒ</td></tr><tr><td>è§¦å‘æ—¶æœº</td><td>è®¿é—® <code>.value</code> æ—¶ï¼ˆæ‡’æ‰§è¡Œï¼‰</td><td>æ•°æ®å˜åŒ–æ—¶ç«‹å³è§¦å‘</td></tr><tr><td>ç¼“å­˜</td><td>âœ… ç¼“å­˜ä¸Šæ¬¡è®¡ç®—å€¼</td><td>âŒ ä¸ç¼“å­˜ï¼Œæ¯æ¬¡è§¦å‘å›è°ƒ</td></tr><tr><td>oldValue</td><td>âŒ æ— </td><td>âœ… æœ‰</td></tr><tr><td>ä½¿ç”¨ç›®çš„</td><td>è¡ç”Ÿæ•°æ®è®¡ç®—</td><td>æ‰§è¡Œå‰¯ä½œç”¨ï¼ˆå¼‚æ­¥ã€DOM æ“ä½œç­‰ï¼‰</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 16 é¢˜ï¼šVue3 å“åº”å¼åŸç†æ·±åº¦è§£æï¼ˆProxy + effect æ ˆ + ä¾èµ–è¿½è¸ªï¼‰]]></title>    <link>https://juejin.cn/post/7578811288819482667</link>    <guid>https://juejin.cn/post/7578811288819482667</guid>    <pubDate>2025-12-02T04:34:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578811288819482667" data-draft-id="7578709098256039974" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 16 é¢˜ï¼šVue3 å“åº”å¼åŸç†æ·±åº¦è§£æï¼ˆProxy + effect æ ˆ + ä¾èµ–è¿½è¸ªï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:34:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 16 é¢˜ï¼šVue3 å“åº”å¼åŸç†æ·±åº¦è§£æï¼ˆProxy + effect æ ˆ + ä¾èµ–è¿½è¸ªï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:34:07.000Z" title="Tue Dec 02 2025 04:34:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 16 é¢˜ï¼šVue3 å“åº”å¼åŸç†æ·±åº¦è§£æï¼ˆProxy + effect æ ˆ + ä¾èµ–è¿½è¸ªï¼‰</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ¸å¿ƒé—®é¢˜</h2>
<p><strong>é—®ï¼šVue3 å“åº”å¼æ˜¯å¦‚ä½•å®ç°çš„ï¼ŸProxyã€effect æ ˆå’Œä¾èµ–è¿½è¸ªæ˜¯æ€ä¹ˆåä½œçš„ï¼Ÿ</strong></p>
<p>è¿™æ˜¯é«˜é¢‘é¢è¯•æ·±åº¦é¢˜ï¼Œé¢è¯•å®˜ä¸€èˆ¬ä¼šè¿½é—® â€œä¸ºä»€ä¹ˆ Vue3 æ€§èƒ½æ¯” Vue2 å¥½â€ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€æ ‡å‡†å›ç­”ï¼ˆé¢è¯•å®˜æ»¡æ„ç‰ˆï¼‰</h2>
<ol>
<li>
<p><strong>å“åº”å¼æ ¸å¿ƒæ˜¯ Proxy</strong></p>
<ul>
<li>Vue3 ä¸å†ä½¿ç”¨ definePropertyï¼Œè€Œæ˜¯ä½¿ç”¨ Proxy ä»£ç†å¯¹è±¡</li>
<li>Proxy å¯ä»¥æ‹¦æˆª <code>get</code>ã€<code>set</code>ã€<code>deleteProperty</code> ç­‰æ“ä½œ</li>
<li>æ”¯æŒæ–°å¢å±æ€§ã€æ•°ç»„ä¸‹æ ‡å˜åŒ–ã€åˆ é™¤å±æ€§ç­‰</li>
</ul>
</li>
<li>
<p><strong>ä¾èµ–æ”¶é›†ï¼ˆTrackï¼‰</strong></p>
<ul>
<li>å½“è®¿é—®å“åº”å¼å¯¹è±¡çš„å±æ€§æ—¶ï¼ŒProxy çš„ <code>get</code> ä¼šè¢«è§¦å‘</li>
<li>Vue å†…éƒ¨å°†å½“å‰æ‰§è¡Œçš„ effectï¼ˆå‡½æ•°ï¼‰è®°å½•åˆ° <strong>ä¾èµ–é›†åˆ</strong></li>
<li>è¿™æ ·å½“å±æ€§å˜åŒ–æ—¶ï¼Œå¯ä»¥ç²¾å‡†è§¦å‘ä¾èµ–çš„ effect</li>
</ul>
</li>
<li>
<p><strong>effect æ ˆ</strong></p>
<ul>
<li>Vue3 ç”¨æ ˆç»“æ„ç»´æŠ¤å½“å‰æ¿€æ´»çš„ effect</li>
<li>å½“ä¸€ä¸ª effect æ‰§è¡Œæ—¶ï¼Œpush åˆ°æ ˆé¡¶</li>
<li>åœ¨ <code>get</code> è§¦å‘æ—¶ï¼Œä¾èµ–æ”¶é›†ä½¿ç”¨æ ˆé¡¶ effect</li>
<li>ç»“æŸå pop å‡ºæ ˆ</li>
<li>è§£å†³åµŒå¥— effect çš„ä¾èµ–è¿½è¸ªé—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>è§¦å‘ä¾èµ–ï¼ˆTriggerï¼‰</strong></p>
<ul>
<li>å½“å±æ€§é€šè¿‡ Proxy <code>set</code> æ”¹å˜æ—¶</li>
<li>Vue ä¼šæŸ¥æ‰¾ä¾èµ–é›†åˆï¼Œå¹¶ä¾æ¬¡æ‰§è¡Œ effect</li>
<li>å®ç°ç»„ä»¶é‡æ–°æ¸²æŸ“æˆ– computed æ›´æ–°</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-3">ğŸ¯ ä¸‰ã€ç®€åŒ–æµç¨‹å›¾</h2>
<pre><code class="hljs language-scss" lang="scss">å“åº”å¼å¯¹è±¡è¢«è®¿é—®
       â”‚
       â–¼
Proxy get æ‹¦æˆª
       â”‚
       â–¼
<span class="hljs-built_in">track</span>(effect) æ”¶é›†ä¾èµ–
       â”‚
       â–¼
æ•°æ®å˜åŒ–
       â”‚
       â–¼
Proxy set æ‹¦æˆª
       â”‚
       â–¼
<span class="hljs-built_in">trigger</span>(effect) è§¦å‘ä¾èµ–æ‰§è¡Œ
</code></pre>
<hr/>
<h2 data-id="heading-4">ğŸ¯ å››ã€ç¤ºä¾‹ä»£ç ï¼ˆåŸç†æ¼”ç¤ºï¼‰</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { reactive, effect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })

<span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'count ='</span>, state.<span class="hljs-property">count</span>)
})

state.<span class="hljs-property">count</span>++  <span class="hljs-comment">// è‡ªåŠ¨è§¦å‘ effectï¼Œæ‰“å°æœ€æ–°å€¼</span>
</code></pre>
<p><strong>è§£é‡Šï¼š</strong></p>
<ul>
<li><code>reactive</code> åˆ›å»º Proxy</li>
<li><code>effect</code> åŒ…è£¹å›è°ƒå‡½æ•°å¹¶å…¥æ ˆ</li>
<li>è®¿é—® <code>state.count</code> â†’ track æ”¶é›†ä¾èµ–</li>
<li>ä¿®æ”¹ <code>state.count</code> â†’ trigger æ‰§è¡Œ effect</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ¯ äº”ã€é¢è¯•å®˜å¸¸è§è¿½é—®ï¼ˆé«˜é¢‘ï¼‰</h2>
<hr/>
<h3 data-id="heading-6"><strong>è¿½é—® 1ï¼šä¸ºä»€ä¹ˆ Vue3 ä½¿ç”¨ Proxyï¼Œæ¯” Vue2 defineProperty æ€§èƒ½æ›´å¥½ï¼Ÿ</strong></h3>
<ul>
<li>ä¸éœ€è¦é€’å½’éå†æ•´ä¸ªå¯¹è±¡ï¼ˆæƒ°æ€§ä»£ç†ï¼‰</li>
<li>æ”¯æŒæ–°å¢ / åˆ é™¤å±æ€§ã€æ•°ç»„ä¸‹æ ‡</li>
<li>æ›´å°‘å†…å­˜å¼€é”€</li>
<li>ä¾èµ–æ”¶é›†æ›´ç²¾å‡†ï¼Œå‡å°‘æ— æ•ˆæ›´æ–°</li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>è¿½é—® 2ï¼šeffect æ ˆæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</strong></h3>
<ul>
<li>æ”¯æŒåµŒå¥— effect</li>
<li>é¿å…è¯¯æ”¶é›† effect</li>
<li>ä¿è¯ track æ—¶æ€»æ˜¯æ”¶é›†å½“å‰æ¿€æ´»çš„ effect</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>è¿½é—® 3ï¼šä¾èµ–è¿½è¸ªå¦‚ä½•é¿å…é‡å¤æ”¶é›†ï¼Ÿ</strong></h3>
<ul>
<li>æ¯ä¸ªå±æ€§ä¾èµ–ä½¿ç”¨ <strong>Set</strong> ä¿å­˜ effect</li>
<li>åŒä¸€ä¸ª effect ä¸ä¼šé‡å¤åŠ å…¥ä¾èµ–é›†åˆ</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 4ï¼šcomputed æ˜¯æ€ä¹ˆåˆ©ç”¨ effect æ ˆçš„ï¼Ÿ</strong></h3>
<ul>
<li>computed å†…éƒ¨ä¹Ÿç”¨ effect åŒ…è£¹ getter</li>
<li>effect æ ˆä¿è¯ä¾èµ–æ”¶é›†åœ¨è®¡ç®—æ—¶æœ‰æ•ˆ</li>
<li>ä¾èµ–å˜åŒ–æ—¶ï¼Œcomputed è¢«æ ‡è®° dirtyï¼Œä¸‹æ¬¡è®¿é—®é‡æ–°è®¡ç®—</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>è¿½é—® 5ï¼šå“åº”å¼å¾ªç¯å¼•ç”¨æ€ä¹ˆåŠï¼Ÿ</strong></h3>
<ul>
<li>Vue3 Proxy æœ¬èº«æ”¯æŒå¾ªç¯å¯¹è±¡</li>
<li>æ¯æ¬¡ reactive è°ƒç”¨ä¼š <strong>ç¼“å­˜å·²ä»£ç†å¯¹è±¡</strong></li>
<li>é¿å…é‡å¤ä»£ç†å’Œæ— é™é€’å½’</li>
</ul>
<hr/>
<h2 data-id="heading-11">ğŸ¯ å…­ã€ä¸€å¥è¯æ€»ç»“ï¼ˆé¢è¯•å®˜å¿…èƒŒï¼‰</h2>
<blockquote>
<p>Vue3 å“åº”å¼åŸç†ï¼šé€šè¿‡ Proxy æ‹¦æˆªå¯¹è±¡æ“ä½œ + effect æ ˆç®¡ç†å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ + track/trigger ç²¾å‡†æ”¶é›†ä¾èµ–ï¼Œå®ç°é«˜æ€§èƒ½ã€å¯ç¼“å­˜ã€å¯åµŒå¥—çš„å“åº”å¼ç³»ç»Ÿã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 18 é¢˜ï¼šVue3 å“åº”å¼åŸç†ä¸­çš„ effectã€ä¾èµ–æ”¶é›†ä¸ä¾èµ–è§¦å‘]]></title>    <link>https://juejin.cn/post/7578818741698428934</link>    <guid>https://juejin.cn/post/7578818741698428934</guid>    <pubDate>2025-12-02T04:34:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578818741698428934" data-draft-id="7578724773993529370" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 18 é¢˜ï¼šVue3 å“åº”å¼åŸç†ä¸­çš„ effectã€ä¾èµ–æ”¶é›†ä¸ä¾èµ–è§¦å‘"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:34:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 18 é¢˜ï¼šVue3 å“åº”å¼åŸç†ä¸­çš„ effectã€ä¾èµ–æ”¶é›†ä¸ä¾èµ–è§¦å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:34:40.000Z" title="Tue Dec 02 2025 04:34:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 18 é¢˜ï¼šVue3 å“åº”å¼åŸç†ä¸­çš„ effectã€ä¾èµ–æ”¶é›†ä¸ä¾èµ–è§¦å‘</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ¸å¿ƒé—®é¢˜</h2>
<p><strong>é—®ï¼šVue3 å“åº”å¼ç³»ç»Ÿä¸­ effect æ˜¯ä»€ä¹ˆï¼Ÿä¾èµ–æ˜¯å¦‚ä½•æ”¶é›†å’Œè§¦å‘çš„ï¼Ÿ</strong></p>
<ul>
<li>
<p>é¢è¯•å®˜å¸Œæœ›ä½ ç†è§£ï¼š</p>
<ul>
<li>å“åº”å¼ä¾èµ–æ”¶é›†æœºåˆ¶</li>
<li>effect æ ˆçš„ä½œç”¨</li>
<li>æ•°æ®å˜åŒ–å¦‚ä½•è§¦å‘å¯¹åº”ç»„ä»¶é‡æ–°æ¸²æŸ“</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€æ ¸å¿ƒæ¦‚å¿µ</h2>
<ol>
<li>
<p><strong>effect</strong></p>
<ul>
<li>æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåŒ…è£¹ <strong>å‰¯ä½œç”¨</strong>ï¼ˆå¦‚æ¨¡æ¿æ¸²æŸ“å‡½æ•°ã€computed getterï¼‰</li>
<li>å½“ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œeffect ä¼šè¢«é‡æ–°æ‰§è¡Œ</li>
</ul>
</li>
<li>
<p><strong>ä¾èµ–æ”¶é›†ï¼ˆtrackï¼‰</strong></p>
<ul>
<li>å½“ effect æ‰§è¡Œè¿‡ç¨‹ä¸­è®¿é—®å“åº”å¼å¯¹è±¡å±æ€§æ—¶</li>
<li>Proxy çš„ <code>get</code> ä¼šè°ƒç”¨ <code>track</code></li>
<li>å°†å½“å‰æ¿€æ´»çš„ effect ä¿å­˜åˆ°è¯¥å±æ€§çš„ä¾èµ–é›†åˆä¸­</li>
</ul>
</li>
<li>
<p><strong>ä¾èµ–è§¦å‘ï¼ˆtriggerï¼‰</strong></p>
<ul>
<li>å½“å±æ€§å˜åŒ–æ—¶ï¼Œé€šè¿‡ Proxy çš„ <code>set</code> è°ƒç”¨ <code>trigger</code></li>
<li>è§¦å‘ä¾èµ–é›†åˆä¸­çš„æ‰€æœ‰ effect æ‰§è¡Œ</li>
<li>æ›´æ–°æ¨¡æ¿ / computed / watch å›è°ƒ</li>
</ul>
</li>
<li>
<p><strong>effect æ ˆ</strong></p>
<ul>
<li>ç”¨æ¥å¤„ç†åµŒå¥— effect</li>
<li>ç¡®ä¿ track æ—¶æ”¶é›†çš„å§‹ç»ˆæ˜¯ <strong>å½“å‰æ¿€æ´»çš„ effect</strong></li>
<li>é¿å…ä¸åŒ effect æ··æ·†ä¾èµ–</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-3">ğŸ¯ ä¸‰ã€æ·±åº¦å›¾è§£ï¼ˆæ–‡å­—ç‰ˆå›¾ï¼‰</h2>
<pre><code class="hljs language-scss" lang="scss">effectStack = <span class="hljs-selector-attr">[]</span>

<span class="hljs-number">1</span>. åˆ›å»º effectï¼š
<span class="hljs-built_in">effect</span>(() =&gt; { console<span class="hljs-selector-class">.log</span>(state.count) })

<span class="hljs-number">2</span>. æ‰§è¡Œ effectï¼š
   â””â”€ push effect åˆ° effectStack
       â”‚
       â–¼
   Proxy get æ‹¦æˆª state<span class="hljs-selector-class">.count</span>
       â”‚
       â–¼
   <span class="hljs-built_in">track</span>(effectStack.top) â†’ ä¿å­˜ä¾èµ–

<span class="hljs-number">3</span>. æ•°æ®å˜åŒ–ï¼š
state<span class="hljs-selector-class">.count</span>++
   â””â”€ Proxy set æ‹¦æˆª
       â”‚
       â–¼
   <span class="hljs-built_in">trigger</span>(state.count.deps) â†’ æ‰§è¡Œä¾èµ–çš„ effect
       â”‚
       â–¼
   effectStack<span class="hljs-selector-class">.top</span> è¢«é‡æ–°æ‰§è¡Œ â†’ DOM / computed æ›´æ–°
</code></pre>
<p><strong>å…³ç³»æ€»ç»“ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">å“åº”å¼å¯¹è±¡ property â†’ <span class="hljs-built_in">Set</span>(effect1, effect2)
effect1 / effect2 â†’ <span class="hljs-built_in">function</span>(callback)
ä¾èµ–å˜åŒ– â†’ trigger â†’ æ‰§è¡Œ effect
</code></pre>
<hr/>
<h2 data-id="heading-4">ğŸ¯ å››ã€ç¤ºä¾‹ä»£ç ï¼ˆæœ€ç®€å•çš„å®ç°æ•ˆæœï¼‰</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { reactive, effect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })

<span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'count ='</span>, state.<span class="hljs-property">count</span>)
})

state.<span class="hljs-property">count</span>++  <span class="hljs-comment">// è‡ªåŠ¨è§¦å‘ effect</span>
state.<span class="hljs-property">count</span>++  <span class="hljs-comment">// å†æ¬¡è§¦å‘ effect</span>
</code></pre>
<p><strong>åˆ†æï¼š</strong></p>
<ol>
<li><code>effect</code> æ‰§è¡Œ â†’ push åˆ° effectStack</li>
<li><code>state.count</code> çš„ <code>get</code> è°ƒç”¨ track â†’ æ”¶é›† effect</li>
<li><code>state.count++</code> çš„ <code>set</code> è°ƒç”¨ trigger â†’ æ‰§è¡Œ effect â†’ è¾“å‡ºæœ€æ–°å€¼</li>
</ol>
<hr/>
<h2 data-id="heading-5">ğŸ¯ äº”ã€é¢è¯•å®˜å¸¸è§è¿½é—®</h2>
<hr/>
<h3 data-id="heading-6"><strong>è¿½é—® 1ï¼šeffect æ ˆä¸ºä»€ä¹ˆå¿…è¦ï¼Ÿ</strong></h3>
<ul>
<li>æ”¯æŒåµŒå¥— effect</li>
<li>ç¡®ä¿ track æ—¶æ”¶é›†çš„æ˜¯å½“å‰æ¿€æ´» effect</li>
<li>é¿å… effect A è°ƒç”¨ effect B æ—¶æ··ä¹±æ”¶é›†ä¾èµ–</li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>è¿½é—® 2ï¼šä¾èµ–æ”¶é›†å¦‚ä½•é¿å…é‡å¤ï¼Ÿ</strong></h3>
<ul>
<li>æ¯ä¸ªå±æ€§ä¾èµ–ä½¿ç”¨ <strong>Set</strong> å­˜å‚¨ effect</li>
<li>åŒä¸€ä¸ª effect å¤šæ¬¡è®¿é—®åŒä¸€å±æ€§åªä¼šæ”¶é›†ä¸€æ¬¡</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>è¿½é—® 3ï¼šcomputed å†…éƒ¨å¦‚ä½•åˆ©ç”¨ effectï¼Ÿ</strong></h3>
<ul>
<li>computed getter åŒ…è£¹ effect</li>
<li>effect è¢«æ ‡è®° <code>lazy = true</code></li>
<li>è®¿é—® <code>.value</code> æ—¶è§¦å‘æ‰§è¡Œå¹¶æ”¶é›†ä¾èµ–</li>
<li>ä¾èµ–å˜åŒ– â†’ æ ‡è®° dirty â†’ ä¸‹æ¬¡è®¿é—®é‡æ–°è®¡ç®—</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 4ï¼šwatch æ˜¯å¦‚ä½•åˆ©ç”¨ä¾èµ–è§¦å‘çš„ï¼Ÿ</strong></h3>
<ul>
<li>watch å†…éƒ¨åˆ›å»º getter effect</li>
<li>ç›‘å¬å“åº”å¼å¯¹è±¡ / getter</li>
<li>æ•°æ®å˜åŒ– â†’ trigger â†’ æ‰§è¡Œå›è°ƒ</li>
<li>å¯è·å–æ–°æ—§å€¼ï¼Œæ‰§è¡Œå¼‚æ­¥å‰¯ä½œç”¨</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>è¿½é—® 5ï¼šä¸ºä»€ä¹ˆ Vue3 å“åº”å¼æ€§èƒ½æ¯” Vue2 é«˜ï¼Ÿ</strong></h3>
<ul>
<li>Proxy ä¸éœ€è¦é€’å½’ defineProperty â†’ èŠ‚çœåˆå§‹åŒ–æ—¶é—´</li>
<li>ä¾èµ–æ”¶é›†ç²¾å‡† â†’ æœ€å°åŒ– effect æ‰§è¡Œ</li>
<li>effect + dirty + PatchFlag â†’ ç²¾å‡†æ›´æ–°</li>
</ul>
<hr/>
<h2 data-id="heading-11">ğŸ¯ å…­ã€ä¸€å¥è¯æ€»ç»“ï¼ˆé¢è¯•å¿…èƒŒï¼‰</h2>
<blockquote>
<p>Vue3 å“åº”å¼é€šè¿‡ Proxy æ‹¦æˆªè®¿é—®ï¼Œeffect æ ˆç®¡ç†å½“å‰æ¿€æ´» effectï¼Œtrack æ”¶é›†ä¾èµ–ï¼Œtrigger è§¦å‘ä¾èµ–æ‰§è¡Œï¼Œå®ç°é«˜æ€§èƒ½ã€ç²¾å‡†å“åº”å¼æ›´æ–°ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 19 é¢˜ï¼šVue3 æ€§èƒ½ä¼˜åŒ–æŠ€å·§]]></title>    <link>https://juejin.cn/post/7578832575503515690</link>    <guid>https://juejin.cn/post/7578832575503515690</guid>    <pubDate>2025-12-02T04:34:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578832575503515690" data-draft-id="7578719771589033994" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 19 é¢˜ï¼šVue3 æ€§èƒ½ä¼˜åŒ–æŠ€å·§"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:34:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 19 é¢˜ï¼šVue3 æ€§èƒ½ä¼˜åŒ–æŠ€å·§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:34:56.000Z" title="Tue Dec 02 2025 04:34:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 19 é¢˜ï¼šVue3 æ€§èƒ½ä¼˜åŒ–æŠ€å·§</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ¸å¿ƒé—®é¢˜</h2>
<p><strong>é—®ï¼šåœ¨ Vue3 ä¸­ï¼Œå¦‚ä½•ä¼˜åŒ–æ€§èƒ½ï¼Ÿå°¤å…¶æ˜¯å“åº”å¼ç³»ç»Ÿã€è™šæ‹Ÿ DOMã€é™æ€èŠ‚ç‚¹ã€åˆ—è¡¨æ¸²æŸ“ç­‰æ–¹é¢ã€‚</strong></p>
<ul>
<li>é¢è¯•å®˜è€ƒå¯Ÿä½ å¯¹ Vue3 åŸç†å’Œå®æˆ˜æ€§èƒ½ä¼˜åŒ–çš„ç†è§£</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€ä¼˜åŒ–æ–¹æ³•</h2>
<h3 data-id="heading-3"><strong>1ï¸âƒ£ å“åº”å¼ä¼˜åŒ–</strong></h3>
<ol>
<li>
<p><strong>å‡å°‘ä¸å¿…è¦çš„å“åº”å¼å¯¹è±¡</strong></p>
<ul>
<li><code>reactive</code> ä¼šé€’å½’ä»£ç†å¯¹è±¡ï¼Œé¿å…å¯¹å¤§é‡é™æ€æ•°æ®ä½¿ç”¨ reactive</li>
<li>å¯¹äºé™æ€å¯¹è±¡ï¼Œå¯ç›´æ¥ä½¿ç”¨æ™®é€šå¯¹è±¡æˆ– <code>readonly</code></li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ <code>shallowReactive</code> / <code>shallowRef</code></strong></p>
<ul>
<li>åªå¯¹æœ€å¤–å±‚åšå“åº”å¼ï¼Œå‡å°‘æ·±å±‚ Proxy å¼€é”€</li>
</ul>
</li>
<li>
<p><strong>é¿å…è¿‡åº¦ç›‘å¬</strong></p>
<ul>
<li>watch / computed åªç›‘å¬å¿…è¦å­—æ®µ</li>
<li>watchEffect è°¨æ…ä½¿ç”¨å¤§å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>computed ç¼“å­˜</strong></p>
<ul>
<li>å¯¹è®¡ç®—é‡å¤§çš„é€»è¾‘ä½¿ç”¨ computedï¼Œé¿å…é‡å¤è®¡ç®—</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-4"><strong>2ï¸âƒ£ è™šæ‹Ÿ DOM ä¼˜åŒ–</strong></h3>
<ol>
<li>
<p><strong>PatchFlag</strong></p>
<ul>
<li>ä½¿ç”¨æ¨¡æ¿ç¼–è¯‘ä¼˜åŒ–ï¼ŒVue3 è‡ªåŠ¨ç”Ÿæˆ PatchFlag</li>
<li>å‡å°‘æ— æ•ˆ Diff</li>
</ul>
</li>
<li>
<p><strong>é™æ€èŠ‚ç‚¹æå‡</strong></p>
<ul>
<li>ä¸ä¾èµ–å“åº”å¼æ•°æ®çš„èŠ‚ç‚¹åœ¨ç¼–è¯‘é˜¶æ®µæå‡</li>
<li>é¿å…æ¯æ¬¡æ¸²æŸ“åˆ›å»º VNode</li>
</ul>
</li>
<li>
<p><strong>åˆç†ä½¿ç”¨ key</strong></p>
<ul>
<li>åˆ—è¡¨æ¸²æŸ“ç”¨ key åŒºåˆ†èŠ‚ç‚¹ï¼Œä¼˜åŒ–å¤ç”¨ï¼Œå‡å°‘ DOM ç§»åŠ¨</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-5"><strong>3ï¸âƒ£ åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–</strong></h3>
<ol>
<li>
<p><strong>v-for + key</strong></p>
<ul>
<li>å”¯ä¸€æ ‡è¯†å…ƒç´ ï¼Œæé«˜ Diff å‡†ç¡®æ€§</li>
</ul>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">li</span> v-for="item in list" :key=<span class="hljs-string">"item.id"</span>&gt;{{ item<span class="hljs-selector-class">.name</span> }}&lt;/<span class="hljs-selector-tag">li</span>&gt;
</code></pre>
</li>
<li>
<p><strong>è™šæ‹Ÿæ»šåŠ¨ / æ‡’æ¸²æŸ“</strong></p>
<ul>
<li>å¤§é‡åˆ—è¡¨åªæ¸²æŸ“å¯è§†åŒºåŸŸï¼Œæé«˜æ¸²æŸ“æ€§èƒ½</li>
<li>å¯ä½¿ç”¨ <code>vue-virtual-scroller</code> ç­‰ç»„ä»¶</li>
</ul>
</li>
<li>
<p><strong>é¿å…åµŒå¥— v-for</strong></p>
<ul>
<li>åµŒå¥—å¾ªç¯ä¼šäº§ç”ŸæŒ‡æ•°çº§æ¸²æŸ“å¼€é”€</li>
<li>å¯æ‹†åˆ†ç»„ä»¶ï¼Œå±€éƒ¨æ¸²æŸ“ä¼˜åŒ–</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-6"><strong>4ï¸âƒ£ äº‹ä»¶å’Œç»„ä»¶ä¼˜åŒ–</strong></h3>
<ol>
<li>
<p><strong>v-on / æ–¹æ³•ç»‘å®š</strong></p>
<ul>
<li>é¿å…åœ¨æ¨¡æ¿ä¸­ç›´æ¥å†™å†…è”å‡½æ•°ï¼Œå¯¼è‡´æ¯æ¬¡æ¸²æŸ“ç”Ÿæˆæ–°å‡½æ•°</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ä¸æ¨è --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"count++"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-comment">&lt;!-- æ¨è --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleClick"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>ç»„ä»¶æ‹†åˆ† / æ‡’åŠ è½½</strong></p>
<ul>
<li>ä½¿ç”¨ <code>&lt;Suspense&gt;</code> æˆ–åŠ¨æ€ import æ‡’åŠ è½½å¤§å‹ç»„ä»¶</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncComponent</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./MyComponent.vue'</span>))
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-7">ğŸ¯ ä¸‰ã€ç»¼åˆç¤ºä¾‹</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in visibleList"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> list = <span class="hljs-title function_">ref</span>([...<span class="hljs-title class_">Array</span>(<span class="hljs-number">10000</span>).<span class="hljs-title function_">keys</span>()].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> ({ <span class="hljs-attr">id</span>: i, <span class="hljs-attr">name</span>: <span class="hljs-string">`Item <span class="hljs-subst">${i}</span>`</span> })))
<span class="hljs-comment">// è™šæ‹Ÿæ»šåŠ¨æˆ–åˆ†é¡µï¼Œä»…æ˜¾ç¤ºéƒ¨åˆ†</span>
<span class="hljs-keyword">const</span> visibleList = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> list.<span class="hljs-property">value</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>))
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<ul>
<li>åªæ¸²æŸ“ 100 æ¡æ•°æ®ï¼Œè€Œä¸æ˜¯å…¨éƒ¨ 10000 æ¡</li>
<li>å‡å°‘ DOM æ•°é‡ â†’ æå‡æ€§èƒ½</li>
</ul>
<hr/>
<h2 data-id="heading-8">ğŸ¯ å››ã€é¢è¯•å®˜å¸¸è§è¿½é—®</h2>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 1ï¼šVue3 å“åº”å¼æ€§èƒ½æ¯” Vue2 å¥½åœ¨å“ªï¼Ÿ</strong></h3>
<ul>
<li>Proxy ä»£æ›¿ defineProperty</li>
<li>æ·±åº¦é€’å½’æƒ°æ€§ä»£ç†ï¼Œé¿å…åˆå§‹åŒ–æˆæœ¬é«˜</li>
<li>ç²¾å‡†ä¾èµ–æ”¶é›†ï¼Œå‡å°‘æ— æ•ˆ effect è§¦å‘</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>è¿½é—® 2ï¼šé™æ€èŠ‚ç‚¹æå‡ä¸ PatchFlag æ€ä¹ˆååŒä¼˜åŒ–ï¼Ÿ</strong></h3>
<ul>
<li>é™æ€èŠ‚ç‚¹ â†’ å‡å°‘ VNode åˆ›å»ºå’Œ Diff</li>
<li>PatchFlag â†’ å‡å°‘åŠ¨æ€èŠ‚ç‚¹ Diff èŒƒå›´</li>
<li>ä¸¤è€…ç»“åˆ â†’ æœ€å¤§åŒ–æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<hr/>
<h3 data-id="heading-11"><strong>è¿½é—® 3ï¼šå¤§é‡åˆ—è¡¨æ¸²æŸ“æ—¶ï¼ŒDiff æ€§èƒ½ç“¶é¢ˆå¦‚ä½•è§£å†³ï¼Ÿ</strong></h3>
<ul>
<li>ä½¿ç”¨ key ä¼˜åŒ–å¤ç”¨</li>
<li>åˆ†é¡µ / è™šæ‹Ÿæ»šåŠ¨å‡å°‘æ¸²æŸ“èŠ‚ç‚¹æ•°é‡</li>
<li>å°½é‡é¿å…åµŒå¥—å¾ªç¯</li>
</ul>
<hr/>
<h3 data-id="heading-12"><strong>è¿½é—® 4ï¼šcomputed å’Œ watch åœ¨æ€§èƒ½ä¼˜åŒ–ä¸Šæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</strong></h3>
<ul>
<li>computed â†’ ç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—</li>
<li>watch â†’ ç²¾å‡†ç›‘å¬å˜åŒ–ï¼Œæ‰§è¡Œå‰¯ä½œç”¨ï¼Œä¸è§¦å‘ä¸å¿…è¦æ¸²æŸ“</li>
</ul>
<hr/>
<h3 data-id="heading-13"><strong>è¿½é—® 5ï¼šå“åº”å¼å¯¹è±¡æ·±å±‚æ¬¡ä¿®æ”¹ä¼šå½±å“æ€§èƒ½å—ï¼Ÿ</strong></h3>
<ul>
<li>æ·±å±‚ reactive ä¼šå¯¹æ¯å±‚å¯¹è±¡é€’å½’ä»£ç†</li>
<li>å¯¹å¤§å¯¹è±¡æˆ–æ•°ç»„ï¼Œå»ºè®®ä½¿ç”¨ shallowReactive / shallowRef æˆ–åªä»£ç†å¿…è¦å±‚çº§</li>
</ul>
<hr/>
<h2 data-id="heading-14">ğŸ¯ äº”ã€ä¸€å¥è¯æ€»ç»“ï¼ˆé¢è¯•å¿…èƒŒï¼‰</h2>
<blockquote>
<p>Vue3 æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒï¼šç²¾å‡†å“åº”å¼ï¼ˆProxy + computed ç¼“å­˜ï¼‰ã€è™šæ‹Ÿ DOM PatchFlag + é™æ€èŠ‚ç‚¹æå‡ã€åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–ï¼ˆv-for + key + è™šæ‹Ÿæ»šåŠ¨ï¼‰ï¼Œç»“åˆç»„ä»¶æ‹†åˆ†ä¸æ‡’åŠ è½½ï¼Œå®ç°é«˜æ•ˆæ¸²æŸ“ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 17 é¢˜ï¼šVue3 è™šæ‹Ÿ DOM ä¸ PatchFlag åŸç† + é™æ€èŠ‚ç‚¹æå‡]]></title>    <link>https://juejin.cn/post/7578830345870098473</link>    <guid>https://juejin.cn/post/7578830345870098473</guid>    <pubDate>2025-12-02T04:34:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578830345870098473" data-draft-id="7578732288515751987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 17 é¢˜ï¼šVue3 è™šæ‹Ÿ DOM ä¸ PatchFlag åŸç† + é™æ€èŠ‚ç‚¹æå‡"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:34:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 17 é¢˜ï¼šVue3 è™šæ‹Ÿ DOM ä¸ PatchFlag åŸç† + é™æ€èŠ‚ç‚¹æå‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:34:24.000Z" title="Tue Dec 02 2025 04:34:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 17 é¢˜ï¼šVue3 è™šæ‹Ÿ DOM ä¸ PatchFlag åŸç† + é™æ€èŠ‚ç‚¹æå‡</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ¸å¿ƒé—®é¢˜</h2>
<p><strong>é—®ï¼šVue3 ä¸­è™šæ‹Ÿ DOM æ˜¯å¦‚ä½•ä¼˜åŒ–æ€§èƒ½çš„ï¼ŸPatchFlag å’Œé™æ€èŠ‚ç‚¹æå‡çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>è¿™æ˜¯é¢è¯•å®˜éå¸¸å–œæ¬¢é—®çš„é«˜çº§é¢˜ï¼Œå°¤å…¶è€ƒå¯Ÿå¯¹ Vue3 ç¼–è¯‘å™¨ä¼˜åŒ–çš„ç†è§£ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€æ ‡å‡†å›ç­”ï¼ˆé¢è¯•å®˜æ»¡æ„ç‰ˆï¼‰</h2>
<ol>
<li>
<p><strong>è™šæ‹Ÿ DOM æœ¬è´¨</strong></p>
<ul>
<li>Vue3 å°†æ¨¡æ¿ç¼–è¯‘æˆ <strong>VNodeï¼ˆè™šæ‹ŸèŠ‚ç‚¹ï¼‰</strong></li>
<li>æ¯æ¬¡å“åº”å¼æ•°æ®å˜åŒ–æ—¶ï¼Œç”Ÿæˆæ–°çš„ VNode</li>
<li>å¯¹æ¯”æ—§ VNode â†’ é€šè¿‡ Diff ç®—æ³•æœ€å°åŒ–çœŸå® DOM æ›´æ–°</li>
</ul>
</li>
<li>
<p><strong>PatchFlagï¼ˆç¼–è¯‘æ ‡è®°ï¼‰</strong></p>
<ul>
<li>
<p>åœ¨ç¼–è¯‘é˜¶æ®µï¼Œä¸º VNode æ·»åŠ  <strong>æ ‡è®°å­—æ®µ</strong>ï¼Œæ ‡è¯†èŠ‚ç‚¹å˜åŒ–ç±»å‹</p>
</li>
<li>
<p>ä½œç”¨ï¼š</p>
<ul>
<li>å‘Šè¯‰æ¸²æŸ“å™¨å“ªäº›å±æ€§å¯èƒ½å˜åŒ–</li>
<li>é¿å…å¯¹ä¸å˜çš„èŠ‚ç‚¹é‡å¤ diff</li>
</ul>
</li>
<li>
<p>å…¸å‹æ ‡è®°ï¼š</p>
<ul>
<li><code>TEXT</code> â†’ æ–‡æœ¬å˜åŒ–</li>
<li><code>CLASS</code> â†’ class å˜åŒ–</li>
<li><code>STYLE</code> â†’ style å˜åŒ–</li>
<li><code>PROPS</code> â†’ æ™®é€š props å˜åŒ–</li>
<li><code>FULL_PROPS</code> â†’ æ‰€æœ‰ props éƒ½å¯èƒ½å˜åŒ–</li>
<li><code>HYDRATE_EVENTS</code> â†’ äº‹ä»¶å˜åŒ–</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>é™æ€èŠ‚ç‚¹æå‡ï¼ˆHoist Staticï¼‰</strong></p>
<ul>
<li>ç¼–è¯‘å™¨æŠŠæ¨¡æ¿ä¸­ <strong>ä¸ä¾èµ–å“åº”å¼æ•°æ®çš„èŠ‚ç‚¹</strong> æå‰ç”Ÿæˆ VNode</li>
<li>æ¸²æŸ“æ—¶ç›´æ¥å¤ç”¨ï¼Œä¸éœ€è¦æ¯æ¬¡é‡æ–°åˆ›å»º</li>
<li>èŠ‚çº¦å†…å­˜å’Œè®¡ç®—ï¼Œå‡å°‘ Diff</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-3">ğŸ¯ ä¸‰ã€å·¥ä½œæµç¨‹ç¤ºæ„</h2>
<pre><code class="hljs language-markdown" lang="markdown">æ¨¡æ¿ â†’ ç¼–è¯‘å™¨ â†’ VNode + PatchFlag + é™æ€æå‡
å“åº”å¼æ•°æ®å˜åŒ– â†’ ç”Ÿæˆæ–° VNode
<span class="hljs-code">     â”‚
     â–¼
Diff + Patch
     â”‚
     â–¼
ä»…æ›´æ–°å˜åŒ–çš„èŠ‚ç‚¹/å±æ€§
</span></code></pre>
<hr/>
<h2 data-id="heading-4">ğŸ¯ å››ã€ä»£ç ç¤ºä¾‹ï¼ˆç¼–è¯‘å™¨ä¼˜åŒ–æ•ˆæœï¼‰</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>       <span class="hljs-comment">&lt;!-- åŠ¨æ€å†…å®¹ â†’ TEXT PatchFlag --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"desc"</span>&gt;</span>é™æ€æè¿°<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>  <span class="hljs-comment">&lt;!-- é™æ€èŠ‚ç‚¹ â†’ Hoist Static --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<ul>
<li><code>&lt;h1&gt;</code> ä¼šæ¯æ¬¡å“åº”å¼æ•°æ®å˜åŒ–æ—¶ diff</li>
<li><code>&lt;p&gt;</code> è¢«æå‡ä¸º <strong>é™æ€èŠ‚ç‚¹</strong>ï¼Œä¸ä¼šé‡å¤åˆ›å»ºæˆ–æ¯”è¾ƒ</li>
</ul>
<p>å¦‚æœç”¨ Vue3 ç¼–è¯‘è¾“å‡º VNodeï¼Œä¼šç”Ÿæˆç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span> _hoisted_1 = <span class="hljs-comment">/*#__PURE__*/</span>createVNode(<span class="hljs-string">"p"</span>, { <span class="hljs-keyword">class</span>: <span class="hljs-string">"desc"</span> }, <span class="hljs-string">"é™æ€æè¿°"</span>)
...
createVNode(<span class="hljs-string">"div"</span>, <span class="hljs-literal">null</span>, [
  createVNode(<span class="hljs-string">"h1"</span>, <span class="hljs-literal">null</span>, toDisplayString(title), <span class="hljs-number">1</span> <span class="hljs-comment">/* TEXT */</span>),
  _hoisted_1
])
</code></pre>
<hr/>
<h2 data-id="heading-5">ğŸ¯ äº”ã€é¢è¯•å®˜å¸¸è§è¿½é—®ï¼ˆé«˜é¢‘ï¼‰</h2>
<hr/>
<h3 data-id="heading-6"><strong>è¿½é—® 1ï¼šPatchFlag ä¸ºä»€ä¹ˆæ¯” Vue2 æ€§èƒ½é«˜ï¼Ÿ</strong></h3>
<ul>
<li>Vue2 diff æ¯æ¬¡éƒ½ä¼šæ¯”è¾ƒæ•´ä¸ª VNode æ ‘</li>
<li>Vue3 PatchFlag æå‰å‘Šè¯‰æ¸²æŸ“å™¨å“ªäº›å±æ€§å¯èƒ½å˜åŒ–</li>
<li>é¿å…äº†å¤§é‡æ— ç”¨æ¯”è¾ƒ â†’ å¤§å¹…å‡å°‘ diff è®¡ç®—</li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>è¿½é—® 2ï¼šé™æ€èŠ‚ç‚¹æå‡æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</strong></h3>
<ul>
<li>é™æ€èŠ‚ç‚¹åªåˆ›å»ºä¸€æ¬¡</li>
<li>ä¸å‚ä¸æ¯æ¬¡æ¸²æŸ“çš„ Diff</li>
<li>èŠ‚çœå†…å­˜åˆ†é… + CPU æ—¶é—´</li>
<li>ç‰¹åˆ«é€‚åˆå¤§æ¨¡æ¿æˆ–åˆ—è¡¨çš„é™æ€å†…å®¹</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>è¿½é—® 3ï¼šPatchFlag å’Œ key çš„å…³ç³»ï¼Ÿ</strong></h3>
<ul>
<li>
<p>PatchFlag ç”¨äºæ ‡è®°èŠ‚ç‚¹å†…éƒ¨å˜åŒ–ç±»å‹</p>
</li>
<li>
<p>key ç”¨äº <strong>åˆ—è¡¨èŠ‚ç‚¹å¿«é€Ÿå®šä½å˜åŒ–</strong></p>
</li>
<li>
<p>ç»“åˆä½¿ç”¨ï¼š</p>
<ul>
<li>PatchFlag ä¼˜åŒ–å•èŠ‚ç‚¹å±æ€§æ›´æ–°</li>
<li>key ä¼˜åŒ–åˆ—è¡¨çš„é‡æ–°æ’åºå’Œå¤ç”¨</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 4ï¼šå¦‚ä½•åœ¨å¼€å‘ä¸­æŸ¥çœ‹ PatchFlagï¼Ÿ</strong></h3>
<ul>
<li>ç¼–è¯‘æ—¶è¾“å‡º <code>__DEV__</code> æ¨¡å¼ä¸‹ VNode</li>
<li>Vue3 ç¼–è¯‘å™¨ä¼šåœ¨ VNode å¯¹è±¡ä¸­æ˜¾ç¤º PatchFlag</li>
<li>ä¹Ÿå¯ä»¥ç”¨ <code>vue-next</code> çš„æºç åˆ†æ</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>è¿½é—® 5ï¼šPatchFlag æœ‰å“ªäº›é™åˆ¶ï¼Ÿ</strong></h3>
<ul>
<li>ä»…å¯¹æ¨¡æ¿ç¼–è¯‘ç”Ÿæˆ VNode ç”Ÿæ•ˆ</li>
<li>æ‰‹å†™ render å‡½æ•°éœ€è¦æ‰‹åŠ¨ä¼˜åŒ–</li>
<li>å¯¹å¤æ‚åŠ¨æ€ç»“æ„ï¼ŒPatchFlag æ— æ³•è¦†ç›–å…¨éƒ¨å˜åŒ–ï¼Œéœ€è¦é…åˆ key å’Œåˆ—è¡¨ diff</li>
</ul>
<hr/>
<h2 data-id="heading-11">ğŸ¯ å…­ã€ä¸€å¥è¯æ€»ç»“ï¼ˆèƒŒé¢è¯•å®˜å³å¯ï¼‰</h2>
<blockquote>
<p>Vue3 é€šè¿‡ PatchFlag æ ‡è®°èŠ‚ç‚¹å˜åŒ–ç±»å‹å’Œé™æ€èŠ‚ç‚¹æå‡ï¼Œå‡å°‘ä¸å¿…è¦çš„ Diff å’Œ VNode åˆ›å»ºï¼Œä»è€Œæ˜¾è‘—æå‡æ¸²æŸ“æ€§èƒ½ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 20 é¢˜ï¼šVue3 ç”Ÿå‘½å‘¨æœŸ + watch æ‰§è¡Œé¡ºåº]]></title>    <link>https://juejin.cn/post/7578830345870114857</link>    <guid>https://juejin.cn/post/7578830345870114857</guid>    <pubDate>2025-12-02T04:35:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578830345870114857" data-draft-id="7578719771589050378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 20 é¢˜ï¼šVue3 ç”Ÿå‘½å‘¨æœŸ + watch æ‰§è¡Œé¡ºåº"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:35:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 20 é¢˜ï¼šVue3 ç”Ÿå‘½å‘¨æœŸ + watch æ‰§è¡Œé¡ºåº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:35:14.000Z" title="Tue Dec 02 2025 04:35:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 20 é¢˜ï¼šVue3 ç”Ÿå‘½å‘¨æœŸ + watch æ‰§è¡Œé¡ºåº</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ¸å¿ƒé—®é¢˜</h2>
<p><strong>é—®ï¼šVue3 ä¸­ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„æ‰§è¡Œé¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿwatch / onMounted / onBeforeUnmount å¦‚ä½•é…åˆä½¿ç”¨ï¼Ÿ</strong></p>
<ul>
<li>
<p>é¢è¯•å®˜é‡ç‚¹è€ƒå¯Ÿï¼š</p>
<ul>
<li>ç”Ÿå‘½å‘¨æœŸé¡ºåº</li>
<li>watch æ‰§è¡Œæ—¶æœº</li>
<li>å“åº”å¼æ›´æ–°ä¸ç”Ÿå‘½å‘¨æœŸçš„å…³ç³»</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€Vue3 ç”Ÿå‘½å‘¨æœŸé¡ºåºï¼ˆç»„åˆå¼ APIï¼‰</h2>
<ol>
<li>
<p><strong>setup() æ‰§è¡Œ</strong></p>
<ul>
<li>åˆå§‹åŒ– propsã€stateã€refã€computedã€watch</li>
<li>å¯ä»¥åœ¨ setup ä¸­æ³¨å†Œç”Ÿå‘½å‘¨æœŸå‡½æ•°</li>
</ul>
</li>
<li>
<p><strong>onBeforeMount</strong></p>
<ul>
<li>ç»„ä»¶æŒ‚è½½å‰è§¦å‘</li>
<li>è¿˜æœªæ¸²æŸ“åˆ° DOM</li>
</ul>
</li>
<li>
<p><strong>onMounted</strong></p>
<ul>
<li>ç»„ä»¶æŒ‚è½½å®Œæˆï¼ŒDOM å·²æ¸²æŸ“</li>
<li>å¯ä»¥æ“ä½œçœŸå® DOM</li>
</ul>
</li>
<li>
<p><strong>å“åº”å¼æ•°æ®å˜åŒ–è§¦å‘ watch</strong></p>
<ul>
<li>å¦‚æœ watch åœ¨ setup ä¸­æ³¨å†Œ</li>
<li>flush é»˜è®¤æ˜¯ <code>'pre'</code>ï¼Œåœ¨ DOM æ›´æ–°å‰æ‰§è¡Œ</li>
<li>flush: <code>'post'</code> â†’ åœ¨ DOM æ›´æ–°åæ‰§è¡Œ</li>
</ul>
</li>
<li>
<p><strong>onBeforeUnmount</strong></p>
<ul>
<li>ç»„ä»¶å¸è½½å‰è§¦å‘</li>
<li>å¯æ¸…ç†å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ç­‰</li>
</ul>
</li>
<li>
<p><strong>onUnmounted</strong></p>
<ul>
<li>ç»„ä»¶å·²å¸è½½</li>
<li>DOM å·²é”€æ¯</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-3">ğŸ¯ ä¸‰ã€æ‰§è¡Œé¡ºåºå›¾ç¤º</h2>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">setup</span>()         â† åˆå§‹åŒ– state / computed / watch
  â”‚
<span class="hljs-built_in">onBeforeMount</span>() â† æŒ‚è½½å‰
  â”‚
DOM æ¸²æŸ“
  â”‚
<span class="hljs-built_in">onMounted</span>()     â† æŒ‚è½½å®Œæˆï¼Œå¯æ“ä½œçœŸå® DOM
  â”‚
å“åº”å¼æ•°æ®å˜åŒ–
  â”‚
<span class="hljs-built_in">watch</span>()         â† flush: pre/post/sync æ‰§è¡Œ
  â”‚
ç”¨æˆ·æ“ä½œ / å¸è½½ç»„ä»¶
  â”‚
<span class="hljs-built_in">onBeforeUnmount</span>()
  â”‚
<span class="hljs-built_in">onUnmounted</span>()
</code></pre>
<hr/>
<h2 data-id="heading-4">ğŸ¯ å››ã€ä»£ç ç¤ºä¾‹</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, watch, onMounted, onBeforeUnmount } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)

<span class="hljs-title function_">watch</span>(count, <span class="hljs-function">(<span class="hljs-params">newVal</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'watch count:'</span>, newVal)
}, { <span class="hljs-attr">flush</span>: <span class="hljs-string">'post'</span> })

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'mounted'</span>)
})

<span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'beforeUnmount'</span>)
})

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span>++, <span class="hljs-number">1000</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>è¾“å‡ºé¡ºåº</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">mounted</span>
<span class="hljs-attr">watch count:</span> <span class="hljs-number">1</span>   <span class="hljs-string">â†</span> <span class="hljs-attr">flush:</span> <span class="hljs-string">postï¼ŒDOM</span> <span class="hljs-string">å·²æ›´æ–°</span>
<span class="hljs-string">beforeUnmount</span>     <span class="hljs-string">â†</span> <span class="hljs-string">å¸è½½ç»„ä»¶æ—¶</span>
</code></pre>
<hr/>
<h2 data-id="heading-5">ğŸ¯ äº”ã€é¢è¯•å®˜å¸¸è§è¿½é—®</h2>
<hr/>
<h3 data-id="heading-6"><strong>è¿½é—® 1ï¼šwatch flush å‚æ•°å«ä¹‰ï¼Ÿ</strong></h3>
<ul>
<li><code>'pre'</code>ï¼ˆé»˜è®¤ï¼‰ â†’ åœ¨ DOM æ›´æ–°å‰æ‰§è¡Œ</li>
<li><code>'post'</code> â†’ åœ¨ DOM æ›´æ–°åæ‰§è¡Œ</li>
<li><code>'sync'</code> â†’ åŒæ­¥æ‰§è¡Œï¼Œç«‹å³è§¦å‘</li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>è¿½é—® 2ï¼šsetup å†… watch å’Œç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåºï¼Ÿ</strong></h3>
<ul>
<li>setup å…ˆæ‰§è¡Œ</li>
<li>ç”Ÿå‘½å‘¨æœŸæ³¨å†Œåœ¨ setup åï¼Œä½†ä¼šåœ¨æŒ‚è½½é˜¶æ®µä¾æ¬¡è§¦å‘</li>
<li>watch flush <code>'pre'</code> åœ¨ onMounted å‰å¯èƒ½æ‰§è¡Œä¸€æ¬¡ï¼ˆç¬¬ä¸€æ¬¡è®¿é—®ä¾èµ–ä¼šç«‹å³è§¦å‘ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>è¿½é—® 3ï¼šonMounted ä¸­å¯ä»¥è®¿é—® DOM å—ï¼Ÿ</strong></h3>
<ul>
<li>âœ… å¯ä»¥</li>
<li>å› ä¸ºç»„ä»¶å·²ç»æŒ‚è½½å®Œæˆ</li>
<li>åœ¨ setup æˆ– onBeforeMount ä¸­è®¿é—® DOM æ˜¯ null</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 4ï¼šonBeforeUnmount ä¸ watch æ¸…ç†æœ‰å…³ç³»å—ï¼Ÿ</strong></h3>
<ul>
<li>watch å¯è¿”å› <strong>stop å‡½æ•°</strong></li>
<li>åœ¨ onBeforeUnmount ä¸­è°ƒç”¨ stop() å¯æ‰‹åŠ¨åœæ­¢ watch</li>
<li>é¿å…ç»„ä»¶å¸è½½åå‰¯ä½œç”¨ä»ç„¶è§¦å‘</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ¯ å…­ã€ä¸€å¥è¯æ€»ç»“</h2>
<blockquote>
<p>Vue3 ç”Ÿå‘½å‘¨æœŸé¡ºåºï¼š<code>setup â†’ onBeforeMount â†’ onMounted â†’ å“åº”å¼ watch â†’ onBeforeUnmount â†’ onUnmounted</code>ï¼›watch flush å†³å®šå“åº”å¼å›è°ƒæ‰§è¡Œæ—¶æœºï¼Œå¯ç²¾ç¡®æ§åˆ¶ DOM æ›´æ–°å‰åã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[web3é’±åŒ…Demo]]></title>    <link>https://juejin.cn/post/7578793960626634778</link>    <guid>https://juejin.cn/post/7578793960626634778</guid>    <pubDate>2025-12-02T03:01:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578793960626634778" data-draft-id="7578392771921788934" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="web3é’±åŒ…Demo"/> <meta itemprop="keywords" content="web3"/> <meta itemprop="datePublished" content="2025-12-02T03:01:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆé•¿i"/> <meta itemprop="url" content="https://juejin.cn/user/465848663030424"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            web3é’±åŒ…Demo
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848663030424/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆé•¿i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:01:58.000Z" title="Tue Dec 02 2025 03:01:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸ºäº†åŠ æ·±è‡ªå·±ç†è§£ç‰¹å†™ä¸€ç¯‡åŸºäºä¸ªäººç°æœ‰ç†è§£ç¼–å†™çš„3.0é’±åŒ…å°Demoï¼Œå¹¶ä¸”æ¯ä¸€è¡Œå…³é”®ä»£ç éƒ½åŠ æ³¨é‡Šï¼Œè®°å½•ä¸€ä¸‹ã€‚
giuhubåœ°å€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjingkais%2Fweb3walletdemo" target="_blank" title="https://github.com/jingkais/web3walletdemo" ref="nofollow noopener noreferrer">github.com/jingkais/weâ€¦</a></p>
<h2 data-id="heading-0">é¡¹ç›®ç›®å½•</h2>
<pre><code class="hljs language-scss" lang="scss">com<span class="hljs-selector-class">.learn</span><span class="hljs-selector-class">.web3walletdemo</span>/
â”œâ”€â”€ fragment/
â”‚   â”œâ”€â”€ BackupPrivateKeyFragment          (å¤‡ä»½ç§é’¥)
â”‚   â”œâ”€â”€ CreateWalletFragment              (åˆ›å»ºé’±åŒ…é¡µé¢)
â”‚   â”œâ”€â”€ DAppFragment                      (Dappæµè§ˆå™¨ç•Œé¢) å¾…å¼€å‘
â”‚   â”œâ”€â”€ ImportMnemonicFragment            (å¯¼å…¥åŠ©è®°è¯)
â”‚   â”œâ”€â”€ ImportPrivateKeyFragment          (å¯¼å…¥ç§é’¥)
â”‚   â”œâ”€â”€ SettingsFragment                 ï¼ˆè®¾ç½®ï¼‰å¾…å¼€å‘
â”‚   â”œâ”€â”€ TransactionFragment              ï¼ˆäº¤æ˜“ç•Œé¢ï¼‰ å¾…å¼€å‘
â”‚   â””â”€â”€ WalletFragment                   ï¼ˆé’±åŒ…ä¸»ç•Œé¢ï¼‰
â”œâ”€â”€ model/
â”‚   â”œâ”€â”€ GasInfo
â”‚   â”œâ”€â”€ NetworkInfo
â”‚   â”œâ”€â”€ Transaction<span class="hljs-selector-class">.kt</span>
â”‚   â””â”€â”€ Wallet
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ AndroidCryptoHelper   ï¼ˆAndroidåŠ å¯†è¾…åŠ©å·¥å…· - æä¾›åœ¨ä¸åŒAndroidç‰ˆæœ¬ä¸Šå®‰å…¨ç”Ÿæˆå¯†é’¥å¯¹çš„æ–¹æ³•ï¼‰
â”‚   â”œâ”€â”€ SecurityManager  ï¼ˆå®‰å…¨ç®¡ç†å™¨ - å¤„ç†æ•æ„Ÿæ•°æ®çš„åŠ å¯†å­˜å‚¨å’Œæ£€ç´¢ã€ä½¿ç”¨Android Keystoreç³»ç»Ÿä¿æŠ¤åŠ å¯†å¯†é’¥ï¼‰
â”‚   â””â”€â”€ Web3Service<span class="hljs-selector-class">.kt</span>
â””â”€â”€ MainActivity ä¸»ç•Œé¢   ï¼ˆåˆ›å»ºé’±åŒ…ï¼‰
</code></pre>
<h4 data-id="heading-1">æ€»ä½“ä»‹ç»</h4>
<p>ä»¥ä¸‹æ˜¯è¯¥Demoç›®å‰å®ç°çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>é’±åŒ…ä¸»ç•Œé¢</li>
<li>å¯¼å…¥ç§é’¥ç•Œé¢</li>
<li>å¯¼å…¥åŠ©è®°è¯ç•Œé¢</li>
<li>åˆ›å»ºé’±åŒ…ç•Œé¢</li>
<li>å¤‡ä»½ç§é’¥ç•Œé¢</li>
</ul>
<p>å¾…å¼€å‘åŠŸèƒ½ï¼š</p>
<ul>
<li>äº¤æ˜“ç•Œé¢</li>
<li>è®¾ç½®</li>
<li>DAppæµè§ˆå™¨ç•Œé¢</li>
<li>...</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> binding: ActivityMainBinding
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> securityManager: SecurityManager

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)

        binding = ActivityMainBinding.inflate(layoutInflater)
        setContentView(binding.root)

        securityManager = SecurityManager(<span class="hljs-keyword">this</span>)

        setupBottomNavigation()
        checkWalletExists()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupBottomNavigation</span><span class="hljs-params">()</span></span> {
        binding.bottomNavigation.setOnNavigationItemSelectedListener { item -&gt;
            <span class="hljs-keyword">when</span> (item.itemId) {
                R.id.nav_wallet -&gt; {
                    replaceFragment(WalletFragment())
                    <span class="hljs-literal">true</span>
                }
                R.id.nav_transaction -&gt; {
                    replaceFragment(TransactionFragment())
                    <span class="hljs-literal">true</span>
                }
                R.id.nav_dapp -&gt; {
                    replaceFragment(DAppFragment())
                    <span class="hljs-literal">true</span>
                }
                R.id.nav_settings -&gt; {
                    replaceFragment(SettingsFragment())
                    <span class="hljs-literal">true</span>
                }
                <span class="hljs-keyword">else</span> -&gt; <span class="hljs-literal">false</span>
            }
        }

        <span class="hljs-keyword">if</span> (securityManager.hasWallets()) {
            replaceFragment(WalletFragment())
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkWalletExists</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> (!securityManager.hasWallets()) {
            replaceFragment(CreateWalletFragment())
            binding.bottomNavigation.visibility = View.GONE
        } <span class="hljs-keyword">else</span> {
            binding.bottomNavigation.visibility = View.VISIBLE
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">replaceFragment</span><span class="hljs-params">(fragment: <span class="hljs-type">androidx</span>.<span class="hljs-type">fragment</span>.<span class="hljs-type">app</span>.<span class="hljs-type">Fragment</span>)</span></span> {
        supportFragmentManager.beginTransaction()
            .replace(R.id.fragment_container, fragment)
            .commit()
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showBottomNavigation</span><span class="hljs-params">()</span></span> {
        binding.bottomNavigation.visibility = View.VISIBLE
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">hideBottomNavigation</span><span class="hljs-params">()</span></span> {
        binding.bottomNavigation.visibility = View.GONE
    }
}
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Web3Service</span> {

    companion object {
        <span class="hljs-comment">// å¤šä¸ªå¯é çš„å…¬å…± RPC èŠ‚ç‚¹ï¼ˆè‡ªåŠ¨æ•…éšœè½¬ç§»ï¼‰</span>
        private val <span class="hljs-variable constant_">SEPOLIA_NODES</span> = <span class="hljs-title function_">listOf</span>(
            <span class="hljs-string">"https://ethereum-sepolia-rpc.publicnode.com"</span>,  <span class="hljs-comment">// å…¬å…±èŠ‚ç‚¹ï¼Œæ— éœ€APIå¯†é’¥</span>
            <span class="hljs-string">"https://rpc.sepolia.org"</span>,                      <span class="hljs-comment">// Sepoliaå®˜æ–¹RPC</span>
            <span class="hljs-string">"https://sepolia.drpc.org"</span>,                     <span class="hljs-comment">// å¤‡ç”¨RPCèŠ‚ç‚¹</span>
            <span class="hljs-string">"https://rpc2.sepolia.org"</span>                      <span class="hljs-comment">// å¦ä¸€ä¸ªå¤‡ç”¨èŠ‚ç‚¹</span>
        )

        private val <span class="hljs-variable constant_">MAINNET_NODES</span> = <span class="hljs-title function_">listOf</span>(
            <span class="hljs-string">"https://eth.llamarpc.com"</span>,                     <span class="hljs-comment">// ä¸»ç½‘å…¬å…±èŠ‚ç‚¹</span>
            <span class="hljs-string">"https://rpc.ankr.com/eth"</span>,                     <span class="hljs-comment">// Ankræä¾›çš„èŠ‚ç‚¹</span>
            <span class="hljs-string">"https://ethereum.publicnode.com"</span>               <span class="hljs-comment">// ä»¥å¤ªåŠå…¬å…±èŠ‚ç‚¹</span>
        )

        <span class="hljs-comment">// åŒºå—é“¾ç½‘ç»œIDå®šä¹‰</span>
        <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">SEPOLIA_CHAIN_ID</span> = 11155111L              <span class="hljs-comment">// Sepoliaæµ‹è¯•ç½‘é“¾ID</span>
        <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">MAINNET_CHAIN_ID</span> = 1L                     <span class="hljs-comment">// ä»¥å¤ªåŠä¸»ç½‘é“¾ID</span>
    }

    <span class="hljs-comment">// å½“å‰ä½¿ç”¨çš„RPCèŠ‚ç‚¹URL</span>
    private <span class="hljs-keyword">var</span> currentRpcUrl = <span class="hljs-variable constant_">SEPOLIA_NODES</span>[<span class="hljs-number">0</span>]
    <span class="hljs-comment">// Web3jå®ä¾‹ï¼Œç”¨äºä¸ä»¥å¤ªåŠèŠ‚ç‚¹é€šä¿¡</span>
    private <span class="hljs-keyword">var</span> <span class="hljs-attr">web3j</span>: <span class="hljs-title class_">Web3</span>j = <span class="hljs-title class_">Web3</span>j.<span class="hljs-title function_">build</span>(<span class="hljs-title class_">HttpService</span>(currentRpcUrl))
    <span class="hljs-comment">// å½“å‰è¿æ¥çš„åŒºå—é“¾ç½‘ç»œID</span>
    private <span class="hljs-keyword">var</span> <span class="hljs-attr">currentChainId</span>: <span class="hljs-title class_">Long</span> = <span class="hljs-variable constant_">SEPOLIA_CHAIN_ID</span>
    <span class="hljs-comment">// æ ‡è¯†å½“å‰æ˜¯å¦è¿æ¥ä¸»ç½‘</span>
    private <span class="hljs-keyword">var</span> <span class="hljs-attr">isMainnet</span>: <span class="hljs-title class_">Boolean</span> = <span class="hljs-literal">false</span>

    <span class="hljs-comment">/**
     * åˆ›å»ºæ–°é’±åŒ… - ç”Ÿæˆæ–°çš„ä»¥å¤ªåŠé’±åŒ…åœ°å€å’Œç§é’¥
     * <span class="hljs-doctag">@return</span> WalletInfo åŒ…å«åœ°å€ã€ç§é’¥ç­‰é’±åŒ…ä¿¡æ¯
     */</span>
    fun <span class="hljs-title function_">createNewWallet</span>(): <span class="hljs-title class_">WalletInfo</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨å®‰å…¨éšæœºæ•°ç”Ÿæˆå™¨ç”Ÿæˆç§é’¥</span>
            val secureRandom = <span class="hljs-title class_">SecureRandom</span>()
            val privateKeyBytes = <span class="hljs-title class_">ByteArray</span>(<span class="hljs-number">32</span>) <span class="hljs-comment">// 256ä½ç§é’¥</span>
            secureRandom.<span class="hljs-title function_">nextBytes</span>(privateKeyBytes)

            <span class="hljs-comment">// å°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆå»æ‰0xå‰ç¼€ï¼‰</span>
            val privateKey = <span class="hljs-title class_">Numeric</span>.<span class="hljs-title function_">toHexStringNoPrefix</span>(privateKeyBytes)
            <span class="hljs-comment">// ä»ç§é’¥åˆ›å»ºå‡­è¯å¯¹è±¡ï¼Œå¯ä»¥è·å–åœ°å€ç­‰ä¿¡æ¯</span>
            val credentials = <span class="hljs-title class_">Credentials</span>.<span class="hljs-title function_">create</span>(privateKey)

            <span class="hljs-comment">// è¿”å›é’±åŒ…ä¿¡æ¯å¯¹è±¡</span>
            <span class="hljs-title class_">WalletInfo</span>(
                address = credentials.<span class="hljs-property">address</span>,      <span class="hljs-comment">// ä»¥å¤ªåŠåœ°å€</span>
                mnemonic = <span class="hljs-literal">null</span>,                    <span class="hljs-comment">// æ–°åˆ›å»ºçš„é’±åŒ…æ²¡æœ‰åŠ©è®°è¯</span>
                privateKey = privateKey,            <span class="hljs-comment">// åŸå§‹ç§é’¥</span>
                walletFile = <span class="hljs-literal">null</span>                   <span class="hljs-comment">// ä¸ç”Ÿæˆé’±åŒ…æ–‡ä»¶</span>
            )
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
            <span class="hljs-comment">// å¦‚æœæ ‡å‡†æ–¹æ³•å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ³•ç”Ÿæˆç§é’¥</span>
            val fallbackPrivateKey = <span class="hljs-title function_">generateFallbackPrivateKey</span>()
            val credentials = <span class="hljs-title class_">Credentials</span>.<span class="hljs-title function_">create</span>(fallbackPrivateKey)

            <span class="hljs-title class_">WalletInfo</span>(
                address = credentials.<span class="hljs-property">address</span>,
                mnemonic = <span class="hljs-literal">null</span>,
                privateKey = fallbackPrivateKey,
                walletFile = <span class="hljs-literal">null</span>
            )
        }
    }

    <span class="hljs-comment">/**
     * é€šè¿‡åŠ©è®°è¯åˆ›å»º/å¯¼å…¥é’±åŒ…
     * <span class="hljs-doctag">@param</span> mnemonic åŠ©è®°è¯å­—ç¬¦ä¸²
     * <span class="hljs-doctag">@param</span> password ç”¨äºåŠ å¯†çš„é’±åŒ…å¯†ç 
     * <span class="hljs-doctag">@return</span> WalletInfo é’±åŒ…ä¿¡æ¯
     */</span>
    fun <span class="hljs-title function_">createWalletFromMnemonic</span>(<span class="hljs-attr">mnemonic</span>: <span class="hljs-title class_">String</span>, <span class="hljs-attr">password</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">WalletInfo</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// éªŒè¯åŠ©è®°è¯æ ¼å¼</span>
            val cleanedMnemonic = mnemonic.<span class="hljs-title function_">trim</span>()
            <span class="hljs-keyword">if</span> (cleanedMnemonic.<span class="hljs-title function_">isEmpty</span>()) {
                <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Web3Exception</span>(<span class="hljs-string">"åŠ©è®°è¯ä¸èƒ½ä¸ºç©º"</span>)
            }

            <span class="hljs-comment">// åˆ†å‰²åŠ©è®°è¯å¹¶éªŒè¯é•¿åº¦</span>
            val words = cleanedMnemonic.<span class="hljs-title function_">split</span>(<span class="hljs-string">"\s+"</span>.<span class="hljs-title function_">toRegex</span>())
            <span class="hljs-keyword">if</span> (words.<span class="hljs-property">size</span> !<span class="hljs-keyword">in</span> <span class="hljs-title function_">listOf</span>(<span class="hljs-number">12</span>, <span class="hljs-number">15</span>, <span class="hljs-number">18</span>, <span class="hljs-number">21</span>, <span class="hljs-number">24</span>)) {
                <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Web3Exception</span>(<span class="hljs-string">"åŠ©è®°è¯åº”ä¸º12ã€15ã€18ã€21æˆ–24ä¸ªå•è¯"</span>)
            }

            <span class="hljs-comment">// ä½¿ç”¨ Web3j ä»åŠ©è®°è¯ç”Ÿæˆç§å­ï¼ˆåŸºäºBIP39æ ‡å‡†ï¼‰</span>
            val seed = <span class="hljs-title class_">MnemonicUtils</span>.<span class="hljs-title function_">generateSeed</span>(cleanedMnemonic, password)

            <span class="hljs-comment">// ä»ç§å­ç”Ÿæˆç¡®å®šæ€§é’±åŒ…ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰</span>
            <span class="hljs-comment">// æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ªç®€åŒ–å®ç°ï¼Œå®é™…åº”ç”¨ä¸­åº”è¯¥ä½¿ç”¨å®Œæ•´çš„ BIP44 è·¯å¾„</span>
            val privateKey = <span class="hljs-title function_">generatePrivateKeyFromSeed</span>(seed)
            val credentials = <span class="hljs-title class_">Credentials</span>.<span class="hljs-title function_">create</span>(privateKey)

            <span class="hljs-title class_">WalletInfo</span>(
                address = credentials.<span class="hljs-property">address</span>,
                mnemonic = cleanedMnemonic,     <span class="hljs-comment">// ä¿å­˜åŸå§‹åŠ©è®°è¯</span>
                privateKey = privateKey,        <span class="hljs-comment">// æ´¾ç”Ÿå‡ºçš„ç§é’¥</span>
                walletFile = <span class="hljs-literal">null</span>
            )
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Web3Exception</span>(<span class="hljs-string">"é€šè¿‡åŠ©è®°è¯åˆ›å»ºé’±åŒ…å¤±è´¥: ${e.message ?: "</span>æœªçŸ¥é”™è¯¯<span class="hljs-string">"}"</span>)
        }
    }

    <span class="hljs-comment">/**
     * ä»ç§å­ç”Ÿæˆç§é’¥ï¼ˆç®€åŒ–å®ç°ï¼‰
     * <span class="hljs-doctag">@param</span> seed BIP39ç§å­å­—èŠ‚æ•°ç»„
     * <span class="hljs-doctag">@return</span> åå…­è¿›åˆ¶ç§é’¥å­—ç¬¦ä¸²
     */</span>
    private fun <span class="hljs-title function_">generatePrivateKeyFromSeed</span>(<span class="hljs-attr">seed</span>: <span class="hljs-title class_">ByteArray</span>): <span class="hljs-title class_">String</span> {
        <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªç®€åŒ–å®ç°</span>
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­åº”è¯¥ä½¿ç”¨å®Œæ•´çš„ HD é’±åŒ…æ´¾ç”Ÿè·¯å¾„ï¼ˆBIP44ï¼‰</span>
        val secureRandom = <span class="hljs-title class_">SecureRandom</span>(seed)
        val privateKeyBytes = <span class="hljs-title class_">ByteArray</span>(<span class="hljs-number">32</span>)
        secureRandom.<span class="hljs-title function_">nextBytes</span>(privateKeyBytes)
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Numeric</span>.<span class="hljs-title function_">toHexStringNoPrefix</span>(privateKeyBytes)
    }

    <span class="hljs-comment">/**
     * å¯¼å…¥ç§é’¥é’±åŒ…
     * <span class="hljs-doctag">@param</span> privateKey åŸå§‹ç§é’¥å­—ç¬¦ä¸²
     * <span class="hljs-doctag">@return</span> WalletInfo é’±åŒ…ä¿¡æ¯
     */</span>
    fun importWalletFromPrivateKey(<span class="hljs-attr">privateKey</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">WalletInfo</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">var</span> cleanKey = privateKey.<span class="hljs-title function_">trim</span>()

            <span class="hljs-comment">// ç§»é™¤å¯èƒ½çš„0xå‰ç¼€</span>
            <span class="hljs-keyword">if</span> (cleanKey.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"0x"</span>)) {
                cleanKey = cleanKey.<span class="hljs-title function_">substring</span>(<span class="hljs-number">2</span>)
            }

            <span class="hljs-comment">// éªŒè¯ç§é’¥é•¿åº¦ï¼ˆ64ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ = 32å­—èŠ‚ï¼‰</span>
            <span class="hljs-keyword">if</span> (cleanKey.<span class="hljs-property">length</span> != <span class="hljs-number">64</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Web3Exception</span>(<span class="hljs-string">"ç§é’¥å¿…é¡»æ˜¯64ä¸ªåå…­è¿›åˆ¶å­—ç¬¦"</span>)
            }

            <span class="hljs-comment">// éªŒè¯ç§é’¥åªåŒ…å«æœ‰æ•ˆçš„åå…­è¿›åˆ¶å­—ç¬¦</span>
            <span class="hljs-keyword">if</span> (!cleanKey.<span class="hljs-title function_">matches</span>(<span class="hljs-title class_">Regex</span>(<span class="hljs-string">"[0-9a-fA-F]+"</span>))) {
                <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Web3Exception</span>(<span class="hljs-string">"ç§é’¥åŒ…å«æ— æ•ˆå­—ç¬¦"</span>)
            }

            <span class="hljs-comment">// ä»ç§é’¥åˆ›å»ºå‡­è¯å¯¹è±¡</span>
            val credentials = <span class="hljs-title class_">Credentials</span>.<span class="hljs-title function_">create</span>(cleanKey)

            <span class="hljs-title class_">WalletInfo</span>(
                address = credentials.<span class="hljs-property">address</span>,
                mnemonic = <span class="hljs-literal">null</span>,
                privateKey = cleanKey,      <span class="hljs-comment">// ä½¿ç”¨æ¸…ç†åçš„ç§é’¥</span>
                walletFile = <span class="hljs-literal">null</span>
            )
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Web3Exception</span>(<span class="hljs-string">"å¯¼å…¥é’±åŒ…å¤±è´¥: ${e.message ?: "</span>æœªçŸ¥é”™è¯¯<span class="hljs-string">"}"</span>)
        }
    }

    <span class="hljs-comment">/**
     * å¤‡ç”¨ç§é’¥ç”Ÿæˆæ–¹æ³• - å½“æ ‡å‡†æ–¹æ³•å¤±è´¥æ—¶ä½¿ç”¨
     * <span class="hljs-doctag">@return</span> éšæœºç”Ÿæˆçš„ç§é’¥å­—ç¬¦ä¸²
     */</span>
    private fun <span class="hljs-title function_">generateFallbackPrivateKey</span>(): <span class="hljs-title class_">String</span> {
        val random = java.<span class="hljs-property">util</span>.<span class="hljs-title class_">Random</span>()
        val sb = <span class="hljs-title class_">StringBuilder</span>()
        val hexChars = <span class="hljs-string">"0123456789abcdef"</span>
        <span class="hljs-comment">// ç”Ÿæˆ64ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼ˆ32å­—èŠ‚ï¼‰</span>
        <span class="hljs-title function_">repeat</span>(<span class="hljs-params"><span class="hljs-number">64</span></span>) {
            sb.<span class="hljs-title function_">append</span>(hexChars[random.<span class="hljs-title function_">nextInt</span>(hexChars.<span class="hljs-property">length</span>)])
        }
        <span class="hljs-keyword">return</span> sb.<span class="hljs-title function_">toString</span>()
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢ä½™é¢ - è·å–æŒ‡å®šåœ°å€çš„ETHä½™é¢ï¼ˆå•ä½ï¼šWeiï¼‰
     * <span class="hljs-doctag">@param</span> address è¦æŸ¥è¯¢çš„ä»¥å¤ªåŠåœ°å€
     * <span class="hljs-doctag">@return</span> BigInteger ä½™é¢ï¼ˆWeiå•ä½ï¼‰
     */</span>
    suspend fun <span class="hljs-title function_">getBalance</span>(<span class="hljs-attr">address</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">BigInteger</span> {
        <span class="hljs-comment">// é¦–å…ˆéªŒè¯åœ°å€æ ¼å¼</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isValidEthereumAddress</span>(address)) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">BigInteger</span>.<span class="hljs-property">ZERO</span>
        }

        <span class="hljs-comment">// æ ¹æ®å½“å‰ç½‘ç»œé€‰æ‹©èŠ‚ç‚¹åˆ—è¡¨</span>
        val nodes = <span class="hljs-keyword">if</span> (isMainnet) <span class="hljs-variable constant_">MAINNET_NODES</span> <span class="hljs-keyword">else</span> <span class="hljs-variable constant_">SEPOLIA_NODES</span>
        <span class="hljs-keyword">var</span> <span class="hljs-attr">lastException</span>: <span class="hljs-title class_">Exception</span>? = <span class="hljs-literal">null</span>

        <span class="hljs-comment">// å°è¯•æ‰€æœ‰å¯ç”¨èŠ‚ç‚¹ï¼Œå®ç°æ•…éšœè½¬ç§»</span>
        <span class="hljs-keyword">for</span> (node <span class="hljs-keyword">in</span> nodes) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ›å»ºæ–°çš„Web3jå®ä¾‹</span>
                val tempWeb3j = <span class="hljs-title class_">Web3</span>j.<span class="hljs-title function_">build</span>(<span class="hljs-title class_">HttpService</span>(node))
                <span class="hljs-comment">// æŸ¥è¯¢æœ€æ–°åŒºå—çš„ä½™é¢</span>
                val <span class="hljs-attr">ethGetBalance</span>: <span class="hljs-title class_">EthGetBalance</span> = tempWeb3j.<span class="hljs-title function_">ethGetBalance</span>(address, <span class="hljs-title class_">DefaultBlockParameterName</span>.<span class="hljs-property">LATEST</span>).<span class="hljs-title function_">send</span>()

                <span class="hljs-comment">// å¦‚æœæˆåŠŸï¼Œæ›´æ–°å½“å‰ä½¿ç”¨çš„èŠ‚ç‚¹</span>
                currentRpcUrl = node
                web3j = tempWeb3j

                <span class="hljs-comment">// è¿”å›ä½™é¢ï¼ˆå•ä½ï¼šWeiï¼‰</span>
                <span class="hljs-keyword">return</span> ethGetBalance.<span class="hljs-property">balance</span>
            } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
                lastException = e
                <span class="hljs-comment">// ç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>
            }
        }

        <span class="hljs-comment">// æ‰€æœ‰èŠ‚ç‚¹éƒ½å¤±è´¥ï¼Œè®°å½•é”™è¯¯å¹¶è¿”å›0</span>
        <span class="hljs-title function_">println</span>(<span class="hljs-string">"æ‰€æœ‰RPCèŠ‚ç‚¹éƒ½å¤±è´¥ï¼Œæœ€åé”™è¯¯: ${lastException?.message}"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">BigInteger</span>.<span class="hljs-property">ZERO</span>
    }

    <span class="hljs-comment">/**
     * è·å–æ ¼å¼åŒ–çš„ä½™é¢ - å°†Weiè½¬æ¢ä¸ºETHå¹¶æ ¼å¼åŒ–æ˜¾ç¤º
     * <span class="hljs-doctag">@param</span> address ä»¥å¤ªåŠåœ°å€
     * <span class="hljs-doctag">@return</span> String æ ¼å¼åŒ–åçš„ä½™é¢å­—ç¬¦ä¸²ï¼ˆå¦‚ "1.500000 ETH"ï¼‰
     */</span>
    suspend fun <span class="hljs-title function_">getFormattedBalance</span>(<span class="hljs-attr">address</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">String</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            val balanceWei = <span class="hljs-title function_">getBalance</span>(address)
            <span class="hljs-keyword">if</span> (balanceWei == <span class="hljs-title class_">BigInteger</span>.<span class="hljs-property">ZERO</span>) {
                <span class="hljs-string">"0 ETH"</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å°†Weiè½¬æ¢ä¸ºETH</span>
                val balanceEth = <span class="hljs-title class_">Convert</span>.<span class="hljs-title function_">fromWei</span>(<span class="hljs-title class_">BigDecimal</span>(balanceWei), <span class="hljs-title class_">Convert</span>.<span class="hljs-property">Unit</span>.<span class="hljs-property">ETHER</span>)
                <span class="hljs-comment">// ä¿ç•™6ä½å°æ•°å¹¶æ ¼å¼åŒ–æ˜¾ç¤º</span>
                <span class="hljs-string">"${balanceEth.setScale(6, BigDecimal.ROUND_HALF_UP)} ETH"</span>
            }
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
            <span class="hljs-string">"0 ETH"</span> <span class="hljs-comment">// å‘ç”Ÿé”™è¯¯æ—¶è¿”å›0</span>
        }
    }

    <span class="hljs-comment">/**
     * è·å–ç¾å…ƒä¼°å€¼ - è®¡ç®—ä½™é¢çš„ç¾å…ƒä»·å€¼ï¼ˆä½¿ç”¨å›ºå®šæ±‡ç‡ï¼‰
     * <span class="hljs-doctag">@param</span> address ä»¥å¤ªåŠåœ°å€
     * <span class="hljs-doctag">@return</span> String ç¾å…ƒä»·å€¼å­—ç¬¦ä¸²ï¼ˆå¦‚ "$2700.00"ï¼‰
     */</span>
    suspend fun <span class="hljs-title function_">getBalanceInUSD</span>(<span class="hljs-attr">address</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">String</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            val balanceWei = <span class="hljs-title function_">getBalance</span>(address)
            <span class="hljs-keyword">if</span> (balanceWei == <span class="hljs-title class_">BigInteger</span>.<span class="hljs-property">ZERO</span>) {
                <span class="hljs-string">"$0.00"</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å°†Weiè½¬æ¢ä¸ºETH</span>
                val balanceEth = <span class="hljs-title class_">Convert</span>.<span class="hljs-title function_">fromWei</span>(<span class="hljs-title class_">BigDecimal</span>(balanceWei), <span class="hljs-title class_">Convert</span>.<span class="hljs-property">Unit</span>.<span class="hljs-property">ETHER</span>)
                <span class="hljs-comment">// ä½¿ç”¨å›ºå®šæ±‡ç‡è®¡ç®—ç¾å…ƒä»·å€¼ï¼ˆå®é™…åº”ç”¨ä¸­åº”è¯¥ä½¿ç”¨å®æ—¶æ±‡ç‡ï¼‰</span>
                val usdValue = balanceEth.<span class="hljs-title function_">toDouble</span>() * <span class="hljs-number">1800.0</span>
                <span class="hljs-comment">// æ ¼å¼åŒ–ç¾å…ƒé‡‘é¢</span>
                <span class="hljs-string">"$${String.format("</span>%.2f<span class="hljs-string">", usdValue)}"</span>
            }
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
            <span class="hljs-string">"$0.00"</span> <span class="hljs-comment">// å‘ç”Ÿé”™è¯¯æ—¶è¿”å›$0.00</span>
        }
    }

    <span class="hljs-comment">/**
     * éªŒè¯ä»¥å¤ªåŠåœ°å€æ ¼å¼
     * <span class="hljs-doctag">@param</span> address è¦éªŒè¯çš„åœ°å€å­—ç¬¦ä¸²
     * <span class="hljs-doctag">@return</span> Boolean æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ä»¥å¤ªåŠåœ°å€æ ¼å¼
     */</span>
    fun <span class="hljs-title function_">isValidEthereumAddress</span>(<span class="hljs-attr">address</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">Boolean</span> {
        <span class="hljs-comment">// æ­£åˆ™è¡¨è¾¾å¼éªŒè¯ï¼šä»¥0xå¼€å¤´ï¼Œåè·Ÿ40ä¸ªåå…­è¿›åˆ¶å­—ç¬¦</span>
        <span class="hljs-keyword">return</span> address.<span class="hljs-title function_">matches</span>(<span class="hljs-title class_">Regex</span>(<span class="hljs-string">"^0x[a-fA-F0-9]{40}$"</span>))
    }

    <span class="hljs-comment">/**
     * åˆ‡æ¢ç½‘ç»œ - åœ¨ä¸»ç½‘å’Œæµ‹è¯•ç½‘ä¹‹é—´åˆ‡æ¢
     * <span class="hljs-doctag">@param</span> useMainnet æ˜¯å¦åˆ‡æ¢åˆ°ä¸»ç½‘
     */</span>
    fun <span class="hljs-title function_">switchNetwork</span>(<span class="hljs-params">useMainnet: <span class="hljs-built_in">Boolean</span></span>) {
        isMainnet = useMainnet
        currentChainId = <span class="hljs-keyword">if</span> (useMainnet) <span class="hljs-variable constant_">MAINNET_CHAIN_ID</span> <span class="hljs-keyword">else</span> <span class="hljs-variable constant_">SEPOLIA_CHAIN_ID</span>
        currentRpcUrl = <span class="hljs-keyword">if</span> (useMainnet) <span class="hljs-variable constant_">MAINNET_NODES</span>[<span class="hljs-number">0</span>] <span class="hljs-keyword">else</span> <span class="hljs-variable constant_">SEPOLIA_NODES</span>[<span class="hljs-number">0</span>]
        <span class="hljs-comment">// é‡æ–°åˆ›å»ºWeb3jå®ä¾‹è¿æ¥åˆ°æ–°ç½‘ç»œ</span>
        web3j = <span class="hljs-title class_">Web3</span>j.<span class="hljs-title function_">build</span>(<span class="hljs-title class_">HttpService</span>(currentRpcUrl))
    }

    <span class="hljs-comment">/**
     * è·å–å½“å‰ç½‘ç»œä¿¡æ¯
     * <span class="hljs-doctag">@return</span> NetworkInfo åŒ…å«ç½‘ç»œåç§°ã€RPC URLã€é“¾IDç­‰ä¿¡æ¯
     */</span>
    fun <span class="hljs-title function_">getCurrentNetworkInfo</span>(): <span class="hljs-title class_">NetworkInfo</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (isMainnet) {
            <span class="hljs-title class_">NetworkInfo</span>(
                name = <span class="hljs-string">"Ethereum Mainnet"</span>,          <span class="hljs-comment">// ä¸»ç½‘åç§°</span>
                rpcUrl = currentRpcUrl,             <span class="hljs-comment">// å½“å‰RPC URL</span>
                chainId = <span class="hljs-variable constant_">MAINNET_CHAIN_ID</span>,         <span class="hljs-comment">// ä¸»ç½‘é“¾ID</span>
                symbol = <span class="hljs-string">"ETH"</span>,                     <span class="hljs-comment">// ä»£å¸ç¬¦å·</span>
                explorerUrl = <span class="hljs-string">"https://etherscan.io"</span> <span class="hljs-comment">// åŒºå—æµè§ˆå™¨URL</span>
            )
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title class_">NetworkInfo</span>(
                name = <span class="hljs-string">"Sepolia Testnet"</span>,           <span class="hljs-comment">// æµ‹è¯•ç½‘åç§°</span>
                rpcUrl = currentRpcUrl,
                chainId = <span class="hljs-variable constant_">SEPOLIA_CHAIN_ID</span>,         <span class="hljs-comment">// æµ‹è¯•ç½‘é“¾ID</span>
                symbol = <span class="hljs-string">"ETH"</span>,
                explorerUrl = <span class="hljs-string">"https://sepolia.etherscan.io"</span> <span class="hljs-comment">// æµ‹è¯•ç½‘åŒºå—æµè§ˆå™¨</span>
            )
        }
    }

    <span class="hljs-comment">/**
     * æµ‹è¯•ç½‘ç»œè¿æ¥ - æ£€æŸ¥å½“å‰èŠ‚ç‚¹æ˜¯å¦å¯ç”¨
     * <span class="hljs-doctag">@return</span> Boolean è¿æ¥æ˜¯å¦æˆåŠŸ
     */</span>
    suspend fun <span class="hljs-title function_">testNetworkConnection</span>(): <span class="hljs-title class_">Boolean</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨é›¶åœ°å€è¿›è¡Œç®€å•çš„ä½™é¢æŸ¥è¯¢æ¥æµ‹è¯•è¿æ¥</span>
            val testAddress = <span class="hljs-string">"0x0000000000000000000000000000000000000000"</span>
            web3j.<span class="hljs-title function_">ethGetBalance</span>(testAddress, <span class="hljs-title class_">DefaultBlockParameterName</span>.<span class="hljs-property">LATEST</span>).<span class="hljs-title function_">send</span>()
            <span class="hljs-literal">true</span> <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å¼‚å¸¸ï¼Œè¯´æ˜è¿æ¥æˆåŠŸ</span>
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
            <span class="hljs-literal">false</span> <span class="hljs-comment">// å‘ç”Ÿå¼‚å¸¸ï¼Œè¿æ¥å¤±è´¥</span>
        }
    }
}
</code></pre>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-comment">/**
 * å®‰å…¨ç®¡ç†å™¨ - å¤„ç†æ•æ„Ÿæ•°æ®çš„åŠ å¯†å­˜å‚¨å’Œæ£€ç´¢
 * ä½¿ç”¨Android Keystoreç³»ç»Ÿä¿æŠ¤åŠ å¯†å¯†é’¥
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityManager</span>(private val <span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span>) {

    companion object {
        private <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">ANDROID_KEYSTORE</span> = <span class="hljs-string">"AndroidKeyStore"</span>  <span class="hljs-comment">// Androidå¯†é’¥åº“æä¾›è€…</span>
        private <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">KEY_ALIAS</span> = <span class="hljs-string">"Web3Wallet_Key"</span>          <span class="hljs-comment">// å¯†é’¥åˆ«å</span>
        private <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">SHARED_PREFS_NAME</span> = <span class="hljs-string">"encrypted_web3_prefs"</span> <span class="hljs-comment">// åŠ å¯†å…±äº«åå¥½åç§°</span>
        private <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">TRANSFORMATION</span> = <span class="hljs-string">"AES/GCM/NoPadding"</span>  <span class="hljs-comment">// åŠ å¯†ç®—æ³•å’Œæ¨¡å¼</span>
        private <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">IV_LENGTH</span> = <span class="hljs-number">12</span>                        <span class="hljs-comment">// åˆå§‹åŒ–å‘é‡é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰</span>
    }

    <span class="hljs-comment">// Androidå¯†é’¥åº“å®ä¾‹</span>
    private val <span class="hljs-attr">keyStore</span>: <span class="hljs-title class_">KeyStore</span> = <span class="hljs-title class_">KeyStore</span>.<span class="hljs-title function_">getInstance</span>(<span class="hljs-variable constant_">ANDROID_KEYSTORE</span>).<span class="hljs-property">apply</span> {
        <span class="hljs-title function_">load</span>(<span class="hljs-literal">null</span>) <span class="hljs-comment">// åŠ è½½å¯†é’¥åº“</span>
    }

    <span class="hljs-comment">// ä¸»å¯†é’¥ï¼Œç”¨äºåŠ å¯†å…±äº«åå¥½è®¾ç½®</span>
    private val <span class="hljs-attr">masterKey</span>: <span class="hljs-title class_">MasterKey</span> by lazy {
        <span class="hljs-title class_">MasterKey</span>.<span class="hljs-title class_">Builder</span>(context)
            .<span class="hljs-title function_">setKeyScheme</span>(<span class="hljs-title class_">MasterKey</span>.<span class="hljs-property">KeyScheme</span>.<span class="hljs-property">AES256_GCM</span>) <span class="hljs-comment">// ä½¿ç”¨AES256-GCMåŠ å¯†æ–¹æ¡ˆ</span>
            .<span class="hljs-title function_">build</span>()
    }

    <span class="hljs-comment">// åŠ å¯†çš„å…±äº«åå¥½è®¾ç½®å®ä¾‹</span>
    private val encryptedPrefs by lazy {
        <span class="hljs-title class_">EncryptedSharedPreferences</span>.<span class="hljs-title function_">create</span>(
            context,
            <span class="hljs-variable constant_">SHARED_PREFS_NAME</span>,
            masterKey,
            <span class="hljs-title class_">EncryptedSharedPreferences</span>.<span class="hljs-property">PrefKeyEncryptionScheme</span>.<span class="hljs-property">AES256_SIV</span>,    <span class="hljs-comment">// é”®åŠ å¯†æ–¹æ¡ˆ</span>
            <span class="hljs-title class_">EncryptedSharedPreferences</span>.<span class="hljs-property">PrefValueEncryptionScheme</span>.<span class="hljs-property">AES256_GCM</span>   <span class="hljs-comment">// å€¼åŠ å¯†æ–¹æ¡ˆ</span>
        )
    }

    <span class="hljs-comment">/**
     * è·å–æˆ–åˆ›å»ºåŠ å¯†å¯†é’¥ - ä½¿ç”¨Android Keystoreä¿æŠ¤å¯†é’¥
     * <span class="hljs-doctag">@return</span> SecretKey åŠ å¯†å¯†é’¥
     */</span>
    @<span class="hljs-title class_">RequiresApi</span>(<span class="hljs-title class_">Build</span>.<span class="hljs-property">VERSION_CODES</span>.<span class="hljs-property">M</span>)
    private fun <span class="hljs-title function_">getOrCreateSecretKey</span>(): <span class="hljs-title class_">SecretKey</span> {
        <span class="hljs-comment">// æ£€æŸ¥å¯†é’¥æ˜¯å¦å·²å­˜åœ¨</span>
        <span class="hljs-keyword">if</span> (!keyStore.<span class="hljs-title function_">containsAlias</span>(<span class="hljs-variable constant_">KEY_ALIAS</span>)) {
            <span class="hljs-comment">// åˆ›å»ºæ–°çš„å¯†é’¥ç”Ÿæˆå™¨</span>
            val keyGenerator = <span class="hljs-title class_">KeyGenerator</span>.<span class="hljs-title function_">getInstance</span>(
                <span class="hljs-title class_">KeyProperties</span>.<span class="hljs-property">KEY_ALGORITHM_AES</span>,
                <span class="hljs-variable constant_">ANDROID_KEYSTORE</span>
            )

            <span class="hljs-comment">// é…ç½®å¯†é’¥ç”Ÿæˆå‚æ•°</span>
            val keyGenParameterSpec = <span class="hljs-title class_">KeyGenParameterSpec</span>.<span class="hljs-title class_">Builder</span>(
                <span class="hljs-variable constant_">KEY_ALIAS</span>,
                <span class="hljs-title class_">KeyProperties</span>.<span class="hljs-property">PURPOSE_ENCRYPT</span> or <span class="hljs-title class_">KeyProperties</span>.<span class="hljs-property">PURPOSE_DECRYPT</span> <span class="hljs-comment">// å¯†é’¥ç”¨é€”</span>
            )
                .<span class="hljs-title function_">setBlockModes</span>(<span class="hljs-title class_">KeyProperties</span>.<span class="hljs-property">BLOCK_MODE_GCM</span>)       <span class="hljs-comment">// ä½¿ç”¨GCMåˆ†ç»„æ¨¡å¼</span>
                .<span class="hljs-title function_">setEncryptionPaddings</span>(<span class="hljs-title class_">KeyProperties</span>.<span class="hljs-property">ENCRYPTION_PADDING_NONE</span>) <span class="hljs-comment">// æ— å¡«å……</span>
                .<span class="hljs-title function_">setKeySize</span>(<span class="hljs-number">256</span>)                                   <span class="hljs-comment">// 256ä½å¯†é’¥</span>
                .<span class="hljs-title function_">build</span>()

            keyGenerator.<span class="hljs-title function_">init</span>(keyGenParameterSpec)
            keyGenerator.<span class="hljs-title function_">generateKey</span>() <span class="hljs-comment">// ç”Ÿæˆå¯†é’¥</span>
        }

        <span class="hljs-comment">// è¿”å›å·²å­˜åœ¨çš„å¯†é’¥</span>
        <span class="hljs-keyword">return</span> keyStore.<span class="hljs-title function_">getKey</span>(<span class="hljs-variable constant_">KEY_ALIAS</span>, <span class="hljs-literal">null</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">SecretKey</span>
    }

    <span class="hljs-comment">/**
     * åŠ å¯†æ•°æ® - ä½¿ç”¨AES-GCMåŠ å¯†ç®—æ³•
     * <span class="hljs-doctag">@param</span> plaintext è¦åŠ å¯†çš„æ˜æ–‡
     * <span class="hljs-doctag">@return</span> String Base64ç¼–ç çš„åŠ å¯†æ•°æ®
     */</span>
    @<span class="hljs-title class_">RequiresApi</span>(<span class="hljs-title class_">Build</span>.<span class="hljs-property">VERSION_CODES</span>.<span class="hljs-property">M</span>)
    fun <span class="hljs-title function_">encryptData</span>(<span class="hljs-attr">plaintext</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">String</span> {
        <span class="hljs-comment">// è·å–å¯†ç å™¨å®ä¾‹</span>
        val cipher = <span class="hljs-title class_">Cipher</span>.<span class="hljs-title function_">getInstance</span>(<span class="hljs-variable constant_">TRANSFORMATION</span>)
        <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºåŠ å¯†æ¨¡å¼</span>
        cipher.<span class="hljs-title function_">init</span>(<span class="hljs-title class_">Cipher</span>.<span class="hljs-property">ENCRYPT_MODE</span>, <span class="hljs-title function_">getOrCreateSecretKey</span>())

        val iv = cipher.<span class="hljs-property">iv</span> <span class="hljs-comment">// è·å–åˆå§‹åŒ–å‘é‡</span>
        val encrypted = cipher.<span class="hljs-title function_">doFinal</span>(plaintext.<span class="hljs-title function_">toByteArray</span>(<span class="hljs-title class_">Charsets</span>.<span class="hljs-property">UTF_8</span>)) <span class="hljs-comment">// æ‰§è¡ŒåŠ å¯†</span>

        <span class="hljs-comment">// ç»„åˆIVå’ŒåŠ å¯†æ•°æ®</span>
        val combined = <span class="hljs-title class_">ByteArray</span>(iv.<span class="hljs-property">size</span> + encrypted.<span class="hljs-property">size</span>)
        <span class="hljs-title class_">System</span>.<span class="hljs-title function_">arraycopy</span>(iv, <span class="hljs-number">0</span>, combined, <span class="hljs-number">0</span>, iv.<span class="hljs-property">size</span>)              <span class="hljs-comment">// å¤åˆ¶IVåˆ°å‰é¢</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-title function_">arraycopy</span>(encrypted, <span class="hljs-number">0</span>, combined, iv.<span class="hljs-property">size</span>, encrypted.<span class="hljs-property">size</span>) <span class="hljs-comment">// å¤åˆ¶åŠ å¯†æ•°æ®åˆ°åé¢</span>

        <span class="hljs-comment">// è¿”å›Base64ç¼–ç çš„å­—ç¬¦ä¸²</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Base64</span>.<span class="hljs-title function_">encodeToString</span>(combined, <span class="hljs-title class_">Base64</span>.<span class="hljs-property">DEFAULT</span>)
    }

    <span class="hljs-comment">/**
     * è§£å¯†æ•°æ® - ä½¿ç”¨AES-GCMè§£å¯†ç®—æ³•
     * <span class="hljs-doctag">@param</span> encryptedData Base64ç¼–ç çš„åŠ å¯†æ•°æ®
     * <span class="hljs-doctag">@return</span> String è§£å¯†åçš„æ˜æ–‡
     */</span>
    @<span class="hljs-title class_">RequiresApi</span>(<span class="hljs-title class_">Build</span>.<span class="hljs-property">VERSION_CODES</span>.<span class="hljs-property">M</span>)
    fun <span class="hljs-title function_">decryptData</span>(<span class="hljs-attr">encryptedData</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">String</span> {
        <span class="hljs-comment">// è§£ç Base64å­—ç¬¦ä¸²</span>
        val combined = <span class="hljs-title class_">Base64</span>.<span class="hljs-title function_">decode</span>(encryptedData, <span class="hljs-title class_">Base64</span>.<span class="hljs-property">DEFAULT</span>)

        <span class="hljs-comment">// åˆ†ç¦»IVå’ŒåŠ å¯†æ•°æ®</span>
        val iv = <span class="hljs-title class_">ByteArray</span>(<span class="hljs-variable constant_">IV_LENGTH</span>)
        val encrypted = <span class="hljs-title class_">ByteArray</span>(combined.<span class="hljs-property">size</span> - <span class="hljs-variable constant_">IV_LENGTH</span>)

        <span class="hljs-title class_">System</span>.<span class="hljs-title function_">arraycopy</span>(combined, <span class="hljs-number">0</span>, iv, <span class="hljs-number">0</span>, <span class="hljs-variable constant_">IV_LENGTH</span>)            <span class="hljs-comment">// æå–IV</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-title function_">arraycopy</span>(combined, <span class="hljs-variable constant_">IV_LENGTH</span>, encrypted, <span class="hljs-number">0</span>, encrypted.<span class="hljs-property">size</span>) <span class="hljs-comment">// æå–åŠ å¯†æ•°æ®</span>

        <span class="hljs-comment">// è·å–å¯†ç å™¨å®ä¾‹</span>
        val cipher = <span class="hljs-title class_">Cipher</span>.<span class="hljs-title function_">getInstance</span>(<span class="hljs-variable constant_">TRANSFORMATION</span>)
        <span class="hljs-comment">// é…ç½®GCMå‚æ•°ï¼ˆ128ä½è®¤è¯æ ‡ç­¾ï¼‰</span>
        val spec = <span class="hljs-title class_">GCMParameterSpec</span>(<span class="hljs-number">128</span>, iv)
        <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºè§£å¯†æ¨¡å¼</span>
        cipher.<span class="hljs-title function_">init</span>(<span class="hljs-title class_">Cipher</span>.<span class="hljs-property">DECRYPT_MODE</span>, <span class="hljs-title function_">getOrCreateSecretKey</span>(), spec)

        <span class="hljs-comment">// æ‰§è¡Œè§£å¯†</span>
        val decrypted = cipher.<span class="hljs-title function_">doFinal</span>(encrypted)
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>(decrypted, <span class="hljs-title class_">Charsets</span>.<span class="hljs-property">UTF_8</span>)
    }

    <span class="hljs-comment">/**
     * å®‰å…¨å­˜å‚¨å­—ç¬¦ä¸² - ä½¿ç”¨åŠ å¯†çš„å…±äº«åå¥½è®¾ç½®
     * <span class="hljs-doctag">@param</span> key é”®
     * <span class="hljs-doctag">@param</span> value å€¼
     */</span>
    fun <span class="hljs-title function_">securePutString</span>(<span class="hljs-params">key: <span class="hljs-built_in">String</span>, value: <span class="hljs-built_in">String</span></span>) {
        encryptedPrefs.<span class="hljs-title function_">edit</span>().<span class="hljs-title function_">putString</span>(key, value).<span class="hljs-title function_">apply</span>()
    }

    <span class="hljs-comment">/**
     * å®‰å…¨è·å–å­—ç¬¦ä¸² - ä»åŠ å¯†çš„å…±äº«åå¥½è®¾ç½®ä¸­è¯»å–
     * <span class="hljs-doctag">@param</span> key é”®
     * <span class="hljs-doctag">@param</span> defaultValue é»˜è®¤å€¼
     * <span class="hljs-doctag">@return</span> String è·å–çš„å€¼æˆ–é»˜è®¤å€¼
     */</span>
    fun <span class="hljs-title function_">secureGetString</span>(<span class="hljs-attr">key</span>: <span class="hljs-title class_">String</span>, <span class="hljs-attr">defaultValue</span>: <span class="hljs-title class_">String</span> = <span class="hljs-string">""</span>): <span class="hljs-title class_">String</span> {
        <span class="hljs-keyword">return</span> encryptedPrefs.<span class="hljs-title function_">getString</span>(key, defaultValue) ?: defaultValue
    }

    <span class="hljs-comment">/**
     * ä¿å­˜é’±åŒ…æ•°æ® - å­˜å‚¨åŠ å¯†çš„é’±åŒ…ä¿¡æ¯
     * <span class="hljs-doctag">@param</span> walletAddress é’±åŒ…åœ°å€
     * <span class="hljs-doctag">@param</span> encryptedPrivateKey åŠ å¯†çš„ç§é’¥
     * <span class="hljs-doctag">@param</span> encryptedMnemonic åŠ å¯†çš„åŠ©è®°è¯ï¼ˆå¯ä¸ºç©ºï¼‰
     */</span>
    fun <span class="hljs-title function_">saveWalletData</span>(<span class="hljs-params">walletAddress: <span class="hljs-built_in">String</span>, encryptedPrivateKey: <span class="hljs-built_in">String</span>, encryptedMnemonic: <span class="hljs-built_in">String</span>?</span>) {
        <span class="hljs-comment">// ä½¿ç”¨åœ°å€ä½œä¸ºé”®çš„ä¸€éƒ¨åˆ†å­˜å‚¨ç§é’¥</span>
        <span class="hljs-title function_">securePutString</span>(<span class="hljs-string">"wallet_${walletAddress}_private"</span>, encryptedPrivateKey)
        <span class="hljs-comment">// å¦‚æœå­˜åœ¨åŠ©è®°è¯ï¼Œä¹Ÿå­˜å‚¨</span>
        encryptedMnemonic?.<span class="hljs-property">let</span> {
            <span class="hljs-title function_">securePutString</span>(<span class="hljs-string">"wallet_${walletAddress}_mnemonic"</span>, it)
        }
        <span class="hljs-comment">// è®¾ç½®å½“å‰é’±åŒ…</span>
        <span class="hljs-title function_">securePutString</span>(<span class="hljs-string">"current_wallet"</span>, walletAddress)

        <span class="hljs-comment">// æ›´æ–°é’±åŒ…åˆ—è¡¨</span>
        val wallets = <span class="hljs-title function_">getWalletList</span>().<span class="hljs-title function_">toMutableSet</span>()
        wallets.<span class="hljs-title function_">add</span>(walletAddress)
        <span class="hljs-title function_">securePutString</span>(<span class="hljs-string">"wallet_list"</span>, wallets.<span class="hljs-title function_">joinToString</span>(<span class="hljs-string">","</span>))
    }

    <span class="hljs-comment">/**
     * è·å–é’±åŒ…ç§é’¥ - è§£å¯†å¹¶è¿”å›ç§é’¥
     * <span class="hljs-doctag">@param</span> walletAddress é’±åŒ…åœ°å€
     * <span class="hljs-doctag">@return</span> String? è§£å¯†åçš„ç§é’¥ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›null
     */</span>
    @<span class="hljs-title class_">RequiresApi</span>(<span class="hljs-title class_">Build</span>.<span class="hljs-property">VERSION_CODES</span>.<span class="hljs-property">M</span>)
    fun <span class="hljs-title function_">getWalletPrivateKey</span>(<span class="hljs-attr">walletAddress</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">String</span>? {
        val encrypted = <span class="hljs-title function_">secureGetString</span>(<span class="hljs-string">"wallet_${walletAddress}_private"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (encrypted.<span class="hljs-title function_">isNotEmpty</span>()) <span class="hljs-title function_">decryptData</span>(encrypted) <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
    }

    <span class="hljs-comment">/**
     * è·å–é’±åŒ…åˆ—è¡¨ - è¿”å›æ‰€æœ‰å·²ä¿å­˜çš„é’±åŒ…åœ°å€
     * <span class="hljs-doctag">@return</span> Set&lt;String&gt; é’±åŒ…åœ°å€é›†åˆ
     */</span>
    fun <span class="hljs-title function_">getWalletList</span>(): <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">String</span>&gt; {
        val listStr = <span class="hljs-title function_">secureGetString</span>(<span class="hljs-string">"wallet_list"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (listStr.<span class="hljs-title function_">isEmpty</span>()) <span class="hljs-title function_">emptySet</span>() <span class="hljs-keyword">else</span> listStr.<span class="hljs-title function_">split</span>(<span class="hljs-string">","</span>).<span class="hljs-title function_">toSet</span>()
    }

    <span class="hljs-comment">/**
     * è·å–å½“å‰é’±åŒ…åœ°å€
     * <span class="hljs-doctag">@return</span> String? å½“å‰é’±åŒ…åœ°å€ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›null
     */</span>
    fun <span class="hljs-title function_">getCurrentWallet</span>(): <span class="hljs-title class_">String</span>? {
        val address = <span class="hljs-title function_">secureGetString</span>(<span class="hljs-string">"current_wallet"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (address.<span class="hljs-title function_">isNotEmpty</span>()) address <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
    }

    <span class="hljs-comment">/**
     * æ£€æŸ¥æ˜¯å¦å­˜åœ¨é’±åŒ…
     * <span class="hljs-doctag">@return</span> Boolean æ˜¯å¦å­˜åœ¨è‡³å°‘ä¸€ä¸ªé’±åŒ…
     */</span>
    fun <span class="hljs-title function_">hasWallets</span>(): <span class="hljs-title class_">Boolean</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">getWalletList</span>().<span class="hljs-title function_">isNotEmpty</span>()
    }

    <span class="hljs-comment">/**
     * æ¸…é™¤æ‰€æœ‰æ•°æ® - åˆ é™¤æ‰€æœ‰å­˜å‚¨çš„é’±åŒ…ä¿¡æ¯
     */</span>
    fun <span class="hljs-title function_">clearAllData</span>(<span class="hljs-params"/>) {
        encryptedPrefs.<span class="hljs-title function_">edit</span>().<span class="hljs-title function_">clear</span>().<span class="hljs-title function_">apply</span>()
    }
}

</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * AndroidåŠ å¯†è¾…åŠ©å·¥å…· - æä¾›åœ¨ä¸åŒAndroidç‰ˆæœ¬ä¸Šå®‰å…¨ç”Ÿæˆå¯†é’¥å¯¹çš„æ–¹æ³•
 */</span>
<span class="hljs-keyword">object</span> AndroidCryptoHelper {

    <span class="hljs-comment">/**
     * åœ¨ Android ä¸Šå®‰å…¨ç”Ÿæˆ EC å¯†é’¥å¯¹ - æ”¯æŒå¤šç§å¤‡ç”¨æ–¹æ³•
     * <span class="hljs-doctag">@return</span> ECKeyPair æ¤­åœ†æ›²çº¿å¯†é’¥å¯¹
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">generateEcKeyPair</span><span class="hljs-params">()</span></span>: ECKeyPair {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ–¹æ³•1: å°è¯•ä½¿ç”¨ Web3j çš„æ ‡å‡†æ–¹æ³•ï¼ˆæœ€é«˜æ•ˆï¼‰</span>
            Keys.createEcKeyPair()
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// æ–¹æ³•2: å¦‚æœæ ‡å‡†æ–¹æ³•å¤±è´¥ï¼Œä½¿ç”¨ Android å…¼å®¹çš„API</span>
            <span class="hljs-keyword">try</span> {
                generateEcKeyPairWithAndroidAPI()
            } <span class="hljs-keyword">catch</span> (e2: Exception) {
                <span class="hljs-comment">// æ–¹æ³•3: æœ€ç»ˆå›é€€æ–¹æ³• - ä½¿ç”¨å®‰å…¨çš„éšæœºæ•°ç”Ÿæˆ</span>
                generateEcKeyPairFallback()
            }
        }
    }

    <span class="hljs-comment">/**
     * ä½¿ç”¨ Android API ç”Ÿæˆ EC å¯†é’¥å¯¹ - å…¼å®¹æ€§æ›´å¥½çš„æ–¹æ³•
     * <span class="hljs-doctag">@return</span> ECKeyPair æ¤­åœ†æ›²çº¿å¯†é’¥å¯¹
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">generateEcKeyPairWithAndroidAPI</span><span class="hljs-params">()</span></span>: ECKeyPair {
        <span class="hljs-comment">// è·å–ECå¯†é’¥å¯¹ç”Ÿæˆå™¨å®ä¾‹</span>
        <span class="hljs-keyword">val</span> keyPairGenerator = KeyPairGenerator.getInstance(<span class="hljs-string">"EC"</span>)
        <span class="hljs-comment">// æŒ‡å®šä½¿ç”¨secp256k1æ›²çº¿ï¼ˆæ¯”ç‰¹å¸å’Œä»¥å¤ªåŠä½¿ç”¨çš„æ›²çº¿ï¼‰</span>
        <span class="hljs-keyword">val</span> ecGenParameterSpec = ECGenParameterSpec(<span class="hljs-string">"secp256k1"</span>)
        <span class="hljs-comment">// ä½¿ç”¨å®‰å…¨éšæœºæ•°åˆå§‹åŒ–ç”Ÿæˆå™¨</span>
        keyPairGenerator.initialize(ecGenParameterSpec, SecureRandom())
        <span class="hljs-comment">// ç”Ÿæˆå¯†é’¥å¯¹</span>
        <span class="hljs-keyword">val</span> keyPair = keyPairGenerator.generateKeyPair()

        <span class="hljs-comment">// æå–ç§é’¥å’Œå…¬é’¥</span>
        <span class="hljs-keyword">val</span> privateKey = keyPair.<span class="hljs-keyword">private</span>
        <span class="hljs-keyword">val</span> publicKey = keyPair.<span class="hljs-keyword">public</span>

        <span class="hljs-comment">// è½¬æ¢ä¸º Web3j çš„ ECKeyPair æ ¼å¼</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ªç®€åŒ–å®ç°ï¼Œå®é™…åº”ç”¨ä¸­éœ€è¦æ›´å¤æ‚çš„è½¬æ¢</span>
        <span class="hljs-keyword">val</span> privateKeyBytes = privateKey.encoded
        <span class="hljs-keyword">val</span> publicKeyBytes = publicKey.encoded

        <span class="hljs-comment">// ä½¿ç”¨ Web3j çš„å·¥å…·ä»å­—èŠ‚åˆ›å»ºå¯†é’¥å¯¹</span>
        <span class="hljs-keyword">return</span> ECKeyPair.create(privateKeyBytes)
    }

    <span class="hljs-comment">/**
     * å›é€€æ–¹æ³• - ä½¿ç”¨å®‰å…¨çš„éšæœºæ•°ç”Ÿæˆç§é’¥ï¼ˆæœ€åŸºç¡€ä½†å¯é çš„æ–¹æ³•ï¼‰
     * <span class="hljs-doctag">@return</span> ECKeyPair æ¤­åœ†æ›²çº¿å¯†é’¥å¯¹
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">generateEcKeyPairFallback</span><span class="hljs-params">()</span></span>: ECKeyPair {
        <span class="hljs-comment">// ä½¿ç”¨å®‰å…¨éšæœºæ•°ç”Ÿæˆå™¨</span>
        <span class="hljs-keyword">val</span> secureRandom = SecureRandom()
        <span class="hljs-keyword">val</span> privateKeyBytes = ByteArray(<span class="hljs-number">32</span>) <span class="hljs-comment">// 32å­—èŠ‚ = 256ä½</span>
        secureRandom.nextBytes(privateKeyBytes) <span class="hljs-comment">// å¡«å……éšæœºå­—èŠ‚</span>

        <span class="hljs-comment">// ä½¿ç”¨ Web3j ä»å­—èŠ‚åˆ›å»ºå¯†é’¥å¯¹</span>
        <span class="hljs-keyword">return</span> ECKeyPair.create(privateKeyBytes)
    }

    <span class="hljs-comment">/**
     * éªŒè¯ç§é’¥æ ¼å¼ - æ£€æŸ¥ç§é’¥æ˜¯å¦ç¬¦åˆä»¥å¤ªåŠæ ‡å‡†
     * <span class="hljs-doctag">@param</span> privateKey è¦éªŒè¯çš„ç§é’¥å­—ç¬¦ä¸²
     * <span class="hljs-doctag">@return</span> Boolean æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ç§é’¥æ ¼å¼
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isValidPrivateKey</span><span class="hljs-params">(privateKey: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ç§»é™¤å¯èƒ½çš„ 0x å‰ç¼€</span>
            <span class="hljs-keyword">val</span> cleanKey = <span class="hljs-keyword">if</span> (privateKey.startsWith(<span class="hljs-string">"0x"</span>)) {
                privateKey.substring(<span class="hljs-number">2</span>)
            } <span class="hljs-keyword">else</span> {
                privateKey
            }

            <span class="hljs-comment">// æ£€æŸ¥é•¿åº¦ (64ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ = 32å­—èŠ‚) å’Œå­—ç¬¦æœ‰æ•ˆæ€§</span>
            cleanKey.length == <span class="hljs-number">64</span> &amp;&amp; cleanKey.matches(Regex(<span class="hljs-string">"[0-9a-fA-F]+"</span>))
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-literal">false</span> <span class="hljs-comment">// ä»»ä½•å¼‚å¸¸éƒ½è§†ä¸ºæ— æ•ˆæ ¼å¼</span>
        }
    }

    <span class="hljs-comment">/**
     * æ ‡å‡†åŒ–ç§é’¥æ ¼å¼ - ç»Ÿä¸€ç§é’¥çš„è¡¨ç¤ºæ ¼å¼
     * <span class="hljs-doctag">@param</span> privateKey åŸå§‹ç§é’¥å­—ç¬¦ä¸²
     * <span class="hljs-doctag">@return</span> String æ ‡å‡†åŒ–åçš„ç§é’¥ï¼ˆå°å†™ï¼Œæ— 0xå‰ç¼€ï¼‰
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">normalizePrivateKey</span><span class="hljs-params">(privateKey: <span class="hljs-type">String</span>)</span></span>: String {
        <span class="hljs-keyword">var</span> cleanKey = privateKey.trim()
        <span class="hljs-comment">// ç§»é™¤0xå‰ç¼€</span>
        <span class="hljs-keyword">if</span> (cleanKey.startsWith(<span class="hljs-string">"0x"</span>)) {
            cleanKey = cleanKey.substring(<span class="hljs-number">2</span>)
        }
        <span class="hljs-comment">// è½¬æ¢ä¸ºå°å†™ç¡®ä¿ä¸€è‡´æ€§</span>
        <span class="hljs-keyword">return</span> cleanKey.toLowerCase()
    }
}

</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * é’±åŒ…ä¸»ç•Œé¢
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WalletFragment</span> : <span class="hljs-type">Fragment</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentWalletBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> securityManager: SecurityManager
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> web3Service: Web3Service
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> currentAddress: String? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentWalletBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        securityManager = SecurityManager(requireContext())
        web3Service = Web3Service()

        setupUI()
        loadWalletData()
        setupClickListeners()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupUI</span><span class="hljs-params">()</span></span> {
        currentAddress = securityManager.getCurrentWallet()
        currentAddress?.let { address -&gt;
            binding.tvAddress.text = formatAddress(address)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadWalletData</span><span class="hljs-params">()</span></span> {
        currentAddress?.let { address -&gt;
            lifecycleScope.launch {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">val</span> balance = web3Service.getBalance(address)
                    <span class="hljs-keyword">val</span> etherBalance = Convert.fromWei(BigDecimal(balance), Convert.<span class="hljs-built_in">Unit</span>.ETHER)

                    binding.tvBalance.text = <span class="hljs-string">"<span class="hljs-subst">${etherBalance.setScale(<span class="hljs-number">4</span>, BigDecimal.ROUND_HALF_UP)}</span> ETH"</span>
                    binding.tvBalanceFiat.text = <span class="hljs-string">"â‰ˆ $<span class="hljs-subst">${(etherBalance.toDouble() * <span class="hljs-number">1800</span>).format(<span class="hljs-number">2</span>)}</span>"</span>

                } <span class="hljs-keyword">catch</span> (e: Exception) {
                    showError(<span class="hljs-string">"è·å–ä½™é¢å¤±è´¥: <span class="hljs-subst">${e.message}</span>"</span>)
                }
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupClickListeners</span><span class="hljs-params">()</span></span> {
        binding.btnCopyAddress.setOnClickListener {
            currentAddress?.let { address -&gt;
                copyToClipboard(address)
                showMessage(<span class="hljs-string">"åœ°å€å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"</span>)
            }
        }

        binding.btnSend.setOnClickListener {
            showMessage(<span class="hljs-string">"å‘é€åŠŸèƒ½å¼€å‘ä¸­..."</span>)
        }

        binding.btnReceive.setOnClickListener {
            showMessage(<span class="hljs-string">"æ¥æ”¶åŠŸèƒ½å¼€å‘ä¸­..."</span>)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">formatAddress</span><span class="hljs-params">(address: <span class="hljs-type">String</span>)</span></span>: String {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (address.length &gt; <span class="hljs-number">12</span>) {
            <span class="hljs-string">"<span class="hljs-subst">${address.substring(<span class="hljs-number">0</span>, <span class="hljs-number">6</span>)}</span>...<span class="hljs-subst">${address.substring(address.length - <span class="hljs-number">6</span>)}</span>"</span>
        } <span class="hljs-keyword">else</span> {
            address
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">copyToClipboard</span><span class="hljs-params">(text: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">val</span> clipboard = requireContext().getSystemService(Context.CLIPBOARD_SERVICE) <span class="hljs-keyword">as</span> ClipboardManager
        <span class="hljs-keyword">val</span> clip = ClipData.newPlainText(<span class="hljs-string">"é’±åŒ…åœ°å€"</span>, text)
        clipboard.setPrimaryClip(clip)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showMessage</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_SHORT).show()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showError</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_LONG).show()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Double</span>.<span class="hljs-title">format</span><span class="hljs-params">(digits: <span class="hljs-type">Int</span>)</span></span> = <span class="hljs-string">"%.<span class="hljs-subst">${digits}</span>f"</span>.format(<span class="hljs-keyword">this</span>)

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}

</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * è®¾ç½®
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SettingsFragment</span> : <span class="hljs-type">Fragment</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentSettingsBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> securityManager: SecurityManager

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentSettingsBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        securityManager = SecurityManager(requireContext())

        binding.btnClearData.setOnClickListener {
            securityManager.clearAllData()
            showMessage(<span class="hljs-string">"æ•°æ®å·²æ¸…é™¤"</span>)

            requireActivity().supportFragmentManager.beginTransaction()
                .replace(R.id.fragment_container, CreateWalletFragment())
                .commit()

            (requireActivity() <span class="hljs-keyword">as</span> MainActivity).hideBottomNavigation()
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showMessage</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_SHORT)
            .show()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¯¼å…¥ç§é’¥é¡µé¢
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ImportPrivateKeyFragment</span> : <span class="hljs-type">Fragment</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentImportPrivateKeyBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> securityManager: SecurityManager
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> web3Service: Web3Service

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentImportPrivateKeyBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        securityManager = SecurityManager(requireContext())
        web3Service = Web3Service()

        binding.btnImport.setOnClickListener {
            importWalletFromPrivateKey()
        }
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">importWalletFromPrivateKey</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> privateKey = binding.etPrivateKey.text.toString().trim()

        <span class="hljs-keyword">if</span> (privateKey.isEmpty()) {
            showError(<span class="hljs-string">"è¯·è¾“å…¥ç§é’¥"</span>)
            <span class="hljs-keyword">return</span>
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> credentials = web3Service.importWalletFromPrivateKey(privateKey)

            <span class="hljs-keyword">val</span> encryptedPrivateKey = securityManager.encryptData(privateKey)

            securityManager.saveWalletData(
                credentials.address,
                encryptedPrivateKey,
                <span class="hljs-literal">null</span>
            )

            (requireActivity() <span class="hljs-keyword">as</span> MainActivity).showBottomNavigation()
            requireActivity().supportFragmentManager.beginTransaction()
                .replace(R.id.fragment_container, com.learn.web3walletdemo.ui.wallet.WalletFragment())
                .commit()

            showMessage(<span class="hljs-string">"é’±åŒ…å¯¼å…¥æˆåŠŸ"</span>)

        } <span class="hljs-keyword">catch</span> (e: Exception) {
            showError(<span class="hljs-string">"å¯¼å…¥é’±åŒ…å¤±è´¥: <span class="hljs-subst">${e.message}</span>"</span>)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showError</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_LONG).show()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showMessage</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_SHORT).show()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¯¼å…¥åŠ©è®°è¯é¡µé¢
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ImportMnemonicFragment</span> : <span class="hljs-type">Fragment</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentImportMnemonicBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> securityManager: SecurityManager
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> web3Service: Web3Service

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentImportMnemonicBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        securityManager = SecurityManager(requireContext())
        web3Service = Web3Service()

        binding.btnImport.setOnClickListener {
            importWalletFromMnemonic()
        }
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">importWalletFromMnemonic</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> mnemonic = binding.etMnemonic.text.toString().trim()

        <span class="hljs-keyword">if</span> (mnemonic.isEmpty()) {
            showError(<span class="hljs-string">"è¯·è¾“å…¥åŠ©è®°è¯"</span>)
            <span class="hljs-keyword">return</span>
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> password = <span class="hljs-string">"default_password"</span>
            <span class="hljs-keyword">val</span> walletInfo = web3Service.createWalletFromMnemonic(mnemonic, password)

            <span class="hljs-keyword">val</span> encryptedPrivateKey = securityManager.encryptData(walletInfo.privateKey)
            <span class="hljs-keyword">val</span> encryptedMnemonic = securityManager.encryptData(mnemonic)

            securityManager.saveWalletData(
                walletInfo.address,
                encryptedPrivateKey,
                encryptedMnemonic
            )

            (requireActivity() <span class="hljs-keyword">as</span> MainActivity).showBottomNavigation()
            requireActivity().supportFragmentManager.beginTransaction()
                .replace(R.id.fragment_container, WalletFragment())
                .commit()

            showMessage(<span class="hljs-string">"é’±åŒ…å¯¼å…¥æˆåŠŸ"</span>)

        } <span class="hljs-keyword">catch</span> (e: Exception) {
            showError(<span class="hljs-string">"å¯¼å…¥é’±åŒ…å¤±è´¥: <span class="hljs-subst">${e.message}</span>"</span>)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showError</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_LONG).show()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showMessage</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_SHORT).show()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}

</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">/**
 * 1. CreateWalletFragment (åˆ›å»ºé’±åŒ…é¡µé¢)
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateWalletFragment</span> : <span class="hljs-type">Fragment</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentCreateWalletBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> securityManager: SecurityManager
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> web3Service: Web3Service

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentCreateWalletBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        securityManager = SecurityManager(requireContext())
        web3Service = Web3Service()

        setupClickListeners()
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupClickListeners</span><span class="hljs-params">()</span></span> {
        binding.btnCreateNew.setOnClickListener {
            createNewWallet()
        }

        binding.btnImportMnemonic.setOnClickListener {
            replaceFragment(ImportMnemonicFragment())
        }

        binding.btnImportPrivateKey.setOnClickListener {
            replaceFragment(ImportPrivateKeyFragment())
        }
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createNewWallet</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> password = <span class="hljs-string">"default_password"</span>

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> walletInfo = web3Service.createNewWallet()

            <span class="hljs-keyword">val</span> encryptedPrivateKey = securityManager.encryptData(walletInfo.privateKey)
            securityManager.saveWalletData(
                walletInfo.address,
                encryptedPrivateKey,
                <span class="hljs-literal">null</span>
            )

            <span class="hljs-keyword">val</span> backupFragment = BackupPrivateKeyFragment().apply {
                arguments = Bundle().apply {
                    putString(<span class="hljs-string">"privateKey"</span>, walletInfo.privateKey)
                    putString(<span class="hljs-string">"address"</span>, walletInfo.address)
                }
            }
            replaceFragment(backupFragment)

        } <span class="hljs-keyword">catch</span> (e: Exception) {
            Log.e(<span class="hljs-string">"aaaa"</span>, e.message.toString())
            showError(<span class="hljs-string">"åˆ›å»ºé’±åŒ…å¤±è´¥: <span class="hljs-subst">${e.message}</span>"</span>)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">replaceFragment</span><span class="hljs-params">(fragment: <span class="hljs-type">Fragment</span>)</span></span> {
        requireActivity().supportFragmentManager.beginTransaction()
            .replace(R.id.fragment_container, fragment)
            .addToBackStack(<span class="hljs-literal">null</span>)
            .commit()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showError</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_LONG)
            .show()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}

</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¤‡ä»½ç§é’¥é¡µé¢
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BackupPrivateKeyFragment</span> : <span class="hljs-type">Fragment</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentBackupPrivateKeyBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> privateKey: String
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> address: String

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentBackupPrivateKeyBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        privateKey = arguments?.getString(<span class="hljs-string">"privateKey"</span>) ?: <span class="hljs-string">""</span>
        address = arguments?.getString(<span class="hljs-string">"address"</span>) ?: <span class="hljs-string">""</span>

        setupUI()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupUI</span><span class="hljs-params">()</span></span> {
        binding.tvPrivateKey.text = privateKey
        binding.tvAddress.text = address

        binding.btnContinue.setOnClickListener {
            (requireActivity() <span class="hljs-keyword">as</span> MainActivity).showBottomNavigation()
            requireActivity().supportFragmentManager.beginTransaction()
                .replace(R.id.fragment_container, WalletFragment())
                .commit()
        }

        binding.btnCopyPrivateKey.setOnClickListener {
            copyToClipboard(privateKey)
            showMessage(<span class="hljs-string">"ç§é’¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"</span>)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">copyToClipboard</span><span class="hljs-params">(text: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">val</span> clipboard = requireContext().getSystemService(Context.CLIPBOARD_SERVICE) <span class="hljs-keyword">as</span> ClipboardManager
        <span class="hljs-keyword">val</span> clip = ClipData.newPlainText(<span class="hljs-string">"ç§é’¥"</span>, text)
        clipboard.setPrimaryClip(clip)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showMessage</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_SHORT).show()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¯¼å‡ºé¡µé¢å†…å®¹ä¸ºPDF]]></title>    <link>https://juejin.cn/post/7578762210287239231</link>    <guid>https://juejin.cn/post/7578762210287239231</guid>    <pubDate>2025-12-02T02:45:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578762210287239231" data-draft-id="7578760341280800809" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¯¼å‡ºé¡µé¢å†…å®¹ä¸ºPDF"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T02:45:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿«è½çš„å°æµ·ç–¼"/> <meta itemprop="url" content="https://juejin.cn/user/114004940573112"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¯¼å‡ºé¡µé¢å†…å®¹ä¸ºPDF
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/114004940573112/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿«è½çš„å°æµ·ç–¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:45:26.000Z" title="Tue Dec 02 2025 02:45:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.å‰è¨€</h2>
<p>æ¥åˆ°ä¸€ä¸ªå°†çª—åˆåŒç­¾ç½²å¼¹çª—å¯¼å‡ºç›–ç« ä¹‹åçš„å†…å®¹ä¸ºPDFéœ€æ±‚ï¼Œé¦–å…ˆæƒ³åˆ°åç«¯å¯¼å‡ºï¼Œåç«¯åé¦ˆå¯¼å‡ºæ ·å¼æŠŠæ§å›°éš¾ï¼Œå®ç°æ—¶é—´éå¸¸ä¹…ã€‚å‰ç«¯è¢«è¿«æ¥æ´»å¯¼å‡ºPDFğŸ¤¡ã€‚</p>
<h2 data-id="heading-1">2.å®ç°æ–¹æ¡ˆ</h2>
<p>é‡‡ç”¨html2Canvaså¯¹é¡µé¢å†…å®¹è¿›è¡Œæˆªå›¾ï¼Œç”Ÿæˆé¡µé¢å†…å®¹å¯¹åº”çš„å›¾ç‰‡ï¼Œä¹‹åé€šè¿‡JsPDFå°†å›¾ç‰‡æ·»åŠ åˆ°pdfæ–‡ä»¶ï¼Œå¹¶å¯¼å‡ºä¸ºPDFæ–‡ä»¶</p>
<p>html2Canvas + JsPDF</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> html2Canvas <span class="hljs-keyword">from</span> <span class="hljs-string">'html2canvas'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">JsPDF</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'jspdf'</span>
</code></pre>
<h2 data-id="heading-2">3.å…·ä½“ä»£ç å®ç°</h2>
<p>å…·ä½“ä»£ç ä½ç½®ï¼špv-admin\src\views\devopsManage\noticeManage\list\components\previewDialog.vue</p>
<p>è¿™é‡Œå¤§æ¦‚é˜è¿°ä¸€ä¸‹ä»£ç é€»è¾‘ã€‚</p>
<p>1.é‡‡ç”¨html2Canvasç”Ÿæˆä¸€å¼ å®Œæ•´çš„å›¾ç‰‡</p>
<p>2.åˆ¤æ–­å›¾ç‰‡æ˜¯å¦å¤§äºä¸€é¡µï¼Œå¦‚æœåªæœ‰ä¸€é¡µåˆ™é€šè¿‡pdf.addImageæ–¹æ³•å¡å…¥pdf</p>
<p>3.å¦‚æœå›¾ç‰‡é•¿åº¦å¤§äºä¸€é¡µï¼Œåˆ™éœ€è¦å°†å›¾ç‰‡åˆ†å‰²ç”Ÿæˆå¤šé¡µï¼Œè¿™é‡Œå›¾ç‰‡åˆ†å‰²é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯ï¼Œé€šè¿‡canvasçš„drawImageæ–¹æ³•æ¸²æŸ“å›¾ç‰‡çš„æŸä¸ªé«˜åº¦åˆ°æŸä¸ªé«˜åº¦çš„å†…å®¹ï¼Œç„¶åå†è½¬æˆå›¾ç‰‡ï¼Œç„¶åé€šè¿‡pdf.addImageä¸€é¡µä¸€é¡µçš„å¡åˆ°pdf</p>
<p>4.é€šè¿‡pdf.output('blob')æ—¢å¯è·å–pdfæ–‡ä»¶æµã€‚</p>
<pre><code class="hljs language-java" lang="java">async <span class="hljs-title function_">generatePdf</span><span class="hljs-params">()</span> {
  <span class="hljs-built_in">this</span>.loading = <span class="hljs-literal">true</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å¯¼å‡ºå†…å®¹å¯¹åº”çš„domçš„ref</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">element</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.$refs.rightContent
    <span class="hljs-type">const</span> <span class="hljs-variable">canvas</span> <span class="hljs-operator">=</span> await <span class="hljs-title function_">html2Canvas</span><span class="hljs-params">(element, {
      allowTaint: <span class="hljs-literal">true</span>,
      useCORS: <span class="hljs-literal">true</span>,
      scale: <span class="hljs-number">2</span>,
      logging: <span class="hljs-literal">false</span>,
      letterRendering: <span class="hljs-literal">true</span>,
    })</span>
    
    <span class="hljs-type">const</span> <span class="hljs-variable">imgData</span> <span class="hljs-operator">=</span> canvas.toDataURL(<span class="hljs-string">'image/jpeg'</span>, <span class="hljs-number">1.0</span>)
    <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ä¸ªA4çº¸å¤§å°çš„PDF</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">pdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsPDF</span>(<span class="hljs-string">'p'</span>, <span class="hljs-string">'pt'</span>, <span class="hljs-string">'a4'</span>)
    
    <span class="hljs-comment">// è·å–PDFçš„å®½åº¦å’Œé«˜åº¦</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">pdfWidth</span> <span class="hljs-operator">=</span> pdf.internal.pageSize.getWidth()
    <span class="hljs-type">const</span> <span class="hljs-variable">pdfHeight</span> <span class="hljs-operator">=</span> pdf.internal.pageSize.getHeight()
    
    <span class="hljs-comment">// è®¾ç½®é¡µé¢è¾¹è·</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">marginTop</span> <span class="hljs-operator">=</span> <span class="hljs-number">40</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">marginBottom</span> <span class="hljs-operator">=</span> <span class="hljs-number">60</span>
    
    <span class="hljs-comment">// è®¡ç®—å›¾ç‰‡çš„å®½åº¦å’Œé«˜åº¦åŠæ¯”ä¾‹</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">imgWidth</span> <span class="hljs-operator">=</span> canvas.width
    <span class="hljs-type">const</span> <span class="hljs-variable">imgHeight</span> <span class="hljs-operator">=</span> canvas.height
    <span class="hljs-type">const</span> <span class="hljs-variable">ratio</span> <span class="hljs-operator">=</span> pdfWidth / imgWidth
    <span class="hljs-type">const</span> <span class="hljs-variable">scaledImgHeight</span> <span class="hljs-operator">=</span> imgHeight * ratio
    
    <span class="hljs-comment">// ä½¿ç”¨æ–°çš„åˆ†é¡µæ–¹æ³•ï¼šæŒ‰ç…§é¡µé¢é«˜åº¦åˆ‡å‰²åŸå§‹å›¾åƒ</span>
    <span class="hljs-keyword">if</span> (scaledImgHeight &lt;= pdfHeight - marginTop - marginBottom) {
      <span class="hljs-comment">// å¦‚æœå†…å®¹é«˜åº¦ä¸è¶…è¿‡ä¸€é¡µï¼Œç›´æ¥æ·»åŠ å›¾åƒ</span>
      pdf.addImage(imgData, <span class="hljs-string">'JPEG'</span>, <span class="hljs-number">0</span>, marginTop, pdfWidth, scaledImgHeight)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¦‚æœå†…å®¹è¶…è¿‡ä¸€é¡µï¼Œä½¿ç”¨å¤šé¡µPDF</span>
      <span class="hljs-type">let</span> <span class="hljs-variable">remainingHeight</span> <span class="hljs-operator">=</span> imgHeight
      <span class="hljs-type">let</span> <span class="hljs-variable">yOffset</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
      <span class="hljs-type">let</span> <span class="hljs-variable">pageCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
      
      <span class="hljs-keyword">while</span> (remainingHeight &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// è®¡ç®—å½“å‰é¡µèƒ½æ˜¾ç¤ºçš„é«˜åº¦(ä»¥åŸå§‹å›¾åƒé«˜åº¦è®¡ç®—)</span>
        <span class="hljs-type">const</span> <span class="hljs-variable">pageHeightInCanvas</span> <span class="hljs-operator">=</span> ((pdfHeight - marginTop - marginBottom) / ratio)
        <span class="hljs-comment">// è®¡ç®—å®é™…å¯ç”¨çš„é«˜åº¦</span>
        <span class="hljs-type">const</span> <span class="hljs-variable">heightToPrint</span> <span class="hljs-operator">=</span> Math.min(pageHeightInCanvas, remainingHeight)
        <span class="hljs-comment">// è½¬æ¢ä¸ºPDFä¸Šå®é™…é«˜åº¦</span>
        <span class="hljs-type">const</span> <span class="hljs-variable">heightOnPdf</span> <span class="hljs-operator">=</span> heightToPrint * ratio
        
        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„canvasï¼ŒåªåŒ…å«å½“å‰é¡µéœ€è¦çš„éƒ¨åˆ†</span>
        <span class="hljs-type">const</span> <span class="hljs-variable">tmpCanvas</span> <span class="hljs-operator">=</span> document.createElement(<span class="hljs-string">'canvas'</span>)
        tmpCanvas.width = imgWidth
        tmpCanvas.height = heightToPrint
        
        <span class="hljs-type">const</span> <span class="hljs-variable">ctx</span> <span class="hljs-operator">=</span> tmpCanvas.getContext(<span class="hljs-string">'2d'</span>)
        <span class="hljs-comment">// å°†åŸå§‹canvasçš„ç‰¹å®šéƒ¨åˆ†ç»˜åˆ¶åˆ°ä¸´æ—¶canvas</span>
        ctx.drawImage(
          canvas,
          <span class="hljs-number">0</span>, yOffset, <span class="hljs-comment">// æºå›¾åƒçš„èµ·å§‹ä½ç½®</span>
          imgWidth, heightToPrint, <span class="hljs-comment">// æºå›¾åƒçš„å®½é«˜</span>
          <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-comment">// ç›®æ ‡èµ·å§‹ä½ç½®</span>
          imgWidth, heightToPrint <span class="hljs-comment">// ç›®æ ‡å®½é«˜</span>
        )
        
        <span class="hljs-comment">// å¦‚æœä¸æ˜¯ç¬¬ä¸€é¡µï¼Œæ·»åŠ æ–°é¡µ</span>
        <span class="hljs-keyword">if</span> (pageCount &gt; <span class="hljs-number">0</span>) {
          pdf.addPage()
        }
        
        <span class="hljs-comment">// å°†å½“å‰é¡µç»˜åˆ¶åˆ°PDF</span>
        <span class="hljs-type">const</span> <span class="hljs-variable">pageImgData</span> <span class="hljs-operator">=</span> tmpCanvas.toDataURL(<span class="hljs-string">'image/jpeg'</span>, <span class="hljs-number">1.0</span>)
        pdf.addImage(pageImgData, <span class="hljs-string">'JPEG'</span>, <span class="hljs-number">0</span>, marginTop, pdfWidth, heightOnPdf)
        
        <span class="hljs-comment">// æ›´æ–°å‰©ä½™é«˜åº¦å’Œå‚ç›´åç§»</span>
        remainingHeight -= heightToPrint
        yOffset += heightToPrint
        pageCount++
      }
    }
    
    <span class="hljs-comment">// è·å–PDFçš„blobå¯¹è±¡</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">pdfBlob</span> <span class="hljs-operator">=</span> pdf.output(<span class="hljs-string">'blob'</span>)
    <span class="hljs-comment">// åˆ›å»ºFileå¯¹è±¡</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> `è¿ç»´å·¥ä½œå‘ŠçŸ¥å‡½_${<span class="hljs-built_in">this</span>.detail.noticeNo}.pdf`
    <span class="hljs-type">const</span> <span class="hljs-variable">pdfFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>([pdfBlob], fileName, { type: <span class="hljs-string">'application/pdf'</span> })
    
    <span class="hljs-comment">// ç”Ÿæˆæ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">'/notice/'</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().getTime() + <span class="hljs-string">'/'</span> + fileName
    
    <span class="hljs-comment">// ç›´æ¥ä¸Šä¼ æ–‡ä»¶</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-type">const</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> await <span class="hljs-title function_">UploadFile</span><span class="hljs-params">(pdfFile, filePath, filePath.substring(<span class="hljs-number">1</span>)</span>)
      <span class="hljs-keyword">if</span> (res &amp;&amp; res.url) {
        <span class="hljs-built_in">this</span>.queryFn(res.url)
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">this</span>.$message.error(<span class="hljs-string">'ç”ŸæˆPDFå¤±è´¥'</span>)
      }
    } <span class="hljs-keyword">catch</span> (error) {
      console.error(<span class="hljs-string">'ä¸Šä¼ PDFå¤±è´¥:'</span>, error)
      <span class="hljs-built_in">this</span>.$message.error(<span class="hljs-string">'ä¸Šä¼ PDFå¤±è´¥'</span>)
    }
  } <span class="hljs-keyword">catch</span> (error) {
    console.error(<span class="hljs-string">'ç”ŸæˆPDFå¤±è´¥:'</span>, error)
    <span class="hljs-built_in">this</span>.$message.error(<span class="hljs-string">'ç”ŸæˆPDFå¤±è´¥'</span>)
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-built_in">this</span>.loading = <span class="hljs-literal">false</span>
  }
},
</code></pre>
<h2 data-id="heading-3">4.æ•ˆæœå±•ç¤º</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcfpamf.yuque.com%2Fattachments%2Fyuque%2F0%2F2025%2Fpdf%2F1684650%2F1753669474022-7e5324e0-774c-48c6-a5b8-b8b0f6f202f2.pdf" target="_blank" title="https://cfpamf.yuque.com/attachments/yuque/0/2025/pdf/1684650/1753669474022-7e5324e0-774c-48c6-a5b8-b8b0f6f202f2.pdf" ref="nofollow noopener noreferrer">ğŸ“è¿ç»´å·¥ä½œå‘ŠçŸ¥å‡½_YW202507-02.pdf</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a187fe57ed7f4531b6cb10d8b7f0fb92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r6JC955qE5bCP5rW355a8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765248326&amp;x-signature=%2B4H8yRk8ulnWMoPvsRUBtkFmgks%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">5.å­˜åœ¨é—®é¢˜</h2>
<p>é‡‡ç”¨html2Canvasç”Ÿæˆçš„å›¾ç‰‡ï¼Œå¦‚æœè¿‡é•¿ï¼Œåˆ†é¡µæ—¶ï¼Œåˆ†é¡µæˆªæ–­çš„ä½ç½®ä¸å¥½æ§åˆ¶ï¼Œä¼šå‡ºç°éƒ¨åˆ†æ¨¡å—è¢«åˆ†å‰²åˆ°ä¸¤é¡µï¼ˆå“ªæ€•ä¸€è¡Œå­—ä¹Ÿçœ‹ä¹Ÿèƒ½ä¼šè¢«ä»ä¸­é—´æˆªæ–­å±•ç¤ºï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨å±€é‡å¤æ¥å£å–æ¶ˆ&é‡å¤æç¤º]]></title>    <link>https://juejin.cn/post/7578811288819023915</link>    <guid>https://juejin.cn/post/7578811288819023915</guid>    <pubDate>2025-12-02T02:46:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578811288819023915" data-draft-id="7578760249949143094" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨å±€é‡å¤æ¥å£å–æ¶ˆ&amp;é‡å¤æç¤º"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-02T02:46:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿«è½çš„å°æµ·ç–¼"/> <meta itemprop="url" content="https://juejin.cn/user/114004940573112"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨å±€é‡å¤æ¥å£å–æ¶ˆ&amp;é‡å¤æç¤º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/114004940573112/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿«è½çš„å°æµ·ç–¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:46:35.000Z" title="Tue Dec 02 2025 02:46:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    23
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é‡å¤æ¥å£å–æ¶ˆ</h2>
<h3 data-id="heading-1">æ€è·¯</h3>
<p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªpendingMapå¯¹è±¡ï¼Œå®ƒç”¨äºå­˜å‚¨æ¯ä¸ªè¯·æ±‚çš„æ ‡è¯†ï¼ˆè¯·æ±‚è·¯å¾„ã€è¯·æ±‚æ–¹å¼ã€è¯·æ±‚å‚æ•°3ä¸ªç»´åº¦å”¯ä¸€æ ‡è¯†ï¼‰å’Œå–æ¶ˆå‡½æ•°ã€‚å½“è¯·æ±‚è¢«å‘å‡ºæ—¶ï¼Œæˆ‘ä»¬å°†å…¶æ·»åŠ åˆ°pendingMapä¸­ã€‚å†æ¬¡è°ƒç”¨pendingMapå­˜åœ¨æ­¤è¯·æ±‚ï¼Œåˆ™å–æ¶ˆè¯·æ±‚ï¼Œå¦å¤–å†æ­¤æ¥å£è¿”å›æ—¶ï¼ŒåŒæ ·å–æ¶ˆè¯·æ±‚ã€‚</p>
<h3 data-id="heading-2">å®ç°</h3>
<p>1ã€åˆ›å»ºAxiosCancelerç±»ï¼Œå®šä¹‰äº†addPendingã€removeAllPendingå’ŒremovePendingä¸‰ä¸ªæ–¹æ³•ã€‚addPendingæ–¹æ³•ç”¨äºå°†è¯·æ±‚æ·»åŠ åˆ°pendingMapä¸­ã€‚removeAllPendingæ–¹æ³•å¯ä»¥ç”¨äºå–æ¶ˆæ‰€æœ‰è¯·æ±‚ï¼Œè€ŒremovePendingæ–¹æ³•å¯ä»¥ç”¨äºå–æ¶ˆå•ä¸ªè¯·æ±‚ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">import type { AxiosRequestConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>
import { generateRequestCode } <span class="hljs-keyword">from</span> <span class="hljs-string">'./index'</span>

<span class="hljs-comment">// ç”¨äºå­˜å‚¨æ¯ä¸ªè¯·æ±‚çš„æ ‡è¯†å’Œå–æ¶ˆå‡½æ•°</span>
<span class="hljs-keyword">const</span> pendingMap = <span class="hljs-keyword">new</span> Map&lt;<span class="hljs-built_in">string</span>, AbortController&gt;()

export <span class="hljs-keyword">class</span> <span class="hljs-title">AxiosCanceler</span> {
  <span class="hljs-comment">/**
   * æ·»åŠ è¯·æ±‚
   * @param config è¯·æ±‚é…ç½®
   */</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">addPending</span>(<span class="hljs-params">config: AxiosRequestConfig</span>): <span class="hljs-keyword">void</span></span> {
    <span class="hljs-comment">// ç«‹åˆ»ç§»é™¤é‡å¤è¯·æ±‚</span>
    <span class="hljs-keyword">this</span>.removePending(config)
    <span class="hljs-comment">// è¯·æ±‚å”¯ä¸€æ ‡è¯†code</span>
    <span class="hljs-keyword">const</span> requestCode = generateRequestCode(config)
    <span class="hljs-comment">// å–æ¶ˆè¯·æ±‚å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> AbortController()
    config.signal = controller.<span class="hljs-function">signal
    <span class="hljs-title">if</span> (<span class="hljs-params">!pendingMap.has(requestCode</span>))</span> {
      <span class="hljs-comment">// å¦‚æœå½“å‰è¯·æ±‚ä¸åœ¨ç­‰å¾…ä¸­ï¼Œå°†å…¶æ·»åŠ åˆ°ç­‰å¾…ä¸­</span>
      pendingMap.<span class="hljs-keyword">set</span>(requestCode, controller)
    }
  }

  <span class="hljs-comment">/**
   * æ¸…é™¤æ‰€æœ‰ç­‰å¾…ä¸­çš„è¯·æ±‚
   */</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">removeAllPending</span>(): <span class="hljs-keyword">void</span></span> {
    pendingMap.forEach((abortController) =&gt; {
      <span class="hljs-keyword">if</span> (abortController) {
        abortController.abort()
      }
    })
    <span class="hljs-keyword">this</span>.reset()
  }

  <span class="hljs-comment">/**
   * ç§»é™¤è¯·æ±‚
   * @param config è¯·æ±‚é…ç½®
   */</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">removePending</span>(<span class="hljs-params">config: AxiosRequestConfig</span>): <span class="hljs-keyword">void</span></span> {
    <span class="hljs-keyword">const</span> requestCode = generateRequestCode(config)
    <span class="hljs-keyword">if</span> (pendingMap.has(requestCode)) {
      <span class="hljs-comment">// å¦‚æœå½“å‰è¯·æ±‚åœ¨ç­‰å¾…ä¸­ï¼Œå–æ¶ˆå®ƒå¹¶å°†å…¶ä»ç­‰å¾…ä¸­ç§»é™¤</span>
      <span class="hljs-keyword">const</span> abortController = pendingMap.<span class="hljs-keyword">get</span>(requestCode)
      <span class="hljs-keyword">if</span> (abortController) {
        abortController.abort(requestCode)
      }
      pendingMap.delete(requestCode)
    }
  }

  <span class="hljs-comment">/**
   * é‡ç½®
   */</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">reset</span>(): <span class="hljs-keyword">void</span></span> {
    pendingMap.clear()
  }
}
</code></pre>
<p>2ã€åˆ›å»ºè·å–å”¯ä¸€æ ‡è¯†è¯·æ±‚codeçš„æ–¹æ³•generateRequestCodeï¼Œé€šè¿‡urlã€methodã€dataã€paramsæ¥å”¯ä¸€æ ‡è¯†</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">AxiosRequestConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>

<span class="hljs-comment">/**
 * æ ‡å‡†åŒ–å‚æ•°å¯¹è±¡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Record&lt;string, any&gt; | null | undefined</span>} <span class="hljs-variable">params</span> - éœ€è¦æ ‡å‡†åŒ–çš„å‚æ•°
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Record&lt;string, any&gt;</span>} - æ ‡å‡†åŒ–åçš„å‚æ•°å¯¹è±¡
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">normalizeParams</span>(<span class="hljs-params">params?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span></span>): <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-comment">// å¤„ç†undefinedå’Œæœªä¼ å‚çš„æƒ…å†µ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span> || params === <span class="hljs-literal">undefined</span>) {
    <span class="hljs-keyword">return</span> {}
  }

  <span class="hljs-comment">// å¤„ç†nullå’Œå…¶ä»–ç©ºå€¼æƒ…å†µ</span>
  <span class="hljs-keyword">if</span> (params === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> {}
  }

  <span class="hljs-comment">// å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå°è¯•è§£æä¸ºJSONå¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> params === <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> parsed = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(params)
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> parsed === <span class="hljs-string">'object'</span> &amp;&amp; parsed !== <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">sortObjectDeep</span>(parsed)
      }
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-comment">// è§£æå¤±è´¥ï¼Œè¿”å›ç©ºå¯¹è±¡</span>
    }
    <span class="hljs-keyword">return</span> {}
  }

  <span class="hljs-comment">// å¦‚æœä¸æ˜¯å¯¹è±¡ç±»å‹ï¼Œè¿”å›ç©ºå¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> params !== <span class="hljs-string">'object'</span>) {
    <span class="hljs-keyword">return</span> {}
  }

  <span class="hljs-comment">// å¦‚æœæ˜¯æ•°ç»„ï¼Œè¿”å›ç©ºå¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(params)) {
    <span class="hljs-keyword">return</span> {}
  }

  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºç©ºå¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(params).<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> {}
  }

  <span class="hljs-comment">// å¯¹éç©ºå¯¹è±¡è¿›è¡Œæ·±åº¦æ’åº</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">sortObjectDeep</span>(params)
}

<span class="hljs-comment">/**
 * æ·±åº¦æ’åºå¯¹è±¡
 * <span class="hljs-doctag">@template</span> <span class="hljs-variable">T</span> - è¾“å…¥å¯¹è±¡ç±»å‹
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">T</span>} <span class="hljs-variable">obj</span> - éœ€è¦æ’åºçš„å¯¹è±¡
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">T</span>} - æ’åºåçš„å¯¹è±¡
 */</span>
<span class="hljs-keyword">function</span> sortObjectDeep&lt;T&gt;(<span class="hljs-attr">obj</span>: T): T {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span> || obj === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> obj
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(obj)) {
    <span class="hljs-keyword">return</span> obj.<span class="hljs-title function_">map</span>(sortObjectDeep).<span class="hljs-title function_">sort</span>() <span class="hljs-keyword">as</span> T
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;)
    .<span class="hljs-title function_">sort</span>()
    .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">result: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;, key: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
      result[key] = <span class="hljs-title function_">sortObjectDeep</span>((obj <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;)[key])
      <span class="hljs-keyword">return</span> result
    }, {}) <span class="hljs-keyword">as</span> T
}

<span class="hljs-comment">/**
 * ç”Ÿæˆè¯·æ±‚å”¯ä¸€ç¼–ç 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">AxiosRequestConfig</span>} <span class="hljs-variable">config</span> - Axiosè¯·æ±‚é…ç½®
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} - å”¯ä¸€ç¼–ç 
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateRequestCode</span>(<span class="hljs-params">
  config: AxiosRequestConfig,
</span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-comment">// ç¡®ä¿configå­˜åœ¨</span>
  <span class="hljs-keyword">if</span> (!config) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è¯·æ±‚é…ç½®ä¸ºå¿…å¡«å‚æ•°'</span>)
  }

  <span class="hljs-comment">// ç¡®ä¿urlå’Œmethodå­˜åœ¨</span>
  <span class="hljs-keyword">if</span> (!config.<span class="hljs-property">url</span> || !config.<span class="hljs-property">method</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'URLå’Œmethodä¸ºå¿…å¡«å‚æ•°'</span>)
  }

  <span class="hljs-comment">// å¤„ç†paramsçš„ç‰¹æ®Šæƒ…å†µ</span>
  <span class="hljs-keyword">const</span> normalizedParams = <span class="hljs-title function_">normalizeParams</span>(config.<span class="hljs-property">params</span>)

  <span class="hljs-keyword">const</span> normalizedData = <span class="hljs-title function_">normalizeParams</span>(config.<span class="hljs-property">data</span>)
  <span class="hljs-comment">// æ‹¼æ¥å­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">const</span> stringToHash = <span class="hljs-string">`<span class="hljs-subst">${config.url.toLowerCase()}</span>|<span class="hljs-subst">${config.method.toUpperCase()}</span>|<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(normalizedParams)}</span>|<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(normalizedData)}</span>`</span>
  
  <span class="hljs-keyword">return</span> stringToHash
}
</code></pre>
<p>3ã€ä¿®æ”¹è¯·æ±‚æ‹¦æˆªå™¨</p>
<pre><code class="hljs language-javascript" lang="javascript">instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config: AxiosRequestConfig</span>) =&gt;</span> {
    ... 
    axiosCanceler.<span class="hljs-title function_">addPending</span>(config)
    <span class="hljs-keyword">return</span> config
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error.<span class="hljs-property">data</span>.<span class="hljs-property">error</span>.<span class="hljs-property">message</span>)
  },
)

<span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨</span>
instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) {
    ....
    <span class="hljs-comment">// ç§»é™¤è¯·æ±‚</span>
    axiosCanceler.<span class="hljs-title function_">removePending</span>(response.<span class="hljs-property">config</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(response)
  },
  <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-comment">// è¯·æ±‚è¢«å–æ¶ˆæ—¶ï¼Œè¿”å›é”™è¯¯æç¤º</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isCancel</span>(error)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">'é‡å¤è¯·æ±‚ï¼Œå·²å–æ¶ˆ'</span>)
    }
    <span class="hljs-comment">// ç§»é™¤è¯·æ±‚</span>
    <span class="hljs-keyword">const</span> { response } = error
    <span class="hljs-keyword">if</span> (response &amp;&amp; response.<span class="hljs-property">config</span>) {
      axiosCanceler.<span class="hljs-title function_">removePending</span>(response.<span class="hljs-property">config</span>)
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">config</span>) {
      <span class="hljs-comment">// å¤„ç†è¯·æ±‚è¢«å–æ¶ˆçš„æƒ…å†µ</span>
      axiosCanceler.<span class="hljs-title function_">removePending</span>(error.<span class="hljs-property">config</span>)
    }
    <span class="hljs-keyword">if</span> (response) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(response)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">/*
       * å¤„ç†æ–­ç½‘çš„æƒ…å†µ
       * eg:è¯·æ±‚è¶…æ—¶æˆ–æ–­ç½‘æ—¶ï¼Œæ›´æ–°stateçš„networkçŠ¶æ€
       * networkçŠ¶æ€åœ¨app.vueä¸­æ§åˆ¶ç€ä¸€ä¸ªå…¨å±€çš„æ–­ç½‘æç¤ºç»„ä»¶çš„æ˜¾ç¤ºéšè—
       * åç»­å¢åŠ æ–­ç½‘æƒ…å†µä¸‹åšçš„ä¸€äº›æ“ä½œ
       */</span>
      <span class="hljs-comment">// æ–­ç½‘æƒ…å†µä¸‹ï¼Œæ¸…é™¤æ‰€æœ‰è¯·æ±‚</span>
      axiosCanceler.<span class="hljs-title function_">removeAllPending</span>()
    }
  },
)
<span class="hljs-comment">// åªéœ€è¦è€ƒè™‘å•ä¸€èŒè´£ï¼Œè¿™å—åªå°è£…axios</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> instance
</code></pre>
<h2 data-id="heading-3">é‡å¤æç¤º</h2>
<p>è¿™é‡Œæˆ‘æ˜¯é€šè¿‡ç›´æ¥äºŒæ¬¡å°è£…elementçš„æ¶ˆæ¯æç¤ºæ–¹æ³•ï¼Œæˆ‘è¿™é‡Œé‡‡ç”¨çš„æ˜¯vue3ï¼Œç»Ÿä¸€å…¥å£æ–¹å¼å»åšçš„ï¼Œå¦‚æœæ˜¯vue2ï¼Œå¯ä»¥åœ¨main.jså°†$messageæŒ‚è½½åˆ°thisä¹‹å‰åšä¸€ä¸‹é‡å†™</p>
<h3 data-id="heading-4">ä»£ç </h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span>, <span class="hljs-title class_">MessageHandler</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>

<span class="hljs-comment">// é˜²æ­¢é‡å¤å¼¹çª—</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">messageInstance</span>: <span class="hljs-title class_">MessageHandler</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">MessageOptions</span> {
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-keyword">type</span>?: <span class="hljs-string">'success'</span> | <span class="hljs-string">'warning'</span> | <span class="hljs-string">'info'</span> | <span class="hljs-string">'error'</span>
  [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>
}

<span class="hljs-keyword">const</span> mainMessage = (<span class="hljs-attr">options</span>: <span class="hljs-title class_">MessageOptions</span> | <span class="hljs-built_in">string</span>): <span class="hljs-function"><span class="hljs-params">MessageHandler</span> =&gt;</span> {
  <span class="hljs-comment">// å¦‚æœå¼¹çª—å·²å­˜åœ¨å…ˆå…³é—­</span>
  <span class="hljs-keyword">if</span> (messageInstance) {
    messageInstance.<span class="hljs-title function_">close</span>()
  }

  <span class="hljs-keyword">const</span> messageOptions = <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">'string'</span>
    ? { <span class="hljs-attr">message</span>: options }
    : options

  messageInstance = <span class="hljs-title class_">ElMessage</span>(messageOptions)
  <span class="hljs-keyword">return</span> messageInstance
}


<span class="hljs-keyword">const</span> <span class="hljs-attr">extendedMainMessage</span>: <span class="hljs-built_in">any</span> = mainMessage

<span class="hljs-keyword">const</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-string">'success'</span> | <span class="hljs-string">'warning'</span> | <span class="hljs-string">'info'</span> | <span class="hljs-string">'error'</span>&gt; = [<span class="hljs-string">'success'</span>, <span class="hljs-string">'warning'</span>, <span class="hljs-string">'info'</span>, <span class="hljs-string">'error'</span>]
arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">type</span></span>) =&gt;</span> {
  extendedMainMessage[<span class="hljs-keyword">type</span>] = <span class="hljs-function">(<span class="hljs-params">options: MessageOptions | <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> messageOptions = <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">'string'</span>
      ? { <span class="hljs-attr">message</span>: options }
      : { ...options }

    messageOptions.<span class="hljs-property">type</span> = <span class="hljs-keyword">type</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">mainMessage</span>(messageOptions)
  }
})

<span class="hljs-comment">// messageæ¶ˆæ¯æç¤º</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">$success</span> = (<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-title function_">mainMessage</span>({
    <span class="hljs-attr">message</span>: msg || <span class="hljs-string">'æ“ä½œæˆåŠŸ'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'success'</span>,
  })
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">$warning</span> = (<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-title function_">mainMessage</span>({
    <span class="hljs-attr">message</span>: msg || <span class="hljs-string">'æ“ä½œå¤±è´¥'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>,
  })
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">$error</span> = (<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-title function_">mainMessage</span>({
    <span class="hljs-attr">message</span>: msg || <span class="hljs-string">'æ“ä½œå¤±è´¥'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>,
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">$info</span> = (<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-title function_">mainMessage</span>({
    <span class="hljs-attr">message</span>: msg,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>,
  })
}
</code></pre>
<h3 data-id="heading-5">ä½¿ç”¨</h3>
<p>æ­¤æ—¶è¿ç»­è°ƒç”¨å§‹ç»ˆåªä¼šæœ‰ä¸€ä¸ªæ¶ˆæ¯ä½“å‡ºç°ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>u</mi><mi>c</mi><mi>c</mi><mi>e</mi><mi>s</mi><mi>s</mi><mtext>ã€</mtext></mrow><annotation encoding="application/x-tex">successã€</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">ccess</span><span class="mord cjk_fallback">ã€</span></span></span></span></span>errorã€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mi>a</mi><mi>r</mi><mi>n</mi><mi>i</mi><mi>n</mi><mi>g</mi><mtext>ã€</mtext></mrow><annotation encoding="application/x-tex">warningã€</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">nin</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord cjk_fallback">ã€</span></span></span></span></span>infoå‡å…±ç”¨åŒä¸€ä¸ªæ¶ˆæ¯ä½“ï¼‰</p>
<pre><code class="hljs language-php" lang="php">import { <span class="hljs-variable">$error</span>, <span class="hljs-variable">$success</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/index'</span>

<span class="hljs-variable">$error</span>(<span class="hljs-string">'é”™è¯¯æç¤º1'</span>)
<span class="hljs-variable">$error</span>(<span class="hljs-string">'é”™è¯¯æç¤º2'</span>)
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ç¿»è¯‘ã€‘adbï¼ˆAndroid Debug Bridgeï¼‰ å¸®åŠ©æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7578793960626683930</link>    <guid>https://juejin.cn/post/7578793960626683930</guid>    <pubDate>2025-12-02T03:06:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578793960626683930" data-draft-id="7578803491821584411" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ç¿»è¯‘ã€‘adbï¼ˆAndroid Debug Bridgeï¼‰ å¸®åŠ©æ–‡æ¡£"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-02T03:06:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²æ€¡æ—¸"/> <meta itemprop="url" content="https://juejin.cn/user/2875978146656750"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ç¿»è¯‘ã€‘adbï¼ˆAndroid Debug Bridgeï¼‰ å¸®åŠ©æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978146656750/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²æ€¡æ—¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:06:22.000Z" title="Tue Dec 02 2025 03:06:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-arduino" lang="arduino">Android Debug <span class="hljs-built_in">Bridge</span> ç‰ˆæœ¬ <span class="hljs-number">1.0</span><span class="hljs-number">.41</span>
ç‰ˆæœ¬å· <span class="hljs-number">36.0</span><span class="hljs-number">.0</span><span class="hljs-number">-13206524</span>adb.exe
è¿è¡Œäº Windows <span class="hljs-number">10.0</span><span class="hljs-number">.26100</span>
</code></pre>
<pre><code class="hljs language-sql" lang="sql">å…¨å±€é€‰é¡¹ï¼š
 <span class="hljs-operator">-</span>a                       åœ¨æ‰€æœ‰ç½‘ç»œæ¥å£ä¸Šç›‘å¬ï¼Œè€Œä¸ä»…ä»…æ˜¯ localhost
 <span class="hljs-operator">-</span>d                       ä½¿ç”¨ USB è®¾å¤‡ï¼ˆå¦‚æœè¿æ¥äº†å¤šä¸ªè®¾å¤‡åˆ™æŠ¥é”™ï¼‰
 <span class="hljs-operator">-</span>e                       ä½¿ç”¨ TCP<span class="hljs-operator">/</span>IP è®¾å¤‡ï¼ˆå¦‚æœæœ‰å¤šä¸ªå¯ç”¨çš„ TCP<span class="hljs-operator">/</span>IP è®¾å¤‡åˆ™æŠ¥é”™ï¼‰
 <span class="hljs-operator">-</span>s åºåˆ—å·                ä½¿ç”¨æŒ‡å®šåºåˆ—å·çš„è®¾å¤‡ï¼ˆè¦†ç›– $ANDROID_SERIAL ç¯å¢ƒå˜é‡ï¼‰
 <span class="hljs-operator">-</span>t ID                    ä½¿ç”¨æŒ‡å®šä¼ è¾“ ID çš„è®¾å¤‡
 <span class="hljs-operator">-</span>H                       æŒ‡å®š adb æœåŠ¡å™¨ä¸»æœºå [é»˜è®¤<span class="hljs-operator">=</span>localhost]
 <span class="hljs-operator">-</span>P                       æŒ‡å®š adb æœåŠ¡å™¨ç«¯å£ [é»˜è®¤<span class="hljs-operator">=</span><span class="hljs-number">5037</span>]
 <span class="hljs-operator">-</span>L SOCKET                åœ¨æŒ‡å®šçš„å¥—æ¥å­—ä¸Šç›‘å¬ adb æœåŠ¡å™¨ [é»˜è®¤<span class="hljs-operator">=</span>tcp:localhost:<span class="hljs-number">5037</span>]
 <span class="hljs-comment">--one-device SERIAL|USB  ä»…å…è®¸ä¸ 'start-server' æˆ– 'server nodaemon' ä¸€èµ·ä½¿ç”¨ï¼ŒæœåŠ¡å™¨å°†ä»…è¿æ¥åˆ°ä¸€å° USB è®¾å¤‡ï¼Œç”±åºåˆ—å·æˆ– USB è®¾å¤‡åœ°å€æŒ‡å®šã€‚</span>
 <span class="hljs-comment">--exit-on-write-error    å¦‚æœæ ‡å‡†è¾“å‡ºè¢«å…³é—­åˆ™é€€å‡º</span>

å¸¸è§„å‘½ä»¤ï¼š
 devices [<span class="hljs-operator">-</span>l]             åˆ—å‡ºå·²è¿æ¥çš„è®¾å¤‡ï¼ˆ<span class="hljs-operator">-</span>l è¡¨ç¤ºè¯¦ç»†è¾“å‡ºï¼‰
 help                     æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯
 version                  æ˜¾ç¤ºç‰ˆæœ¬å·

ç½‘ç»œè¿æ¥ï¼š
 <span class="hljs-keyword">connect</span> ä¸»æœº[:ç«¯å£]       é€šè¿‡ TCP<span class="hljs-operator">/</span>IP è¿æ¥åˆ°è®¾å¤‡ [é»˜è®¤ç«¯å£<span class="hljs-operator">=</span><span class="hljs-number">5555</span>]
 <span class="hljs-keyword">disconnect</span> [ä¸»æœº[:ç«¯å£]]  ä»ç»™å®šçš„ TCP<span class="hljs-operator">/</span>IP è®¾å¤‡æ–­å¼€è¿æ¥ [é»˜è®¤ç«¯å£<span class="hljs-operator">=</span><span class="hljs-number">5555</span>]ï¼Œæˆ–æ–­å¼€æ‰€æœ‰è¿æ¥
 pair ä¸»æœº[:ç«¯å£] [é…å¯¹ç ]  ä¸è®¾å¤‡é…å¯¹ä»¥è¿›è¡Œå®‰å…¨çš„ TCP<span class="hljs-operator">/</span>IP é€šä¿¡
 forward <span class="hljs-comment">--list           åˆ—å‡ºæ‰€æœ‰æ­£å‘å¥—æ¥å­—è¿æ¥</span>
 forward [<span class="hljs-comment">--no-rebind] æœ¬åœ°åœ°å€ è¿œç¨‹åœ°å€</span>
                          ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å»ºç«‹æ­£å‘å¥—æ¥å­—è¿æ¥ï¼š
                            tcp:<span class="hljs-operator">&lt;</span>ç«¯å£<span class="hljs-operator">&gt;</span> (<span class="hljs-operator">&lt;</span>æœ¬åœ°åœ°å€<span class="hljs-operator">&gt;</span> å¯ä¸º "tcp:0" ä»¥é€‰æ‹©ä»»æ„å¼€æ”¾ç«¯å£)
                            localabstract:<span class="hljs-operator">&lt;</span>Unix åŸŸå¥—æ¥å­—åç§°<span class="hljs-operator">&gt;</span>
                            localreserved:<span class="hljs-operator">&lt;</span>Unix åŸŸå¥—æ¥å­—åç§°<span class="hljs-operator">&gt;</span>
                            localfilesystem:<span class="hljs-operator">&lt;</span>Unix åŸŸå¥—æ¥å­—åç§°<span class="hljs-operator">&gt;</span>
                            dev:<span class="hljs-operator">&lt;</span>å­—ç¬¦è®¾å¤‡åç§°<span class="hljs-operator">&gt;</span>
                            dev<span class="hljs-operator">-</span>raw:<span class="hljs-operator">&lt;</span>å­—ç¬¦è®¾å¤‡åç§°<span class="hljs-operator">&gt;</span> (ä»¥åŸå§‹æ¨¡å¼æ‰“å¼€è®¾å¤‡)
                            jdwp:<span class="hljs-operator">&lt;</span>è¿›ç¨‹PID<span class="hljs-operator">&gt;</span> (ä»…é™è¿œç¨‹)
                            vsock:<span class="hljs-operator">&lt;</span>CID<span class="hljs-operator">&gt;</span>:<span class="hljs-operator">&lt;</span>ç«¯å£<span class="hljs-operator">&gt;</span> (ä»…é™è¿œç¨‹)
                            acceptfd:<span class="hljs-operator">&lt;</span>æ–‡ä»¶æè¿°ç¬¦<span class="hljs-operator">&gt;</span> (ä»…é™ç›‘å¬)
 forward <span class="hljs-comment">--remove æœ¬åœ°åœ°å€ ç§»é™¤ç‰¹å®šçš„æ­£å‘å¥—æ¥å­—è¿æ¥</span>
 forward <span class="hljs-comment">--remove-all     ç§»é™¤æ‰€æœ‰æ­£å‘å¥—æ¥å­—è¿æ¥</span>
 reverse <span class="hljs-comment">--list           åˆ—å‡ºè®¾å¤‡ä¸Šçš„æ‰€æœ‰åå‘å¥—æ¥å­—è¿æ¥</span>
 reverse [<span class="hljs-comment">--no-rebind] è¿œç¨‹åœ°å€ æœ¬åœ°åœ°å€</span>
                          ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å»ºç«‹åå‘å¥—æ¥å­—è¿æ¥ï¼š
                            tcp:<span class="hljs-operator">&lt;</span>ç«¯å£<span class="hljs-operator">&gt;</span> (<span class="hljs-operator">&lt;</span>è¿œç¨‹åœ°å€<span class="hljs-operator">&gt;</span> å¯ä¸º "tcp:0" ä»¥é€‰æ‹©ä»»æ„å¼€æ”¾ç«¯å£)
                            localabstract:<span class="hljs-operator">&lt;</span>Unix åŸŸå¥—æ¥å­—åç§°<span class="hljs-operator">&gt;</span>
                            localreserved:<span class="hljs-operator">&lt;</span>Unix åŸŸå¥—æ¥å­—åç§°<span class="hljs-operator">&gt;</span>
                            localfilesystem:<span class="hljs-operator">&lt;</span>Unix åŸŸå¥—æ¥å­—åç§°<span class="hljs-operator">&gt;</span>
 reverse <span class="hljs-comment">--remove è¿œç¨‹åœ°å€ ç§»é™¤ç‰¹å®šçš„åå‘å¥—æ¥å­—è¿æ¥</span>
 reverse <span class="hljs-comment">--remove-all     ç§»é™¤è®¾å¤‡ä¸Šçš„æ‰€æœ‰åå‘å¥—æ¥å­—è¿æ¥</span>
 mdns <span class="hljs-keyword">check</span>               æ£€æŸ¥ mDNS å‘ç°æœåŠ¡æ˜¯å¦å¯ç”¨
 mdns services            åˆ—å‡ºæ‰€æœ‰å·²å‘ç°çš„æœåŠ¡

æ–‡ä»¶ä¼ è¾“ï¼š
 push [<span class="hljs-comment">--sync] [-z ç®—æ³•] [-Z] æœ¬åœ°è·¯å¾„... è¿œç¨‹è·¯å¾„</span>
                           å°†æœ¬åœ°æ–‡ä»¶<span class="hljs-operator">/</span>ç›®å½•å¤åˆ¶åˆ°è®¾å¤‡
                           <span class="hljs-operator">-</span>n: ç©ºè¿è¡Œï¼šæ¨é€æ–‡ä»¶åˆ°è®¾å¤‡ä½†ä¸å­˜å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿ
                           <span class="hljs-operator">-</span>q: ä¸æ˜¾ç¤ºè¿›åº¦ä¿¡æ¯
                           <span class="hljs-operator">-</span>Z: ç¦ç”¨å‹ç¼©
                           <span class="hljs-operator">-</span>z: ä½¿ç”¨æŒ‡å®šç®—æ³•å¯ç”¨å‹ç¼© (<span class="hljs-keyword">any</span><span class="hljs-operator">/</span><span class="hljs-keyword">none</span><span class="hljs-operator">/</span>brotli<span class="hljs-operator">/</span>lz4<span class="hljs-operator">/</span>zstd)
                           <span class="hljs-comment">--sync: ä»…æ¨é€ä¸»æœºå’Œè®¾å¤‡ä¸Šæ—¶é—´æˆ³ä¸åŒçš„æ–‡ä»¶</span>
 pull [<span class="hljs-operator">-</span>a] [<span class="hljs-operator">-</span>z ç®—æ³•] [<span class="hljs-operator">-</span>Z] è¿œç¨‹è·¯å¾„... æœ¬åœ°è·¯å¾„
                           ä»è®¾å¤‡å¤åˆ¶æ–‡ä»¶<span class="hljs-operator">/</span>ç›®å½•
                           <span class="hljs-operator">-</span>a: ä¿ç•™æ–‡ä»¶æ—¶é—´æˆ³å’Œæ¨¡å¼
                           <span class="hljs-operator">-</span>q: ä¸æ˜¾ç¤ºè¿›åº¦ä¿¡æ¯
                           <span class="hljs-operator">-</span>Z: ç¦ç”¨å‹ç¼©
                           <span class="hljs-operator">-</span>z: ä½¿ç”¨æŒ‡å®šç®—æ³•å¯ç”¨å‹ç¼© (<span class="hljs-keyword">any</span><span class="hljs-operator">/</span><span class="hljs-keyword">none</span><span class="hljs-operator">/</span>brotli<span class="hljs-operator">/</span>lz4<span class="hljs-operator">/</span>zstd)
 sync [<span class="hljs-operator">-</span>l] [<span class="hljs-operator">-</span>z ç®—æ³•] [<span class="hljs-operator">-</span>Z] [<span class="hljs-keyword">all</span><span class="hljs-operator">|</span>data<span class="hljs-operator">|</span>odm<span class="hljs-operator">|</span>oem<span class="hljs-operator">|</span>product<span class="hljs-operator">|</span><span class="hljs-keyword">system</span><span class="hljs-operator">|</span>system_ext<span class="hljs-operator">|</span>vendor]
                           å°† $ANDROID_PRODUCT_OUT ä¸­çš„æœ¬åœ°æ„å»ºåŒæ­¥åˆ°è®¾å¤‡ (é»˜è®¤ <span class="hljs-keyword">all</span>)
                           <span class="hljs-operator">-</span>l: åˆ—å‡ºå°†è¦å¤åˆ¶çš„æ–‡ä»¶ï¼Œä½†ä¸å®é™…å¤åˆ¶
                           <span class="hljs-operator">-</span>n: ç©ºè¿è¡Œï¼šæ¨é€æ–‡ä»¶åˆ°è®¾å¤‡ä½†ä¸å­˜å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿ
                           <span class="hljs-operator">-</span>q: ä¸æ˜¾ç¤ºè¿›åº¦ä¿¡æ¯
                           <span class="hljs-operator">-</span>Z: ç¦ç”¨å‹ç¼©
                           <span class="hljs-operator">-</span>z: ä½¿ç”¨æŒ‡å®šç®—æ³•å¯ç”¨å‹ç¼© (<span class="hljs-keyword">any</span><span class="hljs-operator">/</span><span class="hljs-keyword">none</span><span class="hljs-operator">/</span>brotli<span class="hljs-operator">/</span>lz4<span class="hljs-operator">/</span>zstd)

Shellï¼š
 shell [<span class="hljs-operator">-</span>e è½¬ä¹‰å­—ç¬¦] [<span class="hljs-operator">-</span>n] [<span class="hljs-operator">-</span>Tt] [<span class="hljs-operator">-</span>x] [å‘½ä»¤...]
                           è¿è¡Œè¿œç¨‹ shell å‘½ä»¤ï¼ˆå¦‚æœæœªç»™å‡ºå‘½ä»¤åˆ™è¿›å…¥äº¤äº’å¼ shellï¼‰
                           <span class="hljs-operator">-</span>e: é€‰æ‹©è½¬ä¹‰å­—ç¬¦ï¼Œæˆ– "none"ï¼›é»˜è®¤ä¸º <span class="hljs-string">'~'</span>
                           <span class="hljs-operator">-</span>n: ä¸ä»æ ‡å‡†è¾“å…¥è¯»å–
                           <span class="hljs-operator">-</span>T: ç¦ç”¨ä¼ªç»ˆç«¯åˆ†é…
                           <span class="hljs-operator">-</span>t: å¦‚æœåœ¨ç»ˆç«¯ä¸Šåˆ™åˆ†é…ä¼ªç»ˆç«¯ (<span class="hljs-operator">-</span>tt: å¼ºåˆ¶åˆ†é…ä¼ªç»ˆç«¯)
                           <span class="hljs-operator">-</span>x: ç¦ç”¨è¿œç¨‹é€€å‡ºç å’Œæ ‡å‡†è¾“å‡º<span class="hljs-operator">/</span>æ ‡å‡†é”™è¯¯åˆ†ç¦»
 emu å‘½ä»¤                  è¿è¡Œæ¨¡æ‹Ÿå™¨æ§åˆ¶å°å‘½ä»¤

åº”ç”¨å®‰è£…ï¼ˆå¦è¯·å‚è§ `adb shell cmd package help`ï¼‰ï¼š
 install [<span class="hljs-operator">-</span>lrtsdg] [<span class="hljs-comment">--instant] åŒ…å</span>
                           æ¨é€å•ä¸ªåŒ…åˆ°è®¾å¤‡å¹¶å®‰è£…
 install<span class="hljs-operator">-</span>multiple [<span class="hljs-operator">-</span>lrtsdpg] [<span class="hljs-comment">--instant] åŒ…å...</span>
                           æ¨é€å¤šä¸ª APK åˆ°è®¾å¤‡ï¼ˆç”¨äºå•ä¸ªåŒ…ï¼‰å¹¶å®‰è£…å®ƒä»¬
 install<span class="hljs-operator">-</span>multi<span class="hljs-operator">-</span>package [<span class="hljs-operator">-</span>lrtsdpg] [<span class="hljs-comment">--instant] åŒ…å...</span>
                           æ¨é€ä¸€ä¸ªæˆ–å¤šä¸ªåŒ…åˆ°è®¾å¤‡å¹¶ä»¥åŸå­æ“ä½œå®‰è£…å®ƒä»¬
                           <span class="hljs-operator">-</span>r: æ›¿æ¢ç°æœ‰åº”ç”¨
                           <span class="hljs-operator">-</span>t: å…è®¸æµ‹è¯•åŒ…
                           <span class="hljs-operator">-</span>d: å…è®¸ç‰ˆæœ¬ä»£ç é™çº§ï¼ˆä»…é€‚ç”¨äºå¯è°ƒè¯•åŒ…ï¼‰
                           <span class="hljs-operator">-</span>p: éƒ¨åˆ†åº”ç”¨å®‰è£…ï¼ˆä»…é€‚ç”¨äº install<span class="hljs-operator">-</span>multipleï¼‰
                           <span class="hljs-operator">-</span>g: æˆäºˆæ‰€æœ‰è¿è¡Œæ—¶æƒé™
                           <span class="hljs-comment">--abi ABI: è¦†ç›–å¹³å°çš„é»˜è®¤ ABI</span>
                           <span class="hljs-comment">--instant: å°†åº”ç”¨å®‰è£…ä¸ºä¸´æ—¶åº”ç”¨</span>
                           <span class="hljs-comment">--no-streaming: æ€»æ˜¯å…ˆå°† APK æ¨é€åˆ°è®¾å¤‡ï¼Œç„¶åå•ç‹¬è°ƒç”¨åŒ…ç®¡ç†å™¨</span>
                           <span class="hljs-comment">--streaming: å¼ºåˆ¶æµå¼ä¼ è¾“ APK ç›´æ¥åˆ°åŒ…ç®¡ç†å™¨</span>
                           <span class="hljs-comment">--fastdeploy: ä½¿ç”¨å¿«é€Ÿéƒ¨ç½²</span>
                           <span class="hljs-comment">--no-fastdeploy: é˜»æ­¢ä½¿ç”¨å¿«é€Ÿéƒ¨ç½²</span>
                           <span class="hljs-comment">--force-agent: ä½¿ç”¨å¿«é€Ÿéƒ¨ç½²æ—¶å¼ºåˆ¶æ›´æ–°éƒ¨ç½²ä»£ç†</span>
                           <span class="hljs-comment">--date-check-agent: å½“æœ¬åœ°ç‰ˆæœ¬è¾ƒæ–°ä¸”ä½¿ç”¨å¿«é€Ÿéƒ¨ç½²æ—¶æ›´æ–°éƒ¨ç½²ä»£ç†</span>
                           <span class="hljs-comment">--version-check-agent: å½“æœ¬åœ°ç‰ˆæœ¬ä»£ç ä¸åŒä¸”ä½¿ç”¨å¿«é€Ÿéƒ¨ç½²æ—¶æ›´æ–°éƒ¨ç½²ä»£ç†</span>
                           ï¼ˆæ›´å¤šé€‰é¡¹è¯·å‚è§ `adb shell pm help`ã€‚ï¼‰
 uninstall [<span class="hljs-operator">-</span>k] åŒ…å       ä»è®¾å¤‡ç§»é™¤æ­¤åº”ç”¨åŒ…
                           <span class="hljs-string">'-k'</span>: ä¿ç•™æ•°æ®å’Œç¼“å­˜ç›®å½•

è°ƒè¯•ï¼š
 bugreport [è·¯å¾„]          å°†é”™è¯¯æŠ¥å‘Šå†™å…¥ç»™å®šè·¯å¾„ [é»˜è®¤<span class="hljs-operator">=</span>bugreport.zip]ï¼›
                           å¦‚æœè·¯å¾„æ˜¯ä¸€ä¸ªç›®å½•ï¼Œåˆ™é”™è¯¯æŠ¥å‘Šä¿å­˜åœ¨è¯¥ç›®å½•ä¸­ã€‚
                           ä¸æ”¯æŒå‹ç¼©é”™è¯¯æŠ¥å‘Šçš„è®¾å¤‡å°†è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚
 jdwp                     åˆ—å‡ºæ‰¿è½½ JDWP ä¼ è¾“çš„è¿›ç¨‹çš„ PID
 logcat                   æ˜¾ç¤ºè®¾å¤‡æ—¥å¿—ï¼ˆæ›´å¤šé€‰é¡¹è¯·å‚è§ logcat <span class="hljs-comment">--helpï¼‰</span>

å®‰å…¨ï¼š
 disable<span class="hljs-operator">-</span>verity           åœ¨ userdebug ç‰ˆæœ¬ä¸Šç¦ç”¨ dm<span class="hljs-operator">-</span>verity æ£€æŸ¥
 enable<span class="hljs-operator">-</span>verity            åœ¨ userdebug ç‰ˆæœ¬ä¸Šé‡æ–°å¯ç”¨ dm<span class="hljs-operator">-</span>verity æ£€æŸ¥
 keygen æ–‡ä»¶               ç”Ÿæˆ adb å…¬é’¥<span class="hljs-operator">/</span>ç§é’¥ï¼›ç§é’¥å­˜å‚¨åœ¨æ–‡ä»¶ä¸­ï¼Œ

è„šæœ¬ï¼š
 wait<span class="hljs-operator">-</span><span class="hljs-keyword">for</span>[<span class="hljs-operator">-</span>ä¼ è¾“ç±»å‹]<span class="hljs-operator">-</span>çŠ¶æ€...
                           ç­‰å¾…è®¾å¤‡è¿›å…¥ç»™å®šçŠ¶æ€
                           çŠ¶æ€ï¼šdevice, recovery, rescue, sideload, bootloader, æˆ– <span class="hljs-keyword">disconnect</span>
                           ä¼ è¾“ç±»å‹ï¼šusb, <span class="hljs-keyword">local</span>, æˆ– <span class="hljs-keyword">any</span> [é»˜è®¤<span class="hljs-operator">=</span><span class="hljs-keyword">any</span>]
 <span class="hljs-keyword">get</span><span class="hljs-operator">-</span>state                æ‰“å° offline <span class="hljs-operator">|</span> bootloader <span class="hljs-operator">|</span> device
 <span class="hljs-keyword">get</span><span class="hljs-operator">-</span>serialno             æ‰“å° <span class="hljs-operator">&lt;</span>åºåˆ—å·<span class="hljs-operator">&gt;</span>
 <span class="hljs-keyword">get</span><span class="hljs-operator">-</span>devpath              æ‰“å° <span class="hljs-operator">&lt;</span>è®¾å¤‡è·¯å¾„<span class="hljs-operator">&gt;</span>
 remount [<span class="hljs-operator">-</span>R]             ä»¥è¯»å†™æ¨¡å¼é‡æ–°æŒ‚è½½åˆ†åŒºã€‚å¦‚æœéœ€è¦é‡å¯ï¼Œ<span class="hljs-operator">-</span>R å°†è‡ªåŠ¨é‡å¯è®¾å¤‡ã€‚
 reboot [bootloader<span class="hljs-operator">|</span>recovery<span class="hljs-operator">|</span>sideload<span class="hljs-operator">|</span>sideload<span class="hljs-operator">-</span>auto<span class="hljs-operator">-</span>reboot]
                           é‡å¯è®¾å¤‡ï¼›é»˜è®¤ä¸ºå¯åŠ¨ç³»ç»Ÿæ˜ åƒï¼Œä½†ä¹Ÿæ”¯æŒå¯åŠ¨åˆ° bootloader å’Œ recoveryã€‚sideload ä¼šé‡å¯åˆ° recovery å¹¶è‡ªåŠ¨å¯åŠ¨ sideload æ¨¡å¼ï¼Œsideload<span class="hljs-operator">-</span>auto<span class="hljs-operator">-</span>reboot ç›¸åŒä½†åœ¨ sideload åé‡å¯ã€‚
 sideload OTAåŒ…            ä¾§è½½ç»™å®šçš„å®Œæ•´ OTA åŒ…
 root                     ä»¥ root æƒé™é‡å¯ adbd
 unroot                   ä¸ä»¥ root æƒé™é‡å¯ adbd
 usb                      é‡å¯ adbd å¹¶åœ¨ USB ä¸Šç›‘å¬
 tcpip ç«¯å£                é‡å¯ adbd å¹¶åœ¨æŒ‡å®š TCP ç«¯å£ä¸Šç›‘å¬

å†…éƒ¨è°ƒè¯•ï¼š
 <span class="hljs-keyword">start</span><span class="hljs-operator">-</span>server             ç¡®ä¿æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
 kill<span class="hljs-operator">-</span>server              å¦‚æœæœåŠ¡å™¨æ­£åœ¨è¿è¡Œåˆ™ç»ˆæ­¢å®ƒ
 reconnect                ä»ä¸»æœºç«¯è¸¢æ‰è¿æ¥ä»¥å¼ºåˆ¶é‡æ–°è¿æ¥
 reconnect device         ä»è®¾å¤‡ç«¯è¸¢æ‰è¿æ¥ä»¥å¼ºåˆ¶é‡æ–°è¿æ¥
 reconnect offline        é‡ç½® offline<span class="hljs-operator">/</span>unauthorized è®¾å¤‡ä»¥å¼ºåˆ¶é‡æ–°è¿æ¥

USBï¼š
 attach                   é™„åŠ ä¸€ä¸ªå·²åˆ†ç¦»çš„ USB è®¾å¤‡
 detach                   ä»ä¸€ä¸ª USB è®¾å¤‡åˆ†ç¦»ï¼Œä»¥å…è®¸å…¶ä»–è¿›ç¨‹ä½¿ç”¨

ç¯å¢ƒå˜é‡ï¼š
 $ADB_TRACE
                           è¦è®°å½•çš„è°ƒè¯•ä¿¡æ¯çš„é€—å·<span class="hljs-operator">/</span>ç©ºæ ¼åˆ†éš”åˆ—è¡¨ï¼š
                           <span class="hljs-keyword">all</span>,adb,sockets,packets,rwx,usb,sync,sysdeps,transport,jdwp,services,auth,fdevent,shell,incremental
 $ADB_VENDOR_KEYS         ä»¥å†’å·åˆ†éš”çš„å¯†é’¥åˆ—è¡¨ï¼ˆæ–‡ä»¶æˆ–ç›®å½•ï¼‰
 $ANDROID_SERIAL          è¦è¿æ¥åˆ°çš„åºåˆ—å·ï¼ˆå‚è§ <span class="hljs-operator">-</span>s é€‰é¡¹ï¼‰
 $ANDROID_LOG_TAGS        ä¾› logcat ä½¿ç”¨çš„æ ‡ç­¾ï¼ˆå‚è§ logcat <span class="hljs-comment">--helpï¼‰</span>
 $ADB_LOCAL_TRANSPORT_MAX_PORT æœ€å¤§æ¨¡æ‹Ÿå™¨æ‰«æç«¯å£ï¼ˆé»˜è®¤ <span class="hljs-number">5585</span>ï¼Œ<span class="hljs-number">16</span> ä¸ªæ¨¡æ‹Ÿå™¨ï¼‰
 $ADB_MDNS_AUTO_CONNECT   å…è®¸è‡ªåŠ¨è¿æ¥çš„ mDNS æœåŠ¡é€—å·åˆ†éš”åˆ—è¡¨ï¼ˆé»˜è®¤ adb<span class="hljs-operator">-</span>tls<span class="hljs-operator">-</span><span class="hljs-keyword">connect</span>ï¼‰
</code></pre>
<p>åœ¨çº¿æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fandroid.googlesource.com%2Fplatform%2Fpackages%2Fmodules%2Fadb%2F%2B%2Frefs%2Fheads%2Fmain%2Fdocs%2Fuser%2Fadb.1.md" target="_blank" title="https://android.googlesource.com/platform/packages/modules/adb/+/refs/heads/main/docs/user/adb.1.md" ref="nofollow noopener noreferrer">android.googlesource.com/platform/paâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†™åŸ‹ç‚¹ã€æ‰’ SDKã€æ”¹æ¡†æ¶ï¼šJS å‡½æ•°å¤å†™ 10 è¿æ‹›å®æˆ˜æ‰‹å†Œ]]></title>    <link>https://juejin.cn/post/7578732288517111859</link>    <guid>https://juejin.cn/post/7578732288517111859</guid>    <pubDate>2025-12-02T03:12:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578732288517111859" data-draft-id="7578780780026953737" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†™åŸ‹ç‚¹ã€æ‰’ SDKã€æ”¹æ¡†æ¶ï¼šJS å‡½æ•°å¤å†™ 10 è¿æ‹›å®æˆ˜æ‰‹å†Œ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T03:12:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‰¹çº§ä¸šåŠ¡ä¸“å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2101921961481512"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†™åŸ‹ç‚¹ã€æ‰’ SDKã€æ”¹æ¡†æ¶ï¼šJS å‡½æ•°å¤å†™ 10 è¿æ‹›å®æˆ˜æ‰‹å†Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2101921961481512/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‰¹çº§ä¸šåŠ¡ä¸“å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:12:39.000Z" title="Tue Dec 02 2025 03:12:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># JS ä¸­â€œå¤å†™å‡½æ•°â€çš„ 10 ç§å§¿åŠ¿ï¼ˆé™„å®Œæ•´å¯è¿è¡Œ Demoï¼‰</span>

åœ¨å‰ç«¯å·¥ç¨‹é‡Œï¼Œâ€œå¤å†™ä¸€ä¸ªå‡½æ•°â€ï¼ˆHook / Patch / Overrideï¼‰æ˜¯éå¸¸å¸¸è§çš„éœ€æ±‚ï¼Œå°¤å…¶æ˜¯åœ¨ï¼š

<span class="hljs-bullet">-</span> è°ƒè¯•é»‘ç›’ SDK
<span class="hljs-bullet">-</span> åšç›‘æ§åŸ‹ç‚¹
<span class="hljs-bullet">-</span> æ”¹ç¬¬ä¸‰æ–¹åº“è¡Œä¸ºä½†åˆä¸èƒ½ç›´æ¥æ”¹æºç 

æœ¬æ–‡æŠŠå¸¸è§çš„ 10 ç§æ‰‹æ³•æ•´ç†æˆä¸€ä¸ªâ€œæ­¦å™¨æ¸…å•â€ï¼Œ<span class="hljs-strong">**æ¯ç§éƒ½ç»™å‡ºå¯ç›´æ¥è·‘çš„ Demo**</span>ï¼Œæ–¹ä¾¿ä½ å¤åˆ¶åˆ°æ§åˆ¶å° / Node é‡Œè¯•ã€‚

---

<span class="hljs-section">## ğŸŸ¦ ä¸€ã€ç›´æ¥è¦†å†™ï¼šæœ€ç®€å•ç²—æš´</span>

<span class="hljs-strong">**æ€è·¯**</span>ï¼šå¦‚æœå‡½æ•°æœ¬æ¥å°±æ˜¯æŸä¸ªå¯¹è±¡ä¸Šçš„æ–¹æ³•ï¼Œç›´æ¥é‡æ–°èµ‹å€¼å³å¯ã€‚

<span class="hljs-section">### ç¤ºä¾‹åœºæ™¯</span>

å·²æœ‰ä¸€ä¸ªä¸šåŠ¡å¯¹è±¡ï¼š

<span class="hljs-code">```js
const userService = {
  getUserName(id) {
    console.log('[orig] getUserName', id);
    return 'Alice';
  }
};

// åŸå§‹è°ƒç”¨
console.log('--- åŸå§‹è°ƒç”¨ ---');
console.log(userService.getUserName(1));
</span></code></pre>
<p>ç°åœ¨æƒ³<strong>å®Œå…¨æ›¿æ¢</strong>æ‰ <code>getUserName</code> çš„å®ç°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç›´æ¥è¦†å†™</span>
userService.<span class="hljs-property">getUserName</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">id</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[new] getUserName'</span>, id);
  <span class="hljs-keyword">return</span> <span class="hljs-string">'Bob'</span>;
};

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- è¦†å†™å ---'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userService.<span class="hljs-title function_">getUserName</span>(<span class="hljs-number">1</span>));
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ç®€å•ç›´æ¥</li>
<li>ä¸ä¿ç•™åŸé€»è¾‘ï¼ˆé™¤éä½ è‡ªå·±å…ˆå­˜ä¸€ä»½å¼•ç”¨ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-0">ğŸŸ© äºŒã€Monkey Patchï¼šä¿ç•™åŸé€»è¾‘å†â€œåŠ ä¸€å±‚å£³â€ï¼ˆæœ€å¸¸ç”¨ï¼‰</h2>
<p><strong>æ€è·¯</strong>ï¼šä¿å­˜åŸå‡½æ•°å¼•ç”¨ â†’ ç”¨åŒåå‡½æ•°åŒ…è£…ä¸€å±‚ã€‚</p>
<h3 data-id="heading-1">ç¤ºä¾‹ï¼šç»™ SDK æ–¹æ³•åŠ åŸ‹ç‚¹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ª SDK</span>
<span class="hljs-keyword">const</span> sdk = {
  <span class="hljs-title function_">track</span>(<span class="hljs-params">eventName, payload</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[orig track]'</span>, eventName, payload);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span> };
  }
};

<span class="hljs-comment">// åŸå§‹ä½¿ç”¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- åŸå§‹è°ƒç”¨ ---'</span>);
sdk.<span class="hljs-title function_">track</span>(<span class="hljs-string">'page_view'</span>, { <span class="hljs-attr">path</span>: <span class="hljs-string">'/home'</span> });

<span class="hljs-comment">// å¼€å§‹ Monkey Patch</span>
<span class="hljs-keyword">const</span> origTrack = sdk.<span class="hljs-property">track</span>;

sdk.<span class="hljs-property">track</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[before track]'</span>, ...args);

  <span class="hljs-keyword">const</span> result = origTrack.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[after track]'</span>, result);
  <span class="hljs-keyword">return</span> result;
};

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- Patch ä¹‹å ---'</span>);
sdk.<span class="hljs-title function_">track</span>(<span class="hljs-string">'page_view'</span>, { <span class="hljs-attr">path</span>: <span class="hljs-string">'/detail'</span> });
</code></pre>
<p><strong>é€‚ç”¨</strong>ï¼š</p>
<ul>
<li>æƒ³åœ¨åŸé€»è¾‘å‰åâ€œæ’å…¥â€è‡ªå·±çš„é€»è¾‘</li>
<li>Hook é»‘ç›’ SDKã€ç›‘æ§ã€åŸ‹ç‚¹ç­‰</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸŸ§ ä¸‰ã€Proxyï¼šæ‹¦æˆªæ•´ä¸ªå¯¹è±¡ï¼ˆé«˜çº§é»‘ç›’åˆ†æï¼‰</h2>
<p><strong>æ€è·¯</strong>ï¼šç”¨ <code>Proxy</code> ä»£ç†æ•´ä¸ªå¯¹è±¡ï¼Œåœ¨ <code>get</code> é‡Œç»Ÿä¸€æ‹¦æˆªå‡½æ•°è°ƒç”¨ã€‚</p>
<h3 data-id="heading-3">ç¤ºä¾‹ï¼šæ‹¦æˆªæ‰€æœ‰æ–¹æ³•è°ƒç”¨åšæ—¥å¿—</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸€ä¸ªâ€œé»‘ç›’â€å¯¹è±¡ï¼Œæ–¹æ³•åå¯èƒ½ä¼šå˜</span>
<span class="hljs-keyword">const</span> api = {
  <span class="hljs-title function_">login</span>(<span class="hljs-params">user, pwd</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'login...'</span>, user);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">token</span>: <span class="hljs-string">'xxx'</span> };
  },
  <span class="hljs-title function_">logout</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'logout...'</span>);
  }
};

<span class="hljs-comment">// ç”¨ Proxy åŒ…ä¸€å±‚</span>
<span class="hljs-keyword">const</span> apiWithLog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(api, {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop, receiver</span>) {
    <span class="hljs-keyword">const</span> value = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop, receiver);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Proxy] call <span class="hljs-subst">${<span class="hljs-built_in">String</span>(prop)}</span> with`</span>, args);
        <span class="hljs-keyword">const</span> result = value.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Proxy] <span class="hljs-subst">${<span class="hljs-built_in">String</span>(prop)}</span> result`</span>, result);
        <span class="hljs-keyword">return</span> result;
      };
    }

    <span class="hljs-keyword">return</span> value;
  }
});

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼è·ŸåŸæ¥ä¸€æ ·</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- ä½¿ç”¨ Proxy å ---'</span>);
apiWithLog.<span class="hljs-title function_">login</span>(<span class="hljs-string">'alice'</span>, <span class="hljs-string">'123456'</span>);
apiWithLog.<span class="hljs-title function_">logout</span>();
</code></pre>
<p><strong>é€‚ç”¨</strong>ï¼š</p>
<ul>
<li>ä½ <strong>ä¸çŸ¥é“å…·ä½“æ–¹æ³•å</strong>ï¼ˆSDK é‡Œä¸€å †æ–¹æ³•ï¼‰</li>
<li>æƒ³ç»Ÿä¸€æ‹¦æˆªæ‰€æœ‰æ–¹æ³•è°ƒç”¨ï¼ˆsniffï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-4">ğŸŸ¨ å››ã€<code>Object.defineProperty</code>ï¼šå¼ºè¡Œæ”¹ getter / setter / ä¸å¯æšä¸¾å±æ€§</h2>
<p><strong>æ€è·¯</strong>ï¼šå½“å±æ€§ä¸å¯å†™ã€æˆ–æ˜¯ getter / setterï¼Œéœ€è¦ç”¨ <code>defineProperty</code> æ“ä½œæè¿°ç¬¦ã€‚</p>
<h3 data-id="heading-5">ç¤ºä¾‹ 1ï¼šæŠŠåªè¯»å±æ€§æ”¹æˆå¯å†™å‡½æ•°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {};

<span class="hljs-comment">// åˆå§‹å®šä¹‰ï¼šåªè¯»å±æ€§</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, <span class="hljs-string">'foo'</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-string">'readonly'</span>,
  <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŸå§‹ foo ='</span>, obj.<span class="hljs-property">foo</span>);

<span class="hljs-comment">// ç›´æ¥èµ‹å€¼ä¼šå¤±è´¥ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹æŠ¥é”™ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹æ— æ•ˆï¼‰</span>
obj.<span class="hljs-property">foo</span> = <span class="hljs-string">'new'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›´æ¥èµ‹å€¼å foo ='</span>, obj.<span class="hljs-property">foo</span>); <span class="hljs-comment">// è¿˜æ˜¯ readonly</span>

<span class="hljs-comment">// ç”¨ defineProperty å¼ºè¡Œæ”¹æˆå‡½æ•°</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, <span class="hljs-string">'foo'</span>, {
  <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'I am new foo()'</span>);
  }
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- æ”¹æˆå‡½æ•°ä¹‹å ---'</span>);
obj.<span class="hljs-title function_">foo</span>();
</code></pre>
<h3 data-id="heading-6">ç¤ºä¾‹ 2ï¼šç”¨ getter åšæ‡’åŠ è½½ Hook</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> service = {};

<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(service, <span class="hljs-string">'expensiveApi'</span>, {
  <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[getter] åˆå§‹åŒ– expensiveApi'</span>);
    <span class="hljs-comment">// çœŸæ­£åˆ›å»ºå¯¹è±¡</span>
    <span class="hljs-keyword">const</span> realApi = {
      <span class="hljs-title function_">call</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'real api called'</span>);
      }
    };
    <span class="hljs-comment">// ç”¨æ™®é€šå±æ€§æ›¿æ¢æ‰ getterï¼ˆåªåˆå§‹åŒ–ä¸€æ¬¡ï¼‰</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(service, <span class="hljs-string">'expensiveApi'</span>, {
      <span class="hljs-attr">value</span>: realApi,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">false</span>
    });
    <span class="hljs-keyword">return</span> realApi;
  }
});

<span class="hljs-comment">// ç¬¬ä¸€æ¬¡è®¿é—®ä¼šè§¦å‘ getter</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- ç¬¬ä¸€æ¬¡è®¿é—® ---'</span>);
service.<span class="hljs-property">expensiveApi</span>.<span class="hljs-title function_">call</span>();

<span class="hljs-comment">// ç¬¬äºŒæ¬¡è®¿é—®ç›´æ¥ç”¨ç¼“å­˜</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- ç¬¬äºŒæ¬¡è®¿é—® ---'</span>);
service.<span class="hljs-property">expensiveApi</span>.<span class="hljs-title function_">call</span>();
</code></pre>
<hr/>
<h2 data-id="heading-7">ğŸŸ¥ äº”ã€Hook å…¨å±€å†…ç½®æ–¹æ³•ï¼šç½‘ç»œã€äº‹ä»¶ã€è·¯ç”±ç­‰ï¼ˆéå¸¸å¼ºï¼‰</h2>
<h3 data-id="heading-8">ç¤ºä¾‹ 1ï¼šæ‹¦æˆª <code>fetch</code>ï¼ˆæµè§ˆå™¨ï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¿å­˜åŸå§‹ fetch</span>
<span class="hljs-keyword">const</span> origFetch = <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span>;

<span class="hljs-comment">// è¦†å†™</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span> = <span class="hljs-keyword">async</span> (...args) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Hook fetch] è¯·æ±‚å‚æ•°:'</span>, args);

  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">origFetch</span>(...args);

  <span class="hljs-comment">// å¤åˆ¶ä¸€ä»½ Response æŸ¥çœ‹å†…å®¹ï¼ˆæ³¨æ„ï¼šè¿™é‡Œåªæ˜¯ç¤ºæ„ï¼Œå®é™…éœ€è€ƒè™‘æµåªèƒ½è¯»ä¸€æ¬¡ï¼‰</span>
  <span class="hljs-keyword">const</span> clone = res.<span class="hljs-title function_">clone</span>();
  clone.<span class="hljs-title function_">text</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">text</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Hook fetch] å“åº”æ–‡æœ¬æˆªæ–­:'</span>, text.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>));
  });

  <span class="hljs-keyword">return</span> res;
};

<span class="hljs-comment">// ä½¿ç”¨ï¼šä¹‹åæ‰€æœ‰ fetch éƒ½ä¼šç»è¿‡ Hook</span>
<span class="hljs-comment">// fetch('https://jsonplaceholder.typicode.com/todos/1');</span>
</code></pre>
<h3 data-id="heading-9">ç¤ºä¾‹ 2ï¼šæ‹¦æˆªæ‰€æœ‰ DOM äº‹ä»¶ç›‘å¬</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> origAdd = <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addEventListener</span>;

<span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addEventListener</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">type, listener, options</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Hook addEventListener]'</span>, type, <span class="hljs-string">'on'</span>, <span class="hljs-variable language_">this</span>);

  <span class="hljs-comment">// ä¹Ÿå¯ä»¥åœ¨è¿™é‡ŒåŒ…ä¸€å±‚ listenerï¼Œå®ç°äº‹ä»¶åŸ‹ç‚¹</span>
  <span class="hljs-keyword">return</span> origAdd.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, type, listener, options);
};

<span class="hljs-comment">// Demoï¼šæ·»åŠ ä¸€ä¸ª click äº‹ä»¶</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'body clicked'</span>);
});
</code></pre>
<p><strong>è¿˜èƒ½ Hook</strong>ï¼š</p>
<ul>
<li><code>XMLHttpRequest.prototype.send</code></li>
<li><code>WebSocket.prototype.send</code></li>
<li><code>history.pushState / replaceState</code>ï¼ˆå‰ç«¯è·¯ç”±ç›‘æ§ï¼‰</li>
<li><code>console.log</code>ï¼ˆè°ƒè¯•åœºæ™¯ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸŸª å…­ã€ä»£ç†æ¨¡å—åŠ è½½ï¼š<code>require</code> Hook / æ„å»ºæœŸ alias</h2>
<h3 data-id="heading-11">6.1 Nodeï¼šHook <code>require</code>ï¼ˆCommonJSï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// hook-require.js</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Module</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'module'</span>);
<span class="hljs-keyword">const</span> originalRequire = <span class="hljs-title class_">Module</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">require</span>;

<span class="hljs-title class_">Module</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">require</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">path</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[require]'</span>, path);
  <span class="hljs-keyword">const</span> <span class="hljs-built_in">exports</span> = originalRequire.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);

  <span class="hljs-comment">// é’ˆå¯¹æŒ‡å®šæ¨¡å—åš Monkey Patch</span>
  <span class="hljs-keyword">if</span> (path === <span class="hljs-string">'./sdk'</span>) {
    <span class="hljs-keyword">const</span> origDo = <span class="hljs-built_in">exports</span>.<span class="hljs-property">doSomething</span>;
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">doSomething</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[patched sdk.doSomething]'</span>, args);
      <span class="hljs-keyword">return</span> origDo.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
    };
  }

  <span class="hljs-keyword">return</span> <span class="hljs-built_in">exports</span>;
};

<span class="hljs-comment">// ä¸»å…¥å£</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">'./hook-require'</span>);
<span class="hljs-keyword">const</span> sdk = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./sdk'</span>);

sdk.<span class="hljs-title function_">doSomething</span>(<span class="hljs-string">'hello'</span>);
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// sdk.js</span>
<span class="hljs-built_in">exports</span>.<span class="hljs-property">doSomething</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">msg</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[orig sdk.doSomething]'</span>, msg);
};
</code></pre>
<p>è¿è¡Œ <code>node main.js</code> å³å¯çœ‹åˆ° require æ—¥å¿— + patch æ•ˆæœã€‚</p>
<hr/>
<h3 data-id="heading-12">6.2 å‰ç«¯ï¼šé€šè¿‡ alias æ›¿æ¢æ•´ä¸ªæ¨¡å—</h3>
<p>ä»¥ Vite ä¸ºä¾‹ï¼ˆWebpack æ€è·¯ç±»ä¼¼ï¼‰ã€‚</p>
<h4 data-id="heading-13">æ­¥éª¤ 1ï¼šé…ç½® alias</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'some-sdk'</span>: <span class="hljs-string">'/src/sdk-wrapped.js'</span> <span class="hljs-comment">// ç”¨ä½ è‡ªå·±çš„ wrapper æ›¿æ¢åŸ SDK</span>
    }
  }
});
</code></pre>
<h4 data-id="heading-14">æ­¥éª¤ 2ï¼šåœ¨ wrapper é‡Œå† Monkey Patch</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/sdk-wrapped.js</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> realSdk <span class="hljs-keyword">from</span> <span class="hljs-string">'some-sdk-original'</span>; <span class="hljs-comment">// å‡è®¾è¿™æ˜¯åŸ SDK åŒ…å</span>

<span class="hljs-keyword">const</span> sdk = { ...realSdk };

<span class="hljs-keyword">const</span> origInit = sdk.<span class="hljs-property">init</span>;
sdk.<span class="hljs-property">init</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[wrapped sdk.init]'</span>, args);
  <span class="hljs-keyword">return</span> origInit.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> sdk;
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'some-sdk-original'</span>; <span class="hljs-comment">// å…¶ä½™åŸæ ·å¯¼å‡º</span>
</code></pre>
<p>ä¸šåŠ¡ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// import sdk from 'some-sdk'; // å®é™…æ‹¿åˆ°çš„æ˜¯ sdk-wrapped.js</span>
<span class="hljs-comment">// sdk.init(...);</span>
</code></pre>
<hr/>
<h2 data-id="heading-15">ğŸŸ« ä¸ƒã€ES6 <code>class</code> ç»§æ‰¿ï¼šåœ¨å¯æ§æ¡†æ¶é‡Œâ€œæ­£ç»Ÿæ‰©å±•â€</h2>
<p><strong>æ€è·¯</strong>ï¼šå½“ä½ èƒ½æ§åˆ¶å®ä¾‹åˆ›å»ºæ—¶ï¼Œç›´æ¥ç”¨ <code>extends</code> ç»§æ‰¿åŸç±»ï¼Œè¦†å†™æ–¹æ³•å¹¶æŒ‰éœ€ <code>super.foo()</code>ã€‚</p>
<h3 data-id="heading-16">ç¤ºä¾‹ï¼šæ‰©å±•ä¸€ä¸ª UI ç»„ä»¶ç±»</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Button</span> {
  <span class="hljs-title function_">click</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Button] clicked'</span>);
  }
}

<span class="hljs-comment">// åŸå§‹ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> btn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Button</span>();
btn.<span class="hljs-title function_">click</span>();

<span class="hljs-comment">// æ–°ç±»ï¼šåœ¨åŸ click å‰ååŠ é€»è¾‘</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LogButton</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Button</span> {
  <span class="hljs-title function_">click</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[LogButton] before click'</span>);
    <span class="hljs-keyword">const</span> result = <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">click</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[LogButton] after click'</span>);
    <span class="hljs-keyword">return</span> result;
  }
}

<span class="hljs-keyword">const</span> logBtn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LogButton</span>();
logBtn.<span class="hljs-title function_">click</span>();
</code></pre>
<p><strong>é€‚åˆ</strong>ï¼š</p>
<ul>
<li>ä½ èƒ½è‡ªå·± new å­ç±»ï¼Œè€Œä¸æ˜¯æ¡†æ¶å†…éƒ¨å¸®ä½  new</li>
<li>æ¯”å¦‚å†…éƒ¨ä¸šåŠ¡ç±»ã€è‡ªå·±å°è£…çš„ç»„ä»¶ä½“ç³»</li>
</ul>
<hr/>
<h2 data-id="heading-17">ğŸŸ© å…«ã€<code>Proxy</code> + <code>construct</code>ï¼šæ‹¦æˆª <code>new</code> çš„æ„é€ è¡Œä¸º</h2>
<p><strong>æ€è·¯</strong>ï¼šç”¨ <code>Proxy</code> ä»£ç†â€œç±»æœ¬èº«â€ï¼Œåœ¨ <code>construct</code> é‡Œæ‹¦æˆªæ‰€æœ‰å®ä¾‹åˆ›å»ºã€‚</p>
<h3 data-id="heading-18">ç¤ºä¾‹ï¼šç»™æ¯ä¸ªå®ä¾‹è‡ªåŠ¨æ‰“ Patch</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Service</span> {
  <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Service.foo]'</span>);
  }
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">PatchedService</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(<span class="hljs-title class_">Service</span>, {
  <span class="hljs-title function_">construct</span>(<span class="hljs-params">target, args, newTarget</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Proxy construct] åˆ›å»º Service å®ä¾‹ï¼Œå‚æ•°:'</span>, args);

    <span class="hljs-comment">// åˆ›å»ºåŸå§‹å®ä¾‹</span>
    <span class="hljs-keyword">const</span> instance = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">construct</span>(target, args, newTarget);

    <span class="hljs-comment">// ç»™å®ä¾‹æ‰“è¡¥ä¸</span>
    <span class="hljs-keyword">const</span> origFoo = instance.<span class="hljs-property">foo</span>;
    instance.<span class="hljs-property">foo</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...fooArgs</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[patched foo] before'</span>, fooArgs);
      <span class="hljs-keyword">const</span> result = origFoo.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, fooArgs);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[patched foo] after'</span>, result);
      <span class="hljs-keyword">return</span> result;
    };

    <span class="hljs-keyword">return</span> instance;
  }
});

<span class="hljs-comment">// ä¹‹åç»Ÿä¸€ç”¨ PatchedServiceï¼Œè€Œä¸æ˜¯ Service</span>
<span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PatchedService</span>();
s.<span class="hljs-title function_">foo</span>();
</code></pre>
<p><strong>é€‚åˆ</strong>ï¼š</p>
<ul>
<li>ç¬¬ä¸‰æ–¹åº“æš´éœ²çš„æ˜¯â€œç±»â€ï¼Œä½ å¯ä»¥æ§åˆ¶ <code>new</code> çš„åœ°æ–¹</li>
<li>æƒ³è®©<strong>æ‰€æœ‰å®ä¾‹</strong>éƒ½åº”ç”¨åŒä¸€å¥— Patch</li>
</ul>
<hr/>
<h2 data-id="heading-19">ğŸŸ¦ ä¹ã€Hook åŸå‹ï¼šå¯¹æ‰€æœ‰å®ä¾‹ç”Ÿæ•ˆ</h2>
<p><strong>æ€è·¯</strong>ï¼šç›´æ¥æ”¹ <code>Class.prototype.xxx</code> æˆ–å†…ç½®ç±»å‹åŸå‹ï¼Œä¾‹å¦‚ <code>Array.prototype.push</code>ã€‚</p>
<h3 data-id="heading-20">ç¤ºä¾‹ 1ï¼šæ”¹è‡ªå®šä¹‰ç±»çš„åŸå‹æ–¹æ³•</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHi</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hi, I am'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
};

<span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'Alice'</span>);
p1.<span class="hljs-title function_">sayHi</span>();

<span class="hljs-comment">// Patch åŸå‹</span>
<span class="hljs-keyword">const</span> origSayHi = <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHi</span>;

<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHi</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[patched] before sayHi'</span>);
  origSayHi.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[patched] after sayHi'</span>);
};

<span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'Bob'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- Patch ä¹‹å ---'</span>);
p1.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// æ—§å®ä¾‹ä¹Ÿä¼šå—å½±å“</span>
p2.<span class="hljs-title function_">sayHi</span>();
</code></pre>
<h3 data-id="heading-21">ç¤ºä¾‹ 2ï¼šç»™æ‰€æœ‰æ•°ç»„çš„ <code>push</code> æ‰“æ—¥å¿—ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> origPush = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span>;

<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...items</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Array.push patched] this ='</span>, <span class="hljs-variable language_">this</span>, <span class="hljs-string">'items ='</span>, items);
  <span class="hljs-keyword">return</span> origPush.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, items);
};

<span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];
arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">3</span>);  <span class="hljs-comment">// ä¼šæ‰“å°æ—¥å¿—</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šæ”¹å†…ç½®åŸå‹å½±å“èŒƒå›´éå¸¸å¤§ï¼Œè¦åœ¨å¯æ§ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-22">ğŸŸ£ åã€åŠ¨æ€æ³¨å…¥ <code>&lt;script&gt;</code>ï¼šåœ¨ä¸èƒ½æ”¹æºç æ—¶å¤å†™å…¨å±€å‡½æ•°</h2>
<p><strong>æ€è·¯</strong>ï¼šåœ¨æµè§ˆå™¨é€šè¿‡è„šæœ¬æ³¨å…¥çš„æ–¹å¼è¦†ç›–æŸä¸ªå…¨å±€å‡½æ•°ï¼ˆæ²¹çŒ´è„šæœ¬ã€Chrome æ’ä»¶å¸¸ç”¨ï¼‰ã€‚</p>
<h3 data-id="heading-23">ç¤ºä¾‹ï¼šå¤å†™é¡µé¢é‡Œå·²æœ‰çš„ <code>window.someFn</code></h3>
<p>å‡è®¾ç›®æ ‡é¡µé¢æœ‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">window</span>.<span class="hljs-property">someFn</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[page] someFn'</span>);
};
</code></pre>
<p>ä½ åœ¨è‡ªå·±çš„è„šæœ¬é‡Œæ³¨å…¥ä¸€æ®µï¼š</p>
<pre><code class="hljs language-js" lang="js">(<span class="hljs-keyword">function</span> <span class="hljs-title function_">inject</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);

  script.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
    (function () {
      const orig = window.someFn;
      window.someFn = function (...args) {
        console.log('[injected] before someFn', args);
        const result = orig &amp;&amp; orig.apply(this, args);
        console.log('[injected] after someFn', result);
        return result;
      };
    })();
  `</span>;

  <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">appendChild</span>(script);
  script.<span class="hljs-title function_">remove</span>();
})();
</code></pre>
<p>æ‰§è¡Œåï¼Œé¡µé¢ä¸­<strong>æ‰€æœ‰å¯¹ <code>someFn</code> çš„è°ƒç”¨</strong>éƒ½ä¼šèµ°ä½ æ³¨å…¥çš„ç‰ˆæœ¬ã€‚</p>
<p><strong>é€‚ç”¨</strong>ï¼š</p>
<ul>
<li>ä½ ä¸èƒ½æ”¹é¡µé¢æºç ï¼Œä½†èƒ½æ³¨å…¥ JSï¼ˆæ²¹çŒ´è„šæœ¬ / æµè§ˆå™¨æ‰©å±• / WebView æ³¨å…¥ç­‰ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-24">ğŸ”¥ æ€»ç»“ï¼šå¤å†™å‡½æ•°çš„â€œæ­¦å™¨æ¸…å•â€</h2>




























































<table><thead><tr><th>æ–¹æ³•</th><th>èƒ½åŠ›/å¤æ‚åº¦</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td>ç›´æ¥è¦†å†™</td><td>æœ€ç®€å•</td><td>ä½ èƒ½ç›´æ¥è®¿é—®å¯¹è±¡å’Œæ–¹æ³•å</td></tr><tr><td>Monkey Patch</td><td>â­æœ€å¸¸ç”¨</td><td>Hook SDKã€åŸ‹ç‚¹ã€è°ƒè¯•</td></tr><tr><td>Proxyï¼ˆæ‹¦æˆªå¯¹è±¡ï¼‰</td><td>â­é«˜çº§é»‘ç›’åˆ†æ</td><td>ä¸çŸ¥é“å…·ä½“æ–¹æ³•åï¼Œæƒ³å…¨é‡ sniff</td></tr><tr><td><code>defineProperty</code></td><td>å¼ºåŠ›</td><td>åªè¯»å±æ€§ã€getter/setter ä»£ç†</td></tr><tr><td>Hook å…¨å±€ API</td><td>â­éå¸¸å¼º</td><td>ç½‘ç»œã€äº‹ä»¶ã€è·¯ç”±ã€æ—¥å¿—ç›‘æ§</td></tr><tr><td>require Hook / alias</td><td>æ„å»ºæœŸ</td><td>æ›¿æ¢æ•´ä¸ª SDK æ¨¡å—</td></tr><tr><td><code>class</code> ç»§æ‰¿</td><td>æ­£ç»Ÿæ‰©å±•</td><td>è‡ªå·±å¯æ§çš„ç±»/ç»„ä»¶</td></tr><tr><td><code>Proxy</code> + <code>construct</code></td><td>é«˜çº§</td><td>æ‹¦æˆªæ‰€æœ‰å®ä¾‹çš„åˆ›å»ºè¿‡ç¨‹</td></tr><tr><td>åŸå‹ Hook</td><td>å…¨å±€å½±å“</td><td>å¯¹æ‰€æœ‰å®ä¾‹ç”Ÿæ•ˆï¼ˆè°¨æ…ï¼‰</td></tr><tr><td>script æ³¨å…¥</td><td>æµè§ˆå™¨æ’ä»¶/æ²¹çŒ´åœºæ™¯</td><td>ä¸èƒ½æ”¹æºç ã€åªèƒ½è¿è¡Œæ—¶æ³¨å…¥</td></tr></tbody></table>
<p>--</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ç¿»è¯‘ã€‘scrcpyï¼ˆ3.3.3ï¼‰å‘½ä»¤ä½¿ç”¨æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7578797337867485218</link>    <guid>https://juejin.cn/post/7578797337867485218</guid>    <pubDate>2025-12-02T02:46:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578797337867485218" data-draft-id="7578803751608762418" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ç¿»è¯‘ã€‘scrcpyï¼ˆ3.3.3ï¼‰å‘½ä»¤ä½¿ç”¨æ–‡æ¡£"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-02T02:46:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²æ€¡æ—¸"/> <meta itemprop="url" content="https://juejin.cn/user/2875978146656750"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ç¿»è¯‘ã€‘scrcpyï¼ˆ3.3.3ï¼‰å‘½ä»¤ä½¿ç”¨æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978146656750/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²æ€¡æ—¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:46:12.000Z" title="Tue Dec 02 2025 02:46:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>scrcpy 3.3.3 <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGenymobile%2Fscrcpy" target="_blank" title="https://github.com/Genymobile/scrcpy" ref="nofollow noopener noreferrer">github.com/Genymobile/â€¦</a>
ç”¨æ³•ï¼š<code>scrcpy.exe</code> [é€‰é¡¹]</p>
<blockquote>
<p>å£°æ˜ï¼šä»¥ä¸‹æ˜¯åœ¨ Windows ç”µè„‘ä¸Šçš„scrcpy --help è¾“å‡ºç¿»è¯‘ï¼Œä¸ç¡®ä¿å…¶ä»–å¹³å°æ˜¯å¦ä¸€æ ·</p>
</blockquote>
<p>é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">--always-on-top</span>
    ä½¿ scrcpy çª—å£å§‹ç»ˆç½®é¡¶ï¼ˆä½äºå…¶ä»–çª—å£ä¹‹ä¸Šï¼‰ã€‚

<span class="hljs-comment">--angle=è§’åº¦</span>
    å°†è§†é¢‘å†…å®¹æ—‹è½¬æŒ‡å®šçš„è‡ªå®šä¹‰è§’åº¦ï¼ˆä»¥åº¦ä¸ºå•ä½ï¼Œé¡ºæ—¶é’ˆï¼‰ã€‚

<span class="hljs-comment">--audio-bit-rate=æ•°å€¼</span>
    ä»¥æŒ‡å®šçš„æ¯”ç‰¹ç‡ç¼–ç éŸ³é¢‘ï¼Œå•ä½ä¸ºæ¯”ç‰¹/ç§’ã€‚æ”¯æŒå•ä½åç¼€ï¼š<span class="hljs-string">'K'</span> (åƒä½/ç§’ x1000) å’Œ <span class="hljs-string">'M'</span> (ç™¾ä¸‡ä½/ç§’ x1000000)ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">128</span>K (<span class="hljs-number">128000</span>)ã€‚

<span class="hljs-comment">--audio-buffer=æ¯«ç§’</span>
    é…ç½®éŸ³é¢‘ç¼“å†²å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰ã€‚
    è¾ƒä½çš„å€¼å¯é™ä½å»¶è¿Ÿï¼Œä½†ä¼šå¢åŠ ç¼“å†²åŒºæ¬ è½½ï¼ˆå¯¼è‡´éŸ³é¢‘æ•…éšœï¼‰çš„å¯èƒ½æ€§ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">50</span>ã€‚

<span class="hljs-comment">--audio-codec=åç§°</span>
    é€‰æ‹©éŸ³é¢‘ç¼–ç å™¨ (opus, aac, flac æˆ– raw)ã€‚
    é»˜è®¤å€¼ä¸º opusã€‚

<span class="hljs-comment">--audio-codec-options=é”®[:ç±»å‹]=å€¼[, ...]</span>
    ä¸ºè®¾å¤‡éŸ³é¢‘ç¼–ç å™¨è®¾ç½®ä»¥é€—å·åˆ†éš”çš„ `é”®:ç±»å‹=å€¼` é€‰é¡¹åˆ—è¡¨ã€‚
    <span class="hljs-string">'ç±»å‹'</span> çš„å¯èƒ½å€¼ä¸º <span class="hljs-string">'int'</span> (é»˜è®¤), <span class="hljs-string">'long'</span>, <span class="hljs-string">'float'</span> å’Œ <span class="hljs-string">'string'</span>ã€‚
    å¯èƒ½çš„ç¼–è§£ç å™¨é€‰é¡¹åˆ—è¡¨å¯åœ¨ Android æ–‡æ¡£ä¸­æ‰¾åˆ°ï¼š
    &lt;https://d.android.com/reference/android/media/MediaFormat&gt;

<span class="hljs-comment">--audio-dup</span>
    å¤åˆ¶éŸ³é¢‘ï¼ˆæ•è·å¹¶åœ¨è®¾å¤‡ä¸Šç»§ç»­æ’­æ”¾ï¼‰ã€‚
    æ­¤åŠŸèƒ½ä»…åœ¨é…åˆ `<span class="hljs-comment">--audio-source=playback` æ—¶å¯ç”¨ã€‚</span>

<span class="hljs-comment">--audio-encoder=åç§°</span>
    ä½¿ç”¨ç‰¹å®šçš„ MediaCodec éŸ³é¢‘ç¼–ç å™¨ï¼ˆå–å†³äº `<span class="hljs-comment">--audio-codec` æä¾›çš„ç¼–è§£ç å™¨ï¼‰ã€‚</span>
    å¯ç”¨çš„ç¼–ç å™¨å¯é€šè¿‡ `<span class="hljs-comment">--list-encoders` åˆ—å‡ºã€‚</span>

<span class="hljs-comment">--audio-source=æ¥æº</span>
    é€‰æ‹©éŸ³é¢‘æºã€‚å¯èƒ½çš„å€¼æœ‰ï¼š
     - `<span class="hljs-string">"output"</span>`: è½¬å‘æ•´ä¸ªéŸ³é¢‘è¾“å‡ºï¼Œå¹¶ç¦ç”¨è®¾å¤‡ä¸Šçš„æ’­æ”¾ã€‚
     - `<span class="hljs-string">"playback"</span>`: æ•è·éŸ³é¢‘æ’­æ”¾ï¼ˆAndroid åº”ç”¨å¯é€‰æ‹©é€€å‡ºï¼Œå› æ­¤ä¸ä¸€å®šèƒ½æ•è·å…¨éƒ¨è¾“å‡ºï¼‰ã€‚
     - `<span class="hljs-string">"mic"</span>`: æ•è·éº¦å…‹é£ã€‚
     - `<span class="hljs-string">"mic-unprocessed"</span>`: æ•è·æœªç»å¤„ç†ï¼ˆåŸå§‹ï¼‰çš„éº¦å…‹é£å£°éŸ³ã€‚
     - `<span class="hljs-string">"mic-camcorder"</span>`: æ•è·ä¸ºè§†é¢‘å½•åˆ¶è°ƒæ•´çš„éº¦å…‹é£ï¼ˆå¦‚æœå¯ç”¨ï¼Œåˆ™ä¸æ‘„åƒå¤´æ–¹å‘ä¸€è‡´ï¼‰ã€‚
     - `<span class="hljs-string">"mic-voice-recognition"</span>`: æ•è·ä¸ºè¯­éŸ³è¯†åˆ«è°ƒæ•´çš„éº¦å…‹é£ã€‚
     - `<span class="hljs-string">"mic-voice-communication"</span>`: æ•è·ä¸ºè¯­éŸ³é€šä¿¡è°ƒæ•´çš„éº¦å…‹é£ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœå¯ç”¨ï¼Œå°†åˆ©ç”¨å›å£°æ¶ˆé™¤æˆ–è‡ªåŠ¨å¢ç›Šæ§åˆ¶ï¼‰ã€‚
     - `<span class="hljs-string">"voice-call"</span>`: æ•è·è¯­éŸ³é€šè¯ã€‚
     - `<span class="hljs-string">"voice-call-uplink"</span>`: ä»…æ•è·è¯­éŸ³é€šè¯ä¸Šè¡Œé“¾è·¯ã€‚
     - `<span class="hljs-string">"voice-call-downlink"</span>`: ä»…æ•è·è¯­éŸ³é€šè¯ä¸‹è¡Œé“¾è·¯ã€‚
     - `<span class="hljs-string">"voice-performance"</span>`: æ•è·ç”¨äºç°åœºè¡¨æ¼”ï¼ˆå¦‚å¡æ‹‰OKï¼‰å¤„ç†çš„éŸ³é¢‘ï¼ŒåŒ…æ‹¬éº¦å…‹é£å’Œè®¾å¤‡æ’­æ”¾ã€‚
    é»˜è®¤å€¼ä¸º `<span class="hljs-built_in">output</span>`ã€‚

<span class="hljs-comment">--audio-output-buffer=æ¯«ç§’</span>
    é…ç½® SDL éŸ³é¢‘è¾“å‡ºç¼“å†²åŒºçš„å¤§å°ï¼ˆæ¯«ç§’ï¼‰ã€‚
    å¦‚æœæ‚¨å¬åˆ°â€œæœºå™¨äººå£°â€èˆ¬çš„éŸ³é¢‘æ’­æ”¾ï¼Œåº”å°è¯•æ›´é«˜çš„å€¼ï¼ˆä¾‹å¦‚ <span class="hljs-number">10</span>ï¼‰ã€‚å¦åˆ™è¯·å‹¿æ›´æ”¹æ­¤è®¾ç½®ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">5</span>ã€‚

-b, <span class="hljs-comment">--video-bit-rate=æ•°å€¼</span>
    ä»¥æŒ‡å®šçš„æ¯”ç‰¹ç‡ç¼–ç è§†é¢‘ï¼Œå•ä½ä¸ºæ¯”ç‰¹/ç§’ã€‚æ”¯æŒå•ä½åç¼€ï¼š<span class="hljs-string">'K'</span> (åƒä½/ç§’ x1000) å’Œ <span class="hljs-string">'M'</span> (ç™¾ä¸‡ä½/ç§’ x1000000)ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">8</span>M (<span class="hljs-number">8000000</span>)ã€‚

<span class="hljs-comment">--camera-ar=å®½é«˜æ¯”</span>
    æ ¹æ®å®½é«˜æ¯”ï¼ˆ+/- <span class="hljs-number">10</span>%ï¼‰é€‰æ‹©ç›¸æœºå°ºå¯¸ã€‚
    å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"sensor"</span>` (ä½¿ç”¨ç›¸æœºä¼ æ„Ÿå™¨çš„å®½é«˜æ¯”)ã€`<span class="hljs-string">"&lt;æ•°å­—&gt;:&lt;åˆ†æ¯&gt;"</span>` (ä¾‹å¦‚ `<span class="hljs-string">"4:3"</span>`) æˆ– `<span class="hljs-string">"&lt;æ•°å€¼&gt;"</span>` (ä¾‹å¦‚ `<span class="hljs-string">"1.6"</span>`)ã€‚

<span class="hljs-comment">--camera-facing=æœå‘</span>
    æ ¹æ®æœå‘é€‰æ‹©è®¾å¤‡æ‘„åƒå¤´ã€‚
    å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"front"</span>`, `<span class="hljs-string">"back"</span>` å’Œ `<span class="hljs-string">"external"</span>`ã€‚

<span class="hljs-comment">--camera-fps=æ•°å€¼</span>
    æŒ‡å®šç›¸æœºæ•è·å¸§ç‡ã€‚
    å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½¿ç”¨ Android çš„é»˜è®¤å¸§ç‡ (<span class="hljs-number">30</span> fps)ã€‚

<span class="hljs-comment">--camera-high-speed</span>
    å¯ç”¨é«˜é€Ÿç›¸æœºæ•è·æ¨¡å¼ã€‚
    æ­¤æ¨¡å¼ä»…é™äºç‰¹å®šçš„åˆ†è¾¨ç‡å’Œå¸§ç‡ï¼Œå¯é€šè¿‡ `<span class="hljs-comment">--list-camera-sizes` åˆ—å‡ºã€‚</span>

<span class="hljs-comment">--camera-id=æ ‡è¯†</span>
    æŒ‡å®šè¦é•œåƒçš„è®¾å¤‡æ‘„åƒå¤´ IDã€‚
    å¯ç”¨çš„æ‘„åƒå¤´ ID å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºï¼š
        scrcpy <span class="hljs-comment">--list-cameras</span>

<span class="hljs-comment">--camera-size=&lt;å®½åº¦&gt;x&lt;é«˜åº¦&gt;</span>
    æŒ‡å®šæ˜ç¡®çš„ç›¸æœºæ•è·å°ºå¯¸ã€‚

<span class="hljs-comment">--capture-orientation=æ•°å€¼</span>
    è®¾ç½®æ•è·è§†é¢‘çš„æ–¹å‘ã€‚
    å¯èƒ½çš„å€¼ä¸º <span class="hljs-number">0</span>, <span class="hljs-number">90</span>, <span class="hljs-number">180</span>, <span class="hljs-number">270</span>, flip0, flip90, flip180 å’Œ flip270ï¼Œå‰é¢å¯ä»¥åŠ  <span class="hljs-string">'@'</span> å‰ç¼€ã€‚
    æ•°å­—è¡¨ç¤ºé¡ºæ—¶é’ˆæ—‹è½¬çš„åº¦æ•°ï¼›`<span class="hljs-string">"flip"</span>` å…³é”®å­—è¡¨ç¤ºåœ¨æ—‹è½¬å‰åº”ç”¨æ°´å¹³ç¿»è½¬ã€‚
    å¦‚æœä¸ºæ˜¾ç¤ºæ•è·ä¼ é€’äº†å‰å¯¼ <span class="hljs-string">'@'</span>ï¼ˆå¦‚ `@<span class="hljs-number">90</span>`ï¼‰ï¼Œåˆ™æ—‹è½¬å°†è¢«é”å®šï¼Œä¸”ç›¸å¯¹äºè®¾å¤‡çš„è‡ªç„¶æ–¹å‘ã€‚
    å¦‚æœå•ç‹¬ä¼ é€’ `@`ï¼Œåˆ™æ—‹è½¬å°†é”å®šåˆ°è®¾å¤‡çš„åˆå§‹æ–¹å‘ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span>ã€‚

<span class="hljs-comment">--crop=å®½åº¦:é«˜åº¦:x:y</span>
    åœ¨æœåŠ¡å™¨ä¸Šè£å‰ªè®¾å¤‡å±å¹•ã€‚
    æ•°å€¼ä»¥è®¾å¤‡çš„è‡ªç„¶æ–¹å‘è¡¨ç¤ºï¼ˆé€šå¸¸ï¼Œæ‰‹æœºä¸ºçºµå‘ï¼Œå¹³æ¿ä¸ºæ¨ªå‘ï¼‰ã€‚

-d, <span class="hljs-comment">--select-usb</span>
    ä½¿ç”¨ USB è®¾å¤‡ï¼ˆå¦‚æœæ°å¥½æœ‰ä¸€ä¸ªï¼Œç±»ä¼¼äº `adb -d`ï¼‰ã€‚
    å¦è¯·å‚é˜… -e (`<span class="hljs-comment">--select-tcpip`)ã€‚</span>

<span class="hljs-comment">--disable-screensaver</span>
    åœ¨ scrcpy è¿è¡Œæ—¶ç¦ç”¨å±å¹•ä¿æŠ¤ç¨‹åºã€‚

<span class="hljs-comment">--display-id=æ ‡è¯†</span>
    æŒ‡å®šè¦é•œåƒçš„è®¾å¤‡æ˜¾ç¤º IDã€‚
    å¯ç”¨çš„æ˜¾ç¤º ID å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºï¼š
        scrcpy <span class="hljs-comment">--list-displays</span>
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span>ã€‚

<span class="hljs-comment">--display-ime-policy=ç­–ç•¥</span>
    è®¾ç½®é€‰æ‹© IME åº”åœ¨ä½•å¤„æ˜¾ç¤ºçš„ç­–ç•¥ã€‚
    å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"local"</span>`, `<span class="hljs-string">"fallback"</span>` å’Œ `<span class="hljs-string">"hide"</span>`ã€‚
    `<span class="hljs-string">"local"</span>` è¡¨ç¤º IME åº”æ˜¾ç¤ºåœ¨æœ¬åœ°å±å¹•ä¸Šã€‚
    `<span class="hljs-string">"fallback"</span>` è¡¨ç¤º IME åº”æ˜¾ç¤ºåœ¨å¤‡ç”¨ï¼ˆé»˜è®¤ï¼‰å±å¹•ä¸Šã€‚
    `<span class="hljs-string">"hide"</span>` è¡¨ç¤º IME åº”éšè—ã€‚

<span class="hljs-comment">--display-orientation=æ•°å€¼</span>
    è®¾ç½®åˆå§‹æ˜¾ç¤ºæ–¹å‘ã€‚
    å¯èƒ½çš„å€¼ä¸º <span class="hljs-number">0</span>, <span class="hljs-number">90</span>, <span class="hljs-number">180</span>, <span class="hljs-number">270</span>, flip0, flip90, flip180 å’Œ flip270ã€‚
    æ•°å­—è¡¨ç¤ºé¡ºæ—¶é’ˆæ—‹è½¬çš„åº¦æ•°ï¼›`<span class="hljs-string">"flip"</span>` å…³é”®å­—è¡¨ç¤ºåœ¨æ—‹è½¬å‰åº”ç”¨æ°´å¹³ç¿»è½¬ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span>ã€‚

-e, <span class="hljs-comment">--select-tcpip</span>
    ä½¿ç”¨ TCP/IP è®¾å¤‡ï¼ˆå¦‚æœæ°å¥½æœ‰ä¸€ä¸ªï¼Œç±»ä¼¼äº `adb -e`ï¼‰ã€‚
    å¦è¯·å‚é˜… -d (`<span class="hljs-comment">--select-usb`)ã€‚</span>

-f, <span class="hljs-comment">--fullscreen</span>
    ä»¥å…¨å±æ¨¡å¼å¯åŠ¨ã€‚

<span class="hljs-comment">--force-adb-forward</span>
    ä¸å°è¯•ä½¿ç”¨ `adb <span class="hljs-built_in">reverse</span>` è¿æ¥åˆ°è®¾å¤‡ã€‚

-G
    ç­‰åŒäº `<span class="hljs-comment">--gamepad=uhid`ï¼Œå¦‚æœè®¾ç½®äº† `--otg` åˆ™ç­‰åŒäº `--gamepad=aoa`ã€‚</span>

<span class="hljs-comment">--gamepad=æ¨¡å¼</span>
    é€‰æ‹©å¦‚ä½•å‘è®¾å¤‡å‘é€æ¸¸æˆæ‰‹æŸ„è¾“å…¥ã€‚
    å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"disabled"</span>`, `<span class="hljs-string">"uhid"</span>` å’Œ `<span class="hljs-string">"aoa"</span>`ã€‚
    `<span class="hljs-string">"disabled"</span>` ä¸å‘è®¾å¤‡å‘é€æ¸¸æˆæ‰‹æŸ„è¾“å…¥ã€‚
    `<span class="hljs-string">"uhid"</span>` ä½¿ç”¨è®¾å¤‡ä¸Šçš„ Linux UHID å†…æ ¸æ¨¡å—æ¨¡æ‹Ÿç‰©ç† HID æ¸¸æˆæ‰‹æŸ„ã€‚
    `<span class="hljs-string">"aoa"</span>` ä½¿ç”¨ AOAv2 åè®®æ¨¡æ‹Ÿç‰©ç†æ¸¸æˆæ‰‹æŸ„ã€‚å®ƒå¯èƒ½ä»…é€šè¿‡ USB å·¥ä½œã€‚
    å¦è¯·å‚é˜… `<span class="hljs-comment">--keyboard` å’Œ `--mouse`ã€‚</span>

-h, <span class="hljs-comment">--help</span>
    æ‰“å°æ­¤å¸®åŠ©ä¿¡æ¯ã€‚

-K
    ç­‰åŒäº `<span class="hljs-comment">--keyboard=uhid`ï¼Œå¦‚æœè®¾ç½®äº† `--otg` åˆ™ç­‰åŒäº `--keyboard=aoa`ã€‚</span>

<span class="hljs-comment">--keyboard=æ¨¡å¼</span>
    é€‰æ‹©å¦‚ä½•å‘è®¾å¤‡å‘é€é”®ç›˜è¾“å…¥ã€‚
    å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"disabled"</span>`, `<span class="hljs-string">"sdk"</span>`, `<span class="hljs-string">"uhid"</span>` å’Œ `<span class="hljs-string">"aoa"</span>`ã€‚
    `<span class="hljs-string">"disabled"</span>` ä¸å‘è®¾å¤‡å‘é€é”®ç›˜è¾“å…¥ã€‚
    `<span class="hljs-string">"sdk"</span>` ä½¿ç”¨ Android ç³»ç»Ÿ API å°†é”®ç›˜äº‹ä»¶ä¼ é€’ç»™åº”ç”¨ç¨‹åºã€‚
    `<span class="hljs-string">"uhid"</span>` ä½¿ç”¨è®¾å¤‡ä¸Šçš„ Linux UHID å†…æ ¸æ¨¡å—æ¨¡æ‹Ÿç‰©ç† HID é”®ç›˜ã€‚
    `<span class="hljs-string">"aoa"</span>` ä½¿ç”¨ AOAv2 åè®®æ¨¡æ‹Ÿç‰©ç†é”®ç›˜ã€‚å®ƒå¯èƒ½ä»…é€šè¿‡ USB å·¥ä½œã€‚
    å¯¹äº `<span class="hljs-string">"uhid"</span>` å’Œ `<span class="hljs-string">"aoa"</span>` æ¨¡å¼ï¼Œå¿…é¡»é€šè¿‡ `è®¾ç½® -&gt; ç³»ç»Ÿ -&gt; è¯­è¨€å’Œè¾“å…¥ -&gt; ç‰©ç†é”®ç›˜` åœ¨è®¾å¤‡ä¸Šé…ç½®ï¼ˆä¸€åŠ³æ°¸é€¸åœ°ï¼‰é”®ç›˜å¸ƒå±€ã€‚å¯ä»¥é€šè¿‡å¿«æ·é”® MOD+k (OTG æ¨¡å¼é™¤å¤–) æˆ–æ‰§è¡Œ `adb shell am start -a android.settings.HARD_KEYBOARD_SETTINGS` ç›´æ¥å¯åŠ¨æ­¤è®¾ç½®é¡µé¢ã€‚
    æ­¤é€‰é¡¹ä»…åœ¨å¯ç”¨ HID é”®ç›˜ï¼ˆæˆ–è¿æ¥äº†ç‰©ç†é”®ç›˜ï¼‰æ—¶å¯ç”¨ã€‚
    å¦è¯·å‚é˜… `<span class="hljs-comment">--mouse` å’Œ `--gamepad`ã€‚</span>

<span class="hljs-comment">--kill-adb-on-close</span>
    å½“ scrcpy ç»ˆæ­¢æ—¶ç»“æŸ adb è¿›ç¨‹ã€‚

<span class="hljs-comment">--legacy-paste</span>
    åœ¨æŒ‰ Ctrl+v æ—¶ï¼Œå°†è®¡ç®—æœºå‰ªè´´æ¿æ–‡æœ¬ä½œä¸ºä¸€ç³»åˆ—æŒ‰é”®äº‹ä»¶æ³¨å…¥ï¼ˆç±»ä¼¼ MOD+Shift+vï¼‰ã€‚
    è¿™æ˜¯é’ˆå¯¹æŸäº›è®¾å¤‡åœ¨ç¼–ç¨‹æ–¹å¼è®¾ç½®è®¾å¤‡å‰ªè´´æ¿æ—¶è¡Œä¸ºä¸ç¬¦åˆé¢„æœŸçš„è§£å†³æ–¹æ³•ã€‚

<span class="hljs-comment">--list-apps</span>
    åˆ—å‡ºè®¾å¤‡ä¸Šå®‰è£…çš„ Android åº”ç”¨ã€‚

<span class="hljs-comment">--list-cameras</span>
    åˆ—å‡ºè®¾å¤‡æ‘„åƒå¤´ã€‚

<span class="hljs-comment">--list-camera-sizes</span>
    åˆ—å‡ºæœ‰æ•ˆçš„ç›¸æœºæ•è·å°ºå¯¸ã€‚

<span class="hljs-comment">--list-displays</span>
    åˆ—å‡ºè®¾å¤‡å±å¹•ã€‚

<span class="hljs-comment">--list-encoders</span>
    åˆ—å‡ºè®¾å¤‡ä¸Šå¯ç”¨çš„è§†é¢‘å’ŒéŸ³é¢‘ç¼–ç å™¨ã€‚

-m, <span class="hljs-comment">--max-size=æ•°å€¼</span>
    å°†è§†é¢‘çš„å®½åº¦å’Œé«˜åº¦éƒ½é™åˆ¶ä¸ºæŒ‡å®šå€¼ã€‚å¦ä¸€ç»´åº¦ä¼šæŒ‰æ¯”ä¾‹è®¡ç®—ä»¥ä¿æŒè®¾å¤‡å®½é«˜æ¯”ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span> (æ— é™åˆ¶)ã€‚

-M
    ç­‰åŒäº `<span class="hljs-comment">--mouse=uhid`ï¼Œå¦‚æœè®¾ç½®äº† `--otg` åˆ™ç­‰åŒäº `--mouse=aoa`ã€‚</span>

<span class="hljs-comment">--max-fps=æ•°å€¼</span>
    é™åˆ¶å±å¹•æ•è·çš„å¸§ç‡ï¼ˆä» Android <span class="hljs-number">10</span> å¼€å§‹å®˜æ–¹æ”¯æŒï¼Œä½†æ—©æœŸç‰ˆæœ¬å¯èƒ½ä¹Ÿå¯ç”¨ï¼‰ã€‚

<span class="hljs-comment">--mouse=æ¨¡å¼</span>
    é€‰æ‹©å¦‚ä½•å‘è®¾å¤‡å‘é€é¼ æ ‡è¾“å…¥ã€‚
    å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"disabled"</span>`, `<span class="hljs-string">"sdk"</span>`, `<span class="hljs-string">"uhid"</span>` å’Œ `<span class="hljs-string">"aoa"</span>`ã€‚
    `<span class="hljs-string">"disabled"</span>` ä¸å‘è®¾å¤‡å‘é€é¼ æ ‡è¾“å…¥ã€‚
    `<span class="hljs-string">"sdk"</span>` ä½¿ç”¨ Android ç³»ç»Ÿ API å°†é¼ æ ‡äº‹ä»¶ä¼ é€’ç»™åº”ç”¨ç¨‹åºã€‚
    `<span class="hljs-string">"uhid"</span>` ä½¿ç”¨è®¾å¤‡ä¸Šçš„ Linux UHID å†…æ ¸æ¨¡å—æ¨¡æ‹Ÿç‰©ç† HID é¼ æ ‡ã€‚
    `<span class="hljs-string">"aoa"</span>` ä½¿ç”¨ AOAv2 åè®®æ¨¡æ‹Ÿç‰©ç†é¼ æ ‡ã€‚å®ƒå¯èƒ½ä»…é€šè¿‡ USB å·¥ä½œã€‚
    åœ¨ `<span class="hljs-string">"uhid"</span>` å’Œ `<span class="hljs-string">"aoa"</span>` æ¨¡å¼ä¸‹ï¼Œè®¡ç®—æœºé¼ æ ‡ä¼šè¢«æ•è·ä»¥ç›´æ¥æ§åˆ¶è®¾å¤‡ï¼ˆç›¸å¯¹é¼ æ ‡æ¨¡å¼ï¼‰ã€‚
    å·¦ Altã€å·¦ Super æˆ–å³ Super é”®å¯åˆ‡æ¢æ•è·æ¨¡å¼ï¼Œå°†é¼ æ ‡æ§åˆ¶æƒäº¤è¿˜ç»™è®¡ç®—æœºã€‚
    å¦è¯·å‚é˜… `<span class="hljs-comment">--keyboard` å’Œ `--gamepad`ã€‚</span>

<span class="hljs-comment">--mouse-bind=xxxx[:xxxx]</span>
    é…ç½®è¾…åŠ©ç‚¹å‡»çš„ç»‘å®šã€‚
    å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªæˆ–ä¸¤ä¸ªç”±å†’å·åˆ†éš”çš„åºåˆ—ï¼Œæ¯ä¸ªåºåˆ—æ°å¥½ <span class="hljs-number">4</span> ä¸ªå­—ç¬¦ï¼Œåˆ†åˆ«å¯¹åº”æ¯ä¸ªè¾…åŠ©ç‚¹å‡»ï¼ˆé¡ºåºä¸ºï¼šå³é”®ã€ä¸­é”®ã€ç¬¬å››é”®ã€ç¬¬äº”é”®ï¼‰ã€‚
    ç¬¬ä¸€ä¸ªåºåˆ—å®šä¹‰ä¸»ç»‘å®šï¼Œç”¨äºé¼ æ ‡æŒ‰é’®å•ç‹¬æŒ‰ä¸‹æ—¶ã€‚ç¬¬äºŒä¸ªåºåˆ—å®šä¹‰è¾…åŠ©ç»‘å®šï¼Œç”¨äºæŒ‰ä½ Shift é”®çš„åŒæ—¶æŒ‰ä¸‹é¼ æ ‡æŒ‰é’®æ—¶ã€‚
    å¦‚æœçœç•¥ç¬¬äºŒä¸ªç»‘å®šåºåˆ—ï¼Œåˆ™ä¸ç¬¬ä¸€ä¸ªåºåˆ—ç›¸åŒã€‚
    æ¯ä¸ªå­—ç¬¦å¿…é¡»æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š
     `+`: å°†ç‚¹å‡»è½¬å‘åˆ°è®¾å¤‡
     `-`: å¿½ç•¥ç‚¹å‡»
     `b`: è§¦å‘å¿«æ·é”® BACK (æˆ–å¦‚æœå±å¹•å…³é—­åˆ™ç‚¹äº®å±å¹•)
     `h`: è§¦å‘å¿«æ·é”® HOME
     `s`: è§¦å‘å¿«æ·é”® APP_SWITCH
     `n`: è§¦å‘å¿«æ·é”® `å±•å¼€é€šçŸ¥é¢æ¿`
    å¯¹äº SDK é¼ æ ‡ï¼Œé»˜è®¤ä¸º `<span class="hljs-string">'bhsn:++++'</span>`ï¼›å¯¹äº AOA å’Œ UHID é¼ æ ‡ï¼Œé»˜è®¤ä¸º `<span class="hljs-string">'++++:bhsn'</span>`ã€‚

-n, <span class="hljs-comment">--no-control</span>
    ç¦ç”¨è®¾å¤‡æ§åˆ¶ï¼ˆä»¥åªè¯»æ–¹å¼é•œåƒè®¾å¤‡ï¼‰ã€‚

-N, <span class="hljs-comment">--no-playback</span>
    åœ¨è®¡ç®—æœºä¸Šç¦ç”¨è§†é¢‘å’ŒéŸ³é¢‘æ’­æ”¾ï¼ˆç­‰åŒäº `<span class="hljs-comment">--no-video-playback --no-audio-playback`ï¼‰ã€‚</span>

<span class="hljs-comment">--new-display[=[&lt;å®½åº¦&gt;x&lt;é«˜åº¦&gt;][/&lt;æ¯è‹±å¯¸ç‚¹æ•°&gt;]]</span>
    åˆ›å»ºä¸€ä¸ªå…·æœ‰æŒ‡å®šåˆ†è¾¨ç‡å’Œåƒç´ å¯†åº¦ï¼ˆDPIï¼‰çš„æ–°å±å¹•ã€‚å¦‚æœæœªæä¾›ï¼Œåˆ™é»˜è®¤ä½¿ç”¨ä¸»å±å¹•å°ºå¯¸å’Œ DPIã€‚
    ç¤ºä¾‹ï¼š
        <span class="hljs-comment">--new-display=1920x1080</span>
        <span class="hljs-comment">--new-display=1920x1080/420  # å¼ºåˆ¶ 420 DPI</span>
        <span class="hljs-comment">--new-display                # ä¸»å±å¹•å°ºå¯¸å’Œ DPI</span>
        <span class="hljs-comment">--new-display=/240           # ä¸»å±å¹•å°ºå¯¸å’Œ 240 DPI</span>

<span class="hljs-comment">--no-audio</span>
    ç¦ç”¨éŸ³é¢‘è½¬å‘ã€‚

<span class="hljs-comment">--no-audio-playback</span>
    åœ¨è®¡ç®—æœºä¸Šç¦ç”¨éŸ³é¢‘æ’­æ”¾ã€‚

<span class="hljs-comment">--no-cleanup</span>
    é»˜è®¤æƒ…å†µä¸‹ï¼Œscrcpy åœ¨é€€å‡ºæ—¶ä¼šä»è®¾å¤‡ç§»é™¤æœåŠ¡å™¨äºŒè¿›åˆ¶æ–‡ä»¶å¹¶æ¢å¤è®¾å¤‡çŠ¶æ€ï¼ˆæ˜¾ç¤ºè§¦æ‘¸ã€ä¿æŒå”¤é†’å’Œç”µæºæ¨¡å¼ï¼‰ã€‚
    æ­¤é€‰é¡¹ç¦ç”¨æ­¤æ¸…ç†æ“ä½œã€‚

<span class="hljs-comment">--no-clipboard-autosync</span>
    é»˜è®¤æƒ…å†µä¸‹ï¼Œscrcpy ä¼šåœ¨æ³¨å…¥ Ctrl+v ä¹‹å‰è‡ªåŠ¨å°†è®¡ç®—æœºå‰ªè´´æ¿åŒæ­¥åˆ°è®¾å¤‡å‰ªè´´æ¿ï¼Œå¹¶åœ¨è®¾å¤‡å‰ªè´´æ¿å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨å°†å…¶åŒæ­¥åˆ°è®¡ç®—æœºå‰ªè´´æ¿ã€‚
    æ­¤é€‰é¡¹ç¦ç”¨æ­¤è‡ªåŠ¨åŒæ­¥ã€‚

<span class="hljs-comment">--no-downsize-on-error</span>
    é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ MediaCodec å‡ºé”™æ—¶ï¼Œscrcpy ä¼šè‡ªåŠ¨å°è¯•ä»¥è¾ƒä½çš„åˆ†è¾¨ç‡é‡æ–°ç¼–ç ã€‚
    æ­¤é€‰é¡¹ç¦ç”¨æ­¤è¡Œä¸ºã€‚

<span class="hljs-comment">--no-key-repeat</span>
    å½“æŒ‰é”®è¢«æŒ‰ä½æ—¶ï¼Œä¸è½¬å‘é‡å¤çš„æŒ‰é”®äº‹ä»¶ã€‚

<span class="hljs-comment">--no-mipmaps</span>
    å¦‚æœæ¸²æŸ“å™¨æ˜¯ OpenGL <span class="hljs-number">3.0</span>+ æˆ– OpenGL ES <span class="hljs-number">2.0</span>+ï¼Œåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆ Mipmaps ä»¥æé«˜ç¼©å°æ¯”ä¾‹æ—¶çš„è´¨é‡ã€‚æ­¤é€‰é¡¹ç¦ç”¨ Mipmaps çš„ç”Ÿæˆã€‚

<span class="hljs-comment">--no-mouse-hover</span>
    ä¸è½¬å‘é¼ æ ‡æ‚¬åœï¼ˆæ²¡æœ‰ä»»ä½•ç‚¹å‡»çš„é¼ æ ‡ç§»åŠ¨ï¼‰äº‹ä»¶ã€‚

<span class="hljs-comment">--no-power-on</span>
    å¯åŠ¨æ—¶ä¸å”¤é†’è®¾å¤‡ã€‚

<span class="hljs-comment">--no-vd-destroy-content</span>
    ç¦ç”¨è™šæ‹Ÿå±å¹•çš„â€œç§»é™¤æ—¶é”€æ¯å†…å®¹â€æ ‡å¿—ã€‚
    å¯ç”¨æ­¤é€‰é¡¹åï¼Œå…³é—­è™šæ‹Ÿå±å¹•æ—¶ï¼Œæ­£åœ¨è¿è¡Œçš„åº”ç”¨ä¼šç§»åˆ°ä¸»å±å¹•è€Œä¸æ˜¯è¢«é”€æ¯ã€‚

<span class="hljs-comment">--no-vd-system-decorations</span>
    ç¦ç”¨è™šæ‹Ÿå±å¹•çš„ç³»ç»Ÿè£…é¥°æ ‡å¿—ã€‚

<span class="hljs-comment">--no-video</span>
    ç¦ç”¨è§†é¢‘è½¬å‘ã€‚

<span class="hljs-comment">--no-video-playback</span>
    åœ¨è®¡ç®—æœºä¸Šç¦ç”¨è§†é¢‘æ’­æ”¾ã€‚

<span class="hljs-comment">--no-window</span>
    ç¦ç”¨ scrcpy çª—å£ã€‚éšå« `<span class="hljs-comment">--no-video-playback`ã€‚</span>

<span class="hljs-comment">--orientation=æ•°å€¼</span>
    ç­‰åŒäº `<span class="hljs-comment">--display-orientation=æ•°å€¼ --record-orientation=æ•°å€¼`ã€‚</span>

<span class="hljs-comment">--otg</span>
    ä»¥ OTG æ¨¡å¼è¿è¡Œï¼šæ¨¡æ‹Ÿç‰©ç†é”®ç›˜å’Œé¼ æ ‡ï¼Œå°±åƒè®¡ç®—æœºé”®ç›˜å’Œé¼ æ ‡é€šè¿‡ OTG çº¿ç¼†ç›´æ¥æ’å…¥è®¾å¤‡ä¸€æ ·ã€‚
    åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œä¸éœ€è¦ adb (USB è°ƒè¯•)ï¼Œå¹¶ä¸”é•œåƒè¢«ç¦ç”¨ã€‚
    å·¦ Altã€å·¦ Super æˆ–å³ Super é”®å¯åˆ‡æ¢é¼ æ ‡æ•è·æ¨¡å¼ï¼Œå°†é¼ æ ‡æ§åˆ¶æƒäº¤è¿˜ç»™è®¡ç®—æœºã€‚
    é”®ç›˜å’Œé¼ æ ‡å¯ä»¥åˆ†åˆ«ä½¿ç”¨ `<span class="hljs-comment">--keyboard=disabled` å’Œ `--mouse=disabled` ç¦ç”¨ã€‚</span>
    å®ƒå¯èƒ½ä»…é€šè¿‡ USB å·¥ä½œã€‚
    å‚è§ `<span class="hljs-comment">--keyboard`, `--mouse` å’Œ `--gamepad`ã€‚</span>

-p, <span class="hljs-comment">--port=ç«¯å£[:ç«¯å£]</span>
    è®¾ç½®å®¢æˆ·ç«¯ç›‘å¬çš„ TCP ç«¯å£ï¼ˆèŒƒå›´ï¼‰ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">27183</span>:<span class="hljs-number">27199</span>ã€‚

<span class="hljs-comment">--pause-on-exit[=æ¨¡å¼]</span>
    é…ç½®é€€å‡ºæ—¶æš‚åœã€‚å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"true"</span>` (æ€»æ˜¯åœ¨é€€å‡ºæ—¶æš‚åœ)ã€`<span class="hljs-string">"false"</span>` (ä»ä¸åœ¨é€€å‡ºæ—¶æš‚åœ) å’Œ `<span class="hljs-string">"if-error"</span>` (ä»…åœ¨å‡ºé”™æ—¶æš‚åœ)ã€‚
    è¿™æœ‰åŠ©äºé˜²æ­¢ç»ˆç«¯çª—å£è‡ªåŠ¨å…³é—­ï¼Œä»¥ä¾¿é˜…è¯»é”™è¯¯ä¿¡æ¯ã€‚
    é»˜è®¤å€¼ä¸º `<span class="hljs-string">"false"</span>`ã€‚
    ä¸å¸¦å‚æ•°ä¼ é€’æ­¤é€‰é¡¹ç­‰åŒäºä¼ é€’ `<span class="hljs-string">"true"</span>`ã€‚

<span class="hljs-comment">--power-off-on-close</span>
    å…³é—­ scrcpy æ—¶å…³é—­è®¾å¤‡å±å¹•ã€‚

<span class="hljs-comment">--prefer-text</span>
    å°†å­—æ¯å­—ç¬¦å’Œç©ºæ ¼ä½œä¸ºæ–‡æœ¬äº‹ä»¶è€ŒéæŒ‰é”®äº‹ä»¶æ³¨å…¥ã€‚
    è¿™é¿å…äº†è¾“å…¥ç‰¹æ®Šå­—ç¬¦æ—¶ç»„åˆå¤šä¸ªé”®å¯èƒ½äº§ç”Ÿçš„é—®é¢˜ï¼Œä½†ä¼šç ´åæ¸¸æˆä¸­å­—æ¯é”®ï¼ˆé€šå¸¸æ˜¯ WASDï¼‰çš„é¢„æœŸè¡Œä¸ºã€‚

<span class="hljs-comment">--print-fps</span>
    å¯åŠ¨ FPS è®¡æ•°å™¨ï¼Œåœ¨æ§åˆ¶å°æ‰“å°å¸§ç‡æ—¥å¿—ã€‚å¯ä»¥éšæ—¶é€šè¿‡ MOD+i å¯åŠ¨æˆ–åœæ­¢ã€‚

<span class="hljs-comment">--push-target=è·¯å¾„</span>
    è®¾ç½®é€šè¿‡æ‹–æ”¾å°†æ–‡ä»¶æ¨é€åˆ°è®¾å¤‡æ—¶çš„ç›®æ ‡ç›®å½•ã€‚
    æ­¤è·¯å¾„ä¼šåŸæ ·ä¼ é€’ç»™ `adb push`ã€‚
    é»˜è®¤å€¼ä¸º `<span class="hljs-string">"/sdcard/Download/"</span>`ã€‚

-r, <span class="hljs-comment">--record=æ–‡ä»¶å.mp4</span>
    å°†å±å¹•å½•åˆ¶åˆ°æ–‡ä»¶ã€‚
    æ ¼å¼ç”± `<span class="hljs-comment">--record-format` é€‰é¡¹ï¼ˆå¦‚æœè®¾ç½®ï¼‰æˆ–æ–‡ä»¶æ‰©å±•åå†³å®šã€‚</span>

<span class="hljs-comment">--raw-key-events</span>
    ä¸ºæ‰€æœ‰è¾“å…¥é”®æ³¨å…¥æŒ‰é”®äº‹ä»¶ï¼Œå¹¶å¿½ç•¥æ–‡æœ¬äº‹ä»¶ã€‚

<span class="hljs-comment">--record-format=æ ¼å¼</span>
    å¼ºåˆ¶å½•åˆ¶æ ¼å¼ (mp4, mkv, m4a, mka, opus, aac, flac æˆ– wav)ã€‚

<span class="hljs-comment">--record-orientation=æ•°å€¼</span>
    è®¾ç½®å½•åˆ¶æ–¹å‘ã€‚
    å¯èƒ½çš„å€¼ä¸º <span class="hljs-number">0</span>, <span class="hljs-number">90</span>, <span class="hljs-number">180</span> å’Œ <span class="hljs-number">270</span>ã€‚æ•°å­—è¡¨ç¤ºé¡ºæ—¶é’ˆæ—‹è½¬çš„åº¦æ•°ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span>ã€‚

<span class="hljs-comment">--render-driver=åç§°</span>
    è¯·æ±‚ SDL ä½¿ç”¨ç»™å®šçš„æ¸²æŸ“é©±åŠ¨ï¼ˆè¿™åªæ˜¯ä¸€ä¸ªæç¤ºï¼‰ã€‚
    ç›®å‰æ”¯æŒçš„åç§°æœ‰ `<span class="hljs-string">"direct3d"</span>`, `<span class="hljs-string">"opengl"</span>`, `<span class="hljs-string">"opengles2"</span>`, `<span class="hljs-string">"opengles"</span>`, `<span class="hljs-string">"metal"</span>` å’Œ `<span class="hljs-string">"software"</span>`ã€‚
    &lt;https://wiki.libsdl.org/SDL_HINT_RENDER_DRIVER&gt;

<span class="hljs-comment">--require-audio</span>
    é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“è®¾å¤‡ä¸Šçš„éŸ³é¢‘æ•è·å¤±è´¥æ—¶ï¼Œscrcpy ä»…é•œåƒè§†é¢‘ã€‚æ­¤é€‰é¡¹ä½¿å¾—åœ¨å¯ç”¨éŸ³é¢‘ä½†éŸ³é¢‘æ— æ³•å·¥ä½œæ—¶ï¼Œscrcpy ç›´æ¥å¤±è´¥ã€‚

-s, <span class="hljs-comment">--serial=åºåˆ—å·</span>
    è®¾å¤‡åºåˆ—å·ã€‚ä»…åœ¨å¤šä¸ªè®¾å¤‡è¿æ¥åˆ° adb æ—¶å¿…é¡»æŒ‡å®šã€‚

-S, <span class="hljs-comment">--turn-screen-off</span>
    ç«‹å³å…³é—­è®¾å¤‡å±å¹•ã€‚

<span class="hljs-comment">--screen-off-timeout=ç§’æ•°</span>
    è®¾ç½®åœ¨ scrcpy è¿è¡ŒæœŸé—´çš„å±å¹•å…³é—­è¶…æ—¶æ—¶é—´ï¼ˆé€€å‡ºæ—¶æ¢å¤åˆå§‹å€¼ï¼‰ã€‚

<span class="hljs-comment">--shortcut-mod=æŒ‰é”®[+...][,...]</span>
    æŒ‡å®šç”¨äº scrcpy å¿«æ·é”®çš„ä¿®é¥°é”®ã€‚
    å¯èƒ½çš„æŒ‰é”®æ˜¯ `<span class="hljs-string">"lctrl"</span>`, `<span class="hljs-string">"rctrl"</span>`, `<span class="hljs-string">"lalt"</span>`, `<span class="hljs-string">"ralt"</span>`, `<span class="hljs-string">"lsuper"</span>` å’Œ `<span class="hljs-string">"rsuper"</span>`ã€‚
    å¯ä»¥æŒ‡å®šå¤šä¸ªå¿«æ·é”®ä¿®é¥°é”®ï¼Œç”¨é€—å·åˆ†éš”ã€‚
    ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨å·¦ Ctrl æˆ–å·¦ Super ä½œä¸º scrcpy å¿«æ·é”®ï¼Œä¼ é€’ `<span class="hljs-string">"lctrl,lsuper"</span>`ã€‚
    é»˜è®¤å€¼ä¸º `<span class="hljs-string">"lalt,lsuper"</span>` (å·¦ Alt æˆ–å·¦ Super)ã€‚

<span class="hljs-comment">--start-app=åç§°</span>
    å¯åŠ¨ä¸€ä¸ª Android åº”ç”¨ï¼Œé€šè¿‡å…¶ç²¾ç¡®çš„åŒ…åã€‚
    æ·»åŠ å‰ç¼€ `<span class="hljs-string">'?'</span>` ä»¥é€‰æ‹©åç§°ä»¥ç»™å®šåç§°ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰å¼€å¤´çš„åº”ç”¨ï¼ˆåœ¨è®¾å¤‡ä¸Šæ£€ç´¢åº”ç”¨åç§°å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼‰ï¼š
        scrcpy <span class="hljs-comment">--start-app=?firefox</span>
    æ·»åŠ å‰ç¼€ `<span class="hljs-string">'+'</span>` ä»¥åœ¨å¯åŠ¨åº”ç”¨å‰å¼ºåˆ¶åœæ­¢å®ƒï¼š
        scrcpy <span class="hljs-comment">--new-display --start-app=+org.mozilla.firefox</span>
    ä¸¤ä¸ªå‰ç¼€å¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼ŒæŒ‰æ­¤é¡ºåºï¼š
        scrcpy <span class="hljs-comment">--start-app=+?firefox</span>

-t, <span class="hljs-comment">--show-touches</span>
    åœ¨å¯åŠ¨æ—¶å¯ç”¨â€œæ˜¾ç¤ºè§¦æ‘¸â€ï¼Œé€€å‡ºæ—¶æ¢å¤åˆå§‹å€¼ã€‚
    å®ƒåªæ˜¾ç¤ºç‰©ç†è§¦æ‘¸ï¼ˆä¸åŒ…æ‹¬æ¥è‡ª scrcpy çš„ç‚¹å‡»ï¼‰ã€‚

<span class="hljs-comment">--tcpip[=[+]IPåœ°å€[:ç«¯å£]]</span>
    é€šè¿‡ TCP/IP é…ç½®å¹¶è¿æ¥åˆ°è®¾å¤‡ã€‚
    å¦‚æœæä¾›äº†ç›®æ ‡åœ°å€ï¼Œåˆ™ scrcpy åœ¨å¯åŠ¨å‰è¿æ¥åˆ°è¯¥åœ°å€ã€‚è®¾å¤‡å¿…é¡»åœ¨ç»™å®šçš„ TCP ç«¯å£ï¼ˆé»˜è®¤ <span class="hljs-number">5555</span>ï¼‰ä¸Šç›‘å¬ã€‚
    å¦‚æœæœªæä¾›ç›®æ ‡åœ°å€ï¼Œåˆ™ scrcpy å°è¯•æŸ¥æ‰¾å½“å‰è®¾å¤‡ï¼ˆé€šå¸¸é€šè¿‡ USB è¿æ¥ï¼‰çš„ IP åœ°å€ï¼Œå¯ç”¨ TCP/IP æ¨¡å¼ï¼Œç„¶ååœ¨å¯åŠ¨å‰è¿æ¥åˆ°è¯¥åœ°å€ã€‚
    åœ¨åœ°å€å‰åŠ  `<span class="hljs-string">'+'</span>` å‰ç¼€ä»¥å¼ºåˆ¶é‡æ–°è¿æ¥ã€‚

<span class="hljs-comment">--time-limit=ç§’æ•°</span>
    è®¾ç½®æœ€å¤§é•œåƒæ—¶é—´ï¼ˆç§’ï¼‰ã€‚

<span class="hljs-comment">--tunnel-host=IPåœ°å€</span>
    è®¾ç½®ç”¨äºè®¿é—® scrcpy æœåŠ¡å™¨çš„ adb éš§é“ IP åœ°å€ã€‚æ­¤é€‰é¡¹è‡ªåŠ¨å¯ç”¨ `<span class="hljs-comment">--force-adb-forward`ã€‚</span>
    é»˜è®¤å€¼ä¸º `localhost`ã€‚

<span class="hljs-comment">--tunnel-port=ç«¯å£</span>
    è®¾ç½®ç”¨äºè®¿é—® scrcpy æœåŠ¡å™¨çš„ adb éš§é“ TCP ç«¯å£ã€‚æ­¤é€‰é¡¹è‡ªåŠ¨å¯ç”¨ `<span class="hljs-comment">--force-adb-forward`ã€‚</span>
    é»˜è®¤å€¼ä¸º `<span class="hljs-number">0</span>` (ä¸å¼ºåˆ¶)ï¼šå°†ä½¿ç”¨ç”¨äºå»ºç«‹éš§é“çš„æœ¬åœ°ç«¯å£ã€‚

-v, <span class="hljs-comment">--version</span>
    æ‰“å° scrcpy çš„ç‰ˆæœ¬ã€‚

-V, <span class="hljs-comment">--verbosity=çº§åˆ«</span>
    è®¾ç½®æ—¥å¿—çº§åˆ« (verbose, <span class="hljs-built_in">debug</span>, info, warn æˆ– <span class="hljs-built_in">error</span>)ã€‚
    é»˜è®¤å€¼ä¸º `info`ã€‚

<span class="hljs-comment">--v4l2-sink=/dev/videoN</span>
    è¾“å‡ºåˆ° v4l2loopback è®¾å¤‡ã€‚
    æ­¤åŠŸèƒ½ä»…åœ¨ Linux ä¸Šå¯ç”¨ã€‚

<span class="hljs-comment">--v4l2-buffer=æ¯«ç§’</span>
    åœ¨æ¨é€å¸§ä¹‹å‰æ·»åŠ ç¼“å†²å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰ã€‚è¿™ä¼šå¢åŠ å»¶è¿Ÿä»¥è¡¥å¿æŠ–åŠ¨ã€‚
    æ­¤é€‰é¡¹ç±»ä¼¼äº `<span class="hljs-comment">--video-buffer`ï¼Œä½†ä¸“ç”¨äº V4L2 è¾“å‡ºã€‚</span>
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span> (æ— ç¼“å†²)ã€‚
    æ­¤é€‰é¡¹ä»…åœ¨ Linux ä¸Šå¯ç”¨ã€‚

<span class="hljs-comment">--video-buffer=æ¯«ç§’</span>
    åœ¨æ˜¾ç¤ºè§†é¢‘å¸§ä¹‹å‰æ·»åŠ ç¼“å†²å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰ã€‚è¿™ä¼šå¢åŠ å»¶è¿Ÿä»¥è¡¥å¿æŠ–åŠ¨ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span> (æ— ç¼“å†²)ã€‚

<span class="hljs-comment">--video-codec=åç§°</span>
    é€‰æ‹©è§†é¢‘ç¼–ç å™¨ (h264, h265 æˆ– av1)ã€‚
    é»˜è®¤å€¼ä¸º h264ã€‚

<span class="hljs-comment">--video-codec-options=é”®[:ç±»å‹]=å€¼[, ...]</span>
    ä¸ºè®¾å¤‡è§†é¢‘ç¼–ç å™¨è®¾ç½®ä»¥é€—å·åˆ†éš”çš„ `é”®:ç±»å‹=å€¼` é€‰é¡¹åˆ—è¡¨ã€‚
    <span class="hljs-string">'ç±»å‹'</span> çš„å¯èƒ½å€¼ä¸º <span class="hljs-string">'int'</span> (é»˜è®¤), <span class="hljs-string">'long'</span>, <span class="hljs-string">'float'</span> å’Œ <span class="hljs-string">'string'</span>ã€‚
    å¯èƒ½çš„ç¼–è§£ç å™¨é€‰é¡¹åˆ—è¡¨å¯åœ¨ Android æ–‡æ¡£ä¸­æ‰¾åˆ°ï¼š
    &lt;https://d.android.com/reference/android/media/MediaFormat&gt;

<span class="hljs-comment">--video-encoder=åç§°</span>
    ä½¿ç”¨ç‰¹å®šçš„ MediaCodec è§†é¢‘ç¼–ç å™¨ï¼ˆå–å†³äº `<span class="hljs-comment">--video-codec` æä¾›çš„ç¼–è§£ç å™¨ï¼‰ã€‚</span>
    å¯ç”¨çš„ç¼–ç å™¨å¯é€šè¿‡ `<span class="hljs-comment">--list-encoders` åˆ—å‡ºã€‚</span>

<span class="hljs-comment">--video-source=æ¥æº</span>
    é€‰æ‹©è§†é¢‘æ¥æº (display æˆ– camera)ã€‚
    ç›¸æœºé•œåƒéœ€è¦ Android <span class="hljs-number">12</span>+ã€‚
    é»˜è®¤å€¼ä¸º `display`ã€‚

-w, <span class="hljs-comment">--stay-awake</span>
    å½“è®¾å¤‡æ¥é€šç”µæºæ—¶ï¼Œåœ¨ scrcpy è¿è¡ŒæœŸé—´ä¿æŒè®¾å¤‡å”¤é†’ã€‚

<span class="hljs-comment">--window-borderless</span>
    ç¦ç”¨çª—å£è£…é¥°ï¼ˆæ˜¾ç¤ºæ— è¾¹æ¡†çª—å£ï¼‰ã€‚

<span class="hljs-comment">--window-title=æ–‡æœ¬</span>
    è®¾ç½®è‡ªå®šä¹‰çª—å£æ ‡é¢˜ã€‚

<span class="hljs-comment">--window-x=æ•°å€¼</span>
    è®¾ç½®çª—å£åˆå§‹æ°´å¹³ä½ç½®ã€‚
    é»˜è®¤å€¼ä¸º `<span class="hljs-string">"auto"</span>`ã€‚

<span class="hljs-comment">--window-y=æ•°å€¼</span>
    è®¾ç½®çª—å£åˆå§‹å‚ç›´ä½ç½®ã€‚
    é»˜è®¤å€¼ä¸º `<span class="hljs-string">"auto"</span>`ã€‚

<span class="hljs-comment">--window-width=æ•°å€¼</span>
    è®¾ç½®çª—å£åˆå§‹å®½åº¦ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span> (è‡ªåŠ¨)ã€‚

<span class="hljs-comment">--window-height=æ•°å€¼</span>
    è®¾ç½®çª—å£åˆå§‹é«˜åº¦ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span> (è‡ªåŠ¨)ã€‚
</code></pre>
<p>å¿«æ·é”®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">åœ¨ä»¥ä¸‹åˆ—è¡¨ä¸­ï¼ŒMOD æ˜¯å¿«æ·é”®ä¿®é¥°é”®ã€‚é»˜è®¤æ˜¯ï¼ˆå·¦ï¼‰Alt æˆ–ï¼ˆå·¦ï¼‰Superï¼Œä½†å¯ä»¥é€šè¿‡ <span class="hljs-code">`--shortcut-mod`</span> é…ç½®ï¼ˆè§ä¸Šæ–‡ï¼‰ã€‚

MOD+f
<span class="hljs-code">    åˆ‡æ¢å…¨å±æ¨¡å¼
</span>
MOD+å·¦æ–¹å‘é”®
<span class="hljs-code">    å‘å·¦æ—‹è½¬å±å¹•
</span>
MOD+å³æ–¹å‘é”®
<span class="hljs-code">    å‘å³æ—‹è½¬å±å¹•
</span>
MOD+Shift+å·¦æ–¹å‘é”®
MOD+Shift+å³æ–¹å‘é”®
<span class="hljs-code">    æ°´å¹³ç¿»è½¬å±å¹•
</span>
MOD+Shift+ä¸Šæ–¹å‘é”®
MOD+Shift+ä¸‹æ–¹å‘é”®
<span class="hljs-code">    å‚ç›´ç¿»è½¬å±å¹•
</span>
MOD+z
<span class="hljs-code">    æš‚åœæˆ–æ¢å¤æ˜¾ç¤º
</span>
MOD+Shift+z
<span class="hljs-code">    å–æ¶ˆæš‚åœæ˜¾ç¤º
</span>
MOD+Shift+r
<span class="hljs-code">    é‡ç½®è§†é¢‘æ•è·/ç¼–ç 
</span>
MOD+g
<span class="hljs-code">    å°†çª—å£å¤§å°è°ƒæ•´ä¸º 1:1 (åƒç´ å®Œç¾)
</span>
MOD+w
åŒå‡»é»‘è¾¹
<span class="hljs-code">    è°ƒæ•´çª—å£å¤§å°ä»¥ç§»é™¤é»‘è¾¹
</span>
MOD+h
ä¸­é”®ç‚¹å‡»
<span class="hljs-code">    ç‚¹å‡» HOME
</span>
MOD+b
MOD+é€€æ ¼é”®
å³é”®ç‚¹å‡» (å½“å±å¹•äº®æ—¶)
<span class="hljs-code">    ç‚¹å‡» BACK
</span>
MOD+s
ç¬¬å››é”®ç‚¹å‡»
<span class="hljs-code">    ç‚¹å‡» APP_SWITCH
</span>
MOD+m
<span class="hljs-code">    ç‚¹å‡» MENU
</span>
MOD+ä¸Šæ–¹å‘é”®
<span class="hljs-code">    ç‚¹å‡» VOLUME_UP
</span>
MOD+ä¸‹æ–¹å‘é”®
<span class="hljs-code">    ç‚¹å‡» VOLUME_DOWN
</span>
MOD+p
<span class="hljs-code">    ç‚¹å‡» POWER (æ‰“å¼€/å…³é—­å±å¹•)
</span>
å³é”®ç‚¹å‡» (å½“å±å¹•ç­æ—¶)
<span class="hljs-code">    ç‚¹äº®å±å¹•
</span>
MOD+o
<span class="hljs-code">    å…³é—­è®¾å¤‡å±å¹• (ç»§ç»­é•œåƒ)
</span>
MOD+Shift+o
<span class="hljs-code">    æ‰“å¼€è®¾å¤‡å±å¹•
</span>
MOD+r
<span class="hljs-code">    æ—‹è½¬è®¾å¤‡å±å¹•
</span>
MOD+n
ç¬¬äº”é”®ç‚¹å‡»
<span class="hljs-code">    å±•å¼€é€šçŸ¥é¢æ¿
</span>
MOD+Shift+n
<span class="hljs-code">    æ”¶èµ·é€šçŸ¥é¢æ¿
</span>
MOD+c
<span class="hljs-code">    å¤åˆ¶åˆ°å‰ªè´´æ¿ (æ³¨å…¥ COPY é”®ç ï¼Œä»…é™ Android &gt;= 7)
</span>
MOD+x
<span class="hljs-code">    å‰ªåˆ‡åˆ°å‰ªè´´æ¿ (æ³¨å…¥ CUT é”®ç ï¼Œä»…é™ Android &gt;= 7)
</span>
MOD+v
<span class="hljs-code">    å°†è®¡ç®—æœºå‰ªè´´æ¿å†…å®¹å¤åˆ¶åˆ°è®¾å¤‡ï¼Œç„¶åç²˜è´´ (æ³¨å…¥ PASTE é”®ç ï¼Œä»…é™ Android &gt;= 7)
</span>
MOD+Shift+v
<span class="hljs-code">    å°†è®¡ç®—æœºå‰ªè´´æ¿æ–‡æœ¬ä½œä¸ºä¸€ç³»åˆ—æŒ‰é”®äº‹ä»¶æ³¨å…¥
</span>
MOD+k
<span class="hljs-code">    åœ¨è®¾å¤‡ä¸Šæ‰“å¼€é”®ç›˜è®¾ç½® (ä»…é€‚ç”¨äº HID é”®ç›˜)
</span>
MOD+i
<span class="hljs-code">    å¯ç”¨/ç¦ç”¨ FPS è®¡æ•°å™¨ (åœ¨æ—¥å¿—ä¸­æ‰“å°æ¯ç§’å¸§æ•°)
</span>
Ctrl+ç‚¹å‡»å¹¶æ‹–åŠ¨
<span class="hljs-code">    ä»å±å¹•ä¸­å¿ƒè¿›è¡Œæåˆç¼©æ”¾å’Œæ—‹è½¬
</span>
Shift+ç‚¹å‡»å¹¶æ‹–åŠ¨
<span class="hljs-code">    å‚ç›´å€¾æ–œ (ç”¨åŒæŒ‡æ»‘åŠ¨)
</span>
Ctrl+Shift+ç‚¹å‡»å¹¶æ‹–åŠ¨
<span class="hljs-code">    æ°´å¹³å€¾æ–œ (ç”¨åŒæŒ‡æ»‘åŠ¨)
</span>
æ‹–æ”¾ APK æ–‡ä»¶
<span class="hljs-code">    ä»è®¡ç®—æœºå®‰è£… APK
</span>
æ‹–æ”¾é APK æ–‡ä»¶
<span class="hljs-code">    æ¨é€æ–‡ä»¶åˆ°è®¾å¤‡ (å‚è§ `--push-target`)
</span></code></pre>
<p>ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs language-go" lang="go">ADB
    adb å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„

ANDROID_SERIAL
    å¦‚æœæœªæŒ‡å®šé€‰æ‹©å™¨ (<span class="hljs-string">`-s`</span>, <span class="hljs-string">`-d`</span>, <span class="hljs-string">`-e`</span> æˆ– <span class="hljs-string">`--tcpip=&lt;åœ°å€&gt;`</span>) æ—¶è¦ä½¿ç”¨çš„è®¾å¤‡åºåˆ—å·

SCRCPY_ICON_PATH
    ç¨‹åºå›¾æ ‡è·¯å¾„

SCRCPY_SERVER_PATH
    æœåŠ¡å™¨äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„
</code></pre>
<p>é€€å‡ºçŠ¶æ€ï¼š</p>
<pre><code class="hljs">  0  ç¨‹åºæ­£å¸¸ç»ˆæ­¢
  1  å¯åŠ¨å¤±è´¥
  2  è¿è¡Œè¿‡ç¨‹ä¸­è®¾å¤‡æ–­å¼€è¿æ¥
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[FiddleræŠ“åŒ…å·¥å…·è¯¦è§£ï¼ŒHTTPHTTPSè°ƒè¯•ã€ä»£ç†é…ç½®ä¸æ¥å£åˆ†æå®æˆ˜æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7578762210287386687</link>    <guid>https://juejin.cn/post/7578762210287386687</guid>    <pubDate>2025-12-02T03:19:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578762210287386687" data-draft-id="7578811288819236907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="FiddleræŠ“åŒ…å·¥å…·è¯¦è§£ï¼ŒHTTPHTTPSè°ƒè¯•ã€ä»£ç†é…ç½®ä¸æ¥å£åˆ†æå®æˆ˜æ•™ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T03:19:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒçŒ´çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2179705232165364"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            FiddleræŠ“åŒ…å·¥å…·è¯¦è§£ï¼ŒHTTPHTTPSè°ƒè¯•ã€ä»£ç†é…ç½®ä¸æ¥å£åˆ†æå®æˆ˜æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2179705232165364/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒçŒ´çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:19:00.000Z" title="Tue Dec 02 2025 03:19:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰åç«¯åˆ†ç¦»ã€å¾®æœåŠ¡æ¶æ„æ—¥ç›Šå¤æ‚çš„ä»Šå¤©ï¼Œç½‘ç»œé€šä¿¡é—®é¢˜ã€æ¥å£å¼‚å¸¸ä¸æ€§èƒ½ç“¶é¢ˆå‡ ä¹æˆäº†æ¯ä½å¼€å‘è€…çš„â€œæ—¥å¸¸ä¼´ä¾£â€ã€‚
è¦ç²¾å‡†å®šä½è¿™äº›é—®é¢˜ï¼Œä¸€ä¸ªå¼ºå¤§çš„æŠ“åŒ…è°ƒè¯•å·¥å…·å°±æ˜¾å¾—è‡³å…³é‡è¦ã€‚</p>
<p>åœ¨ä¼—å¤šå·¥å…·ä¸­ï¼Œ<strong>FiddleræŠ“åŒ…å·¥å…·</strong> å‡­å€Ÿå…¶åŠŸèƒ½å…¨é¢ã€å…è´¹æ˜“ç”¨ã€å…¼å®¹æ€§å¼ºçš„ä¼˜åŠ¿ï¼Œæˆä¸ºå¼€å‘è€…åœ¨æ¥å£è°ƒè¯•ã€æ€§èƒ½åˆ†æå’Œç§»åŠ¨ç«¯è°ƒè¯•ä¸­çš„é¦–é€‰åˆ©å™¨ã€‚</p>
<p>æœ¬æ–‡å°†ç»“åˆå®æˆ˜ç»éªŒï¼Œç³»ç»Ÿè®²è§£ <strong>Fiddlerä½¿ç”¨æ•™ç¨‹ã€ä»£ç†é…ç½®ã€HTTPSæŠ“åŒ…ã€æ¥å£è°ƒè¯•ä¸ä¼˜åŒ–æŠ€å·§</strong>ï¼Œå¸®åŠ©ä½ é«˜æ•ˆæŒæ¡ç½‘ç»œè°ƒè¯•çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€FiddleræŠ“åŒ…å·¥å…·ç®€ä»‹</strong></h2>
<p><strong>Fiddler</strong> æ˜¯ Telerik å…¬å¸æ¨å‡ºçš„ä¸€æ¬¾ä¸“ä¸š HTTP/HTTPS æŠ“åŒ…ä¸è°ƒè¯•å·¥å…·ï¼Œé€šè¿‡ä»£ç†æœºåˆ¶æ‹¦æˆªå¹¶è®°å½•ç½‘ç»œè¯·æ±‚ï¼Œå®ç°å¯¹è¯·æ±‚å¤´ã€å“åº”å†…å®¹ã€å‚æ•°ä¸æ€§èƒ½çš„å…¨é¢åˆ†æã€‚</p>
<p>ç›¸æ¯”å…¶ä»–å¸¸è§å·¥å…·ï¼š</p>






























<table><thead><tr><th>å·¥å…·</th><th>ç‰¹ç‚¹</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td><strong>Fiddler</strong></td><td>å…è´¹ã€å¯å®šåˆ¶ã€æ”¯æŒæ–­ç‚¹ä¸Mock</td><td>åŠŸèƒ½å…¨é¢ã€è°ƒè¯•çµæ´»</td></tr><tr><td><strong>Charles</strong></td><td>å•†ä¸šè½¯ä»¶ï¼Œæ“ä½œç®€å•</td><td>ä¸Šæ‰‹å¿«ä½†åŠŸèƒ½ç•¥å¼±</td></tr><tr><td><strong>Postman</strong></td><td>è¯·æ±‚æ„é€ ä¸æµ‹è¯•å·¥å…·</td><td>ä¸æ”¯æŒå®æ—¶æŠ“åŒ…</td></tr><tr><td><strong>Wireshark</strong></td><td>åº•å±‚ç½‘ç»œåˆ†æå·¥å…·</td><td>ä¸“ä¸šä½†å­¦ä¹ é—¨æ§›é«˜</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€Fiddlerå®‰è£…ä¸é…ç½®æ­¥éª¤</strong></h2>
<h3 data-id="heading-2"><strong>1. å®‰è£…ä¸å¯åŠ¨</strong></h3>
<p>å®‰è£… Fiddler åï¼Œå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ¥ç®¡ç³»ç»Ÿä»£ç†ã€‚
æ‰“å¼€æµè§ˆå™¨è®¿é—®ä»»æ„ç½‘ç«™ï¼Œå³å¯åœ¨ Fiddler ç•Œé¢çœ‹åˆ°å®æ—¶è¯·æ±‚æµã€‚</p>
<ul>
<li>å·¦ä¸‹è§’æ˜¾ç¤º â€œCapturingâ€ è¡¨ç¤ºæ­£åœ¨æŠ“åŒ…ï¼›</li>
<li>è‹¥æ˜¾ç¤º â€œPausedâ€ï¼Œç‚¹å‡»å³å¯é‡æ–°å¼€å§‹ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>2. Fiddlerä»£ç†é…ç½®ï¼ˆç”µè„‘ä¸ç§»åŠ¨ç«¯ï¼‰</strong></h3>
<p>Fiddler é»˜è®¤ä»…æ•è·æœ¬æœºç½‘ç»œæµé‡ã€‚
è‹¥è¦æŠ“å–ç§»åŠ¨ç«¯ Appã€å°ç¨‹åºæˆ–å…¶ä»–è®¾å¤‡çš„è¯·æ±‚ï¼Œéœ€è¦å¼€å¯è¿œç¨‹ä»£ç†ã€‚</p>
<p><strong>é…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ Connections</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Allow remote computers to connect</strong>ï¼›</li>
<li>è®°å½•ç”µè„‘ IP åœ°å€ä¸ç«¯å£ï¼ˆé»˜è®¤ 8888ï¼‰ï¼›</li>
<li>ç¡®ä¿æ‰‹æœºä¸ç”µè„‘è¿æ¥åŒä¸€ Wi-Fiï¼›</li>
<li>åœ¨æ‰‹æœº Wi-Fi è®¾ç½®ä¸­æ·»åŠ ä»£ç†ï¼š
<ul>
<li>ä¸»æœºåï¼šç”µè„‘ IPï¼›</li>
<li>ç«¯å£å·ï¼š8888ã€‚</li>
</ul>
</li>
</ol>
<p>å®Œæˆåï¼ŒFiddler å³å¯æ•è·ç§»åŠ¨ç«¯æ‰€æœ‰ç½‘ç»œè¯·æ±‚ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>3. HTTPS æŠ“åŒ…é…ç½®</strong></h3>
<p>ç°ä»£ç½‘ç«™å‡ ä¹å…¨éƒ¨å¯ç”¨ HTTPS åŠ å¯†ï¼Œ
å› æ­¤éœ€è¦å®‰è£…å¹¶ä¿¡ä»» Fiddler è¯ä¹¦ï¼Œæ‰èƒ½æŸ¥çœ‹åŠ å¯†è¯·æ±‚ã€‚</p>
<p><strong>é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ HTTPS</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Decrypt HTTPS traffic</strong>ï¼›</li>
<li>ç‚¹å‡» â€œActions â†’ Trust Root Certificateâ€ï¼›</li>
<li>å®‰è£…å¹¶ä¿¡ä»»æ ¹è¯ä¹¦ï¼›</li>
<li>è‹¥æŠ“å–ç§»åŠ¨ç«¯è¯·æ±‚ï¼Œè¿˜éœ€å¯¼å‡ºè¯ä¹¦å¹¶åœ¨æ‰‹æœºä¿¡ä»»ã€‚</li>
</ul>
<p>é…ç½®å®Œæˆåï¼ŒFiddler å°†èƒ½æ˜¾ç¤º HTTPS è¯·æ±‚çš„å®Œæ•´ Header ä¸å“åº”å†…å®¹ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€Fiddlerä½¿ç”¨æ•™ç¨‹ï¼šæ ¸å¿ƒåŠŸèƒ½è¯¦è§£</strong></h2>
<h3 data-id="heading-6"><strong>1. è¯·æ±‚ä¸å“åº”åˆ†æ</strong></h3>
<p>Fiddler ä¸»ç•Œé¢æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰è¯·æ±‚ï¼Œ
ç‚¹å‡»ä»»æ„æ¡ç›®å³å¯æŸ¥çœ‹ï¼š</p>
<ul>
<li>è¯·æ±‚æ–¹å¼ï¼ˆGET/POST/PUT/DELETEï¼‰ï¼›</li>
<li>è¯·æ±‚ URL ä¸å‚æ•°ï¼›</li>
<li>è¯·æ±‚å¤´ã€Cookieã€è¯·æ±‚ä½“ï¼›</li>
<li>å“åº”çŠ¶æ€ç ã€è¿”å›æ•°æ®ä¸æ—¶é—´ç»Ÿè®¡ã€‚</li>
</ul>
<p>æŸç”µå•†æ¥å£åœ¨ç§»åŠ¨ç«¯åŠ è½½å¤±è´¥ï¼Œé€šè¿‡ Fiddler æŠ“åŒ…å‘ç°è¯·æ±‚å‚æ•°å¤šå¸¦äº†ä¸€ä¸ªç©ºæ ¼ï¼Œ
å¯¼è‡´åç«¯ç­¾åéªŒè¯ä¸é€šè¿‡ã€‚å‡ åˆ†é’Ÿå†…å³å¯å®šä½ä¿®å¤ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>2. æ¨¡æ‹Ÿæ¥å£å“åº”ï¼ˆAutoResponderï¼‰</strong></h3>
<p>AutoResponder æ¨¡å—å…è®¸å¼€å‘è€…æ¨¡æ‹Ÿæ¥å£å“åº”ï¼Œ
æ— éœ€ä¾èµ–åç«¯å³å¯æµ‹è¯•å‰ç«¯é€»è¾‘ã€‚</p>
<p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ AutoResponder é¢æ¿ï¼›</li>
<li>ç‚¹å‡» â€œAdd Ruleâ€ æ·»åŠ è§„åˆ™ï¼›</li>
<li>åŒ¹é…æ¥å£ URL æˆ–è·¯å¾„å…³é”®å­—ï¼›</li>
<li>é€‰æ‹©æœ¬åœ° JSON æ–‡ä»¶æˆ–è‡ªå®šä¹‰è¿”å›å†…å®¹ï¼›</li>
<li>å‹¾é€‰ â€œEnable Rulesâ€ å¯ç”¨è§„åˆ™ã€‚</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong>
å¯è®© <code>/api/user</code> è¿”å› <code>{ "status":200, "name":"test" }</code>ï¼Œ
å‰ç«¯å³å¯åœ¨åç«¯æœªå®Œæˆæ—¶æ­£å¸¸å¼€å‘ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>3. è¯·æ±‚æ–­ç‚¹ä¸ä¿®æ”¹ï¼ˆBreakpointsï¼‰</strong></h3>
<p>Fiddler æ”¯æŒåœ¨è¯·æ±‚æˆ–å“åº”é˜¶æ®µè®¾ç½®æ–­ç‚¹ï¼Œ
å¼€å‘è€…å¯åœ¨è¯·æ±‚å‘å‡ºæˆ–å“åº”è¿”å›å‰ä¿®æ”¹æ•°æ®ã€‚</p>
<p><strong>å¸¸ç”¨å‘½ä»¤ï¼š</strong></p>
<ul>
<li><code>bpu yourapi.com</code> â†’ è¯·æ±‚å‰æ–­ç‚¹ï¼›</li>
<li><code>bpafter yourapi.com</code> â†’ å“åº”å‰æ–­ç‚¹ï¼›</li>
<li><code>bpu</code> â†’ å…³é—­æ–­ç‚¹ã€‚</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ¨¡æ‹ŸæœåŠ¡å™¨é”™è¯¯ï¼ˆ500 / 404ï¼‰ï¼›</li>
<li>æµ‹è¯•æ¥å£å®¹é”™æœºåˆ¶ï¼›</li>
<li>æ‰‹åŠ¨ä¿®æ”¹å‚æ•°éªŒè¯æ¥å£å®‰å…¨æ€§ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>4. æ„é€ ä¸é‡æ”¾è¯·æ±‚ï¼ˆComposerï¼‰</strong></h3>
<p>Composer æ¨¡å—ç›¸å½“äºé›†æˆç‰ˆ Postmanï¼Œ
å¯æ„é€ è¯·æ±‚ã€ä¿®æ”¹å‚æ•°ã€è°ƒè¯•æ¥å£ã€‚</p>
<p><strong>ä½¿ç”¨æŠ€å·§ï¼š</strong></p>
<ul>
<li>æ”¯æŒè¯·æ±‚å¤´ã€Bodyã€å‚æ•°å®Œå…¨è‡ªå®šä¹‰ï¼›</li>
<li>å¯å¯¼å…¥å†å²è¯·æ±‚é‡æ”¾ï¼›</li>
<li>éªŒè¯ç­¾åç®—æ³•ã€æ¥å£ Token æˆ–èº«ä»½æ ¡éªŒé€»è¾‘ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>5. æ€§èƒ½åˆ†æï¼ˆTimelineï¼‰</strong></h3>
<p>Timeline æ¨¡å—å¯å¯è§†åŒ–å±•ç¤ºè¯·æ±‚è€—æ—¶é˜¶æ®µï¼š
DNS â†’ TCP â†’ TLS â†’ Server Response â†’ Content Downloadã€‚</p>
<p><strong>å…¸å‹ç”¨é€”ï¼š</strong></p>
<ul>
<li>åˆ†æåŠ è½½å»¶è¿Ÿç“¶é¢ˆï¼›</li>
<li>ä¼˜åŒ–æ¥å£å“åº”é€Ÿåº¦ï¼›</li>
<li>åˆ¤æ–­é—®é¢˜æ˜¯ç½‘ç»œè¿˜æ˜¯åç«¯æ€§èƒ½ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-11"><strong>å››ã€å®æˆ˜æ¡ˆä¾‹ï¼šæ¥å£å»¶è¿Ÿä¸è¯·æ±‚å¼‚å¸¸åˆ†æ</strong></h2>
<p>åœ¨æŸé¡¹ç›®ä¸­ï¼Œé¦–é¡µåŠ è½½è€—æ—¶è¶…è¿‡ 8 ç§’ã€‚
é€šè¿‡ Fiddler Timeline åˆ†æï¼š</p>
<ul>
<li>è¯·æ±‚é˜Ÿåˆ—é˜»å¡ä¸¥é‡ï¼›</li>
<li>DNS è§£ææ—¶é—´é«˜ï¼›</li>
<li>åç«¯å“åº”å»¶è¿Ÿæ˜æ˜¾ã€‚</li>
</ul>
<p>é€šè¿‡ä¼˜åŒ–åï¼š</p>
<ul>
<li>å¯ç”¨ç¼“å­˜å‡å°‘é‡å¤è¯·æ±‚ï¼›</li>
<li>åˆå¹¶èµ„æºè¯·æ±‚ï¼›</li>
<li>åç«¯å¼€å¯ Gzip å‹ç¼©ã€‚</li>
</ul>
<p>æœ€ç»ˆåŠ è½½æ—¶é—´é™è‡³ 2.3 ç§’ã€‚</p>
<blockquote>
<p>Fiddler ä¸ä»…ç”¨äºæŠ“åŒ…ï¼Œæ›´èƒ½æˆä¸ºç½‘ç»œæ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒå·¥å…·ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-12"><strong>äº”ã€FiddleråŠŸèƒ½æ¨¡å—æ€»è§ˆ</strong></h2>



































<table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Filters</strong></td><td>æŒ‰æ¡ä»¶ç­›é€‰è¯·æ±‚</td><td>ä»…å…³æ³¨ç›®æ ‡æ¥å£</td></tr><tr><td><strong>AutoResponder</strong></td><td>æ¨¡æ‹Ÿæ¥å£å“åº”</td><td>å‰åç«¯åˆ†ç¦»è°ƒè¯•</td></tr><tr><td><strong>Breakpoints</strong></td><td>æ‹¦æˆªå¹¶ä¿®æ”¹è¯·æ±‚</td><td>å¼‚å¸¸æ¨¡æ‹Ÿä¸å®‰å…¨æµ‹è¯•</td></tr><tr><td><strong>Composer</strong></td><td>æ„é€ ä¸é‡æ”¾è¯·æ±‚</td><td>æ¥å£éªŒè¯ä¸æ€§èƒ½è°ƒè¯•</td></tr><tr><td><strong>Timeline</strong></td><td>è¯·æ±‚æ€§èƒ½åˆ†æ</td><td>ç½‘ç»œæ€§èƒ½ä¼˜åŒ–</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13"><strong>å…­ã€Fiddlerå­¦ä¹ ä¸èµ„æºæ¨è</strong></h2>
<p>æƒ³æ·±å…¥å­¦ä¹  Fiddler çš„æ›´å¤šç”¨æ³•ï¼Ÿæ¨èè®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.fiddler.hk%2F" target="_blank" title="https://www.fiddler.hk/" ref="nofollow noopener noreferrer">Fiddler ä¸­æ–‡ç½‘</a></p>
<ul>
<li>Fiddler å®‰è£…ä¸é…ç½®æ•™ç¨‹ï¼›</li>
<li>HTTPS æŠ“åŒ…ä¸è¯ä¹¦è®¾ç½®æ–¹æ³•ï¼›</li>
<li>ç§»åŠ¨ç«¯ä»£ç†è°ƒè¯•æŒ‡å—ï¼›</li>
<li>Mock æ•°æ®ä¸æ–­ç‚¹è°ƒè¯•æŠ€å·§ï¼›</li>
<li>ç½‘ç»œæ€§èƒ½ä¼˜åŒ–å®æˆ˜æ¡ˆä¾‹ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸çŸ¥é“æ€ä¹ˆé€‰å‹æ–‡ä»¶å‹æ•°æ®åº“ï¼Ÿå¿«æ¥çœ‹çœ‹å§]]></title>    <link>https://juejin.cn/post/7578781397117829166</link>    <guid>https://juejin.cn/post/7578781397117829166</guid>    <pubDate>2025-12-02T03:19:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578781397117829166" data-draft-id="7578793960626847770" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸çŸ¥é“æ€ä¹ˆé€‰å‹æ–‡ä»¶å‹æ•°æ®åº“ï¼Ÿå¿«æ¥çœ‹çœ‹å§"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-02T03:19:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3227821868332765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸çŸ¥é“æ€ä¹ˆé€‰å‹æ–‡ä»¶å‹æ•°æ®åº“ï¼Ÿå¿«æ¥çœ‹çœ‹å§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3227821868332765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:19:11.000Z" title="Tue Dec 02 2025 03:19:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»26åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸çŸ¥é“æ€ä¹ˆé€‰å‹æ–‡ä»¶å‹æ•°æ®åº“ï¼Ÿå¿«æ¥çœ‹çœ‹å§</h2>
<p>æœ€è¿‘æ­£å¥½éœ€è¦ä¸ºé¡¹ç›®é€‰æ‹©ä¸€ä¸ªåˆå§‹åœºæ™¯çš„å­¦ä¹ å’Œè¯•ç”¨åœºæ™¯çš„å…³ç³»å‹æ•°æ®åº“ï¼Œå¯¹äºè¿™ç§åœºæ™¯ï¼Œæ–‡ä»¶å‹æ•°æ®åº“å°±æ˜¯æœ€åˆé€‚çš„ï¼Œå› ä¸ºå…¶å‡ ä¹æ²¡æœ‰éƒ¨ç½²æˆæœ¬ï¼Œå¹¶ä¸”æ•°æ®è¿ç§»ä¾¿åˆ©ï¼Œèµ„æºæ¶ˆè€—ä½ã€‚</p>
<h3 data-id="heading-1">SQLite</h3>
<p>é‚£æ—¢ç„¶è¯´åˆ°äº†æ–‡ä»¶å‹æ•°æ®åº“ï¼Œé‚£ SQLite å¯å°±ç²¾ç¥äº†ã€‚ä½œä¸ºæ–‡ä»¶å‹æ•°æ®åº“çš„ä¸­æµç ¥æŸ±ï¼Œå®ƒå‡ ä¹å æ®äº†åµŒå…¥å¼åœºæ™¯ 70% ä»¥ä¸Šçš„æ±Ÿå±±ã€‚ä½ çš„æ‰‹æœºç›¸å†Œã€ä½ çš„æµè§ˆå™¨å†å²è®°å½•ã€ä½ æ­£åœ¨ç”¨çš„ IDEã€ä½ å¾®ä¿¡çš„èŠå¤©è®°å½•ï¼Œç”šè‡³ä½ é‚£å°æ™ºèƒ½å†°ç®±é‡Œï¼Œå¯èƒ½éƒ½é™é™åœ°èººç€ä¸€ä¸ª <code>.SQLite</code> æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-2">Small. Fast. Reliable. Choose any three</h4>
<p>ä½œä¸ºåµŒå…¥å¼æ•°æ®åº“çš„ä¸­æµç ¥æŸ±ï¼ŒSQLite æœ‰è¯¸å¤šè¿‡äººä¹‹å¤„ï¼š</p>
<ol>
<li><strong>é«˜åº¦å¯é ï¼Œç»è¿‡ä¸¥è‹›æµ‹è¯•</strong>ï¼šSQLite çš„ä½œè€…å¯¹ç¨³å®šæ€§è¿‘ä¹åæ‰§ï¼Œæœ€æ–°ç»Ÿè®¡å…¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.SQLite.org%2Ftesting.html" target="_blank" title="https://www.SQLite.org/testing.html" ref="nofollow noopener noreferrer">æµ‹è¯•ä»£ç è¡Œæ•°è¶…è¿‡ 9000 ä¸‡è¡Œï¼Œè¿œè¿œé«˜äºè‡ªèº«çº¦ 15 ä¸‡è¡Œçš„æºç </a>ã€‚æ­£å› å¦‚æ­¤ï¼ŒSQLite è¢«è§†ä¸ºâ€œéå¸¸å¥å£®ä¸”è€ç”¨â€çš„æ•°æ®åº“ï¼Œå¼•æ“å“è´¨åª²ç¾å·¥ä¸šçº§äº§å“ã€‚å®é™…åº”ç”¨ä¸­åªè¦éµå¾ªå®˜æ–¹å»ºè®®é…ç½®ï¼Œå®ƒå‡ ä¹ä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œå“ªæ€•é¢å¯¹å„ç§å¼‚å¸¸æƒ…å†µä¹Ÿèƒ½ä¿è¯æ•°æ®å®Œæ•´æ€§ã€‚</li>
<li><strong>é›¶é…ç½®æ˜“ç”¨</strong>ï¼šSQLite æ˜¯è‡ªåŒ…å«çš„ï¼Œæ— éœ€å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¶æ„ï¼Œä¸ç”¨å¯åŠ¨ç‹¬ç«‹æœåŠ¡è¿›ç¨‹ã€‚[åº”ç”¨è¿›ç¨‹ç›´æ¥ä»¥å‡½æ•°åº“å½¢å¼è°ƒç”¨å®ƒçš„åŠŸèƒ½](<a href="https://link.juejin.cn?target=https%3A%2F%2FSQLite.org%2Fwhentouse.html%23%3A~%3Atext%3DClient%252Fserver" target="_blank" title="https://SQLite.org/whentouse.html#:~:text=Client%2Fserver" ref="nofollow noopener noreferrer">SQLite.org/whentouse.hâ€¦</a> SQL database engines strive,efficiency%2C reliability%2C independence%2C and simplicity)ã€‚è¿™æ„å‘³ç€éƒ¨ç½²å’Œä½¿ç”¨æå…¶ç®€å•ï¼šä¸€ä¸ªåº“æ–‡ä»¶åŠ ä¸Šä¸€æŠŠ SQLï¼Œå°±èƒ½åœ¨åº”ç”¨å†…éƒ¨å®ç°æ•°æ®æŒä¹…åŒ–ã€‚å¯¹å¼€å‘è€…æ¥è¯´ï¼ŒSQLite â€œæ‹¿æ¥å³ç”¨â€ï¼Œéå¸¸é€‚åˆå¿«é€Ÿå¼€å‘å’Œå°å‹é¡¹ç›®çš„åµŒå…¥å¼å­˜å‚¨ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜å¼‚</strong>ï¼šåˆ«çœ‹ SQLite ä½“ç§¯å°ï¼Œå•æœºå•æ–‡ä»¶å†…å®ƒçš„è¯»å†™é€Ÿåº¦ç›¸å½“å¿«ã€‚åœ¨äº‹åŠ¡å‹è´Ÿè½½ï¼ˆå¤§é‡ç‚¹æŸ¥è¯¢ã€å¿«é€Ÿæ’å…¥æ›´æ–°ï¼‰åœºæ™¯ä¸‹ï¼ŒSQLite è¡¨ç°éå¸¸å‡ºè‰²ã€‚å®˜æ–¹ç»éªŒè¡¨æ˜ï¼ŒSQLite æ“…é•¿å¤„ç†ç‚¹æŸ¥è¯¢å’Œå•è®°å½•è¯»å†™ï¼Œèƒ½åœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šæ”¯æ’‘æ¯ç§’ä¸Šä¸‡æ¬¡ç®€å•æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæŒ‰ä¸»é”®æŸ¥è¯¢è¿™æ ·çš„æ“ä½œï¼ŒSQLite åˆ©ç”¨ç´¢å¼•å¯ä»¥åœ¨æ¯«ç§’çº§è¿”å›ç»“æœã€‚å¾ˆå¤šåº”ç”¨ä½¿ç”¨ SQLite ä»£æ›¿ä¼ ç»Ÿæ–‡ä»¶è¯»å†™ï¼Œæ€§èƒ½åè€Œæ›´å¥½ï¼Œå› ä¸ºå®ƒå†…éƒ¨å¯¹æ•°æ®ç»„ç»‡å’Œæ£€ç´¢åšäº†å¤§é‡ä¼˜åŒ–ã€‚</li>
<li><strong>èµ„æºå ç”¨ä½</strong>ï¼šä½œä¸ºé¢å‘ç§»åŠ¨/åµŒå…¥å¼åœºæ™¯è®¾è®¡çš„å¼•æ“ï¼ŒSQLite å¯¹å†…å­˜å’Œå­˜å‚¨çš„è¦æ±‚éƒ½å¾ˆä½ã€‚å…¶äºŒè¿›åˆ¶åº“é€šå¸¸ä¸åˆ°1MBå¤§å°ï¼Œè€Œåœ¨è¿è¡Œæ—¶ï¼ŒSQLite ä¹Ÿä»¥ç²¾å·§çš„æœºåˆ¶é¿å…æµªè´¹å†…å­˜ã€‚åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œæ’å…¥ç™¾ä¸‡çº§åˆ«çš„æ•°æ®åï¼ŒSQLite è¿›ç¨‹çš„å†…å­˜ä»…å¢åŠ åŒºåŒºæ•°å…†å­—èŠ‚ï¼Œè¿™ä¸€æ•°å­—è¿œä½äºåŒç±» Java æ•°æ®åº“ã€‚è¿™ç§å°å†…å­˜å ç”¨ä½¿å®ƒéå¸¸é€‚åˆåœ¨å†…å­˜æœ‰é™çš„ç¯å¢ƒï¼ˆæ‰‹æœºã€ç‰©è”ç½‘è®¾å¤‡ç­‰ï¼‰ä¸­é•¿æœŸè¿è¡Œã€‚</li>
</ol>
<h4 data-id="heading-3">æ²¡æœ‰é“¶å¼¹</h4>
<p>ä½†æ˜¯ï¼Œå‡¡äº‹æ²¡æœ‰é“¶å¼¹ï¼Œå¦‚æœ SQLite çœŸçš„å®Œç¾æ— ç‘•ï¼Œé‚£ä¹ˆä¸–ç•Œä¸Šå°±è‚¯å®šåªæœ‰ä¸€ç§æ–‡ä»¶å‹æ•°æ®åº“äº†ã€‚å½“ä½ è¯•å›¾ç”¨ SQLite æ‰›èµ·ç¨å¾®å¤æ‚ä¸€ç‚¹çš„ä¸šåŠ¡æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li><strong>å¼±ç±»å‹ä¸”</strong> <strong>SQL</strong> <strong>è¯­æ³•ä¸å®Œå¤‡</strong>ï¼šå½“ä½ å¼€å¿ƒåœ°ç»™æ¯ä¸€ä¸ªè¡¨åˆ›å»ºä¸€ä¸ª <code>created_at</code> ä½œä¸ºåˆ›å»ºæ—¶é—´æ—¶ï¼Œä½ çªç„¶å‘ç°ï¼ŒSQLite è¿™ç©æ„ç«Ÿç„¶<strong>æ²¡æœ‰æ—¶é—´ç±»å‹ï¼</strong>ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2FSQLite.org%2Fdatatype3.html" target="_blank" title="https://SQLite.org/datatype3.html" ref="nofollow noopener noreferrer">SQLite ä¸­ä»…æœ‰ 5 ç§ç±»å‹: NULL, INTEGER, REAL, TEXT, BLOB</a>ã€‚æ­¤å¤–ï¼ŒSQLite å¯¹ SQL è¯­æ³•çš„æ”¯æŒä¹Ÿä¸å®Œæ•´ï¼Œæ¯”å¦‚å¹¶ä¸æ”¯æŒ å­˜å‚¨è¿‡ç¨‹ï¼Œäº‹åŠ¡éš”ç¦»çº§åˆ«ä»…æ”¯æŒä¸²è¡ŒåŒ–ä»¥åŠ RIGHT/OUTER FULL JOIN ç­‰</li>
<li><strong>å¹¶å‘</strong>ï¼šä½ è¦ä½ ç”¨è¿‡ SQLiteï¼Œé‚£å‡ ä¹è§è¿‡è¿™ä¸ªé”™è¯¯ï¼š<code>SQLite_BUSY: database is locked</code>, SQLite åœ¨å¹¶å‘è¯»å†™æ–¹é¢æœ‰å¤©ç”Ÿå±€é™ï¼š<strong>åŒä¸€æ—¶é—´åªå…è®¸ä¸€ä¸ªå†™äº‹åŠ¡</strong></li>
<li><strong>åˆ†ææ…¢</strong>ï¼šè€æ¿è®©ä½ ç»Ÿè®¡è¿‡å»åå¹´çš„è®¢å•æ€»é¢ï¼Œä½ å†™äº†ä¸ª <code>GROUP BY</code>ï¼Œç»“æœ SQLite è·‘å¾—æ¯”è€ç‰›æ‹‰ç ´è½¦è¿˜æ…¢ã€‚ä¸è¿‡ SQLite æ˜¯ OLTP å‹æ•°æ®åº“ï¼Œè¿™é‡Œè¯´åˆ†æèƒ½åŠ›æœ‰ç‚¹å¼ºäººæ‰€éš¾äº†</li>
<li><strong>å•ç‚¹</strong>ï¼šæœåŠ¡å™¨ç¡¬ç›˜åäº†ï¼Œé‚£ä¹ˆä¸å¥½æ„æ€äº†ï¼Œä½ çš„æ•°æ®åº“å½»åº•ä¸¢å¤±äº†ã€‚å¯¹äºè¦æ±‚é«˜å¯ç”¨çš„å…³é”®åº”ç”¨æ¥è¯´ï¼Œä»…é  SQLite å•èŠ‚ç‚¹æ˜¾ç„¶ä¸å¤Ÿï¼Œéœ€è¦é€šè¿‡æ“ä½œç³»ç»Ÿå±‚é¢çš„å®šæœŸå¤‡ä»½</li>
</ol>
<p>å·§äº†ï¼Œé’ˆå¯¹ SQLite è¿™äº›ç¼ºç‚¹ï¼Œåœ¨ä¸åŒé¢†åŸŸç¡®å®å­˜åœ¨ç›¸åº”çš„æ•°æ®åº“å¯¹å…¶è¡¥è¶³äº†ã€‚</p>
<h3 data-id="heading-4">H2</h3>
<p>é¦–å…ˆå°±æ˜¯ H2ã€‚</p>
<p>å¦‚æœè¯´ SQLite æ˜¯ C è¯­è¨€æ‰“é€ çš„åµŒå…¥å¼ç‹è€…ï¼Œé‚£ä¹ˆ H2 åˆ™æ˜¯ Java ç”Ÿæ€ä¸­çš„åèµ·ä¹‹ç§€ã€‚</p>
<h4 data-id="heading-5">Java åŸç”Ÿï¼ŒåŠŸèƒ½å®Œå¤‡</h4>
<p>H2 Database Engine æ˜¯ä¸€ä¸ªçº¯ Java ç¼–å†™çš„è½»é‡çº§å…³ç³»æ•°æ®åº“ã€‚ç”±äºå¤©ç”Ÿå’Œ JVM ç¯å¢ƒé«˜åº¦å¥‘åˆï¼ŒH2 å·²æˆä¸ºè®¸å¤š Java é¡¹ç›®çš„é»˜è®¤åµŒå…¥å¼æ•°æ®åº“é€‰æ‹©ï¼ˆä¾‹å¦‚ Spring Boot çš„é»˜è®¤å†…å­˜æ•°æ®åº“å°±æ˜¯ H2ï¼‰ã€‚</p>
<p>å®ƒæœ‰å¦‚ä¸‹çš„ä¼˜ç‚¹ï¼š</p>
<ol>
<li><strong>å®Œæ•´çš„ç±»å‹å’Œ</strong> <strong>SQL</strong> <strong>æ”¯æŒ</strong>ï¼šè¿™ç‚¹ç›´å‡» SQLite å¼±ç±»å‹çš„ç—›ç‚¹ï¼Œå®ƒé‡‡ç”¨é™æ€æ¨¡å¼çš„å¼ºç±»å‹ç³»ç»Ÿï¼Œæä¾›äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgrokipedia.com%2Fpage%2FH2_(database)" target="_blank" title="https://grokipedia.com/page/H2_(database)" ref="nofollow noopener noreferrer">å®Œæ•´çš„ SQL ç±»å‹ç³»ç»Ÿä»¥åŠå®Œæ•´çš„äº‹åŠ¡éš”ç¦»çº§åˆ«</a>ã€‚æ€»ä½“è€Œè¨€ï¼ŒH2 åœ¨åŠŸèƒ½è¦†ç›–ä¸Šæ›´æ¥è¿‘ä¼ ç»Ÿæ•°æ®åº“</li>
<li><strong>çº¯Javaå®ç°ï¼Œå¼€ç®±å³ç”¨</strong>ï¼šç”±äº H2 å®Œå…¨ç”± Java ç¼–å†™ï¼Œå®ƒå¯ä»¥ç›´æ¥åµŒå…¥è¿è¡Œäº JVM çš„åº”ç”¨ï¼Œè€Œæ— éœ€åƒ SQLite é‚£æ ·é€šè¿‡ JNI è°ƒç”¨æœ¬åœ°åº“ã€‚è¿™å¸¦æ¥çš„å¥½å¤„æ˜¯éƒ¨ç½²æ›´åŠ ç®€å•â€”â€”ä¸å†å—é™äºæ“ä½œç³»ç»Ÿï¼ŒJavaer ä¹Ÿèƒ½æ›´å®¹æ˜“åœ°è°ƒè¯•å’Œæ’æŸ¥é—®é¢˜ï¼ˆæ¯•ç«ŸH2çš„å¼‚å¸¸æ ˆéƒ½æ˜¯Javaä»£ç ï¼‰ã€‚åŒæ—¶ï¼ŒH2 æä¾›äº†æ–¹ä¾¿çš„åµŒå…¥æ¨¡å¼å’ŒæœåŠ¡å™¨æ¨¡å¼ã€‚åµŒå…¥æ¨¡å¼ä¸‹ï¼Œå®ƒå’Œåº”ç”¨å…±äº«åŒä¸€ JVM å†…å­˜ï¼Œæ•°æ®æ–‡ä»¶å­˜æœ¬åœ°ï¼›è€Œåˆ‡æ¢åˆ°æœåŠ¡å™¨æ¨¡å¼ï¼Œåˆå¯ä»¥è®©å¤šä¸ªè¿›ç¨‹é€šè¿‡TCP/IPåè®®å…±åŒè®¿é—®æ•°æ®åº“</li>
<li><strong>æ€§èƒ½å’Œå¹¶å‘</strong>ï¼šç›Šäº Java å®ç°ï¼ŒH2 å†…éƒ¨é‡‡ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.h2database.com%2Fhtml%2Fadvanced.html%3Futm_source%3Dchatgpt.com%23mvcc" target="_blank" title="https://www.h2database.com/html/advanced.html?utm_source=chatgpt.com#mvcc" ref="nofollow noopener noreferrer">å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰æ¥æ”¯æŒæ›´é«˜çš„å¹¶å‘åº¦</a>ï¼Œå®ƒå…è®¸å¤šä¸ªè¿æ¥åŒæ—¶è¯»å†™åŒä¸€ä¸ªæ•°æ®åº“ï¼Œé’ˆå¯¹è¡Œçº§åˆ«åŠ é”ï¼Œä»è€Œå‡å°‘é”ç«äº‰ã€‚ç›¸è¾ƒäºSQLiteçš„å•å†™è€…é™åˆ¶ï¼ŒH2 åœ¨å¹¶å‘å†™å…¥åœºæ™¯ä¸‹æ›´å…·ä¼˜åŠ¿ã€‚æ­¤å¤–ï¼ŒH2 å†…ç½®äº†ç¼“å­˜æœºåˆ¶ï¼Œä¼šå°†æœ€è¿‘å’Œé¢‘ç¹è®¿é—®çš„æ•°æ®é¡µç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œåˆç†è°ƒä¼˜ç¼“å­˜å¤§å°å¯ä»¥å¤§å¹…æå‡æŸ¥è¯¢æ€§èƒ½ã€‚</li>
<li><strong>æ˜“äºè°ƒè¯•å’Œç®¡ç†</strong>ï¼šH2 é™„å¸¦ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„Webæ§åˆ¶å°ï¼Œå…è®¸å¼€å‘è€…åœ¨æµè§ˆå™¨ä¸­è¿æ¥æ•°æ®åº“ã€æ‰§è¡ŒSQLã€æŸ¥çœ‹è¡¨ç»“æ„ï¼Œéå¸¸æ–¹ä¾¿ã€‚ï¼ˆå…¶å®ä¸€ç‚¹ä¹Ÿä¸å¥½ç”¨ï¼ŒUI å¤è€è€Œä¸”åŠŸèƒ½å¾ˆå°‘ï¼Œä¸å¦‚ç›´æ¥ä½¿ç”¨ DB Managerï¼‰</li>
</ol>
<h4 data-id="heading-6">H2 çš„å±€é™æ€§</h4>
<p>å°½ç®¡ H2 åŠŸèƒ½å¼ºå¤§ï¼Œä½†åœ¨æŸäº›æ–¹é¢å´ä¸å¦‚ SQLite é‚£èˆ¬ç¨³è‹¥ç£çŸ³ï¼Œä¸»è¦ä½“ç°åœ¨æ•°æ®æŒä¹…åŒ–å¯é æ€§å’Œå¤§æ•°æ®é›†ä¸‹çš„èµ„æºæ¶ˆè€—ï¼š</p>
<ol>
<li><strong>æŒä¹…åŒ–å®‰å…¨æ€§</strong>ï¼šH2 å¯¹äº‹åŠ¡ Durabilityï¼ˆæŒä¹…æ€§ï¼‰çš„ä¿è¯ä¸å¦‚ ã€‚æ­¤å¤–ï¼ŒSQLite é‚£æ ·ä¸¥æ ¼ã€‚åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œäº‹åŠ¡æäº¤åæ•°æ®åº”å½“å†™å…¥æŒä¹…ä»‹è´¨ï¼Œå³ä½¿æ–­ç”µä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ä½†H2å®˜æ–¹æ–‡æ¡£æ˜ç¡®æŒ‡å‡ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.h2database.com%2Fhtml%2Fadvanced.html%3Futm_source%3Dchatgpt.com%23durability_problems" target="_blank" title="https://www.h2database.com/html/advanced.html?utm_source=chatgpt.com#durability_problems" ref="nofollow noopener noreferrer">ä¸ä¿è¯æ‰€æœ‰å·²æäº¤äº‹åŠ¡ä¸€å®šèƒ½åœ¨æ‰ç”µåå­˜æ´»</a>ï¼Œç”šè‡³è¿˜åœ¨åé¢è¯´<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.h2database.com%2Fhtml%2Fadvanced.html%3Futm_source%3Dchatgpt.com%23durability_problems%3A~%3Atext%3D%25E4%25B8%2580%25E4%25BA%259B%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%25E5%25A3%25B0%25E7%25A7%25B0%25E4%25BB%2596%25E4%25BB%25AC%25E8%2583%25BD%25E5%25A4%259F%25E4%25BF%259D%25E8%25AF%2581%25E6%258C%2581%25E4%25B9%2585%25E6%2580%25A7%25EF%25BC%258C%25E4%25BD%2586%25E8%25BF%2599%25E4%25BA%259B%25E5%25A3%25B0%25E6%2598%258E%25E6%2598%25AF%25E9%2594%2599%25E8%25AF%25AF%25E7%259A%2584" target="_blank" title="https://www.h2database.com/html/advanced.html?utm_source=chatgpt.com#durability_problems:~:text=%E4%B8%80%E4%BA%9B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A3%B0%E7%A7%B0%E4%BB%96%E4%BB%AC%E8%83%BD%E5%A4%9F%E4%BF%9D%E8%AF%81%E6%8C%81%E4%B9%85%E6%80%A7%EF%BC%8C%E4%BD%86%E8%BF%99%E4%BA%9B%E5%A3%B0%E6%98%8E%E6%98%AF%E9%94%99%E8%AF%AF%E7%9A%84" ref="nofollow noopener noreferrer">ä¸€äº›æ•°æ®åº“å£°ç§°ä»–ä»¬èƒ½å¤Ÿä¿è¯æŒä¹…æ€§ï¼Œä½†è¿™äº›å£°æ˜æ˜¯é”™è¯¯çš„</a>ï¼ˆè¿™è¯´çš„è°æˆ‘æƒ³å¤§å®¶éƒ½çŸ¥é“ï¼‰</li>
<li><strong>å¯é æ€§</strong>ï¼šç”±äºæµ‹è¯•å¼ºåº¦å’Œç¤¾åŒºä½¿ç”¨é¢ä¸åŠ SQLiteï¼ŒH2 åœ¨å¤§æ•°æ®é‡ã€é•¿æ—¶é—´è¿è¡Œæ—¶æ›å‡ºè¿‡ä¸€äº›é—®é¢˜ã€‚ä¸€äº›åœ¨ç”Ÿäº§ä¸­å°è¯•ä½¿ç”¨ H2 çš„å¼€å‘è€…åé¦ˆï¼šå½“æ•°æ®è§„æ¨¡å¢å¤§ã€å¹¶å‘è¯·æ±‚å˜å¤šæ—¶ï¼Œ[H2 å®¹æ˜“å‡ºç°æ­»é”ã€æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼Œç”šè‡³å¶å°”ä¼šæœ‰æ•°æ®æŸåæˆ–ä¸¢å¤±çš„æƒ…å†µ](<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.baeldung.com%2Fh2-production-database-features-limitations%23%3A~%3Atext%3DReading" target="_blank" title="https://www.baeldung.com/h2-production-database-features-limitations#:~:text=Reading" ref="nofollow noopener noreferrer">www.baeldung.com/h2-productiâ€¦</a> reports and articles from,performance when the data grows)ã€‚è¿™ç‚¹å¯¹äºç”Ÿäº§ç¯å¢ƒæ¥è¯´æ˜¯è‡´å‘½çš„ï¼Œæ²¡æœ‰äº§å“èƒ½æ¥å—ç”¨æˆ·çš„æ•°æ®ä¸¢å¤±é—®é¢˜ã€‚</li>
<li><strong>å†…å­˜****ä¸èµ„æºæ¶ˆè€—</strong>ï¼šç›¸è¾ƒäºé«˜åº¦ç²¾ç®€çš„ SQLiteï¼ŒH2 å¯¹å†…å­˜çš„èƒƒå£è¦å¤§å¾—å¤šã€‚ä¸€æ–¹é¢ï¼ŒJava å®ç°æœ¬èº«ä¼šå ç”¨ä¸€å®šå †ç©ºé—´ï¼›æ›´é‡è¦çš„æ˜¯ï¼ŒH2 ä¸ºè¿½æ±‚æ€§èƒ½ä¼šåœ¨å†…å­˜ä¸­ç¼“å­˜å¤§é‡æ•°æ®é¡µå’Œç´¢å¼•ã€‚ä¸€æ—¦æ•°æ®é‡ä¸Šå»ï¼ŒH2 è¿›ç¨‹çš„å†…å­˜æ¶ˆè€—å¯èƒ½ç›´é€¼å‡ ç™¾MBç”šè‡³æ›´é«˜ï¼Œè¿™ç‚¹ï¼Œåœ¨åç»­çš„ <code>æ€§èƒ½å¯¹æ¯”</code> ç« èŠ‚ä¼šæœ‰æ˜ç¡®çš„æ•°æ®ç»“è®ºã€‚</li>
</ol>
<p>æ€»å¾—æ¥è¯´ï¼ŒH2 æ‰©å±•äº† SQLite çš„åŠŸèƒ½è¾¹ç•Œï¼Œåœ¨çº¯ Java ç”Ÿæ€ä¸‹æä¾›äº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„åµŒå…¥å¼æ•°æ®åº“ã€‚ç„¶è€Œè¿™ä¸€åˆ‡æ˜¯ä»¥æ›´é«˜çš„èµ„æºæˆæœ¬ä¸ºä»£ä»·çš„ï¼Œå¹¶ä¸”åœ¨æ•°æ®å®‰å…¨æ€§ä¸Šå­˜åœ¨ä¸€å®šéšå¿§ã€‚å¦‚æœæ‚¨çš„åº”ç”¨å¯¹æ•°æ®å¯é å’Œé•¿æ—¶é—´ç¨³å®šè¿è¡Œè¦æ±‚æé«˜ï¼Œé€‰æ‹© H2 éœ€ä¸‰æ€ï¼›ä½†å¦‚æœçœ‹é‡å…¶çµæ´»æ€§ï¼ˆå†…å­˜/æ–‡ä»¶/æœåŠ¡å™¨æ¨¡å¼ï¼‰å’Œæ˜“ç”¨æ€§ï¼ˆJava åŸç”Ÿï¼‰ï¼ŒH2 ä»ç„¶æ˜¯å€¼å¾—è€ƒè™‘çš„æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-7">rqlite</h3>
<p>ä»åå­—ä¸­å°±å¯ä»¥çŸ¥é“ï¼Œrqlite æ˜¯å¯¹ SQLite çš„è¡¥å……æ‰©å±•ï¼Œrqlite å¯ä»¥ç®€å•ç†è§£ä¸º<code>åŸºäº SQLite çš„åˆ†å¸ƒå¼æ•°æ®åº“</code>ï¼šå®ƒåœ¨å¤šå°èŠ‚ç‚¹ä¸Šå¤åˆ¶ SQLite çš„æ•°æ®ï¼Œ[é€šè¿‡ Raft å…±è¯†ç®—æ³•ä¿è¯å„èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§](<a href="https://link.juejin.cn?target=https%3A%2F%2Frqlite.io%2Fdocs%2Ffaq%2F%23%3A~%3Atext%3DOn" target="_blank" title="https://rqlite.io/docs/faq/#:~:text=On" ref="nofollow noopener noreferrer">rqlite.io/docs/faq/#:â€¦</a> top of that%2C rqlite,that data at all times)</p>
<p>æ¢å¥è¯è¯´ï¼Œrqlite å°†åŸæœ¬å•æœºçš„ SQLite å˜èº«ä¸ºä¸€ä¸ªæ”¯æŒé«˜å¯ç”¨å†—ä½™çš„ç³»ç»Ÿâ€”â€”åªè¦é›†ç¾¤ä¸­å¤šæ•°èŠ‚ç‚¹å­˜æ´»ï¼Œä½ çš„åº”ç”¨ä»ç„¶å¯ä»¥è®¿é—®åˆ°æœ€æ–°çš„æ•°æ®ã€‚è¿™å¯¹éœ€è¦è½»é‡çº§åˆ†å¸ƒå¼å­˜å‚¨çš„åœºæ™¯æ¥è¯´éå¸¸æœ‰å¸å¼•åŠ›ã€‚</p>
<h4 data-id="heading-8">ç‰¹ç‚¹ä¸é€‚ç”¨åœºæ™¯</h4>
<ol>
<li><strong>æ˜“éƒ¨ç½²ï¼Œä½è¿ç»´æˆæœ¬</strong>ï¼šrqlite éå¸¸è½»é‡ï¼Œæ¯ä¸ªèŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªå‡ MBå¤§å°çš„å¯æ‰§è¡Œç¨‹åºï¼Œæ— éœ€é¢å¤–ä¾èµ–ã€‚</li>
<li><strong>é«˜å¯ç”¨ä¸æ•°æ®å®‰å…¨</strong>ï¼šrqlite åŸºäº Raft åè®®ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œè¿™æ„å‘³ç€åœ¨ä»»æ„æ—¶åˆ»ç³»ç»Ÿåªä¼šæœ‰ä¸€ä»½ä¸€è‡´çš„æ•°æ®åº“çŠ¶æ€ã€‚æ•°æ®è¢«å®Œæ•´åœ°å¤åˆ¶åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œå•ç‚¹æ•…éšœä¸å†è‡´å‘½ã€‚</li>
<li><strong>SQLite</strong> <strong>é«˜åº¦å…¼å®¹</strong>ï¼šrqlite è™½ç„¶åŠ äº†åˆ†å¸ƒå¼å¤–è¡£ï¼Œä½†åº•å±‚ç”¨çš„ä»æ˜¯ SQLite å¼•æ“ã€‚å®ƒå¯¹å¤–æš´éœ² HTTP API ä¾›åº”ç”¨å†™å…¥æŸ¥è¯¢ï¼Œä½†ä½ åœ¨APIé‡Œæ‰§è¡Œçš„å…¶å®è¿˜æ˜¯æ ‡å‡†çš„ SQL è¯­å¥ï¼Œ[SQLite æ”¯æŒçš„å¤æ‚æŸ¥è¯¢ã€å…¨æ–‡æ£€ç´¢ã€JSON å‡½æ•°ç­‰ï¼Œåœ¨ rqlite ä¸ŠåŒæ ·é€‚ç”¨](<a href="https://link.juejin.cn?target=https%3A%2F%2Frqlite.io%2Fdocs%2Ffeatures%2F%23%3A~%3Atext%3DCore" target="_blank" title="https://rqlite.io/docs/features/#:~:text=Core" ref="nofollow noopener noreferrer">rqlite.io/docs/featurâ€¦</a> functionality)</li>
</ol>
<h4 data-id="heading-9">é±¼å’Œç†ŠæŒä¸å¯å…¼å¾—</h4>
<p>æ—¢è¦æœ‰è¦æ˜¯ä¸å¯å–çš„ï¼Œè™½ç„¶ rqlite è¡¥è¶³äº† SQLite å•ç‚¹ç¼ºé™·çš„éš¾é¢˜ï¼Œä½†æ˜¯ä¸ºæ­¤ï¼Œå®ƒä¹Ÿä¸å¾—ä¸èˆå¼ƒä¸€äº› SQLite çš„ä¼˜åŠ¿ã€‚</p>
<ol>
<li><strong>æ€§èƒ½å¼€é”€</strong>ï¼šå†™å…¥æ€§èƒ½è¾ƒæ…¢æ˜¯ rqlite ä¸å¯é¿å…çš„å¼±ç‚¹ã€‚ç”±äºæ¯æ¬¡å†™æ“ä½œéƒ½è¦é€šè¿‡ Raft åœ¨å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´é€šä¿¡ç¡®è®¤ï¼Œrqlite çš„å•æ¬¡äº‹åŠ¡å»¶è¿Ÿè¿œé«˜äºæœ¬åœ° SQLiteã€‚å®˜æ–¹æ˜ç¡®æŒ‡å‡ºï¼Œrqlite æ˜¯ä¸ºé«˜å¯ç”¨è€Œéé«˜æ€§èƒ½è®¾è®¡çš„ï¼Œ[å…¶å†™ååç›¸å¯¹äºå•æœº SQLite ä¼šæœ‰æ˜æ˜¾ä¸‹é™](<a href="https://link.juejin.cn?target=https%3A%2F%2Frqlite.io%2Fdocs%2Ffaq%2F%23%3A~%3Atext%3DYes%252C" target="_blank" title="https://rqlite.io/docs/faq/#:~:text=Yes%2C" ref="nofollow noopener noreferrer">rqlite.io/docs/faq/#:â€¦</a> but only for reads,write to the Raft log)ï¼Œè¿™ç‚¹åœ¨ <code>æ€§èƒ½å¯¹æ¯”</code> ç« èŠ‚ä¼šæœ‰æ˜æ˜¾ä½“ç°ã€‚</li>
<li><strong>é¢å¤–çš„éƒ¨ç½²å¼€é”€</strong>ï¼šSQLite ä¹‹æ‰€ä»¥èƒ½æˆä¸ºæ•°æ®åº“çš„ä¸­æµç ¥æŸ±ï¼Œå…¶æ ¸å¿ƒç«äº‰åŠ›ä¹‹ä¸€å°±æ˜¯åµŒå…¥å¼çš„å•æ–‡ä»¶å‹æ•°æ®åº“ã€‚ç„¶è€Œï¼Œrqlite å°±ä¸å¾—ä¸å¯åŠ¨ä¸€ä¸ª Server å¯¹å¤–æš´éœ²æœåŠ¡ï¼Œä½¿ç”¨æ—¶ï¼Œæ„Ÿè§‰å®ƒå°±æ˜¯ä¸€ä¸ªä¼ ç»Ÿçš„ MySQL æ•°æ®æœåŠ¡ä¸€æ ·ï¼Œrqlite éœ€è¦ç‹¬ç«‹éƒ¨ç½²æœåŠ¡è¿›ç¨‹ã€‚</li>
<li><strong>Javaæ”¯æŒå¼±</strong>ï¼šrqlite ç›®å‰å¯¹å„è¯­è¨€çš„æ”¯æŒä¸»è¦é€šè¿‡ HTTP Client åº“ï¼Œç¼ºä¹åƒ JDBC é‚£æ ·æˆç†Ÿé€æ˜çš„é©±åŠ¨ã€‚è™½ç„¶åœ¨ Java ä¸­è™½ç„¶æœ‰ç¤¾åŒºè´¡çŒ®çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frqlite%2Frqlite-jdbc" target="_blank" title="https://github.com/rqlite/rqlite-jdbc" ref="nofollow noopener noreferrer">rqlite-jdbc é©±åŠ¨</a>ï¼Œä½†æ˜¯ç»è¿‡æˆ‘çš„æµ‹è¯•ï¼Œå‡ ä¹æ— æ³•ä½¿ç”¨ï¼Œæœ‰å¤§é‡ JDBC çš„æ¥å£éƒ½æ²¡æœ‰å®ç°ã€‚</li>
<li><strong>å¤„å¢ƒå°´å°¬</strong>ï¼šrqlite ä¸ºäº†æ”¯æŒ SQLite çš„å•ç‚¹é—®é¢˜ï¼ŒåŸºäº HTTP Server çš„æ¨¡å¼éƒ¨ç½²ï¼Œä½¿å¾—ä½¿ç”¨å®ƒè¿˜éœ€è¦å•ç‹¬éƒ¨ç½²å®ƒï¼Œè¿™å®Œå…¨æŠ›å¼ƒäº† SQLite æ‹¿æ¥å³ç”¨çš„æœ€å¤§ä¼˜åŠ¿ã€‚ä¸å…¶ä½¿ç”¨ rqliteï¼Œæˆ‘ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ MySQLã€Postgres è¿™æ ·æ›´æˆç†ŸåŠŸèƒ½æ›´å¤šçš„æ•°æ®åº“æœåŠ¡å‘¢ï¼Ÿæ‰€ä»¥å®ƒçš„ä½¿ç”¨åœºæ™¯éå¸¸å±€é™ã€‚</li>
</ol>
<p>æ€»ç»“æ¥è¯´ï¼Œrqlite å°† SQLite å¸¦å…¥äº†åˆ†å¸ƒå¼æ—¶ä»£ï¼Œä»¥æä½çš„å¤æ‚åº¦æä¾›äº†ä»¤äººæƒŠå–œçš„é«˜å¯ç”¨ç‰¹æ€§ã€‚ä¸è¿‡é±¼ä¸ç†ŠæŒä¸å¯å…¼å¾—ï¼Œå¼€å‘è€…åœ¨äº«å—å…¶ç®€æ´çš„åŒæ—¶ï¼Œä¹Ÿè¦æ¥å—æ€§èƒ½ä¸Šçš„å¦¥åå’Œé€‚ç”¨åœºæ™¯çš„é™åˆ¶ã€‚åœ¨å¯¹å¯é æ€§è¦æ±‚é«˜äºæ€§èƒ½çš„è¾¹ç¼˜è®¡ç®—ã€ç‰©è”ç½‘ã€è½»é‡çº§æœåŠ¡ä¸­ï¼Œrqlite å°šæœ‰ç”¨æ­¦ä¹‹åœ°ï¼›è€Œåœ¨é«˜å¹¶å‘ã€å¤§æ•°æ®çš„æ ¸å¿ƒä¸šåŠ¡é‡Œï¼Œå®ƒå°±ä¸æ˜¯ä¸€ä¸ªä¸»åŠ›é€‰æ‰‹äº†ã€‚</p>
<h3 data-id="heading-10">DuckDB</h3>
<p>DuckDB æ˜¯è¿‘å¹´æ¥æ•°æ®åˆ†æé¢†åŸŸä¸­è¿…é€Ÿå´›èµ·çš„ä¸€æ¬¾æ•°æ®åº“ç³»ç»Ÿï¼Œå®ƒçš„å®šä½å’Œæ¶æ„éå¸¸ç‹¬ç‰¹ï¼Œæ˜¯ä¸“é—¨ä¸º åˆ†æå·¥ä½œè´Ÿè½½ï¼ˆOLAPï¼‰è®¾è®¡çš„åµŒå…¥å¼æ•°æ®åº“ã€‚</p>
<p>DuckDB æœ€å¤§çš„ç‰¹ç‚¹åœ¨äºå®ƒç»“åˆäº†ä¸¤ç§å¯¹ç«‹ç³»ç»Ÿçš„ä¼˜åŠ¿ï¼šSQLite çš„ç®€æ´æ€§ å’Œ æ•°æ®ä»“åº“çš„åˆ†æèƒ½åŠ›ã€‚å®ƒåŒæ ·ä¹Ÿå®ç°äº† <strong>åµŒå…¥å¼</strong>ã€<strong>é›¶é…ç½®</strong>ã€<strong>å•ä¸€æ–‡ä»¶</strong>çš„ä¼˜åŠ¿ï¼Œè€ŒåŸºäºå…¶ <code>åˆ—å¼å­˜å‚¨</code> çš„ç‰¹å®šï¼Œå®ƒéå¸¸é€‚åˆåšæ•°æ®åˆ†æç»Ÿè®¡ç›¸å…³çš„å·¥ä½œã€‚å®˜æ–¹è¿˜å·ç§°è‡ªå·±ä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Fduckdb.org%2Fmedia%2Fduckdb-the-SQLite-for-analytics%2F" target="_blank" title="https://duckdb.org/media/duckdb-the-SQLite-for-analytics/" ref="nofollow noopener noreferrer">The SQLite for Analytics</a></p>
<h4 data-id="heading-11">The SQLite for Analytics</h4>
<p>è¿‘å¹´æ¥ï¼ŒDuckDB åœ¨æ•°æ®ç§‘å­¦åœˆè¿…é€Ÿèµ°çº¢ï¼ŒPythonã€Rã€Julia ç­‰å·¥å…·é“¾éƒ½é›†æˆäº†DuckDBï¼Œç”¨å®ƒæ¥å–ä»£ç¬¨é‡çš„ pandas æˆ–Sparkæ‰§è¡Œæœ¬åœ°åˆ†æä»»åŠ¡ã€‚ä¸‹é¢è®©æˆ‘ä»¬çœ‹çœ‹DuckDBåœ¨æ–‡ä»¶å‹æ•°æ®åº“é€‰å‹ä¸­æœ‰å“ªäº›ç‹¬ç‰¹ä»·å€¼ã€‚</p>
<ol>
<li><strong>åˆ—å¼å­˜å‚¨ï¼Œæé€Ÿåˆ†æ</strong>ï¼šDuckDB æœ€æ ¸å¿ƒçš„å–ç‚¹å°±æ˜¯åˆ—å­˜ã€‚å®ƒå°†åŒä¸€åˆ—çš„æ•°æ®ç´§å‡‘åœ°å­˜å‚¨åœ¨ä¸€èµ·ï¼Œé€‚åˆæ‰«æå’Œå‹ç¼©ï¼Œå¤§å¹…æå‡äº†èšåˆè®¡ç®—çš„æ•ˆç‡ã€‚å½“ä½ å¯¹ç™¾ä¸‡è¡Œæ•°æ®æ‰§è¡Œ <code>GROUP BY</code>ã€<code>JOIN</code>ã€<code>AVG</code> è¿™ç±»æ“ä½œæ—¶ï¼ŒDuckDB çš„åˆ—å¼å¼•æ“å¯ä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fbetterstack.com%2Fcommunity%2Fguides%2Fscaling-python%2Fduckdb-vs-SQLite%2F" target="_blank" title="https://betterstack.com/community/guides/scaling-python/duckdb-vs-SQLite/" ref="nofollow noopener noreferrer">æ¯” SQLite å¿«å‡ºä¸€ä¸ªæ•°é‡çº§ä»¥ä¸Š</a>ã€‚DuckDB è¿˜ä½¿ç”¨å‘é‡åŒ–æ‰§è¡Œï¼ˆä¸€ç§æ‰¹é‡æ•°æ®å¤„ç†æŠ€æœ¯ï¼‰å……åˆ†åˆ©ç”¨ CPU æµæ°´çº¿ï¼Œæé«˜ç®—å­æ‰§è¡Œæ•ˆç‡ã€‚è¿™äº›è®¾è®¡è®© DuckDB åœ¨å¤„ç†å¤§æ‰¹é‡æ•°æ®åˆ†ææ—¶å¦‚é±¼å¾—æ°´</li>
<li><strong>å¤šæ ¸<strong><strong>å¹¶è¡Œ</strong></strong>ï¼Œ<strong><strong>å†…å­˜</strong></strong>å‹å¥½</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmotherduck.com%2Flearn-more%2Fduckdb-vs-SQLite-databases%2F" target="_blank" title="https://motherduck.com/learn-more/duckdb-vs-SQLite-databases/" ref="nofollow noopener noreferrer">DuckDB æ”¯æŒå¤šçº¿ç¨‹å¹¶è¡ŒæŸ¥è¯¢æ‰§è¡Œï¼Œå¯ä»¥åˆ©ç”¨æœºå™¨çš„å¤šæ ¸ä¼˜åŠ¿åŠ é€Ÿå¤„ç†</a>ï¼Œå¦å¤–ï¼ŒDuckDB ä¸ºäº†åˆ†æåœºæ™¯åšäº†å¤§é‡å†…å­˜ä¼˜åŒ–ï¼Œä¼šæ™ºèƒ½åœ°[å°†ä¸­é—´ç»“æœç¼“å­˜äºå†…å­˜ä»¥å‡å°‘é‡å¤è®¡ç®—ï¼Œå¹¶é‡‡å–ä¹è§‚å¹¶å‘æ§åˆ¶æœºåˆ¶é¿å…ä¸å¿…è¦çš„é”ç«äº‰](<a href="https://link.juejin.cn?target=https%3A%2F%2Fduckdb.org%2Fdocs%2Fstable%2Fconnect%2Fconcurrency%23%3A~%3Atext%3DWhen" target="_blank" title="https://duckdb.org/docs/stable/connect/concurrency#:~:text=When" ref="nofollow noopener noreferrer">duckdb.org/docs/stableâ€¦</a> using option 1%2C DuckDB,the same connection are faster)</li>
<li><strong>å³å¸­åˆ†æ</strong>ï¼šDuckDB éå¸¸é€‚åˆä½œä¸ºæ•°æ®åˆ†æçš„åµŒå…¥å¼å¼•æ“èå…¥åº”ç”¨ä¸­ã€‚å®ƒæ”¯æŒæ ‡å‡† SQLï¼ŒåŒ…å«çª—å£å‡½æ•°ã€å¤æ‚ JOINã€CTE ç­‰é«˜çº§åŠŸèƒ½ï¼Œå¯¹æ•°æ®ç§‘å­¦å®¶å’Œåˆ†æå¸ˆæ¥è¯´ååˆ†å‹å¥½ã€‚åŒæ—¶ï¼ŒDuckDB å¯ä»¥ç›´æ¥è¯»å–å¤šç§æ•°æ®æ ¼å¼ï¼Œä¾‹å¦‚ CSVã€Parquetã€Arrow ç­‰ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨SQLç›´æ¥æŸ¥è¯¢è¿™äº›æ–‡ä»¶ï¼Œè€Œä¸å¿…å…ˆå†™è„šæœ¬è½¬æ¢å¯¼å…¥ã€‚è¿™ä¸€ç‚¹å¯¹äºéœ€è¦é¢‘ç¹ä»æ•°æ®æ¹–æˆ–æ—¥å¿—æ–‡ä»¶ä¸­æå–ä¿¡æ¯çš„åº”ç”¨æ¥è¯´ä»·å€¼å·¨å¤§</li>
</ol>
<h4 data-id="heading-12">å„æœ‰æ‰€é•¿</h4>
<p>å°½ç®¡DuckDBåœ¨ç‰¹å®šé¢†åŸŸè¡¨ç°äº®çœ¼ï¼Œä½†æˆ‘ä»¬ä¹Ÿéœ€è®¤è¯†åˆ°å®ƒå¹¶éä¸‡èƒ½ï¼ŒåŒSQLiteç›¸æ¯”æœ‰ä»¥ä¸‹å±€é™ï¼š</p>
<ol>
<li><strong>ä¸æ“…é•¿é«˜å¹¶å‘****OLTP</strong>ï¼šDuckDB çš„è®¾è®¡åˆè¡·ä¸æ˜¯æ›¿ä»£ OLTP æ•°æ®åº“æ¥å¤„ç†æµ·é‡å¹¶å‘äº‹åŠ¡ã€‚å®ƒæ›´å…³æ³¨ååè€Œéå¹¶å‘ï¼Œå¯¹äºå¤§é‡å°äº‹åŠ¡çš„åœºæ™¯æ”¯æŒæœ‰é™ã€‚DuckDB å…è®¸ä¸€ä¸ªè¿›ç¨‹å†…å¼€å¯å¤šä¸ªå¹¶å‘å†™çº¿ç¨‹ï¼Œä½†ä»ç„¶ä¸æ”¯æŒå¤šä¸ªè¿›ç¨‹åŒæ—¶å†™å…¥åŒä¸€åº“æ–‡ä»¶ï¼ˆå¤šè¿›ç¨‹åªèƒ½å¹¶å‘åªè¯»ï¼‰</li>
<li><strong>å†…å­˜****å ç”¨ä¸å¯åŠ¨å¼€é”€</strong>ï¼šç›¸è¾ƒ SQLite æç®€çš„å†…å­˜è¶³è¿¹ï¼ŒDuckDB åœ¨åŠ è½½å¤§æ•°æ®é›†è¿›è¡Œåˆ†ææ—¶ä¼šå ç”¨æ˜¾è‘—æ›´å¤šçš„å†…å­˜ã€‚è¿™æ˜¯åˆ—å¼æ•°æ®åº“çš„å…¸å‹ç‰¹å¾ï¼šä¸ºäº†åŠ é€Ÿè®¡ç®—ï¼ŒDuckDB å¸¸å¸¸éœ€è¦å°†åˆ—æ•°æ®æˆ–ä¸­é—´ç»“æœç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚å¯¹äºå‡ ç™¾ä¸‡è¡Œçš„æ•°æ®è¡¨ï¼Œè¿è¡Œä¸€ä¸ªå¤æ‚åˆ†ææŸ¥è¯¢å¾€å¾€ä¼šç¬æ—¶å ç”¨å‡ ç™¾MBçš„å†…å­˜ï¼Œè¿™ä¸€ç‚¹åœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šéœ€è¦æ…é‡è€ƒè™‘ã€‚</li>
<li><strong>ç”Ÿæ€æˆç†Ÿåº¦</strong>ï¼šDuckDB æ¯•ç«Ÿæ˜¯è¿‘å‡ å¹´æ‰å‡ºç°çš„æ–°é¡¹ç›®ï¼Œåœ¨ç”Ÿæ€å·¥å…·å’Œç¤¾åŒºç§¯ç´¯æ–¹é¢æ— æ³•ä¸ SQLite æ¯”è‚©ã€‚æ¯”å¦‚ï¼ŒSQLite å†ç»äºŒåå¹´éªŒè¯ï¼Œå‡ ä¹æ²¡æœ‰é‡å¤§æ¼æ´ä¸”å…¼å®¹æ€§æä½³ï¼Œè€Œ DuckDB è¿˜åœ¨å¿«é€Ÿè¿­ä»£ä¸­ï¼Œå¯èƒ½å­˜åœ¨éšè—çš„bugæˆ–è¡Œä¸ºæ”¹å˜ã€‚</li>
</ol>
<p>æ€»çš„æ¥è¯´ï¼ŒDuckDB ä¸ºæ–‡ä»¶å‹æ•°æ®åº“å¼€è¾Ÿäº†æ–°çš„å¯èƒ½ï¼š<strong>åœ¨æœ¬åœ°å®Œæˆè¿‡å»éœ€è¦æ•°æ®åº“é›†ç¾¤æ‰èƒ½å®Œæˆçš„å¤§è§„æ¨¡åˆ†æè®¡ç®—</strong>ã€‚å¯¹äºè¿½æ±‚å®æ—¶åˆ†æçš„å¹³å°æ¥è¯´ï¼Œè¿™ç®€ç›´æ˜¯ç¦éŸ³ã€‚ç„¶è€Œï¼Œæ­£å¦‚æ²¡æœ‰ä»»ä½•å•ä¸€æ•°æ®åº“èƒ½é€šåƒæ‰€æœ‰åœºæ™¯ä¸€æ ·ï¼ŒDuckDB ä¹Ÿæœ‰å…¶çŸ­æ¿ã€‚æˆ‘ä»¬åº”æ ¹æ®å…·ä½“éœ€æ±‚ï¼Œåœ¨æ€§èƒ½å’Œèµ„æºä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚</p>
<h3 data-id="heading-13">æ€§èƒ½å¯¹æ¯”</h3>
<p>è¯´äº†è¿™ä¹ˆå¤šä¼˜ç¼ºç‚¹ï¼Œå®é™…è¡¨ç°åˆ°åº•å¦‚ä½•å‘¢ï¼Ÿæ­£å¥½æˆ‘é’ˆå¯¹ SQLiteã€H2ã€DuckDBã€rqlite å››ä¸ªæ•°æ®åº“åšäº†ä¸€ç³»åˆ—åŸºå‡†æµ‹è¯•ï¼ŒåŒ…æ‹¬å¢åˆ æ”¹æŸ¥å„ç±»æ“ä½œã€‚ä¸‹é¢æˆ‘ä»¬å°±ç»“åˆæ•°æ®ï¼Œçœ‹çœ‹å®ƒä»¬åœ¨ä¸åŒåœºæ™¯ä¸‹çš„æ€§èƒ½å·®è·å¦‚ä½•ã€‚å…ˆä¸Šç»“è®ºï¼šæ²¡æœ‰æœ€å¼ºï¼Œåªæœ‰æœ€é€‚åˆåœºæ™¯çš„ã€‚</p>
<h4 data-id="heading-14">INSERT æ€§èƒ½ (ms)</h4>








































<table><thead><tr><th>æ•°æ®è§„æ¨¡</th><th>SQLite</th><th>H2</th><th>DuckDB</th><th>rqlite</th></tr></thead><tbody><tr><td>100,000 (æ–°å¢100K)</td><td>780</td><td>2,268</td><td>12,531</td><td>5,481</td></tr><tr><td>200,000 (æ–°å¢100K)</td><td>5,921</td><td>3,114</td><td>7,953</td><td>8,566</td></tr><tr><td>500,000 (æ–°å¢300K)</td><td>17,345</td><td>41,827</td><td>16,948</td><td>34,989</td></tr><tr><td>1,000,000 (æ–°å¢500K)</td><td>28,294</td><td>95,202</td><td>31,618</td><td>è¶…æ—¶</td></tr></tbody></table>
<ul>
<li>SQLite åœ¨å¤§è§„æ¨¡æ’å…¥æ—¶è¡¨ç°æœ€ç¨³å®šï¼Œæ’å…¥æ—¶é—´éšæ•°æ®å¢é•¿æ²¡æœ‰å¤¸å¼ æš´æ¶¨ï¼Œç¨³å¦‚è€ç‹—ã€‚</li>
<li>H2 åˆå§‹æ’å…¥å¾ˆå¿«ï¼Œä½†éšç€æ•°æ®é‡å¢é•¿æ€§èƒ½<strong>è·³å´–å¼ä¸‹é™</strong>ï¼Œ50 ä¸‡è¡Œä»¥åå†™å…¥é€Ÿåº¦ç›´çº¿æš´è·Œã€‚çœ‹æ¥å¤šçº¿ç¨‹æ’å…¥æ‰›ä¸ä½å¤ªå¤§æ•°æ®é‡ï¼ŒååŠ²ä¸è¶³ã€‚</li>
<li>DuckDB æ’å…¥æ€§èƒ½ä¸­è§„ä¸­çŸ©ï¼Œç›¸å¯¹ç¨³å®šï¼Œæ²¡æœ‰æ˜æ˜¾ç“¶é¢ˆï¼Œä¹Ÿæ²¡æœ‰ SQLite é‚£ä¹ˆç¨³ï¼Œæ€»ä½“è¿˜ç®—ä¸é”™ã€‚</li>
<li>rqlite å›  Raft å…±è¯†åè®®ï¼Œå†™å…¥éœ€è¦åˆ†å‘ç»™é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¤§è§„æ¨¡å†™å…¥ç›¸å½“åƒåŠ›ï¼Œæ’åˆ° 100 ä¸‡è¡Œæ—¶ç›´æ¥è¶…æ—¶æ”¾å¼ƒæ²»ç–—ã€‚</li>
</ul>
<h4 data-id="heading-15">SELECT æŸ¥è¯¢æ€§èƒ½ (ms, 1000 æ¬¡æŒ‰ ID æŸ¥è¯¢)</h4>








































<table><thead><tr><th>æ•°æ®è§„æ¨¡</th><th>SQLite</th><th>H2</th><th>DuckDB</th><th>rqlite</th></tr></thead><tbody><tr><td>100,000</td><td>49</td><td>690</td><td>715</td><td>2,298</td></tr><tr><td>200,000</td><td>39</td><td>823</td><td>394</td><td>664</td></tr><tr><td>500,000</td><td>35</td><td>1,034</td><td>328</td><td>678</td></tr><tr><td>1,000,000</td><td>28</td><td>1,244</td><td>424</td><td>-</td></tr></tbody></table>
<ul>
<li>SQLite ç‚¹æŸ¥è¯¢æ€§èƒ½æœ€ä¼˜ï¼Œ100 ä¸‡è¡Œæ•°æ®ä¸‹ 1000 æ¬¡æŸ¥è¯¢ä»…è€—æ—¶ 28msï¼Œå‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œç§’æ€å…¶ä»–é€‰æ‰‹ï¼Œå ªç§°å•ç‚¹æŸ¥è¯¢ä¹‹ç‹ã€‚</li>
<li>DuckDB æŸ¥è¯¢æ€§èƒ½ç›¸å½“ç¨³å®šï¼Œéšç€æ•°æ®é‡å¢åŠ å˜åŒ–ä¸å¤§ï¼Œåè€Œåœ¨ 50 ä¸‡è¡Œæ—¶æœ€å¿«ã€‚è¿™å¯èƒ½å¾—ç›Šäºå®ƒä¼˜ç§€çš„æŸ¥è¯¢ä¼˜åŒ–å’Œå‘é‡åŒ–æ‰§è¡Œã€‚</li>
<li>H2 æŸ¥è¯¢æ€§èƒ½éšç€æ•°æ®é‡å¢é•¿æ˜æ˜¾ä¸‹é™ï¼Œå¤§æ•°æ®é‡ä¸‹æŸ¥è¯¢å˜æ…¢ï¼Œä¼°è®¡æ˜¯ç¼“å­˜å‘½ä¸­ç‡é™ä½ä¸” MVCC å¼€é”€æ˜¾ç°ã€‚</li>
<li>rqlite å› ä¸ºæ¯æ¬¡æŸ¥è¯¢éƒ½ç»è¿‡ HTTP ç½‘ç»œå¼€é”€ï¼Œç›¸å¯¹æ¥è¯´è¦æ…¢ä¸å°‘ï¼Œåœ¨ 50 ä¸‡è¡Œä»¥ä¸ŠåŸºæœ¬å¥”æºƒï¼ˆ100 ä¸‡è¡Œæˆ‘ç”šè‡³æ²¡æµ‹å‡ºæ¥ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-16">UPDATE æ€§èƒ½ (ms, 1000 æ¬¡æ›´æ–°æ“ä½œ)</h4>








































<table><thead><tr><th>æ•°æ®è§„æ¨¡</th><th>SQLite</th><th>H2</th><th>DuckDB</th><th>rqlite</th></tr></thead><tbody><tr><td>100,000</td><td>2,710</td><td>478</td><td>4,404</td><td>85</td></tr><tr><td>200,000</td><td>2,252</td><td>794</td><td>3,034</td><td>1,396</td></tr><tr><td>500,000</td><td>2,357</td><td>1,149</td><td>3,042</td><td>88</td></tr><tr><td>1,000,000</td><td>2,214</td><td>967</td><td>3,029</td><td>-</td></tr></tbody></table>
<ul>
<li>rqlite åœ¨å°æ‰¹é‡æ›´æ–°ä¸Šå‡ºä¹æ„æ–™åœ°å¿«ï¼Œåªç”¨äº† HTTP æ¥å£æä¾›çš„æ‰¹å¤„ç†ä¼˜åŒ–ï¼Œ100k è¡Œæ—¶ 1000 æ¬¡æ›´æ–°åªè¦ 85msï¼Œå ªç§°å˜æ€ã€‚è¿™å¯¹éœ€è¦è¿œç¨‹æ‰¹é‡æ›´æ–°çš„åœºæ™¯æ˜¯ä¸ªäº®ç‚¹ã€‚</li>
<li>H2 æ›´æ–°æ€§èƒ½æ•´ä½“ä¼˜ç§€ä¸”ç¨³å®šï¼Œæ¯å¢åŠ æ•°æ®ï¼Œæ—¶é—´æ²¡æœ‰æ¿€å¢ï¼Œå§‹ç»ˆä¿æŒåœ¨æ¯«ç§’çº§ï¼Œå¾—ç›Šäºå…¶å¯¹äº‹åŠ¡å’Œæ‰¹é‡æ“ä½œçš„è‰¯å¥½æ”¯æŒã€‚</li>
<li>SQLite å’Œ DuckDB çš„æ›´æ–°æ€§èƒ½ç›¸è¿‘ï¼ŒåŸºæœ¬ä¸€ä¸ªæ°´å¹³çº¿ã€‚SQLite èƒœåœ¨æœ¬åœ°æ— ç½‘ç»œï¼ŒDuckDB èƒœåœ¨æ‰¹é‡æ‰§è¡Œä¼˜åŒ–ï¼Œæœ€åæ——é¼“ç›¸å½“ã€‚</li>
</ul>
<h4 data-id="heading-17">DateTime èŒƒå›´æŸ¥è¯¢æ€§èƒ½ (ms)</h4>
<p>&gt; SQLite æœ¬èº«æ˜¯æ²¡æœ‰ DateTime ç›¸å…³æ•°æ®ç±»å‹çš„ï¼Œè¿™é‡Œæµ‹è¯•æ—¶ï¼Œé‡‡ç”¨äº†æ™®éçš„åŸºäº TEXT ç±»å‹å­˜å‚¨ ISO-8601 æ ¼å¼çš„å­—ç¬¦ä¸²å®ç°</p>
<h5 data-id="heading-18">æ— ç´¢å¼• (1M è¡Œæ•°æ®)</h5>













































<table><thead><tr><th>æŸ¥è¯¢èŒƒå›´</th><th>æŸ¥è¯¢æ¬¡æ•°</th><th>SQLite</th><th>H2</th><th>DuckDB</th><th>rqlite (500K)</th></tr></thead><tbody><tr><td>1å‘¨</td><td>300</td><td>562</td><td>896</td><td>2,784</td><td>461</td></tr><tr><td>1æœˆ</td><td>200</td><td>1,514</td><td>1,935</td><td>7,218</td><td>1,489</td></tr><tr><td>6æœˆ</td><td>100</td><td>6,403</td><td>5,829</td><td>1,554</td><td>3,546</td></tr><tr><td>1å¹´</td><td>50</td><td>9,012</td><td>3,706</td><td>1,013</td><td>3,944</td></tr></tbody></table>
<h5 data-id="heading-19">æœ‰ç´¢å¼• (1M è¡Œæ•°æ®)</h5>













































<table><thead><tr><th>æŸ¥è¯¢èŒƒå›´</th><th>æŸ¥è¯¢æ¬¡æ•°</th><th>SQLite</th><th>H2</th><th>DuckDB</th><th>rqlite (500K)</th></tr></thead><tbody><tr><td>1å‘¨</td><td>300</td><td>587</td><td>1,035</td><td>3,799</td><td>751</td></tr><tr><td>1æœˆ</td><td>200</td><td>1,837</td><td>1,309</td><td>7,749</td><td>1,056</td></tr><tr><td>6æœˆ</td><td>100</td><td>5,043</td><td>3,303</td><td>2,678</td><td>3,188</td></tr><tr><td>1å¹´</td><td>50</td><td>6,446</td><td>4,804</td><td>1,938</td><td>4,472</td></tr></tbody></table>
<ul>
<li>ä¸å»ºç´¢å¼•æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢èŒƒå›´è¶Šå¤§ï¼ŒDuckDB è¶Šæ˜¾ä¼˜åŠ¿ï¼šå¤§èŒƒå›´æ‰«æ DuckDB æœ€å¿«ï¼Œæ¯”å¦‚æŸ¥è¯¢ä¸€å¹´èŒƒå›´ DuckDB æ˜æ˜¾æ¯”å…¶å®ƒå¿«å¾—å¤šï¼ˆåˆ—å¼å­˜å‚¨ä¸€æ¬¡æ‰«æä¼˜åŠ¿å°½æ˜¾ï¼‰ã€‚</li>
<li>SQLite åœ¨å°èŒƒå›´æŸ¥è¯¢ï¼ˆæ¯”å¦‚ 1 å‘¨çš„æ•°æ®ï¼‰è¡¨ç°ä¼˜ç§€ï¼Œç”šè‡³ä¼˜äº H2ï¼Œè¯´æ˜å°‘é‡æ•°æ®çš„å…¨è¡¨æ‰«æå¯¹ SQLite æ¥è¯´è¿˜èƒ½ Hold ä½ã€‚</li>
<li>ç»™ DateTime åˆ—å»ºç´¢å¼•åï¼Œå¤§éƒ¨åˆ†æ•°æ®åº“èŒƒå›´æŸ¥è¯¢é€Ÿåº¦éƒ½æœ‰æå‡ï¼Œå…¶ä¸­ rqlite æå‡æœ€æ˜æ˜¾ï¼ˆæ¯•ç«Ÿä¸ç”¨æ¯æ¬¡æ‰«å®Œ 500K è¡Œäº†ï¼‰ã€‚ä¸è¿‡ DuckDB åœ¨æœ‰æ— ç´¢å¼•ä¸‹å¯¹å¤§èŒƒå›´æŸ¥è¯¢ä¾ç„¶ä¿æŒå¼ºåŠ²ï¼Œç´¢å¼•å¯¹å®ƒå¸®åŠ©æœ‰é™ï¼Œå› ä¸ºæœ¬æ¥å…¨è¡¨æ‰«ä¹Ÿä¸æ…¢ã€‚</li>
<li>H2 å’Œ SQLite å»ºç´¢å¼•åå¯¹ä¸­ç­‰èŒƒå›´æŸ¥è¯¢æœ‰æå‡ï¼Œä½†é¢å¯¹ç‰¹åˆ«å¤§çš„èŒƒå›´ï¼ˆåŠå¹´/ä¸€å¹´ï¼‰ï¼ŒDuckDB ä¾æ—§å‡­å€Ÿåˆ—å­˜å’Œå¹¶è¡Œä¼˜åŠ¿å…¨é¢èƒœå‡ºã€‚</li>
</ul>
<h4 data-id="heading-20">å¤‡ä»½æ€§èƒ½ (ms)</h4>



































<table><thead><tr><th>æ•°æ®åº“</th><th>å¤‡ä»½è€—æ—¶</th><th>å¤‡ä»½æ–‡ä»¶</th><th>éªŒè¯ç»“æœ</th></tr></thead><tbody><tr><td>SQLite</td><td>1,166</td><td>bench_backup.db</td><td>âœ” OK (1,000,000 rows)</td></tr><tr><td>H2</td><td>19,195</td><td>h2_backup.zip</td><td>âœ” OK (1,000,000 rows)</td></tr><tr><td>DuckDB</td><td>417</td><td>duckdb_backup/ (Parquet)</td><td>âœ” OK (1,000,000 rows)</td></tr><tr><td>rqlite</td><td>-</td><td>rqlite_backup.db</td><td>æœªæµ‹è¯•</td></tr></tbody></table>
<ul>
<li>DuckDB å¤‡ä»½æœ€å¿«ï¼Œä»…è€—æ—¶ 417msï¼å®ƒå¤‡ä»½æ—¶ç›´æ¥å¯¼å‡ºä¸ºå‹ç¼©çš„åˆ—å¼æ ¼å¼ï¼ˆParquetï¼‰ï¼Œæ•ˆç‡éå¸¸é«˜ã€‚åœ¨å¤§æ•°æ®å¤‡ä»½ä¸Š DuckDB å®Œèƒœã€‚</li>
<li>SQLite å¤‡ä»½æ€§èƒ½ä¹Ÿç›¸å½“ä¸é”™ï¼Œ1ç™¾ä¸‡è¡Œæ•°æ®å¤‡ä»½æ–‡ä»¶ä¸åˆ° 2 ç§’æå®šï¼Œè€Œä¸”åªæ˜¯å¤åˆ¶ä¸€ä»½ .db æ–‡ä»¶çš„åŠŸå¤«ï¼Œç®€å•ç²—æš´ä½†å¯é ã€‚</li>
<li>H2 å¤‡ä»½è€—æ—¶æœ€é•¿ï¼Œå°†è¿‘19ç§’ï¼Œå› ä¸ºå®ƒé»˜è®¤å¤‡ä»½ä¼šå‹ç¼©æˆ zip åŒ…ï¼Œè¿˜åŸèµ·æ¥éº»çƒ¦ï¼Œè€Œä¸”å¤‡ä»½æœŸé—´æ€§èƒ½è¾ƒå·®ã€‚</li>
<li>rqlite å› ä¸º 100 ä¸‡è¡Œæ—¶åŸºå‡†å†™å…¥éƒ½æ²¡å®Œæˆï¼Œè¿™é‡Œæ²¡æ³•æµ‹è¯•å¤‡ä»½ï¼Œä¸è¿‡ rqlite æœ¬èº«æä¾›å¿«ç…§åŠŸèƒ½ï¼Œé€Ÿåº¦ä¼°è®¡ä¹Ÿä¸ä¼šå¿«å“ªå»ã€‚</li>
</ul>
<h4 data-id="heading-21">å†…å­˜ä½¿ç”¨æƒ…å†µ</h4>








































<table><thead><tr><th>æ•°æ®åº“</th><th>åŸºçº¿å†…å­˜</th><th>æœ€ç»ˆå†…å­˜</th><th>å†…å­˜å¢é‡</th><th>Heap å¢é‡</th></tr></thead><tbody><tr><td>SQLite</td><td>9.5 MB</td><td>11.6 MB</td><td>2.1 MB</td><td>221 KB</td></tr><tr><td>H2</td><td>18.4 MB</td><td>817.2 MB</td><td>798.9 MB</td><td>782.7 MB</td></tr><tr><td>DuckDB</td><td>34.3 MB</td><td>366.1 MB</td><td>331.7 MB</td><td>332.3 MB</td></tr><tr><td>rqlite</td><td>42.6 MB</td><td>~120 MB</td><td>~77 MB</td><td>~70 MB</td></tr></tbody></table>
<ul>
<li>SQLite å†…å­˜ä½¿ç”¨æƒŠäººåœ°ä½ï¼æ•´ä¸ªåŸºå‡†è·‘å®Œæ‰å¢åŠ äº†2MB å†…å­˜ï¼Œå ç”¨å‡ ä¹å¯ä»¥å¿½ç•¥ï¼ŒçœŸæ­£çš„å°è€Œç¾ã€‚</li>
<li>H2 å†…å­˜æ¶ˆè€—æœ€é«˜ï¼Œæœ€ç»ˆå¢é‡å°†è¿‘ 800MBï¼ŒHeap ä¸Šæš´æ¶¨äº† 782MBï¼Œæ€€ç–‘äººç”Ÿâ€”â€”å¤§æ¦‚å®ƒæŠŠæ•°æ®å‡ ä¹å…¨æ”¾å†…å­˜é‡Œäº†ï¼Œå¯¹å†…å­˜å°çš„ç¯å¢ƒå¾ˆä¸å‹å¥½ã€‚</li>
<li>DuckDB å†…å­˜ä½¿ç”¨é€‚ä¸­ï¼Œå¢åŠ äº†çº¦ 332MBã€‚è€ƒè™‘åˆ°å®ƒæ˜¯åˆ—å¼æ•°æ®åº“ï¼Œéœ€è¦ç¼“å­˜åˆ—æ•°æ®ï¼Œèƒ½æ¥å—ã€‚ä¸è¿‡ç›¸å¯¹ SQLite è¿˜æ˜¯è‚‰åšäº†ä¸€äº›ã€‚</li>
<li>rqlite å®¢æˆ·ç«¯è¿™è¾¹å†…å­˜å ç”¨å¹¶ä¸é«˜ï¼ˆå› ä¸ºæ•°æ®ä¸»è¦åœ¨æœåŠ¡ç«¯ï¼‰ï¼Œæœ€ç»ˆå¢é‡å¤§çº¦ 77MBï¼Œä½†è¿™å¹¶ä¸åæ˜  rqlite æœåŠ¡å™¨ç«¯çš„å†…å­˜å¼€é”€ã€‚æ€»ä¹‹ï¼Œå¦‚æœå…³æ³¨æœ¬è¿›ç¨‹å†…å­˜ï¼Œrqlite è¡¨ç°è¿˜è¡Œã€‚</li>
</ul>
<h4 data-id="heading-22">ç»¼åˆè¯„ä»·</h4>
<p>ç»¼åˆæ¥çœ‹ï¼Œæ ¹æ®ä¸åŒæŒ‡æ ‡ï¼Œå„æ•°æ®åº“å„æœ‰åƒç§‹ï¼Œä¸‹è¡¨ç»™å‡ºäº†åœ¨ä¸åŒéœ€æ±‚ä¸‹æœ€æ¨èçš„é€‰æ‹©ï¼š</p>


















































<table><thead><tr><th>æŒ‡æ ‡</th><th>æ¨èæ•°æ®åº“</th><th>ç†ç”±</th></tr></thead><tbody><tr><td><strong>å¤§è§„æ¨¡å†™å…¥</strong></td><td>SQLite</td><td>å†™å…¥æ€§èƒ½ç¨³å®šï¼Œæ•°æ®é‡å¢å¤§ä¹Ÿä¸æ‰é€Ÿ</td></tr><tr><td><strong>ç‚¹æŸ¥è¯¢</strong></td><td>SQLite</td><td>28ms/1000 æ¬¡æŸ¥è¯¢ï¼Œå•ç‚¹æŸ¥è¯¢é€Ÿåº¦æœ€å¿«</td></tr><tr><td><strong>æ‰¹é‡æ›´æ–°</strong></td><td>rqlite / H2</td><td>HTTP æ‰¹å¤„ç†åŠ æŒ (rqlite) æˆ–é«˜æ•ˆäº‹åŠ¡ (H2)</td></tr><tr><td><strong>å¤§èŒƒå›´æŸ¥è¯¢</strong></td><td>DuckDB</td><td>åˆ—å¼å­˜å‚¨ä¼˜åŠ¿æ˜æ˜¾ï¼Œå…¨è¡¨æ‰«æé€Ÿåº¦æœ€å¿«</td></tr><tr><td><strong>å°èŒƒå›´æŸ¥è¯¢</strong></td><td>SQLite</td><td>ç´¢å¼•é…åˆä¸‹æ€§èƒ½ä¼˜å¼‚ï¼Œå¤„ç†å°‘é‡æ•°æ®æœ€å¿«</td></tr><tr><td><strong>å¤‡ä»½æ¢å¤</strong></td><td>DuckDB</td><td>417ms å®Œæˆå¤‡ä»½ï¼ŒParquet å‹ç¼©é«˜æ•ˆ</td></tr><tr><td><strong>å†…å­˜æ•ˆç‡</strong></td><td>SQLite</td><td>å†…å­˜å ç”¨ä»…å¢åŠ  2MBï¼Œèµ„æºå‹å¥½</td></tr><tr><td><strong>åˆ†å¸ƒå¼é«˜å¯ç”¨</strong></td><td>rqlite</td><td>åŸºäº Raft å…±è¯†ï¼Œå¤šèŠ‚ç‚¹å†—ä½™ï¼Œé«˜å¯ç”¨ä¿éšœ</td></tr></tbody></table>
<h4 data-id="heading-23">æµ‹è¯•ä»£ç </h4>
<p>ä¸Šé¢çš„ Benchmark æµ‹è¯•ï¼Œæˆ‘è¿˜æ‘˜å–äº†ä¸€éƒ¨åˆ†æ ¸å¿ƒä»£ç ç‰‡æ®µï¼Œä¾¿äºå¤§å®¶ç†è§£è¿™äº›æ€§èƒ½å·®å¼‚æ˜¯æ€ä¹ˆæµ‹å‡ºæ¥çš„ã€‚ä¾‹å¦‚ä¸‹é¢æ˜¯åŸºå‡†æµ‹è¯•ä¸­æ’å…¥æ“ä½œçš„å®ç°ç®€è¦ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äº SQLiteï¼Œæˆ‘ä»¬ä½¿ç”¨å•çº¿ç¨‹æ‰¹é‡æ’å…¥ï¼Œè€Œé’ˆå¯¹ H2ï¼Œæˆ‘ä»¬åˆ™åˆ©ç”¨å¤šçº¿ç¨‹å¹¶å‘æ’å…¥ï¼ˆwriterThreads() è¿”å›çš„çº¿ç¨‹æ•°å†³å®šäº†ç­–ç•¥ï¼‰ã€‚è¿™æ®µä»£ç ä¹Ÿä»ä¸€ä¸ªä¾§é¢è§£é‡Šäº†ä¸ºä½• H2 åœ¨å°æ•°æ®é‡æ’å…¥ä¸Šå†²å¾—å¿«â€”â€”æ¯•ç«Ÿç”¨äº†å¤šçº¿ç¨‹â€”â€”ä½†æ•°æ®é‡å¤§æ—¶åè€Œå¤±é€Ÿï¼šçº¿ç¨‹å¼€å¤šäº†åè€Œæ‹–ç´¯äº†æ€§èƒ½å’Œå†…å­˜ã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-type">int</span> <span class="hljs-variable">threads</span> <span class="hljs-operator">=</span> db.writerThreads();
<span class="hljs-type">long</span> <span class="hljs-variable">t0</span> <span class="hljs-operator">=</span> System.nanoTime();

<span class="hljs-keyword">if</span> (threads == <span class="hljs-number">1</span>) {
    <span class="hljs-comment">/* ---- å•çº¿ç¨‹æ‰¹é‡å†™ï¼ˆSQLiteï¼‰---- */</span>
    <span class="hljs-keyword">try</span> (<span class="hljs-type">Connection</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> db.open()) {
        c.setAutoCommit(<span class="hljs-literal">false</span>);
        <span class="hljs-keyword">try</span> (<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> c.prepareStatement(<span class="hljs-string">"INSERT INTO bench(name, age, salary, employ_date) VALUES (?,?,?,?)"</span>)) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; need; i++) {
                ps.setString(<span class="hljs-number">1</span>, randomString(<span class="hljs-number">12</span>));
                ps.setInt(<span class="hljs-number">2</span>, RND.nextInt(<span class="hljs-number">43</span>) + <span class="hljs-number">18</span>);
                ps.setDouble(<span class="hljs-number">3</span>, RND.nextDouble() * <span class="hljs-number">200_000</span>);
                db.bindDate(ps, <span class="hljs-number">4</span>, randomEpoch());
                ps.addBatch();
                <span class="hljs-keyword">if</span> (i % BATCH_SIZE == <span class="hljs-number">0</span>) {
                    ps.executeBatch();
                }
            }
            ps.executeBatch();
        }
        c.commit();
    }
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">/* ---- å¤šçº¿ç¨‹æ‰¹é‡å†™ï¼ˆH2ï¼‰---- */</span>
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">pool</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(threads);
    <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(need / BATCH_SIZE);
    List&lt;future&lt;?&gt;&amp;gt; futures = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;&amp;gt;();

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; need; i += BATCH_SIZE) {
        futures.add(pool.submit(() -&amp;gt; {
            <span class="hljs-keyword">try</span> (<span class="hljs-type">Connection</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> db.open()) {
                c.setAutoCommit(<span class="hljs-literal">false</span>);
                <span class="hljs-keyword">try</span> (<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> c.prepareStatement(<span class="hljs-string">"INSERT INTO bench(name, age, salary, employ_date) VALUES (?,?,?,?)"</span>)) {
                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &amp;lt; BATCH_SIZE; j++) {
                        ps.setString(<span class="hljs-number">1</span>, randomString(<span class="hljs-number">12</span>));
                        ps.setInt(<span class="hljs-number">2</span>, RND.nextInt(<span class="hljs-number">43</span>) + <span class="hljs-number">18</span>);
                        ps.setDouble(<span class="hljs-number">3</span>, RND.nextDouble() * <span class="hljs-number">200_000</span>);
                        db.bindDate(ps, <span class="hljs-number">4</span>, randomEpoch());
                        ps.addBatch();
                    }
                    ps.executeBatch();
                }
                c.commit();
            } <span class="hljs-keyword">catch</span> (SQLException e) {
                LOG.error(<span class="hljs-string">"insert task failed"</span>, e);
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
            } <span class="hljs-keyword">finally</span> {
                latch.countDown();
            }
        }));
    }

    <span class="hljs-keyword">for</span> (Future&lt;!--?--&gt; f : futures) {
        <span class="hljs-keyword">try</span> {
            f.get();
        } <span class="hljs-keyword">catch</span> (ExecutionException ee) {
            <span class="hljs-keyword">throw</span> ee.getCause();
        }
    }
    latch.await();
    pool.shutdown();
}

<span class="hljs-type">long</span> <span class="hljs-variable">ms</span> <span class="hljs-operator">=</span> TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - t0);
System.out.printf(<span class="hljs-string">"insert %,d rows: %d ms%n"</span>, need, ms);
</code></pre>
<p>ä»ä»¥ä¸Šä»£ç å¯ä»¥çœ‹åˆ°ï¼ŒSQLite é‡‡ç”¨å•è¿æ¥ä¸²è¡Œæ‰¹é‡æäº¤ï¼Œè€Œ H2 å¼€äº†å¤šä¸ªçº¿ç¨‹å¹¶å‘æ’å…¥ï¼ˆæ¯çº¿ç¨‹æ¯æ‰¹æ’å…¥ BATCH_SIZE=1000 è¡Œï¼‰ã€‚è¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨ 10ä¸‡è¡Œè¿™æ ·çš„è§„æ¨¡ä¸‹ï¼ŒH2 æ’å…¥èƒ½æ¯” SQLite å¿«ï¼ˆå¤šçº¿ç¨‹è·‘èµ¢å•çº¿ç¨‹ï¼‰ï¼Œä½†åˆ° 50 ä¸‡è¡Œã€100 ä¸‡è¡Œæ—¶ï¼Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œå†…å­˜å¼€é”€åè€Œæ‹–ç´¯äº† H2ï¼Œå¯¼è‡´æ€§èƒ½æ€¥è½¬ç›´ä¸‹ã€‚</p>
<h3 data-id="heading-24">é€‰å‹æ¨è</h3>
<p>èŠäº†è¿™ä¹ˆå¤šï¼Œå›åˆ°æˆ‘ä»¬æœ€å¼€å§‹çš„é—®é¢˜ï¼šåœ¨ä¸åŒä½¿ç”¨åœºæ™¯ä¸‹ï¼Œè¯¥é€‰å“ªç§æ–‡ä»¶å‹å…³ç³»æ•°æ®åº“ï¼Ÿ ç»“åˆä¸Šé¢çš„ä¼˜ç¼ºç‚¹åˆ†æå’Œæ€§èƒ½æ•°æ®ï¼Œæˆ‘çš„é€‰å‹å»ºè®®å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å¦‚æœä½ çš„åœºæ™¯åå‘æœ¬åœ°åµŒå…¥ã€ç§»åŠ¨ç«¯ã€å•æœºåº”ç”¨</strong>ï¼šæ¯”å¦‚ç§»åŠ¨Appã€æœ¬åœ°å°å·¥å…·ã€å•æœºå®¢æˆ·ç«¯ç¨‹åºï¼Œéœ€è¦ä¸€ä¸ªé›¶é…ç½®ã€å°å·§å¯é çš„æ•°æ®åº“ï¼Œ<strong>SQLite æ°¸è¿œæ˜¯é¦–é€‰</strong>ã€‚å®ƒéƒ¨ç½²æœ€ç®€å•ã€ç¨³å®šå¯é ï¼Œå•ç”¨æˆ·ä½¿ç”¨æ—¶æ€§èƒ½ä¹Ÿéå¸¸å¥½ã€‚å…¸å‹ä¾‹å­ï¼šæ‰‹æœºåº”ç”¨ç¼“å­˜ã€æœ¬åœ°å­˜å‚¨ï¼ŒIoT è®¾å¤‡çš„æ•°æ®è½åœ°ç­‰ç­‰ï¼Œç”¨ SQLite åæ‹¿ä¹ç¨³</li>
<li><strong>å¦‚æœä½ åœ¨ Java æœåŠ¡ç«¯å¼€å‘ä¸­éœ€è¦ä¸€ä¸ªåµŒå…¥å¼æ•°æ®åº“ç”¨äºå•å…ƒæµ‹è¯•æˆ–ä¸´æ—¶å­˜å‚¨</strong>ï¼šä¼˜å…ˆè€ƒè™‘ H2ã€‚å®ƒä¸Javaé«˜åº¦å…¼å®¹ï¼Œå†…å­˜æ¨¡å¼çœå»æ¸…ç†éº»çƒ¦ï¼Œæ”¯æŒæ ‡å‡†SQLç‰¹æ€§æ›´å…¨é¢ï¼Œæ‹¿æ¥å½“å¼€å‘æµ‹è¯•ç”¨çš„å†…ç½®åº“éå¸¸åˆé€‚ã€‚ä¸è¿‡è¦æ³¨æ„ï¼Œ<strong>åˆ«æ‹¿H2å½“ç”Ÿäº§åº“é•¿æœŸå­˜é‡è¦æ•°æ®</strong>â€”â€”ä¸€æ¥æŒä¹…åŒ–å¯é æ€§ç¨å·®ï¼ŒäºŒæ¥å†…å­˜æ¶ˆè€—è¾ƒé«˜ã€‚å¦‚æœæ˜¯å°å‹å·¥å…·æˆ–è€…å¯¹æ•°æ®ä¸¢å¤±ä¸æ•æ„Ÿçš„åœºæ™¯ï¼Œç”¨ H2 é—®é¢˜ä¸å¤§</li>
<li><strong>å¦‚æœä½ çš„éœ€æ±‚æ˜¯é«˜å¯ç”¨ã€åˆ†å¸ƒå¼éƒ¨ç½²</strong>ï¼šæ¯”å¦‚å¸Œæœ›æ•°æ®åº“æœ‰å®¹ç¾èƒ½åŠ›ï¼Œå¤šæœºå†—ä½™ä¸ä¼šå•ç‚¹æ•…éšœï¼Œé‚£åªèƒ½é€‰ rqliteã€‚å®ƒåŸºäºRaftæä¾›å¼ºä¸€è‡´å¤åˆ¶ï¼Œå¤©ç”Ÿå®¹é”™ã€‚ä½†è¯·è°¨è®°ï¼š<strong>rqlite é€‚åˆè¯»å¤šå†™å°‘ã€å¯¹æ€§èƒ½è¦æ±‚ä¸é«˜çš„åœºæ™¯</strong>ã€‚å…¶å®æˆ‘ä¸ªäººæ„Ÿè§‰ï¼Œrqliteå°šä¸æˆç†Ÿï¼Œåœ¨ Java ç›¸å…³çš„é¡¹ç›®ä¸­ï¼Œå°½é‡ä¸è¦ä½¿ç”¨</li>
<li><strong>å¦‚æœä½ çš„ä¸»è¦ä»»åŠ¡æ˜¯æœ¬åœ°çš„å¤§æ•°æ®åˆ†æã€OLAP æŸ¥è¯¢</strong>ï¼šæ¯«æ— ç–‘é—®ï¼ŒDuckDB ä¼šæ˜¯ä½ çš„å¥½ä¼™ä¼´ã€‚å®ƒç®€ç›´å°±æ˜¯ä¸ºè¿™ç§åœºæ™¯è€Œç”Ÿï¼Œåœ¨å•æœºå†…å­˜å…è®¸çš„èŒƒå›´å†…ï¼Œå¯ä»¥æ›¿ä»£åºå¤§çš„æ•°æ®ä»“åº“ï¼Œç›´æ¥å¯¹æœ¬åœ°æ–‡ä»¶æˆ–å†…å­˜æ•°æ®åšåˆ†æå¤„ç†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ è¦åœ¨åº”ç”¨é‡Œåˆ†æå‡ ç™¾ä¸‡è¡Œæ—¥å¿—æˆ–åšæŠ¥è¡¨æ±‡æ€»ï¼Œç”¨DuckDBå†…åµŒå¤„ç†ä¼šæ¯”æŠŠæ•°æ®å¡è¿›SQLiteå¿«å‡ºä¸€ä¸ªæ•°é‡çº§ã€‚ä¸è¿‡ï¼ŒåŒæ ·çš„ï¼ŒDuckDBä¸é€‚åˆæ‹¿æ¥æ”¯æ’‘é«˜å¹¶å‘ OLTP ä¸šåŠ¡ï¼Œ<strong>å®ƒæ›´åƒæ˜¯åˆ†æå¼•æ“è€Œéé€šç”¨ OLTP æ•°æ®åº“</strong></li>
<li><strong>å¦‚æœä½ çš„åº”ç”¨åœºæ™¯ä»‹äºä¸Šè¿°ä¹‹é—´</strong>ï¼šæˆ–è€…ä»æ‹¿ä¸å®šä¸»æ„ï¼Œé‚£<strong>ä¸€èˆ¬ä¼˜å…ˆ SQLite ä½œä¸ºåŸºå‡†æ–¹æ¡ˆ</strong>ã€‚ç„¶åæ ¹æ®ç“¶é¢ˆå†è€ƒè™‘æ›¿ä»£ï¼šæ€§èƒ½ç“¶é¢ˆåœ¨åˆ†ææŸ¥è¯¢ä¸Šå°±ä¸Š DuckDBï¼Œç“¶é¢ˆåœ¨å¹¶å‘è¯»å†™ä¸Šå¯ä»¥è€ƒè™‘ H2ï¼ˆæˆ–è€…ç›´æ¥ä¸Šæ›´é‡å‹çš„æ•°æ®åº“ï¼‰ã€‚æ²¡æœ‰é“¶å¼¹ï¼Œå¦å¤–ï¼Œå¤§ä¸äº†å…ˆç”¨SQLite å¿«é€ŸéªŒè¯ä¸šåŠ¡ï¼ŒçœŸæ’‘ä¸ä½äº†å†è¿ç§»ä¹Ÿä¸è¿Ÿâ€”â€”åæ­£ SQLite è½¬å»å…¶å®ƒæ•°æ®åº“ä¹Ÿä¸ç®—å¤ªç—›è‹¦ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nginxç›¸å…³]]></title>    <link>https://juejin.cn/post/7578793960626896922</link>    <guid>https://juejin.cn/post/7578793960626896922</guid>    <pubDate>2025-12-02T03:16:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578793960626896922" data-draft-id="7578780780026937353" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nginxç›¸å…³"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T03:16:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Dawn11"/> <meta itemprop="url" content="https://juejin.cn/user/4012584995709753"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nginxç›¸å…³
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4012584995709753/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Dawn11
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:16:46.000Z" title="Tue Dec 02 2025 03:16:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€ å®‰è£…nginx</p>
<ol>
<li>rpmåŒ…å®‰è£…</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo apt install nginx -y
</code></pre>
<ol start="2">
<li>éªŒè¯</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo systemctl start nginx 
sudo systemctl <span class="hljs-built_in">enable</span> nginx <span class="hljs-comment"># è®¾ç½®å¼€æœºè‡ªå¯</span>
sudo systemctl status nginx
</code></pre>
<p>äºŒ é…ç½®åå‘ä»£ç†</p>
<p>å‡è®¾éœ€è¦å°†<code>http://your_domain.com/api</code>åå‘ä»£ç†åˆ°åç«¯æœåŠ¡ï¼ˆå¦‚<code>http://localhost:3000</code>ï¼‰</p>
<ol>
<li>åˆ›å»ºNginxé…ç½®æ–‡ä»¶</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo nano /etc/nginx/sites-available/your_proxy.conf
</code></pre>
<ol start="2">
<li>å†™å…¥é…ç½®å†…å®¹
nginx</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">server {
    listen 80;
    server_name your_domain.com;  <span class="hljs-comment"># æ›¿æ¢ä¸ºä½ çš„åŸŸåæˆ–æœåŠ¡å™¨IP</span>

    <span class="hljs-comment"># åå‘ä»£ç†é…ç½®</span>
    location /api/ {
        proxy_pass http://localhost:3000/;  <span class="hljs-comment"># åç«¯æœåŠ¡åœ°å€ï¼ˆç»“å°¾çš„/éœ€ä¿æŒä¸€è‡´ï¼‰</span>
        proxy_set_header Host <span class="hljs-variable">$host</span>;
        proxy_set_header X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        proxy_set_header X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        proxy_set_header X-Forwarded-Proto <span class="hljs-variable">$scheme</span>;
    }

    <span class="hljs-comment"># å¯é€‰ï¼šé…ç½®é™æ€èµ„æºä»£ç†ï¼ˆå¦‚å‰ç«¯é¡µé¢ï¼‰</span>
    location / {
        root /var/www/html;  <span class="hljs-comment"># å‰ç«¯æ–‡ä»¶ç›®å½•</span>
        index index.html;
        try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ /index.html;  <span class="hljs-comment"># æ”¯æŒSPAè·¯ç”±</span>
    }
}
</code></pre>
<ol start="3">
<li>å¯ç”¨é…ç½®æ–‡ä»¶</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">ln</span> -s /etc/nginx/sites-available/your_proxy.conf /etc/nginx/sites-enabled/
</code></pre>
<ol start="4">
<li>æ£€æŸ¥é…ç½®è¯­æ³•</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo nginx -t
</code></pre>
<ol start="5">
<li>é‡å¯Nginx</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo systemctl restart nginx
</code></pre>
<ol start="6">
<li>æµ‹è¯•</li>
</ol>
<p>è®¿é—®<code>http://your_domain.com/api</code>ï¼ŒNginx ä¼šå°†è¯·æ±‚è½¬å‘åˆ°<code>http://localhost:3000</code>ï¼Œå¹¶è¿”å›åç«¯æœåŠ¡çš„å“åº”ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<h2 data-id="heading-0">Nginx åå‘ä»£ç†è§†é¢‘æµä¸ tcpdump æŠ“åŒ…</h2>
<h4 data-id="heading-1">æ­¥éª¤ 1ï¼šé€‰æ‹©å…¬ç½‘è§†é¢‘æµï¼ˆç¤ºä¾‹ï¼šB ç«™å…¬å¼€è§†é¢‘æµï¼‰</h4>
<p>ä»¥ B ç«™æŸå…¬å¼€è§†é¢‘æµä¸ºä¾‹ï¼ˆå®é™…å¯æ›¿æ¢ä¸ºä»»æ„å…¬ç½‘è§†é¢‘æµåœ°å€ï¼‰ï¼Œå‡è®¾å…¬ç½‘è§†é¢‘æµåœ°å€ä¸º<code>https://example.com/video/stream</code>ã€‚</p>
<h4 data-id="heading-2">æ­¥éª¤ 2ï¼šé…ç½® Nginx åå‘ä»£ç†</h4>
<h5 data-id="heading-3">ï¼ˆ1ï¼‰åˆ›å»º Nginx ä»£ç†é…ç½®æ–‡ä»¶</h5>
<p>bash</p>
<pre><code class="hljs language-arduino" lang="arduino">sudo vim /etc/nginx/sites-available/video-proxy.conf
</code></pre>
<h5 data-id="heading-4">ï¼ˆ2ï¼‰å†™å…¥åå‘ä»£ç†é…ç½®</h5>
<p>nginx</p>
<pre><code class="hljs language-ini" lang="ini">server {
    listen 80<span class="hljs-comment">;</span>
    server_name æœåŠ¡å™¨IP<span class="hljs-comment">;</span>

    location / {
        proxy_pass https://example.com/video/stream<span class="hljs-comment">;  # æ›¿æ¢ä¸ºå…¬ç½‘è§†é¢‘æµå®é™…åœ°å€</span>
        proxy_set_header Host $host<span class="hljs-comment">;</span>
        proxy_set_header X-Real-IP $remote_addr<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h5 data-id="heading-5">ï¼ˆ3ï¼‰å¯ç”¨é…ç½®å¹¶é‡å¯ Nginx</h5>
<p>bash</p>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">ln</span> -s /etc/nginx/sites-available/video-proxy.conf /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
</code></pre>
<h4 data-id="heading-6">æ­¥éª¤ 3ï¼šä½¿ç”¨ tcpdump æŠ“åŒ…</h4>
<h5 data-id="heading-7">ï¼ˆ1ï¼‰æ‰§è¡ŒæŠ“åŒ…å‘½ä»¤ï¼ˆæ›¿æ¢<code>ens33</code>ä¸ºå®é™…ç½‘å¡ï¼‰</h5>
<p>bash</p>
<pre><code class="hljs language-css" lang="css">sudo tcpdump -<span class="hljs-selector-tag">i</span> ens33 -w video_stream<span class="hljs-selector-class">.pcap</span> tcp -nn -s <span class="hljs-number">0</span>
</code></pre>
<h5 data-id="heading-8">ï¼ˆ2ï¼‰è§¦å‘è§†é¢‘æµè®¿é—®</h5>
<p>åœ¨ PC æ’­æ”¾å™¨ä¸­è¾“å…¥<code>http://æœåŠ¡å™¨IP</code>ï¼ˆé€šè¿‡ Nginx ä»£ç†è®¿é—®è§†é¢‘æµï¼‰ï¼Œæ’­æ”¾ä¸€æ®µæ—¶é—´åæŒ‰<code>Ctrl+C</code>åœæ­¢æŠ“åŒ…ã€‚</p>
<h4 data-id="heading-9">æ­¥éª¤ 4ï¼šæäº¤æ–‡ä»¶</h4>
<ul>
<li>è½¬æ¢å‡ºçš„è§†é¢‘æ–‡ä»¶ï¼š<code>output.flv</code></li>
<li>æŠ“åŒ…æ–‡ä»¶ï¼š<code>video_stream.pcap</code>å°†ä¸Šè¿°ä¸¤ä¸ªæ–‡ä»¶æŒ‰è€ƒå®˜è¦æ±‚æäº¤å³å¯ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘å¸ƒå¯¹è±¡å’Œå¯¹è±¡é€ƒé€¸]]></title>    <link>https://juejin.cn/post/7578803751609237554</link>    <guid>https://juejin.cn/post/7578803751609237554</guid>    <pubDate>2025-12-02T03:23:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578803751609237554" data-draft-id="7578781397117812782" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘å¸ƒå¯¹è±¡å’Œå¯¹è±¡é€ƒé€¸"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-02T03:23:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="matthew"/> <meta itemprop="url" content="https://juejin.cn/user/1339617839427655"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘å¸ƒå¯¹è±¡å’Œå¯¹è±¡é€ƒé€¸
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1339617839427655/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    matthew
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:23:18.000Z" title="Tue Dec 02 2025 03:23:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºæœ¬æ¦‚å¿µ</h2>
<p>è¦ç†è§£<strong>å‘å¸ƒå¯¹è±¡</strong>å’Œ<strong>å¯¹è±¡é€ƒé€¸</strong>ï¼Œéœ€è¦ä»å¯¹è±¡çš„<strong>ä½œç”¨åŸŸ</strong>ã€<strong>è®¿é—®æ§åˆ¶</strong>ä»¥åŠ<strong>çº¿ç¨‹å®‰å…¨</strong>çš„è§’åº¦å±•å¼€ï¼ŒäºŒè€…ç´§å¯†å…³è”ä½†ä¾§é‡ç‚¹ä¸åŒã€‚</p>
<p><strong>å¯¹è±¡å‘å¸ƒ</strong>ï¼šæ˜¯ â€œè®©å¯¹è±¡è¢«å¤–éƒ¨è®¿é—®â€ çš„è¡Œä¸ºã€‚</p>
<p><strong>å¯¹è±¡é€ƒé€¸</strong>ï¼šæ˜¯ â€œå¯¹è±¡è¶…å‡ºé¢„æœŸä½œç”¨åŸŸï¼ˆå°¤å…¶æ˜¯æœªå®Œå…¨åˆå§‹åŒ–æ—¶è¢«è®¿é—®ï¼‰â€ çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å‘å¸ƒå¯¹è±¡ï¼ˆPublishing an Objectï¼‰</h2>
<ul>
<li>
<p>å®šä¹‰ï¼š</p>
<ul>
<li>æŒ‡å°†ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æš´éœ²ç»™å½“å‰ä½œç”¨åŸŸä¹‹å¤–çš„ä»£ç ï¼Œä½¿å¾—å…¶ä»–ä»£ç ï¼ˆå¦‚å…¶ä»–ç±»ã€çº¿ç¨‹æˆ–æ¨¡å—ï¼‰å¯ä»¥è®¿é—®è¯¥å¯¹è±¡ã€‚</li>
</ul>
</li>
<li>
<p>ç›®çš„ï¼š</p>
<ul>
<li>å…è®¸å…¶ä»–ä»£ç å…±äº«å’Œä½¿ç”¨è¯¥å¯¹è±¡ã€‚</li>
</ul>
</li>
<li>
<p>å¸¸è§åœºæ™¯ï¼š</p>
<ul>
<li>å…¬å…±é™æ€å­—æ®µï¼šé€šè¿‡public staticä¿®é¥°çš„å­—æ®µæŒæœ‰çš„å¯¹è±¡ä¼šè¢«å‘å¸ƒã€‚<code>public class Holder {public static Object obj = new Object(); // objè¢«å‘å¸ƒ}</code></li>
<li>æ–¹æ³•è¿”å›å€¼ï¼šé€šè¿‡æ–¹æ³•è¿”å›å¯¹è±¡å¼•ç”¨ï¼Œå¯èƒ½è¢«å¤–éƒ¨ä»£ç æŒæœ‰ã€‚</li>
<li>æ³¨å†Œç›‘å¬å™¨/å›è°ƒï¼šå°†å¯¹è±¡ä¼ é€’ç»™äº‹ä»¶ç›‘å¬å™¨æˆ–å›è°ƒå‡½æ•°ï¼Œå¯èƒ½å¯¼è‡´éšå¼å‘å¸ƒã€‚</li>
<li>éç§æœ‰æ–¹æ³•ä¼ é€’å¼•ç”¨ï¼šé€šè¿‡éprivateæ–¹æ³•å°†å†…éƒ¨å¯¹è±¡ä¼ é€’ç»™å¤–éƒ¨è°ƒç”¨è€…ã€‚</li>
</ul>
</li>
<li>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>å‘å¸ƒå¯¹è±¡æ—¶éœ€è¦å°å¿ƒï¼Œä»¥é¿å…æ½œåœ¨çš„çº¿ç¨‹å®‰å…¨é—®é¢˜å’Œæ•°æ®ä¸ä¸€è‡´æ€§ã€‚</li>
<li>ç¡®ä¿åœ¨å‘å¸ƒå¯¹è±¡ä¹‹å‰ï¼Œæ‰€æœ‰å¿…è¦çš„åˆå§‹åŒ–å’Œè®¾ç½®éƒ½å·²å®Œæˆã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-2">äºŒã€å¯¹è±¡é€ƒé€¸ï¼ˆEscapeï¼‰</h2>
<ul>
<li>
<p>å®šä¹‰ï¼š</p>
<ul>
<li>æŒ‡å¯¹è±¡åœ¨å…¶æ„é€ å®Œæˆä¹‹å‰è¢«å…¶ä»–ä»£ç è®¿é—®æˆ–æŒæœ‰ï¼Œå¯¼è‡´æœªå®Œå…¨åˆå§‹åŒ–çš„å¯¹è±¡è¢«ä½¿ç”¨ã€‚</li>
</ul>
</li>
<li>
<p>åˆ†ç±»ï¼š</p>
<ul>
<li>æ˜¾å¼é€ƒé€¸ï¼šé€šè¿‡èµ‹å€¼æˆ–è¿”å›å€¼ç›´æ¥æš´éœ²å¼•ç”¨ã€‚</li>
<li>éšå¼é€ƒé€¸ï¼šé€šè¿‡thiså¼•ç”¨åœ¨æ„é€ å‡½æ•°ä¸­ä¼ é€’ï¼ˆå¦‚æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>åæœï¼š</p>
<ul>
<li>å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´æ€§ã€ç©ºæŒ‡é’ˆå¼‚å¸¸æˆ–å…¶ä»–æœªå®šä¹‰è¡Œä¸ºã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-3">ä¸‰ã€å®‰å…¨å‘å¸ƒå¯¹è±¡çš„å››ç§æ–¹æ³•</h2>
<p>ä¸€ã€é™æ€åˆå§‹åŒ–å™¨å‘å¸ƒï¼ˆJVM éšå¼åŒæ­¥ï¼‰</p>
<p>åŸç†ï¼š JVM åœ¨ç±»åŠ è½½é˜¶æ®µä¼šé€šè¿‡éšå¼é”ä¿è¯é™æ€å˜é‡çš„çº¿ç¨‹å®‰å…¨åˆå§‹åŒ–ï¼Œç¬¦åˆ JLS çš„ happens-before è§„åˆ™ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Singleton</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>(); <span class="hljs-comment">// çº¿ç¨‹å®‰å…¨åˆå§‹åŒ–</span>

    <span class="hljs-comment">// åœ¨é™æ€åˆå§‹åŒ–å‡½æ•°ä¸­ï¼Œåˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> instance; <span class="hljs-comment">// å®‰å…¨å‘å¸ƒ</span>
    }
}
</code></pre>
<p>ä¼˜åŠ¿ï¼š</p>
<ul>
<li>é›¶æˆæœ¬åŒæ­¥ï¼ˆJVM åº•å±‚ä¼˜åŒ–ï¼‰</li>
<li>é€‚ç”¨äºåˆå§‹åŒ–ç®€å•çš„åœºæ™¯</li>
</ul>
<p>å±€é™æ€§ï¼š</p>
<ul>
<li>æ— æ³•å®ç°æ‡’åŠ è½½</li>
<li>åˆå§‹åŒ–æœŸé—´ä¸èƒ½å¤„ç†å—æ£€å¼‚å¸¸</li>
</ul>
<p>äºŒã€volatile å…³é”®å­—å‘å¸ƒï¼ˆå†…å­˜å¯è§æ€§ä¿è¯ï¼‰ å·¥ä½œæœºåˆ¶ï¼š å†™ volatile å˜é‡ä¼šè§¦å‘ StoreStore å†…å­˜å±éšœï¼Œè¯» volatile å˜é‡ä¼šè§¦å‘ LoadLoad å±éšœï¼Œç¡®ä¿å†™æ“ä½œå¯¹åç»­è¯»æ“ä½œå¯è§ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">VolatilePublisher</span> {
    <span class="hljs-comment">// å°†å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åˆ°volatileç±»å‹åŸŸæˆ–è€…AtomicReferenceå¯¹è±¡ä¸­</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> Resource resource;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span>()</span> {
        resource = <span class="hljs-keyword">new</span> Resource(); <span class="hljs-comment">// å®‰å…¨å‘å¸ƒç‚¹</span>
    }
}
</code></pre>
<p>å…¸å‹åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>åŒé‡æ£€æŸ¥é”å®šæ¨¡å¼ï¼ˆDouble-Checked Lockingï¼‰</li>
<li>çŠ¶æ€æ ‡å¿—ä½æ›´æ–°</li>
</ul>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>ä»…ä¿è¯å¼•ç”¨å¯è§æ€§ï¼Œä¸ä¿è¯å¯¹è±¡å†…éƒ¨çŠ¶æ€çº¿ç¨‹å®‰å…¨</li>
<li>å†™å…¥æ“ä½œéœ€è¦æ˜¯åŸå­æ€§çš„</li>
</ul>
<p>ä¸‰ã€final å­—æ®µå‘å¸ƒï¼ˆJMM ç‰¹æ®Šè§„åˆ™ï¼‰ JMM è§„èŒƒï¼š é€šè¿‡ final å­—æ®µå‘å¸ƒçš„å¯¹è±¡ï¼Œæ„é€ å‡½æ•°å®Œæˆæ—¶æ‰€æœ‰ final å­—æ®µçš„å†™å…¥å¯¹å…¶ä»–çº¿ç¨‹å¯è§ï¼ˆJava 5+ å¢å¼ºè¯­ä¹‰ï¼‰ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FinalFieldPublisher</span> {
    <span class="hljs-comment">// å°†å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åˆ°æŸä¸ªæ­£ç¡®æ„é€ å¯¹è±¡çš„finalç±»å‹åŸŸä¸­</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ImmutableObject safeObject;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FinalFieldPublisher</span><span class="hljs-params">()</span> </span>{
        safeObject = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ImmutableObject</span>(); <span class="hljs-comment">// å®‰å…¨å‘å¸ƒ</span>
    }
}
</code></pre>
<p>å…³é”®ç‰¹æ€§ï¼š æ„é€ å‡½æ•°é€ƒé€¸ä»èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨ ä¸å¼•ç”¨ä¸å¯å˜æ€§é…åˆä½¿ç”¨æ•ˆæœæœ€ä½³</p>
<p>è®¾è®¡å»ºè®®ï¼š ä¼˜å…ˆç”¨äºä¸å¯å˜å¯¹è±¡å‘å¸ƒ é¿å…åœ¨æ„é€ å‡½æ•°ä¸­æ³„æ¼ this å¼•ç”¨</p>
<p>å››ã€æ˜¾å¼åŒæ­¥å‘å¸ƒï¼ˆé”æœºåˆ¶ä¿è¯ï¼‰ å®ç°æ¨¡å¼ï¼š é€šè¿‡ synchronized æˆ– Lock æ§åˆ¶å‘å¸ƒè·¯å¾„ï¼Œå»ºç«‹ happens-before å…³ç³»ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SyncPublisher</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Resource</span> resource;
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">Object</span> lock = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å°†å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åˆ°ä¸€ä¸ªæœ‰é”ä¿æŠ¤çš„åŸŸä¸­</span>
        <span class="hljs-title function_">synchronized</span>(<span class="hljs-params">lock</span>) {
            resource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Resource</span>(); <span class="hljs-comment">// å®‰å…¨å‘å¸ƒ</span>
        }
    }
}
</code></pre>
<p>æ‰©å±•æ–¹æ¡ˆï¼š ConcurrentHashMap ç­‰å¹¶å‘å®¹å™¨çš„å®‰å…¨å‘å¸ƒ FutureTask çš„çº¿ç¨‹å®‰å…¨ç»“æœå‘å¸ƒ</p>
<p>æ€§èƒ½æƒè¡¡ï¼š é€‚åˆé«˜é¢‘æ›´æ–°çš„å¯å˜å¯¹è±¡ éœ€æ³¨æ„é”ç²’åº¦å’Œç«äº‰é—®é¢˜</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å°ç™½æœåŠ¡å™¨è¸©å‘]]></title>    <link>https://juejin.cn/post/7578762210287403071</link>    <guid>https://juejin.cn/post/7578762210287403071</guid>    <pubDate>2025-12-02T03:22:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578762210287403071" data-draft-id="7578830345869623337" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å°ç™½æœåŠ¡å™¨è¸©å‘"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T03:22:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Ankkaya"/> <meta itemprop="url" content="https://juejin.cn/user/413072100168269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å°ç™½æœåŠ¡å™¨è¸©å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/413072100168269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Ankkaya
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:22:39.000Z" title="Tue Dec 02 2025 03:22:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯ä¸€ç³»åˆ—æœåŠ¡ç«¯è¸©å‘ç¬”è®°ï¼Œè®°å½•ç¬”è€…ä»é›¶å¼€å§‹æœåŠ¡ç«¯å­¦ä¹ ä¹‹æ—…</p>
<h2 data-id="heading-0">æœåŠ¡å™¨</h2>
<p>æ—¢ç„¶æ˜¯æœåŠ¡å™¨è¸©å‘ï¼Œæ‹¥æœ‰ä¸€ä¸ªæœåŠ¡å™¨æ˜¯å¿…è¦æ¡ä»¶ï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸ªä½æˆæœ¬çš„å°è¯•</p>
<h3 data-id="heading-1">è´­ä¹°</h3>
<p>è…¾è®¯äº‘æ¯å¤©éƒ½æœ‰ 4 æ ¸ 4G è½»é‡çº§æœåŠ¡å™¨çš„ç‰¹ä»·æ´»åŠ¨ï¼Œ38 å…ƒ/å¹´ï¼Œç›¸æ¯”åŸä»·åŠ¨è¾„äº”å…­ç™¾çš„ä»·æ ¼ï¼Œå¾ˆé¦™ã€‚æ¯å¤©ä¸¤æ¬¡æŠ¢è´­æœºä¼šï¼ŒæŠ¢ä¸­çš„æ¦‚ç‡è¿˜æ˜¯æŒºå¤§çš„</p>
<h3 data-id="heading-2">ç³»ç»Ÿå®‰è£…</h3>
<p>æœåŠ¡å™¨å…¶å®å°±æ˜¯ä¸€ä¸ªäº‘ç«¯ç”µè„‘ï¼Œå®ƒä¹Ÿéœ€è¦æ“ä½œç³»ç»Ÿï¼Œæˆ‘è¿™é‡Œé€‰æ‹©åŸºäº linux å†…æ ¸å‘è¡Œçš„ debianï¼Œé€‰æ‹© Cen'tOSï¼ŒUbuntu å¯¹æœåŠ¡å™¨éƒ¨ç½²å·®åˆ«ä¹Ÿä¸ä¼šå¾ˆå¤§ï¼Œæ ¹æ®ä¸ªäººå–œå¥½</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65c8eeace3fc44989e14d95bd00db462~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=g8JRbh8YqlNcPDkpNFzrVGXevxg%3D" alt="" loading="lazy"/></p>
<p>æ—¢ç„¶æ˜¯ç³»ç»Ÿï¼Œå½“ç„¶è¦è®¾ç½®ç™»å½•å¯†ç ï¼Œä¸è¿‡åç»­ç™»å½•åŸºæœ¬ä¸ä¼šç”¨åˆ°å›¾å½¢ç•Œé¢ï¼Œä½¿ç”¨ ssh ç»ˆç«¯ç™»å½•æœåŠ¡å™¨</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fed4e81051f46f2ac943eac994381f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=R3YBWAwqB1YslcH4KkSDLzsOujc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">ssh ç»ˆç«¯</h2>
<p>ä½¿ç”¨æœåŠ¡å™¨çš„æœåŠ¡ï¼Œéœ€è¦ç”¨åˆ°ä¸åŒç«¯å£ï¼Œä¾‹å¦‚ web http æœåŠ¡æ˜¯ 80 ç«¯å£ï¼Œlinux ssh ç™»å½•æ˜¯ 22 ç«¯å£ï¼Œå¦‚æœè¦æœ¬åœ° ssh ç™»å½•è¿œç«¯æœåŠ¡å™¨ï¼Œè¿˜è¦å¼€å¯æœåŠ¡å™¨çš„ 22 ç«¯å£ï¼Œä¸€èˆ¬æœåŠ¡å™¨å·²ç»é»˜è®¤å¼€å¯ï¼Œåœ¨æœåŠ¡å™¨é¡µé¢-é˜²ç«å¢™æ ‡ç­¾é¡µå¯ä»¥çœ‹åˆ°ç«¯å£å¼€æ”¾æƒ…å†µ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d68eda31518e4848a352947c86ee5712~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=At344ChiOauclJ1lLLoexAk%2F17M%3D" alt="" loading="lazy"/></p>
<p>ç¬”è€…ç”¨çš„ç»ˆç«¯æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.hostbuf.com%2F" target="_blank" title="https://www.hostbuf.com/" ref="nofollow noopener noreferrer">FinalShell</a>ï¼ŒæœåŠ¡å™¨ç™»å½•æˆåŠŸå¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea190ba9857d4c2e9dd22a19cfd1fd2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=HvVygZrJrJLoXXiLoBsBfEH8zPI%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ç°åœ¨æœ¬åœ°æœ‰ä¸€ä¸ªå‰ç«¯é¡¹ç›®ï¼Œéœ€è¦éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œæ–¹ä¾¿æµè§ˆå™¨ä¸­æŸ¥çœ‹ï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Œè¿™é‡Œè¦æåˆ° nginx</p>
<h2 data-id="heading-4">nginx</h2>
<p>nginx å¾ˆå¼ºå¤§ï¼Œè¿™é‡Œä¸æ·±å…¥æ¢è®¨ï¼Œç›®å‰æˆ‘ä»¬åªéœ€è¦ç”¨åˆ°ä¸€ç‚¹åŠŸèƒ½ï¼Œè¯·æ±‚è½¬å‘ï¼Œå®ƒå¯ä»¥ç›‘å¬æœåŠ¡å™¨å…¥å£æµé‡ï¼Œæ ¹æ® ipï¼Œç«¯å£ï¼ŒåŸŸåï¼Œå°†è¯·æ±‚æ‰§è¡Œä¸åŒçš„æœåŠ¡ï¼Œå½“ç„¶ä¸ç”¨ nginxï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå‰ç«¯é¡¹ç›®æ”¾åœ¨æœåŠ¡å™¨ï¼Œåœ¨æµè§ˆå™¨ä¹Ÿå¯ä»¥è®¿é—®åˆ°ï¼Œè¿™é‡Œå°±ä¸åšä»‹ç»</p>
<h3 data-id="heading-5">åŸºæœ¬é…ç½®</h3>
<p>åœ¨ Debian ä¸­å®‰è£…åº”ç”¨éå¸¸æ–¹ä¾¿ï¼Œä½¿ç”¨å‘½ä»¤å³å¯å®‰è£…</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ›´æ–°è½¯ä»¶æº</span>
apt update

<span class="hljs-comment"># å®‰è£… nginx</span>
apt install nginx
</code></pre>
<p>å®‰è£…æˆåŠŸï¼ŒæŸ¥çœ‹ nginx è¿è¡ŒçŠ¶æ€ï¼Œactive è¡¨ç¤ºæ­£åœ¨è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash">systemctl status nginx
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58f5f7af2f3b4176bcaa18840b62ec84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=X9WQ5x6g8ZjIpqCwe%2FuFBKEiQlA%3D" alt="" loading="lazy"/></p>
<p>nginx çš„ç›®å½•ä¸€èˆ¬åœ¨<code>/etc/nginx</code>ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>/etc/nginx/conf.d</code>ä¸‹åˆ›å»ºè‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œåç§°è‡ªå®šä¹‰æ–¹ä¾¿åŒºåˆ†å³å¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/889be46595d9473a94c68a69844ef73a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=wJc9TqehB1COFwJOsu7sqcs3aEs%3D" alt="" loading="lazy"/></p>
<p>åŒå‡»æ‰“å¼€ï¼Œè®¾ç½®è§„åˆ™</p>
<ul>
<li>listen 80ï¼šæ‹¦æˆª web http è®¿é—®</li>
<li>server_nameï¼šæœåŠ¡å™¨ ip åœ°å€</li>
<li>rootï¼š/var/www/utils-web é¡¹ç›®æ–‡ä»¶æ ¹ç›®å½•</li>
<li>index index.html index.htm é»˜è®¤é¦–é¡µæ–‡ä»¶</li>
</ul>
<p>å…¶ä»–ç…§æŠ„å³å¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fff7f1ae5bc14814a3a10844d87aa43d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=HfevhGiKNGyVu%2By0hrWiADUhOAg%3D" alt="" loading="lazy"/></p>
<p>å¯¹åº” web é¡¹ç›®</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82ee60d7d72444598e0586b3071e48b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=RlF6zCMFgjg4%2F9D%2FdGGoRt%2FFVNk%3D" alt="" loading="lazy"/></p>
<p>è®¾ç½®å®Œæˆï¼Œæ£€æŸ¥é…ç½®ï¼Œé‡å¯ nginx æœåŠ¡</p>
<pre><code class="hljs language-bash" lang="bash">// nginx éªŒè¯é…ç½®æ­£ç¡®æ€§
nginx -t

// é‡å¯æœåŠ¡
systemctl restart nginx
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a1b361b7d14443db4f1015b71fcc301~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=c6QgaTTDhlpATw0UCIGpflBRK54%3D" alt="" loading="lazy"/></p>
<p>ä¸€èˆ¬åˆ°è¿™æ­¥ç»“æŸï¼Œåœ¨æµè§ˆè¾“å…¥æœåŠ¡å™¨ ipï¼Œå›è½¦åº”è¯¥å¯ä»¥çœ‹åˆ°ç½‘ç«™ï¼Œå¦‚æœè®¿é—®å¼‚å¸¸ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹å‡ ç‚¹æ’é”™</p>
<h2 data-id="heading-6">æ’é”™</h2>
<h3 data-id="heading-7">ç«¯å£</h3>
<p>nginx ç›‘å¬çš„æ˜¯ 80 ç«¯å£ï¼Œå¦‚æœç«¯å£è¢«å…¶ä»–æœåŠ¡å ç”¨ï¼Œ<code>nginx -t</code>é…ç½®éªŒè¯å°±ä¸é€šè¿‡ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹è…¾è®¯äº‘æœåŠ¡å™¨é‡Œé˜²ç«å¢™è§„åˆ™ï¼Œ80 ç«¯å£æ˜¯å¦æ”¾è¡Œï¼Œå¦‚æœç³»ç»Ÿå®‰è£…äº†é˜²ç«å¢™ï¼Œä¹Ÿè¦çœ‹é˜²ç«å¢™ç«¯å£è§„åˆ™</p>
<p>æˆ‘è¿™é‡Œå®‰è£…äº† ufwï¼ŒæŸ¥çœ‹é…ç½®è§„åˆ™</p>
<pre><code class="hljs language-bash" lang="bash">ufw status
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1781b576fc5e4ee68ceca1db7580e3ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=sPFgXujWXKup42slnfQ2m6CPUk4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">æ–‡ä»¶æƒé™</h3>
<p>å› ä¸ºå¯¹æ–‡ä»¶æƒé™çš„ä¸äº†è§£ï¼Œæˆ‘å°±é‡åˆ°äº†<code>/var/www/utils-web</code>ä¸å±äº rootï¼Œå¯¼è‡´é¡µé¢ä¸€ç›´æ— æ³•è®¿é—®ï¼Œå…³äºæ–‡ä»¶ï¼ˆå¤¹ï¼‰æ‰€å±ç”¨æˆ·å’Œç”¨æˆ·ç»„ï¼Œå¯ä»¥ä» finalshell åº•éƒ¨æ–‡ä»¶æµè§ˆå™¨ç›´è§‚çœ‹åˆ°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31dec49326da43daaeab7a575a0f7345~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=8ia9Ax%2Bd0RrpVKvItEtMsrF5Y7U%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">https</h2>
<p>å½“æˆ‘ä»¬åœ¨æµè§ˆåœ°å€æ è¾“å…¥ ip è®¿é—®ç½‘é¡µæ—¶å€™ï¼Œæœ‰äº›æµè§ˆå¯èƒ½ä¼šæç¤º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5ca36a803974667b026fef57d94d722~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=oLuRkgeAPMyleiNA%2F8O9e1rCzEM%3D" alt="" loading="lazy"/></p>
<p>è¿™å°±ä¸å¾—ä¸æåˆ° httpsï¼Œé»˜è®¤æˆ‘ä»¬çš„è¯·æ±‚éƒ½æ˜¯ http çš„ï¼Œhttps æ¯” http å®‰å…¨ç³»æ•°æ›´é«˜ï¼Œé…ç½®æœ‰äº›åå°æœåŠ¡ï¼Œæ˜ç¡®è¦æ±‚è¦ä½¿ç”¨ httpsï¼ˆä¾‹å¦‚å¾®ä¿¡å°ç¨‹åºï¼‰ï¼Œé…ç½® https è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ç”³è¯·è…¾è®¯äº‘å…è´¹çš„ ssl è¯ä¹¦</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c09d5e464b184ad3a05cfbfa7ba26116~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=0DpXzyOPzNKLeTg8thU7FNJDntg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">åŸŸåå’Œå¤‡æ¡ˆ</h2>
<p>ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå…è´¹è¯ä¹¦éœ€è¦æä¾›åŸŸåï¼Œæˆ‘ä»¬è¿˜è¦å»ç”³è¯·åŸŸåã€‚é˜¿é‡Œäº‘å’Œè…¾è®¯äº‘éƒ½æä¾›æœ‰åŸŸåæœåŠ¡ï¼Œæ ¹æ®å–œå¥½é€‰æ‹©å³å¯ã€‚å¯ä»¥é€‰æ‹©å†·é—¨åç¼€çš„åŸŸåï¼Œä»·æ ¼ä¼˜æƒ ä¸å°‘</p>
<blockquote>
<p>ğŸ˜±ğŸ˜± å¦‚æœæ˜¯å›½å†…çš„ç½‘ç«™ï¼Œéƒ¨ç½²ä¸Šçº¿è¿˜è¦å®Œæˆå¤‡æ¡ˆï¼Œå¤‡æ¡ˆè·ŸåŸŸåä¹Ÿæœ‰å…³ç³»ï¼ŒåŸŸåçš„å¤‡æ¡ˆè·ŸæœåŠ¡å™¨æ˜¯ç»‘å®šçš„ï¼Œå°±æ˜¯è¯´åŸŸååœ¨å“ªé‡Œå¤‡æ¡ˆï¼ŒæœåŠ¡å™¨ä¹Ÿè¦åœ¨å“ªé‡Œè´­ä¹°ï¼Œè™½ç„¶è¯´å¯ä»¥è½¬ç§»å¤‡æ¡ˆï¼Œæ¯•ç«Ÿéº»çƒ¦ä¸å°‘ï¼Œæ‰€ä»¥å¤‡æ¡ˆåŸŸåæ—¶éœ€è¦æ³¨æ„ï¼Œè¿™è·ŸåŸŸååœ¨å“ªé‡Œä¹°æ²¡å…³ç³»</p>
</blockquote>
<p>åŸŸåè´­ä¹°å®Œåï¼Œå°±å¯ä»¥ç€æ‰‹å¼€å§‹å¤‡æ¡ˆï¼Œæˆ‘åœ¨é˜¿é‡Œäº‘ä¹°çš„åŸŸåï¼Œä½†æ˜¯æœåŠ¡å™¨åœ¨è…¾è®¯äº‘ï¼Œå› æ­¤å°±åœ¨è…¾è®¯äº‘å¤‡æ¡ˆï¼Œä¸€èˆ¬å¤‡æ¡ˆéœ€è¦åŠä¸ªå¤šæœˆï¼Œä¸­é—´è…¾è®¯å®¢æœäººå‘˜ä¼šæ‰“ç”µè¯è¯¢é—®ä¸€äº›ç½‘ç«™æƒ…å†µï¼Œæ³¨æ„æ¥å¬ç”µè¯</p>
<h2 data-id="heading-11">sslè¯ä¹¦</h2>
<p>æäº¤å…è´¹ ssl ç”³è¯·ï¼Œå¾ˆå¿«å°±èƒ½è·å–å…è´¹çš„ ssl è¯ä¹¦ï¼Œä¸‹è½½ nginx è¯ä¹¦é…ç½®æ–‡ä»¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3c7544190454da7adc0cb572ac4be40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=OwGzIA8QofIgyXdYxqh6IBmgsMk%3D" alt="" loading="lazy"/></p>
<p>ä¿®æ”¹ <code>/var/nginx/conf.d/ankkaya.conf</code>çš„é…ç½®ï¼ŒæŠŠå‰é¢ä¸‹è½½çš„ ssl å‹ç¼©åŒ…ä¸­çš„ .crt å’Œ .key æ–‡ä»¶æ”¾åˆ°<code>/etc/nginx/ssl</code>ç›®å½•ä¸‹ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªç›®å½•ï¼Œæ–°å»ºè¯¥ç›®å½•ï¼Œé‡å¯æœåŠ¡</p>
<p>é…ç½®ä¸­æœ‰æ–°ç”¨åˆ°çš„ 443 ç«¯å£ï¼ŒæœåŠ¡å™¨å’Œç³»ç»Ÿå†…ï¼ˆå¦‚æœæœ‰é˜²ç«å¢™ï¼‰ä¹Ÿè¦æ·»åŠ  443 çš„è§„åˆ™</p>
<pre><code class="hljs language-bash" lang="bash">server { 
	listen 80;
	server_name ankkaya.top; <span class="hljs-comment"># ä½ çš„æœåŠ¡å™¨IPåœ°å€æˆ–åŸŸå</span>
    <span class="hljs-built_in">return</span> 301 https://$server_name<span class="hljs-variable">$request_uri</span>; <span class="hljs-comment"># é‡å®šå‘åˆ° https</span>
    location / { 
    root /var/www/utils-web; <span class="hljs-comment"># é¡¹ç›®æ–‡ä»¶çš„æ ¹ç›®å½• </span>
    index index.html index.htm; <span class="hljs-comment"># é»˜è®¤é¦–é¡µæ–‡ä»¶ </span>
        try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =404; <span class="hljs-comment"># å°è¯•æŒ‰é¡ºåºæŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½•ï¼Œä¸å­˜åœ¨åˆ™è¿”å›404</span>
    }
}

server {
    listen 443 ssl; <span class="hljs-comment"># https ç«¯å£</span>
    server_name ankkaya.top www.ankkaya.top;

    ssl_certificate /etc/nginx/ssl/ankkaya.top_nginx/ankkaya.top_bundle.crt;
    ssl_certificate_key /etc/nginx/ssl/ankkaya.top_nginx/ankkaya.top.key;

    <span class="hljs-comment"># å…¶ä»–é…ç½®é¡¹ï¼Œå¦‚æ ¹ç›®å½•ã€ä»£ç†ç­‰</span>
    location / {
        root /var/www/utils-web;
        index index.html index.htm;
    }
}
</code></pre>
<p>è¿™æ—¶åœ¨æµè§ˆå™¨è¾“å…¥ ip å·²ç»æ— æ³•è®¿é—®ç½‘é¡µï¼Œå› ä¸ºåœ¨ nginx é…ç½®ä¸­ï¼Œserver_name éƒ½é…ä¸ºäº†åŸŸåå’Œå­åŸŸåï¼Œä½†æ˜¯è¾“å…¥åŸŸåä¹Ÿæ— æ³•è®¿é—®ï¼Œè¿™å°±è¦è¯´åˆ° DNS è§£æï¼ŒæœåŠ¡å™¨åªè®¤ ip åœ°å€ï¼Œå¦‚æœæ˜¯åŸŸåï¼Œéœ€è¦é…ç½® DNS è§£æï¼Œå‘Šè¯‰æµè§ˆå™¨å»å“ªé‡Œè·å–èµ„æº</p>
<blockquote>
<p>ğŸ˜±ğŸ˜± åŸŸååœ¨å“ªé‡Œè´­ä¹°ï¼ŒDNS è§£æä¹Ÿè¦åœ¨å¯¹åº”å¹³å°é…ç½®ï¼Œæˆ‘çš„åŸŸååœ¨é˜¿é‡Œäº‘ä¹°çš„ï¼Œå°±è¦åˆ°é˜¿é‡Œäº‘é…ç½® DNS</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b5d8f50a19047a78a2288ff87e75dbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250558&amp;x-signature=saWn9BOfBeDexkKDp4toHgfDmfs%3D" alt="" loading="lazy"/></p>
<p>åœ¨æµè§ˆå™¨è¾“å…¥åŸŸååœ°å€<code>ankkaya.top</code>ï¼Œå°±å¯ä»¥æ‰“å¼€ç½‘ç«™äº†</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†çå­¦å¤§æ¨¡å‹äº†ï¼Œè¿™ä»½GitHubç¥çº§è¯¾ç¨‹ç«çˆ†å…¨ç½‘]]></title>    <link>https://juejin.cn/post/7578767608631083008</link>    <guid>https://juejin.cn/post/7578767608631083008</guid>    <pubDate>2025-12-02T03:34:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578767608631083008" data-draft-id="7578780780027117577" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†çå­¦å¤§æ¨¡å‹äº†ï¼Œè¿™ä»½GitHubç¥çº§è¯¾ç¨‹ç«çˆ†å…¨ç½‘"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-02T03:34:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†çå­¦å¤§æ¨¡å‹äº†ï¼Œè¿™ä»½GitHubç¥çº§è¯¾ç¨‹ç«çˆ†å…¨ç½‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:34:19.000Z" title="Tue Dec 02 2025 03:34:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<h2 data-id="heading-0">é¡¹ç›®é€Ÿè§ˆ</h2>
<p>æœ€è¿‘åœ¨ GitHub ä¸Šå‘ç°äº†ä¸€ä¸ªè¶…çº§ç¡¬æ ¸çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è¯¾ç¨‹ï¼Œå®ƒæä¾›äº†ä¸€å¥—å®Œæ•´çš„å­¦ä¹ è·¯çº¿å›¾å’Œå¯ä»¥ç›´æ¥ä¸Šæ‰‹çš„ Colab ç¬”è®°ï¼Œç›®æ ‡å°±æ˜¯å¸¦ä½ ä»å…¥é—¨åˆ°ç²¾é€šï¼Œæ— è®ºæ˜¯æƒ³æ·±å…¥ç ”ç©¶æ¨¡å‹ï¼Œè¿˜æ˜¯æƒ³å¼€å‘åº”ç”¨ï¼Œéƒ½èƒ½æ‰¾åˆ°æ¸…æ™°çš„è·¯å¾„ã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®çœŸå¿ƒä¸é”™ï¼Œç»“æ„åŒ–å¾—ç‰¹åˆ«å¥½ï¼ŒæŠŠå¤æ‚çš„ LLM é¢†åŸŸæ‹†è§£æˆäº†ä¸‰ä¸ªæ¸…æ™°çš„éƒ¨åˆ†ï¼Œå¯¹æƒ³ç³»ç»Ÿå­¦ä¹ çš„åŒå­¦æ¥è¯´ï¼Œç®€ç›´æ˜¯ç¦éŸ³ã€‚</p>
<h2 data-id="heading-1">å¿«é€Ÿä¸Šæ‰‹</h2>
<p>æƒ³ä½“éªŒè¿™é—¨è¯¾ç¨‹ï¼Ÿéå¸¸ç®€å•ï¼Œä¸éœ€è¦å¤æ‚çš„ç¯å¢ƒé…ç½®ï¼Œä¸€ä¸ªæµè§ˆå™¨å°±å¤Ÿäº†ã€‚</p>
<ol>
<li><strong>è®¿é—®é¡¹ç›®</strong>ï¼šæ‰“å¼€ GitHub é¡¹ç›®ä¸»é¡µï¼Œå…ˆç‚¹ä¸ª Star æ”¶è—ä¸€ä¸‹ã€‚</li>
<li><strong>é€‰æ‹©è·¯å¾„</strong>ï¼šæ ¹æ®ä½ çš„å…´è¶£ï¼Œé€‰æ‹©<code>The LLM Scientist</code>ï¼ˆèšç„¦äºæ„å»ºå’Œä¼˜åŒ–æ¨¡å‹ï¼‰æˆ–<code>The LLM Engineer</code>ï¼ˆèšç„¦äºæ„å»ºå’Œéƒ¨ç½²åº”ç”¨ï¼‰çš„å­¦ä¹ è·¯çº¿ã€‚</li>
<li><strong>æ‰“å¼€ Notebook</strong>ï¼šåœ¨é¡¹ç›®é‡Œæ‰¾åˆ°ä½ æ„Ÿå…´è¶£çš„ Notebookï¼Œæ¯”å¦‚â€œFine-tune Llama 3.1 with Unslothâ€ï¼Œç‚¹å‡»æ—è¾¹çš„ "Open in Colab" æŒ‰é’®ï¼Œç›´æ¥åœ¨æµè§ˆå™¨é‡Œè·Ÿç€ä»£ç è·‘èµ·æ¥ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d59974b2771411cb8a1135a4d4b1fbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251259&amp;x-signature=fvGCwdddlZ1dHbOxTWCY%2Fhq4cXM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">åŠŸèƒ½æ¼”ç¤º</h2>
<p>è¿™ä¸ªè¯¾ç¨‹æœ€å¤§çš„äº®ç‚¹å°±æ˜¯å®ƒçš„ä½“ç³»åŒ–å’Œå®è·µæ€§ã€‚å®ƒæŠŠå­¦ä¹ è·¯å¾„åˆ†æˆäº†ä¸‰ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ¸…æ™°çš„è·¯çº¿å›¾ã€‚</p>
<h4 data-id="heading-3">1. LLM ç§‘å­¦å®¶è·¯çº¿</h4>
<p>å¦‚æœä½ å¯¹æ¨¡å‹æœ¬èº«æ›´æ„Ÿå…´è¶£ï¼Œæƒ³çŸ¥é“å¦‚ä½•è®­ç»ƒã€å¾®è°ƒã€è¯„ä¼°ä¸€ä¸ªæœ€å¥½çš„ LLMï¼Œè¿™æ¡è·¯çº¿å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚</p>
<p>å®ƒæ¶µç›–äº†ä» Transformer æ¶æ„ã€é¢„è®­ç»ƒã€ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰ã€åå¥½å¯¹é½ï¼ˆDPO/RLHFï¼‰åˆ°æ¨¡å‹è¯„ä¼°å’Œé‡åŒ–çš„æ‰€æœ‰æ ¸å¿ƒç¯èŠ‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53c178d81c2a4f78a2bd8125fed6eab7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251259&amp;x-signature=MVoqNwORc%2BCAaPBzx2tI1psaBL8%3D" alt="" loading="lazy"/></p>
<p>LLM Scientist Roadmap</p>
<h4 data-id="heading-4">2. LLM å·¥ç¨‹å¸ˆè·¯çº¿</h4>
<p>å¦‚æœä½ æ›´å…³æ³¨å¦‚ä½•ç”¨ LLM æ¥è§£å†³å®é™…é—®é¢˜ï¼Œæ„å»ºåº”ç”¨ï¼Œé‚£ä¹ˆå·¥ç¨‹å¸ˆè·¯çº¿ä¼šæ›´é€‚åˆä½ ã€‚</p>
<p>è¿™æ¡è·¯å¾„èšç„¦äºå¦‚ä½•è¿è¡Œå’Œéƒ¨ç½² LLMã€æ„å»º RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç³»ç»Ÿã€ä½¿ç”¨ Agentsã€ä¼˜åŒ–æ¨ç†æ€§èƒ½ï¼Œä»¥åŠå¦‚ä½•ä¿éšœ LLM åº”ç”¨çš„å®‰å…¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdc9d2e478bf46df9ee4869d403c05f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251259&amp;x-signature=j%2BMJF2Z52qeoaqj9dQvhk2hNr68%3D" alt="" loading="lazy"/></p>
<p>LLM Engineer Roadmap</p>
<h4 data-id="heading-5">3. å¤§é‡å³ç”¨å‹ä»£ç ç¤ºä¾‹</h4>
<p>è¿™é—¨è¯¾ç¨‹æœ€å®åœ¨çš„åœ°æ–¹åœ¨äºæä¾›äº†æµ·é‡çš„ Colab Notebooksã€‚è¿™äº›ä¸æ˜¯å¹²å·´å·´çš„ç†è®ºï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥è¿è¡Œçš„ä»£ç ã€‚</p>
<p>æ¯”å¦‚ï¼Œä½ æƒ³å­¦ä¹ å¦‚ä½•å¾®è°ƒæœ€æ–°çš„ Llama 3.1 æ¨¡å‹ï¼Ÿè¿™é‡Œæœ‰ç°æˆçš„ Notebookï¼š</p>
<ul>
<li><code>Fine-tune Llama 3.1 with Unsloth</code>ï¼šæ•™ä½ å¦‚ä½•åœ¨å…è´¹çš„ Colab ç¯å¢ƒä¸­é«˜æ•ˆåœ°è¿›è¡Œç›‘ç£å¾®è°ƒã€‚</li>
</ul>
<p>æƒ³äº†è§£å¦‚ä½•é‡åŒ–æ¨¡å‹ï¼Œè®©å®ƒèƒ½åœ¨æ¶ˆè´¹çº§ç¡¬ä»¶ä¸Šè·‘èµ·æ¥ï¼Ÿ</p>
<ul>
<li><code>Quantization with GGUF and llama.cpp</code>ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ llama.cpp é‡åŒ–æ¨¡å‹ã€‚</li>
</ul>
<p>è¿™äº› Notebook æŠŠå­¦ä¹ é—¨æ§›é™åˆ°äº†æœ€ä½ï¼Œè®©ä½ å¯ä»¥å¿«é€Ÿä¸Šæ‰‹å®è·µï¼Œè·å¾—æ­£åé¦ˆã€‚</p>
<h2 data-id="heading-6">é¡¹ç›®æŠ€æœ¯æ ˆ</h2>
<p>è¿™ä¸ªé¡¹ç›®æœ¬èº«æ˜¯ä¸€ä¸ªè¯¾ç¨‹ï¼Œä¸æ¶‰åŠç‰¹å®šçš„åç«¯æŠ€æœ¯æ ˆï¼Œä½†å®ƒæ‰€æ•™æˆå’Œä½¿ç”¨çš„æŠ€æœ¯ï¼ŒåŸºæœ¬æ¶µç›–äº†å½“å‰ LLM é¢†åŸŸçš„ä¸»æµæ¡†æ¶å’Œå·¥å…·ã€‚</p>
<p>åœ¨â€œç§‘å­¦å®¶â€è·¯å¾„ä¸­ï¼Œä½ ä¼šæ¥è§¦åˆ° <strong>PyTorch</strong>ã€<strong>Hugging Face Transformers</strong>ã€<strong>TRL</strong>ã€<strong>Unsloth</strong> å’Œ <strong>Axolotl</strong> ç­‰ç”¨äºæ¨¡å‹è®­ç»ƒå’Œå¾®è°ƒçš„æ ¸å¿ƒåº“ã€‚è¯¾ç¨‹ä¼šå¸¦ä½ æ·±å…¥ç†è§£ LoRAã€QLoRA ç­‰å‚æ•°é«˜æ•ˆå¾®è°ƒæŠ€æœ¯ï¼Œä»¥åŠ DPO è¿™æ ·çš„åå¥½å¯¹é½ç®—æ³•ã€‚</p>
<p>åœ¨â€œå·¥ç¨‹å¸ˆâ€è·¯å¾„ä¸­ï¼Œåˆ™ä¾§é‡äºåº”ç”¨å±‚æŠ€æœ¯ï¼Œæ¯”å¦‚ä½¿ç”¨ <strong>LangChain</strong> å’Œ <strong>LlamaIndex</strong> æ„å»º RAG åº”ç”¨ï¼Œåˆ©ç”¨ <strong>FAISS</strong> æˆ– <strong>Chroma</strong> æ­å»ºå‘é‡æ•°æ®åº“ï¼Œä»¥åŠä½¿ç”¨ <strong>Gradio</strong> æˆ– <strong>Streamlit</strong> å¿«é€Ÿéƒ¨ç½²åº”ç”¨åŸå‹ã€‚å¯ä»¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å…¨é¢çš„æŠ€æœ¯å›¾è°±ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œè¿™ä¸ªé¡¹ç›®å°±åƒä¸€ä»½ç²¾å¿ƒç»˜åˆ¶çš„è—å®å›¾ï¼Œæ— è®ºä½ æ˜¯ AI æ–°æ‰‹è¿˜æ˜¯æœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œéƒ½èƒ½ä»ä¸­æ‰¾åˆ°è‡ªå·±çš„å­¦ä¹ è·¯å¾„å’Œå®è´µèµ„æºã€‚</p>
<p>GitHub é¡¹ç›®åœ°å€ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmlabonne%2Fllm-course" target="_blank" title="https://github.com/mlabonne/llm-course" ref="nofollow noopener noreferrer">github.com/mlabonne/llâ€¦</a></p>
<h2 data-id="heading-7">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Uni-App é¸¿è’™åº”ç”¨å¾®ä¿¡ç›¸å…³åŠŸèƒ½ä¸Šæ¶è¸©å‘ï¼šè‡ªåˆ¶å¾®ä¿¡å®‰è£…æ£€æµ‹æ’ä»¶]]></title>    <link>https://juejin.cn/post/7578762210287321151</link>    <guid>https://juejin.cn/post/7578762210287321151</guid>    <pubDate>2025-12-02T03:07:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578762210287321151" data-draft-id="7578760341280866345" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Uni-App é¸¿è’™åº”ç”¨å¾®ä¿¡ç›¸å…³åŠŸèƒ½ä¸Šæ¶è¸©å‘ï¼šè‡ªåˆ¶å¾®ä¿¡å®‰è£…æ£€æµ‹æ’ä»¶"/> <meta itemprop="keywords" content="HarmonyOS,uni-app"/> <meta itemprop="datePublished" content="2025-12-02T03:07:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MrTan"/> <meta itemprop="url" content="https://juejin.cn/user/3945466563398445"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Uni-App é¸¿è’™åº”ç”¨å¾®ä¿¡ç›¸å…³åŠŸèƒ½ä¸Šæ¶è¸©å‘ï¼šè‡ªåˆ¶å¾®ä¿¡å®‰è£…æ£€æµ‹æ’ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3945466563398445/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MrTan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:07:20.000Z" title="Tue Dec 02 2025 03:07:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯ï¼šä¸Šæ¶å¤±è´¥çš„ç—›ç‚¹</h2>
<p>åš Uni-App è·¨ç«¯å¼€å‘æ—¶ï¼Œé¸¿è’™åº”ç”¨ä¸Šæ¶é‡åˆ°äº†ä¸€ä¸ªæ£˜æ‰‹é—®é¢˜ï¼šåº”ç”¨é›†æˆäº†å¾®ä¿¡ç™»å½•ã€æ”¯ä»˜ã€åˆ†äº«ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œä½†ä¸Šæ¶å¹³å°çš„æµ‹è¯•æœºæœªå®‰è£…å¾®ä¿¡ï¼Œå¯¼è‡´è¿™äº›åŠŸèƒ½è§¦å‘æ—¶ç›´æ¥å´©æºƒï¼Œæœ€ç»ˆä¸Šæ¶å¤±è´¥ã€‚</p>
<p>ç¿»éäº† Uni-App å®˜æ–¹æ–‡æ¡£ã€é¸¿è’™å¼€å‘è€…ç¤¾åŒºï¼Œç”šè‡³å„ç±»æŠ€æœ¯è®ºå›ï¼Œéƒ½æ²¡æ‰¾åˆ°ç°æˆçš„ã€Œé¸¿è’™å¹³å°æ£€æµ‹å¾®ä¿¡æ˜¯å¦å®‰è£…ã€çš„è§£å†³æ–¹æ¡ˆ â€”â€” æ¯•ç«Ÿ Uni-App å¯¹é¸¿è’™çš„é€‚é…è¿˜åœ¨æŒç»­å®Œå–„ä¸­ï¼Œå¾ˆå¤šåŸç”Ÿèƒ½åŠ›çš„è·¨ç«¯å°è£…è¿˜æœªè¦†ç›–åˆ°ã€‚</p>
<p>æ— å¥ˆä¹‹ä¸‹ï¼Œåªèƒ½è‡ªå·±æ‘¸ç´¢é¸¿è’™åŸç”Ÿèƒ½åŠ›ä¸ Uni-App çš„æ¡¥æ¥æ–¹å¼ï¼Œæœ€ç»ˆå®ç°äº†ä¸€ä¸ªè½»é‡çš„æ£€æµ‹æ’ä»¶ï¼Œå®Œç¾è§£å†³äº†ä¸Šæ¶é—®é¢˜ã€‚ä»Šå¤©æŠŠè¿™ä¸ªè¿‡ç¨‹åˆ†äº«å‡ºæ¥ï¼Œå¸Œæœ›èƒ½å¸®åˆ°æœ‰åŒæ ·éœ€æ±‚çš„å¼€å‘è€…ï½</p>
<h2 data-id="heading-1">æ ¸å¿ƒæ€è·¯</h2>
<p>Uni-App è°ƒç”¨é¸¿è’™åŸç”Ÿèƒ½åŠ›ï¼Œæœ¬è´¨æ˜¯é€šè¿‡ã€ŒUni-App æ’ä»¶ + é¸¿è’™åŸç”Ÿä»£ç ã€çš„æ–¹å¼å®ç°æ¡¥æ¥ï¼š</p>
<ol>
<li>é¸¿è’™åŸç”Ÿå±‚ï¼šé€šè¿‡é¸¿è’™çš„åŒ…ç®¡ç†èƒ½åŠ›ï¼ŒæŸ¥è¯¢è®¾å¤‡æ˜¯å¦å®‰è£…äº†å¾®ä¿¡ï¼ˆå¾®ä¿¡åŒ…åï¼š<code>com.tencent.mm</code>ï¼‰</li>
<li>æ’ä»¶å±‚ï¼šå°†åŸç”ŸæŸ¥è¯¢ç»“æœå°è£…æˆ Uni-App å¯è°ƒç”¨çš„ API</li>
<li>åº”ç”¨å±‚ï¼šåœ¨è°ƒç”¨å¾®ä¿¡ç™»å½• / æ”¯ä»˜ / åˆ†äº«å‰ï¼Œå…ˆé€šè¿‡æ’ä»¶æ£€æµ‹æ˜¯å¦å®‰è£…å¾®ä¿¡ï¼Œé¿å…å´©æºƒ</li>
</ol>
<h2 data-id="heading-2">æ’ä»¶å®ç°æ­¥éª¤ï¼ˆé™„å®Œæ•´ä»£ç ï¼‰</h2>
<h3 data-id="heading-3">ä¸€ã€åˆ›å»º Uni-App æ’ä»¶ç»“æ„</h3>
<p>é¦–å…ˆé€šè¿‡ HBuilder X åœ¨ Uni-App é¡¹ç›®ä¸­å³é”® uni_modulesï¼Œæ–°å»º UTSæ’ä»¶-APIæ’ä»¶ï¼Œæ ‡å‡†ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3dfdc9729f494791b36c96c05e401976~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJUYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250048&amp;x-signature=oKngD6pvd9RDSud4CFO%2Brqqk9MM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">äºŒã€ç¼–å†™é¸¿è’™åŸç”Ÿæ£€æµ‹é€»è¾‘</h3>
<h4 data-id="heading-5">1. è·¯å¾„ uni_modules=&gt;hl-appcheckplugin=&gt;utssdk=&gt;interface.uts</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * å†…éƒ¨ç»“æœç±»å‹ï¼ˆé¿å…å¯¹è±¡å­—é¢é‡ä½œä¸ºç±»å‹ï¼‰
 */</span>
<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">CheckResult</span> {
  <span class="hljs-attr">isInstalled</span>: boolean;
  <span class="hljs-attr">errMsg</span>: string;
}

<span class="hljs-comment">/**
 * æ£€æŸ¥å¾®ä¿¡å®‰è£…çŠ¶æ€çš„å…¥å‚é…ç½®
 */</span>
<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">CheckWeChatInstalledOptions</span> {
  <span class="hljs-comment">/** æ£€æŸ¥æˆåŠŸå›è°ƒï¼ˆä»…å½“å·²å®‰è£…æ—¶è§¦å‘ï¼‰ */</span>
  success?: <span class="hljs-function">(<span class="hljs-params">result: CheckWeChatInstalledSuccess</span>) =&gt;</span> <span class="hljs-keyword">void</span>;
  <span class="hljs-comment">/** æ£€æŸ¥å¤±è´¥å›è°ƒï¼ˆæœªå®‰è£…æˆ–æ£€æŸ¥å‡ºé”™æ—¶è§¦å‘ï¼‰ */</span>
  fail?: <span class="hljs-function">(<span class="hljs-params">result: CheckWeChatInstalledFail</span>) =&gt;</span> <span class="hljs-keyword">void</span>;
  <span class="hljs-comment">/** æ£€æŸ¥å®Œæˆå›è°ƒï¼ˆæ— è®ºæˆè´¥ï¼‰ */</span>
  complete?: <span class="hljs-function">(<span class="hljs-params">result: CheckWeChatInstalledComplete</span>) =&gt;</span> <span class="hljs-keyword">void</span>;
}

<span class="hljs-comment">/**
 * æˆåŠŸå›è°ƒç»“æœç±»å‹
 */</span>
<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">CheckWeChatInstalledSuccess</span> {
  <span class="hljs-attr">isInstalled</span>: <span class="hljs-literal">true</span>;
  <span class="hljs-attr">errMsg</span>: <span class="hljs-string">"ok"</span>; <span class="hljs-comment">// ä¸¥æ ¼å­—é¢é‡ç±»å‹ï¼Œé¿å… string ä¸åŒ¹é…</span>
}

<span class="hljs-comment">/**
 * å¤±è´¥å›è°ƒç»“æœç±»å‹
 */</span>
<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">CheckWeChatInstalledFail</span> {
  <span class="hljs-attr">isInstalled</span>: <span class="hljs-literal">false</span>;
  <span class="hljs-attr">errMsg</span>: string; <span class="hljs-comment">// é”™è¯¯ä¿¡æ¯æè¿°</span>
}

<span class="hljs-comment">/**
 * å®Œæˆå›è°ƒç»“æœç±»å‹
 */</span>
<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">CheckWeChatInstalledComplete</span> {
  <span class="hljs-attr">isInstalled</span>: boolean;
  <span class="hljs-attr">errMsg</span>: string;
}
</code></pre>
<h4 data-id="heading-6">2. è·¯å¾„ uni_modules=&gt;hl-appcheckplugin=&gt;utssdk=&gt;app-harmony=&gt;index.uts</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> {
	<span class="hljs-title class_">CheckWeChatInstalledOptions</span>,
	<span class="hljs-title class_">CheckWeChatInstalledSuccess</span>,
	<span class="hljs-title class_">CheckWeChatInstalledFail</span>,
	<span class="hljs-title class_">CheckWeChatInstalledComplete</span>,
	<span class="hljs-title class_">CheckResult</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../interface.uts'</span>

<span class="hljs-comment">// é‡æ–°å¯¼å‡ºç±»å‹ï¼Œä¾›å¤–éƒ¨ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> type {
	<span class="hljs-title class_">CheckWeChatInstalledOptions</span>,
	<span class="hljs-title class_">CheckWeChatInstalledSuccess</span>,
	<span class="hljs-title class_">CheckWeChatInstalledFail</span>,
	<span class="hljs-title class_">CheckWeChatInstalledComplete</span>,
	<span class="hljs-title class_">CheckResult</span>
}

<span class="hljs-keyword">import</span> { bundleManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;
<span class="hljs-keyword">import</span> hilog <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.hilog'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;

<span class="hljs-comment">/**
 * å¸¸é‡å®šä¹‰ï¼ˆä½¿ç”¨å¤§å†™+ä¸‹åˆ’çº¿å‘½åè§„èŒƒï¼‰
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">WECHAT_BUNDLE_NAME</span> = <span class="hljs-string">'com.tencent.mm'</span>; <span class="hljs-comment">// å¾®ä¿¡å®˜æ–¹åŒ…åï¼ˆAndroid/é¸¿è’™é€šç”¨ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">LOG_TAG</span> = <span class="hljs-string">'HL_APPCHECK'</span>; <span class="hljs-comment">// æ—¥å¿—æ ‡ç­¾å¸¸é‡</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">LOG_DOMAIN</span> = <span class="hljs-number">0x0000</span>; <span class="hljs-comment">// æ—¥å¿—åŸŸå¸¸é‡</span>

<span class="hljs-comment">/**
 * æ£€æŸ¥è®¾å¤‡æ˜¯å¦å®‰è£…å¾®ä¿¡ï¼ˆä¼˜åŒ–ç‰ˆï¼‰
 * <span class="hljs-doctag">@param</span> options é…ç½®å‚æ•°ï¼ˆåŒ…å«æˆåŠŸã€å¤±è´¥ã€å®Œæˆå›è°ƒï¼‰
 * <span class="hljs-doctag">@returns</span> Promise&lt;CheckResult&gt; å¼‚æ­¥è¿”å›æ£€æŸ¥ç»“æœï¼ˆæ”¯æŒ Promise é“¾å¼è°ƒç”¨ï¼‰
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkWeChatInstalled</span>(<span class="hljs-params">
	options : CheckWeChatInstalledOptions = {} <span class="hljs-comment">// ç»™å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œé¿å… undefined æŠ¥é”™</span>
</span>) : <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">CheckResult</span>&gt; {
	<span class="hljs-comment">// åˆå§‹åŒ–é»˜è®¤ç»“æœ</span>
	<span class="hljs-keyword">let</span> result : <span class="hljs-title class_">CheckResult</span> = {
		<span class="hljs-attr">isInstalled</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">errMsg</span>: <span class="hljs-string">'æ£€æŸ¥ä¸­...'</span>
	};

	<span class="hljs-keyword">try</span> {
		<span class="hljs-comment">// æ£€æŸ¥å¾®ä¿¡æ˜¯å¦å®‰è£…</span>
		<span class="hljs-keyword">const</span> isInstalled = <span class="hljs-keyword">await</span> <span class="hljs-title function_">isAppInstalled</span>(<span class="hljs-variable constant_">WECHAT_BUNDLE_NAME</span>);

		<span class="hljs-keyword">if</span> (isInstalled) {
			<span class="hljs-comment">// å¾®ä¿¡å·²å®‰è£… - æ„é€ æˆåŠŸç»“æœ</span>
			result = {
				<span class="hljs-attr">isInstalled</span>: <span class="hljs-literal">true</span>,
				<span class="hljs-attr">errMsg</span>: <span class="hljs-string">'ok'</span>
			};
			<span class="hljs-comment">// è°ƒç”¨æˆåŠŸå›è°ƒï¼ˆç±»å‹å®‰å…¨è½¬æ¢ï¼‰</span>
			options.<span class="hljs-property">success</span>?.(result <span class="hljs-keyword">as</span> <span class="hljs-title class_">CheckWeChatInstalledSuccess</span>);
			hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">LOG_DOMAIN</span>, <span class="hljs-variable constant_">LOG_TAG</span>, <span class="hljs-string">'å¾®ä¿¡å·²å®‰è£…'</span>);
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">// å¾®ä¿¡æœªå®‰è£… - æ„é€ å¤±è´¥ç»“æœ</span>
			result = {
				<span class="hljs-attr">isInstalled</span>: <span class="hljs-literal">false</span>,
				<span class="hljs-attr">errMsg</span>: <span class="hljs-string">'å¾®ä¿¡æœªå®‰è£…'</span>
			};
			<span class="hljs-comment">// è°ƒç”¨å¤±è´¥å›è°ƒï¼ˆç±»å‹å®‰å…¨è½¬æ¢ï¼‰</span>
			options.<span class="hljs-property">fail</span>?.(result <span class="hljs-keyword">as</span> <span class="hljs-title class_">CheckWeChatInstalledFail</span>);
			hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">LOG_DOMAIN</span>, <span class="hljs-variable constant_">LOG_TAG</span>, <span class="hljs-string">'å¾®ä¿¡æœªå®‰è£…'</span>);
		}

	} <span class="hljs-keyword">catch</span> (err) {
		<span class="hljs-comment">// å¼‚å¸¸å¤„ç†</span>
		<span class="hljs-keyword">const</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span> | <span class="hljs-title class_">Error</span>;
		<span class="hljs-keyword">const</span> errorCode = <span class="hljs-string">'code'</span> <span class="hljs-keyword">in</span> error ? error.<span class="hljs-property">code</span> : <span class="hljs-string">'unknown'</span>;
		<span class="hljs-keyword">const</span> errorMsg = error.<span class="hljs-property">message</span> || <span class="hljs-string">`æ£€æŸ¥å¤±è´¥ï¼ˆé”™è¯¯ç ï¼š<span class="hljs-subst">${errorCode}</span>ï¼‰`</span>;

		<span class="hljs-comment">// æ„é€ é”™è¯¯ç»“æœ</span>
		result = {
			<span class="hljs-attr">isInstalled</span>: <span class="hljs-literal">false</span>,
			<span class="hljs-attr">errMsg</span>: errorMsg
		};

		<span class="hljs-comment">// è°ƒç”¨å¤±è´¥å›è°ƒ</span>
		options.<span class="hljs-property">fail</span>?.(result <span class="hljs-keyword">as</span> <span class="hljs-title class_">CheckWeChatInstalledFail</span>);
		<span class="hljs-comment">// é”™è¯¯æ—¥å¿—å¢å¼º</span>
		hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">LOG_DOMAIN</span>, <span class="hljs-variable constant_">LOG_TAG</span>, <span class="hljs-string">`æ£€æŸ¥å¾®ä¿¡å®‰è£…çŠ¶æ€å¤±è´¥ï¼š<span class="hljs-subst">${errorMsg}</span>ï¼Œé”™è¯¯ç ï¼š<span class="hljs-subst">${errorCode}</span>`</span>);

	} <span class="hljs-keyword">finally</span> {
		<span class="hljs-comment">// è°ƒç”¨å®Œæˆå›è°ƒ</span>
		options.<span class="hljs-property">complete</span>?.(result <span class="hljs-keyword">as</span> <span class="hljs-title class_">CheckWeChatInstalledComplete</span>);
		hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">LOG_DOMAIN</span>, <span class="hljs-variable constant_">LOG_TAG</span>, <span class="hljs-string">`æ£€æŸ¥å¾®ä¿¡å®‰è£…çŠ¶æ€å®Œæˆï¼š<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);
	}

	<span class="hljs-comment">// è¿”å› Promise ç»“æœï¼Œæ”¯æŒ async/await è°ƒç”¨</span>
	<span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">/**
 * æ£€æŸ¥æŒ‡å®šåŒ…åçš„åº”ç”¨æ˜¯å¦å·²å®‰è£…ï¼‰
 * <span class="hljs-doctag">@param</span> bundleName åº”ç”¨åŒ…å
 * <span class="hljs-doctag">@returns</span> Promise&lt;boolean&gt; æ˜¯å¦å·²å®‰è£…
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">isAppInstalled</span>(<span class="hljs-params">bundleName : string</span>) : <span class="hljs-title class_">Promise</span>&lt;boolean&gt; {
	<span class="hljs-keyword">try</span> {
		<span class="hljs-comment">// è·å–åº”ç”¨ä¿¡æ¯</span>
		<span class="hljs-keyword">await</span> bundleManager.<span class="hljs-title function_">getBundleInfo</span>(
			bundleName,
			bundleManager.<span class="hljs-property">BundleFlag</span>.<span class="hljs-property">GET_BUNDLE_INFO_DEFAULT</span>
		);
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	} <span class="hljs-keyword">catch</span> (err) {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	}
}
</code></pre>
<h3 data-id="heading-7">ä¸‰ã€Uni-App ä¸­ä½¿ç”¨æ’ä»¶</h3>
<h4 data-id="heading-8">1. è°ƒç”¨æ£€æµ‹æ–¹æ³•</h4>
<p>åœ¨éœ€è¦ä½¿ç”¨å¾®ä¿¡åŠŸèƒ½çš„é¡µé¢ï¼ˆå¦‚ç™»å½•é¡µã€æ”¯ä»˜é¡µï¼‰ï¼Œå…ˆè°ƒç”¨æ£€æµ‹æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-keyword">import</span> { checkWeChatInstalled } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/uni_modules/hl-appcheckplugin"</span>

    <span class="hljs-title function_">checkApp</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// ç»Ÿä¸€è¿”å› Promiseï¼Œç¡®ä¿æ‰€æœ‰ç«¯è¡Œä¸ºä¸€è‡´</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-comment">// #ifdef APP-PLUS</span>
        <span class="hljs-keyword">const</span> isExist = plus.<span class="hljs-property">runtime</span>.<span class="hljs-title function_">isApplicationExist</span>({
          <span class="hljs-attr">pname</span>: <span class="hljs-string">'com.tencent.mm'</span>,
          <span class="hljs-attr">action</span>: <span class="hljs-string">'weixin://'</span>
        });
        <span class="hljs-title function_">resolve</span>(isExist);
        <span class="hljs-comment">// #endif</span>

        <span class="hljs-comment">// #ifdef APP-HARMONY</span>
        <span class="hljs-title function_">checkWeChatInstalled</span>({
          <span class="hljs-attr">success</span>: <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾®ä¿¡å·²å®‰è£…'</span>);
            <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>);
          },
          <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾®ä¿¡æœªå®‰è£…æˆ–æ£€æµ‹å¤±è´¥'</span>, err);
            <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>);
          }
        });
        <span class="hljs-comment">// #endif</span>

        <span class="hljs-comment">// #ifdef MP-WEIXIN</span>
        <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>);
        <span class="hljs-comment">// #endif</span>
      });
    },
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ä¸å¤§è¯­è¨€æ¨¡å‹å¾®è°ƒï¼ˆFine-tuningï¼‰çš„å·®å¼‚ã€ä¼˜åŠ¿åŠä½¿ç”¨åœºæ™¯è¯¦è§£]]></title>    <link>https://juejin.cn/post/7578803751609253938</link>    <guid>https://juejin.cn/post/7578803751609253938</guid>    <pubDate>2025-12-02T03:25:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578803751609253938" data-draft-id="7578803751609122866" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ä¸å¤§è¯­è¨€æ¨¡å‹å¾®è°ƒï¼ˆFine-tuningï¼‰çš„å·®å¼‚ã€ä¼˜åŠ¿åŠä½¿ç”¨åœºæ™¯è¯¦è§£"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-02T03:25:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ä¸å¤§è¯­è¨€æ¨¡å‹å¾®è°ƒï¼ˆFine-tuningï¼‰çš„å·®å¼‚ã€ä¼˜åŠ¿åŠä½¿ç”¨åœºæ™¯è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:25:13.000Z" title="Tue Dec 02 2025 03:25:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»26åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>å¾®è°ƒå¤§è¯­è¨€æ¨¡å‹æ˜¯åˆ©ç”¨ç‰¹å®šä»»åŠ¡æˆ–é¢†åŸŸçš„å®šåˆ¶æ•°æ®é›†ï¼Œå¯¹é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œè°ƒæ•´ï¼›è€Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰åˆ™å°†æ£€ç´¢ç³»ç»Ÿä¸ç”Ÿæˆæ¨¡å‹ç›¸ç»“åˆï¼ŒåŠ¨æ€åœ°å°†å¤–éƒ¨çš„ã€æœ€æ–°çš„çŸ¥è¯†èå…¥ç”Ÿæˆç»“æœä¸­ã€‚</p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>éšç€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ï¼ˆGen AIï¼‰å’Œè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰æŠ€æœ¯çš„æŒç»­æ¼”è¿›ï¼Œä¸šç•Œå¯¹æ›´å¼ºå¤§ã€æ›´é«˜æ•ˆæ¨¡å‹çš„éœ€æ±‚å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚ä»èŠå¤©æœºå™¨äººã€è™šæ‹ŸåŠ©æ‰‹ï¼Œåˆ°å¤æ‚çš„å†…å®¹ç”Ÿæˆä¸æœç´¢ç³»ç»Ÿï¼ŒNLP åº”ç”¨æ­£æ—¥ç›Šæˆä¸ºç°ä»£æŠ€æœ¯ä¸å¯æˆ–ç¼ºçš„ç»„æˆéƒ¨åˆ†ã€‚ç„¶è€Œï¼Œä¼´éšç€è¿™ä¸€ä¸æ–­å¢é•¿çš„éœ€æ±‚ï¼Œä¹Ÿå¸¦æ¥äº†å¦‚ä½•æå‡è¿™äº›ç³»ç»Ÿæ€§èƒ½ä¸é€‚åº”èƒ½åŠ›çš„æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚ä¸”åŠ¨æ€å˜åŒ–çš„ç¯å¢ƒä¸­ã€‚</p>
<p>ç›®å‰ï¼Œæå‡ NLP æ¨¡å‹æ€§èƒ½çš„ä¸¤ç§ä¸»æµæ–¹æ³•æ˜¯æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generation, RAGï¼‰å’Œå¾®è°ƒï¼ˆfine-tuningï¼‰ã€‚å¾®è°ƒé•¿æœŸä»¥æ¥ä¸€ç›´æ˜¯æœºå™¨å­¦ä¹ é¢†åŸŸçš„å¸¸ç”¨æ‰‹æ®µï¼Œé€šè¿‡ä½¿ç”¨é¢å¤–æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿé€‚åº”ç‰¹å®šä»»åŠ¡ï¼›è€Œ RAG åˆ™å¼•å…¥äº†ä¸€ç§åˆ›æ–°èŒƒå¼â€”â€”å°†æ£€ç´¢ç³»ç»Ÿçš„ä¼˜åŠ¿ä¸ç”Ÿæˆæ¨¡å‹ç›¸ç»“åˆï¼Œæ„å»ºå‡ºä¸€ç§åŠ¨æ€æœºåˆ¶ï¼Œä»¥åº”å¯¹é‚£äº›éœ€è¦å¤§è§„æ¨¡ä¿¡æ¯è®¿é—®å’Œä¸Šä¸‹æ–‡æ•æ„Ÿæ€§çš„ä»»åŠ¡ã€‚</p>
<p>AI å·¥ç¨‹å¸ˆåœ¨é¡¹ç›®ä¸­å¸¸å¸¸é¢ä¸´ä¸€ä¸ªè‰°éš¾æŠ‰æ‹©ï¼šç©¶ç«Ÿåº”é€‰æ‹© RAG è¿˜æ˜¯å¾®è°ƒï¼Ÿæ¯ç§æ–¹æ³•éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿ä¸æƒè¡¡å–èˆï¼Œå› æ­¤å¿…é¡»æ·±å…¥ç†è§£å®ƒä»¬å„è‡ªçš„å¼ºé¡¹ã€å±€é™æ€§ä»¥åŠæœ€é€‚åˆçš„åº”ç”¨åœºæ™¯ã€‚æœ¬æ–‡æ—¨åœ¨å…¨é¢è§£æè¿™ä¸¤ç§æŠ€æœ¯ï¼Œå¸®åŠ©è¯»è€…æŒæ¡æ‰€éœ€çŸ¥è¯†ï¼Œä»è€Œåšå‡ºæ˜æ™ºå†³ç­–ï¼Œå¹¶åœ¨å…¶å·¥ä½œä¸­é«˜æ•ˆåœ°è¿ç”¨è¿™äº›å¼ºå¤§å·¥å…·ã€‚</p>
<h2 data-id="heading-1">è‡ªç„¶è¯­è¨€å¤„ç†æŠ€æœ¯èƒŒæ™¯</h2>
<p>è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰çš„å‘å±•å†ç¨‹ç”±ä¸€ç³»åˆ—åˆ›æ–°æ¨åŠ¨ï¼Œæ—¨åœ¨è®©æœºå™¨èƒ½å¤Ÿç²¾å‡†ä¸”ç»†è…»åœ°ç†è§£å’Œç”Ÿæˆäººç±»è¯­è¨€ã€‚æ—©æœŸçš„æ–¹æ³•ï¼Œå¦‚åŸºäºè§„åˆ™çš„ç³»ç»Ÿå’Œç»Ÿè®¡æ¨¡å‹ï¼Œä¾èµ–äººå·¥è®¾è®¡çš„ç‰¹å¾å’Œé¢†åŸŸç‰¹å®šçš„è§„åˆ™ã€‚ç„¶è€Œï¼Œè¿™äº›æ–¹æ³•åœ¨å¯æ‰©å±•æ€§å’Œæ³›åŒ–èƒ½åŠ›æ–¹é¢å¸¸å¸¸é¢ä¸´å›°éš¾ã€‚</p>
<p>æ·±åº¦å­¦ä¹ çš„å…´èµ·æˆä¸º NLP å‘å±•çš„å…³é”®è½¬æŠ˜ç‚¹ï¼Œå¼•å…¥äº†èƒ½å¤Ÿä»å¤§è§„æ¨¡æ•°æ®é›†ä¸­æ•æ‰å¤æ‚æ¨¡å¼çš„ç¥ç»ç½‘ç»œæ¶æ„ã€‚word2vec å’Œ GloVe ç­‰æ¨¡å‹ç‡å…ˆæå‡ºäº†è¯åµŒå…¥æ–¹æ³•ï¼Œå°†è¯è¯­è¡¨ç¤ºä¸ºç¨ å¯†å‘é‡ç©ºé—´ä¸­çš„ç‚¹ï¼Œä»è€Œæå‡äº†å¯¹ä¸Šä¸‹æ–‡çš„ç†è§£èƒ½åŠ›ã€‚éšåï¼ŒåŸºäº Transformer æ¶æ„çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLarge Language Models, LLMsï¼‰â€”â€”å¦‚è°·æ­Œæå‡ºçš„ BERTï¼ˆBidirectional Encoder Representations from Transformersï¼‰å’Œ OpenAI å¼€å‘çš„ GPTï¼ˆGenerative Pre-trained Transformerï¼‰â€”â€”é€šè¿‡è‡ªæ³¨æ„åŠ›æœºåˆ¶å®ç°äº†å¯¹æ–‡æœ¬ä¸Šä¸‹æ–‡çš„æ·±åº¦ç†è§£ï¼Œå½»åº•é©æ–°äº†æ•´ä¸ªé¢†åŸŸã€‚</p>
<p>å°½ç®¡å–å¾—äº†è¿™äº›è¿›å±•ï¼ŒæŒ‘æˆ˜ä¾ç„¶å­˜åœ¨ã€‚åœ¨å¤§è§„æ¨¡è¯­æ–™åº“ä¸Šè®­ç»ƒçš„æ¨¡å‹è™½ç„¶åœ¨é€šç”¨ä»»åŠ¡ä¸Šè¡¨ç°ä¼˜å¼‚ï¼Œä½†åœ¨ç‰¹å®šé¢†åŸŸåº”ç”¨æˆ–é¢å¯¹ä¸æ–­å˜åŒ–çš„æ•°æ®æ—¶å¾€å¾€ç¼ºä¹é€‚åº”æ€§ã€‚è¿™ä¸€å·®è·å‚¬ç”Ÿäº†å¾®è°ƒï¼ˆfine-tuningï¼‰ç­‰æŠ€æœ¯çš„å‘å±•ï¼šå³åˆ©ç”¨é¢å¤–çš„ä»»åŠ¡ç‰¹å®šæ•°æ®å¯¹é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œè¿›ä¸€æ­¥ä¼˜åŒ–ã€‚å¾®è°ƒè¢«è¯æ˜éå¸¸æœ‰æ•ˆï¼Œä½†é€šå¸¸éœ€è¦å¤§é‡çš„è®¡ç®—èµ„æºå’Œæ—¶é—´æŠ•å…¥ã€‚</p>
<p>è¿‘å¹´æ¥ï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generation, RAGï¼‰ä½œä¸ºä¸€ç§äº’è¡¥æ€§æ–¹æ³•åº”è¿è€Œç”Ÿã€‚RAG å°†æ£€ç´¢ç³»ç»Ÿä¸ç”Ÿæˆæ¨¡å‹ç›¸ç»“åˆï¼Œæ— éœ€è¿›è¡Œå¤§è§„æ¨¡é‡æ–°è®­ç»ƒï¼Œå³å¯è®©æ¨¡å‹åœ¨æ¨ç†è¿‡ç¨‹ä¸­åŠ¨æ€è®¿é—®å¤–éƒ¨çŸ¥è¯†åº“ã€‚è¿™ä¸€åˆ›æ–°ä¸ºé‚£äº›éœ€è¦å®æ—¶è·å–æœ€æ–°ä¿¡æ¯æˆ–é¢†åŸŸä¸“ä¸šçŸ¥è¯†çš„ä»»åŠ¡æä¾›äº†ä¼ ç»Ÿå¾®è°ƒä¹‹å¤–çš„ä¸€ç§æå…·å¸å¼•åŠ›çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<p>è§£ç åŸºç¡€ï¼šæ·±å…¥è§£æ RAG ä¸å¾®è°ƒ</p>
<h2 data-id="heading-2">æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰è¯¦è§£</h2>
<p>RAG æ˜¯ NLP é¢†åŸŸçš„ä¸€é¡¹åˆ›æ–°æ–¹æ³•ï¼Œå®ƒå°†ä¿¡æ¯æ£€ç´¢èƒ½åŠ›ä¸è¯­è¨€ç”Ÿæˆèƒ½åŠ›æœ‰æœºç»“åˆã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œä½¿å¤§è¯­è¨€æ¨¡å‹èƒ½å¤ŸåŠ¨æ€è®¿é—®å¹¶åˆ©ç”¨å¤–éƒ¨çŸ¥è¯†ï¼Œä»è€Œæ˜¾è‘—å¢å¼ºå…¶è¡¨è¾¾ä¸æ¨ç†èƒ½åŠ›ã€‚</p>
<p>RAG æ¶æ„ä¸»è¦ç”±ä¸¤ä¸ªå…³é”®ç»„ä»¶æ„æˆï¼šæ£€ç´¢å™¨ï¼ˆretrieverï¼‰å’Œç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰ã€‚æ£€ç´¢å™¨è´Ÿè´£ä»åºå¤§çš„æ–‡æ¡£é›†åˆæˆ–çŸ¥è¯†åº“ä¸­æœç´¢å¹¶æå–ä¸å½“å‰ä»»åŠ¡ç›¸å…³çš„ä¿¡æ¯ã€‚è¯¥ç»„ä»¶é€šå¸¸é‡‡ç”¨å…ˆè¿›çš„ä¿¡æ¯æ£€ç´¢æŠ€æœ¯ï¼Œä¾‹å¦‚ç¨ å¯†å‘é‡è¡¨ç¤ºï¼ˆdense vector representationsï¼‰å’Œé«˜æ•ˆçš„ç›¸ä¼¼æ€§æœç´¢ç®—æ³•ï¼Œä»¥é’ˆå¯¹ç»™å®šæŸ¥è¯¢æˆ–ä¸Šä¸‹æ–‡ç²¾å‡†å®šä½æœ€ç›¸å…³çš„çŸ¥è¯†ç‰‡æ®µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d7e41527d484208b27d0d74f5cfee04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250872&amp;x-signature=cie2rAVLd4kfxOFTYupIpiWQgX8%3D" alt="" loading="lazy"/></p>
<p>å¦ä¸€æ–¹é¢ï¼Œç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰æ˜¯ä¸€ç§è¯­è¨€æ¨¡å‹ï¼Œå®ƒç»“åˆæ£€ç´¢åˆ°çš„ä¿¡æ¯ä¸åŸå§‹è¾“å…¥ï¼Œç”Ÿæˆè¿è´¯ã€è¯­å¢ƒæ°å½“ä¸”å‡†ç¡®çš„å“åº”ã€‚è¯¥ç»„ä»¶åˆ©ç”¨é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼ˆå¦‚ GPT æˆ– BARTï¼‰çš„å¼ºå¤§èƒ½åŠ›ï¼Œåœ¨ç”Ÿæˆç±»äººæ–‡æœ¬çš„åŒæ—¶ï¼Œèå…¥æ£€ç´¢å™¨æä¾›çš„å¤–éƒ¨çŸ¥è¯†ã€‚</p>
<p>RAG é€šè¿‡å°†ç”Ÿæˆè¿‡ç¨‹ä»¥æ£€ç´¢åˆ°çš„ä¿¡æ¯ä¸ºæ¡ä»¶ï¼Œå°†å¤–éƒ¨çŸ¥è¯†æ•´åˆè¿›è¯­è¨€æ¨¡å‹ä¸­ã€‚è¿™ç§æ–¹æ³•ä½¿æ¨¡å‹èƒ½å¤Ÿè®¿é—®å…¶åˆå§‹è®­ç»ƒæ•°æ®ä¸­å¯èƒ½ä¸å­˜åœ¨çš„æœ€æ–°æˆ–ä»»åŠ¡ç‰¹å®šä¿¡æ¯ã€‚å› æ­¤ï¼Œç»è¿‡ RAG å¢å¼ºçš„æ¨¡å‹èƒ½å¤Ÿåœ¨å„ç§ä»»åŠ¡å’Œé¢†åŸŸä¸­æä¾›æ›´å‡†ç¡®ã€æ›´åŠæ—¶ã€ä¿¡æ¯æ›´ä¸°å¯Œä¸”ä¸Šä¸‹æ–‡æ›´ç›¸å…³çš„å›ç­”ã€‚</p>
<p>ä¸€ä¸ªå…¸å‹çš„ RAG ç³»ç»ŸåŒ…å«ä»¥ä¸‹å…³é”®ç»„ä»¶ï¼š</p>
<ul>
<li>
<p><strong>çŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰</strong></p>
<p>ï¼šå¯ä»¥æ˜¯ä¸€ä¸ªå¤§è§„æ¨¡æ–‡æ¡£è¯­æ–™åº“ã€åŒ…å«å¤–éƒ¨ä¿¡æ¯çš„ç»“æ„åŒ–æ•°æ®ï¼Œç”šè‡³æ•´ä¸ªäº’è”ç½‘ã€‚</p>
</li>
<li>
<p><strong>æ£€ç´¢å™¨ï¼ˆRetrieverï¼‰</strong></p>
<p>ï¼šè´Ÿè´£ä»çŸ¥è¯†åº“ä¸­æœç´¢å¹¶æå–ç›¸å…³ä¿¡æ¯çš„æ¨¡å—ã€‚</p>
</li>
<li>
<p><strong>ç¼–ç å™¨ï¼ˆEncoderï¼‰</strong></p>
<p>ï¼šå°†è¾“å…¥æŸ¥è¯¢å’Œæ–‡æ¡£è½¬æ¢ä¸ºç¨ å¯†å‘é‡è¡¨ç¤ºçš„ç»„ä»¶ã€‚</p>
</li>
<li>
<p><strong>ç›¸ä¼¼æ€§æœç´¢ï¼ˆSimilarity Searchï¼‰</strong></p>
<p>ï¼šä¸€ç§åŸºäºå‘é‡ç›¸ä¼¼åº¦è¯†åˆ«æœ€ç›¸å…³æ–‡æ¡£çš„ç®—æ³•ã€‚</p>
</li>
<li>
<p><strong>ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰</strong></p>
<p>ï¼šåˆ©ç”¨æ£€ç´¢åˆ°çš„ä¿¡æ¯å’Œè¾“å…¥ä¸Šä¸‹æ–‡ç”Ÿæˆæœ€ç»ˆè¾“å‡ºçš„è¯­è¨€æ¨¡å‹ã€‚</p>
</li>
<li>
<p><strong>èåˆæœºåˆ¶ï¼ˆFusion Mechanismï¼‰</strong></p>
<p>ï¼šä¸€ç§å°†æ£€ç´¢ä¿¡æ¯ä¸è¾“å…¥ç›¸ç»“åˆä»¥å¼•å¯¼ç”Ÿæˆè¿‡ç¨‹çš„æ–¹æ³•ã€‚</p>
</li>
</ul>
<hr/>
<p><strong>å¾®è°ƒè¯¦è§£</strong></p>
<p>å¾®è°ƒï¼ˆFine-tuningï¼‰æ˜¯ NLP ä¸­ä¸€ç§å¼ºå¤§çš„æŠ€æœ¯ï¼ŒæŒ‡å¯¹é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹è¿›è¡Œè¿›ä¸€æ­¥è®­ç»ƒï¼Œä½¿å…¶é€‚åº”ç‰¹å®šä»»åŠ¡æˆ–ä¸“é—¨é¢†åŸŸã€‚è¯¥è¿‡ç¨‹å……åˆ†åˆ©ç”¨å¤§å‹é€šç”¨æ¨¡å‹å·²æœ‰çš„çŸ¥è¯†å’Œèƒ½åŠ›ï¼Œå¹¶å¯¹å…¶è¿›è¡Œå®šåˆ¶åŒ–è°ƒæ•´ï¼Œä»è€Œåœ¨ç›®æ ‡åº”ç”¨åœºæ™¯ä¸­å®ç°æ›´ä¼˜æ€§èƒ½ã€‚</p>
<p>æœ¬è´¨ä¸Šï¼Œå¾®è°ƒå»ºç«‹åœ¨è¿ç§»å­¦ä¹ ï¼ˆtransfer learningï¼‰çš„æ¦‚å¿µä¹‹ä¸Šâ€”â€”å³æ¨¡å‹å¯å°†åœ¨ä¸€ä¸ªä»»åŠ¡ä¸­å­¦åˆ°çš„çŸ¥è¯†è¿ç§»åˆ°å¦ä¸€ä¸ªç›¸å…³ä»»åŠ¡ä¸­ã€‚åœ¨è¯­è¨€æ¨¡å‹çš„è¯­å¢ƒä¸‹ï¼Œè¿™æ„å‘³ç€æ¨¡å‹åœ¨é¢„è®­ç»ƒé˜¶æ®µè·å¾—çš„é€šç”¨è¯­è¨€ç†è§£ä¸ç”Ÿæˆèƒ½åŠ›ï¼Œå¯ä»¥è¢«è¿›ä¸€æ­¥ç»†åŒ–å’Œä¸“ä¸šåŒ–ï¼Œä»¥æ»¡è¶³å…·ä½“ç”¨ä¾‹çš„éœ€æ±‚ã€‚è¿™ç§æ–¹æ³•æ˜¾è‘—å‡å°‘äº†å¯¹ä»»åŠ¡ç‰¹å®šè®­ç»ƒæ•°æ®çš„éœ€æ±‚ï¼Œå¹¶åŠ é€Ÿäº†é¢å‘å„ç±»åº”ç”¨çš„é«˜æ€§èƒ½æ¨¡å‹çš„å¼€å‘è¿›ç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56154f3cdbd04e5e8283cfef1d85b753~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250872&amp;x-signature=vXWNJGVTSdLQNV34mUJNuVLbb6w%3D" alt="" loading="lazy"/></p>
<p>å¾®è°ƒè¿‡ç¨‹åŒ…æ‹¬å°†é¢„è®­ç»ƒæ¨¡å‹æš´éœ²äºä¸€ä¸ªç²¾å¿ƒæ„å»ºçš„ã€èƒ½å¤Ÿä»£è¡¨ç›®æ ‡ä»»åŠ¡æˆ–é¢†åŸŸçš„æ•°æ®é›†ã€‚åœ¨æ­¤é˜¶æ®µï¼Œæ¨¡å‹çš„å‚æ•°ä¼šè¢«è°ƒæ•´ï¼Œä»¥ä¼˜åŒ–å…¶åœ¨æ–°ä»»åŠ¡ä¸Šçš„è¡¨ç°ï¼ŒåŒæ—¶ä¿ç•™é¢„è®­ç»ƒé˜¶æ®µè·å¾—çš„åŸºç¡€è¯­è¨€çŸ¥è¯†ã€‚è¿™ç§ç²¾å¦™çš„å¹³è¡¡ä½¿æ¨¡å‹æ—¢èƒ½åˆ©ç”¨å…¶å¯¹è¯­è¨€çš„å¹¿æ³›ç†è§£ï¼Œåˆèƒ½å‘å±•å‡ºé’ˆå¯¹ç‰¹å®šåº”ç”¨åœºæ™¯çš„ä¸“ä¸šèƒ½åŠ›ã€‚</p>
<p>å¾®è°ƒæ¨¡å‹çš„ä¸»è¦æ­¥éª¤åŒ…æ‹¬ï¼š</p>
<ul>
<li>é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„é¢„è®­ç»ƒæ¨¡å‹ä½œä¸ºèµ·ç‚¹</li>
<li>å‡†å¤‡é«˜è´¨é‡ã€é¢å‘å…·ä½“ä»»åŠ¡çš„å¾®è°ƒæ•°æ®é›†</li>
<li>å®šä¹‰ä»»åŠ¡ç‰¹å®šçš„æ¨¡å‹æ¶æ„ï¼ˆä¾‹å¦‚ï¼Œæ·»åŠ åˆ†ç±»å±‚ï¼‰</li>
<li>é…ç½®å¾®è°ƒè¿‡ç¨‹ä¸­çš„è¶…å‚æ•°</li>
<li>åœ¨æ–°æ•°æ®é›†ä¸Šè®­ç»ƒæ¨¡å‹ï¼Œå¹¶æ›´æ–°æ¨¡å‹å‚æ•°</li>
<li>åœ¨ç‹¬ç«‹çš„æµ‹è¯•é›†ä¸Šè¯„ä¼°å¾®è°ƒåæ¨¡å‹çš„æ€§èƒ½</li>
<li>æ ¹æ®éœ€è¦è¿­ä»£ä¼˜åŒ–æ•´ä¸ªæµç¨‹ï¼Œç›´è‡³è¾¾åˆ°é¢„æœŸæ•ˆæœ</li>
</ul>
<p>å¾®è°ƒä½¿å¼€å‘è€…èƒ½å¤Ÿåœ¨æ— éœ€å¤§é‡è®¡ç®—èµ„æºæˆ–æµ·é‡æ•°æ®çš„å‰æä¸‹ï¼Œä¸ºå„ç§åº”ç”¨åœºæ™¯ï¼ˆå¦‚æƒ…æ„Ÿåˆ†æã€å‘½åå®ä½“è¯†åˆ«å’Œé—®ç­”ç³»ç»Ÿç­‰ï¼‰æ„å»ºä¸“ç”¨æ¨¡å‹ã€‚è¿™ä¸€æ–¹æ³•å¤§å¤§é™ä½äº†ä½¿ç”¨å‰æ²¿è¯­è¨€æ¨¡å‹çš„é—¨æ§›ï¼ŒåŠ é€Ÿäº†äººå·¥æ™ºèƒ½è§£å†³æ–¹æ¡ˆåœ¨å„è¡Œå„ä¸šçš„è½åœ°ä¸æ™®åŠã€‚</p>
<hr/>
<p><strong>RAG ä¸å¾®è°ƒæ­£é¢äº¤é”‹ï¼šæ€§èƒ½æŒ‡æ ‡å¯¹æ¯”</strong></p>
<p><strong>å‡†ç¡®æ€§ä¸ç²¾ç¡®åº¦</strong></p>
<p>åœ¨è¯„ä¼° RAG ä¸å¾®è°ƒæ–¹æ³•çš„æ€§èƒ½æ—¶ï¼Œå‡†ç¡®æ€§å’Œç²¾ç¡®åº¦æ˜¯å…³é”®æŒ‡æ ‡ï¼Œå…¶è¡¨ç°ä¼šå› å…·ä½“ä»»åŠ¡è€Œå¼‚ã€‚RAG åœ¨éœ€è¦æœ€æ–°æˆ–ä¸“ä¸šçŸ¥è¯†çš„åœºæ™¯ä¸­è¡¨ç°å“è¶Šï¼Œè€Œå¾®è°ƒåˆ™åœ¨ä»»åŠ¡æ¨¡å¼æ¸…æ™°ã€æ•°æ®åˆ†å¸ƒç¨³å®šçš„æƒ…å†µä¸‹æ›´å…·ä¼˜åŠ¿ã€‚</p>
<p>å½±å“ä¸¤ç§æ–¹æ³•å‡†ç¡®æ€§çš„å› ç´ å„ä¸ç›¸åŒã€‚å¯¹äº RAG è€Œè¨€ï¼Œå¤–éƒ¨çŸ¥è¯†åº“çš„è´¨é‡ä¸ç›¸å…³æ€§è‡³å…³é‡è¦ï¼›æ£€ç´¢æœºåˆ¶çš„æœ‰æ•ˆæ€§ï¼Œä»¥åŠå°†æ£€ç´¢ä¿¡æ¯ä¸ç”Ÿæˆè¿‡ç¨‹èåˆçš„èƒ½åŠ›ï¼Œä¹Ÿæ˜¾è‘—å½±å“æœ€ç»ˆå‡†ç¡®æ€§ã€‚æ­¤å¤–ï¼ŒçŸ¥è¯†åº“çš„å¤šæ ·æ€§ä¸è¦†ç›–å¹¿åº¦å†³å®šäº† RAG åœ¨ä¸åŒé¢†åŸŸä¸­çš„è¡¨ç°ã€‚</p>
<p>å¯¹äºå¾®è°ƒè€Œè¨€ï¼Œä»»åŠ¡ç‰¹å®šè®­ç»ƒæ•°æ®çš„è´¨é‡ä¸æ•°é‡æä¸ºå…³é”®ã€‚é¢„è®­ç»ƒé¢†åŸŸä¸ç›®æ ‡ä»»åŠ¡é¢†åŸŸä¹‹é—´çš„ç›¸ä¼¼åº¦ä¹Ÿä¼šå½±å“å‡†ç¡®æ€§ã€‚æ­¤å¤–ï¼Œå­¦ä¹ ç‡ã€è®­ç»ƒè½®æ•°ç­‰è¶…å‚æ•°çš„é€‰æ‹©ï¼Œä¹Ÿä¼šæ˜¾è‘—å½±å“å¾®è°ƒåæ¨¡å‹çš„æ€§èƒ½ã€‚</p>
<p>åœ¨éœ€è¦è®¿é—®å¤§é‡ä¸”æœ€æ–°ä¿¡æ¯çš„åœºæ™¯ä¸­ï¼ŒRAG é€šå¸¸ä¼˜äºå¾®è°ƒã€‚ä¾‹å¦‚ï¼Œåœ¨å¼€æ”¾åŸŸé—®ç­”ä»»åŠ¡ä¸­ï¼ŒRAG å¯å€ŸåŠ©å…¶åºå¤§çš„çŸ¥è¯†åº“æä¾›æ›´å‡†ç¡®çš„ç­”æ¡ˆï¼Œå°¤å…¶å¯¹äºæ¶‰åŠè¿‘æœŸäº‹ä»¶æˆ–åŸå§‹è®­ç»ƒæ•°æ®æœªæ¶µç›–çš„ä¸“ä¸šä¸»é¢˜çš„é—®é¢˜ã€‚</p>
<p>ç›¸åï¼Œåœ¨ä»»åŠ¡ç»“æ„æ¸…æ™°ã€æ•°æ®åˆ†å¸ƒç¨³å®šçš„åœºæ™¯ä¸‹ï¼ˆå¦‚å‘½åå®ä½“è¯†åˆ«æˆ–æƒ…æ„Ÿåˆ†æï¼‰ï¼Œå¾®è°ƒæ¨¡å‹å¾€å¾€è¡¨ç°æ›´ä½³ã€‚è¿™ç±»ä»»åŠ¡åœ¨ä¸åŒæ–‡æœ¬ä¸­ä¿æŒç›¸å¯¹ä¸€è‡´çš„æ¨¡å¼ï¼Œå¾®è°ƒæ¨¡å‹å¯é€šè¿‡ä¸“é—¨å­¦ä¹ ä»»åŠ¡ç‰¹æœ‰çš„æ¨¡å¼å’Œç»†å¾®å·®åˆ«ï¼Œå®ç°æ›´é«˜çš„å‡†ç¡®ç‡ã€‚</p>
<p>äº‹å®æ ¸æŸ¥æ˜¯ RAG å±•ç°æ›´é«˜å‡†ç¡®æ€§çš„å¦ä¸€é¢†åŸŸã€‚é€šè¿‡ä»çŸ¥è¯†åº“ä¸­çš„å¤šä¸ªæ¥æºæ£€ç´¢å¹¶äº¤å‰éªŒè¯ä¿¡æ¯ï¼ŒRAG èƒ½æä¾›æ¯”å¾®è°ƒæ¨¡å‹æ›´å¯é çš„äº‹å®éªŒè¯â€”â€”åè€…ä»…å—é™äºè®­ç»ƒæœŸé—´ç¼–ç åˆ°æ¨¡å‹å‚æ•°ä¸­çš„ä¿¡æ¯ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨éœ€è¦æ·±å…¥ç†è§£ç‰¹å®šé¢†åŸŸæœ¯è¯­æˆ–é«˜åº¦ä¸“ä¸šåŒ–è¯­è¨€æ¨¡å¼çš„ä»»åŠ¡ä¸­ï¼Œå¾®è°ƒå¯èƒ½èƒœè¿‡ RAGã€‚ä¾‹å¦‚ï¼Œåœ¨æ³•å¾‹æ–‡ä¹¦åˆ†ææˆ–åŒ»ç–—æŠ¥å‘Šç”Ÿæˆç­‰åœºæ™¯ä¸­ï¼Œè‹¥å¤–éƒ¨çŸ¥è¯†åº“æœªèƒ½å…¨é¢è¦†ç›–è¯¥ä¸“ä¸šé¢†åŸŸï¼Œé‚£ä¹ˆåŸºäºé¢†åŸŸæ•°æ®å¾®è°ƒçš„æ¨¡å‹å¾€å¾€ä¼šæ¯” RAG ç³»ç»Ÿå–å¾—æ›´é«˜çš„å‡†ç¡®æ€§ã€‚</p>
<p>é€‚åº”æ€§ä¸æ³›åŒ–èƒ½åŠ›</p>
<p>é€‚åº”æ€§ä¸æ³›åŒ–èƒ½åŠ›æ˜¯äººå·¥æ™ºèƒ½æ¨¡å‹çš„å…³é”®ç‰¹æ€§ï¼Œå†³å®šäº†æ¨¡å‹åœ¨é¢å¯¹æ–°æ•°æ®å’Œæ–°ä»»åŠ¡æ—¶çš„è¡¨ç°èƒ½åŠ›ã€‚æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ¨¡å‹ä¸å¾®è°ƒæ¨¡å‹åœ¨è¿™ä¸¤ä¸ªæ–¹é¢å±•ç°å‡ºä¸åŒçš„ç‰¹ç‚¹ï¼Œå„è‡ªå…·æœ‰ç‹¬ç‰¹çš„ä¼˜åŠ¿ä¸å±€é™ã€‚</p>
<p>RAG æ¨¡å‹åœ¨é€‚åº”æ–°ä¿¡æ¯å’Œæ–°åœºæ™¯æ–¹é¢è¡¨ç°æ›´ä¼˜ã€‚é€šè¿‡åˆ©ç”¨å¤–éƒ¨çŸ¥è¯†åº“ï¼ŒRAG æ— éœ€é‡æ–°è®­ç»ƒå³å¯æ•´åˆæœ€æ–°ä¿¡æ¯ï¼Œä½¿å…¶åœ¨ä¿¡æ¯å¿«é€Ÿå˜åŒ–çš„åŠ¨æ€ç¯å¢ƒä¸­å§‹ç»ˆä¿æŒæ—¶æ•ˆæ€§å’Œç›¸å…³æ€§ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œå¾®è°ƒæ¨¡å‹è™½ç„¶åœ¨ç‰¹å®šä»»åŠ¡ä¸Šé«˜åº¦ä¸“ä¸šåŒ–ï¼Œä½†åœ¨é€‚åº”æ€§æ–¹é¢å¾€å¾€å­˜åœ¨å›°éš¾ã€‚å®ƒä»¬å®¹æ˜“å‡ºç°â€œç¾éš¾æ€§é—å¿˜â€ç°è±¡â€”â€”å³æ¨¡å‹åœ¨é€‚åº”æ–°ä»»åŠ¡æˆ–æ–°æ•°æ®æ—¶ï¼Œä¼šä¸¢å¤±å…ˆå‰å­¦åˆ°çš„çŸ¥è¯†ã€‚è¿™æ˜¯å› ä¸ºå¾®è°ƒè¿‡ç¨‹ä¼šè°ƒæ•´æ¨¡å‹å‚æ•°ä»¥ä¼˜åŒ–æ–°ä»»åŠ¡çš„æ€§èƒ½ï¼Œå¯èƒ½ä¼šè¦†ç›–æ‰å¯¹å…ˆå‰ä»»åŠ¡æœ‰ç”¨çš„çŸ¥è¯†ã€‚</p>
<p>RAG é€šè¿‡ç»´æŠ¤ä¸€ä¸ªç‹¬ç«‹ä¸”å¯æ›´æ–°çš„çŸ¥è¯†åº“æ¥é¿å…ç¾éš¾æ€§é—å¿˜é—®é¢˜ã€‚å®ƒä¸ä¿®æ”¹æ¨¡å‹å†…éƒ¨å‚æ•°ï¼Œè€Œæ˜¯ä»å¤–éƒ¨æ¥æºæ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œä»è€Œåœ¨é€‚åº”æ–°æ•°æ®çš„åŒæ—¶ï¼Œä¸ä¼šæŸå®³å…¶åœ¨å·²å­¦ä»»åŠ¡ä¸Šçš„è¡¨ç°ã€‚</p>
<p>æ³›åŒ–èƒ½åŠ›åœ¨ä»¥ä¸‹ä»»åŠ¡ä¸­å°¤ä¸ºé‡è¦ï¼š</p>
<ul>
<li>
<p><strong>å¼€æ”¾åŸŸé—®ç­”</strong></p>
<p>ï¼šRAG èƒ½å¤Ÿè®¿é—®å¹¿æ³›çš„çŸ¥è¯†åº“ï¼Œå³ä½¿é¢å¯¹è®­ç»ƒä¸­æœªè§è¿‡çš„ä¸»é¢˜ï¼Œä¹Ÿèƒ½å›ç­”å¤šæ ·åŒ–çš„é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>é›¶æ ·æœ¬å­¦ä¹ </strong></p>
<p>ï¼šRAG å¯å€ŸåŠ©çŸ¥è¯†åº“ä¸­çš„ç›¸å…³ä¿¡æ¯ï¼Œåœ¨æœªç»æ˜¾å¼è®­ç»ƒçš„ä»»åŠ¡ä¸Šå–å¾—åˆç†è¡¨ç°ã€‚</p>
</li>
<li>
<p><strong>è·¨è¯­è¨€ä»»åŠ¡</strong></p>
<p>ï¼šå¾®è°ƒæ¨¡å‹åœ¨é‡åˆ°è®­ç»ƒæ•°æ®ä¸­æœªåŒ…å«çš„è¯­è¨€æˆ–æ–¹è¨€æ—¶å¯èƒ½è¡¨ç°ä¸ä½³ï¼Œè€Œ RAG åˆ™æœ‰å¯èƒ½æ£€ç´¢å¹¶åˆ©ç”¨å¤šè¯­è¨€ä¿¡æ¯ã€‚</p>
</li>
<li>
<p><strong>æ—¶åºæ¨ç†</strong></p>
<p>ï¼šRAG èƒ½æ•´åˆæœ€æ–°ä¿¡æ¯ï¼Œå› æ­¤æ›´é€‚åˆå¤„ç†æ¶‰åŠå½“å‰äº‹ä»¶æˆ–ä¸æ–­æ¼”è¿›çŸ¥è¯†çš„ä»»åŠ¡ã€‚</p>
</li>
</ul>
<p>RAG ä¸å¾®è°ƒåœ¨é€‚åº”æ€§æ–¹é¢çš„å…³é”®å·®å¼‚åŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p><strong>çŸ¥è¯†æ•´åˆæ–¹å¼</strong></p>
<p>ï¼šRAG åŠ¨æ€æ•´åˆæ–°ä¿¡æ¯ï¼Œè€Œå¾®è°ƒæ¨¡å‹éœ€é‡æ–°è®­ç»ƒã€‚</p>
</li>
<li>
<p><strong>ç¾éš¾æ€§é—å¿˜</strong></p>
<p>ï¼šRAG åŸºæœ¬é¿å…äº†è¯¥é—®é¢˜ï¼Œå¾®è°ƒæ¨¡å‹åˆ™å®¹æ˜“å—å…¶å½±å“ã€‚</p>
</li>
<li>
<p><strong>ä»»åŠ¡çµæ´»æ€§</strong></p>
<p>ï¼šRAG æ— éœ€é‡æ–°è®­ç»ƒå³å¯é€‚åº”æ›´å¹¿æ³›çš„ä»»åŠ¡ï¼Œè€Œå¾®è°ƒæ¨¡å‹æ›´å…·ä»»åŠ¡ä¸“ä¸€æ€§ã€‚</p>
</li>
<li>
<p><strong>æŒç»­å­¦ä¹ èƒ½åŠ›</strong></p>
<p>ï¼šRAG é€šè¿‡æ›´æ–°çŸ¥è¯†åº“æ”¯æŒæŒç»­å­¦ä¹ ï¼›å¾®è°ƒæ¨¡å‹è®­ç»ƒå®ŒæˆåçŸ¥è¯†é€šå¸¸æ˜¯å›ºå®šçš„ã€‚</p>
</li>
<li>
<p><strong>å¯¹æœªè§æ•°æ®çš„æ³›åŒ–èƒ½åŠ›</strong></p>
<p>ï¼šå¾—ç›Šäºå¹¿æ³›çš„ä¸€èˆ¬çŸ¥è¯†è®¿é—®ï¼ŒRAG åœ¨å…¨æ–°åœºæ™¯ä¸­é€šå¸¸è¡¨ç°æ›´ä½³ã€‚</p>
</li>
</ul>
<p>èµ„æºéœ€æ±‚ä¸è®¡ç®—å¼€é”€</p>
<p>RAG ä¸å¾®è°ƒæ¨¡å‹çš„è®¡ç®—éœ€æ±‚å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼Œè¿™ç›´æ¥å½±å“å®ƒä»¬åœ¨å®é™…åº”ç”¨ä¸­çš„éƒ¨ç½²ä¸å¯æ‰©å±•æ€§ã€‚ç”±äº RAG éœ€è¦åœ¨æ¨ç†æ—¶å®æ—¶ç»´æŠ¤å¹¶æŸ¥è¯¢å¤§å‹å¤–éƒ¨çŸ¥è¯†åº“ï¼Œé€šå¸¸éœ€è¦æ›´å¤šçš„è®¡ç®—èµ„æºã€‚</p>
<p>åœ¨ GPU/TPU ä½¿ç”¨æ–¹é¢ï¼Œå¾®è°ƒåœ¨è®­ç»ƒé˜¶æ®µé€šå¸¸éœ€è¦å¤§é‡è®¡ç®—èµ„æºï¼Œä½†æ¨ç†é˜¶æ®µæ•ˆç‡æ›´é«˜ã€‚RAG æ¨¡å‹åœ¨åˆå§‹è®¾ç½®é˜¶æ®µè®¡ç®—è´Ÿæ‹…è¾ƒè½»ï¼Œä½†åœ¨æ¨ç†è¿‡ç¨‹ä¸­éœ€è¦æŒç»­çš„ GPU/TPU ç®—åŠ›ï¼Œä»¥æ”¯æŒå®æ—¶ä¿¡æ¯æ£€ç´¢ä¸æ•´åˆã€‚</p>
<p>å†…å­˜éœ€æ±‚ä¹Ÿå¤§ä¸ç›¸åŒã€‚å¾®è°ƒæ¨¡å‹å°†æ‰€æœ‰ä¿¡æ¯å­˜å‚¨äºæ¨¡å‹å‚æ•°ä¸­ï¼Œå¯¼è‡´æ¨¡å‹ä½“ç§¯è¾ƒå¤§ï¼Œä½†æ¨ç†é€Ÿåº¦å¯èƒ½æ›´å¿«ã€‚RAG æ¨¡å‹çš„æ ¸å¿ƒéƒ¨åˆ†è¾ƒå°ï¼Œä½†éœ€è¦é¢å¤–å†…å­˜æ¥å­˜å‚¨å’Œè®¿é—®å¤–éƒ¨çŸ¥è¯†åº“ã€‚</p>
<p>ä¸¤ç§æ–¹æ³•åœ¨å¯æ‰©å±•æ€§æ–¹é¢å„æœ‰æŒ‘æˆ˜ã€‚å¾®è°ƒæ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ä¸Šæ‰©å±•æ€§è‰¯å¥½ï¼Œä½†è‹¥éœ€è¦†ç›–ä¸åŒé¢†åŸŸï¼Œå¾€å¾€éœ€è¦é‡æ–°è®­ç»ƒæˆ–ä½¿ç”¨å¤šä¸ªç‹¬ç«‹æ¨¡å‹ã€‚RAG ç³»ç»Ÿå› å…¶æ¨¡å—åŒ–ç»“æ„ï¼Œåœ¨å¤šæ ·åŒ–ä»»åŠ¡ä¸­å…·å¤‡æ›´å¥½çš„å¯æ‰©å±•æ€§â€”â€”åªéœ€æ›´æ–°çŸ¥è¯†åº“ï¼Œæ— éœ€æ”¹åŠ¨æ ¸å¿ƒæ¨¡å‹ã€‚</p>





























<table><thead><tr><th>æ¨¡å‹è§„æ¨¡</th><th>ä»»åŠ¡</th><th>RAG è®¡ç®—å¼€é”€</th><th>å¾®è°ƒè®¡ç®—å¼€é”€</th></tr></thead><tbody><tr><td>å°</td><td>é—®ç­”</td><td>ä¸­</td><td>ä½</td></tr><tr><td>ä¸­</td><td>å‘½åå®ä½“è¯†åˆ«</td><td>é«˜</td><td>ä¸­</td></tr><tr><td>å¤§</td><td>æ‘˜è¦ç”Ÿæˆ</td><td>æé«˜</td><td>é«˜</td></tr></tbody></table>
<p><strong>ä¼˜åŒ– RAG ç³»ç»Ÿèµ„æºä½¿ç”¨çš„å»ºè®®ï¼š</strong></p>
<ul>
<li>å®ç°é«˜æ•ˆçš„ç´¢å¼•ä¸æ£€ç´¢ç®—æ³•ã€‚</li>
<li>å¯¹é«˜é¢‘è®¿é—®ä¿¡æ¯ä½¿ç”¨ç¼“å­˜æœºåˆ¶ã€‚</li>
<li>å¯¹å¤§è§„æ¨¡çŸ¥è¯†åº“é‡‡ç”¨åˆ†å¸ƒå¼è®¡ç®—ã€‚</li>
</ul>
<p><strong>ä¼˜åŒ–å¾®è°ƒçš„å»ºè®®ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨å‚æ•°é«˜æ•ˆå¾®è°ƒæŠ€æœ¯ï¼ˆå¦‚é€‚é…å™¨å±‚ï¼‰ã€‚</li>
<li>åº”ç”¨é‡åŒ–ä¸å‰ªæä»¥å‡å°æ¨¡å‹ä½“ç§¯ã€‚</li>
<li>åˆ©ç”¨è¿ç§»å­¦ä¹ å‡å°‘æ–°ä»»åŠ¡çš„è®­ç»ƒæ—¶é—´ã€‚</li>
</ul>
<p>ä¸¤ç§æ–¹æ³•å‡å¯å—ç›Šäºç¡¬ä»¶åŠ é€Ÿå’Œä¼˜åŒ–çš„æ¨ç†å¼•æ“ã€‚é€‰æ‹© RAG è¿˜æ˜¯å¾®è°ƒï¼Œé€šå¸¸éœ€åœ¨è®¡ç®—å¼€é”€ã€ä»»åŠ¡çµæ´»æ€§å’Œæ€§èƒ½éœ€æ±‚ä¹‹é—´è¿›è¡Œæƒè¡¡ï¼Œå…·ä½“å–å†³äºåº”ç”¨åœºæ™¯ã€‚</p>
<p>æ¨ç†é€Ÿåº¦ä¸å»¶è¿Ÿ</p>
<p>RAG æ¨¡å‹è™½çµæ´»ä¸”èƒ½è®¿é—®åŠ¨æ€å®æ—¶ä¿¡æ¯ï¼Œä½†æœ¬è´¨ä¸Šæ¨ç†é€Ÿåº¦è¾ƒæ…¢ã€‚å…¶é«˜å»¶è¿Ÿä¸»è¦æºäºæ£€ç´¢è¿‡ç¨‹ï¼šåœ¨ç”Ÿæˆå“åº”å‰ï¼ŒRAG å¿…é¡»æœç´¢çŸ¥è¯†åº“ã€æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œå¹¶å°†å…¶ä¸ç”¨æˆ·æŸ¥è¯¢æ•´åˆã€‚å°½ç®¡è¿™ä¸€é¢å¤–æ­¥éª¤å¢å¼ºäº†æ¨¡å‹è·å–æœ€æ–°ä¿¡æ¯çš„èƒ½åŠ›ï¼Œä½†ä¹Ÿå¸¦æ¥äº†æ˜¾è‘—çš„æ—¶é—´å¼€é”€ã€‚</p>
<p>åœ¨æ¨ç†é˜¶æ®µçš„è®¡ç®—éœ€æ±‚æ–¹é¢ï¼Œä¸¤è€…ä¹Ÿæœ‰æ˜æ˜¾åŒºåˆ«ã€‚å¾®è°ƒæ¨¡å‹å·²å°†ä»»åŠ¡ç‰¹å®šçŸ¥è¯†å†…åŒ–åˆ°å‚æ•°ä¸­ï¼Œæ¨ç†æ—¶é€šå¸¸è®¡ç®—è´Ÿæ‹…è¾ƒè½»ï¼Œä»…ä¾èµ–è¾“å…¥å’Œé¢„è®­ç»ƒ/å¾®è°ƒåçš„æƒé‡ã€‚è€Œ RAG æ¨¡å‹éœ€ç»´æŠ¤å¹¶æŸ¥è¯¢å¤§å‹å¤–éƒ¨çŸ¥è¯†åº“ï¼Œè®¡ç®—å¯†é›†åº¦é«˜ï¼Œå¯èƒ½éœ€è¦é¢å¤–ç¡¬ä»¶èµ„æºã€‚</p>
<p>éƒ¨ç½²æ—¶é€‰æ‹© RAG è¿˜æ˜¯å¾®è°ƒï¼Œå–å†³äºåº”ç”¨çš„å…·ä½“éœ€æ±‚ã€‚å¯¹äºå®æ—¶èŠå¤©æœºå™¨äººæˆ–è‡ªåŠ¨äº¤æ˜“ç³»ç»Ÿç­‰å¯¹å»¶è¿Ÿæ•æ„Ÿçš„ä»»åŠ¡ï¼Œå¾®è°ƒæ¨¡å‹çš„ä½å»¶è¿Ÿæ›´å…·ä¼˜åŠ¿ã€‚è€Œå¯¹äºæ–°é—»æ‘˜è¦æˆ–åŠ¨æ€äº‹å®æ ¸æŸ¥ç­‰å¯¹ä¿¡æ¯æ—¶æ•ˆæ€§è¦æ±‚é«˜çš„åº”ç”¨ï¼ŒRAG çš„é¢å¤–å»¶è¿Ÿå¯èƒ½æ˜¯å¯æ¥å—çš„ï¼Œå› å…¶èƒ½è·å–å¹¶æ•´åˆæœ€æ–°ä¿¡æ¯ã€‚</p>
<p>å®æ–½ç­–ç•¥ï¼šè®© RAG ä¸å¾®è°ƒè½åœ°</p>
<p><strong>RAG å®æ–½è“å›¾</strong></p>
<p>æ„å»º RAG ç³»ç»ŸåŒ…å«è‹¥å¹²å…³é”®æ­¥éª¤ï¼Œæ¯ä¸€æ­¥éƒ½å¯¹æ¨¡å‹çš„æœ‰æ•ˆæ€§å’Œæ•ˆç‡è‡³å…³é‡è¦ã€‚é¦–å…ˆè¿›è¡Œæ•°æ®å‡†å¤‡ï¼Œæ”¶é›†å¹¶é¢„å¤„ç†é«˜è´¨é‡ã€å¤šæ ·åŒ–çš„è¯­æ–™åº“ï¼Œä½œä¸º RAG ç³»ç»Ÿè¿è¡Œæ—¶æŸ¥è¯¢çš„çŸ¥è¯†åŸºç¡€ã€‚</p>
<p>å…¶æ¬¡ï¼Œè®­ç»ƒæ£€ç´¢å™¨ç»„ä»¶ã€‚RAG ä¸­çš„æ£€ç´¢å™¨é€šå¸¸ä½¿ç”¨åµŒå…¥æ¨¡å‹ï¼ˆå¦‚ BERT æˆ– DPRï¼Œå³ Dense Passage Retrieverï¼‰å°†æŸ¥è¯¢å’Œæ–‡æ¡£ç¼–ç ä¸ºç¨ å¯†å‘é‡è¡¨ç¤ºï¼Œä»¥ä¾¿è¿›è¡Œç›¸ä¼¼æ€§æœç´¢ã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯æ£€ç´¢å™¨ä¸ç”Ÿæˆå™¨çš„é›†æˆï¼Œè¿™æ˜¯å…³é”®ç¯èŠ‚ã€‚éœ€è®¾è®¡ä¸€æ¡é«˜æ•ˆæµæ°´çº¿ï¼Œèƒ½æ ¹æ®è¾“å…¥æŸ¥è¯¢å¿«é€Ÿæ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œå¹¶æ— ç¼èå…¥ç”Ÿæˆè¿‡ç¨‹ã€‚ç”Ÿæˆå™¨é€šå¸¸æ˜¯ä¸€ä¸ªé¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼ˆå¦‚ GPTï¼‰ï¼Œéœ€è¿›ä¸€æ­¥å¾®è°ƒä»¥æœ‰æ•ˆåˆ©ç”¨æ£€ç´¢åˆ°çš„ä¿¡æ¯ã€‚</p>
<p><strong>å¸¸ç”¨ RAG æ¡†æ¶ä¸å·¥å…·åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li>
<p><strong>Haystack</strong></p>
<p>ï¼šç«¯åˆ°ç«¯ RAG æ¡†æ¶ï¼Œæä¾›æ–‡æ¡£å­˜å‚¨ã€æ£€ç´¢å™¨å’Œé˜…è¯»å™¨ç»„ä»¶ã€‚</p>
</li>
<li>
<p><strong>LangChain</strong></p>
<p>ï¼šç®€åŒ–å¤§è¯­è¨€æ¨¡å‹ä¸å¤–éƒ¨æ•°æ®æºåŠå…¶ä»–è®¡ç®—æ¨¡å—ç»“åˆçš„åº“ã€‚</p>
</li>
<li>
<p><strong>Hugging Face Transformers</strong></p>
<p>ï¼šæä¾›ç”¨äºæ£€ç´¢å’Œç”Ÿæˆä»»åŠ¡çš„é¢„è®­ç»ƒæ¨¡å‹ä¸å·¥å…·ã€‚</p>
</li>
</ul>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„ RAG ç³»ç»Ÿä¼ªä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">
def rag_system(query, knowledge_base):
Â  Â  <span class="hljs-comment"># æ£€ç´¢ç›¸å…³æ–‡æ¡£</span>
Â  Â  <span class="hljs-attr">relevant_docs</span> = retriever.get_relevant_documents(query, knowledge_base)
Â  Â  <span class="hljs-comment"># æ‹¼æ¥æ£€ç´¢åˆ°çš„æ–‡æ¡£ä½œä¸ºä¸Šä¸‹æ–‡</span>
Â  Â  <span class="hljs-attr">context</span> = <span class="hljs-string">" "</span>.join(relevant_docs)
Â  Â  <span class="hljs-comment"># ç»“åˆæŸ¥è¯¢ä¸ä¸Šä¸‹æ–‡ç”Ÿæˆå“åº”</span>
Â  Â  <span class="hljs-attr">response</span> = generator.generate(query + context)
Â  Â  return response

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-attr">query</span> = <span class="hljs-string">"æ³•å›½çš„é¦–éƒ½æ˜¯å“ªé‡Œï¼Ÿ"</span>
<span class="hljs-attr">response</span> = rag_system(query, knowledge_base)
print(response)

</code></pre>
<p><strong>RAG å®æ–½æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>ç¡®ä¿çŸ¥è¯†åº“å†…å®¹å¤šæ ·ä¸”é«˜è´¨é‡ï¼Œè¦†ç›–å¹¿æ³›ä¸»é¢˜ã€‚</li>
<li>å®šæœŸæ›´æ–°çŸ¥è¯†åº“ä»¥ä¿æŒå‡†ç¡®æ€§å’Œæ—¶æ•ˆæ€§ã€‚</li>
<li>å®ç°é«˜æ•ˆçš„ç´¢å¼•ä¸æ£€ç´¢æœºåˆ¶ï¼Œé™ä½å»¶è¿Ÿã€‚</li>
<li>åœ¨ä»»åŠ¡ç‰¹å®šæ•°æ®ä¸Šå¾®è°ƒç”Ÿæˆå™¨ï¼Œæå‡è¾“å‡ºè¿è´¯æ€§ä¸ç›¸å…³æ€§ã€‚</li>
<li>å»ºç«‹ç¨³å¥çš„è¯„ä¼°æµç¨‹ï¼Œè¡¡é‡æ£€ç´¢ä¿¡æ¯ä¸ç”Ÿæˆå“åº”çš„è´¨é‡ã€‚</li>
<li>è€ƒè™‘åœ¨åˆæ­¥æ£€ç´¢ååŠ å…¥é‡æ’åºæ­¥éª¤ï¼Œæå‡ç›¸å…³æ€§ã€‚</li>
<li>å°è¯•ä¸åŒæ£€ç´¢ä¸ç”Ÿæˆæ¨¡å‹ç»„åˆï¼Œæ‰¾åˆ°æœ€é€‚åˆå…·ä½“ç”¨ä¾‹çš„é…ç½®ã€‚</li>
</ul>
<p><strong>å¾®è°ƒå®æ–½è“å›¾</strong></p>
<p>å¯¹é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹è¿›è¡Œå¾®è°ƒéœ€é‡‡ç”¨ç³»ç»ŸåŒ–æ–¹æ³•ï¼Œç¡®ä¿æ¨¡å‹æœ‰æ•ˆé€‚åº”ç›®æ ‡ä»»åŠ¡æˆ–é¢†åŸŸã€‚é¦–å…ˆè¿›è¡Œæ•°æ®å‡†å¤‡ï¼šæ”¶é›†ã€æ¸…æ´—å¹¶æŒ‰éœ€æ ‡æ³¨é«˜è´¨é‡çš„é¢†åŸŸç‰¹å®šæ•°æ®é›†ï¼Œä½œä¸ºæ¨¡å‹ä¸“é¡¹è®­ç»ƒçš„åŸºç¡€ã€‚</p>
<p>éšåè¿›å…¥æ¨¡å‹é€‰æ‹©é˜¶æ®µï¼ŒæŒ‘é€‰åˆé€‚çš„é¢„è®­ç»ƒæ¨¡å‹ï¼ˆå¦‚ BERTã€GPT æˆ– T5ï¼‰ï¼Œå¹¶æ ¹æ®ä»»åŠ¡éœ€æ±‚ï¼ˆå¦‚åˆ†ç±»ã€æ‘˜è¦æˆ–é—®ç­”ï¼‰å¯¹æ¨¡å‹æ¶æ„è¿›è¡Œå¾®è°ƒï¼Œä¾‹å¦‚æ·»åŠ ä»»åŠ¡ç‰¹å®šå±‚ã€‚</p>
<p>å‡†å¤‡å¥½æ•°æ®ä¸æ¨¡å‹åï¼Œå¼€å§‹å¾®è°ƒè¿‡ç¨‹ï¼šä½¿ç”¨åˆé€‚çš„è¶…å‚æ•°ã€æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨åœ¨ä»»åŠ¡ç‰¹å®šæ•°æ®é›†ä¸Šè®­ç»ƒæ¨¡å‹ï¼Œå¹¶é€šè¿‡éªŒè¯é›†å®šæœŸè¯„ä¼°ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚</p>
<p><strong>å¸¸ç”¨å¾®è°ƒæ¡†æ¶ä¸å·¥å…·åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li>
<p><strong>Hugging Face Transformers</strong></p>
<p>ï¼šæä¾›é¢„è®­ç»ƒæ¨¡å‹ã€åˆ†è¯å™¨åŠå¤šç§ NLP ä»»åŠ¡çš„å¾®è°ƒå·¥å…·ã€‚</p>
</li>
<li>
<p><strong>PyTorch ä¸ TensorFlow</strong></p>
<p>ï¼šä¸»æµæœºå™¨å­¦ä¹ æ¡†æ¶ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¨¡å‹çš„å®ç°ä¸å¾®è°ƒã€‚</p>
</li>
<li>
<p><strong>Google Colab ä¸ Kaggle</strong></p>
<p>ï¼šæä¾›å…è´¹ GPU çš„äº‘ç«¯å¹³å°ï¼Œé€‚åˆå¾®è°ƒå°å‹æ¨¡å‹ã€‚</p>
</li>
</ul>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç”¨äºæƒ…æ„Ÿåˆ†æçš„å¾®è°ƒä¼ªä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from transformers import AutoModelForSequenceClassification, AutoTokenizer, Trainer, TrainingArguments

<span class="hljs-comment"># åŠ è½½é¢„è®­ç»ƒæ¨¡å‹ä¸åˆ†è¯å™¨</span>
<span class="hljs-attr">model_name</span> = <span class="hljs-string">"bert-base-uncased"</span>
<span class="hljs-attr">model</span> = AutoModelForSequenceClassification.from_pretrained(model_name, num_labels=<span class="hljs-number">2</span>)
<span class="hljs-attr">tokenizer</span> = AutoTokenizer.from_pretrained(model_name)

<span class="hljs-comment"># æ•°æ®é¢„å¤„ç†</span>
def preprocess_function(examples):
Â  Â  return tokenizer(examples<span class="hljs-section">["text"]</span>, <span class="hljs-attr">truncation</span>=<span class="hljs-literal">True</span>, padding=<span class="hljs-literal">True</span>)

<span class="hljs-attr">tokenized_datasets</span> = raw_datasets.map(preprocess_function, batched=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># è®­ç»ƒå‚æ•°è®¾ç½®</span>
<span class="hljs-attr">training_args</span> = TrainingArguments(
Â  Â  <span class="hljs-attr">output_dir</span>=<span class="hljs-string">"./results"</span>,
Â  Â  <span class="hljs-attr">evaluation_strategy</span>=<span class="hljs-string">"epoch"</span>,
Â  Â  <span class="hljs-attr">save_strategy</span>=<span class="hljs-string">"epoch"</span>,
Â  Â  <span class="hljs-attr">learning_rate</span>=<span class="hljs-number">2</span>e-<span class="hljs-number">5</span>,
Â  Â  <span class="hljs-attr">per_device_train_batch_size</span>=<span class="hljs-number">16</span>,
Â  Â  <span class="hljs-attr">num_train_epochs</span>=<span class="hljs-number">3</span>,
Â  Â  <span class="hljs-attr">weight_decay</span>=<span class="hljs-number">0.01</span>,
)

<span class="hljs-comment"># å®šä¹‰è®­ç»ƒå™¨</span>
<span class="hljs-attr">trainer</span> = Trainer(
Â  Â  <span class="hljs-attr">model</span>=model,
Â  Â  <span class="hljs-attr">args</span>=training_args,
Â  Â  <span class="hljs-attr">train_dataset</span>=tokenized_datasets[<span class="hljs-string">"train"</span>],
Â  Â  <span class="hljs-attr">eval_dataset</span>=tokenized_datasets[<span class="hljs-string">"validation"</span>],
)

<span class="hljs-comment"># å¼€å§‹è®­ç»ƒ</span>
trainer.train()
</code></pre>
<p><strong>å¾®è°ƒå®æ–½æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>
<p><strong>ä»»åŠ¡æ•°æ®è´¨é‡</strong></p>
<p>ï¼šç¡®ä¿æ•°æ®é›†å¹²å‡€ã€æ ‡æ³¨å‡†ç¡®ï¼Œå¹¶èƒ½ä»£è¡¨ç›®æ ‡é¢†åŸŸæˆ–ä»»åŠ¡ã€‚</p>
</li>
<li>
<p><strong>è¶…å‚æ•°è°ƒä¼˜</strong></p>
<p>ï¼šå°è¯•ä¸åŒå­¦ä¹ ç‡ã€æ‰¹æ¬¡å¤§å°å’Œè®­ç»ƒè½®æ•°ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚</p>
</li>
<li>
<p><strong>é˜²æ­¢è¿‡æ‹Ÿåˆ</strong></p>
<p>ï¼šä½¿ç”¨ dropoutã€æ—©åœæˆ–æ­£åˆ™åŒ–ç­‰æŠ€æœ¯æå‡æ³›åŒ–èƒ½åŠ›ã€‚</p>
</li>
<li>
<p><strong>å®šæœŸè¯„ä¼°</strong></p>
<p>ï¼šè®­ç»ƒè¿‡ç¨‹ä¸­ç›‘æ§éªŒè¯é›†è¡¨ç°ï¼Œç¡®ä¿æœ‰æ•ˆå­¦ä¹ ã€‚</p>
</li>
<li>
<p><strong>åˆ©ç”¨é¢„è®­ç»ƒå±‚</strong></p>
<p>ï¼šå†»ç»“åŸºç¡€æ¨¡å‹ï¼Œä»…å¾®è°ƒä»»åŠ¡ç‰¹å®šå±‚ï¼Œæé«˜èµ„æºæ•ˆç‡ã€‚</p>
</li>
<li>
<p><strong>é«˜æ•ˆèµ„æºåˆ©ç”¨</strong></p>
<p>ï¼šä½¿ç”¨ GPU/TPU äº‘èµ„æºåŠæ‰¹å¤„ç†åŠ é€Ÿå¾®è°ƒã€‚</p>
</li>
<li>
<p><strong>æŒç»­æ›´æ–°</strong></p>
<p>ï¼šå®šæœŸç”¨æ–°æ•°æ®é‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œä¿æŒæ—¶æ•ˆæ€§ä¸å‡†ç¡®æ€§ã€‚</p>
</li>
</ul>
<p>éµå¾ªæ­¤è“å›¾ï¼Œå¯é«˜æ•ˆå®ç°å„ç±» NLP ä»»åŠ¡çš„å¾®è°ƒï¼Œåœ¨ä¿è¯ä»»åŠ¡æ€§èƒ½çš„åŒæ—¶ä¼˜åŒ–èµ„æºä½¿ç”¨ã€‚</p>
<p>é€‰æ‹©åˆé€‚çš„ AI æ¨¡å‹å¢å¼ºæŠ€æœ¯</p>
<h2 data-id="heading-3"><strong>RAG çš„ä¼˜åŠ¿åœºæ™¯</strong></h2>
<p>RAG åœ¨éœ€è¦è®¿é—®æµ·é‡ã€æœ€æ–°ä¿¡æ¯ä¸”æ— éœ€é‡æ–°è®­ç»ƒå³å¯é€‚åº”æ–°æ•°æ®çš„åœºæ™¯ä¸­è¡¨ç°å“è¶Šã€‚è¿™ä½¿å…¶ç‰¹åˆ«é€‚ç”¨äºçŸ¥è¯†æŒç»­æ¼”è¿›æˆ–ä¿¡æ¯èŒƒå›´è¿‡äºå¹¿æ³›ã€éš¾ä»¥å®Œå…¨å†…åŒ–åˆ°å•ä¸€æ¨¡å‹å‚æ•°ä¸­çš„é¢†åŸŸã€‚</p>
<p>å…¸å‹ä¾‹å­æ˜¯å¼€æ”¾åŸŸé—®ç­”ç³»ç»Ÿã€‚ä¸ä»…ä¾èµ–å‚æ•°å†…åµŒçŸ¥è¯†çš„å¾®è°ƒæ¨¡å‹ä¸åŒï¼ŒRAG èƒ½åŠ¨æ€ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢å¹¶æ•´åˆæœ€æ–°ä¿¡æ¯ã€‚è¿™ä¸€èƒ½åŠ›å¯¹è™šæ‹ŸåŠ©æ‰‹æˆ–å®¢æœèŠå¤©æœºå™¨äººè‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒä»¬éœ€åœ¨å¹¿æ³›ä¸»é¢˜ä¸Šæä¾›å‡†ç¡®ã€åŠæ—¶çš„å›ç­”ã€‚</p>
<p>RAG åœ¨éœ€è¦äº‹å®å‡†ç¡®æ€§ä¸å†…å®¹å¤šæ ·æ€§çš„å†…å®¹ç”Ÿæˆä»»åŠ¡ä¸­åŒæ ·å‡ºè‰²ã€‚ä¾‹å¦‚ï¼Œåœ¨è‡ªåŠ¨æ–°é—»æ‘˜è¦æˆ–æŠ¥å‘Šç”Ÿæˆä¸­ï¼ŒRAG å¯å¼•å…¥æœ€æ–°æ•°æ®ä¸ç»Ÿè®¡ä¿¡æ¯ï¼Œç¡®ä¿å†…å®¹æ—¢æ–°é¢–åˆå‡†ç¡®ã€‚è¿™ç§åŠ¨æ€çŸ¥è¯†æ•´åˆåœ¨é‡‘èç­‰é¢†åŸŸå°¤ä¸ºå®è´µï¼Œå› ä¸ºå¸‚åœºçŠ¶å†µä¸å…¬å¸ä¿¡æ¯ç¬æ¯ä¸‡å˜ã€‚</p>
<p>RAG å¤„ç†é¢‘ç¹æ›´æ–°ä¿¡æ¯çš„èƒ½åŠ›åœ¨è®¸å¤šç°å®åº”ç”¨ä¸­å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ã€‚ä¾‹å¦‚åœ¨åŒ»ç–—é¢†åŸŸï¼ŒåŸºäº RAG çš„ç³»ç»Ÿæ— éœ€åå¤é‡æ–°è®­ç»ƒï¼Œå³å¯åŒæ­¥æœ€æ–°ç ”ç©¶æˆæœã€æ²»ç–—æ–¹æ¡ˆå’Œè¯ç‰©ä¿¡æ¯ï¼Œç¡®ä¿åŒ»æŠ¤äººå‘˜åœ¨å…³é”®å†³ç­–æ—¶è·å¾—æœ€æ–°ã€æœ€ç›¸å…³çš„çŸ¥è¯†ã€‚</p>
<p><strong>RAG çš„ä¸»è¦åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li>å¼€æ”¾åŸŸé—®ç­”ä¸èŠå¤©æœºå™¨äºº</li>
<li>å®æ—¶æ–°é—»æ‘˜è¦ä¸åˆ†æ</li>
<li>ç§‘å­¦æ–‡çŒ®ç»¼è¿°ä¸ç ”ç©¶è¾…åŠ©</li>
<li>é‡‘èå¸‚åœºåˆ†æä¸æŠ¥å‘Š</li>
<li>æ•™è‚²å·¥å…·ä¸äº’åŠ¨å­¦ä¹ å¹³å°</li>
<li>äº‹å®æ ¸æŸ¥ä¸è™šå‡ä¿¡æ¯æ£€æµ‹ç³»ç»Ÿ</li>
</ul>
<p>åœ¨è¿™äº›åœºæ™¯ä¸­ï¼ŒRAG å°†å¤§è¯­è¨€æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ä¸ä¿¡æ¯æ£€ç´¢ç³»ç»Ÿçš„ç²¾å‡†æ€§ä¸æ—¶æ•ˆæ€§ç›¸ç»“åˆï¼Œæˆä¸ºå¤„ç†å¤æ‚ã€çŸ¥è¯†å¯†é›†å‹ä»»åŠ¡çš„å¼ºå¤§å·¥å…·ã€‚</p>
<h2 data-id="heading-4"><strong>å¾®è°ƒçš„ä¼˜åŠ¿åœºæ™¯</strong></h2>
<p>å¾®è°ƒé€‚ç”¨äºä»»åŠ¡ç‰¹å®šä¼˜åŒ–å’Œä½å»¶è¿Ÿæ€§èƒ½è‡³å…³é‡è¦çš„åœºæ™¯ã€‚ä¸€ä¸ªå…¸å‹é¢†åŸŸæ˜¯ç‰¹å®šé¢†åŸŸçš„è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œåœ¨æ³•å¾‹ã€åŒ»ç–—æˆ–æŠ€æœ¯æ–‡æ¡£åˆ†æä¸­ï¼Œå¾®è°ƒæ¨¡å‹é€šè¿‡ä¸“é¡¹è®­ç»ƒç†è§£ä¸“ä¸šæœ¯è¯­ã€ä¸Šä¸‹æ–‡å’Œç»†å¾®å·®åˆ«ï¼Œè¡¨ç°ä¼˜äºé€šç”¨æ¨¡å‹ã€‚</p>
<p>ä»»åŠ¡ç‰¹å®šæ€§èƒ½ä¼˜åŒ–æ˜¯å¾®è°ƒçš„å¦ä¸€ä¼˜åŠ¿ã€‚åœ¨æƒ…æ„Ÿåˆ†æã€åƒåœ¾é‚®ä»¶æ£€æµ‹æˆ–å‘½åå®ä½“è¯†åˆ«ç­‰åº”ç”¨ä¸­ï¼Œå¾®è°ƒæ¨¡å‹é€šè¿‡èšç„¦ç‰¹å®šä»»åŠ¡æ•°æ®é›†ï¼Œå®ç°å“è¶Šæ€§èƒ½ï¼Œä¸ä»…èƒ½å‡†ç¡®è¯†åˆ«ï¼Œè¿˜èƒ½ç¨³å¥å¤„ç†é¢†åŸŸç‰¹æœ‰ç»†èŠ‚ã€‚</p>
<p>å¾®è°ƒåœ¨ä½å»¶è¿Ÿç¯å¢ƒä¸­åŒæ ·è¡¨ç°å‡ºè‰²ã€‚ç”±äºä¸ä¾èµ–å¤–éƒ¨æ£€ç´¢æœºåˆ¶ï¼Œå¾®è°ƒæ¨¡å‹æ¯” RAG ç­‰æ£€ç´¢å¢å¼ºç³»ç»Ÿç”Ÿæˆå“åº”æ›´å¿«ï¼Œéå¸¸é€‚åˆèŠå¤©æœºå™¨äººã€è¯­éŸ³åŠ©æ‰‹å’Œå®æ—¶ç¿»è¯‘ç­‰å¯¹å“åº”é€Ÿåº¦è¦æ±‚æé«˜çš„åº”ç”¨ã€‚</p>
<p>åœ¨åŒ»ç–—æˆ–é‡‘èç­‰æ•°æ®éšç§è‡³å…³é‡è¦çš„ç¯å¢ƒä¸­ï¼Œå¾®è°ƒæ¨¡å‹è¿˜å…·å¤‡é¢å¤–ä¼˜åŠ¿ï¼šé€šè¿‡å°†ä»»åŠ¡çŸ¥è¯†ç›´æ¥åµŒå…¥æ¨¡å‹ï¼Œå‡å°‘äº†å¯¹å¤–éƒ¨æ•°æ®æ£€ç´¢çš„ä¾èµ–ï¼Œä»è€Œé™ä½æ•°æ®æ³„éœ²æˆ–éšç§è¿è§„é£é™©ã€‚</p>
<h2 data-id="heading-5"><strong>å¾®è°ƒçš„ä¸»è¦åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</strong></h2>
<ul>
<li>ç¤¾äº¤åª’ä½“æˆ–å®¢æˆ·åé¦ˆçš„æƒ…æ„Ÿåˆ†æ</li>
<li>æ³•å¾‹ä¸åŒ»ç–—æ–‡æ¡£åˆ†æ</li>
<li>ä¸ªæ€§åŒ–æ¨èä¸ç”¨æˆ·ç”»åƒ</li>
<li>é‡‘èç³»ç»Ÿä¸­çš„æ¬ºè¯ˆæ£€æµ‹ä¸é£é™©è¯„ä¼°</li>
<li>ä½å»¶è¿Ÿå®¢æˆ·æœåŠ¡èŠå¤©æœºå™¨äºº</li>
<li>ä»»åŠ¡ç‰¹å®šæ‘˜è¦ä¸æŠ¥å‘Šç”Ÿæˆ</li>
<li>é¢†åŸŸç‰¹å®šç¿»è¯‘ä¸è¯­è¨€æ¨¡å‹</li>
<li>æŠ€æœ¯æ”¯æŒä¸æ•…éšœæ’æŸ¥åŠ©æ‰‹</li>
</ul>
<p>åœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œå¾®è°ƒæ¨¡å‹å‡­å€Ÿå…¶ä»»åŠ¡ä¸“ç²¾èƒ½åŠ›å’Œå¿«é€Ÿå“åº”æ•ˆç‡ï¼Œæˆä¸ºä¸å¯æˆ–ç¼ºçš„æ–¹æ³•ã€‚å…¶å¯¹ç¨³å®šæ•°æ®é›†å’Œå†…åµŒçŸ¥è¯†çš„ä¾èµ–ï¼Œä½¿å…¶åœ¨å¯é¢„æµ‹ã€ä»»åŠ¡èšç„¦çš„åº”ç”¨ä¸­æŒç»­é«˜æ•ˆã€‚</p>
<p><strong>æ··åˆæ–¹æ³•ï¼šä¸¤å…¨å…¶ç¾</strong></p>
<p>ç»“åˆ RAG ä¸å¾®è°ƒçš„æ··åˆæ–¹æ³•ï¼Œä¸ºåŒæ—¶éœ€è¦æœ€æ–°ä¿¡æ¯æ£€ç´¢ä¸ä»»åŠ¡ç‰¹å®šä¼˜åŒ–çš„åœºæ™¯æä¾›äº†å¼ºå¤§è§£å†³æ–¹æ¡ˆã€‚è¿™ç±»æ–¹æ³•èåˆä¸¤è€…ä¼˜åŠ¿ï¼Œæ„å»ºå‡ºæ›´çµæ´»é«˜æ•ˆçš„ AI ç³»ç»Ÿã€‚</p>
<p>ä¸€ç§æœ‰æ•ˆç­–ç•¥æ˜¯ä»¥å¾®è°ƒæ¨¡å‹ä½œä¸º RAG ç³»ç»Ÿçš„åŸºç¡€ã€‚è¿™æ ·ï¼Œæ¨¡å‹æ—¢å…·å¤‡ç‰¹å®šé¢†åŸŸçš„ä¸“ä¸šçŸ¥è¯†ï¼Œåˆèƒ½è®¿é—®å¹¶æ•´åˆå¤–éƒ¨ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œåœ¨åŒ»ç–—è¯Šæ–­ç³»ç»Ÿä¸­ï¼ŒåŸºç¡€æ¨¡å‹å¯å¾®è°ƒäºåŒ»å­¦æœ¯è¯­å’Œå¸¸è§è¯Šç–—æµç¨‹ï¼Œè€Œ RAG èƒ½åŠ›åˆ™ä½¿å…¶æ£€ç´¢æœ€æ–°ç ”ç©¶æˆæœæˆ–ç½•è§ç—…ä¾‹ã€‚</p>
<p>å¦ä¸€ç§æ–¹æ³•æ˜¯å…ˆç”¨ RAG è¿›è¡Œåˆæ­¥ä¿¡æ¯æ£€ç´¢ï¼Œå†å¯¹è¾“å‡ºç”Ÿæˆè¿‡ç¨‹è¿›è¡Œå¾®è°ƒã€‚è¿™åœ¨äº‹å®å‡†ç¡®æ€§ä¸é£æ ¼ä¸€è‡´æ€§å‡é‡è¦çš„å†…å®¹åˆ›ä½œä»»åŠ¡ä¸­å°¤ä¸ºæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œæ–°é—»æ‘˜è¦ç³»ç»Ÿå¯ç”¨ RAG æ”¶é›†ç›¸å…³äº‹å®ï¼Œå†é€šè¿‡å¾®è°ƒè¯­è¨€æ¨¡å‹æŒ‰ç‰¹å®šæ–°é—»é£æ ¼ç”Ÿæˆæ‘˜è¦ã€‚</p>
<p><strong>æ··åˆæ–¹æ³•çš„å®é™…åº”ç”¨åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li>æ³•å¾‹ç ”ç©¶å·¥å…·ï¼šç»“åˆå¾®è°ƒæ¨¡å‹ç†è§£æ³•å¾‹è¯­è¨€ï¼ŒRAG è®¿é—®æœ€æ–°åˆ¤ä¾‹ä¸æ³•è§„ã€‚</li>
<li>æ•™è‚²å¹³å°ï¼šå¾®è°ƒç”¨äºä¸ªæ€§åŒ–æ•™å­¦ï¼ŒRAG æ£€ç´¢å¤šæ ·ä¸”æœ€æ–°çš„å­¦ä¹ èµ„æ–™ã€‚</li>
<li>é‡‘èåˆ†æç³»ç»Ÿï¼šå¾®è°ƒæ¨¡å‹é¢„æµ‹å¸‚åœºè¶‹åŠ¿ï¼ŒRAG æ•´åˆå®æ—¶ç»æµæ•°æ®ã€‚</li>
</ul>
<p>ä¸‹å›¾å†³ç­–æ ‘å¯æŒ‡å¯¼ä»ä¸šè€…æ ¹æ®å…·ä½“ç”¨ä¾‹é€‰æ‹©æœ€åˆé€‚çš„æ–¹æ³•ï¼Œåœ¨ä¸“ä¸šæ·±åº¦ä¸ä¿¡æ¯æ—¶æ•ˆæ€§ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ccbbfafecda4a448c62c2d6ea7e32bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250872&amp;x-signature=Qq3%2Bn%2F6KgglixmEzbtyRwrAzpZw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6"><strong>ç»“è®º</strong></h2>
<p>RAG ä¸å¾®è°ƒä»£è¡¨äº†æå‡ AI æ¨¡å‹æ€§èƒ½çš„ä¸¤ç§ä¸åŒè·¯å¾„ï¼Œå„æœ‰ä¼˜åŠ¿ä¸å±€é™ã€‚RAG æ“…é•¿éœ€è¦è®¿é—®å¤§è§„æ¨¡ã€é¢‘ç¹æ›´æ–°çŸ¥è¯†åº“çš„åœºæ™¯ï¼Œå…·å¤‡æ— éœ€é‡æ–°è®­ç»ƒå³å¯é€‚åº”æ–°ä¿¡æ¯çš„çµæ´»æ€§ã€‚è€Œå¾®è°ƒåˆ™åœ¨ä»»åŠ¡ä¸“ç²¾åº”ç”¨ä¸­è¡¨ç°çªå‡ºï¼Œæä¾›æ›´å¿«çš„æ¨ç†é€Ÿåº¦å’Œæ›´ç´§å‡‘çš„æ¨¡å‹ã€‚</p>
<p>é€‰æ‹© RAG è¿˜æ˜¯å¾®è°ƒæ—¶ï¼Œéœ€ç»¼åˆè€ƒè™‘ä»»åŠ¡æ€§è´¨ã€æ•°æ®æ›´æ–°é¢‘ç‡ã€è®¡ç®—èµ„æºåŠå¯è§£é‡Šæ€§éœ€æ±‚ã€‚RAG æ›´é€‚åˆå¼€æ”¾åŸŸä»»åŠ¡å’Œéœ€è¦æœ€æ–°ä¿¡æ¯çš„åº”ç”¨ï¼›å¾®è°ƒåˆ™é€‚ç”¨äºçŸ¥è¯†ç¨³å®šã€å®šä¹‰æ˜ç¡®çš„ä¸“é¡¹ä»»åŠ¡ã€‚</p>
<p>å°†æ‰€é€‰æ–¹æ³•ä¸é¡¹ç›®å…·ä½“éœ€æ±‚å’Œçº¦æŸå¯¹é½è‡³å…³é‡è¦ã€‚éœ€æƒè¡¡æ¨ç†é€Ÿåº¦ã€æ¨¡å‹å¤§å°ã€é€‚åº”æ€§ä»¥åŠå¯¹å¤–éƒ¨çŸ¥è¯†åº“çš„ä¾èµ–ç¨‹åº¦ã€‚æŸäº›æƒ…å†µä¸‹ï¼Œç»“åˆ RAG ä¸å¾®è°ƒçš„æ··åˆæ–¹æ³•å¯èƒ½æ˜¯æœ€ä¼˜è§£ã€‚</p>
<p>é¼“åŠ±ä»ä¸šè€…äº²è‡ªå°è¯•ä¸¤ç§æ–¹æ³•ï¼Œç§¯ç´¯å®è·µç»éªŒã€‚</p>
<p><strong>å¸¸è§é—®é¢˜è§£ç­”</strong></p>
<p><strong>Qï¼šRAG ä¸å¾®è°ƒåœ¨æ¨ç†é€Ÿåº¦ä¸Šæœ‰ä½•å·®å¼‚ï¼Ÿ</strong> Aï¼šå¾®è°ƒæ¨¡å‹é€šå¸¸æ¨ç†é€Ÿåº¦æ›´å¿«ã€‚å›¾è¡¨æ˜¾ç¤ºï¼Œåœ¨æ‰€æœ‰æ¨¡å‹è§„æ¨¡ï¼ˆå°ã€ä¸­ã€å¤§ï¼‰ä¸‹ï¼Œå¾®è°ƒæ¨¡å‹çš„æ¨ç†æ—¶é—´å§‹ç»ˆä½äº RAG æ¨¡å‹ã€‚</p>
<p><strong>Qï¼šå®æ–½ RAG ç³»ç»Ÿçš„ä¸»è¦æŒ‘æˆ˜æœ‰å“ªäº›ï¼Ÿ</strong> Aï¼šå…³é”®æŒ‘æˆ˜åŒ…æ‹¬æ„å»ºä¸ç»´æŠ¤å¤§è§„æ¨¡ã€æœ€æ–°çŸ¥è¯†åº“ï¼Œå®ç°é«˜æ•ˆæ£€ç´¢æœºåˆ¶ï¼Œå¹³è¡¡æ£€ç´¢å‡†ç¡®æ€§ä¸é€Ÿåº¦ã€‚æ­¤å¤–ï¼Œç¡®ä¿æ£€ç´¢ä¿¡æ¯çš„ç›¸å…³æ€§åŠå…¶ä¸ç”Ÿæˆè¿‡ç¨‹çš„æ— ç¼æ•´åˆä¹Ÿè¾ƒä¸ºå¤æ‚ã€‚</p>
<p><strong>Qï¼šå¦‚ä½•åˆ¤æ–­æˆ‘çš„ä»»åŠ¡æ˜¯å¦åªéœ€å¾®è°ƒï¼Œè¿˜æ˜¯åº”è€ƒè™‘ RAGï¼Ÿ</strong> Aï¼šè‹¥ä»»åŠ¡å®šä¹‰æ¸…æ™°ã€çŸ¥è¯†é¢†åŸŸç¨³å®šä¸”æ— éœ€é¢‘ç¹æ›´æ–°ï¼Œå¯é€‰æ‹©å¾®è°ƒã€‚è‹¥åº”ç”¨éœ€è®¿é—®å¹¿æ³›ä¸”é¢‘ç¹æ›´æ–°çš„çŸ¥è¯†åº“ï¼Œæˆ–éœ€å¤„ç†åŸå§‹è®­ç»ƒæ•°æ®èŒƒå›´ä¹‹å¤–çš„æŸ¥è¯¢ï¼Œåˆ™åº”è€ƒè™‘ RAGã€‚</p>
<p><strong>Qï¼šRAG ä¸å¾®è°ƒèƒ½å¦æœ‰æ•ˆç»“åˆï¼Ÿ</strong> Aï¼šå¯ä»¥ã€‚æ··åˆæ–¹æ³•éå¸¸æœ‰æ•ˆã€‚ä¾‹å¦‚ï¼Œå¯å°†å¾®è°ƒæ¨¡å‹ä½œä¸º RAG ç³»ç»Ÿçš„åŸºç¡€ï¼Œç»“åˆä¸“ä¸šé¢†åŸŸçŸ¥è¯†ä¸å¤–éƒ¨ä¿¡æ¯æ£€ç´¢èƒ½åŠ›ï¼›ä¹Ÿå¯å…ˆç”¨ RAG æ£€ç´¢ä¿¡æ¯ï¼Œå†å¯¹ç”Ÿæˆè¿‡ç¨‹è¿›è¡Œå¾®è°ƒä»¥é€‚é…ç‰¹å®šä»»åŠ¡æˆ–é£æ ¼ã€‚</p>
<p><strong>Qï¼šRAG ä¸å¾®è°ƒåœ¨æ¨¡å‹å¯è§£é‡Šæ€§æ–¹é¢æœ‰ä½•å·®å¼‚ï¼Ÿ</strong> Aï¼šRAG é€šå¸¸æ›´å…·å¯è§£é‡Šæ€§ï¼Œå› å…¶èƒ½æä¾›æ£€ç´¢ä¿¡æ¯çš„æ¥æºï¼Œä¾¿äºè¿½æº¯æ¨¡å‹å†³ç­–è¿‡ç¨‹ã€‚å¾®è°ƒæ¨¡å‹è™½åœ¨ç‰¹å®šä»»åŠ¡ä¸Šå¯èƒ½æ›´å‡†ç¡®ï¼Œä½†å…¶æ¨ç†è¿‡ç¨‹é€æ˜åº¦è¾ƒä½ã€‚</p>
<p><strong>Qï¼šé™¤ RAG ä¸å¾®è°ƒå¤–ï¼Œæ¨¡å‹å¢å¼ºæŠ€æœ¯è¿˜æœ‰å“ªäº›æ–°å…´è¶‹åŠ¿ï¼Ÿ</strong> Aï¼šæ–°å…´è¶‹åŠ¿åŒ…æ‹¬ï¼šæŒç»­å­¦ä¹ æŠ€æœ¯ï¼ˆä½¿æ¨¡å‹æ— éœ€å®Œæ•´é‡è®­å³å¯æ›´æ–°çŸ¥è¯†ï¼‰ã€æ›´é«˜æ•ˆçš„å‚æ•°é«˜æ•ˆå¾®è°ƒæ–¹æ³•ã€åŸºäºå…ˆè¿›ç¥ç»æ¶æ„çš„æ”¹è¿›æ£€ç´¢æœºåˆ¶ï¼Œä»¥åŠèƒ½åŠ¨æ€å†³å®šä½•æ—¶ä½¿ç”¨å†…éƒ¨çŸ¥è¯† vs. å¤–éƒ¨æ£€ç´¢çš„æ¨¡å‹ã€‚</p>
<h3 data-id="heading-7">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PropertyValuesHolderä¸Keyframe ç¬”è®°]]></title>    <link>https://juejin.cn/post/7578820376999084083</link>    <guid>https://juejin.cn/post/7578820376999084083</guid>    <pubDate>2025-12-02T03:17:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578820376999084083" data-draft-id="7578780780026445833" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PropertyValuesHolderä¸Keyframe ç¬”è®°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-02T03:17:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŸä¸œç±³ç²‰å„¿"/> <meta itemprop="url" content="https://juejin.cn/user/4283353029151694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PropertyValuesHolderä¸Keyframe ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4283353029151694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŸä¸œç±³ç²‰å„¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:17:35.000Z" title="Tue Dec 02 2025 03:17:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">PropertyValuesHolder</h2>
<p>ValueAnimatorå’ŒObjectAnimatoréƒ½æœ‰å¯¹åº”çš„ofPorpertyValuesHolderæ–¹æ³•</p>
<p>PorpertyValuesHoldeåˆ›å»ºå®ä¾‹çš„æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PropertyValuesHolder <span class="hljs-title function_">ofFloat</span><span class="hljs-params">(String PropertyName,<span class="hljs-type">float</span>... values)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PropertyValuesHolder <span class="hljs-title function_">ofInt</span><span class="hljs-params">(String PropertyName,<span class="hljs-type">int</span>... values)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PropertyValuesHolder <span class="hljs-title function_">ofObject</span><span class="hljs-params">(String PropertyName,TypeEvaluator evaluator,Object... values)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PropertyValuesHolder <span class="hljs-title function_">ofKeyFrame</span><span class="hljs-params">(String PropertyName,KeyFrame... values)</span>
</code></pre>
<p>ofFloat,ofIntä½¿ç”¨ç¤ºä¾‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">PropertyValuesHolder</span> <span class="hljs-variable">holder</span> <span class="hljs-operator">=</span> PropertyValuesHolder.ofFLoat(<span class="hljs-string">"alpha"</span>,<span class="hljs-number">0.1f</span>,<span class="hljs-number">0.3f</span>,<span class="hljs-number">0.7f</span>,<span class="hljs-number">1f</span>);
<span class="hljs-type">ObjectAnimator</span> <span class="hljs-variable">animator</span> <span class="hljs-operator">=</span> ObjectAnimator.ofPorpertyValuesHolder(view,holder);
animator.setDuration(<span class="hljs-number">2000</span>);
animator.start();

</code></pre>
<p>ofObjectæ–¹æ³•å‚æ•°ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„æ’å€¼å™¨ï¼Œä½¿ç”¨å®ä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CharEvaLuator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TypeEvaluator</span>&lt;Character&gt;{
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> Character <span class="hljs-title function_">evaluate</span><span class="hljs-params">(<span class="hljs-type">float</span> fraction, Character startValue, Character endValue)</span> {
            <span class="hljs-type">int</span> <span class="hljs-variable">startInt</span> <span class="hljs-operator">=</span> startValue;
            <span class="hljs-type">int</span> <span class="hljs-variable">endInt</span> <span class="hljs-operator">=</span> endValue;
            <span class="hljs-type">int</span> <span class="hljs-variable">curInt</span> <span class="hljs-operator">=</span> startInt + fraction * (endInt- startInt);
            <span class="hljs-type">char</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> (Char)curInt;
            <span class="hljs-keyword">return</span> result;
        }
    }
    
    <span class="hljs-type">PropertyValuesHolder</span> <span class="hljs-variable">holder</span> <span class="hljs-operator">=</span> PropertyValuesHolder.ofObject(<span class="hljs-string">"CharText"</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">CharEvaluator</span>,
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Character</span>(<span class="hljs-string">'A'</span>),<span class="hljs-keyword">new</span> <span class="hljs-title class_">Character</span>(<span class="hljs-string">'Z'</span>));
    <span class="hljs-type">ObjectAnimator</span> <span class="hljs-variable">animator</span> <span class="hljs-operator">=</span> ObjectAnimator.ofPorpertyValuesHolder(tv,holder);
    animator.setDuration(<span class="hljs-number">2000</span>);
    animator.start();
    
    <span class="hljs-comment">//æ³¨æ„å› ä¸ºTextView ä¸­setText(CharSequence text)å‚æ•°ï¼Œéœ€è¦å†…éƒ¨è‡ªå®šä¹‰setCharText(Charactor text)ç»“åˆofObjectä½¿ç”¨</span>
</code></pre>
<h2 data-id="heading-1">Keyframe</h2>
<p>keyframe æˆ‘ä¸ªäººæ„Ÿè§‰å¯ä»¥ç†è§£ä¸ºå¥½æ¯”åšåŠ¨ç”»æ—¶ç»˜åˆ¶çš„å¸§ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> KeyFrame <span class="hljs-title function_">ofFloat</span><span class="hljs-params">(<span class="hljs-type">float</span> fraction,<span class="hljs-type">float</span> duration)</span>
<span class="hljs-comment">//fraction å½“å‰æ˜¾ç¤ºçš„è¿›åº¦ï¼Œvalue å½“å‰åŠ¨ç”»æ‰€åœ¨æ•°å€¼ä½ç½®</span>

</code></pre>
<p>ofFloat,ofIntä½¿ç”¨å®ä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">KeyFrame <span class="hljs-attr">frame0</span> = KeyFrame.<span class="hljs-literal">ofF</span>loat(<span class="hljs-number">0</span>f,<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
KeyFrame <span class="hljs-attr">frame1</span> = KeyFrame.<span class="hljs-literal">ofF</span>loat(<span class="hljs-number">0.5</span>f,<span class="hljs-number">50</span>)<span class="hljs-comment">;</span>
KeyFrame <span class="hljs-attr">frame2</span> = KeyFrame.<span class="hljs-literal">ofF</span>loat(<span class="hljs-number">1</span>f,<span class="hljs-number">100</span>)<span class="hljs-comment">;</span>
PropertyValuesHolder <span class="hljs-attr">holder</span> = PropertyValuesHolder.ofKeyframe(<span class="hljs-string">"alpha"</span>,frame0,frame1,frame2)<span class="hljs-comment">;</span>
ObjetAnimator <span class="hljs-attr">animator</span> = ObjetAnimator.ofPropertyValuesHolder(view,holder)<span class="hljs-comment">;</span>
animator.setDuration(2000)<span class="hljs-comment">;</span>
animator.start()<span class="hljs-comment">;</span>

//ä¹Ÿå¯ä»¥ç»™é™¤ç¬¬ä¸€å¸§ä»¥å¤–çš„è®¾ç½®æ’å€¼å™¨
frame1.setInterpolator(new BounceInterpolator())<span class="hljs-comment">;</span>
</code></pre>
<p>ofObject()åŒæ ·ä¹Ÿå¯ä»¥å®ç°ä¸€äº›è‡ªå®šä¹‰çš„å±æ€§å‚æ•°ï¼Œä¾‹å¦‚</p>
<pre><code class="hljs language-ini" lang="ini">KeyFrame <span class="hljs-attr">frame0</span> = KeyFrame.ofObject(<span class="hljs-number">0</span>,new Character(<span class="hljs-string">'A'</span>))<span class="hljs-comment">;</span>
KeyFrame <span class="hljs-attr">frame1</span> = KeyFrame.ofObject(<span class="hljs-number">0</span>,new Character(<span class="hljs-string">'B'</span>))<span class="hljs-comment">;</span>
KeyFrame <span class="hljs-attr">frame2</span> = KeyFrame.ofObject(<span class="hljs-number">0</span>,new Character(<span class="hljs-string">'C'</span>))<span class="hljs-comment">;</span>

//ç»“åˆä¸Šé¢çš„CharEvaLuatorè‡ªå®šä¹‰æ’å€¼å™¨ä½¿ç”¨
PropertyValuesHolder <span class="hljs-attr">holder</span> = PropertyValuesHolder.ofKeyframe(<span class="hljs-string">"CharText"</span>,frame0,frame1,frame2)<span class="hljs-comment">;</span>
holder.setEvalutar(new CharEvaLuator())<span class="hljs-comment">;</span>
ObjetAnimator <span class="hljs-attr">animator</span> = ObjetAnimator.ofPropertyValuesHolder(view,holder)<span class="hljs-comment">;</span>
animator.setDuration(2000)<span class="hljs-comment">;</span>
animator.start()<span class="hljs-comment">;</span>
</code></pre>
<h6 data-id="heading-2"><strong>æ³¨æ„</strong></h6>
<ol>
<li>
<p>å¤šä¸ªKeyFrameï¼Œéƒ½ä¼šé»˜è®¤æŠŠç¬¬ä¸€ä¸ªframeè®¾ä¸ºé¦–å¸§ï¼Œæœ€åä¸€ä¸ªè®¾ä¸ºå°¾å¸§ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯ä½ æœŸæœ›çš„æ•ˆæœ</p>
</li>
<li>
<p>å¿…é¡»å­˜åœ¨2ä¸ªæˆ–2ä¸ªä»¥ä¸Šçš„frameï¼Œä¸ç„¶ä¼šæŠ¥æ•°ç»„è¶Šç•Œ</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Jetpack å­˜å‚¨ç¯‡ï¼ˆDataStoreã€Roomï¼‰ä¸ Flow é«˜æ•ˆç»„åˆ]]></title>    <link>https://juejin.cn/post/7578780780027084809</link>    <guid>https://juejin.cn/post/7578780780027084809</guid>    <pubDate>2025-12-02T03:23:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578780780027084809" data-draft-id="7576271552704872474" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Jetpack å­˜å‚¨ç¯‡ï¼ˆDataStoreã€Roomï¼‰ä¸ Flow é«˜æ•ˆç»„åˆ"/> <meta itemprop="keywords" content="Android,APP"/> <meta itemprop="datePublished" content="2025-12-02T03:23:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‚å®¿å››å—æ²³ä¸‰"/> <meta itemprop="url" content="https://juejin.cn/user/3479267728427543"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Jetpack å­˜å‚¨ç¯‡ï¼ˆDataStoreã€Roomï¼‰ä¸ Flow é«˜æ•ˆç»„åˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3479267728427543/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‚å®¿å››å—æ²³ä¸‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:23:14.000Z" title="Tue Dec 02 2025 03:23:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šä¸ºä»€ä¹ˆè¦å†™è¿™ç¯‡æ–‡ç« </h2>
<p>åœ¨ç°ä»£ Android å¼€å‘ä¸­ï¼Œæœ¬åœ°æ•°æ®æŒä¹…åŒ–æ˜¯å‡ ä¹æ‰€æœ‰åº”ç”¨çš„æ ¸å¿ƒéœ€æ±‚ã€‚Jetpack æä¾›äº†ä¸¤å¥—å®˜æ–¹æ¨èçš„å­˜å‚¨æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>DataStore</strong>ï¼šè½»é‡çº§é”®å€¼å¯¹å­˜å‚¨ï¼Œæ¨èæ›¿ä»£ SharedPreferences</li>
<li><strong>Room</strong>ï¼šå¼ºå¤§ä¸”ç±»å‹å®‰å…¨çš„ SQLite å°è£…æ•°æ®åº“</li>
</ul>
<p>æœ¬æ–‡ä»å®é™…å¼€å‘å‡ºå‘ï¼Œä¸ Kotlin çš„ <strong>Flow</strong>ç»“åˆåï¼Œå¯ä»¥æ„å»ºå‡ºå“åº”å¼ã€ç®€æ´ã€é«˜æ•ˆçš„æœ¬åœ°æ•°æ®æ¶æ„ã€‚æœ€è¿‘çœ‹ä¹‹å‰é¡¹ç›®ä»£ç ï¼Œå‘ç°ä¸å°‘å°ä¼™ä¼´å¹¶ä¸çŸ¥é“ä¸¤è€…å¯ä»¥ç»“åˆä½¿ç”¨ã€‚æ‰€ä»¥æœ¬æ–‡å°†æ·±å…¥è®²è§£å¦‚ä½•å°† DataStore å’Œ Room ä¸ Flow é«˜æ•ˆç»„åˆä½¿ç”¨ã€‚<br/>
Demoå°†å°½å¯èƒ½æ¨¡æ‹Ÿå®é™…å¼€å‘ï¼Œgithubåœ°å€:<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftcyang123456%2FTestCompose.git" target="_blank" title="https://github.com/tcyang123456/TestCompose.git" ref="nofollow noopener noreferrer">github.com/tcyang12345â€¦</a>  ,é€‰æ‹©â€œæŒä¹…åŒ–æµ‹è¯•â€ã€‚éœ€è¦çš„å°ä¼™ä¼´å¯æ¬åˆ°ç”Ÿäº§ä»£ç ä¸­å»ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦Flow</h2>
<p>ä¼ ç»Ÿçš„ LiveData è™½ç„¶å¥½ç”¨ï¼Œä½†åœ¨ä»¥ä¸‹åœºæ™¯å­˜åœ¨å±€é™ï¼š</p>
<ul>
<li>æ— æ³•å¤©ç„¶è¡¨è¾¾â€œå•æ¬¡äº‹ä»¶â€ï¼ˆéœ€è¦é¢å¤–å¤„ç†ä¸€æ¬¡æ€§äº‹ä»¶ï¼‰</li>
<li>ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å¼ºï¼Œä½†æ— æ³•åœ¨é UI å±‚ï¼ˆå¦‚ Repositoryã€UseCaseï¼‰ä¸­ä½¿ç”¨</li>
<li>ä¸æ”¯æŒèƒŒå‹ã€å¤æ‚çš„æµæ“ä½œï¼ˆmapã€filterã€combineã€flatMapConcat ç­‰ï¼‰</li>
</ul>
<p>è€Œ Flow æ˜¯çº¯ Kotlin çš„å“åº”å¼æµï¼Œå®Œå…¨è¿è¡Œåœ¨åç¨‹ä¸­ï¼Œå…·å¤‡ï¼š</p>
<ul>
<li>å†·æµç‰¹æ€§ï¼šåªæœ‰è¢«æ”¶é›†æ—¶æ‰æ‰§è¡Œ</li>
<li>å¼ºå¤§çš„æ“ä½œç¬¦æ”¯æŒ</li>
<li>å¤©ç„¶æ”¯æŒèƒŒå‹</li>
<li>å¯åœ¨ä»»æ„åç¨‹ä½œç”¨åŸŸä¸­ä½¿ç”¨</li>
</ul>
<p>å› æ­¤ï¼Œç”¨ Flow ä½œä¸ºç»Ÿä¸€çš„æ•°æ®æµåŠ¨è½½ä½“ï¼Œæ˜¯ç›®å‰æœ€æ¨èçš„å®è·µã€‚å…³äºFlowç›¸å…³ä»‹ç»ï¼Œå¯ä»¥æŸ¥çœ‹æˆ‘çš„è¿™ä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7547408384607060020%E3%80%82" target="_blank" title="https://juejin.cn/post/7547408384607060020%E3%80%82">juejin.cn/post/754740â€¦</a></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[UI] --&gt; B[ViewModel StateFlow]
    B --&gt; C[Repository Flow]
    C --&gt; D[Room Flow] &amp; E[DataStore.data Flow]
    D &amp; E --&gt; F[è‡ªåŠ¨åˆ·æ–°]
</code></pre>
<p><strong>æœ¬æ–‡ä¸»è¦è®²è¿°ä¸¤è€…çš„ä½¿ç”¨ï¼Œä»¥åŠå’ŒFlowçš„ç»“åˆä½¿ç”¨ï¼ŒRoomçš„SQLè¯­æ³•ä¸ä½œé‡ç‚¹è®²è¿°ã€‚</strong></p>
<h2 data-id="heading-2">äºŒã€DataStore + Flowï¼šè®¾ç½®æ•°æ®æœ€ä½³ç»„åˆ</h2>
<h3 data-id="heading-3">æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–ï¼ŒåŒ…å« Preferenceså’ŒProto</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ•°æ®å­˜å‚¨datastore</span>
implementation(<span class="hljs-string">"androidx.datastore:datastore-preferences:1.0.0"</span>)
<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨ Proto DataStore</span>
implementation(<span class="hljs-string">"androidx.datastore:datastore-core:1.0.0"</span>)
implementation(<span class="hljs-string">"com.google.protobuf:protobuf-javalite:3.25.0"</span>)
</code></pre>
<h3 data-id="heading-4">1. Preferences DataStoreï¼ˆé”®å€¼å¯¹ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">object</span> PreferencesKeys {
    <span class="hljs-keyword">val</span> THEME_MODE = preferencesKey&lt;String&gt;(<span class="hljs-string">"theme_mode"</span>)
    <span class="hljs-keyword">val</span> USER_TOKEN = preferencesKey&lt;String&gt;(<span class="hljs-string">"user_token"</span>)
    <span class="hljs-keyword">val</span> HAS_NEW_GUIDE = preferencesKey&lt;<span class="hljs-built_in">Boolean</span>&gt;(<span class="hljs-string">"has_new_guide"</span>)
}

<span class="hljs-keyword">object</span> DataStoreManager {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> DATA_STORE_NAME = <span class="hljs-string">"app_settings"</span>
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> Context.pfsDataStore: DataStore&lt;Preferences&gt; <span class="hljs-keyword">by</span> preferencesDataStore(
        name = DATA_STORE_NAME
    )
    <span class="hljs-comment">// æ­¤å¤„æ˜¯proto storeæ‰©å±•æ–¹æ³•,åç»­ä½¿ç”¨</span>
    <span class="hljs-keyword">val</span> Context.userProtoDataStore: DataStore&lt;UserSettings&gt; <span class="hljs-keyword">by</span> dataStore(
        fileName = <span class="hljs-string">"user_settings.pb"</span>, <span class="hljs-comment">//æ³¨æ„åç¼€ï¼Œè™½ä¸å¼ºåˆ¶ï¼Œä½†æœ€å¥½éµå¾ªè§„èŒƒ</span>
        serializer = UserSettingsSerializer,
        corruptionHandler = ReplaceFileCorruptionHandler (
            produceNewData = { UserSettings.getDefaultInstance()}
        )
    )

    <span class="hljs-keyword">val</span> context <span class="hljs-keyword">get</span>() = MyApp.instance

    <span class="hljs-comment">/**
     * ä¸»é¢˜æ¨¡å¼æ•°æ®æµï¼Œç”¨äºç›‘å¬ä¸»é¢˜è®¾ç½®çš„å˜åŒ–
     * <span class="hljs-doctag">@return</span> è¿”å›ä¸€ä¸ªFlow&lt;String&gt;ï¼Œè¡¨ç¤ºå½“å‰çš„ä¸»é¢˜æ¨¡å¼ï¼ˆé»˜è®¤ä¸º"light"ï¼‰
     */</span>
    <span class="hljs-keyword">val</span> themeModeFlow: Flow&lt;String&gt; = context.pfsDataStore.<span class="hljs-keyword">data</span>
        .<span class="hljs-keyword">catch</span> { exception -&gt;
            <span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">is</span> IOException) {
                emit(emptyPreferences())
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> exception
            }
        }
        .map { preferences -&gt;
            preferences[PreferencesKeys.THEME_MODE] ?: <span class="hljs-string">"light"</span>
        }

    <span class="hljs-comment">/**
     * ç”¨æˆ·Tokenæ•°æ®æµï¼Œç”¨äºç›‘å¬ç”¨æˆ·Tokençš„å˜åŒ–
     * <span class="hljs-doctag">@return</span> è¿”å›ä¸€ä¸ªFlow&lt;String&gt;ï¼Œè¡¨ç¤ºå½“å‰ç”¨æˆ·çš„Tokenï¼ˆé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ï¼‰
     */</span>
    <span class="hljs-keyword">val</span> userTokenFlow: Flow&lt;String&gt; = context.pfsDataStore.<span class="hljs-keyword">data</span>.<span class="hljs-keyword">catch</span> { ex -&gt;
        <span class="hljs-keyword">if</span> (ex <span class="hljs-keyword">is</span> IOException) {
            emit(emptyPreferences())
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> ex
        }
    }.map { preferences -&gt;
        preferences[PreferencesKeys.USER_TOKEN] ?: <span class="hljs-string">""</span>
    }

    <span class="hljs-comment">/**
     * ç›‘å¬æ‰€æœ‰çš„æ•°æ®Preferences Datastore
     * åŒ…æ‹¬ä¸»é¢˜æ¨¡å¼ã€ç”¨æˆ·Tokenå’Œæ–°æ‰‹å¼•å¯¼çŠ¶æ€ä¸‰ä¸ªå­—æ®µçš„ç»„åˆæ•°æ®æµ
     * <span class="hljs-doctag">@return</span> è¿”å›ä¸€ä¸ªFlow&lt;Triple&lt;String, String, Boolean&gt;&gt;ï¼Œ
     * ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºä¸»é¢˜æ¨¡å¼ï¼Œç¬¬äºŒä¸ªä¸ºç”¨æˆ·Tokenï¼Œç¬¬ä¸‰ä¸ªä¸ºæ–°æ‰‹å¼•å¯¼çŠ¶æ€
     */</span>
    <span class="hljs-keyword">val</span> userSettingsFlow: Flow&lt;Triple&lt;String, String, <span class="hljs-built_in">Boolean</span>&gt;&gt; = context.pfsDataStore.<span class="hljs-keyword">data</span>.<span class="hljs-keyword">catch</span> { ex -&gt;
        <span class="hljs-keyword">if</span> (ex <span class="hljs-keyword">is</span> IOException) {
            emit(emptyPreferences())
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> ex
        }
    }.map { preferences -&gt;
        Triple(
            preferences[PreferencesKeys.THEME_MODE] ?: <span class="hljs-string">"light"</span>,
            preferences[PreferencesKeys.USER_TOKEN] ?: <span class="hljs-string">""</span>,
            preferences[PreferencesKeys.HAS_NEW_GUIDE] ?: <span class="hljs-literal">false</span>
        )
    }

    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">saveThemeMode</span><span class="hljs-params">(mode: <span class="hljs-type">String</span>)</span></span> {
        context.pfsDataStore.edit { preferences -&gt;
            preferences[PreferencesKeys.THEME_MODE] = mode
        }
    }

    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">saveToken</span><span class="hljs-params">(token: <span class="hljs-type">String</span>)</span></span> {
        context.pfsDataStore.edit { settings -&gt;
            settings[PreferencesKeys.USER_TOKEN] = token
        }
    }

    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearToken</span><span class="hljs-params">()</span></span> {
        context.pfsDataStore.edit { it.clear() }
    }
}
</code></pre>
<h4 data-id="heading-5">ä½¿ç”¨æ–¹å¼ï¼š</h4>
<p>åœ¨Viewmodelä¸­</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/*----------ä»¥ä¸‹æ˜¯preferences datastore----------------*/</span>
    <span class="hljs-comment">/**
     * å°†ç”¨æˆ·è®¾ç½®æ•°æ®æµè½¬æ¢ä¸ºçŠ¶æ€æµ
     * 
     * è¯¥å‡½æ•°å°†DataStoreManagerä¸­çš„ç”¨æˆ·è®¾ç½®æµè½¬æ¢ä¸ºStateFlowï¼Œä»¥ä¾¿åœ¨ViewModelä¸­ä½¿ç”¨ã€‚
     * å½“æœ‰è®¢é˜…è€…æ—¶å¼€å§‹æ”¶é›†æ•°æ®ï¼Œæ— è®¢é˜…è€…æ—¶å»¶è¿Ÿ5ç§’åœæ­¢æ”¶é›†ä»¥èŠ‚çœèµ„æºã€‚
     * 
     * <span class="hljs-doctag">@param</span> scope ä½œç”¨åŸŸï¼Œä½¿ç”¨viewModelScopeç¡®ä¿ç”Ÿå‘½å‘¨æœŸå®‰å…¨
     * <span class="hljs-doctag">@param</span> started æ§åˆ¶æµçš„å¯åŠ¨å’Œåœæ­¢ç­–ç•¥ï¼ŒWhileSubscribed(5000)è¡¨ç¤ºå½“æœ‰è®¢é˜…æ—¶æ‰æ”¶é›†ï¼Œæ— è®¢é˜…æ—¶å»¶è¿Ÿ5ç§’åœæ­¢
     * <span class="hljs-doctag">@param</span> initialValue åˆå§‹å€¼ï¼Œå½“è¿˜æ²¡æœ‰æ•°æ®æ—¶ä½¿ç”¨çš„é»˜è®¤è®¾ç½®ï¼šä¸»é¢˜ä¸º"light"ï¼Œè¯­è¨€ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼ä¸ºfalse
     * <span class="hljs-doctag">@return</span> è¿”å›ä¸€ä¸ªStateFlowï¼ŒåŒ…å«Tripleç±»å‹çš„ç”¨æˆ·è®¾ç½®æ•°æ®ï¼ˆä¸»é¢˜ã€è¯­è¨€ã€å¸ƒå°”æ ‡å¿—ï¼‰
     */</span>

<span class="hljs-keyword">val</span> themeModeFlow: Flow&lt;String&gt; = DataStoreManager.themeModeFlow.stateIn(
    scope = viewModelScope,
    started = SharingStarted.WhileSubscribed(<span class="hljs-number">5000</span>),
    initialValue = <span class="hljs-string">"light"</span>
)
<span class="hljs-comment">/**
* æ‰€æœ‰è®¾ç½®ç›‘å¬
*/</span>
<span class="hljs-keyword">val</span> allSettingFlow: Flow&lt;Triple&lt;String, String, <span class="hljs-built_in">Boolean</span>&gt;&gt; = DataStoreManager.userSettingsFlow.stateIn(
    scope = viewModelScope,
    started = SharingStarted.WhileSubscribed(<span class="hljs-number">5000</span>),
    initialValue = Triple(<span class="hljs-string">"light"</span>, <span class="hljs-string">""</span>, <span class="hljs-literal">false</span>)
)
</code></pre>
<p>åœ¨UIç•Œé¢ï¼ˆå¦‚Activityä¸­ï¼‰</p>
<pre><code class="hljs language-kotlin" lang="kotlin">lifecycleScope.launch {
    viewModel.allSettingFlow.collect { tripe -&gt;
        tvAllSetting?.text =
            <span class="hljs-string">"themeMode: <span class="hljs-subst">${tripe.first}</span>, userToken: <span class="hljs-subst">${tripe.second}</span>,  hasNewGuide: <span class="hljs-subst">${tripe.third}</span>"</span>
    }
}
</code></pre>
<h3 data-id="heading-6">2. Proto DataStoreï¼ˆç»“æ„åŒ–è‡ªå®šä¹‰å¯¹è±¡æ”¯æŒï¼‰</h3>
<ul>
<li>å®šä¹‰ schemaï¼š</li>
</ul>
<pre><code class="hljs language-proto" lang="proto">// proto/user_prefs.proto
syntax = "proto3";

option java_package = "com.example.datastore";
option java_multiple_files = true;

message UserSettings {
  string user_id = 1;
  string nickname = 2;
  bool is_vip = 3;
  int32 login_count = 4;
}
</code></pre>
<ul>
<li>"Build" -&gt; "Make Project"ç”Ÿæˆ â€UserSetting.javaâ€œ</li>
<li>å¢åŠ åºåˆ—åŒ–å’Œååºåˆ—åŒ–å·¥å…·ç±» â€œUserSettingsSerializer.ktâ€</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
* UserPrefsSerializer æ˜¯ä¸€ä¸ªç”¨äºåºåˆ—åŒ–å’Œååºåˆ—åŒ– UserPrefs å¯¹è±¡çš„å·¥å…·ç±»
* å®ç°äº† Serializer æ¥å£ï¼Œæä¾›é»˜è®¤å€¼ã€è¯»å–å’Œå†™å…¥åŠŸèƒ½
*/</span>
<span class="hljs-keyword">object</span> UserSettingsSerializer: Serializer&lt;UserSettings&gt; {
   <span class="hljs-comment">/**
    * è·å– UserPrefs çš„é»˜è®¤å€¼
    * å½“æ— æ³•ä»è¾“å…¥æµä¸­è§£ææ•°æ®æ—¶ï¼Œå°†è¿”å›æ­¤é»˜è®¤å€¼
    *
    * <span class="hljs-doctag">@return</span> é»˜è®¤çš„ UserPrefs å¯¹è±¡ï¼ŒåŒ…å«é¢„è®¾çš„ç”¨æˆ·ä¿¡æ¯
    */</span>
   <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> defaultValue: UserSettings
       <span class="hljs-keyword">get</span>() = UserSettings.newBuilder().build()

   <span class="hljs-comment">/**
    * ä»è¾“å…¥æµä¸­è¯»å–å¹¶è§£æ UserPrefs å¯¹è±¡
    * å¦‚æœè§£æè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™è¿”å›é»˜è®¤å€¼
    *
    * <span class="hljs-doctag">@param</span> input è¾“å…¥æµï¼ŒåŒ…å«åºåˆ—åŒ–çš„ UserPrefs æ•°æ®
    * <span class="hljs-doctag">@return</span> è§£ææˆåŠŸçš„ UserPrefs å¯¹è±¡ï¼Œæˆ–åœ¨å¤±è´¥æ—¶è¿”å›é»˜è®¤å€¼
    */</span>
   <span class="hljs-keyword">override</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">readFrom</span><span class="hljs-params">(input: <span class="hljs-type">InputStream</span>)</span></span>: UserSettings {
       <span class="hljs-comment">// å°è¯•ä»è¾“å…¥æµè§£æ UserPrefs å¯¹è±¡ï¼Œå¦‚æœå¤±è´¥åˆ™è¿”å›é»˜è®¤å€¼</span>
       <span class="hljs-keyword">return</span> kotlin.runCatching {
           <span class="hljs-keyword">return</span> UserSettings.parseFrom(input)
       }.onFailure {
           <span class="hljs-keyword">return</span> defaultValue
       }.getOrNull() ?: defaultValue
   }

   <span class="hljs-comment">/**
    * å°† UserPrefs å¯¹è±¡åºåˆ—åŒ–å¹¶å†™å…¥åˆ°è¾“å‡ºæµä¸­
    *
    * <span class="hljs-doctag">@param</span> t è¦åºåˆ—åŒ–çš„ UserPrefs å¯¹è±¡
    * <span class="hljs-doctag">@param</span> output è¾“å‡ºæµï¼Œç”¨äºå†™å…¥åºåˆ—åŒ–çš„æ•°æ®
    */</span>
   <span class="hljs-keyword">override</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">writeTo</span><span class="hljs-params">(t: <span class="hljs-type">UserSettings</span>, output: <span class="hljs-type">OutputStream</span>)</span></span> {
       t.writeTo(output)
   }
}
</code></pre>
<ul>
<li>åœ¨ DataStoreManager ä¸­æ·»åŠ æ‰©å±•æ–¹æ³•ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨å…¶ä»–åœ°æ–¹æ·»åŠ ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ­¤å¤„æ˜¯proto storeæ‰©å±•æ–¹æ³•</span>
<span class="hljs-keyword">val</span> Context.userProtoDataStore: DataStore&lt;UserSettings&gt; <span class="hljs-keyword">by</span> dataStore(
    fileName = <span class="hljs-string">"user_settings.db"</span>,
    serializer = UserSettingsSerializer,
    corruptionHandler = ReplaceFileCorruptionHandler (
        produceNewData = { UserSettings.getDefaultInstance()}
    )
)
</code></pre>
<ul>
<li>ç›‘å¬DataStoreæš´éœ²çš„Flow æ¥å£<br/>
// DataStoreManager.kt</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> proDataStore = context.userProtoDataStore

<span class="hljs-comment">/**
 * è·å–å®Œæ•´çš„ç”¨æˆ·åå¥½è®¾ç½®æ•°æ®æµã€‚
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> userSettingsFlow: Flow&lt;UserSettings&gt; = proDataStore.<span class="hljs-keyword">data</span>

<span class="hljs-comment">// ä»¥ä¸‹ä¸ºå„ä¸ªå­—æ®µå¯¹åº”çš„ Flow æ•°æ®æµï¼Œä¾¿äºå•ç‹¬ç›‘å¬æŸä¸ªå±æ€§çš„å˜åŒ–</span>

<span class="hljs-comment">/**
 * ç”¨æˆ· ID çš„æ•°æ®æµã€‚
 */</span>
<span class="hljs-keyword">val</span> userIdFlow = userSettingsFlow.map { it.userId }

<span class="hljs-comment">/**
 * æ˜¯å¦ä¸º VIP ç”¨æˆ·çš„æ•°æ®æµã€‚
 */</span>
<span class="hljs-keyword">val</span> isVipFlow = userSettingsFlow.map { it.isVip }
</code></pre>
<p>æ­¤å¤„ç›‘å¬äº†æ‰€æœ‰çš„å‚æ•°ï¼Œå½“æ—¶ä½ ä¹Ÿå¯ä»¥å•ç‹¬ç›‘å¬æŸä¸€ä¸ªå‚æ•°ï¼Œåˆ é™¤å¯¹åº”çš„<code>preferences[PreferencesKeys.HAS_NEW_GUIDE]</code> å³å¯ã€‚</p>
<h4 data-id="heading-7">ä½¿ç”¨æ–¹å¼</h4>
<p>ä½¿ç”¨æ–¹å¼ä¸Preferences DataStore ç›¸ä¼¼ï¼Œåœ¨Viewmodelå’ŒActivityå¯ä»¿ç…§Preferences DataStore å¼€å‘ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p>
<h3 data-id="heading-8">3.ä¸¤è€…çš„åŒºåˆ«ï¼ˆPreferences vs Protoï¼‰</h3>
<h5 data-id="heading-9">æ•°æ®ç±»å‹æ”¯æŒ</h5>
<ul>
<li>Preferences DataStore:ä»…æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹ï¼Œé€‚é…å­˜å‚¨ç®€å•é…ç½®ä¿¡æ¯</li>
<li>Proto DataStoreï¼šæ”¯æŒå¤æ‚æ•°æ®ç»“æ„ï¼Œå…è®¸åµŒå¥—å’Œåˆ—è¡¨ç­‰ç±»å‹ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<strong>å»ºè®®ä¸è¦ç”¨æ¥å­˜å‚¨å¤æ‚æ•°æ®å¯¹è±¡å’Œå¤§æ‰¹é‡æ•°æ®</strong></li>
</ul>
<h4 data-id="heading-10">ç±»å‹å®‰å…¨</h4>
<ul>
<li>Preferences ï¼šè¿è¡Œæ—¶æ£€æŸ¥ï¼Œç›¸å¯¹å®¹æ˜“å‡ºé”™</li>
<li>Proto ï¼šç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œç±»å‹å®‰å…¨æ€§æ›´å¼º</li>
</ul>
<h4 data-id="heading-11">æ€§èƒ½è¡¨ç°</h4>
<ul>
<li>Preferences ï¼šå¯¹ç®€å•æ•°æ®è®¿é—®æ›´å¿«</li>
<li>Protoï¼šé¦–æ¬¡ä¼šæœ‰æè½»å¾®çš„åºåˆ—åŒ–å¼€é”€</li>
</ul>
<h4 data-id="heading-12">ä½¿ç”¨åœºæ™¯</h4>
<ul>
<li>Preferences ï¼šç”¨æˆ·è®¾ç½®ã€ä¸»ä½“è®¾ç½®ç­‰ç®€å•çŠ¶æ€</li>
<li>Proto ï¼š å­˜å‚¨å¤æ‚çš„ç»“æ„åŒ–æ•°æ®</li>
</ul>
<h4 data-id="heading-13">å®˜æ–¹å»ºè®®</h4>
<p>Google è‡ªå·±çš„ Google I/O 2024 Appã€Google Homeã€YouTube ç­‰æ–°é¡¹ç›®ï¼Œå·²ç»å…¨éƒ¨æ”¹ç”¨ Proto DataStoreï¼Œè¿ Preferences éƒ½ä¸è¿ç§»äº†ã€‚</p>
<h3 data-id="heading-14">4.DataStoreè‡ªåŠ¨æ›´æ–°Flowçš„å…³é”®ç‚¹</h3>

































<table><thead><tr><th>æ­¥éª¤</th><th>å…³é”®æŠ€æœ¯ç‚¹</th></tr></thead><tbody><tr><td>æ•°æ®å†™å…¥</td><td>å†…å­˜ç¼“å­˜ + å†™ç£ç›˜ + æ›´æ–°æ–‡ä»¶</td></tr><tr><td>æ£€æµ‹æ–‡ä»¶å˜åŒ–</td><td>DataStore é€šè¿‡æ–‡ä»¶ç›‘å¬ï¼ˆFileObserver/Inotifyï¼‰æ£€æµ‹åˆ°æ–‡ä»¶å˜æ›´åï¼Œé‡æ–°è¯»å–å¹¶å‘å°„æ–°å€¼</td></tr><tr><td>è§¦å‘ Flow æ›´æ–°</td><td>callbackFlow + observer â†’ trySend æ–°æ•°æ®</td></tr><tr><td>å»é‡</td><td>distinctUntilChanged()</td></tr><tr><td>å¤šè¿›ç¨‹æ”¯æŒ</td><td>æ‰€æœ‰è¿›ç¨‹ç›‘å¬åŒä¸€ä¸ªæ–‡ä»¶è·¯å¾„</td></tr><tr><td>ç›‘å¬Flowå˜åŒ–</td><td>è‡ªåŠ¨æ›´æ–°UIé¡µé¢</td></tr></tbody></table>
<h2 data-id="heading-15">ä¸‰ã€Roomçš„åŸºæœ¬ä½¿ç”¨</h2>
<p>å½“ä½ éœ€è¦å­˜å‚¨å¤§é‡æ•°æ®å’Œå¤æ‚çš„å¯¹è±¡ï¼Œå»ºè®®ä½¿ç”¨Room</p>
<h3 data-id="heading-16">1ã€æ·»åŠ ä¾èµ–ã€æ·»åŠ  ksp æ’ä»¶</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">plugins {
    alias(libs.plugins.android.application)
    alias(libs.plugins.kotlin.android)
    alias(libs.plugins.kotlin.compose)
    alias(libs.plugins.proto)
    alias(libs.plugins.ksp) <span class="hljs-comment">//å¼€å¯ksp</span>
}
android {
    <span class="hljs-comment">//å…¶ä»–ä»£ç è¯·è‡ªè¡Œè¡¥å……</span>
    
    kotlinOptions {
        jvmTarget = <span class="hljs-string">"11"</span>
        <span class="hljs-comment">// å…³é”®ï¼šè§£å†³ KSP moduleName æŠ¥é”™</span>
        freeCompilerArgs += listOf(
            <span class="hljs-string">"-Xmodule-name=<span class="hljs-subst">${project.name}</span>"</span>  <span class="hljs-comment">// æˆ–è€…ç”¨ ${project.name}</span>
        )
    }
}
ksp {
    arg(<span class="hljs-string">"room.schemaLocation"</span>, <span class="hljs-string">"<span class="hljs-variable">$projectDir</span>/schemas"</span>)
    arg(<span class="hljs-string">"room.incremental"</span>, <span class="hljs-string">"true"</span>)
    arg(<span class="hljs-string">"room.expandProjection"</span>, <span class="hljs-string">"true"</span>)
}

dependencies {
    <span class="hljs-comment">//å…¶ä»–ä¾èµ–ä¸åœ¨æ­¤åˆ—å‡º</span>
    implementation (<span class="hljs-string">"androidx.room:room-runtime:2.6.1"</span>)
    implementation (<span class="hljs-string">"androidx.room:room-ktx:2.6.1"</span> )      <span class="hljs-comment">// coroutine + Flow æ”¯æŒ</span>
    ksp (<span class="hljs-string">"androidx.room:room-compiler:2.6.1"</span>)
}

</code></pre>
<p>libs.version.toml ç›¸å…³ä»£ç å¦‚ä¸‹</p>
<pre><code class="hljs language-kotlin" lang="kotlin">[plugins]
android-application = { id = <span class="hljs-string">"com.android.application"</span>, version = <span class="hljs-string">"8.7.2"</span> }
kotlin-android = { id = <span class="hljs-string">"org.jetbrains.kotlin.android"</span>, version = <span class="hljs-string">"2.0.0"</span> }
kotlin-compose = { id = <span class="hljs-string">"org.jetbrains.kotlin.plugin.compose"</span>, version = <span class="hljs-string">"2.0.0"</span> }
ksp = { id = <span class="hljs-string">"com.google.devtools.ksp"</span> , version = <span class="hljs-string">"2.0.0-1.0.21"</span>}
</code></pre>
<p>æ³¨æ„ï¼šRoomã€kotlinç‰ˆæœ¬ã€kspç‰ˆæœ¬å­˜åœ¨å…¼å®¹æ€§å…³è”ï¼Œå¯å‚ç…§ä¸Šè¿°ä»£ç è®¾ç½®ã€‚</p>
<h3 data-id="heading-17">2ã€åˆ›å»ºå®ä½“ç±»ï¼ˆEntityï¼‰</h3>
<p>åŸºç¡€Daoçš„å†™æ³•ï¼ˆæ³¨æ„13è¡Œçš„å†™æ³•ï¼Œè¿”å›Flowï¼Œæ¨èï¼‰<br/>
<strong>å¸¸ç”¨æ³¨è§£ï¼š</strong></p>
<ul>
<li>@Entityï¼šè¡¨</li>
<li>@PrimaryKeyï¼šä¸»é”®</li>
<li>@ColumnInfo(name = "xxx")ï¼šè‡ªå®šä¹‰åˆ—å</li>
<li>@Ignoreï¼šå¿½ç•¥è¯¥å­—æ®µä¸å­˜æ•°æ®åº“<br/>
<code>data/room/UserEntity.kt</code></li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Entity(
    tableName = <span class="hljs-string">"user"</span>,
    //ç´¢å¼•ï¼Œ æé«˜æŸ¥è¯¢æ€§èƒ½
    indices =
        [
            androidx.room.Index(
                value = [<span class="hljs-string">"email"</span>],
                unique = true
            )

        ]
)</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserEntity</span> (
    <span class="hljs-meta">@PrimaryKey(autoGenerate = true)</span> <span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0</span>,
    <span class="hljs-keyword">val</span> username: String,
    <span class="hljs-keyword">val</span> phoneNum: String,
    <span class="hljs-keyword">val</span> email: String,
    <span class="hljs-keyword">val</span> createTime: <span class="hljs-built_in">Long</span> = System.currentTimeMillis(),
)
</code></pre>
<h3 data-id="heading-18">3ã€åˆ›å»ºDaoæ¥å£ï¼ˆè´Ÿè´£æ“ä½œæ•°æ®åº“ï¼‰</h3>
<p><code>data/room/UserDao.kt</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Dao</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserDao</span> {
    <span class="hljs-comment">//æ’å…¥ï¼Œè¿”å›æ–°æ’å…¥è¡Œçš„idï¼Œè‹¥idç›¸åŒï¼Œåˆ™æ›¿æ¢åŸæ•°æ®</span>
    <span class="hljs-meta">@Insert(onConflict = OnConflictStrategy.REPLACE)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insert</span><span class="hljs-params">(userEntity: <span class="hljs-type">UserEntity</span>)</span></span>: <span class="hljs-built_in">Long</span>

    <span class="hljs-comment">//æ‰¹é‡æ’å…¥</span>
    <span class="hljs-meta">@Insert(onConflict = OnConflictStrategy.REPLACE)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insertAll</span><span class="hljs-params">( userEntity: <span class="hljs-type">List</span>&lt;<span class="hljs-type">UserEntity</span>&gt;)</span></span>

    <span class="hljs-comment">//ä½¿ç”¨Flow æ¥è·å–å¯è§‚å¯Ÿçš„æ•°æ®æµï¼Œå½“è¡¨æ•°æ®å˜æ›´æ—¶è‡ªåŠ¨å‘å°„æ•°æ®</span>
    <span class="hljs-meta">@Query(<span class="hljs-string">"SELECT * FROM user ORDER BY createTime DESC"</span>)</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">observerAll</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;UserEntity&gt;&gt;

    <span class="hljs-comment">//æŸ¥è¯¢</span>
    <span class="hljs-meta">@Query(<span class="hljs-string">"SELECT * FROM user"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">queryAll</span><span class="hljs-params">()</span></span>: List&lt;UserEntity&gt;

    <span class="hljs-comment">//æŸ¥è¯¢æŒ‡å®šç”¨æˆ·</span>
    <span class="hljs-meta">@Query(<span class="hljs-string">"SELECT * FROM user WHERE username = :username"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">queryByUsername</span><span class="hljs-params">(username: <span class="hljs-type">String</span>)</span></span>: UserEntity?

    <span class="hljs-comment">//æ›´æ–°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨@Queryæ³¨è§£</span>
    <span class="hljs-meta">@Update</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">update</span><span class="hljs-params">(userEntity: <span class="hljs-type">UserEntity</span>)</span></span>

    <span class="hljs-comment">//åˆ é™¤ï¼Œæ¨èç”¨Queryæ³¨è§£ä»£æ›¿@Deleteæ³¨è§£</span>
    <span class="hljs-meta">@Query(<span class="hljs-string">"DELETE FROM user"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">deleteAll</span><span class="hljs-params">()</span></span>

    <span class="hljs-comment">//åˆ é™¤æŒ‡å®šç”¨æˆ·</span>
    <span class="hljs-meta">@Query(<span class="hljs-string">"DELETE FROM user WHERE email = :email"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">deleteByEmail</span><span class="hljs-params">(email: <span class="hljs-type">String</span>)</span></span>
    
    <span class="hljs-comment">// ä½¿ç”¨ @Delete æ³¨è§£çš„æ–¹å¼</span>
   <span class="hljs-meta">@Delete</span>
   <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">delete</span><span class="hljs-params">(userEntity: <span class="hljs-type">UserEntity</span>)</span></span>
}
</code></pre>
<h3 data-id="heading-19">3ã€åˆ›å»ºæ•°æ®åº“ç±»</h3>
<p><code>data/room/AppDataBase.kt</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * AppDatabase æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œç»§æ‰¿è‡ª RoomDatabaseï¼Œç”¨äºå®šä¹‰åº”ç”¨ç¨‹åºçš„æ•°æ®åº“ã€‚
 * å®ƒåŒ…å«äº†æ•°æ®åº“çš„é…ç½®ä¿¡æ¯ä»¥åŠè·å– DAO å®ä¾‹çš„æ–¹æ³•ã€‚
 */</span>
<span class="hljs-meta">@Database(entities = [UserEntity::class], version = 1, exportSchema = true)</span>
<span class="hljs-meta">@TypeConverters(Converters::class)</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppDatabase</span> : <span class="hljs-type">RoomDatabase</span>() {
    <span class="hljs-comment">/**
     * è·å– UserDao å®ä¾‹çš„æŠ½è±¡æ–¹æ³•ã€‚
     *
     * <span class="hljs-doctag">@return</span> UserDao è¿”å›ç”¨æˆ·æ•°æ®è®¿é—®å¯¹è±¡å®ä¾‹
     */</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">userDao</span><span class="hljs-params">()</span></span>: UserDao

    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-comment">/**
         * æ•°æ®åº“å•ä¾‹å®ä¾‹ï¼Œä½¿ç”¨ volatile å…³é”®å­—ä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å¯è§æ€§ã€‚
         */</span>
        <span class="hljs-meta">@Volatile</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> INSTANCE: AppDatabase? = <span class="hljs-literal">null</span>

        <span class="hljs-comment">/**
         * è·å– AppDatabase å•ä¾‹å®ä¾‹çš„å‡½æ•°ã€‚
         * ä½¿ç”¨åŒé‡æ£€æŸ¥é”å®šæ¨¡å¼ç¡®ä¿çº¿ç¨‹å®‰å…¨å’Œé«˜æ€§èƒ½ã€‚
         *
         * <span class="hljs-doctag">@param</span> context ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç”¨äºæ„å»ºæ•°æ®åº“
         * <span class="hljs-doctag">@return</span> AppDatabase è¿”å›æ•°æ®åº“å®ä¾‹
         */</span>
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getInstance</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: AppDatabase =
            INSTANCE ?: synchronized(<span class="hljs-keyword">this</span>) {
                INSTANCE ?: buildDatabase(context).also { INSTANCE = it }
            }

        <span class="hljs-comment">/**
         * æ„å»º AppDatabase å®ä¾‹çš„ç§æœ‰å‡½æ•°ã€‚
         * é…ç½®æ•°æ®åº“åç§°å¹¶åˆ›å»ºæ•°æ®åº“æ„å»ºå™¨ã€‚
         *
         * <span class="hljs-doctag">@param</span> context ä¸Šä¸‹æ–‡å¯¹è±¡
         * <span class="hljs-doctag">@return</span> AppDatabase è¿”å›æ–°æ„å»ºçš„æ•°æ®åº“å®ä¾‹
         */</span>
        <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">buildDatabase</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: AppDatabase {
            <span class="hljs-keyword">return</span> Room.databaseBuilder(context.applicationContext, AppDatabase::<span class="hljs-keyword">class</span>.java, <span class="hljs-string">"app_db"</span>)
                <span class="hljs-comment">// æ·»åŠ  Migration,å‡çº§ä½¿ç”¨ã€‚</span>
                <span class="hljs-comment">//.addMigrations(MIGRATION_1_2)</span>
                .build()
        }
    }
}
</code></pre>
<h3 data-id="heading-20">4ã€é¢å¤–çš„æ•°æ®è½¬æ¢ï¼ˆéå¿…é€‰ï¼‰</h3>
<p><code>data/room/Converters.kt</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * æ—¶é—´è½¬æ¢å™¨ç±»ï¼Œç”¨äºåœ¨æ•°æ®åº“å®ä½“å’ŒJava Dateå¯¹è±¡ä¹‹é—´è¿›è¡Œè½¬æ¢
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Converters</span> {
    <span class="hljs-comment">/**
     * å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºDateå¯¹è±¡
     *
     * <span class="hljs-doctag">@param</span> value æ—¶é—´æˆ³å€¼ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½
     * <span class="hljs-doctag">@return</span> è¿”å›å¯¹åº”çš„Dateå¯¹è±¡ï¼Œå¦‚æœè¾“å…¥ä¸ºç©ºåˆ™è¿”å›å½“å‰æ—¶é—´çš„Dateå¯¹è±¡
     */</span>
    <span class="hljs-meta">@TypeConverter</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fromTimestamp</span><span class="hljs-params">(value: <span class="hljs-type">Long</span>?)</span></span>: Date = value?.let { Date(it) } ?: Date()

    <span class="hljs-comment">/**
     * å°†Dateå¯¹è±¡è½¬æ¢ä¸ºæ—¶é—´æˆ³
     *
     * <span class="hljs-doctag">@param</span> date è¦è½¬æ¢çš„Dateå¯¹è±¡
     * <span class="hljs-doctag">@return</span> è¿”å›å¯¹åº”çš„æ—¶é—´æˆ³ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½
     */</span>
    <span class="hljs-meta">@TypeConverter</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dateToTimestamp</span><span class="hljs-params">(date: <span class="hljs-type">Date</span>)</span></span>: <span class="hljs-built_in">Long</span> = date.time
}
</code></pre>
<p>å®Œæˆè¿™å‡ æ­¥åï¼Œæˆ‘ä»¬åœ¨Application ä¸­è°ƒç”¨<code>AppDatabase.getInstance(this)</code>åï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ªåä¸ºâ€app_dbâ€œçš„æ•°æ®åº“ï¼Œé‡Œé¢åŒ…å«äº†ä¸€å¼ åä¸ºâ€userâ€œçš„è¡¨</p>
<h3 data-id="heading-21">5ã€å°æŠ€å·§ï¼šå¦‚ä½•æŸ¥çœ‹æ•°æ®åº“</h3>
<p>Android studioï¼šApp Inspection -&gt;Database Inspector</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/509999e65ac84523a50fed1277255b5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-C5a6_5Zub5Y2X5rKz5LiJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765250594&amp;x-signature=YQ%2FrqBnuOSp%2B0bPc8IjyMIyoYJ0%3D" alt="æˆªå±2025-11-27 ä¸‹åˆ7.37.06.png" loading="lazy"/></p>
<h3 data-id="heading-22">6ã€Roomç‰ˆæœ¬å‡çº§</h3>
<p>éšç€ä¸šåŠ¡çš„å˜åŒ–ï¼Œéœ€è¦å¢åŠ å­—æ®µï¼Œé‚£å°±æ¶‰åŠåˆ°æ•°æ®åº“ç‰ˆæœ¬å‡çº§ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>Aã€è°ƒæ•´å»ºè¡¨è¯­å¥,å¢åŠ åˆ—â€œageâ€ é»˜è®¤ä¸º0</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Entity</span>(
    tableName = <span class="hljs-string">"user"</span>,
    indices =
        [
            androidx.room.<span class="hljs-built_in">Index</span>(
                value = [<span class="hljs-string">"email"</span>],
                unique = true
            )

        ]
)
data class UserEntity (
    <span class="hljs-variable">@PrimaryKey</span>(autoGenerate = true) val <span class="hljs-attribute">id</span>: Long = <span class="hljs-number">0</span>,
    val <span class="hljs-attribute">username</span>: String,
    val <span class="hljs-attribute">phoneNum</span>: String,
    val <span class="hljs-attribute">email</span>: String,
    val <span class="hljs-attribute">age</span>: Int = <span class="hljs-number">0</span>,
    val <span class="hljs-attribute">createTime</span>: Long = System.<span class="hljs-built_in">currentTimeMillis</span>(),
)
</code></pre>
<ul>
<li>Bã€å¢åŠ æ•°æ®åº“ç‰ˆæœ¬å·ï¼ˆåŸç‰ˆæœ¬å·X+1ï¼‰</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Database(entities = [UserEntity::class], version = 2, exportSchema = true)</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppDatabase</span> : <span class="hljs-type">RoomDatabase</span>() {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<ul>
<li>Cã€æ·»åŠ è¿ç§»ç­–ç•¥ï¼ˆMIGRATION_X_(X+1)ï¼‰</li>
</ul>

<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> MIGRATION_1_2 = <span class="hljs-keyword">object</span> : Migration(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">migrate</span><span class="hljs-params">(db: <span class="hljs-type">SupportSQLiteDatabase</span>)</span></span> {
        <span class="hljs-comment">// æ‰§è¡Œæ•°æ®åº“ç»“æ„å˜æ›´SQL, å¢åŠ åä¸ºageåˆ—</span>
        db.execSQL(<span class="hljs-string">"ALTER TABLE user ADD COLUMN age INTEGER NOT NULL DEFAULT 0"</span>)
    }
}
</code></pre>
<ul>
<li>Dã€æ•°æ®åº“æ„å»ºæ—¶æ·»åŠ è¿ç§»ç­–ç•¥ï¼Œä½¿ç”¨X_ï¼ˆX+1ï¼‰å‡çº§ç­–ç•¥</li>
</ul>

<pre><code class="hljs language-css" lang="css">Room<span class="hljs-selector-class">.databaseBuilder</span>(context, AppDatabase::class.java, <span class="hljs-string">"app_db"</span>)
    .<span class="hljs-built_in">addMigrations</span>(MIGRATION_1_2)
    .<span class="hljs-built_in">build</span>()
</code></pre>
<p>å‡çº§è¸©å‘ç‚¹ï¼š</p>
<ul>
<li>1ã€æ–°å¢åˆ—æ—¶éœ€è¦æ³¨æ„ï¼š<code>Roomé»˜è®¤æ•°æ®åº“åˆ—å¿…é¡»æ˜¯NOT NULLï¼Œé™¤éæ˜¾ç¤ºå£°æ˜å¯ç©º</code>ã€‚<br/>
Intç±»å‹å¿…é¡»åœ¨æ–°å¢åˆ—æ—¶åŒæ—¶å£°æ˜ <code>NOT NULL DEFAULT 0</code>ï¼Œå¦åˆ™å·²æœ‰æ—§æ•°æ®é‚£ä¸€è¡Œ age å°±æ˜¯ NULLï¼Œä¼šå’Œæ–°çš„å®ä½“ç±»å®šä¹‰ï¼ˆageä¸ä¸ºç©ºï¼‰å†²çª â†’ Room ç›´æ¥æŠ› IllegalStateException æ‹’ç»å¯åŠ¨ã€‚</li>
<li>2<code>â€œDEFAULT 0â€</code> ç¡®ä¿åœ¨è¿ç§»è¿‡ç¨‹ä¸­ï¼Œå·²å­˜åœ¨çš„è®°å½•ä¼šè·å¾—é»˜è®¤å€¼0.</li>
<li>3ã€Android Sqliteå…¶å®ä¸æ”¯æŒåˆ é™¤åˆ—ã€ä¿®æ”¹åˆ—ç­‰æ“ä½œï¼Œå…·ä½“æƒ…å†µè¯·å‚ç…§ä¸‹è¡¨</li>
</ul>



































<table><thead><tr><th>æ“ä½œ</th><th>SQL å…³é”®å†™æ³•</th><th>æ˜¯å¦è¦é‡å»ºè¡¨</th></tr></thead><tbody><tr><td>æ–°å¢å¯ç©ºåˆ—</td><td>ADD COLUMN xxx TYPE</td><td>å¦</td></tr><tr><td>æ–°å¢éç©ºåˆ—</td><td>ADD COLUMN xxx TYPE NOT NULL DEFAULT xxx</td><td>å¦ï¼ˆæœ€å¸¸ç”¨ï¼‰</td></tr><tr><td>æ–°å¢å”¯ä¸€ç´¢å¼•</td><td>CREATE UNIQUE INDEX index_xxx ON table(col)</td><td>å¦</td></tr><tr><td>åˆ é™¤åˆ— / æ”¹åˆ—å±æ€§</td><td>å¿…é¡»é‡å»ºè¡¨ï¼ˆCREATE â†’ INSERT â†’ DROP â†’ RENAMEï¼‰</td><td>æ˜¯</td></tr><tr><td>æ”¹è¡¨å</td><td>å¿…é¡»é‡å»ºè¡¨</td><td>æ˜¯</td></tr></tbody></table>
<ul>
<li>4ã€æˆ‘çš„å°å»ºè®®ï¼š
<code>å°½é‡ä¸è¦ä¿®æ”¹åˆ é™¤å·²æœ‰çš„åˆ—ï¼Œå¯æ–°å¢åˆ—ï¼ŒåºŸå¼ƒåŸæœ‰çš„åˆ—å³å¯ï¼Œé™ä½å‡çº§é£é™©ã€‚</code></li>
</ul>
<h2 data-id="heading-23">å››ã€Room + Flowï¼šå¤æ‚å…³ç³»å‹æ•°æ®çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-24">1. Repository å±‚ç»Ÿä¸€æš´éœ²Flowï¼ˆç»“åˆç½‘ç»œè·å–+ æœ¬åœ°åŠ è½½ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å°è£…æ•°æ®æºï¼Œå¯ä½¿ç”¨æ•°æ®åº“åŠç½‘ç»œæ•°æ®æº
 *
 * <span class="hljs-doctag">@param</span> api ç½‘ç»œAPIæœåŠ¡æ¥å£
 * <span class="hljs-doctag">@param</span> userDao æœ¬åœ°æ•°æ®åº“DAOæ¥å£
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepository</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> api: ApiService, <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> userDao: UserDao) {
    <span class="hljs-comment">/**
     * ç”¨æˆ·æ•°æ®æµï¼Œç»“åˆç½‘ç»œå’Œæœ¬åœ°æ•°æ®æº
     * é¦–å…ˆåŠ è½½æœ¬åœ°æ•°æ®ï¼Œç„¶åè¯·æ±‚ç½‘ç»œæ•°æ®æ›´æ–°æœ¬åœ°æ•°æ®åº“ï¼Œæœ€åç›‘å¬æ•°æ®åº“å˜åŒ–å®æ—¶æ›´æ–°
     * æš´éœ²ç»™Viewmodelçš„ç»Ÿä¸€æ•°æ®æº
     */</span>
    <span class="hljs-keyword">val</span> userFlow: Flow&lt;Resource&lt;List&lt;UserEntity&gt;&gt;&gt; = flow {
        emit(Resource.Loading())

        <span class="hljs-keyword">val</span> localData = userDao.queryAll()
        <span class="hljs-keyword">if</span> (localData.isNotEmpty()) {
            emit(Resource.Success(localData))
        }

        <span class="hljs-comment">// è¯·æ±‚ç½‘ç»œæ•°æ®å¹¶åŒæ­¥åˆ°æœ¬åœ°æ•°æ®åº“</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> netData = api.getUsers()
            <span class="hljs-keyword">val</span> entity = netData.map {
                UserEntity(
                    id = <span class="hljs-keyword">if</span> (it.id &gt; <span class="hljs-number">0</span>) it.id.toLong() <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>, <span class="hljs-comment">// 0 æ—¶è®©æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆ</span>
                    username = it.username,
                    phoneNum = it.phone,
                    email = it.email
                )
            }
            userDao.insertAll(entity)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-keyword">val</span> cached = userDao.queryAll()
            emit(Resource.Error(e.message ?: <span class="hljs-string">"ç½‘ç»œè¯·æ±‚å¤±è´¥"</span>, <span class="hljs-keyword">data</span> = cached))
        }
        
        <span class="hljs-comment">// ç›‘å¬æ•°æ®åº“å˜åŒ–ï¼Œè‡ªåŠ¨åˆ·æ–°UI</span>
        emitAll(
            userDao.observerAll()
                .map&lt;List&lt;UserEntity&gt;, Resource&lt;List&lt;UserEntity&gt;&gt;&gt; { list -&gt; Resource.Success(list) }
                .<span class="hljs-keyword">catch</span> { t -&gt; emit(Resource.Error(t.message ?: <span class="hljs-string">"æ•°æ®åº“è¯»å–å¤±è´¥"</span>)) }
        )


    }   
        .flowOn(Dispatchers.IO)


    <span class="hljs-comment">/**
     * æ·»åŠ ç”¨æˆ·åˆ°æ•°æ®åº“
     *
     * <span class="hljs-doctag">@param</span> userEntity è¦æ·»åŠ çš„ç”¨æˆ·å®ä½“
     * <span class="hljs-doctag">@return</span> æ’å…¥è®°å½•çš„ID
     */</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addUser</span><span class="hljs-params">(userEntity: <span class="hljs-type">UserEntity</span>)</span></span>: <span class="hljs-built_in">Long</span> = userDao.insert(userEntity)

    <span class="hljs-comment">/**
     * æ›´æ–°æ•°æ®åº“ä¸­çš„ç”¨æˆ·ä¿¡æ¯
     *
     * <span class="hljs-doctag">@param</span> userEntity åŒ…å«æ›´æ–°ä¿¡æ¯çš„ç”¨æˆ·å®ä½“
     */</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateUser</span><span class="hljs-params">(userEntity: <span class="hljs-type">UserEntity</span>)</span></span> = userDao.update(userEntity)

    <span class="hljs-comment">/**
     * æ ¹æ®é‚®ç®±åˆ é™¤ç”¨æˆ·
     *
     * <span class="hljs-doctag">@param</span> email è¦åˆ é™¤ç”¨æˆ·çš„é‚®ç®±åœ°å€
     */</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(email: <span class="hljs-type">String</span>)</span></span> = userDao.deleteByEmail(email)

    <span class="hljs-comment">/**
     * æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·
     *
     * <span class="hljs-doctag">@param</span> userName è¦æŸ¥è¯¢çš„ç”¨æˆ·å
     * <span class="hljs-doctag">@return</span> æŸ¥è¯¢åˆ°çš„ç”¨æˆ·å®ä½“ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›null
     */</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserByEmail</span><span class="hljs-params">(userName: <span class="hljs-type">String</span>)</span></span>: UserEntity? = userDao.queryByUsername(userName)

    <span class="hljs-comment">/**
     * åˆ é™¤æ‰€æœ‰ç”¨æˆ·æ•°æ®
     */</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">deleteAll</span><span class="hljs-params">()</span></span> = userDao.deleteAll()
}
</code></pre>
<h3 data-id="heading-25">2.å°è£…ResourceçŠ¶æ€ï¼ˆéå¿…é¡»ï¼Œä½†å»ºè®®ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¯†å°ç±» Resource ç”¨äºè¡¨ç¤ºæ•°æ®åŠ è½½çŠ¶æ€çš„é€šç”¨åŒ…è£…ç±»
 *
 */</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Resource</span>&lt;<span class="hljs-type">T</span>&gt;(
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: T? = <span class="hljs-literal">null</span>,
    <span class="hljs-keyword">val</span>  message: String? = <span class="hljs-literal">null</span>
) {
    <span class="hljs-comment">/**
     * Loading å­ç±»è¡¨ç¤ºæ•°æ®æ­£åœ¨åŠ è½½çŠ¶æ€
     *
     * <span class="hljs-doctag">@param</span> T æ³›å‹å‚æ•°ï¼Œè¡¨ç¤ºåŒ…è£…çš„æ•°æ®ç±»å‹
     * <span class="hljs-doctag">@param</span> data åŠ è½½è¿‡ç¨‹ä¸­å¯èƒ½å­˜åœ¨çš„æ—§æ•°æ®ï¼Œå¯ä¸ºç©º
     */</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Loading</span>&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-keyword">data</span>: T? = <span class="hljs-literal">null</span>) : Resource&lt;T&gt;(<span class="hljs-keyword">data</span>)

    <span class="hljs-comment">/**
     * Success å­ç±»è¡¨ç¤ºæ•°æ®åŠ è½½æˆåŠŸçŠ¶æ€
     *
     * <span class="hljs-doctag">@param</span> T æ³›å‹å‚æ•°ï¼Œè¡¨ç¤ºåŒ…è£…çš„æ•°æ®ç±»å‹
     * <span class="hljs-doctag">@param</span> data æˆåŠŸåŠ è½½çš„æ•°æ®ï¼Œä¸å¯ä¸ºç©º
     */</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span>&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-keyword">data</span>: T?) : Resource&lt;T&gt;(<span class="hljs-keyword">data</span>)

    <span class="hljs-comment">/**
     * Error å­ç±»è¡¨ç¤ºæ•°æ®åŠ è½½å¤±è´¥çŠ¶æ€
     *
     * <span class="hljs-doctag">@param</span> T æ³›å‹å‚æ•°ï¼Œè¡¨ç¤ºåŒ…è£…çš„æ•°æ®ç±»å‹
     * <span class="hljs-doctag">@param</span> message é”™è¯¯ä¿¡æ¯ï¼Œä¸å¯ä¸ºç©º
     * <span class="hljs-doctag">@param</span> data åŠ è½½å¤±è´¥æ—¶å¯èƒ½å­˜åœ¨çš„éƒ¨åˆ†æ•°æ®ï¼Œå¯ä¸ºç©º
     */</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Error</span>&lt;<span class="hljs-type">T</span>&gt;(message: String, <span class="hljs-keyword">data</span>: T? = <span class="hljs-literal">null</span>) : Resource&lt;T&gt;(<span class="hljs-keyword">data</span>, message)
}
</code></pre>
<h3 data-id="heading-26">3.Viewmodelè°ƒç”¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * RoomViewModelç±»ç”¨äºç®¡ç†ç”¨æˆ·æ•°æ®çš„UIçŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘
 * <span class="hljs-doctag">@param</span> repository ç”¨æˆ·æ•°æ®ä»“åº“ï¼Œç”¨äºæ‰§è¡Œæ•°æ®æ“ä½œ
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RoomViewModel</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> repository: UserRepository): ViewModel() {
    <span class="hljs-comment">/**
     * ç”¨æˆ·UIçŠ¶æ€çš„æµï¼Œå°†ä»“åº“ä¸­çš„ç”¨æˆ·æ•°æ®æµè½¬æ¢ä¸ºUIçŠ¶æ€æµ
     * æ ¹æ®æ•°æ®åŠ è½½çŠ¶æ€æ˜¾ç¤ºä¸åŒçš„UIçŠ¶æ€ï¼ˆåŠ è½½ä¸­ã€æˆåŠŸã€é”™è¯¯ï¼‰
     */</span>
    <span class="hljs-keyword">val</span> users: StateFlow&lt;UserUiState&gt; = repository.userFlow.map { resource -&gt;
        <span class="hljs-keyword">when</span> (resource) {
            <span class="hljs-keyword">is</span> Resource.Success -&gt; UserUiState(userList = resource.<span class="hljs-keyword">data</span>)
            <span class="hljs-keyword">is</span> Resource.Error -&gt; UserUiState(userList = resource.<span class="hljs-keyword">data</span>, error = resource.message)
            <span class="hljs-keyword">is</span> Resource.Loading -&gt; UserUiState(isLoading = <span class="hljs-literal">true</span>, userList = resource.<span class="hljs-keyword">data</span>)
        }
    }.stateIn(
        scope = viewModelScope,
        started = SharingStarted.WhileSubscribed(<span class="hljs-number">5000</span>),
        initialValue = UserUiState(isLoading = <span class="hljs-literal">true</span>)
    )

    <span class="hljs-comment">/**
     * åˆ·æ–°ç”¨æˆ·æ•°æ®
     * é‡æ–°ä»ä»“åº“è·å–æœ€æ–°çš„ç”¨æˆ·æ•°æ®æµ
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">refresh</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            repository.userFlow.first()
        }
    }

    <span class="hljs-comment">/**
     * æ·»åŠ æ–°ç”¨æˆ·
     * <span class="hljs-doctag">@param</span> userEntity è¦æ·»åŠ çš„ç”¨æˆ·å®ä½“å¯¹è±¡
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addUser</span><span class="hljs-params">(userEntity: <span class="hljs-type">UserEntity</span>)</span></span> {
        viewModelScope.launch {
            repository.addUser(userEntity)
        }
    }

    <span class="hljs-comment">/**
     * åˆ é™¤æŒ‡å®šé‚®ç®±çš„ç”¨æˆ·
     * <span class="hljs-doctag">@param</span> email è¦åˆ é™¤ç”¨æˆ·çš„é‚®ç®±åœ°å€
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(email: <span class="hljs-type">String</span>)</span></span> {
        viewModelScope.launch {
            repository.deleteUser( email)
        }
    }

    <span class="hljs-comment">/**
     * æ¸…ç©ºæ‰€æœ‰ç”¨æˆ·æ•°æ®
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearUser</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            repository.deleteAll()
        }
    }

}

<span class="hljs-comment">/**
 * ç”¨æˆ·ç•Œé¢çŠ¶æ€æ•°æ®ç±»
 * <span class="hljs-doctag">@param</span> isLoading æ˜¯å¦æ­£åœ¨åŠ è½½æ•°æ®
 * <span class="hljs-doctag">@param</span> userList ç”¨æˆ·åˆ—è¡¨æ•°æ®
 * <span class="hljs-doctag">@param</span> error é”™è¯¯ä¿¡æ¯
 */</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserUiState</span>(
    <span class="hljs-keyword">val</span> isLoading: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>,
    <span class="hljs-keyword">val</span> userList: List&lt;UserEntity&gt;? = <span class="hljs-literal">null</span>,
    <span class="hljs-keyword">val</span> error: String? = <span class="hljs-literal">null</span>
)
</code></pre>
<p>ç›¸å…³çŸ¥è¯†ç‚¹è®²è§£ï¼š</p>
<blockquote>
<p><code>repository.userFlow</code> æ˜¯ç”¨æˆ·æ•°æ®æµï¼Œç”± UserRepositoryå‘å°„ã€‚å…¶ä¸­<code>map</code>å°†ä¸Šæ¸¸æ•°æ®æµï¼ˆResource ç±»å‹çš„å¯¹è±¡ï¼‰è½¬åŒ–æˆæˆ‘ä»¬UIçŠ¶æ€æµï¼ˆUserUiStateï¼‰ã€‚ä½¿ç”¨stateInå°†å…¶è½¬æ¢ä¸ºStateFlowä»¥ä¾¿åœ¨ViewModelä¸­ä½¿ç”¨ã€‚UIç•Œé¢é€šè¿‡æ¥æ”¶UIçŠ¶æ€æµè‡ªåŠ¨åˆ·æ–°ç•Œé¢ã€‚</p>
</blockquote>
<p>stateIn ä¸‰ä¸ªå‚æ•°çš„ä½¿ç”¨è¯´æ˜ï¼š</p>
<ul>
<li>
<ol>
<li>scope = viewModelScope<br/>
ä½œç”¨åŸŸå‚æ•°ï¼šæŒ‡å®šçŠ¶æ€æµçš„ç”Ÿå‘½å‘¨æœŸèŒƒå›´<br/>
åŠŸèƒ½ï¼šå½“ viewModelScope å–æ¶ˆæ—¶ï¼ŒçŠ¶æ€æµä¹Ÿä¼šè¢«å–æ¶ˆ<br/>
æ„ä¹‰ï¼šç¡®ä¿ users çŠ¶æ€æµä¸ RoomViewModel çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œé¿å…å†…å­˜æ³„æ¼</li>
</ol>
</li>
<li>
<ol start="2">
<li>started = SharingStarted.WhileSubscribed(5000)<br/>
å¯åŠ¨ç­–ç•¥å‚æ•°ï¼šæ§åˆ¶æµçš„å…±äº«å’Œè®¢é˜…è¡Œä¸º<br/>
åŠŸèƒ½ï¼šå½“æœ‰è®¢é˜…è€…æ—¶å¼€å§‹æ”¶é›†æ•°æ®ï¼Œæ— è®¢é˜…è€…æ—¶å»¶è¿Ÿ5000æ¯«ç§’åœæ­¢æ”¶é›†<br/>
æ„ä¹‰ï¼šä¼˜åŒ–æ€§èƒ½ï¼Œåœ¨æ— UIè®¢é˜…æ—¶æš‚åœæ•°æ®æ”¶é›†ï¼Œæœ‰æ–°è®¢é˜…æ—¶é‡æ–°å¼€å§‹</li>
</ol>
</li>
<li>
<ol start="3">
<li>initialValue = UserUiState(isLoading = true)<br/>
åˆå§‹å€¼å‚æ•°ï¼šè®¾ç½®çŠ¶æ€æµçš„åˆå§‹çŠ¶æ€<br/>
åŠŸèƒ½ï¼šæµåˆ›å»ºæ—¶ç«‹å³å‘å°„çš„é»˜è®¤å€¼<br/>
æ„ä¹‰ï¼šç¡®ä¿UIåœ¨é¦–æ¬¡è®¢é˜…æ—¶èƒ½ç«‹å³è·å¾—åŠ è½½çŠ¶æ€ï¼Œæä¾›è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ
è¿™ä¸‰ä¸ªå‚æ•°å…±åŒç¡®ä¿äº†çŠ¶æ€æµçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-27">4.Activityè°ƒç”¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">observeData</span><span class="hljs-params">()</span></span> {
    lifecycleScope.launch {
        viewModel.users.collect { state -&gt;
            <span class="hljs-keyword">when</span>  {
                state.isLoading &amp;&amp; state.userList == <span class="hljs-literal">null</span> -&gt; {
                    <span class="hljs-comment">//åŠ è½½ä¸­</span>
                }
                <span class="hljs-keyword">else</span> -&gt; {
                <span class="hljs-comment">//è®¾ç½®Recycleviewæ•°æ®æº</span>
                    state.userList?.let { adapter.setData(it) }

                    state.error?.let {
                        Toast.makeText(<span class="hljs-keyword">this</span><span class="hljs-symbol">@RoomActivity</span>, <span class="hljs-string">"ç½‘ç»œé”™è¯¯"</span>, Toast.LENGTH_LONG).show()
                    }
                }
            }
        }
    }

}
</code></pre>
<h3 data-id="heading-28">5.Room è‡ªåŠ¨æ›´æ–°çš„ 6 ä¸ªå…³é”®ç‚¹ï¼ˆå¿…é¡»å…¨éƒ¨å‘½ä¸­æ‰è§¦å‘ï¼‰</h3>








































<table><thead><tr><th>å…³é”®ç‚¹</th><th>å…·ä½“å®ç°</th><th>ç¼ºä¸€ä¸å¯çš„åŸå› </th></tr></thead><tbody><tr><td>1. è¿”å› Flow / LiveData / Flowable</td><td>åªæœ‰è¿™ä¸‰ç§è¿”å›å€¼ Room æ‰ä¼šå¼€å¯è‡ªåŠ¨åˆ·æ–°æœºåˆ¶</td><td>æ™®é€š suspend å‡½æ•°ä¸ä¼šç›‘å¬</td></tr><tr><td>2. @Queryï¼ˆä¸èƒ½æ˜¯ @Insert/@Update/@Deleteï¼‰</td><td>åªæœ‰ @Query ä¼šè¢« Room è§£æå‡ºå®ƒç›‘å¬äº†å“ªäº›è¡¨</td><td>Room è¦çŸ¥é“ä½ å…³å¿ƒå“ªäº›è¡¨</td></tr><tr><td>3. æ•°æ®åº“çœŸçš„å‘ç”Ÿå˜æ›´</td><td>INSERTã€UPDATEã€DELETEã€REPLACEã€äº‹åŠ¡æ‰¹é‡æ“ä½œç­‰</td><td>åªè¯»æŸ¥è¯¢ä¸ä¼šè§¦å‘</td></tr><tr><td>4. å˜æ›´çš„è¡¨åœ¨ @Query é‡Œå‡ºç°è¿‡</td><td>Room ä¼šè§£æä½ çš„ SQLï¼Œæå– FROM/JOIN/UPDATE ç­‰æ¶‰åŠçš„è¡¨å</td><td>è¡¨æ²¡å‡ºç°åœ¨ SQL é‡Œï¼ŒRoom è®¤ä¸ºä½ ä¸å…³å¿ƒ</td></tr><tr><td>5. äº‹åŠ¡å·²ç»æäº¤ï¼ˆcommitï¼‰</td><td>è§¦å‘å™¨åªåœ¨äº‹åŠ¡çœŸæ­£æäº¤åæ‰æ‰§è¡Œ</td><td>æœªæäº¤çš„äº‹åŠ¡ä¸ç®—å˜æ›´</td></tr><tr><td>6. åŒä¸€ä¸ª Database å®ä¾‹</td><td>å¤šè¿›ç¨‹ä¸‹éœ€è¦å¯ç”¨ multi-instance invalidationï¼ˆAndroid 9+ï¼‰æ‰è¡Œ</td><td>ä¸åŒè¿›ç¨‹é»˜è®¤äº’ä¸æ„ŸçŸ¥</td></tr></tbody></table>
<h3 data-id="heading-29">æ€»ç»“ï¼šRoom è‡ªåŠ¨æ›´æ–°çš„æ ¸å¿ƒä¸€å¥è¯</h3>
<blockquote>
<p>Room åœ¨å»ºåº“æ—¶é»˜é»˜åœ°ä¸ºæ¯ä¸€ä¸ªè¡¨åˆ›å»ºäº† INSERT/UPDATE/DELETE è§¦å‘å™¨ï¼Œ è§¦å‘å™¨é€šçŸ¥ InvalidationTracker â†’ å¤±æ•ˆå“ªäº› @Query â†’ é‡æ–°æ‰§è¡Œå¹¶å‘å°„åˆ° Flow/LiveDataã€‚</p>
</blockquote>
<p>è¿™å¥—æœºåˆ¶æ¯” DataStore çš„ FileObserver æ›´ç²¾å‡†ã€æ›´é«˜æ•ˆï¼ˆæ¯«ç§’çº§ã€æ— è½®è¯¢ï¼‰ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ™®éè®¤ä¸ºâ€œRoom + Flowâ€ æ˜¯ç›®å‰ Android æœ€ä¼˜é›…çš„æœ¬åœ°æ•°æ®åº“è‡ªåŠ¨åˆ·æ–°æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-30">å››ã€Roomå’ŒProto DataStoreçš„é€‰æ‹©</h2>
<p>Google å®˜æ–¹ç»™å‡ºçš„â€œçº¢çº¿â€å»ºè®®ï¼š</p>



































<table><thead><tr><th>æ•°æ®ç±»å‹</th><th>æ¨èå­˜å‚¨æ–¹å¼</th><th>åŸå› </th></tr></thead><tbody><tr><td>ç®€å•é…ç½®ã€å¼€å…³ã€Tokenã€ä¸»é¢˜ç­‰</td><td>DataStoreï¼ˆé¦–é€‰ï¼‰</td><td>è½»é‡ã€ç±»å‹å®‰å…¨ã€åç¨‹æ”¯æŒ</td></tr><tr><td>ä»»ä½• Listã€å¤æ‚å¯¹è±¡ &gt; 50 æ¡</td><td>Room</td><td>æ”¯æŒåˆ†é¡µã€å±€éƒ¨æ›´æ–°ã€ç´¢å¼•</td></tr><tr><td>ç”¨æˆ·ä¿¡æ¯ã€è®¾ç½®é¡¹ï¼ˆå•å¯¹è±¡ï¼‰</td><td>DataStoreï¼ˆå¯ä»¥ï¼‰</td><td>ä½†å»ºè®®å­—æ®µä¸è¦è¶…è¿‡ 30 ä¸ª</td></tr><tr><td>ä»»ä½•éœ€è¦åˆ†é¡µåŠ è½½çš„æ•°æ®</td><td>Room + Paging 3</td><td>DataStore å®Œå…¨æ— æ³•å®ç°</td></tr><tr><td>ç¦»çº¿ç¼“å­˜ã€å•†å“åˆ—è¡¨ã€è®¢å•è®°å½•</td><td>Room</td><td>å¿…é€‰</td></tr></tbody></table>
<h3 data-id="heading-31">ä»€ä¹ˆæ—¶å€™çœŸçš„å¯ä»¥ç”¨ Proto DataStore å­˜â€œç¨å¤æ‚å¯¹è±¡â€ï¼Ÿ</h3>
<p>å¯ä»¥ï¼Œä½†å¿…é¡»åŒæ—¶æ»¡è¶³ä»¥ä¸‹å…¨éƒ¨æ¡ä»¶ï¼š</p>
<ol>
<li>å¯¹è±¡è¶³å¤Ÿå°ï¼ˆå¼ºçƒˆå»ºè®® &lt; 50KBï¼‰</li>
<li>æ›´æ–°é¢‘ç‡ä½ <strong>&lt; 10 æ¬¡/åˆ†é’Ÿ</strong></li>
<li>æ°¸è¿œä¸ä¼šå˜æˆåˆ—è¡¨ï¼ˆå“ªæ€•ç°åœ¨åªæœ‰ä¸€ä¸ªå­—æ®µï¼Œæœªæ¥å¯èƒ½æ‰©ä¹Ÿåˆ«ç”¨ï¼‰</li>
<li>ä¸éœ€è¦å¯¹å†…éƒ¨å­—æ®µåšæŸ¥è¯¢ã€åˆ†é¡µã€æ’åº</li>
</ol>
<p>æ»¡è¶³ä»¥ä¸Šæ‰å¯ä»¥ç”¨ï¼Œå¦åˆ™ç«‹åˆ»æ”¹ç”¨ Roomã€‚</p>
<h3 data-id="heading-32">æ€»ç»“ä¸€å¥è¯ï¼š</h3>
<blockquote>
<p><strong>DataStore æ˜¯ä¸€ä¸ªâ€œé…ç½®ä¸­å¿ƒâ€ï¼Œä¸æ˜¯â€œæ•°æ®åº“â€ã€‚</strong> æŠŠå®ƒå½“æ•°æ®åº“ç”¨ï¼Œå°±ç›¸å½“äºç”¨ SharedPreferences å­˜ 1000 æ¡ JSON ä¸€æ ·ï¼ˆèƒ½è·‘ï¼Œä½†ä¸€å®šå¡çš„ä½ æ€€ç–‘äººç”Ÿï¼‰ã€‚</p>
</blockquote>
<p>å…¶ä»–ç›¸å…³çš„ç•Œé¢ä¸å†åˆ—å‡ºï¼Œå¦‚éœ€è¦è¯·ä¸‹è½½æºç æŸ¥çœ‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•ç†è§£ Golang ä¸­çš„ Context?]]></title>    <link>https://juejin.cn/post/7578767608631099392</link>    <guid>https://juejin.cn/post/7578767608631099392</guid>    <pubDate>2025-12-02T03:37:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578767608631099392" data-draft-id="7578794217961504808" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•ç†è§£ Golang ä¸­çš„ Context?"/> <meta itemprop="keywords" content="Go"/> <meta itemprop="datePublished" content="2025-12-02T03:37:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å¤§æ‰“å·¥ä»”"/> <meta itemprop="url" content="https://juejin.cn/user/165361397016000"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•ç†è§£ Golang ä¸­çš„ Context?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/165361397016000/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å¤§æ‰“å·¥ä»”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:37:16.000Z" title="Tue Dec 02 2025 03:37:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç†è§£ <code>cancelCtx</code> çš„æºç ï¼Œå…¶å®å°±æ˜¯ç†è§£ Go è¯­è¨€å¦‚ä½•ä¼˜é›…åœ°å¤„ç†<strong>å¹¶å‘æ§åˆ¶</strong>å’Œ<strong>ä¿¡å·å¹¿æ’­</strong>ã€‚</p>
<p>Go çš„ <code>context</code> æºç åœ¨ <code>src/context/context.go</code> ä¸­ï¼Œä»£ç é‡ä¸å¤šï¼ˆä¸åˆ° 600 è¡Œï¼‰ï¼Œä½†è®¾è®¡éå¸¸ç²¾å¦™ã€‚æ ¸å¿ƒé€»è¾‘å¯ä»¥å½’çº³ä¸ºä¸‰ä¸ªå…³é”®è¯ï¼š<strong>æŒ‚è½½ï¼ˆMountï¼‰ã€å¹¿æ’­ï¼ˆBroadcastï¼‰ã€é€’å½’ï¼ˆRecursionï¼‰</strong>ã€‚</p>
<p>æˆ‘ä»¬åˆ†ä¸‰æ­¥æ¥æ‹†è§£ <code>cancelCtx</code> çš„åº•å±‚åŸç†ã€‚</p>
<hr/>
<h3 data-id="heading-0">1 ç¬¬ä¸€æ­¥ï¼šæ•°æ®ç»“æ„ â€”â€” å®ƒæ˜¯æ€ä¹ˆé•¿çš„ï¼Ÿ</h3>
<p><code>cancelCtx</code> æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå®ƒç»§æ‰¿äº†çˆ¶ Contextï¼ŒåŒæ—¶è‡ªå·±ç»´æŠ¤äº†ä¸€å¥—â€œå®¶è°±â€å…³ç³»ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æºç ç®€åŒ–ç‰ˆ</span>
<span class="hljs-keyword">type</span> cancelCtx <span class="hljs-keyword">struct</span> {
    Context             <span class="hljs-comment">// 1. åµŒå…¥çˆ¶ Contextï¼Œä¿è¯èƒ½è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span>
    mu       sync.Mutex <span class="hljs-comment">// 2. äº’æ–¥é”ï¼Œä¿è¯å¹¶å‘å®‰å…¨ï¼ˆä¿æŠ¤ä¸‹é¢çš„å­—æ®µï¼‰</span>
    done     <span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{} <span class="hljs-comment">// 3. æ ¸å¿ƒï¼ç”¨æ¥å‘ä¿¡å·çš„ Channel</span>
    children <span class="hljs-keyword">map</span>[canceler]<span class="hljs-keyword">struct</span>{} <span class="hljs-comment">// 4. å­˜è‡ªå·±çš„â€œå­©å­â€ï¼Œä»¥ä¾¿å–æ¶ˆæ—¶é€šçŸ¥å®ƒä»¬</span>
    err      <span class="hljs-type">error</span>      <span class="hljs-comment">// 5. è®°å½•å–æ¶ˆåŸå› ï¼ˆCanceled è¿˜æ˜¯ DeadlineExceededï¼‰</span>
}
</code></pre>
<ul>
<li><strong><code>done</code></strong>ï¼šè¿™æ˜¯ä¸€ä¸ª <code>chan struct{}</code>ã€‚è¿™åˆ©ç”¨äº† Go çš„ä¸€ä¸ªç‰¹æ€§ï¼š<strong>å½“ä¸€ä¸ª channel è¢« closeï¼ˆå…³é—­ï¼‰æ—¶ï¼Œæ‰€æœ‰ç›‘å¬è¿™ä¸ª channel çš„ goroutine éƒ½ä¼šæ”¶åˆ°ä¿¡å·ï¼ˆè¯»åˆ°é›¶å€¼ï¼‰ã€‚</strong> è¿™å°±æ˜¯å®ƒçš„â€œå¹¿æ’­â€æœºåˆ¶ã€‚</li>
<li><strong><code>children</code></strong>ï¼šè¿™æ˜¯ä¸€ä¸ª Setï¼ˆç”¨ Map å®ç°ï¼‰ã€‚å½“çˆ¶èŠ‚ç‚¹å–æ¶ˆæ—¶ï¼Œå®ƒéœ€è¦éå†è¿™ä¸ª Mapï¼ŒæŠŠæ‰€æœ‰çš„å­èŠ‚ç‚¹ä¹Ÿå¹²æ‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-1">2 ç¬¬äºŒæ­¥ï¼šæŒ‚è½½æœºåˆ¶ â€”â€” å¦‚ä½•ä¸çˆ¶èŠ‚ç‚¹å»ºç«‹è”ç³»ï¼Ÿ</h3>
<p>å½“ä½ è°ƒç”¨ <code>context.WithCancel(parent)</code> æ—¶ï¼Œæ ¸å¿ƒé€»è¾‘åœ¨äºå¦‚ä½•æŠŠè‡ªå·±â€œæŒ‚â€åˆ°çˆ¶èŠ‚ç‚¹çš„ <code>children</code> åˆ—è¡¨é‡Œã€‚</p>
<p>è¿™ä¸»è¦ä¾èµ–äºå†…éƒ¨å‡½æ•° <code>propagateCancel</code>ï¼ˆä¼ æ’­å–æ¶ˆï¼‰ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">WithCancel</span><span class="hljs-params">(parent Context)</span></span> (ctx Context, cancel CancelFunc) {
    c := newCancelCtx(parent) <span class="hljs-comment">// åˆ›å»ºè‡ªå·±</span>
    propagateCancel(parent, &amp;c) <span class="hljs-comment">// ã€å…³é”®ã€‘æŠŠè‡ªå·±æŒ‚åˆ°çˆ¶èŠ‚ç‚¹ä¸Š</span>
    <span class="hljs-keyword">return</span> &amp;c, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> { c.cancel(<span class="hljs-literal">true</span>, Canceled) }
}
</code></pre>
<p><strong><code>propagateCancel</code> çš„é€»è¾‘å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li><strong>åˆ¤æ–­çˆ¶èŠ‚ç‚¹çŠ¶æ€</strong>ï¼šå¦‚æœçˆ¶èŠ‚ç‚¹ <code>parent.Done()</code> å·²ç»æ˜¯ nilï¼ˆæ°¸è¿œä¸ä¼šå–æ¶ˆï¼Œæ¯”å¦‚ <code>Background()</code>ï¼‰ï¼Œé‚£å°±ä¸ç”¨æŒ‚äº†ï¼Œå› ä¸ºçˆ¶äº²æ°¸è¿œä¸æ­»ã€‚å¦‚æœçˆ¶äº²å·²ç»æ­»äº†ï¼Œç›´æ¥æå‰  <code>cancel</code> å¹¶è¿”å›ï¼›</li>
</ol>
<pre><code class="hljs language-go" lang="go">	done := parent.Done()
	<span class="hljs-keyword">if</span> done == <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-comment">// parent is never canceled</span>
	}

	<span class="hljs-keyword">select</span> {
	<span class="hljs-keyword">case</span> &lt;-done:
		<span class="hljs-comment">// parent is already canceled</span>
		child.cancel(<span class="hljs-literal">false</span>, parent.Err(), Cause(parent))
		<span class="hljs-keyword">return</span>
	<span class="hljs-keyword">default</span>:
	}
</code></pre>
<ol start="2">
<li><strong>æŸ¥æ‰¾ç¥–å…ˆ</strong>ï¼šå®ƒä¼šå°è¯•æ‰¾åˆ°æœ€è¿‘çš„ã€ä¹Ÿå°±æ˜¯æ ‡å‡†çš„ <code>*cancelCtx</code> ç±»å‹çš„ç¥–å…ˆã€‚</li>
</ol>
<pre><code class="hljs language-go" lang="go">	<span class="hljs-keyword">if</span> p, ok := parentCancelCtx(parent); ok {
		<span class="hljs-comment">// parent is a *cancelCtx, or derives from one.</span>
		p.mu.Lock()
		<span class="hljs-keyword">if</span> err := p.err.Load(); err != <span class="hljs-literal">nil</span> {
			<span class="hljs-comment">// parent has already been canceled</span>
			child.cancel(<span class="hljs-literal">false</span>, err.(<span class="hljs-type">error</span>), p.cause)
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">if</span> p.children == <span class="hljs-literal">nil</span> {
				p.children = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[canceler]<span class="hljs-keyword">struct</span>{})
			}
			p.children[child] = <span class="hljs-keyword">struct</span>{}{}
		}
		p.mu.Unlock()
		<span class="hljs-keyword">return</span>
	}
</code></pre>
<ol start="3">
<li><strong>åˆ¤æ–­æ˜¯å¦å®ç°äº† <code>afterFuncer</code> æ¥å£</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-go" lang="go">	<span class="hljs-keyword">if</span> a, ok := parent.(afterFuncer); ok {
		<span class="hljs-comment">// parent implements an AfterFunc method.</span>
		c.mu.Lock()
		stop := a.AfterFunc(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
			child.cancel(<span class="hljs-literal">false</span>, parent.Err(), Cause(parent))
		})
		c.Context = stopCtx{
			Context: parent,
			stop:    stop,
		}
		c.mu.Unlock()
		<span class="hljs-keyword">return</span>
	}
</code></pre>
<ol start="4">
<li><strong>æŒ‚è½½</strong>ï¼š</li>
</ol>
<ul>
<li><strong>å¦‚æœæ‰¾åˆ°äº†äº²çˆ¹ï¼ˆGo æ ‡å‡†åº“çš„ Contextï¼‰</strong>ï¼šåŠ é”ï¼ŒæŠŠè‡ªå·±å¡åˆ°çˆ¶äº²çš„ <code>children</code> map é‡Œã€‚</li>
</ul>
<pre><code class="hljs language-go" lang="go">	<span class="hljs-keyword">if</span> a, ok := parent.(afterFuncer); ok {
		<span class="hljs-comment">// parent implements an AfterFunc method.</span>
		c.mu.Lock()
		stop := a.AfterFunc(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
			child.cancel(<span class="hljs-literal">false</span>, parent.Err(), Cause(parent))
		})
		c.Context = stopCtx{
			Context: parent,
			stop:    stop,
		}
		c.mu.Unlock()
		<span class="hljs-keyword">return</span>
	}
</code></pre>
<ul>
<li><strong>å¦‚æœçˆ¶äº²æ˜¯å¤–äººï¼ˆæ¯”å¦‚è‡ªå®šä¹‰çš„ Contextï¼‰</strong>ï¼šæ²¡åŠæ³•ç›´æ¥æ“ä½œå®ƒçš„ mapã€‚äºæ˜¯å¯åŠ¨ä¸€ä¸ª Goroutineï¼Œåœ¨é‚£å‚»å‚»åœ°ç›‘å¬ <code>parent.Done()</code>ã€‚ä¸€æ—¦çˆ¶äº² Done äº†ï¼Œè¿™ä¸ª Goroutine å°±è´Ÿè´£æŠŠè‡ªå·±å¹²æ‰ã€‚</li>
</ul>
<pre><code class="hljs language-go" lang="go">	goroutines.Add(<span class="hljs-number">1</span>)
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">select</span> {
		<span class="hljs-keyword">case</span> &lt;-parent.Done():
			child.cancel(<span class="hljs-literal">false</span>, parent.Err(), Cause(parent))
		<span class="hljs-keyword">case</span> &lt;-child.Done():
		}
	}()
</code></pre>
<hr/>
<h3 data-id="heading-2">3 ç¬¬ä¸‰æ­¥ï¼šå–æ¶ˆæœºåˆ¶ â€”â€” ä¿¡å·æ˜¯å¦‚ä½•ä¼ æ’­çš„ï¼Ÿ</h3>
<p>æºç ä¸­çš„ <code>cancel</code> æ–¹æ³•ï¼ˆç®€åŒ–ç‰ˆé€»è¾‘ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// removeFromParent: æ˜¯å¦éœ€è¦æŠŠè‡ªå·±ä»çˆ¶äº²çš„ map ä¸­ç§»é™¤</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *cancelCtx)</span></span> cancel(removeFromParent <span class="hljs-type">bool</span>, err <span class="hljs-type">error</span>) {
    c.mu.Lock()
    <span class="hljs-keyword">if</span> c.err != <span class="hljs-literal">nil</span> { <span class="hljs-comment">// å¦‚æœå·²ç»å–æ¶ˆè¿‡äº†ï¼Œç›´æ¥è¿”å›</span>
        c.mu.Unlock()
        <span class="hljs-keyword">return</span>
    }
    c.err = err <span class="hljs-comment">// è®°å½•é”™è¯¯åŸå› </span>

    <span class="hljs-comment">// 1. ã€æ ¸å¿ƒåŠ¨ä½œã€‘å…³é—­ channelï¼</span>
    <span class="hljs-comment">// æ­¤æ—¶ï¼Œæ‰€æœ‰ç›‘å¬ &lt;-ctx.Done() çš„åç¨‹éƒ½ä¼šç¬é—´æ”¶åˆ°ä¿¡å·</span>
    <span class="hljs-keyword">if</span> c.done == <span class="hljs-literal">nil</span> {
        c.done = closedchan
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">close</span>(c.done)
    }

    <span class="hljs-comment">// 2. ã€é€’å½’é€šçŸ¥ã€‘éå†æ‰€æœ‰å­©å­ï¼ŒæŒ¨ä¸ªè°ƒç”¨å®ƒä»¬çš„ cancel</span>
    <span class="hljs-keyword">for</span> child := <span class="hljs-keyword">range</span> c.children {
        <span class="hljs-comment">// é€’å½’è°ƒç”¨å­©å­çš„ cancel æ–¹æ³•</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œä¼  falseï¼Œæ„æ€æ˜¯å­©å­ä¸éœ€è¦ä»æˆ‘è¿™é‡Œç§»é™¤ï¼ˆå› ä¸ºæˆ‘è‡ªå·±éƒ½è¦æ²¡äº†ï¼Œå¤§å®¶ä¸€èµ·é”€æ¯ï¼‰</span>
        child.cancel(<span class="hljs-literal">false</span>, err) 
    }
    c.children = <span class="hljs-literal">nil</span> <span class="hljs-comment">// é‡Šæ”¾ mapï¼Œåˆ©ç”¨ GC å›æ”¶å†…å­˜</span>
    c.mu.Unlock()

    <span class="hljs-comment">// 3. ã€æ–­ç»å…³ç³»ã€‘æŠŠè‡ªå·±ä»çˆ¶äº²çš„ map é‡Œåˆ æ‰</span>
    <span class="hljs-comment">// é¿å…çˆ¶äº²ä¸€ç›´æŒæœ‰æˆ‘çš„å¼•ç”¨ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼</span>
    <span class="hljs-keyword">if</span> removeFromParent {
        removeChild(c.Context, c)
    }
}
</code></pre>
<h3 data-id="heading-3">4 æ€»ç»“ï¼šContext çš„ç”Ÿå‘½å‘¨æœŸå›¾è§£</h3>
<p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªè°ƒç”¨é“¾ï¼š<code>CtxA (æ ¹)</code> -&gt; <code>CtxB</code> -&gt; <code>CtxC</code>ã€‚</p>
<ol>
<li>
<p><strong>å»ºç«‹è¿æ¥</strong>ï¼š</p>
<ul>
<li><code>CtxB</code> åˆ›å»ºæ—¶ï¼Œå°†è‡ªå·±æ”¾å…¥ <code>CtxA.children</code>ã€‚</li>
<li><code>CtxC</code> åˆ›å»ºæ—¶ï¼Œå°†è‡ªå·±æ”¾å…¥ <code>CtxB.children</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>è§¦å‘å–æ¶ˆ</strong> (<code>CtxB.cancel()</code> è¢«è°ƒç”¨)ï¼š</p>
<ul>
<li><strong>è‡ªèº«</strong>ï¼š<code>CtxB</code> å…³é—­è‡ªå·±çš„ <code>done</code> channelã€‚æ‰€æœ‰ç›‘å¬ <code>CtxB</code> çš„ä»£ç æ”¶åˆ°åœæ­¢ä¿¡å·ã€‚</li>
<li><strong>å‘ä¸‹ï¼ˆé€’å½’ï¼‰</strong>ï¼š<code>CtxB</code> éå† <code>children</code>ï¼Œæ‰¾åˆ° <code>CtxC</code>ï¼Œè°ƒç”¨ <code>CtxC.cancel()</code>ã€‚äºæ˜¯ <code>CtxC</code> ä¹Ÿå…³é—­ <code>done</code> channelã€‚</li>
<li><strong>å‘ä¸Šï¼ˆæ¸…ç†ï¼‰</strong>ï¼š<code>CtxB</code> è°ƒç”¨ <code>removeChild</code>ï¼Œè®© <code>CtxA</code> æŠŠ <code>CtxB</code> ä» map ä¸­åˆ æ‰ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-4">5 è¡¥å……</h3>
<blockquote>
<p>æˆ‘ä»¬ä¸»åŠ¨è°ƒç”¨ <code>cancel</code> çš„æ—¶å€™ï¼Œ<code>removeFromParent</code> æ˜¯ä¸æ˜¯ä¼  <code>true</code> ï¼Ÿ</p>
</blockquote>
<p><strong>å›ç­”ï¼šæ˜¯çš„</strong></p>
<p>å½“æˆ‘ä»¬æˆ‘ä»¬åœ¨ä¸šåŠ¡ä»£ç ä¸­è°ƒç”¨é‚£ä¸ªç”± <code>context.WithCancel</code>ï¼ˆæˆ– <code>WithTimeout</code>ã€<code>WithDeadline</code>ï¼‰è¿”å›çš„ <code>cancel()</code> å‡½æ•°æ—¶ï¼Œä¼ å…¥ <code>removeFromParent</code> çš„å‚æ•°ç¡®å®æ˜¯ <strong><code>true</code></strong>ã€‚</p>
<p>è¿™ä¸€æ­¥éå¸¸å…³é”®ï¼Œå®ƒæ˜¯é˜²æ­¢ <strong>Context æ ‘å†…å­˜æ³„æ¼</strong> çš„æ ¸å¿ƒæ‰‹æ®µã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æºç éªŒè¯ï¼Œé¡ºä¾¿å¯¹æ¯”ä¸€ä¸‹ä»€ä¹ˆæ—¶å€™ä¼  <code>false</code>ã€‚</p>
<hr/>
<h4 data-id="heading-5">1. è¯æ®ï¼šæºç ä¸­çš„å…¥å£</h4>
<p>å½“ä½ è°ƒç”¨ <code>context.WithCancel</code> æ—¶ï¼Œæºç æ˜¯è¿™æ ·å†™çš„ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// src/context/context.go</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">WithCancel</span><span class="hljs-params">(parent Context)</span></span> (ctx Context, cancel CancelFunc) {
	c := newCancelCtx(parent)
	propagateCancel(parent, &amp;c) <span class="hljs-comment">// æŠŠè‡ªå·±æŒ‚åˆ°çˆ¶äº²èŠ‚ç‚¹</span>
	
	<span class="hljs-comment">// ã€æ³¨æ„çœ‹è¿™é‡Œã€‘</span>
	<span class="hljs-comment">// è¿”å›çš„é—­åŒ…å‡½æ•°ï¼Œç¡¬ç¼–ç äº† true</span>
	<span class="hljs-keyword">return</span> &amp;c, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> { c.cancel(<span class="hljs-literal">true</span>, Canceled) }
}
</code></pre>
<p><strong>è§£æï¼š</strong>
è¿™é‡Œçš„ <code>func() { c.cancel(true, Canceled) }</code> å°±æ˜¯ä½ æ‹¿åˆ°çš„é‚£ä¸ª <code>cancel</code> å‡½æ•°ã€‚
å½“ä½ è°ƒç”¨å®ƒæ—¶ï¼Œä½ å‘Šè¯‰ <code>cancelCtx</code>ï¼šâ€œ<strong>æˆ‘å·²ç»å¹²å®Œæ´»äº†ï¼ˆæˆ–è€…æƒ³ç»ˆæ­¢äº†ï¼‰ï¼Œè¯·æŠŠæˆ‘ä»çˆ¶äº²çš„ <code>children</code> åˆ—è¡¨ä¸­ç§»é™¤ã€‚</strong>â€</p>
<p>å¦‚æœè¿™é‡Œä¸ä¼  <code>true</code>ï¼Œçˆ¶èŠ‚ç‚¹å°±ä¼šä¸€ç›´ä¿ç•™ç€æŒ‡å‘è¿™ä¸ªå­èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œç›´åˆ°çˆ¶èŠ‚ç‚¹è‡ªå·±è¢«å–æ¶ˆã€‚å¦‚æœçˆ¶èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå…¨å±€çš„ <code>Background</code> æˆ–è€…ç”Ÿå‘½å‘¨æœŸå¾ˆé•¿çš„ Contextï¼Œé‚£ä¹ˆè¿™äº›æ—©å·²æ­»æ‰çš„å­èŠ‚ç‚¹å°±ä¼šä¸€ç›´å †ç§¯åœ¨å†…å­˜é‡Œï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p>
<hr/>
<h4 data-id="heading-6">2. å¯¹æ¯”ï¼šä»€ä¹ˆæ—¶å€™ä¼  <code>false</code>ï¼Ÿ</h4>
<p>åœ¨ <code>cancel</code> æ–¹æ³•å†…éƒ¨ï¼Œå½“å®ƒé€’å½’å»å–æ¶ˆè‡ªå·±çš„ <strong>å­èŠ‚ç‚¹</strong> æ—¶ï¼Œä¼ çš„æ˜¯ <code>false</code>ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// src/context/context.go -&gt; cancel æ–¹æ³•å†…éƒ¨</span>

<span class="hljs-comment">// ... å‰é¢æ˜¯å…³é—­ channel çš„é€»è¾‘</span>

<span class="hljs-comment">// éå†æ‰€æœ‰çš„å­©å­</span>
<span class="hljs-keyword">for</span> child := <span class="hljs-keyword">range</span> c.children {
    <span class="hljs-comment">// ã€æ³¨æ„çœ‹è¿™é‡Œã€‘</span>
    <span class="hljs-comment">// çˆ¶äº²å–æ¶ˆå­©å­æ—¶ï¼Œä¼ çš„æ˜¯ false</span>
    child.cancel(<span class="hljs-literal">false</span>, err) 
}
c.children = <span class="hljs-literal">nil</span> <span class="hljs-comment">// çˆ¶äº²ç›´æ¥æ¸…ç©ºæ•´ä¸ª map</span>
c.mu.Unlock()

<span class="hljs-comment">// å¦‚æœ removeFromParent ä¸º trueï¼Œæ‰å»è°ƒç”¨ removeChild</span>
<span class="hljs-keyword">if</span> removeFromParent {
    removeChild(c.Context, c)
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™é‡Œä¼  <code>false</code>ï¼Ÿè¿™æ˜¯ä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–çš„è®¾è®¡ã€‚</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼š</p>
<ol>
<li>çˆ¶èŠ‚ç‚¹å–æ¶ˆäº†ã€‚</li>
<li>çˆ¶èŠ‚ç‚¹éœ€è¦é€šçŸ¥å®ƒä¸‹é¢çš„ 1000 ä¸ªå­èŠ‚ç‚¹ä¹Ÿå–æ¶ˆã€‚</li>
<li>çˆ¶èŠ‚ç‚¹éå†è¿™ 1000 ä¸ªå­èŠ‚ç‚¹ï¼Œè°ƒç”¨å®ƒä»¬çš„ <code>cancel</code>ã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼šçˆ¶èŠ‚ç‚¹åœ¨é€šçŸ¥å®Œæ‰€æœ‰å­©å­åï¼Œç´§æ¥ç€æœ‰ä¸€è¡Œ <code>c.children = nil</code>ï¼Œå®ƒä¼šç›´æ¥æŠŠæ•´ä¸ªâ€œå­©å­åå†Œâ€æ’•ç¢ä¸¢è¿›åƒåœ¾æ¡¶ã€‚</li>
</ol>
<p>å¦‚æœæ­¤æ—¶ç»™å­èŠ‚ç‚¹ä¼  <code>true</code>ï¼Œé‚£ä¹ˆè¿™ 1000 ä¸ªå­èŠ‚ç‚¹æ¯ä¸€ä¸ªéƒ½ä¼šå›å¤´å»æŠ¢çˆ¶èŠ‚ç‚¹çš„é”ï¼ˆ<code>c.Context</code>ï¼‰ï¼Œè¯•å›¾ä»çˆ¶èŠ‚ç‚¹çš„ map ä¸­åˆ é™¤è‡ªå·±ã€‚
ä½†åœ¨çˆ¶èŠ‚ç‚¹çœ‹æ¥ï¼šâ€œ<strong>ä½ ä»¬ä¸ç”¨ä¸€ä¸ªä¸ªæ¥è¾èŒäº†ï¼Œåæ­£æ•´ä¸ªéƒ¨é—¨æˆ‘éƒ½è¦è£æ‰ï¼Œåå•æˆ‘å·²ç»å‡†å¤‡é”€æ¯äº†ã€‚</strong>â€</p>
<p>æ‰€ä»¥ï¼Œä¼  <code>false</code> é¿å…äº†æˆç™¾ä¸Šåƒæ¬¡æ— æ„ä¹‰çš„é”ç«äº‰å’Œ Map åˆ é™¤æ“ä½œã€‚</p>
<p><strong>æ€»ç»“ï¼š</strong></p>
<ul>
<li><strong>ä¸»åŠ¨è°ƒç”¨ï¼ˆå¤–éƒ¨è§¦å‘ï¼‰</strong>ï¼š<code>removeFromParent = true</code>ã€‚å› ä¸ºåªæœ‰è¿™ä¸€ä¸ªèŠ‚ç‚¹è¦èµ°ï¼Œå¿…é¡»ç²¾å‡†åœ°ä»çˆ¶èŠ‚ç‚¹çš„åå•é‡Œåˆ æ‰ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚</li>
<li><strong>çº§è”å–æ¶ˆï¼ˆå†…éƒ¨é€’å½’ï¼‰</strong>ï¼š<code>removeFromParent = false</code>ã€‚å› ä¸ºçˆ¶èŠ‚ç‚¹éšåä¼šç›´æ¥æ¸…ç©ºæ•´ä¸ªåå•ï¼Œå­èŠ‚ç‚¹ä¸éœ€è¦è‡ªå·±å»æ³¨é”€ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äºŒã€Kotlinæ•°ç»„ï¼ˆArrayï¼‰]]></title>    <link>https://juejin.cn/post/7578780780027199497</link>    <guid>https://juejin.cn/post/7578780780027199497</guid>    <pubDate>2025-12-02T03:36:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578780780027199497" data-draft-id="7578732288516620339" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äºŒã€Kotlinæ•°ç»„ï¼ˆArrayï¼‰"/> <meta itemprop="keywords" content="Android,APP"/> <meta itemprop="datePublished" content="2025-12-02T03:36:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Haha_bj"/> <meta itemprop="url" content="https://juejin.cn/user/2612027844214647"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äºŒã€Kotlinæ•°ç»„ï¼ˆArrayï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612027844214647/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Haha_bj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:36:03.000Z" title="Tue Dec 02 2025 03:36:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ•°ç»„æ˜¯ä¸€ç§åˆå§‹åŒ–æ—¶æŒ‡å®šå®¹å™¨å¤§å°ï¼Œä¸å¯ä»¥åŠ¨æ€è°ƒæ•´å…¶å¤§å°çš„å®¹å™¨ã€‚å…ƒç´ æŒ‰é¡ºåºå­˜å‚¨åœ¨ä¸€ä¸²è¿ç»­çš„å†…å­˜æ®µä¸Š</p>
<h2 data-id="heading-0">ä¸€ã€æ•°ç»„çš„åˆ›å»º</h2>
<p><code>1ã€arrayOfåˆ›å»ºæ•°ç»„</code>
åˆ›å»ºä¸€ä¸ªæ•°ç»„å¹¶ä¼ é€’å…ƒç´ å€¼ç»™å®ƒ,é›†åˆä¸­çš„å…ƒç´ å¯ä»¥æ˜¯ä»»æ„ç±»å‹</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span>  array = arrayOf(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>)
<span class="hljs-comment">/// å…ƒç´ å¯ä»¥æ˜¯ä»»æ„ç±»å‹</span>
<span class="hljs-keyword">var</span> array2 = arrayOf(<span class="hljs-number">1</span>,<span class="hljs-literal">true</span>,<span class="hljs-string">"2"</span>)

<span class="hljs-keyword">var</span> array3: Array&lt;<span class="hljs-built_in">Int</span>&gt; =  arrayOf(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
<span class="hljs-keyword">var</span> array4: Array&lt;Any&gt; = arrayOf(<span class="hljs-number">1</span>,<span class="hljs-literal">true</span>,<span class="hljs-string">"2"</span>)
</code></pre>
<p><code>2ã€arrayOfNullsåˆ›å»ºæ•°ç»„</code>
åˆ›å»ºä¸€ä¸ªæŒ‡å®šå¤§å°çš„ã€æ‰€æœ‰å…ƒç´ éƒ½ä¸ºç©ºçš„æ•°ç»„ï¼Œä½†å¿…é¡»æŒ‡å®šé›†åˆä¸­çš„å…ƒç´ ç±»å‹</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæŒ‡å®šå¤§å°çš„ï¼Œæ‰€æœ‰å…ƒç´ éƒ½ä¸ºç©ºçš„æ•°ç»„</span>
<span class="hljs-keyword">var</span> arrayOfNUlls = arrayOfNulls&lt;String&gt;(<span class="hljs-number">5</span>)
arrayOfNUlls[<span class="hljs-number">0</span>] = <span class="hljs-string">"dd"</span>
arrayOfNUlls[<span class="hljs-number">1</span>] = <span class="hljs-string">"33"</span>
</code></pre>
<p><code>3ã€åŠ¨æ€åˆ›å»ºæ•°ç»„ï¼ˆä¸€èˆ¬ç”¨ä¸åˆ°ï¼‰</code>ç”¨æ¥å—æ•°ç»„å¤§å°ä»¥åŠä¸€ä¸ªæ–¹æ³•å‚æ•°çš„ Array æ„é€ æ–¹æ³•ï¼Œç”¨ä½œå‚æ•°çš„æ–¹æ³•èƒ½å¤Ÿè¿”å›ç»™å®šç´¢å¼•çš„æ¯ä¸ªå…ƒç´ åˆå§‹å€¼:</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Array&lt;String&gt; åˆå§‹åŒ–ä¸º["0â€ï¼Œâ€œ1â€ï¼Œâ€œ4"ï¼Œ"9â€ï¼Œ"16"</span>
<span class="hljs-selector-tag">var</span> array = <span class="hljs-built_in">Array</span>(<span class="hljs-number">5</span>){
    it -&gt; (it * it)<span class="hljs-selector-class">.toString</span>()
}
</code></pre>
<h2 data-id="heading-1">äºŒã€åŸç”Ÿç±»å‹æ•°ç»„</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aad2eb07b4ce42eeba83d71831c7e184~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFoYV9iag==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251362&amp;x-signature=Kl7Aonx1gKtt7QhF2Hvplvn9YVU%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-comment">/// å­—èŠ‚æ•°ç»„</span>
<span class="hljs-keyword">var</span> bytes = ByteArray(size = <span class="hljs-number">5</span>)
bytes[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>

<span class="hljs-comment">/// IntArray</span>
<span class="hljs-keyword">var</span> ints = IntArray(size = <span class="hljs-number">5</span>)
ints[<span class="hljs-number">0</span>] = <span class="hljs-number">2</span>

<span class="hljs-comment">/// æ³¨æ„è¿™é‡Œitæ˜¯å®ƒç´¢å¼•ä¸‹æ ‡å€¼ï¼Œæ‰€ä»¥è¿™æ˜¯åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º5çš„IntArray[0ï¼Œ2ï¼Œ4ï¼Œ6ï¼Œ8]</span>
<span class="hljs-keyword">var</span> intarray = IntArray(size = <span class="hljs-number">5</span>){it * <span class="hljs-number">2</span>}
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€æ•°ç»„éå†</h2>
<p><code>1ã€forå¾ªç¯--å…ƒç´ éå†</code></p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">var</span> a = arrayOf(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)
<span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> a){
    println(item)
}
</code></pre>
<p><code>2ã€forå¾ªç¯--ä¸‹æ ‡éå†</code></p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">var</span> a = arrayOf(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)
<span class="hljs-keyword">for</span> (index <span class="hljs-keyword">in</span> a.indices){
    println(index.toString() + <span class="hljs-string">"-&gt;"</span> + a[index])

    <span class="hljs-comment">/**
     * 0-&gt;1
     * 1-&gt;3
     * 2-&gt;3
     * 3-&gt;4
     * 4-&gt;5
     */</span>
}
</code></pre>
<p><code>3ã€forå¾ªç¯--éå†å…ƒç´ (å¸¦ç´¢å¼•)</code></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">a</span> = <span class="hljs-built_in">arrayOf</span>(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)
for ((index, item ) in <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.withIndex</span>()){
    <span class="hljs-built_in">println</span>("$index -&gt; $item")

    <span class="hljs-comment">/**
     * 0 -&gt; 1
     * 1 -&gt; 3
     * 2 -&gt; 3
     * 3 -&gt; 4
     * 4 -&gt; 5
     */</span>
}
</code></pre>
<p><code>4ã€forEachéå†æ•°ç»„</code></p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">var</span> a = arrayOf(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)
a.forEach { it
    println(it) <span class="hljs-comment">// itæŒ‡çš„æ˜¯å…ƒç´  1 3 3 4 5</span>
}
</code></pre>
<p><code>5ã€forEachå¢å¼ºç‰ˆ</code></p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">var</span> a = arrayOf(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)
a.forEachIndexed { index, i -&gt;
    println(<span class="hljs-string">"<span class="hljs-variable">$index</span> -&gt; <span class="hljs-variable">$i</span>"</span>)
    <span class="hljs-comment">/**
     * 0 -&gt; 1
     * 1 -&gt; 3
     * 2 -&gt; 3
     * 3 -&gt; 4
     * 4 -&gt; 5
     */</span>
}
</code></pre>
<h2 data-id="heading-3">å››ã€æ•°ç»„ç¿»è½¬</h2>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">a</span> = arrayOf(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)
<span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.reverse</span>()
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL ä»å…¥é—¨åˆ°åˆ åº“è·‘è·¯ï¼Œä¿å§†çº§æ•™ç¨‹ï¼]]></title>    <link>https://juejin.cn/post/7578803751609319474</link>    <guid>https://juejin.cn/post/7578803751609319474</guid>    <pubDate>2025-12-02T03:36:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578803751609319474" data-draft-id="7578732288516669491" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL ä»å…¥é—¨åˆ°åˆ åº“è·‘è·¯ï¼Œä¿å§†çº§æ•™ç¨‹ï¼"/> <meta itemprop="keywords" content="æ•°æ®åº“,MySQL,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-02T03:36:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜é±¼çš®"/> <meta itemprop="url" content="https://juejin.cn/user/2444938365386621"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL ä»å…¥é—¨åˆ°åˆ åº“è·‘è·¯ï¼Œä¿å§†çº§æ•™ç¨‹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2444938365386621/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜é±¼çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:36:28.000Z" title="Tue Dec 02 2025 03:36:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å°é˜¿å·´ï¼Œåˆšå…¥è¡Œçš„ç¨‹åºå‘˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/292d9b1940494e1584e8e8e919443ef9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=ltqR24ewc254aOzFaOvBuoQZp9s%3D" alt="" loading="lazy"/></p>
<p>è¿™å¤©ï¼Œä½ æ¥åˆ°ä¸€ä¸ªç§æ´»ï¼šå¸®å­¦æ ¡åšä¸ªå­¦ç”Ÿç®¡ç†ç³»ç»Ÿï¼Œè¦èƒ½ç®¡ç†å­¦ç”Ÿä¿¡æ¯ã€è®°å½•æˆç»©ã€ç»Ÿè®¡æ•°æ®ã€‚</p>
<p>ä½ ä¸€å¬ï¼Œè¿™ä¸ç®€å•å—ï¼Ÿç”¨ Java å†™ä¸ªç¨‹åºï¼ŒæŠŠæ•°æ®å­˜åˆ° Map é‡Œå°±æå®šäº†ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">StudentManagementSystem</span>Â {
Â  Â <span class="hljs-comment">// ä½¿ç”¨ Map å­˜å‚¨å­¦ç”Ÿä¿¡æ¯ï¼Œkey ä¸ºå­¦å·ï¼Œvalue ä¸ºå­¦ç”Ÿä¿¡æ¯å­—ç¬¦ä¸²</span>
Â  Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">Integer</span>,Â <span class="hljs-title class_">String</span>&gt;Â studentMapÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">HashMap</span>&lt;&gt;();
Â  Â <span class="hljs-comment">// æ·»åŠ å­¦ç”Ÿ</span>
Â  Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">addStudent</span>(<span class="hljs-params">intÂ studentNo,Â <span class="hljs-built_in">String</span>Â name,Â doubleÂ score,Â intÂ classId</span>) {
Â  Â  Â  Â <span class="hljs-title class_">String</span>Â studentInfoÂ =Â nameÂ +Â <span class="hljs-string">","</span>Â +Â scoreÂ +Â <span class="hljs-string">","</span>Â +Â classId;
Â  Â  Â  Â studentMap.<span class="hljs-title function_">put</span>(studentNo,Â studentInfo);
Â  }
Â  Â <span class="hljs-comment">// æŸ¥è¯¢å­¦ç”Ÿ</span>
Â  Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">String</span>Â <span class="hljs-title function_">getStudent</span>(<span class="hljs-params">intÂ studentNo</span>) {
Â  Â  Â  Â <span class="hljs-keyword">return</span>Â studentMap.<span class="hljs-title function_">get</span>(studentNo);
Â  }
Â  Â <span class="hljs-comment">// æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿ</span>
Â  Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">listAllStudents</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">Map</span>.<span class="hljs-property">Entry</span>&lt;<span class="hljs-title class_">Integer</span>,Â <span class="hljs-title class_">String</span>&gt;Â entryÂ :Â studentMap.<span class="hljs-title function_">entrySet</span>()) {
Â  Â  Â  Â  Â  Â <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å­¦å·ï¼š"</span>Â +Â entry.<span class="hljs-title function_">getKey</span>()Â +
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"ï¼Œä¿¡æ¯ï¼š"</span>Â +Â entry.<span class="hljs-title function_">getValue</span>());
Â  Â  Â  }
Â  }
}
</code></pre>
<p>ç»“æœä¸€å‘¨åï¼Œç”²æ–¹æŒ‡ç€ä½ çš„é¼»å­éª‚é“ï¼šç‹—é˜¿å·´ï¼Œæˆ‘å½•å…¥çš„ 500 ä¸ªå­¦ç”Ÿä¿¡æ¯æ€ä¹ˆå…¨æ²¡äº†ï¼Ÿï¼</p>
<p>ä½ ä¸€æŸ¥ï¼ŒåŸæ¥æ˜¨æ™šæœåŠ¡å™¨é‡å¯äº†ï¼Œå¯¼è‡´å†…å­˜é‡Œçš„æ•°æ®å…¨éƒ¨ä¸¢å¤±ï¼</p>
<p>ä½ æ±—æµæµƒèƒŒäº†ï¼šçœ‹æ¥æˆ‘å¾—æŠŠæ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šâ€¦â€¦</p>
<p>äºæ˜¯ä½ è¿å¤œæ”¹ä»£ç ï¼ŒæŠŠæ•°æ®å­˜åˆ°äº†æ–‡æœ¬æ–‡ä»¶é‡Œï¼Œè¿™ä¸‹æ•°æ®å°±ä¸ä¼šä¸¢å¤±äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8aea5c5d0c264d1c9965051377eceb37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=LpSM6BbFfy3dCko%2FPXD%2FkIMq2%2FU%3D" alt="" loading="lazy"/></p>
<p>ä½†æ¥ä¸‹æ¥ï¼Œç”²æ–¹æå‡ºäº†å„ç§ä¸åŒçš„æŸ¥è¯¢æ•°æ®éœ€æ±‚ï¼Œæ¯ä¸ªéœ€æ±‚ä½ éƒ½å¾—å†™ä¸€å †ä»£ç é€»è¾‘ï¼Œè®©ä½ è¶Šæ¥è¶Šå¤´å¤§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45d4b74385f64eaaa52ad5597753e618~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=HnxwHDrDMyJgVjXaP5R0HhTJ4BI%3D" alt="" loading="lazy"/></p>
<p>äºæ˜¯ä½ æ‰¾åˆ°å·ç§° â€œåç«¯ä¹‹ç‹—â€ çš„é±¼çš®æ±‚åŠ©ï¼šæœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•ç®¡ç†æ•°æ®å•Šï¼Ÿ</p>
<p>é±¼çš®ç¬‘äº†ç¬‘ï¼šå½“ç„¶è¦ç”¨æ•°æ®åº“å•¦ï¼</p>
<p>ä½ ä¸€è„¸æ‡µï¼šæ•°æ®åº“ï¼Ÿé‚£æ˜¯å•¥ï¼Ÿ</p>
<p>â­ï¸ æ¨èè§‚çœ‹æœ¬æ–‡å¯¹åº”è§†é¢‘ç‰ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbilibili.com%2Fvideo%2FBV1iJSLBbEyD" target="_blank" title="https://bilibili.com/video/BV1iJSLBbEyD" ref="nofollow noopener noreferrer">bilibili.com/video/BV1iJâ€¦</a></p>
<h2 data-id="heading-0">ç¬¬ä¸€é˜¶æ®µï¼šè®¤è¯†æ•°æ®åº“</h2>
<p>é±¼çš®ï¼šæ•°æ®åº“å°±åƒä¸€ä¸ªè¶…çº§ Excel è¡¨æ ¼ï¼Œå¯ä»¥å­˜å‚¨ç®¡ç†æµ·é‡æ•°æ®ã€å¿«é€Ÿçµæ´»åœ°æŸ¥è¯¢å’Œç­›é€‰æ•°æ®ã€åœ¨å¤šä¸ªæœåŠ¡å™¨é—´å…±äº«æ•°æ®ã€å¹¶ä¸”èƒ½å¤Ÿç²¾ç¡®æ§åˆ¶æ•°æ®çš„è¯»å†™æƒé™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ef05207f18c4fcf96931b3703aae6be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=g31rNwZUWy57Crgi7%2FINf0SJ59k%3D" alt="" loading="lazy"/></p>
<p>ä½ æç„¶å¤§æ‚Ÿï¼šå•Šï¼Œæ‰€ä»¥æˆ‘åº”è¯¥ç”¨æ•°æ®åº“æ¥ç®¡ç†å­¦ç”Ÿä¿¡æ¯ã€‚ğŸ¤¡</p>
<p>é±¼çš®ï¼šæ²¡é”™ï¼Œç»å¤§å¤šæ•°é¡¹ç›®çš„æ•°æ®éƒ½å­˜åœ¨æ•°æ®åº“é‡Œï¼Œå› æ­¤æ•°æ®åº“æ˜¯åç«¯ç¨‹åºå‘˜çš„å¿…å¤‡æŠ€èƒ½ã€‚</p>
<p>æ•°æ®åº“ä¸»è¦åˆ† 2 å¤§ç±»ï¼š</p>
<p>1ï¼‰å…³ç³»å‹æ•°æ®åº“ï¼Œæ¯”å¦‚ MySQLã€Oracleã€PostgreSQLï¼Œé€‚åˆå­˜å‚¨ç›¸äº’ä¹‹é—´æœ‰å…³è”çš„æ•°æ®ï¼Œæ¯”å¦‚å­¦ç”Ÿå’Œç­çº§ã€è®¢å•å’Œå•†å“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/652d4579995b49b9bb0901425fd5c89d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=8rJSMlRd2067vg1xLPXTukg9ASI%3D" alt="" loading="lazy"/></p>
<p>2ï¼‰éå…³ç³»å‹æ•°æ®åº“ï¼Œæ¯”å¦‚ Redisï¼ˆä¸»è¦ç”¨äºç¼“å­˜å’Œé«˜é€Ÿè¯»å†™ï¼‰ã€MongoDBï¼ˆæ–‡æ¡£å‹æ•°æ®åº“ï¼‰ï¼Œå®ƒä»¬åœ¨æ•°æ®ç»“æ„å’Œä½¿ç”¨åœºæ™¯ä¸Šæ›´çµæ´»ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b5a952152104c9c93f10d649641f90e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=umliZE6jujIY%2BJtz2%2FmH%2F9weK1Q%3D" alt="" loading="lazy"/></p>
<p>ä½ ï¼šè¿™ä¹ˆå¤šæ•°æ®åº“ï¼Œæˆ‘è¯¥å­¦å“ªä¸ªå‘¢ï¼Ÿ</p>
<p>é±¼çš®ï¼š<strong>å»ºè®®æ–°æ‰‹ä» MySQL å¼€å§‹</strong>ï¼Œå› ä¸ºå®ƒæ˜¯ä¸»æµçš„ã€å®¹æ˜“å…¥é—¨çš„ã€å¼€æºçš„å…³ç³»å‹æ•°æ®åº“ã€‚</p>
<p>ä½ ï¼šé‚£è¿˜ç­‰ä»€ä¹ˆï¼ŒMySQLï¼Œå¯åŠ¨ï¼</p>
<p>é±¼çš®ï¼šåˆ«æ€¥ï¼Œåœ¨å­¦ä¹‹å‰ï¼Œå¾—å…ˆäº†è§£å‡ ä¸ªæ•°æ®åº“çš„åŸºæœ¬æ¦‚å¿µã€‚</p>
<p>1ï¼‰æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ï¼šé¡¾åæ€ä¹‰å°±æ˜¯ç”¨æ¥ç®¡ç†æ•°æ®åº“çš„ç³»ç»Ÿï¼Œæ¯”å¦‚ MySQLã€‚å®ƒæŠŠæ•°æ®å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šï¼Œæ–­ç”µä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</p>
<p>2ï¼‰æ•°æ®åº“ï¼šä¸€ä¸ª MySQL ç³»ç»Ÿå¯ä»¥ç®¡ç†å¤šä¸ªæ•°æ®åº“ï¼Œæ¯”å¦‚æ¯ä¸ªé¡¹ç›®ä¸€ä¸ªåº“ï¼ˆå­¦ç”Ÿç³»ç»Ÿä¸€ä¸ªåº“ã€è®¢å•ç³»ç»Ÿä¸€ä¸ªåº“ï¼‰ï¼Œäº’ä¸å¹²æ‰°ã€‚</p>
<p>3ï¼‰è¡¨ï¼šä¸€ä¸ªæ•°æ®åº“å¯ä»¥æœ‰å¤šå¼ æ•°æ®è¡¨ï¼Œç”¨æ¥å­˜å‚¨æŸä¸€ç±»æ•°æ®ã€‚</p>
<p>4ï¼‰è®°å½•ï¼šè¡¨ç”±ä¸€è¡Œè¡Œè®°å½•ç»„æˆï¼Œæ¯ä¸€è¡Œå°±æ˜¯ä¸€æ¡æ•°æ®</p>
<p>5ï¼‰å­—æ®µï¼šæ¯ä¸€åˆ—å¯¹åº”ä¸€ä¸ªå­—æ®µï¼Œå…·æœ‰åç§°å’Œç±»å‹ã€‚æ¯”å¦‚å§“åå­—æ®µæ˜¯æ–‡æœ¬ç±»å‹ã€å¹´é¾„å­—æ®µæ˜¯æ•°å­—ç±»å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7981b681f6c147d8b18d076edaceda72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=1h%2B9835Gq%2Bk8R2O%2FtgXbZNf72IY%3D" alt="" loading="lazy"/></p>
<p>6ï¼‰å…³è”</p>
<p>è¿™æ˜¯å…³ç³»å‹æ•°æ®åº“çš„æ ¸å¿ƒï¼Œè¡¨å’Œè¡¨ä¹‹é—´æ˜¯æœ‰è”ç³»çš„ï¼Œä¸»è¦æœ‰ 3 ç§å…³ç³»ã€‚</p>
<p>1 å¯¹ 1ï¼šæ¯”å¦‚å­¦ç”Ÿè¡¨å’Œå­¦ç”Ÿæ¡£æ¡ˆè¡¨ï¼Œä¸€ä¸ªå­¦ç”Ÿå¯¹åº”ä¸€ä»½æ¡£æ¡ˆ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49e876c2f991463bbac77197fcff55f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=4w6HKjGto7ks89kTGXpikZoHSlM%3D" alt="" loading="lazy"/></p>
<p>1 å¯¹å¤šï¼šæ¯”å¦‚ç­çº§è¡¨å’Œå­¦ç”Ÿè¡¨ï¼Œä¸€ä¸ªç­çº§æœ‰å¤šä¸ªå­¦ç”Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44763965c1124123bc0ef427d339a2ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=rplTkPxVD4%2FAlJRCHotr7T0%2Bd9k%3D" alt="" loading="lazy"/></p>
<p>å¤šå¯¹å¤šï¼šæ¯”å¦‚å­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨ï¼Œä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰å¤šé—¨è¯¾ï¼Œä¸€é—¨è¯¾ä¹Ÿå¯ä»¥è¢«å¤šä¸ªå­¦ç”Ÿé€‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6d9c4548bdc42f29f96eb32a3c9415c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=vguqvhJa%2FOOPEtphDzmRDt%2BcAgU%3D" alt="" loading="lazy"/></p>
<p>è¿™äº›è¡¨å’Œè¡¨ä¹‹é—´çš„å…³è”å½¢æˆäº†å®Œæ•´çš„ä¸šåŠ¡ç³»ç»Ÿã€‚</p>
<p>ä½ æƒ³äº†æƒ³ï¼šå¯¹å“¦ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘å¯ä»¥æ ¹æ®å­¦ç”Ÿå…³è”æŸ¥è¯¢åˆ°æ‰€å±çš„ç­çº§å’Œé€‰ä¿®çš„è¯¾ç¨‹ã€‚</p>
<p>é‚£æ€ä¹ˆæ“ä½œæ•°æ®åº“å‘¢ï¼Ÿ</p>
<p>é±¼çš®ï¼šè¿™å°±è¦ç”¨åˆ° SQL äº†ã€‚</p>
<p>SQL æ˜¯ä¸“é—¨ç”¨æ¥æ“ä½œæ•°æ®åº“çš„ <strong>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€</strong>ï¼ˆStructured Query Languageï¼‰ã€‚</p>
<p>ä½ å¯ä»¥ç”¨ SQL å®ç°å„ç§æŸ¥è¯¢ï¼Œæ¯”å¦‚ï¼š</p>
<p>1ï¼‰æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿï¼š<code>SELECT * FROM student;</code></p>
<p>2ï¼‰åªæŸ¥è¯¢å±äºæŸä¸ªç­çº§çš„å­¦ç”Ÿï¼š<code>SELECT * FROM student WHERE class_id = 1;</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9ae46348fb74083a6c850700205c538~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=zhq7Sp6Ozm8KXEAI%2BISi%2B3Pd7mQ%3D" alt="" loading="lazy"/></p>
<p>3ï¼‰åˆ†ç»„ç»Ÿè®¡æ¯ä¸ªç­çº§ä¸­æ‰€æœ‰å­¦ç”Ÿçš„å¹³å‡æˆç»©ï¼š<code>SELECT class_id, AVG(score) FROM student GROUP BY class_id;</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca00747ea3ff4adab4e3ae002e4a293b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=QjgwO3MBea9PJD2yibkZ0wDwHC4%3D" alt="" loading="lazy"/></p>
<p>4ï¼‰è¿˜å¯ä»¥åŒæ—¶æŸ¥è¯¢å­¦ç”Ÿè¡¨å’Œç­çº§è¡¨ï¼Œå¹¶æŠŠç»“æœå…³è”åœ¨ä¸€èµ·ï¼š<code>SELECT s.name, c.class_name FROM student s JOIN class c ON s.class_id = c.id;</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cd735302f724562a57010e906731910~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=juPD8fN6r6gYmmhxZsa%2Bx4KH84g%3D" alt="" loading="lazy"/></p>
<p>æ­¤å¤–ï¼Œä¸åŒçš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆæ¯”å¦‚ MySQLã€Oracleã€SQL Serverï¼‰æœ‰è‡ªå·±çš„ â€œæ–¹è¨€â€ï¼Œæ“ä½œè¿™äº›æ•°æ®åº“çš„ SQL ä¼šæœ‰ä¸€ç‚¹ç‚¹å°å·®åˆ«ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cac81bbbe174950bec56bf9b21186d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=E9uLkao44AAPB3pzZVTFknmbwrg%3D" alt="" loading="lazy"/></p>
<p>ä½ ï¼šå¤©å‘ï¼Œç›¸å½“äºæˆ‘è¦å¤šå­¦ä¸€é—¨è¯­è¨€ï¼Œè€Œä¸”è¿˜è¦å­¦æ–¹è¨€ï¼</p>
<p>é±¼çš®ï¼šåˆ«æ‹…å¿ƒï¼ŒSQL çš„æ ¸å¿ƒè¯­æ³•éƒ½æ˜¯é€šç”¨çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55420b860ef747a48ddac01bdf3aacb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=Hsd4U%2Bi9%2BMx6%2Fpv84QOg22TeZlA%3D" alt="" loading="lazy"/></p>
<p>è€Œä¸”ä½ ç°åœ¨åªéœ€è¦çŸ¥é“ SQL æ˜¯ç”¨æ¥æ“ä½œæ•°æ®åº“çš„å°±å¤Ÿäº†ï¼Œ</p>
<p>æœ‰æ—¶é—´å†åˆ°æˆ‘å¼€å‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fsqlmother.yupi.icu%2F" target="_blank" title="https://sqlmother.yupi.icu/" ref="nofollow noopener noreferrer">å…è´¹ SQL å­¦ä¹ ç½‘ç«™</a> è¾¹ç»ƒè¾¹å­¦ï¼Œè€Œä¸”åç»­æˆ‘è¿˜ä¼šå‡ºè§†é¢‘ä¸“é—¨è®² SQL å“¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea3a3b55ff58420597f6a75d10854283~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=uJ3Vkkmr5WqwLhcITL8oIrdvDhk%3D" alt="" loading="lazy"/></p>
<p>ä½ ï¼šå…³æ³¨äº†å…³æ³¨äº†~</p>
<p>é±¼çš®ï¼šé‚£æ¥ä¸‹æ¥å’±ä»¬å°±å¼€å§‹å®æˆ˜å­¦ä¹ å§ï¼Œå…ˆæŠŠ MySQL è£…ä¸Šå¹¶ä¸”æ“ä½œä¸€æ³¢ã€‚</p>
<h2 data-id="heading-1">ç¬¬äºŒé˜¶æ®µï¼šå®æˆ˜åº”ç”¨</h2>
<h3 data-id="heading-2">åŸºç¡€æ“ä½œ</h3>
<p>æœºæ™ºå¦‚ä½ ï¼Œç›´æ¥æ‰“å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.mysql.com%2Fdownloads%2Fmysql%2F" target="_blank" title="https://dev.mysql.com/downloads/mysql/" ref="nofollow noopener noreferrer">å®˜ç½‘</a> ä¸‹è½½äº† MySQL æ•°æ®åº“ï¼Œå¹¶ä¸”æˆåŠŸå®‰è£…è¿è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a817af0fb6ab465a91466e8d3aa2e5c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=onj4IUaIUCdU7Sac6%2FgZnuCI5ZE%3D" alt="" loading="lazy"/></p>
<p>ä½†æ˜¯æ€ä¹ˆæ“ä½œ MySQL å‘¢ï¼Ÿ</p>
<p>é±¼çš®ï¼šå¯ä»¥ä½¿ç”¨å®˜æ–¹æä¾›çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F8.4%2Fen%2Fmysql.html" target="_blank" title="https://dev.mysql.com/doc/refman/8.4/en/mysql.html" ref="nofollow noopener noreferrer">å‘½ä»¤è¡Œå·¥å…·</a>ï¼Œå…ˆè¾“å…¥å‘½ä»¤ï¼Œè¾“å…¥é»˜è®¤è®¾ç½®çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå°±èƒ½è¿ä¸Šæ•°æ®åº“å¹¶è¿›è¡Œæ“ä½œäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40dc74efe26a4ef48df43c66bd723ea5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=rPTQQQ6yj6kJQcv40Fl4y%2F1XX1k%3D" alt="" loading="lazy"/></p>
<p>ä½ ï¼šroot æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>é±¼çš®ï¼šroot æ˜¯æ•°æ®åº“çš„è¶…çº§ç®¡ç†å‘˜è´¦å·ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™ã€‚</p>
<p>ä¸è¿‡å‘½ä»¤è¡Œçœ‹ç€ä¸ç›´è§‚ï¼Œæˆ‘å»ºè®®ä½ è£…ä¸ª MySQL å¯è§†åŒ–å·¥å…·ï¼ˆæ¯”å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.navicat.com%2Fen%2Fproducts%2Fnavicat-premium-lite" target="_blank" title="https://www.navicat.com/en/products/navicat-premium-lite" ref="nofollow noopener noreferrer">Navicat</a>ã€DataGripï¼‰ï¼Œèƒ½åƒä½¿ç”¨ Excel ä¸€æ ·ç®¡ç†æ•°æ®åº“ï¼Œæ•°æ®ä¸€ç›®äº†ç„¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efb245c9bbdf40f6895b2bfe08587e7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=zv3q5wn6L%2FFiosqqWFy7ZqzvEUQ%3D" alt="" loading="lazy"/></p>
<p>ä½ ï¼šå“‡ï¼Œç¡®å®æ–¹ä¾¿å¤šäº†ï¼</p>
<p>é±¼çš®ï¼šæ¥ä¸‹æ¥æˆ‘å¸¦ä½ å®é™…æ“ä½œä¸€éï¼Œç”¨æ•°æ®åº“æ¥ç®¡ç†å­¦ç”Ÿä¿¡æ¯ã€‚</p>
<p>1ï¼‰é¦–å…ˆè¿æ¥æ•°æ®åº“</p>
<p>ç‚¹å‡»å·¦ä¸Šè§’åˆ›å»ºè¿æ¥ï¼Œé€‰æ‹©æ•°æ®åº“çš„ç±»åˆ«ï¼Œç„¶åè¾“å…¥æ•°æ®åº“é…ç½®ä¿¡æ¯ï¼Œç‚¹å‡»ç¡®è®¤ï¼Œå°±è¿æ¥æˆåŠŸäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bff15744a2a4c769b16e6e64c1ae481~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=p4kMGwkOPgMOOkKwuc7WJ6jPnmw%3D" alt="" loading="lazy"/></p>
<p>2ï¼‰ç„¶åæ¥åˆ›å»ºä¸€ä¸ªæ•°æ®åº“</p>
<p>å³é”®ç‚¹å‡»æ•°æ®åº“è¿æ¥ï¼Œé€‰æ‹© â€œæ–°å»ºæ•°æ®åº“â€ï¼Œå‘½åä¸º schoolï¼Œç‚¹å‡»ç¡®è®¤ï¼Œå°±åˆ›å»ºæˆåŠŸäº†ã€‚</p>
<p>å¯¹åº”çš„ SQL è¯­å¥æ˜¯ <code>CREATE DATABASE school;</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ade6dc6231a4fa5822d4253929b844f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=RavhRga%2F3XPYYrondxqkS66PUEE%3D" alt="" loading="lazy"/></p>
<p>3ï¼‰æ¥ä¸‹æ¥æˆ‘ä»¬è¦åˆ›å»ºè¡¨</p>
<p>é±¼çš®ï¼šæƒ³ä¸€æƒ³ï¼Œå¦‚æœè¦è®¾è®¡ä¸€ä¸ªå­˜å‚¨å­¦ç”Ÿä¿¡æ¯çš„è¡¨ï¼Œéœ€è¦å“ªäº›å­—æ®µï¼Ÿ</p>
<p>ä½ ï¼šå­¦å·ã€å§“åã€æˆç»©ã€ç­çº§ã€‚</p>
<p>é±¼çš®ï¼šæ²¡é”™ï¼Œæ¯ä¸ªå­—æ®µè¿˜è¦æŒ‡å®šç±»å‹ã€‚</p>
<ul>
<li>å­¦å·ç”¨ int æ•´æ•°ç±»å‹</li>
<li>å§“åç”¨ varchar æ–‡æœ¬ç±»å‹</li>
<li>æˆç»©ç”¨ decimal å°æ•°ç±»å‹ï¼ˆä¿ç•™ 2 ä½å°æ•°ï¼‰</li>
<li>ç­çº§ç”¨ int æ•´æ•°ç±»å‹ï¼ˆè¡¨ç¤ºç­çº§ç¼–å·ï¼‰</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a13b4108410b4ddf857ba20319d1165e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=RArKzQI8SrZj4QuVUrd%2FwOgSJMk%3D" alt="" loading="lazy"/></p>
<p>é™¤äº†ç±»å‹ï¼Œåˆ›å»ºè¡¨æ—¶è¿˜è¦è®¾ç½®ä¸€äº› <strong>çº¦æŸ</strong>ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>ä¸»é”®ï¼šæ¯æ¡æ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œä¸€èˆ¬å»ºè®®æ¯ä¸ªè¡¨å•ç‹¬åŠ ä¸€åˆ— id å­—æ®µï¼Œä½œä¸ºä¸»é”®</li>
<li>éç©ºï¼šæŸäº›å­—æ®µä¸èƒ½ä¸ºç©ºï¼Œæ¯”å¦‚å§“åä¸èƒ½ä¸ºç©º</li>
<li>å”¯ä¸€ï¼šå€¼ä¸èƒ½é‡å¤ï¼Œæ¯”å¦‚æ¯ä¸ªå­¦å·éƒ½æ˜¯å”¯ä¸€çš„</li>
<li>å¤–é”®ï¼šå»ºç«‹è¡¨ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œæ¯”å¦‚å­¦ç”Ÿè¡¨çš„ class_id å¯ä»¥è®¾ä¸ºå¤–é”®ï¼Œå…³è”åˆ°ç­çº§è¡¨çš„ idï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚ä½†å®é™…å¼€å‘ä¸­å¤–é”®å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œç”¨çš„æ²¡é‚£ä¹ˆå¤šã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e120ce6538a242ea98cbf84e8a1d133d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=VyR9vcXbGLMl9086JRr8FiUgf6w%3D" alt="" loading="lazy"/></p>
<p>è®¾è®¡å¥½è¡¨ç»“æ„ä¹‹åï¼Œç‚¹å‡»ä¿å­˜ï¼Œæ•°æ®è¡¨å°±åˆ›å»ºæˆåŠŸäº†ã€‚</p>
<p>å¯¹åº”çš„ SQL è¯­å¥ç±»ä¼¼è¿™æ ·ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span>Â <span class="hljs-keyword">TABLE</span>Â studentÂ (
Â  idÂ <span class="hljs-type">INT</span>Â <span class="hljs-keyword">PRIMARY</span>Â KEYÂ AUTO_INCREMENT,Â Â # ä¸»é”®ï¼Œè‡ªåŠ¨é€’å¢
Â  student_noÂ <span class="hljs-type">INT</span>Â <span class="hljs-keyword">UNIQUE</span>Â <span class="hljs-keyword">NOT</span>Â <span class="hljs-keyword">NULL</span>,Â Â  Â Â # å­¦å·ï¼Œå”¯ä¸€ä¸”éç©º
Â  nameÂ <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>)Â <span class="hljs-keyword">NOT</span>Â <span class="hljs-keyword">NULL</span>,Â Â  Â  Â  Â  Â # å§“åï¼Œéç©º
Â  scoreÂ <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">5</span>,<span class="hljs-number">2</span>),Â Â  Â  Â  Â  Â  Â  Â  Â Â # æˆç»©ï¼Œæœ€å¤š <span class="hljs-number">5</span> ä½æ•°å­—ï¼Œ<span class="hljs-number">2</span> ä½å°æ•°
Â  class_idÂ <span class="hljs-type">INT</span>Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # ç­çº§ç¼–å·
);
</code></pre>
<p>4ï¼‰ç„¶åæˆ‘ä»¬å°±å¯ä»¥æ“ä½œæ•°æ®è¡¨äº†ã€‚ä¸»è¦æœ‰ 4 ç±»æ ¸å¿ƒæ“ä½œ â€”â€” å¢åˆ æ”¹æŸ¥ã€‚</p>
<p>å…ˆæ’å…¥å‡ æ¡å­¦ç”Ÿæ•°æ®ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span>Â <span class="hljs-keyword">INTO</span>Â studentÂ (student_no,Â name,Â score,Â class_id)Â 
<span class="hljs-keyword">VALUES</span>Â (<span class="hljs-number">2024001</span>,Â <span class="hljs-string">'å°é˜¿å·´'</span>,Â <span class="hljs-number">95.5</span>,Â <span class="hljs-number">1</span>);
</code></pre>
<p>ç„¶åæŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿæ•°æ®ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span>Â <span class="hljs-operator">*</span>Â <span class="hljs-keyword">FROM</span>Â student;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3d59e29e2164815b728b661e2956aa3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=b2S9%2Bqa8mqrNIB4jKXUWwUtAoEA%3D" alt="" loading="lazy"/></p>
<p>ä¿®æ”¹æŸæ¡æ•°æ®ï¼ŒæŠŠä½ çš„æˆç»©æ”¹æˆæ»¡åˆ†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">UPDATEÂ studentÂ SETÂ <span class="hljs-attr">score</span>Â =Â <span class="hljs-number">100</span>Â WHEREÂ student_<span class="hljs-literal">no</span>Â =Â <span class="hljs-number">2024001</span><span class="hljs-comment">;</span>
â€‹
SELECTÂ *Â FROMÂ student<span class="hljs-comment">;</span>
</code></pre>
<p>æœ€ååˆ é™¤æŸæ¡æ•°æ®ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span>Â <span class="hljs-keyword">FROM</span>Â studentÂ <span class="hljs-keyword">WHERE</span>Â student_noÂ <span class="hljs-operator">=</span>Â <span class="hljs-number">2024001</span>;
â€‹
<span class="hljs-keyword">SELECT</span>Â <span class="hljs-operator">*</span>Â <span class="hljs-keyword">FROM</span>Â student;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/994432c05f8941c1b32cc05c8a505781~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=L%2FvCui949qK90IliH%2FWAHnLV3bc%3D" alt="" loading="lazy"/></p>
<p>é±¼çš®ï¼šæ³¨æ„ï¼Œåˆ é™¤æ‰çš„æ•°æ®å°±å†ä¹Ÿæ‰¾ä¸å›æ¥äº†ï¼</p>
<p>å› æ­¤å®é™…é¡¹ç›®ä¸­å»ºè®®ä½¿ç”¨ <strong>é€»è¾‘åˆ é™¤</strong>ï¼Œå°±æ˜¯åŠ ä¸ª <code>is_deleted</code> å­—æ®µæ¥æ ‡è®°æ•°æ®æ˜¯å¦å¤±æ•ˆï¼Œè€Œä¸æ˜¯çœŸçš„åˆ é™¤æ•°æ®ï¼Œè¿™æ ·å³ä½¿è¯¯åˆ ä¹Ÿèƒ½æ¢å¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/608b6f42772b4d81be7f6ee3acca18f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=4x6jcSIwQaa8sSaKgxOOF9TpVbA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">å®¢æˆ·ç«¯æ“ä½œ</h3>
<p>ä½ å¾ˆæ˜¯å…´å¥‹ï¼šç”¨å¯è§†åŒ–å·¥å…·çœŸæ–¹ä¾¿å•Šï¼Œä½†æ˜¯æˆ‘æ€ä¹ˆç”¨ä»£ç æ“ä½œæ•°æ®åº“å‘¢ï¼Ÿ</p>
<p>é±¼çš®ï¼šä¸»æµç¼–ç¨‹è¯­è¨€éƒ½æœ‰æ“ä½œæ•°æ®åº“çš„ SDKï¼Œæ¯”å¦‚ä½¿ç”¨ Java çš„ JDBCï¼Œéœ€è¦å…ˆåŠ è½½å¯¹åº”æ•°æ®åº“çš„é©±åŠ¨ã€ç„¶åè·å–è¿æ¥ã€ç¼–å†™ SQL è¯­å¥å¹¶æ‰§è¡Œã€æœ€åæ”¶é›†ç»“æœå¹¶å…³é—­è¿æ¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1640398a5eac48df869e9a4e582ceb56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=%2BYAJogZtwCF%2BPz2X2gx%2B5aLzRjE%3D" alt="" loading="lazy"/></p>
<p>ä½ æŒ äº†æŒ å¤´ï¼šæˆ‘å°±æŸ¥è¯¢ 1 æ¬¡æ•°æ®åº“ï¼Œéƒ½è¦å†™è¿™ä¹ˆå¤šä»£ç ä¹ˆï¼Ÿè€Œä¸”æˆ‘æ ¹æœ¬ä¸ä¼šå†™ SQL è¯­å¥å•Šï¼</p>
<p>é±¼çš®ç¬‘é“ï¼šæ²¡å…³ç³»ï¼Œå®é™…å¼€å‘ä¸­æˆ‘ä»¬ä¼šä½¿ç”¨ <strong>ORM å¯¹è±¡å…³ç³»æ˜ å°„æ¡†æ¶</strong>ï¼Œå¯ä»¥æŠŠæ•°æ®åº“çš„è¡¨æ˜ å°„æˆ Java å¯¹è±¡ï¼Œåƒæ“ä½œå¯¹è±¡ä¸€æ ·æ“ä½œæ•°æ®åº“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/331faef8eeeb49cfad3c563cf6cfbc28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=7dsiojb5c3QsLcQA5f446y4X1Q0%3D" alt="" loading="lazy"/></p>
<p>æ¯”å¦‚ Java çš„ MyBatis æ¡†æ¶ï¼Œå¯ä»¥è®©ä½ ç”¨æ›´ç®€æ´çš„æ–¹å¼æ‰§è¡Œ SQLï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// MyBatis æ–¹å¼ï¼šåªéœ€è¦å†™ SQLï¼Œæ¡†æ¶è‡ªåŠ¨å¤„ç†è¿æ¥å’Œç»“æœæ˜ å°„
StudentÂ <span class="hljs-attr">student</span>Â =Â studentMapper.selectByStudent<span class="hljs-literal">No</span>(<span class="hljs-number">2024001</span>)<span class="hljs-comment">;</span>
System.out.println(student.getName())<span class="hljs-comment">;</span>
</code></pre>
<p>è¿˜æœ‰å®ƒçš„å¢å¼ºç‰ˆ MyBatis Plus å’Œ MyBatis Flexï¼Œæä¾›äº†æ›´å¤šå¼€ç®±å³ç”¨çš„åŠŸèƒ½ï¼Œè¿ SQL éƒ½ä¸ç”¨å†™ï¼ç›´æ¥è°ƒç”¨ç°æˆçš„æ–¹æ³•ï¼Œå‡ è¡Œä»£ç å°±èƒ½å®ç°å¢åˆ æ”¹æŸ¥ï¼Œå‘Šåˆ« SQL Boyï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c9ba2c2cd0b4cf2b928c2e9d446c2ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=Xr9fOs%2BLjdvWFJZmiikSd6ngijc%3D" alt="" loading="lazy"/></p>
<p>ä½ æ„Ÿå¹é“ï¼šè¿™æ‰æ˜¯äººå†™çš„ä»£ç å•Šï¼ä¼˜é›…ï¼ŒçœŸæ˜¯ä¼˜é›…~</p>
<p>é±¼çš®æé†’é“ï¼šä½†æ˜¯ï¼Œæ¡†æ¶ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œæœ‰äº›å¤æ‚æŸ¥è¯¢çš„ SQL è¿˜è¦è‡ªå·±æ‰‹å†™ï¼Œä¸è¿‡ç°åœ¨æœ‰ AI äº†ï¼Œå†™ä¸ª SQL è¿˜ä¸æ˜¯æ‰‹æ‹¿æŠŠæçš„ï¼Ÿ</p>
<p>ä½ ï¼šæ˜ç™½äº†ï¼Œæˆ‘è¿™å°±ç”¨æ¡†æ¶é‡å†™å­¦ç”Ÿç®¡ç†ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-4">ç¬¬ä¸‰é˜¶æ®µï¼šæ•°æ®åº“ç‰¹æ€§</h2>
<h3 data-id="heading-5">ç´¢å¼•</h3>
<p>ä¸€ä¸ªæœˆåï¼Œä½ é‡å†™çš„å­¦ç”Ÿç®¡ç†ç³»ç»Ÿæ­£å¼ä¸Šçº¿ï¼Œä¸ä»…å¾—åˆ°äº†ç”²æ–¹çš„å¥½è¯„ï¼Œè€Œä¸”å¾ˆå¿«ç«éäº†å…¨å›½é«˜æ ¡ã€‚</p>
<p>ä½ å†…å¿ƒæš—çˆ½ï¼šæ•°æ®åº“ä¹Ÿä¸è¿‡å¦‚æ­¤å˜›~</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/038cb4882a46430d813eab9a84ffdbd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=c5TyGy70rvTDHtou3kDwR5k25QI%3D" alt="" loading="lazy"/></p>
<p>ä½†ä½ æ²¡æƒ³åˆ°ï¼Œéšç€å­¦ç”Ÿæ•°æ®é‡çš„æš´æ¶¨å’Œè¡¨ç»“æ„çš„æ‰©å±•ï¼Œä½ çš„æ•°æ®åº“æŸ¥è¯¢é€Ÿåº¦ä¹Ÿè¶Šæ¥è¶Šæ…¢ï¼Œå…‰æ˜¯æŸ¥è¯¢æŸä¸ªç­çº§çš„å­¦ç”Ÿç«Ÿç„¶éƒ½è¦ç­‰å¥½å‡ ç§’ï¼</p>
<p>ä½ æœ‰äº›æƒŠè®¶ï¼šæˆ‘è¿™ SQL ä¹Ÿä¸å¤æ‚å•Šï¼Œæ€ä¹ˆæŸ¥è¯¢è¿™ä¹ˆæ…¢ï¼Ÿ</p>
<p>é±¼çš®ï¼šåŠ ä¸ªç´¢å¼•è¯•è¯•ï¼Ÿ</p>
<p>ä½ ï¼šç´¢å¼•ï¼Ÿé‚£æ˜¯å•¥ï¼Ÿ</p>
<p>é±¼çš®ï¼šç´¢å¼•å°±æ˜¯æ•°æ®åº“çš„ç›®å½•ã€‚ä½ ç°åœ¨æŸ¥æ•°æ®ï¼Œæ•°æ®åº“å¾—ä¸€è¡Œä¸€è¡Œå…¨è¡¨æ‰«æï¼Œæ•°æ®é‡è¶Šå¤§é€Ÿåº¦è¶Šæ…¢ã€‚åŠ äº†ç´¢å¼•åï¼Œæ•°æ®åº“å¯ä»¥é€šè¿‡ç´¢å¼•å¿«é€Ÿå®šä½åˆ°æ•°æ®ï¼Œå°±åƒé€šè¿‡ä¹¦çš„ç›®å½•å¿«é€Ÿç¿»åˆ°æŸä¸€é¡µã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4f80cdfdf1446caa2483ce5afc5c9b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=MOXFxeDz2GpPK0Wi0XwTi%2BbjxZQ%3D" alt="" loading="lazy"/></p>
<p>ä½ æç„¶å¤§æ‚Ÿï¼šå¯¹å•Šï¼Œè€å¸ˆç»å¸¸æŒ‰ç­çº§æŸ¥è¯¢å­¦ç”Ÿï¼Œä¸å¦¨ç»™ç­çº§å­—æ®µæ·»åŠ ç´¢å¼•ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">CREATEÂ INDEXÂ idx_class_idÂ ONÂ <span class="hljs-built_in">student</span>(class_id);
</code></pre>
<p>æ·»åŠ ç´¢å¼•åï¼Œä½ å†æ¬¡æµ‹è¯•æŸ¥è¯¢ï¼Œç«Ÿç„¶åªè¦å‡ åæ¯«ç§’ï¼</p>
<p>ä½ æ¿€åŠ¨å¾—è·³äº†èµ·æ¥ï¼šç´¢å¼•å¤ªé¦™äº†ï¼Œæˆ‘è¦ç»™æ‰€æœ‰å­—æ®µéƒ½åŠ ç´¢å¼•~</p>
<p>é±¼çš®æ‘†æ‘†æ‰‹ï¼šåˆ«ï¼Œç´¢å¼•å¯ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼</p>
<p>ä½ æ„£ä½äº†ï¼šä¸ºå•¥ï¼Ÿ</p>
<p>é±¼çš®ï¼šç´¢å¼•è™½ç„¶èƒ½åŠ å¿«æŸ¥è¯¢ï¼Œä½†ä¹Ÿæœ‰ä»£ä»·ã€‚</p>
<ul>
<li>ä¸€æ–¹é¢ä¼šå¢åŠ å†™å…¥æ•°æ®ï¼ˆå¢åˆ æ”¹ï¼‰çš„å¼€é”€ã€‚å› ä¸ºæ¯æ¬¡å†™å…¥æ•°æ®ï¼Œç´¢å¼•ä¹Ÿè¦æ›´æ–°ã€‚</li>
<li>æ­¤å¤–ï¼Œç´¢å¼•æœ¬èº«ä¹Ÿæ˜¯æ•°æ®ï¼Œè¦å ç”¨æ›´å¤šçš„å­˜å‚¨ç©ºé—´ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8442a4732b6b466caf9ec3b69eda8236~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=UxQJKSwpT26AqJ4NoULtOGNzPQQ%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼Œè¦åœ¨ç»å¸¸ç”¨æ¥æŸ¥è¯¢ã€å¹¶ä¸”æ•°æ®åŒºåˆ†åº¦é«˜çš„å­—æ®µä¸Šåˆç†æ·»åŠ ç´¢å¼•ã€‚æ¯”å¦‚ç­çº§ IDã€å­¦å·è¿™ç§å­—æ®µé€‚åˆåŠ ç´¢å¼•ï¼Œä½†æ€§åˆ«å­—æ®µï¼ˆåªæœ‰ç”·å¥³ä¸¤ä¸ªå€¼ï¼‰å°±ä¸é€‚åˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73849c8befa646ba82e289ca70126818~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=%2F1jOWZg2N6b06fRp572sOznXgtk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">äº‹åŠ¡</h3>
<p>åˆè¿‡äº†å‡ å¤©ï¼Œç”²æ–¹åˆææ–°éœ€æ±‚äº†ã€‚</p>
<p>ç”²æ–¹ï¼šå°é˜¿å·´ï¼Œæœ‰è€å¸ˆåé¦ˆé¢˜ç›®åˆ¤é”™äº†ï¼Œéœ€è¦æ‰¹é‡æŠŠæ‰€æœ‰å­¦ç”Ÿçš„æˆç»©éƒ½åŠ  5 åˆ†ã€‚</p>
<p>ä½ ä¿¡å¿ƒæ»¡æ»¡ï¼šç®€å•ï¼Œä¸å°±æ˜¯ä¸ªæ‰¹é‡æ›´æ–°æ“ä½œä¹ˆï¼Ÿ</p>
<p>ä½ å†™äº†ä¸€æ®µä»£ç ï¼Œå¾ªç¯æ›´æ–°æ‰€æœ‰å­¦ç”Ÿçš„æˆç»©ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78ab9cd7c93c49ca95d354c352c6fc35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=vrHr1dSrOAg6liLchsGxOUFXMsw%3D" alt="" loading="lazy"/></p>
<p>æ²¡æƒ³åˆ°ï¼Œè¶Šè‡ªä¿¡ Bug è¶Šå¤šï¼ŒåŠŸèƒ½åˆšåˆšä¸Šçº¿ï¼Œå°±æ”¶åˆ°äº†æŠ•è¯‰ï¼šæ€ä¹ˆæœ‰äº›å­¦ç”Ÿçš„æˆç»©æ”¹äº†ï¼Œæœ‰äº›æ²¡æ”¹ï¼Ÿ</p>
<p>ä½ æŸ¥çœ‹äº†ä¸‹æ—¥å¿—ï¼Œå‘ç°å‰é¢å­¦ç”Ÿçš„æˆç»©æ›´æ–°æˆåŠŸäº†ï¼Œä½†ç”±äºç½‘ç»œæ³¢åŠ¨ï¼Œå¯¼è‡´åé¢çš„å­¦ç”Ÿéƒ½æ²¡æ›´æ–°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cabdacbf6174b1ebf59d367e626b146~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=wLZcKNsynlAo1phRPOi9lehrzGM%3D" alt="" loading="lazy"/></p>
<p>ä½ æ€¥åäº†ï¼šå’‹åŠï¼Œè¿™æ ·å°±ä¸å…¬å¹³äº†å•Šï¼</p>
<p>é±¼çš®çœ‹äº†çœ‹ä½ çš„ä»£ç ï¼šè¿™æ˜¯å…¸å‹çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œä½ éœ€è¦ç”¨ <strong>äº‹åŠ¡</strong> æ¥è§£å†³ã€‚</p>
<p>ä½ ï¼šå•¥æ˜¯äº‹åŠ¡ï¼Ÿ</p>
<p>é±¼çš®ï¼šäº‹åŠ¡å°±æ˜¯æŠŠå¤šä¸ªæ“ä½œæ†ç»‘åœ¨ä¸€èµ·ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1af41983b73f431c8e6e0f0e8fb2bf7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=AwmHxnsiZRj8nVlesOLkVwuaxcQ%3D" alt="" loading="lazy"/></p>
<p>å°±åƒä½ ç»™åˆ«äººæŠ•å¸ï¼Œä½ æ‰£é™¤ç¡¬å¸å’Œå¯¹æ–¹å¢åŠ ç¡¬å¸å¿…é¡»åŒæ—¶æˆåŠŸï¼Œä¸èƒ½è®©ç¡¬å¸å‡­ç©ºæ¶ˆå¤±å¯¹å§ï¼Ÿ</p>
<p>ä½ ï¼šå¯¹å¯¹å¯¹ï¼Œé‚£æ‰¹é‡æ”¹æˆç»©ä¹Ÿæ˜¯ï¼Œè¦ä¹ˆæ‰€æœ‰å­¦ç”Ÿéƒ½åŠ  5 åˆ†ï¼Œè¦ä¹ˆéƒ½ä¸åŠ ã€‚</p>
<p>é±¼çš®ï¼šæ²¡é”™ï¼Œæ•°æ®åº“äº‹åŠ¡æœ‰ 4 ä¸ªç‰¹æ€§ï¼Œç®€ç§° ACIDï¼š</p>
<ul>
<li>åŸå­æ€§ï¼ˆ<strong>A</strong>tomicityï¼‰ï¼šè¦ä¹ˆå…¨åšï¼Œè¦ä¹ˆå…¨ä¸åšã€‚</li>
<li>ä¸€è‡´æ€§ï¼ˆ<strong>C</strong>onsistencyï¼‰ï¼šæ•°æ®ä»ä¸€ä¸ªæ­£ç¡®çŠ¶æ€åˆ°å¦ä¸€ä¸ªæ­£ç¡®çŠ¶æ€ã€‚æ¯”å¦‚è½¬è´¦æ—¶ï¼ŒA æ‰£é’±å’Œ B åŠ é’±çš„æ€»å’Œä¸å˜ã€‚</li>
<li>éš”ç¦»æ€§ï¼ˆ<strong>I</strong>solationï¼‰ï¼šå¤šä¸ªäº‹åŠ¡äº’ä¸å¹²æ‰°ã€‚</li>
<li>æŒä¹…æ€§ï¼ˆ<strong>D</strong>urabilityï¼‰ï¼šäº‹åŠ¡å®Œæˆåï¼Œæ•°æ®æ°¸ä¹…ä¿å­˜ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a67f41234b24743b4d09e9af4a93bd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=yN9LcsI2F2STXVC%2F7j5PbCJSuow%3D" alt="" loading="lazy"/></p>
<p>ä½ ï¼šé‚£æ€ä¹ˆä½¿ç”¨äº‹åŠ¡å‘¢ï¼Ÿ</p>
<p>é±¼çš®ï¼šå¦‚æœç›´æ¥ç”¨åŸå§‹çš„ JDBCï¼Œéœ€è¦æ‰‹åŠ¨æ§åˆ¶äº‹åŠ¡ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>ä½†å¦‚æœåœ¨ Spring æ¡†æ¶ä¸­ï¼Œåªéœ€è¦åŠ ä¸€ä¸ª <code>@Transactional</code> æ³¨è§£å°±æå®šäº†ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ac10eec07d9446f8ee71d80891478db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=qyArtlJ9Z4Gsyg8SZGqAipAZRwk%3D" alt="" loading="lazy"/></p>
<p>Spring ä¼šè‡ªåŠ¨å¸®ä½ ç®¡ç†äº‹åŠ¡ã€‚å¦‚æœä¸­é—´ä»»ä½•ä¸€æ­¥å‡ºé”™ï¼ŒæŠ›å‡ºäº†æŒ‡å®šçš„å¼‚å¸¸ï¼Œæ•´ä¸ªäº‹åŠ¡ä¼šè‡ªåŠ¨å›æ»šï¼Œå°†æ•°æ®æ¢å¤åˆ°åŸæ¥çš„çŠ¶æ€ï¼Œä¿è¯è¦ä¹ˆæ‰€æœ‰å­¦ç”Ÿéƒ½åŠ åˆ†æˆåŠŸï¼Œè¦ä¹ˆéƒ½ä¸åŠ ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5f650017b474311855a700178c01ede~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=c0mH%2BCahVr7dWVvlsgF6goR%2BZMM%3D" alt="" loading="lazy"/></p>
<p>ä½ ï¼šåŸæ¥è¿™ä¹ˆç®€å•å•Šï¼Œæˆ‘è¿™å°±ç”¨äº‹åŠ¡é‡å†™ä»£ç ï¼</p>
<h3 data-id="heading-7">å…¶ä»–</h3>
<p>é±¼çš®ï¼šMySQL è¿˜æœ‰ä¸€äº›å…¶ä»–ç‰¹æ€§ï¼Œæ¯”å¦‚è§†å›¾å¯ä»¥ç”¨æ¥ç®€åŒ–å¤æ‚æŸ¥è¯¢ã€å­˜å‚¨è¿‡ç¨‹å¯ä»¥æ‰¹é‡æ‰§è¡Œ SQLã€è§¦å‘å™¨å¯ä»¥è‡ªåŠ¨è§¦å‘æ“ä½œã€‚</p>
<p>1ï¼‰è§†å›¾ï¼šè§†å›¾æ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼ŒæŠŠå¤æ‚æŸ¥è¯¢å°è£…èµ·æ¥é‡å¤ä½¿ç”¨ã€‚æ¯”å¦‚ä½ ç»å¸¸è¦ç»Ÿè®¡æ¯ä¸ªç­çº§çš„å¹³å‡æˆç»©ï¼Œæ¯æ¬¡éƒ½å†™ä¸€é•¿ä¸² SQL å¤ªéº»çƒ¦ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè§†å›¾ï¼Œä»¥åç›´æ¥æŸ¥è§†å›¾å°±è¡Œã€‚</p>
<p>2ï¼‰å­˜å‚¨è¿‡ç¨‹ï¼šå¯ä»¥æ‰¹é‡æ‰§è¡Œ SQLã€‚æ¯”å¦‚æ¯å¤©å®šæ—¶åŒæ­¥æ•°æ®ï¼Œå†™ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œå®šæ—¶è°ƒç”¨å°±è¡Œã€‚</p>
<p>3ï¼‰è§¦å‘å™¨ï¼šå¯ä»¥è‡ªåŠ¨è§¦å‘æ“ä½œã€‚æ¯”å¦‚æ¯æ¬¡æ·»åŠ ç”¨æˆ·ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€æ¡æ“ä½œæ—¥å¿—ï¼Œä¸ç”¨æ‰‹åŠ¨å†™ä»£ç ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddaef57fb4284ef38a8ba2a338ff9f89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=U4AqewIwr20YHF%2F5p0Kx9rhIIGA%3D" alt="" loading="lazy"/></p>
<p>ä½ æ„Ÿå¹é“ï¼šåŸæ¥æ•°æ®åº“è¿˜æœ‰è¿™ä¹ˆå¤šåŠŸèƒ½ï¼Œæˆ‘å­¦ä¸å®Œäº†å•Šâ€¦â€¦</p>
<p>é±¼çš®ç¬‘äº†ï¼šåˆ«æ‹…å¿ƒï¼Œè¿™äº›åœ¨å®é™…å¼€å‘ä¸­ç”¨å¾—ä¸å¤šï¼Œå…ˆç®€å•äº†è§£å°±å¥½ã€‚</p>
<h2 data-id="heading-8">ç¬¬å››é˜¶æ®µï¼šç”Ÿäº§ç¯å¢ƒå®è·µ</h2>
<p>å‡ å¹´åï¼Œä½ å·²ç»æˆä¸ºå°æœ‰åæ°”çš„ â€œå­¦ç”Ÿç®¡ç†ç³»ç»Ÿå¤§å¸ˆâ€ï¼Œè¿˜æˆç«‹äº†è‡ªå·±çš„å·¥ä½œå®¤ã€‚</p>
<p>æ²¡äº‹å„¿å°±å¯¹ç€æ–°æ¥çš„å®ä¹ ç”Ÿé˜¿å¤å¹ç‰›çš®ï¼šä½ é˜¿å·´å“¥æˆ‘å•Šï¼Œç²¾é€šæ•°æ®åº“ï¼Œç´¢å¼•ã€äº‹åŠ¡è€çš„è´¼æºœå„¿~</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/896729eb81e8412385ed3ed4bf357c99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=NCLsPCFN7PJ3Mh66MBkfaWvm6Tw%3D" alt="" loading="lazy"/></p>
<p>ç„¶è€ŒæŸå¤©ä¸Šåˆï¼Œå­¦æ ¡çš„è¿ç»´åŒå­¦æ‰“æ¥ç”µè¯ï¼šé˜¿å·´é˜¿å·´ï¼Œç³»ç»Ÿå‡ºé—®é¢˜äº†ï¼Œæ‰€æœ‰æ“ä½œéƒ½ä¸€ç›´ <strong>è½¬åœˆã€è¶…æ—¶</strong>ï¼ å¥½åƒæ˜¯æ•°æ®åº“å¡æ­»äº†ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0547a2d3b2343b6aaf5a61935e4a909~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=72iQj%2FHA2pFYORlrpupo87SeFkk%3D" alt="" loading="lazy"/></p>
<p>ä½ å¤§æƒŠï¼šä»€ä¹ˆï¼Ÿï¼æˆ‘éƒ½åŠ ç´¢å¼•äº†ï¼Œè¿˜èƒ½å¡æ­»ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4abdc5429c5e474697967f9845cb784e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=kuIK6F6L5k6Q6t%2F8SO8fwlO8FSY%3D" alt="" loading="lazy"/></p>
<p>emmmâ€¦â€¦ å¯¹äº†ï¼Œæˆ‘æƒ³åˆ°äº†ï¼</p>
<p>èµ¶ç´§é‡å¯æ•°æ®åº“ï¼Œé‡å¯è§£å†³æ‰€æœ‰é—®é¢˜ï¼å˜¿å˜¿å˜¿å“ˆå“ˆå“ˆå“ˆ~</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1614ecd8ab40422d8782af42cf6d03ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=fs2EkgpkOxAPUPXmzAhwtceohts%3D" alt="" loading="lazy"/></p>
<p>ç»“æœé‡å¯æ²¡å¤šä¹…ï¼Œæ•°æ®åº“åˆå¡æ­»äº†ï¼</p>
<p>ä½ å½»åº•æ‡µäº†ï¼šå‘œå‘œå‘œï¼Œæ€ä¹ˆåŠå•Šï¼</p>
<p>è¿™æ—¶ï¼Œä½ èº«æ—çš„é˜¿å¤çªç„¶é¸¡å«èµ·æ¥ï¼šæˆ‘æ¥ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57a8f3d59fe449ea97dcc88ef33c5a36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=oXc0V5ambGcLmrqmdXCfjTkeSDE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">ä¸ºä»€ä¹ˆç³»ç»Ÿä¼šå´©æºƒï¼Ÿ</h3>
<p>é˜¿å¤ï¼šæˆ‘ä»¬å…ˆçœ‹çœ‹ä¸ºä»€ä¹ˆç³»ç»Ÿä¼šå´©æºƒï¼Ÿ</p>
<p>å¼€å¯ MySQL çš„æ…¢æŸ¥è¯¢æ—¥å¿—åŠŸèƒ½ï¼Œæœ‰ä¸¤ç§æ–¹å¼ã€‚</p>
<p>1ï¼‰é€šè¿‡ SQL å‘½ä»¤ï¼ˆä¸´æ—¶å¼€å¯ï¼‰</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—åŠŸèƒ½</span>
SET GLOBAL <span class="hljs-attr">slow_query_log</span>Â =Â <span class="hljs-number">1</span><span class="hljs-comment">;</span>
â€‹
<span class="hljs-comment"># è®¾ç½®æ…¢æŸ¥è¯¢é˜ˆå€¼ï¼ˆè¶…è¿‡å‡ ç§’ç®—æ˜¯æ…¢æŸ¥è¯¢ï¼‰</span>
SET GLOBAL <span class="hljs-attr">long_query_time</span>Â =Â <span class="hljs-number">5</span><span class="hljs-comment">;</span>
â€‹
<span class="hljs-comment"># ä¿®æ”¹æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼ˆå¯é€‰ï¼‰</span>
SET GLOBAL <span class="hljs-attr">slow_query_log_file</span>Â =Â <span class="hljs-string">'/path/to/slow.log'</span><span class="hljs-comment">;</span>
</code></pre>
<p>2ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆæ°¸ä¹…ç”Ÿæ•ˆï¼‰</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åœ¨ [mysqld] éƒ¨åˆ†è®¾ç½®å‚æ•°</span>
<span class="hljs-attr">slow_query_log</span>Â =Â <span class="hljs-number">1</span>
<span class="hljs-attr">long_query_time</span>Â =Â <span class="hljs-number">5</span>
<span class="hljs-attr">slow_query_log_file</span>Â =Â /path/to/slow.log
</code></pre>
<p>ä½ çœ‹ï¼Œæœ‰äº› SQL è¯­å¥æ‰§è¡Œäº†å‡ åç§’ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50bee8d15d2d4f7aba615e7c3420c421~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=5rlwgKJP3XhRrzF61FhxrVsD6mY%3D" alt="" loading="lazy"/></p>
<p>ä½¿ç”¨ Explain å‘½ä»¤åˆ†æä¸‹è¿™äº›æŸ¥è¯¢ï¼ŒåŸæ¥æ²¡æœ‰æ­£ç¡®ä½¿ç”¨ç´¢å¼•ï¼Œå¯¼è‡´äº†å…¨è¡¨æ‰«æï¼ŒæŠŠæ•°æ®åº“æ‹–å®äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3944e76185b84100a02a690dd79fc8e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=qhf3F%2FcERS7EaGm6gP34Euq6mhY%3D" alt="" loading="lazy"/></p>
<p>è¿™äº›æ…¢æŸ¥è¯¢å°±æ˜¯ç½ªé­ç¥¸é¦–ï¼Œå®ƒä»¬ä¼š <strong>é•¿æ—¶é—´éœ¸å æ•°æ®åº“è¿æ¥å’Œ CPU èµ„æº</strong>ã€‚å½“å¤§é‡ç”¨æˆ·åŒæ—¶æ‰§è¡Œæ…¢æŸ¥è¯¢ï¼Œæ•°æ®åº“è¿æ¥æ± å¾ˆå¿«è¢«è€—å°½ï¼Œæ–°çš„è¯·æ±‚å› ä¸ºæ— æ³•è·å–è¿æ¥ã€å…¨éƒ¨é˜»å¡ï¼Œå¯¼è‡´æ•°æ®åº“ â€œå¡æ­»â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/832c50d6b9954a1f81c93efa65561c66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=kqi%2FtnuxKX9VaBh%2F4KCBb30snVE%3D" alt="" loading="lazy"/></p>
<p>ä½ æƒ­æ„§åœ°ä½ä¸‹å¤´ï¼šæˆ‘çŸ¥é“äº†ï¼Œç”Ÿäº§ç¯å¢ƒä¸€å®šè¦å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ŒåŠæ—¶å‘ç°æ…¢ SQL å¹¶ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-10">æ•°æ®ä¸¢å¤±äº†æ€ä¹ˆåŠï¼Ÿ</h3>
<p>å±‹æ¼åé€¢è¿å¤œé›¨ï¼Œä½ å¾ˆå¿«åˆæ”¶åˆ°äº†æŠ•è¯‰ï¼Œè¯´æ˜¯æœ‰çš„å­¦ç”Ÿæ•°æ®ä¸¢å¤±äº†ï¼</p>
<p>ä½ å¾ˆæ˜¯ç–‘æƒ‘ï¼šMySQL ä¸æ˜¯æœ‰æ—¥å¿—ï¼ˆRedo Log å’Œ Binlogï¼‰æ¥ä¿è¯æ•°æ®æŒä¹…æ€§å—ï¼Ÿæ€ä¹ˆä¼šä¸¢æ•°æ®å‘¢ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dd27b25219d48b29497060bc1561a28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=uv1BWwHDNLLCDh6CyPhoqbUtc54%3D" alt="" loading="lazy"/></p>
<p>ç»è¿‡æ’æŸ¥ï¼ŒåŸæ¥æ˜¯æœåŠ¡å™¨çš„ç¡¬ç›˜è¢«ä¸€ä¸ªå­¦ç”Ÿä¸å°å¿ƒè¸¹åäº†ï¼</p>
<p>ä½ éš¾å—å¾—åƒæŒçŸ¢äº†ä¸€æ ·ï¼šçœŸæ˜¯äººåœ¨å®¶ä¸­åï¼ŒBug å¤©ä¸Šæ¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0265b6463088402bbdd9bcaea415c887~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=0UDtfD0fKXggmnjUrwXyohrPZfs%3D" alt="" loading="lazy"/></p>
<p>å”‰ï¼Œæˆ‘æ€ä¹ˆæŠŠæ•°æ®æ‰¾å›æ¥å•Šï¼Ÿ</p>
<p>é˜¿å¤ï¼šåˆ«æ€•ï¼Œå¹¸å¥½é±¼çš®å“¥ä¹‹å‰è®¾ç½®äº†å¤‡ä»½ã€‚ä¸€æ–¹é¢å®šæœŸåš <strong>å…¨é‡å¤‡ä»½</strong>ï¼Œæ¯”å¦‚åˆ©ç”¨ <code>mysqldump</code> å·¥å…·æ¯å¤©å‡Œæ™¨å¤‡ä»½ä¸€æ¬¡å¹¶å‘é€åˆ°å…¶ä»–æœåŠ¡å™¨ä¸Šï¼›å†é…åˆ <strong>å¢é‡å¤‡ä»½</strong>ï¼Œåˆ©ç”¨ Binlogï¼ˆäºŒè¿›åˆ¶æ—¥å¿—ï¼‰è®°å½•æ¯æ¬¡çš„æ•°æ®ä¿®æ”¹æ“ä½œï¼Œè¿™æ ·å³ä½¿æ•°æ®åº“å´©äº†ï¼Œä¹Ÿèƒ½æ¢å¤åˆ°æœ€è¿‘çš„çŠ¶æ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3d02c27d011448384c066d3c7ebe033~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=PR0sy519vMkMsPkehyycjNPCjJs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">æ€ä¹ˆä¿è¯ç³»ç»Ÿä¸ä¼šå†å´©ï¼Ÿ</h3>
<p>ä½ æ¾äº†ä¸€å£æ°”ï¼šé‚£æ€ä¹ˆä¿è¯æ•°æ®åº“ä¸ä¼šå†å®•æœºå‘¢ï¼Ÿ</p>
<p>é˜¿å¤ï¼šå¯ä»¥æ­å»º MySQL é«˜å¯ç”¨é›†ç¾¤ï¼Œå…¸å‹çš„æ˜¯ <strong>ä¸€ä¸»å¤šä»</strong> æ¶æ„ã€‚</p>
<p>ä¸»åº“ï¼ˆMasterï¼‰ä¸“é—¨è´Ÿè´£å†™æ“ä½œï¼ˆå¢åˆ æ”¹ï¼‰ï¼Œå¹¶é€šè¿‡ Binlog è®°å½•æ¯ä¸€æ¬¡æ•°æ®å˜æ›´æ“ä½œã€‚</p>
<p>ä»åº“ï¼ˆSlaveï¼‰ æ‹‰å–ä¸»åº“çš„ Binlog åˆ°æœ¬åœ°æ–‡ä»¶ä¸­ï¼Œç„¶åå›æ”¾æ•°æ®å˜æ›´æ“ä½œï¼Œå®ç°æ•°æ®åŒæ­¥ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä»åº“æ¥æ‰¿æ‹…ç»å¤§éƒ¨åˆ†çš„è¯»æ“ä½œï¼Œè¿™å« <strong>è¯»å†™åˆ†ç¦»</strong>ï¼Œèƒ½å¤§å¤§æå‡å¹¶å‘èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cc7092c41374dfb82a61af5e2f3350e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=ng%2BdIVVWxbBw1AzSmJovH%2BdiJD0%3D" alt="" loading="lazy"/></p>
<p>å½“ä¸»åº“å‡ºç°æ•…éšœæ—¶ï¼Œåˆ©ç”¨ <strong>MHA</strong> ç­‰å·¥å…·ï¼Œè‡ªåŠ¨å°†ä¸€ä¸ªä»åº“æå‡ä¸ºæ–°çš„ä¸»åº“ï¼Œå¹¶è°ƒæ•´å…¶ä»–ä»åº“çš„æŒ‡å‘ï¼Œå®ç°æ•…éšœçš„è‡ªåŠ¨åˆ‡æ¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/252981b8af4d4af9adbaf8e4b03409f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=T1V6kfSsrx8CRiKpModcRaCaE6k%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">æ•°æ®é‡å¤§äº†æ€ä¹ˆåŠï¼Ÿ</h3>
<p>ä½ å¾ˆæ˜¯æƒŠè®¶ï¼šä¹‹å‰å®Œå…¨æ²¡å¬è¯´è¿‡è¿™äº›å•Šâ€¦â€¦</p>
<p>é˜¿å¤ç”¨çœ‹æµæµªç‹—çš„çœ¼ç¥çœ‹äº†ä½ ä¸€çœ¼ï¼šé˜¿å·´å“¥å“¥ï¼Œå¦‚æœæ•°æ®é‡ç‰¹åˆ«å¤§ï¼Œä¸€ä¸ªåº“å­˜ä¸ä¸‹æ€ä¹ˆåŠï¼Ÿ</p>
<p>ä½ å“‘å£æ— è¨€ï¼šé˜¿å·´é˜¿å·´â€¦â€¦</p>
<p>é˜¿å¤ç¬‘äº†ï¼šå½“ç„¶æ˜¯ <strong>åˆ†åº“åˆ†è¡¨</strong> å•¦ï¼æ¯”å¦‚</p>
<p>1ï¼‰æ°´å¹³æ‹†åˆ†ï¼šæŠŠåŒä¸€å¼ è¡¨çš„æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªè¡¨æˆ–å¤šä¸ªåº“ä¸­ã€‚æ¯”å¦‚æ ¹æ®å­¦ç”Ÿ ID çš„å°¾å·ï¼Œå¥‡æ•°çš„å­˜åˆ°è¡¨ 1ï¼Œå¶æ•°çš„å­˜åˆ°è¡¨ 2ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ada068e825bf4a779684e457afadad3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=HuZ3ZOyYqYV2rls%2Fw1l7W8EWtfg%3D" alt="" loading="lazy"/></p>
<p>2ï¼‰å‚ç›´æ‹†åˆ†ï¼šæŒ‰ä¸šåŠ¡åŠŸèƒ½æ¥æ‹†åˆ†åº“ï¼Œæ¯”å¦‚æŠŠå­¦ç”ŸåŸºæœ¬ä¿¡æ¯ã€æˆç»©ä¿¡æ¯ã€é€‰è¯¾ä¿¡æ¯åˆ†åˆ«å­˜åˆ°ä¸åŒçš„åº“ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bea71f37907d47ee8c291eeec4ab7545~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=iAhUYoka7QDij%2FLBYAUKjJPeKzE%3D" alt="" loading="lazy"/></p>
<p>ä½ å½»åº•æœäº†ï¼šå¦™å•Šï¼Œè¿™æ ·å°±èƒ½å­˜å‚¨æµ·é‡æ•°æ®äº†ï¼</p>
<h3 data-id="heading-13">å…¶ä»–å®è·µ</h3>
<p>è¿™æ—¶é±¼çš®èµ°è¿‡æ¥æ‹äº†æ‹é˜¿å¤çš„è‚©è†€ï¼šå°ä¼™å­å¹´è½»æœ‰ä¸ºå•Šï¼</p>
<p>å°é˜¿å·´ï¼ŒMySQL ç”Ÿäº§ç¯å¢ƒå®è·µçš„çŸ¥è¯†ç‚¹è¿˜æœ‰å¾ˆå¤šã€‚æ¯”å¦‚ï¼š</p>
<p>1ï¼‰æƒé™ç®¡ç†ï¼šä¸è¦æ‰€æœ‰äººéƒ½ç”¨ root è´¦å·ï¼Œé£é™©å¤ªå¤§ï¼Œè¦ç»™ä¸åŒçš„äººåˆ†é…ä¸åŒçš„æƒé™ã€‚</p>
<p>2ï¼‰äº‘æ•°æ®åº“æœåŠ¡ï¼šæä¾›äº†ç°æˆçš„ MySQL é›†ç¾¤æ¶æ„ã€ç›‘æ§ç³»ç»Ÿã€è‡ªåŠ¨å¤‡ä»½ã€æ•°æ®è¿ç§»ç­‰ï¼Œæ¯”è‡ªå·±è¿ç»´çœå¿ƒå¤šäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51ff9e136dfe49a685920b41fef5ec3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=YR0Jx9J5aM3HtOSowGZT8KZCA44%3D" alt="" loading="lazy"/></p>
<p>3ï¼‰è°ƒä¼˜æŠ€å·§ï¼šç¡¬ä»¶ä¼˜åŒ–ã€æ•°æ®åº“é…ç½®ä¼˜åŒ–ã€åº“è¡¨è®¾è®¡ä¼˜åŒ–ã€SQL ä¼˜åŒ–ã€è¿æ¥æ± ä¼˜åŒ–ç­‰ç­‰ã€‚</p>
<p>4ï¼‰å¸¸è§é—®é¢˜ï¼šè¿˜æœ‰æ­»é”æ’æŸ¥ã€å¤§è¡¨çš„åœ¨çº¿å˜æ›´ã€æ•°æ®è¿ç§»ã€ä¸»ä»å»¶è¿Ÿå¤„ç†ç­‰ç­‰ï¼Œé‡åˆ°äº†å†å»è§£å†³ã€‚</p>
<p>ä½ ç¾æ„§åœ°æŠ¬ä¸èµ·å¤´ï¼šæˆ‘ä»¥ä¸ºè‡ªå·±å·²ç»æŒæ¡äº†æ•°æ®åº“ï¼ŒåŸæ¥åªæ˜¯å­¦äº†ä¸ªçš®æ¯›â€¦â€¦</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c1a02b0de9b47c6bdca001ae1639907~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=2Kz8WKJsacLDNNqiUILw%2Ft74v10%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14">ç¬¬äº”é˜¶æ®µï¼šæ·±å…¥åº•å±‚åŸç†</h2>
<p>äºæ˜¯ï¼Œä½ ä¸»åŠ¨æ‰¾åˆ°é˜¿å¤ï¼šæˆ‘æƒ³æ·±å…¥å­¦ä¹  MySQLï¼Œä¸èƒ½åªåœç•™åœ¨ä¼šç”¨çš„å±‚é¢ï¼Œè¯·é—®æ€ä¹ˆå­¦ä¹ åº•å±‚åŸç†å•Šï¼Ÿ</p>
<p>é˜¿å¤æœ‰äº›æƒŠè®¶ï¼šå’¦ï¼Ÿä½ ä¸ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.mianshiya.com%2F" target="_blank" title="https://www.mianshiya.com/" ref="nofollow noopener noreferrer">èƒŒå…«è‚¡æ–‡</a> çš„ä¹ˆï¼Ÿåˆ·åˆ·é¢˜å°±å¥½äº†å‘€ï¼</p>
<p>ä½ éœ‡æƒŠäº†ï¼šç°åœ¨çš„å®ä¹ ç”Ÿï¼Œç«Ÿç„¶ææ€–å¦‚æ–¯ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da53e10a02d24f519d7f91204e0f2a55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=yuc6M%2B%2BTyrhx9uUE8BavkHDODTE%3D" alt="" loading="lazy"/></p>
<p>é±¼çš®ï¼šé˜¿å¤ä½ åˆ«é€—ä»–äº†ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥å¸¦ç€é—®é¢˜å­¦ä¹ ã€‚æ¯”å¦‚ <strong>MySQL æ˜¯å¦‚ä½•å®ç°é«˜æ•ˆæŸ¥è¯¢çš„</strong> ï¼Ÿ</p>
<p>ä½ æƒ³äº†æƒ³ï¼šåŠ ç´¢å¼•ï¼Ÿ</p>
<p>é±¼çš®ï¼šå¯¹ï¼Œä½†è¿™åªæ˜¯ä½¿ç”¨å±‚é¢ã€‚åº•å±‚å®ç°æœ‰å¾ˆå¤šæŠ€æœ¯ï¼Œæ¯”å¦‚é«˜æ•ˆçš„å­˜å‚¨å¼•æ“ï¼ˆInnoDBï¼‰ã€ä¼˜ç§€çš„ç´¢å¼•ç»“æ„ï¼ˆB+ æ ‘ï¼‰ã€ç¼“å†²æ± æœºåˆ¶ã€æŸ¥è¯¢ä¼˜åŒ–å™¨ç­‰ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65ebd986de9b41bdb7baa8491d35fc0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=JEQI5jUarW1Q1xBa86uWwoqIfwU%3D" alt="" loading="lazy"/></p>
<p>æ¯”å¦‚æˆ‘è€ƒè€ƒä½ ï¼Œä¸‹é¢ä¸¤ä¸ª SQL è¯­å¥å“ªä¸ªæ‰§è¡Œæ›´å¿«ï¼Ÿ</p>
<pre><code class="hljs language-sql" lang="sql"># <span class="hljs-keyword">SQL</span> <span class="hljs-number">1</span>: ä½¿ç”¨ <span class="hljs-keyword">OR</span>
<span class="hljs-keyword">SELECT</span>Â <span class="hljs-operator">*</span>Â <span class="hljs-keyword">FROM</span>Â studentÂ <span class="hljs-keyword">WHERE</span>Â class_idÂ <span class="hljs-operator">=</span>Â <span class="hljs-number">1</span>Â <span class="hljs-keyword">OR</span>Â class_idÂ <span class="hljs-operator">=</span>Â <span class="hljs-number">2</span>;
â€‹
# <span class="hljs-keyword">SQL</span> <span class="hljs-number">2</span>: ä½¿ç”¨ <span class="hljs-keyword">IN</span>
<span class="hljs-keyword">SELECT</span>Â <span class="hljs-operator">*</span>Â <span class="hljs-keyword">FROM</span>Â studentÂ <span class="hljs-keyword">WHERE</span>Â class_idÂ <span class="hljs-keyword">IN</span>Â (<span class="hljs-number">1</span>,Â <span class="hljs-number">2</span>);
</code></pre>
<p>ä½ ï¼šé¢â€¦â€¦ ç¬¬ 2 ä¸ªï¼Ÿå› ä¸ºå®ƒæ›´ç®€çŸ­ã€‚</p>
<p>é±¼çš®ï¼šå“¼å“¼ï¼Œç­”æ¡ˆæ˜¯ <strong>å‡ ä¹ä¸€æ ·å¿«</strong>ï¼å› ä¸º MySQL çš„æŸ¥è¯¢ä¼˜åŒ–å™¨éå¸¸æ™ºèƒ½ï¼Œå®ƒä¼šåˆ†æè¯­å¥ã€å°†å®ƒä»¬å¤„ç†æˆç›¸åŒçš„é€»è¾‘ç»“æ„ï¼Œå†å»æ‰§è¡Œã€‚</p>
<p>è¿™å°±æ˜¯ MySQL èƒ½é«˜æ•ˆæŸ¥è¯¢çš„åŸå› ä¹‹ä¸€ï¼Œå¸¦ç€è¿™äº›é—®é¢˜å»é˜…è¯»ç›¸å…³æ–‡ç« ï¼Œæˆ–è€…ç›´æ¥åƒé˜¿å¤è¯´çš„åˆ·ä¸€åˆ· MySQL é¢è¯•é¢˜ï¼Œå°±èƒ½å¿«é€Ÿå­¦ä¼šå¾ˆå¤šæ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0449e9847ad34514be5659c8564e324b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=gMGyTxQcrWg0gXR8B4SGTOKhFeA%3D" alt="img" loading="lazy"/></p>
<p>å¦‚æœæƒ³ç³»ç»Ÿå­¦ä¹ ï¼Œå¯ä»¥çœ‹çœ‹ã€ŠMySQL æ˜¯æ€æ ·è¿è¡Œçš„ã€‹ã€ã€Šé«˜æ€§èƒ½ MySQLã€‹è¿™å‡ æœ¬ä¹¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bd218e3ccd942169aeb690bf67a25c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=EMnlFcT2LYdGjMRWecr801EdrUg%3D" alt="img" loading="lazy"/></p>
<p>è¦è®°ä½ï¼Œå­¦ä¹ åº•å±‚åŸç†ä¸åªæ˜¯ä¸ºäº†åº”ä»˜é¢è¯•ï¼Œè€Œæ˜¯ä¸ºäº†æ›´å¥½åœ°ä½¿ç”¨ MySQLï¼Œé‡åˆ°é—®é¢˜æ—¶èƒ½å¤Ÿå¿«é€Ÿå®šä½å’Œè§£å†³ã€‚</p>
<p>ä½ ï¼šå¥½çš„ï¼Œæˆ‘è¿™å°±å»å­¦ï¼</p>
<h2 data-id="heading-15">ç»“å°¾</h2>
<p>è‹¥å¹²å¹´åï¼Œä½ å·²ç»æˆä¸ºäº†å¤§å‚çš„æ•°æ®åº“ä¸“å®¶ã€‚ä¸ä»…èƒ½ç†Ÿç»ƒè®¾è®¡åº“è¡¨ã€ä¼˜åŒ–æ€§èƒ½ï¼Œæ­ä¸ª MySQL é›†ç¾¤ä¹Ÿæ˜¯æ‰‹æ‹¿æŠŠæçš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/deb130295ac049ffbbad83960f3333b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=zktK%2ByGU7pqcUX300L%2Bwx%2B%2FHPWg%3D" alt="img" loading="lazy"/></p>
<p>ä½ ä¹Ÿåƒé±¼çš®å½“æ—¶ä¸€æ ·ï¼Œè€å¿ƒåœ°ç»™æ–°äººåˆ†äº«å­¦ä¹ æ•°æ®åº“çš„ç»éªŒï¼šæ•°æ®åº“æ˜¯å®æˆ˜å‹æŠ€æœ¯ï¼Œä¸€å®šè¦å¤šåŠ¨æ‰‹å®è·µã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df39b61c83b24a3094d0195773bf27eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=i5XF4WvAuXqFJMmZYNRXtLCBHQ4%3D" alt="img" loading="lazy"/></p>
<p>å†æ¬¡é‡åˆ°é±¼çš®æ˜¯åœ¨ä¸€æ¡æ˜æš—çš„å°å··ï¼Œæ­¤æ—¶çš„ä»–å¹´è¿‡ 35ï¼Œç°å¤´åœŸè„¸ã€‚ä½ ä»€ä¹ˆéƒ½æ²¡è¯´ï¼Œåªæ˜¯ç»™ä»–ç‚¹äº†ä¸ªèµï¼ŒæŠ•äº† 2 ä¸ªå¸ï¼Œä¸æ‰“æ‰°ï¼Œæ˜¯ä½ çš„æ¸©æŸ”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0fbde7a8ee245ad893af17c6eda5ee5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251387&amp;x-signature=LyZdcowTV0a8UJJ6mwuZp1F1N%2Bk%3D" alt="img" loading="lazy"/></p>
<p>æ›´è¯¦ç»†çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.codefather.cn%2Fcourse%2F1789189862986850306%2Fsection%2F1789190581420793858" target="_blank" title="https://www.codefather.cn/course/1789189862986850306/section/1789190581420793858" ref="nofollow noopener noreferrer">MySQL æ•°æ®åº“å­¦ä¹ è·¯çº¿</a>ï¼Œå¯ä»¥åœ¨ç¼–ç¨‹å¯¼èˆªå…è´¹é˜…è¯»å“¦ã€‚</p>
<h2 data-id="heading-16">æ›´å¤š</h2>
<p>ğŸ’» ç¼–ç¨‹å­¦ä¹ äº¤æµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fcode-nav" target="_blank" title="https://github.com/liyupi/code-nav" ref="nofollow noopener noreferrer">ç¼–ç¨‹å¯¼èˆª</a> ğŸ“ƒ ç®€å†å¿«é€Ÿåˆ¶ä½œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Flaoyujianli" target="_blank" title="https://github.com/liyupi/laoyujianli" ref="nofollow noopener noreferrer">è€é±¼ç®€å†</a> âœï¸ é¢è¯•åˆ·é¢˜ç¥å™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fmianshiya" target="_blank" title="https://github.com/liyupi/mianshiya" ref="nofollow noopener noreferrer">é¢è¯•é¸­</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»€ä¹ˆæ˜¯æ¨¡å—è”é‚¦?ï¼ˆModule Federationï¼‰]]></title>    <link>https://juejin.cn/post/7578780780027215881</link>    <guid>https://juejin.cn/post/7578780780027215881</guid>    <pubDate>2025-12-02T03:37:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578780780027215881" data-draft-id="7578820376999133235" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»€ä¹ˆæ˜¯æ¨¡å—è”é‚¦?ï¼ˆModule Federationï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2025-12-02T03:37:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="eason_fan"/> <meta itemprop="url" content="https://juejin.cn/user/2995517308808877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»€ä¹ˆæ˜¯æ¨¡å—è”é‚¦?ï¼ˆModule Federationï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2995517308808877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    eason_fan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:37:54.000Z" title="Tue Dec 02 2025 03:37:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰ç«¯æ¨¡å—å…±äº«çš„ä¼ ç»Ÿå›°å¢ƒ</h2>
<p>åœ¨å¤§å‹å‰ç«¯é¡¹ç›®æˆ–å¤šåº”ç”¨åä½œåœºæ™¯ä¸­ï¼Œâ€œæ¨¡å—å…±äº«â€ æ˜¯ç»•ä¸å¼€çš„éœ€æ±‚ â€”â€” æ¯”å¦‚å¤šä¸ªåº”ç”¨å¤ç”¨åŒä¸€å¥—æŒ‰é’®ç»„ä»¶ã€å·¥å…·å‡½æ•°ï¼Œæˆ–ä¸åŒå›¢é˜Ÿåä½œå¼€å‘æ—¶å…±äº«åŸºç¡€æ¨¡å—ã€‚ä½†åœ¨æ¨¡å—è”é‚¦ï¼ˆModule Federationï¼‰å‡ºç°å‰ï¼Œä¼ ç»Ÿæ–¹æ¡ˆå§‹ç»ˆå­˜åœ¨éš¾ä»¥è§£å†³çš„ç—›ç‚¹ï¼š</p>
<h3 data-id="heading-1">1. npm åŒ…å…±äº«ï¼šè¿­ä»£æ•ˆç‡ä½ä¸‹</h3>
<p>å°†å…¬å…±ç»„ä»¶æ‰“åŒ…æˆ npm åŒ…æ˜¯æœ€å¸¸è§çš„æ–¹å¼ï¼Œä½†æµç¨‹ç¹çï¼šä¿®æ”¹ç»„ä»¶åéœ€é‡æ–°å‘å¸ƒç‰ˆæœ¬ï¼Œæ‰€æœ‰ä¾èµ–è¯¥åŒ…çš„åº”ç”¨éƒ½è¦æ‰‹åŠ¨æ›´æ–°ä¾èµ–ã€é‡æ–°æ„å»ºéƒ¨ç½²ã€‚å¯¹äºé¢‘ç¹è¿­ä»£çš„å†…éƒ¨ç»„ä»¶åº“ï¼Œè¿™ç§ â€œå‘å¸ƒ - å®‰è£… - é‡æ„â€ çš„å¾ªç¯ä¸¥é‡æ‹–æ…¢å¼€å‘æ•ˆç‡ï¼Œä¸”å®¹æ˜“å‡ºç° â€œç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„å…¼å®¹é—®é¢˜â€ã€‚</p>
<h3 data-id="heading-2">2. CDN ç›´æ¥å¼•å…¥ï¼šç²—ç³™ä¸”æ˜“å‡ºé—®é¢˜</h3>
<p>ä¸ºäº†è·³è¿‡ npm å‘å¸ƒæµç¨‹ï¼Œéƒ¨åˆ†å›¢é˜Ÿä¼šå°†ç»„ä»¶æ‰“åŒ…æˆ umd æ ¼å¼ä¸¢åˆ° CDNï¼Œæ¶ˆè´¹æ–¹é€šè¿‡ 
</p><ul>
<li>ä¾èµ–éœ€æ‰‹åŠ¨ç®¡ç†ï¼šå¦‚æœå…±äº«ç»„ä»¶ä¾èµ– Reactã€Vue ç­‰åº“ï¼Œæ¶ˆè´¹æ–¹å¿…é¡»æ‰‹åŠ¨å¼•å…¥å¯¹åº”ç‰ˆæœ¬ï¼Œå¦åˆ™ä¼šå‡ºç° â€œæ¨¡å—æœªå®šä¹‰â€ çš„è¿è¡Œæ—¶é”™è¯¯ï¼›</li>
</ul>

<ul>
<li>å…¨å±€å˜é‡æ±¡æŸ“ï¼šumd åŒ…é€šå¸¸æŒ‚è½½åˆ° window ä¸Šï¼Œå¤šä¸ªæ¨¡å—å¯èƒ½å‡ºç°å‘½åå†²çªï¼›</li>
</ul>

<ul>
<li>æ— æ³•æŒ‰éœ€åŠ è½½ï¼š
</li></ul>

<ul>
<li>æ— ç‰ˆæœ¬æ§åˆ¶ï¼šCDN èµ„æºæ›´æ–°åï¼Œéœ€æ‰‹åŠ¨å¤„ç†ç¼“å­˜æˆ–ç‰ˆæœ¬å·ï¼Œå®¹æ˜“å‡ºç° â€œæ—§ç‰ˆæœ¬ç¼“å­˜å¯¼è‡´çš„åŠŸèƒ½å¼‚å¸¸â€ã€‚</li>
</ul>
<h3 data-id="heading-3">3. æ—©æœŸå¾®å‰ç«¯ï¼šè€¦åˆåº¦é«˜ï¼Œå…±äº«ç²’åº¦ç²—</h3>
<p>æ—©æœŸå¾®å‰ç«¯æ–¹æ¡ˆï¼ˆå¦‚ qiankunï¼‰æ›´ä¾§é‡ â€œåº”ç”¨çº§åµŒå…¥â€â€”â€” å°†å¤šä¸ªç‹¬ç«‹åº”ç”¨æ•´åˆæˆä¸€ä¸ªæ•´ä½“ï¼Œä½†è·¨åº”ç”¨å…±äº«ç»„ä»¶ / æ¨¡å—æ—¶éœ€é¢å¤–é€‚é…ï¼ˆå¦‚é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶ä¼ é€’çŠ¶æ€ï¼‰ï¼Œé›†æˆæˆæœ¬é«˜ï¼Œä¸”å…±äº«ç²’åº¦ä»…åœç•™åœ¨ â€œæ•´ä¸ªåº”ç”¨â€ï¼Œæ— æ³•å®ç°ç»†ç²’åº¦çš„ç»„ä»¶ / å·¥å…·å‡½æ•°å…±äº«ã€‚</p>
<p>è¿™äº›ç—›ç‚¹çš„æ ¸å¿ƒçŸ›ç›¾çš„æ˜¯ï¼š<strong>ä¼ ç»Ÿæ–¹æ¡ˆæ— æ³•åœ¨ â€œé«˜æ•ˆè¿­ä»£â€â€œæŒ‰éœ€åŠ è½½â€â€œä¾èµ–è‡ªåŠ¨ç®¡ç†â€ ä¹‹é—´æ‰¾åˆ°å¹³è¡¡</strong>ï¼Œè€Œæ¨¡å—è”é‚¦çš„å‡ºç°ï¼Œæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€æ ¸å¿ƒçŸ›ç›¾ã€‚</p>
<h2 data-id="heading-4">äºŒã€æ¨¡å—è”é‚¦ï¼šå‰ç«¯æ¨¡å—å…±äº«çš„ç»ˆææ–¹æ¡ˆ</h2>
<p>æ¨¡å—è”é‚¦ï¼ˆModule Federationï¼Œç®€ç§° MFï¼‰æ˜¯ Webpack 5 æ¨å‡ºçš„æ ¸å¿ƒç‰¹æ€§ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š<strong>æ‰“ç ´åº”ç”¨è¾¹ç•Œï¼Œè®©å¤šä¸ªç‹¬ç«‹æ„å»ºçš„å‰ç«¯åº”ç”¨ï¼Œåƒä½¿ç”¨æœ¬åœ°æ¨¡å—ä¸€æ ·æŒ‰éœ€å…±äº«ç»„ä»¶ã€å·¥å…·å‡½æ•°ï¼Œä¸”æ— éœ€æ‰‹åŠ¨å¤„ç†ä¾èµ–å’Œéƒ¨ç½²æµç¨‹</strong>ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå®ƒå°±åƒä¸€ä¸ª â€œå‰ç«¯æ¨¡å—çš„å…±äº«æ¢çº½â€â€”â€” æ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥ä½œä¸º â€œæ¨¡å—æä¾›è€…â€ï¼ˆæš´éœ²è‡ªèº«æ¨¡å—ï¼‰æˆ– â€œæ¨¡å—æ¶ˆè´¹è€…â€ï¼ˆåŠ è½½å…¶ä»–åº”ç”¨çš„æ¨¡å—ï¼‰ï¼Œç”šè‡³ä¸¤è€…å…¼å…·ï¼Œå½¢æˆçµæ´»çš„æ¨¡å—å…±äº«ç”Ÿæ€ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€æ¨¡å—è”é‚¦çš„æ ¸å¿ƒåŸç†ï¼ˆç»“åˆé€šä¿—ç†è§£ï¼‰</h2>
<p>å¾ˆå¤šäººç¬¬ä¸€æ¬¡æ¥è§¦æ¨¡å—è”é‚¦æ—¶ï¼Œä¼šæœ‰è¿™æ ·çš„ç›´è§‚è®¤çŸ¥ï¼šâ€œæ˜¯ä¸æ˜¯æŠŠå…±äº«ç»„ä»¶æ”¾åˆ° CDN ä¸Šï¼Œæ¶ˆè´¹æ–¹é€šè¿‡ Webpack è¯†åˆ« import è¯­å¥ï¼Œå†è¯·æ±‚ CDN èµ„æºå¹¶æ³¨å…¥ä½¿ç”¨ï¼Ÿâ€â€”â€” è¿™ä¸ªç†è§£æ–¹å‘å®Œå…¨æ­£ç¡®ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºè¿™ä¸ªè®¤çŸ¥ï¼Œæ‹†è§£å…¶åº•å±‚åŸç†ï¼š</p>
<h3 data-id="heading-6">æ ¸å¿ƒåŸç†ä¸€å¥è¯æ€»ç»“</h3>
<p>æ¨¡å—è”é‚¦æœ¬è´¨æ˜¯ï¼š<strong>å°†å…±äº«æ¨¡å—ï¼ˆå¸¦ä¾èµ–å…ƒä¿¡æ¯ï¼‰éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼ˆå¦‚ CDNï¼‰ï¼ŒWebpack é€šè¿‡ â€œç¼–è¯‘æ—¶æ ‡è®° + è¿è¡Œæ—¶åŠ è½½â€ï¼Œè®©æ¶ˆè´¹æ–¹ç”¨åŸç”Ÿ import è¯­æ³•åŠ è½½è¿œç¨‹æ¨¡å—ï¼›å½“ä»£ç æ‰§è¡Œåˆ°è¯¥ import æ—¶ï¼Œè‡ªåŠ¨è¯·æ±‚è¿œç¨‹èµ„æºï¼Œç»æ ¼å¼é€‚é…å’Œä¾èµ–å¤„ç†åï¼Œæ³¨å…¥å®¿ä¸»åº”ç”¨çš„æ¨¡å—ç³»ç»Ÿï¼Œå®ç° â€œæœ¬åœ°ä½¿ç”¨â€ çš„ä½“éªŒ</strong>ã€‚</p>
<h3 data-id="heading-7">åŸç†æ‹†è§£ï¼ˆåˆ† 4 æ­¥ï¼‰</h3>
<h4 data-id="heading-8">1. æ¨¡å—æä¾›è€…ï¼šæ‰“åŒ… â€œå¸¦å…ƒä¿¡æ¯çš„å…±äº«æ¨¡å—â€</h4>
<p>æ¨¡å—æä¾›è€…ï¼ˆç§°ä¸º Remote åº”ç”¨ï¼‰æ‰“åŒ…æ—¶ï¼ŒWebpack ä¼šåšä¸¤ä»¶å…³é”®äº‹ï¼š</p>
<ul>
<li>ç”Ÿæˆ remoteEntry.jsï¼šè¿™ä¸æ˜¯æ¨¡å—æœ¬èº«ï¼Œè€Œæ˜¯ â€œæ¨¡å—å¯¼èˆªæ–‡ä»¶â€â€”â€” åŒ…å«æ¨¡å—æ¸…å•ï¼ˆæš´éœ²äº†å“ªäº›æ¨¡å—ã€æ¨¡å—çš„çœŸå®åœ°å€ï¼‰ã€ä¾èµ–å…ƒä¿¡æ¯ï¼ˆæ¨¡å—ä¾èµ–çš„åº“å¦‚ React/Vueï¼‰ã€åŠ è½½å™¨å‡½æ•°ï¼ˆç”¨äºåç»­è§£ææ¨¡å—ï¼‰ï¼›</li>
</ul>

<ul>
<li>æ‹†åˆ†æ¨¡å— chunkï¼šå°†æš´éœ²çš„ç»„ä»¶ / å·¥å…·å‡½æ•°æ‹†æˆç‹¬ç«‹çš„ JS chunkï¼ˆå¦‚ Button ç»„ä»¶å¯¹åº” 123.jsï¼‰ï¼Œå¹¶éƒ¨ç½²åˆ° CDN æˆ–è¿œç¨‹æœåŠ¡å™¨ã€‚</li>
</ul>
<p>è¿™é‡Œçš„å…³é”®æ˜¯ï¼š<strong>å…±äº«çš„ä¸æ˜¯ â€œè£¸æ¨¡å—â€ï¼Œè€Œæ˜¯ â€œå¸¦ä¾èµ–å…ƒä¿¡æ¯çš„æ¨¡å—å•å…ƒâ€</strong> ï¼Œé¿å…äº†ä¼ ç»Ÿ CDN å¼•å…¥æ—¶ â€œä¾èµ–æ‰‹åŠ¨ç®¡ç†â€ çš„é—®é¢˜ã€‚</p>
<h4 data-id="heading-9">2. æ¨¡å—æ¶ˆè´¹è€…ï¼šç¼–è¯‘æ—¶æ ‡è®°è¿œç¨‹æ¨¡å—</h4>
<p>æ¨¡å—æ¶ˆè´¹è€…ï¼ˆç§°ä¸º Host åº”ç”¨ï¼‰é…ç½® Webpack æ—¶ï¼Œä¼šå£°æ˜è¦åŠ è½½çš„è¿œç¨‹åº”ç”¨ï¼ˆå¦‚ app2: 'app2@<a href="https://link.juejin.cn?target=http%3A%2F%2Fcdn.example.com%2FremoteEntry.js" target="_blank" title="http://cdn.example.com/remoteEntry.js" ref="nofollow noopener noreferrer">cdn.example.com/remoteEntryâ€¦</a>'ï¼‰ã€‚Webpack ç¼–è¯‘æ—¶ä¼šè¯†åˆ«è¿™ç±»è¿œç¨‹æ¨¡å—çš„ import è¯­å¥ï¼ˆå¦‚ import 'app2/Button'ï¼‰ï¼Œå¹¶åš â€œæ ‡è®°â€â€”â€” å‘Šè¯‰è¿è¡Œæ—¶ï¼šâ€œè¿™ä¸ªæ¨¡å—ä¸æ˜¯æœ¬åœ°çš„ï¼Œéœ€è¦ä»è¿œç¨‹åŠ è½½â€ã€‚</p>
<p>è¿™ä¸€æ­¥å°±åƒä½ ç†è§£çš„ â€œWebpack çš„ switch åŠŸèƒ½â€ï¼šç¼–è¯‘æ—¶ç»™è¿œç¨‹æ¨¡å—æ‰“æ ‡ç­¾ï¼Œè¿è¡Œæ—¶é‡åˆ°æ ‡ç­¾å°±åˆ‡æ¢åˆ° â€œè¿œç¨‹åŠ è½½é€»è¾‘â€ï¼Œè€Œéæœ¬åœ°æ¨¡å—çš„ â€œæ–‡ä»¶è¯»å–é€»è¾‘â€ã€‚</p>
<h4 data-id="heading-10">3. è¿è¡Œæ—¶ï¼šå¼‚æ­¥è¯·æ±‚è¿œç¨‹èµ„æºï¼ˆéç®€å• script æ’å…¥ï¼‰</h4>
<p>å½“å®¿ä¸»åº”ç”¨è¿è¡Œåˆ°è¿œç¨‹æ¨¡å—çš„ import è¯­å¥æ—¶ï¼Œä¼šè§¦å‘ä»¥ä¸‹æµç¨‹ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šåŠ è½½ remoteEntry.jsï¼šé€šè¿‡ Webpack å†…ç½®çš„å¼‚æ­¥åŠ è½½é€»è¾‘ï¼ˆè€Œéç›´æ¥æ’å…¥ 
</li></ul>

<ul>
<li>ç¬¬äºŒæ­¥ï¼šè§£ææ¨¡å—åœ°å€ï¼šremoteEntry.js æ‰§è¡Œåï¼Œé€šè¿‡å…¶å†…ç½®çš„æ¨¡å—æ¸…å•ï¼Œæ‰¾åˆ°ç›®æ ‡æ¨¡å—ï¼ˆå¦‚ app2/Buttonï¼‰å¯¹åº”çš„çœŸå® CDN åœ°å€ï¼ˆå¦‚ <a href="https://link.juejin.cn?target=http%3A%2F%2Fcdn.example.com%2F123.js" target="_blank" title="http://cdn.example.com/123.js" ref="nofollow noopener noreferrer">cdn.example.com/123.js</a>ï¼‰ï¼›</li>
</ul>

<ul>
<li>ç¬¬ä¸‰æ­¥ï¼šåŠ è½½ç›®æ ‡æ¨¡å—ï¼šé€šè¿‡ Webpack å°è£…çš„å¼‚æ­¥åŠ è½½å‡½æ•°ï¼ˆå¦‚ <strong>webpack_require</strong>.eï¼‰è¯·æ±‚ç›®æ ‡æ¨¡å—çš„ JS chunkï¼Œè¿™ä¸€æ­¥åŒæ ·ä¸æ˜¯ç®€å•æ’å…¥ 
</li></ul>
<h4 data-id="heading-11">4. æ³¨å…¥ä½¿ç”¨ï¼šä¾èµ–è‡ªåŠ¨å¤„ç† + æ ¼å¼é€‚é…</h4>
<p>ç›®æ ‡æ¨¡å—åŠ è½½å®Œæˆåï¼ŒWebpack ä¼šåšæœ€åä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>ä¾èµ–è‡ªåŠ¨å¤ç”¨ï¼šå¦‚æœè¿œç¨‹æ¨¡å—ä¾èµ–çš„åº“ï¼ˆå¦‚ Reactï¼‰ï¼Œå®¿ä¸»åº”ç”¨å·²åŠ è½½ï¼Œåˆ™ç›´æ¥å¤ç”¨ï¼Œé¿å…é‡å¤æ‰“åŒ…ï¼›è‹¥æœªåŠ è½½ï¼Œåˆ™è‡ªåŠ¨åŠ è½½å…±äº«ä¾èµ–ï¼ˆé€šè¿‡ shared é…ç½®æ§åˆ¶ï¼‰ï¼›</li>
</ul>

<ul>
<li>æ ¼å¼é€‚é…ä¸æ³¨å…¥ï¼šå°†è¿œç¨‹æ¨¡å—çš„ä»£ç æ ¼å¼ï¼Œè½¬æ¢æˆå®¿ä¸»åº”ç”¨èƒ½è¯†åˆ«çš„æ¨¡å—æ ¼å¼ï¼ˆé¿å…å…¨å±€æ±¡æŸ“ï¼‰ï¼Œå¹¶æ³¨å…¥å®¿ä¸»çš„æ¨¡å—ç³»ç»Ÿ â€”â€” æ­¤æ—¶ï¼Œè¿œç¨‹æ¨¡å—å°±åƒæœ¬åœ°æ¨¡å—ä¸€æ ·ï¼Œå¯ç›´æ¥ä½¿ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-12">ä¸ â€œç®€å• CDN å¼•å…¥â€ çš„æ ¸å¿ƒåŒºåˆ«</h3>


































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>ç®€å• CDN å¼•å…¥ï¼ˆumd åŒ…ï¼‰</th><th>æ¨¡å—è”é‚¦</th></tr></thead><tbody><tr><td>ä¾èµ–ç®¡ç†</td><td>æ‰‹åŠ¨å¼•å…¥ï¼Œæ˜“å†²çª</td><td>è‡ªåŠ¨è¯†åˆ«ä¾èµ–ï¼Œå…±äº«å¤ç”¨</td></tr><tr><td>åŠ è½½æ–¹å¼</td><td>æ’å…¥ 
</td><td>å¼‚æ­¥è¯·æ±‚ Webpack æ ¼å¼ chunkï¼Œæ— å…¨å±€æ±¡æŸ“</td></tr><tr><td>æŒ‰éœ€åŠ è½½</td><td>ä¸æ”¯æŒï¼ŒåŒæ­¥åŠ è½½</td><td>æ”¯æŒï¼Œç”¨åˆ°æ‰åŠ è½½</td></tr><tr><td>ç‰ˆæœ¬æ§åˆ¶</td><td>éœ€æ‰‹åŠ¨ç®¡ç†ç‰ˆæœ¬å· / ç¼“å­˜</td><td>é€šè¿‡ shared é…ç½®æ§åˆ¶ç‰ˆæœ¬å…¼å®¹</td></tr><tr><td>ä½¿ç”¨ä½“éªŒ</td><td>éœ€ä» window å–æ¨¡å—ï¼Œä½“éªŒå‰²è£‚</td><td>åŸç”Ÿ import è¯­æ³•ï¼Œå’Œæœ¬åœ°æ¨¡å—ä¸€è‡´</td></tr></tbody></table>
<h2 data-id="heading-13">å››ã€æ¨¡å—è”é‚¦çš„å®é™…ä½¿ç”¨æ–¹æ³•ï¼ˆReact ç¤ºä¾‹ï¼‰</h2>
<p>ä¸‹é¢ç”¨ä¸¤ä¸ªåº”ç”¨æ¼”ç¤ºæ ¸å¿ƒç”¨æ³•ï¼šapp1ï¼ˆå®¿ä¸»åº”ç”¨ï¼ŒåŠ è½½è¿œç¨‹æ¨¡å—ï¼‰å’Œ app2ï¼ˆè¿œç¨‹åº”ç”¨ï¼Œæš´éœ²å…±äº«ç»„ä»¶ï¼‰ã€‚</p>
<h3 data-id="heading-14">å‰ç½®æ¡ä»¶</h3>
<ul>
<li>æ„å»ºå·¥å…·ï¼šWebpack 5+ï¼ˆä»… Webpack 5 åŸç”Ÿæ”¯æŒæ¨¡å—è”é‚¦ï¼‰ï¼›</li>
</ul>

<ul>
<li>æŠ€æœ¯æ ˆï¼šReactï¼ˆVue ç”¨æ³•ç±»ä¼¼ï¼Œæ ¸å¿ƒé…ç½®ä¸€è‡´ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-15">1. è¿œç¨‹åº”ç”¨ï¼ˆapp2ï¼šæ¨¡å—æä¾›è€…ï¼‰</h3>
<h4 data-id="heading-16">æ­¥éª¤ 1ï¼šé…ç½® Webpackï¼ˆwebpack.config.jsï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">ModuleFederationPlugin</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>).<span class="hljs-property">container</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'html-webpack-plugin'</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'development'</span>,
  <span class="hljs-attr">devServer</span>: { <span class="hljs-attr">port</span>: <span class="hljs-number">3002</span> }, <span class="hljs-comment">// è¿œç¨‹åº”ç”¨è¿è¡Œç«¯å£</span>
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">uniqueName</span>: <span class="hljs-string">'app2'</span>, <span class="hljs-comment">// è¿œç¨‹åº”ç”¨å”¯ä¸€æ ‡è¯†ï¼ˆé¿å…å†²çªï¼‰</span>
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModuleFederationPlugin</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'app2'</span>, <span class="hljs-comment">// è¿œç¨‹åº”ç”¨åç§°ï¼ˆå®¿ä¸»éœ€é€šè¿‡è¯¥åç§°å¼•ç”¨ï¼‰</span>
      <span class="hljs-attr">filename</span>: <span class="hljs-string">'remoteEntry.js'</span>, <span class="hljs-comment">// æ¨¡å—å¯¼èˆªæ–‡ä»¶ï¼ˆå¿…é¡»å«è¿™ä¸ªåå­—ï¼‰</span>
      <span class="hljs-attr">exposes</span>: {
        <span class="hljs-comment">// æš´éœ²çš„æ¨¡å—ï¼škey æ˜¯å®¿ä¸»å¼•ç”¨çš„è·¯å¾„ï¼Œvalue æ˜¯æœ¬åœ°æ¨¡å—è·¯å¾„</span>
        <span class="hljs-string">'./Button'</span>: <span class="hljs-string">'./src/Button'</span>, <span class="hljs-comment">// æš´éœ² Button ç»„ä»¶</span>
        <span class="hljs-string">'./utils'</span>: <span class="hljs-string">'./src/utils'</span>, <span class="hljs-comment">// æš´éœ²å·¥å…·å‡½æ•°</span>
      },
      <span class="hljs-comment">// å…±äº«ä¾èµ–ï¼šé¿å… React/ReactDOM é‡å¤æ‰“åŒ…</span>
      <span class="hljs-attr">shared</span>: {
        <span class="hljs-attr">react</span>: { <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">eager</span>: <span class="hljs-literal">true</span> }, <span class="hljs-comment">// singletonï¼šå•ä¾‹æ¨¡å¼ï¼›eagerï¼šä¼˜å…ˆåŠ è½½</span>
        <span class="hljs-string">'react-dom'</span>: { <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">eager</span>: <span class="hljs-literal">true</span> },
      },
    }),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({ <span class="hljs-attr">template</span>: <span class="hljs-string">'./public/index.html'</span> }),
  ],
};
</code></pre>
<h4 data-id="heading-17">æ­¥éª¤ 2ï¼šç¼–å†™å…±äº«æ¨¡å—</h4>
<p>åˆ›å»º src/Button.jsxï¼ˆå…±äº«ç»„ä»¶ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App2Button</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">red</span>', <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>æˆ‘æ˜¯ app2 çš„å…±äº«æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}
</code></pre>
<h4 data-id="heading-18">æ­¥éª¤ 3ï¼šå¯åŠ¨è¿œç¨‹åº”ç”¨</h4>
<p>è¿è¡Œ npm run devï¼Œè¿œç¨‹åº”ç”¨ä¼šå¯åŠ¨åœ¨ <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3002%25EF%25BC%258C%25E6%25AD%25A4%25E6%2597%25B6%25E5%258F%25AF%25E9%2580%259A%25E8%25BF%2587" target="_blank" title="http://localhost:3002%EF%BC%8C%E6%AD%A4%E6%97%B6%E5%8F%AF%E9%80%9A%E8%BF%87" ref="nofollow noopener noreferrer">http://localhost:3002ï¼Œæ­¤æ—¶å¯é€šè¿‡</a> <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3002%2FremoteEntry.js" target="_blank" title="http://localhost:3002/remoteEntry.js" ref="nofollow noopener noreferrer">http://localhost:3002/remoteEntry.js</a> è®¿é—®å¯¼èˆªæ–‡ä»¶ã€‚</p>
<h3 data-id="heading-19">2. å®¿ä¸»åº”ç”¨ï¼ˆapp1ï¼šæ¨¡å—æ¶ˆè´¹è€…ï¼‰</h3>
<h4 data-id="heading-20">æ­¥éª¤ 1ï¼šé…ç½® Webpackï¼ˆwebpack.config.jsï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">ModuleFederationPlugin</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>).<span class="hljs-property">container</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'html-webpack-plugin'</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'development'</span>,
  <span class="hljs-attr">devServer</span>: { <span class="hljs-attr">port</span>: <span class="hljs-number">3001</span> }, <span class="hljs-comment">// å®¿ä¸»åº”ç”¨è¿è¡Œç«¯å£</span>
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModuleFederationPlugin</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'app1'</span>, <span class="hljs-comment">// å®¿ä¸»åº”ç”¨åç§°ï¼ˆä»…ç”¨äºæ ‡è¯†ï¼‰</span>
      <span class="hljs-comment">// é…ç½®è¦åŠ è½½çš„è¿œç¨‹åº”ç”¨ï¼škey æ˜¯è¿œç¨‹åº”ç”¨åç§°ï¼Œvalue æ˜¯ "è¿œç¨‹åç§°@å¯¼èˆªæ–‡ä»¶åœ°å€"</span>
      <span class="hljs-attr">remotes</span>: {
        <span class="hljs-attr">app2</span>: <span class="hljs-string">'app2@http://localhost:3002/remoteEntry.js'</span>,
      },
      <span class="hljs-comment">// å…±äº«ä¾èµ–ï¼šå’Œè¿œç¨‹åº”ç”¨ä¿æŒä¸€è‡´ï¼Œé¿å…é‡å¤æ‰“åŒ…</span>
      <span class="hljs-attr">shared</span>: {
        <span class="hljs-attr">react</span>: { <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">eager</span>: <span class="hljs-literal">true</span> },
        <span class="hljs-string">'react-dom'</span>: { <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">eager</span>: <span class="hljs-literal">true</span> },
      },
    }),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({ <span class="hljs-attr">template</span>: <span class="hljs-string">'./public/index.html'</span> }),
  ],
};
</code></pre>
<h4 data-id="heading-21">æ­¥éª¤ 2ï¼šä½¿ç”¨è¿œç¨‹æ¨¡å—</h4>
<p>åˆ›å»º src/App.jsxï¼Œç”¨åŸç”Ÿ import è¯­æ³•åŠ è½½è¿œç¨‹æ¨¡å—ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { lazy, <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-comment">// æŒ‰éœ€åŠ è½½è¿œç¨‹æ¨¡å—ï¼ˆæ¨èï¼‰ï¼šç”¨ lazy + Suspense å¤„ç†åŠ è½½çŠ¶æ€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">App2Button</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'app2/Button'</span>)); <span class="hljs-comment">// æ ¼å¼ï¼šè¿œç¨‹åº”ç”¨åç§°/æš´éœ²çš„æ¨¡å— key</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">App2Utils</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'app2/utils'</span>));
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æˆ‘æ˜¯å®¿ä¸»åº”ç”¨ï¼ˆapp1ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      {/* è¿œç¨‹æ¨¡å—åŠ è½½æ—¶æ˜¾ç¤º fallback */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">"åŠ è½½ä¸­..."</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">App2Button</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h4 data-id="heading-22">æ­¥éª¤ 3ï¼šå¯åŠ¨å®¿ä¸»åº”ç”¨</h4>
<p>è¿è¡Œ npm run devï¼Œè®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3001%25EF%25BC%258C%25E5%258D%25B3%25E5%258F%25AF%25E7%259C%258B%25E5%2588%25B0%25E6%259D%25A5%25E8%2587%25AA" target="_blank" title="http://localhost:3001%EF%BC%8C%E5%8D%B3%E5%8F%AF%E7%9C%8B%E5%88%B0%E6%9D%A5%E8%87%AA" ref="nofollow noopener noreferrer">http://localhost:3001ï¼Œå³å¯çœ‹åˆ°æ¥è‡ª</a> app2 çš„çº¢è‰²æŒ‰é’® â€”â€” æ­¤æ—¶ï¼Œå®¿ä¸»åº”ç”¨å·²æˆåŠŸåŠ è½½å¹¶ä½¿ç”¨è¿œç¨‹æ¨¡å—ï¼Œä¸”å®Œå…¨æ„ŸçŸ¥ä¸åˆ° â€œè¿™æ˜¯è¿œç¨‹èµ„æºâ€ã€‚</p>
<h2 data-id="heading-23">äº”ã€æ¨¡å—è”é‚¦çš„æ ¸å¿ƒç‰¹æ€§ä¸é€‚ç”¨åœºæ™¯</h2>
<h3 data-id="heading-24">æ ¸å¿ƒç‰¹æ€§</h3>
<ol>
<li>ç‹¬ç«‹éƒ¨ç½²ï¼šå®¿ä¸»å’Œè¿œç¨‹åº”ç”¨å¯å„è‡ªç‹¬ç«‹å¼€å‘ã€æ„å»ºã€éƒ¨ç½²ï¼Œä¿®æ”¹è¿œç¨‹æ¨¡å—åæ— éœ€é‡æ„å®¿ä¸»ï¼›</li>
</ol>

<ol start="2">
<li>åŒå‘å…±äº«ï¼šä¸€ä¸ªåº”ç”¨æ—¢å¯ä»¥æ˜¯å®¿ä¸»ï¼ˆåŠ è½½æ¨¡å—ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯è¿œç¨‹ï¼ˆæš´éœ²æ¨¡å—ï¼‰ï¼›</li>
</ol>

<ol start="3">
<li>ä¾èµ–å»é‡ï¼šå…±äº«ä¾èµ–è‡ªåŠ¨å¤ç”¨ï¼Œé¿å…é‡å¤æ‰“åŒ…ï¼Œå‡å°åŒ…ä½“ç§¯ï¼›</li>
</ol>

<ol start="4">
<li>æŒ‰éœ€åŠ è½½ï¼šè¿œç¨‹æ¨¡å—ä»…åœ¨ä½¿ç”¨æ—¶æ‰åŠ è½½ï¼Œä¼˜åŒ–é¦–å±æ€§èƒ½ã€‚</li>
</ol>
<h3 data-id="heading-25">é€‚ç”¨åœºæ™¯</h3>
<ol>
<li>å¾®å‰ç«¯æ¶æ„ï¼šå®ç°ç»†ç²’åº¦çš„ç»„ä»¶ / æ¨¡å—å…±äº«ï¼Œæ›¿ä»£ä¼ ç»Ÿç²—ç²’åº¦çš„åº”ç”¨åµŒå…¥ï¼›</li>
</ol>

<ol start="2">
<li>å¤§å‹åº”ç”¨æ‹†åˆ†ï¼šå°†å·¨å‹åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹æ„å»ºçš„å­åº”ç”¨ï¼ˆå¦‚é¦–é¡µã€è®¢å•é¡µï¼‰ï¼Œå„è‡ªè¿­ä»£ï¼›</li>
</ol>

<ol start="3">
<li>å†…éƒ¨ç»„ä»¶åº“å…±äº«ï¼šæ— éœ€å‘å¸ƒ npm åŒ…ï¼Œå¤šä¸ªåº”ç”¨å®æ—¶ä½¿ç”¨æœ€æ–°ç‰ˆå…¬å…±ç»„ä»¶ï¼›</li>
</ol>

<ol start="4">
<li>è·¨å›¢é˜Ÿåä½œï¼šä¸åŒå›¢é˜Ÿç»´æŠ¤ä¸åŒå­åº”ç”¨ï¼Œé€šè¿‡æ¨¡å—è”é‚¦æ— ç¼é›†æˆï¼Œé™ä½åä½œæˆæœ¬ã€‚</li>
</ol>
<h2 data-id="heading-26">å…­ã€ä½¿ç”¨æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>ä¾èµ–ç‰ˆæœ¬å…¼å®¹ï¼šå…±äº«ä¾èµ–ï¼ˆå¦‚ Reactï¼‰éœ€ä¿è¯ç‰ˆæœ¬å…¼å®¹ï¼Œå¯é€šè¿‡ requiredVersion é…ç½®é™åˆ¶ç‰ˆæœ¬ï¼›</li>
</ol>

<ol start="2">
<li>æ„å»ºå·¥å…·é™åˆ¶ï¼šä»… Webpack 5+ åŸç”Ÿæ”¯æŒï¼ŒVite éœ€ç”¨ vite-plugin-federation æ’ä»¶ï¼ŒRollup æ”¯æŒæœ‰é™ï¼›</li>
</ol>

<ol start="3">
<li>ç¼“å­˜ä¸é™çº§ï¼šç»™ remoteEntry.js å’Œæ¨¡å— chunk åŠ å“ˆå¸Œå€¼ï¼ˆå¦‚ remoteEntry.[hash].jsï¼‰ï¼Œé¿å…ç¼“å­˜é—®é¢˜ï¼›åŒæ—¶éœ€åšå¥½é™çº§æ–¹æ¡ˆï¼ˆå¦‚è¿œç¨‹åº”ç”¨æŒ‚æ‰æ—¶ï¼Œæ˜¾ç¤ºæœ¬åœ°å¤‡ç”¨ç»„ä»¶ï¼‰ï¼›</li>
</ol>

<ol start="4">
<li>æ ·å¼éš”ç¦»ï¼šå…±äº«ç»„ä»¶çš„æ ·å¼éœ€é¿å…æ±¡æŸ“å®¿ä¸»ï¼Œå¯ä½¿ç”¨ CSS Modulesã€Shadow DOM ç­‰æ–¹æ¡ˆã€‚</li>
</ol>
<h2 data-id="heading-27">æ€»ç»“</h2>
<p>æ¨¡å—è”é‚¦çš„æ ¸å¿ƒä»·å€¼ï¼Œæ˜¯è®©å‰ç«¯æ¨¡å—å…±äº«ä» â€œç¹ççš„æ‰‹åŠ¨ç®¡ç†â€ èµ°å‘ â€œè‡ªåŠ¨åŒ–ã€æŒ‰éœ€åŒ–ã€ä½è€¦åˆâ€ã€‚å®ƒæ²¡æœ‰æ”¹å˜å¼€å‘è€…çš„ä½¿ç”¨ä¹ æƒ¯ï¼ˆä»ç”¨ import è¯­æ³•ï¼‰ï¼Œå´è§£å†³äº†ä¼ ç»Ÿæ–¹æ¡ˆçš„æ ¸å¿ƒç—›ç‚¹ï¼Œè®©å¤§å‹å‰ç«¯é¡¹ç›®çš„æ‹†åˆ†ä¸åä½œå˜å¾—æ›´é«˜æ•ˆã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨é¢ä¸´ â€œå¤šåº”ç”¨å…±äº«ç»„ä»¶â€â€œå¤§å‹é¡¹ç›®æ‹†åˆ†â€ ç­‰é—®é¢˜ï¼Œæ¨¡å—è”é‚¦æ— ç–‘æ˜¯å½“å‰æœ€ç†æƒ³çš„è§£å†³æ–¹æ¡ˆ â€”â€” å®ƒä¸ä»…æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œæ›´æ˜¯ä¸€ç§ â€œå‰ç«¯æ¶æ„çš„è®¾è®¡æ€æƒ³â€ï¼š<strong>æ‰“ç ´è¾¹ç•Œï¼Œè®©æ¨¡å—è‡ªç”±æµåŠ¨</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaTreeMapæºç åˆ†æ]]></title>    <link>https://juejin.cn/post/7578724773993562138</link>    <guid>https://juejin.cn/post/7578724773993562138</guid>    <pubDate>2025-12-01T16:19:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578724773993562138" data-draft-id="7578724773993545754" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaTreeMapæºç åˆ†æ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-01T16:19:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="makinohara"/> <meta itemprop="url" content="https://juejin.cn/user/455637552340731"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaTreeMapæºç åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/455637552340731/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    makinohara
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T16:19:20.000Z" title="Mon Dec 01 2025 16:19:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>èŠ‚ç‚¹å†…éƒ¨å±æ€§ï¼š</strong></p>
<p>TreeMapä¸­ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯Entryå¯¹è±¡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â static final class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {
 Â  Â  Â  Â K key<span class="hljs-comment">;</span>
 Â  Â  Â  Â V value<span class="hljs-comment">;</span>
 Â  Â  Â  Â Entry&lt;K,V&gt; left<span class="hljs-comment">;</span>
 Â  Â  Â  Â Entry&lt;K,V&gt; right<span class="hljs-comment">;</span>
 Â  Â  Â  Â Entry&lt;K,V&gt; parent<span class="hljs-comment">;</span>
 Â  Â  Â  Â boolean <span class="hljs-attr">color</span> = BLACK<span class="hljs-comment">;</span>
</code></pre>
<p><strong>ä¸€äº›æˆå‘˜å˜é‡ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"> Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Comparator&lt;? <span class="hljs-built_in">super</span> K&gt; comparator;
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">transient</span> Entry&lt;K,V&gt; root;
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * The number of entries in the tree
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">transient</span> <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<p>comparatorè¡¨ç¤ºæ¯”è¾ƒæ–¹æ³•ï¼Œrootä¸ºæ ¹èŠ‚ç‚¹åœ°å€å€¼ï¼Œsizeä¸ºèŠ‚ç‚¹æ•°é‡ã€‚</p>
<p><strong>ç©ºå‚æ„é€ ï¼š</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"> Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TreeMap</span>()</span> {
 Â  Â  Â  Â comparator = <span class="hljs-literal">null</span>;
 Â   }
</code></pre>
<p><strong>å¸¦å‚æ„é€ ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"> <span class="hljs-keyword">public</span> <span class="hljs-title function_">TreeMap</span><span class="hljs-params">(Comparator&lt;? <span class="hljs-built_in">super</span> K&gt; comparator)</span> {
 Â  Â  Â  Â <span class="hljs-built_in">this</span>.comparator = comparator;
 Â   }
</code></pre>
<p><strong>æ·»åŠ å…ƒç´ ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"> public V put(K key, V value) {
 Â  Â  Â  Â Entry&lt;K,V&gt; <span class="hljs-attr">t</span> = root<span class="hljs-comment">;</span>
 Â  Â  Â  Â if (<span class="hljs-attr">t</span> == null) {
 Â  Â  Â  Â  Â  Â compare(key, key)<span class="hljs-comment">; // type (and possibly null) check</span>
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">root</span> = new Entry&lt;&gt;(key, value, null)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">size</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â modCount++<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â return null<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â  Â  Â  Â int cmp<span class="hljs-comment">;</span>
 Â  Â  Â  Â Entry&lt;K,V&gt; parent<span class="hljs-comment">;</span>
 Â  Â  Â  Â // split comparator and comparable paths
 Â  Â  Â  Â Comparator&lt;? super K&gt; <span class="hljs-attr">cpr</span> = comparator<span class="hljs-comment">;</span>
 Â  Â  Â  Â if (cpr != null) {
 Â  Â  Â  Â  Â  Â do {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">parent</span> = t<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">cmp</span> = cpr.compare(key, t.key)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â if (cmp &lt; 0)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">t</span> = t.left<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if (cmp &gt; 0)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">t</span> = t.right<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return t.setValue(value)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   } while (t != null)<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â  Â  Â  Â else {
 Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">key</span> == null)
 Â  Â  Â  Â  Â  Â  Â  Â throw new NullPointerException()<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â @SuppressWarnings("unchecked")
 Â  Â  Â  Â  Â  Â  Â  Â Comparable&lt;? super K&gt; <span class="hljs-attr">k</span> = (Comparable&lt;? super K&gt;) key<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â do {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">parent</span> = t<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">cmp</span> = k.compareTo(t.key)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â if (cmp &lt; 0)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">t</span> = t.left<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if (cmp &gt; 0)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">t</span> = t.right<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return t.setValue(value)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   } while (t != null)<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â  Â  Â  Â Entry&lt;K,V&gt; <span class="hljs-attr">e</span> = new Entry&lt;&gt;(key, value, parent)<span class="hljs-comment">;</span>
 Â  Â  Â  Â if (cmp &lt; 0)
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">parent.left</span> = e<span class="hljs-comment">;</span>
 Â  Â  Â  Â else
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">parent.right</span> = e<span class="hljs-comment">;</span>
 Â  Â  Â  Â fixAfterInsertion(e)<span class="hljs-comment">;</span>
 Â  Â  Â  Â size++<span class="hljs-comment">;</span>
 Â  Â  Â  Â modCount++<span class="hljs-comment">;</span>
 Â  Â  Â  Â return null<span class="hljs-comment">;</span>
 Â   }
â€‹
</code></pre>
<p>é¦–å…ˆï¼Œè·å–æ ¹èŠ‚ç‚¹çš„åœ°å€å€¼ï¼Œèµ‹å€¼ç»™å±€éƒ¨å˜é‡t</p>
<p>å¦‚æœtä¸ºnullï¼Œè¡¨ç¤ºå½“å‰æ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ ï¼Œåˆ›å»ºæ ¹èŠ‚ç‚¹ï¼Œè¿”å›nullï¼Œè¡¨ç¤ºæ²¡æœ‰è¦†ç›–ä»»ä½•å…ƒç´ ã€‚</p>
<p>å¦‚æœä¸ä¸ºnullï¼Œæ¥ç€å¾€ä¸‹çœ‹ã€‚</p>
<p>cmpæ˜¯ä¸¤ä¸ªå…ƒç´ çš„é”®æ¯”è¾ƒä¹‹åçš„ç»“æœï¼Œè´Ÿæ•°è¡¨ç¤ºå½“å‰è¦æ·»åŠ çš„å…ƒç´ è¾ƒå°ï¼Œæ”¾åœ¨å·¦å­æ ‘ã€‚æ­£æ•°è¡¨ç¤ºå½“å‰è¦æ·»åŠ çš„å…ƒç´ è¾ƒå¤§ï¼Œæ”¾åœ¨å³å­æ ‘ã€‚</p>
<p>æ–°å»ºä¸€ä¸ªåä¸ºparentçš„Entryå¯¹è±¡ï¼Œè¡¨ç¤ºè¦æ·»åŠ çš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚</p>
<p>å°†æˆå‘˜å˜é‡comparatorèµ‹å€¼ç»™cprï¼Œè¡¨ç¤ºæ¯”è¾ƒè§„åˆ™ã€‚å¦‚æœæˆ‘ä»¬é‡‡å–çš„æ˜¯é»˜è®¤çš„è‡ªç„¶æ’åºï¼Œé‚£ä¹ˆcomparatorä¸ºnullï¼Œå³cprä¸ºnull</p>
<p>å¦‚æœæœ‰æ¯”è¾ƒå™¨å¯¹è±¡ï¼Œèµ°ifè¯­å¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â if (cpr != null) {
 Â  Â  Â  Â  Â  Â do {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">parent</span> = t<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">cmp</span> = cpr.compare(key, t.key)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â if (cmp &lt; 0)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">t</span> = t.left<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if (cmp &gt; 0)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">t</span> = t.right<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return t.setValue(value)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   } while (t != null)<span class="hljs-comment">;</span>
 Â  Â  Â   }
</code></pre>
<p>å¦‚æœæ˜¯è‡ªç„¶æ’åºï¼Œèµ°elseè¯­å¥ï¼Œç”±äºç»“æ„ç±»ä¼¼ï¼Œåªåˆ†æelseè¯­å¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â else {
 Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">key</span> == null)
 Â  Â  Â  Â  Â  Â  Â  Â throw new NullPointerException()<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â @SuppressWarnings("unchecked")
 Â  Â  Â  Â  Â  Â  Â  Â Comparable&lt;? super K&gt; <span class="hljs-attr">k</span> = (Comparable&lt;? super K&gt;) key<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â do {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">parent</span> = t<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">cmp</span> = k.compareTo(t.key)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â if (cmp &lt; 0)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">t</span> = t.left<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if (cmp &gt; 0)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">t</span> = t.right<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return t.setValue(value)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   } while (t != null)<span class="hljs-comment">;</span>
 Â  Â  Â   }
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¿™é‡Œå°†keyå¼ºè½¬ä¸ºComparableç±»å‹ï¼Œå› æ­¤é”®å¿…é¡»è¦å®ç°Comparableæ¥å£</p>
<p>æ¥ç€ï¼Œå°†æ ¹èŠ‚ç‚¹å½“ä½œå½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚è°ƒç”¨<code>compareTo</code>æ–¹æ³•ï¼Œæ¯”è¾ƒå½“å‰èŠ‚ç‚¹ä¸æ ¹èŠ‚ç‚¹é”®çš„å¤§å°å…³ç³»ã€‚å¦‚æœä¸ºè´Ÿæ•°ï¼Œå°±å»å·¦å­æ ‘æ‰¾æœ€åˆé€‚çš„çˆ¶èŠ‚ç‚¹ï¼Œåä¹‹å»å³å­æ ‘æ‰¾æœ€åˆé€‚çš„çˆ¶èŠ‚ç‚¹ã€‚å¦‚æœç›¸ç­‰ï¼Œè°ƒç”¨<code>setValue</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â public V setValue(V value) {
 Â  Â  Â  Â  Â  Â V <span class="hljs-attr">oldValue</span> = this.value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">this.value</span> = value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â return oldValue<span class="hljs-comment">;</span>
 Â  Â  Â   }
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–¹æ³•å®é™…ä¸Šæ˜¯åšäº†ä¸€ä¸ªè¦†ç›–ï¼Œå¹¶è¿”å›è¢«è¦†ç›–çš„å€¼ã€‚</p>
<p>å¾ªç¯èµ°è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°tä¸ºç©ºã€‚å†æ¥çœ‹çœ‹tä¸ºç©ºä¹‹ååˆåšäº†äº›ä»€ä¹ˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â Entry&lt;K,V&gt; <span class="hljs-attr">e</span> = new Entry&lt;&gt;(key, value, parent)<span class="hljs-comment">;</span>
 Â  Â  Â  Â if (cmp &lt; 0)
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">parent.left</span> = e<span class="hljs-comment">;</span>
 Â  Â  Â  Â else
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">parent.right</span> = e<span class="hljs-comment">;</span>
 Â  Â  Â  Â fixAfterInsertion(e)<span class="hljs-comment">;</span>
 Â  Â  Â  Â size++<span class="hljs-comment">;</span>
 Â  Â  Â  Â modCount++<span class="hljs-comment">;</span>
 Â  Â  Â  Â return null<span class="hljs-comment">;</span>
</code></pre>
<p>ç”±äºåœ¨æ¯ä¸€æ¬¡doè¯­å¥ä¸­éƒ½ä¼šæŠŠtèµ‹å€¼ç»™parentï¼Œå› æ­¤æœ€ç»ˆparentå¿…ç„¶ä¼šæ˜¯å¾…æ·»åŠ èŠ‚ç‚¹æœ€åˆé€‚çš„çˆ¶èŠ‚ç‚¹ã€‚åˆ›å»ºä¸€ä¸ªEntryå¯¹è±¡è¡¨ç¤ºå¾…æ·»åŠ çš„èŠ‚ç‚¹ï¼Œç„¶åæ ¹æ®cmpçš„å¤§å°å†³å®šå®ƒåº”è¯¥æ”¾çˆ¶èŠ‚ç‚¹çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹ï¼Œå¹¶å»ºç«‹è¿æ¥ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“è¿™å¹¶ä¸ç¬¦åˆçº¢é»‘æ ‘çš„è§„åˆ™ï¼Œå› æ­¤è¿˜è¦åœ¨<code>fixAfterInsertion</code>ä¸­è¿›è¡Œè°ƒæ•´ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"> Â  private void <span class="hljs-built_in">fixAfterInsertion</span>(Entry&lt;K,V&gt; x) {
 Â  Â  Â  Â x<span class="hljs-selector-class">.color</span> = RED;
â€‹
 Â  Â  Â  Â while (x != null &amp;&amp; x != root &amp;&amp; x.parent.color == RED) {
 Â  Â  Â  Â  Â  Â if (parentOf(x) == <span class="hljs-built_in">leftOf</span>(parentOf(parentOf(x)))) {
 Â  Â  Â  Â  Â  Â  Â  Â Entry&lt;K,V&gt; y = <span class="hljs-built_in">rightOf</span>(parentOf(parentOf(x)));
 Â  Â  Â  Â  Â  Â  Â  Â if (colorOf(y) == RED) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setColor</span>(parentOf(x), BLACK);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setColor</span>(y, BLACK);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setColor</span>(parentOf(parentOf(x)), RED);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â x = <span class="hljs-built_in">parentOf</span>(parentOf(x));
 Â  Â  Â  Â  Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (x == rightOf(parentOf(x))) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â x = <span class="hljs-built_in">parentOf</span>(x);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">rotateLeft</span>(x);
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setColor</span>(parentOf(x), BLACK);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setColor</span>(parentOf(parentOf(x)), RED);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">rotateRight</span>(parentOf(parentOf(x)));
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â  Â  Â Entry&lt;K,V&gt; y = <span class="hljs-built_in">leftOf</span>(parentOf(parentOf(x)));
 Â  Â  Â  Â  Â  Â  Â  Â if (colorOf(y) == RED) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setColor</span>(parentOf(x), BLACK);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setColor</span>(y, BLACK);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setColor</span>(parentOf(parentOf(x)), RED);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â x = <span class="hljs-built_in">parentOf</span>(parentOf(x));
 Â  Â  Â  Â  Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (x == leftOf(parentOf(x))) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â x = <span class="hljs-built_in">parentOf</span>(x);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">rotateRight</span>(x);
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setColor</span>(parentOf(x), BLACK);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setColor</span>(parentOf(parentOf(x)), RED);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">rotateLeft</span>(parentOf(parentOf(x)));
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â  Â  Â root<span class="hljs-selector-class">.color</span> = BLACK;
 Â   }
</code></pre>
<p>åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œä¸€ä¸Šæ¥å°±å°†èŠ‚ç‚¹çš„é¢œè‰²è°ƒæ•´ä¸ºçº¢è‰²ã€‚æ¯•ç«Ÿçº¢é»‘æ ‘ä¸­æ·»åŠ çš„èŠ‚ç‚¹é»˜è®¤éƒ½æ˜¯çº¢è‰²çš„ã€‚</p>
<p>å‡ ä¸ªå‡½æ•°ï¼š</p>
<p>parentOf(x)ï¼šè·å–xçš„çˆ¶èŠ‚ç‚¹</p>
<p>parentOf(parentOf(x))ï¼šè·å–xçš„çˆ·çˆ·èŠ‚ç‚¹</p>
<p>leftOf(x)ï¼šè·å–xçš„å·¦å­èŠ‚ç‚¹</p>
<p>rightOf(x)ï¼šè·å–xçš„å³å­èŠ‚ç‚¹</p>
<p>é€šè¿‡è¿™å››ä¸ªå‡½æ•°ï¼Œå¯ä»¥è·å¾—xçš„å”å”èŠ‚ç‚¹ï¼šleftOf(parentOf(parentOf(x)))æˆ–è€…rightOf(parentOf(parentOf(x)))</p>
<p>æœ€åçš„å‡ ä¸ªé—®é¢˜ï¼š</p>
<p>â“TreeMapæ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œæ˜¯å¦éœ€è¦é‡å†™<code>hashCode</code>ä¸<code>equals</code>æ–¹æ³•ï¼Ÿ</p>
<p>ç­”ï¼šä¸éœ€è¦ã€‚putä¸­æ²¡æœ‰æ¶‰åŠåˆ°è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯å’ŒHashMapæœ‰å…³çš„ï¼Œè§ä¸Šä¸€ç¯‡æ–‡ç« ã€ŠJavaHashMapæºç åˆ†æã€‹</p>
<p>â“æ—¢ç„¶æœ‰çº¢é»‘æ ‘ï¼ŒHashMapçš„é”®æ˜¯å¦éœ€è¦å®ç°Comparableæ¥å£æˆ–è€…ä¼ é€’æ¯”è¾ƒå™¨å¯¹è±¡å‘¢ï¼Ÿ</p>
<p>ç­”ï¼šä¸éœ€è¦ã€‚å› ä¸ºåœ¨HashMapçš„åº•å±‚ï¼Œé»˜è®¤æ˜¯åˆ©ç”¨é”®çš„å“ˆå¸Œå€¼å¤§å°å…³ç³»æ¥åˆ›å»ºçº¢é»‘æ ‘çš„ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å›åˆ°ä¸Šä¸€ç¯‡æ–‡ç« çš„å†…å®¹ï¼Œå›åˆ°HashMapæºç ä¸­çš„<code>putVal</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â final V putVal(int hash, K key, V value, boolean onlyIfAbsent,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  boolean evict) {
 Â  Â  Â  Â Node&lt;K,V&gt;<span class="hljs-section">[]</span> tab<span class="hljs-comment">; Node&lt;K,V&gt; p; int n, i;</span>
 Â  Â  Â  Â if ((<span class="hljs-attr">tab</span> = table) == null || (n = tab.length) == <span class="hljs-number">0</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">n</span> = (tab = resize()).length<span class="hljs-comment">;</span>
 Â  Â  Â  Â if ((<span class="hljs-attr">p</span> = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == null)
 Â  Â  Â  Â  Â  Â tab<span class="hljs-section">[i]</span> = newNode(hash, key, value, null)<span class="hljs-comment">;</span>
 Â  Â  Â  Â else {
 Â  Â  Â  Â  Â  Â Node&lt;K,V&gt; e<span class="hljs-comment">; K k;</span>
 Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">p.hash</span> == hash &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â   ((<span class="hljs-attr">k</span> = p.key) == key || (key != null &amp;&amp; key.equals(k))))
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e</span> = p<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â else if (p instanceof TreeNode)
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e</span> = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â else {
 Â  Â  Â  Â  Â  Â  Â  Â for (int <span class="hljs-attr">binCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">; ; ++binCount) {</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if ((<span class="hljs-attr">e</span> = p.next) == null) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p.next</span> = newNode(hash, key, value, null)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â treeifyBin(tab, hash)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">e.hash</span> == hash &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   ((<span class="hljs-attr">k</span> = e.key) == key || (key != null &amp;&amp; key.equals(k))))
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = e<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â if (e != null) { // existing mapping for key
 Â  Â  Â  Â  Â  Â  Â  Â V <span class="hljs-attr">oldValue</span> = e.value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â if (!onlyIfAbsent || <span class="hljs-attr">oldValue</span> == null)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e.value</span> = value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â afterNodeAccess(e)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â return oldValue<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â  Â  Â ++modCount<span class="hljs-comment">;</span>
 Â  Â  Â  Â if (++size &gt; threshold)
 Â  Â  Â  Â  Â  Â resize()<span class="hljs-comment">;</span>
 Â  Â  Â  Â afterNodeInsertion(evict)<span class="hljs-comment">;</span>
 Â  Â  Â  Â return null<span class="hljs-comment">;</span>
 Â   }
</code></pre>
<p>æ³¨æ„åˆ°è¿™é‡Œï¼š</p>
<pre><code class="hljs language-ini" lang="ini">            else if (p instanceof TreeNode)
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e</span> = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value)<span class="hljs-comment">;</span>
</code></pre>
<p>æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹<code>putTreeVal</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â final TreeNode&lt;K,V&gt; putTreeVal(HashMap&lt;K,V&gt; map, Node&lt;K,V&gt;<span class="hljs-section">[]</span> tab,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  int h, K k, V v) {
 Â  Â  Â  Â  Â  Â Class&lt;?&gt; <span class="hljs-attr">kc</span> = null<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â boolean <span class="hljs-attr">searched</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â TreeNode&lt;K,V&gt; <span class="hljs-attr">root</span> = (parent != null) ? root() : this<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â for (TreeNode&lt;K,V&gt; <span class="hljs-attr">p</span> = root<span class="hljs-comment">;;) {</span>
 Â  Â  Â  Â  Â  Â  Â  Â int dir, ph<span class="hljs-comment">; K pk;</span>
 Â  Â  Â  Â  Â  Â  Â  Â if ((<span class="hljs-attr">ph</span> = p.hash) &gt; h)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">dir</span> = -<span class="hljs-number">1</span><span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if (ph &lt; h)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">dir</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if ((<span class="hljs-attr">pk</span> = p.key) == k || (k != null &amp;&amp; k.equals(pk)))
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return p<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if ((<span class="hljs-attr">kc</span> == null &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   (<span class="hljs-attr">kc</span> = comparableClassFor(k)) == null) ||
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (<span class="hljs-attr">dir</span> = compareComparables(kc, k, pk)) == <span class="hljs-number">0</span>) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (!searched) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â TreeNode&lt;K,V&gt; q, ch<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">searched</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (((<span class="hljs-attr">ch</span> = p.left) != null &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (<span class="hljs-attr">q</span> = ch.find(h, k, kc)) != null) ||
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   ((<span class="hljs-attr">ch</span> = p.right) != null &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (<span class="hljs-attr">q</span> = ch.find(h, k, kc)) != null))
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return q<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">dir</span> = tieBreakOrder(k, pk)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â TreeNode&lt;K,V&gt; <span class="hljs-attr">xp</span> = p<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â if ((<span class="hljs-attr">p</span> = (dir &lt;= <span class="hljs-number">0</span>) ? p.left : p.right) == null) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Node&lt;K,V&gt; <span class="hljs-attr">xpn</span> = xp.next<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â TreeNode&lt;K,V&gt; <span class="hljs-attr">x</span> = map.newTreeNode(h, k, v, xpn)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (dir &lt;= 0)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">xp.left</span> = x<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â else
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">xp.right</span> = x<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">xp.next</span> = x<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">x.parent</span> = x.prev = xp<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (xpn != null)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   ((TreeNode&lt;K,V&gt;)xpn).<span class="hljs-attr">prev</span> = x<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â moveRootToFront(tab, balanceInsertion(root, x))<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return null<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
â€‹
</code></pre>
<p>è¿›ä¸€æ­¥æŸ¥çœ‹findæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â final TreeNode&lt;K,V&gt; find(int h, Object k, Class&lt;?&gt; kc) {
 Â  Â  Â  Â  Â  Â TreeNode&lt;K,V&gt; <span class="hljs-attr">p</span> = this<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â do {
 Â  Â  Â  Â  Â  Â  Â  Â int ph, dir<span class="hljs-comment">; K pk;</span>
 Â  Â  Â  Â  Â  Â  Â  Â TreeNode&lt;K,V&gt; <span class="hljs-attr">pl</span> = p.left, pr = p.right, q<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â if ((<span class="hljs-attr">ph</span> = p.hash) &gt; h)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = pl<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if (ph &lt; h)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = pr<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if ((<span class="hljs-attr">pk</span> = p.key) == k || (k != null &amp;&amp; k.equals(pk)))
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return p<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if (<span class="hljs-attr">pl</span> == null)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = pr<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if (<span class="hljs-attr">pr</span> == null)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = pl<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if ((kc != null ||
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   (<span class="hljs-attr">kc</span> = comparableClassFor(k)) != null) &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (<span class="hljs-attr">dir</span> = compareComparables(kc, k, pk)) != <span class="hljs-number">0</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = (dir &lt; <span class="hljs-number">0</span>) ? pl : pr<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else if ((<span class="hljs-attr">q</span> = pr.find(h, k, kc)) != null)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return q<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â else
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = pl<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   } while (p != null)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â return null<span class="hljs-comment">;</span>
 Â  Â  Â   }
</code></pre>
<p>é€šè¿‡<code>(ph == p.hash) &gt; h</code>ç­‰è¯­å¥å¯ä»¥çœ‹å‡ºï¼Œçš„ç¡®æ˜¯ä½¿ç”¨é”®çš„å“ˆå¸Œå€¼å¤§å°å…³ç³»æ¥åˆ›å»ºçº¢é»‘æ ‘ã€‚</p>
<p>â“TreeMapå’ŒHashMapè°çš„æ•ˆç‡æ›´é«˜ï¼Ÿ</p>
<p>ç­”ï¼šå¦‚æœæ˜¯æœ€åæƒ…å†µï¼Œæ·»åŠ çš„8ä¸ªå…ƒç´ å…¨éƒ½å½¢æˆäº†é“¾è¡¨ï¼Œé‚£å°±æ˜¯TreeMapçš„æ•ˆç‡æ›´é«˜ã€‚å‰è€…çš„æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œåè€…ä¸ºO(logn)ã€‚ä½†è¿™ç§æƒ…å†µå‡ºç°çš„æ¦‚ç‡å¾ˆå°ï¼Œæ‰€ä»¥ä¸€èˆ¬è€Œè¨€HashMapçš„æ•ˆç‡æ›´é«˜ã€‚æœ€ä¼˜æƒ…å†µä¸‹å…¶æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ä¸ºO(1)</p>
<p>â“ä¸‰ç§åŒåˆ—é›†åˆå¦‚ä½•é€‰æ‹©ï¼Ÿ</p>
<p>ç­”ï¼šé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨HashMapï¼Œä¸€èˆ¬æƒ…å†µä¸‹å®ƒçš„æ•ˆç‡æœ€é«˜</p>
<p>å¦‚æœè¦ä¿è¯å­˜å–æœ‰åºï¼Œç”¨LinkedHashMapï¼Œå› ä¸ºå®ƒåº•å±‚æ˜¯åŒå‘é“¾è¡¨</p>
<p>å¦‚æœè¦è¿›è¡Œæ’åºï¼Œç”¨TreeMap</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ubuntu éƒ¨ç½² RustDesk æœåŠ¡å™¨]]></title>    <link>https://juejin.cn/post/7578699975414349824</link>    <guid>https://juejin.cn/post/7578699975414349824</guid>    <pubDate>2025-12-01T16:46:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578699975414349824" data-draft-id="7578734725302239284" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ubuntu éƒ¨ç½² RustDesk æœåŠ¡å™¨"/> <meta itemprop="keywords" content="Ubuntu"/> <meta itemprop="datePublished" content="2025-12-01T16:46:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å®"/> <meta itemprop="url" content="https://juejin.cn/user/187362547083252"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ubuntu éƒ¨ç½² RustDesk æœåŠ¡å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/187362547083252/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T16:46:22.000Z" title="Mon Dec 01 2025 16:46:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#5f6368;background-image:linear-gradient(90deg,rgba(240,191,213,.1) 3%,transparent 0),linear-gradient(1turn,rgba(240,191,213,.1) 3%,transparent 0);background-size:20px 20px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-left:50px;padding-bottom:5px;color:#5f6368}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{position:absolute;left:0;display:block;content:""}.markdown-body h1{font-size:32px;margin-bottom:5px}.markdown-body h1:before{top:0;content:"ğŸ¦„";font-size:32px}.markdown-body h2{padding-bottom:24px;border-bottom:1px solid #ececec}.markdown-body h2:before{top:0;left:8px;content:"ğŸ³";font-size:24px}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{top:-2px;left:8px;content:"ğŸ„";font-size:20px}.markdown-body h4{font-size:16px}.markdown-body h4:before{top:-2px;left:8px;content:"ğŸ¦¥";font-size:18px}.markdown-body h5{font-size:14px}.markdown-body h5:before{top:-2px;left:9px;content:"ğŸ¦©";font-size:16px}.markdown-body h6{font-size:12px;margin-top:5px}.markdown-body h6:before{top:-1px;left:10px;content:"ğŸ§";font-size:14px}.markdown-body p{line-height:1.9;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid rgba(253,121,168,.5);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#a6accd;background:#292d3e;border-radius:8px}.markdown-body a{text-decoration:none;color:#fd79a8;border-bottom:1px solid #fd79a8;padding:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(253,121,168,.1);color:#ee69a9}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body th{color:#fd79a8}.markdown-body th,.markdown-body tr:hover{background:rgba(253,121,168,.1)}.markdown-body td{min-width:120px}.markdown-body blockquote{position:relative;color:#666;padding:23px;margin:22px 0;border-left:4px solid #ee69a9;background-color:rgba(253,121,168,.1)}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;display:block;font-size:27px;color:#fd79a8;opacity:.8}.markdown-body blockquote:before{left:10px;top:0;content:"â"}.markdown-body blockquote:after{right:10px;bottom:0;content:"â"}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body strong{position:relative;color:#fd79a8}.markdown-body strong:before{content:"Â· "}.markdown-body strong:after{content:" Â·"}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#fd79a8}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#ee69a9}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>æœ¬æ–‡é¢å‘åœ¨ Ubuntu ä¸Šè‡ªæ‰˜ç®¡ RustDesk å¼€æºæœåŠ¡å™¨ï¼ˆ<code>hbbs</code>/<code>hbbr</code>ï¼‰ã€‚é€‚ç”¨äºæœ¬åœ°æœºæˆ¿æˆ–äº‘æœåŠ¡å™¨ï¼ˆå¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åä¸ºäº‘ç­‰ï¼‰ã€‚</p>
<ul>
<li>å®˜æ–¹å‚è€ƒæ–‡æ¡£ï¼ˆå¼ºçƒˆå»ºè®®åŒæ—¶é˜…è¯»ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frustdesk.com%2Fdocs%2Fzh-cn%2Fself-host%2Frustdesk-server-oss%2Finstall%2F" target="_blank" title="https://rustdesk.com/docs/zh-cn/self-host/rustdesk-server-oss/install/" ref="nofollow noopener noreferrer">rustdesk.com/docs/zh-cn/â€¦</a></li>
<li>é€‚ç”¨ç³»ç»Ÿï¼šUbuntu 20.04/22.04/24.04ï¼ˆå…¶ä»– Debian ç³»äº¦å¯å‚è€ƒï¼‰</li>
</ul>
<h2 data-id="heading-0">0. å‡†å¤‡å·¥ä½œ</h2>
<ul>
<li>ä¸€å°å¯å…¬ç½‘è®¿é—®çš„ Ubuntu æœåŠ¡å™¨ï¼ˆå…·å¤‡ <code>sudo</code> æƒé™ï¼‰ã€‚</li>
<li>ç¡®ä¿å¯ä»¥é€šè¿‡ <code>ssh</code> ç™»å½•ï¼Œæ‰§è¡ŒåŸºç¡€ç»´æŠ¤å‘½ä»¤ã€‚</li>
<li>å¦‚æœä½¿ç”¨äº‘å‚å•†ï¼Œå…ˆåœ¨äº‘æ§åˆ¶å°å¼€æ”¾ç«¯å£ã€‚</li>
</ul>
<h2 data-id="heading-1">1. å¼€æ”¾ç«¯å£</h2>
<p>äº‘å‚å•†å®‰å…¨ç»„æ˜¯â€œç¬¬ä¸€é“é˜²ç«å¢™â€ï¼Œä»…é…ç½®ç³»ç»Ÿ <code>ufw</code> ä¸å¤Ÿï¼Œå¿…é¡»åœ¨äº‘æ§åˆ¶å°æ”¾è¡Œç«¯å£ã€‚ä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼š</p>
<ul>
<li>ç™»å½• é˜¿é‡Œäº‘ ECS æ§åˆ¶å° â†’ æ‰¾åˆ°ä½ çš„æœåŠ¡å™¨ â†’ å·¦ä¾§ã€Œå®‰å…¨ç»„ã€â†’ é…ç½®è§„åˆ™ã€‚</li>
<li>æ–°å¢ã€Œå…¥æ–¹å‘ã€è§„åˆ™ï¼Œæ”¾è¡Œ RustDesk æ‰€éœ€ç«¯å£ï¼š</li>
</ul>























<table><thead><tr><th>åè®®</th><th>ç«¯å£èŒƒå›´</th><th>æˆæƒå¯¹è±¡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>TCP</td><td>21114-21119</td><td>0.0.0.0/0</td><td>RustDesk æ ¸å¿ƒ TCP ç«¯å£</td></tr><tr><td>UDP</td><td>21116</td><td>0.0.0.0/0</td><td>RustDesk NAT æ‰“æ´ UDP ç«¯å£</td></tr></tbody></table>
<p>æç¤ºï¼š<code>0.0.0.0/0</code> è¡¨ç¤ºå…è®¸æ‰€æœ‰ IPï¼ˆé€‚åˆæµ‹è¯•ï¼‰ã€‚ç”Ÿäº§ç¯å¢ƒå»ºè®®ç¼©å°åˆ°ä½ çš„åŠå…¬ç½‘æ®µæˆ–æŒ‡å®šå®¢æˆ·ç«¯ IPã€‚</p>
<p>ä¿å­˜è§„åˆ™åï¼Œé€šå¸¸éœ€ç­‰å¾… 1â€“2 åˆ†é’Ÿç”Ÿæ•ˆï¼ˆå®‰å…¨ç»„æœ‰å»¶è¿Ÿï¼‰ã€‚</p>
<p>åŒæ—¶ï¼Œåœ¨æœåŠ¡å™¨ç³»ç»Ÿå†…ä½¿ç”¨ <code>ufw</code> æ”¾è¡Œç«¯å£ï¼ˆå»ºè®®ï¼‰ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">sudo apt update
sudo apt install -y ufw
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow 21114:21119/tcp
sudo ufw allow 21116/udp
sudo ufw enable
sudo ufw status numbered
</code></pre>
<h2 data-id="heading-2">2. å®‰è£… RustDeskï¼ˆæ–¹å¼ä¸€ï¼šä¸€é”®è„šæœ¬ï¼‰</h2>
<p>å¦‚æœä½ å¸Œæœ›å¿«é€Ÿå®Œæˆéƒ¨ç½²ï¼Œå¯ä½¿ç”¨ä¸€é”®è„šæœ¬ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">wget https://ghfast.top/https://raw.githubusercontent.com/techahold/rustdeskinstall/master/install.sh -O install.sh
chmod +x install.sh
sudo ./install.sh
</code></pre>
<p>è„šæœ¬ä¼šè‡ªåŠ¨ä¸‹è½½å®‰è£…å¹¶ä»¥ systemd æœåŠ¡è¿è¡Œ <code>hbbs</code>ï¼ˆID æœåŠ¡ï¼‰ä¸ <code>hbbr</code>ï¼ˆä¸­ç»§æœåŠ¡ï¼‰ã€‚</p>
<ul>
<li>å®‰è£…è¿‡ç¨‹ä¸­ä¼šå‡ºç°ä¸¤å¤„äº¤äº’ç¡®è®¤ï¼ŒæŒ‰æç¤ºé€‰æ‹©å³å¯ï¼ˆè§ä¸‹å›¾ï¼‰ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/123ad11f450b4868bed65a53bd9e8a8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5a6B:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765212635&amp;x-signature=ipnhVyM4Zet47KwUQSxb3NF94y8%3D" alt="1.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44e711a254504515893ee34a098bf62a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5a6B:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765212635&amp;x-signature=JarrzmroY%2F6J%2FrFexJgbWndVvrU%3D" alt="2.png" loading="lazy"/></p>
<ul>
<li>é¦–æ¬¡å¯åŠ¨æ—¶ï¼ŒæœåŠ¡ä¼šåœ¨æ—¥å¿—ä¸­è¾“å‡ºä¸€ä¸ª <code>Key</code>ï¼ˆå¯†é’¥ï¼‰ï¼Œè¯·å¤åˆ¶å¹¶ä¿å­˜ï¼ˆè§ä¸‹å›¾ï¼‰ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca2c601a709d4f568ed25d6ccab72879~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5a6B:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765212635&amp;x-signature=w%2F8MS%2F%2FtXBtiH6QVV1wM0ywwAy8%3D" alt="3.png" loading="lazy"/></p>
<p>æŸ¥çœ‹æœåŠ¡çŠ¶æ€ä¸æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">systemctl status hbbs
systemctl status hbbr
journalctl -u hbbs -f
journalctl -u hbbr -f
</code></pre>
<p>æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">ss -tunlp | grep -E '2111[4-9]|21116'
</code></pre>
<h2 data-id="heading-3">3. å®‰è£… RustDeskï¼ˆæ–¹å¼äºŒï¼šå®˜æ–¹ deb åŒ…ï¼ŒäºŒé€‰ä¸€ï¼‰</h2>
<p>ä¹Ÿå¯åœ¨ GitHub Releases ä¸‹è½½å®˜æ–¹ <code>.deb</code> åŒ…å¹¶å®‰è£…ï¼ˆé€‚åˆç†Ÿæ‚‰ Debian åŒ…ç®¡ç†çš„ç”¨æˆ·ï¼‰ï¼š</p>
<ol>
<li>å‰å¾€ RustDesk æœåŠ¡å™¨å¼€æºç‰ˆå‘å¸ƒé¡µï¼Œä¸‹è½½é€‚åˆæ¶æ„çš„ <code>*.deb</code>ã€‚</li>
<li>ä¸Šä¼ åˆ°æœåŠ¡å™¨å¹¶å®‰è£…ï¼š
<pre><code class="hljs language-shell" lang="shell">sudo dpkg -i rustdesk-server*.deb
sudo apt -f install
</code></pre>
</li>
<li>éªŒè¯æœåŠ¡ï¼š
<pre><code class="hljs language-shell" lang="shell">systemctl status hbbs
systemctl status hbbr
</code></pre>
</li>
</ol>
<p>ä¸¤ç§å®‰è£…æ–¹å¼ä»»é€‰å…¶ä¸€å³å¯ï¼Œä¸å¿…é‡å¤å®‰è£…ã€‚</p>
<h2 data-id="heading-4">4. å®¢æˆ·ç«¯é…ç½®ï¼ˆWindows/macOS/Linuxï¼‰</h2>
<p>åœ¨ RustDesk å®¢æˆ·ç«¯ä¸­å¡«å†™è‡ªæ‰˜ç®¡ä¿¡æ¯ï¼ˆè§ä¸‹å›¾ï¼‰ï¼š</p>
<ul>
<li>æ‰“å¼€ RustDesk â†’ è¿›å…¥ã€Œè®¾ç½®ã€â†’ æ‰¾åˆ°ä¸ã€Œè‡ªæ‰˜ç®¡ / æœåŠ¡å™¨ã€ç›¸å…³çš„é…ç½®ã€‚</li>
<li>å¡«å†™ä»¥ä¸‹å†…å®¹ï¼š
<ul>
<li><code>ID æœåŠ¡å™¨</code>ï¼šä½ çš„æœåŠ¡å™¨åŸŸåæˆ–å…¬ç½‘ IPï¼ˆç«¯å£é»˜è®¤ 21114ï¼‰ã€‚</li>
<li><code>ä¸­ç»§æœåŠ¡å™¨</code>ï¼šä½ çš„æœåŠ¡å™¨åŸŸåæˆ–å…¬ç½‘ IPï¼ˆé»˜è®¤ç«¯å£ 21117ï¼Œå¯åœ¨å®¢æˆ·ç«¯å¤„å¡«å†™ä¸º <code>IP:21117</code>ï¼‰ã€‚</li>
<li><code>Key</code>ï¼šä»æœåŠ¡å™¨æ—¥å¿—ä¸­å¤åˆ¶çš„å¯†é’¥ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6c25831485e4b24b06b109ed2b88439~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5a6B:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765212635&amp;x-signature=%2FgjM6Vu5ZcGLlGWyQNXAuvxWm4Q%3D" alt="4.png" loading="lazy"/></p>
<p>ä¿å­˜åï¼Œè¿”å›ä¸»ç•Œé¢ï¼Œä¸¤ä¸ªå®¢æˆ·ç«¯äº’ç›¸è¾“å…¥å¯¹æ–¹ ID è¿›è¡Œè¿æ¥æµ‹è¯•ã€‚è‹¥èƒ½ç›´è¿ï¼Œä¼šæ˜¾ç¤ºç›´è¿ï¼›è‹¥ NAT å¤æ‚ï¼Œåˆ™ä¼šè‡ªåŠ¨èµ°ä¸­ç»§ã€‚</p>
<h2 data-id="heading-5">5. è¿œç¨‹è¿é€šæ€§éªŒè¯ï¼ˆå¯é€‰ä½†æ¨èï¼‰</h2>
<p>ä»ä½ çš„æœ¬åœ°ç”µè„‘æµ‹è¯•äº‘ç«¯ç«¯å£æ˜¯å¦å¯è¾¾ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">nc -zv &lt;ä½ çš„æœåŠ¡å™¨IPæˆ–åŸŸå&gt; 21114
nc -zv &lt;ä½ çš„æœåŠ¡å™¨IPæˆ–åŸŸå&gt; 21117
</code></pre>
<p>å¦‚æ˜¾ç¤º <code>succeeded</code> æˆ– <code>open</code>ï¼Œè¡¨ç¤ºç«¯å£è¿é€šæ€§æ­£å¸¸ã€‚</p>
<h2 data-id="heading-6">6. å¸¸è§é—®é¢˜ä¸æ’æŸ¥</h2>
<ul>
<li>æ— æ³•è·å– IDï¼š
<ul>
<li>æ£€æŸ¥ <code>hbbs</code> æœåŠ¡æ˜¯å¦è¿è¡Œï¼š<code>systemctl status hbbs</code></li>
<li>æ£€æŸ¥äº‘å®‰å…¨ç»„ä¸ <code>ufw</code> æ˜¯å¦å·²æ”¾è¡Œ 21114â€“21119/TCP ä¸ 21116/UDPã€‚</li>
</ul>
</li>
<li>è¿æ¥æ€»æ˜¯èµ°ä¸­ç»§ï¼š
<ul>
<li>å¾ˆå¯èƒ½æ˜¯å®¢æˆ·ç«¯ä¹‹é—´ NAT ç©¿é€å¤±è´¥ã€‚ç¡®ä¿ 21116/UDP æ”¾è¡Œï¼›æˆ–æ¥å—é€šè¿‡ä¸­ç»§è¿æ¥ã€‚</li>
</ul>
</li>
<li>æç¤º Key ä¸åŒ¹é…ï¼š
<ul>
<li>ç¡®ä¿å®¢æˆ·ç«¯å¡«å†™çš„ <code>Key</code> ä¸æœåŠ¡å™¨å½“å‰è¾“å‡ºçš„ä¸€è‡´ï¼›å˜æ›´æœåŠ¡å™¨åéœ€æ›´æ–°å®¢æˆ·ç«¯é…ç½®ã€‚</li>
</ul>
</li>
<li>æœåŠ¡åä¸ç¡®å®šï¼š
<ul>
<li>å¯æ‰§è¡Œ <code>systemctl list-units | grep hbbs</code> ä¸ <code>grep hbbr</code> æŸ¥æ‰¾å…·ä½“æœåŠ¡åç§°ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-7">7. è¿ç»´ä¸å‡çº§ï¼ˆç®€è¦ï¼‰</h2>
<ul>
<li>é‡å¯æœåŠ¡ï¼š
<pre><code class="hljs language-shell" lang="shell">sudo systemctl restart hbbs
sudo systemctl restart hbbr
</code></pre>
</li>
<li>æ—¥å¿—æŸ¥çœ‹ï¼š
<pre><code class="hljs language-shell" lang="shell">journalctl -u hbbs --no-pager -n 200
journalctl -u hbbr --no-pager -n 200
</code></pre>
</li>
<li>å®‰å…¨å»ºè®®ï¼š
<ul>
<li>ç”Ÿäº§ç¯å¢ƒå°†å®‰å…¨ç»„æˆæƒå¯¹è±¡ä» <code>0.0.0.0/0</code> æ”¶ç´§åˆ°å¯ä¿¡ç½‘æ®µã€‚</li>
<li>å®šæœŸæ›´æ–°ç³»ç»Ÿå¹¶é‡å¯æœåŠ¡ï¼Œå‡å°‘å·²çŸ¥æ¼æ´é£é™©ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-8">8. ä¸€é”®æ›´æ¢é»˜è®¤ç«¯å£è„šæœ¬ï¼ˆå«å®‰å…¨æ”¶æ•›ï¼‰</h2>
<p>ä¸ºä¾¿äºå¿«é€Ÿè½åœ°ï¼Œæä¾›ä¸€é”®è„šæœ¬ï¼š</p>
<ul>
<li>è®© <code>hbbs/hbbr</code> åœ¨è‡ªå®šä¹‰ç«¯å£ç›‘å¬ï¼ˆéœ€è¦æä¾›ä¸­ç»§ä¸»æœºä¸å¯é€‰å¯†é’¥æ–‡ä»¶ï¼‰ã€‚</li>
</ul>
<p>ç«¯å£èŒƒå›´ä¸å»ºè®®ï¼š</p>
<ul>
<li>å¯ä¿®æ”¹èŒƒå›´ï¼š<code>1024â€“65535</code>ï¼ˆé¿å…ä½¿ç”¨ <code>0â€“1023</code> çš„ä¿ç•™ç«¯å£ï¼‰ã€‚</li>
<li>æ¨èé€‰æ‹©é«˜ä½ç«¯å£ï¼ˆå¦‚ <code>20000â€“40000</code>ï¼‰ï¼Œå¹¶æå‰æ£€æŸ¥å ç”¨ï¼š<code>ss -tunlp | grep &lt;PORT&gt;</code>ã€‚</li>
</ul>
<p>å°†è„šæœ¬æ–‡ä»¶ <code>rustdesk-port-switch.sh</code> ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼ˆä¾‹å¦‚ <code>/usr/local/sbin/</code>ï¼‰ï¼Œå¹¶èµ‹äºˆæ‰§è¡Œæƒé™ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">#</span><span class="bash">!/usr/bin/env bash</span>
set -euo pipefail
<span class="hljs-meta prompt_">
# </span><span class="bash">å¸¸é‡: é»˜è®¤ç«¯å£</span>
DEFAULT_NAT=21116
DEFAULT_RELAY=21117
DEFAULT_HBBS_WS=21118
DEFAULT_HBBR_WS=21119

BASE=""
NAT_PORT=""
RELAY_PORT=""
HBBS_WS=""
HBBR_WS=""
RELAY_HOST=""
<span class="hljs-meta prompt_">
# </span><span class="bash">å‡½æ•°: æ‰“å°ç”¨æ³•è¯´æ˜ä¸ç«¯å£èŒƒå›´</span>
usage() {
  cat &lt;&lt;'USAGE'
ç”¨æ³•: sudo bash rustdesk-port-switch.sh
è¯´æ˜: çº¯äº¤äº’å¼ï¼Œç›´æ¥ä¿®æ”¹ hbbs/hbbr ç›‘å¬ç«¯å£ï¼ˆoverride æ¨¡å¼ï¼‰
ç«¯å£èŒƒå›´: 1024â€“65535ï¼Œå»ºè®® 20000â€“40000ï¼Œé¿å… 0â€“1023 ä¿ç•™ç«¯å£
USAGE
}
<span class="hljs-meta prompt_">
# </span><span class="bash">å‡½æ•°: æ£€æŸ¥æ˜¯å¦ root</span>
require_root() {
  if [ "${EUID:-$(id -u)}" -ne 0 ]; then
    echo "éœ€è¦ä»¥ root è¿è¡Œ" &gt;&amp;2
    exit 1
  fi
}
<span class="hljs-meta prompt_">
# </span><span class="bash">å‡½æ•°: éªŒè¯ç«¯å£èŒƒå›´ä¸åˆæ³•æ€§</span>
validate_port() {
  local p="$1"
  [[ "$p" =~ ^[0-9]+$ ]] || { echo "ç«¯å£å¿…é¡»ä¸ºæ•°å­—: $p" &gt;&amp;2; exit 1; }
  if [ "$p" -lt 1024 ] || [ "$p" -gt 65535 ]; then
    echo "ç«¯å£è¶…å‡ºå…è®¸èŒƒå›´(1024â€“65535): $p" &gt;&amp;2
    exit 1
  fi
}
<span class="hljs-meta prompt_">
# </span><span class="bash">å‡½æ•°: è®¡ç®—æœ€ç»ˆç«¯å£ç»„åˆ</span>
compute_ports() {
  if [ -n "$BASE" ]; then
    NAT_PORT="$BASE"
    RELAY_PORT=$((BASE+2))
    # WebSocket ç«¯å£ä»…åœ¨æ˜¾å¼æŒ‡å®šæ—¶è®¾ç½®
  fi
  : "${NAT_PORT:=${NAT_PORT:-}}"
  : "${RELAY_PORT:=${RELAY_PORT:-}}"
  [ -n "$NAT_PORT" ] || NAT_PORT="$DEFAULT_NAT"
  [ -n "$RELAY_PORT" ] || RELAY_PORT="$DEFAULT_RELAY"

  validate_port "$NAT_PORT"; validate_port "$RELAY_PORT"
  [ -n "$HBBS_WS" ] &amp;&amp; validate_port "$HBBS_WS"
  [ -n "$HBBR_WS" ] &amp;&amp; validate_port "$HBBR_WS"
}
<span class="hljs-meta prompt_">
# </span><span class="bash">å‡½æ•°: äº¤äº’å¼è¯¢é—®æ¨¡å¼/ç«¯å£/å®‰å…¨é€‰é¡¹</span>
is_port_used() {
  local p="$1"
  ss -H -l -n | awk '{print $5}' | awk -F: '{print $NF}' | grep -qx "$p"
}

suggest_base_port() {
  local tries=0 max=30 b
  while [ $tries -lt $max ]; do
    b=$((20000 + RANDOM % 20001))
    [ $((b+4)) -le 65535 ] || { tries=$((tries+1)); continue; }
    if is_port_used "$b" || is_port_used $((b+2)) || is_port_used $((b+3)) || is_port_used $((b+4)); then
      tries=$((tries+1)); continue
    fi
    BASE_SUG="$b"
    HBBS_WS_SUG=$((b+3))
    HBBR_WS_SUG=$((b+4))
    return 0
  done
  BASE_SUG=30022
  HBBS_WS_SUG=30025
  HBBR_WS_SUG=30026
}

interactive_prompt() {
  suggest_base_port
  echo "æ¨èåŸºå‡†ç«¯å£: ${BASE_SUG} (hbbs(NAT)=${BASE_SUG}, hbbr(Relay)=$((BASE_SUG+2)); WS: hbbs=${HBBS_WS_SUG}, hbbr=${HBBR_WS_SUG})"
  echo "å¯è¾“å…¥åŸºå‡†ç«¯å£(å¦‚ 30022), å°†è‡ªåŠ¨è®¾ç½®: hbbs(NAT)=base, hbbr(Relay)=base+2"
  read -r -p "åŸºå‡†ç«¯å£(å›è½¦ä½¿ç”¨æ¨è ${BASE_SUG}): " BASE
  if [ -z "$BASE" ]; then BASE="$BASE_SUG"; fi
  validate_port "$BASE"

  NAT_PORT="$BASE"; RELAY_PORT=$((BASE+2))
<span class="hljs-meta prompt_">
  # </span><span class="bash">å¯é€‰ WebSocket ç«¯å£</span>
  read -r -p "æ˜¯å¦è®¾ç½® WebSocket ç«¯å£ï¼ˆæ¨è hbbs=${HBBS_WS_SUG} hbbr=${HBBR_WS_SUG}ï¼Œå®˜æ–¹é»˜è®¤ 21118/21119ï¼‰[y/N]: " ws_sel
  case "${ws_sel,,}" in
    y|yes)
      echo "æ¨è WebSocket ç«¯å£: hbbs=${HBBS_WS_SUG} hbbr=${HBBR_WS_SUG}"
      read -r -p "hbbs WebSocket ç«¯å£(å›è½¦ä½¿ç”¨æ¨è ${HBBS_WS_SUG}): " HBBS_WS
      [ -z "$HBBS_WS" ] &amp;&amp; HBBS_WS="$HBBS_WS_SUG"
      validate_port "$HBBS_WS"
      read -r -p "hbbr WebSocket ç«¯å£(å›è½¦ä½¿ç”¨æ¨è ${HBBR_WS_SUG}): " HBBR_WS
      [ -z "$HBBR_WS" ] &amp;&amp; HBBR_WS="$HBBR_WS_SUG"
      validate_port "$HBBR_WS"
      ;;
    *) : ;;
  esac

  read -r -p "ä¸­ç»§ä¸»æœº(åŸŸåæˆ–IP): " RELAY_HOST
  if [ -z "$RELAY_HOST" ]; then
    echo "éœ€è¦æä¾›ä¸­ç»§ä¸»æœº"; exit 1
  fi

  echo "\né…ç½®æ‘˜è¦:";
  echo "hbbs(NAT) ç«¯å£: ${NAT_PORT}  hbbr(Relay) ç«¯å£: ${RELAY_PORT}"
  [ -n "$HBBS_WS" ] &amp;&amp; echo "hbbs WS: ${HBBS_WS}"
  [ -n "$HBBR_WS" ] &amp;&amp; echo "hbbr WS: ${HBBR_WS}"
  echo "ä¸­ç»§ä¸»æœº: ${RELAY_HOST}"

  read -r -p "ç»§ç»­æ‰§è¡Œ? [y/N]: " go
  case "${go,,}" in y|yes) : ;; *) echo "å·²å–æ¶ˆ"; exit 1;; esac
}
<span class="hljs-meta prompt_">
# </span><span class="bash">(ç§»é™¤ NAT é‡å®šå‘é€»è¾‘)</span>
<span class="hljs-meta prompt_">
# </span><span class="bash">å‡½æ•°: UFW å¼€æ”¾æ–°ç«¯å£</span>
ensure_ufw_rules() {
  if ! command -v ufw &gt;/dev/null 2&gt;&amp;1; then
    apt-get update -y &amp;&amp; apt-get install -y ufw
  fi
  ufw allow "${NAT_PORT}/udp" || true
  ufw allow "${NAT_PORT}/tcp" || true
  ufw allow "${RELAY_PORT}/tcp" || true
  [ -n "$HBBS_WS" ] &amp;&amp; ufw allow "${HBBS_WS}/tcp" || true
  [ -n "$HBBR_WS" ] &amp;&amp; ufw allow "${HBBR_WS}/tcp" || true
  ufw status | cat
}
<span class="hljs-meta prompt_">
# </span><span class="bash">(ç§»é™¤æŒä¹…åŒ– iptables é€»è¾‘)</span>
<span class="hljs-meta prompt_">
# </span><span class="bash">å‡½æ•°: å†™å…¥ systemd override</span>
write_override() {
  local hbbs_path hbbr_path unit path_guess
<span class="hljs-meta prompt_">
  # </span><span class="bash">ä¼˜å…ˆä½¿ç”¨ç”¨æˆ·æŒ‡å®šè·¯å¾„</span>
  hbbs_path="${HBBS_PATH:-}"
  hbbr_path="${HBBR_PATH:-}"
<span class="hljs-meta prompt_">
  # </span><span class="bash">é€šè¿‡ PATH æŸ¥æ‰¾</span>
  [ -z "$hbbs_path" ] &amp;&amp; hbbs_path="$(command -v hbbs || true)"
  [ -z "$hbbr_path" ] &amp;&amp; hbbr_path="$(command -v hbbr || true)"
<span class="hljs-meta prompt_">
  # </span><span class="bash">é€šè¿‡ systemd å•å…ƒè§£æ ExecStart</span>
  if [ -z "$hbbs_path" ]; then
    unit="$(systemctl cat hbbs 2&gt;/dev/null || true)"
    path_guess="$(echo "$unit" | awk -F= '/^ExecStart=/{print $2}' | awk '{print $1}' | tail -n1)"
    [ -n "$path_guess" ] &amp;&amp; hbbs_path="$path_guess"
  fi
  if [ -z "$hbbr_path" ]; then
    unit="$(systemctl cat hbbr 2&gt;/dev/null || true)"
    path_guess="$(echo "$unit" | awk -F= '/^ExecStart=/{print $2}' | awk '{print $1}' | tail -n1)"
    [ -n "$path_guess" ] &amp;&amp; hbbr_path="$path_guess"
  fi
<span class="hljs-meta prompt_">
  # </span><span class="bash">å¸¸è§è·¯å¾„å›é€€</span>
  [ -z "$hbbs_path" ] &amp;&amp; for p in /usr/local/bin/hbbs /usr/bin/hbbs /opt/rustdesk/hbbs /opt/rustdesk-server/hbbs; do [ -x "$p" ] &amp;&amp; hbbs_path="$p" &amp;&amp; break; done
  [ -z "$hbbr_path" ] &amp;&amp; for p in /usr/local/bin/hbbr /usr/bin/hbbr /opt/rustdesk/hbbr /opt/rustdesk-server/hbbr; do [ -x "$p" ] &amp;&amp; hbbr_path="$p" &amp;&amp; break; done

  [ -n "$hbbs_path" ] &amp;&amp; [ -x "$hbbs_path" ] || { echo "æœªæ‰¾åˆ°å¯æ‰§è¡Œçš„ hbbs, è¯·ç¡®è®¤å®‰è£…åœ¨ /opt/rustdesk/hbbs æˆ– /usr/local/bin/hbbs"; exit 1; }
  [ -n "$hbbr_path" ] &amp;&amp; [ -x "$hbbr_path" ] || { echo "æœªæ‰¾åˆ°å¯æ‰§è¡Œçš„ hbbr, è¯·ç¡®è®¤å®‰è£…åœ¨ /opt/rustdesk/hbbr æˆ– /usr/local/bin/hbbr"; exit 1; }
<span class="hljs-meta prompt_">
  # </span><span class="bash">å†™å…¥ systemd é…ç½®ï¼šè‹¥ä¸»å•å…ƒå­˜åœ¨åˆ™å†™ overrideï¼›å¦åˆ™åˆ›å»ºæ–°çš„å•å…ƒæ–‡ä»¶</span>
  if systemctl cat hbbs &gt;/dev/null 2&gt;&amp;1; then
    mkdir -p /etc/systemd/system/hbbs.service.d
    cat &gt;/etc/systemd/system/hbbs.service.d/override.conf &lt;&lt;EOF
[Service]
ExecStart=
ExecStart=${hbbs_path} -p ${NAT_PORT} -r ${RELAY_HOST}:${RELAY_PORT}
EOF
  else
    cat &gt;/etc/systemd/system/hbbs.service &lt;&lt;EOF
[Unit]
Description=RustDesk HBBS (ID server)
After=network.target

[Service]
Type=simple
ExecStart=${hbbs_path} -p ${NAT_PORT} -r ${RELAY_HOST}:${RELAY_PORT}
Restart=always
RestartSec=2s
User=root

[Install]
WantedBy=multi-user.target
EOF
  fi

  if systemctl cat hbbr &gt;/dev/null 2&gt;&amp;1; then
    mkdir -p /etc/systemd/system/hbbr.service.d
    cat &gt;/etc/systemd/system/hbbr.service.d/override.conf &lt;&lt;EOF
[Service]
ExecStart=
ExecStart=${hbbr_path} -p ${RELAY_PORT}
EOF
  else
    cat &gt;/etc/systemd/system/hbbr.service &lt;&lt;EOF
[Unit]
Description=RustDesk HBBR (Relay server)
After=network.target

[Service]
Type=simple
ExecStart=${hbbr_path} -p ${RELAY_PORT}
Restart=always
RestartSec=2s
User=root

[Install]
WantedBy=multi-user.target
EOF
  fi
}
<span class="hljs-meta prompt_">
# </span><span class="bash">å‡½æ•°: é‡è½½å¹¶é‡å¯æœåŠ¡</span>
restart_services() {
  systemctl daemon-reload
  systemctl enable hbbs &gt;/dev/null 2&gt;&amp;1 || true
  systemctl enable hbbr &gt;/dev/null 2&gt;&amp;1 || true
  systemctl restart hbbs || true
  systemctl restart hbbr || true
  systemctl --no-pager -q status hbbs hbbr || true
}
<span class="hljs-meta prompt_">
# </span><span class="bash">å‡½æ•°: æå–å¹¶ä¿å­˜æœ€æ–° Key åˆ°è„šæœ¬åŒçº§ç›®å½•ï¼Œå¹¶æ‰“å°</span>
save_and_print_key() {
  local key line script_dir key_file
<span class="hljs-meta prompt_">  # </span><span class="bash">ä» hbbs æ—¥å¿—æå–æœ€æ–° Key</span>
  line=$(journalctl -u hbbs -n 200 --no-pager 2&gt;/dev/null | grep -E "Key:" | tail -n1 || true)
  if [ -z "$line" ]; then
    line=$(journalctl -u hbbr -n 200 --no-pager 2&gt;/dev/null | grep -E "Key:" | tail -n1 || true)
  fi
  key=$(echo "$line" | sed -E 's/^.*Key:\s*([A-Za-z0-9+\/=]+).*$/\1/' )
  script_dir=$(cd -- "$(dirname -- "$0")" &amp;&amp; pwd)
  key_file="$script_dir/rustdesk.key"
  if [ -n "$key" ]; then
    printf "%s\n" "$key" &gt; "$key_file"
    chmod 600 "$key_file" 2&gt;/dev/null || true
    echo "- ID æœåŠ¡å™¨ ï¼š ${RELAY_HOST}:${NAT_PORT}"
    echo "- ä¸­ç»§æœåŠ¡å™¨ ï¼š ${RELAY_HOST}:${RELAY_PORT}"
    echo "- Key: $key"
    echo "å·²ä¿å­˜åˆ°: $key_file"
  else
    echo "- ID æœåŠ¡å™¨ ï¼š ${RELAY_HOST}:${NAT_PORT}"
    echo "- ä¸­ç»§æœåŠ¡å™¨ ï¼š ${RELAY_HOST}:${RELAY_PORT}"
    echo "- Key: (æœªè§£æ)"
    echo "æœªä»æ—¥å¿—è§£æåˆ° Keyã€‚å¯ç¨åè¿è¡Œ: journalctl -u hbbs -n 200 | grep -i Key"
  fi
}

require_root
interactive_prompt

if [ -z "$RELAY_HOST" ]; then
  echo "éœ€è¦æä¾›ä¸­ç»§ä¸»æœº" &gt;&amp;2
  exit 1
fi
write_override
restart_services
ensure_ufw_rules
save_and_print_key
</code></pre>
<pre><code class="hljs language-shell" lang="shell">sudo mv rustdesk-port-switch.sh /usr/local/sbin/
sudo chmod +x /usr/local/sbin/rustdesk-port-switch.sh
</code></pre>
<p>äº¤äº’å¼è¿è¡Œï¼ˆæ— éœ€å‚æ•°ï¼‰ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">sudo bash /usr/local/sbin/rustdesk-port-switch.sh
</code></pre>
<ul>
<li>å°†ä¾æ¬¡è¯¢é—®åŸºå‡†ç«¯å£æˆ–åˆ†åˆ«è¾“å…¥ hbbs/hbbr ç«¯å£ã€æ˜¯å¦è®¾ç½® WebSocket ç«¯å£ï¼Œä»¥åŠä¸­ç»§ä¸»æœºä¸å¯†é’¥æ–‡ä»¶ï¼Œç¡®è®¤åè‡ªåŠ¨æ‰§è¡Œã€‚</li>
<li>å·²å†…ç½®è‡ªåŠ¨æ¢æµ‹ <code>hbbs</code>/<code>hbbr</code> è·¯å¾„ï¼ˆåŒ…å« <code>/opt/rustdesk/hbbs</code> ä¸ <code>/opt/rustdesk/hbbr</code> ç­‰å¸¸è§ä½ç½®ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥è·¯å¾„ã€‚</li>
<li>æ¯æ¬¡è¿è¡Œè„šæœ¬éƒ½ä¼šéšæœºæ¨èä¸€ç»„é«˜ä½ç«¯å£ï¼ˆé¿å¼€å·²å ç”¨ï¼‰ï¼ŒåŒ…å« <code>hbbs(NAT)</code>ã€<code>hbbr(Relay)</code> ä»¥åŠå¯é€‰çš„ WebSocket ç«¯å£ï¼›ç›´æ¥å›è½¦å¯ä½¿ç”¨æ¨èå€¼ã€‚</li>
<li>è„šæœ¬ä¼šåœ¨æ‰§è¡Œå®Œæˆåè‡ªåŠ¨ä»æ—¥å¿—è§£ææœ€æ–° <code>Key</code>ï¼Œå¹¶ä¿å­˜ä¸ºè„šæœ¬åŒçº§ç›®å½•çš„ <code>rustdesk.key</code>ï¼ˆè¦†ç›–æ—§æ–‡ä»¶ï¼‰ï¼ŒåŒæ—¶åœ¨ç»ˆç«¯æ‰“å°å½“å‰ <code>Key</code>ã€‚</li>
</ul>
<p>æ‰§è¡Œå®Œæˆåç»ˆç«¯å°†è¾“å‡ºå¦‚ä¸‹æ‘˜è¦ï¼Œä¾¿äºåœ¨å®¢æˆ·ç«¯å¡«å†™ï¼š</p>
<ul>
<li>ID æœåŠ¡å™¨ ï¼š <code>&lt;ä½ çš„åŸŸåæˆ–IP&gt;:&lt;hbbsç«¯å£&gt;</code></li>
<li>ä¸­ç»§æœåŠ¡å™¨ ï¼š <code>&lt;ä½ çš„åŸŸåæˆ–IP&gt;:&lt;hbbrç«¯å£&gt;</code></li>
<li>Key: <code>&lt;æœåŠ¡å™¨å½“å‰Key&gt;</code></li>
<li>å·²ä¿å­˜åˆ°: <code>&lt;è„šæœ¬åŒçº§ç›®å½•&gt;/rustdesk.key</code></li>
</ul>
<blockquote>
<p>è®°å¾—å»é˜¿é‡Œäº‘ç­‰å®‰å…¨ç»„å¼€æ”¾é‡æ–°è®¾ç½®çš„ç«¯å£</p>
</blockquote>
<p>éªŒè¯ï¼š3001[5-9]è®°å¾—æ¢æˆ&lt;æ–°è®¾ç½®çš„ç«¯å£&gt;</p>
<pre><code class="hljs language-shell" lang="shell">ss -tunlp | grep -E '3001[5-9]'
nc -zv &lt;åŸŸåæˆ–IP&gt; &lt;æ–°è®¾ç½®çš„ç«¯å£&gt;
nc -zv &lt;åŸŸåæˆ–IP&gt; &lt;æ–°è®¾ç½®çš„ç«¯å£&gt;
</code></pre>
<h2 data-id="heading-9">9. ç«¯å£è¯´æ˜ï¼ˆäº†è§£å³å¯ï¼‰</h2>
<p>RustDesk æœåŠ¡å™¨é»˜è®¤ä½¿ç”¨ <code>21114â€“21119/TCP</code> ä¸ <code>21116/UDP</code>ï¼š</p>
<ul>
<li><code>21116/UDP</code>ï¼šNAT æ‰“æ´ã€‚</li>
<li><code>21117/TCP</code>ï¼šä¸­ç»§é€šé“ã€‚</li>
<li>å…¶ä½™ç«¯å£ç”¨äº ID æ³¨å†Œã€æ¡æ‰‹ä¸æ§åˆ¶ä¿¡ä»¤ç­‰ï¼ˆä¿ç•™é»˜è®¤å³å¯ï¼‰ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[mutable.Setçš„ç‰¹æ€§ï¼Œä»¥åŠè‡ªå®šä¹‰ç±»ä¸­equalså’ŒhashCodeæ–¹æ³•å¯¹é›†åˆå»é‡é€»è¾‘çš„å½±å“]]></title>    <link>https://juejin.cn/post/7578820431018754063</link>    <guid>https://juejin.cn/post/7578820431018754063</guid>    <pubDate>2025-12-02T00:40:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578820431018754063" data-draft-id="7578699975414579200" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="mutable.Setçš„ç‰¹æ€§ï¼Œä»¥åŠè‡ªå®šä¹‰ç±»ä¸­equalså’ŒhashCodeæ–¹æ³•å¯¹é›†åˆå»é‡é€»è¾‘çš„å½±å“"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-02T00:40:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾è€æ€»"/> <meta itemprop="url" content="https://juejin.cn/user/3344078309963692"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            mutable.Setçš„ç‰¹æ€§ï¼Œä»¥åŠè‡ªå®šä¹‰ç±»ä¸­equalså’ŒhashCodeæ–¹æ³•å¯¹é›†åˆå»é‡é€»è¾‘çš„å½±å“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3344078309963692/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾è€æ€»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T00:40:12.000Z" title="Tue Dec 02 2025 00:40:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">package</span> caseclass

<span class="hljs-keyword">import</span> scala.collection.mutable

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">caseclass1</span> </span>{
   <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Book</span>(<span class="hljs-params">var id: <span class="hljs-type">Int</span>, var name: <span class="hljs-type">String</span></span>) </span>{
     <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">equals</span></span>(obj: <span class="hljs-type">Any</span>): <span class="hljs-type">Boolean</span> = {
       <span class="hljs-keyword">val</span> other = obj.asInstanceOf[<span class="hljs-type">Book</span>]
       other.id == id &amp;&amp; other.name == name
     }

     <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hashCode</span></span>(): <span class="hljs-type">Int</span> = id
   }
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
      <span class="hljs-keyword">val</span> set1: mutable.<span class="hljs-type">Set</span>[<span class="hljs-type">Int</span>] = mutable.<span class="hljs-type">Set</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)


      set1 += <span class="hljs-number">1</span>
      set1 += <span class="hljs-number">1</span>
      set1 += <span class="hljs-number">1</span>
      set1 += <span class="hljs-number">1</span>
      println(set1)

      <span class="hljs-keyword">val</span> book1 = <span class="hljs-keyword">new</span> <span class="hljs-type">Book</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"è¥¿æ¸¸è®°"</span>)
      <span class="hljs-keyword">val</span> book2 = <span class="hljs-keyword">new</span> <span class="hljs-type">Book</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"è¥¿æ¸¸è®°"</span>)

      println(book1 == book2)

      <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªsetï¼Œå®ƒçš„ç±»å‹æ˜¯Bookï¼Œå®ƒå¯ä»¥è£…å…¥çš„æ•°æ®æ˜¯bookç±»å‹</span>
      <span class="hljs-keyword">val</span> set2: mutable.<span class="hljs-type">Set</span>[<span class="hljs-type">Book</span>] = mutable.<span class="hljs-type">Set</span>()
      set2 += book1
      set2 += book2

      println(set2)
    }
  }
</code></pre>
<p>è¿™æ®µ Scala ä»£ç ä¸»è¦æ¼”ç¤ºäº†å¯å˜é›†åˆ<code>mutable.Set</code>çš„ç‰¹æ€§ï¼Œä»¥åŠè‡ªå®šä¹‰ç±»ä¸­<code>equals</code>å’Œ<code>hashCode</code>æ–¹æ³•å¯¹é›†åˆå»é‡é€»è¾‘çš„å½±å“ï¼Œå…·ä½“åˆ†æå¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-0">ä»£ç åŠŸèƒ½ä¸æ‰§è¡Œç»“æœ</h3>
<ol>
<li><strong>æ•´æ•°é›†åˆå»é‡</strong>ï¼šå®šä¹‰<code>mutable.Set[Int]</code>ç±»å‹çš„<code>set1</code>ï¼Œåˆå§‹åŒ…å«<code>1</code>å’Œ<code>2</code>ï¼Œå¤šæ¬¡æ·»åŠ <code>1</code>åï¼Œé›†åˆä»ä¸º<code>Set(1, 2)</code>ã€‚å› ä¸º<code>Set</code>çš„ç‰¹æ€§æ˜¯è‡ªåŠ¨å»é‡ï¼Œæ•´æ•°ç±»å‹çš„ç›¸ç­‰æ€§åˆ¤æ–­åŸºäºå€¼ï¼Œé‡å¤å…ƒç´ ä¼šè¢«è‡ªåŠ¨å¿½ç•¥ã€‚</li>
<li><strong>è‡ªå®šä¹‰ç±»å¯¹è±¡çš„ç›¸ç­‰æ€§</strong>ï¼šè‡ªå®šä¹‰<code>Book</code>ç±»é‡å†™äº†<code>equals</code>æ–¹æ³•ï¼ˆé€šè¿‡<code>id</code>å’Œ<code>name</code>åˆ¤æ–­ç›¸ç­‰ï¼‰å’Œ<code>hashCode</code>æ–¹æ³•ï¼ˆåŸºäº<code>id</code>ç”Ÿæˆå“ˆå¸Œå€¼ï¼‰ã€‚åˆ›å»º<code>book1</code>å’Œ<code>book2</code>ï¼ˆ<code>id</code>å’Œ<code>name</code>å‡ç›¸åŒï¼‰ï¼Œ<code>book1 == book2</code>è¾“å‡º<code>true</code>ï¼Œç¬¦åˆé‡å†™...</li>
</ol>
<p>è§£é‡Š</p>
<p>è¿™æ®µ Scala ä»£ç ä¸»è¦å›´ç»•<strong>å¯å˜é›†åˆ<code>mutable.Set</code>çš„å»é‡é€»è¾‘</strong>ã€<strong>è‡ªå®šä¹‰ç±»çš„<code>equals</code>å’Œ<code>hashCode</code>æ–¹æ³•é‡å†™</strong>å±•å¼€ï¼Œæˆ‘ä»¬é€éƒ¨åˆ†æ‹†è§£è§£é‡Šï¼š</p>
<h3 data-id="heading-1">1. æ•´æ•°é›†åˆçš„å»é‡æ¼”ç¤º</h3>
<p>scala</p>
<pre><code class="hljs language-arduino" lang="arduino">val set1: <span class="hljs-keyword">mutable</span>.Set[Int] = <span class="hljs-keyword">mutable</span>.<span class="hljs-built_in">Set</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
set1 += <span class="hljs-number">1</span>
set1 += <span class="hljs-number">1</span>
<span class="hljs-built_in">println</span>(set1)  <span class="hljs-comment">// è¾“å‡ºï¼šSet(1, 2)</span>
</code></pre>
<ul>
<li><code>Set</code>ï¼ˆæ— è®ºå¯å˜ / ä¸å¯å˜ï¼‰çš„æ ¸å¿ƒç‰¹æ€§æ˜¯<strong>å…ƒç´ å”¯ä¸€æ€§</strong>ï¼Œä¼šè‡ªåŠ¨è¿‡æ»¤é‡å¤å…ƒç´ ã€‚</li>
<li>è¿™é‡Œå¤šæ¬¡å‘<code>set1</code>æ·»åŠ <code>1</code>ï¼Œä½†æœ€ç»ˆé›†åˆä»åªä¿ç•™ä¸€ä¸ª<code>1</code>ï¼Œå› ä¸ºæ•´æ•°ç±»å‹ï¼ˆ<code>Int</code>ï¼‰çš„ç›¸ç­‰æ€§åˆ¤æ–­æ˜¯åŸºäº<strong>å€¼æœ¬èº«</strong>çš„ï¼Œ<code>1 == 1</code>å§‹ç»ˆæˆç«‹ï¼Œæ‰€ä»¥é‡å¤æ·»åŠ æ— æ•ˆã€‚</li>
</ul>
<h3 data-id="heading-2">2. è‡ªå®šä¹‰ç±»<code>Book</code>çš„<code>equals</code>å’Œ<code>hashCode</code>é‡å†™</h3>
<p>scala</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span>(<span class="hljs-keyword">var</span> id: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">var</span> name: String) {
  <span class="hljs-comment">// é‡å†™equalsï¼šé€šè¿‡idå’Œnameåˆ¤æ–­ä¸¤ä¸ªBookå¯¹è±¡æ˜¯å¦ç›¸ç­‰</span>
  <span class="hljs-keyword">override</span> def equals(obj: Any): <span class="hljs-built_in">Boolean</span> = {
    <span class="hljs-keyword">val</span> other = obj.asInstanceOf[Book]  <span class="hljs-comment">// å°†Anyç±»å‹å¼ºè½¬ä¸ºBook</span>
    other.id == id &amp;&amp; other.name == name
  }

  <span class="hljs-comment">// é‡å†™hashCodeï¼šåŸºäºidç”Ÿæˆå“ˆå¸Œå€¼</span>
  <span class="hljs-keyword">override</span> def hashCode(): <span class="hljs-built_in">Int</span> = id
}
</code></pre>
<ul>
<li><strong><code>equals</code>æ–¹æ³•</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œç±»çš„<code>equals</code>æ˜¯åŸºäº<strong>å¯¹è±¡å¼•ç”¨</strong>çš„ï¼ˆå³ä¸¤ä¸ªå¯¹è±¡å¿…é¡»æ˜¯å†…å­˜ä¸­åŒä¸€ä¸ªå®ä¾‹æ‰ç›¸ç­‰ï¼‰ã€‚è¿™é‡Œé‡å†™åï¼Œåªè¦ä¸¤ä¸ª<code>Book</code>å¯¹è±¡çš„<code>id</code>å’Œ<code>name</code>ç›¸åŒï¼Œå°±åˆ¤å®šä¸ºç›¸ç­‰ï¼ˆ<code>book1 == book2</code>è¿”å›<code>true</code>ï¼‰ã€‚</li>
<li><strong><code>hashCode</code>æ–¹æ³•</strong>ï¼šå“ˆå¸Œå€¼æ˜¯é›†åˆï¼ˆå¦‚<code>Set</code>ï¼‰å­˜å‚¨å…ƒç´ æ—¶çš„ â€œå¿«é€Ÿç´¢å¼•â€ï¼Œ<code>Set</code>ä¼šå…ˆé€šè¿‡<code>hashCode</code>åˆ†ç»„ï¼Œå†å¯¹åŒç»„å…ƒç´ ç”¨<code>equals</code>åˆ¤æ–­æ˜¯å¦é‡å¤ã€‚è¿™é‡Œ<code>hashCode</code>åŸºäº<code>id</code>ç”Ÿæˆï¼Œæ„å‘³ç€<code>id</code>ç›¸åŒçš„<code>Book</code>å¯¹è±¡ä¼šè¢«åˆ†åˆ°åŒä¸€ç»„ã€‚</li>
</ul>
<h3 data-id="heading-3">3.Â <code>Book</code>å¯¹è±¡å­˜å…¥<code>Set</code>çš„ â€œçœ‹ä¼¼çŸ›ç›¾â€ ç°è±¡</h3>
<p>scala</p>
<pre><code class="hljs language-ini" lang="ini">val <span class="hljs-attr">book1</span> = new Book(<span class="hljs-number">1</span>, <span class="hljs-string">"è¥¿æ¸¸è®°"</span>)
val <span class="hljs-attr">book2</span> = new Book(<span class="hljs-number">1</span>, <span class="hljs-string">"è¥¿æ¸¸è®°"</span>)
println(<span class="hljs-attr">book1</span> == book2)  // è¾“å‡ºï¼š<span class="hljs-literal">true</span>

val set2: mutable.Set<span class="hljs-section">[Book]</span> = mutable.Set()
set2 += book1
set2 += book2
println(set2)  // è¾“å‡ºï¼šSet(Book@1, Book@1)ï¼ˆçœ‹ä¼¼é‡å¤ï¼Œå®é™…æ˜¯ä¸¤ä¸ªä¸åŒå®ä¾‹ï¼‰
</code></pre>
<ul>
<li>
<p><strong><code>book1 == book2</code>ä¸º<code>true</code></strong>ï¼šå› ä¸ºæˆ‘ä»¬é‡å†™äº†<code>equals</code>ï¼Œ<code>book1</code>å’Œ<code>book2</code>çš„<code>id</code>ã€<code>name</code>éƒ½ç›¸åŒï¼Œæ‰€ä»¥ç›¸ç­‰æ€§åˆ¤æ–­æˆç«‹ã€‚</p>
</li>
<li>
<p><strong><code>set2</code>ä¸­åŒæ—¶å­˜åœ¨<code>book1</code>å’Œ<code>book2</code></strong>ï¼šè¿™æ˜¯å…³é”®çš„ â€œçŸ›ç›¾ç‚¹â€â€”â€” æ˜æ˜<code>book1 == book2</code>ä¸º<code>true</code>ï¼Œä½†<code>Set</code>å´æ²¡æœ‰å»é‡ï¼ŸåŸå› åœ¨äºï¼š<code>Set</code>çš„å»é‡é€»è¾‘ä¾èµ– <strong><code>hashCode</code>å’Œ<code>equals</code>çš„ååŒ <strong>ï¼Œä¸”å¯¹äº</strong>æ™®é€šç±»</strong>ï¼ˆéæ ·ä¾‹ç±»ï¼‰ï¼Œå³ä½¿é‡å†™äº†<code>equals</code>å’Œ<code>hashCode</code>ï¼Œ<code>Set</code>ä»ä¼šç»“åˆ<strong>å¯¹è±¡å¼•ç”¨</strong>è¾…åŠ©åˆ¤æ–­ï¼ˆæˆ–å›  JVM çš„å“ˆå¸Œç¢°æ’å¤„ç†ç»†èŠ‚ï¼‰ã€‚æ›´æœ¬è´¨çš„æ˜¯ï¼š</p>
<ul>
<li><code>book1</code>å’Œ<code>book2</code>æ˜¯<strong>ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡å®ä¾‹</strong>ï¼ˆå†…å­˜åœ°å€ä¸åŒï¼‰ï¼Œè€Œ<code>mutable.Set</code>å¯¹æ™®é€šç±»çš„å»é‡é€»è¾‘ï¼Œåœ¨<code>hashCode</code>ç›¸åŒã€<code>equals</code>ä¸º<code>true</code>æ—¶ï¼Œä»å¯èƒ½å›  â€œå®ä¾‹å”¯ä¸€æ€§â€ ä¿ç•™å¤šä¸ªå¯¹è±¡ï¼ˆè¿™æ˜¯æ™®é€šç±»ä¸æ ·ä¾‹ç±»çš„æ ¸å¿ƒåŒºåˆ«ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-4">4. ä¸ºä»€ä¹ˆç”¨æ ·ä¾‹ç±»ï¼ˆ<code>case class</code>ï¼‰å°±èƒ½æ­£ç¡®å»é‡ï¼Ÿ</h3>
<p>å¦‚æœå°†<code>Book</code>å®šä¹‰ä¸º<strong>æ ·ä¾‹ç±»</strong>ï¼š</p>
<p>scala</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span>(<span class="hljs-keyword">var</span> <span class="hljs-attr">id</span>: <span class="hljs-title class_">Int</span>, <span class="hljs-keyword">var</span> <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>)  <span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨é‡å†™equals/hashCode</span>
</code></pre>
<p>æ­¤æ—¶<code>set2 += book1; set2 += book2</code>ä¼šè¾“å‡º<code>Set(Book(1,è¥¿æ¸¸è®°))</code>ï¼Œå› ä¸ºæ ·ä¾‹ç±»ä¼š<strong>è‡ªåŠ¨ç”ŸæˆåŸºäºæ„é€ å‚æ•°çš„<code>equals</code>å’Œ<code>hashCode</code></strong>ï¼Œå®Œå…¨éµå¾ª â€œå€¼ç›¸ç­‰å³å¯¹è±¡ç›¸ç­‰â€ çš„é€»è¾‘ï¼Œ<code>Set</code>ä¼šæ­£ç¡®è¯†åˆ«é‡å¤å¹¶å»é‡ã€‚</p>
<h3 data-id="heading-5">æ€»ç»“</h3>
<ul>
<li><code>Set</code>çš„å»é‡ä¾èµ–<code>hashCode</code>ï¼ˆåˆ†ç»„ï¼‰å’Œ<code>equals</code>ï¼ˆåˆ¤é‡ï¼‰çš„ååŒã€‚</li>
<li>æ™®é€šç±»éœ€æ‰‹åŠ¨é‡å†™<code>equals</code>å’Œ<code>hashCode</code>ï¼Œä½†ä»å¯èƒ½å›  â€œå®ä¾‹å¼•ç”¨â€ å¯¼è‡´<code>Set</code>å»é‡å¤±æ•ˆï¼›æ ·ä¾‹ç±»è‡ªåŠ¨å®ç°æ­£ç¡®çš„<code>equals</code>å’Œ<code>hashCode</code>ï¼Œæ˜¯ Scala ä¸­å®ç° â€œå€¼ç›¸ç­‰â€ çš„æ¨èæ–¹å¼ã€‚</li>
<li>æ•´æ•°ç­‰åŸºç¡€ç±»å‹çš„<code>equals</code>å’Œ<code>hashCode</code>å·²é»˜è®¤å®ç° â€œå€¼ç›¸ç­‰â€ï¼Œå› æ­¤<code>Set</code>å¯¹åŸºç¡€ç±»å‹çš„å»é‡å§‹ç»ˆæœ‰æ•ˆã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™ç³»ç»Ÿ 4.1.0 å…¼å®¹ Android apk å¦‚ä½•æ£€æµ‹å…¼å®¹çš„ Android ç³»ç»Ÿç‰ˆæœ¬æ˜¯å¤šå°‘]]></title>    <link>https://juejin.cn/post/7578780780026609673</link>    <guid>https://juejin.cn/post/7578780780026609673</guid>    <pubDate>2025-12-02T02:15:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578780780026609673" data-draft-id="7578803751608582194" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™ç³»ç»Ÿ 4.1.0 å…¼å®¹ Android apk å¦‚ä½•æ£€æµ‹å…¼å®¹çš„ Android ç³»ç»Ÿç‰ˆæœ¬æ˜¯å¤šå°‘"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T02:15:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lichong951"/> <meta itemprop="url" content="https://juejin.cn/user/1486195453865687"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™ç³»ç»Ÿ 4.1.0 å…¼å®¹ Android apk å¦‚ä½•æ£€æµ‹å…¼å®¹çš„ Android ç³»ç»Ÿç‰ˆæœ¬æ˜¯å¤šå°‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1486195453865687/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lichong951
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:15:53.000Z" title="Tue Dec 02 2025 02:15:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>HarmonyOS 4.1.0 ä»å±äºâ€œå…¼å®¹ AOSPâ€çš„å¸¸è§„ç‰ˆæœ¬ï¼Œ<strong>å¹¶æœªåˆ‡æ¢åˆ°çº¯è¡€é¸¿è’™ NEXT</strong>ã€‚
æ ¹æ®åä¸ºå®˜æ–¹ç‰ˆæœ¬å¯¹ç…§è¡¨ï¼Œ<strong>HarmonyOS 4.1 å¯¹åº”çš„ Android å…¼å®¹å±‚ä¸º Android 12ï¼ˆAPI 31ï¼‰</strong>ï¼Œä¸ 4.0 åŒå±ä¸€ä¸ªåˆ†æ”¯ï¼Œåªæ˜¯è¡¥ä¸çº§åˆ«æ›´é«˜ ã€‚
å› æ­¤ï¼Œåœ¨ 4.1.0 è®¾å¤‡ä¸Šå®‰è£… APK æ—¶ï¼Œ<strong>æŒ‰ Android 12 çš„å…¼å®¹æ€§è¿›è¡Œæµ‹è¯•å³å¯</strong>ï¼›è‹¥å‡ºç°ä»… Android 13+ æ‰å¼•å…¥çš„ APIï¼Œéœ€è¦é™çº§æˆ–åšå…¼å®¹æ€§åˆ¤æ–­ã€‚</p>
<hr/>
<p>åœ¨â€œå…¼å®¹ AOSPâ€çš„é¸¿è’™ç‰ˆæœ¬ï¼ˆ3.x/4.xï¼Œé NEXTï¼‰ä¸Šï¼ŒJava ä»£ç ä¸ Android å®Œå…¨ç›¸åŒï¼Œç›´æ¥è¯»å– <code>Build.VERSION</code> å³å¯å¾—åˆ°å½“å‰è¿è¡Œæ—¶çš„ Android å…¼å®¹å±‚ç‰ˆæœ¬ï¼Œç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> android.os.Build;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getAndroidCompatibleVersion</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// ç¤ºä¾‹è¿”å›ï¼š12</span>
    <span class="hljs-keyword">return</span> Build.VERSION.RELEASE;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAndroidCompatibleSdkInt</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// ç¤ºä¾‹è¿”å›ï¼š31ï¼ˆå¯¹åº” Android 12ï¼‰</span>
    <span class="hljs-keyword">return</span> Build.VERSION.SDK_INT;
}
</code></pre>
<p>è‹¥è¿˜æƒ³ç¡®è®¤â€œæ˜¯ä¸æ˜¯é¸¿è’™â€ï¼Œå¯å†å–ä¸¤é¡¹ç³»ç»Ÿå±æ€§ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. å‚å•†</span>
<span class="hljs-type">String</span> <span class="hljs-variable">manu</span> <span class="hljs-operator">=</span> Build.MANUFACTURER;          <span class="hljs-comment">// HUAWEI  </span>
<span class="hljs-comment">// 2. é¸¿è’™å¢é‡ç‰ˆæœ¬å·ï¼ˆä»…é¸¿è’™è®¾å¤‡å­˜åœ¨ï¼‰</span>
<span class="hljs-type">String</span> <span class="hljs-variable">incremental</span> <span class="hljs-operator">=</span> Build.VERSION.INCREMENTAL; <span class="hljs-comment">// ä¾‹å¦‚ 4.1.0.xxx</span>
</code></pre>
<p>å½“ <code>manu.equals("HUAWEI")</code> ä¸” <code>incremental</code> ä»¥ <code>"Harmony"</code> æˆ– <code>"4.1.0"</code> ç­‰å¼€å¤´æ—¶ï¼Œå³å¯åˆ¤å®šä¸ºé¸¿è’™ç³»ç»Ÿï¼ŒåŒæ—¶ <code>Build.VERSION.RELEASE</code> å°±æ˜¯å®ƒæ‰€å…¼å®¹çš„ Android ç‰ˆæœ¬ï¼Œé¸¿è’™ 4.1.x é€šå¸¸ä¸º <strong>Android 12ï¼ˆAPI 31ï¼‰</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ”¶åˆ°ç¬¬ä¸€å°æ¨å¹¿é‚®ä»¶ï¼šæˆ‘çš„ App æ­£åœ¨è¢«çœ‹è§]]></title>    <link>https://juejin.cn/post/7578781397117386798</link>    <guid>https://juejin.cn/post/7578781397117386798</guid>    <pubDate>2025-12-02T02:21:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578781397117386798" data-draft-id="7578724773994332186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ”¶åˆ°ç¬¬ä¸€å°æ¨å¹¿é‚®ä»¶ï¼šæˆ‘çš„ App æ­£åœ¨è¢«çœ‹è§"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äº§å“"/> <meta itemprop="datePublished" content="2025-12-02T02:21:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HBLOG"/> <meta itemprop="url" content="https://juejin.cn/user/131597124767479"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ”¶åˆ°ç¬¬ä¸€å°æ¨å¹¿é‚®ä»¶ï¼šæˆ‘çš„ App æ­£åœ¨è¢«çœ‹è§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/131597124767479/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HBLOG
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:21:58.000Z" title="Tue Dec 02 2025 02:21:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šçº¿ App æ‰æ²¡å¤šä¹…ï¼Œä»Šå¤©å¿½ç„¶æ”¶åˆ°äº†ä¸€å°æ¨å¹¿é‚®ä»¶ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F12%2Fimage.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/12/image.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7f86360bf224498a9bdfc8234879008~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765246918&amp;x-signature=rz0nhasniXI%2BLAJCQwxG%2F3nDH8A%3D" alt="" loading="lazy"/></a></p>
<p>è¯´å®è¯ï¼Œçœ‹åˆ°çš„é‚£ä¸€åˆ»ï¼Œå¿ƒé‡Œç«Ÿç„¶æœ‰ä¸€ç‚¹ç‚¹æƒŠå–œã€‚</p>
<p>ä¸æ˜¯å› ä¸ºé‚®ä»¶æœ¬èº«ï¼Œè€Œæ˜¯é‚£ç§â€”â€”<br/>
â€œåŸæ¥çœŸçš„æœ‰äººåœ¨å…³æ³¨ã€æœ‰äººåœ¨å°è¯•ã€æœ‰äººæ„¿æ„äº†è§£æˆ‘ä»¬â€çš„æ„Ÿè§‰ã€‚<br/>
åšäº§å“çš„äººåº”è¯¥éƒ½æ‡‚ï¼š<br/>
ä»çµæ„Ÿåˆ°è®¾è®¡ï¼Œä»åŠŸèƒ½åˆ°ä½“éªŒï¼Œä»æ‰“ç£¨åˆ°ä¸Šçº¿â€¦â€¦<br/>
æ¯ä¸€æ­¥éƒ½åƒæŠŠè‡ªå·±çš„å¿ƒè¡€æ¨å‘ä¸–ç•Œï¼Œä½†åˆ°åº•æœ‰æ²¡æœ‰äººåœ¨æ„ï¼Œå´æ°¸è¿œæ˜¯æœªçŸ¥æ•°ã€‚</p>
<p>æ‰€ä»¥ï¼Œå½“ç¬¬ä¸€å°æ¨å¹¿é‚®ä»¶æ‚„æ‚„å‡ºç°ï¼Œå°±åƒæœ‰äººè½»è½»æ‹äº†ä¸€ä¸‹è‚©è†€ï¼š<br/>
<strong>â€œå˜¿ï¼Œä½ åšçš„äº‹æƒ…ï¼Œç¡®å®æœ‰äººçœ‹è§äº†ã€‚â€</strong></p>
<p>å®ƒä¸ä»£è¡¨æˆåŠŸï¼Œä½†è¯´æ˜æ–¹å‘æ²¡é”™ï¼›<br/>
ä¸ä»£è¡¨çˆ†å‘ï¼Œä½†ä»£è¡¨å¼€å§‹æœ‰äº†æ¶Ÿæ¼ªã€‚<br/>
è¿™å°é‚®ä»¶è®©æˆ‘é‡æ–°æ„Ÿåˆ°è¢«è‚¯å®šï¼Œä¹Ÿè®©æˆ‘æ›´ç¡®ä¿¡ï¼š<br/>
æ‰€æœ‰é‚£äº›æ·±å¤œçš„æ„æ€ã€åå¤çš„ä¿®æ”¹ã€ä¸æ–­çš„æŠ€æœ¯è°ƒæ•´ï¼Œæ˜¯çœŸçš„å€¼å¾—çš„ã€‚</p>
<p>æœªæ¥ä¼šæ€æ ·æˆ‘ä¸çŸ¥é“ï¼Œä½†è‡³å°‘ç°åœ¨çš„æˆ‘ï¼Œä¼šç»§ç»­è¸å®åœ°æŠŠæ¯ä¸€ä¸ªåŠŸèƒ½åšåˆ°æ›´å¥½ï¼ŒæŠŠæ¯ä¸€ä¸ªç»†èŠ‚åšå¾—æ›´è®©äººå–œæ¬¢ã€‚</p>
<p>æ¯•ç«Ÿï¼Œè¿™æ˜¯å±äºæˆ‘ä»¬å’Œè¿™æ¬¾ App çš„ç¬¬ä¸€å°ä¿¡å·ç¯ã€‚<br/>
å®ƒå¾®å¼±ï¼Œå´çœŸå®ï¼›<br/>
ä¸è€€çœ¼ï¼Œå´æ¸©æš–ï¼›<br/>
ä½†å®ƒå‘Šè¯‰æˆ‘ï¼š<br/>
<strong>â€œç»§ç»­å¾€å‰èµ°ï¼Œå°±å¯¹äº†ã€‚â€</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æ–‡å­—ä¿¡æ¯å›¾è¡¨çš„æŠ€æœ¯é€‰å‹]]></title>    <link>https://juejin.cn/post/7578793960626536474</link>    <guid>https://juejin.cn/post/7578793960626536474</guid>    <pubDate>2025-12-02T02:24:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578793960626536474" data-draft-id="7578781397117370414" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æ–‡å­—ä¿¡æ¯å›¾è¡¨çš„æŠ€æœ¯é€‰å‹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,GitHub"/> <meta itemprop="datePublished" content="2025-12-02T02:24:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•°æ®ä½“éªŒæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/1486195450988471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æ–‡å­—ä¿¡æ¯å›¾è¡¨çš„æŠ€æœ¯é€‰å‹
            <!----> <!----></h1> <div class="container team-follow" data-v-d326b38e="" data-v-61fb5e44=""><div class="left" data-v-d326b38e=""><a href="/team/6944740539795259422/posts" data-v-d326b38e=""><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b9909c804423411fa9fa1df65b5069d8~tplv-k3u1fbpfcp-watermark.image" class="icon" data-v-d326b38e=""/></a> <div class="content" data-v-d326b38e=""><div style="display: flex" data-v-d326b38e=""><a href="/team/6944740539795259422/posts" data-v-d326b38e=""><p class="title-line" data-v-d326b38e=""><span title="èš‚èšé›†å›¢æ•°æ®ä½“éªŒæŠ€æœ¯å›¢é˜Ÿ" class="title" data-v-d326b38e="">èš‚èšé›†å›¢æ•°æ®ä½“éªŒæŠ€æœ¯å›¢é˜Ÿ</span> <img src="//lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" alt="team icon" class="team-icon" data-v-d326b38e=""/></p></a></div> <div class="meta-box team" data-v-d326b38e="" data-v-61fb5e44=""><time datetime="2025-12-02T02:24:04.000Z" title="Tue Dec 02 2025 02:24:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-d326b38e="" data-v-61fb5e44="">
                2025-12-02
              </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-d326b38e="" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/></svg> <span class="views-count" style="display:none;" data-v-d326b38e="" data-v-61fb5e44="">
                7
              </span> <span class="read-time" data-v-d326b38e="" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d326b38e="" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-d326b38e="" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-d326b38e="" data-v-61fb5e44=""/></svg>
                é˜…è¯»5åˆ†é’Ÿ
              </span> <!----> <!----></div></div></div> <button class="jj-follow-button follow-btn" style="display:none;" data-v-b60b2868="" data-v-d326b38e=""><span data-v-b60b2868="" data-v-d326b38e=""><i class="byte-icon byte-icon--plus" data-v-d326b38e=""><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"/><path d="M24.7 4c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8V22h16.7c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8v1.4c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1H26v16.7c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1h-1.4c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8V26H5.3c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8v-1.4c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1H22V5.3c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1h1.4z"/></svg></i>
        å…³æ³¨
      </span></button></div> <div class="team-user block-hidden" data-v-61fb5e44=""><div class="avatar jj-avatar avatar" data-v-03256cc6="" data-v-61fb5e44=""><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="avatar" class="lazy avatar-img" data-v-5244ef91="" data-v-03256cc6=""/> </div> <!----> <span class="position ellipsis" data-v-61fb5e44="">
              æ•°æ®å¯è§†åŒ–
            </span></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ–‡å­—ä¿¡æ¯æ˜¯æœ€æœ´ç´ çš„ä¿¡æ¯è½½ä½“ï¼Œå³ä½¿æ˜¯ AI æ—¶ä»£ï¼Œå¤§æ¨¡å‹çš„è¾“å‡ºéƒ½æ˜¯æ–‡å­—ä¿¡æ¯å±…å¤šã€‚</p>
<h2 data-id="heading-0">æ–‡æœ¬ä¿¡æ¯å›¾</h2>
<p>æˆ‘ä»¬å¤§é‡çš„äº§å“ï¼Œå…¶å®éƒ½æ˜¯åœ¨åšæ–‡å­—ä¿¡æ¯çš„æ•´åˆå’Œå¯è§†åŒ–ï¼Œæ¯”å¦‚ï¼šPPTã€æµç¨‹å›¾ã€æ€ç»´å¯¼å›¾ã€ä¿¡æ¯æµ·æŠ¥ç­‰è½¯ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›åšå®¢çš„å›¾æ–‡æ··æ’æ¨¡å¼ï¼Œå…¶å®éƒ½æ˜¯åœ¨å¯¹æ–‡å­—ä¿¡æ¯è¿›è¡Œå½’çº³å’Œå¯è§†åŒ–ï¼Œè¿™éƒ¨åˆ†æˆ‘ä»¬éƒ½å¯ä»¥ç§°ä¹‹ä¸ºæ–‡æœ¬ä¿¡æ¯çš„å¯è§†åŒ–ï¼Œæˆ–è€…ä¿¡æ¯å›¾å¯è§†åŒ–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edc4beb0c63946aa9b58398cf24f3794~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247507&amp;x-signature=C3hNiEY869f1k4YPhiuLfxNhnEw%3D" alt="image.png" loading="lazy"/></p>
<p>AI æ—¶ä»£ä¸‹ï¼Œæ–‡æœ¬å¤§æ¨¡å‹å¯¹äºæ–‡æœ¬ä¿¡æ¯ç†è§£å’Œå¤„ç†èƒ½åŠ›å¤§å¤§åŠ å¼ºï¼Œå¤§æ¨¡å‹èƒ½å¾ˆæ¸…æ¥šçš„ç†è§£æ–‡å­—çš„ç»“æ„ä¿¡æ¯ï¼Œè¡¨è¾¾çš„æ ¸å¿ƒè§‚ç‚¹ï¼Œä»¥åŠä»éç»“æ„ä¿¡æ¯ä¸­æŠ½å–å’Œæ¨ç†æœ‰ç”¨çš„ã€ç»“æ„åŒ–ä¿¡æ¯ã€‚</p>
<p>æ‰€ä»¥åœ¨ AI æ¥ä¸´ä¹‹åï¼Œæœ‰å¤§é‡çš„ AI Agent åº”ç”¨éƒ½æ˜¯å…³æ³¨åœ¨æ–‡å­—çš„å¤„ç†å’Œå‘ˆç°ä¸Šçš„ï¼Œæ¯”å¦‚ AI PPTã€AI æµç¨‹å›¾ã€AI å›¾è¡¨ã€ä»¥åŠå„ç±»çš„ DeepResearch åº”ç”¨ã€‚</p>
<p>æœ€è¿‘èš‚èšé›†å›¢å‘å¸ƒçš„å¾ˆç«çš„çµå…‰ï¼ŒæŠ¢çœ¼çš„è¡¨ç°ï¼ŒåŸå› ä¹‹ä¸€å°±æ˜¯çµå…‰å¯ä»¥è®©æ¨¡å‹è¾“å‡ºæ›´å¤šå½¢æ€çš„å†…å®¹ï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€è§†é¢‘ã€3Dã€äº¤äº’å›¾è¡¨ï¼Œä¿¡æ¯å›¾ç­‰ã€‚</p>
<h2 data-id="heading-1">æŠ€æœ¯å®ç°å’Œé€‰å‹</h2>
<p>ä¸šç•Œä¸Šï¼Œå®ç°æ–‡æœ¬ä¿¡æ¯å¯è§†åŒ–çš„ï¼Œæœ‰ä¸€äº›å½¢æ€ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†ï¼Œéƒ½æ˜¯ä¿¡æ¯å›¾çš„åˆ¶ä½œå¹³å°ã€‚å¦‚æœå¤§å®¶åšè¿‡è°ƒç ”ï¼Œå¤§æ¦‚å°±çŸ¥é“å¦‚ä¸‹çš„äº§å“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7451fb008b0148bf8eb31e5d44da1491~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247507&amp;x-signature=%2F%2FO%2F1ip1d08%2F6gSxn%2FdHWaaW6mw%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¸å¿ƒåŠŸèƒ½åŸºæœ¬éƒ½æ˜¯ä¸€è‡´çš„ï¼š</p>
<ul>
<li>AI èƒ½åŠ›å±‚ï¼šé€‰æ‹©åˆé€‚çš„æ¨¡ç‰ˆï¼Œä»ç”¨æˆ·æ–‡æœ¬æŠ½å–æ•°æ®ã€‚</li>
<li>è¾“å‡ºä¿¡æ¯å›¾ï¼šæ”¯æŒå¯¼å‡º PNG/SVG ç­‰å¤šç§åª’ä»‹æ ¼å¼ã€‚</li>
<li>ä¿¡æ¯å›¾ç¼–è¾‘ï¼šæä¾›åœ¨çº¿ Web å¯è§†åŒ–ç•Œé¢äº¤äº’é…ç½®ã€‚</li>
<li>æ•°æ®å­˜å‚¨ï¼šè®¾è®¡DSL Schema / ç”»å¸ƒçŠ¶æ€ä¿å­˜æ•°æ®ã€‚</li>
<li>ä¿¡æ¯å›¾æ¸²æŸ“ï¼šåŸºäºæµè§ˆå™¨ Canvas/SVG å°è£…æ¸²æŸ“å¼•æ“ã€‚</li>
</ul>
<p>ä½†æ˜¯é—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼šä»˜è´¹ä½¿ç”¨ã€æ¨¡æ¿çµæ´»æ€§ä½ã€é—­æºçš„ç”Ÿæ€ã€é›†æˆåˆ°åº”ç”¨åŸºæœ¬ä¸å¯èƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9e2245d33ed40fdad76d466fb8f9df4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247507&amp;x-signature=uatFno1zlF3GfiQSEVj5We7LEGU%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨æƒ³ï¼Œå¦‚æœæˆ‘ä»¬çš„ä¸šåŠ¡ç³»ç»Ÿéœ€è¦å®ç°ç±»ä¼¼çš„æ–‡æœ¬ä¿¡æ¯å›¾å¯è§†åŒ–è¯¥æ€ä¹ˆåšï¼Œæœ‰å‡ ç§æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-2">Mermaid</h3>
<p>æ˜¯ä¸€ä¸ªåŸºäº JavaScript çš„ç»˜å›¾å’Œå›¾è¡¨å·¥å…·ï¼Œå‘ˆç°å— Markdown å¯å‘çš„æ–‡æœ¬å®šä¹‰ï¼Œä»¥åŠ¨æ€åˆ›å»ºå’Œä¿®æ”¹å›¾è¡¨ã€‚å¸¸ç”¨äºåˆ›å»ºï¼šæ—¶åºå›¾ã€æµç¨‹å›¾ã€ç±»å›¾ã€æ—¶é—´è½´ï¼Œç­‰ ~20 ä¸­å›¾è¡¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74e9f4c51aed4e219195c96f720f7d08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247507&amp;x-signature=g%2FDYClrJTeZ%2F7lO3W%2FaHw1YY8mo%3D" alt="image.png" loading="lazy"/></p>
<p>æ˜¯ç¤¾åŒºå¹¿æ³›é‡‡ç”¨çš„ä¸€ç§æ–¹æ¡ˆï¼Œå½“ç„¶ï¼Œé—®é¢˜å°±æ˜¯å›¾å½¢ä¸€èˆ¬åæŠ€æœ¯çš„åŒå­¦çœ‹çš„ï¼Œå¯¹äºæ™®é€šçš„æ–‡å­—å†…å®¹å’Œç»“æ„å‘ˆç°ï¼Œå¹¶ä¸é€‚åˆã€‚</p>
<h3 data-id="heading-3">ä½¿ç”¨ AI ç›´å‡º HTML + SVG</h3>
<p>ä½¿ç”¨ AI å¤§æ¨¡å‹ + æç¤ºè¯ï¼Œç”Ÿæˆæœ€ç»ˆçš„ HTML æˆ–è€… SVGï¼Œç„¶åæœ€ç»ˆç”Ÿæˆå¯¹åº”çš„ HTML æˆ–è€… SVG æ¸²æŸ“ï¼Œè¿™ä¸ªå¯èƒ½æ˜¯æœªæ¥é•¿æœŸçš„æ–¹å‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1bc5b2d94134c459b6ff3d012b315c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247507&amp;x-signature=5n2iwVtuJG%2FUtGUOTmxceGxzDBw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7dc8476f5304440c9d0d209710cdc9bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247507&amp;x-signature=rUU9GmwZW3F9ZlUz4Y3twFygmcc%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸è¿‡å°±ç›®å‰çš„æ•ˆæœæ¥çœ‹ï¼ŒHTML æ•ˆæœæ¯” SVG è¦ç¨å¾®å¥½ä¸€ç‚¹ï¼ŒSVG ç”Ÿæˆä¾ç„¶ä¼šé‡åˆ°å„ç§å¸ƒå±€ç‚¹çš„ä½ç½®ï¼Œç‰¹åˆ«åƒæ–‡å­—ç¢°æ’åŸºæœ¬æ— æ³•å¤„ç†ï¼›HTML ä¸Šå°±æ˜¯é£æ ¼ä¸Šä¼šæ¯”è¾ƒå•ä¸€ä¸€äº›ï¼Œé¢œè‰²å’Œ border ä¸Šï¼Œæœ‰å¾ˆå¼ºçš„ AI å‘³é“ã€‚</p>
<h3 data-id="heading-4">ä½¿ç”¨å¤šæ¨¡æ€å¤§æ¨¡å‹ç”Ÿæˆä¿¡æ¯å›¾å›¾ç‰‡</h3>
<p>gemini 3 å‘å¸ƒï¼ŒåŠ ä¸Š banana pro çš„å‘å¸ƒï¼Œè®©å¤šæ¨¡æ€æ¨¡å‹ç›´æ¥è¾“å‡ºä¿¡æ¯å›¾ï¼ŒåŸºæœ¬å˜æˆäº†ç°å®ï¼Œæ•ˆæœå¾ˆå¥½ï¼Œè€Œä¸”åœ¨å¤§éƒ¨åˆ†å¤šæ¨¡æ€é‡åˆ°çš„ä¸­æ–‡é—®é¢˜ï¼Œä¹Ÿèƒ½å¾ˆå¥½çš„è§£å†³ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4dacd03d5fe846128962dbc96dad5bad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247507&amp;x-signature=4MNa780v8UwV4TsqwS8aPiu3AaM%3D" alt="image.png" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œä¹Ÿä¼šæœ‰ä¸€äº›å°é—®é¢˜ï¼Œè¿™äº›é—®é¢˜æ›´å¤šæ˜¯å›¾ç‰‡è¿™ä¸ªå­˜å‚¨æ ¼å¼å¸¦æ¥çš„ï¼š</p>
<ol>
<li>æ— æ³•äºŒæ¬¡ç¼–è¾‘ï¼Œæˆ–è€…å¾ˆå¥½åšåˆ°å¾ˆå¥½çš„äºŒæ¬¡ç¼–è¾‘</li>
<li>æ— æ³•å®ç°åŠ¨ç”»æ•ˆæœ</li>
<li>æ— æ³•äº¤äº’</li>
</ol>
<h3 data-id="heading-5">AntV Infographic</h3>
<p>Infographic æ˜¯ AntV åœ¨ 2025 å¹´ 11 æœˆ 22 æ—¥å¼€æºå‡ºæ¥çš„ä¸€ä¸ªä¿¡æ¯å›¾å¯è§†åŒ–æ¡†æ¶ï¼Œä¸»è¦å…³æ³¨åœ¨æ¸²æŸ“éƒ¨åˆ†ï¼Œæä¾›äº† 100+ çš„ä¼˜è´¨ä¿¡æ¯å›¾æ¨¡ç‰ˆï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¢åŠ äº†è‡ªå®šä¹‰çš„å¼€å‘èƒ½åŠ›ï¼Œè®©æ¨¡ç‰ˆæ•°é‡èƒ½å€æ•°å¢é•¿ï¼›å›¾çš„è®¾è®¡é£æ ¼æ¯”è¾ƒé€‚ç”¨äº PPT å’Œå†™æ–‡ç« é…å›¾çš„é‚£ç§åœºæ™¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39ecea2d094d4578a6cd8a1789bc5e24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247507&amp;x-signature=1SQcC4IiXAbkNa1S%2FpM3BCxk9IQ%3D" alt="image.png" loading="lazy"/></p>
<p>ä¹Ÿæœ‰æä¾›å„ç§é£æ ¼ï¼Œå†…ç½®æ·±è‰²æ¨¡å¼ã€æ‰‹ç»˜ã€çº¹ç†è§†è§‰é£æ ¼ï¼Œæ‰‹ç»˜é£æ ¼è¿™ä¸ªå¾ˆé…·ã€‚å¦å¤–ï¼Œä¸ºäº†åœ¨ AI ä¸Šæ›´å¥½çš„ä½¿ç”¨ï¼Œä¹Ÿåšäº† AI å‹å¥½çš„é…ç½®å’Œæè¿°ï¼Œå¹¶åœ¨å®˜ç½‘æä¾›äº† AI Agent æ¥ä½¿ç”¨ï¼Œä»¥åŠç”¨äºäºŒæ¬¡ç¼–è¾‘çš„ç¼–è¾‘å™¨ç»„ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/204fb7f2e41f484fb77398c736565fc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247507&amp;x-signature=A1zraFDlXchKKBrRmlhDaBDGxWw%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€ä»¥ç›¸å…³æ–‡æœ¬ä¿¡æ¯å›¾å¯è§†åŒ–çš„ä¸šåŠ¡ï¼Œæ¥å…¥çš„æ—¶å€™ï¼Œåªéœ€è¦å‚è€ƒå“åº”çš„æç¤ºè¯ï¼Œç”Ÿæˆ Infographic çš„é…ç½®ï¼Œç„¶åä½¿ç”¨ Infographic æ¸²æŸ“å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c1932d48fa54cb3aa674ea7905b1093~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247507&amp;x-signature=IitGkLia%2BE0tsfWog6d9wUACIng%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6">æŠ€æœ¯é€‰å‹æ€»ç»“</h2>
<p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼ŒAI äº§å“åœ¨å¤„ç†æ–‡æœ¬ä¿¡æ¯å›¾å¯è§†åŒ–çš„æ–¹æ¡ˆå¯¹æ¯”ï¼Œä»…ä¾›å‚è€ƒã€‚</p>






























<table><thead><tr><th><strong>æ–¹æ¡ˆ</strong></th><th><strong>ä¼˜åŠ¿</strong></th><th><strong>åŠ£åŠ¿</strong></th></tr></thead><tbody><tr><td>Mermaid</td><td>+ ç¤¾åŒºå½±å“åŠ›å¤§<br/>+ èƒ½åŠ›ä¸°å¯Œï¼Œå¼ºå¤§<br/>+ æ¨¡å‹è¾“å‡ºå‡†ç¡®</td><td>- æŠ€æœ¯ç±»å‹çš„ä¿¡æ¯å›¾<br/>- ä¸é€‚ç”¨äºæ™®é€šæ–‡æœ¬ä¿¡æ¯å¯è§†åŒ–<br/>- åŒ…æ¯”è¾ƒå¤§ 2.7 Mb</td></tr><tr><td>AI å‡º HTML / SVG</td><td>+ æ¥å…¥ç®€å•å®¹æ˜“</td><td>- å‡†ç¡®åº¦ã€é£æ ¼ä¸å¯æ§<br/>- æ¨¡ç‰ˆæ ·å¼æ¯”è¾ƒå•ä¸€<br/>- ä¼šå®¹æ˜“å‡ºç°ä¸€äº›ä½“éªŒé—®é¢˜</td></tr><tr><td>å¤šæ¨¡æ€å‡ºå›¾ç‰‡</td><td>+ æ–°çš„ banana pro æ•ˆæœä¸é”™</td><td>- æ— æ³•ç¼–è¾‘ã€æ— åŠ¨ç”»å’Œäº¤äº’<br/>- é—­æºæ¨¡å‹ï¼Œè°ƒç”¨è´µ</td></tr><tr><td>AntV Infographic</td><td>+ å¼€æºã€å…è´¹<br/>+ æ¨¡ç‰ˆä¸°å¯Œï¼Œç›®å‰å†…ç½® 100+ï¼Œå¯å¼€å‘æ‰©å±•ï¼Œæ”¯æŒä¸åŒé£æ ¼<br/>+ æ”¯æŒç¼–è¾‘ï¼Œä»¥åŠæä¾›ç¼–è¾‘å™¨<br/>+ æ¥å…¥è¿‡ç¨‹å®Œå…¨å¯æ§<br/>+ åŒ…è½»é‡ï¼Œ410 Kb</td><td>- é›†æˆæœ‰ Agent ç ”å‘å·¥ä½œé‡ï¼ˆå¼€å‘å’Œæµ‹è¯„ï¼‰</td></tr></tbody></table>
<blockquote>
<p>ç»¼ä¸Šï¼Œä¸ªäººå»ºè®®ï¼Œå¦‚æœåœ¨åš AI æ–‡å­—é…å›¾ï¼Œä¿¡æ¯å›¾ä¹‹ç±»çš„éœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fantvis%2Finfographic" target="_blank" title="https://github.com/antvis/infographic" ref="nofollow noopener noreferrer">AntV Infographic</a> + <a href="https://link.juejin.cn?target=https%3A%2F%2Fmermaid.js.org%2F" target="_blank" title="https://mermaid.js.org/" ref="nofollow noopener noreferrer">Mermaid</a> ç›¸ç»“åˆçš„æ–¹å¼ï¼ŒæŠ€æœ¯å›¾è¡¨ä½¿ç”¨ Mermaidï¼Œå¸¸è§çš„ PPTã€æ–‡å­—ç»“æ„é…å›¾ï¼Œä½¿ç”¨ AntV Infographicã€‚</p>
</blockquote>
<h2 data-id="heading-7">æœ€å</h2>
<p>ä¿¡æ¯å›¾çš„ç”Ÿæˆï¼Œæœªæ¥å¤§æ¨¡å‹ä¸€å®šä¼šæ”¯æŒç›´å‡ºä»£ç ï¼Œä½†æ˜¯å½“å‰æ¥çœ‹ï¼Œè¿™ä¸ªæ—¶é—´å¯èƒ½ä¾ç„¶è¿˜æ˜¯ 2-3 å¹´åï¼Œä¸ªäººæ„Ÿè§‰è¿™ä¸æ¯«ä¸å½±å“ä¿¡æ¯å›¾æ¸²æŸ“æŠ€æœ¯çš„æŒç»­è¿­ä»£ã€‚</p>
<p>å› ä¸º AI ä¸ä¼šå‡å°‘éœ€æ±‚ï¼Œåè€Œä¼šæ‰©å¤§ç”¨æˆ·é‡ï¼Œæå‡éœ€æ±‚å’Œç”¨æˆ·é‡ï¼Œè€Œä¿¡æ¯å›¾æ¸²æŸ“æŠ€æœ¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Finfographic.antv.vision%2F" target="_blank" title="https://infographic.antv.vision/" ref="nofollow noopener noreferrer">Infographic</a> ä¼šå› ä¸ºè¿™ä¸ªéœ€æ±‚çš„å¢é•¿ï¼Œå…·æœ‰æ›´å¤šçš„ç”¨æˆ·é‡ã€‚</p>
<blockquote>
<p>AI ç›´æ¥å‡ºç æ˜¯è¶‹åŠ¿ï¼Œä½†æ˜¯ä¸ä»£è¡¨åŸºç¡€æŠ€æœ¯åº“æ¶ˆäº¡ï¼Œè€Œæ˜¯ä½œä¸ºå‡ºç çš„ä¾èµ–å­˜åœ¨ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java `this` å…³é”®å­—æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7578777952726499362</link>    <guid>https://juejin.cn/post/7578777952726499362</guid>    <pubDate>2025-12-02T02:19:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578777952726499362" data-draft-id="7578797337867272226" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java `this` å…³é”®å­—æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T02:19:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å‘¨åœ¨æˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/3632442150752573"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java `this` å…³é”®å­—æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3632442150752573/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å‘¨åœ¨æˆé•¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:19:47.000Z" title="Tue Dec 02 2025 02:19:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“– <code>this</code> å…³é”®å­—æ¦‚è¿°</h2>
<h3 data-id="heading-1"><strong>ä»€ä¹ˆæ˜¯ thisï¼Ÿ</strong></h3>
<p><code>this</code> æ˜¯ä¸€ä¸ªæŒ‡å‘<strong>å½“å‰å¯¹è±¡</strong>çš„å¼•ç”¨å˜é‡ï¼Œåœ¨å®ä¾‹æ–¹æ³•å’Œæ„é€ å™¨ä¸­ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-2"><strong>this çš„æ ¸å¿ƒä½œç”¨</strong></h3>
<ul>
<li>æŒ‡å‘å½“å‰å¯¹è±¡å®ä¾‹</li>
<li>è§£å†³<strong>å˜é‡åå†²çª</strong></li>
<li>åœ¨æ„é€ å™¨ä¸­è°ƒç”¨å…¶ä»–æ„é€ å™¨</li>
<li>ä½œä¸ºå‚æ•°ä¼ é€’å½“å‰å¯¹è±¡</li>
</ul>
<h2 data-id="heading-3">ğŸ¯ <code>this</code> çš„å››ç§ç”¨æ³•</h2>
<h3 data-id="heading-4"><strong>ç”¨æ³•1ï¼šå¼•ç”¨å½“å‰å¯¹è±¡çš„æˆå‘˜å˜é‡ï¼ˆæœ€å¸¸è§ï¼‰</strong></h3>
<h4 data-id="heading-5"><strong>è§£å†³å±€éƒ¨å˜é‡ä¸æˆå‘˜å˜é‡åŒåé—®é¢˜</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-keyword">private</span> String name;    <span class="hljs-comment">// æˆå‘˜å˜é‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;        <span class="hljs-comment">// æˆå‘˜å˜é‡</span>
    
    <span class="hljs-comment">// æ„é€ å™¨å‚æ•°ä¸æˆå‘˜å˜é‡åŒå</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-comment">// ä½¿ç”¨thisåŒºåˆ†æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡</span>
        <span class="hljs-built_in">this</span>.name = name;   <span class="hljs-comment">// this.name æ˜¯æˆå‘˜å˜é‡ï¼Œnameæ˜¯å‚æ•°</span>
        <span class="hljs-built_in">this</span>.age = age;     <span class="hljs-comment">// this.age æ˜¯æˆå‘˜å˜é‡ï¼Œageæ˜¯å‚æ•°</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;   <span class="hljs-comment">// åŒºåˆ†æˆå‘˜å˜é‡å’Œå‚æ•°</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
    
    <span class="hljs-comment">// æ²¡æœ‰æ­§ä¹‰æ—¶ï¼Œthiså¯ä»¥çœç•¥</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è¿™é‡Œæ²¡æœ‰å±€éƒ¨å˜é‡nameå’Œageï¼Œå¯ä»¥ç›´æ¥è®¿é—®æˆå‘˜å˜é‡</span>
        System.out.println(<span class="hljs-string">"å§“å: "</span> + name + <span class="hljs-string">", å¹´é¾„: "</span> + age);
        
        <span class="hljs-comment">// ä½¿ç”¨thisä¹Ÿå¯ä»¥ï¼ˆä½†æ²¡å¿…è¦ï¼‰</span>
        System.out.println(<span class="hljs-string">"å§“å: "</span> + <span class="hljs-built_in">this</span>.name + <span class="hljs-string">", å¹´é¾„: "</span> + <span class="hljs-built_in">this</span>.age);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Student</span> <span class="hljs-variable">stu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">20</span>);
        stu.display();
    }
}
</code></pre>
<h4 data-id="heading-6"><strong>æ›´å¤æ‚çš„ä¾‹å­</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> salary;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateEmployee</span><span class="hljs-params">(<span class="hljs-type">int</span> id, String name, <span class="hljs-type">double</span> salary)</span> {
        <span class="hljs-comment">// ä½¿ç”¨thisæ˜ç¡®åŒºåˆ†</span>
        <span class="hljs-built_in">this</span>.id = id;           <span class="hljs-comment">// å·¦è¾¹æ˜¯æˆå‘˜å˜é‡ï¼Œå³è¾¹æ˜¯å‚æ•°</span>
        <span class="hljs-built_in">this</span>.name = name;       <span class="hljs-comment">// å·¦è¾¹æ˜¯æˆå‘˜å˜é‡ï¼Œå³è¾¹æ˜¯å‚æ•°</span>
        <span class="hljs-built_in">this</span>.salary = salary;   <span class="hljs-comment">// å·¦è¾¹æ˜¯æˆå‘˜å˜é‡ï¼Œå³è¾¹æ˜¯å‚æ•°</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printInfo</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ²¡æœ‰å±€éƒ¨å˜é‡å†²çªï¼Œå¯ä»¥ä¸ç”¨thisï¼ˆä½†ç”¨thisæ›´æ¸…æ™°ï¼‰</span>
        System.out.println(<span class="hljs-string">"ID: "</span> + <span class="hljs-built_in">this</span>.id);
        System.out.println(<span class="hljs-string">"å§“å: "</span> + <span class="hljs-built_in">this</span>.name);
        System.out.println(<span class="hljs-string">"è–ªèµ„: "</span> + <span class="hljs-built_in">this</span>.salary);
    }
}
</code></pre>
<h3 data-id="heading-7"><strong>ç”¨æ³•2ï¼šåœ¨æ„é€ å™¨ä¸­è°ƒç”¨å…¶ä»–æ„é€ å™¨ï¼ˆthis()ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> width;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> height;
    <span class="hljs-keyword">private</span> String color;
    
    <span class="hljs-comment">// æ„é€ å™¨1ï¼šé»˜è®¤æ„é€ å™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Rectangle</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è°ƒç”¨ä¸‰å‚æ„é€ å™¨ï¼Œæä¾›é»˜è®¤å€¼</span>
        <span class="hljs-built_in">this</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-string">"é»‘è‰²"</span>);
        System.out.println(<span class="hljs-string">"è°ƒç”¨é»˜è®¤æ„é€ å™¨"</span>);
    }
    
    <span class="hljs-comment">// æ„é€ å™¨2ï¼šåªæœ‰å®½é«˜</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Rectangle</span><span class="hljs-params">(<span class="hljs-type">int</span> width, <span class="hljs-type">int</span> height)</span> {
        <span class="hljs-comment">// è°ƒç”¨ä¸‰å‚æ„é€ å™¨ï¼Œä½¿ç”¨é»˜è®¤é¢œè‰²</span>
        <span class="hljs-built_in">this</span>(width, height, <span class="hljs-string">"é»‘è‰²"</span>);
        System.out.println(<span class="hljs-string">"è°ƒç”¨åŒå‚æ„é€ å™¨"</span>);
    }
    
    <span class="hljs-comment">// æ„é€ å™¨3ï¼šå®Œæ•´å‚æ•°ï¼ˆä¸»è¦æ„é€ å™¨ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Rectangle</span><span class="hljs-params">(<span class="hljs-type">int</span> width, <span class="hljs-type">int</span> height, String color)</span> {
        <span class="hljs-built_in">this</span>.width = width;
        <span class="hljs-built_in">this</span>.height = height;
        <span class="hljs-built_in">this</span>.color = color;
        System.out.println(<span class="hljs-string">"è°ƒç”¨ä¸‰å‚æ„é€ å™¨"</span>);
    }
    
    <span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šä¸èƒ½å½¢æˆå¾ªç¯è°ƒç”¨</span>
    <span class="hljs-comment">/*
    public Rectangle() {
        this(10, 10);  // è°ƒç”¨åŒå‚æ„é€ å™¨
    }
    
    public Rectangle(int width, int height) {
        this();  // âŒ é”™è¯¯ï¼šå¾ªç¯è°ƒç”¨ï¼Œç¼–è¯‘é”™è¯¯
    }
    */</span>
    
    <span class="hljs-comment">// é‡è¦è§„åˆ™ï¼šthis()å¿…é¡»æ˜¯æ„é€ å™¨çš„ç¬¬ä¸€æ¡è¯­å¥</span>
    <span class="hljs-comment">/*
    public Rectangle() {
        System.out.println("åˆå§‹åŒ–å¼€å§‹");  // âŒ é”™è¯¯ï¼šå¿…é¡»åœ¨this()ä¹‹å‰
        this(10, 10);  // ç¼–è¯‘é”™è¯¯
    }
    */</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"å®½: "</span> + width + <span class="hljs-string">", é«˜: "</span> + height + <span class="hljs-string">", é¢œè‰²: "</span> + color);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"=== åˆ›å»ºå¯¹è±¡1 ==="</span>);
        <span class="hljs-type">Rectangle</span> <span class="hljs-variable">r1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Rectangle</span>();
        r1.display();
        
        System.out.println(<span class="hljs-string">"\n=== åˆ›å»ºå¯¹è±¡2 ==="</span>);
        <span class="hljs-type">Rectangle</span> <span class="hljs-variable">r2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Rectangle</span>(<span class="hljs-number">20</span>, <span class="hljs-number">30</span>);
        r2.display();
        
        System.out.println(<span class="hljs-string">"\n=== åˆ›å»ºå¯¹è±¡3 ==="</span>);
        <span class="hljs-type">Rectangle</span> <span class="hljs-variable">r3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Rectangle</span>(<span class="hljs-number">40</span>, <span class="hljs-number">50</span>, <span class="hljs-string">"çº¢è‰²"</span>);
        r3.display();
    }
}
</code></pre>
<h3 data-id="heading-8"><strong>ç”¨æ³•3ï¼šä½œä¸ºå‚æ•°ä¼ é€’å½“å‰å¯¹è±¡</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThisAsParameter</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodA</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"methodAè¢«è°ƒç”¨"</span>);
        methodB(<span class="hljs-built_in">this</span>);  <span class="hljs-comment">// å°†å½“å‰å¯¹è±¡ä¼ é€’ç»™methodB</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodB</span><span class="hljs-params">(ThisAsParameter obj)</span> {
        System.out.println(<span class="hljs-string">"methodBæ¥æ”¶åˆ°å¯¹è±¡: "</span> + obj);
        obj.methodC();  <span class="hljs-comment">// é€šè¿‡å‚æ•°è°ƒç”¨æ–¹æ³•</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodC</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"methodCè¢«è°ƒç”¨"</span>);
    }
    
    <span class="hljs-comment">// å®é™…åº”ç”¨ï¼šé“¾å¼è°ƒç”¨</span>
    <span class="hljs-keyword">public</span> ThisAsParameter <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        System.out.println(<span class="hljs-string">"è®¾ç½®åç§°: "</span> + name);
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;  <span class="hljs-comment">// è¿”å›å½“å‰å¯¹è±¡ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨</span>
    }
    
    <span class="hljs-keyword">public</span> ThisAsParameter <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        System.out.println(<span class="hljs-string">"è®¾ç½®å¹´é¾„: "</span> + age);
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
    }
    
    <span class="hljs-keyword">public</span> ThisAsParameter <span class="hljs-title function_">setCity</span><span class="hljs-params">(String city)</span> {
        System.out.println(<span class="hljs-string">"è®¾ç½®åŸå¸‚: "</span> + city);
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ThisAsParameter</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThisAsParameter</span>();
        
        <span class="hljs-comment">// æ™®é€šè°ƒç”¨</span>
        obj.methodA();
        
        System.out.println(<span class="hljs-string">"\n=== é“¾å¼è°ƒç”¨ ==="</span>);
        <span class="hljs-comment">// é“¾å¼è°ƒç”¨ï¼ˆæµç•…æ¥å£ï¼‰</span>
        obj.setName(<span class="hljs-string">"å¼ ä¸‰"</span>)
           .setAge(<span class="hljs-number">25</span>)
           .setCity(<span class="hljs-string">"åŒ—äº¬"</span>);
           
        <span class="hljs-comment">// ç­‰ä»·äºï¼š</span>
        <span class="hljs-comment">// obj.setName("å¼ ä¸‰");</span>
        <span class="hljs-comment">// obj.setAge(25);</span>
        <span class="hljs-comment">// obj.setCity("åŒ—äº¬");</span>
    }
}
</code></pre>
<h3 data-id="heading-9"><strong>ç”¨æ³•4ï¼šè¿”å›å½“å‰å¯¹è±¡ï¼ˆç”¨äºé“¾å¼è°ƒç”¨ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PersonBuilder</span> {
    <span class="hljs-keyword">private</span> String firstName;
    <span class="hljs-keyword">private</span> String lastName;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;
    <span class="hljs-keyword">private</span> String address;
    
    <span class="hljs-comment">// è¿”å›thisï¼Œæ”¯æŒé“¾å¼è°ƒç”¨</span>
    <span class="hljs-keyword">public</span> PersonBuilder <span class="hljs-title function_">setFirstName</span><span class="hljs-params">(String firstName)</span> {
        <span class="hljs-built_in">this</span>.firstName = firstName;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
    }
    
    <span class="hljs-keyword">public</span> PersonBuilder <span class="hljs-title function_">setLastName</span><span class="hljs-params">(String lastName)</span> {
        <span class="hljs-built_in">this</span>.lastName = lastName;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
    }
    
    <span class="hljs-keyword">public</span> PersonBuilder <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
    }
    
    <span class="hljs-keyword">public</span> PersonBuilder <span class="hljs-title function_">setAddress</span><span class="hljs-params">(String address)</span> {
        <span class="hljs-built_in">this</span>.address = address;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
    }
    
    <span class="hljs-keyword">public</span> Person <span class="hljs-title function_">build</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(firstName, lastName, age, address);
    }
    
    <span class="hljs-comment">// é™æ€å·¥å‚æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PersonBuilder <span class="hljs-title function_">builder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PersonBuilder</span>();
    }
    
    <span class="hljs-comment">// Personç±»</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
        <span class="hljs-keyword">private</span> String firstName;
        <span class="hljs-keyword">private</span> String lastName;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;
        <span class="hljs-keyword">private</span> String address;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String firstName, String lastName, <span class="hljs-type">int</span> age, String address)</span> {
            <span class="hljs-built_in">this</span>.firstName = firstName;
            <span class="hljs-built_in">this</span>.lastName = lastName;
            <span class="hljs-built_in">this</span>.age = age;
            <span class="hljs-built_in">this</span>.address = address;
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"Person{firstName='%s', lastName='%s', age=%d, address='%s'}"</span>,
                               firstName, lastName, age, address);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// ä¼ ç»Ÿçš„å¤šè¡Œè®¾ç½®</span>
        <span class="hljs-type">PersonBuilder</span> <span class="hljs-variable">builder1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PersonBuilder</span>();
        builder1.setFirstName(<span class="hljs-string">"å¼ "</span>);
        builder1.setLastName(<span class="hljs-string">"ä¸‰"</span>);
        builder1.setAge(<span class="hljs-number">25</span>);
        builder1.setAddress(<span class="hljs-string">"åŒ—äº¬"</span>);
        <span class="hljs-type">Person</span> <span class="hljs-variable">person1</span> <span class="hljs-operator">=</span> builder1.build();
        
        <span class="hljs-comment">// é“¾å¼è°ƒç”¨ï¼ˆæ›´ä¼˜é›…ï¼‰</span>
        <span class="hljs-type">Person</span> <span class="hljs-variable">person2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PersonBuilder</span>()
            .setFirstName(<span class="hljs-string">"æ"</span>)
            .setLastName(<span class="hljs-string">"å››"</span>)
            .setAge(<span class="hljs-number">30</span>)
            .setAddress(<span class="hljs-string">"ä¸Šæµ·"</span>)
            .build();
            
        <span class="hljs-comment">// ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•</span>
        <span class="hljs-type">Person</span> <span class="hljs-variable">person3</span> <span class="hljs-operator">=</span> PersonBuilder.builder()
            .setFirstName(<span class="hljs-string">"ç‹"</span>)
            .setLastName(<span class="hljs-string">"äº”"</span>)
            .setAge(<span class="hljs-number">28</span>)
            .setAddress(<span class="hljs-string">"å¹¿å·"</span>)
            .build();
            
        System.out.println(person1);
        System.out.println(person2);
        System.out.println(person3);
    }
}
</code></pre>
<h2 data-id="heading-10">âš ï¸ <code>this</code> ä½¿ç”¨æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-11"><strong>1. é™æ€ä¸Šä¸‹æ–‡ä¸­ä¸èƒ½ä½¿ç”¨ this</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticContext</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">instanceVar</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">staticVar</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">instanceMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-built_in">this</span>.instanceVar);  <span class="hljs-comment">// âœ… æ­£ç¡®</span>
        System.out.println(<span class="hljs-built_in">this</span>.staticVar);    <span class="hljs-comment">// âš ï¸ å¯ä»¥ä½†ä¸æ¨èï¼ˆåº”è¯¥ç”¨ç±»åï¼‰</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">staticMethod</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// System.out.println(this.instanceVar);  // âŒ é”™è¯¯ï¼šé™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨this</span>
        <span class="hljs-comment">// System.out.println(this.staticVar);    // âŒ é”™è¯¯ï¼šé™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨this</span>
        
        System.out.println(staticVar);  <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šç›´æ¥è®¿é—®é™æ€å˜é‡</span>
        System.out.println(StaticContext.staticVar);  <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ç±»åè®¿é—®</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// é™æ€æ–¹æ³•ä¸­åˆ›å»ºå¯¹è±¡åå¯ä»¥ä½¿ç”¨</span>
        <span class="hljs-type">StaticContext</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StaticContext</span>();
        obj.instanceMethod();  <span class="hljs-comment">// å¯ä»¥è°ƒç”¨å®ä¾‹æ–¹æ³•</span>
    }
}
</code></pre>
<h3 data-id="heading-12"><strong>2. this ä¸èƒ½ç”¨åœ¨é™æ€ä»£ç å—ä¸­</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticBlock</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> value;
    
    <span class="hljs-comment">// é™æ€ä»£ç å—</span>
    <span class="hljs-keyword">static</span> {
        <span class="hljs-comment">// this.value = 10;  // âŒ é”™è¯¯ï¼šé™æ€ä»£ç å—ä¸­ä¸èƒ½ä½¿ç”¨this</span>
        System.out.println(<span class="hljs-string">"é™æ€ä»£ç å—æ‰§è¡Œ"</span>);
    }
    
    <span class="hljs-comment">// å®ä¾‹ä»£ç å—</span>
    {
        <span class="hljs-built_in">this</span>.value = <span class="hljs-number">20</span>;  <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå®ä¾‹ä»£ç å—ä¸­å¯ä»¥ä½¿ç”¨this</span>
        System.out.println(<span class="hljs-string">"å®ä¾‹ä»£ç å—æ‰§è¡Œï¼Œvalue="</span> + <span class="hljs-built_in">this</span>.value);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">StaticBlock</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.value = <span class="hljs-number">30</span>;  <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šæ„é€ å™¨ä¸­å¯ä»¥ä½¿ç”¨this</span>
        System.out.println(<span class="hljs-string">"æ„é€ å™¨æ‰§è¡Œï¼Œvalue="</span> + <span class="hljs-built_in">this</span>.value);
    }
}
</code></pre>
<h3 data-id="heading-13"><strong>3. this ä¸èƒ½æŒ‡å‘ null</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThisNull</span> {
    <span class="hljs-keyword">private</span> String name;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printName</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// this æ°¸è¿œä¸ä¸º nullï¼ˆå¦‚æœä¸ºnullï¼Œè¯´æ˜å¯¹è±¡ä¸å­˜åœ¨ï¼Œæ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ï¼‰</span>
        System.out.println(<span class="hljs-string">"Name: "</span> + <span class="hljs-built_in">this</span>.name);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ThisNull</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThisNull</span>();
        obj.printName();  <span class="hljs-comment">// æ­£å¸¸æ‰§è¡Œ</span>
        
        <span class="hljs-comment">// ä¸‹é¢çš„ä»£ç ä¼šæŠ›å‡º NullPointerException</span>
        <span class="hljs-type">ThisNull</span> <span class="hljs-variable">nullObj</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// nullObj.printName();  // âŒ è¿è¡Œæ—¶å¼‚å¸¸ï¼šNullPointerException</span>
    }
}
</code></pre>
<h2 data-id="heading-14">ğŸ”„ <code>this</code> åœ¨å†…éƒ¨ç±»ä¸­çš„ä½¿ç”¨</h2>
<h3 data-id="heading-15"><strong>æ™®é€šå†…éƒ¨ç±»</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OuterClass</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">outerField</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å¤–éƒ¨ç±»å­—æ®µ"</span>;
    
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClass</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">innerField</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å†…éƒ¨ç±»å­—æ®µ"</span>;
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// è®¿é—®å†…éƒ¨ç±»çš„å­—æ®µ</span>
            System.out.println(<span class="hljs-string">"å†…éƒ¨ç±»å­—æ®µ: "</span> + <span class="hljs-built_in">this</span>.innerField);
            
            <span class="hljs-comment">// è®¿é—®å¤–éƒ¨ç±»çš„å­—æ®µï¼šä½¿ç”¨ OuterClass.this</span>
            System.out.println(<span class="hljs-string">"å¤–éƒ¨ç±»å­—æ®µ: "</span> + OuterClass.<span class="hljs-built_in">this</span>.outerField);
            
            <span class="hljs-comment">// å¦‚æœå­—æ®µåä¸å†²çªï¼Œä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®</span>
            System.out.println(<span class="hljs-string">"ç›´æ¥è®¿é—®å¤–éƒ¨ç±»å­—æ®µ: "</span> + outerField);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> {
        <span class="hljs-type">InnerClass</span> <span class="hljs-variable">inner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InnerClass</span>();
        inner.show();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">OuterClass</span> <span class="hljs-variable">outer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OuterClass</span>();
        outer.test();
    }
}
</code></pre>
<h3 data-id="heading-16"><strong>åŒ¿åå†…éƒ¨ç±»</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnonymousInnerClass</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å¤–éƒ¨å­—æ®µ"</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">localVar</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å±€éƒ¨å˜é‡"</span>;
        
        <span class="hljs-comment">// åŒ¿åå†…éƒ¨ç±»</span>
        <span class="hljs-type">Runnable</span> <span class="hljs-variable">runnable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
            <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">innerField</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å†…éƒ¨å­—æ®µ"</span>;
            
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                <span class="hljs-comment">// è®¿é—®åŒ¿åå†…éƒ¨ç±»çš„å­—æ®µ</span>
                System.out.println(<span class="hljs-string">"å†…éƒ¨å­—æ®µ: "</span> + <span class="hljs-built_in">this</span>.innerField);
                
                <span class="hljs-comment">// è®¿é—®å¤–éƒ¨ç±»çš„å­—æ®µï¼šä½¿ç”¨ OuterClass.this</span>
                System.out.println(<span class="hljs-string">"å¤–éƒ¨å­—æ®µ: "</span> + AnonymousInnerClass.<span class="hljs-built_in">this</span>.field);
                
                <span class="hljs-comment">// è®¿é—®å±€éƒ¨å˜é‡ï¼ˆå¿…é¡»æ˜¯finalæˆ–ç­‰æ•ˆfinalï¼‰</span>
                System.out.println(<span class="hljs-string">"å±€éƒ¨å˜é‡: "</span> + localVar);
                
                <span class="hljs-comment">// ä¸èƒ½è¿™æ ·è®¿é—®å¤–éƒ¨ç±»çš„å­—æ®µï¼ˆthisæŒ‡å‘åŒ¿åå†…éƒ¨ç±»å®ä¾‹ï¼‰</span>
                <span class="hljs-comment">// System.out.println("é”™è¯¯è®¿é—®: " + this.field);</span>
            }
        };
        
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(runnable).start();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnonymousInnerClass</span>().test();
    }
}
</code></pre>
<h2 data-id="heading-17">ğŸ­ <code>this</code> åœ¨ç»§æ‰¿ä¸­çš„ä½¿ç”¨</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span> {
    <span class="hljs-keyword">protected</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"çˆ¶ç±»åç§°"</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"Parent show: "</span> + <span class="hljs-built_in">this</span>.name);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parentMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"çˆ¶ç±»æ–¹æ³•"</span>);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Parent</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å­ç±»åç§°"</span>;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è®¿é—®å­ç±»çš„name</span>
        System.out.println(<span class="hljs-string">"å­ç±»å­—æ®µ: "</span> + <span class="hljs-built_in">this</span>.name);
        
        <span class="hljs-comment">// è®¿é—®çˆ¶ç±»çš„name</span>
        System.out.println(<span class="hljs-string">"çˆ¶ç±»å­—æ®µ: "</span> + <span class="hljs-built_in">super</span>.name);
        
        <span class="hljs-comment">// thisè°ƒç”¨çš„æ˜¯é‡å†™åçš„æ–¹æ³•ï¼ˆå¤šæ€ï¼‰</span>
        <span class="hljs-built_in">this</span>.parentMethod();  <span class="hljs-comment">// è°ƒç”¨å­ç±»é‡å†™çš„æ–¹æ³•</span>
        
        <span class="hljs-comment">// superè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•</span>
        <span class="hljs-built_in">super</span>.parentMethod();  <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»åŸå§‹çš„æ–¹æ³•</span>
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parentMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"å­ç±»é‡å†™çš„æ–¹æ³•"</span>);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InheritanceThis</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Child</span> <span class="hljs-variable">child</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>();
        child.show();
        
        System.out.println(<span class="hljs-string">"\n=== å¤šæ€æµ‹è¯• ==="</span>);
        <span class="hljs-type">Parent</span> <span class="hljs-variable">parent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>();
        parent.show();  <span class="hljs-comment">// è°ƒç”¨å­ç±»çš„showæ–¹æ³•</span>
    }
}
</code></pre>
<h2 data-id="heading-18">ğŸ’¡ <code>this</code> çš„é«˜çº§ç”¨æ³•</h2>
<h3 data-id="heading-19"><strong>1. åœ¨æšä¸¾ä¸­ä½¿ç”¨ this</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Operation</span> {
    ADD(<span class="hljs-string">"+"</span>) {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">apply</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> {
            <span class="hljs-keyword">return</span> x + y;
        }
    },
    SUBTRACT(<span class="hljs-string">"-"</span>) {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">apply</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> {
            <span class="hljs-keyword">return</span> x - y;
        }
    };
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String symbol;
    
    Operation(String symbol) {
        <span class="hljs-built_in">this</span>.symbol = symbol;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">apply</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span>;
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getSymbol</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.symbol;
    }
    
    <span class="hljs-comment">// ä½¿ç”¨thisæ¯”è¾ƒæšä¸¾å€¼</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isAdd</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span> == ADD;  <span class="hljs-comment">// ä½¿ç”¨thisæ¯”è¾ƒ</span>
    }
}
</code></pre>
<h3 data-id="heading-20"><strong>2. åœ¨æ¥å£é»˜è®¤æ–¹æ³•ä¸­ä½¿ç”¨ this</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Calculator</span> {
    <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>;
    
    <span class="hljs-comment">// é»˜è®¤æ–¹æ³•ä¸­å¯ä»¥ä½¿ç”¨thisï¼ˆæŒ‡å‘å®ç°ç±»çš„å®ä¾‹ï¼‰</span>
    <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showInfo</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"Calculatorå®ç°ç±»: "</span> + <span class="hljs-built_in">this</span>.getClass().getSimpleName());
    }
    
    <span class="hljs-comment">// é™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨this</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">staticMethod</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// System.out.println(this);  // âŒ é”™è¯¯</span>
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleCalculator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Calculator</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-keyword">return</span> a + b;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è°ƒç”¨æ¥å£çš„é»˜è®¤æ–¹æ³•</span>
        <span class="hljs-built_in">this</span>.showInfo();  <span class="hljs-comment">// thisæŒ‡å‘SimpleCalculatorå®ä¾‹</span>
    }
}
</code></pre>
<h3 data-id="heading-21"><strong>3. åœ¨Lambdaè¡¨è¾¾å¼ä¸­ä½¿ç”¨ this</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LambdaThis</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> <span class="hljs-string">"ç±»å­—æ®µ"</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLambda</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">localVar</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å±€éƒ¨å˜é‡"</span>;
        
        <span class="hljs-comment">// Lambdaè¡¨è¾¾å¼ä¸­çš„thisæŒ‡å‘å¤–éƒ¨ç±»çš„å®ä¾‹</span>
        <span class="hljs-type">Runnable</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> () -&gt; {
            System.out.println(<span class="hljs-string">"Lambdaä¸­çš„this: "</span> + <span class="hljs-built_in">this</span>);
            System.out.println(<span class="hljs-string">"è®¿é—®å­—æ®µ: "</span> + <span class="hljs-built_in">this</span>.field);
            System.out.println(<span class="hljs-string">"è®¿é—®å­—æ®µ(ç›´æ¥): "</span> + field);
            System.out.println(<span class="hljs-string">"è®¿é—®å±€éƒ¨å˜é‡: "</span> + localVar);
        };
        
        <span class="hljs-comment">// åŒ¿åå†…éƒ¨ç±»ä¸­çš„thisæŒ‡å‘å†…éƒ¨ç±»å®ä¾‹</span>
        <span class="hljs-type">Runnable</span> <span class="hljs-variable">r2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"åŒ¿åç±»ä¸­çš„this: "</span> + <span class="hljs-built_in">this</span>);
                System.out.println(<span class="hljs-string">"è®¿é—®å¤–éƒ¨å­—æ®µ: "</span> + LambdaThis.<span class="hljs-built_in">this</span>.field);
            }
        };
        
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(r).start();
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(r2).start();
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"LambdaThiså®ä¾‹"</span>;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaThis</span>().testLambda();
    }
}
</code></pre>
<h2 data-id="heading-22">ğŸ¯ <code>this</code> çš„å¸¸è§é¢è¯•é¢˜</h2>
<h3 data-id="heading-23"><strong>é¢˜ç›®1ï¼šä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test1</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;
        System.out.println(<span class="hljs-string">"å±€éƒ¨value: "</span> + value);
        System.out.println(<span class="hljs-string">"æˆå‘˜value: "</span> + <span class="hljs-built_in">this</span>.value);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Test1</span>().print();
    }
}
</code></pre>
<p><strong>ç­”æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">å±€éƒ¨value: 20</span>
<span class="hljs-section">æˆå‘˜value: 10</span>
</code></pre>
<h3 data-id="heading-24"><strong>é¢˜ç›®2ï¼šthis() è°ƒç”¨æœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test2</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> x;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Test2</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"åšä¸€äº›åˆå§‹åŒ–"</span>);
        <span class="hljs-built_in">this</span>(<span class="hljs-number">10</span>);  <span class="hljs-comment">// è¿™ä¼šæ€æ ·ï¼Ÿ</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Test2</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> {
        <span class="hljs-built_in">this</span>.x = x;
    }
}
</code></pre>
<p><strong>ç­”æ¡ˆ</strong>ï¼šç¼–è¯‘é”™è¯¯ã€‚<code>this()</code> å¿…é¡»æ˜¯æ„é€ å™¨ä¸­çš„ç¬¬ä¸€æ¡è¯­å¥ã€‚</p>
<h3 data-id="heading-25"><strong>é¢˜ç›®3ï¼šä»¥ä¸‹ä»£ç æ˜¯å¦æ­£ç¡®ï¼Ÿ</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test3</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">staticMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-built_in">this</span>);
    }
}
</code></pre>
<p><strong>ç­”æ¡ˆ</strong>ï¼šé”™è¯¯ã€‚é™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨ <code>this</code>ã€‚</p>
<h2 data-id="heading-26">ğŸ“Š <code>this</code> ä¸ <code>super</code> å¯¹æ¯”</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th><code>this</code></th><th><code>super</code></th></tr></thead><tbody><tr><td><strong>æŒ‡å‘å¯¹è±¡</strong></td><td>å½“å‰å¯¹è±¡å®ä¾‹</td><td>çˆ¶ç±»å¯¹è±¡å®ä¾‹</td></tr><tr><td><strong>è®¿é—®å˜é‡</strong></td><td>å½“å‰ç±»çš„æˆå‘˜å˜é‡</td><td>çˆ¶ç±»çš„æˆå‘˜å˜é‡</td></tr><tr><td><strong>è°ƒç”¨æ–¹æ³•</strong></td><td>å½“å‰ç±»çš„æ–¹æ³•ï¼ˆå¯èƒ½è¢«å­ç±»é‡å†™ï¼‰</td><td>çˆ¶ç±»çš„æ–¹æ³•ï¼ˆä¸ä¼šè¢«é‡å†™å½±å“ï¼‰</td></tr><tr><td><strong>è°ƒç”¨æ„é€ å™¨</strong></td><td><code>this()</code> è°ƒç”¨æœ¬ç±»å…¶ä»–æ„é€ å™¨</td><td><code>super()</code> è°ƒç”¨çˆ¶ç±»æ„é€ å™¨</td></tr><tr><td><strong>ä½¿ç”¨é™åˆ¶</strong></td><td>å¯ä»¥åœ¨å®ä¾‹æ–¹æ³•ã€æ„é€ å™¨ä¸­ä½¿ç”¨</td><td>å¯ä»¥åœ¨å­ç±»çš„å®ä¾‹æ–¹æ³•ã€æ„é€ å™¨ä¸­ä½¿ç”¨</td></tr><tr><td><strong>é™æ€ä¸Šä¸‹æ–‡</strong></td><td>ä¸èƒ½åœ¨é™æ€æ–¹æ³•ã€é™æ€å—ä¸­ä½¿ç”¨</td><td>ä¸èƒ½åœ¨é™æ€æ–¹æ³•ã€é™æ€å—ä¸­ä½¿ç”¨</td></tr></tbody></table>
<h2 data-id="heading-27">ğŸ“ æœ€ä½³å®è·µæ€»ç»“</h2>
<h3 data-id="heading-28"><strong>1. æ˜ç¡®ä½¿ç”¨ this çš„åœºæ™¯</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BestPractice</span> {
    <span class="hljs-keyword">private</span> String name;
    
    <span class="hljs-comment">// åœºæ™¯1ï¼šåŒºåˆ†æˆå‘˜å˜é‡å’Œå‚æ•°ï¼ˆå¿…é¡»ä½¿ç”¨ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;  <span class="hljs-comment">// âœ… å¿…é¡»ä½¿ç”¨this</span>
    }
    
    <span class="hljs-comment">// åœºæ™¯2ï¼šæ„é€ å™¨é“¾ï¼ˆå¿…é¡»ä½¿ç”¨ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BestPractice</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>(<span class="hljs-string">"é»˜è®¤åç§°"</span>);  <span class="hljs-comment">// âœ… å¿…é¡»ä½¿ç”¨this()</span>
    }
    
    <span class="hljs-comment">// åœºæ™¯3ï¼šé“¾å¼è°ƒç”¨ï¼ˆè¿”å›thisï¼‰</span>
    <span class="hljs-keyword">public</span> BestPractice <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-comment">// ... è®¾ç½®å¹´é¾„é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;  <span class="hljs-comment">// âœ… æ”¯æŒé“¾å¼è°ƒç”¨</span>
    }
    
    <span class="hljs-comment">// åœºæ™¯4ï¼šæ²¡æœ‰æ­§ä¹‰æ—¶å¯ä»¥çœç•¥</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printName</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è¿™é‡Œæ²¡æœ‰å±€éƒ¨å˜é‡nameï¼Œå¯ä»¥ç›´æ¥è®¿é—®</span>
        System.out.println(name);  <span class="hljs-comment">// âœ… å¯ä»¥çœç•¥this</span>
        
        <span class="hljs-comment">// ä½¿ç”¨thisä¹Ÿå¯ä»¥ï¼Œæ›´æ˜ç¡®</span>
        System.out.println(<span class="hljs-built_in">this</span>.name);  <span class="hljs-comment">// âœ… æ›´æ¸…æ™°</span>
    }
}
</code></pre>
<h3 data-id="heading-29"><strong>2. é¿å…æ»¥ç”¨ this</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AvoidAbuse</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> value;
    
    <span class="hljs-comment">// âŒ ä¸å¿…è¦çš„thisï¼ˆæ²¡æœ‰æ­§ä¹‰ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setValue</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> {
        <span class="hljs-built_in">this</span>.value = val;  <span class="hljs-comment">// å¯ä»¥ï¼Œä½†æ²¡æœ‰å¿…è¦ï¼ˆå‚æ•°åä¸åŒï¼‰</span>
    }
    
    <span class="hljs-comment">// âœ… æ›´å¥½çš„å†™æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setValue</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> {
        <span class="hljs-built_in">this</span>.value = value;  <span class="hljs-comment">// å¿…é¡»ä½¿ç”¨this</span>
    }
    
    <span class="hljs-comment">// âœ… æœ€ä½³ï¼šä½¿ç”¨ä¸åŒçš„å‚æ•°å</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setValue</span><span class="hljs-params">(<span class="hljs-type">int</span> newValue)</span> {
        value = newValue;  <span class="hljs-comment">// ä¸éœ€è¦thisï¼Œæ›´ç®€æ´</span>
    }
}
</code></pre>
<h3 data-id="heading-30"><strong>3. æ„é€ å™¨ä¸­çš„æœ€ä½³å®è·µ</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConstructorBestPractice</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String id;     <span class="hljs-comment">// finalå­—æ®µå¿…é¡»åœ¨æ„é€ å™¨ä¸­åˆå§‹åŒ–</span>
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;
    
    <span class="hljs-comment">// ä¸»è¦æ„é€ å™¨ï¼ˆåˆå§‹åŒ–æ‰€æœ‰å­—æ®µï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConstructorBestPractice</span><span class="hljs-params">(String id, String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-comment">// å‚æ•°éªŒè¯</span>
        <span class="hljs-keyword">if</span> (id == <span class="hljs-literal">null</span> || id.isEmpty()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"IDä¸èƒ½ä¸ºç©º"</span>);
        }
        
        <span class="hljs-comment">// åˆå§‹åŒ–finalå­—æ®µ</span>
        <span class="hljs-built_in">this</span>.id = id;
        
        <span class="hljs-comment">// ä½¿ç”¨thisåˆå§‹åŒ–å…¶ä»–å­—æ®µ</span>
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }
    
    <span class="hljs-comment">// è¾…åŠ©æ„é€ å™¨ï¼ˆæä¾›é»˜è®¤å€¼ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConstructorBestPractice</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-built_in">this</span>(id, <span class="hljs-string">"æœªçŸ¥"</span>, <span class="hljs-number">0</span>);  <span class="hljs-comment">// è°ƒç”¨ä¸»è¦æ„é€ å™¨</span>
    }
    
    <span class="hljs-comment">// è¾…åŠ©æ„é€ å™¨ï¼ˆä½¿ç”¨this()é“¾ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConstructorBestPractice</span><span class="hljs-params">(String id, String name)</span> {
        <span class="hljs-built_in">this</span>(id, name, <span class="hljs-number">0</span>);  <span class="hljs-comment">// è°ƒç”¨ä¸»è¦æ„é€ å™¨</span>
    }
}
</code></pre>
<p>è®°ä½ï¼š<strong><code>this</code> æ˜¯æŒ‡å‘å½“å‰å¯¹è±¡çš„å¼•ç”¨</strong>ï¼Œæ­£ç¡®ä½¿ç”¨ <code>this</code> å¯ä»¥è®©ä»£ç æ›´æ¸…æ™°ã€æ›´å¥å£®ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å˜é‡åå†²çªã€æ„é€ å™¨é“¾å’Œé“¾å¼è°ƒç”¨æ—¶éå¸¸é‡è¦ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ§­ ç”¨ Trae Solo åšæŠ€æœ¯æ ˆåˆ†æ + ä¸€é”®éƒ¨ç½²ï¼šä¸€ä¸ª 8 å¹´ Java å·¥ç¨‹å¸ˆçš„å®æˆ˜åˆ†äº«]]></title>    <link>https://juejin.cn/post/7578797337867337762</link>    <guid>https://juejin.cn/post/7578797337867337762</guid>    <pubDate>2025-12-02T02:26:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578797337867337762" data-draft-id="7578777952726597666" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ§­ ç”¨ Trae Solo åšæŠ€æœ¯æ ˆåˆ†æ + ä¸€é”®éƒ¨ç½²ï¼šä¸€ä¸ª 8 å¹´ Java å·¥ç¨‹å¸ˆçš„å®æˆ˜åˆ†äº«"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-12-02T02:26:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3109843365802925"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ§­ ç”¨ Trae Solo åšæŠ€æœ¯æ ˆåˆ†æ + ä¸€é”®éƒ¨ç½²ï¼šä¸€ä¸ª 8 å¹´ Java å·¥ç¨‹å¸ˆçš„å®æˆ˜åˆ†äº«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3109843365802925/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:26:47.000Z" title="Tue Dec 02 2025 02:26:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§­ ç”¨ Trae Solo åšæŠ€æœ¯æ ˆåˆ†æ + ä¸€é”®éƒ¨ç½²ï¼šä¸€ä¸ª 8 å¹´ Java å·¥ç¨‹å¸ˆçš„å®æˆ˜åˆ†äº«</h2>
<p>ä½œä¸ºä¸€åä» Java EE ä¸€è·¯èµ°åˆ° Spring Bootã€Spring Cloud çš„è€å…µï¼Œæˆ‘æ·±çŸ¥å¾®æœåŠ¡æ¶æ„å¸¦æ¥çš„çµæ´»ä¸æŒ‘æˆ˜ã€‚è€Œå½“é¢å¯¹ä¸€ä¸ªæ¨¡å—ç¹å¤šã€æŠ€æœ¯æ ˆå¤æ‚çš„é¡¹ç›®ï¼Œæˆ‘å‘ç° <strong>Trae Solo ä¸ä»…èƒ½åˆ†ææˆ‘çš„é¡¹ç›®æŠ€æœ¯æ ˆï¼Œè¿˜èƒ½ç”ŸæˆæœåŠ¡å®šä¹‰ã€Dockerfileã€docker-compose å’Œå¯åŠ¨è„šæœ¬ï¼Œå¤§å¤§ç®€åŒ–äº†éƒ¨ç½²æµç¨‹ã€‚</strong></p>
<p>ä»Šå¤©ï¼Œæˆ‘å°±ä»ä¸€ä¸ªå®æˆ˜é¡¹ç›®å‡ºå‘ï¼Œè®²è®²æˆ‘æ˜¯å¦‚ä½•ç”¨ <strong>Trae Solo</strong> åˆ†ææŠ€æœ¯æ¶æ„ï¼Œå¹¶å®ç°ä¸€é”®éƒ¨ç½²çš„ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸ‘¨â€ğŸ’» é¡¹ç›®èƒŒæ™¯ï¼šä¸€ä¸ªå…¸å‹çš„ Java å¾®æœåŠ¡é¡¹ç›®</h3>
<p>æˆ‘çš„é¡¹ç›®é‡‡ç”¨äº†ä¸»æµçš„ Spring Cloud æŠ€æœ¯æ ˆï¼Œæ€»ä½“ç»“æ„å¦‚ä¸‹ï¼š</p>













































<table><thead><tr><th>æœåŠ¡åç§°</th><th>æŠ€æœ¯æ¡†æ¶</th><th>æè¿°</th></tr></thead><tbody><tr><td>gateway-service</td><td>Spring Cloud Gateway</td><td>API ç½‘å…³</td></tr><tr><td>auth-service</td><td>Spring Security OAuth2</td><td>é‰´æƒæœåŠ¡</td></tr><tr><td>user-service</td><td>Spring Boot + MyBatis</td><td>ç”¨æˆ·æœåŠ¡</td></tr><tr><td>order-service</td><td>Spring Boot + OpenFeign</td><td>è®¢å•æœåŠ¡</td></tr><tr><td>mysql</td><td>MySQL 8</td><td>æ•°æ®åº“</td></tr><tr><td>redis</td><td>Redis 6</td><td>ç¼“å­˜</td></tr><tr><td>nacos</td><td>Nacos</td><td>æ³¨å†Œä¸­å¿ƒ + é…ç½®ä¸­å¿ƒ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-2">ğŸ§  ç¬¬ä¸€æ­¥ï¼šç”¨ Trae Solo åˆ†ææŠ€æœ¯æ ˆ</h3>
<h4 data-id="heading-3">ğŸ§° å·¥å…·ï¼šTrae Solo</h4>
<p>Trae Solo æ˜¯ä¸€ä¸ª AI é©±åŠ¨çš„ DevOps åŠ©æ‰‹ï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>è‡ªåŠ¨è§£æé¡¹ç›®ç»“æ„</li>
<li>è¯†åˆ«æ¯ä¸ªæœåŠ¡çš„è¯­è¨€ã€æ¡†æ¶ã€ä¾èµ–</li>
<li>è‡ªåŠ¨ç”Ÿæˆ Dockerfileã€docker-composeã€éƒ¨ç½²è„šæœ¬</li>
</ul>
<h4 data-id="heading-4">ğŸ“¦ åˆ†æè¿‡ç¨‹</h4>
<p>æˆ‘å°†é¡¹ç›®æºç ä¸Šä¼ åˆ° Trae Solo çš„åˆ†æå¹³å°ï¼Œå®ƒä»ä»¥ä¸‹å‡ ä¸ªç»´åº¦å®Œæˆåˆ†æï¼š</p>
<ul>
<li><strong>è¯­è¨€è¯†åˆ«</strong>ï¼šJava / YAML / SQL / Dockerfile / Shell</li>
<li><strong>æœåŠ¡æ‹†åˆ†</strong>ï¼šæ ¹æ® Maven å¤šæ¨¡å—è¯†åˆ«å‡ºç‹¬ç«‹æœåŠ¡</li>
<li><strong>ä¾èµ–åˆ†æ</strong>ï¼šå¦‚ Nacosã€MySQLã€Redisã€OpenFeignã€Spring Security ç­‰</li>
<li><strong>å¯åŠ¨æ–¹å¼è¯†åˆ«</strong>ï¼šåˆ¤æ–­å…¥å£ç±»ã€ç«¯å£ã€ä¾èµ–æœåŠ¡</li>
</ul>
<h4 data-id="heading-5">ğŸ§¾ è‡ªåŠ¨ç”Ÿæˆçš„å†…å®¹åŒ…æ‹¬ï¼š</h4>
<ul>
<li>æ¯ä¸ªæœåŠ¡çš„ <code>Dockerfile</code></li>
<li>æ‰€æœ‰æœåŠ¡çš„ <code>docker-compose.yml</code></li>
<li>ä¸€é”®éƒ¨ç½²è„šæœ¬ <code>deploy.sh</code></li>
<li><code>.env</code> é…ç½®æ–‡ä»¶æ¨¡æ¿</li>
</ul>
<hr/>
<h3 data-id="heading-6">ğŸ³ ç¬¬äºŒæ­¥ï¼šä½¿ç”¨ Trae Solo ç”Ÿæˆçš„ Docker Compose</h3>
<h4 data-id="heading-7">ğŸ“„ è‡ªåŠ¨ç”Ÿæˆçš„ docker-compose.ymlï¼ˆç®€åŒ–ç‰ˆï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">nacos:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nacos/nacos-server:2.3.0</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8848:8848"</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MODE:</span> <span class="hljs-string">standalone</span>

  <span class="hljs-attr">mysql:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3306:3306"</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">root1234</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./data/mysql:/var/lib/mysql</span>

  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:6</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"6379:6379"</span>

  <span class="hljs-attr">gateway-service:</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">./gateway-service</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8080:8080"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">nacos</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">auth-service</span>

  <span class="hljs-attr">auth-service:</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">./auth-service</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9000:9000"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span>

  <span class="hljs-attr">user-service:</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">./user-service</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9001:9001"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span>

  <span class="hljs-attr">order-service:</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">./order-service</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9002:9002"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">user-service</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span>
</code></pre>
<blockquote>
<p>âœ… Trae Solo ä¸ä»…å¸®æˆ‘è¯†åˆ«äº†ç«¯å£ï¼Œè¿˜è‡ªåŠ¨è®¾ç½®äº† <code>depends_on</code> æ¥å¤„ç†æœåŠ¡é—´çš„ä¾èµ–é¡ºåºã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">ğŸ”§ ç¬¬ä¸‰æ­¥ï¼šTrae Solo è‡ªåŠ¨ç”Ÿæˆçš„ Dockerfile ç¤ºä¾‹</h3>
<p>ä»¥ <code>user-service</code> ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">FROM</span> openjdk:<span class="hljs-number">17</span><span class="hljs-operator">-</span>jdk<span class="hljs-operator">-</span>alpine
WORKDIR <span class="hljs-operator">/</span>app
<span class="hljs-keyword">COPY</span> target<span class="hljs-operator">/</span><span class="hljs-keyword">user</span><span class="hljs-operator">-</span>service.jar app.jar
EXPOSE <span class="hljs-number">9001</span>
ENTRYPOINT ["java", "-jar", "app.jar"]
</code></pre>
<p>å…¶ä»–æœåŠ¡çš„ Dockerfile ä¹Ÿç±»ä¼¼ï¼ŒTrae Solo ä¼šè‡ªåŠ¨è¯†åˆ«ç¼–è¯‘äº§ç‰©è·¯å¾„å¹¶æ‹·è´ã€‚</p>
<hr/>
<h3 data-id="heading-9">ğŸš€ ç¬¬å››æ­¥ï¼šä¸€é”®éƒ¨ç½²è„šæœ¬ deploy.sh</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"â³ åœæ­¢æ—§å®¹å™¨..."</span>
docker-compose down

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ”„ æ„å»ºé•œåƒ..."</span>
docker-compose build

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸš€ å¯åŠ¨æœåŠ¡..."</span>
docker-compose up -d

<span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… æ‰€æœ‰æœåŠ¡å·²å¯åŠ¨ï¼"</span>
docker ps
</code></pre>
<p>è¿è¡Œæ–¹å¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x deploy.sh
./deploy.sh
</code></pre>
<p>çŸ­çŸ­å‡ åˆ†é’Ÿï¼Œæ‰€æœ‰æœåŠ¡éƒ½åœ¨æœ¬åœ°å®¹å™¨ä¸­è·‘äº†èµ·æ¥ï¼Œä» Nacos åˆ° Gateway åˆ°ä¸šåŠ¡æœåŠ¡ï¼Œé€šé€š OKã€‚</p>
<hr/>
<h3 data-id="heading-10">ğŸ§ª ç¬¬äº”æ­¥ï¼šéªŒè¯éƒ¨ç½²æ•ˆæœ</h3>
<ul>
<li>é€šè¿‡ <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8848%2F" target="_blank" title="http://localhost:8848/" ref="nofollow noopener noreferrer">http://localhost:8848</a> è®¿é—® Nacos æ§åˆ¶å°</li>
<li>é€šè¿‡ <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2F" target="_blank" title="http://localhost:8080/" ref="nofollow noopener noreferrer">http://localhost:8080</a> è®¿é—®ç½‘å…³æ¥å£</li>
<li>ä½¿ç”¨ Postman æµ‹è¯•ç”¨æˆ·æœåŠ¡ã€è®¢å•æœåŠ¡ API</li>
<li>æŸ¥çœ‹æ•°æ®æ˜¯å¦å†™å…¥ MySQLã€Redis ç¼“å­˜æ˜¯å¦ç”Ÿæ•ˆ</li>
</ul>
<hr/>
<h3 data-id="heading-11">ğŸ§  æ€»ç»“ï¼šä¸ºä»€ä¹ˆæˆ‘é€‰æ‹© Trae Soloï¼Ÿ</h3>
<p>ä½œä¸ºä¸€åèµ„æ·± Java å·¥ç¨‹å¸ˆï¼Œæˆ‘éå¸¸æ¸…æ¥šï¼š</p>
<ul>
<li>é¡¹ç›®æŠ€æœ¯æ ˆå¤æ‚ï¼Œé äººå·¥ç»´æŠ¤é…ç½®éå¸¸å®¹æ˜“å‡ºé”™</li>
<li>å¾®æœåŠ¡éƒ¨ç½²æµç¨‹ç¹çï¼Œé‡å¤åŠ³åŠ¨æµªè´¹æ—¶é—´</li>
<li>å®¹å™¨åŒ–éƒ¨ç½²æ˜¯è¶‹åŠ¿ï¼Œä½†å†™ Dockerfile å’Œ Compose éœ€è¦ç»éªŒ</li>
</ul>
<p><strong>Trae Solo æå¤§åœ°é™ä½äº†ä¸Šæ‰‹é—¨æ§›ï¼Œå®ƒæ˜¯æˆ‘ DevOps æµç¨‹ä¸­ä¸å¯æˆ–ç¼ºçš„è‡ªåŠ¨åŒ–åˆ©å™¨ã€‚</strong></p>
<hr/>
<h3 data-id="heading-12">âœ… å»ºè®®ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>å¿«é€Ÿä¸ºå›¢é˜Ÿæ­å»ºæœ¬åœ°å¼€å‘ç¯å¢ƒ</li>
<li>åˆåˆ›å›¢é˜Ÿå¿«é€Ÿä¸Šçº¿ MVP</li>
<li>å¤æ‚é¡¹ç›®è‡ªåŠ¨ç”Ÿæˆéƒ¨ç½²é…ç½®</li>
<li>æ•™å­¦æˆ–æŠ€æœ¯åˆ†äº«åœºæ™¯è‡ªåŠ¨ç”Ÿæˆæ¼”ç¤ºç¯å¢ƒ</li>
</ul>
<hr/>
<h3 data-id="heading-13">ğŸ“Œ æƒ³å¯¹ Trae Solo è¯´</h3>
<p>Trae Solo ä¸ä»…æ˜¯å·¥å…·ï¼Œæ›´åƒæ˜¯æˆ‘æŠ€æœ¯å›¢é˜Ÿä¸­çš„ä¸€ä½ DevOps å·¥ç¨‹å¸ˆï¼Œå®ƒå¸®æˆ‘èŠ‚çœäº†å¤§é‡çš„é…ç½®æ—¶é—´ï¼Œè®©æˆ‘èƒ½æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å’Œæ¶æ„è®¾è®¡ã€‚</p>
<blockquote>
<p>â€œå®ƒæ‡‚ä»£ç ï¼Œä¹Ÿæ‡‚éƒ¨ç½²ã€‚â€</p>
</blockquote>
<hr/>
<h3 data-id="heading-14">ğŸ§‘â€ğŸ’» ä½œè€…ç®€ä»‹</h3>
<p><strong>æ˜µç§°ï¼šä»£ç é‡Œçš„æ—…è¡Œè€…</strong><br/>
<strong>ç»éªŒï¼š8 å¹´ Javaã€ç°ä¸»æ”»å¾®æœåŠ¡ + DevOps</strong><br/>
<strong>ä¸ªäººå£å·ï¼šå†™æ›´å°‘çš„é…ç½®ï¼Œæ„å»ºæ›´å¼ºçš„ç³»ç»Ÿã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter åŸºç¡€æ§ä»¶é€ŸæŸ¥ï¼ˆé¢å‘ Android å¼€å‘è€…ï¼‰]]></title>    <link>https://juejin.cn/post/7578780780026707977</link>    <guid>https://juejin.cn/post/7578780780026707977</guid>    <pubDate>2025-12-02T02:44:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578780780026707977" data-draft-id="7578803751608795186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter åŸºç¡€æ§ä»¶é€ŸæŸ¥ï¼ˆé¢å‘ Android å¼€å‘è€…ï¼‰"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-12-02T02:44:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="renxhui"/> <meta itemprop="url" content="https://juejin.cn/user/1292681403181944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter åŸºç¡€æ§ä»¶é€ŸæŸ¥ï¼ˆé¢å‘ Android å¼€å‘è€…ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1292681403181944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    renxhui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:44:32.000Z" title="Tue Dec 02 2025 02:44:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Flutter åŸºç¡€æ§ä»¶é€ŸæŸ¥ï¼ˆé¢å‘ Android å¼€å‘è€…ï¼‰</h2>
<blockquote>
<p>ç›®æ ‡ï¼šä½ æ˜¯ Android å¼€å‘ï¼Œå¿«é€Ÿä¸Šæ‰‹ Flutter UI ä¸å¸¸ç”¨æ§ä»¶ã€‚ç¤ºä¾‹å‡å¯ç›´æ¥å¤åˆ¶åˆ° Flutter å·¥ç¨‹ä¸­å°è¯•ã€‚</p>
</blockquote>
<h3 data-id="heading-1">1. å¿«é€Ÿå¯¹ç…§è¡¨ï¼ˆAndroid â†’ Flutterï¼‰</h3>
<ul>
<li>è§†å›¾å®¹å™¨ï¼šView â†’ <code>Container</code> / <code>SizedBox</code></li>
<li>çº¿æ€§å¸ƒå±€ï¼šLinearLayout(horizontal/vertical) â†’ <code>Row</code> / <code>Column</code></li>
<li>çº¦æŸ/å æ”¾ï¼šFrameLayout / RelativeLayout â†’ <code>Stack</code> + <code>Positioned</code>ï¼Œ<code>Align</code></li>
<li>åˆ—è¡¨ï¼šRecyclerView â†’ <code>ListView.builder</code> / <code>GridView.builder</code> / <code>CustomScrollView + Slivers</code></li>
<li>æ–‡æœ¬ï¼šTextView â†’ <code>Text</code></li>
<li>å›¾ç‰‡ï¼šImageView â†’ <code>Image</code></li>
<li>æŒ‰é’®ï¼šButton â†’ <code>ElevatedButton</code> / <code>TextButton</code> / <code>IconButton</code></li>
<li>è¾“å…¥æ¡†ï¼šEditText â†’ <code>TextField</code></li>
<li>é¡¶éƒ¨æ ï¼šToolbar/ActionBar â†’ <code>AppBar</code></li>
<li>é¡µé¢å®¹å™¨ï¼šActivity/Fragment â†’ <code>Scaffold</code> + è·¯ç”±ï¼ˆ<code>go_router</code>ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-2">2. å¸ƒå±€åŸºç¡€</h3>
<h4 data-id="heading-3">2.1 çº¿æ€§å¸ƒå±€ï¼šRow / Column</h4>
<pre><code class="hljs language-dart" lang="dart">Row(
  children: [
    <span class="hljs-keyword">const</span> Icon(Icons.star),
    <span class="hljs-keyword">const</span> SizedBox(width: <span class="hljs-number">8</span>),
    <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Row ç¤ºä¾‹'</span>),
    <span class="hljs-keyword">const</span> Spacer(), <span class="hljs-comment">// å æ»¡å‰©ä½™ç©ºé—´</span>
    ElevatedButton(onPressed: () {}, child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'æŒ‰é’®'</span>)),
  ],
)
</code></pre>
<pre><code class="hljs language-dart" lang="dart">Column(
  crossAxisAlignment: CrossAxisAlignment.start,
  children: [
    <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'æ ‡é¢˜'</span>, style: TextStyle(fontSize: <span class="hljs-number">18</span>, fontWeight: FontWeight.w600)),
    <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
    <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'å‰¯æ ‡é¢˜'</span>),
  ],
)
</code></pre>
<h4 data-id="heading-4">2.2 çº¦æŸä¸å æ”¾ï¼šContainer / SizedBox / Stack</h4>
<pre><code class="hljs language-dart" lang="dart">Container(
  width: <span class="hljs-number">200</span>,
  height: <span class="hljs-number">120</span>,
  padding: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">12</span>),
  decoration: BoxDecoration(
    color: <span class="hljs-keyword">const</span> Color(<span class="hljs-number">0xFFECECEC</span>),
    borderRadius: BorderRadius.circular(<span class="hljs-number">12</span>),
  ),
  child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Container å¸¦åœ†è§’ä¸å†…è¾¹è·'</span>),
)
</code></pre>
<pre><code class="hljs language-dart" lang="dart">Stack(
  children: [
    Image.network(<span class="hljs-string">'https://picsum.photos/400/200'</span>, width: <span class="hljs-built_in">double</span>.infinity, height: <span class="hljs-number">200</span>, fit: BoxFit.cover),
    <span class="hljs-keyword">const</span> Positioned(
      left: <span class="hljs-number">12</span>, bottom: <span class="hljs-number">12</span>,
      child: Text(<span class="hljs-string">'å æ”¾æ–‡æœ¬'</span>, style: TextStyle(color: Colors.white, fontWeight: FontWeight.bold)),
    )
  ],
)
</code></pre>
<h4 data-id="heading-5">2.3 è‡ªé€‚åº”ï¼šExpanded / Flexible / Wrap / Align / Center</h4>
<pre><code class="hljs language-dart" lang="dart">Row(
  children: [
    Expanded(child: Container(color: Colors.blue, height: <span class="hljs-number">40</span>)),
    <span class="hljs-keyword">const</span> SizedBox(width: <span class="hljs-number">8</span>),
    Flexible(child: Container(color: Colors.orange, height: <span class="hljs-number">40</span>)),
  ],
)
</code></pre>
<hr/>
<h3 data-id="heading-6">3. åˆ—è¡¨ä¸æ»šåŠ¨</h3>
<h4 data-id="heading-7">3.1 ListView.builder</h4>
<pre><code class="hljs language-dart" lang="dart">ListView.builder(
  itemCount: <span class="hljs-number">20</span>,
  itemBuilder: (context, i) =&gt; ListTile(
    leading: CircleAvatar(child: Text(<span class="hljs-string">'<span class="hljs-subst">$i</span>'</span>)),
    title: Text(<span class="hljs-string">'Item <span class="hljs-subst">$i</span>'</span>),
  ),
)
</code></pre>
<h4 data-id="heading-8">3.2 GridView.builder</h4>
<pre><code class="hljs language-dart" lang="dart">GridView.builder(
  gridDelegate: <span class="hljs-keyword">const</span> SliverGridDelegateWithFixedCrossAxisCount(
    crossAxisCount: <span class="hljs-number">2</span>, mainAxisSpacing: <span class="hljs-number">8</span>, crossAxisSpacing: <span class="hljs-number">8</span>, childAspectRatio: <span class="hljs-number">0.75</span>),
  itemCount: <span class="hljs-number">10</span>,
  itemBuilder: (context, i) =&gt; Container(color: Colors.grey.shade200),
)
</code></pre>
<h4 data-id="heading-9">3.3 Sliversï¼ˆé«˜çº§å¯é€‰ï¼‰</h4>
<pre><code class="hljs language-dart" lang="dart">CustomScrollView(
  slivers: [
    <span class="hljs-keyword">const</span> SliverAppBar(pinned: <span class="hljs-keyword">true</span>, title: Text(<span class="hljs-string">'Sliver åˆ—è¡¨ç¤ºä¾‹'</span>)),
    SliverList.builder(
      itemCount: <span class="hljs-number">50</span>,
      itemBuilder: (context, i) =&gt; ListTile(title: Text(<span class="hljs-string">'Row <span class="hljs-subst">$i</span>'</span>)),
    ),
  ],
)
</code></pre>
<hr/>
<h3 data-id="heading-10">4. æ–‡æœ¬ã€å›¾ç‰‡ã€å›¾æ ‡</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Hello Flutter'</span>, style: TextStyle(fontSize: <span class="hljs-number">16</span>));
<span class="hljs-keyword">const</span> Icon(Icons.settings, color: Colors.blue);
Image.asset(<span class="hljs-string">'assets/images/common/logo.png'</span>, width: <span class="hljs-number">48</span>, height: <span class="hljs-number">48</span>);
Image.network(<span class="hljs-string">'https://picsum.photos/200'</span>, fit: BoxFit.cover);
</code></pre>
<p>å¯Œæ–‡æœ¬ï¼ˆç±»ä¼¼ Android Spannableï¼‰ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">const</span> RichText(
  text: TextSpan(
    text: <span class="hljs-string">'Flutter '</span>,
    style: TextStyle(color: Colors.black),
    children: [
      TextSpan(text: <span class="hljs-string">'åŠ ç²—'</span>, style: TextStyle(fontWeight: FontWeight.bold)),
      TextSpan(text: <span class="hljs-string">' &amp; '</span>),
      TextSpan(text: <span class="hljs-string">'å˜è‰²'</span>, style: TextStyle(color: Colors.red)),
    ],
  ),
)
</code></pre>
<hr/>
<h3 data-id="heading-11">5. æŒ‰é’®ä¸æ‰‹åŠ¿</h3>
<pre><code class="hljs language-dart" lang="dart">ElevatedButton(onPressed: () {}, child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'ç¡®å®š'</span>));
TextButton(onPressed: () {}, child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'å–æ¶ˆ'</span>));
IconButton(onPressed: () {}, icon: <span class="hljs-keyword">const</span> Icon(Icons.share));
</code></pre>
<p>ç‚¹å‡»æ°´æ³¢ä¸æ‰‹åŠ¿ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">InkWell(
  onTap: () {},
  borderRadius: BorderRadius.circular(<span class="hljs-number">12</span>),
  child: <span class="hljs-keyword">const</span> Padding(
    padding: EdgeInsets.all(<span class="hljs-number">12</span>),
    child: Text(<span class="hljs-string">'InkWell ç‚¹å‡»åŒºåŸŸ'</span>),
  ),
)
</code></pre>
<hr/>
<h3 data-id="heading-12">6. è¾“å…¥ä¸è¡¨å•</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> TextEditingController controller = TextEditingController();

TextField(
  controller: controller,
  decoration: <span class="hljs-keyword">const</span> InputDecoration(
    hintText: <span class="hljs-string">'è¯·è¾“å…¥å†…å®¹'</span>,
    border: OutlineInputBorder(),
  ),
)
</code></pre>
<p>è¡¨å•æ ¡éªŒï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> GlobalKey&lt;FormState&gt; formKey = GlobalKey&lt;FormState&gt;();

Form(
  key: formKey,
  child: Column(
    children: [
      TextFormField(
        validator: (v) =&gt; (v == <span class="hljs-keyword">null</span> || v.isEmpty) ? <span class="hljs-string">'å¿…å¡«'</span> : <span class="hljs-keyword">null</span>,
      ),
      ElevatedButton(
        onPressed: () {
          <span class="hljs-keyword">if</span> (formKey.currentState!.validate()) {
            <span class="hljs-comment">// æäº¤</span>
          }
        },
        child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'æäº¤'</span>),
      )
    ],
  ),
)
</code></pre>
<hr/>
<h3 data-id="heading-13">7. é¡µé¢ç»“æ„ä¸å¯¼èˆª</h3>
<p>åŸºæœ¬é¡µé¢ç»“æ„ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">Scaffold(
  appBar: AppBar(title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'æ ‡é¢˜'</span>)),
  body: <span class="hljs-keyword">const</span> Center(child: Text(<span class="hljs-string">'å†…å®¹åŒº'</span>)),
  floatingActionButton: FloatingActionButton(
    onPressed: () {},
    child: <span class="hljs-keyword">const</span> Icon(Icons.add),
  ),
)
</code></pre>
<p>å¯¼èˆªï¼ˆé¡¹ç›®ä½¿ç”¨ go_routerï¼Œç¤ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ³¨å†Œè·¯ç”±ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰</span>
<span class="hljs-comment">// context.go('/detail'); // è·³è½¬</span>
<span class="hljs-comment">// context.pop();         // è¿”å›</span>
</code></pre>
<hr/>
<h3 data-id="heading-14">8. çŠ¶æ€ç®¡ç†ï¼ˆsetState vs GetXï¼‰</h3>
<p>åŸç”Ÿ setStateï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-built_in">int</span> counter = <span class="hljs-number">0</span>;
setState(() =&gt; counter++);
</code></pre>
<p>GetX å“åº”å¼ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CounterController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetxController</span> </span>{
  <span class="hljs-keyword">final</span> RxInt count = <span class="hljs-number">0.</span>obs;
  <span class="hljs-keyword">void</span> increment() =&gt; count.value++;
}
<span class="hljs-comment">// ä½¿ç”¨ï¼šfinal c = Get.put(CounterController());</span>
<span class="hljs-comment">// Obx(() =&gt; Text('${c.count.value}'));</span>
</code></pre>
<hr/>
<h3 data-id="heading-15">9. å¼¹çª—ä¸ BottomSheet</h3>
<pre><code class="hljs language-dart" lang="dart">showDialog(
  context: context,
  builder: (_) =&gt; AlertDialog(
    title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'æç¤º'</span>),
    content: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'ç¡®å®šå—ï¼Ÿ'</span>),
    actions: [
      TextButton(onPressed: () =&gt; Navigator.pop(context), child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'å–æ¶ˆ'</span>)),
      TextButton(onPressed: () {}, child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'ç¡®å®š'</span>)),
    ],
  ),
);
</code></pre>
<pre><code class="hljs language-dart" lang="dart">showModalBottomSheet(
  context: context,
  builder: (_) =&gt; SizedBox(
    height: <span class="hljs-number">240</span>,
    child: <span class="hljs-keyword">const</span> Center(child: Text(<span class="hljs-string">'BottomSheet'</span>)),
  ),
);
</code></pre>
<hr/>
<h3 data-id="heading-16">10. é€‚é…ä¸ä¸»é¢˜</h3>
<p>å±å¹•é€‚é…ï¼ˆflutter_screenutilï¼‰ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å…¥å£å¤„åˆå§‹åŒ– ScreenUtilï¼Œç„¶åä½¿ç”¨ 12.w/12.h/12.sp ç­‰</span>
</code></pre>
<p>MediaQueryï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> Size size = MediaQuery.of(context).size; <span class="hljs-comment">// å±å¹•å°ºå¯¸</span>
</code></pre>
<p>ä¸»é¢˜ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">ThemeData(
  colorScheme: ColorScheme.fromSeed(seedColor: Colors.blue),
  useMaterial3: <span class="hljs-keyword">true</span>,
)
</code></pre>
<hr/>
<h3 data-id="heading-17">11. ç½‘ç»œï¼ˆDio ç®€ä¾‹ï¼‰</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> dio = Dio(BaseOptions(baseUrl: <span class="hljs-string">'https://httpbin.org'</span>));
<span class="hljs-keyword">final</span> resp = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/get'</span>);
</code></pre>
<p>é¡¹ç›®å†…è¯·ä¼˜å…ˆä½¿ç”¨ Retrofit + Service å±‚å°è£…ï¼ˆå‚è€ƒç°æœ‰ <code>lib/src/services/**</code>ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-18">12. å¼€å‘æ•ˆç‡æç¤º</h3>
<ul>
<li>çƒ­é‡è½½ï¼šä¿å­˜æ–‡ä»¶å³å¯çƒ­é‡è½½ï¼ˆå°½é‡ä½¿ç”¨ const æ„é€ å‡å°‘é‡å»ºï¼‰ã€‚</li>
<li>ç»“æ„æ‹†åˆ†ï¼šå¤§ç»„ä»¶æ‹†å°ç»„ä»¶ï¼Œé¿å…æ·±åº¦åµŒå¥—ã€‚</li>
<li>ä»£ç ç”Ÿæˆï¼šæ¶‰åŠæ•°æ®æ¨¡å‹/æ¥å£ï¼Œè®°å¾—è¿è¡Œ
<ul>
<li><code>fvm flutter pub run build_runner build --delete-conflicting-outputs</code></li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-19">13. å¸¸è§å‘</h3>
<ul>
<li>setState ä¸ Obx æ··ç”¨ï¼šå°½é‡è®©æŸå— UI åªç›‘å¬ä¸€ç§çŠ¶æ€æ¥æºï¼Œé¿å…é‡å¤ rebuildã€‚</li>
<li>showModalBottomSheet é«˜åº¦ï¼šé»˜è®¤æŒ‰å†…å®¹é«˜åº¦ï¼Œæƒ³è¿‘å…¨å±éœ€ <code>isScrollControlled: true</code> + æŒ‡å®šé«˜åº¦ã€‚</li>
<li>iOS è·‘ä¸èµ·æ¥ï¼ˆScheme/Flavorï¼‰ï¼šéœ€æŒ‡å®š <code>--flavor</code> ä¸ Xcode çš„ Scheme å¯¹åº”ã€‚</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java å°è£…ï¼ˆEncapsulationï¼‰æŒ‡å—]]></title>    <link>https://juejin.cn/post/7578820431039250472</link>    <guid>https://juejin.cn/post/7578820431039250472</guid>    <pubDate>2025-12-02T02:38:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578820431039250472" data-draft-id="7578777952726745122" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java å°è£…ï¼ˆEncapsulationï¼‰æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T02:38:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å‘¨åœ¨æˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/3632442150752573"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java å°è£…ï¼ˆEncapsulationï¼‰æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3632442150752573/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å‘¨åœ¨æˆé•¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:38:38.000Z" title="Tue Dec 02 2025 02:38:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“– å°è£…çš„åŸºæœ¬æ¦‚å¿µ</h2>
<h3 data-id="heading-1"><strong>ä»€ä¹ˆæ˜¯å°è£…ï¼Ÿ</strong></h3>
<p>å°è£…æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„<strong>å››å¤§ç‰¹æ€§</strong>ä¹‹ä¸€ï¼Œå®ƒå°†æ•°æ®ï¼ˆå±æ€§ï¼‰å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•ï¼ˆè¡Œä¸ºï¼‰åŒ…è£…åœ¨ä¸€èµ·ï¼Œå¹¶<strong>éšè—å†…éƒ¨å®ç°ç»†èŠ‚</strong>ï¼Œåªæš´éœ²å¿…è¦çš„æ¥å£ã€‚</p>
<h3 data-id="heading-2"><strong>å°è£…çš„æ ¸å¿ƒæ€æƒ³</strong></h3>
<ul>
<li><strong>éšè—å®ç°</strong>ï¼šå¯¹å¤–éšè—å†…éƒ¨å®ç°ç»†èŠ‚</li>
<li><strong>æš´éœ²æ¥å£</strong>ï¼šæä¾›å…¬å…±æ–¹æ³•æ¥è®¿é—®å’Œä¿®æ”¹æ•°æ®</li>
<li><strong>æ•°æ®ä¿æŠ¤</strong>ï¼šé˜²æ­¢å¤–éƒ¨ç›´æ¥è®¿é—®å’Œä¿®æ”¹å†…éƒ¨æ•°æ®</li>
</ul>
<h2 data-id="heading-3">ğŸ¯ å°è£…çš„å¥½å¤„</h2>
<p>java</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// âŒ æ²¡æœ‰å°è£…çš„é—®é¢˜</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BadDesign</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> name;      <span class="hljs-comment">// ç›´æ¥æš´éœ²å±æ€§</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> age;         <span class="hljs-comment">// å¤–éƒ¨å¯ä»¥ç›´æ¥ä¿®æ”¹</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> salary;   <span class="hljs-comment">// æ²¡æœ‰éªŒè¯é€»è¾‘</span>
}

<span class="hljs-comment">// âœ… ä½¿ç”¨å°è£…çš„å¥½å¤„</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodDesign</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> name;     <span class="hljs-comment">// ç§æœ‰å±æ€§ï¼Œéšè—å®ç°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;        <span class="hljs-comment">// åªèƒ½é€šè¿‡æ–¹æ³•è®¿é—®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> salary;  <span class="hljs-comment">// å¯ä»¥æ·»åŠ éªŒè¯é€»è¾‘</span>
    
    <span class="hljs-comment">// æä¾›å…¬å…±çš„è®¿é—®æ–¹æ³•ï¼ˆgetterï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> name;
    }
    
    <span class="hljs-comment">// æä¾›å…¬å…±çš„ä¿®æ”¹æ–¹æ³•ï¼ˆsetterï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span> </span>{
        <span class="hljs-comment">// å¯ä»¥æ·»åŠ éªŒè¯é€»è¾‘</span>
        <span class="hljs-keyword">if</span> (name != null &amp;&amp; !name.<span class="hljs-built_in">trim</span>().<span class="hljs-built_in">isEmpty</span>()) {
            <span class="hljs-keyword">this</span>.name = name;
        }
    }
}
</code></pre>
<h2 data-id="heading-4">ğŸ”’ è®¿é—®ä¿®é¥°ç¬¦ï¼ˆAccess Modifiersï¼‰</h2>
<h3 data-id="heading-5"><strong>å››ç§è®¿é—®çº§åˆ«</strong></h3>













































<table><thead><tr><th>ä¿®é¥°ç¬¦</th><th>åŒç±»</th><th>åŒåŒ…</th><th>å­ç±»</th><th>ä¸åŒåŒ…</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>private</strong></td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>ä»…æœ¬ç±»å¯è§</td></tr><tr><td><strong>é»˜è®¤</strong></td><td>âœ…</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>åŒåŒ…å¯è§</td></tr><tr><td><strong>protected</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âŒ</td><td>åŒåŒ…æˆ–å­ç±»å¯è§</td></tr><tr><td><strong>public</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>æ‰€æœ‰ç±»å¯è§</td></tr></tbody></table>
<h3 data-id="heading-6"><strong>è®¿é—®ä¿®é¥°ç¬¦ç¤ºä¾‹</strong></h3>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp">package com.example;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AccessDemo</span> {
    <span class="hljs-comment">// 1. private - ä»…æœ¬ç±»å¯è§</span>
    <span class="hljs-keyword">private</span> String privateField = <span class="hljs-string">"ç§æœ‰å­—æ®µ"</span>;
    
    <span class="hljs-comment">// 2. é»˜è®¤ï¼ˆåŒ…ç§æœ‰ï¼‰- åŒåŒ…å¯è§</span>
    String defaultField = <span class="hljs-string">"é»˜è®¤å­—æ®µ"</span>;
    
    <span class="hljs-comment">// 3. protected - åŒåŒ…æˆ–å­ç±»å¯è§</span>
    <span class="hljs-keyword">protected</span> String protectedField = <span class="hljs-string">"å—ä¿æŠ¤å­—æ®µ"</span>;
    
    <span class="hljs-comment">// 4. public - æ‰€æœ‰åœ°æ–¹å¯è§</span>
    <span class="hljs-keyword">public</span> String publicField = <span class="hljs-string">"å…¬å…±å­—æ®µ"</span>;
    
    <span class="hljs-comment">// è®¿é—®ç§æœ‰å­—æ®µçš„æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getPrivateField</span>()</span> {
        <span class="hljs-keyword">return</span> privateField;  <span class="hljs-comment">// æœ¬ç±»ä¸­å¯ä»¥è®¿é—®private</span>
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">privateMethod</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ç§æœ‰æ–¹æ³•"</span>);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testAccess</span>()</span> {
        <span class="hljs-comment">// æ‰€æœ‰è®¿é—®çº§åˆ«åœ¨æœ¬ç±»ä¸­éƒ½å¯è§</span>
        System.<span class="hljs-keyword">out</span>.println(privateField);
        System.<span class="hljs-keyword">out</span>.println(defaultField);
        System.<span class="hljs-keyword">out</span>.println(protectedField);
        System.<span class="hljs-keyword">out</span>.println(publicField);
        privateMethod();
    }
}

<span class="hljs-comment">// åŒåŒ…ä¸­çš„å¦ä¸€ä¸ªç±»</span>
package com.example;

<span class="hljs-keyword">class</span> <span class="hljs-title">SamePackageClass</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span> {
        AccessDemo demo = <span class="hljs-keyword">new</span> AccessDemo();
        
        <span class="hljs-comment">// System.out.println(demo.privateField);  // âŒ é”™è¯¯ï¼šä¸å¯è®¿é—®</span>
        System.<span class="hljs-keyword">out</span>.println(demo.defaultField);      <span class="hljs-comment">// âœ… å¯ä»¥ï¼šåŒåŒ…</span>
        System.<span class="hljs-keyword">out</span>.println(demo.protectedField);    <span class="hljs-comment">// âœ… å¯ä»¥ï¼šåŒåŒ…</span>
        System.<span class="hljs-keyword">out</span>.println(demo.publicField);       <span class="hljs-comment">// âœ… å¯ä»¥ï¼šå…¬å…±</span>
    }
}

<span class="hljs-comment">// ä¸åŒåŒ…ä¸­çš„ç±»</span>
package other;

import com.example.AccessDemo;

<span class="hljs-keyword">class</span> <span class="hljs-title">DifferentPackageClass</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span> {
        AccessDemo demo = <span class="hljs-keyword">new</span> AccessDemo();
        
        <span class="hljs-comment">// System.out.println(demo.privateField);   // âŒ é”™è¯¯</span>
        <span class="hljs-comment">// System.out.println(demo.defaultField);   // âŒ é”™è¯¯ï¼šä¸åŒåŒ…</span>
        <span class="hljs-comment">// System.out.println(demo.protectedField); // âŒ é”™è¯¯ï¼šä¸åŒåŒ…éå­ç±»</span>
        System.<span class="hljs-keyword">out</span>.println(demo.publicField);        <span class="hljs-comment">// âœ… å¯ä»¥ï¼šå…¬å…±</span>
        
        <span class="hljs-comment">// é€šè¿‡å…¬å…±æ–¹æ³•è®¿é—®ç§æœ‰å­—æ®µ</span>
        System.<span class="hljs-keyword">out</span>.println(demo.getPrivateField());  <span class="hljs-comment">// âœ… å¯ä»¥</span>
    }
}

<span class="hljs-comment">// ä¸åŒåŒ…ä¸­çš„å­ç±»</span>
package other;

import com.example.AccessDemo;

<span class="hljs-keyword">class</span> <span class="hljs-title">SubClass</span> <span class="hljs-title">extends</span> <span class="hljs-title">AccessDemo</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span> {
        <span class="hljs-comment">// System.out.println(privateField);   // âŒ é”™è¯¯</span>
        <span class="hljs-comment">// System.out.println(defaultField);   // âŒ é”™è¯¯ï¼šä¸åŒåŒ…</span>
        System.<span class="hljs-keyword">out</span>.println(protectedField);   <span class="hljs-comment">// âœ… å¯ä»¥ï¼šå­ç±»</span>
        System.<span class="hljs-keyword">out</span>.println(publicField);      <span class="hljs-comment">// âœ… å¯ä»¥ï¼šå…¬å…±</span>
        
        <span class="hljs-comment">// é€šè¿‡ç»§æ‰¿çš„æ–¹æ³•è®¿é—®</span>
        System.<span class="hljs-keyword">out</span>.println(getPrivateField()); <span class="hljs-comment">// âœ… å¯ä»¥</span>
    }
}
</code></pre>
<h2 data-id="heading-7">ğŸ› ï¸ Getter å’Œ Setter æ–¹æ³•</h2>
<h3 data-id="heading-8"><strong>æ ‡å‡†Getter/Setteræ¨¡å¼</strong></h3>
<p>java</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-comment">// ç§æœ‰å­—æ®µ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;
    <span class="hljs-keyword">private</span> int age;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> studentId;
    <span class="hljs-keyword">private</span> double gpa;
    
    <span class="hljs-comment">// 1. Getteræ–¹æ³•ï¼šè·å–å­—æ®µå€¼</span>
    <span class="hljs-comment">// å‘½åè§„èŒƒï¼šget + å­—æ®µåï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> name;
    }
    
    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">getAge</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> age;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getStudentId</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> studentId;
    }
    
    <span class="hljs-keyword">public</span> double <span class="hljs-title function_">getGpa</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> gpa;
    }
    
    <span class="hljs-comment">// 2. Setteræ–¹æ³•ï¼šè®¾ç½®å­—æ®µå€¼</span>
    <span class="hljs-comment">// å‘½åè§„èŒƒï¼šset + å­—æ®µåï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) {
        <span class="hljs-comment">// å¯ä»¥æ·»åŠ éªŒè¯é€»è¾‘</span>
        <span class="hljs-keyword">if</span> (name != <span class="hljs-literal">null</span> &amp;&amp; name.<span class="hljs-title function_">length</span>() &gt;= <span class="hljs-number">2</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å§“åæ— æ•ˆ"</span>);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAge</span>(<span class="hljs-params">int age</span>) {
        <span class="hljs-comment">// éªŒè¯å¹´é¾„èŒƒå›´</span>
        <span class="hljs-keyword">if</span> (age &gt;= <span class="hljs-number">0</span> &amp;&amp; age &lt;= <span class="hljs-number">150</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´"</span>);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setStudentId</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> studentId</span>) {
        <span class="hljs-comment">// éªŒè¯å­¦å·æ ¼å¼</span>
        <span class="hljs-keyword">if</span> (studentId != <span class="hljs-literal">null</span> &amp;&amp; studentId.<span class="hljs-title function_">matches</span>(<span class="hljs-string">"\d{10}"</span>)) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">studentId</span> = studentId;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å­¦å·å¿…é¡»æ˜¯10ä½æ•°å­—"</span>);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setGpa</span>(<span class="hljs-params">double gpa</span>) {
        <span class="hljs-comment">// éªŒè¯GPAèŒƒå›´</span>
        <span class="hljs-keyword">if</span> (gpa &gt;= <span class="hljs-number">0.0</span> &amp;&amp; gpa &lt;= <span class="hljs-number">4.0</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">gpa</span> = gpa;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"GPAå¿…é¡»åœ¨0.0-4.0ä¹‹é—´"</span>);
        }
    }
    
    <span class="hljs-comment">// 3. åªè¯»å­—æ®µï¼ˆåªæœ‰getterï¼Œæ²¡æœ‰setterï¼‰</span>
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">String</span> createdAt = java.<span class="hljs-property">time</span>.<span class="hljs-property">LocalDate</span>.<span class="hljs-title function_">now</span>().<span class="hljs-title function_">toString</span>();
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getCreatedAt</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> createdAt;
    }
    
    <span class="hljs-comment">// 4. åªå†™å­—æ®µï¼ˆä¸æ¨èï¼Œä½†æœ‰ç‰¹æ®Šç”¨é€”ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> password;
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setPassword</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> password</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">password</span> = password;
    }
    
    <span class="hljs-comment">// 5. å¸ƒå°”ç±»å‹çš„Getterè§„èŒƒ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">boolean</span> graduated;
    
    <span class="hljs-comment">// å¸ƒå°”ç±»å‹ä½¿ç”¨iså‰ç¼€</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">isGraduated</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> graduated;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setGraduated</span>(<span class="hljs-params"><span class="hljs-built_in">boolean</span> graduated</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">graduated</span> = graduated;
    }
    
    <span class="hljs-comment">// æ˜¾ç¤ºå­¦ç”Ÿä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">displayInfo</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å­¦ç”Ÿä¿¡æ¯:"</span>);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å§“å: "</span> + name);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å¹´é¾„: "</span> + age);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å­¦å·: "</span> + studentId);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"GPA: "</span> + gpa);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"åˆ›å»ºæ—¶é—´: "</span> + createdAt);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æ˜¯å¦æ¯•ä¸š: "</span> + graduated);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">Student</span> student = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();
        
        <span class="hljs-comment">// ä½¿ç”¨setterè®¾ç½®å€¼ï¼ˆæœ‰éªŒè¯ï¼‰</span>
        student.<span class="hljs-title function_">setName</span>(<span class="hljs-string">"å¼ ä¸‰"</span>);
        student.<span class="hljs-title function_">setAge</span>(<span class="hljs-number">20</span>);
        student.<span class="hljs-title function_">setStudentId</span>(<span class="hljs-string">"2023000001"</span>);
        student.<span class="hljs-title function_">setGpa</span>(<span class="hljs-number">3.8</span>);
        student.<span class="hljs-title function_">setGraduated</span>(<span class="hljs-literal">false</span>);
        
        <span class="hljs-comment">// ä½¿ç”¨getterè·å–å€¼</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å­¦ç”Ÿå§“å: "</span> + student.<span class="hljs-title function_">getName</span>());
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å­¦ç”Ÿå¹´é¾„: "</span> + student.<span class="hljs-title function_">getAge</span>());
        
        <span class="hljs-comment">// æµ‹è¯•æ— æ•ˆè¾“å…¥</span>
        student.<span class="hljs-title function_">setAge</span>(<span class="hljs-number">200</span>);  <span class="hljs-comment">// ä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯</span>
        student.<span class="hljs-title function_">setGpa</span>(<span class="hljs-number">5.0</span>);  <span class="hljs-comment">// ä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯</span>
        
        student.<span class="hljs-title function_">displayInfo</span>();
    }
}
</code></pre>
<h3 data-id="heading-9"><strong>é«˜çº§Getter/SetteræŠ€å·§</strong></h3>
<p>java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.Collections;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedGetterSetter</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> List&lt;String&gt; hobbies;  <span class="hljs-comment">// å¯å˜å¯¹è±¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] scores;          <span class="hljs-comment">// æ•°ç»„</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String id;       <span class="hljs-comment">// finalå­—æ®µ</span>
    
    <span class="hljs-comment">// æ„é€ å™¨åˆå§‹åŒ–finalå­—æ®µ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AdvancedGetterSetter</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
        <span class="hljs-built_in">this</span>.hobbies = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-built_in">this</span>.scores = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">3</span>];
    }
    
    <span class="hljs-comment">// 1. è¿”å›ä¸å¯ä¿®æ”¹çš„é›†åˆï¼ˆé˜²å¾¡æ€§ç¼–ç¨‹ï¼‰</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getHobbies</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è¿”å›å‰¯æœ¬ï¼Œé˜²æ­¢å¤–éƒ¨ä¿®æ”¹å†…éƒ¨æ•°æ®</span>
        <span class="hljs-keyword">return</span> Collections.unmodifiableList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(hobbies));
        
        <span class="hljs-comment">// æˆ–è€…è¿”å›åªè¯»è§†å›¾</span>
        <span class="hljs-comment">// return Collections.unmodifiableList(hobbies);</span>
    }
    
    <span class="hljs-comment">// 2. æ§åˆ¶é›†åˆçš„ä¿®æ”¹</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addHobby</span><span class="hljs-params">(String hobby)</span> {
        <span class="hljs-keyword">if</span> (hobby != <span class="hljs-literal">null</span> &amp;&amp; !hobby.trim().isEmpty()) {
            <span class="hljs-built_in">this</span>.hobbies.add(hobby);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeHobby</span><span class="hljs-params">(String hobby)</span> {
        <span class="hljs-built_in">this</span>.hobbies.remove(hobby);
    }
    
    <span class="hljs-comment">// 3. æ•°ç»„çš„Getter/Setter</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] getScores() {
        <span class="hljs-comment">// è¿”å›æ•°ç»„çš„å‰¯æœ¬</span>
        <span class="hljs-keyword">return</span> scores.clone();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setScores</span><span class="hljs-params">(<span class="hljs-type">int</span>[] scores)</span> {
        <span class="hljs-comment">// å¤åˆ¶æ•°ç»„ï¼Œè€Œä¸æ˜¯ç›´æ¥å¼•ç”¨</span>
        System.arraycopy(scores, <span class="hljs-number">0</span>, <span class="hljs-built_in">this</span>.scores, <span class="hljs-number">0</span>, 
                        Math.min(scores.length, <span class="hljs-built_in">this</span>.scores.length));
    }
    
    <span class="hljs-comment">// 4. åªè¯»çš„finalå­—æ®µ</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }
    
    <span class="hljs-comment">// 5. è®¡ç®—æ€§å±æ€§ï¼ˆæ²¡æœ‰å¯¹åº”çš„å­—æ®µï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getAverageScore</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (scores.length == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
        
        <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> score : scores) {
            sum += score;
        }
        <span class="hljs-keyword">return</span> (<span class="hljs-type">double</span>) sum / scores.length;
    }
    
    <span class="hljs-comment">// 6. é“¾å¼Setterï¼ˆè¿”å›thisï¼‰</span>
    <span class="hljs-keyword">public</span> AdvancedGetterSetter <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
    }
    
    <span class="hljs-comment">// 7. Builderæ¨¡å¼ç»“åˆ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Builder</span> {
        <span class="hljs-keyword">private</span> String id;
        <span class="hljs-keyword">private</span> String name;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Builder</span><span class="hljs-params">(String id)</span> {
            <span class="hljs-built_in">this</span>.id = id;
        }
        
        <span class="hljs-keyword">public</span> Builder <span class="hljs-title function_">name</span><span class="hljs-params">(String name)</span> {
            <span class="hljs-built_in">this</span>.name = name;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-keyword">public</span> AdvancedGetterSetter <span class="hljs-title function_">build</span><span class="hljs-params">()</span> {
            <span class="hljs-type">AdvancedGetterSetter</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AdvancedGetterSetter</span>(id);
            obj.name = name;
            <span class="hljs-keyword">return</span> obj;
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">AdvancedGetterSetter</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AdvancedGetterSetter</span>(<span class="hljs-string">"001"</span>);
        
        <span class="hljs-comment">// æµ‹è¯•é›†åˆä¿æŠ¤</span>
        obj.addHobby(<span class="hljs-string">"ç¯®çƒ"</span>);
        obj.addHobby(<span class="hljs-string">"éŸ³ä¹"</span>);
        
        List&lt;String&gt; hobbies = obj.getHobbies();
        System.out.println(<span class="hljs-string">"çˆ±å¥½: "</span> + hobbies);
        
        <span class="hljs-comment">// hobbies.add("æ¸¸æ³³");  // âŒ è¿è¡Œæ—¶å¼‚å¸¸ï¼šUnsupportedOperationException</span>
        
        <span class="hljs-comment">// æµ‹è¯•æ•°ç»„ä¿æŠ¤</span>
        <span class="hljs-type">int</span>[] testScores = {<span class="hljs-number">90</span>, <span class="hljs-number">85</span>, <span class="hljs-number">95</span>};
        obj.setScores(testScores);
        
        <span class="hljs-type">int</span>[] scores = obj.getScores();
        scores[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;  <span class="hljs-comment">// ä¿®æ”¹çš„æ˜¯å‰¯æœ¬ï¼Œä¸å½±å“åŸæ•°ç»„</span>
        
        System.out.println(<span class="hljs-string">"å¹³å‡åˆ†: "</span> + obj.getAverageScore());
        
        <span class="hljs-comment">// é“¾å¼è°ƒç”¨</span>
        <span class="hljs-type">AdvancedGetterSetter</span> <span class="hljs-variable">obj2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AdvancedGetterSetter</span>(<span class="hljs-string">"002"</span>)
            .setName(<span class="hljs-string">"æå››"</span>);
    }
}
</code></pre>
<h2 data-id="heading-10">ğŸ—ï¸ å°è£…çš„å®é™…åº”ç”¨</h2>
<h3 data-id="heading-11"><strong>ç¤ºä¾‹1ï¼šé“¶è¡Œè´¦æˆ·ç±»</strong></h3>
<p>java</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BankAccount</span> {
    <span class="hljs-comment">// ç§æœ‰å­—æ®µ</span>
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">String</span> accountNumber;  <span class="hljs-comment">// è´¦å·ä¸å¯å˜</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> accountHolder;        <span class="hljs-comment">// æˆ·ä¸»å§“å</span>
    <span class="hljs-keyword">private</span> double balance;              <span class="hljs-comment">// ä½™é¢</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> password;             <span class="hljs-comment">// å¯†ç ï¼ˆä¸æä¾›getterï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">boolean</span> isActive;            <span class="hljs-comment">// è´¦æˆ·çŠ¶æ€</span>
    
    <span class="hljs-comment">// æ„é€ å™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">BankAccount</span>(<span class="hljs-title class_">String</span> accountNumber, <span class="hljs-title class_">String</span> accountHolder, 
                      <span class="hljs-title class_">String</span> password, double initialDeposit) {
        <span class="hljs-comment">// å‚æ•°éªŒè¯</span>
        <span class="hljs-title function_">validateAccountNumber</span>(accountNumber);
        <span class="hljs-title function_">validateAccountHolder</span>(accountHolder);
        <span class="hljs-title function_">validatePassword</span>(password);
        <span class="hljs-title function_">validateInitialDeposit</span>(initialDeposit);
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">accountNumber</span> = accountNumber;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">accountHolder</span> = accountHolder;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">password</span> = password;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">balance</span> = initialDeposit;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isActive</span> = <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">// ç§æœ‰éªŒè¯æ–¹æ³•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">validateAccountNumber</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> accountNumber</span>) {
        <span class="hljs-keyword">if</span> (accountNumber == <span class="hljs-literal">null</span> || !accountNumber.<span class="hljs-title function_">matches</span>(<span class="hljs-string">"\d{16}"</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"è´¦å·å¿…é¡»æ˜¯16ä½æ•°å­—"</span>);
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">validateAccountHolder</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> accountHolder</span>) {
        <span class="hljs-keyword">if</span> (accountHolder == <span class="hljs-literal">null</span> || accountHolder.<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">isEmpty</span>()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æˆ·ä¸»å§“åä¸èƒ½ä¸ºç©º"</span>);
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">validatePassword</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> password</span>) {
        <span class="hljs-keyword">if</span> (password == <span class="hljs-literal">null</span> || password.<span class="hljs-title function_">length</span>() &lt; <span class="hljs-number">6</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"å¯†ç è‡³å°‘6ä½"</span>);
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">validateInitialDeposit</span>(<span class="hljs-params">double amount</span>) {
        <span class="hljs-keyword">if</span> (amount &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"åˆå§‹å­˜æ¬¾ä¸èƒ½ä¸ºè´Ÿ"</span>);
        }
    }
    
    <span class="hljs-comment">// Getteræ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getAccountNumber</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> accountNumber;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getAccountHolder</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> accountHolder;
    }
    
    <span class="hljs-keyword">public</span> double <span class="hljs-title function_">getBalance</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> balance;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">isActive</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> isActive;
    }
    
    <span class="hljs-comment">// Setteræ–¹æ³•ï¼ˆæœ‰é™åˆ¶ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAccountHolder</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> accountHolder</span>) {
        <span class="hljs-title function_">validateAccountHolder</span>(accountHolder);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">accountHolder</span> = accountHolder;
    }
    
    <span class="hljs-comment">// ä¸šåŠ¡æ–¹æ³•ï¼ˆå°è£…ä¸šåŠ¡é€»è¾‘ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">deposit</span>(<span class="hljs-params">double amount</span>) {
        <span class="hljs-keyword">if</span> (!isActive) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è´¦æˆ·å·²å†»ç»“ï¼Œæ— æ³•å­˜æ¬¾"</span>);
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-keyword">if</span> (amount &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å­˜æ¬¾é‡‘é¢å¿…é¡»å¤§äº0"</span>);
            <span class="hljs-keyword">return</span>;
        }
        
        balance += amount;
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">"å­˜æ¬¾æˆåŠŸï¼å­˜å…¥ï¿¥%.2fï¼Œå½“å‰ä½™é¢ï¿¥%.2f%n"</span>, amount, balance);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">withdraw</span>(<span class="hljs-params">double amount, <span class="hljs-built_in">String</span> password</span>) {
        <span class="hljs-keyword">if</span> (!isActive) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è´¦æˆ·å·²å†»ç»“ï¼Œæ— æ³•å–æ¬¾"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">authenticate</span>(password)) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å¯†ç é”™è¯¯"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        <span class="hljs-keyword">if</span> (amount &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å–æ¬¾é‡‘é¢å¿…é¡»å¤§äº0"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        <span class="hljs-keyword">if</span> (amount &gt; balance) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"ä½™é¢ä¸è¶³"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        balance -= amount;
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">"å–æ¬¾æˆåŠŸï¼å–å‡ºï¿¥%.2fï¼Œå½“å‰ä½™é¢ï¿¥%.2f%n"</span>, amount, balance);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">transfer</span>(<span class="hljs-params">BankAccount target, double amount, <span class="hljs-built_in">String</span> password</span>) {
        <span class="hljs-keyword">if</span> (!isActive || !target.<span class="hljs-property">isActive</span>) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è´¦æˆ·çŠ¶æ€å¼‚å¸¸ï¼Œæ— æ³•è½¬è´¦"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">authenticate</span>(password)) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å¯†ç é”™è¯¯"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">withdraw</span>(amount, password)) {
            target.<span class="hljs-title function_">deposit</span>(amount);
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">"å‘%sè½¬è´¦ï¿¥%.2fæˆåŠŸ%n"</span>, 
                            target.<span class="hljs-title function_">getAccountHolder</span>(), amount);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// ç§æœ‰è¾…åŠ©æ–¹æ³•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">authenticate</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> password</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">password</span>.<span class="hljs-title function_">equals</span>(password);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">changePassword</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> oldPassword, <span class="hljs-built_in">String</span> newPassword</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">authenticate</span>(oldPassword)) {
            <span class="hljs-title function_">validatePassword</span>(newPassword);
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">password</span> = newPassword;
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å¯†ç ä¿®æ”¹æˆåŠŸ"</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"åŸå¯†ç é”™è¯¯"</span>);
        }
    }
    
    <span class="hljs-comment">// è´¦æˆ·ç®¡ç†æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">activate</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isActive</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è´¦æˆ·å·²æ¿€æ´»"</span>);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">deactivate</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isActive</span> = <span class="hljs-literal">false</span>;
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è´¦æˆ·å·²å†»ç»“"</span>);
    }
    
    <span class="hljs-comment">// æ˜¾ç¤ºè´¦æˆ·ä¿¡æ¯ï¼ˆéšè—æ•æ„Ÿä¿¡æ¯ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">displayAccountInfo</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"\n=== è´¦æˆ·ä¿¡æ¯ ==="</span>);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è´¦å·: "</span> + accountNumber);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æˆ·ä¸»: "</span> + accountHolder);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">"ä½™é¢: ï¿¥%.2f%n"</span>, balance);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"çŠ¶æ€: "</span> + (isActive ? <span class="hljs-string">"æ­£å¸¸"</span> : <span class="hljs-string">"å†»ç»“"</span>));
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"================\n"</span>);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-comment">// åˆ›å»ºè´¦æˆ·</span>
        <span class="hljs-title class_">BankAccount</span> account1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BankAccount</span>(
            <span class="hljs-string">"6228480012345678"</span>, 
            <span class="hljs-string">"å¼ ä¸‰"</span>, 
            <span class="hljs-string">"123456"</span>, 
            <span class="hljs-number">1000.00</span>
        );
        
        <span class="hljs-title class_">BankAccount</span> account2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BankAccount</span>(
            <span class="hljs-string">"6228480098765432"</span>,
            <span class="hljs-string">"æå››"</span>,
            <span class="hljs-string">"654321"</span>,
            <span class="hljs-number">500.00</span>
        );
        
        <span class="hljs-comment">// æµ‹è¯•åŠŸèƒ½</span>
        account1.<span class="hljs-title function_">displayAccountInfo</span>();
        
        account1.<span class="hljs-title function_">deposit</span>(<span class="hljs-number">500.00</span>);
        account1.<span class="hljs-title function_">withdraw</span>(<span class="hljs-number">200.00</span>, <span class="hljs-string">"123456"</span>);
        account1.<span class="hljs-title function_">withdraw</span>(<span class="hljs-number">200.00</span>, <span class="hljs-string">"é”™è¯¯å¯†ç "</span>);  <span class="hljs-comment">// å¯†ç é”™è¯¯</span>
        
        account1.<span class="hljs-title function_">transfer</span>(account2, <span class="hljs-number">300.00</span>, <span class="hljs-string">"123456"</span>);
        
        account1.<span class="hljs-title function_">changePassword</span>(<span class="hljs-string">"123456"</span>, <span class="hljs-string">"æ–°å¯†ç "</span>);
        
        account1.<span class="hljs-title function_">deactivate</span>();
        account1.<span class="hljs-title function_">deposit</span>(<span class="hljs-number">100.00</span>);  <span class="hljs-comment">// è´¦æˆ·å†»ç»“ï¼Œæ— æ³•å­˜æ¬¾</span>
    }
}
</code></pre>
<h2 data-id="heading-12">âš ï¸ å°è£…çš„å¸¸è§é”™è¯¯</h2>
<h3 data-id="heading-13"><strong>é”™è¯¯1ï¼šè¿‡åº¦æš´éœ²å†…éƒ¨å®ç°</strong></h3>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// âŒ é”™è¯¯çš„å°è£…</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BadEncapsulation</span> {
    <span class="hljs-keyword">public</span> List&lt;String&gt; items;  <span class="hljs-comment">// ç›´æ¥æš´éœ²å†…éƒ¨é›†åˆ</span>
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BadEncapsulation</span>()</span> {
        items = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
    }
}

<span class="hljs-comment">// ä½¿ç”¨è¿™ä¸ªç±»çš„ä»£ç å¯ä»¥è¿™æ ·åšï¼š</span>
BadEncapsulation bad = <span class="hljs-keyword">new</span> BadEncapsulation();
bad.items.<span class="hljs-keyword">add</span>(<span class="hljs-string">"ç›´æ¥ä¿®æ”¹"</span>);  <span class="hljs-comment">// ç»•è¿‡æ‰€æœ‰éªŒè¯é€»è¾‘</span>
bad.items = <span class="hljs-literal">null</span>;          <span class="hljs-comment">// ç”šè‡³å¯ä»¥ç ´åå†…éƒ¨çŠ¶æ€</span>

<span class="hljs-comment">// âœ… æ­£ç¡®çš„å°è£…</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GoodEncapsulation</span> {
    <span class="hljs-keyword">private</span> List&lt;String&gt; items;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">GoodEncapsulation</span>()</span> {
        items = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addItem</span>(<span class="hljs-params">String item</span>)</span> {
        <span class="hljs-keyword">if</span> (item != <span class="hljs-literal">null</span> &amp;&amp; !item.trim().isEmpty()) {
            items.<span class="hljs-keyword">add</span>(item);
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">List</span>&lt;<span class="hljs-title">String</span>&gt; <span class="hljs-title">getItems</span>()</span> {
        <span class="hljs-keyword">return</span> Collections.unmodifiableList(<span class="hljs-keyword">new</span> ArrayList&lt;&gt;(items));
    }
}
</code></pre>
<h3 data-id="heading-14"><strong>é”™è¯¯2ï¼šGetter/Setterä¸­çš„é€»è¾‘è¿‡äºå¤æ‚</strong></h3>
<p>java</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ ä¸å¥½çš„åšæ³•ï¼šåœ¨getter/setterä¸­åšå¤ªå¤šäº‹æƒ…</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ComplexGetterSetter</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> data;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// ä¸åº”è¯¥åœ¨getterä¸­ä¿®æ”¹çŠ¶æ€</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = <span class="hljs-title function_">processData</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>);  <span class="hljs-comment">// âŒ å‰¯ä½œç”¨</span>
        <span class="hljs-title function_">logAccess</span>();                         <span class="hljs-comment">// âŒ å‰¯ä½œç”¨</span>
        <span class="hljs-keyword">return</span> data;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setData</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> data</span>) {
        <span class="hljs-comment">// setteråº”è¯¥åªåšéªŒè¯å’Œèµ‹å€¼</span>
        <span class="hljs-title function_">validateData</span>(data);                 <span class="hljs-comment">// âœ… å¯ä»¥</span>
        <span class="hljs-title function_">logModification</span>();                  <span class="hljs-comment">// âš ï¸ å°å¿ƒï¼šå¯èƒ½æœ‰å‰¯ä½œç”¨</span>
        <span class="hljs-title function_">sendNotification</span>();                 <span class="hljs-comment">// âŒ ä¸åº”è¯¥</span>
        <span class="hljs-title function_">updateDatabase</span>();                   <span class="hljs-comment">// âŒ ä¸åº”è¯¥</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data;
    }
}

<span class="hljs-comment">// âœ… å¥½çš„åšæ³•ï¼šä¿æŒç®€å•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleGetterSetter</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> data;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> data;  <span class="hljs-comment">// ç®€å•è¿”å›</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setData</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> data</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isValid</span>(data)) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data;
        }
    }
    
    <span class="hljs-comment">// å¤æ‚çš„ä¸šåŠ¡é€»è¾‘æ”¾åœ¨å•ç‹¬çš„æ–¹æ³•ä¸­</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">updateDataWithNotification</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> data</span>) {
        <span class="hljs-title function_">setData</span>(data);
        <span class="hljs-title function_">sendNotification</span>();
        <span class="hljs-title function_">updateDatabase</span>();
    }
}
</code></pre>
<h2 data-id="heading-15">ğŸ’¡ å°è£…çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-16"><strong>å®è·µ1ï¼šä½¿ç”¨ä¸å¯å˜å¯¹è±¡</strong></h3>
<p>java</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ä¸å¯å˜ç±»æä¾›æ›´å¥½çš„å°è£…</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImmutablePerson</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> name;      <span class="hljs-comment">// finalå­—æ®µ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> age;          <span class="hljs-comment">// finalå­—æ®µ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;<span class="hljs-type">String</span>&gt; hobbies;  <span class="hljs-comment">// å¼•ç”¨ä¸å¯å˜</span>
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ImmutablePerson</span><span class="hljs-params">(<span class="hljs-type">String</span> name, <span class="hljs-type">int</span> age, List&lt;<span class="hljs-type">String</span>&gt; hobbies)</span> </span>{
        <span class="hljs-keyword">this</span>.name = name;
        <span class="hljs-keyword">this</span>.age = age;
        <span class="hljs-comment">// é˜²å¾¡æ€§æ‹·è´</span>
        <span class="hljs-keyword">this</span>.hobbies = Collections.<span class="hljs-built_in">unmodifiableList</span>(<span class="hljs-keyword">new</span> ArrayList&lt;&gt;(hobbies));
    }
    
    <span class="hljs-comment">// åªæœ‰getterï¼Œæ²¡æœ‰setter</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> name; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">getAge</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> age; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;<span class="hljs-type">String</span>&gt; <span class="hljs-title">getHobbies</span><span class="hljs-params">()</span> </span>{ 
        <span class="hljs-comment">// è¿”å›ä¸å¯ä¿®æ”¹çš„å‰¯æœ¬</span>
        <span class="hljs-keyword">return</span> Collections.<span class="hljs-built_in">unmodifiableList</span>(<span class="hljs-keyword">new</span> ArrayList&lt;&gt;(hobbies));
    }
    
    <span class="hljs-comment">// ä¿®æ”¹æ“ä½œè¿”å›æ–°å¯¹è±¡</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ImmutablePerson <span class="hljs-title">withName</span><span class="hljs-params">(<span class="hljs-type">String</span> newName)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">ImmutablePerson</span>(newName, age, hobbies);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> ImmutablePerson <span class="hljs-title">withAge</span><span class="hljs-params">(<span class="hljs-type">int</span> newAge)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">ImmutablePerson</span>(name, newAge, hobbies);
    }
}
</code></pre>
<h3 data-id="heading-17"><strong>å®è·µ2ï¼šä½¿ç”¨Builderæ¨¡å¼</strong></h3>
<p>java</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Config</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> host;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> port;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> timeout;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> sslEnabled;
    
    <span class="hljs-comment">// ç§æœ‰æ„é€ å™¨</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Config</span><span class="hljs-params">(Builder builder)</span> </span>{
        <span class="hljs-keyword">this</span>.host = builder.host;
        <span class="hljs-keyword">this</span>.port = builder.port;
        <span class="hljs-keyword">this</span>.timeout = builder.timeout;
        <span class="hljs-keyword">this</span>.sslEnabled = builder.sslEnabled;
    }
    
    <span class="hljs-comment">// Getter</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getHost</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> host; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">getPort</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> port; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">getTimeout</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> timeout; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title">isSslEnabled</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> sslEnabled; }
    
    <span class="hljs-comment">// Builder</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Builder</span> {
        <span class="hljs-comment">// å¿…å¡«å‚æ•°</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> host;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> port;
        
        <span class="hljs-comment">// å¯é€‰å‚æ•°ï¼ˆé»˜è®¤å€¼ï¼‰</span>
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> timeout = <span class="hljs-number">5000</span>;
        <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> sslEnabled = <span class="hljs-literal">false</span>;
        
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Builder</span><span class="hljs-params">(<span class="hljs-type">String</span> host, <span class="hljs-type">int</span> port)</span> </span>{
            <span class="hljs-keyword">this</span>.host = host;
            <span class="hljs-keyword">this</span>.port = port;
        }
        
        <span class="hljs-function"><span class="hljs-keyword">public</span> Builder <span class="hljs-title">timeout</span><span class="hljs-params">(<span class="hljs-type">int</span> timeout)</span> </span>{
            <span class="hljs-keyword">this</span>.timeout = timeout;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        }
        
        <span class="hljs-function"><span class="hljs-keyword">public</span> Builder <span class="hljs-title">sslEnabled</span><span class="hljs-params">(<span class="hljs-type">boolean</span> sslEnabled)</span> </span>{
            <span class="hljs-keyword">this</span>.sslEnabled = sslEnabled;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        }
        
        <span class="hljs-function"><span class="hljs-keyword">public</span> Config <span class="hljs-title">build</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-comment">// éªŒè¯é€»è¾‘</span>
            <span class="hljs-keyword">if</span> (host == null || host.<span class="hljs-built_in">trim</span>().<span class="hljs-built_in">isEmpty</span>()) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalArgumentException</span>(<span class="hljs-string">"Hostä¸èƒ½ä¸ºç©º"</span>);
            }
            <span class="hljs-keyword">if</span> (port &lt;= <span class="hljs-number">0</span> || port &gt; <span class="hljs-number">65535</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalArgumentException</span>(<span class="hljs-string">"ç«¯å£æ— æ•ˆ"</span>);
            }
            <span class="hljs-keyword">if</span> (timeout &lt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalArgumentException</span>(<span class="hljs-string">"è¶…æ—¶æ—¶é—´ä¸èƒ½ä¸ºè´Ÿ"</span>);
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Config</span>(<span class="hljs-keyword">this</span>);
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>{
        Config config = <span class="hljs-keyword">new</span> Config.<span class="hljs-built_in">Builder</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">8080</span>)
            .<span class="hljs-built_in">timeout</span>(<span class="hljs-number">10000</span>)
            .<span class="hljs-built_in">sslEnabled</span>(<span class="hljs-literal">true</span>)
            .<span class="hljs-built_in">build</span>();
    }
}
</code></pre>
<h3 data-id="heading-18"><strong>å®è·µ3ï¼šä½¿ç”¨æ¥å£è¿›ä¸€æ­¥å°è£…</strong></h3>
<p>java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¥å£å®šä¹‰å¥‘çº¦</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserRepository</span> {
    User <span class="hljs-title function_">findById</span><span class="hljs-params">(String id)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(User user)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete</span><span class="hljs-params">(String id)</span>;
    List&lt;User&gt; <span class="hljs-title function_">findAll</span><span class="hljs-params">()</span>;
}

<span class="hljs-comment">// å®ç°ç±»éšè—å®ç°ç»†èŠ‚</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseUserRepository</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserRepository</span> {
    <span class="hljs-keyword">private</span> DataSource dataSource;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"users"</span>;
    
    <span class="hljs-comment">// éšè—æ•°æ®åº“è¿æ¥ç»†èŠ‚</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DatabaseUserRepository</span><span class="hljs-params">(DataSource dataSource)</span> {
        <span class="hljs-built_in">this</span>.dataSource = dataSource;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findById</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-comment">// å¤æ‚çš„æ•°æ®åº“æŸ¥è¯¢é€»è¾‘</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> dataSource.getConnection()) {
            <span class="hljs-comment">// SQLæŸ¥è¯¢...</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();  <span class="hljs-comment">// è¿”å›ç»“æœ</span>
        } <span class="hljs-keyword">catch</span> (SQLException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RepositoryException</span>(<span class="hljs-string">"æŸ¥è¯¢å¤±è´¥"</span>, e);
        }
    }
    
    <span class="hljs-comment">// å…¶ä»–å®ç°...</span>
}

<span class="hljs-comment">// ä½¿ç”¨æ–¹åªå…³å¿ƒæ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">private</span> UserRepository userRepository;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserService</span><span class="hljs-params">(UserRepository userRepository)</span> {
        <span class="hljs-built_in">this</span>.userRepository = userRepository;
    }
    
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-keyword">return</span> userRepository.findById(id);
    }
}
</code></pre>
<h2 data-id="heading-19">ğŸ“Š å°è£…æ€»ç»“è¡¨</h2>









































<table><thead><tr><th>å°è£…çº§åˆ«</th><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>å­—æ®µç§æœ‰åŒ–</strong></td><td>ä½¿ç”¨privateä¿®é¥°å­—æ®µ</td><td>é˜²æ­¢å¤–éƒ¨ç›´æ¥ä¿®æ”¹</td><td>éœ€è¦æä¾›getter/setter</td></tr><tr><td><strong>æ–¹æ³•å…¬æœ‰åŒ–</strong></td><td>é€šè¿‡publicæ–¹æ³•è®¿é—®</td><td>å¯ä»¥æ·»åŠ éªŒè¯é€»è¾‘</td><td>å¯èƒ½æ–¹æ³•è¿‡å¤š</td></tr><tr><td><strong>è¿”å›å‰¯æœ¬</strong></td><td>getterè¿”å›å¯¹è±¡å‰¯æœ¬</td><td>ä¿æŠ¤å†…éƒ¨æ•°æ®</td><td>æ€§èƒ½å¼€é”€</td></tr><tr><td><strong>ä¸å¯å˜å¯¹è±¡</strong></td><td>ä½¿ç”¨finalå­—æ®µ</td><td>çº¿ç¨‹å®‰å…¨ï¼ŒçŠ¶æ€å›ºå®š</td><td>ä¿®æ”¹éœ€è¦åˆ›å»ºæ–°å¯¹è±¡</td></tr><tr><td><strong>æ¥å£å°è£…</strong></td><td>é€šè¿‡æ¥å£æš´éœ²åŠŸèƒ½</td><td>éšè—å®ç°ï¼Œæ˜“äºæ›¿æ¢</td><td>å¢åŠ å¤æ‚åº¦</td></tr></tbody></table>
<h2 data-id="heading-20">ğŸ“ å°è£…åŸåˆ™æ€»ç»“</h2>
<ol>
<li><strong>æœ€å°åŒ–è®¿é—®æƒé™</strong>ï¼šä½¿ç”¨æœ€ä¸¥æ ¼çš„è®¿é—®ä¿®é¥°ç¬¦</li>
<li><strong>æš´éœ²æœ€å°‘æ¥å£</strong>ï¼šåªæä¾›å¿…è¦çš„æ–¹æ³•</li>
<li><strong>é˜²å¾¡æ€§ç¼–ç¨‹</strong>ï¼šéªŒè¯è¾“å…¥ï¼Œè¿”å›å‰¯æœ¬</li>
<li><strong>ä¿æŒç®€å•</strong>ï¼šGetter/Setteråº”è¯¥ç®€å•ç›´æ¥</li>
<li><strong>è€ƒè™‘ä¸å¯å˜æ€§</strong>ï¼šå°½å¯èƒ½ä½¿ç”¨finalå­—æ®µ</li>
<li><strong>ä½¿ç”¨æ¥å£</strong>ï¼šè¿›ä¸€æ­¥éšè—å®ç°ç»†èŠ‚</li>
<li><strong>æ–‡æ¡£åŒ–çº¦æŸ</strong>ï¼šç”¨æ–‡æ¡£è¯´æ˜ä½¿ç”¨é™åˆ¶</li>
</ol>
<p>è®°ä½ï¼š<strong>å°è£…ä¸æ˜¯éšè—å¤æ‚æ€§ï¼Œè€Œæ˜¯ç®¡ç†å¤æ‚æ€§</strong>ã€‚å¥½çš„å°è£…è®©ç±»æ›´æ˜“äºä½¿ç”¨ã€ç»´æŠ¤å’Œæ‰©å±•ï¼ŒåŒæ—¶ä¿æŠ¤å†…éƒ¨çŠ¶æ€ä¸è¢«æ„å¤–ç ´åã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡è¯·æ±‚ Request failed with status code 400çš„è§£å†³ä¹‹æ—…]]></title>    <link>https://juejin.cn/post/7578803491821322267</link>    <guid>https://juejin.cn/post/7578803491821322267</guid>    <pubDate>2025-12-02T02:27:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578803491821322267" data-draft-id="7578732288516538419" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡è¯·æ±‚ Request failed with status code 400çš„è§£å†³ä¹‹æ—…"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T02:27:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¹¼å„¿å›­çš„æ‰›æŠŠå­"/> <meta itemprop="url" content="https://juejin.cn/user/976022053068199"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡è¯·æ±‚ Request failed with status code 400çš„è§£å†³ä¹‹æ—…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976022053068199/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¹¼å„¿å›­çš„æ‰›æŠŠå­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:27:22.000Z" title="Tue Dec 02 2025 02:27:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åœ¨é¡¹ç›®å¼€å‘ä¸­é‡åˆ°ä¸€ä¸ªå¥‡æ€ªçš„é—®é¢˜ï¼Œå°±æ˜¯æŸäº›è¯·æ±‚åœ¨é¦–é¡µæ—¶å‘é€å’Œæ¥æ”¶æ­£å¸¸ï¼Œåœ¨è¯¦æƒ…é¡µä¸­è¯·æ±‚ä¼šæŠ¥400é”™è¯¯ã€‚æ’æŸ¥å‚æ•°ä¿¡æ¯å‘ç°ï¼Œä¸¤è€…ä¼ é€’çš„å‚æ•°ä¸€è‡´ã€‚ç„¶ååˆå¯¹è¯·æ±‚è¿›è¡Œçš„å¯¹æ¯”ï¼Œå‘ç°è¯¦æƒ…é¡µä¸­çš„Refererä¸­åŒ…å«äº†é¡µé¢ä¼ é€’çš„å‚æ•°ä¸­ï¼Œæœ‰"<em>"ã€‚æ­£æ˜¯è¯·æ±‚ä¸­çš„Refereræºå¸¦çš„ "</em>"ï¼Œä¼šå¯¼è‡´è¯·æ±‚æŠ¥ 400ã€‚</p>
<h3 data-id="heading-0">è§£å†³æ€è·¯</h3>
<p>Referer ä¸­åŒ…å« <code>*</code> å¯¼è‡´è¯·æ±‚æŠ¥ 400ï¼ˆBad Requestï¼‰ï¼Œæ ¸å¿ƒåŸå› æ˜¯ <strong><code>*</code></strong> <strong>å±äº HTTP åè®®ä¸­ Referer å¤´çš„éæ³•å­—ç¬¦</strong>ï¼Œæˆ–æœåŠ¡å™¨ç«¯å¯¹ Referer æ ¼å¼åšäº†ä¸¥æ ¼æ ¡éªŒï¼ˆæ¯”å¦‚æ­£åˆ™åŒ¹é…æ‹’ç»å«é€šé…ç¬¦çš„ Refererï¼‰ã€‚</p>
<p>å‘ç°é—®é¢˜åï¼Œç¬¬ä¸€æ—¶é—´æƒ³èµ·ï¼Œæ‰‹åŠ¨ä¿®æ”¹headerä¸­çš„Refererï¼Œ</p>
<pre><code class="hljs language-arduino" lang="arduino">  <span class="hljs-comment">// å¼ºåˆ¶è¦†ç›–æµè§ˆå™¨çš„ referer å‚æ•°</span>
  <span class="hljs-comment">// æ³¨æ„ï¼šæŸäº›æµè§ˆå™¨å¯èƒ½ä¼šå¿½ç•¥æˆ–é™åˆ¶å¯¹ Referer å¤´çš„ä¿®æ”¹</span>
  <span class="hljs-type">const</span> customReferer = location.origin + location.pathname
  <span class="hljs-comment">// eslint-disable-next-line dot-notation</span>
  config.headers[<span class="hljs-string">'Referer'</span>] = customReferer
  <span class="hljs-comment">// eslint-disable-next-line dot-notation</span>
  config.headers[<span class="hljs-string">'referer'</span>] = customReferer
</code></pre>
<p>ä¿®æ”¹åå‘ç°ï¼Œè¯·æ±‚æ˜¯ä¸æŠ¥é”™äº†ï¼Œä½†æ˜¯æ§åˆ¶å°ä¼šæœ‰æ–°çš„æç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce63be70323543caa9aca76e68c95d52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bm85YS_5Zut55qE5omb5oqK5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765248511&amp;x-signature=OeRr0D1SUyAVE4fntgbwsxzCwt0%3D" alt="error" loading="lazy"/></p>
<p><code>Refused to set unsafe header "Referer"</code> æ˜¯<strong>æµè§ˆå™¨çš„å®‰å…¨é™åˆ¶</strong>å¯¼è‡´çš„ï¼šæ ¹æ® HTTP è§„èŒƒå’Œæµè§ˆå™¨çš„åŒæºç­–ç•¥ / å®‰å…¨æœºåˆ¶ï¼Œ<code>Referer</code> å±äºã€Œå—ä¿æŠ¤çš„è¯·æ±‚å¤´ã€â€”â€” æµè§ˆå™¨ç¦æ­¢å‰ç«¯ JavaScript ä»£ç <strong>æ‰‹åŠ¨ä¿®æ”¹ / è®¾ç½®</strong>è¿™ä¸ªå¤´ï¼Œä»…å…è®¸æµè§ˆå™¨æ ¹æ®å½“å‰é¡µé¢ URL è‡ªåŠ¨ç”Ÿæˆï¼Œç›®çš„æ˜¯é˜²æ­¢æ¶æ„è„šæœ¬ä¼ªé€ æ¥æºåœ°å€ã€‚</p>
<p>äºæ˜¯å†æ¬¡æ›´æ¢æ–¹æ¡ˆï¼Œæ—¢ç„¶æŠ¥é”™çš„åŸå› æ˜¯ç”±äºRefererä¸­æºå¸¦"<em>"å¯¼è‡´ï¼Œé‚£å°±å¯¹"</em>"è¿›è¡Œå¤„ç†ï¼ŒRefereræ˜¯å–å€¼çš„å½“å‰çš„é“¾æ¥åœ°å€ï¼Œé‚£å°±åœ¨è·³è½¬å‰å¯¹å‚æ•°è¿›è¡Œencodeã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-string">`&amp;params=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-built_in">JSON</span>.stringify(params))}</span>`</span>
</code></pre>
<p>é—®é¢˜è§£å†³ã€‚</p>
<h3 data-id="heading-1">å…¶ä»–è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-2">1.  æ§åˆ¶ Referer ä¸å‘é€ï¼ˆæœ€ç®€å•ï¼Œå…œåº•æ–¹æ¡ˆï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å®Œå…¨ä¸å‘é€ Referer å¤´ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"referrer"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"no-referrer"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å¯é€‰ï¼šä»…åŒæºè¯·æ±‚å‘é€ Refererï¼Œè·¨åŸŸä¸å‘é€ï¼ˆæ›´çµæ´»ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"referrer"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"same-origin"</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">2.  å•ä¸ªè¯·æ±‚ç”Ÿæ•ˆï¼ˆç²¾å‡†æ§åˆ¶ï¼‰</h4>
<p>é’ˆå¯¹ç‰¹å®šè¯·æ±‚é…ç½® <code>referrerPolicy</code>ï¼ˆä¼˜å…ˆçº§é«˜äº meta æ ‡ç­¾ï¼‰ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">axios</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'https://ç›®æ ‡æ¥å£åœ°å€'</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET/POST'</span>,
    // axios éœ€é€šè¿‡ referrerPolicy é…ç½®ï¼ˆéƒ¨åˆ†ç‰ˆæœ¬éœ€é…åˆ headers æ¸…ç©ºï¼‰
    <span class="hljs-attr">referrerPolicy</span>: <span class="hljs-string">'no-referrer'</span>,
    <span class="hljs-attr">headers</span>: {
        // ä¸è¦æ‰‹åŠ¨è®¾ç½® Refererï¼Œç•™ç©ºæˆ–åˆ é™¤
        <span class="hljs-attr">Referer</span>: undefined 
  }})
</code></pre>

<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">fetch</span>(<span class="hljs-string">'https://ç›®æ ‡æ¥å£åœ°å€'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET/POST'</span>,
    // å…³é”®ï¼šè®¾ç½® Referer ç­–ç•¥ï¼Œç¦æ­¢å‘é€ 
    <span class="hljs-attr">RefererreferrerPolicy</span>: <span class="hljs-string">'no-referrer'</span>, 
      // æ³¨æ„ï¼šåˆ é™¤æ‰‹åŠ¨è®¾ç½®çš„ Referer å¤´ï¼// 
      <span class="hljs-attr">headers</span>: { <span class="hljs-attr">Referer</span>: <span class="hljs-string">'xxx'</span> }  // âŒ è¦åˆ æ‰è¿™è¡Œ
})
</code></pre>
<h4 data-id="heading-4">3.  æœåŠ¡ç«¯å¤„ç†</h4>
<h5 data-id="heading-5">3.1 Nginxé…ç½®æ”¹é€ </h5>
<p>Nginx é»˜è®¤ä¼šæ‹’ç»å«éæ³•å­—ç¬¦çš„ Referer å¤´ï¼Œæˆ– <code>valid_referers</code> è§„åˆ™åŒ¹é…å¤±è´¥è¿”å› 400/403ã€‚è§£å†³æ–¹æ³•ï¼š</p>
<ul>
<li><strong>è·³è¿‡ Referer éæ³•å­—ç¬¦æ ¡éªŒ</strong></li>
</ul>

<pre><code class="hljs language-ini" lang="ini">        <span class="hljs-comment"># å…³é—­éæ³• header æ£€æŸ¥ï¼ˆå…è®¸å«*çš„ Referer è¿›å…¥ä¸šåŠ¡é€»è¾‘ï¼‰</span>
        ignore_invalid_headers off<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li><strong>æ”¾å®½ valid_referers è§„åˆ™</strong></li>
</ul>
<p>è‹¥ç”¨ <code>valid_referers</code> åšé˜²ç›—é“¾ï¼Œè°ƒæ•´è§„åˆ™å…¼å®¹å« <code>*</code> çš„ Refererï¼š</p>
<pre><code class="hljs language-bash" lang="bash">        location / {
            <span class="hljs-comment"># å…è®¸ç©º Refererã€æŒ‡å®šåŸŸåã€å«*çš„ Refererï¼ˆç”¨~* æ­£åˆ™åŒ¹é…ï¼‰</span>
            valid_referers none blocked server_names ~*.example.com ~*/*;
            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$invalid_referer</span>) {
                <span class="hljs-comment"># æ³¨é‡Šæ‰ return 403/400ï¼Œæˆ–æ”¹ä¸ºæ—¥å¿—è®°å½•è€Œéæ‹’ç»</span>
                <span class="hljs-comment"># return 400;</span>
                access_log /var/log/nginx/invalid_referer.log warn;
                }
            }
</code></pre>
<h5 data-id="heading-6">3.2  ApacheæœåŠ¡å™¨</h5>
<ul>
<li>å…³é—­ RequestHeaderä¸¥æ ¼æ ¡éªŒ</li>
</ul>

<pre><code class="hljs language-bash" lang="bash">            <span class="hljs-comment"># åœ¨ httpd.conf æˆ– .htaccess ä¸­</span>
            AcceptPathInfo On
            <span class="hljs-comment"># æˆ–ç¦ç”¨ Referer æ ¡éªŒæ¨¡å—ï¼ˆè‹¥å¯ç”¨äº† mod_rewrite æ ¡éªŒ Refererï¼‰</span>
            RewriteEngine Off  <span class="hljs-comment"># ä¸´æ—¶å…³é—­ï¼Œæˆ–è°ƒæ•´ RewriteRule å¿½ç•¥*</span>
</code></pre>
<ul>
<li>è‹¥ç”¨ <code>mod_rewrite</code> æ ¡éªŒ Refererï¼Œä¿®æ”¹è§„åˆ™å…¼å®¹ <code>*</code>ï¼š</li>
</ul>

<pre><code class="hljs language-perl" lang="perl">            RewriteCond %{HTTP_REFERER} !^https:<span class="hljs-regexp">//</span>example.com/.* [NC]
            <span class="hljs-comment"># æ”¹ä¸ºï¼ˆå…è®¸*ï¼‰</span>
            RewriteCond %{HTTP_REFERER} !^https:<span class="hljs-regexp">//</span>example.com/[^\n]* [NC]
</code></pre>
<h4 data-id="heading-7">3.3  åç«¯åº”ç”¨é…ç½®</h4>
<p>æ‹¿Javaä¸¾ä¾‹:</p>
<pre><code class="hljs language-ini" lang="ini">            &lt;Connector <span class="hljs-attr">port</span>=<span class="hljs-string">"8080"</span> protocol=<span class="hljs-string">"HTTP/1.1"</span>
                       <span class="hljs-attr">connectionTimeout</span>=<span class="hljs-string">"20000"</span>
                       <span class="hljs-attr">redirectPort</span>=<span class="hljs-string">"8443"</span>
                       <span class="hljs-attr">relaxedPathChars</span>=<span class="hljs-string">"[]|{}^&amp;#x5c;&amp;#x60;&amp;quot;&amp;lt;&amp;gt;*"</span>  <span class="hljs-comment"># åŠ å…¥*</span>
                       <span class="hljs-attr">relaxedQueryChars</span>=<span class="hljs-string">"[]|{}^&amp;#x5c;&amp;#x60;&amp;quot;&amp;lt;&amp;gt;*"</span> /&gt;
</code></pre>
<p>Spring Boot å¯é€šè¿‡é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">        <span class="hljs-comment"># application.properties</span>
        <span class="hljs-attr">server.tomcat.relaxed-path-chars</span>=*
        <span class="hljs-attr">server.tomcat.relaxed-query-chars</span>=*
</code></pre>
<h3 data-id="heading-8">æ€»ç»“</h3>
<ol>
<li>å‘èµ·æ–¹ï¼šç§»é™¤ / ç¼–ç  <code>*</code>ï¼Œæˆ–ä¸å‘é€ Refererï¼›</li>
<li>æ¥æ”¶æ–¹ï¼šæ”¾å®½æœåŠ¡å™¨å¯¹ Referer çš„å­—ç¬¦æ ¡éªŒï¼ˆNginx/Tomcat é…ç½®ï¼‰ï¼Œæˆ–å¿½ç•¥å« <code>*</code> çš„ Referer æ ¡éªŒï¼›</li>
<li>æ ¸å¿ƒåŸåˆ™ï¼šéµå¾ª HTTP æ ‡å‡†ï¼Œé¿å…åœ¨ Referer ä¸­ä½¿ç”¨éæ³•å­—ç¬¦ï¼Œæ”¹ç”¨åˆæ³•æ ¼å¼æˆ–è‡ªå®šä¹‰å¤´ä¼ é€’é€šé…è¯­ä¹‰ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬5ç« ï¼šå®¹å™¨ç±»ç»„ä»¶ â€”â€” 5.1 å¡«å……ï¼ˆPaddingï¼‰]]></title>    <link>https://juejin.cn/post/7578767608630575104</link>    <guid>https://juejin.cn/post/7578767608630575104</guid>    <pubDate>2025-12-02T02:27:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578767608630575104" data-draft-id="7578794217961078824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬5ç« ï¼šå®¹å™¨ç±»ç»„ä»¶ â€”â€” 5.1 å¡«å……ï¼ˆPaddingï¼‰"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-12-02T02:27:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ—§æ—¶å…‰_"/> <meta itemprop="url" content="https://juejin.cn/user/4442458669718279"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬5ç« ï¼šå®¹å™¨ç±»ç»„ä»¶ â€”â€” 5.1 å¡«å……ï¼ˆPaddingï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4442458669718279/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ—§æ—¶å…‰_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:27:32.000Z" title="Tue Dec 02 2025 02:27:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">5.1 å¡«å……ï¼ˆPaddingï¼‰</h2>
<h3 data-id="heading-1">ğŸ“š ç« èŠ‚æ¦‚è§ˆ</h3>
<p>æ¬¢è¿æ¥åˆ°ç¬¬5ç« ï¼šå®¹å™¨ç±»ç»„ä»¶ï¼æœ¬ç« ç¬¬ä¸€èŠ‚å°†å­¦ä¹  <code>Padding</code> ç»„ä»¶ï¼Œå®ƒæ˜¯æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„å®¹å™¨ç±»ç»„ä»¶ä¹‹ä¸€ï¼š</p>
<ul>
<li><strong>Padding</strong> - å¡«å……ç»„ä»¶</li>
<li><strong>EdgeInsets</strong> - è¾¹è·è®¾ç½®ç±»</li>
<li><strong>all</strong> - æ‰€æœ‰æ–¹å‘ç›¸åŒå¡«å……</li>
<li><strong>only</strong> - æŒ‡å®šæŸä¸ªæ–¹å‘å¡«å……</li>
<li><strong>symmetric</strong> - å¯¹ç§°æ–¹å‘å¡«å……</li>
<li><strong>fromLTRB</strong> - åˆ†åˆ«æŒ‡å®šå››ä¸ªæ–¹å‘</li>
<li><strong>å®é™…åº”ç”¨</strong> - å¸¸è§ä½¿ç”¨åœºæ™¯</li>
</ul>
<hr/>
<h3 data-id="heading-2">ğŸ¯ æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3>
<h4 data-id="heading-3">Padding vs Margin</h4>
<p>åœ¨Flutterä¸­ï¼Œ<code>Padding</code> ç”¨äºè®¾ç½®å†…è¾¹è·ï¼ˆç±»ä¼¼CSSçš„paddingï¼‰ï¼Œè€Œå¤–è¾¹è·é€šå¸¸é€šè¿‡Containerçš„marginå±æ€§æˆ–è€…å¤–å±‚Paddingæ¥å®ç°ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   <span class="hljs-attribute">Margin</span> (å¤–)    â”‚  â† Containerçš„<span class="hljs-attribute">margin</span>æˆ–å¤–å±‚<span class="hljs-attribute">Padding</span>
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ <span class="hljs-attribute">Padding</span>(å†…)â”‚  â”‚  â† <span class="hljs-attribute">Padding</span>ç»„ä»¶
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚Child â”‚  â”‚  â”‚  â† å­ç»„ä»¶
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h3 data-id="heading-4">1ï¸âƒ£ Paddingï¼ˆå¡«å……ç»„ä»¶ï¼‰</h3>
<h4 data-id="heading-5">1.1 æ„é€ å‡½æ•°</h4>
<pre><code class="hljs language-dart" lang="dart">Padding({
  Key? key,
  <span class="hljs-keyword">required</span> EdgeInsetsGeometry padding,
  Widget? child,
})
</code></pre>
<h4 data-id="heading-6">1.2 ä¸»è¦å±æ€§</h4>




















<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>padding</code></td><td>EdgeInsetsGeometry</td><td>å¡«å……å€¼ï¼ˆå¿…éœ€ï¼‰</td></tr><tr><td><code>child</code></td><td>Widget?</td><td>å­ç»„ä»¶</td></tr></tbody></table>
<h4 data-id="heading-7">1.3 åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-dart" lang="dart">Padding(
  padding: EdgeInsets.all(<span class="hljs-number">16</span>),
  child: Text(<span class="hljs-string">'Hello World'</span>),
)
</code></pre>
<hr/>
<h3 data-id="heading-8">2ï¸âƒ£ EdgeInsetsï¼ˆè¾¹è·è®¾ç½®ï¼‰</h3>
<h4 data-id="heading-9">2.1 ä»€ä¹ˆæ˜¯EdgeInsets</h4>
<p><code>EdgeInsets</code> æ˜¯ <code>EdgeInsetsGeometry</code> çš„å­ç±»ï¼Œæä¾›äº†å¤šç§ä¾¿æ·æ–¹æ³•æ¥è®¾ç½®å¡«å……å€¼ã€‚</p>
<h4 data-id="heading-10">2.2 å››ä¸ªä¾¿æ·æ–¹æ³•</h4>
<h5 data-id="heading-11">1. all - æ‰€æœ‰æ–¹å‘ç›¸åŒ</h5>
<pre><code class="hljs language-dart" lang="dart">EdgeInsets.all(<span class="hljs-built_in">double</span> value)
</code></pre>
<p><strong>ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-dart" lang="dart">Padding(
  padding: EdgeInsets.all(<span class="hljs-number">16</span>),  <span class="hljs-comment">// ä¸Šä¸‹å·¦å³éƒ½æ˜¯16</span>
  child: Text(<span class="hljs-string">'Allæ–¹å‘å¡«å……'</span>),
)
</code></pre>
<p><strong>ç­‰ä»·äºï¼š</strong></p>
<pre><code class="hljs language-dart" lang="dart">EdgeInsets.fromLTRB(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>)
</code></pre>
<h5 data-id="heading-12">2. only - æŒ‡å®šæŸä¸ªæ–¹å‘</h5>
<pre><code class="hljs language-dart" lang="dart">EdgeInsets.only({
  <span class="hljs-built_in">double</span> left = <span class="hljs-number">0.0</span>,
  <span class="hljs-built_in">double</span> top = <span class="hljs-number">0.0</span>,
  <span class="hljs-built_in">double</span> right = <span class="hljs-number">0.0</span>,
  <span class="hljs-built_in">double</span> bottom = <span class="hljs-number">0.0</span>,
})
</code></pre>
<p><strong>ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// åªè®¾ç½®å·¦è¾¹</span>
Padding(
  padding: EdgeInsets.only(left: <span class="hljs-number">8</span>),
  child: Text(<span class="hljs-string">'å·¦ä¾§å¡«å……'</span>),
)

<span class="hljs-comment">// åŒæ—¶è®¾ç½®å¤šä¸ªæ–¹å‘</span>
Padding(
  padding: EdgeInsets.only(left: <span class="hljs-number">20</span>, right: <span class="hljs-number">20</span>),
  child: Text(<span class="hljs-string">'å·¦å³å¡«å……'</span>),
)
</code></pre>
<h5 data-id="heading-13">3. symmetric - å¯¹ç§°æ–¹å‘</h5>
<pre><code class="hljs language-dart" lang="dart">EdgeInsets.symmetric({
  <span class="hljs-built_in">double</span> vertical = <span class="hljs-number">0.0</span>,    <span class="hljs-comment">// ä¸Šä¸‹</span>
  <span class="hljs-built_in">double</span> horizontal = <span class="hljs-number">0.0</span>,  <span class="hljs-comment">// å·¦å³</span>
})
</code></pre>
<p><strong>ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// åªè®¾ç½®ä¸Šä¸‹</span>
Padding(
  padding: EdgeInsets.symmetric(vertical: <span class="hljs-number">8</span>),
  child: Text(<span class="hljs-string">'ä¸Šä¸‹å¡«å……'</span>),
)

<span class="hljs-comment">// åŒæ—¶è®¾ç½®ä¸Šä¸‹å’Œå·¦å³</span>
Padding(
  padding: EdgeInsets.symmetric(
    vertical: <span class="hljs-number">12</span>,
    horizontal: <span class="hljs-number">20</span>,
  ),
  child: Text(<span class="hljs-string">'å¯¹ç§°å¡«å……'</span>),
)
</code></pre>
<h5 data-id="heading-14">4. fromLTRB - å››ä¸ªæ–¹å‘åˆ†åˆ«æŒ‡å®š</h5>
<pre><code class="hljs language-dart" lang="dart">EdgeInsets.fromLTRB(
  <span class="hljs-built_in">double</span> left,
  <span class="hljs-built_in">double</span> top,
  <span class="hljs-built_in">double</span> right,
  <span class="hljs-built_in">double</span> bottom,
)
</code></pre>
<p><strong>ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-dart" lang="dart">Padding(
  padding: EdgeInsets.fromLTRB(<span class="hljs-number">20</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>),
  child: Text(<span class="hljs-string">'å››ä¸ªæ–¹å‘ä¸åŒå€¼'</span>),
)
</code></pre>
<h4 data-id="heading-15">2.3 æ–¹æ³•å¯¹æ¯”</h4>






























<table><thead><tr><th>æ–¹æ³•</th><th>å‚æ•°</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>all</strong></td><td>1ä¸ª</td><td>æ‰€æœ‰æ–¹å‘ç›¸åŒ</td></tr><tr><td><strong>only</strong></td><td>1-4ä¸ª</td><td>æŒ‡å®šæŸäº›æ–¹å‘</td></tr><tr><td><strong>symmetric</strong></td><td>1-2ä¸ª</td><td>å¯¹ç§°è®¾ç½®</td></tr><tr><td><strong>fromLTRB</strong></td><td>4ä¸ª</td><td>å››ä¸ªæ–¹å‘éƒ½ä¸åŒ</td></tr></tbody></table>
<h4 data-id="heading-16">2.4 é€‰æ‹©å»ºè®®</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// âœ… æ¨èï¼šç®€æ´æ˜äº†</span>
EdgeInsets.all(<span class="hljs-number">16</span>)                    <span class="hljs-comment">// å››ä¸ªæ–¹å‘ç›¸åŒ</span>
EdgeInsets.symmetric(horizontal: <span class="hljs-number">16</span>)  <span class="hljs-comment">// å·¦å³ç›¸åŒ</span>
EdgeInsets.only(left: <span class="hljs-number">16</span>)            <span class="hljs-comment">// åªè®¾ç½®ä¸€ä¸ª</span>

<span class="hljs-comment">// âŒ ä¸æ¨èï¼šè¿‡äºç¹ç</span>
EdgeInsets.fromLTRB(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>)  <span class="hljs-comment">// åº”è¯¥ç”¨all(16)</span>
EdgeInsets.fromLTRB(<span class="hljs-number">16</span>, <span class="hljs-number">0</span>, <span class="hljs-number">16</span>, <span class="hljs-number">0</span>)    <span class="hljs-comment">// åº”è¯¥ç”¨symmetric(horizontal: 16)</span>
</code></pre>
<hr/>
<h3 data-id="heading-17">3ï¸âƒ£ è¯¦ç»†ç¤ºä¾‹</h3>
<h4 data-id="heading-18">3.1 allç¤ºä¾‹</h4>
<pre><code class="hljs language-dart" lang="dart">Container(
  color: Colors.blue[<span class="hljs-number">100</span>],
  child: Padding(
    padding: EdgeInsets.all(<span class="hljs-number">16</span>),
    child: Container(
      color: Colors.white,
      child: Text(<span class="hljs-string">'16åƒç´ å¡«å……'</span>),
    ),
  ),
)
</code></pre>
<p><strong>æ•ˆæœï¼š</strong></p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚  â† è“è‰²èƒŒæ™¯ï¼ˆå¤–å±‚Containerï¼‰
â”‚ â–ˆâ–ˆâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â–ˆâ–ˆ â”‚
â”‚ â–ˆâ–ˆâ”‚ 16pxå¡«å…… â”‚â–ˆâ–ˆ â”‚  â† ç™½è‰²èƒŒæ™¯ï¼ˆå†…å±‚Containerï¼‰
â”‚ â–ˆâ–ˆâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â–ˆâ–ˆ â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-19">3.2 onlyç¤ºä¾‹</h4>
<pre><code class="hljs language-dart" lang="dart">Column(
  children: [
    <span class="hljs-comment">// åªè®¾ç½®å·¦è¾¹</span>
    Padding(
      padding: EdgeInsets.only(left: <span class="hljs-number">8</span>),
      child: Text(<span class="hljs-string">"Hello world"</span>),
    ),
    
    <span class="hljs-comment">// åªè®¾ç½®ä¸Šä¸‹</span>
    Padding(
      padding: EdgeInsets.only(top: <span class="hljs-number">8</span>, bottom: <span class="hljs-number">8</span>),
      child: Text(<span class="hljs-string">"I am Jack"</span>),
    ),
    
    <span class="hljs-comment">// è®¾ç½®å·¦å³</span>
    Padding(
      padding: EdgeInsets.only(left: <span class="hljs-number">20</span>, right: <span class="hljs-number">20</span>),
      child: Text(<span class="hljs-string">"Your friend"</span>),
    ),
  ],
)
</code></pre>
<h4 data-id="heading-20">3.3 symmetricç¤ºä¾‹</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ä¸Šä¸‹å¡«å……</span>
Padding(
  padding: EdgeInsets.symmetric(vertical: <span class="hljs-number">16</span>),
  child: Text(<span class="hljs-string">'ä¸Šä¸‹å„16åƒç´ '</span>),
)

<span class="hljs-comment">// å·¦å³å¡«å……</span>
Padding(
  padding: EdgeInsets.symmetric(horizontal: <span class="hljs-number">24</span>),
  child: Text(<span class="hljs-string">'å·¦å³å„24åƒç´ '</span>),
)

<span class="hljs-comment">// åŒæ—¶è®¾ç½®</span>
Padding(
  padding: EdgeInsets.symmetric(
    vertical: <span class="hljs-number">12</span>,
    horizontal: <span class="hljs-number">20</span>,
  ),
  child: Text(<span class="hljs-string">'ä¸Šä¸‹12ï¼Œå·¦å³20'</span>),
)
</code></pre>
<h4 data-id="heading-21">3.4 fromLTRBç¤ºä¾‹</h4>
<pre><code class="hljs language-dart" lang="dart">Padding(
  padding: EdgeInsets.fromLTRB(<span class="hljs-number">20</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>),
  child: Column(
    crossAxisAlignment: CrossAxisAlignment.start,
    children: [
      Text(<span class="hljs-string">'å·¦ï¼š20åƒç´ '</span>),
      Text(<span class="hljs-string">'ä¸Šï¼š10åƒç´ '</span>),
      Text(<span class="hljs-string">'å³ï¼š20åƒç´ '</span>),
      Text(<span class="hljs-string">'ä¸‹ï¼š30åƒç´ '</span>),
    ],
  ),
)
</code></pre>
<hr/>
<h3 data-id="heading-22">4ï¸âƒ£ å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-23">åœºæ™¯1ï¼šå¡ç‰‡å†…å®¹å¡«å……</h4>
<pre><code class="hljs language-dart" lang="dart">Container(
  decoration: BoxDecoration(
    color: Colors.white,
    borderRadius: BorderRadius.circular(<span class="hljs-number">8</span>),
    boxShadow: [
      BoxShadow(
        color: Colors.grey.withOpacity(<span class="hljs-number">0.3</span>),
        blurRadius: <span class="hljs-number">4</span>,
        offset: Offset(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>),
      ),
    ],
  ),
  child: Padding(
    padding: EdgeInsets.all(<span class="hljs-number">16</span>),
    child: Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          <span class="hljs-string">'æ–‡ç« æ ‡é¢˜'</span>,
          style: TextStyle(
            fontSize: <span class="hljs-number">16</span>,
            fontWeight: FontWeight.bold,
          ),
        ),
        SizedBox(height: <span class="hljs-number">8</span>),
        Text(
          <span class="hljs-string">'æ–‡ç« å†…å®¹æè¿°...'</span>,
          style: TextStyle(color: Colors.grey),
        ),
      ],
    ),
  ),
)
</code></pre>
<h4 data-id="heading-24">åœºæ™¯2ï¼šæŒ‰é’®å†…è¾¹è·</h4>
<pre><code class="hljs language-dart" lang="dart">Container(
  decoration: BoxDecoration(
    color: Colors.blue,
    borderRadius: BorderRadius.circular(<span class="hljs-number">4</span>),
  ),
  child: Padding(
    padding: EdgeInsets.symmetric(
      horizontal: <span class="hljs-number">24</span>,
      vertical: <span class="hljs-number">12</span>,
    ),
    child: Text(
      <span class="hljs-string">'ç¡®å®š'</span>,
      style: TextStyle(color: Colors.white),
    ),
  ),
)
</code></pre>
<h4 data-id="heading-25">åœºæ™¯3ï¼šåˆ—è¡¨é¡¹é—´è·</h4>
<pre><code class="hljs language-dart" lang="dart">ListView.builder(
  itemCount: items.length,
  itemBuilder: (context, index) {
    <span class="hljs-keyword">return</span> Padding(
      padding: EdgeInsets.only(bottom: <span class="hljs-number">8</span>),
      child: ListTile(
        title: Text(<span class="hljs-string">'åˆ—è¡¨é¡¹ <span class="hljs-subst">$index</span>'</span>),
      ),
    );
  },
)
</code></pre>
<h4 data-id="heading-26">åœºæ™¯4ï¼šé¡µé¢æ•´ä½“å†…è¾¹è·</h4>
<pre><code class="hljs language-dart" lang="dart">Scaffold(
  body: Padding(
    padding: EdgeInsets.all(<span class="hljs-number">16</span>),
    child: Column(
      children: [
        <span class="hljs-comment">// é¡µé¢å†…å®¹</span>
      ],
    ),
  ),
)
</code></pre>
<hr/>
<h3 data-id="heading-27">ğŸ¤” å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰</h3>
<h4 data-id="heading-28">Q1: Paddingå’ŒMarginçš„åŒºåˆ«ï¼Ÿ</h4>
<p><strong>A:</strong> åœ¨Flutterä¸­ï¼š</p>




















<table><thead><tr><th>æ¦‚å¿µ</th><th>å®ç°æ–¹å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Paddingï¼ˆå†…è¾¹è·ï¼‰</strong></td><td>Paddingç»„ä»¶</td><td>å­ç»„ä»¶å†…éƒ¨çš„ç•™ç™½</td></tr><tr><td><strong>Marginï¼ˆå¤–è¾¹è·ï¼‰</strong></td><td>Container.margin</td><td>ç»„ä»¶å¤–éƒ¨çš„ç•™ç™½</td></tr></tbody></table>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Paddingï¼ˆå†…è¾¹è·ï¼‰</span>
Padding(
  padding: EdgeInsets.all(<span class="hljs-number">16</span>),
  child: Container(
    color: Colors.blue,
    child: Text(<span class="hljs-string">'Text'</span>),
  ),
)

<span class="hljs-comment">// Marginï¼ˆå¤–è¾¹è·ï¼‰</span>
Container(
  margin: EdgeInsets.all(<span class="hljs-number">16</span>),
  color: Colors.blue,
  child: Text(<span class="hljs-string">'Text'</span>),
)
</code></pre>
<h4 data-id="heading-29">Q2: EdgeInsets.zeroæ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p><strong>A:</strong> æ‰€æœ‰æ–¹å‘å¡«å……ä¸º0çš„å¿«æ·æ–¹å¼</p>
<pre><code class="hljs language-dart" lang="dart">EdgeInsets.zero  <span class="hljs-comment">// ç­‰ä»·äº EdgeInsets.all(0)</span>
</code></pre>
<h4 data-id="heading-30">Q3: å¦‚ä½•è®¾ç½®è´Ÿæ•°å¡«å……ï¼Ÿ</h4>
<p><strong>A:</strong> Paddingä¸æ”¯æŒè´Ÿæ•°ï¼Œä½†å¯ä»¥ç”¨Transform.translate</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šPaddingä¸æ”¯æŒè´Ÿæ•°</span>
Padding(
  padding: EdgeInsets.all(<span class="hljs-number">-10</span>),  <span class="hljs-comment">// ä¼šæŠ¥é”™</span>
  child: Text(<span class="hljs-string">'Text'</span>),
)

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨Transform</span>
Transform.translate(
  offset: Offset(<span class="hljs-number">-10</span>, <span class="hljs-number">-10</span>),
  child: Text(<span class="hljs-string">'Text'</span>),
)
</code></pre>
<h4 data-id="heading-31">Q4: Paddingä¼šå½±å“å­ç»„ä»¶çš„çº¦æŸå—ï¼Ÿ</h4>
<p><strong>A:</strong> ä¼šï¼Paddingä¼šå‡å°ä¼ é€’ç»™å­ç»„ä»¶çš„çº¦æŸ</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å‡è®¾çˆ¶ç»„ä»¶çº¦æŸä¸º 100Ã—100</span>
Container(
  width: <span class="hljs-number">100</span>,
  height: <span class="hljs-number">100</span>,
  child: Padding(
    padding: EdgeInsets.all(<span class="hljs-number">10</span>),
    <span class="hljs-comment">// å­ç»„ä»¶å®é™…å¯ç”¨ç©ºé—´ï¼š(100-20)Ã—(100-20) = 80Ã—80</span>
    child: Container(color: Colors.blue),
  ),
)
</code></pre>
<h4 data-id="heading-32">Q5: å¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªä¸ªEdgeInsetsæ–¹æ³•ï¼Ÿ</h4>
<p><strong>A:</strong> éµå¾ªç®€æ´åŸåˆ™ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å››ä¸ªæ–¹å‘ç›¸åŒ â†’ all</span>
EdgeInsets.all(<span class="hljs-number">16</span>)

<span class="hljs-comment">// ä¸Šä¸‹æˆ–å·¦å³ç›¸åŒ â†’ symmetric</span>
EdgeInsets.symmetric(horizontal: <span class="hljs-number">16</span>)
EdgeInsets.symmetric(vertical: <span class="hljs-number">8</span>)

<span class="hljs-comment">// åªè®¾ç½®1-3ä¸ªæ–¹å‘ â†’ only</span>
EdgeInsets.only(left: <span class="hljs-number">16</span>)
EdgeInsets.only(left: <span class="hljs-number">16</span>, right: <span class="hljs-number">16</span>)

<span class="hljs-comment">// å››ä¸ªæ–¹å‘éƒ½ä¸åŒ â†’ fromLTRB</span>
EdgeInsets.fromLTRB(<span class="hljs-number">20</span>, <span class="hljs-number">10</span>, <span class="hljs-number">15</span>, <span class="hljs-number">30</span>)
</code></pre>
<hr/>
<h3 data-id="heading-33">ğŸ¯ è·Ÿç€åšç»ƒä¹ </h3>
<h4 data-id="heading-34">ç»ƒä¹ 1ï¼šå®ç°ä¸€ä¸ªå¸¦å†…è¾¹è·çš„å¡ç‰‡ç»„ä»¶</h4>
<p><strong>ç›®æ ‡ï¼š</strong> åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰Cardç»„ä»¶ï¼Œå†…å®¹æœ‰16åƒç´ å¡«å……</p>
<p><strong>æ­¥éª¤ï¼š</strong></p>
<ol>
<li>ä½¿ç”¨Containerä½œä¸ºå¡ç‰‡èƒŒæ™¯</li>
<li>æ·»åŠ åœ†è§’å’Œé˜´å½±</li>
<li>ä½¿ç”¨Paddingè®¾ç½®å†…å®¹å¡«å……</li>
</ol>
<details>
<summary>ğŸ’¡ æŸ¥çœ‹ç­”æ¡ˆ</summary>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomCard</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> Widget child;
  
  <span class="hljs-keyword">const</span> CustomCard({<span class="hljs-keyword">super</span>.key, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.child});
  
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Container(
      decoration: BoxDecoration(
        color: Colors.white,
        borderRadius: BorderRadius.circular(<span class="hljs-number">12</span>),
        boxShadow: [
          BoxShadow(
            color: Colors.grey.withOpacity(<span class="hljs-number">0.2</span>),
            spreadRadius: <span class="hljs-number">1</span>,
            blurRadius: <span class="hljs-number">4</span>,
            offset: Offset(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>),
          ),
        ],
      ),
      child: Padding(
        padding: EdgeInsets.all(<span class="hljs-number">16</span>),
        child: child,
      ),
    );
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
CustomCard(
  child: Column(
    crossAxisAlignment: CrossAxisAlignment.start,
    children: [
      Text(
        <span class="hljs-string">'æ ‡é¢˜'</span>,
        style: TextStyle(
          fontSize: <span class="hljs-number">18</span>,
          fontWeight: FontWeight.bold,
        ),
      ),
      SizedBox(height: <span class="hljs-number">8</span>),
      Text(<span class="hljs-string">'è¿™æ˜¯å¡ç‰‡çš„å†…å®¹æè¿°...'</span>),
    ],
  ),
)
</code></pre>
</details>
<hr/>
<h4 data-id="heading-35">ç»ƒä¹ 2ï¼šå®ç°å“åº”å¼Padding</h4>
<p><strong>ç›®æ ‡ï¼š</strong> æ ¹æ®å±å¹•å®½åº¦åŠ¨æ€è°ƒæ•´Paddingå€¼</p>
<p><strong>æ­¥éª¤ï¼š</strong></p>
<ol>
<li>ä½¿ç”¨MediaQueryè·å–å±å¹•å®½åº¦</li>
<li>è®¡ç®—åˆé€‚çš„paddingå€¼</li>
<li>åº”ç”¨åŠ¨æ€padding</li>
</ol>
<details>
<summary>ğŸ’¡ æŸ¥çœ‹ç­”æ¡ˆ</summary>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ResponsivePadding</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> Widget child;
  
  <span class="hljs-keyword">const</span> ResponsivePadding({<span class="hljs-keyword">super</span>.key, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.child});
  
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">final</span> screenWidth = MediaQuery.of(context).size.width;
    
    <span class="hljs-comment">// æ ¹æ®å±å¹•å®½åº¦è®¡ç®—padding</span>
    <span class="hljs-built_in">double</span> padding;
    <span class="hljs-keyword">if</span> (screenWidth &lt; <span class="hljs-number">600</span>) {
      padding = <span class="hljs-number">16</span>;  <span class="hljs-comment">// æ‰‹æœº</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (screenWidth &lt; <span class="hljs-number">1200</span>) {
      padding = <span class="hljs-number">24</span>;  <span class="hljs-comment">// å¹³æ¿</span>
    } <span class="hljs-keyword">else</span> {
      padding = <span class="hljs-number">32</span>;  <span class="hljs-comment">// æ¡Œé¢</span>
    }
    
    <span class="hljs-keyword">return</span> Padding(
      padding: EdgeInsets.all(padding),
      child: child,
    );
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
ResponsivePadding(
  child: Text(<span class="hljs-string">'å“åº”å¼å†…å®¹'</span>),
)
</code></pre>
</details>
<hr/>
<h3 data-id="heading-36">ğŸ“‹ å°ç»“</h3>
<h4 data-id="heading-37">æ ¸å¿ƒæ¦‚å¿µ</h4>




















<table><thead><tr><th>ç»„ä»¶/ç±»</th><th>ä½œç”¨</th><th>å¸¸ç”¨æ–¹æ³•</th></tr></thead><tbody><tr><td><strong>Padding</strong></td><td>æ·»åŠ å¡«å……</td><td>paddingå±æ€§</td></tr><tr><td><strong>EdgeInsets</strong></td><td>è®¾ç½®å¡«å……å€¼</td><td>allã€onlyã€symmetricã€fromLTRB</td></tr></tbody></table>
<h4 data-id="heading-38">EdgeInsetsæ–¹æ³•é€ŸæŸ¥</h4>
<pre><code class="hljs language-dart" lang="dart">EdgeInsets.all(<span class="hljs-number">16</span>)                        <span class="hljs-comment">// æ‰€æœ‰æ–¹å‘16</span>
EdgeInsets.only(left: <span class="hljs-number">8</span>)                 <span class="hljs-comment">// åªè®¾ç½®å·¦è¾¹</span>
EdgeInsets.only(left: <span class="hljs-number">8</span>, right: <span class="hljs-number">8</span>)       <span class="hljs-comment">// è®¾ç½®å·¦å³</span>
EdgeInsets.symmetric(vertical: <span class="hljs-number">16</span>)       <span class="hljs-comment">// ä¸Šä¸‹16</span>
EdgeInsets.symmetric(horizontal: <span class="hljs-number">20</span>)     <span class="hljs-comment">// å·¦å³20</span>
EdgeInsets.symmetric(                    <span class="hljs-comment">// ä¸Šä¸‹å’Œå·¦å³</span>
  vertical: <span class="hljs-number">12</span>,
  horizontal: <span class="hljs-number">20</span>,
)
EdgeInsets.fromLTRB(<span class="hljs-number">20</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>)     <span class="hljs-comment">// å››ä¸ªæ–¹å‘åˆ†åˆ«æŒ‡å®š</span>
EdgeInsets.zero                          <span class="hljs-comment">// æ‰€æœ‰æ–¹å‘ä¸º0</span>
</code></pre>
<h4 data-id="heading-39">è®°å¿†æŠ€å·§</h4>
<ol>
<li><strong>all</strong>ï¼šallæ–¹å‘ç›¸åŒ</li>
<li><strong>only</strong>ï¼šonlyæŸäº›æ–¹å‘</li>
<li><strong>symmetric</strong>ï¼šå¯¹ç§°çš„ä¸¤ä¸ªæ–¹å‘</li>
<li><strong>fromLTRB</strong>ï¼šLeftã€Topã€Rightã€Bottomé¡ºåº</li>
</ol>
<hr/>
<h3 data-id="heading-40">ğŸ”— ç›¸å…³èµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.flutter.dev%2Fflutter%2Fwidgets%2FPadding-class.html" target="_blank" title="https://api.flutter.dev/flutter/widgets/Padding-class.html" ref="nofollow noopener noreferrer">Padding å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.flutter.dev%2Fflutter%2Fpainting%2FEdgeInsets-class.html" target="_blank" title="https://api.flutter.dev/flutter/painting/EdgeInsets-class.html" ref="nofollow noopener noreferrer">EdgeInsets å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.flutter.dev%2Fflutter%2Fpainting%2FEdgeInsetsGeometry-class.html" target="_blank" title="https://api.flutter.dev/flutter/painting/EdgeInsetsGeometry-class.html" ref="nofollow noopener noreferrer">EdgeInsetsGeometry å®˜æ–¹æ–‡æ¡£</a></li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¡¹ç›®æ€§èƒ½ä¼˜åŒ–å®è·µï¼šæ·±å…¥FMPç®—æ³•åŸç†æ¢ç´¢ï½œå¾—ç‰©æŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7578762210287255615</link>    <guid>https://juejin.cn/post/7578762210287255615</guid>    <pubDate>2025-12-02T02:45:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578762210287255615" data-draft-id="7578760341280751657" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¡¹ç›®æ€§èƒ½ä¼˜åŒ–å®è·µï¼šæ·±å…¥FMPç®—æ³•åŸç†æ¢ç´¢ï½œå¾—ç‰©æŠ€æœ¯"/> <meta itemprop="keywords" content="ç®—æ³•,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T02:45:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾—ç‰©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2392954206960247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¡¹ç›®æ€§èƒ½ä¼˜åŒ–å®è·µï¼šæ·±å…¥FMPç®—æ³•åŸç†æ¢ç´¢ï½œå¾—ç‰©æŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392954206960247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾—ç‰©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:45:47.000Z" title="Tue Dec 02 2025 02:45:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰ è¨€</h2>
<p>æœ€è¿‘åœ¨é¡¹ç›®ä¸­é‡åˆ°äº†é¡µé¢åŠ è½½é€Ÿåº¦ä¼˜åŒ–çš„é—®é¢˜ï¼Œä¸ºäº†æé«˜ç§’å¼€ç‡ç­‰æŒ‡æ ‡ï¼Œæˆ‘å†³å®šä»<strong>eebiæŠ¥è¡¨</strong>å…¥æ‰‹ï¼Œåˆ†æä¸€ä¸‹å½“å‰é¡¹ç›®çš„æ€§èƒ½ç›‘æ§ä½“ç³»ã€‚</p>
<p>é€šè¿‡æŸ¥çœ‹æŠ¥è¡¨ä¸­çš„cost_timeã€is_firstç­‰å­—æ®µï¼Œæˆ‘å¼€å§‹äº†è§£é¡¹ç›®çš„æ€§èƒ½æ•°æ®é‡‡é›†æƒ…å†µã€‚ä¸ºäº†æ›´å¥½åœ°ç†è§£è¿™äº›æ•°æ®çš„å«ä¹‰ï¼Œæˆ‘æ·±å…¥ç ”ç©¶äº†ç›¸å…³SDKçš„æºç å®ç°ã€‚</p>
<p>åœ¨åˆ†æè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°é‡‡é›†åˆ°çš„cost_timeå‚æ•°å®é™…ä¸Šå°±æ˜¯<strong>FMPï¼ˆFirst Meaningful Paintï¼‰</strong> æŒ‡æ ‡ã€‚äºæ˜¯æˆ‘å¯¹FMPçš„ç®—æ³•å®ç°è¿›è¡Œäº†æ¢³ç†ï¼Œäº†è§£äº†å®ƒçš„è®¡ç®—é€»è¾‘ã€‚</p>
<p>æœ¬æ–‡å°†åˆ†äº«æˆ‘åœ¨æ€§èƒ½ä¼˜åŒ–è¿‡ç¨‹ä¸­çš„ä¸€äº›æ€è€ƒå’Œå‘ç°ï¼Œå¸Œæœ›èƒ½å¯¹å…³æ³¨å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„åŒå­¦æœ‰æ‰€å¸®åŠ©ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä»€ä¹ˆæ˜¯FMP</h2>
<p>FMP (First Meaningful Paint) é¦–æ¬¡æœ‰æ„ä¹‰ç»˜åˆ¶ï¼Œæ˜¯æŒ‡é¡µé¢é¦–æ¬¡ç»˜åˆ¶æœ‰æ„ä¹‰å†…å®¹çš„æ—¶é—´ç‚¹ã€‚ä¸ FCP (First Contentful Paint) ä¸åŒï¼ŒFMP æ›´å…³æ³¨çš„æ˜¯å¯¹ç”¨æˆ·æœ‰å®é™…ä»·å€¼çš„å†…å®¹ï¼Œè€Œä¸æ˜¯ä»»ä½•å†…å®¹çš„é¦–æ¬¡ç»˜åˆ¶ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€FMP è®¡ç®—åŸç†</h2>
<h3 data-id="heading-3">3.1æ ¸å¿ƒæ€æƒ³</h3>
<p>FMP çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>é€šè¿‡åˆ†æè§†å£å†…é‡è¦ DOM å…ƒç´ çš„æ¸²æŸ“æ—¶é—´ï¼Œæ‰¾åˆ°å¯¹ç”¨æˆ·æœ€æœ‰æ„ä¹‰çš„å†…å®¹å®Œæˆæ¸²æŸ“çš„æ—¶é—´ç‚¹</strong>ã€‚</p>
<h3 data-id="heading-4">3.2FMPçš„ä¸‰ç§è®¡ç®—æ–¹å¼</h3>
<ul>
<li><strong>æ–°ç®—æ³• FMP (specifiedValue)</strong> åŸºäºç”¨æˆ·æŒ‡å®šçš„ DOM å…ƒç´ è®¡ç®—é€šè¿‡fmpSelectoré…ç½®æŒ‡å®šå…ƒç´ è®¡ç®—æŒ‡å®šå…ƒç´ çš„å®Œæ•´åŠ è½½æ—¶é—´</li>
</ul>

<ul>
<li><strong>ä¼ ç»Ÿç®—æ³• FMP (value)</strong> åŸºäºè§†å£å†…é‡è¦å…ƒç´ è®¡ç®—é€‰æ‹©æƒé‡æœ€é«˜çš„å…ƒç´ å–æ‰€æœ‰å‚è€ƒå…ƒç´ ä¸­æœ€æ™šå®Œæˆçš„æ—¶é—´</li>
</ul>

<ul>
<li><strong>P80 ç®—æ³• FMP (p80Value)</strong> åŸºäº P80 ç™¾åˆ†ä½è®¡ç®—å–æ’åºå80%ä½ç½®çš„æ—¶é—´æ›´ç¨³å®šçš„æ€§èƒ½æŒ‡æ ‡</li>
</ul>
<h3 data-id="heading-5">3.3æ–°ç®—æ³•vsä¼ ç»Ÿç®—æ³•</h3>
<p><strong>ä¼ ç»Ÿç®—æ³•æµç¨‹</strong></p>
<ul>
<li>éå†æ•´ä¸ªDOMæ ‘</li>
<li>è®¡ç®—æ¯ä¸ªå…ƒç´ çš„æƒé‡åˆ†æ•°</li>
<li>é€‰æ‹©å¤šä¸ªé‡è¦å…ƒç´ </li>
<li>è®¡ç®—æ‰€æœ‰å…ƒç´ çš„åŠ è½½æ—¶é—´</li>
<li>å–æœ€æ™šå®Œæˆçš„æ—¶é—´ä½œä¸ºFMP</li>
</ul>
<p><strong>æ–°ç®—æ³•ï¼ˆæŒ‡å®šå…ƒç´ ç®—æ³•ï¼‰æµç¨‹</strong></p>
<p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> ç›´æ¥æŒ‡å®šä¸€ä¸ªå…³é”® DOM å…ƒç´ ï¼Œè®¡ç®—è¯¥å…ƒç´ çš„å®Œæ•´åŠ è½½æ—¶é—´ä½œä¸ºFMPã€‚</p>
<p><strong>ä¼ ç»Ÿç®—æ³•è¯¦ç»†æ­¥éª¤</strong></p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šDOMå…ƒç´ é€‰æ‹©</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é€’å½’éå† DOM æ ‘ï¼Œé€‰æ‹©é‡è¦å…ƒç´ </span>
selectMostImportantDOMs(dom: HTMLElement = document.body): void {
Â Â <span class="hljs-keyword">const</span>Â score =Â <span class="hljs-keyword">this</span>.getWeightScore(dom);


Â Â <span class="hljs-keyword">if</span>Â (score &gt; BODY_WEIGHT) {
Â  Â Â <span class="hljs-comment">// æƒé‡å¤§äº body æƒé‡ï¼Œä½œä¸ºå‚è€ƒå…ƒç´ </span>
Â  Â Â <span class="hljs-keyword">this</span>.referDoms.push(dom);
Â  }Â <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">if</span>Â (score &gt;=Â <span class="hljs-keyword">this</span>.highestWeightScore) {
Â  Â Â <span class="hljs-comment">// æƒé‡å¤§äºç­‰äºæœ€é«˜åˆ†æ•°ï¼Œä½œä¸ºé‡è¦å…ƒç´ </span>
Â  Â Â <span class="hljs-keyword">this</span>.importantDOMs.push(dom);
Â  }


Â Â <span class="hljs-comment">// é€’å½’å¤„ç†å­å…ƒç´ </span>
Â Â <span class="hljs-keyword">for</span>Â (let i =Â <span class="hljs-number">0</span>, l = dom.children.length; i &lt; l; i++) {
Â  Â Â <span class="hljs-keyword">this</span>.selectMostImportantDOMs(dom.children[i]Â <span class="hljs-keyword">as</span>Â HTMLElement);
Â  }
}
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šæƒé‡è®¡ç®—</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¡ç®—å…ƒç´ æƒé‡åˆ†æ•°</span>
<span class="hljs-title function_">getWeightScore</span>(<span class="hljs-params">dom: Element</span>) {
Â Â <span class="hljs-comment">// è·å–å…ƒç´ åœ¨è§†å£ä¸­çš„ä½ç½®å’Œå¤§å°</span>
Â Â <span class="hljs-keyword">const</span>Â viewPortPos = dom.<span class="hljs-title function_">getBoundingClientRect</span>();
Â Â <span class="hljs-keyword">const</span>Â screenHeight =Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getScreenHeight</span>();


Â Â <span class="hljs-comment">// è®¡ç®—å…ƒç´ åœ¨é¦–å±ä¸­çš„å¯è§é¢ç§¯</span>
Â Â <span class="hljs-keyword">const</span>Â fpWidth =Â <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(viewPortPos.<span class="hljs-property">right</span>,Â <span class="hljs-variable constant_">SCREEN_WIDTH</span>) -Â <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, viewPortPos.<span class="hljs-property">left</span>);
Â Â <span class="hljs-keyword">const</span>Â fpHeight =Â <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(viewPortPos.<span class="hljs-property">bottom</span>, screenHeight) -Â <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, viewPortPos.<span class="hljs-property">top</span>);


Â Â <span class="hljs-comment">// æƒé‡ = å¯è§é¢ç§¯ Ã— å…ƒç´ ç±»å‹æƒé‡</span>
Â Â <span class="hljs-keyword">return</span>Â fpWidth * fpHeight *Â <span class="hljs-title function_">getDomWeight</span>(dom);
}
</code></pre>
<p>æƒé‡è®¡ç®—å…¬å¼ï¼š</p>
<pre><code class="hljs">æƒé‡åˆ†æ•° = å¯è§é¢ç§¯ Ã— å…ƒç´ ç±»å‹æƒé‡
</code></pre>
<p>å…ƒç´ ç±»å‹æƒé‡ï¼š</p>
<ul>
<li>OBJECT,Â EMBED,Â VIDEO: æœ€é«˜æƒé‡</li>
<li>SVG,Â IMG,Â CANVAS: é«˜æƒé‡</li>
<li>å…¶ä»–å…ƒç´ : æƒé‡ä¸º 1</li>
</ul>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šåŠ è½½æ—¶é—´è®¡ç®—</strong></p>
<pre><code class="hljs language-ini" lang="ini">getLoadingTime(dom:Â HTMLElement,Â resourceLoadingMap:Â Record&lt;string,Â any&gt;):Â numberÂ {
Â Â // è·å– DOM æ ‡è®°æ—¶é—´
Â Â constÂ <span class="hljs-attr">baseTime</span> =Â getMarkValueByDom(dom)<span class="hljs-comment">;</span>


Â Â // è·å–èµ„æºåŠ è½½æ—¶é—´
Â Â letÂ <span class="hljs-attr">resourceTime</span> =Â <span class="hljs-number">0</span><span class="hljs-comment">;</span>
Â Â ifÂ (RESOURCE_TAG_SET.indexOf(tagType) &gt;=Â 0) {
Â  Â Â // å¤„ç†å›¾ç‰‡ã€è§†é¢‘ç­‰èµ„æº
Â  Â Â constÂ <span class="hljs-attr">resourceTiming</span> = resourceLoadingMap[resourceName]<span class="hljs-comment">;</span>
Â  Â  <span class="hljs-attr">resourceTime</span> = resourceTiming ? resourceTiming.responseEndÂ :Â <span class="hljs-number">0</span><span class="hljs-comment">;</span>
Â  }


Â Â // è¿”å›è¾ƒå¤§å€¼ï¼ˆDOM æ—¶é—´ vs èµ„æºæ—¶é—´ï¼‰
Â Â returnÂ Math.max(resourceTime, baseTime)<span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>ç¬¬å››æ­¥ï¼šFMPå€¼è®¡ç®—</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">calcValue(resourceLoadingMap: Record&lt;string, any&gt;, isSubPage: boolean =Â <span class="hljs-literal">false</span>): void {
Â Â <span class="hljs-comment">// æ„å»ºå‚è€ƒå…ƒç´ åˆ—è¡¨ï¼ˆè‡³å°‘ 3 ä¸ªå…ƒç´ ï¼‰</span>
Â Â <span class="hljs-keyword">const</span>Â referDoms =Â <span class="hljs-keyword">this</span>.referDoms.length &gt;=Â <span class="hljs-number">3</span>Â 
Â  Â  ?Â <span class="hljs-keyword">this</span>.referDomsÂ 
Â  Â  : [...<span class="hljs-keyword">this</span>.referDoms, ...<span class="hljs-keyword">this</span>.importantDOMs.slice(<span class="hljs-keyword">this</span>.referDoms.length -Â <span class="hljs-number">3</span>)];


Â Â <span class="hljs-comment">// è®¡ç®—æ¯ä¸ªå…ƒç´ çš„åŠ è½½æ—¶é—´</span>
Â Â <span class="hljs-keyword">const</span>Â timings = referDoms.map(dom =&gt;Â <span class="hljs-keyword">this</span>.getLoadingTime(dom, resourceLoadingMap));


Â Â <span class="hljs-comment">// æ’åºæ—¶é—´æ•°ç»„</span>
Â Â <span class="hljs-keyword">const</span>Â sortedTimings = timings.sort((t1, t2) =&gt; t1 - t2);


Â Â <span class="hljs-comment">// è®¡ç®—æœ€ç»ˆå€¼</span>
Â Â <span class="hljs-keyword">const</span>Â info = getMetricNumber(sortedTimings);
Â Â <span class="hljs-keyword">this</span>.value = info.value; Â  Â  Â  Â <span class="hljs-comment">// æœ€åä¸€ä¸ªå…ƒç´ çš„æ—¶é—´ï¼ˆæœ€æ™šå®Œæˆï¼‰</span>
Â Â <span class="hljs-keyword">this</span>.p80Value = info.p80Value; Â <span class="hljs-comment">// P80 ç™¾åˆ†ä½æ—¶é—´</span>
}
</code></pre>
<p><strong>æ–°ç®—æ³•è¯¦ç»†æ­¥éª¤</strong></p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šé…ç½®æŒ‡å®šå…ƒç´ </strong></p>
<pre><code class="hljs language-ini" lang="ini">// é€šè¿‡å…¨å±€é…ç½®æŒ‡å®š FMP ç›®æ ‡å…ƒç´ 
constÂ { <span class="hljs-attr">fmpSelector</span> =Â <span class="hljs-string">""</span>Â } =Â SingleGlobal?.getOptions?.()<span class="hljs-comment">;</span>
</code></pre>
<p>é…ç½®ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åˆå§‹åŒ–æ—¶é…ç½®</span>
<span class="hljs-keyword">init</span>({
Â  <span class="hljs-params">fmpSelector</span>:Â '.main<span class="hljs-operator">-</span>content', Â <span class="hljs-comment">// æŒ‡å®šä¸»è¦å†…å®¹åŒºåŸŸ</span>
Â Â <span class="hljs-comment">// æˆ–è€…</span>
Â  <span class="hljs-params">fmpSelector</span>:Â '#hero<span class="hljs-operator">-</span>section', Â <span class="hljs-comment">// æŒ‡å®šé¦–å±åŒºåŸŸ</span>
Â Â <span class="hljs-comment">// æˆ–è€…</span>
Â  <span class="hljs-params">fmpSelector</span>:Â '.product<span class="hljs-operator">-</span>list'Â  Â <span class="hljs-comment">// æŒ‡å®šäº§å“åˆ—è¡¨</span>
});
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šæŸ¥æ‰¾æŒ‡å®šå…ƒç´ </strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">if</span><span class="hljs-title function_ invoke__">Â </span>(fmpSelector) {
Â Â <span class="hljs-comment">// ä½¿ç”¨ querySelector æŸ¥æ‰¾æŒ‡å®šçš„ DOM å…ƒç´ </span>
Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-variable">$specifiedElÂ </span>= document.<span class="hljs-title function_ invoke__">querySelector</span>(fmpSelector);


Â Â <span class="hljs-keyword">if</span><span class="hljs-title function_ invoke__">Â </span>(<span class="hljs-variable">$specifiedElÂ </span>&amp;&amp;Â <span class="hljs-variable">$specifiedEl</span> <span class="hljs-keyword">instanceof</span> HTMLElement) {
Â  Â Â <span class="hljs-comment">// æ‰¾åˆ°æŒ‡å®šå…ƒç´ ï¼Œè¿›è¡Œåç»­è®¡ç®—</span>
Â  Â  this.specifiedDom =Â <span class="hljs-variable">$specifiedEl</span>;
Â  }
}
</code></pre>
<p>æŸ¥æ‰¾é€»è¾‘ï¼š</p>
<ul>
<li>ä½¿ç”¨document.querySelector()æŸ¥æ‰¾å…ƒç´ </li>
<li>éªŒè¯å…ƒç´ å­˜åœ¨ä¸”ä¸º HTMLElement ç±»å‹</li>
<li>ä¿å­˜å…ƒç´ å¼•ç”¨åˆ°specifiedDom</li>
</ul>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—æŒ‡å®šå…ƒç´ çš„åŠ è½½æ—¶é—´</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è®¡ç®—æŒ‡å®šå…ƒç´ çš„å®Œæ•´åŠ è½½æ—¶é—´</span>
<span class="hljs-keyword">this</span>.specifiedValue =Â <span class="hljs-keyword">this</span>.getLoadingTime(
Â  $specifiedEl,
Â  resourceLoadingMap
);
</code></pre>
<p><strong>åŠ è½½æ—¶é—´è®¡ç®—åŒ…å«ï¼š</strong></p>
<ul>
<li>DOM æ ‡è®°æ—¶é—´</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">// è·å– DOM å…ƒç´ çš„åŸºç¡€æ ‡è®°æ—¶é—´
constÂ <span class="hljs-attr">baseTime</span> =Â getMarkValueByDom(dom)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>èµ„æºåŠ è½½æ—¶é—´</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">letÂ <span class="hljs-attr">resourceTime</span> =Â <span class="hljs-number">0</span><span class="hljs-comment">;</span>
// å¤„ç†ç›´æ¥èµ„æºï¼ˆimg, video, embed ç­‰ï¼‰
constÂ <span class="hljs-attr">tagType</span> = dom.tagName.toUpperCase()<span class="hljs-comment">;</span>
ifÂ (RESOURCE_TAG_SET.indexOf(tagType) &gt;=Â 0) {
Â Â constÂ <span class="hljs-attr">resourceName</span> =Â normalizeResourceName((domÂ asÂ any).src)<span class="hljs-comment">;</span>
Â Â constÂ <span class="hljs-attr">resourceTiming</span> = resourceLoadingMap[resourceName]<span class="hljs-comment">;</span>
Â  <span class="hljs-attr">resourceTime</span> = resourceTiming ? resourceTiming.responseEndÂ :Â <span class="hljs-number">0</span><span class="hljs-comment">;</span>
}
// å¤„ç†èƒŒæ™¯å›¾ç‰‡
constÂ <span class="hljs-attr">bgImgUrl</span> =Â getDomBgImg(dom)<span class="hljs-comment">;</span>
ifÂ (isImageUrl(bgImgUrl)) {
Â Â constÂ <span class="hljs-attr">resourceName</span> =Â normalizeResourceName(bgImgUrl)<span class="hljs-comment">;</span>
Â Â constÂ <span class="hljs-attr">resourceTiming</span> = resourceLoadingMap[resourceName]<span class="hljs-comment">;</span>
Â  <span class="hljs-attr">resourceTime</span> = resourceTiming ? resourceTiming.responseEndÂ :Â <span class="hljs-number">0</span><span class="hljs-comment">;</span>
}
</code></pre>
<ul>
<li>ç»¼åˆæ—¶é—´è®¡ç®—</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿”å› DOM æ—¶é—´å’Œèµ„æºæ—¶é—´çš„è¾ƒå¤§å€¼</span>
<span class="hljs-keyword">return</span>Â <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(resourceTime, baseTime);
</code></pre>
<p><strong>ç¬¬å››æ­¥ï¼šFMPå€¼ç¡®å®š</strong></p>
<pre><code class="hljs language-ini" lang="ini">// æ ¹æ®æ˜¯å¦æœ‰æŒ‡å®šå€¼æ¥å†³å®šä½¿ç”¨å“ªä¸ª FMP å€¼
ifÂ (<span class="hljs-attr">specifiedValue</span> ===Â <span class="hljs-number">0</span>) {
Â Â // å¦‚æœæ²¡æœ‰æŒ‡å®šå€¼ï¼Œå›é€€åˆ°ä¼ ç»Ÿç®—æ³•
Â  <span class="hljs-attr">fmp</span> = isSubPage ? value - diffTime : value<span class="hljs-comment">;</span>
}Â elseÂ {
Â Â // å¦‚æœæœ‰æŒ‡å®šå€¼ï¼Œä½¿ç”¨æŒ‡å®šå€¼
Â  <span class="hljs-attr">fmp</span> = isSubPage ? specifiedValue - diffTime : specifiedValue<span class="hljs-comment">;</span>
}
</code></pre>
<p>å†³ç­–é€»è¾‘ï¼š</p>
<ul>
<li>å¦‚æœÂ specifiedValue &gt; 0ï¼šä½¿ç”¨æŒ‡å®šå…ƒç´ çš„åŠ è½½æ—¶é—´</li>
<li>å¦‚æœÂ specifiedValue === 0ï¼šå›é€€åˆ°ä¼ ç»Ÿç®—æ³•</li>
</ul>
<p><strong>ç¬¬äº”æ­¥ï¼šå­é¡µé¢æ—¶é—´è°ƒæ•´</strong></p>
<pre><code class="hljs language-ini" lang="ini">// å­é¡µé¢çš„ FMP å€¼éœ€è¦å‡å»æ—¶é—´åç§»
ifÂ (isSubPage) {
Â  <span class="hljs-attr">fmp</span> = specifiedValue - diffTime<span class="hljs-comment">;</span>
Â Â // <span class="hljs-attr">diffTime</span> = startSubTime - initTime
}
</code></pre>
<p><strong>æ–°ç®—æ³•çš„ä¼˜åŠ¿</strong></p>
<p><strong>ç²¾ç¡®æ€§æ›´é«˜</strong></p>
<ul>
<li>ç›´æ¥é’ˆå¯¹ä¸šåŠ¡å…³é”®å…ƒç´ </li>
<li>é¿å…æƒé‡è®¡ç®—çš„è¯¯å·®</li>
<li>æ›´è´´è¿‘ä¸šåŠ¡éœ€æ±‚</li>
</ul>
<p><strong>å¯æ§æ€§å¼º</strong></p>
<ul>
<li>å¼€å‘è€…å¯ä»¥æŒ‡å®šå…³é”®å…ƒç´ </li>
<li>å¯ä»¥æ ¹æ®ä¸šåŠ¡åœºæ™¯è°ƒæ•´</li>
<li>é¿å…ç®—æ³•è‡ªåŠ¨é€‰æ‹©çš„åå·®</li>
</ul>
<p><strong>è®¡ç®—ç®€å•</strong></p>
<ul>
<li>åªéœ€è¦è®¡ç®—ä¸€ä¸ªå…ƒç´ </li>
<li>ä¸éœ€è¦å¤æ‚çš„æƒé‡è®¡ç®—</li>
<li>æ€§èƒ½å¼€é”€æ›´å°</li>
</ul>
<p><strong>ä¸šåŠ¡å¯¼å‘</strong></p>
<ul>
<li>ç›´æ¥åæ˜ ä¸šåŠ¡å…³é”®å†…å®¹çš„åŠ è½½æ—¶é—´</li>
<li>æ›´ç¬¦åˆç”¨æˆ·ä½“éªŒè¯„ä¼°éœ€æ±‚</li>
<li>ä¾¿äºæ€§èƒ½ä¼˜åŒ–æŒ‡å¯¼</li>
</ul>
<h3 data-id="heading-6">3.4å…³é”®ç®—æ³•</h3>
<p><strong>P80 ç™¾åˆ†ä½è®¡ç®—</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span>Â <span class="hljs-keyword">function</span>Â <span class="hljs-title function_">getMetricNumber</span>(<span class="hljs-params">sortedTimings: number[]</span>) {
Â Â <span class="hljs-keyword">const</span>Â value = sortedTimings[sortedTimings.<span class="hljs-property">length</span>Â -Â <span class="hljs-number">1</span>]; Â <span class="hljs-comment">// æœ€åä¸€ä¸ªï¼ˆæœ€æ™šï¼‰</span>
Â Â <span class="hljs-keyword">const</span>Â p80Value = sortedTimings[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((sortedTimings.<span class="hljs-property">length</span>Â -Â <span class="hljs-number">1</span>) *Â <span class="hljs-number">0.8</span>)]; Â <span class="hljs-comment">// P80</span>
Â Â <span class="hljs-keyword">return</span>Â { value, p80Value };
}
</code></pre>
<p><strong>å…ƒç´ ç±»å‹æƒé‡</strong></p>
<pre><code class="hljs language-objectivec" lang="objectivec"><span class="hljs-keyword">const</span>Â IMPORTANT_ELEMENT_WEIGHT_MAP = {
Â  SVG: IElementWeight.High, Â  Â  Â <span class="hljs-comment">// é«˜æƒé‡</span>
Â  IMG: IElementWeight.High, Â  Â  Â <span class="hljs-comment">// é«˜æƒé‡</span>
Â Â <span class="hljs-built_in">CANVAS</span>: IElementWeight.High, Â Â <span class="hljs-comment">// é«˜æƒé‡</span>
Â  OBJECT: IElementWeight.Highest,Â <span class="hljs-comment">// æœ€é«˜æƒé‡</span>
Â  EMBED: IElementWeight.Highest,Â <span class="hljs-comment">// æœ€é«˜æƒé‡</span>
Â  VIDEO: IElementWeight.Highest Â Â <span class="hljs-comment">// æœ€é«˜æƒé‡</span>
};
</code></pre>
<h2 data-id="heading-7">å››ã€æ—¶é—´æ ‡è®°æœºåˆ¶</h2>
<h3 data-id="heading-8">4.1DOMå˜åŒ–ç›‘å¬</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// MutationObserver ç›‘å¬ DOM å˜åŒ–</span>
<span class="hljs-keyword">private</span>Â observer =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-function">(<span class="hljs-params">mutations = []</span>) =&gt;</span>Â {
Â Â <span class="hljs-keyword">const</span>Â now =Â <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleChange</span>(mutations, now);
});
</code></pre>
<h3 data-id="heading-9">4.2æ—¶é—´æ ‡è®°</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä¸ºæ¯ä¸ª DOM å˜åŒ–åˆ›å»ºæ€§èƒ½æ ‡è®°</span>
<span class="hljs-selector-tag">mark</span>(count); Â <span class="hljs-comment">// åˆ›å»º performance.mark(`mutation_pc_${count}`)</span>
<span class="hljs-comment">// ä¸º DOM å…ƒç´ è®¾ç½®æ ‡è®°</span>
<span class="hljs-built_in">setDataAttr</span>(elem,Â TAG_KEY,Â `${mutationCount}`);
</code></pre>
<h3 data-id="heading-10">4.3æ ‡è®°å€¼è·å–</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ ¹æ® DOM å…ƒç´ è·å–æ ‡è®°æ—¶é—´</span>
<span class="hljs-built_in">getMarkValueByDom</span>(dom: HTMLElement) {
Â Â constÂ markValue =Â <span class="hljs-built_in">getDataAttr</span>(dom,Â TAG_KEY);
Â Â returnÂ <span class="hljs-built_in">getMarkValue</span>(parseInt(markValue));
}
</code></pre>
<h2 data-id="heading-11">äº”ã€èµ„æºåŠ è½½è€ƒè™‘</h2>
<h3 data-id="heading-12">5.1èµ„æºç±»å‹è¯†åˆ«</h3>
<p><strong>å›¾ç‰‡èµ„æº</strong>:Â <img src="" loading="lazy"/>Â æ ‡ç­¾çš„Â srcå±æ€§</p>
<p><strong>è§†é¢‘èµ„æº</strong>:Â Â æ ‡ç­¾çš„Â srcå±æ€§</p>
<p><strong>èƒŒæ™¯å›¾ç‰‡</strong>: CSSÂ background-imageå±æ€§</p>
<p><strong>åµŒå…¥èµ„æº</strong>:Â ,Â æ ‡ç­¾</p><p/>
<h3 data-id="heading-13">5.2èµ„æºæ—¶é—´è·å–</h3>
<pre><code class="hljs language-ini" lang="ini">// ä» Performance API è·å–èµ„æºåŠ è½½æ—¶é—´
constÂ <span class="hljs-attr">resourceTiming</span> = resourceLoadingMap[resourceName]<span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">resourceTime</span> = resourceTiming ? resourceTiming.responseEndÂ :Â <span class="hljs-number">0</span><span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-14">5.3ç»¼åˆæ—¶é—´è®¡ç®—</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// DOM æ—¶é—´å’Œèµ„æºæ—¶é—´çš„è¾ƒå¤§å€¼</span>
<span class="hljs-keyword">return</span>Â <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(resourceTime, baseTime);
</code></pre>
<h2 data-id="heading-15">å…­ã€å­é¡µé¢æ”¯æŒ</h2>
<h3 data-id="heading-16">6.1æ—¶é—´åç§»å¤„ç†</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å­é¡µé¢ä»è°ƒç”¨ send æ–¹æ³•å¼€å§‹è®¡æ—¶</span>
<span class="hljs-keyword">const</span>Â diffTime =Â <span class="hljs-keyword">this</span>.startSubTime -Â <span class="hljs-keyword">this</span>.initTime;
<span class="hljs-comment">// å­é¡µé¢åªç»Ÿè®¡å¼€å§‹æ—¶é—´ä¹‹åçš„èµ„æº</span>
<span class="hljs-keyword">if</span>Â (!isSubPage || resource.startTime &gt; diffTime) {
Â  resourceLoadingMap[resourceName] = resource;
}
</code></pre>
<h3 data-id="heading-17">6.2FMPå€¼è°ƒæ•´</h3>
<pre><code class="hljs language-ini" lang="ini">// å­é¡µé¢çš„ FMP å€¼éœ€è¦å‡å»æ—¶é—´åç§»
<span class="hljs-attr">fmp</span> = isSubPage ? value - diffTime : value<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-18">ä¸ƒã€FMPçš„æ ¸å¿ƒä¼˜åŠ¿</h2>
<h3 data-id="heading-19">7.1ç”¨æˆ·æ„ŸçŸ¥å¯¼å‘</h3>
<p>FMP æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºå®ƒçœŸæ­£å…³æ³¨ç”¨æˆ·çš„å®é™…ä½“éªŒï¼š</p>
<ul>
<li><strong>å†…å®¹ä»·å€¼ä¼˜å…ˆ</strong>ï¼šåªè®¡ç®—å¯¹ç”¨æˆ·æœ‰æ„ä¹‰çš„å†…å®¹æ¸²æŸ“æ—¶é—´</li>
<li><strong>æ™ºèƒ½æƒé‡è¯„ä¼°</strong>ï¼šæ ¹æ®å…ƒç´ çš„é‡è¦æ€§å’Œå¯è§æ€§è¿›è¡Œå·®å¼‚åŒ–è®¡ç®—</li>
<li><strong>çœŸå®ä½“éªŒæ˜ å°„</strong>ï¼šæ›´è´´è¿‘ç”¨æˆ·çš„å®é™…æ„ŸçŸ¥ï¼Œè€ŒéæŠ€æœ¯å±‚é¢çš„æŒ‡æ ‡</li>
</ul>
<h3 data-id="heading-20">7.2å¤šç»´åº¦è®¡ç®—ä½“ç³»</h3>
<p>FMP é‡‡ç”¨äº†æ›´åŠ å…¨é¢çš„è®¡ç®—æ–¹å¼ï¼š</p>
<ul>
<li><strong>å…ƒç´ æƒé‡åˆ†æ</strong>ï¼šç»¼åˆè€ƒè™‘å…ƒç´ ç±»å‹å’Œæ¸²æŸ“é¢ç§¯çš„å½±å“</li>
<li><strong>èµ„æºåŠ è½½å…³è”</strong>ï¼šå°†é™æ€èµ„æºåŠ è½½æ—¶é—´çº³å…¥è®¡ç®—èŒƒå›´</li>
<li><strong>ç®—æ³•å¯¹æ¯”éªŒè¯</strong>ï¼šæ”¯æŒå¤šç§ç®—æ³•å¹¶è¡Œè®¡ç®—ï¼Œç¡®ä¿ç»“æœå‡†ç¡®æ€§</li>
</ul>
<h3 data-id="heading-21">7.3é«˜ç²¾åº¦æµ‹é‡</h3>
<p>FMP åœ¨æµ‹é‡ç²¾åº¦æ–¹é¢è¡¨ç°çªå‡ºï¼š</p>
<ul>
<li><strong>DOM å˜åŒ–è¿½è¸ª</strong>ï¼šåŸºäºå®é™… DOM ç»“æ„å˜åŒ–çš„æ—¶é—´ç‚¹</li>
<li><strong>API æ•°æ®èåˆ</strong>ï¼šç»“åˆ Performance API æä¾›çš„è¯¦ç»†æ•°æ®</li>
<li><strong>ç»Ÿè®¡åˆ†ææ”¯æŒ</strong>ï¼šæ”¯æŒ P80 ç™¾åˆ†ä½ç­‰å¤šç§ç»Ÿè®¡æŒ‡æ ‡ï¼Œä¾¿äºæ€§èƒ½åˆ†æ</li>
</ul>
<h2 data-id="heading-22">å…«ã€FMPçš„å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-23">8.1æ€§èƒ½ç›‘æ§å®è·µ</h3>
<p>FMP åœ¨æ€§èƒ½ç›‘æ§ä¸­å‘æŒ¥ç€é‡è¦ä½œç”¨ï¼š</p>
<ul>
<li><strong>å…³é”®æŒ‡æ ‡è¿½è¸ª</strong>ï¼šå®æ—¶ç›‘æ§é¡µé¢é¦–æ¬¡æœ‰æ„ä¹‰å†…å®¹çš„æ¸²æŸ“æ—¶é—´</li>
<li><strong>ç“¶é¢ˆè¯†åˆ«</strong>ï¼šå¿«é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆå’Œæ½œåœ¨çš„ä¼˜åŒ–ç‚¹</li>
<li><strong>è¶‹åŠ¿åˆ†æ</strong>ï¼šé€šè¿‡å†å²æ•°æ®äº†è§£æ€§èƒ½å˜åŒ–è¶‹åŠ¿</li>
</ul>
<h3 data-id="heading-24">8.2ç”¨æˆ·ä½“éªŒè¯„ä¼°</h3>
<p>FMP ä¸ºäº§å“å›¢é˜Ÿæä¾›äº†ç”¨æˆ·è§†è§’çš„æ€§èƒ½è¯„ä¼°ï¼š</p>
<ul>
<li><strong>çœŸå®æ„ŸçŸ¥æµ‹é‡</strong>ï¼šè¯„ä¼°ç”¨æˆ·å®é™…æ„Ÿå—åˆ°çš„é¡µé¢åŠ è½½é€Ÿåº¦</li>
<li><strong>ç«å“å¯¹æ¯”åˆ†æ</strong>ï¼šå¯¹æ¯”ä¸åŒé¡µé¢æˆ–äº§å“çš„æ€§èƒ½è¡¨ç°</li>
<li><strong>ç”¨æˆ·æ»¡æ„åº¦å…³è”</strong>ï¼šå°†æŠ€æœ¯æŒ‡æ ‡ä¸ç”¨æˆ·æ»¡æ„åº¦å»ºç«‹å…³è”</li>
</ul>
<h3 data-id="heading-25">8.3ä¼˜åŒ–æŒ‡å¯¼ä»·å€¼</h3>
<p>FMP æ•°æ®ä¸ºæ€§èƒ½ä¼˜åŒ–æä¾›äº†æ˜ç¡®çš„æ–¹å‘ï¼š</p>
<ul>
<li><strong>èµ„æºä¼˜åŒ–ç­–ç•¥</strong>ï¼šæŒ‡å¯¼é™æ€èµ„æºåŠ è½½é¡ºåºå’Œæ–¹å¼çš„ä¼˜åŒ–</li>
<li><strong>æ¸²æŸ“è·¯å¾„ä¼˜åŒ–</strong>ï¼šå¸®åŠ©ä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„ï¼Œæå‡é¦–å±ä½“éªŒ</li>
<li><strong>é‡åŒ–æ•ˆæœè¯„ä¼°</strong>ï¼šä¸ºä¼˜åŒ–æ•ˆæœæä¾›å¯é‡åŒ–çš„è¯„ä¼°æ ‡å‡†</li>
</ul>
<h2 data-id="heading-26">ä¹ã€æ€»ç»“</h2>
<p>é€šè¿‡è¿™æ¬¡æ·±å…¥åˆ†æï¼Œæˆ‘å¯¹ FMP æœ‰äº†æ›´å…¨é¢çš„è®¤è¯†ã€‚FMP é€šè¿‡ç§‘å­¦çš„ç®—æ³•è®¾è®¡ï¼Œèƒ½å¤Ÿå‡†ç¡®åæ˜ ç”¨æˆ·æ„ŸçŸ¥çš„é¡µé¢åŠ è½½æ€§èƒ½ï¼Œæ˜¯å‰ç«¯æ€§èƒ½ç›‘æ§çš„é‡è¦æŒ‡æ ‡ã€‚</p>
<p>å®ƒä¸ä»…å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£é¡µé¢åŠ è½½è¿‡ç¨‹ï¼Œæ›´é‡è¦çš„æ˜¯ä¸ºæ€§èƒ½ä¼˜åŒ–æä¾›äº†ç§‘å­¦çš„ä¾æ®ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œåˆç†è¿ç”¨ FMP æŒ‡æ ‡ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæå‡ç”¨æˆ·ä½“éªŒï¼Œå®ç°çœŸæ­£çš„"ç§’å¼€"æ•ˆæœã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¯¹æ­£åœ¨å…³æ³¨å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„åŒå­¦æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶åˆ†äº«è‡ªå·±çš„å®è·µç»éªŒã€‚</p>
<h3 data-id="heading-27">å¾€æœŸå›é¡¾</h3>
<p>1.Â Dragonboatç»Ÿä¸€å­˜å‚¨LogDBå®ç°åˆ†æï½œå¾—ç‰©æŠ€æœ¯</p>
<p>2.Â ä»æ•°å­—åˆ°ç‰ˆé¢ï¼šå¾—ç‰©æ•°æ®äº§å“é‡Œæ•°å­—æ ¼å¼åŒ–çš„é‚£äº›äº‹</p>
<p>3.Â ä¸€æ–‡è§£æå¾—ç‰©è‡ªå»º Redis æœ€æ–°æŠ€æœ¯æ¼”è¿›</p>
<p>4.Â Golang HTTPè¯·æ±‚è¶…æ—¶ä¸é‡è¯•ï¼šæ„å»ºé«˜å¯é ç½‘ç»œè¯·æ±‚ï½œå¾—ç‰©æŠ€æœ¯</p>
<p>5.Â RNä¸hawkç¢°æ’çš„ç«èŠ±ä¹‹C++å¼‚å¸¸æ•è·ï½œå¾—ç‰©æŠ€æœ¯</p>
<h3 data-id="heading-28">æ–‡ /é˜¿åˆ—</h3>
<p>å…³æ³¨å¾—ç‰©æŠ€æœ¯ï¼Œæ¯å‘¨æ›´æ–°æŠ€æœ¯å¹²è´§</p>
<p>è¦æ˜¯è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿è¯„è®ºè½¬å‘ç‚¹èµï½</p>
<p>æœªç»å¾—ç‰©æŠ€æœ¯è®¸å¯ä¸¥ç¦è½¬è½½ï¼Œå¦åˆ™ä¾æ³•è¿½ç©¶æ³•å¾‹è´£ä»»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[wordå¯¹æ¯”å·¥å…·ä»å…¥é—¨åˆ°å‡ºé—¨]]></title>    <link>https://juejin.cn/post/7578777952726810658</link>    <guid>https://juejin.cn/post/7578777952726810658</guid>    <pubDate>2025-12-02T02:35:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578777952726810658" data-draft-id="7578734725301272628" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="wordå¯¹æ¯”å·¥å…·ä»å…¥é—¨åˆ°å‡ºé—¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-02T02:35:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹å¤§å®‡_"/> <meta itemprop="url" content="https://juejin.cn/user/1412191432225480"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            wordå¯¹æ¯”å·¥å…·ä»å…¥é—¨åˆ°å‡ºé—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1412191432225480/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹å¤§å®‡_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:35:30.000Z" title="Tue Dec 02 2025 02:35:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="" data-highlight-key="vs">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.hljs-comment,.hljs-quote,.hljs-variable{color:green}.hljs-built_in,.hljs-keyword,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#00f}.hljs-addition,.hljs-attribute,.hljs-literal,.hljs-section,.hljs-string,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type{color:#a31515}.hljs-deletion,.hljs-meta,.hljs-selector-attr,.hljs-selector-pseudo{color:#2b91af}.hljs-doctag{color:grey}.hljs-attr{color:red}.hljs-bullet,.hljs-link,.hljs-symbol{color:#00b0e8}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Wordå¯¹æ¯”</h2>
<blockquote>
<p>æœ¬æ–‡ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªWordå¯¹æ¯”å·¥å…·</p>
</blockquote>
<h3 data-id="heading-1">ğŸŒ°demo</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/645d79b9d6f34f7eba4fbe543795a7b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5aSn5a6HXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247730&amp;x-signature=4A7rZ7Asfg5moWsw7JrJ%2Fj07c%2FI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">æ€è·¯</h3>
<h4 data-id="heading-3">Wordæ–‡æ¡£è§£æ</h4>
<p>Wordçš„æœ¬è´¨æ˜¯XMLå‹ç¼©åŒ…ï¼Œåœ¨æˆ‘ä»¬çš„diffè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªå…³å¿ƒçº¯æ–‡æœ¬çš„å˜åŒ–ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆå°†wordè¿›è¡Œè§£æè½¬åŒ–ã€‚</p>
<p>æœ¬æ–‡å€ŸåŠ©mammoth.jså®Œæˆ</p>
<h4 data-id="heading-4">æ–‡æœ¬tokenåŒ–</h4>
<p>æ ¹æ®ä¸åŒçš„ç²’åº¦åšåˆ†è¯</p>
<h4 data-id="heading-5">Diffç®—æ³•æ ¸å¿ƒ</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Flongest-common-subsequence%2Fdescription%2F" target="_blank" title="https://leetcode.cn/problems/longest-common-subsequence/description/" ref="nofollow noopener noreferrer">LCSæœ€é•¿å…¬å…±å­åºåˆ—ç®—æ³•</a></p>
<h4 data-id="heading-6">åŒæ å¯¹æ¯”</h4>
<p>æœ¬æ–‡ä½¿ç”¨antdç»„ä»¶åº“</p>
<h3 data-id="heading-7">å®ç°</h3>
<h4 data-id="heading-8">æ–‡æ¡£è§£æ</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡mammothå°†wordè½¬åŒ–ä¸ºstring</p>
<pre><code class="hljs language-jsx" lang="jsx">  <span class="hljs-comment">// ä¸Šä¼ word å¹¶æå–æ–‡æœ¬</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleUpload</span>(<span class="hljs-params">file: File, type: <span class="hljs-string">'old'</span> | <span class="hljs-string">'new'</span></span>) {
    <span class="hljs-keyword">const</span> arrayBuffer = <span class="hljs-keyword">await</span> file.<span class="hljs-title function_">arrayBuffer</span>();
    <span class="hljs-comment">// mammith.extractRawTextä»docxä¸­æå–çº¯æ–‡æœ¬</span>
    <span class="hljs-keyword">const</span> { value } = <span class="hljs-keyword">await</span> mammoth.<span class="hljs-title function_">extractRawText</span>({ arrayBuffer });
    <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'old'</span>) {
      <span class="hljs-title function_">setOldText</span>(value);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">setNewText</span>(value);
    }
  }
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/952acd4a2afb4b8d823cc85ff536c926~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5aSn5a6HXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247730&amp;x-signature=9iznIMghdiD4AkghdS3u4aj%2Bd%2BY%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9">åˆ†è¯</h4>
<p>æŒ‰ç…§ä¸åŒçš„ç²’åº¦ï¼Œå°†stringåˆ’åˆ†</p>
<pre><code class="hljs language-jsx" lang="jsx">  <span class="hljs-comment">// åˆ†è¯</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">tokenize</span>(<span class="hljs-params">text: string, mode: string</span>): string[] {
    <span class="hljs-comment">// æŒ‰è¡Œåˆ†ï¼ŒæŒ‰æ¢è¡Œç¬¦æ‹†åˆ†ä¸ºæ•°ç»„</span>
    <span class="hljs-keyword">if</span> (mode === <span class="hljs-string">'line'</span>) <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\r?\n/</span>);
    <span class="hljs-comment">// æŒ‰å­—ç¬¦åˆ†ï¼ŒæŠŠå­—ç¬¦ä¸²æ‹†åˆ†æˆå•ä¸ªå­—ç¬¦æ•°ç»„</span>
    <span class="hljs-keyword">if</span> (mode === <span class="hljs-string">'char'</span>) <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">split</span>(<span class="hljs-string">''</span>);
    <span class="hljs-comment">//ç”¨æ­£åˆ™å°†æ–‡æœ¬åˆ‡æˆä¸­æ–‡å•å­—ã€è‹±æ–‡å•è¯ã€å…¶ä»–å•ä¸ªç¬¦å·</span>
    <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/[\u4e00-\u9fa5]|\w+|[^\w\u4e00-\u9fa5]/g</span>) || [];
  }
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4f992080b9d4f9ca07d67f7e3166f62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5aSn5a6HXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765247730&amp;x-signature=HWu7FOMXuMdpncJYVamoC3yGCnU%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-10">Diff</h4>
<h5 data-id="heading-11">æœ€é•¿å…¬å…±å­åºåˆ—</h5>
<pre><code class="hljs language-jsx" lang="jsx">  <span class="hljs-comment">// LCSæ„å»ºDP</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">buildLCS</span>(<span class="hljs-params">a: string[], b: string[]</span>) {
    <span class="hljs-comment">// æ„å»ºäºŒç»´æ•°ç»„ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸º0</span>
    <span class="hljs-comment">// dp[i][j]è¡¨ç¤ºä»a[i:]ä¸b[j:]çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦</span>
    <span class="hljs-keyword">const</span> dp = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: a.<span class="hljs-property">length</span> + <span class="hljs-number">1</span> }, <span class="hljs-function">() =&gt;</span>
      <span class="hljs-title class_">Array</span>(b.<span class="hljs-property">length</span> + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>)
    );

    <span class="hljs-comment">// å€’åºå¡«å……dp</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = a.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = b.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">0</span>; j--) {
        <span class="hljs-keyword">if</span> (a[i] === b[j]) {
          dp[i][j] = dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> {
          dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i + <span class="hljs-number">1</span>][j], dp[i][j + <span class="hljs-number">1</span>]);
        }
      }
    }

    <span class="hljs-keyword">return</span> dp;
  }
</code></pre>
<h5 data-id="heading-12">å·®å¼‚è®¡ç®—</h5>
<p>åŸºäºäºŒç»´æ•°ç»„è®¡ç®—æ–‡æœ¬çš„å·®å¼‚ï¼Œæ ‡è®°æ–°å¢ã€åˆ é™¤ã€ç›¸åŒçš„éƒ¨åˆ†</p>
<ul>
<li>è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘æ–°æ—§æ–‡æœ¬</li>
<li>å½“å…ƒç´ ç›¸åŒï¼Œæ ‡è®°ä¸ºequalï¼Œä¸¤ä¸ªæŒ‡é’ˆåŒæ—¶å‘å‰</li>
<li>å½“æ–°æ–‡æœ¬è¿˜æœ‰å‰©ä½™ï¼Œæ—§æ–‡æœ¬å·²ç»éå†å®Œï¼Œæ’å…¥æ–°å…ƒç´ </li>
<li>å½“ä¸æ»¡è¶³æ’å…¥æ¡ä»¶ï¼Œä¸ºåˆ é™¤æ—§å…ƒç´ </li>
</ul>
<pre><code class="hljs language-jsx" lang="jsx">  <span class="hljs-comment">// å¾—åˆ°diffç»“æ„</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">diffTokens</span>(<span class="hljs-params">a: string[], b: string[]</span>): <span class="hljs-title class_">DiffPart</span>[] {
    <span class="hljs-comment">//æ„å»ºæ–°æ—§å†…å®¹dpæ•°ç»„</span>
    <span class="hljs-keyword">const</span> dp = <span class="hljs-title function_">buildLCS</span>(a, b);
    <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>,
      j = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">DiffPart</span>[] = [];

    <span class="hljs-comment">// ä¾¿åˆ©æ–°æ—§å†…å®¹</span>
    <span class="hljs-keyword">while</span> (i &lt; a.<span class="hljs-property">length</span> &amp;&amp; j &lt; b.<span class="hljs-property">length</span>) {
      <span class="hljs-comment">//è‹¥å½“å‰tokenç›¸ç­‰ï¼Œåˆ™è®°å½•ä¸‹æ¥å¹¶ç§»åŠ¨i j</span>
      <span class="hljs-keyword">if</span> (i &lt; a.<span class="hljs-property">length</span> &amp;&amp; j &lt; b.<span class="hljs-property">length</span> &amp;&amp; a[i] === b[j]) {
        result.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>, <span class="hljs-attr">text</span>: a[i] });
        i++;
        j++;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
        j &lt; b.<span class="hljs-property">length</span> &amp;&amp;
        (i === a.<span class="hljs-property">length</span> || dp[i][j + <span class="hljs-number">1</span>] &gt;= dp[i + <span class="hljs-number">1</span>][j])
      ) {
        result.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span>, <span class="hljs-attr">text</span>: b[j] });
        j++;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i &lt; a.<span class="hljs-property">length</span>) {
        result.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'delete'</span>, <span class="hljs-attr">text</span>: a[i] });
        i++;
      }
    }
    <span class="hljs-keyword">return</span> result;
  }
</code></pre>
<h5 data-id="heading-13">æ•°æ®æµåŠ¨ğŸŒ°</h5>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æ—§æ–‡æœ¬</span>
<span class="hljs-keyword">const</span> oldText = <span class="hljs-string">"ä»Šå¤©å¤©æ°”å¾ˆå¥½ï¼Œæˆ‘ä»¬å»å…¬å›­æ•£æ­¥å§ã€‚"</span>;
<span class="hljs-comment">// æ–°æ–‡æœ¬  </span>
<span class="hljs-keyword">const</span> newText = <span class="hljs-string">"ä»Šå¤©å¤©æ°”ä¸é”™ï¼Œæˆ‘ä»¬å»å±±ä¸Šå¾’æ­¥å§ï¼Œé¡ºä¾¿çœ‹çœ‹é£æ™¯ã€‚"</span>;
<span class="hljs-comment">// å¯¹æ¯”ç²’åº¦</span>
<span class="hljs-keyword">const</span> granularity = <span class="hljs-string">"word"</span>;
</code></pre>
<p>åˆ†è¯</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æ—§æ–‡æœ¬åˆ†è¯ç»“æœ</span>
<span class="hljs-keyword">const</span> oldTokens = <span class="hljs-title function_">tokenize</span>(<span class="hljs-string">"ä»Šå¤©å¤©æ°”å¾ˆå¥½ï¼Œæˆ‘ä»¬å»å…¬å›­æ•£æ­¥å§ã€‚"</span>, <span class="hljs-string">"word"</span>);
<span class="hljs-comment">// ç»“æœ: ["ä»Šå¤©", "å¤©æ°”", "å¾ˆ", "å¥½", "ï¼Œ", "æˆ‘ä»¬", "å»", "å…¬å›­", "æ•£æ­¥", "å§", "ã€‚"]</span>

<span class="hljs-comment">// æ–°æ–‡æœ¬åˆ†è¯ç»“æœ</span>
<span class="hljs-keyword">const</span> newTokens = <span class="hljs-title function_">tokenize</span>(<span class="hljs-string">"ä»Šå¤©å¤©æ°”ä¸é”™ï¼Œæˆ‘ä»¬å»å±±ä¸Šå¾’æ­¥å§ï¼Œé¡ºä¾¿çœ‹çœ‹é£æ™¯ã€‚"</span>, <span class="hljs-string">"word"</span>); 
<span class="hljs-comment">// ç»“æœ: ["ä»Šå¤©", "å¤©æ°”", "ä¸", "é”™", "ï¼Œ", "æˆ‘ä»¬", "å»", "å±±ä¸Š", "å¾’æ­¥", "å§", "ï¼Œ", "é¡ºä¾¿", "çœ‹çœ‹", "é£æ™¯", "ã€‚"]</span>
</code></pre>
<p>æ„å»ºLCS</p>
<pre><code class="hljs language-jsx" lang="jsx">oldTokens = [<span class="hljs-string">"ä»Šå¤©"</span>, <span class="hljs-string">"å¤©æ°”"</span>, <span class="hljs-string">"å¾ˆ"</span>, <span class="hljs-string">"å¥½"</span>, <span class="hljs-string">"ï¼Œ"</span>, <span class="hljs-string">"æˆ‘ä»¬"</span>, <span class="hljs-string">"å»"</span>, <span class="hljs-string">"å…¬å›­"</span>, <span class="hljs-string">"æ•£æ­¥"</span>, <span class="hljs-string">"å§"</span>, <span class="hljs-string">"ã€‚"</span>]
newTokens = [<span class="hljs-string">"ä»Šå¤©"</span>, <span class="hljs-string">"å¤©æ°”"</span>, <span class="hljs-string">"ä¸"</span>, <span class="hljs-string">"é”™"</span>, <span class="hljs-string">"ï¼Œ"</span>, <span class="hljs-string">"æˆ‘ä»¬"</span>, <span class="hljs-string">"å»"</span>, <span class="hljs-string">"å±±ä¸Š"</span>, <span class="hljs-string">"å¾’æ­¥"</span>, <span class="hljs-string">"å§"</span>, <span class="hljs-string">"ï¼Œ"</span>, <span class="hljs-string">"é¡ºä¾¿"</span>, <span class="hljs-string">"çœ‹çœ‹"</span>, <span class="hljs-string">"é£æ™¯"</span>, <span class="hljs-string">"ã€‚"</span>]
</code></pre>
<p>Diff</p>
<pre><code class="hljs language-jsx" lang="jsx">[
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>,  <span class="hljs-attr">text</span>: <span class="hljs-string">'ä»Šå¤©'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>,  <span class="hljs-attr">text</span>: <span class="hljs-string">'å¤©æ°”'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'delete'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'å¾ˆ'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'delete'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'å¥½'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>,  <span class="hljs-attr">text</span>: <span class="hljs-string">'ï¼Œ'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>,  <span class="hljs-attr">text</span>: <span class="hljs-string">'æˆ‘ä»¬'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>,  <span class="hljs-attr">text</span>: <span class="hljs-string">'å»'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'å±±ä¸Š'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'delete'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'å…¬å›­'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'å¾’æ­¥'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>,  <span class="hljs-attr">text</span>: <span class="hljs-string">'å§'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'ï¼Œ'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'é¡ºä¾¿'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'çœ‹çœ‹'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'é£æ™¯'</span> },
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>,  <span class="hljs-attr">text</span>: <span class="hljs-string">'ã€‚'</span> }
]
</code></pre>
<h4 data-id="heading-14">å®Œæ•´ä»£ç </h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Upload</span>,
  <span class="hljs-title class_">Button</span>,
  <span class="hljs-title class_">Row</span>,
  <span class="hljs-title class_">Col</span>,
  <span class="hljs-title class_">Select</span>,
  <span class="hljs-title class_">Input</span>,
  <span class="hljs-title class_">Typography</span>,
  <span class="hljs-title class_">Space</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UploadOutlined</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ant-design/icons'</span>;
<span class="hljs-keyword">import</span> mammoth <span class="hljs-keyword">from</span> <span class="hljs-string">'mammoth'</span>;
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">TextArea</span> } = <span class="hljs-title class_">Input</span>;
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">Title</span> } = <span class="hljs-title class_">Typography</span>;

<span class="hljs-keyword">import</span> <span class="hljs-string">'./index.less'</span>;
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// diff</span>
<span class="hljs-comment">// insert æ·»åŠ   delete åˆ é™¤  equal ç›¸ç­‰</span>
type <span class="hljs-title class_">DiffPart</span> = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span> | <span class="hljs-string">'delete'</span> | <span class="hljs-string">'equal'</span>;
  <span class="hljs-attr">text</span>: string;
};
<span class="hljs-keyword">const</span> <span class="hljs-title function_">WordDiffTool</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// æ—§æ–‡æœ¬å†…å®¹</span>
  <span class="hljs-keyword">const</span> [oldText, setOldText] =
    useState&lt;string&gt;(<span class="hljs-string">'è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ–‡æœ¬ï¼Œç”¨äºæµ‹è¯•å¯¹æ¯”åŠŸèƒ½ã€‚'</span>);

  <span class="hljs-comment">// æ–°æ–‡æœ¬å†…å®¹</span>
  <span class="hljs-keyword">const</span> [newText, setNewText] = useState&lt;string&gt;(
    <span class="hljs-string">'è¿™æ˜¯ç”¨äºæµ‹è¯•çš„ç¤ºä¾‹æ–‡æœ¬ï¼Œç”¨äºå¯¹æ¯”åŠŸèƒ½ã€‚æ·»åŠ äº†ä¸€äº›å†…å®¹ã€‚'</span>
  );

  <span class="hljs-comment">// å¯¹æ¯”ç²’åº¦</span>
  <span class="hljs-keyword">const</span> [granularity, setGranularity] = useState&lt;<span class="hljs-string">'word'</span> | <span class="hljs-string">'char'</span> | <span class="hljs-string">'line'</span>&gt;(
    <span class="hljs-string">'word'</span>
  );

  <span class="hljs-comment">// ä¸Šä¼ word å¹¶æå–æ–‡æœ¬</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleUpload</span>(<span class="hljs-params">file: File, type: <span class="hljs-string">'old'</span> | <span class="hljs-string">'new'</span></span>) {
    <span class="hljs-keyword">const</span> arrayBuffer = <span class="hljs-keyword">await</span> file.<span class="hljs-title function_">arrayBuffer</span>();
    <span class="hljs-comment">// mammith.extractRawTextä»docxä¸­æå–çº¯æ–‡æœ¬</span>
    <span class="hljs-keyword">const</span> { value } = <span class="hljs-keyword">await</span> mammoth.<span class="hljs-title function_">extractRawText</span>({ arrayBuffer });
    <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'old'</span>) {
      <span class="hljs-title function_">setOldText</span>(value);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">setNewText</span>(value);
    }
  }

  <span class="hljs-comment">// åˆ†è¯</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">tokenize</span>(<span class="hljs-params">text: string, mode: string</span>): string[] {
    <span class="hljs-comment">// æŒ‰è¡Œåˆ†ï¼ŒæŒ‰æ¢è¡Œç¬¦æ‹†åˆ†ä¸ºæ•°ç»„</span>
    <span class="hljs-keyword">if</span> (mode === <span class="hljs-string">'line'</span>) <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\r?\n/</span>);
    <span class="hljs-comment">// æŒ‰å­—ç¬¦åˆ†ï¼ŒæŠŠå­—ç¬¦ä¸²æ‹†åˆ†æˆå•ä¸ªå­—ç¬¦æ•°ç»„</span>
    <span class="hljs-keyword">if</span> (mode === <span class="hljs-string">'char'</span>) <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">split</span>(<span class="hljs-string">''</span>);
    <span class="hljs-comment">//ç”¨æ­£åˆ™å°†æ–‡æœ¬åˆ‡æˆä¸­æ–‡å•å­—ã€è‹±æ–‡å•è¯ã€å…¶ä»–å•ä¸ªç¬¦å·</span>
    <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/[\u4e00-\u9fa5]|\w+|[^\w\u4e00-\u9fa5]/g</span>) || [];
  }

  <span class="hljs-comment">// LCSæ„å»ºDP</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">buildLCS</span>(<span class="hljs-params">a: string[], b: string[]</span>) {
    <span class="hljs-comment">// æ„å»ºäºŒç»´æ•°ç»„ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸º0</span>
    <span class="hljs-comment">// dp[i][j]è¡¨ç¤ºä»a[i:]ä¸b[j:]çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦</span>
    <span class="hljs-keyword">const</span> dp = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: a.<span class="hljs-property">length</span> + <span class="hljs-number">1</span> }, <span class="hljs-function">() =&gt;</span>
      <span class="hljs-title class_">Array</span>(b.<span class="hljs-property">length</span> + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>)
    );

    <span class="hljs-comment">// å€’åºå¡«å……dp</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = a.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = b.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">0</span>; j--) {
        <span class="hljs-keyword">if</span> (a[i] === b[j]) {
          dp[i][j] = dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> {
          dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i + <span class="hljs-number">1</span>][j], dp[i][j + <span class="hljs-number">1</span>]);
        }
      }
    }

    <span class="hljs-keyword">return</span> dp;
  }

  <span class="hljs-comment">// å¾—åˆ°diffç»“æ„</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">diffTokens</span>(<span class="hljs-params">a: string[], b: string[]</span>): <span class="hljs-title class_">DiffPart</span>[] {
    <span class="hljs-comment">//æ„å»ºæ–°æ—§å†…å®¹dpæ•°ç»„</span>
    <span class="hljs-keyword">const</span> dp = <span class="hljs-title function_">buildLCS</span>(a, b);
    <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>,
      j = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">DiffPart</span>[] = [];

    <span class="hljs-comment">// ä¾¿åˆ©æ–°æ—§å†…å®¹</span>
    <span class="hljs-keyword">while</span> (i &lt; a.<span class="hljs-property">length</span> || j &lt; b.<span class="hljs-property">length</span>) {
      <span class="hljs-comment">//è‹¥å½“å‰tokenç›¸ç­‰ï¼Œåˆ™è®°å½•ä¸‹æ¥å¹¶ç§»åŠ¨i j</span>
      <span class="hljs-keyword">if</span> (i &lt; a.<span class="hljs-property">length</span> &amp;&amp; j &lt; b.<span class="hljs-property">length</span> &amp;&amp; a[i] === b[j]) {
        result.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>, <span class="hljs-attr">text</span>: a[i] });
        i++;
        j++;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
        j &lt; b.<span class="hljs-property">length</span> &amp;&amp;
        (i === a.<span class="hljs-property">length</span> || dp[i][j + <span class="hljs-number">1</span>] &gt;= dp[i + <span class="hljs-number">1</span>][j])
      ) {
        result.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span>, <span class="hljs-attr">text</span>: b[j] });
        j++;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i &lt; a.<span class="hljs-property">length</span>) {
        result.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'delete'</span>, <span class="hljs-attr">text</span>: a[i] });
        i++;
      }
    }
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-comment">// å°†diff è½¬åŒ–æˆå·¦å³ä¸¤ä¾§å±•ç¤º</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">buildSideBySide</span>(<span class="hljs-params">parts: DiffPart[]</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">oldView</span>: <span class="hljs-title class_">DiffPart</span>[] = [];
    <span class="hljs-keyword">const</span> <span class="hljs-attr">newView</span>: <span class="hljs-title class_">DiffPart</span>[] = [];

    parts.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (p.<span class="hljs-property">type</span> === <span class="hljs-string">'equal'</span>) {
        oldView.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>, <span class="hljs-attr">text</span>: p.<span class="hljs-property">text</span> });
        newView.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>, <span class="hljs-attr">text</span>: p.<span class="hljs-property">text</span> });
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p.<span class="hljs-property">type</span> === <span class="hljs-string">'delete'</span>) {
        oldView.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'delete'</span>, <span class="hljs-attr">text</span>: p.<span class="hljs-property">text</span> });
        newView.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>, <span class="hljs-attr">text</span>: p.<span class="hljs-property">text</span> });
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p.<span class="hljs-property">type</span> === <span class="hljs-string">'insert'</span>) {
        oldView.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'equal'</span>, <span class="hljs-attr">text</span>: p.<span class="hljs-property">text</span> });
        newView.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span>, <span class="hljs-attr">text</span>: p.<span class="hljs-property">text</span> });
      }
    });

    <span class="hljs-keyword">return</span> { oldView, newView };
  }

  <span class="hljs-keyword">const</span> oldTokens = <span class="hljs-title function_">tokenize</span>(oldText, granularity);
  <span class="hljs-keyword">const</span> newTokens = <span class="hljs-title function_">tokenize</span>(newText, granularity);

  <span class="hljs-keyword">const</span> diffParts = <span class="hljs-title function_">diffTokens</span>(oldTokens, newTokens);
  <span class="hljs-keyword">const</span> { oldView, newView } = <span class="hljs-title function_">buildSideBySide</span>(diffParts);

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDiff</span>(<span class="hljs-params">parts: DiffPart[]</span>) {
    <span class="hljs-keyword">return</span> parts.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">p, i</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (p.<span class="hljs-property">type</span> === <span class="hljs-string">'equal'</span>) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{p.text}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
      <span class="hljs-keyword">if</span> (p.<span class="hljs-property">type</span> === <span class="hljs-string">'delete'</span>)
        <span class="hljs-keyword">return</span> (
          <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"deleted"</span>&gt;</span>
            {p.text}
          <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
        );
      <span class="hljs-keyword">if</span> (p.<span class="hljs-property">type</span> === <span class="hljs-string">'insert'</span>) {
        <span class="hljs-keyword">return</span> (
          <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"inserted"</span>&gt;</span>
            {p.text}
          <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
        );
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    });
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"word-diff-tool"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Title</span> <span class="hljs-attr">level</span>=<span class="hljs-string">{3}</span>&gt;</span>Word æ–‡æœ¬å¯¹æ¯”å·¥å…·<span class="hljs-tag">&lt;/<span class="hljs-name">Title</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">Space</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginBottom:</span> <span class="hljs-attr">16</span> }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Upload</span>
          <span class="hljs-attr">beforeUpload</span>=<span class="hljs-string">{file</span> =&gt;</span> {
            handleUpload(file, 'old').catch(err =&gt; {
              console.log('æ–‡ä»¶å¤„ç†å¤±è´¥', err);
            });
            return false;
          }}
          showUploadList={false}
        &gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">UploadOutlined</span> /&gt;</span>}&gt;ä¸Šä¼ æ—§æ–‡æœ¬<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">Upload</span>
          <span class="hljs-attr">beforeUpload</span>=<span class="hljs-string">{file</span> =&gt;</span> {
            handleUpload(file, 'new').catch(err =&gt; {
              console.log('æ–‡ä»¶å¤„ç†å¤±è´¥', err);
            });
            return false;
          }}
          showUploadList={false}
        &gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">UploadOutlined</span> /&gt;</span>}&gt;ä¸Šä¼ æ–°æ–‡æœ¬<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">Select</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{granularity}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{v</span> =&gt;</span> setGranularity(v)}
          className="granularity-select"
        &gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Select.Option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"word"</span>&gt;</span>æŒ‰è¯ diff<span class="hljs-tag">&lt;/<span class="hljs-name">Select.Option</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Select.Option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"char"</span>&gt;</span>æŒ‰å­—ç¬¦ diff<span class="hljs-tag">&lt;/<span class="hljs-name">Select.Option</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Select.Option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"line"</span>&gt;</span>æŒ‰è¡Œ diff<span class="hljs-tag">&lt;/<span class="hljs-name">Select.Option</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Select</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Space</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">Row</span> <span class="hljs-attr">gutter</span>=<span class="hljs-string">{24}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Col</span> <span class="hljs-attr">span</span>=<span class="hljs-string">{12}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"diff-col"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"col-title old"</span>&gt;</span>æ—§ç‰ˆæœ¬å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextArea</span>
              <span class="hljs-attr">rows</span>=<span class="hljs-string">{10}</span>
              <span class="hljs-attr">value</span>=<span class="hljs-string">{oldText}</span>
              <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setOldText(e.target.value)}
            /&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"diff-result"</span>&gt;</span>{renderDiff(oldView)}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Col</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">Col</span> <span class="hljs-attr">span</span>=<span class="hljs-string">{12}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"diff-col"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"col-title new"</span>&gt;</span>æ–°ç‰ˆæœ¬å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextArea</span>
              <span class="hljs-attr">rows</span>=<span class="hljs-string">{10}</span>
              <span class="hljs-attr">value</span>=<span class="hljs-string">{newText}</span>
              <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setNewText(e.target.value)}
            /&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"diff-result"</span>&gt;</span>{renderDiff(newView)}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Col</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Row</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">WordDiffTool</span>;
</code></pre>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-class">.word-diff-tool</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">24px</span>;

  <span class="hljs-selector-class">.diff-col</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.05</span>);

    <span class="hljs-selector-class">.col-title</span> {
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;

      <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-class">.old</span> {
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#c0392b</span>;
      }
      <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-class">.new</span> {
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#27ae60</span>;
      }
    }

    <span class="hljs-selector-class">.diff-result</span> {
      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">min-height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f0f0f0</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.8</span>;
      <span class="hljs-attribute">white-space</span>: pre-wrap;
      <span class="hljs-attribute">overflow</span>: auto;
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#fafafa</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#bbb</span>;
    }
  }

  <span class="hljs-selector-class">.deleted</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#ffe5e5</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#e11</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">1px</span> <span class="hljs-number">3px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;
  }

  <span class="hljs-selector-class">.inserted</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#e6ffed</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#0a0</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">1px</span> <span class="hljs-number">3px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸‰å‚»æ’åºï¼ˆå†’æ³¡ï¼Œé€‰æ‹©ï¼Œæ’å…¥ï¼‰Javaå¤§ç™½è¯ï¼ˆè€æ¯•ç™»å¯ä»¥è·³è¿‡ï¼‰]]></title>    <link>https://juejin.cn/post/7578820431039332392</link>    <guid>https://juejin.cn/post/7578820431039332392</guid>    <pubDate>2025-12-02T02:45:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578820431039332392" data-draft-id="7578402574652227636" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸‰å‚»æ’åºï¼ˆå†’æ³¡ï¼Œé€‰æ‹©ï¼Œæ’å…¥ï¼‰Javaå¤§ç™½è¯ï¼ˆè€æ¯•ç™»å¯ä»¥è·³è¿‡ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T02:45:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zhengzizhe"/> <meta itemprop="url" content="https://juejin.cn/user/159867906828928"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸‰å‚»æ’åºï¼ˆå†’æ³¡ï¼Œé€‰æ‹©ï¼Œæ’å…¥ï¼‰Javaå¤§ç™½è¯ï¼ˆè€æ¯•ç™»å¯ä»¥è·³è¿‡ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/159867906828928/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zhengzizhe
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:45:33.000Z" title="Tue Dec 02 2025 02:45:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸‰ç§æ’åºç®—æ³•è¯¦è§£</h2>
<p>æœ¬æ–‡æ¡£è§£é‡Šäº†ä¸‰ç§åŸºæœ¬çš„æ’åºç®—æ³•åŠå…¶Javaå®ç°ã€‚æ‰€æœ‰å®ç°éƒ½å°†ç›¸åŒçš„æ•°ç»„<code>[1, 6, 8, 2, 3]</code>æŒ‰å‡åºæ’åˆ—ã€‚</p>
<h3 data-id="heading-1">1. é€‰æ‹©æ’åº (choose.java)</h3>
<p>é€‰æ‹©æ’åºé€šè¿‡é‡å¤ä»æœªæ’åºéƒ¨åˆ†æ‰¾åˆ°æœ€å°å…ƒç´ å¹¶å°†å…¶æ”¾ç½®åœ¨å¼€å¤´æ¥å·¥ä½œã€‚</p>
<h4 data-id="heading-2">å·¥ä½œåŸç†ï¼š</h4>
<ol>
<li>åœ¨æ•´ä¸ªæ•°ç»„ä¸­æ‰¾åˆ°æœ€å°å…ƒç´ å¹¶ä¸ç¬¬ä¸€ä¸ªå…ƒç´ äº¤æ¢</li>
<li>åœ¨å‰©ä½™æœªæ’åºéƒ¨åˆ†æ‰¾åˆ°æœ€å°å…ƒç´ å¹¶ä¸ç¬¬äºŒä¸ªå…ƒç´ äº¤æ¢</li>
<li>é‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°æ•´ä¸ªæ•°ç»„æœ‰åº</li>
</ol>
<h4 data-id="heading-3">å®ç°ä»£ç ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-type">int</span>[] a = {<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>};
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; a.length; i++) {
        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> i;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i; j &lt; a.length; j++) {
            <span class="hljs-keyword">if</span> (a[index] &gt; a[j]) {
                index = j;
            }
        }
        <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> a[i];
        a[i] = a[index];
        a[index] = temp;
    }
    System.out.println(Arrays.toString(a));
}
</code></pre>
<h4 data-id="heading-4">ç‰¹ç‚¹ï¼š</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li>
<li>ä¸ç¨³å®šï¼ˆå¯èƒ½ä¼šæ”¹å˜ç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹é¡ºåºï¼‰</li>
<li>åœ¨å°æ•°æ®é›†ä¸Šè¡¨ç°è‰¯å¥½</li>
</ul>
<h3 data-id="heading-5">2. å†’æ³¡æ’åº (effervescence.java)</h3>
<p>å†’æ³¡æ’åºé€šè¿‡é‡å¤éå†åˆ—è¡¨ï¼Œæ¯”è¾ƒç›¸é‚»å…ƒç´ å¹¶åœ¨é¡ºåºé”™è¯¯æ—¶äº¤æ¢å®ƒä»¬æ¥å·¥ä½œã€‚æ¯ä¸€è½®éå†åï¼Œæœ€å¤§çš„å…ƒç´ ä¼š"å†’æ³¡"åˆ°æ•°ç»„çš„æœ«å°¾ã€‚</p>
<h4 data-id="heading-6">å·¥ä½œåŸç†ï¼š</h4>
<ol>
<li>æ¯”è¾ƒç›¸é‚»å…ƒç´ ï¼Œå¦‚æœå·¦è¾¹çš„å¤§äºå³è¾¹çš„åˆ™äº¤æ¢å®ƒä»¬</li>
<li>æ¯æ¬¡å®Œæ•´éå†åï¼Œæœªæ’åºå…ƒç´ ä¸­çš„æœ€å¤§å€¼ä¼šç§»åŠ¨åˆ°æ­£ç¡®ä½ç½®</li>
<li>é‡å¤ç›´åˆ°ä¸éœ€è¦äº¤æ¢ä¸ºæ­¢</li>
</ol>
<h4 data-id="heading-7">å®ç°ä»£ç ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-type">int</span>[] a = {<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>};
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; a.length - <span class="hljs-number">1</span>; i++) {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; a.length - <span class="hljs-number">1</span> - i; j++) {
            <span class="hljs-keyword">if</span> (a[j] &gt; a[j + <span class="hljs-number">1</span>]) {
                <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> a[j];
                a[j] = a[j + <span class="hljs-number">1</span>];
                a[j + <span class="hljs-number">1</span>] = temp;
            }
        }
    }
    System.out.println(Arrays.toString(a));
}
</code></pre>
<h4 data-id="heading-8">ç‰¹ç‚¹ï¼š</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li>
<li>ç¨³å®šæ’åºç®—æ³•</li>
<li>è‡ªé€‚åº” - å¯ä»¥æ£€æµ‹åˆ—è¡¨æ˜¯å¦å·²ç»æ’åº</li>
</ul>
<h3 data-id="heading-9">3. æ’å…¥æ’åº (insert.java)</h3>
<p>æ’å…¥æ’åºé€šè¿‡é€ä¸ªæ„å»ºæœ€ç»ˆçš„æ’åºæ•°ç»„æ¥å·¥ä½œã€‚å®ƒçš„å·¥ä½œæ–¹å¼ç±»ä¼¼äºäººä»¬å¦‚ä½•æ•´ç†æ‰‹ä¸­çš„æ‰‘å…‹ç‰Œã€‚</p>
<h4 data-id="heading-10">å·¥ä½œåŸç†ï¼š</h4>
<ol>
<li>ä»ç¬¬äºŒä¸ªå…ƒç´ ï¼ˆç´¢å¼•1ï¼‰å¼€å§‹</li>
<li>å°†å…¶ä¸å‰é¢çš„å…ƒç´ æ¯”è¾ƒå¹¶æ’å…¥åˆ°æ­£ç¡®ä½ç½®</li>
<li>ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ å¹¶é‡å¤ç›´åˆ°æ•´ä¸ªæ•°ç»„æœ‰åº</li>
</ol>
<h4 data-id="heading-11">å®ç°ä»£ç ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-type">int</span>[] a = {<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>};
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; a.length; i++) {
        <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i;
        <span class="hljs-keyword">for</span> (; j &gt; <span class="hljs-number">0</span>; j--) {
            <span class="hljs-keyword">if</span> (a[j] &lt; a[j - <span class="hljs-number">1</span>]) {
                <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> a[j];
                a[j] = a[j - <span class="hljs-number">1</span>];
                a[j - <span class="hljs-number">1</span>] = temp;
            } <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">break</span>;
        }
    }
    System.out.println(Arrays.toString(a));
}
</code></pre>
<h4 data-id="heading-12">ç‰¹ç‚¹ï¼š</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li>
<li>ç¨³å®šæ’åºç®—æ³•</li>
<li>å¯¹å°æ•°æ®é›†é«˜æ•ˆ</li>
<li>è‡ªé€‚åº” - å¯¹å·²åŸºæœ¬æ’åºçš„æ•°æ®é›†å¾ˆé«˜æ•ˆ</li>
</ul>
<h3 data-id="heading-13">æ€»ç»“</h3>
<p>è¿™ä¸‰ç§ç®—æ³•éƒ½å…·æœ‰O(nÂ²)çš„æ—¶é—´å¤æ‚åº¦ï¼Œä½¿å¾—å®ƒä»¬å¯¹äºå¤§æ•°æ®é›†æ¥è¯´æ•ˆç‡ä¸é«˜ã€‚ä½†å®ƒä»¬å¯¹æ•™è‚²ç›®çš„å’Œå°æ•°ç»„æ’åºå¾ˆæœ‰ä»·å€¼ã€‚æ¯ç§ç®—æ³•éƒ½æœ‰è‡ªå·±çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æ’å…¥æ’åºæ˜¯å…¶ä¸­æœ€æœ‰ä»·å€¼çš„ï¼Œä¸€å¥è¯ï¼Œå‡è®¾ä¸€ä¾§æ˜¯æœ‰åºçš„ï¼Œæ–°å…ƒç´ å»å¯»æ‰¾æœ‰åºåˆ—è¡¨çš„ä½ç½®</li>
<li>é€‰æ‹©æ’åºæœ€å°åŒ–äº¤æ¢æ¬¡æ•°ï¼Œä¸€å¥è¯ï¼Œå‡è®¾ä¸€ä¾§æ˜¯æœ‰åºçš„ï¼Œå»å‰©ä¸‹çš„é€‰æ‹©ä¸€ä¸ªæœ€å¤§æˆ–è€…æœ€å°ç„¶åæ”¾å…¥æœ«å°¾</li>
<li>å†’æ³¡æ’åºç®€å•æ˜“æ‡‚ä¸”æ˜“äºå®ç° ï¼Œä¸€å¥è¯ï¼Œå‡è®¾ä¸€ä¾§æ˜¯æœ‰åºçš„ï¼Œä»å¼€å¤´æˆ–è€…ç»“å°¾ï¼Œä¸æ–­å°±è¿‘æ¯”è¾ƒï¼ŒæŠŠæœ€å¤§æœ€å°æ‹±åˆ°ä¸€ä¾§</li>
<li>æ’å…¥æ’åºå¯¹äºè¿‘ä¼¼æ’åºçš„æ•°ç»„å¾ˆé«˜æ•ˆï¼Œå¹¶ä¸”æ˜¯ç¨³å®šçš„</li>
</ul>
<p>å¯¹äºè¾ƒå¤§çš„æ•°æ®é›†ï¼Œæ›´é«˜çº§çš„ç®—æ³•å¦‚å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºæˆ–å †æ’åºå°†æ˜¯æ›´åˆé€‚çš„é€‰æ‹©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¬å¸ React åº”ç”¨æ„Ÿè§‰å¾ˆæ…¢ï¼Œæˆ‘æŠŠæ²¡å¿…è¦çš„é‡å¤æ¸²æŸ“ç æ‰äº† 40%!]]></title>    <link>https://juejin.cn/post/7578793960626602010</link>    <guid>https://juejin.cn/post/7578793960626602010</guid>    <pubDate>2025-12-02T02:47:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578793960626602010" data-draft-id="7578777952726515746" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¬å¸ React åº”ç”¨æ„Ÿè§‰å¾ˆæ…¢ï¼Œæˆ‘æŠŠæ²¡å¿…è¦çš„é‡å¤æ¸²æŸ“ç æ‰äº† 40%!"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T02:47:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¬å¸ React åº”ç”¨æ„Ÿè§‰å¾ˆæ…¢ï¼Œæˆ‘æŠŠæ²¡å¿…è¦çš„é‡å¤æ¸²æŸ“ç æ‰äº† 40%!
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:47:19.000Z" title="Tue Dec 02 2025 02:47:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å…¬å¸ React åº”ç”¨è¡¨ç°å¾ˆå·®ã€‚é‡å¤æ¸²æŸ“æ„Ÿè§‰åƒè¿·ä¸€æ ·ï¼Œä¸çŸ¥é“å¤§å®¶æœ‰ä¸æ²¡æœ‰è¿‡è¿™æ ·çš„ç»å†ï¼š</p>
<ul>
<li>æ˜æ˜ä¼ å…¥çš„æ•°æ®æ²¡å˜ï¼Œç»„ä»¶å´è¿˜æ˜¯é‡æ¸²æŸ“</li>
<li>çˆ¶ç»„ä»¶ä¸€æ›´æ–°ï¼Œå¾ˆå¤šå­ç»„ä»¶è·Ÿç€ä¸€èµ·é‡æ¸²æŸ“ï¼ˆéƒ¨åˆ†å­ç»„ä»¶æ•°æ®å¹¶æ²¡æœ‰å˜åŒ–ï¼‰</li>
<li>åœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰å‡½æ•°ï¼Œå¯¼è‡´æ¯æ¬¡æ¸²æŸ“éƒ½å‡ºç°â€œæ–°çš„â€å‡½æ•°å¼•ç”¨</li>
<li>Context API çš„æ›´æ–°æŠŠå¤§å—åŒºåŸŸéƒ½åˆ·æ–°äº†ï¼Œè€Œä¸æ˜¯åªåˆ·æ–°éœ€è¦çš„é‚£ä¸€å°å—</li>
</ul>
<p>è¿™äº›é—®é¢˜ä¹Ÿä¾§é¢åæ˜ ï¼Œè¦æ±‚ <code>React</code> ä½¿ç”¨è€…éœ€è¦æ›´å¤šçš„å¿ƒæ™ºä»¥åŠå¯¹æ¡†æ¶åŸç†æ›´å¤šäº†è§£ï¼Œæ‰èƒ½åšå¥½ <code>React</code> å¼€å‘ã€‚</p>
<p>ä½†è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¯é¢˜ï¼Œå½“é¢è¯•å®˜é—®ä½ æ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™ï¼Œå…³äº <code>React</code> æ¡†æ¶å±‚é¢çš„ä¼˜åŒ–ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼Œå¦‚ä½•è§£å†³å…¬å¸çš„ React åº”ç”¨é‡å¤æ¸²æŸ“é—®é¢˜ï¼</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸ºä»€ä¹ˆæ€§èƒ½å‡ºç°é—®é¢˜çš„åŸå› </p>
<h2 data-id="heading-1">ç”¨ Profiler æŠŠé—®é¢˜æªå‡ºæ¥</h2>
<p>ç¬¬ä¸€æ­¥å¼€å§‹ç”¨æ•°æ®æŸ¥çœ‹åˆ°åº•å“ªé‡Œå‡ºäº†é—®é¢˜ã€‚React DevTools é‡Œçš„ Profiler å¾ˆå¥½ç”¨ï¼Œå®ƒå¯ä»¥è®°å½•ä½ åœ¨åº”ç”¨ä¸­çš„äº¤äº’ï¼Œå‘Šè¯‰ä½ å“ªäº›ç»„ä»¶é‡æ¸²æŸ“äº†ã€ä¸ºä»€ä¹ˆé‡æ¸²æŸ“ã€ç”¨äº†å¤šé•¿æ—¶é—´ã€‚</p>
<p>è£…å¥½ React DevTools åï¼Œæ‰“å¼€ â€œProfilerâ€ æ ‡ç­¾ã€‚å¼€å§‹å½•åˆ¶ï¼Œåšä¸€äº›æ„Ÿè§‰å¡é¡¿çš„æ“ä½œï¼Œç„¶ååœæ­¢å½•åˆ¶ã€‚</p>
<p>ç”Ÿæˆçš„â€œç«ç„°å›¾â€èƒ½å¾ˆç›´è§‚çš„å‘Šè¯‰æˆ‘ä»¬å‘ç”Ÿäº†ä»€ä¹ˆã€‚æˆ‘èƒ½çœ‹åˆ°ä¸€äº›ç»„ä»¶åœ¨ props çœ‹èµ·æ¥æ²¡å˜çš„æƒ…å†µä¸‹ä¹Ÿåœ¨é‡æ¸²æŸ“ã€‚è¿™å°±æˆäº†æˆ‘ä¼˜åŒ–çš„åˆ‡å…¥ç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d24eb12eb0f4cb7ae823a9c265582d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765248439&amp;x-signature=IC0VO1XUgQvDQ4mmp1aTq%2FgRbFc%3D" alt="1_eZCNwCucXBbH7il1bUI-3g.webp" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸€äº›ç®€å•å´æœ‰æ•ˆçš„ä¿®å¤æªæ–½</h2>
<p>å®šä½åˆ°é—®é¢˜åŒºåŸŸåï¼Œæˆ‘å¼€å§‹é€ä¸ªå°è¯•ä¿®å¤ã€‚æœ‰äº›æ–¹æ³•å¾ˆç®€å•ï¼Œä½†æ•ˆæœå¾ˆæ˜æ˜¾ã€‚</p>
<h3 data-id="heading-3">ç”¨ React.memo é˜»æ­¢æ— æ•ˆæ¸²æŸ“</h3>
<p>ä¸€ä¸ªå¾ˆå¸¸è§çš„é—®é¢˜æ˜¯ï¼šçˆ¶ç»„ä»¶é‡æ¸²æŸ“æ—¶ï¼Œå­ç»„ä»¶ä¹Ÿè·Ÿç€é‡æ¸²æŸ“ï¼Œå“ªæ€•å®ƒè‡ªå·±çš„ props å¹¶æ²¡æœ‰å˜åŒ–ã€‚</p>
<ul>
<li>é—®é¢˜ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œåªè¦çˆ¶ç»„ä»¶æ¸²æŸ“ï¼ŒReact ä¹Ÿä¼šæŠŠå®ƒçš„å­ç»„ä»¶ä¸€èµ·æ¸²æŸ“ã€‚</li>
<li>è§£å†³ï¼šç”¨ React.memo åŒ…è£¹ç»„ä»¶ï¼Œå‘Šè¯‰ Reactï¼šâ€œåªæœ‰å½“è¿™ä¸ªç»„ä»¶çš„ props çœŸçš„å˜äº†æ‰é‡æ¸²æŸ“ã€‚æ³¨æ„ï¼Œå®ƒåªä¼šå¯¹ props åšæµ…æ¯”è¾ƒï¼ä¸¾ä¾‹å¦‚ä¸‹ï¼š</li>
</ul>
<p>ä¹‹å‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>Â <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params">{Â nameÂ }</span>)Â {
Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RenderingÂ UserProfile'</span>);
Â Â <span class="hljs-keyword">return</span>Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>ä¹‹åï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>Â {Â memoÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span>Â <span class="hljs-title class_">UserProfile</span>Â =Â <span class="hljs-title function_">memo</span>(<span class="hljs-keyword">function</span>Â 
<span class="hljs-title function_">UserProfile</span>(<span class="hljs-params">{Â nameÂ }</span>)Â {
Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RenderingÂ UserProfile'</span>);
Â Â <span class="hljs-keyword">return</span>Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
});
</code></pre>
<p>æŠŠç»„ä»¶ç”¨ React.memo åŒ…èµ·æ¥åï¼Œå®ƒåªä¼šåœ¨ name è¿™ä¸ª prop å˜åŒ–æ—¶é‡æ¸²æŸ“ï¼Œè€Œä¸æ˜¯æ¯æ¬¡çˆ¶ç»„ä»¶æ¸²æŸ“éƒ½è·Ÿç€æ¥ä¸€éã€‚</p>
<h3 data-id="heading-4">ç”¨ useMemoizedFn å›ºå®šå‡½æ•°å¼•ç”¨</h3>
<p>åœ¨å¤æ‚åœºæ™¯æœ€å¥½æ”¾å¼ƒç”¨ useCallbackï¼Œå†™ä¾èµ–æ˜¯ä¸€ä¸ªå¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨ <code>ahooks</code> åº“å¯¼å‡ºçš„ <code>useMemoizedFn</code> å‡½æ•°ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<ul>
<li>useCallback é€šè¿‡ä¾èµ–é¡¹ä¿è¯â€œå‡½æ•°å¼•ç”¨ç¨³å®šâ€ï¼Œä½†åªåœ¨ä¾èµ–ä¸å˜æ—¶ç¨³å®šï¼›ä¸€æ—¦ä¾èµ–å˜æ›´ï¼Œå‡½æ•°å¼•ç”¨ä¹Ÿä¼šå˜ï¼Œå®¹æ˜“è®©å­ç»„ä»¶è¯¯ä»¥ä¸º props å˜äº†è€Œé‡æ¸²æŸ“ã€‚åŒæ—¶ä¼šæœ‰é—­åŒ…ä¸­æ‹¿åˆ°æ—§å€¼çš„é—®é¢˜ã€‚</li>
<li>ahooks çš„ useMemoizedFn å§‹ç»ˆè¿”å›â€œç¨³å®šçš„å‡½æ•°å¼•ç”¨â€ï¼ŒåŒæ—¶å†…éƒ¨èƒ½æ‹¿åˆ°æœ€æ–°çš„é—­åŒ…å€¼ï¼Œé¿å…â€œé™ˆæ—§é—­åŒ…â€é—®é¢˜ä¸ä¸å¿…è¦çš„é‡æ¸²æŸ“ã€‚</li>
</ul>
<p>ä¸¾ä¾‹ï¼š</p>
<p>useCallback</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// useCallbackï¼šä¾èµ–å˜åŒ–ä¼šå¯¼è‡´å‡½æ•°å¼•ç”¨å˜åŒ–</span>
<span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);

<span class="hljs-comment">// å½“ state å˜åŒ–,  func å‡½æ•°çš„å¼•ç”¨æ‰å˜åŒ–</span>
<span class="hljs-keyword">const</span> func = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(state);
}, [state]);
</code></pre>
<p>useMemoizedFn</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// useMemoizedFnï¼šå§‹ç»ˆç¨³å®šçš„å‡½æ•°å¼•ç”¨ï¼Œå†…éƒ¨æ€»èƒ½æ‹¿åˆ°æœ€æ–°çŠ¶æ€ï¼Œä¸ç”¨å†™ç¬¬äºŒä¸ªä¾èµ–å‚æ•°</span>
<span class="hljs-keyword">const</span> func = <span class="hljs-title function_">useMemoizedFn</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(state);
});
</code></pre>
<h3 data-id="heading-5">ç”¨ useMemo è®©å¯¹è±¡å’Œæ•°ç»„ä¿æŒç¨³å®š</h3>
<p>å’Œå‡½æ•°ç±»ä¼¼ï¼Œå¦‚æœä½ åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­åˆ›å»ºå¯¹è±¡æˆ–æ•°ç»„ï¼Œä¹Ÿä¼šå¸¦æ¥é—®é¢˜ã€‚</p>
<ul>
<li>é—®é¢˜ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ–°å»ºä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„ï¼Œå³ä¾¿é‡Œé¢çš„æ•°æ®æ²¡å˜ã€‚æŠŠå®ƒä½œä¸º prop ä¼ ç»™ç»è¿‡è®°å¿†åŒ–çš„å­ç»„ä»¶ï¼Œä»ç„¶ä¼šè§¦å‘é‡æ¸²æŸ“ã€‚</li>
<li>è§£å†³ï¼š useMemo ä¼šå¯¹å€¼è¿›è¡Œè®°å¿†åŒ–ï¼Œåªåœ¨ä¾èµ–å‘ç”Ÿå˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—ã€‚</li>
</ul>
<p>ä¹‹å‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>Â <span class="hljs-title function_">StyleComponent</span>(<span class="hljs-params">{Â isHighlightedÂ }</span>)Â {
Â Â <span class="hljs-keyword">const</span>Â styleÂ =Â {
Â Â Â Â <span class="hljs-attr">backgroundColor</span>:Â isHighlightedÂ ?Â 
Â Â Â Â <span class="hljs-string">'yellow'</span>Â :Â <span class="hljs-string">'white'</span>,
Â Â Â Â <span class="hljs-attr">padding</span>:Â <span class="hljs-number">10</span>
Â Â };

Â Â <span class="hljs-keyword">return</span>Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span>&gt;</span>SomeÂ content&lt;/
Â Â div&gt;;
}
</span></code></pre>
<p>ä¹‹åï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>Â {Â useMemoÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">StyleComponent</span>(<span class="hljs-params">{Â isHighlightedÂ }</span>)Â {
Â Â <span class="hljs-keyword">const</span>Â styleÂ =Â <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">()Â =&gt;</span>Â ({
Â Â Â Â <span class="hljs-attr">backgroundColor</span>:Â isHighlightedÂ ?Â 
Â Â Â Â <span class="hljs-string">'yellow'</span>Â :Â <span class="hljs-string">'white'</span>,
Â Â Â Â <span class="hljs-attr">padding</span>:Â <span class="hljs-number">10</span>
Â Â }),Â [isHighlighted]);

Â Â <span class="hljs-keyword">return</span>Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span>&gt;</span>SomeÂ content&lt;/
Â Â div&gt;;
}
</span></code></pre>
<p>ç”¨ useMemo åï¼Œ style è¿™ä¸ªå¯¹è±¡åªä¼šåœ¨ isHighlighted å˜åŒ–æ—¶æ‰è¢«é‡æ–°åˆ›å»ºï¼Œé¿å…äº†ä¸å¿…è¦çš„é‡æ¸²æŸ“ã€‚</p>
<h3 data-id="heading-6">æ‹†åˆ† Context</h3>
<ul>
<li>Context API èƒ½é¿å…å±‚å±‚ä¼ é€’ propsï¼Œä½†ä¹Ÿå¯èƒ½æˆä¸ºæ€§èƒ½é™·é˜±ã€‚</li>
<li>é—®é¢˜ï¼šåªè¦æŸä¸ª Context çš„å€¼å˜åŒ–ï¼Œæ‰€æœ‰æ¶ˆè´¹å®ƒçš„ç»„ä»¶éƒ½ä¼šé‡æ¸²æŸ“ï¼Œå³ä¾¿å®ƒåªå…³å¿ƒå…¶ä¸­æœªå˜çš„é‚£ä¸€å°éƒ¨åˆ†æ•°æ®ã€‚</li>
<li>è§£å†³ï¼šä¸è¦ç”¨ä¸€ä¸ªâ€œå¤§è€Œå…¨â€çš„ Contextï¼ŒæŠŠä¸åŒçš„çŠ¶æ€æ‹†åˆ†æˆå¤šä¸ªæ›´å°çš„ Contextã€‚</li>
<li>ä¾‹å¦‚ï¼šä¸å†ç”¨ä¸€ä¸ªåŒæ—¶åŒ…å«ç”¨æˆ·æ•°æ®ã€ä¸»é¢˜è®¾ç½®ã€é€šçŸ¥çš„ AppContext ï¼Œè€Œæ˜¯æ‹†æˆ UserContext ã€ ThemeContext ã€ NotificationContext ã€‚è¿™æ ·ä¸»é¢˜æ›´æ–°åªä¼šé‡æ¸²æŸ“ä½¿ç”¨ ThemeContext çš„ç»„ä»¶ã€‚</li>
</ul>
<h2 data-id="heading-7">æœ€ç»ˆæ•ˆæœ</h2>
<ul>
<li>åº”ç”¨è¿™äº›ä¿®å¤åå†æ¬¡ç”¨ Profiler æµ‹è¯•ï¼Œå·®å¼‚éå¸¸æ˜æ˜¾ã€‚æŒç»­çš„é‡å¤æ¸²æŸ“æ¶ˆå¤±äº†ï¼Œäº¤äº’æ›´é¡ºæ»‘ã€‚</li>
<li>æ•°æ®æ˜¾ç¤ºæ•´ä½“æ¸²æŸ“æ—¶é—´å‡å°‘äº†çº¦ 40%ï¼Œåº”ç”¨ç»ˆäºé¡ºç•…è¿è¡Œã€‚</li>
</ul>
<h2 data-id="heading-8">æ¬¢è¿åŠ å…¥äº¤æµç¾¤</h2>
<ul>
<li>æ’å…¥ä¸€ä¸ªæˆ‘å¼€å‘çš„ headlessï¼ˆæ— æ ·å¼ï¼‰ ç»„ä»¶åº“çš„å¹¿å‘Šï¼Œå‰ç«¯ç»„ä»¶åº“è¦†ç›–äº†å‰ç«¯ç»å¤§å¤šæ•°æŠ€æœ¯åœºæ™¯ï¼Œå¦‚æœä½ æƒ³å¯¹ç”Ÿäº§çº§å¯ç”¨çš„ç»„ä»¶åº“å¼€å‘æ„Ÿå…´è¶£ï¼Œæ¬¢è¿äº†è§£ï¼Œä¹Ÿæ¬¢è¿åŠ å…¥äº¤æµç¾¤ï¼š
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2F" target="_blank" title="https://www.frontlight.tech/" ref="nofollow noopener noreferrer">ç»„ä»¶åº“å®˜ç½‘</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">æ„Ÿè°¢ github star</a></li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>