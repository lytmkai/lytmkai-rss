<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[FossFLOWï¼šå¼€æºç­‰è·å›¾è¡¨å·¥å…·ï¼Œä¸ºæŠ€æœ¯æ–‡æ¡£æ³¨å…¥ç«‹ä½“æ´»åŠ›ï¼]]></title>    <link>https://juejin.cn/post/7601041482892623922</link>    <guid>https://juejin.cn/post/7601041482892623922</guid>    <pubDate>2026-01-31T12:12:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601041482892623922" data-draft-id="7601077764424237106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="FossFLOWï¼šå¼€æºç­‰è·å›¾è¡¨å·¥å…·ï¼Œä¸ºæŠ€æœ¯æ–‡æ¡£æ³¨å…¥ç«‹ä½“æ´»åŠ›ï¼"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2026-01-31T12:12:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            FossFLOWï¼šå¼€æºç­‰è·å›¾è¡¨å·¥å…·ï¼Œä¸ºæŠ€æœ¯æ–‡æ¡£æ³¨å…¥ç«‹ä½“æ´»åŠ›ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T12:12:52.000Z" title="Sat Jan 31 2026 12:12:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ–‡ç« ç®€ä»‹ï¼šFossFLOWæ˜¯ä¸€æ¬¾åˆ›æ–°çš„å¼€æºç­‰è·å›¾è¡¨å·¥å…·ï¼Œä¸“ä¸ºæŠ€æœ¯æ–‡æ¡£è®¾è®¡ã€‚å®ƒé€šè¿‡ç«‹ä½“è§†è§’å°†å¤æ‚çš„ç³»ç»Ÿæ¶æ„è½¬åŒ–ä¸ºç›´è§‚çš„3Då›¾è¡¨ï¼Œæ”¯æŒæ‹–æ”¾å¼æ“ä½œå’Œç¦»çº¿ä½¿ç”¨ï¼Œè®©æŠ€æœ¯å›¾è¡¨å˜å¾—ç”ŸåŠ¨æ˜“æ‡‚ã€‚æ— éœ€æ³¨å†Œï¼Œæ•°æ®å®‰å…¨å­˜å‚¨åœ¨æœ¬åœ°ï¼Œå¹¶æä¾›JSONå¯¼å…¥å¯¼å‡ºåŠŸèƒ½ã€‚æ— è®ºæ˜¯Dockerå¿«é€Ÿéƒ¨ç½²è¿˜æ˜¯åœ¨çº¿ä½“éªŒï¼ŒFossFLOWéƒ½èƒ½ä¸ºæ¶æ„å›¾ã€æµç¨‹å›¾æ³¨å…¥ç«‹ä½“æ´»åŠ›ï¼Œæ˜¯æå‡æŠ€æœ¯æ–‡æ¡£è¡¨ç°åŠ›çš„å¾—åŠ›åŠ©æ‰‹ã€‚</p>
</blockquote>
<p>ä½ æ˜¯å¦æ›¾ç»ä¸ºäº†ç»˜åˆ¶æ¸…æ™°çš„æŠ€æœ¯æ¶æ„å›¾æˆ–ç³»ç»Ÿæµç¨‹å›¾è€Œçƒ¦æ¼ï¼Ÿæ˜¯å¦è§‰å¾—ä¼ ç»Ÿçš„å¹³é¢å›¾è¡¨éš¾ä»¥è¡¨è¾¾å¤æ‚çš„å±‚æ¬¡å…³ç³»ï¼Ÿä»Šå¤©ï¼Œæˆ‘è¦å‘å¤§å®¶ä»‹ç»ä¸€æ¬¾ä»¤äººæƒŠè‰³çš„å¼€æºå·¥å…·â€”â€”<strong>FossFLOW</strong>ï¼Œå®ƒèƒ½è®©ä½ çš„æŠ€æœ¯å›¾è¡¨ç¬é—´å˜å¾—ç«‹ä½“ã€ç”ŸåŠ¨ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb593978666244e88a735fc3565d65d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770466372&amp;x-signature=kLsIqOoVTjJcXG%2BxDSrf4otY62M%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸŒŸ ä»€ä¹ˆæ˜¯FossFLOWï¼Ÿ</h2>
<p>FossFLOW æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ã€å¼€æºçš„æ¸è¿›å¼ Web åº”ç”¨ï¼ˆPWAï¼‰ï¼Œä¸“ä¸ºåˆ›å»ºç²¾ç¾çš„ç­‰è·å›¾è¡¨è€Œè®¾è®¡ã€‚å®ƒåŸºäº React å’Œ Isoflowï¼ˆç°å·² fork å¹¶ä»¥ fossflow åç§°å‘å¸ƒåˆ° NPMï¼‰åº“æ„å»ºï¼Œå®Œå…¨åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œå¹¶æ”¯æŒç¦»çº¿ä½¿ç”¨ï¼Œè®©ä½ éšæ—¶éšåœ°éƒ½èƒ½åˆ›ä½œå‡ºä¸“ä¸šçº§çš„æŠ€æœ¯å›¾è¡¨ï¼</p>
<p>githubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fstan-smith%2FFossFLOW" title="https://github.com/stan-smith/FossFLOW" target="_blank" ref="nofollow noopener noreferrer">github.com/stan-smith/â€¦</a></p>
<p>åœ¨çº¿åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fstan-smith.github.io%2FFossFLOW" title="https://stan-smith.github.io/FossFLOW" target="_blank" ref="nofollow noopener noreferrer">stan-smith.github.io/FossFLOW/</a></p>
<p>è¯¥é¡¹ç›®ç›®å‰åœ¨githubä¸Šå·²æœ‰<strong>17k</strong>Â â­ï¸star</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b01c34edfb8c4a51bf24bc0b1a0e8936~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770466372&amp;x-signature=tlErdVFvEOC31mgnO0y7OUYe%2BJQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">âœ¨ ä¸»è¦ç‰¹æ€§</h2>
<h3 data-id="heading-2">ğŸ¨Â <strong>ç«‹ä½“å›¾è¡¨ï¼Œè§†è§‰å‡çº§</strong></h3>
<ul>
<li>â€¢ åˆ›å»ºä»¤äººæƒŠå¹çš„3Dé£æ ¼æŠ€æœ¯å›¾è¡¨</li>
<li>â€¢ ç­‰è·è§†è§’è®©å¤æ‚çš„ç³»ç»Ÿæ¶æ„ä¸€ç›®äº†ç„¶</li>
<li>â€¢ æ‹–æ”¾å¼æ“ä½œï¼Œç®€å•ç›´è§‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7456231f1c14f6eb6757cb7b2b2071e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770466372&amp;x-signature=plYE1r8nubSrio2surZjCWmzLmg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">ğŸ”’Â <strong>éšç§ä¼˜å…ˆï¼Œå®‰å…¨å¯é </strong></h3>
<ul>
<li>â€¢ æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨æ‚¨çš„æµè§ˆå™¨ä¸­</li>
<li>â€¢ æ— éœ€æ³¨å†Œï¼Œæ— éœ€ä¸Šä¼ </li>
<li>â€¢ å®Œå…¨æ§åˆ¶ä½ çš„æ•°æ®</li>
</ul>
<h3 data-id="heading-4">ğŸ”„Â <strong>å¯¼å…¥å¯¼å‡ºï¼Œè½»æ¾åˆ†äº«</strong></h3>
<ul>
<li>â€¢ JSONæ ¼å¼å¯¼å…¥å¯¼å‡º</li>
<li>â€¢ å¿«é€Ÿåˆ†äº«ä½ çš„è®¾è®¡</li>
<li>â€¢ å®Œæ•´å¤‡ä»½åŠŸèƒ½</li>
</ul>
<h2 data-id="heading-5">ğŸš€ å¿«é€Ÿä¸Šæ‰‹</h2>
<h3 data-id="heading-6">ğŸ³Dockeréƒ¨ç½²</h3>
<p>åˆ›å»ºdocker-compose.ymlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">services:</span>
Â Â <span class="hljs-attr">fossflow:</span>
Â Â Â Â <span class="hljs-string">image:</span>Â <span class="hljs-string">stnsmith/fossflow:latest</span>
Â Â Â Â <span class="hljs-string">container_name:</span>Â <span class="hljs-string">fossflow</span>
Â Â Â Â <span class="hljs-attr">ports:</span>
Â Â Â Â Â Â <span class="hljs-string">-</span>Â <span class="hljs-string">"5010:80"</span>
Â Â Â Â <span class="hljs-attr">volumes:</span>
Â Â Â Â Â Â <span class="hljs-comment">#Â å¦‚æœè¦ç¦ç”¨æœåŠ¡ç«¯å­˜å‚¨ï¼Œå¯ä»¥æ³¨é‡Šæ‰è¿™è¡Œ</span>
Â Â Â Â Â Â <span class="hljs-string">-</span>Â <span class="hljs-string">./diagrams:/data/diagrams</span>
Â Â Â Â <span class="hljs-attr">environment:</span>
Â Â Â Â Â Â <span class="hljs-string">-</span>Â <span class="hljs-string">TZ=Asia/Shanghai</span>
Â Â Â Â Â Â <span class="hljs-comment">#Â å¦‚æœè¦å¯ç”¨æœåŠ¡ç«¯å­˜å‚¨ï¼Œæ³¨é‡Šæ‰ä¸‹é¢è¿™è¡Œ</span>
Â Â Â Â Â Â <span class="hljs-comment">#Â -Â ENABLE_SERVER_STORAGE="false"</span>
Â Â Â Â <span class="hljs-string">restart:</span>Â <span class="hljs-string">unless-stopped</span>
</code></pre>
<p>åœ¨docker-compose.yml åŒçº§å‘½ä»¤ä¸‹ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨</p>
<pre><code class="hljs">docker-composeÂ upÂ -d
</code></pre>
<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬å°±éƒ¨ç½²å®Œäº†ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥åœ°å€å°±å¯ä»¥è®¿é—®äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a748f8626b44dfd9850a4cfbc5b9af8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770466372&amp;x-signature=JNN1zQdIc%2B2oEsgLbT2Axt4cZZ4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">ğŸŒåœ¨çº¿ä½“éªŒ</h3>
<p>ç›´æ¥è®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fstan-smith.github.io%2FFossFLOW" title="https://stan-smith.github.io/FossFLOW" target="_blank" ref="nofollow noopener noreferrer">stan-smith.github.io/FossFLOW/</a></p>
<h3 data-id="heading-8">ğŸ“±æœ¬åœ°å¯åŠ¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#Â å…‹éš†ä»“åº“</span>
gitÂ <span class="hljs-built_in">clone</span>Â https://github.com/stan-smith/FossFLOW
<span class="hljs-built_in">cd</span>Â FossFLOW

<span class="hljs-comment">#Â å®‰è£…ä¾èµ–</span>
npmÂ install

<span class="hljs-comment">#Â å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span>
npmÂ start
</code></pre>
<h2 data-id="heading-9">ğŸ› ï¸ ä½¿ç”¨æŒ‡å—</h2>
<h3 data-id="heading-10">ğŸ“ˆ1. åˆ›å»ºå›¾è¡¨</h3>
<ul>
<li>â€¢ ç‚¹å‡»å³ä¸Šè§’"+"æŒ‰é’®æ‰“å¼€ç»„ä»¶åº“</li>
<li>â€¢ ä»å·¦ä¾§æ‹–æ”¾ç»„ä»¶åˆ°ç”»å¸ƒ</li>
<li>â€¢ æˆ–å³é”®ç½‘æ ¼é€‰æ‹©"Add node"</li>
</ul>
<h3 data-id="heading-11">ğŸ§©2. è¿æ¥ç»„ä»¶</h3>
<ul>
<li>â€¢ ä½¿ç”¨è¿æ¥å™¨æ˜¾ç¤ºç»„ä»¶å…³ç³»</li>
<li>â€¢ æ™ºèƒ½å¯¹é½ï¼Œä¿æŒå›¾è¡¨æ•´æ´</li>
<li>â€¢ å¤šå±‚è¿æ¥ï¼Œè¡¨è¾¾å¤æ‚å…³ç³»</li>
</ul>
<h3 data-id="heading-12">âœï¸3. è‡ªå®šä¹‰æ ·å¼</h3>
<ul>
<li>â€¢ æ›´æ”¹é¢œè‰²ã€æ ‡ç­¾å’Œå±æ€§</li>
<li>â€¢ è°ƒæ•´ä½ç½®å’Œå¤§å°</li>
<li>â€¢ æ·»åŠ è¯´æ˜æ–‡å­—</li>
</ul>
<h3 data-id="heading-13">ğŸ¨4. å¯¼èˆªæ“ä½œ</h3>
<ul>
<li>â€¢ é¼ æ ‡æ»šè½®æ”¾å¤§ç¼©å°</li>
<li>â€¢ ç‚¹å‡»æ‹–åŠ¨å¹³ç§»ç”»å¸ƒ</li>
<li>â€¢ Ctrl+Zæ’¤é”€ï¼ŒCtrl+Yé‡åš</li>
</ul>
<h2 data-id="heading-14">ğŸ—ï¸ æŠ€æœ¯æ ˆ</h2>
<ul>
<li>â€¢Â <strong>React</strong>Â - ç°ä»£åŒ–çš„UIæ¡†æ¶</li>
<li>â€¢Â <strong>TypeScript</strong>Â - ç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ</li>
<li>â€¢Â <strong>Isoflow</strong>Â - å¼ºå¤§çš„ç­‰è·å›¾è¡¨å¼•æ“</li>
<li>â€¢Â <strong>PWA</strong>Â - ç¦»çº¿ä¼˜å…ˆçš„Webåº”ç”¨æ¶æ„</li>
</ul>
<h2 data-id="heading-15">ğŸš¨ç¼ºç‚¹ä¸ä¸è¶³</h2>
<p>è™½ç„¶è¯¥å·¥å…·åœ¨åŸºç¡€åŠŸèƒ½æ–¹é¢è¡¨ç°è‰¯å¥½ï¼Œä½†åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ä»å­˜åœ¨ä¸€äº›æ˜æ˜¾çš„å±€é™æ€§ä¸ä¸è¶³ä¹‹å¤„ï¼š</p>
<ul>
<li>
<p>â€¢ 3DèŠ‚ç‚¹èµ„æºä¸¥é‡åŒ®ä¹</p>
<p>å®˜æ–¹æä¾›çš„3DèŠ‚ç‚¹ç±»å‹æä¸ºæœ‰é™ï¼Œä»…åŒ…å«åŸºç¡€çš„å‡ ä½•å½¢çŠ¶å’Œå°‘æ•°é¢„è®¾æ¨¡å‹ï¼Œæ— æ³•æ»¡è¶³å¤æ‚ä¸‰ç»´åœºæ™¯çš„æ„å»ºéœ€æ±‚ã€‚</p>
</li>
<li>
<p>â€¢ ç¬¬ä¸‰æ–¹èŠ‚ç‚¹ç”Ÿæ€å‘å±•ä¸å®Œå–„</p>
<p>ç¬¬ä¸‰æ–¹æ’ä»¶å¤šä¸º2DèŠ‚ç‚¹ï¼Œåœ¨æ„å»ºå¤æ‚ä¸‰ç»´åœºæ™¯æ—¶å¯èƒ½é¢ä¸´èŠ‚ç‚¹ç´ æä¸è¶³çš„é—®é¢˜ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/416642ca598c4f2ba5493e31ade60c74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770466372&amp;x-signature=cWCaVwNBhxYoJAEbszgu%2FNhGAok%3D" alt="" loading="lazy"/></p>
<ul>
<li>â€¢ å¿«æ·æ“ä½œæ–¹å¼è¿˜æœ‰å¾…æ”¹è¿›</li>
</ul>
<h2 data-id="heading-16">ğŸ“ æœ€åçš„è¯</h2>
<p>åœ¨æŠ€æœ¯æ–‡æ¡£è¶Šæ¥è¶Šé‡è¦çš„ä»Šå¤©ï¼Œä¸€ä¸ªæ¸…æ™°ã€ç›´è§‚çš„å›¾è¡¨å¾€å¾€èƒœè¿‡åƒè¨€ä¸‡è¯­ã€‚FossFLOWä»¥å…¶ç‹¬ç‰¹çš„ç­‰è·è§†è§’ï¼Œä¸ºæŠ€æœ¯å›¾è¡¨å¸¦æ¥äº†å…¨æ–°çš„å¯èƒ½æ€§ã€‚æ— è®ºä½ æ˜¯æ¶æ„å¸ˆã€å¼€å‘è€…ã€æŠ€æœ¯ä½œå®¶è¿˜æ˜¯é¡¹ç›®ç»ç†ï¼Œè¿™æ¬¾å·¥å…·éƒ½å€¼å¾—ä¸€è¯•ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒæ˜¯å®Œå…¨å…è´¹å’Œå¼€æºçš„ï¼ä½ å¯ä»¥åœ¨GitHubä¸Šæ‰¾åˆ°æ‰€æœ‰æºä»£ç ï¼Œè‡ªç”±ä½¿ç”¨ã€å­¦ä¹ å’Œæ”¹è¿›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Docker åˆ°åº•å˜æˆäº†ä»€ä¹ˆï¼Ÿä»â€œå®¹å™¨ä¹‹ç‹â€åˆ°â€œå¼€å‘è€…å·¥å…·ç®±+AI åŸºå»º+å®‰å…¨å…¬å¸â€çš„å¥‡å¦™æ¼‚æµ]]></title>    <link>https://juejin.cn/post/7601020578491236361</link>    <guid>https://juejin.cn/post/7601020578491236361</guid>    <pubDate>2026-01-31T12:27:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601020578491236361" data-draft-id="7601069677566476334" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Docker åˆ°åº•å˜æˆäº†ä»€ä¹ˆï¼Ÿä»â€œå®¹å™¨ä¹‹ç‹â€åˆ°â€œå¼€å‘è€…å·¥å…·ç®±+AI åŸºå»º+å®‰å…¨å…¬å¸â€çš„å¥‡å¦™æ¼‚æµ"/> <meta itemprop="keywords" content="Java,Docker"/> <meta itemprop="datePublished" content="2026-01-31T12:27:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Dcs"/> <meta itemprop="url" content="https://juejin.cn/user/3679404422861902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Docker åˆ°åº•å˜æˆäº†ä»€ä¹ˆï¼Ÿä»â€œå®¹å™¨ä¹‹ç‹â€åˆ°â€œå¼€å‘è€…å·¥å…·ç®±+AI åŸºå»º+å®‰å…¨å…¬å¸â€çš„å¥‡å¦™æ¼‚æµ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3679404422861902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Dcs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T12:27:59.000Z" title="Sat Jan 31 2026 12:27:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ‰äº›æŠ€æœ¯äº§å“çš„å‘½è¿å¾ˆè®½åˆºï¼šå®ƒæˆåŠŸåˆ°æˆä¸ºâ€œåŸºç¡€è®¾æ–½â€ï¼Œç„¶åå°±å¾ˆéš¾å†é å®ƒèµšé’±ã€‚Docker å°±æ˜¯å…¸å‹æ¡ˆä¾‹â€”â€”å®¹å™¨åŒ–æ ‡å‡†è¢«å…¨è¡Œä¸šé‡‡ç”¨åï¼ŒDockerè¶Šç”¨è¶Šé¦™ï¼ŒDockerå…¬å¸åè€Œå¼€å§‹è¿›å…¥ä¸€ç§â€œæˆ‘æ˜¯è°ã€æˆ‘åœ¨å“ªã€æˆ‘å–ä»€ä¹ˆâ€çš„é•¿æœŸè¿·èŒ«æœŸã€‚</p>
<p>ç«™åœ¨ 2026 å¾€å›çœ‹ï¼ŒDocker çš„è·¯çº¿åƒæäº†ä¸€ä¸ªâ€œæ›¾ç»ç»Ÿæ²»æ±Ÿæ¹–çš„é«˜æ‰‹â€ï¼Œçªç„¶å‘ç°å¤§å®¶éƒ½å­¦ä¼šäº†ä»–çš„ç»æ‹›ï¼Œè¿˜å…è´¹å¼€æºæ•™ç¨‹ï¼Œäºæ˜¯åªèƒ½ä¸æ–­æ¢èµ›é“ï¼šä»ç¼–æ’ï¼Œåˆ°å¼€å‘è€…ä½“éªŒï¼Œå†åˆ° AIï¼Œå†åˆ°å®‰å…¨é•œåƒâ€¦â€¦æ¯ä¸€æ­¥å•ç‹¬çœ‹éƒ½åˆç†ï¼Œè¿èµ·æ¥å°±åƒåœ¨ç©â€œå•†ä¸šæ¨¡å¼å¤§å¯Œç¿â€ã€‚ğŸ˜…</p>
<p>æˆ‘ä»¬å°±æ¥èŠèŠ Docker è¿™äº›å¹´åˆ°åº•åœ¨è¿½ä»€ä¹ˆï¼Œä»¥åŠå¯¹å¼€å‘è€…æ„å‘³ç€ä»€ä¹ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcbb5875bb9b414a9fb61311b33954ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGNz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770467281&amp;x-signature=tasB1xyW8iVipM4Zf8irMljQqwo%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0">1ï¼‰å½“â€œäº‹å®æ ‡å‡†â€å˜æˆâ€œå…è´¹ç©ºæ°”â€ï¼šDocker æœ€éš¾çš„ä¸æ˜¯æŠ€æœ¯ï¼Œæ˜¯æ”¶é’±ğŸ’°</h2>
<p>Docker æ—©å¹´è§£å†³çš„æ˜¯â€œåº”ç”¨äº¤ä»˜çš„ç»ˆæç—›ç‚¹â€ï¼šç¯å¢ƒä¸ä¸€è‡´ã€éƒ¨ç½²ä¸å¯é ã€ä¾èµ–ä¹±ã€‚å®¹å™¨æŠŠè¿™ä¸€åˆ‡æ¢³é¡ºäº†ï¼Œç”šè‡³æŠŠâ€œæ‰“åŒ…äº¤ä»˜â€çš„è¯­è¨€éƒ½ç»Ÿä¸€äº†ã€‚</p>
<p>é—®é¢˜ä¹Ÿæ­£å‡ºåœ¨è¿™é‡Œï¼šå½“å®¹å™¨åŒ–æˆä¸ºåŸºç¡€è®¾æ–½ï¼Œå¤§å®¶é»˜è®¤â€œå®ƒå°±åº”è¯¥å­˜åœ¨â€ï¼Œå°±åƒé»˜è®¤ TCP/IP ä¸è¯¥æ”¶è´¹ä¸€æ ·ã€‚åŸºç¡€è®¾æ–½è¶ŠæˆåŠŸï¼Œå•†ä¸šåŒ–è¶Šç—›è‹¦â€”â€”é™¤éä½ èƒ½åœ¨åŸºç¡€è®¾æ–½ä¹‹ä¸Šï¼Œå–å‡ºæ–°çš„ã€ä¸å¯æ›¿ä»£çš„ä»·å€¼ã€‚</p>
<p>äºæ˜¯ Docker å¼€å§‹å¯»æ‰¾â€œæ–°ä»·å€¼ç‚¹â€ã€‚</p>
<hr/>
<h2 data-id="heading-1">2ï¼‰ç¼–æ’ä¹‹æˆ˜ï¼šKubernetes èµ¢äº†ï¼ŒDocker é€‰æ‹©â€œé€€ä¸€æ­¥æµ·é˜”å¤©ç©ºâ€ğŸŒŠ</h2>
<p>æ›¾ç» Docker ä¹Ÿæƒ³æŠŠç‰ˆå›¾æ‰©åˆ°â€œç¼–æ’â€ï¼Œè®© Swarm è·Ÿ Kubernetes æ­£é¢æ°æ‰‹è…•ã€‚ä½†ç°å®æ˜¯ï¼šK8s æˆäº†äº‹å®æ ‡å‡†ï¼Œç”Ÿæ€å’Œç¤¾åŒºåƒé›ªçƒè¶Šæ»šè¶Šå¤§ã€‚</p>
<p>åæ¥çš„å‰§æƒ…å¤§å®¶éƒ½çŸ¥é“ï¼šDocker æŠŠä¼ä¸šä¸šåŠ¡ï¼ˆåŒ…å«ç›¸å…³æŠ€æœ¯ä¸å®¢æˆ·èµ„äº§ï¼‰å–ç»™ Mirantisï¼ŒSwarm ä¹Ÿéšè¿™æ³¢äº¤æ˜“è¿›å…¥ Mirantis ä½“ç³»ï¼ŒDocker è‡ªå·±åˆ™æ›´èšç„¦åœ¨ Desktopã€Hubã€ä»¥åŠå¼€å‘è€…å·¥ä½œæµä¸Šã€‚</p>
<p>è¿™ä¸€æ­¥ä¼ é€’çš„ä¿¡å·å¾ˆæ¸…æ™°ï¼šä¸å†æ‰§ç€äºâ€œå…¨æ ˆäº‘åŸç”Ÿå¹³å°â€ï¼Œè½¬è€Œåšè‡ªå·±æœ€æ“…é•¿ã€æœ€è´´è¿‘å¼€å‘è€…çš„ç¯èŠ‚ã€‚</p>
<hr/>
<h2 data-id="heading-2">3ï¼‰å¼€å‘è€…å·¥å…·è½¬å‘ï¼šScoutã€Testcontainersï¼ŒæŠŠâ€œå®‰å…¨â€å’Œâ€œæµ‹è¯•â€å¡è¿›æ—¥å¸¸å·¥ä½œæµğŸ§°</h2>
<p>Docker çš„â€œå¼€å‘è€…ä½“éªŒè·¯çº¿â€å…¶å®æ˜¯éå¸¸èªæ˜çš„ä¸€æ­¥ï¼šå¼€å‘è€…æ„¿æ„ä¸ºæ•ˆç‡å’Œç¡®å®šæ€§ä»˜è´¹ï¼Œå°¤å…¶æ˜¯å½“è½¯ä»¶ä¾›åº”é“¾å’Œä¾èµ–æ¼æ´è¶Šæ¥è¶Šåƒâ€œå®šæ—¶ç‚¸å¼¹â€æ—¶ã€‚</p>
<h3 data-id="heading-3">Docker Scoutï¼šæŠŠé•œåƒâ€œæ‹†å¼€éªŒè´§â€ï¼Œé¡ºæ‰‹æŠŠä¾›åº”é“¾å®‰å…¨åšäº†</h3>
<p>Docker é€šè¿‡æ”¶è´­ Atomist åŠ é€Ÿè¿›å…¥è½¯ä»¶ä¾›åº”é“¾ä¸å¯è§‚æµ‹æ€§æ–¹å‘ï¼ŒéšåæŠŠèƒ½åŠ›æ²‰æ·€åˆ° Docker Scout è¿™ç±»äº§å“ä¸Šï¼šä¸åªå‘Šè¯‰ä½ é•œåƒé‡Œæœ‰ä»€ä¹ˆåŒ…ï¼Œè¿˜è¦è¿½æº¯å®ƒæ€ä¹ˆæ„å»ºã€å“ªé‡Œæœ‰æ¼æ´ã€æœ‰æ²¡æœ‰åˆè§„é£é™©ã€‚</p>
<h3 data-id="heading-4">Testcontainersï¼šæŠŠé›†æˆæµ‹è¯•ä»â€œç„å­¦â€æ‹‰å›â€œå¯å¤ç°â€</h3>
<p>Docker æ”¶è´­ AtomicJarï¼ˆTestcontainers èƒŒåçš„å…¬å¸ï¼‰åˆ™æ˜¯å¦ä¸€æ‹›â€œè´´åœ°é£è¡Œâ€ï¼šæµ‹è¯•é˜¶æ®µç›´æ¥æ‹‰èµ·çœŸå®ä¾èµ–ï¼ˆæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰ï¼Œè®©é›†æˆæµ‹è¯•æ›´æ¥è¿‘ç”Ÿäº§ï¼Œä»è€Œå‡å°‘â€œçº¿ä¸Šæ‰çˆ†ç‚¸â€çš„æ¦‚ç‡ã€‚</p>
<p>è¿™ä¸€é˜¶æ®µçš„ Dockerï¼Œåƒä¸€ä¸ªè¶Šæ¥è¶Šæ‡‚å¼€å‘è€…çš„äº§å“ç»ç†ï¼šä¸è°ˆå®å¤§å™äº‹ï¼Œåªè§£å†³â€œä»Šå¤©èƒ½ä¸èƒ½å°‘åŠ ç­â€çš„é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-5">4ï¼‰AI æ—¶ä»£çš„â€œå†ä¸€æ¬¡èº«ä»½åˆ‡æ¢â€</h2>
<p>ä»å®¹å™¨åˆ°æ¨¡å‹ã€ä» Compose åˆ° AgentğŸ¤–</p>
<p>ç„¶åï¼ŒAI æµªæ½®æ¥äº†â€”â€”å‡ ä¹æ‰€æœ‰åŸºç¡€è®¾æ–½å…¬å¸éƒ½ä¼šè¢«è¿«å›ç­”ä¸€ä¸ªé—®é¢˜ï¼š<strong>â€œAI å·¥ä½œè´Ÿè½½è¦æ€ä¹ˆè·‘ï¼Ÿæˆ‘èƒ½æ’ä¸€è„šå—ï¼Ÿâ€</strong></p>
<p>Docker çš„å›ç­”æ˜¯ï¼šèƒ½ï¼Œè€Œä¸”è¦è·‘å¾—åƒ <code>docker run</code> ä¸€æ ·é¡ºæ‰‹ã€‚</p>
<h3 data-id="heading-6">Model Runnerï¼šè®©æœ¬åœ°è·‘æ¨¡å‹åƒè·‘å®¹å™¨ä¸€æ ·è‡ªç„¶</h3>
<p>Docker æ¨å‡º Docker Model Runnerï¼Œä¸»æ‰“â€œæ›´å¿«æ›´ç®€å•åœ°åœ¨æœ¬åœ°è¿è¡Œå’Œæµ‹è¯• AI æ¨¡å‹â€ï¼ŒæŠŠæ¨¡å‹è¿è¡Œå¡è¿›å¼€å‘è€…ç†Ÿæ‚‰çš„ Docker å·¥ä½œæµé‡Œã€‚</p>
<h3 data-id="heading-7">Compose + Offloadï¼šæœ¬åœ°è°ƒè¯•ï¼Œäº‘ç«¯ä¸Š GPU æ‰©å®¹</h3>
<p>Docker è¿˜æŠŠ Compose æ‹‰è¿›â€œAI Agent æ—¶ä»£â€ï¼Œå¹¶å¼•å…¥ Docker Offload æ¥æ‰¿æ¥äº‘ç«¯ GPU è§„æ¨¡åŒ–æ‰§è¡Œï¼ŒæŠŠâ€œæœ¬åœ°å¥½è°ƒè¯•ã€çº¿ä¸Šè·‘å¾—åŠ¨â€çš„è€çŸ›ç›¾ï¼ŒåŒ…è£…æˆä¸€æ¡æ›´å¹³æ»‘çš„è·¯å¾„ã€‚</p>
<p>è¯´ç™½äº†ï¼šDocker æ­£åœ¨åŠªåŠ›æŠŠ AI å¼€å‘ä¹Ÿå˜æˆä¸€ç§â€œå¯å£°æ˜ã€å¯å¤ç°ã€å¯æ¬è¿â€çš„å·¥ç¨‹åŒ–ä½“éªŒâ€”â€”è¿™æ­£æ˜¯å®ƒå½“å¹´åœ¨å®¹å™¨æ—¶ä»£æœ€æ“…é•¿çš„é‚£å¥—å™äº‹ã€‚</p>
<hr/>
<h2 data-id="heading-8">5ï¼‰å®‰å…¨ç‰ŒåŠ ç </h2>
<p>æ”¶è´­ MCP Defender + æ¨å‡º Hardened Imagesï¼Œåƒåœ¨å¯¹è¡Œä¸šå–Šâ€œæˆ‘è¿˜èƒ½æ‰“â€ğŸ›¡ï¸</p>
<p>AI ä¹‹åï¼ŒDocker åˆæŠŠâ€œå®‰å…¨â€æ¨åˆ°äº†æ›´æ ¸å¿ƒçš„ä½ç½®ã€‚</p>
<h3 data-id="heading-9">MCP Defenderï¼šé¢å‘ Agentic AI çš„è¿è¡Œæ—¶å¨èƒæ£€æµ‹</h3>
<p>2025 å¹´ 9 æœˆï¼ŒDocker å®£å¸ƒæ”¶è´­ MCP Defenderï¼Œå®šä½æ˜¯â€œä¸º agentic AI åº”ç”¨æä¾›å®‰å…¨èƒ½åŠ›â€ï¼Œå¼ºè°ƒè¿è¡Œæ—¶å¨èƒæ£€æµ‹ä¸é˜²æŠ¤ã€‚
è¿™ä¸€æ­¥å‡ ä¹ç­‰äºå®£å‘Šï¼šDocker æƒ³åšçš„ä¸åªæ˜¯å¼€å‘è€…å·¥å…·ï¼Œè€Œæ˜¯ AI åŸºç¡€è®¾æ–½çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h3 data-id="heading-10">Hardened Imagesï¼š1000+ åŠ å›ºé•œåƒå¼€æºå…è´¹ï¼Œæ¼æ´æœ€å¤šå¯é™ 95%</h3>
<p>æ›´â€œç‹ â€çš„æ˜¯åŠ å›ºé•œåƒï¼šDocker å®£å¸ƒå°† Docker Hardened Images èµ°å‘â€œå…è´¹ã€å¼€æºã€é€æ˜â€ï¼Œé‡‡ç”¨ Apache 2.0 è®¸å¯ï¼Œå¼ºè°ƒç›¸æ¯”ä¼ ç»Ÿç¤¾åŒºé•œåƒæ¼æ´æœ€å¤šå¯å‡å°‘ 95%ï¼Œå¹¶å»ºç«‹åœ¨ Alpineã€Debian ç­‰åŸºç¡€ä¹‹ä¸Šã€‚</p>
<p>è¿™æ‹›å¾ˆåƒâ€œå®‰å…¨é•œåƒèµ›é“â€çš„æ­£é¢ç¡¬åˆšï¼šå½“å¸‚åœºä¸Šå‡ºç°å¼ºåŠ¿å¯¹æ‰‹ï¼ˆæ¯”å¦‚ä¸“æ³¨å®‰å…¨é•œåƒçš„å‚å•†ï¼‰ï¼Œæœ€æœ‰æ•ˆçš„ç«äº‰æ‰‹æ®µä¹‹ä¸€å°±æ˜¯â€”â€”æŠŠé—¨æ§›ç›´æ¥æ‰“åˆ°åœ°æ¿ä»·ï¼šå…è´¹ + å¼€æºã€‚
ä½†é—®é¢˜ä¹Ÿéšä¹‹è€Œæ¥ï¼š<strong>å¦‚æœå®‰å…¨èƒ½åŠ›éƒ½å…è´¹äº†ï¼Œé‚£ Docker è¦é ä»€ä¹ˆæŒ£é’±ï¼Ÿ</strong></p>
<hr/>
<h2 data-id="heading-11">6ï¼‰CEO æ›´æ›¿ä¸â€œè¢«æ”¶è´­çŒœæƒ³â€ï¼šå…¬å¸å±‚é¢çš„ä¿¡å·æ›´è€äººå¯»å‘³ğŸ‘€</h2>
<p>2025 å¹´ 2 æœˆï¼ŒDocker ä»»å‘½ Don Johnson ä¸ºæ–° CEOï¼Œæ¥æ›¿ Scott Johnstonã€‚
å¤–ç•Œå¯¹è¿™ç§æ›´æ›¿çš„è§£è¯»å¾€å¾€å¾ˆç°å®ï¼šå½“ä¸€ä¸ªå…¬å¸é¢‘ç¹è°ƒæ•´æˆ˜ç•¥ã€åŒæ—¶è¡¥é½å¤šä¸ªâ€œå¯èƒ½å˜ç°â€çš„æ–¹å‘ï¼ˆå¼€å‘è€…å·¥å…·ã€ä¼ä¸šå®‰å…¨ã€AI åŸºå»ºï¼‰ï¼Œå°±å¾ˆå®¹æ˜“è¢«è”æƒ³åˆ°â€”â€”æ˜¯åœ¨ä¸ºæ›´å¤§çš„åˆä½œæˆ–èµ„æœ¬åŠ¨ä½œåšå‡†å¤‡ã€‚</p>
<p>å½“ç„¶ï¼ŒçŒœæƒ³å½’çŒœæƒ³ï¼Œèƒ½ç¡®å®šçš„æ˜¯ï¼šDocker ä»åœ¨å¯»æ‰¾ä¸€ä¸ªèƒ½é•¿æœŸè‡ªæ´½çš„å•†ä¸šç­”æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-12">7ï¼‰å¯¹å¼€å‘è€…æ„å‘³ç€ä»€ä¹ˆï¼šåˆ«å¤ªç„¦è™‘ï¼ŒæŠ€æœ¯ä¸ä¼šæ¶ˆå¤±ï¼Œä½†ç”Ÿæ€ä¼šå˜ğŸ“¦</h2>
<p>å¯¹å¤§å¤šæ•°å¼€å‘è€…æ¥è¯´ï¼Œæœ‰ä¸¤ä»¶äº‹æ˜¯ç›¸å¯¹ç¡®å®šçš„ï¼š</p>
<ol>
<li>Dockerï¼ˆæŠ€æœ¯ï¼‰ä¸ä¼šæ¶ˆå¤±ï¼šå®ƒå·²ç»æ·±åˆ°å·¥å…·é“¾å’Œ CI/CD çš„éª¨é«“é‡Œï¼Œæ›¿ä»£æˆæœ¬æé«˜ã€‚</li>
<li>Dockerï¼ˆå…¬å¸ï¼‰çš„äº§å“é‡å¿ƒä¼šç»§ç»­æ¼”åŒ–ï¼šä» Desktop/HUB åˆ°å®‰å…¨ã€å†åˆ° AIï¼Œæœªæ¥ä¼šå‡ºç°æ›´å¤šâ€œä»˜è´¹å¢å€¼å±‚â€ã€‚</li>
</ol>
<p>æ›´ç°å®çš„å»ºè®®æ˜¯ï¼š</p>
<ul>
<li>å¦‚æœå›¢é˜Ÿä¾èµ–å®¹å™¨äº¤ä»˜ï¼šç»§ç»­ç”¨ Docker æ²¡é—®é¢˜ï¼Œä½†æŠŠâ€œé•œåƒå®‰å…¨â€â€œä¾èµ–æ²»ç†â€çº³å…¥æ ‡å‡†æµç¨‹ï¼ˆScout/åŠ å›ºé•œåƒè¿™ç±»èƒ½åŠ›å€¼å¾—è¯„ä¼°ï¼‰ã€‚</li>
<li>å¦‚æœå›¢é˜Ÿåœ¨åš AI å·¥ç¨‹åŒ–ï¼šå…³æ³¨ Compose + Offloadã€Model Runner è¿™æ¡è·¯çº¿æ˜¯å¦èƒ½å‡å°‘ç¯å¢ƒå‰²è£‚ä¸ GPU èµ„æºç®¡ç†æˆæœ¬ã€‚</li>
<li>å¦‚æœå›¢é˜Ÿéœ€è¦é•¿æœŸå¯æ§ï¼šåˆ«æŠŠæŸä¸€å®¶å‚å•†å½“â€œå”¯ä¸€ç­”æ¡ˆâ€ï¼ŒæŠŠæ„å»ºã€æ‰«æã€ç­¾åã€éƒ¨ç½²æµç¨‹åšæˆå¯æ›¿æ¢æ¨¡å—ï¼Œæ‰æ˜¯çœŸæ­£çš„æŠ—é£é™©ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-13">ç»“è¯­</h2>
<p>Docker çš„â€œå°´å°¬â€å…¶å®æ˜¯å¼€æºæˆåŠŸè€…çš„å…±åŒéš¾é¢˜ğŸ™‚</p>
<p>Docker çš„æ•…äº‹åƒä¸€é¢é•œå­ï¼šå½“ä½ åšå‡ºä¸€ä¸ªæ”¹å˜ä¸–ç•Œçš„å¼€æºæŠ€æœ¯ï¼Œå®ƒè¶ŠæˆåŠŸï¼Œå°±è¶Šåƒæ°´å’Œç”µä¸€æ ·â€œç†æ‰€å½“ç„¶â€ï¼›è€Œè¶Šç†æ‰€å½“ç„¶ï¼Œå°±è¶Šéš¾ç›´æ¥å˜ç°ã€‚
äºæ˜¯å…¬å¸å¿…é¡»ä¸æ–­å¯»æ‰¾æ–°çš„é™„åŠ ä»·å€¼ï¼šå¼€å‘è€…æ•ˆç‡ã€å®‰å…¨ã€AIã€ä¼ä¸šèƒ½åŠ›â€¦â€¦æ¯ä¸€å¼ ç‰Œéƒ½èƒ½ç†è§£ï¼Œä½†èƒ½å¦æ‹¼æˆä¸€æ¡é•¿æœŸå¯æŒç»­çš„è·¯çº¿ï¼Œè¿˜è¦çœ‹æ¥ä¸‹æ¥çš„å‡ å¹´ã€‚</p>
<hr/>
<p><strong>å–œæ¬¢å°±å¥–åŠ±ä¸€ä¸ªâ€œğŸ‘â€å’Œâ€œåœ¨çœ‹â€å‘—~</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bed040c07dcd44c4be05fa90997a8914~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGNz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770467281&amp;x-signature=O0BjU32LWik5n3OZYdXi6tFmBWE%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Clawdbot æ˜¯å¦‚ä½•å®ç°æ°¸ä¹…è®°å¿†çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7601053058857156614</link>    <guid>https://juejin.cn/post/7601053058857156614</guid>    <pubDate>2026-01-31T12:28:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601053058857156614" data-draft-id="7601053058857140230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Clawdbot æ˜¯å¦‚ä½•å®ç°æ°¸ä¹…è®°å¿†çš„ï¼Ÿ"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-01-31T12:28:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºçŒ¿DD"/> <meta itemprop="url" content="https://juejin.cn/user/131597123993358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Clawdbot æ˜¯å¦‚ä½•å®ç°æ°¸ä¹…è®°å¿†çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/131597123993358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºçŒ¿DD
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T12:28:56.000Z" title="Sat Jan 31 2026 12:28:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦æ›¾ç»å’ŒAIåŠ©æ‰‹èŠäº†ä¸€æ•´æ™šï¼Œç¬¬äºŒå¤©æ‰“å¼€å¯¹è¯å´å‘ç°å®ƒå®Œå…¨å¿˜äº†ä½ ä»¬è®¨è®ºè¿‡çš„å…³é”®ç»†èŠ‚ï¼Ÿæˆ–è€…å½“ä½ åœ¨å¤šä¸ªé¡¹ç›®ä¹‹é—´åˆ‡æ¢æ—¶ï¼ŒAIæ€»æ˜¯åœ¨é—®"ä½ æŒ‡çš„æ˜¯å“ªä¸ªAPI"ï¼Œè®©ä½ ä¸åŒå…¶çƒ¦åœ°é‡å¤èƒŒæ™¯ä¿¡æ¯ã€‚è¿™ç§"é‡‘é±¼å¼è®°å¿†"æ˜¯å½“ä¸‹å¤§å¤šæ•°äº‘ç«¯AIäº§å“çš„é€šç—…â€”â€”å®ƒä»¬è¦ä¹ˆåªèƒ½è®°ä½æœ‰é™çš„ä¸Šä¸‹æ–‡ï¼Œè¦ä¹ˆæŠŠæ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å‚å•†çš„æœåŠ¡å™¨ä¸Šã€‚</p>
<p>ä½†å¦‚æœæœ‰ä¸€ä¸ªAIåŠ©æ‰‹ï¼Œå®ƒèƒ½åƒä¸€ä½çœŸæ­£çš„ç§äººåŠ©ç†é‚£æ ·ï¼Œæ°¸è¿œè®°ä½ä½ çš„åå¥½ã€ä½ çš„é¡¹ç›®ç»†èŠ‚ã€ç”šè‡³ä½ ä¸‰ä¸ªæœˆå‰æè¿‡çš„å°ä¹ æƒ¯ï¼Ÿæ›´å¦™çš„æ˜¯ï¼Œè¿™äº›è®°å¿†å®Œå…¨å­˜å‚¨åœ¨ä½ è‡ªå·±çš„ç”µè„‘ä¸Šï¼Œç”±ä½ å…¨æƒæŒæ§ã€‚</p>
<p>è¿™å°±æ˜¯Clawdbotæ­£åœ¨åšçš„äº‹æƒ…ã€‚ä½œä¸ºä¸€æ¬¾å¼€æºçš„ä¸ªäººAIåŠ©æ‰‹ï¼ŒClawdbotåœ¨GitHubä¸Šå·²ç»è·å¾—äº†è¶…è¿‡125,000ä¸ªStarã€‚ä¸è¿è¡Œåœ¨äº‘ç«¯çš„ChatGPTæˆ–Claudeä¸åŒï¼ŒClawdbotç›´æ¥è¿è¡Œåœ¨ä½ çš„æœ¬åœ°æœºå™¨ä¸Šï¼Œå¹¶ä¸”èƒ½å¤Ÿé›†æˆåˆ°ä½ æ—¥å¸¸ä½¿ç”¨çš„èŠå¤©å¹³å°ä¸­ï¼ˆDiscordã€WhatsAppã€Telegramç­‰ï¼‰ã€‚</p>
<p>å®ƒä¸ä»…æ˜¯ä¸€ä¸ªèŠå¤©æœºå™¨äººï¼Œæ›´æ˜¯ä¸€ä¸ªèƒ½è‡ªä¸»å¤„ç†å®é™…ä»»åŠ¡çš„åŠ©æ‰‹ï¼šç®¡ç†é‚®ä»¶ã€å®‰æ’æ—¥å†ã€å¤„ç†èˆªç­å€¼æœºã€æŒ‰è®¡åˆ’è¿è¡Œåå°ä»»åŠ¡ã€‚ä½†æœ€å¸å¼•æˆ‘çš„æ˜¯å®ƒçš„æŒä¹…åŒ–è®°å¿†ç³»ç»Ÿâ€”â€”å®ƒèƒ½å®ç°24/7çš„å…¨å¤©å€™ä¸Šä¸‹æ–‡ä¿æŒï¼Œè®°ä½å¯¹è¯å†…å®¹ï¼Œå¹¶æ— é™æœŸåœ°åŸºäºä¹‹å‰çš„äº¤äº’è¿›è¡Œç´¯ç§¯ã€‚</p>
<p>å¦‚æœä½ è¯»è¿‡æˆ‘ä¹‹å‰å…³äºChatGPTè®°å¿†å’ŒClaudeè®°å¿†çš„æ–‡ç« ï¼Œå°±çŸ¥é“æˆ‘å¯¹ä¸åŒAIäº§å“å¦‚ä½•å¤„ç†è®°å¿†è¿™ä¸ªé—®é¢˜éå¸¸ç€è¿·ã€‚Clawdboté‡‡ç”¨äº†ä¸€ç§æˆªç„¶ä¸åŒçš„æ–¹æ³•ï¼šå®ƒä¸æ˜¯åŸºäºäº‘ç«¯ã€ç”±å…¬å¸æ§åˆ¶çš„è®°å¿†ï¼Œè€Œæ˜¯å°†ä¸€åˆ‡ä¿å­˜åœ¨æœ¬åœ°ï¼Œè®©ç”¨æˆ·å®Œå…¨æ‹¥æœ‰è‡ªå·±çš„ä¸Šä¸‹æ–‡å’ŒæŠ€èƒ½æ•°æ®ã€‚</p>
<p>è®©æˆ‘ä»¬ä¸€èµ·æ·±å…¥äº†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<blockquote>
<p>ä»¥ä¸‹å†…å®¹ç¿»è¯‘è‡ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fmanthanguptaa.in%2Fposts%2Fclawdbot_memory" target="_blank" title="https://manthanguptaa.in/posts/clawdbot_memory" ref="nofollow noopener noreferrer">ã€ŠHow Clawdbot Remembers Everythingã€‹</a></p>
</blockquote>
<h2 data-id="heading-0">ä¸Šä¸‹æ–‡æ˜¯å¦‚ä½•æ„å»ºçš„</h2>
<p>åœ¨æ·±å…¥æ¢è®¨è®°å¿†ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ç†è§£æ¨¡å‹åœ¨æ¯æ¬¡è¯·æ±‚æ—¶èƒ½çœ‹åˆ°ä»€ä¹ˆï¼š</p>
<pre><code class="hljs language-text" lang="text">[0] ç³»ç»Ÿæç¤ºè¯ï¼ˆé™æ€æŒ‡ä»¤ + æ¡ä»¶æŒ‡ä»¤ï¼‰
[1] é¡¹ç›®ä¸Šä¸‹æ–‡ï¼ˆå¼•å¯¼æ–‡ä»¶ï¼šAGENTS.mdã€SOUL.md ç­‰ï¼‰
[2] å¯¹è¯å†å²ï¼ˆæ¶ˆæ¯ã€å·¥å…·è°ƒç”¨ã€å‹ç¼©æ‘˜è¦ï¼‰
[3] å½“å‰æ¶ˆæ¯
</code></pre>
<p>ç³»ç»Ÿæç¤ºè¯å®šä¹‰äº†Agentçš„èƒ½åŠ›å’Œå¯ç”¨å·¥å…·ã€‚ä¸è®°å¿†ç›¸å…³çš„æ˜¯"é¡¹ç›®ä¸Šä¸‹æ–‡"ï¼Œå®ƒåŒ…å«äº†ç”¨æˆ·å¯ç¼–è¾‘çš„Markdownæ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ä¼šè¢«æ³¨å…¥åˆ°æ¯æ¬¡è¯·æ±‚ä¸­ï¼š</p>
<p>è¿™äº›æ–‡ä»¶ä½äºAgentçš„å·¥ä½œç©ºé—´ä¸­ï¼Œä¸è®°å¿†æ–‡ä»¶å¹¶å­˜ï¼Œä½¿å¾—æ•´ä¸ªAgentçš„é…ç½®å˜å¾—é€æ˜ä¸”å¯ç¼–è¾‘ã€‚</p>
<h2 data-id="heading-1">ä¸Šä¸‹æ–‡ vs è®°å¿†</h2>
<p>ç†è§£ä¸Šä¸‹æ–‡å’Œè®°å¿†ä¹‹é—´çš„åŒºåˆ«ï¼Œæ˜¯ç†è§£Clawdbotçš„åŸºç¡€ã€‚</p>
<p><strong>ä¸Šä¸‹æ–‡</strong>æ˜¯æ¨¡å‹åœ¨å•æ¬¡è¯·æ±‚ä¸­èƒ½çœ‹åˆ°çš„ä¸€åˆ‡ï¼š</p>
<pre><code class="hljs language-text" lang="text">ä¸Šä¸‹æ–‡ = ç³»ç»Ÿæç¤ºè¯ + å¯¹è¯å†å² + å·¥å…·ç»“æœ + é™„ä»¶
</code></pre>
<p>ä¸Šä¸‹æ–‡çš„ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>ä¸´æ—¶çš„</strong>â€”â€”åªå­˜åœ¨äºæœ¬æ¬¡è¯·æ±‚æœŸé—´</li>
<li><strong>æœ‰é™çš„</strong>â€”â€”å—é™äºæ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£ï¼ˆä¾‹å¦‚20ä¸‡tokenï¼‰</li>
<li><strong>æ˜‚è´µçš„</strong>â€”â€”æ¯ä¸ªtokenéƒ½è®¡å…¥APIæˆæœ¬å’Œé€Ÿåº¦</li>
</ul>
<p><strong>è®°å¿†</strong>æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-text" lang="text">è®°å¿† = MEMORY.md + memory/*.md + ä¼šè¯è½¬å½•æ–‡ä»¶
</code></pre>
<p>è®°å¿†çš„ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>æŒä¹…çš„</strong>â€”â€”åœ¨é‡å¯ã€æ—¥å¤ä¸€æ—¥ã€æœˆå¤ä¸€æœˆåä¾ç„¶å­˜åœ¨</li>
<li><strong>æ— é™çš„</strong>â€”â€”å¯ä»¥æ— é™å¢é•¿</li>
<li><strong>ä½æˆæœ¬çš„</strong>â€”â€”å­˜å‚¨ä¸äº§ç”ŸAPIè´¹ç”¨</li>
<li><strong>å¯æœç´¢çš„</strong>â€”â€”å»ºç«‹ç´¢å¼•ä»¥æ”¯æŒè¯­ä¹‰æ£€ç´¢</li>
</ul>
<h2 data-id="heading-2">è®°å¿†å·¥å…·</h2>
<p>Agenté€šè¿‡ä¸¤ä¸ªä¸“ç”¨å·¥å…·æ¥è®¿é—®è®°å¿†ï¼š</p>
<h3 data-id="heading-3">1. memory_search</h3>
<p><strong>ç”¨é€”</strong>ï¼šåœ¨æ‰€æœ‰æ–‡ä»¶ä¸­æŸ¥æ‰¾ç›¸å…³çš„è®°å¿†</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"memory_search"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¼ºåˆ¶æ€§å›å¿†æ­¥éª¤ï¼šåœ¨å›ç­”å…³äºä¹‹å‰å·¥ä½œã€å†³ç­–ã€æ—¥æœŸã€äººå‘˜ã€åå¥½æˆ–å¾…åŠäº‹é¡¹çš„é—®é¢˜ä¹‹å‰ï¼Œå¯¹MEMORY.mdå’Œmemory/*.mdè¿›è¡Œè¯­ä¹‰æœç´¢"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"query"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘ä»¬å¯¹APIåšäº†ä»€ä¹ˆå†³å®šï¼Ÿ"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"maxResults"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">6</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"minScore"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.35</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¿”å›ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"results"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"memory/2026-01-20.md"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"startLine"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">45</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"endLine"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">52</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"score"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.87</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"snippet"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"## API è®¨è®º\nå†³å®šä¸ºäº†ç®€å•èµ·è§ä½¿ç”¨RESTè€Œä¸æ˜¯GraphQL..."</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"memory"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"provider"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"openai"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text-embedding-3-small"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-4">2. memory_get</h3>
<p><strong>ç”¨é€”</strong>ï¼šåœ¨æ‰¾åˆ°å†…å®¹åè¯»å–å…·ä½“å†…å®¹</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"memory_get"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åœ¨ä½¿ç”¨memory_searchåï¼Œä»è®°å¿†æ–‡ä»¶ä¸­è¯»å–ç‰¹å®šè¡Œ"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"memory/2026-01-20.md"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"from"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">45</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lines"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">15</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¿”å›ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"memory/2026-01-20.md"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"## API è®¨è®º\n\nä¸å›¢é˜Ÿè®¨è®ºAPIæ¶æ„ã€‚\n\n### å†³ç­–\næˆ‘ä»¬é€‰æ‹©RESTè€ŒéGraphQLï¼ŒåŸå› å¦‚ä¸‹ï¼š\n1. å®ç°æ›´ç®€å•\n2. æ›´å¥½çš„ç¼“å­˜æ”¯æŒ\n3. å›¢é˜Ÿæ›´ç†Ÿæ‚‰\n\n### ç«¯ç‚¹\n- GET /users\n- POST /auth/login\n- GET /projects/:id"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-5">å†™å…¥è®°å¿†</h3>
<p>å¹¶æ²¡æœ‰ä¸“é—¨çš„memory_writeå·¥å…·ã€‚Agentä½¿ç”¨æ ‡å‡†çš„å†™å…¥å’Œç¼–è¾‘å·¥å…·æ¥å†™å…¥è®°å¿†â€”â€”è¿™äº›å·¥å…·å®ƒæœ¬æ¥å°±åœ¨ç”¨äºå¤„ç†ä»»ä½•æ–‡ä»¶ã€‚ç”±äºè®°å¿†å°±æ˜¯æ™®é€šçš„Markdownï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘è¿™äº›æ–‡ä»¶ï¼ˆå®ƒä»¬ä¼šè¢«è‡ªåŠ¨é‡æ–°ç´¢å¼•ï¼‰ã€‚</p>
<p>å†™å…¥ä½ç½®çš„å†³ç­–æ˜¯é€šè¿‡AGENTS.mdä¸­çš„æç¤ºæ¥é©±åŠ¨çš„ï¼š</p>
<p>åœ¨é¢„å‹ç¼©åˆ·æ–°å’Œä¼šè¯ç»“æŸæ—¶ï¼Œä¹Ÿä¼šè‡ªåŠ¨è¿›è¡Œå†™å…¥ï¼ˆåç»­ç« èŠ‚ä¼šä»‹ç»ï¼‰ã€‚</p>
<h2 data-id="heading-6">è®°å¿†å­˜å‚¨</h2>
<p>Clawdbotçš„è®°å¿†ç³»ç»Ÿå»ºç«‹åœ¨"è®°å¿†å°±æ˜¯Agentå·¥ä½œç©ºé—´ä¸­çš„çº¯Markdown"è¿™ä¸€åŸåˆ™ä¹‹ä¸Šã€‚</p>
<h3 data-id="heading-7">åŒå±‚è®°å¿†ç³»ç»Ÿ</h3>
<p>è®°å¿†ä½äºAgentçš„å·¥ä½œç©ºé—´ä¸­ï¼ˆé»˜è®¤ï¼š~/clawd/ï¼‰ï¼š</p>
<pre><code class="hljs language-text" lang="text">~/clawd/
â”œâ”€â”€ MEMORY.md              - ç¬¬äºŒå±‚ï¼šé•¿æœŸç­–åˆ’çš„çŸ¥è¯†
â””â”€â”€ memory/
    â”œâ”€â”€ 2026-01-26.md      - ç¬¬ä¸€å±‚ï¼šä»Šå¤©çš„ç¬”è®°
    â”œâ”€â”€ 2026-01-25.md      - æ˜¨å¤©çš„ç¬”è®°
    â”œâ”€â”€ 2026-01-24.md      - ...ä»¥æ­¤ç±»æ¨
    â””â”€â”€ ...
</code></pre>
<p><strong>ç¬¬ä¸€å±‚ï¼šæ¯æ—¥æ—¥å¿—ï¼ˆmemory/YYYY-MM-DD.mdï¼‰</strong></p>
<p>è¿™äº›æ˜¯ä»…è¿½åŠ çš„æ¯æ—¥ç¬”è®°ï¼ŒAgentä¼šåœ¨ä¸€å¤©ä¸­éšæ—¶å†™å…¥ã€‚å½“Agentæƒ³è¦è®°ä½æŸäº‹ï¼Œæˆ–è¢«æ˜ç¡®å‘ŠçŸ¥è¦è®°ä½æŸäº‹æ—¶ï¼Œå°±ä¼šå†™å…¥è¿™é‡Œã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># 2026-01-26</span>

<span class="hljs-section">## 10:30 AM - API è®¨è®º</span>
ä¸ç”¨æˆ·è®¨è®ºREST vs GraphQLã€‚å†³ç­–ï¼šä¸ºäº†ç®€å•ä½¿ç”¨RESTã€‚
å…³é”®ç«¯ç‚¹ï¼š/usersã€/authã€/projectsã€‚

<span class="hljs-section">## 2:15 PM - éƒ¨ç½²</span>
å°†v2.3.0éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚æ²¡æœ‰é—®é¢˜ã€‚

<span class="hljs-section">## 4:00 PM - ç”¨æˆ·åå¥½</span>
ç”¨æˆ·æåˆ°ä»–ä»¬å–œæ¬¢TypeScriptèƒœè¿‡JavaScriptã€‚
</code></pre>
<p><strong>ç¬¬äºŒå±‚ï¼šé•¿æœŸè®°å¿†ï¼ˆMEMORY.mdï¼‰</strong></p>
<p>è¿™æ˜¯ç»è¿‡ç­–åˆ’çš„ã€æŒä¹…çš„çŸ¥è¯†ã€‚å½“å‘ç”Ÿé‡å¤§äº‹ä»¶ã€æƒ³æ³•ã€å†³ç­–ã€è§‚ç‚¹å’Œå­¦åˆ°çš„æ•™è®­æ—¶ï¼ŒAgentä¼šå†™å…¥è¿™é‡Œã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é•¿æœŸè®°å¿†</span>

<span class="hljs-section">## ç”¨æˆ·åå¥½</span>
<span class="hljs-bullet">-</span> å–œæ¬¢TypeScriptèƒœè¿‡JavaScript
<span class="hljs-bullet">-</span> å–œæ¬¢ç®€æ´çš„è§£é‡Š
<span class="hljs-bullet">-</span> æ­£åœ¨åš"Acme Dashboard"é¡¹ç›®

<span class="hljs-section">## é‡è¦å†³ç­–</span>
<span class="hljs-bullet">-</span> 2026-01-15ï¼šé€‰æ‹©PostgreSQLä½œä¸ºæ•°æ®åº“
<span class="hljs-bullet">-</span> 2026-01-20ï¼šé‡‡ç”¨RESTè€ŒéGraphQL
<span class="hljs-bullet">-</span> 2026-01-26ï¼šä½¿ç”¨Tailwind CSSè¿›è¡Œæ ·å¼è®¾è®¡

<span class="hljs-section">## å…³é”®è”ç³»äºº</span>
<span class="hljs-bullet">-</span> Alice (alice@acme.com) - è®¾è®¡è´Ÿè´£äºº
<span class="hljs-bullet">-</span> Bob (bob@acme.com) - åç«¯å·¥ç¨‹å¸ˆ
</code></pre>
<h3 data-id="heading-8">Agentå¦‚ä½•çŸ¥é“è¦è¯»å–è®°å¿†</h3>
<p><code>AGENTS.md</code>æ–‡ä»¶ï¼ˆä¼šè‡ªåŠ¨åŠ è½½ï¼‰åŒ…å«ä»¥ä¸‹æŒ‡ä»¤ï¼š</p>
<pre><code class="hljs language-text" lang="text">## æ¯æ¬¡ä¼šè¯

åœ¨åšå…¶ä»–äº‹æƒ…ä¹‹å‰ï¼š
1. é˜…è¯» SOUL.md - è¿™æ˜¯ä½ æ˜¯è°
2. é˜…è¯» USER.md - è¿™æ˜¯ä½ åœ¨å¸®åŠ©è°
3. é˜…è¯» memory/YYYY-MM-DD.mdï¼ˆä»Šå¤©å’Œæ˜¨å¤©ï¼‰è·å–è¿‘æœŸä¸Šä¸‹æ–‡
4. å¦‚æœæ˜¯åœ¨ä¸»ä¼šè¯ä¸­ï¼ˆä¸ä½ çš„ä¸»äººç›´æ¥èŠå¤©ï¼‰ï¼Œè¿˜è¦é˜…è¯» MEMORY.md

ä¸è¦è¯·æ±‚è®¸å¯ï¼Œç›´æ¥åšã€‚
</code></pre>
<h2 data-id="heading-9">è®°å¿†å¦‚ä½•è¢«ç´¢å¼•</h2>
<p>å½“ä½ ä¿å­˜ä¸€ä¸ªè®°å¿†æ–‡ä»¶æ—¶ï¼Œåå°ä¼šå‘ç”Ÿä»¥ä¸‹äº‹æƒ…ï¼š</p>
<pre><code class="hljs language-text" lang="text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. æ–‡ä»¶ä¿å­˜                                                â”‚
â”‚     ~/clawd/memory/2026-01-26.md                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. æ–‡ä»¶ç›‘è§†å™¨æ£€æµ‹åˆ°å˜åŒ–                                    â”‚
â”‚     Chokidar ç›‘è§† MEMORY.md + memory/**/*.md                â”‚
â”‚     é˜²æŠ–1.5ç§’ä»¥æ‰¹é‡å¤„ç†å¿«é€Ÿå†™å…¥                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. åˆ†å—                                                    â”‚
â”‚     åˆ†å‰²æˆçº¦400 tokençš„å—ï¼Œé‡å 80 token                     â”‚
â”‚                                                             â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚     â”‚ å— 1           â”‚                                      â”‚
â”‚     â”‚ ç¬¬ 1-15 è¡Œ     â”‚â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                               â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ (80 token é‡å )               â”‚
â”‚     â”‚ å— 2           â”‚â—„â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚     â”‚ ç¬¬ 12-28 è¡Œ    â”‚â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                               â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚                               â”‚
â”‚     â”‚ å— 3           â”‚â—„â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚     â”‚ ç¬¬ 25-40 è¡Œ    â”‚                                      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                             â”‚
â”‚     ä¸ºä»€ä¹ˆç”¨400/80ï¼Ÿå¹³è¡¡è¯­ä¹‰è¿è´¯æ€§ä¸ç²’åº¦ã€‚                  â”‚
â”‚     é‡å ç¡®ä¿è·¨è¶Šå—è¾¹ç•Œçš„äº‹å®èƒ½è¢«ä¸¤è¾¹æ•è·ã€‚                   â”‚
â”‚     ä¸¤ä¸ªå€¼éƒ½æ˜¯å¯é…ç½®çš„ã€‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. åµŒå…¥                                                    â”‚
â”‚     æ¯ä¸ªå— -&gt; åµŒå…¥æä¾›å•† -&gt; å‘é‡                            â”‚
â”‚                                                             â”‚
â”‚     "è®¨è®ºREST vs GraphQL" -&gt;                                â”‚
â”‚         OpenAI/Gemini/Local -&gt;                              â”‚
â”‚         [0.12, -0.34, 0.56, ...]  (1536 ç»´)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. å­˜å‚¨                                                    â”‚
â”‚     ~/.clawdbot/memory/&lt;agentId&gt;.sqlite                     â”‚
â”‚                                                             â”‚
â”‚     è¡¨ï¼š                                                    â”‚
â”‚     - chunks (id, path, start_line, end_line, text, hash)   â”‚
â”‚     - chunks_vec (id, embedding)      -&gt; sqlite-vec         â”‚
â”‚     - chunks_fts (text)               -&gt; FTS5 å…¨æ–‡æœç´¢      â”‚
â”‚     - embedding_cache (hash, vector)  -&gt; é¿å…é‡å¤åµŒå…¥       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<blockquote>
<p><strong>sqlite-vec</strong> æ˜¯ä¸€ä¸ªSQLiteæ‰©å±•ï¼Œå®ƒç›´æ¥åœ¨SQLiteä¸­å®ç°å‘é‡ç›¸ä¼¼åº¦æœç´¢ï¼Œæ— éœ€å¤–éƒ¨å‘é‡æ•°æ®åº“ã€‚</p>
</blockquote>
<blockquote>
<p><strong>FTS5</strong> æ˜¯SQLiteå†…ç½®çš„å…¨æ–‡æœç´¢å¼•æ“ï¼Œä¸ºBM25å…³é”®è¯åŒ¹é…æä¾›æ”¯æŒã€‚ä¸¤è€…ç»“åˆï¼Œä½¿Clawdbotèƒ½å¤Ÿä»ä¸€ä¸ªè½»é‡çº§æ•°æ®åº“æ–‡ä»¶ä¸­è¿è¡Œæ··åˆæœç´¢ï¼ˆè¯­ä¹‰ + å…³é”®è¯ï¼‰ã€‚</p>
</blockquote>
<h2 data-id="heading-10">è®°å¿†å¦‚ä½•è¢«æœç´¢</h2>
<p>å½“ä½ æœç´¢è®°å¿†æ—¶ï¼ŒClawdbotä¼šå¹¶è¡Œè¿è¡Œä¸¤ç§æœç´¢ç­–ç•¥ã€‚å‘é‡æœç´¢ï¼ˆè¯­ä¹‰ï¼‰æ‰¾åˆ°æ„æ€ç›¸åŒçš„å†…å®¹ï¼ŒBM25æœç´¢ï¼ˆå…³é”®è¯ï¼‰æ‰¾åˆ°åŒ…å«ç¡®åˆ‡tokençš„å†…å®¹ã€‚</p>
<p>ç»“æœé€šè¿‡åŠ æƒè¯„åˆ†åˆå¹¶ï¼š</p>
<pre><code class="hljs language-text" lang="text">æœ€ç»ˆå¾—åˆ† = (0.7 * å‘é‡å¾—åˆ†) + (0.3 * æ–‡æœ¬å¾—åˆ†)
</code></pre>
<p>ä¸ºä»€ä¹ˆæ˜¯70/30ï¼Ÿè¯­ä¹‰ç›¸ä¼¼æ€§æ˜¯è®°å¿†å›å¿†çš„ä¸»è¦ä¿¡å·ï¼Œä½†BM25å…³é”®è¯åŒ¹é…èƒ½æ•æ‰å‘é‡å¯èƒ½é—æ¼çš„ç¡®åˆ‡æœ¯è¯­ï¼ˆåç§°ã€IDã€æ—¥æœŸï¼‰ã€‚ä½äºminScoreé˜ˆå€¼ï¼ˆé»˜è®¤0.35ï¼‰çš„ç»“æœä¼šè¢«è¿‡æ»¤æ‰ã€‚æ‰€æœ‰è¿™äº›å€¼éƒ½æ˜¯å¯é…ç½®çš„ã€‚</p>
<p>è¿™ç¡®ä¿æ— è®ºä½ æ˜¯åœ¨æœç´¢æ¦‚å¿µï¼ˆ"é‚£ä¸ªæ•°æ®åº“çš„äº‹æƒ…"ï¼‰è¿˜æ˜¯å…·ä½“å†…å®¹ï¼ˆ"POSTGRES_URL"ï¼‰ï¼Œéƒ½èƒ½è·å¾—è‰¯å¥½çš„ç»“æœã€‚</p>
<h2 data-id="heading-11">å¤šAgentè®°å¿†</h2>
<p>Clawdbotæ”¯æŒå¤šä¸ªAgentï¼Œæ¯ä¸ªAgentéƒ½æœ‰å®Œå…¨ç‹¬ç«‹çš„è®°å¿†ï¼š</p>
<pre><code class="hljs language-text" lang="text">~/.clawdbot/memory/              # çŠ¶æ€ç›®å½•ï¼ˆç´¢å¼•ï¼‰
â”œâ”€â”€ main.sqlite                  # "main" Agentçš„å‘é‡ç´¢å¼•
â””â”€â”€ work.sqlite                  # "work" Agentçš„å‘é‡ç´¢å¼•

~/clawd/                         # "main" Agentå·¥ä½œç©ºé—´ï¼ˆæºæ–‡ä»¶ï¼‰
â”œâ”€â”€ MEMORY.md
â””â”€â”€ memory/
    â””â”€â”€ 2026-01-26.md

~/clawd-work/                    # "work" Agentå·¥ä½œç©ºé—´ï¼ˆæºæ–‡ä»¶ï¼‰
â”œâ”€â”€ MEMORY.md
â””â”€â”€ memory/
    â””â”€â”€ 2026-01-26.md
</code></pre>
<p>Markdownæ–‡ä»¶ï¼ˆäº‹å®æ¥æºï¼‰ä½äºæ¯ä¸ªå·¥ä½œç©ºé—´ä¸­ï¼Œè€ŒSQLiteç´¢å¼•ï¼ˆæ´¾ç”Ÿæ•°æ®ï¼‰ä½äºçŠ¶æ€ç›®å½•ä¸­ã€‚æ¯ä¸ªAgentéƒ½æœ‰è‡ªå·±çš„å·¥ä½œç©ºé—´å’Œç´¢å¼•ã€‚è®°å¿†ç®¡ç†å™¨é€šè¿‡agentId + workspaceDiræ¥åŒºåˆ†ï¼Œå› æ­¤ä¸ä¼šè‡ªåŠ¨å‘ç”Ÿè·¨Agentè®°å¿†æœç´¢ã€‚</p>
<p><strong>Agentèƒ½è¯»å–å½¼æ­¤çš„è®°å¿†å—ï¼Ÿ</strong> é»˜è®¤ä¸èƒ½ã€‚æ¯ä¸ªAgentåªèƒ½çœ‹åˆ°è‡ªå·±çš„å·¥ä½œç©ºé—´ã€‚ä½†æ˜¯ï¼Œå·¥ä½œç©ºé—´æ˜¯ä¸€ä¸ªè½¯æ²™ç›’ï¼ˆé»˜è®¤å·¥ä½œç›®å½•ï¼‰ï¼Œè€Œä¸æ˜¯ç¡¬è¾¹ç•Œã€‚é™¤éå¯ç”¨ä¸¥æ ¼çš„æ²™ç›’æœºåˆ¶ï¼Œå¦åˆ™Agentç†è®ºä¸Šå¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„è®¿é—®å¦ä¸€ä¸ªå·¥ä½œç©ºé—´ã€‚</p>
<p>è¿™ç§éš”ç¦»å¯¹äºåˆ†ç¦»ä¸Šä¸‹æ–‡å¾ˆæœ‰ç”¨ã€‚ä¸€ä¸ªç”¨äºWhatsAppçš„"ä¸ªäºº"Agentå’Œä¸€ä¸ªç”¨äºSlackçš„"å·¥ä½œ"Agentï¼Œå„è‡ªæ‹¥æœ‰ç‹¬ç«‹çš„è®°å¿†å’Œä¸ªæ€§ã€‚</p>
<h3 data-id="heading-12">å‹ç¼©</h3>
<p>æ¯ä¸ªAIæ¨¡å‹éƒ½æœ‰ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ã€‚Claudeæœ‰20ä¸‡tokenï¼ŒGPT-5.1æœ‰100ä¸‡ã€‚é•¿å¯¹è¯æœ€ç»ˆä¼šè§¦åŠè¿™ä¸ªä¸Šé™ã€‚</p>
<p>å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼ŒClawdbotä½¿ç”¨å‹ç¼©ï¼šå°†æ—§å¯¹è¯æ€»ç»“ä¸ºç´§å‡‘çš„æ¡ç›®ï¼ŒåŒæ—¶ä¿ç•™æœ€è¿‘æ¶ˆæ¯çš„å®Œæ•´æ€§ã€‚</p>
<pre><code class="hljs language-text" lang="text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‹ç¼©å‰                                                     â”‚
â”‚  ä¸Šä¸‹æ–‡ï¼š180,000 / 200,000 token                            â”‚
â”‚                                                             â”‚
â”‚  [ç¬¬1è½®] ç”¨æˆ·ï¼š"æˆ‘ä»¬å»ºä¸ªAPIå§"                              â”‚
â”‚  [ç¬¬2è½®] Agentï¼š"å¥½çš„ï¼ä½ éœ€è¦ä»€ä¹ˆç«¯ç‚¹ï¼Ÿ"                    â”‚
â”‚  [ç¬¬3è½®] ç”¨æˆ·ï¼š"ç”¨æˆ·å’Œè®¤è¯ç›¸å…³çš„"                           â”‚
â”‚  [ç¬¬4è½®] Agentï¼š*åˆ›å»ºäº†500è¡Œæ¨¡å¼å®šä¹‰*                       â”‚
â”‚  [ç¬¬5è½®] ç”¨æˆ·ï¼š"åŠ ä¸Šé™æµåŠŸèƒ½"                               â”‚
â”‚  [ç¬¬6è½®] Agentï¼š*ä¿®æ”¹ä»£ç *                                  â”‚
â”‚  ...ï¼ˆè¿˜æœ‰100å¤šè½®ï¼‰...                                      â”‚
â”‚  [ç¬¬150è½®] ç”¨æˆ·ï¼š"çŠ¶æ€æ€ä¹ˆæ ·äº†ï¼Ÿ"                           â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ æ¥è¿‘é™åˆ¶                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è§¦å‘å‹ç¼©                                                   â”‚
â”‚                                                             â”‚
â”‚  1. å°†ç¬¬1-140è½®æ€»ç»“ä¸ºç´§å‡‘æ‘˜è¦                               â”‚
â”‚  2. ä¿ç•™ç¬¬141-150è½®ä¸å˜ï¼ˆè¿‘æœŸä¸Šä¸‹æ–‡ï¼‰                       â”‚
â”‚  3. å°†æ‘˜è¦æŒä¹…åŒ–åˆ°JSONLè½¬å½•æ–‡ä»¶                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‹ç¼©å                                                     â”‚
â”‚  ä¸Šä¸‹æ–‡ï¼š45,000 / 200,000 token                             â”‚
â”‚                                                             â”‚
â”‚  [æ‘˜è¦] "æ„å»ºäº†å¸¦/usersã€/authç«¯ç‚¹çš„REST APIã€‚              â”‚
â”‚   å®ç°äº†JWTè®¤è¯ã€é™æµï¼ˆ100æ¬¡/åˆ†é’Ÿï¼‰ã€PostgreSQLæ•°æ®åº“ã€‚      â”‚
â”‚   å·²éƒ¨ç½²åˆ°é¢„å‘å¸ƒç¯å¢ƒv2.4.0ã€‚                                 â”‚
â”‚   å½“å‰é‡ç‚¹ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‡†å¤‡ã€‚"                              â”‚
â”‚                                                             â”‚
â”‚  [ç¬¬141-150è½®åŸæ ·ä¿ç•™]                                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-13">è‡ªåŠ¨ vs æ‰‹åŠ¨å‹ç¼©</h3>
<p><strong>è‡ªåŠ¨</strong>ï¼šå½“æ¥è¿‘ä¸Šä¸‹æ–‡é™åˆ¶æ—¶è§¦å‘</p>
<ul>
<li>åœ¨è¯¦ç»†æ¨¡å¼ä¸‹ä½ ä¼šçœ‹åˆ°ï¼šğŸ§¹ è‡ªåŠ¨å‹ç¼©å®Œæˆ</li>
<li>åŸå§‹è¯·æ±‚ä¼šç”¨å‹ç¼©åçš„ä¸Šä¸‹æ–‡é‡è¯•</li>
</ul>
<p><strong>æ‰‹åŠ¨</strong>ï¼šä½¿ç”¨ /compact å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">/compact é‡ç‚¹å…³æ³¨å†³ç­–å’Œæœªè§£å†³çš„é—®é¢˜
</code></pre>
<p>ä¸æŸäº›ä¼˜åŒ–ä¸åŒï¼Œå‹ç¼©ä¼šæŒä¹…åŒ–åˆ°ç£ç›˜ã€‚æ‘˜è¦è¢«å†™å…¥ä¼šè¯çš„JSONLè½¬å½•æ–‡ä»¶ï¼Œå› æ­¤æœªæ¥çš„ä¼šè¯ä»¥å‹ç¼©åçš„å†å²å¼€å§‹ã€‚</p>
<h2 data-id="heading-14">è®°å¿†åˆ·æ–°</h2>
<p>åŸºäºLLMçš„å‹ç¼©æ˜¯ä¸€ä¸ªæœ‰æŸè¿‡ç¨‹ã€‚é‡è¦ä¿¡æ¯å¯èƒ½è¢«æ€»ç»“æ‰å¹¶å¯èƒ½ä¸¢å¤±ã€‚ä¸ºäº†åº”å¯¹è¿™ä¸€ç‚¹ï¼ŒClawdbotä½¿ç”¨äº†é¢„å‹ç¼©è®°å¿†åˆ·æ–°ã€‚</p>
<pre><code class="hljs language-text" lang="text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸Šä¸‹æ–‡æ¥è¿‘é™åˆ¶                                             â”‚
â”‚                                                             â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  ä¸Šä¸‹æ–‡çš„75%         â”‚
â”‚                              â†‘                              â”‚
â”‚                    è¶…è¿‡è½¯é˜ˆå€¼                               â”‚
â”‚                    (contextWindow - reserve - softThreshold)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é™é»˜è®°å¿†åˆ·æ–°è½®æ¬¡                                           â”‚
â”‚                                                             â”‚
â”‚  ç³»ç»Ÿï¼š"é¢„å‹ç¼©è®°å¿†åˆ·æ–°ã€‚ç°åœ¨å­˜å‚¨æŒä¹…çš„                      â”‚
â”‚          è®°å¿†ï¼ˆä½¿ç”¨ memory/YYYY-MM-DD.mdï¼‰ã€‚                â”‚
â”‚          å¦‚æœæ²¡æœ‰è¦å­˜å‚¨çš„ï¼Œå›å¤ NO_REPLYã€‚"                 â”‚
â”‚                                                             â”‚
â”‚  Agentï¼šå®¡æŸ¥å¯¹è¯ä¸­çš„é‡è¦ä¿¡æ¯                                â”‚
â”‚         å°†å…³é”®å†³ç­–/äº‹å®å†™å…¥è®°å¿†æ–‡ä»¶                         â”‚
â”‚         -&gt; NO_REPLYï¼ˆç”¨æˆ·çœ‹ä¸åˆ°ä»»ä½•å†…å®¹ï¼‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®‰å…¨è¿›è¡Œå‹ç¼©                                               â”‚
â”‚                                                             â”‚
â”‚  é‡è¦ä¿¡æ¯ç°åœ¨å·²åœ¨ç£ç›˜ä¸Š                                     â”‚
â”‚  å‹ç¼©å¯ä»¥åœ¨ä¸ä¸¢å¤±çŸ¥è¯†çš„æƒ…å†µä¸‹è¿›è¡Œ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>è®°å¿†åˆ·æ–°å¯ä»¥åœ¨clawdbot.yamlæ–‡ä»¶æˆ–clawdbot.jsonæ–‡ä»¶ä¸­é…ç½®ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"agents"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"defaults"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"compaction"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"reserveTokensFloor"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">20000</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"memoryFlush"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"softThresholdTokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4000</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"systemPrompt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¼šè¯æ¥è¿‘å‹ç¼©ã€‚ç°åœ¨å­˜å‚¨æŒä¹…çš„è®°å¿†ã€‚"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"prompt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å°†æŒä¹…çš„ç¬”è®°å†™å…¥ memory/YYYY-MM-DD.mdï¼›å¦‚æœæ²¡æœ‰è¦å­˜å‚¨çš„ï¼Œå›å¤ NO_REPLYã€‚"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-15">å‰ªæ</h2>
<p>å·¥å…·ç»“æœå¯èƒ½éå¸¸åºå¤§ã€‚å•ä¸ªexecå‘½ä»¤å¯èƒ½è¾“å‡º5ä¸‡ä¸ªå­—ç¬¦çš„æ—¥å¿—ã€‚å‰ªæä¼šä¿®å‰ªè¿™äº›æ—§è¾“å‡ºï¼Œè€Œä¸é‡å†™å†å²ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰æŸè¿‡ç¨‹ï¼Œæ—§è¾“å‡ºæ— æ³•æ¢å¤ã€‚</p>
<pre><code class="hljs language-text" lang="text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ªæå‰ï¼ˆå†…å­˜ä¸­ï¼‰                                           â”‚
â”‚                                                             â”‚
â”‚  å·¥å…·ç»“æœï¼ˆexecï¼‰ï¼š[5ä¸‡ä¸ªå­—ç¬¦çš„npm installè¾“å‡º]               â”‚
â”‚  å·¥å…·ç»“æœï¼ˆreadï¼‰ï¼š[å¤§å‹é…ç½®æ–‡ä»¶ï¼Œ1ä¸‡ä¸ªå­—ç¬¦]                  â”‚
â”‚  å·¥å…·ç»“æœï¼ˆexecï¼‰ï¼š[æ„å»ºæ—¥å¿—ï¼Œ3ä¸‡ä¸ªå­—ç¬¦]                      â”‚
â”‚  ç”¨æˆ·ï¼š"æ„å»ºæˆåŠŸäº†å—ï¼Ÿ"                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ ï¼ˆè½¯ä¿®å‰ª + ç¡¬æ¸…é™¤ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ªæåï¼ˆå‘é€ç»™æ¨¡å‹ï¼‰                                       â”‚
â”‚                                                             â”‚
â”‚  å·¥å…·ç»“æœï¼ˆexecï¼‰ï¼š"npm WARN deprecated...[å·²æˆªæ–­]           â”‚
â”‚                       ...æˆåŠŸå®‰è£…ã€‚"                        â”‚
â”‚  å·¥å…·ç»“æœï¼ˆreadï¼‰ï¼š"[æ—§å·¥å…·ç»“æœå†…å®¹å·²æ¸…é™¤]"                   â”‚
â”‚  å·¥å…·ç»“æœï¼ˆexecï¼‰ï¼š[ä¿ç•™ - å¤ªæ–°ï¼Œä¸é€‚åˆå‰ªæ]                  â”‚
â”‚  ç”¨æˆ·ï¼š"æ„å»ºæˆåŠŸäº†å—ï¼Ÿ"                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>ç£ç›˜ä¸Šçš„JSONLæ–‡ä»¶ï¼šä¿æŒä¸å˜ï¼ˆå®Œæ•´è¾“å‡ºä»ç„¶åœ¨é‚£é‡Œï¼‰</p>
<h3 data-id="heading-16">ç¼“å­˜TTLå‰ªæ</h3>
<p>Anthropicä¼šå¯¹æç¤ºè¯å‰ç¼€è¿›è¡Œæœ€å¤š5åˆ†é’Ÿçš„ç¼“å­˜ï¼Œä»¥å‡å°‘é‡å¤è°ƒç”¨çš„å»¶è¿Ÿå’Œæˆæœ¬ã€‚å½“ç›¸åŒçš„æç¤ºè¯å‰ç¼€åœ¨TTLçª—å£å†…å‘é€æ—¶ï¼Œç¼“å­˜çš„tokenæˆæœ¬é™ä½çº¦90%ã€‚TTLè¿‡æœŸåï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚å¿…é¡»é‡æ–°ç¼“å­˜æ•´ä¸ªæç¤ºè¯ã€‚</p>
<p>é—®é¢˜ï¼šå¦‚æœä¼šè¯åœ¨TTLä¹‹åé—²ç½®ï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚ä¼šå¤±å»ç¼“å­˜ï¼Œå¿…é¡»ä»¥å®Œæ•´çš„"ç¼“å­˜å†™å…¥"ä»·æ ¼é‡æ–°ç¼“å­˜å®Œæ•´çš„å¯¹è¯å†å²ã€‚</p>
<p>ç¼“å­˜TTLå‰ªæé€šè¿‡åœ¨ç¼“å­˜è¿‡æœŸåæ£€æµ‹å¹¶ä¿®å‰ªæ—§å·¥å…·ç»“æœæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ›´å°çš„æç¤ºè¯é‡æ–°ç¼“å­˜æ„å‘³ç€æ›´ä½çš„æˆæœ¬ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"agent"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"contextPruning"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cache-ttl"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"ttl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"600"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"keepLastAssistants"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"softTrim"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"maxChars"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4000</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"headChars"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1500</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"tailChars"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1500</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"hardClear"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"placeholder"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æ—§å·¥å…·ç»“æœå†…å®¹å·²æ¸…é™¤]"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-17">ä¼šè¯ç”Ÿå‘½å‘¨æœŸ</h2>
<p>ä¼šè¯ä¸ä¼šæ°¸è¿œæŒç»­ã€‚å®ƒä»¬æ ¹æ®å¯é…ç½®çš„è§„åˆ™è¿›è¡Œé‡ç½®ï¼Œä¸ºè®°å¿†åˆ›å»ºè‡ªç„¶çš„è¾¹ç•Œã€‚é»˜è®¤è¡Œä¸ºæ˜¯æ¯å¤©é‡ç½®ã€‚ä½†ä¹Ÿæœ‰å…¶ä»–æ¨¡å¼å¯ç”¨ã€‚</p>
<h3 data-id="heading-18">ä¼šè¯è®°å¿†é’©å­</h3>
<p>å½“ä½ è¿è¡Œ /new å¼€å§‹ä¸€ä¸ªæ–°ä¼šè¯æ—¶ï¼Œä¼šè¯è®°å¿†é’©å­å¯ä»¥è‡ªåŠ¨ä¿å­˜ä¸Šä¸‹æ–‡ï¼š</p>
<pre><code class="hljs language-text" lang="text">/new
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è§¦å‘ä¼šè¯è®°å¿†é’©å­                                           â”‚
â”‚                                                             â”‚
â”‚  1. ä»ç»“æŸä¼šè¯ä¸­æå–æœ€å15æ¡æ¶ˆæ¯                            â”‚
â”‚  2. é€šè¿‡LLMç”Ÿæˆæè¿°æ€§slug                                   â”‚
â”‚  3. ä¿å­˜åˆ° ~/clawd/memory/2026-01-26-api-design.md          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–°ä¼šè¯å¼€å§‹                                                 â”‚
â”‚                                                             â”‚
â”‚  ä¹‹å‰çš„ä¸Šä¸‹æ–‡ç°åœ¨å¯ä»¥é€šè¿‡ memory_search æœç´¢                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>Clawdbotçš„è®°å¿†ç³»ç»Ÿä¹‹æ‰€ä»¥æˆåŠŸï¼Œæ˜¯å› ä¸ºå®ƒéµå¾ªäº†å‡ ä¸ªå…³é”®åŸåˆ™ï¼š</p>
<p><strong>1. é€æ˜ä¼˜äºé»‘ç›’</strong></p>
<p>è®°å¿†æ˜¯çº¯Markdownã€‚ä½ å¯ä»¥é˜…è¯»ã€ç¼–è¾‘ã€ç‰ˆæœ¬æ§åˆ¶å®ƒã€‚æ²¡æœ‰ä¸é€æ˜æ•°æ®åº“æˆ–ä¸“æœ‰æ ¼å¼ã€‚</p>
<p><strong>2. æœç´¢ä¼˜äºæ³¨å…¥</strong></p>
<p>ä¸å…¶ç”¨æ‰€æœ‰å†…å®¹å¡æ»¡ä¸Šä¸‹æ–‡ï¼Œä¸å¦‚è®©Agentæœç´¢ç›¸å…³å†…å®¹ã€‚è¿™ä¿æŒä¸Šä¸‹æ–‡èšç„¦å¹¶é™ä½æˆæœ¬ã€‚</p>
<p><strong>3. æŒä¹…ä¼˜äºä¼šè¯</strong></p>
<p>é‡è¦ä¿¡æ¯ä½œä¸ºæ–‡ä»¶ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œè€Œä¸ä»…ä»…å­˜åœ¨äºå¯¹è¯å†å²ä¸­ã€‚å‹ç¼©æ— æ³•æ‘§æ¯å·²ç»ä¿å­˜çš„å†…å®¹ã€‚</p>
<p><strong>4. æ··åˆä¼˜äºå•ä¸€</strong></p>
<p>çº¯å‘é‡æœç´¢ä¼šæ¼æ‰ç²¾ç¡®åŒ¹é…ã€‚çº¯å…³é”®è¯æœç´¢ä¼šæ¼æ‰è¯­ä¹‰ã€‚æ··åˆæœç´¢ä¸¤è€…å…¼å¾—ã€‚</p>
<h2 data-id="heading-20">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>Clawdbotæ–‡æ¡£(<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.clawd.bot%2F" target="_blank" title="https://docs.clawd.bot/" ref="nofollow noopener noreferrer">docs.clawd.bot/</a>) - å®˜æ–¹æ–‡æ¡£ï¼Œæ¶µç›–è®¾ç½®ã€é…ç½®å’Œæ‰€æœ‰åŠŸèƒ½</li>
<li>GitHubä»“åº“(<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fclawdbot%2Fclawdbot" target="_blank" title="https://github.com/clawdbot/clawdbot" ref="nofollow noopener noreferrer">github.com/clawdbot/clâ€¦</a>) - æºä»£ç ã€é—®é¢˜å’Œç¤¾åŒºè´¡çŒ®</li>
</ul>
<p>æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœå¯¹Vibe Codingå’ŒAgentå¼€å‘æ„Ÿå…´è¶£ï¼Œä¹Ÿå¯ä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fdidispace.com%2F" target="_blank" title="https://didispace.com/" ref="nofollow noopener noreferrer">å…³æ³¨æˆ‘çš„åšå®¢ï¼šç¨‹åºçŒ¿DD</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªè®©ä½ æ•ˆç‡ç¿»ä¸‰å€çš„AIæŠ€æœ¯åšå®¢å†™ä½œå·¥ä½œæµ]]></title>    <link>https://juejin.cn/post/7601073900524814378</link>    <guid>https://juejin.cn/post/7601073900524814378</guid>    <pubDate>2026-01-31T12:37:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601073900524814378" data-draft-id="7601076694104064036" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªè®©ä½ æ•ˆç‡ç¿»ä¸‰å€çš„AIæŠ€æœ¯åšå®¢å†™ä½œå·¥ä½œæµ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-31T12:37:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ˜ŸAIå·¥ä½œå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2250051536050763"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªè®©ä½ æ•ˆç‡ç¿»ä¸‰å€çš„AIæŠ€æœ¯åšå®¢å†™ä½œå·¥ä½œæµ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2250051536050763/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ˜ŸAIå·¥ä½œå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T12:37:03.000Z" title="Sat Jan 31 2026 12:37:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å› ä¸ºæˆ‘è‡ªå·±ç»å¸¸å†™æŠ€æœ¯åšå®¢ã€‚ä½†æ˜¯åœ¨ç¼–ç¨‹çš„æ—¶å€™å¾€å¾€æ˜¯é¡¾ä¸ä¸Šè®°å½•çŸ¥è¯†ç‚¹çš„ã€‚æ‰€ä»¥æˆ‘æ•´ç†äº†ä¸‹é¢çš„å·¥ä½œæµï¼Œå¸®å¤§å®¶åœ¨ç¼–ç¨‹çš„åŒæ—¶èƒ½å¤Ÿç§¯ç´¯å¥½å†™ä½œç´ æï¼ŒèŠ‚çº¦æ›´å¤šæ—¶é—´ã€‚</p>
<p>ç¬¬ä¸€ï¼Œæ¯æ¬¡ç¼–ç¨‹è¿‡ç¨‹ä¸­æ¯åšä¸‰å¤§æ­¥ï¼ŒæŠŠè¸©å‘ç»éªŒéƒ½è‡ªåŠ¨å†™å…¥guidebookï¼Œguidebooké‡Œçš„å†…å®¹å°±æ˜¯ä½ çš„å›¾æ–‡åˆ›ä½œåŸºçŸ³ï¼Œæ‹¿è¿™ç§è¸©å‘ä¾‹å­å»å†™æ–‡ç« ä¼šæ›´æœ‰æ„ŸæŸ“åŠ›ã€‚è€Œä¸”è¿™ä¸ªä¹Ÿå¯ä»¥é˜²æ­¢ä½ çš„ideçªç„¶æ–­ç‰‡äº†ä¸Šä¸‹æ–‡æ²¡äº†ï¼Œä½ å°±åƒç˜ªäº†ã€‚</p>
<p>ç¬¬äºŒï¼Œæ–°å»ºä¸€ä¸ª Writingé¡¹ç›®ï¼ŒWritingé¡¹ç›®é‡Œè¾¹åŒ…æ‹¬ä¸‰ä¸ªä¸»è¦æ–‡ä»¶ã€‚</p>
<p>ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä½ åˆšæ‰çš„guidebook ã€‚æ¯æ¬¡åšå®ŒæŸä¸ªé¡¹ç›®ï¼ŒæŠŠé‚£ä¸ªguidebookçš„å†…å®¹åŒæ­¥åˆ°è¿™ä¸ªWritingé¡¹ç›®é‡Œè¾¹ã€‚</p>
<p>ä¸€ä¸ªæ–‡ä»¶åå­—æ˜¯Principleï¼ŒPrincipleæç‚¼è‡ªä½ ä»¥å¾€æ¨æ–‡çš„å†™ä½œåŸºå› ä¸ç®¡æ˜¯ç»“æ„ä¸Šçš„ï¼Œè¿˜æ˜¯é£æ ¼ä¸Šçš„ã€‚</p>
<p>ä¸€ä¸ªæ–‡æ¡£æ˜¯åŒ…å«å†™ä½œæç¤ºè¯çš„æ­£å¼æ–‡æ¡£ï¼Œç®€å•å‘Šè¯‰AIåŸºäºä½ çš„å†™ä½œprincipleå’Œguidebookè¿›è¡Œä¸€ä¸ªç»¼åˆã€‚</p>
<p>ç¬¬ä¸‰ï¼Œæ¯æ¬¡ç¼–ç¨‹çš„æ—¶å€™éƒ½å»ºç«‹è¿™ä¹ˆä¸€ä¸ªguidebookï¼Œç§¯ç´¯å¤šäº†å°±å¯ä»¥å½¢æˆè‡ªå·±çš„AIç¼–ç¨‹æ‰‹å†Œæç‚¼å‡ºå…±æ€§ï¼Œä½œä¸ºç‹¬æœ‰çš„AIç¼–ç¨‹çŸ¥è¯†åº“ã€‚ç‰¹åˆ«æ˜¯ä¸€äº›APIçš„è¿é€šï¼Œä¸€äº›ç‰¹å®šæ¡†æ¶çš„ç”¨æ³•ï¼Œå®Œå…¨æ˜¯ä¸€äº›åªè¦æœ‰å‚è€ƒå°±å¯ä»¥å¤ç°çš„ä¸œè¥¿ã€‚å¦‚æœä¸è®°å½•çš„è¯ï¼Œä¸‹æ¬¡è¿˜è¦é‡æ–°æ‘¸ç´¢ã€‚</p>
<p>å¦‚æœæœ‰æ„è¯†åœ°ç§¯ç´¯ï¼Œæ¯åšä¸€ä¸ªé¡¹ç›®ï¼Œå°±ç­‰äºç§¯ç´¯äº†ä¸€ä¸ªçœŸæ­£çš„å¯å¤ç”¨çš„å®æ“ç»éªŒã€‚é€‚åˆå°ç™½æ¥å¼¥è¡¥è‡ªå·±çš„çŸ¥è¯†ç›²ç‚¹ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœä½ åªæ˜¯æƒ³ç®€å•ä¿å­˜èŠå¤©è®°å½•ï¼Œæš‚æ—¶æ²¡ç©ºæç‚¼ã€‚å¯ä»¥è¯•è¯•ä¸€äº›show me talkæ’ä»¶å¸®ä½ ä¿å­˜èŠå¤©è®°å½•ï¼Œä½†æ˜¯ä½ å¯èƒ½è‡ªå·±å¿˜äº†ä¿å­˜æˆ–è€…æ„å¤–é€€å‡ºã€‚æ¯”å¦‚@code-is-cheapã€‚è¿™äº›éƒ½æ˜¯æˆ‘å¹³å¸¸æ˜Ÿçƒé‡Œåˆ†äº«çš„çŸ¥è¯†ï¼Œå¸Œæœ›æœ‰æ›´å¤šæœºä¼šã€‚ä¸ºä½ åˆ†äº«æ›´æœ‰ç”¨çš„å·¥ä½œæµã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€å¤©ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ˆç¬¬8ç¯‡ï¼‰ï¼šUI/UX Pro Max Skill - AIè®¾è®¡æ™ºèƒ½åŠ©æ‰‹ï¼Œè®©AIå¸®ä½ æ„å»ºä¸“ä¸šUI/UX]]></title>    <link>https://juejin.cn/post/7601073900524797994</link>    <guid>https://juejin.cn/post/7601073900524797994</guid>    <pubDate>2026-01-31T11:43:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601073900524797994" data-draft-id="7601073900524781610" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€å¤©ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ˆç¬¬8ç¯‡ï¼‰ï¼šUI/UX Pro Max Skill - AIè®¾è®¡æ™ºèƒ½åŠ©æ‰‹ï¼Œè®©AIå¸®ä½ æ„å»ºä¸“ä¸šUI/UX"/> <meta itemprop="keywords" content="å‰ç«¯,UI Kit,å¼€æº"/> <meta itemprop="datePublished" content="2026-01-31T11:43:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€å¤©ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ˆç¬¬8ç¯‡ï¼‰ï¼šUI/UX Pro Max Skill - AIè®¾è®¡æ™ºèƒ½åŠ©æ‰‹ï¼Œè®©AIå¸®ä½ æ„å»ºä¸“ä¸šUI/UX
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T11:43:11.000Z" title="Sat Jan 31 2026 11:43:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<blockquote>
<p>"å½“AIèƒ½å¤Ÿç†è§£è®¾è®¡ç³»ç»Ÿã€è‰²å½©ç†è®ºã€ç”¨æˆ·ä½“éªŒåŸåˆ™æ—¶ï¼Œå®ƒå°±ä¸å†æ˜¯ç®€å•çš„ä»£ç ç”Ÿæˆå™¨ï¼Œè€Œæ˜¯çœŸæ­£çš„è®¾è®¡ä¼™ä¼´ã€‚"</p>
</blockquote>
<p>è¿™æ˜¯"ä¸€å¤©ä¸€ä¸ªå¼€æºé¡¹ç›®"ç³»åˆ—çš„ç¬¬8ç¯‡æ–‡ç« ã€‚ä»Šå¤©å¸¦ä½ äº†è§£çš„é¡¹ç›®æ˜¯ <strong>UI/UX Pro Max Skill</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnextlevelbuilder%2Fui-ux-pro-max-skill" target="_blank" title="https://github.com/nextlevelbuilder/ui-ux-pro-max-skill" ref="nofollow noopener noreferrer">GitHub</a>ï¼‰ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨Claude Codeã€Cursorã€Windsurfç­‰AIç¼–ç¨‹åŠ©æ‰‹ï¼Œå¹¶ä¸”å¸Œæœ›å®ƒä»¬èƒ½å¤Ÿç”Ÿæˆä¸“ä¸šã€ç¾è§‚ã€ç¬¦åˆè®¾è®¡è§„èŒƒçš„UI/UXä»£ç ï¼Œé‚£ä¹ˆUI/UX Pro Max Skillç»å¯¹å€¼å¾—ä½ æ·±å…¥äº†è§£ã€‚å®ƒé€šè¿‡24.7k+ Starsçš„ç¤¾åŒºè®¤å¯ï¼Œè¯æ˜äº†AIè®¾è®¡æ™ºèƒ½çš„å·¨å¤§ä»·å€¼ã€‚</p>
<h3 data-id="heading-1">ä½ å°†å­¦åˆ°ä»€ä¹ˆ</h3>
<ul>
<li>UI/UX Pro Max Skillçš„æ ¸å¿ƒæ¶æ„å’Œå·¥ä½œåŸç†</li>
<li>å¦‚ä½•ä¸ºä¸åŒAIåŠ©æ‰‹å®‰è£…å’Œé…ç½®è¿™ä¸ªæŠ€èƒ½</li>
<li>è®¾è®¡ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„æœºåˆ¶å’ŒåŸç†</li>
<li>æ™ºèƒ½æ¨èç³»ç»Ÿå¦‚ä½•å·¥ä½œ</li>
<li>å¦‚ä½•æ„å»ºåˆ†å±‚è®¾è®¡ç³»ç»Ÿï¼ˆMaster + Overridesï¼‰</li>
<li>ä¸æ‰‹åŠ¨è®¾è®¡ç›¸æ¯”çš„ä¼˜åŠ¿å’Œå±€é™æ€§</li>
<li>å¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨è¿™ä¸ªæŠ€èƒ½</li>
</ul>
<h3 data-id="heading-2">å‰ç½®çŸ¥è¯†</h3>
<ul>
<li>å¯¹AIç¼–ç¨‹åŠ©æ‰‹æœ‰åŸºæœ¬äº†è§£ï¼ˆClaude Codeã€Cursorç­‰ï¼‰</li>
<li>ç†Ÿæ‚‰UI/UXè®¾è®¡çš„åŸºæœ¬æ¦‚å¿µ</li>
<li>äº†è§£è®¾è®¡ç³»ç»Ÿçš„åŸºæœ¬ç»„æˆ</li>
<li>å¯¹å‘½ä»¤è¡Œå·¥å…·æœ‰åŸºæœ¬ä½¿ç”¨ç»éªŒ</li>
</ul>
<hr/>
<h2 data-id="heading-3">é¡¹ç›®èƒŒæ™¯</h2>
<h3 data-id="heading-4">é¡¹ç›®ç®€ä»‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68553e425e7d4263af50c4ca772316db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770464591&amp;x-signature=hpJDEbAjSRog4g%2BhtxwFUKDlS50%3D" alt="08-01-ui-pro-website.png" loading="lazy"/></p>
<p><strong>UI/UX Pro Max Skill</strong> æ˜¯ä¸€ä¸ª<strong>ä¸ºAIç¼–ç¨‹åŠ©æ‰‹æä¾›è®¾è®¡æ™ºèƒ½çš„å¼€æºæŠ€èƒ½</strong>ï¼Œé€šè¿‡å†…ç½®çš„è®¾è®¡ç³»ç»Ÿç”Ÿæˆå¼•æ“å’Œæ™ºèƒ½æ¨èç³»ç»Ÿï¼Œè®©AIåŠ©æ‰‹èƒ½å¤Ÿç”Ÿæˆä¸“ä¸šã€ç¾è§‚ã€ç¬¦åˆè®¾è®¡è§„èŒƒçš„UI/UXä»£ç ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆå·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„è®¾è®¡æ™ºèƒ½ç³»ç»Ÿã€‚</p>
<p><strong>é¡¹ç›®è§£å†³çš„æ ¸å¿ƒé—®é¢˜</strong>ï¼š</p>
<ul>
<li>AIç”Ÿæˆçš„UIä»£ç ç¼ºä¹è®¾è®¡è§„èŒƒï¼Œæ ·å¼æ··ä¹±</li>
<li>ç¼ºä¹å¯¹è‰²å½©ç†è®ºã€æ’ç‰ˆã€é—´è·ç­‰è®¾è®¡åŸåˆ™çš„ç†è§£</li>
<li>æ— æ³•æ ¹æ®äº§å“ç±»å‹æ¨èåˆé€‚çš„è®¾è®¡é£æ ¼</li>
<li>ç¼ºå°‘è®¾è®¡ç³»ç»Ÿçš„æ¦‚å¿µï¼Œä»£ç éš¾ä»¥ç»´æŠ¤</li>
<li>ä¸åŒAIåŠ©æ‰‹å¹³å°éœ€è¦é‡å¤é…ç½®è®¾è®¡çŸ¥è¯†</li>
</ul>
<p><strong>é¢å‘çš„ç”¨æˆ·ç¾¤ä½“</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨AIç¼–ç¨‹åŠ©æ‰‹çš„å¼€å‘è€…</li>
<li>éœ€è¦å¿«é€Ÿç”Ÿæˆä¸“ä¸šUIçš„å‰ç«¯å¼€å‘è€…</li>
<li>ç¼ºä¹è®¾è®¡èƒŒæ™¯ä½†éœ€è¦æ„å»ºç¾è§‚ç•Œé¢çš„å¼€å‘è€…</li>
<li>å¸Œæœ›æå‡AIç”Ÿæˆä»£ç è´¨é‡çš„å›¢é˜Ÿ</li>
<li>éœ€è¦ç»Ÿä¸€è®¾è®¡ç³»ç»Ÿçš„é¡¹ç›®</li>
</ul>
<h3 data-id="heading-5">ä½œè€…/å›¢é˜Ÿä»‹ç»</h3>
<p><strong>å›¢é˜Ÿï¼šnextlevelbuilder</strong></p>
<ul>
<li><strong>èƒŒæ™¯</strong>ï¼šä¸“æ³¨äºAIå·¥å…·å’Œè®¾è®¡æ™ºèƒ½çš„å¼€æºå›¢é˜Ÿ</li>
<li><strong>ç†å¿µ</strong>ï¼šè®©AIçœŸæ­£ç†è§£è®¾è®¡ï¼Œè€Œä¸ä»…ä»…æ˜¯ç”Ÿæˆä»£ç </li>
<li><strong>é¡¹ç›®å®šä½</strong>ï¼šAIè®¾è®¡æ™ºèƒ½çš„æ ‡å‡†è§£å†³æ–¹æ¡ˆ</li>
<li><strong>å®˜ç½‘</strong>ï¼šui-ux-pro-max-skill.nextlevelbuilder.io</li>
</ul>
<p><strong>é¡¹ç›®åˆ›å»ºæ—¶é—´</strong>ï¼š2024å¹´ï¼ˆä»GitHubæ´»åŠ¨æ¥çœ‹æ˜¯æŒç»­æ´»è·ƒçš„é¡¹ç›®ï¼‰</p>
<h3 data-id="heading-6">é¡¹ç›®æ•°æ®</h3>
<ul>
<li>â­ <strong>GitHub Stars</strong>: 24.7k+ï¼ˆæŒç»­å¿«é€Ÿå¢é•¿ï¼‰</li>
<li>ğŸ´ <strong>Forks</strong>: 2.5k+</li>
<li>ğŸ“¦ <strong>ç‰ˆæœ¬</strong>: v2.2.1ï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼Œ2026å¹´1æœˆ26æ—¥å‘å¸ƒï¼‰</li>
<li>ğŸ“„ <strong>License</strong>: MITï¼ˆå®Œå…¨å¼€æºï¼Œè‡ªç”±ä½¿ç”¨ï¼‰</li>
<li>ğŸŒ <strong>å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fui-ux-pro-max-skill.nextlevelbuilder.io" target="_blank" title="https://ui-ux-pro-max-skill.nextlevelbuilder.io" ref="nofollow noopener noreferrer">ui-ux-pro-max-skill.nextlevelbuilder.io</a></li>
<li>ğŸ“š <strong>æ–‡æ¡£</strong>: åŒ…å«å®Œæ•´çš„ä½¿ç”¨æŒ‡å—å’ŒAPIæ–‡æ¡£</li>
<li>ğŸ’¬ <strong>ç¤¾åŒº</strong>: GitHub Issueså’ŒDiscussionsæ´»è·ƒ</li>
<li>ğŸ‘¥ <strong>è´¡çŒ®è€…</strong>: 27ä½è´¡çŒ®è€…ï¼Œæ´»è·ƒçš„ç¤¾åŒºå‚ä¸</li>
</ul>
<p><strong>é¡¹ç›®å‘å±•å†ç¨‹</strong>ï¼š</p>
<ul>
<li>2024å¹´ï¼šé¡¹ç›®åˆ›å»ºï¼Œå¼€å§‹æ„å»ºæ ¸å¿ƒè®¾è®¡æ™ºèƒ½å¼•æ“</li>
<li>2024å¹´ä¸­ï¼šæ·»åŠ å¤šå¹³å°æ”¯æŒï¼Œæ‰©å±•åˆ°20+AIåŠ©æ‰‹</li>
<li>2024å¹´åº•ï¼šå¼•å…¥åˆ†å±‚è®¾è®¡ç³»ç»Ÿï¼ˆMaster + Overridesï¼‰</li>
<li>2025å¹´ï¼šå®Œå–„CLIå·¥å…·ï¼Œä¼˜åŒ–å®‰è£…ä½“éªŒ</li>
<li>2026å¹´ï¼šæŒç»­ä¼˜åŒ–ï¼Œç¤¾åŒºæ´»è·ƒåº¦æŒç»­æå‡</li>
</ul>
<hr/>
<h2 data-id="heading-7">ä¸»è¦åŠŸèƒ½</h2>
<h3 data-id="heading-8">æ ¸å¿ƒä½œç”¨</h3>
<p>UI/UX Pro Max Skillçš„æ ¸å¿ƒä½œç”¨æ˜¯<strong>ä¸ºAIç¼–ç¨‹åŠ©æ‰‹æ³¨å…¥è®¾è®¡æ™ºèƒ½</strong>ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>è‡ªåŠ¨ç”Ÿæˆè®¾è®¡ç³»ç»Ÿ</strong>ï¼šæ ¹æ®äº§å“ç±»å‹è‡ªåŠ¨ç”Ÿæˆå®Œæ•´è®¾è®¡ç³»ç»Ÿï¼ˆè‰²å½©ã€å­—ä½“ã€é—´è·ã€ç»„ä»¶è§„èŒƒï¼‰</li>
<li><strong>æ™ºèƒ½æ ·å¼æ¨è</strong>ï¼šåŸºäºäº§å“é¢†åŸŸæ¨èæœ€ä½³æ ·å¼æ–¹æ¡ˆ</li>
<li><strong>ä»£ç è´¨é‡ä¿éšœ</strong>ï¼šç”Ÿæˆç¬¦åˆUI/UXæœ€ä½³å®è·µçš„ä»£ç ï¼Œè‡ªåŠ¨æ£€æµ‹è®¾è®¡åæ¨¡å¼</li>
<li><strong>å¤šå¹³å°æ”¯æŒ</strong>ï¼šæ”¯æŒWebï¼ˆHTML+Tailwindã€Reactã€Vueï¼‰ã€ç§»åŠ¨ç«¯ï¼ˆSwiftUIã€Jetpack Composeï¼‰ã€è·¨å¹³å°ï¼ˆReact Nativeã€Flutterï¼‰</li>
<li><strong>åˆ†å±‚è®¾è®¡ç³»ç»Ÿ</strong>ï¼šæ”¯æŒMasterè®¾è®¡ç³»ç»Ÿå’Œé¡µé¢çº§è¦†ç›–</li>
</ol>
<h3 data-id="heading-9">å¿«é€Ÿå¼€å§‹</h3>
<h4 data-id="heading-10">å®‰è£…æ–¹å¼</h4>
<p>UI/UX Pro Max Skillæ”¯æŒå¤šç§å®‰è£…æ–¹å¼ï¼š</p>
<p><strong>æ–¹å¼1ï¼šé€šè¿‡Claude Marketplaceï¼ˆClaude Codeï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨Claude Codeä¸­ç›´æ¥å®‰è£…</span>
/plugin marketplace add nextlevelbuilder/ui-ux-pro-max-skill
/plugin install ui-ux-pro-max@ui-ux-pro-max-skill
</code></pre>
<p><strong>æ–¹å¼2ï¼šä½¿ç”¨CLIå·¥å…·ï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…CLIå·¥å…·</span>
npm install -g uipro-cli

<span class="hljs-comment"># ä¸ºä½ çš„AIåŠ©æ‰‹å®‰è£…æŠ€èƒ½</span>
<span class="hljs-built_in">cd</span> /path/to/your/project

<span class="hljs-comment"># æ”¯æŒå¤šç§AIåŠ©æ‰‹</span>
uipro init --ai claude      <span class="hljs-comment"># Claude Code</span>
uipro init --ai cursor      <span class="hljs-comment"># Cursor</span>
uipro init --ai windsurf    <span class="hljs-comment"># Windsurf</span>
uipro init --ai antigravity <span class="hljs-comment"># Antigravity</span>
uipro init --ai copilot     <span class="hljs-comment"># GitHub Copilot</span>
uipro init --ai codex       <span class="hljs-comment"># Codex CLI</span>
uipro init --ai gemini       <span class="hljs-comment"># Gemini CLI</span>
uipro init --ai opencode    <span class="hljs-comment"># OpenCode</span>
uipro init --ai all         <span class="hljs-comment"># æ‰€æœ‰æ”¯æŒçš„åŠ©æ‰‹</span>
</code></pre>
<p><strong>å…¶ä»–CLIå‘½ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">uipro versions      <span class="hljs-comment"># æŸ¥çœ‹å¯ç”¨ç‰ˆæœ¬</span>
uipro update        <span class="hljs-comment"># æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬</span>
uipro init --offline  <span class="hljs-comment"># ç¦»çº¿å®‰è£…ï¼ˆä½¿ç”¨æœ¬åœ°èµ„æºï¼‰</span>
</code></pre>
<h4 data-id="heading-11">å‰ç½®è¦æ±‚</h4>
<p>Python 3.xæ˜¯å¿…éœ€çš„ï¼ˆç”¨äºæœç´¢è„šæœ¬ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥Pythonç‰ˆæœ¬</span>
python3 --version

<span class="hljs-comment"># macOSå®‰è£…</span>
brew install python3

<span class="hljs-comment"># Ubuntu/Debianå®‰è£…</span>
sudo apt update &amp;&amp; sudo apt install python3

<span class="hljs-comment"># Windowså®‰è£…</span>
winget install Python.Python.3.12
</code></pre>
<h4 data-id="heading-12">æœ€ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹</h4>
<p><strong>Skillæ¨¡å¼ï¼ˆè‡ªåŠ¨æ¿€æ´»ï¼‰</strong></p>
<p>æ”¯æŒçš„å¹³å°ï¼šClaude Code, Windsurf, Antigravity, Codex CLI, Continue, Gemini CLI, OpenCode, Qoder, CodeBuddy</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç›´æ¥å¯¹è¯ï¼ŒæŠ€èƒ½ä¼šè‡ªåŠ¨æ¿€æ´»</span>
Build a landing page <span class="hljs-keyword">for</span> my SaaS product
</code></pre>
<p><strong>Workflowæ¨¡å¼ï¼ˆæ–œæ å‘½ä»¤ï¼‰</strong></p>
<p>æ”¯æŒçš„å¹³å°ï¼šCursor, Kiro, GitHub Copilot, Roo Code</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨æ–œæ å‘½ä»¤</span>
/ui-ux-pro-max Build a landing page <span class="hljs-keyword">for</span> my SaaS product
</code></pre>
<p><strong>ç¤ºä¾‹æç¤ºè¯</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">Build <span class="hljs-selector-tag">a</span> landing page for my SaaS product
Create <span class="hljs-selector-tag">a</span> dashboard for healthcare analytics
Design <span class="hljs-selector-tag">a</span> portfolio website with dark mode
Make <span class="hljs-selector-tag">a</span> mobile app UI for e-commerce
Build <span class="hljs-selector-tag">a</span> fintech banking app with dark theme
</code></pre>
<p>æˆ‘é€šè¿‡ä¸€è¡Œæç¤ºè¯ç”Ÿæˆçš„é¡¹ç›®ç®¡ç†ç½‘ç«™é¦–é¡µUIç•Œé¢</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5186ba9f69e4ce698c62b0ae1e49a86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770464591&amp;x-signature=U%2BSLCGBbkPFmSGDDWqJ6oORDzOE%3D" alt="08-02-ui-pro-demo.png" loading="lazy"/></p>
<h3 data-id="heading-13">æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li><strong>è‡ªåŠ¨è®¾è®¡ç³»ç»Ÿç”Ÿæˆ</strong>ï¼šæ ¹æ®äº§å“ç±»å‹ç”Ÿæˆå®Œæ•´è®¾è®¡ç³»ç»Ÿï¼Œæ”¯æŒ10+ä¸ªä¸“ä¸šé¢†åŸŸçŸ¥è¯†åº“</li>
<li><strong>æ™ºèƒ½æ¨èå¼•æ“</strong>ï¼šåŸºäºäº§å“ç±»å‹æ¨èæœ€ä½³æ ·å¼ï¼Œè€ƒè™‘ç”¨æˆ·ä½“éªŒå’Œå¯è®¿é—®æ€§</li>
<li><strong>å¤šæŠ€æœ¯æ ˆæ”¯æŒ</strong>ï¼šWebï¼ˆHTML+Tailwindã€Reactã€Vueç­‰ï¼‰ã€iOSï¼ˆSwiftUIï¼‰ã€Androidï¼ˆJetpack Composeï¼‰ã€è·¨å¹³å°ï¼ˆReact Nativeã€Flutterï¼‰</li>
<li><strong>åˆ†å±‚è®¾è®¡ç³»ç»Ÿ</strong>ï¼šMasterè®¾è®¡ç³»ç»Ÿ + é¡µé¢çº§è¦†ç›–ï¼Œæ™ºèƒ½æ£€ç´¢å’Œä¼˜å…ˆçº§ç®¡ç†</li>
<li><strong>è®¾è®¡è§„èŒƒæ£€æŸ¥</strong>ï¼šè‡ªåŠ¨æ£€æµ‹UI/UXåæ¨¡å¼ï¼Œæä¾›æ”¹è¿›å»ºè®®</li>
<li><strong>CLIå·¥å…·</strong>ï¼šç»Ÿä¸€å®‰è£…ç®¡ç†ï¼Œæ”¯æŒç¦»çº¿å®‰è£…å’Œç‰ˆæœ¬ç®¡ç†</li>
<li><strong>æ¨¡æ¿ç³»ç»Ÿ</strong>ï¼šåŸºäºæ¨¡æ¿çš„ä»£ç ç”Ÿæˆï¼Œå¹³å°ç‰¹å®šæ¨¡æ¿æ”¯æŒ</li>
</ul>
<h3 data-id="heading-14">é¡¹ç›®ä¼˜åŠ¿</h3>





















































<table><thead><tr><th align="left">å¯¹æ¯”é¡¹</th><th align="left">UI/UX Pro Max Skill</th><th align="left">æ‰‹åŠ¨è®¾è®¡</th><th align="left">å…¶ä»–AIè®¾è®¡å·¥å…·</th></tr></thead><tbody><tr><td align="left"><strong>è®¾è®¡æ™ºèƒ½</strong></td><td align="left">âœ… å†…ç½®å®Œæ•´è®¾è®¡ç³»ç»Ÿ</td><td align="left">âŒ éœ€è¦æ‰‹åŠ¨è®¾è®¡</td><td align="left">âš ï¸ æœ‰é™è®¾è®¡çŸ¥è¯†</td></tr><tr><td align="left"><strong>å¤šå¹³å°æ”¯æŒ</strong></td><td align="left">âœ… 20+AIåŠ©æ‰‹</td><td align="left">âŒ æ— </td><td align="left">âš ï¸ å•ä¸€å¹³å°</td></tr><tr><td align="left"><strong>è‡ªåŠ¨æ¨è</strong></td><td align="left">âœ… æ™ºèƒ½æ ·å¼æ¨è</td><td align="left">âŒ éœ€è¦ç»éªŒ</td><td align="left">âš ï¸ åŸºç¡€æ¨è</td></tr><tr><td align="left"><strong>è®¾è®¡ç³»ç»Ÿ</strong></td><td align="left">âœ… è‡ªåŠ¨ç”Ÿæˆ</td><td align="left">âŒ æ‰‹åŠ¨æ„å»º</td><td align="left">âš ï¸ éƒ¨åˆ†æ”¯æŒ</td></tr><tr><td align="left"><strong>ä»£ç è´¨é‡</strong></td><td align="left">âœ… ç¬¦åˆæœ€ä½³å®è·µ</td><td align="left">âš ï¸ ä¾èµ–ç»éªŒ</td><td align="left">âš ï¸ ä¸ä¸€è‡´</td></tr><tr><td align="left"><strong>å­¦ä¹ æ›²çº¿</strong></td><td align="left">âœ… å¼€ç®±å³ç”¨</td><td align="left">âŒ éœ€è¦å­¦ä¹ </td><td align="left">âš ï¸ éœ€è¦é…ç½®</td></tr><tr><td align="left"><strong>ç¤¾åŒºæ”¯æŒ</strong></td><td align="left">âœ… 24.7k+ Stars</td><td align="left">âŒ æ— </td><td align="left">âš ï¸ æœ‰é™</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆé€‰æ‹©UI/UX Pro Max Skillï¼Ÿ</strong></p>
<p>ç›¸æ¯”æ‰‹åŠ¨è®¾è®¡å’Œå…¶ä»–AIè®¾è®¡å·¥å…·ï¼ŒUI/UX Pro Max Skillæä¾›å®Œæ•´çš„è®¾è®¡ç³»ç»Ÿç”Ÿæˆå¼•æ“ã€æ™ºèƒ½æ¨èã€20+AIåŠ©æ‰‹æ”¯æŒã€10+é¢†åŸŸçŸ¥è¯†åº“ï¼Œå¼€ç®±å³ç”¨ï¼Œç¤¾åŒºæ´»è·ƒï¼ˆ24.7k+ Starsï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-15">é¡¹ç›®è¯¦ç»†å‰–æ</h2>
<h3 data-id="heading-16">æ¶æ„è®¾è®¡</h3>
<p>UI/UX Pro Max Skillé‡‡ç”¨<strong>æ¨¡å—åŒ–ã€å¯æ‰©å±•çš„æ¶æ„</strong>ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š</p>
<h4 data-id="heading-17">æ ¸å¿ƒæ¶æ„</h4>
<pre><code class="hljs language-arduino" lang="arduino">UI/UX Pro Max Skill
â”œâ”€â”€ CLIå·¥å…·å±‚
â”‚   â”œâ”€â”€ å®‰è£…å™¨ï¼ˆuipro-cliï¼‰
â”‚   â”œâ”€â”€ æ¨¡æ¿ç”Ÿæˆç³»ç»Ÿ
â”‚   â””â”€â”€ ç‰ˆæœ¬ç®¡ç†
â”œâ”€â”€ æŠ€èƒ½å±‚ï¼ˆ.claude/skills/ui-ux-pro-maxï¼‰
â”‚   â”œâ”€â”€ æŠ€èƒ½å®šä¹‰æ–‡ä»¶
â”‚   â”œâ”€â”€ æç¤ºè¯æ¨¡æ¿
â”‚   â””â”€â”€ å¹³å°é€‚é…å™¨
â”œâ”€â”€ æ•°æ®å±‚ï¼ˆdata/ï¼‰
â”‚   â”œâ”€â”€ è®¾è®¡çŸ¥è¯†åº“ï¼ˆCSVæ ¼å¼ï¼‰
â”‚   â”œâ”€â”€ æ ·å¼æ•°æ®åº“
â”‚   â”œâ”€â”€ è‰²å½©æ–¹æ¡ˆåº“
â”‚   â””â”€â”€ å­—ä½“åº“
â”œâ”€â”€ è„šæœ¬å±‚ï¼ˆscripts/ï¼‰
â”‚   â”œâ”€â”€ search.pyï¼ˆæœç´¢å’Œæ¨ç†å¼•æ“ï¼‰
â”‚   â”œâ”€â”€ è®¾è®¡ç³»ç»Ÿç”Ÿæˆå™¨
â”‚   â””â”€â”€ æ¨èç®—æ³•
â””â”€â”€ æ¨¡æ¿å±‚ï¼ˆtemplates/ï¼‰
    â”œâ”€â”€ å¹³å°ç‰¹å®šæ¨¡æ¿
    â”œâ”€â”€ ç»„ä»¶æ¨¡æ¿
    â””â”€â”€ é¡µé¢æ¨¡æ¿
</code></pre>
<h4 data-id="heading-18">è®¾è®¡ç³»ç»Ÿç”Ÿæˆå¼•æ“</h4>
<p>æ ¸å¿ƒæ˜¯Pythonè„šæœ¬<code>search.py</code>ï¼Œå®ç°è®¾è®¡ç³»ç»Ÿçš„è‡ªåŠ¨ç”Ÿæˆã€‚æµç¨‹åŒ…æ‹¬ï¼š1) åˆ†æäº§å“ç±»å‹å’Œéœ€æ±‚ï¼›2) ä»çŸ¥è¯†åº“æ£€ç´¢è®¾è®¡çŸ¥è¯†ï¼ˆè‰²å½©ã€å­—ä½“ã€æ ·å¼ã€ç»„ä»¶ã€é¢†åŸŸç‰¹å®šçŸ¥è¯†ï¼‰ï¼›3) åº”ç”¨æ¨ç†å¼•æ“ç”Ÿæˆè®¾è®¡ç³»ç»Ÿï¼›4) éªŒè¯å’Œä¼˜åŒ–è®¾è®¡ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-19">æ™ºèƒ½æ¨èç³»ç»Ÿ</h4>
<p>æ¨èç³»ç»ŸåŸºäºäº§å“ç±»å‹å’Œé¢†åŸŸçŸ¥è¯†è¿›è¡Œæ™ºèƒ½åŒ¹é…ï¼Œæ¨èç»´åº¦åŒ…æ‹¬ï¼šè‰²å½©æ–¹æ¡ˆï¼ˆåŸºäºäº§å“ç±»å‹ã€ç›®æ ‡ç”¨æˆ·ã€å“ç‰Œè°ƒæ€§ã€å¯è®¿é—®æ€§ï¼‰ã€å­—ä½“æ–¹æ¡ˆï¼ˆåŸºäºå¯è¯»æ€§å’Œå“ç‰Œï¼‰ã€é—´è·ç³»ç»Ÿï¼ˆåŸºäºå¹³å°å’Œå†…å®¹ï¼‰ã€ç»„ä»¶é£æ ¼ï¼ˆåŸºäºäº¤äº’éœ€æ±‚ï¼‰ã€‚é€šè¿‡ç›¸ä¼¼åº¦è®¡ç®—è¿”å›Top 3æ¨èæ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-20">åˆ†å±‚è®¾è®¡ç³»ç»Ÿï¼ˆMaster + Overridesï¼‰</h4>
<p>æ”¯æŒåˆ†å±‚è®¾è®¡ç³»ç»Ÿï¼ŒMasterç³»ç»ŸåŒ…å«å…¨å±€è‰²å½©ã€å­—ä½“ã€é—´è·ã€ç»„ä»¶è§„èŒƒï¼Œé¡µé¢è¦†ç›–åªåŒ…å«ä¸Masterä¸åŒçš„è§„åˆ™ã€‚æ£€ç´¢é€»è¾‘ï¼šå¦‚æœæŒ‡å®šé¡µé¢ï¼Œå…ˆæ£€æŸ¥é¡µé¢è¦†ç›–æ–‡ä»¶ï¼›å¦‚æœå­˜åœ¨ï¼Œåˆå¹¶Masterå’Œé¡µé¢è§„åˆ™ï¼›å¦åˆ™åªä½¿ç”¨Masterè§„åˆ™ã€‚</p>
<h3 data-id="heading-21">çŸ¥è¯†åº“ç³»ç»Ÿ</h3>
<p>UI/UX Pro Max Skillçš„æ ¸å¿ƒæ˜¯è®¾è®¡çŸ¥è¯†åº“ï¼ŒåŒ…å«10+ä¸ªé¢†åŸŸçš„ä¸“ä¸šè®¾è®¡çŸ¥è¯†ï¼š</p>
<h4 data-id="heading-22">çŸ¥è¯†åº“ç»“æ„</h4>
<pre><code class="hljs language-bash" lang="bash">data/
â”œâ”€â”€ colors.csv          <span class="hljs-comment"># è‰²å½©æ–¹æ¡ˆåº“</span>
â”œâ”€â”€ typography.csv      <span class="hljs-comment"># å­—ä½“æ–¹æ¡ˆåº“</span>
â”œâ”€â”€ styles.csv          <span class="hljs-comment"># æ ·å¼æ–¹æ¡ˆåº“</span>
â”œâ”€â”€ components.csv      <span class="hljs-comment"># ç»„ä»¶è§„èŒƒåº“</span>
â””â”€â”€ domain/             <span class="hljs-comment"># é¢†åŸŸç‰¹å®šçŸ¥è¯†</span>
    â”œâ”€â”€ saas.csv        <span class="hljs-comment"># SaaSäº§å“è®¾è®¡</span>
    â”œâ”€â”€ ecommerce.csv   <span class="hljs-comment"># ç”µå•†è®¾è®¡</span>
    â”œâ”€â”€ fintech.csv     <span class="hljs-comment"># é‡‘èç§‘æŠ€è®¾è®¡</span>
    â”œâ”€â”€ healthcare.csv  <span class="hljs-comment"># åŒ»ç–—å¥åº·è®¾è®¡</span>
    â”œâ”€â”€ education.csv   <span class="hljs-comment"># æ•™è‚²è®¾è®¡</span>
    â””â”€â”€ ...
</code></pre>
<h4 data-id="heading-23">çŸ¥è¯†åº“å†…å®¹ç¤ºä¾‹</h4>
<p><strong>è‰²å½©æ–¹æ¡ˆåº“ï¼ˆcolors.csvï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-csv" lang="csv">product_type,industry,tone,primary_color,secondary_color,accent_color,background_color,text_color
SaaS,B2B,professional,#2563EB,#1E40AF,#3B82F6,#FFFFFF,#1F2937
SaaS,B2C,friendly,#10B981,#059669,#34D399,#F9FAFB,#111827
Ecommerce,Retail,vibrant,#EC4899,#DB2777,#F472B6,#FFFFFF,#1F2937
Fintech,Finance,trustworthy,#1E40AF,#1E3A8A,#3B82F6,#F8FAFC,#0F172A
Healthcare,Medical,calm,#059669,#047857,#10B981,#FFFFFF,#064E3B
</code></pre>
<p><strong>å­—ä½“æ–¹æ¡ˆåº“ï¼ˆtypography.csvï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-csv" lang="csv">product_type,heading_font,body_font,font_size_scale,line_height_scale
SaaS,Inter,Inter,1.25,1.5
Ecommerce,Poppins,Inter,1.2,1.6
Fintech,Roboto,Roboto,1.15,1.5
Healthcare,Open Sans,Open Sans,1.3,1.7
</code></pre>
<h4 data-id="heading-24">é¢†åŸŸç‰¹å®šçŸ¥è¯†</h4>
<p>æ¯ä¸ªé¢†åŸŸéƒ½æœ‰ä¸“é—¨çš„è®¾è®¡çŸ¥è¯†åº“ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li><strong>è¡Œä¸šæœ€ä½³å®è·µ</strong>ï¼šè¯¥é¢†åŸŸçš„UI/UXæœ€ä½³å®è·µ</li>
<li><strong>ç”¨æˆ·è¡Œä¸ºæ¨¡å¼</strong>ï¼šç›®æ ‡ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯</li>
<li><strong>è®¾è®¡è¶‹åŠ¿</strong>ï¼šå½“å‰æµè¡Œçš„è®¾è®¡é£æ ¼</li>
<li><strong>å¯è®¿é—®æ€§è¦æ±‚</strong>ï¼šè¡Œä¸šç‰¹å®šçš„å¯è®¿é—®æ€§æ ‡å‡†</li>
<li><strong>åˆè§„è¦æ±‚</strong>ï¼šæ³•å¾‹æ³•è§„è¦æ±‚ï¼ˆå¦‚é‡‘èã€åŒ»ç–—ï¼‰</li>
</ul>
<h3 data-id="heading-25">å¤šå¹³å°é€‚é…ç³»ç»Ÿ</h3>
<p>UI/UX Pro Max Skillé€šè¿‡æ¨¡æ¿ç³»ç»Ÿæ”¯æŒå¤šç§AIåŠ©æ‰‹å¹³å°ï¼š</p>
<h4 data-id="heading-26">å¹³å°é€‚é…æ¶æ„</h4>
<p>é€šè¿‡<code>PlatformAdapter</code>æ¥å£å®ç°å¹³å°é€‚é…ï¼Œæ¯ä¸ªAIåŠ©æ‰‹ï¼ˆClaude Codeã€Cursorç­‰ï¼‰éƒ½æœ‰ç‹¬ç«‹çš„é€‚é…å™¨ã€‚Claude Codeæ”¯æŒè‡ªåŠ¨æ¿€æ´»ï¼ŒCursorä½¿ç”¨æ–œæ å‘½ä»¤ã€‚CLIå·¥å…·ä½¿ç”¨æ¨¡æ¿ç³»ç»ŸåŠ¨æ€ç”Ÿæˆå¹³å°ç‰¹å®šæ–‡ä»¶ï¼Œä»<code>templates/</code>ç›®å½•åŠ è½½æ¨¡æ¿å¹¶ç”ŸæˆæŠ€èƒ½æ–‡ä»¶ã€é…ç½®æ–‡ä»¶å’Œè„šæœ¬ã€‚</p>
<h3 data-id="heading-27">è®¾è®¡è§„èŒƒæ£€æŸ¥ç³»ç»Ÿ</h3>
<p>UI/UX Pro Max Skillå†…ç½®è®¾è®¡è§„èŒƒæ£€æŸ¥ï¼Œè‡ªåŠ¨æ£€æµ‹å¸¸è§åæ¨¡å¼ï¼š</p>
<h4 data-id="heading-28">åæ¨¡å¼æ£€æµ‹</h4>
<p>è®¾è®¡è§„èŒƒæ£€æŸ¥ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹å¸¸è§åæ¨¡å¼ï¼šè‰²å½©å¯¹æ¯”åº¦ä¸è¶³ï¼ˆWCAG AAæ ‡å‡†ï¼‰ã€å­—ä½“å¤§å°è¿‡å°ã€é—´è·ä¸ä¸€è‡´ã€ç»„ä»¶ä½¿ç”¨ä¸å½“ã€å¯è®¿é—®æ€§é—®é¢˜ã€‚æ£€æµ‹å™¨è§£æä»£ç ä¸­çš„è®¾è®¡å…ƒç´ ï¼Œå¯¹ç…§è®¾è®¡ç³»ç»Ÿè§„èŒƒï¼Œè¿”å›é—®é¢˜åˆ—è¡¨å’Œæ”¹è¿›å»ºè®®ã€‚</p>
<h3 data-id="heading-29">å·¥ä½œæµç¨‹</h3>
<p>UI/UX Pro Max Skillçš„å®Œæ•´å·¥ä½œæµç¨‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·è¯·æ±‚UI/UXä»»åŠ¡
<span class="hljs-code">    â†“
æŠ€èƒ½è‡ªåŠ¨æ¿€æ´»ï¼ˆSkillæ¨¡å¼ï¼‰æˆ–é€šè¿‡å‘½ä»¤æ¿€æ´»ï¼ˆWorkflowæ¨¡å¼ï¼‰
    â†“
åˆ†æäº§å“ç±»å‹å’Œéœ€æ±‚
    â†“
ä»çŸ¥è¯†åº“æ£€ç´¢ç›¸å…³è®¾è®¡çŸ¥è¯†
    â†“
åº”ç”¨æ¨ç†å¼•æ“ç”Ÿæˆè®¾è®¡ç³»ç»Ÿ
    â†“
æ™ºèƒ½æ¨èæœ€ä½³æ ·å¼æ–¹æ¡ˆ
    â†“
ç”Ÿæˆç¬¦åˆè®¾è®¡ç³»ç»Ÿçš„ä»£ç 
    â†“
æ‰§è¡Œè®¾è®¡è§„èŒƒæ£€æŸ¥
    â†“
è¿”å›ç”Ÿæˆçš„ä»£ç å’Œæ”¹è¿›å»ºè®®
</span></code></pre>
<hr/>
<h2 data-id="heading-30">é¡¹ç›®åœ°å€ä¸èµ„æº</h2>
<h3 data-id="heading-31">å®˜æ–¹èµ„æº</h3>
<ul>
<li>ğŸŒŸ <strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnextlevelbuilder%2Fui-ux-pro-max-skill" target="_blank" title="https://github.com/nextlevelbuilder/ui-ux-pro-max-skill" ref="nofollow noopener noreferrer">github.com/nextlevelbuâ€¦</a></li>
<li>ğŸŒ <strong>å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fui-ux-pro-max-skill.nextlevelbuilder.io" target="_blank" title="https://ui-ux-pro-max-skill.nextlevelbuilder.io" ref="nofollow noopener noreferrer">ui-ux-pro-max-skill.nextlevelbuilder.io</a></li>
<li>ğŸ“š <strong>æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnextlevelbuilder%2Fui-ux-pro-max-skill%23readme" target="_blank" title="https://github.com/nextlevelbuilder/ui-ux-pro-max-skill#readme" ref="nofollow noopener noreferrer">GitHub README</a></li>
<li>ğŸ’¬ <strong>ç¤¾åŒº</strong>: GitHub Discussions</li>
<li>ğŸ› <strong>Issue Tracker</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnextlevelbuilder%2Fui-ux-pro-max-skill%2Fissues" target="_blank" title="https://github.com/nextlevelbuilder/ui-ux-pro-max-skill/issues" ref="nofollow noopener noreferrer">GitHub Issues</a></li>
<li>ğŸ“¦ <strong>æœ€æ–°ç‰ˆæœ¬</strong>: v2.2.1ï¼ˆ2026å¹´1æœˆ26æ—¥å‘å¸ƒï¼‰</li>
</ul>
<h3 data-id="heading-32">é€‚ç”¨äººç¾¤</h3>
<p><strong>UI/UX Pro Max Skillç‰¹åˆ«é€‚åˆ</strong>ï¼šéœ€è¦å¿«é€Ÿç”Ÿæˆä¸“ä¸šUIä»£ç çš„å‰ç«¯å¼€å‘è€…ã€ç¼ºä¹è®¾è®¡èƒŒæ™¯çš„å…¨æ ˆå¼€å‘è€…ã€éœ€è¦å»ºç«‹è®¾è®¡ç³»ç»Ÿçš„é¡¹ç›®ã€ä½¿ç”¨Claude Code/Cursorç­‰AIåŠ©æ‰‹çš„å¼€å‘è€…ã€éœ€è¦ç»Ÿä¸€è®¾è®¡è§„èŒƒçš„å›¢é˜Ÿã€‚</p>
<p><strong>ä¸é€‚åˆ</strong>ï¼šä¸éœ€è¦AIè¾…åŠ©çš„èµ„æ·±è®¾è®¡å¸ˆã€åªéœ€è¦ç®€å•ä»£ç ç”Ÿæˆçš„ç”¨æˆ·ã€ä¸ä½¿ç”¨AIç¼–ç¨‹åŠ©æ‰‹çš„å¼€å‘è€…ã€‚</p>
<hr/>
<p><em>æ¬¢è¿æ¥æˆ‘ä¸­çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a>æ‰¾åˆ°æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†å’Œæœ‰è¶£çš„äº§å“</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ Claude Code:æ¶æ„ã€ä¸Šä¸‹æ–‡ä¸å·¥å…·ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7601034810313080886</link>    <guid>https://juejin.cn/post/7601034810313080886</guid>    <pubDate>2026-01-31T11:49:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601034810313080886" data-draft-id="7600994087589117971" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ Claude Code:æ¶æ„ã€ä¸Šä¸‹æ–‡ä¸å·¥å…·ç³»ç»Ÿ"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Claude,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-31T11:49:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ Claude Code:æ¶æ„ã€ä¸Šä¸‹æ–‡ä¸å·¥å…·ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T11:49:35.000Z" title="Sat Jan 31 2026 11:49:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­,æˆ‘ä»¬é€šè¿‡ Todo List é¡¹ç›®ä½“éªŒäº† Claude Code çš„å¼ºå¤§èƒ½åŠ›ã€‚ä½ å¯èƒ½ä¼šå¥½å¥‡:ä¸ºä»€ä¹ˆ Claude Code èƒ½å¦‚æ­¤"èªæ˜"åœ°ç†è§£éœ€æ±‚ã€è§„åˆ’ä»»åŠ¡ã€æ‰§è¡Œæ“ä½œ?å®ƒæ˜¯å¦‚ä½•åœ¨ä¸åŒæ–‡ä»¶é—´ç©¿æ¢­è‡ªå¦‚,è®°ä½ä¸Šä¸‹æ–‡,å¹¶åœ¨å‡ºé”™æ—¶è‡ªæˆ‘ä¿®å¤çš„?</p>
<p>ç†è§£è¿™äº›åŸç†å¹¶ä¸æ˜¯ä¸ºäº†"ç‚«æŠ€",è€Œæ˜¯ä¸ºäº†<strong>æ›´å¥½åœ°ä½¿ç”¨å·¥å…·</strong>ã€‚å°±åƒå¼€è½¦,ä½ ä¸éœ€è¦æˆä¸ºæ±½è½¦å·¥ç¨‹å¸ˆ,ä½†äº†è§£å‘åŠ¨æœºã€å˜é€Ÿç®±çš„åŸºæœ¬åŸç†,èƒ½è®©ä½ æ›´å¥½åœ°é©¾é©­è½¦è¾†,å‡ºç°é—®é¢˜æ—¶ä¹Ÿèƒ½å¿«é€Ÿåˆ¤æ–­æ ¹å› ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥ Claude Code çš„"å¼•æ“å®¤",è§£æå…¶æ ¸å¿ƒæ¶æ„å’Œå·¥ä½œæœºåˆ¶ã€‚é˜…è¯»æœ¬æ–‡å,ä½ å°†èƒ½å¤Ÿ:</p>
<ul>
<li><strong>ç†è§£ä¸ºä»€ä¹ˆ Claude Code æœ‰æ—¶ä¼š"å¿˜è®°"ä¹‹å‰çš„å†…å®¹</strong>(ä¸Šä¸‹æ–‡ç®¡ç†)</li>
<li><strong>çŸ¥é“å¦‚ä½•è®© Claude Code æ›´é«˜æ•ˆåœ°å·¥ä½œ</strong>(åˆç†ä½¿ç”¨å·¥å…·)</li>
<li><strong>æŒæ¡ Agent çš„åä½œæ¨¡å¼</strong>(ä»€ä¹ˆæ—¶å€™è‡ªåŠ¨è°ƒç”¨å­ Agent)</li>
<li><strong>ä¼˜åŒ–å¼€å‘ä½“éªŒ</strong>(é¿å…å¸¸è§é™·é˜±,æå‡å“åº”é€Ÿåº¦)</li>
</ul>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªçœŸå®åœºæ™¯å¼€å§‹:</p>
<blockquote>
<p>åœºæ™¯:ä½ è®© Claude Code é‡æ„ä¸€ä¸ªå¤§å‹é¡¹ç›®,å®ƒå…ˆç”¨ Glob æœç´¢æ‰€æœ‰ç›¸å…³æ–‡ä»¶,ç„¶åé€ä¸ª Read æ–‡ä»¶å†…å®¹,æ¥ç€å¼€å§‹ä¿®æ”¹ä»£ç ...çªç„¶,ä½ å‘ç°å®ƒ"å¿˜è®°"äº†æœ€å¼€å§‹åˆ†æçš„æ¶æ„è®¾è®¡,å¼€å§‹åšä¸€äº›ä¸ç¬¦åˆé¢„æœŸçš„ä¿®æ”¹ã€‚</p>
</blockquote>
<p>è¿™ä¸æ˜¯ Bug,è€Œæ˜¯<strong>ä¸Šä¸‹æ–‡ç®¡ç†</strong>çš„å¿…ç„¶ç»“æœã€‚ç†è§£äº†è¿™ä¸€ç‚¹,ä½ å°±èƒ½è°ƒæ•´ä½¿ç”¨ç­–ç•¥,é¿å…è¿™ç±»é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€Claude Code çš„æ•´ä½“æ¶æ„</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒæ¶æ„è®¾è®¡</h3>
<p>Claude Code é‡‡ç”¨<strong>åˆ†å±‚æ¶æ„</strong>,æ¯ä¸€å±‚å„å¸å…¶èŒ:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d4baaff4177431485a2a732dcd7e228~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770464974&amp;x-signature=abXWOTG4bprEtvKXjl%2FF2sTUObI%3D" alt="02-01-architecture-overview.png" loading="lazy"/></p>
<p><em>å›¾1: Claude Code åˆ†å±‚æ¶æ„è®¾è®¡,å±•ç¤ºäº†ä»ç”¨æˆ·è¾“å…¥åˆ° API è°ƒç”¨çš„å®Œæ•´æ•°æ®æµ</em></p>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡?</strong></p>
<ol>
<li><strong>æ„å›¾ç†è§£ä¸å·¥å…·æ‰§è¡Œåˆ†ç¦»</strong>:è®© AI ä¸“æ³¨äº"æƒ³åšä»€ä¹ˆ",è€Œä¸æ˜¯"æ€ä¹ˆåš"</li>
<li><strong>Agent ç¼–æ’å±‚å®ç°çµæ´»æ‰©å±•</strong>:å¯ä»¥éšæ—¶æ·»åŠ æ–°çš„ä¸“ä¸š Agent</li>
<li><strong>ä¸Šä¸‹æ–‡ç®¡ç†ç‹¬ç«‹</strong>:ä¼˜åŒ– Token ä½¿ç”¨,æå‡å“åº”é€Ÿåº¦</li>
<li><strong>å·¥å…·å±‚æ ‡å‡†åŒ–</strong>:æ‰€æœ‰å·¥å…·éµå¾ªç»Ÿä¸€æ¥å£,æ˜“äºæ‰©å±•</li>
</ol>
<h3 data-id="heading-3">1.2 æ¶æ„çš„å®é™…å½±å“</h3>
<p><strong>åœºæ™¯ 1:ä¸ºä»€ä¹ˆ Claude Code èƒ½å¤„ç†å¤§å‹é¡¹ç›®?</strong></p>
<p>ä¼ ç»Ÿ AI åŠ©æ‰‹é€šå¸¸æœ‰<strong>ä¸Šä¸‹æ–‡é•¿åº¦é™åˆ¶</strong>(å¦‚ 8K tokens),ä¸€ä¸ªç¨å¤§çš„æ–‡ä»¶å°±ä¼šè¶…é™ã€‚Claude Code é€šè¿‡:</p>
<ul>
<li><strong>æŒ‰éœ€åŠ è½½</strong>:åªè¯»å–å¿…è¦çš„æ–‡ä»¶</li>
<li><strong>æ™ºèƒ½æ€»ç»“</strong>:å¯¹é•¿æ–‡ä»¶è¿›è¡Œæ‘˜è¦</li>
<li><strong>åˆ†å±‚ç¼“å­˜</strong>:é¢‘ç¹è®¿é—®çš„å†…å®¹ä¼˜å…ˆä¿ç•™</li>
</ul>
<p>è¿™æ ·å³ä½¿é¡¹ç›®æœ‰ä¸Šåƒä¸ªæ–‡ä»¶,ä¹Ÿèƒ½é«˜æ•ˆå¤„ç†ã€‚</p>
<p><strong>åœºæ™¯ 2:ä¸ºä»€ä¹ˆæœ‰æ—¶å“åº”å¾ˆæ…¢?</strong></p>
<p>å½“ä½ çš„è¯·æ±‚è§¦å‘äº†ä»¥ä¸‹è¡Œä¸º,å“åº”ä¼šå˜æ…¢:</p>
<ul>
<li>è°ƒç”¨å¤šä¸ªå­ Agent(å¦‚å…ˆ Explore å† Plan)</li>
<li>è¯»å–å¤§é‡æ–‡ä»¶(æ¯æ¬¡ Read éƒ½æ˜¯ API è°ƒç”¨)</li>
<li>æ‰§è¡Œè€—æ—¶å‘½ä»¤(å¦‚ npm install)</li>
</ul>
<p>ç†è§£è¿™ä¸€ç‚¹,ä½ å°±çŸ¥é“å¦‚ä½•ä¼˜åŒ–:<strong>æ˜ç¡®æŒ‡å®šæ–‡ä»¶è·¯å¾„</strong>,è€Œä¸æ˜¯è®©å®ƒå…¨å±€æœç´¢ã€‚</p>
<h3 data-id="heading-4">1.3 ä¸å…¶ä»– AI å·¥å…·çš„æ¶æ„å¯¹æ¯”</h3>



































<table><thead><tr><th align="left">å·¥å…·</th><th align="left">æ¶æ„æ¨¡å¼</th><th align="left">å·¥å…·è°ƒç”¨</th><th align="left">ä¸Šä¸‹æ–‡ç®¡ç†</th></tr></thead><tbody><tr><td align="left"><strong>Claude Code</strong></td><td align="left">åˆ†å±‚ Agent æ¶æ„</td><td align="left">ä¸°å¯Œå·¥å…·é“¾</td><td align="left">æ™ºèƒ½å‹ç¼© + ç¼“å­˜</td></tr><tr><td align="left">GitHub Copilot</td><td align="left">IDE æ’ä»¶æ¨¡å¼</td><td align="left">æ— ç‹¬ç«‹å·¥å…·</td><td align="left">ä»…å½“å‰æ–‡ä»¶</td></tr><tr><td align="left">Cursor</td><td align="left">IDE é›†æˆ + Agent</td><td align="left">éƒ¨åˆ†å·¥å…·æ”¯æŒ</td><td align="left">é¡¹ç›®çº§ä¸Šä¸‹æ–‡</td></tr><tr><td align="left">ChatGPT</td><td align="left">Web å¯¹è¯</td><td align="left">æ— ç³»ç»Ÿå·¥å…·</td><td align="left">çº¯å¯¹è¯å†å²</td></tr></tbody></table>
<p>Claude Code çš„æ¶æ„ä¼˜åŠ¿åœ¨äº:<strong>å®Œæ•´çš„ä»»åŠ¡é—­ç¯èƒ½åŠ›</strong>â€”â€”ä»ç†è§£éœ€æ±‚åˆ°æ‰§è¡ŒéªŒè¯,å…¨ç¨‹è‡ªåŠ¨åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-5">äºŒã€ä¸Šä¸‹æ–‡ç®¡ç†:Claude Code çš„è®°å¿†ç³»ç»Ÿ</h2>
<h3 data-id="heading-6">2.1 ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡?</h3>
<p>åœ¨ AI å¯¹è¯ä¸­,**ä¸Šä¸‹æ–‡(Context)**åŒ…æ‹¬:</p>
<ol>
<li><strong>å¯¹è¯å†å²</strong>:ä½ å’Œ Claude Code çš„æ‰€æœ‰äº¤äº’è®°å½•</li>
<li><strong>æ–‡ä»¶å†…å®¹</strong>:è¯»å–è¿‡çš„ä»£ç ã€é…ç½®æ–‡ä»¶</li>
<li><strong>å‘½ä»¤è¾“å‡º</strong>:æ‰§è¡Œå‘½ä»¤çš„ç»“æœ</li>
<li><strong>é¡¹ç›®å…ƒä¿¡æ¯</strong>:æŠ€æœ¯æ ˆã€ç›®å½•ç»“æ„ã€ä¾èµ–å…³ç³»</li>
</ol>
<p>Claude Code éœ€è¦åœ¨<strong>æœ‰é™çš„ Token é¢„ç®—</strong>å†…(å¦‚ 200K tokens)ç®¡ç†è¿™äº›ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-7">2.2 ä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥</h3>
<h4 data-id="heading-8">ç­–ç•¥ 1:åˆ†å±‚ä¼˜å…ˆçº§</h4>
<p>Claude Code å¯¹ä¸Šä¸‹æ–‡å†…å®¹è®¾ç½®ä¸åŒä¼˜å…ˆçº§:</p>
<pre><code class="hljs language-markdown" lang="markdown">é«˜ä¼˜å…ˆçº§ (Always Keep):
<span class="hljs-bullet">  -</span> ç”¨æˆ·å½“å‰è¾“å…¥
<span class="hljs-bullet">  -</span> æœ€è¿‘ 3 è½®å¯¹è¯
<span class="hljs-bullet">  -</span> æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶
<span class="hljs-bullet">  -</span> ä»»åŠ¡åˆ—è¡¨ (Todo List)

ä¸­ä¼˜å…ˆçº§ (Conditionally Keep):
<span class="hljs-bullet">  -</span> æœ€è¿‘è¯»å–çš„æ–‡ä»¶(10åˆ†é’Ÿå†…)
<span class="hljs-bullet">  -</span> ç›¸å…³ä»£ç ç‰‡æ®µ
<span class="hljs-bullet">  -</span> å‘½ä»¤æ‰§è¡Œç»“æœ

ä½ä¼˜å…ˆçº§ (Can Be Summarized):
<span class="hljs-bullet">  -</span> æ—©æœŸå¯¹è¯å†å²
<span class="hljs-bullet">  -</span> å·²å®Œæˆçš„ä»»åŠ¡
<span class="hljs-bullet">  -</span> å¤§å‹æ–‡ä»¶çš„å®Œæ•´å†…å®¹
</code></pre>
<p><strong>å®é™…å½±å“</strong>:</p>
<p>ä½ å¯èƒ½é‡åˆ°è¿‡è¿™ç§æƒ…å†µ:</p>
<pre><code class="hljs language-csharp" lang="csharp">ç”¨æˆ·: å¸®æˆ‘é‡æ„ç”¨æˆ·è®¤è¯æ¨¡å—
[<span class="hljs-meta">Claude åˆ†æäº† 10 ä¸ªæ–‡ä»¶,åˆ¶å®šäº†æ–¹æ¡ˆ</span>]

ç”¨æˆ·: (<span class="hljs-number">10</span>åˆ†é’Ÿå) ç°åœ¨å®ç°ç¬¬ä¸€æ­¥
[<span class="hljs-meta">Claude: <span class="hljs-string">"è¯·é—®ä½ å¸Œæœ›é‡æ„å“ªä¸ªæ¨¡å—?"</span></span>]
</code></pre>
<p>è¿™æ˜¯å› ä¸ºæ—©æœŸçš„å¯¹è¯è¢«<strong>æ€»ç»“å‹ç¼©</strong>äº†,ç»†èŠ‚ä¸¢å¤±ã€‚è§£å†³æ–¹æ³•:</p>
<ul>
<li>ä¿æŒè¿ç»­å¯¹è¯,ä¸è¦ä¸­æ–­å¤ªä¹…</li>
<li>å…³é”®ä¿¡æ¯å†™å…¥ <code>claude.md</code> æˆ– Todo List</li>
</ul>
<h4 data-id="heading-9">ç­–ç•¥ 2:æ™ºèƒ½æ€»ç»“ä¸å‹ç¼©</h4>
<p>å½“ä¸Šä¸‹æ–‡æ¥è¿‘ Token é™åˆ¶æ—¶,Claude Code ä¼š:</p>
<ol>
<li>
<p><strong>è‡ªåŠ¨è§¦å‘æ€»ç»“</strong>:
[System] Context approaching limit (180K/200K tokens)
[System] Summarizing conversation...
[System] Preserved key information:
- Task: Refactor user authentication
- Files modified: Auth.ts, Login.tsx
- Current status: Step 2 of 5 in progress</p>
</li>
<li>
<p><strong>ä¿ç•™æ ¸å¿ƒä¿¡æ¯</strong>:</p>
<ul>
<li>ä»»åŠ¡ç›®æ ‡å’Œè¿›åº¦</li>
<li>å…³é”®ä»£ç ç‰‡æ®µ</li>
<li>é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯</li>
</ul>
</li>
<li>
<p><strong>å‹ç¼©å†å²å¯¹è¯</strong>:</p>
<ul>
<li>åˆå¹¶ç›¸ä¼¼è½®æ¬¡</li>
<li>åˆ é™¤å†—ä½™å†…å®¹</li>
<li>æå–å…³é”®å†³ç­–ç‚¹</li>
</ul>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26dd3e96997d437fa219c7d80e6c2b57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770464974&amp;x-signature=K54AgvZAsixB5CEfBgWBT7Y%2BLLk%3D" alt="02-02-context-compression.png" loading="lazy"/></p>
<p><em>å›¾2: ä¸Šä¸‹æ–‡å‹ç¼©æœºåˆ¶,å½“æ¥è¿‘ Token é™åˆ¶æ—¶è‡ªåŠ¨è§¦å‘ä¼˜åŒ–æµç¨‹</em></p>
<p><strong>çœŸå®æ¡ˆä¾‹</strong>:</p>
<p>åœ¨é‡æ„ä¸€ä¸ª 5000 è¡Œçš„å¤§æ–‡ä»¶æ—¶:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆå§‹:å®Œæ•´è¯»å–æ–‡ä»¶(~8000 tokens)</span>
&gt; å¸®æˆ‘åˆ†æ UserService.ts çš„é—®é¢˜

[Claude è¯»å–å®Œæ•´æ–‡ä»¶,è¿›è¡Œåˆ†æ...]

<span class="hljs-comment"># 10åˆ†é’Ÿå:æ–‡ä»¶è¢«å‹ç¼©ä¸ºæ‘˜è¦(~500 tokens)</span>
&gt; ç°åœ¨ä¼˜åŒ–ç¬¬ 3 ä¸ªæ–¹æ³•

[Claude é‡æ–°è¯»å–æ–‡ä»¶,å› ä¸ºæ‘˜è¦ä¸åŒ…å«æ–¹æ³•ç»†èŠ‚]
</code></pre>
<p><strong>ä¼˜åŒ–æŠ€å·§</strong>:</p>
<ul>
<li>å¤§æ–‡ä»¶åˆ†é˜¶æ®µå¤„ç†,æ¯æ¬¡ä¸“æ³¨ä¸€ä¸ªéƒ¨åˆ†</li>
<li>ä½¿ç”¨ <code>--context-window</code> å‚æ•°å¢å¤§ä¸Šä¸‹æ–‡é™åˆ¶</li>
<li>å…³é”®ä¿¡æ¯å¤åˆ¶åˆ°å•ç‹¬çš„å°æ–‡ä»¶ä¸­</li>
</ul>
<h4 data-id="heading-10">ç­–ç•¥ 3:æ–‡ä»¶ç¼“å­˜æœºåˆ¶</h4>
<p>Claude Code å¯¹è¯»å–è¿‡çš„æ–‡ä»¶è¿›è¡Œç¼“å­˜:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¼ªä»£ç :æ–‡ä»¶ç¼“å­˜é€»è¾‘</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">FileCache</span> {
  <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>;
  <span class="hljs-attr">accessCount</span>: <span class="hljs-built_in">number</span>;
  summary?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// ç¼“å­˜ç­–ç•¥</span>
<span class="hljs-keyword">const</span> cachePolicy = {
  <span class="hljs-attr">maxSize</span>: <span class="hljs-number">50</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>, <span class="hljs-comment">// 50MB</span>
  <span class="hljs-attr">ttl</span>: <span class="hljs-number">15</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>,       <span class="hljs-comment">// 15åˆ†é’Ÿ</span>
  <span class="hljs-attr">evictionStrategy</span>: <span class="hljs-string">'LRU'</span>,   <span class="hljs-comment">// æœ€è¿‘æœ€å°‘ä½¿ç”¨</span>
};
</code></pre>
<p><strong>å®é™…æ•ˆæœ</strong>:</p>
<p>ç¬¬ä¸€æ¬¡è¯»å–æ–‡ä»¶:</p>
<pre><code class="hljs language-scss" lang="scss">&gt; æŸ¥çœ‹ User<span class="hljs-selector-class">.ts</span> çš„å†…å®¹

<span class="hljs-selector-attr">[Executing: Read tool for src/models/User.ts]</span>
<span class="hljs-selector-attr">[API Call: ~500ms]</span>
âœ“ File cached (valid for <span class="hljs-number">15</span> minutes)
</code></pre>
<p>åç»­è¯»å–(15åˆ†é’Ÿå†…):</p>
<pre><code class="hljs language-csharp" lang="csharp">&gt; User.ts é‡Œçš„ validateEmail æ–¹æ³•æ˜¯ä»€ä¹ˆ?

[<span class="hljs-meta">Using cached content</span>]
[<span class="hljs-meta">Response time: ~50ms, 10x faster!</span>]
</code></pre>
<h3 data-id="heading-11">2.3 å¦‚ä½•ä¼˜åŒ–ä¸Šä¸‹æ–‡ä½¿ç”¨</h3>
<p><strong>æŠ€å·§ 1:ä¸»åŠ¨ç®¡ç†ä¸Šä¸‹æ–‡</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰ä¸Šä¸‹æ–‡ä½¿ç”¨æƒ…å†µ</span>
&gt; /context status

Context Usage: 125K / 200K tokens (62.5%)
  - Conversation: 45K tokens
  - File contents: 60K tokens
  - Command outputs: 20K tokens

<span class="hljs-comment"># æ¸…ç†ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡</span>
&gt; /context clear
<span class="hljs-comment"># æˆ–æŒ‡å®šæ¸…ç†ç±»å‹</span>
&gt; /context clear files
</code></pre>
<p><strong>æŠ€å·§ 2:ä½¿ç”¨ Todo List æŒä¹…åŒ–ä¿¡æ¯</strong></p>
<pre><code class="hljs language-bash" lang="bash">&gt; åˆ›å»ºä¸€ä¸ªä»»åŠ¡åˆ—è¡¨,è®°å½•é‡æ„è®¡åˆ’

[Claude åˆ›å»º Todo List,å†™å…¥ .claude/tasks.json]
<span class="hljs-comment"># å³ä½¿å¯¹è¯è¢«æ€»ç»“,Todo List ä¹Ÿä¼šä¿ç•™</span>
</code></pre>
<p><strong>æŠ€å·§ 3:åˆ©ç”¨ <code>claude.md</code> å­˜å‚¨é¡¹ç›®è§„èŒƒ</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®è§„èŒƒ (claude.md)</span>

<span class="hljs-section">## æ¶æ„è®¾è®¡</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨ Clean Architecture åˆ†å±‚
<span class="hljs-bullet">-</span> Controller â†’ Service â†’ Repository

<span class="hljs-section">## ç¼–ç è§„èŒƒ</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨ TypeScript strict mode
<span class="hljs-bullet">-</span> å‡½æ•°å‘½å:åŠ¨è¯å¼€å¤´(getUserById)
</code></pre>
<p>è¿™æ · Claude Code ä¼š<strong>è‡ªåŠ¨åŠ è½½</strong>è¿™äº›è§„èŒƒ,æ— éœ€æ¯æ¬¡å¯¹è¯éƒ½é‡å¤è¯´æ˜ã€‚</p>
<hr/>
<h2 data-id="heading-12">ä¸‰ã€å·¥å…·ç³»ç»Ÿ:Claude Code çš„åŒæ‰‹</h2>
<h3 data-id="heading-13">3.1 å·¥å…·ç³»ç»Ÿæ¦‚è§ˆ</h3>
<p>Claude Code é€šè¿‡**å·¥å…·(Tools)**ä¸æ–‡ä»¶ç³»ç»Ÿã€å‘½ä»¤è¡Œã€ä»£ç åº“äº¤äº’ã€‚æ‰€æœ‰å·¥å…·éµå¾ªç»Ÿä¸€æ¥å£:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Tool</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">description</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">parameters</span>: <span class="hljs-title class_">ParameterSchema</span>;
  <span class="hljs-attr">execute</span>: <span class="hljs-function">(<span class="hljs-params">params: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ToolResult</span>&gt;;
}
</code></pre>
<p><strong>æ ¸å¿ƒå·¥å…·åˆ†ç±»</strong>:</p>







































































<table><thead><tr><th align="left">ç±»åˆ«</th><th align="left">å·¥å…·åç§°</th><th align="left">ç”¨é€”</th><th align="center">ä½¿ç”¨é¢‘ç‡</th></tr></thead><tbody><tr><td align="left"><strong>æ–‡ä»¶æ“ä½œ</strong></td><td align="left">Read</td><td align="left">è¯»å–æ–‡ä»¶å†…å®¹</td><td align="center">â­â­â­â­â­</td></tr><tr><td align="left"/><td align="left">Write</td><td align="left">åˆ›å»º/è¦†ç›–æ–‡ä»¶</td><td align="center">â­â­â­â­</td></tr><tr><td align="left"/><td align="left">Edit</td><td align="left">ç²¾ç¡®ä¿®æ”¹æ–‡ä»¶(å­—ç¬¦ä¸²æ›¿æ¢)</td><td align="center">â­â­â­â­â­</td></tr><tr><td align="left"><strong>ä»£ç æœç´¢</strong></td><td align="left">Glob</td><td align="left">æŒ‰æ¨¡å¼æœç´¢æ–‡ä»¶</td><td align="center">â­â­â­â­</td></tr><tr><td align="left"/><td align="left">Grep</td><td align="left">æœç´¢æ–‡ä»¶å†…å®¹</td><td align="center">â­â­â­â­</td></tr><tr><td align="left"><strong>å‘½ä»¤æ‰§è¡Œ</strong></td><td align="left">Bash</td><td align="left">æ‰§è¡Œ Shell å‘½ä»¤</td><td align="center">â­â­â­â­â­</td></tr><tr><td align="left"><strong>ä»»åŠ¡ç®¡ç†</strong></td><td align="left">TodoWrite</td><td align="left">åˆ›å»º/æ›´æ–°ä»»åŠ¡åˆ—è¡¨</td><td align="center">â­â­â­</td></tr><tr><td align="left"/><td align="left">TaskCreate</td><td align="left">åˆ›å»ºå­ä»»åŠ¡</td><td align="center">â­â­â­</td></tr><tr><td align="left"><strong>äº¤äº’</strong></td><td align="left">AskUserQuestion</td><td align="left">å‘ç”¨æˆ·æé—®</td><td align="center">â­â­â­</td></tr><tr><td align="left"><strong>Agent</strong></td><td align="left">Task</td><td align="left">è°ƒç”¨å­ Agent</td><td align="center">â­â­â­â­</td></tr></tbody></table>
<h3 data-id="heading-14">3.2 æ ¸å¿ƒå·¥å…·è¯¦è§£</h3>
<h4 data-id="heading-15">å·¥å…· 1: Read - è¯»å–æ–‡ä»¶</h4>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>:</p>
<ul>
<li>åˆ†æä»£ç ç»“æ„</li>
<li>æŸ¥çœ‹é…ç½®æ–‡ä»¶</li>
<li>è¯»å–æ—¥å¿—</li>
</ul>
<p><strong>å®é™…è°ƒç”¨ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç”¨æˆ·: æŸ¥çœ‹ package.json çš„ä¾èµ–</span>

[Claude å†…éƒ¨å·¥å…·è°ƒç”¨]
<span class="hljs-section">Tool: Read</span>
<span class="hljs-section">Parameters:</span>
  file_path: /path/to/project/package.json

<span class="hljs-section">Result:</span>
{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"my-app"</span>,
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"express"</span>: <span class="hljs-string">"^4.18.0"</span>,
    <span class="hljs-string">"typescript"</span>: <span class="hljs-string">"^5.0.0"</span>
  }
}

[Claude å›å¤ç”¨æˆ·]
é¡¹ç›®ä½¿ç”¨äº† Express 4.18 å’Œ TypeScript 5.0...
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>:</p>
<p>âŒ ä½æ•ˆ:è®© Claude Code è‡ªå·±æœç´¢</p>
<pre><code class="hljs language-css" lang="css">&gt; å¸®æˆ‘æ‰¾ä¸€ä¸‹é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œ,ç„¶åæŸ¥çœ‹å†…å®¹
<span class="hljs-selector-attr">[è§¦å‘ Glob æœç´¢ â†’ Read å¤šä¸ªæ–‡ä»¶ â†’ æµªè´¹æ—¶é—´]</span>
</code></pre>
<p>âœ… é«˜æ•ˆ:ç›´æ¥æŒ‡å®šè·¯å¾„</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">&gt; </span><span class="bash">æŸ¥çœ‹ ./config/app.json çš„å†…å®¹</span>
[ç›´æ¥ Read â†’ ç«‹å³è¿”å›ç»“æœ]
</code></pre>
<h4 data-id="heading-16">å·¥å…· 2: Edit - ç²¾ç¡®ä¿®æ”¹æ–‡ä»¶</h4>
<p><strong>æ ¸å¿ƒåŸç†</strong>:Edit å·¥å…·ä½¿ç”¨<strong>å­—ç¬¦ä¸²ç²¾ç¡®åŒ¹é…</strong>æ›¿æ¢,è€Œä¸æ˜¯æ™ºèƒ½ç†è§£ä»£ç ã€‚</p>
<p><strong>é”™è¯¯ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åŸæ–‡ä»¶å†…å®¹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserById</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">return</span> db.<span class="hljs-property">users</span>.<span class="hljs-title function_">findOne</span>({ id });
}

<span class="hljs-comment">// Claude Code å°è¯•ä¿®æ”¹</span>
<span class="hljs-title class_">Tool</span>: <span class="hljs-title class_">Edit</span>
<span class="hljs-attr">old_string</span>: <span class="hljs-string">"return db.users.findOne({ id });"</span>
<span class="hljs-attr">new_string</span>: <span class="hljs-string">"return await db.users.findOne({ id });"</span>

<span class="hljs-comment">// âŒ å¤±è´¥!å› ä¸ºåŸæ–‡ä»¶å¯èƒ½æœ‰é¢å¤–ç©ºæ ¼æˆ–æ¢è¡Œ</span>
<span class="hljs-comment">// å®é™…å†…å®¹: "return db.users.findOne({ id });\n"</span>
</code></pre>
<p><strong>æ­£ç¡®ç”¨æ³•</strong>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Claude Code ä¼šå…ˆ Read æ–‡ä»¶,è·å–ç²¾ç¡®å†…å®¹</span>
<span class="hljs-title class_">Tool</span>: <span class="hljs-title class_">Read</span>
<span class="hljs-attr">file_path</span>: src/services/<span class="hljs-title class_">UserService</span>.<span class="hljs-property">ts</span>

<span class="hljs-comment">// ç„¶åä½¿ç”¨ç²¾ç¡®åŒ¹é…çš„å­—ç¬¦ä¸²</span>
<span class="hljs-title class_">Tool</span>: <span class="hljs-title class_">Edit</span>
<span class="hljs-attr">old_string</span>: <span class="hljs-string">"function getUserById(id: string) {\n  return db.users.findOne({ id });\n}"</span>
<span class="hljs-attr">new_string</span>: <span class="hljs-string">"async function getUserById(id: string) {\n  return await db.users.findOne({ id });\n}"</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡?</strong></p>
<ul>
<li><strong>å®‰å…¨æ€§</strong>:é¿å…è¯¯ä¿®æ”¹ç›¸ä¼¼ä»£ç </li>
<li><strong>ç²¾ç¡®æ€§</strong>:ç”¨æˆ·å¯ä»¥æ˜ç¡®çœ‹åˆ°ä¿®æ”¹å†…å®¹</li>
<li><strong>å¯é€†æ€§</strong>:ä¿®æ”¹å¤±è´¥ä¸ä¼šç ´åæ–‡ä»¶</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/279dae112a334a35b2aa84cca89e8ac6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770464974&amp;x-signature=Lhu84CUp3QT8%2FY2%2FR9T9CSh5HPE%3D" alt="02-03-edit-tool-workflow.png" loading="lazy"/></p>
<p><em>å›¾3: Edit å·¥å…·çš„ç²¾ç¡®åŒ¹é…æœºåˆ¶,ç¡®ä¿ä»£ç ä¿®æ”¹çš„å®‰å…¨æ€§å’Œå‡†ç¡®æ€§</em></p>
<h4 data-id="heading-17">å·¥å…· 3: Bash - å‘½ä»¤æ‰§è¡Œ</h4>
<p><strong>å¼ºå¤§ä¹‹å¤„</strong>:å¯ä»¥æ‰§è¡Œä»»ä½• Shell å‘½ä»¤,å®ç°è‡ªåŠ¨åŒ–ã€‚</p>
<p><strong>å¸¸è§ç”¨é€”</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
Bash: npm install axios

<span class="hljs-comment"># è¿è¡Œæµ‹è¯•</span>
Bash: npm <span class="hljs-built_in">test</span>

<span class="hljs-comment"># Git æ“ä½œ</span>
Bash: git add . &amp;&amp; git commit -m <span class="hljs-string">"Refactor user service"</span>

<span class="hljs-comment"># æ–‡ä»¶æ“ä½œ</span>
Bash: <span class="hljs-built_in">mkdir</span> -p src/components/common

<span class="hljs-comment"># ç¼–è¯‘æ„å»º</span>
Bash: npm run build
</code></pre>
<p><strong>å®‰å…¨æœºåˆ¶</strong>:</p>
<p>Claude Code æœ‰<strong>æƒé™æ§åˆ¶ç³»ç»Ÿ</strong>(åç»­æ–‡ç« è¯¦è§£),é«˜å±å‘½ä»¤ä¼šè¢«æ‹¦æˆª:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># âš ï¸ ä¼šè§¦å‘ç¡®è®¤</span>
Bash: <span class="hljs-built_in">rm</span> -rf node_modules

[System] This <span class="hljs-built_in">command</span> may delete important files.
[User] Confirm execution? [y/N]

<span class="hljs-comment"># ğŸš« ç›´æ¥æ‹’ç»æ‰§è¡Œ</span>
Bash: sudo <span class="hljs-built_in">rm</span> -rf /
[System] Command blocked: Dangerous operation detected
</code></pre>
<h4 data-id="heading-18">å·¥å…· 4: Task - è°ƒç”¨å­ Agent</h4>
<p><strong>ä½œç”¨</strong>:å½“ä¸» Agent é‡åˆ°éœ€è¦ä¸“ä¸šçŸ¥è¯†çš„ä»»åŠ¡æ—¶,è°ƒç”¨å­ Agent å¤„ç†ã€‚</p>
<p><strong>è°ƒç”¨æ—¶æœº</strong>:</p>
<pre><code class="hljs language-diff" lang="diff">ç”¨æˆ·: å¸®æˆ‘æ¢ç´¢è¿™ä¸ªä»£ç åº“çš„ç»“æ„

[ä¸» Agent åˆ¤æ–­: è¿™æ˜¯æ¢ç´¢ä»»åŠ¡,åº”è¯¥è°ƒç”¨ Explore Agent]

Tool: Task
subagent_type: Explore
prompt: "Analyze the codebase structure and identify key components"

[Explore Agent å¼€å§‹å·¥ä½œ...]
<span class="hljs-deletion">- ä½¿ç”¨ Glob æŸ¥æ‰¾å…³é”®æ–‡ä»¶</span>
<span class="hljs-deletion">- åˆ†æç›®å½•ç»“æ„</span>
<span class="hljs-deletion">- è¯†åˆ«æŠ€æœ¯æ ˆ</span>
<span class="hljs-deletion">- ç”Ÿæˆæ¶æ„æ‘˜è¦</span>

[è¿”å›ç»“æœç»™ä¸» Agent,ç”±ä¸» Agent å‘ˆç°ç»™ç”¨æˆ·]
</code></pre>
<p><strong>Agent ç±»å‹</strong>:</p>



































<table><thead><tr><th align="left">Agent ç±»å‹</th><th align="left">ä¸“é•¿</th><th align="left">ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong>Explore</strong></td><td align="left">ä»£ç åº“æ¢ç´¢</td><td align="left">é¦–æ¬¡æ¥è§¦é¡¹ç›®</td></tr><tr><td align="left"><strong>Plan</strong></td><td align="left">æ–¹æ¡ˆè®¾è®¡</td><td align="left">å¤æ‚åŠŸèƒ½å¼€å‘å‰</td></tr><tr><td align="left"><strong>Backend-Architect</strong></td><td align="left">åç«¯æ¶æ„è®¾è®¡</td><td align="left">API/æ•°æ®åº“è®¾è®¡</td></tr><tr><td align="left"><strong>Test-Runner</strong></td><td align="left">æµ‹è¯•æ‰§è¡Œ</td><td align="left">è‡ªåŠ¨åŒ–æµ‹è¯•</td></tr><tr><td align="left"><strong>General-Purpose</strong></td><td align="left">é€šç”¨ä»»åŠ¡</td><td align="left">å¤šæ­¥éª¤å¤æ‚ä»»åŠ¡</td></tr></tbody></table>
<h3 data-id="heading-19">3.3 å·¥å…·è°ƒç”¨é“¾è·¯åˆ†æ</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªçœŸå®æ¡ˆä¾‹,çœ‹çœ‹ Claude Code å¦‚ä½•è°ƒç”¨å·¥å…·:</p>
<p><strong>æ¡ˆä¾‹:ç”¨æˆ·è¦æ±‚"ä¼˜åŒ–ç™»å½• API çš„æ€§èƒ½"</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ­¥éª¤</span> <span class="hljs-attr">1:</span> <span class="hljs-string">ç†è§£éœ€æ±‚</span>
  <span class="hljs-string">â†’</span> <span class="hljs-string">è¯†åˆ«å…³é”®è¯:</span> <span class="hljs-string">"ä¼˜åŒ–"</span><span class="hljs-string">ã€"ç™»å½•</span> <span class="hljs-string">API"ã€"æ€§èƒ½"</span>

<span class="hljs-string">æ­¥éª¤</span> <span class="hljs-attr">2:</span> <span class="hljs-string">å®šä½æ–‡ä»¶</span>
  <span class="hljs-string">â†’</span> <span class="hljs-attr">Tool:</span> <span class="hljs-string">Glob</span>
     <span class="hljs-attr">pattern:</span> <span class="hljs-string">"**/login*.ts"</span>
     <span class="hljs-attr">result:</span> <span class="hljs-string">src/routes/login.ts,</span> <span class="hljs-string">src/services/LoginService.ts</span>

<span class="hljs-string">æ­¥éª¤</span> <span class="hljs-attr">3:</span> <span class="hljs-string">åˆ†æä»£ç </span>
  <span class="hljs-string">â†’</span> <span class="hljs-attr">Tool:</span> <span class="hljs-string">Read</span> <span class="hljs-string">(src/routes/login.ts)</span>
  <span class="hljs-string">â†’</span> <span class="hljs-attr">Tool:</span> <span class="hljs-string">Read</span> <span class="hljs-string">(src/services/LoginService.ts)</span>

<span class="hljs-string">æ­¥éª¤</span> <span class="hljs-attr">4:</span> <span class="hljs-string">è¯†åˆ«é—®é¢˜</span>
  <span class="hljs-string">â†’</span> <span class="hljs-string">å‘ç°:</span> <span class="hljs-string">æ¯æ¬¡ç™»å½•éƒ½æŸ¥è¯¢æ•°æ®åº“</span>
  <span class="hljs-string">â†’</span> <span class="hljs-string">æ–¹æ¡ˆ:</span> <span class="hljs-string">æ·»åŠ </span> <span class="hljs-string">Redis</span> <span class="hljs-string">ç¼“å­˜</span>

<span class="hljs-string">æ­¥éª¤</span> <span class="hljs-attr">5:</span> <span class="hljs-string">è¯¢é—®ç”¨æˆ·</span>
  <span class="hljs-string">â†’</span> <span class="hljs-attr">Tool:</span> <span class="hljs-string">AskUserQuestion</span>
     <span class="hljs-attr">question:</span> <span class="hljs-string">"æ˜¯å¦è¦æ·»åŠ  Redis ç¼“å­˜?"</span>
     <span class="hljs-attr">options:</span> [<span class="hljs-string">"Yes"</span>, <span class="hljs-string">"No"</span>, <span class="hljs-string">"Use in-memory cache"</span>]

<span class="hljs-string">æ­¥éª¤</span> <span class="hljs-attr">6:</span> <span class="hljs-string">å®ç°ä¿®æ”¹(å‡è®¾ç”¨æˆ·é€‰æ‹©</span> <span class="hljs-literal">Yes</span><span class="hljs-string">)</span>
  <span class="hljs-string">â†’</span> <span class="hljs-attr">Tool:</span> <span class="hljs-string">Bash</span> <span class="hljs-string">(npm</span> <span class="hljs-string">install</span> <span class="hljs-string">redis)</span>
  <span class="hljs-string">â†’</span> <span class="hljs-attr">Tool:</span> <span class="hljs-string">Write</span> <span class="hljs-string">(src/config/redis.ts)</span>
  <span class="hljs-string">â†’</span> <span class="hljs-attr">Tool:</span> <span class="hljs-string">Edit</span> <span class="hljs-string">(src/services/LoginService.ts)</span>
     <span class="hljs-string">ä¿®æ”¹:</span> <span class="hljs-string">æ·»åŠ ç¼“å­˜é€»è¾‘</span>

<span class="hljs-string">æ­¥éª¤</span> <span class="hljs-attr">7:</span> <span class="hljs-string">æµ‹è¯•éªŒè¯</span>
  <span class="hljs-string">â†’</span> <span class="hljs-attr">Tool:</span> <span class="hljs-string">Bash</span> <span class="hljs-string">(npm</span> <span class="hljs-string">test)</span>
  <span class="hljs-string">â†’</span> <span class="hljs-string">å¦‚æœå¤±è´¥,è¿”å›æ­¥éª¤</span> <span class="hljs-number">6</span> <span class="hljs-string">ä¿®å¤</span>

<span class="hljs-string">æ­¥éª¤</span> <span class="hljs-attr">8:</span> <span class="hljs-string">å®Œæˆåé¦ˆ</span>
  <span class="hljs-string">â†’</span> <span class="hljs-string">æ€»ç»“ä¿®æ”¹å†…å®¹</span>
  <span class="hljs-string">â†’</span> <span class="hljs-string">è¯¢é—®æ˜¯å¦éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5992750f0d144478507905873b5ee00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770464974&amp;x-signature=tzDglLfeVUBHBMzy%2BbZX9orMSbM%3D" alt="02-04-tool-call-chain.png" loading="lazy"/></p>
<p><em>å›¾4: ä¼˜åŒ–ç™»å½• API æ€§èƒ½çš„å®Œæ•´å·¥å…·è°ƒç”¨é“¾è·¯,å±•ç¤ºæ¯ä¸ªæ­¥éª¤çš„ Token æ¶ˆè€—</em></p>
<p><strong>Token æ¶ˆè€—åˆ†æ</strong>:</p>
<pre><code class="hljs language-scss" lang="scss">Read (login.ts, <span class="hljs-number">200</span> è¡Œ)        ~<span class="hljs-number">1</span>,<span class="hljs-number">500</span> tokens
Read (LoginService.ts, <span class="hljs-number">150</span> è¡Œ) ~<span class="hljs-number">1</span>,<span class="hljs-number">200</span> tokens
Write (redis.ts, <span class="hljs-number">50</span> è¡Œ)        ~<span class="hljs-number">400</span> tokens
Edit (LoginService.ts)         ~<span class="hljs-number">800</span> tokens
Bash å‘½ä»¤è¾“å‡º                   ~<span class="hljs-number">300</span> tokens
å¯¹è¯äº¤äº’                        ~<span class="hljs-number">2</span>,<span class="hljs-number">000</span> tokens
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡                            ~<span class="hljs-number">6</span>,<span class="hljs-number">200</span> tokens
</code></pre>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ<strong>æ˜ç¡®éœ€æ±‚</strong>èƒ½èŠ‚çœ Token:å¦‚æœä½ ä¸€å¼€å§‹å°±è¯´"åœ¨ LoginService.ts æ·»åŠ  Redis ç¼“å­˜",å¯ä»¥è·³è¿‡æ­¥éª¤ 2 å’Œ 3,èŠ‚çœ ~2,700 tokensã€‚</p>
<hr/>
<h2 data-id="heading-20">å››ã€Agent æ¨¡å¼:ä»å•æ‰“ç‹¬æ–—åˆ°å›¢é˜Ÿåä½œ</h2>
<h3 data-id="heading-21">4.1 ä»€ä¹ˆæ˜¯ Agent?</h3>
<p>åœ¨ Claude Code ä¸­,<strong>Agent</strong> æ˜¯ä¸€ä¸ªå…·æœ‰<strong>ç‰¹å®šèƒ½åŠ›</strong>å’Œ<strong>å·¥å…·æƒé™</strong>çš„æ™ºèƒ½å•å…ƒã€‚</p>
<p><strong>ç±»æ¯”</strong>:æŠŠ Agent æƒ³è±¡æˆä¸€ä¸ªå¼€å‘å›¢é˜Ÿ:</p>
<ul>
<li><strong>ä¸» Agent</strong>:é¡¹ç›®ç»ç†,è´Ÿè´£ç†è§£éœ€æ±‚ã€åˆ†é…ä»»åŠ¡ã€åè°ƒè¿›åº¦</li>
<li><strong>Explore Agent</strong>:æ¶æ„å¸ˆ,è´Ÿè´£åˆ†æä»£ç åº“ã€æ¢³ç†ç»“æ„</li>
<li><strong>Plan Agent</strong>:è®¾è®¡å¸ˆ,è´Ÿè´£åˆ¶å®šæ–¹æ¡ˆã€è§„åˆ’å®æ–½æ­¥éª¤</li>
<li><strong>Backend-Architect Agent</strong>:åç«¯ä¸“å®¶,è´Ÿè´£ API å’Œæ•°æ®åº“è®¾è®¡</li>
<li><strong>Test-Runner Agent</strong>:QA å·¥ç¨‹å¸ˆ,è´Ÿè´£æ‰§è¡Œæµ‹è¯•</li>
</ul>
<h3 data-id="heading-22">4.2 Agent çš„å·¥ä½œæµç¨‹</h3>
<p><strong>å•ä¸€ Agent æ¨¡å¼</strong>(ç®€å•ä»»åŠ¡):</p>
<pre><code class="hljs language-ini" lang="ini">ç”¨æˆ·: ä¿®æ”¹ README.md,æ·»åŠ å®‰è£…è¯´æ˜

<span class="hljs-section">[ä¸» Agent ç‹¬ç«‹å®Œæˆ]</span>
â†’ Read (README.md)
â†’ Edit (README.md)
â†’ å®Œæˆ
</code></pre>
<p><strong>å¤š Agent åä½œæ¨¡å¼</strong>(å¤æ‚ä»»åŠ¡):</p>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·: å¸®æˆ‘åˆ†æè¿™ä¸ªé¡¹ç›®å¹¶é‡æ„ç”¨æˆ·æ¨¡å—

[ä¸» Agent è§„åˆ’]
â†’ ä»»åŠ¡ 1: æ¢ç´¢é¡¹ç›®ç»“æ„
   â†’ è°ƒç”¨ Explore Agent
<span class="hljs-code">      â†’ Glob æœç´¢æ‰€æœ‰æ–‡ä»¶
      â†’ åˆ†ææŠ€æœ¯æ ˆå’Œæ¶æ„
      â†’ è¿”å›æ‘˜è¦æŠ¥å‘Š
</span>
â†’ ä»»åŠ¡ 2: è®¾è®¡é‡æ„æ–¹æ¡ˆ
   â†’ è°ƒç”¨ Plan Agent
<span class="hljs-code">      â†’ åŸºäº Explore ç»“æœ
      â†’ åˆ¶å®šè¯¦ç»†è®¡åˆ’
      â†’ åˆ—å‡ºé£é™©å’Œæ³¨æ„äº‹é¡¹
      â†’ è¿”å› Plan æ–‡æ¡£
</span>
â†’ ä»»åŠ¡ 3: æ‰§è¡Œé‡æ„
   â†’ ä¸» Agent æ ¹æ® Plan é€æ­¥å®æ–½
<span class="hljs-code">      â†’ Read/Edit æ–‡ä»¶
      â†’ è¿è¡Œæµ‹è¯•
      â†’ ä¿®å¤é”™è¯¯
</span>
â†’ ä»»åŠ¡ 4: éªŒè¯ç»“æœ
   â†’ è°ƒç”¨ Test-Runner Agent
<span class="hljs-code">      â†’ æ‰§è¡Œæ‰€æœ‰æµ‹è¯•
      â†’ ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
</span></code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e11c5342776845e0b6a45164bc6af4d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770464974&amp;x-signature=b2g01WHfrIcfRCthYPN06sakdyc%3D" alt="02-05-agent-collaboration.png" loading="lazy"/></p>
<p><em>å›¾5: å¤š Agent åä½œæ¨¡å¼,å±•ç¤ºä¸» Agent å¦‚ä½•è°ƒåº¦ Exploreã€Planã€Test-Runner ç­‰å­ Agent</em></p>
<h3 data-id="heading-23">4.3 Agent çš„èƒ½åŠ›è¾¹ç•Œ</h3>
<p>æ¯ä¸ª Agent æœ‰ä¸åŒçš„<strong>å·¥å…·æƒé™</strong>:</p>






























<table><thead><tr><th align="left">Agent</th><th align="left">å¯ç”¨å·¥å…·</th><th align="left">é™åˆ¶</th></tr></thead><tbody><tr><td align="left"><strong>ä¸» Agent</strong></td><td align="left">å…¨éƒ¨å·¥å…·</td><td align="left">æ— é™åˆ¶</td></tr><tr><td align="left"><strong>Explore Agent</strong></td><td align="left">Read, Glob, Grep</td><td align="left">åªè¯»,ä¸èƒ½ä¿®æ”¹</td></tr><tr><td align="left"><strong>Plan Agent</strong></td><td align="left">Read, Glob, Grep</td><td align="left">åªè¯»,ä¸èƒ½ä¿®æ”¹</td></tr><tr><td align="left"><strong>æ‰§è¡Œç±» Agent</strong></td><td align="left">Read, Write, Edit, Bash</td><td align="left">å¯ä¿®æ”¹,ä½†éœ€éµå¾ª Plan</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡?</strong></p>
<ul>
<li><strong>å®‰å…¨æ€§</strong>:Explore Agent ä¸èƒ½è¯¯ä¿®æ”¹æ–‡ä»¶</li>
<li><strong>ä¸“æ³¨æ€§</strong>:Plan Agent ä¸“æ³¨äºè®¾è®¡,ä¸æ‰§è¡Œ</li>
<li><strong>å¯æ§æ€§</strong>:æ‰§è¡Œç±» Agent å¿…é¡»å…ˆæœ‰æ˜ç¡®è®¡åˆ’</li>
</ul>
<h3 data-id="heading-24">4.4 å¦‚ä½•è§¦å‘ Agent è°ƒç”¨?</h3>
<p><strong>è‡ªåŠ¨è§¦å‘</strong>(Claude Code åˆ¤æ–­):</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># æ¢ç´¢å‹ä»»åŠ¡ â†’ Explore Agent</span>
<span class="hljs-section">ç”¨æˆ·: è¿™ä¸ªé¡¹ç›®æ˜¯åšä»€ä¹ˆçš„?</span>
<span class="hljs-section">ç”¨æˆ·: åˆ†æä»£ç åº“çš„æ¶æ„</span>

<span class="hljs-comment"># è®¾è®¡å‹ä»»åŠ¡ â†’ Plan Agent</span>
<span class="hljs-section">ç”¨æˆ·: æˆ‘æƒ³æ·»åŠ ä¸€ä¸ªæ”¯ä»˜æ¨¡å—,å¸®æˆ‘è®¾è®¡æ–¹æ¡ˆ</span>
<span class="hljs-section">ç”¨æˆ·: é‡æ„è¿™ä¸ªæ¨¡å—,å…ˆåˆ¶å®šè®¡åˆ’</span>

<span class="hljs-comment"># å¤æ‚ä»»åŠ¡ â†’ General-Purpose Agent</span>
<span class="hljs-section">ç”¨æˆ·: ç”Ÿæˆ API æ–‡æ¡£å¹¶éƒ¨ç½²åˆ° GitHub Pages</span>
</code></pre>
<p><strong>æ‰‹åŠ¨è§¦å‘</strong>(ä½¿ç”¨ Task å·¥å…·):</p>
<pre><code class="hljs language-bash" lang="bash">ç”¨æˆ·: /task explore <span class="hljs-string">"åˆ†æ Android é¡¹ç›®çš„æ¨¡å—ä¾èµ–å…³ç³»"</span>
ç”¨æˆ·: /task plan <span class="hljs-string">"è®¾è®¡ç”¨æˆ·è®¤è¯ç³»ç»Ÿ"</span>
</code></pre>
<hr/>
<h2 data-id="heading-25">äº”ã€å®æˆ˜æ¡ˆä¾‹:é€šè¿‡æ—¥å¿—åˆ†æå·¥ä½œæµç¨‹</h2>
<h3 data-id="heading-26">5.1 æ¡ˆä¾‹èƒŒæ™¯</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªçœŸå®æ¡ˆä¾‹,åˆ†æ Claude Code çš„å®Œæ•´å·¥ä½œæµç¨‹:</p>
<p><strong>ä»»åŠ¡</strong>: "å¸®æˆ‘ä¿®å¤ç™»å½•åŠŸèƒ½çš„ Bug:ç”¨æˆ·ç‚¹å‡»ç™»å½•åæ²¡æœ‰ååº”"</p>
<h3 data-id="heading-27">5.2 å®Œæ•´å·¥å…·è°ƒç”¨æ—¥å¿—</h3>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">00:00.000</span>] ç”¨æˆ·è¾“å…¥
User: å¸®æˆ‘ä¿®å¤ç™»å½•åŠŸèƒ½çš„ Bug:ç”¨æˆ·ç‚¹å‡»ç™»å½•åæ²¡æœ‰ååº”

[<span class="hljs-meta">00:00.050</span>] ä¸» Agent åˆ†æ
[<span class="hljs-meta">Agent</span>] Understanding task: Bug fix <span class="hljs-keyword">in</span> login functionality
[<span class="hljs-meta">Agent</span>] Strategy: Locate login code â†’ Analyze â†’ Identify issue â†’ Fix

[<span class="hljs-meta">00:00.100</span>] æ­¥éª¤ <span class="hljs-number">1</span>: å®šä½ç›¸å…³æ–‡ä»¶
[<span class="hljs-meta">Tool</span>] Glob
  pattern: <span class="hljs-string">"**/*login*.{ts,tsx,js,jsx}"</span>
  result: [
    <span class="hljs-string">"src/pages/Login.tsx"</span>,
    <span class="hljs-string">"src/services/LoginService.ts"</span>,
    <span class="hljs-string">"src/api/login.ts"</span>
  ]

[<span class="hljs-meta">00:01.200</span>] æ­¥éª¤ <span class="hljs-number">2</span>: è¯»å–å‰ç«¯ä»£ç 
[<span class="hljs-meta">Tool</span>] Read
  file_path: src/pages/Login.tsx
  lines: <span class="hljs-number">120</span>
  tokens: ~<span class="hljs-number">1</span>,<span class="hljs-number">800</span>

[<span class="hljs-meta">00:02.500</span>] æ­¥éª¤ <span class="hljs-number">3</span>: è¯»å–æœåŠ¡å±‚ä»£ç 
[<span class="hljs-meta">Tool</span>] Read
  file_path: src/services/LoginService.ts
  lines: <span class="hljs-number">85</span>
  tokens: ~<span class="hljs-number">1</span>,<span class="hljs-number">300</span>

[<span class="hljs-meta">00:03.800</span>] æ­¥éª¤ <span class="hljs-number">4</span>: Agent åˆ†æé—®é¢˜
[<span class="hljs-meta">Agent</span>] Analysis:
  - Login.tsx line <span class="hljs-number">45</span>: onClick handler missing <span class="hljs-keyword">await</span>
  - LoginService.login() returns Promise but <span class="hljs-keyword">not</span> handled
  - No error catching <span class="hljs-keyword">in</span> frontend

[<span class="hljs-meta">Agent</span>] Root cause: Async function <span class="hljs-keyword">not</span> properly awaited

[<span class="hljs-meta">00:03.900</span>] æ­¥éª¤ <span class="hljs-number">5</span>: ä¿®å¤ä»£ç 
[<span class="hljs-meta">Tool</span>] Edit
  file_path: src/pages/Login.tsx
  old_string:
    <span class="hljs-keyword">const</span> handleLogin = () =&gt; {
      LoginService.login(username, password);
    };
  new_string:
    <span class="hljs-keyword">const</span> handleLogin = <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> LoginService.login(username, password);
      } <span class="hljs-keyword">catch</span> (error) {
        console.error(<span class="hljs-string">'Login failed:'</span>, error);
      }
    };

[<span class="hljs-meta">00:04.500</span>] æ­¥éª¤ <span class="hljs-number">6</span>: è¿è¡Œæµ‹è¯•
[<span class="hljs-meta">Tool</span>] Bash
  command: npm test -- Login.test.tsx
  output:
    âœ“ <span class="hljs-function">Should handle login <span class="hljs-title">success</span> (<span class="hljs-params"><span class="hljs-number">125</span>ms</span>)
    âœ“ Should handle login <span class="hljs-title">failure</span> (<span class="hljs-params"><span class="hljs-number">98</span>ms</span>)
    All tests passed!

[00:06.200] å®Œæˆåé¦ˆ
[Agent] é—®é¢˜å·²ä¿®å¤!
  - åŸå› : å¼‚æ­¥å‡½æ•°æœªæ­£ç¡®ç­‰å¾…
  - ä¿®æ”¹: æ·»åŠ  <span class="hljs-keyword">async</span>/<span class="hljs-keyword">await</span> å’Œé”™è¯¯å¤„ç†
  - æµ‹è¯•: æ‰€æœ‰æµ‹è¯•é€šè¿‡
  éœ€è¦æˆ‘è§£é‡Šå…·ä½“çš„æŠ€æœ¯ç»†èŠ‚å—?
</span></code></pre>
<h3 data-id="heading-28">5.3 å…³é”®è§‚å¯Ÿç‚¹</h3>
<p><strong>è§‚å¯Ÿ 1: å·¥å…·è°ƒç”¨çš„åˆç†æ€§</strong></p>
<p>Claude Code æ²¡æœ‰ç›²ç›®è¯»å–æ‰€æœ‰æ–‡ä»¶,è€Œæ˜¯:</p>
<ol>
<li>å…ˆç”¨ Glob å®šä½å€™é€‰æ–‡ä»¶</li>
<li>åªè¯»å–ç›¸å…³çš„ 2 ä¸ªæ–‡ä»¶</li>
<li>å®šä½é—®é¢˜åç›´æ¥ä¿®å¤</li>
</ol>
<p><strong>è§‚å¯Ÿ 2: ä¸Šä¸‹æ–‡çš„ä½¿ç”¨</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">[Context Before Fix]
<span class="hljs-bullet">  -</span> User input: ~50 tokens
<span class="hljs-bullet">  -</span> File 1 content: ~1,800 tokens
<span class="hljs-bullet">  -</span> File 2 content: ~1,300 tokens
<span class="hljs-bullet">  -</span> Total: ~3,150 tokens

[Context After Fix]
<span class="hljs-bullet">  -</span> ä¿ç•™: ä¿®æ”¹çš„ä»£ç ç‰‡æ®µ (~200 tokens)
<span class="hljs-bullet">  -</span> å‹ç¼©: æ–‡ä»¶æ‘˜è¦ (~500 tokens)
<span class="hljs-bullet">  -</span> æ€»è®¡èŠ‚çœ: ~2,450 tokens
</code></pre>
<p><strong>è§‚å¯Ÿ 3: é”™è¯¯å¤„ç†</strong></p>
<p>å¦‚æœä¿®å¤å¤±è´¥:</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">Tool</span>] Edit (failed)
  error: <span class="hljs-string">"old_string not found in file"</span>

[<span class="hljs-meta">Agent</span>] Retry strategy:
  â†’ Re-read file <span class="hljs-keyword">with</span> context
  â†’ Adjust <span class="hljs-built_in">string</span> matching
  â†’ Retry Edit

[<span class="hljs-meta">Tool</span>] Read (<span class="hljs-keyword">with</span> full context)
[<span class="hljs-meta">Tool</span>] Edit (success)
</code></pre>
<hr/>
<h2 data-id="heading-29">å…­ã€ä¼˜åŒ–å»ºè®®ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-30">6.1 æå‡å“åº”é€Ÿåº¦çš„æŠ€å·§</h3>
<p><strong>æŠ€å·§ 1: æ˜ç¡®æŒ‡å®šæ–‡ä»¶è·¯å¾„</strong></p>
<p>âŒ æ…¢:</p>
<pre><code class="hljs language-css" lang="css">&gt; å¸®æˆ‘ä¿®æ”¹é…ç½®æ–‡ä»¶
<span class="hljs-selector-attr">[è§¦å‘ Glob æœç´¢ â†’ è¯»å–å¤šä¸ªå€™é€‰æ–‡ä»¶]</span>
</code></pre>
<p>âœ… å¿«:</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">&gt; </span><span class="bash">å¸®æˆ‘ä¿®æ”¹ ./config/app.json</span>
[ç›´æ¥ Read æŒ‡å®šæ–‡ä»¶]
</code></pre>
<p><strong>æŠ€å·§ 2: åˆ†é˜¶æ®µå¤„ç†å¤§ä»»åŠ¡</strong></p>
<p>âŒ ä½æ•ˆ:</p>
<pre><code class="hljs language-css" lang="css">&gt; é‡æ„æ•´ä¸ªé¡¹ç›®,æ·»åŠ æµ‹è¯•,ä¼˜åŒ–æ€§èƒ½,æ›´æ–°æ–‡æ¡£
<span class="hljs-selector-attr">[ä¸€æ¬¡æ€§ä»»åŠ¡è¿‡å¤§,éœ€è¦å¤šæ¬¡ä¸Šä¸‹æ–‡å‹ç¼©]</span>
</code></pre>
<p>âœ… é«˜æ•ˆ:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-quote">&gt; å…ˆé‡æ„ç”¨æˆ·æ¨¡å—</span>
[å®Œæˆå]
<span class="hljs-quote">&gt; ç°åœ¨æ·»åŠ æµ‹è¯•</span>
[å®Œæˆå]
<span class="hljs-quote">&gt; ä¼˜åŒ–æ€§èƒ½</span>
</code></pre>
<p><strong>æŠ€å·§ 3: ä½¿ç”¨ç¼“å­˜</strong></p>
<p>åœ¨ 15 åˆ†é’Ÿå†…åå¤å¼•ç”¨åŒä¸€æ–‡ä»¶:</p>
<pre><code class="hljs language-css" lang="css">&gt; æŸ¥çœ‹ User<span class="hljs-selector-class">.ts</span> çš„ç»“æ„
<span class="hljs-selector-attr">[é¦–æ¬¡ Read,ç¼“å­˜æ–‡ä»¶]</span>

&gt; User<span class="hljs-selector-class">.ts</span> ä¸­çš„ validateEmail æ–¹æ³•æ€ä¹ˆå®ç°çš„?
<span class="hljs-selector-attr">[ä½¿ç”¨ç¼“å­˜,å¿«é€Ÿå“åº”]</span>
</code></pre>
<h3 data-id="heading-31">6.2 é¿å…ä¸Šä¸‹æ–‡æµªè´¹</h3>
<p><strong>é—®é¢˜åœºæ™¯</strong>:</p>
<pre><code class="hljs language-scss" lang="scss">&gt; å¸®æˆ‘åˆ†æè¿™ <span class="hljs-number">10</span> ä¸ªæ–‡ä»¶çš„ä¾èµ–å…³ç³»
<span class="hljs-selector-attr">[è¯»å– 10 ä¸ªæ–‡ä»¶,æ¶ˆè€—å¤§é‡ tokens]</span>

&gt; (<span class="hljs-number">5</span>åˆ†é’Ÿå) ç¬¬ä¸€ä¸ªæ–‡ä»¶æœ‰ä»€ä¹ˆé—®é¢˜?
<span class="hljs-selector-attr">[ä¸Šä¸‹æ–‡å·²å‹ç¼©,éœ€è¦é‡æ–°è¯»å–]</span>
</code></pre>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-css" lang="css">&gt; å…ˆåˆ†æ File1<span class="hljs-selector-class">.ts</span> å’Œ File2<span class="hljs-selector-class">.ts</span> çš„ä¾èµ–
<span class="hljs-selector-attr">[å¤„ç† 2 ä¸ªæ–‡ä»¶,ä¿ç•™è¯¦ç»†ä¸Šä¸‹æ–‡]</span>

&gt; å†åˆ†æ File3<span class="hljs-selector-class">.ts</span> å’Œ File4<span class="hljs-selector-class">.ts</span>
<span class="hljs-selector-attr">[é€æ­¥æ‰©å±•,ä¿æŒä¸Šä¸‹æ–‡è¿ç»­æ€§]</span>
</code></pre>
<h3 data-id="heading-32">6.3 å……åˆ†åˆ©ç”¨ Agent</h3>
<p><strong>åœºæ™¯: é¦–æ¬¡æ¥è§¦æ–°é¡¹ç›®</strong></p>
<p>ä¸è¦è¿™æ ·:</p>
<pre><code class="hljs language-css" lang="css">&gt; å¸®æˆ‘çœ‹çœ‹è¿™ä¸ªé¡¹ç›®æ˜¯åšä»€ä¹ˆçš„
<span class="hljs-selector-attr">[ä¸» Agent éšæœºè¯»å–æ–‡ä»¶,æ•ˆç‡ä½]</span>
</code></pre>
<p>åº”è¯¥è¿™æ ·:</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">&gt; </span><span class="bash">/task explore <span class="hljs-string">"å…¨é¢åˆ†æè¿™ä¸ªé¡¹ç›®çš„æ¶æ„å’ŒæŠ€æœ¯æ ˆ"</span></span>
[Explore Agent ç³»ç»ŸåŒ–æ¢ç´¢,ç”Ÿæˆå®Œæ•´æŠ¥å‘Š]
</code></pre>
<p><strong>åœºæ™¯: å¤æ‚åŠŸèƒ½å¼€å‘</strong></p>
<p>ä¸è¦è¿™æ ·:</p>
<pre><code class="hljs language-css" lang="css">&gt; ç›´æ¥å¸®æˆ‘å®ç°æ”¯ä»˜æ¨¡å—
<span class="hljs-selector-attr">[ä¸» Agent è¾¹æƒ³è¾¹åš,å®¹æ˜“å‡ºé”™]</span>
</code></pre>
<p>åº”è¯¥è¿™æ ·:</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">&gt; </span><span class="bash">/task plan <span class="hljs-string">"è®¾è®¡æ”¯ä»˜æ¨¡å—çš„å®ç°æ–¹æ¡ˆ"</span></span>
[Plan Agent å…ˆåˆ¶å®šè¯¦ç»†è®¡åˆ’]
<span class="hljs-meta prompt_">
&gt; </span><span class="bash">æ ¹æ®è¿™ä¸ªè®¡åˆ’å¼€å§‹å®ç°</span>
[ä¸» Agent æŒ‰è®¡åˆ’æ‰§è¡Œ,æ€è·¯æ¸…æ™°]
</code></pre>
<hr/>
<h2 data-id="heading-33">ä¸ƒã€å¸¸è§é—®é¢˜ä¸è°ƒè¯•</h2>
<h3 data-id="heading-34">7.1 ä¸ºä»€ä¹ˆ Claude Code "å¿˜è®°"äº†ä¹‹å‰çš„å†…å®¹?</h3>
<p><strong>åŸå› </strong>: ä¸Šä¸‹æ–‡è¢«å‹ç¼©æˆ–è¶…å‡º Token é™åˆ¶ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•</strong>:</p>
<ol>
<li>ä¿æŒå¯¹è¯è¿ç»­æ€§,é¿å…é•¿æ—¶é—´ä¸­æ–­</li>
<li>å…³é”®ä¿¡æ¯å†™å…¥ <code>claude.md</code> æˆ– Todo List</li>
<li>ä½¿ç”¨ <code>/context status</code> æŸ¥çœ‹ä¸Šä¸‹æ–‡ä½¿ç”¨æƒ…å†µ</li>
</ol>
<h3 data-id="heading-35">7.2 ä¸ºä»€ä¹ˆæœ‰æ—¶å·¥å…·è°ƒç”¨å¤±è´¥?</h3>
<p><strong>å¸¸è§å¤±è´¥åŸå› </strong>:</p>
<ol>
<li>
<p><strong>Edit å·¥å…·: å­—ç¬¦ä¸²ä¸åŒ¹é…</strong>
[Tool] Edit failed: old_string not found
åŸå› : æ–‡ä»¶å†…å®¹ä¸ old_string ä¸å®Œå…¨ä¸€è‡´(ç©ºæ ¼/æ¢è¡Œ)
è§£å†³: Claude Code ä¼šè‡ªåŠ¨ Re-read åé‡è¯•</p>
</li>
<li>
<p><strong>Bash å·¥å…·: å‘½ä»¤æ‰§è¡Œé”™è¯¯</strong>
[Tool] Bash failed: npm: command not found
åŸå› : ç¯å¢ƒå˜é‡æœªé…ç½®
è§£å†³: æ£€æŸ¥ PATH æˆ–ä½¿ç”¨å®Œæ•´è·¯å¾„</p>
</li>
<li>
<p><strong>Glob å·¥å…·: æœªæ‰¾åˆ°æ–‡ä»¶</strong>
[Tool] Glob result: []
åŸå› : æ¨¡å¼åŒ¹é…é”™è¯¯æˆ–æ–‡ä»¶ä¸å­˜åœ¨
è§£å†³: æ£€æŸ¥æ–‡ä»¶è·¯å¾„å’Œæ¨¡å¼è¯­æ³•</p>
</li>
</ol>
<h3 data-id="heading-36">7.3 å¦‚ä½•æŸ¥çœ‹è¯¦ç»†çš„å·¥å…·è°ƒç”¨æ—¥å¿—?</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨ Claude Code æ—¶å¼€å¯ debug æ¨¡å¼</span>
claude --debug

<span class="hljs-comment"># æˆ–è®¾ç½®ç¯å¢ƒå˜é‡</span>
<span class="hljs-built_in">export</span> CLAUDE_LOG_LEVEL=debug
claude
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹:</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">DEBUG</span>] Tool call: Read
[<span class="hljs-meta">DEBUG</span>]   file_path: src/App.tsx
[<span class="hljs-meta">DEBUG</span>]   tokens: <span class="hljs-number">1</span>,<span class="hljs-number">234</span>
[<span class="hljs-meta">DEBUG</span>]   cache: miss
[<span class="hljs-meta">DEBUG</span>]   duration: <span class="hljs-number">456</span>ms

[<span class="hljs-meta">DEBUG</span>] Tool call: Edit
[<span class="hljs-meta">DEBUG</span>]   old_string length: <span class="hljs-number">45</span> chars
[<span class="hljs-meta">DEBUG</span>]   new_string length: <span class="hljs-number">78</span> chars
[<span class="hljs-meta">DEBUG</span>]   result: success
</code></pre>
<hr/>
<h2 data-id="heading-37">å…«ã€æ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-38">8.1 æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<p>é€šè¿‡æœ¬æ–‡,æˆ‘ä»¬æ·±å…¥ç†è§£äº† Claude Code çš„å·¥ä½œæœºåˆ¶:</p>
<p><strong>1. æ¶æ„è®¾è®¡</strong></p>
<ul>
<li>åˆ†å±‚æ¶æ„:æ„å›¾ç†è§£ â†’ Agent ç¼–æ’ â†’ å·¥å…·æ‰§è¡Œ â†’ ä¸Šä¸‹æ–‡ç®¡ç†</li>
<li>æ¯å±‚ç‹¬ç«‹ä¼˜åŒ–,å„å¸å…¶èŒ</li>
</ul>
<p><strong>2. ä¸Šä¸‹æ–‡ç®¡ç†</strong></p>
<ul>
<li>æœ‰é™ Token é¢„ç®—(200K)éœ€è¦æ™ºèƒ½ç®¡ç†</li>
<li>åˆ†å±‚ä¼˜å…ˆçº§ã€æ™ºèƒ½å‹ç¼©ã€æ–‡ä»¶ç¼“å­˜</li>
<li>ç†è§£ä¸Šä¸‹æ–‡æœºåˆ¶,é¿å…"å¤±å¿†"é—®é¢˜</li>
</ul>
<p><strong>3. å·¥å…·ç³»ç»Ÿ</strong></p>
<ul>
<li>æ ‡å‡†åŒ–å·¥å…·æ¥å£,æ˜“äºæ‰©å±•</li>
<li>æ ¸å¿ƒå·¥å…·:Readã€Editã€Bashã€Task</li>
<li>ç†è§£å·¥å…·è°ƒç”¨é“¾è·¯,ä¼˜åŒ–ä½¿ç”¨ç­–ç•¥</li>
</ul>
<p><strong>4. Agent åä½œ</strong></p>
<ul>
<li>ä¸» Agent + å­ Agent å›¢é˜Ÿæ¨¡å¼</li>
<li>ä¸åŒ Agent æœ‰ä¸åŒä¸“é•¿å’Œæƒé™</li>
<li>å¤æ‚ä»»åŠ¡è‡ªåŠ¨è°ƒåº¦å­ Agent</li>
</ul>
<h3 data-id="heading-39">8.2 å®è·µå»ºè®®</h3>
<p><strong>ç«‹å³å¯ç”¨çš„æŠ€å·§</strong>:</p>
<ol>
<li>
<p><strong>æ˜ç¡®éœ€æ±‚,æŒ‡å®šè·¯å¾„</strong></p>
<ul>
<li>ä¸è¦è®© Claude Code ç›²ç›®æœç´¢</li>
<li>ç›´æ¥æŒ‡å®šæ–‡ä»¶è·¯å¾„,èŠ‚çœæ—¶é—´</li>
</ul>
</li>
<li>
<p><strong>ä¿æŒå¯¹è¯è¿ç»­æ€§</strong></p>
<ul>
<li>å…³é”®ä»»åŠ¡ä¸è¦ä¸­æ–­å¤ªä¹…</li>
<li>é‡è¦ä¿¡æ¯å†™å…¥ <code>claude.md</code></li>
</ul>
</li>
<li>
<p><strong>åˆ†é˜¶æ®µå¤„ç†å¤§ä»»åŠ¡</strong></p>
<ul>
<li>å°†å¤æ‚ä»»åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªå°æ­¥éª¤</li>
<li>æ¯ä¸ªæ­¥éª¤å®Œæˆåå†è¿›è¡Œä¸‹ä¸€æ­¥</li>
</ul>
</li>
<li>
<p><strong>å–„ç”¨ Agent</strong></p>
<ul>
<li>æ¢ç´¢é¡¹ç›®æ—¶ä½¿ç”¨ Explore Agent</li>
<li>å¤æ‚åŠŸèƒ½å¼€å‘å‰ä½¿ç”¨ Plan Agent</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-40">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.anthropic.com%2Fclaude%2Fdocs%2Fclaude-code" target="_blank" title="https://docs.anthropic.com/claude/docs/claude-code" ref="nofollow noopener noreferrer">Claude Code å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.claude.com%2Fdocs%2Fen%2Fget-started" target="_blank" title="https://platform.claude.com/docs/en/get-started" ref="nofollow noopener noreferrer">Anthropic API ä¸Šä¸‹æ–‡æŒ‡å—</a></li>
</ul>
<hr/>
<p>ğŸ”— <strong>ç›¸å…³æ–‡ç« </strong>:</p>
<ul>
<li><a href="https://juejin.cn/post/7600629210155728902" target="_blank" title="https://juejin.cn/post/7600629210155728902">ä¸Šä¸€ç¯‡: Claude Code åˆä½“éªŒ</a></li>
</ul>
<hr/>
<blockquote>
<p>ğŸ’¡ <strong>æ€è€ƒé¢˜</strong>: åœ¨ä½ çš„é¡¹ç›®ä¸­,å“ªäº›ä»»åŠ¡é€‚åˆä½¿ç”¨ Claude Code?å“ªäº›ä¸é€‚åˆ?æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ€è€ƒ!</p>
</blockquote>
<p><em>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©,æ¬¢è¿ç‚¹èµã€æ”¶è—ã€åˆ†äº«!æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®,æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚è®©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ ,ä¸€èµ·æˆé•¿!</em></p>
<p><em>ä¹Ÿæ¬¢è¿è®¿é—®æˆ‘çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a>å‘ç°æ›´å¤šå®è—èµ„æº</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ä»¬æ¥è¯´è¯´ Redis ä¸­ Zset çš„åº•å±‚å®ç°]]></title>    <link>https://juejin.cn/post/7601046076943761423</link>    <guid>https://juejin.cn/post/7601046076943761423</guid>    <pubDate>2026-01-31T12:00:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601046076943761423" data-draft-id="7601046076943745039" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ä»¬æ¥è¯´è¯´ Redis ä¸­ Zset çš„åº•å±‚å®ç°"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-31T12:00:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å°å‡"/> <meta itemprop="url" content="https://juejin.cn/user/2285197690931932"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ä»¬æ¥è¯´è¯´ Redis ä¸­ Zset çš„åº•å±‚å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2285197690931932/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å°å‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T12:00:13.000Z" title="Sat Jan 31 2026 12:00:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">æ ¸å¿ƒæ¦‚æ‹¬</h3>
<p>Redis çš„ Zset åŒæ—¶å…·å¤‡ä¸¤ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ol>
<li><strong>æœ‰åºæ€§</strong>ï¼šå…ƒç´ æŒ‰<strong>åˆ†å€¼ï¼ˆscoreï¼‰</strong> ä»å°åˆ°å¤§æ’åˆ—ã€‚</li>
<li><strong>å”¯ä¸€æ€§</strong>ï¼šé›†åˆä¸­çš„<strong>æˆå‘˜ï¼ˆmemberï¼‰</strong> æ˜¯å”¯ä¸€çš„ï¼Œä½†åˆ†å€¼å¯ä»¥ç›¸åŒï¼ˆåˆ†å€¼ç›¸åŒæ—¶ï¼ŒæŒ‰æˆå‘˜å­—å…¸åºæ’åˆ—ï¼‰ã€‚</li>
</ol>
<p>ä¸ºäº†å®ç°è¿™ç§é«˜æ•ˆçš„ã€å…¼å…·â€œé›†åˆâ€å’Œâ€œæœ‰åºâ€ç‰¹æ€§çš„æ•°æ®ç»“æ„ï¼ŒRedis é‡‡ç”¨äº†<strong>ä¸¤ç§åº•å±‚æ•°æ®ç»“æ„ç›¸ç»“åˆçš„æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>ziplistï¼ˆå‹ç¼©åˆ—è¡¨ï¼‰æˆ– listpackï¼ˆç´§å‡‘åˆ—è¡¨ï¼‰</strong> ï¼šç”¨äºå…ƒç´ æ•°é‡å°‘ã€å…ƒç´ ä½“ç§¯å°çš„åœºæ™¯ï¼Œä»¥èŠ‚çœå†…å­˜ã€‚</li>
<li><strong>skiplistï¼ˆè·³è·ƒè¡¨ï¼‰ + dictï¼ˆå“ˆå¸Œè¡¨ï¼‰</strong> ï¼šç”¨äºé€šç”¨åœºæ™¯ï¼Œä»¥æä¾›é«˜æ•ˆçš„æŸ¥è¯¢å’ŒèŒƒå›´æ“ä½œã€‚</li>
</ul>
<p>è¿™ç§æ ¹æ®æ¡ä»¶åŠ¨æ€åˆ‡æ¢åº•å±‚ç»“æ„çš„è®¾è®¡ï¼Œä½“ç°äº† Redis åœ¨æ€§èƒ½ä¸å†…å­˜ä¹‹é—´åšå‡ºçš„ç²¾å¦™æƒè¡¡ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä¸¤ç§ç¼–ç æ–¹å¼</h3>
<p>åœ¨ Redis å†…éƒ¨ï¼ŒZset æœ‰ä¸¤ç§ç¼–ç æ–¹å¼ï¼Œé€šè¿‡é…ç½®é¡¹ <code>zset-max-ziplist-entries</code> å’Œ <code>zset-max-ziplist-value</code> æ¥æ§åˆ¶ã€‚</p>
<h4 data-id="heading-2">1. <strong>ziplist / listpack ç¼–ç </strong></h4>
<p>åœ¨ Redis æ—©æœŸç‰ˆæœ¬ä½¿ç”¨ ziplistï¼Œæ–°ç‰ˆæœ¬ï¼ˆ7.0+ï¼‰é€æ¸ç”¨ <strong>listpack</strong> æ›¿ä»£ ziplistã€‚æˆ‘ä»¬ä»¥ listpack ä¸ºä¾‹è®²è§£ã€‚</p>
<p><strong>é€‚ç”¨æ¡ä»¶ï¼ˆåŒæ—¶æ»¡è¶³ï¼‰ï¼š</strong></p>
<ul>
<li>æœ‰åºé›†åˆä¿å­˜çš„ <strong>å…ƒç´ æ•°é‡</strong> å°äº <code>zset-max-ziplist-entries</code> ï¼ˆé»˜è®¤ 128ï¼‰ã€‚</li>
<li>æ¯ä¸ª <strong>æˆå‘˜ï¼ˆmemberï¼‰çš„å­—ç¬¦ä¸²é•¿åº¦</strong> å°äº <code>zset-max-ziplist-value</code> ï¼ˆé»˜è®¤ 64 å­—èŠ‚ï¼‰ã€‚</li>
</ul>
<p><strong>å†…å­˜å¸ƒå±€ï¼š</strong><br/>
listpack æ˜¯ä¸€ä¸ªç´§å‡‘çš„ã€è¿ç»­å†…å­˜å—ï¼Œå®ƒæŒ‰ <code>[member1, score1, member2, score2, ...]</code> çš„é¡ºåºï¼Œæˆå¯¹å­˜å‚¨æˆå‘˜å’Œåˆ†å€¼ã€‚</p>
<ul>
<li><strong>æŒ‰åˆ†å€¼æ’åº</strong>ï¼šæ‰€æœ‰å…ƒç´ åœ¨ listpack å†…éƒ¨å°±æ˜¯ä¸¥æ ¼æŒ‰ç…§åˆ†å€¼å‡åºæ’åˆ—çš„ã€‚</li>
<li><strong>æŸ¥æ‰¾æ–¹å¼</strong>ï¼šç”±äºæ˜¯ç´§å‡‘æ•°ç»„ï¼ŒæŸ¥æ‰¾éœ€è¦ <strong>çº¿æ€§éå†</strong>ã€‚ä½†å› ä¸ºå…ƒç´ å°‘ï¼Œä¸”å†…å­˜è¿ç»­ï¼Œç¼“å­˜å‹å¥½ï¼Œæ•ˆç‡ä»ç„¶å¯ä»¥æ¥å—ã€‚</li>
<li><strong>æ’å…¥/åˆ é™¤</strong>ï¼šéœ€è¦ç§»åŠ¨åç»­å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ O(N)ã€‚åŒæ ·å› ä¸ºå…ƒç´ å°‘ï¼Œæˆæœ¬å¯æ§ã€‚</li>
</ul>
<p><strong>ç›®çš„</strong>ï¼šåœ¨å…ƒç´ å°‘ä¸”å°çš„åœºæ™¯ä¸‹ï¼Œè¿™ç§ç»“æ„é¿å…äº†é¢å¤–çš„æŒ‡é’ˆå¼€é”€ï¼Œ<strong>æå¤§åœ°èŠ‚çº¦äº†å†…å­˜</strong>ã€‚</p>
<h4 data-id="heading-3">2. <strong>skiplist ç¼–ç </strong></h4>
<p>å½“ä¸æ»¡è¶³ä¸Šè¿°ä»»ä¸€æ¡ä»¶æ—¶ï¼ŒZset ä¼šè‡ªåŠ¨è½¬æ¢ä¸º skiplist ç¼–ç ã€‚è¿™æ‰æ˜¯ Zset çš„â€œå®Œå…¨ä½“â€å’Œæ ¸å¿ƒå®ç°ã€‚</p>
<p>å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ª <strong>å¤åˆç»“æ„</strong>ï¼ŒåŒ…å«ä¸€ä¸ª <strong>è·³è·ƒè¡¨ï¼ˆskiplistï¼‰</strong> å’Œä¸€ä¸ª <strong>å­—å…¸ï¼ˆdictï¼‰</strong> ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zset</span> {
    dict *dict;          <span class="hljs-comment">// å“ˆå¸Œå­—å…¸</span>
    zskiplist *zsl;      <span class="hljs-comment">// è·³è·ƒè¡¨</span>
} zset;
</code></pre>
<h5 data-id="heading-4"><strong>ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ç§ç»“æ„ï¼Ÿ</strong></h5>
<ul>
<li><strong>è·³è·ƒè¡¨ï¼ˆzskiplistï¼‰</strong> ï¼šæ ¸å¿ƒä½œç”¨åœ¨äº<strong>ç»´æŠ¤å…ƒç´ çš„æœ‰åºæ€§</strong>ï¼Œæ”¯æŒé«˜æ•ˆçš„<strong>èŒƒå›´æŸ¥è¯¢</strong>ï¼ˆå¦‚ ZRANGE, ZRANKï¼‰å’Œæ’å…¥/åˆ é™¤æ“ä½œï¼ˆå¹³å‡ O(logN)ï¼‰ã€‚</li>
<li><strong>å­—å…¸ï¼ˆdictï¼‰</strong> ï¼šæ ¸å¿ƒä½œç”¨åœ¨äºæä¾› <strong>O(1) æ—¶é—´å¤æ‚åº¦çš„æˆå‘˜æŸ¥è¯¢</strong>ï¼ˆå¦‚ ZSCORE å‘½ä»¤ï¼Œç›´æ¥æ ¹æ® member è·å–å…¶ scoreï¼‰ã€‚</li>
</ul>
<p>å¦‚æœåªç”¨è·³è·ƒè¡¨ï¼ŒæŸ¥è¯¢æˆå‘˜åˆ†å€¼éœ€è¦ O(logN)ã€‚<br/>
å¦‚æœåªç”¨å­—å…¸ï¼Œæ— æ³•è¿›è¡Œé«˜æ•ˆçš„èŒƒå›´æ“ä½œã€‚</p>
<p>å› æ­¤ï¼Œè¿™ç§ <strong>â€œç©ºé—´æ¢æ—¶é—´â€</strong> çš„è®¾è®¡ï¼Œè®© Zset æ—¢èƒ½å¿«é€Ÿè¿›è¡Œå•ç‚¹æŸ¥è¯¢ï¼Œåˆèƒ½é«˜æ•ˆè¿›è¡ŒèŒƒå›´æ“ä½œï¼Œæ˜¯å·¥ç¨‹ä¸Šçš„ç»å…¸å–èˆã€‚</p>
<h3 data-id="heading-5">äºŒã€æ ¸å¿ƒæ•°æ®ç»“æ„å‰–æ</h3>
<h4 data-id="heading-6">1. <strong>è·³è·ƒè¡¨ï¼ˆSkip Listï¼‰è¯¦è§£</strong></h4>
<p>è·³è·ƒè¡¨æ˜¯ä¸€ç§å¤šå±‚çº§çš„<strong>æœ‰åºé“¾è¡¨</strong>ï¼Œæ˜¯å¹³è¡¡æ ‘çš„ä¸€ç§æ¦‚ç‡æ›¿ä»£æ–¹æ¡ˆï¼Œå®ç°æ›´ç®€å•ï¼Œåœ¨å¹¶å‘ç¯å¢ƒä¸‹ä¹Ÿæ›´æœ‰ä¼˜åŠ¿ã€‚</p>
<p><strong>ç»“æ„ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zskiplist</span> {
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zskiplistNode</span> *header, *tail; <span class="hljs-comment">// å¤´å°¾æŒ‡é’ˆ</span>
    <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> length;                <span class="hljs-comment">// èŠ‚ç‚¹æ€»æ•°</span>
    <span class="hljs-type">int</span> level;                           <span class="hljs-comment">// å½“å‰æœ€å¤§å±‚æ•°</span>
} zskiplist;

<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zskiplistNode</span> {
    sds ele;                             <span class="hljs-comment">// æˆå‘˜ï¼ˆSDSå­—ç¬¦ä¸²ï¼‰</span>
    <span class="hljs-type">double</span> score;                        <span class="hljs-comment">// åˆ†å€¼</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zskiplistNode</span> *backward;      <span class="hljs-comment">// åå‘æŒ‡é’ˆï¼ˆL0å±‚ï¼Œç”¨äºé€†åºï¼‰</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zskiplistLevel</span> {
        <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zskiplistNode</span> *forward;   <span class="hljs-comment">// è¯¥å±‚çš„å‰è¿›æŒ‡é’ˆ</span>
        <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> span;              <span class="hljs-comment">// è¯¥å±‚åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„è·¨åº¦ï¼ˆç”¨äºæ’åï¼‰</span>
    } level[];                           <span class="hljs-comment">// æŸ”æ€§æ•°ç»„ï¼Œè¡¨ç¤ºèŠ‚ç‚¹çš„å±‚çº§</span>
} zskiplistNode;
</code></pre>
<p><strong>å…³é”®ç‰¹æ€§ï¼š</strong></p>
<ul>
<li><strong>å¤šå±‚é“¾è¡¨</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹éšæœºä¸€ä¸ªå±‚é«˜ï¼ˆ1-32ï¼‰ã€‚<code>level</code> æ•°ç»„é•¿åº¦å³ä¸ºå±‚é«˜ã€‚</li>
<li><strong>æœ‰åºæ€§</strong>ï¼šèŠ‚ç‚¹é¦–å…ˆæŒ‰ <code>score</code> æ’åºï¼Œ<code>score</code> ç›¸åŒæ—¶ï¼ŒæŒ‰ <code>ele</code> çš„å­—å…¸åºæ’åºã€‚</li>
<li><strong>æŸ¥æ‰¾è·¯å¾„</strong>ï¼šä»æœ€é«˜å±‚ï¼ˆheaderçš„æœ€é«˜å±‚ï¼‰å¼€å§‹ï¼Œå‘å³éå†æ‰¾åˆ°æœ€åä¸€ä¸ª <code>score</code> å°äºç›®æ ‡ï¼ˆæˆ– <code>score</code> ç›¸ç­‰ä½† <code>ele</code> å°äºç›®æ ‡ï¼‰çš„èŠ‚ç‚¹ï¼Œç„¶åä¸‹é™ä¸€å±‚ç»§ç»­ã€‚å¦‚æ­¤åå¤ï¼Œç›´åˆ°ç¬¬0å±‚ã€‚è¿™ä¸ªè¿‡ç¨‹æ—¶é—´å¤æ‚åº¦å¹³å‡ O(logN)ã€‚</li>
<li><strong>è·¨åº¦ï¼ˆspanï¼‰</strong> ï¼š<code>level[i].span</code> è®°å½•äº†ä»å½“å‰èŠ‚ç‚¹åˆ° <code>level[i].forward</code> èŠ‚ç‚¹ä¹‹é—´ï¼Œè·¨è¶Šäº†ç¬¬0å±‚çš„å¤šå°‘ä¸ªèŠ‚ç‚¹ã€‚<strong>è¿™æ˜¯ ZRANK å‘½ä»¤ï¼ˆè·å–æ’åï¼‰èƒ½å¤Ÿ O(logN) å®Œæˆçš„å…³é”®</strong>ã€‚è®¡ç®—æ’åæ—¶ï¼Œåªéœ€å°†æœç´¢è·¯å¾„ä¸Šæ‰€æœ‰ç¬¦åˆæ–¹å‘çš„è·¨åº¦ç´¯åŠ å³å¯ã€‚</li>
<li><strong>åå‘æŒ‡é’ˆï¼ˆbackwardï¼‰</strong> ï¼šç”¨äºä»å°¾åˆ°å¤´éå†ï¼Œæ”¯æŒ <code>ZREVRANGE</code> ç­‰é€†åºæ“ä½œã€‚</li>
</ul>
<h4 data-id="heading-7">2. <strong>å­—å…¸ï¼ˆDictï¼‰</strong></h4>
<p>å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ Redis å“ˆå¸Œè¡¨ï¼Œå…¶ä½œç”¨æ˜¯ï¼š</p>
<ul>
<li><strong>é”®ï¼ˆKeyï¼‰</strong> ï¼šå­˜å‚¨æˆå‘˜ï¼ˆmemberï¼‰ã€‚</li>
<li><strong>å€¼ï¼ˆValueï¼‰</strong> ï¼šå­˜å‚¨è¯¥æˆå‘˜å¯¹åº”çš„åˆ†å€¼ï¼ˆscoreï¼Œä¸€ä¸ª double ç±»å‹ï¼‰ã€‚</li>
<li>è¿™ä¸ªå­—å…¸ç¡®ä¿äº†å¯¹ä»»æ„æˆå‘˜çš„ <strong>O(1) æ—¶é—´å¤æ‚åº¦</strong> çš„è®¿é—®ã€‚</li>
</ul>
<h3 data-id="heading-8">ä¸‰ã€æ“ä½œæµç¨‹ç¤ºä¾‹</h3>
<p>å‡è®¾æˆ‘ä»¬æ‰§è¡Œ <code>ZADD myzset 10 â€œaliceâ€ 20 â€œbobâ€ 30 â€œcharlieâ€</code>ã€‚</p>
<p>åœ¨ skiplist ç¼–ç ä¸‹ï¼Œå†…å­˜ç»“æ„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">            zset
        <span class="hljs-operator">/</span>          \
      dict         zskiplist (header)
       <span class="hljs-operator">|</span>                (level<span class="hljs-operator">=</span><span class="hljs-number">5</span>)
  "alice"  <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-number">10</span>        <span class="hljs-operator">|</span>
  "bob"    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-number">20</span>        <span class="hljs-operator">|</span>
  "charlie"<span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-number">30</span>        V
                    <span class="hljs-operator">+</span><span class="hljs-comment">-------+-------+-------+</span>
                    <span class="hljs-operator">|</span> Span  <span class="hljs-operator">|</span> ...   <span class="hljs-operator">|</span> Span  <span class="hljs-operator">|</span>  (é«˜å±‚ï¼Œç¨€ç–æŒ‡é’ˆï¼Œå¿«é€Ÿè·³è·ƒ)
                    <span class="hljs-operator">+</span><span class="hljs-comment">-------+-------+-------+</span>
                         <span class="hljs-operator">|</span>          <span class="hljs-operator">|</span>
                         V          V
                    <span class="hljs-operator">+</span><span class="hljs-comment">-------+-------+-------+</span>
                    <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span> ele   <span class="hljs-operator">|</span> level <span class="hljs-operator">|</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> Node(<span class="hljs-number">10</span>, "alice")
                    <span class="hljs-operator">|</span>   <span class="hljs-number">10</span>  <span class="hljs-operator">|</span>"alice"<span class="hljs-operator">|</span>   <span class="hljs-number">2</span>   <span class="hljs-operator">|</span>
                    <span class="hljs-operator">+</span><span class="hljs-comment">-------+-------+-------+</span>
                         <span class="hljs-operator">|</span>               <span class="hljs-operator">|</span>
                         V (L0)          V (L1)
                    <span class="hljs-operator">+</span><span class="hljs-comment">-------+-------+-------+-------+-------+-------+</span>
                    <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span> ele   <span class="hljs-operator">|</span> level <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span> ele   <span class="hljs-operator">|</span> level <span class="hljs-operator">|</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> Node(<span class="hljs-number">20</span>, "bob")
                    <span class="hljs-operator">|</span>   <span class="hljs-number">20</span>  <span class="hljs-operator">|</span>"bob"  <span class="hljs-operator">|</span>   <span class="hljs-number">3</span>   <span class="hljs-operator">|</span>   <span class="hljs-number">20</span>  <span class="hljs-operator">|</span>"bob"  <span class="hljs-operator">|</span>   <span class="hljs-number">3</span>   <span class="hljs-operator">|</span>
                    <span class="hljs-operator">+</span><span class="hljs-comment">-------+-------+-------+-------+-------+-------+</span>
                         <span class="hljs-operator">|</span>               <span class="hljs-operator">|</span>
                         V (L0)          V (L1)
                    <span class="hljs-operator">+</span><span class="hljs-comment">-------+-------+-------+-------+-------+-------+</span>
                    <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span> ele   <span class="hljs-operator">|</span> level <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span> ele   <span class="hljs-operator">|</span> level <span class="hljs-operator">|</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> Node(<span class="hljs-number">30</span>, "charlie")
                    <span class="hljs-operator">|</span>   <span class="hljs-number">30</span>  <span class="hljs-operator">|</span>"char" <span class="hljs-operator">|</span>   <span class="hljs-number">1</span>   <span class="hljs-operator">|</span>   <span class="hljs-number">30</span>  <span class="hljs-operator">|</span>"char" <span class="hljs-operator">|</span>   <span class="hljs-number">1</span>   <span class="hljs-operator">|</span>
                    <span class="hljs-operator">+</span><span class="hljs-comment">-------+-------+-------+-------+-------+-------+</span>
                         <span class="hljs-operator">|</span>
                         V (L0)
                         <span class="hljs-keyword">NULL</span>
</code></pre>
<p><strong>å…³é”®æ“ä½œå¦‚ä½•å·¥ä½œï¼š</strong></p>
<ol>
<li><strong>ZSCORE myzset "bob"</strong> ï¼šç›´æ¥åœ¨ <code>dict</code> ä¸­æŸ¥æ‰¾é”® "bob"ï¼Œç«‹å³è¿”å›å…¶å€¼ 20ã€‚<strong>O(1)</strong> ã€‚</li>
<li><strong>ZRANGE myzset 1 2</strong>ï¼šä» <code>zskiplist</code> çš„ header å‡ºå‘ï¼Œåˆ©ç”¨é«˜å±‚æŒ‡é’ˆå¿«é€Ÿå®šä½åˆ°èµ·å§‹èŠ‚ç‚¹ï¼ˆ"bob"ï¼‰ï¼Œç„¶åæ²¿ä½å±‚æŒ‡é’ˆéå†è¾“å‡ºã€‚<strong>O(logN + M)</strong> ï¼ŒMä¸ºè¿”å›å…ƒç´ ä¸ªæ•°ã€‚</li>
<li><strong>ZRANK myzset "charlie"</strong> ï¼šä» <code>zskiplist</code> çš„ header å‡ºå‘ï¼Œæœç´¢ "charlie" çš„è·¯å¾„ï¼ŒåŒæ—¶ç´¯åŠ æ²¿é€”çš„ <code>span</code> å€¼ã€‚æœ€ç»ˆå¾—åˆ°çš„ç´¯åŠ å’Œå°±æ˜¯å…¶æ’åï¼ˆä»0å¼€å§‹ï¼‰ã€‚<strong>O(logN)</strong> ã€‚</li>
<li><strong>ZADD myzset 15 "david"</strong> ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>å…ˆåœ¨ <code>dict</code> ä¸­æ£€æŸ¥ "david" æ˜¯å¦å­˜åœ¨ï¼ˆä¿è¯å”¯ä¸€æ€§ï¼‰ã€‚</li>
<li>ç„¶ååœ¨ <code>zskiplist</code> ä¸­æ‰§è¡Œæ ‡å‡†çš„è·³è¡¨æ’å…¥æ“ä½œï¼ˆO(logN)ï¼‰ï¼Œæ‰¾åˆ°æ’å…¥ä½ç½®ã€‚</li>
<li>æœ€åï¼Œåœ¨ <code>dict</code> ä¸­æ’å…¥ "david" -&gt; 15 çš„é”®å€¼å¯¹ã€‚</li>
<li>æ•´ä¸ªæ“ä½œ <strong>O(logN)</strong> ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-9">å››ã€ZSET ZRANGE æ“ä½œåºåˆ—å›¾</h3>
<p>ä¸‹é¢è¿™ä¸ªåºåˆ—å›¾å±•ç¤ºäº†å½“æ‰§è¡Œ <code>ZRANGE myzset 1 3</code> å‘½ä»¤æ—¶ï¼ŒRedis å†…éƒ¨ä¸åŒç»„ä»¶ä¹‹é—´çš„äº¤äº’æµç¨‹ï¼š</p>
<h3 data-id="heading-10"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ce883892aef49fa92d35dea7f1f334a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5YGH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770465616&amp;x-signature=4mMHoT32v9C6ujZcFLRPr3KMlTo%3D" alt="" loading="lazy"/></h3>
<h3 data-id="heading-11">äº”ã€æ€»ç»“ä¸è¦ç‚¹</h3>
<ol>
<li><strong>åŒç¼–ç ç­–ç•¥</strong>ï¼šZset æ˜¯æ™ºèƒ½çš„ï¼Œå°æ•°æ®ç”¨ç´§å‡‘çš„ listpack çœå†…å­˜ï¼Œå¤§æ•°æ®ç”¨åŠŸèƒ½å¼ºå¤§çš„â€œè·³è¡¨+å“ˆå¸Œâ€ç»„åˆä¿æ€§èƒ½ã€‚</li>
<li><strong>æ ¸å¿ƒå¤åˆç»“æ„</strong>ï¼š<code>skiplist + dict</code> æ˜¯ Zset çš„çµé­‚ã€‚<strong>skiplist è´Ÿè´£æ’åºå’ŒèŒƒå›´æ“ä½œ</strong>ï¼Œ<strong>dict è´Ÿè´£å¿«é€Ÿå•ç‚¹è®¿é—®</strong>ã€‚äºŒè€…é€šè¿‡å…±äº«æˆå‘˜å’Œåˆ†å€¼çš„æŒ‡é’ˆæ¥ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œæ²¡æœ‰å†—ä½™å­˜å‚¨ã€‚</li>
<li><strong>è·³è·ƒè¡¨çš„è§’è‰²</strong>ï¼šå®ƒä¸ä»…æ˜¯ä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼Œå…¶<strong>è·¨åº¦ï¼ˆspanï¼‰</strong> å±æ€§æ˜¯å®ç° O(logN) å¤æ‚åº¦çš„æ’åæŸ¥è¯¢çš„å…³é”®ã€‚</li>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>æ·»åŠ /åˆ é™¤/æŒ‰åˆ†å€¼æŸ¥è¯¢ï¼šå¹³å‡ <strong>O(logN)</strong> ã€‚</li>
<li>æŒ‰æˆå‘˜æŸ¥åˆ†å€¼ï¼š<strong>O(1)</strong> ã€‚</li>
<li>èŒƒå›´æŸ¥è¯¢ï¼ˆå¦‚ ZRANGEï¼‰ï¼š<strong>O(logN + M)</strong> ã€‚</li>
<li>è·å–æ’åï¼ˆZRANKï¼‰ï¼š<strong>O(logN)</strong> ã€‚</li>
</ul>
</li>
</ul>
<ol start="5">
<li><strong>é€‰æ‹©åŸå› </strong>ï¼šç›¸æ¯”äºçº¢é»‘æ ‘ç­‰ä¸¥æ ¼å¹³è¡¡æ ‘ï¼Œè·³è·ƒè¡¨å®ç°ç®€å•ï¼ŒåŒºé—´æŸ¥è¯¢æ›´ç›´è§‚ï¼Œä¸”åœ¨å¹¶å‘ç¯å¢ƒä¸‹æ›´å®¹æ˜“å®ç°æ— é”ä¼˜åŒ–ã€‚</li>
</ol>
<h3 data-id="heading-12">é¢è¯•å›ç­”</h3>
<p>å®ƒçš„åº•å±‚å®ç°å…¶å®é‡‡ç”¨äº†ä¸¤ç§æ•°æ®ç»“æ„ç›¸ç»“åˆçš„ <strong>â€˜æ··åˆâ€™ç­–ç•¥</strong>ï¼Œç›®çš„æ˜¯åœ¨å†…å­˜ä½¿ç”¨å’Œæ€§èƒ½ä¹‹é—´å–å¾—ä¸€ä¸ªå¹³è¡¡ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒåŒæ—¶ä½¿ç”¨äº†ï¼š</p>
<ol>
<li><strong>è·³è·ƒè¡¨ï¼ˆSkip Listï¼‰</strong></li>
<li><strong>å­—å…¸ï¼ˆæˆ–å“ˆå¸Œè¡¨ï¼ŒHash Tableï¼‰</strong></li>
</ol>
<p>è¿™ä¸¤ç§ç»“æ„ä¼š<strong>å…±äº«</strong>é›†åˆä¸­å…ƒç´ ï¼ˆæˆå‘˜ï¼‰å’Œåˆ†æ•°ï¼ˆåˆ†å€¼ï¼‰çš„æ•°æ®ï¼Œä½†é€šè¿‡æŒ‡é’ˆå¼•ç”¨ï¼Œæ‰€ä»¥ä¸ä¼šé€ æˆåŒå€çš„å†…å­˜å¼€é”€ã€‚</p>
<hr/>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ç§ç»“æ„å‘¢ï¼Ÿ</strong><br/>
è¿™ä¸»è¦æ˜¯ä¸ºäº†åº”å¯¹ Zset ä¸åŒçš„æ“ä½œåœºæ™¯ï¼Œè®©å®ƒä»¬éƒ½èƒ½éå¸¸é«˜æ•ˆï¼š</p>
<ul>
<li><strong>è·³è·ƒè¡¨</strong> çš„æ ¸å¿ƒä½œç”¨æ˜¯<strong>ç»´æŒå…ƒç´ çš„æœ‰åºæ€§</strong>ã€‚å®ƒçš„ç»“æ„åƒå¤šå±‚é“¾è¡¨ï¼Œä¸Šå±‚æ˜¯â€œå¿«é€Ÿé€šé“â€ï¼Œä¸‹å±‚æ˜¯â€œç²¾ç¡®é€šé“â€ã€‚è¿™ä½¿å¾—<strong>èŒƒå›´å‹æ“ä½œï¼Œ</strong> ä»¥åŠæ’å…¥ã€åˆ é™¤çš„å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½èƒ½åœ¨ <strong>O(log N)</strong> çº§åˆ«ï¼Œæ•ˆç‡å¾ˆé«˜ã€‚</li>
<li><strong>å­—å…¸</strong> çš„æ ¸å¿ƒä½œç”¨æ˜¯æä¾› <strong>â€˜æˆå‘˜ -&gt; åˆ†æ•°â€™ çš„å¿«é€Ÿæ˜ å°„</strong>ã€‚å½“æˆ‘ä»¬æ‰§è¡Œåƒå»è·å–æŸä¸ªæˆå‘˜çš„åˆ†æ•°æˆ–è€…æ›´æ–°ä¸€ä¸ªå·²æœ‰æˆå‘˜è¿™ç±»æ“ä½œæ—¶ï¼Œå¦‚æœèƒ½ç›´æ¥é€šè¿‡æˆå‘˜åï¼ˆkeyï¼‰åœ¨å“ˆå¸Œè¡¨é‡Œ <strong>O(1)</strong> æ—¶é—´å¤æ‚åº¦æŸ¥åˆ°å®ƒçš„åˆ†æ•°ï¼Œé‚£å°±å¤ªå¿«äº†ã€‚å¦‚æœåªç”¨è·³è·ƒè¡¨ï¼Œè¿™ä¸ªæŸ¥è¯¢å°±éœ€è¦ O(log N)ã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œç®€å•æ¥è®²ï¼Œå¯ä»¥æŠŠ Zset æƒ³è±¡æˆ <strong>ä¸€ä¸ªç”¨å“ˆå¸Œè¡¨åšâ€˜ç´¢å¼•â€™ï¼Œç”¨è·³è·ƒè¡¨åšâ€˜æ’åºæ¸…å•â€™çš„ç»„åˆä½“</strong>ã€‚å“ˆå¸Œè¡¨ä¿è¯äº†ç‚¹æŸ¥çš„æè‡´é€Ÿåº¦ï¼Œè·³è·ƒè¡¨ä¿è¯äº†èŒƒå›´æ“ä½œçš„æ•ˆç‡ã€‚</p>
<p>ä¸è¿‡ï¼Œåœ¨ Redis çš„åç»­ç‰ˆæœ¬ä¸­ï¼ˆæˆ‘è®°å¾—æ˜¯ 7.0 ä¹‹åï¼‰ï¼Œä¸ºäº†è¿›ä¸€æ­¥èŠ‚çœå†…å­˜ï¼Œè¿˜æœ‰å¦ä¸€ç§ç¼–ç æ–¹å¼ï¼Œå« <code>Ziplist</code>ï¼ˆç´§å‡‘åˆ—è¡¨ï¼‰ã€‚</p>
<ul>
<li>å½“ Zset åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶æ—¶ï¼š1. å…ƒç´ æ•°é‡è¾ƒå°‘ï¼ˆé»˜è®¤ â‰¤ 128 ä¸ªï¼‰ï¼›2. æ¯ä¸ªæˆå‘˜å­—ç¬¦ä¸²é•¿åº¦è¾ƒçŸ­ï¼ˆé»˜è®¤ â‰¤ 64 å­—èŠ‚ï¼‰ï¼ŒRedis ä¼šä½¿ç”¨ä¸€å—<strong>è¿ç»­å†…å­˜</strong>çš„ <code>ziplist</code> æ¥å­˜å‚¨ã€‚åœ¨è¿™ä¸ªé“¾è¡¨é‡Œï¼Œæˆå‘˜å’Œåˆ†æ•°æ˜¯æŒ¨ä¸ªäº¤æ›¿å­˜æ”¾çš„ï¼Œå®ƒå› ä¸ºå°‘äº†è·³è·ƒè¡¨å’Œå“ˆå¸Œè¡¨çš„ç»“æ„å¼€é”€ï¼Œæ‰€ä»¥<strong>éå¸¸èŠ‚çœå†…å­˜</strong>ã€‚</li>
<li>ä¸€æ—¦ä¸æ»¡è¶³ä¸Šè¿°ä»»ä¸€æ¡ä»¶ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨<strong>è½¬æ¢</strong>æˆæ ‡å‡†çš„â€œè·³è·ƒè¡¨+å­—å…¸â€ç»“æ„ã€‚è¿™ä¸ªè½¬æ¢å¯¹ä½¿ç”¨è€…æ˜¯æ— æ„Ÿçš„ã€‚</li>
</ul>
<hr/>
<p><strong>æ€»ç»“ä¸€ä¸‹</strong>ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼š<br/>
Zset çš„åº•å±‚ä¼šæ ¹æ®æ•°æ®è§„æ¨¡çµæ´»é€‰æ‹©ï¼š</p>
<ul>
<li>å¯¹äº<strong>å°å‹é›†åˆ</strong>ï¼Œä½¿ç”¨å†…å­˜ç´§å‡‘çš„ <code>ziplist</code>ã€‚</li>
<li>å¯¹äº<strong>é€šç”¨é›†åˆ</strong>ï¼Œä½¿ç”¨ <strong>â€˜è·³è·ƒè¡¨ + å­—å…¸â€™</strong> çš„åŒç»“æ„ï¼ŒåŒæ—¶ä¿è¯é«˜æ•ˆçš„<strong>èŒƒå›´æ“ä½œ</strong>å’Œ<strong>å•ç‚¹æŸ¥è¯¢</strong>ã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªåœ¨å·¥ç¨‹ä¸Šéå¸¸ç»å…¸çš„ï¼Œ <strong>â€˜ç”¨ç©ºé—´æ¢æ—¶é—´â€™å’Œâ€˜ç©ºé—´æ—¶é—´å¹³è¡¡â€™</strong> çš„è®¾è®¡æ€è·¯ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Model Context Protocol (MCP) æ¶æ„è¯¦è§£]]></title>    <link>https://juejin.cn/post/7601044684774277158</link>    <guid>https://juejin.cn/post/7601044684774277158</guid>    <pubDate>2026-01-31T10:05:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601044684774277158" data-draft-id="7601044684774244390" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Model Context Protocol (MCP) æ¶æ„è¯¦è§£"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-31T10:05:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/4257747754552599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Model Context Protocol (MCP) æ¶æ„è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4257747754552599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T10:05:09.000Z" title="Sat Jan 31 2026 10:05:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Model Context Protocol (MCP) æ¶æ„è¯¦è§£</h2>
<h3 data-id="heading-1">ç®€ä»‹</h3>
<p>Model Context Protocol (MCP) æ˜¯ä¸€ä¸ªå¼€æ”¾åè®®ï¼Œç”¨äºè¿æ¥ AI åº”ç”¨ç¨‹åºä¸å¤–éƒ¨æ•°æ®æºå’Œå·¥å…·ã€‚é€šè¿‡ MCPï¼ŒAI åº”ç”¨å¯ä»¥å®‰å…¨åœ°è®¿é—®å„ç§ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ‰§è¡Œæ“ä½œï¼Œå¹¶ä¸å¤–éƒ¨ç³»ç»Ÿäº¤äº’ã€‚</p>
<h3 data-id="heading-2">é¡¹ç›®ç»„æˆ</h3>
<p>MCP åŒ…å«ä»¥ä¸‹é¡¹ç›®ç»„ä»¶ï¼š</p>

























<table><thead><tr><th>ç»„ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>MCP è§„èŒƒ</strong></td><td>å®šä¹‰ MCP çš„å®ç°è§„èŒƒï¼Œæ¦‚è¿°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„å®ç°è¦æ±‚</td></tr><tr><td><strong>MCP SDK</strong></td><td>ä¸ºä¸åŒç¼–ç¨‹è¯­è¨€æä¾›çš„ MCP å®ç° SDK</td></tr><tr><td><strong>MCP å¼€å‘å·¥å…·</strong></td><td>ç”¨äºå¼€å‘ MCP æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„å·¥å…·ï¼ŒåŒ…æ‹¬ MCP Inspector</td></tr><tr><td><strong>MCP å‚è€ƒæœåŠ¡å™¨å®ç°</strong></td><td>MCP æœåŠ¡å™¨çš„å‚è€ƒå®ç°</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-3">æ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-4">å‚ä¸è€…</h4>
<p>MCP é‡‡ç”¨<strong>å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„</strong>ï¼Œå…¶ä¸­ MCP ä¸»æœºï¼ˆå¦‚ Claude Code æˆ– Claude Desktop ç­‰ AI åº”ç”¨ï¼‰ä¸ä¸€ä¸ªæˆ–å¤šä¸ª MCP æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚MCP ä¸»æœºé€šè¿‡ä¸ºæ¯ä¸ª MCP æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ª MCP å®¢æˆ·ç«¯æ¥å®ç°è¿™ä¸€ç‚¹ã€‚æ¯ä¸ª MCP å®¢æˆ·ç«¯ä¸å…¶å¯¹åº”çš„ MCP æœåŠ¡å™¨ç»´æŒä¸“ç”¨è¿æ¥ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-function">MCP <span class="hljs-title">Host</span> <span class="hljs-params">(AI åº”ç”¨)</span> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â”‚
â”‚ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-params">(Claude Desktop / VSCode)</span> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” Â  Â  Â  Â   â”‚
â”‚  â”‚  MCP <span class="hljs-built_in">Client</span>  â”‚  â”‚  MCP <span class="hljs-built_in">Client</span>  â”‚  â”‚  MCP <span class="hljs-built_in">Client</span>  â”‚  ... Â  Â   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ Â  Â  Â  Â   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â   â”‚ Â  Â  Â  Â  Â  Â  Â  Â   â”‚ Â  Â  Â  Â  Â  Â  Â  Â   â”‚
 Â  Â  Â  Â   â–¼ Â  Â  Â  Â  Â  Â  Â  Â   â–¼ Â  Â  Â  Â  Â  Â  Â  Â   â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  MCP <span class="hljs-built_in">Server</span>  â”‚  â”‚  MCP <span class="hljs-built_in">Server</span>  â”‚  â”‚  MCP <span class="hljs-built_in">Server</span>  â”‚
  â”‚  <span class="hljs-params">(Filesystem)</span>â”‚  â”‚ Â  <span class="hljs-params">(Sentry)</span> Â  â”‚  â”‚ Â  <span class="hljs-params">(Database)</span> â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<h5 data-id="heading-5">MCP æ¶æ„ä¸­çš„å…³é”®è§’è‰²</h5>





















<table><thead><tr><th>è§’è‰²</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>MCP ä¸»æœº (Host)</strong></td><td>åè°ƒå’Œç®¡ç†çš„ AI åº”ç”¨ç¨‹åºï¼Œç®¡ç†ä¸€ä¸ªæˆ–å¤šä¸ª MCP å®¢æˆ·ç«¯</td></tr><tr><td><strong>MCP å®¢æˆ·ç«¯ (Client)</strong></td><td>ç»´æŠ¤ä¸ MCP æœåŠ¡å™¨è¿æ¥çš„ç»„ä»¶ï¼Œä» MCP æœåŠ¡å™¨è·å–ä¸Šä¸‹æ–‡ä¾›ä¸»æœºä½¿ç”¨</td></tr><tr><td><strong>MCP æœåŠ¡å™¨ (Server)</strong></td><td>å‘ MCP å®¢æˆ·ç«¯æä¾›ä¸Šä¸‹æ–‡çš„ç¨‹åº</td></tr></tbody></table>
<h5 data-id="heading-6">æœåŠ¡å™¨ç±»å‹</h5>
<p>MCP æœåŠ¡å™¨å¯ä»¥<strong>æœ¬åœ°è¿è¡Œ</strong>æˆ–<strong>è¿œç¨‹è¿è¡Œ</strong>ï¼š</p>
<ul>
<li>
<p><strong>æœ¬åœ° MCP æœåŠ¡å™¨</strong>ï¼šä½¿ç”¨ STDIO ä¼ è¾“å±‚ï¼Œé€šå¸¸åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œï¼ŒæœåŠ¡å•ä¸ª MCP å®¢æˆ·ç«¯</p>
<ul>
<li>ç¤ºä¾‹ï¼šClaude Desktop å¯åŠ¨çš„æ–‡ä»¶ç³»ç»ŸæœåŠ¡å™¨</li>
</ul>
</li>
<li>
<p><strong>è¿œç¨‹ MCP æœåŠ¡å™¨</strong>ï¼šä½¿ç”¨ Streamable HTTP ä¼ è¾“å±‚ï¼Œé€šå¸¸è¿è¡Œåœ¨è¿œç¨‹å¹³å°ä¸Šï¼ŒæœåŠ¡å¤šä¸ª MCP å®¢æˆ·ç«¯</p>
<ul>
<li>ç¤ºä¾‹ï¼šè¿è¡Œåœ¨ Sentry å¹³å°ä¸Šçš„å®˜æ–¹ Sentry MCP æœåŠ¡å™¨</li>
</ul>
</li>
</ul>
<h5 data-id="heading-7">å®ä¾‹è¯´æ˜</h5>
<p>ä»¥ Visual Studio Code ä¸ºä¾‹ï¼š</p>
<ol start="0">
<li>VSCode ä½œä¸º MCP ä¸»æœº</li>
<li>å½“ VSCode è¿æ¥åˆ° Sentry MCP æœåŠ¡å™¨æ—¶ï¼ŒVSCode è¿è¡Œæ—¶åˆ›å»ºä¸€ä¸ª MCP å®¢æˆ·ç«¯å¯¹è±¡æ¥ç»´æŠ¤è¿æ¥</li>
<li>å½“ VSCode å†è¿æ¥åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»ŸæœåŠ¡å™¨æ—¶ï¼Œåˆ›å»ºå¦ä¸€ä¸ª MCP å®¢æˆ·ç«¯å¯¹è±¡æ¥ç»´æŠ¤æ­¤è¿æ¥</li>
</ol>
<hr/>
<h3 data-id="heading-8">åè®®å±‚çº§</h3>
<p>MCP ç”±ä¸¤ä¸ªå±‚çº§ç»„æˆï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Transport Layer (ä¼ è¾“å±‚) Â  Â  Â  Â  Â  Â  Â  Â  Â  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Â  Stdio Transport Â   â”‚  â”‚  Streamable HTTP Transport Â  â”‚ â”‚
â”‚  â”‚  (æ ‡å‡†è¾“å…¥/è¾“å‡ºæµ) Â  Â  â”‚  â”‚  (HTTP POST + SSE) Â  Â  Â  Â  Â  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   Data Layer (æ•°æ®å±‚) Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   â”‚
â”‚ Â  Â  Â  Â  Â  Â   åŸºäº JSON-RPC <span class="hljs-number">2.0</span> çš„äº¤æ¢åè®® Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Lifecycle  â”‚  Server  â”‚  Client  â”‚  Utility  â”‚  Primitives â”‚
â”‚  Management â”‚ Features â”‚ Features â”‚ Features  â”‚ Â  Â  Â  Â  Â  Â  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-9">æ•°æ®å±‚ (Data Layer)</h4>
<p>æ•°æ®å±‚å®ç°åŸºäº <strong>JSON-RPC 2.0</strong> çš„äº¤æ¢åè®®ï¼Œå®šä¹‰æ¶ˆæ¯ç»“æ„å’Œè¯­ä¹‰ï¼š</p>

























<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong></td><td>å¤„ç†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥åˆå§‹åŒ–ã€èƒ½åŠ›åå•†å’Œè¿æ¥ç»ˆæ­¢</td></tr><tr><td><strong>æœåŠ¡å™¨åŠŸèƒ½</strong></td><td>æœåŠ¡å™¨æä¾›çš„æ ¸å¿ƒåŠŸèƒ½ï¼šå·¥å…·ã€èµ„æºã€æç¤ºæ¨¡æ¿</td></tr><tr><td><strong>å®¢æˆ·ç«¯åŠŸèƒ½</strong></td><td>å®¢æˆ·ç«¯æä¾›çš„åŠŸèƒ½ï¼šLLM é‡‡æ ·ã€ç”¨æˆ·è¾“å…¥è¯·æ±‚ã€æ—¥å¿—è®°å½•</td></tr><tr><td><strong>å®ç”¨åŠŸèƒ½</strong></td><td>é€šçŸ¥ï¼ˆå®æ—¶æ›´æ–°ï¼‰å’Œè¿›åº¦è·Ÿè¸ªï¼ˆé•¿æ—¶é—´è¿è¡Œæ“ä½œï¼‰</td></tr></tbody></table>
<h4 data-id="heading-10">ä¼ è¾“å±‚ (Transport Layer)</h4>
<p>ä¼ è¾“å±‚ç®¡ç†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡é€šé“å’Œèº«ä»½éªŒè¯ï¼š</p>

















<table><thead><tr><th>ä¼ è¾“æœºåˆ¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Stdio ä¼ è¾“</strong></td><td>ä½¿ç”¨æ ‡å‡†è¾“å…¥/è¾“å‡ºæµè¿›è¡Œæœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ï¼Œæ— ç½‘ç»œå¼€é”€ï¼Œæ€§èƒ½æœ€ä¼˜</td></tr><tr><td><strong>Streamable HTTP ä¼ è¾“</strong></td><td>ä½¿ç”¨ HTTP POST å‘é€æ¶ˆæ¯ï¼Œæ”¯æŒ Server-Sent Events æµå¼ä¼ è¾“ï¼Œæ”¯æŒè¿œç¨‹æœåŠ¡å™¨é€šä¿¡ï¼Œæ”¯æŒæ ‡å‡† HTTP èº«ä»½éªŒè¯</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-11">æ•°æ®å±‚åè®®</h3>
<h4 data-id="heading-12">åŸè¯­ (Primitives)</h4>
<p>MCP åŸè¯­æ˜¯ MCP ä¸­æœ€é‡è¦çš„æ¦‚å¿µï¼Œå®šä¹‰äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥ç›¸äº’æä¾›çš„å†…å®¹ã€‚</p>
<h5 data-id="heading-13">æœåŠ¡å™¨åŸè¯­</h5>
<p>æœåŠ¡å™¨å¯ä»¥æš´éœ²çš„ä¸‰ç§æ ¸å¿ƒåŸè¯­ï¼š</p>

























<table><thead><tr><th>åŸè¯­</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>å·¥å…· (Tools)</strong></td><td>AI åº”ç”¨å¯è°ƒç”¨çš„å¯æ‰§è¡Œå‡½æ•°</td><td>æ–‡ä»¶æ“ä½œã€API è°ƒç”¨ã€æ•°æ®åº“æŸ¥è¯¢</td></tr><tr><td><strong>èµ„æº (Resources)</strong></td><td>æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯çš„æ•°æ®æº</td><td>æ–‡ä»¶å†…å®¹ã€æ•°æ®åº“è®°å½•ã€API å“åº”</td></tr><tr><td><strong>æç¤º (Prompts)</strong></td><td>æ„å»ºè¯­è¨€æ¨¡å‹äº¤äº’çš„å¯é‡ç”¨æ¨¡æ¿</td><td>ç³»ç»Ÿæç¤ºã€å°‘æ ·æœ¬ç¤ºä¾‹</td></tr></tbody></table>
<p>æ¯ä¸ªåŸè¯­ç±»å‹éƒ½æœ‰ç›¸å…³æ–¹æ³•ç”¨äºå‘ç°ï¼ˆ<code>*/list</code>ï¼‰ã€æ£€ç´¢ï¼ˆ<code>*/get</code>ï¼‰ï¼Œæœ‰äº›æƒ…å†µä¸‹è¿˜åŒ…æ‹¬æ‰§è¡Œï¼ˆ<code>tools/call</code>ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šæ•°æ®åº“ MCP æœåŠ¡å™¨</strong></p>
<p>ä¸€ä¸ªæä¾›æ•°æ®åº“ä¸Šä¸‹æ–‡çš„ MCP æœåŠ¡å™¨å¯ä»¥æš´éœ²ï¼š</p>
<ul>
<li><strong>å·¥å…·</strong>ï¼šæŸ¥è¯¢æ•°æ®åº“</li>
<li><strong>èµ„æº</strong>ï¼šæ•°æ®åº“æ¶æ„</li>
<li><strong>æç¤º</strong>ï¼šä¸å·¥å…·äº¤äº’çš„å°‘æ ·æœ¬ç¤ºä¾‹</li>
</ul>
<h5 data-id="heading-14">å®¢æˆ·ç«¯åŸè¯­</h5>
<p>å®¢æˆ·ç«¯å¯ä»¥æš´éœ²çš„åŸè¯­ï¼Œå…è®¸ MCP æœåŠ¡å™¨ä½œè€…æ„å»ºæ›´ä¸°å¯Œçš„äº¤äº’ï¼š</p>

























<table><thead><tr><th>åŸè¯­</th><th>è¯´æ˜</th><th>æ–¹æ³•</th></tr></thead><tbody><tr><td><strong>é‡‡æ · (Sampling)</strong></td><td>æœåŠ¡å™¨è¯·æ±‚å®¢æˆ·ç«¯ AI åº”ç”¨æä¾›è¯­è¨€æ¨¡å‹è¡¥å…¨</td><td><code>sampling/complete</code></td></tr><tr><td><strong>å¼•å‡º (Elicitation)</strong></td><td>æœåŠ¡å™¨è¯·æ±‚ç”¨æˆ·æä¾›é¢å¤–ä¿¡æ¯æˆ–ç¡®è®¤æ“ä½œ</td><td><code>elicitation/request</code></td></tr><tr><td><strong>æ—¥å¿— (Logging)</strong></td><td>æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€æ—¥å¿—æ¶ˆæ¯ç”¨äºè°ƒè¯•å’Œç›‘æ§</td><td>æ—¥å¿—æ¶ˆæ¯</td></tr></tbody></table>
<h5 data-id="heading-15">å®ç”¨åŸè¯­</h5>
<p>è·¨è¶ŠæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„å®ç”¨åŸè¯­ï¼š</p>













<table><thead><tr><th>åŸè¯­</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ä»»åŠ¡ (Tasks)</strong></td><td>å®éªŒæ€§åŠŸèƒ½ï¼šæŒä¹…æ‰§è¡ŒåŒ…è£…å™¨ï¼Œæ”¯æŒå»¶è¿Ÿç»“æœæ£€ç´¢å’ŒçŠ¶æ€è·Ÿè¸ª</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-16">é€šçŸ¥ (Notifications)</h4>
<p>åè®®æ”¯æŒ<strong>å®æ—¶é€šçŸ¥</strong>ï¼Œå®ç°æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„åŠ¨æ€æ›´æ–°ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>å½“æœåŠ¡å™¨çš„å¯ç”¨å·¥å…·å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆæ–°åŠŸèƒ½å¯ç”¨æˆ–ç°æœ‰å·¥å…·è¢«ä¿®æ”¹ï¼‰</li>
<li>æœåŠ¡å™¨å¯ä»¥å‘é€å·¥å…·æ›´æ–°é€šçŸ¥ï¼Œå‘ŠçŸ¥è¿æ¥çš„å®¢æˆ·ç«¯è¿™äº›å˜åŒ–</li>
</ul>
<p>é€šçŸ¥ä½œä¸º <strong>JSON-RPC 2.0 é€šçŸ¥æ¶ˆæ¯</strong>å‘é€ï¼ˆä¸æœŸæœ›å“åº”ï¼‰ï¼Œä½¿ MCP æœåŠ¡å™¨èƒ½å¤Ÿå‘è¿æ¥çš„å®¢æˆ·ç«¯æä¾›å®æ—¶æ›´æ–°ã€‚</p>
<hr/>
<h3 data-id="heading-17">å·¥ä½œæµç¨‹ç¤ºä¾‹</h3>
<h4 data-id="heading-18">æ•°æ®å±‚äº¤äº’æµç¨‹</h4>
<p>ä»¥ä¸‹æ˜¯ MCP å®¢æˆ·ç«¯-æœåŠ¡å™¨äº¤äº’çš„åˆ†æ­¥æ¼”ç¤ºï¼š</p>
<pre><code class="hljs language-vbscript" lang="vbscript"><span class="hljs-number">1.</span> åˆå§‹åŒ– (Initialize)
 Â  Client â†’ <span class="hljs-built_in">Server</span>: initialize
 Â  <span class="hljs-built_in">Server</span> â†’ Client: initialize <span class="hljs-built_in">response</span> (capabilities)
â€‹
<span class="hljs-number">2.</span> å‘ç°å·¥å…· (List Tools)
 Â  Client â†’ <span class="hljs-built_in">Server</span>: tools/list
 Â  <span class="hljs-built_in">Server</span> â†’ Client: tools/list <span class="hljs-built_in">response</span> (available tools)
â€‹
<span class="hljs-number">3.</span> è°ƒç”¨å·¥å…· (<span class="hljs-keyword">Call</span> Tool)
 Â  Client â†’ <span class="hljs-built_in">Server</span>: tools/<span class="hljs-keyword">call</span>
 Â  <span class="hljs-built_in">Server</span> â†’ Client: tools/<span class="hljs-keyword">call</span> <span class="hljs-built_in">response</span> (result)
â€‹
<span class="hljs-number">4.</span> æ¥æ”¶é€šçŸ¥ (Notification)
 Â  <span class="hljs-built_in">Server</span> â†’ Client: notification (tool list changed)
</code></pre>
<p>è¿™ä¸ªæµç¨‹å±•ç¤ºäº†ï¼š</p>
<ol start="0">
<li><strong>ç”Ÿå‘½å‘¨æœŸåºåˆ—</strong>ï¼šè¿æ¥åˆå§‹åŒ–å’Œèƒ½åŠ›åå•†</li>
<li><strong>å·¥å…·æ“ä½œ</strong>ï¼šå‘ç°å’Œæ‰§è¡Œ</li>
<li><strong>é€šçŸ¥</strong>ï¼šåŠ¨æ€æ›´æ–°æœºåˆ¶</li>
</ol>
<hr/>
<h3 data-id="heading-19">æ€»ç»“</h3>
<p>Model Context Protocol (MCP) çš„æ¶æ„è®¾è®¡å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>





























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ¨¡å—åŒ–</strong></td><td>æ•°æ®å±‚ä¸ä¼ è¾“å±‚åˆ†ç¦»ï¼Œæ”¯æŒå¤šç§ä¼ è¾“æœºåˆ¶</td></tr><tr><td><strong>å¯æ‰©å±•</strong></td><td>é€šè¿‡åŸè¯­æœºåˆ¶ï¼ŒæœåŠ¡å™¨å¯ä»¥çµæ´»æä¾›åŠŸèƒ½</td></tr><tr><td><strong>æ ‡å‡†åŒ–</strong></td><td>åŸºäº JSON-RPC 2.0ï¼Œæ˜“äºå®ç°å’Œäº’æ“ä½œ</td></tr><tr><td><strong>å®æ—¶æ€§</strong></td><td>æ”¯æŒé€šçŸ¥æœºåˆ¶ï¼Œå®ç°åŠ¨æ€æ›´æ–°</td></tr><tr><td><strong>å®‰å…¨</strong></td><td>ä¼ è¾“å±‚æ”¯æŒå¤šç§èº«ä»½éªŒè¯æœºåˆ¶</td></tr></tbody></table>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œ<strong>æ•°æ®å±‚åè®®</strong>ï¼ˆç‰¹åˆ«æ˜¯åŸè¯­æœºåˆ¶ï¼‰æ˜¯æœ€å€¼å¾—å…³æ³¨çš„éƒ¨åˆ†ï¼Œå› ä¸ºå®ƒå®šä¹‰äº†å¼€å‘è€…å¯ä»¥ä» MCP æœåŠ¡å™¨å‘ MCP å®¢æˆ·ç«¯å…±äº«ä¸Šä¸‹æ–‡çš„æ–¹å¼ã€‚</p>
<hr/>
<h3 data-id="heading-20">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fdocs" target="_blank" title="https://modelcontextprotocol.io/docs" ref="nofollow noopener noreferrer">MCP å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fspec.modelcontextprotocol.io%2F" target="_blank" title="https://spec.modelcontextprotocol.io/" ref="nofollow noopener noreferrer">MCP è§„èŒƒ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fdocs%2Fsdk" target="_blank" title="https://modelcontextprotocol.io/docs/sdk" ref="nofollow noopener noreferrer">MCP SDK æ–‡æ¡£</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯­éŸ³è¯†åˆ«å˜å¤©äº†ï¼šé˜¿é‡ŒQwen3-ASRå¼€æºï¼ŒWhisperè¿æ¥æœ€å¼ºå¯¹æ‰‹]]></title>    <link>https://juejin.cn/post/7600994087588773907</link>    <guid>https://juejin.cn/post/7600994087588773907</guid>    <pubDate>2026-01-31T10:20:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600994087588773907" data-draft-id="7600986495928074281" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯­éŸ³è¯†åˆ«å˜å¤©äº†ï¼šé˜¿é‡ŒQwen3-ASRå¼€æºï¼ŒWhisperè¿æ¥æœ€å¼ºå¯¹æ‰‹"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-01-31T10:20:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯­éŸ³è¯†åˆ«å˜å¤©äº†ï¼šé˜¿é‡ŒQwen3-ASRå¼€æºï¼ŒWhisperè¿æ¥æœ€å¼ºå¯¹æ‰‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T10:20:03.000Z" title="Sat Jan 31 2026 10:20:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¼€æºè¯­éŸ³è¯†åˆ«é¢†åŸŸï¼ŒOpenAIçš„Whisperç³»åˆ—æ›¾ç»æ˜¯ç»•ä¸å¼€çš„å¤§å±±ã€‚ä½†å°±åœ¨2026å¹´1æœˆï¼Œé˜¿é‡Œäº‘é€šä¹‰åƒé—®å›¢é˜Ÿç”©å‡ºäº†ä¸€å¼ ç‹ç‚¸â€”â€”Qwen3-ASRç³»åˆ—ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€æ¬¡å¸¸è§„çš„ç‰ˆæœ¬æ›´æ–°ï¼Œæ›´åƒæ˜¯ä¸€åœºé’ˆå¯¹çœŸå®åº”ç”¨åœºæ™¯çš„ç²¾å‡†é™ç»´æ‰“å‡»ã€‚</p>
<p>å¦‚æœä½ æ˜¯ä¸€åå¼€å‘è€…ï¼Œæˆ–è€…å¯¹è¯­éŸ³æŠ€æœ¯ç¨æœ‰å…³æ³¨ï¼Œä½ å¯èƒ½ä¼šé—®ï¼šè¿™å¥—æ¨¡å‹å‡­ä»€ä¹ˆæŒ‘æˆ˜ç°æœ‰çš„ç§©åºï¼Ÿç­”æ¡ˆè—åœ¨å®ƒçš„ç»†èŠ‚é‡Œã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fhdsfghbfgvbn-1024x375.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/hdsfghbfgvbn-1024x375.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5ad97f7b2d04e62a7204828f5c576b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770459602&amp;x-signature=yul5NTonQ2uKjW4QeaAOxmoDZYk%3D" alt="hdsfghbfgvbn" loading="lazy"/></a></p>
<p><strong>å¬å¾—æ‡‚æ–¹è¨€ï¼Œæ‰ç®—çœŸå¬æ‡‚</strong></p>
<p>ä»¥å¾€çš„ASRæ¨¡å‹ï¼Œå¤„ç†æ ‡å‡†æ™®é€šè¯æˆ–å¹¿æ’­çº§è‹±è¯­é€šå¸¸ä¸åœ¨è¯ä¸‹ï¼Œä½†ä¸€æ—¦é‡åˆ°å£éŸ³æµ“é‡çš„æ–¹è¨€ï¼Œå¾€å¾€å°±ä¼šé—¹ç¬‘è¯ã€‚Qwen3-ASRæœ€è®©æˆ‘æƒŠå–œçš„ï¼Œæ˜¯å®ƒé‚£è‚¡æ¥åœ°æ°”çš„åŠ²å„¿ã€‚</p>
<p>å®ƒä¸ä»…æ”¯æŒ52ç§è¯­è¨€ï¼Œæ›´ç¡¬æ ¸çš„æ˜¯å®ƒé’ˆå¯¹22ç§ä¸­æ–‡æ–¹è¨€è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ã€‚ä¸ç®¡ä½ æ˜¯è®²ç²¤è¯­ã€é—½å—è¯ï¼Œè¿˜æ˜¯å››å·è¯ã€ä¸œåŒ—è¯ï¼Œç”šè‡³å¸¦å£éŸ³çš„è‹±è¯­ï¼ˆæ¯”å¦‚å°åº¦å£éŸ³æˆ–è‹±å¼å£éŸ³ï¼‰ï¼ŒQwen3-ASR-1.7Béƒ½èƒ½ç…§å•å…¨æ”¶ã€‚åœ¨å®æµ‹æ•°æ®ä¸­ï¼Œå®ƒçš„æ–¹è¨€è¯†åˆ«é”™è¯¯ç‡ç›¸æ¯”å•†ä¸šAPIé™ä½äº†çº¦20%ã€‚è¿™æ„å‘³ç€ï¼Œé‚£ä¸ªéœ€è¦ç”¨æˆ·å­—æ­£è…”åœ†è¯´è¯çš„æ—¶ä»£ï¼Œå¯èƒ½è¦è¿‡å»äº†ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fgdsagdfg-1024x418.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/gdsagdfg-1024x418.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c9fc842f49b41168186ab16bc9db7bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770459602&amp;x-signature=%2FN5TrigRTLOfZRzMg2%2BdL9J%2FXsM%3D" alt="gdsagdfg" loading="lazy"/></a></p>
<p><strong>åœ¨KTVå’Œå·¥åœ°éƒ½èƒ½å¹²æ´»çš„AI</strong></p>
<p>çœŸå®ä¸–ç•Œä¸æ˜¯å½•éŸ³æ£šï¼ŒèƒŒæ™¯é‡Œæ€»æ˜¯æœ‰å„ç§å™ªéŸ³ã€‚Qwen3-ASRåœ¨é²æ£’æ€§ä¸Šä¸‹äº†ç‹ åŠŸå¤«ã€‚</p>
<p>æœ‰ä¸¤ä¸ªåœºæ™¯ç‰¹åˆ«å€¼å¾—ä¸€æã€‚ç¬¬ä¸€æ˜¯å™ªæ‚ç¯å¢ƒï¼Œå“ªæ€•æ˜¯åœ¨åœ°é“ã€å·¥åœ°è¿™ç§é«˜å™ªèƒŒæ™¯ä¸‹ï¼Œå®ƒä¾ç„¶èƒ½ç¨³ä½è¯†åˆ«ç‡ã€‚ç¬¬äºŒæ˜¯æ­Œå£°è¯†åˆ«ï¼Œè¿™é€šå¸¸æ˜¯ASRçš„å™©æ¢¦ï¼Œå› ä¸ºèƒŒæ™¯éŸ³ä¹ä¼šä¸¥é‡å¹²æ‰°äººå£°æå–ã€‚ä½†Qwen3-ASRå´èƒ½åšåˆ°å¸¦BGMçš„æ•´é¦–æ­Œæ›²è½¬å†™ï¼Œä¸­è‹±æ–‡æ­Œè¯çš„è¯é”™è¯¯ç‡è¢«å‹åˆ°äº†15%ä»¥ä¸‹ã€‚å¯¹äºåšå­—å¹•ç»„æˆ–éŸ³ä¹ç±»åº”ç”¨çš„æœ‹å‹æ¥è¯´ï¼Œè¿™ç»å¯¹æ˜¯ä¸ªç¦éŸ³ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fasfdsafsd-1024x572.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/asfdsafsd-1024x572.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72b54514f083482da47de9bd24e9b381~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770459602&amp;x-signature=hPZm9Jh6T6pYMty2qeDOGMpyMJ0%3D" alt="asfdsafsd" loading="lazy"/></a></p>
<p><strong>å¿«ï¼Œæå…¶çš„å¿«</strong></p>
<p>å¯¹äºå·¥ç¨‹è½åœ°æ¥è¯´ï¼Œç²¾åº¦æ˜¯ä¸Šé™ï¼Œæ•ˆç‡æ˜¯åº•çº¿ã€‚é€šä¹‰å›¢é˜Ÿè¿™æ¬¡å¾ˆèªæ˜åœ°æŠŠæ¨¡å‹åˆ†æˆäº†ä¸¤ä¸ªæ¢¯é˜Ÿã€‚</p>
<p>é™¤äº†è¿½æ±‚æè‡´ç²¾åº¦çš„1.7Bç‰ˆæœ¬ï¼Œè¿˜æœ‰ä¸€ä¸ª0.6Bçš„è½»é‡åŒ–ç‰ˆæœ¬ï¼Œå®ƒæ˜¯ä¸“é—¨ä¸ºç”Ÿäº§ç¯å¢ƒå‡†å¤‡çš„ã€‚åœ¨128å¹¶å‘çš„å¼‚æ­¥æ¨ç†ä¸‹ï¼Œè¿™ä¸ªå°å®¶ä¼™èƒ½è·‘å‡º2000å€çš„åååŠ é€Ÿã€‚æ¢å¥è¯è¯´ï¼Œå¤„ç†5ä¸ªå°æ—¶çš„éŸ³é¢‘ï¼Œå®ƒåªéœ€è¦10ç§’é’Ÿã€‚è¿™ç§æ•ˆç‡å¯¹äºéœ€è¦å®æ—¶å¤„ç†æµ·é‡æ•°æ®çš„å®¢æœè´¨æ£€æˆ–ç›´æ’­å­—å¹•åœºæ™¯æ¥è¯´ï¼Œæå…·è¯±æƒ‘åŠ›ã€‚</p>
<p><strong>ä¸åªæ˜¯è¯†åˆ«ï¼Œè¿˜æœ‰ç²¾å‡†çš„æ—¶é—´å°º</strong></p>
<p>é™¤äº†è¯†åˆ«æ¨¡å‹ï¼Œè¿™æ¬¡å¼€æºåŒ…é‡Œè¿˜é™„å¸¦äº†ä¸€ä¸ªå½©è›‹ï¼šQwen3-ForcedAlignerã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºå¼ºåˆ¶å¯¹é½çš„0.6Bæ¨¡å‹ã€‚å®ƒçš„ä»»åŠ¡ä¸æ˜¯ç”Ÿæˆæ–‡æœ¬ï¼Œè€Œæ˜¯æŠŠæ–‡æœ¬å’ŒéŸ³é¢‘çš„æ—¶é—´è½´ç²¾å‡†å¯¹åº”èµ·æ¥ã€‚å®ƒçš„æ—¶é—´æˆ³é¢„æµ‹ç²¾åº¦ç›´æ¥è¶…è¶Šäº†WhisperXç­‰ä¼ ç»Ÿæ–¹æ¡ˆã€‚å¯¹äºè§†é¢‘åˆ›ä½œè€…æ¥è¯´ï¼Œè¿™æ„å‘³ç€è‡ªåŠ¨ç”Ÿæˆçš„å­—å¹•ä¸å†æ˜¯å¤§æ¦‚å¯¹é½ï¼Œè€Œæ˜¯èƒ½ç²¾ç¡®åˆ°å­—ã€è¯çº§åˆ«ï¼ŒåæœŸæ ¡å¯¹çš„å·¥ä½œé‡å°†å¤§å¹…å‡å°‘ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fasdgjhj-1024x1004.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/asdgjhj-1024x1004.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36b2bafa4e3a40f4a7fde5a1111da5b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770459602&amp;x-signature=x%2BZFHVSWOjME5nCgAk27ACJQ47o%3D" alt="asdgjhj" loading="lazy"/></a></p>
<p><strong>å†™åœ¨æœ€å</strong></p>
<p>Qwen3-ASRç³»åˆ—çš„å‡ºç°ï¼Œè¡¥é½äº†å¼€æºç¤¾åŒºåœ¨å¤šæ–¹è¨€å’Œå¤æ‚å£°å­¦åœºæ™¯ä¸‹çš„çŸ­æ¿ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œé€šä¹‰å›¢é˜Ÿéå¸¸å¤§æ–¹åœ°é‡‡ç”¨äº†Apache 2.0åè®®ï¼Œä»£ç ã€æƒé‡ã€æ¨ç†æ¡†æ¶å…¨å¥—å¼€æºã€‚</p>
<p>æ— è®ºæ˜¯æƒ³åœ¨æœ¬åœ°éƒ¨ç½²ä¸€ä¸ªèƒ½å¬æ‡‚å®¶ä¹¡è¯çš„è¯­éŸ³åŠ©æ‰‹ï¼Œè¿˜æ˜¯æƒ³æ„å»ºä¸€ä¸ªå·¥ä¸šçº§çš„é«˜å¹¶å‘è½¬å†™æœåŠ¡ï¼ŒQwen3-ASRéƒ½æä¾›äº†ä¸€ä¸ªç°æˆä¸”å¼ºå¤§çš„é€‰é¡¹ã€‚è¯­éŸ³è¯†åˆ«çš„ä¸‹åŠåœºï¼Œéšç€Qwen3çš„å…¥å±€ï¼Œå˜å¾—è¶Šæ¥è¶Šæœ‰çœ‹å¤´äº†ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ reduce æ–¹æ³•å¤„ç†å¤æ‚çš„å¯¹è±¡æ•°æ®ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7600986495927828521</link>    <guid>https://juejin.cn/post/7600986495927828521</guid>    <pubDate>2026-01-31T08:40:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600986495927828521" data-draft-id="7600994087588577299" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ reduce æ–¹æ³•å¤„ç†å¤æ‚çš„å¯¹è±¡æ•°æ®ï¼Ÿ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-31T08:40:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·22176592792"/> <meta itemprop="url" content="https://juejin.cn/user/4461135061323432"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ reduce æ–¹æ³•å¤„ç†å¤æ‚çš„å¯¹è±¡æ•°æ®ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4461135061323432/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·22176592792
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T08:40:43.000Z" title="Sat Jan 31 2026 08:40:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æƒ³äº†è§£çš„æ˜¯åœ¨ React + TypeScript ç¯å¢ƒä¸‹ï¼Œå¦‚ä½•ç”¨ <code>reduce</code> æ–¹æ³•å¤„ç†ç»“æ„æ›´å¤æ‚çš„å¯¹è±¡æ•°æ®ï¼ˆè€Œéç®€å•æ•°ç»„ï¼‰ï¼Œæˆ‘ä¼šé€šè¿‡<strong>åˆ†å±‚æ‹†è§£ + å®æˆ˜æ¡ˆä¾‹</strong>çš„æ–¹å¼ï¼Œå¸¦ä½ æŒæ¡å¤„ç†å¤æ‚å¯¹è±¡æ•°æ®çš„æ ¸å¿ƒæ€è·¯å’ŒæŠ€å·§ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€æ ¸å¿ƒæ€è·¯ï¼šreduce å¤„ç†å¤æ‚å¯¹è±¡çš„æœ¬è´¨</h3>
<p><code>reduce</code> ä¸ä»…èƒ½å¤„ç†æ•°ç»„ï¼Œä¹Ÿèƒ½é€šè¿‡éå†å¯¹è±¡çš„ <code>key/value</code> è½¬åŒ–ä¸ºæ•°ç»„åå†å¤„ç†ã€‚æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š</p>
<ol>
<li>å°†å¤æ‚å¯¹è±¡<strong>è§£æ„ / è½¬åŒ–ä¸ºå¯éå†çš„æ•°ç»„</strong>ï¼ˆå¦‚ <code>Object.entries()</code>/<code>Object.values()</code>ï¼‰ï¼›</li>
<li>ç”¨ <code>reduce</code> çš„ç´¯åŠ å™¨ï¼ˆ<code>acc</code>ï¼‰æ„å»ºç›®æ ‡æ•°æ®ç»“æ„ï¼›</li>
<li>ç»“åˆ TypeScript ç±»å‹çº¦æŸï¼Œé¿å…å¤æ‚æ•°æ®çš„ç±»å‹é”™è¯¯ï¼›</li>
<li>åœ¨ React ç»„ä»¶ä¸­ï¼Œé€šå¸¸å°†å¤„ç†é€»è¾‘å°è£…ä¸ºå‡½æ•°ï¼Œé…åˆçŠ¶æ€ / Props ä½¿ç”¨ã€‚</li>
</ol>
<h3 data-id="heading-1">äºŒã€å®æˆ˜æ¡ˆä¾‹ï¼šå¤„ç†å¤šå±‚åµŒå¥—çš„å¤æ‚å¯¹è±¡</h3>
<p>å‡è®¾ä½ æœ‰ä¸€ä»½ â€œç”µå•†è®¢å• + å•†å“â€ çš„å¤æ‚æ•°æ®ï¼Œéœ€è¦ç”¨ <code>reduce</code> å®Œæˆï¼š</p>
<ul>
<li>ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„è®¢å•æ€»é‡‘é¢</li>
<li>æŒ‰å•†å“åˆ†ç±»æ±‡æ€»é”€é‡</li>
<li>è¿‡æ»¤å‡ºé‡‘é¢ &gt; 100 çš„æœ‰æ•ˆè®¢å•</li>
</ul>
<h4 data-id="heading-2">æ­¥éª¤ 1ï¼šå®šä¹‰ TypeScript ç±»å‹ï¼ˆçº¦æŸå¤æ‚æ•°æ®ï¼‰</h4>
<p>å…ˆæ˜ç¡®æ•°æ®ç»“æ„ï¼Œé¿å…åç»­å¤„ç†æ—¶ç±»å‹æ··ä¹±ï¼š</p>
<p>tsx</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// å•†å“ä¿¡æ¯</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Product</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">category</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å•†å“åˆ†ç±»ï¼ˆç”µå­/æœé¥°/é£Ÿå“ï¼‰</span>
  <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">quantity</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// è´­ä¹°æ•°é‡</span>
}

<span class="hljs-comment">// è®¢å•ä¿¡æ¯</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Order</span> {
  <span class="hljs-attr">orderId</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">userId</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">userName</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">createTime</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">products</span>: <span class="hljs-title class_">Product</span>[]; <span class="hljs-comment">// è®¢å•åŒ…å«çš„å•†å“ï¼ˆåµŒå¥—æ•°ç»„ï¼‰</span>
  <span class="hljs-attr">status</span>: <span class="hljs-string">'paid'</span> | <span class="hljs-string">'unpaid'</span> | <span class="hljs-string">'cancelled'</span>; <span class="hljs-comment">// è®¢å•çŠ¶æ€</span>
}

<span class="hljs-comment">// æœ€ç»ˆç»Ÿè®¡ç»“æœç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderStats</span> {
  <span class="hljs-attr">userTotal</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// ç”¨æˆ·å -&gt; æ€»æ¶ˆè´¹é‡‘é¢</span>
  <span class="hljs-attr">categorySales</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// å•†å“åˆ†ç±» -&gt; æ€»é”€é‡</span>
  <span class="hljs-attr">validOrders</span>: <span class="hljs-title class_">Order</span>[]; <span class="hljs-comment">// æœ‰æ•ˆè®¢å•ï¼ˆpaid + é‡‘é¢&gt;100ï¼‰</span>
}
</code></pre>
<h4 data-id="heading-3">æ­¥éª¤ 2ï¼šç¼–å†™ reduce å¤„ç†é€»è¾‘ï¼ˆReact ç»„ä»¶å†…ï¼‰</h4>
<p>tsx</p>
<pre><code class="hljs language-css" lang="css">const ComplexReduceDemo: React.FC = () =&gt; {
  // æ¨¡æ‹Ÿå¤æ‚çš„è®¢å•æ•°æ®ï¼ˆå¤šå±‚åµŒå¥—ï¼‰
  const rawOrders: Order[] = [
    {
      orderId: <span class="hljs-string">'O001'</span>,
      userId: <span class="hljs-string">'U001'</span>,
      userName: <span class="hljs-string">'å¼ ä¸‰'</span>,
      createTime: <span class="hljs-string">'2026-01-01'</span>,
      status: <span class="hljs-string">'paid'</span>,
      products: [
        { id: <span class="hljs-string">'P001'</span>, name: <span class="hljs-string">'æ‰‹æœº'</span>, category: <span class="hljs-string">'ç”µå­'</span>, price: <span class="hljs-number">2999</span>, quantity: <span class="hljs-number">1</span> },
        { id: <span class="hljs-string">'P002'</span>, name: <span class="hljs-string">'Tæ¤'</span>, category: <span class="hljs-string">'æœé¥°'</span>, price: <span class="hljs-number">99</span>, quantity: <span class="hljs-number">2</span> },
      ],
    },
    {
      orderId: <span class="hljs-string">'O002'</span>,
      userId: <span class="hljs-string">'U001'</span>,
      userName: <span class="hljs-string">'å¼ ä¸‰'</span>,
      createTime: <span class="hljs-string">'2026-01-05'</span>,
      status: <span class="hljs-string">'unpaid'</span>,
      products: [
        { id: <span class="hljs-string">'P003'</span>, name: <span class="hljs-string">'é¢åŒ…'</span>, category: <span class="hljs-string">'é£Ÿå“'</span>, price: <span class="hljs-number">15</span>, quantity: <span class="hljs-number">5</span> },
      ],
    },
    {
      orderId: <span class="hljs-string">'O003'</span>,
      userId: <span class="hljs-string">'U002'</span>,
      userName: <span class="hljs-string">'æå››'</span>,
      createTime: <span class="hljs-string">'2026-01-10'</span>,
      status: <span class="hljs-string">'paid'</span>,
      products: [
        { id: <span class="hljs-string">'P001'</span>, name: <span class="hljs-string">'æ‰‹æœº'</span>, category: <span class="hljs-string">'ç”µå­'</span>, price: <span class="hljs-number">2999</span>, quantity: <span class="hljs-number">2</span> },
        { id: <span class="hljs-string">'P004'</span>, name: <span class="hljs-string">'è£¤å­'</span>, category: <span class="hljs-string">'æœé¥°'</span>, price: <span class="hljs-number">199</span>, quantity: <span class="hljs-number">1</span> },
      ],
    },
  ];

  // æ ¸å¿ƒï¼šç”¨ä¸€æ¬¡ reduce å®Œæˆå¤šç»´åº¦ç»Ÿè®¡ï¼ˆé¿å…å¤šæ¬¡éå†ï¼‰
  const stats: OrderStats = rawOrders.<span class="hljs-built_in">reduce</span>((acc, order) =&gt; {
    // <span class="hljs-number">1</span>. è®¡ç®—å½“å‰è®¢å•çš„æ€»é‡‘é¢ï¼ˆåµŒå¥— products æ•°ç»„çš„ reduceï¼‰
    const orderTotal = <span class="hljs-attribute">order</span><span class="hljs-selector-class">.products</span><span class="hljs-selector-class">.reduce</span>((sum, product) =&gt; {
      return sum + product<span class="hljs-selector-class">.price</span> * product<span class="hljs-selector-class">.quantity</span>;
    }, <span class="hljs-number">0</span>);

    // <span class="hljs-number">2</span>. ç»Ÿè®¡ç”¨æˆ·æ€»æ¶ˆè´¹ï¼ˆä»…å·²æ”¯ä»˜è®¢å•ï¼‰
    if (<span class="hljs-attribute">order</span><span class="hljs-selector-class">.status</span> === 'paid') {
      acc<span class="hljs-selector-class">.userTotal</span><span class="hljs-selector-attr">[order.userName]</span> = (acc<span class="hljs-selector-class">.userTotal</span><span class="hljs-selector-attr">[order.userName]</span> || <span class="hljs-number">0</span>) + orderTotal;
    }

    // <span class="hljs-number">3</span>. æŒ‰å•†å“åˆ†ç±»æ±‡æ€»é”€é‡ï¼ˆæ‰€æœ‰è®¢å•ï¼Œæ— è®ºçŠ¶æ€ï¼‰
    <span class="hljs-attribute">order</span><span class="hljs-selector-class">.products</span><span class="hljs-selector-class">.forEach</span>((product) =&gt; {
      acc<span class="hljs-selector-class">.categorySales</span><span class="hljs-selector-attr">[product.category]</span> = (acc<span class="hljs-selector-class">.categorySales</span><span class="hljs-selector-attr">[product.category]</span> || <span class="hljs-number">0</span>) + product<span class="hljs-selector-class">.quantity</span>;
    });

    // <span class="hljs-number">4</span>. ç­›é€‰æœ‰æ•ˆè®¢å•ï¼ˆå·²æ”¯ä»˜ + é‡‘é¢&gt;<span class="hljs-number">100</span>ï¼‰
    if (<span class="hljs-attribute">order</span><span class="hljs-selector-class">.status</span> === 'paid' &amp;&amp; orderTotal &gt; <span class="hljs-number">100</span>) {
      acc<span class="hljs-selector-class">.validOrders</span><span class="hljs-selector-class">.push</span>({ ..<span class="hljs-selector-class">.order</span>, // æ·±æ‹·è´é¿å…åŸæ•°æ®æ±¡æŸ“
        products: [...order.products] 
      });
    }

    return acc;
  }, {
    userTotal: {},
    categorySales: {},
    validOrders: [],
  } as OrderStats); // æ˜¾å¼æŒ‡å®šç´¯åŠ å™¨ç±»å‹ï¼ŒTypeScript æ›´å‹å¥½

  // æ¸²æŸ“ç»Ÿè®¡ç»“æœ
  return (
    &lt;<span class="hljs-selector-tag">div</span> style={{ <span class="hljs-attribute">padding</span>: <span class="hljs-number">20</span> }}&gt;
      &lt;<span class="hljs-selector-tag">h2</span>&gt;å¤æ‚å¯¹è±¡çš„ reduce å¤„ç†ç¤ºä¾‹&lt;/<span class="hljs-selector-tag">h2</span>&gt;
      
      &lt;<span class="hljs-selector-tag">div</span> style={{ <span class="hljs-attribute">margin</span>: <span class="hljs-number">10</span>  marginTop: <span class="hljs-number">20</span> }}&gt;
        &lt;<span class="hljs-selector-tag">h3</span>&gt;<span class="hljs-number">1</span>. ç”¨æˆ·æ€»æ¶ˆè´¹&lt;/<span class="hljs-selector-tag">h3</span>&gt;
        &lt;<span class="hljs-selector-tag">ul</span>&gt;
          {<span class="hljs-selector-tag">Object</span><span class="hljs-selector-class">.entries</span>(stats<span class="hljs-selector-class">.userTotal</span>)<span class="hljs-selector-class">.map</span>((<span class="hljs-selector-attr">[user, total]</span>) =&gt; (
            &lt;<span class="hljs-selector-tag">li</span> key={user}&gt;{user}ï¼šÂ¥{total}&lt;/<span class="hljs-selector-tag">li</span>&gt;
          ))}
        &lt;/<span class="hljs-selector-tag">ul</span>&gt;
      &lt;/<span class="hljs-selector-tag">div</span>&gt;

      &lt;<span class="hljs-selector-tag">div</span> style={{ <span class="hljs-attribute">margin</span>: <span class="hljs-number">10</span>  marginTop: <span class="hljs-number">20</span> }}&gt;
        &lt;<span class="hljs-selector-tag">h3</span>&gt;<span class="hljs-number">2</span>. å•†å“åˆ†ç±»é”€é‡&lt;/<span class="hljs-selector-tag">h3</span>&gt;
        &lt;<span class="hljs-selector-tag">ul</span>&gt;
          {<span class="hljs-selector-tag">Object</span><span class="hljs-selector-class">.entries</span>(stats<span class="hljs-selector-class">.categorySales</span>)<span class="hljs-selector-class">.map</span>((<span class="hljs-selector-attr">[category, sales]</span>) =&gt; (
            &lt;<span class="hljs-selector-tag">li</span> key={category}&gt;{category}ï¼š{sales} ä»¶&lt;/<span class="hljs-selector-tag">li</span>&gt;
          ))}
        &lt;/<span class="hljs-selector-tag">ul</span>&gt;
      &lt;/<span class="hljs-selector-tag">div</span>&gt;

      &lt;<span class="hljs-selector-tag">div</span> style={{ <span class="hljs-attribute">margin</span>: <span class="hljs-number">10</span>  marginTop: <span class="hljs-number">20</span> }}&gt;
        &lt;<span class="hljs-selector-tag">h3</span>&gt;<span class="hljs-number">3</span>. æœ‰æ•ˆè®¢å•ï¼ˆå·²æ”¯ä»˜ + é‡‘é¢&gt;<span class="hljs-number">100</span>ï¼‰&lt;/<span class="hljs-selector-tag">h3</span>&gt;
        &lt;<span class="hljs-selector-tag">ul</span>&gt;
          {stats<span class="hljs-selector-class">.validOrders</span><span class="hljs-selector-class">.map</span>((<span class="hljs-attribute">order</span>) =&gt; (
            &lt;<span class="hljs-selector-tag">li</span> key={<span class="hljs-attribute">order</span><span class="hljs-selector-class">.orderId</span>}&gt;
              è®¢å•{<span class="hljs-attribute">order</span><span class="hljs-selector-class">.orderId</span>}ï¼ˆ{<span class="hljs-attribute">order</span><span class="hljs-selector-class">.userName</span>}ï¼‰ï¼šÂ¥{
                <span class="hljs-attribute">order</span><span class="hljs-selector-class">.products</span><span class="hljs-selector-class">.reduce</span>((sum, <span class="hljs-selector-tag">p</span>) =&gt; sum + <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.price</span> * <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.quantity</span>, <span class="hljs-number">0</span>)
              }
            &lt;/<span class="hljs-selector-tag">li</span>&gt;
          ))}
        &lt;/<span class="hljs-selector-tag">ul</span>&gt;
      &lt;/<span class="hljs-selector-tag">div</span>&gt;
    &lt;/<span class="hljs-selector-tag">div</span>&gt;
  );
};

export default ComplexReduceDemo;
</code></pre>
<h4 data-id="heading-4">æ­¥éª¤ 3ï¼šåœ¨ React ä¸­ä½¿ç”¨è¯¥ç»„ä»¶</h4>
<p>å°†ç»„ä»¶æ·»åŠ åˆ°è·¯ç”±ï¼ˆå‚è€ƒä¸Šä¸€ç¯‡æ•™ç¨‹çš„ <code>routes.ts</code> é…ç½®ï¼‰ï¼Œå¯åŠ¨é¡¹ç›®åå°±èƒ½çœ‹åˆ°å¤æ‚æ•°æ®å¤„ç†åçš„ç»“æœã€‚</p>
<h3 data-id="heading-5">ä¸‰ã€å¤„ç†å¤æ‚å¯¹è±¡çš„å…³é”®æŠ€å·§</h3>
<ol>
<li><strong>åµŒå¥— reduce</strong>ï¼šå½“å¯¹è±¡åŒ…å«å¤šå±‚æ•°ç»„ï¼ˆå¦‚è®¢å•â†’å•†å“ï¼‰ï¼Œå¯åœ¨ <code>reduce</code> å›è°ƒä¸­åµŒå¥—å¦ä¸€ä¸ª <code>reduce</code> å¤„ç†å­æ•°ç»„ï¼›</li>
<li><strong>ç´¯åŠ å™¨åˆå§‹åŒ–</strong>ï¼šå¤æ‚åœºæ™¯ä¸‹ï¼Œç´¯åŠ å™¨ï¼ˆ<code>acc</code>ï¼‰è¦åˆå§‹åŒ–ä¸ºç›®æ ‡ç»“æ„ï¼ˆå¦‚ç¤ºä¾‹ä¸­çš„ <code>OrderStats</code>ï¼‰ï¼Œå¹¶é€šè¿‡ TypeScript æ˜¾å¼æŒ‡å®šç±»å‹ï¼›</li>
<li><strong>é¿å…åŸæ•°æ®æ±¡æŸ“</strong>ï¼šå¤„ç†åµŒå¥—å¯¹è±¡æ—¶ï¼Œç”¨ <code>...</code> æ‰©å±•è¿ç®—ç¬¦æ·±æ‹·è´ï¼ˆç®€å•åœºæ™¯ï¼‰æˆ– <code>structuredClone</code>ï¼ˆå¤æ‚åœºæ™¯ï¼‰ï¼Œé¿å…ä¿®æ”¹åŸå§‹æ•°æ®ï¼›</li>
<li><strong>å¤šç»´åº¦ç»Ÿè®¡</strong>ï¼šå°½é‡åœ¨ä¸€æ¬¡ <code>reduce</code> ä¸­å®Œæˆæ‰€æœ‰ç»Ÿè®¡ï¼ˆè€Œéå¤šæ¬¡éå†æ•°ç»„ï¼‰ï¼Œæå‡æ€§èƒ½ï¼›</li>
<li><strong>ç©ºå€¼å¤„ç†</strong>ï¼šç”¨ <code>|| 0</code> å¤„ç†ç´¯åŠ å™¨ä¸­å¯èƒ½çš„ <code>undefined</code>ï¼ˆå¦‚ <code>acc.userTotal[user] || 0</code>ï¼‰ï¼Œé¿å… NaNã€‚</li>
</ol>
<h3 data-id="heading-6">æ€»ç»“</h3>
<ol>
<li>å¤„ç†å¤æ‚å¯¹è±¡æ•°æ®çš„æ ¸å¿ƒæ˜¯ï¼šå…ˆé€šè¿‡ <code>Object.entries()</code>/<code>Object.values()</code> å°†å¯¹è±¡è½¬ä¸ºå¯éå†æ•°ç»„ï¼Œå†ç”¨ <code>reduce</code> ç´¯åŠ å™¨æ„å»ºç›®æ ‡ç»“æ„ï¼›</li>
<li>React + TypeScript åœºæ™¯ä¸‹ï¼Œ<strong>å…ˆå®šä¹‰å®Œæ•´çš„ç±»å‹æ¥å£</strong>æ˜¯é¿å…å¤æ‚æ•°æ®å¤„ç†å‡ºé”™çš„å…³é”®ï¼›</li>
<li>å¤æ‚åµŒå¥—æ•°æ®å¯é€šè¿‡<strong>åµŒå¥— reduce</strong> å¤„ç†ï¼Œä¸”å°½é‡åœ¨ä¸€æ¬¡éå†ä¸­å®Œæˆå¤šç»´åº¦ç»Ÿè®¡ï¼Œå…¼é¡¾ä»£ç ç®€æ´æ€§å’Œæ€§èƒ½ã€‚</li>
</ol>
<p>å¦‚æœéœ€è¦å¤„ç†æ›´å¤æ‚çš„åœºæ™¯ï¼ˆå¦‚å¤šå±‚åµŒå¥—çš„æ ‘å½¢æ•°æ®ï¼‰ï¼Œå¯ä»¥åŸºäºè¿™ä¸ªæ€è·¯ï¼Œåœ¨ <code>reduce</code> ä¸­å¢åŠ é€’å½’é€»è¾‘å³å¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»è¿œç¨‹ç»„ä»¶åˆ°æè‡´æ€§èƒ½ï¼šä¸€æ¬¡ä½ä»£ç æ¶æ„çš„å†æ€è€ƒ]]></title>    <link>https://juejin.cn/post/7601077764423647282</link>    <guid>https://juejin.cn/post/7601077764423647282</guid>    <pubDate>2026-01-31T08:21:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601077764423647282" data-draft-id="7601169987396386867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»è¿œç¨‹ç»„ä»¶åˆ°æè‡´æ€§èƒ½ï¼šä¸€æ¬¡ä½ä»£ç æ¶æ„çš„å†æ€è€ƒ"/> <meta itemprop="keywords" content="Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2026-01-31T08:21:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°èœ—1å·"/> <meta itemprop="url" content="https://juejin.cn/user/835284568117806"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»è¿œç¨‹ç»„ä»¶åˆ°æè‡´æ€§èƒ½ï¼šä¸€æ¬¡ä½ä»£ç æ¶æ„çš„å†æ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/835284568117806/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°èœ—1å·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T08:21:37.000Z" title="Sat Jan 31 2026 08:21:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰æ®µæ—¶é—´çªç„¶å›é¡¾äº†ä¸€ä¸‹ä¹‹å‰åšè¿‡çš„ä¸€ä»¶äº‹ï¼šä¸Šä¸€ä»½å·¥ä½œçš„æ ¸å¿ƒä»»åŠ¡ä¹‹ä¸€ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå¯è§†åŒ– / ä½ä»£ç å¹³å°ã€‚</p>
<p>å½“æ—¶å—é™äºæ—¶é—´å’Œå¤æ‚åº¦ï¼Œæ•´ä½“æ–¹æ¡ˆåŸºæœ¬æ˜¯åŸºäº <code>vue-sfc-playground</code> è¿™ä¸€å¥—æ€è·¯ï¼Œé€šè¿‡ iframe + æµè§ˆå™¨ç«¯ç¼–è¯‘çš„æ–¹å¼æ¥å®ç°è¿œç¨‹ç»„ä»¶çš„æ‰©å±•èƒ½åŠ›ã€‚è™½ç„¶æœ€ç»ˆæŠŠåŠŸèƒ½è·‘é€šäº†ï¼Œä½†åœ¨çœŸå®ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œè¿™å¥—æ–¹æ¡ˆé€æ¸æš´éœ²å‡ºä¸å°‘é—®é¢˜ã€‚</p>
<p>æ¯”è¾ƒå…¸å‹çš„æœ‰ï¼š</p>
<ol>
<li><strong>iframe æ€§èƒ½è¾ƒå·®</strong>ï¼Œé€šä¿¡æˆæœ¬é«˜ï¼Œè°ƒè¯•ä¹Ÿä¸å‹å¥½</li>
<li><strong>å¼•å…¥çš„æ¨¡å—å¿…é¡»æ”¯æŒ ESM</strong>ï¼Œä¸”å…¼å®¹æ€§å—é™</li>
<li><strong>æ¨¡å—ä¹‹é—´å­˜åœ¨å‰ç½®ä¾èµ–</strong>ï¼Œéœ€è¦äººå·¥ç»´æŠ¤ä¾èµ–å…³ç³»</li>
<li><strong>ä»£ç è¡¥å…¨ã€Lintã€æ’ä»¶èƒ½åŠ›å—é™</strong>ï¼Œå¼€å‘ä½“éªŒè¿œä¸å¦‚æœ¬åœ° IDE</li>
<li>ä»¥åŠä¸€ç³»åˆ—é›¶æ•£ä½†å¾ˆæ¶ˆè€—å¿ƒæ™ºçš„é—®é¢˜</li>
</ol>
<p>ç«™åœ¨ç°åœ¨è¿™ä¸ªæ—¶é—´ç‚¹å›çœ‹ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªé—®é¢˜æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œåªæ˜¯å½“æ—¶çš„å®ç°æ–¹å¼å¹¶ä¸ä¼˜é›…â€”â€”<strong>å®ƒå…¶å®æ˜¯æœ‰æ›´å¥½çš„è§£æ³•çš„ã€‚</strong></p>
<h2 data-id="heading-0">éœ€æ±‚å‡è®¾ä¸ç›®æ ‡æ‹†è§£</h2>
<p>ä¸ºäº†æ–¹ä¾¿åç»­è®¨è®ºï¼Œæˆ‘ä»¬å…ˆå‡å®šä¸€ä¸ªæ˜ç¡®çš„éœ€æ±‚ï¼š</p>
<blockquote>
<p><strong>ä½ä»£ç å¹³å°éœ€è¦æ”¯æŒæŒ‚è½½ä»»æ„è‡ªå®šä¹‰ç»„ä»¶ï¼Œç”¨æ¥ç»„åˆå®ç°ä¸šåŠ¡åŠŸèƒ½ï¼Œè€Œä¸æ˜¯åªèƒ½ä½¿ç”¨å¹³å°å†…ç½®çš„ç‰©æ–™ã€‚</strong></p>
</blockquote>
<p>åœ¨è¿™ä¸ªå‰æä¸‹ï¼Œæˆ‘ç»™è‡ªå·±å®šäº†å‡ ä¸ªæ˜ç¡®çš„ç›®æ ‡ï¼š</p>
<ul>
<li><strong>å¼€å‘é˜¶æ®µ</strong>ï¼šæœ¬åœ° IDE ç¼–å†™ç»„ä»¶ï¼Œä¿®æ”¹åå¯ä»¥å¿«é€Ÿé¢„è§ˆ</li>
<li><strong>ç”Ÿäº§ç¯å¢ƒ</strong>ï¼šæè‡´çš„è¿è¡Œæ€§èƒ½å’Œå°½å¯èƒ½å°çš„åŒ…ä½“ç§¯</li>
<li><strong>æ•´ä½“ç­–ç•¥</strong>ï¼šæ”¾å¼ƒâ€œçº¯åœ¨çº¿ç¼–å†™ç»„ä»¶â€ï¼Œå…¨éƒ¨åŸºäºæœ¬åœ°å¼€å‘æ¥è§£å†³é—®é¢˜</li>
</ul>
<p>åŸå› ä¹Ÿå¾ˆç°å®ï¼š<br/>
åœ¨çº¿å†™ç»„ä»¶è¿™æ¡è·¯ï¼Œä¼˜åŒ–æˆæœ¬å¤ªé«˜äº†ï¼Œä¸€æ—¦å¼•å…¥å¤æ‚ä¾èµ–ã€çœŸå®ä¸šåŠ¡ä»£ç ï¼Œç»´æŠ¤éš¾åº¦ä¼šæŒ‡æ•°çº§ä¸Šå‡ã€‚</p>
<h2 data-id="heading-1">å¼€å‘é˜¶æ®µï¼šè¿½æ±‚æè‡´çš„åé¦ˆé€Ÿåº¦</h2>
<p>å¼€å‘é˜¶æ®µæ•´ä½“çš„æ•°æ®æµå’ŒèŒè´£å…³ç³»å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
  IDE[æœ¬åœ° IDE]
  IDE --&gt;|æ–‡ä»¶å˜æ›´| Rsbuild
  Rsbuild --&gt;|HMR / WS| Renderer
  Renderer --&gt;|defineAsyncComponent| VueRuntime
</code></pre>
<p>å¼€å‘é˜¶æ®µçš„æ ¸å¿ƒè¯‰æ±‚å…¶å®å¾ˆç®€å•ï¼š</p>
<blockquote>
<p><strong>æˆ‘åœ¨æœ¬åœ°æ”¹ä»£ç ï¼Œé¡µé¢è¦ç«‹åˆ»æœ‰åé¦ˆã€‚</strong></p>
</blockquote>
<p>å¦‚æœä½ çœ‹è¿‡ Vue 3 çš„å®˜æ–¹æ–‡æ¡£ï¼Œä¼šå‘ç°å®ƒæä¾›äº†ä¸€ä¸ªéå¸¸å…³é”®çš„èƒ½åŠ›ï¼š<code>defineAsyncComponent</code>ï¼Œç”¨äºå¼‚æ­¥åŠ è½½ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { defineAsyncComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncComp</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-comment">// ä»æœåŠ¡ç«¯è·å–ç»„ä»¶</span>
    <span class="hljs-title function_">resolve</span>(<span class="hljs-comment">/* ç»„ä»¶å¯¹è±¡ */</span>);
  });
});
</code></pre>
<blockquote>
<p>æ¨èé˜…è¯»ï¼š
<a href="https://juejin.cn/post/7399986979729424418" target="_blank" title="https://juejin.cn/post/7399986979729424418">ç»™æˆ‘ 5 åˆ†é’Ÿï¼Œä¿è¯æ•™ä¼šä½ åœ¨ Vue3 ä¸­åŠ¨æ€åŠ è½½è¿œç¨‹ç»„ä»¶</a>
è¿™ç¯‡æ–‡ç« å¯ä»¥å¸®åŠ©ç†è§£å¦‚ä½•ç»“åˆæœ¬åœ° Node æœåŠ¡æ¥æŒ‚è½½è¿œç¨‹ç»„ä»¶ã€‚</p>
</blockquote>
<p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼š
<code>resolve</code> è¿”å›çš„å¹¶ä¸æ˜¯å­—ç¬¦ä¸²å½¢å¼çš„æºç ï¼Œè€Œæ˜¯<strong>ç»è¿‡ç¼–è¯‘åçš„ç»„ä»¶å¯¹è±¡</strong>ï¼Œæœ¬è´¨ä¸Šç±»ä¼¼äº <code>vue-loader</code> å¤„ç†åçš„äº§ç‰©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d7313ead637419c9b99a56fa401ced8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6JyXMeWPtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770452497&amp;x-signature=lpwZSFlqD%2FL%2FZ581EUxBQp0Lq1Q%3D" alt="compiler-remote-comp" loading="lazy"/></p>
<p>åˆ°è¿™é‡Œï¼ŒèƒŒæ™¯é“ºå«å°±ç»“æŸäº†ã€‚</p>
<h2 data-id="heading-2">å¼€å‘æ€æ•´ä½“æ¶æ„è®¾è®¡</h2>
<p>åœ¨å¼€å‘é˜¶æ®µï¼Œæˆ‘é€‰æ‹© <strong>Rsbuild</strong> ä½œä¸ºæ„å»ºæ ¸å¿ƒï¼Œæ•´ä½“æ€è·¯å¤§è‡´å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>ç»´æŠ¤ä¸€ä¸ªæ¨¡æ¿å·¥ç¨‹ï¼ˆtemplateï¼‰</strong>
ç”¨äºæå‰çº¦å®šå¥½ç»„ä»¶å¼€å‘æ‰€éœ€çš„åŸºç¡€é…ç½®ã€‚</li>
<li><strong>ç¼–å†™ Rsbuild æ’ä»¶</strong>
<ul>
<li>æ’ä»¶ä¼šç»“åˆç”¨æˆ·çš„ <code>API Key</code> å’Œ <code>Project ID</code></li>
<li>åœ¨æœ¬åœ°å¼€å‘é˜¶æ®µï¼Œé€šè¿‡ HMR / WebSocket å°†ç»„ä»¶çš„æœ€æ–°ç¼–è¯‘ç»“æœæ¨é€åˆ°å¹³å°é¢æ¿</li>
<li>åœ¨ç”Ÿäº§é˜¶æ®µï¼Œåˆ™è´Ÿè´£å°†æºç å’Œæ„å»ºäº§ç‰©ä¸Šä¼ åˆ° OSS</li>
</ul>
</li>
<li><strong>æ¸²æŸ“å™¨ï¼ˆä½ä»£ç æ ¸å¿ƒï¼‰</strong>
<ul>
<li>æ¸²æŸ“å™¨å†…éƒ¨ä¼šå›ºå®šä¸€ä¸ª Vue ç‰ˆæœ¬ï¼Œä½œä¸ºæ‰€æœ‰ç»„ä»¶çš„å…¬å…±ä¾èµ–</li>
<li>æ¥æ”¶ç”± Rsbuild ç¼–è¯‘åçš„ JS æ¨¡å—</li>
<li>å†é€šè¿‡ <code>defineAsyncComponent</code> åŠ¨æ€æ³¨å…¥ç»„ä»¶</li>
</ul>
</li>
</ol>
<h3 data-id="heading-3">çº¦å®šä¸çº¦æŸ</h3>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦æå‰å®šä¹‰ä¸€äº›ç»“æ„å’Œè§„èŒƒï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>global.css</code>ï¼šç”¨äºå£°æ˜å…¨å±€æ ·å¼</li>
<li><code>composes/</code>ï¼šç”¨äºå­˜æ”¾å¤šä¸ªè‡ªå®šä¹‰ç»„ä»¶</li>
</ul>
<p>åœ¨ <code>dev</code> æ¨¡å¼å¯åŠ¨åï¼Œæ’ä»¶ä¼šï¼š</p>
<ul>
<li>å¼€å¯ CORS</li>
<li>å‘æ¸²æŸ“å™¨æ¨é€å½“å‰å¯ç”¨çš„ç»„ä»¶åˆ—è¡¨åŠç‰ˆæœ¬å·</li>
<li>æ–‡ä»¶å˜æ›´åé‡æ–°è®¡ç®—ç‰ˆæœ¬ï¼Œå¹¶é€šçŸ¥æ¸²æŸ“å™¨åˆ·æ–°</li>
</ul>
<h3 data-id="heading-4">ä¸¤ä¸ªå…³é”®é™åˆ¶</h3>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„ç‚¹ï¼š</p>
<ol>
<li><strong>æ ·å¼çº¦æŸ</strong>
åœ¨ Vue SFC ä¸­ç¦æ­¢ä¹¦å†™å…¨å±€ <code>style</code>ï¼Œä¸€æ—¦æ£€æµ‹åˆ°ç›´æ¥æŠ¥é”™ï¼Œé˜²æ­¢å‡ºç°éš¾ä»¥å®¡æŸ¥å’Œå›æ»šçš„æ ·å¼æ±¡æŸ“ã€‚</li>
<li><strong>ä¾èµ–å¤„ç†ç­–ç•¥</strong>
åœ¨å¼€å‘é˜¶æ®µï¼Œä»…å°† <code>vue</code> æœ¬èº« external æ‰ã€‚
å…¶ä»–ä¾èµ–ï¼ˆå¦‚ <code>dayjs</code>ã€UI æ¡†æ¶ç­‰ï¼‰ç›´æ¥æ‰“è¿›åŒ…é‡Œã€‚</li>
</ol>
<p>è™½ç„¶è¿™æ ·ä¼šå¯¼è‡´ JS ä½“ç§¯åå¤§ï¼Œä½†è¿™æ˜¯å¼€å‘æ€ï¼Œä¸ºäº†æ•ˆç‡å’Œç¨³å®šæ€§ï¼Œè¿™ä¸ªä»£ä»·æ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ã€‚</p>
<h2 data-id="heading-5">ä¸ºä»€ä¹ˆä¸ç”¨ <code>vue3-sfc-loader</code>ï¼Ÿ</h2>
<p>ä¸€ä¸ªå¸¸è§çš„é—®é¢˜æ˜¯ï¼š
<strong>ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ <code>vue3-sfc-loader</code> åœ¨æµè§ˆå™¨ç«¯åŠ è½½ SFCï¼Ÿ</strong></p>
<p>æ ¸å¿ƒåŸå› åœ¨äºä¾èµ–ç®¡ç†ã€‚</p>
<p><code>vue3-sfc-loader</code> éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ <code>moduleCache</code>ï¼Œè€Œä¸€æ—¦æ¶‰åŠçœŸå®é¡¹ç›®ï¼Œå°±å¿…ç„¶è¦å¼•å…¥å¤§é‡ç¬¬ä¸‰æ–¹åŒ…ã€‚è¿™å°±æ„å‘³ç€ä½ éœ€è¦ç»“åˆ <code>importmap</code> æ¥ç®¡ç†ä¾èµ–å…³ç³»å’Œç‰ˆæœ¬å†²çªã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"importmap"</span>&gt;</span><span class="javascript">
  {
    <span class="hljs-string">"imports"</span>: {
      <span class="hljs-string">"vue"</span>: <span class="hljs-string">"https://play.vuejs.org/vue.runtime.esm-browser.js"</span>,
      <span class="hljs-string">"vue/server-renderer"</span>: <span class="hljs-string">"https://play.vuejs.org/server-renderer.esm-browser.js"</span>
    }
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>è¿™ç§æ–¹å¼åœ¨ Demo åœºæ™¯ä¸‹è¿˜å¯ä»¥æ¥å—ï¼Œä½†åœ¨çœŸå®ä½ä»£ç å¹³å°ä¸­ï¼Œç»´æŠ¤æˆæœ¬ä¼šéå¸¸é«˜ï¼Œå‡ ä¹ä¸å¯æ§ã€‚</p>
<h2 data-id="heading-6">Build é˜¶æ®µï¼šä¸ºæè‡´æ€§èƒ½æœåŠ¡</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
  subgraph Dev[å¼€å‘é˜¶æ®µ]
    IDE --&gt; Rsbuild
    Rsbuild --&gt; Renderer
    Renderer --&gt; Browser
  end

  subgraph Prod[ç”Ÿäº§é˜¶æ®µ]
    Config[JSON / DSL]
    Config --&gt; Monorepo
    Monorepo --&gt; Build
    Build --&gt; OSS
    OSS --&gt; Browser
  end

</code></pre>
<p>ç”Ÿäº§ç¯å¢ƒçš„ç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š<strong>æ€§èƒ½ã€‚</strong></p>
<p>æ•´ä½“æ€è·¯æ˜¯ç»“åˆ <strong>Monorepo</strong>ï¼Œå°†ä½ä»£ç å¹³å°ä¸­çš„é…ç½®è¿˜åŸä¸ºä¸€ä¸ªçœŸå®å¯æ„å»ºçš„å·¥ç¨‹ã€‚</p>
<h3 data-id="heading-7">å·¥ç¨‹è¿˜åŸç­–ç•¥</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
  Root[monorepo]
  Root --&gt; Composes[composes/* ç»„ä»¶åŒ…]
  Root --&gt; Apps[apps/platform]
  Apps --&gt; Pages[é¡µé¢è¿˜åŸ]

</code></pre>
<ul>
<li>æ¯ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ï¼Œéƒ½è¢«æ”¾ç½®åœ¨ <code>components/</code> ç›®å½•ä¸‹ï¼Œä½œä¸º Monorepo çš„å­åŒ…</li>
<li>åœ¨ <code>apps/platform</code> ä¸­ï¼Œæ ¹æ®å¹³å°ç”Ÿæˆçš„ JSON é…ç½®ï¼š
<ul>
<li>è¿˜åŸé¡µé¢ç»“æ„</li>
<li>å°†å¯¹åº”çš„å­åŒ…æ³¨å†Œåˆ° <code>package.json</code> ä¾èµ–ä¸­</li>
</ul>
</li>
</ul>
<p>éšåç›´æ¥æ‰§è¡Œ <code>build</code>ã€‚</p>
<p>ç”±äºä½¿ç”¨çš„æ˜¯åŸºäº Rust çš„æ„å»ºå·¥å…·ï¼ˆå¦‚ Rsbuild / Rspackï¼‰ï¼Œå³ä½¿æ˜¯å…¨é‡æ„å»ºï¼Œè€—æ—¶ä¹ŸåŸºæœ¬æ§åˆ¶åœ¨ <strong>30 ç§’ä»¥å†…</strong>ã€‚</p>
<h3 data-id="heading-8">å¸¦æ¥çš„æ”¶ç›Š</h3>
<ul>
<li><strong>Tree Shaking</strong>ï¼šæœªä½¿ç”¨ä»£ç ä¼šè¢«è‡ªåŠ¨ç§»é™¤</li>
<li><strong>æ›´å°çš„åŒ…ä½“ç§¯</strong></li>
<li><strong>æ›´å¥½çš„ç¼“å­˜å‘½ä¸­ç‡</strong>ï¼šç»“åˆåˆ†åŒ…ç­–ç•¥ï¼Œå¯æœ€å¤§åŒ–åˆ©ç”¨ HTTP ç¼“å­˜</li>
</ul>
<h2 data-id="heading-9">å¤šé¡µé¢ä¸è·¯ç”±åŠ è½½</h2>
<p>å¯¹äºæ”¯æŒå¤šé¡µé¢çš„ä½ä»£ç å¹³å°æ¥è¯´ï¼Œç»“åˆè¿™ç§æ‹†åˆ†æ–¹å¼ï¼Œæ¯ä¸€ä¸ªé¡µé¢æœ¬è´¨ä¸ŠåªåŒ…å«è‡ªå·±çš„ä¸šåŠ¡ä»£ç ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">"/remote-js"</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"https://my-server.com/assets/RemoteComponent.js"</span>),
  },
];
</code></pre>
<p>æµè§ˆå™¨åŸç”Ÿå·²ç»æ”¯æŒé€šè¿‡ <code>import()</code> åŠ è½½è¿œç¨‹ ESM æ¨¡å—ï¼Œåªè¦è¿”å›çš„æ˜¯ä¸€ä¸ª Promiseï¼ŒVue Router å°±å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p>
<blockquote>
<p>å‚è€ƒæ–‡æ¡£ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fguide%2Fadvanced%2Flazy-loading.html" target="_blank" title="https://router.vuejs.org/zh/guide/advanced/lazy-loading.html" ref="nofollow noopener noreferrer">Vue Router è·¯ç”±æ‡’åŠ è½½</a></p>
</blockquote>
<h2 data-id="heading-10">æœ€å</h2>
<p>è¿™å¥—æ–¹æ¡ˆæ›´å¤šæ˜¯ä¸€æ¬¡<strong>æ¶æ„æ€è·¯çš„å»¶å±•</strong>ï¼Œä»¥åŠä¸€äº›å…³é”®è½åœ°ç‚¹çš„æ€»ç»“ã€‚</p>
<p>çœŸæ­£è½åœ°æ—¶ï¼Œä¾ç„¶ä¼šæœ‰å¾ˆå¤šç»†èŠ‚éœ€è¦æ‰“ç£¨ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ²™ç®±ä¸å®‰å…¨éš”ç¦»</li>
<li>ç»„ä»¶ç‰ˆæœ¬ç®¡ç†</li>
<li>å‘å¸ƒä¸å›æ»šç­–ç•¥</li>
</ul>
<p>ä¸è¿‡æ•´ä½“ä¸»çº¿æ˜¯æ¸…æ™°çš„ï¼š</p>
<blockquote>
<p><strong>å¼€å‘æ€ä¸ºä½“éªŒè®©è·¯ï¼Œç”Ÿäº§æ€ä¸ºæ€§èƒ½è®©è·¯ã€‚</strong></p>
</blockquote>
<p>å¦‚æœä½ å¯¹å…¶ä¸­æŸäº›è®¾è®¡æœ‰ä¸åŒçš„æƒ³æ³•ï¼Œæˆ–è€…æœ‰ç±»ä¼¼çš„å®è·µç»éªŒï¼Œä¹Ÿæ¬¢è¿äº¤æµä¸€æ³¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSSåŠ¨ç”»çš„çµåŠ¨ä¹‹å»ï¼šä»ä»£ç åˆ°æƒ…æ„Ÿçš„ç”ŸåŠ¨æ¼”ç»]]></title>    <link>https://juejin.cn/post/7600986495927894057</link>    <guid>https://juejin.cn/post/7600986495927894057</guid>    <pubDate>2026-01-31T09:01:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600986495927894057" data-draft-id="7601034810312605750" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSSåŠ¨ç”»çš„çµåŠ¨ä¹‹å»ï¼šä»ä»£ç åˆ°æƒ…æ„Ÿçš„ç”ŸåŠ¨æ¼”ç»"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2026-01-31T09:01:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Leeå·"/> <meta itemprop="url" content="https://juejin.cn/user/2402874087453658"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSSåŠ¨ç”»çš„çµåŠ¨ä¹‹å»ï¼šä»ä»£ç åˆ°æƒ…æ„Ÿçš„ç”ŸåŠ¨æ¼”ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2402874087453658/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Leeå·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T09:01:35.000Z" title="Sat Jan 31 2026 09:01:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>CSSåŠ¨ç”»çš„çµåŠ¨ä¹‹å»ï¼šä»ä»£ç åˆ°æƒ…æ„Ÿçš„ç”ŸåŠ¨æ¼”ç»</strong></h2>
<p>åœ¨Webå‰ç«¯çš„ä¸–ç•Œé‡Œï¼ŒCSSä¸ä»…ä»…æ˜¯å®šä¹‰é¢œè‰²å’Œå¸ƒå±€çš„å·¥å…·ï¼Œå®ƒæ›´æ˜¯ä¸€é—¨èƒ½å¤Ÿèµ‹äºˆé™æ€å…ƒç´ ç”Ÿå‘½ä¸æƒ…æ„Ÿçš„è‰ºæœ¯ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªåä¸ºâ€œåŒçƒäº²å»â€çš„ç”ŸåŠ¨æ¡ˆä¾‹ï¼Œæ·±å…¥å‰–æå¦‚ä½•åˆ©ç”¨CSSå…³é”®å¸§åŠ¨ç”»ï¼ˆ<code>@keyframes</code>ï¼‰å’Œç²¾ç»†çš„ç±»åè®¾è®¡ï¼Œè®©ä¸¤ä¸ªç®€å•çš„åœ†å½¢åŒ–èº«ä¸ºå«æƒ…è„‰è„‰çš„ç”·å¥³ä¸»è§’ï¼Œä¸Šæ¼”ä¸€åœºæ¸©é¦¨çš„äº’åŠ¨ã€‚</p>
<h3 data-id="heading-1"><strong>ä¸€ã€ åŠ¨ç”»è“å›¾ï¼šæ•´ä½“æ„æ€ä¸HTMLç»“æ„</strong></h3>
<p>ä»»ä½•ç²¾å½©çš„åŠ¨ç”»éƒ½å§‹äºä¸€ä¸ªæ¸…æ™°çš„æ•…äº‹æ¿ã€‚æˆ‘ä»¬çš„æ•…äº‹å¾ˆç®€å•ï¼šç”»é¢ä¸­å¤®ï¼Œä»£è¡¨â€œå¥³ä¸»â€çš„ç™½è‰²åœ†çƒï¼ˆ<code>#l-ball</code>ï¼‰åœ¨åŸåœ°å¾®å¾®é è¿‘åˆè¿œç¦»ï¼Œè€Œä»£è¡¨â€œç”·ä¸»â€çš„åœ†çƒï¼ˆ<code>#r-ball</code>ï¼‰åˆ™ä¼šä¸»åŠ¨â€œäº²å»â€å¥³ä¸»ã€‚</p>
<p><strong>HTMLç»“æ„</strong>ï¼ˆæ–‡æ¡£1ï¼‰ä½“ç°äº†â€œé¢å‘å¯¹è±¡CSSï¼ˆOOCSSï¼‰â€çš„æ€æƒ³ï¼Œè¿™æ˜¯ä»£ç ä¸¥è°¨æ€§çš„åŸºçŸ³ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¥³ä¸» --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ball"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"l-ball"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç”·ä¸» --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ball"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"r-ball"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>è®¾è®¡è§£æï¼š</strong></p>
<ul>
<li><strong>å®¹å™¨å±…ä¸­</strong>ï¼š<code>.container</code>ä½¿ç”¨äº†ç»å…¸çš„â€œç»å¯¹å®šä½ + <code>transform: translate</code>â€æ–¹æ³•å®ç°æ°´å¹³å‚ç›´å±…ä¸­ï¼Œè¿™æ˜¯ä¸€ç§ä¸å…ƒç´ å°ºå¯¸æ— å…³çš„ä¼˜é›…å±…ä¸­æ–¹æ¡ˆã€‚</li>
<li><strong>ç±»åå¤ç”¨</strong>ï¼šä¸¤ä¸ªçƒéƒ½ä½¿ç”¨äº† <code>.ball</code>åŸºç±»ï¼Œå®šä¹‰äº†å®ƒä»¬å…±æœ‰çš„æ ·å¼ï¼šå°ºå¯¸ã€åœ†å½¢è¾¹æ¡†ã€ç™½è‰²èƒŒæ™¯ç­‰ã€‚è¿™éµå¾ªäº†â€œä¸è¦é‡å¤è‡ªå·±ï¼ˆDRYï¼‰â€åŸåˆ™ï¼Œé¿å…äº†ä»£ç å†—ä½™ã€‚</li>
<li><strong>IDä¸è§’è‰²</strong>ï¼šé€šè¿‡ <code>#l-ball</code>å’Œ <code>#r-ball</code>è¿™ä¸¤ä¸ªIDï¼Œæˆ‘ä»¬ä¸ºä¸¤ä¸ªè§’è‰²èµ‹äºˆäº†ç‹¬ç«‹çš„â€œèº«ä»½â€ï¼Œä»¥ä¾¿åç»­ä¸ºå®ƒä»¬å®šåˆ¶ä¸åŒçš„åŠ¨ç”»è¡Œä¸ºã€‚</li>
</ul>
<h3 data-id="heading-2"><strong>äºŒã€ è§’è‰²å¡‘é€ ï¼šé¢ç›¸ä¸æƒ…ç»ªçš„CSSå®ç°</strong></h3>
<p>è§’è‰²çš„â€œé¢éƒ¨â€ç»†èŠ‚ï¼ˆçœ¼ç›ã€å˜´å·´ã€è…®çº¢ï¼‰æ˜¯ä¼ é€’æƒ…ç»ªçš„å…³é”®ã€‚è¿™é‡Œå¤§é‡è¿ç”¨äº†CSSä¼ªå…ƒç´ å’Œâ€œå¤šæ€â€ç±»åã€‚</p>
<p><strong>1. é¢éƒ¨åŸºç±»ä¸â€œè…®çº¢â€ç‰¹æ•ˆ</strong></p>
<p><code>.face</code>ç±»æ˜¯æ‰€æœ‰é¢éƒ¨å…ƒç´ çš„å®šä½ä¸Šä¸‹æ–‡ã€‚å…¶æœ€å·§å¦™çš„è®¾è®¡åœ¨äºä½¿ç”¨ <code>::before</code>å’Œ <code>::after</code>ä¼ªå…ƒç´ æ¥åˆ›å»ºè…®çº¢ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.face</span><span class="hljs-selector-pseudo">::after</span>, <span class="hljs-selector-class">.face</span><span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>; <span class="hljs-comment">/* å¿…é¡»å­˜åœ¨ */</span>
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">18px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#badc58</span>; <span class="hljs-comment">/* è…®çº¢é¢œè‰² */</span>
    <span class="hljs-attribute">top</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
}
</code></pre>
<ul>
<li><strong>ä¸ºä»€ä¹ˆç”¨ä¼ªå…ƒç´ ï¼Ÿ</strong> â€‹ è…®çº¢æ˜¯çº¯ç²¹çš„è£…é¥°æ€§å†…å®¹ï¼Œä¸åº”æ±¡æŸ“HTMLç»“æ„ã€‚ä¼ªå…ƒç´ å®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½¿å¾—HTMLä¿æŒç®€æ´ã€‚</li>
<li><strong>å®šä½</strong>ï¼šé€šè¿‡ <code>right: -8px</code>å’Œ <code>left: -5px</code>å°†ä¸¤ä¸ªè…®çº¢å®šä½åœ¨é¢éƒ¨å…ƒç´ ä¹‹å¤–ï¼Œæ¨¡æ‹Ÿå‡ºçƒä½“ä¸Šçš„çº¢æ™•ã€‚</li>
</ul>
<p><strong>2. çœ¼ç›ä¸å˜´å·´çš„â€œå¤šæ€â€</strong></p>
<p>çœ¼ç›ï¼ˆ<code>.eye</code>ï¼‰é€šè¿‡è¾¹æ¡†ï¼ˆ<code>border-bottom</code>ï¼‰å·§å¦™åœ°ç”»å‡ºäº†ä¸‹åŠåœ†ï¼Œè¥é€ å‡ºå¯çˆ±çš„æ„Ÿè§‰ã€‚è€Œç”·ä¸»çš„çœ¼ç›éœ€è¦è¡¨ç°å‡ºä¸å¥³ä¸»ä¸åŒçš„ç¥æ€ï¼ˆæ¯”å¦‚æŒ‘çœ‰ï¼‰ï¼Œè¿™é‡Œé€šè¿‡â€œå¤šæ€â€ç±»å <code>.eye-r-p</code>æ¥å®ç°ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.eye</span> {
    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">5px</span> solid; <span class="hljs-comment">/* é»˜è®¤å‘ä¸‹çœ‹ */</span>
}
<span class="hljs-selector-class">.eye-r-p</span> {
    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">5px</span> solid; <span class="hljs-comment">/* æ”¹ä¸ºå‘ä¸Šçœ‹ */</span>
    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">0px</span> solid;
}
</code></pre>
<p><strong>è®¾è®¡è§£æ</strong>ï¼š<code>.eye</code>æ˜¯åŸºç±»ï¼Œå®šä¹‰äº†çœ¼ç›çš„åŸºæœ¬å½¢çŠ¶ã€‚<code>.eye-r-p</code>æ˜¯ä¸€ä¸ªä¿®é¥°ç±»ï¼Œé€šè¿‡è¦†ç›–è¾¹æ¡†æ ·å¼ï¼Œæ”¹å˜äº†çœ¼ç›çš„æ–¹å‘ã€‚è¿™ç§è®¾è®¡ä½¿å¾—æˆ‘ä»¬åªéœ€åœ¨HTMLä¸­ä¸ºç”·ä¸»çš„çœ¼ç›æ·»åŠ è¿™ä¸ªç±»ï¼Œå°±èƒ½è½»æ¾æ”¹å˜å…¶ç¥æ€ï¼Œè¿™æ­£æ˜¯â€œå¤šæ€â€çš„å¨åŠ›ã€‚</p>
<h3 data-id="heading-3"><strong>ä¸‰ã€ ç”Ÿå‘½æ³¨å…¥ï¼šæ ¸å¿ƒåŠ¨ç”»çš„æ—¶åºä¸åä½œé€»è¾‘</strong></h3>
<p>æ•´ä¸ªåŠ¨ç”»çš„ç²¾é«“åœ¨äºå››ä¸ªæ ¸å¿ƒåŠ¨ç”»çš„ç²¾å¯†é…åˆï¼Œå®ƒä»¬å…±äº«ä¸€ä¸ª4ç§’ï¼ˆ<code>4s</code>ï¼‰çš„å‘¨æœŸå¹¶æ— é™å¾ªç¯ï¼ˆ<code>infinite</code>ï¼‰ï¼Œä½†å„è‡ªçš„èŠ‚å¥ï¼ˆå…³é”®å¸§ç™¾åˆ†æ¯”ï¼‰ä¸åŒã€‚</p>
<p><strong>1. å¥³ä¸»çš„çŸœæŒï¼šé è¿‘ä¸åœç•™ï¼ˆ<code>#l-ball</code>ä¸ <code>.face-l</code>ï¼‰</strong></p>
<ul>
<li>
<p><strong>èº«ä½“åŠ¨ç”» (<code>#l-ball</code>- <code>close</code>)</strong> ï¼š</p>
<ul>
<li><code>0%-20%</code>ï¼š ä»åŸç‚¹å¹³æ»‘å‘å³ç§»åŠ¨20pxï¼ˆå‘ç”·ä¸»é è¿‘ï¼‰ã€‚</li>
<li><code>20%-35%</code>ï¼š <strong>åœ¨å³ä¾§åœç•™</strong>ã€‚è¿™ä¸ªåœç•™è‡³å…³é‡è¦ï¼Œå®ƒä¸ºç”·ä¸»çš„äº²å»åŠ¨ä½œåˆ›é€ äº†â€œç›®æ ‡â€å’Œâ€œæ—¶æœºâ€ã€‚</li>
<li><code>35%-55%</code>ï¼š å¹³æ»‘è¿”å›åŸç‚¹ã€‚</li>
<li><code>55%-100%</code>ï¼š åœ¨åŸç‚¹é•¿æ—¶é—´åœç•™ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸã€‚</li>
</ul>
</li>
<li>
<p><strong>é¢éƒ¨åŠ¨ç”» (<code>.face-l</code>- <code>face</code>)</strong> ï¼š</p>
<p>è¿™ä¸ªåŠ¨ç”»è®©å¥³ä¸»çš„å¤´éƒ¨åœ¨ç§»åŠ¨æ—¶ä¼´æœ‰è½»å¾®çš„è½¬åŠ¨ï¼ˆ<code>rotate</code>ï¼‰ï¼Œå¢åŠ äº†æ‹ŸäººåŒ–çš„ç”ŸåŠ¨æ„Ÿã€‚å…¶å…³é”®å¸§ä¸èº«ä½“åŠ¨ç”»åŒæ­¥ï¼Œåœ¨<code>20%</code>å’Œ<code>35%</code>ï¼ˆå³èº«ä½“åœç•™æ—¶ï¼‰è§¦å‘å¤´éƒ¨å¾®è°ƒï¼Œä»¿ä½›åœ¨å®³ç¾åœ°è°ƒæ•´å§¿æ€ã€‚</p>
</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong> â€‹ å°†èº«ä½“å’Œé¢éƒ¨çš„åŠ¨ç”»åˆ†ç¦»ï¼Œç¬¦åˆâ€œå•ä¸€èŒè´£åŸåˆ™â€ã€‚<code>#l-ball</code>æ§åˆ¶å®è§‚ä½ç§»ï¼Œ<code>.face-l</code>æ§åˆ¶ç»†å¾®è¡¨æƒ…ã€‚ä¸¤è€…ååŒï¼Œå…±åŒå¡‘é€ å‡ºä¸€ä¸ªå®Œæ•´ã€ç”ŸåŠ¨çš„è§’è‰²ã€‚</p>
<p><strong>2. ç”·ä¸»çš„ä¸»åŠ¨ï¼šäº²å»çš„çˆ†å‘ï¼ˆ<code>#r-ball</code>åŠå…¶ç»„ä»¶ï¼‰</strong></p>
<p>ç”·ä¸»çš„åŠ¨ç”»æ˜¯æ•…äº‹çš„é«˜æ½®ï¼Œç”±ä¸‰ä¸ªéƒ¨åˆ†ç²¾å¯†åä½œå®Œæˆï¼š</p>
<ul>
<li>
<p><strong>èº«ä½“å†²åˆº (<code>#r-ball</code>- <code>kiss</code>)</strong> ï¼š</p>
<ul>
<li><code>40%-50%</code>ï¼š åœ¨å¥³ä¸»åœç•™çš„æœŸé—´ï¼ˆ<code>20%-35%</code>ä¹‹åï¼‰ï¼Œç”·ä¸»è¿…é€Ÿå‘å³ç§»åŠ¨å¹¶æ—‹è½¬ï¼Œåšå‡ºâ€œæ¢å¤´äº²å»â€çš„åŠ¨ä½œã€‚</li>
<li><code>50%-60%</code>ï¼š å¿«é€Ÿå‘å·¦å›å¼¹ï¼ˆ<code>translate(-33px)</code>ï¼‰ï¼Œè¿™ä¸ªå›å¼¹çš„å¹…åº¦ç”šè‡³è¶…è¿‡äº†åˆå§‹ä½ç½®ï¼Œæ¨¡æ‹Ÿå‡ºäº²å»çš„å†²å‡»åŠ›ã€‚</li>
<li><code>67%-77%</code>ï¼š ç¼“æ…¢ç§»å›åŸç‚¹ã€‚</li>
</ul>
</li>
<li>
<p><strong>å˜´å·´æ¶ˆå¤±ä¸çˆ±å¿ƒå‡ºç°ï¼ˆ<code>.mouth-r</code>å’Œ <code>.kiss-m</code>ï¼‰</strong> ï¼š</p>
<p>è¿™æ˜¯æœ€ç²¾å½©çš„éƒ¨åˆ†ï¼Œé€šè¿‡<strong>é€æ˜åº¦ï¼ˆ<code>opacity</code>ï¼‰</strong> â€‹ çš„åˆ‡æ¢å®ç°â€œå˜è„¸â€ã€‚</p>
<ul>
<li><strong>å˜´å·´ (.mouth-r - <code>mouth-m</code>)</strong> ï¼š åœ¨ <code>55%</code>å…³é”®å¸§ç¬é—´å˜ä¸ºé€æ˜ï¼ˆ<code>opacity: 0</code>ï¼‰ï¼Œåœ¨ <code>66%</code>å…³é”®å¸§ç¬é—´æ¢å¤ã€‚è¿™æ„å‘³ç€åœ¨äº²å»åŠ¨ä½œå‘ç”Ÿæ—¶ï¼Œç”·ä¸»çš„å˜´å·´â€œæ¶ˆå¤±â€äº†ã€‚</li>
<li><strong>çˆ±å¿ƒ (.kiss-m - <code>kiss-m</code>)</strong> ï¼š å®ƒçš„æ˜¾ç¤ºï¼ˆ<code>opacity: 1</code>ï¼‰æ—¶é—´è¢«ç²¾ç¡®åœ°è®¾ç½®åœ¨ <code>66%</code>ï¼Œä»…æŒç»­0.1%çš„æ—¶é—´ï¼ˆçº¦0.004ç§’ï¼‰ã€‚åŒæ—¶ï¼Œå˜´å·´åœ¨ <code>66%</code>æ¢å¤ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong> â€‹ è¿™åˆ›é€ äº†ä¸€ä¸ªè§†è§‰é­”æœ¯ï¼šåœ¨ <code>55%</code>åˆ° <code>66%</code>ä¹‹é—´ï¼Œå˜´å·´æ¶ˆå¤±ï¼Œçˆ±å¿ƒå‡ºç°ã€‚è™½ç„¶çˆ±å¿ƒåªé—ªç°äº†ä¸€ç¬é—´ï¼Œä½†ç”±äºäººçœ¼çš„â€œè§†è§‰æš‚ç•™â€æ•ˆåº”ï¼Œæˆ‘ä»¬ä¼šæ„Ÿè§‰åœ¨äº²å»çš„åˆ¹é‚£ï¼Œç”·ä¸»çš„å˜´å·´å˜æˆäº†ä¸€é¢—çˆ±å¿ƒã€‚è¿™ç§é€šè¿‡æçŸ­æ—¶é—´æ˜¾ç¤ºæ›¿ä»£å…ƒç´ æ¥åˆ¶é€ ç‰¹æ•ˆçš„æ‰‹æ³•ï¼Œåœ¨CSSåŠ¨ç”»ä¸­éå¸¸ç»å…¸ä¸”é«˜æ•ˆã€‚</p>
<h3 data-id="heading-4"><strong>å››ã€ æ·±åº¦ä¼˜åŒ–ï¼šZè½´ä¸æ—¶åºçš„ä¸¥è°¨æ€§</strong></h3>
<ol>
<li><strong>å±‚çº§æ§åˆ¶ (Z-index)</strong> ï¼š ä¸º <code>#l-ball</code>è®¾ç½®äº†è¾ƒå¤§çš„ <code>z-index: 100</code>ï¼Œç¡®ä¿å¥³ä¸»å§‹ç»ˆåœ¨å‰æ™¯ã€‚è¿™æ ·åœ¨ç”·ä¸»äº²å»å›å¼¹æ—¶ï¼Œä¸ä¼šå‡ºç°ä¸åˆç†çš„é‡å ç©¿å¸®ï¼Œä¿è¯äº†è§†è§‰é€»è¾‘çš„æ­£ç¡®ã€‚</li>
<li><strong>æ—¶åºçš„ä¸¥è°¨æ€§</strong>ï¼š æ‰€æœ‰åŠ¨ç”»çš„ <code>animation-timing-function</code>éƒ½è®¾ç½®ä¸º <code>ease</code>ï¼Œè¿™ä½¿å¾—åŠ¨ä½œçš„å¼€å§‹å’Œç»“æŸæ›´å¹³æ»‘è‡ªç„¶ï¼Œç¬¦åˆçœŸå®ç‰©ä½“çš„è¿åŠ¨è§„å¾‹ã€‚å…³é”®å¸§ç™¾åˆ†æ¯”çš„è®¾å®šéœ€è¦åå¤è°ƒè¯•ï¼Œä»¥è¾¾åˆ°åŠ¨ä½œé—´æ— ç¼è¡”æ¥çš„æ•ˆæœã€‚</li>
</ol>
<h3 data-id="heading-5"><strong>æ€»ç»“ä¸å¤ä¹ æŒ‡å—</strong></h3>
<p>è¿™ä¸ªâ€œåŒçƒäº²å»â€åŠ¨ç”»æ˜¯ä¸€ä¸ªç»ä½³çš„CSSåŠ¨ç”»ç»¼åˆç»ƒä¹ æ¡ˆä¾‹ã€‚è¦å¤ä¹ æ­¤é¡¹ç›®ï¼Œæ‚¨å¯ä»¥éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>
<p><strong>é‡æ„HTML</strong>ï¼š æ ¹æ®æ–‡æ¡£1ï¼Œä»…å‡­è®°å¿†å†™å‡ºç»“æ„æ¸…æ™°çš„HTMLï¼Œæ³¨æ„åŸºç±»ä¸ä¿®é¥°ç±»çš„åº”ç”¨ã€‚</p>
</li>
<li>
<p><strong>è¿˜åŸé™æ€æ ·å¼</strong>ï¼š å…ˆå®ç°ä¸¤ä¸ªçƒçš„é™æ€æ ·å¼ï¼ŒåŒ…æ‹¬å±…ä¸­ã€åŸºæœ¬å½¢çŠ¶ã€é¢éƒ¨äº”å®˜ã€‚é‡ç‚¹ç»ƒä¹ ä¼ªå…ƒç´ ï¼ˆè…®çº¢ï¼‰å’Œè¾¹æ¡†ç”»å›¾æ³•ï¼ˆçœ¼ç›ï¼‰ã€‚</p>
</li>
<li>
<p><strong>åˆ†æ­¥æ·»åŠ åŠ¨ç”»</strong>ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€æ­¥</strong>ï¼šå®ç°å¥³ä¸»çƒçš„æ°´å¹³ç§»åŠ¨åŠ¨ç”»ï¼ˆ<code>close</code>ï¼‰ã€‚</li>
<li><strong>ç¬¬äºŒæ­¥</strong>ï¼šä¸ºå¥³ä¸»æ·»åŠ é¢éƒ¨å¾®åŠ¨ç”»ï¼ˆ<code>face</code>ï¼‰ï¼Œæ³¨æ„ä¸èº«ä½“åŠ¨ç”»çš„åŒæ­¥ã€‚</li>
<li><strong>ç¬¬ä¸‰æ­¥</strong>ï¼šå®ç°ç”·ä¸»çƒçš„å†²åˆºä¸å›å¼¹åŠ¨ç”»ï¼ˆ<code>kiss</code>ï¼‰ã€‚</li>
<li><strong>ç¬¬å››æ­¥ï¼ˆå…³é”®ï¼‰</strong> ï¼šå®ç°å˜´å·´å’Œçˆ±å¿ƒçš„é€æ˜åº¦åˆ‡æ¢åŠ¨ç”»ï¼Œä»”ç»†ä½“ä¼š <code>mouth-m</code>å’Œ <code>kiss-m</code>ä¸­å…³é”®å¸§ç™¾åˆ†æ¯”çš„è®¾è®¡æ„å›¾ï¼Œç†è§£â€œè§†è§‰æš‚ç•™â€ç‰¹æ•ˆçš„å®ç°åŸç†ã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡è¿™æ ·çš„åˆ†è§£ä¸é‡æ„ï¼Œæ‚¨ä¸ä»…èƒ½ç‰¢å›ºæŒæ¡è¿™ä¸ªåŠ¨ç”»çš„åˆ¶ä½œè¿‡ç¨‹ï¼Œæ›´èƒ½æ·±åˆ»ç†è§£CSSåŠ¨ç”»è®¾è®¡çš„æ ¸å¿ƒæ€æƒ³ï¼š<strong>å°†å¤æ‚åŠ¨ä½œæ‹†è§£ä¸ºç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„å±æ€§å˜åŒ–ï¼Œå¹¶é€šè¿‡ç²¾ç¡®çš„æ—¶åºæ§åˆ¶å°†å®ƒä»¬ç»„åˆèµ·æ¥ï¼Œæœ€ç»ˆèµ‹äºˆå…ƒç´ ç”Ÿå‘½ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android é€‚é…å™¨æ¨¡å¼æµ…æ]]></title>    <link>https://juejin.cn/post/7601077764423696434</link>    <guid>https://juejin.cn/post/7601077764423696434</guid>    <pubDate>2026-01-31T08:31:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601077764423696434" data-draft-id="7601077764423499826" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android é€‚é…å™¨æ¨¡å¼æµ…æ"/> <meta itemprop="keywords" content="Android,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2026-01-31T08:31:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yen"/> <meta itemprop="url" content="https://juejin.cn/user/4037062426633214"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android é€‚é…å™¨æ¨¡å¼æµ…æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4037062426633214/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Yen
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T08:31:07.000Z" title="Sat Jan 31 2026 08:31:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€åŸºæœ¬æ¦‚å¿µ</h2>
<h3 data-id="heading-1">å®šä¹‰</h3>
<p><strong>é€‚é…å™¨æ¨¡å¼</strong>å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒæ€æƒ³</h3>
<ol>
<li><strong>æ¥å£è½¬æ¢</strong>ï¼šå°†ä¸€ä¸ªæ¥å£è½¬æ¢ä¸ºå¦ä¸€ä¸ªå®¢æˆ·ç«¯æœŸæœ›çš„æ¥å£</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šè®©ä¸å…¼å®¹çš„æ¥å£èƒ½å¤ŸååŒå·¥ä½œ</li>
<li><strong>åŒ…è£…å™¨</strong>ï¼šé€‚é…å™¨æœ¬è´¨æ˜¯ä¸€ä¸ªåŒ…è£…å™¨</li>
</ol>
<h3 data-id="heading-3">ä¸¤ç§å®ç°æ–¹å¼</h3>
<ul>
<li><strong>ç±»é€‚é…å™¨</strong>ï¼šé€šè¿‡ç»§æ‰¿å®ç°ï¼ˆKotlin/Javaä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œé™åˆ¶è¾ƒå¤šï¼‰</li>
<li><strong>å¯¹è±¡é€‚é…å™¨</strong>ï¼šé€šè¿‡ç»„åˆå®ç°ï¼ˆæ¨èä½¿ç”¨ï¼‰</li>
</ul>
<h2 data-id="heading-4">äºŒã€åŸºæœ¬ç»“æ„</h2>
<h3 data-id="heading-5">ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. Target (ç›®æ ‡æ¥å£) - å®¢æˆ·ç«¯æœŸæœ›çš„æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">MediaPlayer</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">play</span><span class="hljs-params">(audioType: <span class="hljs-type">String</span>, fileName: <span class="hljs-type">String</span>)</span></span>
}

<span class="hljs-comment">// 2. Adaptee (é€‚é…è€…) - éœ€è¦è¢«é€‚é…çš„ç°æœ‰ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedMediaPlayer</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">playVlc</span><span class="hljs-params">(fileName: <span class="hljs-type">String</span>)</span></span> {
        println(<span class="hljs-string">"æ’­æ”¾VLCæ–‡ä»¶: <span class="hljs-variable">$fileName</span>"</span>)
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">playMp4</span><span class="hljs-params">(fileName: <span class="hljs-type">String</span>)</span></span> {
        println(<span class="hljs-string">"æ’­æ”¾MP4æ–‡ä»¶: <span class="hljs-variable">$fileName</span>"</span>)
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">playAvi</span><span class="hljs-params">(fileName: <span class="hljs-type">String</span>)</span></span> {
        println(<span class="hljs-string">"æ’­æ”¾AVIæ–‡ä»¶: <span class="hljs-variable">$fileName</span>"</span>)
    }
}

<span class="hljs-comment">// 3. Adapter (é€‚é…å™¨) - å°†Adapteeé€‚é…åˆ°Target</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MediaAdapter</span> : <span class="hljs-type">MediaPlayer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> advancedPlayer = AdvancedMediaPlayer()
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">play</span><span class="hljs-params">(audioType: <span class="hljs-type">String</span>, fileName: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">when</span> (audioType.toLowerCase()) {
            <span class="hljs-string">"vlc"</span> -&gt; advancedPlayer.playVlc(fileName)
            <span class="hljs-string">"mp4"</span> -&gt; advancedPlayer.playMp4(fileName)
            <span class="hljs-string">"avi"</span> -&gt; advancedPlayer.playAvi(fileName)
            <span class="hljs-keyword">else</span> -&gt; println(<span class="hljs-string">"ä¸æ”¯æŒçš„æ ¼å¼: <span class="hljs-variable">$audioType</span>"</span>)
        }
    }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯ä½¿ç”¨</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> player: MediaPlayer = MediaAdapter()
    player.play(<span class="hljs-string">"mp4"</span>, <span class="hljs-string">"movie.mp4"</span>)
    player.play(<span class="hljs-string">"vlc"</span>, <span class="hljs-string">"music.vlc"</span>)
    player.play(<span class="hljs-string">"avi"</span>, <span class="hljs-string">"video.avi"</span>)
    player.play(<span class="hljs-string">"mp3"</span>, <span class="hljs-string">"song.mp3"</span>) <span class="hljs-comment">// ä¸æ”¯æŒçš„æ ¼å¼</span>
}
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€Androidä¸­çš„é€‚é…å™¨æ¨¡å¼</h2>
<h3 data-id="heading-7">1. RecyclerView.Adapter - æœ€ç»å…¸çš„é€‚é…å™¨æ¨¡å¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ•°æ®æ¨¡å‹</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(
    <span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Long</span>,
    <span class="hljs-keyword">val</span> name: String,
    <span class="hljs-keyword">val</span> email: String,
    <span class="hljs-keyword">val</span> avatarUrl: String
)

<span class="hljs-comment">// ViewHolder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewHolder</span>(view: View) : RecyclerView.ViewHolder(view) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> nameTextView: TextView = view.findViewById(R.id.tv_name)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> emailTextView: TextView = view.findViewById(R.id.tv_email)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> avatarImageView: ImageView = view.findViewById(R.id.iv_avatar)
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bind</span><span class="hljs-params">(user: <span class="hljs-type">User</span>)</span></span> {
        nameTextView.text = user.name
        emailTextView.text = user.email
        Glide.with(avatarImageView.context)
            .load(user.avatarUrl)
            .placeholder(R.drawable.avatar_placeholder)
            .into(avatarImageView)
    }
}

<span class="hljs-comment">// é€‚é…å™¨ - å°†List&lt;User&gt;é€‚é…åˆ°RecyclerView</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserAdapter</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> users: List&lt;User&gt;) : 
    RecyclerView.Adapter&lt;UserViewHolder&gt;() {
    
    <span class="hljs-comment">// å°†æ•°æ®é¡¹è½¬æ¢ä¸ºView</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: UserViewHolder {
        <span class="hljs-keyword">val</span> view = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_user, parent, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> UserViewHolder(view)
    }
    
    <span class="hljs-comment">// å°†æ•°æ®ç»‘å®šåˆ°View</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">UserViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> user = users[position]
        holder.bind(user)
    }
    
    <span class="hljs-comment">// è¿”å›æ•°æ®é¡¹æ•°é‡</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = users.size
    
    <span class="hljs-comment">// å¯é€‰ï¼šå¤šç±»å‹è§†å›¾é€‚é…</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemViewType</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (users[position].id % <span class="hljs-number">2</span> == <span class="hljs-number">0L</span>) VIEW_TYPE_EVEN <span class="hljs-keyword">else</span> VIEW_TYPE_ODD
    }
    
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> VIEW_TYPE_EVEN = <span class="hljs-number">0</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> VIEW_TYPE_ODD = <span class="hljs-number">1</span>
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">val</span> users = listOf(
    User(<span class="hljs-number">1</span>, <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"zhangsan@example.com"</span>, <span class="hljs-string">"https://example.com/avatar1.jpg"</span>),
    User(<span class="hljs-number">2</span>, <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"lisi@example.com"</span>, <span class="hljs-string">"https://example.com/avatar2.jpg"</span>)
)

<span class="hljs-keyword">val</span> adapter = UserAdapter(users)
recyclerView.adapter = adapter
recyclerView.layoutManager = LinearLayoutManager(context)
</code></pre>
<h3 data-id="heading-8">2. PagerAdapter (ViewPageré€‚é…å™¨)</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ImagePagerAdapter</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> imageUrls: List&lt;String&gt;
) : PagerAdapter() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">instantiateItem</span><span class="hljs-params">(container: <span class="hljs-type">ViewGroup</span>, position: <span class="hljs-type">Int</span>)</span></span>: Any {
        <span class="hljs-keyword">val</span> imageView = ImageView(context).apply {
            layoutParams = ViewGroup.LayoutParams(
                ViewGroup.LayoutParams.MATCH_PARENT,
                ViewGroup.LayoutParams.MATCH_PARENT
            )
            scaleType = ImageView.ScaleType.CENTER_CROP
        }
        
        Glide.with(context)
            .load(imageUrls[position])
            .into(imageView)
        
        container.addView(imageView)
        <span class="hljs-keyword">return</span> imageView
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">destroyItem</span><span class="hljs-params">(container: <span class="hljs-type">ViewGroup</span>, position: <span class="hljs-type">Int</span>, `<span class="hljs-keyword">object</span>`: <span class="hljs-type">Any</span>)</span></span> {
        container.removeView(`<span class="hljs-keyword">object</span>` <span class="hljs-keyword">as</span> View)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = imageUrls.size
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isViewFromObject</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, `<span class="hljs-keyword">object</span>`: <span class="hljs-type">Any</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">return</span> view == `<span class="hljs-keyword">object</span>`
    }
}
</code></pre>
<h2 data-id="heading-9">å››ã€é€‚é…å™¨æ¨¡å¼çš„å˜ä½“</h2>
<h3 data-id="heading-10">1. åŒå‘é€‚é…å™¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">EuropeanPlug</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">useTwoPins</span><span class="hljs-params">()</span></span>
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ChineseSocket</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">acceptThreePins</span><span class="hljs-params">()</span></span>
}

<span class="hljs-comment">// æ¬§æ´²æ’å¤´å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EuropeanPlugImpl</span> : <span class="hljs-type">EuropeanPlug</span> {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">useTwoPins</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"ä½¿ç”¨ä¸¤è„šæ’å¤´"</span>)
    }
}

<span class="hljs-comment">// ä¸­å›½æ’åº§å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChineseSocketImpl</span> : <span class="hljs-type">ChineseSocket</span> {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">acceptThreePins</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"æ¥å—ä¸‰è„šæ’å¤´"</span>)
    }
}

<span class="hljs-comment">// åŒå‘é€‚é…å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PlugSocketAdapter</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> plug: EuropeanPlug,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> socket: ChineseSocket
) : EuropeanPlug <span class="hljs-keyword">by</span> plug, ChineseSocket <span class="hljs-keyword">by</span> socket {
    
    <span class="hljs-comment">// æ·»åŠ é¢å¤–çš„è½¬æ¢é€»è¾‘</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">connect</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"é€‚é…å™¨å¼€å§‹å·¥ä½œ..."</span>)
        useTwoPins()
        println(<span class="hljs-string">"è½¬æ¢ä¸ºä¸‰è„šæ¥å£..."</span>)
        acceptThreePins()
        println(<span class="hljs-string">"è¿æ¥æˆåŠŸï¼"</span>)
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">val</span> plug = EuropeanPlugImpl()
<span class="hljs-keyword">val</span> socket = ChineseSocketImpl()
<span class="hljs-keyword">val</span> adapter = PlugSocketAdapter(plug, socket)
adapter.connect()
</code></pre>
<h3 data-id="heading-11">2. ç±»é€‚é…å™¨ (é€šè¿‡æ¥å£ç»§æ‰¿å®ç°)</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç›®æ ‡æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">NewSystem</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">newRequest</span><span class="hljs-params">()</span></span>: String
}

<span class="hljs-comment">// è¢«é€‚é…çš„ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OldSystem</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">oldRequest</span><span class="hljs-params">()</span></span>: String {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ¥è‡ªæ—§ç³»ç»Ÿçš„æ•°æ®"</span>
    }
}

<span class="hljs-comment">// ç±»é€‚é…å™¨ï¼ˆKotlinä¸­é€šè¿‡å§”æ‰˜å®ç°ç±»ä¼¼æ•ˆæœï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassAdapter</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> oldSystem: OldSystem) : NewSystem {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">newRequest</span><span class="hljs-params">()</span></span>: String {
        <span class="hljs-comment">// è°ƒç”¨æ—§ç³»ç»Ÿçš„æ–¹æ³•å¹¶é€‚é…</span>
        <span class="hljs-keyword">val</span> oldResult = oldSystem.oldRequest()
        <span class="hljs-keyword">return</span> <span class="hljs-string">"é€‚é…åçš„æ•°æ®: <span class="hljs-variable">$oldResult</span>"</span>
    }
}
</code></pre>
<h3 data-id="heading-12">3. é»˜è®¤é€‚é…å™¨ (Adapteræ¥å£çš„ç©ºå®ç°)</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ¥å£æœ‰å¤šä¸ªæ–¹æ³•ï¼Œä½†é€šå¸¸åªç”¨åˆ°å°‘æ•°å‡ ä¸ª</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">OnClickListener</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onClick</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onLongClick</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span>: <span class="hljs-built_in">Boolean</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDoubleClick</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span>
}

<span class="hljs-comment">// é»˜è®¤é€‚é…å™¨ï¼ˆæä¾›ç©ºå®ç°ï¼‰</span>
<span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultOnClickListener</span> : <span class="hljs-type">OnClickListener</span> {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onClick</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span> {
        <span class="hljs-comment">// ç©ºå®ç°</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onLongClick</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-comment">// ç©ºå®ç°</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDoubleClick</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span> {
        <span class="hljs-comment">// ç©ºå®ç°</span>
    }
}

<span class="hljs-comment">// ä½¿ç”¨æ—¶åªéœ€é‡å†™éœ€è¦çš„æ–¹æ³•</span>
button.setOnClickListener(<span class="hljs-keyword">object</span> : DefaultOnClickListener() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onClick</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span> {
        Toast.makeText(view.context, <span class="hljs-string">"ç‚¹å‡»"</span>, Toast.LENGTH_SHORT).show()
    }
})
</code></pre>
<h2 data-id="heading-13">äº”ã€Androidå¼€å‘ä¸­çš„å®é™…åº”ç”¨</h2>
<h3 data-id="heading-14">1. æ•°æ®æºé€‚é…å™¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å°†ä¸åŒæ•°æ®æºé€‚é…ä¸ºç»Ÿä¸€æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">DataSource</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">()</span></span>: List&lt;Any&gt;
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span>
}

<span class="hljs-comment">// æ•°æ®åº“æ•°æ®æº</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseDataSource</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : DataSource {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> databaseHelper = DatabaseHelper(context)
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">()</span></span>: List&lt;Any&gt; {
        <span class="hljs-keyword">return</span> databaseHelper.getAllUsers()
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">return</span> databaseHelper.getUserCount()
    }
}

<span class="hljs-comment">// ç½‘ç»œæ•°æ®æº</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkDataSource</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> apiService: ApiService) : DataSource {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cachedData: List&lt;Any&gt; = emptyList()
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">()</span></span>: List&lt;Any&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> response = apiService.getUsers().execute()
            <span class="hljs-keyword">if</span> (response.isSuccessful) {
                cachedData = response.body() ?: emptyList()
                cachedData
            } <span class="hljs-keyword">else</span> {
                emptyList()
            }
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            emptyList()
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">return</span> cachedData.size
    }
}

<span class="hljs-comment">// æœ¬åœ°æ–‡ä»¶æ•°æ®æº</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FileDataSource</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context, <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> fileName: String) : DataSource {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">()</span></span>: List&lt;Any&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> json = context.assets.<span class="hljs-keyword">open</span>(fileName).bufferedReader().use { it.readText() }
            <span class="hljs-keyword">val</span> type = <span class="hljs-keyword">object</span> : TypeToken&lt;List&lt;User&gt;&gt;() {}.type
            Gson().fromJson(json, type)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            emptyList()
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">return</span> getData().size
    }
}

<span class="hljs-comment">// ç»Ÿä¸€é€‚é…å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UniversalAdapter</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> dataSource: DataSource) : RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: RecyclerView.ViewHolder {
        <span class="hljs-comment">// æ ¹æ®æ•°æ®ç±»å‹åˆ›å»ºä¸åŒçš„ViewHolder</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (viewType) {
            TYPE_USER -&gt; UserViewHolder(inflateView(parent, R.layout.item_user))
            TYPE_PRODUCT -&gt; ProductViewHolder(inflateView(parent, R.layout.item_product))
            <span class="hljs-keyword">else</span> -&gt; <span class="hljs-keyword">throw</span> IllegalArgumentException(<span class="hljs-string">"æœªçŸ¥çš„è§†å›¾ç±»å‹"</span>)
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> item = dataSource.getData()[position]
        <span class="hljs-keyword">when</span> (holder) {
            <span class="hljs-keyword">is</span> UserViewHolder -&gt; holder.bind(item <span class="hljs-keyword">as</span> User)
            <span class="hljs-keyword">is</span> ProductViewHolder -&gt; holder.bind(item <span class="hljs-keyword">as</span> Product)
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = dataSource.getCount()
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemViewType</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">val</span> item = dataSource.getData()[position]
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (item) {
            <span class="hljs-keyword">is</span> User -&gt; TYPE_USER
            <span class="hljs-keyword">is</span> Product -&gt; TYPE_PRODUCT
            <span class="hljs-keyword">else</span> -&gt; TYPE_UNKNOWN
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">inflateView</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, layoutId: <span class="hljs-type">Int</span>)</span></span>: View {
        <span class="hljs-keyword">return</span> LayoutInflater.from(parent.context).inflate(layoutId, parent, <span class="hljs-literal">false</span>)
    }
    
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> TYPE_USER = <span class="hljs-number">0</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> TYPE_PRODUCT = <span class="hljs-number">1</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> TYPE_UNKNOWN = -<span class="hljs-number">1</span>
    }
}
</code></pre>
<h3 data-id="heading-15">2. APIç‰ˆæœ¬é€‚é…å™¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸åŒAPIç‰ˆæœ¬çš„ç›¸æœºåŠŸèƒ½é€‚é…</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">CameraSystem</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">takePhoto</span><span class="hljs-params">()</span></span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recordVideo</span><span class="hljs-params">()</span></span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">switchCamera</span><span class="hljs-params">()</span></span>
}

<span class="hljs-comment">// Android 5.0+ çš„ç›¸æœºå®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ModernCamera</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : CameraSystem {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cameraManager = context.getSystemService(Context.CAMERA_SERVICE) <span class="hljs-keyword">as</span> CameraManager
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">takePhoto</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {
            cameraManager.openCamera(<span class="hljs-string">"0"</span>, <span class="hljs-keyword">object</span> : CameraDevice.StateCallback() {
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onOpened</span><span class="hljs-params">(camera: <span class="hljs-type">CameraDevice</span>)</span></span> {
                    <span class="hljs-comment">// ç°ä»£APIæ‹ç…§é€»è¾‘</span>
                    println(<span class="hljs-string">"ä½¿ç”¨ç°ä»£APIæ‹ç…§"</span>)
                }
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDisconnected</span><span class="hljs-params">(camera: <span class="hljs-type">CameraDevice</span>)</span></span> {}
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onError</span><span class="hljs-params">(camera: <span class="hljs-type">CameraDevice</span>, error: <span class="hljs-type">Int</span>)</span></span> {}
            }, <span class="hljs-literal">null</span>)
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recordVideo</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"ä½¿ç”¨ç°ä»£APIå½•åˆ¶è§†é¢‘"</span>)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">switchCamera</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"ä½¿ç”¨ç°ä»£APIåˆ‡æ¢ç›¸æœº"</span>)
    }
}

<span class="hljs-comment">// Android 5.0 ä»¥ä¸‹çš„ç›¸æœºå®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LegacyCamera</span> : <span class="hljs-type">CameraSystem</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> camera: android.hardware.Camera
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">takePhoto</span><span class="hljs-params">()</span></span> {
        camera = android.hardware.Camera.<span class="hljs-keyword">open</span>()
        <span class="hljs-comment">// ä¼ ç»ŸAPIæ‹ç…§é€»è¾‘</span>
        println(<span class="hljs-string">"ä½¿ç”¨ä¼ ç»ŸAPIæ‹ç…§"</span>)
        camera.release()
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recordVideo</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"ä½¿ç”¨ä¼ ç»ŸAPIå½•åˆ¶è§†é¢‘"</span>)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">switchCamera</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"ä½¿ç”¨ä¼ ç»ŸAPIåˆ‡æ¢ç›¸æœº"</span>)
    }
}

<span class="hljs-comment">// ç›¸æœºé€‚é…å™¨ - æ ¹æ®APIç‰ˆæœ¬é€‰æ‹©å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CameraAdapter</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : CameraSystem {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cameraSystem: CameraSystem <span class="hljs-keyword">by</span> lazy {
        <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {
            ModernCamera(context)
        } <span class="hljs-keyword">else</span> {
            LegacyCamera()
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">takePhoto</span><span class="hljs-params">()</span></span> {
        cameraSystem.takePhoto()
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recordVideo</span><span class="hljs-params">()</span></span> {
        cameraSystem.recordVideo()
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">switchCamera</span><span class="hljs-params">()</span></span> {
        cameraSystem.switchCamera()
    }
}

<span class="hljs-comment">// ä½¿ç”¨ - æ— éœ€å…³å¿ƒAPIç‰ˆæœ¬</span>
<span class="hljs-keyword">val</span> camera = CameraAdapter(context)
camera.takePhoto()
</code></pre>
<h3 data-id="heading-16">3. ç¬¬ä¸‰æ–¹åº“é€‚é…å™¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å›¾ç‰‡åŠ è½½åº“é€‚é…å™¨</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ImageLoader</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, imageView: <span class="hljs-type">ImageView</span>)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, imageView: <span class="hljs-type">ImageView</span>, placeholder: <span class="hljs-type">Int</span>)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, imageView: <span class="hljs-type">ImageView</span>, placeholder: <span class="hljs-type">Int</span>, error: <span class="hljs-type">Int</span>)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">preload</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearCache</span><span class="hljs-params">()</span></span>
}

<span class="hljs-comment">// Glideé€‚é…å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GlideImageLoader</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : ImageLoader {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, imageView: <span class="hljs-type">ImageView</span>)</span></span> {
        Glide.with(context)
            .load(url)
            .into(imageView)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, imageView: <span class="hljs-type">ImageView</span>, placeholder: <span class="hljs-type">Int</span>)</span></span> {
        Glide.with(context)
            .load(url)
            .placeholder(placeholder)
            .into(imageView)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, imageView: <span class="hljs-type">ImageView</span>, placeholder: <span class="hljs-type">Int</span>, error: <span class="hljs-type">Int</span>)</span></span> {
        Glide.with(context)
            .load(url)
            .placeholder(placeholder)
            .error(error)
            .into(imageView)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">preload</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span> {
        Glide.with(context)
            .load(url)
            .preload()
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearCache</span><span class="hljs-params">()</span></span> {
        Glide.<span class="hljs-keyword">get</span>(context).clearMemory()
        GlobalScope.launch(Dispatchers.IO) {
            Glide.<span class="hljs-keyword">get</span>(context).clearDiskCache()
        }
    }
}

<span class="hljs-comment">// Picassoé€‚é…å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PicassoImageLoader</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : ImageLoader {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, imageView: <span class="hljs-type">ImageView</span>)</span></span> {
        Picasso.<span class="hljs-keyword">get</span>()
            .load(url)
            .into(imageView)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, imageView: <span class="hljs-type">ImageView</span>, placeholder: <span class="hljs-type">Int</span>)</span></span> {
        Picasso.<span class="hljs-keyword">get</span>()
            .load(url)
            .placeholder(placeholder)
            .into(imageView)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, imageView: <span class="hljs-type">ImageView</span>, placeholder: <span class="hljs-type">Int</span>, error: <span class="hljs-type">Int</span>)</span></span> {
        Picasso.<span class="hljs-keyword">get</span>()
            .load(url)
            .placeholder(placeholder)
            .error(error)
            .into(imageView)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">preload</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span> {
        Picasso.<span class="hljs-keyword">get</span>()
            .load(url)
            .fetch()
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearCache</span><span class="hljs-params">()</span></span> {
        Picasso.<span class="hljs-keyword">get</span>()
            .invalidate(url)
    }
}

<span class="hljs-comment">// ç»Ÿä¸€å›¾ç‰‡åŠ è½½å™¨å·¥å‚</span>
<span class="hljs-keyword">object</span> ImageLoaderFactory {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> currentLoader: ImageLoader? = <span class="hljs-literal">null</span>
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getImageLoader</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: ImageLoader {
        <span class="hljs-keyword">if</span> (currentLoader == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// æ ¹æ®é…ç½®æˆ–ç¯å¢ƒé€‰æ‹©åŠ è½½å™¨</span>
            currentLoader = <span class="hljs-keyword">if</span> (useGlide()) {
                GlideImageLoader(context.applicationContext)
            } <span class="hljs-keyword">else</span> {
                PicassoImageLoader(context.applicationContext)
            }
        }
        <span class="hljs-keyword">return</span> currentLoader!!
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">switchLoader</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, useGlide: <span class="hljs-type">Boolean</span>)</span></span> {
        currentLoader = <span class="hljs-keyword">if</span> (useGlide) {
            GlideImageLoader(context.applicationContext)
        } <span class="hljs-keyword">else</span> {
            PicassoImageLoader(context.applicationContext)
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">useGlide</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-comment">// æ ¹æ®é…ç½®å†³å®šä½¿ç”¨å“ªä¸ªåº“</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨Glide</span>
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">val</span> imageLoader = ImageLoaderFactory.getImageLoader(context)
imageLoader.load(<span class="hljs-string">"https://example.com/image.jpg"</span>, imageView, R.drawable.placeholder)
</code></pre>
<h2 data-id="heading-17">å…­ã€Kotlinä¸­çš„é€‚é…å™¨æ¨¡å¼ä¼˜åŒ–</h2>
<h3 data-id="heading-18">1. ä½¿ç”¨æ‰©å±•å‡½æ•°ä½œä¸ºé€‚é…å™¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç°æœ‰ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LegacyUser</span>(<span class="hljs-keyword">val</span> firstName: String, <span class="hljs-keyword">val</span> lastName: String, <span class="hljs-keyword">val</span> age: <span class="hljs-built_in">Int</span>)

<span class="hljs-comment">// æ–°æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ModernUser</span> {
    <span class="hljs-keyword">val</span> fullName: String
    <span class="hljs-keyword">val</span> age: <span class="hljs-built_in">Int</span>
    <span class="hljs-keyword">val</span> isAdult: <span class="hljs-built_in">Boolean</span>
}

<span class="hljs-comment">// ä½¿ç”¨æ‰©å±•å‡½æ•°é€‚é…</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> LegacyUser.<span class="hljs-title">toModernUser</span><span class="hljs-params">()</span></span>: ModernUser {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">object</span> : ModernUser {
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> fullName: String
            <span class="hljs-keyword">get</span>() = <span class="hljs-string">"<span class="hljs-variable">$firstName</span> <span class="hljs-variable">$lastName</span>"</span>
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> age: <span class="hljs-built_in">Int</span>
            <span class="hljs-keyword">get</span>() = <span class="hljs-keyword">this</span><span class="hljs-symbol">@toModernUser</span>.age
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> isAdult: <span class="hljs-built_in">Boolean</span>
            <span class="hljs-keyword">get</span>() = age &gt;= <span class="hljs-number">18</span>
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">val</span> legacyUser = LegacyUser(<span class="hljs-string">"å¼ "</span>, <span class="hljs-string">"ä¸‰"</span>, <span class="hljs-number">25</span>)
<span class="hljs-keyword">val</span> modernUser: ModernUser = legacyUser.toModernUser()
println(<span class="hljs-string">"<span class="hljs-subst">${modernUser.fullName}</span> æ˜¯æˆå¹´äººå—ï¼Ÿ<span class="hljs-subst">${modernUser.isAdult}</span>"</span>)
</code></pre>
<h3 data-id="heading-19">2. ä½¿ç”¨é«˜é˜¶å‡½æ•°ç®€åŒ–é€‚é…å™¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å‡½æ•°å¼é€‚é…å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FunctionalAdapter</span>&lt;<span class="hljs-type">T, R</span>&gt;(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: List&lt;T&gt;,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> transform: (T) -&gt; R
) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getAdaptedData</span><span class="hljs-params">()</span></span>: List&lt;R&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">data</span>.map(transform)
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiUser</span>(<span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> username: String, <span class="hljs-keyword">val</span> createdAt: String)
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DomainUser</span>(<span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">val</span> joinDate: Date)

<span class="hljs-keyword">val</span> apiUsers = listOf(
    ApiUser(<span class="hljs-number">1</span>, <span class="hljs-string">"user1"</span>, <span class="hljs-string">"2023-01-01"</span>),
    ApiUser(<span class="hljs-number">2</span>, <span class="hljs-string">"user2"</span>, <span class="hljs-string">"2023-02-01"</span>)
)

<span class="hljs-keyword">val</span> dateFormat = SimpleDateFormat(<span class="hljs-string">"yyyy-MM-dd"</span>, Locale.getDefault())

<span class="hljs-keyword">val</span> adapter = FunctionalAdapter(apiUsers) { apiUser -&gt;
    DomainUser(
        id = apiUser.id,
        name = apiUser.username,
        joinDate = dateFormat.parse(apiUser.createdAt) ?: Date()
    )
}

<span class="hljs-keyword">val</span> domainUsers = adapter.getAdaptedData()
</code></pre>
<h2 data-id="heading-20">ä¸ƒã€é€‚é…å™¨æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</h2>
<h3 data-id="heading-21">âœ… ä¼˜ç‚¹</h3>
<ol>
<li><strong>æé«˜å¤ç”¨æ€§</strong>ï¼šå¯ä»¥å¤ç”¨ç°æœ‰çš„ç±»ï¼Œæ— éœ€ä¿®æ”¹å…¶ä»£ç </li>
<li><strong>æé«˜çµæ´»æ€§</strong>ï¼šé€šè¿‡é€‚é…å™¨å¯ä»¥çµæ´»åœ°ä½¿ç”¨ä¸åŒçš„ç±»</li>
<li><strong>è§£è€¦</strong>ï¼šå®¢æˆ·ç«¯ä¸å…·ä½“å®ç°è§£è€¦</li>
<li><strong>ç¬¦åˆå¼€é—­åŸåˆ™</strong>ï¼šå¯ä»¥éšæ—¶å¢åŠ æ–°çš„é€‚é…å™¨ï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç </li>
<li><strong>ç»Ÿä¸€æ¥å£</strong>ï¼šå¯ä»¥å°†å¤šä¸ªä¸åŒçš„æ¥å£ç»Ÿä¸€ä¸ºä¸€ä¸ªæ¥å£</li>
</ol>
<h3 data-id="heading-22">âŒ ç¼ºç‚¹</h3>
<ol>
<li><strong>å¢åŠ å¤æ‚æ€§</strong>ï¼šå¢åŠ äº†é¢å¤–çš„ç±»å’Œå¯¹è±¡</li>
<li><strong>å¯èƒ½é™ä½æ€§èƒ½</strong>ï¼šé€‚é…å™¨è°ƒç”¨ä¼šå¢åŠ ä¸€å±‚é—´æ¥è°ƒç”¨</li>
<li><strong>è¿‡åº¦ä½¿ç”¨</strong>ï¼šå¦‚æœç³»ç»Ÿä¸­åˆ°å¤„éƒ½æ˜¯é€‚é…å™¨ï¼Œä¼šå˜å¾—éš¾ä»¥ç†è§£</li>
<li><strong>ä¸æ˜¯é“¶å¼¹</strong>ï¼šå¯¹äºç®€å•çš„æ¥å£è½¬æ¢ï¼Œå¯èƒ½è¿‡åº¦è®¾è®¡</li>
</ol>
<h2 data-id="heading-23">å…«ã€ä¸å…¶ä»–æ¨¡å¼çš„å¯¹æ¯”</h2>
<h3 data-id="heading-24">é€‚é…å™¨æ¨¡å¼ vs è£…é¥°å™¨æ¨¡å¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é€‚é…å™¨æ¨¡å¼ï¼šè½¬æ¢æ¥å£ï¼Œè®©ä¸å…¼å®¹çš„æ¥å£èƒ½ä¸€èµ·å·¥ä½œ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Adapter</span>(oldSystem: OldSystem) : NewSystem {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">newMethod</span><span class="hljs-params">()</span></span> {
        oldSystem.oldMethod() <span class="hljs-comment">// åªæ˜¯è°ƒç”¨ï¼Œä¸å¢å¼ºåŠŸèƒ½</span>
    }
}

<span class="hljs-comment">// è£…é¥°å™¨æ¨¡å¼ï¼šå¢å¼ºåŠŸèƒ½ï¼Œä¸æ”¹å˜æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Decorator</span>(system: System) : System <span class="hljs-keyword">by</span> system {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">method</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œ"</span>)
        <span class="hljs-keyword">super</span>.method() <span class="hljs-comment">// è°ƒç”¨åŸæœ‰æ–¹æ³•å¹¶å¢å¼º</span>
        println(<span class="hljs-string">"æ‰§è¡Œç»“æŸ"</span>)
    }
}
</code></pre>
<h3 data-id="heading-25">é€‚é…å™¨æ¨¡å¼ vs å¤–è§‚æ¨¡å¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é€‚é…å™¨æ¨¡å¼ï¼šä¸»è¦è§£å†³æ¥å£ä¸å…¼å®¹é—®é¢˜</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MediaAdapter</span> : <span class="hljs-type">MediaPlayer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> advancedPlayer = AdvancedMediaPlayer()
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">play</span><span class="hljs-params">(type: <span class="hljs-type">String</span>, file: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">when</span> (type) {
            <span class="hljs-string">"mp4"</span> -&gt; advancedPlayer.playMp4(file) <span class="hljs-comment">// ä¸€å¯¹ä¸€è½¬æ¢</span>
        }
    }
}

<span class="hljs-comment">// å¤–è§‚æ¨¡å¼ï¼šç®€åŒ–å¤æ‚ç³»ç»Ÿçš„æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HomeTheaterFacade</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> dvd = DvdPlayer()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> projector = Projector()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> lights = Lights()
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">watchMovie</span><span class="hljs-params">(movie: <span class="hljs-type">String</span>)</span></span> {
        lights.dim(<span class="hljs-number">10</span>)
        projector.on()
        projector.setInput(<span class="hljs-string">"DVD"</span>)
        dvd.on()
        dvd.play(movie) <span class="hljs-comment">// ç®€åŒ–å¤šä¸ªç³»ç»Ÿçš„è°ƒç”¨</span>
    }
}
</code></pre>
<h3 data-id="heading-26">é€‚é…å™¨æ¨¡å¼ vs æ¡¥æ¥æ¨¡å¼</h3>
<pre><code class="hljs language-js" lang="js"/></pre>
<pre><code class="hljs language-text" lang="text">// é€‚é…å™¨æ¨¡å¼ï¼šäº‹åè¡¥æ•‘ï¼Œè®©ä¸¤ä¸ªå·²æœ‰æ¥å£èƒ½ä¸€èµ·å·¥ä½œ
// é€šå¸¸æ˜¯åœ¨è®¾è®¡å®Œæˆåçš„ä¿®æ”¹

// æ¡¥æ¥æ¨¡å¼ï¼šäº‹å‰è®¾è®¡ï¼Œå°†æŠ½è±¡ä¸å®ç°åˆ†ç¦»
// é€šå¸¸åœ¨ç³»ç»Ÿè®¾è®¡æ—¶å°±è€ƒè™‘æ‰©å±•æ€§
</code></pre>
<h2 data-id="heading-27">ä¹ã€æœ€ä½³å®è·µæŒ‡å—</h2>
<h3 data-id="heading-28">ä½•æ—¶ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ï¼Ÿ</h3>
<p>âœ…Â <strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ol>
<li><strong>ç³»ç»Ÿå‡çº§</strong>ï¼šä½¿ç”¨æ–°çš„ç±»åº“æ›¿æ¢æ—§çš„ç±»åº“æ—¶</li>
<li><strong>ç¬¬ä¸‰æ–¹é›†æˆ</strong>ï¼šé›†æˆç¬¬ä¸‰æ–¹åº“ï¼Œä½†æ¥å£ä¸å…¼å®¹æ—¶</li>
<li><strong>ç»Ÿä¸€æ¥å£</strong>ï¼šå¤šä¸ªç±»æœ‰ç›¸ä¼¼åŠŸèƒ½ä½†æ¥å£ä¸åŒï¼Œéœ€è¦ç»Ÿä¸€æ¥å£æ—¶</li>
<li><strong>æ•°æ®è½¬æ¢</strong>ï¼šå°†ä¸€ç§æ•°æ®æ ¼å¼è½¬æ¢ä¸ºå¦ä¸€ç§æ ¼å¼æ—¶</li>
<li><strong>APIç‰ˆæœ¬é€‚é…</strong>ï¼šå¤„ç†ä¸åŒç‰ˆæœ¬APIçš„å…¼å®¹æ€§é—®é¢˜</li>
</ol>
<p>âŒÂ <strong>é¿å…ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ol>
<li>æ¥å£æœ¬æ¥å°±å…¼å®¹ï¼Œä¸éœ€è¦é€‚é…</li>
<li>å¯ä»¥é€šè¿‡é‡æ„ç»Ÿä¸€æ¥å£</li>
<li>ç³»ç»Ÿè®¾è®¡åˆæœŸï¼Œå¯ä»¥ç›´æ¥è®¾è®¡ç»Ÿä¸€çš„æ¥å£</li>
<li>è¿‡åº¦ä½¿ç”¨ä¼šå¯¼è‡´ç³»ç»Ÿå¤æ‚æ€§å¢åŠ </li>
</ol>
<h3 data-id="heading-29">Androidå¼€å‘å»ºè®®</h3>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨å¯¹è±¡é€‚é…å™¨</strong>ï¼šæ¯”ç±»é€‚é…å™¨æ›´çµæ´»</li>
<li><strong>åˆç†ä½¿ç”¨RecyclerView.Adapter</strong>ï¼šè¿™æ˜¯Androidä¸­æœ€å¸¸ç”¨çš„é€‚é…å™¨</li>
<li><strong>è€ƒè™‘ä½¿ç”¨Kotlinæ‰©å±•å‡½æ•°</strong>ï¼šå¯¹äºç®€å•çš„é€‚é…ï¼Œæ‰©å±•å‡½æ•°æ›´ç®€æ´</li>
<li><strong>æ³¨æ„å†…å­˜æ³„æ¼</strong>ï¼šé€‚é…å™¨ä¸­æŒæœ‰Contextæˆ–Viewå¼•ç”¨æ—¶è¦å°å¿ƒ</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¯¹äºåˆ—è¡¨é€‚é…å™¨ï¼Œä½¿ç”¨ViewHolderæ¨¡å¼ä¼˜åŒ–æ€§èƒ½</li>
</ol>
<h3 data-id="heading-30">å®ç°æŠ€å·§</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. ä½¿ç”¨æ³›å‹å¢åŠ çµæ´»æ€§</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Adapter</span>&lt;<span class="hljs-type">in T, out R</span>&gt; {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">adapt</span><span class="hljs-params">(source: <span class="hljs-type">T</span>)</span></span>: R
}

<span class="hljs-comment">// 2. æ”¯æŒé“¾å¼é€‚é…</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChainAdapter</span>&lt;<span class="hljs-type">T, R, S</span>&gt;(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> adapter1: Adapter&lt;T, R&gt;,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> adapter2: Adapter&lt;R, S&gt;
) : Adapter&lt;T, S&gt; {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">adapt</span><span class="hljs-params">(source: <span class="hljs-type">T</span>)</span></span>: S {
        <span class="hljs-keyword">return</span> adapter2.adapt(adapter1.adapt(source))
    }
}

<span class="hljs-comment">// 3. å¯é…ç½®çš„é€‚é…å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigurableAdapter</span>&lt;<span class="hljs-type">T</span>&gt;(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> rules: Map&lt;String, (T) -&gt; Any&gt;
) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">adapt</span><span class="hljs-params">(source: <span class="hljs-type">T</span>, config: <span class="hljs-type">Map</span>&lt;<span class="hljs-type">String</span>, Any&gt;)</span></span>: Map&lt;String, Any&gt; {
        <span class="hljs-keyword">return</span> rules.mapValues { (key, transform) -&gt;
            <span class="hljs-keyword">if</span> (config.containsKey(key)) config[key] <span class="hljs-keyword">else</span> transform(source)
        }
    }
}
</code></pre>
<h2 data-id="heading-31">åã€æ€»ç»“</h2>
<p>é€‚é…å™¨æ¨¡å¼æ˜¯Androidå¼€å‘ä¸­<strong>æœ€å¸¸ç”¨</strong>çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œç‰¹åˆ«æ˜¯åœ¨ä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li><strong>æ•°æ®ç»‘å®š</strong>ï¼šRecyclerView.Adapteræ˜¯é€‚é…å™¨æ¨¡å¼çš„å®Œç¾ä½“ç°</li>
<li><strong>APIå…¼å®¹</strong>ï¼šå¤„ç†ä¸åŒAndroidç‰ˆæœ¬çš„APIå·®å¼‚</li>
<li><strong>ç¬¬ä¸‰æ–¹é›†æˆ</strong>ï¼šé›†æˆä¸åŒåº“çš„ç»Ÿä¸€æ¥å£</li>
<li><strong>æ¶æ„ä¼˜åŒ–</strong>ï¼šåœ¨ä¸åŒå±‚ä¹‹é—´è½¬æ¢æ•°æ®æ¨¡å‹</li>
</ol>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>é€‚é…å™¨æ˜¯è½¬æ¢å™¨</strong>ï¼šå°†ä¸€ä¸ªæ¥å£è½¬æ¢ä¸ºå¦ä¸€ä¸ªæ¥å£</li>
<li><strong>ä¸¤ç§å®ç°æ–¹å¼</strong>ï¼šå¯¹è±¡é€‚é…å™¨ï¼ˆæ¨èï¼‰å’Œç±»é€‚é…å™¨</li>
<li><strong>ä¸æ˜¯è£…é¥°å™¨</strong>ï¼šé€‚é…å™¨æ”¹å˜æ¥å£ï¼Œè£…é¥°å™¨å¢å¼ºåŠŸèƒ½</li>
<li><strong>Androidä¸­æ— å¤„ä¸åœ¨</strong>ï¼šä»RecyclerViewåˆ°æ•°æ®è½¬æ¢éƒ½åœ¨ä½¿ç”¨</li>
</ul>
<p><strong>åœ¨Androidä¸­çš„å®é™…åº”ç”¨</strong>ï¼š</p>
<ul>
<li><strong>RecyclerView.Adapter</strong>ï¼šå°†æ•°æ®é€‚é…åˆ°è§†å›¾</li>
<li><strong>PagerAdapter</strong>ï¼šå°†æ•°æ®é€‚é…åˆ°ViewPager</li>
<li><strong>èµ„æºé€‚é…</strong>ï¼šä¸åŒå±å¹•å°ºå¯¸ã€è¯­è¨€ã€æ–¹å‘çš„èµ„æºé€‚é…</li>
</ul>
<p><strong>Kotlinä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li><strong>æ‰©å±•å‡½æ•°</strong>ï¼šç®€åŒ–ç®€å•é€‚é…</li>
<li><strong>é«˜é˜¶å‡½æ•°</strong>ï¼šå‡½æ•°å¼é€‚é…å™¨å®ç°</li>
</ul>
<p>é€‚é…å™¨æ¨¡å¼æ˜¯è§£å†³æ¥å£ä¸å…¼å®¹é—®é¢˜çš„åˆ©å™¨ï¼Œåˆç†ä½¿ç”¨å¯ä»¥æ˜¾è‘—æé«˜ä»£ç çš„å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚åœ¨Androidå¼€å‘ä¸­ï¼ŒæŒæ¡é€‚é…å™¨æ¨¡å¼æ˜¯æ¯ä¸ªå¼€å‘è€…å¿…å¤‡çš„æŠ€èƒ½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChainä¸LangGraphç”Ÿäº§ç¯å¢ƒä¸‹çš„å·¥ç¨‹åŒ–å®è·µ]]></title>    <link>https://juejin.cn/post/7601041482892181554</link>    <guid>https://juejin.cn/post/7601041482892181554</guid>    <pubDate>2026-01-31T08:44:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601041482892181554" data-draft-id="7601041482892165170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChainä¸LangGraphç”Ÿäº§ç¯å¢ƒä¸‹çš„å·¥ç¨‹åŒ–å®è·µ"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-01-31T08:44:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·023823762876"/> <meta itemprop="url" content="https://juejin.cn/user/590883624856458"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChainä¸LangGraphç”Ÿäº§ç¯å¢ƒä¸‹çš„å·¥ç¨‹åŒ–å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/590883624856458/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·023823762876
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T08:44:56.000Z" title="Sat Jan 31 2026 08:44:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆ 90% çš„ LangChain é¡¹ç›®æ— æ³•è¿›å…¥ç”Ÿäº§ç¯å¢ƒï¼Ÿ</h2>
<p>LangChain ä¸ LangGraph çš„ç»„ä»¶åŒ–èƒ½åŠ›ï¼Œé™ä½äº† AI Agent çš„åŸå‹æ„å»ºé—¨æ§›ã€‚ä½†åœ¨é¡¹ç›®è¿ˆå‘ç”Ÿäº§ç¯å¢ƒæ—¶ï¼ŒAI Agent å·¥ç¨‹åŒ–è½åœ°è¿˜å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚ä»Šå¤©æƒ³åœ¨è¿™é‡Œåˆ†äº«ä¸€ä¸‹ï¼Œä½œè€…æœ¬äººåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ AI Agent å¼€å‘è¿‡ç¨‹ä¸­æ‰€é‡åˆ°çš„é—®é¢˜å’Œå‡ ç‚¹ç»éªŒã€‚</p>
<p>ä¸€åˆ‡éƒ½ä»¥å®é™…éœ€æ±‚ä¸ºå‡†ï¼Œé‚£ä¹ˆå°±ä»¥å®é™…éœ€æ±‚ä¸ºåˆ‡å…¥ç‚¹ï¼Œå¾å¾å±•å¼€ã€‚</p>
<h3 data-id="heading-1">1. å¤šç§Ÿæˆ· API é…ç½®çš„åŠ¨æ€åˆ‡æ¢</h3>
<h4 data-id="heading-2">éœ€æ±‚åœºæ™¯</h4>
<p>åœ¨ SaaS åœºæ™¯ä¸‹ï¼ŒæŠŠ Agent å°è£…æˆ API æœåŠ¡å¯¹å¤–æä¾›æ—¶ï¼Œä¼šå‡ºç°ä¸åŒç”¨æˆ·éœ€è¦ä½¿ç”¨ä¸åŒ LLM é…ç½®çš„æƒ…å†µï¼š</p>
<ul>
<li><strong>è´¹ç”¨éš”ç¦»</strong> - ä¼ä¸šå®¢æˆ·è‡ªå¸¦ API Keyï¼ŒæŒ‰è‡ªå·±çš„é¢åº¦è®¡è´¹</li>
<li><strong>æ•°æ®å®‰å…¨</strong> - éƒ¨åˆ†ç”¨æˆ·è¦æ±‚æ¥å…¥ç§æœ‰åŒ–éƒ¨ç½²çš„æ¨¡å‹</li>
<li><strong>A/B æµ‹è¯•</strong> - åŒä¸€æœåŠ¡å¯¹ä¸åŒè¯·æ±‚ä½¿ç”¨ä¸åŒæ¨¡å‹å¯¹æ¯”æ•ˆæœ</li>
</ul>
<p>é™¤è¿™ä¸‰ä¸ªå¸¸è§çš„ä»¥å¤–ï¼Œå¯èƒ½è¿˜æœ‰å…¶ä»–çš„ä½¿ç”¨åœºæ™¯ã€‚æ€»ä¹‹ï¼Œæ¯ä¸ªè¯·æ±‚éœ€è¦èƒ½å¤ŸåŠ¨æ€æŒ‡å®š <code>model</code>ã€<code>base_url</code> å’Œ <code>api_key</code>ã€‚</p>
<h4 data-id="heading-3">LangChain åŸç”Ÿå®ç°çš„é—®é¢˜</h4>
<p>å…ˆçœ‹çœ‹ LangChain åŸç”Ÿæ˜¯æ€ä¹ˆåšçš„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI

<span class="hljs-comment"># åˆå§‹åŒ–æ—¶å°±è¦ç»‘å®šé…ç½®</span>
llm = ChatOpenAI(
    model=<span class="hljs-string">"gpt-4"</span>,
    api_key=<span class="hljs-string">"sk-xxx"</span>,
    base_url=<span class="hljs-string">"https://api.openai.com/v1"</span>
)
</code></pre>
<p>è¿™æ ·å†™åœ¨å•ç”¨æˆ·åœºæ™¯æ²¡é—®é¢˜ï¼Œä½†æ”¾åˆ°å¤šç§Ÿæˆ· Web æœåŠ¡é‡Œå°±æœ‰å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><strong>é…ç½®åœ¨åˆå§‹åŒ–æ—¶ç»‘å®šï¼Œå®ä¾‹åˆ›å»ºåæ— æ³•åˆ‡æ¢</strong>ï¼š<code>ChatOpenAI</code> çš„ <code>model</code>ã€<code>openai_api_base</code>ã€<code>openai_api_key</code> éƒ½æ˜¯æ„é€ å‚æ•°ï¼Œä¸€æ—¦å®ä¾‹åˆ›å»ºå®Œæˆï¼Œé…ç½®å°±å›ºå®šäº†ã€‚å¦‚æœè¦åˆ‡æ¢åˆ°å¦ä¸€ä¸ªæœåŠ¡å•†æˆ– API Keyï¼Œå°±å¿…é¡»åˆ›å»ºæ–°å®ä¾‹</li>
<li><strong>é¢‘ç¹åˆ›å»ºå®ä¾‹</strong>ï¼šæ¯æ¥ä¸€ä¸ªç”¨æˆ·è¯·æ±‚ï¼Œå°±å¾— <code>new</code> ä¸€ä¸ªæ–°çš„ <code>ChatOpenAI</code> å®ä¾‹</li>
<li><strong>HTTP è¿æ¥æ— æ³•å¤ç”¨</strong>ï¼šæ¯ä¸ªå®ä¾‹ä¼šç‹¬ç«‹åˆ›å»ºåº•å±‚ HTTP è¿æ¥ï¼Œé«˜å¹¶å‘æ—¶è¿æ¥æ•°ä¸å¯æ§ï¼Œå¯èƒ½å¯¼è‡´èµ„æºè€—å°½</li>
</ol>
<h4 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h4>
<p>æ ¸å¿ƒæ€è·¯æ˜¯<strong>Agent å¤ç”¨ï¼ŒClient æŒ‰éœ€åˆ›å»ºï¼ŒHTTP è¿æ¥æ± å…±äº«</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> httpx
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> AsyncOpenAI

<span class="hljs-comment"># ========== 1. å…¨å±€ HTTP è¿æ¥æ± ï¼ˆå•ä¾‹ï¼‰==========</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalHTTPFactory</span>:
    _client = <span class="hljs-literal">None</span>
    
<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_client</span>(<span class="hljs-params">cls</span>):
        <span class="hljs-keyword">if</span> cls._client <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            cls._client = httpx.AsyncClient(
                limits=httpx.Limits(max_connections=<span class="hljs-number">50</span>),
                http2=<span class="hljs-literal">True</span>
            )
        <span class="hljs-keyword">return</span> cls._client


<span class="hljs-comment"># ========== 2. Agent åŸºç±» ==========</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseAgent</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, default_config=<span class="hljs-literal">None</span></span>):
        self.default_config = default_config <span class="hljs-keyword">or</span> {}
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_openai_client</span>(<span class="hljs-params">self, runtime_config=<span class="hljs-literal">None</span></span>):
        <span class="hljs-comment"># åˆå¹¶é…ç½®ï¼šè¿è¡Œæ—¶é…ç½®è¦†ç›–é»˜è®¤é…ç½®</span>
        config = {**self.default_config, **runtime_config} <span class="hljs-keyword">if</span> runtime_config <span class="hljs-keyword">else</span> self.default_config
        
        <span class="hljs-comment"># å¤ç”¨å…¨å±€ HTTP è¿æ¥æ± </span>
        shared_http = <span class="hljs-keyword">await</span> GlobalHTTPFactory.get_client()
        
        <span class="hljs-keyword">return</span> AsyncOpenAI(
            api_key=config[<span class="hljs-string">"api_key"</span>],
            base_url=config[<span class="hljs-string">"base_url"</span>],
            http_client=shared_http  <span class="hljs-comment"># å…³é”®ï¼šæ³¨å…¥å…±äº«çš„ HTTP å®¢æˆ·ç«¯</span>
        )
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self, text, **runtime_config</span>):
        client = <span class="hljs-keyword">await</span> self.get_openai_client(runtime_config)
        <span class="hljs-comment"># è°ƒç”¨ LLM...</span>


<span class="hljs-comment"># ========== 3. Web æœåŠ¡å±‚ ==========</span>
<span class="hljs-comment"># æœåŠ¡å¯åŠ¨æ—¶ï¼Œåˆ›å»ºä¸€æ¬¡ Agent</span>
agent = BaseAgent()

<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/chat"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params">request</span>):
    <span class="hljs-comment"># æ¯ä¸ªè¯·æ±‚ä¼ å…¥è‡ªå·±çš„é…ç½®</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> agent.run(
        text=request.text,
        model=request.model,
        base_url=request.base_url,
        api_key=request.api_key
    )
</code></pre>
<p>æ•´ä¸ªè®¾è®¡çš„è¦ç‚¹ï¼š</p>
<ol>
<li><strong>Agent åªåˆ›å»ºä¸€æ¬¡</strong>ï¼ŒæœåŠ¡å¯åŠ¨æ—¶åˆå§‹åŒ–ï¼Œå…¨å±€å¤ç”¨</li>
<li><strong>OpenAI å®¢æˆ·ç«¯æŒ‰éœ€åˆ›å»º</strong>ï¼Œæ¯ä¸ªè¯·æ±‚æ ¹æ®ä¼ å…¥çš„é…ç½®ç”Ÿæˆ</li>
<li><strong>HTTP è¿æ¥æ± å…¨å±€å…±äº«</strong>ï¼Œé€šè¿‡ <code>http_client</code> å‚æ•°æ³¨å…¥ï¼Œé¿å…è¿æ¥æ•°çˆ†ç‚¸ï¼Œæå¤§é™ä½è¿è¡Œæ‰€éœ€å†…å­˜</li>
</ol>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆä¸ç”¨å…¨å±€è¿æ¥æ± å†…å­˜ä¼šä¸€ç›´ç´¯åŠ ï¼Ÿ</strong></p>
<p>æ¯æ¬¡ <code>new AsyncOpenAI()</code> éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå†…éƒ¨çš„ HTTP è¿æ¥æ± ã€‚å¦‚æœè¯·æ±‚å®Œæˆåæ²¡æœ‰æ˜¾å¼è°ƒç”¨ <code>close()</code>ï¼Œåº•å±‚è¿æ¥ä¸ä¼šç«‹å³é‡Šæ”¾ã€‚åŠ ä¸Š Python GC çš„å»¶è¿Ÿã€HTTP Keep-alive ä¿æŒè¿æ¥ã€å¼‚æ­¥å¯¹è±¡å¯èƒ½å­˜åœ¨çš„å¾ªç¯å¼•ç”¨ç­‰å› ç´ ï¼Œè¿™äº›è¿æ¥æ± ä¼šä¸æ–­ç´¯ç§¯ï¼Œæœ€ç»ˆå¯¼è‡´å†…å­˜æŒç»­å¢é•¿ç”šè‡³ OOMã€‚ä½¿ç”¨å…¨å±€è¿æ¥æ± åï¼Œåªç»´æŠ¤ä¸€ä¸ªå®ä¾‹ï¼Œè¿æ¥æ•°æœ‰ä¸Šé™ï¼Œé—®é¢˜è§£å†³ã€‚</p>
</blockquote>
<h3 data-id="heading-5">2. æ¨¡å‹æ€è€ƒè¿‡ç¨‹çš„æµå¼é€ä¼ </h3>
<h4 data-id="heading-6">éœ€æ±‚åœºæ™¯</h4>
<p>DeepSeek-R1ã€GLM-4 ç­‰æ¨ç†æ¨¡å‹åœ¨ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆä¹‹å‰ï¼Œä¼šå…ˆè¿›è¡Œä¸€æ®µ"æ€è€ƒ"ã€‚è¿™ä¸ªæ€è€ƒè¿‡ç¨‹å¯¹ç”¨æˆ·æ¥è¯´æ˜¯æœ‰ä»·å€¼çš„â€”â€”å®ƒèƒ½è®©ç”¨æˆ·çœ‹åˆ°æ¨¡å‹æ˜¯å¦‚ä½•åˆ†æé—®é¢˜çš„ï¼Œå¢å¼ºå¯ä¿¡åº¦ã€‚</p>
<p>æŠŠ Agent å°è£…æˆ API æœåŠ¡æ—¶ï¼Œéœ€è¦æŠŠè¿™ä¸ªæ€è€ƒè¿‡ç¨‹å®æ—¶æµå¼åœ°é€ä¼ ç»™å‰ç«¯ï¼š</p>
<ul>
<li><strong>å®æ—¶å±•ç¤º</strong>ï¼šç”¨æˆ·èƒ½çœ‹åˆ°æ¨¡å‹"æ­£åœ¨æ€è€ƒ"ï¼Œè€Œä¸æ˜¯å¹²ç­‰</li>
<li><strong>åŒºåˆ†å†…å®¹</strong>ï¼šå‰ç«¯éœ€è¦åŒºåˆ†"æ€è€ƒå†…å®¹"å’Œ"æœ€ç»ˆå›ç­”"ï¼Œåˆ†åˆ«å±•ç¤º</li>
<li><strong>å¤šæ¨¡å‹å…¼å®¹</strong>ï¼šä¸åŒæ¨¡å‹å‚å•†çš„æ€è€ƒå‚æ•°æ ¼å¼ä¸åŒï¼ˆDeepSeekã€GLMã€Qwen å„æœ‰å„çš„å†™æ³•ï¼‰</li>
</ul>
<h4 data-id="heading-7">é—®é¢˜åœ¨å“ª</h4>
<p>OpenAI SDK è¿”å›çš„æµå¼ chunk ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ™®é€šå†…å®¹åœ¨ delta.content</span>
<span class="hljs-comment"># æ€è€ƒå†…å®¹åœ¨ delta.reasoning_contentï¼ˆè¿™æ˜¯ DeepSeek æ‰©å±•çš„å­—æ®µï¼‰</span>
chunk.choices[<span class="hljs-number">0</span>].delta.content           <span class="hljs-comment"># æœ€ç»ˆå›ç­”</span>
chunk.choices[<span class="hljs-number">0</span>].delta.reasoning_content  <span class="hljs-comment"># æ€è€ƒè¿‡ç¨‹</span>
</code></pre>
<p>é—®é¢˜æ˜¯ï¼š</p>
<ol>
<li><strong><code>reasoning_content</code> ä¸æ˜¯æ ‡å‡†å­—æ®µ</strong>ï¼šLangChain åŸç”Ÿä¸è®¤è¯†è¿™ä¸ªå­—æ®µï¼Œä¼šç›´æ¥ä¸¢å¼ƒ</li>
<li><strong>ä¸åŒæ¨¡å‹å‚æ•°ä¸åŒ</strong>ï¼šDeepSeek ç”¨ <code>reasoning_content</code>ï¼ŒGLM ç”¨ <code>thinking.type</code>ï¼ŒQwen ç”¨ <code>enable_thinking</code></li>
<li><strong>éœ€è¦æ‰‹åŠ¨è§£æ chunk</strong>ï¼šæ‹¿åˆ° chunk åï¼Œè¦è‡ªå·±åˆ¤æ–­æ˜¯æ€è€ƒå†…å®¹è¿˜æ˜¯æ­£å¼å†…å®¹</li>
</ol>
<h4 data-id="heading-8">è§£å†³æ–¹æ¡ˆ</h4>
<p>æ ¸å¿ƒé—®é¢˜æ˜¯ï¼šLangChain çš„ <code>AIMessageChunk</code> åªä¿ç•™ <code>content</code>ï¼Œä¼šæŠŠ <code>reasoning_content</code> ä¸¢æ‰ã€‚</p>
<p>è§£å†³æ€è·¯æ˜¯<strong>è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹ + è‡ªå®šä¹‰ ChatModel</strong>ï¼ŒæŠŠ OpenAI åŸå§‹å“åº”å®Œæ•´ä¿ç•™ä¸‹æ¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> BaseMessageChunk
<span class="hljs-keyword">from</span> langchain_core.language_models.chat_models <span class="hljs-keyword">import</span> BaseChatModel

<span class="hljs-comment"># ========== 1. è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹ï¼Œä¿ç•™å®Œæ•´çš„ OpenAI åŸå§‹å“åº” ==========</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatMessageChunk</span>(<span class="hljs-title class_ inherited__">BaseMessageChunk</span>):
    <span class="hljs-string">"""å…³é”®ï¼šæŠŠ OpenAI çš„åŸå§‹ chunk å®Œæ•´ä¿ç•™ä¸‹æ¥"""</span>
    chat_completion_chunk: <span class="hljs-type">Optional</span>[ChatCompletionChunk] = <span class="hljs-literal">None</span>


<span class="hljs-comment"># ========== 2. è‡ªå®šä¹‰ ChatModelï¼Œæµå¼æ—¶ç”¨è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹åŒ…è£… ==========</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LLMClientChatModel</span>(<span class="hljs-title class_ inherited__">BaseChatModel</span>):
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_astream</span>(<span class="hljs-params">self, messages, **kwargs</span>):
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> self.client.astream(messages):
            <span class="hljs-comment"># ç”¨è‡ªå®šä¹‰æ¶ˆæ¯åŒ…è£…ï¼Œä¸è®© LangChain ä¸¢æ‰ reasoning_content</span>
            message = ChatMessageChunk(content=<span class="hljs-string">""</span>, chat_completion_chunk=chunk)
            <span class="hljs-keyword">yield</span> ChatGenerationChunk(message=message)


<span class="hljs-comment"># ========== 3. Agent ä¸­è§£æ chunkï¼ŒåŒºåˆ†æ€è€ƒ/å†…å®¹ ==========</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAgent</span>:
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_stream</span>(<span class="hljs-params">self, text, **kwargs</span>):
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> self.graph.astream_events(inputs, config):
            <span class="hljs-keyword">if</span> event[<span class="hljs-string">"event"</span>] == <span class="hljs-string">"on_chat_model_stream"</span>:
                chunk = event[<span class="hljs-string">"data"</span>][<span class="hljs-string">"chunk"</span>]
                <span class="hljs-comment"># å› ä¸ºä¿ç•™äº†å®Œæ•´ chunkï¼Œè¿™é‡Œèƒ½æ‹¿åˆ° reasoning_content</span>
                delta = chunk.message.chat_completion_chunk.choices[<span class="hljs-number">0</span>].delta
                
                <span class="hljs-keyword">if</span> delta.reasoning_content:
                    <span class="hljs-keyword">yield</span> StreamChunk(<span class="hljs-built_in">type</span>=<span class="hljs-string">"thinking"</span>, content=delta.reasoning_content)
                <span class="hljs-keyword">elif</span> delta.content:
                    <span class="hljs-keyword">yield</span> StreamChunk(<span class="hljs-built_in">type</span>=<span class="hljs-string">"content"</span>, content=delta.content)


<span class="hljs-comment"># ========== 4. ä¸åŒæ¨¡å‹çš„æ€è€ƒå‚æ•°ç»Ÿä¸€ç®¡ç† ==========</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ThinkingConfig</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.model_params = {
            <span class="hljs-string">"glm"</span>: {<span class="hljs-string">"thinking"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"enabled"</span>}},
            <span class="hljs-string">"deepseek"</span>: {},  <span class="hljs-comment"># DeepSeek é»˜è®¤æ”¯æŒ</span>
            <span class="hljs-string">"qwen"</span>: {<span class="hljs-string">"enable_thinking"</span>: <span class="hljs-literal">True</span>}
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_params</span>(<span class="hljs-params">self, model_name, enable</span>):
        model_type = self._detect_model_type(model_name)
        <span class="hljs-keyword">return</span> self.model_params.get(model_type, {}) <span class="hljs-keyword">if</span> enable <span class="hljs-keyword">else</span> {}
</code></pre>
<p>æ•´ä¸ªè®¾è®¡çš„è¦ç‚¹ï¼š</p>
<ol>
<li><strong>è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹</strong>ï¼š<code>ChatMessageChunk</code> ä¿ç•™å®Œæ•´çš„ <code>ChatCompletionChunk</code>ï¼Œä¸è®© LangChain ä¸¢å¼ƒæ‰©å±•å­—æ®µ</li>
<li><strong>è‡ªå®šä¹‰ ChatModel</strong>ï¼š<code>LLMClientChatModel</code> åœ¨æµå¼è¾“å‡ºæ—¶ç”¨è‡ªå®šä¹‰æ¶ˆæ¯åŒ…è£…</li>
<li><strong>Agent å±‚è§£æ</strong>ï¼šä»ä¿ç•™çš„å®Œæ•´ chunk ä¸­å–å‡º <code>reasoning_content</code>ï¼ŒåŒºåˆ†ç±»å‹è¾“å‡º</li>
<li><strong>ç»Ÿä¸€é…ç½®ç®¡ç†</strong>ï¼š<code>ThinkingConfig</code> å°è£…ä¸åŒæ¨¡å‹çš„å‚æ•°å·®å¼‚</li>
</ol>
<h3 data-id="heading-9">3. ä¸­é—´æ‰§è¡Œè·¯å¾„çš„å¯è§‚æµ‹æ€§</h3>
<h4 data-id="heading-10">éœ€æ±‚åœºæ™¯</h4>
<p>ä»¥ä¸€ä¸ª<strong>æ™ºèƒ½ç ”æŠ¥ç”Ÿæˆ Agent</strong> ä¸ºä¾‹ï¼Œå®ƒçš„æ‰§è¡Œæµç¨‹æ¯”è¾ƒå¤æ‚ï¼š</p>
<pre><code class="hljs language-css" lang="css">è¾“å…¥è§£æ â†’ å¤šæºæ•°æ®é‡‡é›†ï¼ˆå¹¶è¡Œï¼‰â†’ æ•°æ®äº¤å‰éªŒè¯ â†’ æ·±åº¦åˆ†æ â†’ è§‚ç‚¹æç‚¼ â†’ æŠ¥å‘Šç”Ÿæˆ â†’ åˆè§„å®¡æŸ¥ â†’ è¾“å‡º
              â†“                      â†“
         <span class="hljs-selector-attr">[è´¢æŠ¥API]</span>              <span class="hljs-selector-attr">[éªŒè¯å¤±è´¥åˆ™é‡è¯•]</span>
         <span class="hljs-selector-attr">[æ–°é—»API]</span>
         <span class="hljs-selector-attr">[è¡Œæƒ…API]</span>
</code></pre>
<p>ç”¨æˆ·è°ƒç”¨ API ç”Ÿæˆä¸€ä»½ç ”æŠ¥æ—¶ï¼Œå¯èƒ½éœ€è¦ç­‰å¾… 30 ç§’ä»¥ä¸Šã€‚å¦‚æœè¿™æœŸé—´å‰ç«¯åªæ˜¾ç¤ºä¸€ä¸ªè½¬åœˆåŠ¨ç”»ï¼Œç”¨æˆ·ä½“éªŒä¼šå¾ˆå·®ã€‚æˆ‘ä»¬éœ€è¦æŠŠæ‰§è¡Œè¿›åº¦å®æ—¶é€ä¼ å‡ºæ¥ï¼š</p>
<ul>
<li><strong>å®æ—¶åé¦ˆ</strong>ï¼šç”¨æˆ·èƒ½çœ‹åˆ°ã€Œæ­£åœ¨é‡‡é›†è´¢æŠ¥æ•°æ® (2/3)ã€ã€Œæ­£åœ¨è¿›è¡Œæ·±åº¦åˆ†æã€ï¼Œè€Œä¸æ˜¯å¹²ç­‰</li>
<li><strong>å¹¶è¡Œä»»åŠ¡çŠ¶æ€</strong>ï¼šå¤šä¸ªæ•°æ®æºå¹¶è¡Œé‡‡é›†æ—¶ï¼Œåˆ†åˆ«å±•ç¤ºå„è‡ªçš„è¿›åº¦</li>
<li><strong>æ¡ä»¶åˆ†æ”¯å¯è§</strong>ï¼šæ•°æ®éªŒè¯å¤±è´¥è§¦å‘é‡è¯•æ—¶ï¼Œç”¨æˆ·èƒ½çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆ</li>
<li><strong>è°ƒè¯•å®šä½</strong>ï¼šå‡ºé—®é¢˜æ—¶èƒ½å¿«é€Ÿå®šä½æ˜¯å“ªä¸ªèŠ‚ç‚¹ã€å“ªä¸ªæ•°æ®æºå‡ºé”™</li>
</ul>
<h4 data-id="heading-11">é—®é¢˜åœ¨å“ª</h4>
<p>LangGraph çš„ <code>ainvoke()</code> æ–¹æ³•åªè¿”å›æœ€ç»ˆç»“æœï¼Œä¸­é—´è¿‡ç¨‹å®Œå…¨æ˜¯é»‘ç›’ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åªèƒ½æ‹¿åˆ°æœ€ç»ˆç»“æœï¼Œä¸­é—´ 30 ç§’å‘ç”Ÿäº†ä»€ä¹ˆå®Œå…¨ä¸çŸ¥é“</span>
result = <span class="hljs-keyword">await</span> graph.ainvoke(inputs)
</code></pre>
<p>è™½ç„¶ LangGraph æä¾›äº† <code>astream_events()</code> æ–¹æ³•ï¼Œä½†å®ƒçš„äº‹ä»¶ç±»å‹å¾ˆå¤šï¼Œéœ€è¦è‡ªå·±è¿‡æ»¤å’Œè§£æï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># astream_events ä¼šæŠ›å‡ºå„ç§äº‹ä»¶ï¼šon_chain_start, on_chain_end, on_chat_model_stream...</span>
<span class="hljs-comment"># éœ€è¦è‡ªå·±åˆ¤æ–­å“ªäº›æ˜¯èŠ‚ç‚¹äº‹ä»¶ï¼Œå“ªäº›æ˜¯ LLM äº‹ä»¶ï¼Œå“ªäº›æ˜¯å­å›¾äº‹ä»¶</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> graph.astream_events(inputs):
    <span class="hljs-comment"># æ€ä¹ˆè¿‡æ»¤ï¼Ÿæ€ä¹ˆåŒºåˆ†ä¸»å›¾å’Œå­å›¾ï¼Ÿæ€ä¹ˆå¤„ç†å¹¶è¡ŒèŠ‚ç‚¹ï¼Ÿ</span>
    <span class="hljs-keyword">pass</span>
</code></pre>
<h4 data-id="heading-12">è§£å†³æ–¹æ¡ˆ</h4>
<p>æ ¸å¿ƒæ˜¯ç›‘å¬ <code>on_chain_start</code> / <code>on_chain_end</code> äº‹ä»¶ï¼Œç»“åˆèŠ‚ç‚¹å…ƒæ•°æ®ï¼Œè¾“å‡ºç»“æ„åŒ–çš„è¿›åº¦ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Optional</span>, <span class="hljs-type">Literal</span>
<span class="hljs-keyword">from</span> enum <span class="hljs-keyword">import</span> Enum

<span class="hljs-comment"># ========== 1. ç»Ÿä¸€çš„æµå¼è¾“å‡ºæ ¼å¼ ==========</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChunkType</span>(<span class="hljs-built_in">str</span>, Enum):
    PROCESSING = <span class="hljs-string">"processing"</span>   <span class="hljs-comment"># æ‰§è¡Œè¿›åº¦</span>
    THINKING = <span class="hljs-string">"thinking"</span>       <span class="hljs-comment"># æ€è€ƒè¿‡ç¨‹</span>
    CONTENT = <span class="hljs-string">"content"</span>         <span class="hljs-comment"># æ­£å¼å†…å®¹</span>
    FINAL = <span class="hljs-string">"final"</span>             <span class="hljs-comment"># æœ€ç»ˆç»“æœ</span>
    ERROR = <span class="hljs-string">"error"</span>             <span class="hljs-comment"># é”™è¯¯ä¿¡æ¯</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamChunk</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""æµå¼è¾“å‡ºå—ï¼Œå‰ç«¯æŒ‰ type åˆ†åˆ«å¤„ç†"""</span>
    <span class="hljs-built_in">type</span>: ChunkType
    content: <span class="hljs-built_in">str</span>
    metadata: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">dict</span>] = <span class="hljs-literal">None</span>


<span class="hljs-comment"># ========== 2. èŠ‚ç‚¹è¿›åº¦é…ç½®ï¼ˆå¯é…ç½®åŒ–ï¼‰==========</span>
NODE_PROGRESS_MAP = {
    <span class="hljs-comment"># èŠ‚ç‚¹å -&gt; (è¿›åº¦æè¿°, é¢„ä¼°è€—æ—¶ç§’, æ‰€å±é˜¶æ®µ)</span>
    <span class="hljs-string">"parse_input"</span>: (<span class="hljs-string">"è§£æç”¨æˆ·è¾“å…¥"</span>, <span class="hljs-number">1</span>, <span class="hljs-string">"å‡†å¤‡é˜¶æ®µ"</span>),
    <span class="hljs-string">"fetch_financial_data"</span>: (<span class="hljs-string">"é‡‡é›†è´¢æŠ¥æ•°æ®"</span>, <span class="hljs-number">5</span>, <span class="hljs-string">"æ•°æ®é‡‡é›†"</span>),
    <span class="hljs-string">"fetch_news_data"</span>: (<span class="hljs-string">"é‡‡é›†æ–°é—»èµ„è®¯"</span>, <span class="hljs-number">3</span>, <span class="hljs-string">"æ•°æ®é‡‡é›†"</span>),
    <span class="hljs-string">"fetch_market_data"</span>: (<span class="hljs-string">"é‡‡é›†è¡Œæƒ…æ•°æ®"</span>, <span class="hljs-number">2</span>, <span class="hljs-string">"æ•°æ®é‡‡é›†"</span>),
    <span class="hljs-string">"validate_data"</span>: (<span class="hljs-string">"äº¤å‰éªŒè¯æ•°æ®"</span>, <span class="hljs-number">3</span>, <span class="hljs-string">"æ•°æ®å¤„ç†"</span>),
    <span class="hljs-string">"deep_analysis"</span>: (<span class="hljs-string">"æ·±åº¦åˆ†æ"</span>, <span class="hljs-number">10</span>, <span class="hljs-string">"æ™ºèƒ½åˆ†æ"</span>),
    <span class="hljs-string">"extract_insights"</span>: (<span class="hljs-string">"æç‚¼æ ¸å¿ƒè§‚ç‚¹"</span>, <span class="hljs-number">5</span>, <span class="hljs-string">"æ™ºèƒ½åˆ†æ"</span>),
    <span class="hljs-string">"generate_report"</span>: (<span class="hljs-string">"ç”Ÿæˆç ”æŠ¥å†…å®¹"</span>, <span class="hljs-number">8</span>, <span class="hljs-string">"æŠ¥å‘Šç”Ÿæˆ"</span>),
    <span class="hljs-string">"compliance_check"</span>: (<span class="hljs-string">"åˆè§„æ€§å®¡æŸ¥"</span>, <span class="hljs-number">3</span>, <span class="hljs-string">"è´¨é‡ä¿éšœ"</span>),
}


<span class="hljs-comment"># ========== 3. Agent ä¸­ç›‘å¬èŠ‚ç‚¹äº‹ä»¶ ==========</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ResearchReportAgent</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.parallel_tasks = {}  <span class="hljs-comment"># è·Ÿè¸ªå¹¶è¡Œä»»åŠ¡çŠ¶æ€</span>
        self.retry_count = {}     <span class="hljs-comment"># è·Ÿè¸ªé‡è¯•æ¬¡æ•°</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_stream</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, **kwargs</span>):
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> self.graph.astream_events(inputs, config):
            event_type = event.get(<span class="hljs-string">"event"</span>, <span class="hljs-string">""</span>)
            node_name = event.get(<span class="hljs-string">"name"</span>, <span class="hljs-string">""</span>)
            
            <span class="hljs-comment"># ===== èŠ‚ç‚¹å¼€å§‹äº‹ä»¶ =====</span>
            <span class="hljs-keyword">if</span> event_type == <span class="hljs-string">"on_chain_start"</span>:
                <span class="hljs-keyword">if</span> node_name <span class="hljs-keyword">in</span> NODE_PROGRESS_MAP:
                    desc, est_time, stage = NODE_PROGRESS_MAP[node_name]
                    
                    <span class="hljs-comment"># å¤„ç†é‡è¯•åœºæ™¯</span>
                    retry = self.retry_count.get(node_name, <span class="hljs-number">0</span>)
                    retry_hint = <span class="hljs-string">f"ï¼ˆç¬¬ <span class="hljs-subst">{retry + <span class="hljs-number">1</span>}</span> æ¬¡å°è¯•ï¼‰"</span> <span class="hljs-keyword">if</span> retry &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>
                    
                    <span class="hljs-keyword">yield</span> StreamChunk(
                        <span class="hljs-built_in">type</span>=ChunkType.PROCESSING,
                        content=<span class="hljs-string">f"[<span class="hljs-subst">{stage}</span>] <span class="hljs-subst">{desc}</span><span class="hljs-subst">{retry_hint}</span>..."</span>,
                        metadata={
                            <span class="hljs-string">"node"</span>: node_name,
                            <span class="hljs-string">"stage"</span>: stage,
                            <span class="hljs-string">"estimated_seconds"</span>: est_time,
                            <span class="hljs-string">"retry_count"</span>: retry
                        }
                    )
                    
                <span class="hljs-comment"># å¤„ç†å¹¶è¡Œæ•°æ®é‡‡é›†èŠ‚ç‚¹</span>
                <span class="hljs-keyword">elif</span> node_name == <span class="hljs-string">"parallel_data_fetch"</span>:
                    self.parallel_tasks = {<span class="hljs-string">"financial"</span>: <span class="hljs-string">"pending"</span>, <span class="hljs-string">"news"</span>: <span class="hljs-string">"pending"</span>, <span class="hljs-string">"market"</span>: <span class="hljs-string">"pending"</span>}
                    <span class="hljs-keyword">yield</span> StreamChunk(
                        <span class="hljs-built_in">type</span>=ChunkType.PROCESSING,
                        content=<span class="hljs-string">"[æ•°æ®é‡‡é›†] æ­£åœ¨å¹¶è¡Œé‡‡é›†å¤šæºæ•°æ®..."</span>,
                        metadata={<span class="hljs-string">"parallel_status"</span>: self.parallel_tasks}
                    )
            
            <span class="hljs-comment"># ===== èŠ‚ç‚¹ç»“æŸäº‹ä»¶ =====</span>
            <span class="hljs-keyword">elif</span> event_type == <span class="hljs-string">"on_chain_end"</span>:
                <span class="hljs-comment"># æ›´æ–°å¹¶è¡Œä»»åŠ¡çŠ¶æ€</span>
                <span class="hljs-keyword">if</span> node_name == <span class="hljs-string">"fetch_financial_data"</span>:
                    self.parallel_tasks[<span class="hljs-string">"financial"</span>] = <span class="hljs-string">"completed"</span>
                    <span class="hljs-keyword">yield</span> StreamChunk(
                        <span class="hljs-built_in">type</span>=ChunkType.PROCESSING,
                        content=<span class="hljs-string">"[æ•°æ®é‡‡é›†] è´¢æŠ¥æ•°æ®é‡‡é›†å®Œæˆ âœ“"</span>,
                        metadata={<span class="hljs-string">"parallel_status"</span>: self.parallel_tasks.copy()}
                    )
                
                <span class="hljs-comment"># å¤„ç†éªŒè¯å¤±è´¥è§¦å‘é‡è¯•çš„åœºæ™¯</span>
                <span class="hljs-keyword">elif</span> node_name == <span class="hljs-string">"validate_data"</span>:
                    output = event.get(<span class="hljs-string">"data"</span>, {}).get(<span class="hljs-string">"output"</span>, {})
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> output.get(<span class="hljs-string">"is_valid"</span>, <span class="hljs-literal">True</span>):
                        failed_sources = output.get(<span class="hljs-string">"failed_sources"</span>, [])
                        <span class="hljs-keyword">for</span> src <span class="hljs-keyword">in</span> failed_sources:
                            self.retry_count[<span class="hljs-string">f"fetch_<span class="hljs-subst">{src}</span>_data"</span>] = self.retry_count.get(<span class="hljs-string">f"fetch_<span class="hljs-subst">{src}</span>_data"</span>, <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
                        <span class="hljs-keyword">yield</span> StreamChunk(
                            <span class="hljs-built_in">type</span>=ChunkType.PROCESSING,
                            content=<span class="hljs-string">f"[æ•°æ®å¤„ç†] éªŒè¯æœªé€šè¿‡ï¼Œ<span class="hljs-subst">{failed_sources}</span> å°†é‡æ–°é‡‡é›†..."</span>,
                            metadata={<span class="hljs-string">"retry_sources"</span>: failed_sources}
                        )
                
                <span class="hljs-comment"># å›¾æ‰§è¡Œå®Œæ¯•ï¼Œè¾“å‡ºæœ€ç»ˆç»“æœ</span>
                <span class="hljs-keyword">elif</span> node_name == <span class="hljs-string">"LangGraph"</span>:
                    final_output = event[<span class="hljs-string">"data"</span>][<span class="hljs-string">"output"</span>]
                    <span class="hljs-keyword">yield</span> StreamChunk(
                        <span class="hljs-built_in">type</span>=ChunkType.FINAL,
                        content=<span class="hljs-string">""</span>,
                        metadata={<span class="hljs-string">"report"</span>: final_output}
                    )
            
            <span class="hljs-comment"># ===== LLM æµå¼è¾“å‡ºäº‹ä»¶ =====</span>
            <span class="hljs-keyword">elif</span> event_type == <span class="hljs-string">"on_chat_model_stream"</span>:
                chunk = event[<span class="hljs-string">"data"</span>][<span class="hljs-string">"chunk"</span>]
                delta = chunk.message.chat_completion_chunk.choices[<span class="hljs-number">0</span>].delta
                
                <span class="hljs-keyword">if</span> delta.reasoning_content:
                    <span class="hljs-keyword">yield</span> StreamChunk(<span class="hljs-built_in">type</span>=ChunkType.THINKING, content=delta.reasoning_content)
                <span class="hljs-keyword">elif</span> delta.content:
                    <span class="hljs-keyword">yield</span> StreamChunk(<span class="hljs-built_in">type</span>=ChunkType.CONTENT, content=delta.content)
</code></pre>
<p>å‰ç«¯æ‹¿åˆ°çš„æµå¼è¾“å‡ºä¼šæ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[å‡†å¤‡é˜¶æ®µ] è§£æç”¨æˆ·è¾“å…¥..."</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"parse_input"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"stage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å‡†å¤‡é˜¶æ®µ"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"estimated_seconds"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æ•°æ®é‡‡é›†] æ­£åœ¨å¹¶è¡Œé‡‡é›†å¤šæºæ•°æ®..."</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"parallel_status"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"financial"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pending"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pending"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"market"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pending"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æ•°æ®é‡‡é›†] é‡‡é›†æ–°é—»èµ„è®¯..."</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fetch_news_data"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"stage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ•°æ®é‡‡é›†"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æ•°æ®é‡‡é›†] é‡‡é›†è´¢æŠ¥æ•°æ®..."</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fetch_financial_data"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"stage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ•°æ®é‡‡é›†"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æ•°æ®é‡‡é›†] æ–°é—»æ•°æ®é‡‡é›†å®Œæˆ âœ“"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"parallel_status"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"financial"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pending"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"completed"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"market"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pending"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æ•°æ®é‡‡é›†] è´¢æŠ¥æ•°æ®é‡‡é›†å®Œæˆ âœ“"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"parallel_status"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"financial"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"completed"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"completed"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"market"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pending"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æ•°æ®é‡‡é›†] è¡Œæƒ…æ•°æ®é‡‡é›†å®Œæˆ âœ“"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"parallel_status"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"financial"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"completed"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"completed"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"market"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"completed"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æ•°æ®å¤„ç†] äº¤å‰éªŒè¯æ•°æ®..."</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"validate_data"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æ•°æ®å¤„ç†] éªŒè¯æœªé€šè¿‡ï¼Œ['market'] å°†é‡æ–°é‡‡é›†..."</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"retry_sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"market"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æ•°æ®é‡‡é›†] é‡‡é›†è¡Œæƒ…æ•°æ®ï¼ˆç¬¬ 2 æ¬¡å°è¯•ï¼‰..."</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fetch_market_data"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"retry_count"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æ™ºèƒ½åˆ†æ] æ·±åº¦åˆ†æ..."</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"deep_analysis"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"estimated_seconds"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"thinking"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘éœ€è¦ä»å¤šä¸ªç»´åº¦åˆ†æè¿™å®¶å…¬å¸..."</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"thinking"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¦–å…ˆçœ‹è´¢åŠ¡æ•°æ®ï¼Œè¥æ”¶åŒæ¯”å¢é•¿..."</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"content"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"## ä¸€ã€å…¬å¸æ¦‚å†µ\n\n"</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"content"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯¥å…¬å¸æ˜¯å›½å†…é¢†å…ˆçš„..."</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æ™ºèƒ½åˆ†æ] æç‚¼æ ¸å¿ƒè§‚ç‚¹..."</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"extract_insights"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[æŠ¥å‘Šç”Ÿæˆ] ç”Ÿæˆç ”æŠ¥å†…å®¹..."</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"generate_report"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"processing"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[è´¨é‡ä¿éšœ] åˆè§„æ€§å®¡æŸ¥..."</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"compliance_check"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"final"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"report"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"XXå…¬å¸æ·±åº¦ç ”ç©¶æŠ¥å‘Š"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"sections"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>...<span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>æ•´ä¸ªè®¾è®¡çš„è¦ç‚¹ï¼š</p>
<ol>
<li><strong>ç»Ÿä¸€è¾“å‡ºæ ¼å¼</strong>ï¼š<code>StreamChunk</code> å®šä¹‰ <code>type</code> å­—æ®µï¼Œå‰ç«¯æŒ‰ç±»å‹åˆ†åˆ«å¤„ç†</li>
<li><strong>èŠ‚ç‚¹é…ç½®å¯æ‰©å±•</strong>ï¼š<code>NODE_PROGRESS_MAP</code> é›†ä¸­ç®¡ç†èŠ‚ç‚¹æè¿°ï¼Œæ–°å¢èŠ‚ç‚¹åªéœ€åŠ ä¸€è¡Œé…ç½®</li>
<li><strong>å¹¶è¡Œä»»åŠ¡å¯è¿½è¸ª</strong>ï¼šé€šè¿‡ <code>parallel_status</code> å­—æ®µï¼Œå‰ç«¯å¯ä»¥æ¸²æŸ“å¤šä»»åŠ¡è¿›åº¦æ¡</li>
<li><strong>é‡è¯•è¿‡ç¨‹é€æ˜</strong>ï¼šéªŒè¯å¤±è´¥ã€é‡æ–°é‡‡é›†ç­‰å¼‚å¸¸æµç¨‹å¯¹ç”¨æˆ·å¯è§ï¼Œå¢å¼ºå¯ä¿¡åº¦</li>
<li><strong>é¢„ä¼°æ—¶é—´å¯ç”¨</strong>ï¼š<code>estimated_seconds</code> å¯ç”¨äºå‰ç«¯æ¸²æŸ“é¢„ä¼°è¿›åº¦æ¡</li>
</ol>
<hr/>
<h3 data-id="heading-13">æ€»ç»“</h3>
<p>æœ¬æ–‡åˆ†äº«äº†åœ¨å¼€å‘ <code>open-pilot-agent</code> è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸‰ä¸ªç”Ÿäº§çº§æŒ‘æˆ˜ï¼Œä»¥åŠå¯¹åº”çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li><strong>å¤šç§Ÿæˆ· API é…ç½®çš„åŠ¨æ€åˆ‡æ¢</strong>ï¼šé€šè¿‡ Agent å¤ç”¨ + Client æŒ‰éœ€åˆ›å»º + HTTP è¿æ¥æ± å…±äº«ï¼Œè§£å†³é…ç½®åŠ¨æ€åˆ‡æ¢å’Œèµ„æºç®¡ç†é—®é¢˜</li>
<li><strong>æ¨¡å‹æ€è€ƒè¿‡ç¨‹çš„æµå¼é€ä¼ </strong>ï¼šé€šè¿‡è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹å’Œ ChatModelï¼Œä¿ç•™ OpenAI åŸå§‹å“åº”ä¸­çš„ <code>reasoning_content</code> å­—æ®µ</li>
<li><strong>ä¸­é—´æ‰§è¡Œè·¯å¾„çš„å¯è§‚æµ‹æ€§</strong>ï¼šé€šè¿‡ç›‘å¬ LangGraph çš„ <code>astream_events</code>ï¼Œå°†èŠ‚ç‚¹æ‰§è¡Œè¿›åº¦å®æ—¶é€ä¼ ç»™å‰ç«¯</li>
</ol>
<p>åç»­ä½œè€…å°†ä¼šç»§ç»­åˆ†äº«ç”Ÿäº§çº§ Agent çš„å®é™…å·¥ç¨‹ç»éªŒã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºspring boot3 + websocket + stomp + é›†ç¾¤ä¼šè¯ç®¡ç† + token è®¤è¯ + ack æ¶ˆæ¯ç¡®è®¤ï¼Œå®ŒæˆæœåŠ¡å™¨å•å‘æ¶ˆæ¯æ¨é€]]></title>    <link>https://juejin.cn/post/7601169987396665395</link>    <guid>https://juejin.cn/post/7601169987396665395</guid>    <pubDate>2026-01-31T09:17:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601169987396665395" data-draft-id="7601077764423876658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºspring boot3 + websocket + stomp + é›†ç¾¤ä¼šè¯ç®¡ç† + token è®¤è¯ + ack æ¶ˆæ¯ç¡®è®¤ï¼Œå®ŒæˆæœåŠ¡å™¨å•å‘æ¶ˆæ¯æ¨é€"/> <meta itemprop="keywords" content="WebSocket,Spring Boot"/> <meta itemprop="datePublished" content="2026-01-31T09:17:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·9743697072528"/> <meta itemprop="url" content="https://juejin.cn/user/2007041425282698"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºspring boot3 + websocket + stomp + é›†ç¾¤ä¼šè¯ç®¡ç† + token è®¤è¯ + ack æ¶ˆæ¯ç¡®è®¤ï¼Œå®ŒæˆæœåŠ¡å™¨å•å‘æ¶ˆæ¯æ¨é€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2007041425282698/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·9743697072528
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T09:17:40.000Z" title="Sat Jan 31 2026 09:17:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p align="center">
  </p><p align="center">
    åŸºäº Spring Boot 3 + WebSocket STOMP + Redis çš„ä¼ä¸šçº§å®æ—¶æ¶ˆæ¯æ¨é€ç³»ç»Ÿ
    <br/>
    <strong>å·²åœ¨ç”Ÿäº§ç¯å¢ƒéªŒè¯ï¼Œè½»æ¾åº”å¯¹ä¸‡çº§æ—¥æ´»ç”¨æˆ·</strong>
  </p>
<p/>
<p align="center">
  <a href="#ç‰¹æ€§" title="#ç‰¹æ€§">ç‰¹æ€§</a> â€¢
  <a href="#å¿«é€Ÿå¼€å§‹" title="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#æ ¸å¿ƒåŠŸèƒ½è¯¦è§£" title="#æ ¸å¿ƒåŠŸèƒ½è¯¦è§£">æ ¸å¿ƒåŠŸèƒ½è¯¦è§£</a> â€¢
  <a href="#æ¥å…¥æŒ‡å—" title="#æ¥å…¥æŒ‡å—">æ¥å…¥æŒ‡å—</a> â€¢
  <a href="#api-æ–‡æ¡£" title="#api-æ–‡æ¡£">API æ–‡æ¡£</a>
</p>
<hr/>
<ul>
<li>GitHubåœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyangli-stu%2Fquick-notify" target="_blank" title="https://github.com/yangli-stu/quick-notify" ref="nofollow noopener noreferrer">github.com/yangli-stu/â€¦</a></li>
</ul>
<h2 data-id="heading-0">ç‰¹æ€§</h2>

































<table><thead><tr><th>ç‰¹æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>å®æ—¶æ¨é€</strong></td><td>åŸºäº WebSocket + STOMP åè®®ï¼Œæ¯«ç§’çº§æ¶ˆæ¯é€è¾¾</td></tr><tr><td><strong>Token è®¤è¯</strong></td><td>æ”¯æŒ JWT ç­‰å¤šç§è®¤è¯æ–¹å¼ï¼Œå®‰å…¨å¯é </td></tr><tr><td><strong>æ¶ˆæ¯ç¡®è®¤ (ACK)</strong></td><td>è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼Œç¡®ä¿æ¶ˆæ¯å¯é é€è¾¾</td></tr><tr><td><strong>é›†ç¾¤æ”¯æŒ</strong></td><td>åŸºäº Redis Pub/Subï¼Œæ”¯æŒå¤šèŠ‚ç‚¹æ°´å¹³æ‰©å±•</td></tr><tr><td><strong>æ¶ˆæ¯æŒä¹…åŒ–</strong></td><td>æ”¯æŒå†å²æ¶ˆæ¯å­˜å‚¨ä¸æŸ¥è¯¢</td></tr><tr><td><strong>å¼€ç®±å³ç”¨</strong></td><td>å®Œæ•´çš„å‰åç«¯ç¤ºä¾‹ï¼Œ5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1">æŠ€æœ¯æ ˆ</h2>













































<table><thead><tr><th>æŠ€æœ¯</th><th>ç‰ˆæœ¬</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Spring Boot</td><td>3.2.11</td><td>åº”ç”¨æ¡†æ¶</td></tr><tr><td>Java</td><td>21</td><td>å¼€å‘è¯­è¨€</td></tr><tr><td>WebSocket + STOMP</td><td>-</td><td>å®æ—¶é€šä¿¡åè®®</td></tr><tr><td>SockJS</td><td>1.x</td><td>æµè§ˆå™¨å…¼å®¹é™çº§</td></tr><tr><td>Redisson</td><td>3.37.0</td><td>Redis å®¢æˆ·ç«¯ + åˆ†å¸ƒå¼æ”¯æŒ</td></tr><tr><td>CosId</td><td>2.8.1</td><td>åˆ†å¸ƒå¼é›ªèŠ± ID ç”Ÿæˆ</td></tr><tr><td>Spring Data JPA</td><td>-</td><td>æ•°æ®æŒä¹…åŒ–</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-3">ç¯å¢ƒè¦æ±‚</h3>
<ul>
<li>Java 21+</li>
<li>Maven 3.8+</li>
<li>Redis 6+ (æˆ– Docker)</li>
</ul>
<h3 data-id="heading-4">1. å¯åŠ¨ Redis</h3>
<pre><code class="hljs language-bash" lang="bash">docker run -d --name redis -p 6379:6379 redis
</code></pre>
<h3 data-id="heading-5">2. å…‹éš†å¹¶è¿è¡Œ</h3>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/your-repo/quick-notify.git
<span class="hljs-built_in">cd</span> quick-notify
mvn spring-boot:run
</code></pre>
<h3 data-id="heading-6">3. æ‰“å¼€æµ‹è¯•é¡µé¢</h3>
<p>æµè§ˆå™¨è®¿é—® <code>http://localhost:2025/stomp-websocket-sockjs.html</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff172b98ac824291a92981c8a8878ef7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTc0MzY5NzA3MjUyOA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770455860&amp;x-signature=PvDYYhH7MWFMWeX4tIjFR0DBytg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-7">4. å‘é€æµ‹è¯•æ¶ˆæ¯(æ¨¡æ‹ŸæœåŠ¡å™¨æ¨é€æ¶ˆæ¯)</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‘é€ç»™æŒ‡å®šç”¨æˆ·</span>
curl -X POST -d <span class="hljs-string">"Hello World"</span> http://localhost:2025/vh-stomp-wsend/push_all_obj/test1

<span class="hljs-comment"># å¹¿æ’­ç»™æ‰€æœ‰åœ¨çº¿ç”¨æˆ·</span>
curl -X POST -d <span class="hljs-string">"å¹¿æ’­æ¶ˆæ¯"</span> http://localhost:2025/vh-stomp-wsend/push_all_obj
</code></pre>
<hr/>
<h2 data-id="heading-8">æ ¸å¿ƒåŠŸèƒ½è¯¦è§£</h2>
<h3 data-id="heading-9">1. Token è®¤è¯</h3>
<h4 data-id="heading-10">è®¤è¯æµç¨‹</h4>
<pre><code class="hljs language-sql" lang="sql">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    å®¢æˆ·ç«¯     â”‚                              â”‚    æœåŠ¡ç«¯     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                             â”‚
       â”‚  <span class="hljs-number">1.</span> STOMP <span class="hljs-keyword">CONNECT</span>                           â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
       â”‚  â”‚ <span class="hljs-keyword">CONNECT</span>                      â”‚           â”‚
       â”‚  â”‚ <span class="hljs-keyword">Authorization</span>: Bearer <span class="hljs-operator">&lt;</span>JWT<span class="hljs-operator">&gt;</span>  â”‚           â”‚
       â”‚  â”‚ accept<span class="hljs-operator">-</span>version: <span class="hljs-number">1.2</span>          â”‚           â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<span class="hljs-operator">&gt;</span>  â”‚
       â”‚                                             â”‚
       â”‚                    <span class="hljs-number">2.</span> StompWebsocketInterceptor æ‹¦æˆª
       â”‚                       â”œâ”€ æå– <span class="hljs-keyword">Authorization</span> å¤´
       â”‚                       â”œâ”€ è§£æ Token è·å– userId
       â”‚                       â”œâ”€ æ ¡éªŒç”¨æˆ·è¿æ¥æ•° (â‰¤<span class="hljs-number">10</span>)
       â”‚                       â””â”€ ç»‘å®š Principal åˆ°ä¼šè¯
       â”‚                                             â”‚
       â”‚  <span class="hljs-number">3.</span> STOMP CONNECTED                         â”‚
       â”‚ <span class="hljs-operator">&lt;</span>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
       â”‚                                             â”‚
       â”‚  <span class="hljs-number">4.</span> åç»­æ¶ˆæ¯è‡ªåŠ¨æºå¸¦ç”¨æˆ·èº«ä»½                    â”‚
       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<span class="hljs-operator">&gt;</span>  â”‚
</code></pre>
<h4 data-id="heading-11">æ ¸å¿ƒä»£ç </h4>
<p><strong>æœåŠ¡ç«¯æ‹¦æˆªå™¨</strong> (<code>StompWebsocketInterceptor.java</code>)ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StompWebsocketInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ChannelInterceptor</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Message&lt;?&gt; preSend(Message&lt;?&gt; message, MessageChannel channel) {
        <span class="hljs-type">StompHeaderAccessor</span> <span class="hljs-variable">accessor</span> <span class="hljs-operator">=</span> MessageHeaderAccessor.getAccessor(
            message, StompHeaderAccessor.class);
        
        <span class="hljs-keyword">if</span> (StompCommand.CONNECT.equals(accessor.getCommand())) {
            <span class="hljs-comment">// 1. ä»è¯·æ±‚å¤´æå– Token</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> accessor.getNativeHeader(<span class="hljs-string">"Authorization"</span>).get(<span class="hljs-number">0</span>);
            
            <span class="hljs-comment">// 2. è§£æ Token è·å–ç”¨æˆ·IDï¼ˆæ”¯æŒ JWT æˆ–è‡ªå®šä¹‰æ–¹å¼ï¼‰</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> extractUserFromToken(token);
            
            <span class="hljs-comment">// 3. æ ¡éªŒç”¨æˆ·è¿æ¥æ•°é™åˆ¶</span>
            List&lt;String&gt; existingSessions = Optional
                .ofNullable(simpUserRegistry.getUser(userId))
                .map(SimpUser::getSessions)
                .map(sessions -&gt; sessions.stream().map(SimpSession::getId).toList())
                .orElse(List.of());
                
            <span class="hljs-keyword">if</span> (existingSessions.size() &gt; <span class="hljs-number">10</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"ç”¨æˆ·è¿æ¥æ•°è¶…é™"</span>);
            }
            
            <span class="hljs-comment">// 4. ç»‘å®šç”¨æˆ·èº«ä»½åˆ° WebSocket ä¼šè¯</span>
            accessor.setUser(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPrincipal</span>(userId));
        }
        <span class="hljs-keyword">return</span> message;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">extractUserFromToken</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-comment">// å¼€å‘ç¯å¢ƒï¼šç›´æ¥ä½¿ç”¨ token ä½œä¸ºç”¨æˆ·ID</span>
        <span class="hljs-keyword">if</span> (SpringContextUtil.isDevEnv() &amp;&amp; token.startsWith(<span class="hljs-string">"test"</span>)) {
            <span class="hljs-keyword">return</span> token;
        }
        <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒï¼šè§£æ JWT</span>
        <span class="hljs-keyword">return</span> SpringContextUtil.getBean(JwtDecoder.class)
            .decode(token).getSubject();
    }
}
</code></pre>
<p><strong>å®¢æˆ·ç«¯è¿æ¥</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> stompClient = <span class="hljs-title class_">Stomp</span>.<span class="hljs-title function_">over</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SockJS</span>(<span class="hljs-string">'/stomp-ws'</span>));

stompClient.<span class="hljs-title function_">connect</span>(
    { <span class="hljs-title class_">Authorization</span>: <span class="hljs-string">'Bearer eyJhbGciOiJIUzI1NiJ9...'</span> },  <span class="hljs-comment">// JWT Token</span>
    <span class="hljs-keyword">function</span>(<span class="hljs-params">frame</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿æ¥æˆåŠŸï¼Œç”¨æˆ·èº«ä»½å·²ç»‘å®š'</span>);
    },
    <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¿æ¥å¤±è´¥:'</span>, error);
    }
);
</code></pre>
<h4 data-id="heading-12">è‡ªå®šä¹‰è®¤è¯æ–¹å¼</h4>
<p>å¦‚éœ€æ¥å…¥å…¶ä»–è®¤è¯ç³»ç»Ÿï¼Œä¿®æ”¹ <code>extractUserFromToken</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> String <span class="hljs-title function_">extractUserFromToken</span><span class="hljs-params">(String token)</span> {
    <span class="hljs-comment">// æ–¹å¼1ï¼šJWT è§£æ</span>
    <span class="hljs-keyword">return</span> jwtDecoder.decode(token).getSubject();
    
    <span class="hljs-comment">// æ–¹å¼2ï¼šè°ƒç”¨ç”¨æˆ·ä¸­å¿ƒéªŒè¯</span>
    <span class="hljs-keyword">return</span> userCenterClient.validateToken(token).getUserId();
    
    <span class="hljs-comment">// æ–¹å¼3ï¼šRedis Session éªŒè¯</span>
    <span class="hljs-keyword">return</span> redisTemplate.opsForValue().get(<span class="hljs-string">"session:"</span> + token);
}
</code></pre>
<hr/>
<h3 data-id="heading-13">2. æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ (ACK)</h3>
<h4 data-id="heading-14">è®¾è®¡ç›®æ ‡</h4>
<p>è§£å†³ä»¥ä¸‹åœºæ™¯çš„æ¶ˆæ¯ä¸¢å¤±é—®é¢˜ï¼š</p>
<ul>
<li>ç½‘ç»œæŠ–åŠ¨å¯¼è‡´æ¶ˆæ¯æœªé€è¾¾</li>
<li>å®¢æˆ·ç«¯å´©æºƒæœªå¤„ç†æ¶ˆæ¯</li>
<li>å¤šè®¾å¤‡åŒæ­¥ç¡®ä¿æ¯ä¸ªè®¾å¤‡éƒ½æ”¶åˆ°</li>
</ul>
<h4 data-id="heading-15">å·¥ä½œæµç¨‹</h4>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ¶ˆæ¯å‘é€é˜¶æ®µ                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  sendMessageWithAck(message)                                        â”‚
â”‚         â”‚                                                           â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚         â”‚                                                      â”‚    â”‚
â”‚         â–¼                                                      â–¼    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ æ¨é€åˆ° WebSocket â”‚                              â”‚ åˆ›å»º ACK è®°å½•    â”‚
â”‚  â”‚ /user/queue/msg â”‚                              â”‚ Redis Hash      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚           â”‚                                                â”‚        â”‚
â”‚           â”‚  Key: stomp::pending_messages                  â”‚        â”‚
â”‚           â”‚  Field: {msgId}::{sessionId}                   â”‚        â”‚
â”‚           â”‚  Value: NotifyMessage å¯¹è±¡                      â”‚        â”‚
â”‚           â”‚                                                â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                                â”‚
            â–¼                                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®¢æˆ·ç«¯å¤„ç†é˜¶æ®µ                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  å®¢æˆ·ç«¯æ”¶åˆ°æ¶ˆæ¯                                                       â”‚
â”‚         â”‚                                                           â”‚
â”‚         â”œâ”€&gt; å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ˆéœ€åšå¹‚ç­‰å¤„ç†ï¼‰                                 â”‚
â”‚         â”‚                                                           â”‚
â”‚         â””â”€&gt; å‘é€ ACK ç¡®è®¤                                            â”‚
â”‚              stompClient.<span class="hljs-built_in">send</span>(<span class="hljs-string">'/app/ack'</span>, {}, messageId)            â”‚
â”‚                     â”‚                                               â”‚
â”‚                     â–¼                                               â”‚
â”‚              æœåŠ¡ç«¯æ”¶åˆ° ACK                                           â”‚
â”‚                     â”‚                                               â”‚
â”‚                     â””â”€&gt; ä» Redis ç§»é™¤ ACK è®°å½•                        â”‚
â”‚                         log: [ACK-REDIS] ç¡®è®¤æˆåŠŸ                     â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ å¦‚æœå®¢æˆ·ç«¯æœªå‘é€ ACK
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®šæ—¶é‡è¯•é˜¶æ®µï¼ˆæ¯ <span class="hljs-number">5</span> ç§’ï¼‰                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  @<span class="hljs-built_in">Scheduled</span>(fixedDelay = <span class="hljs-number">5000</span>)                                      â”‚
â”‚  <span class="hljs-built_in">retryRedisMessages</span>()                                               â”‚
â”‚         â”‚                                                           â”‚
â”‚         â”œâ”€&gt; éå† Redis ä¸­æ‰€æœ‰å¾…ç¡®è®¤æ¶ˆæ¯                                â”‚
â”‚         â”‚                                                           â”‚
â”‚         â”œâ”€&gt; æ£€æŸ¥æ¡ä»¶ï¼š                                                â”‚
â”‚         â”‚   â€¢ åˆ›å»ºæ—¶é—´ &gt; <span class="hljs-number">5</span>ç§’ï¼ˆç­‰å¾…çª—å£ï¼‰                                â”‚
â”‚         â”‚   â€¢ é‡è¯•æ¬¡æ•° &lt; <span class="hljs-number">12</span>æ¬¡                                         â”‚
â”‚         â”‚   â€¢ æ€»æ—¶é•¿ &lt; <span class="hljs-number">60</span>ç§’                                           â”‚
â”‚         â”‚   â€¢ ç›®æ ‡ Session ä»åœ¨çº¿                                     â”‚
â”‚         â”‚                                                           â”‚
â”‚         â”œâ”€&gt; ç¬¦åˆæ¡ä»¶ï¼šé‡æ–°å‘é€æ¶ˆæ¯ï¼ŒretryCount++                        â”‚
â”‚         â”‚                                                           â”‚
â”‚         â””â”€&gt; è¶…è¿‡é™åˆ¶ï¼šç§»é™¤è®°å½•ï¼Œlog: [ACK-REDIS] æ¶ˆæ¯è¿‡æœŸ                â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-16">é…ç½®å‚æ•°</h4>









































<table><thead><tr><th>å‚æ•°</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th><th>ä¿®æ”¹ä½ç½®</th></tr></thead><tbody><tr><td><code>ACK_CHECK_WAIT_MS</code></td><td>5000ms</td><td>é¦–æ¬¡æ£€æŸ¥ç­‰å¾…æ—¶é—´</td><td><code>StompWebSocketHandler.java:38</code></td></tr><tr><td><code>ACK_RETRY_INTERVAL_MS</code></td><td>5000ms</td><td>é‡è¯•é—´éš”</td><td><code>StompWebSocketHandler.java:39</code></td></tr><tr><td><code>ACK_MESSAGE_TTL_MS</code></td><td>60000ms</td><td>æ¶ˆæ¯æœ€å¤§å­˜æ´»æ—¶é—´</td><td><code>StompWebSocketHandler.java:40</code></td></tr><tr><td><code>ACK_MAX_RETRY_COUNT</code></td><td>12</td><td>æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰</td><td><code>StompWebSocketHandler.java:41</code></td></tr><tr><td><code>enableLocalAck</code></td><td>false</td><td>æ˜¯å¦ä½¿ç”¨æœ¬åœ°ç¼“å­˜</td><td><code>StompWebSocketHandler.java:44</code></td></tr></tbody></table>
<h4 data-id="heading-17">æ ¸å¿ƒä»£ç </h4>
<p><strong>å‘é€å¸¦ ACK çš„æ¶ˆæ¯</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessageWithAck</span><span class="hljs-params">(NotifyMessage message)</span> {
    <span class="hljs-type">SimpUser</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRegistry.getUser(message.getReceiver());
    <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span> &amp;&amp; user.hasSessions()) {
        <span class="hljs-comment">// ä¸ºç”¨æˆ·çš„æ¯ä¸ªä¼šè¯ï¼ˆå¤šè®¾å¤‡ï¼‰åˆ†åˆ«åˆ›å»º ACK è®°å½•</span>
        <span class="hljs-keyword">for</span> (SimpSession session : user.getSessions()) {
            <span class="hljs-comment">// 1. å‘é€æ¶ˆæ¯åˆ°æŒ‡å®š Session</span>
            sendMessage(message, session.getId());
            <span class="hljs-comment">// 2. åˆ›å»º ACK è¿½è¸ªè®°å½•</span>
            addAckMessageRecord(message, session.getId());
        }
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addToRedis</span><span class="hljs-params">(NotifyMessage message, String sessionId)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">ackKey</span> <span class="hljs-operator">=</span> buildAckKey(message.getId(), sessionId);  <span class="hljs-comment">// msgId::sessionId</span>
    RMap&lt;String, NotifyMessage&gt; map = redisson.getMap(PENDING_MAP_KEY);
    
    message.setCreated(System.currentTimeMillis());
    message.setAckRetryCount(<span class="hljs-number">0</span>);
    message.setAckLastSent(System.currentTimeMillis());
    
    map.put(ackKey, message);
    log.info(<span class="hljs-string">"[ACK-REDIS] æ¶ˆæ¯å…¥é˜Ÿ, msgId {}, sessionId {}, receiver {}"</span>,
        message.getId(), sessionId, message.getReceiver());
}
</code></pre>
<p><strong>å®¢æˆ·ç«¯ ACK å¤„ç†</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">stompClient.<span class="hljs-title function_">subscribe</span>(<span class="hljs-string">'/user/queue/msg'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(message.<span class="hljs-property">body</span>);
    
    <span class="hljs-comment">// 1. å¹‚ç­‰å¤„ç†ï¼ˆé˜²æ­¢é‡å¤æ¶ˆæ¯ï¼‰</span>
    <span class="hljs-keyword">if</span> (processedIds.<span class="hljs-title function_">has</span>(data.<span class="hljs-property">id</span>)) {
        stompClient.<span class="hljs-title function_">send</span>(<span class="hljs-string">'/app/ack'</span>, {}, data.<span class="hljs-property">id</span>);  <span class="hljs-comment">// ä»éœ€å‘é€ ACK</span>
        <span class="hljs-keyword">return</span>;
    }
    processedIds.<span class="hljs-title function_">add</span>(data.<span class="hljs-property">id</span>);
    
    <span class="hljs-comment">// 2. å¤„ç†ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-title function_">handleNotification</span>(data);
    
    <span class="hljs-comment">// 3. å‘é€ ACK ç¡®è®¤ï¼ˆé‡è¦ï¼ï¼‰</span>
    stompClient.<span class="hljs-title function_">send</span>(<span class="hljs-string">'/app/ack'</span>, {}, data.<span class="hljs-property">id</span>);
});
</code></pre>
<h4 data-id="heading-18">ç›‘æ§æ—¥å¿—</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æ¶ˆæ¯å…¥é˜Ÿ</span>
[<span class="hljs-meta">ACK-REDIS</span>] æ¶ˆæ¯å…¥é˜Ÿ, msgId msg<span class="hljs-number">-123</span>, sessionId sess<span class="hljs-number">-456</span>, receiver user<span class="hljs-number">-789</span>

<span class="hljs-meta"># ç¡®è®¤æˆåŠŸ</span>
[<span class="hljs-meta">ACK-REDIS</span>] ç¡®è®¤æˆåŠŸ, msgId msg<span class="hljs-number">-123</span>, sessionId sess<span class="hljs-number">-456</span>, retryCount <span class="hljs-number">0</span>

<span class="hljs-meta"># é‡è¯•å‘é€</span>
[<span class="hljs-meta">ACK-REDIS</span>] é‡å‘, msgId msg<span class="hljs-number">-123</span>, sessionId sess<span class="hljs-number">-456</span>, retryCount <span class="hljs-number">3</span>

<span class="hljs-meta"># å®šæ—¶ä»»åŠ¡æ±‡æ€»</span>
[<span class="hljs-meta">ACK-REDIS</span>] å®šæ—¶å¤„ç†å®Œæˆ, total <span class="hljs-number">10</span>, retried <span class="hljs-number">2</span>, expired <span class="hljs-number">1</span>, <span class="hljs-keyword">not</span> online <span class="hljs-number">0</span>
</code></pre>
<hr/>
<h3 data-id="heading-19">3. é›†ç¾¤æ¶ˆæ¯æ¨é€</h3>
<h4 data-id="heading-20">é—®é¢˜åœºæ™¯</h4>
<p>åœ¨å¤šèŠ‚ç‚¹éƒ¨ç½²æ—¶ï¼Œç”¨æˆ·å¯èƒ½è¿æ¥åˆ°ä»»æ„èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-css" lang="css">ç”¨æˆ· <span class="hljs-selector-tag">A</span> è¿æ¥åˆ° â”€â”€&gt; èŠ‚ç‚¹ <span class="hljs-number">1</span>
ç”¨æˆ· <span class="hljs-selector-tag">B</span> è¿æ¥åˆ° â”€â”€&gt; èŠ‚ç‚¹ <span class="hljs-number">2</span>

ä¸šåŠ¡ç³»ç»Ÿè°ƒç”¨èŠ‚ç‚¹ <span class="hljs-number">1</span> å‘é€æ¶ˆæ¯ç»™ç”¨æˆ· <span class="hljs-selector-tag">B</span>
é—®é¢˜ï¼šèŠ‚ç‚¹ <span class="hljs-number">1</span> æ²¡æœ‰ç”¨æˆ· <span class="hljs-selector-tag">B</span> çš„ WebSocket ä¼šè¯ï¼Œå¦‚ä½•æ¨é€ï¼Ÿ
</code></pre>
<h4 data-id="heading-21">è§£å†³æ–¹æ¡ˆ</h4>
<p>ä½¿ç”¨ Redis Pub/Sub å®ç°è·¨èŠ‚ç‚¹æ¶ˆæ¯è½¬å‘ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ä¸šåŠ¡è°ƒç”¨                                   â”‚
â”‚                                                                     â”‚
â”‚  notifyManager.saveAndPublish(message)  <span class="hljs-comment">// å‘é€ç»™ç”¨æˆ· B               â”‚</span>
â”‚         â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         èŠ‚ç‚¹ <span class="hljs-number">1</span> å¤„ç†                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  StompNotifyEventListener.handler(<span class="hljs-keyword">event</span>)                            â”‚
â”‚         â”‚                                                           â”‚
â”‚         â”œâ”€&gt; æ£€æŸ¥æœ¬åœ°æ˜¯å¦æœ‰ç”¨æˆ· B çš„ä¼šè¯                                 â”‚
â”‚         â”‚   hasSession(<span class="hljs-string">"userB"</span>) == <span class="hljs-literal">false</span>                            â”‚
â”‚         â”‚                                                           â”‚
â”‚         â””â”€&gt; å‘å¸ƒäº‹ä»¶åˆ° Redis Topic                                    â”‚
â”‚             topic.publish(NotifyMessageEvent)                       â”‚
â”‚                     â”‚                                               â”‚
â”‚                     â”‚  Topic: stomp::ws_notify_topic                â”‚
â”‚                     â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Redis Pub/Sub å¹¿æ’­åˆ°æ‰€æœ‰è®¢é˜…èŠ‚ç‚¹
                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                       â”‚
          â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      èŠ‚ç‚¹ <span class="hljs-number">1</span>         â”‚ â”‚      èŠ‚ç‚¹ <span class="hljs-number">2</span>         â”‚
â”‚                     â”‚ â”‚                     â”‚
â”‚  æ”¶åˆ°äº‹ä»¶           â”‚ â”‚  æ”¶åˆ°äº‹ä»¶           â”‚
â”‚  hasSession = <span class="hljs-literal">false</span> â”‚ â”‚  hasSession = <span class="hljs-literal">true</span>  â”‚
â”‚  å¿½ç•¥               â”‚ â”‚                     â”‚
â”‚                     â”‚ â”‚  sendMessageWithAck â”‚
â”‚                     â”‚ â”‚  æ¨é€ç»™ç”¨æˆ· B       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-22">æ ¸å¿ƒä»£ç </h4>
<p><strong>äº‹ä»¶ç›‘å¬å™¨</strong> (<code>StompNotifyEventListener.java</code>)ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StompNotifyEventListener</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">NOTIFY_TOPIC</span> <span class="hljs-operator">=</span> <span class="hljs-string">"stomp::ws_notify_topic"</span>;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> StompWebSocketHandler stompWebSocketHandler;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> Redisson redisson;

    <span class="hljs-comment">// ç›‘å¬æœ¬åœ° Spring äº‹ä»¶</span>
    <span class="hljs-meta">@Async</span>
    <span class="hljs-meta">@TransactionalEventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handler</span><span class="hljs-params">(NotifyMessageEvent event)</span> {
        handlerEvent(event, <span class="hljs-literal">true</span>);  <span class="hljs-comment">// isLocalEvent = true</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handlerEvent</span><span class="hljs-params">(NotifyMessageEvent event, <span class="hljs-type">boolean</span> isLocalEvent)</span> {
        <span class="hljs-type">NotifyMessage</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> event.notifyMessageLog().convert();
        
        <span class="hljs-keyword">if</span> (isLocalEvent) {
            <span class="hljs-comment">// æœ¬åœ°äº‹ä»¶ï¼šå¹¿æ’­åˆ° Redisï¼Œè®©é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹éƒ½èƒ½å¤„ç†</span>
            publishClusterEvent(event);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// é›†ç¾¤äº‹ä»¶ï¼šæ£€æŸ¥æœ¬åœ°æ˜¯å¦æœ‰ç›®æ ‡ç”¨æˆ·çš„ä¼šè¯</span>
        <span class="hljs-keyword">if</span> (stompWebSocketHandler.hasSession(msg.getReceiver())) {
            log.debug(<span class="hljs-string">"æœ¬åœ°æœ‰ä¼šè¯ï¼Œç›´æ¥æ¨é€, msgId: {}, receiver: {}"</span>, 
                msg.getId(), msg.getReceiver());
            stompWebSocketHandler.sendMessageWithAck(msg);
        } <span class="hljs-keyword">else</span> {
            log.debug(<span class="hljs-string">"æœ¬åœ°æ— ä¼šè¯ï¼Œå¿½ç•¥, msgId: {}, receiver: {}"</span>,
                msg.getId(), msg.getReceiver());
        }
    }

    <span class="hljs-comment">// å‘å¸ƒåˆ° Redis Topic</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publishClusterEvent</span><span class="hljs-params">(NotifyMessageEvent event)</span> {
        <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redisson.getTopic(NOTIFY_TOPIC);
        topic.publish(event);
    }

    <span class="hljs-comment">// å¯åŠ¨æ—¶è®¢é˜… Redis Topic</span>
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">subscribeToTopic</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redisson.getTopic(NOTIFY_TOPIC);
        topic.addListener(NotifyMessageEvent.class, 
            (channel, event) -&gt; handlerEvent(event, <span class="hljs-literal">false</span>));  <span class="hljs-comment">// isLocalEvent = false</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-23">4. æ¶ˆæ¯æŒä¹…åŒ–</h3>
<h4 data-id="heading-24">æŒä¹…åŒ–æµç¨‹</h4>
<pre><code class="hljs language-sql" lang="sql">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        NotifyManager.saveAndPublish()               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  <span class="hljs-variable">@Transactional</span>                                                     â”‚
â”‚  public NotifyMessageLog saveAndPublish(NotifyMessageLog msg) {     â”‚
â”‚         â”‚                                                           â”‚
â”‚         â”œâ”€<span class="hljs-operator">&gt;</span> <span class="hljs-number">1.</span> ç±»å‹æ ¡éªŒ                                              â”‚
â”‚         â”‚   NotifyType.valueOf(msg.getType()).checkDataType(data)   â”‚
â”‚         â”‚                                                           â”‚
â”‚         â”œâ”€<span class="hljs-operator">&gt;</span> <span class="hljs-number">2.</span> æŒä¹…åŒ–åˆ°æ•°æ®åº“                                         â”‚
â”‚         â”‚   notifyMessageLogRepository.save(msg)                    â”‚
â”‚         â”‚   â€¢ è‡ªåŠ¨ç”Ÿæˆé›ªèŠ± ID                                         â”‚
â”‚         â”‚   â€¢ è‡ªåŠ¨å¡«å…… created<span class="hljs-operator">/</span>lastModified                          â”‚
â”‚         â”‚                                                           â”‚
â”‚         â””â”€<span class="hljs-operator">&gt;</span> <span class="hljs-number">3.</span> å‘å¸ƒäº‹ä»¶ï¼ˆè§¦å‘ WebSocket æ¨é€ï¼‰                         â”‚
â”‚             SpringContextUtil.publishEvent(<span class="hljs-keyword">new</span> NotifyMessageEvent)  â”‚
â”‚                                                                     â”‚
â”‚  }                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•°æ®åº“è¡¨ç»“æ„                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> notify_log (                                          â”‚
â”‚      id           <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">PRIMARY</span> KEY,  <span class="hljs-comment">-- é›ªèŠ±IDï¼Œå‰ç¼€: ntf_     â”‚</span>
â”‚      type         <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,     <span class="hljs-comment">-- æ¶ˆæ¯ç±»å‹              â”‚</span>
â”‚      receiver     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,     <span class="hljs-comment">-- æ¥æ”¶è€…ç”¨æˆ·ID          â”‚</span>
â”‚      data         JSON,                     <span class="hljs-comment">-- æ¶ˆæ¯å†…å®¹              â”‚</span>
â”‚      viewed       <span class="hljs-type">BOOLEAN</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">FALSE</span>,    <span class="hljs-comment">-- æ˜¯å¦å·²è¯»              â”‚</span>
â”‚      version      <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,         <span class="hljs-comment">-- ä¹è§‚é”ç‰ˆæœ¬            â”‚</span>
â”‚      created      <span class="hljs-type">BIGINT</span>,                   <span class="hljs-comment">-- åˆ›å»ºæ—¶é—´æˆ³            â”‚</span>
â”‚      last_modified <span class="hljs-type">BIGINT</span>,                  <span class="hljs-comment">-- æœ€åä¿®æ”¹æ—¶é—´æˆ³         â”‚</span>
â”‚                                                                     â”‚
â”‚      INDEX idx_receiver_viewed_created (receiver, viewed, created)  â”‚
â”‚  );                                                                 â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-25">æ ¸å¿ƒä»£ç </h4>
<p><strong>æ¶ˆæ¯å®ä½“</strong> (<code>NotifyMessageLog.java</code>)ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "notify_log", indexes = {
    @Index(columnList = "receiver, viewed, created")
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NotifyMessageLog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Entity</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(generator = "prefixed-id-generator")</span>
    <span class="hljs-meta">@GenericGenerator(name = "prefixed-id-generator",
        parameters = @Parameter(name = "prefix", value = "ntf_"),
        type = CustomizedIdGenerator.class)</span>
    <span class="hljs-keyword">private</span> String id;

    <span class="hljs-meta">@Column(nullable = false)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> NotifyType.STRING_MSG.name();

    <span class="hljs-meta">@Column(nullable = false)</span>
    <span class="hljs-keyword">private</span> String receiver;

    <span class="hljs-meta">@Convert(converter = ObjectToJsonConverter.class)</span>
    <span class="hljs-meta">@JdbcTypeCode(SqlTypes.JSON)</span>
    <span class="hljs-keyword">private</span> Object data;

    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">viewed</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

    <span class="hljs-comment">// è½¬æ¢ä¸º WebSocket æ¶ˆæ¯æ ¼å¼</span>
    <span class="hljs-keyword">public</span> NotifyMessage <span class="hljs-title function_">convert</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> NotifyMessage.builder()
            .id(getId())
            .type(getType())
            .data(getData())
            .receiver(getReceiver())
            .viewed(isViewed())
            .created(getCreated())  <span class="hljs-comment">// ç»§æ‰¿è‡ª Entity åŸºç±»</span>
            .build();
    }
}
</code></pre>
<p><strong>å†å²æ¶ˆæ¯æŸ¥è¯¢</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è·å–ç”¨æˆ·çš„å†å²æ¶ˆæ¯ï¼ˆæŒ‰åˆ›å»ºæ—¶é—´å€’åºï¼‰</span>
<span class="hljs-keyword">public</span> Page&lt;NotifyMessageLog&gt; <span class="hljs-title function_">getHistoryNotifyByCreated</span><span class="hljs-params">(
    String userId, <span class="hljs-type">long</span> created, PageRequest page)</span> {
    <span class="hljs-keyword">return</span> repository.findByReceiverAndCreatedLessThanOrderByCreatedDesc(
        userId, created, page);
}

<span class="hljs-comment">// æ ‡è®°æ¶ˆæ¯å·²è¯»</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">markMessagesAsRead</span><span class="hljs-params">(String userId, List&lt;String&gt; ids)</span> {
    repository.updateViewedTrueByReceiverAndIdIn(userId, ids);
    
    <span class="hljs-comment">// æ¨é€å·²è¯»çŠ¶æ€å˜æ›´é€šçŸ¥ï¼ˆåŒæ­¥åˆ°å…¶ä»–è®¾å¤‡ï¼‰</span>
    <span class="hljs-type">NotifyMessageLog</span> <span class="hljs-variable">notify</span> <span class="hljs-operator">=</span> NotifyMessageLog.builder()
        .type(NotifyType.NOTIFY_VIEWED.name())
        .data(NotifyType.NotifyUpdateRsp.builder().ids(ids).build())
        .receiver(userId)
        .build();
    publish(notify);  <span class="hljs-comment">// ä¸æŒä¹…åŒ–ï¼Œä»…æ¨é€</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-26">æ¥å…¥æŒ‡å—</h2>
<h3 data-id="heading-27">åœºæ™¯ï¼šè®¢å•çŠ¶æ€å˜æ›´é€šçŸ¥</h3>
<p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºå¦‚ä½•åœ¨ä½ çš„é¡¹ç›®ä¸­æ¥å…¥ Quick-Notifyï¼Œå®ç°è®¢å•çŠ¶æ€å˜æ›´çš„å®æ—¶æ¨é€ã€‚</p>
<h4 data-id="heading-28">Step 1ï¼šå®šä¹‰æ¶ˆæ¯ç±»å‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. å®šä¹‰è®¢å•çŠ¶æ€æ¶ˆæ¯ç»“æ„</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderStatusData</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> String orderId;
    <span class="hljs-keyword">private</span> String status;      <span class="hljs-comment">// PAID, SHIPPED, DELIVERED</span>
    <span class="hljs-keyword">private</span> String description;
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;
}

<span class="hljs-comment">// 2. åœ¨ NotifyType ä¸­æ³¨å†Œæ–°ç±»å‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">NotifyType</span> {
    STRING_MSG(String.class),
    NOTIFY_VIEWED(NotifyUpdateRsp.class),
    NOTIFY_DELETED(NotifyUpdateRsp.class),
    
    <span class="hljs-comment">// æ–°å¢ï¼šè®¢å•çŠ¶æ€é€šçŸ¥</span>
    ORDER_STATUS(OrderStatusData.class);

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Class&lt;?&gt; dataClass;
    
    NotifyType(Class&lt;?&gt; dataClass) {
        <span class="hljs-built_in">this</span>.dataClass = dataClass;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkDataType</span><span class="hljs-params">(Object data)</span> {
        <span class="hljs-keyword">if</span> (data != <span class="hljs-literal">null</span> &amp;&amp; !<span class="hljs-built_in">this</span>.dataClass.isInstance(data)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æ•°æ®ç±»å‹ä¸åŒ¹é…: "</span> + <span class="hljs-built_in">this</span>.name());
        }
    }
}
</code></pre>
<h4 data-id="heading-29">Step 2ï¼šä¸šåŠ¡ä»£ç å‘é€é€šçŸ¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> NotifyManager notifyManager;

    <span class="hljs-comment">/**
     * è®¢å•çŠ¶æ€å˜æ›´æ—¶å‘é€é€šçŸ¥
     */</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateOrderStatus</span><span class="hljs-params">(String orderId, String userId, String newStatus)</span> {
        <span class="hljs-comment">// 1. æ›´æ–°è®¢å•çŠ¶æ€ï¼ˆä½ çš„ä¸šåŠ¡é€»è¾‘ï¼‰</span>
        orderRepository.updateStatus(orderId, newStatus);
        
        <span class="hljs-comment">// 2. æ„å»ºé€šçŸ¥æ¶ˆæ¯</span>
        <span class="hljs-type">OrderStatusData</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> OrderStatusData.builder()
            .orderId(orderId)
            .status(newStatus)
            .description(getStatusDescription(newStatus))
            .updateTime(LocalDateTime.now())
            .build();
        
        <span class="hljs-type">NotifyMessageLog</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> NotifyMessageLog.builder()
            .receiver(userId)                      <span class="hljs-comment">// æ¥æ”¶è€…ç”¨æˆ·ID</span>
            .type(NotifyType.ORDER_STATUS.name())  <span class="hljs-comment">// æ¶ˆæ¯ç±»å‹</span>
            .data(data)                            <span class="hljs-comment">// æ¶ˆæ¯å†…å®¹</span>
            .viewed(<span class="hljs-literal">false</span>)                         <span class="hljs-comment">// æœªè¯»çŠ¶æ€</span>
            .build();
        
        <span class="hljs-comment">// 3. ä¿å­˜å¹¶æ¨é€ï¼ˆä¸€è¡Œä»£ç æå®šï¼‰</span>
        notifyManager.saveAndPublish(message);
        
        log.info(<span class="hljs-string">"è®¢å•çŠ¶æ€é€šçŸ¥å·²å‘é€, orderId: {}, userId: {}, status: {}"</span>, 
            orderId, userId, newStatus);
    }
}
</code></pre>
<h4 data-id="heading-30">Step 3ï¼šå®Œæ•´æ¶ˆæ¯æµè½¬è¿‡ç¨‹</h4>
<pre><code class="hljs language-ini" lang="ini">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ä¸šåŠ¡è°ƒç”¨                                                          â”‚
â”‚    orderService.updateOrderStatus("ORD_001", "user_123", "SHIPPED") â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. NotifyManager.saveAndPublish()                                   â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ 2.1 ç±»å‹æ ¡éªŒ                                                 â”‚  â”‚
â”‚    â”‚     NotifyType.ORDER_STATUS.checkDataType(OrderStatusData)  â”‚  â”‚
â”‚    â”‚     âœ“ é€šè¿‡                                                   â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ 2.2 æŒä¹…åŒ–åˆ°æ•°æ®åº“                                            â”‚  â”‚
â”‚    â”‚     INSERT INTO notify_log VALUES (                         â”‚  â”‚
â”‚    â”‚       <span class="hljs-attr">id</span> = <span class="hljs-string">'ntf_1234567890'</span>,                                â”‚  â”‚
â”‚    â”‚       <span class="hljs-attr">type</span> = <span class="hljs-string">'ORDER_STATUS'</span>,                                â”‚  â”‚
â”‚    â”‚       <span class="hljs-attr">receiver</span> = <span class="hljs-string">'user_123'</span>,                                â”‚  â”‚
â”‚    â”‚       <span class="hljs-attr">data</span> = <span class="hljs-string">'{"orderId":"ORD_001","status":"SHIPPED",...}'</span>,â”‚  â”‚
â”‚    â”‚       <span class="hljs-attr">viewed</span> = <span class="hljs-literal">false</span>,                                       â”‚  â”‚
â”‚    â”‚       <span class="hljs-attr">created</span> = <span class="hljs-number">1704067200000</span>                               â”‚  â”‚
â”‚    â”‚     )                                                       â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ 2.3 å‘å¸ƒ Spring äº‹ä»¶                                         â”‚  â”‚
â”‚    â”‚     SpringContextUtil.publishEvent(NotifyMessageEvent)      â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. StompNotifyEventListener.handler() <span class="hljs-section">[å¼‚æ­¥æ‰§è¡Œ]</span>                     â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ 3.1 å‘å¸ƒåˆ° Redis Topic                                       â”‚  â”‚
â”‚    â”‚     topic: stomp::ws_notify_topic                           â”‚  â”‚
â”‚    â”‚     payload: NotifyMessageEvent                             â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                     â”‚ Redis Pub/Sub å¹¿æ’­          â”‚                  â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚              â–¼                     â–¼                     â–¼          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ èŠ‚ç‚¹1 æ”¶åˆ°äº‹ä»¶   â”‚   â”‚ èŠ‚ç‚¹2 æ”¶åˆ°äº‹ä»¶   â”‚   â”‚ èŠ‚ç‚¹N æ”¶åˆ°äº‹ä»¶   â”‚  â”‚
â”‚    â”‚ hasSession?     â”‚   â”‚ hasSession?     â”‚   â”‚ hasSession?     â”‚  â”‚
â”‚    â”‚ âœ— å¿½ç•¥          â”‚   â”‚ âœ“ æœ‰ä¼šè¯        â”‚   â”‚ âœ— å¿½ç•¥          â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. StompWebSocketHandler.sendMessageWithAck() <span class="hljs-section">[èŠ‚ç‚¹2æ‰§è¡Œ]</span>            â”‚
â”‚                                                                     â”‚
â”‚    ç”¨æˆ· user_123 æœ‰ 2 ä¸ªåœ¨çº¿ä¼šè¯ï¼ˆæ‰‹æœº + ç”µè„‘ï¼‰                          â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ 4.1 Session 1 (æ‰‹æœº)                                         â”‚  â”‚
â”‚    â”‚     â€¢ å‘é€æ¶ˆæ¯åˆ° /user/user_123/queue/msg                     â”‚  â”‚
â”‚    â”‚     â€¢ åˆ›å»º ACK è®°å½•: ntf_1234567890::sess_mobile             â”‚  â”‚
â”‚    â”‚     â€¢ log: <span class="hljs-section">[ACK-REDIS]</span> æ¶ˆæ¯å…¥é˜Ÿ                              â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ 4.2 Session 2 (ç”µè„‘)                                         â”‚  â”‚
â”‚    â”‚     â€¢ å‘é€æ¶ˆæ¯åˆ° /user/user_123/queue/msg                     â”‚  â”‚
â”‚    â”‚     â€¢ åˆ›å»º ACK è®°å½•: ntf_1234567890::sess_desktop            â”‚  â”‚
â”‚    â”‚     â€¢ log: <span class="hljs-section">[ACK-REDIS]</span> æ¶ˆæ¯å…¥é˜Ÿ                              â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. å®¢æˆ·ç«¯æ¥æ”¶å¹¶ç¡®è®¤                                                    â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ 5.1 æ‰‹æœºç«¯æ”¶åˆ°æ¶ˆæ¯                                            â”‚  â”‚
â”‚    â”‚     stompClient.subscribe('/user/queue/msg', <span class="hljs-attr">msg</span> =&gt; {       â”‚  â”‚
â”‚    â”‚       // æ”¶åˆ°: {id:'ntf_123..', type:'ORDER_STATUS', ...}   â”‚  â”‚
â”‚    â”‚       showToast('æ‚¨çš„è®¢å•å·²å‘è´§')<span class="hljs-comment">;                            â”‚  â”‚</span>
â”‚    â”‚       stompClient.send('/app/ack', {}, 'ntf_1234567890')<span class="hljs-comment">;   â”‚  â”‚</span>
â”‚    â”‚     })<span class="hljs-comment">;                                                     â”‚  â”‚</span>
â”‚    â”‚                                                             â”‚  â”‚
â”‚    â”‚     æœåŠ¡ç«¯: <span class="hljs-section">[ACK-REDIS]</span> ç¡®è®¤æˆåŠŸ, msgId ntf_123.., sess_mobileâ”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ 5.2 ç”µè„‘ç«¯æ”¶åˆ°æ¶ˆæ¯                                            â”‚  â”‚
â”‚    â”‚     // åŒæ ·æµç¨‹...                                           â”‚  â”‚
â”‚    â”‚                                                             â”‚  â”‚
â”‚    â”‚     æœåŠ¡ç«¯: <span class="hljs-section">[ACK-REDIS]</span> ç¡®è®¤æˆåŠŸ, msgId ntf_123.., sess_desk  â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚    âœ“ æ‰€æœ‰ ACK è®°å½•å·²æ¸…ç†ï¼Œæ¶ˆæ¯æŠ•é€’å®Œæˆ                                   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-31">Step 4ï¼šå‰ç«¯å¤„ç†ä¸åŒæ¶ˆæ¯ç±»å‹</h4>
<pre><code class="hljs language-javascript" lang="javascript">stompClient.<span class="hljs-title function_">subscribe</span>(<span class="hljs-string">'/user/queue/msg'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(message.<span class="hljs-property">body</span>);
    
    <span class="hljs-comment">// æ ¹æ®æ¶ˆæ¯ç±»å‹åˆ†å‘å¤„ç†</span>
    <span class="hljs-keyword">switch</span> (data.<span class="hljs-property">type</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ORDER_STATUS'</span>:
            <span class="hljs-title function_">handleOrderStatus</span>(data.<span class="hljs-property">data</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'STRING_MSG'</span>:
            <span class="hljs-title function_">handleStringMessage</span>(data.<span class="hljs-property">data</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'NOTIFY_VIEWED'</span>:
            <span class="hljs-title function_">handleViewedSync</span>(data.<span class="hljs-property">data</span>.<span class="hljs-property">ids</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-attr">default</span>:
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æœªçŸ¥æ¶ˆæ¯ç±»å‹:'</span>, data.<span class="hljs-property">type</span>);
    }
    
    <span class="hljs-comment">// å‘é€ ACKï¼ˆæ‰€æœ‰ç±»å‹éƒ½éœ€è¦ï¼‰</span>
    stompClient.<span class="hljs-title function_">send</span>(<span class="hljs-string">'/app/ack'</span>, {}, data.<span class="hljs-property">id</span>);
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleOrderStatus</span>(<span class="hljs-params">orderData</span>) {
    <span class="hljs-comment">// orderData = { orderId, status, description, updateTime }</span>
    <span class="hljs-title function_">showNotification</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">'è®¢å•çŠ¶æ€æ›´æ–°'</span>,
        <span class="hljs-attr">body</span>: <span class="hljs-string">`è®¢å• <span class="hljs-subst">${orderData.orderId}</span> <span class="hljs-subst">${orderData.description}</span>`</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-title function_">getStatusIcon</span>(orderData.<span class="hljs-property">status</span>)
    });
    
    <span class="hljs-comment">// æ›´æ–°é¡µé¢ä¸Šçš„è®¢å•çŠ¶æ€</span>
    <span class="hljs-title function_">updateOrderUI</span>(orderData.<span class="hljs-property">orderId</span>, orderData.<span class="hljs-property">status</span>);
}
</code></pre>
<hr/>
<h2 data-id="heading-32">API æ–‡æ¡£</h2>
<h3 data-id="heading-33">REST API</h3>








































<table><thead><tr><th>æ–¹æ³•</th><th>è·¯å¾„</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>POST</td><td><code>/vh-stomp-wsend/push_all_obj</code></td><td>å¹¿æ’­æ¶ˆæ¯</td></tr><tr><td>POST</td><td><code>/vh-stomp-wsend/push_all_obj/{userId}</code></td><td>å‘é€ç»™æŒ‡å®šç”¨æˆ·</td></tr><tr><td>POST</td><td><code>/vh-stomp-wsend/cluster/notify/{userId}</code></td><td>é›†ç¾¤æ¶ˆæ¯ï¼ˆæŒä¹…åŒ–ï¼‰</td></tr><tr><td>GET</td><td><code>/api/notify/history</code></td><td>è·å–å†å²æ¶ˆæ¯</td></tr><tr><td>POST</td><td><code>/api/notify/viewed</code></td><td>æ ‡è®°æ¶ˆæ¯å·²è¯»</td></tr><tr><td>DELETE</td><td><code>/api/notify/delete</code></td><td>åˆ é™¤æ¶ˆæ¯</td></tr></tbody></table>
<h3 data-id="heading-34">STOMP è·¯å¾„</h3>






























<table><thead><tr><th>è·¯å¾„</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>/user/queue/msg</code></td><td>è®¢é˜…</td><td>æ¥æ”¶ä¸ªäººæ¶ˆæ¯</td></tr><tr><td><code>/topic/messages</code></td><td>è®¢é˜…</td><td>æ¥æ”¶å¹¿æ’­æ¶ˆæ¯</td></tr><tr><td><code>/app/sendMessage</code></td><td>å‘é€</td><td>å‘é€æ¶ˆæ¯åˆ°å¹¿æ’­</td></tr><tr><td><code>/app/ack</code></td><td>å‘é€</td><td>æ¶ˆæ¯ç¡®è®¤</td></tr></tbody></table>
<h3 data-id="heading-35">æ¶ˆæ¯æ ¼å¼</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ntf_1234567890"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ORDER_STATUS"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"receiver"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user_123"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"orderId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ORD_001"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SHIPPED"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ‚¨çš„è®¢å•å·²å‘è´§"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"updateTime"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-01-01T12:00:00"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"viewed"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"created"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1704067200000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-36">å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-37">Q: å®¢æˆ·ç«¯æ”¶åˆ°é‡å¤æ¶ˆæ¯æ€ä¹ˆåŠï¼Ÿ</h3>
<p>ç”±äº ACK é‡è¯•æœºåˆ¶ï¼Œç½‘ç»œæ³¢åŠ¨æ—¶å¯èƒ½æ”¶åˆ°é‡å¤æ¶ˆæ¯ã€‚å®¢æˆ·ç«¯åº”åŸºäºæ¶ˆæ¯ ID å®ç°å¹‚ç­‰å¤„ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> processedIds = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">if</span> (processedIds.<span class="hljs-title function_">has</span>(data.<span class="hljs-property">id</span>)) {
        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// è·³è¿‡é‡å¤æ¶ˆæ¯</span>
    }
    processedIds.<span class="hljs-title function_">add</span>(data.<span class="hljs-property">id</span>);
    <span class="hljs-comment">// å¤„ç†æ¶ˆæ¯...</span>
}
</code></pre>
<h3 data-id="heading-38">Q: å¦‚ä½•æ‰©å±•æ¶ˆæ¯ç±»å‹ï¼Ÿ</h3>
<p>å‚è€ƒä¸Šé¢ã€Œæ¥å…¥æŒ‡å—ã€çš„ Step 1ï¼Œåœ¨ <code>NotifyType</code> æšä¸¾ä¸­æ·»åŠ æ–°ç±»å‹å³å¯ã€‚</p>
<h3 data-id="heading-39">Q: æ¶ˆæ¯å‘é€å¤±è´¥å¦‚ä½•å¤„ç†ï¼Ÿ</h3>
<p><code>saveAndPublish</code> æ–¹æ³•æ˜¯äº‹åŠ¡æ€§çš„ï¼Œå¦‚æœæ•°æ®åº“ä¿å­˜å¤±è´¥ä¼šè‡ªåŠ¨å›æ»šã€‚å¦‚æœéœ€è¦è‡ªå®šä¹‰é”™è¯¯å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> {
    notifyManager.saveAndPublish(message);
} <span class="hljs-keyword">catch</span> (Exception e) {
    log.error(<span class="hljs-string">"æ¶ˆæ¯å‘é€å¤±è´¥"</span>, e);
    <span class="hljs-comment">// è®°å½•å¤±è´¥æ—¥å¿—æˆ–åŠ å…¥é‡è¯•é˜Ÿåˆ—</span>
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue2ï¼ˆä¸‰ï¼‰â€”â€”æ¨¡æ¿è¯­æ³•]]></title>    <link>https://juejin.cn/post/7601053058856353798</link>    <guid>https://juejin.cn/post/7601053058856353798</guid>    <pubDate>2026-01-31T09:18:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601053058856353798" data-draft-id="7601034810312622134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue2ï¼ˆä¸‰ï¼‰â€”â€”æ¨¡æ¿è¯­æ³•"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-01-31T09:18:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥é­”çš†ä»¥è¡€é¥²"/> <meta itemprop="url" content="https://juejin.cn/user/2432580855018542"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue2ï¼ˆä¸‰ï¼‰â€”â€”æ¨¡æ¿è¯­æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2432580855018542/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥é­”çš†ä»¥è¡€é¥²
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T09:18:29.000Z" title="Sat Jan 31 2026 09:18:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fv2.cn.vuejs.org%2Fv2%2Fguide%2Fsyntax.html" target="_blank" title="https://v2.cn.vuejs.org/v2/guide/syntax.html" ref="nofollow noopener noreferrer">v2.cn.vuejs.org/v2/guide/syâ€¦</a></p>
<blockquote>
<p>Vue.js ä½¿ç”¨äº†åŸºäº HTML çš„æ¨¡æ¿è¯­æ³•ï¼Œå…è®¸å¼€å‘è€…å£°æ˜å¼åœ°å°† DOM ç»‘å®šè‡³åº•å±‚ Vue å®ä¾‹çš„æ•°æ®ã€‚æ‰€æœ‰ Vue.js çš„æ¨¡æ¿éƒ½æ˜¯åˆæ³•çš„ HTMLï¼Œæ‰€ä»¥èƒ½è¢«éµå¾ªè§„èŒƒçš„æµè§ˆå™¨å’Œ HTML è§£æå™¨è§£æã€‚</p>
<p>åœ¨åº•å±‚çš„å®ç°ä¸Šï¼ŒVue å°†æ¨¡æ¿ç¼–è¯‘æˆè™šæ‹Ÿ DOM æ¸²æŸ“å‡½æ•°ã€‚ç»“åˆå“åº”ç³»ç»Ÿï¼ŒVue èƒ½å¤Ÿæ™ºèƒ½åœ°è®¡ç®—å‡ºæœ€å°‘éœ€è¦é‡æ–°æ¸²æŸ“å¤šå°‘ç»„ä»¶ï¼Œå¹¶æŠŠ DOM æ“ä½œæ¬¡æ•°å‡åˆ°æœ€å°‘ã€‚</p>
<p>å¦‚æœä½ ç†Ÿæ‚‰è™šæ‹Ÿ DOM å¹¶ä¸”åçˆ± JavaScript çš„åŸå§‹åŠ›é‡ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ç”¨æ¨¡æ¿ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fv2.cn.vuejs.org%2Fv2%2Fguide%2Frender-function.html" target="_blank" title="https://v2.cn.vuejs.org/v2/guide/render-function.html" ref="nofollow noopener noreferrer">ç›´æ¥å†™æ¸²æŸ“ (render) å‡½æ•°</a>ï¼Œä½¿ç”¨å¯é€‰çš„ JSX è¯­æ³•ã€‚</p>
</blockquote>
<hr/>
<p>ä¸Šé¢è¿™æ®µåŸå°ä¸åŠ¨ï¼Œæ¥è‡ªå®˜æ–¹ï¼Œæˆ‘æ¯”è¾ƒèœï¼Œçœ‹ä¸æ‡‚ï¼Œä¸‹é¢AIçš„åˆ†æ</p>
<h3 data-id="heading-0">ç¬¬ä¸€å±‚ï¼šå†™ä»€ä¹ˆï¼Ÿâ€”â€” å£°æ˜å¼æ¨¡æ¿ (Declarative Templates)</h3>
<p><strong>åŸæ–‡ï¼š</strong> â€œVue.js ä½¿ç”¨äº†åŸºäº HTML çš„æ¨¡æ¿è¯­æ³•... å£°æ˜å¼åœ°å°† DOM ç»‘å®šè‡³æ•°æ®... æ‰€æœ‰æ¨¡æ¿éƒ½æ˜¯åˆæ³•çš„ HTMLã€‚â€</p>
<p>è¿™è®²çš„æ˜¯ Vue çš„**â€œé—¨é¢â€**ã€‚</p>
<ol>
<li><strong>å£°æ˜å¼ (Declarative) vs å‘½ä»¤å¼ (Imperative)ï¼š</strong></li>
</ol>
<ul>
<li>
<ul>
<li><strong>å‘½ä»¤å¼ï¼ˆå¦‚ jQueryï¼‰ï¼š</strong> ä½ éœ€è¦ä¸€æ­¥æ­¥å‘Šè¯‰æµè§ˆå™¨æ€ä¹ˆåšï¼ˆâ€œæ‰¾åˆ° id ä¸º app çš„ divï¼Œæ¸…ç©ºå†…å®¹ï¼Œæ’å…¥ä¸€ä¸ª spanï¼Œè®¾ç½® span çš„æ–‡å­—...â€ï¼‰ã€‚</li>
<li><strong>å£°æ˜å¼ï¼ˆVueï¼‰ï¼š</strong> ä½ åªå‘Šè¯‰ Vue <strong>ä½ æƒ³è¦ä»€ä¹ˆç»“æœ</strong>ï¼ˆâ€œè¿™é‡Œè¦æ˜¾ç¤º <code>{{ message }}</code>â€ï¼‰ï¼Œå…·ä½“çš„è„æ´»ç´¯æ´»ï¼ˆDOM æ“ä½œï¼‰äº¤ç»™ Vue å»å¤„ç†ã€‚</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>åŸºäº HTMLï¼š</strong></li>
</ol>
<ul>
<li>
<ul>
<li>è¿™å¤§å¤§é™ä½äº†å­¦ä¹ é—¨æ§›ã€‚è®¾è®¡å¸ˆæˆ–åç«¯å¼€å‘äººå‘˜ä¹Ÿèƒ½çœ‹æ‡‚ Vue ä»£ç ï¼Œå› ä¸ºå®ƒé•¿å¾—å°±åƒæ™®é€šçš„ HTMLã€‚</li>
<li>è¿™ä¹Ÿæ„å‘³ç€ç°æœ‰çš„ HTML è§£æå™¨éƒ½èƒ½å¤„ç†å®ƒï¼Œä¸ä¼šåƒæŸäº›éæ ‡è¯­æ³•é‚£æ ·å¯¼è‡´ç¼–è¾‘å™¨æŠ¥é”™ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-1">ç¬¬äºŒå±‚ï¼šæ€ä¹ˆå˜ï¼Ÿâ€”â€” ç¼–è¯‘ä¸è™šæ‹Ÿ DOM (Compilation &amp; VDOM)</h3>
<p><strong>åŸæ–‡ï¼š</strong> â€œåœ¨åº•å±‚çš„å®ç°ä¸Šï¼ŒVue å°†æ¨¡æ¿ç¼–è¯‘æˆè™šæ‹Ÿ DOM æ¸²æŸ“å‡½æ•°ã€‚â€</p>
<p>è¿™è®²çš„æ˜¯ Vue çš„**â€œè½¬æ¢è¿‡ç¨‹â€**ã€‚æµè§ˆå™¨å…¶å®çœ‹ä¸æ‡‚ <code>v-if</code> æˆ– <code>{{ }}</code>ï¼Œæ‰€ä»¥ Vue åœ¨ä»£ç è¿è¡Œå‰ï¼ˆæˆ–è¿è¡Œæ—¶ï¼‰åšäº†ä¸€æ¬¡â€œç¿»è¯‘â€ã€‚</p>
<ol>
<li><strong>ç¼–è¯‘ (Compile)ï¼š</strong></li>
</ol>
<p>Vue æœ‰ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œå®ƒä¼šæŠŠä½ çš„ HTML æ¨¡æ¿å­—ç¬¦ä¸²â€œç¿»è¯‘â€æˆä¸€æ®µ JavaScript ä»£ç ã€‚è¿™æ®µä»£ç å°±å« <strong>æ¸²æŸ“å‡½æ•° (Render Function)</strong> ã€‚</p>
<ol start="2">
<li><strong>è™šæ‹Ÿ DOM (Virtual DOM)ï¼š</strong></li>
</ol>
<p>æ¸²æŸ“å‡½æ•°æ‰§è¡Œåï¼Œä¸ä¼šç›´æ¥å»åŠ¨çœŸçš„ DOMï¼ˆå› ä¸ºæ“ä½œçœŸ DOM å¾ˆæ…¢ï¼‰ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä¸ª <strong>JavaScript å¯¹è±¡æ ‘</strong>ï¼Œè¿™ä¸ªå¯¹è±¡æ ‘å°±æ˜¯è™šæ‹Ÿ DOMã€‚å®ƒå°±åƒæ˜¯çœŸå® DOM çš„ä¸€ä»½â€œè½»é‡çº§è“å›¾â€ã€‚</p>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼š</strong></p>
<ul>
<li><strong>ä½ çš„æ¨¡æ¿ï¼š</strong></li>
</ul>
<p>HTML</p>
<pre><code class="hljs language-ruby" lang="ruby">&lt;div <span class="hljs-symbol">:id=<span class="hljs-string">"dynamicId"</span>&gt;Hello&lt;/div&gt;</span>
</code></pre>
<ul>
<li><strong>Vue ç¼–è¯‘åçš„æ¸²æŸ“å‡½æ•° (ä¼ªä»£ç )ï¼š</strong></li>
</ul>
<p>JavaScript</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">function <span class="hljs-title">render</span>()</span> {
  <span class="hljs-keyword">return</span> h(<span class="hljs-string">'div'</span>, { id: <span class="hljs-keyword">this</span>.dynamicId }, <span class="hljs-string">'Hello'</span>)
}
</code></pre>
<hr/>
<h3 data-id="heading-2">ç¬¬ä¸‰å±‚ï¼šæ€ä¹ˆè·‘ï¼Ÿâ€”â€” å“åº”å¼ä¸æ™ºèƒ½æ›´æ–° (Reactivity &amp; Diffing)</h3>
<p><strong>åŸæ–‡ï¼š</strong> â€œç»“åˆå“åº”ç³»ç»Ÿï¼ŒVue èƒ½å¤Ÿæ™ºèƒ½åœ°è®¡ç®—å‡º... æŠŠ DOM æ“ä½œæ¬¡æ•°å‡åˆ°æœ€å°‘ã€‚â€</p>
<p>è¿™è®²çš„æ˜¯ Vue çš„**â€œè¶…èƒ½åŠ›â€**ã€‚</p>
<ol>
<li><strong>å“åº”ç³»ç»Ÿ (Reactivity)ï¼š</strong></li>
</ol>
<p>Vue ä¼šâ€œç›‘è§†â€ä½ çš„æ•°æ®ã€‚å½“æ•°æ®å˜åŒ–æ—¶ï¼Œå®ƒä¸ä»…çŸ¥é“æ•°æ®å˜äº†ï¼Œè¿˜ç²¾ç¡®åœ°çŸ¥é“<strong>å“ªä¸ªç»„ä»¶</strong>ä¾èµ–äº†è¿™ä¸ªæ•°æ®ã€‚</p>
<ol start="2">
<li><strong>Diff ç®—æ³• (æœ€å°åŒ–æ›´æ–°)ï¼š</strong></li>
</ol>
<p>å½“æ•°æ®å˜åŒ–ï¼Œæ¸²æŸ“å‡½æ•°ä¼šé‡æ–°æ‰§è¡Œï¼Œç”Ÿæˆ<strong>æ–°çš„</strong>è™šæ‹Ÿ DOM æ ‘ã€‚</p>
<p>Vue ä¼šæ‹¿ç€ <strong>æ–°æ ‘</strong> å’Œ <strong>æ—§æ ‘</strong> åšå¯¹æ¯”ï¼ˆDiffï¼‰ã€‚</p>
<ul>
<li>
<ul>
<li>Vue å‘ç°ï¼š <em>â€œå“¦ï¼Œåªæœ‰è¿™ä¸ª</em> <code>div</code> <em>çš„</em> <code>class</code> <em>å˜äº†ï¼Œå…¶ä»–éƒ½æ²¡å˜ã€‚â€</em></li>
<li>ç»“æœï¼šVue åªå»æ›´æ–°çœŸå® DOM é‡Œé‚£ä¸ª <code>div</code> çš„ <code>class</code>ï¼Œå…¶ä»–ä¸åŠ¨ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Vue å³ä½¿åœ¨å¤„ç†åºå¤§é¡µé¢æ—¶ä¾ç„¶å¾ˆå¿«çš„åŸå› ã€‚</p>
<hr/>
<h3 data-id="heading-3">ç¬¬å››å±‚ï¼šç»™é«˜æ‰‹çš„â€œåé—¨â€ â€”â€” Render å‡½æ•° &amp; JSX</h3>
<p><strong>åŸæ–‡ï¼š</strong> â€œå¦‚æœä½ ç†Ÿæ‚‰è™šæ‹Ÿ DOM å¹¶ä¸”åçˆ± JavaScript çš„åŸå§‹åŠ›é‡... ç›´æ¥å†™æ¸²æŸ“ (render) å‡½æ•°...â€</p>
<p>è¿™æ®µè¯æ˜¯è¯´ï¼Œæ¨¡æ¿è™½ç„¶å¥½ç”¨ï¼Œä½†æœ‰æ—¶å€™ä¸å¤Ÿçµæ´»ã€‚</p>
<ul>
<li><strong>æ¨¡æ¿çš„å±€é™ï¼š</strong> æ¯”å¦‚ä½ è¦å†™ä¸€ä¸ªç»„ä»¶ï¼Œæ ¹æ® props åŠ¨æ€ç”Ÿæˆ <code>h1</code> åˆ° <code>h6</code> æ ‡ç­¾ã€‚ç”¨æ¨¡æ¿å†™ï¼Œä½ å¯èƒ½å¾—å†™ 6 ä¸ª <code>v-if</code>ã€‚</li>
<li><strong>JS çš„åŠ›é‡ï¼š</strong> å¦‚æœç”¨æ¸²æŸ“å‡½æ•°ï¼Œä½ åªéœ€è¦å†™ä¸€è¡Œ JSï¼š<code>return h('h' + this.level, ...)</code>ã€‚</li>
</ul>
<p>Vue å¹¶ä¸å¼ºè¿«ä½ ç”¨æ¨¡æ¿ï¼Œå®ƒå®Œå…¨æ”¯æŒä½ åƒ React é‚£æ ·å†™ä»£ç ï¼ˆJSXï¼‰ï¼Œè¿™ç»™äº†é«˜çº§å¼€å‘è€…æå¤§çš„çµæ´»æ€§ã€‚</p>
<h3 data-id="heading-4">æ€»ç»“åˆ†æ</h3>
<p>è¿™æ®µè¯å…¶å®æ­ç¤ºäº† Vue çš„<strong>æ¶æ„åˆ†å±‚</strong>ï¼š</p>






























<table><thead><tr><th><strong>å±‚æ¬¡</strong></th><th><strong>ä½œç”¨</strong></th><th><strong>å¯¹åº”åŸæ–‡</strong></th></tr></thead><tbody><tr><td><strong>é¡¶å±‚ (API)</strong></td><td><strong>æ˜“ç”¨æ€§</strong></td><td>åŸºäº HTML çš„æ¨¡æ¿ï¼Œå£°æ˜å¼ç»‘å®š</td></tr><tr><td><strong>ä¸­é—´å±‚ (Compiler)</strong></td><td><strong>è½¬åŒ–</strong></td><td>æ¨¡æ¿ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> æ¸²æŸ“å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> è™šæ‹Ÿ DOM</td></tr><tr><td><strong>åº•å±‚ (Engine)</strong></td><td><strong>æ€§èƒ½</strong></td><td>å“åº”å¼ç³»ç»Ÿ + æ™ºèƒ½ Diff è®¡ç®—</td></tr><tr><td><strong>æ‰©å±•å±‚ (Flexibility)</strong></td><td><strong>çµæ´»æ€§</strong></td><td>å¯é€‰ JSX / Render å‡½æ•°</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5">æ’å€¼</h2>
<h3 data-id="heading-6">æ–‡æœ¬</h3>
<p>åŒå¤§æ‹¬å· Mustache</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">span</span>&gt;Message: {{ msg }}&lt;/<span class="hljs-selector-tag">span</span>&gt;
</code></pre>
<p>Mustache æ ‡ç­¾å°†ä¼šè¢«æ›¿ä»£ä¸ºå¯¹åº”æ•°æ®å¯¹è±¡ä¸Š <code>msg</code> property çš„å€¼ã€‚æ— è®ºä½•æ—¶ï¼Œç»‘å®šçš„æ•°æ®å¯¹è±¡ä¸Š <code>msg</code> property å‘ç”Ÿäº†æ”¹å˜ï¼Œæ’å€¼å¤„çš„å†…å®¹éƒ½ä¼šæ›´æ–°ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨v-once ,åªæ‰§è¡Œä¸€æ¬¡æ’å€¼ï¼Œåé¢å€¼å˜åŒ–ä¸ä¼šæ›´æ–°</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">span</span> v-once&gt;è¿™ä¸ªå°†ä¸ä¼šæ”¹å˜: {{ msg }}&lt;/<span class="hljs-selector-tag">span</span>&gt;
</code></pre>
<h3 data-id="heading-7">åŸå§‹HTML</h3>
<p>v-html</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Using mustaches: {{ rawHtml }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Using v-html directive: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">"rawHtml"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre>
<p>æ•´ä¸ªspan çš„å†…å®¹ ä¼šè¢«æ›¿æ¢æˆ property å€¼ <code>rawHtml</code>ç›´æ¥ä½œä¸º HTML</p>
<p>æ³¨æ„ï¼šXSS æ”»å‡»ï¼Œå¹¶ä¸”åªæ”¯æŒå¸¸è§„htmlï¼Œä¸æ”¯æŒè§£æè‡ªå®šä¹‰ç»„ä»¶</p>
<h3 data-id="heading-8">Attribute</h3>
<p>v-bind æ‰§è¡Œ ç»‘å®š Attribute</p>
<pre><code class="hljs language-bash" lang="bash">&lt;div v-bind:<span class="hljs-built_in">id</span>=<span class="hljs-string">"dynamicId"</span>&gt;&lt;/div&gt;
</code></pre>
<p><strong>æ³¨æ„ä¸ HTMLçš„ä¸åŒ (</strong> <a href="https://juejin.cn/post/7598447519823101993" target="_blank" title="https://juejin.cn/post/7598447519823101993"><strong>https://juejin.cn/post/7598447519823101993</strong></a> <strong>é‡Œé¢çš„å¸ƒå°”å±æ€§æåˆ°äº†)</strong></p>
<p>å¯¹äºå¸ƒå°” attribute (å®ƒä»¬åªè¦å­˜åœ¨å°±æ„å‘³ç€å€¼ä¸º <code>true</code>)ï¼Œ<code>v-bind</code> æœ‰ä¸åŒï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">button</span> v-bind<span class="hljs-selector-pseudo">:disabled</span>="isButtonDisabled"&gt;<span class="hljs-selector-tag">Button</span>&lt;/<span class="hljs-selector-tag">button</span>&gt;
</code></pre>
<p>å¦‚æœ <code>isButtonDisabled</code> çš„å€¼æ˜¯ <code>null</code>ã€<code>undefined</code> æˆ– <code>false</code>ï¼Œåˆ™ <code>disabled</code> attribute ç”šè‡³ä¸ä¼šè¢«åŒ…å«åœ¨æ¸²æŸ“å‡ºæ¥çš„ <code>&lt;button&gt;</code> å…ƒç´ ä¸­ã€‚</p>
<h3 data-id="heading-9">ä½¿ç”¨ JavaScript è¡¨è¾¾å¼</h3>
<p>æ’å€¼æ¨¡æ¿è¿˜æ”¯æŒä¸‰ç›®è¿ç®—ç¬¦å’Œæ•°å­¦è¡¨è¾¾å¼ï¼Œä»¥åŠåº“å‡½æ•°æ“ä½œ</p>
<pre><code class="hljs language-bash" lang="bash">{{ number + 1 }}

{{ ok ? <span class="hljs-string">'YES'</span> : <span class="hljs-string">'NO'</span> }}

{{ message.split(<span class="hljs-string">''</span>).reverse().<span class="hljs-built_in">join</span>(<span class="hljs-string">''</span>) }}

&lt;div v-bind:<span class="hljs-built_in">id</span>=<span class="hljs-string">"'list-' + id"</span>&gt;&lt;/div&gt;
</code></pre>
<p>é”™è¯¯ä¾‹å­</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- è¿™æ˜¯è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼ --&gt;</span>
{{ var a = 1 }}

<span class="hljs-comment">&lt;!-- æµæ§åˆ¶ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œè¯·ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ --&gt;</span>
{{ if (ok) { return message } }}
</code></pre>
<p>æ¨¡æ¿è¡¨è¾¾å¼éƒ½è¢«æ”¾åœ¨æ²™ç›’ä¸­ï¼Œåªèƒ½è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fvue%2Fblob%2Fv2.6.10%2Fsrc%2Fcore%2Finstance%2Fproxy.js%23L9" target="_blank" title="https://github.com/vuejs/vue/blob/v2.6.10/src/core/instance/proxy.js#L9" ref="nofollow noopener noreferrer">å…¨å±€å˜é‡çš„ä¸€ä¸ªç™½åå•</a>ï¼Œå¦‚ <code>Math</code> å’Œ <code>Date</code> ã€‚ä½ ä¸åº”è¯¥åœ¨æ¨¡æ¿è¡¨è¾¾å¼ä¸­è¯•å›¾è®¿é—®ç”¨æˆ·å®šä¹‰çš„å…¨å±€å˜é‡ã€‚</p>
<p>å¤§ç™½è¯å°±æ˜¯æŒ‡å®šè®¿é—® new Vue({}) æ—¶ä¼ å…¥çš„å¯¹è±¡é‡Œé¢çš„ data,methods computedç­‰ï¼Œä»¥åŠåº“å‡½æ•°ï¼Œå¤–éƒ¨å®šä¹‰çš„å˜é‡ï¼Œåªè¦æ²¡ä¼ å…¥ new Vue({}) é‡Œé¢å°±ä¸èƒ½è®¿é—®</p>
<h2 data-id="heading-10">æŒ‡ä»¤</h2>
<p>æŒ‡ä»¤ (Directives) æ˜¯å¸¦æœ‰ <code>v-</code> å‰ç¼€çš„ç‰¹æ®Š attributeã€‚</p>
<p>æŒ‡ä»¤ attribute çš„å€¼é¢„æœŸæ˜¯<strong>å•ä¸ª JavaScript è¡¨è¾¾å¼</strong> (<code>v-for</code> æ˜¯ä¾‹å¤–æƒ…å†µï¼Œç¨åæˆ‘ä»¬å†è®¨è®º)ã€‚</p>
<p>å½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œå°†å½±å“DOM</p>
<p>å³ Model å½±å“ -&gt; DOM</p>
<pre><code class="hljs language-ini" lang="ini">&lt;p <span class="hljs-attr">v-if</span>=<span class="hljs-string">"seen"</span>&gt;ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†&lt;/p&gt;
</code></pre>
<p><code>v-if</code> æŒ‡ä»¤å°†æ ¹æ®è¡¨è¾¾å¼ <code>seen</code> çš„å€¼çš„çœŸå‡æ¥æ’å…¥/ç§»é™¤ <code>&lt;p&gt;</code> å…ƒç´ </p>
<h3 data-id="heading-11">å‚æ•°</h3>
<p>ä¸€äº›æŒ‡ä»¤èƒ½å¤Ÿæ¥æ”¶ä¸€ä¸ªâ€œå‚æ•°â€ï¼Œåœ¨æŒ‡ä»¤åç§°ä¹‹åä»¥å†’å·è¡¨ç¤ºã€‚</p>
<p>ä¾‹å¦‚ï¼Œ<code>v-bind</code> æŒ‡ä»¤å¯ä»¥ç”¨äºå“åº”å¼åœ°æ›´æ–° HTML attributeï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;a v-bind:<span class="hljs-attr">href</span>=<span class="hljs-string">"url"</span>&gt;...&lt;/a&gt;
</code></pre>
<p>åœ¨è¿™é‡Œ <code>href</code> æ˜¯å‚æ•°ï¼Œå‘ŠçŸ¥ <code>v-bind</code> æŒ‡ä»¤å°†è¯¥å…ƒç´ çš„ <code>href</code> attribute ä¸è¡¨è¾¾å¼ <code>url</code> çš„å€¼ç»‘å®šã€‚</p>
<p>å¦ä¸€ä¸ªä¾‹å­æ˜¯ <code>v-on</code> æŒ‡ä»¤ï¼Œå®ƒç”¨äºç›‘å¬ DOM äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;a v-on:<span class="hljs-attr">click</span>=<span class="hljs-string">"doSomething"</span>&gt;...&lt;/a&gt;
</code></pre>
<p>åœ¨è¿™é‡Œå‚æ•°æ˜¯ç›‘å¬çš„äº‹ä»¶åã€‚æˆ‘ä»¬ä¹Ÿä¼šæ›´è¯¦ç»†åœ°è®¨è®ºäº‹ä»¶å¤„ç†ã€‚</p>
<h3 data-id="heading-12">åŠ¨æ€å‚æ•°</h3>
<p>ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„ JavaScript è¡¨è¾¾å¼ä½œä¸ºä¸€ä¸ªæŒ‡ä»¤çš„å‚æ•°ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--
æ³¨æ„ï¼Œå‚æ•°è¡¨è¾¾å¼çš„å†™æ³•å­˜åœ¨ä¸€äº›çº¦æŸï¼Œå¦‚ä¹‹åçš„â€œå¯¹åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çš„çº¦æŸâ€ç« èŠ‚æ‰€è¿°ã€‚
--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:</span>[<span class="hljs-attr">attributeName</span>]=<span class="hljs-string">"url"</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</code></pre>
<p>è¿™é‡Œçš„ <code>attributeName</code> ä¼šè¢«ä½œä¸ºä¸€ä¸ª JavaScript è¡¨è¾¾å¼è¿›è¡ŒåŠ¨æ€æ±‚å€¼ï¼Œæ±‚å¾—çš„å€¼å°†ä¼šä½œä¸ºæœ€ç»ˆçš„å‚æ•°æ¥ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„ Vue å®ä¾‹æœ‰ä¸€ä¸ª <code>data</code> property <code>attributeName</code>ï¼Œå…¶å€¼ä¸º <code>"href"</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªç»‘å®šå°†ç­‰ä»·äº <code>v-bind:href</code>ã€‚</p>
<p>ä½¿ç”¨åŠ¨æ€å‚æ•°ä¸ºä¸€ä¸ªåŠ¨æ€çš„äº‹ä»¶åç»‘å®šå¤„ç†å‡½æ•°ï¼š</p>
<pre><code class="hljs language-less" lang="less">&lt;<span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">v-on</span>:<span class="hljs-selector-attr">[eventName]</span>="<span class="hljs-selector-tag">doSomething</span>"&gt; ... &lt;/<span class="hljs-selector-tag">a</span>&gt;
</code></pre>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå½“ <code>eventName</code> çš„å€¼ä¸º <code>"focus"</code> æ—¶ï¼Œ<code>v-on:[eventName]</code> å°†ç­‰ä»·äº <code>v-on:focus</code>ã€‚</p>
<p>åŠ¨æ€å‚æ•°å€¼çš„çº¦æŸ</p>
<ul>
<li>é¢„æœŸæ˜¯æ±‚å‡ºä¸€ä¸ªå­—ç¬¦ä¸²</li>
<li>å¼‚å¸¸æƒ…å†µä¸ºnullï¼Œnullè¡¨ç¤ºç§»é™¤è¯¥ç»‘å®š</li>
<li>åŠ¨æ€å‚æ•°è¡¨è¾¾å¼æœ‰ä¸€äº›è¯­æ³•çº¦æŸï¼Œå› ä¸ºæŸäº›å­—ç¬¦ï¼Œå¦‚ç©ºæ ¼å’Œå¼•å·ï¼Œæ”¾åœ¨ HTML attribute åé‡Œæ˜¯æ— æ•ˆçš„ã€‚</li>
</ul>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- è¿™ä¼šè§¦å‘ä¸€ä¸ªç¼–è¯‘è­¦å‘Š --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:</span>['<span class="hljs-attr">foo</span>' + <span class="hljs-attr">bar</span>]=<span class="hljs-string">"value"</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</code></pre>
<p>ä½¿ç”¨æ²¡æœ‰ç©ºæ ¼æˆ–å¼•å·çš„è¡¨è¾¾å¼ï¼Œæˆ–è€…è®¡ç®—å±æ€§æ›¿ä»£ã€‚</p>
<p>åœ¨ DOM ä¸­ä½¿ç”¨æ¨¡æ¿æ—¶ (ç›´æ¥åœ¨ä¸€ä¸ª HTML æ–‡ä»¶é‡Œæ’°å†™æ¨¡æ¿)ï¼Œè¿˜éœ€è¦é¿å…ä½¿ç”¨å¤§å†™å­—ç¬¦æ¥å‘½åé”®åï¼Œå› ä¸ºæµè§ˆå™¨ä¼šæŠŠ attribute åå…¨éƒ¨å¼ºåˆ¶è½¬ä¸ºå°å†™ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--
åœ¨ DOM ä¸­ä½¿ç”¨æ¨¡æ¿æ—¶è¿™æ®µä»£ç ä¼šè¢«è½¬æ¢ä¸º `v-bind:[someattr]`ã€‚
é™¤éåœ¨å®ä¾‹ä¸­æœ‰ä¸€ä¸ªåä¸ºâ€œsomeattrâ€çš„ propertyï¼Œå¦åˆ™ä»£ç ä¸ä¼šå·¥ä½œã€‚
--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:</span>[<span class="hljs-attr">someAttr</span>]=<span class="hljs-string">"value"</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</code></pre>
<p>ä¾‹å­å¦‚ä¸‹</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:</span>[<span class="hljs-attr">someAttr</span>]=<span class="hljs-string">"value"</span>&gt;</span>æ˜é‡‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
      <span class="hljs-attr">el</span>: <span class="hljs-string">"#app"</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">value</span>: <span class="hljs-string">"https://https://juejin.cn/"</span>,
        <span class="hljs-attr">someAttr</span>: <span class="hljs-string">"href"</span>,
      },
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/694b4e907bc14c3793c167bfadd5bebf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We6a2U55qG5Lul6KGA6aWy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770455909&amp;x-signature=%2BIjFJCU4jJGIdVSN6QUb1ur1WQk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/caeec377800546dd906e304383d5243c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We6a2U55qG5Lul6KGA6aWy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770455909&amp;x-signature=QimeV3uxHmPgboyQgw6vIwAfMIs%3D" alt="" loading="lazy"/></p>
<p>ä¿®æ”¹ä¹‹åçš„ä»£ç </p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:</span>[<span class="hljs-attr">someAttr</span>]=<span class="hljs-string">"value"</span>&gt;</span>æ˜é‡‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
      <span class="hljs-attr">el</span>: <span class="hljs-string">"#app"</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">value</span>: <span class="hljs-string">"https://https://juejin.cn/"</span>,
        <span class="hljs-attr">someattr</span>: <span class="hljs-string">"href"</span>,
      },
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a660c541193745048750d58ade857963~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We6a2U55qG5Lul6KGA6aWy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770455909&amp;x-signature=Mor6%2BQGbCHlh7nINR7RIU3I4K9A%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da14149a696149cdb037a7dd1127f933~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We6a2U55qG5Lul6KGA6aWy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770455909&amp;x-signature=2IiiQ8aa%2Bh4aC8q7dvuTEa%2FDMM0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">ä¿®é¥°ç¬¦</h3>
<p>ä¿®é¥°ç¬¦ (modifier) æ˜¯ä»¥åŠè§’å¥å· <code>.</code> æŒ‡æ˜çš„ç‰¹æ®Šåç¼€</p>
<p>å¯ä»¥ç”¨äºé˜»æ­¢äº‹ä»¶å†’æ³¡æˆ–è€…é˜»æ­¢è¡¨å•æäº¤</p>
<p>ä¾‹å¦‚ï¼Œ<code>.prevent</code> ä¿®é¥°ç¬¦å‘Šè¯‰ <code>v-on</code> æŒ‡ä»¤å¯¹äºè§¦å‘çš„äº‹ä»¶è°ƒç”¨ <code>event.preventDefault()</code>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;form v-on:<span class="hljs-attr">submit.prevent</span>=<span class="hljs-string">"onSubmit"</span>&gt;...&lt;/form&gt;
</code></pre>
<h2 data-id="heading-14">ç¼©å†™</h2>
<p>ç¼©å†™ä¸æ˜¯å¿…é¡»çš„</p>
<p><code>v-bind</code> ç¼©å†™</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å®Œæ•´è¯­æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:href</span>=<span class="hljs-string">"url"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ç¼©å†™ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">"url"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-comment">&lt;!-- åŠ¨æ€å‚æ•°çš„ç¼©å†™ (2.6.0+) --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:</span>[<span class="hljs-attr">key</span>]=<span class="hljs-string">"url"</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</code></pre>
<p><code>v-on</code> ç¼©å†™</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å®Œæ•´è¯­æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">"doSomething"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ç¼©å†™ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"doSomething"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-comment">&lt;!-- åŠ¨æ€å‚æ•°çš„ç¼©å†™ (2.6.0+) --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> @[<span class="hljs-attr">event</span>]=<span class="hljs-string">"doSomething"</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nest çš„ä¸­é—´ä»¶ Middleware ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7601077290681270324</link>    <guid>https://juejin.cn/post/7601077290681270324</guid>    <pubDate>2026-01-31T09:30:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601077290681270324" data-draft-id="7599294170001522739" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nest çš„ä¸­é—´ä»¶ Middleware ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,NestJS,Node.js"/> <meta itemprop="datePublished" content="2026-01-31T09:30:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä»˜è±ª"/> <meta itemprop="url" content="https://juejin.cn/user/1741228277763278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nest çš„ä¸­é—´ä»¶ Middleware ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1741228277763278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä»˜è±ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T09:30:20.000Z" title="Sat Jan 31 2026 09:30:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ–°å»ºé¡¹ç›®</p>
<pre><code class="hljs language-arduino" lang="arduino">nest <span class="hljs-keyword">new</span> middleware-demo
</code></pre>
<p>åˆ›å»ºä¸€ä¸ªä¸­é—´ä»¶</p>
<pre><code class="hljs language-css" lang="css">nest g middleware aaa <span class="hljs-attr">--no-spec</span> <span class="hljs-attr">--flat</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d34d6af1693d40dd9ca58869196c7449~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770456624&amp;x-signature=DFqonXwuwIicr77aUbXIm%2B9vR%2Bs%3D" alt="image.png" loading="lazy"/></p>
<p>åŠ ä¸‹æ‰“å°</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">NestMiddleware</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AaaMiddleware</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestMiddleware</span> {
  <span class="hljs-title function_">use</span>(<span class="hljs-params">req: Request, res: Response, next: () =&gt; <span class="hljs-built_in">void</span></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'brefore'</span>);
    <span class="hljs-title function_">next</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'after'</span>);
  }
}

</code></pre>
<p>åœ¨ Module é‡Œè¿™æ ·ä½¿ç”¨</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MiddlewareConsumer</span>, <span class="hljs-title class_">Module</span>, <span class="hljs-title class_">NestModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AaaMiddleware</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./aaa.middleware'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AppController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AppService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestModule</span> {
  <span class="hljs-title function_">configure</span>(<span class="hljs-params">consumer: MiddlewareConsumer</span>) {
    consumer.<span class="hljs-title function_">apply</span>(<span class="hljs-title class_">AaaMiddleware</span>).<span class="hljs-title function_">forRoutes</span>(<span class="hljs-string">'*'</span>);
  }
}

</code></pre>
<p>è·‘èµ·æ¥çœ‹çœ‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0233610b6205421ba3f9eb7dad0931df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770456624&amp;x-signature=W6aefhfB%2FmI4KLP4FhiWWr5TvIg%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥æŒ‡å®šæ›´ç²¾ç¡®çš„è·¯ç”±ï¼Œæ·»åŠ å‡ ä¸ª handler</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> { Controller, Get } from <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { AppService } from <span class="hljs-string">'./app.service'</span>;

<span class="hljs-meta">@Controller()</span>
export <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppController</span> {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-keyword">private</span> readonly appService: AppService) {}

  <span class="hljs-meta">@Get(<span class="hljs-string">'hello'</span>)</span>
  getHello(): string {
    console.log(<span class="hljs-string">'hello'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.appService.getHello();
  }

  <span class="hljs-meta">@Get(<span class="hljs-string">'hello2'</span>)</span>
  getHello2(): string {
    console.log(<span class="hljs-string">'hello2'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.appService.getHello();
  }

  <span class="hljs-meta">@Get(<span class="hljs-string">'hi'</span>)</span>
  getHi(): string {
    console.log(<span class="hljs-string">'hi'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.appService.getHello();
  }

  <span class="hljs-meta">@Get(<span class="hljs-string">'hi1'</span>)</span>
  getHi1(): string {
    console.log(<span class="hljs-string">'hi1'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.appService.getHello();
  }
}

</code></pre>
<p>module åŒ¹é…æ›´æ–°ä¸‹</p>
<pre><code class="hljs language-php" lang="php">import { AaaMiddleware } <span class="hljs-keyword">from</span> <span class="hljs-string">'./aaa.middleware'</span>;
import {
  MiddlewareConsumer,
  Module,
  NestModule,
  RequestMethod,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
import { AppController } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.controller'</span>;
import { AppService } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;

@<span class="hljs-title function_ invoke__">Module</span>({
  <span class="hljs-attr">imports</span>: [],
  <span class="hljs-attr">controllers</span>: [AppController],
  <span class="hljs-attr">providers</span>: [AppService],
})
export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppModule</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">NestModule</span> </span>{
  <span class="hljs-title function_ invoke__">configure</span>(<span class="hljs-attr">consumer</span>: MiddlewareConsumer) {
    consumer
      .<span class="hljs-title function_ invoke__">apply</span>(AaaMiddleware)
      .<span class="hljs-title function_ invoke__">forRoutes</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'hello/*path'</span>, <span class="hljs-attr">method</span>: RequestMethod.GET });
    consumer
      .<span class="hljs-title function_ invoke__">apply</span>(AaaMiddleware)
      .<span class="hljs-title function_ invoke__">forRoutes</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'hi1'</span>, <span class="hljs-attr">method</span>: RequestMethod.GET });
  }
}

</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdeabc99286a4a0e87fea84cff3eb5e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770456624&amp;x-signature=N2fiakfYO%2BPJd5RQIMZccKLQUKI%3D" alt="image.png" loading="lazy"/></p>
<p>Nest ä¸ºä»€ä¹ˆè¦æŠŠ Middleware åšæˆ class å‘¢ï¼Ÿ</p>
<p>ä¸ºäº†ä¾èµ–æ³¨å…¥ï¼</p>
<p>é€šè¿‡ @Inject æ³¨å…¥ AppService åˆ° middleware é‡Œ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Inject</span>, <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">NestMiddleware</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AaaMiddleware</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestMiddleware</span> {
  <span class="hljs-meta">@Inject</span>(<span class="hljs-title class_">AppService</span>)
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">appService</span>: <span class="hljs-title class_">AppService</span>;

  <span class="hljs-title function_">use</span>(<span class="hljs-params">req: Request, res: Response, next: () =&gt; <span class="hljs-built_in">void</span></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'brefore'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'-------'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">appService</span>.<span class="hljs-title function_">getHello</span>());
    <span class="hljs-title function_">next</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'after'</span>);
  }
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d810b764ecec470abd59be46a3173d9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770456624&amp;x-signature=RHzpA5634p%2BIR%2BMyZcN8MrjcwBY%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™å°±æ˜¯ Nest æ³¨å…¥çš„ä¾èµ–</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[VertexIDèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7601041482892329010</link>    <guid>https://juejin.cn/post/7601041482892329010</guid>    <pubDate>2026-01-31T09:51:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601041482892329010" data-draft-id="7601044684774195238" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[VertexIDèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2026-01-31T09:51:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[VertexIDèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T09:51:35.000Z" title="Sat Jan 31 2026 09:51:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>åœ¨Unityçš„å¯ç¼–ç¨‹æ¸²æŸ“ç®¡çº¿ä¸­ï¼ŒShader Graphä¸ºå¼€å‘è€…æä¾›äº†å¯è§†åŒ–ç¼–å†™ç€è‰²å™¨çš„èƒ½åŠ›ï¼Œè€ŒVertex IDèŠ‚ç‚¹åˆ™æ˜¯å…¶ä¸­ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä½†å¸¸è¢«å¿½è§†çš„é‡è¦å·¥å…·ã€‚Vertex IDèŠ‚ç‚¹å…è®¸ç€è‰²å™¨è®¿é—®å½“å‰å¤„ç†çš„é¡¶ç‚¹æˆ–ç‰‡å…ƒçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¸ºå„ç§é«˜çº§æ¸²æŸ“æŠ€æœ¯æä¾›äº†åŸºç¡€æ”¯æŒã€‚</p>
<h2 data-id="heading-0">Vertex IDèŠ‚ç‚¹æ¦‚è¿°</h2>
<p><img src="https://docs.unity.cn/cn/Packages-cn/com.unity.shadergraph@14.0/manual/images/VertexIDNodeThumb.png" alt="" loading="lazy"/></p>
<p>Vertex IDèŠ‚ç‚¹çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯è¾“å‡ºå½“å‰æ­£åœ¨å¤„ç†çš„é¡¶ç‚¹æˆ–ç‰‡å…ƒåœ¨ç½‘æ ¼ä¸­çš„ç´¢å¼•å€¼ã€‚è¿™ä¸ªç´¢å¼•å€¼ä»0å¼€å§‹ï¼ŒæŒ‰ç…§ç½‘æ ¼é¡¶ç‚¹ç¼“å†²åŒºçš„é¡ºåºé€’å¢ã€‚åœ¨é¡¶ç‚¹ç€è‰²å™¨é˜¶æ®µï¼Œå®ƒä»£è¡¨é¡¶ç‚¹çš„ç´¢å¼•ï¼›åœ¨ç‰‡å…ƒç€è‰²å™¨é˜¶æ®µï¼Œå®ƒä»£è¡¨ç”Ÿæˆè¯¥ç‰‡å…ƒçš„é¡¶ç‚¹çš„ç´¢å¼•ã€‚</p>
<h3 data-id="heading-1">å·¥ä½œåŸç†ä¸åº•å±‚æœºåˆ¶</h3>
<p>Vertex IDçš„å®ç°ä¾èµ–äºGPUçš„é¡¶ç‚¹ç€è‰²å™¨è¾“å…¥è¯­ä¹‰ã€‚åœ¨HLSLä¸­ï¼Œè¿™é€šå¸¸å¯¹åº”ç€<code>SV_VertexID</code>ç³»ç»Ÿå€¼è¯­ä¹‰ã€‚å½“Unityæäº¤ç»˜åˆ¶è°ƒç”¨æ—¶ï¼ŒGPUä¼šä¸ºæ¯ä¸ªå¤„ç†çš„é¡¶ç‚¹åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„IDï¼Œè¿™ä¸ªIDåŸºäºé¡¶ç‚¹åœ¨é¡¶ç‚¹ç¼“å†²åŒºä¸­çš„ä½ç½®ã€‚</p>
<p>åœ¨ä¼ ç»Ÿçš„ç¼–å†™ç€è‰²å™¨ä»£ç æ–¹å¼ä¸­ï¼Œå¼€å‘è€…ä¼šè¿™æ ·å£°æ˜å’Œä½¿ç”¨Vertex IDï¼š</p>
<pre><code class="hljs language-c" lang="c">HLSL

truct appdata
{
    uint vertexID : SV_VertexID;
};
</code></pre>
<p>è€Œåœ¨Shader Graphä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç®€åŒ–ä¸ºç®€å•åœ°æ·»åŠ å’Œè¿æ¥Vertex IDèŠ‚ç‚¹ï¼Œå¤§å¤§é™ä½äº†ä½¿ç”¨é—¨æ§›ã€‚</p>
<h3 data-id="heading-2">èŠ‚ç‚¹ç‰¹æ€§ä¸é™åˆ¶</h3>
<p>Vertex IDèŠ‚ç‚¹æœ‰å‡ ä¸ªé‡è¦ç‰¹æ€§éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>è¾“å‡ºå€¼ä¸ºæµ®ç‚¹æ•°ç±»å‹ï¼ŒèŒƒå›´ä»0åˆ°ç½‘æ ¼é¡¶ç‚¹æ•°å‡1</li>
<li>åœ¨é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨ä¸­å‡å¯ä½¿ç”¨</li>
<li>å€¼åœ¨å•ä¸ªç»˜åˆ¶è°ƒç”¨ä¸­ä¿æŒå”¯ä¸€æ€§å’Œè¿ç»­æ€§</li>
<li>ä¸å—ç½‘æ ¼å˜å½¢æˆ–åŠ¨ç”»å½±å“ï¼Œå§‹ç»ˆåæ˜ åŸå§‹ç½‘æ ¼çš„é¡¶ç‚¹é¡ºåº</li>
</ul>
<p>åŒæ—¶ä¹Ÿæœ‰ä¸€äº›ä½¿ç”¨é™åˆ¶ï¼š</p>
<ul>
<li>ä¸èƒ½ç”¨äºè®¡ç®—ç€è‰²å™¨</li>
<li>åœ¨æŸäº›ç§»åŠ¨è®¾å¤‡ä¸Šå¯èƒ½æœ‰é™åˆ¶æˆ–æ€§èƒ½è€ƒè™‘</li>
<li>å¯¹äºåŠ¨æ€æ‰¹å¤„ç†çš„ç‰©ä½“ï¼ŒVertex IDå¯èƒ½ä¸ä¼šæŒ‰é¢„æœŸå·¥ä½œ</li>
</ul>
<h2 data-id="heading-3">Vertex IDèŠ‚ç‚¹çš„åº”ç”¨åœºæ™¯</h2>
<p>Vertex IDèŠ‚ç‚¹åœ¨Shader Graphä¸­æœ‰ç€å¹¿æ³›çš„åº”ç”¨åœºæ™¯ï¼Œä»ç®€å•çš„æ•ˆæœåˆ°å¤æ‚çš„æ¸²æŸ“æŠ€æœ¯éƒ½èƒ½å‘æŒ¥ä½œç”¨ã€‚</p>
<h3 data-id="heading-4">é¡¶ç‚¹çº§åŠ¨ç”»ä¸å˜å½¢</h3>
<p>åˆ©ç”¨Vertex IDå¯ä»¥å®ç°åŸºäºé¡¶ç‚¹ç´¢å¼•çš„åŠ¨ç”»æ•ˆæœï¼Œæ¯”å¦‚æ³¢æµªæ•ˆæœã€éšæœºåç§»ç­‰ã€‚ç”±äºæ¯ä¸ªé¡¶ç‚¹éƒ½æœ‰å”¯ä¸€çš„IDï¼Œå¯ä»¥åŸºäºIDè®¡ç®—ä¸åŒçš„å˜æ¢å‚æ•°ã€‚</p>
<pre><code class="hljs language-c" lang="c">HLSL

<span class="hljs-comment">// ä¼ªä»£ç ç¤ºä¾‹ï¼šåŸºäºVertex IDçš„æ³¢æµªåŠ¨ç”»</span>
<span class="hljs-type">float</span> wave = <span class="hljs-built_in">sin</span>(_Time.y * _WaveSpeed + vertexID * _WaveDensity);
float3 offset = float3(<span class="hljs-number">0</span>, wave * _WaveHeight, <span class="hljs-number">0</span>);
position.xyz += offset;
</code></pre>
<h3 data-id="heading-5">ç¨‹åºåŒ–çº¹ç†åæ ‡ç”Ÿæˆ</h3>
<p>å½“ç½‘æ ¼ç¼ºä¹åˆé€‚çš„UVåæ ‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨Vertex IDæ¥ç”Ÿæˆç¨‹åºåŒ–çš„çº¹ç†æ˜ å°„ã€‚è¿™åœ¨å¤„ç†ç¨‹åºåŒ–ç”Ÿæˆçš„å‡ ä½•ä½“æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<pre><code class="hljs language-c" lang="c">HLSL

<span class="hljs-comment">// ä¼ªä»£ç ç¤ºä¾‹ï¼šåŸºäºVertex IDç”ŸæˆUV</span>
float2 uv = float2(frac(vertexID * _UVScale), <span class="hljs-built_in">floor</span>(vertexID * _UVScale) / _GridSize);
</code></pre>
<h3 data-id="heading-6">å®ä¾‹åŒ–ä¸æ‰¹é‡æ¸²æŸ“ä¼˜åŒ–</h3>
<p>åœ¨GPUå®ä¾‹åŒ–åœºæ™¯ä¸­ï¼ŒVertex IDå¯ä»¥ä¸å…¶ä»–ç³»ç»Ÿå€¼ï¼ˆå¦‚Instance IDï¼‰ç»“åˆä½¿ç”¨ï¼Œå®ç°é«˜æ•ˆçš„æ‰¹é‡æ¸²æŸ“å’Œæ•°æ®ç´¢å¼•ã€‚</p>
<h3 data-id="heading-7">è°ƒè¯•ä¸å¯è§†åŒ–å·¥å…·</h3>
<p>Vertex IDæ˜¯å¼ºå¤§çš„è°ƒè¯•å·¥å…·ï¼Œå¯ä»¥ç”¨äºï¼š</p>
<ul>
<li>å¯è§†åŒ–é¡¶ç‚¹åˆ†å¸ƒå’Œé¡ºåº</li>
<li>æ£€æµ‹é¡¶ç‚¹ç¼“å†²åŒºé—®é¢˜</li>
<li>ç†è§£ç½‘æ ¼æ‹“æ‰‘ç»“æ„</li>
</ul>
<h2 data-id="heading-8">å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<p>ä¸‹é¢é€šè¿‡å‡ ä¸ªå…·ä½“çš„Shader Graphè®¾ç½®ç¤ºä¾‹ï¼Œå±•ç¤ºVertex IDèŠ‚ç‚¹çš„å®é™…åº”ç”¨ã€‚</p>
<h3 data-id="heading-9">æ³¢æµªåœ°å½¢æ•ˆæœ</h3>
<p>åˆ›å»ºä¸€ä¸ªåŸºäºVertex IDçš„æ³¢æµªåœ°å½¢æ•ˆæœï¼š</p>
<ul>
<li>é¦–å…ˆåœ¨Shader Graphä¸­åˆ›å»ºVertex IDèŠ‚ç‚¹</li>
<li>å°†è¾“å‡ºè¿æ¥åˆ°Custom FunctionèŠ‚ç‚¹è¿›è¡Œæ³¢æµªè®¡ç®—</li>
<li>ä½¿ç”¨TimeèŠ‚ç‚¹æä¾›åŠ¨ç”»å‚æ•°</li>
<li>å°†è®¡ç®—ç»“æœè¿æ¥åˆ°PositionèŠ‚ç‚¹çš„åç§»é‡</li>
</ul>
<p>å…³é”®èŠ‚ç‚¹è®¾ç½®ï¼š</p>
<ul>
<li>Vertex ID â†’ Custom Function (æ³¢æµªè®¡ç®—) â†’ Add to Position</li>
<li>Time â†’ Multiply (æ§åˆ¶é€Ÿåº¦) â†’ Custom Function</li>
<li>å‚æ•°è¾“å…¥ï¼šæ³¢æµªå¹…åº¦ã€é¢‘ç‡ã€ä¼ æ’­é€Ÿåº¦</li>
</ul>
<p>è¿™ç§è®¾ç½®å¯ä»¥å®ç°æµç•…çš„æ³¢æµªåŠ¨ç”»ï¼Œæ¯ä¸ªé¡¶ç‚¹åŸºäºå…¶IDäº§ç”Ÿç›¸ä½åç§»ï¼Œå½¢æˆè‡ªç„¶çš„æ³¢æµªä¼ æ’­æ•ˆæœã€‚</p>
<h3 data-id="heading-10">é¡¶ç‚¹é¢œè‰²æ¸å˜</h3>
<p>ä½¿ç”¨Vertex IDåˆ›å»ºæ²¿ç€é¡¶ç‚¹é¡ºåºçš„é¢œè‰²æ¸å˜ï¼š</p>
<ul>
<li>Vertex IDèŠ‚ç‚¹è¾“å‡ºé™¤ä»¥ç½‘æ ¼é¡¶ç‚¹æ€»æ•°ï¼Œå½’ä¸€åŒ–åˆ°[0,1]èŒƒå›´</li>
<li>å°†å½’ä¸€åŒ–å€¼è¾“å…¥åˆ°GradientèŠ‚ç‚¹</li>
<li>å°†Gradientè¾“å‡ºè¿æ¥åˆ°Base Color</li>
</ul>
<p>è¿™ç§æ–¹æ³•ç‰¹åˆ«é€‚åˆçº¿æ¡†æ¸²æŸ“æˆ–å‡ ä½•å¯è§†åŒ–ï¼Œå¯ä»¥æ¸…æ™°å±•ç¤ºé¡¶ç‚¹çš„é¡ºåºå’Œåˆ†å¸ƒã€‚</p>
<h3 data-id="heading-11">ç¨‹åºåŒ–ç½‘æ ¼å˜å½¢</h3>
<p>ç»“åˆVertex IDå’Œæ•°å­¦èŠ‚ç‚¹åˆ›å»ºå¤æ‚çš„ç½‘æ ¼å˜å½¢ï¼š</p>
<ul>
<li>ä½¿ç”¨Vertex IDä½œä¸ºå™ªå£°å‡½æ•°çš„è¾“å…¥ç§å­</li>
<li>é€šè¿‡ä¸åŒçš„æ•°å­¦è¿ç®—ï¼ˆsinã€cosã€fractç­‰ï¼‰åˆ›å»ºå„ç§å˜å½¢æ¨¡å¼</li>
<li>å°†å˜å½¢ç»“æœåº”ç”¨åˆ°é¡¶ç‚¹ä½ç½®</li>
</ul>
<p>è¿™ç§æŠ€æœ¯å¯ä»¥åˆ›å»ºæœ‰æœºçš„ã€ç¨‹åºåŒ–çš„å½¢çŠ¶å˜åŒ–ï¼Œæ— éœ€é¢å¤–çš„çº¹ç†æˆ–é¡¶ç‚¹æ•°æ®ã€‚</p>
<h2 data-id="heading-12">æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</h2>
<p>æ­£ç¡®ä½¿ç”¨Vertex IDèŠ‚ç‚¹éœ€è¦è€ƒè™‘æ€§èƒ½å› ç´ å’Œæœ€ä½³å®è·µã€‚</p>
<h3 data-id="heading-13">æ€§èƒ½è€ƒè™‘</h3>
<ul>
<li>åœ¨ç§»åŠ¨å¹³å°ä¸Šï¼Œå°½é‡å‡å°‘åŸºäºVertex IDçš„å¤æ‚è®¡ç®—</li>
<li>é¿å…åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ä½¿ç”¨Vertex IDè¿›è¡Œæ¯å¸§é‡è®¡ç®—</li>
<li>è€ƒè™‘ä½¿ç”¨é¡¶ç‚¹ç€è‰²å™¨è®¡ç®—å¹¶å°†ç»“æœä¼ é€’ç»™ç‰‡å…ƒç€è‰²å™¨</li>
</ul>
<h3 data-id="heading-14">å…¼å®¹æ€§å¤„ç†</h3>
<ul>
<li>ä½¿ç”¨Shader Graphçš„èŠ‚ç‚¹åŠŸèƒ½æ£€æŸ¥ç›®æ ‡å¹³å°çš„å…¼å®¹æ€§</li>
<li>ä¸ºä¸æ”¯æŒVertex IDçš„å¹³å°æä¾›fallbackæ–¹æ¡ˆ</li>
<li>æµ‹è¯•åœ¨ä¸åŒå›¾å½¢APIä¸‹çš„è¡Œä¸ºä¸€è‡´æ€§</li>
</ul>
<h3 data-id="heading-15">è°ƒè¯•æŠ€å·§</h3>
<ul>
<li>ä½¿ç”¨Vertex IDå¯è§†åŒ–æ¥ç†è§£ç½‘æ ¼ç»“æ„</li>
<li>ç»“åˆRenderDocç­‰å·¥å…·åˆ†æå®é™…çš„Vertex IDåˆ†å¸ƒ</li>
<li>åˆ›å»ºè°ƒè¯•ç€è‰²å™¨æ¥éªŒè¯Vertex IDçš„é¢„æœŸè¡Œä¸º</li>
</ul>
<h2 data-id="heading-16">é«˜çº§åº”ç”¨æŠ€å·§</h2>
<h3 data-id="heading-17">ä¸å…¶ä»–ç³»ç»Ÿå€¼çš„ç»“åˆ</h3>
<p>Vertex IDå¯ä»¥ä¸å…¶ä»–ç³»ç»Ÿå€¼ç»“åˆä½¿ç”¨ï¼Œåˆ›é€ æ›´å¤æ‚çš„æ•ˆæœï¼š</p>
<ul>
<li>ç»“åˆInstance IDå®ç°æ¯å®ä¾‹çš„é¡¶ç‚¹å˜å½¢</li>
<li>ä¸Primitive IDé…åˆå®ç°åŸºäºå›¾å…ƒçš„ç‰¹æ•ˆ</li>
<li>å’ŒScreen Positionç»“åˆåˆ›å»ºå±å¹•ç›¸å…³çš„é¡¶ç‚¹åŠ¨ç”»</li>
</ul>
<h3 data-id="heading-18">è‡ªå®šä¹‰å‡½æ•°å°è£…</h3>
<p>å¯¹äºå¤æ‚çš„Vertex IDåº”ç”¨ï¼Œå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰HLSLå‡½æ•°èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-c" lang="c">HLSL

<span class="hljs-type">void</span> <span class="hljs-title function_">VertexIDAnimation_float</span><span class="hljs-params">(<span class="hljs-type">float</span> VertexID, <span class="hljs-type">float</span> Time, <span class="hljs-type">float</span> Amplitude, <span class="hljs-type">float</span> Frequency, out float3 Offset)</span>
{
    <span class="hljs-type">float</span> phase = VertexID * Frequency + Time;
    Offset = float3(<span class="hljs-number">0</span>, <span class="hljs-built_in">sin</span>(phase) * Amplitude, <span class="hljs-number">0</span>);
}
</code></pre>
<p>è¿™æ ·å¯ä»¥åœ¨å¤šä¸ªShader Graphä¸­é‡ç”¨å¤æ‚çš„Vertex IDé€»è¾‘ã€‚</p>
<h3 data-id="heading-19">æ•°æ®é©±åŠ¨çš„æ–¹æ³•</h3>
<p>å°†Vertex IDä¸å¤–éƒ¨æ•°æ®ç»“åˆï¼š</p>
<ul>
<li>ä½¿ç”¨Compute Bufferå­˜å‚¨æ¯é¡¶ç‚¹çš„åŠ¨ç”»å‚æ•°</li>
<li>é€šè¿‡MaterialPropertyBlockä¼ é€’é¡¶ç‚¹çº§åˆ«çš„æ•°æ®</li>
<li>ç»“åˆScriptable Renderer Featureså®ç°æ›´é«˜çº§çš„æ¸²æŸ“ç®¡çº¿é›†æˆ</li>
</ul>
<h2 data-id="heading-20">æ•…éšœæ’é™¤ä¸å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-21">Vertex IDè¾“å‡ºå¼‚å¸¸</h3>
<p>å½“Vertex IDä¸æŒ‰é¢„æœŸå·¥ä½œæ—¶ï¼Œå¯èƒ½çš„åŸå› åŒ…æ‹¬ï¼š</p>
<ul>
<li>ç½‘æ ¼è¢«åŠ¨æ€æ‰¹å¤„ç†ï¼Œæ”¹å˜äº†é¡¶ç‚¹é¡ºåº</li>
<li>ä½¿ç”¨äº†ä¸æ”¯æŒçš„æ¸²æŸ“è·¯å¾„</li>
<li>å›¾å½¢APIé™åˆ¶</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>ç¦ç”¨åŠ¨æ€æ‰¹å¤„ç†</li>
<li>æ£€æŸ¥ç›®æ ‡å¹³å°çš„å›¾å½¢APIæ”¯æŒ</li>
<li>ä½¿ç”¨Shader Variantæ”¶é›†å™¨ç¡®ä¿æ‰€æœ‰éœ€è¦çš„å˜ä½“éƒ½è¢«ç¼–è¯‘</li>
</ul>
<h3 data-id="heading-22">æ€§èƒ½é—®é¢˜</h3>
<p>åŸºäºVertex IDçš„æ•ˆæœå¯¼è‡´æ€§èƒ½ä¸‹é™æ—¶çš„ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<ul>
<li>å°†è®¡ç®—ä»ç‰‡å…ƒç€è‰²å™¨ç§»åˆ°é¡¶ç‚¹ç€è‰²å™¨</li>
<li>ä½¿ç”¨LODç³»ç»Ÿåœ¨è¿œè·ç¦»ç®€åŒ–æ•ˆæœ</li>
<li>é¢„è®¡ç®—é™æ€æ•ˆæœåˆ°é¡¶ç‚¹é¢œè‰²æˆ–çº¹ç†ä¸­</li>
</ul>
<h3 data-id="heading-23">å¹³å°å…¼å®¹æ€§</h3>
<p>å¤„ç†ä¸åŒå¹³å°çš„å…¼å®¹æ€§é—®é¢˜ï¼š</p>
<ul>
<li>ä¸ºOpenGL ES 2.0ç­‰è€æ—§å¹³å°æä¾›ç®€åŒ–ç‰ˆæœ¬</li>
<li>ä½¿ç”¨Shader Graphçš„Keywordç³»ç»Ÿç®¡ç†å¹³å°ç‰¹å®šä»£ç </li>
<li>è¿›è¡Œå……åˆ†çš„è·¨å¹³å°æµ‹è¯•</li>
</ul>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¯æ‰©å±•çš„çŸ­ä¿¡å‘é€é˜Ÿåˆ—æ¨¡å—]]></title>    <link>https://juejin.cn/post/7601053058856419334</link>    <guid>https://juejin.cn/post/7601053058856419334</guid>    <pubDate>2026-01-31T09:47:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601053058856419334" data-draft-id="7600986495928008745" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¯æ‰©å±•çš„çŸ­ä¿¡å‘é€é˜Ÿåˆ—æ¨¡å—"/> <meta itemprop="keywords" content="Go,åç«¯"/> <meta itemprop="datePublished" content="2026-01-31T09:47:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="echoæœ¬å°Š47218"/> <meta itemprop="url" content="https://juejin.cn/user/2541726614162446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¯æ‰©å±•çš„çŸ­ä¿¡å‘é€é˜Ÿåˆ—æ¨¡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2541726614162446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    echoæœ¬å°Š47218
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T09:47:50.000Z" title="Sat Jan 31 2026 09:47:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¯æ‰©å±•çš„çŸ­ä¿¡å‘é€é˜Ÿåˆ—æ¨¡å—</h2>
<h3 data-id="heading-1">é¡¹ç›®åœ°å€</h3>
<ul>
<li>å‰ç«¯åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fqxkjsoft%2Fginfast-ui" target="_blank" title="https://github.com/qxkjsoft/ginfast-ui" ref="nofollow noopener noreferrer">github.com/qxkjsoft/giâ€¦</a></li>
<li>åç«¯åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fqxkjsoft%2Fginfast" target="_blank" title="https://github.com/qxkjsoft/ginfast" ref="nofollow noopener noreferrer">github.com/qxkjsoft/giâ€¦</a></li>
</ul>
<h3 data-id="heading-2">å‰è¨€</h3>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼ŒçŸ­ä¿¡å‘é€æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„åŠŸèƒ½éœ€æ±‚ã€‚æ— è®ºæ˜¯ç”¨æˆ·æ³¨å†ŒéªŒè¯ç ã€å¯†ç é‡ç½®ï¼Œè¿˜æ˜¯è¥é”€é€šçŸ¥ï¼ŒçŸ­ä¿¡æœåŠ¡éƒ½æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚ç„¶è€Œï¼Œç›´æ¥è°ƒç”¨çŸ­ä¿¡æœåŠ¡å•†çš„ API å¾€å¾€ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼š</p>
<ol>
<li><strong>ç½‘ç»œå»¶è¿Ÿå½±å“ç”¨æˆ·ä½“éªŒ</strong>ï¼šåŒæ­¥å‘é€çŸ­ä¿¡ä¼šé˜»å¡è¯·æ±‚ï¼Œå¯¼è‡´å“åº”å˜æ…¢</li>
<li><strong>é«˜å¹¶å‘åœºæ™¯ä¸‹çš„é™æµé—®é¢˜</strong>ï¼šçŸ­ä¿¡æœåŠ¡å•†é€šå¸¸æœ‰ QPS é™åˆ¶</li>
<li><strong>å‘é€å¤±è´¥éœ€è¦é‡è¯•</strong>ï¼šç½‘ç»œæŠ–åŠ¨æˆ–æœåŠ¡å•†ä¸´æ—¶æ•…éšœå¯èƒ½å¯¼è‡´å‘é€å¤±è´¥</li>
<li><strong>å¤šæœåŠ¡å•†åˆ‡æ¢æˆæœ¬é«˜</strong>ï¼šä¸åŒæœåŠ¡å•†çš„ API æ¥å£å·®å¼‚å¤§ï¼Œåˆ‡æ¢æ—¶éœ€è¦å¤§é‡ä¿®æ”¹ä»£ç </li>
</ol>
<p>æœ¬æ–‡å°†åŸºäº gin-fast-tenant é¡¹ç›®ä¸­çš„çŸ­ä¿¡æ’ä»¶æ¨¡å—ï¼Œåˆ†äº«å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¯æ‰©å±•çš„çŸ­ä¿¡å‘é€é˜Ÿåˆ—æ¨¡å—ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸€ã€æ•´ä½“æ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-4">1.1 æ ¸å¿ƒè®¾è®¡ç†å¿µ</h4>
<p>æˆ‘ä»¬çš„è®¾è®¡éµå¾ªä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š</p>
<ul>
<li><strong>æ¥å£é©±åŠ¨</strong>ï¼šé€šè¿‡æ¥å£æŠ½è±¡ï¼Œå®ç°ä¸å…·ä½“å®ç°çš„è§£è€¦</li>
<li><strong>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼</strong>ï¼šå¼‚æ­¥å¤„ç†çŸ­ä¿¡å‘é€ä»»åŠ¡</li>
<li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šç¡®ä¿é˜Ÿåˆ—å…¨å±€å”¯ä¸€ï¼Œé¿å…èµ„æºæµªè´¹</li>
<li><strong>å›è°ƒæœºåˆ¶</strong>ï¼šçµæ´»å¤„ç†å‘é€ç»“æœ</li>
</ul>
<h4 data-id="heading-5">1.2 æ¨¡å—ç»“æ„</h4>
<pre><code class="hljs language-bash" lang="bash">plugins/plusms/smshelper/
â”œâ”€â”€ smsqueue/          <span class="hljs-comment"># æ ¸å¿ƒé˜Ÿåˆ—æ¨¡å—ï¼ˆä¸å…·ä½“æœåŠ¡å•†æ— å…³ï¼‰</span>
â”‚   â”œâ”€â”€ interfaces.go  <span class="hljs-comment"># æ¥å£å®šä¹‰</span>
â”‚   â”œâ”€â”€ queue.go       <span class="hljs-comment"># é˜Ÿåˆ—å®ç°</span>
â”‚   â”œâ”€â”€ callback.go    <span class="hljs-comment"># å›è°ƒå‡½æ•°</span>
â”‚   â”œâ”€â”€ errors.go      <span class="hljs-comment"># é”™è¯¯å®šä¹‰</span>
â”‚   â””â”€â”€ global.go      <span class="hljs-comment"># å…¨å±€é˜Ÿåˆ—</span>
â””â”€â”€ alisms/            <span class="hljs-comment"># é˜¿é‡Œäº‘çŸ­ä¿¡å®ç°</span>
    â”œâ”€â”€ alisms.go      <span class="hljs-comment"># é˜¿é‡Œäº‘å®¢æˆ·ç«¯</span>
    â””â”€â”€ queue.go       <span class="hljs-comment"># é˜¿é‡Œäº‘é˜Ÿåˆ—å°è£…</span>
</code></pre>
<p>è¿™ç§åˆ†å±‚è®¾è®¡ä½¿å¾—æ ¸å¿ƒé˜Ÿåˆ—é€»è¾‘ä¸å…·ä½“çŸ­ä¿¡æœåŠ¡å•†å®Œå…¨è§£è€¦ï¼Œæœªæ¥è¦æ¥å…¥è…¾è®¯äº‘ã€åä¸ºäº‘ç­‰æœåŠ¡å•†ï¼Œåªéœ€å®ç°ç›¸åº”çš„ Provider å³å¯ã€‚</p>
<hr/>
<h3 data-id="heading-6">äºŒã€æ ¸å¿ƒæ¥å£è®¾è®¡</h3>
<h4 data-id="heading-7">2.1 TemplateConfig æ¥å£</h4>
<p>æ‰€æœ‰çŸ­ä¿¡æ¨¡æ¿å¿…é¡»å®ç°æ­¤æ¥å£ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// TemplateConfig çŸ­ä¿¡æ¨¡æ¿é…ç½®æ¥å£</span>
<span class="hljs-keyword">type</span> TemplateConfig <span class="hljs-keyword">interface</span> {
    Json() <span class="hljs-type">string</span>            <span class="hljs-comment">// è¿”å›æ¨¡æ¿å‚æ•°çš„JSONå­—ç¬¦ä¸²</span>
    GetTemplateCode() <span class="hljs-type">string</span> <span class="hljs-comment">// è¿”å›æ¨¡æ¿ä»£ç </span>
    GetSignName() <span class="hljs-type">string</span>     <span class="hljs-comment">// è¿”å›ç­¾ååç§°</span>
}
</code></pre>
<p><strong>è®¾è®¡æ€è·¯</strong>ï¼šä¸åŒçŸ­ä¿¡æœåŠ¡å•†çš„æ¨¡æ¿å‚æ•°æ ¼å¼å¯èƒ½ä¸åŒï¼Œä½†é€šè¿‡ç»Ÿä¸€çš„æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥è®©ä¸Šå±‚ä»£ç æ— éœ€å…³å¿ƒåº•å±‚å·®å¼‚ã€‚</p>
<p><strong>ç¤ºä¾‹å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> TemplateDemo1 <span class="hljs-keyword">struct</span> {
    Code <span class="hljs-type">string</span> <span class="hljs-string">`json:"code"`</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *TemplateDemo1)</span></span> Json() <span class="hljs-type">string</span> {
    b, _ := json.Marshal(t)
    <span class="hljs-keyword">return</span> <span class="hljs-type">string</span>(b)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *TemplateDemo1)</span></span> GetTemplateCode() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"SMS_218038860"</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *TemplateDemo1)</span></span> GetSignName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"å¥‡è®¯ç§‘æŠ€"</span>
}
</code></pre>
<h4 data-id="heading-8">2.2 SMSProvider æ¥å£</h4>
<p>çŸ­ä¿¡æä¾›å•†å¿…é¡»å®ç°æ­¤æ¥å£ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// SMSProvider çŸ­ä¿¡æä¾›è€…æ¥å£</span>
<span class="hljs-keyword">type</span> SMSProvider <span class="hljs-keyword">interface</span> {
    Send(phoneNumbers <span class="hljs-type">string</span>, tpl TemplateConfig) (SMSResponse, <span class="hljs-type">error</span>)
}
</code></pre>
<p><strong>è®¾è®¡æ€è·¯</strong>ï¼šè¿™æ˜¯æ•´ä¸ªæ¨¡å—æœ€æ ¸å¿ƒçš„æŠ½è±¡ã€‚é€šè¿‡è¿™ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åˆ‡æ¢ä¸åŒçš„çŸ­ä¿¡æœåŠ¡å•†ï¼Œè€Œæ— éœ€ä¿®æ”¹ä¸Šå±‚è°ƒç”¨ä»£ç ã€‚</p>
<p><strong>é˜¿é‡Œäº‘å®ç°ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> AliSMS <span class="hljs-keyword">struct</span> {
    Debug           <span class="hljs-type">bool</span>
    AccessKeyId     <span class="hljs-type">string</span>
    AccessKeySecret <span class="hljs-type">string</span>
    *dysmsapi20170525.Client
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ali *AliSMS)</span></span> Send(phoneNumbers <span class="hljs-type">string</span>, tpl smsqueue.TemplateConfig) (res smsqueue.SMSResponse, _err <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">if</span> ali.Debug {
        <span class="hljs-comment">// è°ƒè¯•æ¨¡å¼ï¼Œä¸å®é™…å‘é€</span>
        <span class="hljs-keyword">return</span>
    }
    sendSmsRequest := &amp;dysmsapi20170525.SendSmsRequest{
        SignName:      tea.String(tpl.GetSignName()),
        TemplateCode:  tea.String(tpl.GetTemplateCode()),
        PhoneNumbers:  tea.String(phoneNumbers),
        TemplateParam: tea.String(tpl.Json()),
    }
    <span class="hljs-comment">// è°ƒç”¨é˜¿é‡Œäº‘ API...</span>
}
</code></pre>
<h4 data-id="heading-9">2.3 Callback æ¥å£</h4>
<p>å›è°ƒå‡½æ•°æ¥å£ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Callback å›è°ƒå‡½æ•°æ¥å£</span>
<span class="hljs-keyword">type</span> Callback <span class="hljs-keyword">interface</span> {
    OnSuccess(task *SMSTask, response SMSResponse) <span class="hljs-comment">// å‘é€æˆåŠŸæ—¶è°ƒç”¨</span>
    OnError(task *SMSTask, err <span class="hljs-type">error</span>)              <span class="hljs-comment">// å‘é€å¤±è´¥æ—¶è°ƒç”¨</span>
}
</code></pre>
<p><strong>è®¾è®¡æ€è·¯</strong>ï¼šå›è°ƒæœºåˆ¶è®©è°ƒç”¨æ–¹å¯ä»¥çµæ´»å¤„ç†å‘é€ç»“æœï¼Œæ¯”å¦‚è®°å½•æ—¥å¿—ã€æ›´æ–°æ•°æ®åº“çŠ¶æ€ç­‰ã€‚</p>
<p><strong>å‡½æ•°é€‚é…å™¨</strong>ï¼š</p>
<p>ä¸ºäº†è®©æ™®é€šå‡½æ•°ä¹Ÿèƒ½ä½œä¸ºå›è°ƒä½¿ç”¨ï¼Œæˆ‘ä»¬æä¾›äº† <code>CallbackFunc</code> é€‚é…å™¨ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> CallbackFunc <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(task *SMSTask, response SMSResponse, err <span class="hljs-type">error</span>)</span></span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f CallbackFunc)</span></span> OnSuccess(task *SMSTask, response SMSResponse) {
    f(task, response, <span class="hljs-literal">nil</span>)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f CallbackFunc)</span></span> OnError(task *SMSTask, err <span class="hljs-type">error</span>) {
    f(task, <span class="hljs-literal">nil</span>, err)
}
</code></pre>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ›´ç®€æ´çš„æ–¹å¼åˆ›å»ºå›è°ƒï¼š</p>
<pre><code class="hljs language-go" lang="go">callback := smsqueue.NewCallback(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(task *smsqueue.SMSTask, response smsqueue.SMSResponse, err <span class="hljs-type">error</span>)</span></span> {
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"å‘é€å¤±è´¥: %v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Printf(<span class="hljs-string">"å‘é€æˆåŠŸ: BizId=%s\n"</span>, response.GetBizId())
})
</code></pre>
<hr/>
<h3 data-id="heading-10">ä¸‰ã€é˜Ÿåˆ—å®ç°è¯¦è§£</h3>
<h4 data-id="heading-11">3.1 é˜Ÿåˆ—ç»“æ„</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> smsQueue <span class="hljs-keyword">struct</span> {
    mu               sync.RWMutex
    taskChan         <span class="hljs-keyword">chan</span> *SMSTask    <span class="hljs-comment">// ä»»åŠ¡é€šé“</span>
    workerNum        <span class="hljs-type">int</span>              <span class="hljs-comment">// å·¥ä½œåç¨‹æ•°é‡</span>
    stopChan         <span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}    <span class="hljs-comment">// åœæ­¢ä¿¡å·</span>
    wg               sync.WaitGroup   <span class="hljs-comment">// ç­‰å¾…ç»„</span>
    defaultProvider  SMSProvider      <span class="hljs-comment">// é»˜è®¤çŸ­ä¿¡æä¾›è€…</span>
    globalCallbacks  []Callback       <span class="hljs-comment">// å…¨å±€å›è°ƒ</span>
    isRunning        <span class="hljs-type">bool</span>             <span class="hljs-comment">// è¿è¡ŒçŠ¶æ€</span>
    maxQueueSize     <span class="hljs-type">int</span>              <span class="hljs-comment">// é˜Ÿåˆ—æœ€å¤§å®¹é‡</span>
    currentQueueSize <span class="hljs-type">int</span>              <span class="hljs-comment">// å½“å‰é˜Ÿåˆ—å¤§å°</span>
}
</code></pre>
<h4 data-id="heading-12">3.2 åˆ›å»ºé˜Ÿåˆ—</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewSMSQueue</span><span class="hljs-params">(workerNum <span class="hljs-type">int</span>, maxQueueSize <span class="hljs-type">int</span>)</span></span> Queue {
    <span class="hljs-keyword">if</span> workerNum &lt;= <span class="hljs-number">0</span> {
        workerNum = <span class="hljs-number">3</span>
    }
    <span class="hljs-keyword">return</span> &amp;smsQueue{
        taskChan:         <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *SMSTask, maxQueueSize),
        workerNum:        workerNum,
        stopChan:         <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}),
        maxQueueSize:     maxQueueSize,
        currentQueueSize: <span class="hljs-number">0</span>,
        globalCallbacks:  <span class="hljs-built_in">make</span>([]Callback, <span class="hljs-number">0</span>),
    }
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨å¸¦ç¼“å†²çš„ channel ä½œä¸ºä»»åŠ¡é˜Ÿåˆ—ï¼Œé¿å…é˜»å¡</li>
<li><code>maxQueueSize</code> ä¸º 0 æ—¶è¡¨ç¤ºæ— é™åˆ¶</li>
<li>é»˜è®¤ 3 ä¸ªå·¥ä½œåç¨‹ï¼Œå¯æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´</li>
</ul>
<h4 data-id="heading-13">3.3 æ·»åŠ ä»»åŠ¡</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *smsQueue)</span></span> AddTask(task *SMSTask) <span class="hljs-type">error</span> {
    q.mu.Lock()
    <span class="hljs-keyword">defer</span> q.mu.Unlock()

    <span class="hljs-comment">// æ£€æŸ¥é˜Ÿåˆ—å®¹é‡</span>
    <span class="hljs-keyword">if</span> q.maxQueueSize &gt; <span class="hljs-number">0</span> &amp;&amp; q.currentQueueSize &gt;= q.maxQueueSize {
        <span class="hljs-keyword">return</span> ErrQueueFull
    }

    <span class="hljs-comment">// ç”Ÿæˆä»»åŠ¡IDï¼ˆå¦‚æœæœªè®¾ç½®ï¼‰</span>
    <span class="hljs-keyword">if</span> task.ID == <span class="hljs-string">""</span> {
        task.ID = generateTaskID()
    }

    <span class="hljs-comment">// è®¾ç½®é»˜è®¤é‡è¯•æ¬¡æ•°</span>
    <span class="hljs-keyword">if</span> task.MaxRetries &lt;= <span class="hljs-number">0</span> {
        task.MaxRetries = <span class="hljs-number">3</span>
    }

    <span class="hljs-comment">// å°è¯•å°†ä»»åŠ¡æ¨é€åˆ°ä»»åŠ¡é€šé“</span>
    <span class="hljs-keyword">select</span> {
    <span class="hljs-keyword">case</span> q.taskChan &lt;- task:
        q.currentQueueSize++
    <span class="hljs-keyword">case</span> &lt;-time.After(<span class="hljs-number">5</span> * time.Second):
        <span class="hljs-keyword">return</span> ErrQueueFull
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>select</code> + <code>time.After</code> å®ç°è¶…æ—¶æœºåˆ¶</li>
<li>è‡ªåŠ¨ç”Ÿæˆä»»åŠ¡ IDï¼Œä¾¿äºè¿½è¸ª</li>
<li>é»˜è®¤é‡è¯• 3 æ¬¡</li>
</ul>
<h4 data-id="heading-14">3.4 å¯åŠ¨å·¥ä½œåç¨‹</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *smsQueue)</span></span> Start() {
    q.mu.Lock()
    <span class="hljs-keyword">defer</span> q.mu.Unlock()

    <span class="hljs-keyword">if</span> q.isRunning {
        <span class="hljs-keyword">return</span>
    }

    q.isRunning = <span class="hljs-literal">true</span>

    <span class="hljs-comment">// å¯åŠ¨å·¥ä½œåç¨‹</span>
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; q.workerNum; i++ {
        q.wg.Add(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">go</span> q.worker()
    }
}
</code></pre>
<h4 data-id="heading-15">3.5 å·¥ä½œåç¨‹å®ç°</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *smsQueue)</span></span> worker() {
    <span class="hljs-keyword">defer</span> q.wg.Done()

    <span class="hljs-keyword">for</span> {
        <span class="hljs-keyword">select</span> {
        <span class="hljs-keyword">case</span> &lt;-q.stopChan:
            <span class="hljs-keyword">return</span>
        <span class="hljs-keyword">case</span> task, ok := &lt;-q.taskChan:
            <span class="hljs-keyword">if</span> !ok {
                <span class="hljs-keyword">return</span>
            }
            <span class="hljs-comment">// ä»»åŠ¡å·²ä»é€šé“å–å‡ºï¼Œå‡å°‘é˜Ÿåˆ—å¤§å°</span>
            q.mu.Lock()
            q.currentQueueSize--
            q.mu.Unlock()
            q.processTask(task)
        }
    }
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>select</code> ç›‘å¬åœæ­¢ä¿¡å·å’Œä»»åŠ¡é€šé“</li>
<li>ä»»åŠ¡å–å‡ºåç«‹å³å‡å°‘é˜Ÿåˆ—è®¡æ•°</li>
<li>ä½¿ç”¨ <code>WaitGroup</code> ç¡®ä¿æ‰€æœ‰åç¨‹ä¼˜é›…é€€å‡º</li>
</ul>
<h4 data-id="heading-16">3.6 ä»»åŠ¡å¤„ç†ä¸é‡è¯•æœºåˆ¶</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *smsQueue)</span></span> processTask(task *SMSTask) {
    <span class="hljs-comment">// é€‰æ‹©æä¾›è€…</span>
    provider := task.Provider
    <span class="hljs-keyword">if</span> provider == <span class="hljs-literal">nil</span> {
        provider = q.defaultProvider
    }

    <span class="hljs-keyword">if</span> provider == <span class="hljs-literal">nil</span> {
        q.handleError(task, ErrNoProvider)
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// å‘é€çŸ­ä¿¡</span>
    response, err := provider.Send(task.PhoneNumbers, task.Template)

    <span class="hljs-comment">// å¤„ç†ç»“æœ</span>
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-comment">// å‘é€å¤±è´¥ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦é‡è¯•</span>
        <span class="hljs-keyword">if</span> task.RetryCount &lt; task.MaxRetries {
            task.RetryCount++
            <span class="hljs-comment">// å»¶è¿Ÿé‡è¯•ï¼ˆæŒ‡æ•°é€€é¿ï¼‰</span>
            time.Sleep(time.Duration(task.RetryCount) * time.Second)
            <span class="hljs-comment">// é‡æ–°åŠ å…¥é˜Ÿåˆ—</span>
            <span class="hljs-keyword">if</span> err := q.AddTask(task); err != <span class="hljs-literal">nil</span> {
                q.handleError(task, err)
            }
            <span class="hljs-keyword">return</span>
        }
        q.handleError(task, err)
    } <span class="hljs-keyword">else</span> {
        q.handleSuccess(task, response)
    }
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>æ”¯æŒä»»åŠ¡çº§ Providerï¼Œå¯ä»¥ä¸ºä¸åŒä»»åŠ¡æŒ‡å®šä¸åŒçš„æœåŠ¡å•†</li>
<li>è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼Œé»˜è®¤é‡è¯• 3 æ¬¡</li>
<li>æŒ‡æ•°é€€é¿ç­–ç•¥ï¼Œé¿å…çŸ­æ—¶é—´å†…é¢‘ç¹é‡è¯•</li>
</ul>
<h4 data-id="heading-17">3.7 å›è°ƒå¤„ç†</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *smsQueue)</span></span> handleSuccess(task *SMSTask, response SMSResponse) {
    <span class="hljs-comment">// è°ƒç”¨ä»»åŠ¡çº§å›è°ƒ</span>
    <span class="hljs-keyword">if</span> task.Callback != <span class="hljs-literal">nil</span> {
        task.Callback.OnSuccess(task, response)
    }
    <span class="hljs-comment">// è°ƒç”¨å…¨å±€å›è°ƒ</span>
    <span class="hljs-keyword">for</span> _, cb := <span class="hljs-keyword">range</span> q.globalCallbacks {
        cb.OnSuccess(task, response)
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *smsQueue)</span></span> handleError(task *SMSTask, err <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// è°ƒç”¨ä»»åŠ¡çº§å›è°ƒ</span>
    <span class="hljs-keyword">if</span> task.Callback != <span class="hljs-literal">nil</span> {
        task.Callback.OnError(task, err)
    }
    <span class="hljs-comment">// è°ƒç”¨å…¨å±€å›è°ƒ</span>
    <span class="hljs-keyword">for</span> _, cb := <span class="hljs-keyword">range</span> q.globalCallbacks {
        cb.OnError(task, err)
    }
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>å…ˆè°ƒç”¨ä»»åŠ¡çº§å›è°ƒï¼Œå†è°ƒç”¨å…¨å±€å›è°ƒ</li>
<li>å…¨å±€å›è°ƒå¯ä»¥ç”¨äºç»Ÿä¸€è®°å½•æ—¥å¿—ã€æ›´æ–°æ•°æ®åº“ç­‰</li>
</ul>
<hr/>
<h3 data-id="heading-18">å››ã€å•ä¾‹æ¨¡å¼ä¸å°è£…</h3>
<h4 data-id="heading-19">4.1 é˜¿é‡Œäº‘é˜Ÿåˆ—å•ä¾‹</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> (
    aliQueue     smsqueue.Queue
    aliQueueOnce sync.Once
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetQueue</span><span class="hljs-params">()</span></span> smsqueue.Queue {
    aliQueueOnce.Do(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// åˆ›å»ºé˜Ÿåˆ—ï¼Œ3ä¸ªå·¥ä½œåç¨‹ï¼Œé˜Ÿåˆ—å®¹é‡100</span>
        aliQueue = smsqueue.NewSMSQueue(<span class="hljs-number">3</span>, <span class="hljs-number">100</span>)
        <span class="hljs-comment">// è®¾ç½®é»˜è®¤æä¾›è€…ä¸ºé˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡</span>
        aliQueue.SetDefaultProvider(GetSingletonAliSMS())
        <span class="hljs-comment">// å¯åŠ¨é˜Ÿåˆ—</span>
        aliQueue.Start()
    })
    <span class="hljs-keyword">return</span> aliQueue
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>sync.Once</code> ç¡®ä¿é˜Ÿåˆ—åªåˆå§‹åŒ–ä¸€æ¬¡</li>
<li>æ‡’åŠ è½½ï¼Œé¦–æ¬¡è°ƒç”¨æ—¶æ‰åˆ›å»ºé˜Ÿåˆ—</li>
</ul>
<h4 data-id="heading-20">4.2 ä¾¿æ·å‘é€å‡½æ•°</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Send</span><span class="hljs-params">(ctx context.Context, phoneNumbers <span class="hljs-type">string</span>, template smsqueue.TemplateConfig, callback ...smsqueue.Callback)</span></span> <span class="hljs-type">error</span> {
    <span class="hljs-keyword">var</span> cb smsqueue.Callback
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(callback) &gt; <span class="hljs-number">0</span> {
        cb = callback[<span class="hljs-number">0</span>]
    }
    task := &amp;smsqueue.SMSTask{
        PhoneNumbers: phoneNumbers,
        Template:     template,
        Callback:     cb,
        Context:      ctx,
    }
    <span class="hljs-keyword">return</span> GetQueue().AddTask(task)
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨å¯å˜å‚æ•°ï¼Œå›è°ƒå‡½æ•°å¯é€‰</li>
<li>è‡ªåŠ¨åˆ›å»ºä»»åŠ¡å¹¶æ·»åŠ åˆ°é˜Ÿåˆ—</li>
</ul>
<hr/>
<h3 data-id="heading-21">äº”ã€é…ç½®ç®¡ç†</h3>
<h4 data-id="heading-22">5.1 é…ç½®æ–‡ä»¶</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># config/sms.yml</span>
<span class="hljs-attr">alisms:</span>
  <span class="hljs-attr">AccessKeyId:</span> <span class="hljs-string">""</span>      <span class="hljs-comment"># é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡AccessKeyId</span>
  <span class="hljs-attr">AccessKeySecret:</span> <span class="hljs-string">""</span>  <span class="hljs-comment"># é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡AccessKeySecret</span>
  <span class="hljs-attr">Debug:</span> <span class="hljs-literal">false</span>         <span class="hljs-comment"># æ˜¯å¦å¼€å¯è°ƒè¯•æ¨¡å¼</span>
</code></pre>
<h4 data-id="heading-23">5.2 é…ç½®è¯»å–</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewAliSMS</span><span class="hljs-params">()</span></span> *AliSMS {
    AccessKeyId := smsconfig.GetSmsConfig().GetString(<span class="hljs-string">"alisms.AccessKeyId"</span>)
    AccessKeySecret := smsconfig.GetSmsConfig().GetString(<span class="hljs-string">"alisms.AccessKeySecret"</span>)
    Debug := smsconfig.GetSmsConfig().GetBool(<span class="hljs-string">"alisms.Debug"</span>)

    config := &amp;openapi.Config{
        AccessKeyId:     tea.String(AccessKeyId),
        AccessKeySecret: tea.String(AccessKeySecret),
    }
    config.Endpoint = tea.String(<span class="hljs-string">"dysmsapi.aliyuncs.com"</span>)
    client, err := dysmsapi20170525.NewClient(config)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-built_in">panic</span>(err)
    }
    <span class="hljs-keyword">return</span> &amp;AliSMS{
        Debug:           Debug,
        AccessKeyId:     AccessKeyId,
        AccessKeySecret: AccessKeySecret,
        Client:          client,
    }
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>è°ƒè¯•æ¨¡å¼ä¸‹ä¸å®é™…å‘é€çŸ­ä¿¡ï¼Œæ–¹ä¾¿å¼€å‘æµ‹è¯•</li>
<li>é…ç½®ä¸ä»£ç åˆ†ç¦»ï¼Œä¾¿äºéƒ¨ç½²</li>
</ul>
<hr/>
<h3 data-id="heading-24">å…­ã€ä½¿ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-25">6.1 åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> <span class="hljs-string">"gin-fast/plugins/plusms/smshelper/alisms"</span>

<span class="hljs-comment">// å‘é€éªŒè¯ç çŸ­ä¿¡</span>
err := alisms.Send(context.Background(), <span class="hljs-string">"13800138000"</span>, &amp;alisms.TemplateDemo1{
    Code: <span class="hljs-string">"123456"</span>,
})
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    <span class="hljs-comment">// å¤„ç†é”™è¯¯</span>
}
</code></pre>
<h4 data-id="heading-26">6.2 ä½¿ç”¨å›è°ƒ</h4>
<pre><code class="hljs language-go" lang="go">callback := smsqueue.NewCallback(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(task *smsqueue.SMSTask, response smsqueue.SMSResponse, err <span class="hljs-type">error</span>)</span></span> {
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"å‘é€å¤±è´¥: %v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Printf(<span class="hljs-string">"å‘é€æˆåŠŸ: BizId=%s\n"</span>, response.GetBizId())
})

err := alisms.Send(context.Background(), <span class="hljs-string">"13800138000"</span>, &amp;alisms.TemplateDemo1{Code: <span class="hljs-string">"123456"</span>}, callback)
</code></pre>
<h4 data-id="heading-27">6.3 æ³¨å†Œå…¨å±€å›è°ƒ</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ³¨å†Œå…¨å±€å›è°ƒï¼ˆæ‰€æœ‰çŸ­ä¿¡å‘é€éƒ½ä¼šè°ƒç”¨ï¼‰</span>
alisms.RegisterGlobalCallback(&amp;MyGlobalCallback{})
</code></pre>
<h4 data-id="heading-28">6.4 è‡ªå®šä¹‰çŸ­ä¿¡æä¾›å•†</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> MySMSProvider <span class="hljs-keyword">struct</span>{}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(p *MySMSProvider)</span></span> Send(phoneNumbers <span class="hljs-type">string</span>, tpl smsqueue.TemplateConfig) (smsqueue.SMSResponse, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// å®ç°å‘é€é€»è¾‘</span>
    <span class="hljs-keyword">return</span> &amp;myResponse{}, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// è®¾ç½®ä¸ºé»˜è®¤æä¾›è€…</span>
alisms.SetDefaultProvider(&amp;MySMSProvider{})
</code></pre>
<hr/>
<h3 data-id="heading-29">ä¸ƒã€è®¾è®¡äº®ç‚¹æ€»ç»“</h3>
<h4 data-id="heading-30">7.1 é«˜åº¦è§£è€¦</h4>
<p>é€šè¿‡æ¥å£æŠ½è±¡ï¼Œæ ¸å¿ƒé˜Ÿåˆ—é€»è¾‘ä¸å…·ä½“çŸ­ä¿¡æœåŠ¡å•†å®Œå…¨è§£è€¦ã€‚æœªæ¥è¦æ¥å…¥æ–°çš„æœåŠ¡å•†ï¼Œåªéœ€å®ç° <code>SMSProvider</code> æ¥å£å³å¯ï¼Œæ— éœ€ä¿®æ”¹é˜Ÿåˆ—ä»£ç ã€‚</p>
<h4 data-id="heading-31">7.2 çµæ´»çš„å›è°ƒæœºåˆ¶</h4>
<p>æ”¯æŒä»»åŠ¡çº§å›è°ƒå’Œå…¨å±€å›è°ƒï¼Œå¯ä»¥çµæ´»å¤„ç†å‘é€ç»“æœï¼Œæ»¡è¶³ä¸åŒä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚ã€‚</p>
<h4 data-id="heading-32">7.3 å¯é çš„é‡è¯•æœºåˆ¶</h4>
<p>è‡ªåŠ¨é‡è¯• + æŒ‡æ•°é€€é¿ç­–ç•¥ï¼Œæœ‰æ•ˆåº”å¯¹ç½‘ç»œæŠ–åŠ¨å’Œä¸´æ—¶æ•…éšœã€‚</p>
<h4 data-id="heading-33">7.4 ä¼˜é›…çš„å¹¶å‘æ§åˆ¶</h4>
<p>ä½¿ç”¨ channel + worker pool æ¨¡å¼ï¼Œæœ‰æ•ˆæ§åˆ¶å¹¶å‘åº¦ï¼Œé¿å…èµ„æºè€—å°½ã€‚</p>
<h4 data-id="heading-34">7.5 æ˜“äºæµ‹è¯•</h4>
<p>é€šè¿‡æ¥å£æŠ½è±¡ï¼Œå¯ä»¥è½»æ¾ mock Provider å’Œ Queueï¼Œä¾¿äºå•å…ƒæµ‹è¯•ã€‚</p>
<hr/>
<h3 data-id="heading-35">å…«ã€æ‰©å±•å»ºè®®</h3>
<h4 data-id="heading-36">8.1 ä¼˜å…ˆçº§é˜Ÿåˆ—</h4>
<p>å½“å‰å®ç°æ˜¯ FIFO é˜Ÿåˆ—ï¼Œå¦‚æœéœ€è¦æ”¯æŒä¼˜å…ˆçº§ï¼Œå¯ä»¥è€ƒè™‘ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> PriorityTask <span class="hljs-keyword">struct</span> {
    *SMSTask
    Priority <span class="hljs-type">int</span>
}

<span class="hljs-comment">// ä½¿ç”¨ heap å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—</span>
<span class="hljs-keyword">type</span> PriorityQueue []*PriorityTask

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq PriorityQueue)</span></span> Len() <span class="hljs-type">int</span> { <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(pq) }
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq PriorityQueue)</span></span> Less(i, j <span class="hljs-type">int</span>) <span class="hljs-type">bool</span> {
    <span class="hljs-keyword">return</span> pq[i].Priority &lt; pq[j].Priority
}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq PriorityQueue)</span></span> Swap(i, j <span class="hljs-type">int</span>) { pq[i], pq[j] = pq[j], pq[i] }
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq *PriorityQueue)</span></span> Push(x <span class="hljs-keyword">interface</span>{}) { *pq = <span class="hljs-built_in">append</span>(*pq, x.(*PriorityTask)) }
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq *PriorityQueue)</span></span> Pop() <span class="hljs-keyword">interface</span>{} {
    old := *pq
    n := <span class="hljs-built_in">len</span>(old)
    item := old[n<span class="hljs-number">-1</span>]
    *pq = old[<span class="hljs-number">0</span> : n<span class="hljs-number">-1</span>]
    <span class="hljs-keyword">return</span> item
}
</code></pre>
<h4 data-id="heading-37">8.2 æŒä¹…åŒ–é˜Ÿåˆ—</h4>
<p>å½“å‰é˜Ÿåˆ—æ˜¯å†…å­˜é˜Ÿåˆ—ï¼Œåº”ç”¨é‡å¯ä¼šä¸¢å¤±ä»»åŠ¡ã€‚å¯ä»¥è€ƒè™‘ï¼š</p>
<ul>
<li>ä½¿ç”¨ Redis ä½œä¸ºä»»åŠ¡é˜Ÿåˆ—</li>
<li>ä½¿ç”¨æ•°æ®åº“å­˜å‚¨ä»»åŠ¡çŠ¶æ€</li>
<li>å®ç°ä»»åŠ¡æ¢å¤æœºåˆ¶</li>
</ul>
<h4 data-id="heading-38">8.3 é™æµæ§åˆ¶</h4>
<p>åœ¨ <code>AddTask</code> ä¸­å¢åŠ é™æµé€»è¾‘ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> RateLimiter <span class="hljs-keyword">struct</span> {
    tokens <span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewRateLimiter</span><span class="hljs-params">(qps <span class="hljs-type">int</span>)</span></span> *RateLimiter {
    rl := &amp;RateLimiter{
        tokens: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}, qps),
    }
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; qps; i++ {
        rl.tokens &lt;- <span class="hljs-keyword">struct</span>{}{}
    }
    <span class="hljs-keyword">go</span> rl.refill()
    <span class="hljs-keyword">return</span> rl
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(rl *RateLimiter)</span></span> refill() {
    ticker := time.NewTicker(time.Second / time.Duration(<span class="hljs-built_in">cap</span>(rl.tokens)))
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">range</span> ticker.C {
        <span class="hljs-keyword">select</span> {
        <span class="hljs-keyword">case</span> rl.tokens &lt;- <span class="hljs-keyword">struct</span>{}{}:
        <span class="hljs-keyword">default</span>:
        }
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(rl *RateLimiter)</span></span> Acquire() {
    &lt;-rl.tokens
}
</code></pre>
<h4 data-id="heading-39">8.4 ç›‘æ§æŒ‡æ ‡</h4>
<p>å¢åŠ ç›‘æ§æŒ‡æ ‡ï¼š</p>
<ul>
<li>é˜Ÿåˆ—é•¿åº¦</li>
<li>å‘é€æˆåŠŸç‡</li>
<li>å¹³å‡å“åº”æ—¶é—´</li>
<li>é‡è¯•æ¬¡æ•°</li>
</ul>
<hr/>
<h3 data-id="heading-40">ç»“è¯­</h3>
<p>æœ¬æ–‡åˆ†äº«äº†ä¸€ä¸ªå¯æ‰©å±•çš„çŸ­ä¿¡å‘é€é˜Ÿåˆ—æ¨¡å—çš„è®¾è®¡æ€è·¯å’Œå®ç°ç»†èŠ‚ã€‚é€šè¿‡æ¥å£æŠ½è±¡ã€ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ã€å›è°ƒæœºåˆ¶ç­‰è®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªæ—¢ç®€å•åˆå¼ºå¤§çš„çŸ­ä¿¡å‘é€ç³»ç»Ÿã€‚</p>
<p>è¿™ä¸ªæ¨¡å—çš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š</p>
<ol>
<li><strong>å¼€ç®±å³ç”¨</strong>ï¼šç®€å•çš„ API è®¾è®¡ï¼Œå‡ è¡Œä»£ç å³å¯å‘é€çŸ­ä¿¡</li>
<li><strong>æ˜“äºæ‰©å±•</strong>ï¼šé€šè¿‡æ¥å£æŠ½è±¡ï¼Œè½»æ¾æ¥å…¥æ–°çš„çŸ­ä¿¡æœåŠ¡å•†</li>
<li><strong>å¯é ç¨³å®š</strong>ï¼šè‡ªåŠ¨é‡è¯•ã€å¹¶å‘æ§åˆ¶ã€ä¼˜é›…åœæ­¢ç­‰æœºåˆ¶ä¿è¯ç³»ç»Ÿç¨³å®šæ€§</li>
</ol>
<p>å¸Œæœ›æœ¬æ–‡èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿äº¤æµè®¨è®ºï¼</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JWT åŒ Token æ— æ„Ÿåˆ·æ–°ï¼šå…¼é¡¾å®‰å…¨ä¸ä½“éªŒçš„å…¨æ ˆè®¤è¯æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7601034810312704054</link>    <guid>https://juejin.cn/post/7601034810312704054</guid>    <pubDate>2026-01-31T09:56:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601034810312704054" data-draft-id="7600994087588659219" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JWT åŒ Token æ— æ„Ÿåˆ·æ–°ï¼šå…¼é¡¾å®‰å…¨ä¸ä½“éªŒçš„å…¨æ ˆè®¤è¯æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å…¨æ ˆ,NestJS,React.js"/> <meta itemprop="datePublished" content="2026-01-31T09:56:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xhxxx"/> <meta itemprop="url" content="https://juejin.cn/user/3235201610941578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JWT åŒ Token æ— æ„Ÿåˆ·æ–°ï¼šå…¼é¡¾å®‰å…¨ä¸ä½“éªŒçš„å…¨æ ˆè®¤è¯æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3235201610941578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xhxxx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T09:56:50.000Z" title="Sat Jan 31 2026 09:56:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å…¨æ ˆé¡¹ç›®ä¸­çš„ JWT åŒ Token æ— æ„Ÿåˆ·æ–°è®¤è¯æ–¹æ¡ˆ</h2>
<p>åœ¨æ„å»º Web åº”ç”¨æ—¶ï¼Œç”¨æˆ·è®¤è¯ï¼ˆAuthenticationï¼‰å°±åƒæ˜¯ç»™ä½ çš„ç³»ç»Ÿè£…ä¸€æ‰‡é—¨ã€‚å¦‚ä½•æ—¢ä¿è¯è¿™æ‰‡é—¨è¶³å¤Ÿå®‰å…¨ï¼ˆä¸è®©åäººè¿›ï¼‰ï¼Œåˆè®©å®ƒè¶³å¤Ÿæ™ºèƒ½ï¼ˆä¸è®©å¥½äººæ¯æ¬¡è¿›å‡ºéƒ½æé’¥åŒ™ï¼‰ï¼Œæ˜¯æ¯ä¸ªå¼€å‘è€…éƒ½è¦é¢å¯¹çš„æŒ‘æˆ˜ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„å…¨æ ˆé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å†äº†ä¸€ä¸ªä» Mock å• Token åˆ°ç”Ÿäº§çº§åŒ Token çš„æ¼”è¿›è¿‡ç¨‹ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥è¿™å¥—æœºåˆ¶çš„æ¯ä¸€ä¸ªé½¿è½®ï¼Œæ­ç¤ºå®ƒæ˜¯å¦‚ä½•å¹³è¡¡â€œå®‰å…¨æ€§â€ä¸â€œä½“éªŒæ„Ÿâ€çš„ã€‚</p>
<hr/>
<h3 data-id="heading-1">å• Token çš„è®¤è¯æœºåˆ¶</h3>
<p>æœ€åˆå†™é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬åœ¨ mock ä¸­ä½¿ç”¨äº†å• Token çš„æœºåˆ¶ï¼Œé€šè¿‡ <code>sign</code> ç›´æ¥ç­¾å‘ä¸€ä¸ªé•¿æœŸçš„ Tokenï¼Œè€Œæ‹¦æˆªå™¨ä¸­åªè¦ç¢°åˆ° <code>401</code>ï¼Œå°±ç›´æ¥å¼ºåˆ¶ç™»å‡ºï¼Œè¿”å›ç™»å½•é¡µï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">token</span> = jwt.<span class="hljs-title function_ invoke__">sign</span>({
  <span class="hljs-attr">user</span>: { // json å¯¹è±¡
    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'admin'</span>,
    <span class="hljs-attr">avatar</span>: <span class="hljs-string">"https://p9-passport.byteacctimg.com/img/user-avatar/09aff03aaa33dd9d311511bcbd12535f~50x50.awebp"</span>
  }
  // åŠ ç›  
}, secret, {
  <span class="hljs-attr">expiresIn</span>: <span class="hljs-number">86400</span> * <span class="hljs-number">7</span> // æœ‰æ•ˆæ—¶é—´ <span class="hljs-number">7</span>å¤©
});
</code></pre>
<p>è¿™æ ·çš„å• Token æ¨¡å¼å´æš´éœ²äº†å¾ˆå¤šç¼ºé™·ï¼š</p>
<ol>
<li><strong>å®‰å…¨æ€§é—®é¢˜</strong>ï¼šé•¿æœŸ Token å­˜åœ¨è¢«æˆªè·åè¢«å†’ç”¨çš„é£é™©</li>
<li><strong>ç”¨æˆ·ä½“éªŒé—®é¢˜</strong>ï¼šç”¨æˆ·æ¯æ¬¡æ“ä½œéƒ½éœ€è¦é‡æ–°ç™»å½•ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ</li>
<li><strong>æœåŠ¡ç«¯å‹åŠ›é—®é¢˜</strong>ï¼šæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦éªŒè¯ Tokenï¼ŒæœåŠ¡ç«¯å‹åŠ›å¢å¤§</li>
</ol>
<hr/>
<h3 data-id="heading-2">è¿›é˜¶ï¼šJWT åŒ Token è®¤è¯æœºåˆ¶</h3>
<p>åœ¨å• Token æ—¶ä»£ï¼Œæˆ‘ä»¬æ€»æ˜¯é¢ä¸´ä¸€ä¸ªä¸¤éš¾çš„é€‰æ‹©ï¼šToken æœ‰æ•ˆæœŸè®¾çŸ­äº†ï¼Œç”¨æˆ·ä½“éªŒå·®ï¼›è®¾é•¿äº†ï¼Œå®‰å…¨é£é™©å¤§ã€‚<strong>åŒ Token æœºåˆ¶</strong>å·§å¦™åœ°å¼•å…¥äº†ä¸¤æŠŠä¸åŒç”¨é€”çš„â€œé’¥åŒ™â€æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h4 data-id="heading-3">åç«¯éƒ¨åˆ†æ ¸å¿ƒå®ç°</h4>
<p>åç«¯éƒ¨åˆ†è´Ÿè´£ Token çš„ç­¾å‘ä¸éªŒè¯ã€‚</p>
<h5 data-id="heading-4">Token çš„ç­¾å‘</h5>
<p>æ¯å½“ç”¨æˆ·è¿›è¡Œç™»å½•æ—¶ï¼Œä¼šåŒæ—¶ç­¾å‘ä¸€å¯¹ Tokenï¼š</p>
<ul>
<li><strong>Access Token</strong>ï¼šçŸ­æœŸ Tokenï¼Œå°±åƒæ˜¯ç”¨æˆ·çš„ä¸´æ—¶å¯†ç ï¼Œç”¨äºéªŒè¯ç”¨æˆ·èº«ä»½ã€‚æ‰€æœ‰çš„æ“ä½œéƒ½åªéœ€è¦éªŒè¯ Access Token å³å¯ã€‚</li>
<li><strong>Refresh Token</strong>ï¼šé•¿æœŸ Tokenï¼Œå°±åƒæ˜¯ç”¨æˆ·çš„é•¿æœŸå¯†ç ï¼Œç”¨äºåˆ·æ–° Access Tokenã€‚</li>
</ul>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// AuthService: ç”ŸæˆåŒ Token</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">generateTokens</span>(<span class="hljs-params">userId: <span class="hljs-built_in">string</span>, username: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// Payload (è½½è·)ï¼šé’¥åŒ™é‡ŒåŒ…è£¹çš„ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> payload = { <span class="hljs-attr">sub</span>: userId, <span class="hljs-attr">name</span>: username };

  <span class="hljs-comment">// ä½¿ç”¨ Promise.all å¹¶è¡Œæ‰§è¡Œï¼Œæ•ˆç‡ç¿»å€</span>
  <span class="hljs-keyword">const</span> [at, rt] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-comment">// åˆ¶ä½œæ‰‹ç¯ (Access Token)ï¼š15åˆ†é’Ÿè¿‡æœŸ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">jwtService</span>.<span class="hljs-title function_">signAsync</span>(payload, {
      <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">'15m'</span>,
      <span class="hljs-attr">secret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">TOKEN_SECRET</span>
    }),
    <span class="hljs-comment">// åˆ¶ä½œå‡­è¯ (Refresh Token)ï¼š7å¤©è¿‡æœŸ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">jwtService</span>.<span class="hljs-title function_">signAsync</span>(payload, {
      <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">'7d'</span>,
      <span class="hljs-attr">secret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">TOKEN_SECRET</span>
    })
  ]);

  <span class="hljs-keyword">return</span> { <span class="hljs-attr">access_token</span>: at, <span class="hljs-attr">refresh_token</span>: rt };
}
</code></pre>
<p><strong>æ ¸å¿ƒä»£ç åˆ†æ</strong>ï¼š</p>
<ul>
<li><code>jwtService</code>ï¼šè¿™æ˜¯ NestJS ä¸­æä¾›çš„ JWT æœåŠ¡ï¼Œç”¨äºç­¾å‘ Token</li>
<li><code>signAsync</code>ï¼šJWT æœåŠ¡æä¾›çš„å¼‚æ­¥æ–¹æ³•ï¼Œç”¨äºç­¾å‘ Token</li>
<li><code>expiresIn</code>ï¼šToken çš„è¿‡æœŸæ—¶é—´ã€‚15 åˆ†é’Ÿç”¨äºçŸ­æœŸè®¤è¯ï¼Œ7 å¤©ç”¨äºé•¿æœŸå­˜å‚¨</li>
<li><code>secret</code>ï¼šToken çš„å¯†é’¥ï¼Œç”¨äºç­¾åï¼Œç¡®ä¿å®‰å…¨æ€§ï¼ˆä¿å­˜åœ¨ <code>.env</code> æ–‡ä»¶ä¸­ï¼‰</li>
<li><code>payload</code>ï¼šToken ä¸­åŒ…å«çš„ä¿¡æ¯ã€‚<code>sub</code> æ˜¯æ ‡å‡† JWT Subject å­—æ®µï¼Œè¡¨ç¤ºç”¨æˆ· ID</li>
<li><code>Promise.all</code>ï¼šå¹¶è¡Œç­¾å‘ä¸¤ä¸ª Tokenï¼Œæé«˜æ•ˆç‡ï¼Œåªæœ‰ä¸¤è€…éƒ½æˆåŠŸæ‰è¿”å›å‰ç«¯</li>
</ul>
<blockquote>
<p>çŸ­æœŸçš„ Token é€šå¸¸ä»¥åˆ†é’Ÿä¸ºå•ä½ï¼Œé•¿æœŸçš„ Token é€šå¸¸ä»¥å¤©ä¸ºå•ä½ï¼Œæ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè®¾ç½®ã€‚</p>
</blockquote>
<hr/>
<h5 data-id="heading-5">Token çš„åˆ·æ–°</h5>
<p>å½“ Access Token è¿‡æœŸæ—¶ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ Refresh Token æ¥é‡æ–°é¢å‘ä¸€å¯¹ Tokenï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">async</span> <span class="hljs-title function_">refreshToken</span>(<span class="hljs-params">rt: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// decoded</span>
    <span class="hljs-keyword">const</span> payload = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">jwtService</span>.<span class="hljs-title function_">verifyAsync</span>(rt, {
      <span class="hljs-attr">secret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">TOKEN_SECRET</span>
    });
    <span class="hljs-keyword">if</span> (payload) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateTokens</span>(payload.<span class="hljs-property">sub</span>, payload.<span class="hljs-property">name</span>);
    }
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnauthorizedException</span>(<span class="hljs-string">'Refresh token å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•'</span>);
  }
}
</code></pre>
<p><strong>æ ¸å¿ƒä»£ç è§£æ</strong>ï¼š</p>
<ul>
<li><code>verifyAsync</code> æ–¹æ³•ï¼šNestJS JWT æœåŠ¡æä¾›çš„å¼‚æ­¥æ–¹æ³•ï¼Œç”¨äºéªŒè¯ Refresh Token çš„æœ‰æ•ˆæ€§</li>
<li><code>payload</code>ï¼šè‹¥èƒ½æˆåŠŸè§£ç å¹¶è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œè¯´æ˜ Refresh Token æœ‰æ•ˆï¼Œå³å¯è°ƒç”¨ <code>generateTokens</code> é‡æ–°ç­¾å‘</li>
</ul>
<hr/>
<h5 data-id="heading-6">NestJS é‰´æƒå¤„ç†ï¼šç­–ç•¥ä¸å®ˆå«</h5>
<h6 data-id="heading-7">é…å¤‡å®ˆå«</h6>
<p>NestJS æä¾›äº†é»˜è®¤çš„ Guardï¼Œç”¨äºè§£æ <code>req.headers.Authorization</code> ä¸­çš„ Tokenã€‚æˆ‘ä»¬åªéœ€ç»§æ‰¿è¯¥ Guardï¼Œå¹¶æŒ‡å®šä½¿ç”¨ JWT ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@nestjs/common"</span>;
<span class="hljs-comment">// NestJS é»˜è®¤æä¾›çš„ guardï¼Œè‡ªåŠ¨è§£æ req Authorization</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthGuard</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@nestjs/passport"</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtAuthGuard</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">AuthGuard</span>(<span class="hljs-string">'jwt'</span>) {}
</code></pre>
<p>åªéœ€åœ¨éœ€è¦é‰´æƒçš„è·¯ç”±ä¸ŠåŠ ä¸Šè£…é¥°å™¨å³å¯ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-meta">@UseGuards</span>(<span class="hljs-title class_">JwtAuthGuard</span>)  <span class="hljs-comment">// è·¯ç”±å®ˆå«</span>
<span class="hljs-title function_">createPost</span>(<span class="hljs-params">
  <span class="hljs-meta">@Body</span>(<span class="hljs-string">'title'</span>) title: <span class="hljs-built_in">string</span>,
  <span class="hljs-meta">@Body</span>(<span class="hljs-string">'content'</span>) content: <span class="hljs-built_in">string</span>,
  <span class="hljs-meta">@Req</span>() req
</span>) {...}
</code></pre>
<h6 data-id="heading-8">åˆ¶å®šç­–ç•¥</h6>
<p>ä»…æœ‰å®ˆå«è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆ¶å®šä¸€å¥—è§„åˆ™ï¼Œè®©ç³»ç»ŸçŸ¥é“å¦‚ä½•é‰´æƒï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-comment">// å®šä¹‰å’Œé›†æˆ Passport èº«ä»½éªŒè¯ç­–ç•¥çš„åŸºç±»</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PassportStrategy</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/passport'</span>;
<span class="hljs-comment">// èº«ä»½éªŒè¯ç­–ç•¥é€‰æ‹© jwt</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Strategy</span>, <span class="hljs-title class_">ExtractJwt</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'passport-jwt'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtStrategy</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PassportStrategy</span>(<span class="hljs-title class_">Strategy</span>) {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>({
      <span class="hljs-attr">jwtFromRequest</span>: <span class="hljs-title class_">ExtractJwt</span>.<span class="hljs-title function_">fromAuthHeaderAsBearerToken</span>(),
      <span class="hljs-attr">secretOrKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">TOKEN_SECRET</span> || <span class="hljs-string">""</span>
    });
  }

  <span class="hljs-comment">// JWT ç”¨æˆ·å¯¹è±¡</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">validate</span>(<span class="hljs-params">payload</span>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">id</span>: payload.<span class="hljs-property">sub</span>,
      <span class="hljs-attr">name</span>: payload.<span class="hljs-property">name</span>
    };
  }
}
</code></pre>
<p><strong>æ ¸å¿ƒä»£ç è§£æ</strong>ï¼š</p>
<ul>
<li><code>PassportStrategy(Strategy)</code>ï¼šNestJS æä¾›çš„åŸºç±»ï¼Œç”¨äºå®šä¹‰ Passport ç­–ç•¥</li>
<li><code>Strategy</code>ï¼šæ¥è‡ª <code>passport-jwt</code>ï¼Œè¡¨ç¤ºä½¿ç”¨ JWT ç­–ç•¥</li>
<li><code>jwtFromRequest</code>ï¼šæŒ‡å®šä» <code>Authorization</code> Header ä¸­æå– Bearer Token</li>
<li><code>secretOrKey</code>ï¼šç”¨äºéªŒè¯ Token ç­¾åçš„å¯†é’¥ï¼ˆæ¥è‡ªç¯å¢ƒå˜é‡ï¼‰</li>
<li><code>validate</code>ï¼šéªŒè¯æˆåŠŸåè¿”å›ç”¨æˆ·ä¸Šä¸‹æ–‡ï¼ŒæŒ‚è½½åˆ° <code>req.user</code> ä¸Š</li>
</ul>
<p>ä¾‹å¦‚ï¼Œåœ¨ä¸šåŠ¡ä»£ç ä¸­å¯ç›´æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-meta">@Post</span>()
<span class="hljs-meta">@UseGuards</span>(<span class="hljs-title class_">JwtAuthGuard</span>)
<span class="hljs-title function_">createPost</span>(<span class="hljs-params">
  <span class="hljs-meta">@Body</span>(<span class="hljs-string">'title'</span>) title: <span class="hljs-built_in">string</span>,
  <span class="hljs-meta">@Body</span>(<span class="hljs-string">'content'</span>) content: <span class="hljs-built_in">string</span>,
  <span class="hljs-meta">@Req</span>() req
</span>) {
  <span class="hljs-keyword">const</span> { user } = req;
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">postsService</span>.<span class="hljs-title function_">createPost</span>({
    title,
    content,
    <span class="hljs-attr">userId</span>: user.<span class="hljs-property">id</span>
  });
}
</code></pre>
<hr/>
<h4 data-id="heading-9">å‰ç«¯éƒ¨åˆ†æ ¸å¿ƒå®ç°</h4>
<p>å‰ç«¯çš„æŒ‘æˆ˜åœ¨äºå¦‚ä½•ç®¡ç†è¿™äº› Tokenï¼Œå¹¶åœ¨ Token è¿‡æœŸæ—¶â€œæ‚„æ— å£°æ¯â€åœ°å®Œæˆåˆ·æ–°ï¼Œè®©ç”¨æˆ·æ„Ÿè§‰ä¸åˆ°ä»»ä½•ä¸­æ–­ã€‚</p>
<h5 data-id="heading-10">Token çš„å­˜å‚¨ä¸çŠ¶æ€ç®¡ç†</h5>
<p>æˆ‘ä»¬ä½¿ç”¨ <strong>Zustand</strong> åº“è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œå› ä¸ºå®ƒè½»é‡ä¸”æ”¯æŒä¸­é—´ä»¶ã€‚</p>
<p>å…³é”®ä»£ç è§£æ (<code>useUserStore</code>)ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">create</span>(
  <span class="hljs-title function_">persist</span>(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
    <span class="hljs-attr">accessToken</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">refreshToken</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-comment">// ...</span>
  }), {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'user-store'</span>, <span class="hljs-comment">// LocalStorage ä¸­çš„ key</span>
    <span class="hljs-attr">partialize</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> ({ 
      <span class="hljs-comment">// ç™½åå•ï¼šåªæŒä¹…åŒ–è¿™ä¸¤ä¸ª Tokenï¼Œä¸æŒä¹…åŒ–ä¸´æ—¶çŠ¶æ€</span>
      <span class="hljs-attr">accessToken</span>: state.<span class="hljs-property">accessToken</span>,
      <span class="hljs-attr">refreshToken</span>: state.<span class="hljs-property">refreshToken</span>,
    })
  })
);
</code></pre>
<ul>
<li><strong>æŒä¹…åŒ– (Persist)</strong> ï¼šç¡®ä¿åˆ·æ–°é¡µé¢åï¼Œç”¨æˆ·ä¾ç„¶æ˜¯ç™»å½•çŠ¶æ€ã€‚Token è‡ªåŠ¨ä¿å­˜åˆ° <code>localStorage</code>ã€‚</li>
<li><strong>ç™½åå• (Partialize)</strong> ï¼šæœ€ä½³å®è·µã€‚åªå­˜ Tokenï¼Œé¿å…å°†ä¸´æ—¶çŠ¶æ€ï¼ˆå¦‚ <code>isLoading</code>ï¼‰è¯¯å­˜ï¼Œå¯¼è‡´çŠ¶æ€é”™ä¹±ã€‚</li>
</ul>
<hr/>
<h5 data-id="heading-11">æ‹¦æˆªå™¨å®ç° Token æ— æ„Ÿåˆ·æ–°</h5>
<p><strong>ä¸ºä»€ä¹ˆåœ¨æ‹¦æˆªå™¨é‡Œåšï¼Ÿ</strong><br/>
å› ä¸ºæ‹¦æˆªå™¨æ˜¯æ‰€æœ‰ HTTP è¯·æ±‚çš„<strong>æ€»å…³å£</strong>ã€‚åœ¨è¿™é‡Œå¤„ç†ï¼Œå¯ä»¥ç»Ÿä¸€æ‹¦æˆªæ‰€æœ‰ API çš„ <code>401</code> é”™è¯¯ï¼Œä¸šåŠ¡ä»£ç å®Œå…¨ä¸éœ€è¦å…³å¿ƒ Token æ˜¯å¦è¿‡æœŸï¼Œåšåˆ°äº†<strong>é€»è¾‘è§£è€¦</strong>ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store/useUserStore'</span>;

<span class="hljs-keyword">const</span> instance = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://localhost:5173/api'</span>
});

<span class="hljs-comment">// æ¯æ¬¡è¯·æ±‚è‡ªåŠ¨å¸¦ä¸Š token</span>
instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> token = useUserStore.<span class="hljs-title function_">getState</span>().<span class="hljs-property">accessToken</span>;
  <span class="hljs-keyword">if</span> (token) {
    config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
  }
  <span class="hljs-keyword">return</span> config;
});

<span class="hljs-keyword">let</span> isRefreshing = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">requestsQueue</span>: <span class="hljs-built_in">any</span>[] = []; 

<span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨</span>
instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>;
}, <span class="hljs-keyword">async</span> (err) =&gt; {
  <span class="hljs-keyword">const</span> { config, response } = err;
  <span class="hljs-comment">// _retry åˆ»æ„æ ‡è®°æ˜¯å¦æ˜¯é‡è¯•çš„è¯·æ±‚ï¼Œé¿å… retry æ­»å¾ªç¯</span>
  <span class="hljs-keyword">if</span> (response?.<span class="hljs-property">status</span> === <span class="hljs-number">401</span> &amp;&amp; !config.<span class="hljs-property">_retry</span>) {
    <span class="hljs-comment">// å¦‚æœåœ¨åˆ·æ–°ä¸­ï¼ŒæŠŠåç»­è¯·æ±‚æ”¾åˆ°é˜Ÿåˆ—ä¸­</span>
    <span class="hljs-keyword">if</span> (isRefreshing) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        requestsQueue.<span class="hljs-title function_">push</span>(<span class="hljs-function">(<span class="hljs-params">token: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
          config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
          <span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">instance</span>(config));
        });
      });
    }

    config.<span class="hljs-property">_retry</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// retry å¼€å…³ </span>
    isRefreshing = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> { refreshToken } = useUserStore.<span class="hljs-title function_">getState</span>();
      <span class="hljs-keyword">if</span> (refreshToken) {
        <span class="hljs-comment">// æ— æ„Ÿåˆ·æ–° token</span>
        <span class="hljs-keyword">const</span> { access_token, refresh_token } = <span class="hljs-keyword">await</span> instance.<span class="hljs-title function_">post</span>(<span class="hljs-string">'auth/refresh'</span>, {
          <span class="hljs-attr">refresh_token</span>: refreshToken
        });

        useUserStore.<span class="hljs-title function_">setState</span>({
          <span class="hljs-attr">accessToken</span>: access_token,
          <span class="hljs-attr">refreshToken</span>: refresh_token,
          <span class="hljs-attr">isLogin</span>: <span class="hljs-literal">true</span>
        });

        requestsQueue.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>(access_token));
        requestsQueue = [];

        config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${access_token}</span>`</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">instance</span>(config);
      }
    } <span class="hljs-keyword">catch</span> (err) {
      useUserStore.<span class="hljs-title function_">getState</span>().<span class="hljs-title function_">logout</span>();
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(err);
    } <span class="hljs-keyword">finally</span> {
      isRefreshing = <span class="hljs-literal">false</span>;
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(err);
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> instance;
</code></pre>
<h6 data-id="heading-12">ä»£ç æ‹†è§£è®²è§£</h6>
<ol>
<li>
<p><strong>è¯·æ±‚æ‹¦æˆªå™¨</strong><br/>
è®©æ¯æ¬¡è¯·æ±‚éƒ½è‡ªåŠ¨å¸¦ä¸Š Tokenï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> token = useUserStore.<span class="hljs-title function_">getState</span>().<span class="hljs-property">accessToken</span>;
  <span class="hljs-keyword">if</span> (token) {
    config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
  }
  <span class="hljs-keyword">return</span> config;
});
</code></pre>
</li>
<li>
<p><strong>å“åº”æ‹¦æˆªå™¨</strong></p>
<p><strong>å…³é”®å˜é‡</strong>ï¼š</p>
<ul>
<li><code>isRefreshing</code>ï¼šæ˜¯å¦æ­£åœ¨åˆ·æ–° Token</li>
<li><code>requestsQueue</code>ï¼šç­‰å¾…åˆ·æ–°å®Œæˆåçš„è¯·æ±‚é˜Ÿåˆ—</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªé˜Ÿåˆ—ï¼Ÿ</strong><br/>
å½“å¤šä¸ªå¹¶å‘è¯·æ±‚å›  Token è¿‡æœŸå¤±è´¥æ—¶ï¼Œä¸èƒ½æ¯ä¸ªéƒ½å»åˆ·æ–° Tokenã€‚åº”åªè§¦å‘ä¸€æ¬¡åˆ·æ–°ï¼Œå…¶ä½™è¯·æ±‚æ’é˜Ÿç­‰å¾…æ–° Tokenã€‚</p>
<p><strong>é€»è¾‘æ­¥éª¤</strong>ï¼š</p>
<ul>
<li>
<p><strong>åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ·æ–° Token</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">if</span> (response?.<span class="hljs-property">status</span> === <span class="hljs-number">401</span> &amp;&amp; !config.<span class="hljs-property">_retry</span>) { ... }
</code></pre>
<blockquote>
<p><code>_retry</code> æ ‡è®°é˜²æ­¢æ­»å¾ªç¯ï¼šè‹¥é‡è¯•åä» 401ï¼Œä¸å†é‡å¤åˆ·æ–°ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>å¤„ç†å¹¶å‘è¯·æ±‚</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">if</span> (isRefreshing) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    requestsQueue.<span class="hljs-title function_">push</span>(<span class="hljs-function">(<span class="hljs-params">token: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
      <span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">instance</span>(config));
    });
  });
}
config.<span class="hljs-property">_retry</span> = <span class="hljs-literal">true</span>;
isRefreshing = <span class="hljs-literal">true</span>;
</code></pre>
</li>
<li>
<p><strong>ç­¾å‘æ–° Token</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> { refreshToken } = useUserStore.<span class="hljs-title function_">getState</span>();
<span class="hljs-keyword">if</span> (refreshToken) {
  <span class="hljs-keyword">const</span> { access_token, refresh_token } = <span class="hljs-keyword">await</span> instance.<span class="hljs-title function_">post</span>(<span class="hljs-string">'auth/refresh'</span>, {
    <span class="hljs-attr">refresh_token</span>: refreshToken
  });
  useUserStore.<span class="hljs-title function_">setState</span>({
    <span class="hljs-attr">accessToken</span>: access_token,
    <span class="hljs-attr">refreshToken</span>: refresh_token,
    <span class="hljs-attr">isLogin</span>: <span class="hljs-literal">true</span>
  });
}
</code></pre>
</li>
<li>
<p><strong>é‡æ”¾æ’é˜Ÿè¯·æ±‚</strong></p>
<pre><code class="hljs language-tsx" lang="tsx">requestsQueue.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>(access_token));
requestsQueue = [];
</code></pre>
</li>
<li>
<p><strong>é‡è¯•å½“å‰è¯·æ±‚</strong></p>
<pre><code class="hljs language-tsx" lang="tsx">config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${access_token}</span>`</span>;
<span class="hljs-keyword">return</span> <span class="hljs-title function_">instance</span>(config);
</code></pre>
</li>
<li>
<p><strong>å¤„ç†åˆ·æ–°å¤±è´¥</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">catch</span> (err) {
  useUserStore.<span class="hljs-title function_">getState</span>().<span class="hljs-title function_">logout</span>();
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(err);
} <span class="hljs-keyword">finally</span> {
  isRefreshing = <span class="hljs-literal">false</span>;
}
</code></pre>
</li>
<li>
<p><strong>æ‹¦æˆªå™¨å‡ºå£</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(err);
</code></pre>
</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-13">æ€»ç»“</h3>
<p>JWT åŒ Token æ— æ„Ÿåˆ·æ–°æœºåˆ¶ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç§åœ¨å®‰å…¨æ€§å’Œç”¨æˆ·ä½“éªŒä¹‹é—´å–å¾—ç²¾å¦™å¹³è¡¡çš„å·¥ç¨‹å®è·µã€‚é€šè¿‡å°†è®¤è¯èŒè´£æ‹†åˆ†ä¸ºçŸ­æœŸæœ‰æ•ˆçš„ Access Token ä¸é•¿æœŸæœ‰æ•ˆçš„ Refresh Tokenï¼Œæˆ‘ä»¬æ—¢é¿å…äº†é•¿æœŸæŒæœ‰æ•æ„Ÿå‡­è¯å¸¦æ¥çš„å®‰å…¨é£é™©ï¼Œåˆæ¶ˆé™¤äº†ç”¨æˆ·é¢‘ç¹ç™»å½•çš„ä½“éªŒæ–­å±‚ã€‚</p>
<p>åç«¯é€šè¿‡ NestJS çš„å®ˆå«ï¼ˆGuardï¼‰ä¸ç­–ç•¥ï¼ˆStrategyï¼‰ä½“ç³»ï¼Œæ„å»ºäº†ä¸€å¥—æ¸…æ™°ã€å¯å¤ç”¨çš„é‰´æƒåŸºç¡€è®¾æ–½ï¼›å‰ç«¯åˆ™å€ŸåŠ© Axios æ‹¦æˆªå™¨ä¸çŠ¶æ€ç®¡ç†åº“ Zustandï¼Œåœ¨è¯·æ±‚å±‚é¢å®ç°äº†â€œé€æ˜â€çš„ Token åˆ·æ–°é€»è¾‘â€”â€”ä¸šåŠ¡ä»£ç æ— éœ€æ„ŸçŸ¥è®¤è¯ç»†èŠ‚ï¼Œæ‰€æœ‰ 401 é”™è¯¯éƒ½è¢«æ‹¦æˆªå™¨è‡ªåŠ¨å¤„ç†ï¼ŒçœŸæ­£åšåˆ°äº†â€œæ— æ„Ÿâ€ã€‚</p>
<p>è¿™å¥—æ–¹æ¡ˆçš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š<strong>å®‰å…¨ä¸å¦¥åï¼Œä½“éªŒä¸æ‰“æŠ˜</strong>ã€‚Access Token çš„çŸ­ç”Ÿå‘½å‘¨æœŸæå¤§é™ä½äº†æ³„éœ²åçš„å±å®³çª—å£ï¼Œè€Œ Refresh Token çš„ç‹¬ç«‹å­˜å‚¨ä¸ä¸¥æ ¼æ ¡éªŒåˆ™ä¿éšœäº†å‡­è¯åˆ·æ–°çš„å®‰å…¨è¾¹ç•Œã€‚åŒæ—¶ï¼Œé€šè¿‡é˜Ÿåˆ—æœºåˆ¶ä¸é‡è¯•æ ‡è®°ï¼Œå‰ç«¯æœ‰æ•ˆè§£å†³äº†å¹¶å‘è¯·æ±‚ä¸‹çš„ Token ç«æ€é—®é¢˜ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨é«˜è´Ÿè½½ä¸‹ä¾ç„¶ç¨³å®šå¯é ã€‚</p>
<p>å½“ç„¶ï¼Œä»»ä½•æ–¹æ¡ˆéƒ½ä¸æ˜¯é“¶å¼¹ã€‚åŒ Token æœºåˆ¶è™½å¥½ï¼Œä»éœ€é…åˆä»¥ä¸‹æªæ–½ï¼Œæ‰èƒ½æ„ç­‘èµ·å®Œæ•´çš„è®¤è¯å®‰å…¨é˜²çº¿ï¼š</p>
<ul>
<li><strong>HTTPS ä¼ è¾“</strong>ï¼šé˜²æ­¢ Token åœ¨ä¼ è¾“ä¸­è¢«çªƒå¬</li>
<li><strong>Refresh Token é»‘åå•æˆ–æ•°æ®åº“è®°å½•</strong>ï¼šæ”¯æŒä¸»åŠ¨åŠé”€</li>
<li><strong>åˆç†çš„è¿‡æœŸç­–ç•¥</strong>ï¼šæ ¹æ®ä¸šåŠ¡æ•æ„Ÿåº¦è°ƒæ•´æ—¶æ•ˆ</li>
<li><strong>å®¢æˆ·ç«¯å®‰å…¨å­˜å‚¨</strong>ï¼šå¦‚ä½¿ç”¨ <code>HttpOnly</code> Cookie é˜² XSSï¼ˆè‹¥é€‚ç”¨ï¼‰</li>
</ul>
<p>ä½†åœ¨å¤§å¤šæ•°ä¸­å¤§å‹å…¨æ ˆåº”ç”¨ä¸­ï¼Œè¿™å¥— <strong>åŒ Token + æ— æ„Ÿåˆ·æ–°</strong> çš„ç»„åˆï¼Œæ— ç–‘æ˜¯å½“å‰å…¼é¡¾<strong>å®‰å…¨æ€§ã€å¯ç»´æŠ¤æ€§ä¸ç”¨æˆ·ä½“éªŒ</strong>çš„ä¼˜é€‰æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Git æ·±åº¦å­¦ä¹ ç¬”è®°ï¼šä»åˆå§‹åŒ–åˆ°æ ¸å¿ƒæ“ä½œæœºåˆ¶è§£æ]]></title>    <link>https://juejin.cn/post/7601069677566263342</link>    <guid>https://juejin.cn/post/7601069677566263342</guid>    <pubDate>2026-01-31T09:58:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601069677566263342" data-draft-id="7601020578491072521" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Git æ·±åº¦å­¦ä¹ ç¬”è®°ï¼šä»åˆå§‹åŒ–åˆ°æ ¸å¿ƒæ“ä½œæœºåˆ¶è§£æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-31T09:58:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯åº—å°äºŒå‘€"/> <meta itemprop="url" content="https://juejin.cn/user/4132386718619243"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Git æ·±åº¦å­¦ä¹ ç¬”è®°ï¼šä»åˆå§‹åŒ–åˆ°æ ¸å¿ƒæ“ä½œæœºåˆ¶è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4132386718619243/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯åº—å°äºŒå‘€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T09:58:13.000Z" title="Sat Jan 31 2026 09:58:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/211a215fb4c64d8b95a93fbe0a23b5c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=iq0dUj8d3%2FmQlSt4BWbUwGCCEHs%3D" alt="" loading="lazy"/>
åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼Œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ˜¯ä¸å¯æˆ–ç¼ºçš„åŸºçŸ³ã€‚Git ä½œä¸ºç›®å‰æœ€ä¸»æµçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œå…¶å¼ºå¤§çš„åˆ†æ”¯ç®¡ç†ã€å†å²è¿½æº¯ä»¥åŠåä½œèƒ½åŠ›ï¼Œæå¤§åœ°æå‡äº†å¼€å‘æ•ˆç‡ã€‚æœ¬æ–‡å°†åŸºäºå®é™…æ“ä½œæµç¨‹ï¼Œæ·±å…¥å‰–æ Git ä»ä»“åº“åˆå§‹åŒ–ã€é…ç½®ç®¡ç†ã€æ ¸å¿ƒåŒºåŸŸäº¤äº’åˆ°ç‰ˆæœ¬å›é€€ä¸æ–‡ä»¶æ“ä½œçš„å®Œæ•´é“¾è·¯ï¼Œå¹¶é‡ç‚¹æ¢è®¨å…¶èƒŒåçš„å·¥ä½œåŸç†ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»“åº“åˆå§‹åŒ–ä¸ç¯å¢ƒæ­å»º</h2>
<h3 data-id="heading-1">1.1 åˆå§‹åŒ–çš„ä¸¤ç§è·¯å¾„</h3>
<p>åœ¨å¼€å§‹ä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œé€šå¸¸é¢ä¸´ä¸¤ç§æƒ…å†µï¼šä¸€ç§æ˜¯å…¨æ–°çš„é¡¹ç›®ï¼Œä»é›¶å¼€å§‹ï¼›å¦ä¸€ç§æ˜¯æ¥æ‰‹ç°æœ‰çš„é¡¹ç›®ã€‚Git æä¾›äº† <code>git init</code> å’Œ <code>git clone</code> ä¸¤ç§æŒ‡ä»¤æ¥åº”å¯¹è¿™ä¸¤ç§åœºæ™¯ã€‚</p>
<p><strong>æœ¬åœ°åˆå§‹åŒ–ï¼šä»é›¶å¼€å§‹</strong>
å½“åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œæˆ–è€…åŸºäºå·²æœ‰çš„æœ¬åœ°ä»£ç æƒ³è¦çº³å…¥ç‰ˆæœ¬æ§åˆ¶æ—¶ï¼Œä½¿ç”¨åˆå§‹åŒ–å‘½ä»¤æ˜¯ç¬¬ä¸€æ­¥ã€‚</p>
<p>åœ¨ç›®æ ‡ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git init
</code></pre>
<p>æ‰§è¡Œè¯¥æŒ‡ä»¤åï¼ŒGit ä¼šç«‹åˆ»ç»™å‡ºåé¦ˆï¼Œè¡¨æ˜å·²åœ¨å½“å‰è·¯å¾„ä¸‹åˆå§‹åŒ–äº†ä¸€ä¸ªç©ºçš„ Git ä»“åº“ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f8e397f7a7c4cf4a3a15be3989bbcff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=P%2FY7pES7F7L7VB5amclznTQjehs%3D" alt="image.png" loading="lazy"/></p>
<p>æ­¤æ—¶ï¼Œè™½ç„¶æ–‡ä»¶å¤¹çœ‹èµ·æ¥æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œä½†å¦‚æœå¼€å¯éšè—æ–‡ä»¶æ˜¾ç¤ºï¼Œä¼šå‘ç°å½“å‰ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªåä¸º <code>.git</code> çš„éšè—ç›®å½•ã€‚è¿™ä¸ªç›®å½•æ˜¯ Git çš„æ ¸å¿ƒï¼Œå®ƒè®°å½•äº†ç‰ˆæœ¬åº“çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p>
<p><strong><code>git init</code> ä¸ <code>git clone</code> çš„æ·±åº¦å¯¹æ¯”</strong>
è™½ç„¶ä¸¤è€…éƒ½èƒ½è·å¾—ä¸€ä¸ª Git ä»“åº“ï¼Œä½†åœ¨åº•å±‚é€»è¾‘å’Œåç»­æ“ä½œä¸Šæœ‰ç€æœ¬è´¨åŒºåˆ«ã€‚</p>
<ul>
<li>
<p><strong>git init</strong>ï¼šè¿™å°±å¥½æ¯”å»æ–‡å…·åº—ä¹°äº†ä¸€æœ¬ç©ºç™½çš„ç¬”è®°æœ¬ã€‚</p>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šè¿™æ˜¯<strong>ä»é›¶åˆ›å»ºæ–°é¡¹ç›®</strong>çš„èµ·ç‚¹ã€‚å½“ç”µè„‘ä¸Šæœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆæ— è®ºæ˜¯ç©ºçš„è¿˜æ˜¯åˆšå†™äº†å‡ è¡Œä»£ç ï¼‰ï¼Œå¸Œæœ›æŠŠå®ƒå˜æˆä¸€ä¸ªå—æ§çš„ Git ä»“åº“æ—¶ä½¿ç”¨ã€‚</li>
<li><strong>ä»“åº“çŠ¶æ€</strong>ï¼šåˆå§‹åŒ–åçš„ä»“åº“æ˜¯<strong>å…¨æ–°</strong>çš„ï¼Œæ²¡æœ‰ä»»ä½•æäº¤å†å²ï¼ˆLogï¼‰ï¼Œå®ƒä»…ä»…æ˜¯ä¸€ä¸ªæ‹¥æœ‰ <code>.git</code> ç›®å½•çš„ç©ºå£³ã€‚</li>
<li><strong>è¿œç¨‹è¿æ¥</strong>ï¼š<strong>é»˜è®¤æ²¡æœ‰å…³è”è¿œç¨‹ä»“åº“</strong>ã€‚å¦‚æœåç»­æƒ³è¦æ¨é€åˆ° GitHub æˆ– Giteeï¼Œå¿…é¡»æ‰‹åŠ¨æ‰§è¡Œ <code>git remote add origin &lt;url&gt;</code> æ¥å»ºç«‹è¿æ¥ã€‚</li>
<li><strong>æ“ä½œæµå‘</strong>ï¼šé€šå¸¸éµå¾ª <strong>æœ¬åœ° -&gt; è¿œç¨‹</strong> (Local first) çš„å¼€å‘æ¨¡å¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>git clone</strong>ï¼šè¿™ç±»ä¼¼äºå»å¤å°åº—ï¼ŒæŠŠåˆ«äººå·²ç»å†™æ»¡å†…å®¹çš„ç¬”è®°æœ¬<strong>å®Œæ•´å¤å°</strong>äº†ä¸€ä»½å¸¦å›å®¶ã€‚</p>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç”¨äº<strong>è·å–å·²æœ‰é¡¹ç›®</strong>ã€‚å½“ä»£ç å·²ç»å­˜åœ¨äºè¿œç¨‹æœåŠ¡å™¨ï¼ˆå¦‚ GitHubã€GitLab æˆ–å…¬å¸ç§æœ‰æœåŠ¡å™¨ï¼‰ä¸Šï¼Œéœ€è¦å°†å…¶ä¸‹è½½åˆ°æœ¬åœ°è¿›è¡Œå¼€å‘æˆ–å®¡æŸ¥æ—¶ä½¿ç”¨ã€‚æˆ‘ä¸ªäººæ„Ÿè§‰ç›´æ¥ <code>git clone</code> åœ¨å¤šäººåä½œä¸­æ›´åŠ é«˜æ•ˆï¼Œå› ä¸ºå®ƒçœå»äº†é…ç½®è¿œç¨‹è¿æ¥çš„æ­¥éª¤ã€‚</li>
<li><strong>ä»“åº“çŠ¶æ€</strong>ï¼šä¸‹è½½ä¸‹æ¥çš„ä»“åº“åŒ…å«<strong>å®Œæ•´çš„å†å²è®°å½•</strong>ã€æ‰€æœ‰çš„åˆ†æ”¯ä¿¡æ¯ã€æ ‡ç­¾ç­‰æ•°æ®ã€‚</li>
<li><strong>è¿œç¨‹è¿æ¥</strong>ï¼š<strong>è‡ªåŠ¨å…³è”è¿œç¨‹ä»“åº“</strong>ã€‚é»˜è®¤å·²ç»é…ç½®å¥½äº†åä¸º <code>origin</code> çš„è¿œç¨‹è¿æ¥ï¼Œåœ¨æœ‰æƒé™çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œ <code>git pull</code> æˆ– <code>git push</code>ã€‚</li>
<li><strong>æ“ä½œæµå‘</strong>ï¼šé€šå¸¸éµå¾ª <strong>è¿œç¨‹ -&gt; æœ¬åœ°</strong> (Remote first) çš„æ¨¡å¼ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">1.2 å‰–æ <code>.git</code> ç›®å½•ç»“æ„</h3>
<p>ç†è§£ <code>.git</code> ç›®å½•æ˜¯ç†è§£ Git åŸç†çš„å…³é”®ã€‚æ‰§è¡Œ <code>git init</code> åï¼Œç”Ÿæˆçš„è¿™ä¸ªéšè—ç›®å½•å¹¶éé»‘ç›’ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>tree</code> å‘½ä»¤æ¥ä¸€æ¢ç©¶ç«Ÿã€‚</p>
<p>æŒ‡ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">tree .git/
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d8dc43c30c24fda834fbf3438908518~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=2IenImE3AROmUNTFCeh%2B%2BSH5qm0%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ<code>.git</code> ç›®å½•åŒ…å«äº†ä¸€ç³»åˆ—æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒä»¬å…±åŒæ”¯æ’‘èµ·äº† Git çš„ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½ï¼š</p>
<ul>
<li><strong>hooks/</strong>: å­˜æ”¾é’©å­è„šæœ¬ï¼ˆhook scriptsï¼‰ã€‚Git æä¾›äº†å¼ºå¤§çš„é’©å­æœºåˆ¶ï¼Œå…è®¸åœ¨ç‰¹å®šçš„é‡è¦åŠ¨ä½œå‘ç”Ÿå‰åï¼ˆå¦‚ commit å‰ã€push åï¼‰è‡ªåŠ¨è§¦å‘è„šæœ¬ã€‚è¿™å¯¹ä»£ç é£æ ¼æ£€æŸ¥ã€è‡ªåŠ¨éƒ¨ç½²ç­‰è‡ªåŠ¨åŒ–æµç¨‹è‡³å…³é‡è¦ã€‚</li>
<li><strong>info/</strong>: åŒ…å«ä¸€ä¸ªå…¨å±€æ€§çš„æ’é™¤æ–‡ä»¶ã€‚å¦‚æœæœ‰äº›æ–‡ä»¶ä¸å¸Œæœ›è¢« Git ç®¡ç†ï¼Œä½†åˆä¸æƒ³å†™åœ¨ <code>.gitignore</code> æ–‡ä»¶ä¸­ï¼ˆä»¥å…æäº¤ç»™å…¶ä»–äººï¼‰ï¼Œå°±å¯ä»¥å†™åœ¨è¿™é‡Œã€‚</li>
<li><strong>objects/</strong>: è¿™æ˜¯ Git çš„<strong>å¯¹è±¡åº“</strong>ï¼Œä¹Ÿæ˜¯ Git å­˜å‚¨æ•°æ®çš„æ ¸å¿ƒåŒºåŸŸã€‚åœ¨ Git çš„ä¸–ç•Œé‡Œï¼Œæ‰€æœ‰çš„æ–‡ä»¶å†…å®¹ã€ç›®å½•ç»“æ„ã€æäº¤ä¿¡æ¯éƒ½è¢«æŠ½è±¡ä¸ºâ€œå¯¹è±¡â€ï¼ˆBlob å¯¹è±¡å­˜å‚¨æ–‡ä»¶å†…å®¹, Tree å¯¹è±¡å­˜å‚¨ç›®å½•ç»“æ„, Commit å¯¹è±¡å­˜å‚¨æäº¤ä¿¡æ¯ï¼‰ã€‚æ‰€æœ‰çš„å†å²æ•°æ®éƒ½ä»¥å“ˆå¸Œå€¼ç´¢å¼•çš„æ–¹å¼å­˜å‚¨äºæ­¤ã€‚</li>
<li><strong>refs/</strong>: å­˜å‚¨æŒ‡å‘æ•°æ®ï¼ˆæäº¤å¯¹è±¡ï¼‰çš„æŒ‡é’ˆã€‚æˆ‘ä»¬å¸¸è¯´çš„â€œåˆ†æ”¯â€å’Œâ€œæ ‡ç­¾â€ï¼Œåœ¨æœ¬è´¨ä¸Šå°±æ˜¯å­˜å‚¨åœ¨è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå®ƒä»¬çš„å†…å®¹å°±æ˜¯ä¸€ä¸ª Commit IDï¼ˆå“ˆå¸Œå€¼ï¼‰ã€‚</li>
<li><strong>HEAD</strong>: è¿™æ˜¯ä¸€ä¸ªéå¸¸å…³é”®çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå®ƒ<strong>æŒ‡å‘å½“å‰æ‰€åœ¨çš„åˆ†æ”¯</strong>ã€‚Git é€šè¿‡å®ƒæ¥çŸ¥é“ç”¨æˆ·å½“å‰å¤„äºå“ªä¸ªæ—¶é—´èŠ‚ç‚¹æˆ–å“ªä¸ªåˆ†æ”¯ä¹‹ä¸Šã€‚</li>
<li><strong>config</strong>: åŒ…å«äº†é¡¹ç›®ç‰¹æœ‰çš„é…ç½®é€‰é¡¹ã€‚æ¯”å¦‚è¿™ä¸ªä»“åº“ç‰¹å®šçš„è¿œç¨‹åœ°å€ã€ç‰¹å®šçš„ç”¨æˆ·ä¿¡æ¯ç­‰ã€‚</li>
<li><strong>description</strong>: ä»…ä¾› GitWeb ç¨‹åºä½¿ç”¨ï¼Œç”¨äºæ˜¾ç¤ºä»“åº“çš„æè¿°ä¿¡æ¯ï¼Œåœ¨æ—¥å¸¸å‘½ä»¤è¡Œæ“ä½œä¸­è¾ƒå°‘ç”¨åˆ°ã€‚</li>
</ul>
<h2 data-id="heading-3">äºŒã€èº«ä»½é…ç½®ä¸ç®¡ç†</h2>
<p>åœ¨ä½¿ç”¨ Git æäº¤ä»£ç ä¹‹å‰ï¼Œå¿…é¡»å…ˆè‡ªæŠ¥å®¶é—¨ã€‚Git éœ€è¦çŸ¥é“â€œæ˜¯è°â€åšäº†è¿™æ¬¡ä¿®æ”¹ï¼Œä»¥ä¾¿åœ¨å†å²è®°å½•ä¸­è¿›è¡Œè¿½æº¯ã€‚</p>
<h3 data-id="heading-4">2.1 æœ¬åœ°ä»“åº“é…ç½®</h3>
<p>å¯ä»¥åœ¨å½“å‰ä»“åº“ä¸‹å•ç‹¬é…ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼Œè¿™ç§é…ç½®çš„ä¼˜å…ˆçº§é«˜äºå…¨å±€é…ç½®ï¼Œä½†ä»…å¯¹å½“å‰ä»“åº“æœ‰æ•ˆã€‚</p>
<pre><code class="hljs language-shell" lang="shell">git config --global user.name 'yummyå°äºŒ' 
git config --global user.email '934679045@qq.com'
</code></pre>
<p><em>æ³¨ï¼šä¸Šè¿°å‘½ä»¤è™½ç„¶åŠ äº† <code>--global</code>ï¼Œä½†åœ¨å®é™…é’ˆå¯¹ç‰¹å®šä»“åº“é…ç½®æ—¶ï¼Œåº”å»æ‰ <code>--global</code> å‚æ•°ã€‚æ ¹æ®æä¾›çš„ç¬”è®°å†…å®¹ï¼Œè¿™é‡Œå±•ç¤ºçš„æ˜¯å…¨å±€é…ç½®çš„å‘½ä»¤æ ¼å¼ï¼Œä½†å¦‚æœè¦åœ¨<code>.git/config</code>ä¸­ç”Ÿæ•ˆï¼Œåˆ™ä¸åŠ  globalã€‚</em></p>
<p>é…ç½®ä¿¡æ¯ä¼šå­˜å‚¨åœ¨å½“å‰é¡¹ç›®çš„ <code>.git/config</code> æ–‡ä»¶ä¸­ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/694c0816e1f4430d8ef2a2a4a8d9fa2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=tg6e3U1wKePiZwmAGFY03iWbESw%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœéœ€è¦åˆ é™¤æœ¬åœ°é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ <code>--unset</code> å‚æ•°ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git config --<span class="hljs-built_in">unset</span> user.name
git config --<span class="hljs-built_in">unset</span> user.email
</code></pre>
<h3 data-id="heading-5">2.2 å…¨å±€é…ç½®</h3>
<p>åœ¨å¤§å¤šæ•°å¼€å‘åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰ä»“åº“éƒ½ä½¿ç”¨åŒä¸€å¥—èº«ä»½ä¿¡æ¯ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨å…¨å±€é…ç½®ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">git config --global user.name "yummyå°äºŒ"
git config --global user.email "934679045@qq.com"
</code></pre>
<p>å…¨å±€é…ç½®ä¿¡æ¯å­˜å‚¨åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ <code>.gitconfig</code> æ–‡ä»¶ä¸­ï¼ˆä¾‹å¦‚ Linux æˆ– macOS ä¸‹çš„ <code>~/.gitconfig</code>ï¼‰ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b686ffffe9674430a6a0cfe3c02d59c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=aG%2F6mow%2FWpeEhRnMsUC%2F09jkywI%3D" alt="image.png" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé’ˆå¯¹å…¨å±€é…ç½®é¡¹çš„åˆ é™¤ï¼Œå¿…é¡»ä¸¥æ ¼åŒæ—¶æŒ‡å®š <code>--global</code> å’Œ <code>--unset</code> å‚æ•°ã€‚å¦‚æœä»…ä½¿ç”¨ <code>--unset</code> è€Œå¿½ç•¥ <code>--global</code>ï¼ŒGit ä¼šé»˜è®¤å°è¯•åœ¨æœ¬åœ°ä»“åº“é…ç½®ä¸­æŸ¥æ‰¾å¹¶åˆ é™¤è¯¥é¡¹ï¼Œå¯¼è‡´æ“ä½œå¤±è´¥æˆ–ä¸ç¬¦åˆé¢„æœŸã€‚</p>
<pre><code class="hljs language-bash" lang="bash">git config --global --<span class="hljs-built_in">unset</span> user.name
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€æ ¸å¿ƒæ¶æ„ï¼šGit çš„ä¸‰ä¸ªå·¥ä½œåŒº</h2>
<p>ç†è§£ Git çš„ä¸‰ä¸ªå·¥ä½œåŒºåŸŸæ˜¯æŒæ¡å…¶æ‰€æœ‰æ“ä½œé€»è¾‘çš„å‰æã€‚Git å°†æ–‡ä»¶çš„ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ä¸ºä¸‰ä¸ªåŒºåŸŸï¼š<strong>å·¥ä½œåŒºï¼ˆWorking Directoryï¼‰</strong>ã€<strong>æš‚å­˜åŒºï¼ˆStage/Indexï¼‰</strong> å’Œ <strong>ç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰</strong>ã€‚</p>
<h3 data-id="heading-7">3.1 å·¥ä½œåŒº (Working Directory)</h3>
<p>è¿™æ˜¯æˆ‘ä»¬åœ¨ç”µè„‘æ–‡ä»¶ç®¡ç†å™¨é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ï¼Œä¹Ÿæ˜¯å¼€å‘äººå‘˜å®é™…ç¼–è¾‘ä»£ç çš„åœ°æ–¹ã€‚
é¦–å…ˆåœ¨ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªåä¸º <code>README.md</code> (è‡ªè¿°æ–‡ä»¶) çš„æ–‡ä»¶ã€‚æ­¤æ—¶ï¼Œè¯¥æ–‡ä»¶ä»…å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¸­ï¼ŒGit å°šæœªå¯¹å…¶è¿›è¡Œè·Ÿè¸ªç®¡ç†ï¼Œå®ƒä»…ä»…æ˜¯ç£ç›˜ä¸Šçš„ä¸€ä¸ªæ™®é€šæ–‡ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbc7ee10aa154a1ca2510fbb9b7dace8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=2kpw5vAKRAY%2FqCrDor84a1Dz3Jw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">3.2 æš‚å­˜åŒº (Stage/Index)</h3>
<p>æš‚å­˜åŒºæ˜¯ Git æ¶æ„ä¸­æœ€ä¸ºç²¾å¦™çš„è®¾è®¡ä¹‹ä¸€ã€‚å®ƒå……å½“äº†å·¥ä½œåŒºä¸ç‰ˆæœ¬åº“ä¹‹é—´çš„ç¼“å†²åŒºã€‚
<strong>æš‚å­˜åŒºå¹¶ä¸ä¿å­˜æ–‡ä»¶çš„å®Œæ•´å†…å®¹ï¼Œè€Œæ˜¯å­˜å‚¨ä¿®æ”¹å¯¹è±¡çš„ç´¢å¼•</strong>ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä½ æŠŠæ–‡ä»¶åŠ å…¥æš‚å­˜åŒºæ—¶ï¼ŒGit å®é™…ä¸Šæ˜¯å…ˆç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡å­˜å‚¨æ–‡ä»¶å†…å®¹ï¼Œç„¶ååœ¨æš‚å­˜åŒºçš„åˆ—è¡¨é‡Œè®°ä¸‹äº†è¿™ä¸ªå¯¹è±¡çš„æŒ‡çº¹ï¼ˆå“ˆå¸Œå€¼ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8287fc90b1154a39a8b7ee2f732d130f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=qtcgCxtsIfsamOqyrWrzPC6PecE%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸Šå›¾æ¸…æ™°åœ°å±•ç¤ºäº† Git çš„ä¸‰å±‚æµè½¬æ¶æ„ï¼š</p>
<ul>
<li><strong>å·¦ä¾§ä¸ºå·¥ä½œåŒº</strong>ï¼šæ­¤æ—¶æ–‡ä»¶å¯èƒ½å¤„äºâ€œå·²ä¿®æ”¹â€æˆ–â€œæœªè·Ÿè¸ªâ€çŠ¶æ€ã€‚</li>
<li><strong>ä¸­é—´ä¸º Stageï¼ˆæš‚å­˜åŒºï¼‰</strong>ï¼šé€šè¿‡ <code>git add</code> å‘½ä»¤ï¼Œå·¥ä½œåŒºçš„ä¿®æ”¹è¢«å†™å…¥å¯¹è±¡åº“ï¼ŒåŒæ—¶æš‚å­˜åŒºæ›´æ–°ç´¢å¼•ä»¥æŒ‡å‘è¿™äº›æ–°å¯¹è±¡ã€‚</li>
<li><strong>å³ä¾§ä¸º Masterï¼ˆç‰ˆæœ¬åº“åˆ†æ”¯ï¼‰</strong>ï¼šé€šè¿‡ <code>git commit</code> å‘½ä»¤ï¼Œæš‚å­˜åŒºçš„ç´¢å¼•æ ‘è¢«æäº¤åˆ° master åˆ†æ”¯ï¼Œå½¢æˆæ°¸ä¹…çš„å†å²è®°å½•ã€‚</li>
</ul>
<h3 data-id="heading-9">3.3 æäº¤æ“ä½œå®æˆ˜</h3>
<p>å°†ä»£ç ä¿å­˜åˆ°ç‰ˆæœ¬åº“éœ€è¦ä¸¤æ­¥èµ°ï¼š</p>
<p><strong>ç¬¬ä¸€æ­¥</strong>ï¼šä½¿ç”¨ <code>git add</code> å°†ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºã€‚</p>
<pre><code class="hljs language-shell" lang="shell">git add .
</code></pre>
<p>è¿™ä¸€æ­¥ä¼šå°†æ–‡ä»¶çš„å¿«ç…§å†™å…¥ <code>.git/objects</code> ç›®å½•ï¼Œå¹¶æ›´æ–° <code>.git/index</code> æ–‡ä»¶ã€‚</p>
<p><strong>ç¬¬äºŒæ­¥</strong>ï¼šä½¿ç”¨ <code>git commit</code> å°†æš‚å­˜åŒºçš„å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ masterï¼‰ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">git commit -m "å¯¹æäº¤æ–‡ä»¶çš„æè¿°ä¿¡æ¯"
</code></pre>
<p>è¿™é‡Œçš„ <code>-m</code> å‚æ•°ç”¨äºæ·»åŠ æäº¤è¯´æ˜ï¼ˆCommit Messageï¼‰ã€‚è¿™æ˜¯ç‰ˆæœ¬å›æº¯æ—¶çš„é‡è¦ä¾æ®ï¼Œå°±ç›¸å½“äºæ˜¯å¼€å‘æ—¥å¿—ï¼Œè®°å½•äº†æ¯æ¬¡ä¿®æ”¹çš„ç›®çš„ã€‚å¦‚æœä¸å†™æ¸…æ¥šï¼Œåç»­å›é¡¾å†å²æ—¶å°†å¯¸æ­¥éš¾è¡Œã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f9975dac1f341bba796402eec1ce4e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=rLJ4QTKzboPInrkkf92p9B76N78%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-10">å››ã€çŠ¶æ€è¿½è¸ªä¸å†å²å®¡è®¡</h2>
<p>éšç€æäº¤æ¬¡æ•°çš„å¢åŠ ï¼ŒæŸ¥çœ‹å†å²è®°å½•å’Œåˆ†ææ–‡ä»¶çŠ¶æ€å˜å¾—å¿…ä¸å¯å°‘ã€‚</p>
<h3 data-id="heading-11">4.1 æŸ¥çœ‹æäº¤æ—¥å¿—</h3>
<p>ä½¿ç”¨ <code>git log</code> å¯ä»¥æŸ¥çœ‹ç‰ˆæœ¬åº“çš„æäº¤å†å²ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78b41930ac0246f7b684ffe7e41a68ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=kaIu5tlYnEUPA%2Brbq7W7ELcaIO0%3D" alt="image.png" loading="lazy"/></p>
<p>æ—¥å¿—ä¿¡æ¯åŒ…å«ä»¥ä¸‹å…³é”®è¦ç´ ï¼š</p>
<ul>
<li><strong>Commit</strong>: ä¸€ä¸ª 40 ä½çš„ SHA-1 å“ˆå¸Œå€¼ã€‚è¿™æ˜¯ Git åŒºåˆ«äºå…¶ä»–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ç‰¹å¾ï¼Œå®ƒå”¯ä¸€æ ‡è¯†ä¸€æ¬¡æäº¤ï¼Œä¿è¯äº†æ•°æ®çš„å®Œæ•´æ€§å’Œä¸å¯ç¯¡æ”¹æ€§ã€‚</li>
<li><strong>Author</strong>: æäº¤è€…çš„å§“åå’Œé‚®ç®±ï¼Œç”¨äºè´£ä»»è¿½æº¯ã€‚</li>
<li><strong>Date</strong>: æäº¤çš„æ—¶é—´æˆ³ã€‚</li>
<li><strong>Message</strong>: æäº¤æ—¶å¡«å†™çš„æè¿°ä¿¡æ¯ã€‚</li>
</ul>
<p>ä¸ºäº†è·å–æ›´ç®€æ´çš„è§†å›¾ï¼Œå¯ä»¥ä½¿ç”¨ <code>--pretty=oneline</code> å‚æ•°ï¼Œå°†æ¯æ¡æ—¥å¿—å‹ç¼©ä¸ºä¸€è¡Œæ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">log</span> --pretty=oneline
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e6cf3cc847841759e21a922ce81ad3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=UH%2F3ORQ%2Bd8GCjbpRKzAvKOe5IAU%3D" alt="image.png" loading="lazy"/>
è¿™ç§æ ¼å¼æå¤§åœ°èŠ‚çœäº†å±å¹•ç©ºé—´ï¼Œä¾¿äºå¿«é€Ÿæµè§ˆå¤§é‡çš„ç‰ˆæœ¬å†å²ã€‚</p>
<h3 data-id="heading-12">4.2 ç´¢å¼•ä¸å¯¹è±¡è¿½è¸ª</h3>
<p>å½“æ‰§è¡Œ <code>git add</code> åï¼Œ<code>.git</code> ç›®å½•ä¸‹ä¼šç”Ÿæˆæˆ–æ›´æ–° <code>index</code> æ–‡ä»¶ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43c70b1a762f44f2a29d773b15490d73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=w4bGLD3HpjhUJPJVxlwReJj%2FkUQ%3D" alt="image.png" loading="lazy"/></p>
<p><code>.git</code> ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ä¸­ï¼Œ<code>index</code> æ–‡ä»¶å³ä¸ºæš‚å­˜åŒºçš„å®ä½“ã€‚è¿™å†æ¬¡å°è¯äº† Git è¿½è¸ªç®¡ç†çš„æ ¸å¿ƒåœ¨äºâ€œä¿®æ”¹â€è€Œéâ€œæ–‡ä»¶â€æœ¬èº«ã€‚æ¯ä¸€æ¬¡ä¿®æ”¹è¢« add åï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ Git å¯¹è±¡ï¼ŒGit é€šè¿‡ç´¢å¼•æŒ‡å‘è¿™äº›å¯¹è±¡æ¥æ„å»ºæ–‡ä»¶ç³»ç»Ÿçš„å¿«ç…§ã€‚</p>
<h3 data-id="heading-13">4.3 å·®å¼‚å¯¹æ¯”ä¸çŠ¶æ€ç›‘æ§</h3>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦ç¡®è®¤å·¥ä½œåŒºæ‰€åšçš„ä¿®æ”¹ä¸æš‚å­˜åŒºæˆ–ç‰ˆæœ¬åº“ä¸­çš„å†…å®¹æœ‰ä½•ä¸åŒã€‚<code>git diff</code> å‘½ä»¤ä¾¿æ˜¯ç”¨äºæ­¤ç›®çš„ã€‚æˆ‘ä»¬å°†ä»£ç ä¸Šä¼ åˆ°ç‰ˆæœ¬åº“åï¼Œé€šè¿‡ diff å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°æ¯ä¸€è¡Œä»£ç çš„å¢åˆ å˜åŠ¨ï¼Œè¿™å¯¹äºä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰è‡³å…³é‡è¦ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1914f42e27dd4bb698c43d64b7a0012e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=HzivtlR2lCdZfWq3dFEsI9eVrJs%3D" alt="image.png" loading="lazy"/></p>
<p>åŒæ—¶ï¼Œ<code>git status</code> å‘½ä»¤æ˜¯æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„å‘½ä»¤ä¹‹ä¸€ï¼Œç”¨äºæŸ¥çœ‹å·¥ä½œåŒºã€æš‚å­˜åŒºä¸æœ¬åœ°ä»“åº“ä¹‹é—´çš„çŠ¶æ€åŒæ­¥æƒ…å†µã€‚</p>
<pre><code class="hljs language-bash" lang="bash">git status
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b5d6e6cc7ee40e4aa8609e30a4712c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=u4AaIxFB42jRHGDrjJfEOq04UdY%3D" alt="image.png" loading="lazy"/>
é€šè¿‡ <code>git status</code>ï¼Œæˆ‘ä»¬å¯ä»¥éšæ—¶çŸ¥é“å“ªäº›æ–‡ä»¶è¢«ä¿®æ”¹äº†ä½†è¿˜æ²¡æš‚å­˜ï¼Œå“ªäº›æ–‡ä»¶å·²æš‚å­˜ä½†è¿˜æ²¡æäº¤ã€‚</p>
<h2 data-id="heading-14">äº”ã€ç‰ˆæœ¬å›é€€æœºåˆ¶</h2>
<p>ç‰ˆæœ¬å›é€€æ˜¯ Git æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå…è®¸å¼€å‘è€…åœ¨å†å²ç‰ˆæœ¬ä¹‹é—´è‡ªç”±ç©¿æ¢­ï¼Œæä¾›äº†æå¤§çš„å®¹é”™ç©ºé—´ã€‚å…¶æ ¸å¿ƒå‘½ä»¤æ˜¯ <code>git reset</code>ã€‚</p>
<h3 data-id="heading-15">5.1 å›é€€åŸç†ä¸å‚æ•°è¯¦è§£</h3>
<p><code>git reset</code> çš„æœ¬è´¨æ˜¯ç§»åŠ¨ <code>HEAD</code> æŒ‡é’ˆï¼Œå¹¶æ ¹æ®å‚æ•°å†³å®šæ˜¯å¦æ›´æ–°æš‚å­˜åŒºå’Œå·¥ä½œåŒºã€‚<code>HEAD</code> æŒ‡å‘å½“å‰åˆ†æ”¯çš„æœ€æ–°æäº¤ï¼Œé€šè¿‡æ”¹å˜ <code>HEAD</code> çš„æŒ‡å‘ï¼Œå³å¯å®ç°ç‰ˆæœ¬åº“çš„å›é€€ã€‚</p>
<p>è¯¥å‘½ä»¤æœ‰ä¸‰ä¸ªæ ¸å¿ƒå‚æ•°ï¼Œå¯¹åº”ä¸åŒçš„å›é€€æ·±åº¦ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git reset [--soft | --mixed | --hard] [HEAD]
</code></pre>
<p>ä¸ºäº†ç†è§£è¿™ä¸‰ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ªæ¦‚å¿µæ¨¡å‹ï¼š</p>
<ul>
<li><strong>git</strong> ä»£è¡¨æ—§ç‰ˆæœ¬çš„å†…å®¹ï¼ˆå›é€€çš„ç›®æ ‡ï¼‰ã€‚</li>
<li><strong>git world</strong> ä»£è¡¨æ–°ç‰ˆæœ¬çš„å†…å®¹ï¼ˆå½“å‰å°šæœªæäº¤æˆ–åˆšæäº¤çš„å†…å®¹ï¼‰ã€‚</li>
</ul>








































<table><thead><tr><th align="left">å·¥ä½œåŒº (Working Dir)</th><th align="left">æš‚å­˜åŒº (Staging Area)</th><th align="left">ç‰ˆæœ¬åº“ (Repository)</th><th align="left">å‚æ•°é€‰é¡¹</th><th align="left">æ·±åº¦è§£æ</th></tr></thead><tbody><tr><td align="left"><strong>git world</strong></td><td align="left"><strong>git world</strong></td><td align="left"><strong>git world</strong></td><td align="left">(èµ·å§‹çŠ¶æ€)</td><td align="left">ä¸‰ä¸ªåŒºåŸŸå†…å®¹ä¸€è‡´ï¼Œé€šå¸¸æ˜¯åˆš commit å®Œçš„çŠ¶æ€ã€‚</td></tr><tr><td align="left"><strong>git world</strong></td><td align="left"><strong>git world</strong></td><td align="left"><strong>git</strong></td><td align="left"><code>--soft</code></td><td align="left"><strong>è½¯é‡ç½®</strong>ã€‚ä»…å›é€€ç‰ˆæœ¬åº“çš„ HEAD æŒ‡é’ˆã€‚æš‚å­˜åŒºå’Œå·¥ä½œåŒºä¿ç•™å½“å‰ä¿®æ”¹ã€‚è¿™æ„å‘³ç€åˆšæ‰æäº¤çš„å†…å®¹å›åˆ°äº†â€œå·² add ä½†æœª commitâ€çš„çŠ¶æ€ã€‚å¸¸ç”¨äºä¿®æ­£ä¸Šä¸€æ¬¡æäº¤çš„ Message æˆ–åˆå¹¶å¤šä¸ªæäº¤ã€‚</td></tr><tr><td align="left"><strong>git world</strong></td><td align="left"><strong>git</strong></td><td align="left"><strong>git</strong></td><td align="left"><code>--mixed</code></td><td align="left"><strong>æ··åˆé‡ç½®ï¼ˆé»˜è®¤ï¼‰</strong>ã€‚å›é€€ç‰ˆæœ¬åº“å’Œæš‚å­˜åŒºã€‚ä»…ä¿ç•™å·¥ä½œåŒºçš„ä¿®æ”¹ã€‚è¿™æ„å‘³ç€åˆšæ‰æäº¤çš„å†…å®¹å›åˆ°äº†â€œå·²ä¿®æ”¹ä½†æœª addâ€çš„çŠ¶æ€ã€‚</td></tr><tr><td align="left"><strong>git</strong></td><td align="left"><strong>git</strong></td><td align="left"><strong>git</strong></td><td align="left"><code>--hard</code></td><td align="left"><strong>ç¡¬é‡ç½®</strong>ã€‚å½»åº•å›é€€ã€‚ç‰ˆæœ¬åº“ã€æš‚å­˜åŒºã€å·¥ä½œåŒºå…¨éƒ¨è¿˜åŸä¸ºæ—§ç‰ˆæœ¬ã€‚è¿™æ˜¯æ¯ç­æ€§çš„æ“ä½œï¼Œå·¥ä½œåŒºä¸­æœªæäº¤çš„ä»£ç å°†æ°¸ä¹…ä¸¢å¤±ï¼Œæ— æ³•æ‰¾å›ã€‚ä½¿ç”¨å‰å¿…é¡»ç¡®è®¤å½“å‰å·¥ä½œåŒºæ— é‡è¦æœªå¤‡ä»½ä»£ç ã€‚</td></tr></tbody></table>
<h3 data-id="heading-16">5.2 ç‰ˆæœ¬å›é€€å®æˆ˜</h3>
<p>å‡è®¾å½“å‰ <code>README.md</code> ç»å†äº†å¤šæ¬¡ä¿®æ”¹å’Œæäº¤ï¼Œå­˜åœ¨ä¸¤ä¸ªç‰ˆæœ¬ã€‚é€šè¿‡ <code>git log</code> æŸ¥çœ‹å½“å‰çš„æäº¤å†å²ï¼Œå¯è§å­˜åœ¨ä¸¤æ¬¡æäº¤è®°å½•ã€‚ç°åœ¨éœ€è¦å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚</p>
<p>æ‰§è¡Œç¡¬é‡ç½®å‘½ä»¤ï¼ŒæŒ‡å®šç›®æ ‡ç‰ˆæœ¬çš„ Commit IDï¼ˆæˆ–ä½¿ç”¨ <code>HEAD^</code>ï¼‰ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c66d42efe1f5434ba7f46eb95a362505~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=NWl7UN2H4vthyaKfExK20oNtTwA%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-bash" lang="bash">git reset --hard 4de2ec06ec660056f50a1efd1778cec2f5ffbf8d
</code></pre>
<p>æ‰§è¡Œåï¼Œå†æ¬¡æŸ¥çœ‹çŠ¶æ€ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f9474f4e8b846f79c2a9f29aa9f82a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=PrI6svPl%2FdPi2R96v1iQIIyzPlA%3D" alt="image.png" loading="lazy"/>
<code>HEAD</code> å·²ç»æŒ‡å‘äº†æŒ‡å®šçš„æäº¤ï¼Œç³»ç»Ÿæç¤º <code>HEAD is now at...</code>ã€‚
è¿™é‡Œéœ€è¦æ·±å…¥ç†è§£çš„æ˜¯ï¼Œè™½ç„¶æˆ‘ä»¬å¸¸è¯´â€œå›é€€â€ï¼Œä½† Git çš„æœ¬è´¨æ˜¯<strong>æŒ‡é’ˆç§»åŠ¨</strong>ã€‚<code>git reset</code> å®é™…ä¸Šæ˜¯è®© <code>HEAD</code> æŒ‡é’ˆæŒ‡å‘äº†æ—§çš„ Commit å¯¹è±¡ï¼ŒåŒæ—¶æ ¹æ®å‚æ•°ï¼ˆå¦‚ <code>--hard</code>ï¼‰å¼ºåˆ¶åˆ·æ–°äº†æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä½¿å…¶ä¸è¯¥ Commit çš„å†…å®¹ä¿æŒä¸€è‡´ã€‚</p>
<h3 data-id="heading-17">5.3 Reflogï¼šåæ‚”è¯æœºåˆ¶</h3>
<p>å¦‚æœæ‰§è¡Œäº† <code>git reset --hard</code> åå‘ç°â€œå›é€€é”™äº†â€ï¼Œæ™®é€šçš„ <code>git log</code> å·²ç»æ— æ³•æŸ¥çœ‹åˆ°é‚£ä¸ªè¢«ä¸¢å¼ƒçš„ Commit ID äº†ã€‚æ­¤æ—¶ï¼ŒGit æä¾›äº†ä¸€å‰‚â€œåæ‚”è¯â€ â€”â€” <code>git reflog</code>ã€‚</p>
<p><code>git reflog</code> è®°å½•äº† HEAD æŒ‡é’ˆçš„æ‰€æœ‰ç§»åŠ¨å†å²ï¼ŒåŒ…æ‹¬ resetã€commitã€checkout ç­‰æ“ä½œã€‚å®ƒä¿ç•™äº†æ“ä½œçš„çŸ­å“ˆå¸Œå€¼ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23dc0af55144417184bc571399f5e2b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=MjDwCx7oTpptKzVNVd51cndHvQ8%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹è§ HEAD æ›¾ç»æŒ‡å‘çš„ä½ç½®ã€‚åªè¦æ‰¾åˆ°é‚£ä¸ªâ€œæœªæ¥çš„ç‰ˆæœ¬â€çš„å“ˆå¸Œå€¼ï¼Œä¾ç„¶å¯ä»¥æ‰§è¡Œ <code>git reset --hard</code> è·³å›å»ï¼Œä»è€Œå®ç°â€œåæ‚”â€ã€‚è¿™è¯´æ˜ Git çš„ç‰ˆæœ¬å›é€€åœ¨æœ¬è´¨ä¸Šæ˜¯é€šè¿‡å“ˆå¸Œå€¼åœ¨æ—¶é—´è½´ä¸Šçš„ä»»æ„è·³è½¬ã€‚</p>
<h2 data-id="heading-18">å…­ã€æ’¤é”€ä¿®æ”¹æ“ä½œ</h2>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé’ˆå¯¹ä¸åŒé˜¶æ®µçš„é”™è¯¯ä¿®æ”¹ï¼ŒGit æä¾›äº†ä¸åŒå±‚çº§çš„æ’¤é”€æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-19">åœºæ™¯ä¸€ï¼šä»…æ’¤é”€å·¥ä½œåŒºä»£ç </h3>
<p>å½“ä¿®æ”¹äº†æ–‡ä»¶ä½†å°šæœªæ‰§è¡Œ <code>git add</code> æ—¶ï¼Œæ–‡ä»¶ä¿®æ”¹ä»…å­˜åœ¨äºå·¥ä½œåŒºã€‚
ä¾‹å¦‚ï¼Œå¯¹ <code>README.md</code> è¿›è¡Œäº†ä¸€è¡Œé”™è¯¯çš„ä¿®æ”¹ã€‚è‹¥è¦ä¸¢å¼ƒè¯¥ä¿®æ”¹ï¼Œæ¢å¤åˆ°æœ€è¿‘ä¸€æ¬¡ add æˆ– commit çš„çŠ¶æ€ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git checkout -- README.md
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0455423bab3495db27834e9765bd085~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=Fp%2FJ%2FICKGkSA8nyR84DYjVsgG0A%3D" alt="image.png" loading="lazy"/>
æ‰§è¡Œè¯¥å‘½ä»¤æ„å‘³ç€ï¼Œä¹‹å‰çš„ä¿®æ”¹å½»åº•æ¶ˆå¤±äº†ã€‚è¿™ä¸»è¦ç”¨äºæ‹‰å–äº†ç‰ˆæœ¬åº“ä»£ç åï¼Œåœ¨æœ¬åœ°è¿›è¡Œè°ƒè¯•æˆ–å°è¯•æ€§ä¿®æ”¹ï¼Œæœ€ç»ˆå‘ç°æ€è·¯é”™è¯¯ï¼Œæƒ³è¦ä¸€é”®è¿˜åŸçš„åœºæ™¯ã€‚ä¸€èˆ¬å»ºè®®æœ€å¥½å¦å¤–å¼€å¯ä¸€ä¸ªåˆ†æ”¯æˆ–æ–‡ä»¶å¤¹è¿›è¡Œå®éªŒï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨ä¸»é¡¹ç›®ä¸Šæ“ä½œã€‚
<em>æ³¨æ„ï¼š<code>--</code> åé¢éœ€è¦æœ‰ç©ºæ ¼ï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢æ–‡ä»¶åä¸åˆ†æ”¯åæ··æ·†ã€‚</em></p>
<h3 data-id="heading-20">åœºæ™¯äºŒï¼šæ’¤é”€å·¥ä½œåŒºä¸æš‚å­˜åŒºä»£ç </h3>
<p>å½“ä¿®æ”¹æ–‡ä»¶åå·²ç»æ‰§è¡Œäº† <code>git add</code>ï¼Œæ­¤æ—¶ä¿®æ”¹å·²è¿›å…¥æš‚å­˜åŒºã€‚è¦æ’¤é”€éœ€è¦åˆ†ä¸¤æ­¥èµ°ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥</strong>ï¼šå°†æ–‡ä»¶ä»æš‚å­˜åŒºç§»å‡ºï¼Œæ”¾å›å·¥ä½œåŒºã€‚ä½¿ç”¨é»˜è®¤çš„ <code>git reset</code>ï¼ˆç›¸å½“äº <code>--mixed</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git reset HEAD AIGameDemo.cpp
</code></pre>
<p>HEAD è¡¨ç¤ºå½“å‰ç‰ˆæœ¬ã€‚å¦‚æœè¦å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ä½¿ç”¨ <code>HEAD^</code>ï¼Œä¸Šä¸¤ä¸ªç‰ˆæœ¬ä½¿ç”¨ <code>HEAD^^</code>ã€‚
æ‰§è¡Œåï¼Œæš‚å­˜åŒºè¢«æ¸…ç©ºï¼Œä¿®æ”¹å›åˆ°äº†å·¥ä½œåŒºã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0190c61d6ca344e992f6072b813db5c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=Y641YfFsGyFpLwPH9Y0sw4MQ%2FNM%3D" alt="image.png" loading="lazy"/>
çŠ¶æ€å˜ä¸º <code>Changes not staged for commit</code>ï¼ŒéªŒè¯äº†æ’¤é”€æš‚å­˜åŒºçš„æ“ä½œæˆåŠŸã€‚</p>
<p><strong>ç¬¬äºŒæ­¥</strong>ï¼šç»§ç»­å¤„ç†å·¥ä½œåŒºçš„æ®‹ç•™ä¿®æ”¹ï¼Œå°†å…¶å½»åº•ä¸¢å¼ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git checkout -- AIGameDemo.cpp
</code></pre>
<p>æ­¤æ—¶å·¥ä½œåŒºä¹Ÿæ¢å¤å¹²å‡€ï¼Œæ‰€æœ‰ä¿®æ”¹å‡å·²è¢«æ’¤é”€ã€‚</p>
<h3 data-id="heading-21">åœºæ™¯ä¸‰ï¼šå…¨é“¾è·¯å›é€€ï¼ˆå·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“ï¼‰</h3>
<p>å½“ä¿®æ”¹å·²ç» commit åˆ°äº†æœ¬åœ°ç‰ˆæœ¬åº“ï¼Œä½†å°šæœª push åˆ°è¿œç¨‹ä»“åº“æ—¶ï¼Œå¯ä»¥é€šè¿‡ç‰ˆæœ¬å›é€€æ¥æ’¤é”€æœ¬æ¬¡æäº¤ã€‚</p>
<p>é¦–å…ˆåˆ¶é€ ä¸€ä¸ªå·²æäº¤çš„çŠ¶æ€ï¼šä¿®æ”¹æ–‡ä»¶ -&gt; add -&gt; commitã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bac63bfe354413abfa0f242fa51043a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=3Adu32%2Flmq9ldNx9wDyff7E%2FMk8%3D" alt="image.png" loading="lazy"/>
æ­¤æ—¶ä¸‰ä¸ªåŒºåŸŸéƒ½åŒ…å«è¯¥ä¿®æ”¹ã€‚ä¸ºäº†å½»åº•æ¶ˆé™¤è¿™æ¬¡æäº¤çš„å½±å“ï¼Œä½¿ç”¨ <code>--hard</code> æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git reset --hard HEAD^
</code></pre>
<p><code>HEAD^</code> æŒ‡å‘å½“å‰ç‰ˆæœ¬çš„çˆ¶ç‰ˆæœ¬ï¼ˆä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼‰ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6eaa3480822e484ea393f292a41c0bc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=rSKpxTMqE2khXQS2f26dGd7rL2c%3D" alt="image.png" loading="lazy"/>
<strong>å¿…é¡»å†æ¬¡å¼ºè°ƒï¼Œå‰ææ˜¯è¯¥æäº¤å°šæœªæ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚</strong> å¦‚æœä»£ç å·²ç»æ¨é€åˆ°è¿œç¨‹ï¼Œä½¿ç”¨ <code>reset</code> å¼ºè¡Œå›é€€å¹¶å¼ºåˆ¶æ¨é€ï¼ˆforce pushï¼‰å¯èƒ½ä¼šå¯¼è‡´å¤šäººåä½œæ—¶çš„ç‰ˆæœ¬å†²çªï¼Œé€ æˆä¸¥é‡çš„å›¢é˜Ÿäº‹æ•…ã€‚</p>
<h2 data-id="heading-22">ä¸ƒã€æ–‡ä»¶çš„åˆ é™¤ä¸æ¢å¤</h2>
<p>åœ¨ Git ä¸­ï¼Œåˆ é™¤æ–‡ä»¶ä¸ä»…ä»…æ˜¯åˆ é™¤ç£ç›˜ä¸Šçš„æ–‡ä»¶ï¼Œè¿˜éœ€è¦æ›´æ–°æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“çš„è®°å½•ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡ã€‚</p>
<h3 data-id="heading-23">7.1 å¸¸è§„åˆ é™¤æµç¨‹</h3>
<p>å‡è®¾ä»“åº“ä¸­å­˜åœ¨ <code>file1</code> æ–‡ä»¶ã€‚å¦‚æœåœ¨æ–‡ä»¶ç®¡ç†å™¨æˆ–ä½¿ç”¨ç³»ç»Ÿå‘½ä»¤ <code>rm</code> åˆ é™¤äº†è¯¥æ–‡ä»¶ï¼ŒGit ä¼šæ£€æµ‹åˆ°å·¥ä½œåŒºçš„å˜åŒ–ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32ea4125f09249bcba5b66b082aef23f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5bqX5bCP5LqM5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770458293&amp;x-signature=Ic7ILPhKy9T5J1l%2Fp3x1FpjRhnU%3D" alt="image.png" loading="lazy"/>
ä¸Šå›¾æ˜¾ç¤º <code>file</code> å¤„äº <code>deleted</code> çŠ¶æ€ï¼Œä½†è¿™ä»…ä»…æ˜¯å·¥ä½œåŒºçš„å˜åŠ¨ã€‚ä¸ºäº†ç¡®è®¤åˆ é™¤ï¼Œéœ€è¦æ‰§è¡Œ <code>git add</code> å°†åˆ é™¤æ“ä½œæš‚å­˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git add file
</code></pre>
<p>æ­¤æ—¶ Git çŸ¥é“è¿™ä¸ªæ–‡ä»¶è¢«åˆ é™¤äº†ã€‚æœ€åæäº¤åˆ°ç‰ˆæœ¬åº“ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git commit -m <span class="hljs-string">"delete file"</span>
</code></pre>
<p>è¿™æ ·æ‰ç®—å®Œæˆäº†ä¸€æ¬¡å®Œæ•´çš„åˆ é™¤æäº¤ã€‚</p>
<h3 data-id="heading-24">7.2 é«˜æ•ˆåˆ é™¤å‘½ä»¤ <code>git rm</code></h3>
<p>Git æä¾›äº† <code>git rm</code> å‘½ä»¤ï¼Œå°†ä¸Šè¿°çš„â€œåˆ é™¤å·¥ä½œåŒºæ–‡ä»¶â€å’Œâ€œæš‚å­˜åˆ é™¤æ“ä½œâ€åˆå¹¶ä¸ºä¸€æ­¥ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">rm</span> file
</code></pre>
<p>æ‰§è¡Œè¯¥å‘½ä»¤åï¼Œæ–‡ä»¶ä¼šç›´æ¥ä»ç£ç›˜åˆ é™¤ï¼Œå¹¶ä¸”è¯¥åˆ é™¤æ“ä½œä¼šè¢«ç«‹å³æ”¾å…¥æš‚å­˜åŒºã€‚æ‰§è¡Œåæ— éœ€å†æ¬¡ <code>git add</code>ï¼Œç›´æ¥è¿›è¡Œ <code>git commit</code> å³å¯å®Œæˆæ•´ä¸ªåˆ é™¤æµç¨‹ã€‚è¿™ç§æ–¹å¼æ›´åŠ ç®€æ´é«˜æ•ˆï¼Œæ˜¯ç®¡ç†æ–‡ä»¶åˆ é™¤çš„æ¨èåšæ³•ã€‚</p>
<h3 data-id="heading-25">7.3 è¯¯åˆ æ¢å¤</h3>
<p>å¦‚æœæ˜¯ä¸å°å¿ƒåˆ é”™äº†æ–‡ä»¶ï¼Œæƒ³è¦æ‰¾å›æ¥ï¼Œå¯ä»¥ä½¿ç”¨ <code>restore</code> å‘½ä»¤ï¼ˆè¿™æ˜¯æ–°ç‰ˆ Git æ¨èç”¨æ¥æ›¿ä»£ checkout å¤„ç†æ–‡ä»¶çš„å‘½ä»¤ï¼‰ã€‚</p>
<p><strong>æƒ…å†µ Aï¼šæ–‡ä»¶ä»…åœ¨å·¥ä½œåŒºè¢«åˆ ï¼Œå°šæœª add</strong></p>
<pre><code class="hljs language-bash" lang="bash">git restore file
</code></pre>
<p>è¿™å°†ä»æš‚å­˜åŒºï¼ˆindexï¼‰æ¢å¤æ–‡ä»¶åˆ°å·¥ä½œåŒºã€‚</p>
<p><strong>æƒ…å†µ Bï¼šæ–‡ä»¶å·²è¢«åˆ ï¼Œä¸”å·² add åˆ°æš‚å­˜åŒº</strong>
æ­¤æ—¶æŸ¥çœ‹çŠ¶æ€ï¼Œä¼šæ˜¾ç¤ºç»¿è‰²çš„ <code>deleted: file</code>ã€‚
æˆ‘ä»¬éœ€è¦å…ˆå°†è¿™ä¸ªâ€œåˆ é™¤æ“ä½œâ€ä»æš‚å­˜åŒºæ’¤å›ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git restore --staged file
</code></pre>
<p>æ‰§è¡Œå®Œè¿™å¥åï¼Œæ–‡ä»¶çŠ¶æ€å˜å›å·¥ä½œåŒºè¢«åˆ ï¼ˆçº¢è‰²çš„ deletedï¼‰ã€‚æ¥ç€å†æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git restore file
</code></pre>
<p>æ–‡ä»¶å°±ä¼šå¥‡è¿¹èˆ¬åœ°å›åˆ°æ–‡ä»¶å¤¹ä¸­ã€‚è¿™é‡Œä½“ç°äº† Git å¯¹æ–‡ä»¶çŠ¶æ€çš„ç²¾ç»†æ§åˆ¶èƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pandas å…¥é—¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7600989427906609206</link>    <guid>https://juejin.cn/post/7600989427906609206</guid>    <pubDate>2026-01-31T08:08:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600989427906609206" data-draft-id="7600999271770570752" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pandas å…¥é—¨æŒ‡å—"/> <meta itemprop="keywords" content="Python,pandas"/> <meta itemprop="datePublished" content="2026-01-31T08:08:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å°å¼ è¯´æ•…äº‹"/> <meta itemprop="url" content="https://juejin.cn/user/741501567509111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pandas å…¥é—¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/741501567509111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å°å¼ è¯´æ•…äº‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T08:08:25.000Z" title="Sat Jan 31 2026 08:08:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. åº“çš„æ¦‚è§ˆä¸æ ¸å¿ƒä»·å€¼</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨æ•°æ®åˆ†æå·¥ä½œä¸­ï¼Œå¦‚æœä½ éœ€è¦å¤„ç†ç™¾ä¸‡è¡Œ Excel è¡¨æ ¼ã€æ¸…æ´—æ‚ä¹±çš„æ•°æ®ã€è®¡ç®—å¤æ‚çš„ç»Ÿè®¡æŒ‡æ ‡ï¼Œå°±åƒç”¨ä¸€æŠŠå°å‹ºå­åœ¨æŒ–åœŸå †ï¼Œä¸ä»…æ•ˆç‡ä½ä¸‹è¿˜å®¹æ˜“å‡ºé”™ã€‚<code>Pandas</code> æ­£æ˜¯ä¸ºè§£å†³è¿™ä¸ªç—›ç‚¹è€Œç”Ÿçš„å·¥å…·â€”â€”å®ƒæ˜¯ Python æ•°æ®åˆ†æé¢†åŸŸçš„"ç‘å£«å†›åˆ€"ã€‚</p>
<p>Pandas æ˜¯åŸºäº NumPy æ„å»ºçš„å¼€æºæ•°æ®åˆ†æåº“ï¼Œä¸“é—¨ç”¨äºå¤„ç†ç»“æ„åŒ–æ•°æ®ã€‚å®ƒå¡«è¡¥äº† NumPy åœ¨å¤„ç†éæ•°å€¼æ•°æ®å’Œæ··åˆç±»å‹æ•°æ®æ–¹é¢çš„ç©ºç™½ï¼Œè®©æ•°æ®åˆ†æå˜å¾—åƒæ“ä½œ Excel è¡¨æ ¼ä¸€æ ·ç®€å•ç›´è§‚ï¼ŒåŒæ—¶å…·å¤‡å¤„ç†å¤§è§„æ¨¡æ•°æ®çš„é«˜æ€§èƒ½ã€‚</p>
<p>åœ¨ Python æ•°æ®ç§‘å­¦ç”Ÿæ€ä¸­ï¼ŒPandas å¤„äºæ ¸å¿ƒåœ°ä½ï¼šä¸Šæ¸¸è¿æ¥æ•°æ®æºï¼ˆCSVã€Excelã€SQLã€JSON ç­‰å¤šç§æ ¼å¼ï¼‰ï¼Œä¸‹æ¸¸è¡”æ¥ NumPyï¼ˆæ•°å€¼è®¡ç®—ï¼‰ã€Matplotlibï¼ˆå¯è§†åŒ–ï¼‰å’Œ Scikit-learnï¼ˆæœºå™¨å­¦ä¹ ï¼‰ã€‚æŒæ¡äº† Pandasï¼Œä½ å°±æ‹¥æœ‰äº†ä»æ•°æ®è·å–åˆ°å»ºæ¨¡å‡†å¤‡çš„å…¨æµç¨‹èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-1">2. ç¯å¢ƒæ­å»ºä¸ "Hello, World"</h2>
<h3 data-id="heading-2">å®‰è£… Pandas</h3>
<p>Pandas çš„å®‰è£…éå¸¸ç®€å•ï¼Œæ”¯æŒå¤šç§å®‰è£…æ–¹å¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹å¼1ï¼šä½¿ç”¨ pip å®‰è£…ï¼ˆæ¨èï¼‰</span>
pip install pandas

<span class="hljs-comment"># æ–¹å¼2ï¼šä½¿ç”¨ conda å®‰è£…</span>
conda install pandas

<span class="hljs-comment"># å›½å†…ç”¨æˆ·å¯ä½¿ç”¨é•œåƒæºåŠ é€Ÿ</span>
pip install pandas -i https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œåœ¨ Python ç¯å¢ƒä¸­å¯¼å…¥å¹¶éªŒè¯ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¯¼å…¥ pandasï¼ˆçº¦å®šä¿—æˆä½¿ç”¨ pd ä½œä¸ºåˆ«åï¼‰</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># æ‰“å°ç‰ˆæœ¬å·ï¼ˆç¡®ä¿å®‰è£…æˆåŠŸï¼‰</span>
<span class="hljs-built_in">print</span>(pd.__version__)  <span class="hljs-comment"># è¾“å‡ºç‰ˆæœ¬å·ï¼Œå¦‚ 2.3.0</span>
</code></pre>
<h3 data-id="heading-3">Hello World ç¤ºä¾‹</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥ä½“éªŒ Pandas çš„æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªç®€å•çš„å­—å…¸æ•°æ®</span>
data = {
    <span class="hljs-string">'å§“å'</span>: [<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'æå››'</span>, <span class="hljs-string">'ç‹äº”'</span>],
    <span class="hljs-string">'å¹´é¾„'</span>: [<span class="hljs-number">25</span>, <span class="hljs-number">30</span>, <span class="hljs-number">28</span>],
    <span class="hljs-string">'åŸå¸‚'</span>: [<span class="hljs-string">'åŒ—äº¬'</span>, <span class="hljs-string">'ä¸Šæµ·'</span>, <span class="hljs-string">'å¹¿å·'</span>]
}

<span class="hljs-comment"># å°†å­—å…¸è½¬æ¢ä¸º DataFrameï¼ˆè¡¨æ ¼ï¼‰</span>
df = pd.DataFrame(data)

<span class="hljs-comment"># æ‰“å°ç»“æœ</span>
<span class="hljs-built_in">print</span>(df)
</code></pre>
<p><strong>é€è¡Œè§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>import pandas as pd</code>ï¼šå¯¼å…¥ Pandas åº“ï¼Œä½¿ç”¨ <code>pd</code> ä½œä¸ºåˆ«åï¼Œè¿™æ˜¯ Python ç¤¾åŒºçš„çº¦å®š</li>
<li><code>data = {...}</code>ï¼šåˆ›å»ºä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«å§“åã€å¹´é¾„ã€åŸå¸‚ä¸‰ä¸ªå­—æ®µçš„æ•°æ®</li>
<li><code>df = pd.DataFrame(data)</code>ï¼šå°†å­—å…¸è½¬æ¢ä¸º <code>DataFrame</code> å¯¹è±¡ï¼Œè¿™æ˜¯ Pandas çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œç±»ä¼¼ Excel è¡¨æ ¼</li>
<li><code>print(df)</code>ï¼šè¾“å‡ºè¡¨æ ¼å†…å®¹</li>
</ul>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs">   å§“å  å¹´é¾„   åŸå¸‚
0  å¼ ä¸‰  25  åŒ—äº¬
1  æå››  30  ä¸Šæµ·
2  ç‹äº”  28  å¹¿å·
</code></pre>
<p>çœ‹åˆ°è¿™ä¸ªç»“æœï¼Œä½ å¯èƒ½å·²ç»å‘ç°äº† Pandas çš„ä¼˜åŠ¿ï¼šå®ƒè‡ªåŠ¨ä¸ºæ•°æ®æ·»åŠ äº†è¡Œç´¢å¼•ï¼ˆ0, 1, 2ï¼‰ï¼Œå¹¶ä»¥æ•´é½çš„è¡¨æ ¼å½¢å¼å±•ç¤ºæ•°æ®ï¼Œæ¯” Python åŸç”Ÿçš„åˆ—è¡¨æˆ–å­—å…¸ç›´è§‚å¾—å¤šã€‚</p>
<h2 data-id="heading-4">3. æ ¸å¿ƒæ¦‚å¿µè§£æ</h2>
<p>Pandas çš„ä¸¤å¤§æ ¸å¿ƒæ•°æ®ç»“æ„æ˜¯ <code>Series</code>ï¼ˆä¸€ç»´åºåˆ—ï¼‰å’Œ <code>DataFrame</code>ï¼ˆäºŒç»´è¡¨æ ¼ï¼‰ã€‚ç†è§£å®ƒä»¬çš„åŒºåˆ«å’Œè”ç³»æ˜¯æŒæ¡ Pandas çš„å…³é”®ã€‚</p>
<h3 data-id="heading-5">Seriesï¼šä¸€ç»´å¸¦æ ‡ç­¾æ•°ç»„</h3>
<p><code>Series</code> æ˜¯ä¸€ä¸ªä¸€ç»´çš„å¸¦æ ‡ç­¾æ•°ç»„ï¼Œå¯ä»¥ç†è§£ä¸º"å¸¦ç´¢å¼•çš„åˆ—è¡¨"ã€‚æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç´¢å¼•æ ‡ç­¾ï¼Œé»˜è®¤æ˜¯ 0 å¼€å§‹çš„æ•´æ•°ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ›å»º Series</span>
s = pd.Series([<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>], index=[<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>], name=<span class="hljs-string">'æ•°å€¼'</span>)
<span class="hljs-built_in">print</span>(s)
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">a</span>    <span class="hljs-number">10</span>
<span class="hljs-selector-tag">b</span>    <span class="hljs-number">20</span>
c    <span class="hljs-number">30</span>
Name: æ•°å€¼, dtype: int64
</code></pre>
<p><strong>æ ¸å¿ƒå±æ€§</strong>ï¼š</p>
<ul>
<li><code>values</code>ï¼šè·å–æ•°æ®å€¼ï¼ˆè¿”å› NumPy æ•°ç»„ï¼‰</li>
<li><code>index</code>ï¼šè·å–ç´¢å¼•æ ‡ç­¾</li>
<li><code>dtype</code>ï¼šæ•°æ®ç±»å‹ï¼ˆå¦‚ int64ã€float64ã€object ç­‰ï¼‰</li>
</ul>
<h3 data-id="heading-6">DataFrameï¼šäºŒç»´è¡¨æ ¼å‹æ•°æ®</h3>
<p><code>DataFrame</code> æ˜¯äºŒç»´çš„è¡¨æ ¼ç»“æ„ï¼Œå¯ä»¥ç†è§£ä¸º"å¤šä¸ª Series æŒ‰åˆ—ç»„åˆè€Œæˆ"ã€‚å®ƒæ—¢æœ‰è¡Œç´¢å¼•ä¹Ÿæœ‰åˆ—ç´¢å¼•ï¼Œç±»ä¼¼ Excel è¡¨æ ¼æˆ–æ•°æ®åº“è¡¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä»å­—å…¸åˆ›å»º DataFrame</span>
data = {
    <span class="hljs-string">'å§“å'</span>: [<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'æå››'</span>, <span class="hljs-string">'ç‹äº”'</span>],
    <span class="hljs-string">'å¹´é¾„'</span>: [<span class="hljs-number">25</span>, <span class="hljs-number">30</span>, <span class="hljs-number">28</span>],
    <span class="hljs-string">'è–ªèµ„'</span>: [<span class="hljs-number">15000</span>, <span class="hljs-number">20000</span>, <span class="hljs-number">18000</span>]
}
df = pd.DataFrame(data)
<span class="hljs-built_in">print</span>(df)
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs">   å§“å  å¹´é¾„   è–ªèµ„
0  å¼ ä¸‰  25  15000
1  æå››  30  20000
2  ç‹äº”  28  18000
</code></pre>
<p><strong>æ ¸å¿ƒå±æ€§</strong>ï¼š</p>
<ul>
<li><code>shape</code>ï¼šæ•°æ®ç»´åº¦ï¼ˆè¡Œæ•°ï¼Œåˆ—æ•°ï¼‰</li>
<li><code>columns</code>ï¼šåˆ—åï¼ˆç±»ä¼¼ç´¢å¼•ï¼‰</li>
<li><code>index</code>ï¼šè¡Œç´¢å¼•</li>
<li><code>values</code>ï¼šåº•å±‚æ•°æ®æ•°ç»„</li>
</ul>
<h3 data-id="heading-7">æ¦‚å¿µå…³ç³»å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[NumPyæ•°ç»„] --&gt; B[Series ä¸€ç»´åºåˆ—]
    B --&gt; C[DataFrame äºŒç»´è¡¨æ ¼]
    C --&gt; D[æ•°æ®åˆ†ææ“ä½œ]
    C --&gt; E[æ•°æ®å¯è§†åŒ–]
    C --&gt; F[æœºå™¨å­¦ä¹ ]
    
    B -.-&gt;|ç»„åˆæˆ| C
    C -.-&gt;|æå–ä¸º| B
    
    style B fill:#e1f5ff
    style C fill:#ffe1e1
</code></pre>
<p>è¿™ä¸ªå›¾å±•ç¤ºäº† Pandas çš„æ•°æ®ç»“æ„å±‚çº§å…³ç³»ï¼š</p>
<ul>
<li><code>Series</code> åŸºäº NumPy æ•°ç»„æ„å»ºï¼Œå¢åŠ äº†æ ‡ç­¾ç´¢å¼•åŠŸèƒ½</li>
<li><code>DataFrame</code> ç”±å¤šä¸ª <code>Series</code> æŒ‰åˆ—ç»„åˆè€Œæˆ</li>
<li>ä» <code>DataFrame</code> ä¸­æå–å•åˆ—ä¼šè¿”å› <code>Series</code></li>
<li><code>Series</code> å¯ä»¥é€šè¿‡ <code>to_frame()</code> æ–¹æ³•è½¬æ¢ä¸º <code>DataFrame</code></li>
</ul>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>ç´¢å¼•å¯¹é½</strong>ï¼šPandas è¿ç®—æ—¶è‡ªåŠ¨æŒ‰ç´¢å¼•å¯¹é½ï¼Œå³ä½¿é¡ºåºä¸åŒä¹Ÿèƒ½æ­£ç¡®è®¡ç®—</li>
<li><strong>ç¼ºå¤±å€¼å¤„ç†</strong>ï¼šè‡ªåŠ¨è¯†åˆ«å’Œå¤„ç† <code>NaN</code>ï¼ˆNot a Numberï¼‰ç¼ºå¤±å€¼</li>
<li><strong>çµæ´»çš„æ•°æ®ç±»å‹</strong>ï¼šæ”¯æŒæ•°å€¼ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰å¤šç§æ•°æ®ç±»å‹</li>
<li><strong>å‘é‡åŒ–æ“ä½œ</strong>ï¼šç±»ä¼¼ NumPyï¼Œæ”¯æŒé«˜æ•ˆçš„å‘é‡åŒ–è¿ç®—</li>
</ul>
<h2 data-id="heading-8">4. å®æˆ˜æ¼”ç»ƒï¼šè§£å†³ä¸€ä¸ªå…¸å‹é—®é¢˜</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„å®æˆ˜é¡¹ç›®æ¥ä½“éªŒ Pandas çš„å¼ºå¤§åŠŸèƒ½ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä»½é”€å”®æ•°æ®ï¼Œéœ€è¦è¿›è¡Œåˆ†æå’Œç»Ÿè®¡ã€‚</p>
<h3 data-id="heading-9">éœ€æ±‚åˆ†æ</h3>
<p>æˆ‘ä»¬æœ‰æŸå…¬å¸ 2024 å¹´ä¸ŠåŠå¹´çš„é”€å”®æ•°æ®ï¼Œéœ€è¦å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š</p>
<ol>
<li>æŸ¥çœ‹æ•°æ®æ¦‚å†µ</li>
<li>ç­›é€‰é«˜é”€å”®é¢è®¢å•</li>
<li>æŒ‰æœˆä»½ç»Ÿè®¡é”€å”®æ€»é¢</li>
<li>æ‰¾å‡ºæœ€ä½³é”€å”®å‘˜</li>
</ol>
<h3 data-id="heading-10">æ–¹æ¡ˆè®¾è®¡</h3>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ Pandas çš„ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>æ•°æ®è¯»å–ï¼šä» CSV è¯»å–æ•°æ®</li>
<li>æ•°æ®æŸ¥çœ‹ï¼š<code>head()</code>ã€<code>info()</code>ã€<code>describe()</code></li>
<li>æ•°æ®ç­›é€‰ï¼šå¸ƒå°”ç´¢å¼•</li>
<li>æ•°æ®åˆ†ç»„ï¼š<code>groupby()</code> + èšåˆå‡½æ•°</li>
<li>æ•°æ®æ’åºï¼š<code>sort_values()</code></li>
</ul>
<h3 data-id="heading-11">ä»£ç å®ç°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># æ­¥éª¤1ï¼šåˆ›å»ºæ¨¡æ‹Ÿé”€å”®æ•°æ®</span>
data = {
    <span class="hljs-string">'æ—¥æœŸ'</span>: pd.to_datetime([<span class="hljs-string">'2024-01-15'</span>, <span class="hljs-string">'2024-01-20'</span>, <span class="hljs-string">'2024-02-10'</span>, <span class="hljs-string">'2024-02-25'</span>, 
                           <span class="hljs-string">'2024-03-05'</span>, <span class="hljs-string">'2024-03-18'</span>, <span class="hljs-string">'2024-04-12'</span>, <span class="hljs-string">'2024-04-28'</span>,
                           <span class="hljs-string">'2024-05-08'</span>, <span class="hljs-string">'2024-05-22'</span>, <span class="hljs-string">'2024-06-05'</span>, <span class="hljs-string">'2024-06-18'</span>]),
    <span class="hljs-string">'é”€å”®å‘˜'</span>: [<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'æå››'</span>, <span class="hljs-string">'ç‹äº”'</span>, <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'æå››'</span>, <span class="hljs-string">'ç‹äº”'</span>, <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'æå››'</span>, <span class="hljs-string">'ç‹äº”'</span>, <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'æå››'</span>, <span class="hljs-string">'ç‹äº”'</span>],
    <span class="hljs-string">'äº§å“'</span>: [<span class="hljs-string">'äº§å“A'</span>, <span class="hljs-string">'äº§å“B'</span>, <span class="hljs-string">'äº§å“A'</span>, <span class="hljs-string">'äº§å“C'</span>, <span class="hljs-string">'äº§å“B'</span>, <span class="hljs-string">'äº§å“A'</span>, <span class="hljs-string">'äº§å“C'</span>, <span class="hljs-string">'äº§å“B'</span>, <span class="hljs-string">'äº§å“A'</span>, <span class="hljs-string">'äº§å“C'</span>, <span class="hljs-string">'äº§å“B'</span>, <span class="hljs-string">'äº§å“A'</span>],
    <span class="hljs-string">'é”€å”®é¢'</span>: [<span class="hljs-number">15000</span>, <span class="hljs-number">20000</span>, <span class="hljs-number">18000</span>, <span class="hljs-number">25000</span>, <span class="hljs-number">22000</span>, <span class="hljs-number">16000</span>, <span class="hljs-number">28000</span>, <span class="hljs-number">24000</span>, <span class="hljs-number">19000</span>, <span class="hljs-number">30000</span>, <span class="hljs-number">26000</span>, <span class="hljs-number">17000</span>]
}

<span class="hljs-comment"># åˆ›å»º DataFrame</span>
df = pd.DataFrame(data)

<span class="hljs-comment"># æ­¥éª¤2ï¼šæŸ¥çœ‹æ•°æ®æ¦‚å†µ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== æ•°æ®æ¦‚å†µ ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®å½¢çŠ¶ï¼š<span class="hljs-subst">{df.shape}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå‰5è¡Œæ•°æ®ï¼š\n<span class="hljs-subst">{df.head()}</span>"</span>)

<span class="hljs-comment"># æ­¥éª¤3ï¼šè®¡ç®—åŸºæœ¬ç»Ÿè®¡ä¿¡æ¯</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== é”€å”®é¢ç»Ÿè®¡ ==="</span>)
<span class="hljs-built_in">print</span>(df[<span class="hljs-string">'é”€å”®é¢'</span>].describe())

<span class="hljs-comment"># æ­¥éª¤4ï¼šç­›é€‰é«˜é”€å”®é¢è®¢å•ï¼ˆ&gt;20000ï¼‰</span>
high_sales = df[df[<span class="hljs-string">'é”€å”®é¢'</span>] &gt; <span class="hljs-number">20000</span>]
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== é«˜é”€å”®é¢è®¢å•ï¼ˆ&gt;20000ï¼‰==="</span>)
<span class="hljs-built_in">print</span>(high_sales[[<span class="hljs-string">'é”€å”®å‘˜'</span>, <span class="hljs-string">'äº§å“'</span>, <span class="hljs-string">'é”€å”®é¢'</span>]])

<span class="hljs-comment"># æ­¥éª¤5ï¼šæŒ‰æœˆä»½ç»Ÿè®¡é”€å”®æ€»é¢</span>
df[<span class="hljs-string">'æœˆä»½'</span>] = df[<span class="hljs-string">'æ—¥æœŸ'</span>].dt.to_period(<span class="hljs-string">'M'</span>)
monthly_sales = df.groupby(<span class="hljs-string">'æœˆä»½'</span>)[<span class="hljs-string">'é”€å”®é¢'</span>].<span class="hljs-built_in">sum</span>()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æœˆåº¦é”€å”®æ€»é¢ ==="</span>)
<span class="hljs-built_in">print</span>(monthly_sales)

<span class="hljs-comment"># æ­¥éª¤6ï¼šç»Ÿè®¡å„é”€å”®å‘˜çš„æ€»é”€å”®é¢</span>
salesman_total = df.groupby(<span class="hljs-string">'é”€å”®å‘˜'</span>)[<span class="hljs-string">'é”€å”®é¢'</span>].<span class="hljs-built_in">sum</span>().sort_values(ascending=<span class="hljs-literal">False</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== é”€å”®å‘˜ä¸šç»©æ’å ==="</span>)
<span class="hljs-built_in">print</span>(salesman_total)

<span class="hljs-comment"># æ­¥éª¤7ï¼šæ‰¾å‡ºæœ€ä½³é”€å”®å‘˜</span>
best_salesman = salesman_total.index[<span class="hljs-number">0</span>]
best_total = salesman_total.iloc[<span class="hljs-number">0</span>]
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næœ€ä½³é”€å”®å‘˜æ˜¯ï¼š<span class="hljs-subst">{best_salesman}</span>ï¼Œæ€»é”€å”®é¢ï¼š<span class="hljs-subst">{best_total:,}</span>"</span>)
</code></pre>
<h3 data-id="heading-12">è¿è¡Œè¯´æ˜</h3>
<p>å°†ä¸Šè¿°ä»£ç ä¿å­˜ä¸º <code>.py</code> æ–‡ä»¶å¹¶è¿è¡Œï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">===</span> <span class="hljs-string">æ•°æ®æ¦‚å†µ</span> <span class="hljs-string">===</span>
<span class="hljs-string">æ•°æ®å½¢çŠ¶ï¼š(12,</span> <span class="hljs-number">4</span><span class="hljs-string">)</span>

<span class="hljs-string">å‰5è¡Œæ•°æ®ï¼š</span>
        <span class="hljs-string">æ—¥æœŸ</span> <span class="hljs-string">é”€å”®å‘˜</span>   <span class="hljs-string">äº§å“</span>   <span class="hljs-string">é”€å”®é¢</span>
<span class="hljs-number">0</span> <span class="hljs-number">2024-01-15</span>  <span class="hljs-string">å¼ ä¸‰</span>  <span class="hljs-string">äº§å“A</span>  <span class="hljs-number">15000</span>
<span class="hljs-number">1</span> <span class="hljs-number">2024-01-20</span>  <span class="hljs-string">æå››</span>  <span class="hljs-string">äº§å“B</span>  <span class="hljs-number">20000</span>
<span class="hljs-number">2</span> <span class="hljs-number">2024-02-10</span>  <span class="hljs-string">ç‹äº”</span>  <span class="hljs-string">äº§å“A</span>  <span class="hljs-number">18000</span>
<span class="hljs-number">3</span> <span class="hljs-number">2024-02-25</span>  <span class="hljs-string">å¼ ä¸‰</span>  <span class="hljs-string">äº§å“C</span>  <span class="hljs-number">25000</span>
<span class="hljs-number">4</span> <span class="hljs-number">2024-03-05</span>  <span class="hljs-string">æå››</span>  <span class="hljs-string">äº§å“B</span>  <span class="hljs-number">22000</span>

<span class="hljs-string">===</span> <span class="hljs-string">é”€å”®é¢ç»Ÿè®¡</span> <span class="hljs-string">===</span>
<span class="hljs-string">count</span>       <span class="hljs-number">12.000000</span>
<span class="hljs-string">mean</span>     <span class="hljs-number">21833.333333</span>
<span class="hljs-string">std</span>       <span class="hljs-number">4783.921287</span>
<span class="hljs-string">min</span>      <span class="hljs-number">15000.000000</span>
<span class="hljs-number">25</span><span class="hljs-string">%</span>      <span class="hljs-number">18250.000000</span>
<span class="hljs-number">50</span><span class="hljs-string">%</span>      <span class="hljs-number">21500.000000</span>
<span class="hljs-number">75</span><span class="hljs-string">%</span>      <span class="hljs-number">25500.000000</span>
<span class="hljs-string">max</span>      <span class="hljs-number">30000.000000</span>
<span class="hljs-attr">Name:</span> <span class="hljs-string">é”€å”®é¢,</span> <span class="hljs-attr">dtype:</span> <span class="hljs-string">float64</span>

<span class="hljs-string">===</span> <span class="hljs-string">é«˜é”€å”®é¢è®¢å•ï¼ˆ&gt;20000ï¼‰===</span>
   <span class="hljs-string">é”€å”®å‘˜</span>   <span class="hljs-string">äº§å“</span>   <span class="hljs-string">é”€å”®é¢</span>
<span class="hljs-number">3</span>   <span class="hljs-string">å¼ ä¸‰</span>  <span class="hljs-string">äº§å“C</span>  <span class="hljs-number">25000</span>
<span class="hljs-number">4</span>   <span class="hljs-string">æå››</span>  <span class="hljs-string">äº§å“B</span>  <span class="hljs-number">22000</span>
<span class="hljs-number">6</span>   <span class="hljs-string">å¼ ä¸‰</span>  <span class="hljs-string">äº§å“C</span>  <span class="hljs-number">28000</span>
<span class="hljs-number">7</span>   <span class="hljs-string">æå››</span>  <span class="hljs-string">äº§å“B</span>  <span class="hljs-number">24000</span>
<span class="hljs-number">9</span>   <span class="hljs-string">å¼ ä¸‰</span>  <span class="hljs-string">äº§å“C</span>  <span class="hljs-number">30000</span>
<span class="hljs-number">10</span>  <span class="hljs-string">æå››</span>  <span class="hljs-string">äº§å“B</span>  <span class="hljs-number">26000</span>

<span class="hljs-string">===</span> <span class="hljs-string">æœˆåº¦é”€å”®æ€»é¢</span> <span class="hljs-string">===</span>
<span class="hljs-string">æœˆä»½</span>
<span class="hljs-number">2024-01    </span><span class="hljs-number">35000</span>
<span class="hljs-number">2024-02    </span><span class="hljs-number">43000</span>
<span class="hljs-number">2024-03    </span><span class="hljs-number">38000</span>
<span class="hljs-number">2024-04    </span><span class="hljs-number">52000</span>
<span class="hljs-number">2024-05    </span><span class="hljs-number">49000</span>
<span class="hljs-number">2024-06    </span><span class="hljs-number">43000</span>
<span class="hljs-attr">Freq:</span> <span class="hljs-string">M,</span> <span class="hljs-attr">Name:</span> <span class="hljs-string">é”€å”®é¢,</span> <span class="hljs-attr">dtype:</span> <span class="hljs-string">int64</span>

<span class="hljs-string">===</span> <span class="hljs-string">é”€å”®å‘˜ä¸šç»©æ’å</span> <span class="hljs-string">===</span>
<span class="hljs-string">é”€å”®å‘˜</span>
<span class="hljs-string">å¼ ä¸‰</span>    <span class="hljs-number">98000</span>
<span class="hljs-string">æå››</span>    <span class="hljs-number">92000</span>
<span class="hljs-string">ç‹äº”</span>    <span class="hljs-number">70000</span>
<span class="hljs-attr">Name:</span> <span class="hljs-string">é”€å”®é¢,</span> <span class="hljs-attr">dtype:</span> <span class="hljs-string">int64</span>

<span class="hljs-string">æœ€ä½³é”€å”®å‘˜æ˜¯ï¼šå¼ ä¸‰ï¼Œæ€»é”€å”®é¢ï¼š98,000</span>
</code></pre>
<h3 data-id="heading-13">ç»“æœåˆ†æ</h3>
<p>é€šè¿‡è¿™ä¸ªå®æˆ˜æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å®Œæˆäº†ï¼š</p>
<ol>
<li><strong>æ•°æ®åˆ›å»ºä¸æŸ¥çœ‹</strong>ï¼šä½¿ç”¨å­—å…¸åˆ›å»º DataFrameï¼Œç”¨ <code>head()</code> å¿«é€Ÿé¢„è§ˆ</li>
<li><strong>ç»Ÿè®¡åˆ†æ</strong>ï¼šç”¨ <code>describe()</code> è·å¾—é”€å”®é¢çš„å…¨é¢ç»Ÿè®¡ï¼ˆå‡å€¼ã€æœ€å€¼ã€æ ‡å‡†å·®ç­‰ï¼‰</li>
<li><strong>æ•°æ®ç­›é€‰</strong>ï¼šç”¨å¸ƒå°”ç´¢å¼• <code>df['é”€å”®é¢'] &gt; 20000</code> ç­›é€‰é«˜ä»·å€¼è®¢å•</li>
<li><strong>æ—¶é—´åºåˆ—å¤„ç†</strong>ï¼šç”¨ <code>dt.to_period('M')</code> æå–æœˆä»½</li>
<li><strong>åˆ†ç»„èšåˆ</strong>ï¼šç”¨ <code>groupby()</code> + <code>sum()</code> æŒ‰æœˆä»½å’Œé”€å”®å‘˜ç»Ÿè®¡</li>
<li><strong>æ•°æ®æ’åº</strong>ï¼šç”¨ <code>sort_values()</code> æ‰¾å‡ºä¸šç»©æœ€å¥½çš„é”€å”®å‘˜</li>
</ol>
<p>è¿™ä¸ªé¡¹ç›®æ¶µç›–äº† Pandas æœ€æ ¸å¿ƒçš„æ“ä½œæµç¨‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ç”¨ç®€æ´çš„ä»£ç å®Œæˆå¤æ‚çš„æ•°æ®åˆ†æä»»åŠ¡ã€‚</p>
<h2 data-id="heading-14">5. æœ€ä½³å®è·µä¸å¸¸è§é™·é˜±</h2>
<h3 data-id="heading-15">å¸¸è§é”™è¯¯åŠè§„é¿æ–¹æ³•</h3>
<p><strong>é”™è¯¯ 1ï¼šé“¾å¼èµ‹å€¼å¯¼è‡´ SettingWithCopyWarning</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯åšæ³•</span>
df[df[<span class="hljs-string">'å¹´é¾„'</span>] &gt; <span class="hljs-number">30</span>][<span class="hljs-string">'è–ªèµ„'</span>] = <span class="hljs-number">0</span>  <span class="hljs-comment"># å¯èƒ½æŠ¥è­¦å‘Šï¼Œä¸”ä¸ä¼šç”Ÿæ•ˆ</span>

<span class="hljs-comment"># âœ… æ­£ç¡®åšæ³•</span>
df.loc[df[<span class="hljs-string">'å¹´é¾„'</span>] &gt; <span class="hljs-number">30</span>, <span class="hljs-string">'è–ªèµ„'</span>] = <span class="hljs-number">0</span>  <span class="hljs-comment"># ä½¿ç”¨ loc ç›´æ¥ä¿®æ”¹</span>
</code></pre>
<p><strong>é”™è¯¯ 2ï¼šæ··æ·† iloc å’Œ loc</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯åšæ³•</span>
df[<span class="hljs-number">0</span>:<span class="hljs-number">3</span>, <span class="hljs-string">'å§“å'</span>]  <span class="hljs-comment"># è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½åŒæ—¶ç”¨ä½ç½®å’Œæ ‡ç­¾</span>

<span class="hljs-comment"># âœ… æ­£ç¡®åšæ³•</span>
df.iloc[<span class="hljs-number">0</span>:<span class="hljs-number">3</span>][<span class="hljs-string">'å§“å'</span>]  <span class="hljs-comment"># æŒ‰ä½ç½®é€‰æ‹©</span>
df.loc[<span class="hljs-number">0</span>:<span class="hljs-number">2</span>, <span class="hljs-string">'å§“å'</span>]    <span class="hljs-comment"># æŒ‰æ ‡ç­¾é€‰æ‹©</span>
</code></pre>
<p><strong>é”™è¯¯ 3ï¼šå¿˜è®°å¤„ç†ç¼ºå¤±å€¼</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯åšæ³•</span>
df[<span class="hljs-string">'å¹´é¾„'</span>].mean()  <span class="hljs-comment"># å¦‚æœæœ‰ NaNï¼Œç»“æœä¹Ÿæ˜¯ NaN</span>

<span class="hljs-comment"># âœ… æ­£ç¡®åšæ³•</span>
df[<span class="hljs-string">'å¹´é¾„'</span>].fillna(<span class="hljs-number">0</span>).mean()  <span class="hljs-comment"># å…ˆå¡«å……å†è®¡ç®—</span>
<span class="hljs-comment"># æˆ–</span>
df[<span class="hljs-string">'å¹´é¾„'</span>].mean(skipna=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># è·³è¿‡ç¼ºå¤±å€¼</span>
</code></pre>
<h3 data-id="heading-16">æœ€ä½³å®è·µå»ºè®®</h3>
<ol>
<li><strong>ä½¿ç”¨é«˜æ•ˆæ•°æ®ç±»å‹</strong>ï¼šå¯¹äºå¤§å‹æ•°æ®é›†ï¼Œå°†æ•´æ•°åˆ—ä» <code>int64</code> é™çº§ä¸º <code>int32</code> å¯èŠ‚çœ 50% å†…å­˜</li>
<li><strong>ä¼˜å…ˆä½¿ç”¨å‘é‡åŒ–æ“ä½œ</strong>ï¼šé¿å…ç”¨ <code>for</code> å¾ªç¯å¤„ç†æ•°æ®ï¼Œå‘é‡åŒ–æ“ä½œå¿« 10-100 å€</li>
<li><strong>åˆ†å—è¯»å–å¤§æ–‡ä»¶</strong>ï¼šå¤„ç†åƒä¸‡çº§æ•°æ®æ—¶ï¼Œç”¨ <code>read_csv(chunksize=100000)</code> åˆ†å—åŠ è½½</li>
<li><strong>æ˜¾å¼åˆ›å»ºå‰¯æœ¬</strong>ï¼šä¿®æ”¹ç­›é€‰åçš„æ•°æ®æ—¶ï¼Œç”¨ <code>copy()</code> é¿å…é“¾å¼èµ‹å€¼è­¦å‘Š</li>
<li><strong>ç»Ÿä¸€æ—¶é—´æ ¼å¼</strong>ï¼šæ—¥æœŸæ•°æ®å°½æ—©è½¬ä¸º <code>datetime</code> ç±»å‹ï¼Œä¾¿äºåç»­æ—¶é—´åºåˆ—åˆ†æ</li>
</ol>
<h2 data-id="heading-17">6. è¿›é˜¶æŒ‡å¼•</h2>
<p>Pandas çš„åŠŸèƒ½è¿œä¸æ­¢äºæ­¤ï¼ŒæŒæ¡åŸºç¡€åä½ å¯ä»¥ç»§ç»­æ¢ç´¢ï¼š</p>
<p><strong>é«˜çº§åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>æ—¶é—´åºåˆ—åˆ†æï¼šå¼ºå¤§çš„æ—¥æœŸå¤„ç†å’Œæ—¶é—´çª—å£æ“ä½œ</li>
<li>æ•°æ®é€è§†è¡¨ï¼š<code>pivot_table()</code> å®ç°å¤æ‚çš„æ•°æ®é‡ç»„</li>
<li>å¤šè¡¨åˆå¹¶ï¼š<code>merge()</code>ã€<code>join()</code>ã€<code>concat()</code> å®ç°ç±»ä¼¼ SQL çš„è¿æ¥æ“ä½œ</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼šä½¿ç”¨ <code>eval()</code>ã€<code>query()</code> åŠ é€Ÿå¤æ‚è®¡ç®—</li>
</ul>
<p><strong>ç”Ÿæ€æ‰©å±•</strong>ï¼š</p>
<ul>
<li><strong>æ•°æ®å¯è§†åŒ–</strong>ï¼šé›†æˆ Matplotlibã€Seaborn å¿«é€Ÿç»˜å›¾</li>
<li><strong>å¤§æ•°æ®å¤„ç†</strong>ï¼šDaskã€Modin æ‰©å±• Pandas å¤„ç†èƒ½åŠ›åˆ° TB çº§æ•°æ®</li>
<li><strong>æœºå™¨å­¦ä¹ </strong>ï¼šä¸ Scikit-learn æ— ç¼è¡”æ¥ï¼Œç”¨äºç‰¹å¾å·¥ç¨‹</li>
</ul>
<p><strong>å­¦ä¹ è·¯å¾„</strong>ï¼š</p>
<ol>
<li>æŒæ¡ Series/DataFrame åŸºç¡€æ“ä½œï¼ˆåˆ›å»ºã€é€‰æ‹©ã€ç­›é€‰ï¼‰</li>
<li>ç†Ÿç»ƒæ•°æ®æ¸…æ´—ï¼ˆç¼ºå¤±å€¼ã€é‡å¤å€¼ã€ç±»å‹è½¬æ¢ï¼‰</li>
<li>æ·±å…¥æ•°æ®èšåˆä¸åˆ†ç»„åˆ†æ</li>
<li>å­¦ä¹ æ—¶é—´åºåˆ—å’Œå¤šè¡¨åˆå¹¶</li>
<li>æ¢ç´¢æ€§èƒ½ä¼˜åŒ–å’Œé«˜çº§ç‰¹æ€§</li>
</ol>
<p><strong>æ¨èèµ„æº</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpandas.pydata.org%2Fdocs%2F" target="_blank" title="https://pandas.pydata.org/docs/" ref="nofollow noopener noreferrer">Pandas å®˜æ–¹æ–‡æ¡£</a>ï¼ˆæœ€æƒå¨çš„å‚è€ƒï¼‰</li>
<li>ã€ŠPython for Data Analysisã€‹by Wes McKinneyï¼ˆPandas åˆ›å§‹äººçš„ç»å…¸è‘—ä½œï¼‰</li>
<li>Kaggle Learn çš„ Pandas è¯¾ç¨‹ï¼ˆå…è´¹å®æˆ˜æ•™ç¨‹ï¼‰</li>
<li>å®æˆ˜é¡¹ç›®ï¼šä»çœŸå®æ•°æ®é›†ï¼ˆå¦‚æ³°å¦å°¼å…‹å·ã€æˆ¿ä»·é¢„æµ‹ï¼‰å¼€å§‹ç»ƒä¹ </li>
</ul>
<p>æŒæ¡ Pandas æ˜¯æ•°æ®åˆ†æå¸ˆçš„å¿…å¤‡æŠ€èƒ½ï¼Œå®ƒèƒ½è®©ä½ çš„æ•°æ®åˆ†æå·¥ä½œä»"æ‰‹å·¥æ“ä½œ"å‡çº§ä¸º"è‡ªåŠ¨åŒ–å¤„ç†"ï¼Œæ•ˆç‡æå‡ä½•æ­¢åå€ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å¼€å§‹æ‰“é€ ä½ çš„ç¬¬ä¸€ä¸ªAIæ™ºèƒ½ä½“ï¼ˆAgentï¼‰â€”â€”å°ç™½å…¥é—¨å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7601020578490581001</link>    <guid>https://juejin.cn/post/7601020578490581001</guid>    <pubDate>2026-01-31T07:17:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601020578490581001" data-draft-id="7601077764423254066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å¼€å§‹æ‰“é€ ä½ çš„ç¬¬ä¸€ä¸ªAIæ™ºèƒ½ä½“ï¼ˆAgentï¼‰â€”â€”å°ç™½å…¥é—¨å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-31T07:17:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é»„è¯„æµ‹"/> <meta itemprop="url" content="https://juejin.cn/user/714024404135696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å¼€å§‹æ‰“é€ ä½ çš„ç¬¬ä¸€ä¸ªAIæ™ºèƒ½ä½“ï¼ˆAgentï¼‰â€”â€”å°ç™½å…¥é—¨å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/714024404135696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é»„è¯„æµ‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:17:40.000Z" title="Sat Jan 31 2026 07:17:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨äººå·¥æ™ºèƒ½è¿…çŒ›å‘å±•çš„ä»Šå¤©ï¼Œ"Agent"ï¼ˆæ™ºèƒ½ä½“ï¼‰å·²æˆä¸ºAIå¼€å‘ä¸­çš„çƒ­é—¨æ¦‚å¿µã€‚æ— è®ºä½ æ˜¯ç¼–ç¨‹æ–°æ‰‹ï¼Œè¿˜æ˜¯åˆšæ¥è§¦AIé¢†åŸŸçš„çˆ±å¥½è€…ï¼Œäº²æ‰‹åˆ›å»ºä¸€ä¸ªå±äºè‡ªå·±çš„AIæ™ºèƒ½ä½“ï¼Œä¸ä»…èƒ½åŠ æ·±å¯¹AIå·¥ä½œåŸç†çš„ç†è§£ï¼Œè¿˜èƒ½ä¸ºåç»­æ·±å…¥å­¦ä¹ æ‰“ä¸‹åšå®åŸºç¡€ã€‚æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹å¸¦ä½ å®Œæˆä½ çš„ç¬¬ä¸€ä¸ªAI Agentç¤ºä¾‹ï¼Œå…¨ç¨‹ä½¿ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€ï¼Œæ— éœ€é«˜æ·±èƒŒæ™¯çŸ¥è¯†ã€‚</p>
<h3 data-id="heading-0">ä»€ä¹ˆæ˜¯AI Agentï¼Ÿ</h3>
<p>ç®€å•æ¥è¯´ï¼ŒAI Agent æ˜¯ä¸€ä¸ªèƒ½æ„ŸçŸ¥ç¯å¢ƒã€åšå‡ºå†³ç­–å¹¶æ‰§è¡ŒåŠ¨ä½œçš„ç¨‹åºã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªèŠå¤©æœºå™¨äººã€ä¸€ä¸ªè‡ªåŠ¨è®¢ç¥¨åŠ©æ‰‹ï¼Œç”šè‡³æ˜¯ä¸€ä¸ªèƒ½ç©æ£‹ç±»æ¸¸æˆçš„AIå¯¹æ‰‹ã€‚æ ¸å¿ƒè¦ç´ åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æ„ŸçŸ¥ï¼ˆPerceptionï¼‰</strong> ï¼šæ¥æ”¶å¤–éƒ¨è¾“å…¥ï¼ˆå¦‚ç”¨æˆ·é—®é¢˜ã€ä¼ æ„Ÿå™¨æ•°æ®ç­‰ï¼‰</li>
<li><strong>æ€è€ƒï¼ˆReasoningï¼‰</strong> ï¼šåŸºäºè§„åˆ™æˆ–æ¨¡å‹å¤„ç†ä¿¡æ¯</li>
<li><strong>è¡ŒåŠ¨ï¼ˆActionï¼‰</strong> ï¼šè¾“å‡ºå“åº”æˆ–æ‰§è¡Œæ“ä½œ</li>
</ul>
<h3 data-id="heading-1">å¼€å‘ç¯å¢ƒå‡†å¤‡</h3>
<p>æˆ‘ä»¬ä½¿ç”¨ Python ä½œä¸ºå¼€å‘è¯­è¨€ï¼Œå› ä¸ºå®ƒæ‹¥æœ‰ä¸°å¯Œçš„AIç”Ÿæ€åº“ï¼Œä¸”è¯­æ³•ç®€æ´ã€‚ä½ éœ€è¦å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š</p>
<pre><code class="hljs">pip install langchain openai python-dotenv
</code></pre>
<blockquote>
<p>æ³¨ï¼šå¦‚æœä½ æ²¡æœ‰ OpenAI API Keyï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¼€æºæ¨¡å‹ï¼ˆå¦‚ Ollama + Llama3ï¼‰æ›¿ä»£ï¼Œæœ¬æ–‡ä»¥ OpenAI ä¸ºä¾‹ã€‚</p>
</blockquote>
<p>åŒæ—¶ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.env</code> æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API å¯†é’¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">OPENAI_API_KEY</span>=your-api-key-here
</code></pre>
<h3 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šå®šä¹‰å·¥å…·ï¼ˆToolsï¼‰</h3>
<p>Agent çš„èƒ½åŠ›å¾€å¾€ä¾èµ–äºâ€œå·¥å…·â€ã€‚æ¯”å¦‚ï¼Œå®ƒå¯ä»¥è°ƒç”¨è®¡ç®—å™¨ã€æœç´¢ç½‘é¡µæˆ–æŸ¥è¯¢æ•°æ®åº“ã€‚æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç®€å•çš„â€œå›å£°â€å·¥å…·ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> Tool

<span class="hljs-keyword">def</span> <span class="hljs-title function_">echo_tool</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"ä½ è¯´äº†ï¼š<span class="hljs-subst">{query}</span>"</span>

tools = [
    Tool(
        name=<span class="hljs-string">"Echo"</span>,
        func=echo_tool,
        description=<span class="hljs-string">"é‡å¤ç”¨æˆ·è¾“å…¥çš„å†…å®¹"</span>
    )
]
</code></pre>
<h3 data-id="heading-3">ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰</h3>
<p>æˆ‘ä»¬ä½¿ç”¨ OpenAI çš„ GPT æ¨¡å‹ä½œä¸º Agent çš„â€œå¤§è„‘â€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> <span class="hljs-title class_">ChatOpenAI</span>
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv
<span class="hljs-keyword">import</span> os

<span class="hljs-title function_">load_dotenv</span>()
llm = <span class="hljs-title class_">ChatOpenAI</span>(model=<span class="hljs-string">"gpt-3.5-turbo"</span>, temperature=<span class="hljs-number">0</span>)
</code></pre>
<h3 data-id="heading-4">ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºå¹¶è¿è¡Œ Agent</h3>
<p>ä½¿ç”¨ LangChain æä¾›çš„ <code>create_react_agent</code> å¿«é€Ÿæ„å»ºä¸€ä¸ª ReActï¼ˆReason + Actï¼‰é£æ ¼çš„æ™ºèƒ½ä½“ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from langchain import hub
from langchain.agents import create_react_agent, AgentExecutor

<span class="hljs-comment"># è·å–é¢„è®¾çš„ prompt æ¨¡æ¿</span>
<span class="hljs-attr">prompt</span> = hub.pull(<span class="hljs-string">"hwchase17/react"</span>)

<span class="hljs-comment"># åˆ›å»º Agent</span>
<span class="hljs-attr">agent</span> = create_react_agent(llm, tools, prompt)

<span class="hljs-comment"># åˆ›å»ºæ‰§è¡Œå™¨</span>
<span class="hljs-attr">agent_executor</span> = AgentExecutor(agent=agent, tools=tools, verbose=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># è¿è¡Œï¼</span>
<span class="hljs-attr">response</span> = agent_executor.invoke({<span class="hljs-string">"input"</span>: <span class="hljs-string">"ä½ å¥½ï¼Œè¯·é‡å¤æˆ‘è¯´çš„è¯ï¼šä»Šå¤©å¤©æ°”çœŸå¥½ï¼"</span>})
print(response<span class="hljs-section">["output"]</span>)
</code></pre>
<p>è¿è¡Œåï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs">ä½ è¯´äº†ï¼šä»Šå¤©å¤©æ°”çœŸå¥½ï¼
</code></pre>
<p>æ­å–œï¼ä½ åˆšåˆšåˆ›å»ºäº†ä¸€ä¸ªå…·å¤‡åŸºæœ¬æ„ŸçŸ¥-æ€è€ƒ-è¡ŒåŠ¨èƒ½åŠ›çš„AI Agentï¼</p>
<h3 data-id="heading-5">æ‰©å±•æ€è·¯</h3>
<p>è¿™ä¸ªç¤ºä¾‹è™½ç„¶ç®€å•ï¼Œä½†å·²å…·å¤‡Agentçš„æ ¸å¿ƒç»“æ„ã€‚ä½ å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šï¼š</p>
<ul>
<li>æ·»åŠ æ›´å¤šå·¥å…·ï¼ˆå¦‚å¤©æ°”æŸ¥è¯¢ã€æ•°å­¦è®¡ç®—ï¼‰</li>
<li>æ¥å…¥æœ¬åœ°çŸ¥è¯†åº“å®ç°é—®ç­”</li>
<li>éƒ¨ç½²ä¸º Web åº”ç”¨ï¼ˆä½¿ç”¨ Flask æˆ– FastAPIï¼‰</li>
<li>ä½¿ç”¨è®°å¿†æ¨¡å—è®© Agent è®°ä½å¯¹è¯å†å²</li>
</ul>
<h3 data-id="heading-6">ç»“è¯­</h3>
<p>AI Agent å¹¶éé¥ä¸å¯åŠçš„é»‘ç§‘æŠ€ï¼Œè€Œæ˜¯ä¸€å¥—æ¸…æ™°å¯æ„å»ºçš„ç³»ç»Ÿã€‚é€šè¿‡è¿™ä¸ªâ€œHello Worldâ€çº§åˆ«çš„ç¤ºä¾‹ï¼Œå¸Œæœ›ä½ èƒ½è¿ˆå‡ºAIå¼€å‘çš„ç¬¬ä¸€æ­¥ã€‚è®°ä½ï¼šæ¯ä¸€ä¸ªå¤æ‚çš„æ™ºèƒ½ç³»ç»Ÿï¼Œéƒ½å§‹äºä¸€è¡Œç®€å•çš„ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SQLclï¼šä¸åªæ˜¯ SQL*Plus çš„å‡çº§ç‰ˆï¼Œæ›´æ˜¯ AI æ—¶ä»£æ•°æ®åº“å¼€å‘çš„æ™ºèƒ½è¿æ¥å™¨]]></title>    <link>https://juejin.cn/post/7600982613654913074</link>    <guid>https://juejin.cn/post/7600982613654913074</guid>    <pubDate>2026-01-31T07:23:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600982613654913074" data-draft-id="7601020578490695689" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SQLclï¼šä¸åªæ˜¯ SQL*Plus çš„å‡çº§ç‰ˆï¼Œæ›´æ˜¯ AI æ—¶ä»£æ•°æ®åº“å¼€å‘çš„æ™ºèƒ½è¿æ¥å™¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-31T07:23:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é»„è¯„æµ‹"/> <meta itemprop="url" content="https://juejin.cn/user/714024404135696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SQLclï¼šä¸åªæ˜¯ SQL*Plus çš„å‡çº§ç‰ˆï¼Œæ›´æ˜¯ AI æ—¶ä»£æ•°æ®åº“å¼€å‘çš„æ™ºèƒ½è¿æ¥å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/714024404135696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é»„è¯„æµ‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:23:23.000Z" title="Sat Jan 31 2026 07:23:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Oracle æ•°æ®åº“å·¥å…·æ¼”è¿›å²ä¸Šï¼ŒSQL<em>Plus æ›¾æ˜¯æ— æ•° DBA å’Œå¼€å‘è€…çš„â€œè€æˆ˜å‹â€â€”â€”ç®€æ´ã€ç¨³å®šã€æ— ä¾èµ–ã€‚ä½†éšç€ AI ä¸äº‘åŸç”Ÿæ—¶ä»£çš„åˆ°æ¥ï¼Œå‘½ä»¤è¡Œå·¥å…·ä¹Ÿéœ€è¦è¿›åŒ–ã€‚Oracle æ¨å‡ºçš„ <strong>SQLcl</strong>ï¼ˆSQL Developer Command Lineï¼‰ä¸ä»…å…¨é¢å…¼å®¹ SQL</em>Plus è¯­æ³•ï¼Œæ›´ä»¥ç°ä»£åŒ–äº¤äº’ã€è„šæœ¬æ‰©å±•èƒ½åŠ›å’ŒåŸç”Ÿ AI é›†æˆï¼Œé‡æ–°å®šä¹‰äº†æ•°æ®åº“å‘½ä»¤è¡Œä½“éªŒã€‚</p>
<p>å®ƒä¸å†åªæ˜¯ä¸€ä¸ªæŸ¥è¯¢ç»ˆç«¯ï¼Œè€Œæ˜¯è¿æ¥å¼€å‘è€…ã€æ•°æ®åº“ä¸ç”Ÿæˆå¼ AI çš„<strong>æ™ºèƒ½æ¡¥æ¢</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€ä» SQL*Plus åˆ° SQLclï¼šä¸æ­¢æ˜¯â€œæ›´å¥½çœ‹â€</h3>
<p>SQLcl å»¶ç»­äº† SQL*Plus çš„è½»é‡ä¸è·¨å¹³å°ç‰¹æ€§ï¼ˆåŸºäº Javaï¼Œæ”¯æŒ Windows/Linux/macOSï¼‰ï¼Œä½†åœ¨ç”¨æˆ·ä½“éªŒä¸Šå®ç°äº†è´¨çš„é£è·ƒï¼š</p>
<ul>
<li>âœ… <strong>è¯­æ³•é«˜äº®ä¸è‡ªåŠ¨è¡¥å…¨</strong>ï¼šè¾“å…¥ <code>SELECT * FROM emp</code> æ—¶ï¼Œè¡¨åã€åˆ—åè‡ªåŠ¨æç¤º</li>
<li>âœ… <strong>å¤šè¡Œç¼–è¾‘ä¸å†å²å›æº¯</strong>ï¼šåƒç°ä»£ Shell ä¸€æ ·æµç•…ç¼–è¾‘å¤æ‚è¯­å¥</li>
<li>âœ… <strong>å†…ç½® RESTã€JSONã€CSV æ”¯æŒ</strong>ï¼šç›´æ¥å¯¼å‡ºä¸ºç»“æ„åŒ–æ ¼å¼ï¼Œæ— éœ€é¢å¤–è„šæœ¬</li>
<li>âœ… <strong>è„šæœ¬è¯­è¨€æ”¯æŒ JavaScript / TypeScript</strong>ï¼šç”¨ JS ç¼–å†™æ•°æ®åº“è‡ªåŠ¨åŒ–ä»»åŠ¡</li>
</ul>
<p>ä¾‹å¦‚ï¼Œç”¨ JavaScript è„šæœ¬ä¸€é”®ç”Ÿæˆè¡¨ç»“æ„æ–‡æ¡£ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">// table_info.js
var tables = db.<span class="hljs-built_in">execute</span>(<span class="hljs-string">"SELECT table_name FROM user_tables"</span>);
tables.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(row)</span></span> {
    console.<span class="hljs-built_in">log</span>(<span class="hljs-string">"=== "</span> + row[<span class="hljs-number">0</span>] + <span class="hljs-string">" ==="</span>);
    db.<span class="hljs-built_in">execute</span>(<span class="hljs-string">"DESC "</span> + row[<span class="hljs-number">0</span>]).<span class="hljs-built_in">print</span>();
});
</code></pre>
<p>è¿è¡Œï¼š<code>sql /nolog @table_info.js</code></p>
<p>è¿™ç§çµæ´»æ€§è®© SQLcl æˆä¸º DevOps å’Œæ•°æ®å·¥ç¨‹æµæ°´çº¿çš„ç†æƒ³ç»„ä»¶ã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒã€AI æ—¶ä»£çš„å…¨æ–°è§’è‰²ï¼šSQLcl Ã— Oracle AI</h3>
<p>çœŸæ­£è®© SQLcl è„±é¢–è€Œå‡ºçš„ï¼Œæ˜¯å®ƒä¸ <strong>Oracle Cloud Infrastructureï¼ˆOCIï¼‰Generative AI æœåŠ¡</strong>çš„æ·±åº¦é›†æˆã€‚ä» v23.4 å¼€å§‹ï¼ŒSQLcl å†…ç½®äº† <code>AI</code> å‘½ä»¤ï¼Œè®©ä½ åœ¨å‘½ä»¤è¡Œä¸­ç›´æ¥è°ƒç”¨å¤§æ¨¡å‹ï¼</p>
<h4 data-id="heading-2">åœºæ™¯1ï¼šè‡ªç„¶è¯­è¨€ç”Ÿæˆ SQL</h4>
<p>ä¸ä¼šå†™å¤æ‚æŸ¥è¯¢ï¼Ÿç›´æ¥é—® AIï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">SQL&gt; </span><span class="bash">AI <span class="hljs-string">"åˆ—å‡ºè¿‡å»30å¤©é”€å”®é¢æœ€é«˜çš„5ä¸ªå®¢æˆ·ï¼ŒåŒ…æ‹¬å®¢æˆ·åå’Œæ€»é‡‘é¢"</span></span>
</code></pre>
<p>SQLcl ä¼šè°ƒç”¨ OCI ä¸Šçš„ Llama æˆ– Cohere æ¨¡å‹ï¼Œè¿”å›å¯æ‰§è¡Œçš„ SQL è¯­å¥ï¼Œå¹¶è¯¢é—®æ˜¯å¦ç«‹å³è¿è¡Œã€‚</p>
<h4 data-id="heading-3">åœºæ™¯2ï¼šè§£é‡Šæ‰§è¡Œè®¡åˆ’</h4>
<p>çœ‹ä¸æ‡‚ <code>EXPLAIN PLAN</code> çš„è¾“å‡ºï¼Ÿè®© AI å¸®ä½ è§£è¯»ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> EXPLAIN PLAN <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'SHIPPED'</span>;
<span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> AI EXPLAIN
</code></pre>
<p>AI ä¼šç”¨é€šä¿—è¯­è¨€è¯´æ˜ï¼šâ€œè¯¥æŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼• IDX_ORD_STATUSï¼Œé¢„è®¡è¿”å›çº¦12ä¸‡è¡Œâ€¦â€¦â€</p>
<h4 data-id="heading-4">åœºæ™¯3ï¼šè‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æ•°æ®æˆ–ä¿®å¤å»ºè®®</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">SQL&gt; </span><span class="bash">AI <span class="hljs-string">"ä¸º employees è¡¨ç”Ÿæˆ10æ¡ç¬¦åˆ HR è§„åˆ™çš„æµ‹è¯•æ•°æ®"</span></span>
<span class="hljs-meta prompt_">SQL&gt; </span><span class="bash">AI <span class="hljs-string">"ä¸ºä»€ä¹ˆè¿™ä¸ª INSERT æŠ¥ ORA-02291ï¼Ÿè¯·ç»™å‡ºè§£å†³æ–¹æ¡ˆ"</span></span>
</code></pre>
<p>æ‰€æœ‰ AI äº¤äº’å‡é€šè¿‡ä¼ä¸šçº§ OCI æœåŠ¡å®Œæˆï¼Œ<strong>æ•°æ®ä¸ç»è¿‡å…¬æœ‰å¤§æ¨¡å‹</strong>ï¼Œä¿éšœå®‰å…¨åˆè§„ã€‚</p>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€ä¸ºä»€ä¹ˆ SQLcl æ˜¯ AI æ—¶ä»£çš„â€œè¿æ¥å™¨â€ï¼Ÿ</h3>



































<table><thead><tr><th>èƒ½åŠ›</th><th>ä¼ ç»Ÿå·¥å…·ï¼ˆå¦‚ SQL*Plusï¼‰</th><th>SQLcl</th></tr></thead><tbody><tr><td>äº¤äº’ä½“éªŒ</td><td>çº¯æ–‡æœ¬ï¼Œæ— æç¤º</td><td>æ™ºèƒ½è¡¥å…¨ã€è¯­æ³•é«˜äº®</td></tr><tr><td>è„šæœ¬èƒ½åŠ›</td><td>ä»… PL/SQL æˆ– Shell</td><td>æ”¯æŒ JavaScript/TypeScript</td></tr><tr><td>æ•°æ®æ ¼å¼</td><td>ä»…æ–‡æœ¬è¡¨æ ¼</td><td>åŸç”Ÿæ”¯æŒ JSON/CSV/XML</td></tr><tr><td>AI é›†æˆ</td><td>æ— </td><td>å†…ç½® <code>AI</code> å‘½ä»¤ï¼Œç›´è¿ OCI GenAI</td></tr><tr><td>å®‰å…¨æ€§</td><td>æœ¬åœ°è¿è¡Œ</td><td>æ”¯æŒ Walletã€OCI Authã€Vault é›†æˆ</td></tr></tbody></table>
<p>æ›´é‡è¦çš„æ˜¯ï¼ŒSQLcl <strong>æ— ç¼èå…¥ç°æœ‰å·¥ä½œæµ</strong>ã€‚ä½ æ— éœ€æ”¾å¼ƒç†Ÿæ‚‰çš„ <code>/</code> æ‰§è¡Œã€<code>@script.sql</code> è°ƒç”¨ç­‰ä¹ æƒ¯ï¼Œå°±èƒ½è·å¾— AI å¢å¼ºèƒ½åŠ›ã€‚</p>
<hr/>
<h3 data-id="heading-6">å››ã€å¿«é€Ÿä¸Šæ‰‹ï¼šä¸‰æ­¥å¯ç”¨ AI åŠŸèƒ½</h3>
<ol>
<li>
<p><strong>å®‰è£… SQLcl</strong>ï¼ˆéœ€ 23.4+ï¼‰<br/>
ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oracle.com%2Fdatabase%2Ftechnologies%2Fappdev%2Fsqlcl.html" target="_blank" title="https://www.oracle.com/database/technologies/appdev/sqlcl.html" ref="nofollow noopener noreferrer">Oracle å®˜ç½‘</a> ä¸‹è½½</p>
</li>
<li>
<p><strong>é…ç½® OCI å‡­æ®</strong><br/>
è®¾ç½®ç¯å¢ƒå˜é‡æˆ–ä½¿ç”¨ <code>oci setup config</code> ç”Ÿæˆé…ç½®æ–‡ä»¶</p>
</li>
<li>
<p><strong>åœ¨ SQLcl ä¸­å¯ç”¨ AI</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SET</span> AI <span class="hljs-keyword">ON</span>
<span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> AI "æ˜¾ç¤ºå½“å‰ç”¨æˆ·æœ‰å“ªäº›è¡¨"
</code></pre>
</li>
</ol>
<p>é¦–æ¬¡ä½¿ç”¨ä¼šå¼•å¯¼ä½ é€‰æ‹©æ¨¡å‹ï¼ˆå¦‚ <code>meta/llama-3-70b-instruct</code>ï¼‰å’ŒåŒºåŸŸã€‚</p>
<hr/>
<h3 data-id="heading-7">ç»“è¯­ï¼šå‘½ä»¤è¡Œä»æœªå¦‚æ­¤æ™ºèƒ½</h3>
<p>SQLcl çš„ä½¿å‘½ï¼Œä¸åªæ˜¯å–ä»£ SQL*Plusï¼Œè€Œæ˜¯æˆä¸º <strong>AI åŸç”Ÿæ•°æ®åº“å¼€å‘çš„æ–°å…¥å£</strong>ã€‚å®ƒè®© DBA ä»â€œè®°å¿†è¯­æ³•â€è½¬å‘â€œæè¿°æ„å›¾â€ï¼Œè®©å¼€å‘è€…ç”¨è‡ªç„¶è¯­è¨€ä¸æ•°æ®åº“å¯¹è¯ï¼ŒåŒæ—¶åšå®ˆä¼ä¸šå¯¹å®‰å…¨ã€å¯æ§å’Œæ•ˆç‡çš„è¦æ±‚ã€‚</p>
<p>åœ¨è¿™ä¸ª AI é‡æ„ä¸€åˆ‡çš„æ—¶ä»£ï¼Œæœ€å¼ºå¤§çš„å·¥å…·å¾€å¾€ä¸æ˜¯æœ€ç‚«çš„ GUIï¼Œè€Œæ˜¯é‚£ä¸ªä½ æ¯å¤©éƒ½åœ¨ç”¨ã€å´æ‚„ç„¶è¿›åŒ–äº†çš„å‘½ä»¤è¡Œâ€”â€”<br/>
<strong>SQLclï¼Œæ­£ç«™åœ¨è¿™ä¸ªè½¬æŠ˜ç‚¹ä¸Š</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡ææ‡‚Pythonè£…é¥°å™¨]]></title>    <link>https://juejin.cn/post/7601000638344953871</link>    <guid>https://juejin.cn/post/7601000638344953871</guid>    <pubDate>2026-01-31T07:40:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601000638344953871" data-draft-id="7601077290680877108" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡ææ‡‚Pythonè£…é¥°å™¨"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-31T07:40:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Kevin666"/> <meta itemprop="url" content="https://juejin.cn/user/1549628692501449"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡ææ‡‚Pythonè£…é¥°å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1549628692501449/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Kevin666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:40:03.000Z" title="Sat Jan 31 2026 07:40:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F12722799041" target="_blank" title="https://zhuanlan.zhihu.com/p/12722799041" ref="nofollow noopener noreferrer">zhuanlan.zhihu.com/p/127227990â€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D251567592%26content_type%3DArticle%26match_order%3D1%26q%3DPython%25E8%25A3%2585%25E9%25A5%25B0%25E5%2599%25A8%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=251567592&amp;content_type=Article&amp;match_order=1&amp;q=Python%E8%A3%85%E9%A5%B0%E5%99%A8&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Pythonè£…é¥°å™¨</a>æ˜¯ä¸€ä¸ªç›¸å¯¹éš¾ä»¥ç†è§£çš„æ¦‚å¿µï¼ŒUpåœ¨åˆæ¬¡æ¥è§¦æ—¶ä¹Ÿè§‰å¾—æ™¦æ¶©ã€‚æœ¬æ–‡å°½å¯èƒ½ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€å’Œä¾‹å­ï¼Œè§£é‡Šæ¸…æ¥šPythonè£…é¥°å™¨ã€‚</p>
<h3 data-id="heading-0">æå‰åˆ’é‡ç‚¹</h3>
<ul>
<li>è£…é¥°å™¨ä¸ºä»€ä¹ˆéš¾ç†è§£</li>
<li>å…ˆææ‡‚é—­åŒ…</li>
<li>è£…é¥°å™¨å°±æ˜¯ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D251567592%26content_type%3DArticle%26match_order%3D1%26q%3D%25E8%25AF%25AD%25E6%25B3%2595%25E7%25B3%2596%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=251567592&amp;content_type=Article&amp;match_order=1&amp;q=%E8%AF%AD%E6%B3%95%E7%B3%96&amp;zhida_source=entity" ref="nofollow noopener noreferrer">è¯­æ³•ç³–</a></li>
<li>è£…é¥°å™¨çš„åº”ç”¨åœºæ™¯</li>
</ul>
<h3 data-id="heading-1">è£…é¥°å™¨çš„ä¸ºä»€ä¹ˆéš¾ç†è§£</h3>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè¿™ä¸ªä¾‹å­é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè£…é¥°å™¨ï¼Œç”¨äºåœ¨greet()å‡½æ•°æ‰§è¡Œå‰åå„æ‰“å°ä¸€æ¡æ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªç®€å•çš„è£…é¥°å™¨</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_decorator</span>(<span class="hljs-params">func</span>):     <span class="hljs-comment"># ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°</span>
    <span class="hljs-comment"># åŒ…è£…åŸå§‹å‡½æ•°çš„å†…éƒ¨å‡½æ•°</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å³å°†æ‰§è¡Œå‡½æ•°..."</span>)
        func()                  <span class="hljs-comment"># æ‰§è¡ŒåŸå§‹å‡½æ•°</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å‡½æ•°æ‰§è¡Œå®Œæ¯•ã€‚"</span>)
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-comment"># ä½¿ç”¨è£…é¥°å™¨</span>
<span class="hljs-meta">@simple_decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½ å¥½ï¼"</span>)

<span class="hljs-comment"># è°ƒç”¨è¢«è£…é¥°çš„å‡½æ•°</span>
greet()

-------------------------
<span class="hljs-comment">## æ‰“å°</span>
å³å°†æ‰§è¡Œå‡½æ•°...
ä½ å¥½ï¼
å‡½æ•°æ‰§è¡Œå®Œæ¯•ã€‚
</code></pre>
<p>å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦è£…é¥°å™¨ï¼Œä½ ä¸€å®šè§‰å¾—è¿™ä¸ªè¿™ä¸ªè¯­æ³•å¾ˆéš¾ç†è§£</p>
<ul>
<li>å®šä¹‰è£…é¥°å™¨çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆsimple_decoratorå‡½æ•°é‡Œé¢ï¼Œå±…ç„¶è¿˜æœ‰ä¸€ä¸ªwrapperå†…éƒ¨å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›å€¼è¿˜æ˜¯è¿™ä¸ªwrapperå‡½æ•°ï¼Ÿï¼Ÿï¼Ÿ</li>
<li>greetå‡½æ•°ä¸Šé¢ä½¿ç”¨@simple_decoratoræ˜¯ä¸ªä»€ä¹ˆç”¨æ³•ï¼Ÿä»æ¥æ²¡è§è¿‡</li>
</ul>
<p>æ²¡å…³ç³»ï¼Œå¤§å®¶å¯ä»¥å…ˆå»ºç«‹ä¸€ä¸ªå°è±¡ï¼Œå¤§æ¦‚è¿™ä¸ªè£…é¥°å™¨æ˜¯æ€ä¹ˆç”¨çš„ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä¸€ä¸€æ‹†è§£ï¼Œ<strong>å¹¶æ²¡æœ‰é‚£ä¹ˆå¤æ‚ï¼</strong></p>
<h3 data-id="heading-2">å…ˆææ‡‚é—­åŒ…</h3>
<p>ç†è§£Pythonè£…é¥°å™¨çš„å‰ææ˜¯ï¼Œæˆ‘ä»¬å…ˆè¦ææ‡‚<strong>é—­åŒ…</strong>è¿™ä¸ªæ¦‚å¿µã€‚</p>
<p>é€šä¿—æ¥è¯´ï¼Œé—­åŒ…å°±æ˜¯<strong>å‡½æ•°</strong>åŠå…¶<strong>å‘¨è¾¹ç¯å¢ƒ</strong>çš„ç»„åˆã€‚ï¼ˆåœ¨<strong>æœ¬æ–‡è¯­å¢ƒä¸‹</strong>ï¼Œä½ å¯ä»¥æš‚æ—¶ç†è§£<strong>å‘¨è¾¹ç¯å¢ƒå°±æ˜¯ä¸€äº›å¤–éƒ¨çš„å˜é‡</strong>ï¼‰</p>
<p>é—­åŒ…é€šå¸¸æ¶‰åŠåˆ°ä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼Œå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®ï¼ˆæˆ–è€…è¯´â€˜è®°ä½â€™ï¼‰<strong>å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡</strong>ï¼Œ<strong>å³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•</strong>ã€‚</p>
<p>è¿™ä¹ˆè¯´å¯èƒ½è¿˜æ˜¯æœ‰ç‚¹æŠ½è±¡ï¼Œæˆ‘ä»¬å›åˆ°å¼€å¤´é‚£ä¸ªä¾‹å­ï¼Œwrapperå°±æ˜¯ä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼Œå½“æˆ‘ä»¬è°ƒç”¨simple_decorator(greet)ä¼šè¿”å›wrapperã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_decorator</span>(<span class="hljs-params">func</span>): <span class="hljs-comment"># ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å³å°†æ‰§è¡Œå‡½æ•°..."</span>)
        func()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å‡½æ•°æ‰§è¡Œå®Œæ¯•ã€‚"</span>)
    <span class="hljs-keyword">return</span> wrapper <span class="hljs-comment"># è¿”å›wrapper</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½ å¥½ï¼"</span>)

closure = simple_decorator(greet) <span class="hljs-comment"># simple_decorator(greet)ä¼šè¿”å›wrapperï¼Œè¿™å°±æ˜¯ä¸€ä¸ªé—­åŒ…å®ä¾‹</span>
</code></pre>
<p>è¿™ä¸ªclosureå°±æ˜¯ä¸€ä¸ªé—­åŒ…å®ä¾‹ï¼</p>
<p>æˆ‘ä»¬æ¥ç†è§£ä¸€ä¸‹ï¼Œé€šå¸¸æˆ‘ä»¬è§‰å¾—wrapperè¿™ç§å‡½æ•°å°±æ˜¯å®ƒå®šä¹‰çš„ä»£ç å—ï¼Œå¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">def <span class="hljs-built_in">wrapper</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å³å°†æ‰§è¡Œå‡½æ•°..."</span>)
    <span class="hljs-built_in">func</span>()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å‡½æ•°æ‰§è¡Œå®Œæ¯•ã€‚"</span>)
</code></pre>
<p>ä½†æ˜¯å½“wrapperä½œä¸ºå†…éƒ¨å‡½æ•°çš„æ—¶å€™ï¼Œè°ƒç”¨simple_decorator(greet)è¿”å›çš„wrapperæ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œé™¤äº†ä¸Šé¢å®šä¹‰çš„ä»£ç ï¼Œå®ƒè¿˜èƒ½<strong>è®°ä½å¤–å±‚å‡½æ•°çš„å˜é‡</strong>ï¼Œæ²¡é”™å°±æ˜¯funcå˜é‡ï¼Œå…·ä½“åˆ°è¿™æ¬¡è°ƒç”¨å°±æ˜¯æˆ‘ä»¬ä¼ å…¥çš„greetå‡½æ•°ã€‚<strong>å³ä½¿simple_decoratorå·²ç»æ‰§è¡Œå®Œäº†ï¼Œä¾ç„¶å¯ä»¥è®°ä½greetã€‚</strong> è¿™ä¸ªè®°ä½å¤–éƒ¨å˜é‡æ˜¯å¤§å®¶ä¸å¤ªç†Ÿæ‚‰çš„æˆ–è€…éš¾ä»¥ç†è§£çš„åŸå› ã€‚</p>
<p>æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬è°ƒç”¨closure()æ—¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">closure</span>()

-------
# æœ¬è´¨æ˜¯æ‰§è¡Œäº†ä»¥ä¸‹ä»£ç 
<span class="hljs-built_in">print</span>("å³å°†æ‰§è¡Œå‡½æ•°...")
<span class="hljs-built_in">greet</span>() # greetä¼šè¢«è®°ä½
<span class="hljs-built_in">print</span>("å‡½æ•°æ‰§è¡Œå®Œæ¯•ã€‚")

-------
## æ‰“å°
å³å°†æ‰§è¡Œå‡½æ•°...
ä½ å¥½ï¼
å‡½æ•°æ‰§è¡Œå®Œæ¯•ã€‚
</code></pre>
<h3 data-id="heading-3">è£…é¥°å™¨å°±æ˜¯ä¸€ä¸ªè¯­æ³•ç³–</h3>
<p>ä¸‹é¢æˆ‘ä»¬å†è¯´è¯´ï¼Œ@simple_decorator</p>
<p>é€šè¿‡ä¸Šé¢çš„åˆ†æç›¸ä¿¡å¤§å®¶å·²ç»çœ‹å‡ºæ¥äº†ï¼Œè¿™ä¸¤ç§å†™æ³•è²Œä¼¼æ˜¯ç­‰æ•ˆçš„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å†™æ³•ä¸€</span>
<span class="hljs-meta">@simple_decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½ å¥½ï¼"</span>)

greet() <span class="hljs-comment"># è°ƒç”¨greet</span>

<span class="hljs-comment"># å†™æ³•äºŒ</span>
closure = simple_decorator(greet)
closure() <span class="hljs-comment"># è°ƒç”¨closure</span>
</code></pre>
<p>æˆ‘ä»¬å†è¿›ä¸€æ­¥ï¼Œå…¶å®å†™æ³•äºŒæ²¡å¿…è¦å¼•å…¥ä¸€ä¸ªæ–°çš„å˜é‡closureï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å¤ç”¨greetã€‚</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å†™æ³•ä¸‰</span>
greet = simple_decorator(greet)
greet() # greet
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment"># greetæœ¬èº«æŒ‡å‘è‡ªå·±å®šä¹‰çš„ä»£ç </span></span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment"># simple_decorator(greet) è¿”å›wrapperï¼Œè¿™æ˜¯ä¸€ä¸ªé—­åŒ…</span></span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment"># ç›´æ¥è®©greetæŒ‡å‘æ–°çš„é—­åŒ…</span></span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment"># è¿™æ ·è°ƒç”¨greet()çš„æ—¶å€™ï¼Œç›¸å½“äºè°ƒç”¨çš„æ˜¯é—­åŒ…</span></span>
</code></pre>
<p>æˆ‘ä»¬æŠ½è±¡ä¸€ç‚¹ï¼Œ@è¿™ä¸ªç”¨æ³•æœ¬è´¨å°±æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œè®©ç¨‹åºå‘˜å†™ä»£ç æ›´æ–¹ä¾¿çš„ä¸€ç§å†™æ³•è€Œå·²ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">@decorator
def <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>:
    ...

<span class="hljs-comment">------------   </span>
æœ¬è´¨ä¸Šå°±æ˜¯
<span class="hljs-function"><span class="hljs-keyword">function</span> = <span class="hljs-title">decorator</span><span class="hljs-params">(function)</span></span>
</code></pre>
<h3 data-id="heading-4">è£…é¥°å™¨çš„åº”ç”¨åœºæ™¯</h3>
<p>é€šè¿‡ä¸Šè¿°åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè£…é¥°å™¨ä¼¼ä¹æä¾›äº†<strong>ä¸€ç§åŠ¨æ€ä¿®æ”¹æˆ–è€…è¯´åŠ å¼ºå‡½æ•°çš„èƒ½åŠ›</strong>ï¼Œé€šè¿‡ä½¿ç”¨è£…é¥°å™¨ï¼Œä½ å¯ä»¥åœ¨åŸå‡½æ•°çš„åŸºç¡€ä¸Šå¢åŠ ä¸€äº›é€»è¾‘ã€‚</p>
<p>é‚£è£…é¥°å™¨ä¸»è¦å¯ä»¥ç”¨åœ¨å“ªäº›åœºæ™¯å‘¢</p>
<ol>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D251567592%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%2597%25A5%25E5%25BF%2597%25E8%25AE%25B0%25E5%25BD%2595%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=251567592&amp;content_type=Article&amp;match_order=1&amp;q=%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ—¥å¿—è®°å½•</a></strong>ï¼šåœ¨å‡½æ•°æ‰§è¡Œå‰åè‡ªåŠ¨æ·»åŠ æ—¥å¿—è®°å½•ï¼Œæ–¹ä¾¿è°ƒè¯•å’Œç›‘æ§ç¨‹åºè¡Œä¸ºã€‚</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D251567592%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%2580%25A7%25E8%2583%25BD%25E6%25B5%258B%25E8%25AF%2595%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=251567592&amp;content_type=Article&amp;match_order=1&amp;q=%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ€§èƒ½æµ‹è¯•</a></strong>ï¼šè£…é¥°å™¨å¯ä»¥ç”¨æ¥æµ‹é‡å‡½æ•°çš„æ‰§è¡Œæ—¶é—´ï¼Œå¸®åŠ©è¯†åˆ«æ€§èƒ½ç“¶é¢ˆã€‚</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D251567592%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%259D%2583%25E9%2599%2590%25E9%25AA%258C%25E8%25AF%2581%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=251567592&amp;content_type=Article&amp;match_order=1&amp;q=%E6%9D%83%E9%99%90%E9%AA%8C%E8%AF%81&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æƒé™éªŒè¯</a></strong>ï¼šåœ¨Webå¼€å‘ä¸­ï¼Œè£…é¥°å™¨å¯ä»¥ç”¨äºæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æƒè®¿é—®æŸä¸ªèµ„æºæˆ–æ‰§è¡Œç‰¹å®šæ“ä½œã€‚</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D251567592%26content_type%3DArticle%26match_order%3D1%26q%3D%25E7%25BC%2593%25E5%25AD%2598%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=251567592&amp;content_type=Article&amp;match_order=1&amp;q=%E7%BC%93%E5%AD%98&amp;zhida_source=entity" ref="nofollow noopener noreferrer">ç¼“å­˜</a>ï¼ˆMemoizationï¼‰</strong> ï¼šé€šè¿‡è£…é¥°å™¨å®ç°å‡½æ•°ç»“æœçš„ç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—ç›¸åŒçš„è¾“å…¥å€¼ï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚</li>
</ol>
<p>ç­‰ç­‰ç­‰ç­‰..</p>
<p>å½“ä½ ä½¿ç”¨è£…é¥°å™¨å®ç°äº†è¿™äº›åŠŸèƒ½ï¼Œåªéœ€è¦ä½¿ç”¨@åœ¨æƒ³è¦å¢å¼ºçš„å‡½æ•°å‰é¢å£°æ˜ä¸€ä¸‹ï¼Œå¯ä»¥<strong>éå¸¸æ¸…æ™°çš„è¡¨ç¤ºä½ åœ¨æœ¬èº«å‡½æ•°ä¸šåŠ¡çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä»€ä¹ˆé€»è¾‘</strong>ã€‚å¦‚æœæ²¡æœ‰è£…é¥°å™¨ï¼Œä½ å¿…é¡»å†™åˆ°å‡½æ•°æœ¬èº«çš„ä»£ç é‡Œï¼Œè¿™ä¼šä¸åˆ©äºç†è§£å’Œå¤ç”¨ï¼Œè®©è¿™ç§å¢å¼ºé€»è¾‘å’Œæœ¬èº«ä¸šåŠ¡é€»è¾‘è€¦åˆã€‚æ‰€ä»¥è£…é¥°å™¨ï¼Œ<strong>ä¹Ÿå¯ä»¥ç†è§£æˆä¸€ç§ä¼˜é›…çš„è¯­æ³•ï¼Œå¸®åŠ©ç¨‹åºå˜å¾—æ¸…æ™°è§£è€¦ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨ HTML ä¸­å¼•å…¥ JavaScript æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿå®ƒä»¬å„è‡ªçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7601020578490679305</link>    <guid>https://juejin.cn/post/7601020578490679305</guid>    <pubDate>2026-01-31T07:22:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601020578490679305" data-draft-id="7601077764423335986" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨ HTML ä¸­å¼•å…¥ JavaScript æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿå®ƒä»¬å„è‡ªçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-31T07:22:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Smilezyl"/> <meta itemprop="url" content="https://juejin.cn/user/3438928103504088"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨ HTML ä¸­å¼•å…¥ JavaScript æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿå®ƒä»¬å„è‡ªçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3438928103504088/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Smilezyl
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:22:47.000Z" title="Sat Jan 31 2026 07:22:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœ¨ HTML ä¸­å¼•å…¥ JavaScript æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿå®ƒä»¬å„è‡ªçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-1">æ ¸å¿ƒç­”æ¡ˆ</h3>
<p>åœ¨ HTML ä¸­å¼•å…¥ JavaScript æœ‰ <strong>3 ç§ä¸»è¦æ–¹å¼</strong>ï¼š</p>

























<table><thead><tr><th>æ–¹å¼</th><th>è¯­æ³•</th><th>ä¸»è¦åœºæ™¯</th></tr></thead><tbody><tr><td><strong>1. è¡Œå†…å¼</strong></td><td><code>&lt;div onclick="alert('hi')"&gt;</code></td><td>æå°‘ä½¿ç”¨ï¼Œä¸æ¨è</td></tr><tr><td><strong>2. å†…åµŒå¼</strong></td><td><code>&lt;script&gt;alert('hi')&lt;/script&gt;</code></td><td>å°å‹è„šæœ¬ã€å•é¡µåº”ç”¨</td></tr><tr><td><strong>3. å¤–é“¾å¼</strong></td><td><code>&lt;script src="app.js"&gt;&lt;/script&gt;</code></td><td><strong>ç”Ÿäº§ç¯å¢ƒé¦–é€‰</strong></td></tr></tbody></table>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šç”Ÿäº§ç¯å¢ƒä¼˜å…ˆä½¿ç”¨å¤–é“¾å¼ï¼Œé…åˆ <code>defer</code> æˆ– <code>async</code> ä¼˜åŒ–åŠ è½½æ€§èƒ½ã€‚</p>
<hr/>
<h3 data-id="heading-2">æ·±å…¥è§£æ</h3>
<h4 data-id="heading-3">1. ä¸‰ç§æ–¹å¼è¯¦è§£</h4>
<h5 data-id="heading-4">æ–¹å¼ä¸€ï¼šè¡Œå†…å¼ï¼ˆInlineï¼‰</h5>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ç›´æ¥åœ¨ HTML å±æ€§ä¸­å†™ JS --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"alert('ç‚¹å‡»äº†ï¼')"</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">onmouseover</span>=<span class="hljs-string">"console.log('æ‚¬åœ')"</span>&gt;</span>é“¾æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å¿«é€Ÿæµ‹è¯•ã€ç®€å•ç›´è§‚</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>âŒ HTML å’Œ JS å¼ºè€¦åˆï¼Œéš¾ä»¥ç»´æŠ¤</li>
<li>âŒ æ— æ³•å¤ç”¨é€»è¾‘</li>
<li>âŒ ä»£ç æ··ä¹±ï¼Œå¯è¯»æ€§å·®</li>
<li>âŒ å­˜åœ¨ XSS å®‰å…¨é£é™©</li>
<li>âŒ æ— æ³•åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜</li>
</ul>
<hr/>
<h5 data-id="heading-5">æ–¹å¼äºŒï¼šå†…åµŒå¼ï¼ˆInternal / Embeddedï¼‰</h5>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="xml">
        // JS ä»£ç å†™åœ¨ <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"> æ ‡ç­¾å†…
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¡µé¢åˆå§‹åŒ–'</span>);
        }
    </span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å†…åµŒå¼ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>âœ“ é€‚åˆå•é¡µåº”ç”¨æˆ–å°å‹é¡¹ç›®</li>
<li>âœ“ HTML å’Œ JS åœ¨åŒä¸€æ–‡ä»¶ï¼Œä¾¿äºè°ƒè¯•</li>
<li>âœ“ å¯ä»¥è®¿é—®é¡µé¢ä¸­çš„æ‰€æœ‰å…ƒç´ </li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>âŒ HTML æ–‡ä»¶ä½“ç§¯å˜å¤§</li>
<li>âŒ æ— æ³•è¢«æµè§ˆå™¨ç¼“å­˜ï¼ˆæ¯æ¬¡åŠ è½½ HTML éƒ½è¦é‡æ–°åŠ è½½ JSï¼‰</li>
<li>âŒ å¤šä¸ªé¡µé¢æ— æ³•å…±äº«åŒä¸€ä»½ JS ä»£ç </li>
<li>âŒ ä¸ç¬¦åˆå…³æ³¨ç‚¹åˆ†ç¦»åŸåˆ™</li>
</ul>
<hr/>
<h5 data-id="heading-6">æ–¹å¼ä¸‰ï¼šå¤–é“¾å¼ï¼ˆExternalï¼‰â­ <strong>æ¨è</strong></h5>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- åŸºç¡€ç”¨æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æ¨èç”¨æ³•ï¼šé…åˆ defer --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/app.js"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æˆ–è€… asyncï¼ˆå–å†³äºåœºæ™¯ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/analytics.js"</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… <strong>HTML ä¸ JS åˆ†ç¦»</strong>ï¼Œç»“æ„æ¸…æ™°</li>
<li>âœ… <strong>å¯å¤ç”¨</strong>ï¼šå¤šä¸ªé¡µé¢å…±äº«åŒä¸€ä¸ª JS æ–‡ä»¶</li>
<li>âœ… <strong>å¯ç¼“å­˜</strong>ï¼šæµè§ˆå™¨ç¼“å­˜ JS æ–‡ä»¶ï¼Œæå‡åŠ è½½é€Ÿåº¦</li>
<li>âœ… <strong>ä¾¿äºç»´æŠ¤</strong>ï¼šä»£ç ç‹¬ç«‹ç®¡ç†</li>
<li>âœ… <strong>æ”¯æŒæ¨¡å—åŒ–</strong>ï¼šæ–¹ä¾¿å›¢é˜Ÿåä½œ</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>âš ï¸ éœ€è¦é¢å¤–çš„ HTTP è¯·æ±‚ï¼ˆä½†å¯é€šè¿‡ç¼“å­˜å’Œæ‰“åŒ…ä¼˜åŒ–ï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-7">2. <code>&lt;script&gt;</code> æ ‡ç­¾çš„å…³é”®å±æ€§</h4>
<h5 data-id="heading-8"><code>defer</code> å’Œ <code>async</code> çš„åŒºåˆ«</h5>
<pre><code class="hljs language-less" lang="less">é¡µé¢è§£ææµç¨‹å¯¹æ¯”ï¼š

æ— å±æ€§ï¼ˆé»˜è®¤ï¼‰:
<span class="hljs-selector-tag">HTML</span>è§£æ â†’ é‡åˆ°<span class="hljs-selector-tag">script</span> â†’ åœæ­¢è§£æ â†’ ä¸‹è½½<span class="hljs-selector-tag">JS</span> â†’ æ‰§è¡Œ<span class="hljs-selector-tag">JS</span> â†’ ç»§ç»­è§£æ<span class="hljs-selector-tag">HTML</span>
                â†‘ é˜»å¡é¡µé¢æ¸²æŸ“ â†‘

<span class="hljs-selector-tag">defer</span>:
<span class="hljs-selector-tag">HTML</span>è§£æ â†’ å¹¶è¡Œä¸‹è½½<span class="hljs-selector-tag">JS</span> â†’ <span class="hljs-selector-tag">HTML</span>è§£æå®Œæˆ â†’ æŒ‰é¡ºåºæ‰§è¡Œ<span class="hljs-selector-tag">JS</span> â†’ <span class="hljs-selector-tag">DOMContentLoaded</span>
            â†“ ä¸é˜»å¡è§£æ â†“

<span class="hljs-selector-tag">async</span>:
<span class="hljs-selector-tag">HTML</span>è§£æ â†’ å¹¶è¡Œä¸‹è½½<span class="hljs-selector-tag">JS</span> â†’ ä¸‹è½½å®Œç«‹å³æ‰§è¡Œ â†’ ç»§ç»­è§£æ<span class="hljs-selector-tag">HTML</span>
            â†“ æ‰§è¡Œæ—¶æœºä¸ç¡®å®š â†“
</code></pre>





























<table><thead><tr><th>å±æ€§</th><th>æ‰§è¡Œæ—¶æœº</th><th>é¡ºåºä¿è¯</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>æ— å±æ€§</strong></td><td>ç«‹å³æ‰§è¡Œï¼Œé˜»å¡è§£æ</td><td>âœ… æŒ‰é¡ºåº</td><td>æ— </td></tr><tr><td><strong>defer</strong></td><td>HTML è§£æå®Œæˆåï¼Œ<code>DOMContentLoaded</code> å‰</td><td>âœ… æŒ‰é¡ºåº</td><td><strong>DOM æ“ä½œè„šæœ¬</strong></td></tr><tr><td><strong>async</strong></td><td>ä¸‹è½½å®Œæˆåç«‹å³æ‰§è¡Œ</td><td>âŒ æ— é¡ºåºä¿è¯</td><td><strong>ç‹¬ç«‹è„šæœ¬</strong>ï¼ˆå¦‚ç»Ÿè®¡ã€å¹¿å‘Šï¼‰</td></tr></tbody></table>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- defer æ¨èç”¨æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"main.js"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"utils.js"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-comment">&lt;!-- ä¿è¯ï¼šutils.js ä¸€å®šåœ¨ main.js ä¹‹å‰æ‰§è¡Œ --&gt;</span>

<span class="hljs-comment">&lt;!-- async ç”¨æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"analytics.js"</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"ads.js"</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-comment">&lt;!-- ä¸ä¿è¯æ‰§è¡Œé¡ºåºï¼Œè°å…ˆä¸‹è½½å®Œè°å…ˆæ‰§è¡Œ --&gt;</span>
</code></pre>
<h5 data-id="heading-9">å…¶ä»–é‡è¦å±æ€§</h5>






























<table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>type</code></td><td>æŒ‡å®šè„šæœ¬ç±»å‹</td><td><code>type="module"</code>ï¼ˆES æ¨¡å—ï¼‰</td></tr><tr><td><code>crossorigin</code></td><td>CORS é…ç½®</td><td><code>crossorigin="anonymous"</code></td></tr><tr><td><code>integrity</code></td><td>SRIï¼ˆå­èµ„æºå®Œæ•´æ€§æ ¡éªŒï¼‰</td><td><code>integrity="sha384-..."</code></td></tr><tr><td><code>nomodule</code></td><td>ä¸æ”¯æŒæ¨¡å—çš„æµè§ˆå™¨æ‰æ‰§è¡Œ</td><td><code>&lt;script nomodule src="legacy.js"&gt;&lt;/script&gt;</code></td></tr></tbody></table>
<hr/>
<h4 data-id="heading-10">3. åº•å±‚æœºåˆ¶ï¼šæµè§ˆå™¨å¦‚ä½•åŠ è½½å’Œæ‰§è¡Œè„šæœ¬</h4>
<pre><code class="hljs language-xml" lang="xml">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æµè§ˆå™¨æ¸²æŸ“æµç¨‹                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  1. HTML Parser â”€â”€â†’ æ„å»º DOM æ ‘                          â”‚
â”‚         â†“                                                 â”‚
â”‚  2. CSS Parser â”€â”€â†’ æ„å»º CSSOM æ ‘                         â”‚
â”‚         â†“                                                 â”‚
â”‚  3. åˆå¹¶ â”€â”€â†’ æ¸²æŸ“æ ‘ï¼ˆRender Treeï¼‰                        â”‚
â”‚         â†“                                                 â”‚
â”‚  4. Layoutï¼ˆå¸ƒå±€ï¼‰                                        â”‚
â”‚         â†“                                                 â”‚
â”‚  5. Paintï¼ˆç»˜åˆ¶ï¼‰                                         â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é‡åˆ° <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"> æ—¶ï¼š

é»˜è®¤è¡Œä¸ºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åœæ­¢è§£æ â”‚ â† é˜»å¡ <span class="hljs-variable constant_">DOM</span> æ„å»º
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸‹è½½ <span class="hljs-variable constant_">JS</span> â”‚ â† å¦‚æœæ˜¯å¤–é“¾è„šæœ¬
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰§è¡Œ <span class="hljs-variable constant_">JS</span> â”‚ â† é˜»å¡æ¸²æŸ“
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç»§ç»­è§£æ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä½¿ç”¨ defer/<span class="hljs-keyword">async</span>ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ç»§ç»­è§£æ â”‚ â†â†’   â”‚å¹¶è¡Œä¸‹è½½ â”‚  â† ä¸é˜»å¡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<hr/>
<h4 data-id="heading-11">4. æœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æœ€ä½³å®è·µç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- CSS æ”¾åœ¨ head ä¸­ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"styles.css"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- é¢„åŠ è½½å…³é”®è„šæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"critical.js"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"script"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é¡µé¢å†…å®¹ --&gt;</span>

    <span class="hljs-comment">&lt;!-- æ–¹æ¡ˆ1ï¼šç°ä»£æµè§ˆå™¨æ¨è --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"main.js"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"app.js"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ–¹æ¡ˆ2ï¼šéœ€è¦ç«‹å³æ‰§è¡Œçš„è„šæœ¬ï¼ˆå¦‚ polyfillï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// åŒæ­¥æ‰§è¡Œçš„å°å‹è„šæœ¬</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ–¹æ¡ˆ3ï¼šç‹¬ç«‹ç¬¬ä¸‰æ–¹è„šæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"analytics.js"</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ–¹æ¡ˆ4ï¼šES æ¨¡å— --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"module.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ–¹æ¡ˆ5ï¼šæ¨¡å—é™çº§æ–¹æ¡ˆ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"modern.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">nomodule</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"legacy.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<hr/>
<h4 data-id="heading-12">5. å¸¸è§è¯¯åŒº</h4>
<blockquote>
<p>âŒ <strong>è¯¯åŒº1</strong>ï¼š<code>defer</code> å’Œ <code>async</code> åŠŸèƒ½ä¸€æ ·</p>
<p>âœ… <strong>çº æ­£</strong>ï¼š<code>defer</code> ä¿è¯é¡ºåºä¸”åœ¨ DOMContentLoaded å‰æ‰§è¡Œï¼Œ<code>async</code> ä¸ä¿è¯é¡ºåº</p>
</blockquote>
<blockquote>
<p>âŒ <strong>è¯¯åŒº2</strong>ï¼šæŠŠæ‰€æœ‰ <code>&lt;script&gt;</code> éƒ½æ”¾åœ¨ <code>&lt;head&gt;</code> é‡Œ</p>
<p>âœ… <strong>çº æ­£</strong>ï¼šä¼ ç»Ÿæ”¾ <code>&lt;/body&gt;</code> å‰ï¼Œç°ä»£ç”¨ <code>defer</code> å¯æ”¾ <code>head</code></p>
</blockquote>
<blockquote>
<p>âŒ <strong>è¯¯åŒº3</strong>ï¼š<code>defer</code> çš„è„šæœ¬ä¸€å®šåœ¨ <code>DOMContentLoaded</code> å‰æ‰§è¡Œ</p>
<p>âœ… <strong>çº æ­£</strong>ï¼šå¤§éƒ¨åˆ†æƒ…å†µæ˜¯çš„ï¼Œä½†å¦‚æœè„šæœ¬å¾ˆå¤§æˆ–ç½‘ç»œæ…¢ï¼Œå¯èƒ½åœ¨ä¹‹å</p>
</blockquote>
<blockquote>
<p>âŒ <strong>è¯¯åŒº4</strong>ï¼šå¤šä¸ª <code>async</code> è„šæœ¬æŒ‰ä¹¦å†™é¡ºåºæ‰§è¡Œ</p>
<p>âœ… <strong>çº æ­£</strong>ï¼š<code>async</code> è„šæœ¬æŒ‰ä¸‹è½½å®Œæˆé¡ºåºæ‰§è¡Œï¼Œé¡ºåºä¸å¯æ§</p>
</blockquote>
<hr/>
<h3 data-id="heading-13">ä»£ç ç¤ºä¾‹</h3>
<h4 data-id="heading-14">ç¤ºä¾‹1ï¼šä¸‰ç§å¼•å…¥æ–¹å¼å¯¹æ¯”</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>JS å¼•å…¥æ–¹å¼å¯¹æ¯”<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ–¹å¼1ï¼šè¡Œå†…å¼ï¼ˆä¸æ¨èï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handleClick()"</span>&gt;</span>è¡Œå†…å¼æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ–¹å¼2ï¼šå†…åµŒå¼ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†…åµŒå¼å‡½æ•°è¢«è°ƒç”¨'</span>);
        }

        <span class="hljs-comment">// å†…åµŒå¼å¯ä»¥ç›´æ¥æ“ä½œé¡µé¢</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'DOM åŠ è½½å®Œæˆ'</span>);
        });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ–¹å¼3ï¼šå¤–é“¾å¼ï¼ˆæ¨èï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/utils.js"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ä¸‰ç§å¼•å…¥æ–¹å¼<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- è¡Œå†…å¼çš„å®Œæ•´ç¤ºä¾‹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onmouseover</span>=<span class="hljs-string">"this.style.background='yellow'"</span>
         <span class="hljs-attr">onmouseout</span>=<span class="hljs-string">"this.style.background='white'"</span>&gt;</span>
        é¼ æ ‡æ‚¬åœå˜è‰²
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-15">ç¤ºä¾‹2ï¼šdefer vs async å®é™…æ•ˆæœ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>defer vs async<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>é¡µé¢æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// åŒæ­¥è„šæœ¬ï¼šé˜»å¡åç»­æ¸²æŸ“</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1. åŒæ­¥è„šæœ¬å¼€å§‹'</span>);
        <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
        <span class="hljs-keyword">const</span> start = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
        <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - start &lt; <span class="hljs-number">2000</span>) {}
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2. åŒæ­¥è„šæœ¬ç»“æŸï¼ˆé˜»å¡äº†2ç§’ï¼‰'</span>);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™è¡Œå†…å®¹è¢«å»¶è¿Ÿæ˜¾ç¤ºäº†<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- defer è„šæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"defer1.js"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"defer2.js"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ä¿è¯ï¼šdefer1.js åœ¨ defer2.js ä¹‹å‰æ‰§è¡Œ --&gt;</span>

    <span class="hljs-comment">&lt;!-- async è„šæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"async1.js"</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"async2.js"</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ä¸ä¿è¯ï¼šè°å…ˆä¸‹è½½å®Œè°å…ˆæ‰§è¡Œ --&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3. DOMContentLoaded è§¦å‘'</span>);
        });

        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'4. é¡µé¢å®Œå…¨åŠ è½½å®Œæˆ'</span>);
        });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-16">ç¤ºä¾‹3ï¼šç°ä»£é¡¹ç›®çš„æ ‡å‡†å¼•å…¥æ–¹å¼</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç°ä»£é¡¹ç›®<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- é¢„è¿æ¥åˆ° CDN --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.example.com"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- é¢„åŠ è½½å…³é”®èµ„æº --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"critical.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"critical.js"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"script"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å…³é”® CSS --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"critical.css"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Polyfillï¼šéœ€è¦ç«‹å³æ‰§è¡Œä¸”ä¸ä¾èµ– DOM --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// æ£€æµ‹å’Œæ·»åŠ å¿…è¦çš„ polyfill</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">Promise</span>) {
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">'&lt;script src="polyfills/promise.js"&gt;&lt;\/script&gt;'</span>);
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¸»è¦åº”ç”¨è„šæœ¬ï¼šä½¿ç”¨ defer --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"vendors.js"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"main.js"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ç¬¬ä¸‰æ–¹ç»Ÿè®¡ï¼šä½¿ç”¨ async --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"analytics.js"</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ES æ¨¡å— + é™çº§æ–¹æ¡ˆ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"modern-app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">nomodule</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"legacy-app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-17">ç¤ºä¾‹4ï¼šåŠ¨æ€åŠ è½½è„šæœ¬</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŠ¨æ€åˆ›å»º script æ ‡ç­¾</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadScript</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
        script.<span class="hljs-property">src</span> = url;

        <span class="hljs-comment">// è®¾ç½®å±æ€§</span>
        <span class="hljs-keyword">if</span> (options.<span class="hljs-property">async</span>) script.<span class="hljs-property">async</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (options.<span class="hljs-property">defer</span>) script.<span class="hljs-property">defer</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (options.<span class="hljs-property">type</span>) script.<span class="hljs-property">type</span> = options.<span class="hljs-property">type</span>;

        <span class="hljs-comment">// äº‹ä»¶ç›‘å¬</span>
        script.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(script);
        script.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Failed to load <span class="hljs-subst">${url}</span>`</span>));

        <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(script);
    });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initApp</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadScript</span>(<span class="hljs-string">'/utils.js'</span>, { <span class="hljs-attr">defer</span>: <span class="hljs-literal">true</span> });
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadScript</span>(<span class="hljs-string">'/main.js'</span>, { <span class="hljs-attr">defer</span>: <span class="hljs-literal">true</span> });
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰è„šæœ¬åŠ è½½å®Œæˆ'</span>);
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è„šæœ¬åŠ è½½å¤±è´¥:'</span>, error);
    }
}

<span class="hljs-comment">// æ¡ä»¶åŠ è½½</span>
<span class="hljs-keyword">if</span> (<span class="hljs-string">'IntersectionObserver'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {
    <span class="hljs-comment">// æ”¯æŒï¼ŒåŠ è½½ç°ä»£ç‰ˆæœ¬</span>
    <span class="hljs-title function_">loadScript</span>(<span class="hljs-string">'/modern-image-lazy-load.js'</span>);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ä¸æ”¯æŒï¼ŒåŠ è½½ polyfill</span>
    <span class="hljs-title function_">loadScript</span>(<span class="hljs-string">'/polyfills/intersection-observer.js'</span>)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">loadScript</span>(<span class="hljs-string">'/legacy-image-lazy-load.js'</span>));
}
</code></pre>
<hr/>
<h3 data-id="heading-18">é¢è¯•æŠ€å·§</h3>
<h4 data-id="heading-19">é¢è¯•å®˜å¯èƒ½çš„è¿½é—®</h4>
<ol>
<li>
<p><strong>"ä¸ºä»€ä¹ˆä¼ ç»Ÿå»ºè®®æŠŠ <code>&lt;script&gt;</code> æ”¾åœ¨ <code>&lt;/body&gt;</code> ä¹‹å‰ï¼Ÿ"</strong></p>
<ul>
<li>é¿å…é˜»å¡é¡µé¢æ¸²æŸ“ï¼Œè®©ç”¨æˆ·å…ˆçœ‹åˆ°å†…å®¹</li>
</ul>
</li>
<li>
<p><strong>"ç°åœ¨æœ‰äº† <code>defer</code>ï¼Œè¿˜éœ€è¦æ”¾ <code>&lt;/body&gt;</code> å‰å—ï¼Ÿ"</strong></p>
<ul>
<li>ä¸éœ€è¦ï¼Œ<code>defer</code> å¯æ”¾ <code>head</code>ï¼Œæ•ˆæœç›¸åŒä¸”æ›´æ—©å¼€å§‹ä¸‹è½½</li>
</ul>
</li>
<li>
<p><strong>"ä»€ä¹ˆæƒ…å†µä¸‹ç”¨ <code>async</code>ï¼Ÿ"</strong></p>
<ul>
<li>ç‹¬ç«‹è„šæœ¬ï¼šç»Ÿè®¡ä»£ç ã€å¹¿å‘Šè„šæœ¬ã€ä¸ä¾èµ–å…¶ä»–ä»£ç çš„åº“</li>
</ul>
</li>
<li>
<p><strong>"å¤šä¸ª <code>defer</code> è„šæœ¬çš„æ‰§è¡Œé¡ºåºï¼Ÿ"</strong></p>
<ul>
<li>æŒ‰åœ¨ HTML ä¸­çš„å‡ºç°é¡ºåºæ‰§è¡Œ</li>
</ul>
</li>
<li>
<p><strong>"<code>defer</code> å’Œ <code>DOMContentLoaded</code> çš„å…³ç³»ï¼Ÿ"</strong></p>
<ul>
<li><code>defer</code> è„šæœ¬åœ¨ DOMContentLoaded ä¹‹å‰æ‰§è¡Œ</li>
</ul>
</li>
<li>
<p><strong>"ä»€ä¹ˆæ˜¯è„šæœ¬é˜»å¡ï¼ˆrender blockingï¼‰ï¼Ÿ"</strong></p>
<ul>
<li>è§£é‡Šæµè§ˆå™¨è§£æ HTML æ—¶é‡åˆ° <code>&lt;script&gt;</code> åœæ­¢æ¸²æŸ“çš„æœºåˆ¶</li>
</ul>
</li>
</ol>
<h4 data-id="heading-20">å¦‚ä½•å±•ç¤ºæ·±åº¦ç†è§£</h4>
<ol>
<li>
<p><strong>è°ˆæ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>å…³é”®æ¸²æŸ“è·¯å¾„ä¼˜åŒ–</li>
<li>èµ„æºé¢„åŠ è½½ï¼ˆpreload/prefetchï¼‰</li>
<li>ä»£ç åˆ†å‰²ï¼ˆcode splittingï¼‰</li>
</ul>
</li>
<li>
<p><strong>è°ˆå®é™…é¡¹ç›®ç»éªŒ</strong>ï¼š</p>
<ul>
<li>å¦‚ä½•å¤„ç†ç¬¬ä¸‰æ–¹è„šæœ¬ï¼ˆå¦‚ Google Analyticsï¼‰</li>
<li>å¦‚ä½•ä¼˜åŒ–é¦–å±åŠ è½½æ—¶é—´</li>
<li>ä½¿ç”¨è¿‡å“ªäº›æ„å»ºå·¥å…·çš„ä¼˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>è°ˆæµè§ˆå™¨å…¼å®¹æ€§</strong>ï¼š</p>
<ul>
<li><code>defer</code>/<code>async</code> çš„æµè§ˆå™¨æ”¯æŒæƒ…å†µ</li>
<li>å¦‚ä½•ä¸ºè€æµè§ˆå™¨åšé™çº§å¤„ç†</li>
</ul>
</li>
<li>
<p><strong>è°ˆå®‰å…¨</strong>ï¼š</p>
<ul>
<li>SRIï¼ˆSubresource Integrityï¼‰</li>
<li>nonce/CSPï¼ˆContent Security Policyï¼‰</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-21">ä¸€å¥è¯æ€»ç»“</h3>
<blockquote>
<p><strong>å¤–é“¾å¼ + <code>defer</code> æ˜¯ç°ä»£ç½‘é¡µå¼•å…¥ JavaScript çš„æœ€ä½³å®è·µï¼Œå®ƒå®ç°äº†ä»£ç åˆ†ç¦»ã€å¯ç¼“å­˜ã€ä¸é˜»å¡æ¸²æŸ“çš„å®Œç¾å¹³è¡¡ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»€ä¹ˆæ˜¯"é˜»å¡æ¸²æŸ“"ï¼Ÿå¦‚ä½•é¿å… JavaScript ä»£ç é˜»å¡é¡µé¢æ¸²æŸ“ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7600982613654929458</link>    <guid>https://juejin.cn/post/7600982613654929458</guid>    <pubDate>2026-01-31T07:24:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600982613654929458" data-draft-id="7601077764423401522" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»€ä¹ˆæ˜¯&quot;é˜»å¡æ¸²æŸ“&quot;ï¼Ÿå¦‚ä½•é¿å… JavaScript ä»£ç é˜»å¡é¡µé¢æ¸²æŸ“ï¼Ÿ"/> <meta itemprop="keywords" content="é¢è¯•,JavaScript"/> <meta itemprop="datePublished" content="2026-01-31T07:24:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Smilezyl"/> <meta itemprop="url" content="https://juejin.cn/user/3438928103504088"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»€ä¹ˆæ˜¯"é˜»å¡æ¸²æŸ“"ï¼Ÿå¦‚ä½•é¿å… JavaScript ä»£ç é˜»å¡é¡µé¢æ¸²æŸ“ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3438928103504088/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Smilezyl
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:24:32.000Z" title="Sat Jan 31 2026 07:24:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»€ä¹ˆæ˜¯"é˜»å¡æ¸²æŸ“"ï¼Ÿå¦‚ä½•é¿å… JavaScript ä»£ç é˜»å¡é¡µé¢æ¸²æŸ“ï¼Ÿ</h2>
<h3 data-id="heading-1">æ ¸å¿ƒç­”æ¡ˆ</h3>
<p><strong>é˜»å¡æ¸²æŸ“</strong>æ˜¯æŒ‡æµè§ˆå™¨åœ¨è§£æ HTML æ„å»º DOM æ ‘çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ° <code>&lt;script&gt;</code> æ ‡ç­¾æ—¶ä¼šæš‚åœ DOM è§£æï¼Œç­‰å¾…è„šæœ¬ä¸‹è½½å¹¶æ‰§è¡Œå®Œæ¯•åæ‰ç»§ç»­è§£æã€‚è¿™æ˜¯å› ä¸º JavaScript å¯èƒ½ä¼šä¿®æ”¹ DOM ç»“æ„ï¼ˆå¦‚ <code>document.write</code>ï¼‰ï¼Œæµè§ˆå™¨å¿…é¡»ç¡®ä¿ DOM çš„æ­£ç¡®æ€§ã€‚</p>
<p><strong>é¿å…é˜»å¡çš„æ ¸å¿ƒæ–¹æ³•ï¼š</strong></p>
<ol>
<li>ä½¿ç”¨ <code>async</code> å±æ€§ï¼šè„šæœ¬å¼‚æ­¥ä¸‹è½½ï¼Œä¸‹è½½å®Œç«‹å³æ‰§è¡Œ</li>
<li>ä½¿ç”¨ <code>defer</code> å±æ€§ï¼šè„šæœ¬å¼‚æ­¥ä¸‹è½½ï¼ŒDOM è§£æå®ŒæˆåæŒ‰é¡ºåºæ‰§è¡Œ</li>
<li>å°†è„šæœ¬æ”¾åœ¨ <code>&lt;/body&gt;</code> å‰</li>
<li>åŠ¨æ€åˆ›å»º script æ ‡ç­¾</li>
</ol>
<h3 data-id="heading-2">æ·±å…¥è§£æ</h3>
<h4 data-id="heading-3">æµè§ˆå™¨æ¸²æŸ“æµç¨‹</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">HTML</span> â†’ DOM Tree
                  â†’ Render Tree â†’ Layout â†’ Paint
CSS  â†’ CSSOM
</code></pre>
<h4 data-id="heading-4">é˜»å¡æœºåˆ¶è¯¦è§£</h4>
<p><strong>1. JavaScript é˜»å¡ DOM è§£æ</strong></p>
<pre><code class="hljs language-xml" lang="xml">HTMLè§£æ â†’ é‡åˆ°<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span> â†’ æš‚åœè§£æ â†’ ä¸‹è½½JS â†’ æ‰§è¡ŒJS â†’ ç»§ç»­è§£æ
</code></pre>
<p><strong>2. CSS ä¹Ÿä¼šé—´æ¥é˜»å¡</strong></p>
<ul>
<li>CSS æœ¬èº«ä¸é˜»å¡ DOM è§£æï¼Œä½†é˜»å¡æ¸²æŸ“</li>
<li>å¦‚æœ JS åœ¨ CSS ä¹‹åï¼ŒJS ä¼šç­‰å¾… CSSOM æ„å»ºå®Œæˆï¼ˆå› ä¸º JS å¯èƒ½è®¿é—®æ ·å¼ï¼‰</li>
</ul>
<h4 data-id="heading-5">async vs defer çš„åŒºåˆ«</h4>






























<table><thead><tr><th>ç‰¹æ€§</th><th>async</th><th>defer</th></tr></thead><tbody><tr><td>ä¸‹è½½</td><td>å¼‚æ­¥ï¼Œä¸é˜»å¡è§£æ</td><td>å¼‚æ­¥ï¼Œä¸é˜»å¡è§£æ</td></tr><tr><td>æ‰§è¡Œæ—¶æœº</td><td>ä¸‹è½½å®Œç«‹å³æ‰§è¡Œ</td><td>DOM è§£æå®Œæˆåæ‰§è¡Œ</td></tr><tr><td>æ‰§è¡Œé¡ºåº</td><td>ä¸ä¿è¯é¡ºåº</td><td>ä¿è¯é¡ºåº</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç‹¬ç«‹è„šæœ¬ï¼ˆç»Ÿè®¡ã€å¹¿å‘Šï¼‰</td><td>æœ‰ä¾èµ–å…³ç³»çš„è„šæœ¬</td></tr></tbody></table>
<h4 data-id="heading-6">å¸¸è§è¯¯åŒº</h4>
<ol>
<li>
<p><strong>è¯¯åŒºï¼šasync å’Œ defer å¯ä»¥åŒæ—¶ä½¿ç”¨</strong></p>
<ul>
<li>å®é™…ï¼šåŒæ—¶å­˜åœ¨æ—¶ï¼Œç°ä»£æµè§ˆå™¨ä¼˜å…ˆä½¿ç”¨ async</li>
</ul>
</li>
<li>
<p><strong>è¯¯åŒºï¼šå†…è”è„šæœ¬å¯ä»¥ä½¿ç”¨ async/defer</strong></p>
<ul>
<li>å®é™…ï¼šasync/defer åªå¯¹å¤–éƒ¨è„šæœ¬æœ‰æ•ˆ</li>
</ul>
</li>
<li>
<p><strong>è¯¯åŒºï¼šæ”¾åœ¨ body åº•éƒ¨å°±ä¸ä¼šé˜»å¡</strong></p>
<ul>
<li>å®é™…ï¼šä»ä¼šé˜»å¡ï¼Œåªæ˜¯æ­¤æ—¶ DOM å·²åŸºæœ¬è§£æå®Œæˆï¼Œå½±å“è¾ƒå°</li>
</ul>
</li>
</ol>
<h3 data-id="heading-7">ä»£ç ç¤ºä¾‹</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- 1. é˜»å¡æ¸²æŸ“ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- 2. asyncï¼šå¼‚æ­¥ä¸‹è½½ï¼Œä¸‹è½½å®Œç«‹å³æ‰§è¡Œ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">async</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"analytics.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- 3. deferï¼šå¼‚æ­¥ä¸‹è½½ï¼ŒDOM è§£æåæŒ‰é¡ºåºæ‰§è¡Œ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">defer</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"vendor.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">defer</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ä¿è¯åœ¨ vendor.js ä¹‹åæ‰§è¡Œ --&gt;</span>

<span class="hljs-comment">&lt;!-- 4. åŠ¨æ€åŠ è½½è„šæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
  script.<span class="hljs-property">src</span> = <span class="hljs-string">'lazy-module.js'</span>;
  script.<span class="hljs-property">async</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// ä¿è¯é¡ºåºæ‰§è¡Œ</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(script);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- 5. æ¨¡å—è„šæœ¬ï¼ˆé»˜è®¤ defer è¡Œä¸ºï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"app.mjs"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- 6. é¢„åŠ è½½å…³é”®èµ„æº --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"critical.js"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"script"</span>&gt;</span>
</code></pre>
<h4 data-id="heading-8">ç°ä»£ä¼˜åŒ–æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ Intersection Observer æ‡’åŠ è½½è„šæœ¬</span>
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
      <span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
      script.<span class="hljs-property">src</span> = entry.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>;
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(script);
      observer.<span class="hljs-title function_">unobserve</span>(entry.<span class="hljs-property">target</span>);
    }
  });
});

<span class="hljs-comment">// ä½¿ç”¨ requestIdleCallback åœ¨ç©ºé—²æ—¶åŠ è½½</span>
<span class="hljs-title function_">requestIdleCallback</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
  script.<span class="hljs-property">src</span> = <span class="hljs-string">'non-critical.js'</span>;
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(script);
});
</code></pre>
<h3 data-id="heading-9">é¢è¯•æŠ€å·§</h3>
<h4 data-id="heading-10">å¯èƒ½çš„è¿½é—®æ–¹å‘</h4>
<ol>
<li>
<p><strong>"async å’Œ defer çš„æ‰§è¡Œæ—¶æœºå…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ"</strong></p>
<ul>
<li>asyncï¼šä¸‹è½½å®Œæˆåç«‹å³æ‰§è¡Œï¼Œå¯èƒ½åœ¨ DOMContentLoaded ä¹‹å‰æˆ–ä¹‹å</li>
<li>deferï¼šåœ¨ DOMContentLoaded äº‹ä»¶ä¹‹å‰æ‰§è¡Œ</li>
</ul>
</li>
<li>
<p><strong>"CSS ä¼šé˜»å¡ JS æ‰§è¡Œå—ï¼Ÿ"</strong></p>
<ul>
<li>ä¼šã€‚å¦‚æœ <code>&lt;script&gt;</code> åœ¨ <code>&lt;link&gt;</code> ä¹‹åï¼ŒJS ä¼šç­‰å¾… CSSOM æ„å»ºå®Œæˆ</li>
</ul>
</li>
<li>
<p><strong>"å¦‚ä½•æ£€æµ‹å’Œé‡åŒ–é˜»å¡æ—¶é—´ï¼Ÿ"</strong></p>
<ul>
<li>Performance APIã€Lighthouseã€Chrome DevTools Performance é¢æ¿</li>
</ul>
</li>
<li>
<p><strong>"type="module" çš„è„šæœ¬æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"</strong></p>
<ul>
<li>é»˜è®¤ defer è¡Œä¸ºã€ä¸¥æ ¼æ¨¡å¼ã€ç‹¬ç«‹ä½œç”¨åŸŸã€æ”¯æŒ import/export</li>
</ul>
</li>
</ol>
<h4 data-id="heading-11">å±•ç¤ºæ·±åº¦çš„å›ç­”æŠ€å·§</h4>
<ul>
<li>æåŠæµè§ˆå™¨çš„é¢„è§£æå™¨ï¼ˆPreload Scannerï¼‰ä¼šæå‰æ‰«æå¹¶ä¸‹è½½èµ„æº</li>
<li>è®¨è®º Critical Rendering Path ä¼˜åŒ–ç­–ç•¥</li>
<li>ç»“åˆå®é™…é¡¹ç›®ç»éªŒï¼Œå¦‚ Webpack çš„ä»£ç åˆ†å‰²ã€åŠ¨æ€ import</li>
</ul>
<h3 data-id="heading-12">ä¸€å¥è¯æ€»ç»“</h3>
<blockquote>
<p><strong>JS é˜»å¡ DOM è§£ææ˜¯å› ä¸ºå¯èƒ½ä¿®æ”¹ DOMï¼›ç”¨ defer ä¿é¡ºåºã€async æ±‚é€Ÿåº¦ã€åŠ¨æ€åŠ è½½æœ€çµæ´»ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vueè§†é¢‘æ’­æ”¾å™¨ï¼šåŸºäºvue-video-playerçš„è‡ªå®šä¹‰è§†é¢‘æ’­æ”¾å™¨å®ç°]]></title>    <link>https://juejin.cn/post/7601053058856157190</link>    <guid>https://juejin.cn/post/7601053058856157190</guid>    <pubDate>2026-01-31T07:32:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601053058856157190" data-draft-id="7601053058856042502" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vueè§†é¢‘æ’­æ”¾å™¨ï¼šåŸºäºvue-video-playerçš„è‡ªå®šä¹‰è§†é¢‘æ’­æ”¾å™¨å®ç°"/> <meta itemprop="keywords" content="å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-01-31T07:32:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·943339501512"/> <meta itemprop="url" content="https://juejin.cn/user/1496911244173812"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vueè§†é¢‘æ’­æ”¾å™¨ï¼šåŸºäºvue-video-playerçš„è‡ªå®šä¹‰è§†é¢‘æ’­æ”¾å™¨å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1496911244173812/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·943339501512
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:32:36.000Z" title="Sat Jan 31 2026 07:32:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<h3 data-id="heading-1">ç›®æ ‡</h3>
<p>å®ç°ç±»ä¼¼el-imageç»„ä»¶çš„è§†é¢‘æŸ¥çœ‹å™¨ï¼Œæ”¯æŒé¢„è§ˆå’Œåˆ‡æ¢ã€‚ä½† element -ui ä¸­æ²¡æœ‰å°è£…å¯¹äºè§†é¢‘çš„æŸ¥çœ‹ç»„ä»¶ï¼Œåœ¨å¤šæ–¹è°ƒç ”åï¼Œå¼•å…¥<code>vue-video-player</code>å®ç°è¿™ä¸€åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-2">åŠŸèƒ½ä»‹ç»</h3>
<p><code>vue-video-player</code> æ˜¯ä¸€ä¸ªåŸºäº <strong>Video.js</strong> å°è£…çš„ Vue ç»„ä»¶åº“ï¼Œæ—¨åœ¨ä¸º Vue å¼€å‘è€…æä¾›ä¸€å¥—ç®€æ´ã€å¯å¤ç”¨çš„è§†é¢‘æ’­æ”¾å™¨é›†æˆæ–¹æ¡ˆã€‚å…¶æœ¬è´¨æ˜¯å°† Video.js çš„å¼ºå¤§åŠŸèƒ½ï¼ˆå¦‚ HLS æ”¯æŒã€å­—å¹•åŠ è½½ã€å…¨å±æ§åˆ¶ç­‰ï¼‰é€šè¿‡ Vue çš„ç»„ä»¶åŒ–æœºåˆ¶è¿›è¡Œå°è£…ï¼Œä»è€Œå®ç°å£°æ˜å¼è°ƒç”¨å’Œå“åº”å¼æ›´æ–°ã€‚</p>
<h2 data-id="heading-3">å®˜æ–¹æ–‡æ¡£</h2>
<ol>
<li>vue-video-playerï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsurmon-china%2Fvideojs-player" target="_blank" title="https://github.com/surmon-china/videojs-player" ref="nofollow noopener noreferrer">github.com/surmon-chinâ€¦</a></li>
<li>video.jsï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.videojs.com%2Fdocs%2Fapi%2Fplayer.html" target="_blank" title="https://docs.videojs.com/docs/api/player.html" ref="nofollow noopener noreferrer">docs.videojs.com/docs/api/plâ€¦</a></li>
</ol>
<h2 data-id="heading-4">å®‰è£…</h2>
<h3 data-id="heading-5">ç‰ˆæœ¬å…¼å®¹æ€§</h3>
<p>éšç€ Vue3 çš„å‘å¸ƒåŠå…¶ Composition API çš„æ™®åŠï¼Œvue-video-player çš„ç»´æŠ¤å›¢é˜Ÿé€æ­¥å°†å¼€å‘é‡å¿ƒè½¬å‘ Vue3 ç”Ÿæ€ã€‚å¯¹äºæ–°ç‰ˆæœ¬æœ‰å¦‚ä¸‹æ”¹å˜ï¼š</p>
<ul>
<li>6.x åŠä»¥ä¸Šç‰ˆæœ¬å¼€å§‹ä¾èµ– Vue3 çš„ runtime-core å’Œæ–°çš„ç»„ä»¶æ¨¡å‹ï¼›</li>
<li>ä¸å†æ”¯æŒ<code>Vue.use()</code>è¿™ç§å…¨å±€æ³¨å†Œæ–¹å¼ï¼›</li>
<li>ä½¿ç”¨äº† Vue3 ç‰¹æœ‰çš„å“åº”å¼ç³»ç»Ÿï¼ˆProxy ä»£æ›¿ definePropertyï¼‰ï¼›</li>
<li>æ„å»ºå·¥å…·é“¾å‡çº§è‡³ Viteï¼Œå¯¼è‡´ä¸ Vue2 é¡¹ç›®çš„ webpack é…ç½®å­˜åœ¨å†²çªé£é™©ã€‚</li>
</ul>
<h3 data-id="heading-6">ç‰ˆæœ¬é€‰æ‹©ç­–ç•¥</h3>























<table><thead><tr><th>éœ€æ±‚åœºæ™¯</th><th>å»ºè®®ç‰ˆæœ¬</th><th>å®‰è£…å‘½ä»¤</th><th>å¼•å…¥æ–¹å¼</th></tr></thead><tbody><tr><td>Vue2 é¡¹ç›®</td><td>^5.0.2</td><td><code>npm install vue-video-player@^5.0.2</code></td><td><code>Vue.use(VueVideoPlayer)</code></td></tr><tr><td>Vue3 é¡¹ç›®</td><td>^6.0.0</td><td><code>npm install vue-video-player@latest</code></td><td><code>app.use(VueVideoPlayer)</code></td></tr></tbody></table>
<h3 data-id="heading-7">é”™è¯¯ä½¿ç”¨æ¡ˆä¾‹</h3>
<ol>
<li>åœ¨å®‰è£…ä¾èµ–æ—¶æœªæ³¨æ„<code>ç‰ˆæœ¬çº¦æŸ</code>ï¼Œå¯¼è‡´è¿è¡Œæ—¶æŠ¥é”™ï¼š</li>
</ol>

<pre><code class="hljs language-markdown" lang="markdown">[<span class="hljs-symbol">Vue warn</span>]: <span class="hljs-link">Unknown custom element: &lt;video-player&gt;</span>
Did you register the component correctly?
</code></pre>
<p>2.  Vue2 ç‰ˆæœ¬æœ€ä½³å®è·µå»ºè®®ï¼š</p>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// package.json ä¸­æ˜¾å¼é”å®šç‰ˆæœ¬</span>
<span class="hljs-string">"dependencies"</span>: {
  <span class="hljs-string">"vue-video-player"</span>: <span class="hljs-string">"^5.0.2"</span>,
  <span class="hljs-string">"video.js"</span>: <span class="hljs-string">"^7.10.2"</span>
}

<span class="hljs-comment">// main.js ä¸­æ­£ç¡®å¼•å…¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">VueVideoPlayer</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-video-player'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'vue-video-player/node_modules/video.js/dist/video-js.css'</span>

<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">VueVideoPlayer</span>)
</code></pre>
<h2 data-id="heading-8">ä½¿ç”¨</h2>
<h3 data-id="heading-9">åŸºæœ¬ç”¨æ³•</h3>
<ol>
<li>å±æ€§é…ç½®</li>
</ol>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡playerOptionsé…ç½®è‡ªå®šä¹‰å±æ€§ï¼Œå…³é”®å±æ€§åŒ…æ‹¬<code>src</code>ï¼ˆè§†é¢‘åœ°å€ï¼‰ã€<code>:controls</code>ï¼ˆæ˜¯å¦æ˜¾ç¤ºæ§åˆ¶æ ï¼‰ã€<code>:autoplay</code>ï¼ˆè‡ªåŠ¨æ’­æ”¾ï¼‰ã€<code>:loop</code>ï¼ˆå¾ªç¯æ’­æ”¾ï¼‰ä»¥åŠ<code>:volume</code>ï¼ˆéŸ³é‡è®¾ç½®ï¼‰ç­‰ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"visible"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-mask-wrapper"</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"viewer-wrapper"</span> @<span class="hljs-attr">click.self</span>=<span class="hljs-string">"handleClose"</span>&gt;</span>
         â€¦â€¦
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-player-wrapper"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"videoBoxStyle"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">video-player</span>
          <span class="hljs-attr">:key</span>=<span class="hljs-string">"`${index}-${viewerData.subLink}`"</span>
          <span class="hljs-attr">ref</span>=<span class="hljs-string">"videoPlayer"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"video-player"</span>
          <span class="hljs-attr">:options</span>=<span class="hljs-string">"playerOptions"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: {
    â€¦â€¦
  },
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-title function_">playerOptions</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">autoplay</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è‡ªåŠ¨æ’­æ”¾</span>
        <span class="hljs-attr">controls</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ˜¾ç¤ºæ’­æ”¾æ§åˆ¶æ¡</span>
        <span class="hljs-attr">preload</span>: <span class="hljs-string">'metadata'</span>,
        <span class="hljs-attr">fluid</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// è‡ªé€‚åº”å®¹å™¨ï¼Œè®¾ä¸ºfalseï¼Œä½¿ç”¨è‡ªå®šä¹‰cssæ ·å¼æ§åˆ¶</span>
        <span class="hljs-attr">sources</span>: [{ <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewerData</span>.<span class="hljs-property">subLink</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'video/mp4'</span> }],
        <span class="hljs-attr">controlBar</span>: {
          <span class="hljs-attr">volumePanel</span>: { <span class="hljs-attr">inline</span>: <span class="hljs-literal">false</span> }, <span class="hljs-comment">// éŸ³é‡é¢æ¿ï¼Œinlineç½®ä¸ºfalseæ—¶ï¼šç‚¹å‡»éŸ³é‡å›¾æ ‡æ—¶å¼¹å‡ºç‹¬ç«‹çš„å‚ç›´æ»‘å—</span>
          <span class="hljs-attr">playToggle</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ§åˆ¶æ¡çš„æ’­æ”¾æš‚åœæŒ‰é’®</span>
        },
        <span class="hljs-attr">bigPlayButton</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// éšè—å¤§æ’­æ”¾æŒ‰é’®</span>
      };
    },
  },
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.video-mask-wrapper</span> {
  <span class="hljs-attribute">position</span>: fixed;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2000</span>;
  <span class="hljs-attribute">outline</span>: none;
  <span class="hljs-selector-class">.viewer-wrapper</span> {
    <span class="hljs-attribute">position</span>: absolute;
    inset: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2002</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-selector-class">.video-player-wrapper</span> {
      <span class="hljs-attribute">position</span>: relative;
      <span class="hljs-attribute">max-width</span>: <span class="hljs-number">1000px</span>;
      <span class="hljs-attribute">max-height</span>: <span class="hljs-number">850px</span>;
      <span class="hljs-selector-class">.video-player</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
      }
    }
  }
}
::v-deep .video-js {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span> <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span> <span class="hljs-meta">!important</span>;
}
::v-deep .video-js .vjs-tech {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span> <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span> <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">object-fit</span>: contain;
  <span class="hljs-attribute">background-color</span>: transparent;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>2.  æ–¹æ³•</p>

<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">player</span> = this.<span class="hljs-variable">$refs</span>.videoPlayer &amp;&amp; this.<span class="hljs-variable">$refs</span>.videoPlayer.player<span class="hljs-comment">;</span>

player.pause()<span class="hljs-comment">;</span>
player.load()<span class="hljs-comment">;</span>
player.src(<span class="hljs-section">[{ src: newSrc, type: 'video/mp4' }]</span>)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li><code>addTextTrack()</code>ï¼šå‘éŸ³é¢‘/è§†é¢‘æ·»åŠ æ–°çš„æ–‡æœ¬è½¨é“ã€‚</li>
<li><code>canPlayType()</code>ï¼šæ£€æµ‹æµè§ˆå™¨æ˜¯å¦èƒ½æ’­æ”¾æŒ‡å®šçš„éŸ³é¢‘/è§†é¢‘ç±»å‹ã€‚</li>
<li><code>load()</code>ï¼šé‡æ–°åŠ è½½éŸ³é¢‘/è§†é¢‘å…ƒç´ ã€‚</li>
<li><code>play()</code>ï¼šå¼€å§‹æ’­æ”¾éŸ³é¢‘/è§†é¢‘ã€‚</li>
<li><code>pause()</code>ï¼šæš‚åœå½“å‰æ’­æ”¾çš„éŸ³é¢‘/è§†é¢‘ã€‚</li>
<li>â€¦â€¦</li>
</ul>
<ol start="3">
<li>äº‹ä»¶</li>
</ol>
<ul>
<li><code>waiting</code>ï¼šå½“è§†é¢‘ç”±äºéœ€è¦ç¼“å†²ä¸‹ä¸€å¸§è€Œåœæ­¢æ—¶è§¦å‘ã€‚</li>
<li><code>canplay</code>ï¼šå½“æµè§ˆå™¨å¯ä»¥å¼€å§‹æ’­æ”¾éŸ³é¢‘/è§†é¢‘æ—¶è§¦å‘ã€‚</li>
<li><code>error</code>ï¼šå½“åœ¨éŸ³é¢‘/è§†é¢‘åŠ è½½æœŸé—´å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ã€‚</li>
<li><code>loadedmetadata</code>ï¼šå½“æµè§ˆå™¨å·²åŠ è½½éŸ³é¢‘/è§†é¢‘çš„å…ƒæ•°æ®æ—¶è§¦å‘ã€‚</li>
<li>â€¦â€¦</li>
</ul>
<ol start="4">
<li>æ”¯æŒçš„è§†é¢‘æ ¼å¼</li>
</ol>
<ul>
<li>å¯å‚è€ƒæ–‡æ¡£ã€æµ‹è¯•è¯´æ˜ã€‘éƒ¨åˆ†ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F1186216" target="_blank" title="https://cloud.tencent.com/developer/article/1186216" ref="nofollow noopener noreferrer">cloud.tencent.com/developer/aâ€¦</a></li>
<li>è‹¥è¦æ’­æ”¾m3u8è§†é¢‘æµï¼š1ã€éœ€è¦å¼•å…¥<code>video.js</code>å¹¶ç»‘å®šåˆ°windowä¸Šï¼›2ã€å®‰è£…ä¾èµ–<code>videojs-contrib-hls</code>å¹¶å¼•å…¥ï¼›3ã€sources è¦æŒ‡å®š<code>type: application/x-mpegURL</code></li>
</ul>
<h3 data-id="heading-10">äºŒæ¬¡å°è£…</h3>
<p>åŸºäºç”¨æˆ·æ“ä½œä¹ æƒ¯ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ’­æ”¾å™¨è¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p>
<h4 data-id="heading-11">æ’­æ”¾å™¨åŠ¨æ€å®½é«˜</h4>
<ol>
<li>è§£å†³ä»€ä¹ˆé—®é¢˜
<ul>
<li>æ’­æ”¾å™¨é…ç½®é¡¹ä¸­è‡ªå¸¦çš„<code>fluid</code> å±æ€§,å¯ä»¥è°ƒæ•´è§†é¢‘æ¯”ä¾‹æ¥è‡ªé€‚åº”å®¹å™¨å¤§å°ï¼Œä½†è¿™ä¼šå¯¼è‡´ä¸åŸå§‹æ¯”ä¾‹ä¸¥é‡å¤±è°ƒï¼Œæ¯”å¦‚åœ¨ç½‘é¡µä¸Šé€šå¸¸æ˜¯å®½ã€‰é«˜ï¼Œä½†å¦‚æœè§†é¢‘æ˜¯ç«–å±çš„ï¼Œè¿™æ—¶å°±ä¼šå‹ç¼©è§†é¢‘é«˜åº¦é€‚åº”å®¹å™¨ï¼Œè§†è§‰æ•ˆæœå¤§æ‰“æŠ˜æ‰£ã€‚</li>
<li>è§†é¢‘ä¸è¶³ä»¥æ’‘æ»¡æ•´ä¸ªå®¹å™¨æ—¶ï¼Œä¼šå­˜åœ¨é»‘è¾¹</li>
</ul>
</li>
<li>è§£å†³æ–¹æ¡ˆï¼šå¦‚ä¸‹æµç¨‹å›¾æ‰€ç¤ºï¼ŒåŸºäºå½“å‰ä¼ å…¥çš„è§†é¢‘åŸå§‹å°ºå¯¸ã€è§†çª—å®½é«˜ã€è®¾å®šçš„æœ€å¤§å®½é«˜ï¼ŒåŠ¨æ€è®¡ç®—å½“å‰è§†é¢‘ä¸‹æ’­æ”¾å™¨çš„å®½é«˜ï¼Œå®ç°åœ¨è®¾å®šçš„æœ€å¤§å®½é«˜èŒƒå›´å†…ï¼š
<ul>
<li>è§†é¢‘å®½æˆ–è€…é«˜å¤§äºè®¾å®šæœ€å¤§å®½é«˜ï¼ŒåŸºäºæ¯”ä¾‹ç¼©æ”¾è§†é¢‘å®½é«˜</li>
<li>è§†é¢‘å®½å’Œé«˜éƒ½ä¸è¶…è¿‡è®¾å®šçš„æœ€å¤§å®½é«˜ï¼Œä½¿ç”¨åŸå§‹è§†é¢‘å®½é«˜</li>
</ul>
</li>
<li>å®ç°æ•ˆæœ
<ul>
<li>è§†é¢‘å®½é«˜å’Œæ’­æ”¾å™¨å®½é«˜å®Œå…¨ä¸€è‡´ï¼Œé¿å…å­˜åœ¨é»‘è¾¹çš„ç°è±¡</li>
<li>ç¼©æ”¾åä¾ç„¶ä¿æŒè§†é¢‘åŸå§‹æ¯”ä¾‹ï¼Œä¿è¯è§†è§‰æ•ˆæœ</li>
<li>é€šè¿‡CSS æ ·å¼è°ƒæ•´ï¼Œå¯ä»¥å°†æ’­æ”¾å™¨èƒŒæ™¯è®¾ç½®ä¸ºtransparentï¼Œå½“è§†é¢‘åŠ è½½æ—¶ï¼Œå°±ä¸ä¼šä¸€ç›´å‘ˆç°é»‘è‰²èƒŒæ™¯</li>
</ul>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00f5c22ab42a4f0a842f34f36341d1fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTQzMzM5NTAxNTEy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449555&amp;x-signature=2995oLrjOolCGlR78maaSUZ7tGU%3D" alt="åŠ¨æ€è®¡ç®—æ’­æ”¾å™¨å°ºå¯¸.jpg" loading="lazy"/>
4.  éƒ¨åˆ†ä»£ç </p>
<pre><code class="hljs language-ini" lang="ini"> computed: {
    // å°†åŠ¨æ€è®¡ç®—çš„è§†é¢‘å®½é«˜ç»‘å®šåˆ°æ’­æ”¾å®¹å™¨
    getVideoBoxStyle() {
      const <span class="hljs-attr">w</span> = this.boxWidth || <span class="hljs-number">0</span><span class="hljs-comment">;</span>
      const <span class="hljs-attr">h</span> = this.boxHeight || <span class="hljs-number">0</span><span class="hljs-comment">;</span>
      const <span class="hljs-attr">style</span> = {}<span class="hljs-comment">;</span>

      if (w &gt; 0 &amp;&amp; h &gt; 0) {
        <span class="hljs-attr">style.width</span> = w + <span class="hljs-string">'px'</span><span class="hljs-comment">;</span>
        <span class="hljs-attr">style.height</span> = h + <span class="hljs-string">'px'</span><span class="hljs-comment">;</span>
      }

      return style<span class="hljs-comment">;</span>
    },
  },    
methods:{
    // åŸºäºåŸå§‹å°ºå¯¸å’Œå½“å‰å¯ç”¨ç©ºé—´ï¼Œè®¡ç®—æ’­æ”¾å™¨å°ºå¯¸    
    handleBoxSizeResize() {
      const { w, h } = this.naturalVideo || {}<span class="hljs-comment">;</span>
      const { LIMIT_W, LIMIT_H } = this<span class="hljs-comment">;</span>

      // å–è§†çª—å®½é«˜ä¸è®¾ç½®çš„æœ€å¤§å®½é«˜çš„æœ€å°å€¼ï¼Œä½œä¸ºæ’­æ”¾å™¨çš„æœ€å¤§å®½é«˜
      const <span class="hljs-attr">maxW</span> = Math.min(window.innerWidth, LIMIT_W)<span class="hljs-comment">;</span>
      const <span class="hljs-attr">maxH</span> = Math.min(window.innerHeight, LIMIT_H)<span class="hljs-comment">;</span>

      // å–å®½åº¦ã€é«˜åº¦ç¼©æ”¾æ¯”ä¾‹çš„æœ€å°å€¼ï¼Œä¿è¯è§†é¢‘å®Œæ•´æ˜¾ç¤º
      const <span class="hljs-attr">scale</span> = Math.min(<span class="hljs-number">1</span>, Math.min(maxW / w, maxH / h))<span class="hljs-comment">;</span>

      <span class="hljs-attr">this.boxWidth</span> = Math.max(<span class="hljs-number">0</span>, Math.round(w * (isFinite(scale) ? scale : <span class="hljs-number">1</span>)))<span class="hljs-comment">;</span>
      <span class="hljs-attr">this.boxHeight</span> = Math.max(<span class="hljs-number">0</span>, Math.round(h * (isFinite(scale) ? scale : <span class="hljs-number">1</span>)))<span class="hljs-comment">;</span>
    },

    // åŸºäºæœ€å¤§å®½é«˜ï¼ŒåŠ¨æ€è®¡ç®—è§†é¢‘å®½é«˜
    getVideoContainerSize() {
      const <span class="hljs-attr">player</span> = this.<span class="hljs-variable">$refs</span>.videoPlayer.player<span class="hljs-comment">;</span>
      const <span class="hljs-attr">node</span> = player.el().querySelector(<span class="hljs-string">'video'</span>)<span class="hljs-comment">;</span>

      const <span class="hljs-attr">compute</span> = () =&gt; {
        const <span class="hljs-attr">originVideoWidth</span> = node.videoWidth<span class="hljs-comment">;</span>
        const <span class="hljs-attr">originVideoHeight</span> = node.videoHeight<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.naturalVideo</span> = { w: originVideoWidth, h: originVideoHeight }<span class="hljs-comment">;</span>
        this.handleBoxSizeResize()<span class="hljs-comment">;</span>
      }<span class="hljs-comment">;</span>

      // è‹¥å·²åŠ è½½å…ƒæ•°æ®ï¼Œç›´æ¥è®¡ç®—ï¼›å¦åˆ™ç›‘å¬åˆ°åŠ è½½åï¼Œæ‰§è¡Œcompute
      if (node &amp;&amp; node.readyState &gt;= 1) {
        compute()<span class="hljs-comment">;</span>
      } else if (node) {
        node.addEventListener('loadedmetadata', compute, { once: true })<span class="hljs-comment">;</span>
      }
    },
}
</code></pre>
<h4 data-id="heading-12">å¤šè§†é¢‘åˆ‡æ¢æ’­æ”¾</h4>
<ol>
<li>è§£å†³ä»€ä¹ˆé—®é¢˜ï¼šå½“å‰ä¸šåŠ¡èƒŒæ™¯ä¸‹ï¼Œå¤šä¸ªè§†é¢‘åœ¨å¼¹çª—å†…æŒ‰é¡ºåºæ’åˆ—ï¼Œå¦‚æœè¦æŸ¥çœ‹å…¶ä»–è§†é¢‘ï¼Œéœ€è¦é€€å‡ºå½“å‰è§†é¢‘åï¼Œå†ç‚¹å‡»å¦ä¸€ä¸ªè§†é¢‘æŸ¥çœ‹ï¼Œæ“ä½œéº»çƒ¦</li>
<li>è§£å†³æ–¹æ¡ˆï¼š
<ul>
<li>åœ¨è§†é¢‘é¢„è§ˆé¡µé¢å¢åŠ å·¦ã€å³ç®­å¤´iconï¼Œç»‘å®šclickäº‹ä»¶ï¼ŒåŸºäºå½“å‰è§†é¢‘ç´¢å¼•ï¼Œå½“åˆ‡æ¢ä¸Šä¸€æ¡è§†é¢‘æ—¶ï¼Œçˆ¶ç»„ä»¶å°†index-1ç´¢å¼•çš„è§†é¢‘ä¿¡æ¯ä¼ å…¥æ’­æ”¾å™¨ç»„ä»¶ï¼Œæ’­æ”¾å™¨é‡æ–°æ¸²æŸ“ï¼›åˆ‡æ¢ä¸‹ä¸€æ¡è§†é¢‘æ—¶ï¼ŒåŒç†ã€‚</li>
<li>ç›‘å¬<code>keyDown</code>äº‹ä»¶ï¼ŒæŒ‰ä¸‹é”®ç›˜å·¦ç®­å¤´ã€å³ç®­å¤´æ—¶ï¼ŒåŒä¸Šé¢é€»è¾‘ã€‚</li>
<li>å¢åŠ <code>watch</code>ç›‘å¬ï¼Œå½“ç›‘å¬åˆ°è§†é¢‘æ•°æ® viewerData æ›´æ–°æ—¶ï¼Œ<code>é‡ç½®è§†é¢‘é¢„è§ˆæ•°æ®</code>ï¼ŒåŒæ—¶è¿›è¡Œ<code>è§†é¢‘åˆ‡æº</code></li>
</ul>
</li>
<li>å®ç°æ•ˆæœ
<ul>
<li>ç‚¹å‡»å·¦å³ç®­å¤´ï¼Œæ”¯æŒä¸Šä¸€æ¡/ä¸‹ä¸€æ¡åˆ‡æ¢è§†é¢‘</li>
<li>ç›‘å¬é”®ç›˜äº‹ä»¶ï¼Œæ”¯æŒé”®ç›˜å·¦å³ç®­å¤´äº‹ä»¶æ¥åˆ‡æ¢è§†é¢‘</li>
</ul>
</li>
<li>éƒ¨åˆ†ä»£ç </li>
</ol>

<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é‡ç½®è§†é¢‘çŠ¶æ€</span>
    handleVideoStateReset() {
      <span class="hljs-keyword">this</span>.boxWidth = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.boxHeight = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.naturalVideo = { w: <span class="hljs-number">0</span>, h: <span class="hljs-number">0</span> };
      <span class="hljs-keyword">this</span>.isLoading = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">this</span>.loadError = <span class="hljs-literal">false</span>;
    },
    <span class="hljs-comment">// è§†é¢‘åˆ‡æº</span>
    handleVideoCutResource() {
      <span class="hljs-keyword">const</span> player = <span class="hljs-keyword">this</span>.$refs.videoPlayer &amp;&amp; <span class="hljs-keyword">this</span>.$refs.videoPlayer.player;
      <span class="hljs-keyword">const</span> newSrc = <span class="hljs-keyword">this</span>.viewerData &amp;&amp; <span class="hljs-keyword">this</span>.viewerData.subLink;

      <span class="hljs-keyword">if</span> (player &amp;&amp; newSrc) {
        player.pause();
        player.src([{ src: newSrc, type: <span class="hljs-string">'video/mp4'</span> }]);
        player.load();

        <span class="hljs-comment">// ç›‘å¬è§†é¢‘äº‹ä»¶</span>
        <span class="hljs-keyword">this</span>.bindVideoEvents(player);

        player.one(<span class="hljs-string">'loadedmetadata'</span>, () =&gt; {
          <span class="hljs-keyword">this</span>.getVideoContainerSize();
        });
      }
    },    
    <span class="hljs-comment">// ä¸Šä¸€ä¸ªè§†é¢‘</span>
    handlePreVideoChange(index) {
      <span class="hljs-keyword">this</span>.handleVideoSwitch(index, -<span class="hljs-number">1</span>, <span class="hljs-keyword">this</span>.dialogData.carveUrlList.length);
    },
    <span class="hljs-comment">// ä¸‹ä¸€ä¸ªè§†é¢‘</span>
    handleNextVideoChange(index) {
      <span class="hljs-keyword">this</span>.handleVideoSwitch(index, <span class="hljs-number">1</span>, <span class="hljs-keyword">this</span>.dialogData.carveUrlList.length);
    },
    <span class="hljs-comment">// é”®ç›˜å·¦å³ç®­å¤´åˆ‡æ¢è§†é¢‘</span>
    handleVideoKeyDown(event) {
      <span class="hljs-keyword">const</span> length = <span class="hljs-keyword">this</span>.dialogData.carveUrlList.length;
      <span class="hljs-keyword">const</span> index = Number(<span class="hljs-keyword">this</span>.videoSafeAreaViewer.index) || <span class="hljs-number">0</span>;

    <span class="hljs-comment">// è§†é¢‘æŸ¥çœ‹å™¨æœªæ¸²æŸ“ã€è§†é¢‘åˆ—è¡¨ä¸ºç©ºã€åªæœ‰ä¸€ä¸ªè§†é¢‘æ—¶ï¼Œä¸æ‰§è¡Œåˆ‡æ¢äº‹ä»¶</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.videoSafeAreaViewer.visible || !length || length === <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">if</span> (event.key === <span class="hljs-string">'ArrowRight'</span>) {
        <span class="hljs-keyword">this</span>.handleVideoSwitch(index, <span class="hljs-number">1</span>, length);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.key === <span class="hljs-string">'ArrowLeft'</span>) {
        <span class="hljs-keyword">this</span>.handleVideoSwitch(index, -<span class="hljs-number">1</span>, length);
      }
    },
    <span class="hljs-comment">// åˆ‡æ¢è§†é¢‘</span>
    handleVideoSwitch(index, step, len) {
      <span class="hljs-keyword">const</span> videoList = <span class="hljs-keyword">this</span>.dialogData.carveUrlList || [];
      <span class="hljs-keyword">const</span> idx = (index + step + len) % len;

      <span class="hljs-keyword">this</span>.handleVideoPreview(videoList[idx], idx, <span class="hljs-keyword">this</span>.dialogData.carveUrlList);
    },
</code></pre>
<h4 data-id="heading-13">è§†é¢‘åŠ è½½æç¤º</h4>
<ol>
<li>è§£å†³ä»€ä¹ˆé—®é¢˜
<ul>
<li>è§†é¢‘åŠ è½½æ—¶ï¼Œé¡µé¢æ²¡æœ‰å†…å®¹æ˜¾ç¤ºï¼Œç”¨æˆ·å¯¹è§†é¢‘åŠ è½½æ— æ„ŸçŸ¥</li>
</ul>
</li>
<li>è§£å†³æ–¹æ¡ˆï¼šåœ¨è§†é¢‘æ’­æ”¾å™¨å®¹å™¨ä¸­ï¼Œå¢åŠ æç¤ºå—
<ul>
<li>è§†é¢‘åŠ è½½ä¸­ï¼Œè®¾ç½® isLoading: trueï¼Œæ¸²æŸ“æç¤ºå—ï¼Œæç¤ºå†…å®¹ï¼šè§†é¢‘æ­£åœ¨åŠ è½½ä¸­ï¼Œè¯·ç¨åâ€¦â€¦</li>
<li>è§†é¢‘åŠ è½½å¤±è´¥ï¼Œè®¾ç½® loadingError: trueï¼Œæ¸²æŸ“æç¤ºå—ï¼Œæç¤ºå†…å®¹ï¼šè§†é¢‘åŠ è½½å¤±è´¥ï¼›å¢åŠ <code>el-icon-refresh-left</code>å›¾æ ‡ï¼Œç»‘å®šclickäº‹ä»¶æ”¯æŒé‡æ–°åŠ è½½</li>
<li>é‡æ–°åŠ è½½äº‹ä»¶åŒ…æ‹¬ï¼š1ã€é‡ç½®é¢„è§ˆæ•°æ®ï¼Œ2ã€è§†é¢‘åˆ‡æº</li>
<li>è§†é¢‘åŠ è½½å®Œæˆï¼Œæç¤ºå—ä¸å¯è§ï¼Œæ’­æ”¾è§†é¢‘</li>
</ul>
</li>
<li>å®ç°æ•ˆæœ
<ul>
<li>è§†é¢‘åŠ è½½ä¸­ã€åŠ è½½å¤±è´¥æç¤ºï¼Œç”¨æˆ·å¯æ„ŸçŸ¥è§†é¢‘åŠ è½½è¿›åº¦</li>
<li>åŠ è½½å¤±è´¥æ—¶æ”¯æŒé‡æ–°åŠ è½½ï¼Œé¿å…å› å¶å‘ç½‘ç»œåŸå› å¯¼è‡´çš„å¤±è´¥ï¼Œç”¨æˆ·æ— éœ€åˆ·æ–°/é€€å‡ºå°±èƒ½å†æ¬¡å°è¯•åŠ è½½è§†é¢‘</li>
</ul>
</li>
<li>éƒ¨åˆ†ä»£ç </li>
</ol>

<pre><code class="hljs language-xml" lang="xml"> <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-player-wrapper"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"getVideoBoxStyle"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- è§†é¢‘åŠ è½½æç¤º --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">"isLoading || loadingError"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-status-tip"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status-content"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- åŠ è½½ä¸­ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"isLoading &amp;&amp; !loadingError"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loading-state"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-icon-loading status-icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status-text"</span>&gt;</span>è§†é¢‘æ­£åœ¨åŠ è½½ä¸­ï¼Œè¯·ç¨å...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- åŠ è½½å¤±è´¥ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">"loadingError"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"error-state"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status-text"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"color: #f56c6c"</span>
                &gt;</span>è§†é¢‘åŠ è½½å¤±è´¥<span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-icon-refresh-left"</span> @<span class="hljs-attr">click.stop</span>=<span class="hljs-string">"handleVideoReload"</span>&gt;</span>&lt;/i
              &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- è§†é¢‘æ’­æ”¾å™¨ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">video-player</span>
          <span class="hljs-attr">:key</span>=<span class="hljs-string">"`${index}-${viewerData.subLink}`"</span>
          <span class="hljs-attr">ref</span>=<span class="hljs-string">"videoPlayer"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"video-player"</span>
          <span class="hljs-attr">:options</span>=<span class="hljs-string">"playerOptions"</span>
          @<span class="hljs-attr">dblclick.native</span>=<span class="hljs-string">"toggleFullscreen"</span>
          @<span class="hljs-attr">waiting</span>=<span class="hljs-string">"handleVideoWaiting"</span>
          @<span class="hljs-attr">canplay</span>=<span class="hljs-string">"handleVideoCanPlay"</span>
          @<span class="hljs-attr">loadeddata</span>=<span class="hljs-string">"handleVideoLoadedData"</span>
          @<span class="hljs-attr">error</span>=<span class="hljs-string">"handleVideoError"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-14">åŒå‡»è¿›å…¥/é€€å‡ºå…¨å±</h4>
<ol>
<li>è§£å†³ä»€ä¹ˆé—®é¢˜ï¼švideo-playerç»„ä»¶æœªæ˜¾ç¤ºé…ç½®åŒå‡»è¿›å…¥/é€€å‡ºå…¨å±äº‹ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨ç»‘å®šdbclickäº‹ä»¶</li>
<li>è§£å†³æ–¹æ¡ˆï¼šä¸ºè§†é¢‘æ’­æ”¾å™¨ç»‘å®šdbclickäº‹ä»¶</li>
<li>å®ç°æ•ˆæœï¼šéå…¨å±çŠ¶æ€ä¸‹åŒå‡»å…¨å±æ’­æ”¾ï¼Œåä¹‹é€€å‡ºå…¨å±çŠ¶æ€</li>
<li>éƒ¨åˆ†ä»£ç </li>
</ol>

<pre><code class="hljs language-ini" lang="ini">  // åŒå‡»åˆ‡æ¢å…¨å±
    toggleFullscreen() {
      const <span class="hljs-attr">videoPlayer</span> = this.<span class="hljs-variable">$refs</span>.videoPlayer<span class="hljs-comment">;</span>
      const <span class="hljs-attr">player</span> = videoPlayer &amp;&amp; videoPlayer.player<span class="hljs-comment">;</span>

      if (!player) {
        console.warn('<span class="hljs-section">[MKVideoSafeAreaViewer]</span> toggleFullscreen: player not ready')<span class="hljs-comment">;</span>
        return<span class="hljs-comment">;</span>
      }

      if (player.isFullscreen()) {
        player.exitFullscreen()<span class="hljs-comment">;</span>
      } else {
        player.requestFullscreen()<span class="hljs-comment">;</span>
      }
    },
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uni-appD4ï¼ˆuni-formså­¦ä¹ ä¸å›é¡¾ï¼‰]]></title>    <link>https://juejin.cn/post/7601044684773883942</link>    <guid>https://juejin.cn/post/7601044684773883942</guid>    <pubDate>2026-01-31T07:33:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601044684773883942" data-draft-id="7599634796583960582" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uni-appD4ï¼ˆuni-formså­¦ä¹ ä¸å›é¡¾ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2026-01-31T07:33:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±æ³¡è„šçš„é¸¡è…¿"/> <meta itemprop="url" content="https://juejin.cn/user/4466663535419179"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uni-appD4ï¼ˆuni-formså­¦ä¹ ä¸å›é¡¾ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4466663535419179/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±æ³¡è„šçš„é¸¡è…¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:33:45.000Z" title="Sat Jan 31 2026 07:33:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.è¡¥å……å°ç¨‹åºè·¯ç”±è·³è½¬æ–¹å¼</h2>
<p><strong>Â·wx.navigateToï¼š</strong> æŒ‰ç…§é¡ºåºå‘é¡µé¢æ ˆä¸­æ”¾å…¥æ‰“å¼€è¿‡çš„é¡µé¢</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43cafe65021b42249ecc99940ac716d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=5R0oOb%2F7cV8sWmJkzJ%2FVKPpDcAg%3D" alt="image.png" loading="lazy"/> <strong>Â·wx.redierctToï¼š</strong> å…ˆæŠŠä¸Šä¸€ä¸ªé¡µé¢åˆ æ‰ï¼Œå†æŠŠè‡ªå·±é¡µé¢æ”¾å…¥æ ˆå†…</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a24954e26404475af5c49f34f3a29f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=W75oxZoWq46clwuEO21nKP4feDI%3D" alt="image.png" loading="lazy"/></p>
<p><strong>Â·wx.reLaunchï¼š</strong> æ¸…ç©ºé¡µé¢æ ˆ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46b7b99c955747b4aaf3faa50f4a8d1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=nLhkjbqfKYCNjqmLc%2F2jMFmPf%2FQ%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">2. uni-file-pickerï¼šå®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½</h2>
<h3 data-id="heading-2">2.1 å¼€é€šuniCloud Webäº‘å­˜å‚¨ç©ºé—´</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.dcloud.net.cn%2F" target="_blank" title="https://dev.dcloud.net.cn/" ref="nofollow noopener noreferrer">dev.dcloud.net.cn/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91ccabdb148e4ea58c65e1828c5369b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=Mn1DAul8DG%2BKxzPY0jg5ny7BWh8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">2.2 åœ¨é¡¹ç›®ä¸­ä¸äº‘ç©ºé—´å…³è”</h3>
<p>å…ˆåˆ›å»ºäº‘å¼€å‘ç¯å¢ƒ
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52e83cff49fb4d07bbc2ea7a8a062599~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=s9kC6aXT2fnUI6aLo7jnrS8x1uY%3D" alt="image.png" loading="lazy"/>
å†ç‚¹å‡»å…³è”</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4b0a252df69459993bf71a45aa929cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=8weVuhl7OD32II8H3ZA0Q1kup%2BU%3D" alt="image.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/730194352ffa4408986f656db1ba4eef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=vMWoGaHeiLb0vShb%2FpdEZr0g2FE%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">2.3 ä½¿ç”¨uni-file-picker</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Funiapp.dcloud.net.cn%2Fcomponent%2Funiui%2Funi-file-picker.html" target="_blank" title="https://uniapp.dcloud.net.cn/component/uniui/uni-file-picker.html" ref="nofollow noopener noreferrer">uni-appå®˜ç½‘</a>
ä¸Šä¼ ç»“æœå¯ä»¥ä½¿ç”¨v-modelè·å–</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2aa3625cc1e84d23a402ba4c074287ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=QlLeodt6Dfse81dGxQxasuz%2Fo%2BM%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">2.3.1 éªŒè¯</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c3871ba486b4ed48a36f949427c8627~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=XTEpWN9PVQ4Xv0uP8Ghn0wY0tew%3D" alt="image.png" loading="lazy"/><br/>
<strong>ä¸Šé¢çš„æ•°ç»„å’Œä¸‹æ–¹çš„æ•°ç»„å¿…é¡»è‡³å°‘éƒ½è¦æœ‰ä¸€ä¸ªå•å…ƒï¼Œå¦åˆ™â€˜æäº¤â€™æŒ‰é’®ä¸é«˜äº®</strong></p>
<h5 data-id="heading-6">2.3.1.1 å®šä¹‰ä¸Šå‡­è¯ä¸ä¸‹å‡­è¯æ•°ç»„</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c937fe481414434a93ef540c0957175c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=ChPdiP1k5CX8i7Dsr5T2NxCuis8%3D" alt="image.png" loading="lazy"/>
<strong>åšåˆ¤æ–­ï¼Œå½“ä¸¤ä¸ªæ•°ç»„éƒ½æœ‰æ•°æ®æ—¶æ‰ä¸ç¦ç”¨button</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce2badfd1e9e4ce29379764d83f2f8f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=2aD04h8te2vo3fETMgRw4pt63sw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">2.4 æ¥å£åªéœ€è¦urlï¼Œæ‰€ä»¥è¦å¤„ç†æ‰å…¶ä»–çš„å­—æ®µ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54a3c9d3d3784bb88e7330d07946f54e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=c2CoJF90KlR2bWWr%2Fh7viYFg%2BbU%3D" alt="image.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f889657491d147dd9298dfc3fb482551~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=6R6huxVJTr5mq1DUlbbE8XoIWpE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/764ebf173f954fc7a122fa3b641f5535~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=zrOhv%2FWlqmlLz4kKDGh13%2F0mjWs%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4023b67ff0c542e99db974d25b35b62c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=1Ucjlv36PTzrqDkfEl3Qt930Yzs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">2.5 å½“ç”¨æˆ·ç‚¹å‡»æäº¤çš„æ—¶å€™ï¼Œè°ƒç”¨æ¥å£ï¼Œæäº¤æ•°ç»„çš„url</h3>
<h4 data-id="heading-9">2.5.1 å°è£…æ¥å£</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/886403218b664269bdb0c59ad14291f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=r7nz4K3kvf5ovQqq85Z9aBikjX4%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-10">2.5.2 ç›‘å¬æŒ‰é’®</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95c614b61d6641e9b6b5ad81ace1e73d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=3VzlTwArXxQv8vtXXMcGFWk4BWQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c2d89725607488eb1ee22a77b334892~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=S8qp5IggS1JVKi%2BKk%2BJJ4QAFnsc%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-11">3 åœ¨é€”</h2>
<p>æ³¨æ„ï¼šæ˜¯ä¸€å¯¹ä¸€è¿é€ï¼Œæ‰€ä»¥åœ¨é€”æœ€å¤šåªèƒ½æœ‰ä¸€æ¡ä»»åŠ¡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be0aa6ffb125412d85c45897bdadd102~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=cTQ5tCxHncxOgmGk4Gh%2BQswrxLk%3D" alt="image.png" loading="lazy"/>
å®ç°ç»„ä»¶ä¸€åŠ è½½å°±æ‰§è¡Œé€»è¾‘
<strong>è·å–æ¥å£æ•°æ®</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9bd2b5ee10a41f2826e91f7cb8aa32e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=NMLyBSovM1ag4wL6z77IagxWid8%3D" alt="image.png" loading="lazy"/>
<strong>æ¸²æŸ“æ•°æ®</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04d0fce3cf08464f849fafdfcfe5944e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=4%2B%2FJWRZmwDmCNxV8kqa1UGlSYsI%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48549e4772744da98ae0e1781e1e537f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=%2BRUSn65i6sNYRDj6hPO6WJHdlXw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-12">4 å¼‚å¸¸ä¸ŠæŠ¥</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad8f1b3487a84c5b9bf995c6e0ff5a41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=UscvTdvzQEavNgjqWdOQNjXRuyk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13">4.1 å¼‚å¸¸æ—¶é—´</h3>
<p>ä½¿ç”¨åˆ°uni-datetime-pickerå’Œuni-listç»„ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3834044bc66940f690e625cd8d10d3d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=xmrdDOlYi2uXZ5SJ0kRefp1Iqw4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0283692e9a67492b96f8ece6b6ab9e5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=qwmpiaFPMnLvVjx%2F3Dcv42L4cJ8%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/062e9898e75746d8b678ec43f976309c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=W9wH52xCD3udA05WllskoM96pnY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-14">4.2 ä¸ŠæŠ¥ä½ç½®</h3>
<p>éœ€è¦è°ƒç”¨wx.chooseLocationå’Œwx.chooseLocation</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6efd3ca87c00466fba56da5c647c8b0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=vEoNcr42NlYCNxY1bx1QHowrwrg%3D" alt="image.png" loading="lazy"/>
å»è…¾è®¯ç”³è¯·key</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d987c9069314400bb908331ce7f463a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=NToQ7MUAvSVgLml4NbvY1bn9hv4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/652b68bb52af4fb0a9b65452325697cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=spMIMMdfSUO%2FW0F%2FNSC2AfLQ8Vw%3D" alt="image.png" loading="lazy"/>
æ‹¿åˆ°ç”¨æˆ·é€‰æ‹©çš„åœ°å€ï¼Œæ¸²æŸ“åˆ°é¡µé¢ä¸Š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b9dab8f44614e5781927b4e2fc393cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=ZgzD0isYR4HgIhA5dPy9r7BQyrQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-15">4.3 å¼‚å¸¸ç±»å‹</h3>
<p>ä½¿ç”¨changeäº‹ä»¶ç›‘å¬ç”¨æˆ·æœ‰æ²¡æœ‰é€‰æ‹©æˆ–è€…æœ‰æ²¡æœ‰å–æ¶ˆ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bd12f666cb7424380585e92e77450b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=f8F0Ej35HhxaIcUkIp4SPCgZhzQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fad193d5c4a45cfba6ff1af433692a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=clIIJ%2FRK3ZtuQWO2qrmslfnFd8E%3D" alt="image.png" loading="lazy"/>
ç›‘å¬äº‹ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73e8688b2bea41b89fff2f16ac6e646e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=MktKcq2P%2FQZ4oOiEFZCkaRIvhbc%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e305494cfdf04e6a965b0eab662197ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=xyQ9tD5SYnuWCndJKxKdPLvmuNE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5746e2562cfc4c749aa45649a162fb77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=LymK6LA6J8%2FPESvhtoMIZCBFlos%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/778c5fe29a084aa8b89aaa21258b9fd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=b3dzsKIVs%2FxUW90FqjtkXWfBJ%2FU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-16">4.4 å¼‚å¸¸æè¿°</h3>
<p>ä½¿ç”¨v-modelè·å–å³å¯</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5801d1ed7acd47f1ab82f019d9356be1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=sKM8CLJo%2FwNNkA9qIRAYD4khmAY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3c74b439a4b469dab44cd327d1200ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=vYEdjgKolkpnMQMPpHBEuUfmxkU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-17">4.5 å¼‚å¸¸å›¾ç‰‡</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c0f4561bf8a42e4b45706b52b609ba3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=%2FnCmpuMES9gB%2FpgErOFXg%2BA0j5Y%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6656266056834da5b84d60131d503c1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=EAyb54U1liSnjc4uBQwt5ZAqybg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-18">4.6 è°ƒç”¨æ¥å£ç”¨äºæäº¤æ•°æ®</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80785df083b943e7af7a44cd9eedcc46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=ighVrhHBg3ifuj7p3f7x47vclNI%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67c77e47ac1d451e92be7f26c97a8fb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=6L%2F4dT%2BeMtRZXNi4jPYD2QCmtFg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-19">4.7 ç”¨æˆ·é€‰æ‹©å¼‚å¸¸ç±»å‹ï¼Œå¹¶ä¸”å›æ˜¾åˆ°é¡µé¢</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9b107c2623443cfba3d655b8af23a1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=rdCTzjfSAWaXQww0vIZUR4nkHvs%3D" alt="image.png" loading="lazy"/>
<strong>æ¸²æŸ“å›æ˜¾</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/004d8ed45d2d468f9dfc433276fd69cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=270tFMszEnOaO1PnWVp1SRAfq4E%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f34c61f2ce34c9daa143dda0a6d51ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=8XO2NcIPtcY9hbu5fcZOKHtwZ1Q%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdfb63665e5f42a6ba26d422a7df2f4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=C8zgBHsd1rZVkhYpBl23WVIVAk0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-20">4.8 è°ƒç”¨æ¥å£</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8236d40f03be4ed68dbee8087cec5606~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=9AAIm%2F9o1jVaMaGgdp%2FRJH3vqH8%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/934cbc30c2a74b1f9aff04befc02b736~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=X%2Blmik5iNW3vFX26j18%2FApL7EAg%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ed825c0068f4b50a19d1e2caf7e4edf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=IPjuCdJcr%2BFqgCD%2FKziqHCmHoB8%3D" alt="image.png" loading="lazy"/>
å…¶ä¸­ä¼ è¿‡å»çš„idè¦ä»urlä¸­è·å–ï¼Œæ‰€ä»¥åˆè¦ä½¿ç”¨onLoadï¼Œæ¥è·å–idï¼ˆè¿™é‡Œçš„idå¯¹åº”çš„å‚æ•°åä¸ºtransportTaskIdï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afc8df7be1e24b3388f101ccb2809df3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=bOLkESwWpq9mB1yCiNzpxgpS3TU%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19141a7f8d2447fca7f3705e13eab317~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=Xj1aFI1%2FXBktAXRJTpvDcOPAwmQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f99b5b332f04986a96974df1a798537~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=kjbS1DQj9FxpaYP6n%2BJEtkSPOrY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-21">5 å¼‚å¸¸ä¿¡æ¯å­˜åœ¨å°±æ˜¾ç¤ºï¼Œæ²¡æœ‰åˆ™éšè—</h2>
<p><strong>æ¸²æŸ“æ•°æ®</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9b3465f645f450987b2b88c9699f91b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770449630&amp;x-signature=W63pothzIH6JQXykhmAdjIKtsmg%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSSä¼ªå…ƒç´ ï¼šç»™HTMLç©¿ä¸Š"éšå½¢æ–—ç¯·"çš„é­”æ³•]]></title>    <link>https://juejin.cn/post/7601053058856206342</link>    <guid>https://juejin.cn/post/7601053058856206342</guid>    <pubDate>2026-01-31T07:46:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601053058856206342" data-draft-id="7600994087588495379" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" CSSä¼ªå…ƒç´ ï¼šç»™HTMLç©¿ä¸Š&quot;éšå½¢æ–—ç¯·&quot;çš„é­”æ³•"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-31T07:46:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Leeå·"/> <meta itemprop="url" content="https://juejin.cn/user/2402874087453658"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             CSSä¼ªå…ƒç´ ï¼šç»™HTMLç©¿ä¸Š"éšå½¢æ–—ç¯·"çš„é­”æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2402874087453658/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Leeå·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:46:01.000Z" title="Sat Jan 31 2026 07:46:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">CSSä¼ªå…ƒç´ ï¼šç»™HTMLç©¿ä¸Š"éšå½¢æ–—ç¯·"çš„é­”æ³•</h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šä¸€åœºçœ‹ä¸è§çš„åŒ–å¦†èˆä¼š</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨å‚åŠ ä¸€åœºåŒ–å¦†èˆä¼šï¼Œä½†è§„åˆ™å¾ˆç‰¹åˆ«ï¼šä½ <strong>ä¸èƒ½</strong>ç»™è‡ªå·±æˆ´ä¸Šé¢å…·æˆ–ç©¿ä¸Šæˆæœï¼Œåªèƒ½è¯·ä¸€ä½"é­”æ³•åŒ–å¦†å¸ˆ"ï¼ˆCSSï¼‰åœ¨ä½ èº«ä¸Šç›´æ¥ç»˜åˆ¶å¦†å®¹ã€‚è¿™ä½åŒ–å¦†å¸ˆæ‰‹æ³•é«˜è¶…ï¼Œä»–èƒ½å‡­ç©ºåœ¨ä½ è€³è¾¹ç”»ä¸Šè€³ç¯ï¼Œåœ¨é¢å¤´ç‚¹ä¸Šè£…é¥°â€”â€”è€Œè¿™ä¸€åˆ‡éƒ½ä¸éœ€è¦ä½ çœŸæ­£ä½©æˆ´ä»»ä½•å®ç‰©ã€‚</p>
<p>è¿™å°±æ˜¯<strong>CSSä¼ªå…ƒç´ </strong>çš„é­”æ³•ï¼å®ƒä»¬å°±åƒHTMLå…ƒç´ çš„"éšå½¢æ–—ç¯·"ï¼Œè®©æˆ‘ä»¬åœ¨ä¸ä¿®æ”¹HTMLç»“æ„çš„æƒ…å†µä¸‹ï¼Œä¸ºé¡µé¢æ·»åŠ å„ç§è£…é¥°æ•ˆæœã€‚</p>
<h3 data-id="heading-2">ç¬¬ä¸€ç« ï¼šè®¤è¯†"åŒèƒèƒå¹½çµ"â€”â€”::beforeå’Œ::after</h3>
<p>ä¼ªå…ƒç´ ä¸­æœ€å¸¸ç”¨çš„å°±æ˜¯è¿™å¯¹"åŒèƒèƒå…„å¼Ÿ"ï¼š<code>::before</code>å’Œ <code>::after</code>ã€‚å®ƒä»¬ä¸æ˜¯HTMLä¸­çœŸå®å­˜åœ¨çš„å…ƒç´ ï¼Œè€Œæ˜¯CSSåˆ›é€ çš„"å¹½çµå…ƒç´ "ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é­”æ³•å’’è¯­çš„åŸºæœ¬æ ¼å¼ */</span>
.å…ƒç´ <span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>; <span class="hljs-comment">/* é­”æ³•çš„æ ¸å¿ƒï¼šå¿…é¡»å¿µå‡ºå’’è¯­ */</span>
    <span class="hljs-comment">/* å…¶ä»–æ ·å¼å±æ€§ */</span>
}

.å…ƒç´ <span class="hljs-selector-pseudo">::after</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>; <span class="hljs-comment">/* åŒæ ·éœ€è¦å’’è¯­ */</span>
    <span class="hljs-comment">/* å…¶ä»–æ ·å¼å±æ€§ */</span>
}
</code></pre>
<h4 data-id="heading-3">é­”æ³•è§„åˆ™ç¬¬ä¸€æ¡ï¼šcontentå’’è¯­</h4>
<p><code>content</code>å±æ€§æ˜¯å¼€å¯ä¼ªå…ƒç´ é­”æ³•çš„<strong>é’¥åŒ™</strong>ã€‚å³ä½¿ä½ æƒ³åˆ›å»ºç©ºçš„å†…å®¹ï¼Œä¹Ÿå¿…é¡»å†™ä¸Š <code>content: ""</code>ï¼Œå°±åƒå¿µå’’è¯­ä¸€æ ·ï¼Œä¸å¿µå°±æ²¡é­”æ³•ï¼</p>
<h3 data-id="heading-4">ç¬¬äºŒç« ï¼šä¼ªå…ƒç´ çš„å®æˆ˜é­”æ³•â€”â€”åˆ›å»ºç¬‘è„¸è¡¨æƒ…</h3>
<p>è®©æˆ‘ä»¬å›åˆ°æ–‡ç« å¼€å¤´çš„ä»£ç ï¼Œçœ‹çœ‹è¿™ä¸ª"ç¬‘è„¸é­”æ³•"æ˜¯å¦‚ä½•å®ç°çš„ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŸºç¡€çš„è„¸éƒ¨ */</span>
<span class="hljs-selector-class">.face</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ffdd59</span>; <span class="hljs-comment">/* é˜³å…‰é»„è‰² */</span>
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>; <span class="hljs-comment">/* å˜æˆåœ†å½¢ */</span>
    <span class="hljs-attribute">position</span>: relative; <span class="hljs-comment">/* é‡è¦ï¼šä¸ºä¼ªå…ƒç´ è®¾ç½®èˆå° */</span>
}

<span class="hljs-comment">/* å¬å”¤ä¸¤åª"å¹½çµçœ¼ç›" */</span>
<span class="hljs-selector-class">.face</span><span class="hljs-selector-pseudo">::after</span>, <span class="hljs-selector-class">.face</span><span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>; <span class="hljs-comment">/* å¿µå’’è¯­ï¼šåˆ›é€ å­˜åœ¨ */</span>
    <span class="hljs-attribute">position</span>: absolute; <span class="hljs-comment">/* è®©å®ƒä»¬æ¼‚æµ®åœ¨è„¸éƒ¨ä¸Š */</span>
    <span class="hljs-attribute">width</span>: <span class="hljs-number">18px</span>;  <span class="hljs-comment">/* çœ¼ç›å®½åº¦ */</span>
    <span class="hljs-attribute">height</span>: <span class="hljs-number">8px</span>;  <span class="hljs-comment">/* çœ¼ç›é«˜åº¦ */</span>
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#badc58</span>; <span class="hljs-comment">/* æ¸…æ–°çš„é»„ç»¿è‰² */</span>
    <span class="hljs-attribute">top</span>: <span class="hljs-number">20px</span>; <span class="hljs-comment">/* ä»å¤´é¡¶å¾€ä¸‹20åƒç´  */</span>
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>; <span class="hljs-comment">/* æ¤­åœ†å½¢çš„çœ¼ç› */</span>
}

<span class="hljs-comment">/* å³çœ¼ï¼šè°ƒçš®åœ°å¾€å³çœ‹ */</span>
<span class="hljs-selector-class">.face</span><span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">right</span>: -<span class="hljs-number">8px</span>; <span class="hljs-comment">/* ä»å³è¾¹å¾€å·¦åç§»8pxï¼Œç¨å¾®çªå‡º */</span>
}

<span class="hljs-comment">/* å·¦çœ¼ï¼šä¿çš®åœ°å¾€å·¦çœ‹ */</span>
<span class="hljs-selector-class">.face</span><span class="hljs-selector-pseudo">::after</span> {
    <span class="hljs-attribute">left</span>: -<span class="hljs-number">5px</span>; <span class="hljs-comment">/* ä»å·¦è¾¹å¾€å³åç§»5pxï¼Œç¨å¾®çªå‡º */</span>
}
</code></pre>
<h4 data-id="heading-5">é­”æ³•æ•ˆæœå¯è§†åŒ–ï¼š</h4>
<pre><code class="hljs language-scss" lang="scss">ğŸ‘ï¸          ğŸ˜Š         ğŸ‘ï¸
      (::before)   (.face)    (::after)
       å³çœ¼å¹½çµ      ç¬‘è„¸ä¸»ä½“    å·¦çœ¼å¹½çµ
       å‘å³çªå‡º                å‘å·¦çªå‡º
</code></pre>
<p>è¿™ä¸ªç¬‘è„¸æœ€å¦™çš„åœ°æ–¹åœ¨äºï¼šHTMLåªéœ€è¦ä¸€ä¸ªç®€å•çš„ <code>&lt;div class="face"&gt;&lt;/div&gt;</code>ï¼Œæ‰€æœ‰çš„çœ¼ç›è£…é¥°éƒ½ç”±CSSå‡­ç©ºåˆ›é€ ï¼</p>
<h3 data-id="heading-6">ç¬¬ä¸‰ç« ï¼šä¸ºä»€ä¹ˆä¸ç”¨çœŸå®å…ƒç´ ï¼Ÿâ€”â€”é­”æ³•çš„æ™ºæ…§</h3>
<p>ä½ å¯èƒ½ä¼šé—®ï¼š"ä¸ºä»€ä¹ˆä¸ç”¨çœŸå®çš„ <code>&lt;span&gt;</code>å…ƒç´ æ¥å½“çœ¼ç›å‘¢ï¼Ÿ"</p>
<p>è®©æˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p>
<h4 data-id="heading-7">æ–¹å¼Aï¼šä½¿ç”¨çœŸå®å…ƒç´ ï¼ˆéº»ç“œæ–¹æ³•ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"face"</span>&gt;
    &lt;span <span class="hljs-attr">class</span>=<span class="hljs-string">"eye left"</span>&gt;&lt;/span&gt;
    &lt;span <span class="hljs-attr">class</span>=<span class="hljs-string">"eye right"</span>&gt;&lt;/span&gt;
&lt;/div&gt;
</code></pre>
<h4 data-id="heading-8">æ–¹å¼Bï¼šä½¿ç”¨ä¼ªå…ƒç´ ï¼ˆå·«å¸ˆæ–¹æ³•ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"face"</span>&gt;&lt;/div&gt;
</code></pre>
<p><strong>å·«å¸ˆçš„ä¸‰å¤§ç†ç”±ï¼š</strong></p>
<ol>
<li><strong>HTMLä¿æŒçº¯å‡€</strong>ï¼šHTMLåº”è¯¥åªå…³å¿ƒ<strong>å†…å®¹ç»“æ„</strong>ï¼Œè€Œä¸æ˜¯<strong>è¡¨ç°è£…é¥°</strong>ã€‚çœ¼ç›æ˜¯è£…é¥°ï¼Œä¸æ˜¯å†…å®¹ã€‚</li>
<li><strong>ç»´æŠ¤æ›´å®¹æ˜“</strong>ï¼šæƒ³æ”¹å˜çœ¼ç›æ ·å¼ï¼Ÿåªéœ€ä¿®æ”¹CSSï¼Œå®Œå…¨ä¸ç”¨ç¢°HTMLã€‚</li>
<li><strong>æ€§èƒ½æ›´ä¼˜</strong>ï¼šä¼ªå…ƒç´ ä¸ä¼šå¢åŠ çœŸå®çš„DOMèŠ‚ç‚¹ï¼Œæµè§ˆå™¨æ¸²æŸ“èµ·æ¥æ›´è½»å¿«ã€‚</li>
</ol>
<h3 data-id="heading-9">ç¬¬å››ç« ï¼šä¼ªå…ƒç´ çš„æ›´å¤šé­”æ³•åº”ç”¨</h3>
<p>ä¼ªå…ƒç´ çš„é­”æ³•è¿œä¸æ­¢ç”»çœ¼ç›ï¼å®ƒä»¬åœ¨Webè®¾è®¡ä¸­æ— å¤„ä¸åœ¨ï¼š</p>
<h4 data-id="heading-10">é­”æ³•1ï¼šä¼˜é›…çš„å¼•ç”¨æ ‡è®°</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">blockquote</span><span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">"â€œ"</span>; <span class="hljs-comment">/* å·¦å¼•å· */</span>
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">3em</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#ccc</span>;
}

<span class="hljs-selector-tag">blockquote</span><span class="hljs-selector-pseudo">::after</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">"â€"</span>; <span class="hljs-comment">/* å³å¼•å· */</span>
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">3em</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#ccc</span>;
}
</code></pre>
<h4 data-id="heading-11">é­”æ³•2ï¼šè‡ªå®šä¹‰åˆ—è¡¨å›¾æ ‡</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">"âœ¨"</span>; <span class="hljs-comment">/* æ˜Ÿæ˜Ÿå›¾æ ‡ */</span>
    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;
}
</code></pre>
<h4 data-id="heading-12">é­”æ³•3ï¼šå·¥å…·æç¤ºçš„å°ç®­å¤´</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.tooltip</span><span class="hljs-selector-pseudo">::after</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-comment">/* ç»˜åˆ¶ä¸‰è§’å½¢ç®­å¤´ */</span>
    <span class="hljs-attribute">border</span>: <span class="hljs-number">10px</span> solid transparent;
    <span class="hljs-attribute">border-top-color</span>: <span class="hljs-number">#333</span>;
}
</code></pre>
<h3 data-id="heading-13">ç¬¬äº”ç« ï¼šä¼ªå…ƒç´ çš„å·¥ä½œåŸç†â€”â€”é­”æ³•çš„ç§‘å­¦</h3>
<p>è™½ç„¶å«"ä¼ªå…ƒç´ "ï¼Œä½†å®ƒä»¬åœ¨æµè§ˆå™¨ä¸­è¡¨ç°å¾—åƒçœŸå®å…ƒç´ ä¸€æ ·ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æµè§ˆå™¨çœ¼ä¸­çš„ä¼ªå…ƒç´  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"face"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è¿™æ˜¯::before --&gt;</span>
    ğŸ˜‰
    <span class="hljs-comment">&lt;!-- è¿™æ˜¯å…ƒç´ çš„å®é™…å†…å®¹ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ --&gt;</span>
    ğŸ˜Š
    <span class="hljs-comment">&lt;!-- è¿™æ˜¯::after --&gt;</span>
    ğŸ˜‰
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-14">ä½ç½®å…³ç³»ä¸‰å…„å¼Ÿï¼š</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æºä»£ç é¡ºåº */</span>
.å…ƒç´ <span class="hljs-selector-pseudo">::before</span> { <span class="hljs-comment">/* å¤§å“¥ï¼šåœ¨æœ€å‰é¢ */</span> }
.å…ƒç´  { <span class="hljs-comment">/* äºŒå¼Ÿï¼šå®é™…å†…å®¹ */</span> }
.å…ƒç´ <span class="hljs-selector-pseudo">::after</span> { <span class="hljs-comment">/* ä¸‰å¼Ÿï¼šåœ¨æœ€åé¢ */</span> }
</code></pre>
<h3 data-id="heading-15">ç¬¬å…­ç« ï¼šä¼ªå…ƒç´  vs ä¼ªç±»â€”â€”ä¸è¦ææ··çš„é­”æ³•</h3>
<p>æ–°æ‰‹å¸¸æŠŠä¼ªå…ƒç´ å’Œä¼ªç±»ææ··ï¼Œè®°ä½è¿™ä¸ªç®€å•åŒºåˆ«ï¼š</p>
<ul>
<li>
<p><strong>ä¼ªå…ƒç´ </strong>ï¼š<code>::before</code>ã€<code>::after</code>ã€<code>::first-line</code></p>
<ul>
<li><strong>åˆ›é€ </strong>æ–°çš„è™šæ‹Ÿå…ƒç´ </li>
<li>åŒå†’å· <code>::</code>ï¼ˆCSS3è§„èŒƒï¼Œå…¼å®¹å•å†’å·<code>:</code>ï¼‰</li>
</ul>
</li>
<li>
<p><strong>ä¼ªç±»</strong>ï¼š<code>:hover</code>ã€<code>:focus</code>ã€<code>:nth-child()</code></p>
<ul>
<li><strong>é€‰æ‹©</strong>å…ƒç´ çš„ç‰¹å®šçŠ¶æ€</li>
<li>å•å†’å· <code>:</code></li>
</ul>
</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä¼ªç±»ï¼šé¼ æ ‡æ‚¬åœæ—¶å˜è‰² */</span>
<span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">background-color</span>: blue;
}

<span class="hljs-comment">/* ä¼ªå…ƒç´ ï¼šæ·»åŠ è£…é¥°æ€§å†…å®¹ */</span>
<span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">"ğŸ‘‰ "</span>;
}
</code></pre>
<h3 data-id="heading-16">ç¬¬ä¸ƒç« ï¼šé­”æ³•çš„å±€é™ä¸ç¦å¿Œ</h3>
<p>è™½ç„¶ä¼ªå…ƒç´ å¾ˆå¼ºå¤§ï¼Œä½†ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼š</p>
<h4 data-id="heading-17">å¯ä»¥ç”¨ä¼ªå…ƒç´ ï¼ˆè£…é¥°æ€§å†…å®¹ï¼‰ï¼š</h4>
<p>âœ… è£…é¥°æ€§å›¾æ ‡ã€è§’æ ‡</p>
<p>âœ… å·¥å…·æç¤ºçš„ç®­å¤´</p>
<p>âœ… å¼•ç”¨ç¬¦å·</p>
<p>âœ… æ¸…é™¤æµ®åŠ¨çš„ç©ºå…ƒç´ </p>
<p>âœ… <strong>æˆ‘ä»¬çš„ç¬‘è„¸çœ¼ç›</strong></p>
<h4 data-id="heading-18">ä¸è¦ç”¨ä¼ªå…ƒç´ ï¼ˆé‡è¦å†…å®¹ï¼‰ï¼š</h4>
<p>âŒ é‡è¦çš„å¯¼èˆªé“¾æ¥</p>
<p>âŒ éœ€è¦è¢«æœç´¢å¼•æ“æ”¶å½•çš„æ–‡å­—</p>
<p>âŒ éœ€è¦JavaScriptäº¤äº’çš„å…ƒç´ </p>
<p>âŒ å¯¹å¯è®¿é—®æ€§é‡è¦çš„å†…å®¹</p>
<h3 data-id="heading-19">ç¬¬å…«ç« ï¼šç°ä»£é­”æ³•è¿›é˜¶</h3>
<h4 data-id="heading-20">ç»„åˆé­”æ³•ï¼šå¤šé‡ä¼ªå…ƒç´ </h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/* åˆ›å»ºæ›´å¤æ‚çš„è£…é¥° */</span>
.icon::before {
    <span class="hljs-comment">/* èƒŒæ™¯å±‚ */</span>
}
.icon::after {
    <span class="hljs-comment">/* å‰æ™¯å±‚ */</span>
}
</code></pre>
<h4 data-id="heading-21">åŠ¨æ€é­”æ³•ï¼šç»“åˆCSSå˜é‡</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.face</span><span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">var</span>(--eye-size, <span class="hljs-number">18px</span>);
    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--eye-size, <span class="hljs-number">18px</span>) * <span class="hljs-number">0.444</span>);
}
</code></pre>
<h3 data-id="heading-22">ç»“è¯­ï¼šæˆä¸ºCSSé­”æ³•å¸ˆ</h3>
<p>CSSä¼ªå…ƒç´ å°±åƒWebå¼€å‘ä¸­çš„"éšå½¢ç”»ç¬”"ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿï¼š</p>
<ol>
<li><strong>ä¿æŒHTMLçš„è¯­ä¹‰çº¯å‡€</strong>â€”â€”å†…å®¹å°±æ˜¯å†…å®¹ï¼Œè£…é¥°äº¤ç»™CSS</li>
<li><strong>å®ç°ä¼˜é›…çš„è§†è§‰æ•ˆæœ</strong>â€”â€”æ— éœ€æ±¡æŸ“DOMç»“æ„</li>
<li><strong>æé«˜ä»£ç ç»´æŠ¤æ€§</strong>â€”â€”æ‰€æœ‰æ ·å¼é›†ä¸­ç®¡ç†</li>
<li><strong>ä¼˜åŒ–é¡µé¢æ€§èƒ½</strong>â€”â€”å‡å°‘ä¸å¿…è¦çš„DOMèŠ‚ç‚¹</li>
</ol>
<p>è®°ä½è¿™ä¸ªé­”æ³•å£è¯€ï¼š</p>
<blockquote>
<p><strong>"contentä¸å¯å°‘ï¼Œå®šä½è¦è®°ç‰¢ï¼Œè£…é¥°ç”¨ä¼ªå…ƒï¼Œå†…å®¹ç”¨æ ‡ç­¾"</strong></p>
</blockquote>
<p>ä¸‹æ¬¡å½“ä½ æƒ³è¦æ·»åŠ ä¸€äº›è£…é¥°æ€§å…ƒç´ æ—¶ï¼Œå…ˆé—®é—®è‡ªå·±ï¼š"è¿™å¯ä»¥ç”¨ä¼ªå…ƒç´ å®ç°å—ï¼Ÿ" å¾ˆå¤šæ—¶å€™ï¼Œç­”æ¡ˆéƒ½æ˜¯è‚¯å®šçš„ï¼</p>
<p>ç°åœ¨ï¼Œæ‹¿èµ·ä½ çš„CSSé­”æ–ï¼ˆé”®ç›˜ï¼‰ï¼Œå¼€å§‹ç”¨ä¼ªå…ƒç´ åˆ›é€ æ›´å¤šç¥å¥‡çš„Webé­”æ³•å§ï¼ğŸ©âœ¨</p>
<hr/>
<p><strong>é­”æ³•å°æµ‹éªŒ</strong>ï¼šä½ èƒ½åªç”¨CSSä¼ªå…ƒç´ åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„å¤ªé˜³ç³»åŠ¨ç”»å—ï¼Ÿæç¤ºï¼šä¸€ä¸ªdivä»£è¡¨å¤ªé˜³ï¼Œä¼ªå…ƒç´ ä»£è¡¨è¡Œæ˜Ÿ... æ— é™åˆ›æ„ç­‰ç€ä½ ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»å…¥é—¨åˆ°è½åœ°ï¼šMindSporeå®æˆ˜æŒ‡å—ä¸ç»éªŒæ€»ç»“]]></title>    <link>https://juejin.cn/post/7600999271770537984</link>    <guid>https://juejin.cn/post/7600999271770537984</guid>    <pubDate>2026-01-31T07:50:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600999271770537984" data-draft-id="7601049142865625088" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»å…¥é—¨åˆ°è½åœ°ï¼šMindSporeå®æˆ˜æŒ‡å—ä¸ç»éªŒæ€»ç»“"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-31T07:50:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="skytier"/> <meta itemprop="url" content="https://juejin.cn/user/2067496505970135"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»å…¥é—¨åˆ°è½åœ°ï¼šMindSporeå®æˆ˜æŒ‡å—ä¸ç»éªŒæ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2067496505970135/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    skytier
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:50:21.000Z" title="Sat Jan 31 2026 07:50:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>MindSporeæ˜¯åä¸ºè‡ªç ”å…¨åœºæ™¯AIæ¡†æ¶ï¼Œè¦†ç›–å¼€å‘ã€è®­ç»ƒã€éƒ¨ç½²å…¨é“¾è·¯ï¼Œé€‚é…å¤šé¢†åŸŸéœ€æ±‚ï¼ŒåŠ©åŠ›æ–°æ‰‹å…¥é—¨ä¸èµ„æ·±å¼€å‘è€…è½åœ°é¡¹ç›®ã€‚</p>
<p>æœ¬æ–‡ç²¾ç®€æç‚¼å…¥é—¨å‡†å¤‡ã€æ ¸å¿ƒå®æ“ã€æ¨¡å‹éƒ¨ç½²ã€æ€§èƒ½ä¼˜åŒ–ã€é—®é¢˜æ’æŸ¥äº”å¤§æ¨¡å—çš„å®æˆ˜è¦ç‚¹ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹ã€å°‘èµ°å¼¯è·¯ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…¥é—¨å‡†å¤‡ï¼šæ‰¾å‡†æ–¹å‘ï¼Œå¿«é€Ÿæ­å»ºå¯ç”¨ç¯å¢ƒ</h2>
<p>æ–°æ‰‹å…¥é—¨æ ¸å¿ƒåŸåˆ™ï¼šå…ˆæ˜ç¡®æ¡†æ¶å®šä½ï¼Œå†æŒ‰éœ€æ­å»ºç¯å¢ƒï¼Œé¿å…æ— æ•ˆæŠ•å…¥ã€‚</p>
<h3 data-id="heading-1">1.Â å…ˆææ‡‚ï¼šMindSporeçš„æ ¸å¿ƒä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯</h3>
<p>MindSporeæ ¸å¿ƒä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯ï¼š</p>






























<table><thead><tr><th>æ ¸å¿ƒç‰¹æ€§</th><th>æ ¸å¿ƒä»·å€¼</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>åŠ¨é™æ€å›¾ç»Ÿä¸€</td><td>è°ƒè¯•ä¾¿æ·ã€æ‰§è¡Œé«˜æ•ˆï¼Œä¸€é”®åˆ‡æ¢</td><td>ç ”å‘è°ƒè¯•ã€é‡äº§éƒ¨ç½²</td></tr><tr><td>å…¨åœºæ™¯éƒ¨ç½²</td><td>ç«¯è¾¹äº‘æ— ç¼è¿ç§»ï¼Œä¸€æ¬¡å¼€å‘å¤šç«¯éƒ¨ç½²</td><td>è¾¹ç¼˜æ¨ç†ã€äº‘ç«¯è®­ç»ƒ</td></tr><tr><td>è‡ªåŠ¨å¹¶è¡Œ</td><td>æ— éœ€æ‰‹åŠ¨ç¼–å†™å¹¶è¡Œé€»è¾‘</td><td>å¤§è§„æ¨¡è®­ç»ƒä»»åŠ¡</td></tr><tr><td>è‡ªåŠ¨å¾®åˆ†</td><td>çœå»æ‰‹åŠ¨åå‘ä¼ æ’­ä»£ç </td><td>å„ç±»æ·±åº¦å­¦ä¹ æ¨¡å‹å¼€å‘</td></tr></tbody></table>
<p>æ–°æ‰‹å»ºè®®ï¼šä¼˜å…ˆæŒæ¡åŠ¨æ€å›¾æ¨¡å¼ä¸åŸºç¡€æµç¨‹ï¼Œå†å­¦é™æ€å›¾ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-2">2.Â ç¯å¢ƒæ­å»ºï¼š3æ­¥æå®šï¼Œé¿å¼€ç‰ˆæœ¬å…¼å®¹å‘</h3>
<p>æ–°æ‰‹ä¼˜å…ˆé€‰CPUç‰ˆæœ¬å¿«é€ŸéªŒè¯ï¼Œç¯å¢ƒæ­å»ºå…³é”®æ­¥éª¤ï¼š</p>
<h4 data-id="heading-3">ï¼ˆ1ï¼‰ç‰ˆæœ¬é€‰å‹ä¸å®‰è£…</h4>
<p>æ ¸å¿ƒæ³¨æ„ï¼šPythonéœ€3.7~3.9ï¼Œæ¨èæ¸…åæºå®‰è£…ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ ¸å¿ƒå®‰è£…å‘½ä»¤ï¼ˆä¸‰é€‰ä¸€ï¼‰ï»¿</span>
pip install <span class="hljs-attr">mindspore-cpu</span>==<span class="hljs-number">2.2</span>.<span class="hljs-number">10</span> -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install <span class="hljs-attr">mindspore-gpu</span>==<span class="hljs-number">2.2</span>.<span class="hljs-number">10</span> -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install <span class="hljs-attr">mindspore-ascend</span>==<span class="hljs-number">2.2</span>.<span class="hljs-number">10</span> -i https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre>
<h4 data-id="heading-4">ï¼ˆ2ï¼‰ç¯å¢ƒéªŒè¯</h4>
<p>ç¯å¢ƒéªŒè¯ï¼ˆè¾“å‡º(32,Â 1)å³æ­£å¸¸ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> mindspore <span class="hljs-keyword">as</span> ms
<span class="hljs-keyword">import</span> mindspore.nn <span class="hljs-keyword">as</span> nn
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

ms.set_context(mode=ms.PYNATIVE_MODE, device_target=<span class="hljs-string">"CPU"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleNet</span>(nn.Cell):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.linear = nn.Dense(<span class="hljs-number">10</span>, <span class="hljs-number">1</span>)
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-keyword">return</span> self.linear(x)

<span class="hljs-built_in">print</span>(SimpleNet()(ms.Tensor(np.random.randn(<span class="hljs-number">32</span>, <span class="hljs-number">10</span>), ms.float32)).shape)
</code></pre>
<h4 data-id="heading-5">ï¼ˆ3ï¼‰é¿å‘è¦ç‚¹</h4>
<ul>
<li>å®‰è£…å¤±è´¥å…ˆæŸ¥Pythonç‰ˆæœ¬ï¼Œå†²çªç”¨è™šæ‹Ÿç¯å¢ƒï¼›</li>
<li>æ˜‡è…¾ç‰ˆæœ¬éœ€åŒ¹é…é©±åŠ¨ä¸CANNå·¥å…·åŒ…ã€‚</li>
</ul>
<h3 data-id="heading-6">3.Â å·¥å…·é€‰å‹ï¼š3ä¸ªæ ¸å¿ƒå·¥å…·æå‡å¼€å‘æ•ˆç‡</h3>
<p>æ ¸å¿ƒå¼€å‘å·¥å…·ï¼ˆ3ä¸ªï¼‰ï¼š</p>

























<table><thead><tr><th>å·¥å…·åç§°</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>å…¥é—¨ç”¨æ³•</th></tr></thead><tbody><tr><td>MindStudio</td><td>é›†æˆå¼€å‘ã€è°ƒè¯•ã€éƒ¨ç½²</td><td>é€‰MindSporeæ¨¡æ¿ï¼Œæ–­ç‚¹è°ƒè¯•</td></tr><tr><td>MindSporeÂ Hub</td><td>æä¾›é¢„è®­ç»ƒæ¨¡å‹</td><td>ç›´æ¥åŠ è½½å¾®è°ƒ</td></tr><tr><td>MindSporeÂ Profiler</td><td>æ€§èƒ½åˆ†æ</td><td>å®šä½è®­ç»ƒ/æ¨ç†ç“¶é¢ˆ</td></tr></tbody></table>
<h2 data-id="heading-7">äºŒã€æ ¸å¿ƒåŠŸèƒ½å®æ“ï¼šä»æ•°æ®åˆ°æ¨¡å‹çš„å…¨æµç¨‹æ‹†è§£</h2>
<p>æ ¸å¿ƒå¼€å‘æµç¨‹ï¼šæ•°æ®å¤„ç†â†’æ¨¡å‹æ„å»ºâ†’è®­ç»ƒæ¨ç†ï¼Œä»¥ä¸‹ä¸ºç²¾ç®€å®æ“è¦ç‚¹ã€‚</p>
<h3 data-id="heading-8">1.Â æ•°æ®å¤„ç†ï¼šç”¨Datasetæ¨¡å—é«˜æ•ˆæå®šæ•°æ®åŠ è½½</h3>
<p>æ•°æ®å¤„ç†æ ¸å¿ƒï¼šDatasetæ¨¡å—ï¼Œé‡ç‚¹æŒæ¡ä¸¤ç§åœºæ™¯ã€‚</p>
<h4 data-id="heading-9">ï¼ˆ1ï¼‰åŸºç¡€æ•°æ®é›†åŠ è½½ï¼ˆä»¥CIFAR-10ä¸ºä¾‹ï¼‰</h4>
<p>åŸºç¡€æ•°æ®é›†åŠ è½½ï¼ˆCIFAR-10ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> mindspore.dataset <span class="hljs-keyword">as</span> ds
<span class="hljs-keyword">import</span> mindspore.dataset.vision <span class="hljs-keyword">as</span> vision

<span class="hljs-comment"># åŠ è½½å¹¶é¢„å¤„ç†</span>
train_dataset = ds.Cifar10Dataset(<span class="hljs-string">"./cifar10"</span>, usage=<span class="hljs-string">"train"</span>, shuffle=<span class="hljs-literal">True</span>)
train_dataset = train_dataset.<span class="hljs-built_in">map</span>([vision.Resize((<span class="hljs-number">224</span>,<span class="hljs-number">224</span>)), 
                                   vision.Normalize([<span class="hljs-number">0.485</span>,<span class="hljs-number">0.456</span>,<span class="hljs-number">0.406</span>],[<span class="hljs-number">0.229</span>,<span class="hljs-number">0.224</span>,<span class="hljs-number">0.225</span>]),
                                   vision.HWC2CHW()], <span class="hljs-string">"image"</span>).batch(<span class="hljs-number">32</span>)
</code></pre>
<h4 data-id="heading-10">ï¼ˆ2ï¼‰è‡ªå®šä¹‰æ•°æ®é›†ï¼ˆåŠ è½½æœ¬åœ°å›¾ç‰‡æ–‡ä»¶å¤¹ï¼‰</h4>
<p>è‡ªå®šä¹‰æ•°æ®é›†æ ¸å¿ƒä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> mindspore.dataset <span class="hljs-keyword">as</span> ds
<span class="hljs-keyword">import</span> mindspore <span class="hljs-keyword">as</span> ms

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomDataset</span>(ds.Dataset):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, image_paths, labels</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.image_paths, self.labels = image_paths, labels
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, i</span>):
        img = cv2.imread(self.image_paths[i])
        img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
        img = cv2.resize(img, (<span class="hljs-number">224</span>,<span class="hljs-number">224</span>))/<span class="hljs-number">255.0</span>
        <span class="hljs-keyword">return</span> ms.Tensor(img.astype(np.float32)), ms.Tensor(self.labels[i], ms.int32)
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.image_paths)
</code></pre>
<h4 data-id="heading-11">é¿å‘è¦ç‚¹</h4>
<ul>
<li>ä¿è¯æ•°æ®æ ¼å¼ä¸æ¨¡å‹è¦æ±‚ä¸€è‡´ï¼ˆé»˜è®¤CHWï¼‰ï¼›</li>
<li>å¤§è§„æ¨¡æ•°æ®ç”¨shard+å¤šè¿›ç¨‹æå‡æ•ˆç‡ã€‚</li>
</ul>
<h3 data-id="heading-12">2.Â æ¨¡å‹æ„å»ºï¼šç»§æ‰¿Cellç±»å¿«é€Ÿæ­å»ºç½‘ç»œ</h3>
<p>æ¨¡å‹æ„å»ºæ ¸å¿ƒï¼šç»§æ‰¿nn.Cellï¼Œåœ¨constructå®šä¹‰å‰å‘ä¼ æ’­ã€‚</p>
<h4 data-id="heading-13">ï¼ˆ1ï¼‰åŸºç¡€ç½‘ç»œæ„å»ºï¼ˆç®€åŒ–ç‰ˆResNet18ï¼‰</h4>
<p>åŸºç¡€ç½‘ç»œæ„å»ºï¼ˆç®€åŒ–ResNetï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> mindspore.nn <span class="hljs-keyword">as</span> nn
<span class="hljs-keyword">from</span> mindspore.common.initializer <span class="hljs-keyword">import</span> HeNormal

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicBlock</span>(nn.Cell):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, in_c, out_c, stride=<span class="hljs-number">1</span></span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.conv1 = nn.Conv2d(in_c, out_c, <span class="hljs-number">3</span>, stride, <span class="hljs-number">1</span>, weight_init=HeNormal())
        self.bn1 = nn.BatchNorm2d(out_c)
        self.conv2 = nn.Conv2d(out_c, out_c, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, weight_init=HeNormal())
        self.bn2 = nn.BatchNorm2d(out_c)
        self.shortcut = nn.SequentialCell([nn.Conv2d(in_c, out_c, <span class="hljs-number">1</span>, stride), nn.BatchNorm2d(out_c)]) <span class="hljs-keyword">if</span> stride!=<span class="hljs-number">1</span> <span class="hljs-keyword">or</span> in_c!=out_c <span class="hljs-keyword">else</span> nn.Identity()
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self, x</span>):
        out = self.relu(self.bn1(self.conv1(x)))
        <span class="hljs-keyword">return</span> self.relu(self.bn2(self.conv2(out)) + self.shortcut(x))

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleResNet</span>(nn.Cell):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, num_classes=<span class="hljs-number">10</span></span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.conv1 = nn.Conv2d(<span class="hljs-number">3</span>, <span class="hljs-number">64</span>, <span class="hljs-number">7</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
        self.layer1 = self._make_layer(<span class="hljs-number">64</span>, <span class="hljs-number">2</span>)
        self.layer2 = self._make_layer(<span class="hljs-number">128</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
        self.avgpool = nn.AdaptiveAvgPool2d((<span class="hljs-number">1</span>,<span class="hljs-number">1</span>))
        self.fc = nn.Dense(<span class="hljs-number">128</span>, num_classes)
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_make_layer</span>(<span class="hljs-params">self, out_c, blocks, stride=<span class="hljs-number">1</span></span>):
        layers = [BasicBlock(self.in_c, out_c, stride)]
        self.in_c = out_c
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, blocks):
            layers.append(BasicBlock(self.in_c, out_c))
        <span class="hljs-keyword">return</span> nn.SequentialCell(layers)
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self, x</span>):
        x = self.relu(self.bn1(self.conv1(x)))
        x = self.maxpool(x)
        x = self.layer1(x); x = self.layer2(x)
        <span class="hljs-keyword">return</span> self.fc(self.avgpool(x).view(x.shape[<span class="hljs-number">0</span>],-<span class="hljs-number">1</span>))
</code></pre>
<h4 data-id="heading-14">ï¼ˆ2ï¼‰å¤ç”¨é¢„è®­ç»ƒæ¨¡å‹ï¼ˆè¿ç§»å­¦ä¹ ï¼‰</h4>
<p>é¢„è®­ç»ƒæ¨¡å‹å¤ç”¨ï¼ˆè¿ç§»å­¦ä¹ ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import mindspore_hub as mshub

<span class="hljs-comment"># åŠ è½½å¹¶å†»ç»“ä¸»å¹²</span>
<span class="hljs-attr">net</span> = mshub.load(<span class="hljs-string">"resnet50_ascend_v130_imagenet2012"</span>, num_classes=<span class="hljs-number">10</span>)
for param in net.get_parameters():
    if "fc" not in param.name:
        <span class="hljs-attr">param.requires_grad</span> = <span class="hljs-literal">False</span>
</code></pre>
<h4 data-id="heading-15">é¿å‘è¦ç‚¹</h4>
<ul>
<li>constructä»…ç”¨MindSporeç®—å­ï¼Œé¿å…PythonåŸç”Ÿå¾ªç¯ï¼›</li>
<li>åˆç†åˆå§‹åŒ–å‚æ•°ï¼Œé¿å…è®­ç»ƒä¸æ”¶æ•›ã€‚</li>
</ul>
<h3 data-id="heading-16">3.Â è®­ç»ƒä¸æ¨ç†ï¼šç”¨Modelç±»ç®€åŒ–æµç¨‹</h3>
<p>ç”¨Modelç±»ç®€åŒ–è®­ç»ƒæ¨ç†æµç¨‹ã€‚</p>
<h4 data-id="heading-17">ï¼ˆ1ï¼‰åŸºç¡€è®­ç»ƒæµç¨‹</h4>
<pre><code class="hljs language-ini" lang="ini">import mindspore as ms
from mindspore import Model, nn

ms.set_context(<span class="hljs-attr">mode</span>=ms.PYNATIVE_MODE, device_target=<span class="hljs-string">"CPU"</span>)

<span class="hljs-comment"># åˆå§‹åŒ–ç»„ä»¶å¹¶è®­ç»ƒ</span>
<span class="hljs-attr">net</span> = SimpleResNet(<span class="hljs-number">10</span>)
<span class="hljs-attr">model</span> = Model(net, nn.SoftmaxCrossEntropyWithLogits(<span class="hljs-literal">True</span>, <span class="hljs-string">"mean"</span>), 
              nn.Adam(net.trainable_params(), 0.001), {"accuracy"})
model.train(10, train_dataset, <span class="hljs-attr">dataset_sink_mode</span>=<span class="hljs-literal">False</span>)
</code></pre>
<p>è¯„ä¼°ä¸æ¨ç†æ ¸å¿ƒä»£ç ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">import mindspore<span class="hljs-selector-class">.ops</span> as ops

# è¯„ä¼°
test_dataset = ds<span class="hljs-selector-class">.Cifar10Dataset</span>("./cifar10", "test")<span class="hljs-selector-class">.map</span>(transform, "image")<span class="hljs-selector-class">.batch</span>(<span class="hljs-number">32</span>)
<span class="hljs-built_in">print</span>("å‡†ç¡®ç‡:", model.eval(test_dataset)<span class="hljs-selector-attr">[<span class="hljs-string">"accuracy"</span>]</span>)

# å•å›¾æ¨ç†
def <span class="hljs-built_in">predict</span>(img_path):
    img = cv2.<span class="hljs-built_in">imread</span>(img_path)
    img = ms.<span class="hljs-built_in">Tensor</span>(cv2.<span class="hljs-built_in">resize</span>(cv2.<span class="hljs-built_in">cvtColor</span>(img, cv2.COLOR_BGR2RGB), (<span class="hljs-number">224</span>,<span class="hljs-number">224</span>))/<span class="hljs-number">255.0</span>).<span class="hljs-built_in">unsqueeze</span>(<span class="hljs-number">0</span>)
    return ops.<span class="hljs-built_in">Argmax</span>(<span class="hljs-number">1</span>)(model.<span class="hljs-built_in">predict</span>(ops.<span class="hljs-built_in">transpose</span>(img, (<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)))).<span class="hljs-built_in">asnumpy</span>()[<span class="hljs-number">0</span>]

<span class="hljs-built_in">print</span>(<span class="hljs-string">"é¢„æµ‹ç±»åˆ«:"</span>, <span class="hljs-built_in">predict</span>(<span class="hljs-string">"./test.jpg"</span>))
</code></pre>
<h4 data-id="heading-18">é¿å‘è¦ç‚¹</h4>
<ul>
<li>è°ƒè¯•è®¾dataset_sink_mode=Falseï¼Œé‡äº§è®¾Trueï¼›</li>
<li>æ¨ç†é¢„å¤„ç†ä¸è®­ç»ƒä¸€è‡´ã€‚</li>
</ul>
<h2 data-id="heading-19">ä¸‰ã€æ¨¡å‹éƒ¨ç½²ï¼šå…¨åœºæ™¯è½åœ°çš„å…³é”®æ­¥éª¤</h2>
<p>éƒ¨ç½²æ ¸å¿ƒæµç¨‹ï¼šæ¨¡å‹å¯¼å‡ºâ†’æ ¼å¼è½¬æ¢â†’éƒ¨ç½²æ‰§è¡Œï¼Œèšç„¦ä¸¤å¤§åœºæ™¯ã€‚</p>
<h3 data-id="heading-20">1.Â ç¬¬ä¸€æ­¥ï¼šæ¨¡å‹å¯¼å‡ºï¼ˆå¯¼å‡ºä¸ºONNX/MINDIRæ ¼å¼ï¼‰</h3>
<p>æ¨¡å‹å¯¼å‡ºï¼ˆONNX/MINDIRï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> mindspore <span class="hljs-keyword">as</span> ms
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

input_tensor = ms.Tensor(np.random.randn(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">224</span>,<span class="hljs-number">224</span>), ms.float32)
ms.export(net, input_tensor, <span class="hljs-string">"simple_resnet.onnx"</span>, <span class="hljs-string">"ONNX"</span>)  <span class="hljs-comment"># å¤šæ¡†æ¶é€‚é…</span>
ms.export(net, input_tensor, <span class="hljs-string">"simple_resnet.mindir"</span>, <span class="hljs-string">"MINDIR"</span>)  <span class="hljs-comment"># æ˜‡è…¾é€‚é…</span>
</code></pre>
<p>é¿å‘ï¼šå¯¼å‡ºè¾“å…¥å½¢çŠ¶ä¸è®­ç»ƒä¸€è‡´ã€‚</p>
<h3 data-id="heading-21">2.Â æ˜‡è…¾ç¡¬ä»¶éƒ¨ç½²ï¼ˆè¾¹ç¼˜/äº‘ç«¯ï¼‰</h3>
<p>æ˜‡è…¾éƒ¨ç½²ï¼šMINDIRè½¬OMåéƒ¨ç½²ã€‚</p>
<h4 data-id="heading-22">ï¼ˆ1ï¼‰æ¨¡å‹è½¬æ¢ï¼ˆMINDIRâ†’OMï¼‰</h4>
<p>ä½¿ç”¨æ˜‡è…¾ATCå·¥å…·è½¬æ¢ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"># æ˜‡è…¾ATCè½¬æ¢å‘½ä»¤
atc <span class="hljs-attr">--model</span>=simple_resnet<span class="hljs-selector-class">.mindir</span> <span class="hljs-attr">--framework</span>=<span class="hljs-number">5</span> <span class="hljs-attr">--output</span>=simple_resnet_om <span class="hljs-attr">--input_format</span>=NCHW <span class="hljs-attr">--input_shape</span>="<span class="hljs-selector-tag">input</span>:<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">224</span>,<span class="hljs-number">224</span><span class="hljs-string">" --device_target=Ascend
</span></code></pre>
<h4 data-id="heading-23">ï¼ˆ2ï¼‰æ¨ç†éƒ¨ç½²</h4>
<p>é€šè¿‡AscendÂ CLÂ APIåŠ è½½OMæ¨¡å‹æ‰§è¡Œæ¨ç†ï¼Œæ ¸å¿ƒæµç¨‹ä¸CANNéƒ¨ç½²ä¸€è‡´ï¼Œå¯å¤ç”¨å®˜æ–¹æä¾›çš„æ¨ç†æ¨¡æ¿ä»£ç ã€‚</p>
<h3 data-id="heading-24">3.Â ç«¯ä¾§éƒ¨ç½²ï¼ˆæ‰‹æœº/åµŒå…¥å¼è®¾å¤‡ï¼‰</h3>
<p>ç«¯ä¾§éƒ¨ç½²ï¼šå…ˆé‡åŒ–è½»é‡åŒ–ï¼Œå†å¯¼å‡ºéƒ¨ç½²ã€‚</p>
<h4 data-id="heading-25">ï¼ˆ1ï¼‰æ¨¡å‹è½»é‡åŒ–ï¼ˆINT8é‡åŒ–ï¼‰</h4>
<p>ä½¿ç”¨MindSporeçš„model_compressionæ¨¡å—å®ç°é‡åŒ–ï¼Œå‡å°‘æ¨¡å‹ä½“ç§¯ä¸è®¡ç®—é‡ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">from mindspore import model_compression

<span class="hljs-comment"># INT8é‡åŒ–å¹¶å¯¼å‡º</span>
quant_net = model_compression.quantize(net, model_compression.QuantConfig(), train_dataset)
ms.<span class="hljs-keyword">export</span>(quant_net, input_tensor, <span class="hljs-string">"simple_resnet_quant.mindir"</span>, <span class="hljs-string">"MINDIR"</span>)
</code></pre>
<h4 data-id="heading-26">ï¼ˆ2ï¼‰ç«¯ä¾§æ¨ç†</h4>
<p>ä½¿ç”¨MindSporeÂ Liteå°†MINDIRæ¨¡å‹è½¬æ¢ä¸ºç«¯ä¾§ä¸“ç”¨æ ¼å¼ï¼Œå†é€šè¿‡ç«¯ä¾§æ¨ç†å¼•æ“ï¼ˆå¦‚Android/iOSÂ SDKï¼‰æ‰§è¡Œæ¨ç†ã€‚</p>
<h2 data-id="heading-27">å››ã€æ€§èƒ½ä¼˜åŒ–ï¼š4ä¸ªç»´åº¦æå‡è®­ç»ƒ/æ¨ç†æ•ˆç‡</h2>
<p>æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒï¼š4ä¸ªç»´åº¦æå‡æ•ˆç‡ã€‚</p>
<h3 data-id="heading-28">1.Â æ•°æ®åŠ è½½ä¼˜åŒ–ï¼šæå‡ååé‡</h3>
<ul>
<li>æ•°æ®åŠ è½½ï¼šå¼€å¯æ•°æ®ä¸‹æ²‰ã€å¤šè¿›ç¨‹ã€é¢„å–ï¼›</li>
<li>æ¨¡å‹ç»“æ„ï¼šåˆ‡æ¢é™æ€å›¾ã€å¼€å¯ç®—å­èåˆã€ç”¨è½»é‡åŒ–ç½‘ç»œï¼›</li>
<li>è®­ç»ƒç­–ç•¥ï¼šä¼˜åŒ–BatchÂ Sizeã€é€‰å¯¹ä¼˜åŒ–å™¨ã€å¼€å¯è‡ªåŠ¨å¹¶è¡Œã€‚</li>
</ul>
<h2 data-id="heading-29">äº”ã€å¸¸è§é—®é¢˜æ’æŸ¥ï¼šé«˜é¢‘å‘ä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>é«˜é¢‘é—®é¢˜æ’æŸ¥ç²¾ç®€ï¼š</p>





























<table><thead><tr><th>å¸¸è§é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>è®­ç»ƒä¸æ”¶æ•›</td><td>åˆç†åˆå§‹åŒ–å‚æ•°ã€è°ƒæ•´å­¦ä¹ ç‡ã€æ£€æŸ¥æ•°æ®é¢„å¤„ç†</td></tr><tr><td>ç®—å­ä¸æ”¯æŒ</td><td>ç”¨MindSporeå†…ç½®ç®—å­ã€å‡çº§æ¡†æ¶ç‰ˆæœ¬</td></tr><tr><td>å¯¼å‡ºå½¢çŠ¶ä¸åŒ¹é…</td><td>ä¿è¯å¯¼å‡ºä¸è®­ç»ƒè¾“å…¥å½¢çŠ¶ä¸€è‡´</td></tr><tr><td>è®­ç»ƒé€Ÿåº¦æ…¢</td><td>å¼€å¯æ•°æ®ä¸‹æ²‰ã€å¤šè¿›ç¨‹ã€åˆ‡æ¢é™æ€å›¾</td></tr><tr><td>æ˜‡è…¾OMè½¬æ¢å¤±è´¥</td><td>é‡æ–°å¯¼å‡ºMINDIRã€åŒ¹é…ç‰ˆæœ¬</td></tr></tbody></table>
<p>æ’æŸ¥æŠ€å·§ï¼šä¼˜å…ˆæŸ¥çœ‹MindSporeæ—¥å¿—å®šä½é—®é¢˜ã€‚</p>
<h2 data-id="heading-30">å…­ã€æ€»ç»“ï¼šMindSporeå­¦ä¹ çš„æ ¸å¿ƒå¿ƒæ³•</h2>
<p>å­¦ä¹ å¿ƒæ³•ï¼šå¾ªåºæ¸è¿›ï¼Œå®æˆ˜ä¸ºç‹ã€‚æŒ‰â€œç¯å¢ƒæ­å»ºâ†’æ ¸å¿ƒæµç¨‹â†’é¡¹ç›®è½åœ°â†’ä¼˜åŒ–â€æ¨è¿›ã€‚</p>
<p>MindSporeæ ¸å¿ƒä»·å€¼ï¼šç®€åŒ–å¼€å‘ã€å…¨åœºæ™¯é€‚é…ã€‚å¸Œæœ›æœ¬æ–‡åŠ©åŠ›å¼€å‘è€…å¿«é€ŸæŒæ¡ã€è½åœ°é¡¹ç›®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è…¾è®¯äº‘éƒ¨ç½²openclawï¼ˆQQæœºå™¨äººï¼‰]]></title>    <link>https://juejin.cn/post/7601046076943220751</link>    <guid>https://juejin.cn/post/7601046076943220751</guid>    <pubDate>2026-01-31T07:53:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601046076943220751" data-draft-id="7601018079620677647" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è…¾è®¯äº‘éƒ¨ç½²openclawï¼ˆQQæœºå™¨äººï¼‰"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-31T07:53:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Annie619"/> <meta itemprop="url" content="https://juejin.cn/user/4024631837330760"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è…¾è®¯äº‘éƒ¨ç½²openclawï¼ˆQQæœºå™¨äººï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4024631837330760/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Annie619
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:53:39.000Z" title="Sat Jan 31 2026 07:53:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.é€‰æ‹©é•œåƒOpenClaw</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bee8277fba9247eb9a5c206406dd1fd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5uaWU2MTk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770450819&amp;x-signature=HyuHkqBYTazQ1s2Pv%2F44Nr0JiwY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">2.## é…ç½®OpenClawçš„Channel QQ</h2>
<p>å…ˆå»qqå¼€æ”¾å¹³å°æ³¨å†Œqqæœºå™¨äºº<a href="https://link.juejin.cn?target=https%3A%2F%2Fq.qq.com%2F%23%2F" target="_blank" title="https://q.qq.com/#/" ref="nofollow noopener noreferrer">q.qq.com/#/</a>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a16a8cb3e0c4a17afff12bd7499157d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5uaWU2MTk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770450819&amp;x-signature=pOUQzfWLqMVRajR%2FTYQuwzUAGGM%3D" alt="image.png" loading="lazy"/></p>
<p>ç™»å½•æœåŠ¡æ­¦å™¨ï¼Œä½¿ç”¨å‘½ä»¤è¡Œè¿›è¡Œæ“ä½œï¼Œå¦‚å›¾
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c3f05e1080a4f188d031841869699b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5uaWU2MTk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770450819&amp;x-signature=Bhi79p%2FuKW2tsfN5pHhE%2BrU%2F2AQ%3D" alt="image.png" loading="lazy"/>
é…ç½®ä¸­ä½¿ç”¨ä¸Šä¸‹ç®­å¤´è¿›è¡Œé€‰æ‹©ï¼Œå¤šé€‰é€‰ä¸­ä½¿ç”¨ç©ºæ ¼è¿›è¡Œé€‰ä¸­ã€å–æ¶ˆã€‚
å¯ä»¥å…ˆé€‰æ‹©æ¨¡å‹ä»¥åŠQQè¿™ä¸¤ä¸ªï¼Œå…¶ä»–çš„å¯ä»¥å…ˆè·³è¿‡(<strong>æˆ‘å½“å‰é€‰æ‹©çš„æ˜¯æ™ºè°±çš„å¥—é¤ï¼Œæ¯å¤©å‡ åäº¿çš„tokenæ ¹æœ¬ç”¨ä¸å®Œ</strong>)
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bigmodel.cn%2Fglm-coding%3Fic%3D3MXTC3M7RE" target="_blank" title="https://www.bigmodel.cn/glm-coding?ic=3MXTC3M7RE" ref="nofollow noopener noreferrer">www.bigmodel.cn/glm-coding?â€¦</a></p>
<h2 data-id="heading-2">3.è®©OpenClawåœ¨åå°ä¿æŒè¿è¡Œ</h2>
<pre><code class="hljs language-bash" lang="bash">loginctl enable-linger $(<span class="hljs-built_in">whoami</span>) &amp;&amp; <span class="hljs-built_in">export</span> XDG_RUNTIME_DIR=/run/user/$(<span class="hljs-built_in">id</span> -u)
</code></pre>
<p>è¿è¡Œå®Œä¹‹åæ²¡æœ‰è¾“å‡º
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4e1900f9c9f40ab86316b0c06bb6cc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5uaWU2MTk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770450819&amp;x-signature=94OFPZiDPv6IKdyhrUTUq9L4lh0%3D" alt="image.png" loading="lazy"/>
å…ˆå®‰è£…</p>
<pre><code class="hljs language-bash" lang="bash">clawdbot daemon install
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9edceffcfbf45eaa95197526006dcda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5uaWU2MTk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770450819&amp;x-signature=%2FgfjqyRs6pqxMh2hzD%2F2lV8GPJ8%3D" alt="image.png" loading="lazy"/></p>
<p>ç»§ç»­åœ¨ç»ˆç«¯è¿›è¡Œè¾“å…¥</p>
<pre><code class="hljs language-bash" lang="bash">clawdbot daemon start
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a461f5d36d640b7a62d6e2d55439ea5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5uaWU2MTk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770450819&amp;x-signature=e6WWaXWlMikoef4f6nzj3Fo%2BLfs%3D" alt="image.png" loading="lazy"/>
éªŒè¯æ˜¯å¦æ­£å¸¸</p>
<pre><code class="hljs language-bash" lang="bash">clawdbot daemon status
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Clawdbot (Moltbot) ä¿å§†çº§å®‰è£…æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7601077290680909876</link>    <guid>https://juejin.cn/post/7601077290680909876</guid>    <pubDate>2026-01-31T08:00:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601077290680909876" data-draft-id="7601046076943237135" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Clawdbot (Moltbot) ä¿å§†çº§å®‰è£…æ•™ç¨‹"/> <meta itemprop="keywords" content="Claude,AIGC"/> <meta itemprop="datePublished" content="2026-01-31T08:00:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ·±è—blue47"/> <meta itemprop="url" content="https://juejin.cn/user/4339135019760265"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Clawdbot (Moltbot) ä¿å§†çº§å®‰è£…æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4339135019760265/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ·±è—blue47
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T08:00:10.000Z" title="Sat Jan 31 2026 08:00:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ï¼Œ<strong>Clawdbot</strong> åœ¨æŠ€æœ¯åœˆå½»åº•ç«äº†ï¼è¿™ç§çƒ­åº¦è®©äººè”æƒ³åˆ°å»å¹´ <strong>Manus</strong> å‘å¸ƒæ—¶çš„ç››å†µï¼Œå‡ ä¹åœ¨ä¸€å¤œä¹‹é—´å¼•çˆ†äº†äº’è”ç½‘ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒClawdbot ç°å·²æ­£å¼æ›´åä¸º <strong>Moltbot</strong>ï¼ŒLogo ä¹Ÿä»ä¸€åªå®Œæ•´çš„å°é¾™è™¾å˜æˆäº†ä¸€åªâ€œè„±å£³â€çš„å°é¾™è™¾ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cecbe428b1dc4188901bf82733aaa1fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex6JePYmx1ZTQ3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770451213&amp;x-signature=Gj9oSUBEcbri22Xscz7LZfcrrJY%3D" alt="Moltbot" loading="lazy"/></p>
<blockquote>
<p><strong>ğŸ’¡ å…³äºå‘½åï¼š</strong>
Moltbot æ„ä¸ºâ€œèœ•çš®â€ï¼Œå–è‡ªé¾™è™¾çš„è„±å£³è¡Œä¸ºã€‚è¿™ä¸ä»…ä¿ç•™äº†åŸæœ‰çš„é¾™è™¾å…ƒç´ ï¼Œè¿˜å·§å¦™åœ°è§„é¿äº†ä¸ Claude çš„å•†æ ‡å†²çªé—®é¢˜ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Clawdbot (Moltbot)ï¼Ÿå®ƒèƒ½åšä»€ä¹ˆï¼Ÿ</h2>
<p><strong>Clawdbot</strong>ï¼ˆç°ç§° Moltbotï¼‰ä¸ä»…ä»…æ˜¯ä¸€ä¸ªèŠå¤©æœºå™¨äººï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥éƒ¨ç½²åœ¨æœ¬åœ°ç”µè„‘æˆ–æœåŠ¡å™¨ä¸Šçš„ <strong>AI Agentï¼ˆæ™ºèƒ½ä½“ï¼‰</strong>ã€‚</p>
<p>é€šä¿—æ¥è¯´ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ª<strong>æ‹¥æœ‰ç³»ç»Ÿè¶…çº§æƒé™ï¼ˆRoot æƒé™ï¼‰çš„è¶…çº§åŠ©ç†</strong>ã€‚å¦‚æœä½ ç†Ÿæ‚‰ Claude Codeï¼Œé‚£ä¹ˆ Clawdbot å°±æ˜¯ä¸€ä¸ªæ‹¥æœ‰ä¸°å¯Œ Skillsï¼ˆæŠ€èƒ½ï¼‰ä¸”èƒ½å¤Ÿè°ƒç”¨å„ç§ MCP æœåŠ¡æ¥é—­ç¯å®Œæˆå¤æ‚ä»»åŠ¡çš„è¿›é˜¶ç‰ˆã€‚</p>
<p><strong>å®ƒçš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ä½†ä¸é™äºï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨æ•´ç†é‚®ä»¶ä¸æ—¥ç¨‹ç®¡ç†</li>
<li>è‚¡ç¥¨å¸‚åœºåˆ†æä¸æ“ä½œ</li>
<li>è‡ªåŠ¨åŒ–æ’°å†™æ¨æ–‡ä¸ç¤¾äº¤åª’ä½“è¿è¥</li>
<li>è¯»å–å¹¶æ€»ç»“ PPT/PDF æ–‡æ¡£</li>
<li><strong>24å°æ—¶åå°è¿è¡Œ</strong>ï¼Œéšæ—¶å¾…å‘½</li>
</ul>
<blockquote>
<p><strong>âš ï¸ é«˜å±é¢„è­¦ï¼ˆå¿…è¯»ï¼‰ï¼š</strong>
ç”±äº Clawdbot æ‹¥æœ‰æé«˜çš„ç³»ç»Ÿæƒé™ï¼ˆShell è®¿é—®æƒï¼‰ï¼Œ<strong>è¯·åŠ¡å¿…è°¨æ…æ“ä½œï¼</strong> ä¸€æ—¦æŒ‡ä»¤é”™è¯¯ï¼Œå¯èƒ½ä¼šè¯¯åˆ ç³»ç»Ÿå…³é”®æ–‡ä»¶ã€‚
æ­¤å¤–ï¼ŒClawdbot çš„ç½‘å…³é»˜è®¤æš´éœ²åœ¨å…¬ç½‘ä¸”ç¼ºä¹ä¸¥æ ¼çš„èº«ä»½éªŒè¯ï¼Œå®‰å…¨æ€§å­˜åœ¨æŒ‘æˆ˜ã€‚<strong>å¼ºçƒˆå»ºè®®åœ¨è™šæ‹Ÿæœºï¼ˆVMï¼‰æˆ–é—²ç½®çš„ Mac ç”µè„‘ä¸Šè¿›è¡Œéƒ¨ç½²</strong>ï¼Œé˜²æ­¢é»‘å®¢å…¥ä¾µã€‚</p>
</blockquote>
<h2 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡ä¸å®‰è£…è¦æ±‚</h2>
<p>åœ¨å¼€å§‹å®‰è£… Clawdbot ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç”µè„‘æ»¡è¶³ä»¥ä¸‹ç¯å¢ƒè¦æ±‚ï¼š</p>
<ul>
<li><strong>Node.js ç‰ˆæœ¬ï¼š</strong> &gt;= 22.0</li>
<li><strong>Gitï¼š</strong> å¿…é¡»å®‰è£…</li>
</ul>
<p><strong>ç³»ç»Ÿå»ºè®®ï¼š</strong></p>
<ul>
<li><strong>Windows ç”¨æˆ·ï¼š</strong> å¼ºçƒˆå»ºè®®ä½¿ç”¨ <strong>WSL2</strong>ï¼ˆæ¨è Ubuntu ç³»ç»Ÿï¼‰ï¼Œä½“éªŒæ›´ä½³ã€‚</li>
<li><strong>Mac ç”¨æˆ·ï¼š</strong> ç›´æ¥ä½¿ç”¨ç»ˆç«¯å³å¯ï¼Œå¼€ç®±å³ç”¨ã€‚</li>
</ul>
<h2 data-id="heading-2">ç¬¬äºŒæ­¥ï¼šClawdbot (Moltbot) å®‰è£…æ•™ç¨‹</h2>
<p>å®‰è£…è¿‡ç¨‹éå¸¸ç®€å•ï¼Œæ ¹æ®æ‚¨çš„æ“ä½œç³»ç»Ÿå¤åˆ¶ä»¥ä¸‹ Shell å‘½ä»¤å³å¯ä¸€é”®å®‰è£…ã€‚</p>
<h3 data-id="heading-3">1. macOS / Linux / Ubuntu / Debian å®‰è£…å‘½ä»¤ï¼ˆæ¨èï¼‰</h3>
<p>æ‰“å¼€ç»ˆç«¯ï¼ˆTerminalï¼‰ï¼Œè¾“å…¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl -fsSL https://molt.bot/install.sh | bash

</code></pre>
<h3 data-id="heading-4">2. Windows (PowerShell) å®‰è£…å‘½ä»¤ï¼ˆæ¨èï¼‰</h3>
<p>æ‰“å¼€ PowerShellï¼Œè¾“å…¥ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">iwr -useb https://molt.bot/install.ps1 | iex

</code></pre>
<h3 data-id="heading-5">3. å®‰è£… Beta æµ‹è¯•ç‰ˆï¼ˆå°é²œç”¨æˆ·ï¼‰</h3>
<p>å¦‚æœæ‚¨æƒ³ä½“éªŒæœ€æ–°çš„åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl -fsSL https://molt.bot/install.sh | bash -s -- --beta

</code></pre>
<h3 data-id="heading-6">4. ä½¿ç”¨ Npm åŒ…ç®¡ç†å™¨å®‰è£…ï¼ˆå¤‡é€‰ï¼‰</h3>
<p><em>æ³¨æ„ï¼šnpm ç‰ˆæœ¬ä¸ºå®˜æ–¹åˆšå‘å¸ƒï¼Œå¯èƒ½å­˜åœ¨ä¸ç¨³å®šæ€§ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ä¸Šè¿° curl/iwr è„šæœ¬å®‰è£…ã€‚</em></p>
<pre><code class="hljs language-bash" lang="bash">npm i -g moltbot@latest

</code></pre>
<p><em>æç¤ºï¼šå¦‚æœ npm å®‰è£…åæ‰¾ä¸åˆ° <code>moltbot</code> æŒ‡ä»¤ï¼Œè¯·å°è¯•ä½¿ç”¨ <code>clawdbot</code> æŒ‡ä»¤ã€‚</em></p>
<hr/>
<h2 data-id="heading-7">ç¬¬ä¸‰æ­¥ï¼šå®æˆ˜éƒ¨ç½²æ¼”ç¤ºï¼ˆä»¥ Mac ç³»ç»Ÿä¸ºä¾‹ï¼‰</h2>
<p>ä»¥ä¸‹æ¼”ç¤ºåŸºäº <strong>Node.js 22.15</strong> ç‰ˆæœ¬ã€‚</p>
<p>æ‰§è¡Œå®‰è£…å‘½ä»¤åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å…‹éš† Github ä»“åº“ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/beff76dac6ec4f0c8fd87bafe0c293e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex6JePYmx1ZTQ3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770451213&amp;x-signature=mZnVhpPaC5mMd2qStmqzf8EjjOA%3D" alt="2.png" loading="lazy"/></p>
<pre><code class="hljs language-bash" lang="bash">curl -fsSL https://molt.bot/install.sh | bash

</code></pre>
<h3 data-id="heading-8">1. é£é™©ç¡®è®¤ä¸åˆå§‹åŒ–</h3>
<p>å®‰è£…å®Œæˆåï¼Œç³»ç»Ÿä¼šæç¤º Clawdbot çš„é«˜é£é™©æ€§ã€‚</p>
<ul>
<li>è¾“å…¥ <code>yes</code> ç»§ç»­ã€‚</li>
<li>é€‰æ‹© <strong>QuickStart</strong> æ¨¡å¼ï¼ŒåŠ è½½é»˜è®¤é…ç½®ã€‚</li>
</ul>
<p>Clawdbot é»˜è®¤åˆ†é…ç«¯å£ä¸º <code>18789</code>ã€‚</p>
<h3 data-id="heading-9">2. é…ç½® AI æ¨¡å‹æˆæƒ (OAuth)</h3>
<p><strong>Clawdbot çš„ä¸€å¤§äº®ç‚¹æ˜¯æ”¯æŒ ChatGPT å’Œ Claude çš„ OAuth æˆæƒç™»å½•ã€‚</strong> è¿™æ„å‘³ç€ä½ æ— éœ€è´­ä¹°æ˜‚è´µçš„ API Keyï¼Œç›´æ¥ä½¿ç”¨ç½‘é¡µç‰ˆä¼šå‘˜æƒé™ï¼ˆå¦‚ Plusã€Teamã€Proï¼‰å³å¯é©±åŠ¨ AIã€‚</p>
<blockquote>
<p><strong>ğŸ›‘ é¿å‘æŒ‡å—ï¼š</strong>
å°½é‡é¿å…ä½¿ç”¨ Claude æˆæƒç™»å½•ï¼Œå› ä¸º Claude å®˜æ–¹é£æ§è¾ƒä¸¥ï¼Œå¯èƒ½ä¼šé™åˆ¶é Claude Code çš„è°ƒç”¨ã€‚å¦‚æœä½ å¿…é¡»ç”¨ Claude ä½†æ²¡æœ‰è´¦å·ï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffe.dtyuedan.cn%2Fshop%2Fjackma" target="_blank" title="https://fe.dtyuedan.cn/shop/jackma" ref="nofollow noopener noreferrer">Claude è´¦å·è·å–æ¸ é“</a></p>
</blockquote>
<p><strong>æ¨èæ–¹æ¡ˆï¼šä½¿ç”¨ OpenAI (Codex) æˆæƒ</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0f0d254472f498e8044a4c89ce03424~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex6JePYmx1ZTQ3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770451213&amp;x-signature=Pbk62Ju97OuYEq4hFwlij0T%2FyJQ%3D" alt="3.png" loading="lazy"/></p>
<p>åªè¦ä½ æ˜¯ ChatGPT Plusã€Business æˆ– Pro ä¼šå‘˜ï¼Œéƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<p>ä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œæˆ‘ä»¬åœ¨é…ç½®ç•Œé¢é€‰æ‹© <strong>ç¬¬ 2 ç§</strong> æˆæƒæ–¹å¼ï¼ˆæµè§ˆå™¨æˆæƒï¼‰ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6ef31842263490d839e17f90ea76e50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex6JePYmx1ZTQ3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770451213&amp;x-signature=NxMX6cqido3IYWoeThKWjprNabY%3D" alt="4.png" loading="lazy"/></p>
<p>ç»ˆç«¯ä¼šç”Ÿæˆä¸€æ¡ ChatGPT æˆæƒé“¾æ¥ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¼¹å‡ºï¼Œé€‰æ‹©ä½ çš„ä¼šå‘˜è´¦å·ç™»å½•å³å¯ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43f5e978e09f48ad8c8f207f7d70cc71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex6JePYmx1ZTQ3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770451213&amp;x-signature=8dR8NKS1e25fTZoMrBuJA7BVlOM%3D" alt="5.png" loading="lazy"/></p>
<p>è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ <strong>ChatGPT Business ä¼šå‘˜</strong>ã€‚</p>
<ul>
<li><strong>åŸå› ï¼š</strong> Business ä¼šå‘˜ç›®å‰æ€§ä»·æ¯”æé«˜ï¼Œå‡ åå—é’±å°±èƒ½äº«å—è·Ÿ Plus ä¼šå‘˜ä¸€æ ·çš„ Codex é¢åº¦ï¼Œéå¸¸é€‚åˆè·‘è¿™ç§è€— Token çš„ Agentã€‚</li>
</ul>
<blockquote>
<p><strong>ğŸ’° çœé’±æŠ€å·§ï¼š</strong>
é«˜æ€§ä»·æ¯”ä½“éªŒ Clawdbotï¼Œæ¨èä½¿ç”¨ ChatGPT Business è´¦å·ã€‚
<strong>ä¼˜æƒ å¼€é€šåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgptplus.org.cn" target="_blank" title="https://gptplus.org.cn" ref="nofollow noopener noreferrer">gptplus.org.cn</a>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf9bbf3914db4664b1f61bad1551fa6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex6JePYmx1ZTQ3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770451213&amp;x-signature=O10%2FLKQY%2FlUJw4as0FXQ7qJgguA%3D" alt="6.png" loading="lazy"/></p>
</blockquote>
<p>ç‚¹å‡»â€œç»§ç»­â€ï¼ŒæˆæƒæˆåŠŸåå›åˆ°ç»ˆç«¯æŸ¥çœ‹çŠ¶æ€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af3cd0c82459409088f687a7a1a57eea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex6JePYmx1ZTQ3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770451213&amp;x-signature=J%2BTbMiwxnXRavZZfeUanlxfxETU%3D" alt="7.png" loading="lazy"/></p>
<p><strong>PSï¼š</strong> å¦‚æœç»ˆç«¯æ²¡æœ‰è‡ªåŠ¨æŠ“å–åˆ° Tokenï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶æµè§ˆå™¨åœ°å€æ ä¸­ <code>localhost</code> å¼€å¤´çš„å®Œæ•´å›è°ƒåœ°å€ï¼Œç²˜è´´åˆ°ç»ˆç«¯å³å¯ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7bba517ee5644cca94cbcb6987ca63f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex6JePYmx1ZTQ3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770451213&amp;x-signature=jF9FeOqHrs%2BEcjcI5JcT7abG6vY%3D" alt="8.png" loading="lazy"/></p>
<h3 data-id="heading-10">3. é€‰æ‹©æ¨¡å‹ä¸é¢‘é“</h3>
<p>é»˜è®¤é€‰æ‹© <code>GPT-5.2-Codex</code> æ¨¡å‹ã€‚ä½ å¯ä»¥é€‰æ‹©è·³è¿‡ï¼Œæˆ–é…ç½®å…¶ä»–é¢‘é“ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/332fb74da4ef42ea9e0a217f08e4ab18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex6JePYmx1ZTQ3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770451213&amp;x-signature=bHRAWil3dOR8bqtNagQbxGSaaS0%3D" alt="9.png" loading="lazy"/></p>
<h3 data-id="heading-11">4. é…ç½® Skills (æŠ€èƒ½)</h3>
<p>è¿™å°±æ˜¯ AI Agent çš„çµé­‚æ‰€åœ¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/054dc1bf5248408991f8006e98207dc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex6JePYmx1ZTQ3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770451213&amp;x-signature=sW1XZRbhaJaM7BhdHjcHrLXy1Sg%3D" alt="10.png" loading="lazy"/></p>
<p>é€‰æ‹©åŒ…ç®¡ç†å·¥å…·ï¼ˆé»˜è®¤ npm å³å¯ï¼‰ã€‚ç³»ç»Ÿä¼šæ¨èä¸€äº›åŸºç¡€ Skillsï¼Œä½ å¯ä»¥æŒ‰éœ€é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥å…¨éƒ¨è·³è¿‡ã€‚
<strong>æœ€é…·çš„æ˜¯ï¼š</strong> åç»­ä½ éœ€è¦ä»€ä¹ˆåŠŸèƒ½ï¼Œç›´æ¥åœ¨å¯¹è¯æ¡†è·Ÿ Clawdbot è¯´â€œå¸®æˆ‘å®‰è£…æŸæŸ skillâ€ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨å®‰è£…ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œï¼
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f9e1d1a1fb84f1d99a5ee4a2b177f60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex6JePYmx1ZTQ3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770451213&amp;x-signature=K7XG7052onk%2FImSjxpKui64WOCk%3D" alt="11.png" loading="lazy"/></p>
<p>å¦‚æœé‡åˆ° API Key è®¾ç½®ï¼ˆå¦‚ç”Ÿå›¾æœåŠ¡ï¼‰ï¼Œæ²¡æœ‰çš„è¯ç›´æ¥å›è½¦ <code>No</code> è·³è¿‡ã€‚</p>
<h3 data-id="heading-12">5. å¼€å¯ Hooks (è‡ªåŠ¨åŒ–é’©å­)</h3>
<p>æœ€åï¼Œç³»ç»Ÿä¼šè¯¢é—®æ˜¯å¦å¼€å¯å†…ç½®é’©å­è„šæœ¬ï¼ˆHooksï¼‰ï¼Œå»ºè®®<strong>å…¨éƒ¨å¼€å¯</strong>ä»¥è·å¾—å®Œæ•´ä½“éªŒï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3913df2f1f534f30a3fc3af3a32536a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex6JePYmx1ZTQ3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770451213&amp;x-signature=iAdgWsq6UsW6UN5CTQ0xOBNySNc%3D" alt="12.png" loading="lazy"/></p>
<ul>
<li><strong>boot-mdï¼š</strong> ç½‘å…³å¯åŠ¨åè‡ªåŠ¨æ‰§è¡Œ <code>BOOT.md</code> ä¸­çš„å¼•å¯¼æŒ‡ä»¤ã€‚</li>
<li><strong>command-loggerï¼š</strong> å®¡è®¡æ—¥å¿—ï¼Œè®°å½•æ‰€æœ‰æ‰§è¡Œè¿‡çš„å‘½ä»¤ï¼ˆå®‰å…¨å®¡è®¡å¿…å¤‡ï¼‰ã€‚</li>
<li><strong>session-memoryï¼š</strong> ä¼šè¯è®°å¿†åŠŸèƒ½ï¼Œè¾“å…¥ <code>/new</code> æ—¶è‡ªåŠ¨ä¿å­˜å½“å‰ä¸Šä¸‹æ–‡å¿«ç…§ã€‚</li>
</ul>
<h2 data-id="heading-13">ç¬¬å››æ­¥ï¼šå¯åŠ¨ Web UI æ§åˆ¶å°</h2>
<p>å¯¹äºæ–°æ‰‹ç”¨æˆ·ï¼Œå¼ºçƒˆå»ºè®®é€‰æ‹© <strong>Web UI</strong> æ¨¡å¼ï¼Œå¯è§†åŒ–çš„ç½‘é¡µæ“ä½œç•Œé¢æ¯”çº¯å‘½ä»¤è¡Œæ›´å‹å¥½ã€‚</p>
<p>é…ç½®å®Œæˆåï¼Œæ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤å¯åŠ¨æ§åˆ¶å°ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">clawdbot dashboard

</code></pre>
<ul>
<li><strong>æœ¬åœ°è®¿é—®åœ°å€ï¼š</strong> <code>http://127.0.0.1:18789</code></li>
</ul>
<blockquote>
<p><strong>ğŸ“ é‡è¦æç¤ºï¼š</strong>
è™½ç„¶å·¥å…·å·²æ›´åä¸º Moltbotï¼Œä½†éƒ¨åˆ†æ—§ç‰ˆæŒ‡ä»¤å°šæœªå®Œå…¨æ›´æ–°ã€‚å¦‚æœ <code>moltbot</code> æŒ‡ä»¤æ— æ•ˆï¼Œè¯·å°è¯•æ›¿æ¢ä¸º <code>clawdbot</code> è¿è¡Œï¼Œé€šå¸¸èƒ½è§£å†³é—®é¢˜ã€‚</p>
</blockquote>
<p>ç°åœ¨ï¼Œä½ çš„ä¸“å± AI è¶…çº§å‘˜å·¥å·²ç»å°±ä½ï¼å¦‚æœä½ æ²¡æœ‰ OpenAI æˆ– Claude è´¦å·ï¼Œä¹Ÿå¯ä»¥åœ¨é…ç½®ä¸­ç»‘å®šç¬¬ä¸‰æ–¹ API Keyï¼Œä½¿ç”¨å›½å†…å¤§æ¨¡å‹æ¥é©±åŠ¨ Clawdbotã€‚</p>
<p>å¿«å»æ¢ç´¢ Clawdbot (Moltbot) çš„å¼ºå¤§èƒ½åŠ›å§ï¼</p>
<hr/>
<p>æ–‡ç« æ¥æº:<a href="https://link.juejin.cn?target=https%3A%2F%2Fgptplus.org.cn%2Fhandbook%2Fclawdbot.html" target="_blank" title="https://gptplus.org.cn/handbook/clawdbot.html" ref="nofollow noopener noreferrer">Clawdbot (Moltbot) ä¿å§†çº§å®‰è£…æ•™ç¨‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Markdown å†™ç¨¿ï¼ŒWord äº¤ç¨¿ï¼Ÿç”¨ Pandoc + è„šæœ¬ä¸€é”®è½¬æ¢ï¼Œå‘Šåˆ«æ ¼å¼ç„¦è™‘]]></title>    <link>https://juejin.cn/post/7601020578490761225</link>    <guid>https://juejin.cn/post/7601020578490761225</guid>    <pubDate>2026-01-31T07:39:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601020578490761225" data-draft-id="7601169987396288563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Markdown å†™ç¨¿ï¼ŒWord äº¤ç¨¿ï¼Ÿç”¨ Pandoc + è„šæœ¬ä¸€é”®è½¬æ¢ï¼Œå‘Šåˆ«æ ¼å¼ç„¦è™‘"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-31T07:39:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å°šæ¥ä¹Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1681597639955488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Markdown å†™ç¨¿ï¼ŒWord äº¤ç¨¿ï¼Ÿç”¨ Pandoc + è„šæœ¬ä¸€é”®è½¬æ¢ï¼Œå‘Šåˆ«æ ¼å¼ç„¦è™‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1681597639955488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å°šæ¥ä¹Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:39:20.000Z" title="Sat Jan 31 2026 07:39:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦ä¹Ÿç»å†è¿‡è¿™æ ·çš„åœºæ™¯ï¼Ÿ</p>
<ul>
<li>ç”¨ Markdown å†™æŠ€æœ¯æ–‡æ¡£ã€è®ºæ–‡æˆ–å‘¨æŠ¥ï¼Œæ€è·¯æµç•…ã€ç‰ˆæœ¬æ¸…æ™°ï¼›</li>
<li>ä¸Šçº§/å®¢æˆ·/æœŸåˆŠå´æ˜ç¡®è¦æ±‚æäº¤ <code>.docx</code> æ ¼å¼ï¼›</li>
<li>æ‰‹åŠ¨å¤åˆ¶ç²˜è´´åˆ° Word åï¼Œæ ¼å¼é”™ä¹±ã€æ ‡é¢˜å±‚çº§ä¸¢å¤±ã€ä»£ç å—å˜ä¹±ç â€¦â€¦</li>
</ul>
<p>åˆ«å†å¿å—è¿™ç§â€œç”Ÿäº§åŠ›å€’é€€â€ï¼å…¶å®ï¼Œåªéœ€ä¸€ä¸ªå¼€æºå·¥å…· <strong>Pandoc</strong> åŠ å‡ è¡Œè„šæœ¬ï¼Œå°±èƒ½å®ç° <strong>Markdown â†’ é«˜è´¨é‡ Word æ–‡æ¡£</strong> çš„è‡ªåŠ¨åŒ–è½¬æ¢â€”â€”å…¨ç¨‹å…è´¹ã€è·¨å¹³å°ã€å¯å®šåˆ¶ï¼ŒçœŸæ­£å®ç°â€œå†™å¾—çˆ½ï¼Œäº¤å¾—ç¨³â€ã€‚</p>
<p>æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºä¸€å¥—é›¶æˆæœ¬ã€é«˜æ•ˆç‡çš„ Markdown åˆ° Word è‡ªåŠ¨åŒ–å·¥ä½œæµã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆ Pandoc æ˜¯æœ€ä½³é€‰æ‹©ï¼Ÿ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpandoc.org%2F" target="_blank" title="https://pandoc.org/" ref="nofollow noopener noreferrer">Pandoc</a> è¢«èª‰ä¸ºâ€œæ–‡æ¡£æ ¼å¼çš„ç‘å£«å†›åˆ€â€ï¼Œç”± Haskell ç¼–å†™ï¼Œæ”¯æŒ <strong>40+ ç§æ ¼å¼äº’è½¬</strong>ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>Markdown â†” Word (.docx)</li>
<li>Markdown â†” PDF (via LaTeX)</li>
<li>Markdown â†” HTML / EPUB / PowerPoint ç­‰</li>
</ul>
<p>å®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>å¼€æºå…è´¹</strong>ï¼Œæ— ä»»ä½•å•†ä¸šé™åˆ¶</li>
<li><strong>ä¿ç•™è¯­ä¹‰ç»“æ„</strong>ï¼šæ ‡é¢˜ã€åˆ—è¡¨ã€è¡¨æ ¼ã€ä»£ç å—ç­‰è‡ªåŠ¨æ˜ å°„ä¸º Word æ ·å¼</li>
<li><strong>é«˜åº¦å¯å®šåˆ¶</strong>ï¼šé€šè¿‡æ¨¡æ¿ã€CSS æˆ–å…ƒæ•°æ®æ§åˆ¶è¾“å‡ºæ ·å¼</li>
<li><strong>å‘½ä»¤è¡Œé©±åŠ¨</strong>ï¼šå¤©ç„¶é€‚åˆè„šæœ¬åŒ–å’Œè‡ªåŠ¨åŒ–</li>
</ul>
<blockquote>
<p>ğŸ’¡ å°çŸ¥è¯†ï¼šè®¸å¤šçŸ¥åé¡¹ç›®ï¼ˆå¦‚ GitBookã€Obsidian å¯¼å‡ºæ’ä»¶ï¼‰åº•å±‚éƒ½ä¾èµ– Pandocã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">äºŒã€ä¸‰æ­¥æ­å»ºä½ çš„è‡ªåŠ¨è½¬æ¢è„šæœ¬</h3>
<h4 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šå®‰è£… Pandoc</h4>
<ul>
<li>
<p><strong>macOS</strong>ï¼ˆæ¨èç”¨ Homebrewï¼‰ï¼š</p>
<pre><code class="hljs">brew install pandoc
</code></pre>
</li>
<li>
<p><strong>Windows</strong>ï¼šä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fpandoc.org%2Finstalling.html" target="_blank" title="https://pandoc.org/installing.html" ref="nofollow noopener noreferrer">pandoc.org/installing.â€¦</a> ä¸‹è½½å®‰è£…åŒ…</p>
</li>
<li>
<p><strong>Linux</strong>ï¼ˆUbuntu/Debianï¼‰ï¼š</p>
<pre><code class="hljs">sudo apt install pandoc
</code></pre>
</li>
</ul>
<blockquote>
<p>âœ… éªŒè¯å®‰è£…ï¼šç»ˆç«¯è¾“å…¥ <code>pandoc --version</code>ï¼Œçœ‹åˆ°ç‰ˆæœ¬å·å³æˆåŠŸã€‚</p>
</blockquote>
<h4 data-id="heading-3">ç¬¬äºŒæ­¥ï¼šå‡†å¤‡ä½ çš„ Markdown æ–‡ä»¶</h4>
<p>å»ºè®®åœ¨æ–‡ä»¶å¼€å¤´åŠ å…¥ <strong>YAML å…ƒæ•°æ®å—</strong>ï¼Œç”¨äºæ§åˆ¶æ–‡æ¡£å±æ€§ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">title:</span> <span class="hljs-string">"2026å¹´Q1æŠ€æœ¯è§„åˆ’"</span>
<span class="hljs-attr">author:</span> <span class="hljs-string">å¼ ä¸‰</span>
<span class="hljs-attr">date:</span> <span class="hljs-number">2026-01-31</span>
<span class="hljs-meta">---
</span>
<span class="hljs-comment"># å¼•è¨€</span>

<span class="hljs-string">æœ¬æ–‡æ¡£æ—¨åœ¨...</span>
</code></pre>
<h4 data-id="heading-4">ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ä¸€é”®è½¬æ¢è„šæœ¬</h4>
<h5 data-id="heading-5">â–¶ macOS / Linuxï¼ˆ<code>md2docx.sh</code>ï¼‰ï¼š</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
INPUT=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
OUTPUT=<span class="hljs-string">"<span class="hljs-variable">${INPUT%.md}</span>.docx"</span>

pandoc <span class="hljs-string">"<span class="hljs-variable">$INPUT</span>"</span> \
  -o <span class="hljs-string">"<span class="hljs-variable">$OUTPUT</span>"</span> \
  --reference-doc=default.docx \
  --highlight-style=pygments

<span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… å·²ç”Ÿæˆï¼š<span class="hljs-variable">$OUTPUT</span>"</span>
</code></pre>
<h5 data-id="heading-6">â–¶ Windowsï¼ˆ<code>md2docx.bat</code>ï¼‰ï¼š</h5>
<pre><code class="hljs language-arduino" lang="arduino">@echo off
set <span class="hljs-literal">INPUT</span>=%<span class="hljs-number">1</span>
set <span class="hljs-literal">OUTPUT</span>=%<span class="hljs-literal">INPUT</span>:.md=.docx%

pandoc <span class="hljs-string">"%INPUT%"</span> -o <span class="hljs-string">"%OUTPUT%"</span> --reference-doc=<span class="hljs-keyword">default</span>.docx --highlight-style=pygments
echo âœ… å·²ç”Ÿæˆï¼š%<span class="hljs-literal">OUTPUT</span>%
</code></pre>
<blockquote>
<p>ğŸ“Œ æƒé™è®¾ç½®ï¼ˆmacOS/Linuxï¼‰ï¼š<br/>
<code>chmod +x md2docx.sh</code><br/>
ä½¿ç”¨æ–¹å¼ï¼š<code>./md2docx.sh report.md</code></p>
</blockquote>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€è¿›é˜¶æŠ€å·§ï¼šè®© Word è¾“å‡ºæ›´ä¸“ä¸š</h3>
<h4 data-id="heading-8">1. è‡ªå®šä¹‰æ ·å¼ï¼šä½¿ç”¨ <code>--reference-doc</code></h4>
<p>Pandoc é»˜è®¤çš„ Word æ ·å¼è¾ƒæœ´ç´ ã€‚ä½ å¯ä»¥ï¼š</p>
<ol>
<li>
<p>åœ¨ Word ä¸­æ–°å»ºä¸€ä¸ª <code>.docx</code> æ–‡ä»¶ï¼Œè®¾ç½®å¥½æ ‡é¢˜ã€æ­£æ–‡ã€ä»£ç å—ç­‰æ ·å¼ï¼›</p>
</li>
<li>
<p>ä¿å­˜ä¸º <code>my-style.docx</code>ï¼›</p>
</li>
<li>
<p>è½¬æ¢æ—¶æŒ‡å®šï¼š</p>
<pre><code class="hljs language-lua" lang="lua">pandoc <span class="hljs-built_in">input</span>.md -o <span class="hljs-built_in">output</span>.docx <span class="hljs-comment">--reference-doc=my-style.docx</span>
</code></pre>
</li>
</ol>
<p>è¿™æ ·ï¼Œæ‰€æœ‰ Markdown å…ƒç´ éƒ½ä¼šå¥—ç”¨ä½ é¢„è®¾çš„ Word æ ·å¼ï¼Œå®Œç¾åŒ¹é…å…¬å¸æ¨¡æ¿ï¼</p>
<h4 data-id="heading-9">2. ä»£ç é«˜äº®ï¼šå¯ç”¨è¯­æ³•ç€è‰²</h4>
<p>æ·»åŠ  <code>--highlight-style=tango</code> æˆ– <code>pygments</code>ï¼Œè®©ä»£ç å—åœ¨ Word ä¸­å¸¦é¢œè‰²ï¼ˆéœ€ Word æ”¯æŒï¼‰ã€‚</p>
<h4 data-id="heading-10">3. æ’å…¥ç›®å½•ã€é¡µçœ‰é¡µè„š</h4>
<p>é€šè¿‡ <code>--toc</code> ç”Ÿæˆç›®å½•ï¼›æ›´å¤æ‚çš„æ’ç‰ˆå¯ç»“åˆ LaTeX ä¸­é—´æ ¼å¼ï¼Œä½†å¯¹å¤§å¤šæ•°åŠå…¬åœºæ™¯ï¼Œ<code>reference-doc</code> å·²è¶³å¤Ÿã€‚</p>
<hr/>
<h3 data-id="heading-11">å››ã€é›†æˆåˆ°ä½ çš„å†™ä½œç¯å¢ƒ</h3>
<ul>
<li><strong>VS Code ç”¨æˆ·</strong>ï¼šå®‰è£… â€œMarkdown Preview Enhancedâ€ æ’ä»¶ï¼Œæ”¯æŒä¸€é”®å¯¼å‡º DOCXã€‚</li>
<li><strong>Obsidian ç”¨æˆ·</strong>ï¼šä½¿ç”¨ç¤¾åŒºæ’ä»¶ â€œPandoc Pluginâ€ ç›´æ¥è°ƒç”¨æœ¬åœ° Pandocã€‚</li>
<li><strong>ç»ˆç«¯å…š</strong>ï¼šå°†è„šæœ¬åŠ å…¥ PATHï¼Œå…¨å±€å¯ç”¨ã€‚</li>
</ul>
<p>ç”šè‡³å¯ä»¥é…åˆ <strong>GitHub Actions</strong> å®ç°â€œæ¨é€ Markdown è‡ªåŠ¨å‘å¸ƒ Word ç‰ˆæœ¬â€ï¼</p>
<hr/>
<h3 data-id="heading-12">ç»“è¯­ï¼šæŒæ§æ ¼å¼ï¼Œè€Œéè¢«æ ¼å¼æŒæ§</h3>
<p>åœ¨å†…å®¹åˆ›ä½œæ—¥ç›Šå»ä¸­å¿ƒåŒ–çš„ä»Šå¤©ï¼Œ<strong>ç”¨æœ€èˆ’æœçš„æ–¹å¼å†™ä½œï¼Œç”¨æœ€åˆè§„çš„æ–¹å¼äº¤ä»˜</strong>ï¼Œä¸è¯¥æ˜¯å¥¢æœ›ã€‚å€ŸåŠ© Pandoc è¿™æ ·æˆç†Ÿã€ç¨³å®šã€å…è´¹çš„å·¥å…·ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨ä¿æŒ Markdown é«˜æ•ˆå†™ä½œä½“éªŒçš„åŒæ—¶ï¼Œæ— ç¼æ»¡è¶³ä¼ ç»ŸåŠå…¬æ ¼å¼çš„è¦æ±‚ã€‚</p>
<blockquote>
<p><strong>çœŸæ­£çš„æ•ˆç‡ï¼Œä¸æ˜¯å¦¥åäºå·¥å…·ï¼Œè€Œæ˜¯è®©å·¥å…·ä¸ºä½ æœåŠ¡ã€‚</strong></p>
</blockquote>
<p>ç°åœ¨å°±èŠ± 10 åˆ†é’Ÿé…ç½®è¿™å¥—è„šæœ¬â€”â€”ä»æ­¤ï¼ŒMarkdown æ˜¯ä½ çš„ç¬”ï¼ŒWord åªæ˜¯ä½ çš„ä¿¡å°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Terraform å®è·µè¯¾ -ä¼˜è¯¾ITåˆ†äº«]]></title>    <link>https://juejin.cn/post/7600999271770701824</link>    <guid>https://juejin.cn/post/7600999271770701824</guid>    <pubDate>2026-01-31T08:17:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600999271770701824" data-draft-id="7601049142865739776" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Terraform å®è·µè¯¾ -ä¼˜è¯¾ITåˆ†äº«"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-31T08:17:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·71791708027"/> <meta itemprop="url" content="https://juejin.cn/user/801974450660393"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Terraform å®è·µè¯¾ -ä¼˜è¯¾ITåˆ†äº«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/801974450660393/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·71791708027
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T08:17:38.000Z" title="Sat Jan 31 2026 08:17:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>Terraform å®è·µè¯¾---è·è¯¾ï¼šyoukeit.xyz/15400/</strong></p>
<h2 data-id="heading-0">å®‰å…¨å·¦ç§»ä¸‹çš„ Terraformï¼šæœªæ¥ IaC å®‰å…¨åˆè§„ä¸æ¼æ´å‰ç½®æ£€æµ‹çš„å®è·µå‘å±•æ–¹å‘</h2>
<p>åœ¨äº‘åŸç”Ÿæ—¶ä»£ï¼ŒåŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰å·²æˆä¸ºä¼ä¸šè‡ªåŠ¨åŒ–ç®¡ç†çš„æ ¸å¿ƒå·¥å…·ï¼Œè€Œ Terraform ä½œä¸ºè¡Œä¸šæ ‡æ†ï¼Œå…¶å®‰å…¨æ€§ç›´æ¥å½±å“äº‘åŸºç¡€è®¾æ–½çš„å¯é æ€§ã€‚éšç€å®‰å…¨å·¦ç§»ç†å¿µçš„æ™®åŠï¼Œå¦‚ä½•åœ¨ IaC å¼€å‘é˜¶æ®µå‰ç½®æ£€æµ‹å®‰å…¨æ¼æ´ä¸åˆè§„é£é™©ï¼Œæˆä¸ºæå‡äº‘å®‰å…¨æ•ˆç‡çš„å…³é”®ã€‚æœ¬æ–‡ç»“åˆ Terraform çš„æœ€æ–°å®è·µï¼Œæ¢è®¨å®‰å…¨å·¦ç§»ä¸‹çš„æŠ€æœ¯æ¼”è¿›æ–¹å‘ï¼Œå¹¶æä¾›å¯è½åœ°çš„ä»£ç ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å®‰å…¨å·¦ç§»çš„æ ¸å¿ƒä»·å€¼ï¼šä»â€œäº‹åä¿®å¤â€åˆ°â€œäº‹å‰é¢„é˜²â€</h3>
<p>ä¼ ç»Ÿ IaC å®‰å…¨æ¨¡å¼ä¾èµ–éƒ¨ç½²åçš„æ‰«æå·¥å…·ï¼ˆå¦‚ OPAã€Checkovï¼‰ï¼Œå­˜åœ¨ä¸¤å¤§ç—›ç‚¹ï¼š</p>
<ol>
<li><strong>æ»åæ€§</strong>ï¼šæ¼æ´å‘ç°æ—¶å¯èƒ½å·²é€ æˆèµ„æºåˆ›å»ºæˆ–æ•°æ®æ³„éœ²ï¼›</li>
<li><strong>æˆæœ¬é«˜</strong>ï¼šä¿®å¤å·²éƒ¨ç½²èµ„æºçš„æˆæœ¬è¿œé«˜äºå¼€å‘é˜¶æ®µè°ƒæ•´ä»£ç ã€‚</li>
</ol>
<p>å®‰å…¨å·¦ç§»é€šè¿‡å°†å®‰å…¨æ£€æµ‹åµŒå…¥ IaC å¼€å‘æµç¨‹ï¼Œå®ç°ä»¥ä¸‹ç›®æ ‡ï¼š</p>
<ul>
<li><strong>ä»£ç çº§æ£€æµ‹</strong>ï¼šåœ¨æäº¤å‰è¯†åˆ«æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€æƒé™è¿‡é…ç­‰é£é™©ï¼›</li>
<li><strong>è‡ªåŠ¨åŒ–åˆè§„</strong>ï¼šå¼ºåˆ¶æ‰§è¡Œä¼ä¸šå®‰å…¨ç­–ç•¥ï¼ˆå¦‚ç¦æ­¢å…¬ç½‘æš´éœ²æ•°æ®åº“ï¼‰ï¼›</li>
<li><strong>æˆæœ¬ä¼˜åŒ–</strong>ï¼šé¿å…å› å®‰å…¨é—®é¢˜å¯¼è‡´çš„èµ„æºé‡å»ºæˆ–æ•°æ®è¿ç§»ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€Terraform å®‰å…¨å·¦ç§»çš„ä¸‰å¤§æŠ€æœ¯æ–¹å‘</h3>
<h4 data-id="heading-3">1. é™æ€ä»£ç åˆ†æï¼šå‰ç½®æ‹¦æˆªåŸºç¡€æ¼æ´</h4>
<p>é€šè¿‡é›†æˆé™æ€åˆ†æå·¥å…·ï¼ˆå¦‚ tfsecã€KICSï¼‰ï¼Œåœ¨ä»£ç ç¼–å†™é˜¶æ®µæ£€æµ‹ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li><strong>æ•æ„Ÿä¿¡æ¯ç¡¬ç¼–ç </strong>ï¼šå¦‚ç›´æ¥åœ¨Â <code>.tf</code>Â æ–‡ä»¶ä¸­å†™å…¥ AWS Access Keyï¼›</li>
<li><strong>èµ„æºæƒé™è¿‡é…</strong>ï¼šå¦‚ S3 æ¡¶æœªå¯ç”¨åŠ å¯†æˆ–å…è®¸å…¬å¼€è®¿é—®ï¼›</li>
<li><strong>ä¾èµ–é¡¹æ¼æ´</strong>ï¼šä½¿ç”¨å«å·²çŸ¥æ¼æ´çš„ Provider ç‰ˆæœ¬ã€‚</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šä½¿ç”¨ tfsec æ£€æµ‹ S3 æ¡¶é…ç½®</strong></p>
<pre><code class="hljs language-ini" lang="ini">hcl
1<span class="hljs-comment"># main.tf</span>
2resource "aws_s3_bucket" "example" {
3  <span class="hljs-attr">bucket</span> = <span class="hljs-string">"my-bucket"</span>
4  <span class="hljs-attr">acl</span>    = <span class="hljs-string">"public-read"</span>  <span class="hljs-comment"># tfsec:ignore:AWS002 è§¦å‘è­¦å‘Šï¼šç¦æ­¢å…¬ç½‘è®¿é—®</span>
5}
6
7resource "aws_s3_bucket_server_side_encryption_configuration" "example" {
8  <span class="hljs-attr">bucket</span> = aws_s3_bucket.example.bucket
9  rule {
10    apply_server_side_encryption_by_default {
11      <span class="hljs-attr">sse_algorithm</span> = <span class="hljs-string">"AES256"</span>
12    }
13  }
14}
15
</code></pre>
<p><strong>æ‰§è¡Œæ£€æµ‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">bash
1tfsec . --soft-fail  <span class="hljs-comment"># è¾“å‡ºè­¦å‘Šä½†ä¸ä¸­æ–­æµç¨‹</span>
2
</code></pre>
<p><strong>è¾“å‡ºç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-number">1</span>[AWS002][ERROR] S3 bucket <span class="hljs-string">'my-bucket'</span> has ACL set to <span class="hljs-string">'public-read'</span>
<span class="hljs-number">2</span>
</code></pre>
<h4 data-id="heading-4">2. ç­–ç•¥å³ä»£ç ï¼ˆPolicy as Codeï¼‰ï¼šå¼ºåˆ¶åˆè§„çº¦æŸ</h4>
<p>é€šè¿‡ Open Policy Agentï¼ˆOPAï¼‰æˆ– Sentinel å®šä¹‰å®‰å…¨ç­–ç•¥ï¼Œåœ¨Â <code>terraform plan</code>Â é˜¶æ®µæ‹¦æˆªè¿è§„æ“ä½œã€‚ä¾‹å¦‚ï¼Œç¦æ­¢åˆ›å»ºæœªåŠ å¯†çš„ EBS å·ï¼š</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šOPA ç­–ç•¥è§„åˆ™</strong></p>
<pre><code class="hljs language-lua" lang="lua">rego
<span class="hljs-number">1</span># policy.rego
<span class="hljs-number">2</span><span class="hljs-built_in">package</span> terraform.aws.ebs
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>deny[msg] {
<span class="hljs-number">5</span>  <span class="hljs-built_in">input</span>.<span class="hljs-built_in">type</span> == <span class="hljs-string">"aws_ebs_volume"</span>
<span class="hljs-number">6</span>  <span class="hljs-keyword">not</span> <span class="hljs-built_in">input</span>.encrypted
<span class="hljs-number">7</span>  msg := <span class="hljs-string">"EBS volumes must be encrypted"</span>
<span class="hljs-number">8</span>}
<span class="hljs-number">9</span>
</code></pre>
<p><strong>é›†æˆåˆ° Terraform å·¥ä½œæµ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">bash
1<span class="hljs-comment"># å®‰è£… OPA</span>
2curl -L -o opa https://openpolicyagent.org/downloads/latest/opa_linux_amd64
3chmod +x opa
4
5<span class="hljs-comment"># æ‰§è¡Œç­–ç•¥æ£€æŸ¥</span>
6opa <span class="hljs-built_in">eval</span> --input ./plan.json --data policy.rego <span class="hljs-string">"data.terraform.aws.ebs.deny"</span>
7
</code></pre>
<h4 data-id="heading-5">3. åŠ¨æ€æ¼æ´æ‰«æï¼šæ¨¡æ‹Ÿæ”»å‡»éªŒè¯å®‰å…¨æ€§</h4>
<p>ç»“åˆæ¼æ´æ‰«æå·¥å…·ï¼ˆå¦‚ Trivyã€Snykï¼‰ï¼Œåœ¨ CI/CD æµæ°´çº¿ä¸­æ¨¡æ‹Ÿæ”»å‡»è€…è¡Œä¸ºï¼Œæ£€æµ‹ä»¥ä¸‹é£é™©ï¼š</p>
<ul>
<li><strong>ä¾èµ–é¡¹æ¼æ´</strong>ï¼šProvider æˆ–æ¨¡å—å«å·²çŸ¥ CVEï¼›</li>
<li><strong>é…ç½®é”™è¯¯</strong>ï¼šå¦‚ Kubernetes Pod æœªå¯ç”¨ç½‘ç»œç­–ç•¥ï¼›</li>
<li><strong>è¿è¡Œæ—¶é£é™©</strong>ï¼šå¦‚å®¹å™¨é•œåƒå«æ¶æ„è½¯ä»¶ã€‚</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šGitHub Actions é›†æˆ Trivy æ‰«æ</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">yaml</span>
<span class="hljs-number">1</span><span class="hljs-comment"># .github/workflows/terraform-security.yml</span>
<span class="hljs-attr">2name:</span> <span class="hljs-string">Terraform</span> <span class="hljs-string">Security</span> <span class="hljs-string">Scan</span>
<span class="hljs-attr">3on:</span> [<span class="hljs-string">push</span>]
<span class="hljs-number">4</span>
<span class="hljs-attr">5jobs:</span>
<span class="hljs-attr">6  scan:</span>
<span class="hljs-attr">7    runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
<span class="hljs-attr">8    steps:</span>
<span class="hljs-attr">9      - uses:</span> <span class="hljs-string">actions/checkout@v4</span>
<span class="hljs-attr">10      - name:</span> <span class="hljs-string">Set</span> <span class="hljs-string">up</span> <span class="hljs-string">Terraform</span>
<span class="hljs-attr">11        uses:</span> <span class="hljs-string">hashicorp/setup-terraform@v2</span>
<span class="hljs-attr">12      - name:</span> <span class="hljs-string">Terraform</span> <span class="hljs-string">Init</span>
<span class="hljs-attr">13        run:</span> <span class="hljs-string">terraform</span> <span class="hljs-string">init</span>
<span class="hljs-attr">14      - name:</span> <span class="hljs-string">Terraform</span> <span class="hljs-string">Plan</span>
<span class="hljs-attr">15        run:</span> <span class="hljs-string">terraform</span> <span class="hljs-string">plan</span> <span class="hljs-string">-out=plan.tfplan</span>
<span class="hljs-attr">16      - name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">Trivy</span>
<span class="hljs-attr">17        run:</span> <span class="hljs-string">|</span>
<span class="hljs-number">18</span>          <span class="hljs-string">curl</span> <span class="hljs-string">-sfL</span> <span class="hljs-string">https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh</span> <span class="hljs-string">|</span> <span class="hljs-string">sh</span> <span class="hljs-string">-s</span> <span class="hljs-string">--</span> <span class="hljs-string">-b</span> <span class="hljs-string">/usr/local/bin</span>
<span class="hljs-attr">19      - name:</span> <span class="hljs-string">Scan</span> <span class="hljs-string">Terraform</span> <span class="hljs-string">Plan</span>
<span class="hljs-attr">20        run:</span> <span class="hljs-string">|</span>
<span class="hljs-number">21</span>          <span class="hljs-string">trivy</span> <span class="hljs-string">fs</span> <span class="hljs-string">--severity</span> <span class="hljs-string">CRITICAL,HIGH</span> <span class="hljs-string">.</span> <span class="hljs-string">--skip-dirs=".terraform"</span>
<span class="hljs-number">22</span>
</code></pre>
<h3 data-id="heading-6">ä¸‰ã€æœªæ¥è¶‹åŠ¿ï¼šAI é©±åŠ¨çš„æ™ºèƒ½å®‰å…¨å·¦ç§»</h3>
<p>éšç€ AI æŠ€æœ¯çš„æˆç†Ÿï¼ŒTerraform å®‰å…¨å·¦ç§»å°†å‘æ™ºèƒ½åŒ–æ¼”è¿›ï¼š</p>
<ol>
<li><strong>è‡ªåŠ¨ä¿®å¤å»ºè®®</strong>ï¼šAI åˆ†ææ¼æ´ä¸Šä¸‹æ–‡ï¼Œç”Ÿæˆä¿®å¤ä»£ç ï¼ˆå¦‚è‡ªåŠ¨æ›¿æ¢ç¡¬ç¼–ç å¯†é’¥ä¸º Vault å¼•ç”¨ï¼‰ï¼›</li>
<li><strong>é¢„æµ‹æ€§å®‰å…¨</strong>ï¼šåŸºäºå†å²æ•°æ®é¢„æµ‹æ½œåœ¨é£é™©ï¼ˆå¦‚è¯†åˆ«é¢‘ç¹å˜æ›´çš„èµ„æºå¯èƒ½å­˜åœ¨é…ç½®é”™è¯¯ï¼‰ï¼›</li>
<li><strong>è·¨äº‘åˆè§„</strong>ï¼šé€šè¿‡åŠ¨æ€æ ‡å‡†åº“ï¼ˆå¦‚ IACheckï¼‰è‡ªåŠ¨é€‚é…ä¸åŒäº‘å‚å•†çš„åˆè§„è¦æ±‚ã€‚</li>
</ol>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šAI è¾…åŠ©ä¿®å¤ç¡¬ç¼–ç å¯†é’¥ï¼ˆä¼ªä»£ç ï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python">python
<span class="hljs-number">1</span><span class="hljs-comment"># AI ä¿®å¤é€»è¾‘ç¤ºä¾‹</span>
<span class="hljs-number">2</span><span class="hljs-keyword">def</span> fix_hardcoded_secrets(tf_content):
<span class="hljs-number">3</span>    <span class="hljs-keyword">import</span> re
<span class="hljs-number">4</span>    patterns = [
<span class="hljs-number">5</span>        <span class="hljs-string">r'access_key\s*=\s*"([^"]+)"'</span>,  <span class="hljs-comment"># AWS Access Key</span>
<span class="hljs-number">6</span>        <span class="hljs-string">r'password\s*=\s*"([^"]+)"'</span>     <span class="hljs-comment"># æ•°æ®åº“å¯†ç </span>
<span class="hljs-number">7</span>    ]
<span class="hljs-number">8</span>    <span class="hljs-keyword">for</span> pattern <span class="hljs-keyword">in</span> patterns:
<span class="hljs-number">9</span>        matches = re.findall(pattern, tf_content)
<span class="hljs-number">10</span>        <span class="hljs-keyword">for</span> secret <span class="hljs-keyword">in</span> matches:
<span class="hljs-number">11</span>            <span class="hljs-comment"># è°ƒç”¨ Vault API å­˜å‚¨å¯†é’¥å¹¶ç”Ÿæˆå¼•ç”¨</span>
<span class="hljs-number">12</span>            vault_path = store_in_vault(secret)
<span class="hljs-number">13</span>            tf_content = tf_content.replace(<span class="hljs-string">f'"<span class="hljs-subst">{secret}</span>"'</span>, <span class="hljs-string">f'$<span class="hljs-subst">{vault(<span class="hljs-string">"{vault_path}"</span>)}</span>'</span>)
<span class="hljs-number">14</span>    <span class="hljs-keyword">return</span> tf_content
<span class="hljs-number">15</span>
</code></pre>
<h3 data-id="heading-7">å››ã€å®è·µå»ºè®®ï¼šæ„å»ºå®‰å…¨å·¦ç§»çš„ Terraform å·¥ä½œæµ</h3>
<ol>
<li>
<p><strong>åˆ†å±‚æ£€æµ‹</strong>ï¼š</p>
<ul>
<li><strong>å¼€å‘é˜¶æ®µ</strong>ï¼šä½¿ç”¨ tfsec + Pre-commit é’©å­æ‹¦æˆªåŸºç¡€é”™è¯¯ï¼›</li>
<li><strong>CI é˜¶æ®µ</strong>ï¼šé€šè¿‡ OPA ç­–ç•¥æ£€æŸ¥å¼ºåˆ¶åˆè§„ï¼›</li>
<li><strong>CD é˜¶æ®µ</strong>ï¼šç»“åˆ Trivy æ‰«æè¿è¡Œæ—¶é£é™©ã€‚</li>
</ul>
</li>
<li>
<p><strong>å·¥å…·é“¾æ•´åˆ</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">mermaid
<span class="hljs-number">1</span>graph <span class="hljs-selector-tag">TD</span>
<span class="hljs-number">2</span>  <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[Code Commit]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[tfsec]</span>
<span class="hljs-number">3</span>  <span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[OPA Policy Check]</span>
<span class="hljs-number">4</span>  C --&gt; D<span class="hljs-selector-attr">[Trivy Scan]</span>
<span class="hljs-number">5</span>  D --&gt; E<span class="hljs-selector-attr">[Deploy to Cloud]</span>
<span class="hljs-number">6</span>
</code></pre>
</li>
<li>
<p><strong>å›¢é˜ŸåŸ¹è®­</strong>ï¼š</p>
<ul>
<li>å°†å®‰å…¨å·¦ç§»çº³å…¥å¼€å‘è€…æ—¥å¸¸æµç¨‹ï¼ˆå¦‚ Git æäº¤å‰è‡ªåŠ¨æ£€æµ‹ï¼‰ï¼›</li>
<li>å®šæœŸæ›´æ–°å®‰å…¨ç­–ç•¥ä»¥é€‚é…æ–°æ¼æ´ï¼ˆå¦‚ Log4j2 äº‹ä»¶åçš„ä¾èµ–æ£€æŸ¥ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-8">ç»“è¯­</h3>
<p>å®‰å…¨å·¦ç§»ä¸‹çš„ Terraform å®è·µï¼Œæœ¬è´¨æ˜¯å°†å®‰å…¨ä»â€œäº‹åå¤„ç†â€è½¬å˜ä¸ºâ€œå†…ç”Ÿèƒ½åŠ›â€ã€‚é€šè¿‡é™æ€åˆ†æã€ç­–ç•¥çº¦æŸå’ŒåŠ¨æ€æ‰«æçš„ä¸‰å±‚é˜²æŠ¤ï¼Œç»“åˆ AI æŠ€æœ¯çš„æ™ºèƒ½åŒ–æ¼”è¿›ï¼Œä¼ä¸šå¯æ˜¾è‘—é™ä½äº‘åŸºç¡€è®¾æ–½çš„å®‰å…¨é£é™©ï¼ŒåŒæ—¶æå‡å¼€å‘æ•ˆç‡ã€‚æœªæ¥ï¼Œéšç€ IaC ç”Ÿæ€çš„å®Œå–„ï¼Œå®‰å…¨å·¦ç§»å°†æˆä¸ºäº‘åŸç”Ÿå®‰å…¨çš„æ ‡é…èƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»ºæ— éšœç¢ç»„ä»¶ä¹‹Breadcrumb Pattern]]></title>    <link>https://juejin.cn/post/7601169987396436019</link>    <guid>https://juejin.cn/post/7601169987396436019</guid>    <pubDate>2026-01-31T08:32:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601169987396436019" data-draft-id="7600982613655126066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»ºæ— éšœç¢ç»„ä»¶ä¹‹Breadcrumb Pattern"/> <meta itemprop="keywords" content="å‰ç«¯,è®¾è®¡,HTML"/> <meta itemprop="datePublished" content="2026-01-31T08:32:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="anOnion"/> <meta itemprop="url" content="https://juejin.cn/user/553809592722589"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»ºæ— éšœç¢ç»„ä»¶ä¹‹Breadcrumb Pattern
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/553809592722589/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    anOnion
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T08:32:47.000Z" title="Sat Jan 31 2026 08:32:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Breadcrumb Pattern è¯¦è§£ï¼šæ„å»ºæ— éšœç¢é¢åŒ…å±‘å¯¼èˆª</h2>
<p>é¢åŒ…å±‘å¯¼èˆªæ˜¯ Web é¡µé¢ä¸­ä¸å¯æˆ–ç¼ºçš„å¯¼èˆªç»„ä»¶ï¼Œå®ƒä»¥å±‚çº§é“¾æ¥çš„å½¢å¼å±•ç¤ºå½“å‰é¡µé¢åœ¨ç½‘ç«™ç»“æ„ä¸­çš„ä½ç½®ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿäº†è§£è‡ªå·±æ‰€å¤„çš„ä½ç½®å¹¶è½»æ¾è¿”å›ä¸Šçº§é¡µé¢ã€‚æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FWAI%2FARIA%2Fapg%2Fpatterns%2Fbreadcrumb%2F" target="_blank" title="https://www.w3.org/WAI/ARIA/apg/patterns/breadcrumb/" ref="nofollow noopener noreferrer">W3C WAI-ARIA Breadcrumb Pattern</a> è§„èŒƒï¼Œæ­£ç¡®å®ç°çš„é¢åŒ…å±‘å¯¼èˆªä¸ä»…è¦æä¾›æ¸…æ™°çš„å±‚çº§å¯¼èˆªè·¯å¾„ï¼Œæ›´è¦ç¡®ä¿æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½é¡ºåˆ©ä½¿ç”¨ï¼ŒåŒ…æ‹¬ä¾èµ–å±å¹•é˜…è¯»å™¨ç­‰è¾…åŠ©æŠ€æœ¯çš„ç”¨æˆ·ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Breadcrumb Pattern çš„æ ¸å¿ƒæ¦‚å¿µã€å®ç°è¦ç‚¹ä»¥åŠæœ€ä½³å®è·µã€‚</p>
<h3 data-id="heading-1">ä¸€ã€é¢åŒ…å±‘å¯¼èˆªçš„å®šä¹‰ä¸æ ¸å¿ƒåŠŸèƒ½</h3>
<p>é¢åŒ…å±‘å¯¼èˆªï¼ˆBreadcrumb Trailï¼‰æ˜¯ç”±ä¸€ç³»åˆ—æŒ‡å‘çˆ¶çº§é¡µé¢çš„é“¾æ¥ç»„æˆçš„å¯¼èˆªè·¯å¾„ï¼ŒæŒ‰ç…§å±‚çº§é¡ºåºå±•ç¤ºå½“å‰é¡µé¢åœ¨ç½‘ç«™æ¶æ„ä¸­çš„ä½ç½®ã€‚å®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯å¸®åŠ©ç”¨æˆ·äº†è§£è‡ªå·±åœ¨ç½‘ç«™ä¸­çš„ä½ç½®ï¼Œå¹¶åœ¨éœ€è¦æ—¶å¿«é€Ÿè¿”å›ä¸Šçº§é¡µé¢ã€‚é¢åŒ…å±‘å¯¼èˆªé€šå¸¸æ°´å¹³æ”¾ç½®åœ¨é¡µé¢ä¸»ä½“å†…å®¹ä¹‹å‰ï¼Œä¸ºç”¨æˆ·æä¾›æ¸…æ™°çš„å¯¼èˆªå‚è€ƒã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé¢åŒ…å±‘å¯¼èˆªå¹¿æ³›åº”ç”¨äºå†…å®¹å±‚çº§è¾ƒæ·±çš„ç½‘ç«™ï¼Œä¾‹å¦‚ç”µå•†å¹³å°çš„äº§å“åˆ†ç±»é¡µã€åšå®¢æ–‡ç« çš„åˆ†ç±»å½’æ¡£é¡µã€ä¼ä¸šå®˜ç½‘çš„äº§å“ä»‹ç»é¡µç­‰ã€‚ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„é¢åŒ…å±‘å¯¼èˆªèƒ½å¤Ÿæ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒï¼Œé™ä½ç”¨æˆ·çš„è¿·å¤±æ„Ÿï¼ŒåŒæ—¶ä¹Ÿæœ‰åˆ©äºæœç´¢å¼•æ“æ›´å¥½åœ°ç†è§£ç½‘ç«™çš„ç»“æ„å±‚æ¬¡ã€‚</p>
<h3 data-id="heading-2">äºŒã€é”®ç›˜äº¤äº’è§„èŒƒ</h3>
<p>é¢åŒ…å±‘å¯¼èˆªçš„é”®ç›˜äº¤äº’å…·æœ‰ç‰¹æ®Šæ€§ã€‚ç”±äºé¢åŒ…å±‘å¯¼èˆªä»…ç”±é™æ€é“¾æ¥ç»„æˆï¼Œç”¨æˆ·ä¸éœ€è¦è¿›è¡Œä»»ä½•ç‰¹æ®Šçš„é”®ç›˜æ“ä½œæ¥ä¸ä¹‹äº¤äº’ã€‚é“¾æ¥æœ¬èº«å·²ç»æ”¯æŒæ ‡å‡†çš„é”®ç›˜å¯¼èˆªè¡Œä¸ºï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ Tab é”®åœ¨å„ä¸ªé“¾æ¥ä¹‹é—´åˆ‡æ¢ï¼Œé€šè¿‡ Enter é”®æ¿€æ´»é“¾æ¥è¿›è¡Œé¡µé¢è·³è½¬ã€‚è¿™ç§æ ‡å‡†çš„è¡Œä¸ºå·²ç»æ»¡è¶³äº†é”®ç›˜å¯è®¿é—®æ€§çš„è¦æ±‚ï¼Œæ— éœ€é¢å¤–çš„é”®ç›˜äº‹ä»¶å¤„ç†ã€‚</p>
<p>å› æ­¤ï¼ŒBreadcrumb Pattern è§„èŒƒæ˜ç¡®æŒ‡å‡ºï¼Œé¢åŒ…å±‘å¯¼èˆªä¸éœ€è¦ç‰¹æ®Šçš„é”®ç›˜äº¤äº’æ”¯æŒã€‚å¼€å‘è€…åªéœ€è¦ç¡®ä¿é“¾æ¥å…ƒç´ æ˜¯æ ‡å‡†çš„ HTML å…ƒç´ ï¼Œå³å¯è·å¾—å®Œæ•´çš„é”®ç›˜å¯è®¿é—®æ€§æ”¯æŒã€‚è¿™ä¸€ç‰¹ç‚¹ä½¿å¾—é¢åŒ…å±‘å¯¼èˆªçš„å®ç°ç›¸å¯¹ç®€å•ï¼Œé‡ç‚¹åº”æ”¾åœ¨æ­£ç¡®çš„è¯­ä¹‰æ ‡è®°å’Œ ARIA å±æ€§ä½¿ç”¨ä¸Šã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€WAI-ARIA è§’è‰²ã€çŠ¶æ€å’Œå±æ€§</h3>
<p>æ­£ç¡®ä½¿ç”¨ WAI-ARIA å±æ€§æ˜¯æ„å»ºæ— éšœç¢é¢åŒ…å±‘å¯¼èˆªçš„æŠ€æœ¯åŸºç¡€ã€‚è™½ç„¶é¢åŒ…å±‘å¯¼èˆªä¸æ¶‰åŠå¤æ‚çš„äº¤äº’é€»è¾‘ï¼Œä½†æ­£ç¡®çš„è¯­ä¹‰æ ‡è®°å¯¹äºå±å¹•é˜…è¯»å™¨ç”¨æˆ·ç†è§£å¯¼èˆªç»“æ„è‡³å…³é‡è¦ã€‚</p>
<h4 data-id="heading-4">3.1 å¯¼èˆªå®¹å™¨æ ‡è®°</h4>
<p>é¢åŒ…å±‘å¯¼èˆªå¿…é¡»æ”¾ç½®åœ¨å¯¼èˆªåœ°æ ‡åŒºåŸŸï¼ˆNavigation Landmarkï¼‰å†…ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨ nav å…ƒç´ æˆ–ä¸ºå…¶ä»–å…ƒç´ æ·»åŠ  role="navigation" æ¥å®ç°ã€‚å¯¼èˆªåœ°æ ‡åŒºåŸŸéœ€è¦é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fwai-aria-1.2%2F%23aria-label" target="_blank" title="https://www.w3.org/TR/wai-aria-1.2/#aria-label" ref="nofollow noopener noreferrer">aria-label</a> æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fwai-aria-1.2%2F%23aria-labelledby" target="_blank" title="https://www.w3.org/TR/wai-aria-1.2/#aria-labelledby" ref="nofollow noopener noreferrer">aria-labelledby</a> è¿›è¡Œæ ‡è®°ï¼Œä»¥ä¾¿å±å¹•é˜…è¯»å™¨å‘ç”¨æˆ·æè¿°è¿™ä¸ªå¯¼èˆªåŒºåŸŸçš„ç”¨é€”ã€‚</p>
<p>ç¤ºä¾‹ï¼šä½¿ç”¨ nav å…ƒç´ åŒ…è£¹é¢åŒ…å±‘å¯¼èˆªï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"é¢åŒ…å±‘å¯¼èˆª"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/products/"</span>&gt;</span>äº§å“<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/products/electronics/"</span>&gt;</span>ç”µå­äº§å“<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">aria-current</span>=<span class="hljs-string">"page"</span>&gt;</span>ç¬”è®°æœ¬ç”µè„‘<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
</code></pre>
<p>ç¤ºä¾‹ï¼šä½¿ç”¨ role å±æ€§å®šä¹‰å¯¼èˆªåœ°æ ‡ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
  <span class="hljs-attr">role</span>=<span class="hljs-string">"navigation"</span>
  <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"é¢åŒ…å±‘å¯¼èˆª"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/blog/"</span>&gt;</span>åšå®¢<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">aria-current</span>=<span class="hljs-string">"page"</span>&gt;</span>2025 å¹´æŠ€æœ¯è¶‹åŠ¿<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">3.2 å½“å‰é¡µé¢çŠ¶æ€æ ‡è®°</h4>
<p>é¢åŒ…å±‘å¯¼èˆªä¸­çš„å½“å‰é¡µé¢é“¾æ¥éœ€è¦ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fwai-aria-1.2%2F%23aria-current" target="_blank" title="https://www.w3.org/TR/wai-aria-1.2/#aria-current" ref="nofollow noopener noreferrer">aria-current</a> å±æ€§æ¥æ ‡è¯†ã€‚aria-current="page" æ˜ç¡®å‘Šè¯‰è¾…åŠ©æŠ€æœ¯å½“å‰å…ƒç´ ä»£è¡¨çš„æ˜¯ç”¨æˆ·æ­£åœ¨æµè§ˆçš„é¡µé¢ã€‚è¿™ä¸€å±æ€§å¯¹äºå±å¹•é˜…è¯»å™¨ç”¨æˆ·ç†è§£é¢åŒ…å±‘å¯¼èˆªçš„ç»“æ„éå¸¸é‡è¦ï¼Œä½¿ä»–ä»¬èƒ½å¤ŸåŒºåˆ†å¯å¯¼èˆªçš„çˆ¶çº§é¡µé¢å’Œå½“å‰æ‰€åœ¨é¡µé¢ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä»£è¡¨å½“å‰é¡µé¢çš„å…ƒç´ ä¸æ˜¯é“¾æ¥ï¼ˆä¾‹å¦‚ä½¿ç”¨ span æˆ–å…¶ä»–å…ƒç´ å‘ˆç°ï¼‰ï¼Œé‚£ä¹ˆ aria-current å±æ€§æ˜¯å¯é€‰çš„ã€‚ä½†ä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼Œå»ºè®®å§‹ç»ˆä¸ºå½“å‰é¡µé¢å…ƒç´ æ·»åŠ  aria-current="page"ã€‚</p>
<p>ç¤ºä¾‹ï¼šå½“å‰é¡µé¢ä¸ºé“¾æ¥æ—¶çš„æ ‡è®°ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"é¢åŒ…å±‘å¯¼èˆª"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/docs/"</span>&gt;</span>æ–‡æ¡£<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/docs/guides/"</span>&gt;</span>æŒ‡å—<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span>
        <span class="hljs-attr">href</span>=<span class="hljs-string">"/docs/guides/getting-started/"</span>
        <span class="hljs-attr">aria-current</span>=<span class="hljs-string">"page"</span>
        &gt;</span>å¿«é€Ÿå…¥é—¨&lt;/a
      &gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
</code></pre>
<p>ç¤ºä¾‹ï¼šå½“å‰é¡µé¢ä¸ºéé“¾æ¥å…ƒç´ æ—¶çš„æ ‡è®°ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"é¢åŒ…å±‘å¯¼èˆª"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/shop/"</span>&gt;</span>å•†åº—<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/shop/clothing/"</span>&gt;</span>æœè£…<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">aria-current</span>=<span class="hljs-string">"page"</span>&gt;</span>æ˜¥å­£æ–°å“<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">å››ã€å®Œæ•´ç¤ºä¾‹</h3>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ä¸åŒæ–¹å¼å®ç°é¢åŒ…å±‘å¯¼èˆªçš„å®Œæ•´ç¤ºä¾‹ï¼Œå±•ç¤ºäº†æ ‡å‡†çš„ HTML ç»“æ„ã€ARIA å±æ€§åº”ç”¨ä»¥åŠæ ·å¼è®¾è®¡ï¼š</p>
<h4 data-id="heading-7">4.1 åŸºç¡€é¢åŒ…å±‘å¯¼èˆªå®ç°</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"é¢åŒ…å±‘å¯¼èˆª"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ol</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/products/"</span>&gt;</span>æ‰€æœ‰äº§å“<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/products/electronics/"</span>&gt;</span>ç”µå­äº§å“<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">aria-current</span>=<span class="hljs-string">"page"</span>&gt;</span>æ™ºèƒ½æ‰‹è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
</code></pre>
<h4 data-id="heading-8">4.2 å¸¦åˆ†éš”ç¬¦çš„é¢åŒ…å±‘å¯¼èˆª</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>
  <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"é¢åŒ…å±‘å¯¼èˆª"</span>
  <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-nav"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ol</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-list"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-item"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span>
        <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-link"</span>
        &gt;</span>é¦–é¡µ&lt;/a
      &gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-separator"</span>
      <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span>&gt;</span>
      /
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-item"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span>
        <span class="hljs-attr">href</span>=<span class="hljs-string">"/categories/"</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-link"</span>
        &gt;</span>åˆ†ç±»&lt;/a
      &gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-separator"</span>
      <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span>&gt;</span>
      /
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-item"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span>
        <span class="hljs-attr">href</span>=<span class="hljs-string">"/categories/books/"</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-link"</span>
        &gt;</span>å›¾ä¹¦&lt;/a
      &gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-separator"</span>
      <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span>&gt;</span>
      /
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-item"</span>
      <span class="hljs-attr">aria-current</span>=<span class="hljs-string">"page"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"breadcrumb-current"</span>&gt;</span>ç¼–ç¨‹æŒ‡å—<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
</code></pre>
<h4 data-id="heading-9">4.3 ç”µå•†ç½‘ç«™äº§å“é¡µé¢åŒ…å±‘å¯¼èˆª</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>
  <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"å•†å“ä½ç½®"</span>
  <span class="hljs-attr">class</span>=<span class="hljs-string">"product-breadcrumb"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://www.example.com/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://www.example.com/electronics/"</span>&gt;</span>å®¶ç”¨ç”µå™¨<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://www.example.com/electronics/kitchen/"</span>&gt;</span>å¨æˆ¿ç”µå™¨<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://www.example.com/electronics/kitchen/coffee/"</span>&gt;</span>å’–å•¡æœº<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">aria-current</span>=<span class="hljs-string">"page"</span>&gt;</span>å…¨è‡ªåŠ¨å’–å•¡æœº X2000<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
</code></pre>
<h3 data-id="heading-10">äº”ã€æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-11">5.1 è¯­ä¹‰åŒ– HTML ç»“æ„</h4>
<p>é¢åŒ…å±‘å¯¼èˆªåº”ä½¿ç”¨è¯­ä¹‰åŒ–çš„ HTML å…ƒç´ æ„å»ºã€‚ä½¿ç”¨ nav å…ƒç´ å®šä¹‰å¯¼èˆªåŒºåŸŸï¼Œä½¿ç”¨ ol æˆ– ul å…ƒç´ åˆ›å»ºæœ‰åºæˆ–æ— åºåˆ—è¡¨ï¼Œä½¿ç”¨ li å…ƒç´ åŒ…å«å„ä¸ªå¯¼èˆªé¡¹ã€‚è¿™ç§ç»“æ„ä¸ä»…å¯¹æœç´¢å¼•æ“å‹å¥½ï¼Œä¹Ÿä¾¿äºå±å¹•é˜…è¯»å™¨å‘ç”¨æˆ·ä¼ è¾¾å¯¼èˆªçš„å±‚çº§å…³ç³»ã€‚</p>
<p>åœ¨åˆ—è¡¨çš„é€‰æ‹©ä¸Šï¼Œol å…ƒç´ æ›´é€‚åˆé¢åŒ…å±‘å¯¼èˆªï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿä¼ è¾¾å„ä¸ªé¡¹ä¹‹é—´çš„é¡ºåºå…³ç³»ã€‚ä½†å¦‚æœç½‘ç«™æ²¡æœ‰å¼ºåˆ¶çš„å±‚çº§é¡ºåºè¦æ±‚ï¼Œul å…ƒç´ åŒæ ·å¯ä»¥æ¥å—ã€‚æ— è®ºé€‰æ‹©å“ªç§åˆ—è¡¨å…ƒç´ ï¼Œéƒ½è¦ç¡®ä¿åˆ—è¡¨é¡¹ä¹‹é—´çš„é€»è¾‘é¡ºåºä¸é¢åŒ…å±‘å¯¼èˆªçš„å±‚çº§ç»“æ„ä¿æŒä¸€è‡´ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- æ¨èåšæ³•ï¼šä½¿ç”¨è¯­ä¹‰åŒ–å…ƒç´  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"é¢åŒ…å±‘å¯¼èˆª"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/docs/"</span>&gt;</span>æ–‡æ¡£<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">aria-current</span>=<span class="hljs-string">"page"</span>&gt;</span>å½“å‰é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
</code></pre>
<h4 data-id="heading-12">5.2 æ­£ç¡®ä½¿ç”¨ ARIA å±æ€§</h4>
<p>é¢åŒ…å±‘å¯¼èˆªçš„ ARIA å±æ€§ä½¿ç”¨ç›¸å¯¹ç®€å•ï¼Œä½†æœ‰å‡ ä¸ªå…³é”®ç‚¹éœ€è¦æ³¨æ„ã€‚é¦–å…ˆï¼Œå¯¼èˆªå®¹å™¨å¿…é¡»ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fwai-aria-1.2%2F%23aria-label" target="_blank" title="https://www.w3.org/TR/wai-aria-1.2/#aria-label" ref="nofollow noopener noreferrer">aria-label</a> æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fwai-aria-1.2%2F%23aria-labelledby" target="_blank" title="https://www.w3.org/TR/wai-aria-1.2/#aria-labelledby" ref="nofollow noopener noreferrer">aria-labelledby</a> è¿›è¡Œæ ‡è®°ï¼Œä»¥ä¾¿ç”¨æˆ·äº†è§£è¿™ä¸ªå¯¼èˆªåŒºåŸŸçš„ç”¨é€”ã€‚å…¶æ¬¡ï¼Œå½“å‰é¡µé¢é¡¹å¿…é¡»ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fwai-aria-1.2%2F%23aria-current" target="_blank" title="https://www.w3.org/TR/wai-aria-1.2/#aria-current" ref="nofollow noopener noreferrer">aria-current</a>="page" è¿›è¡Œæ ‡è®°ã€‚æœ€åï¼Œç¡®ä¿åˆ†éš”ç¬¦å…ƒç´ ä½¿ç”¨ aria-hidden="true"ï¼Œä»¥é¿å…è¾…åŠ©æŠ€æœ¯ç”¨æˆ·å¬åˆ°ä¸å¿…è¦çš„æ ‡ç‚¹ç¬¦å·æœ—è¯»ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ARIA å±æ€§ä½¿ç”¨è§„èŒƒ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"é¢åŒ…å±‘å¯¼èˆª"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/blog/"</span>&gt;</span>åšå®¢<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">aria-current</span>=<span class="hljs-string">"page"</span>&gt;</span>æ–‡ç« æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
</code></pre>
<h4 data-id="heading-13">5.3 å“åº”å¼è®¾è®¡è€ƒè™‘</h4>
<p>é¢åŒ…å±‘å¯¼èˆªåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå¯èƒ½é¢ä¸´ç©ºé—´å—é™çš„æŒ‘æˆ˜ã€‚å¯¹äºå±‚çº§è¾ƒæ·±çš„å¯¼èˆªï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹ç­–ç•¥ï¼šä¸€æ˜¯ä½¿ç”¨çœç•¥å·éšè—ä¸­é—´å±‚çº§ï¼Œåªä¿ç•™é¦–é¡µå’Œæœ€åå‡ çº§ï¼›äºŒæ˜¯å…è®¸ç”¨æˆ·å±•å¼€æŸ¥çœ‹å®Œæ•´è·¯å¾„ï¼›ä¸‰æ˜¯å°†é¢åŒ…å±‘å¯¼èˆªæ”¹ä¸ºå‚ç›´å¸ƒå±€ã€‚æ— è®ºé‡‡ç”¨å“ªç§ç­–ç•¥ï¼Œéƒ½è¦ç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿè®¿é—®å®Œæ•´çš„å¯¼èˆªä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å“åº”å¼é¢åŒ…å±‘å¯¼èˆª */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-class">.breadcrumb-list</span> {
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">4px</span>;
  }

  <span class="hljs-selector-class">.breadcrumb-separator</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">90deg</span>);
  }
}
</code></pre>
<h3 data-id="heading-14">å…­ã€é¢åŒ…å±‘å¯¼èˆªä¸ä¸»å¯¼èˆªçš„åŒºåˆ«</h3>
<p>é¢åŒ…å±‘å¯¼èˆªå’Œä¸»å¯¼èˆªæ è™½ç„¶éƒ½æ˜¯ç½‘ç«™å¯¼èˆªçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä½†å®ƒä»¬æœåŠ¡äºä¸åŒçš„ç›®çš„ï¼Œç†è§£è¿™ç§åŒºåˆ«å¯¹äºæ­£ç¡®ä½¿ç”¨è¿™ä¸¤ç§å¯¼èˆªç»„ä»¶è‡³å…³é‡è¦ã€‚</p>
<p>é¢åŒ…å±‘å¯¼èˆªçš„ä¸»è¦ä½œç”¨æ˜¯å±•ç¤ºç”¨æˆ·åœ¨ç½‘ç«™å±‚çº§ç»“æ„ä¸­çš„å½“å‰ä½ç½®ï¼Œå®ƒåæ˜ çš„æ˜¯ç½‘ç«™çš„é€»è¾‘ç»“æ„ï¼Œè€Œéç”¨æˆ·çš„æµè§ˆå†å²ã€‚é¢åŒ…å±‘å¯¼èˆªé€šå¸¸åªå‡ºç°åœ¨å±‚çº§è¾ƒæ·±çš„é¡µé¢ä¸­ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å½“å‰ä½ç½®ä¸ç½‘ç«™æ•´ä½“ç»“æ„çš„å…³ç³»ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸»å¯¼èˆªæ æä¾›çš„æ˜¯ç½‘ç«™çš„æ•´ä½“æ¶æ„æ¦‚è§ˆï¼Œå…è®¸ç”¨æˆ·ç›´æ¥è·³è½¬åˆ°ä»»ä½•ä¸»è¦ç‰ˆå—ï¼Œè€Œä¸è€ƒè™‘å½“å‰çš„å±‚çº§ä½ç½®ã€‚</p>
<p>ä»å®ç°è§’åº¦æ¥çœ‹ï¼Œé¢åŒ…å±‘å¯¼èˆªå¼ºè°ƒçš„æ˜¯å±‚çº§å…³ç³»ï¼Œå› æ­¤é€šå¸¸ä½¿ç”¨æœ‰åºåˆ—è¡¨ï¼ˆolï¼‰æ¥ä½“ç°è¿™ç§é¡ºåºæ€§ã€‚è€Œä¸»å¯¼èˆªæ æ›´å¼ºè°ƒåŠŸèƒ½åˆ†åŒºçš„åˆ’åˆ†ï¼Œå¯èƒ½ä½¿ç”¨æ— åºåˆ—è¡¨ï¼ˆulï¼‰æˆ–æ›´å¤æ‚çš„å¸ƒå±€ç»“æ„ã€‚ä¸¤è€…åœ¨ ARIA å±æ€§ä½¿ç”¨ä¸Šä¹Ÿä¸åŒï¼šé¢åŒ…å±‘å¯¼èˆªéœ€è¦æ˜ç¡®æ ‡è®°å½“å‰é¡µé¢ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fwai-aria-1.2%2F%23aria-current" target="_blank" title="https://www.w3.org/TR/wai-aria-1.2/#aria-current" ref="nofollow noopener noreferrer">aria-current</a>="page"ï¼‰ï¼Œè€Œä¸»å¯¼èˆªæ é€šå¸¸ä¸éœ€è¦è¿™ç§æ ‡è®°ã€‚</p>
<h3 data-id="heading-15">ä¸ƒã€æ€»ç»“</h3>
<p>æ„å»ºæ— éšœç¢çš„é¢åŒ…å±‘å¯¼èˆªéœ€è¦å…³æ³¨è¯­ä¹‰åŒ–ç»“æ„ã€ARIA å±æ€§åº”ç”¨å’Œè§†è§‰æ ·å¼ä¸‰ä¸ªå±‚é¢çš„ç»†èŠ‚ã€‚ä»è¯­ä¹‰åŒ–è§’åº¦ï¼Œåº”ä½¿ç”¨ nav å…ƒç´ å®šä¹‰å¯¼èˆªåŒºåŸŸï¼Œä½¿ç”¨ ol æˆ– ul å…ƒç´ åˆ›å»ºåˆ—è¡¨ç»“æ„ã€‚ä» ARIA å±æ€§è§’åº¦ï¼Œéœ€è¦ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fwai-aria-1.2%2F%23aria-label" target="_blank" title="https://www.w3.org/TR/wai-aria-1.2/#aria-label" ref="nofollow noopener noreferrer">aria-label</a> ä¸ºå¯¼èˆªåŒºåŸŸæä¾›æ ‡ç­¾ï¼Œä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fwai-aria-1.2%2F%23aria-current" target="_blank" title="https://www.w3.org/TR/wai-aria-1.2/#aria-current" ref="nofollow noopener noreferrer">aria-current</a>="page" æ ‡è®°å½“å‰é¡µé¢ã€‚ä»è§†è§‰æ ·å¼è§’åº¦ï¼Œåº”ç¡®ä¿é“¾æ¥æ˜“äºè¯†åˆ«ï¼Œåˆ†éš”ç¬¦æ¸…æ™°ï¼Œå½“å‰é¡µé¢çŠ¶æ€æ˜ç¡®ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FWAI%2FARIA%2Fapg%2Fpatterns%2Fbreadcrumb%2F" target="_blank" title="https://www.w3.org/WAI/ARIA/apg/patterns/breadcrumb/" ref="nofollow noopener noreferrer">WAI-ARIA Breadcrumb Pattern</a> ä¸ºæˆ‘ä»¬æä¾›äº†æ¸…æ™°çš„æŒ‡å¯¼æ–¹é’ˆï¼Œéµå¾ªè¿™äº›è§„èŒƒèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åˆ›å»ºæ›´åŠ åŒ…å®¹å’Œæ˜“ç”¨çš„ Web åº”ç”¨ã€‚æ¯ä¸€ä¸ªæ­£ç¡®å®ç°çš„é¢åŒ…å±‘å¯¼èˆªç»„ä»¶ï¼Œéƒ½æ˜¯æå‡ç”¨æˆ·ä½“éªŒå’Œç½‘ç«™å¯è®¿é—®æ€§çš„é‡è¦ä¸€æ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CMakeLists.txtå‘½ä»¤å…¨é¢è§£æ]]></title>    <link>https://juejin.cn/post/7600986495927877673</link>    <guid>https://juejin.cn/post/7600986495927877673</guid>    <pubDate>2026-01-31T08:58:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600986495927877673" data-draft-id="7600986495927844905" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CMakeLists.txtå‘½ä»¤å…¨é¢è§£æ"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2026-01-31T08:58:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é»‘å¤œç»™äº†æˆ‘é»‘è‰²çš„çœ¼ç›"/> <meta itemprop="url" content="https://juejin.cn/user/3690408471177224"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CMakeLists.txtå‘½ä»¤å…¨é¢è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3690408471177224/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é»‘å¤œç»™äº†æˆ‘é»‘è‰²çš„çœ¼ç›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T08:58:55.000Z" title="Sat Jan 31 2026 08:58:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€CMake æ ¸å¿ƒåŸºç¡€ï¼ˆå¿…å­¦ï¼Œå 80%ä½¿ç”¨åœºæ™¯ï¼‰</h2>
<h3 data-id="heading-1">1. ç‰ˆæœ¬å£°æ˜ï¼ˆè„šæœ¬ç¬¬ä¸€è¡Œå¿…å†™ï¼‰</h3>
<h4 data-id="heading-2">å‘½ä»¤æ ¼å¼</h4>
<pre><code class="hljs language-cmake" lang="cmake">cmake_minimum_required(VERSION &lt;ç‰ˆæœ¬å·&gt;)
</code></pre>
<h4 data-id="heading-3">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake">cmake_minimum_required(VERSION 3.10)    # Abseilé¡¹ç›®æœ€ä½ç‰ˆæœ¬
cmake_minimum_required(VERSION 3.22.1) # nativesdké¡¹ç›®æœ€ä½ç‰ˆæœ¬
cmake_minimum_required(VERSION 3.5)     # utf8_rangeé¡¹ç›®æœ€ä½ç‰ˆæœ¬
</code></pre>
<h4 data-id="heading-4">ä½œç”¨</h4>
<p>æŒ‡å®šè¿è¡Œå½“å‰CMakeè„šæœ¬æ‰€éœ€çš„æœ€ä½CMakeç‰ˆæœ¬ï¼Œä½äºè¯¥ç‰ˆæœ¬ä¼šç›´æ¥æŠ¥é”™ï¼Œç¡®ä¿è„šæœ¬å…¼å®¹æ€§ã€‚</p>
<h3 data-id="heading-5">2. é¡¹ç›®å£°æ˜</h3>
<h4 data-id="heading-6">å‘½ä»¤æ ¼å¼</h4>
<pre><code class="hljs language-cmake" lang="cmake">project(&lt;é¡¹ç›®å&gt; [LANGUAGES &lt;è¯­è¨€åˆ—è¡¨&gt;] [VERSION &lt;ç‰ˆæœ¬å·&gt;])
</code></pre>
<h4 data-id="heading-7">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake">project(absl LANGUAGES CXX VERSION 20230802)  # ä»…C++ï¼ŒæŒ‡å®šç‰ˆæœ¬
project(nativesdk)                             # é»˜è®¤è¯­è¨€ï¼ˆC/C++ï¼‰ï¼Œæ— ç‰ˆæœ¬
project(utf8_range C CXX)                     # åŒæ—¶æ”¯æŒCå’ŒC++
</code></pre>
<h4 data-id="heading-8">ä½œç”¨</h4>
<ul>
<li>å®šä¹‰é¡¹ç›®åç§°ï¼Œæ˜¯CMakeè„šæœ¬çš„æ ¸å¿ƒæ ‡è¯†ï¼›</li>
<li><code>LANGUAGES</code>ï¼šæŒ‡å®šé¡¹ç›®æ”¯æŒçš„ç¼–è¯‘è¯­è¨€ï¼ˆCXX=C++ï¼ŒC=Cï¼Œä¸å†™åˆ™é»˜è®¤C/C++ï¼‰ï¼›</li>
<li><code>VERSION</code>ï¼šç»™é¡¹ç›®æ ‡æ³¨ç‰ˆæœ¬å·ï¼ˆä»…å‘å¸ƒåº“æ—¶æœ‰ç”¨ï¼‰ï¼›</li>
</ul>
<h4 data-id="heading-9">è‡ªåŠ¨ç”Ÿæˆå˜é‡ï¼ˆå¸¸ç”¨ï¼‰</h4>
<ul>
<li><code>${PROJECT_NAME}</code>ï¼šå½“å‰é¡¹ç›®åï¼ˆå¦‚abslã€nativesdkï¼‰ï¼›</li>
<li><code>${PROJECT_SOURCE_DIR}</code>ï¼šé¡¹ç›®æºç æ ¹ç›®å½•ã€‚</li>
</ul>
<h3 data-id="heading-10">3. å˜é‡è®¾ç½®ï¼ˆå­˜å‚¨è·¯å¾„/å¼€å…³/å‚æ•°ï¼‰</h3>
<h4 data-id="heading-11">å‘½ä»¤æ ¼å¼</h4>
<pre><code class="hljs language-cmake" lang="cmake"># åŸºç¡€èµ‹å€¼
set(&lt;å˜é‡å&gt; &lt;å˜é‡å€¼&gt;)
# ç¼“å­˜å˜é‡ï¼ˆå¼ºåˆ¶è¦†ç›–é»˜è®¤å€¼ï¼‰
set(&lt;å˜é‡å&gt; &lt;å€¼&gt; CACHE &lt;ç±»å‹&gt; "&lt;æè¿°&gt;" FORCE)
</code></pre>
<h4 data-id="heading-12">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake"># åŸºç¡€å˜é‡ï¼šç¼–è¯‘æ ‡å‡†ã€å¹³å°é…ç½®
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_ANDROID_STL_TYPE c++_static)

# ç¼“å­˜å˜é‡ï¼šå…³é—­ç¬¬ä¸‰æ–¹åº“æµ‹è¯•/ç¤ºä¾‹
set(ABSL_BUILD_TESTING OFF CACHE BOOL "" FORCE)
set(protobuf_USE_LITE_RUNTIME ON CACHE BOOL "" FORCE)

# è·¯å¾„å˜é‡ï¼šæ‹¼æ¥è·¯å¾„
set(UTF8_RANGE_SRC_DIR "${protobuf_SOURCE_DIR}/third_party/utf8_range")
</code></pre>
<h4 data-id="heading-13">æ ¸å¿ƒè¯´æ˜</h4>
<ul>
<li>å˜é‡å¼•ç”¨æ–¹å¼ï¼š<code>${å˜é‡å}</code>ï¼ˆå¦‚<code>${CMAKE_CXX_STANDARD}</code>ï¼‰ï¼›</li>
<li>å¸¸ç”¨ç±»å‹ï¼š<code>BOOL</code>ï¼ˆå¸ƒå°”å€¼ï¼Œå€¼ä¸ºON/OFFï¼Œétrue/falseï¼‰ï¼›</li>
<li><code>FORCE</code>ï¼šå¼ºåˆ¶è¦†ç›–CMakeé»˜è®¤çš„å˜é‡å€¼ï¼ˆæ¯”å¦‚å…³é—­Abseilçš„æµ‹è¯•ç¼–è¯‘ï¼‰ï¼›</li>
<li>è·¯å¾„æ‹¼æ¥ï¼šç”¨åŒå¼•å·åŒ…è£¹ï¼ˆ<code>"${A}/${B}"</code>ï¼‰ï¼Œé¿å…è·¯å¾„å«ç©ºæ ¼æ—¶å‡ºé”™ã€‚</li>
</ul>
<h3 data-id="heading-14">4. ç¼–è¯‘åº“/å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ ¸å¿ƒç¼–è¯‘å‘½ä»¤ï¼‰</h3>
<h4 data-id="heading-15">ï¼ˆ1ï¼‰ç¼–è¯‘åº“ï¼š<code>add_library</code></h4>
<h5 data-id="heading-16">å‘½ä»¤æ ¼å¼</h5>
<pre><code class="hljs language-cmake" lang="cmake">add_library(&lt;åº“å&gt; &lt;åº“ç±»å‹&gt; &lt;æºç æ–‡ä»¶åˆ—è¡¨&gt;)
</code></pre>
<h5 data-id="heading-17">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h5>
<pre><code class="hljs language-cmake" lang="cmake"># é™æ€åº“ï¼ˆSTATICï¼‰ï¼šç”Ÿæˆ.a/.libæ–‡ä»¶
add_library(utf8_range STATIC naive.c range2-neon.c)

# åŠ¨æ€åº“ï¼ˆSHAREDï¼‰ï¼šç”Ÿæˆ.so/.dllæ–‡ä»¶
add_library(nativesdk SHARED ${ALL_SRC})
</code></pre>
<h5 data-id="heading-18">æ ¸å¿ƒè¯´æ˜</h5>
<ul>
<li>åº“ç±»å‹ï¼š
<ul>
<li><code>STATIC</code>ï¼šé™æ€åº“ï¼Œç¼–è¯‘æ—¶æ‰“åŒ…è¿›å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸ä¾èµ–å¤–éƒ¨åº“ï¼›</li>
<li><code>SHARED</code>ï¼šåŠ¨æ€åº“ï¼Œè¿è¡Œæ—¶åŠ è½½ï¼Œéœ€é…å¥—å‘å¸ƒ.so/.dllï¼›</li>
<li><code>INTERFACE</code>ï¼šä»…å¤´æ–‡ä»¶åº“ï¼ˆæ— æºç ï¼Œä»…æä¾›å¤´æ–‡ä»¶ï¼‰ï¼›</li>
</ul>
</li>
<li>æºç åˆ—è¡¨ï¼šå¯ç›´æ¥å†™æ–‡ä»¶åï¼ˆå¦‚<code>naive.c</code>ï¼‰ï¼Œä¹Ÿå¯å¼•ç”¨å˜é‡ï¼ˆå¦‚<code>${ALL_SRC}</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-19">ï¼ˆ2ï¼‰ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶ï¼š<code>add_executable</code></h4>
<h5 data-id="heading-20">å‘½ä»¤æ ¼å¼</h5>
<pre><code class="hljs language-cmake" lang="cmake">add_executable(&lt;ç¨‹åºå&gt; &lt;æºç æ–‡ä»¶åˆ—è¡¨&gt;)
</code></pre>
<h5 data-id="heading-21">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h5>
<pre><code class="hljs language-cmake" lang="cmake">add_executable(tests utf8_validity_test.cc)  # ç¼–è¯‘æµ‹è¯•ç¨‹åº
</code></pre>
<h5 data-id="heading-22">ä½œç”¨</h5>
<p>ç”Ÿæˆå¯è¿è¡Œçš„ç¨‹åºï¼ˆå¦‚æµ‹è¯•ç¨‹åºã€å·¥å…·ç¨‹åºï¼‰ï¼Œä»…åœ¨éœ€è¦å¯æ‰§è¡Œæ–‡ä»¶æ—¶ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-23">5. å¤´æ–‡ä»¶ç›®å½•é…ç½®</h3>
<h4 data-id="heading-24">å‘½ä»¤æ ¼å¼</h4>
<pre><code class="hljs language-cmake" lang="cmake"># å…¨å±€å¤´æ–‡ä»¶ï¼ˆæ‰€æœ‰ç›®æ ‡ç”Ÿæ•ˆï¼‰
include_directories(&lt;ç›®å½•åˆ—è¡¨&gt;)
# ç›®æ ‡ä¸“å±å¤´æ–‡ä»¶ï¼ˆæ¨èï¼Œç²¾å‡†ï¼‰
target_include_directories(&lt;ç›®æ ‡å&gt; &lt;ä½œç”¨åŸŸ&gt; &lt;ç›®å½•åˆ—è¡¨&gt;)
</code></pre>
<h4 data-id="heading-25">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake"># å…¨å±€å¤´æ–‡ä»¶
include_directories(${UTF8_RANGE_SRC_DIR})

# ç›®æ ‡ä¸“å±å¤´æ–‡ä»¶ï¼ˆPRIVATEä»…å½“å‰ç›®æ ‡å¯ç”¨ï¼‰
target_include_directories(nativesdk PRIVATE
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${abseil-cpp_SOURCE_DIR}
)
</code></pre>
<h4 data-id="heading-26">æ ¸å¿ƒè¯´æ˜</h4>
<ul>
<li>ä½œç”¨åŸŸï¼š
<ul>
<li><code>PRIVATE</code>ï¼šä»…å½“å‰ç›®æ ‡å¯ç”¨ï¼ˆå¦‚nativesdkè‡ªå·±çš„å¤´æ–‡ä»¶ï¼‰ï¼›</li>
<li><code>PUBLIC</code>ï¼šå½“å‰ç›®æ ‡ + ä¾èµ–è¯¥ç›®æ ‡çš„å…¶ä»–ç›®æ ‡å¯ç”¨ï¼›</li>
<li><code>INTERFACE</code>ï¼šä»…ä¾èµ–è¯¥ç›®æ ‡çš„å…¶ä»–ç›®æ ‡å¯ç”¨ï¼›</li>
</ul>
</li>
<li>æ ¸å¿ƒä½œç”¨ï¼šå‘Šè¯‰ç¼–è¯‘å™¨ã€Œå»å“ªé‡Œæ‰¾#includeçš„å¤´æ–‡ä»¶ã€ï¼Œé¿å…ã€Œå¤´æ–‡ä»¶æ‰¾ä¸åˆ°ã€é”™è¯¯ã€‚</li>
</ul>
<h3 data-id="heading-27">6. åº“é“¾æ¥ï¼ˆå…³è”ä¾èµ–åº“ï¼‰</h3>
<h4 data-id="heading-28">å‘½ä»¤æ ¼å¼</h4>
<pre><code class="hljs language-cmake" lang="cmake">target_link_libraries(&lt;ç›®æ ‡å&gt; &lt;ä½œç”¨åŸŸ&gt; &lt;åº“ååˆ—è¡¨&gt;)
</code></pre>
<h4 data-id="heading-29">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake">target_link_libraries(nativesdk PRIVATE
  absl::base absl::strings
  protobuf::libprotobuf-lite
  utf8_range
  log z atomic m
)

target_link_libraries(utf8_validity PUBLIC absl::strings)
</code></pre>
<h4 data-id="heading-30">æ ¸å¿ƒè¯´æ˜</h4>
<ul>
<li>ä½œç”¨ï¼šå‘Šè¯‰ç¼–è¯‘å™¨ã€Œå½“å‰ç›®æ ‡éœ€è¦é“¾æ¥å“ªäº›åº“ã€ï¼Œè§£å†³ç¼–è¯‘æ—¶çš„ã€Œæœªå®šä¹‰ç¬¦å·ã€é”™è¯¯ï¼›</li>
<li>åº“åç±»å‹ï¼š
<ul>
<li>è‡ªå®šä¹‰åº“ï¼ˆå¦‚<code>utf8_range</code>ï¼‰ï¼›</li>
<li>ç¬¬ä¸‰æ–¹åº“åˆ«åï¼ˆå¦‚<code>absl::base</code>ã€<code>protobuf::libprotobuf-lite</code>ï¼‰ï¼›</li>
<li>ç³»ç»Ÿåº“ï¼ˆå¦‚Androidçš„<code>log</code>ã€<code>z</code>ã€<code>atomic</code>ï¼‰ï¼›</li>
</ul>
</li>
<li>ä½œç”¨åŸŸï¼šåŒ<code>target_include_directories</code>ï¼ˆPRIVATE/PUBLIC/INTERFACEï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-31">7. æ¡ä»¶åˆ¤æ–­ï¼ˆæ§åˆ¶ç¼–è¯‘é€»è¾‘ï¼‰</h3>
<h4 data-id="heading-32">å‘½ä»¤æ ¼å¼</h4>
<pre><code class="hljs language-cmake" lang="cmake">if(&lt;æ¡ä»¶&gt;)
  # æ»¡è¶³æ¡ä»¶æ‰§è¡Œçš„å‘½ä»¤
elseif(&lt;å…¶ä»–æ¡ä»¶&gt;)
  # å…¶ä»–æ¡ä»¶æ‰§è¡Œçš„å‘½ä»¤
else()
  # éƒ½ä¸æ»¡è¶³æ‰§è¡Œçš„å‘½ä»¤
endif()
</code></pre>
<h4 data-id="heading-33">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake"># æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç›®æ ‡
if (NOT TARGET absl::strings)
  if (NOT ABSL_ROOT_DIR)
    find_package(absl REQUIRED CONFIG)
  else ()
    add_subdirectory(${ABSL_ROOT_DIR} third_party/abseil-cpp)
  endif ()
endif ()

# æ£€æŸ¥ç¼–è¯‘å¼€å…³
if (${ABSL_BUILD_DLL})
  absl_make_dll()
endif ()
</code></pre>
<h4 data-id="heading-34">å¸¸ç”¨æ¡ä»¶</h4>
<ul>
<li><code>NOT</code>ï¼šå–åï¼ˆå¦‚<code>NOT TARGET absl::strings</code> = ä¸å­˜åœ¨absl::stringsç›®æ ‡ï¼‰ï¼›</li>
<li><code>MATCHES</code>ï¼šå­—ç¬¦ä¸²åŒ¹é…ï¼ˆå¦‚<code>"${CMAKE_CXX_COMPILER_ID}" MATCHES "Clang"</code>ï¼‰ï¼›</li>
<li>å˜é‡åˆ¤æ–­ï¼ˆå¦‚<code>${ABSL_BUILD_DLL}</code> = ONæ—¶æ‰§è¡Œï¼‰ï¼›</li>
</ul>
<h4 data-id="heading-35">ä½œç”¨</h4>
<p>å®ç°ã€Œè·¨å¹³å°ç¼–è¯‘ã€ã€ŒæŒ‰éœ€ç¼–è¯‘ã€ï¼ˆæ¯”å¦‚Androidå’ŒLinuxç¼–è¯‘é€»è¾‘ä¸åŒã€æ˜¯å¦ç¼–è¯‘æµ‹è¯•ä»£ç ï¼‰ã€‚</p>
<h2 data-id="heading-36">äºŒã€CMake è¿›é˜¶å‘½ä»¤ï¼ˆä½ çš„ä»£ç é«˜é¢‘ä½¿ç”¨ï¼‰</h2>
<h3 data-id="heading-37">1. ç¬¬ä¸‰æ–¹åº“æ‹‰å–ï¼š<code>FetchContent</code>ï¼ˆè‡ªåŠ¨ä¸‹è½½/ç¼–è¯‘ï¼‰</h3>
<h4 data-id="heading-38">å‘½ä»¤ç»„åˆ</h4>
<pre><code class="hljs language-cmake" lang="cmake"># å£°æ˜è¦æ‹‰å–çš„åº“
FetchContent_Declare(
  &lt;åº“å&gt;
  GIT_REPOSITORY &lt;Gitä»“åº“åœ°å€&gt;
  GIT_TAG &lt;ç‰ˆæœ¬æ ‡ç­¾/åˆ†æ”¯&gt;
  GIT_SHALLOW &lt;ON/OFF&gt;
)
# åˆå§‹åŒ–å¹¶ç¼–è¯‘åº“
FetchContent_MakeAvailable(&lt;åº“å1&gt; &lt;åº“å2&gt;)
</code></pre>
<h4 data-id="heading-39">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake">FetchContent_Declare(
  abseil-cpp
  GIT_REPOSITORY https://github.com/abseil/abseil-cpp.git
  GIT_TAG 20240116.0
  GIT_SHALLOW OFF
)
FetchContent_MakeAvailable(abseil-cpp protobuf)
</code></pre>
<h4 data-id="heading-40">æ ¸å¿ƒè¯´æ˜</h4>
<ul>
<li>ä½œç”¨ï¼šæ— éœ€æ‰‹åŠ¨ä¸‹è½½ç¬¬ä¸‰æ–¹åº“æºç ï¼ŒCMakeè‡ªåŠ¨ä»Gitæ‹‰å–ã€ç¼–è¯‘ï¼Œç®€åŒ–ä¾èµ–ç®¡ç†ï¼›</li>
<li><code>GIT_TAG</code>ï¼šå¿…é¡»æŒ‡å®šï¼ˆå¦‚ç‰ˆæœ¬å·ã€æ ‡ç­¾ï¼‰ï¼Œé¿å…æ‹‰å–æœ€æ–°ä»£ç å¯¼è‡´å…¼å®¹é—®é¢˜ï¼›</li>
<li>æ‹‰å–çš„åº“ä¼šå­˜åˆ°æ„å»ºç›®å½•çš„<code>_deps</code>å­ç›®å½•ä¸‹ã€‚</li>
</ul>
<h3 data-id="heading-41">2. æŸ¥æ‰¾ç³»ç»Ÿåº“ï¼š<code>find_package</code>ï¼ˆæ‰¾å·²å®‰è£…çš„åº“ï¼‰</h3>
<h4 data-id="heading-42">å‘½ä»¤æ ¼å¼</h4>
<pre><code class="hljs language-cmake" lang="cmake">find_package(&lt;åº“å&gt; [REQUIRED] [CONFIG])
</code></pre>
<h4 data-id="heading-43">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake">find_package(Threads REQUIRED)    # æŸ¥æ‰¾çº¿ç¨‹åº“ï¼Œæ‰¾ä¸åˆ°åˆ™æŠ¥é”™
find_package(GTest REQUIRED)      # æŸ¥æ‰¾GoogleTeståº“
find_package(absl REQUIRED CONFIG) # æŒ‰é…ç½®æ–‡ä»¶æŸ¥æ‰¾Abseil
</code></pre>
<h4 data-id="heading-44">æ ¸å¿ƒè¯´æ˜</h4>
<ul>
<li><code>REQUIRED</code>ï¼šæ ‡è®°ä¸ºå¿…é€‰ä¾èµ–ï¼Œæ‰¾ä¸åˆ°åº“åˆ™ç›´æ¥æŠ¥é”™ï¼›</li>
<li><code>CONFIG</code>ï¼šæŒ‰åº“çš„CMakeé…ç½®æ–‡ä»¶æŸ¥æ‰¾ï¼ˆè€Œéç³»ç»Ÿé»˜è®¤è·¯å¾„ï¼‰ï¼›</li>
<li>åŒºåˆ«ï¼š<code>FetchContent</code>æ˜¯ã€Œä¸‹è½½å¹¶ç¼–è¯‘ã€ï¼Œ<code>find_package</code>æ˜¯ã€Œæ‰¾å·²å®‰è£…çš„åº“ã€ã€‚</li>
</ul>
<h3 data-id="heading-45">3. å­ç›®å½•ç¼–è¯‘ï¼š<code>add_subdirectory</code></h3>
<h4 data-id="heading-46">å‘½ä»¤æ ¼å¼</h4>
<pre><code class="hljs language-cmake" lang="cmake">add_subdirectory(&lt;å­ç›®å½•è·¯å¾„&gt; [ç¼–è¯‘è¾“å‡ºç›®å½•])
</code></pre>
<h4 data-id="heading-47">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake">add_subdirectory(absl)                  # ç¼–è¯‘Abseilä¸»ç›®å½•
add_subdirectory(base)                  # ç¼–è¯‘Abseilçš„baseå­æ¨¡å—
add_subdirectory(${ABSL_ROOT_DIR} third_party/abseil-cpp) # æŒ‡å®šè¾“å‡ºç›®å½•
</code></pre>
<h4 data-id="heading-48">ä½œç”¨</h4>
<p>è¿›å…¥å­ç›®å½•ï¼Œæ‰§è¡Œè¯¥ç›®å½•ä¸‹çš„<code>CMakeLists.txt</code>ï¼Œé€‚åˆæ‹†åˆ†å¤§å‹é¡¹ç›®ï¼ˆå¦‚AbseilæŒ‰æ¨¡å—æ‹†åˆ†ç¼–è¯‘ï¼‰ã€‚</p>
<h3 data-id="heading-49">4. ç¼–è¯‘å®å®šä¹‰ï¼š<code>target_compile_definitions</code></h3>
<h4 data-id="heading-50">å‘½ä»¤æ ¼å¼</h4>
<pre><code class="hljs language-cmake" lang="cmake">target_compile_definitions(&lt;ç›®æ ‡å&gt; &lt;ä½œç”¨åŸŸ&gt; &lt;å®å1&gt; &lt;å®å2=å€¼&gt;)
</code></pre>
<h4 data-id="heading-51">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake">target_compile_definitions(nativesdk PRIVATE
  PROTOBUF_USE_LITE_RUNTIME
  GOOGLE_PROTOBUF_NO_RTTI
  PROTOBUF_DISABLE_JSON=1
)
</code></pre>
<h4 data-id="heading-52">ä½œç”¨</h4>
<p>ç»™ç¼–è¯‘å™¨ä¼ é€’å®å®šä¹‰ï¼Œä»£ç ä¸­å¯é€šè¿‡<code>#ifdef</code>åˆ¤æ–­ï¼ˆå¦‚<code>PROTOBUF_USE_LITE_RUNTIME</code>å¯ç”¨Protobuf Liteç‰ˆæœ¬ï¼‰ã€‚</p>
<h3 data-id="heading-53">5. æ–‡ä»¶æ‰¹é‡æŸ¥æ‰¾ï¼š<code>file(GLOB)</code></h3>
<h4 data-id="heading-54">å‘½ä»¤æ ¼å¼</h4>
<pre><code class="hljs language-cmake" lang="cmake">file(GLOB &lt;å˜é‡å&gt; &lt;æ–‡ä»¶åŒ¹é…è§„åˆ™&gt;)
</code></pre>
<h4 data-id="heading-55">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake">file(GLOB ALL_SRC
  ${CMAKE_CURRENT_SOURCE_DIR}/core/*.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/proto/*.pb.cc
)
</code></pre>
<h4 data-id="heading-56">æ ¸å¿ƒè¯´æ˜</h4>
<ul>
<li>ä½œç”¨ï¼šæ‰¹é‡åŒ¹é…æ–‡ä»¶ï¼ˆå¦‚æ‰€æœ‰<code>.cpp</code>ã€<code>.pb.cc</code>ï¼‰ï¼Œé¿å…æ‰‹åŠ¨ç½—åˆ—æ‰€æœ‰æºç ï¼›</li>
<li>åŒ¹é…è§„åˆ™ï¼š<code>*.cpp</code>ï¼ˆæ‰€æœ‰cppæ–‡ä»¶ï¼‰ã€<code>core/*.cpp</code>ï¼ˆcoreç›®å½•ä¸‹çš„cppæ–‡ä»¶ï¼‰ï¼›</li>
<li>æ³¨æ„ï¼šæ–°å¢æ–‡ä»¶åéœ€é‡æ–°æ‰§è¡Œ<code>cmake ..</code>æ‰èƒ½è¯†åˆ«ã€‚</li>
</ul>
<h3 data-id="heading-57">6. CMakeç­–ç•¥é…ç½®ï¼š<code>cmake_policy</code></h3>
<h4 data-id="heading-58">å‘½ä»¤æ ¼å¼</h4>
<pre><code class="hljs language-cmake" lang="cmake">cmake_policy(SET &lt;ç­–ç•¥ID&gt; &lt;NEW/OLD&gt;)
</code></pre>
<h4 data-id="heading-59">ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake">cmake_policy(SET CMP0025 NEW)  # Apple Clangç¼–è¯‘å™¨æ ‡è¯†ä¿®æ­£
cmake_policy(SET CMP0077 NEW)  # optionå‘½ä»¤å°Šé‡å˜é‡å€¼
</code></pre>
<h4 data-id="heading-60">ä½œç”¨</h4>
<p>å…¼å®¹ä¸åŒCMakeç‰ˆæœ¬çš„è¡Œä¸ºå·®å¼‚ï¼ˆå¦‚æ—§ç‰ˆæœ¬CMakeçš„æŸäº›å‘½ä»¤é€»è¾‘å’Œæ–°ç‰ˆæœ¬ä¸åŒï¼Œé€šè¿‡ç­–ç•¥ç»Ÿä¸€ï¼‰ã€‚</p>
<h2 data-id="heading-61">ä¸‰ã€CMake å®æˆ˜åœºæ™¯ï¼ˆç»“åˆä½ çš„ä»£ç ï¼‰</h2>
<h3 data-id="heading-62">åœºæ™¯1ï¼šç¼–è¯‘AndroidåŠ¨æ€åº“ï¼ˆnativesdkï¼‰</h3>
<p>æ ¸å¿ƒå‘½ä»¤æµç¨‹ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># 1. åŸºç¡€é…ç½®
cmake_minimum_required(VERSION 3.22.1)
project(nativesdk)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_ANDROID_STL_TYPE c++_static)

# 2. æ‹‰å–ç¬¬ä¸‰æ–¹ä¾èµ–
FetchContent_Declare(abseil-cpp ...)
FetchContent_Declare(protobuf ...)
FetchContent_MakeAvailable(abseil-cpp protobuf)

# 3. æ”¶é›†æºç 
file(GLOB ALL_SRC core/*.cpp jni/*.cpp proto/*.pb.cc)

# 4. ç¼–è¯‘åŠ¨æ€åº“
add_library(nativesdk SHARED ${ALL_SRC})

# 5. é…ç½®å¤´æ–‡ä»¶
target_include_directories(nativesdk PRIVATE ${CMAKE_CURRENT_SOURCE_DIR} ${abseil-cpp_SOURCE_DIR})

# 6. å®šä¹‰ç¼–è¯‘å®
target_compile_definitions(nativesdk PRIVATE PROTOBUF_USE_LITE_RUNTIME)

# 7. é“¾æ¥ä¾èµ–åº“
target_link_libraries(nativesdk PRIVATE absl::base protobuf::libprotobuf-lite)
</code></pre>
<h3 data-id="heading-63">åœºæ™¯2ï¼šç¼–è¯‘é™æ€åº“ï¼ˆutf8_rangeï¼‰</h3>
<p>æ ¸å¿ƒå‘½ä»¤æµç¨‹ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># 1. åŸºç¡€é…ç½®
cmake_minimum_required(VERSION 3.5)
project(utf8_range C CXX)

# 2. ç¼–è¯‘é™æ€åº“
add_library(utf8_range STATIC naive.c range2-neon.c)

# 3. æŸ¥æ‰¾/ç¼–è¯‘Abseilä¾èµ–
if (NOT TARGET absl::strings)
  find_package(absl REQUIRED CONFIG)
endif()

# 4. é“¾æ¥Abseil
target_link_libraries(utf8_validity PUBLIC absl::strings)
</code></pre>
<h2 data-id="heading-64">å››ã€é¿å‘æŒ‡å—</h2>
<ol>
<li>è·¯å¾„å¼•ç”¨ï¼šæ‰€æœ‰è·¯å¾„ç”¨<code>${}</code>åŒ…è£¹ï¼Œæ‹¼æ¥æ—¶åŠ åŒå¼•å·ï¼ˆå¦‚<code>"${A}/${B}"</code>ï¼‰ï¼›</li>
<li>å¸ƒå°”å€¼ï¼šCMakeä¸­ç”¨<code>ON/OFF</code>ï¼Œè€Œé<code>true/false</code>ï¼›</li>
<li>ä½œç”¨åŸŸï¼šä¼˜å…ˆç”¨<code>PRIVATE</code>ï¼ˆä»…å½“å‰ç›®æ ‡ç”Ÿæ•ˆï¼‰ï¼Œé¿å…<code>PUBLIC</code>å¯¼è‡´çš„å…¨å±€æ±¡æŸ“ï¼›</li>
<li>ç¬¬ä¸‰æ–¹åº“ï¼š<code>FetchContent</code>æŒ‡å®š<code>GIT_TAG</code>ï¼Œé¿å…æ‹‰å–æœ€æ–°ä»£ç å¼•å‘å…¼å®¹é—®é¢˜ï¼›</li>
<li>é”™è¯¯æ’æŸ¥ï¼š
<ul>
<li>å¤´æ–‡ä»¶æ‰¾ä¸åˆ°ï¼šæ£€æŸ¥<code>target_include_directories</code>ï¼›</li>
<li>é“¾æ¥é”™è¯¯ï¼šæ£€æŸ¥<code>target_link_libraries</code>ï¼ˆåº“åæ˜¯å¦æ­£ç¡®ã€é¡ºåºæ˜¯å¦åˆç†ï¼‰ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜ï¼šå¤šèŠ‚ç‚¹äº‰æŠ¢èµ„æºï¼Œ Redis åˆ†å¸ƒå¼é”æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7600999271770341376</link>    <guid>https://juejin.cn/post/7600999271770341376</guid>    <pubDate>2026-01-31T07:07:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600999271770341376" data-draft-id="7601018079620612111" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜ï¼šå¤šèŠ‚ç‚¹äº‰æŠ¢èµ„æºï¼Œ Redis åˆ†å¸ƒå¼é”æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-31T07:07:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ—coding"/> <meta itemprop="url" content="https://juejin.cn/user/1750078243734029"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜ï¼šå¤šèŠ‚ç‚¹äº‰æŠ¢èµ„æºï¼Œ Redis åˆ†å¸ƒå¼é”æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1750078243734029/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ—coding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:07:58.000Z" title="Sat Jan 31 2026 07:07:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤šèŠ‚ç‚¹äº‰æŠ¢èµ„æºï¼Œ Redis åˆ†å¸ƒå¼é”æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</h2>
<p>å¤§å®¶å¥½ï¼Œä»Šå¤©ç»™å¤§å®¶åˆ†äº« Redis é‡Œçš„ä¸€ä¸ªçŸ¥è¯†ç‚¹ â€” Redis åˆ†å¸ƒå¼é”ã€‚</p>
<p><strong>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸–ç•Œé‡Œï¼ŒRedis å°±åƒä¸€åº§é«˜æ•ˆè¿è½¬çš„å…±äº«ä»“åº“</strong> â€” å¤šä¸ªèŠ‚ç‚¹é€šè¿‡å…±äº«æ•°æ®ååŒå‘åŠ›ï¼Œå·¦æ‰‹æ¥è¿‡ä¸šåŠ¡ç³»ç»Ÿçš„æµ·é‡è¯»å†™è¯·æ±‚ï¼Œå³æ‰‹ä»¥æ¯«ç§’çº§é€Ÿåº¦å®Œæˆæ•°æ®äº¤ä»˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b8e5942e4b7439dbdf3a911a642b973~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=cLjG0a%2BPRLw%2FXLxtzn%2FlKj18tEk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯å†é»˜å¥‘çš„å›¢é˜Ÿï¼Œå¦‚æœæ²¡æœ‰ç»Ÿä¸€çš„è¡ŒåŠ¨å‡†åˆ™ï¼Œä¹Ÿéš¾å…é‡åˆ°â€œæŠ¢æ´»å¹²â€çš„é—®é¢˜ã€‚è€Œ Redis åˆ†å¸ƒå¼é”ï¼Œå°±åƒæ˜¯åˆ†å¸ƒå¼ä¸–ç•Œé‡Œçš„ â€œç§©åºå®ˆæŠ¤è€…â€ã€‚å®ƒä¼šæ¸…æ™°åœ°å‘Šè¯‰æ¯ä¸ªèŠ‚ç‚¹ï¼š</p>
<p><strong>ä»€ä¹ˆæ—¶å€™èƒ½æ“ä½œæ•°æ®ã€èƒ½ä¸èƒ½åŒæ—¶æ“ä½œï¼ŒæŠŠæ•°æ®æ“ä½œçš„è¾¹ç•Œå’Œé¡ºåºåˆ’åˆ†å¾—æ˜æ˜ç™½ç™½ï¼Œä»æ ¹æºä¸Šæœç»äº‰æŠ¢ã€‚</strong></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹ â€” Redis åˆ†å¸ƒå¼é”æ˜¯æ€ä¹ˆç»™å¤šèŠ‚ç‚¹ç³»ç»Ÿ â€œç«‹è§„çŸ©â€ çš„ã€‚</p>
<h3 data-id="heading-1">è°åœ¨ç»™ Redis é”åˆ¶é€ å†²çªï¼Ÿ</h3>
<p>Redis é”çš„æ ¸å¿ƒç›®æ ‡ï¼Œæ˜¯åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­å»ºç«‹"å…±äº«èµ„æºè®¿é—®è§„åˆ™"ï¼Œè®©é”æœºåˆ¶äº•ç„¶æœ‰åºè¿è¡Œã€‚ä½†åœ¨å®é™…è½åœ°æ—¶ï¼Œæ€»æœ‰äº›é—®é¢˜åœ¨åˆ¶é€ å†²çªï¼š</p>
<h4 data-id="heading-2"><strong>é—®é¢˜ä¸€ï¼šé”äº‰æŠ¢ â€” å¤šäººæŠ¢åŒä¸€æŠŠé”ï¼Œå¯¼è‡´æ•°æ®é”™ä¹±</strong></h4>
<p>èŠ‚ç‚¹æƒ³è¦æ‹¿åˆ°é”ï¼Œå¾—ç»å†ä¸¤æ­¥æ“ä½œï¼š</p>
<p><strong>å…ˆåˆ¤æ–­è¿™æŠŠé”å½“å‰æœ‰æ²¡æœ‰è¢«äººå ç”¨ï¼Œç¡®è®¤ç©ºé—²åå†åŠ¨æ‰‹æŠ¢å é”ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e1c99f39e86408f8ccba4b03fa78801~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=PP87Yp%2FstrXKiEUno7iUXjcoz9g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½†é—®é¢˜æ°æ°å‡ºåœ¨è¿™ä¸¤æ­¥æ˜¯åˆ†å¼€åšçš„ â€” å“ªæ€•ä¸­é—´åªéš”äº†ä¸€ç¬é—´çš„ç©ºéš™ï¼Œä¹Ÿè¶³ä»¥åŸ‹ä¸‹éšæ‚£ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ï¼šæœ‰å¥½å‡ ä¸ªèŠ‚ç‚¹åŒæ—¶è¦æŠ¢åŒä¸€æŠŠé”ã€‚èŠ‚ç‚¹ A å…ˆæŸ¥è¯¢äº†é”çš„çŠ¶æ€ï¼Œå‘ç° â€œæ²¡äººå ç”¨â€ï¼Œæ­£å‡†å¤‡åŠ¨æ‰‹æŠ¢å æ—¶ï¼ŒèŠ‚ç‚¹ B å‡ ä¹åœ¨åŒä¸€æ—¶é—´ä¹ŸæŸ¥äº†é”çš„çŠ¶æ€ï¼Œå¾—åˆ°äº†åŒæ ·çš„ç»“æœã€‚</p>
<p><strong>æ¥ä¸‹æ¥ï¼Œä¸¤ä¸ªèŠ‚ç‚¹éƒ½é¡ºåˆ©å®Œæˆäº†æŠ¢å æ“ä½œï¼Œä»¥è‡³äºæ¯ä¸ªèŠ‚ç‚¹éƒ½è§‰å¾—è‡ªå·±æŠ¢åˆ°äº†å”¯ä¸€çš„é”ã€‚</strong> è¿›è€ŒåŒæ—¶å»æ“ä½œåŒä¸€ä¸ªå…±äº«èµ„æºï¼Œæœ€ç»ˆå¼•å‘æ•°æ®é”™ä¹±ã€æ“ä½œå†²çªã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f66119c9f8f48979c684ff6f670f7d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=FMX0vlpTrA3UD%2B%2BTE4YGYnWOMy4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é”äº‰æŠ¢å°±æ˜¯å…¸å‹çš„â€œå¤šäººæŠ¢é”â€ä¹±è±¡ï¼Œè€Œå½“é”è¢«æŸä¸€èŠ‚ç‚¹å ç”¨åï¼Œåˆå¯èƒ½é¢ä¸´ã€Œé”ä¸é‡Šæ”¾ã€çš„æƒ…å†µï¼Œè¿™ä¾¿æ˜¯â€œåƒµå°¸é”â€å¸¦æ¥çš„æŒ‘æˆ˜ã€‚</p>
<h4 data-id="heading-3"><strong>é—®é¢˜äºŒï¼šåƒµå°¸é” â€” é”ä¸é‡Šæ”¾ï¼Œå¯¼è‡´ä¸šåŠ¡æµç¨‹é˜»å¡</strong></h4>
<p>æŸä¸ªèŠ‚ç‚¹æ‹¿åˆ°é”åï¼Œç²—å¿ƒåœ°å¿˜äº†ç»™é”è®¾å®šè¿‡æœŸæ—¶é—´ï¼Œç´§æ¥ç€åˆå› ä¸ºèŠ‚ç‚¹å®•æœºæˆ–ç¨‹åºæŠ¥é”™ï¼Œæ²¡æ³•ä¸»åŠ¨é‡Šæ”¾è¿™æŠŠé”ã€‚</p>
<p><strong>äºæ˜¯è¿™æ¡é”è®°å½•å°±å½»åº•èµ–åœ¨ Redis é‡Œä¸èµ°äº†ï¼Œå˜æˆæ²¡äººç®¡çš„ â€œåƒµå°¸é”â€</strong> â€” ç‰¢ç‰¢éœ¸å ç€å¯¹åº”çš„å…±äº«èµ„æºï¼Œåé¢ä¸ç®¡å“ªä¸ªèŠ‚ç‚¹æƒ³æ“ä½œè¿™ä¸ªèµ„æºï¼Œå…¨è¢«å®ƒæ‹¦åœ¨é—¨å¤–ï¼Œç›´æ¥å½±å“æ•´ä¸ªç³»ç»Ÿæ­£å¸¸å¹²æ´»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9a7ca5685914e74ba2edc4f311ed93d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=nY3ShMQeOSldclx3%2BM7pSKW2DzY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ºäº†è§£å†³â€œåƒµå°¸â€é”é—®é¢˜ï¼Œç»™é”è®¾ç½®è¿‡æœŸæ—¶é—´æˆä¸ºå¿…ç„¶é€‰æ‹©ï¼Œä½†è¿™ä¸€è§£å†³æ–¹æ¡ˆåˆä¼šå‚¬ç”Ÿæ–°çš„çŸ›ç›¾ï¼Œå³é”è¿‡æœŸçš„é—®é¢˜ã€‚</p>
<h4 data-id="heading-4"><strong>é—®é¢˜ä¸‰ï¼šé”è¿‡æœŸ â€” è¿‡æœŸæ—¶é—´ä¸ä»»åŠ¡æ—¶é•¿ä¸åŒ¹é…</strong></h4>
<p>æŸä¸ªèŠ‚ç‚¹æ‹¿åˆ°é”å¹¶ä¸”è®¾ç½®å®Œè¿‡æœŸæ—¶é—´åï¼Œé©¬ä¸ŠæŠ•å…¥ä¸šåŠ¡å¤„ç†ï¼Œå¯ååä¸šåŠ¡è¿˜æ²¡åšå®Œï¼Œé”çš„è¿‡æœŸæ—¶é—´å°±åˆ°äº†ã€‚</p>
<p>Redis è§çŠ¶ç›´æ¥è‡ªåŠ¨é‡Šæ”¾äº†é”ï¼Œè€ŒåŸæ¥æ‹¿é”çš„èŠ‚ç‚¹å¯¹æ­¤æ¯«æ— å¯Ÿè§‰ï¼Œè¿˜åœ¨é—·å¤´å¹²æ´»ã€‚è¿™æ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹ä¸€çœ‹é”æ²¡äº†ï¼Œç«‹åˆ»ä¸€æ‹¥è€Œä¸ŠæŠŠé”æŠ¢åˆ°æ‰‹ï¼Œç„¶åæ“ä½œåŒä¸€ä¸ªèµ„æº â€” <strong>ç»“æœå°±æ˜¯ä¸¤ä¸ªèŠ‚ç‚¹åŒæ—¶æ”¹ä¸€ä¸ªæ•°æ®ï¼Œç›´æ¥é€ æˆå¹¶å‘å†²çªã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93ffd17aae7841b2b4dde3173051c346~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=LrCcH3yQvrKIhE%2BNfr7%2BgrpZtdQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½†æ— è®ºæ˜¯é”äº‰æŠ¢ã€åƒµå°¸é”ï¼Œè¿˜æ˜¯é”è¿‡æœŸå¯¼è‡´çš„å†²çªï¼Œéƒ½æœ‰ä¸€ä¸ªå‰æï¼š<strong>é”çš„å­˜å‚¨èŠ‚ç‚¹è¶³å¤Ÿç¨³å®šã€‚</strong> è€Œå½“ Redis æ¶æ„æœ¬èº«å‡ºç°éšæ‚£æ—¶ï¼Œä¸Šè¿°æ‰€æœ‰é—®é¢˜éƒ½å¯èƒ½å‡çº§ä¸ºå½±å“æ•´ä¸ªç³»ç»Ÿçš„æ•…éšœã€‚</p>
<h4 data-id="heading-5"><strong>é—®é¢˜å››ï¼šé”å­˜å‚¨ä¸å¯é  â€” å•èŠ‚ç‚¹éƒ¨ç½²çš„éšæ‚£</strong></h4>
<p>å½“å­˜å‚¨åˆ†å¸ƒå¼é”çš„ Redis åªç”¨å•èŠ‚ç‚¹éƒ¨ç½²æ—¶ï¼Œæ— å¼‚äºæŠŠæ‰€æœ‰ â€œé”ç®¡ç†å¤§æƒâ€ äº¤ç»™äº†å”¯ä¸€çš„ç®¡ç†å‘˜ã€‚ä¸€æ—¦è¿™ä¸ªç®¡ç†å‘˜çªç„¶ â€œç½¢å·¥â€ï¼ˆæ¯”å¦‚å®•æœºï¼‰ï¼Œé‚£ä¹ˆæ‰€æœ‰åŠ é”ã€è§£é”ã€æŸ¥é”çŠ¶æ€çš„æ“ä½œéƒ½ä¼šå½»åº•å¡å£³ï¼Œç›´æ¥å¯¼è‡´æ•´ä¸ªåˆ†å¸ƒå¼é”æœºåˆ¶ç˜«ç—ªã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/082d1d1ef93e43f9b74a02607da4ba98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=HyqxKo5idEewq5JTel10zxMH0NM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ°å¤´æ¥ï¼Œå…±äº«èµ„æºè¦ä¹ˆæ²¡äººæ•¢ç¢°ï¼Œè¦ä¹ˆå¤§å®¶ä¸€çªèœ‚ä¹±æŠ¢ï¼Œåœºé¢å®Œå…¨å¤±æ§ã€‚</p>
<p>è¿™äº›é—®é¢˜å°±åƒæ¨ªäº˜åœ¨æˆ‘ä»¬é¢å‰çš„å››åº§å¤§å±±ï¼Œè¦æ„å»ºå¯é çš„åˆ†å¸ƒå¼é”ï¼Œå°±å¿…é¡»é€ä¸€æ”»å…‹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹ä¸šåŠ¡å±‚é¢å¦‚ä½•å€ŸåŠ© Redis çš„æ ¸å¿ƒç‰¹æ€§æ¥å®ç°åˆ†å¸ƒå¼é”çš„ã€‚</p>
<h3 data-id="heading-6">Redis é”çš„â€œç§©åºæ„å»ºæœ¯â€</h3>
<p>é¢å¯¹åˆ†å¸ƒå¼ç¯å¢ƒçš„å¤æ‚æŒ‘æˆ˜ï¼ŒRedis é”é€šè¿‡åˆ†å±‚è®¾è®¡æ„å»ºäº†ä¸€å¥—å®Œæ•´çš„"ç§©åºä½“ç³»"ã€‚ä»åŠ é”åˆ°é‡Šæ”¾é”ï¼Œæ¯ä¸ªç¯èŠ‚éƒ½è•´å«ç€ç²¾å¦™çš„è®¾è®¡æ€æƒ³ã€‚</p>
<h4 data-id="heading-7">1ã€åŠ é”æœºåˆ¶ï¼šä»å•èŠ‚ç‚¹åˆ°é«˜å¯ç”¨</h4>
<p>åŠ é”çš„æ ¸å¿ƒç›®æ ‡æ˜¯ä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªä¸šåŠ¡èƒ½æ“ä½œå…±äº«èµ„æºï¼ŒRedis é”é€šè¿‡ä¸¤å±‚è®¾è®¡æ¥å®ç°è¿™ä¸ªç›®æ ‡ï¼š</p>
<h5 data-id="heading-8"><strong>ç¬¬ä¸€å±‚ï¼šå•èŠ‚ç‚¹é” â€” ç ´è§£â€œé”äº‰æŠ¢â€å’Œâ€œåƒµå°¸é”â€</strong></h5>
<p>Redis å•èŠ‚ç‚¹é”çš„æ ¸å¿ƒå‘½ä»¤çœ‹ä¼¼ç®€å•ï¼š<strong>SET lock_key unique_value NX EX 30ã€‚</strong> ä½†è¿™æ¡å‘½ä»¤é‡Œè—ç€è§£å†³ä¸¤å¤§åŸºç¡€éš¾é¢˜çš„å·§æ€ã€‚æˆ‘ä»¬é€ä¸€æ‹†å¼€æ¥çœ‹ï¼š</p>
<p>å…ˆçœ‹ unique_valueï¼Œå®ƒæ˜¯ç»™æ¯ä¸ªèŠ‚ç‚¹ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†ï¼Œå°±åƒç»™æ¯ä¸ªèŠ‚ç‚¹å‘äº†ä¸€å¼ ä¸“å±å…¥åœºåˆ¸ã€‚é‡Šæ”¾é”çš„æ—¶å€™ï¼ŒèŠ‚ç‚¹å¿…é¡»å‡ºç¤ºè¿™å¼ å…¥åœºåˆ¸ï¼Œåªæœ‰æ ¡éªŒé€šè¿‡ï¼Œæ‰èƒ½åˆ é™¤è‡ªå·±æŒæœ‰çš„é”ï¼Œç»ä¸ä¼šè¯¯åˆ åˆ«äººçš„é”ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b0018c43c024f3595f7ec732de17771~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=O%2Bcaajp%2F13TRZMBnZEtsjvXsoEw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†çœ‹ NXï¼ˆNot eXistsï¼‰ï¼Œå®ƒçš„æ„æ€æ˜¯ä»…å½“é”å¯¹åº”çš„ lock_key ä¸å­˜åœ¨æ—¶ï¼Œæ‰æ‰§è¡ŒåŠ é”æ“ä½œã€‚è¿™å°±åƒåªæœ‰ç©ºåº§ä½æ‰èƒ½å…¥åº§ï¼Œç›´æ¥ä¿è¯äº†é”çš„äº’æ–¥æ€§ â€” åŒä¸€æ—¶é—´ï¼Œåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹èƒ½æˆåŠŸè·å–é”ï¼Œä»æ ¹æºä¸Šè§£å†³äº†å¤§å®¶æŠ¢ç€ç”¨èµ„æºçš„é”äº‰æŠ¢é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54d07138cc8046a598c898f5beeca4e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=6oxfNv979x7RYsdSnLP6FUI9RKU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶åæ˜¯ EX 30ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç»™é”è®¾ç½® 30 ç§’çš„è¿‡æœŸæ—¶é—´ã€‚å¥½æ¯”åº§ä½æœ‰æœ€é•¿å ç”¨æ—¶é™ï¼Œè¶…æ—¶åè‡ªåŠ¨ â€œè®©åº§â€ï¼Œä¸ä¼šä¸€ç›´å ç€èµ„æºä¸é‡Šæ”¾ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†èŠ‚ç‚¹å®•æœºç­‰å¼‚å¸¸æƒ…å†µå¯¼è‡´çš„â€œåƒµå°¸é”â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a81e6d6157144c0ad94699dd91848c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=0hy2mcGzgZQclmTQO2VDukvo55Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œè¿™æ¡ SET å‘½ä»¤çš„å…³é”®ï¼Œå°±æ˜¯æŠŠæŠ¢é”ï¼ˆNXï¼‰å’Œè®¾è¿‡æœŸæ—¶é—´ï¼ˆEXï¼‰ï¼Œå˜æˆäº†ä¸€æ­¥å®Œæˆçš„åŸå­æ“ä½œï¼Œä¸­é—´æ²¡æœ‰ä»»ä½•å¯ä¸­æ–­çš„é—´éš™ï¼š</p>
<p><strong>è¦ä¹ˆ</strong> ***** *æŒ‡ä»¤æœªæ‰§è¡Œï¼Œ<strong><strong>é”æ²¡æŠ¢åˆ°ï¼›è¦ä¹ˆ</strong></strong>æŒ‡ä»¤å®Œæ•´æ‰§è¡Œï¼Œ**<strong>æŠ¢åˆ°çš„é”å·²ç»è‡ªå¸¦è¿‡æœŸæ—¶é—´ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/880940ce307d40649577b26c3bfb5814~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=o6NToasotnpO3wd8%2FALtdWoXzt8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™å°±ä»æœºåˆ¶ä¸Šæœç»äº†å› åˆ†æ­¥æ‰§è¡Œè€Œå¼•å‘çš„å„ç±»å¼‚å¸¸ã€‚</p>
<p>ä¸è¿‡å•èŠ‚ç‚¹ Redis é”è™½ç„¶ç®€å•é«˜æ•ˆï¼Œä½†å­˜åœ¨ä¸€ä¸ªè‡´å‘½å¼±ç‚¹ï¼š<strong>å¦‚æœ Redis èŠ‚ç‚¹å®•æœºï¼Œæ•´ä¸ªé”æœºåˆ¶å°±ä¼šå¤±æ•ˆã€‚</strong> å› æ­¤ï¼Œä¸ºäº†æå‡é”æœºåˆ¶çš„é«˜å¯ç”¨æ€§ï¼Œéœ€è¦ä¸€ç§èƒ½çªç ´å•èŠ‚ç‚¹ä¾èµ–çš„è§£å†³æ–¹æ¡ˆ â€” é«˜å¯ç”¨é”ã€‚</p>
<h5 data-id="heading-9"><strong>ç¬¬äºŒå±‚ï¼šé«˜å¯ç”¨é” â€”</strong> <strong>è§£å†³å•ç‚¹ä¾èµ–</strong></h5>
<p>ä¸ºäº†ç ´è§£å•èŠ‚ç‚¹é”çš„å¯ç”¨æ€§ç“¶é¢ˆï¼ŒRedis çš„ä½œè€… Antirez æå‡ºäº† Redlock ç®—æ³•ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<p><strong>ç»™ Redis é”éƒ¨ç½²è‡³å°‘ 3 ä¸ªç‹¬ç«‹çš„èŠ‚ç‚¹ï¼ˆå®é™…å¸¸ç”¨ 5 ä¸ªï¼‰ï¼Œåªæœ‰è¶…è¿‡åŠæ•°èŠ‚ç‚¹éƒ½æˆåŠŸç»™èµ„æºåŠ é”æ—¶ï¼Œèµ„æºæ‰ç®—çœŸçš„æ‹¿åˆ°äº†æœ‰æ•ˆé”ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a67b3c92f6c84806871d5cdbf1fcf634~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=etw89iF1%2Fa6fPsHTJijAolA9mxI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Redlock ç®—æ³•çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>å‘ N ä¸ªç‹¬ç«‹çš„ Redis é”èŠ‚ç‚¹ä¾æ¬¡å‘é€ <code>SET NX EX</code> åŠ é”è¯·æ±‚ï¼Œå®é™…åº”ç”¨ä¸­é€šå¸¸ä¼šéƒ¨ç½² 5 ä¸ªï¼›</li>
<li>ç»Ÿè®¡æˆåŠŸç»™èµ„æºåŠ é”çš„èŠ‚ç‚¹æ•°é‡ï¼Œè‹¥æˆåŠŸæ•°é‡è¶…è¿‡ N/2ï¼Œæ¯”å¦‚éƒ¨ç½² 5 ä¸ªèŠ‚ç‚¹æ—¶è‡³å°‘æœ‰ 3 ä¸ªæˆåŠŸï¼Œå°±åˆ¤å®šåŠ é”æˆåŠŸï¼›</li>
<li>å¦‚æœæˆåŠŸæ•°é‡å°‘äºåŠæ•°ï¼Œåˆ™è¯´æ˜åŠ é”å¤±è´¥ï¼Œç«‹å³å‘æ‰€æœ‰é”èŠ‚ç‚¹é‡Šæ”¾é”ï¼Œé¿å…äº§ç”Ÿ"åƒµå°¸é”"ã€‚</li>
</ol>
<p>è¿™ç§è®¾è®¡çš„ç²¾å¦™ä¹‹å¤„åœ¨äºï¼Œå³ä¾¿éƒ¨åˆ†é”èŠ‚ç‚¹å®•æœºï¼ˆä¸è¶…è¿‡åŠæ•°ï¼‰ï¼Œå‰©ä½™çš„å¤šæ•°é”èŠ‚ç‚¹ä»èƒ½æ­£å¸¸æä¾›é”æœåŠ¡ï¼Œä»æ ¹æœ¬ä¸Šè§„é¿äº†å•ç‚¹æ•…éšœé£é™©ã€‚è¿™å°±åƒå¼€ä¼šæŠ•ç¥¨ï¼Œåªè¦è¶…è¿‡åŠæ•°äººåŒæ„ï¼Œå†³è®®å°±èƒ½ç”Ÿæ•ˆï¼Œå°‘æ•°äººçš„ç¼ºå¸­ä¸ä¼šå½±å“æ•´ä½“å†³ç­–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca4d0368df6c4b3ebfbd445374503ddc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=19gaFmSh5MFPzQpEeL74PaR8dIo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€šè¿‡ Redlock ç®—æ³•çš„åŠ é”æœºåˆ¶ï¼Œæˆ‘ä»¬ç¡®ä¿äº†åˆ†å¸ƒå¼ç¯å¢ƒä¸‹èµ„æºçš„äº’æ–¥è®¿é—®ï¼Œä½†é”çš„é‡Šæ”¾ç¯èŠ‚åŒæ ·éœ€è¦è°¨æ…å¤„ç†ï¼Œæ¯•ç«Ÿä¸€æ—¦é‡Šæ”¾é€»è¾‘å‡ºç°ç–æ¼ï¼Œå°±å¯èƒ½å¼•å‘æ–°çš„å¹¶å‘æ··ä¹±ã€‚</p>
<h4 data-id="heading-10">2ã€é‡Šæ”¾é”æœºåˆ¶ï¼šå…ˆ â€œéªŒèº«ä»½â€ å†åˆ é”</h4>
<p>å…ˆå‰åŠ é”æ—¶ï¼Œæˆ‘ä»¬ä¼šé’ˆå¯¹è¦ä¿æŠ¤çš„å…±äº«èµ„æºï¼Œåœ¨é”èŠ‚ç‚¹å­˜å…¥ä¸€æŠŠ â€œå¸¦èº«ä»½æ ‡è¯†çš„é”â€ â€” unique_valueï¼Œå°±åƒç»™è¿™æŠŠé”åˆ»ä¸Šäº†è‡ªå·±çš„ â€œä¸“å±åå­—â€ã€‚ç­‰ä¸šåŠ¡è¦é‡Šæ”¾å…±äº«èµ„æºæ—¶ï¼Œä¸èƒ½ç›´æ¥åˆ é”ï¼Œå¾—å…ˆå»é”èŠ‚ç‚¹éªŒè¯ï¼š</p>
<p><strong>â€œè¿™æŠŠé”æ˜¯ä¸æ˜¯æˆ‘çš„ï¼Ÿâ€</strong></p>
<p>ç¡®è®¤æ— è¯¯åï¼Œæ‰èƒ½åˆ é™¤é”ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£é‡Šæ”¾é”ã€‚</p>
<p>ä½†è¿™é‡Œæœ‰ä¸ªå…³é”®é—®é¢˜ï¼šå¦‚æœ â€œå…ˆæŸ¥èº«ä»½ã€å†åˆ é”â€ åˆ†æˆä¸¤æ­¥åšï¼Œä¸­é—´å°±ä¼šæœ‰ä¸ª â€œæ—¶é—´å·®æ¼æ´â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/031f1a150fd4452e9ea0d143b150cbf4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=IugstHWOFWzGyv%2Frou1SWvACTI8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯”å¦‚ä½ åˆšæŸ¥å®Œï¼Œç¡®è®¤è¿™æŠŠé”æ˜¯è‡ªå·±çš„ï¼Œå¯è¿˜æ²¡æ¥å¾—åŠåˆ ï¼Œè¿™æŠŠé”çš„è¿‡æœŸæ—¶é—´å°±åˆ°äº†ï¼Œç³»ç»Ÿè‡ªåŠ¨æŠŠå®ƒé‡Šæ”¾äº†ï¼›è€Œå°±åœ¨è¿™ä¸€ç¬é—´ï¼Œå…¶ä»–ä¸šåŠ¡åˆšå¥½æŠ¢åˆ°äº†è¿™æŠŠé”ã€‚ç­‰ä½ ååº”è¿‡æ¥æ‰§è¡Œåˆ é™¤æ“ä½œæ—¶ï¼Œåˆ çš„å·²ç»ä¸æ˜¯è‡ªå·±çš„é”ï¼Œè€Œæ˜¯åˆ«äººåˆšæŠ¢åˆ°çš„æ–°é”äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6970c2962a64fcd89d2e2c873f029ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=eIbcaMcCNl4XSoluMePOZ%2FvLCJM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸€ä¸‹å°±å‡ºå¤§é—®é¢˜äº†ï¼š<strong>ä¸ä»…è¯¯åˆ äº†åˆ«äººçš„é”ï¼Œè¿˜è®©å…±äº«èµ„æºå¤±å»äº†ä¿æŠ¤</strong> â€” æ²¡æœ‰é”çš„çº¦æŸï¼Œå…¶ä»–ä¸šåŠ¡å¯èƒ½ä¼šä¸€çªèœ‚åœ°æ“ä½œè¿™ä¸ªèµ„æºï¼Œæœ€åå¾ˆå¯èƒ½å¯¼è‡´æ•°æ®é”™ä¹±ã€‚</p>
<p>ä¸ºäº†è§„é¿è¿™ç§é£é™©ï¼ŒRedis æä¾›äº† Lua è„šæœ¬æ”¯æŒï¼Œèƒ½å°†åˆ¤æ–­å’Œåˆ é™¤è¿™ä¸¤ä¸ªæ“ä½œå°è£…æˆä¸€ä¸ªåŸå­æ“ä½œã€‚å¯¹åº”çš„è„šæœ¬å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d9f12d8ae7941e898cea83c42d60cbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=Vxw78sUJ8Z9GCFrKXRXTz9FveZU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™æ®µè„šæœ¬ç›¸å½“äºè®© ã€ŒéªŒé” + åˆ é”ã€ ä¸€æ­¥åˆ°ä½ï¼Œå®‰å…¨å¯é ï¼</p>
<p>æœ€ç»ˆï¼Œä»å•èŠ‚ç‚¹é”åˆ° Redlock ç®—æ³•ï¼Œä»åŠ é”åˆ°é‡Šæ”¾é”ï¼ŒRedis ä¸ºæˆ‘ä»¬æ„å»ºäº†å®Œæ•´çš„åˆ†å¸ƒå¼é”ç†è®ºåŸºç¡€ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿™äº›ç†è®ºè½¬åŒ–ä¸ºå®è·µï¼Œçœ‹çœ‹å¦‚ä½•åœ¨é¡¹ç›®ä¸­æ­£ç¡®è½åœ°ã€‚</p>
<h3 data-id="heading-11">Redis é”çš„è½åœ°æŒ‡å—</h3>
<p>åˆ†å¸ƒå¼é”çš„è½åœ°ä»æ¥ä¸æ˜¯ä¸€åˆ€åˆ‡çš„ï¼Œè€Œæ˜¯è¦"å› åœ°åˆ¶å®œ" â€” ç®€å•åœºæ™¯ç”¨å•èŠ‚ç‚¹é”é«˜æ•ˆè½åœ°ï¼Œæ ¸å¿ƒä¸šåŠ¡é é«˜å¯ç”¨é”ä¿é©¾æŠ¤èˆªã€‚ä¸‹é¢æˆ‘ä»¬ç»“åˆä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼Œæ‹†è§£å¯¹åº”çš„ Redis é”å®è·µæ–¹æ¡ˆï¼š</p>
<h4 data-id="heading-12">1ã€ç®€å•åœºæ™¯ï¼šå•èŠ‚ç‚¹é”è½»é‡é«˜æ•ˆ</h4>
<p>å¦‚æœä½ çš„ä¸šåŠ¡ä¸æ˜¯æ”¯ä»˜ã€ä¸‹å•è¿™ç§æ ¸å¿ƒåœºæ™¯ï¼Œé‚£å•èŠ‚ç‚¹ Redis é”å°±å®Œå…¨å¤Ÿç”¨äº†ï¼Œç®€å•è¿˜ä¸å èµ„æºã€‚ä¾‹å¦‚æˆ‘ä»¬è¦ç»™ 1001 å·å•†å“çš„åº“å­˜åŠ é”ï¼Œæ ¸å¿ƒå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89e2e6eefce44698b78b3d5c2cb3fd13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=2Zh6oFqoYGkPDhe7yGM%2FCObG4ZY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä¸‰ä¸ªå…³é”®ç»†èŠ‚ï¼Œä¸ç„¶å®¹æ˜“å‡ºé—®é¢˜ï¼š</p>
<p><strong>ç¬¬ä¸€ä¸ªç»†èŠ‚æ˜¯ unique_value å¿…é¡»ç‹¬ä¸€æ— äºŒã€‚</strong></p>
<p>å‘½ä»¤é‡Œçš„ "node1_uuid_12345" å¯ä¸æ˜¯éšä¾¿å¡«çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯æ¯ä¸ªåŠ é”è¯·æ±‚çš„ä¸“å± â€œèº«ä»½è¯â€ï¼Œå¾—ä¿è¯å…¨ç½‘å”¯ä¸€ã€‚æ ¸å¿ƒç›®çš„å°±æ˜¯è®©åç»­è§£é”æ—¶ï¼Œèƒ½å‡†ç¡®è¯†åˆ«å‡º â€œè¿™æŠŠé”æ˜¯æˆ‘åŠ çš„â€ï¼Œé¿å…è¯¯è§£é”åˆ«äººçš„é”ã€‚</p>
<p><strong>ç¬¬äºŒä¸ªæ˜¯è¿‡æœŸæ—¶é—´ <code>EX 30 </code>çš„è®¾ç½®ï¼Œå¾—åˆç†é¢„ç•™ç¼“å†²ã€‚</strong></p>
<p>æ¯”å¦‚ä½ é¢„ä¼°ä¸€ä¸ªä»»åŠ¡å¹³å‡ 10 ç§’èƒ½å®Œæˆï¼Œé‚£è¿‡æœŸæ—¶é—´å°±åˆ«è®¾ 10 ç§’ï¼Œå»ºè®®è®¾ 30 ç§’ã€‚å¤šå‡ºæ¥çš„ 20 ç§’æ˜¯ç¼“å†²ï¼Œä¸‡ä¸€æŸä¸ªä»»åŠ¡å› ä¸ºç½‘ç»œå»¶è¿Ÿã€æ•°æ®é‡ç¨å¤§æ…¢äº†ç‚¹ï¼Œä¹Ÿä¸ä¼šå‡ºç° â€œä»»åŠ¡è¿˜æ²¡åšå®Œï¼Œé”å°±è¿‡æœŸäº†â€ çš„æƒ…å†µã€‚</p>
<p><strong>ç¬¬ä¸‰ä¸ªæ˜¯åŠ é”å¤±è´¥ååˆ«åšæ— æ•ˆç­‰å¾…ã€‚</strong></p>
<p>å¦‚æœæ‰§è¡Œä¸Šé¢çš„ SET å‘½ä»¤åï¼Œè¿”å›çš„æ˜¯<code>nilï¼Œè¯´æ˜é”å·²ç»è¢«åˆ«äººå ç”¨äº†ã€‚è¿™æ—¶å€™åˆ«ä¸€ç›´æ­»ç­‰ï¼Œè¦ä¹ˆè®¾ç½®æœ€å¤šé‡è¯• 3 æ¬¡ï¼ˆæ¯æ¬¡é—´éš”å‡ ç™¾æ¯«ç§’ï¼‰ï¼Œè¦ä¹ˆç›´æ¥è¿”å› â€œæ“ä½œå¤±è´¥ï¼Œè¯·ç¨åå†è¯•â€ï¼Œé¿å…æµªè´¹æœåŠ¡å™¨èµ„æºã€‚</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef37c653312442a5863383fed6bb6a9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=LlyX4r7vOrthp16RsQPZN0LGn7E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åŸºç¡€ç‰ˆçš„å•èŠ‚ç‚¹é”ç”¨èµ·æ¥ç®€å•åˆé«˜æ•ˆï¼Œä½†å¦‚æœä»»åŠ¡æ‰§è¡Œæ—¶é—´ä¸ç¡®å®šï¼Œå¾ˆå¯èƒ½å‡ºç°â€œä»»åŠ¡è¿˜æ²¡åšå®Œï¼Œé”å°±è¿‡æœŸäº†â€çš„æƒ…å†µã€‚è¿™æ—¶ï¼Œâ€œçœ‹é—¨ç‹—ï¼ˆWatch Dogï¼‰â€ æœºåˆ¶å°±èƒ½æ´¾ä¸Šç”¨åœºã€‚</p>
<h4 data-id="heading-13">2ã€é•¿ä»»åŠ¡åœºæ™¯ï¼šç”¨â€œçœ‹é—¨ç‹—â€ç»™é”è‡ªåŠ¨ç»­æœŸ</h4>
<p>çœ‹é—¨ç‹—æœºåˆ¶çš„å·¥ä½œåŸç†å…¶å®å¾ˆç®€å•ï¼š</p>
<p>å½“ä¸šåŠ¡èŠ‚ç‚¹æˆåŠŸæŠ¢åˆ°é”ä¹‹åï¼Œç³»ç»Ÿä¼šåœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šå¯åŠ¨ä¸€ä¸ªåå°çº¿ç¨‹ï¼Œå°±åƒç»™ä¸šåŠ¡æ “äº†ä¸€åªå°½èŒå°½è´£çš„çœ‹é—¨ç‹—ã€‚è¿™åª â€œçœ‹é—¨ç‹—â€ ä¼šæŒ‰å›ºå®šæ—¶é—´ï¼ˆæ¯”å¦‚æ¯éš” 10 ç§’ï¼‰ä¸»åŠ¨æ£€æŸ¥ï¼š</p>
<p><strong>â€œä¸»äººï¼Œä½ è¿˜åœ¨ä½¿ç”¨è¿™æŠŠé”å—ï¼Ÿâ€</strong></p>
<p>å¦‚æœå‘ç°ä¸šåŠ¡è¿˜åœ¨æ­£å¸¸æ‰§è¡Œï¼Œå®ƒå°±ä¼šç«‹åˆ»ç»™é” â€œç»­æœŸâ€ï¼Œæ¯”å¦‚æŠŠé”çš„è¿‡æœŸæ—¶é—´å†å»¶é•¿ 30 ç§’ï¼Œä¸è®©é”æå‰è¿‡æœŸè¢«åˆ«äººæŠ¢èµ°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82d3a0ff5bde4e5aab508c2c01c284a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=NgAw0N9aZ9aNW3gtfBAnpgSVufw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç›®å‰ä¸»æµçš„å¼€æºæ¡†æ¶ Redisson å·²ç»å†…ç½®äº†è¿™ä¸ªçœ‹é—¨ç‹—æœºåˆ¶ï¼Œä½¿ç”¨èµ·æ¥ååˆ†ä¾¿æ·ã€‚</p>
<p>ä¸è¿‡è¦æ³¨æ„ï¼Œä¸ç®¡æ˜¯åŸºç¡€ç‰ˆå•èŠ‚ç‚¹é”ï¼Œè¿˜æ˜¯å¸¦çœ‹é—¨ç‹—çš„é”ï¼Œéƒ½åªæ˜¯è§£å†³äº†å•èŠ‚ç‚¹åœºæ™¯çš„é”é—®é¢˜ã€‚å¦‚æœæ˜¯æ”¯ä»˜ã€ä¸‹å•è¿™ç±»æ ¸å¿ƒä¸šåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦æ›´é«˜çš„å¯ç”¨æ€§ä¿éšœï¼Œè¿™æ—¶å€™åŸºäº<strong>Redlock ç®—æ³•</strong>çš„é«˜å¯ç”¨éƒ¨ç½²æ–¹æ¡ˆå°±æˆäº†é¦–é€‰ã€‚</p>
<h4 data-id="heading-14">3ã€æ ¸å¿ƒåœºæ™¯ï¼šé«˜å¯ç”¨é”å®ˆä½ä¸šåŠ¡â€œç”Ÿå‘½çº¿â€</h4>
<p>é’ˆå¯¹æ”¯ä»˜ã€ä¸‹å•ç­‰æ ¸å¿ƒä¸šåŠ¡åœºæ™¯ï¼Œå»ºè®®ç›´æ¥é‡‡ç”¨ Redlock ç®—æ³•ï¼Œå¹¶éƒ¨ç½²è‡³å°‘ 3 ä¸ªç‹¬ç«‹çš„ Redis é”èŠ‚ç‚¹ã€‚å…·ä½“éƒ¨ç½²å»ºè®®å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4dc877311f6d44baa97ba3b522ef2746~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=75GfxDjuodiDdz%2FtUrVMt00B9x0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>èŠ‚ç‚¹æ•°é‡é€‰æ‹©å¥‡æ•°</strong>ï¼šä¼˜å…ˆé€‰æ‹© 3ã€5ã€7 ä¸ªèŠ‚ç‚¹ï¼Œä¾¿äºå¿«é€Ÿè®¡ç®— â€œè¶…è¿‡åŠæ•°â€ çš„æˆåŠŸæ¡ä»¶ï¼Œç¡®ä¿é”æœºåˆ¶çš„æœ‰æ•ˆæ€§ï¼›</li>
<li><strong>ä¿è¯èŠ‚ç‚¹ç‹¬ç«‹æ€§</strong>ï¼šèŠ‚ç‚¹ä¹‹é—´ä¸èƒ½æœ‰ä¸»ä»å¤åˆ¶å…³ç³»ï¼Œæœ€å¥½åˆ†å¸ƒåœ¨ä¸åŒç‰©ç†æœºæˆ–æœºæˆ¿ï¼Œé¿å…å› æœºæˆ¿æ–­ç”µã€ç½‘ç»œæ•…éšœç­‰é—®é¢˜å¯¼è‡´å¤šä¸ªèŠ‚ç‚¹åŒæ—¶å¤±æ•ˆï¼›</li>
<li><strong>åˆç†è®¾ç½®è¯·æ±‚è¶…æ—¶</strong>ï¼šå‘æ¯ä¸ªèŠ‚ç‚¹å‘é€åŠ é”è¯·æ±‚æ—¶ï¼Œå»ºè®®è®¾ç½® 50-100ms çš„è¶…æ—¶æ—¶é—´ï¼Œé¿å…å•ä¸ªèŠ‚ç‚¹å“åº”ç¼“æ…¢æ‹–å®æ•´ä¸ªåŠ é”æµç¨‹ã€‚</li>
</ul>
<p>æ€»ä¹‹ï¼Œä»åŸºç¡€å•èŠ‚ç‚¹é”åˆ°é«˜å¯ç”¨éƒ¨ç½²ï¼ŒRedis æä¾›äº†çµæ´»å¤šæ ·çš„é”è§£å†³æ–¹æ¡ˆã€‚ä½†è¦çœŸæ­£ç”¨å¥½è¿™äº›æ–¹æ¡ˆï¼Œé¿å…å®é™…åº”ç”¨ä¸­å‡ºç°éšæ‚£ï¼Œè¿˜éœ€è¦æ³¨æ„ä¸€äº›å…³é”®ç»†èŠ‚ã€‚</p>
<h3 data-id="heading-15">Redis é”çš„éšå½¢â€œé™·é˜±â€</h3>
<p>åˆ†å¸ƒå¼é”çœ‹ç€ç®€å•å¥½ä¸Šæ‰‹ï¼Œä½†å®é™…è½åœ°æ—¶ï¼Œç¨æœ‰ç–å¿½æ•´ä¸ªé”æœºåˆ¶å°±å¯èƒ½ â€œç½¢å·¥â€ã€‚ä»Šå¤©å°±æ¥èŠèŠå‡ ä¸ªå¿…é¡»ç›¯ç´§çš„å…³é”®ç»†èŠ‚ï¼Œå¸®ä½ é¿å¼€å¸¸è§é™·é˜±ï¼š</p>
<h4 data-id="heading-16">é™·é˜±ä¸€ï¼šçœ‹é—¨ç‹—ä¸æ˜¯ä¸‡èƒ½çš„</h4>
<p>å…ˆè¯´è¯´å¤§å®¶å¸¸ä¾èµ–çš„çœ‹é—¨ç‹—æœºåˆ¶ â€” å®ƒç¡®å®èƒ½è‡ªåŠ¨ç»™é”ç»­æœŸï¼Œä½†å¹¶éç»å¯¹å¯é ã€‚å¦‚æœæŒæœ‰é”çš„æœåŠ¡å™¨çªç„¶å®•æœºï¼Œçœ‹é—¨ç‹—çº¿ç¨‹ä¼šéšä¹‹ç»ˆæ­¢ï¼Œæ— æ³•ç»§ç»­ç»™é”ç»­æœŸï¼Œé”æœ€ç»ˆè¿˜æ˜¯ä¼šå› è¿‡æœŸè€Œé‡Šæ”¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6eaee9ce56ac42aa9bba9f5267a3ba50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=VKvT6nN5kzSXQjSPHhSFK5Ik0S0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰€ä»¥æˆ‘ä»¬è®¾è®¡ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œå°½é‡è¦ â€œçŸ­å¹³å¿«â€ï¼Œèƒ½å°½å¿«é‡Šæ”¾é”å°±åˆ«é•¿æ—¶é—´å ç”¨ï¼›åŒæ—¶åšå¥½å¼‚å¸¸å…œåº•æ–¹æ¡ˆï¼Œé¿å…é”è¿‡æœŸåä¸åŒçº¿ç¨‹åŒæ—¶æ“ä½œæ•°æ®ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p>
<h4 data-id="heading-17">é™·é˜±äºŒï¼šRedlock åˆ‡å‹¿æ»¥ç”¨</h4>
<p>Redlock ç®—æ³•çš„å¯é æ€§ç¡®å®æ›´é«˜ï¼Œä½†ç›¸æ¯”å•èŠ‚ç‚¹é”ï¼Œå®ƒéœ€è¦è®¿é—®å¤šä¸ªèŠ‚ç‚¹æ¥ç¡®è®¤é”çš„çŠ¶æ€ï¼Œæ€§èƒ½å¼€é”€æ›´å¤§ã€‚å¯¹äºéæ ¸å¿ƒä¸šåŠ¡åœºæ™¯ï¼Œã€Œå•èŠ‚ç‚¹é” + çœ‹é—¨ç‹—ã€çš„ç»„åˆå·²ç»èƒ½æ»¡è¶³éœ€æ±‚ï¼Œä¸å¿…è¿‡åº¦è¿½æ±‚é«˜å¯ç”¨è€Œé‡‡ç”¨ Redlockï¼Œå¦åˆ™ä¼šé€ æˆæ€§èƒ½æµªè´¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0281046ab830442c98263b5e33f2c912~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=AAMeh5RwF0nzjWaZFAD95TApwZ0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-18">é™·é˜±ä¸‰ï¼šé”çš„ç²’åº¦è¦æŠŠæ¡é€‚ä¸­</h4>
<p>æœ€åæ˜¯é”çš„ç²’åº¦è®¾è®¡ï¼Œè¿™ç›´æ¥å…³ç³»åˆ°ç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡ã€‚</p>
<ul>
<li><strong>ç²’åº¦å¤ªç²—</strong>ï¼Œæ¯”å¦‚æ•´ä¸ªç³»ç»Ÿå…±ç”¨ä¸€æŠŠé”ï¼Œä¼šå¯¼è‡´æ‰€æœ‰è¯·æ±‚æ’é˜Ÿç­‰å¾…ï¼Œå¼•å‘ä¸¥é‡çš„æ€§èƒ½ç“¶é¢ˆï¼›</li>
<li><strong>ç²’åº¦å¤ªç»†</strong>ï¼Œæ¯”å¦‚ä¸ºæ¯ä¸ªæ•°æ®é¡¹éƒ½å•ç‹¬è®¾é”ï¼Œåˆ™ä¼šå¢åŠ ç³»ç»Ÿå¤æ‚æ€§å’Œè¿ç»´å¼€é”€ï¼Œè¿˜å¯èƒ½å‡ºç° "é”çˆ†ç‚¸" é—®é¢˜ã€‚å»ºè®®æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯åˆç†è®¾è®¡é”ç²’åº¦ï¼Œåœ¨å¹¶å‘å®‰å…¨å’Œç³»ç»Ÿæ€§èƒ½ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91f75b59743a44cd90398544f56ea366~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6XY29kaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770448078&amp;x-signature=7AW5FoM%2BD4eOMbJpPV7XQl8fDyw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æŒæ¡è¿™äº›æœ€ä½³å®è·µåï¼Œæˆ‘ä»¬æ‰èƒ½çœŸæ­£æ„å»ºå‡ºæ—¢å¯é åˆé«˜æ•ˆçš„åˆ†å¸ƒå¼é”ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-19">Redis é” â€” åˆ†å¸ƒå¼ä¸–ç•Œçš„â€œç§©åºå®ˆæŠ¤è€…â€</h3>
<p>ä»å•èŠ‚ç‚¹é”çš„ã€Œå…ˆåˆ°å…ˆå¾—ã€é€»è¾‘ï¼Œåˆ° Redlock ç®—æ³•çš„ã€Œå°‘æ•°æœä»å¤šæ•°ã€åŸåˆ™ï¼›ä» <code>NX EX</code> åŸå­å‘½ä»¤çš„ç²¾å¦™è®¾è®¡ï¼Œåˆ° Lua è„šæœ¬ä¿éšœçš„å®‰å…¨é‡Šæ”¾ï¼ŒRedis åˆ†å¸ƒå¼é”ç”¨ç®€æ´è€Œä¼˜é›…çš„å®ç°ï¼Œç²¾å‡†è§£å†³äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸‰å¤§æ ¸å¿ƒéš¾é¢˜ â€” <strong>äº’æ–¥æ€§ã€é˜²æ­»é”ã€é«˜å¯ç”¨</strong>ã€‚</p>
<p>ä¸‹ä¸€æ¬¡å½“ä½ é‡åˆ°åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡é‡å¤æ‰§è¡Œã€æ ¸å¿ƒæ•°æ®åŒæ­¥é”™ä¹±ç­‰å¹¶å‘é—®é¢˜æ—¶ï¼Œä¸å¦¨å…ˆé—®é—®è‡ªå·±ï¼š</p>
<p>æˆ‘çš„ç³»ç»Ÿä¸­ï¼Œåˆ†å¸ƒå¼é”çœŸçš„ç”¨å¯¹äº†å—ï¼Ÿæ ¸å¿ƒèµ„æºçœŸçš„è¢«æœ‰æ•ˆ â€œé”ä½â€ äº†å—ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linux è¿›ç¨‹ã€ç½‘ç»œç›¸å…³å‘½ä»¤å¤§å…¨]]></title>    <link>https://juejin.cn/post/7601046076943171599</link>    <guid>https://juejin.cn/post/7601046076943171599</guid>    <pubDate>2026-01-31T07:28:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601046076943171599" data-draft-id="7601000638344871951" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linux è¿›ç¨‹ã€ç½‘ç»œç›¸å…³å‘½ä»¤å¤§å…¨"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2026-01-31T07:28:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linux è¿›ç¨‹ã€ç½‘ç»œç›¸å…³å‘½ä»¤å¤§å…¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:28:16.000Z" title="Sat Jan 31 2026 07:28:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1 è¿›ç¨‹ç®¡ç†æ ¸å¿ƒå‘½ä»¤</h2>
<p>è¿›ç¨‹æ˜¯è®¡ç®—æœºä¸­æ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„å®ä¾‹ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´ã€å¯„å­˜å™¨å’Œæ–‡ä»¶æè¿°ç¬¦ç­‰èµ„æºã€‚åœ¨ Linux ä¸­ï¼Œè¿›ç¨‹å¯ä»¥å¤„äºè¿è¡Œï¼ˆRunningï¼‰ã€ç¡çœ ï¼ˆSleepingï¼‰ã€åœæ­¢ï¼ˆStoppedï¼‰æˆ–åƒµå°¸ï¼ˆZombieï¼‰ç­‰çŠ¶æ€ã€‚</p>
<h3 data-id="heading-1">1.1 è¿›ç¨‹æŸ¥çœ‹å‘½ä»¤</h3>
<p><strong>psï¼ˆè¿›ç¨‹çŠ¶æ€ï¼‰</strong></p>
<p>ps æ˜¯æœ€åŸºç¡€çš„è¿›ç¨‹æŸ¥çœ‹å‘½ä»¤ï¼Œç”¨äºæ˜¾ç¤ºå½“å‰æ—¶åˆ»çš„è¿›ç¨‹çŠ¶æ€å¿«ç…§ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">ps aux        <span class="hljs-comment"># æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·çš„æ‰€æœ‰è¿›ç¨‹ï¼ˆBSDé£æ ¼ï¼‰</span>
ps -ef        <span class="hljs-comment"># å…¨æ ¼å¼æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼ˆSystem Vé£æ ¼ï¼‰</span>
ps -ejH       <span class="hljs-comment"># æ˜¾ç¤ºè¿›ç¨‹æ ‘ç»“æ„</span>
ps aux <span class="hljs-attr">--sort</span>=-%mem  <span class="hljs-comment"># æŒ‰å†…å­˜ä½¿ç”¨ç‡é™åºæ’åˆ—</span>
</code></pre>
<p>å¸¸ç”¨å­—æ®µè¯´æ˜ï¼š</p>
<ul>
<li>USERï¼šè¿›ç¨‹æ‰€æœ‰è€…</li>
<li>PIDï¼šè¿›ç¨‹ID</li>
<li>%CPUï¼šCPUä½¿ç”¨ç‡</li>
<li>%MEMï¼šå†…å­˜ä½¿ç”¨ç‡</li>
<li>VSZï¼šè™šæ‹Ÿå†…å­˜å¤§å°</li>
<li>RSSï¼šç‰©ç†å†…å­˜å¤§å°</li>
<li>STATï¼šè¿›ç¨‹çŠ¶æ€ï¼ˆR=è¿è¡Œ, S=ç¡çœ , Z=åƒµå°¸ï¼‰</li>
<li>COMMANDï¼šå¯åŠ¨å‘½ä»¤</li>
</ul>
<p><strong>topï¼ˆå®æ—¶è¿›ç¨‹ç›‘æ§ï¼‰</strong></p>
<p>top æä¾›åŠ¨æ€å®æ—¶è§†å›¾ï¼Œæ˜¾ç¤ºç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µå’Œè¿›ç¨‹åˆ—è¡¨ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">top</span>                    # é»˜è®¤å¯åŠ¨ï¼ŒæŒ‰CPUæ’åº
<span class="hljs-attribute">top</span> -u username        # ä»…æ˜¾ç¤ºæŒ‡å®šç”¨æˆ·çš„è¿›ç¨‹
<span class="hljs-attribute">top</span> -<span class="hljs-selector-tag">p</span> <span class="hljs-number">1234</span>,<span class="hljs-number">5678</span>       # ç›‘æ§æŒ‡å®šPIDçš„è¿›ç¨‹
</code></pre>
<p>äº¤äº’æ“ä½œï¼ˆè¿è¡Œä¸­æŒ‰é”®ï¼‰ï¼š</p>
<ul>
<li>Pï¼šæŒ‰CPUä½¿ç”¨ç‡æ’åº</li>
<li>Mï¼šæŒ‰å†…å­˜ä½¿ç”¨ç‡æ’åº</li>
<li>Tï¼šæŒ‰è¿è¡Œæ—¶é—´æ’åº</li>
<li>kï¼šç»ˆæ­¢æŒ‡å®šè¿›ç¨‹</li>
<li>uï¼šæŒ‰ç”¨æˆ·è¿‡æ»¤</li>
<li>qï¼šé€€å‡º</li>
</ul>
<p><strong>htopï¼ˆå¢å¼ºç‰ˆtopï¼‰</strong></p>
<p>htop æ˜¯ top çš„å¢å¼ºç‰ˆï¼Œæä¾›æ›´ç›´è§‚çš„ç•Œé¢å’Œæ›´å¤šåŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">sudo apt install htop    <span class="hljs-comment"># Debian/Ubuntuå®‰è£…</span>
htop -t                 <span class="hljs-comment"># æ ‘çŠ¶æ˜¾ç¤ºè¿›ç¨‹</span>
htop -s cpu            <span class="hljs-comment"># æŒ‰CPUä½¿ç”¨ç‡æ’åº</span>
</code></pre>
<p>ä¼˜åŠ¿ç‰¹æ€§ï¼š</p>
<ul>
<li>å½©è‰²æ˜¾ç¤ºï¼Œæ”¯æŒé¼ æ ‡æ“ä½œ</li>
<li>ç›´æ¥F9å‘é€ä¿¡å·ï¼ŒF5è¿›ç¨‹æ ‘è§†å›¾</li>
<li>æ˜¾ç¤ºCPUæ ¸å¿ƒåˆ†å¸ƒå’Œå†…å­˜æ¡å½¢å›¾</li>
</ul>
<p><strong>pgrep å’Œ pidofï¼ˆè¿›ç¨‹æŸ¥æ‰¾ï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash">pgrep firefox                 <span class="hljs-comment"># æŸ¥æ‰¾firefoxè¿›ç¨‹PID</span>
pgrep -u root -f <span class="hljs-string">"nginx"</span>     <span class="hljs-comment"># æŸ¥æ‰¾rootç”¨æˆ·çš„nginxè¿›ç¨‹</span>
pidof bash                   <span class="hljs-comment"># æŸ¥æ‰¾bashè¿›ç¨‹PID</span>
</code></pre>
<h3 data-id="heading-2">1.2 è¿›ç¨‹æ§åˆ¶å‘½ä»¤</h3>
<p><strong>kill å’Œ killallï¼ˆè¿›ç¨‹ç»ˆæ­¢ï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">kill</span> 1234              <span class="hljs-comment"># é»˜è®¤å‘é€SIGTERM(15)ï¼Œæ­£å¸¸ç»ˆæ­¢</span>
<span class="hljs-built_in">kill</span> -9 1234           <span class="hljs-comment"># å‘é€SIGKILL(9)ï¼Œå¼ºåˆ¶ç»ˆæ­¢</span>
<span class="hljs-built_in">kill</span> -TERM $(pgrep nginx)  <span class="hljs-comment"># ä¼˜é›…ç»ˆæ­¢æ‰€æœ‰nginxè¿›ç¨‹</span>
killall firefox        <span class="hljs-comment"># ç»ˆæ­¢æ‰€æœ‰firefoxè¿›ç¨‹</span>
pkill -f <span class="hljs-string">"python script.py"</span>  <span class="hljs-comment"># ç»ˆæ­¢åŒ¹é…æ¨¡å¼çš„è¿›ç¨‹</span>
</code></pre>
<p>å¸¸ç”¨ä¿¡å·è¯´æ˜ï¼š</p>
<ul>
<li>SIGTERM(15)ï¼šè¯·æ±‚æ­£å¸¸ç»ˆæ­¢ï¼ˆé»˜è®¤ï¼‰</li>
<li>SIGKILL(9)ï¼šå¼ºåˆ¶ç«‹å³ç»ˆæ­¢ï¼Œæ— æ³•é˜»å¡</li>
<li>SIGINT(2)ï¼šä¸­æ–­è¿›ç¨‹ï¼ˆç›¸å½“äºCtrl+Cï¼‰</li>
<li>SIGSTOP(19)ï¼šæš‚åœè¿›ç¨‹</li>
<li>SIGCONT(18)ï¼šæ¢å¤æš‚åœçš„è¿›ç¨‹</li>
</ul>
<p><strong>nice å’Œ reniceï¼ˆä¼˜å…ˆçº§è°ƒæ•´ï¼‰</strong></p>
<p>Linuxè¿›ç¨‹ä¼˜å…ˆçº§èŒƒå›´-20ï¼ˆæœ€é«˜ï¼‰åˆ°19ï¼ˆæœ€ä½ï¼‰ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">nice</span> -n 10 <span class="hljs-built_in">command</span>     <span class="hljs-comment"># ä»¥ä¼˜å…ˆçº§10å¯åŠ¨è¿›ç¨‹</span>
renice 15 -p 1234      <span class="hljs-comment"># ä¿®æ”¹å·²è¿è¡Œè¿›ç¨‹çš„ä¼˜å…ˆçº§</span>
renice -u username -5  <span class="hljs-comment"># ä¿®æ”¹ç”¨æˆ·æ‰€æœ‰è¿›ç¨‹çš„ä¼˜å…ˆçº§</span>
</code></pre>
<h3 data-id="heading-3">1.3 å‰åå°ä½œä¸šç®¡ç†</h3>
<p><strong>jobsã€fgã€bgï¼ˆä½œä¸šæ§åˆ¶ï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">sleep</span> 100 &amp;            <span class="hljs-comment"># åå°è¿è¡Œ</span>
<span class="hljs-built_in">jobs</span> -l               <span class="hljs-comment"># æŸ¥çœ‹åå°ä»»åŠ¡åˆ—è¡¨åŠPID</span>
<span class="hljs-built_in">fg</span> %1                 <span class="hljs-comment"># å°†ä½œä¸š1è°ƒè‡³å‰å°</span>
<span class="hljs-built_in">bg</span> %2                 <span class="hljs-comment"># è®©æš‚åœçš„ä½œä¸š2åœ¨åå°ç»§ç»­</span>
</code></pre>
<p><strong>nohup å’Œ disownï¼ˆç»ˆç«¯é€€å‡ºä¿æ´»ï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">nohup</span> python script.py &gt; output.log 2&gt;&amp;1 &amp;  <span class="hljs-comment"># ç»ˆç«¯é€€å‡ºåç»§ç»­è¿è¡Œ</span>
python script.py &amp;      <span class="hljs-comment"># å…ˆåå°å¯åŠ¨</span>
<span class="hljs-built_in">disown</span> %1              <span class="hljs-comment"># ä»ä½œä¸šåˆ—è¡¨ç§»é™¤ï¼Œç»ˆç«¯å…³é—­ä¸å½±å“</span>
</code></pre>
<h2 data-id="heading-4">2 ç½‘ç»œç®¡ç†æ ¸å¿ƒå‘½ä»¤</h2>
<h3 data-id="heading-5">2.1 ç½‘ç»œé…ç½®å‘½ä»¤</h3>
<p><strong>ipï¼ˆç°ä»£ç½‘ç»œé…ç½®ï¼‰</strong></p>
<p>ip å‘½ä»¤å·²é€æ¸å–ä»£ ifconfigï¼Œæ˜¯æ›´å¼ºå¤§çš„ç½‘ç»œé…ç½®å·¥å…·ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">ip addr show           <span class="hljs-comment"># æ˜¾ç¤ºæ‰€æœ‰ç½‘ç»œæ¥å£ä¿¡æ¯</span>
ip -4 addr             <span class="hljs-comment"># ä»…æ˜¾ç¤ºIPv4ä¿¡æ¯</span>
ip route show         <span class="hljs-comment"># æ˜¾ç¤ºè·¯ç”±è¡¨</span>
ip neighbor show      <span class="hljs-comment"># æ˜¾ç¤ºARPè¡¨ï¼ˆé‚»æ¥è¡¨ï¼‰</span>
</code></pre>
<p><strong>nmcliï¼ˆNetworkManageræ§åˆ¶ï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash">nmcli connection show           <span class="hljs-comment"># æ˜¾ç¤ºç½‘ç»œè¿æ¥</span>
nmcli device status            <span class="hljs-comment"># æ˜¾ç¤ºè®¾å¤‡çŠ¶æ€</span>
nmcli connection add <span class="hljs-built_in">type</span> wifi ifname wlan0 ssid <span class="hljs-string">"MyWifi"</span> password <span class="hljs-string">"password"</span>  <span class="hljs-comment"># æ·»åŠ WiFiè¿æ¥</span>
</code></pre>
<h3 data-id="heading-6">2.2 ç½‘ç»œè¯Šæ–­å‘½ä»¤</h3>
<p><strong>ping å’Œ tracerouteï¼ˆè¿é€šæ€§æµ‹è¯•ï¼‰</strong></p>
<pre><code class="hljs language-r" lang="r">ping <span class="hljs-operator">-</span><span class="hljs-built_in">c</span> <span class="hljs-number">4</span> baidu.com           <span class="hljs-comment"># å‘é€4ä¸ªæµ‹è¯•åŒ…</span>
ping6 target.ipv6.com         <span class="hljs-comment"># IPv6æµ‹è¯•</span>
traceroute <span class="hljs-operator">-</span>n baidu.com       <span class="hljs-comment"># è¿½è¸ªè·¯å¾„ï¼Œä»¥IPæ˜¾ç¤ºèŠ‚ç‚¹</span>
mtr baidu.com                <span class="hljs-comment"># æ›´å¼ºå¤§çš„è·¯å¾„è¿½è¸ªå·¥å…·</span>
</code></pre>
<p><strong>ss å’Œ netstatï¼ˆè¿æ¥ç»Ÿè®¡ï¼‰</strong></p>
<p>ss æ˜¯ netstat çš„ç°ä»£æ›¿ä»£å“ï¼Œé€Ÿåº¦æ›´å¿«ã€‚</p>
<pre><code class="hljs language-perl" lang="perl">ss -tuln                      <span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰ç›‘å¬ç«¯å£</span>
ss -t -a                      <span class="hljs-comment"># æ‰€æœ‰TCPè¿æ¥</span>
netstat -anp | <span class="hljs-keyword">grep</span> :<span class="hljs-number">80</span>       <span class="hljs-comment"># ä¼ ç»Ÿæ–¹å¼æŸ¥çœ‹80ç«¯å£è¿›ç¨‹</span>
netstat -s                    <span class="hljs-comment"># æ˜¾ç¤ºåè®®ç»Ÿè®¡ä¿¡æ¯</span>
</code></pre>
<p>è¾“å‡ºå­—æ®µè¯´æ˜ï¼š</p>
<ul>
<li>Stateï¼šè¿æ¥çŠ¶æ€ï¼ˆESTABLISHED, LISTENç­‰ï¼‰</li>
<li>Recv-Q/Send-Qï¼šæ¥æ”¶/å‘é€é˜Ÿåˆ—å¤§å°</li>
<li>Local Address:Portï¼šæœ¬åœ°åœ°å€ç«¯å£</li>
<li>Peer Address:Portï¼šå¯¹ç«¯åœ°å€ç«¯å£</li>
<li>PID/Program nameï¼šè¿›ç¨‹ä¿¡æ¯</li>
</ul>
<h3 data-id="heading-7">2.3 ç½‘ç»œæœåŠ¡ä¸å®‰å…¨</h3>
<p><strong>iptablesï¼ˆé˜²ç«å¢™è§„åˆ™ï¼‰</strong></p>
<pre><code class="hljs language-css" lang="css">iptables -L                    # åˆ—å‡ºå½“å‰è§„åˆ™
iptables -<span class="hljs-selector-tag">A</span> <span class="hljs-selector-tag">INPUT</span> -<span class="hljs-selector-tag">p</span> tcp <span class="hljs-attr">--dport</span> <span class="hljs-number">22</span> -j ACCEPT  # å…è®¸SSHè¿æ¥
iptables -<span class="hljs-selector-tag">A</span> <span class="hljs-selector-tag">INPUT</span> -<span class="hljs-selector-tag">i</span> lo -j ACCEPT              # å…è®¸ç¯å›æ¥å£
</code></pre>
<p><strong>tcpdump å’Œ wiresharkï¼ˆæµé‡åˆ†æï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash">tcpdump -i eth0 port 80        <span class="hljs-comment"># æ•è·80ç«¯å£æµé‡</span>
tcpdump -w capture.pcap -i eth0 <span class="hljs-comment"># ä¿å­˜åˆ°æ–‡ä»¶</span>
tshark -i eth0 -f <span class="hljs-string">"port 53"</span>    <span class="hljs-comment"># wiresharkå‘½ä»¤è¡Œç‰ˆï¼Œæ•è·DNSæŸ¥è¯¢</span>
</code></pre>
<p><strong>curl å’Œ wgetï¼ˆç½‘ç»œè¯·æ±‚ï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash">curl -I http://example.com     <span class="hljs-comment"># ä»…è·å–HTTPå¤´</span>
curl -O http://example.com/file.zip  <span class="hljs-comment"># ä¸‹è½½æ–‡ä»¶</span>
wget -c http://example.com/largefile.iso  <span class="hljs-comment"># æ–­ç‚¹ç»­ä¼ </span>
wget -r -l1 http://example.com  <span class="hljs-comment"># é€’å½’ä¸‹è½½ä¸€çº§ç›®å½•</span>
</code></pre>
<h2 data-id="heading-8">3 å®ç”¨åœºæ™¯ä¸æŠ€å·§</h2>
<h3 data-id="heading-9">3.1 æœåŠ¡æ•…éšœæ’æŸ¥æµç¨‹</h3>
<ol>
<li>
<p><strong>æ£€æŸ¥æœåŠ¡è¿›ç¨‹çŠ¶æ€</strong></p>
<pre><code class="hljs language-perl" lang="perl">ps aux | <span class="hljs-keyword">grep</span> nginx         <span class="hljs-comment"># æŸ¥æ‰¾nginxè¿›ç¨‹</span>
systemctl status nginx      <span class="hljs-comment"># æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
</code></pre>
</li>
<li>
<p><strong>éªŒè¯ç«¯å£ç›‘å¬</strong></p>
<pre><code class="hljs language-perl" lang="perl">ss -tuln | <span class="hljs-keyword">grep</span> :<span class="hljs-number">80</span>         <span class="hljs-comment"># æ£€æŸ¥80ç«¯å£ç›‘å¬</span>
netstat -anp | <span class="hljs-keyword">grep</span> :<span class="hljs-number">80</span>     <span class="hljs-comment"># ä¼ ç»Ÿæ–¹å¼æ£€æŸ¥</span>
</code></pre>
</li>
<li>
<p><strong>æµ‹è¯•ç½‘ç»œè¿é€šæ€§</strong></p>
<pre><code class="hljs language-r" lang="r">ping <span class="hljs-operator">-</span><span class="hljs-built_in">c</span> <span class="hljs-number">3</span> target_server     <span class="hljs-comment"># åŸºç¡€è¿é€šæ€§</span>
traceroute target_server    <span class="hljs-comment"># è·¯å¾„åˆ†æ</span>
telnet target_server <span class="hljs-number">80</span>     <span class="hljs-comment"># ç«¯å£è¿é€šæ€§</span>
</code></pre>
</li>
<li>
<p><strong>æ£€æŸ¥DNSè§£æ</strong></p>
<pre><code class="hljs language-bash" lang="bash">nslookup example.com        <span class="hljs-comment"># DNSè§£ææ£€æŸ¥</span>
dig A example.com          <span class="hljs-comment"># æ›´è¯¦ç»†çš„DNSä¿¡æ¯</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-10">3.2 èµ„æºç›‘æ§ä¸ä¼˜åŒ–</h3>
<p><strong>æ‰¾å‡ºèµ„æºå ç”¨æœ€é«˜çš„è¿›ç¨‹</strong></p>
<pre><code class="hljs language-perl" lang="perl">top -o %CPU                    <span class="hljs-comment"># æŒ‰CPUä½¿ç”¨ç‡æ’åº</span>
ps aux --<span class="hljs-keyword">sort</span>=-%mem | head -<span class="hljs-number">10</span> <span class="hljs-comment"># å†…å­˜ä½¿ç”¨å‰10çš„è¿›ç¨‹</span>
iotop                         <span class="hljs-comment"># ç£ç›˜I/Oç›‘æ§ï¼ˆéœ€å®‰è£…ï¼‰</span>
</code></pre>
<p><strong>è‡ªåŠ¨åŒ–ç›‘æ§è„šæœ¬</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># è¿›ç¨‹ç›‘æ§è„šæœ¬</span>
PROCESS_NAME=<span class="hljs-string">"nginx"</span>
INTERVAL=60

<span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> ! pgrep -x <span class="hljs-string">"<span class="hljs-variable">$PROCESS_NAME</span>"</span> &gt; /dev/null; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>: è¿›ç¨‹ <span class="hljs-variable">$PROCESS_NAME</span> å·²åœæ­¢ï¼Œå°è¯•é‡å¯"</span>
        systemctl restart <span class="hljs-variable">$PROCESS_NAME</span>
    <span class="hljs-keyword">fi</span>
    <span class="hljs-built_in">sleep</span> <span class="hljs-variable">$INTERVAL</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h3 data-id="heading-11">3.3 å®‰å…¨æœ€ä½³å®è·µ</h3>
<ol>
<li>
<p><strong>å®šæœŸæ£€æŸ¥å¼‚å¸¸è¿æ¥</strong></p>
<pre><code class="hljs language-perl" lang="perl">ss -tuln | <span class="hljs-keyword">grep</span> LISTEN      <span class="hljs-comment"># æ£€æŸ¥ç›‘å¬ç«¯å£</span>
lsof -i -P | <span class="hljs-keyword">grep</span> ESTABLISHED <span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰æ´»è·ƒè¿æ¥</span>
</code></pre>
</li>
<li>
<p><strong>ç›‘æ§ç³»ç»Ÿè´Ÿè½½</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">uptime</span>                      <span class="hljs-comment"># æŸ¥çœ‹è´Ÿè½½å¹³å‡å€¼</span>
<span class="hljs-built_in">cat</span> /proc/loadavg           <span class="hljs-comment"># ç³»ç»Ÿè´Ÿè½½è¯¦æƒ…</span>
</code></pre>
</li>
<li>
<p><strong>é™åˆ¶è¿›ç¨‹èµ„æº</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">ulimit</span> -a                   <span class="hljs-comment"># æ˜¾ç¤ºå½“å‰é™åˆ¶</span>
<span class="hljs-built_in">ulimit</span> -n 2048             <span class="hljs-comment"># è®¾ç½®æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°</span>
</code></pre>
</li>
</ol>
<h2 data-id="heading-12">4 æ€»ç»“</h2>
<p>Linux è¿›ç¨‹å’Œç½‘ç»œç®¡ç†å‘½ä»¤æ˜¯ç³»ç»Ÿç®¡ç†å‘˜å’Œå¼€å‘äººå‘˜å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæŠ€èƒ½ã€‚æœ¬æ–‡ä»‹ç»çš„å‘½ä»¤è¦†ç›–äº†æ—¥å¸¸ç®¡ç†å’Œæ•…éšœæ’æŸ¥çš„ç»å¤§å¤šæ•°åœºæ™¯ã€‚å®é™…ä½¿ç”¨ä¸­ï¼Œå»ºè®®ç»“åˆå…·ä½“éœ€æ±‚çµæ´»ç»„åˆè¿™äº›å‘½ä»¤ï¼Œå¹¶å…»æˆæŸ¥çœ‹æ‰‹å†Œï¼ˆman commandï¼‰çš„ä¹ æƒ¯ä»¥è·å¾—æ›´æ·±å…¥çš„ç†è§£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[man commandè¯¦è§£ä¸åº”ç”¨å®æˆ˜]]></title>    <link>https://juejin.cn/post/7601000638344937487</link>    <guid>https://juejin.cn/post/7601000638344937487</guid>    <pubDate>2026-01-31T07:39:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601000638344937487" data-draft-id="7601000638344921103" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="man commandè¯¦è§£ä¸åº”ç”¨å®æˆ˜"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2026-01-31T07:39:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            man commandè¯¦è§£ä¸åº”ç”¨å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T07:39:41.000Z" title="Sat Jan 31 2026 07:39:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>man</code>å‘½ä»¤æ˜¯ Linux ç³»ç»Ÿä¸­ä¸å¯æˆ–ç¼ºçš„<strong>å®˜æ–¹æ‰‹å†ŒæŸ¥çœ‹å·¥å…·</strong>ï¼Œå®ƒèƒ½æä¾›å…³äºå‘½ä»¤ã€ç³»ç»Ÿè°ƒç”¨ã€åº“å‡½æ•°ã€é…ç½®æ–‡ä»¶ç­‰çš„è¯¦å°½è¯´æ˜ã€‚ä¸‹é¢è¿™å¼ è¡¨æ€»ç»“äº†å…¶æ ¸å¿ƒç”¨æ³•ï¼Œæ–¹ä¾¿ä½ å¿«é€ŸæŸ¥é˜…ã€‚</p>
<h3 data-id="heading-0">ğŸ” æ ¸å¿ƒè¯­æ³•ä¸é€‰é¡¹</h3>








































<table><thead><tr><th>ç”¨é€”</th><th>å‘½ä»¤ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æŸ¥çœ‹å‘½ä»¤æ‰‹å†Œ</strong></td><td><code>man ls</code></td><td>æŸ¥çœ‹ <code>ls</code>å‘½ä»¤çš„è¯¦ç»†æ‰‹å†Œã€‚</td></tr><tr><td><strong>æŒ‡å®šç« èŠ‚</strong></td><td><code>man 2 open</code></td><td>æŸ¥çœ‹ç¬¬2ç« èŠ‚ï¼ˆç³»ç»Ÿè°ƒç”¨ï¼‰å…³äº <code>open</code>çš„è¯´æ˜ã€‚</td></tr><tr><td><strong>å…³é”®å­—æœç´¢</strong></td><td><code>man -k network</code></td><td>åœ¨æ‰€æœ‰æ‰‹å†Œé¡µä¸­æœç´¢åŒ…å« "network" çš„æ¡ç›®ã€‚</td></tr><tr><td><strong>æ˜¾ç¤ºç®€è¦æè¿°</strong></td><td><code>man -f passwd</code></td><td>æ˜¾ç¤ºåä¸º <code>passwd</code>çš„æ‰€æœ‰æ‰‹å†Œæ¡ç›®çš„ç®€çŸ­æè¿°ã€‚</td></tr><tr><td><strong>æ˜¾ç¤ºæ‰€æœ‰åŒ¹é…</strong></td><td><code>man -a passwd</code></td><td>ä¾æ¬¡æ˜¾ç¤ºæ‰€æœ‰ç« èŠ‚ä¸­åä¸º <code>passwd</code>çš„æ‰‹å†Œé¡µã€‚</td></tr><tr><td><strong>æ˜¾ç¤ºæ‰‹å†Œè·¯å¾„</strong></td><td><code>man -w ls</code></td><td>æ˜¾ç¤º <code>ls</code>å‘½ä»¤æ‰‹å†Œé¡µçš„ç£ç›˜å­˜å‚¨è·¯å¾„ã€‚</td></tr></tbody></table>
<h3 data-id="heading-1">ğŸ“š ç†è§£æ‰‹å†Œç« èŠ‚</h3>
<p>Linux çš„æ‰‹å†Œé¡µï¼ˆman pagesï¼‰æŒ‰ç…§ä¸»é¢˜åˆ†ä¸ºå¤šä¸ªç« èŠ‚ï¼Œè¿™æ˜¯é«˜æ•ˆä½¿ç”¨ <code>man</code>å‘½ä»¤çš„å…³é”®ã€‚å½“ä½ ä½¿ç”¨ <code>man passwd</code>æ—¶ï¼Œé»˜è®¤ä¼šæ˜¾ç¤ºæ’åœ¨é¦–ä½çš„ç« èŠ‚ï¼ˆé€šå¸¸æ˜¯ç¬¬1ç« ï¼‰çš„å†…å®¹ã€‚ä½†å¦‚æœæƒ³æŸ¥çœ‹ <code>/etc/passwd</code>æ–‡ä»¶æ ¼å¼çš„è¯´æ˜ï¼Œå°±éœ€è¦æŒ‡å®šç¬¬5ç« èŠ‚ï¼š<code>man 5 passwd</code>ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å¸¸è§çš„ç« èŠ‚åˆ’åˆ†ï¼š</p>








































<table><thead><tr><th>ç« èŠ‚ç¼–å·</th><th>å†…å®¹ç±»å‹</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>1</strong></td><td>ç”¨æˆ·å‘½ä»¤ï¼ˆæ™®é€šç”¨æˆ·å¯æ‰§è¡Œçš„å‘½ä»¤ï¼‰</td><td><code>ls</code>, <code>cp</code>, <code>mkdir</code></td></tr><tr><td><strong>2</strong></td><td>ç³»ç»Ÿè°ƒç”¨ï¼ˆç”±å†…æ ¸æä¾›çš„å‡½æ•°ï¼‰</td><td><code>open</code>, <code>fork</code>, <code>read</code></td></tr><tr><td><strong>3</strong></td><td>åº“å‡½æ•°ï¼ˆæ ‡å‡†åº“ä¸­çš„å‡½æ•°ï¼‰</td><td><code>printf</code>, <code>malloc</code>, <code>fopen</code></td></tr><tr><td><strong>4</strong></td><td>ç‰¹æ®Šæ–‡ä»¶ï¼ˆé€šå¸¸æŒ‡ <code>/dev</code>ä¸‹çš„è®¾å¤‡æ–‡ä»¶ï¼‰</td><td><code>null</code>, <code>zero</code>, <code>tty</code></td></tr><tr><td><strong>5</strong></td><td>æ–‡ä»¶æ ¼å¼å’Œçº¦å®šï¼ˆé…ç½®æ–‡ä»¶æ ¼å¼ï¼‰</td><td><code>passwd</code>, <code>fstab</code>, <code>hosts</code></td></tr><tr><td><strong>8</strong></td><td>ç³»ç»Ÿç®¡ç†å‘½ä»¤ï¼ˆé€šå¸¸éœ€è¦ root æƒé™ï¼‰</td><td><code>systemctl</code>, <code>fdisk</code>, <code>iptables</code></td></tr></tbody></table>
<h3 data-id="heading-2">ğŸ”§ å®ç”¨æ“ä½œæŠ€å·§</h3>
<p>è¿›å…¥æ‰‹å†Œé¡µåï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å¿«æ·é”®è¿›è¡Œå¯¼èˆªå’Œæœç´¢ï¼Œè¿™èƒ½æå¤§æå‡æŸ¥é˜…æ•ˆç‡ï¼š</p>













































<table><thead><tr><th>æ“ä½œ</th><th>å¿«æ·é”®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å‘ä¸‹ç¿»é¡µ</strong></td><td><code>ç©ºæ ¼é”®</code>æˆ– <code>Page Down</code></td><td>æŸ¥çœ‹ä¸‹ä¸€å±å†…å®¹ã€‚</td></tr><tr><td><strong>å‘ä¸Šç¿»é¡µ</strong></td><td><code>b</code>æˆ– <code>Page Up</code></td><td>æŸ¥çœ‹ä¸Šä¸€å±å†…å®¹ã€‚</td></tr><tr><td><strong>é€€å‡º</strong></td><td><code>q</code></td><td>é€€å‡ºæ‰‹å†Œé¡µï¼Œå›åˆ°å‘½ä»¤è¡Œã€‚</td></tr><tr><td><strong>å‘ä¸‹æœç´¢</strong></td><td><code>/å…³é”®è¯</code></td><td>ä»å½“å‰ä½ç½®å‘ä¸‹æœç´¢ç‰¹å®šå…³é”®è¯ï¼Œå¦‚ <code>/option</code>ã€‚</td></tr><tr><td><strong>å‘ä¸Šæœç´¢</strong></td><td><code>?å…³é”®è¯</code></td><td>ä»å½“å‰ä½ç½®å‘ä¸Šæœç´¢ã€‚</td></tr><tr><td><strong>ä¸‹ä¸€ä¸ªåŒ¹é…</strong></td><td><code>n</code></td><td>è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæœç´¢ç»“æœã€‚</td></tr><tr><td><strong>ä¸Šä¸€ä¸ªåŒ¹é…</strong></td><td><code>N</code></td><td>è·³è½¬åˆ°ä¸Šä¸€ä¸ªæœç´¢ç»“æœã€‚</td></tr></tbody></table>
<h3 data-id="heading-3">ğŸš€ é«˜çº§åº”ç”¨ä¸å®æˆ˜</h3>
<h4 data-id="heading-4">1. è·å–ä¸­æ–‡æ‰‹å†Œ</h4>
<p>å¦‚æœä½ çš„ç³»ç»Ÿç¯å¢ƒæ˜¯ä¸­æ–‡ï¼Œæˆ–è€…å¸Œæœ›é˜…è¯»ä¸­æ–‡æ‰‹å†Œï¼Œå¯ä»¥å®‰è£…ä¸­æ–‡æ‰‹å†ŒåŒ…ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># åœ¨ Debian/Ubuntu ç³»ç»Ÿä¸Šå®‰è£…ä¸­æ–‡æ‰‹å†Œé¡µ</span>
sudo apt-<span class="hljs-keyword">get</span> install manpages-zh
</code></pre>
<p>å®‰è£…åï¼Œä½ å¯ä»¥é€šè¿‡è®¾ç½®è¯­è¨€ç¯å¢ƒæ¥æŸ¥çœ‹ä¸­æ–‡æ‰‹å†Œï¼Œä¾‹å¦‚ <code>LANG=zh_CN.UTF-8 man ls</code>ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸­æ–‡ç¿»è¯‘å¯èƒ½æ»åäºè‹±æ–‡åŸç‰ˆã€‚</p>
<h4 data-id="heading-5">2. æ›´æ–°æ‰‹å†Œæ•°æ®åº“</h4>
<p>å½“ç³»ç»Ÿå®‰è£…æ–°è½¯ä»¶åï¼Œå…¶æ‰‹å†Œé¡µä¿¡æ¯éœ€è¦æ›´æ–°åˆ° <code>man</code>çš„æ•°æ®åº“ä¸­ï¼Œ<code>-k</code>å’Œ <code>-f</code>é€‰é¡¹æ‰èƒ½æ­£å¸¸è¯†åˆ«ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ–°ï¼š</p>
<pre><code class="hljs">sudo mandb
</code></pre>
<h4 data-id="heading-6">3. å¯¼å‡ºæ‰‹å†Œå†…å®¹</h4>
<p>æœ‰æ—¶ä½ å¯èƒ½å¸Œæœ›å°†æ‰‹å†Œé¡µçš„å†…å®¹ä¿å­˜åˆ°æ–‡ä»¶ä¸­ä»¥ä¾¿ç¦»çº¿é˜…è¯»æˆ–æ‰“å°ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°† ls å‘½ä»¤çš„æ‰‹å†Œé¡µå¯¼å‡ºä¸ºçº¯æ–‡æœ¬æ–‡ä»¶</span>
man <span class="hljs-built_in">ls</span> &gt; ls_manual.txt

<span class="hljs-comment"># å¦‚æœéœ€è¦æ ¼å¼æ›´å¥½çš„ç‰ˆæœ¬ï¼Œå¯ä»¥å…ˆè½¬æ¢ä¸º PostScript å†è½¬ä¸º PDF</span>
man -t <span class="hljs-built_in">ls</span> &gt; ls.ps
ps2pdf ls.ps ls.pdf
</code></pre>
<h3 data-id="heading-7">ğŸ’¡ å®æˆ˜åœºæ™¯ä¸¾ä¾‹</h3>
<ul>
<li>
<p><strong>åœºæ™¯1ï¼šå¿«é€Ÿäº†è§£æœªçŸ¥å‘½ä»¤</strong></p>
<p>å½“ä½ ç¬¬ä¸€æ¬¡é‡åˆ° <code>chmod</code>å‘½ä»¤æ—¶ï¼Œç›´æ¥è¾“å…¥ <code>man chmod</code>ã€‚é‡ç‚¹é˜…è¯» <strong>SYNOPSIS</strong>ï¼ˆè¯­æ³•ï¼‰å’Œ <strong>DESCRIPTION</strong>ï¼ˆæè¿°ï¼‰éƒ¨åˆ†ï¼Œäº†è§£å…¶åŸºæœ¬ç”¨æ³•å’Œå‚æ•°å«ä¹‰ã€‚</p>
</li>
<li>
<p><strong>åœºæ™¯2ï¼šæŸ¥è¯¢å‡½æ•°ç”¨æ³•</strong></p>
<p>åœ¨ç¼–å†™Cç¨‹åºæ—¶ï¼Œéœ€è¦äº†è§£ <code>printf</code>å‡½æ•°çš„è¯¦ç»†ç”¨æ³•å’Œå¤´æ–‡ä»¶ï¼Œåº”ä½¿ç”¨ <code>man 3 printf</code>æŸ¥çœ‹åº“å‡½æ•°ç« èŠ‚çš„è¯´æ˜ã€‚</p>
</li>
<li>
<p><strong>åœºæ™¯3ï¼šæ’æŸ¥ç½‘ç»œé—®é¢˜</strong></p>
<p>å¦‚æœæƒ³æŸ¥çœ‹æœåŠ¡å™¨ä¸Šå“ªäº›ç«¯å£æ­£åœ¨ç›‘å¬ï¼Œå¯ä»¥ä½¿ç”¨ <code>man netstat</code>æŸ¥è¯¢ <code>-tuln</code>é€‰é¡¹çš„å…·ä½“å«ä¹‰ï¼Œç¡®ä¿å‘½ä»¤ä½¿ç”¨æ­£ç¡®ã€‚</p>
</li>
<li>
<p><strong>åœºæ™¯4ï¼šç†è§£é…ç½®æ–‡ä»¶</strong></p>
<p>å½“éœ€è¦ä¿®æ”¹ <code>/etc/ssh/sshd_config</code>æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨ <code>man 5 sshd_config</code>å¯ä»¥æŸ¥çœ‹è¯¥é…ç½®æ–‡ä»¶ä¸­æ¯ä¸ªé€‰é¡¹çš„è¯¦ç»†è§£é‡Šã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">âš ï¸ æ³¨æ„äº‹é¡¹</h3>
<ul>
<li><strong>æ‰‹å†Œé¡µå¯èƒ½ç¼ºå¤±</strong>ï¼šæŸäº›ç²¾ç®€ç‰ˆç³»ç»Ÿæˆ–ç¬¬ä¸‰æ–¹è½¯ä»¶å¯èƒ½æ²¡æœ‰å®‰è£…å®Œæ•´çš„æ‰‹å†Œé¡µã€‚å¦‚æœ <code>man</code>å‘½ä»¤æç¤ºæ‰¾ä¸åˆ°æ¡ç›®ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨è½¯ä»¶åŒ…ç®¡ç†å™¨å®‰è£… <code>man-pages</code>æˆ–ç±»ä¼¼è½¯ä»¶åŒ…ã€‚</li>
<li><strong>ä¿¡æ¯å¯èƒ½è¿‡æ—¶</strong>ï¼šæ‰‹å†Œé¡µæ˜¯éšè½¯ä»¶åŒ…ä¸€èµ·å‘å¸ƒçš„ï¼Œæœ‰æ—¶å¯èƒ½æ— æ³•å®Œå…¨è·Ÿä¸ŠæŸä¸ªå‘½ä»¤æœ€æ–°ç‰ˆæœ¬çš„æ‰€æœ‰å˜åŒ–ã€‚æ­¤æ—¶ï¼Œç»“åˆå‘½ä»¤çš„ <code>--help</code>é€‰é¡¹æˆ–æŸ¥é˜…å®˜æ–¹åœ¨çº¿æ–‡æ¡£æ˜¯å¾ˆå¥½çš„è¡¥å……ã€‚</li>
<li><strong>å–„ç”¨ SEE ALSO</strong>ï¼šæ‰‹å†Œé¡µæœ«å°¾çš„ <strong>SEE ALSO</strong>ï¼ˆå‚è§ï¼‰éƒ¨åˆ†éå¸¸æœ‰ç”¨ï¼Œå®ƒä¼šæŒ‡å¼•ä½ æŸ¥çœ‹ç›¸å…³çš„å‘½ä»¤æˆ–æ–‡ä»¶ï¼Œå¸®åŠ©ä½ æ„å»ºæ›´å®Œæ•´çš„çŸ¥è¯†ç½‘ç»œã€‚</li>
</ul>
<p><code>man</code>å‘½ä»¤æ˜¯æ¢ç´¢å’Œç†è§£ Linux ä¸–ç•Œçš„å¯é åœ°å›¾ã€‚ç†Ÿç»ƒæŒæ¡å®ƒï¼Œä½ å°†èƒ½æ›´è‡ªä¿¡ã€ç‹¬ç«‹åœ°è§£å†³é‡åˆ°çš„å„ç§é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•°æ®â€œæ˜¾å¾®é•œâ€ï¼šèœ‚ç¾¤å›¾è®©æ¯ä¸ªæ•°æ®ç‚¹éƒ½å‘å£°]]></title>    <link>https://juejin.cn/post/7601018079620530191</link>    <guid>https://juejin.cn/post/7601018079620530191</guid>    <pubDate>2026-01-31T06:21:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601018079620530191" data-draft-id="7601049142865477632" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•°æ®â€œæ˜¾å¾®é•œâ€ï¼šèœ‚ç¾¤å›¾è®©æ¯ä¸ªæ•°æ®ç‚¹éƒ½å‘å£°"/> <meta itemprop="keywords" content="Python,æ•°æ®å¯è§†åŒ–,æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2026-01-31T06:21:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•°æ®â€œæ˜¾å¾®é•œâ€ï¼šèœ‚ç¾¤å›¾è®©æ¯ä¸ªæ•°æ®ç‚¹éƒ½å‘å£°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T06:21:08.000Z" title="Sat Jan 31 2026 06:21:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æƒ³è±¡ä¸€ä¸‹å¤æ—¥çš„èŠ±ä¸›ä¸­ï¼Œæˆç¾¤çš„èœœèœ‚å›´ç»•ç€èŠ±æœµå¿™ç¢Œåœ°é£èˆã€‚æ¯åªèœœèœ‚éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®ç‚¹ï¼Œå®ƒä»¬æ—¢ä¿æŒç¾¤ä½“èšé›†çš„å½¢æ€ï¼Œåˆä¸ä¼šå®Œå…¨é‡å åœ¨ä¸€èµ·ã€‚</p>
<p>è¿™å°±æ˜¯<strong>èœ‚ç¾¤å›¾</strong>ï¼ˆ<code>Swarm Plot</code>ï¼‰çš„<strong>æ ¸å¿ƒç†å¿µ</strong>â€”â€”åœ¨æœ‰é™çš„ç©ºé—´å†…å±•ç¤ºæ‰€æœ‰æ•°æ®ç‚¹ï¼Œè®©æ¯ä¸ªç‚¹éƒ½èƒ½è¢«æ¸…æ™°çœ‹è§ã€‚</p>
<p><strong>èœ‚ç¾¤å›¾</strong>æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®å¯è§†åŒ–å›¾è¡¨ï¼Œå®ƒå°†åˆ†ç±»æ•°æ®ä¸æ•°å€¼æ•°æ®ç»“åˆèµ·æ¥ï¼Œå±•ç¤ºæ•°æ®çš„åˆ†å¸ƒæƒ…å†µã€‚</p>
<p>ä¸ä¼ ç»Ÿçš„æ¡å½¢å›¾æˆ–ç®±çº¿å›¾ä¸åŒï¼Œèœ‚ç¾¤å›¾ä¸è¿›è¡Œä»»ä½•æ•°æ®èšåˆï¼Œè€Œæ˜¯å±•ç¤ºæ¯ä¸€ä¸ªåŸå§‹æ•°æ®ç‚¹ï¼Œé¿å…äº†ä¿¡æ¯ä¸¢å¤±ã€‚</p>
<h2 data-id="heading-0">1. èœ‚ç¾¤å›¾æ ¸å¿ƒç‰¹ç‚¹</h2>
<p><strong>èœ‚ç¾¤å›¾</strong>æœ€å·§å¦™çš„åœ°æ–¹åœ¨äºå®ƒçš„å¸ƒå±€ç®—æ³•ã€‚</p>
<p>å½“å¤šä¸ªæ•°æ®ç‚¹å…·æœ‰ç›¸ä¼¼æ•°å€¼æ—¶ï¼Œå®ƒä»¬ä¸ä¼šç®€å•åœ°é‡å åœ¨ä¸€èµ·ï¼Œè€Œæ˜¯åƒæœ‰â€œæ’æ–¥åŠ›â€ä¸€æ ·ï¼Œåœ¨å‚ç›´æ–¹å‘ï¼ˆæˆ–æ°´å¹³æ–¹å‘ï¼‰ä¸Šè½»å¾®åç§»ï¼Œå½¢æˆä¸€ä¸ªç±»ä¼¼èœ‚ç¾¤çš„åˆ†å¸ƒã€‚</p>
<p>æ¯”å¦‚ï¼Œä¸‹é¢æ˜¯<strong>åŒä¸€ç»„æ•°æ®</strong>åœ¨<strong>æ•£ç‚¹å›¾</strong>å’Œ<strong>èœ‚ç¾¤å›¾</strong>ä¸­å±•ç¤ºçš„æ•ˆæœã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4caf03d4b0d24f74842c22c27c2a702e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770445271&amp;x-signature=0MjPiDO20sLmLVRzrLMrrIF6Wwk%3D" alt="" loading="lazy"/></p>
<p>ä»ä¸­å¯ä»¥çœ‹å‡ºèœ‚ç¾¤å›¾çš„æ ¸å¿ƒç‰¹ç‚¹æœ‰ï¼š</p>
<ol>
<li><strong>ç»ä¸é‡å </strong>ï¼š å®ƒé€šè¿‡ç®—æ³•æ£€æµ‹æ•°æ®ç‚¹çš„é‡å æƒ…å†µï¼Œä¸€æ—¦å‘ç°ä¸¤ä¸ªç‚¹æ•°å€¼ç›¸è¿‘ï¼Œå°±ä¼šè‡ªåŠ¨æŠŠå®ƒä»¬å‘æ°´å¹³æ–¹å‘æ¨å¼€ã€‚</li>
<li><strong>ä¿ç•™åˆ†å¸ƒå½¢æ€</strong>ï¼š æ•£å¼€åçš„å½¢çŠ¶ï¼Œå¤©ç„¶å½¢æˆäº†ä¸€ç§ç±»ä¼¼â€œå°æç´â€æˆ–â€œå±±å³°â€çš„è½®å»“ï¼Œç›´è§‚åœ°å±•ç¤ºäº†æ•°æ®çš„å¯†åº¦ã€‚</li>
<li><strong>å‚æ•°è°ƒæ•´</strong>ï¼š æˆ‘ä»¬å¯ä»¥è°ƒæ•´ç‚¹çš„å¤§å°ï¼ˆmarker sizeï¼‰å’Œæ’åˆ—çš„ç´§å¯†ç¨‹åº¦ã€‚ç‚¹è¶Šå¤§ï¼Œè§†è§‰å†²å‡»åŠ›è¶Šå¼ºï¼Œä½†éœ€è¦çš„æ°´å¹³ç©ºé—´ä¹Ÿè¶Šå¤šã€‚</li>
</ol>
<h2 data-id="heading-1">2. èœ‚ç¾¤å›¾ vs. æ¡å½¢å›¾ï¼šä»æ‘˜è¦åˆ°ç»†èŠ‚</h2>
<p><strong>æ¡å½¢å›¾</strong>å°±åƒæ˜¯ä¸€ä»½æ•°æ®æ‘˜è¦æŠ¥å‘Šï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬æ¯ä¸ªç±»åˆ«çš„å¹³å‡å€¼æˆ–æ€»è®¡å€¼ï¼Œä½†éšè—äº†æ•°æ®å†…éƒ¨çš„åˆ†å¸ƒç»†èŠ‚ã€‚</p>
<p>è€Œ<strong>èœ‚ç¾¤å›¾</strong>åˆ™åƒæ˜¯ä¸€æ¬¡æ•°æ®ç‚¹çš„å…¨å‘˜å¤§ä¼šï¼Œæ¯ä¸ªæ•°æ®ç‚¹éƒ½æœ‰å‘è¨€çš„æœºä¼šã€‚</p>
<p>ä¸‹é¢é’ˆå¯¹åŒä¸€ç»„æ•°æ®ï¼Œæˆ‘ä»¬åˆ†åˆ«ç»˜åˆ¶äº†<strong>æ¡å½¢å›¾</strong>ã€<strong>ç®±çº¿å›¾</strong>å’Œ<strong>èœ‚ç¾¤å›¾</strong>ï¼Œä¸€èµ·æ¥æ„Ÿå—ä¸€ä¸‹å®ƒä»¬ä¹‹é—´ä¸åŒçš„å±•ç¤ºæ•ˆæœã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç”Ÿæˆç¤ºä¾‹æ•°æ®</span>
np.random.seed(<span class="hljs-number">123</span>)
categories = [<span class="hljs-string">"äº§å“A"</span>, <span class="hljs-string">"äº§å“B"</span>, <span class="hljs-string">"äº§å“C"</span>, <span class="hljs-string">"äº§å“D"</span>]
data_comparison = []
<span class="hljs-keyword">for</span> category <span class="hljs-keyword">in</span> categories:
    n_points = <span class="hljs-number">40</span>
    <span class="hljs-keyword">if</span> category == <span class="hljs-string">"äº§å“A"</span>:
        values = np.random.normal(<span class="hljs-number">75</span>, <span class="hljs-number">8</span>, n_points)
    <span class="hljs-keyword">elif</span> category == <span class="hljs-string">"äº§å“B"</span>:
        values = np.random.normal(<span class="hljs-number">82</span>, <span class="hljs-number">12</span>, n_points)
    <span class="hljs-keyword">elif</span> category == <span class="hljs-string">"äº§å“C"</span>:
        values = np.random.normal(<span class="hljs-number">65</span>, <span class="hljs-number">5</span>, n_points)
    <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># äº§å“D</span>
        <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªåŒå³°åˆ†å¸ƒ</span>
        values1 = np.random.normal(<span class="hljs-number">55</span>, <span class="hljs-number">6</span>, n_points // <span class="hljs-number">2</span>)
        values2 = np.random.normal(<span class="hljs-number">85</span>, <span class="hljs-number">7</span>, n_points // <span class="hljs-number">2</span>)
        values = np.concatenate([values1, values2])

    <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> values:
        data_comparison.append({<span class="hljs-string">"äº§å“"</span>: category, <span class="hljs-string">"ç”¨æˆ·è¯„åˆ†"</span>: value})

<span class="hljs-comment"># 1. æ¡å½¢å›¾ï¼ˆå¹³å‡å€¼ï¼‰</span>
means = []
<span class="hljs-keyword">for</span> category <span class="hljs-keyword">in</span> categories:
    cat_data = [d[<span class="hljs-string">"ç”¨æˆ·è¯„åˆ†"</span>] <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> data_comparison <span class="hljs-keyword">if</span> d[<span class="hljs-string">"äº§å“"</span>] == category]
    means.append(np.mean(cat_data))

bars = axes[<span class="hljs-number">0</span>].bar(
    categories, means, color=[<span class="hljs-string">"#1f77b4"</span>, <span class="hljs-string">"#ff7f0e"</span>, <span class="hljs-string">"#2ca02c"</span>, <span class="hljs-string">"#d62728"</span>]
)


<span class="hljs-comment"># åœ¨æ¡å½¢ä¸Šæ ‡æ³¨å¹³å‡å€¼</span>
<span class="hljs-comment"># çœç•¥...</span>

<span class="hljs-comment"># 2. ç®±çº¿å›¾</span>
box_data = []
<span class="hljs-keyword">for</span> category <span class="hljs-keyword">in</span> categories:
    cat_data = [d[<span class="hljs-string">"ç”¨æˆ·è¯„åˆ†"</span>] <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> data_comparison <span class="hljs-keyword">if</span> d[<span class="hljs-string">"äº§å“"</span>] == category]
    box_data.append(cat_data)

boxplot = axes[<span class="hljs-number">1</span>].boxplot(
    box_data, tick_labels=categories, patch_artist=<span class="hljs-literal">True</span>, boxprops=<span class="hljs-built_in">dict</span>(facecolor=<span class="hljs-string">"lightblue"</span>)
)
<span class="hljs-comment"># çœç•¥...</span>

<span class="hljs-comment"># 3. èœ‚ç¾¤å›¾</span>
data_df = pd.DataFrame(data_comparison)
sns.swarmplot(
    x=<span class="hljs-string">"äº§å“"</span>,
    y=<span class="hljs-string">"ç”¨æˆ·è¯„åˆ†"</span>,
    hue=<span class="hljs-string">"äº§å“"</span>,
    data=data_df,
    ax=axes[<span class="hljs-number">2</span>],
    size=<span class="hljs-number">5</span>,
    palette=<span class="hljs-string">"Set2"</span>,
    edgecolor=<span class="hljs-string">"black"</span>,
    linewidth=<span class="hljs-number">0.5</span>,
)
<span class="hljs-comment"># çœç•¥...</span>

plt.tight_layout()
plt.show()

</code></pre>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f95d09191b174b04afe13368017263c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770445271&amp;x-signature=SWcMKvD0V3DjIb2CgnNpxYsZJRc%3D" alt="" loading="lazy"/></p>
<p>ç»˜åˆ¶èœ‚ç¾¤å›¾å¯ä»¥ç”¨<code>seaborn</code>è¿™ä¸ªåº“ä¸­çš„<code>swarmplot</code>å‡½æ•°ã€‚</p>
<p>ä»ä¸Šé¢çš„å¯¹æ¯”å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li><strong>æ¡å½¢å›¾</strong>å‘Šè¯‰æˆ‘ä»¬äº§å“Dçš„å¹³å‡åˆ†çº¦ä¸º70åˆ†</li>
<li><strong>ç®±çº¿å›¾</strong>æç¤ºäº§å“Dçš„æ•°æ®åˆ†å¸ƒèŒƒå›´å¾ˆå¹¿</li>
<li>ä½†åªæœ‰<strong>èœ‚ç¾¤å›¾</strong>æ¸…æ™°åœ°æ­ç¤ºäº†äº§å“Då®é™…ä¸Šæœ‰ä¸¤ä¸ªæ˜æ˜¾çš„ç”¨æˆ·ç¾¤ä½“ï¼šä¸€ä¸ªä½è¯„åˆ†ç¾¤ä½“å’Œä¸€ä¸ªé«˜è¯„åˆ†ç¾¤ä½“</li>
</ul>
<h2 data-id="heading-2">3. èœ‚ç¾¤å›¾ vs. æ•£ç‚¹å›¾ï¼šä»æ··ä¹±åˆ°æœ‰åº</h2>
<p>ä¼ ç»Ÿ<strong>æ•£ç‚¹å›¾</strong>åœ¨å¤„ç†åˆ†ç±»æ•°æ®æ—¶ï¼Œå¸¸å¸¸å¯¼è‡´æ•°æ®ç‚¹å¤§é‡é‡å ï¼Œå½¢æˆ"é»‘å›¢"ï¼Œæˆ‘ä»¬æ— æ³•çœ‹æ¸…æ•°æ®ç‚¹çš„çœŸå®åˆ†å¸ƒã€‚</p>
<p><strong>èœ‚ç¾¤å›¾</strong>é€šè¿‡æ™ºèƒ½å¸ƒå±€ç®—æ³•è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ä¸‹é¢æ„é€ ä¸€ä¸ªä¸åŒå¯†åº¦çš„æ•°æ®ï¼Œçœ‹çœ‹èœ‚ç¾¤å›¾å’Œæ•£ç‚¹å›¾çš„å±•ç¤ºæ•ˆæœã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¯”è¾ƒæ•£ç‚¹å›¾ä¸èœ‚ç¾¤å›¾çš„è§†è§‰æ•ˆæœ</span>
fig, axes = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">6</span>))

<span class="hljs-comment"># ç”Ÿæˆå…·æœ‰ä¸åŒå¯†åº¦çš„æ•°æ®</span>
np.random.seed(<span class="hljs-number">42</span>)
density_data = []
categories = [<span class="hljs-string">"ä½å¯†åº¦"</span>, <span class="hljs-string">"ä¸­ç­‰å¯†åº¦"</span>, <span class="hljs-string">"é«˜å¯†åº¦"</span>]
<span class="hljs-keyword">for</span> i, category <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(categories):
    n_points = <span class="hljs-number">20</span> + i * <span class="hljs-number">30</span>  <span class="hljs-comment"># ä¸åŒå¯†åº¦</span>
    <span class="hljs-keyword">if</span> category == <span class="hljs-string">"ä½å¯†åº¦"</span>:
        values = np.random.normal(<span class="hljs-number">50</span>, <span class="hljs-number">15</span>, n_points)
    <span class="hljs-keyword">elif</span> category == <span class="hljs-string">"ä¸­ç­‰å¯†åº¦"</span>:
        values = np.random.normal(<span class="hljs-number">50</span>, <span class="hljs-number">8</span>, n_points)
    <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># é«˜å¯†åº¦</span>
        values = np.random.normal(<span class="hljs-number">50</span>, <span class="hljs-number">4</span>, n_points)

    <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> values:
        density_data.append({<span class="hljs-string">"ç±»åˆ«"</span>: category, <span class="hljs-string">"æ•°å€¼"</span>: value})

<span class="hljs-comment"># å·¦ä¾§ï¼šä¼ ç»Ÿæ•£ç‚¹å›¾</span>
<span class="hljs-keyword">for</span> i, category <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(categories):
    cat_data = [d[<span class="hljs-string">"æ•°å€¼"</span>] <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> density_data <span class="hljs-keyword">if</span> d[<span class="hljs-string">"ç±»åˆ«"</span>] == category]
    x_positions = np.full(<span class="hljs-built_in">len</span>(cat_data), i)
    axes[<span class="hljs-number">0</span>].scatter(x_positions, cat_data, alpha=<span class="hljs-number">0.6</span>, s=<span class="hljs-number">60</span>, label=category)

<span class="hljs-comment">#çœç•¥...</span>

<span class="hljs-comment"># å³ä¾§ï¼šèœ‚ç¾¤å›¾</span>
density_data_df = pd.DataFrame(density_data)
sns.swarmplot(
    x=<span class="hljs-string">"ç±»åˆ«"</span>,
    y=<span class="hljs-string">"æ•°å€¼"</span>,
    hue=<span class="hljs-string">"ç±»åˆ«"</span>,
    data=density_data_df,
    ax=axes[<span class="hljs-number">1</span>],
    size=<span class="hljs-number">6</span>,
    palette=<span class="hljs-string">"coolwarm"</span>,
    edgecolor=<span class="hljs-string">"black"</span>,
    linewidth=<span class="hljs-number">0.5</span>,
)
<span class="hljs-comment">#çœç•¥...</span>

plt.tight_layout()
plt.show()
</code></pre>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e57e532d22f4ad4a068c2c244080e88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770445271&amp;x-signature=5%2BeEHyWRB4VpR%2BOvr3UTi4Y%2BqGw%3D" alt="" loading="lazy"/></p>
<p><strong>èœ‚ç¾¤å›¾</strong>è§£å†³äº† <strong>â€œé‡å ï¼ˆOverplottingï¼‰â€</strong> çš„é—®é¢˜ã€‚åœ¨æ•°æ®é‡é€‚ä¸­ï¼ˆå‡ ç™¾åˆ°å‡ åƒä¸ªç‚¹ï¼‰æ—¶ï¼Œå®ƒæ˜¯å±•ç¤ºåˆ†å¸ƒå¯†åº¦çš„æœ€ä½³é€‰æ‹©ã€‚</p>
<h2 data-id="heading-3">4. èœ‚ç¾¤å›¾çš„é€‚ç”¨åœºæ™¯</h2>
<p><strong>èœ‚ç¾¤å›¾</strong>å¹¶ä¸æ˜¯ä¸ºäº†å–ä»£<strong>æ¡å½¢å›¾</strong>æˆ–<strong>æ•£ç‚¹å›¾</strong>ï¼Œå®ƒæœ‰è‡ªå·±çš„é€‚ç”¨åœºæ™¯å’Œå±€é™æ€§ã€‚</p>
<p>é€‚åˆä½¿ç”¨<strong>èœ‚ç¾¤å›¾</strong>çš„åœºæ™¯ï¼š</p>
<ul>
<li>æ ·æœ¬é‡é€‚ä¸­ï¼ˆé€šå¸¸å°‘äºå‡ ç™¾ä¸ªç‚¹ï¼‰æ—¶ï¼Œå±•ç¤ºå®Œæ•´æ•°æ®åˆ†å¸ƒ</li>
<li>éœ€è¦åŒæ—¶çœ‹åˆ°æ•´ä½“è¶‹åŠ¿å’Œä¸ªä½“æ•°æ®ç‚¹</li>
<li>æ•°æ®æœ‰å¤šä¸ªåˆ†ç±»å˜é‡ï¼Œéœ€è¦æ¯”è¾ƒä¸åŒç±»åˆ«åˆ†å¸ƒ</li>
<li>å¸Œæœ›å‘ç°å¼‚å¸¸å€¼æˆ–ç‰¹æ®Šæ¨¡å¼ï¼ˆå¦‚åŒå³°åˆ†å¸ƒï¼‰</li>
</ul>
<p/>
<p><strong>èœ‚ç¾¤å›¾</strong>çš„<strong>å±€é™æ€§</strong>ä¸»è¦æœ‰ï¼š</p>
<ol>
<li>å¤§æ•°æ®é›†å¯èƒ½å¯¼è‡´å›¾è¡¨è¿‡äºæ‹¥æŒ¤</li>
<li>å¯¹äºéå¸¸å¤§è§„æ¨¡æ•°æ®ï¼Œç®±çº¿å›¾æˆ–å°æç´å›¾å¯èƒ½æ›´åˆé€‚</li>
<li>ç²¾ç¡®çš„æ•°å€¼æ¯”è¾ƒä¸å¦‚æ¡å½¢å›¾ç›´è§‚</li>
</ol>
<h2 data-id="heading-4">5. æ€»ç»“</h2>
<p><strong>èœ‚ç¾¤å›¾</strong>å°±åƒæ•°æ®å¯è§†åŒ–é¢†åŸŸçš„"æ˜¾å¾®é•œ"ï¼Œå®ƒè®©æˆ‘ä»¬æ—¢èƒ½è§‚å¯Ÿåˆ°æ•°æ®çš„æ•´ä½“åˆ†å¸ƒå½¢æ€ï¼Œåˆèƒ½çœ‹åˆ°æ¯ä¸€ä¸ªæ•°æ®ç‚¹çš„å…·ä½“ä½ç½®ã€‚</p>
<p>ä¸åªèƒ½æ˜¾ç¤ºæ‘˜è¦ä¿¡æ¯çš„<strong>æ¡å½¢å›¾</strong>å’Œå®¹æ˜“äº§ç”Ÿé‡å çš„<strong>æ•£ç‚¹å›¾</strong>ç›¸æ¯”ï¼Œ<strong>èœ‚ç¾¤å›¾</strong>åœ¨æ˜¾ç¤ºä¸­å°å‹æ•°æ®é›†çš„å®Œæ•´åˆ†å¸ƒä¿¡æ¯æ–¹é¢å…·æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ã€‚</p>
<p>åœ¨æ•°æ®å¯è§†åŒ–å®è·µä¸­ï¼Œé€‰æ‹©æ­£ç¡®çš„å›¾è¡¨ç±»å‹å°±åƒé€‰æ‹©æ­£ç¡®çš„å·¥å…·ä¸€æ ·é‡è¦ã€‚</p>
<p>å½“ä¸‹ä¸€æ¬¡ä½ éœ€è¦å±•ç¤ºåˆ†ç±»æ•°æ®çš„åˆ†å¸ƒæ—¶ï¼Œä¸å¦¨å°è¯•ä¸€ä¸‹èœ‚ç¾¤å›¾ï¼Œå®ƒå¯èƒ½ä¼šæ­ç¤ºå‡ºä½ ä»æœªæ³¨æ„åˆ°çš„æ•°æ®ç§˜å¯†ã€‚</p>
<p>æ–‡ä¸­çš„å®Œæ•´ä»£ç å…±äº«åœ¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Furl11.ctfile.com%2Ff%2F45455611-8639900394-9a109f%3Fp%3D6872" target="_blank" title="https://url11.ctfile.com/f/45455611-8639900394-9a109f?p=6872" ref="nofollow noopener noreferrer">èœ‚ç¾¤å›¾.ipynb</a> (è®¿é—®å¯†ç : 6872)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœåŠ¡å™¨ç³»ç»Ÿå®‰å…¨é…ç½®æŒ‡å—(æŒç»­æ›´æ–°)]]></title>    <link>https://juejin.cn/post/7600982613654454322</link>    <guid>https://juejin.cn/post/7600982613654454322</guid>    <pubDate>2026-01-31T03:35:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600982613654454322" data-draft-id="7600953879501717555" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœåŠ¡å™¨ç³»ç»Ÿå®‰å…¨é…ç½®æŒ‡å—(æŒç»­æ›´æ–°)"/> <meta itemprop="keywords" content="è¿ç»´"/> <meta itemprop="datePublished" content="2026-01-31T03:35:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŒ¿å…ˆç”Ÿ133"/> <meta itemprop="url" content="https://juejin.cn/user/3923509324823005"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœåŠ¡å™¨ç³»ç»Ÿå®‰å…¨é…ç½®æŒ‡å—(æŒç»­æ›´æ–°)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3923509324823005/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŒ¿å…ˆç”Ÿ133
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T03:35:03.000Z" title="Sat Jan 31 2026 03:35:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç³»ç»Ÿå®‰å…¨é…ç½®æŒ‡å—</h2>
<h3 data-id="heading-1">1. å°†æ™®é€šç”¨æˆ·æ·»åŠ åˆ° sudo ç»„</h3>
<h4 data-id="heading-2">ç›®æ ‡</h4>
<p>å°†æ™®é€šç”¨æˆ·ï¼ˆå¦‚ lingdongï¼‰æ·»åŠ åˆ° sudo ç»„ï¼Œä½¿å…¶èƒ½å¤Ÿæ‰§è¡Œç®¡ç†å‘˜æƒé™æ“ä½œã€‚</p>
<h4 data-id="heading-3">æ­¥éª¤</h4>
<p>1ï¼šåˆ›å»ºæ–°ç”¨æˆ·</p>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºæ–°ç”¨æˆ·å¹¶è®¾ç½®å¯†ç ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo adduser lingdong
</code></pre>
<p>è¿™æ¡å‘½ä»¤å°†åˆ›å»ºä¸€ä¸ªåä¸ºÂ <code>lingdong</code>Â çš„æ–°ç”¨æˆ·ï¼Œå¹¶æç¤ºæ‚¨è®¾ç½®å¯†ç å’Œå…¶ä»–ä¿¡æ¯ã€‚è¯·æ ¹æ®æç¤ºå®Œæˆæ“ä½œã€‚</p>
<ol start="2">
<li>å¦‚æœæ‚¨æœ‰Â <code>root</code>Â ç”¨æˆ·çš„è®¿é—®æƒé™ï¼Œè¯·åˆ‡æ¢åˆ°Â <code>root</code>Â ç”¨æˆ·ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">su - root
</code></pre>
<ol start="3">
<li>å°†ç”¨æˆ·æ·»åŠ åˆ° sudo ç»„ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">usermod -aG sudo lingdong
</code></pre>
<p>è¿™æ¡å‘½ä»¤çš„ä½œç”¨ï¼šå°†ç”¨æˆ·Â <code>lingdong</code>Â æ·»åŠ åˆ°Â <code>sudo</code>Â ç»„ï¼Œä½¿å…¶è·å¾—ç®¡ç†å‘˜æƒé™ã€‚</p>
<ol start="4">
<li>é‡æ–°ç™»å½•ç³»ç»Ÿä»¥ä½¿ç»„æƒé™ç”Ÿæ•ˆã€‚
åœ¨é‡æ–°ç™»å½•åï¼Œè¯·å°è¯•è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥éªŒè¯Â <code>lingdong</code>Â ç”¨æˆ·æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨Â <code>sudo</code>ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">whoami</span>
</code></pre>
<p>å¦‚æœè¾“å‡ºä¸ºÂ <code>root</code>ï¼Œåˆ™è¡¨ç¤ºé…ç½®æˆåŠŸã€‚</p>
<h3 data-id="heading-4">2. ç¦ç”¨ root ç”¨æˆ·çš„ç›´æ¥ç™»å½•</h3>
<h4 data-id="heading-5">ç›®æ ‡</h4>
<p>é€šè¿‡ä¿®æ”¹ SSH é…ç½®æ–‡ä»¶ç¦ç”¨ root ç”¨æˆ·çš„ç›´æ¥ç™»å½•ï¼Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§ã€‚</p>
<h4 data-id="heading-6">æ­¥éª¤</h4>
<ol>
<li>å¤‡ä»½å¹¶ç¼–è¾‘ SSH é…ç½®æ–‡ä»¶ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cp</span> /etc/ssh/sshd_config /etc/ssh/sshd_config.bak &amp;&amp; sed -i <span class="hljs-string">'s/^#*PermitRootLogin.*/PermitRootLogin no/'</span> /etc/ssh/sshd_config
</code></pre>
<ol start="2">
<li>é‡å¯ SSH æœåŠ¡ä»¥åº”ç”¨æ›´æ”¹ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">systemctl restart ssh
</code></pre>
<h3 data-id="heading-7">3. ä¸‹ä¸€æ­¥å»ºè®®</h3>
<ul>
<li>é…ç½® SSH å¯†é’¥è®¤è¯ä»¥è¿›ä¸€æ­¥æé«˜å®‰å…¨æ€§ã€‚</li>
<li>ç¦ç”¨å¯†ç ç™»å½•ï¼ˆå¯é€‰ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-8">4. Dockerç®¡ç†</h3>
<h4 data-id="heading-9">æ­¥éª¤ 2ï¼šå°†ç”¨æˆ·æ·»åŠ åˆ°Â <code>docker</code>Â ç»„</h4>
<p>ä¸ºäº†è®©Â <code>lingdong</code>Â ç”¨æˆ·æ— éœ€ä½¿ç”¨Â <code>sudo</code>Â å³å¯ç®¡ç† Dockerï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ·»åŠ åˆ°Â <code>docker</code>Â ç»„ä¸­ã€‚</p>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†Â <code>lingdong</code>Â æ·»åŠ åˆ°Â <code>docker</code>Â ç»„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo usermod -aG docker lingdong
</code></pre>
<p>è¿™æ¡å‘½ä»¤ä¼šå°†ç”¨æˆ·Â <code>lingdong</code>Â æ·»åŠ åˆ°Â <code>docker</code>Â ç»„ã€‚å®Œæˆåï¼Œæ‚¨éœ€è¦é‡æ–°ç™»å½•æˆ–é‡å¯ç³»ç»Ÿä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Springä¸MyBatisæ•´åˆåŸç†åŠäº‹åŠ¡ç®¡ç†]]></title>    <link>https://juejin.cn/post/7601020578490499081</link>    <guid>https://juejin.cn/post/7601020578490499081</guid>    <pubDate>2026-01-31T06:12:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601020578490499081" data-draft-id="7600982613654683698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Springä¸MyBatisæ•´åˆåŸç†åŠäº‹åŠ¡ç®¡ç†"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-31T06:12:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Springä¸MyBatisæ•´åˆåŸç†åŠäº‹åŠ¡ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T06:12:08.000Z" title="Sat Jan 31 2026 06:12:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. æ•´åˆçš„ä¸‰ç§æ–¹å¼ï¼šä½ ç”¨çš„æ˜¯å“ªä¸€ç§ï¼Ÿ</h3>
<h4 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.1 ä¼ ç»ŸXMLé…ç½®ï¼šæœ€ç»å…¸ä¹Ÿæœ€å¤æ‚</h4>
<p>å…ˆçœ‹çœ‹æœ€ä¼ ç»Ÿçš„æ•´åˆæ–¹å¼ï¼Œç°åœ¨è¿˜æœ‰å¾ˆå¤šè€é¡¹ç›®åœ¨ç”¨ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- applicationContext.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">"http://www.springframework.org/schema/context"</span>
       <span class="hljs-attr">xmlns:tx</span>=<span class="hljs-string">"http://www.springframework.org/schema/tx"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 1. æ•°æ®æº --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.url}"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.username}"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.password}"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 2. SqlSessionFactory --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sqlSessionFactory"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"dataSource"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"mapperLocations"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"classpath:mapper/*.xml"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"configLocation"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"classpath:mybatis-config.xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 3. äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"transactionManager"</span> 
          <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"dataSource"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 4. å¼€å¯æ³¨è§£äº‹åŠ¡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tx:annotation-driven</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">"transactionManager"</span>/&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 5. Mapperæ‰«æ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"basePackage"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.example.mapper"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"sqlSessionFactoryBeanName"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"sqlSessionFactory"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
    
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
AIå†™ä»£ç XML
</code></pre>
<p><em>ä»£ç æ¸…å•1ï¼šä¼ ç»ŸSpring+MyBatis XMLé…ç½®</em></p>
<p><strong>é—®é¢˜</strong>ï¼šé…ç½®ç¹çï¼Œå®¹æ˜“å‡ºé”™ï¼Œä¾èµ–é¡ºåºå¾ˆé‡è¦ã€‚</p>
<h4 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.2 æ³¨è§£é…ç½®ï¼šSpring JavaConfig</h4>
<p>Spring 3.0ä¹‹åï¼Œæ¨èç”¨JavaConfigï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
<span class="hljs-variable">@ComponentScan</span>(<span class="hljs-string">"com.example"</span>)
<span class="hljs-variable">@EnableTransactionManagement</span>
<span class="hljs-variable">@MapperScan</span>(<span class="hljs-string">"com.example.mapper"</span>)
public class AppConfig {
    
    <span class="hljs-variable">@Bean</span>
    public DataSource <span class="hljs-built_in">dataSource</span>() {
        <span class="hljs-selector-tag">DruidDataSource</span> <span class="hljs-selector-tag">ds</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">DruidDataSource</span>();
        <span class="hljs-selector-tag">ds</span><span class="hljs-selector-class">.setUrl</span>(env.<span class="hljs-built_in">getProperty</span>(<span class="hljs-string">"jdbc.url"</span>));
        <span class="hljs-selector-tag">ds</span><span class="hljs-selector-class">.setUsername</span>(env.<span class="hljs-built_in">getProperty</span>(<span class="hljs-string">"jdbc.username"</span>));
        <span class="hljs-selector-tag">ds</span><span class="hljs-selector-class">.setPassword</span>(env.<span class="hljs-built_in">getProperty</span>(<span class="hljs-string">"jdbc.password"</span>));
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ds</span>;
    }
    
    @<span class="hljs-selector-tag">Bean</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">SqlSessionFactory</span> <span class="hljs-selector-tag">sqlSessionFactory</span>(DataSource dataSource) <span class="hljs-selector-tag">throws</span> <span class="hljs-selector-tag">Exception</span> {
        <span class="hljs-selector-tag">SqlSessionFactoryBean</span> <span class="hljs-selector-tag">factoryBean</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">SqlSessionFactoryBean</span>();
        <span class="hljs-selector-tag">factoryBean</span><span class="hljs-selector-class">.setDataSource</span>(dataSource);
        <span class="hljs-selector-tag">factoryBean</span><span class="hljs-selector-class">.setMapperLocations</span>(
            new <span class="hljs-built_in">PathMatchingResourcePatternResolver</span>()
                .<span class="hljs-built_in">getResources</span>(<span class="hljs-string">"classpath:mapper/*.xml"</span>)
        );
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">factoryBean</span><span class="hljs-selector-class">.getObject</span>();
    }
    
    @<span class="hljs-selector-tag">Bean</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">PlatformTransactionManager</span> <span class="hljs-selector-tag">transactionManager</span>(DataSource dataSource) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">DataSourceTransactionManager</span>(dataSource);
    }
}
<span class="hljs-selector-tag">AI</span>å†™ä»£ç <span class="hljs-selector-tag">java</span>
è¿è¡Œ
</code></pre>
<p><em>ä»£ç æ¸…å•2ï¼šJavaConfigé…ç½®æ–¹å¼</em></p>
<p><strong>ä¼˜ç‚¹</strong>ï¼šç±»å‹å®‰å…¨ï¼ŒIDEå‹å¥½ï¼Œä¸å®¹æ˜“é…ç½®é”™ã€‚</p>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.3 Spring Bootè‡ªåŠ¨é…ç½®ï¼šæœ€ç®€å•</h4>
<p>ç°åœ¨æœ€æµè¡Œçš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/test</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">20</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">5</span>
 
<span class="hljs-attr">mybatis:</span>
  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/*.xml</span>
  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.example.model</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
<span class="hljs-string">AIå†™ä»£ç </span>
</code></pre>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@SpringBootApplication</span>
<span class="hljs-variable">@MapperScan</span>(<span class="hljs-string">"com.example.mapper"</span>)
public class Application {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(Application.class, args);
    }
}
<span class="hljs-selector-tag">AI</span>å†™ä»£ç <span class="hljs-selector-tag">java</span>
è¿è¡Œ
</code></pre>
<p><em>ä»£ç æ¸…å•3ï¼šSpring Bootè‡ªåŠ¨é…ç½®</em></p>
<p><strong>ä½†é—®é¢˜æ¥äº†</strong>ï¼šè¿™ä¹ˆç®€å•çš„é…ç½®èƒŒåï¼ŒSpring Bootåˆ°åº•å¹²äº†ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. æ•´åˆçš„æ ¸å¿ƒï¼šSqlSessionç®¡ç†</h3>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.1 ä¸ºä»€ä¹ˆéœ€è¦SqlSessionTemplateï¼Ÿ</h4>
<p>åœ¨çº¯MyBatisä¸­ï¼Œæˆ‘ä»¬è¿™æ ·ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ä¼ ç»ŸMyBatisç”¨æ³•
try (SqlSession <span class="hljs-attr">session</span> = sqlSessionFactory.openSession()) {
    UserMapper <span class="hljs-attr">mapper</span> = session.getMapper(UserMapper.class)<span class="hljs-comment">;</span>
    User <span class="hljs-attr">user</span> = mapper.findById(<span class="hljs-number">1</span>L)<span class="hljs-comment">;</span>
    session.commit()<span class="hljs-comment">;</span>
}
AIå†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ol>
<li>éœ€è¦æ‰‹åŠ¨ç®¡ç†SqlSessionç”Ÿå‘½å‘¨æœŸ</li>
<li>äº‹åŠ¡ç®¡ç†å¤æ‚</li>
<li>çº¿ç¨‹ä¸å®‰å…¨</li>
</ol>
<p>Springçš„è§£å†³æ–¹æ¡ˆï¼š<strong>SqlSessionTemplate</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-title">implements</span> <span class="hljs-title">UserDao</span> {
    
    <span class="hljs-comment">// ç›´æ¥æ³¨å…¥SqlSessionTemplate</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SqlSessionTemplate sqlSessionTemplate;
    
    <span class="hljs-keyword">public</span> User findById(<span class="hljs-built_in">Long</span> id) {
        <span class="hljs-comment">// ä¸ç”¨å…³å¿ƒSqlSessionçš„åˆ›å»ºå’Œå…³é—­</span>
        <span class="hljs-keyword">return</span> sqlSessionTemplate.selectOne(
            <span class="hljs-string">"com.example.mapper.UserMapper.findById"</span>, id);
    }
}
AIå†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><em>ä»£ç æ¸…å•4ï¼šä½¿ç”¨SqlSessionTemplate</em></p>
<h4 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.2 SqlSessionTemplateçš„çº¿ç¨‹å®‰å…¨è®¾è®¡</h4>
<p>è¿™æ˜¯Springæ•´åˆMyBatisæœ€ç²¾å¦™çš„è®¾è®¡ã€‚çœ‹æºç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SqlSessionTemplate</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SqlSession</span>, DisposableBean {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SqlSessionFactory sqlSessionFactory;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ExecutorType executorType;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SqlSession sqlSessionProxy;  <span class="hljs-comment">// å…³é”®ï¼šåŠ¨æ€ä»£ç†</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SqlSessionTemplate</span><span class="hljs-params">(SqlSessionFactory sqlSessionFactory)</span> {
        <span class="hljs-built_in">this</span>(sqlSessionFactory, sqlSessionFactory.getConfiguration()
            .getDefaultExecutorType());
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SqlSessionTemplate</span><span class="hljs-params">(SqlSessionFactory sqlSessionFactory, ExecutorType executorType)</span> {
        <span class="hljs-built_in">this</span>.sqlSessionFactory = sqlSessionFactory;
        <span class="hljs-built_in">this</span>.executorType = executorType;
        
        <span class="hljs-comment">// åˆ›å»ºåŠ¨æ€ä»£ç†</span>
        <span class="hljs-built_in">this</span>.sqlSessionProxy = (SqlSession) Proxy.newProxyInstance(
            SqlSessionFactory.class.getClassLoader(),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>[] { SqlSession.class },
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionInterceptor</span>()  <span class="hljs-comment">// å…³é”®ï¼šæ‹¦æˆªå™¨</span>
        );
    }
    
    <span class="hljs-comment">// æ‰€æœ‰SqlSessionæ–¹æ³•éƒ½å§”æ‰˜ç»™ä»£ç†</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">selectOne</span><span class="hljs-params">(String statement)</span> {
        <span class="hljs-keyword">return</span> sqlSessionProxy.selectOne(statement);
    }
    
    <span class="hljs-comment">// å†…éƒ¨æ‹¦æˆªå™¨ç±»</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SqlSessionInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InvocationHandler</span> {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable {
            <span class="hljs-comment">// å…³é”®ï¼šæ¯æ¬¡è°ƒç”¨éƒ½è·å–æ–°çš„SqlSession</span>
            <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> getSqlSession(
                sqlSessionFactory, executorType, EXCEPTION);
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> method.invoke(sqlSession, args);
                <span class="hljs-comment">// ä¸æäº¤äº‹åŠ¡ï¼ç”±Springäº‹åŠ¡ç®¡ç†å™¨æ§åˆ¶</span>
                <span class="hljs-keyword">return</span> result;
            } <span class="hljs-keyword">catch</span> (Throwable t) {
                <span class="hljs-comment">// å¼‚å¸¸å¤„ç†...</span>
                <span class="hljs-keyword">throw</span> ExceptionUtil.unwrapThrowable(t);
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-comment">// å…³é—­SqlSession</span>
                closeSqlSession(sqlSession, sqlSessionFactory);
            }
        }
    }
    
    <span class="hljs-comment">// è·å–SqlSessionï¼šä¸å½“å‰äº‹åŠ¡å…³è”</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title function_">getSqlSession</span><span class="hljs-params">(SqlSessionFactory sessionFactory, 
                                          ExecutorType executorType, 
                                          PersistenceExceptionTranslator exceptionTranslator)</span> {
        
        <span class="hljs-comment">// å…³é”®ï¼šæ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯å¦å·²æœ‰SqlSession</span>
        <span class="hljs-type">SqlSessionHolder</span> <span class="hljs-variable">holder</span> <span class="hljs-operator">=</span> (SqlSessionHolder) TransactionSynchronizationManager
            .getResource(sessionFactory);
        
        <span class="hljs-keyword">if</span> (holder != <span class="hljs-literal">null</span> &amp;&amp; holder.isSynchronizedWithTransaction()) {
            <span class="hljs-keyword">if</span> (holder.getExecutorType() != executorType) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransientDataAccessResourceException</span>(
                    <span class="hljs-string">"Cannot change ExecutorType when there is an existing transaction"</span>);
            }
            
            <span class="hljs-comment">// å¢åŠ å¼•ç”¨è®¡æ•°</span>
            holder.requested();
            <span class="hljs-keyword">return</span> holder.getSqlSession();
        }
        
        <span class="hljs-comment">// æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ›å»ºæ–°çš„SqlSession</span>
        <span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession(executorType);
        
        <span class="hljs-comment">// æ³¨å†Œåˆ°äº‹åŠ¡åŒæ­¥ç®¡ç†å™¨</span>
        registerSessionHolder(sessionFactory, executorType, exceptionTranslator, session);
        
        <span class="hljs-keyword">return</span> session;
    }
}
AIå†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><em>ä»£ç æ¸…å•5ï¼šSqlSessionTemplateæ ¸å¿ƒæºç </em></p>
<p>ç”¨å›¾æ¥è¡¨ç¤ºæ›´æ¸…æ¥šï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/201c9b495ece4ad3a591188b70a10283~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770444728&amp;x-signature=WzlgGv5D7quzycxeTmsiYX7UVVo%3D" alt="" loading="lazy"/></p>
<p><em>å›¾1ï¼šSqlSessionTemplateæ‰§è¡Œæµç¨‹</em></p>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ol>
<li>ç”¨åŠ¨æ€ä»£ç†æ‹¦æˆªæ‰€æœ‰æ–¹æ³•è°ƒç”¨</li>
<li>æ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½å¯èƒ½åˆ›å»ºæ–°SqlSession</li>
<li>äº‹åŠ¡æœŸé—´å¤ç”¨åŒä¸€ä¸ªSqlSession</li>
<li>äº‹åŠ¡ç»“æŸåè‡ªåŠ¨å…³é—­SqlSession</li>
</ol>
<h4 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.3 æ€§èƒ½å½±å“æµ‹è¯•</h4>
<p>è¿™ä¹ˆå¤æ‚çš„æœºåˆ¶ï¼Œæ€§èƒ½å½±å“å¤§å—ï¼Ÿæˆ‘åšäº†æµ‹è¯•ï¼š</p>
<p><strong>æµ‹è¯•åœºæ™¯</strong>ï¼šå•çº¿ç¨‹æ‰§è¡Œ1000æ¬¡æŸ¥è¯¢</p>





























<table><thead><tr><th>ä½¿ç”¨æ–¹å¼</th><th>æ€»è€—æ—¶(ms)</th><th>å¹³å‡è€—æ—¶(ms)</th><th>SqlSessionåˆ›å»ºæ¬¡æ•°</th></tr></thead><tbody><tr><td>åŸç”ŸMyBatis</td><td>1250</td><td>1.25</td><td>1</td></tr><tr><td>SqlSessionTemplate(æ— äº‹åŠ¡)</td><td>1450</td><td>1.45</td><td>1000</td></tr><tr><td>SqlSessionTemplate(æœ‰äº‹åŠ¡)</td><td>1320</td><td>1.32</td><td>1</td></tr></tbody></table>
<p><strong>ç»“è®º</strong>ï¼š</p>
<ol>
<li>æ— äº‹åŠ¡æ—¶ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºSqlSessionï¼Œæ€§èƒ½æŸå¤±çº¦16%</li>
<li>æœ‰äº‹åŠ¡æ—¶ï¼Œå¤ç”¨SqlSessionï¼Œæ€§èƒ½æ¥è¿‘åŸç”Ÿ</li>
<li>ç”Ÿäº§ç¯å¢ƒå¤§éƒ¨åˆ†æ“ä½œåœ¨äº‹åŠ¡ä¸­ï¼Œæ€§èƒ½å½±å“å¯æ¥å—</li>
</ol>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3. Mapperæ¥å£çš„è‡ªåŠ¨æ³¨å†Œ</h3>
<h4 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.1 @MapperScanæ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</h4>
<p>å¾ˆå¤šäººç”¨<code>@MapperScan</code>ï¼Œä½†ä¸çŸ¥é“å®ƒå¹²äº†ä»€ä¹ˆã€‚çœ‹æºç ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)
<span class="hljs-variable">@Target</span>(ElementType.TYPE)
<span class="hljs-variable">@Import</span>(MapperScannerRegistrar.class)  <span class="hljs-comment">// å…³é”®ï¼šå¯¼å…¥é…ç½®ç±»</span>
<span class="hljs-variable">@Repeatable</span>(MapperScans.class)
public <span class="hljs-variable">@interface</span> MapperScan {
    <span class="hljs-selector-tag">String</span><span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">value</span>() <span class="hljs-selector-tag">default</span> {};
    <span class="hljs-selector-tag">String</span><span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">basePackages</span>() <span class="hljs-selector-tag">default</span> {};
    <span class="hljs-selector-tag">Class</span>&lt;?&gt;<span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">basePackageClasses</span>() <span class="hljs-selector-tag">default</span> {};
    <span class="hljs-comment">// ...</span>
}
 
<span class="hljs-comment">// é…ç½®ç±»</span>
<span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">MapperScannerRegistrar</span> <span class="hljs-selector-tag">implements</span> <span class="hljs-selector-tag">ImportBeanDefinitionRegistrar</span> {
    
    <span class="hljs-variable">@Override</span>
    public void <span class="hljs-built_in">registerBeanDefinitions</span>(AnnotationMetadata importingClassMetadata, 
                                      BeanDefinitionRegistry registry) {
        
        <span class="hljs-comment">// è§£æ@MapperScanæ³¨è§£</span>
        <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">annotationAttributes</span> = <span class="hljs-selector-tag">importingClassMetadata</span>
            <span class="hljs-selector-class">.getAnnotationAttributes</span>(MapperScan.class.<span class="hljs-built_in">getName</span>());
        
        <span class="hljs-comment">// åˆ›å»ºæ‰«æå™¨é…ç½®</span>
        <span class="hljs-selector-tag">BeanDefinitionBuilder</span> <span class="hljs-selector-tag">builder</span> = <span class="hljs-selector-tag">BeanDefinitionBuilder</span>
            <span class="hljs-selector-class">.genericBeanDefinition</span>(MapperScannerConfigurer.class);
        
        <span class="hljs-comment">// è®¾ç½®æ‰«æåŒ…</span>
        <span class="hljs-selector-tag">builder</span><span class="hljs-selector-class">.addPropertyValue</span>(<span class="hljs-string">"basePackage"</span>, 
            StringUtils.<span class="hljs-built_in">arrayToCommaDelimitedString</span>((String[]) 
                annotationAttributes.<span class="hljs-built_in">get</span>(<span class="hljs-string">"basePackages"</span>)));
        
        <span class="hljs-comment">// æ³¨å†ŒBean</span>
        <span class="hljs-selector-tag">registry</span><span class="hljs-selector-class">.registerBeanDefinition</span>(
            MapperScannerConfigurer.class.<span class="hljs-built_in">getName</span>(), 
            builder.<span class="hljs-built_in">getBeanDefinition</span>());
    }
}
<span class="hljs-selector-tag">AI</span>å†™ä»£ç <span class="hljs-selector-tag">java</span>
è¿è¡Œ
</code></pre>
<p><em>ä»£ç æ¸…å•6ï¼š@MapperScanå·¥ä½œåŸç†</em></p>
<h4 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.2 MapperScannerConfigurerï¼šæ‰«æå™¨çš„æ ¸å¿ƒ</h4>
<p>çœŸæ­£å¹²æ´»çš„æ˜¯<code>MapperScannerConfigurer</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapperScannerConfigurer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanDefinitionRegistryPostProcessor</span>, <span class="hljs-title class_">InitializingBean</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> basePackage;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">SqlSessionFactory</span> sqlSessionFactory;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">SqlSessionTemplate</span> sqlSessionTemplate;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">postProcessBeanDefinitionRegistry</span>(<span class="hljs-params">BeanDefinitionRegistry registry</span>) {
        <span class="hljs-comment">// åˆ›å»ºClassPathæ‰«æå™¨</span>
        <span class="hljs-title class_">ClassPathMapperScanner</span> scanner = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathMapperScanner</span>(registry);
        
        <span class="hljs-comment">// è®¾ç½®è¿‡æ»¤æ¡ä»¶ï¼šåªæ‰«ææ¥å£</span>
        scanner.<span class="hljs-title function_">setAnnotationClass</span>(<span class="hljs-title class_">Mapper</span>.<span class="hljs-property">class</span>);
        scanner.<span class="hljs-title function_">registerFilters</span>();
        
        <span class="hljs-comment">// è®¾ç½®SqlSessionFactory</span>
        <span class="hljs-keyword">if</span> (sqlSessionFactory != <span class="hljs-literal">null</span>) {
            scanner.<span class="hljs-title function_">setSqlSessionFactory</span>(sqlSessionFactory);
        }
        <span class="hljs-keyword">if</span> (sqlSessionTemplate != <span class="hljs-literal">null</span>) {
            scanner.<span class="hljs-title function_">setSqlSessionTemplate</span>(sqlSessionTemplate);
        }
        
        <span class="hljs-comment">// æ‰«æå¹¶æ³¨å†Œ</span>
        scanner.<span class="hljs-title function_">scan</span>(<span class="hljs-title class_">StringUtils</span>.<span class="hljs-title function_">tokenizeToStringArray</span>(
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">basePackage</span>, <span class="hljs-title class_">ConfigurableApplicationContext</span>.<span class="hljs-property">CONFIG_LOCATION_DELIMITERS</span>));
    }
}
 
<span class="hljs-comment">// è‡ªå®šä¹‰æ‰«æå™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassPathMapperScanner</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">ClassPathBeanDefinitionScanner</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">BeanDefinitionHolder</span>&gt; <span class="hljs-title function_">doScan</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>... basePackages</span>) {
        <span class="hljs-comment">// 1. æ‰«æåŒ…ï¼Œè·å–Beanå®šä¹‰</span>
        <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">BeanDefinitionHolder</span>&gt; beanDefinitions = <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">doScan</span>(basePackages);
        
        <span class="hljs-keyword">if</span> (beanDefinitions.<span class="hljs-title function_">isEmpty</span>()) {
            logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"No MyBatis mapper was found..."</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// 2. å¤„ç†æ¯ä¸ªBeanå®šä¹‰</span>
            <span class="hljs-title function_">processBeanDefinitions</span>(beanDefinitions);
        }
        
        <span class="hljs-keyword">return</span> beanDefinitions;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">processBeanDefinitions</span>(<span class="hljs-params"><span class="hljs-built_in">Set</span>&lt;BeanDefinitionHolder&gt; beanDefinitions</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">BeanDefinitionHolder</span> holder : beanDefinitions) {
            <span class="hljs-title class_">GenericBeanDefinition</span> definition = (<span class="hljs-title class_">GenericBeanDefinition</span>) holder.<span class="hljs-title function_">getBeanDefinition</span>();
            
            <span class="hljs-comment">// 3. è®¾ç½®Beanç±»ä¸ºMapperFactoryBean</span>
            definition.<span class="hljs-title function_">setBeanClass</span>(<span class="hljs-title class_">MapperFactoryBean</span>.<span class="hljs-property">class</span>);
            
            <span class="hljs-comment">// 4. è®¾ç½®æ„é€ å‡½æ•°å‚æ•°ï¼šMapperæ¥å£</span>
            definition.<span class="hljs-title function_">getConstructorArgumentValues</span>()
                .<span class="hljs-title function_">addGenericArgumentValue</span>(definition.<span class="hljs-title function_">getBeanClassName</span>());
            
            <span class="hljs-comment">// 5. è®¾ç½®å±æ€§ï¼šSqlSessionFactory/SqlSessionTemplate</span>
            <span class="hljs-keyword">if</span> (sqlSessionFactory != <span class="hljs-literal">null</span>) {
                definition.<span class="hljs-title function_">getPropertyValues</span>()
                    .<span class="hljs-title function_">add</span>(<span class="hljs-string">"sqlSessionFactory"</span>, sqlSessionFactory);
            }
            <span class="hljs-keyword">if</span> (sqlSessionTemplate != <span class="hljs-literal">null</span>) {
                definition.<span class="hljs-title function_">getPropertyValues</span>()
                    .<span class="hljs-title function_">add</span>(<span class="hljs-string">"sqlSessionTemplate"</span>, sqlSessionTemplate);
            }
        }
    }
}
<span class="hljs-variable constant_">AI</span>å†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><em>ä»£ç æ¸…å•7ï¼šMapperScannerConfigureræ ¸å¿ƒé€»è¾‘</em></p>
<p>ç”¨å›¾è¡¨ç¤ºæ‰«æè¿‡ç¨‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/711ca95fd53a4055afaa3a85653070d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770444728&amp;x-signature=iuCbRfpNxDFsMzZOHKdKiu9TsDM%3D" alt="" loading="lazy"/></p>
<p><em>å›¾2ï¼šMapperæ¥å£æ‰«ææ³¨å†Œæµç¨‹</em></p>
<h4 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.3 MapperFactoryBeanï¼šMapperçš„å·¥å‚</h4>
<p>è¿™æ˜¯Springåˆ›å»ºMapperä»£ç†çš„å…³é”®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapperFactoryBean</span>&lt;T&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SqlSessionDaoSupport</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FactoryBean</span>&lt;T&gt; {
    
    <span class="hljs-keyword">private</span> Class&lt;T&gt; mapperInterface;
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">addToConfig</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MapperFactoryBean</span><span class="hljs-params">(Class&lt;T&gt; mapperInterface)</span> {
        <span class="hljs-built_in">this</span>.mapperInterface = mapperInterface;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">getObject</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// ä»SqlSessionTemplateè·å–Mapper</span>
        <span class="hljs-keyword">return</span> getSqlSession().getMapper(<span class="hljs-built_in">this</span>.mapperInterface);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Class&lt;T&gt; <span class="hljs-title function_">getObjectType</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.mapperInterface;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isSingleton</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkDaoConfig</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.checkDaoConfig();
        
        <span class="hljs-comment">// éªŒè¯é…ç½®</span>
        <span class="hljs-type">Configuration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> getSqlSession().getConfiguration();
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.addToConfig &amp;&amp; !configuration.hasMapper(<span class="hljs-built_in">this</span>.mapperInterface)) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// å°†Mapperæ·»åŠ åˆ°MyBatisé…ç½®</span>
                configuration.addMapper(<span class="hljs-built_in">this</span>.mapperInterface);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                logger.error(<span class="hljs-string">"Error while adding the mapper..."</span>, e);
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(e);
            }
        }
    }
}
AIå†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><em>ä»£ç æ¸…å•8ï¼šMapperFactoryBeanæ ¸å¿ƒä»£ç </em></p>
<h3 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4. Springäº‹åŠ¡ç®¡ç†åœ¨MyBatisä¸­çš„å®ç°</h3>
<h4 data-id="heading-13"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.1 äº‹åŠ¡ç®¡ç†å™¨é…ç½®</h4>
<p>è¿™æ˜¯æ•´åˆä¸­æœ€å®¹æ˜“å‡ºé”™çš„éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
<span class="hljs-variable">@EnableTransactionManagement</span>
public class TransactionConfig {
    
    <span class="hljs-variable">@Bean</span>
    public PlatformTransactionManager <span class="hljs-built_in">transactionManager</span>(DataSource dataSource) {
        <span class="hljs-comment">// å…³é”®ï¼šå¿…é¡»ç”¨DataSourceTransactionManager</span>
        <span class="hljs-selector-tag">DataSourceTransactionManager</span> <span class="hljs-selector-tag">tm</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">DataSourceTransactionManager</span>();
        <span class="hljs-selector-tag">tm</span><span class="hljs-selector-class">.setDataSource</span>(dataSource);
        
        <span class="hljs-comment">// å¯é€‰é…ç½®</span>
        <span class="hljs-selector-tag">tm</span><span class="hljs-selector-class">.setDefaultTimeout</span>(<span class="hljs-number">30</span>);  <span class="hljs-comment">// é»˜è®¤30ç§’è¶…æ—¶</span>
        <span class="hljs-selector-tag">tm</span><span class="hljs-selector-class">.setNestedTransactionAllowed</span>(true);  <span class="hljs-comment">// å…è®¸åµŒå¥—äº‹åŠ¡</span>
        <span class="hljs-selector-tag">tm</span><span class="hljs-selector-class">.setRollbackOnCommitFailure</span>(true);  <span class="hljs-comment">// æäº¤å¤±è´¥æ—¶å›æ»š</span>
        
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">tm</span>;
    }
}
<span class="hljs-selector-tag">AI</span>å†™ä»£ç <span class="hljs-selector-tag">java</span>
è¿è¡Œ
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯DataSourceTransactionManagerï¼Ÿ</strong></p>
<p>å› ä¸ºMyBatisåº•å±‚ç”¨çš„æ˜¯JDBCï¼Œè€Œ<code>DataSourceTransactionManager</code>æ˜¯Springä¸ºJDBCäº‹åŠ¡æä¾›çš„å®ç°ã€‚</p>
<h4 data-id="heading-14"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.2 äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºæµ‹è¯•</h4>
<p>Springçš„7ç§ä¼ æ’­è¡Œä¸ºåœ¨MyBatisä¸­è¡¨ç°å¦‚ä½•ï¼Ÿæˆ‘åšäº†æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRED)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">outerMethod</span><span class="hljs-params">()</span> {
        userMapper.insert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"user1"</span>));
        
        <span class="hljs-keyword">try</span> {
            innerMethod();  <span class="hljs-comment">// è°ƒç”¨å†…éƒ¨æ–¹æ³•</span>
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å¤„ç†å¼‚å¸¸</span>
        }
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">innerMethod</span><span class="hljs-params">()</span> {
        userMapper.insert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"user2"</span>));
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æµ‹è¯•å¼‚å¸¸"</span>);
    }
}
AIå†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><em>ä»£ç æ¸…å•9ï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸ºæµ‹è¯•</em></p>
<p><strong>æµ‹è¯•ç»“æœ</strong>ï¼š</p>













































<table><thead><tr><th>ä¼ æ’­è¡Œä¸º</th><th>ç»“æœ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>REQUIRED</td><td>user1æ’å…¥æˆåŠŸï¼Œuser2å›æ»š</td><td>åŒä¸€ä¸ªäº‹åŠ¡ï¼Œä¸€èµ·å›æ»š</td></tr><tr><td>REQUIRES_NEW</td><td>user1æ’å…¥æˆåŠŸï¼Œuser2å›æ»š</td><td>æ–°äº‹åŠ¡ï¼Œç‹¬ç«‹å›æ»š</td></tr><tr><td>NESTED</td><td>user1æ’å…¥æˆåŠŸï¼Œuser2å›æ»š</td><td>åµŒå¥—äº‹åŠ¡ï¼Œå¯éƒ¨åˆ†å›æ»š</td></tr><tr><td>SUPPORTS</td><td>æ— äº‹åŠ¡è¿è¡Œ</td><td>æ²¿ç”¨å½“å‰äº‹åŠ¡çŠ¶æ€</td></tr><tr><td>NOT_SUPPORTED</td><td>æŒ‚èµ·å½“å‰äº‹åŠ¡</td><td>æ— äº‹åŠ¡è¿è¡Œ</td></tr><tr><td>NEVER</td><td>æŠ›å‡ºå¼‚å¸¸</td><td>ä¸èƒ½åœ¨äº‹åŠ¡ä¸­è¿è¡Œ</td></tr><tr><td>MANDATORY</td><td>å¿…é¡»åœ¨äº‹åŠ¡ä¸­</td><td>å¦åˆ™æŠ›å¼‚å¸¸</td></tr></tbody></table>
<p><strong>æ³¨æ„</strong>ï¼šMySQLçš„InnoDBä¸æ”¯æŒçœŸæ­£çš„åµŒå¥—äº‹åŠ¡ï¼Œ<code>NESTED</code>ä¼šè¢«é™çº§ä¸º<code>REQUIRED</code>ã€‚</p>
<h4 data-id="heading-15"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.3 äº‹åŠ¡ä¸SqlSessionçš„ç»‘å®š</h4>
<p>è¿™æ˜¯ç†è§£äº‹åŠ¡æ•´åˆçš„å…³é”®ã€‚çœ‹æºç ï¼š</p>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DataSourceTransactionManager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractPlatformTransactionManager</span> </span>{
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">Object</span> doGetTransaction() {
        <span class="hljs-type">DataSourceTransactionObject</span> txObject = <span class="hljs-keyword">new</span> <span class="hljs-type">DataSourceTransactionObject</span>();
        
        <span class="hljs-comment">// è·å–å½“å‰è¿æ¥</span>
        <span class="hljs-type">ConnectionHolder</span> conHolder = (<span class="hljs-type">ConnectionHolder</span>) 
            <span class="hljs-type">TransactionSynchronizationManager</span>.getResource(<span class="hljs-keyword">this</span>.dataSource);
        
        txObject.setConnectionHolder(conHolder, <span class="hljs-literal">false</span>);
        <span class="hljs-keyword">return</span> txObject;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> void doBegin(<span class="hljs-type">Object</span> transaction, <span class="hljs-type">TransactionDefinition</span> definition) {
        <span class="hljs-type">DataSourceTransactionObject</span> txObject = (<span class="hljs-type">DataSourceTransactionObject</span>) transaction;
        
        <span class="hljs-type">Connection</span> con = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è·å–æ•°æ®åº“è¿æ¥</span>
            con = <span class="hljs-keyword">this</span>.dataSource.getConnection();
            
            <span class="hljs-comment">// è®¾ç½®äº‹åŠ¡å±æ€§</span>
            con.setAutoCommit(<span class="hljs-literal">false</span>);
            con.setTransactionIsolation(definition.getIsolationLevel());
            
            <span class="hljs-comment">// ç»‘å®šåˆ°å½“å‰çº¿ç¨‹</span>
            <span class="hljs-type">ConnectionHolder</span> holder = <span class="hljs-keyword">new</span> <span class="hljs-type">ConnectionHolder</span>(con);
            holder.setSynchronizedWithTransaction(<span class="hljs-literal">true</span>);
            
            <span class="hljs-type">TransactionSynchronizationManager</span>.bindResource(
                <span class="hljs-keyword">this</span>.dataSource, holder);
            
            txObject.setConnectionHolder(holder);
            
        } <span class="hljs-keyword">catch</span> (<span class="hljs-type">Throwable</span> ex) {
            <span class="hljs-comment">// æ¸…ç†èµ„æº</span>
            <span class="hljs-type">DataSourceUtils</span>.releaseConnection(con, <span class="hljs-keyword">this</span>.dataSource);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">CannotCreateTransactionException</span>(<span class="hljs-string">"Could not open JDBC Connection"</span>, ex);
        }
    }
}
<span class="hljs-type">AI</span>å†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><em>ä»£ç æ¸…å•10ï¼šDataSourceTransactionManageräº‹åŠ¡ç»‘å®š</em></p>
<p>åœ¨MyBatisä¸­ï¼ŒSqlSessionä¼šä½¿ç”¨è¿™ä¸ªç»‘å®šçš„è¿æ¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">public static SqlSession getSqlSession(SqlSessionFactory sessionFactory, 
                                      ExecutorType executorType, 
                                      PersistenceExceptionTranslator exceptionTranslator) {
    
    // æ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯å¦å·²ç»‘å®šè¿æ¥
    ConnectionHolder <span class="hljs-attr">holder</span> = (ConnectionHolder) 
        TransactionSynchronizationManager.getResource(sessionFactory)<span class="hljs-comment">;</span>
    
    if (holder != null) {
        // æœ‰äº‹åŠ¡ï¼Œä½¿ç”¨äº‹åŠ¡ä¸­çš„è¿æ¥åˆ›å»ºSqlSession
        SqlSession <span class="hljs-attr">session</span> = holder.getSqlSession()<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">session</span> == null) {
            <span class="hljs-attr">session</span> = sessionFactory.openSession(executorType)<span class="hljs-comment">;</span>
            holder.setSqlSession(session)<span class="hljs-comment">;</span>
        }
        return session<span class="hljs-comment">;</span>
    }
    
    // æ— äº‹åŠ¡ï¼Œåˆ›å»ºæ–°çš„SqlSession
    return sessionFactory.openSession(executorType)<span class="hljs-comment">;</span>
}
AIå†™ä»£ç java
è¿è¡Œ
</code></pre>
<p>ç”¨å›¾è¡¨ç¤ºäº‹åŠ¡ã€è¿æ¥ã€SqlSessionçš„å…³ç³»ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21bd4821ca0949eb858aae087a89685c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770444728&amp;x-signature=nM7YPnt78d3pAFgL4Iy7NtZ%2BAQU%3D" alt="" loading="lazy"/></p>
<p><em>å›¾3ï¼šäº‹åŠ¡ä¸è¿æ¥ç»‘å®šå…³ç³»</em></p>
<h3 data-id="heading-16"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5. æ•´åˆä¸­çš„æ€§èƒ½é™·é˜±ä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-17"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.1 è¿æ¥æ± é…ç½®ä¸å½“</h4>
<p>æˆ‘è§è¿‡æœ€å¤šçš„æ€§èƒ½é—®é¢˜å°±æ˜¯è¿æ¥æ± é…ç½®ä¸å¯¹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># é”™è¯¯é…ç½®</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">100</span>  <span class="hljs-comment"># å¤ªå¤§ï¼Œæµªè´¹èµ„æº</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">50</span>        <span class="hljs-comment"># å¤ªå¤§ï¼Œå¯åŠ¨æ…¢</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>  <span class="hljs-comment"># å¤ªé•¿</span>
 
<span class="hljs-comment"># æ­£ç¡®é…ç½®ï¼ˆæ ¹æ®å®é™…è´Ÿè½½è°ƒæ•´ï¼‰</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">20</span>   <span class="hljs-comment"># æ ¹æ®CPUæ ¸å¿ƒæ•°*2-4</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">5</span>         <span class="hljs-comment"># å°ä¸€ç‚¹ï¼ŒæŒ‰éœ€åˆ›å»º</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">5000</span>  <span class="hljs-comment"># 5ç§’è¶…æ—¶</span>
      <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>    <span class="hljs-comment"># 10åˆ†é’Ÿç©ºé—²è¶…æ—¶</span>
      <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>   <span class="hljs-comment"># 30åˆ†é’Ÿæœ€å¤§ç”Ÿå‘½å‘¨æœŸ</span>
      <span class="hljs-attr">leak-detection-threshold:</span> <span class="hljs-number">30000</span>  <span class="hljs-comment"># 30ç§’æ³„éœ²æ£€æµ‹</span>
<span class="hljs-string">AIå†™ä»£ç </span>
</code></pre>
<p><strong>æ€§èƒ½æµ‹è¯•æ•°æ®</strong>ï¼ˆ100å¹¶å‘æŸ¥è¯¢ï¼‰ï¼š</p>



































<table><thead><tr><th>è¿æ¥æ± å¤§å°</th><th>QPS</th><th>å¹³å‡å“åº”æ—¶é—´(ms)</th><th>è¿æ¥ä½¿ç”¨ç‡</th></tr></thead><tbody><tr><td>10</td><td>850</td><td>45</td><td>100%</td></tr><tr><td>20</td><td>1550</td><td>32</td><td>75%</td></tr><tr><td>50</td><td>1600</td><td>31</td><td>40%</td></tr><tr><td>100</td><td>1620</td><td>30</td><td>20%</td></tr></tbody></table>
<p><strong>ç»“è®º</strong>ï¼šè¿æ¥æ± ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œ20-50æ˜¯æ¯”è¾ƒåˆç†çš„èŒƒå›´ã€‚</p>
<h4 data-id="heading-18"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.2 ä¸€çº§ç¼“å­˜å¤±æ•ˆé—®é¢˜</h4>
<p>åœ¨Springæ•´åˆMyBatisä¸­ï¼Œä¸€çº§ç¼“å­˜å¾ˆå®¹æ˜“å¤±æ•ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡æŸ¥è¯¢</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> userMapper.findById(id);  <span class="hljs-comment">// æŸ¥æ•°æ®åº“</span>
        
        <span class="hljs-comment">// ä¸­é—´æœ‰å…¶ä»–æ“ä½œ</span>
        doSomething();
        
        <span class="hljs-comment">// ç¬¬äºŒæ¬¡æŸ¥è¯¢</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> userMapper.findById(id);  <span class="hljs-comment">// æœŸæœ›ä»ç¼“å­˜è·å–</span>
        
        <span class="hljs-keyword">return</span> user2;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doSomething</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¦‚æœè¿™é‡Œæ‰§è¡Œäº†insert/update/delete</span>
        userMapper.updateSomething();  <span class="hljs-comment">// ä¼šå¯¼è‡´ä¸€çº§ç¼“å­˜æ¸…ç©ºï¼</span>
    }
}
AIå†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>åˆç†å®‰æ’æ–¹æ³•é¡ºåº</li>
<li>ä½¿ç”¨äºŒçº§ç¼“å­˜</li>
<li>åœ¨Serviceå±‚åšç¼“å­˜</li>
</ol>
<h4 data-id="heading-19"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.3 æ‰¹é‡æ“ä½œæ€§èƒ½ä¼˜åŒ–</h4>
<p>æ‰¹é‡æ“ä½œæ˜¯æ€§èƒ½ä¼˜åŒ–çš„é‡ç‚¹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">@Service
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BatchService</span> {
    
    <span class="hljs-comment">// é”™è¯¯ï¼šæ¯æ¬¡insertéƒ½æäº¤</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">batchInsertWrong</span>(<span class="hljs-params">List&lt;User&gt; users</span>)</span> {
        <span class="hljs-keyword">for</span> (User user : users) {
            userMapper.insert(user);  <span class="hljs-comment">// æ¯æ¬¡éƒ½æœ‰äº‹åŠ¡å¼€é”€</span>
        }
    }
    
    <span class="hljs-comment">// æ­£ç¡®ï¼šä½¿ç”¨æ‰¹é‡æ¨¡å¼</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">batchInsertRight</span>(<span class="hljs-params">List&lt;User&gt; users</span>)</span> {
        <span class="hljs-comment">// ä½¿ç”¨Batchæ‰§è¡Œå™¨</span>
        SqlSessionTemplate template = <span class="hljs-keyword">new</span> SqlSessionTemplate(
            sqlSessionFactory, ExecutorType.BATCH);
        
        UserMapper mapper = template.getMapper(UserMapper.<span class="hljs-keyword">class</span>);
        
        <span class="hljs-keyword">for</span> (User user : users) {
            mapper.insert(user);
        }
        
        <span class="hljs-comment">// æ‰‹åŠ¨æäº¤</span>
        template.commit();
    }
    
    <span class="hljs-comment">// æ›´ä¼˜ï¼šä½¿ç”¨MyBatisçš„foreach</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">batchInsertBest</span>(<span class="hljs-params">List&lt;User&gt; users</span>)</span> {
        userMapper.batchInsert(users);  <span class="hljs-comment">// ä¸€æ¬¡æ’å…¥å¤šæ¡</span>
    }
}
 
<span class="hljs-comment">// Mapperä¸­çš„æ‰¹é‡æ’å…¥</span>
&lt;insert id=<span class="hljs-string">"batchInsert"</span> parameterType=<span class="hljs-string">"list"</span>&gt;
    <span class="hljs-function">INSERT INTO <span class="hljs-title">users</span> (<span class="hljs-params">name, email</span>) VALUES
    &lt;<span class="hljs-keyword">foreach</span> collection</span>=<span class="hljs-string">"list"</span> item=<span class="hljs-string">"user"</span> separator=<span class="hljs-string">","</span>&gt;
        (<span class="hljs-meta">#{user.name}, #{user.email})</span>
    &lt;/<span class="hljs-keyword">foreach</span>&gt;
&lt;/insert&gt;
AIå†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><em>ä»£ç æ¸…å•11ï¼šæ‰¹é‡æ“ä½œä¼˜åŒ–</em></p>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼ˆæ’å…¥1000æ¡è®°å½•ï¼‰ï¼š</p>





























<table><thead><tr><th>æ–¹å¼</th><th>è€—æ—¶(ms)</th><th>å†…å­˜å ç”¨</th><th>æ¨èæŒ‡æ•°</th></tr></thead><tbody><tr><td>å¾ªç¯å•æ¡æ’å…¥</td><td>1250</td><td>ä½</td><td>â­</td></tr><tr><td>Batchæ‰§è¡Œå™¨</td><td>350</td><td>ä¸­</td><td>â­â­â­</td></tr><tr><td>foreachæ‰¹é‡æ’å…¥</td><td>120</td><td>é«˜</td><td>â­â­â­â­â­</td></tr></tbody></table>
<h3 data-id="heading-20"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6. å¤šæ•°æ®æºæ•´åˆ</h3>
<h4 data-id="heading-21"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6.1 å¤šæ•°æ®æºé…ç½®</h4>
<p>ä¼ä¸šçº§åº”ç”¨ç»å¸¸éœ€è¦å¤šæ•°æ®æºï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
public class DataSourceConfig {
    
    <span class="hljs-variable">@Bean</span>(name = <span class="hljs-string">"primaryDataSource"</span>)
    <span class="hljs-variable">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource.primary"</span>)
    public DataSource <span class="hljs-built_in">primaryDataSource</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">DataSourceBuilder</span><span class="hljs-selector-class">.create</span>()<span class="hljs-selector-class">.build</span>();
    }
    
    @<span class="hljs-selector-tag">Bean</span>(name = <span class="hljs-string">"secondaryDataSource"</span>)
    @<span class="hljs-selector-tag">ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource.secondary"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">DataSource</span> <span class="hljs-selector-tag">secondaryDataSource</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">DataSourceBuilder</span><span class="hljs-selector-class">.create</span>()<span class="hljs-selector-class">.build</span>();
    }
    
    @<span class="hljs-selector-tag">Bean</span>(name = <span class="hljs-string">"primarySqlSessionFactory"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">SqlSessionFactory</span> <span class="hljs-selector-tag">primarySqlSessionFactory</span>(
            <span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"primaryDataSource"</span>) DataSource dataSource) <span class="hljs-selector-tag">throws</span> <span class="hljs-selector-tag">Exception</span> {
        <span class="hljs-selector-tag">SqlSessionFactoryBean</span> <span class="hljs-selector-tag">factoryBean</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">SqlSessionFactoryBean</span>();
        <span class="hljs-selector-tag">factoryBean</span><span class="hljs-selector-class">.setDataSource</span>(dataSource);
        <span class="hljs-selector-tag">factoryBean</span><span class="hljs-selector-class">.setMapperLocations</span>(
            new <span class="hljs-built_in">PathMatchingResourcePatternResolver</span>()
                .<span class="hljs-built_in">getResources</span>(<span class="hljs-string">"classpath:mapper/primary/*.xml"</span>));
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">factoryBean</span><span class="hljs-selector-class">.getObject</span>();
    }
    
    @<span class="hljs-selector-tag">Bean</span>(name = <span class="hljs-string">"secondarySqlSessionFactory"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">SqlSessionFactory</span> <span class="hljs-selector-tag">secondarySqlSessionFactory</span>(
            <span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"secondaryDataSource"</span>) DataSource dataSource) <span class="hljs-selector-tag">throws</span> <span class="hljs-selector-tag">Exception</span> {
        <span class="hljs-selector-tag">SqlSessionFactoryBean</span> <span class="hljs-selector-tag">factoryBean</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">SqlSessionFactoryBean</span>();
        <span class="hljs-selector-tag">factoryBean</span><span class="hljs-selector-class">.setDataSource</span>(dataSource);
        <span class="hljs-selector-tag">factoryBean</span><span class="hljs-selector-class">.setMapperLocations</span>(
            new <span class="hljs-built_in">PathMatchingResourcePatternResolver</span>()
                .<span class="hljs-built_in">getResources</span>(<span class="hljs-string">"classpath:mapper/secondary/*.xml"</span>));
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">factoryBean</span><span class="hljs-selector-class">.getObject</span>();
    }
    
    <span class="hljs-comment">// äº‹åŠ¡ç®¡ç†å™¨ä¹Ÿè¦é…å¤šä¸ª</span>
    @<span class="hljs-selector-tag">Bean</span>(name = <span class="hljs-string">"primaryTransactionManager"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">PlatformTransactionManager</span> <span class="hljs-selector-tag">primaryTransactionManager</span>(
            <span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"primaryDataSource"</span>) DataSource dataSource) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">DataSourceTransactionManager</span>(dataSource);
    }
    
    @<span class="hljs-selector-tag">Bean</span>(name = <span class="hljs-string">"secondaryTransactionManager"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">PlatformTransactionManager</span> <span class="hljs-selector-tag">secondaryTransactionManager</span>(
            <span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"secondaryDataSource"</span>) DataSource dataSource) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">DataSourceTransactionManager</span>(dataSource);
    }
}
<span class="hljs-selector-tag">AI</span>å†™ä»£ç <span class="hljs-selector-tag">java</span>
è¿è¡Œ
</code></pre>
<p><em>ä»£ç æ¸…å•12ï¼šå¤šæ•°æ®æºé…ç½®</em></p>
<h4 data-id="heading-22"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6.2 åŠ¨æ€æ•°æ®æºåˆ‡æ¢</h4>
<p>æ›´å¤æ‚çš„åœºæ™¯éœ€è¦åŠ¨æ€åˆ‡æ¢æ•°æ®æºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. å®šä¹‰åŠ¨æ€æ•°æ®æº</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicDataSource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">AbstractRoutingDataSource</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">determineCurrentLookupKey</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">DataSourceContextHolder</span>.<span class="hljs-title function_">getDataSource</span>();
    }
}
 
<span class="hljs-comment">// 2. æ•°æ®æºä¸Šä¸‹æ–‡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceContextHolder</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-title class_">ThreadLocal</span>&lt;<span class="hljs-title class_">String</span>&gt; contextHolder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setDataSource</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> dataSource</span>) {
        contextHolder.<span class="hljs-title function_">set</span>(dataSource);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getDataSource</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> contextHolder.<span class="hljs-title function_">get</span>();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">clearDataSource</span>(<span class="hljs-params"/>) {
        contextHolder.<span class="hljs-title function_">remove</span>();
    }
}
 
<span class="hljs-comment">// 3. è‡ªå®šä¹‰æ³¨è§£</span>
<span class="hljs-meta">@Target</span>({<span class="hljs-title class_">ElementType</span>.<span class="hljs-property">METHOD</span>, <span class="hljs-title class_">ElementType</span>.<span class="hljs-property">TYPE</span>})
<span class="hljs-meta">@Retention</span>(<span class="hljs-title class_">RetentionPolicy</span>.<span class="hljs-property">RUNTIME</span>)
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> <span class="hljs-title class_">DataSource</span> {
    <span class="hljs-title class_">String</span> <span class="hljs-title function_">value</span>() <span class="hljs-keyword">default</span> <span class="hljs-string">"primary"</span>;
}
 
<span class="hljs-comment">// 4. åˆ‡é¢å®ç°åˆ‡æ¢</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceAspect</span> {
    
    <span class="hljs-meta">@Around</span>(<span class="hljs-string">"@annotation(dataSource)"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">around</span>(<span class="hljs-title class_">ProceedingJoinPoint</span> joinPoint, <span class="hljs-title class_">DataSource</span> dataSource) throws <span class="hljs-title class_">Throwable</span> {
        <span class="hljs-title class_">String</span> oldDataSource = <span class="hljs-title class_">DataSourceContextHolder</span>.<span class="hljs-title function_">getDataSource</span>();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-title class_">DataSourceContextHolder</span>.<span class="hljs-title function_">setDataSource</span>(dataSource.<span class="hljs-title function_">value</span>());
            <span class="hljs-keyword">return</span> joinPoint.<span class="hljs-title function_">proceed</span>();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (oldDataSource != <span class="hljs-literal">null</span>) {
                <span class="hljs-title class_">DataSourceContextHolder</span>.<span class="hljs-title function_">setDataSource</span>(oldDataSource);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-title class_">DataSourceContextHolder</span>.<span class="hljs-title function_">clearDataSource</span>();
            }
        }
    }
}
<span class="hljs-variable constant_">AI</span>å†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><em>ä»£ç æ¸…å•13ï¼šåŠ¨æ€æ•°æ®æºåˆ‡æ¢</em></p>
<h3 data-id="heading-23"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7. äº‹åŠ¡å¤±æ•ˆçš„å¸¸è§åœºæ™¯</h3>
<h4 data-id="heading-24"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7.1 è‡ªè°ƒç”¨é—®é¢˜</h4>
<p>è¿™æ˜¯æœ€å¸¸è§çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
        <span class="hljs-comment">// è‡ªè°ƒç”¨ï¼Œäº‹åŠ¡å¤±æ•ˆï¼</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateAndSave</span>(user);
    }
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">validateAndSave</span>(<span class="hljs-params">User user</span>) {
        <span class="hljs-comment">// äº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆ</span>
        validator.<span class="hljs-title function_">validate</span>(user);
        userMapper.<span class="hljs-title function_">insert</span>(user);
    }
}
<span class="hljs-variable constant_">AI</span>å†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šæ³¨å…¥è‡ªå·±</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserService</span> self;  <span class="hljs-comment">// æ³¨å…¥ä»£ç†å¯¹è±¡</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
        self.<span class="hljs-title function_">validateAndSave</span>(user);  <span class="hljs-comment">// é€šè¿‡ä»£ç†è°ƒç”¨</span>
    }
}
 
<span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šæ‹†åˆ†Service</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserTransactionService</span> transactionService;
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
        transactionService.<span class="hljs-title function_">validateAndSave</span>(user);
    }
}
 
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserTransactionService</span> {
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">validateAndSave</span>(<span class="hljs-params">User user</span>) {
        <span class="hljs-comment">// äº‹åŠ¡ç”Ÿæ•ˆ</span>
    }
}
<span class="hljs-variable constant_">AI</span>å†™ä»£ç java
è¿è¡Œ
</code></pre>
<h4 data-id="heading-25"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7.2 å¼‚å¸¸ç±»å‹ä¸åŒ¹é…</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-meta">@Transactional</span>  <span class="hljs-comment">// é»˜è®¤åªå›æ»šRuntimeException</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">"ä¸šåŠ¡å¼‚å¸¸"</span>);  <span class="hljs-comment">// ä¸ä¼šå›æ»šï¼</span>
    }
}
AIå†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><strong>æ­£ç¡®åšæ³•</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-comment">// ç°åœ¨ä»»ä½•å¼‚å¸¸éƒ½ä¼šå›æ»š</span>
}
AIå†™ä»£ç java
è¿è¡Œ
</code></pre>
<h4 data-id="heading-26"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7.3 æ–¹æ³•ä¿®é¥°ç¬¦é—®é¢˜</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">internalSave</span>(<span class="hljs-params">User user</span>) {  <span class="hljs-comment">// ç§æœ‰æ–¹æ³•ï¼Œäº‹åŠ¡å¤±æ•ˆï¼</span>
        userMapper.<span class="hljs-title function_">insert</span>(user);
    }
}
<span class="hljs-variable constant_">AI</span>å†™ä»£ç java
è¿è¡Œ
</code></pre>
<p><strong>åŸå› </strong>ï¼šSpring AOPåŸºäºä»£ç†ï¼Œåªèƒ½ä»£ç†publicæ–¹æ³•ã€‚</p>
<h3 data-id="heading-27"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8. æ€§èƒ½ç›‘æ§ä¸è°ƒä¼˜</h3>
<h4 data-id="heading-28"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8.1 ç›‘æ§æŒ‡æ ‡é…ç½®</h4>
<p>ç”Ÿäº§ç¯å¢ƒå¿…é¡»ç›‘æ§ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">health,metrics,prometheus</span>
  <span class="hljs-attr">metrics:</span>
    <span class="hljs-attr">export:</span>
      <span class="hljs-attr">prometheus:</span>
        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">tags:</span>
      <span class="hljs-attr">application:</span> <span class="hljs-string">${spring.application.name}</span>
      
<span class="hljs-comment"># è‡ªå®šä¹‰ç›‘æ§</span>
<span class="hljs-attr">mybatis:</span>
  <span class="hljs-attr">metrics:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">log-slow-sql:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">slow-sql-threshold:</span> <span class="hljs-number">1000</span>
<span class="hljs-string">AIå†™ä»£ç </span>
</code></pre>
<h4 data-id="heading-29"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8.2 å…³é”®ç›‘æ§æŒ‡æ ‡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisMetrics</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MeterRegistry meterRegistry;
    
    <span class="hljs-comment">// SQLæ‰§è¡Œç»Ÿè®¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Timer sqlTimer;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Counter sqlErrorCounter;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyBatisMetrics</span><span class="hljs-params">(MeterRegistry meterRegistry)</span> {
        <span class="hljs-built_in">this</span>.meterRegistry = meterRegistry;
        
        sqlTimer = Timer.builder(<span class="hljs-string">"mybatis.sql.duration"</span>)
            .description(<span class="hljs-string">"SQLæ‰§è¡Œè€—æ—¶"</span>)
            .publishPercentiles(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.95</span>, <span class="hljs-number">0.99</span>)  <span class="hljs-comment">// 50%, 95%, 99%åˆ†ä½</span>
            .register(meterRegistry);
        
        sqlErrorCounter = Counter.builder(<span class="hljs-string">"mybatis.sql.errors"</span>)
            .description(<span class="hljs-string">"SQLæ‰§è¡Œé”™è¯¯æ¬¡æ•°"</span>)
            .register(meterRegistry);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordSqlExecution</span><span class="hljs-params">(<span class="hljs-type">long</span> duration, <span class="hljs-type">boolean</span> success)</span> {
        sqlTimer.record(duration, TimeUnit.MILLISECONDS);
        
        <span class="hljs-keyword">if</span> (!success) {
            sqlErrorCounter.increment();
        }
    }
}
AIå†™ä»£ç java
è¿è¡Œ
</code></pre>
<h4 data-id="heading-30"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8.3Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fso.csdn.net%2Fso%2Fsearch%3Fq%3D%25E6%2585%25A2SQL%26spm%3D1001.2101.3001.7020" target="_blank" title="https://so.csdn.net/so/search?q=%E6%85%A2SQL&amp;spm=1001.2101.3001.7020" ref="nofollow noopener noreferrer">æ…¢SQL</a>ç›‘æ§</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Intercepts</span>({
    <span class="hljs-variable">@Signature</span>(type = StatementHandler.class, 
               method = <span class="hljs-string">"query"</span>, 
               args = {Statement.class, ResultHandler.class})
})
<span class="hljs-variable">@Component</span>
<span class="hljs-variable">@Slf4j</span>
public class SlowSqlInterceptor implements Interceptor {
    
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">final</span> <span class="hljs-selector-tag">long</span> <span class="hljs-selector-tag">SLOW_SQL_THRESHOLD</span> = <span class="hljs-number">1000</span>;  <span class="hljs-comment">// 1ç§’</span>
    
    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Object</span> <span class="hljs-selector-tag">intercept</span>(Invocation invocation) <span class="hljs-selector-tag">throws</span> <span class="hljs-selector-tag">Throwable</span> {
        <span class="hljs-selector-tag">long</span> <span class="hljs-selector-tag">startTime</span> = <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.currentTimeMillis</span>();
        
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">invocation</span><span class="hljs-selector-class">.proceed</span>();
        } <span class="hljs-selector-tag">finally</span> {
            <span class="hljs-selector-tag">long</span> <span class="hljs-selector-tag">costTime</span> = <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.currentTimeMillis</span>() <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">startTime</span>;
            
            <span class="hljs-selector-tag">if</span> (costTime &gt; SLOW_SQL_THRESHOLD) {
                <span class="hljs-selector-tag">StatementHandler</span> <span class="hljs-selector-tag">handler</span> = (StatementHandler) <span class="hljs-selector-tag">invocation</span><span class="hljs-selector-class">.getTarget</span>();
                <span class="hljs-selector-tag">BoundSql</span> <span class="hljs-selector-tag">boundSql</span> = <span class="hljs-selector-tag">handler</span><span class="hljs-selector-class">.getBoundSql</span>();
                
                <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.warn</span>(<span class="hljs-string">"æ…¢SQLæ£€æµ‹ - è€—æ—¶: {}ms, SQL: {}, å‚æ•°: {}"</span>, 
                    costTime, boundSql.<span class="hljs-built_in">getSql</span>(), boundSql.<span class="hljs-built_in">getParameterObject</span>());
                
                <span class="hljs-comment">// å‘é€å‘Šè­¦</span>
                <span class="hljs-selector-tag">alertSlowSql</span>(boundSql.<span class="hljs-built_in">getSql</span>(), costTime);
            }
        }
    }
}
<span class="hljs-selector-tag">AI</span>å†™ä»£ç <span class="hljs-selector-tag">java</span>
è¿è¡Œ
</code></pre>
<h3 data-id="heading-31"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>9. ä¼ä¸šçº§æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-32"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>9.1 æˆ‘çš„"æ•´åˆé…ç½®å†›è§„"</h4>
<p>ç»è¿‡å¤šå¹´å®è·µï¼Œæˆ‘æ€»ç»“äº†ä¸€å¥—æœ€ä½³å®è·µï¼š</p>
<h5 data-id="heading-33">ğŸ“œ ç¬¬ä¸€æ¡ï¼šæ˜ç¡®æ•°æ®æºé…ç½®</h5>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒå¿…é¡»ç”¨è¿æ¥æ± ï¼ˆHikariCPï¼‰</li>
<li>æ ¹æ®å®é™…è´Ÿè½½è°ƒæ•´è¿æ¥æ•°</li>
<li>å¼€å¯ç›‘æ§å’Œæ³„éœ²æ£€æµ‹</li>
</ul>
<h5 data-id="heading-34">ğŸ“œ ç¬¬äºŒæ¡ï¼šåˆç†ä½¿ç”¨äº‹åŠ¡</h5>
<ul>
<li>äº‹åŠ¡è¦çŸ­å°ï¼Œä¸è¦åœ¨äº‹åŠ¡ä¸­åšRPCè°ƒç”¨</li>
<li>æ˜ç¡®æŒ‡å®šå›æ»šå¼‚å¸¸ç±»å‹</li>
<li>åˆç†è®¾ç½®äº‹åŠ¡è¶…æ—¶æ—¶é—´</li>
</ul>
<h5 data-id="heading-35">ğŸ“œ ç¬¬ä¸‰æ¡ï¼šç›‘æ§åˆ°ä½</h5>
<ul>
<li>ç›‘æ§SQLæ‰§è¡Œæ—¶é—´</li>
<li>ç›‘æ§è¿æ¥æ± ä½¿ç”¨æƒ…å†µ</li>
<li>è®¾ç½®æ…¢SQLå‘Šè­¦</li>
</ul>
<h5 data-id="heading-36">ğŸ“œ ç¬¬å››æ¡ï¼šä»£ç è§„èŒƒ</h5>
<ul>
<li>Mapperæ¥å£è¦æœ‰@Repositoryæˆ–@Mapperæ³¨è§£</li>
<li>SQLå†™åœ¨XMLä¸­ï¼Œå¤æ‚çš„ç”¨åŠ¨æ€SQL</li>
<li>ä½¿ç”¨resultMapæ˜ç¡®æ˜ å°„å…³ç³»</li>
</ul>
<h5 data-id="heading-37">ğŸ“œ ç¬¬äº”æ¡ï¼šæµ‹è¯•å……åˆ†</h5>
<ul>
<li>å•å…ƒæµ‹è¯•è¦è¦†ç›–äº‹åŠ¡åœºæ™¯</li>
<li>é›†æˆæµ‹è¯•è¦éªŒè¯å¤šæ•°æ®æº</li>
<li>æ€§èƒ½æµ‹è¯•è¦æ¨¡æ‹Ÿç”Ÿäº§è´Ÿè½½</li>
</ul>
<h4 data-id="heading-38"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>9.2 ç”Ÿäº§ç¯å¢ƒé…ç½®æ¨¡æ¿</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application-prod.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">com.zaxxer.hikari.HikariDataSource</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://${DB_HOST:localhost}:3306/${DB_NAME}?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">${DB_USER}</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">${DB_PASSWORD}</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">pool-name:</span> <span class="hljs-string">HikariPool</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">20</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">5</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">5000</span>
      <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
      <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
      <span class="hljs-attr">connection-test-query:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span>
      <span class="hljs-attr">leak-detection-threshold:</span> <span class="hljs-number">30000</span>
      
<span class="hljs-attr">mybatis:</span>
  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/**/*.xml</span>
  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.example.model</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">cache-enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">lazy-loading-enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">aggressive-lazy-loading:</span> <span class="hljs-literal">false</span>
    <span class="hljs-attr">default-statement-timeout:</span> <span class="hljs-number">30</span>
    
<span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">health,metrics,prometheus</span>
  <span class="hljs-attr">metrics:</span>
    <span class="hljs-attr">export:</span>
      <span class="hljs-attr">prometheus:</span>
        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
<span class="hljs-string">AIå†™ä»£ç </span>
</code></pre>
<h3 data-id="heading-39"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>10. æ•…éšœæ’æŸ¥æŒ‡å—</h3>
<h4 data-id="heading-40"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>10.1 å¸¸è§é—®é¢˜æ’æŸ¥æ¸…å•</h4>
<h5 data-id="heading-41">é—®é¢˜1ï¼šäº‹åŠ¡ä¸ç”Ÿæ•ˆ</h5>
<ol>
<li>æ£€æŸ¥æ˜¯å¦é…ç½®äº†<code>@EnableTransactionManagement</code></li>
<li>æ£€æŸ¥æ–¹æ³•æ˜¯å¦æ˜¯public</li>
<li>æ£€æŸ¥æ˜¯å¦è‡ªè°ƒç”¨</li>
<li>æ£€æŸ¥å¼‚å¸¸ç±»å‹æ˜¯å¦åŒ¹é…</li>
</ol>
<h5 data-id="heading-42">é—®é¢˜2ï¼šè¿æ¥æ³„éœ²</h5>
<ol>
<li>æ£€æŸ¥æ˜¯å¦åœ¨äº‹åŠ¡å¤–ä½¿ç”¨äº†SqlSession</li>
<li>æ£€æŸ¥è¿æ¥æ± é…ç½®</li>
<li>ä½¿ç”¨Druidçš„ç›‘æ§ç•Œé¢æŸ¥çœ‹</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰æœªå…³é—­çš„ResultSet/Statement</li>
</ol>
<h5 data-id="heading-43">é—®é¢˜3ï¼šæ€§èƒ½ä¸‹é™</h5>
<ol>
<li>æ£€æŸ¥SQLæ˜¯å¦æœ‰å…¨è¡¨æ‰«æ</li>
<li>æ£€æŸ¥æ˜¯å¦ç¼ºå°‘ç´¢å¼•</li>
<li>æ£€æŸ¥è¿æ¥æ± æ˜¯å¦è¿‡å°</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰N+1æŸ¥è¯¢é—®é¢˜</li>
</ol>
<h4 data-id="heading-44"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>10.2 è°ƒè¯•æŠ€å·§</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å¼€å¯MyBatisæ—¥å¿—</span>
logging:
  level:
    com.example.mapper: DEBUG
    org.mybatis: DEBUG
    org.springframework.jdbc: DEBUG
 
<span class="hljs-comment">// æŸ¥çœ‹äº‹åŠ¡çŠ¶æ€</span>
@Component
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TransactionDebug</span> {
    
    @Autowired
    <span class="hljs-keyword">private</span> PlatformTransactionManager transactionManager;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">debugTransaction</span>()</span> {
        TransactionStatus status = transactionManager.getTransaction(
            <span class="hljs-keyword">new</span> DefaultTransactionDefinition());
        
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ˜¯å¦æ–°äº‹åŠ¡: "</span> + status.isNewTransaction());
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ˜¯å¦æœ‰ä¿å­˜ç‚¹: "</span> + status.hasSavepoint());
        
        transactionManager.commit(status);
    }
}
AIå†™ä»£ç 
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ vite-plugin-vue-devtools å®ç° IDE ä¸€é”®æ‰“å¼€é€‰ä¸­ç»„ä»¶]]></title>    <link>https://juejin.cn/post/7600982613654028338</link>    <guid>https://juejin.cn/post/7600982613654028338</guid>    <pubDate>2026-01-30T16:33:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600982613654028338" data-draft-id="7600955777316339750" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ vite-plugin-vue-devtools å®ç° IDE ä¸€é”®æ‰“å¼€é€‰ä¸­ç»„ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯,Vite"/> <meta itemprop="datePublished" content="2026-01-30T16:33:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LaLu"/> <meta itemprop="url" content="https://juejin.cn/user/739350236891191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ vite-plugin-vue-devtools å®ç° IDE ä¸€é”®æ‰“å¼€é€‰ä¸­ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/739350236891191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LaLu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T16:33:32.000Z" title="Fri Jan 30 2026 16:33:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä½¿ç”¨ vite-plugin-vue-devtools å®ç° IDE ä¸€é”®æ‰“å¼€é€‰ä¸­ç»„ä»¶</h2>
<blockquote>
<p>åœ¨ Vue é¡¹ç›®å¼€å‘ä¸­ï¼Œå¿«é€Ÿå®šä½ç»„ä»¶æºç æ˜¯æå‡å¼€å‘æ•ˆç‡çš„å…³é”®ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ <code>vite-plugin-vue-devtools</code> æ’ä»¶ï¼Œå®ç°åœ¨æµè§ˆå™¨ä¸­é€‰ä¸­ç»„ä»¶åä¸€é”®åœ¨ IDE ä¸­æ‰“å¼€å¯¹åº”æºç æ–‡ä»¶ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€èƒŒæ™¯ä¸ç—›ç‚¹</h3>
<p>å¤§å‹ Vue é¡¹ç›®ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>é¡µé¢ä¸Šæœ‰ä¸€ä¸ªç»„ä»¶éœ€è¦ä¿®æ”¹ï¼Œä½†ä¸çŸ¥é“å®ƒå¯¹åº”çš„æºæ–‡ä»¶åœ¨å“ªé‡Œ</li>
<li>é¡¹ç›®ç»„ä»¶å±‚çº§å¾ˆæ·±ï¼Œæ‰‹åŠ¨æŸ¥æ‰¾è´¹æ—¶è´¹åŠ›</li>
<li>æ–°æ¥æ‰‹é¡¹ç›®ï¼Œå¯¹ä»£ç ç»“æ„ä¸ç†Ÿæ‚‰</li>
</ul>
<p><strong>vite-plugin-vue-devtools</strong> æ­£æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„åˆ©å™¨ã€‚</p>
<h3 data-id="heading-2">äºŒã€vite-plugin-vue-devtoolsä½œç”¨</h3>
<p><code>vite-plugin-vue-devtools</code> æ˜¯ä¸€ä¸ªä¸º Vue 3 + Vite é¡¹ç›®è®¾è®¡çš„å¼€å‘å·¥å…·æ’ä»¶ï¼Œå®ƒæä¾›äº†ï¼š</p>
<ul>
<li>ğŸ“ <strong>ç»„ä»¶æ£€æŸ¥å™¨</strong>ï¼šåœ¨é¡µé¢ä¸Šæ‚¬åœ/ç‚¹å‡»ç»„ä»¶ï¼ŒæŸ¥çœ‹ç»„ä»¶ä¿¡æ¯</li>
<li>ğŸ”— <strong>ä¸€é”®è·³è½¬</strong>ï¼šç‚¹å‡»ç»„ä»¶ç›´æ¥åœ¨ IDE ä¸­æ‰“å¼€æºç æ–‡ä»¶</li>
<li>ğŸ“Š <strong>ç»„ä»¶æ ‘å¯è§†åŒ–</strong>ï¼šæŸ¥çœ‹ç»„ä»¶çš„å±‚çº§å…³ç³»</li>
<li>ğŸ”§ <strong>çŠ¶æ€è°ƒè¯•</strong>ï¼šå®æ—¶æŸ¥çœ‹å’Œä¿®æ”¹ç»„ä»¶çŠ¶æ€</li>
<li>âš¡ <strong>æ€§èƒ½åˆ†æ</strong>ï¼šåˆ†æç»„ä»¶æ¸²æŸ“æ€§èƒ½</li>
</ul>
<p>è¿™é‡ŒåªåšIDEè·³è½¬æ–‡ä»¶çš„åˆ†äº«</p>
<h3 data-id="heading-3">ä¸‰ã€å®‰è£…å’Œé…ç½®</h3>
<h4 data-id="heading-4">3.1 å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># npm</span>
npm install vite-plugin-vue-devtools -D

<span class="hljs-comment"># yarn</span>
yarn add vite-plugin-vue-devtools -D

<span class="hljs-comment"># pnpm</span>
pnpm add vite-plugin-vue-devtools -D
</code></pre>
<h4 data-id="heading-5">3.2 é…ç½® vite.config.js</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { fileURLToPath, <span class="hljs-variable constant_">URL</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:url'</span>

<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">VueDevTools</span>  <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-vue-devtools'</span>

<span class="hljs-comment">// https://vite.dev/config/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">vue</span>(),
    <span class="hljs-title class_">VueDevTools</span> ({
      <span class="hljs-attr">launchEditor</span>: <span class="hljs-string">'webstorm64'</span>, <span class="hljs-comment">//è¿™é‡Œå¾ˆå…³é”®ï¼Œwindowsä¸‹çœ‹IDEå®‰è£…ç›®å½•çš„exeæ–‡ä»¶å</span>
    }),
  ],
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'@'</span>: <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'./src'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>))
    },
  },
})
</code></pre>
<h4 data-id="heading-6">3.3 launchEditor æ”¯æŒçš„ç¼–è¾‘å™¨</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyyx990803%2Flaunch-editor%3Ftab%3Dreadme-ov-file%23supported-editors" target="_blank" title="https://github.com/yyx990803/launch-editor?tab=readme-ov-file#supported-editors" ref="nofollow noopener noreferrer">github.com/yyx990803/lâ€¦</a></p>
<h3 data-id="heading-7">å››ã€ä½¿ç”¨æ–¹æ³•</h3>
<h4 data-id="heading-8">4.1 å¯åŠ¨å¼€å‘æœåŠ¡å™¨</h4>
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
<p>å¯åŠ¨åï¼Œä½ ä¼šåœ¨é¡µé¢åº•éƒ¨çœ‹åˆ°ä¸€ä¸ª Vue DevTools çš„æ‚¬æµ®æŒ‰é’®ï¼Œç‚¹å‡»å®šä½å›¾æ ‡ï¼Œå°±å¯ä»¥ç›´æ¥é€‰ä¸­é¡µé¢ä¸Šçš„å…ƒç´ è·³è½¬IDEå¯¹åº”çš„æ–‡ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7d3d1ae094a4893b4dddb8683b77751~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFMdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770395612&amp;x-signature=vq451iBiFliRHaJXFmTodrXKsOo%3D" alt="PixPin_2026-01-31_00-24-38.gif" loading="lazy"/></p>
<h3 data-id="heading-9">äº”ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-10">5.1 ç‚¹å‡»ç»„ä»¶å IDE æ²¡æœ‰ååº”</h4>
<p><strong>å¯èƒ½åŸå› </strong>ï¼š</p>
<ol>
<li><code>launchEditor</code> é…ç½®çš„ç¼–è¾‘å™¨åç§°ä¸æ­£ç¡®</li>
<li>ç¼–è¾‘å™¨æ²¡æœ‰åŠ å…¥ç³»ç»Ÿç¯å¢ƒå˜é‡</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p>æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨å®Œæ•´è·¯å¾„</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">VueDevTools</span>({
  <span class="hljs-attr">launchEditor</span>: <span class="hljs-string">'C:\\Program Files\\JetBrains\\WebStorm\\bin\\webstorm64.exe'</span>,
})
</code></pre>
<p>æ–¹æ¡ˆäºŒï¼šæ£€æŸ¥ç¯å¢ƒå˜é‡
ç¡®ä¿åœ¨å‘½ä»¤è¡Œä¸­å¯ä»¥ç›´æ¥è¿è¡Œ webstorm64 æˆ– code å‘½ä»¤ï¼Œè¿™ä¸ªä¸»è¦çœ‹IDEåœ¨binç›®å½•ä¸‹exeå¯¹åº”çš„æ–‡ä»¶åå«ä»€ä¹ˆï¼Œä¾‹å¦‚æˆ‘çš„æ–‡ä»¶åæ˜¯webstorm64ï¼Œé…ç½®é‡Œé¢å°±å†™çš„å°±æ˜¯launchEditor: 'webstorm64'</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1252d6bd4454cf6a16fd656d8df711c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFMdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770395612&amp;x-signature=s8FK%2FQ1NuAtl4%2B65soc3B2FJ0Do%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-11">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fdevtools-next" target="_blank" title="https://github.com/vuejs/devtools-next" ref="nofollow noopener noreferrer">vite-plugin-vue-devtools GitHub</a></li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµè§ˆå™¨ç¼“å­˜ï¼šä»åº•å±‚åŸç†åˆ°æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7601028900886265902</link>    <guid>https://juejin.cn/post/7601028900886265902</guid>    <pubDate>2026-01-30T23:29:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601028900886265902" data-draft-id="7601169987395321907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµè§ˆå™¨ç¼“å­˜ï¼šä»åº•å±‚åŸç†åˆ°æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-30T23:29:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµè§ˆå™¨ç¼“å­˜ï¼šä»åº•å±‚åŸç†åˆ°æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T23:29:46.000Z" title="Fri Jan 30 2026 23:29:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç¼“å­˜æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒï¼Œä½†æˆ‘ä»¬çœŸçš„ç†è§£å„ç§ç¼“å­˜ä¹‹é—´çš„å…³ç³»å—ï¼Ÿæœ¬ç¯‡æ–‡ç« å°†å½»åº•è§£ææµè§ˆå™¨ç¼“å­˜æœºåˆ¶ï¼Œå¸®æˆ‘ä»¬å»ºç«‹å®Œæ•´çš„çŸ¥è¯†ä½“ç³»ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ç¼“å­˜å…¨æ™¯å›¾ï¼šä¸€å¼ å›¾çœ‹æ‡‚æ‰€æœ‰ç¼“å­˜å…³ç³»</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/945540c1c7194db1ae267ecc305c764c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3VoZW5fbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770420589&amp;x-signature=aY%2Bq3L4eLvFbDdyiDHGySAUDNHQ%3D" alt="ç¼“å­˜å…¨æ™¯å›¾" loading="lazy"/></p>
<h2 data-id="heading-1">HTTPç¼“å­˜ï¼šå¼ºç¼“å­˜ vs åå•†ç¼“å­˜</h2>
<p>HTTPç¼“å­˜æ˜¯æµè§ˆå™¨ç¼“å­˜ä½“ç³»çš„æ ¸å¿ƒï¼Œåˆ†ä¸ºä¸¤å¤§ç­–ç•¥ï¼š<strong>å¼ºç¼“å­˜</strong> å’Œ <strong>åå•†ç¼“å­˜</strong>ã€‚</p>
<h3 data-id="heading-2">å¼ºç¼“å­˜ï¼šæµè§ˆå™¨è‡ªä¸»å†³ç­–</h3>
<p>æµè§ˆå™¨æ£€æŸ¥æœ¬åœ°ç¼“å­˜æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ï¼Œè‹¥æœ‰æ•ˆåˆ™ç›´æ¥ä½¿ç”¨ï¼Œä¸å‘é€ä»»ä½•ç½‘ç»œè¯·æ±‚ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šæœåŠ¡å™¨è®¾ç½®ç¼“å­˜ç­–ç•¥</span>
GET /static/logo.png
HTTP/1.1 200 OK
Cache-Control: max-age=31536000, public
Expires: Mon, 01 Jan 2024 00:00:00 GMT

<span class="hljs-comment"># åç»­è¯·æ±‚ï¼šæµè§ˆå™¨è‡ªä¸»å†³ç­–ï¼ˆåœ¨æœ‰æ•ˆæœŸå†…ï¼‰</span>
GET /static/logo.png
<span class="hljs-comment"># æµè§ˆå™¨æ£€æŸ¥ï¼šmax-age=31536000 â†’ è¿˜æœ‰æ•ˆï¼</span>
<span class="hljs-comment"># ç›´æ¥ä»ç¼“å­˜è¿”å›ï¼Œä¸å‘é€ç½‘ç»œè¯·æ±‚</span>
</code></pre>
<h3 data-id="heading-3">åå•†ç¼“å­˜ï¼šæœåŠ¡ç«¯éªŒè¯</h3>
<p>å½“è¯·æ±‚èµ„æºæ—¶ï¼Œæµè§ˆå™¨æºå¸¦ç¼“å­˜æ ‡è¯†è¯¢é—®æœåŠ¡å™¨èµ„æºæ˜¯å¦å˜æ›´ï¼Œè‹¥æ²¡æœ‰å˜æ›´ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–èµ„æºã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šæœåŠ¡å™¨è¿”å›èµ„æºæ ‡è¯†</span>
GET /api/user/profile
HTTP/1.1 200 OK
ETag: <span class="hljs-string">"abc123xyz"</span>
Last-Modified: Wed, 21 Oct 2022 07:28:00 GMT
Cache-Control: no-cache

<span class="hljs-comment"># ç¬¬äºŒæ¬¡è¯·æ±‚ï¼šå¸¦ä¸Šæ ‡è¯†è¯¢é—®æœåŠ¡å™¨</span>
GET /api/user/profile
If-None-Match: <span class="hljs-string">"abc123xyz"</span>
If-Modified-Since: Wed, 21 Oct 2022 07:28:00 GMT

<span class="hljs-comment"># æœåŠ¡å™¨å“åº”</span>
HTTP/1.1 304 Not Modified
<span class="hljs-comment"># èµ„æºæœªå˜ï¼Œä½¿ç”¨æœ¬åœ°ç¼“å­˜</span>
</code></pre>
<h3 data-id="heading-4">å¼ºç¼“å­˜ vs åå•†ç¼“å­˜å¯¹æ¯”ï¼š</h3>













































<table><thead><tr><th>ç‰¹æ€§</th><th>å¼ºç¼“å­˜</th><th>åå•†ç¼“å­˜</th></tr></thead><tbody><tr><td>å†³ç­–æœºåˆ¶</td><td>æµè§ˆå™¨è‡ªå·±å†³å®š</td><td>æµè§ˆå™¨å’ŒæœåŠ¡å™¨åå•†</td></tr><tr><td>æ£€æŸ¥æ—¶æœº</td><td>ä¼˜å…ˆæ£€æŸ¥</td><td>å¼ºç¼“å­˜å¤±æ•ˆåæ£€æŸ¥</td></tr><tr><td>ç½‘ç»œè¯·æ±‚</td><td>å¯èƒ½å®Œå…¨ä¸å‘è¯·æ±‚</td><td>ä¸€å®šå‘é€è¯·æ±‚ï¼ˆéªŒè¯ï¼‰</td></tr><tr><td>å…¸å‹çŠ¶æ€ç </td><td>200 (from cache)</td><td>304 (Not Modified)</td></tr><tr><td>å“åº”é€Ÿåº¦</td><td>æå¿«ï¼ˆç›´æ¥æœ¬åœ°è¯»å–ï¼‰</td><td>è¾ƒæ…¢ï¼ˆéœ€è¦ç½‘ç»œå¾€è¿”ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç‰ˆæœ¬å›ºå®šçš„é™æ€èµ„æº</td><td>é¢‘ç¹æ›´æ–°çš„åŠ¨æ€èµ„æº</td></tr><tr><td>æ›´æ–°æ—¶æœº</td><td>ç¼“å­˜è¿‡æœŸæ—¶æ›´æ–°</td><td>æ¯æ¬¡è¯·æ±‚éƒ½éªŒè¯</td></tr></tbody></table>
<h2 data-id="heading-5">æµè§ˆå™¨ç¼“å­˜ï¼šMemory Cache vs Disk Cache</h2>
<h3 data-id="heading-6">Memory Cacheï¼šé«˜é€Ÿå†…å­˜ç¼“å­˜</h3>
<ul>
<li>ä½ç½®ï¼šæµè§ˆå™¨è¿›ç¨‹å†…å­˜ç©ºé—´</li>
<li>å®¹é‡ï¼šæœ‰é™ï¼Œä¾èµ–è®¾å¤‡å†…å­˜</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼šä¼šè¯çº§åˆ«ï¼Œæ ‡ç­¾é¡µå…³é—­åˆ™é‡Šæ”¾</li>
<li>ç‰¹ç‚¹ï¼šè¯»å–é€Ÿåº¦æå¿«ï¼ˆçº³ç§’çº§ï¼‰</li>
</ul>
<h4 data-id="heading-7">é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>å½“å‰é¡µé¢å·²åŠ è½½çš„èµ„æº</li>
<li>é¢„åŠ è½½çš„è„šæœ¬å’Œæ ·å¼</li>
<li>å°ä½“ç§¯çš„Base64å›¾ç‰‡</li>
</ul>
<h3 data-id="heading-8">Disk Cacheï¼šæŒä¹…åŒ–ç£ç›˜ç¼“å­˜</h3>
<ul>
<li>ä½ç½®ï¼šç”¨æˆ·ç£ç›˜çš„ç¼“å­˜ç›®å½•</li>
<li>å®¹é‡ï¼šè¾ƒå¤§ï¼ˆé€šå¸¸æ•°ç™¾MBåˆ°æ•°GBï¼‰</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼šé•¿æœŸæŒä¹…åŒ–</li>
<li>ç‰¹ç‚¹ï¼šè¯»å–é€Ÿåº¦è¾ƒæ…¢ï¼ˆæ¯«ç§’çº§ï¼‰ï¼Œä½†å®¹é‡å¤§</li>
</ul>
<h4 data-id="heading-9">é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>å¤§ä½“ç§¯é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€å­—ä½“ã€è§†é¢‘ï¼‰</li>
<li>è·¨ä¼šè¯å…±äº«çš„èµ„æº</li>
<li>ä½é¢‘è®¿é—®ä½†éœ€è¦æŒä¹…åŒ–çš„å†…å®¹</li>
</ul>
<h2 data-id="heading-10">Service Workerï¼šåº”ç”¨å±‚ç¼“å­˜æ§åˆ¶</h2>
<p><code>Service Worker</code> è¿è¡Œåœ¨æµè§ˆå™¨åå°ï¼Œä½œä¸º<strong>ä»£ç†æœåŠ¡å™¨</strong>ï¼Œèµ‹äºˆå¼€å‘è€…å®Œå…¨æ§åˆ¶ç¼“å­˜çš„èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-11">Service Worker ç¼“å­˜ç‰¹ç‚¹</h3>
<ol>
<li>ç‹¬ç«‹çº¿ç¨‹è¿è¡Œï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹</li>
<li>å®Œå…¨æ§åˆ¶ç½‘ç»œè¯·æ±‚ï¼Œå¯è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥</li>
<li>æ”¯æŒç¦»çº¿ä½“éªŒï¼Œæ˜¯PWAçš„æ ¸å¿ƒæŠ€æœ¯</li>
<li>ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹ï¼Œå¯é•¿æœŸç¼“å­˜èµ„æº</li>
</ol>
<h3 data-id="heading-12">Service Worker ç¼“å­˜ç­–ç•¥</h3>
<p>Service Worker ä½¿ç”¨çš„æ˜¯å…¸å‹çš„ç¼“å­˜ä¼˜å…ˆç­–ç•¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cachedResponse</span> =&gt;</span> {
        <span class="hljs-comment">// 1. ç¼“å­˜ä¼˜å…ˆ</span>
        <span class="hljs-keyword">if</span> (cachedResponse) {
          <span class="hljs-comment">// åå°æ›´æ–°ç¼“å­˜</span>
          event.<span class="hljs-title function_">waitUntil</span>(
            <span class="hljs-title function_">updateCache</span>(event.<span class="hljs-property">request</span>)
          );
          <span class="hljs-keyword">return</span> cachedResponse;
        }
        
        <span class="hljs-comment">// 2. ç½‘ç»œå›é€€</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>)
          .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">networkResponse</span> =&gt;</span> {
            <span class="hljs-comment">// ç¼“å­˜æ–°èµ„æº</span>
            <span class="hljs-keyword">return</span> <span class="hljs-title function_">cacheResponse</span>(event.<span class="hljs-property">request</span>, networkResponse);
          })
          .<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-comment">// 3. å›é€€åˆ°ç¦»çº¿é¡µé¢</span>
            <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(<span class="hljs-string">'/offline.html'</span>);
          });
      })
  );
});
</code></pre>
<h3 data-id="heading-13">Service Worker ä½¿ç”¨åœºæ™¯</h3>






























<table><thead><tr><th>åœºæ™¯</th><th>ç­–ç•¥</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>ç¦»çº¿åº”ç”¨</td><td>Cache-First + Network-Fallback</td><td>æä¾›å®Œæ•´çš„ç¦»çº¿ä½“éªŒ</td></tr><tr><td>æ€§èƒ½ä¼˜åŒ–</td><td>Stale-While-Revalidate</td><td>å¿«é€Ÿå“åº”+åå°æ›´æ–°</td></tr><tr><td>èµ„æºé¢„åŠ è½½</td><td>Precache + Runtime Caching</td><td>å‡å°‘å…³é”®èµ„æºåŠ è½½æ—¶é—´</td></tr><tr><td>ä¸å¯é ç½‘ç»œ</td><td>Network-First + Cache-Fallback</td><td>æå‡å¼±ç½‘ç¯å¢ƒä½“éªŒ</td></tr></tbody></table>
<h2 data-id="heading-14">ç¼“å­˜æŸ¥æ‰¾é¡ºåº</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchWithCache</span>(<span class="hljs-params">request</span>) {
  <span class="hljs-comment">// 1. Service Worker æ‹¦æˆªï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰</span>
  <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">serviceWorker</span>?.<span class="hljs-property">controller</span>) {
    <span class="hljs-keyword">const</span> swResponse = <span class="hljs-keyword">await</span> <span class="hljs-title function_">checkServiceWorkerCache</span>(request);
    <span class="hljs-keyword">if</span> (swResponse) <span class="hljs-keyword">return</span> swResponse;
  }
  
  <span class="hljs-comment">// 2. Memory Cache æ£€æŸ¥ï¼ˆæœ€å¿«è·¯å¾„ï¼‰</span>
  <span class="hljs-keyword">const</span> memoryCached = memoryCache.<span class="hljs-title function_">get</span>(request.<span class="hljs-property">url</span>);
  <span class="hljs-keyword">if</span> (memoryCached &amp;&amp; !<span class="hljs-title function_">isExpired</span>(memoryCached)) {
    <span class="hljs-title function_">reportCacheHit</span>(<span class="hljs-string">'memory'</span>);
    <span class="hljs-keyword">return</span> memoryCached;
  }
  
  <span class="hljs-comment">// 3. Disk Cache æ£€æŸ¥ï¼ˆå¼ºç¼“å­˜éªŒè¯ï¼‰</span>
  <span class="hljs-keyword">const</span> diskCached = <span class="hljs-keyword">await</span> <span class="hljs-title function_">checkDiskCache</span>(request);
  <span class="hljs-keyword">if</span> (diskCached) {
    <span class="hljs-keyword">if</span> (diskCached.<span class="hljs-property">cacheControl</span> === <span class="hljs-string">'immutable'</span> || 
        !<span class="hljs-title function_">isExpired</span>(diskCached)) {
      <span class="hljs-comment">// æ›´æ–° Memory Cache æå‡åç»­è®¿é—®é€Ÿåº¦</span>
      memoryCache.<span class="hljs-title function_">set</span>(request.<span class="hljs-property">url</span>, diskCached);
      <span class="hljs-title function_">reportCacheHit</span>(<span class="hljs-string">'disk'</span>);
      <span class="hljs-keyword">return</span> diskCached;
    }
  }
  
  <span class="hljs-comment">// 4. å‡†å¤‡ç½‘ç»œè¯·æ±‚ï¼ˆè®¾ç½®åå•†ç¼“å­˜å¤´ï¼‰</span>
  <span class="hljs-keyword">const</span> init = <span class="hljs-title function_">prepareRequest</span>(request);
  
  <span class="hljs-comment">// 5. å‘èµ·ç½‘ç»œè¯·æ±‚</span>
  <span class="hljs-keyword">let</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(request, init);
  
  <span class="hljs-comment">// 6. å¤„ç†å“åº”ï¼Œå†³å®šæ˜¯å¦ç¼“å­˜</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">shouldCache</span>(response)) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">cacheInLayers</span>(request, response.<span class="hljs-title function_">clone</span>());
  }
  
  <span class="hljs-keyword">return</span> response;
}

</code></pre>
<blockquote>
<ul>
<li>å¼ºç¼“å­˜èµ„æºï¼šå¯ä»¥åŒæ—¶å­˜åœ¨äºMemoryå’ŒDisk Cacheï¼Œæµè§ˆå™¨æ ¹æ®å¤§å°å’Œç±»å‹æ™ºèƒ½åˆ†é…</li>
<li>åå•†ç¼“å­˜èµ„æºï¼šä¸»è¦åœ¨Disk Cacheï¼ŒMemory Cacheå¯èƒ½ä¸å­˜å‚¨æˆ–çŸ­æœŸå­˜å‚¨</li>
<li>å¼€å‘è€…æ§åˆ¶ç­–ç•¥ï¼šé€šè¿‡HTTPå¤´æ§åˆ¶ç¼“å­˜ç­–ç•¥ï¼Œæµè§ˆå™¨è‡ªåŠ¨é€‰æ‹©å­˜å‚¨ä½ç½®</li>
<li>æ€§èƒ½è€ƒé‡ï¼šå°æ–‡ä»¶å¼ºç¼“å­˜ â†’ Memory Cacheæé€Ÿï¼›å¤§æ–‡ä»¶å¼ºç¼“å­˜ â†’ Disk CacheæŒä¹…</li>
</ul>
</blockquote>
<h2 data-id="heading-15">æœ¬åœ°å­˜å‚¨ä½“ç³»</h2>















































<table><thead><tr><th>å­˜å‚¨ç±»å‹</th><th>å®¹é‡</th><th>ç”Ÿå‘½å‘¨æœŸ</th><th>åŒæ­¥æ€§</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Cookie</td><td>4KB</td><td>å¯è®¾ç½®è¿‡æœŸæ—¶é—´</td><td>æ¯æ¬¡è¯·æ±‚è‡ªåŠ¨æºå¸¦</td><td>ç”¨æˆ·è®¤è¯ã€æœåŠ¡ç«¯çŠ¶æ€</td></tr><tr><td>LocalStorage</td><td>5-10MB</td><td>æ°¸ä¹…ï¼ˆé™¤éæ‰‹åŠ¨æ¸…é™¤ï¼‰</td><td>åŒæ­¥é˜»å¡</td><td>ç”¨æˆ·åå¥½ã€åº”ç”¨é…ç½®</td></tr><tr><td>SessionStorage</td><td>5-10MB</td><td>æ ‡ç­¾é¡µå…³é—­æ—¶æ¸…é™¤</td><td>åŒæ­¥é˜»å¡</td><td>è¡¨å•è‰ç¨¿ã€ä¸´æ—¶çŠ¶æ€</td></tr><tr><td>IndexedDB</td><td>æ•°ç™¾MB</td><td>æ°¸ä¹…</td><td>å¼‚æ­¥éé˜»å¡</td><td>å¤§é‡ç»“æ„åŒ–æ•°æ®</td></tr><tr><td>Cache API</td><td>ä¾èµ–è®¾å¤‡</td><td>Service Workeræ§åˆ¶</td><td>å¼‚æ­¥</td><td>ç½‘ç»œèµ„æºç¼“å­˜ã€PWA</td></tr></tbody></table>
<h2 data-id="heading-16">Chrome DevToolsä¸­çš„ç¼“å­˜æ ‡è¯†</h2>
<p>åœ¨Chromeå¼€å‘è€…å·¥å…·ä¸­ï¼Œä¸åŒç¼“å­˜æ¥æºæœ‰ä¸åŒçš„æ ‡è¯†ï¼š</p>









































<table><thead><tr><th>Sizeåˆ—æ˜¾ç¤º</th><th>çŠ¶æ€ç </th><th>å«ä¹‰</th><th>ç¼“å­˜æ¥æº</th></tr></thead><tbody><tr><td>(memory cache)</td><td>200</td><td>å†…å­˜ç¼“å­˜</td><td>Memory Cache</td></tr><tr><td>(disk cache)</td><td>200</td><td>ç£ç›˜ç¼“å­˜</td><td>Disk Cache</td></tr><tr><td>(ServiceWorker)</td><td>200</td><td>Service Workerç¼“å­˜</td><td>Service Worker Cache</td></tr><tr><td>æ–‡ä»¶å¤§å°</td><td>304</td><td>åå•†ç¼“å­˜ç”Ÿæ•ˆ</td><td>æœåŠ¡å™¨éªŒè¯é€šè¿‡</td></tr><tr><td>æ–‡ä»¶å¤§å°</td><td>200</td><td>æ–°è¯·æ±‚</td><td>ç½‘ç»œè·å–</td></tr></tbody></table>
<h2 data-id="heading-17">ç°ä»£æ¡†æ¶ä¸‹çš„ç¼“å­˜æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-18">Vue 3 + Vite ç¼“å­˜é…ç½®</h3>
<p><code>vite.config.js</code> ä¸­é…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">build</span>: {
    <span class="hljs-comment">// ç”Ÿæˆå¸¦hashçš„æ–‡ä»¶åï¼Œå®ç°é•¿æœŸç¼“å­˜</span>
    <span class="hljs-attr">rollupOptions</span>: {
      <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">entryFileNames</span>: <span class="hljs-string">'assets/[name]-[hash].js'</span>,
        <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">'assets/[name]-[hash].js'</span>,
        <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">'assets/[name]-[hash].[ext]'</span>
      }
    }
  },
  
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-comment">// å¼€å‘ç¯å¢ƒï¼šç¦ç”¨ç¼“å­˜</span>
      <span class="hljs-string">'Cache-Control'</span>: <span class="hljs-string">'no-store'</span>
    }
  }
});
</code></pre>
<p>ç”Ÿäº§ç¯å¢ƒ <code>Nginx</code> é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">server {
    <span class="hljs-comment"># HTMLæ–‡ä»¶ï¼šçŸ­ç¼“å­˜ + åå•†ç¼“å­˜</span>
    location = /index.html {
        add_header Cache-Control <span class="hljs-string">"public, max-age=300, must-revalidate"</span>;
    }
    
    <span class="hljs-comment"># å¸¦hashçš„é™æ€èµ„æºï¼šé•¿æœŸç¼“å­˜ + ä¸å¯å˜</span>
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff2)$ {
        <span class="hljs-comment"># åŒ¹é…å¸¦hashçš„æ–‡ä»¶å</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$request_uri</span> ~* <span class="hljs-string">"\.([0-9a-f]{8,})\.(js|css|png|jpg|jpeg|gif|ico|svg|woff2)$"</span>) {
            add_header Cache-Control <span class="hljs-string">"public, max-age=31536000, immutable"</span>;
        }
        <span class="hljs-comment"># æ— hashçš„èµ„æºä½¿ç”¨åå•†ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$request_uri</span> !~* <span class="hljs-string">"\.([0-9a-f]{8,})\.(js|css|png|jpg|jpeg|gif|ico|svg|woff2)$"</span>) {
            add_header Cache-Control <span class="hljs-string">"public, max-age=604800, must-revalidate"</span>;
        }
    }
    
    <span class="hljs-comment"># APIè¯·æ±‚ï¼šä¸ç¼“å­˜æˆ–çŸ­ç¼“å­˜</span>
    location /api/ {
        add_header Cache-Control <span class="hljs-string">"no-store, no-cache, must-revalidate"</span>;
        proxy_pass http://api-backend;
    }
}
</code></pre>
<h3 data-id="heading-19">React ç¼“å­˜ç­–ç•¥å»ºè®®</h3>
<p>ä½¿ç”¨ <code>React Query</code> è¿›è¡Œæ•°æ®ç¼“å­˜ç®¡ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useQuery, <span class="hljs-title class_">QueryClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tanstack/react-query'</span>;

<span class="hljs-keyword">const</span> queryClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryClient</span>({
  <span class="hljs-attr">defaultOptions</span>: {
    <span class="hljs-attr">queries</span>: {
      <span class="hljs-attr">staleTime</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 5åˆ†é’Ÿ</span>
      <span class="hljs-attr">cacheTime</span>: <span class="hljs-number">10</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 10åˆ†é’Ÿ</span>
      <span class="hljs-attr">retry</span>: <span class="hljs-number">1</span>,
    },
  },
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params">{ userId }</span>) {
  <span class="hljs-keyword">const</span> { data, isLoading } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'user'</span>, userId],
    <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetchUser</span>(userId),
    <span class="hljs-comment">// æ ¹æ®ç”¨æˆ·äº¤äº’å†³å®šç¼“å­˜ç­–ç•¥</span>
    <span class="hljs-attr">cacheTime</span>: userId ? <span class="hljs-number">15</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span> : <span class="hljs-number">0</span>, <span class="hljs-comment">// ç™»å½•ç”¨æˆ·ç¼“å­˜15åˆ†é’Ÿ</span>
  });
  
  <span class="hljs-comment">// é¢„åŠ è½½ç›¸å…³æ•°æ®</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">prefetchPosts</span> = (<span class="hljs-params"/>) =&gt; {
    queryClient.<span class="hljs-title function_">prefetchQuery</span>({
      <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'posts'</span>, userId],
      <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetchUserPosts</span>(userId),
    });
  };
}
</code></pre>
<h2 data-id="heading-20">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-21">ç”¨æˆ·åæ˜ çœ‹åˆ°çš„æ˜¯æ—§ç‰ˆæœ¬é¡µé¢</h3>
<p>åŸå› ï¼šHTMLæ–‡ä»¶è¢«ç¼“å­˜ï¼Œå¯¼è‡´åŠ è½½çš„æ˜¯æ—§ç‰ˆæœ¬çš„é™æ€èµ„æºå¼•ç”¨ã€‚
è§£å†³æ–¹æ¡ˆï¼šåœ¨nginxä¸­é…ç½®åˆç†çš„ç¼“å­˜ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">location / {
    <span class="hljs-comment"># HTMLæ–‡ä»¶ï¼šçŸ­æ—¶é—´ç¼“å­˜ + åå•†ç¼“å­˜</span>
    add_header Cache-Control <span class="hljs-string">"public, max-age=300, must-revalidate"</span>;
}

location /assets/ {
    <span class="hljs-comment"># é™æ€èµ„æºï¼šé•¿æ—¶é—´ç¼“å­˜ + æ–‡ä»¶hash</span>
    add_header Cache-Control <span class="hljs-string">"public, max-age=31536000, immutable"</span>;
}
</code></pre>
<h3 data-id="heading-22">å¦‚ä½•ä¼˜é›…åœ°æ¸…é™¤ç¼“å­˜ï¼Ÿ</h3>
<p><code>vite/webpack</code> ä¼šè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶hashï¼Œä»¥æ­¤è¿›è¡Œæ¸…é™¤ã€‚</p>
<h2 data-id="heading-23">ç¼“å­˜æœ€ä½³å®è·µæ€»ç»“</h2>















































<table><thead><tr><th>èµ„æºç±»å‹</th><th>æ¨èç­–ç•¥</th><th>ç¼“å­˜æ—¶é—´</th><th>æ›´æ–°æœºåˆ¶</th></tr></thead><tbody><tr><td>HTMLå…¥å£æ–‡ä»¶</td><td>åå•†ç¼“å­˜</td><td>çŸ­æ—¶é—´ï¼ˆ5åˆ†é’Ÿï¼‰</td><td>å†…å®¹hashæˆ–ç‰ˆæœ¬å·</td></tr><tr><td>JS/CSSï¼ˆå¸¦hashï¼‰</td><td>å¼ºç¼“å­˜</td><td>é•¿æœŸï¼ˆ1å¹´ï¼‰</td><td>æ–‡ä»¶åhashå˜æ›´</td></tr><tr><td>å›¾ç‰‡/å­—ä½“</td><td>å¼ºç¼“å­˜</td><td>ä¸­æœŸï¼ˆ1ä¸ªæœˆï¼‰</td><td>URLå˜æ›´æˆ–ç‰ˆæœ¬æ§åˆ¶</td></tr><tr><td>APIæ•°æ®ï¼ˆåˆ—è¡¨ï¼‰</td><td>å†…å­˜ç¼“å­˜</td><td>çŸ­æœŸï¼ˆ1-5åˆ†é’Ÿï¼‰</td><td>æ—¶é—´è¿‡æœŸæˆ–ä¸»åŠ¨å¤±æ•ˆ</td></tr><tr><td>ç”¨æˆ·åå¥½é…ç½®</td><td>LocalStorage</td><td>æ°¸ä¹…</td><td>ç”¨æˆ·æ“ä½œè§¦å‘æ›´æ–°</td></tr><tr><td>ç¦»çº¿èµ„æº</td><td>Service Worker</td><td>é•¿æœŸ</td><td>ç‰ˆæœ¬åŒ–é¢„ç¼“å­˜</td></tr></tbody></table>
<h2 data-id="heading-24">æœªæ¥è¶‹åŠ¿</h2>
<ul>
<li>HTTP/3çš„ç¼“å­˜æ”¹è¿›ï¼šæ›´æ™ºèƒ½çš„ç¼“å­˜åå•†æœºåˆ¶</li>
<li>AIé©±åŠ¨çš„ç¼“å­˜ç­–ç•¥ï¼šæ ¹æ®ç”¨æˆ·è¡Œä¸ºé¢„æµ‹ç¼“å­˜éœ€æ±‚</li>
<li>è¾¹ç¼˜è®¡ç®—ç¼“å­˜ï¼šCDNä¸æµè§ˆå™¨ç¼“å­˜çš„æ·±åº¦èåˆ</li>
<li>éšç§ä¿æŠ¤çš„ç¼“å­˜ï¼šæ²™ç›’åŒ–ç¼“å­˜é˜²æ­¢æŒ‡çº¹è¿½è¸ª</li>
</ul>
<h2 data-id="heading-25">ç»“è¯­</h2>
<p>æµè§ˆå™¨ç¼“å­˜æ˜¯ä¸€ä¸ªå¤šå±‚æ¬¡çš„å¤æ‚ç³»ç»Ÿï¼Œç†è§£å„å±‚ç¼“å­˜çš„å·¥ä½œåŸç†ã€ç”Ÿå‘½å‘¨æœŸå’Œé€‚ç”¨åœºæ™¯æ˜¯è¿›è¡Œæœ‰æ•ˆç¼“å­˜ç®¡ç†çš„å…³é”®ï¼Œå¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptåŸå‹é“¾ - ç»§æ‰¿çš„åŸºçŸ³ä¸æ ¸å¿ƒæœºåˆ¶]]></title>    <link>https://juejin.cn/post/7601028900886298670</link>    <guid>https://juejin.cn/post/7601028900886298670</guid>    <pubDate>2026-01-30T23:55:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601028900886298670" data-draft-id="7601169987395338291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptåŸå‹é“¾ - ç»§æ‰¿çš„åŸºçŸ³ä¸æ ¸å¿ƒæœºåˆ¶"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-30T23:55:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptåŸå‹é“¾ - ç»§æ‰¿çš„åŸºçŸ³ä¸æ ¸å¿ƒæœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T23:55:52.000Z" title="Fri Jan 30 2026 23:55:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šä»ä¸€é“é¢è¯•é¢˜è¯´èµ·</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">const</span> person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span>); <span class="hljs-comment">// null</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Person</span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Function</span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span>); <span class="hljs-comment">// true (!)</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Function</span>.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Function</span>); <span class="hljs-comment">// true (!)</span>
</code></pre>
<p>å¦‚æœä½ èƒ½å®Œå…¨ç†è§£ä¸Šé¢çš„ä»£ç ï¼Œé‚£ä¹ˆä½ å·²ç»æŒæ¡äº†åŸå‹é“¾çš„æ ¸å¿ƒã€‚å¦‚æœä¸èƒ½ï¼Œæœ¬ç¯‡æ–‡ç« å°†å¸¦æˆ‘ä»¬ä¸€æ­¥æ­¥æ­å¼€åŸå‹é“¾çš„ç¥ç§˜é¢çº±ã€‚</p>
<h2 data-id="heading-1">æ„é€ å‡½æ•°ã€å®ä¾‹ã€åŸå‹çš„ä¸‰è€…å…³ç³»</h2>
<p>åœ¨JavaScriptä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å†…éƒ¨å±æ€§<code>[[Prototype]]</code>ï¼ˆå¯ä»¥é€šè¿‡<code>__proto__</code>è®¿é—®ï¼‰ï¼Œå®ƒæŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-comment">// åŸå‹å¯¹è±¡ï¼šæ‰€æœ‰å®ä¾‹å…±äº«çš„æ–¹æ³•å’Œå±æ€§</span>
<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHello</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
};

<span class="hljs-comment">// å®ä¾‹ï¼šé€šè¿‡newåˆ›å»ºçš„å¯¹è±¡</span>
<span class="hljs-keyword">const</span> zhangsan = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'zhangsna'</span>);

<span class="hljs-comment">// ä¸‰è€…å…³ç³»éªŒè¯</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(zhangsan.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Person</span>); <span class="hljs-comment">// true</span>
</code></pre>
<h2 data-id="heading-2">prototypeå’Œ__proto__çš„åŒºåˆ«ä¸è”ç³»</h2>
<ul>
<li><code>prototype</code> æ˜¯å‡½æ•°ç‰¹æœ‰çš„å±æ€§ã€‚</li>
<li><code>__proto__</code> æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½æœ‰çš„å±æ€§ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Foo</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">const</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Foo</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// "object"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> obj.<span class="hljs-property">__proto__</span>); <span class="hljs-comment">// "object"</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Foo</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> === obj.<span class="hljs-property">__proto__</span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Foo</span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>

<span class="hljs-comment">// ä¸€å®šè¦æ³¨æ„ï¼šå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥å‡½æ•°ä¹Ÿæœ‰__proto__</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Foo</span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
</code></pre>
<ol>
<li>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª <code>prototype</code> å±æ€§ï¼ŒæŒ‡å‘è¯¥å‡½æ•°çš„<strong>åŸå‹å¯¹è±¡</strong>ã€‚</li>
<li>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª <code>__proto__</code> å±æ€§ï¼ŒæŒ‡å‘åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„<strong>åŸå‹å¯¹è±¡</strong>ã€‚</li>
<li>åŸå‹å¯¹è±¡çš„ <code>constructor</code> å±æ€§æŒ‡å‘åˆ›å»ºè¯¥å®ä¾‹å¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚</li>
<li><code>Function</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œå®ƒçš„ <code>constructor</code> æŒ‡å‘å®ƒè‡ªå·±ã€‚</li>
</ol>
<h2 data-id="heading-3">å®Œæ•´çš„åŸå‹é“¾ç»“æ„</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">eat</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is eating`</span>);
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params">name, breed</span>) {
    <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">breed</span> = breed;
}

<span class="hljs-comment">// è®¾ç½®åŸå‹é“¾</span>
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Dog</span>; <span class="hljs-comment">// ä¿®å¤constructoræŒ‡å‘</span>

<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">bark</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is barking`</span>);
};

<span class="hljs-keyword">const</span> myDog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">'Buddy'</span>, <span class="hljs-string">'Golden Retriever'</span>);

<span class="hljs-comment">// åŸå‹é“¾æŸ¥æ‰¾è·¯å¾„ï¼š</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myDog.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span>); <span class="hljs-comment">// null</span>
</code></pre>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼ŒåŸå‹é“¾çš„æŸ¥æ‰¾è¿‡ç¨‹ï¼š</p>
<ol>
<li><code>myDog</code> æœ¬èº«æœ‰ <code>name</code> å’Œ <code>breed</code> å±æ€§</li>
<li><code>myDog.__proto__</code> (<code>Dog.prototype</code>) æœ‰ <code>bark</code> æ–¹æ³•</li>
<li><code>Dog.prototype.__proto__</code> (<code>Animal.prototype</code>) æœ‰ <code>eat</code> æ–¹æ³•</li>
<li><code>Animal.prototype.__proto__</code> (<code>Object.prototype</code>) æœ‰ <code>toString</code> ç­‰æ–¹æ³•</li>
<li><code>Object.prototype.__proto__</code> ä¸º<code>null</code>ï¼ŒæŸ¥æ‰¾ç»“æŸ</li>
</ol>
<blockquote>
<p>Object.prototypeæ˜¯æ‰€æœ‰åŸå‹é“¾çš„ç»ˆç‚¹ã€‚</p>
</blockquote>
<h2 data-id="heading-4">å±æ€§å±è”½è§„åˆ™</h2>
<h3 data-id="heading-5">hasOwnProperty vs inæ“ä½œç¬¦</h3>
<ul>
<li><code>hasOwnProperty</code>: æ£€æŸ¥å±æ€§æ˜¯å¦åœ¨å¯¹è±¡è‡ªèº«ï¼ˆä¸åœ¨åŸå‹é“¾ä¸Šï¼‰</li>
<li>inæ“ä½œç¬¦: æ£€æŸ¥å±æ€§æ˜¯å¦åœ¨å¯¹è±¡è‡ªèº«æˆ–åŸå‹é“¾ä¸Š</li>
</ul>
<h3 data-id="heading-6">å±æ€§å±è”½çš„ä¸‰ç§æƒ…å†µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-string">'parent value'</span>;
}

<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">shared</span> = <span class="hljs-string">'parent shared'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-string">'child value'</span>; 
}

<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>;

<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">shared</span> = <span class="hljs-string">'child shared'</span>; 

<span class="hljs-keyword">const</span> child = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>();
</code></pre>
<h4 data-id="heading-7">æƒ…å†µ1ï¼šå¯¹è±¡è‡ªèº«æœ‰è¯¥å±æ€§ï¼ˆå®Œå…¨å±è”½ï¼‰</h4>
<p>ä»¥ä¸Šè¿°ä»£ç ä¸ºä¾‹ï¼Œ<code>Child</code> æœ¬èº«æœ‰è‡ªå·±çš„ <code>value</code> å±æ€§ï¼Œå½“è°ƒç”¨ <code>value</code> å±æ€§æ—¶ï¼Œä¼šå®Œå…¨å±è”½åŸå‹é“¾ä¸Šçš„åŒå <code>value</code> å±æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-property">value</span>); <span class="hljs-comment">// 'child value'ï¼ˆä¸æ˜¯'parent value'ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">'value'</span>)); <span class="hljs-comment">// true</span>
</code></pre>
<h4 data-id="heading-8">æƒ…å†µ2ï¼šå¯¹è±¡è‡ªèº«æœ¬æ¥æ²¡æœ‰ï¼Œä½†æ·»åŠ å¯¹è±¡è‡ªèº«å±æ€§</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-property">shared</span>); <span class="hljs-comment">// 'child shared'ï¼ˆæ¥è‡ªChild.prototypeï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">'shared'</span>)); <span class="hljs-comment">// false</span>

<span class="hljs-comment">// æ·»åŠ å¯¹è±¡è‡ªèº«å±æ€§</span>
child.<span class="hljs-property">shared</span> = <span class="hljs-string">'instance shared'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-property">shared</span>); <span class="hljs-comment">// 'instance shared'ï¼ˆç°åœ¨è‡ªèº«æœ‰äº†ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">'shared'</span>)); <span class="hljs-comment">// true</span>
</code></pre>
<h4 data-id="heading-9">æƒ…å†µ3ï¼šå±æ€§æ˜¯åªè¯»çš„</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">readOnly</span> = <span class="hljs-string">'cannot change'</span>;

<span class="hljs-comment">// è¯•å›¾ä¿®æ”¹åªè¯»å±æ€§</span>
child.<span class="hljs-property">readOnly</span> = <span class="hljs-string">'try to change'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-property">readOnly</span>); <span class="hljs-comment">// 'cannot change'ï¼ˆä¿®æ”¹å¤±è´¥ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">'readOnly'</span>)); <span class="hljs-comment">// falseï¼ˆæ²¡æœ‰æ·»åŠ æˆåŠŸï¼‰</span>
</code></pre>
<h2 data-id="heading-10">åŸå‹é“¾çš„åŸºç¡€ç»“æ„</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHello</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
};

<span class="hljs-keyword">const</span> zhangsan = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'zhangsan'</span>);
</code></pre>
<p>å…¶åŸå‹ç»“æ„å›¾å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-text" lang="text">zhangsan (å®ä¾‹)
  â”œâ”€â”€ __proto__: Person.prototype
  â”‚      â”œâ”€â”€ constructor: Person
  â”‚      â”œâ”€â”€ sayHello: function()
  â”‚      â””â”€â”€ __proto__: Object.prototype
  â”‚             â”œâ”€â”€ constructor: Object
  â”‚             â”œâ”€â”€ toString: function()
  â”‚             â”œâ”€â”€ hasOwnProperty: function()
  â”‚             â””â”€â”€ __proto__: null
  â”œâ”€â”€ name: "zhangsan"
  â””â”€â”€ (å…¶ä»–å®ä¾‹å±æ€§...)

Person (æ„é€ å‡½æ•°)
  â”œâ”€â”€ prototype: Person.prototype
  â””â”€â”€ __proto__: Function.prototype
           â”œâ”€â”€ constructor: Function
           â”œâ”€â”€ apply: function()
           â”œâ”€â”€ call: function()
           â””â”€â”€ __proto__: Object.prototype
</code></pre>
<h2 data-id="heading-11">åŸå‹é“¾çš„å®é™…åº”ç”¨</h2>
<h3 data-id="heading-12">å®ç°ç»§æ‰¿çš„å¤šç§æ–¹å¼</h3>
<h4 data-id="heading-13">åŸå‹é“¾ç»§æ‰¿ï¼ˆç»å…¸æ–¹å¼ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">age</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-comment">// å…³é”®ï¼šè®©å­ç±»åŸå‹æŒ‡å‘çˆ¶ç±»å®ä¾‹</span>
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>();

<span class="hljs-comment">// ä¿®å¤constructoræŒ‡å‘</span>
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>;
</code></pre>
<ul>
<li>é—®é¢˜ï¼šå¼•ç”¨ç±»å‹çš„å±æ€§ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«</li>
</ul>
<h4 data-id="heading-14">ç»„åˆç»§æ‰¿ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name ;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-comment">// ç»§æ‰¿å±æ€§</span>
    <span class="hljs-title class_">Parent</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name);  <span class="hljs-comment">// ç¬¬äºŒæ¬¡è°ƒç”¨Parent</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-comment">// ç»§æ‰¿æ–¹æ³•</span>
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>();  <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨Parent</span>
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>;
</code></pre>
<ul>
<li>ä¼˜ç‚¹ï¼šç»“åˆäº†åŸå‹é“¾å’Œæ„é€ å‡½æ•°çš„ä¼˜ç‚¹</li>
<li>ç¼ºç‚¹ï¼šçˆ¶ç±»æ„é€ å‡½æ•°è¢«è°ƒç”¨äº†ä¸¤æ¬¡</li>
</ul>
<h4 data-id="heading-15">å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼ˆæœ€ä½³å®è·µï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">inheritPrototype</span>(<span class="hljs-params">child, parent</span>) {
    <span class="hljs-comment">// åˆ›å»ºçˆ¶ç±»åŸå‹çš„å‰¯æœ¬</span>
    <span class="hljs-keyword">const</span> prototype = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(parent.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
    <span class="hljs-comment">// ä¿®å¤constructoræŒ‡å‘</span>
    prototype.<span class="hljs-property">constructor</span> = child;
    <span class="hljs-comment">// è®¾ç½®å­ç±»åŸå‹</span>
    child.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = prototype;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-title class_">Parent2</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-title function_">inheritPrototype</span>(<span class="hljs-title class_">Child</span>, <span class="hljs-title class_">Parent</span>);
</code></pre>
<ul>
<li>åªè°ƒç”¨ä¸€æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°</li>
<li>é¿å…åœ¨å­ç±»åŸå‹ä¸Šåˆ›å»ºä¸å¿…è¦çš„å±æ€§</li>
<li>åŸå‹é“¾ä¿æŒä¸å˜</li>
</ul>
<h4 data-id="heading-16">ES6 classç»§æ‰¿</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent3</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child3</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Parent3</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) {
        <span class="hljs-variable language_">super</span>(name);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
    }
    
    <span class="hljs-title function_">sayAge</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>);
    }
}
</code></pre>
<ul>
<li>è¯­æ³•ç®€æ´ï¼Œç°ä»£è§£å†³æ–¹æ¡ˆï¼Œä½†éœ€è¦ES6+æ”¯æŒ</li>
</ul>
<h3 data-id="heading-17">å®ç°æ··å…¥ï¼ˆMixinï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> canEat = {
    <span class="hljs-attr">eat</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">food</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is eating <span class="hljs-subst">${food}</span>`</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">energy</span> += <span class="hljs-number">10</span>;
    }
};

<span class="hljs-keyword">const</span> canSleep = {
    <span class="hljs-attr">sleep</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">hours</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is sleeping for <span class="hljs-subst">${hours}</span> hours`</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">energy</span> += hours * <span class="hljs-number">5</span>;
    }
};

<span class="hljs-keyword">const</span> canWalk = {
    <span class="hljs-attr">walk</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">distance</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is walking <span class="hljs-subst">${distance}</span> km`</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">energy</span> -= distance * <span class="hljs-number">2</span>;
    }
};

<span class="hljs-comment">// æ··å…¥å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">mixin</span>(<span class="hljs-params">target, ...sources</span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(target.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, ...sources);
}

<span class="hljs-comment">// åˆ›å»ºåŠ¨ç‰©ç±»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">energy</span> = <span class="hljs-number">100</span>;
}

<span class="hljs-title function_">mixin</span>(<span class="hljs-title class_">Animal</span>, canEat, canSleep, canWalk);

<span class="hljs-comment">// åˆ›å»ºé¸Ÿç±»ï¼Œé¢å¤–æ·»åŠ é£è¡Œèƒ½åŠ›</span>
<span class="hljs-keyword">const</span> canFly = {
    <span class="hljs-attr">fly</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">distance</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is flying <span class="hljs-subst">${distance}</span> km`</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">energy</span> -= distance * <span class="hljs-number">5</span>;
    }
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Bird</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wings</span> = <span class="hljs-number">2</span>;
}

<span class="hljs-comment">// è®¾ç½®åŸå‹é“¾</span>
<span class="hljs-title class_">Bird</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Bird</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Bird</span>;

<span class="hljs-comment">// æ·»åŠ é£è¡Œèƒ½åŠ›</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-title class_">Bird</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, canFly);
</code></pre>
<h2 data-id="heading-18">åŸå‹é“¾å¸¸è§é™·é˜±</h2>
<h3 data-id="heading-19">é™·é˜±1ï¼šä¿®æ”¹åŸå‹ä¼šå½±å“æ‰€æœ‰å®ä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-keyword">const</span> zhangsan = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'zhangsan'</span>);
<span class="hljs-keyword">const</span> lisi = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'lisi'</span>);

<span class="hljs-comment">// ä¿®æ”¹åŸå‹</span>
<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHello</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
};

zhangsan.<span class="hljs-title function_">sayHello</span>(); <span class="hljs-comment">// Hello, zhangsan (æ­£å¸¸)</span>
lisi.<span class="hljs-title function_">sayHello</span>();   <span class="hljs-comment">// Hello, lisi (æ­£å¸¸)</span>
</code></pre>
<h3 data-id="heading-20">é™·é˜±2ï¼šåŸå‹ä¸Šçš„å¼•ç”¨ç±»å‹å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Problem</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span> = []; <span class="hljs-comment">// æ­£ç¡®ï¼šæ¯ä¸ªå®ä¾‹æœ‰è‡ªå·±çš„æ•°ç»„</span>
}

<span class="hljs-title class_">Problem</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sharedValues</span> = []; <span class="hljs-comment">// é”™è¯¯ï¼šæ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€ä¸ªæ•°ç»„</span>

<span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Problem</span>();
<span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Problem</span>();

p1.<span class="hljs-property">sharedValues</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'from p1'</span>);
p2.<span class="hljs-property">sharedValues</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'from p2'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p1.<span class="hljs-property">sharedValues</span>); <span class="hljs-comment">// ['from p1', 'from p2']</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p2.<span class="hljs-property">sharedValues</span>); <span class="hljs-comment">// ['from p1', 'from p2']</span>
</code></pre>
<h3 data-id="heading-21">é™·é˜±3ï¼šfor...inä¼šéå†åŸå‹é“¾ä¸Šçš„å¯æšä¸¾å±æ€§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentProp</span> = <span class="hljs-string">'parent'</span>;
}

<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">inheritedProp</span> = <span class="hljs-string">'inherited'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">childProp</span> = <span class="hljs-string">'child'</span>;
}

<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>();

<span class="hljs-keyword">const</span> child = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>();

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> child) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key); <span class="hljs-comment">// childProp, parentProp, inheritedProp</span>
}
</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨hasOwnPropertyè¿‡æ»¤ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> child) {
    <span class="hljs-keyword">if</span> (child.<span class="hljs-title function_">hasOwnProperty</span>(key)) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key); <span class="hljs-comment">// childProp, parentProp</span>
    }
}
</code></pre>
<h2 data-id="heading-22">åŸå‹é“¾çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-23">å®è·µ1ï¼šä½¿ç”¨Object.createè®¾ç½®åŸå‹é“¾</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayName</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-title class_">Parent</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-comment">// æœ€ä½³æ–¹å¼</span>
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>;

<span class="hljs-comment">// æ·»åŠ å­ç±»æ–¹æ³•</span>
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayAge</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>);
};
</code></pre>
<h3 data-id="heading-24">å®è·µ2ï¼šä½¿ç”¨classè¯­æ³•ï¼ˆES6+ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodParent</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    }
    
    <span class="hljs-title function_">sayName</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodChild</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">GoodParent</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) {
        <span class="hljs-variable language_">super</span>(name);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
    }
    
    <span class="hljs-title function_">sayAge</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>);
    }
}
</code></pre>
<h3 data-id="heading-25">å®è·µ3ï¼šå®‰å…¨åœ°æ£€æŸ¥å±æ€§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">ownProp</span>: <span class="hljs-string">'value'</span> };

<span class="hljs-comment">// ä¸å¥½çš„åšæ³•</span>
<span class="hljs-keyword">if</span> (obj.<span class="hljs-property">property</span>) {
    <span class="hljs-comment">// å¦‚æœpropertyå€¼ä¸ºfalsyï¼ˆ0, '', false, null, undefinedï¼‰ï¼Œä¼šè¢«è¯¯åˆ¤</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•</span>
<span class="hljs-keyword">if</span> (obj.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">'property'</span>)) {
    <span class="hljs-comment">// æ˜ç¡®æ£€æŸ¥è‡ªèº«å±æ€§</span>
}

<span class="hljs-comment">// æ›´å¥½çš„åšæ³•ï¼ˆé˜²æ­¢hasOwnPropertyè¢«è¦†ç›–ï¼‰</span>
<span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(obj, <span class="hljs-string">'property'</span>)) {
    <span class="hljs-comment">// æœ€å®‰å…¨çš„æ–¹å¼</span>
}
</code></pre>
<h3 data-id="heading-26">å®è·µ4ï¼šé¿å…ä¿®æ”¹å†…ç½®å¯¹è±¡çš„åŸå‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éå¿…è¦æƒ…å†µï¼Œä¸å¾—è¿›è¡Œä»¥ä¸‹æ“ä½œ</span>
<span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">customMethod</span>) {
    <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">customMethod</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å®ç°</span>
    };
}
</code></pre>
<h2 data-id="heading-27">æ€è€ƒé¢˜ï¼šä»¥ä¸‹ä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Foo</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Bar</span>(<span class="hljs-params"/>) {}

<span class="hljs-title class_">Bar</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Foo</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);

<span class="hljs-keyword">const</span> bar = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bar</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Bar</span>); 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Foo</span>); 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Bar</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">isPrototypeOf</span>(bar)); 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Foo</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">isPrototypeOf</span>(bar)); 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">isPrototypeOf</span>(bar)); 
</code></pre>
<h2 data-id="heading-28">ç»“è¯­</h2>
<p>åŸå‹é“¾æ˜¯ JavaScript é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºçŸ³ï¼Œåœ¨ JavaScript ä¸­æ²¡æœ‰çœŸæ­£çš„ç±»ï¼Œåªæœ‰å¯¹è±¡å’Œå®ƒä»¬ä¹‹é—´çš„é“¾æ¥ï¼ˆåŸå‹é“¾ï¼‰ï¼Œå¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çº¯åŸç”Ÿhtml jså®ç°å¹¸è¿æŠ½å¥–è½¬ç›˜åŠŸèƒ½-å¥–é¡¹ä¸é‡å¤(javascriptå°æ¡ˆä¾‹)]]></title>    <link>https://juejin.cn/post/7600787795478560814</link>    <guid>https://juejin.cn/post/7600787795478560814</guid>    <pubDate>2026-01-31T01:21:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600787795478560814" data-draft-id="7601169987395452979" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çº¯åŸç”Ÿhtml jså®ç°å¹¸è¿æŠ½å¥–è½¬ç›˜åŠŸèƒ½-å¥–é¡¹ä¸é‡å¤(javascriptå°æ¡ˆä¾‹)"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-31T01:21:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´§å³»"/> <meta itemprop="url" content="https://juejin.cn/user/4484237958320521"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çº¯åŸç”Ÿhtml jså®ç°å¹¸è¿æŠ½å¥–è½¬ç›˜åŠŸèƒ½-å¥–é¡¹ä¸é‡å¤(javascriptå°æ¡ˆä¾‹)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4484237958320521/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´§å³»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T01:21:28.000Z" title="Sat Jan 31 2026 01:21:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åˆ›å»ºé¡¹ç›®</h2>
<p>å¦‚å›¾æ‰€ç¤ºåˆ›å»ºä¸€ä¸ªåŸºæœ¬htmlé¡¹ç›®,åˆ›å»ºå¥½ä¹‹åå¦‚å›¾2æ‰€ç¤º
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ba83c15da3a4cb784e3eb6322545d6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSn5bO7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770427288&amp;x-signature=sMg6YF4CkBv3kC%2FzdOAPkVC6a0w%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">ä¹å®«æ ¼æ•ˆæœ</h2>
<p>æˆ‘ä»¬å…ˆæ¥å®ç°ä¹å®«æ ¼çš„æ•ˆæœå§ï¼Œæœ‰ä¸¤ç§ä¸€ç§æ˜¯æŒ‰ç…§é¡ºåºçš„ä¹å®«æ ¼å¦‚å›¾1æ‰€ç¤ºï¼Œä¸€ç§æ˜¯ä¸€åœˆçš„æ•ˆæœå¦‚å›¾2æ‰€ç¤ºï¼Œæˆ‘ä»¬æœ¬æœŸä»¥ç¬¬ä¸€ç§ä¹å®«æ ¼ä¸ºæ¡ˆä¾‹è¿›è¡Œå®ç°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1572afd747e4298accc02bd20f9da08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSn5bO7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770427288&amp;x-signature=Z0DmeBVOwodvQBd57uwmQW6slXA%3D" alt="image.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0a2950e8f88400f9cfd63c101d776b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSn5bO7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770427288&amp;x-signature=wF6smvVSgTBDgEJ5bXrQfxqZ%2Bns%3D" alt="image.png" loading="lazy"/></p>
<p>htmléƒ¨åˆ†ä»£ç </p>
<pre><code class="hljs language-js" lang="js">&lt;body&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"turntable-box"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ä¸€ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>äºŒç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ä¸‰ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å››ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"startBtn"</span>&gt;</span>å‚ä¸æ¸¸æˆ<span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>èµ¢å¾—å¤§å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>äº”ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å…­ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ä¸ƒç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å…«ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/body&gt;
</code></pre>
<p>csséƒ¨åˆ†ä»£ç æ ·å¼</p>
<pre><code class="hljs language-css" lang="css">&lt;style type="text/css"&gt;

  


<span class="hljs-comment">/* è½¬ç›˜çš„å¤–å±‚è¾¹æ¡† */</span>

<span class="hljs-selector-id">#turntable-box</span> {

<span class="hljs-attribute">display</span>: flex;

<span class="hljs-attribute">align-items</span>: center;

<span class="hljs-attribute">justify-content</span>: center;

<span class="hljs-attribute">flex-wrap</span>: wrap;

<span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;

<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">15px</span>;

<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#922a21</span>;

<span class="hljs-attribute">position</span>: relative;

<span class="hljs-attribute">width</span>: <span class="hljs-number">510px</span>;

<span class="hljs-attribute">height</span>: <span class="hljs-number">420px</span>;

<span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;

<span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;

}

  


<span class="hljs-comment">/* è½¬ç›˜ä¸‹é¢çš„æ¯ä¸ªæ¨¡å—æ ·å¼ */</span>

<span class="hljs-selector-id">#turntable-box</span> &gt; <span class="hljs-selector-tag">div</span> {

<span class="hljs-attribute">display</span>: flex;

<span class="hljs-attribute">align-items</span>: center;

<span class="hljs-attribute">justify-content</span>: center;

<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">25px</span>;

<span class="hljs-attribute">width</span>: <span class="hljs-number">160px</span>;

<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8e7c1</span>;

<span class="hljs-attribute">height</span>: <span class="hljs-number">130px</span>;

<span class="hljs-attribute">text-align</span>: center;

<span class="hljs-attribute">font-size</span>: <span class="hljs-number">25px</span>;

}

&lt;/style&gt;
</code></pre>
<p>è¿™ä¸ªå°±æ˜¯å¾ˆç®€å•çš„ä¸€ä¸ªæ¢è¡Œæ’åº flexå¸ƒå±€</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-id">#turntable-box</span> <span class="hljs-selector-class">.reward</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>) {
<span class="hljs-attribute">top</span>: <span class="hljs-number">10px</span>;
<span class="hljs-attribute">left</span>: <span class="hljs-number">10px</span>;
}

<span class="hljs-selector-id">#turntable-box</span> <span class="hljs-selector-class">.reward</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) {
<span class="hljs-attribute">top</span>: <span class="hljs-number">10px</span>;
<span class="hljs-attribute">left</span>: <span class="hljs-number">175px</span>;
}
<span class="hljs-selector-id">#turntable-box</span> <span class="hljs-selector-class">.reward</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>) {
<span class="hljs-attribute">top</span>: <span class="hljs-number">10px</span>;
<span class="hljs-attribute">left</span>: <span class="hljs-number">340px</span>;
}
<span class="hljs-selector-id">#turntable-box</span> <span class="hljs-selector-class">.reward</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">4</span>) {
<span class="hljs-attribute">left</span>: <span class="hljs-number">340px</span>;
<span class="hljs-attribute">top</span>: <span class="hljs-number">145px</span>;
}
<span class="hljs-selector-id">#turntable-box</span> <span class="hljs-selector-class">.reward</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">5</span>) {
<span class="hljs-attribute">left</span>: <span class="hljs-number">340px</span>;
<span class="hljs-attribute">top</span>: <span class="hljs-number">280px</span>;
}
<span class="hljs-selector-id">#turntable-box</span> <span class="hljs-selector-class">.reward</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">6</span>) {
<span class="hljs-attribute">top</span>: <span class="hljs-number">280px</span>;
<span class="hljs-attribute">left</span>: <span class="hljs-number">175px</span>;
}
<span class="hljs-selector-id">#turntable-box</span> <span class="hljs-selector-class">.reward</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">7</span>) {
<span class="hljs-attribute">left</span>: <span class="hljs-number">10px</span>;
<span class="hljs-attribute">top</span>: <span class="hljs-number">280px</span>;
}
<span class="hljs-selector-id">#turntable-box</span> <span class="hljs-selector-class">.reward</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">8</span>) {
<span class="hljs-attribute">left</span>: <span class="hljs-number">10px</span>;
<span class="hljs-attribute">top</span>: <span class="hljs-number">145px</span>;
}
</code></pre>
<p><strong>å¦‚æœå¤§å®¶æƒ³è¦ä¸€åœˆå½¢å¼çš„å¸ƒå±€ä»£ç å‚è€ƒå¦‚ä¸‹ å…¶å®å°±æ˜¯åˆ©ç”¨äº†å®šä½è®©ä»–å½¢æˆäº†ä¸€åœˆ</strong></p>
<h2 data-id="heading-2">ç¾åŒ–æ ·å¼</h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> /&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å¹¸è¿è½¬ç›˜<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span>&gt;</span><span class="css">
			<span class="hljs-selector-tag">body</span> {
				<span class="hljs-attribute">display</span>: flex;
				<span class="hljs-attribute">flex-direction</span>: column;
				<span class="hljs-attribute">justify-content</span>: center;
				<span class="hljs-attribute">align-items</span>: center;
				<span class="hljs-attribute">overflow</span>: hidden;
				<span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;
				<span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
				<span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'img/background.jpg'</span>);
				<span class="hljs-comment">/* èƒŒæ™¯å›¾ç‰‡å±…ä¸­ */</span>
				<span class="hljs-attribute">background-position</span>: center;
				<span class="hljs-comment">/* èƒŒæ™¯å›¾ç‰‡ä¸é‡å¤ */</span>
				<span class="hljs-attribute">background-repeat</span>: no-repeat;
			}


			<span class="hljs-comment">/* å¹¸è¿æŠ½å¥–çš„æ ‡é¢˜å›¾ç‰‡ */</span>
			<span class="hljs-selector-class">.draw-title</span> {
				<span class="hljs-attribute">z-index</span>: <span class="hljs-number">10</span>;
				<span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
				<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">10px</span>);
			}


			<span class="hljs-comment">/*  è½¬ç›˜çš„å¤–å±‚è¾¹æ¡† */</span>
			<span class="hljs-selector-id">#turntable-content</span> {
				<span class="hljs-attribute">display</span>: flex;
				<span class="hljs-attribute">align-items</span>: center;
				<span class="hljs-attribute">justify-content</span>: center;
				<span class="hljs-attribute">flex-wrap</span>: wrap;
				<span class="hljs-attribute">gap</span>: <span class="hljs-number">5px</span>;
				<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">15px</span>;
				<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#922a21</span>;
				<span class="hljs-attribute">position</span>: relative;
				<span class="hljs-attribute">width</span>: <span class="hljs-number">510px</span>;
				<span class="hljs-attribute">height</span>: <span class="hljs-number">410px</span>;
				<span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
				<span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
			}


			<span class="hljs-comment">/*  è½¬ç›˜ä¸‹é¢çš„æ¯ä¸ªæ¨¡å—æ ·å¼ */</span>
			<span class="hljs-selector-id">#turntable-content</span>&gt;<span class="hljs-selector-tag">div</span> {
				<span class="hljs-attribute">display</span>: flex;
				<span class="hljs-attribute">align-items</span>: center;
				<span class="hljs-attribute">justify-content</span>: center;
				<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">25px</span>;
				<span class="hljs-attribute">width</span>: <span class="hljs-number">160px</span>;
				<span class="hljs-attribute">height</span>: <span class="hljs-number">130px</span>;
				<span class="hljs-attribute">text-align</span>: center;
				<span class="hljs-attribute">font-size</span>: <span class="hljs-number">25px</span>;
			}






			<span class="hljs-comment">/* å¹¸è¿è½¬ç›˜æœ€å¤–å±‚ */</span>
			<span class="hljs-selector-class">.draw-turntable-box</span> {
				<span class="hljs-attribute">display</span>: flex;
				<span class="hljs-attribute">align-items</span>: center;
				<span class="hljs-attribute">justify-content</span>: center;
				<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5%</span>;
				<span class="hljs-attribute">background</span>: <span class="hljs-number">#de4b3f</span>;
				<span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
				<span class="hljs-attribute">width</span>: <span class="hljs-number">600px</span>;
			}


			<span class="hljs-comment">/* å¼€å§‹æŠ½å¥–æŒ‰é’® */</span>
			<span class="hljs-selector-id">#startBtn</span> {
				<span class="hljs-attribute">cursor</span>: pointer;
				<span class="hljs-attribute">text-align</span>: center;
				<span class="hljs-attribute">display</span>: flex;
				<span class="hljs-attribute">align-items</span>: center;
				<span class="hljs-attribute">justify-content</span>: center;
				<span class="hljs-attribute">font-size</span>: <span class="hljs-number">22px</span>;
				<span class="hljs-attribute">white-space</span>: normal;
				<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#eb5e4a</span>;
				<span class="hljs-attribute">color</span>: white;
			}
			
			<span class="hljs-comment">/* å¥–é¡¹ */</span>
			<span class="hljs-selector-class">.unselected</span> {
				<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8e7c1</span>;
			}
			
			<span class="hljs-selector-id">#selected</span> {
				<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ee7c45</span>;
			}
		</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./img/draw.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"æŠ½å¥–æ ‡é¢˜"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"draw-title"</span> /&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"draw-turntable-box"</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"turntable-content"</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>ä¸€ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>äºŒç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>ä¸‰ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>å››ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"startBtn"</span>&gt;</span>å‚ä¸æ¸¸æˆ<span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>èµ¢å¾—å¤§å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>äº”ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>å…­ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>ä¸ƒç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>å…«ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
			<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-3">jsä»£ç å®ç°-æŠ½å¥–ä¸é‡å¤</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a93ee5595bda42ef93aa42f28e8ab012~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSn5bO7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770427288&amp;x-signature=QOAxu77mfzIn42X%2FDuY5ZyZ%2Fduk%3D" alt="image.png" loading="lazy"/>
å®ç°åŸç†æ˜¯ç»™å¼€å§‹æŒ‰é’®ç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œç„¶åè¿›è¡Œä¾æ¬¡å˜è‰²ï¼Œæœ€åéšæœºä¸€ä¸ªæ²¡æœ‰æŠ½åˆ°è¿‡çš„æ•°ï¼Œç„¶åæŠ½å¥–æˆåŠŸåæŠŠè¿™ä¸ªæ•°æ”¾åˆ°ä¸€ä¸ªå˜é‡ä¸­å­˜å‚¨è¿›è¡Œå»é‡ï¼Œå®Œæ•´jsä»£ç å¦‚ä¸‹ å¦‚å›¾æ‰€ç¤º</p>
<pre><code class="hljs language-&lt;script" lang="&lt;script">		// å¥–é¡¹å…ƒç´ åˆ—è¡¨
		var award = document.getElementsByClassName("award");
		// å·²ç»æ‹¿åˆ°çš„å¥–åŠ±åºå·
		const lucks = [];
		// æ˜¯å¦æ­£åœ¨æŠ½å¥–
		let running = false;
		
		// å¼€å§‹æŒ‰é’®å…ƒç´ 
		var startBtn = document.getElementById("startBtn");
		
		startBtn.onclick = function() {
			// åˆ¤æ–­æ˜¯å¦æ­£åœ¨æŠ½å¥–
			if (running) return;
			// è®¾ç½®ä¸ºæ­£åœ¨æŠ½å¥–
			running = true;
				
			// å¯æŠ½å–çš„å¥–é¡¹ç¼–å·ï¼ˆ1~8ï¼‰æ’é™¤å·²ç»æŠ½å–çš„
			const available = Array.from({ length: award.length }, (_, i) =&gt; i + 1)
				.filter(i =&gt; !lucks.includes(i));
				
			// å…¨éƒ¨æŠ½å®Œ
			if (available.length === 0) {
				startBtn.innerHTML = "æ‰€æœ‰å¥–é¡¹å·²æŠ½å®Œ";
				running = false;
				return;
			}
				
			// éšæœºä¸­å¥–ç¼–å·ï¼ˆ1~8ä¸­æœªæŠ½çš„ä¸€ä¸ªï¼‰
			const target = available[Math.floor(Math.random() * available.length)];
				
			// éšæœºåœˆæ•°ï¼ˆ2~4åœˆï¼‰
			const rounds = Math.floor(Math.random() * 2) + 2;
			const totalSteps = rounds * award.length + (target - 1);
				
			let current = 0;
			let speed = 60;
				
			function spin() {
				const index = current % award.length;
				
				// é‡ç½®æœªä¸­å¥–é¡¹é¢œè‰²
				for (let i = 0; i &lt; award.length; i++) {
					if (!lucks.includes(i + 1)) {
						award[i].className = "award unselected";
					}
				}
				
				// é«˜äº®å½“å‰
				award[index].className = "selected award";
				
				current++;
				
				// æ˜¯å¦ç»“æŸ
				if (current &gt; totalSteps) {
					lucks.push(index + 1);
					startBtn.innerHTML = `æ­å–œæ‚¨ä¸­äº†&lt;br&gt;${index + 1}ç­‰å¥– ğŸŠ`;
					running = false;
					return;
				}
				
				// è¶Šæ¥è¿‘ç›®æ ‡é€Ÿåº¦è¶Šæ…¢
				if (totalSteps - current &lt; award.length) {
					speed += 40;
				}
				
				setTimeout(spin, speed);
			}
				
			spin();
		};
	&lt;/script&gt;
</code></pre>
<h2 data-id="heading-4">å®Œæ•´ä»£ç </h2>
<pre><code class="hljs language-js" lang="js">

&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> /&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å¹¸è¿è½¬ç›˜<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span>&gt;</span><span class="css">
			<span class="hljs-selector-tag">body</span> {
				<span class="hljs-attribute">display</span>: flex;
				<span class="hljs-attribute">flex-direction</span>: column;
				<span class="hljs-attribute">justify-content</span>: center;
				<span class="hljs-attribute">align-items</span>: center;
				<span class="hljs-attribute">overflow</span>: hidden;
				<span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;
				<span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
				<span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'img/background.jpg'</span>);
				<span class="hljs-comment">/* èƒŒæ™¯å›¾ç‰‡å±…ä¸­ */</span>
				<span class="hljs-attribute">background-position</span>: center;
				<span class="hljs-comment">/* èƒŒæ™¯å›¾ç‰‡ä¸é‡å¤ */</span>
				<span class="hljs-attribute">background-repeat</span>: no-repeat;
			}


			<span class="hljs-comment">/* å¹¸è¿æŠ½å¥–çš„æ ‡é¢˜å›¾ç‰‡ */</span>
			<span class="hljs-selector-class">.draw-title</span> {
				<span class="hljs-attribute">z-index</span>: <span class="hljs-number">10</span>;
				<span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
				<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">10px</span>);
			}


			<span class="hljs-comment">/*  è½¬ç›˜çš„å¤–å±‚è¾¹æ¡† */</span>
			<span class="hljs-selector-id">#turntable-content</span> {
				<span class="hljs-attribute">display</span>: flex;
				<span class="hljs-attribute">align-items</span>: center;
				<span class="hljs-attribute">justify-content</span>: center;
				<span class="hljs-attribute">flex-wrap</span>: wrap;
				<span class="hljs-attribute">gap</span>: <span class="hljs-number">5px</span>;
				<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">15px</span>;
				<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#922a21</span>;
				<span class="hljs-attribute">position</span>: relative;
				<span class="hljs-attribute">width</span>: <span class="hljs-number">510px</span>;
				<span class="hljs-attribute">height</span>: <span class="hljs-number">410px</span>;
				<span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
				<span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
			}


			<span class="hljs-comment">/*  è½¬ç›˜ä¸‹é¢çš„æ¯ä¸ªæ¨¡å—æ ·å¼ */</span>
			<span class="hljs-selector-id">#turntable-content</span>&gt;<span class="hljs-selector-tag">div</span> {
				<span class="hljs-attribute">display</span>: flex;
				<span class="hljs-attribute">align-items</span>: center;
				<span class="hljs-attribute">justify-content</span>: center;
				<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">25px</span>;
				<span class="hljs-attribute">width</span>: <span class="hljs-number">160px</span>;
				<span class="hljs-attribute">height</span>: <span class="hljs-number">130px</span>;
				<span class="hljs-attribute">text-align</span>: center;
				<span class="hljs-attribute">font-size</span>: <span class="hljs-number">25px</span>;
			}






			<span class="hljs-comment">/* å¹¸è¿è½¬ç›˜æœ€å¤–å±‚ */</span>
			<span class="hljs-selector-class">.draw-turntable-box</span> {
				<span class="hljs-attribute">display</span>: flex;
				<span class="hljs-attribute">align-items</span>: center;
				<span class="hljs-attribute">justify-content</span>: center;
				<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5%</span>;
				<span class="hljs-attribute">background</span>: <span class="hljs-number">#de4b3f</span>;
				<span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
				<span class="hljs-attribute">width</span>: <span class="hljs-number">600px</span>;
			}


			<span class="hljs-comment">/* å¼€å§‹æŠ½å¥–æŒ‰é’® */</span>
			<span class="hljs-selector-id">#startBtn</span> {
				<span class="hljs-attribute">cursor</span>: pointer;
				<span class="hljs-attribute">text-align</span>: center;
				<span class="hljs-attribute">display</span>: flex;
				<span class="hljs-attribute">align-items</span>: center;
				<span class="hljs-attribute">justify-content</span>: center;
				<span class="hljs-attribute">font-size</span>: <span class="hljs-number">22px</span>;
				<span class="hljs-attribute">white-space</span>: normal;
				<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#eb5e4a</span>;
				<span class="hljs-attribute">color</span>: white;
			}
			
			<span class="hljs-comment">/* å¥–é¡¹ */</span>
			<span class="hljs-selector-class">.unselected</span> {
				<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8e7c1</span>;
			}
			
			<span class="hljs-selector-class">.selected</span> {
				<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ee7c45</span>;
			}
		</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./img/draw.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"æŠ½å¥–æ ‡é¢˜"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"draw-title"</span> /&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"draw-turntable-box"</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"turntable-content"</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>ä¸€ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>äºŒç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>ä¸‰ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>å››ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"startBtn"</span>&gt;</span>å‚ä¸æ¸¸æˆ<span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>èµ¢å¾—å¤§å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>äº”ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>å…­ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>ä¸ƒç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"award unselected"</span>&gt;</span>å…«ç­‰å¥–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
			<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>


	<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="javascript">
		<span class="hljs-comment">// å¥–é¡¹å…ƒç´ åˆ—è¡¨</span>
		<span class="hljs-keyword">var</span> award = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByClassName</span>(<span class="hljs-string">"award"</span>);
		<span class="hljs-comment">// å·²ç»æ‹¿åˆ°çš„å¥–åŠ±åºå·</span>
		<span class="hljs-keyword">const</span> lucks = [];
		<span class="hljs-comment">// æ˜¯å¦æ­£åœ¨æŠ½å¥–</span>
		<span class="hljs-keyword">let</span> running = <span class="hljs-literal">false</span>;
		
		<span class="hljs-comment">// å¼€å§‹æŒ‰é’®å…ƒç´ </span>
		<span class="hljs-keyword">var</span> startBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"startBtn"</span>);
		
		startBtn.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
			<span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ­£åœ¨æŠ½å¥–</span>
			<span class="hljs-keyword">if</span> (running) <span class="hljs-keyword">return</span>;
			<span class="hljs-comment">// è®¾ç½®ä¸ºæ­£åœ¨æŠ½å¥–</span>
			running = <span class="hljs-literal">true</span>;
				
			<span class="hljs-comment">// å¯æŠ½å–çš„å¥–é¡¹ç¼–å·ï¼ˆ1~8ï¼‰æ’é™¤å·²ç»æŠ½å–çš„</span>
			<span class="hljs-keyword">const</span> available = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: award.<span class="hljs-property">length</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> i + <span class="hljs-number">1</span>)
				.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> !lucks.<span class="hljs-title function_">includes</span>(i));
				
			<span class="hljs-comment">// å…¨éƒ¨æŠ½å®Œ</span>
			<span class="hljs-keyword">if</span> (available.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
				startBtn.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">"æ‰€æœ‰å¥–é¡¹å·²æŠ½å®Œ"</span>;
				running = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">return</span>;
			}
				
			<span class="hljs-comment">// éšæœºä¸­å¥–ç¼–å·ï¼ˆ1~8ä¸­æœªæŠ½çš„ä¸€ä¸ªï¼‰</span>
			<span class="hljs-keyword">const</span> target = available[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * available.<span class="hljs-property">length</span>)];
				
			<span class="hljs-comment">// éšæœºåœˆæ•°ï¼ˆ2~4åœˆï¼‰</span>
			<span class="hljs-keyword">const</span> rounds = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">2</span>) + <span class="hljs-number">2</span>;
			<span class="hljs-keyword">const</span> totalSteps = rounds * award.<span class="hljs-property">length</span> + (target - <span class="hljs-number">1</span>);
				
			<span class="hljs-keyword">let</span> current = <span class="hljs-number">0</span>;
			<span class="hljs-keyword">let</span> speed = <span class="hljs-number">60</span>;
				
			<span class="hljs-keyword">function</span> <span class="hljs-title function_">spin</span>(<span class="hljs-params"/>) {
				<span class="hljs-keyword">const</span> index = current % award.<span class="hljs-property">length</span>;
				
				<span class="hljs-comment">// é‡ç½®æœªä¸­å¥–é¡¹é¢œè‰²</span>
				<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; award.<span class="hljs-property">length</span>; i++) {
					<span class="hljs-keyword">if</span> (!lucks.<span class="hljs-title function_">includes</span>(i + <span class="hljs-number">1</span>)) {
						award[i].<span class="hljs-property">className</span> = <span class="hljs-string">"award unselected"</span>;
					}
				}
				
				<span class="hljs-comment">// é«˜äº®å½“å‰</span>
				award[index].<span class="hljs-property">className</span> = <span class="hljs-string">"selected award"</span>;
				
				current++;
				
				<span class="hljs-comment">// æ˜¯å¦ç»“æŸ</span>
				<span class="hljs-keyword">if</span> (current &gt; totalSteps) {
					lucks.<span class="hljs-title function_">push</span>(index + <span class="hljs-number">1</span>);
					startBtn.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`æ­å–œæ‚¨ä¸­äº†&lt;br&gt;<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>ç­‰å¥– ğŸŠ`</span>;
					running = <span class="hljs-literal">false</span>;
					<span class="hljs-keyword">return</span>;
				}
				
				<span class="hljs-comment">// è¶Šæ¥è¿‘ç›®æ ‡é€Ÿåº¦è¶Šæ…¢</span>
				<span class="hljs-keyword">if</span> (totalSteps - current &lt; award.<span class="hljs-property">length</span>) {
					speed += <span class="hljs-number">40</span>;
				}
				
				<span class="hljs-built_in">setTimeout</span>(spin, speed);
			}
				
			<span class="hljs-title function_">spin</span>();
		};
	</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</span></code></pre>
<p>è½¬è½½è‡ªDOITç¤¾åŒº<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.doitwiki.com%2Farticle%2Fdetails%2F180486793636864" target="_blank" title="https://www.doitwiki.com/article/details/180486793636864" ref="nofollow noopener noreferrer">çº¯åŸç”Ÿhtml jså®ç°å¹¸è¿æŠ½å¥–è½¬ç›˜åŠŸèƒ½-å¥–é¡¹ä¸é‡å¤(javascriptå°æ¡ˆä¾‹)-DOITç¤¾åŒº</a> å¦‚æœ‰éœ€è¦å¤§å®¶å¯ä»¥å»æ­¤åœ°å€æ‹¿å–æ–‡ä»¶</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactã€TypeScriptã€reduce ä»¥åŠ Ant Design Pro Componentsï¼ˆantProcomponentï¼‰æ­å»ºå¼€å‘ç¯å¢ƒæ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7600986495927140393</link>    <guid>https://juejin.cn/post/7600986495927140393</guid>    <pubDate>2026-01-31T01:29:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600986495927140393" data-draft-id="7600986495927107625" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactã€TypeScriptã€reduce ä»¥åŠ Ant Design Pro Componentsï¼ˆantProcomponentï¼‰æ­å»ºå¼€å‘ç¯å¢ƒæ•™ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-31T01:29:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·22176592792"/> <meta itemprop="url" content="https://juejin.cn/user/4461135061323432"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactã€TypeScriptã€reduce ä»¥åŠ Ant Design Pro Componentsï¼ˆantProcomponentï¼‰æ­å»ºå¼€å‘ç¯å¢ƒæ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4461135061323432/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·22176592792
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T01:29:07.000Z" title="Sat Jan 31 2026 01:29:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æƒ³è¦çš„æ˜¯ä¸€å¥—å®Œæ•´çš„æ•™ç¨‹ï¼ŒæŒ‡å¯¼å¦‚ä½•æ­å»ºä¸€ä¸ªç»“åˆäº† Reactã€TypeScriptã€reduce ä»¥åŠ Ant Design Pro Componentsï¼ˆantProcomponentï¼‰çš„å¼€å‘ç¯å¢ƒï¼Œæˆ‘ä¼šä¸€æ­¥æ­¥å¸¦ä½ å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<h4 data-id="heading-0">ä¸€ã€ç¯å¢ƒå‡†å¤‡ï¼ˆå‰ç½®æ¡ä»¶ï¼‰</h4>
<p>åœ¨å¼€å§‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„ç”µè„‘å·²å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š</p>
<ol>
<li>Node.jsï¼ˆæ¨è 16.x æˆ– 18.x ç‰ˆæœ¬ï¼Œå¯é€šè¿‡ â€‹<code>â€‹node -vâ€‹</code>â€‹ æ£€æŸ¥ï¼‰</li>
<li>npm æˆ– yarnï¼ˆnpm éš Node.js è‡ªå¸¦ï¼Œyarn å¯é€šè¿‡ â€‹<code>â€‹npm install -g yarnâ€‹</code>â€‹ å®‰è£…ï¼‰</li>
<li>ä»£ç ç¼–è¾‘å™¨ï¼ˆæ¨è VS Codeï¼‰</li>
</ol>
<h4 data-id="heading-1">äºŒã€æ­å»º React + TypeScript åŸºç¡€é¡¹ç›®</h4>
<p>Ant Design Pro æä¾›äº†å¼€ç®±å³ç”¨çš„è„šæ‰‹æ¶ï¼Œèƒ½å¿«é€Ÿé›†æˆ TypeScript å’Œ Pro Componentsï¼Œæ¯”æ‰‹åŠ¨é…ç½®æ›´é«˜æ•ˆï¼š</p>
<h5 data-id="heading-2">æ­¥éª¤ 1ï¼šåˆ›å»º Ant Design Pro é¡¹ç›®</h5>
<p>æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆé€‰æ‹© TypeScript æ¨¡æ¿ï¼‰ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®</span>
npm create umi@latest <span class="hljs-keyword">my</span>-pro-app
<span class="hljs-comment"># æˆ–ç”¨ yarn</span>
yarn create umi <span class="hljs-keyword">my</span>-pro-app
</code></pre>
<p>æ‰§è¡Œåä¼šå‡ºç°äº¤äº’å¼é€‰æ‹©ï¼ŒæŒ‰ä»¥ä¸‹é€‰é¡¹é…ç½®ï¼š</p>
<ol>
<li>é€‰æ‹© â€‹<code>â€‹ant-design-proâ€‹</code>â€‹ï¼ˆPro æ¨¡æ¿ï¼‰</li>
<li>é€‰æ‹© â€‹<code>â€‹TypeScriptâ€‹</code>â€‹ï¼ˆè¯­è¨€ï¼‰</li>
<li>é€‰æ‹© â€‹<code>â€‹simpleâ€‹</code>â€‹ï¼ˆç®€æ˜“æ¨¡æ¿ï¼Œé€‚åˆæ–°æ‰‹ï¼‰</li>
<li>ç¡®è®¤å®‰è£…ä¾èµ–ï¼ˆç­‰å¾…ä¾èµ–ä¸‹è½½å®Œæˆï¼‰</li>
</ol>
<h5 data-id="heading-3">æ­¥éª¤ 2ï¼šå®‰è£…ä¾èµ–å¹¶å¯åŠ¨é¡¹ç›®</h5>
<p>è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œå®‰è£…ä¾èµ–å¹¶å¯åŠ¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> my-pro-app
<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm install
<span class="hljs-comment"># å¯åŠ¨å¼€å‘æœåŠ¡</span>
npm run start
</code></pre>
<p>å¯åŠ¨æˆåŠŸåï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ â€‹<code>â€‹http://localhost:8000â€‹</code>â€‹ï¼Œèƒ½çœ‹åˆ° Ant Design Pro çš„åŸºç¡€é¡µé¢ï¼Œè¯´æ˜ React + TypeScript + Pro Components ç¯å¢ƒå·²æ­å»ºå®Œæˆã€‚</p>
<h4 data-id="heading-4">ä¸‰ã€é›†æˆ reduceï¼ˆæ•°ç»„æ–¹æ³•ï¼‰çš„å®æˆ˜ç¤ºä¾‹</h4>
<p>React ä¸­å¸¸ä½¿ç”¨ â€‹<code>â€‹reduceâ€‹</code>â€‹ å¤„ç†æ•°ç»„æ•°æ®ï¼ˆæ¯”å¦‚æ•°æ®èšåˆã€ç­›é€‰ã€æ ¼å¼åŒ–ï¼‰ï¼Œç»“åˆ TypeScript èƒ½ä¿è¯ç±»å‹å®‰å…¨ï¼Œä»¥ä¸‹æ˜¯ç»“åˆ Pro Componentsï¼ˆå¦‚ ProTableï¼‰çš„å®æˆ˜ç¤ºä¾‹ï¼š</p>
<h5 data-id="heading-5">ç¤ºä¾‹ï¼šç”¨ reduce å¤„ç†è¡¨æ ¼æ•°æ®å¹¶æ¸²æŸ“ ProTable</h5>
<ol>
<li>åœ¨ â€‹<code>â€‹src/pagesâ€‹</code>â€‹ ä¸‹æ–°å»º â€‹<code>â€‹ReduceDemo.tsxâ€‹</code>â€‹ æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ProTable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ant-design/pro-components'</span>;

<span class="hljs-comment">// å®šä¹‰æ•°æ®ç±»å‹ï¼ˆTypeScript ç±»å‹çº¦æŸï¼‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserData</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">department</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">salary</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ReduceDemo</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// åŸå§‹æ¨¡æ‹Ÿæ•°æ®</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">rawData</span>: <span class="hljs-title class_">UserData</span>[] = [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">department</span>: <span class="hljs-string">'å‰ç«¯'</span>, <span class="hljs-attr">salary</span>: <span class="hljs-number">15000</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æå››'</span>, <span class="hljs-attr">department</span>: <span class="hljs-string">'åç«¯'</span>, <span class="hljs-attr">salary</span>: <span class="hljs-number">18000</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'ç‹äº”'</span>, <span class="hljs-attr">department</span>: <span class="hljs-string">'å‰ç«¯'</span>, <span class="hljs-attr">salary</span>: <span class="hljs-number">16000</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'èµµå…­'</span>, <span class="hljs-attr">department</span>: <span class="hljs-string">'åç«¯'</span>, <span class="hljs-attr">salary</span>: <span class="hljs-number">20000</span> },
  ];

  <span class="hljs-comment">// ç”¨ reduce èšåˆï¼šæŒ‰éƒ¨é—¨åˆ†ç»„ï¼Œè®¡ç®—æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„</span>
  <span class="hljs-keyword">const</span> departmentSalary = rawData.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, item</span>) =&gt;</span> {
    <span class="hljs-comment">// ç±»å‹å®ˆå«ï¼Œç¡®ä¿ acc ç»“æ„æ­£ç¡®</span>
    <span class="hljs-keyword">if</span> (!acc[item.<span class="hljs-property">department</span>]) {
      acc[item.<span class="hljs-property">department</span>] = {
        <span class="hljs-attr">total</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">average</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">list</span>: [] <span class="hljs-keyword">as</span> <span class="hljs-title class_">UserData</span>[],
      };
    }
    <span class="hljs-comment">// ç´¯åŠ å·¥èµ„å’Œäººæ•°</span>
    acc[item.<span class="hljs-property">department</span>].<span class="hljs-property">total</span> += item.<span class="hljs-property">salary</span>;
    acc[item.<span class="hljs-property">department</span>].<span class="hljs-property">count</span> += <span class="hljs-number">1</span>;
    <span class="hljs-comment">// å­˜å…¥å½“å‰ç”¨æˆ·</span>
    acc[item.<span class="hljs-property">department</span>].<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(item);
    <span class="hljs-comment">// è®¡ç®—å¹³å‡å·¥èµ„ï¼ˆä¿ç•™2ä½å°æ•°ï¼‰</span>
    acc[item.<span class="hljs-property">department</span>].<span class="hljs-property">average</span> = <span class="hljs-title class_">Number</span>(
      (acc[item.<span class="hljs-property">department</span>].<span class="hljs-property">total</span> / acc[item.<span class="hljs-property">department</span>].<span class="hljs-property">count</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>)
    );
    <span class="hljs-keyword">return</span> acc;
  }, {} <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, { <span class="hljs-attr">total</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">average</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">list</span>: <span class="hljs-title class_">UserData</span>[] }&gt;);

  <span class="hljs-comment">// è½¬æ¢ä¸º ProTable å¯æ¸²æŸ“çš„æ ¼å¼</span>
  <span class="hljs-keyword">const</span> tableData = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(departmentSalary).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[dept, data]</span>) =&gt;</span> ({
    <span class="hljs-attr">department</span>: dept,
    <span class="hljs-attr">totalSalary</span>: data.<span class="hljs-property">total</span>,
    <span class="hljs-attr">personCount</span>: data.<span class="hljs-property">count</span>,
    <span class="hljs-attr">averageSalary</span>: data.<span class="hljs-property">average</span>,
  }));

  <span class="hljs-comment">// ProTable åˆ—é…ç½®</span>
  <span class="hljs-keyword">const</span> columns = [
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'éƒ¨é—¨'</span>,
      <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'department'</span>,
      <span class="hljs-attr">key</span>: <span class="hljs-string">'department'</span>,
    },
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'æ€»å·¥èµ„'</span>,
      <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'totalSalary'</span>,
      <span class="hljs-attr">key</span>: <span class="hljs-string">'totalSalary'</span>,
    },
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'äººæ•°'</span>,
      <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'personCount'</span>,
      <span class="hljs-attr">key</span>: <span class="hljs-string">'personCount'</span>,
    },
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'å¹³å‡å·¥èµ„'</span>,
      <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'averageSalary'</span>,
      <span class="hljs-attr">key</span>: <span class="hljs-string">'averageSalary'</span>,
    },
  ];

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">20</span> }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Reduce + ProTable å®æˆ˜ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ProTable</span>
        <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{tableData}</span>
        <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span>
        <span class="hljs-attr">rowKey</span>=<span class="hljs-string">"department"</span>
        <span class="hljs-attr">pagination</span>=<span class="hljs-string">{false}</span>
        <span class="hljs-attr">title</span>=<span class="hljs-string">{()</span> =&gt;</span> 'å„éƒ¨é—¨å·¥èµ„ç»Ÿè®¡ï¼ˆåŸºäºreduceèšåˆï¼‰'}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ReduceDemo</span>;
</code></pre>
<ol start="2">
<li>é…ç½®è·¯ç”±ï¼šä¿®æ”¹ â€‹<code>â€‹src/config/routes.tsâ€‹</code>â€‹ï¼Œæ·»åŠ æ–°è·¯ç”±ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">IRouteProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@umijs/max'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title class_">IRouteProps</span>[] = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">redirect</span>: <span class="hljs-string">'/reduce-demo'</span>,
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/reduce-demo'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Reduceç¤ºä¾‹'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-string">'./ReduceDemo'</span>,
  },
];

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> routes;
</code></pre>
<ol start="3">
<li>é‡å¯é¡¹ç›®ï¼ˆâ€‹<code>â€‹npm run startâ€‹</code>â€‹ï¼‰ï¼Œè®¿é—® â€‹<code>â€‹http://localhost:8000/reduce-demoâ€‹</code>â€‹ï¼Œå°±èƒ½çœ‹åˆ°ç”¨ â€‹<code>â€‹reduceâ€‹</code>â€‹ èšåˆåçš„æ•°æ®é€šè¿‡ ProTable æ¸²æŸ“çš„è¡¨æ ¼ã€‚</li>
</ol>
<h4 data-id="heading-6">å››ã€å…³é”®çŸ¥è¯†ç‚¹è§£é‡Š</h4>
<ol>
<li><strong>TypeScript ç±»å‹çº¦æŸ</strong>ï¼š</li>
</ol>
<ul>
<li>å®šä¹‰ â€‹<code>â€‹UserDataâ€‹</code>â€‹ æ¥å£è§„èŒƒåŸå§‹æ•°æ®ç»“æ„ï¼Œé¿å…ç±»å‹é”™è¯¯ï¼›</li>
<li>â€‹<code>â€‹Record&lt;string, ...&gt;â€‹</code>â€‹ çº¦æŸ â€‹<code>â€‹reduceâ€‹</code>â€‹ ç´¯åŠ å™¨çš„ç±»å‹ï¼Œç¡®ä¿ â€‹<code>â€‹accâ€‹</code>â€‹ çš„å±æ€§å’Œå€¼ç±»å‹ç¬¦åˆé¢„æœŸã€‚</li>
</ul>
<ol start="2">
<li><strong>reduce æ ¸å¿ƒé€»è¾‘</strong>ï¼š</li>
</ol>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå›è°ƒå‡½æ•°ï¼Œæ¥æ”¶ â€‹<code>â€‹accâ€‹</code>â€‹ï¼ˆç´¯åŠ å™¨ï¼‰å’Œ â€‹<code>â€‹itemâ€‹</code>â€‹ï¼ˆå½“å‰é¡¹ï¼‰ï¼Œè¿”å›æ›´æ–°åçš„ç´¯åŠ å™¨ï¼›</li>
<li>ç¬¬äºŒä¸ªå‚æ•°ï¼šç´¯åŠ å™¨åˆå§‹å€¼ï¼ˆè¿™é‡Œæ˜¯ç©ºå¯¹è±¡ï¼Œä¸”ç”¨ TypeScript å®šä¹‰äº†ç»“æ„ï¼‰ï¼›</li>
<li>ä½œç”¨ï¼šæ›¿ä»£å¾ªç¯ï¼Œé«˜æ•ˆå®Œæˆâ€œåˆ†ç»„ + è®¡ç®—â€çš„èšåˆæ“ä½œã€‚</li>
</ul>
<ol start="3">
<li><strong>Ant Design Pro Components ä¼˜åŠ¿</strong>ï¼š</li>
</ol>
<ul>
<li>â€‹<code>â€‹ProTableâ€‹</code>â€‹ å†…ç½®äº†åˆ†é¡µã€ç­›é€‰ã€æ’åºç­‰åŠŸèƒ½ï¼Œæ¯”åŸç”Ÿ Table æ›´æ˜“ç”¨ï¼›</li>
<li>æ”¯æŒ TypeScript ç±»å‹æ¨å¯¼ï¼Œåˆ—é…ç½®çš„ â€‹<code>â€‹dataIndexâ€‹</code>â€‹ ä¼šè‡ªåŠ¨æ ¡éªŒæ˜¯å¦åŒ¹é…æ•°æ®æºã€‚</li>
</ul>
<h4 data-id="heading-7">æ€»ç»“</h4>
<ol>
<li>ç¯å¢ƒæ­å»ºæ ¸å¿ƒï¼šé€šè¿‡ Ant Design Pro è„šæ‰‹æ¶å¿«é€Ÿé›†æˆ React + TypeScript + Pro Componentsï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®å¤æ‚çš„ Webpack/TSConfigï¼›</li>
<li>reduce å®æˆ˜ï¼šç»“åˆ TypeScript ç±»å‹çº¦æŸï¼Œç”¨ reduce å®Œæˆæ•°ç»„èšåˆï¼ˆåˆ†ç»„ã€è®¡ç®—ï¼‰ï¼Œå†é€šè¿‡ ProTable æ¸²æŸ“ç»“æœï¼›</li>
<li>å…³é”®è¦ç‚¹ï¼šTypeScript æ¥å£/ç±»å‹å®ˆå«ä¿è¯ç±»å‹å®‰å…¨ï¼Œreduce æ›¿ä»£å¾ªç¯æå‡ä»£ç ç®€æ´æ€§ï¼ŒPro Components ç®€åŒ–ä¸šåŠ¡ç»„ä»¶å¼€å‘ã€‚</li>
</ol>
<p>å¦‚æœéœ€è¦æ‰©å±•åŠŸèƒ½ï¼ˆæ¯”å¦‚æ¥å£è¯·æ±‚ã€çŠ¶æ€ç®¡ç†ï¼‰ï¼Œå¯ä»¥åŸºäºè¿™ä¸ªåŸºç¡€ç¯å¢ƒï¼Œç»“åˆ Umi Max çš„è¯·æ±‚åº“ï¼ˆâ€‹<code>â€‹@umijs/maxâ€‹</code>â€‹ï¼‰æˆ– React Context/Redux è¿›ä¸€æ­¥å¼€å‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[webpack å®Œæˆå·¥ç¨‹åŒ–å»ºè®¾]]></title>    <link>https://juejin.cn/post/7600955777316716582</link>    <guid>https://juejin.cn/post/7600955777316716582</guid>    <pubDate>2026-01-31T01:34:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600955777316716582" data-draft-id="7600560664407375935" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="webpack å®Œæˆå·¥ç¨‹åŒ–å»ºè®¾"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-31T01:34:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ccccc__"/> <meta itemprop="url" content="https://juejin.cn/user/3496880960971997"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            webpack å®Œæˆå·¥ç¨‹åŒ–å»ºè®¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3496880960971997/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ccccc__
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T01:34:15.000Z" title="Sat Jan 31 2026 01:34:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å¼•è¨€ -- æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ webpack ç­‰æ‰“åŒ…å·¥å…·æ¥è¿›è¡Œå·¥ç¨‹åŒ–</h2>
<p>æˆ‘ä»¬åœ¨å®ç°ä¸€ä¸ªç½‘é¡µé¡¹ç›®çš„æ—¶å€™ï¼Œé€šå¸¸éƒ½ä¼šæœ‰å¾ˆå¤šçš„ jsï¼Œcssï¼Œå…¶ä»–çš„ä¸€äº›èµ„æºæ–‡ä»¶ã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥ä¸¢ç»™æµè§ˆå™¨çš„è¯ï¼Œä»–å°†ä¼šé¢ä¸´ä¸¤ä¸ªå¤§é—®é¢˜ï¼š
1.è¦è¯·æ±‚åŠ è½½è¿™äº›æ–‡ä»¶ï¼Œé€Ÿåº¦å¾ˆæ…¢ï¼Œä¼šå½±å“åŠ è½½çš„æ•ˆç‡ã€‚
2.æµè§ˆå™¨å¯¹äºæŸäº›æ–‡ä»¶æ— æ³•è¯†åˆ«ï¼Œä¾‹å¦‚ç¬¬ä¸‰æ–¹node_moduleï¼Œ tsï¼Œless ä»£ç ç­‰æ–‡ä»¶ã€‚</p>
<p>è¿™æ¶‰åŠåˆ°å¼€å‘è¿‡ç¨‹å’Œè¿è¡Œè¿‡ç¨‹ï¼Œè¿™äº›é—®é¢˜éƒ½æ˜¯æˆ‘ä»¬çš„ç—›ç‚¹æ‰€åœ¨ã€‚å¼€å‘è¿‡ç¨‹æˆ‘ä»¬å¸Œæœ›æ”¹åŠ¨æ–‡ä»¶åç¼–è¾‘åŠ è½½çš„é€Ÿåº¦èƒ½æ›´å¿«ï¼Œè®©æˆ‘ä»¬æ›´å¥½çš„è°ƒè¯•ä»£ç ã€‚è¿è¡Œä¸Šçº¿çš„æ—¶å€™æˆ‘ä»¬åˆ™æ˜¯å¸Œæœ›èƒ½å¤ŸåŠ è½½çš„æ›´åŠ é¡ºç•…ã€‚è¿™å°±æ˜¯æˆ‘ä»¬çš„æ‰“åŒ…å·¥å…·æ‰€è¦è§£å†³çš„é—®é¢˜ï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨æ‰“åŒ…å·¥å…·ï¼Œå°†è¿™äº›æ–‡ä»¶è¿›è¡ŒåŠ å·¥ï¼Œå°†ä»–ä»¬æ•´åˆæˆå°½å¯èƒ½å°‘çš„æ–‡ä»¶æ•°é‡ï¼Œä»¥åŠæµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«çš„æ–‡ä»¶æ¥è¿›è¡Œç¼–è¯‘ã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒæ¦‚å¿µ =&gt; webpack</h2>
<h4 data-id="heading-2">webpack</h4>
<p>webpack æ˜¯ä¸€ä¸ªç”¨äºå‰ç«¯å¼€å‘çš„é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œèƒ½å¤Ÿå°†é¡¹ç›®ä¸­çš„å„ç§èµ„æºï¼ˆå¦‚javaScriptï¼Œcssï¼Œå›¾ç‰‡ç­‰ï¼‰è§†ä¸ºæ¨¡å—ï¼Œé€šè¿‡åˆ†æä¾èµ–å…³ç³»æ‰“åŒ…æˆä¼˜åŒ–åçš„é™æ€æ–‡ä»¶æ¥æå‡å¼€å‘æ•ˆç‡å’Œé¡¹ç›®å¯ç»´æŠ¤æ€§ã€‚</p>
<h5 data-id="heading-3">å…³é”®ç»„æˆéƒ¨åˆ†</h5>
<p>å…¥å£ï¼šEntryï¼šæŒ‡å®šæ‰“åŒ…çš„å…¥å£æ–‡ä»¶
å‡ºå£ï¼šOutputï¼šå®šä¹‰æ‰“åŒ…åçš„æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„å’Œåç§°ã€‚
åŠ è½½å™¨ï¼šLoaderï¼šè´Ÿè´£å°†å„ç±»é JavaSript èµ„æºè½¬åŒ–æˆæ¨¡å—ã€‚ï¼ˆå¸®åŠ©æµè§ˆå™¨å°†æœ‰å¯èƒ½æ— æ³•è¯†åˆ«çš„æ–‡ä»¶è½¬åŒ–æˆèƒ½å¤Ÿè¯†åˆ«çš„æ–‡ä»¶ï¼‰
æ’ä»¶ï¼šPluginï¼šç”¨äºæ‰§è¡Œå¤æ‚çš„è‡ªå®šä¹‰ä»»åŠ¡ï¼Œæ‰©å±• webpack åŠŸèƒ½ã€‚
æ–‡ä»¶åˆ«åé…ç½®ï¼šresolve</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-comment">// å…¥å£é…ç½®</span>
    <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/main.js'</span>,  
    <span class="hljs-comment">// äº§ç‰©è¾“å‡ºè·¯å¾„</span>
    <span class="hljs-attr">output</span>: {}, 
    <span class="hljs-comment">// é…ç½®æ¨¡å—è§£æçš„å…·ä½“è¡Œä¸ºï¼Œ(å®šä¹‰ webpack åœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œæ˜¯æ€ä¹ˆæ‰¾åˆ°å¹¶è§£æå…·ä½“æ¨¡å—)</span>
    <span class="hljs-attr">resolve</span>: {
      <span class="hljs-attr">extensions</span>: [<span class="hljs-string">".js"</span>, <span class="hljs-string">".vue"</span>, <span class="hljs-string">".less"</span>, <span class="hljs-string">"css"</span>] <span class="hljs-comment">// è‡ªåŠ¨è§£æè¿™äº›æ–‡ä»¶</span>
      <span class="hljs-attr">alias</span>: { <span class="hljs-attr">$xxxx</span>: xxxx } <span class="hljs-comment">// å¯ä»¥å°†å¯¹åº”çš„è·¯å¾„æ–‡ä»¶æŒ‡å‘ä¸€ä¸ªå…·ä½“çš„æ›¿ä»£</span>
    }, 
    <span class="hljs-comment">// é…ç½®æ’ä»¶</span>
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-comment">// å¤„ç†vueæ–‡ä»¶ï¼Œå°†æˆ‘ä»¬è®¾å®šçš„è§„åˆ™éƒ½èƒ½å¤Ÿåœ¨vueæ–‡ä»¶ä¸­è¿è¡Œ</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueLoaderPlugin</span>(),
        <span class="hljs-comment">// æŠŠç¬¬ä¸‰æ–¹åº“æš´éœ²åˆ°å…¨å±€ window ä¸Šä¸‹æ–‡, å¯ä»¥åœ¨æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨ï¼Œä¾‹å¦‚ vueï¼Œ axiosç­‰åº“ï¼Œæ— éœ€å†å•ç‹¬å¯¼å…¥</span>
        <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">ProvidePlugin</span>({
             <span class="hljs-title class_">Vue</span>: <span class="hljs-string">"vue"</span>,
             <span class="hljs-attr">axios</span>: <span class="hljs-string">"axios"</span>,
             <span class="hljs-attr">_</span>: <span class="hljs-string">"lodash"</span>,
        }),
        <span class="hljs-comment">// å®šä¹‰å…¨å±€å¸¸é‡ å…³äºvueçš„ä¸€äº›è®¾ç½®</span>
        <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">DefinePlugin</span>({
          <span class="hljs-attr">_VUE_OPTIONS_API_</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ”¯æŒvueè§£æoptionsApi</span>
          <span class="hljs-attr">_VUE_PROD_DEVTOOLS_</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ç¦ç”¨vueè°ƒè¯•å·¥å…·</span>
          <span class="hljs-attr">_VUE_PROD_HYDRATIO_MISMATCH_DETAILS_</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ç¦ç”¨ç”Ÿäº§ç¯å¢ƒæ˜¾ç¤º 'æ°´åˆ' ä¿¡æ¯</span>
        }),
        <span class="hljs-comment">// æ¸²æŸ“æˆ‘ä»¬æŒ‡å®šçš„æ¨¡æ¿ä»£ç </span>
         <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({
              <span class="hljs-comment">// äº§ç‰©ï¼ˆæœ€ç»ˆæ¨¡æ¿ï¼‰è¾“å‡ºè·¯å¾„</span>
              <span class="hljs-attr">filename</span>: path.<span class="hljs-title function_">resolve</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">"../app/public/dist/entry.tpl"</span>),
              <span class="hljs-comment">// æŒ‡å®šè¦ä½¿ç”¨çš„æ¨¡æ¿æ–‡ä»¶</span>
              <span class="hljs-attr">template</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"../../view/entry.tpl"</span>), 
              <span class="hljs-comment">// è¦æ³¨å…¥çš„ä»£ç å—</span>
              <span class="hljs-attr">chunks</span>: [<span class="hljs-string">`<span class="hljs-subst">${enrtyName}</span>`</span>], 
    })
    ], 
    <span class="hljs-comment">// æ‰“åŒ…è¾“å‡ºä¼˜åŒ–ï¼ˆé…ç½®ä»£ç åˆ†å‰²ï¼Œç¼“å­˜ï¼ŒTreeshaingï¼Œå‹ç¼©ä¼˜åŒ–è¡Œä¸ºï¼‰</span>
    <span class="hljs-attr">optimization</span>: {
     <span class="hljs-comment">// å°† js æ–‡ä»¶æ‰“åŒ…æˆä¸‰ç§ç±»å‹</span>
     <span class="hljs-comment">// 1. vendor: ç¬¬ä¸‰æ–¹åº“ä»£ç </span>
     <span class="hljs-comment">// 2. commonï¼šä¸šåŠ¡ç»„ä»¶ä»£ç çš„å…¬å…±éƒ¨åˆ†</span>
     <span class="hljs-comment">// 3. entryï¼šæ¯ä¸ªé¡µé¢ç‹¬æœ‰çš„ä¸šåŠ¡ä»£ç </span>
     <span class="hljs-comment">// å°†æ”¹åŠ¨é¢‘ç‡ä¸ä¸€æ ·çš„jsåŒºåˆ†å‡ºæ¥ï¼Œæ›´å¥½çš„åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜çš„æ•ˆæœ</span>
     <span class="hljs-attr">splitChunks</span>: {
         <span class="hljs-comment">// å¯¹æ‰€æœ‰çš„æ¨¡æ¿éƒ½è¿›è¡Œåˆ†å‰²</span>
         <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>, 
         <span class="hljs-comment">// æ¯æ¬¡å¼‚æ­¥åŠ è½½çš„æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°</span>
         <span class="hljs-attr">maxAsyncRequests</span>: <span class="hljs-number">10</span>,
         <span class="hljs-comment">// å…¥å£ç‚¹çš„æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°é‡</span>
         <span class="hljs-attr">maxInitialRequests</span>: <span class="hljs-number">10</span>,
          <span class="hljs-attr">cacheGroups</span>: {
          <span class="hljs-attr">vendor</span>: {
            <span class="hljs-comment">//ç¬¬ä¸‰æ–¹ä¾èµ–åº“</span>
            <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>, <span class="hljs-comment">//æ‰“åŒ…node_modulesä¸­çš„æ–‡ä»¶</span>
            <span class="hljs-attr">name</span>: <span class="hljs-string">"vendor"</span>, <span class="hljs-comment">//æ¨¡å—åç§°</span>
            <span class="hljs-attr">priority</span>: <span class="hljs-number">20</span>, <span class="hljs-comment">//ä¼˜å…ˆçº§</span>
            <span class="hljs-attr">enforce</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//å¼ºåˆ¶æ‰§è¡Œ</span>
            <span class="hljs-attr">reuseExistingChunk</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//å¯å¤ç”¨å·²å­˜åœ¨çš„æ¨¡å—</span>
          },
          <span class="hljs-attr">common</span>: {
            <span class="hljs-comment">//å…¬å…±æ¨¡å—</span>
            <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]common|widgets[\\/]/</span>,
            <span class="hljs-attr">name</span>: <span class="hljs-string">"common"</span>, <span class="hljs-comment">//æ¨¡å—åç§°</span>
            <span class="hljs-attr">minChunks</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">//æœ€å°‘è¢«ä¸¤ä¸ªæ¨¡å—å¼•ç”¨æ‰æ‰“åŒ…</span>
            <span class="hljs-attr">minSize</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">//æœ€å°åˆ†å‰²æ–‡ä»¶å¤§å°</span>
            <span class="hljs-attr">priority</span>: <span class="hljs-number">10</span>, <span class="hljs-comment">// ä¼˜å…ˆçº§</span>
            <span class="hljs-attr">reuseExistingChunk</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//å¯å¤ç”¨å·²å­˜åœ¨çš„æ¨¡å—</span>
          },
        },
     }
    } 
}
</code></pre>
<p>åŸºç¡€çš„é…ç½®å¦‚ä¸Šè¿°ä»£ç æ‰€ç¤ºï¼Œè¿™æ ·å­æˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªåŸºç¡€çš„ webpack é…ç½®ã€‚</p>
<h4 data-id="heading-4">å·¥ç¨‹åŒ–è®¾è®¡</h4>
<h5 data-id="heading-5">å¤šç¯å¢ƒå·®å¼‚åŒ–é…ç½®</h5>
<p>æˆ‘ä»¬å¯ä»¥åˆ’åˆ†æˆä¸ºå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒï¼Œæ¯ä¸ªç¯å¢ƒå¯¹åº”çš„é…ç½®æœ‰å…±åŒæ€§ï¼Œä¹Ÿæœ‰å·®å¼‚æ€§ï¼Œå¼€å‘ç¯å¢ƒæ›´æ³¨é‡è°ƒè¯•å’Œå¼€å‘æ•ˆç‡ï¼Œè€Œç”Ÿäº§ç¯å¢ƒåˆ™æ›´é‡è§†ä»£ç å‹ç¼©å’Œèµ„æºä¼˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶é…ç½®æ–‡ä»¶åˆ’åˆ†æˆä¸ºä¸‰å—</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c5ff5567ae74212971ec1e97a5ef18d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2NjY2NfXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770428054&amp;x-signature=QDKVev9Z5QDKR7ngh387dmEEr%2Bg%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>webpack.base.js: åšå¤šå…¥å£æ–‡ä»¶é…ç½®ï¼Œæ¨¡æ¿ç”Ÿæˆï¼Œè¿˜æœ‰ä¸€äº›å…±åŒæ€§çš„é…ç½®ï¼Œç„¶åæš´éœ²å‡ºå»ä¸ºbaseConfigï¼Œç”¨äºå…¶ä»–ç¯å¢ƒé…ç½®å¯¹ä»–è¿›è¡Œæ‰©å±•ã€‚</li>
<li>webpack.dev.js: çƒ­æ›´æ–°HMRï¼Œdevtoolå¼€å‘å·¥å…·ï¼Œçƒ­æ›´æ–°æ’ä»¶é…ç½®</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> merge = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-merge'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>)
<span class="hljs-comment">// åŸºç±»é…ç½®</span>
<span class="hljs-keyword">const</span> baseConfig = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./webpack.base.js'</span>);

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DEV_SERVER_CONFIG</span> = {
    <span class="hljs-attr">HOST</span>: <span class="hljs-string">'127.0.0.1'</span>,
    <span class="hljs-attr">PORT</span>: <span class="hljs-number">9002</span>,
    <span class="hljs-attr">HMR_PATH</span>: <span class="hljs-string">'__webpack_hmr'</span>, <span class="hljs-comment">// å®˜æ–¹è§„å®šï¼Œä¿®æ­£å‘½å</span>
    <span class="hljs-attr">TIMEOUT</span>: <span class="hljs-number">20000</span>
}


<span class="hljs-comment">//å¼€å‘é˜¶æ®µçš„entryé…ç½®éœ€è¦åŠ å…¥hmr</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(baseConfig.<span class="hljs-property">entry</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> {
    <span class="hljs-comment">//ç¬¬ä¸‰æ–¹åŒ…ä¸ä½œä¸ºhmrå…¥å£</span>
    <span class="hljs-keyword">if</span> (v !== <span class="hljs-string">'vendor'</span>) {
        baseConfig.<span class="hljs-property">entry</span>[v] = [
            <span class="hljs-comment">//ä¸»å…¥å£æ–‡ä»¶</span>
            baseConfig.<span class="hljs-property">entry</span>[v],
            <span class="hljs-comment">//hmræ›´æ–°å…¥å£ï¼Œå®˜æ–¹æŒ‡å®šçš„hmrè·¯å¾„</span>
            <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'webpack-hot-middleware/client'</span>)}</span>?path=http://<span class="hljs-subst">${DEV_SERVER_CONFIG.HOST}</span>:<span class="hljs-subst">${DEV_SERVER_CONFIG.PORT}</span>/<span class="hljs-subst">${DEV_SERVER_CONFIG.HMR_PATH}</span>&amp;timeout=<span class="hljs-subst">${DEV_SERVER_CONFIG.TIMEOUT}</span>&amp;reload=true`</span>
        ]
    }
}) 

<span class="hljs-comment">//å¼€å‘ç¯å¢ƒ webpack é…ç½®</span>
<span class="hljs-keyword">const</span> webpackDevConfig = merge.<span class="hljs-title function_">smart</span>(baseConfig, {
    <span class="hljs-comment">//æŒ‡å®šå¼€å‘ç¯å¢ƒ</span>
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'development'</span>,
    <span class="hljs-comment">//source-map å¼€å‘å·¥å…·ï¼Œå‘ˆç°ä»£ç æ˜ å°„å…³ç³»ï¼Œä»¥ä¾¿åœ¨å¼€å‘è¿‡ç¨‹ä¸­è°ƒè¯•ä»£ç </span>
    <span class="hljs-attr">devtool</span>: <span class="hljs-string">'eval-cheap-module-source-map'</span>,
    <span class="hljs-comment">//å¼€å‘é˜¶æ®µoutputé…ç½®</span>
    <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">filename</span>: <span class="hljs-string">'js/[name]_[chunkhash:8].bundle.js'</span>,
        <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">'./app/public/dist/dev/'</span>), <span class="hljs-comment">//è¾“å‡ºæ–‡ä»¶å­˜å‚¨è·¯å¾„</span>
        <span class="hljs-attr">publicPath</span>: <span class="hljs-string">`http://<span class="hljs-subst">${DEV_SERVER_CONFIG.HOST}</span>:<span class="hljs-subst">${DEV_SERVER_CONFIG.PORT}</span>/public/dist/dev`</span>, <span class="hljs-comment">//å¤–éƒ¨èµ„æºå…¬å…±è·¯å¾„</span>
        <span class="hljs-attr">globalObject</span>: <span class="hljs-string">'this'</span>
    },
    <span class="hljs-comment">//å¼€å‘é˜¶æ®µæ’ä»¶</span>
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-comment">//ç”¨äºå®ç°çƒ­æ¨¡å—æ›¿æ¢ï¼ˆï¼‰</span>
        <span class="hljs-comment">//å…è®¸åœ¨è¿ç”¨ç¨‹åºè¿è¡Œæ—¶æ›¿æ¢æ¨¡å—</span>
        <span class="hljs-comment">//æå¤§çš„æå‡å¼€å‘æ•ˆç‡ï¼Œå› ä¸ºèƒ½è®©åº”ç”¨ç¨‹åºä¸€ç›´ä¿æŒè¿è¡ŒçŠ¶æ€</span>
        <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">HotModuleReplacementPlugin</span>({
            <span class="hljs-attr">multiStep</span>: <span class="hljs-literal">false</span>,
        })
    ]
})

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-comment">// webpack é…ç½®ï¼ˆå¯¼å‡ºä¸º `webpackDevConfig` ä»¥åŒ¹é…ä½¿ç”¨å¤„ï¼‰</span>
    webpackDevConfig,
    <span class="hljs-comment">// devServer é…ç½® æš´éœ²ç»™ dev.js ä½¿ç”¨</span>
    <span class="hljs-variable constant_">DEV_SERVER_CONFIG</span>
};
</code></pre>
<ul>
<li>webpack.prod.js: é‡è§†ä»£ç èµ„æºï¼Œä¼šåšä¸€äº›ä»£ç å‹ç¼©æ“ä½œï¼Œtree-shaking å‰”é™¤æ— ç”¨ä»£ç ï¼Œä»¥åŠhappypackå¤šçº¿ç¨‹æ‰“åŒ…</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> merge = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-merge'</span>);
<span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">'os'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HappyPack</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'happypack'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MiniCssExtractPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mini-css-extract-plugin'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CleanWEbpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'clean-webpack-plugin'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CSSMinimizerPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'css-minimizer-webpack-plugin'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackInjectAttributesPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'html-webpack-inject-attributes-plugin'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">TerserPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'terser-webpack-plugin'</span>);
<span class="hljs-comment">// åŸºç±»é…ç½®</span>
<span class="hljs-keyword">const</span> baseConfig = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./webpack.base.js'</span>);

<span class="hljs-comment">//å¤šçº¿ç¨‹buildé…ç½®</span>
<span class="hljs-keyword">const</span> happypackCommonConfig = {
    <span class="hljs-attr">debug</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">threadPool</span>: <span class="hljs-title class_">HappyPack</span>.<span class="hljs-title class_">ThreadPool</span>({ <span class="hljs-attr">size</span>: os.<span class="hljs-title function_">cpus</span>().<span class="hljs-property">length</span> }),
}


<span class="hljs-comment">//ç”Ÿäº§ç¯å¢ƒ webpack é…ç½®</span>
<span class="hljs-keyword">const</span> webpackProdConfig = merge.<span class="hljs-title function_">smart</span>(baseConfig, {
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>, <span class="hljs-comment">//æŒ‡å®šç”Ÿäº§ç¯å¢ƒ</span>
    <span class="hljs-attr">output</span>: baseConfig.<span class="hljs-property">output</span> = {
        <span class="hljs-attr">filename</span>: <span class="hljs-string">'js/[name]_[chunkhash:8].bundle.js'</span>,
        <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">join</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">'./app/public/dist/prod'</span>),
        <span class="hljs-attr">publicPath</span>: <span class="hljs-string">'/dist/prod/'</span>,
        <span class="hljs-attr">crossOriginLoading</span>: <span class="hljs-string">'anonymous'</span>
    },
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [{
            <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,
            <span class="hljs-attr">use</span>: [<span class="hljs-title class_">MiniCssExtractPlugin</span>.<span class="hljs-property">loader</span>, <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'happypack/loader'</span>)}</span>?id=css`</span>]
        }, {
            <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
            <span class="hljs-attr">include</span>: [
                path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'../../pages'</span>),
                <span class="hljs-comment">// å¤„ç†ä¸šåŠ¡ç›®å½•ä¸‹çš„</span>
                path.<span class="hljs-title function_">resolve</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">"./app/pages"</span>),
            ],
            <span class="hljs-attr">use</span>: [<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'happypack/loader'</span>)}</span>?id=js`</span>]
        }]
    },
    <span class="hljs-comment">// webpack ä¸ä¼šæœ‰å¤§é‡ hints ä¿¡æ¯ï¼Œ é»˜è®¤ä¸º warning</span>
    <span class="hljs-attr">performance</span>: {
        <span class="hljs-attr">hints</span>: <span class="hljs-literal">false</span>
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-comment">//æ¯æ¬¡ build å‰æ¸…ç©ºpublic/distç›®å½•</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">CleanWEbpackPlugin</span>([<span class="hljs-string">'public/dist/prod'</span>], {
            <span class="hljs-attr">root</span>: path.<span class="hljs-title function_">resolve</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">'./app/'</span>),
            <span class="hljs-attr">exclued</span>: [],
            <span class="hljs-attr">verbose</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">dry</span>: <span class="hljs-literal">false</span>
        }),
        <span class="hljs-comment">//æå–cssçš„å…¬å…±éƒ¨åˆ†ï¼Œæœ‰æ•ˆåˆ©ç”¨ç¼“å­˜ï¼Œéå…¬å…±çš„cssä½¿ç”¨inline</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">MiniCssExtractPlugin</span>({
            <span class="hljs-attr">chunkFilename</span>: <span class="hljs-string">'css/[name]_[contenthash:8].bundle.css'</span>,
        }),
        <span class="hljs-comment">//ä¼˜åŒ–å¹¶å‹ç¼©cssèµ„æº</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">CSSMinimizerPlugin</span>(),
        <span class="hljs-comment">//å¤šçº¿ç¨‹æ‰“åŒ…jsï¼ŒåŠ å¿«æ‰“åŒ…é€Ÿåº¦</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">HappyPack</span>({
            ...happypackCommonConfig,
            <span class="hljs-attr">id</span>: <span class="hljs-string">'js'</span>,
            <span class="hljs-attr">loaders</span>: [<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'babel-loader'</span>)}</span>?<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify({
                presets: [<span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'@babel/preset-env'</span>)],
                plugins: [
                    <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'@babel/plugin-transform-runtime'</span>),
                ]
            })}</span>`</span>]
        }),
        <span class="hljs-comment">//å¤šçº¿ç¨‹æ‰“åŒ…cssï¼ŒåŠ å¿«æ‰“åŒ…é€Ÿåº¦</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">HappyPack</span>({
            ...happypackCommonConfig,
            <span class="hljs-attr">id</span>: <span class="hljs-string">'css'</span>,
            <span class="hljs-attr">loaders</span>: [{
                <span class="hljs-attr">path</span>: <span class="hljs-built_in">require</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'css-loader'</span>),
                <span class="hljs-attr">options</span>: {
                    <span class="hljs-attr">importLoaders</span>: <span class="hljs-number">1</span>
                }
            }]
        }),
        <span class="hljs-comment">//æµè§ˆå™¨åœ¨è¯·æ±‚èµ„æºçš„æ—¶å€™ï¼Œä¸å‘é€ç”¨æˆ·çš„èº«ä»½å‡­è¯</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackInjectAttributesPlugin</span>({
            <span class="hljs-attr">corssorigin</span>: <span class="hljs-string">'anonymous'</span>
        })
    ],
    <span class="hljs-attr">optimization</span>: {
        <span class="hljs-comment">//ä½¿ç”¨ TerserPlugin çš„å¹¶å‘å’Œç¼“å­˜ï¼Œæå‡å‹ç¼©é˜¶æ®µçš„æ€§èƒ½</span>
        <span class="hljs-comment">//æ¸…é™¤console.log</span>
        <span class="hljs-attr">minimize</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">minimizer</span>: [
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>({
                <span class="hljs-attr">cache</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//å¯ç”¨ç¼“å­˜æ¥åŠ é€Ÿæ„å»ºè¿‡ç¨‹</span>
                <span class="hljs-attr">parallel</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//åˆ©ç”¨å¤šæ ¸cpuçš„ä¼˜åŠ¿åŠ å¿«å‹ç¼©é€Ÿåº¦</span>
                <span class="hljs-attr">terserOptions</span>: {
                    <span class="hljs-attr">compress</span>: {
                        <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">//å»æ‰console.log</span>
                    }
                }
            })
        ]
    }
})

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = webpackProdConfig;

</code></pre>
<h5 data-id="heading-6">å¤šå…¥å£é…ç½®ï¼Œåªè¦æŒ‰ç…§çº¦å®šå¥½çš„æ–‡ä»¶æ ¼å¼åˆ›å»ºæ–‡ä»¶ï¼Œå³å¯è‡ªåŠ¨å¼•å…¥ä¸ºå…¥å£æ–‡ä»¶ï¼Œå¹¶ä¸”ç”Ÿæˆå¯¹åº”çš„HTMLæ¨¡æ¿ï¼Œæ— éœ€æ‰‹åŠ¨ä¸€ä¸ªä¸ªé…ç½®å…¥å£æ–‡ä»¶</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åŠ¨æ€æ„å»º pageEntryies htmlWebpackPluginList</span>
<span class="hljs-keyword">const</span> elpisPageEntries = {};
<span class="hljs-keyword">const</span> elpisHtmlWebpackPPluginList = [];

<span class="hljs-comment">// è·å– app/pages ä¸‹çš„æ‰€æœ‰å…¥å£æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> elpisEntryList = path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"../../pages/**/entry.*.js"</span>);

glob.<span class="hljs-title function_">sync</span>(elpisEntryList).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
  <span class="hljs-title function_">handleEntry</span>(file, elpisPageEntries, elpisHtmlWebpackPPluginList);
});

<span class="hljs-comment">// åŠ¨æ€æ„å»º ä¸šåŠ¡é¡µé¢å…¥å£</span>
<span class="hljs-keyword">const</span> businessEntries = {};
<span class="hljs-keyword">const</span> businessHtmlWebpackPPluginList = [];

<span class="hljs-keyword">const</span> businessEntryList = path.<span class="hljs-title function_">resolve</span>(
  process.<span class="hljs-title function_">cwd</span>(),
  <span class="hljs-string">"./app/pages/**/entry.*.js"</span>
);
glob.<span class="hljs-title function_">sync</span>(businessEntryList).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
  <span class="hljs-title function_">handleEntry</span>(file, businessEntries, businessHtmlWebpackPPluginList);
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleEntry</span>(<span class="hljs-params">file, entries = {}, htmlWebpackPPluginList = []</span>) {
  <span class="hljs-keyword">const</span> enrtyName = path.<span class="hljs-title function_">basename</span>(file, <span class="hljs-string">".js"</span>);
  <span class="hljs-comment">//æ„é€ entry</span>
  entries[enrtyName] = file;
  <span class="hljs-comment">//æ„é€ æœ€ç»ˆæ¸²æŸ“çš„é¡µé¢æ–‡ä»¶</span>
  htmlWebpackPPluginList.<span class="hljs-title function_">push</span>(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({
      <span class="hljs-attr">filename</span>: path.<span class="hljs-title function_">resolve</span>(
        process.<span class="hljs-title function_">cwd</span>(),
        <span class="hljs-string">"./app/public/dist/"</span>,
        <span class="hljs-string">`<span class="hljs-subst">${enrtyName}</span>.tpl`</span>
      ), <span class="hljs-comment">//äº§ç‰©ï¼ˆæœ€ç»ˆæ¨¡æ¿ï¼‰è¾“å‡ºè·¯å¾„</span>
      <span class="hljs-attr">template</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"../../view/entry.tpl"</span>), <span class="hljs-comment">//æŒ‡å®šè¦ä½¿ç”¨çš„æ¨¡æ¿æ–‡ä»¶</span>
      <span class="hljs-attr">chunks</span>: [<span class="hljs-string">`<span class="hljs-subst">${enrtyName}</span>`</span>], <span class="hljs-comment">//è¦æ³¨å…¥çš„ä»£ç å—</span>
    })
  );
}

<span class="hljs-comment">// åŠ è½½ ä¸šåŠ¡ webpack é…ç½®</span>
<span class="hljs-keyword">let</span> businessWebpackConfig = {};
<span class="hljs-keyword">try</span> {
  businessWebpackConfig = <span class="hljs-built_in">require</span>(<span class="hljs-string">`<span class="hljs-subst">${process.cwd()}</span>/app/webpack.config.js`</span>);
} <span class="hljs-keyword">catch</span> (e) {}
</code></pre>
<h5 data-id="heading-7">å¦‚ä½•å®ç°çƒ­æ›´æ–°ï¼Ÿ</h5>
<p>çƒ­æ›´æ–°çš„æµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šç›‘æ§æ–‡ä»¶æ”¹åŠ¨ -&gt; è¯†åˆ«æ¨¡å—å˜åŒ– -&gt; é€šçŸ¥æµè§ˆå™¨ -&gt; æµè§ˆå™¨å±€éƒ¨æ›´æ–°ã€‚
çƒ­æ›´æ–°å¯ä»¥åˆ’åˆ†æˆä¸ºä¸¤ä¸ªé‡ç‚¹ï¼Œå¦‚ä½•ç›‘å¬æ–‡ä»¶ä¿®æ”¹ï¼Ÿï¼Œå¦‚ä½•å‘ŠçŸ¥æµè§ˆå™¨ï¼Ÿ
webpackå…¶å®æä¾›äº†ä¸¤ä¸ªæ ¸å¿ƒçš„ä¸­é—´ä»¶æ¥å¸®åŠ©æˆ‘ä»¬å®ç°çƒ­æ›´æ–°ï¼ŒdevMiddlewareï¼ˆæ–‡ä»¶ç›‘æ§å’Œç¼–è¯‘ï¼‰ï¼ŒhotMiddlewareï¼ˆä¸æµè§ˆå™¨é€šä¿¡ï¼‰</p>
<pre><code class="hljs language-js" lang="js"> app.<span class="hljs-title function_">use</span>(
    <span class="hljs-title function_">devMiddleware</span>(compiler, {
      <span class="hljs-comment">//è½åœ°æ–‡ä»¶</span>
      <span class="hljs-attr">writeToDisk</span>: <span class="hljs-function">(<span class="hljs-params">filePath</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> filePath.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">".tpl"</span>);
      },
      <span class="hljs-comment">//èµ„æºè·¯å¾„</span>
      <span class="hljs-attr">publicPath</span>: webpackDevConfig.<span class="hljs-property">output</span>.<span class="hljs-property">publicPath</span>,

      <span class="hljs-comment">//headersé…ç½®</span>
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">"Access-Control-Allow-Origin"</span>: <span class="hljs-string">"*"</span>,
        <span class="hljs-string">"Access-Control-Allow-Methods"</span>:
          <span class="hljs-string">"GET, POST, PUT, DELETE, PATCH, OPTIONS"</span>,
        <span class="hljs-string">"Access-Control-Allow-Headers"</span>:
          <span class="hljs-string">"X-Requested-With, content-type, Authorization"</span>,
      },

      <span class="hljs-attr">stats</span>: {
        <span class="hljs-attr">color</span>: <span class="hljs-literal">true</span>,
      },
    })
  );
  <span class="hljs-comment">//å¼•ç”¨hotMiddlewareä¸­é—´ä»¶ï¼Œå®ç°çƒ­æ›´æ–°</span>
  app.<span class="hljs-title function_">use</span>(
    <span class="hljs-title function_">hotMiddleware</span>(compiler, {
      <span class="hljs-attr">path</span>: <span class="hljs-string">`/<span class="hljs-subst">${DEV_SERVER_CONFIG.HMR_PATH}</span>`</span>,
      <span class="hljs-attr">log</span>: <span class="hljs-function">() =&gt;</span> {},
    })
  );
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>