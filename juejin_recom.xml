<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[å…¨ç½‘éƒ½åœ¨æ¨ comet æµè§ˆå™¨ï¼Œä½†æˆ‘åŠä½ è°¨æ…ï¼]]></title>    <link>https://juejin.cn/post/7572534419881033763</link>    <guid>https://juejin.cn/post/7572534419881033763</guid>    <pubDate>2025-11-16T15:12:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572534419881033763" data-draft-id="7572775409725587456" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨ç½‘éƒ½åœ¨æ¨ comet æµè§ˆå™¨ï¼Œä½†æˆ‘åŠä½ è°¨æ…ï¼"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-16T15:12:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éº¦éº¦éº¦é€ "/> <meta itemprop="url" content="https://juejin.cn/user/1732486056126311"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨ç½‘éƒ½åœ¨æ¨ comet æµè§ˆå™¨ï¼Œä½†æˆ‘åŠä½ è°¨æ…ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1732486056126311/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éº¦éº¦éº¦é€ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T15:12:06.000Z" title="Sun Nov 16 2025 15:12:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<strong>MAIéº¦é€ ï¼</strong></p>
<p>æœ€è¿‘æ·±åº¦ä½“éªŒäº†ä¸€ä¸‹ Perplexity æ¨å‡ºçš„AIæµè§ˆå™¨ï¼šComet</p>
<p>ç¬¬ä¸€å¤©å°±ç»™æˆ‘å¸¦æ¥äº†ä¸å°çš„éœ‡æ’¼ï¼WooCï¼Ÿè¿˜èƒ½è¿™ä¹ˆç©ï¼Ÿ</p>
<p>ä½†åˆ°äº†ç¬¬äºŒå¤©ï¼
æ„Ÿè§‰é€æ¸ä¸å¯¹åŠ²äº†...</p>
<h2 data-id="heading-0">Comet æ˜¯å•¥ï¼Ÿ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50241f10ec2b463a885c641e89031a96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=Y6Gc6z%2FQ1Ih46o%2FXphjOSZ4v5ew%3D" alt="PixPin_2025-11-16_21-53-17.png" loading="lazy"/></p>
<p>Cometæµè§ˆå™¨ç”±Perplexity AIå¼€å‘ï¼Œäº2025å¹´7æœˆæ­£å¼å‘å¸ƒï¼Œæ˜¯ä¸€æ¬¾åŸºäºChromiumæ¶æ„çš„AIåŸç”Ÿæµè§ˆå™¨ã€‚</p>
<p>åŸºäº Chromium å¼€å‘ï¼Œå› æ­¤å¯ä»¥å…¼å®¹ç»å¤§å¤šæ•° Chrome æ’ä»¶ã€‚</p>
<p>å¦‚æœä½ æ˜¯ä¸€ä¸ª Chrome çš„é‡åº¦ç”¨æˆ·ï¼Œé‚£ä¹ˆä½ å¯ä»¥å‡ ä¹æ— ç—›çš„è¿ç§»ã€‚</p>
<p>æœ€åˆå®šä»·200ç¾å…ƒ/æœˆï¼Œ10æœˆåè½¬ä¸ºå…è´¹ä½¿ç”¨ï¼Œé€šè¿‡æ·±åº¦é›†æˆAIåŠŸèƒ½ï¼Œé‡æ–°å®šä¹‰ç”¨æˆ·çš„ç½‘ç»œæµè§ˆä½“éªŒã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒç‰¹è‰²</h3>
<ul>
<li><strong>AIåŠ©æ‰‹é›†æˆï¼š</strong> å†…ç½®GPTã€Claudeã€Geminiç­‰å¤šæ¨¡å‹æ”¯æŒ</li>
<li><strong>è·¨æ ‡ç­¾é¡µæ™ºèƒ½ï¼š</strong> èƒ½å¤ŸåŒæ—¶åˆ†æå’Œå¤„ç†å¤šä¸ªç½‘é¡µå†…å®¹</li>
<li><strong>è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼š</strong> å¯æ‰§è¡Œé‚®ä»¶å‘é€ã€æ—¥ç¨‹å®‰æ’ç­‰å¤æ‚æ“ä½œ</li>
<li><strong>è¯­éŸ³æ§åˆ¶ï¼š</strong> æ”¯æŒè‡ªç„¶è¯­è¨€äº¤äº’</li>
<li><strong>å…è´¹ç­–ç•¥ï¼š</strong> é™ä½ç”¨æˆ·ä½¿ç”¨é—¨æ§›</li>
</ul>
<p>è°ƒç ”äº†å¸‚é¢ä¸Šçš„ç”¨æˆ·åé¦ˆï¼Œä¼˜ç‚¹è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ã€‚
ä½†ç¼ºç‚¹ã€å®‰å…¨é—®é¢˜ã€æ€§èƒ½é—®é¢˜åŒæ ·ä¸å°‘ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88de5b1c07534e618bb19038225d9282~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=qc1lkyMkz7%2Bh3LeDFQ2l5f5RBek%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">å…ˆè¯´ä¼˜ç‚¹ï¼š</h2>
<h3 data-id="heading-3">1. è‡ªåŠ¨æ‰§è¡Œæ“ä½œ</h3>
<p>åœ¨å¯¹è¯å‰åŠ ä¸Š <code>/</code> ï¼Œå¯ä»¥è®©æµè§ˆå™¨è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡ã€‚
ä¾‹å¦‚ï¼š<code>/æ‰“å¼€Bç«™æ’­æ”¾é˜¿æ€ªçš„è§†é¢‘</code>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efadb1ff84f04643996f6a5681e5de5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=uHmj%2FGvcXgMuVRvTvJiX%2BTye6fQ%3D" alt="output.gif" loading="lazy"/></p>
<p>å®ƒå¯ä»¥è‡ªåŠ¨æ‰“å¼€Bç«™ï¼Œç„¶åæ‰¾åˆ°é˜¿æ€ªï¼Œæœ€åæ’­æ”¾å®ƒçš„è§†é¢‘ã€‚</p>
<p>å¹¶ä¸”å¯ä»¥ä¿å­˜æˆä¸€ä¸ªå¿«æ·æŒ‡ä»¤ï¼Œä¸‹æ¬¡å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ã€‚</p>
<p>è¿™ä¸ªåŠŸèƒ½è¿˜æ˜¯æ¯”è¾ƒå®ç”¨çš„ï¼Œåœ¨ä¸€äº›ç®€å•åœºæ™¯ï¼Œå®ƒå¯ä»¥æ›¿ä»£ä¹‹å‰åªéœ€è¦ä½¿ç”¨ selenium å’Œ RPA çš„æ“ä½œã€‚</p>
<p>ä½†å¤æ‚åœºæ™¯ï¼Œå°±åˆ«æƒ³äº†å§...</p>
<p>åœ¨å¾ˆå¤šæ–‡ç« ä¸­ï¼Œè¯´åˆ°å®ƒå¯ä»¥å¸®ä½ æŠ¢ç¥¨...</p>
<p>ä½†æŠ¢è¿‡ç¥¨çš„éƒ½çŸ¥é“ï¼Œé‚£è‚¯å®šæ˜¯ä¸å¯èƒ½çš„å•ŠğŸ˜…</p>
<p>æ¯ä¸€æ­¥çš„æ“ä½œå»¶è¿Ÿéƒ½æŒºé«˜çš„</p>
<p>ä¹°ç¥¨åˆ°æ˜¯æœ‰ç‚¹å¯èƒ½ã€‚</p>
<h3 data-id="heading-4">2. è·¨é¡µé¢æé—®</h3>
<p>æŸ¥æ‰¾èµ„æ–™æˆ–è€…æ¯”è¾ƒè¯¦æƒ…çš„æ—¶å€™ï¼Œç»å¸¸ä¼šæ‰“å¼€å¤šä¸ªç½‘é¡µã€‚
å®ƒæ”¯æŒå¼•ç”¨å¤šä¸ªç½‘é¡µçš„å†…å®¹ï¼Œç„¶åç›´æ¥è¿›è¡Œæé—®ã€‚</p>
<blockquote>
<p>æ„Ÿè§‰è·Ÿcursor çš„äº¤äº’æœ‰ç‚¹åƒ[ğŸŒš]</p>
</blockquote>
<p>åœ¨å³è¾¹çš„ Assistant ä¸­ï¼Œé€šè¿‡ <code>@</code> ç¬¦å·ï¼Œ
å¯ä»¥å¼•ç”¨ä¸€ä¸ªæˆ–å¤šä¸ª<code>å·²æ‰“å¼€çš„æ ‡ç­¾é¡µ</code> æ¥è¿›è¡Œæé—®ã€‚<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd157d9bc21c4ac5be2bbfa46e15a5e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=%2B25P5T5CQicZLxHEMoqpIo1Y4DA%3D" alt="PixPin_2025-11-16_16-50-39.png" loading="lazy"/></p>
<p>å¦‚æœä½ åœ¨é¡µé¢ä¸Šé€‰ä¸­äº†ä¸€æ®µæ–‡å­—ï¼ŒAssistant ä¸­ä¹Ÿä¼šè‡ªåŠ¨å¼•ç”¨ä¸Šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7d3e24836f84e54b0b39ae3c8475d43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=Y3wWenIssidPA84x%2BlONYt87row%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">3. è‡ªåŠ¨åŒ–ä»»åŠ¡</h3>
<p>å¯ä»¥è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰§è¡Œï¼Œç„¶åæŠŠæŠ¥å‘Šå‘åˆ°ä½ çš„é‚®ç®±ã€‚</p>
<p>è¿™ä¸ªåŠŸèƒ½çš„å…¥å£åœ¨<code>è´¦æˆ·</code>-&gt;<code>ä»»åŠ¡</code> ä¸­
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50f759290f4b4f49ae70952075d9db45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=%2F5wWxzDAXyZ7FA0kPtzDfXeeoHY%3D" alt="PixPin_2025-11-16_16-52-09.png" loading="lazy"/></p>
<p>é€šè¿‡è‡ªç„¶è¯­è¨€çš„æ–¹å¼ï¼Œæè¿°éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡</p>
<p>ç„¶åè®¾ç½®æ‰§è¡Œæ—¶é—´ï¼Œé‚£ä¹ˆä»–å°±ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œç„¶åå‘åˆ°ä½ é‚®ç®±ä¸­ã€‚</p>
<p>æ— è®ºæ˜¯ <code>æœç´¢ä»»åŠ¡</code>ï¼Œè¿˜æ˜¯<code>ç ”ç©¶ä»»åŠ¡</code>ï¼Œéƒ½å¯ä»¥ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05b5d09413a641908e5a3f2c17eaba6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=DnMmEjFNzKlYyVkQnzS794pqwgU%3D" alt="PixPin_2025-11-16_16-53-25.png" loading="lazy"/></p>
<p>æ¯”å¦‚æˆ‘çš„è¿™ä¸ªå®šæ—¶ä»»åŠ¡æ¯å¤©æ”¶åˆ°çš„é‚®ä»¶ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43db41ae2d33426497c32ef5ff652a6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=3LxqBawpP%2FBqKyVSddMyn9SHvsw%3D" alt="PixPin_2025-11-16_16-58-29.png" loading="lazy"/></p>
<p>ä¸Šé¢å‡ ç‚¹æ˜¯æˆ‘ä½“éªŒä¸‹æ¥ï¼Œæ¯”è¾ƒæ»¡æ„çš„åœ°æ–¹ã€‚</p>
<p>ä¸è¿‡ä¾ç„¶æœ‰è®¸å¤šä¸è¶³çš„åœ°æ–¹ã€‚</p>
<p>ä¸»è¦é›†ä¸­åœ¨ <code>æ€§èƒ½é—®é¢˜</code>  å’Œ <code>å®‰å…¨é—®é¢˜</code> ä¸Š</p>
<h2 data-id="heading-6">æ€§èƒ½ä¸Šï¼š</h2>
<h3 data-id="heading-7">1. å®¹æ˜“å´©</h3>
<p>æ ‡ç­¾é¡µæ‰“å¼€å¤šäº†ï¼Œå°±éå¸¸å®¹æ˜“å¡</p>
<p>åŒæ—¶ç»å¸¸å‡ºç°è¿™ç§é”™è¯¯æç¤ºï¼Œåœ¨çª—å£å’Œ Assistant ä¸Šéƒ½æ¯”è¾ƒé¢‘ç¹ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd97efdfdfe04b38bdc5109689714248~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=wKUoDqYzObUS50oMCX6WLoO7%2FLI%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76d9901ef49a4ed5b89ab6d7ccb94474~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=lexv1oRFZGoLADWv9o3vNvWXIFM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">2. èµ„æºæ¶ˆè€—æ›´å¤§</h3>
<ul>
<li>å†…å­˜ä½¿ç”¨ï¼š310MBï¼ˆæ¯”Chromeé«˜29%ï¼‰</li>
<li>CPUå ç”¨ï¼š15%ï¼ˆæ¯”Chromeé«˜88%ï¼‰</li>
<li>ç”µæ± ç»­èˆªï¼šå‡å°‘17.5%  ç»­èˆªæ—¶é—´</li>
<li>å“åº”é€Ÿåº¦ï¼šæ˜æ˜¾æ…¢äºä¼ ç»Ÿæµè§ˆå™¨</li>
<li>å¤æ‚ä»»åŠ¡æ‰§è¡Œé”™è¯¯é¢‘å‘</li>
<li>å“åº”é€Ÿåº¦è¾ƒæ…¢ï¼Œç”¨æˆ·ä½“éªŒä¸ä½³</li>
<li>å¶å°”å‡ºç°AIå¹»è§‰ï¼Œç»“æœä¸å¯é </li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/111fe1da52da40348cac10e7c2c2d53e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=zN%2FyNiXwBhplubfZ1TSXawcvvCk%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-9">å®‰å…¨æ€§ä¸Šï¼š</h2>
<h3 data-id="heading-10">1. é»˜è®¤åˆ†äº«éšç§æ•°æ®</h3>
<p><strong>å®˜æ–¹æ”¿ç­–ï¼š</strong></p>
<ul>
<li>é»˜è®¤æ”¶é›†ç”¨æˆ·äº¤äº’æ•°æ®ä»¥"æ”¹è¿›æœåŠ¡å’Œæ¨èç›¸å…³å†…å®¹"</li>
<li>æœ¬åœ°å¤„ç†æ•°æ®ä»¥å‡å°‘éšç§é£é™©</li>
<li>ä½†æ•°æ®æ”¶é›†èŒƒå›´ä»ç„¶å¹¿æ³›</li>
</ul>
<p><strong>ä½†å®é™…ä¸Šï¼š</strong></p>
<ul>
<li>æµè§ˆå†å²ã€æœç´¢æŸ¥è¯¢ã€äº¤äº’æ¨¡å¼éƒ½è¢«è®°å½•</li>
<li>æ•°æ®ç”¨äºè®­ç»ƒAIæ¨¡å‹å’Œæ”¹å–„æœåŠ¡</li>
<li>ç¼ºä¹é€æ˜çš„æ•°æ®åˆ é™¤æœºåˆ¶</li>
</ul>
<p>è€Œä¸” Comet å¯ä»¥æ·±åº¦é›†æˆGmailã€Outlookã€Google Calendarã€Slack ç­‰åº”ç”¨ã€‚</p>
<p>å¤„ç†è¿™äº›åº”ç”¨ï¼Œéœ€è¦æˆäºˆAIåŠ©æ‰‹å¹¿æ³›çš„è´¦æˆ·è®¿é—®æƒé™ã€‚</p>
<p>æ•°æ®åœ¨AIå¤„ç†è¿‡ç¨‹ä¸­å¯èƒ½è¢«æ³„éœ²ï¼Œå¹¶ä¸”ç¼ºä¹å®Œå–„çš„æƒé™æ’¤é”€æœºåˆ¶ã€‚</p>
<p>è¿™äº›æ•°æ®é»˜è®¤æƒ…å†µä¸‹ä¼šè¢«ç”¨äºâ€œæ”¹è¿›Cometå¹¶æ¨èå†…å®¹â€ï¼Œè¿˜ä¼šè¢«ç”¨æ¥è®­ç»ƒPerplexityçš„AIæ¨¡å‹ã€‚</p>
<p>æ„å‘³ç€ä½ çš„æœç´¢å†å²ã€é‚®ä»¶ã€ç”šè‡³å®¶åº­ç…§ç‰‡ï¼Œéƒ½å¯èƒ½è¢«ç”¨äºä¸ªæ€§åŒ–æ¨èï¼Œæˆ–åœ¨æŸäº›æƒ…å†µä¸‹è¢«å…±äº«ç»™ç¬¬ä¸‰æ–¹</p>
<h3 data-id="heading-11">2. æç¤ºæ³¨å…¥æ”»å‡»</h3>
<p>æ¶æ„ç½‘ç«™å¯é€šè¿‡éšè—æŒ‡ä»¤æ“æ§AIæ‰§è¡Œæœªæˆæƒæ“ä½œ</p>
<p>è¿™ä¸ªé—®é¢˜ç”±Braveç ”ç©¶å›¢é˜Ÿçˆ†å‡º</p>
<p>è¿™ä¸ªé—®é¢˜çš„ä¸»è¦åŸç†æ˜¯ï¼š</p>
<ul>
<li>Cometæµè§ˆå™¨çš„AIåŠ©æ‰‹åœ¨å¤„ç†ç½‘é¡µå†…å®¹æ—¶ï¼Œæ— æ³•æœ‰æ•ˆåŒºåˆ†ç”¨æˆ·çš„åˆæ³•æŒ‡ä»¤å’Œç½‘é¡µä¸­åµŒå…¥çš„æ¶æ„æŒ‡ä»¤</li>
<li/>
<li>å½“ç”¨æˆ·è¦æ±‚AI"æ€»ç»“æ­¤ç½‘é¡µ"æ—¶ï¼ŒCometä¼šå°†ç½‘é¡µå†…å®¹ç›´æ¥ä¼ é€’ç»™LLMï¼Œæ¶æ„æŒ‡ä»¤ä¼šè¢«å½“ä½œç”¨æˆ·æŒ‡ä»¤æ‰§è¡Œ</li>
</ul>
<p><strong>Braveçš„å®éªŒåœºæ™¯ï¼š</strong></p>
<ol>
<li>Braveç ”ç©¶å›¢é˜Ÿåœ¨Redditå‘å¸ƒåŒ…å«æ¶æ„æŒ‡ä»¤çš„å¸–å­</li>
<li>ç”¨æˆ·ä½¿ç”¨Cometæµè§ˆå™¨è®¿é—®è¯¥å¸–å­å¹¶è¦æ±‚"æ€»ç»“å½“å‰ç½‘é¡µ"</li>
<li>Comet AIè¯»å–å¹¶æ‰§è¡Œäº†éšè—çš„æ¶æ„æŒ‡ä»¤</li>
</ol>
<p>æ•´ä¸ªæ”»å‡»è¿‡ç¨‹ä»…éœ€2.5åˆ†é’Ÿï¼Œä¸”éš¾åº¦æä½ï¼Œæ™®é€šç”¨æˆ·å³å¯å®æ–½ã€‚</p>
<h3 data-id="heading-12">3. CometJackingæ”»å‡»</h3>
<p>æ¶æ„é“¾æ¥å¯çªƒå–ç”¨æˆ·æ•æ„Ÿæ•°æ®å’Œè´¦æˆ·ä¿¡æ¯
ç”± LayerXå›¢é˜Ÿçˆ†å‡ºè¿™ä¸ªé—®é¢˜ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3179d9f426b240bb8c52d4842a91c560~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=cPJrcfQ0xToeDqB5cqqNjqYDGME%3D" alt="PixPin_2025-11-16_21-24-57.png" loading="lazy"/></p>
<p><strong>æ”»å‡»æœºåˆ¶ï¼š</strong></p>
<ul>
<li>æ”»å‡»è€…åˆ›å»ºåŒ…å«æ¶æ„æŒ‡ä»¤çš„ç‰¹æ®ŠURL</li>
<li>ç”¨æˆ·ç‚¹å‡»é“¾æ¥åï¼ŒCometå°†URLå‚æ•°ä¸­çš„æŒ‡ä»¤è¯¯è®¤ä¸ºç”¨æˆ·æŒ‡ä»¤</li>
<li>æŒ‡ä»¤è¦æ±‚Cometè®¿é—®ç”¨æˆ·æ•°æ®å¹¶ç¼–ç å‘é€ç»™æ”»å‡»è€…</li>
</ul>
<p><strong>æ•°æ®çªƒå–æ–¹æ³•ï¼š</strong></p>
<p>é€šè¿‡base64ç¼–ç éšè—æ•æ„Ÿæ•°æ®ï¼Œç¼–ç åçš„æ•°æ®å°†ä½œä¸º"æ— å®³"æ–‡æœ¬å‘é€ï¼Œä»è€Œç»•è¿‡Cometçš„æ•°æ®ä¿æŠ¤æœºåˆ¶</p>
<p>æ•°æ®ç±»å‹å¯èƒ½æ¶‰åŠï¼š</p>
<ul>
<li>é‚®ç®±å†…å®¹å’Œå…ƒæ•°æ®</li>
<li>æ—¥å†äº‹ä»¶å’Œè”ç³»äººä¿¡æ¯</li>
<li>æµè§ˆå™¨å­˜å‚¨çš„æ•æ„Ÿä¿¡æ¯</li>
<li>è´¦æˆ·è®¤è¯ä¿¡æ¯</li>
</ul>
<h3 data-id="heading-13">4.  é’“é±¼ç½‘ç«™é˜²æŠ¤ç¼ºå¤±</h3>
<p>LayerX åŒæ—¶ä½¿ç”¨100ä¸ªæœ€æ–°çš„é’“é±¼ç½‘ç«™è¿›è¡Œæµ‹è¯•ï¼ŒåŒæ—¶å¯¹æ¯”Cometã€Chromeã€Edgeã€Diaç­‰æµè§ˆå™¨ã€‚</p>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong></p>



































<table><thead><tr><th>æµè§ˆå™¨</th><th>é˜»æ­¢ç‡</th><th>å…è®¸ç‡</th></tr></thead><tbody><tr><td>Comet</td><td>7%</td><td>93%</td></tr><tr><td>Genspark</td><td>7%</td><td>93%</td></tr><tr><td>Chrome</td><td>&gt;90%</td><td>&lt;10%</td></tr><tr><td>Edge</td><td>&gt;90%</td><td>&lt;10%</td></tr><tr><td>Dia</td><td>&gt;90%</td><td>&lt;10%</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01968c3bd84942c89e03040a67569a5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=5Efi8vfapxT9VGZsHQL5uDTVT9Q%3D" alt="image.png" loading="lazy"/></p>
<p>Cometç”¨æˆ·é¢ä¸´æ›´é«˜çš„é’“é±¼æ”»å‡»é£é™©ã€‚</p>
<p>é£é™©è¿™ä¹ˆé«˜çš„åŸå› ä¸»è¦æ˜¯ï¼š</p>
<ul>
<li>æ²¡æœ‰å®ç°Google Safe Browsing API</li>
<li>ç¼ºä¹å·²çŸ¥çš„æ¶æ„ç½‘ç«™é»‘åå•</li>
<li>æ²¡æœ‰ä¸»åŠ¨é’“é±¼ç½‘ç«™æ£€æµ‹</li>
</ul>
<p>åŒæ—¶åªæä¾›äº†æœ‰é™çš„ä¿æŠ¤ï¼š</p>
<ul>
<li>ä»…ä¾èµ–SSLè¯ä¹¦éªŒè¯</li>
<li>åŸºç¡€çš„ç½‘ç»œè¿æ¥å®‰å…¨æ£€æŸ¥</li>
<li>æ— æ³•è¯†åˆ« 0 Day é’“é±¼æ”»å‡»</li>
</ul>
<h2 data-id="heading-14">æœ€å</h2>
<p>æ€»ä½“ä¸Šæ¥è®²ï¼Œ
comet æµè§ˆå™¨åœ¨ <strong>AI åŠŸèƒ½</strong> å’Œ <strong>åˆ›æ–°æ€§</strong> ä¸Šåšå¾—æ¯”è¾ƒå¥½ã€‚</p>
<p>ä½†æ˜¯ <strong>ä½¿ç”¨ä½“éªŒ</strong> å’Œ <strong>å®‰å…¨æ–¹é¢</strong> æ¯”è¾ƒå·®</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1a6a3444883426b96abd1fe95ab035c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bqm6bqm6bqm6YCg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763910814&amp;x-signature=C4Pd4T8FMCVinYWEPG%2FwK2PME9Y%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ªäººç”¨æˆ·å¯ä»¥å°è¯•ä½“éªŒä¸€ä¸‹åˆ›æ–°çš„åŠŸèƒ½ï¼Œä½†è¯·å‹¿ç”¨æ¥å¤„ç†æ•æ„Ÿæ•°æ®ã€‚</p>
<p>ä¸å»ºè®®ä¼ä¸šç”¨æˆ·ä½¿ç”¨ï¼Œä½†å¯åœ¨æ²™ç›’ä¸­æµ‹è¯•ï¼ŒæœŸå¾… 2.0 ç‰ˆæœ¬ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Codex CLIåˆä½“éªŒ]]></title>    <link>https://juejin.cn/post/7572537221541462031</link>    <guid>https://juejin.cn/post/7572537221541462031</guid>    <pubDate>2025-11-16T14:04:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572537221541462031" data-draft-id="7569140034588377103" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Codex CLIåˆä½“éªŒ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-16T14:04:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æºªå½¼å²¸"/> <meta itemprop="url" content="https://juejin.cn/user/976781670357400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Codex CLIåˆä½“éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976781670357400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æºªå½¼å²¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T14:04:23.000Z" title="Sun Nov 16 2025 14:04:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ç”±äºClaude Codeå¯¹å›½å†…ä½¿ç”¨çš„é™åˆ¶ï¼ŒOpenAI Codexçš„æ€§ä»·æ¯”å’Œå—æ¬¢è¿ç¨‹åº¦æ˜æ˜¾æé«˜ï¼Œä»Šå¤©æŠ½æ—¶é—´æ¥ä½“éªŒä¸€æ³¢ã€‚å¯¹å…¶ä»–AI Code CLIæ„Ÿå…´è¶£çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥çœ‹å¾€æœŸå†…å®¹ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247487588%26idx%3D1%26sn%3D7f6af21976e6a86ccf36851501542ffa%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247487588&amp;idx=1&amp;sn=7f6af21976e6a86ccf36851501542ffa&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç»ˆç«¯ç¦éŸ³ï¼ŒAIç»ˆç«¯ç¼–ç¨‹åŠ©æ‰‹Aider</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247492263%26idx%3D1%26sn%3D4e809f38100be358e31f298a78fd81ea%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247492263&amp;idx=1&amp;sn=4e809f38100be358e31f298a78fd81ea&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸‹ä¸€ä»£AIç»ˆç«¯ç¥å™¨Warp</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247492558%26idx%3D1%26sn%3De762047c93c4361f63744ec3c70a434f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247492558&amp;idx=1&amp;sn=e762047c93c4361f63744ec3c70a434f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Googleç™¾ä¸‡Tokenä¸Šä¸‹æ–‡Gemini CLIï¼Œç¦»AIè‡ªç”±æ›´è¿‘ä¸€æ­¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247492929%26idx%3D1%26sn%3D043e21a18f31f1c4c68bf4ee63e28685%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247492929&amp;idx=1&amp;sn=043e21a18f31f1c4c68bf4ee63e28685&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Claude Code CLIåˆä½“éªŒ</a></li>
</ul>
<h2 data-id="heading-1">å½“å‰ä½¿ç”¨ç‰ˆæœ¬</h2>
<p>codex-cliï¼š0.53.0</p>
<h2 data-id="heading-2">é™åˆ¶</h2>
<ul>
<li>é™åˆ¶å›½å†…ï¼Œéœ€è¦ç§‘å­¦ä¸Šç½‘</li>
<li>ä»…å‘ ChatGPT Plusã€Proã€Teamã€Edu å’Œ Enterprise ç”¨æˆ·å¼€æ”¾</li>
</ul>
<h2 data-id="heading-3">ä¼˜åŠ¿</h2>
<ul>
<li>Eduç”¨æˆ·å¯å…è´¹ä½“éªŒ</li>
<li>é»˜è®¤ä½¿ç”¨GPT 5æ¨¡å‹ï¼Œæ”¯æŒåˆ‡æ¢ gpt-5-codex æ¨¡å‹</li>
<li>Rust è¯­è¨€ç¼–å†™ï¼Œé€Ÿåº¦å¿«ã€æ•ˆç‡é«˜</li>
</ul>
<h2 data-id="heading-4">ç®€ä»‹</h2>
<p>Codex æ˜¯ OpenAI å¼€å‘çš„ä¸€æ¬¾ä¸“ä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆè®¾è®¡çš„äº‘ç«¯ç¼–ç¨‹æ™ºèƒ½ä½“ï¼Œä¸“é—¨ä¼˜åŒ–äº†ä»£ç ç”Ÿæˆèƒ½åŠ›ã€‚å®ƒåŸºäº GPT æ¶æ„æ„å»ºï¼Œé€šè¿‡å¯¹å¤§é‡å…¬å¼€ä»£ç åº“ï¼ˆåŒ…æ‹¬ GitHub ä¸Šçš„å¼€æºé¡¹ç›®ï¼‰è¿›è¡Œè®­ç»ƒï¼Œèƒ½å¤Ÿç†è§£å’Œç”Ÿæˆå¤šç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.openai.com%2Fcodex%2Fcli" target="_blank" title="https://developers.openai.com/codex/cli" ref="nofollow noopener noreferrer">developers.openai.com/codex/cli</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d261c4e5d6a3496a9c68254f9042df7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=B%2BN8RpDO7XBWgHu2meTTqckKUmY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Githubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenai%2Fcodex" target="_blank" title="https://github.com/openai/codex" ref="nofollow noopener noreferrer">github.com/openai/codeâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/692f9b415c7e4f19885135d6b4ec447f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=MvIhO%2Bk1lbPNsV94QLOGM7%2FeC3U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-5">å®‰è£…</h2>
<p>Codex CLIæä¾›äº†å¤šç§å®‰è£…æ–¹å¼ï¼Œå®‰è£…ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„ç¯å¢ƒé€‰æ‹©å®‰è£…æ–¹å¼ã€‚</p>
<h3 data-id="heading-6">ä½¿ç”¨npm</h3>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-variable">$Â </span>npm install -g <span class="hljs-variable">@openai</span>/codex
</code></pre>
<h3 data-id="heading-7">ä½¿ç”¨Homebrew</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$Â brew</span> install codex
</code></pre>
<h3 data-id="heading-8">éªŒè¯å®‰è£…</h3>
<p>å®‰è£…å®Œæˆåï¼Œåœ¨å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$Â codex</span> --version
æˆ–è€…
<span class="hljs-variable">$Â codex</span> -V
</code></pre>
<p>å‘½ä»¤è¡Œç»ˆç«¯è¾“å‡ºä»¥ä¸‹å†…å®¹è¡¨ç¤ºå®‰è£…æˆåŠŸ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c561366f29514bdf836aec6dc604de80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=YbgxXSKUypTKWzAzvO08hbtnamE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-9">æ›´æ–°å‡çº§</h3>
<p>Codex CLIæ²¡æœ‰æä¾›æ›´æ–°å‘½ä»¤ï¼Œç›®å‰æ›´æ–°åªèƒ½ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment">#Â æ›´æ–°</span>
<span class="hljs-variable">$Â </span>npm update -g <span class="hljs-variable">@openai</span>/codex
<span class="hljs-comment">#Â é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬</span>
<span class="hljs-variable">$Â </span>npm install -g <span class="hljs-variable">@openai</span>/codex<span class="hljs-variable">@latest</span>
</code></pre>
<h2 data-id="heading-10">åŸºæœ¬ä½¿ç”¨</h2>
<h3 data-id="heading-11">ç™»å½•æˆæƒ</h3>
<p>Codex CLIå®‰è£…æˆåŠŸåï¼Œåœ¨å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥ codex å³å¯å¯åŠ¨ï¼Œä½†æƒ³è¦æ­£å¸¸ä½¿ç”¨Codexè¿˜éœ€è¦è¿›è¡Œç™»å½•æˆæƒæ“ä½œï¼ŒCodexåŒæ ·æä¾›äº† æ‰‹åŠ¨æˆæƒ å’Œ è‡ªåŠ¨æˆæƒ 2ç§æ–¹å¼ã€‚</p>
<h4 data-id="heading-12">1ï¼‰æ‰‹åŠ¨æˆæƒ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbf068e160754f588426e887af0b62c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=LZd61IbDWLXsDbROVTQ0n%2FyxyaQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰‹åŠ¨æˆæƒæä¾›äº†ä½¿ç”¨ ChatGPT å’Œ API Key 2ç§æˆæƒæ–¹å¼ï¼š</p>
<ul>
<li>ä½¿ç”¨ChatGPTï¼šæ‰“å¼€ChatGPTå®˜ç½‘æˆæƒ</li>
<li>API Keyï¼šå¡«å†™ChatGPT API Keyï¼Œæˆæƒå®Œæˆåä¼šå­˜å‚¨åˆ° ~/.codex/auth.json æ–‡ä»¶ä¸­</li>
</ul>
<p>æˆæƒæˆåŠŸåå³å¯è¿›å…¥Codex CLIç•Œé¢</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/629e54341e1f441592bded9863415859~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=fI4ul9TdDvtdTALveTHU7bAPQso%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-13">2ï¼‰è‡ªåŠ¨æˆæƒ</h4>
<blockquote>
<p>Codex CLIçš„è‡ªåŠ¨æˆæƒé…ç½®ä¹Ÿæ˜¯ç›¸å¯¹ç®€å•çš„ï¼Œç›®å‰ç‰ˆæœ¬åªæ”¯æŒå…¨å±€æˆæƒé…ç½®</p>
</blockquote>
<p>åœ¨å‘½ä»¤è¡Œç»ˆç«¯å¯¼å‡º OPENAI_API_KEY</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â macOS</span>
$Â exportÂ <span class="hljs-attr">OPENAI_API_KEY</span>=<span class="hljs-string">"sk-ä½ çš„APIå¯†é’¥"</span>
<span class="hljs-comment">#Â windos</span>
$Â setx <span class="hljs-attr">OPENAI_API_KEY</span>=sk-ä½ çš„APIå¯†é’¥
</code></pre>
<p>æˆ–è€…åœ¨ ~/.codex/auth.json æ–‡ä»¶ä¸­ OPENAI_API_KEY é…ç½®</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
Â Â <span class="hljs-attr">"OPENAI_API_KEY"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"sk-ä½ çš„APIå¯†é’¥"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>é…ç½®å®Œæˆåï¼Œåœ¨å‘½ä»¤ç»ˆç«¯è¾“å…¥ codex å¯åŠ¨ï¼Œé¦–æ¬¡ä½¿ç”¨ä¼šæç¤ºæˆæƒæç¤º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f6df41b75e94a7aa49e9840d9c4192b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=YLwpl9UVWUKdd6L5K%2FhTBl3GNE8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆæƒå®Œæˆåå³å¯è¿›å…¥Codex CLIçš„ä¸»ç•Œé¢ï¼ŒCodex CLIçš„ä¸»ç•Œé¢å¹¶ä¸åƒGemini CLIå’ŒClaude Code CLIé‚£æ ·æœ‰å¥½çœ‹çš„å¯¹è¯æ¡†æ ·å¼ï¼Œå…‰æ ‡åœ¨å“ªå“ªé‡Œå°±æ˜¯è¾“å…¥æ¡†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40d95c39d5324cb88816c96f98588502~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=PXurmMK63izzaCo4ycFrqzaikCA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-14">å‘½ä»¤è¡Œå‚æ•°</h3>
<p>Codex CLIåŒæ ·æä¾›äº†å‚æ•°é…ç½®ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ codex --help å¯ä»¥å¿«é€ŸæŸ¥çœ‹Codex CLIæä¾›çš„å‚æ•°ï¼ŒåŒ…å« å‘½ä»¤ å’Œ å¯é€‰å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¯¹Codex CLIè¿›è¡Œé»˜è®¤é…ç½®è¦†ç›–å’Œå¿«é€Ÿä½¿ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4c54289a15d4838941ce6eaeed26d5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=SP4QKmeq6Zq5t3YcA5ftfJ94p3Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Codex CLIå‘½ä»¤è¡Œå‚æ•°ï¼š</p>
<ul>
<li>execï¼šéäº¤äº’å¼è¿è¡Œ Codex [åˆ«åï¼še]</li>
<li>loginï¼šç®¡ç†ç™»å½•</li>
<li>logoutï¼šç§»é™¤å­˜å‚¨çš„èº«ä»½éªŒè¯å‡­æ®</li>
<li>mcpï¼š MCP æœåŠ¡å™¨æ¨¡å¼è¿è¡Œ Codex å¹¶ç®¡ç† MCP æœåŠ¡å™¨</li>
<li>protoï¼šé€šè¿‡æ ‡å‡†è¾“å…¥ / è¾“å‡ºè¿è¡Œåè®®æµ [åˆ«åï¼šp]</li>
<li>completionï¼šç”Ÿæˆ shell è¡¥å…¨è„šæœ¬</li>
<li>debugï¼šå†…éƒ¨è°ƒè¯•å‘½ä»¤</li>
<li>applyï¼šå°† Codex ä»£ç†ç”Ÿæˆçš„æœ€æ–°å·®å¼‚ä½œä¸º â€œgit applyâ€ åº”ç”¨åˆ°æœ¬åœ°å·¥ä½œæ ‘ [åˆ«åï¼ša]</li>
<li>resumeï¼šæ¢å¤ä¹‹å‰çš„äº¤äº’å¼ä¼šè¯ï¼ˆé»˜è®¤ä½¿ç”¨é€‰æ‹©å™¨ï¼›ä½¿ç”¨ --last å¯ç»§ç»­æœ€è¿‘çš„ä¼šè¯ï¼‰</li>
</ul>
<p>Codex CLIæä¾›äº†å¾ˆå¤šå‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬åªå°è¯•ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ã€‚åœ¨å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥æŒ‡ä»¤ï¼ŒCodex CLIå°±ä¼šç›´æ¥è°ƒç”¨æ¨¡å‹è¿›è¡Œå¤„ç†ï¼Œè€Œä¸æ˜¯æ‰“å¼€Codex CLIçš„äº¤äº’å¼å‘½ä»¤</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">$</span><span class="bash">Â codexÂ <span class="hljs-built_in">exec</span>Â --full-autoÂ <span class="hljs-string">"æŸ¥çœ‹é¡¹ç›®ç»“æ„"</span></span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63a6bb006769456a8e933e44e4b636f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=ybj9uSlTrR8a%2BSCSA6ITj7YRSVQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥ codex mcp list å¯ä»¥å¿«é€ŸæŸ¥çœ‹mcpåˆ—è¡¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19a2835de60848aab09ebc11d77e9ce1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=hEfN9%2B5FxQnkJHEiolcnHvP65xI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥ codex resume ä¼šåˆ—ä¸¾ä¹‹å‰å¯¹è¯çš„è®°å½•ï¼Œé€‰æ‹©ä¸€ä¸ªè®°å½•å¯ä»¥æ¢å¤åˆ°è¯¥å¯¹è¯çš„äº¤äº’å¼ä¼šè¯çŠ¶æ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1a3988168fc4c029006dd8927f9700b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=EcodKNZrhBzfaYnSn0quTULG56w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ä¸Šä¸‹æ–‡tokensè¿˜æ˜¯ä¿ç•™çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22f81722159143b397e2025989c332d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=9BmsavPTFMJ6RwNCEwnNMYjSumk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ChatGPTæœ€è¿‘å‘å¸ƒäº† gpt-5-codex æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¸€é”®è®¾ç½®</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$Â codex</span> -m gpt-<span class="hljs-number">5</span>-codex
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42431216209449a390c6c4b0e1f50656~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=lQ9dnTd0oTQ7Jso6PaQOpjZNMjE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Codex CLIæ”¯æŒå›¾åƒè¾“å…¥ï¼Œä½¿ç”¨ --image æˆ– -i å¯æ¥æ”¶å›¾åƒä¸Šä¸‹æ–‡ï¼Œæ³¨æ„è¿™é‡Œçš„å›¾åƒåªèƒ½æ˜¯æœ¬åœ°å›¾ç‰‡è·¯å¾„</p>
<pre><code class="hljs language-arduino" lang="arduino">$Â codex --image img1.png,img2.jpgÂ <span class="hljs-string">"æ€»ç»“å›¾åƒå†…å®¹"</span>
</code></pre>
<h3 data-id="heading-15">å‘½ä»¤è¡ŒåŠå¿«æ·é”®åˆ—è¡¨</h3>
<p>åœ¨ç»ˆç«¯è¾“å…¥ /ï¼Œå¯ä»¥çœ‹åˆ°Codex CLIæä¾›æ‰€æœ‰æŒ‡ä»¤ï¼Œå¯ä»¥çœ‹åˆ°æ¯”Gemini CLIå’ŒClaude Code CLIè¦æ˜æ˜¾å°‘å¾ˆå¤šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d18e2da562f349429c61ff10a31a3e51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=P188IwvRjZ%2BRijRj8aDW6antNW0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å‘½ä»¤è¡Œåˆ—è¡¨ï¼š</p>
<ul>
<li>/modelï¼šé€‰æ‹©è¦ä½¿ç”¨çš„æ¨¡å‹å’Œæ¨ç†å·¥ä½œé‡ï¼Œæä¾›äº†gpt-5 minimalã€lowã€medium å’Œ high 4ä¸ªæ¡£ä½</li>
<li>/approvalsï¼šé€‰æ‹© Codex æ— éœ€æ‰¹å‡†å³å¯æ‰§è¡Œçš„æ“ä½œï¼Œæä¾›äº† Read Onlyã€Auto å’Œ Full Access 3ç§æ¨¡å¼</li>
<li>/newï¼šåœ¨å¯¹è¯è¿‡ç¨‹ä¸­å¼€å§‹æ–°çš„èŠå¤©</li>
<li>/initï¼šåˆ›å»ºä¸€ä¸ªåŒ…å« Codex æŒ‡ä»¤çš„ AGENTS.md æ–‡ä»¶</li>
<li>/compactï¼šæ€»ç»“å¯¹è¯ä»¥é¿å…è¾¾åˆ°ä¸Šä¸‹æ–‡é™åˆ¶</li>
<li>/diffï¼šæ˜¾ç¤º git å·®å¼‚ï¼ˆåŒ…æ‹¬æœªè·Ÿè¸ªçš„æ–‡ä»¶ï¼‰</li>
<li>/mentionï¼šæåŠä¸€ä¸ªæ–‡ä»¶ï¼Œç›¸å½“äº@æ“ä½œ</li>
<li>/statusï¼šæ˜¾ç¤ºå½“å‰ä¼šè¯é…ç½®å’Œä»¤ç‰Œä½¿ç”¨æƒ…å†µ</li>
<li>/mcpï¼šæŸ¥çœ‹MCPå·¥å…·åˆ—è¡¨</li>
<li>/logoutï¼šé€€å‡ºç™»å½•</li>
<li>/quitï¼šé€€å‡ºCodex</li>
</ul>
<p>å¿«æ·é”®åˆ—è¡¨:</p>
<ul>
<li>å›è½¦ï¼šå‘é€æ¶ˆæ¯</li>
<li>Ctrl+Jï¼šæ¢è¡Œ</li>
<li>Ctrl+Tï¼šæ–‡æœ¬è®°å½•</li>
<li>Ctrl+Cï¼šé€€å‡ºäº¤äº’å¼å‘½ä»¤</li>
</ul>
<h3 data-id="heading-16">é…ç½®æ–‡ä»¶</h3>
<blockquote>
<p>Codex CLIç›®å‰åªæä¾›äº†å…¨å±€é…ç½®æ–¹å¼</p>
</blockquote>
<p>å®˜ç½‘é…ç½®æ–‡ä»¶æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenai%2Fcodex%2Fblob%2Fmain%2Fdocs%2Fconfig.md" target="_blank" title="https://github.com/openai/codex/blob/main/docs/config.md" ref="nofollow noopener noreferrer">github.com/openai/codeâ€¦</a></p>
<p>Codex CLIæä¾›äº† ~/.codex/config.toml å…¨å±€é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å¯¹Codex CLIçš„æ¨¡å‹åŠæä¾›å•†è¿›è¡Œè‡ªå®šä¹‰é…ç½®ï¼ŒåŸºæœ¬é…ç½®æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">model</span>Â =Â <span class="hljs-string">"gpt-4o"</span>
<span class="hljs-attr">model_provider</span>Â =Â <span class="hljs-string">"openai-chat-completions"</span>
<span class="hljs-section">[model_providers.openai-chat-completions]</span>
<span class="hljs-comment"># å°†åœ¨ Codex ç”¨æˆ·ç•Œé¢ä¸­æ˜¾ç¤ºçš„æä¾›å•†åç§°</span>
<span class="hljs-attr">name</span>Â =Â <span class="hljs-string">"OpenAI using Chat Completions"</span>
<span class="hljs-comment"># æä¾›å•†APIè¯·æ±‚è·¯å¾„åé¢å°†æ·»åŠ `/chat/completions`å‘é€è¯·æ±‚</span>
<span class="hljs-attr">base_url</span>Â =Â <span class="hljs-string">"https://api.openai.com/v1"</span>
<span class="hljs-comment"># API Keyï¼Œå‘é€è¯·æ±‚å°†è¢«æ·»åŠ åˆ°`Bearer TOKEN` HTTP header</span>
<span class="hljs-attr">env_key</span>Â =Â <span class="hljs-string">"OPENAI_API_KEY"</span>
<span class="hljs-comment"># wire_api çš„æœ‰æ•ˆå€¼ä¸º â€œchatâ€ å’Œ â€œresponsesâ€ã€‚å¦‚æœçœç•¥ï¼Œé»˜è®¤å€¼ä¸º â€œchatâ€ã€‚</span>
<span class="hljs-attr">wire_api</span>Â =Â <span class="hljs-string">"chat"</span>
<span class="hljs-comment"># è¯·æ±‚é¢å¤–å‚æ•°</span>
<span class="hljs-attr">query_params</span>Â = {}
</code></pre>
<p>è¯¥é…ç½®ä½¿å¾—å°† Codex CLI ä¸é OpenAI æ¨¡å‹ä¸€èµ·ä½¿ç”¨æˆä¸ºå¯èƒ½ï¼Œåªè¦æä¾›å•†æä¾›ä¸OpenAIå…¼å®¹çš„APIå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</p>
<p>ä»¥Ollamaä¸ºä¾‹ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">model</span>Â =Â <span class="hljs-string">"gpt-4o"</span>
<span class="hljs-attr">model_provider</span>Â =Â <span class="hljs-string">"ollama"</span>
<span class="hljs-section">[model_providers.ollama]</span>
<span class="hljs-attr">name</span>Â =Â <span class="hljs-string">"Ollama"</span>
<span class="hljs-attr">base_url</span>Â =Â <span class="hljs-string">"http://localhost:11434/v1"</span>
</code></pre>
<p>ä»¥Mistralä¸ºä¾‹ï¼Œé…ç½®å¦‚ä¸‹</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">model</span>Â =Â <span class="hljs-string">"mistral-large-latest"</span>
<span class="hljs-attr">model_provider</span>Â =Â <span class="hljs-string">"mistral"</span>
<span class="hljs-section">[model_providers.mistral]</span>
<span class="hljs-attr">name</span>Â =Â <span class="hljs-string">"Mistral"</span>
<span class="hljs-attr">base_url</span>Â =Â <span class="hljs-string">"https://api.mistral.ai/v1"</span>
<span class="hljs-attr">env_key</span>Â =Â <span class="hljs-string">"MISTRAL_API_KEY"</span>
</code></pre>
<p>ä½¿ç”¨æ—¶å…ˆåœ¨å‘½ä»¤è¡Œç»ˆç«¯æ‰§è¡Œå‘½ä»¤å¯¼å‡ºç¯å¢ƒå˜é‡ï¼Œç„¶åå¯åŠ¨Codex CLI</p>
<pre><code class="hljs language-ini" lang="ini">exportÂ <span class="hljs-attr">MISTRAL_API_KEY</span>=<span class="hljs-string">"MISTRAL_API_KEY"</span>
</code></pre>
<p>æˆ–è€…åœ¨ auth.json æ–‡ä»¶æ·»åŠ API Key</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
Â Â <span class="hljs-attr">"OPENAI_API_KEY"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"your_custom_api_key"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä¸Šé¢é…ç½®æ–‡ä»¶éƒ½æ˜¯å•æ¨¡å‹é…ç½®ï¼ŒCodexçš„config.tomlè¿˜æ”¯æŒå¤šæ¨¡å‹é…ç½®ï¼Œé€šè¿‡æŒ‡å®š profile ç±»å‹å³å¯å¿«é€Ÿåˆ‡æ¢æ¨¡å‹é…ç½®</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">profile</span>Â =Â <span class="hljs-string">"gpt3"</span>
<span class="hljs-section">[profiles.mistral]</span>
<span class="hljs-attr">model</span>Â =Â <span class="hljs-string">"mistral-large-latest"</span>
<span class="hljs-attr">model_provider</span>Â =Â <span class="hljs-string">"mistral"</span>
<span class="hljs-section">[profiles.gpt3]</span>
<span class="hljs-attr">model</span>Â =Â <span class="hljs-string">"gpt-3.5-turbo"</span>
<span class="hljs-attr">model_provider</span>Â =Â <span class="hljs-string">"openai-chat-completions"</span>
<span class="hljs-section">[profiles.packycode]</span>
<span class="hljs-attr">model_provider</span>Â =Â <span class="hljs-string">"packycode"</span>
<span class="hljs-attr">model</span>Â =Â <span class="hljs-string">"gpt-5"</span>
<span class="hljs-attr">model_reasoning_effort</span>Â =Â <span class="hljs-string">"high"</span>
<span class="hljs-attr">disable_response_storage</span>Â =Â <span class="hljs-literal">true</span>
<span class="hljs-section">[model_providers.openai-chat-completions]</span>
<span class="hljs-attr">name</span>Â =Â <span class="hljs-string">"OpenAI using Chat Completions"</span>
<span class="hljs-attr">base_url</span>Â =Â <span class="hljs-string">"https://api.openai.com/v1"</span>
<span class="hljs-attr">wire_api</span>Â =Â <span class="hljs-string">"chat"</span>
<span class="hljs-attr">env_key</span>Â =Â <span class="hljs-string">"OPENAI_API_KEY"</span>
<span class="hljs-section">[model_providers.mistral]</span>
<span class="hljs-attr">name</span>Â =Â <span class="hljs-string">"Mistral"</span>
<span class="hljs-attr">base_url</span>Â =Â <span class="hljs-string">"https://api.mistral.ai/v1"</span>
<span class="hljs-attr">wire_api</span>Â =Â <span class="hljs-string">"chat"</span>
<span class="hljs-attr">env_key</span>Â =Â <span class="hljs-string">"MISTRAL_API_KEY"</span>
<span class="hljs-section">[model_providers.packycode]</span>
<span class="hljs-attr">name</span>Â =Â <span class="hljs-string">"packycode"</span>
<span class="hljs-attr">base_url</span>Â =Â <span class="hljs-string">"https://oai-api.fkclaude.com/v1"</span>
<span class="hljs-attr">wire_api</span>Â =Â <span class="hljs-string">"responses"</span>
<span class="hljs-attr">env_key</span>Â =Â <span class="hljs-string">"packycode"</span>
</code></pre>
<p>é…ç½®é¡¹è¾ƒå¤šï¼Œå¯¹å…¶ä»–é…ç½®é¡¹æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</p>
<h3 data-id="heading-17">Chatå¯¹è¯</h3>
<p>å¯åŠ¨Codex CLIèŠå¤©ç•Œé¢å¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b13265f62fe64735b6d37ce9cfa34eab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=iDdjd22tQujru1qtaPNoRi%2FyQ6Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å…‰æ ‡å¤„è¾“å…¥æç¤ºè¯å³å¯ä½¿ç”¨Codex CLIå¤„ç†ä»»åŠ¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2028a5c451ca4f3bbaa4d442f00c0c74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=U7PI%2BmP67m9OqMiBlumNou00pIw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¾“å…¥ / å¿«æ·é”®ï¼Œå¯ä»¥æŸ¥çœ‹äº¤äº’å¼å‘½ä»¤åˆ—è¡¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e60dace2ae854566907e93af50ad982b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=gveSCvvDQ0SSPFgIFlKlD0mRpF8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¾“å…¥ @ å¿«æ·é”®æˆ–è€…ä½¿ç”¨ /mention äº¤äº’æŒ‡ä»¤å¯ä»¥å¼•æ–‡ä»¶ä¸Šä¸‹æ–‡ï¼Œè¿™é‡Œæœ‰ä¸ªä¸å¤ªå‹å¥½çš„åœ°æ–¹ï¼Œéœ€è¦è¾“å…¥å†…å®¹æ‰ä¼šè¿›è¡Œæ–‡ä»¶åŒ¹é…ï¼Œè€Œä¸”ä¸æ”¯æŒæ–‡ä»¶å¤¹å¼•å…¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c117e6c2532c4f47a64f3e569dd86111~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=rIHyunevHD1NXkoHK2BB0VVQ6Ec%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Codex CLIä¹Ÿæ”¯æŒå›¾åƒä¸Šä¸‹æ–‡å¼•å…¥ï¼Œè¾“å…¥æç¤ºè¯å¯å¯¹å›¾åƒè¿›è¡Œåˆ†æç­‰æ“ä½œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8e4ce16a6d94285ad924b53e174f5d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=XdYCn4ERYVuUBxbk5YwUsw2s3bI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a0cdf8edb424352ac048287baf9fc7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=8aMbx7q2Tt1RwCjt8Ks44ab8qCE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-18">è®°å¿†æ–‡ä»¶</h3>
<p>åœ¨æ‰§è¡Œ /init å‘½ä»¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç¡®å®šå½“å‰å·¥ä½œåŒºçš„æ“ä½œæƒé™ï¼ŒCodex CLIä¸åƒGemini CLIå’ŒClaude Code CLIéœ€è¦æƒé™æ—¶ä¼šè¯¢é—®ï¼Œä¹Ÿæ²¡æœ‰æä¾›åˆ‡æ¢æ¨¡å¼çš„åŠŸèƒ½ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åˆ›å»ºæˆ–è€…ç¼–è¾‘ç­‰æƒé™æ—¶éœ€è¦æå‰ä¸ºå·¥ä½œåŒºæˆæƒã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨äº¤äº’å¼æŒ‡ä»¤ /approvals åˆ‡æ¢æˆæƒæ¨¡å¼ï¼Œå·¥ä½œåŒºé»˜è®¤ä¸ºåªè¯»æ¨¡å¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0992317e086f49169c1adaa497cca3ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=TZMmYI2cmlK5fV3QauLWyqbHI4Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆæƒå®Œæˆåï¼Œæ‰§è¡Œ /init å‘½ä»¤åˆ›å»ºè®°å¿†æ–‡ä»¶ï¼ŒCodex CLIä¼šå…ˆè¾“å‡ºä¸€ä¸ªè®°å¿†æ–‡ä»¶çš„è¦æ±‚å’Œå»ºè®®æ¸…å•ï¼Œä¸çŸ¥é“å¦‚ä½•å†™çš„å°ä¼™ä¼´å¯ä»¥æŒ‰ç…§æ¸…å•æç¤ºç¼–å†™</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b60d2912d2d846d8a1a12afd291be60e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=BtUGPzlwW8SkIAPzjiDLh67A%2FfU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ•´ç†å®Œæˆåï¼ŒCodex CLIä¼šå°†è®°å¿†æ–‡ä»¶å†…å®¹è¾“å‡ºåˆ° AGENTS.md æ–‡ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/776c755b4d1246b0a4921b1bb4e2defb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=vo1PJOYRQsDQJtBQr%2F89aNaaBac%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ›å»ºå®Œæˆåï¼Œå¯ä»¥çœ‹åˆ°å·¥ä½œåŒºæ ¹ç›®å½•ä¸‹ä¼šå¤šä¸€ä¸ª AGENTS.md æ–‡ä»¶ï¼Œå†…å®¹å’Œå»ºè®®çš„è®°å¿†æ–‡ä»¶æ¸…å•æ ¼å¼ä¹Ÿæ˜¯å¯¹ç…§çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1d59ddf77ce470082097bcf9cbf0936~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=ZKD2qR2JkFo0u9xzgYhOgEqncno%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿®æ”¹å’Œè‡ªå·±æ‰‹åŠ¨åˆ›å»ºè®°å¿†æ–‡ä»¶ï¼Œä¾‹å¦‚è¿™é‡Œæˆ‘å¯ä»¥è®©Codex CLIå¯¹è¯è¾“å‡ºå†…å®¹ä»¥ä¸­æ–‡å½¢å¼å±•ç¤º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28c0d703a4d245bdaf0074fe884f88aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=AdEP8PduceT1q8Pw2Vfnc1haZfA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é‡å¯Codex CLIï¼Œå†æ¬¡è¾“å…¥å¯¹è¯ï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶Codex CLIå°±ä¼šä»¥ä¸­æ–‡è¾“å‡ºå†…å®¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/698195218c4a4a9b83edbdb4d8053ca3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=Fmy9DTFzAFSqObpZugikuSNOlmg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥æ–°å»º ~/.codex/AGENTS.md å…¨å±€è®°å¿†æ–‡ä»¶ï¼Œä¸è¿‡Codexå¥½åƒå¯¹ç”¨æˆ·çº§è®°å¿†æ–‡ä»¶æ”¯æŒçš„ä¸æ˜¯å¾ˆå¥½</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f7642dc1641498a9fc7ef874da0bacc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=%2BB4kFLvZvksNkilWrBd9mw1gFzw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-19">MCPæœåŠ¡</h3>
<p>Codex CLIæ”¯æŒMCPæœåŠ¡åŠŸèƒ½å¹¶æä¾›äº†ä¸€ç³»åˆ—MCPå‘½ä»¤è¡Œå·¥å…·ï¼Œåœ¨å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥ codex mcp --help å¯ä»¥æŸ¥çœ‹MCPç›¸å…³å‘½ä»¤</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aebb8c847d684fe0bfbefd469b135350~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=De%2Frnm%2Bt%2BTATcmChyIgNdDqoKvI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å‘½ä»¤è¡Œå·¥å…·ï¼š</p>
<ul>
<li>serveï¼šè¿è¡Œ Codex MCP æœåŠ¡å™¨ï¼ˆæ ‡å‡†è¾“å…¥è¾“å‡ºä¼ è¾“ï¼‰</li>
<li>listï¼šåˆ—å‡ºå·²é…ç½®çš„ MCP æœåŠ¡å™¨</li>
<li>getï¼šæ˜¾ç¤ºå·²é…ç½®çš„ MCP æœåŠ¡å™¨çš„è¯¦ç»†ä¿¡æ¯</li>
<li>addï¼šæ·»åŠ å…¨å±€ MCP æœåŠ¡å™¨æ¡ç›®</li>
<li>removeï¼šåˆ é™¤å…¨å±€ MCP æœåŠ¡å™¨æ¡ç›®</li>
</ul>
<p>ä»¥context7ä¸ºä¾‹ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤å®‰è£…</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-variable">$Â </span>codex mcp add context7 npx -y <span class="hljs-variable">@upstash</span>/context7-mcp
</code></pre>
<p>å®‰è£…æˆåŠŸåä½¿ç”¨ codex mcp list æŸ¥çœ‹å·²å®‰è£…çš„MCP</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b917864550bc4bd692d474e570ec4fa1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=qY8bsd5YNYrzqJ9Hv2IQYaJTw9k%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ ~/.codex/config.toml å…¨å±€é…ç½®æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°å·²æ·»åŠ åˆ°MCPæœåŠ¡é…ç½®ä¿¡æ¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c99304f04d724801afa7795d6c1c94e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=w7%2FDJhpD%2FsJWJjYORuCqiXHCjmY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½¿ç”¨å‘½ä»¤ codex mcp get context7 æŸ¥çœ‹æŒ‡å®šMCPçš„é…ç½®ä¿¡æ¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23572f9abcfe492490c64f8fad3f6507~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=7iE%2F1IjEZ31C0ckCcDGNbb27Gug%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¹Ÿå¯åŠ¨Codex CLIï¼Œä½¿ç”¨äº¤äº’å¼å‘½ä»¤ /mcp æŸ¥çœ‹å·²å®‰è£…MCPçš„å·¥å…·ä¿¡æ¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0b92b33645c4bf9ac5c52f83a1e5a3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=RsHdNhR%2BMEtK9SByw2CRjTPHkAk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨Codex CLIä¸­ä½¿ç”¨MCPæœåŠ¡å’Œå…¶ä»–AIå‘½ä»¤è¡Œç»ˆç«¯ä¸€æ ·ï¼Œå¯ä»¥ç›´æ¥æŒ‡å®šMCPè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥ç­‰Agentåˆ¤æ–­è‡ªè¡Œè°ƒç”¨å³å¯ã€‚</p>
<pre><code class="hljs language-perl" lang="perl">æŸ¥è¯¢Reactæ–°ç‰¹æ€§ï¼Œ<span class="hljs-keyword">use</span>Â context7Â 
</code></pre>
<p>è°ƒç”¨å®Œæˆåæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7c8244275394a4eab3b71ee925d87e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=0kVZblHRcvtZSKTfjJfHucyX6No%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-20">è‡ªå®šä¹‰å‘½ä»¤</h3>
<blockquote>
<p>æ³¨æ„äº‹é¡¹ï¼šCodex CLIè‡ªå®šä¹‰å‘½ä»¤ç›®å½•å¿…é¡»æ˜¯Â prompts</p>
</blockquote>
<p>Codex CLIçš„è‡ªå®šä¹‰å‘½ä»¤æ˜¯å­˜æ”¾åœ¨ ~/.codex/prompts/ ç›®å½•ä¸‹ä»¥ .md ç»“å°¾çš„Markdownæ–‡ä»¶ï¼Œè¿™å’ŒClaude Code CLIæ˜¯æœ‰äº›å·®å¼‚çš„ã€‚</p>
<p>è¿™é‡Œä»¥é‡æ„é¡¹ç›®è‡ªå®šä¹‰å‘½ä»¤ä¸ºä¾‹ï¼Œåˆ›å»º ~/.codex/prompts/refactor.md æ–‡ä»¶ï¼Œè¾“å…¥æç¤ºè¯</p>
<pre><code class="hljs">æŒ‰ç…§ä¸šç•Œçš„æœ€ä½³å®è·µä»¥æœ€é«˜çš„æ ‡å‡†ï¼Œå¸®æˆ‘é‡æ„è¿™ä¸ªé¡¹ç›®çš„ä»£ç 
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a102252d34d42a8b1e6af3373197e03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=IpvAGOhLhFbsp6gYJtD4KyE9fyk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é‡å¯Codex CLIï¼Œè¾“å…¥ /refactor æ£€ç´¢è‡ªå®šä¹‰å‘½ä»¤</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3000de286b04446bcd91faac582a928~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=muABCSHTPXC90DjrKrm7q9KzbG0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›è½¦æ‰§è¡Œï¼ŒCodex CLIå°±ä¼šæŒ‰ç…§è¦æ±‚åˆ›å»ºä»»åŠ¡è®¡åˆ’å¼€å§‹æ‰§è¡Œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08aaae3b653d44b8a08e24baaff279d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=oELZIkYc7Gy%2F%2Fg3bDhKKZHUSlP0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨Codex CLI 0.44 ç‰ˆæœ¬æä¾›äº†å¯¹å¸¦å‚è‡ªå®šä¹‰å‘½ä»¤çš„æ”¯æŒï¼Œä¸»è¦æä¾›äº† ä½ç½®å‚æ•° å’Œ å‘½åå‚æ•° 2ç§è‡ªå®šä¹‰å‘½ä»¤å‚æ•°æ–¹å¼</p>
<h4 data-id="heading-21">1ï¼‰ä½ç½®å‚æ•°</h4>
<p>å’ŒClaude Code CLIçš„åŠ¨æ€ä½ç½®å‚æ•°ä¸€æ ·ï¼ŒCodex CLIä¹Ÿæ”¯æŒé€šè¿‡ $+æ•°å­— å½¢å¼çš„åŠ¨æ€å–å€¼æ–¹å¼è·å–å¤–éƒ¨ä¼ é€’çš„å‚æ•°ï¼Œä»¥è·å–å¤©æ°”ä¿¡æ¯ä¸ºä¾‹ï¼Œåˆ›å»º ~/.codex/prompts/weather.md</p>
<pre><code class="hljs language-bash" lang="bash">å¸®æˆ‘æŸ¥çœ‹ä¸€ä¸‹ <span class="hljs-variable">$1</span> åœ¨ <span class="hljs-variable">$2</span> è¿™ä¸€å¤©çš„å¤©æ°”
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f913acde3ba84415b4cdb30adf783488~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=AUS4NLo4%2BolO87I%2FpydJ%2BaEs1rU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é‡å¯Codex CLIï¼Œè¾“å…¥å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">/prompts:weather åŒ—äº¬ æ˜å¤©
</code></pre>
<p>å¯ä»¥çœ‹åˆ°Codex CLIå‡†ç¡®è·å–äº†æˆ‘ä»¬ä¼ é€’çš„å‚æ•°å¹¶è¡¥å…¨äº†æç¤ºè¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a764a045c264c91b3aabec48346d51f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=0F31x07t0tZSCbaRqZhytNoZLSk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-22">2ï¼‰å‘½åå‚æ•°</h4>
<p>å‘½åå‚æ•°ï¼ˆname argumentsï¼‰æ˜¯Codex CLIæä¾›çš„ç‹¬ç‰¹çš„å¦ä¸€ç§åŠ¨æ€ä¼ é€’å‚æ•°çš„æ–¹å¼ ï¼Œè¿˜æ˜¯ä»¥è·å–å¤©æ°”ä¿¡æ¯ä¸ºä¾‹ï¼Œåˆ›å»º ~/.codex/prompts/weather_with_named.md</p>
<pre><code class="hljs language-bash" lang="bash">å¸®æˆ‘æŸ¥çœ‹ä¸€ä¸‹Â <span class="hljs-variable">$CITY</span>Â <span class="hljs-variable">$DATE</span>Â çš„å¤©æ°”
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4ae3e4ec41c450c8790379871662d7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=MtN%2F0iHlkK5asexnKratJVtBoRk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é‡å¯Codex CLIï¼Œè¾“å…¥å‘½ä»¤ /weather_with_named å›è½¦ï¼ŒCodex CLIä¼šè‡ªåŠ¨è¡¥å…¨å‚æ•°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e46ccd15009b495498a57e2b9575a84e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=h1YjlF9ITwigAYHTz%2Bgpn%2B8gPHU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¡«å†™å¯¹åº”çš„å‚æ•°æ‰§è¡Œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb4e0e90205c42deb2638f1a10f41ff2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=w%2B1XbfdCVLpU7%2FsMj028Siqe%2FFg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™é‡Œæœ‰ä¸ªæ³¨æ„äº‹é¡¹ï¼Œå ä½å‚æ•°åå¿…é¡»ä¸ºå…¨å¤§å†™ï¼Œå¦‚æœå†™æˆå°å†™å°†æ— æ³•è¯†åˆ«</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51fad0863b554567865f58f943db4063~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=E6aJsyKTTKQ1VuBU4GOhHjd0q2k%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°æ”¹æˆå°å†™çš„å‘½åå‚æ•°æ— æ³•è¢«è¯†åˆ«ï¼Œæ— æ³•è‡ªåŠ¨è¡¥å…¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d5b5a18f9b94a0da557737935ed17e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=j2WJmDCK33RGOuGaN%2BBsvRVpq58%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å³ä½¿æ‰‹åŠ¨è¡¥å…¨ä¹Ÿæ— æ³•æ­£å¸¸ä½¿ç”¨</p>
<pre><code class="hljs language-bash" lang="bash">/prompts:weather_with_named city=<span class="hljs-string">"åŒ—äº¬"</span>Â <span class="hljs-built_in">date</span>=<span class="hljs-string">"æ˜å¤©"</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bdc29132d7f442cb80a6db7436cc108~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=UrrGaqiFFiTN%2BZu8Vu4gGLOzlQk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-23">äº§å“å®šä»·</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d98191031e1446b86e01d997e163e48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906662&amp;x-signature=rS1uDOI8bAqVAwhNgkU9lC3x1hM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-24">æ€»ç»“</h2>
<p>æˆ‘è¿™æ¬¡ä½“éªŒCodex CLIä½¿ç”¨çš„æ˜¯ä½¬å‹æä¾›çš„å…è´¹ä¸­è½¬ç«™ï¼Œè¿‡ç¨‹ä¸­æ²¡æœ‰é‡åˆ°ä½¿ç”¨å®˜æ–¹API Keyçš„ä¸€äº›é™åˆ¶æ‰€ä»¥æ²¡æœ‰è®°å½•é—®é¢˜ï¼Œä»¥åé‡åˆ°å†åšè¡¥å……ã€‚Codex CLIæ•´ä½“ä½“éªŒä¸‹æ¥æ„Ÿè§‰æ˜¯æ¯”Gemini CLIã€Claude Code CLIåŠŸèƒ½ä¸Šè¦å°‘å¾ˆå¤šï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p>
<ul>
<li>Codex CLIä¸æ”¯æŒé¡¹ç›®çº§åˆ«æˆæƒæ–¹å¼é…ç½®</li>
<li>æˆæƒã€MCPç­‰é…ç½®æ–‡ä»¶åªæ”¯æŒç”¨æˆ·(å…¨å±€)é…ç½®</li>
<li>æ²¡æœ‰Chatå’ŒAgentæ¨¡å¼åˆ‡æ¢ï¼Œä¸ä¼šè¯¢é—®æƒé™ï¼Œåªèƒ½é€šè¿‡è®¾ç½®å·¥ä½œåŒºæƒé™æ¨¡å¼æ¥è¾¾åˆ° auto-accept çš„æ•ˆæœ</li>
<li>åªæ”¯æŒé¡¹ç›®è®°å¿†æ–‡ä»¶ï¼Œä¸æ”¯æŒå…¨å±€è®°å¿†æ–‡ä»¶</li>
<li>ä¸æ”¯æŒè‡ªå®šä¹‰hooks</li>
<li>mcpåªæ”¯æŒstdioç±»å‹ï¼Œsseå’Œhttpéœ€è¦å€ŸåŠ©ä¸‰æ–¹å·¥å…·</li>
</ul>
<p>è™½ç„¶Codex CLIåœ¨åŠŸèƒ½ä¸Šè¿˜ä¸å¤Ÿå®Œå–„ï¼Œä½†æ˜¯éšç€Claude Codeçš„é™åˆ¶ï¼ŒGPT5çš„çƒ­åº¦å’Œå«é‡‘é‡è¿˜åœ¨ä¸Šå‡ï¼ŒåŠ ä¸Šæœ€è¿‘ChatGPTå‡ºäº†gpt-5-codexæ¨¡å‹ï¼ŒCodex CLIè¿˜æ˜¯å€¼å¾—å…¥æ‰‹çš„ã€‚</p>
<h2 data-id="heading-25">å‹æƒ…æç¤º</h2>
<p>è§åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FzXSO25j79cv3ng47d-axLA" target="_blank" title="https://mp.weixin.qq.com/s/zXSO25j79cv3ng47d-axLA" ref="nofollow noopener noreferrer">Codex CLIåˆä½“éªŒ</a></p>
<blockquote>
<p>æœ¬æ–‡åŒæ­¥è‡ªå¾®ä¿¡å…¬ä¼—å· "<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FzXSO25j79cv3ng47d-axLA" target="_blank" title="https://mp.weixin.qq.com/s/zXSO25j79cv3ng47d-axLA" ref="nofollow noopener noreferrer">ç¨‹åºå‘˜å°æºª</a>" ï¼Œè¿™é‡Œåªæ˜¯åŒæ­¥ï¼Œæƒ³çœ‹åŠæ—¶æ¶ˆæ¯è¯·ç§»æ­¥æˆ‘çš„å…¬ä¼—å·ï¼Œä¸å®šæ—¶æ›´æ–°æˆ‘çš„å­¦ä¹ ç»éªŒã€‚å‹æƒ…æç¤ºå‹æƒ…æç¤º</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE Friends è½åœ°æµå—ï¼é¦–åœºçº¿ä¸‹æ´»åŠ¨åœ†æ»¡ç»“æŸ]]></title>    <link>https://juejin.cn/post/7573193563044823094</link>    <guid>https://juejin.cn/post/7573193563044823094</guid>    <pubDate>2025-11-16T14:15:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573193563044823094" data-draft-id="7572525491539361834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE Friends è½åœ°æµå—ï¼é¦–åœºçº¿ä¸‹æ´»åŠ¨åœ†æ»¡ç»“æŸ"/> <meta itemprop="keywords" content="Trae,Solo,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-16T14:15:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å“¥æ•°æ™ºè°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956195409223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE Friends è½åœ°æµå—ï¼é¦–åœºçº¿ä¸‹æ´»åŠ¨åœ†æ»¡ç»“æŸ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956195409223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å“¥æ•°æ™ºè°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T14:15:00.000Z" title="Sun Nov 16 2025 14:15:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ˜¨å¤©åœ¨å­—èŠ‚ <code>TRAE</code> ç’å¨œè€å¸ˆçš„å¸®åŠ©ä¸‹ï¼Œå’Œå®‡èˆªè€å¸ˆä¸€èµ·ä¸¾åŠäº† <code>TRAE Friends @ æµå—</code> çš„ç¬¬ä¸€åœºæ´»åŠ¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd769401cb9d4308ae34d89394aace0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763907306&amp;x-signature=nPkZNIlo2Nd5Jc6pJbUyWUoT8LA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07263a900ae542d7b99c0ccb7743d825~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763907306&amp;x-signature=ctotoWha%2BL8epcPSSTPcsa%2FPk8w%3D" alt="" loading="lazy"/></p>
<p>è™½ç„¶ç°åœºå‡ºç°äº†ä¸€äº›è®¡åˆ’å¤–çš„çŠ¶å†µï¼Œä½†è¿˜ç®—åœ†æ»¡åœ°å®Œæˆäº†æœ¬æ¬¡æ´»åŠ¨ã€‚</p>
<p>è¿™æ˜¯æµå—ç¤¾åŒºç¬¬ä¸€æ¬¡ä¸¾åŠç±»ä¼¼æ´»åŠ¨ï¼Œæ„Ÿè°¢å„ä½ä¼™ä¼´çš„ä½“è°…ä¸æ”¯æŒï¼Œåç»­ï¼Œæˆ‘ä»¬ä¹Ÿä¼šä¸ºå¤§å®¶ç­–åˆ’æ›´å¤šã€æ›´æœ‰ä»·å€¼çš„æ´»åŠ¨ã€‚</p>
<h2 data-id="heading-0">æ´»åŠ¨å†…å®¹</h2>
<p>æ•´ä¸ªæ´»åŠ¨ä»13:30å¼€å§‹ï¼Œä¸€ç›´åˆ°17:30ç»“æŸï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ã€ŠTRAE SOLO ä¸»é¢˜åˆ†äº«ã€‹ by TRAE Fellow å¼ å®‡èˆª</li>
<li>ã€ŠTRAE SOLO DEMO æ¼”ç¤ºã€‹ by TRAE Fellow è‘£é¹é£</li>
<li>ã€ŠTRAEä½¿ç”¨å¿ƒå¾— æš¨ åClaudeæ—¶ä»£TRAEçš„å‘å±•å±•æœ›ã€‹ by éƒ‘å‡¯ï¼Œå±±ä¸œä¼ åª’èŒä¸šå­¦é™¢æ•™å¸ˆï¼Œäººå·¥æ™ºèƒ½ä¸“ä¸šè´Ÿè´£äºº</li>
<li>ã€ŠTRAE åœ¨å›¢é˜Ÿå†…çš„åº”ç”¨ä½“ä¼šã€‹ by å°¹é¹ï¼Œæµå—é™Œè®¯ä¿¡æ¯ç§‘æŠ€æœ‰é™å…¬å¸å·¥ç¨‹å¸ˆ</li>
<li>å¤šä½ä¼™ä¼´åœ¨å¼€æ”¾éº¦ç¯èŠ‚åšäº†ä¸ªäººä½¿ç”¨å¿ƒå¾—çš„ä½“ä¼šå’Œåˆ†äº«</li>
</ul>
<p>æ•´ä½“æ´»åŠ¨å†…å®¹è¿˜æ˜¯éå¸¸å……å®çš„ï¼Œä¹Ÿæ¬¢è¿åç»­å„ä½ä¼™ä¼´ç»§ç»­å…³æ³¨å¹¶å‚ä¸è¿›æ¥ã€‚</p>
<h2 data-id="heading-1">æˆ‘çš„åˆ†äº«</h2>
<p>åœ¨æ´»åŠ¨ä¸­ï¼Œæˆ‘åšäº†ã€ŠTRAE SOLO DEMO æ¼”ç¤ºã€‹éƒ¨åˆ†çš„åˆ†äº«ã€‚</p>
<p>ä¸ºäº†æ›´èƒ½ä¸å¤§å®¶äº§ç”Ÿå…±é¸£ï¼ŒDEMO éƒ½æ˜¯æ ¹æ®å®˜æ–¹ DEMO å®šä½ï¼Œç»“åˆå®é™…åœºæ™¯è®¾è®¡çš„ã€‚</p>
<p>ç”±äºä»Šå¤©æ˜¯ç¬¬ä¸€æ¬¡æ´»åŠ¨ï¼Œä¸ºäº†ä¿æŒåˆ†äº«çš„æ™®é€‚æ€§ï¼Œå†…å®¹ä»¥åŸºç¡€ä¸ºä¸»ï¼Œåç»­ä¼šæ ¹æ®ä¸åŒçš„ä¸»é¢˜å’Œéœ€æ±‚ï¼Œè¿›è¡Œæ›´åŠ æ·±å…¥çš„å†…å®¹åˆ†äº«ã€‚</p>
<p>åˆ†äº«å†…å®¹æ•´ç†å¦‚ä¸‹ï¼Œå…¶ä¸­æ¯ä¸ªç« èŠ‚çš„ç‰¹æ€§æ˜¯ç°åœºå¯¹åº” <code>SOLO</code> æ–°ç‰¹æ€§çš„ç®€è¦æ¼”ç¤ºï¼Œå¯å¿½ç•¥ã€‚</p>
<h3 data-id="heading-2">å¤§çº²</h3>
<ul>
<li>CASE1ï¼šéœ€æ±‚å¼€å‘ï¼Œä»0åˆ°1æ­å»ºä¸€ä¸ªæŠ½å¥–åº”ç”¨</li>
<li>CASE2ï¼šbug ä¿®å¤ï¼Œç»ˆç«¯ä¸å¯¹è¯çš„é›†æˆï¼Œå†…ç½®æµè§ˆå™¨çš„é›†æˆ</li>
<li>CASE3ï¼šé¡¹ç›®ç†è§£ï¼Œæ¥æ‰‹æ—§é¡¹ç›®çš„å¸®æ‰‹</li>
</ul>
<h3 data-id="heading-3">CASE1ï¼šéœ€æ±‚å¼€å‘</h3>
<p><strong>èƒŒæ™¯</strong></p>
<p>èƒŒæ™¯æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯æŠ½å¥–ï¼Œæˆ‘ä»¬è®¾å®šä¸ºä¸Šä¼  Excel çš„æ–¹å¼ã€‚</p>
<p>Excel ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹åˆ—ï¼š</p>
<ul>
<li>ID</li>
<li>å§“å</li>
<li>æ‰‹æœºå·</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8e4b1407e334c9a83fb54bf68b27da4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763907306&amp;x-signature=VavT3YEua90%2F8yxU3uFdIANHJD4%3D" alt="" loading="lazy"/></p>
<p><strong>æŒ‡ä»¤</strong></p>
<pre><code class="hljs language-shell" lang="shell">è¯·åœ¨å½“å‰è·¯å¾„ä¸‹å¸®æˆ‘å®ç°ä¸€ä¸ªæŠ½å¥–åº”ç”¨ã€‚ 
<span class="hljs-meta prompt_"> 
 #</span><span class="bash"><span class="hljs-comment"># ä¸šåŠ¡</span></span> 
 å®¢æˆ·ä¸Šä¼ ä¸€ä¸ªexcelï¼Œexcelä¸­åŒ…æ‹¬IDã€å§“åã€æ‰‹æœºå·ä¸‰åˆ—ï¼Œç„¶åå½•å…¥æŠ½å¥–æ•°é‡ï¼Œå¹¶ç‚¹å‡»â€œæŠ½å¥–â€æŒ‰é’®ï¼Œå¼€å¯éšæœºæŠ½å¥–ï¼ŒæŠ½å¥–è¿‡ç¨‹æ·»åŠ åŠ¨æ•ˆã€‚ 
<span class="hljs-meta prompt_"> 
 #</span><span class="bash"><span class="hljs-comment"># ç•Œé¢</span></span> 
 - ç•Œé¢é£æ ¼è¯·ä¸æˆªå›¾ä¿æŒä¸€è‡´
 - å•ä¸€é¡µé¢ 
 - å°½é‡æŠŠå…ƒç´ å‘ˆç°åœ¨é¦–å±ä¸­ï¼Œæ–¹ä¾¿æŠ•å±å±•ç¤º 
 - æš‚ä¸ä½¿ç”¨åç«¯æœåŠ¡ 
<span class="hljs-meta prompt_"> 
 #</span><span class="bash"><span class="hljs-comment"># æŠ€æœ¯</span></span> 
 - åœ¨å½“å‰ç›®å½•ä½¿ç”¨vue3 cli åˆå§‹åŒ–é¡¹ç›®å·¥ç¨‹
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6acb7031d0940fea5ef45e73688683d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763907306&amp;x-signature=PI3DfalP0wCiHSTbH04TzA2AhYc%3D" alt="" loading="lazy"/></p>
<p><strong>ç‰¹æ€§</strong></p>
<ul>
<li>ä»»åŠ¡æ€»ç»“ä¸æ‘˜è¦</li>
<li>Tools Panels</li>
<li>ä¸Šä¸‹æ–‡æ€»ç»“ä¸å‹ç¼©</li>
<li>TO-DO List</li>
<li>Subagent</li>
</ul>
<h3 data-id="heading-4">CASE2ï¼šbug ä¿®å¤</h3>
<p><strong>ç»ˆç«¯ä¸å¯¹è¯çš„é›†æˆ</strong></p>
<p>åå°åœ¨ç»ˆç«¯é‡Œé¢çš„ç¼–è¯‘é”™è¯¯ï¼Œå¯ä»¥ç›´æ¥æ·»åŠ åˆ°å¯¹è¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31ba96873bf64c85ae9376cb3d8ca1e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763907306&amp;x-signature=L8jBHm3ENoJRY1n5LX%2BRKHKKqlM%3D" alt="" loading="lazy"/></p>
<p><strong>å†…ç½®æµè§ˆå™¨</strong></p>
<p>å†…ç½®æµè§ˆå™¨ä¸­ï¼Œé€‰æ‹©å…ƒç´ ï¼Œæ›´åŠ ç²¾å‡†çš„ä¿®å¤ç•Œé¢é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5cbe5b60c5a4b4aa8d9fac6f826e888~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763907306&amp;x-signature=d%2BnUiNkBMQsoU%2FJjwBOcckxQa1U%3D" alt="" loading="lazy"/></p>
<p><strong>é—®ç­”ä¿®å¤</strong></p>
<p>å½“ç„¶ï¼Œæ‰€æœ‰å‡ºç°çš„bugï¼Œéƒ½å¯ä»¥é€šè¿‡ <code>Chat</code> æ–¹å¼ä¿®å¤ã€‚</p>
<p><strong>ç‰¹æ€§</strong></p>
<ul>
<li>Multi Task</li>
<li>ä»£ç å·®å¼‚</li>
</ul>
<h3 data-id="heading-5">CASE3ï¼šé¡¹ç›®ç†è§£</h3>
<p>ä½¿ç”¨äº†å¾ˆå¤šäººéƒ½æ¯”è¾ƒç†Ÿæ‚‰çš„è‹¥ä¾å‰åç«¯é¡¹ç›®æºç è¿›è¡Œåˆ†æï¼Œå·²ç»æå‰ä¸‹è½½å¥½äº†ã€‚</p>
<p><strong>æŒ‡ä»¤</strong></p>
<pre><code class="hljs language-bash" lang="bash">æˆ‘æƒ³å­¦ä¹ è¿™ä¸ªé¡¹ç›®ï¼Œä»¥æ–¹ä¾¿ä¹‹åè¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚æˆ‘å¯¹å‰ç«¯æ¯”è¾ƒç†Ÿæ‚‰ï¼Œä½†æ˜¯å¯¹äºcliç›¸å…³é€»è¾‘ï¼Œä»¥åŠæœåŠ¡ç«¯ç›¸å…³å‘½ä»¤ä¸å¤ªäº†è§£ã€‚
è¯·è¯¦ç»†åˆ†æè¿™ä¸ªé¡¹ç›®ç»“æ„ï¼Œå¹¶ä¸”è¡¥å……èƒŒæ™¯çŸ¥è¯†ï¼Œå¸®åŠ©æˆ‘äº†è§£å’Œå­¦ä¹ è¿™ä¸ªé¡¹ç›®ã€‚ä»¥markdown+ mermaid å½¢å¼ï¼Œè¾“å‡ºåˆ°.trae/documents æ–‡ä»¶å¤¹ä¸‹ï¼Œå¯ä»¥æœ‰å¤šä¸ªæ–‡ä»¶ã€‚
</code></pre>
<p><strong>è¿‡ç¨‹</strong></p>
<p>é‡‡ç”¨äº† SOLO Coder æ™ºèƒ½ä½“ï¼Œé€‰æ‹©äº† Plan æ¨¡å¼ã€‚</p>
<p>å…ˆæ˜¯è§„åˆ’äº†é¡¹ç›®åˆ†æçš„è®¡åˆ’ï¼Œå¹¶å½¢æˆäº†ä¸€ä»½å‚è€ƒæ–‡æ¡£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/106b1a208f65400bb3210355a6f9f105~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763907306&amp;x-signature=ClbMgGoTwPHKoaP%2BcZR1FJEJDD4%3D" alt="" loading="lazy"/></p>
<p>ç¡®è®¤æ‰§è¡Œåï¼Œä¼šç”Ÿæˆéå¸¸è¯¦ç»†çš„å­¦ä¹ æ–‡æ¡£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21a009291a2d4600a58a64256d3d8e44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763907306&amp;x-signature=%2FDr7I6vRvcdCNAmGI8683Sl0Oso%3D" alt="" loading="lazy"/></p>
<p><strong>ç‰¹æ€§</strong></p>
<ul>
<li>SOLO Coder</li>
<li>Plan</li>
</ul>
<h2 data-id="heading-6">äº¤æµå†…å®¹æ•´ç†</h2>
<p>ç°åœºäº¤æµäº†å‡ ä¸ªé—®é¢˜ï¼Œæ„Ÿè§‰æ¯”è¾ƒå…¸å‹ï¼Œè¿™é‡Œæ•´ç†ä¸‹ï¼Œå¸Œæœ›å¯ä»¥å¯å‘åˆ°æœ‰éœ€è¦çš„äººã€‚</p>
<p>ç”±äºæ˜¯ç°åœºå›ç­”ï¼Œå¯èƒ½ä¸é‚£ä¹ˆä¸¥å¯†ï¼Œå¤§å®¶æŒ‰éœ€ç†è§£ï¼Œä¹Ÿæ¬¢è¿ç•™è¨€æˆ–è€…ç¤¾åŒºç¾¤é‡Œæ¥ç€äº¤æµã€‚</p>
<h3 data-id="heading-7">AI é’ˆå¯¹å¤§é¡¹ç›®å¦‚ä½•å¤„ç†</h3>
<p>ç°åœ¨æ¨¡å‹çš„ä¸Šä¸‹æ–‡è™½ç„¶æœ‰å¾ˆå¤§æå‡ï¼Œä½†ä¾ç„¶å­˜åœ¨ä¸Šçº¿ï¼Œå°¤å…¶æ˜¯é’ˆå¯¹å·²å­˜åœ¨å¤šå¹´çš„æ—§é¡¹ç›®ï¼Œå¾ˆå¤šæ—¶å€™ç›´æ¥åˆ†æçš„ç»“æœå¹¶ä¸å¥½ã€‚</p>
<p>æœ€æ¨èçš„æ€è·¯è¿˜æ˜¯<strong>äººå·¥æŒ‡å¯¼åˆ’åˆ†å­æ¨¡å—</strong>ï¼Œæ–¹ä¾¿æ¨¡å‹å¯ä»¥å‡†ç¡®å¤„ç†å„ä¸ªå­æ¨¡å—ï¼Œåç»­å†é€šè¿‡ AI è¿›è¡Œæ±‡æ€»ã€‚</p>
<p>å¦ä¸€ä¸ªæ€è·¯æ˜¯å‚è€ƒ <code>Qoder</code> å¼•å…¥çš„ <code>Wiki</code> ç‰¹æ€§ï¼Œå…·ä½“æŠ€æœ¯è¿˜æ²¡æœ‰ç ”ç©¶ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œæœç´¢äº†è§£ã€‚</p>
<h3 data-id="heading-8">TRAE åœ¨éç¼–ç¨‹é¢†åŸŸçš„åº”ç”¨</h3>
<p>è™½ç„¶ <code>TRAE</code> çš„å®šä½æ˜¯ <code>Coding Agent</code>ï¼Œä½†å®ƒå¯ä»¥ææ•ˆçš„åœºæ™¯è¿œä¸æ­¢ <code>Coding</code> é¢†åŸŸã€‚</p>
<p>å·¥ç¨‹ç»„ç»‡ã€ä¸Šä¸‹æ–‡ç®¡ç†ã€å„ç±»å·¥å…·ã€è‡ªå®šä¹‰æ™ºèƒ½ä½“ç­‰ç‰¹æ€§å¯ä»¥éå¸¸æ–¹ä¾¿çš„<strong>åº”ç”¨åˆ°å„ç§åœºæ™¯</strong>ã€‚</p>
<p>æ¯”å¦‚ï¼Œæˆ‘æ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œåšäº†ä¸ªâ€œå†™ä½œæ™ºèƒ½ä½“â€ï¼Œè´Ÿè´£å¸®æˆ‘å®¡æŸ¥æˆ‘çš„æ–‡ç« ã€æä¾›çµæ„Ÿã€æ¶¦è‰²ä¸é€šé¡ºçš„è¯­å¥ã€‚</p>
<h3 data-id="heading-9">TRAE å¯¹äºäº§å“ç»ç†çš„åº”ç”¨åœºæ™¯</h3>
<p>å¤§å®¶æ¯”è¾ƒç†Ÿæ‚‰çš„äº§å“ç»ç†åº”ç”¨åœºæ™¯åº”è¯¥æ˜¯ï¼š<strong>å¿«é€Ÿç”ŸæˆdemoåŸå‹ç³»ç»Ÿ</strong>ã€‚</p>
<p>è€Œæˆ‘å¹³æ—¶è¿˜æœ‰ä¸¤ä¸ªåº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>æ ¹æ®ä»£ç ç”Ÿæˆ<strong>é¡¹ç›®æ±‡æŠ¥æ–‡æ¡£ç´ æ</strong>ï¼Œå‡†ç¡®ï¼Œè¿˜ä¸æœ€æ–°ä»£ç åŒæ­¥ã€‚</li>
<li>é€šè¿‡ Code ä¸ºä½ è®¾è®¡<strong>æµ‹è¯•ç”¨ä¾‹</strong>ã€æˆ–è€…<strong>åˆæ­¥å®¡æŸ¥</strong>ã€‚</li>
</ul>
<h3 data-id="heading-10">ç¼–å†™AIæŒ‡ä»¤/æ–‡æ¡£åº”è¯¥æ³¨æ„ä»€ä¹ˆ</h3>
<p>æç¤ºè¯å¾ˆé‡è¦ï¼Œä½†éšç€æ¨¡å‹èƒ½åŠ›çš„æå‡ï¼ŒåŸæœ‰çš„å¾ˆå¤šæç¤ºè¯æŠ€å·§å·²ç»å†…ç½®åˆ°æ¨¡å‹æˆ–è€…å·¥å…·å†…äº†ã€‚</p>
<p>é‚£ç°åœ¨çš„æç¤ºè¯è¿˜éœ€è¦æ³¨æ„å“ªäº›å‘¢ï¼Ÿ</p>
<p>æˆ‘æ„Ÿè§‰æ¯”è¾ƒé‡è¦çš„æ˜¯ï¼š<strong>æ¡ç†æ¸…æ™°/ç»“æ„åŒ–</strong>ã€‚</p>
<p>æ•´ä½“çš„ç»“æ„åŒ–ï¼Œå¤§å®¶åº”è¯¥éƒ½æ˜ç™½ï¼Œè¿™é‡Œæˆ‘åˆ†äº«ä¸¤ä¸ªå…·ä½“çš„ä½“ä¼šï¼š</p>
<ul>
<li>ä¸è¦å‡ºç°æŸæ®µ<strong>å†…å®¹å½’å±æ¨¡ç³Š</strong>çš„æƒ…å†µï¼Œæ¯”å¦‚ä¸€ä¸ªéœ€æ±‚åœ¨å¤šä¸ªæ¨¡å—ä¸­éƒ½æœ‰æè¿°ï¼Œä½†æœªè¯´æ˜å“ªä¸ªæ˜¯ä¸»æ¨¡å—ï¼Œå“ªä¸ªæ˜¯ä¾èµ–æ¨¡å—</li>
<li>å„éœ€æ±‚çš„<strong>ç¯‡å¹…åº”å½“å’Œéœ€æ±‚çš„é‡è¦ç¨‹åº¦æ­£ç›¸å…³</strong>ï¼Œä¸è¦ä¸ºæŸä¸ªä¸é‡è¦ä½†ç†Ÿæ‚‰çš„éœ€æ±‚ç¼–å†™å¤§é‡å†…å®¹ï¼Œå¯¼è‡´AIè¯¯åˆ¤é‡è¦ç¨‹åº¦ã€‚</li>
</ul>
<h2 data-id="heading-11">ç»“è¯­</h2>
<p>å¥½äº†ï¼Œè¿™æ¬¡æ´»åŠ¨çš„è‡ªæˆ‘æ€»ç»“ä¹Ÿå®Œæˆäº†ã€‚</p>
<p>å‡†å¤‡è€ƒè™‘åç»­çš„æ´»åŠ¨äº†ï¼Œä¹Ÿæ¬¢è¿ç¤¾åŒºçš„ä¼™ä¼´å‘è¡¨å„è‡ªçš„æƒ³æ³•å“ˆ~</p>
<p>æ˜å¤©ä¸Šç­ï¼Œå„ä½åŠ æ²¹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++å¾ªç¯ç»“æ„æ¢å¾®ï¼šæ·±å…¥ç†è§£whileä¸do...while]]></title>    <link>https://juejin.cn/post/7572749797469519881</link>    <guid>https://juejin.cn/post/7572749797469519881</guid>    <pubDate>2025-11-16T14:45:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572749797469519881" data-draft-id="7572793505900298291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++å¾ªç¯ç»“æ„æ¢å¾®ï¼šæ·±å…¥ç†è§£whileä¸do...while"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-16T14:45:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="oioihoii"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++å¾ªç¯ç»“æ„æ¢å¾®ï¼šæ·±å…¥ç†è§£whileä¸do...while
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    oioihoii
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T14:45:46.000Z" title="Sun Nov 16 2025 14:45:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨C++ç¼–ç¨‹ä¸­ï¼Œå¾ªç¯æ˜¯æ§åˆ¶æµç¨‹çš„åŸºçŸ³ï¼Œç”¨äºé‡å¤æ‰§è¡Œä¸€æ®µä»£ç ï¼Œç›´åˆ°æ»¡è¶³ç‰¹å®šæ¡ä»¶ã€‚<code>while</code>å’Œ<code>do...while</code>æ˜¯ä¸¤ç§æœ€åŸºæœ¬çš„è¿­ä»£ç»“æ„ï¼Œå®ƒä»¬çœ‹ä¼¼ç›¸ä¼¼ï¼Œä½†åœ¨è¯­ä¹‰å’Œè¡Œä¸ºä¸Šå­˜åœ¨å…³é”®å·®å¼‚ã€‚ç†è§£è¿™äº›å·®å¼‚å¯¹äºç¼–å†™æ­£ç¡®ã€é«˜æ•ˆå’Œæ˜“äºç»´æŠ¤çš„ä»£ç è‡³å…³é‡è¦ã€‚</p>
<hr/>
<h3 data-id="heading-0"><strong>ç¬¬ä¸€ç« ï¼š<code>while</code>å¾ªç¯ - â€œå…ˆéªŒâ€çš„è¿­ä»£è€…</strong></h3>
<p><code>while</code>å¾ªç¯æ˜¯ä¸€ç§<strong>å‰ç½®æ¡ä»¶</strong>å¾ªç¯ã€‚å®ƒé¦–å…ˆè¯„ä¼°æ¡ä»¶ï¼Œåªæœ‰å½“æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå¾ªç¯ä½“ã€‚</p>
<h4 data-id="heading-1"><strong>1.1 è¯­æ³•ä¸æ‰§è¡Œæµç¨‹</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">while</span> (condition) {
    <span class="hljs-comment">// å¾ªç¯ä½“ï¼šè¦é‡å¤æ‰§è¡Œçš„è¯­å¥</span>
}
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong></p>
<ol>
<li><strong>è¯„ä¼°æ¡ä»¶</strong>ï¼šè®¡ç®—<code>condition</code>è¡¨è¾¾å¼ã€‚å¦‚æœç»“æœä¸º<code>true</code>ï¼ˆéé›¶ï¼‰ï¼Œç»§ç»­æ­¥éª¤2ï¼›å¦‚æœä¸º<code>false</code>ï¼ˆé›¶ï¼‰ï¼Œå¾ªç¯ç»ˆæ­¢ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œå¾ªç¯ä¹‹åçš„ä»£ç ã€‚</li>
<li><strong>æ‰§è¡Œå¾ªç¯ä½“</strong>ï¼šæ‰§è¡ŒèŠ±æ‹¬å·<code>{}</code>å†…çš„æ‰€æœ‰è¯­å¥ã€‚</li>
<li><strong>å¾ªç¯</strong>ï¼šå®Œæˆå¾ªç¯ä½“åï¼Œè·³å›æ­¥éª¤1ï¼Œé‡æ–°è¯„ä¼°æ¡ä»¶ã€‚</li>
</ol>
<p>è¿™ä¸ªæµç¨‹å½¢æˆäº†ä¸€ä¸ªç»å…¸çš„â€œæ£€æŸ¥-æ‰§è¡Œâ€å¾ªç¯ã€‚</p>
<h4 data-id="heading-2"><strong>1.2 å“²å­¦ä¸é€‚ç”¨åœºæ™¯</strong></h4>
<p><code>while</code>å¾ªç¯çš„å“²å­¦æ˜¯ï¼š<strong>â€œçœ‹ä¸åˆ°ç»¿ç¯ï¼Œç»ä¸å‰è¿›â€</strong>ã€‚å®ƒé€‚ç”¨äºé‚£äº›<strong>å¯èƒ½ä¸€æ¬¡éƒ½ä¸éœ€è¦æ‰§è¡Œ</strong>çš„åœºæ™¯ã€‚</p>
<p><strong>ç»å…¸ç”¨ä¾‹ï¼š</strong></p>
<ul>
<li><strong>è¯»å–æœªçŸ¥é•¿åº¦çš„è¾“å…¥</strong>ï¼šåœ¨è¯»å–æ–‡ä»¶æˆ–ç”¨æˆ·è¾“å…¥æ—¶ï¼Œé€šå¸¸æ— æ³•é¢„å…ˆçŸ¥é“å¾ªç¯æ¬¡æ•°ã€‚
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span> value;
<span class="hljs-keyword">while</span> (std::cin &gt;&gt; value) { <span class="hljs-comment">// å½“è¾“å…¥æµæœ‰æ•ˆæ—¶ç»§ç»­è¯»å–</span>
    <span class="hljs-comment">// å¤„ç†value</span>
}
</code></pre>
</li>
<li><strong>äº‹ä»¶ç­‰å¾…å¾ªç¯</strong>ï¼šç­‰å¾…æŸä¸ªå¤–éƒ¨æ¡ä»¶æˆç«‹ï¼ˆå¦‚ç¡¬ä»¶å°±ç»ªã€ä¿¡å·è§¦å‘ï¼‰ã€‚
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">while</span> (!<span class="hljs-built_in">isDataReady</span>()) {
    <span class="hljs-comment">// ç­‰å¾…ï¼Œæˆ–è€…è¿›è¡Œä¸€äº›å…¶ä»–å·¥ä½œ</span>
}
</code></pre>
</li>
<li><strong>éå†é“¾è¡¨ç­‰åŠ¨æ€æ•°æ®ç»“æ„</strong>ï¼š
<pre><code class="hljs language-cpp" lang="cpp">Node* current = head;
<span class="hljs-keyword">while</span> (current != <span class="hljs-literal">nullptr</span>) {
    <span class="hljs-comment">// å¤„ç†å½“å‰èŠ‚ç‚¹</span>
    current = current-&gt;next;
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-3"><strong>1.3 æ½œåœ¨é™·é˜±ï¼šæ— é™å¾ªç¯</strong></h4>
<p>å¦‚æœå¾ªç¯æ¡ä»¶æ°¸è¿œä¸ä¸º<code>false</code>ï¼Œ<code>while</code>å¾ªç¯å°†æ— é™æ‰§è¡Œä¸‹å»ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è­¦å‘Šï¼šæ— é™å¾ªç¯ï¼</span>
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    std::cout &lt;&lt; <span class="hljs-string">"This will print forever!\n"</span>;
}

<span class="hljs-type">int</span> count = <span class="hljs-number">10</span>;
<span class="hljs-comment">// å¦‚æœå¾ªç¯ä½“å†…ä¸ä¿®æ”¹countï¼Œè¿™ä¹Ÿå°†æ˜¯æ— é™å¾ªç¯</span>
<span class="hljs-keyword">while</span> (count &gt; <span class="hljs-number">0</span>) {
    std::cout &lt;&lt; <span class="hljs-string">"Oops! Count is still "</span> &lt;&lt; count &lt;&lt; <span class="hljs-string">"\n"</span>;
    <span class="hljs-comment">// å¿˜è®°å†™ count--;</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-4"><strong>ç¬¬äºŒç« ï¼š<code>do...while</code>å¾ªç¯ - â€œåéªŒâ€çš„ä¿è¯è€…</strong></h3>
<p><code>do...while</code>å¾ªç¯æ˜¯ä¸€ç§<strong>åç½®æ¡ä»¶</strong>å¾ªç¯ã€‚å®ƒé¦–å…ˆæ— æ¡ä»¶åœ°æ‰§è¡Œä¸€æ¬¡å¾ªç¯ä½“ï¼Œç„¶åå†è¯„ä¼°æ¡ä»¶ã€‚</p>
<h4 data-id="heading-5"><strong>2.1 è¯­æ³•ä¸æ‰§è¡Œæµç¨‹</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">do</span> {
    <span class="hljs-comment">// å¾ªç¯ä½“ï¼šè¦é‡å¤æ‰§è¡Œçš„è¯­å¥</span>
} <span class="hljs-keyword">while</span> (condition); <span class="hljs-comment">// æ³¨æ„ç»“å°¾çš„åˆ†å·</span>
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong></p>
<ol>
<li><strong>æ‰§è¡Œå¾ªç¯ä½“</strong>ï¼šæ— æ¡ä»¶åœ°æ‰§è¡Œå¾ªç¯ä½“å†…çš„è¯­å¥ã€‚</li>
<li><strong>è¯„ä¼°æ¡ä»¶</strong>ï¼šè®¡ç®—<code>condition</code>è¡¨è¾¾å¼ã€‚å¦‚æœç»“æœä¸º<code>true</code>ï¼Œè·³å›æ­¥éª¤1ï¼›å¦‚æœä¸º<code>false</code>ï¼Œå¾ªç¯ç»ˆæ­¢ã€‚</li>
</ol>
<p>è¿™ä¸ªæµç¨‹å½¢æˆäº†ä¸€ä¸ªâ€œæ‰§è¡Œ-æ£€æŸ¥â€å¾ªç¯ã€‚</p>
<h4 data-id="heading-6"><strong>2.2 å“²å­¦ä¸é€‚ç”¨åœºæ™¯</strong></h4>
<p><code>do...while</code>å¾ªç¯çš„å“²å­¦æ˜¯ï¼š<strong>â€œæ— è®ºå¦‚ä½•ï¼Œå…ˆåšä¸€æ¬¡å†è¯´â€</strong>ã€‚å®ƒä¿è¯äº†<strong>å¾ªç¯ä½“è‡³å°‘è¢«æ‰§è¡Œä¸€æ¬¡</strong>ã€‚</p>
<p><strong>ç»å…¸ç”¨ä¾‹ï¼š</strong></p>
<ul>
<li><strong>èœå•é©±åŠ¨ç¨‹åº</strong>ï¼šæ€»æ˜¯å…ˆå‘ç”¨æˆ·æ˜¾ç¤ºèœå•ï¼Œç„¶åæ ¹æ®ç”¨æˆ·è¾“å…¥å†³å®šæ˜¯å¦ç»§ç»­ã€‚
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span> choice;
<span class="hljs-keyword">do</span> {
    std::cout &lt;&lt; <span class="hljs-string">"1. Option A\n"</span>;
    std::cout &lt;&lt; <span class="hljs-string">"2. Option B\n"</span>;
    std::cout &lt;&lt; <span class="hljs-string">"3. Exit\n"</span>;
    std::cout &lt;&lt; <span class="hljs-string">"Enter your choice: "</span>;
    std::cin &gt;&gt; choice;

    <span class="hljs-comment">// å¤„ç†choice...</span>
} <span class="hljs-keyword">while</span> (choice != <span class="hljs-number">3</span>); <span class="hljs-comment">// å¦‚æœç”¨æˆ·ä¸é€‰æ‹©3ï¼Œåˆ™å†æ¬¡æ˜¾ç¤ºèœå•</span>
</code></pre>
</li>
<li><strong>è¾“å…¥éªŒè¯</strong>ï¼šç¡®ä¿ç”¨æˆ·è‡³å°‘è¾“å…¥ä¸€æ¬¡æœ‰æ•ˆæ•°æ®ã€‚
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span> number;
<span class="hljs-keyword">do</span> {
    std::cout &lt;&lt; <span class="hljs-string">"Please enter a positive number: "</span>;
    std::cin &gt;&gt; number;
} <span class="hljs-keyword">while</span> (number &lt;= <span class="hljs-number">0</span>); <span class="hljs-comment">// å¦‚æœè¾“å…¥æ— æ•ˆï¼Œè¦æ±‚é‡æ–°è¾“å…¥</span>
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>ç¬¬ä¸‰ç« ï¼šæ ¸å¿ƒå·®å¼‚ä¸æ·±åº¦å¯¹æ¯”</strong></h3>






























<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left"><code>while</code> å¾ªç¯</th><th align="left"><code>do...while</code> å¾ªç¯</th></tr></thead><tbody><tr><td align="left"><strong>æ¡ä»¶æ£€æŸ¥æ—¶æœº</strong></td><td align="left">å¾ªç¯<strong>å¼€å§‹å‰</strong></td><td align="left">å¾ªç¯<strong>ç»“æŸå</strong></td></tr><tr><td align="left"><strong>æœ€å°‘æ‰§è¡Œæ¬¡æ•°</strong></td><td align="left"><strong>0æ¬¡</strong></td><td align="left"><strong>1æ¬¡</strong></td></tr><tr><td align="left"><strong>è¯­æ³•</strong></td><td align="left">ä¸éœ€è¦ç»“å°¾åˆ†å·</td><td align="left"><strong>å¿…é¡»</strong>æœ‰ç»“å°¾åˆ†å·</td></tr><tr><td align="left"><strong>é€‚ç”¨æ€§</strong></td><td align="left">æ¡ä»¶å¯èƒ½åˆå§‹ä¸ºå‡çš„æƒ…å†µ</td><td align="left">è‡³å°‘éœ€æ‰§è¡Œä¸€æ¬¡ï¼Œä¸”ä¾èµ–å¾ªç¯ä½“ç»“æœçš„æƒ…å†µ</td></tr></tbody></table>
<h4 data-id="heading-8"><strong>3.1 ä»ä»£ç åˆ°æ±‡ç¼–ï¼šåº•å±‚è§†è§’</strong></h4>
<p>åœ¨åº•å±‚ï¼ˆæ±‡ç¼–çº§åˆ«ï¼‰ï¼Œç¼–è¯‘å™¨é€šå¸¸ä¼šå°†è¿™ä¸¤ç§å¾ªç¯è½¬æ¢ä¸ºç›¸ä¼¼çš„æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼Œä½†è·³è½¬çš„é€»è¾‘ç‚¹ä¸åŒã€‚</p>
<ul>
<li><strong><code>while</code>å¾ªç¯çš„è¿‘ä¼¼é€»è¾‘</strong>ï¼š
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">start:</span>
  <span class="hljs-keyword">if</span> (condition <span class="hljs-built_in">is</span> <span class="hljs-literal">false</span>) <span class="hljs-keyword">goto</span> <span class="hljs-keyword">end</span>;
  // å¾ªç¯ä½“ä»£ç 
  <span class="hljs-keyword">goto</span> start;
<span class="hljs-symbol">end:</span>
</code></pre>
</li>
<li><strong><code>do...while</code>å¾ªç¯çš„è¿‘ä¼¼é€»è¾‘</strong>ï¼š
<pre><code class="hljs language-csharp" lang="csharp">start:
  <span class="hljs-comment">// å¾ªç¯ä½“ä»£ç </span>
  <span class="hljs-keyword">if</span> (condition <span class="hljs-keyword">is</span> <span class="hljs-literal">true</span>) <span class="hljs-keyword">goto</span> start;
</code></pre>
</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>do...while</code>å¾ªç¯åœ¨ç»“æ„ä¸Šæ›´ç´§å‡‘ï¼Œå®ƒå°‘äº†ä¸€æ¬¡åˆå§‹çš„æ¡ä»¶è·³è½¬ã€‚è¿™åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥å¸¦æ¥å¾®å°çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œå› ä¸ºå‡å°‘äº†ä¸€æ¬¡åˆ†æ”¯é¢„æµ‹ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>ç¬¬å››ç« ï¼šæœ€ä½³å®è·µä¸é™·é˜±è§„é¿</strong></h3>
<h4 data-id="heading-10"><strong>4.1 é€‰æ‹©å¾ªç¯çš„åŸåˆ™</strong></h4>
<ol>
<li><strong>é¦–é€‰<code>while</code></strong>ï¼šåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç‰¹åˆ«æ˜¯å½“å¾ªç¯å¯èƒ½ä¸ºé›¶æ¬¡æ—¶ï¼Œ<code>while</code>æ˜¯æ›´å®‰å…¨ã€æ›´ç›´è§‚çš„é€‰æ‹©ã€‚</li>
<li><strong>éœ€è¦è‡³å°‘ä¸€æ¬¡æ‰§è¡Œæ—¶ï¼Œä½¿ç”¨<code>do...while</code></strong>ï¼šå½“é€»è¾‘ä¸Šè¦æ±‚ä»£ç å—å¿…é¡»å…ˆè¿è¡Œä¸€æ¬¡æ—¶ï¼Œ<code>do...while</code>èƒ½å‡†ç¡®è¡¨è¾¾ä½ çš„æ„å›¾ï¼Œä½¿ä»£ç æ›´æ¸…æ™°ã€‚</li>
<li><strong>é¿å…åœ¨<code>do...while</code>ä¸­å£°æ˜å˜é‡</strong>ï¼šåœ¨<code>do</code>å—ä¸­å£°æ˜çš„å˜é‡åœ¨æ¡ä»¶éƒ¨åˆ†ä¸å¯è§ï¼Œè¿™å¯èƒ½å¯¼è‡´é”™è¯¯ã€‚
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">do</span> {
    <span class="hljs-type">int</span> x = <span class="hljs-number">5</span>;
    <span class="hljs-comment">// ...</span>
} <span class="hljs-keyword">while</span> (x &gt; <span class="hljs-number">0</span>); <span class="hljs-comment">// é”™è¯¯ï¼xçš„ä½œç”¨åŸŸä»…é™äºdoå—å†…</span>
</code></pre>
æ­£ç¡®çš„åšæ³•æ˜¯åœ¨å¾ªç¯å¤–å£°æ˜å˜é‡ã€‚
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span> x;
<span class="hljs-keyword">do</span> {
    x = <span class="hljs-number">5</span>;
    <span class="hljs-comment">// ...</span>
} <span class="hljs-keyword">while</span> (x &gt; <span class="hljs-number">0</span>);
</code></pre>
</li>
</ol>
<h4 data-id="heading-11"><strong>4.2 é€šç”¨å¾ªç¯è®¾è®¡å»ºè®®</strong></h4>
<ul>
<li><strong>ç¡®ä¿å¾ªç¯ç»ˆæ­¢</strong>ï¼šæ€»æ˜¯æ£€æŸ¥å¾ªç¯æ¡ä»¶æ˜¯å¦æœ€ç»ˆä¼šå˜ä¸º<code>false</code>ã€‚</li>
<li><strong>è­¦æƒ•æµ®ç‚¹æ•°æ¡ä»¶</strong>ï¼šç”±äºç²¾åº¦é—®é¢˜ï¼Œä½¿ç”¨<code>float</code>æˆ–<code>double</code>ä½œä¸ºå¾ªç¯æ¡ä»¶å¯èƒ½å¯¼è‡´æ„å¤–ç»“æœã€‚
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">double</span> d = <span class="hljs-number">0.0</span>;
<span class="hljs-keyword">while</span> (d != <span class="hljs-number">1.0</span>) { <span class="hljs-comment">// å±é™©çš„æ¯”è¾ƒï¼</span>
    d += <span class="hljs-number">0.1</span>;
    <span class="hljs-comment">// ç”±äºæµ®ç‚¹è¯¯å·®ï¼Œdå¯èƒ½æ°¸è¿œä¸ä¼šç²¾ç¡®ç­‰äº1.0</span>
}
</code></pre>
åº”ä½¿ç”¨èŒƒå›´æ¯”è¾ƒï¼š
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">while</span> (d &lt; <span class="hljs-number">1.0</span>) {
    d += <span class="hljs-number">0.1</span>;
}
</code></pre>
</li>
<li><strong>ä½¿ç”¨<code>{}</code>æ˜ç¡®ä½œç”¨åŸŸ</strong>ï¼šå³ä½¿å¾ªç¯ä½“åªæœ‰ä¸€æ¡è¯­å¥ï¼Œä¹Ÿä½¿ç”¨èŠ±æ‹¬å·ï¼Œè¿™èƒ½å¢å¼ºå¯è¯»æ€§å¹¶é¿å…æ‚¬å‚elseç­‰é—®é¢˜ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-12"><strong>ç¬¬äº”ç« ï¼šæ€§èƒ½è€ƒé‡ï¼ˆç°ä»£ç¼–è¯‘å™¨ä¼˜åŒ–ï¼‰</strong></h3>
<p>åœ¨ç°ä»£C++ç¼–è¯‘å™¨ä¸­ï¼Œå¯¹äºç®€å•çš„å¾ªç¯ï¼Œ<code>while</code>å’Œ<code>do...while</code>çš„æ€§èƒ½å·®å¼‚é€šå¸¸å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚ç¼–è¯‘å™¨å¼ºå¤§çš„ä¼˜åŒ–å™¨ï¼ˆå¦‚å°¾è°ƒç”¨ä¼˜åŒ–ã€å¾ªç¯å±•å¼€ã€ä»£ç ç§»åŠ¨ç­‰ï¼‰ä¼šç”Ÿæˆé«˜åº¦ä¼˜åŒ–çš„æœºå™¨ç ã€‚</p>
<p>æ€§èƒ½ä¼˜åŒ–çš„å…³é”®é€šå¸¸ä¸åœ¨äºé€‰æ‹©å“ªç§å¾ªç¯ï¼Œè€Œåœ¨äºï¼š</p>
<ul>
<li><strong>å‡å°‘å¾ªç¯å†…éƒ¨çš„å†—ä½™è®¡ç®—</strong>ã€‚</li>
<li><strong>ä¼˜åŒ–å¾ªç¯ä½“å†…çš„ç®—æ³•å’Œæ•°æ®ç»“æ„è®¿é—®æ¨¡å¼</strong>ï¼ˆå¦‚ç¼“å­˜å‹å¥½æ€§ï¼‰ã€‚</li>
<li><strong>åœ¨é€‚å½“çš„æ—¶å€™ä½¿ç”¨<code>++i</code>è€Œé<code>i++</code></strong>ï¼ˆå¯¹äºè‡ªå®šä¹‰ç±»å‹ï¼‰ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œåœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œ<strong>ä»£ç çš„æ­£ç¡®æ€§å’Œå¯è¯»æ€§åº”ä¼˜å…ˆäºå¯¹å¾ªç¯ç±»å‹è¿›è¡Œçš„å¾®è§‚ä¼˜åŒ–</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-13"><strong>ç»“è®º</strong></h3>
<p><code>while</code>å’Œ<code>do...while</code>æ˜¯C++ä¸­ç›¸è¾…ç›¸æˆçš„ä¸¤ç§å¾ªç¯å·¥å…·ã€‚</p>
<ul>
<li><strong><code>while</code></strong> æ˜¯ä½ è°¨æ…çš„ä¼™ä¼´ï¼Œå®ƒåšæŒâ€œå…ˆæ£€æŸ¥ï¼Œåè¡ŒåŠ¨â€çš„åŸåˆ™ï¼Œé€‚ç”¨äºé‚£äº›éœ€è¦å‰ç½®éªŒè¯çš„åœºæ™¯ã€‚</li>
<li><strong><code>do...while</code></strong> æ˜¯ä½ æœæ–­çš„ä¼™ä¼´ï¼Œå®ƒå¥‰è¡Œâ€œå…ˆè¡ŒåŠ¨ï¼Œååæ€â€çš„ç­–ç•¥ï¼Œåœ¨ä¿è¯è‡³å°‘ä¸€æ¬¡æ‰§è¡Œçš„æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨å¯Œé˜³é“¶æ¹–æˆç«‹åœ°åŸŸåŒ–çš„è½¯ä»¶ç ”å‘å›¢é˜Ÿ]]></title>    <link>https://juejin.cn/post/7572749797469536265</link>    <guid>https://juejin.cn/post/7572749797469536265</guid>    <pubDate>2025-11-16T14:46:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572749797469536265" data-draft-id="7572880767584403507" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨å¯Œé˜³é“¶æ¹–æˆç«‹åœ°åŸŸåŒ–çš„è½¯ä»¶ç ”å‘å›¢é˜Ÿ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,åˆ›ä¸š,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-16T14:46:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¬§é›·æ®¿"/> <meta itemprop="url" content="https://juejin.cn/user/2670050655615806"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨å¯Œé˜³é“¶æ¹–æˆç«‹åœ°åŸŸåŒ–çš„è½¯ä»¶ç ”å‘å›¢é˜Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2670050655615806/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¬§é›·æ®¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T14:46:25.000Z" title="Sun Nov 16 2025 14:46:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éšç€ 11 æœˆçš„åˆ°æ¥ï¼Œé“¶æ¹–åˆ›è”ä¹Ÿå·²æ­¥å…¥å®ƒç”Ÿå‘½è¿›ç¨‹ä¸­çš„ç¬¬äºŒé˜¶æ®µã€‚</p>
<p>ä¸æ··æ²Œåˆå¼€ï¼Œä¸€åˆ‡ä»¥ã€Œå…ˆè·‘èµ·æ¥å†è¯´ã€ä¸ºä¸»æ—‹å¾‹çš„ç¬¬ä¸€é˜¶æ®µç›¸æ¯”ï¼Œå½“å‰é˜¶æ®µçš„ä¸»æ—‹å¾‹ï¼Œæˆ–è€…è¯´æ ¸å¿ƒç›®æ ‡æ˜¯â€”â€”é€šè¿‡ç®€å•çš„è§„åˆ™å’Œæ²»ç†å•å…ƒï¼Œå½¢æˆè‡ªç»„ç»‡ã€è‡ªç”Ÿé•¿çš„ç³»ç»Ÿã€‚</p>
<p>ä½œä¸ºç¤¾åŒºçš„å‘èµ·äººå…¼ä¸»ç†äººï¼Œæˆ‘è¿™å‡ å¤©åœ¨å¾ˆé€‚åˆç§»åŠ¨åŠå…¬çš„ç‘å’–å•¡é‡Œå¯¹ä¹‹å‰ä¸€äº›è¾ƒä¸ºé›¶æ˜Ÿæ•£ä¹±çš„æƒ³æ³•è¿›è¡Œæ¢³ç†ï¼Œæœ‰äº†ä¸€ä¸ªåˆæ­¥çš„æ¸…å•ã€‚</p>
<p>æ‰“ç®—è¿›ä¸€æ­¥è®¨è®ºå®Œå–„åï¼Œå¬å¼€ä¸€æ¬¡å®£è®²ä¼šï¼Œä¸å¿ƒç³»ç¤¾åŒºçš„äººä¹‹é—´æ¥ä¸€åœºå³æ—¶çš„ç­”ç–‘ä¸åé¦ˆï¼Œä»–ä»¬åŒæ—¶ä¹Ÿæ˜¯æ–°é˜¶æ®µçš„ç¬¬ä¸€æ‰¹æ½œåœ¨åˆä½œè€…ã€‚</p>
<p>ç„¶è€Œåœ¨é‚£ä¹‹å‰ï¼Œæ¸…å•ä¸­çš„ä¸€é¡¹å®Œå…¨å¯ä»¥ç«‹é©¬å°±è¡ŒåŠ¨èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯æœ¬æ–‡çš„ä¸»é¢˜ã€‚</p>
<h2 data-id="heading-0">è½¯ä»¶å¼€å‘å°ç»„æˆç«‹</h2>
<p>åœ¨ã€Œå°é›‡Â·å…¨å›½è‡ªç”±èŒä¸šè€…å¤§ä¼šÂ·æ­å·ç«™ã€ä¸Šè¿›è¡Œçš„ä¸»é¢˜åˆ†äº«ã€Š<a href="https://juejin.cn/post/7563301071173107750" target="_blank" title="https://juejin.cn/post/7563301071173107750">å…¸å‹ç¨‹åºå‘˜è·¨ç•Œåšåœ¨åœ°ç¤¾åŒºæ˜¯æ€æ ·ä¸€ç§ä½“éªŒï¼Ÿ</a>ã€‹ä¸­ï¼Œä¸´ç»“æŸæ—¶æœ‰è¿™æ ·ä¸€æ®µï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60272e8d14654bc5b17290891458e905~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qyn6Zu35q6_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763909185&amp;x-signature=EuU5KPljqMCsdEiYXYayGo8aaUA%3D" alt="ppt.png" loading="lazy"/></p>
<p>ä¸‰ä¸ªä¸»è¦ä»·å€¼ç‚¹ä¸­çš„ç¬¬ä¸€ä¸ªï¼Œå®ƒæ˜¯ï¼š</p>
<ul>
<li>æœ€è¡¨å±‚çš„â€”â€”å¤§å®¶æœ‰ç›´è§‚æ„Ÿå—çš„ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°å’Œç†è§£çš„ï¼›</li>
<li>æœ€åŸºç¡€çš„â€”â€”æ˜¯å®ç°å¹¶å‘æŒ¥å¦å¤–ä¸¤ä¸ªä»·å€¼ç‚¹çš„åŸºçŸ³ï¼Œå®ƒä»¬æ¯”è¾ƒæœ‰å‰ç»æ€§ã€åˆ›æ–°æ€§ï¼Œè§£é‡Šæˆæœ¬æ›´é«˜ï¼Œä½†è½åœ°åçš„ä»·å€¼ä¸å¯ä¼°é‡ã€‚</li>
</ul>
<p>ç”¨æ›´é€šä¿—ç‚¹çš„è¯´æ³•ï¼Œç¬¬ä¸€ä¸ªä»·å€¼ç‚¹æ˜¯ä»¥åœ¨åœ°è‡ªç”±èŒä¸šè€…ä¸ºå¼•ï¼Œé€šè¿‡ç›¸äº’è¿æ¥é‡å»ºä»¥ä¿¡ä»»ä¸ºåŸºç¡€çš„æ–°å‹ç†Ÿäººç¤¾ä¼šï¼Œå¹¶å±•ç°äº†é€šè¿‡è‡ªç”±èŒä¸šå®ç°è‡ªæˆ‘ä»·å€¼çš„å¯è¡Œæ€§ã€‚</p>
<p>å†ä¾æ‰˜äºä¿¡ä»»å…³ç³»ã€ä¸ªäººä¸“ä¸šæ€§å»æ¢ç´¢åŒºåŸŸå†…å¯è‡ªå¾ªç¯çš„æ¶ˆè´¹æœåŠ¡ä½“ç³»ã€å•†ä¸šæ¨¡å¼ï¼Œå¹¶å€ŸåŠ©æ›´åŠ ä¸€ä½“åŒ–ã€æ•°æ™ºåŒ–çš„æ‰‹æ®µæå‡åŒºåŸŸå†…ä¿¡æ¯ä¸èµ„æºæµé€šçš„æ•ˆç‡å’Œä½“éªŒã€‚</p>
<p>å¦å¤–ä¸¤ä¸ªä»·å€¼ç‚¹ï¼Œè¦ä¹ˆå®Œå…¨ä¾èµ–äºè½¯ä»¶å¼€å‘ï¼Œè¦ä¹ˆè·Ÿè½¯ä»¶å¼€å‘ä¹Ÿå¾ˆæœ‰å…³ç³»ã€‚</p>
<p>åœ¨è¿‡å¾€çš„ç¤¾åŒºæ´»åŠ¨ä¸­ï¼Œå¤šæ¬¡å‚åŠ æ´»åŠ¨è¿›è¡Œäº¤æµä¸”ä»¥è½¯ä»¶å¼€å‘ä½œä¸ºèŒä¸šçš„äººï¼Œç®—æˆ‘åœ¨å†…ç›®å‰æœ‰ä¸‰äººï¼š</p>
<ul>
<li>æˆ‘ï¼Œæ•°æ™ºç”Ÿæ´»é¢†åŸŸç‹¬ç«‹å¼€å‘è€…ï¼Œå‰ç«¯å¼€å‘å‡ºèº«ï¼Œæ“…é•¿æŠ½è±¡ï¼Œä¸€ç›´æƒ³è¦è§£å†³æ•°æ®æ‰€æœ‰æƒä¸æ§åˆ¶æƒã€ä¸€ä½“åŒ–å’Œæ•°æ™ºåŒ–é—®é¢˜ï¼›</li>
<li>ä¸€ä¸ª XRã€3D å¼€å‘è€…ï¼Œæ“…é•¿è™šæ‹Ÿä¸–ç•Œä¸ç°å®ä¸–ç•Œé€šè¿‡æŸç§å½¢å¼åœ¨å›¾å½¢ä¸Šè¿›è¡Œèåˆï¼›</li>
<li>ä¸€ä¸ªä»è‰¯æ¸šæ¬è¿‡æ¥çš„ AI è¿ç»­åˆ›ä¸šè€…ï¼Œæƒ³åšæ•°æ™ºåŒ–ã€æ¸¸æˆåŒ–çš„äººç”Ÿç³»ç»Ÿã€‚</li>
</ul>
<p>ç”±æ­¤å¯è§ï¼Œæˆ‘ä»¬ä»¨çš„å…±åŒç‚¹ï¼š</p>
<ul>
<li>ä¾§é‡æœ‰æ‰€ä¸åŒï¼Œä½†éƒ½æ˜¯è½¯ä»¶å¼€å‘è€…ï¼›</li>
<li>æ“…é•¿ä¸åŒæ–¹é¢ï¼Œä½†æƒ³è§£å†³çš„é—®é¢˜éƒ½å¯å½’ä¸ºã€Œå…ƒå®‡å®™ã€ï¼›</li>
<li>éƒ½ç”Ÿæ´»åœ¨é“¶æ¹–ã€‚</li>
</ul>
<p>æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£æˆ‘ä»¬ä¸ºå•¥ä¸å‡èšåœ¨ä¸€èµ·ï¼Œæˆç«‹ã€Œé“¶æ¹–è½¯ä»¶å¼€å‘å°ç»„ã€å‘¢ï¼Ÿï¼</p>
<p>è¿™æ ·ä¸€æ¥ï¼š</p>
<ul>
<li>å¯¹å¤–â€”â€”ä»¥å°ç»„ä½œä¸ºç»Ÿä¸€çš„ä¿¡æ¯å‡ºå…¥å£ï¼Œè¿›è¡Œç¤¾åŒºç¬¬ä¸‰é˜¶æ®µè¦è½åœ°çš„çº¿ä¸Šç³»ç»Ÿçš„ç ”å‘ï¼Œæ‰¿æ¥æ¥è‡ªé“¶æ¹–åœ¨åœ°ä¼ä¸šã€å•†å®¶ã€å·¥ä½œå®¤/è¶…çº§ä¸ªä½“çš„è½¯ä»¶ç ”å‘éœ€æ±‚ï¼›</li>
<li>å¯¹å†…â€”â€”è½¯ä»¶ç ”å‘éœ€æ±‚ä¿¡æ¯å…±äº«ï¼Œé€‚è€…å¼¹æ€§ç»„é˜Ÿæ‰¿åŒ…é¡¹ç›®ï¼ŒæŒ‰é¡¹ç›®è‡ªè¡Œåˆ†é…æ”¶ç›Šï¼Œä¹Ÿå¯ä»¥è‡ªè¡Œç»„é˜Ÿç ”å‘å…¶ä»–è½¯ä»¶äº§å“ã€‚</li>
</ul>
<p>ç®€è€Œè¨€ä¹‹ï¼Œä¸€æ–¹é¢æˆ‘ä»¬ç»„æˆäº†é¢å‘é“¶æ¹–åœ¨åœ°æ½œåœ¨å®¢æˆ·çš„è½¯ä»¶ç ”å‘ä¸“ä¸šå›¢é˜Ÿï¼Œå¦ä¸€æ–¹é¢èƒ½å¤Ÿç›¸äº’åä½œè®©æƒ³è¦å¼€å‘çš„è½¯ä»¶äº§å“æ›´å¿«åœ°è½åœ°å¹¶è¿›è¡Œå¸‚åœºéªŒè¯ã€‚</p>
<p>ä»Šå¤©ä¸‹åˆï¼Œæˆ‘ä»¬ç›¸èšåœ¨å…¶ä¸­ä¸€äººå®¶é‡Œï¼Œå°†è‡ªå·±çš„æƒ³æ³•å‘ä»–ä»¬æè¿°ï¼Œä¸€ç•ªè®¨è®ºåè¾¾æˆ 2 ä¸ªå…±è¯†ï¼š</p>
<ol>
<li>å¯ä»¥æˆç«‹ã€Œé“¶æ¹–è½¯ä»¶å¼€å‘å°ç»„ã€ï¼›</li>
<li>åœ¨è¿›è¡Œã€Œå…ƒå®‡å®™ã€è½åœ°å®éªŒè¿™ä»¶äº‹ä¸Šåˆ†å¤´è¡ŒåŠ¨ï¼Œå³æˆ‘å…ˆå»åšç¤¾åŒºåœºæ™¯çš„çº¿ä¸Šç³»ç»Ÿï¼Œä»–ä»¬å…ˆåšä¸ªäººä¸å®¶åº­åœºæ™¯çš„è®¾å¤‡ä¸åº”ç”¨ï¼Œç„¶åå†å°†å…³é”®æ•°æ®æ‰“é€šè€Œåœºæ™¯èåˆã€‚</li>
</ol>
<p>æ²¡å‡†å„¿äº‹åå›é¦–ï¼Œè¿™å°±æ˜¯å¦ä¸€ä¸ªæ¹–ç•”èŠ±å›­ï¼</p>
<h2 data-id="heading-1">ç»“è¯­</h2>
<p>å¼€ç¯‡æåˆ°çš„ã€Œå®Œå…¨å¯ä»¥ç«‹é©¬å°±è¡ŒåŠ¨èµ·æ¥ã€çš„ã€Œæ¸…å•ä¸­çš„ä¸€é¡¹ã€æ˜¯ã€Œåœ¨åœ°çš„ä»¥ç‰¹å®šå…´è¶£çˆ±å¥½/ä¸“ä¸šèƒ½åŠ›/ä¸šåŠ¡é¢†åŸŸä¸ºæ ¸å¿ƒçš„å‚ç›´å°å›¢ä½“ã€ã€‚</p>
<p>è€Œã€Œé“¶æ¹–è½¯ä»¶å¼€å‘å°ç»„ã€å°±æ˜¯å…·ä½“ä¾‹å­ï¼Œä¹Ÿæ˜¯é“¶æ¹–åˆ›è”çš„ç¬¬ä¸€ä¸ªä¸“é¡¹å°ç»„ï¼ˆå°å›¢ä½“ï¼‰ï¼Œä½†è¿™è‚¯å®šä¸æ˜¯æœ€åä¸€ä¸ªï¼Œè¿˜ä¼šæœ‰æ›´å¤šçš„å‚ç›´å°å›¢ä½“ç›¸ç»§æˆç«‹ï¼</p>
<p>é™¤äº†ä»é“¶æ¹–åˆ›è”ä¸­ç”Ÿé•¿å‡ºæ¥çš„å‚ç›´å°å›¢ä½“å¤–ï¼Œä¹Ÿæ¬¢è¿é‚£äº›æœ¬æ¥å°±å­˜åœ¨ä¸”ä¸é“¶æ¹–æœ‰åƒä¸ä¸‡ç¼•è”ç³»çš„å…¶ä»–å…´è¶£ç»„ï¼ˆå¦‚ã€Œå¯ŒYoungÂ·å›¢è¶£ç¤¾ã€ï¼‰ä¹‹ç±»åŠ å…¥åˆ°é“¶æ¹–åˆ›è”è¿™ä¸ªå¤§ç½‘ç»œä¸­ï¼</p>
<hr/>
<p>æœ¬æ–‡å…¶ä»–é˜…è¯»åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fs.ourai.ws%2Fdailies%2Fmhkn4g3k%2F" target="_blank" title="https://s.ourai.ws/dailies/mhkn4g3k/" ref="nofollow noopener noreferrer">ä¸ªäººç½‘ç«™</a>ï½œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F5iQYN5bVyxo8Qsnc6oZGpQ" target="_blank" title="https://mp.weixin.qq.com/s/5iQYN5bVyxo8Qsnc6oZGpQ" ref="nofollow noopener noreferrer">å¾®ä¿¡å…¬ä¼—å·</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»£ç é‡æ„ä¸æµ‹è¯•è¦†ç›–ç‡æå‡å®è·µ | 2025 å¹´ç¬¬ 46 å‘¨è‰æ¢…å‘¨æŠ¥]]></title>    <link>https://juejin.cn/post/7572480736362283014</link>    <guid>https://juejin.cn/post/7572480736362283014</guid>    <pubDate>2025-11-16T13:04:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572480736362283014" data-draft-id="7573193563044708406" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»£ç é‡æ„ä¸æµ‹è¯•è¦†ç›–ç‡æå‡å®è·µ | 2025 å¹´ç¬¬ 46 å‘¨è‰æ¢…å‘¨æŠ¥"/> <meta itemprop="keywords" content="GitHub,å¼€æº,å•å…ƒæµ‹è¯•"/> <meta itemprop="datePublished" content="2025-11-16T13:04:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰æ¢…å‹ä»"/> <meta itemprop="url" content="https://juejin.cn/user/3043088413495815"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»£ç é‡æ„ä¸æµ‹è¯•è¦†ç›–ç‡æå‡å®è·µ | 2025 å¹´ç¬¬ 46 å‘¨è‰æ¢…å‘¨æŠ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3043088413495815/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰æ¢…å‹ä»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:04:12.000Z" title="Sun Nov 16 2025 13:04:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd" target="_blank" title="https://blog.cmyr.ltd" ref="nofollow noopener noreferrer">è‰æ¢…å‹ä»çš„åšå®¢</a> å‘å¸ƒå’Œæ›´æ–°ï¼Œå¹¶åœ¨å¤šä¸ªå¹³å°åŒæ­¥å‘å¸ƒã€‚å¦‚æœ‰æ›´æ–°ï¼Œä»¥åšå®¢ä¸Šçš„ç‰ˆæœ¬ä¸ºå‡†ã€‚æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡æ–‡æœ«çš„ <code>åŸæ–‡é“¾æ¥</code> æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>æ¬¢è¿æ¥åˆ°è‰æ¢…å‘¨æŠ¥ï¼è¿™æ˜¯ä¸€ä¸ªç”±è‰æ¢…å‹ä»åŸºäº AI æ•´ç†çš„å‘¨æŠ¥ï¼Œæ—¨åœ¨ä¸ºæ‚¨æä¾›æœ€æ–°çš„åšå®¢æ›´æ–°ã€GitHub åŠ¨æ€ã€ä¸ªäººåŠ¨æ€å’Œå…¶ä»–å‘¨åˆŠæ–‡ç« æ¨èç­‰å†…å®¹ã€‚</p>
<hr/>
<p>æœ¬å‘¨ç»™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoMeiYouRen%2Fcaomei-auth" target="_blank" title="https://github.com/CaoMeiYouRen/caomei-auth" ref="nofollow noopener noreferrer">è‰æ¢… Auth</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoMeiYouRen%2Fcmyr-template-cli" target="_blank" title="https://github.com/CaoMeiYouRen/cmyr-template-cli" ref="nofollow noopener noreferrer">cmyr-template-cli</a> æ·»åŠ äº†æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šï¼Œå¯ä»¥æ›´åŠ æ¸…æ™°çš„è¡¡é‡é¡¹ç›®ä¸­æµ‹è¯•è¦†ç›–çš„æƒ…å†µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6429b2026c2b4394b1bff1be70ec83f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903052&amp;x-signature=kRaJXeTShwz%2B2N9SSoMBEnvrpx8%3D" alt="image-20251116191346533" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c033db655a344636a9487c2095766272~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903052&amp;x-signature=7TKy30RdSNdUjb1l7qpbR6PgL2k%3D" alt="image-20251116191354994" loading="lazy"/></p>
<p>è™½ç„¶è¯´æµ‹è¯•è¦†ç›–ç‡é«˜å…¶å®å¹¶ä¸èƒ½è¯´æ˜é¡¹ç›®çš„æµ‹è¯•ç”¨ä¾‹å°±å†™çš„å®Œå¤‡äº†ï¼Œä½†ä¹Ÿèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¾ç¤ºé¡¹ç›®çš„ä»£ç è´¨é‡æ˜¯å¦åˆæ ¼ã€‚</p>
<p>ä»¥è¿™æ¬¡é‡æ„çš„ cmyr-template-cli ä¸ºä¾‹ã€‚</p>
<p>åœ¨æ·»åŠ æµ‹è¯•ç”¨ä¾‹çš„åŒæ—¶ï¼Œä¹Ÿå¯¹é¡¹ç›®è¿›è¡Œäº†ä¸€æ¬¡é‡æ„ã€‚</p>
<p>ä¸»è¦æ˜¯è¿›è¡Œäº†ä»£ç çš„æ‹†åˆ†ï¼Œä»¥é¿å…å•æ–‡ä»¶è¿‡å¤§ã€‚</p>
<p>è€Œåœ¨è¿™ä¹‹å‰ï¼Œæ ¸å¿ƒé€»è¾‘éƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå¯è¶…è¿‡ 2000 è¡Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b491a735112646bcb34251571c7c0361~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903052&amp;x-signature=QJM1Cy73UoGn0bG53J21Ku9TRLE%3D" alt="image-20251116191607102" loading="lazy"/></p>
<p>è€Œç°åœ¨ç»è¿‡æ‹†åˆ†åï¼Œå•ä¸ªæ–‡ä»¶è¡Œæ•°éƒ½åœ¨ 500 è¡Œä»¥ä¸‹ï¼Œåˆæ­¥è¾¾åˆ°è¦æ±‚ã€‚</p>
<p>æœ€åï¼Œå¯¹æ‹†åˆ†å‡ºæ¥çš„å‡½æ•°ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯•ç”¨ä¾‹å°±ç›´æ¥æ”¾åœ¨åŸæ–‡ä»¶è¾¹ä¸Šï¼Œè¿™æ ·ä¹Ÿæ–¹ä¾¿æŸ¥çœ‹æµ‹è¯•ç”¨ä¾‹å’Œè¢«æµ‹å‡½æ•°çš„å…·ä½“å†…å®¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ace1ff397804c44b6ce8b1bc6be7957~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903052&amp;x-signature=V1BgW9MSThno1UVIQyiCT9F26nI%3D" alt="image-20251116191843551" loading="lazy"/></p>
<p>åœ¨æœ¬åœ°æ‰§è¡Œ <code>npm run test</code> ä¹‹åå°±å¯æŸ¥çœ‹æµ‹è¯•æƒ…å†µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57c83ced948343889e2c73192056a007~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903052&amp;x-signature=ELsjNRgJRJqwLWftjXnWYZKFnHM%3D" alt="image-20251116191910289" loading="lazy"/></p>
<p>åœ¨æœ¬åœ°æ‰§è¡Œ <code>npm run coverage</code> ä¹‹åå°±æ˜¯ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼Œå¯ä»¥æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡ã€‚</p>
<p>cmyr-template-cli æ˜¯ 61%ï¼Œç®—æ˜¯å‹‰å¼ºè¾¾åˆ°äº†åŠæ ¼çº¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac9e08b12d4a48828d69d4aebf5e8364~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903052&amp;x-signature=vgBk46zuew3G%2FdVXnaSy94Tb3%2Bk%3D" alt="image-20251116192332337" loading="lazy"/></p>
<p>ä¹‹åï¼Œå°±æ˜¯å°†æŠ¥å‘Šä¸Šä¼ åˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Fcodecov.io%2F" target="_blank" title="https://codecov.io/" ref="nofollow noopener noreferrer">Codecov</a> ï¼Œå°±å¯ä»¥åœ¨é¡µé¢ä¸Šçœ‹åˆ°è¦†ç›–ç‡æƒ…å†µäº†ã€‚</p>
<p>å½“ç„¶ï¼Œè¿˜å¯ä»¥åœ¨ GitHub Action ä¸­æ·»åŠ  <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcodecov%2Fcodecov-action" target="_blank" title="https://github.com/codecov/codecov-action" ref="nofollow noopener noreferrer">codecov-action</a>ï¼Œä»¥å®ç°è‡ªåŠ¨ä¸ŠæŠ¥ã€‚</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Upload</span> <span class="hljs-string">coverage</span> <span class="hljs-string">reports</span> <span class="hljs-string">to</span> <span class="hljs-string">Codecov</span>
  <span class="hljs-attr">uses:</span> <span class="hljs-string">codecov/codecov-action@v5</span>
  <span class="hljs-attr">with:</span>
      <span class="hljs-attr">token:</span> <span class="hljs-string">${\{</span> <span class="hljs-string">secrets.CODECOV_TOKEN</span> <span class="hljs-string">}}</span>
</code></pre>
<hr/>
<p>åœ¨è¿™æ¬¡é‡æ„ cmyr-template-cli çš„è¿‡ç¨‹ä¸­ï¼Œè‡ªç„¶ä¹Ÿæ˜¯ä½¿ç”¨äº† AIã€‚</p>
<p>è€Œæç¤ºè¯æ–¹é¢åˆ™å‚è€ƒäº†<a href="https://juejin.cn/post/7570630923710054452" target="_blank" title="https://juejin.cn/post/7570630923710054452">ã€Šæˆ‘ç”¨ AI é‡æ„äº†ä¸€æ®µ 500 è¡Œçš„å±å±±ä»£ç ï¼Œè¿™æ˜¯æˆ‘çš„ Prompt å’Œæ€è€ƒè¿‡ç¨‹ã€‹</a> ã€‚</p>
<p>åº”è¯¥è¯´æ•ˆæœä¸é”™ã€‚</p>
<blockquote>
<p>æç¤ºè¯æ”¹åŠ¨åå¦‚ä¸‹ï¼š</p>
<p>ä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„ TypeScript æ¶æ„å¸ˆã€‚è¯·åˆ†æä¸‹é¢è¿™æ®µä»£ç ã€‚</p>
<p>å‘Šè¯‰æˆ‘å®ƒåšäº†å‡ ä»¶ä¸»è¦çš„äº‹æƒ…ï¼Ÿï¼ˆèŒè´£åˆ†æï¼‰
æ‰¾å‡ºæ‰€æœ‰çš„å‰¯ä½œç”¨ã€‚
æ‰¾å‡ºæ‰€æœ‰çš„çº¯é€»è¾‘ã€‚
è¯„ä»·å®ƒçš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚</p>
<p>éå¸¸å¥½ã€‚ç°åœ¨ï¼Œè¯·ä½ åªé’ˆå¯¹çº¯é€»è¾‘éƒ¨åˆ†è¿›è¡Œé‡æ„ã€‚</p>
<p>æŠŠè¿™äº›é€»è¾‘ï¼Œä»åŸå‡½æ•°ä¸­æå–å‡ºæ¥ï¼Œå˜æˆç‹¬ç«‹çš„ã€å¯å¯¼å‡ºçš„çº¯å‡½æ•°ã€‚
è¿™äº›å‡½æ•°å¿…é¡»æ˜¯çº¯çš„ï¼šä¸èƒ½æœ‰ä»»ä½•å‰¯ä½œç”¨ã€‚
ä½¿ç”¨ TypeScriptï¼Œä¸ºè¿™äº›æ–°å‡½æ•°çš„å…¥å‚å’Œè¿”å›å€¼ï¼Œæä¾›æ¸…æ™°çš„ç±»å‹å®šä¹‰ã€‚</p>
<p>ä½ ç°åœ¨æ˜¯ä¸€ä¸ª QA å·¥ç¨‹å¸ˆã€‚è¯·ä½¿ç”¨ Vitestï¼Œä¸ºä½ åˆšæ‰æå–çš„å‡½æ•°ï¼Œç¼–å†™å…¨é¢çš„å•å…ƒæµ‹è¯•ç”¨ä¾‹ã€‚ å¿…é¡»è¦†ç›–æ‰€æœ‰è¾¹ç•Œæƒ…å†µï¼ŒåŒ…æ‹¬æ­£å¸¸ã€å¼‚å¸¸ã€å’Œè¾¹ç¼˜å€¼ã€‚</p>
<p>å¹²å¾—æ¼‚äº®ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥é‡æ„é‚£ä¸ªåŸå§‹çš„å‡½æ•°/æ–‡ä»¶ã€‚</p>
<p>å®ƒç°åœ¨å”¯ä¸€çš„èŒè´£æ˜¯åè°ƒã€‚
è°ƒç”¨æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„çº¯å‡½æ•°ã€‚
æŠŠæ‰€æœ‰çš„å‰¯ä½œç”¨æ¸…æ™°åœ°ç¼–æ’èµ·æ¥ã€‚
ä½¿ç”¨ async/awaitï¼Œè®©å¼‚æ­¥æµç¨‹æ›´æ¸…æ™°ï¼Œç”¨ try/catch å¤„ç†é”™è¯¯ã€‚</p>
</blockquote>
<p>é‡æ„çš„ç›®çš„è¿˜æ˜¯ä¸ºäº†æ›´å¥½çš„ç»„ç»‡ä»£ç ï¼Œè€Œçº¯å‡½æ•°ç›¸æ¯”å¸¦å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œä¼šæ›´å¥½ç¼–å†™æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨é‡æ„çš„æ—¶å€™è¦ä¼˜å…ˆè€ƒè™‘æå–å‡ºçº¯å‡½æ•°é€»è¾‘ï¼Œå†ç¼–å†™å‰¯ä½œç”¨å‡½æ•°ï¼Œè¿™æ ·ä¸€æ¥æ— è®ºæ˜¯ä»£ç ç»“æ„ä¸Šï¼Œè¿˜æ˜¯æµ‹è¯•ä¸Šéƒ½ä¼šæ›´åŠ å‹å¥½ã€‚</p>
<p>åç»­ï¼Œå¯¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoMeiYouRen%2Fcaomei-auth" target="_blank" title="https://github.com/CaoMeiYouRen/caomei-auth" ref="nofollow noopener noreferrer">è‰æ¢… Auth</a> ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoMeiYouRen%2Frss-impact-server" target="_blank" title="https://github.com/CaoMeiYouRen/rss-impact-server" ref="nofollow noopener noreferrer">RSS Impact</a> ç­‰é¡¹ç›®ä¹Ÿä¼šåšç±»ä¼¼é‡æ„ï¼Œä»¥å‡å°‘â€œå±å±±â€ä»£ç ã€‚</p>
<blockquote>
<p>å¯¹ cmyr-template-cli çš„é‡æ„ä¸èƒ½è¯´å®Œå…¨æ»¡æ„ï¼Œä½†è€ƒè™‘åˆ°è¿™é¡¹ç›®ä¹‹å‰å°±æ˜¯ä¸ªâ€œå±å±±â€ä»£ç ï¼Œæ‰€ä»¥ä»ç»“æœæ¥è¯´ä¹Ÿè¿˜ç®—ä¸é”™ã€‚</p>
</blockquote>
<hr/>
<p>è¿‘æœŸç ”ç©¶äº†ä¸‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Ftauri.app%2Fzh-cn%2F" target="_blank" title="https://tauri.app/zh-cn/" ref="nofollow noopener noreferrer">Tauri</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäº JavaScript å’Œ Rust çš„è·¨å¹³å°å¼€å‘æ¡†æ¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b72ff1b157643ae823ed557b8ccfb6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903052&amp;x-signature=ZNqvphAPMfVgVk0YIJBTRfFCqhQ%3D" alt="image-20251116193336658" loading="lazy"/></p>
<p>ä¸ä»…æ”¯æŒ Linuxã€macOSã€Windows ç­‰æ¡Œé¢ç«¯ï¼Œä¹Ÿæ”¯æŒ Android å’Œ iOS ç­‰æ‰‹æœºç«¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe349b707fcd4f9694f043c68ce4710f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903052&amp;x-signature=2R9Yn3gvoTuV%2F7glPce%2B6n0jBs0%3D" alt="image-20251116193453883" loading="lazy"/></p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè€ƒè™‘åˆ° Tauri è¿˜æ”¯æŒä½¿ç”¨ Next.js å’Œ Nuxt ç­‰å…¨æ ˆæ¡†æ¶ä½œä¸ºå‰ç«¯ï¼Œå› æ­¤ç”¨åŒä¸€å¥—ä»£ç å¼€å‘å‡º Web ç«¯ä¹Ÿä¸æ˜¯éš¾äº‹ã€‚</p>
<p>ç›®å‰ç¬”è€…å·²ç»åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoMeiYouRen%2Ftauri-template" target="_blank" title="https://github.com/CaoMeiYouRen/tauri-template" ref="nofollow noopener noreferrer">tauri-template</a> ä¸­è·‘é€šäº† Linuxã€macOSã€Windowsã€Android ç­‰ç¯å¢ƒçš„ä¸‹çš„æ„å»ºï¼Œå¦‚æœæœ‰å¸Œæœ›äº†è§£é¡¹ç›®ç»“æ„çš„ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ã€‚</p>
<p>å½“ç„¶äº†ï¼Œè·¨å¹³å°ä¹Ÿä¸æ˜¯æ²¡æœ‰ä»£ä»·çš„ï¼Œä»æŠ€æœ¯é€‰å‹ä¸­çœ‹å‡ºï¼ŒTauri å¹¶æ²¡æœ‰èµ°åŸç”Ÿå¼€å‘é‚£ä¸€å¥—ï¼Œè€Œæ˜¯é€‰æ‹©äº†å†…åµŒ webview ï¼Œé€šè¿‡å‰ç«¯æŠ€æœ¯æ¥æ„å»º UIã€‚</p>
<blockquote>
<p>è¿™ä¸€ç‚¹è·Ÿ uni-app å­˜åœ¨ç±»ä¼¼çš„é—®é¢˜</p>
</blockquote>
<p>è™½ç„¶è¯´èŠ‚çº¦äº†åŸç”Ÿå¼€å‘çš„æ—¶é—´ï¼Œä½†è®ºæ€§èƒ½çš„è¯ï¼Œæ˜¯æ¯”ä¸ä¸ŠåŸç”Ÿå¼€å‘çš„ï¼ˆæ¯”å¦‚ Swift å’Œ Kotlin ï¼‰ï¼Œæ‰€ä»¥ä¸é€‚ç”¨äºéœ€è¦é«˜æ€§èƒ½ UI çš„é¡¹ç›®ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¦‚æœé¡¹ç›®çœŸçš„å¾ˆåœ¨æ„æ€§èƒ½çš„è¯ï¼Œé‚£å°±é€‰æ‹©åŸç”Ÿå¼€å‘ï¼›è€Œå¦‚æœéœ€è¦è·¨å¹³å°ï¼Œä»¥åŠèŠ‚çº¦å¼€å‘æ—¶é—´çš„è¯ï¼ŒTauri ä¸€å®šæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>
<h2 data-id="heading-1">GitHub Release</h2>
<h3 data-id="heading-2">cmyr-template-cli</h3>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoMeiYouRen%2Fcmyr-template-cli%2Freleases%2Ftag%2Fv1.42.0" target="_blank" title="https://github.com/CaoMeiYouRen/cmyr-template-cli/releases/tag/v1.42.0" ref="nofollow noopener noreferrer">v1.42.0</a> - 2025-11-15 20:20:31</h4>
<p>æ‘˜è¦:
ç‰ˆæœ¬ 1.42.0 æ‘˜è¦ï¼š</p>
<p>æ–°åŠŸèƒ½ï¼š</p>
<ul>
<li>é‡æ„æ ¸å¿ƒæ¨¡å—ç»“æ„</li>
<li>é‡æ„ GitHub å’Œ Docker åˆå§‹åŒ–åŠŸèƒ½ï¼ŒåŒ…å«å·¥ä½œæµå’Œä¾èµ–ç®¡ç†</li>
</ul>
<p>Bug ä¿®å¤ï¼š</p>
<ul>
<li>æ›´æ–°è·å– npm åŒ…ç‰ˆæœ¬çš„é€»è¾‘ï¼Œæ”¯æŒæå–è¯­ä¹‰ç‰ˆæœ¬å·</li>
</ul>
<p>ä»£ç é‡æ„ï¼š</p>
<ul>
<li>é‡æ„å·¥å…·å‡½æ•°ç»“æ„</li>
<li>é‡æ„ git ç›¸å…³åŠŸèƒ½å’Œæµ‹è¯•ç”¨ä¾‹</li>
<li>é‡æ„ README.md å’Œè´¡çŒ®æŒ‡å—åˆå§‹åŒ–é€»è¾‘ï¼Œæå–å…¬å…±æ¨¡æ¿æ¸²æŸ“å‡½æ•°</li>
</ul>
<h2 data-id="heading-4">æœ€æ–° GitHub åŠ æ˜Ÿä»“åº“</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgithub%2Fdmca" target="_blank" title="https://github.com/github/dmca" ref="nofollow noopener noreferrer">CaoMeiYouRen starred dmca</a> - 2025-11-15 16:46:08
GitHub å­˜å‚¨åº“æ”¶å½•æ”¶åˆ°çš„ DMCA åˆ é™¤é€šçŸ¥æ–‡æœ¬ã€‚GitHub ä¸è®¤å¯æˆ–é‡‡çº³è¿™äº›é€šçŸ¥ä¸­çš„ä»»ä½•ä¸»å¼ ã€‚é€šçŸ¥ä¸­æåŠçš„ç”¨æˆ·åœ¨è¢«è¯å®æœ‰ç½ªå‰å‡è§†ä¸ºæ— è¾œã€‚æ›´å¤šå…³äº DMCA æ”¿ç­–çš„ä¿¡æ¯å¯åœ¨ GitHub å®˜ç½‘æŸ¥è¯¢ã€‚è¯¥å­˜å‚¨åº“ä¸»è¦ä½¿ç”¨ DIGITAL Command è¯­è¨€ï¼Œè·å¾— 5868 ä¸ªæ˜Ÿæ ‡ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxfgryujk%2Fblivechat" target="_blank" title="https://github.com/xfgryujk/blivechat" ref="nofollow noopener noreferrer">CaoMeiYouRen starred blivechat</a> - 2025-11-10 20:23:56
è¿™æ˜¯ä¸€ä¸ªç”¨äº OBS è½¯ä»¶çš„ JavaScript æ’ä»¶ï¼Œèƒ½å¤Ÿæ¨¡æ‹Ÿ YouTube é£æ ¼çš„è¯„è®ºæ æ˜¾ç¤º bilibili ç›´æ’­å¹³å°çš„è§‚ä¼—äº’åŠ¨å†…å®¹ã€‚è¯¥é¡¹ç›®åœ¨ GitHub ä¸Šè·å¾—äº† 2525 ä¸ªæ˜Ÿæ ‡ï¼Œè¡¨æ˜å…¶å—æ¬¢è¿ç¨‹åº¦è¾ƒé«˜ã€‚è¯¥å·¥å…·ä¸»è¦é¢å‘ä½¿ç”¨ OBS è¿›è¡Œ bilibili ç›´æ’­çš„ä¸»æ’­ï¼Œå¸®åŠ©ä»–ä»¬ä»¥ YouTube çš„ç•Œé¢é£æ ¼å±•ç¤ºè§‚ä¼—è¯„è®ºã€‚</li>
</ul>
<h2 data-id="heading-5">å…¶ä»–åšå®¢æˆ–å‘¨åˆŠæ¨è</h2>
<h3 data-id="heading-6">é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</h3>
<ul>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2025%2F11%2Fweekly-issue-373.html" target="_blank" title="http://www.ruanyifeng.com/blog/2025/11/weekly-issue-373.html" ref="nofollow noopener noreferrer">ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠï¼ˆç¬¬ 373 æœŸï¼‰ï¼šæ•°æ®æ¨¡å‹æ˜¯æ–°äº§å“çš„æ ¸å¿ƒ</a> - 2025-11-14 08:06:44</li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2025%2F11%2Fdoubao-seed-code.html" target="_blank" title="http://www.ruanyifeng.com/blog/2025/11/doubao-seed-code.html" ref="nofollow noopener noreferrer">å›½äº§å¤§æ¨¡å‹æ¥å…¥ Claude Code æ•™ç¨‹ï¼šä»¥ Doubao-Seed-Code ä¸ºä¾‹</a> - 2025-11-11 15:30:25</li>
</ul>
<h3 data-id="heading-7">é˜¿çŒ«çš„åšå®¢</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fameow.xyz%2Farchives%2Ftroubleshooting-full-disk-on-docker-linux-machines" target="_blank" title="https://ameow.xyz/archives/troubleshooting-full-disk-on-docker-linux-machines" ref="nofollow noopener noreferrer">Docker æœåŠ¡å™¨ç£ç›˜æ»¡æ’æŸ¥æ€è·¯</a> - 2025-11-11 16:43:23</li>
</ul>
<h3 data-id="heading-8">æ½®æµå‘¨åˆŠ</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fweekly.tw93.fun%2Fposts%2F244%2F" target="_blank" title="https://weekly.tw93.fun/posts/244/" ref="nofollow noopener noreferrer">ç¬¬ 244 æœŸ - é£æœºé£è¿‡</a> - 2025-11-10 08:00:00</li>
</ul>
<h3 data-id="heading-9">äºŒä¸«è®²æ¢µçš„å­¦ä¹ å‘¨åˆŠ</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwiki.eryajf.net%2Fpages%2F713e30%2F" target="_blank" title="https://wiki.eryajf.net/pages/713e30/" ref="nofollow noopener noreferrer">å­¦ä¹ å‘¨åˆŠ-æ€»ç¬¬ 237 æœŸ-2025 å¹´ç¬¬ 46 å‘¨</a> - 2025-11-13 22:05:23</li>
</ul>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>æœ¬å‘¨çš„æ›´æ–°å’ŒåŠ¨æ€å¦‚ä¸Šæ‰€ç¤ºã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼
æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¢é˜…è‰æ¢…å‘¨æŠ¥çš„æ›´æ–°ï¼š</p>
<ul>
<li><strong>åšå®¢</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd" target="_blank" title="https://blog.cmyr.ltd" ref="nofollow noopener noreferrer">è‰æ¢…å‹ä»çš„åšå®¢</a></li>
<li><strong>RSS</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd%2Fweekly.xml" target="_blank" title="https://blog.cmyr.ltd/weekly.xml" ref="nofollow noopener noreferrer">è‰æ¢…å‘¨æŠ¥</a></li>
<li><strong>å…¬ä¼—å·</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Foss.cmyr.dev%2Fimages%2F20241025184516839-21n2ctv.png" target="_blank" title="https://oss.cmyr.dev/images/20241025184516839-21n2ctv.png" ref="nofollow noopener noreferrer">è‰æ¢…å‹ä»çš„åèŠ±å›­</a></li>
<li><strong>é‚®ç®±è®¢é˜…</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flistmonk.cmyr.dev%2Fsubscription%2Fform" target="_blank" title="https://listmonk.cmyr.dev/subscription/form" ref="nofollow noopener noreferrer">è‰æ¢…å‹ä»çš„åšå®¢è®¢é˜…</a></li>
</ul>
<h2 data-id="heading-11">å¾€æœŸå›é¡¾</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd%2Farchives%2F2025-45-caomei-weekly-caomei-auth-1-11-0-github-dependabot.html" target="_blank" title="https://blog.cmyr.ltd/archives/2025-45-caomei-weekly-caomei-auth-1-11-0-github-dependabot.html" ref="nofollow noopener noreferrer">è‰æ¢… Auth 1.11.0 å‘å¸ƒä¸ GitHub ä¾èµ–å®‰å…¨æ›´æ–° | 2025 å¹´ç¬¬ 45 å‘¨è‰æ¢…å‘¨æŠ¥</a> - 2025-11-09 23:19:22</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd%2Farchives%2F2025-44-caomei-weekly-rss-impact-1-17-0-docker-migration.html" target="_blank" title="https://blog.cmyr.ltd/archives/2025-44-caomei-weekly-rss-impact-1-17-0-docker-migration.html" ref="nofollow noopener noreferrer">RSS Impact 1.17.0 å‘å¸ƒä¸ Docker æœåŠ¡å™¨è¿ç§»ç»éªŒ | 2025 å¹´ç¬¬ 44 å‘¨è‰æ¢…å‘¨æŠ¥</a> - 2025-11-02 19:03:26</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd%2Farchives%2F2025-43-caomei-weekly-npm-security-update-and-thousand-stars-sandbox.html" target="_blank" title="https://blog.cmyr.ltd/archives/2025-43-caomei-weekly-npm-security-update-and-thousand-stars-sandbox.html" ref="nofollow noopener noreferrer">Npm å®‰å…¨æ›´æ–°ä¸åƒæ˜Ÿæ²™ç®± | 2025 å¹´ç¬¬ 43 å‘¨è‰æ¢…å‘¨æŠ¥</a> - 2025-10-26 21:10:36</li>
</ul>
<p>æœ¬æ–‡ä½œè€…ï¼šè‰æ¢…å‹ä»<br/>æœ¬æ–‡åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd%2Farchives%2F2025-46-caomei-weekly-code-refactoring-test-coverage.html" target="_blank" title="https://blog.cmyr.ltd/archives/2025-46-caomei-weekly-code-refactoring-test-coverage.html" ref="nofollow noopener noreferrer">blog.cmyr.ltd/archives/20â€¦</a><br/>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡é‡‡ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcreativecommons.org%2Flicenses%2Fby-nc-sa%2F4.0%2Fdeed.zh-hans" target="_blank" title="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" ref="nofollow noopener noreferrer">CC BY-NC-SA 4.0 åè®®</a> è¿›è¡Œåˆ†å‘ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼<br/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Perfetto ç³»åˆ— 6ï¼šä¸ºä»€ä¹ˆæ˜¯ 120Hzï¼Ÿé«˜åˆ·æ–°ç‡çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜]]></title>    <link>https://juejin.cn/post/7572480736362332166</link>    <guid>https://juejin.cn/post/7572480736362332166</guid>    <pubDate>2025-11-16T13:14:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572480736362332166" data-draft-id="7572480736362315782" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Perfetto ç³»åˆ— 6ï¼šä¸ºä»€ä¹ˆæ˜¯ 120Hzï¼Ÿé«˜åˆ·æ–°ç‡çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-16T13:14:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gracker"/> <meta itemprop="url" content="https://juejin.cn/user/1816846860560749"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Perfetto ç³»åˆ— 6ï¼šä¸ºä»€ä¹ˆæ˜¯ 120Hzï¼Ÿé«˜åˆ·æ–°ç‡çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1816846860560749/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gracker
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:14:25.000Z" title="Sun Nov 16 2025 13:14:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡æ˜¯ Android Perfetto ç³»åˆ—çš„ç¬¬å…­ç¯‡ï¼Œä¸»è¦ä»‹ç» Android è®¾å¤‡ä¸Š 120Hz åˆ·æ–°ç‡çš„ç›¸å…³çŸ¥è¯†ã€‚å¦‚ä»Šï¼Œ120Hz å·²æˆä¸º Android æ——èˆ°æ‰‹æœºçš„æ ‡é…ï¼Œæœ¬æ–‡å°†è®¨è®ºé«˜åˆ·æ–°ç‡å¸¦æ¥çš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜ï¼Œä»¥åŠä»ç³»ç»Ÿè§’åº¦è§£æ 120Hz çš„å·¥ä½œåŸç†ã€‚</p>
<p>åœ¨è¿‡å»çš„å‡ å¹´ä¸­ï¼Œç§»åŠ¨è®¾å¤‡çš„å±å¹•åˆ·æ–°ç‡ç»å†äº†ä» 60Hz åˆ° 90Hzï¼Œå†åˆ°ç°åœ¨æ™®éçš„ 120Hz çš„æ¼”è¿›è¿‡ç¨‹ã€‚è¿™ç§æå‡ä¸ä»…å¸¦æ¥äº†æ›´æµç•…çš„è§†è§‰ä½“éªŒï¼Œä¹Ÿå¯¹ç³»ç»Ÿæ¶æ„å’Œåº”ç”¨å¼€å‘æå‡ºäº†æ–°çš„è¦æ±‚ã€‚é€šè¿‡ Perfetto å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥æ›´ç›´è§‚åœ°ç†è§£é«˜åˆ·æ–°ç‡è®¾å¤‡ä¸Šå¸§æ¸²æŸ“çš„è¿‡ç¨‹å’Œæ€§èƒ½è¡¨ç°ã€‚</p>

<h3 data-id="heading-0">æœ¬æ–‡ç›®å½•</h3>
<ul>
<li><a href="#series" title="#series">ç³»åˆ—æ–‡ç« ç›®å½•</a></li>
<li><a href="#concepts" title="#concepts">åŸºæœ¬æ¦‚å¿µ</a></li>
<li><a href="#impl" title="#impl">ç³»ç»Ÿå®ç°ä¸å·¥ä½œåŸç†</a></li>
<li><a href="#pros-cons" title="#pros-cons">120Hz çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜</a></li>
<li><a href="#thoughts" title="#thoughts">æ€è€ƒä¸å±•æœ›</a></li>
<li><a href="#conclusion" title="#conclusion">ç»“è®º</a></li>
<li><a href="#about" title="#about">å…³äºæˆ‘ &amp;&amp; åšå®¢</a></li>
</ul>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-series" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-1">ç³»åˆ—æ–‡ç« ç›®å½•</h2>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F03%2F27%2FAndroid-Perfetto-101%2F%23%2FPerfetto-%25E7%25B3%25BB%25E5%2588%2597%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="https://www.androidperformance.com/2024/03/27/Android-Perfetto-101/#/Perfetto-%E7%B3%BB%E5%88%97%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ—ç›®å½•</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-01-What-is-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-01-What-is-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 1ï¼šPerfetto å·¥å…·ç®€ä»‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-02-how-to-get-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-02-how-to-get-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 2ï¼šPerfetto Trace æŠ“å–</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-03-how-to-analysis-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-03-how-to-analysis-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 3ï¼šç†Ÿæ‚‰ Perfetto View</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F02%2F08%2FAndroid-Perfetto-04-Open-Big-Trace-With-Command-Line%2F" target="_blank" title="https://www.androidperformance.com/2025/02/08/Android-Perfetto-04-Open-Big-Trace-With-Command-Line/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 4ï¼šä½¿ç”¨å‘½ä»¤è¡Œåœ¨æœ¬åœ°æ‰“å¼€è¶…å¤§ Trace</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F03%2F26%2FAndroid-Perfetto-05-Chorergrapher%2F" target="_blank" title="https://www.androidperformance.com/2025/03/26/Android-Perfetto-05-Chorergrapher/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 5ï¼šAndroid App åŸºäº Choreographer çš„æ¸²æŸ“æµç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F04%2F26%2FAndroid-Perfetto-06-Why-120Hz%2F" target="_blank" title="https://www.androidperformance.com/2025/04/26/Android-Perfetto-06-Why-120Hz/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 6ï¼šä¸ºä»€ä¹ˆæ˜¯ 120Hzï¼Ÿé«˜åˆ·æ–°ç‡çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2025%2F08%2F02%2FAndroid-Perfetto-07-MainThread-And-RenderThread%2F" target="_blank" title="https://androidperformance.com/2025/08/02/Android-Perfetto-07-MainThread-And-RenderThread/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 7 - MainThread å’Œ RenderThread è§£è¯»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2025%2F08%2F05%2FAndroid-Perfetto-08-Vsync%2F" target="_blank" title="https://androidperformance.com/2025/08/05/Android-Perfetto-08-Vsync/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 8ï¼šæ·±å…¥ç†è§£ Vsync æœºåˆ¶ä¸æ€§èƒ½åˆ†æ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F11%2F12%2FAndroid-Perfetto-09-CPU%2F" target="_blank" title="https://www.androidperformance.com/2025/11/12/Android-Perfetto-09-CPU/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 9 - CPU ä¿¡æ¯è§£è¯»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1oi82efE4D%2F%3Fvd_source%3D0c6d2191e785de0a36dc21a9da7e664e" target="_blank" title="https://www.bilibili.com/video/BV1oi82efE4D/?vd_source=0c6d2191e785de0a36dc21a9da7e664e" ref="nofollow noopener noreferrer">è§†é¢‘(Bç«™) - Android Perfetto åŸºç¡€å’Œæ¡ˆä¾‹åˆ†äº«</a></li>
</ol>
<p>å¦‚æœå¤§å®¶è¿˜æ²¡çœ‹è¿‡ Systrace ç³»åˆ—ï¼Œä¸‹é¢æ˜¯ä¼ é€é—¨ï¼š</p>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2019%2F05%2F26%2FAndroid_Systrace_0%2F%23%2F%25E7%25B3%25BB%25E5%2588%2597%25E6%2596%2587%25E7%25AB%25A0%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="https://www.androidperformance.com/2019/05/26/Android_Systrace_0/#/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">Systrace ç³»åˆ—ç›®å½•</a> ï¼š ç³»ç»Ÿä»‹ç»äº† Perfetto çš„å‰èº« Systrace çš„ä½¿ç”¨ï¼Œå¹¶é€šè¿‡ Systrace æ¥å­¦ä¹ å’Œäº†è§£ Android æ€§èƒ½ä¼˜åŒ–å’Œ Android ç³»ç»Ÿè¿è¡Œçš„åŸºæœ¬è§„åˆ™ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F" target="_blank" title="https://www.androidperformance.com/" ref="nofollow noopener noreferrer">ä¸ªäººåšå®¢</a> ï¼šä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯ Android ç›¸å…³çš„å†…å®¹ï¼Œä¹Ÿæ”¾äº†ä¸€äº›ç”Ÿæ´»å’Œå·¥ä½œç›¸å…³çš„å†…å®¹ã€‚</li>
</ol>
<p>æ¬¢è¿å¤§å®¶åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2Fabout%2F" target="_blank" title="https://www.androidperformance.com/about/" ref="nofollow noopener noreferrer">å…³äºæˆ‘</a> é¡µé¢åŠ å…¥å¾®ä¿¡ç¾¤æˆ–è€…æ˜Ÿçƒï¼Œè®¨è®ºä½ çš„é—®é¢˜ã€ä½ æœ€æƒ³çœ‹åˆ°çš„å…³äº Perfetto çš„éƒ¨åˆ†ï¼Œä»¥åŠè·Ÿå„ä½ç¾¤å‹è®¨è®ºæ‰€æœ‰ Android å¼€å‘ç›¸å…³çš„å†…å®¹</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-concepts" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-2">åŸºæœ¬æ¦‚å¿µ</h2>
<h3 data-id="heading-3">ä»€ä¹ˆæ˜¯å±å¹•åˆ·æ–°ç‡ï¼Ÿ</h3>
<p>å±å¹•åˆ·æ–°ç‡æ˜¯ä¸€ä¸ª<strong>ç¡¬ä»¶</strong>æ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯å±å¹•æ¯ç§’é’Ÿåˆ·æ–°æ˜¾ç¤ºå†…å®¹çš„æ¬¡æ•°ï¼Œå•ä½æ˜¯èµ«å…¹ï¼ˆHzï¼‰ã€‚</p>
<ul>
<li>60Hz å±å¹•ï¼šæ¯ç§’åˆ·æ–° 60 æ¬¡ï¼Œæ¯æ¬¡åˆ·æ–°é—´éš”çº¦ 16.67ms</li>
<li>90Hz å±å¹•ï¼šæ¯ç§’åˆ·æ–° 90 æ¬¡ï¼Œæ¯æ¬¡åˆ·æ–°é—´éš”çº¦ 11.11ms</li>
<li>120Hz å±å¹•ï¼šæ¯ç§’åˆ·æ–° 120 æ¬¡ï¼Œæ¯æ¬¡åˆ·æ–°é—´éš”çº¦ 8.33ms</li>
</ul>
<p>å±å¹•åˆ·æ–°ç‡å†³å®šäº†æ˜¾ç¤ºè®¾å¤‡èƒ½å¤Ÿå±•ç¤ºçš„æœ€é«˜å¸§ç‡ï¼Œä½†å±å¹•åªè´Ÿè´£æŒ‰å›ºå®šé¢‘ç‡æ˜¾ç¤ºå†…å®¹ï¼Œå…·ä½“æ˜¾ç¤ºä»€ä¹ˆå†…å®¹ç”±è½¯ä»¶ç³»ç»Ÿå†³å®šã€‚</p>
<h3 data-id="heading-4">ä»€ä¹ˆæ˜¯ FPSï¼Ÿ</h3>
<p>FPSï¼ˆFrames Per Secondï¼‰æ˜¯ä¸€ä¸ª<strong>è½¯ä»¶</strong>æ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯ç³»ç»Ÿæ¯ç§’ç”Ÿæˆå¤šå°‘å¸§å†…å®¹æä¾›ç»™å±å¹•æ˜¾ç¤ºã€‚</p>
<ul>
<li>60FPSï¼šç³»ç»Ÿæ¯ç§’ç”Ÿæˆ 60 å¸§å†…å®¹ï¼Œæ¯å¸§æœ‰çº¦ 16.67ms çš„å¤„ç†æ—¶é—´</li>
<li>90FPSï¼šç³»ç»Ÿæ¯ç§’ç”Ÿæˆ 90 å¸§å†…å®¹ï¼Œæ¯å¸§æœ‰çº¦ 11.11ms çš„å¤„ç†æ—¶é—´</li>
<li>120FPSï¼šç³»ç»Ÿæ¯ç§’ç”Ÿæˆ 120 å¸§å†…å®¹ï¼Œæ¯å¸§æœ‰çº¦ 8.33ms çš„å¤„ç†æ—¶é—´</li>
</ul>
<p>ä¸ºäº†è·å¾—æœ€ä½³çš„è§†è§‰ä½“éªŒï¼ŒFPS åº”è¯¥ä¸å±å¹•åˆ·æ–°ç‡åŒ¹é…ã€‚å¦‚æœ FPS ä½äºåˆ·æ–°ç‡ï¼Œä¼šå‡ºç°æ‰å¸§ï¼›å¦‚æœ FPS é«˜äºåˆ·æ–°ç‡ï¼Œå¤šä½™çš„å¸§ä¼šè¢«ä¸¢å¼ƒï¼Œé€ æˆèµ„æºæµªè´¹ã€‚</p>
<p>ä¸ºäº†è·å¾—æœ€ä½³çš„è§†è§‰ä½“éªŒï¼Œç†æƒ³æƒ…å†µä¸‹ FPS åº”è¯¥ä¸å±å¹•åˆ·æ–°ç‡åŒ¹é…ï¼Œä½†å®é™…ä½“éªŒä¸å†…å®¹ç±»å‹å’Œç”¨æˆ·æ„ŸçŸ¥ç´§å¯†ç›¸å…³ï¼š</p>
<ol start="0">
<li>
<p><strong>å†…å®¹ç±»å‹å·®å¼‚</strong>ï¼š</p>
<ul>
<li><strong>è§†é¢‘å†…å®¹</strong>ï¼šç”µå½±ï¼ˆ24fpsï¼‰æˆ–è§†é¢‘ï¼ˆ30fpsï¼‰å³ä½¿åœ¨ 120Hz å±å¹•ä¸Šä¹Ÿèƒ½çœ‹èµ·æ¥æµç•…ï¼Œè¿™æ˜¯å› ä¸ºè§†é¢‘å†…å®¹åŒ…å«è‡ªç„¶è¿åŠ¨æ¨¡ç³Šï¼Œä¸”ç¬¦åˆè§‚çœ‹è€…å¯¹è¯¥åª’ä»‹çš„é¢„æœŸ</li>
<li><strong>äº¤äº’å¼ç•Œé¢</strong>ï¼šè€Œæ»‘åŠ¨åˆ—è¡¨ã€åŠ¨ç”»ç­‰äº¤äº’åœºæ™¯å¯¹å¸§ç‡è¦æ±‚æ›´é«˜ï¼Œä» 120fps é™åˆ° 110fps éƒ½å¯èƒ½è¢«ç”¨æˆ·æ„ŸçŸ¥ä¸ºå¡é¡¿</li>
</ul>
</li>
<li>
<p><strong>å¸§ç‡ç¨³å®šæ€§</strong>ï¼šç¨³å®šçš„ä½å¸§ç‡ï¼ˆå¦‚ç¨³å®šçš„ 60fpsï¼‰é€šå¸¸æ¯”ä¸ç¨³å®šçš„é«˜å¸§ç‡ï¼ˆå¦‚åœ¨ 90-120fps ä¹‹é—´æ³¢åŠ¨ï¼‰ä½“éªŒæ›´å¥½</p>
</li>
<li>
<p><strong>ç³»ç»Ÿè¡Œä¸º</strong>ï¼š</p>
<ul>
<li>å½“ FPS ä½äºåˆ·æ–°ç‡æ—¶ï¼Œæ˜¾ç¤ºç³»ç»Ÿä¼šå¤ç”¨å¸§æˆ–æ’å…¥é»‘å¸§</li>
<li>å½“ FPS é«˜äºåˆ·æ–°ç‡æ—¶ï¼Œå¤šä½™çš„å¸§ä¼šè¢«ä¸¢å¼ƒï¼Œé€ æˆè®¡ç®—èµ„æºæµªè´¹</li>
</ul>
</li>
</ol>
<p>ä¸åŒåº”ç”¨åœºæ™¯æœ‰ä¸åŒçš„æµç•…åº¦æ ‡å‡†ï¼Œå¼€å‘è€…éœ€è¦æ ¹æ®åº”ç”¨ç±»å‹é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<h3 data-id="heading-5">ä»€ä¹ˆæ˜¯ Vsyncï¼Ÿ</h3>
<p>Vsyncï¼ˆå‚ç›´åŒæ­¥ï¼‰æ˜¯å°†è½¯ä»¶å¸§ç‡ä¸å±å¹•åˆ·æ–°ç‡åŒæ­¥çš„æœºåˆ¶ï¼Œç›®çš„æ˜¯é¿å…ç”»é¢æ’•è£‚ç°è±¡ã€‚Android ç³»ç»Ÿä¸­ï¼ŒVsync ä¿¡å·è¢«ç”¨æ¥è§¦å‘åº”ç”¨æ¸²æŸ“æ–°ä¸€å¸§çš„æ—¶æœºï¼Œç¡®ä¿æ¸²æŸ“è¿‡ç¨‹ä¸å±å¹•åˆ·æ–°å‘¨æœŸä¿æŒä¸€è‡´ã€‚</p>
<h3 data-id="heading-6">ä¸ºä»€ä¹ˆ 120Hz æˆä¸ºæ–°æ ‡å‡†ï¼Ÿ</h3>
<p>å¸‚åœºä» 60Hz åˆ° 90Hzï¼Œå†åˆ° 120Hz çš„æ¼”è¿›æœ‰ç€æ˜ç¡®çš„æŠ€æœ¯å’Œç”¨æˆ·ä½“éªŒé©±åŠ¨å› ç´ ï¼š</p>
<ol start="0">
<li><strong>æ›´é«˜çš„æµç•…åº¦</strong>ï¼š120Hz æ¯” 60Hz æä¾›äº†ä¸¤å€çš„è§†è§‰ä¿¡æ¯ï¼Œä½¿æ»‘åŠ¨ã€åŠ¨ç”»ç­‰äº¤äº’æ„Ÿè§‰æ›´åŠ æµç•…è‡ªç„¶ã€‚</li>
<li><strong>å‡å°‘å»¶è¿Ÿ</strong>ï¼šè¾“å…¥äº‹ä»¶åˆ°æ˜¾ç¤ºç»“æœçš„å»¶è¿Ÿä» 60Hz çš„ 16.67ms å‡å°‘åˆ° 120Hz çš„ 8.33msï¼Œè®©ç”¨æˆ·æ“ä½œåé¦ˆæ›´åŠæ—¶ã€‚</li>
<li><strong>ç¡¬ä»¶æ”¯æŒæˆç†Ÿ</strong>ï¼šç°ä»£ç§»åŠ¨å¤„ç†å™¨ï¼ˆå¦‚é«˜é€šéªé¾™ 8 ç³»åˆ—ã€è”å‘ç§‘å¤©ç‘ç³»åˆ—ï¼‰å·²ç»æœ‰è¶³å¤Ÿæ€§èƒ½æ”¯æŒ 120Hz çš„ç¨³å®šè¿è¡Œã€‚</li>
<li><strong>ç”µæ± æŠ€æœ¯è¿›æ­¥</strong>ï¼šæ›´é«˜æ•ˆçš„ç”µæ± å’Œç”µæºç®¡ç†æŠ€æœ¯ç¼“è§£äº†é«˜åˆ·æ–°ç‡å¸¦æ¥çš„åŠŸè€—å‹åŠ›ã€‚</li>
<li><strong>å¯å˜åˆ·æ–°ç‡æŠ€æœ¯</strong>ï¼šLTPO ç­‰è‡ªé€‚åº”åˆ·æ–°ç‡æŠ€æœ¯å…è®¸è®¾å¤‡åœ¨ä¸åŒåœºæ™¯ä¸‹æ™ºèƒ½åˆ‡æ¢åˆ·æ–°ç‡ï¼Œå¹³è¡¡æµç•…åº¦å’ŒåŠŸè€—ã€‚</li>
</ol>
<p>å¦‚ä»Šï¼Œ120Hz ä¸ä»…æ˜¯ Android æ——èˆ°æœºå‹çš„æ ‡é…ï¼Œè¿ iOS è®¾å¤‡ï¼ˆiPhone 13 Pro åŠä»¥ä¸Šï¼‰ä¹Ÿå·²æ”¯æŒ 120Hz çš„ ProMotion æŠ€æœ¯ï¼Œæ ‡å¿—ç€é«˜åˆ·æ–°ç‡å·²æˆä¸ºé«˜ç«¯ç§»åŠ¨è®¾å¤‡çš„åŸºæœ¬ç‰¹æ€§ã€‚</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-impl" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-7">ç³»ç»Ÿå®ç°ä¸å·¥ä½œåŸç†</h2>
<h3 data-id="heading-8">Perfetto è§†è§’ä¸‹çš„ 120Hz æ¸²æŸ“æµç¨‹</h3>
<p>åœ¨ 120Hz åˆ·æ–°ç‡ä¸‹ï¼ŒAndroid ç³»ç»Ÿçš„æ¸²æŸ“æµç¨‹æ²¡æœ‰æœ¬è´¨å˜åŒ–ï¼Œä¸»è¦åŒºåˆ«æ˜¯æ¯ä¸€å¸§çš„æ—¶é—´é¢„ç®—ä» 16.67ms ç¼©çŸ­åˆ°äº† 8.33ms ( <strong>å½“ç„¶è¿™é‡Œæ²¡æœ‰è®¨è®º App durationï¼Œå¦‚æœ App Duration é…ç½®å¤§äº 8.33msï¼Œé‚£ä¹ˆ App çš„ UI + Render åœ¨ App duration åŒºé—´å®Œæˆéƒ½æ˜¯å¯ä»¥çš„ï¼Œæ³¨æ„ æ¯ä¸ªæœºå™¨çš„ App Duration é…ç½®ä¸ä¸€æ ·</strong>ï¼‰ã€‚ä¸‹å›¾å±•ç¤ºäº† 120Hz ç¯å¢ƒä¸‹åº”ç”¨æ¸²æŸ“çš„ Perfetto è¿½è¸ªå›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f88117e1039a49a3ab9cc6e027ca9b1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903665&amp;x-signature=nmEJ0NmNsVMUMw1TetMqUXPjebs%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ 120Hz è®¾å¤‡ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p>
<ol start="0">
<li><strong>Vsync é—´éš”</strong>ï¼šVSYNC ä¿¡å·æ¯ 8.33ms è§¦å‘ä¸€æ¬¡</li>
<li><strong>å¸§å¤„ç†æµç¨‹</strong>ï¼šæ¯ä¸€å¸§çš„å¤„ç†ä¾ç„¶éµå¾ª Input â†’ Animation â†’ Traversal çš„é¡ºåº</li>
<li><strong>æ—¶é—´å‹ç¼©</strong>ï¼šæ‰€æœ‰å¤„ç†æ­¥éª¤å¿…é¡»åœ¨æ›´çŸ­çš„æ—¶é—´å†…å®Œæˆï¼Œå¯¹ç³»ç»Ÿå’Œåº”ç”¨æ€§èƒ½è¦æ±‚æ›´é«˜</li>
</ol>
<p>ä¸Šå›¾ä¸­å‡ºç°äº†ä¸¤ä¸ª Buffer ç›¸å…³çš„ Traceï¼Œè¿™é‡Œåšä¸€ä¸ªç®€å•çš„è¯´æ˜ï¼š</p>
<ol start="0">
<li>
<p><strong>QueuedBuffer</strong>ï¼šï¼ˆä¾‹å¦‚ï¼šQueuedBuffer - VRI[ImproveSnsTimelineUI]#748BLAST#748ï¼‰</p>
<ul>
<li>è¿™ä¸ª Trace Tag æ˜¯åœ¨ <strong>App è¿›ç¨‹</strong>ä¸­æ‰“å°çš„</li>
<li>è¡¨ç¤ºåº”ç”¨å®Œæˆä¸€å¸§æ¸²æŸ“åï¼Œå°†æ¸²æŸ“å¥½çš„ Buffer æ”¾å…¥é˜Ÿåˆ—å‡†å¤‡æäº¤ç»™ SurfaceFlinger</li>
<li>åœ¨ä½¿ç”¨ BlastBufferQueue çš„ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªæ—¶åˆ»æ ‡å¿—ç€ RenderThread å®Œæˆæ¸²æŸ“å¹¶å‡†å¤‡å°†ç»“æœä¼ è¾“åˆ°ç³»ç»ŸæœåŠ¡</li>
</ul>
</li>
<li>
<p><strong>BufferTX</strong>ï¼šï¼ˆä¾‹å¦‚ï¼šBufferTX - com.tencent.mm/com.tencent.mm.plugin.sns.ui.improve.ImproveSnsTimelineUI#47974ï¼‰</p>
<ul>
<li>è¿™ä¸ª Trace Tag æ˜¯åœ¨ <strong>SurfaceFlinger è¿›ç¨‹</strong>ä¸­æ‰“å°çš„</li>
<li>è¡¨ç¤º SurfaceFlinger æ¥æ”¶åˆ°åº”ç”¨ä¼ æ¥çš„ Buffer å¹¶å¼€å§‹å¤„ç†çš„æ—¶åˆ»</li>
<li>TX ä»£è¡¨ "Transfer/Transmission"ï¼Œå³ç¼“å†²åŒºçš„ä¼ è¾“è¿‡ç¨‹</li>
</ul>
</li>
</ol>
<p><strong>æ­£ç¡®çš„æµç¨‹åº”è¯¥æ˜¯ï¼š</strong></p>
<ol start="0">
<li>App çš„ RenderThread è°ƒç”¨ <code>queueBuffer</code>ï¼Œæ­¤æ—¶ App è®¤ä¸ºè‡ªå·±å·²äº¤å‡ºä¸€ä¸ª Bufferï¼Œäºæ˜¯ <code>QueuedBuffer</code> <strong>+1</strong>ã€‚</li>
<li>è¯¥ Buffer è¢«ä¼ è¾“ç»™ SFï¼ŒSF æ¥æ”¶ï¼ˆlatch/acquireï¼‰åï¼Œ<code>BufferTX</code> <strong>+1</strong>ã€‚</li>
<li>SF åœ¨æœªæ¥çš„æŸä¸ª Vsync å‘¨æœŸï¼Œä½¿ç”¨è¿™ä¸ª Buffer å®Œæˆåˆæˆå¹¶ä¸Šå±ã€‚</li>
<li>å½“ SF ä¸å†éœ€è¦è¿™ä¸ª Buffer æ—¶ï¼ˆä¾‹å¦‚ï¼Œå®ƒå·²ç»è¢«æ–°çš„å¸§æ›¿æ¢ï¼Œæˆ–è€…å·²ç¨³å®šæ˜¾ç¤ºäº†è¶³å¤Ÿé•¿çš„æ—¶é—´ï¼‰ï¼ŒSF ä¼šé‡Šæ”¾ï¼ˆreleaseï¼‰è¿™ä¸ª Bufferã€‚</li>
<li>SF é‡Šæ”¾ Buffer åï¼Œ<code>BufferTX</code> <strong>-1</strong>ã€‚åŒæ—¶ï¼ŒApp ä¼šæ”¶åˆ° Buffer å·²è¢«é‡Šæ”¾çš„å›è°ƒï¼Œæ­¤æ—¶ App ç«¯çš„ <code>QueuedBuffer</code> <strong>æ‰ä¼š -1</strong>ï¼Œè¡¨ç¤ºè¿™ä¸ª Buffer å·²æˆåŠŸè¿”å›ç¼“å†²æ± ï¼Œå¯è¢«å†æ¬¡ä½¿ç”¨ã€‚</li>
</ol>
<p>Perfetto åŒæ—¶ä¹Ÿæä¾›äº† Buffer è¿½è¸ªçš„åŠŸèƒ½ï¼Œç‚¹å‡» App ä¸Šé¢çš„ Actual Timeline ï¼ˆè¿™éƒ¨åˆ†çŸ¥è¯†å¯ä»¥çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-01-What-is-perfetto%2F%23Vsync-App-%25E6%25B2%25A1%25E9%2582%25A3%25E4%25B9%2588%25E7%259B%25B4%25E8%25A7%2582" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-01-What-is-perfetto/#Vsync-App-%E6%B2%A1%E9%82%A3%E4%B9%88%E7%9B%B4%E8%A7%82" ref="nofollow noopener noreferrer">Actual Timeline ä»‹ç»</a>ï¼‰ï¼Œå°±å¯ä»¥çœ‹åˆ°è¿™ä¸ª Buffer ä»ç”Ÿäº§åˆ°æ¶ˆè´¹çš„å…¨è¿‡ç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d73eba6ea77e44338f6a4fac241bc20d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903665&amp;x-signature=G%2B3b%2F3vTLnT%2FkHzzvNjnNswj7XQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">æ”¯æ’‘ 120Hz çš„ç³»ç»Ÿæ¶æ„ä¼˜åŒ–</h3>
<p>è¦æµç•…åœ°æ”¯æŒ 120Hz é«˜åˆ·æ–°ç‡ï¼ŒAndroid ç³»ç»Ÿæ¶æ„åšäº†ä¸å°‘<strong>è°ƒæ•´å’Œæ”¹è¿›</strong>ã€‚è¿™äº›å˜åŒ–æ¶‰åŠå¤šä¸ªç»„ä»¶ï¼Œä¹ŸåŒ…æ‹¬äº†å¯¹æ•´ä¸ªæ¸²æŸ“ç®¡çº¿çš„<strong>é‡è¦ä¼˜åŒ–</strong>ã€‚ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†çœ‹çœ‹å‡ ä¸ªå…³é”®çš„æŠ€æœ¯ç‚¹ï¼š</p>
<h4 data-id="heading-10">è‡ªé€‚åº”åˆ·æ–°ç‡æŠ€æœ¯</h4>
<p>ç°ä»£ Android è®¾å¤‡é‡‡ç”¨å¤šå±‚æ¬¡åˆ·æ–°ç‡ç®¡ç†ç­–ç•¥ï¼š</p>
<ul>
<li>
<p><strong>ç¡¬ä»¶å±‚æ”¯æŒ</strong>ï¼šLTPOï¼ˆä½æ¸©å¤šæ™¶æ°§åŒ–ç‰©ï¼‰æ˜¾ç¤ºæŠ€æœ¯å…è®¸å±å¹•åœ¨ 1Hz åˆ° 120Hz èŒƒå›´å†…ç²¾ç¡®è°ƒèŠ‚åˆ·æ–°ç‡ï¼Œè€Œéå›ºå®šæ¡£ä½åˆ‡æ¢</p>
</li>
<li>
<p><strong>å†…å®¹æ„ŸçŸ¥ç®—æ³•</strong>ï¼šç³»ç»Ÿé€šè¿‡åˆ†æå±å¹•å†…å®¹ç±»å‹è‡ªåŠ¨è°ƒæ•´åˆ·æ–°ç‡ï¼š</p>
<ul>
<li>é™æ€å†…å®¹ï¼ˆé˜…è¯»ã€å›¾ç‰‡æµè§ˆï¼‰ï¼šé™è‡³ 10-30Hz</li>
<li>è§†é¢‘æ’­æ”¾ï¼šåŒ¹é…è§†é¢‘æºå¸§ç‡ï¼ˆé€šå¸¸ 24-60Hzï¼‰</li>
<li>æ»šåŠ¨å’Œäº¤äº’ï¼šæå‡è‡³ 90-120Hz</li>
<li>æ¸¸æˆï¼šæ ¹æ®æ¸¸æˆå¼•æ“è¾“å‡ºå¸§ç‡åŠ¨æ€è°ƒæ•´</li>
</ul>
</li>
<li>
<p><strong>API æ”¯æŒ</strong>ï¼šAndroid æä¾› <code>Surface.setFrameRate()</code> APIï¼Œå…è®¸åº”ç”¨æ˜ç¡®æŒ‡å®šå…¶é¦–é€‰å¸§ç‡ï¼Œç³»ç»Ÿä¼šå°½å¯èƒ½æ»¡è¶³è¿™ä¸€è¯·æ±‚</p>
</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åº”ç”¨å¯ä»¥æŒ‡å®šé¦–é€‰å¸§ç‡å’Œåˆ·æ–°ç‡è¡Œä¸º</span>
surface<span class="hljs-selector-class">.setFrameRate</span>(<span class="hljs-number">60.0</span>f, Surface.FRAME_RATE_COMPATIBILITY_DEFAULT);
</code></pre>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-pros-cons" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-11">120Hz çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜</h2>
<h3 data-id="heading-12">120Hz å¸¦æ¥çš„ä½“éªŒæå‡</h3>
<p>æˆ‘æ‹¿åˆ°ç¬¬ä¸€å°120Hzæ‰‹æœºçš„æ—¶å€™ï¼Œæœ€ç›´è§‚çš„æ„Ÿå—å°±æ˜¯ï¼š</p>
<ol start="0">
<li><strong>ä¸€åˆ‡æ“ä½œéƒ½å˜å¾—æ›´æµç•…</strong>ï¼šä»æ¡Œé¢æ»‘åŠ¨ã€åº”ç”¨åˆ‡æ¢åˆ°åˆ·å¾®åšï¼Œç”»é¢æ›´æ–°æ›´é¢‘ç¹ï¼Œå†…å®¹è·Ÿéšæ‰‹æŒ‡ç§»åŠ¨ä¹Ÿæ›´åŠ ç²¾å‡†ã€‚å°¤å…¶åœ¨å¿«é€Ÿæ»‘åŠ¨æœ‹å‹åœˆæˆ–å¾®åšfeedæµæ—¶ï¼Œæ–‡å­—ä¾ç„¶æ¸…æ™°å¯è¾¨ï¼Œè€Œä¸æ˜¯ä¸€ç‰‡æ¨¡ç³Šã€‚</li>
<li><strong>æ¸¸æˆä½“éªŒå¤§å¹…æå‡</strong>ï¼šç©ã€Šç‹è€…è£è€€ã€‹æˆ–ã€Šå’Œå¹³ç²¾è‹±ã€‹è¿™ç±»ç«æŠ€æ¸¸æˆæ—¶ï¼Œç”»é¢æµç•…åº¦æå‡è®©æˆ‘çš„æ“ä½œç²¾å‡†åº¦ä¹Ÿè·Ÿç€æé«˜ã€‚åœ¨æ¿€çƒˆå¯¹æŠ—ä¸­ï¼Œèƒ½æå‰8msçœ‹åˆ°æ•ŒäººåŠ¨ä½œï¼Œè™½ç„¶æ—¶é—´å¾ˆçŸ­ï¼Œä½†ç¡®å®èƒ½å¸¦æ¥ä¼˜åŠ¿ã€‚</li>
<li><strong>çœ¼ç›ç–²åŠ³æ„Ÿå‡è½»</strong>ï¼šè¿™ç‚¹å¯èƒ½æ˜¯ä¸ªäººæ„Ÿå—ï¼Œä½†é•¿æ—¶é—´ç›¯ç€120Hzå±å¹•ç¡®å®æ¯”60Hzèˆ’é€‚ï¼Œç‰¹åˆ«æ˜¯é˜…è¯»å’Œæ»‘åŠ¨å†…å®¹æ—¶ï¼Œçœ¼ç›è¿½è¸ªå†…å®¹çš„è´Ÿæ‹…å‡è½»äº†ã€‚</li>
<li><strong>è§¦æ§ä½“éªŒæ›´ç²¾å‡†</strong>ï¼š120Hzä¸ä»…æ˜¯æ˜¾ç¤ºæ›´æ–°å¿«ï¼Œè§¦æ§é‡‡æ ·ç‡é€šå¸¸ä¹Ÿä¼šæé«˜ï¼Œè®©æ“ä½œå“åº”æ›´åŠæ—¶ï¼Œæ— è®ºæ˜¯æ‰“å­—è¿˜æ˜¯ç²¾ç»†æ§åˆ¶éƒ½æ›´å‡†ç¡®ã€‚</li>
</ol>
<h3 data-id="heading-13">120Hz é¢ä¸´çš„å®é™…é—®é¢˜</h3>
<p>å½“ç„¶ï¼Œé«˜åˆ·å±å¹•ä¹Ÿå¸¦æ¥äº†ä¸€ç³»åˆ—æŠ€æœ¯æŒ‘æˆ˜ï¼š</p>
<ol start="0">
<li><strong>åŠŸè€—é—®é¢˜</strong>ï¼šå®æµ‹ä¸­ï¼ŒåŒä¸€å°æ‰‹æœºåœ¨120Hzæ¨¡å¼ä¸‹æ¯”60Hzå¤§çº¦å¤šè€—ç”µ15-20%ã€‚å¯¹äºæœ¬å°±ç´§å¼ çš„æ‰‹æœºç»­èˆªæ¥è¯´ï¼Œè¿™æ˜¯ä¸å°çš„å‹åŠ›ã€‚</li>
<li><strong>å¼€å‘é—¨æ§›æé«˜</strong>ï¼šåŸæ¥åœ¨60Hzç¯å¢ƒä¸‹å‹‰å¼ºèƒ½è·‘çš„åº”ç”¨ï¼Œåˆ°äº†120Hzå¯èƒ½å°±ä¼šæ˜¾å¾—å¡é¡¿ã€‚æ¯å¸§åªæœ‰8.33msçš„å¤„ç†æ—¶é—´ï¼Œå¯¹å¼€å‘è€…çš„ä»£ç æ•ˆç‡æå‡ºäº†æ›´é«˜è¦æ±‚ã€‚</li>
<li><strong>å‘çƒ­å¢åŠ </strong>ï¼šé•¿æ—¶é—´è¿è¡Œé«˜å¸§ç‡æ¸¸æˆï¼Œæ‰‹æœºå‘çƒ­æ˜æ˜¾æ¯”60Hzæ›´ä¸¥é‡ï¼Œè¿™ä¸ä»…å½±å“ä½“éªŒï¼Œè¿˜å¯èƒ½å¯¼è‡´æ€§èƒ½é™é¢‘ã€‚</li>
<li><strong>åº”ç”¨é€‚é…å¹¶ä¸å®Œå–„</strong>ï¼šå¾ˆå¤šåº”ç”¨å¹¶æœªé’ˆå¯¹é«˜åˆ·åšä¼˜åŒ–ï¼Œå³ä½¿åœ¨120Hzå±å¹•ä¸Šï¼Œå®é™…è¾“å‡ºå¸§ç‡å¯èƒ½è¿˜æ˜¯60fpsï¼Œæµªè´¹äº†å±å¹•æ½œåŠ›ã€‚</li>
</ol>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-thoughts" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-14">æ€è€ƒä¸å±•æœ›</h2>
<h3 data-id="heading-15">æŒ‰éœ€è°ƒæ•´ï¼šä» ProMotion çœ‹åˆ·æ–°ç‡çš„æ™ºèƒ½ç®¡ç†</h3>
<p>éšç€ 120Hz é«˜åˆ·æ–°ç‡é€æ¸æˆä¸ºæ——èˆ°æ‰‹æœºçš„æ ‡é…ï¼Œä¸€ä¸ªå€¼å¾—æ€è€ƒçš„é—®é¢˜æ˜¯ï¼šæˆ‘ä»¬çœŸçš„éœ€è¦åœ¨æ‰€æœ‰åœºæ™¯ä¸‹éƒ½ä¿æŒ 120Hz çš„åˆ·æ–°ç‡å—ï¼Ÿ</p>
<p>è‹¹æœçš„ ProMotion æŠ€æœ¯å®é™…ä¸Šç»™å‡ºäº†ä¸€ä¸ªæ›´ä¸ºåˆç†çš„ç­”æ¡ˆï¼šåªæœ‰åœ¨çœŸæ­£éœ€è¦é«˜æ„ŸçŸ¥åº¦çš„åŠ¨ç”»åœºæ™¯ä¸‹æ‰æ¿€æ´»é«˜åˆ·æ–°ç‡ï¼Œè€Œåœ¨å…¶ä»–åœºæ™¯åˆ™å¯ä»¥é€‚å½“é™ä½åˆ·æ–°ç‡ä»¥èŠ‚çœç”µé‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b509f6065b6c4fa6b9fad167ae3cefb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903665&amp;x-signature=rxhZ7aX9otiKcapPnhjCdTu0em0%3D" alt="image.png" loading="lazy"/></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œè‹¹æœåœ¨iOSå¼€å‘æ–‡æ¡£ä¸­ä¸ºä¸åŒç±»å‹çš„åŠ¨ç”»åœºæ™¯æä¾›äº†éå¸¸ç²¾ç»†çš„ProMotionå¸§ç‡æ¨èé…ç½®ï¼š</p>
<ol start="0">
<li>
<p><strong>é«˜å½±å“åŠ›åŠ¨ç”»ï¼ˆHigh-impact animationsï¼‰</strong> ï¼š</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šå…¨å±è½¬åœºï¼ˆå¦‚ç…§ç‰‡åº”ç”¨ä¸­ç‚¹å‡»ç¼©ç•¥å›¾å±•å¼€ï¼‰ã€ç¬¬ä¸€äººç§°æ¸¸æˆã€Sheetå¼¹å‡ºå±•ç¤ºç­‰</li>
<li>æ¨èå¸§ç‡ï¼š80-120Hzï¼Œé¦–é€‰120Hzï¼ˆCAFrameRateRange(minimum:80, maximum:120, preferred:120)ï¼‰</li>
<li>ä½¿ç”¨å»ºè®®ï¼šè°¨æ…ä½¿ç”¨ï¼Œä»…åœ¨å…³é”®äº¤äº’åœºæ™¯åº”ç”¨ï¼Œä»¥å‡å°‘ç”µé‡æ¶ˆè€—</li>
</ul>
</li>
<li>
<p><strong>é€æ˜åº¦/é¢œè‰²è¿‡æ¸¡å’Œå¾®å°ç§»åŠ¨</strong>ï¼š</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šå¼€å…³çŠ¶æ€å˜åŒ–ã€è¿›åº¦æŒ‡ç¤ºå™¨æ—‹è½¬ã€èƒŒæ™¯æ¨¡ç³Šæ•ˆæœç­‰</li>
<li>æ¨èå¸§ç‡ï¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤å¸§ç‡èŒƒå›´ï¼ˆCAFrameRateRange.defaultï¼‰</li>
<li>ä½¿ç”¨å»ºè®®ï¼šè¿™ç±»åŠ¨ç”»ä¸éœ€è¦è¿‡é«˜å¸§ç‡ï¼Œè§†è§‰æ•ˆæœå·®å¼‚ä¸å¤§</li>
</ul>
</li>
<li>
<p><strong>ä½é€Ÿå°åŠ¨ç”»</strong>ï¼š</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šæ—¶é’ŸæŒ‡é’ˆç§»åŠ¨ã€ç¼“æ…¢è¿›åº¦æ¡ç­‰</li>
<li>æ¨èå¸§ç‡ï¼šæ ¹æ®åŠ¨ç”»é€Ÿåº¦ï¼Œå¯é€‰æ‹©8-15Hzã€15-24Hzæˆ–30-48Hzä¸ç­‰</li>
<li>ä½¿ç”¨å»ºè®®ï¼šä½å¸§ç‡åœ¨è¿™äº›åœºæ™¯ä¸‹è§†è§‰æ•ˆæœå·²è¶³å¤Ÿå¥½ï¼ŒåŒæ—¶å¯æ˜¾è‘—èŠ‚çœç”µé‡</li>
</ul>
</li>
<li>
<p><strong>å…¶ä»–æ‰€æœ‰æƒ…å†µ</strong>ï¼š</p>
<ul>
<li>æ¨èä½¿ç”¨ç³»ç»Ÿé»˜è®¤å¸§ç‡</li>
</ul>
</li>
</ol>
<p>è¿™ç§ç²¾ç»†åŒ–çš„å¸§ç‡ç®¡ç†ç­–ç•¥ï¼Œä¸ä»…è®©ç³»ç»Ÿèƒ½å¤Ÿåœ¨ç”¨æˆ·ä½“éªŒå’Œç”µæ± å¯¿å‘½ä¹‹é—´å–å¾—æœ€ä½³å¹³è¡¡ï¼Œä¹Ÿä¸ºå¼€å‘è€…æä¾›äº†æ˜ç¡®çš„æŒ‡å¯¼ã€‚ç›¸æ¯”äºç®€å•ç²—æš´åœ°å…¨å±€ä½¿ç”¨120Hzï¼Œè¿™ç§æœ‰é’ˆå¯¹æ€§çš„å¸§ç‡è°ƒæ•´æ–¹æ¡ˆæ˜¾ç„¶æ›´åŠ ç§‘å­¦å’Œé«˜æ•ˆã€‚</p>
<h3 data-id="heading-16">ç”µé‡ä¸ä½“éªŒçš„æƒè¡¡</h3>
<p>æµ‹è¯•è¡¨æ˜ï¼Œå°†åˆ·æ–°ç‡ä» 120Hz é™è‡³ 60Hz å¯èŠ‚çœçº¦ 10-15% çš„ç”µé‡ã€‚æ™ºèƒ½åœ°æ§åˆ¶åˆ·æ–°ç‡ï¼Œèƒ½åœ¨ä¿æŒè‰¯å¥½ç”¨æˆ·ä½“éªŒçš„åŒæ—¶ï¼Œæ˜¾è‘—å»¶é•¿ç”µæ± ç»­èˆªæ—¶é—´ã€‚</p>
<p>120Hz çš„ä¸»è¦ä»·å€¼åœ¨äºæå‡äº¤äº’æµç•…åº¦å’Œå“åº”é€Ÿåº¦ï¼Œè€Œéå§‹ç»ˆä¿æŒé«˜åˆ·æ–°ç‡ã€‚æ›´æ™ºèƒ½çš„åšæ³•æ˜¯æ ¹æ®å®é™…éœ€æ±‚åŠ¨æ€è°ƒæ•´ï¼š<strong>åœ¨ç”¨æˆ·æ„ŸçŸ¥æ•æ„Ÿçš„åœºæ™¯ä½¿ç”¨é«˜åˆ·æ–°ç‡ï¼Œåœ¨ç”¨æˆ·æ„ŸçŸ¥ä¸æ•æ„Ÿçš„åœºæ™¯é™ä½åˆ·æ–°ç‡</strong>ã€‚</p>
<h3 data-id="heading-17">å¼€å‘è€…çš„é€‚é…ç­–ç•¥</h3>
<p>åº”ç”¨å¼€å‘è€…åº”å½“æ„è¯†åˆ°ï¼Œå¹¶éæ‰€æœ‰å†…å®¹éƒ½éœ€è¦ä»¥æœ€é«˜å¸§ç‡æ¸²æŸ“ã€‚é€šè¿‡ Android æä¾›çš„ APIï¼ˆå¦‚ Surface.setFrameRate()ï¼‰ï¼Œå¯ä»¥ä¸ºä¸åŒå†…å®¹ç±»å‹æŒ‡å®šåˆé€‚çš„å¸§ç‡ï¼Œé…åˆç³»ç»Ÿçš„è‡ªé€‚åº”åˆ·æ–°ç‡æœºåˆ¶ï¼Œå…±åŒè¾¾åˆ°æœ€ä½³çš„æ€§èƒ½ä¸ç”µé‡å¹³è¡¡ã€‚</p>
<p>æ€»ä¹‹ï¼Œæœªæ¥é«˜åˆ·æ–°ç‡æŠ€æœ¯çš„å‘å±•æ–¹å‘åº”è¯¥æ˜¯æ›´åŠ æ™ºèƒ½ã€æ›´åŠ ç²¾ç»†çš„è‡ªé€‚åº”è°ƒèŠ‚ï¼Œè€Œéç®€å•åœ°è¿½æ±‚æ›´é«˜çš„æ•°å­—ã€‚çœŸæ­£çš„æŠ€æœ¯è¿›æ­¥æ˜¯åœ¨ç”¨æˆ·æ— æ„ŸçŸ¥çš„æƒ…å†µä¸‹ï¼Œåœ¨ä½“éªŒå’Œèƒ½æ•ˆä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ã€‚</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-conclusion" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-18">ç»“è®º</h2>
<p>å›é¡¾è¿‡å»å‡ å¹´é«˜åˆ·å±å¹•çš„å‘å±•ï¼Œæˆ‘è®¤ä¸º120Hzç¡®å®æ˜¯æ‰‹æœºäº¤äº’ä½“éªŒçš„ä¸€æ¬¡é‡è¦è·ƒå‡ã€‚è™½ç„¶å®ƒå¸¦æ¥äº†åŠŸè€—å’Œå¼€å‘å¤æ‚æ€§ç­‰æŒ‘æˆ˜ï¼Œä½†å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼šæ›´æµç•…çš„ä½“éªŒã€æ›´ä½çš„è¾“å…¥å»¶è¿Ÿã€æ›´è‡ªç„¶çš„åŠ¨ç”»æ•ˆæœã€‚</p>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼ŒPerfettoè¿™ç±»å·¥å…·è®©æˆ‘ä»¬èƒ½å¤Ÿçœ‹æ¸…120Hzä¸‹çš„æ€§èƒ½é—®é¢˜ï¼Œæœ‰çš„æ”¾çŸ¢åœ°è¿›è¡Œä¼˜åŒ–ã€‚è™½ç„¶ä»16mså‡å°‘åˆ°8msçš„é¢„ç®—å¬èµ·æ¥å¾ˆç´§å¼ ï¼Œä½†äº‹å®ä¸Šä¸»æµå¤„ç†å™¨å·²ç»æœ‰è¶³å¤Ÿèƒ½åŠ›åº”å¯¹è¿™ä¸ªæŒ‘æˆ˜ã€‚åªè¦åˆç†è§„åˆ’UIå¤æ‚åº¦ã€é¿å…ä¸»çº¿ç¨‹é˜»å¡ï¼Œæµç•…çš„120fpsä½“éªŒæ˜¯å®Œå…¨å¯ä»¥å®ç°çš„ã€‚</p>
<p>ä»è¶‹åŠ¿æ¥çœ‹ï¼Œæˆ‘ä¸è®¤ä¸ºæ‰‹æœºå±å¹•åˆ·æ–°ç‡ä¼šæ— é™æ”€å‡ã€‚120Hzå¯èƒ½ä¼šåœ¨ç›¸å½“é•¿çš„æ—¶é—´å†…æˆä¸ºæ ‡å‡†ï¼Œè€Œæœªæ¥çš„ç„¦ç‚¹å°†æ›´å¤šæ”¾åœ¨å¦‚ä½•æ™ºèƒ½åŒ–åœ°è°ƒæ•´åˆ·æ–°ç‡ï¼Œåœ¨ä¸åŒåœºæ™¯ä¸‹æ‰¾åˆ°ä½“éªŒå’ŒåŠŸè€—çš„æœ€ä½³å¹³è¡¡ç‚¹ã€‚æ¯•ç«Ÿï¼Œæˆ‘ä»¬è¿½æ±‚çš„ä¸æ˜¯æ•°å­—ä¸Šçš„é«˜ï¼Œè€Œæ˜¯å®é™…ä½“éªŒçš„å¥½ã€‚</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-about" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-19">å…³äºæˆ‘ &amp;&amp; åšå®¢</h2>
<p>ä¸‹é¢æ˜¯ä¸ªäººçš„ä»‹ç»å’Œç›¸å…³çš„é“¾æ¥ï¼ŒæœŸæœ›ä¸åŒè¡Œçš„å„ä½å¤šå¤šäº¤æµï¼Œä¸‰äººè¡Œï¼Œåˆ™å¿…æœ‰æˆ‘å¸ˆ!</p>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2Fabout%2F" target="_blank" title="https://www.androidperformance.com/about/" ref="nofollow noopener noreferrer">åšä¸»ä¸ªäººä»‹ç»</a> ï¼šé‡Œé¢æœ‰ä¸ªäººçš„å¾®ä¿¡å’Œå¾®ä¿¡ç¾¤é“¾æ¥ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2019%2F12%2F01%2FBlogMap%2F" target="_blank" title="https://androidperformance.com/2019/12/01/BlogMap/" ref="nofollow noopener noreferrer">æœ¬åšå®¢å†…å®¹å¯¼èˆª</a> ï¼šä¸ªäººåšå®¢å†…å®¹çš„ä¸€ä¸ªå¯¼èˆªã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2018%2F05%2F07%2FAndroid-performance-optimization-skills-and-tools%2F" target="_blank" title="https://androidperformance.com/2018/05/07/Android-performance-optimization-skills-and-tools/" ref="nofollow noopener noreferrer">ä¸ªäººæ•´ç†å’Œæœé›†çš„ä¼˜ç§€åšå®¢æ–‡ç«  - Android æ€§èƒ½ä¼˜åŒ–å¿…çŸ¥å¿…ä¼š</a> ï¼šæ¬¢è¿å¤§å®¶è‡ªèå’Œæ¨è ï¼ˆå¾®ä¿¡ç§èŠå³å¯ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2023%2F12%2F30%2Fthe-performance%2F" target="_blank" title="https://www.androidperformance.com/2023/12/30/the-performance/" ref="nofollow noopener noreferrer">Androidæ€§èƒ½ä¼˜åŒ–çŸ¥è¯†æ˜Ÿçƒ</a> ï¼š æ¬¢è¿åŠ å…¥ï¼Œå¤šè°¢æ”¯æŒï½</li>
</ol>
<blockquote>
<p><strong>ä¸€ä¸ªäººå¯ä»¥èµ°çš„æ›´å¿« , ä¸€ç¾¤äººå¯ä»¥èµ°çš„æ›´è¿œ</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥æ¢ç´¢å‰–æ JVM çš„å¯åŠ¨è¿‡ç¨‹]]></title>    <link>https://juejin.cn/post/7572481101711507510</link>    <guid>https://juejin.cn/post/7572481101711507510</guid>    <pubDate>2025-11-16T13:19:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572481101711507510" data-draft-id="7573193563044741174" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥æ¢ç´¢å‰–æ JVM çš„å¯åŠ¨è¿‡ç¨‹"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-16T13:19:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºçŒ¿DD"/> <meta itemprop="url" content="https://juejin.cn/user/131597123993358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥æ¢ç´¢å‰–æ JVM çš„å¯åŠ¨è¿‡ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/131597123993358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºçŒ¿DD
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:19:30.000Z" title="Sun Nov 16 2025 13:19:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ å¯æ›¾æƒ³è¿‡ï¼šå½“ä½ åœ¨ç»ˆç«¯é‡Œæ•²ä¸‹ <code>java</code>ï¼Œåœ¨ <code>main</code> æ–¹æ³•çœŸæ­£è¿è¡Œä¹‹å‰ï¼ŒJVM ä¸ºäº†â€œåˆ›é€ ä¸€ä¸ªå¯è¿è¡Œä½ çš„ç¨‹åºçš„å®‡å®™â€ï¼Œåˆ°åº•ç»å†äº†å“ªäº›æ­¥éª¤ï¼Ÿä»å‚æ•°æ ¡éªŒã€ç³»ç»Ÿèµ„æºæ¢æµ‹ï¼Œåˆ°é€‰æ‹©åƒåœ¾å›æ”¶å™¨ï¼Œå†åˆ°ç±»çš„åŠ è½½ã€é“¾æ¥ä¸åˆå§‹åŒ–ï¼Œè¿™äº›çœ‹ä¸è§çš„è¿‡ç¨‹å†³å®šäº†åº”ç”¨çš„å¯åŠ¨ä½“éªŒä¸åç»­æ€§èƒ½ã€‚æœ¬æ–‡ç”¨ä¸€ä¸ªæç®€çš„ HelloWorld è´¯ç©¿å…¨ç¨‹ï¼Œç»“åˆè¯¦ç»†æ—¥å¿—ï¼Œä¸€æ­¥æ­¥æ´å¯Ÿ JVM çš„å¯åŠ¨æœºåˆ¶ï¼Œå¸®ä½ åœ¨è°ƒè¯•å’Œæ€§èƒ½ä¼˜åŒ–æ—¶æ›´æœ‰æŠ“æ‰‹ã€‚</p>
<h2 data-id="heading-0">1. æ¦‚è§ˆ</h2>
<p>å½“æˆ‘ä»¬è¿è¡Œä¸€ä¸ª Java åº”ç”¨æ—¶ï¼ŒJVM åœ¨æˆ‘ä»¬çš„ä»£ç çœŸæ­£å¼€å§‹æ‰§è¡Œä¹‹å‰ï¼Œä¼šå…ˆå®Œæˆä¸€ç³»åˆ—å¤æ‚æ­¥éª¤ã€‚æœ¬æ–‡å°†ä»æ‰§è¡Œ <code>java</code> å‘½ä»¤çš„é‚£ä¸€åˆ»å¼€å§‹ï¼Œä¸€ç›´èµ°åˆ°åº”ç”¨å°±ç»ªã€‚</p>
<p>æˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„ HelloWorld ç¨‹åºä¸ºä¾‹ï¼Œæ‹†è§£æ¯ä¸€ä¸ªé˜¶æ®µã€‚ç†è§£è¿™äº›å†…éƒ¨æœºåˆ¶èƒ½æ˜¾è‘—æå‡è°ƒè¯•ä¸æ€§èƒ½è°ƒä¼˜çš„æ•ˆæœã€‚</p>
<h2 data-id="heading-1">2. ä» <code>java</code> å‘½ä»¤åˆ° JVM å¯åŠ¨</h2>
<p>åœ¨ JVM æ‰§è¡Œä»»ä½•ä»£ç ä¹‹å‰ï¼Œå®ƒéœ€è¦å…ˆå¯åŠ¨ã€æ ¡éªŒè¾“å…¥å¹¶é…ç½®è¿è¡Œç¯å¢ƒã€‚ä¸‹é¢æŒ‰å¯åŠ¨é¡ºåºèµ°ä¸€éæ—©æœŸæµç¨‹ï¼šä»è°ƒç”¨ <code>java</code> å‘½ä»¤åˆ°åˆå§‹åŒ– JVM è¿è¡Œæ—¶ã€‚</p>
<h3 data-id="heading-2">2.1. <code>java</code> å‘½ä»¤ä¸åˆå§‹è°ƒç”¨</h3>
<p>å½“æˆ‘ä»¬è¿è¡Œ <code>java</code> å‘½ä»¤æ—¶ï¼ŒJVM å¯åŠ¨åºåˆ—ä¼šé€šè¿‡ JNI æ–¹æ³• <code>JNI_CreateJavaVM()</code> å¼€å§‹æ‰§è¡Œã€‚è¯¥æ–¹æ³•å®Œæˆè‹¥å¹²å…³é”®åˆå§‹åŒ–ä»»åŠ¡ï¼Œä¸ºæ‰§è¡Œ Java åº”ç”¨å‡†å¤‡ç¯å¢ƒã€‚Java Native Interfaceï¼ˆJNIï¼‰æ˜¯ JVM ä¸åŸç”Ÿç³»ç»Ÿåº“ä¹‹é—´çš„æ¡¥æ¢ï¼Œä½¿ Java ä¸å¹³å°ç‰¹æ€§å¯ä»¥åŒå‘é€šä¿¡ã€‚</p>
<p>æœ¬æ–‡å°†ä½¿ç”¨è¯¦ç»†æ—¥å¿—è§‚å¯Ÿ JVM çš„å†…éƒ¨è¿ä½œï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">java -Xlog:all=trace HelloWorldCopy
</code></pre>
<h3 data-id="heading-3">2.2. æ ¡éªŒç”¨æˆ·è¾“å…¥</h3>
<p>é¦–å…ˆï¼ŒJVM ä¼šæ ¡éªŒæˆ‘ä»¬ä¼ å…¥çš„å‚æ•°ï¼š</p>
<pre><code class="hljs language-text" lang="text">[0.006s][info][arguments] VM Arguments:
[arguments] jvm_args: -Xlog:all=trace:file=helloworld.log 
[arguments] java_command: HelloWorld
[arguments] java_class_path (initial): .
[arguments] Launcher Type: SUN_STANDARD
</code></pre>
<p>JVM ä¼šéªŒè¯ç›®æ ‡å¯æ‰§è¡Œã€ç±»è·¯å¾„ä»¥åŠä»»ä½• JVM å‚æ•°ï¼Œç¡®ä¿å®ƒä»¬åœ¨ç»§ç»­æ‰§è¡Œå‰éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚è¿™ä¸ªæ­¥éª¤èƒ½å°½æ—©æ•è·å¾ˆå¤šå¸¸è§é…ç½®é”™è¯¯ï¼Œé¿å…åç»­é˜¶æ®µå‡ºç°æ›´éš¾å®šä½çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-4">2.3. æ£€æµ‹ç³»ç»Ÿèµ„æº</h3>
<p>æ¥ç€ï¼ŒJVM ä¼šè¯†åˆ«å¯ç”¨çš„ç³»ç»Ÿèµ„æºï¼Œä¾‹å¦‚å¤„ç†å™¨æ•°é‡ã€å†…å­˜å¤§å°ä»¥åŠå…³é”®ç³»ç»ŸæœåŠ¡ï¼š</p>
<pre><code class="hljs language-text" lang="text">[0.007s][debug][os       ] Process is running in a job with 20 active processors.
[os       ] Initial active processor count set to 20
[os       ] Process is running in a job with 20 active processors.
[gc,heap  ]   Maximum heap size 4197875712
[gc,heap  ]   Initial heap size 262367232
[gc,heap  ]   Minimum heap size 6815736
[os       ] Host Windows OS automatically schedules threads across all processor groups.
[os       ] 20 logical processors found.
</code></pre>
<p>è¿™äº›ä¿¡æ¯ä¼šå½±å“ JVM çš„ä¸€äº›å†…éƒ¨å†³ç­–ï¼Œæ¯”å¦‚é»˜è®¤é€‰æ‹©å“ªä¸ªåƒåœ¾å›æ”¶å™¨ã€‚å¯ç”¨ CPU æ•°å’Œæ€»å†…å­˜ä¼šç›´æ¥å½±å“ JVM çš„å¯å‘å¼é€‰æ‹©ã€‚ä¸è¿‡ï¼Œå¤§å¤šæ•°è®¾ç½®éƒ½å¯ä»¥é€šè¿‡æ˜¾å¼çš„ JVM å‚æ•°è¿›è¡Œè¦†ç›–ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒJVM è¿˜ä¼šæ£€æŸ¥æ˜¯å¦æ”¯æŒ Native Memory Trackingï¼Œå¹¶éªŒè¯å®ƒå¯èƒ½ä¾èµ–çš„å„ç±»æ“ä½œç³»ç»Ÿå·¥å…·çš„å¯ç”¨æ€§ã€‚</p>
<h3 data-id="heading-5">2.4. ç¯å¢ƒå‡†å¤‡</h3>
<p>éšåï¼ŒJVM ä¼šç”Ÿæˆ HotSpot æ€§èƒ½æ•°æ®ã€‚è¿™äº›æ•°æ®ä¼šè¢« JConsoleã€VisualVM ç­‰å·¥å…·ç”¨äºæ£€æŸ¥å’Œåˆ†æ JVMï¼š</p>
<pre><code class="hljs language-text" lang="text">[perf,datacreation] name = sun.rt._sync_Inflations, dtype = 11, variability = 2, units = 4, dsize = 8, vlen = 0, pad_length = 4, size = 56, on_c_heap = FALSE, address = 0x000001f3085f0020, data address = 0x000001f3085f0050
</code></pre>
<p>è¿™ç±»æ€§èƒ½æ•°æ®é€šå¸¸å­˜å‚¨åœ¨ç³»ç»Ÿçš„ <code>/tmp</code> ç›®å½•ä¸‹ï¼Œå¹¶ä¼šåœ¨å¯åŠ¨é˜¶æ®µçš„ä¸€æ®µæ—¶é—´é‡ŒæŒç»­ç”Ÿæˆï¼Œä¸å…¶ä»–åˆå§‹åŒ–ä»»åŠ¡å¹¶è¡Œè¿›è¡Œã€‚</p>
<h2 data-id="heading-6">3. åŠ è½½ã€é“¾æ¥ä¸åˆå§‹åŒ–</h2>
<p>å½“ JVM ç¯å¢ƒå°±ç»ªåï¼Œå®ƒä¼šå¼€å§‹ä¸ºæˆ‘ä»¬çš„ç¨‹åºæ‰§è¡Œåšå‡†å¤‡ã€‚</p>
<h3 data-id="heading-7">3.1. é€‰æ‹©åƒåœ¾å›æ”¶å™¨</h3>
<p>åœ¨ JVM å†…éƒ¨ï¼Œä¸€ä¸ªå…³é”®æ­¥éª¤æ˜¯é€‰æ‹©åƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰ã€‚æˆªè‡³ JDK 23ï¼Œé»˜è®¤æƒ…å†µä¸‹ JVM ä¼šé€‰æ‹© G1 GCï¼Œé™¤éç³»ç»Ÿå¯ç”¨å†…å­˜å°‘äº 1792MB å’Œ/æˆ–ä»…æœ‰å•å¤„ç†å™¨ï¼š</p>
<pre><code class="hljs language-text" lang="text">[gc               ] Using G1
[gc,heap,coops    ] Trying to allocate at address 0x0000000705c00000 heap of size 0xfa400000
[os               ] VirtualAlloc(0x0000000705c00000, 4198498304, 2000, 4) returned 0x0000000705c00000.
[os,map           ] Reserved [0x0000000705c00000 - 0x0000000800000000), (4198498304 bytes)
[gc,heap,coops    ] Heap address: 0x0000000705c00000, size: 4004 MB, Compressed Oops mode: Zero based, Oop shift amount: 3
[pagesize         ] Heap:  min=8M max=4004M base=0x0000000705c00000 size=4004M page_size=4K
</code></pre>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹©å…¶å®ƒ GCï¼šå¦‚ Parallel GCã€ZGC ç­‰ï¼Œå…·ä½“å¯ç”¨ä¸é»˜è®¤ç­–ç•¥ä¾ä¸åŒ JDK ç‰ˆæœ¬ä¸å‘è¡Œç‰ˆè€Œå¼‚ã€‚</p>
<h3 data-id="heading-8">3.2. åŠ è½½ CDSï¼ˆç±»æ•°æ®å…±äº«ï¼‰</h3>
<p>æ­¤æ—¶ï¼ŒJVM ä¼šå¼€å§‹å¯»æ‰¾è¿›ä¸€æ­¥çš„ä¼˜åŒ–æœºä¼šã€‚CDS æ˜¯ä¸€ç»„å·²ç»ç»è¿‡é¢„å¤„ç†çš„ç±»æ–‡ä»¶å½’æ¡£ï¼Œå¯ä»¥æ”¹å–„ JVM çš„å¯åŠ¨æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-text" lang="text">[cds] trying to map [Java home]/lib/server/classes.jsa
[cds] Opened archive [Java home]/lib/server/classes.jsa
</code></pre>
<p>ä¸è¿‡ï¼ŒCDS æ­£åœ¨è¢« Project Leyden ä¸­çš„ AOTï¼ˆæå‰ï¼‰æœºåˆ¶é€æ­¥æ›¿ä»£ï¼Œåæ–‡ä¼šç»§ç»­è®¨è®ºã€‚</p>
<h3 data-id="heading-9">3.3. åˆ›å»ºæ–¹æ³•åŒº</h3>
<p>JVM éšåä¼šåˆ›å»ºâ€œæ–¹æ³•åŒºâ€ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºå­˜å‚¨ç±»æ•°æ®çš„ç‰¹æ®Šç¦»å †å†…å­˜åŒºåŸŸã€‚åœ¨ HotSpot ä¸­ï¼Œè¿™ä¸€åŒºåŸŸè¢«ç§°ä¸º metaspaceã€‚å½“å…³è”çš„ç±»åŠ è½½å™¨ä¸å†å¯è¾¾æ—¶ï¼Œå­˜å‚¨äºæ­¤çš„ç±»æ•°æ®ä¹Ÿä¼šè¢«ç§»é™¤ï¼š</p>
<pre><code class="hljs language-text" lang="text">[metaspace,map    ] Trying anywhere...
[metaspace,map    ] Mapped at 0x000001f32b000000
</code></pre>
<p>è™½ç„¶æ–¹æ³•åŒºä¸åœ¨å †ä¸­ï¼Œä½†å®ƒä»ç”± GC ç®¡ç†ã€‚</p>
<h3 data-id="heading-10">3.4. ç±»åŠ è½½</h3>
<p>ç±»åŠ è½½åŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼šå®šä½äºŒè¿›åˆ¶è¡¨ç¤ºã€æ ¹æ®å…¶æ´¾ç”Ÿå‡ºç±»ã€å¹¶å°†å…¶åŠ è½½åˆ°æ–¹æ³•åŒºã€‚æ­£æ˜¯è¿™ç§åŠ¨æ€åŠ è½½èƒ½åŠ›ï¼Œè®© Springã€Mockito ç­‰æ¡†æ¶å¯ä»¥åœ¨è¿è¡ŒæœŸæŒ‰éœ€ç”Ÿæˆå¹¶åŠ è½½ç±»ã€‚</p>
<p>ç±»åŠ è½½æœ‰ä¸¤ç§æ–¹å¼ï¼šå¼•å¯¼ç±»åŠ è½½å™¨ï¼ˆbootstrap class loaderï¼‰æˆ–è‡ªå®šä¹‰ç±»åŠ è½½å™¨ã€‚ä¸‹é¢å€ŸåŠ©ä¸€ä¸ªç®€å•çš„ <code>HelloWorld</code> ç±»ï¼Œçœ‹çœ‹ JVM é¦–å…ˆä¼šåšä»€ä¹ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Object</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"Hello World!"</span>);
    }
}
</code></pre>
<p>JVM ä¼šä¼˜å…ˆåŠ è½½ <code>java.lang.Object</code> åŠå…¶ä¾èµ–ã€‚ç±»åœ¨åˆæ¬¡åŠ è½½æ—¶å¤§å¤šå¤„äºâ€œåŠéšè—â€çš„çŠ¶æ€ï¼Œä»¥ä¾¿è¿›è¡Œå¿…è¦çš„éªŒè¯ä¸æ•´ç†å·¥ä½œã€‚</p>
<p>å†çœ‹ä¸‹ <code>java.lang.Object</code> çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Object</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> Class&lt;?&gt; getClass()
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object obj)</span>
}
</code></pre>
<p>è¿™äº›æ–¹æ³•åˆ†åˆ«å¼•ç”¨äº† <code>java.lang.Class</code> ä¸ <code>java.lang.String</code>ï¼Œå› æ­¤å®ƒä»¬ä¹Ÿéœ€è¦å…ˆè¡ŒåŠ è½½ã€‚JVM é‡‡ç”¨â€œæŒ‰éœ€åŠ è½½â€çš„ç­–ç•¥ï¼Œä»…åœ¨ç±»è¢«å®é™…å¼•ç”¨æ—¶æ‰åŠ è½½ã€‚ä¸è¿‡ï¼Œä¸Šè¿°è¿™äº›å¯¹ JVM è‡³å…³é‡è¦çš„ç±»ä¼šè¢«â€œæŠ¢å…ˆåŠ è½½â€ã€‚åœ¨ä¸€ä¸ªç®€å•çš„ HelloWorld ç¨‹åºé‡Œï¼Œç”± <code>JNI_CreateJavaVM()</code> åˆå§‹åŒ–çš„å¼•å¯¼ç±»åŠ è½½å™¨è´Ÿè´£æ‰€æœ‰çš„ç±»åŠ è½½å·¥ä½œã€‚</p>
<h3 data-id="heading-11">3.5. ç±»é“¾æ¥</h3>
<p>ç±»é“¾æ¥å¯ä»¥æ‹†åˆ†ä¸ºéªŒè¯ï¼ˆVerificationï¼‰ã€å‡†å¤‡ï¼ˆPreparationï¼‰ä¸è§£æï¼ˆResolutionï¼‰ï¼Œå…¶å‘ç”Ÿé¡ºåºå¹¶ä¸å›ºå®šï¼šè§£æå¯èƒ½å‘ç”Ÿåœ¨éªŒè¯ä¹‹å‰ï¼Œä¹Ÿå¯èƒ½åœ¨ç±»åˆå§‹åŒ–ä¹‹åã€‚éªŒè¯ç¡®ä¿ç±»ç»“æ„æ­£ç¡®ï¼š</p>
<pre><code class="hljs language-text" lang="text">[class,init] Start class verification for: HelloWorld
[verification] Verifying class HelloWorld with new format
[verification] Verifying method HelloWorld.&lt;init&gt;()V
</code></pre>
<p>ä½äº CDS ä¸­çš„ç±»å·²ç»è¿‡éªŒè¯ï¼Œå› æ­¤ä¼šè·³è¿‡è¯¥æ­¥éª¤ï¼Œä»è€Œæå‡å¯åŠ¨æ€§èƒ½ã€‚è¿™æ˜¯ CDS çš„é‡è¦æ”¶ç›Šä¹‹ä¸€ã€‚åœ¨â€œå‡†å¤‡â€é˜¶æ®µï¼ŒJVM ä¼šç”¨é»˜è®¤å€¼åˆå§‹åŒ–é™æ€å­—æ®µï¼Œæ²¡æœ‰æ˜¾å¼åˆå§‹åŒ–å™¨çš„é™æ€å˜é‡ä¼šè‡ªåŠ¨è·å¾—é»˜è®¤å€¼ã€‚</p>
<p>åœ¨â€œè§£æâ€é˜¶æ®µï¼ŒJVM ä¼šè§£æå¸¸é‡æ± ï¼ˆConstant Poolï¼‰ä¸­çš„ç¬¦å·å¼•ç”¨ã€‚å¸¸é‡æ± ä¿å­˜äº†ç±»çš„æ‰€æœ‰ç¬¦å·å¼•ç”¨ï¼ŒJVM å¿…é¡»å…ˆå°†å…¶è§£æä¸ºçœŸå®çš„å†…å­˜å¼•ç”¨ï¼Œæ‰èƒ½æ‰§è¡Œç›¸å…³æŒ‡ä»¤ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>javap</code> æ¥è§‚å¯Ÿï¼š</p>
<pre><code class="hljs language-bash" lang="bash">javap -verbose HelloWorldCopy
</code></pre>
<p>è¿™å°†æ˜¾ç¤ºå¸¸é‡æ± çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-text" lang="text">Constant pool:
   #1 = Methodref          #2.#3          // java/lang/Object."&lt;init&gt;":()V
   #2 = Class              #4             // java/lang/Object
   #3 = NameAndType        #5:#6          // "&lt;init&gt;":()V
   #7 = Fieldref           #8.#9          // java/lang/System.out:Ljava/io/PrintStream;
  #13 = String             #14            // Hello World
</code></pre>
<p>æ„é€ å™¨çš„å­—èŠ‚ç å¹¶ä¸ç›´æ¥åŒ…å«åœ°å€ã€‚å®ƒå¼•ç”¨å¸¸é‡æ± ä¸­çš„ç¬¦å·é¡¹ï¼ˆä¾‹å¦‚ <code>#1</code>ï¼‰ï¼Œè¿™äº›æ¡ç›®æè¿°äº†æ–¹æ³•æˆ–å­—æ®µã€‚è§£æé˜¶æ®µä¼šå°†è¿™äº›ç¬¦å·é¡¹è½¬ä¸ºå¯æ‰§è¡Œçš„çœŸå®å†…å­˜å¼•ç”¨ï¼š</p>
<pre><code class="hljs language-text" lang="text">public HelloWorld();
  descriptor: ()V
  flags: (0x0001) ACC_PUBLIC
  Code:
    stack=1, locals=1, args_size=1
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."&lt;init&gt;":()V
       4: return
  LineNumberTable:
    line 2: 0
    line 4: 4
</code></pre>
<p>ç¬¬ 1 è¡Œçš„ <code>invokespecial</code> æŒ‡ä»¤å¼•ç”¨äº†å¸¸é‡æ± æ¡ç›® <code>#1</code>ï¼Œå…¶ä¸­åŒ…å«é“¾æ¥åˆ° <code>java.lang.Object</code> æ„é€ å™¨æ‰€éœ€çš„ä¿¡æ¯ã€‚<code>&lt;init&gt;</code> è¡¨ç¤ºè¿™æ˜¯ç”± <code>javac</code> ä¸ºæ¯ä¸ªæ„é€ å™¨è‡ªåŠ¨ç”Ÿæˆçš„ç‰¹æ®Šæ–¹æ³•ã€‚JVM é‡‡ç”¨â€œå»¶è¿Ÿè§£æâ€ï¼Œåªæœ‰åœ¨å°è¯•æ‰§è¡Œç±»ä¸­çš„æŸæ¡æŒ‡ä»¤æ—¶æ‰è§¦å‘è§£æï¼›å¹¶éæ‰€æœ‰å·²åŠ è½½çš„ç±»éƒ½ä¼šå®é™…æ‰§è¡Œå…¶æŒ‡ä»¤ã€‚</p>
<h3 data-id="heading-12">3.6. ç±»åˆå§‹åŒ–</h3>
<p>ç±»åˆå§‹åŒ–ä¼šä¸ºé™æ€å­—æ®µèµ‹å€¼å¹¶æ‰§è¡Œé™æ€åˆå§‹åŒ–å™¨ï¼Œè¿™ä¸æˆ‘ä»¬è°ƒç”¨æ„é€ å™¨çš„å®ä¾‹åˆå§‹åŒ–ä¸åŒã€‚è¯¥è¿‡ç¨‹ç”± <code>javac</code> è‡ªåŠ¨ç”Ÿæˆçš„ç‰¹æ®Šæ–¹æ³• <code>clinit</code> è´Ÿè´£ã€‚</p>
<h2 data-id="heading-13">4. ä¼˜åŒ– JVM å¯åŠ¨æ€§èƒ½</h2>
<p>å°½ç®¡ JVM çš„å¯åŠ¨å·²ç»å¾ˆé«˜æ•ˆï¼Œä½†ä»æœ‰æå‡ç©ºé—´ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æ–¹å‘ã€‚</p>
<h3 data-id="heading-14">4.1. ç±»åŠ è½½çš„å½±å“</h3>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç³»ç»Ÿçš„ <code>time</code> å·¥å…·æ¥åº¦é‡ JVM å¯åŠ¨ã€åŠ è½½ç±»ã€é“¾æ¥å¹¶æ‰§è¡Œè¿™ä¸ªç®€å•ç¨‹åºçš„æ€»è€—æ—¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">time java HelloWorldCopy
</code></pre>
<p>è¯¥å·¥å…·ä¼šæµ‹é‡ä» JVM è¿›ç¨‹å¯åŠ¨åˆ°é€€å‡ºçš„æŒ‚é’Ÿæ—¶é—´ï¼ŒåŒ…å«ç±»åŠ è½½ã€é“¾æ¥ã€JIT é¢„çƒ­ä¸ç¨‹åºæ‰§è¡Œâ€”â€”ä¸ä»…ä»…æ˜¯ç”¨æˆ·ä»£ç ã€‚å¯¹äº HelloWorldï¼ŒJVM åœ¨å¯åŠ¨æœŸé—´é€šå¸¸ä¼šåŠ è½½çº¦ 400ï½450 ä¸ªç±»ã€‚åœ¨ç°ä»£ç¡¬ä»¶ä¸Šï¼Œå³ä¾¿å¼€å¯å†—é•¿æ—¥å¿—ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¹Ÿå¤§çº¦åœ¨ 60 æ¯«ç§’å·¦å³å®Œæˆã€‚</p>
<h3 data-id="heading-15">4.2. Project Leyden</h3>
<p>Project Leyden çš„ç›®æ ‡æ˜¯å‡å°‘å¯åŠ¨æ—¶é—´ã€è¾¾åˆ°å³°å€¼æ€§èƒ½çš„æ—¶é—´ä»¥åŠå†…å­˜å ç”¨ã€‚JDK 24 å¼•å…¥äº† JEP 483ï¼šAhead-of-Time Class Loading and Linkingï¼ˆæå‰ç±»åŠ è½½ä¸é“¾æ¥ï¼‰ï¼Œå°†è¿™äº›æ“ä½œä»å¯åŠ¨æ—¶å‰ç§»è‡³ AOT é˜¶æ®µã€‚</p>
<p>è¯¥ç‰¹æ€§ä¼šåœ¨â€œè®­ç»ƒè¿è¡Œâ€ä¸­è®°å½• JVM çš„è¡Œä¸ºï¼Œå°†å…¶å­˜å…¥ç¼“å­˜ï¼Œå¹¶åœ¨åç»­å¯åŠ¨æ—¶ä»ç¼“å­˜åŠ è½½ã€‚è¿™å°†å–ä»£åŸå…ˆçš„ CDS æ¦‚å¿µï¼Œå¹¶æœ€ç»ˆä»¥ AOT çš„æ›´å¹¿æ³›èƒ½åŠ›æ¥ç»Ÿä¸€è¡¨è¾¾ã€‚</p>
<h3 data-id="heading-16">4.3. JVM å‚æ•°ä¸è°ƒä¼˜</h3>
<p>è™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡é™æ€å­—æ®µä¸åˆå§‹åŒ–å™¨åœ¨æŸäº›åœºæ™¯ä¸­ä¼˜åŒ–å¯åŠ¨æ€§èƒ½ï¼Œä½†åº”è°¨æ…å¯¹å¾…ã€‚ä¸ºäº†å°†è¡Œä¸ºæŒªåˆ°ç±»åŠ è½½é˜¶æ®µè€Œè¿›è¡Œé‡æ„ï¼Œå¾€å¾€å¾ˆéš¾è·å¾—å¯æµ‹é‡çš„æ”¶ç›Šâ€”â€”ç‰¹åˆ«æ˜¯è€ƒè™‘åˆ°è¿è¡Œæ—¶çš„å¤§éƒ¨åˆ†ä»£ç æ¥è‡ªä¾èµ–åº“è€Œéæˆ‘ä»¬è‡ªå·±çš„åº”ç”¨ã€‚</p>
<h2 data-id="heading-17">5. ç»“è®º</h2>
<p>æœ¬æ–‡ä»æ ¡éªŒç”¨æˆ·è¾“å…¥ã€æ£€æµ‹ç³»ç»Ÿèµ„æºï¼Œåˆ°ç±»çš„åŠ è½½ã€é“¾æ¥ä¸åˆå§‹åŒ–ï¼Œç³»ç»Ÿåœ°æ¢³ç†äº† JVM åœ¨å¯åŠ¨é˜¶æ®µç»å†çš„å¤æ‚æµç¨‹ã€‚å³ä¾¿æ˜¯ä¸€ä¸ªç®€å•çš„ HelloWorldï¼ŒJVM ä¹Ÿä¼šåœ¨æ‰§è¡Œä»£ç ä¹‹å‰æ„å»ºèµ·å®Œæ•´çš„è¿è¡Œç¯å¢ƒï¼ŒåŠ è½½æ•°ç™¾ä¸ªç±»ã€‚</p>
<p>éšç€ Project Leyden ç­‰æ”¹è¿›ï¼ˆä¾‹å¦‚ AOTï¼‰çš„</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è…¾è®¯å‘å¸ƒCodeBuddy Code CLIå¹³æ›¿Claude Code?]]></title>    <link>https://juejin.cn/post/7572714389943500852</link>    <guid>https://juejin.cn/post/7572714389943500852</guid>    <pubDate>2025-11-16T13:10:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572714389943500852" data-draft-id="7569206227357040675" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è…¾è®¯å‘å¸ƒCodeBuddy Code CLIå¹³æ›¿Claude Code?"/> <meta itemprop="keywords" content="CodeBuddy,AIGC"/> <meta itemprop="datePublished" content="2025-11-16T13:10:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æºªå½¼å²¸"/> <meta itemprop="url" content="https://juejin.cn/user/976781670357400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è…¾è®¯å‘å¸ƒCodeBuddy Code CLIå¹³æ›¿Claude Code?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976781670357400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æºªå½¼å²¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:10:45.000Z" title="Sun Nov 16 2025 13:10:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å‡ºäºClaude Codeçš„é™åˆ¶åŠ ä¸Šæœ¬äººå¹¶ä¸æƒ³èŠ±å¤ªå¤šæ—¶é—´åœ¨ç¯å¢ƒä¸ŠæŠ˜è…¾ï¼Œä¹‹å‰ä½¿ç”¨Claude Code CLIä½¿ç”¨äº† GLM 4.5ã€Kimi K2ã€DeepSeek 3.1ã€Qwen3 Coder ä»¥åŠä¸€äº›ä¸­è½¬ç«™ï¼Œæ•´ä½“æ¥è¯´èƒ½ç”¨ä½†æ˜¯æ€»æ„Ÿè§‰å·®ç‚¹ä»€ä¹ˆï¼Œç›´åˆ°å‰å‡ å¤©(2025å¹´9æœˆ9æ—¥)å¬è¯´è…¾è®¯å‘å¸ƒäº†CodeBuddy Code CLIå¯å¹³æ›¿Claude Codeï¼Œå›½å†…å¯æ— ç½‘ç»œé™åˆ¶ä½¿ç”¨ï¼Œæ€€ç€æ¿€åŠ¨çš„å¿ƒï¼Œé¢¤æŠ–çš„æ‰‹å‰æ¥ä½“éªŒä¸€ä¸‹ã€‚å¯¹AI Code CLIæ„Ÿå…´è¶£çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥çœ‹å¾€æœŸå†…å®¹ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247487588%26idx%3D1%26sn%3D7f6af21976e6a86ccf36851501542ffa%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247487588&amp;idx=1&amp;sn=7f6af21976e6a86ccf36851501542ffa&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç»ˆç«¯ç¦éŸ³ï¼ŒAIç»ˆç«¯ç¼–ç¨‹åŠ©æ‰‹Aider</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247492263%26idx%3D1%26sn%3D4e809f38100be358e31f298a78fd81ea%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247492263&amp;idx=1&amp;sn=4e809f38100be358e31f298a78fd81ea&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸‹ä¸€ä»£AIç»ˆç«¯ç¥å™¨Warp</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247492558%26idx%3D1%26sn%3De762047c93c4361f63744ec3c70a434f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247492558&amp;idx=1&amp;sn=e762047c93c4361f63744ec3c70a434f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Googleç™¾ä¸‡Tokenä¸Šä¸‹æ–‡Gemini CLIï¼Œç¦»AIè‡ªç”±æ›´è¿‘ä¸€æ­¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247492929%26idx%3D1%26sn%3D043e21a18f31f1c4c68bf4ee63e28685%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247492929&amp;idx=1&amp;sn=043e21a18f31f1c4c68bf4ee63e28685&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Claude Code CLIåˆä½“éªŒ</a></li>
</ul>
<h2 data-id="heading-1">å½“å‰ä½¿ç”¨ç‰ˆæœ¬</h2>
<p>codebuddy-code-cliï¼š1.1.0</p>
<h2 data-id="heading-2">ä¼˜åŠ¿</h2>
<ul>
<li>é™æ—¶å…¬æµ‹å…è´¹ï¼Œæ— éœ€é‚€è¯·ç </li>
<li>å¯ä»¥åˆ‡æ¢å¤šå®¶å‚å•†æ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨ Gemini Pro 2.5æ¨¡å‹ å’Œ Claude Sonnet 4æ¨¡å‹</li>
</ul>
<h2 data-id="heading-3">é™åˆ¶</h2>
<ul>
<li>æš‚ä¸æ”¯æŒ /agentsã€/hooksã€/ideåŠŸèƒ½</li>
<li>æš‚ä¸æ”¯æŒåå°ä»»åŠ¡</li>
<li>æš‚ä¸æ”¯æŒHTTP/SSEåè®®çš„MCP</li>
<li>å›½å†…ç‰ˆåªæœ‰DeepSeek 3.1æ¨¡å‹ï¼Œå›½é™…ç‰ˆæ‰èƒ½ä½¿ç”¨ Claude Sonnet 4 å’Œ Gemini-Pro 2.5 æ¨¡å‹</li>
<li>å›½é™…ç‰ˆä½¿ç”¨çš„æ˜¯CodeBuddy IDEå›½é™…ç‰ˆæƒç›Šï¼Œæ–°æ³¨å†Œç”¨æˆ·äº«æœ‰2å‘¨ä¸€æ¬¡æ€§500ç§¯åˆ†é¢åº¦ï¼Œè€ç”¨æˆ·æ¯å¤©50ç§¯åˆ†å…è´¹é¢åº¦</li>
</ul>
<h2 data-id="heading-4">ç®€ä»‹</h2>
<p>CodeBuddy Code CLI æ˜¯è…¾è®¯ 2025 å¹´ 9 æœˆæ¨å‡ºçš„ AI å‘½ä»¤è¡Œå·¥å…·ï¼Œé¢å‘ä¸“ä¸šå·¥ç¨‹å¸ˆï¼Œæ”¯æŒç”¨è‡ªç„¶è¯­è¨€é©±åŠ¨å¼€å‘å…¨æµç¨‹ã€‚å®ƒå…·å¤‡æ™ºèƒ½ä»£ç åº“åˆ†æã€å†…ç½®å®Œæ•´å·¥å…·é“¾ã€å¤šåœºæ™¯ä»»åŠ¡è‡ªåŠ¨åŒ–ç­‰ç‰¹æ€§ï¼Œå¯æ— ç¼èå…¥ç°æœ‰å¼€å‘æµç¨‹ï¼Œé€šè¿‡ npm ä¸€é”®å®‰è£…ï¼Œæ”¯æŒå¤šè´¦å·ç™»å½•åŠæ¨¡å‹åˆ‡æ¢ï¼Œä¸ CodeBuddy æ’ä»¶ã€IDE æ„æˆ AI ç¼–ç¨‹å·¥å…·çŸ©é˜µï¼Œä¸ºå¼€å‘è€…æä¾›é«˜æ•ˆè‡ªåŠ¨åŒ–çš„å¼€å‘ä½“éªŒã€‚</p>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcopilot.tencent.com%2Fcli" target="_blank" title="https://copilot.tencent.com/cli" ref="nofollow noopener noreferrer">copilot.tencent.com/cli</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/854ee72962024e32b64cff2429a93575~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=tStaTF5DRDn52688OpVLMnUt%2B48%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-5">å®‰è£…</h2>
<h3 data-id="heading-6">å‰ç½®æ¡ä»¶</h3>
<ul>
<li>NodeJS 18åŠä»¥ä¸Š</li>
</ul>
<h3 data-id="heading-7">å®‰è£…CodeBuddy Code CLI</h3>
<p>CodeBuddy Code CLIçš„å®‰è£…éå¸¸ç®€å•ï¼Œä¸€è¡Œå‘½ä»¤å³å¯å®Œæˆå®‰è£…ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-variable">$Â </span>npm install -g <span class="hljs-variable">@tencent</span>-ai/codebuddy-code
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œè¾“å…¥ codebuddy --version è¾“å‡ºä»¥ä¸‹å†…å®¹è¡¨æ˜å®‰è£…æˆåŠŸ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e25b06414f2466eb31285eddaa55848~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=IF7IY9z5GgbdXDIwjQm4m2ajyR0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-8">åŸºæœ¬ä½¿ç”¨</h2>
<h3 data-id="heading-9">å›½é™…ç‰ˆç§¯åˆ†æŸ¥è¯¢</h3>
<p>ç»æµ‹è¯•å‘ç°ï¼ŒCodeBuddy Code CLIå›½é™…ç‰ˆä½¿ç”¨çš„æ˜¯CodeBuddy IDEå›½é™…ç‰ˆé¢åº¦ï¼Œé€šè¿‡CodeBuddy IDEå›½é™…ç‰ˆå¯ä»¥æŸ¥è¯¢é¢åº¦æ¶ˆè€—æƒ…å†µã€‚</p>
<p>CodeBudy IDEå›½é™…ç‰ˆåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.codebuddy.ai%2Fprofile%2Fusage" target="_blank" title="https://www.codebuddy.ai/profile/usage" ref="nofollow noopener noreferrer">www.codebuddy.ai/profile/usaâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6da295f329e46108a939530fbe97448~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=5Cc7A1lZsUNuKDUsmCkrmQn2c08%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-10">ç™»å½•æˆæƒ</h3>
<p>CodeBuddy Code CLIå®‰è£…æˆåŠŸåï¼Œåœ¨å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥ codebuddy å³å¯å¯åŠ¨ï¼Œé¦–æ¬¡ä½¿ç”¨éœ€è¦å¯¹æ–‡ä»¶å¤¹è¿›è¡Œæˆæƒæ“ä½œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9e7534d2c184609b6f21465900bbe8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=IxhYDAgmlwA6jWNmOo8ZsZz89fI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆæƒæˆåŠŸåä½†æƒ³è¦æ­£å¸¸ä½¿ç”¨è¿˜éœ€è¦è¿›è¡Œç™»å½•æˆæƒæ“ä½œï¼ŒCodeBuddy Code CLIæä¾›äº† Google/Github å’Œ WeChat(å¾®ä¿¡ç™»å½•) 2ç§ç™»å½•æ–¹å¼ã€‚</p>
<h4 data-id="heading-11">1ï¼‰Google/Github</h4>
<p>CodeBuddy Code CLIé»˜è®¤ä¸º Google/Github æˆæƒç™»å½•ï¼Œç›´æ¥å›è½¦</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a55fc9b09e1498b81dd7feef337cf36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=DTm1qB3fOoCZt%2FSWS2kC4gSrB%2F4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>CodeBuddy Code CLIä¼šæ‰“å¼€æµè§ˆå™¨è¯·æ±‚CodeBuddy IDEæˆæƒç™»å½•ï¼ˆéš¾é“ä½¿ç”¨çš„CodeBuddy IDEå›½é™…ç‰ˆçš„æƒç›Šï¼Ÿåé¢å‘ç°ç¡®å®æ˜¯ğŸ¤£ï¼‰ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©ã€Googleã€‘</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/915a671e2df140eba3b4b97096b7326d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=XhliEIdXutLgNwu9K5zb2vfIbyg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆæƒç™»å½•åå¹¶ä¸ä¼šç›´æ¥ç™»å½•æˆåŠŸï¼Œè€Œæ˜¯ä¼šå‘gmailé‚®ç®±å‘é€é‚®ä»¶ï¼Œç‚¹å‡»æˆæƒé“¾æ¥ç™»å½•å³å¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2d4df4c99ec481382b1a855111a7bf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=9nvZM50RDb1r%2BgHg6ii6vq%2BE%2FCc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç™»å½•æˆåŠŸåå³å¯è¿›å…¥CodeBuddy Code CLIä¸»ç•Œé¢</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6d46abcf5a94608b80394fd18910082~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=3zz99BRmD%2FhoZ2zEYUt9M5hB9Rk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¾“å…¥ /model å¯ä»¥æŸ¥çœ‹æ¨¡å‹ä¿¡æ¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/061ee61328d14620aceebeb9a94d42ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=KSjKlVQA59KqnxtTh3ZpYrRkuvs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°å›½é™…ç‰ˆæä¾›çš„æ¨¡å‹è¿˜æ˜¯å¾ˆä¸°å¯Œçš„ï¼ŒåŒ…æ‹¬ Claude Sonnet 4.0ã€Gemini 2.5ç³»åˆ— ä»¥åŠ GPT 5ç³»åˆ—ï¼š</p>
<ul>
<li>Claude Sonnet 4.0
<ul>
<li>Claude-4.0-Sonnet</li>
</ul>
</li>
<li>Gemini 2.5ç³»åˆ—
<ul>
<li>Gemini-2.5-Flash</li>
<li>Gemini-2.5-Pro</li>
</ul>
</li>
<li>GPT 5ç³»åˆ—
<ul>
<li>GPT-5</li>
<li>GPT-5-mini</li>
<li>GPT-5-nano</li>
<li>GPT-4o-mini</li>
</ul>
</li>
</ul>
<h4 data-id="heading-12">2ï¼‰WeChat</h4>
<p>é€‰æ‹©ã€Login with WeChatã€‘ä½¿ç”¨å¾®ä¿¡ç™»å½•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f660ff86c414b339acd140e21da1493~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=5RaY5SqT5QDYplPJoJ3R%2BcPV1VA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¥ç€CodeBuddy Code CLIä¼šæ‰“å¼€æµè§ˆå™¨è¯·æ±‚å¾®ä¿¡æˆæƒç™»å½•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c8d9130c38c418da036aba10178c0e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=7YbpwIQsAO4XOZCxe%2BFdixNIrdA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç™»å½•æˆåŠŸåï¼Œå°±å¯ä»¥è¿›å…¥CodeBuddy Code CLIä¸»ç•Œé¢äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/930fca56cb484450ab8d9e78ccfcf98b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=B7TeT9Tu5rKmy%2B%2FLP4AXMUuSoxI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¾“å…¥ /model å¯ä»¥æŸ¥çœ‹æ¨¡å‹ä¿¡æ¯ï¼Œæä¾›äº† Default(æš‚æ—¶æœªçŸ¥æ¨¡å‹ä¿¡æ¯)ã€DeepSeek-V3.1ã€DeepSeek-V3 3ç§æ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05dba4b3c60d4134b0733a317abf530e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=zghDVAsUGsx2%2F%2Byyt3IdIx6xbOk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-13">CLIå‚æ•°</h3>
<p>åœ¨å‘½ä»¤è¡Œè¾“å…¥ codebuddy --help å¯ä»¥å¿«é€ŸæŸ¥çœ‹CodeBuddy Code CLIæä¾›çš„å‚æ•°ï¼ŒåŒ…å« å‘½ä»¤ å’Œ å¯é€‰å‚æ•°ã€‚å¯ä»¥çœ‹åˆ°å’ŒCodeBuddy Code CLIå¾ˆåƒå“ˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6686edebec0d4b9fa3b58a920f3cf60e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=LvR31JOvpInKhDqRvXJQDz4yV1o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>CLIå‚æ•°å‘½ä»¤ï¼š</p>
<ul>
<li>configï¼šç®¡ç†é…ç½®</li>
<li>mcpï¼šé…ç½®å’Œç®¡ç† MCP æœåŠ¡å™¨</li>
<li>migrate-installerï¼šä»å…¨å±€ npm å®‰è£…è¿ç§»åˆ°æœ¬åœ°å®‰è£…</li>
<li>doctorï¼šæ£€æŸ¥ CodeBuddy ä»£ç è‡ªåŠ¨æ›´æ–°å™¨çš„å¥åº·çŠ¶å†µ</li>
<li>updateï¼šæ£€æŸ¥æ›´æ–°å¹¶åœ¨æœ‰å¯ç”¨æ›´æ–°æ—¶è¿›è¡Œå®‰è£…</li>
<li>installï¼šå®‰è£… CodeBuddy ä»£ç åŸç”Ÿç‰ˆæœ¬ã€‚ä½¿ç”¨ [ç›®æ ‡] æŒ‡å®šç‰ˆæœ¬ï¼ˆç¨³å®šç‰ˆã€æœ€æ–°ç‰ˆæˆ–ç‰¹å®šç‰ˆæœ¬ï¼‰</li>
</ul>
<p>å¯é€‰å‚æ•°ï¼š</p>
<ul>
<li>--output-formatï¼šè¾“å‡ºæ ¼å¼ (ä»…ä¸ --print é…åˆä½¿ç”¨)</li>
<li>--input-formatï¼šè¾“å…¥æ ¼å¼ (ä»…ä¸ --print é…åˆä½¿ç”¨)</li>
<li>--continueï¼šç»§ç»­æœ€è¿‘çš„å¯¹è¯</li>
<li>--resumeï¼š æ¢å¤å¯¹è¯ï¼Œä¾›ä¼šè¯IDæˆ–äº¤äº’å¼é€‰æ‹©</li>
<li>--modelï¼šå½“å‰ä¼šè¯çš„æ¨¡å‹ã€‚æä¾›æ¨¡å‹åç§°</li>
<li>--dangerously-skip-permissionsï¼šç»•è¿‡æ‰€æœ‰æƒé™æ£€æŸ¥ã€‚ä»…æ¨èç”¨äºæ— ç½‘ç»œè®¿é—®çš„æ²™ç®±</li>
<li>--permission-modeï¼šæƒé™æ¨¡å¼: acceptEditsã€bypassPermissionsã€plan</li>
<li>--allowedToolsï¼šå…è®¸çš„å·¥å…·åˆ—è¡¨ (å¦‚ "Bash(git:*) Edit")</li>
<li>--disallowedToolsï¼šç¦æ­¢çš„å·¥å…·åˆ—è¡¨ (å¦‚ "Bash(git:*) Edit")</li>
<li>--add-dirï¼šå…è®¸å·¥å…·è®¿é—®çš„é¢å¤–ç›®å½•</li>
</ul>
<p>ä½¿ç”¨ codebuddy å†…å®¹ å¯ä»¥å¿«é€Ÿå¼€å¯ä¸€æ¬¡å¯¹è¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a6056df68f141e7addfc65c4466f8db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=p4KMIqI8Yly44nDOG7eh6dUVK%2FY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥ codebuddy mcp list å¯ä»¥å¿«é€ŸæŸ¥çœ‹mcpåˆ—è¡¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0cb8aa7ba224d74a2b08d38d415a09c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=l%2FpcynpYvuimSLE26j0usrEtdSk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½¿ç”¨ codebuddy --dangerously-skip-permissions å¼€å¯è‡ªåŠ¨å…è®¸æ¨¡å¼ï¼Œç±»ä¼¼Cursorä¸­çš„ auto-run æ¨¡å¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dce03efcbdd34ab583b2594cd30c4815~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=vYfKtCGpQLmBThV3TLD227CNjE8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½¿ç”¨ codebuddy -c ç»§ç»­ä¸Šä¸€æ¬¡ä¼šè¯ï¼Œä½¿ç”¨ codebuddy -r æ¢å¤æŒ‡å®šä¼šè¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b8005faf8274bcdb48f2b3381806881~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=a9TIY%2BF2l3FN%2FGG5FwyPqrvMOq8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-14">äº¤äº’æ¨¡å¼åŠå¿«æ·é”®åˆ—è¡¨</h3>
<p>åœ¨åœ¨CodeBuddy Code CLIäº¤äº’å¼å‘½ä»¤è¾“å…¥ /helpï¼Œå¯ä»¥çœ‹åˆ°CodeBuddy Code CLIæä¾›æ‰€æœ‰äº¤äº’æŒ‡ä»¤å’Œå¿«æ·é”®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64ca6f3730bf4ea1ab235afe4305a223~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=u5blDquQkM7yvualhND6VAOb%2BP4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>äº¤äº’å‘½ä»¤è¡Œåˆ—è¡¨ï¼š</p>
<ul>
<li>/add-dirï¼šæ·»åŠ æ–°çš„å·¥ä½œç›®å½•</li>
<li>/agentsï¼šç®¡ç†ä»£ç†é…ç½®</li>
<li>/clearï¼šæ¸…é™¤å¯¹è¯å†å²å¹¶é‡Šæ”¾ä¸Šä¸‹æ–‡</li>
<li>/compactï¼šæ¸…é™¤å¯¹è¯å†å²ï¼Œä½†åœ¨ä¸Šä¸‹æ–‡ä¸­ä¿ç•™æ‘˜è¦ã€‚</li>
<li>/configï¼šæ‰“å¼€é…ç½®é¢æ¿</li>
<li>/costï¼šæ˜¾ç¤ºå½“å‰ä¼šè¯çš„æ€»è´¹ç”¨å’ŒæŒç»­æ—¶é—´</li>
<li>/doctorï¼šè¯Šæ–­å¹¶éªŒè¯æ‚¨çš„ CodeBuddy å®‰è£…å’Œè®¾ç½®</li>
<li>/exitï¼šé€€å‡º CodeBuddy</li>
<li>/exportï¼šå°†å½“å‰å¯¹è¯å¯¼å‡ºåˆ°æ–‡ä»¶æˆ–å‰ªè´´æ¿</li>
<li>/helpï¼šæ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯å’Œå¯ç”¨å‘½ä»¤</li>
<li>/hooksï¼šç®¡ç†å·¥å…·äº‹ä»¶çš„é’©å­é…ç½®</li>
<li>/ideï¼šç®¡ç† IDE é›†æˆå¹¶æ˜¾ç¤ºçŠ¶æ€</li>
<li>/initï¼šåˆ†æä½ çš„ä»£ç åº“â€¦â€¦</li>
<li>/install-github-appï¼šä¸ºä»“åº“è®¾ç½® ${NAME} GitHub Actions</li>
<li>/loginï¼šåˆ‡æ¢è…¾è®¯äº‘ CodeBuddy è´¦æˆ·</li>
<li>/logoutï¼šä»ä½ çš„è…¾è®¯äº‘ CodeBuddy è´¦æˆ·ç™»å‡º</li>
<li>/mcpï¼šç®¡ç† MCP æœåŠ¡å™¨</li>
<li>/memoryï¼šç¼–è¾‘ CodeBuddy å†…å­˜æ–‡ä»¶</li>
<li>/migrate-installerï¼šä»å…¨å±€ npm å®‰è£…è¿ç§»åˆ°æœ¬åœ°å®‰è£…</li>
<li>/modelï¼šä¸º CodeBuddy è®¾ç½® AI æ¨¡å‹</li>
<li>/permissionsï¼šç®¡ç†å…è®¸å’Œæ‹’ç»å·¥å…·æƒé™è§„åˆ™</li>
<li>/pr-commentsï¼šä» GitHub æ‹‰å–è¯·æ±‚è·å–è¯„è®º</li>
<li>/release-notesï¼šæŸ¥çœ‹å‘å¸ƒè¯´æ˜</li>
<li>/resumeï¼šæ¢å¤å¯¹è¯</li>
<li>/reviewï¼šå®¡æ ¸æ‹‰å–è¯·æ±‚</li>
<li>/statusï¼šæ˜¾ç¤º CodeBuddy çŠ¶æ€ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬ã€æ¨¡å‹ã€è´¦æˆ·ã€API è¿æ¥æ€§å’Œå·¥å…·çŠ¶æ€</li>
<li>/terminal-setupï¼šä¸ºæ¢è¡Œå®‰è£… Shift+Enter é”®ç»‘å®š</li>
<li>/upgradeï¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å‡çº§é¡µé¢</li>
<li>/vimï¼šåœ¨ Vim ç¼–è¾‘æ¨¡å¼å’Œæ™®é€šç¼–è¾‘æ¨¡å¼ä¹‹é—´åˆ‡æ¢</li>
<li>/workspaceï¼šåˆ‡æ¢åˆ°ä¸åŒçš„å·¥ä½œæ–‡ä»¶å¤¹ï¼ˆClaude Code CLIä¸­æ²¡æœ‰çš„ï¼‰</li>
</ul>
<p>å¿«æ·é”®ï¼š</p>
<ul>
<li>Ctrl+Cï¼šå–æ¶ˆå½“å‰è¾“å…¥æˆ–ç”Ÿæˆï¼ˆè¿æŒ‰ä¸¤æ¬¡é€€å‡ºCodeBuddyï¼‰</li>
<li>Ctrl+Dï¼šé€€å‡º CodeBuddy Code ä¼šè¯ï¼ˆè¿æŒ‰ä¸¤æ¬¡é€€å‡ºCodeBuddyï¼‰</li>
<li>Ctrl+Lï¼šæ¸…é™¤ç»ˆç«¯å±å¹•</li>
<li>ä¸Š/ä¸‹ç®­å¤´ï¼šå¯¼èˆªå‘½ä»¤å†å²</li>
<li>Ctrl+Jï¼šå¤šè¡Œçš„æ¢è¡Œå­—ç¬¦</li>
<li>Shift+Tabï¼šåˆ‡æ¢å¯¹è¯æ¨¡å¼</li>
<li>Tabï¼šè‡ªåŠ¨è¡¥å…¨æŒ‡ä»¤</li>
<li>ESC+ESCï¼šåˆ‡æ¢å†å²æ¶ˆæ¯</li>
</ul>
<h3 data-id="heading-15">æ‰§è¡ŒShellæŒ‡ä»¤</h3>
<p>é»˜è®¤CodeBuddy Code CLIæ‰€æœ‰çš„è¾“å…¥éƒ½è¢«è§†ä¸ºæç¤ºè¯æŒ‡ä»¤ï¼Œå¦‚æœéœ€è¦æ‰§è¡ŒshellæŒ‡ä»¤å¦‚ lsã€grep ç­‰éœ€è¦åœ¨æŒ‡ä»¤å‰åŠ  !ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ !åä¼šè¿›å…¥Bashæ¨¡å¼ï¼Œæ¥ç€å°±å¯ä»¥è¾“å…¥æŒ‡ä»¤æ‰§è¡Œäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcd58f9d1a2443c6b1754931952b0a82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=FKwP7e1A1j%2FYiDXRQqTww1m%2BlZs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†ä¹Ÿä¸ç”¨æ–°å¼€ç»ˆç«¯é¡µç­¾æˆ–ç»ˆæ­¢å½“å‰CLIæ¥æ‰§è¡ŒShellæŒ‡ä»¤äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae61296cd575432fa7c2e072ae9de14a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=J483Z3Z7iJywRzxRLoKjVT6WCwA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>éœ€è¦å–æ¶ˆBashæ¨¡å¼æ—¶ï¼Œä½¿ç”¨ã€ESCã€‘é”®å°±å¯ä»¥é€€å‡ºBashæ¨¡å¼</p>
<h3 data-id="heading-16">é…ç½®æ–‡ä»¶</h3>
<blockquote>
<p>æš‚ä¸æ”¯æŒ agents å’Œ hooks é…ç½®</p>
</blockquote>
<p>CodeBuddy Code CLIæä¾›äº† settings.jsonã€CodeBuddy.mdã€.mcp.json ç­‰é…ç½®æ–‡ä»¶</p>
<h4 data-id="heading-17">settings.json</h4>
<p>settings.json æ–‡ä»¶æ˜¯é€šè¿‡åˆ†å±‚è®¾ç½®é…ç½®çš„å®˜æ–¹æœºåˆ¶ï¼Œæä¾›äº† å…¨å±€ç”¨æˆ·é…ç½® å’Œ é¡¹ç›®é…ç½® 2ç§é…ç½®æ–¹å¼ï¼š</p>
<ul>
<li>å…¨å±€ç”¨æˆ·é…ç½®ï¼šé…ç½®æ–‡ä»¶è·¯å¾„ï¼š ~/.codebuddy/settings.jsonï¼Œä¸ä¼šè¢«Gitè®°å½•ï¼Œé€‚ç”¨äºæ‰€æœ‰é¡¹ç›®</li>
<li>é¡¹ç›®é…ç½®ï¼šé…ç½®æ–‡ä»¶è·¯å¾„ï¼šé¡¹ç›®æ ¹ç›®å½•/.codebuddy/settings.json å¯è¢«Gitè®°å½•ä¸å›¢é˜Ÿå…±äº«ï¼Œåªé’ˆå¯¹å½“å‰é¡¹ç›®ç”Ÿæ•ˆ</li>
<li>æœ¬åœ°é…ç½®ï¼šé…ç½®æ–‡ä»¶è·¯å¾„ï¼šé¡¹ç›®æ ¹ç›®å½•/.codebuddy/settings.local.jsonï¼Œä¸ä¼šè¢«Gitè®°å½• (æ·»åŠ åˆ° .gitignore)ï¼Œé€‚ç”¨äºå½“å‰ä¼šè¯æˆ–å·¥ä½œåŒº</li>
</ul>
<p>ç”Ÿæ•ˆçš„ä¼˜å…ˆçº§ä¸ºï¼šlocal &gt; project &gt; user</p>
<h4 data-id="heading-18">è®°å¿†æ–‡ä»¶</h4>
<p>CodeBuddy Code CLIæä¾›è®°å¿†æ–‡ä»¶åŠŸèƒ½ï¼Œæ”¯æŒ å…¨å±€ç”¨æˆ·é…ç½® å’Œ é¡¹ç›®é…ç½® 2ç§é…ç½®æ–¹å¼ï¼š</p>
<ul>
<li>å…¨å±€ç”¨æˆ·é…ç½®ï¼šé…ç½®æ–‡ä»¶è·¯å¾„ä¸ºï¼š~/.codebuddy/CODEBUDDY.mdï¼Œä¸ºæ‰€æœ‰å­˜æ”¾ä¸ä¸ªäººé•¿æœŸåå¥½å’Œä¹ æƒ¯ç›¸å…³çš„ä¿¡æ¯</li>
<li>é¡¹ç›®é…ç½®ï¼šè·¯å¾„ä¸ºï¼šå·¥ä½œåŒºæ ¹ç›®å½•/CODEBUDDY.mdï¼Œå­˜æ”¾ä¸å½“å‰é¡¹ç›®å…±äº«çš„é€šç”¨ä¿¡æ¯</li>
</ul>
<p>å½“ä½ è¿è¡Œ /init å‘½ä»¤æ—¶ï¼Œcodebuddy ä¼šè‡ªåŠ¨ä¸ºä½ ç”Ÿæˆä¸€ä¸ª CODEBUDDY.md</p>
<h4 data-id="heading-19">MCPé…ç½®</h4>
<p>CodeBuddy Code CLIæ”¯æŒä¸åŒä½œç”¨åŸŸçš„MCPæœåŠ¡é…ç½®ï¼Œä¸»è¦æœ‰ å…¨å±€ç”¨æˆ·é…ç½®ã€é¡¹ç›®é…ç½® å’Œ æœ¬åœ°é…ç½®ï¼š</p>
<ul>
<li>å…¨å±€ç”¨æˆ·é…ç½®ï¼šå­˜æ”¾åœ¨ ~/.codebuddy.jsonæ–‡ä»¶çš„ mcpServers é…ç½®ä¸‹ï¼Œä¸ä¼šè¢«Gitè®°å½•ï¼Œé€‚ç”¨äºæ‰€æœ‰é¡¹ç›®</li>
<li>é¡¹ç›®é…ç½®ï¼šå­˜æ”¾åœ¨ /é¡¹ç›®æ ¹ç›®å½•/.mcp.json æ–‡ä»¶ï¼Œå¯è¢«Gitè®°å½•ä¸å›¢é˜Ÿå…±äº«</li>
<li>æœ¬åœ°é…ç½®ï¼šå­˜æ”¾åœ¨ ~/.codebuddy.json æ–‡ä»¶çš„ projects é…ç½®ä¸‹ï¼Œä¸ä¼šè¢«Gitè®°å½•ï¼Œé€‚ç”¨äºå½“å‰ä¼šè¯æˆ–å·¥ä½œåŒº</li>
</ul>
<p>ç”Ÿæ•ˆçš„ä¼˜å…ˆçº§ä¸ºï¼šlocal &gt; project &gt; user</p>
<h4 data-id="heading-20">Commands</h4>
<p>CodeBuddy Code CLIæä¾›è‡ªå®šä¹‰å‘½ä»¤ï¼Œé€šè¿‡åœ¨ç‰¹å®šç›®å½•ä¸­åˆ›å»º .md (Markdown) æ–‡ä»¶æ¥å®šä¹‰ï¼Œæ”¯æŒ å…¨å±€ç”¨æˆ·å‘½ä»¤ å’Œ é¡¹ç›®çº§å‘½ä»¤ 2ç§é…ç½®æ–¹å¼ï¼š</p>
<ul>
<li>å…¨å±€ç”¨æˆ·å‘½ä»¤ï¼šåœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹åˆ›å»º ~/.codebuddy/commands/ æ–‡ä»¶å¤¹ï¼Œé’ˆå¯¹æ‰€æœ‰é¡¹ç›®ç”Ÿæ•ˆã€‚</li>
<li>é¡¹ç›®çº§å‘½ä»¤ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º .codebuddy/commands/ æ–‡ä»¶å¤¹ã€‚é’ˆå¯¹ç‰¹å®šé¡¹ç›®ç”Ÿæ•ˆã€‚</li>
</ul>
<p>åˆ›å»ºä¸€ä¸ªå‘½ä»¤ï¼Œåªéœ€åœ¨ä¸Šè¿°ä»»ä¸€ç›®å½•ä¸­æ·»åŠ ä¸€ä¸ª .md æ–‡ä»¶å³å¯ã€‚ä¾‹å¦‚test.md æ–‡ä»¶ä¼šè‡ªåŠ¨æ³¨å†Œä¸º /test å‘½ä»¤ã€‚</p>
<h3 data-id="heading-21">Chatå¯¹è¯</h3>
<p>å¯åŠ¨CodeBuddy Code CLIåç•Œé¢å¦‚ä¸‹ï¼Œæä¾›äº†å¯¹è¯æ¨¡å¼ã€å·¥ä½œåŒºå’Œtokensæ¶ˆè€—ä¿¡æ¯å±•ç¤º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4547334685249e5a211bd8f989574e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=xI9%2FSb0odZ6spSdMkoORMEtDJWk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¾“å…¥å†…å®¹å›è½¦å³å¯æ¨¡å‹è¿›è¡Œå¯¹è¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f549d18f23a4950acb70f08609a711e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=lXQW9KCJGjN9qlnTSORVnjkOW8w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>CodeBuddy Code CLIæ”¯æŒæ·»åŠ æ–‡ä»¶ä¸Šä¸‹æ–‡ï¼Œé€šè¿‡ @ å‘½ä»¤æŸ¥çœ‹å½“å‰å·¥ä½œåŒºæ–‡ä»¶åˆ—è¡¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f749ce2daf64ecaad39d99f3441fd24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=%2BFs%2F7XzVcqdc2HQUhPy7k9POkts%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€‰æ‹©æ–‡ä»¶ï¼Œå¯ä»¥å°†æ–‡ä»¶æ·»åŠ åˆ°èŠå¤©ä¸Šä¸‹æ–‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/708eeb86a0e44ca5ada4d817bce3dccb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=cbC%2FiU14%2BWJY3gLs%2FhWnsvU2EOg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>CodeBuddy Code CLIç›®å‰å°šä¸æ”¯æŒäºŒçº§æ–‡ä»¶(Claude Code CLIæ”¯æŒäºŒçº§æ–‡ä»¶)</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88e82d55b1ab487b969b5cb2db722e40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=pa0W%2FGuOYfq3JZxiqazO25SX0ck%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é™¤äº†æ–‡ä»¶ä¸Šä¸‹æ–‡ï¼ŒCodeBuddy Code CLIè¿˜æ”¯æŒé€šè¿‡å¿«æ·é”®ã€Ctrl/Cmd+Vã€‘ä»å‰ªåˆ‡æ¿ç²˜è´´å›¾ç‰‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82a3d18d13be45cb8b5b0e45f6098edc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=RcdWkNBCVukTB9Sj5IxoiRgqdtY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8244ca767f17461f8bdce1691498e4c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=6scC9MpgY3%2FpXsqh0r0uSBUmzjA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-22">å¯¹è¯æ¨¡å¼</h3>
<p>CodeBuddy Code CLIæä¾›äº† æ‰‹åŠ¨æ¨¡å¼ã€è®¡åˆ’æ¨¡å¼ å’Œ è‡ªåŠ¨æ¥æ”¶æ¨¡å¼</p>
<ul>
<li>æ‰‹åŠ¨æ¨¡å¼ï¼šè¯¢é—®æƒé™ï¼Œéœ€æ‰‹åŠ¨æ‰¹å‡†æƒé™ï¼Œé»˜è®¤æ¨¡å¼</li>
<li>è®¡åˆ’æ¨¡å¼ï¼šé—®ç­”åˆ¶å®šè®¡åˆ’ï¼Œä¸ä¼šæ‰§è¡Œæ–‡ä»¶æ“ä½œ</li>
<li>è‡ªåŠ¨æ¥æ”¶æ¨¡å¼ï¼šè‡ªåŠ¨æ‰¹å‡†æƒé™</li>
</ul>
<h4 data-id="heading-23">æ‰‹åŠ¨æ¨¡å¼</h4>
<p>åœ¨CodeBuddy Code CLIä¸­é»˜è®¤å°±æ˜¯æ‰‹åŠ¨æ¨¡å¼ï¼Œå½“æˆ‘ä»¬éœ€è¦æ‰§è¡Œshellå‘½ä»¤æˆ–è€…å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œæ—¶ï¼Œè¯¥æ¨¡å¼éƒ½ä¼šè¯¢é—®æƒé™</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1187187c37e04a4cb54e24113ddff14b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=reim9djD6FPPoBXHOZFxB%2BXpXHU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å½“æˆ‘ä»¬é€‰æ‹©å…è®¸æ—¶ï¼ŒCodeBuddy Code CLIæ‰ä¼šçœŸæ­£æ‰§è¡Œä»»åŠ¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46428b9d5a8a49988ff044b0a08425d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=ToVYqzlUY%2FSCbwPez7O8v6NkYlA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-24">ç»•è¿‡æƒé™æ¨¡å¼</h4>
<p>ä½¿ç”¨å¿«æ·é”® Shift+Tab åˆ‡æ¢åˆ°ç»•è¿‡æƒé™æ¨¡å¼ï¼ˆbypass permissions onï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/665c7ddde49b4faca255950b4595fa59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=%2FR%2FcOdP7Kqo%2FZzATiHI28YAAkFY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¾“å…¥æç¤ºè¯åï¼ŒCodeBuddy Code CLIä¼šç›´æ¥æ“ä½œä¸ä¼šè¿›è¡Œä»»ä½•æƒé™æç¤º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1ffa145795e49c587a3355cc59eaf34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=Y%2BbM0AhURu2o4mZbi%2FvQwR0RJbI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ä»¬ä½¿ç”¨Bashå‘½ä»¤ chmod 444 index.py å°† index.py æ–‡ä»¶æƒé™æ”¹ä¸ºåªè¯»æ¨¡å¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c19dd3e3063e4bd99d6908da050fd033~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=zwHcfnaQUOMQev4o%2FPwu0pSM35c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†æ¬¡æ‰§è¡Œæ–‡ä»¶ä¿®æ”¹å‘ç°å¥½åƒå¹¶æ²¡æœ‰ä»€ä¹ˆä½œç”¨ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯ä½¿ç”¨çš„é—®é¢˜ï¼Œä¹Ÿä¸æ¸…æ¥šè¯¥æ¨¡å¼å’Œè‡ªåŠ¨æ¥å—ç¼–è¾‘æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8791598fe48f4ae3be68b5b393d4fe18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=MNMe0RXkxZIBRFhV55QKjYOkFtw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-25">è‡ªåŠ¨æ¥å—ç¼–è¾‘æ¨¡å¼</h4>
<blockquote>
<p>å’ŒÂ --dangerously-skip-permissionsÂ æ¨¡å¼ç›¸æ¯”ï¼Œè‡ªåŠ¨æ¥å—æ¨¡å¼å®‰å…¨æ€§æ›´é«˜ï¼Œè‡ªåŠ¨æ¥å—æ¨¡å¼éå…¨å±€ç”Ÿæ•ˆä¸”ä»…é™äºæ–‡ä»¶ç¼–è¾‘</p>
</blockquote>
<p>ä½¿ç”¨å¿«æ·é”® Shift+Tab åˆ‡æ¢åˆ°è‡ªåŠ¨æ¥å—ç¼–è¾‘æ¨¡å¼ï¼ˆaccept edits onï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06816463fb134a85a6958ec4c2f6a1e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=4S%2FPyck6rsQRy511dCo6UK9ffQE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¼€å¯æ­¤åŠŸèƒ½åï¼ŒCodeBuddy Code CLIä¼š è‡ªåŠ¨åˆ›å»ºã€ç¼–è¾‘ æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç¡®è®¤</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e406743099ef429b8e8300e1316a33d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=49VCb%2FbOzmjVJEsoxGDiPBjTFmA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ä»¬ä½¿ç”¨Bashå‘½ä»¤ chmod 444 index.py å°† index.py æ–‡ä»¶æƒé™æ”¹ä¸ºåªè¯»æ¨¡å¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9405c6c1c123423facf987f1050e1cd3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=jApA2wkQKOVPxqlwOXy2anyFSKQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°æ¥å—ç¼–è¾‘æ¨¡å¼ä¹Ÿæ˜¯æ— æ³•ç›´æ¥è¿›è¡Œæ–‡ä»¶æ“ä½œçš„ï¼Œä½†æ˜¯ä¼šç»™å‡ºæƒé™æç¤º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3abcc6ea2ed040bba0748df01b966a58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=MttXQHg7urQhfSv0JHJ%2Bm3d9XsY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-26">è‡ªå®šä¹‰æ–œæ å‘½ä»¤</h3>
<blockquote>
<p>ä¸æ”¯æŒè‡ªå®šä¹‰åµŒå¥—å‘½ä»¤</p>
</blockquote>
<p>è¿™æ˜¯CodeBuddy Code CLIæä¾›çš„å¼ºå¤§åŠŸèƒ½ä¹‹ä¸€ã€‚å¯ä»¥å°†å¸¸ç”¨çš„æç¤º(Prompts)ã€è„šæœ¬å’Œå·¥ä½œæµå°è£…æˆå¯å¤ç”¨çš„è‡ªå®šä¹‰å‘½ä»¤ï¼Œä»è€Œæå¤§åœ°æå‡æ•ˆç‡ã€‚</p>
<p>é¦–å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º .codebuddy/commands æ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª project-folder.md æ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹æç¤ºè¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a939f0844d1846728cd6d47f15afddcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=SVSvClJeCZrTG1WFo%2FH%2B%2FdNMNuA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¿å­˜åï¼Œé‡å¯CodeBuddy Code CLIï¼Œè¾“å…¥ /project å³å¯çœ‹åˆ°åˆšåˆšè‡ªå®šä¹‰çš„å‘½ä»¤</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e82e699626f8491cad116191c9794860~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=ecNviw9864%2FDeu2RAxb7e5sg9JY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è°ƒç”¨è‡ªå®šä¹‰å‘½ä»¤å°±ä¼šæ‰§è¡Œæç¤ºè¯ä»»åŠ¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3209782c673742ffbd174b47b47ad8b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=asElP%2F7werIUXKoWebuEGYQcNYI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>CodeBuddy Code CLIè‡ªå®šä¹‰å‘½ä»¤ä¹Ÿæ”¯æŒè‡ªå®šä¹‰åŠ¨æ€å‚æ•°ï¼Œåœ¨æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª greet.md æ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹æç¤ºè¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8da9c6d09b645748ef79868e6a9ce7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=jXmfQ9OglC9jokZkXkHXcc4uScQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¿å­˜åï¼Œé‡å¯CodeBuddy Code CLIï¼Œè¾“å…¥ /greet ä½¿ç”¨ã€Tabã€‘è¡¥å…¨æŒ‡ä»¤è¾“å…¥å‚æ•°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec48c3ac1871481ca699bc0353d2f276~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=Be4EyADfS%2FR0%2BnIazRJGbm1f0K4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ç»“æœæ˜¯æŒ‰ç…§æˆ‘ä»¬è‡ªå®šä¹‰å‘½ä»¤å†…å®¹è¾“å‡ºçš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35180697577441d0beed192aeaa384e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=04PMF2WViav%2FCJKnzsUbjvEProU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ä»¬å°†ä¸Šé¢åŠ¨æ€å‚æ•°çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mtext>æ¢æˆ</mtext></mrow><annotation encoding="application/x-tex">1 æ¢æˆ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">1</span><span class="mord cjk_fallback">æ¢æˆ</span></span></span></span></span>ARGUMENTS ä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœ(å’ŒClaude Code CLIä¿æŒä¸€è‡´çš„)</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/320e1d0594234226b707008be1ce46dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=8iuW4LfoBPIF1JwnAjt9irW1rW8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-27">è®°å¿†æ–‡ä»¶</h3>
<p>é¦–å…ˆåˆ›å»º ~/.codebuddy/CODEBUDDY.md å’Œ é¡¹ç›®æ ¹ç›®å½•/CODEBUDDY.md ä¸¤ä¸ªè®°å¿†æ–‡ä»¶ï¼Œåœ¨ ~/.codebuddy/CODEBUDDY.md è¾“å…¥æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">all</span>Â response in ä¸­æ–‡
</code></pre>
<p>åœ¨ é¡¹ç›®æ ¹ç›®å½•/CODEBUDDY.md è¾“å…¥æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">all</span>Â response in English
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ç›®å‰è®°å¿†æ–‡ä»¶è¿˜åªæ˜¯æ”¯æŒé¡¹ç›®è®°å¿†æ–‡ä»¶ï¼Œå…¨å±€ç”¨æˆ·è®°å¿†æ–‡ä»¶è¿˜æ— æ³•è¯†åˆ«</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddc3df6975d844929ffe17e1b0581bef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=N%2BgSy%2FWZSbd0qVThMfqiTRlYq%2FU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯¢é—®CodeBuddy Code CLIï¼Œå®ƒç»™æˆ‘çš„å›å¤æ˜¯è¿™æ ·çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bc4a0eca44c48d387c11a4b2dd06acc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=DJ2v8ZGKMNNcben5taXDtDO7gMM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨CodeBuddy Code CLIç”Ÿæˆè®°å¿†æ–‡ä»¶ï¼Œåœ¨äº¤äº’å¼å‘½ä»¤è¾“å…¥ /init</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d683222d485c4aa2a7deb5bef31ce6a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=tYWb6%2BQNwKSkPGiXvKE3xKKzUYM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½¿ç”¨ # å‘½ä»¤å¯ä»¥å¿«é€Ÿæ·»åŠ æç¤ºè¯åˆ°è®°å¿†æ–‡ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2fc89eb00d34ef09f4911bc5edf6798~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=E3DhY25f8ldQvft4%2BDC2Xx%2FDJ5I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ·»åŠ å®Œæˆï¼Œé¡¹ç›®è®°å¿†æ–‡ä»¶ä¸­ä¼šæ–°å¢ä¸€æ¡åˆšåˆšæ·»åŠ åˆ°æç¤ºè¯è®°å¿†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/765b90b36535491abd402708947e1c92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=cH19Q%2BqPmx%2BIQNAZB%2BLP9aQNJoc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-28">Hooks</h3>
<p>CodeBuddy Code CLIæš‚æœªæ”¯æŒè¯¥åŠŸèƒ½</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2239deec8fd4795a4d1b526f38e5599~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=C92Hpaw7DhmwzrZz2TvRQh1pOKk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-29">Sub Agents</h3>
<p>CodeBuddy Code CLIæš‚æœªæ”¯æŒè¯¥åŠŸèƒ½</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87dce2bbd57943b6a14dbbeacca5e83b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=Lfn5TuzepBMJgiTm5Wj5vsjLTgE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-30">MCPæœåŠ¡</h3>
<p>CodeBuddy Code CLIæä¾›äº†MCPçš„ å‘½ä»¤è¡Œ å’Œ JSON 2ç§é…ç½®å½¢å¼</p>
<h4 data-id="heading-31">æ–¹å¼ä¸€ï¼šå‘½ä»¤è¡Œé…ç½®(æ¨è)</h4>
<p>é¦–å…ˆé€€å‡ºCodeBuddy Code CLIäº¤äº’æ¨¡å¼ï¼Œä½¿ç”¨mcpå‘½ä»¤æ·»åŠ MCPè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># åŸºæœ¬è¯­æ³•</span>
$ codebuddy mcpÂ <span class="hljs-keyword">add</span>Â &lt;MCP Name&gt; &lt;MCP Command&gt; [args...]
</code></pre>
<p>ä»¥context7 MCPä¸ºä¾‹ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-variable">$Â </span>codebuddy mcp add context7 -- npx -y <span class="hljs-variable">@upstash</span>/context7-mcp
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b57d21425504fe2b52f0b18b8f5324c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=gsIIViXQO3Fqh4Dv94LRaVnTaAE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½¿ç”¨ codebuddy mcp list æŸ¥çœ‹mcpåˆ—è¡¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e206da0db2834f249bf37c4cf1e6ddf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=SytXjFwBso5nYtewV2pY43SocZw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥æ·»åŠ Httpç±»å‹çš„MCPæœåŠ¡ï¼ˆæ·»åŠ æ–¹å¼å’ŒClaude Code CLIäº†ä¿æŒä¸€è‡´ï¼‰</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">$</span><span class="bash">Â codebuddy mcp add --transport http context7 https://mcp.context7.com/mcp</span>
</code></pre>
<h4 data-id="heading-32">æ–¹å¼äºŒï¼šJSONæ ¼å¼é…ç½®</h4>
<p>åœ¨CodeBuddy Code CLIä¸­ä¹Ÿæ”¯æŒJSONæ ¼å¼é…ç½®ï¼Œè¿™é‡Œä»¥é¡¹ç›®é…ç½®ä¸ºä¾‹ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º .mcp.json æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
Â Â <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â  Â Â <span class="hljs-attr">"context7"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â  Â  Â Â <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
Â  Â  Â Â <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"https://mcp.context7.com/mcp"</span><span class="hljs-punctuation">,</span>
Â  Â  Â Â <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"http"</span>
Â  Â Â <span class="hljs-punctuation">}</span>
Â Â <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åœ¨å‘½ä»¤è¡Œç»ˆç«¯ä½¿ç”¨ codebuddy mcp list æŸ¥çœ‹mcpåˆ—è¡¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ddae3b36e7741deb6bbdf8584042795~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=7OIQRbfxGzljryLrmkby33bRRfc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>MCPçš„ä½¿ç”¨å’Œæ™®é€šçš„Chatä¸€æ ·ï¼Œç›´æ¥è¾“å…¥æç¤ºè¯å³å¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec0b7166f38f4fa8a6d2e023d31458a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903445&amp;x-signature=P7SzbqA42jp0ulLh62Xze896nHc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-33">æ€»ç»“</h2>
<p>æ•´ä½“ä½¿ç”¨ä¸‹æ¥å¯ä»¥çœ‹å¾—å‡ºCodeBuddy Code CLIæ˜¯åœ¨ä»¿åˆ¶Claude Code CLIåŠŸèƒ½ï¼Œç›®å‰å·²æä¾›äº†åŸºæœ¬çš„CLIåŠŸèƒ½ï¼Œä½†æ˜¯æ ¸å¿ƒçš„ /agentsã€/hooksã€/ide ç­‰åŠŸèƒ½è¿˜æœªæ”¯æŒæˆ–æœªå®Œå–„ï¼Œä¸è¿‡è¿˜æ˜¯å‹‰å¼ºå¯ä»¥æ»¡è¶³æ—¥å¸¸å¼€å‘éœ€æ±‚çš„ï¼Œå¯¹è¿™äº›åŠŸèƒ½è¦æ±‚ä¸é«˜çš„å°ä¼™ä¼´å¯ä»¥å…¥æ‰‹ç©èµ·æ¥ã€‚</p>
<h2 data-id="heading-34">å‹æƒ…æç¤º</h2>
<p>è§åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fk6v7sfpki7ofkngAlOCCbw" target="_blank" title="https://mp.weixin.qq.com/s/k6v7sfpki7ofkngAlOCCbw" ref="nofollow noopener noreferrer">è…¾è®¯å‘å¸ƒCodeBuddy Code CLIå¹³æ›¿Claude Code?</a></p>
<blockquote>
<p>æœ¬æ–‡åŒæ­¥è‡ªå¾®ä¿¡å…¬ä¼—å· "<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fk6v7sfpki7ofkngAlOCCbw" target="_blank" title="https://mp.weixin.qq.com/s/k6v7sfpki7ofkngAlOCCbw" ref="nofollow noopener noreferrer">ç¨‹åºå‘˜å°æºª</a>" ï¼Œè¿™é‡Œåªæ˜¯åŒæ­¥ï¼Œæƒ³çœ‹åŠæ—¶æ¶ˆæ¯è¯·ç§»æ­¥æˆ‘çš„å…¬ä¼—å·ï¼Œä¸å®šæ—¶æ›´æ–°æˆ‘çš„å­¦ä¹ ç»éªŒã€‚å‹æƒ…æç¤ºå‹æƒ…æç¤º</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­—èŠ‚TRAE SOLOï¼šä½ çš„AIç¼–ç¨‹å‰¯é©¾å·²ä¸Šçº¿ï¼]]></title>    <link>https://juejin.cn/post/7573193563044773942</link>    <guid>https://juejin.cn/post/7573193563044773942</guid>    <pubDate>2025-11-16T13:18:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573193563044773942" data-draft-id="7573193563044757558" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­—èŠ‚TRAE SOLOï¼šä½ çš„AIç¼–ç¨‹å‰¯é©¾å·²ä¸Šçº¿ï¼"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-16T13:18:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­—èŠ‚TRAE SOLOï¼šä½ çš„AIç¼–ç¨‹å‰¯é©¾å·²ä¸Šçº¿ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:18:06.000Z" title="Sun Nov 16 2025 13:18:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦æ›¾åœ¨ä¸€ä¸ªç™¾ä¸‡è¡Œçš„è€æ—§é¡¹ç›®é‡ŒæŒ£æ‰ï¼Œæ”¹ä¸€ä¸ªbugå¦‚åŒå¤§æµ·æé’ˆï¼Ÿæˆ–è€…é¢å¯¹ä¸€ä¸ªå…¨æ–°çš„ideaï¼Œå´è‹¦äºä»é›¶å¼€å§‹çš„ç¹çæ­å»ºï¼Ÿå¦‚æœæˆ‘å‘Šè¯‰ä½ ï¼Œæœ‰ä¸€ä¸ªâ€œå‰¯é©¾â€èƒ½å¸®ä½ åˆ†æ‹…è¿™äº›ï¼Œç”šè‡³æ¯”ä½ æ›´æ‡‚ä»£ç ï¼Œä½ ä¼šç›¸ä¿¡å—ï¼Ÿ</p>
<p>å­—èŠ‚è·³åŠ¨æ——ä¸‹çš„AIç¼–ç¨‹ç¥å™¨TRAE SOLOï¼Œåœ¨ä¸‡ä¼—ç©ç›®ä¸‹ï¼Œç»ˆäºè¿æ¥äº†æ­£å¼ç‰ˆï¼ˆGAï¼‰çš„å…¨é¢å¼€æ”¾ï¼å®ƒä¸å†ä»…ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ›´åƒæ˜¯ä¸€ä½æ‹¥æœ‰â€œå“åº”æ„ŸçŸ¥â€çš„ç¼–ç¨‹æ™ºèƒ½ä½“ï¼Œå®ƒè‡ªç§°â€œThe Responsive Coding Agentâ€ï¼Œé‡å¿ƒå‹ƒå‹ƒåœ°è¦é‡å¡‘æˆ‘ä»¬çš„å¼€å‘æµç¨‹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-16_21.10.12-1024x655.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-16_21.10.12-1024x655.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d25ad8ec2fe44c7af6abe2595ccd587~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903885&amp;x-signature=P8SKI1toodO3NLMIvZxdE4tGuak%3D" alt="iShot_2025-11-16_21.10.12" loading="lazy"/></a></p>
<h3 data-id="heading-0">â€œåŒå­æ˜Ÿâ€æ™ºèƒ½ä½“ï¼Œè¦†ç›–ä½ çš„å¼€å‘å…¨åœºæ™¯</h3>
<p>è¿™æ¬¡å‡çº§çš„æ ¸å¿ƒäº®ç‚¹ï¼Œæ— ç–‘æ˜¯å…¶ç²¾å¿ƒæ‰“é€ çš„â€œåŒå­æ˜Ÿâ€æ™ºèƒ½ä½“æ¶æ„ï¼šSOLO Builderå’ŒSOLO Coderã€‚å®ƒä»¬å°±åƒæ˜¯ä¸ºä½ é‡èº«å®šåˆ¶çš„â€œå·¦å³æŠ¤æ³•â€ï¼Œå„æœ‰ä¸“æ”»ï¼ŒååŒä½œæˆ˜ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ éœ€è¦å¿«é€ŸéªŒè¯ä¸€ä¸ªæ–°æƒ³æ³•ï¼ŒSOLO Builderå°±åƒä½ çš„â€œåˆ›æ„åŠ é€Ÿå™¨â€ï¼Œä½ åªéœ€ç”¨è‡ªç„¶è¯­è¨€æè¿°ï¼Œå®ƒå°±èƒ½ä»äº§å“éœ€æ±‚ã€å¼€å‘ã€æµ‹è¯•åˆ°éƒ¨ç½²ä¸€æ°”å‘µæˆï¼Œå¸®ä½ æ­èµ·ä¸€ä¸ªå¯è¿è¡Œçš„Demoï¼ŒçœŸæ­£å®ç°â€œVibe Codingâ€çš„ç›´è§‚ä¸é«˜æ•ˆã€‚</p>
<p>è€Œå¦‚æœä½ æ­£æ·±é™·å·²æœ‰é¡¹ç›®çš„æ³¥æ²¼ï¼ŒSOLO Coderå°±æ˜¯ä½ çš„â€œé¡¹ç›®å®ˆæœ›è€…â€ã€‚ä»å¤æ‚çš„Bugä¿®å¤ã€åŠŸèƒ½è¿­ä»£ï¼Œåˆ°ä»£ç é‡æ„ï¼Œå®ƒéƒ½èƒ½ä»¥â€œPlanæ¨¡å¼â€è¾…åŠ©ä½ åˆ¶å®šè¯¦ç»†è®¡åˆ’ï¼Œç”šè‡³èƒ½å¤„ç†ç™¾ä¸‡è¡Œçº§åˆ«çš„ä»£ç åº“ï¼Œè®©ä½ çš„æ¯ä¸€æ¬¡æ”¹åŠ¨éƒ½æ¸…æ™°å¯æ§ï¼Œå‘Šåˆ«â€œé»‘ç®±â€æ“ä½œã€‚å®ƒèƒ½è¾…åŠ©ä½ åˆ¶å®šè¯¦å°½çš„å¼€å‘è§„åˆ’ï¼Œè®©ä½ å¯¹æ•´ä¸ªæµç¨‹æœ‰æ›´å¼ºçš„æŒæ§æ„Ÿã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-16_21.10.20-782x1024.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-16_21.10.20-782x1024.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2ba677147d647a7a369b272c3d56589~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903885&amp;x-signature=mtuOpg%2BVRC7TpqOVtgk2gl9%2B1eU%3D" alt="iShot_2025-11-16_21.10.20" loading="lazy"/></a></p>
<h3 data-id="heading-1">å‘Šåˆ«â€œå¤±å¿†â€ï¼ŒæŒæ§å…¨å±€ï¼šå¼€å‘æµç¨‹æ›´é«˜æ•ˆã€æ›´å¯æ§</h3>
<p>é™¤äº†â€œåŒå­æ˜Ÿâ€çš„å¼ºå¤§åˆ†å·¥ï¼ŒTRAE SOLOè¿˜å¸¦æ¥äº†è¯¸å¤šè´´å¿ƒå‡çº§ï¼Œè®©å¼€å‘ä½“éªŒè¾¾åˆ°å‰æ‰€æœªæœ‰çš„æµç•…ï¼š</p>
<ul>
<li><strong>å¤šä»»åŠ¡å¹¶è¡Œ</strong>ï¼šå‘Šåˆ«å•çº¿ä½œæˆ˜ï¼Œä½ ç°åœ¨å¯ä»¥åŒæ—¶å¼€å¯å¹¶ç®¡ç†å¤šä¸ªå¼€å‘ä»»åŠ¡ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹é—´çµæ´»åˆ‡æ¢ï¼Œæ•ˆç‡ç›´æ¥æ‹‰æ»¡ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡å‹ç¼©</strong>ï¼šè¿™ç®€ç›´æ˜¯AIç¼–ç¨‹çš„â€œæ•‘æ˜Ÿâ€ï¼å®ƒèƒ½æ™ºèƒ½ç®¡ç†æµ·é‡ä»£ç ä¸Šä¸‹æ–‡ï¼Œå½»åº•è§£å†³äº†AIåœ¨é•¿å¯¹è¯ä¸­â€œå¤±å¿†â€çš„å°´å°¬ï¼Œç¡®ä¿æ¨¡å‹å§‹ç»ˆâ€œåœ¨çº¿â€ï¼Œè¾“å‡ºè´¨é‡ä¸å†ä¸‹é™ï¼Œè¿˜èƒ½èŠ‚çœä¸å¿…è¦çš„æˆæœ¬ã€‚</li>
<li><strong>ä»£ç å˜æ›´è§†å›¾</strong>ï¼šæ‰€æœ‰ä»£ç çš„æ”¹åŠ¨éƒ½ä¼šä»¥æ¸…æ™°çš„Diffè§†å›¾å‘ˆç°ï¼Œä½ å¯¹AIåšå‡ºçš„æ¯å¤„ä¿®æ”¹éƒ½å¿ƒçŸ¥è‚šæ˜ï¼ŒæŒæ§æ„Ÿåè¶³ã€‚</li>
<li><strong>å…¨æ–°è®¾è®¡çš„ä¸‰æ å¸ƒå±€</strong>ï¼šå¤šä»»åŠ¡åˆ—è¡¨ã€å¯¹è¯æµçª—å£å’Œé›†æˆå·¥å…·é¢æ¿ï¼Œç•Œé¢ä¸€ç›®äº†ç„¶ï¼Œè‡´åŠ›äºæ‰“é€ ä¸€ä¸ªæ›´æ¸…æ™°ã€æ›´é«˜æ•ˆçš„å¼€å‘ç©ºé—´ã€‚</li>
<li><strong>å…è´¹è°ƒç”¨é¡¶çº§æ¨¡å‹</strong>ï¼šç”šè‡³ï¼Œå®ƒè¿˜æ”¯æŒå…è´¹è°ƒç”¨GPT-4oã€Claude 3.5ç­‰é¡¶å°–æ¨¡å‹ï¼Œå¹¶å…¼å®¹VS Codeæ‰©å±•ï¼Œæ— è®ºMacã€Windowsè¿˜æ˜¯Linuxï¼Œéƒ½èƒ½äº«å—ä¸€è‡´çš„é«˜æ•ˆä½“éªŒã€‚</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-16_21.10.28-1024x659.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-16_21.10.28-1024x659.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eedc7bfcbed74744a97f310f88e0be29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903885&amp;x-signature=fMxkfEpoO9Xu4c%2BmdJeuS5%2By%2Fm0%3D" alt="iShot_2025-11-16_21.10.28" loading="lazy"/></a></p>
<h3 data-id="heading-2">é™æ—¶å…è´¹å·²è½å¹•ï¼Œä½†æ¢ç´¢æ°¸ä¸æ­¢æ­¥</h3>
<p>æˆ–è®¸ä½ ä¼šé—®ï¼Œè¿™ä¹ˆå¼ºå¤§çš„å·¥å…·ï¼Œæˆ‘å¦‚ä½•ä½“éªŒï¼Ÿé—æ†¾çš„æ˜¯ï¼Œé‚£ä¸ºæœŸå››å¤©çš„é™æ—¶å…è´¹æ´»åŠ¨ï¼ˆ2025å¹´11æœˆ12æ—¥è‡³11æœˆ15æ—¥ï¼‰ï¼Œå·²ç»äºæ˜¨æ—¥çš„23:59ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰æ‚„ç„¶ç”»ä¸Šäº†å¥å·ã€‚ä½†è¯·åˆ«ç°å¿ƒï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä½ é”™è¿‡äº†æ•´ä¸ªæœªæ¥ï¼</p>
<p>TRAE SOLOæ­£å¼ç‰ˆå·²å…¨é¢å‘å›½é™…ç‰ˆç”¨æˆ·å¼€æ”¾ï¼Œæ— éœ€é‚€è¯·ç ã€‚å®ƒçš„å…¨é¢å¼€æ”¾æ ‡å¿—ç€å­—èŠ‚è·³åŠ¨åœ¨AIè¾…åŠ©ç¼–ç¨‹é¢†åŸŸè¿ˆå‡ºäº†é‡Œç¨‹ç¢‘å¼çš„ä¸€æ­¥ã€‚æ— è®ºæ˜¯ä»é›¶å¼€å§‹çš„å¿«é€ŸåŸå‹æ„å»ºï¼Œè¿˜æ˜¯å¯¹ç°æœ‰å¤æ‚ä»£ç åº“çš„æ·±åº¦è¿­ä»£ï¼Œå®ƒéƒ½æä¾›äº†æ›´å…·é’ˆå¯¹æ€§çš„æ™ºèƒ½ä½“å’Œæ”¯æŒåŠŸèƒ½ã€‚</p>
<p>æ— è®ºä½ æ˜¯ä¸€ä½ä»é›¶å¼€å§‹çš„åˆ›ä¸šè€…ï¼Œè¿˜æ˜¯ä¸è€é¡¹ç›®ææ–—çš„èµ„æ·±å¼€å‘è€…ï¼ŒTRAE SOLOéƒ½å€¼å¾—ä½ äº²è‡ªå»æ¢ç´¢ï¼Œå»æ„Ÿå—AIå¦‚ä½•çœŸæ­£æˆä¸ºä½ æœ€å¯é çš„ç¼–ç¨‹å‰¯é©¾ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-16_21.10.42-1024x670.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-16_21.10.42-1024x670.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15534d87325e483184085d68edc76778~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903885&amp;x-signature=8oG%2BejjVUGy%2FLxhG90YjKyUhL9Y%3D" alt="iShot_2025-11-16_21.10.42" loading="lazy"/></a></p>
<p>ç«‹å³è®¿é—®<a href="https://www.trae.ai/solo" target="_blank" title="https://www.trae.ai/solo" ref="nofollow noopener noreferrer">TRAEå®˜ç½‘</a>ï¼Œä¸‹è½½å›½é™…ç‰ˆå®¢æˆ·ç«¯ï¼Œä½“éªŒè¿™æ¬¾å¯èƒ½å½»åº•æ”¹å˜ä½ ç¼–ç¨‹ä¹ æƒ¯çš„AIæ–°æ˜Ÿå§ï¼</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Perfetto ç³»åˆ— 5ï¼šAndroid App åŸºäº Choreographer çš„æ¸²æŸ“æµç¨‹]]></title>    <link>https://juejin.cn/post/7572539461478793259</link>    <guid>https://juejin.cn/post/7572539461478793259</guid>    <pubDate>2025-11-16T13:09:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572539461478793259" data-draft-id="7572481101711441974" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Android Perfetto ç³»åˆ— 5ï¼šAndroid App åŸºäº Choreographer çš„æ¸²æŸ“æµç¨‹"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-16T13:09:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gracker"/> <meta itemprop="url" content="https://juejin.cn/user/1816846860560749"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Android Perfetto ç³»åˆ— 5ï¼šAndroid App åŸºäº Choreographer çš„æ¸²æŸ“æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1816846860560749/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gracker
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:09:00.000Z" title="Sun Nov 16 2025 13:09:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»33åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">layout:</span> <span class="hljs-string">post</span>
<span class="hljs-attr">title:</span> <span class="hljs-string">Android</span> <span class="hljs-string">Perfetto</span> <span class="hljs-string">ç³»åˆ—</span> <span class="hljs-number">5</span><span class="hljs-string">ï¼šAndroid</span> <span class="hljs-string">App</span> <span class="hljs-string">åŸºäº</span> <span class="hljs-string">Choreographer</span> <span class="hljs-string">çš„æ¸²æŸ“æµç¨‹</span>
<span class="hljs-attr">date:</span> <span class="hljs-number">2025-03-26 18:55:11</span>
<span class="hljs-attr">typora-root-url:</span> <span class="hljs-string">../</span>
<span class="hljs-attr">tags:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Android</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Perfetto</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Systrace</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Jank</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">RenderThread</span>
<span class="hljs-attr">categories:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Java</span>
</code></pre>
<p>æœ¬æ–‡ä»‹ç»äº† App å¼€å‘è€…ä¸ç»å¸¸æ¥è§¦åˆ°ä½†åœ¨ Android Framework æ¸²æŸ“é“¾è·¯ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªç±» Choreographerï¼ŒåŒ…æ‹¬ Choreographer çš„å¼•å…¥èƒŒæ™¯ã€ç®€ä»‹ã€éƒ¨åˆ†æºç è§£æã€ä¸ MessageQueue çš„äº¤äº’ã€åœ¨ APM ä¸­çš„åº”ç”¨ï¼Œä»¥åŠæ‰‹æœºå‚å•†åŸºäº Choreographer çš„ä¸€äº›ä¼˜åŒ–æ€è·¯ã€‚</p>
<p>Choreographer çš„å¼•å…¥ä¸»è¦æ˜¯é…åˆ Vsyncï¼Œä¸ºä¸Šå±‚åº”ç”¨çš„æ¸²æŸ“æä¾›ç¨³å®šçš„ Message å¤„ç†æ—¶æœºã€‚å½“ Vsync ä¿¡å·åˆ°æ¥æ—¶ï¼Œç³»ç»Ÿé€šè¿‡å¯¹ Vsync ä¿¡å·å‘¨æœŸçš„è°ƒæ•´ï¼Œæ§åˆ¶æ¯ä¸€å¸§ç»˜åˆ¶æ“ä½œçš„æ—¶æœºã€‚ç›®å‰ä¸»æµæ‰‹æœºçš„å±å¹•åˆ·æ–°ç‡å·²è¾¾åˆ° 120Hzï¼Œå³æ¯ 8.3ms åˆ·æ–°ä¸€æ¬¡ï¼Œç³»ç»Ÿä¸ºé…åˆå±å¹•åˆ·æ–°é¢‘ç‡ï¼Œç›¸åº”è°ƒæ•´ Vsync å‘¨æœŸã€‚æ¯ä¸ª Vsync å‘¨æœŸåˆ°æ¥æ—¶ï¼ŒVsync ä¿¡å·å”¤é†’ Choreographer æ‰§è¡Œåº”ç”¨çš„ç»˜åˆ¶æ“ä½œï¼Œè¿™æ­£æ˜¯å¼•å…¥ Choreographer çš„ä¸»è¦ä½œç”¨ã€‚äº†è§£ Choreographer è¿˜å¯ä»¥å¸®åŠ©åº”ç”¨å¼€å‘è€…æ·±å…¥ç†è§£æ¯ä¸€å¸§çš„è¿è¡ŒåŸç†ï¼ŒåŒæ—¶åŠ æ·±å¯¹ <strong>Message</strong>ã€<strong>Handler</strong>ã€<strong>Looper</strong>ã€<strong>MessageQueue</strong>ã€<strong>Input</strong>ã€<strong>Animation</strong>ã€<strong>Measure</strong>ã€<strong>Layout</strong>ã€<strong>Draw</strong> ç­‰æ ¸å¿ƒç»„ä»¶çš„è®¤è¯†ã€‚è®¸å¤š <strong>APM</strong>ï¼ˆåº”ç”¨æ€§èƒ½ç›‘æ§ï¼‰å·¥å…·ä¹Ÿåˆ©ç”¨äº† <strong>Choreographer</strong>ï¼ˆé€šè¿‡ FrameCallback + FrameInfoï¼‰ã€<strong>MessageQueue</strong>ï¼ˆé€šè¿‡ IdleHandlerï¼‰å’Œ <strong>Looper</strong>ï¼ˆé€šè¿‡è‡ªå®šä¹‰ MessageLoggingï¼‰è¿™äº›ç»„åˆæœºåˆ¶è¿›è¡Œæ€§èƒ½ç›‘æµ‹ã€‚æ·±å…¥ç†è§£è¿™äº›æœºåˆ¶åï¼Œå¼€å‘è€…å¯ä»¥æ›´æœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œå½¢æˆç³»ç»ŸåŒ–çš„ä¼˜åŒ–æ€è·¯ã€‚</p>

<h3 data-id="heading-0">æœ¬æ–‡ç›®å½•</h3>
<ul>
<li><a href="#series" title="#series">Perfetto ç³»åˆ—ç›®å½•</a></li>
<li><a href="#main-thread-essence" title="#main-thread-essence">ä¸»çº¿ç¨‹è¿è¡Œæœºåˆ¶çš„æœ¬è´¨</a></li>
<li><a href="#choreographer-intro" title="#choreographer-intro">Choreographer ç®€ä»‹</a></li>
<li><a href="#source" title="#source">æºç è§£æ</a></li>
<li><a href="#messagequeue" title="#messagequeue">MessageQueue ä¸ Choreographer</a></li>
<li><a href="#apm" title="#apm">APM ä¸ Choreographer</a></li>
<li><a href="#vendor" title="#vendor">å‚å•†ä¼˜åŒ–</a></li>
<li><a href="#refs" title="#refs">å‚è€ƒèµ„æ–™</a></li>
<li><a href="#zhihu" title="#zhihu">æœ¬æ–‡çŸ¥ä¹åœ°å€</a></li>
<li><a href="#about" title="#about">å…³äºæˆ‘ &amp;&amp; åšå®¢</a></li>
</ul>
<p>æœ¬æ–‡æ˜¯ Perfetto ç³»åˆ—æ–‡ç« çš„ç¬¬äº”ç¯‡ï¼Œä¸»è¦æ˜¯å¯¹ Perfetto ä¸­çš„ Choreographer è¿›è¡Œç®€å•ä»‹ç»</p>
<p>æœ¬ç³»åˆ—çš„<strong>ç›®çš„</strong>æ˜¯é€šè¿‡ Perfetto è¿™ä¸ªå·¥å…·ï¼Œä»å¦å¤–ä¸€ä¸ªè§’åº¦æ¥çœ‹å¾… Android ç³»ç»Ÿæ•´ä½“çš„è¿è¡Œï¼ŒåŒæ—¶ä¹Ÿä»å¦å¤–ä¸€ä¸ªè§’åº¦æ¥å¯¹ Framework è¿›è¡Œå­¦ä¹ ã€‚ä¹Ÿè®¸ä½ çœ‹äº†å¾ˆå¤šè®² Framework çš„æ–‡ç« ï¼Œä½†æ˜¯æ€»æ˜¯è®°ä¸ä½ä»£ç ï¼Œæˆ–è€…ä¸æ¸…æ¥šå…¶è¿è¡Œçš„æµç¨‹ï¼Œä¹Ÿè®¸ä» Perfetto è¿™ä¸ªå›¾å½¢åŒ–çš„è§’åº¦ï¼Œä½ å¯ä»¥ç†è§£çš„æ›´æ·±å…¥ä¸€äº›ã€‚</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-series" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-1">Perfetto ç³»åˆ—ç›®å½•</h2>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F03%2F27%2FAndroid-Perfetto-101%2F%23%2FPerfetto-%25E7%25B3%25BB%25E5%2588%2597%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="https://www.androidperformance.com/2024/03/27/Android-Perfetto-101/#/Perfetto-%E7%B3%BB%E5%88%97%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ—ç›®å½•</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-01-What-is-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-01-What-is-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 1ï¼šPerfetto å·¥å…·ç®€ä»‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-02-how-to-get-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-02-how-to-get-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 2ï¼šPerfetto Trace æŠ“å–</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-03-how-to-analysis-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-03-how-to-analysis-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 3ï¼šç†Ÿæ‚‰ Perfetto View</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F02%2F08%2FAndroid-Perfetto-04-Open-Big-Trace-With-Command-Line%2F" target="_blank" title="https://www.androidperformance.com/2025/02/08/Android-Perfetto-04-Open-Big-Trace-With-Command-Line/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 4ï¼šä½¿ç”¨å‘½ä»¤è¡Œåœ¨æœ¬åœ°æ‰“å¼€è¶…å¤§ Trace</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F03%2F26%2FAndroid-Perfetto-05-Chorergrapher%2F" target="_blank" title="https://www.androidperformance.com/2025/03/26/Android-Perfetto-05-Chorergrapher/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 5ï¼šAndroid App åŸºäº Choreographer çš„æ¸²æŸ“æµç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F04%2F26%2FAndroid-Perfetto-06-Why-120Hz%2F" target="_blank" title="https://www.androidperformance.com/2025/04/26/Android-Perfetto-06-Why-120Hz/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 6ï¼šä¸ºä»€ä¹ˆæ˜¯ 120Hzï¼Ÿé«˜åˆ·æ–°ç‡çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2025%2F08%2F02%2FAndroid-Perfetto-07-MainThread-And-RenderThread%2F" target="_blank" title="https://androidperformance.com/2025/08/02/Android-Perfetto-07-MainThread-And-RenderThread/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 7 - MainThread å’Œ RenderThread è§£è¯»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2025%2F08%2F05%2FAndroid-Perfetto-08-Vsync%2F" target="_blank" title="https://androidperformance.com/2025/08/05/Android-Perfetto-08-Vsync/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 8ï¼šæ·±å…¥ç†è§£ Vsync æœºåˆ¶ä¸æ€§èƒ½åˆ†æ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F11%2F12%2FAndroid-Perfetto-09-CPU%2F" target="_blank" title="https://www.androidperformance.com/2025/11/12/Android-Perfetto-09-CPU/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 9 - CPU ä¿¡æ¯è§£è¯»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1oi82efE4D%2F%3Fvd_source%3D0c6d2191e785de0a36dc21a9da7e664e" target="_blank" title="https://www.bilibili.com/video/BV1oi82efE4D/?vd_source=0c6d2191e785de0a36dc21a9da7e664e" ref="nofollow noopener noreferrer">è§†é¢‘(Bç«™) - Android Perfetto åŸºç¡€å’Œæ¡ˆä¾‹åˆ†äº«</a></li>
</ol>
<p>å¦‚æœå¤§å®¶è¿˜æ²¡çœ‹è¿‡ Systrace ç³»åˆ—ï¼Œä¸‹é¢æ˜¯ä¼ é€é—¨ï¼š</p>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2019%2F05%2F26%2FAndroid_Systrace_0%2F%23%2F%25E7%25B3%25BB%25E5%2588%2597%25E6%2596%2587%25E7%25AB%25A0%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="https://www.androidperformance.com/2019/05/26/Android_Systrace_0/#/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">Systrace ç³»åˆ—ç›®å½•</a> ï¼š ç³»ç»Ÿä»‹ç»äº† Perfetto çš„å‰èº« Systrace çš„ä½¿ç”¨ï¼Œå¹¶é€šè¿‡ Systrace æ¥å­¦ä¹ å’Œäº†è§£ Android æ€§èƒ½ä¼˜åŒ–å’Œ Android ç³»ç»Ÿè¿è¡Œçš„åŸºæœ¬è§„åˆ™ã€‚</li>
<li>æœ¬æ–‡çš„ Systrace ç‰ˆæœ¬ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2019%2F10%2F22%2FAndroid-Choreographer%2F" target="_blank" title="https://androidperformance.com/2019/10/22/Android-Choreographer/" ref="nofollow noopener noreferrer">Android åŸºäº Choreographer çš„æ¸²æŸ“æœºåˆ¶è¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F" target="_blank" title="https://www.androidperformance.com/" ref="nofollow noopener noreferrer">ä¸ªäººåšå®¢</a> ï¼šä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯ Android ç›¸å…³çš„å†…å®¹ï¼Œä¹Ÿæ”¾äº†ä¸€äº›ç”Ÿæ´»å’Œå·¥ä½œç›¸å…³çš„å†…å®¹ã€‚</li>
</ol>
<p>æ¬¢è¿å¤§å®¶åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2Fabout%2F" target="_blank" title="https://www.androidperformance.com/about/" ref="nofollow noopener noreferrer">å…³äºæˆ‘</a> é¡µé¢åŠ å…¥å¾®ä¿¡ç¾¤æˆ–è€…æ˜Ÿçƒï¼Œè®¨è®ºä½ çš„é—®é¢˜ã€ä½ æœ€æƒ³çœ‹åˆ°çš„å…³äº Perfetto çš„éƒ¨åˆ†ï¼Œä»¥åŠè·Ÿå„ä½ç¾¤å‹è®¨è®ºæ‰€æœ‰ Android å¼€å‘ç›¸å…³çš„å†…å®¹</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-main-thread-essence" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-2">ä¸»çº¿ç¨‹è¿è¡Œæœºåˆ¶çš„æœ¬è´¨</h2>
<p>åœ¨è®² Choreographer ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç†ä¸€ä¸‹ Android ä¸»çº¿ç¨‹è¿è¡Œçš„æœ¬è´¨ï¼Œå…¶å®å°±æ˜¯ Message çš„å¤„ç†è¿‡ç¨‹ï¼Œæˆ‘ä»¬çš„å„ç§æ“ä½œï¼ŒåŒ…æ‹¬æ¯ä¸€å¸§çš„æ¸²æŸ“æ“ä½œ ï¼Œéƒ½æ˜¯é€šè¿‡ Message çš„å½¢å¼å‘ç»™ä¸»çº¿ç¨‹çš„ MessageQueue ï¼ŒMessageQueue å¤„ç†å®Œæ¶ˆæ¯ç»§ç»­ç­‰ä¸‹ä¸€ä¸ªæ¶ˆæ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><strong>MethodTrace å›¾ç¤º</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c548c24cdd548e58c5e8f90704127e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=OEg3kRXUw7EqjcGu3lrYv9GupUM%3D" alt="image.png" loading="lazy"/></p>
<p><strong>Perfetto å›¾ç¤º</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9636098f335b49cca9f35b123eeba44b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=PtXiD6FGpx33xXm1ZIK%2B7ho5zYA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">æ¼”è¿›</h3>
<p>å¼•å…¥ Vsync ä¹‹å‰çš„ Android ç‰ˆæœ¬ï¼Œæ¸²æŸ“ä¸€å¸§ç›¸å…³çš„ Message ï¼Œä¸­é—´æ˜¯æ²¡æœ‰é—´éš”çš„ï¼Œä¸Šä¸€å¸§ç»˜åˆ¶å®Œï¼Œä¸‹ä¸€å¸§çš„ Message ç´§æ¥ç€å°±å¼€å§‹è¢«å¤„ç†ã€‚è¿™æ ·çš„é—®é¢˜å°±æ˜¯ï¼Œå¸§ç‡ä¸ç¨³å®šï¼Œå¯èƒ½é«˜ä¹Ÿå¯èƒ½ä½ï¼Œä¸ç¨³å®šï¼Œå¦‚ä¸‹å›¾</p>
<p><strong>MethodTrace å›¾ç¤º</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/510098a7e6e6471584b0a8cb7ba30cea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=mqUB1B6jBGiQI%2FN%2FcNmfovoELVk%3D" alt="image.png" loading="lazy"/></p>
<p><strong>Trace å›¾ç¤ºï¼ˆèµ„æºæ¯”è¾ƒè€ï¼Œç”¨ Systrace å›¾ç¤º)</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd2ca16daf74409e9de862c64f312458~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=gC5lwUJr2wPzcYuULpvVoyksYCw%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°è¿™æ—¶å€™çš„ç“¶é¢ˆæ˜¯åœ¨ dequeueBuffer, å› ä¸ºå±å¹•æ˜¯æœ‰åˆ·æ–°å‘¨æœŸçš„, FB æ¶ˆè€— Front Buffer çš„é€Ÿåº¦æ˜¯ä¸€å®šçš„, æ‰€ä»¥ SF æ¶ˆè€— App Buffer çš„é€Ÿåº¦ä¹Ÿæ˜¯ä¸€å®šçš„, æ‰€ä»¥ App ä¼šå¡åœ¨ dequeueBuffer è¿™é‡Œ,è¿™å°±ä¼šå¯¼è‡´ App Buffer è·å–ä¸ç¨³å®š, å¾ˆå®¹æ˜“å°±ä¼šå‡ºç°å¡é¡¿æ‰å¸§çš„æƒ…å†µ.</p>
<p>å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œç¨³å®šçš„å¸§ç‡æ‰æ˜¯å¥½çš„ä½“éªŒï¼Œæ¯”å¦‚ä½ ç©ç‹è€…è£è€€ï¼Œç›¸æ¯” fps åœ¨ 60 å’Œ 40 ä¹‹é—´é¢‘ç¹å˜åŒ–ï¼Œç”¨æˆ·æ„Ÿè§‰æ›´å¥½çš„æ˜¯ç¨³å®šåœ¨ 50 fps çš„æƒ…å†µ.</p>
<p>æ‰€ä»¥ Android çš„æ¼”è¿›ä¸­ï¼Œæœ€åˆå¼•å…¥äº† <strong>Vsync + TripleBuffer + Choreographer</strong> çš„æœºåˆ¶ï¼Œåæ¥åœ¨ Android S (Android 12) ç‰ˆæœ¬åˆè¿›ä¸€æ­¥å¼•å…¥äº† <strong>BlastBufferQueue</strong>ï¼Œå…±åŒæ„æˆäº†ç°ä»£ Android ç¨³å®šå¸§ç‡è¾“å‡ºæœºåˆ¶ï¼Œè®©è½¯ä»¶å±‚å’Œç¡¬ä»¶å±‚å¯ä»¥ä»¥å…±åŒçš„é¢‘ç‡ä¸€èµ·å·¥ä½œã€‚</p>
<h3 data-id="heading-4">å¼•å…¥ Choreographer</h3>
<p>Choreographer çš„å¼•å…¥ä¸»è¦æ˜¯é…åˆ Vsyncï¼Œä¸ºä¸Šå±‚åº”ç”¨çš„æ¸²æŸ“æä¾›ç¨³å®šçš„ Message å¤„ç†æ—¶æœºã€‚å½“ Vsync ä¿¡å·åˆ°æ¥æ—¶ï¼Œç³»ç»Ÿé€šè¿‡å¯¹ Vsync ä¿¡å·å‘¨æœŸçš„è°ƒæ•´ï¼Œæ§åˆ¶æ¯ä¸€å¸§ç»˜åˆ¶æ“ä½œçš„æ—¶æœºã€‚ç›®å‰ä¸»æµæ‰‹æœºçš„å±å¹•åˆ·æ–°ç‡å·²è¾¾åˆ° 120Hzï¼Œå³æ¯ 8.3ms åˆ·æ–°ä¸€æ¬¡ï¼Œç³»ç»Ÿä¸ºé…åˆå±å¹•åˆ·æ–°é¢‘ç‡ï¼Œç›¸åº”è°ƒæ•´ Vsync å‘¨æœŸã€‚æ¯ä¸ª Vsync å‘¨æœŸåˆ°æ¥æ—¶ï¼ŒVsync ä¿¡å·å”¤é†’ Choreographer æ‰§è¡Œåº”ç”¨çš„ç»˜åˆ¶æ“ä½œï¼Œå¦‚æœæ¯ä¸ª Vsync å‘¨æœŸåº”ç”¨éƒ½èƒ½æ¸²æŸ“å®Œæˆï¼Œé‚£ä¹ˆåº”ç”¨çš„ fps å°±æ˜¯120ï¼Œç»™ç”¨æˆ·çš„æ„Ÿè§‰å°±æ˜¯éå¸¸æµç•…ï¼Œè¿™å°±æ˜¯å¼•å…¥ Choreographer çš„ä¸»è¦ä½œç”¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e7c3e9d02944cc59d72fcbfb4664fd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=ELOM0N6PbwW2jt%2BbjlRwBvBJ9ZE%3D" alt="image.png" loading="lazy"/></p>
<p>å½“ç„¶ç›®å‰ä¸»æµæ——èˆ°æ‰‹æœºçš„åˆ·æ–°ç‡å·²è¾¾åˆ°120Hzï¼ŒVsyncå‘¨æœŸå·²ç¼©çŸ­è‡³8.3msï¼Œä¸Šå›¾ä¸­çš„æ“ä½œè¦åœ¨æ›´çŸ­çš„æ—¶é—´å†…å®Œæˆï¼Œå¯¹æ€§èƒ½çš„è¦æ±‚ä¹Ÿè¶Šæ¥è¶Šé«˜ï¼Œå…·ä½“å¯ä»¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2019%2F05%2F15%2F90hz-on-android%2F" target="_blank" title="https://www.androidperformance.com/2019/05/15/90hz-on-android/" ref="nofollow noopener noreferrer">æ–°çš„æµç•…ä½“éªŒï¼Œ90Hz æ¼«è°ˆ</a> è¿™ç¯‡æ–‡ç« (æ–‡ç« è™½ç„¶è®¨è®º90Hzï¼Œä½†åŒæ ·çš„åŸç†é€‚ç”¨äº120Hz)</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-choreographer-intro" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-5">Choreographer ç®€ä»‹</h2>
<p>Choreographer æ‰®æ¼” Android æ¸²æŸ“é“¾è·¯ä¸­æ‰¿ä¸Šå¯ä¸‹çš„è§’è‰²</p>
<ol start="0">
<li><strong>æ‰¿ä¸Š</strong>ï¼šè´Ÿè´£æ¥æ”¶å’Œå¤„ç† App çš„å„ç§æ›´æ–°æ¶ˆæ¯å’Œå›è°ƒï¼Œç­‰åˆ° Vsync åˆ°æ¥çš„æ—¶å€™ç»Ÿä¸€å¤„ç†ã€‚æ¯”å¦‚é›†ä¸­å¤„ç† Inputï¼ˆä¸»è¦æ˜¯ Input äº‹ä»¶çš„å¤„ç†ï¼‰ã€Animationï¼ˆåŠ¨ç”»ç›¸å…³ï¼‰ã€Traversalï¼ˆåŒ…æ‹¬ measureã€layoutã€draw ç­‰æ“ä½œï¼‰ï¼Œåˆ¤æ–­å¡é¡¿æ‰å¸§æƒ…å†µï¼Œè®°å½• CallBack è€—æ—¶ç­‰</li>
<li><strong>å¯ä¸‹</strong>ï¼šè´Ÿè´£è¯·æ±‚å’Œæ¥æ”¶ Vsync ä¿¡å·ã€‚æ¥æ”¶ Vsync äº‹ä»¶å›è°ƒï¼ˆé€šè¿‡ FrameDisplayEventReceiver.onVsyncï¼‰ï¼›è¯·æ±‚ Vsyncï¼ˆFrameDisplayEventReceiver.scheduleVsyncï¼‰</li>
</ol>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼ŒChoreographer åœ¨ Android æ¸²æŸ“ç®¡çº¿ä¸­æ‰®æ¼”å…³é”®çš„åè°ƒè€…è§’è‰²ï¼Œå…¶é‡è¦æ€§åœ¨äºé€šè¿‡ <strong>Choreographer + SurfaceFlinger + Vsync + BlastBufferQueue</strong> è¿™ä¸€å¥—å®Œæ•´çš„æ¸²æŸ“æœºåˆ¶ï¼Œç¡®ä¿ Android åº”ç”¨èƒ½å¤Ÿä»¥ç¨³å®šçš„å¸§ç‡è¿è¡Œï¼ˆ60 fpsã€90 fps æˆ– 120 fpsï¼‰ï¼Œæœ‰æ•ˆå‡å°‘å¸§ç‡æ³¢åŠ¨å¸¦æ¥çš„è§†è§‰ä¸é€‚æ„Ÿã€‚</p>
<p>äº†è§£ Choreographer è¿˜å¯ä»¥å¸®åŠ©åº”ç”¨å¼€å‘è€…æ·±å…¥ç†è§£æ¯ä¸€å¸§çš„è¿è¡ŒåŸç†ï¼ŒåŒæ—¶åŠ æ·±å¯¹ <strong>Message</strong>ã€<strong>Handler</strong>ã€<strong>Looper</strong>ã€<strong>MessageQueue</strong>ã€<strong>Input</strong>ã€<strong>Animation</strong>ã€<strong>Measure</strong>ã€<strong>Layout</strong>ã€<strong>Draw</strong> ç­‰æ ¸å¿ƒç»„ä»¶çš„è®¤è¯†ã€‚è®¸å¤š <strong>APM</strong>ï¼ˆåº”ç”¨æ€§èƒ½ç›‘æ§ï¼‰å·¥å…·ä¹Ÿåˆ©ç”¨äº† <strong>Choreographer</strong>ï¼ˆé€šè¿‡ FrameCallback + FrameInfoï¼‰ã€<strong>MessageQueue</strong>ï¼ˆé€šè¿‡ IdleHandlerï¼‰å’Œ <strong>Looper</strong>ï¼ˆé€šè¿‡è‡ªå®šä¹‰ MessageLoggingï¼‰è¿™äº›ç»„åˆæœºåˆ¶è¿›è¡Œæ€§èƒ½ç›‘æµ‹ã€‚æ·±å…¥ç†è§£è¿™äº›æœºåˆ¶åï¼Œå¼€å‘è€…å¯ä»¥æ›´æœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œå½¢æˆç³»ç»ŸåŒ–çš„ä¼˜åŒ–æ€è·¯ã€‚</p>
<p>å¦å¤–ï¼Œè™½ç„¶å›¾è¡¨æ˜¯è§£é‡Šæµç¨‹çš„æœ‰æ•ˆæ–¹å¼ï¼Œä½†æœ¬æ–‡å°†æ›´å¤šä¾èµ– Perfetto å’Œ MethodTrace å·¥å…·çš„å¯è§†åŒ–è¾“å‡ºã€‚Perfetto ä»¥æ—¶é—´çº¿æ–¹å¼ï¼ˆä»å·¦åˆ°å³ï¼‰å±•ç¤ºæ•´ä¸ªç³»ç»Ÿçš„è¿è¡ŒçŠ¶å†µï¼Œæ¶µç›– CPUã€SurfaceFlingerã€SystemServer å’Œåº”ç”¨è¿›ç¨‹ç­‰å…³é”®ç»„ä»¶çš„æ´»åŠ¨ã€‚ä½¿ç”¨ <strong>Perfetto</strong> å’Œ <strong>MethodTrace</strong> å¯ä»¥ç›´è§‚å±•ç¤ºå…³é”®æ‰§è¡Œæµç¨‹ï¼Œå½“æ‚¨ç†Ÿæ‚‰ç³»ç»Ÿä»£ç åï¼ŒPerfetto çš„è¾“å‡ºèƒ½å¤Ÿç›´æ¥æ˜ å°„åˆ°è®¾å¤‡çš„å®é™…è¿è¡ŒçŠ¶æ€ã€‚å› æ­¤ï¼Œæœ¬æ–‡é™¤äº†å¼•ç”¨å°‘é‡ç½‘ç»œå›¾è¡¨å¤–ï¼Œä¸»è¦ä¾é  Perfetto æ¥å±•ç¤ºåˆ†æç»“æœã€‚</p>
<h3 data-id="heading-6">ä» Perfetto çš„è§’åº¦æ¥çœ‹ Choreographer çš„å·¥ä½œæµç¨‹</h3>
<p>ä¸‹å›¾ä»¥æ»‘åŠ¨è®¾ç½®ç•Œé¢ä¸ºä¾‹å­ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä»ä¸Šåˆ°ä¸‹è®¾ç½®ç•Œé¢çš„ä¸€ä¸ªå®Œæ•´çš„é¢„è§ˆå›¾ï¼Œå¯ä»¥çœ‹åˆ° Perfetto ä¸­ä»å·¦åˆ°å³ï¼Œæ¯ä¸€ä¸ªç»¿è‰²çš„å¸§éƒ½è¡¨ç¤ºä¸€å¸§ï¼Œè¡¨ç¤ºæœ€ç»ˆæˆ‘ä»¬å¯ä»¥æ‰‹æœºä¸Šçœ‹åˆ°çš„ç”»é¢</p>
<ol start="0">
<li>å›¾ä¸­æ¯ä¸€ä¸ª VSYNC-app çš„å€¼çš„åŒºé—´æ˜¯ä¸€ä¸ª Vsync çš„æ—¶é—´ï¼Œå¯¹åº”å½“å‰è®¾å¤‡çš„åˆ·æ–°ç‡ï¼Œå¦‚ 60Hz æ—¶ä¸º 16.6msï¼Œ120Hzæ—¶ä¸º8.3msï¼Œä¸Šå‡æ²¿æˆ–è€…ä¸‹é™æ²¿å°±æ˜¯ Vsync åˆ°è¾¾çš„æ—¶é—´</li>
<li>æ¯ä¸€å¸§å¤„ç†çš„æµç¨‹ï¼šæ¥æ”¶åˆ° Vsync ä¿¡å·å›è°ƒ-&gt; UI Thread --&gt; RenderThread --&gt; SurfaceFlinger</li>
<li>UI Thread å’Œ RenderThread å°±å¯ä»¥å®Œæˆ App ä¸€å¸§çš„æ¸²æŸ“ï¼Œåœ¨æœ€æ–°çš„ Android 15 ä¸­ï¼Œé€šè¿‡ BlastBufferQueue æœºåˆ¶ï¼Œæ¸²æŸ“å®Œçš„ Buffer æŠ›ç»™ SurfaceFlinger å»åˆæˆï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨å±å¹•ä¸Šçœ‹åˆ°è¿™ä¸€å¸§äº†</li>
<li>å¯ä»¥çœ‹åˆ°æ¡Œé¢æ»‘åŠ¨çš„æ¯ä¸€å¸§è€—æ—¶éƒ½å¾ˆçŸ­ï¼ˆUi Thread è€—æ—¶ + RenderThread è€—æ—¶ï¼‰ï¼Œä½†æ˜¯ç”±äº Vsync çš„å­˜åœ¨ï¼Œæ¯ä¸€å¸§éƒ½ä¼šç­‰åˆ° Vsync æ‰ä¼šå»åšå¤„ç†</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e044470253754f70b0300f583f0b2758~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=ePq6F4ONhgKzPOrC0Sj3Xp0n058%3D" alt="image.png" loading="lazy"/></p>
<p>æœ‰äº†ä¸Šé¢è¿™ä¸ªæ•´ä½“çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å°† UI Thread çš„æ¯ä¸€å¸§æ”¾å¤§æ¥çœ‹ï¼Œçœ‹çœ‹ Choreographer çš„ä½ç½®ä»¥åŠ Choreographer æ˜¯æ€ä¹ˆç»„ç»‡æ¯ä¸€å¸§çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39349d3592a7409fb4a217957b0e5df9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=%2FqzIlTBUrSFtvzA91q3CdBruW3E%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">Choreographer çš„å·¥ä½œæµç¨‹</h3>
<ol start="0">
<li>Choreographer åˆå§‹åŒ–</li>
<li>åˆå§‹åŒ– FrameHandlerï¼Œç»‘å®š Looper</li>
<li>åˆå§‹åŒ– FrameDisplayEventReceiverï¼Œä¸ SurfaceFlinger å»ºç«‹é€šä¿¡ç”¨äºæ¥æ”¶å’Œè¯·æ±‚ Vsync</li>
<li>åˆå§‹åŒ– CallBackQueues</li>
<li>SurfaceFlinger çš„ appEventThread å”¤é†’å‘é€ Vsyncï¼ŒChoreographer å›è°ƒ FrameDisplayEventReceiver.onVsyncï¼Œè¿›å…¥ Choreographer çš„ä¸»å¤„ç†å‡½æ•° doFrame</li>
<li>Choreographer.doFrame è®¡ç®—æ‰å¸§é€»è¾‘</li>
<li>Choreographer.doFrame å¤„ç† Choreographer çš„ç¬¬ä¸€ä¸ª callbackï¼šinput</li>
<li>Choreographer.doFrame å¤„ç† Choreographer çš„ç¬¬äºŒä¸ª callbackï¼šanimation</li>
<li>Choreographer.doFrame å¤„ç† Choreographer çš„ç¬¬ä¸‰ä¸ª callbackï¼šinsets animation</li>
<li>Choreographer.doFrame å¤„ç† Choreographer çš„ç¬¬å››ä¸ª callbackï¼štraversal</li>
<li>traversal-draw ä¸­ UIThread ä¸ RenderThread åŒæ­¥æ•°æ®</li>
<li>Choreographer.doFrame å¤„ç† Choreographer çš„ç¬¬äº”ä¸ª callbackï¼šcommit</li>
<li>RenderThread å¤„ç†ç»˜åˆ¶å‘½ä»¤</li>
<li>åœ¨ Android S (Android 12) åŠä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼ŒRenderThread é€šè¿‡ BlastBufferQueue å‘ SurfaceFlinger æäº¤ç»˜åˆ¶å†…å®¹</li>
<li>BlastBufferQueue ç”± App ç«¯åˆ›å»ºå’Œç®¡ç†</li>
<li>é€šè¿‡ç”Ÿäº§è€… (BBQ_BufferQueue_Producer) å’Œæ¶ˆè´¹è€… (BufferQueue_Consumer) æ¨¡å‹å·¥ä½œ</li>
<li>UI çº¿ç¨‹ä¸å¿…ç­‰å¾… RenderThread å®Œæˆï¼Œå¯ä»¥æ›´æ—©åœ°å‡†å¤‡ä¸‹ä¸€å¸§ï¼Œå‡å°‘äº†ä¸»çº¿ç¨‹é˜»å¡</li>
</ol>
<p><strong>ç¬¬ä¸€æ­¥åˆå§‹åŒ–å®Œæˆåï¼Œåç»­å°±ä¼šåœ¨æ­¥éª¤ 2-10 ä¹‹é—´å¾ªç¯</strong></p>
<p>åŒæ—¶ä¹Ÿé™„ä¸Šè¿™ä¸€å¸§æ‰€å¯¹åº”çš„ MethodTraceï¼ˆè¿™é‡Œé¢„è§ˆä¸€ä¸‹å³å¯ï¼Œä¸‹é¢ä¼šæœ‰è¯¦ç»†çš„å¤§å›¾ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/498313dd61814c3aac8b32b8b4e1f9fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=5gPCM6alNlBab32b3SEmY%2BILMA4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">Choreographer ä¸ RenderThread åŠ BlastBufferQueue çš„äº¤äº’</h3>
<p>Android S (Android 12) ä¸­ï¼ŒRenderThread ä¸ SurfaceFlinger ä¹‹é—´çš„äº¤äº’å‘ç”Ÿäº†é‡è¦å˜åŒ–ï¼Œå…¶æ ¸å¿ƒæ˜¯ BlastBufferQueue çš„å¼•å…¥ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸€æœºåˆ¶æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<h4 data-id="heading-9">BlastBufferQueue å·¥ä½œåŸç†</h4>
<p>BlastBufferQueue æ˜¯ä¸€ä¸ªä¸“ä¸º UI æ¸²æŸ“ä¼˜åŒ–çš„ BufferQueue å˜ä½“ï¼Œå®ƒæ›¿ä»£äº†ä¼ ç»Ÿç”± SurfaceFlinger åˆ›å»ºçš„ BufferQueueï¼Œè½¬ä¸ºç”± App ç«¯åˆ›å»ºå’Œç®¡ç†ï¼Œç”¨äº App ä¸ SurfaceFlinger ä¹‹é—´çš„ç¼“å†²åŒºç®¡ç†ã€‚</p>
<ol start="0">
<li>
<p><strong>æ›´é«˜æ•ˆçš„ç¼“å†²åŒºç®¡ç†</strong> åœ¨ä¼ ç»Ÿçš„ BufferQueue ä¸­ï¼ŒApp éœ€è¦é€šè¿‡ dequeueBuffer è·å–ä¸€ä¸ªå¯ç”¨çš„ç¼“å†²åŒºï¼Œç„¶åæ¸²æŸ“å†…å®¹ï¼Œæœ€åé€šè¿‡ queueBuffer å°†ç¼“å†²åŒºæäº¤ç»™ SurfaceFlingerã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰å¯ç”¨çš„ç¼“å†²åŒºï¼ŒApp éœ€è¦ç­‰å¾…ï¼Œè¿™ä¼šå¯¼è‡´é˜»å¡ã€‚</p>
<p>BlastBufferQueue é€šè¿‡æ›´æ™ºèƒ½çš„ç¼“å†²åŒºç®¡ç†ï¼Œå‡å°‘äº†è¿™ç§ç­‰å¾…ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜åˆ·æ–°ç‡è®¾å¤‡ä¸Šï¼Œæ•ˆæœæ›´æ˜æ˜¾ã€‚</p>
</li>
<li>
<p><strong>RenderThread ä¸ UI çº¿ç¨‹çš„è§£è€¦</strong> åœ¨ Android S ä¹‹å‰ï¼ŒUI çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰éœ€è¦ç­‰å¾… RenderThread å®Œæˆå·¥ä½œæ‰èƒ½ç»§ç»­å¤„ç†ä¸‹ä¸€å¸§ã€‚è€Œåœ¨æ–°çš„æ¶æ„ä¸­ï¼ŒUI çº¿ç¨‹å¯ä»¥æ›´æ—©åœ°å®Œæˆè‡ªå·±çš„å·¥ä½œï¼Œå°†æ¸²æŸ“ä»»åŠ¡äº¤ç»™ RenderThread åå³å¯å‡†å¤‡ä¸‹ä¸€å¸§çš„å·¥ä½œï¼Œä¸å¿…ç­‰å¾…å½“å‰å¸§å®Œå…¨æ¸²æŸ“å®Œæˆã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åœ¨ ViewRootImpl.performTraversals() ä¸­</span>
<span class="hljs-comment">// æ—§ç‰ˆæœ¬éœ€è¦ç­‰å¾… draw å®Œæˆ</span>
<span class="hljs-built_in">performDraw</span>(); <span class="hljs-comment">// è¿™é‡Œä¼šé˜»å¡ç­‰å¾… RenderThread</span>

<span class="hljs-comment">// BlastBufferQueue å¼•å…¥å</span>
<span class="hljs-built_in">scheduleTraversals</span>(); <span class="hljs-comment">// å¯ä»¥æ›´æ—©åœ°å‡†å¤‡ä¸‹ä¸€å¸§</span>
</code></pre>
</li>
<li>
<p><strong>åˆ›å»ºæœºåˆ¶</strong> BlastBufferQueue åœ¨ ViewRootImpl çš„ relayoutWindow è¿‡ç¨‹ä¸­åˆ›å»ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// åˆ›å»º BBQ çš„ç¤ºä¾‹ä»£ç 
if (<span class="hljs-attr">mBlastBufferQueue</span> == null) {
    <span class="hljs-attr">mBlastBufferQueue</span> = new BLASTBufferQueue(mTag, mSurfaceControl,
        mSurfaceSize.x, mSurfaceSize.y,
        mWindowAttributes.format)<span class="hljs-comment">;</span>
}
</code></pre>
</li>
<li>
<p><strong>ä¸ Choreographer çš„é…åˆ</strong> Choreographer ä»ç„¶æ˜¯åè°ƒè¿™ä¸€åˆ‡çš„æ ¸å¿ƒã€‚å½“ Vsync ä¿¡å·åˆ°æ¥æ—¶ï¼ŒChoreographer ä¼šè§¦å‘ doFrameï¼Œæ‰§è¡Œå„ç§å›è°ƒï¼Œå…¶ä¸­ CALLBACK_TRAVERSAL ä¼šè§¦å‘ ViewRootImpl çš„ performTraversals()ï¼Œæœ€ç»ˆèµ°åˆ° draw æµç¨‹ã€‚</p>
<p>åœ¨ draw æµç¨‹ä¸­ï¼Œé€šè¿‡ BlastBufferQueueï¼ŒRenderThread å¯ä»¥æ›´ç‹¬ç«‹åœ°å·¥ä½œï¼Œè€Œ UI çº¿ç¨‹å¯ä»¥æ›´æ—©åœ°è¿”å›å¤„ç†å…¶ä»–ä»»åŠ¡ã€‚</p>
</li>
</ol>
<p>ä¸‹é¢æˆ‘ä»¬å°±ä»æºç çš„è§’åº¦ï¼Œæ¥çœ‹ä¸€ä¸‹å…·ä½“çš„å®ç°</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-source" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-10">æºç è§£æ</h2>
<p>ä¸‹é¢ä»æºç çš„è§’åº¦æ¥ç®€å•çœ‹ä¸€ä¸‹ï¼Œæºç åªæ‘˜æŠ„äº†éƒ¨åˆ†é‡è¦çš„é€»è¾‘ï¼Œå…¶ä»–çš„é€»è¾‘åˆ™è¢«å‰”é™¤ï¼Œå¦å¤– Native éƒ¨åˆ†ä¸ SurfaceFlinger äº¤äº’çš„éƒ¨åˆ†ä¹Ÿæ²¡æœ‰åˆ—å…¥ï¼Œä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªå·±å»è·Ÿä¸€ä¸‹ã€‚ä¸‹é¢çš„æºç åŸºäºAndroid 15 çš„æœ€æ–°å®ç°ã€‚</p>
<h3 data-id="heading-11">Choreographer çš„åˆå§‹åŒ–</h3>
<h4 data-id="heading-12">Choreographer çš„å•ä¾‹åˆå§‹åŒ–</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Thread local storage for the choreographer.</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Choreographer&gt; sThreadInstance =
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;Choreographer&gt;() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> Choreographer <span class="hljs-title function_">initialValue</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–å½“å‰çº¿ç¨‹çš„ Looper</span>
        <span class="hljs-type">Looper</span> <span class="hljs-variable">looper</span> <span class="hljs-operator">=</span> Looper.myLooper();
        <span class="hljs-keyword">if</span> (looper == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"The current thread must have a looper!"</span>);
        }
        <span class="hljs-comment">// æ„é€  Choreographer å¯¹è±¡ï¼Œä½¿ç”¨ VSYNC_SOURCE_APP ä½œä¸ºVsyncæº</span>
        <span class="hljs-type">Choreographer</span> <span class="hljs-variable">choreographer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Choreographer</span>(looper, VSYNC_SOURCE_APP);
        <span class="hljs-keyword">if</span> (looper == Looper.getMainLooper()) {
            mMainInstance = choreographer;
        }
        <span class="hljs-keyword">return</span> choreographer;
    }
};
</code></pre>
<h4 data-id="heading-13">Choreographer çš„æ„é€ å‡½æ•°</h4>
<pre><code class="hljs language-ini" lang="ini">private Choreographer(Looper looper, int vsyncSource) {
    <span class="hljs-attr">mLooper</span> = looper<span class="hljs-comment">;</span>
    // 1. åˆå§‹åŒ– FrameHandler
    <span class="hljs-attr">mHandler</span> = new FrameHandler(looper)<span class="hljs-comment">;</span>
    // 2. åˆå§‹åŒ– DisplayEventReceiver
    <span class="hljs-attr">mDisplayEventReceiver</span> = USE_VSYNC
            ? new FrameDisplayEventReceiver(looper, vsyncSource)
            : null<span class="hljs-comment">;</span>
    <span class="hljs-attr">mLastFrameTimeNanos</span> = Long.MIN_VALUE<span class="hljs-comment">;</span>
    <span class="hljs-attr">mFrameIntervalNanos</span> = (long)(<span class="hljs-number">1000000000</span> / getRefreshRate())<span class="hljs-comment">;</span>
    //3. åˆå§‹åŒ– CallbacksQueues
    <span class="hljs-attr">mCallbackQueues</span> = new CallbackQueue[CALLBACK_LAST + <span class="hljs-number">1</span>]<span class="hljs-comment">;</span>
    for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt;= CALLBACK_LAST; i++) {</span>
        mCallbackQueues<span class="hljs-section">[i]</span> = new CallbackQueue()<span class="hljs-comment">;</span>
    }
    ......
}
</code></pre>
<h4 data-id="heading-14">FrameHandler</h4>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FrameHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Handler</span> </span>{
    ......
    public void handleMessage(<span class="hljs-type">Message</span> msg) {
        switch (msg.what) {
            <span class="hljs-keyword">case</span> <span class="hljs-type">MSG_DO_FRAME</span>:<span class="hljs-comment">//å¼€å§‹æ¸²æŸ“ä¸‹ä¸€å¸§çš„æ“ä½œ</span>
                doFrame(<span class="hljs-type">System</span>.nanoTime(), <span class="hljs-number">0</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-type">MSG_DO_SCHEDULE_VSYNC</span>:<span class="hljs-comment">//è¯·æ±‚ Vsync </span>
                doScheduleVsync();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-type">MSG_DO_SCHEDULE_CALLBACK</span>:<span class="hljs-comment">//å¤„ç† Callback</span>
                doScheduleCallback(msg.arg1);
                <span class="hljs-keyword">break</span>;
        }
    }
}
</code></pre>
<h4 data-id="heading-15">Choreographer åˆå§‹åŒ–é“¾</h4>
<p>åœ¨ Activity å¯åŠ¨è¿‡ç¨‹ï¼Œæ‰§è¡Œå®Œ onResume åï¼Œä¼šè°ƒç”¨ Activity.makeVisible()ï¼Œç„¶åå†è°ƒç”¨åˆ° addView()ï¼Œ å±‚å±‚è°ƒç”¨ä¼šè¿›å…¥å¦‚ä¸‹æ–¹æ³•</p>
<pre><code class="hljs language-scss" lang="scss">ActivityThread<span class="hljs-selector-class">.handleResumeActivity</span>(IBinder, boolean, boolean, String) (android.app) 
--&gt;WindowManagerImpl<span class="hljs-selector-class">.addView</span>(View, LayoutParams) (android.view) 
  --&gt;WindowManagerGlobal<span class="hljs-selector-class">.addView</span>(View, LayoutParams, Display, Window) (android.view) 
    --&gt;ViewRootImpl<span class="hljs-selector-class">.ViewRootImpl</span>(Context, Display) (android.view) 
    public <span class="hljs-built_in">ViewRootImpl</span>(Context context, Display display) {
        ......
        mChoreographer = Choreographer<span class="hljs-selector-class">.getInstance</span>();
        ......
    }
</code></pre>
<h3 data-id="heading-16">FrameDisplayEventReceiver ç®€ä»‹</h3>
<p>Vsync çš„æ³¨å†Œã€ç”³è¯·ã€æ¥æ”¶éƒ½æ˜¯é€šè¿‡ FrameDisplayEventReceiver è¿™ä¸ªç±»ï¼Œæ‰€ä»¥å¯ä»¥å…ˆç®€å•ä»‹ç»ä¸€ä¸‹ã€‚ FrameDisplayEventReceiver ç»§æ‰¿ DisplayEventReceiver ï¼Œ æœ‰ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„æ–¹æ³•</p>
<ol start="0">
<li>onVsync -- Vsync ä¿¡å·å›è°ƒ</li>
<li>run -- æ‰§è¡Œ doFrame</li>
<li>scheduleVsync -- è¯·æ±‚ Vsync ä¿¡å·</li>
</ol>

<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FrameDisplayEventReceiver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DisplayEventReceiver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    ......
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onVsync</span><span class="hljs-params">(<span class="hljs-type">long</span> timestampNanos, <span class="hljs-type">long</span> physicalDisplayId, <span class="hljs-type">int</span> frame, VsyncEventData eventData)</span> {
        ......
        mTimestampNanos = timestampNanos;
        mFrame = frame;
        <span class="hljs-comment">// Android 15ä¸­æ–°å¢çš„VsyncEventDataä¼ é€’æ›´ä¸°å¯Œçš„Vsyncäº‹ä»¶æ•°æ®</span>
        mVsyncEventData = eventData;
        <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Message.obtain(mHandler, <span class="hljs-built_in">this</span>);
        msg.setAsynchronous(<span class="hljs-literal">true</span>);
        mHandler.sendMessageAtTime(msg, timestampNanos / TimeUtils.NANOS_PER_MS);
    }
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        mHavePendingVsync = <span class="hljs-literal">false</span>;
        doFrame(mTimestampNanos, mFrame, mVsyncEventData);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">scheduleVsync</span><span class="hljs-params">()</span> {
        ......  
        nativeScheduleVsync(mReceiverPtr);
        ......
    }
}
</code></pre>
<h3 data-id="heading-17">Choreographer ä¸­ Vsync çš„æ³¨å†Œ</h3>
<p>ä»ä¸‹é¢çš„å‡½æ•°è°ƒç”¨æ ˆå¯ä»¥çœ‹åˆ°ï¼ŒChoreographer çš„å†…éƒ¨ç±» FrameDisplayEventReceiver.onVsync è´Ÿè´£æ¥æ”¶ Vsync å›è°ƒï¼Œé€šçŸ¥ UIThread è¿›è¡Œæ•°æ®å¤„ç†ã€‚</p>
<p>é‚£ä¹ˆ FrameDisplayEventReceiver æ˜¯é€šè¿‡ä»€ä¹ˆæ–¹å¼åœ¨ Vsync ä¿¡å·åˆ°æ¥çš„æ—¶å€™å›è°ƒ onVsync å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ FrameDisplayEventReceiver çš„åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæœ€ç»ˆé€šè¿‡ç›‘å¬æ–‡ä»¶å¥æŸ„çš„å½¢å¼ï¼Œå…¶å¯¹åº”çš„åˆå§‹åŒ–æµç¨‹å¦‚ä¸‹</p>
<p>android/view/Choreographer.java</p>
<pre><code class="hljs language-ini" lang="ini">private Choreographer(Looper looper, int vsyncSource) {
    <span class="hljs-attr">mLooper</span> = looper<span class="hljs-comment">;</span>
    <span class="hljs-attr">mDisplayEventReceiver</span> = USE_VSYNC
            ? new FrameDisplayEventReceiver(looper, vsyncSource)
            : null<span class="hljs-comment">;</span>
    ......
}
</code></pre>
<p>android/view/Choreographer.java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">FrameDisplayEventReceiver</span><span class="hljs-params">(Looper looper, <span class="hljs-type">int</span> vsyncSource)</span> {
    <span class="hljs-built_in">super</span>(looper, vsyncSource);
}
</code></pre>
<p>android/view/DisplayEventReceiver.java</p>
<pre><code class="hljs language-ini" lang="ini">public DisplayEventReceiver(Looper looper, int vsyncSource) {
    ......
    <span class="hljs-attr">mMessageQueue</span> = looper.getQueue()<span class="hljs-comment">;</span>
    <span class="hljs-attr">mReceiverPtr</span> = nativeInit(new WeakReference&lt;DisplayEventReceiver&gt;(this), mMessageQueue,
            vsyncSource)<span class="hljs-comment">;</span>
}
</code></pre>
<p>ç®€å•æ¥è¯´ï¼ŒFrameDisplayEventReceiver çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ BitTube (æœ¬è´¨æ˜¯ä¸€ä¸ª socket pair)ï¼Œæ¥ä¼ é€’å’Œè¯·æ±‚ Vsync äº‹ä»¶ï¼Œå½“ SurfaceFlinger æ”¶åˆ° Vsync äº‹ä»¶ä¹‹åï¼Œé€šè¿‡ appEventThread å°†è¿™ä¸ªäº‹ä»¶é€šè¿‡ BitTube ä¼ ç»™ DisplayEventDispatcherï¼ŒDisplayEventDispatcher é€šè¿‡ BitTube çš„æ¥æ”¶ç«¯ç›‘å¬åˆ° Vsync äº‹ä»¶ä¹‹åï¼Œå›è°ƒ Choreographer.FrameDisplayEventReceiver.onVsyncï¼Œè§¦å‘å¼€å§‹ä¸€å¸§çš„ç»˜åˆ¶ï¼Œå¦‚ä¸‹å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecb072fe65a74dc49ae9a2ad2c4bfebd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=SFOeMQ4g5%2BBVAuqHmTpoNsPAq8c%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-18">DisplayEventReceiver ä¸ SurfaceFlinger çš„é€šä¿¡ç»†èŠ‚</h4>
<p>åœ¨ Android ç³»ç»Ÿä¸­ï¼ŒDisplayEventReceiver é€šè¿‡ JNI è°ƒç”¨ nativeInit æ–¹æ³•æ¥å»ºç«‹ä¸ SurfaceFlinger æœåŠ¡çš„é€šä¿¡é€šé“ã€‚è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠå¤šä¸ªå…³é”®æ­¥éª¤ï¼š</p>
<ol start="0">
<li><strong>åˆ›å»º NativeDisplayEventReceiver å¯¹è±¡</strong>ï¼šåœ¨ Java å±‚è°ƒç”¨ nativeInit åï¼ŒJNI åˆ›å»ºä¸€ä¸ª NativeDisplayEventReceiver å®ä¾‹ï¼Œç”¨äºæ¥æ”¶ Vsync ä¿¡å·ã€‚</li>
<li><strong>è·å– IDisplayEventConnection</strong>ï¼šé€šè¿‡ ISurfaceComposer æ¥å£è·å– IDisplayEventConnectionï¼Œè¿™æ˜¯ä¸€ä¸ª Binder æ¥å£ï¼Œç”¨äºä¸ SurfaceFlinger æœåŠ¡é€šä¿¡ã€‚</li>
<li><strong>å»ºç«‹ BitTube è¿æ¥</strong>ï¼šBitTube æ˜¯ä¸€ä¸ªåŸºäº socket pair çš„é€šä¿¡æœºåˆ¶ï¼Œä¸“ä¸ºé«˜é¢‘ã€å°æ•°æ®é‡çš„è·¨è¿›ç¨‹é€šä¿¡è®¾è®¡ã€‚å®ƒåœ¨ App è¿›ç¨‹å’Œ SurfaceFlinger è¿›ç¨‹ä¹‹é—´åˆ›å»ºä¸€ä¸ªé«˜æ•ˆçš„é€šä¿¡é€šé“ã€‚</li>
<li><strong>æ–‡ä»¶æè¿°ç¬¦ç›‘å¬</strong>ï¼šé€šè¿‡ Looper ç›‘å¬ BitTube çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå½“æœ‰ Vsync ä¿¡å·åˆ°æ¥æ—¶ï¼ŒLooper ä¼šé€šçŸ¥ DisplayEventDispatcher å¤„ç†äº‹ä»¶ã€‚</li>
</ol>
<p>æ•´ä¸ªé€šä¿¡æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">App è¿›ç¨‹                                    SurfaceFlinger è¿›ç¨‹
  |                                             |
  |<span class="hljs-comment">-- åˆ›å»º DisplayEventReceiver --------------&gt;|</span>
  |                                             |
  |&lt;- è¿”å› IDisplayEventConnection (Binder) <span class="hljs-comment">----|</span>
  |                                             |
  |<span class="hljs-comment">-- åˆ›å»º BitTube --------------------------&gt;|</span>
  |                                             |
  |&lt;- æ–‡ä»¶æè¿°ç¬¦äº¤æ¢ <span class="hljs-comment">--------------------------|</span>
  |                                             |
  |<span class="hljs-comment">-- æ³¨å†Œæ–‡ä»¶æè¿°ç¬¦åˆ° Looper ----------------|</span>
  |                                             |
  |<span class="hljs-comment">-- è¯·æ±‚ Vsync (requestNextVsync) ----------&gt;|</span>
  |                                             |
  |&lt;- å‘é€ Vsync äº‹ä»¶æ•°æ® <span class="hljs-comment">---------------------|</span>
  |                                             |
  |<span class="hljs-comment">-- Looper é€šçŸ¥ -&gt; handleEvent -------------|</span>
  |                                             |
  |<span class="hljs-comment">-- å›è°ƒ Java å±‚ onVsync -------------------|</span>
  |                                             |
</code></pre>
<p>è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿åœ¨äºé¿å…äº†ä½¿ç”¨ Binder ä¼ é€’é«˜é¢‘çš„ Vsync äº‹ä»¶æ•°æ®ï¼Œé€šè¿‡ç›´æ¥çš„ socket é€šä¿¡æé«˜äº†æ€§èƒ½å’Œå®æ—¶æ€§ï¼Œè¿™å¯¹äºä¿è¯æµç•…çš„ UI æ¸²æŸ“è‡³å…³é‡è¦ã€‚åŒæ—¶ï¼Œç”±äº BitTube ä½¿ç”¨äº†æ–‡ä»¶æè¿°ç¬¦ï¼Œå¯ä»¥æ— ç¼é›†æˆåˆ° Android çš„ Looper æœºåˆ¶ä¸­ï¼Œä½¿å¾—æ•´ä¸ªç³»ç»Ÿèƒ½å¤Ÿä»¥äº‹ä»¶é©±åŠ¨çš„æ–¹å¼å·¥ä½œã€‚</p>
<h3 data-id="heading-19">Choreographer å¤„ç†ä¸€å¸§çš„é€»è¾‘</h3>
<p>Choreographer å¤„ç†ç»˜åˆ¶çš„é€»è¾‘æ ¸å¿ƒåœ¨ Choreographer.doFrame å‡½æ•°ä¸­ï¼Œä»ä¸‹å›¾å¯ä»¥çœ‹åˆ°ï¼ŒFrameDisplayEventReceiver.onVsync post äº†è‡ªå·±ï¼Œå…¶ run æ–¹æ³•ç›´æ¥è°ƒç”¨äº† doFrame å¼€å§‹ä¸€å¸§çš„é€»è¾‘å¤„ç†</p>
<p>android/view/Choreographer.java</p>
<pre><code class="hljs language-ini" lang="ini">public void onVsync(long timestampNanos, long physicalDisplayId, int frame, VsyncEventData eventData) {
    ......
    <span class="hljs-attr">mTimestampNanos</span> = timestampNanos<span class="hljs-comment">;</span>
    <span class="hljs-attr">mFrame</span> = frame<span class="hljs-comment">;</span>
    <span class="hljs-attr">mVsyncEventData</span> = eventData<span class="hljs-comment">;</span>
    Message <span class="hljs-attr">msg</span> = Message.obtain(mHandler, this)<span class="hljs-comment">;</span>
    msg.setAsynchronous(true)<span class="hljs-comment">;</span>
    mHandler.sendMessageAtTime(msg, timestampNanos / TimeUtils.NANOS_PER_MS)<span class="hljs-comment">;</span>
}
public void run() {
    <span class="hljs-attr">mHavePendingVsync</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
    doFrame(mTimestampNanos, mFrame, mVsyncEventData)<span class="hljs-comment">;</span>
}
</code></pre>
<p>doFrame å‡½æ•°ä¸»è¦åšä¸‹é¢å‡ ä»¶äº‹</p>
<ol start="0">
<li>è®¡ç®—æ‰å¸§é€»è¾‘</li>
<li>è®°å½•å¸§ç»˜åˆ¶ä¿¡æ¯</li>
<li>æ‰§è¡Œ CALLBACK_INPUTã€CALLBACK_ANIMATIONã€CALLBACK_INSETS_ANIMATIONã€CALLBACK_TRAVERSALã€CALLBACK_COMMIT</li>
</ol>
<h4 data-id="heading-20">è®°å½•å¸§ç»˜åˆ¶ä¿¡æ¯</h4>
<p>Choreographer ä¸­ FrameInfo æ¥è´Ÿè´£è®°å½•å¸§çš„ç»˜åˆ¶ä¿¡æ¯ï¼ŒdoFrame æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šæŠŠæ¯ä¸€ä¸ªå…³é”®èŠ‚ç‚¹çš„ç»˜åˆ¶æ—¶é—´è®°å½•ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ dumpsys gfxinfo å°±å¯ä»¥çœ‹åˆ°ã€‚å½“ç„¶ Choreographer åªæ˜¯è®°å½•äº†ä¸€éƒ¨åˆ†ï¼Œå‰©ä½™çš„éƒ¨åˆ†åœ¨ hwui é‚£è¾¹æ¥è®°å½•ã€‚</p>
<p>ä» FrameInfo è¿™äº›æ ‡å¿—å°±å¯ä»¥çœ‹å‡ºè®°å½•çš„å†…å®¹ï¼Œåé¢æˆ‘ä»¬çœ‹ dumpsys gfxinfo çš„æ—¶å€™æ•°æ®å°±æ˜¯æŒ‰ç…§è¿™ä¸ªæ¥æ’åˆ—çš„</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> FrameInfoFlags {}

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FRAME_TIMELINE_VSYNC_ID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

    <span class="hljs-comment">// The intended vsync time, unadjusted by jitter</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INTENDED_VSYNC</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;

    <span class="hljs-comment">// Jitter-adjusted vsync time, this is what was used as input into the</span>
    <span class="hljs-comment">// animation &amp; drawing system</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">VSYNC</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;

    <span class="hljs-comment">// The id of the input event that caused the current frame</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INPUT_EVENT_ID</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;

    <span class="hljs-comment">// When input event handling started</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">HANDLE_INPUT_START</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;

    <span class="hljs-comment">// When animation evaluations started</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">ANIMATION_START</span> <span class="hljs-operator">=</span> <span class="hljs-number">6</span>;

    <span class="hljs-comment">// When ViewRootImpl#performTraversals() started</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">PERFORM_TRAVERSALS_START</span> <span class="hljs-operator">=</span> <span class="hljs-number">7</span>;

    <span class="hljs-comment">// When View:draw() started</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">DRAW_START</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>;

    <span class="hljs-comment">// When the frame needs to be ready by</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FRAME_DEADLINE</span> <span class="hljs-operator">=</span> <span class="hljs-number">9</span>;

    <span class="hljs-comment">// When frame actually started.</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FRAME_START_TIME</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;

    <span class="hljs-comment">// Interval between two consecutive frames</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FRAME_INTERVAL</span> <span class="hljs-operator">=</span> <span class="hljs-number">11</span>;
</code></pre>
<p>doFrame å‡½æ•°è®°å½•ä» Vsync time åˆ° markPerformTraversalsStart çš„æ—¶é—´</p>
<pre><code class="hljs language-scss" lang="scss">void <span class="hljs-built_in">doFrame</span>(long frameTimeNanos, int frame, VsyncEventData eventData) {
    ......
    mFrameInfo<span class="hljs-selector-class">.setVsync</span>(intendedFrameTimeNanos, frameTimeNanos);
    <span class="hljs-comment">// å¤„ç† CALLBACK_INPUT Callbacks </span>
    mFrameInfo<span class="hljs-selector-class">.markInputHandlingStart</span>();
    <span class="hljs-comment">// å¤„ç† CALLBACK_ANIMATION Callbacks</span>
    mFrameInfo<span class="hljs-selector-class">.markAnimationsStart</span>();
    <span class="hljs-comment">// å¤„ç† CALLBACK_INSETS_ANIMATION Callbacks</span>
    <span class="hljs-comment">// å¤„ç† CALLBACK_TRAVERSAL Callbacks</span>
    mFrameInfo<span class="hljs-selector-class">.markPerformTraversalsStart</span>();
    <span class="hljs-comment">// å¤„ç† CALLBACK_COMMIT Callbacks</span>
    ......
}
</code></pre>
<h4 data-id="heading-21">æ‰§è¡Œ Callbacks</h4>
<pre><code class="hljs language-scss" lang="scss">void <span class="hljs-built_in">doFrame</span>(long frameTimeNanos, int frame, VsyncEventData eventData) {
    ......
    <span class="hljs-comment">// å¤„ç† CALLBACK_INPUT Callbacks </span>
    <span class="hljs-built_in">doCallbacks</span>(Choreographer.CALLBACK_INPUT, frameTimeNanos);
    <span class="hljs-comment">// å¤„ç† CALLBACK_ANIMATION Callbacks</span>
    <span class="hljs-built_in">doCallbacks</span>(Choreographer.CALLBACK_ANIMATION, frameTimeNanos);
    <span class="hljs-comment">// å¤„ç† CALLBACK_INSETS_ANIMATION Callbacks</span>
    <span class="hljs-built_in">doCallbacks</span>(Choreographer.CALLBACK_INSETS_ANIMATION, frameTimeNanos);
    <span class="hljs-comment">// å¤„ç† CALLBACK_TRAVERSAL Callbacks</span>
    <span class="hljs-built_in">doCallbacks</span>(Choreographer.CALLBACK_TRAVERSAL, frameTimeNanos);
    <span class="hljs-comment">// å¤„ç† CALLBACK_COMMIT Callbacks</span>
    <span class="hljs-built_in">doCallbacks</span>(Choreographer.CALLBACK_COMMIT, frameTimeNanos);
    ......
}
</code></pre>
<p><strong>Input å›è°ƒè°ƒç”¨æ ˆ</strong></p>
<p><strong>input callback</strong> ä¸€èˆ¬æ˜¯æ‰§è¡Œ ViewRootImpl.ConsumeBatchedInputRunnable</p>
<p>android/view/ViewRootImpl.java</p>
<pre><code class="hljs language-scss" lang="scss">final class ConsumeBatchedInputRunnable implements Runnable {
    <span class="hljs-keyword">@Override</span>
    public void run() {
        <span class="hljs-built_in">doConsumeBatchedInput</span>(mChoreographer.getFrameTimeNanos());
    }
}
void <span class="hljs-built_in">doConsumeBatchedInput</span>(long frameTimeNanos) {
    if (mConsumeBatchedInputScheduled) {
        mConsumeBatchedInputScheduled = false;
        if (mInputEventReceiver != null) {
            if (mInputEventReceiver.consumeBatchedInputEvents(frameTimeNanos)
                    &amp;&amp; frameTimeNanos != -<span class="hljs-number">1</span>) {
                <span class="hljs-built_in">scheduleConsumeBatchedInput</span>();
            }
        }
        <span class="hljs-built_in">doProcessInputEvents</span>();
    }
}
</code></pre>
<p>Input æ—¶é—´ç»è¿‡å¤„ç†ï¼Œæœ€ç»ˆä¼šä¼ ç»™ DecorView çš„ dispatchTouchEventï¼Œè¿™å°±åˆ°äº†æˆ‘ä»¬ç†Ÿæ‚‰çš„ Input äº‹ä»¶åˆ†å‘</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/191afc55352b410aba974f863eaf63ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=EymscEVenPYx%2F3ysEYGXvKvQO80%3D" alt="image.png" loading="lazy"/></p>
<p><strong>Animation å›è°ƒè°ƒç”¨æ ˆ</strong></p>
<p>ä¸€èˆ¬æˆ‘ä»¬æ¥è§¦çš„å¤šçš„æ˜¯è°ƒç”¨ View.postOnAnimation çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨åˆ° CALLBACK_ANIMATION</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postOnAnimation</span><span class="hljs-params">(Runnable action)</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-type">AttachInfo</span> <span class="hljs-variable">attachInfo</span> <span class="hljs-operator">=</span> mAttachInfo;
    <span class="hljs-keyword">if</span> (attachInfo != <span class="hljs-literal">null</span>) {
        attachInfo.mViewRootImpl.mChoreographer.postCallback(
                Choreographer.CALLBACK_ANIMATION, action, <span class="hljs-literal">null</span>);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// Postpone the runnable until we know</span>
        <span class="hljs-comment">// on which thread it needs to run.</span>
        getRunQueue().post(action);
    }
}
</code></pre>
<p>é‚£ä¹ˆä¸€èˆ¬æ˜¯ä»€ä¹ˆæ—¶å€™å›è°ƒç”¨åˆ° View.postOnAnimation å‘¢ï¼Œæˆ‘æˆªå–äº†ä¸€å¼ å›¾ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å»çœ‹ä¸€ä¸‹ï¼Œæ¥è§¦æœ€å¤šçš„åº”è¯¥æ˜¯ startScrollï¼ŒFling è¿™ç§æ“ä½œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ff4c311317045aa8dab1aa4cdfa6be5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=rpFceew2HpdwDb0cXW4%2BmdU%2FWjQ%3D" alt="image.png" loading="lazy"/></p>
<p>å…¶è°ƒç”¨æ ˆæ ¹æ®å…¶ post çš„å†…å®¹ï¼Œä¸‹é¢æ˜¯æ¾æ‰‹ä¹‹åçš„ fling åŠ¨ç”»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22d48f425c9e44a087e0e2f00247f452~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=fY5JEsBPX%2FpUbmadHfJvXEqhhQs%3D" alt="image.png" loading="lazy"/></p>
<p>å¦å¤–æˆ‘ä»¬çš„ Choreographer çš„ FrameCallback ä¹Ÿæ˜¯ç”¨çš„ CALLBACK_ANIMATION</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">postFrameCallbackDelayed</span>(<span class="hljs-params">FrameCallback callback, <span class="hljs-built_in">long</span> delayMillis</span>)</span> {
    <span class="hljs-keyword">if</span> (callback == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">"callback must not be null"</span>);
    }

    postCallbackDelayedInternal(CALLBACK_ANIMATION,
            callback, FRAME_CALLBACK_TOKEN, delayMillis);
}
</code></pre>
<p><strong>Traversal è°ƒç”¨æ ˆ</strong></p>
<pre><code class="hljs language-scss" lang="scss">void <span class="hljs-built_in">scheduleTraversals</span>() {
    if (!mTraversalScheduled) {
        mTraversalScheduled = true;
        <span class="hljs-comment">//ä¸ºäº†æé«˜ä¼˜å…ˆçº§ï¼Œå…ˆ postSyncBarrier</span>
        mTraversalBarrier = mHandler<span class="hljs-selector-class">.getLooper</span>()<span class="hljs-selector-class">.getQueue</span>()<span class="hljs-selector-class">.postSyncBarrier</span>();
        mChoreographer<span class="hljs-selector-class">.postCallback</span>(
                Choreographer.CALLBACK_TRAVERSAL, mTraversalRunnable, null);
    }
}

final class TraversalRunnable implements Runnable {
    <span class="hljs-keyword">@Override</span>
    public void run() {
        <span class="hljs-comment">// çœŸæ­£å¼€å§‹æ‰§è¡Œ measureã€layoutã€draw</span>
        <span class="hljs-built_in">doTraversal</span>();
    }
}
void <span class="hljs-built_in">doTraversal</span>() {
    if (mTraversalScheduled) {
        mTraversalScheduled = false;
        <span class="hljs-comment">// è¿™é‡ŒæŠŠ SyncBarrier remove</span>
mHandler<span class="hljs-selector-class">.getLooper</span>()<span class="hljs-selector-class">.getQueue</span>()<span class="hljs-selector-class">.removeSyncBarrier</span>(mTraversalBarrier);
        <span class="hljs-comment">// çœŸæ­£å¼€å§‹</span>
        <span class="hljs-built_in">performTraversals</span>();
    }
}
private void <span class="hljs-built_in">performTraversals</span>() {
      <span class="hljs-comment">// measure æ“ä½œ</span>
      if (focusChangedDueToTouchMode || mWidth != host.getMeasuredWidth() || mHeight != host<span class="hljs-selector-class">.getMeasuredHeight</span>() || contentInsetsChanged || updatedConfiguration) {
            <span class="hljs-built_in">performMeasure</span>(childWidthMeasureSpec, childHeightMeasureSpec);
      }
      <span class="hljs-comment">// layout æ“ä½œ</span>
      if (didLayout) {
          <span class="hljs-built_in">performLayout</span>(lp, mWidth, mHeight);
      }
      <span class="hljs-comment">// draw æ“ä½œ</span>
      if (!cancelDraw &amp;&amp; !newSurface) {
          <span class="hljs-built_in">performDraw</span>();
      }
}
</code></pre>
<p><strong>doTraversal çš„ TraceView ç¤ºä¾‹</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75ae7521950b4456a9621e4596e0bc58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=JiFgX7RLtc3tGRBda4x2a87WhO0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-22">ä¸‹ä¸€å¸§çš„ Vsync è¯·æ±‚</h3>
<p>ç”±äºåŠ¨ç”»ã€æ»‘åŠ¨ã€Fling è¿™äº›æ“ä½œçš„å­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¿ç»­çš„ã€ç¨³å®šçš„å¸§ç‡è¾“å‡ºæœºåˆ¶ã€‚è¿™å°±æ¶‰åŠåˆ°äº† Vsync çš„è¯·æ±‚é€»è¾‘ï¼Œåœ¨è¿ç»­çš„æ“ä½œï¼Œæ¯”å¦‚åŠ¨ç”»ã€æ»‘åŠ¨ã€Fling è¿™äº›æƒ…å†µä¸‹ï¼Œæ¯ä¸€å¸§çš„ doFrame çš„æ—¶å€™ï¼Œéƒ½ä¼šæ ¹æ®æƒ…å†µè§¦å‘ä¸‹ä¸€ä¸ª Vsync çš„ç”³è¯·ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è·å¾—è¿ç»­çš„ Vsync ä¿¡å·ã€‚</p>
<p>çœ‹ä¸‹é¢çš„ scheduleTraversals è°ƒç”¨æ ˆ(scheduleTraversals ä¸­ä¼šè§¦å‘ Vsync è¯·æ±‚)</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e74c0706538541eeb14819b57e214bf5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=57Sl%2B6b1maAne1N4NxqN46405ms%3D" alt="image.png" loading="lazy"/>
æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„ invalidate å’Œ requestLayout éƒ½ä¼šè§¦å‘ Vsync ä¿¡å·è¯·æ±‚</p>
<p>æˆ‘ä»¬ä¸‹é¢ä»¥ Animation ä¸ºä¾‹ï¼Œçœ‹çœ‹ Animation æ˜¯å¦‚ä½•é©±åŠ¨ä¸‹ä¸€ä¸ª Vsync ï¼Œæ¥æŒç»­æ›´æ–°ç”»é¢çš„</p>
<h4 data-id="heading-23">ObjectAnimator åŠ¨ç”»é©±åŠ¨é€»è¾‘</h4>
<p>android/animation/ObjectAnimator.java</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">start</span>();
}
</code></pre>
<p>android/animation/ValueAnimator.java</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">start</span><span class="hljs-params">(<span class="hljs-type">boolean</span> playBackwards)</span> </span>{
    ......
    <span class="hljs-built_in">addAnimationCallback</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// åŠ¨ç”» start çš„æ—¶å€™æ·»åŠ  Animation Callback </span>
    ......
}
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">addAnimationCallback</span><span class="hljs-params">(<span class="hljs-type">long</span> delay)</span> </span>{
    ......
    <span class="hljs-built_in">getAnimationHandler</span>().<span class="hljs-built_in">addAnimationFrameCallback</span>(<span class="hljs-keyword">this</span>, delay);
}
</code></pre>
<p>android/animation/AnimationHandler.java</p>
<pre><code class="hljs language-scss" lang="scss">public void <span class="hljs-built_in">addAnimationFrameCallback</span>(final AnimationFrameCallback callback, long delay) {
    if (mAnimationCallbacks.size() == <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// post FrameCallback</span>
        <span class="hljs-built_in">getProvider</span>()<span class="hljs-selector-class">.postFrameCallback</span>(mFrameCallback);
    }
    ......
}

<span class="hljs-comment">// è¿™é‡Œçš„ mFrameCallback å›è°ƒ doFrameï¼Œé‡Œé¢ postäº†è‡ªå·±</span>
private final Choreographer<span class="hljs-selector-class">.FrameCallback</span> mFrameCallback = new Choreographer<span class="hljs-selector-class">.FrameCallback</span>() {
    <span class="hljs-keyword">@Override</span>
    public void doFrame(long frameTimeNanos) {
        <span class="hljs-built_in">doAnimationFrame</span>(getProvider()<span class="hljs-selector-class">.getFrameTime</span>());
        if (mAnimationCallbacks.size() &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// post è‡ªå·±</span>
            <span class="hljs-built_in">getProvider</span>()<span class="hljs-selector-class">.postFrameCallback</span>(this);
        }
    }
};
</code></pre>
<p>è°ƒç”¨ postFrameCallback ä¼šèµ°åˆ° mChoreographer.postFrameCallback ï¼Œè¿™é‡Œå°±ä¼šè§¦å‘ Choreographer çš„ Vsync è¯·æ±‚é€»è¾‘</p>
<p>android/animation/AnimationHandler.java</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">postFrameCallback</span>(<span class="hljs-params">Choreographer.FrameCallback callback</span>) {
    mChoreographer.<span class="hljs-title function_">postFrameCallback</span>(callback);
}
</code></pre>
<p>android/view/Choreographer.java</p>
<pre><code class="hljs language-ini" lang="ini">private void postCallbackDelayedInternal(int callbackType,
        Object action, Object token, long delayMillis) {
    synchronized (mLock) {
        final long <span class="hljs-attr">now</span> = SystemClock.uptimeMillis()<span class="hljs-comment">;</span>
        final long <span class="hljs-attr">dueTime</span> = now + delayMillis<span class="hljs-comment">;</span>
        mCallbackQueues<span class="hljs-section">[callbackType]</span>.addCallbackLocked(dueTime, action, token)<span class="hljs-comment">;</span>

        if (dueTime &lt;= now) {
            // è¯·æ±‚ Vsync scheduleFrameLocked -&gt;scheduleVsyncLocked-&gt; mDisplayEventReceiver.scheduleVsync -&gt;nativeScheduleVsync
            scheduleFrameLocked(now)<span class="hljs-comment">;</span>
        } else {
            Message <span class="hljs-attr">msg</span> = mHandler.obtainMessage(MSG_DO_SCHEDULE_CALLBACK, action)<span class="hljs-comment">;</span>
            <span class="hljs-attr">msg.arg1</span> = callbackType<span class="hljs-comment">;</span>
            msg.setAsynchronous(true)<span class="hljs-comment">;</span>
            mHandler.sendMessageAtTime(msg, dueTime)<span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<p>é€šè¿‡ä¸Šé¢çš„ Animation.start è®¾ç½®ï¼Œåˆ©ç”¨äº† Choreographer.FrameCallback æ¥å£ï¼Œæ¯ä¸€å¸§éƒ½å»è¯·æ±‚ä¸‹ä¸€ä¸ª Vsync <strong>åŠ¨ç”»è¿‡ç¨‹ä¸­ä¸€å¸§çš„ TraceView ç¤ºä¾‹</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c92a55ee533c4d489d675004803527c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=hZvDGY7bFZ0GhWmLN84B%2BorD3eM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-24">æºç å°ç»“</h3>
<ol start="0">
<li>
<p><strong>Choreographer</strong> é‡‡ç”¨çº¿ç¨‹å•ä¾‹æ¨¡å¼è®¾è®¡ï¼Œä¸Looperå¼ºè€¦åˆã€‚æ¯ä¸ªçº¿ç¨‹åªèƒ½æ‹¥æœ‰ä¸€ä¸ªChoreographerå®ä¾‹ï¼Œä¸”å¿…é¡»ç»‘å®šä¸€ä¸ªæœ‰æ•ˆçš„Looperå¯¹è±¡ï¼Œå› ä¸ºå…¶å†…éƒ¨Handlerä¾èµ–Looperè¿›è¡Œæ¶ˆæ¯åˆ†å‘ã€‚åœ¨åº”ç”¨ä¸­ï¼Œé€šå¸¸ç»‘å®šä¸»çº¿ç¨‹çš„Looperä»¥ç¡®ä¿UIæ“ä½œçš„çº¿ç¨‹å®‰å…¨æ€§ã€‚</p>
</li>
<li>
<p><strong>DisplayEventReceiver</strong> æ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œå…¶JNIå®ç°åˆ›å»ºIDisplayEventConnectionå¯¹è±¡ä½œä¸ºVsyncä¿¡å·çš„ç›‘å¬å™¨ã€‚é€šè¿‡æ­¤æœºåˆ¶ï¼ŒSurfaceFlingerçš„AppEventThreadå‘å‡ºçš„Vsyncä¸­æ–­ä¿¡å·èƒ½å¤Ÿè¢«ç²¾ç¡®ä¼ é€’åˆ°Choreographerå®ä¾‹ã€‚å½“Vsyncä¿¡å·åˆ°è¾¾æ—¶ï¼Œç³»ç»Ÿå›è°ƒDisplayEventReceiverçš„onVsyncæ–¹æ³•ï¼Œè§¦å‘æ¸²æŸ“æµç¨‹ã€‚</p>
</li>
<li>
<p><strong>DisplayEventReceiver</strong> æä¾›scheduleVsyncæ–¹æ³•ç”¨äºè¯·æ±‚Vsyncä¿¡å·ã€‚åº”ç”¨ç¨‹åºéœ€è¦æ›´æ–°UIæ—¶ï¼Œå…ˆé€šè¿‡æ­¤æ–¹æ³•ç”³è¯·ä¸‹ä¸€ä¸ªVsyncä¸­æ–­ï¼Œç„¶ååœ¨onVsyncå›è°ƒä¸­æ‰§è¡Œå®é™…çš„ç»˜åˆ¶é€»è¾‘ï¼Œç¡®ä¿æ¸²æŸ“ä¸å±å¹•åˆ·æ–°åŒæ­¥ã€‚</p>
</li>
<li>
<p><strong>Choreographer</strong> å®šä¹‰äº†FrameCallbackæ¥å£ï¼Œå…¶doFrameæ–¹æ³•åœ¨æ¯æ¬¡Vsyncåˆ°æ¥æ—¶è¢«è°ƒç”¨ã€‚è¿™ä¸€è®¾è®¡å¯¹AndroidåŠ¨ç”»ç³»ç»Ÿå…·æœ‰é‡è¦æ„ä¹‰ï¼Œä½¿åŠ¨ç”»èƒ½å¤Ÿä¸å±å¹•åˆ·æ–°ç‡ç²¾ç¡®åŒæ­¥ï¼Œç›¸æ¯”æ—©æœŸè‡ªè¡Œè®¡æ—¶çš„å®ç°ï¼Œæä¾›äº†æ›´åŠ æµç•…ã€çœç”µçš„åŠ¨ç”»ä½“éªŒã€‚</p>
</li>
<li>
<p><strong>Choreographer</strong> æ ¸å¿ƒåŠŸèƒ½æ˜¯æ¥æ”¶Vsyncä¿¡å·å¹¶è§¦å‘é€šè¿‡postCallbackæ³¨å†Œçš„å›è°ƒå‡½æ•°ã€‚æ¡†æ¶å®šä¹‰äº†äº”ç§ç±»å‹çš„å›è°ƒï¼ŒæŒ‰ç…§æ‰§è¡Œä¼˜å…ˆçº§æ’åºï¼š</p>
<ol start="0">
<li><strong>CALLBACK_INPUT</strong>ï¼šå¤„ç†è¾“å…¥äº‹ä»¶ï¼Œå¦‚è§¦æ‘¸ã€æŒ‰é”®ç­‰äº¤äº’</li>
<li><strong>CALLBACK_ANIMATION</strong>ï¼šå¤„ç†å„ç±»åŠ¨ç”»è®¡ç®—ä¸æ›´æ–°</li>
<li><strong>CALLBACK_INSETS_ANIMATION</strong>ï¼šå¤„ç†ç³»ç»Ÿæ’å…¥åŠ¨ç”»ï¼Œå¦‚è½¯é”®ç›˜ã€çŠ¶æ€æ åŠ¨ç”»ç­‰</li>
<li><strong>CALLBACK_TRAVERSAL</strong>ï¼šå¤„ç†è§†å›¾æ ‘çš„æµ‹é‡ã€å¸ƒå±€ä¸ç»˜åˆ¶</li>
<li><strong>CALLBACK_COMMIT</strong>ï¼šæ‰§è¡Œæ”¶å°¾å·¥ä½œï¼ŒåŒ…æ‹¬ç»„ä»¶å†…å­˜å›æ”¶(onTrimMemory)å’Œæ€§èƒ½ç›‘æµ‹</li>
</ol>
</li>
<li>
<p><strong>ListView</strong> å’Œ <strong>RecyclerView</strong> çš„Itemå¤ç”¨æœºåˆ¶(ViewHolderæ¨¡å¼)åœ¨æ¡†æ¶å±‚é¢ä¸Šçš„å…·ä½“å®ç°ä¼šæ¶‰åŠåˆ°CALLBACK_INPUTå’ŒCALLBACK_ANIMATIONé˜¶æ®µã€‚åœ¨æ»‘åŠ¨æˆ–å¿«é€Ÿæ»šåŠ¨æ—¶ï¼ŒItemçš„åˆå§‹åŒ–ã€æµ‹é‡ä¸ç»˜åˆ¶å¯èƒ½åœ¨Inputå›è°ƒä¸­è§¦å‘(å¦‚ç›´æ¥å“åº”è§¦æ‘¸äº‹ä»¶)ï¼Œä¹Ÿå¯èƒ½åœ¨Animationå›è°ƒä¸­æ‰§è¡Œ(å¦‚æƒ¯æ€§æ»‘åŠ¨æˆ–è‡ªåŠ¨æ»šåŠ¨)ã€‚RecyclerViewé€šè¿‡æ›´é«˜æ•ˆçš„å¤ç”¨æœºåˆ¶å’Œé¢„å–(Prefetch)ç­–ç•¥ï¼Œèƒ½å¤Ÿåœ¨è¿™ä¸¤ä¸ªé˜¶æ®µæ›´æ™ºèƒ½åœ°å‡†å¤‡ViewHolderï¼Œå‡å°‘ä¸»çº¿ç¨‹é˜»å¡ï¼Œå°¤å…¶åœ¨é«˜åˆ·æ–°ç‡è®¾å¤‡ä¸Šè¡¨ç°æ›´ä¸ºå‡ºè‰²ã€‚</p>
</li>
<li>
<p><strong>CALLBACK_INPUT</strong> å’Œ <strong>CALLBACK_ANIMATION</strong> åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šä¿®æ”¹Viewçš„å„ç§å±æ€§(å¦‚ä½ç½®ã€é€æ˜åº¦ã€å˜æ¢çŸ©é˜µç­‰)ï¼Œå› æ­¤å¿…é¡»å…ˆäºCALLBACK_TRAVERSALæ‰§è¡Œï¼Œä»¥ç¡®ä¿æ‰€æœ‰çŠ¶æ€æ›´æ–°éƒ½èƒ½åœ¨å½“å‰å¸§çš„æµ‹é‡ã€å¸ƒå±€ä¸ç»˜åˆ¶è¿‡ç¨‹ä¸­è¢«æ­£ç¡®åº”ç”¨ã€‚è¿™ç§ä¸¥æ ¼çš„æ‰§è¡Œé¡ºåºä¿è¯äº†Android UIæ¸²æŸ“çš„ä¸€è‡´æ€§å’Œå¯é¢„æµ‹æ€§ã€‚</p>
</li>
</ol>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-apm" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-25">APM ä¸ Choreographer</h2>
<p>ç”±äº Choreographer çš„ä½ç½®ï¼Œè®¸å¤šæ€§èƒ½ç›‘æ§çš„æ‰‹æ®µéƒ½æ˜¯åˆ©ç”¨ Choreographer æ¥åšçš„ï¼Œé™¤äº†è‡ªå¸¦çš„æ‰å¸§è®¡ç®—ï¼ŒChoreographer æä¾›çš„ FrameCallback å’Œ FrameInfo éƒ½ç»™ App æš´éœ²äº†æ¥å£ï¼Œè®© App å¼€å‘è€…å¯ä»¥é€šè¿‡è¿™äº›æ–¹æ³•ç›‘æ§è‡ªèº« App çš„æ€§èƒ½ï¼Œå…¶ä¸­å¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ol start="0">
<li>
<p>åˆ©ç”¨ FrameCallback çš„ doFrame å›è°ƒ</p>
</li>
<li>
<p>åˆ©ç”¨ FrameInfo è¿›è¡Œç›‘æ§</p>
</li>
<li>
<p>ä½¿ç”¨ ï¼šadb shell dumpsys gfxinfo  framestats</p>
<ol start="0">
<li>ç¤ºä¾‹ ï¼šadb shell dumpsys gfxinfo com.meizu.flyme.launcher framestats</li>
</ol>
</li>
<li>
<p>åˆ©ç”¨ SurfaceFlinger è¿›è¡Œç›‘æ§</p>
<ol start="0">
<li>ä½¿ç”¨ ï¼šadb shell dumpsys SurfaceFlinger --latency</li>
<li>ç¤ºä¾‹ ï¼šadb shell dumpsys SurfaceFlinger --latency com.meizu.flyme.launcher/com.meizu.flyme.launcher.Launcher#0</li>
</ol>
</li>
<li>
<p>åˆ©ç”¨ SurfaceFlinger PageFlip æœºåˆ¶è¿›è¡Œç›‘æ§</p>
<ol start="0">
<li>ä½¿ç”¨ ï¼š adb service call SurfaceFlinger 1013</li>
<li>å¤‡æ³¨ï¼šéœ€è¦ç³»ç»Ÿæƒé™</li>
</ol>
</li>
<li>
<p>Choreographer è‡ªèº«çš„æ‰å¸§è®¡ç®—é€»è¾‘</p>
</li>
<li>
<p>BlockCanary åŸºäº Looper çš„æ€§èƒ½ç›‘æ§</p>
</li>
<li>
<p><strong>æ–°å¢ï¼šPerfetto å·¥å…·çš„å¼ºå¤§ç›‘æ§èƒ½åŠ›</strong></p>
<ol start="0">
<li>åœ¨Android 15ä¸­ï¼ŒPerfettoæˆä¸ºä¸»è¦çš„æ€§èƒ½åˆ†æå·¥å…·ï¼Œæ›¿ä»£äº†æ—©æœŸçš„Systrace</li>
<li>Perfettoå¯ä»¥æ•è·æ›´è¯¦ç»†çš„ç³»ç»Ÿæ€§èƒ½æ•°æ®ï¼ŒåŒ…æ‹¬Choreographerçš„å·¥ä½œç»†èŠ‚</li>
<li>ä½¿ç”¨Perfetto UIå¯ä»¥å¯è§†åŒ–åˆ†æå¸§æ¸²æŸ“è¿‡ç¨‹</li>
</ol>
</li>
</ol>
<h3 data-id="heading-26">åˆ©ç”¨ Perfetto è¿›è¡Œé«˜çº§ç›‘æ§</h3>
<p>Perfetto æ˜¯ Android æ–°ä¸€ä»£çš„ç³»ç»Ÿè·Ÿè¸ªå·¥å…·ï¼Œåœ¨ Android 15 ä¸­æˆä¸ºé»˜è®¤çš„æ€§èƒ½åˆ†æè§£å†³æ–¹æ¡ˆã€‚å®ƒæä¾›äº†æ¯” Systrace æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼š</p>
<ol start="0">
<li>
<p><strong>æ›´å…¨é¢çš„æ€§èƒ½æ•°æ®é‡‡é›†</strong> Perfetto å¯ä»¥åŒæ—¶æ”¶é›† CPUã€å†…å­˜ã€å›¾å½¢æ¸²æŸ“ã€ç³»ç»ŸæœåŠ¡ç­‰å¤šç»´åº¦çš„æ•°æ®</p>
</li>
<li>
<p><strong>æ›´ä½çš„å¼€é”€</strong> é‡‡ç”¨é«˜æ•ˆçš„è·Ÿè¸ªå¼•æ“ï¼Œå¯¹ç³»ç»Ÿæ€§èƒ½å½±å“æ›´å°</p>
</li>
<li>
<p><strong>æ›´å¥½çš„ Choreographer è¿½è¸ª</strong> å¯ä»¥è¯¦ç»†è·Ÿè¸ª Choreographer çš„å·¥ä½œè¿‡ç¨‹ï¼ŒåŒ…æ‹¬:</p>
<ul>
<li>Vsync ä¿¡å·çš„æ¥æ”¶å’Œå¤„ç†</li>
<li>doFrame æ–¹æ³•çš„æ‰§è¡Œç»†èŠ‚</li>
<li>å„ç±»å›è°ƒçš„æ‰§è¡Œæ—¶é—´</li>
<li>UI çº¿ç¨‹å’Œ RenderThread çš„åä½œè¿‡ç¨‹</li>
</ul>
</li>
<li>
<p><strong>è¿½è¸ª BlastBufferQueue</strong> èƒ½å¤Ÿè·Ÿè¸ªæ–°å¼•å…¥çš„ BlastBufferQueue çš„å·¥ä½œè¿‡ç¨‹ï¼Œå¸®åŠ©å¼€å‘è€…ç†è§£ç¼“å†²åŒºç®¡ç†æœºåˆ¶</p>
</li>
</ol>
<h4 data-id="heading-27">ä½¿ç”¨ Perfetto è·Ÿè¸ª Choreographer</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€å§‹è®°å½• Perfetto trace</span>
adb shell perfetto --txt -c /data/misc/perfetto-configs/chrome-trace.config -o /data/misc/perfetto-traces/trace.perfetto-trace

<span class="hljs-comment"># å®Œæˆåè·å– trace æ–‡ä»¶</span>
adb pull /data/misc/perfetto-traces/trace.perfetto-trace

<span class="hljs-comment"># åœ¨ Perfetto UI ä¸­åˆ†æ(https://ui.perfetto.dev/)</span>
</code></pre>
<p>åœ¨ Perfetto UI ä¸­ï¼Œå¯ä»¥æ‰¾åˆ°åä¸º "Choreographer#doFrame" çš„äº‹ä»¶ï¼Œå®ƒå±•ç¤ºäº†æ¯ä¸€å¸§çš„å¤„ç†æ—¶é—´å’Œç»†èŠ‚ã€‚è¿˜å¯ä»¥æŸ¥çœ‹ UI çº¿ç¨‹å’Œ RenderThread ä¹‹é—´çš„åä½œå…³ç³»ï¼Œä»¥åŠä¸ SurfaceFlinger çš„äº¤äº’ã€‚</p>
<h3 data-id="heading-28">åˆ©ç”¨ FrameInfo è¿›è¡Œç›‘æ§</h3>
<p>adb shell dumpsys gfxinfo  framestats</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Window:</span> <span class="hljs-string">StatusBar</span>
<span class="hljs-attr">Stats since:</span> <span class="hljs-string">17990256398ns</span>
<span class="hljs-attr">Total frames rendered:</span> <span class="hljs-number">1562</span>
<span class="hljs-attr">Janky frames:</span> <span class="hljs-number">361</span> <span class="hljs-string">(23.11%)</span>
<span class="hljs-attr">50th percentile:</span> <span class="hljs-string">6ms</span>
<span class="hljs-attr">90th percentile:</span> <span class="hljs-string">23ms</span>
<span class="hljs-attr">95th percentile:</span> <span class="hljs-string">36ms</span>
<span class="hljs-attr">99th percentile:</span> <span class="hljs-string">101ms</span>
<span class="hljs-attr">Number Missed Vsync:</span> <span class="hljs-number">33</span>
<span class="hljs-attr">Number High input latency:</span> <span class="hljs-number">683</span>
<span class="hljs-attr">Number Slow UI thread:</span> <span class="hljs-number">273</span>
<span class="hljs-attr">Number Slow bitmap uploads:</span> <span class="hljs-number">8</span>
<span class="hljs-attr">Number Slow issue draw commands:</span> <span class="hljs-number">18</span>
<span class="hljs-attr">Number Frame deadline missed:</span> <span class="hljs-number">287</span>
<span class="hljs-attr">HISTOGRAM:</span> <span class="hljs-string">5ms=670</span> <span class="hljs-string">6ms=128</span> <span class="hljs-string">7ms=84</span> <span class="hljs-string">8ms=63</span> <span class="hljs-string">9ms=38</span> <span class="hljs-string">10ms=23</span> <span class="hljs-string">11ms=21</span> <span class="hljs-string">12ms=20</span> <span class="hljs-string">13ms=25</span> <span class="hljs-string">14ms=39</span> <span class="hljs-string">15ms=65</span> <span class="hljs-string">16ms=36</span> <span class="hljs-string">17ms=51</span> <span class="hljs-string">18ms=37</span> <span class="hljs-string">19ms=41</span> <span class="hljs-string">20ms=20</span> <span class="hljs-string">21ms=19</span> <span class="hljs-string">22ms=18</span> <span class="hljs-string">23ms=15</span> <span class="hljs-string">24ms=14</span> <span class="hljs-string">25ms=8</span> <span class="hljs-string">26ms=4</span> <span class="hljs-string">27ms=6</span> <span class="hljs-string">28ms=3</span> <span class="hljs-string">29ms=4</span> <span class="hljs-string">30ms=2</span> <span class="hljs-string">31ms=2</span> <span class="hljs-string">32ms=6</span> <span class="hljs-string">34ms=12</span> <span class="hljs-string">36ms=10</span> <span class="hljs-string">38ms=9</span> <span class="hljs-string">40ms=3</span> <span class="hljs-string">42ms=4</span> <span class="hljs-string">44ms=5</span> <span class="hljs-string">46ms=8</span> <span class="hljs-string">48ms=6</span> <span class="hljs-string">53ms=6</span> <span class="hljs-string">57ms=4</span> <span class="hljs-string">61ms=1</span> <span class="hljs-string">65ms=0</span> <span class="hljs-string">69ms=2</span> <span class="hljs-string">73ms=2</span> <span class="hljs-string">77ms=3</span> <span class="hljs-string">81ms=4</span> <span class="hljs-string">85ms=1</span> <span class="hljs-string">89ms=2</span> <span class="hljs-string">93ms=0</span> <span class="hljs-string">97ms=2</span> <span class="hljs-string">101ms=1</span> <span class="hljs-string">105ms=1</span> <span class="hljs-string">109ms=1</span> <span class="hljs-string">113ms=1</span> <span class="hljs-string">117ms=1</span> <span class="hljs-string">121ms=2</span> <span class="hljs-string">125ms=1</span> <span class="hljs-string">129ms=0</span> <span class="hljs-string">133ms=1</span> <span class="hljs-string">150ms=2</span> <span class="hljs-string">200ms=3</span> <span class="hljs-string">250ms=0</span> <span class="hljs-string">300ms=1</span> <span class="hljs-string">350ms=1</span> <span class="hljs-string">400ms=0</span> <span class="hljs-string">450ms=0</span> <span class="hljs-string">500ms=0</span> <span class="hljs-string">550ms=0</span> <span class="hljs-string">600ms=0</span> <span class="hljs-string">650ms=0</span> 

<span class="hljs-string">---PROFILEDATA---</span>
<span class="hljs-string">Flags,IntendedVsync,Vsync,OldestInputEvent,NewestInputEvent,HandleInputStart,AnimationStart,PerformTraversalsStart,DrawStart,SyncQueued,SyncStart,IssueDrawCommandsStart,SwapBuffers,FrameCompleted,DequeueBufferDuration,QueueBufferDuration,</span>
<span class="hljs-number">0</span><span class="hljs-string">,10158314881426,10158314881426,9223372036854775807,0,10158315693363,10158315760759,10158315769821,10158316032165,10158316627842,10158316838988,10158318055915,10158320387269,10158321770654,428000,773000,</span>
<span class="hljs-number">0</span><span class="hljs-string">,10158332036261,10158332036261,9223372036854775807,0,10158332799196,10158332868519,10158332877269,10158333137738,10158333780654,10158333993206,10158335078467,10158337689561,10158339307061,474000,885000,</span>
<span class="hljs-number">0</span><span class="hljs-string">,10158348665353,10158348665353,9223372036854775807,0,10158349710238,10158349773102,10158349780863,10158350405863,10158351135967,10158351360446,10158352300863,10158354305654,10158355814509,471000,836000,</span>
<span class="hljs-number">0</span><span class="hljs-string">,10158365296729,10158365296729,9223372036854775807,0,10158365782373,10158365821019,10158365825238,10158365975290,10158366547946,10158366687217,10158367240706,10158368429248,10158369291852,269000,476000,</span>
</code></pre>
<h3 data-id="heading-29">åˆ©ç”¨ SurfaceFlinger è¿›è¡Œç›‘æ§</h3>
<p>å‘½ä»¤è§£é‡Šï¼š</p>
<ol start="0">
<li>æ•°æ®çš„å•ä½æ˜¯çº³ç§’ï¼Œæ—¶é—´æ˜¯ä»¥å¼€æœºæ—¶é—´ä¸ºèµ·å§‹ç‚¹</li>
<li>æ¯ä¸€æ¬¡çš„å‘½ä»¤éƒ½ä¼šå¾—åˆ°128è¡Œçš„å¸§ç›¸å…³çš„æ•°æ®</li>
</ol>
<p>æ•°æ®ï¼š</p>
<ol start="0">
<li>ç¬¬ä¸€è¡Œæ•°æ®ï¼Œè¡¨ç¤ºåˆ·æ–°çš„æ—¶é—´é—´éš”refresh_period</li>
<li>ç¬¬1åˆ—ï¼šè¿™ä¸€éƒ¨åˆ†çš„æ•°æ®è¡¨ç¤ºåº”ç”¨ç¨‹åºç»˜åˆ¶å›¾åƒçš„æ—¶é—´ç‚¹</li>
<li>ç¬¬2åˆ—ï¼šåœ¨SF(è½¯ä»¶)å°†å¸§æäº¤ç»™H/W(ç¡¬ä»¶)ç»˜åˆ¶ä¹‹å‰çš„å‚ç›´åŒæ­¥æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯æ¯å¸§ç»˜åˆ¶å®Œæäº¤åˆ°ç¡¬ä»¶çš„æ—¶é—´æˆ³ï¼Œè¯¥åˆ—å°±æ˜¯å‚ç›´åŒæ­¥çš„æ—¶é—´æˆ³</li>
<li>ç¬¬3åˆ—ï¼šåœ¨SFå°†å¸§æäº¤ç»™H/Wçš„æ—¶é—´ç‚¹ï¼Œç®—æ˜¯H/Wæ¥å—å®ŒSFå‘æ¥æ•°æ®çš„æ—¶é—´ç‚¹ï¼Œç»˜åˆ¶å®Œæˆçš„æ—¶é—´ç‚¹ã€‚</li>
</ol>
<p><strong>æ‰å¸§ jank è®¡ç®—</strong></p>
<p>æ¯ä¸€è¡Œéƒ½å¯ä»¥é€šè¿‡ä¸‹é¢çš„å…¬å¼å¾—åˆ°ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œæˆ‘ä»¬ç§°ä¸ºjankflagï¼Œå¦‚æœå½“å‰è¡Œçš„jankflagä¸ä¸Šä¸€è¡Œçš„jankflagå‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆå°±å«æ‰å¸§</p>
<p>ceil((C - A) / refresh-period)</p>
<h3 data-id="heading-30">åˆ©ç”¨ SurfaceFlinger PageFlip æœºåˆ¶è¿›è¡Œç›‘æ§</h3>
<pre><code class="hljs language-ini" lang="ini">Parcel <span class="hljs-attr">data</span> = Parcel.obtain()<span class="hljs-comment">;</span>
Parcel <span class="hljs-attr">reply</span> = Parcel.obtain()<span class="hljs-comment">;</span>
    data.writeInterfaceToken("android.ui.ISurfaceComposer")<span class="hljs-comment">;</span>
mFlinger.transact(1013, data, reply, 0)<span class="hljs-comment">;</span>
final int <span class="hljs-attr">pageFlipCount</span> = reply.readInt()<span class="hljs-comment">;</span>

final long <span class="hljs-attr">now</span> = System.nanoTime()<span class="hljs-comment">;</span>
final int <span class="hljs-attr">frames</span> = pageFlipCount - mLastPageFlipCount<span class="hljs-comment">;</span>
final long <span class="hljs-attr">duration</span> = now - mLastUpdateTime<span class="hljs-comment">;</span>
<span class="hljs-attr">mFps</span> = (float) (frames * <span class="hljs-number">1</span>e9 / duration)<span class="hljs-comment">;</span>
<span class="hljs-attr">mLastPageFlipCount</span> = pageFlipCount<span class="hljs-comment">;</span>
<span class="hljs-attr">mLastUpdateTime</span> = now<span class="hljs-comment">;</span>
reply.recycle()<span class="hljs-comment">;</span>
data.recycle()<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-31">Choreographer è‡ªèº«çš„æ‰å¸§è®¡ç®—é€»è¾‘</h3>
<p>SKIPPED_FRAME_WARNING_LIMIT é»˜è®¤ä¸º30 , ç”± debug.choreographer.skipwarning è¿™ä¸ªå±æ€§æ§åˆ¶</p>
<pre><code class="hljs language-erlang" lang="erlang"><span class="hljs-function"><span class="hljs-title">if</span> <span class="hljs-params">(jitterNanos &gt;= mFrameIntervalNanos)</span> {
    <span class="hljs-title">final</span> <span class="hljs-title">long</span> <span class="hljs-title">skippedFrames</span> = <span class="hljs-title">jitterNanos</span> / <span class="hljs-title">mFrameIntervalNanos</span>;
    <span class="hljs-title">if</span> <span class="hljs-params">(skippedFrames &gt;= SKIPPED_FRAME_WARNING_LIMIT)</span> {
        L<span class="hljs-title">og</span>.<span class="hljs-title">i</span><span class="hljs-params">(TAG, <span class="hljs-string">"Skipped "</span> + skippedFrames + <span class="hljs-string">" frames!  "</span>
                + <span class="hljs-string">"The application may be doing too much work on its main thread."</span>)</span>;
    }
}
</span></code></pre>
<h3 data-id="heading-32">BlockCanary</h3>
<p>Blockcanary åšæ€§èƒ½ç›‘æ§ä½¿ç”¨çš„æ˜¯ Looper çš„æ¶ˆæ¯æœºåˆ¶ï¼Œé€šè¿‡å¯¹ MessageQueue ä¸­æ¯ä¸€ä¸ª Message çš„å‰åè¿›è¡Œè®°å½•ï¼Œæ‰“åˆ°ç›‘æ§æ€§èƒ½çš„ç›®çš„</p>
<p>android/os/Looper.java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">loop</span>()</span> {
    ...
    <span class="hljs-keyword">for</span> (;;) {
        ...
        <span class="hljs-comment">// This must be in a local variable, in case a UI event sets the logger</span>
        Printer logging = me.mLogging;
        <span class="hljs-keyword">if</span> (logging != <span class="hljs-literal">null</span>) {
            logging.println(<span class="hljs-string">"&gt;&gt;&gt;&gt;&gt; Dispatching to "</span> + msg.target + <span class="hljs-string">" "</span> +
                    msg.callback + <span class="hljs-string">": "</span> + msg.what);
        }
        msg.target.dispatchMessage(msg);
        <span class="hljs-keyword">if</span> (logging != <span class="hljs-literal">null</span>) {
            logging.println(<span class="hljs-string">"&lt;&lt;&lt;&lt;&lt; Finished to "</span> + msg.target + <span class="hljs-string">" "</span> + msg.callback);
        }
        ...
    }
}
</code></pre>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-messagequeue" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-33">MessageQueue ä¸ Choreographer</h2>
<p>åœ¨ Android æ¶ˆæ¯æœºåˆ¶ä¸­ï¼Œå¼‚æ­¥æ¶ˆæ¯å…·æœ‰ç‰¹æ®Šçš„å¤„ç†ä¼˜å…ˆçº§ã€‚ç³»ç»Ÿå¯ä»¥é€šè¿‡ enqueueBarrier æ–¹æ³•å‘æ¶ˆæ¯é˜Ÿåˆ—æ’å…¥ä¸€ä¸ªå±éšœï¼ˆBarrierï¼‰ï¼Œä½¿å¾—è¯¥å±éšœä¹‹åçš„æ‰€æœ‰åŒæ­¥æ¶ˆæ¯æš‚æ—¶æ— æ³•è¢«æ‰§è¡Œï¼Œç›´åˆ°è°ƒç”¨ removeBarrier æ–¹æ³•ç§»é™¤å±éšœã€‚è€Œè¢«æ ‡è®°ä¸ºå¼‚æ­¥çš„æ¶ˆæ¯åˆ™ä¸å—å±éšœå½±å“ï¼Œå¯ä»¥æ­£å¸¸å¤„ç†ã€‚</p>
<p>æ¶ˆæ¯é»˜è®¤ä¸ºåŒæ­¥ç±»å‹ï¼Œåªæœ‰é€šè¿‡ Message çš„ setAsynchronous æ–¹æ³•ï¼ˆè¯¥æ–¹æ³•ä¸ºéšè— APIï¼‰æ‰èƒ½å°†æ¶ˆæ¯è®¾ç½®ä¸ºå¼‚æ­¥ã€‚åœ¨åˆå§‹åŒ– Handler æ—¶ï¼Œå¯ä»¥é€šè¿‡ç‰¹å®šå‚æ•°æŒ‡å®šè¯¥ Handler å‘é€çš„æ‰€æœ‰æ¶ˆæ¯å‡ä¸ºå¼‚æ­¥ç±»å‹ï¼Œæ­¤æ—¶ Handler çš„ enqueueMessage æ–¹æ³•ä¼šè‡ªåŠ¨è°ƒç”¨ Message çš„ setAsynchronous æ–¹æ³•ã€‚</p>
<p>å¼‚æ­¥æ¶ˆæ¯çš„æ ¸å¿ƒä»·å€¼åœ¨äºèƒ½å¤Ÿç»•è¿‡æ¶ˆæ¯å±éšœç»§ç»­æ‰§è¡Œï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®å±éšœï¼Œå¼‚æ­¥æ¶ˆæ¯ä¸åŒæ­¥æ¶ˆæ¯çš„å¤„ç†æ–¹å¼å®Œå…¨ç›¸åŒã€‚é€šè¿‡ removeSyncBarrier æ–¹æ³•å¯ä»¥ç§»é™¤ä¹‹å‰è®¾ç½®çš„å±éšœã€‚</p>
<h3 data-id="heading-34">SyncBarrier åœ¨ Choreographer ä¸­ä½¿ç”¨çš„ä¸€ä¸ªç¤ºä¾‹</h3>
<p>scheduleTraversals çš„æ—¶å€™ postSyncBarrier</p>
<pre><code class="hljs language-ini" lang="ini">void scheduleTraversals() {
    if (!mTraversalScheduled) {
        <span class="hljs-attr">mTraversalScheduled</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
        //ä¸ºäº†æé«˜ä¼˜å…ˆçº§ï¼Œå…ˆ postSyncBarrier
        <span class="hljs-attr">mTraversalBarrier</span> = mHandler.getLooper().getQueue().postSyncBarrier()<span class="hljs-comment">;</span>
        mChoreographer.postCallback(
                Choreographer.CALLBACK_TRAVERSAL, mTraversalRunnable, null)<span class="hljs-comment">;</span>
    }
}
</code></pre>
<p>doTraversal çš„æ—¶å€™ removeSyncBarrier</p>
<pre><code class="hljs language-scss" lang="scss">void <span class="hljs-built_in">doTraversal</span>() {
    if (mTraversalScheduled) {
        mTraversalScheduled = false;
        <span class="hljs-comment">// è¿™é‡ŒæŠŠ SyncBarrier remove</span>
mHandler<span class="hljs-selector-class">.getLooper</span>()<span class="hljs-selector-class">.getQueue</span>()<span class="hljs-selector-class">.removeSyncBarrier</span>(mTraversalBarrier);
        <span class="hljs-comment">// çœŸæ­£å¼€å§‹</span>
        <span class="hljs-built_in">performTraversals</span>();
    }
}
</code></pre>
<p>Choreographer post Message çš„æ—¶å€™ï¼Œä¼šæŠŠè¿™äº›æ¶ˆæ¯è®¾ä¸º Asynchronous ï¼Œè¿™æ · Choreographer ä¸­çš„è¿™äº› Message çš„ä¼˜å…ˆçº§å°±ä¼šæ¯”è¾ƒé«˜ï¼Œ</p>
<pre><code class="hljs language-ini" lang="ini">Message <span class="hljs-attr">msg</span> = mHandler.obtainMessage(MSG_DO_SCHEDULE_CALLBACK, action)<span class="hljs-comment">;</span>
<span class="hljs-attr">msg.arg1</span> = callbackType<span class="hljs-comment">;</span>
msg.setAsynchronous(true)<span class="hljs-comment">;</span>
mHandler.sendMessageAtTime(msg, dueTime)<span class="hljs-comment">;</span>
</code></pre>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-vendor" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-35">å‚å•†ä¼˜åŒ–</h2>
<p>ç³»ç»Ÿå‚å•†ç”±äºå¯ä»¥ç›´æ¥ä¿®æ”¹æºç ï¼Œä¹Ÿåˆ©ç”¨è¿™æ–¹é¢çš„ä¾¿åˆ©ï¼Œåšä¸€äº›åŠŸèƒ½å’Œä¼˜åŒ–ï¼Œä¸è¿‡ç”±äºä¿å¯†çš„é—®é¢˜ï¼Œä»£ç å°±ä¸ç›´æ¥æ”¾ä¸Šæ¥äº†ï¼Œæˆ‘å¯ä»¥å¤§æ¦‚è¯´ä¸€ä¸‹æ€è·¯ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ç§ä¸‹è®¨è®º</p>
<h3 data-id="heading-36">ç§»åŠ¨äº‹ä»¶ä¼˜åŒ–</h3>
<p>Choreographer æœ¬èº«æ˜¯æ²¡æœ‰ input æ¶ˆæ¯çš„ï¼Œ ä¸è¿‡ä¿®æ”¹æºç ä¹‹åï¼Œinput æ¶ˆæ¯å¯ä»¥ç›´æ¥ç»™åˆ° Choreographer è¿™é‡Œï¼Œ æœ‰äº†è¿™äº› Input æ¶ˆæ¯ï¼ŒChoreographer å°±å¯ä»¥åšä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚è¯´æå‰å“åº”ï¼Œä¸å»ç­‰ Vsync</p>
<h3 data-id="heading-37">åå°åŠ¨ç”»ä¼˜åŒ–</h3>
<p>å½“ Android åº”ç”¨é€€åˆ°åå°æ—¶ï¼Œå¦‚æœæœªè¢«ç³»ç»Ÿç»ˆæ­¢ï¼Œå…¶ä»å¯èƒ½ç»§ç»­æ‰§è¡Œå„ç±»æ“ä½œã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåº”ç”¨ä¼šæŒç»­è°ƒç”¨ Choreographer ä¸­çš„ Animation Callbackï¼Œå³ä½¿è¿™äº›åŠ¨ç”»å¯¹ç”¨æˆ·ä¸å¯è§ï¼Œè¿™äº› Callback çš„æ‰§è¡Œå®Œå…¨æ— æ„ä¹‰ï¼Œå´ä¼šå¯¹ CPU èµ„æºé€ æˆè¾ƒé«˜çš„å ç”¨ã€‚</p>
<p>å› æ­¤ï¼Œç³»ç»Ÿå‚å•†åœ¨ Choreographer ä¸­ä¼šé’ˆå¯¹è¿™ç§æƒ…å†µåšä¼˜åŒ–ï¼Œé€šè¿‡ä¸€ç³»åˆ—ç­–ç•¥é™åˆ¶ä¸ç¬¦åˆæ¡ä»¶çš„åå°åº”ç”¨ç»§ç»­æ‰§è¡Œæ— æ„ä¹‰çš„åŠ¨ç”»å›è°ƒï¼Œæœ‰æ•ˆé™ä½ç³»ç»Ÿèµ„æºå ç”¨ã€‚</p>
<p><img src="" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47045779d5e74bc9ad1848a2fcb24e84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763903340&amp;x-signature=MxDVugFtURVlisHotet76GJqxhA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-38">å¸§ç»˜åˆ¶ä¼˜åŒ–</h3>
<p>å’Œç§»åŠ¨äº‹ä»¶ä¼˜åŒ–ä¸€æ ·ï¼Œç”±äºæœ‰äº† Input äº‹ä»¶çš„ä¿¡æ¯ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹æˆ‘ä»¬å¯ä»¥é€šçŸ¥ SurfaceFlinger ä¸ç”¨å»ç­‰å¾… Vsync ç›´æ¥åšåˆæˆæ“ä½œ</p>
<h3 data-id="heading-39">åº”ç”¨å¯åŠ¨ä¼˜åŒ–</h3>
<p>æˆ‘ä»¬å‰é¢è¯´ï¼Œä¸»çº¿ç¨‹çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯ç»™äºˆ Message çš„ ï¼Œå¦‚æœæŸä¸ªæ“ä½œï¼Œéé‡è¦çš„ Message è¢«æ’åˆ—åˆ°äº†é˜Ÿåˆ—åé¢ï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªæ“ä½œäº§ç”Ÿå½±å“ï¼›è€Œé€šè¿‡é‡æ–°æ’åˆ— MessageQueueï¼Œåœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™ï¼ŒæŠŠå¯åŠ¨ç›¸å…³çš„é‡è¦çš„å¯åŠ¨ Message æ”¾åˆ°é˜Ÿåˆ—å‰é¢ï¼Œæ¥èµ·åˆ°åŠ å¿«å¯åŠ¨é€Ÿåº¦çš„ä½œç”¨</p>
<h3 data-id="heading-40">animation callback å‰ç½®</h3>
<p>åœ¨ä¸Šä¸€å¸§çš„ä¸»çº¿ç¨‹åšå®Œä¹‹åï¼Œè·ç¦»ä¸‹ä¸€ä¸ª vsync å…¶å®æ˜¯æœ‰ä¸€å®šæ—¶é—´çš„ç©ºé—²çš„ï¼Œè¿™æ®µæ—¶é—´å…¶å®å¯ä»¥ç”¨æ¥å‡†å¤‡ä¸‹ä¸€å¸§ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠä¸‹ä¸€å¸§çš„ animation callback æå‰åˆ°è¿™é‡Œæ¥åšï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆåˆ©ç”¨ cpu çš„ç©ºé—²æ—¶é—´ï¼Œå‡å°‘æ‰å¸§</p>
<h3 data-id="heading-41">æ’å¸§</h3>
<p>è·Ÿ animation callback å‰ç½®ä¸€æ ·ï¼Œåœ¨ä¸Šä¸€å¸§çš„ä¸»çº¿ç¨‹åšå®Œä¹‹åï¼Œè·ç¦»ä¸‹ä¸€ä¸ª vsync å…¶å®æ˜¯æœ‰ä¸€å®šæ—¶é—´çš„ç©ºé—²çš„ï¼Œè¿™æ®µæ—¶é—´å…¶å®å¯ä»¥ç”¨æ¥å‡†å¤‡ä¸‹ä¸€å¸§ã€‚åªä¸è¿‡è¿™é‡Œæˆ‘ä»¬ç›´æ¥ç”Ÿæˆæ–°çš„ä¸€å¸§ï¼šå³ä¸€ä¸ª Vsync é‡Œé¢ï¼Œæ‰§è¡Œä¸¤æ¬¡ doFrame ã€‚æ’å¸§ç›¸å½“äºæ˜¯æå‰å‡†å¤‡å¥½åé¢å‡ å¸§çš„æ•°æ®ï¼Œè¿™æ ·åœ¨é‡åˆ°çœŸæ­£è€—æ—¶çš„å¸§çš„æ—¶å€™ï¼Œä¸ä¼šå‡ºç°å¡é¡¿ã€‚</p>
<p>æ’å¸§å®ç°ä¸»è¦æ˜¯åœ¨æ»‘åŠ¨åœºæ™¯ï¼Œç”¨åœ¨å®ç°äº† OverScroller çš„æ»‘åŠ¨ç»„ä»¶ä¸Šï¼Œæ¯”å¦‚ ListViewï¼ŒRecyclerVIew è¿™äº›ã€‚å› ä¸ºå¦‚æœç”¨äº† OverScrollerï¼Œæˆ‘ä»¬å°±ä¼šåœ¨ touch up çš„æ—¶å€™ï¼Œ å°±çŸ¥é“äº†æ»‘åŠ¨çš„æ—¶é—´å’Œè·ç¦»ï¼Œå°±å¯ä»¥åœ¨è¿™ä¸­é—´åšæ‰‹è„šï¼ˆæ’å¸§ï¼‰ï¼Œç›¸å½“äºåœ¨ä¸€ä¸ª Vsync å†…ç”»å¥½äº†åé¢å¥½å‡ ä¸ª VSync é‡Œé¢çš„å†…å®¹ã€‚</p>
<h3 data-id="heading-42">é«˜å¸§ç‡ä¼˜åŒ–</h3>
<p>ç°ä»£ Android è®¾å¤‡ä¸Šçš„é«˜åˆ·æ–°ç‡ï¼ˆ120 Hzï¼‰å°† Vsync é—´éš”ä» 16.6 ms ç¼©çŸ­è‡³ 8.3 msï¼Œè¿™å¸¦æ¥äº†å·¨å¤§çš„æ€§èƒ½å’ŒåŠŸè€—æŒ‘æˆ˜ã€‚å¦‚ä½•åœ¨ä¸€å¸§å†…å®Œæˆæ¸²æŸ“çš„å¿…è¦æ“ä½œï¼Œæ˜¯æ‰‹æœºå‚å•†å¿…é¡»è¦æ€è€ƒå’Œä¼˜åŒ–çš„åœ°æ–¹ï¼š</p>
<ol start="0">
<li>è¶…çº§ App çš„æ€§èƒ½è¡¨ç°ä»¥åŠä¼˜åŒ–</li>
<li>æ¸¸æˆé«˜å¸§ç‡åˆä½œ</li>
<li>120 fpsã€90 fps å’Œ 60 fps ç›¸äº’åˆ‡æ¢çš„é€»è¾‘</li>
</ol>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-refs" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-43">å‚è€ƒèµ„æ–™</h2>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2F304f56f5d486" target="_blank" title="https://www.jianshu.com/p/304f56f5d486" ref="nofollow noopener noreferrer">www.jianshu.com/p/304f56f5dâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fgityuan.com%2F2017%2F02%2F25%2Fchoreographer%2F" target="_blank" title="http://gityuan.com/2017/02/25/choreographer/" ref="nofollow noopener noreferrer">gityuan.com/2017/02/25/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fview%2FChoreographer" target="_blank" title="https://developer.android.com/reference/android/view/Choreographer" ref="nofollow noopener noreferrer">developer.android.com/reference/aâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jishuwen.com%2Fd%2F2Vcc" target="_blank" title="https://www.jishuwen.com/d/2Vcc" ref="nofollow noopener noreferrer">www.jishuwen.com/d/2Vcc</a></li>
<li><a href="https://juejin.im/entry/5c8772eee51d456cda2e8099" target="_blank" title="https://juejin.im/entry/5c8772eee51d456cda2e8099">juejin.im/entry/5c877â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftime.geekbang.org%2Fcolumn%2Fintro%2F142" target="_blank" title="https://time.geekbang.org/column/intro/142" ref="nofollow noopener noreferrer">Android å¼€å‘é«˜æ‰‹è¯¾</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2F" target="_blank" title="https://perfetto.dev/" ref="nofollow noopener noreferrer">Perfetto - System profiling, app tracing, and trace analysis</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fprofile%2Fperfetto-ui" target="_blank" title="https://developer.android.com/studio/profile/perfetto-ui" ref="nofollow noopener noreferrer">ä½¿ç”¨ Perfetto åˆ†æ UI æ€§èƒ½</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.android.com%2Fdocs%2Fcore%2Fgraphics%2Farch-bq-gralloc" target="_blank" title="https://source.android.com/docs/core/graphics/arch-bq-gralloc" ref="nofollow noopener noreferrer">BufferQueue and Gralloc</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fabout%2Fversions%2F15%2Ffeatures%23graphics" target="_blank" title="https://developer.android.com/about/versions/15/features#graphics" ref="nofollow noopener noreferrer">Android 15 å›¾å½¢æ¸²æŸ“ä¼˜åŒ–</a></li>
</ol>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-zhihu" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-44">æœ¬æ–‡çŸ¥ä¹åœ°å€</h2>
<p>ç”±äºåšå®¢ç•™è¨€äº¤æµä¸æ–¹ä¾¿ï¼Œç‚¹èµæˆ–è€…äº¤æµï¼Œå¯ä»¥ç§»æ­¥æœ¬æ–‡çš„çŸ¥ä¹ç•Œé¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F87954949" target="_blank" title="https://zhuanlan.zhihu.com/p/87954949" ref="nofollow noopener noreferrer">çŸ¥ä¹ - Android åŸºäº Choreographer çš„æ¸²æŸ“æœºåˆ¶è¯¦è§£ - Perfetto ç‰ˆ</a> <a href="https://juejin.im/post/5daedc65e51d457834735c65" target="_blank" title="https://juejin.im/post/5daedc65e51d457834735c65">æ˜é‡‘ - Android åŸºäº Choreographer çš„æ¸²æŸ“æœºåˆ¶è¯¦è§£ - Perfetto ç‰ˆ</a></p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-about" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-45">å…³äºæˆ‘ &amp;&amp; åšå®¢</h2>
<p>ä¸‹é¢æ˜¯ä¸ªäººçš„ä»‹ç»å’Œç›¸å…³çš„é“¾æ¥ï¼ŒæœŸæœ›ä¸åŒè¡Œçš„å„ä½å¤šå¤šäº¤æµï¼Œä¸‰äººè¡Œï¼Œåˆ™å¿…æœ‰æˆ‘å¸ˆ!</p>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2Fabout%2F" target="_blank" title="https://www.androidperformance.com/about/" ref="nofollow noopener noreferrer">åšä¸»ä¸ªäººä»‹ç»</a> ï¼šé‡Œé¢æœ‰ä¸ªäººçš„å¾®ä¿¡å’Œå¾®ä¿¡ç¾¤é“¾æ¥ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2019%2F12%2F01%2FBlogMap%2F" target="_blank" title="https://androidperformance.com/2019/12/01/BlogMap/" ref="nofollow noopener noreferrer">æœ¬åšå®¢å†…å®¹å¯¼èˆª</a> ï¼šä¸ªäººåšå®¢å†…å®¹çš„ä¸€ä¸ªå¯¼èˆªã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2018%2F05%2F07%2FAndroid-performance-optimization-skills-and-tools%2F" target="_blank" title="https://androidperformance.com/2018/05/07/Android-performance-optimization-skills-and-tools/" ref="nofollow noopener noreferrer">ä¸ªäººæ•´ç†å’Œæœé›†çš„ä¼˜ç§€åšå®¢æ–‡ç«  - Android æ€§èƒ½ä¼˜åŒ–å¿…çŸ¥å¿…ä¼š</a> ï¼šæ¬¢è¿å¤§å®¶è‡ªèå’Œæ¨è ï¼ˆå¾®ä¿¡ç§èŠå³å¯ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2023%2F12%2F30%2Fthe-performance%2F" target="_blank" title="https://www.androidperformance.com/2023/12/30/the-performance/" ref="nofollow noopener noreferrer">Android æ€§èƒ½ä¼˜åŒ–çŸ¥è¯†æ˜Ÿçƒ</a> ï¼š æ¬¢è¿åŠ å…¥ï¼Œå¤šè°¢æ”¯æŒï½</li>
</ol>
<blockquote>
<p><strong>ä¸€ä¸ªäººå¯ä»¥èµ°çš„æ›´å¿« , ä¸€ç¾¤äººå¯ä»¥èµ°çš„æ›´è¿œ</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Perfetto ç³»åˆ— 07 - MainThread å’Œ RenderThread è§£è¯»]]></title>    <link>https://juejin.cn/post/7572539461478826027</link>    <guid>https://juejin.cn/post/7572539461478826027</guid>    <pubDate>2025-11-16T13:21:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572539461478826027" data-draft-id="7572480736362348550" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Perfetto ç³»åˆ— 07 - MainThread å’Œ RenderThread è§£è¯»"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-16T13:21:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gracker"/> <meta itemprop="url" content="https://juejin.cn/user/1816846860560749"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Perfetto ç³»åˆ— 07 - MainThread å’Œ RenderThread è§£è¯»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1816846860560749/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gracker
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:21:35.000Z" title="Sun Nov 16 2025 13:21:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬ç¯‡æ˜¯ Perfetto ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸ƒç¯‡ï¼Œä¸»è¦ä»‹ç» Android App ä¸­çš„ MainThread å’Œ RenderThreadï¼Œä¹Ÿå°±æ˜¯å¤§å®¶ç†Ÿæ‚‰çš„<strong>ä¸»çº¿ç¨‹</strong>å’Œ<strong>æ¸²æŸ“çº¿ç¨‹</strong>ã€‚æ–‡ç« ä¼šä» Perfetto çš„è§’åº¦æ¥çœ‹ MainThread å’Œ RenderThread çš„å·¥ä½œæµç¨‹ï¼Œæ¶‰åŠå¡é¡¿ã€è½¯ä»¶æ¸²æŸ“ã€æ‰å¸§è®¡ç®—ç­‰ç›¸å…³çŸ¥è¯†ã€‚</p>
<p>éšç€ Google æ­£å¼æ¨å‡º Perfetto å·¥å…·æ›¿ä»£ Systraceï¼ŒPerfetto åœ¨æ€§èƒ½åˆ†æé¢†åŸŸå·²ç»æˆä¸ºä¸»æµé€‰æ‹©ã€‚æœ¬æ–‡å°†ç»“åˆ Perfetto çš„å…·ä½“ trace ä¿¡æ¯ï¼Œå¸®åŠ©è¯»è€…ç†è§£ MainThread å’Œ RenderThread çš„å®Œæ•´å·¥ä½œæµç¨‹ï¼Œè®©ä½ åœ¨ä½¿ç”¨ Perfetto åˆ†ææ€§èƒ½é—®é¢˜æ—¶èƒ½å¤Ÿï¼š</p>
<ul>
<li><strong>å‡†ç¡®è¯†åˆ«å…³é”® trace tag</strong>ï¼šçŸ¥é“ UI Threadã€RenderThread ç­‰å…³é”®çº¿ç¨‹çš„ä½œç”¨</li>
<li><strong>ç†è§£å¸§æ¸²æŸ“çš„å®Œæ•´æµç¨‹</strong>ï¼šä» Vsync ä¿¡å·åˆ°å±å¹•æ˜¾ç¤ºçš„æ¯ä¸ªæ­¥éª¤</li>
<li><strong>å®šä½æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šé€šè¿‡ trace ä¿¡æ¯å¿«é€Ÿæ‰¾åˆ°å¡é¡¿å’Œæ€§èƒ½é—®é¢˜çš„æ ¹å›  </li>
</ul>
<h3 data-id="heading-0">æœ¬æ–‡ç›®å½•</h3>
<ul>
<li><a href="#series" title="#series">ç³»åˆ—æ–‡ç« ç›®å½•</a></li>
<li><a href="#render-flow" title="#render-flow">åŸºäº Perfetto çš„æ¸²æŸ“æµç¨‹åˆ†æ</a></li>
<li><a href="#evolution" title="#evolution">åŒçº¿ç¨‹æ¸²æŸ“æ¶æ„çš„æ¼”è¿›</a></li>
<li><a href="#main-thread-create" title="#main-thread-create">ä¸»çº¿ç¨‹çš„åˆ›å»ºè¿‡ç¨‹</a></li>
<li><a href="#activitythread" title="#activitythread">ActivityThread çš„åŠŸèƒ½</a></li>
<li><a href="#render-thread" title="#render-thread">æ¸²æŸ“çº¿ç¨‹çš„åˆ›å»ºå’Œå‘å±•</a></li>
<li><a href="#performance" title="#performance">æ€§èƒ½</a></li>
<li><a href="#frametimeline" title="#frametimeline">Perfetto ç‹¬æœ‰çš„ FrameTimeline åŠŸèƒ½</a></li>
<li><a href="#vsync" title="#vsync">Perfetto ä¸­ Vsync ä¿¡å·</a></li>
<li><a href="#refs" title="#refs">å‚è€ƒ</a></li>
<li><a href="#attachments" title="#attachments">é™„ä»¶</a></li>
<li><a href="#about" title="#about">å…³äºæˆ‘ &amp;&amp; åšå®¢</a></li>
</ul>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-series" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-1">ç³»åˆ—æ–‡ç« ç›®å½•</h2>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F03%2F27%2FAndroid-Perfetto-101%2F%23%2FPerfetto-%25E7%25B3%25BB%25E5%2588%2597%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="https://www.androidperformance.com/2024/03/27/Android-Perfetto-101/#/Perfetto-%E7%B3%BB%E5%88%97%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ—ç›®å½•</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-01-What-is-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-01-What-is-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 1ï¼šPerfetto å·¥å…·ç®€ä»‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-02-how-to-get-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-02-how-to-get-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 2ï¼šPerfetto Trace æŠ“å–</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-03-how-to-analysis-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-03-how-to-analysis-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 3ï¼šç†Ÿæ‚‰ Perfetto View</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F02%2F08%2FAndroid-Perfetto-04-Open-Big-Trace-With-Command-Line%2F" target="_blank" title="https://www.androidperformance.com/2025/02/08/Android-Perfetto-04-Open-Big-Trace-With-Command-Line/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 4ï¼šä½¿ç”¨å‘½ä»¤è¡Œåœ¨æœ¬åœ°æ‰“å¼€è¶…å¤§ Trace</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F03%2F26%2FAndroid-Perfetto-05-Chorergrapher%2F" target="_blank" title="https://www.androidperformance.com/2025/03/26/Android-Perfetto-05-Chorergrapher/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 5ï¼šAndroid App åŸºäº Choreographer çš„æ¸²æŸ“æµç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F04%2F26%2FAndroid-Perfetto-06-Why-120Hz%2F" target="_blank" title="https://www.androidperformance.com/2025/04/26/Android-Perfetto-06-Why-120Hz/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 6ï¼šä¸ºä»€ä¹ˆæ˜¯ 120Hzï¼Ÿé«˜åˆ·æ–°ç‡çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2025%2F08%2F02%2FAndroid-Perfetto-07-MainThread-And-RenderThread%2F" target="_blank" title="https://androidperformance.com/2025/08/02/Android-Perfetto-07-MainThread-And-RenderThread/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 7 - MainThread å’Œ RenderThread è§£è¯»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2025%2F08%2F05%2FAndroid-Perfetto-08-Vsync%2F" target="_blank" title="https://androidperformance.com/2025/08/05/Android-Perfetto-08-Vsync/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 8ï¼šæ·±å…¥ç†è§£ Vsync æœºåˆ¶ä¸æ€§èƒ½åˆ†æ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F11%2F12%2FAndroid-Perfetto-09-CPU%2F" target="_blank" title="https://www.androidperformance.com/2025/11/12/Android-Perfetto-09-CPU/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 9 - CPU ä¿¡æ¯è§£è¯»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1oi82efE4D%2F%3Fvd_source%3D0c6d2191e785de0a36dc21a9da7e664e" target="_blank" title="https://www.bilibili.com/video/BV1oi82efE4D/?vd_source=0c6d2191e785de0a36dc21a9da7e664e" ref="nofollow noopener noreferrer">è§†é¢‘(Bç«™) - Android Perfetto åŸºç¡€å’Œæ¡ˆä¾‹åˆ†äº«</a></li>
</ol>
<p>å¦‚æœå¤§å®¶è¿˜æ²¡çœ‹è¿‡ Systrace ç³»åˆ—ï¼Œä¸‹é¢æ˜¯ä¼ é€é—¨ï¼š</p>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2019%2F05%2F26%2FAndroid_Systrace_0%2F%23%2F%25E7%25B3%25BB%25E5%2588%2597%25E6%2596%2587%25E7%25AB%25A0%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="https://www.androidperformance.com/2019/05/26/Android_Systrace_0/#/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">Systrace ç³»åˆ—ç›®å½•</a> ï¼š ç³»ç»Ÿä»‹ç»äº† Perfetto çš„å‰èº« Systrace çš„ä½¿ç”¨ï¼Œå¹¶é€šè¿‡ Systrace æ¥å­¦ä¹ å’Œäº†è§£ Android æ€§èƒ½ä¼˜åŒ–å’Œ Android ç³»ç»Ÿè¿è¡Œçš„åŸºæœ¬è§„åˆ™ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F" target="_blank" title="https://www.androidperformance.com/" ref="nofollow noopener noreferrer">ä¸ªäººåšå®¢</a> ï¼šä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯ Android ç›¸å…³çš„å†…å®¹ï¼Œä¹Ÿæ”¾äº†ä¸€äº›ç”Ÿæ´»å’Œå·¥ä½œç›¸å…³çš„å†…å®¹ã€‚</li>
</ol>
<p>æ¬¢è¿å¤§å®¶åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2Fabout%2F" target="_blank" title="https://www.androidperformance.com/about/" ref="nofollow noopener noreferrer">å…³äºæˆ‘</a> é¡µé¢åŠ å…¥å¾®ä¿¡ç¾¤æˆ–è€…æ˜Ÿçƒï¼Œè®¨è®ºä½ çš„é—®é¢˜ã€ä½ æœ€æƒ³çœ‹åˆ°çš„å…³äº Perfetto çš„éƒ¨åˆ†ï¼Œä»¥åŠè·Ÿå„ä½ç¾¤å‹è®¨è®ºæ‰€æœ‰ Android å¼€å‘ç›¸å…³çš„å†…å®¹.</p>
<p>æœ¬æ–‡ä½¿ç”¨åˆ°çš„ Trace æ–‡ä»¶æˆ‘ä¸Šä¼ åˆ°äº† Github ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGracker%2FSystraceForBlog%2Ftree%2Fmaster%2FAndroid_Perfetto%2Fdemo_app_aosp_scroll.perfetto-trace" target="_blank" title="https://github.com/Gracker/SystraceForBlog/tree/master/Android_Perfetto/demo_app_aosp_scroll.perfetto-trace" ref="nofollow noopener noreferrer">github.com/Gracker/Sysâ€¦</a> ï¼Œéœ€è¦çš„å¯ä»¥è‡ªå–ã€‚</p>
<blockquote>
<p><strong>æ³¨ï¼šæœ¬æ–‡å†…å®¹åŸºäº Android 16 çš„æœ€æ–°æ¸²æŸ“æ¶æ„</strong></p>
</blockquote>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-render-flow" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-2">åŸºäº Perfetto çš„æ¸²æŸ“æµç¨‹åˆ†æ</h2>
<p>è¿™é‡Œä»¥æ»‘åŠ¨åˆ—è¡¨ä¸ºä¾‹ï¼Œæˆ‘ä»¬é€šè¿‡ Perfetto æˆªå–ä¸»çº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹<strong>ä¸€å¸§</strong>çš„å·¥ä½œæµç¨‹(æ¯ä¸€å¸§éƒ½ä¼šéµå¾ªè¿™ä¸ªæµç¨‹ï¼Œä¸è¿‡æœ‰çš„å¸§éœ€è¦å¤„ç†çš„äº‹æƒ…å¤šï¼Œæœ‰çš„å¸§éœ€è¦å¤„ç†çš„äº‹æƒ…å°‘)ã€‚åœ¨ Perfetto UI ä¸­ï¼Œé‡ç‚¹è§‚å¯Ÿ "UI Thread" å’Œ "RenderThread" è¿™ä¸¤ä¸ªçº¿ç¨‹çš„æ´»åŠ¨ã€‚</p>
<h3 data-id="heading-3">å¸§çš„æ¦‚å¿µå’ŒåŸºæœ¬å‚æ•°</h3>
<p>åœ¨åˆ†æ Perfetto trace ä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£å¸§ï¼ˆFrameï¼‰çš„åŸºæœ¬æ¦‚å¿µã€‚Android ç³»ç»ŸæŒ‰ç…§å›ºå®šçš„æ—¶é—´é—´éš”åˆ·æ–°å±å¹•å†…å®¹ï¼š</p>
<ul>
<li><strong>60Hz è®¾å¤‡</strong>ï¼šæ¯ 16.67ms åˆ·æ–°ä¸€æ¬¡ï¼Œæ¯ç§’ 60 å¸§</li>
<li><strong>90Hz è®¾å¤‡</strong>ï¼šæ¯ 11.11ms åˆ·æ–°ä¸€æ¬¡ï¼Œæ¯ç§’ 90 å¸§</li>
<li><strong>120Hz è®¾å¤‡</strong>ï¼šæ¯ 8.33ms åˆ·æ–°ä¸€æ¬¡ï¼Œæ¯ç§’ 120 å¸§</li>
</ul>
<p>åœ¨ Perfetto ä¸­åˆ†ææ¸²æŸ“æ€§èƒ½æ—¶ï¼Œéœ€è¦é‡ç‚¹å…³æ³¨ä»¥ä¸‹ä¸¤ä¸ªçº¿ç¨‹ï¼š</p>
<ul>
<li><strong>UI Thread</strong>ï¼šåº”ç”¨ä¸»çº¿ç¨‹ï¼Œå¤„ç†ç”¨æˆ·è¾“å…¥ã€ä¸šåŠ¡é€»è¾‘ã€å¸ƒå±€è®¡ç®—</li>
<li><strong>RenderThread</strong>ï¼šæ¸²æŸ“çº¿ç¨‹ï¼Œæ‰§è¡Œ GPU æ¸²æŸ“å‘½ä»¤ï¼Œä¸ SurfaceFlinger äº¤äº’</li>
</ul>
<h3 data-id="heading-4">ä¸»çº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹çš„å·¥ä½œæµç¨‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/334a29d068a943b99d86a4090ee2de90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904095&amp;x-signature=d1gB8Tye1igfBnmIQ6Ao2myMBS4%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡ä¸Šé¢çš„ Perfetto æˆªå›¾ï¼Œå¯ä»¥çœ‹åˆ°ä¸€å¸§å®Œæ•´çš„æ¸²æŸ“æµç¨‹ã€‚æˆ‘ä»¬å¯ä»¥å°† Perfetto å›¾æƒ³è±¡æˆä¸€æ¡æ²³æµï¼šä¸»çº¿ç¨‹åœ¨ä¸Šæ¸¸å¤„ç†é€»è¾‘ï¼Œæ¸²æŸ“çº¿ç¨‹åœ¨ä¸‹æ¸¸æ‰§è¡Œç»˜åˆ¶ã€‚æ²³æµä»å·¦åˆ°å³æµåŠ¨ï¼Œæ¯æ®µä»£è¡¨ä¸€ä¸ªæ­¥éª¤ã€‚</p>
<p><strong>é‡è¦è¯´æ˜</strong>ï¼šå¹¶éæ¯ä¸€å¸§éƒ½ä¼šæ‰§è¡Œæ‰€æœ‰æ­¥éª¤ã€‚Inputã€Animationã€Insets Animation è¿™äº›å›è°ƒæ˜¯åŸºäºå‰ä¸€å¸§çš„çŠ¶æ€å†³å®šå½“å‰å¸§æ˜¯å¦æ‰§è¡Œï¼Œè€Œ Traversalï¼ˆmeasureã€layoutã€drawï¼‰æ˜¯æ¯å¸§çš„æ ¸å¿ƒæµç¨‹ã€‚</p>
<p>é€šè¿‡ä»¥ä¸‹æè¿°ï¼Œè¯•ç€åœ¨è„‘ä¸­"æ’­æ”¾"è¿™ä¸ªå®Œæ•´æµç¨‹ï¼š</p>
<h4 data-id="heading-5">1. ä¸»çº¿ç¨‹ç­‰å¾… Vsync ä¿¡å·</h4>
<ul>
<li><strong>Perfetto trace</strong>: ä¸»çº¿ç¨‹å¤„äº Sleep çŠ¶æ€ï¼ˆæ˜¾ç¤ºä¸ºç©ºé—²å—ï¼‰</li>
<li><strong>æµç¨‹è¯´æ˜</strong>: ä¸»çº¿ç¨‹ç­‰å¾…å‚ç›´åŒæ­¥ä¿¡å·ï¼ˆVsyncï¼‰åˆ°æ¥ï¼Œè¿™ç¡®ä¿æ¸²æŸ“ä¸å±å¹•åˆ·æ–°ç‡åŒæ­¥ï¼Œé¿å…ç”»é¢æ’•è£‚</li>
</ul>
<h4 data-id="heading-6">2. Vsync-app ä¿¡å·ä¼ é€’è¿‡ç¨‹</h4>
<ul>
<li><strong>Perfetto trace</strong>: <code>vsync-app</code> ç›¸å…³äº‹ä»¶ï¼ŒSurfaceFlinger app çº¿ç¨‹æ´»åŠ¨</li>
<li><strong>æµç¨‹è¯´æ˜</strong>: å½“ç¡¬ä»¶äº§ç”Ÿ Vsync ä¿¡å·æ—¶ï¼Œé¦–å…ˆä¼ é€’ç»™ SurfaceFlingerã€‚SurfaceFlinger çš„ app çº¿ç¨‹è¢«å”¤é†’ï¼Œè´Ÿè´£ç®¡ç†å’Œåˆ†å‘ Vsync ä¿¡å·ç»™éœ€è¦æ¸²æŸ“çš„åº”ç”¨ç¨‹åºã€‚è¿™ä¸ªä¸­é—´å±‚è®¾è®¡å…è®¸ç³»ç»Ÿçº§çš„ Vsync è°ƒåº¦å’Œä¼˜åŒ–</li>
</ul>
<p><strong>é‡è¦è¯´æ˜</strong>ï¼š</p>
<ul>
<li><strong>Vsync-app æ˜¯æŒ‰éœ€ç”³è¯·çš„</strong>ï¼šåªæœ‰ App ä¸»åŠ¨è¯·æ±‚æ—¶æ‰ä¼šæ”¶åˆ° vsync-app ä¿¡å·ï¼Œä¸ç”³è¯·å°±æ²¡æœ‰</li>
<li><strong>å¤š App å…±äº«æœºåˆ¶</strong>ï¼šåŒæ—¶å¯èƒ½æœ‰å¤šä¸ª App ç”³è¯· vsync-app ä¿¡å·</li>
<li><strong>ä¿¡å·å½’å±é—®é¢˜</strong>ï¼šSurfaceFlinger ä¸­çš„ vsync-app ä¿¡å·å¯èƒ½æ˜¯å…¶ä»– App ç”³è¯·çš„ï¼Œå½“å‰åˆ†æçš„ App å¦‚æœæ²¡æœ‰ç”³è¯·ï¼Œå°±ä¸ä¼šæœ‰å¸§è¾“å‡ºï¼Œè¿™æ˜¯æ­£å¸¸ç°è±¡</li>
</ul>
<h4 data-id="heading-7">3. SurfaceFlinger å”¤é†’ App ä¸»çº¿ç¨‹</h4>
<ul>
<li><strong>Perfetto trace</strong>: <code>FrameDisplayEventReceiver.onVsync</code></li>
<li><strong>æµç¨‹è¯´æ˜</strong>: SurfaceFlinger é€šè¿‡ FrameDisplayEventReceiver æœºåˆ¶å°† Vsync ä¿¡å·å‘é€ç»™å·²æ³¨å†Œçš„ Appã€‚App çš„ Choreographer æ¥æ”¶åˆ°ä¿¡å·åå¼€å§‹å¯åŠ¨ä¸€å¸§ç»˜åˆ¶æµç¨‹</li>
</ul>
<h4 data-id="heading-8">4. å¤„ç†è¾“å…¥äº‹ä»¶ï¼ˆInputï¼‰</h4>
<ul>
<li>
<p><strong>Perfetto trace</strong>: <code>Input</code> å—</p>
</li>
<li>
<p><strong>æµç¨‹è¯´æ˜</strong>: ä»…åœ¨æœ‰è¾“å…¥äº‹ä»¶æ—¶æ‰æ‰§è¡Œï¼Œä¸»è¦å¤„ç†è§¦æ‘¸ã€æ»‘åŠ¨ç­‰ç”¨æˆ·äº¤äº’</p>
</li>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>:</p>
<ul>
<li><strong>æœ‰ Input å›è°ƒ</strong>ï¼šæ‰‹æŒ‡æŒ‰å‹å±å¹•å¹¶æ»‘åŠ¨æ—¶ï¼ˆå¦‚åˆ—è¡¨æ»‘åŠ¨ã€é¡µé¢æ‹–æ‹½ï¼‰</li>
<li><strong>æ—  Input å›è°ƒ</strong>ï¼šæ‰‹æŒ‡æŠ¬èµ·åçš„æƒ¯æ€§æ»‘åŠ¨é˜¶æ®µã€é™æ­¢çŠ¶æ€</li>
</ul>
</li>
<li>
<p><strong>æ³¨æ„</strong>: Input å›è°ƒæ˜¯ç”±å‰ä¸€å¸§çš„ç”¨æˆ·äº¤äº’è¡Œä¸ºå†³å®šæ˜¯å¦åœ¨å½“å‰å¸§æ‰§è¡Œ</p>
</li>
</ul>
<h4 data-id="heading-9">5. å¤„ç†åŠ¨ç”»ï¼ˆAnimationï¼‰</h4>
<ul>
<li>
<p><strong>Perfetto trace</strong>: <code>Animation</code> å—</p>
</li>
<li>
<p><strong>æµç¨‹è¯´æ˜</strong>: ä»…åœ¨æœ‰åŠ¨ç”»éœ€è¦æ›´æ–°æ—¶æ‰æ‰§è¡Œï¼Œæ›´æ–°åŠ¨ç”»çŠ¶æ€å’Œå½“å‰å¸§çš„åŠ¨ç”»å€¼</p>
</li>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>:</p>
<ul>
<li><strong>æœ‰ Animation å›è°ƒ</strong>ï¼šæƒ¯æ€§æ»‘åŠ¨é˜¶æ®µã€å±æ€§åŠ¨ç”»è¿è¡Œæ—¶ã€åˆ—è¡¨ item åˆ›å»ºå’Œå†…å®¹å˜åŒ–ã€é¡µé¢è½¬åœºåŠ¨ç”»ç­‰</li>
<li><strong>æ—  Animation å›è°ƒ</strong>ï¼šç•Œé¢é™æ­¢çŠ¶æ€ã€çº¯ Input äº¤äº’é˜¶æ®µï¼ˆæ— åŠ¨ç”»æ•ˆæœæ—¶ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ³¨æ„</strong>: Animation å›è°ƒåŒæ ·ç”±å‰ä¸€å¸§ post çš„å›è°ƒå†³å®šå½“å‰å¸§æ˜¯å¦æ‰§è¡Œ</p>
</li>
</ul>
<h4 data-id="heading-10">6. å¤„ç† Insets åŠ¨ç”»</h4>
<ul>
<li>
<p><strong>Perfetto trace</strong>: <code>Insets Animation</code> å—</p>
</li>
<li>
<p><strong>æµç¨‹è¯´æ˜</strong>: ä»…åœ¨æœ‰çª—å£æ’å…¥å˜åŒ–æ—¶æ‰æ‰§è¡Œï¼Œå¤„ç†çª—å£è¾¹ç•ŒåŠ¨ç”»</p>
</li>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>:</p>
<ul>
<li><strong>æœ‰ Insets Animation å›è°ƒ</strong>ï¼šé”®ç›˜å¼¹å‡º/æ”¶èµ·ã€çŠ¶æ€æ æ˜¾ç¤º/éšè—ã€å¯¼èˆªæ å˜åŒ–ç­‰</li>
<li><strong>æ—  Insets Animation å›è°ƒ</strong>ï¼šçª—å£è¾¹ç•Œç¨³å®šçŠ¶æ€ï¼Œå¤§éƒ¨åˆ†æ™®é€šäº¤äº’åœºæ™¯</li>
</ul>
</li>
</ul>
<h4 data-id="heading-11">7. Traversalï¼ˆæµ‹é‡ã€å¸ƒå±€ã€ç»˜åˆ¶å‡†å¤‡ï¼‰</h4>
<ul>
<li><strong>Perfetto trace</strong>: <code>performTraversals</code>, <code>measure</code>, <code>layout</code>, <code>draw</code></li>
<li><strong>æµç¨‹è¯´æ˜</strong>: Android UI æ¸²æŸ“çš„ä¸‰å¤§æ ¸å¿ƒæµç¨‹ï¼Œæ¯ä¸€å¸§éƒ½ä¼šæ‰§è¡Œè¿™ä¸ªå®Œæ•´çš„æµç¨‹ï¼š</li>
</ul>
<h5 data-id="heading-12">7.1 Measureï¼ˆæµ‹é‡é˜¶æ®µï¼‰</h5>
<ul>
<li>
<p><strong>ä½œç”¨</strong>: ç¡®å®šæ¯ä¸ª View çš„å°ºå¯¸å¤§å°</p>
</li>
<li>
<p><strong>è¿‡ç¨‹</strong>: ä»æ ¹ View å¼€å§‹ï¼Œé€’å½’æµ‹é‡æ‰€æœ‰å­ View çš„å®½é«˜</p>
</li>
<li>
<p><strong>å…³é”®æ¦‚å¿µ</strong>:</p>
<ul>
<li><code>MeasureSpec</code>ï¼šå°è£…äº†çˆ¶å®¹å™¨å¯¹å­ View çš„å°ºå¯¸è¦æ±‚ï¼ˆEXACTLYã€AT_MOSTã€UNSPECIFIEDï¼‰</li>
<li><code>onMeasure()</code>ï¼šæ¯ä¸ª View é‡å†™æ­¤æ–¹æ³•æ¥å®ç°è‡ªå·±çš„æµ‹é‡é€»è¾‘</li>
</ul>
</li>
<li>
<p><strong>Perfetto ä¸­çš„è¡¨ç°</strong>: <code>measure</code> äº‹ä»¶ï¼Œè€—æ—¶å–å†³äº View å±‚çº§å¤æ‚åº¦</p>
</li>
</ul>
<h5 data-id="heading-13">7.2 Layoutï¼ˆå¸ƒå±€é˜¶æ®µï¼‰</h5>
<ul>
<li>
<p><strong>ä½œç”¨</strong>: ç¡®å®šæ¯ä¸ª View åœ¨çˆ¶å®¹å™¨ä¸­çš„ä½ç½®åæ ‡</p>
</li>
<li>
<p><strong>è¿‡ç¨‹</strong>: åŸºäº Measure é˜¶æ®µçš„ç»“æœï¼Œä¸ºæ¯ä¸ª View åˆ†é…å®é™…çš„æ˜¾ç¤ºä½ç½®</p>
</li>
<li>
<p><strong>å…³é”®æ¦‚å¿µ</strong>:</p>
<ul>
<li><code>layout(left, top, right, bottom)</code>ï¼šè®¾ç½® View çš„å››ä¸ªè¾¹ç•Œåæ ‡</li>
<li><code>onLayout()</code>ï¼šViewGroup é‡å†™æ­¤æ–¹æ³•æ¥ç¡®å®šå­ View çš„ä½ç½®</li>
</ul>
</li>
<li>
<p><strong>Perfetto ä¸­çš„è¡¨ç°</strong>: <code>layout</code> äº‹ä»¶ï¼Œé€šå¸¸æ¯” measure æ›´å¿«</p>
</li>
</ul>
<h5 data-id="heading-14">7.3 Drawï¼ˆç»˜åˆ¶é˜¶æ®µï¼‰</h5>
<ul>
<li>
<p><strong>ä½œç”¨</strong>: å°† View çš„å†…å®¹ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Š</p>
</li>
<li>
<p><strong>ç°ä»£å®ç°</strong>: ä¸ç›´æ¥ç»˜åˆ¶åƒç´ ï¼Œè€Œæ˜¯æ„å»º DisplayListï¼ˆç»˜åˆ¶æŒ‡ä»¤åˆ—è¡¨ï¼‰</p>
</li>
<li>
<p><strong>å…³é”®æµç¨‹</strong>:</p>
<ul>
<li><code>draw(Canvas)</code>ï¼šç»˜åˆ¶ View è‡ªèº«å†…å®¹</li>
<li><code>onDraw(Canvas)</code>ï¼šå­ç±»é‡å†™å®ç°å…·ä½“ç»˜åˆ¶é€»è¾‘</li>
<li><code>dispatchDraw(Canvas)</code>ï¼šViewGroup ç”¨æ¥ç»˜åˆ¶å­ View</li>
</ul>
</li>
<li>
<p><strong>Perfetto ä¸­çš„è¡¨ç°</strong>: <code>draw</code> äº‹ä»¶ï¼Œåœ¨ç¡¬ä»¶åŠ é€Ÿä¸‹ä¸»è¦æ˜¯æ„å»º DisplayList</p>
</li>
</ul>
<h5 data-id="heading-15">ViewRootImpl.performTraversals æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// frameworks/base/core/java/android/view/ViewRootImpl.java</span>
private void <span class="hljs-built_in">performTraversals</span>() {
    <span class="hljs-comment">// ... å…¶ä»–ä»£ç </span>
    
    <span class="hljs-comment">// 1. Measure é˜¶æ®µ</span>
    if (mFirst || windowShouldResize || viewVisibilityChanged || params != null) {
        <span class="hljs-built_in">performMeasure</span>(childWidthMeasureSpec, childHeightMeasureSpec);
    }
    
    <span class="hljs-comment">// 2. Layout é˜¶æ®µ  </span>
    final boolean didLayout = layoutRequested &amp;&amp; (!mStopped || mReportNextDraw);
    if (didLayout) {
        <span class="hljs-built_in">performLayout</span>(lp, mWidth, mHeight);
    }
    
    <span class="hljs-comment">// 3. Draw é˜¶æ®µ</span>
    if (!performRequestedAction(mAttachInfo, mFirst)) {
        if (mFirst || viewVisibilityChanged) {
            <span class="hljs-built_in">performDraw</span>();
        }
    }
}
</code></pre>
<blockquote>
<p>æ³¨ï¼šå®é™… AOSP æºç ä¸­ <code>performTraversals</code> çš„æ¡ä»¶åˆ¤æ–­æ›´ä¸ºå¤æ‚ï¼Œä¼šæ¶‰åŠ <code>mFirst</code>ã€<code>mAdded</code>ã€<code>mWindowShouldResize</code> ä»¥åŠå„ç§ <code>dirty</code> çŠ¶æ€æ ‡è®°ï¼Œä½†ä»¥ä¸Šä»£ç æ¸…æ™°åœ°å±•ç¤ºäº†å…¶æ ¸å¿ƒçš„ Measureã€Layoutã€Draw ä¸‰é˜¶æ®µæµç¨‹ã€‚</p>
</blockquote>
<p><strong>ä¸‰é˜¶æ®µçš„æ‰§è¡Œæ¡ä»¶</strong>ï¼š</p>
<ul>
<li><strong>Measure</strong>: å½“çª—å£å¤§å°å˜åŒ–ã€é¦–æ¬¡åˆ›å»ºæˆ–è€…è§†å›¾å¯è§æ€§å˜åŒ–æ—¶æ‰§è¡Œ</li>
<li><strong>Layout</strong>: å½“å¸ƒå±€è¢«è¯·æ±‚ä¸”åº”ç”¨æœªåœæ­¢æ—¶æ‰§è¡Œ</li>
<li><strong>Draw</strong>: å½“æœ‰ç»˜åˆ¶è¯·æ±‚æˆ–è€…æ˜¯é¦–æ¬¡ç»˜åˆ¶ã€è§†å›¾å¯è§æ€§å˜åŒ–æ—¶æ‰§è¡Œ</li>
</ul>
<h4 data-id="heading-16">8. åŒæ­¥ DisplayList åˆ°æ¸²æŸ“çº¿ç¨‹</h4>
<ul>
<li><strong>Perfetto trace</strong>: syncAndDrawFrameï¼Œå¯è§ "sync" æˆ– "syncAndDrawFrame" äº‹ä»¶ï¼ˆé€šå¸¸æ˜¾ç¤ºä¸ºä¸»çº¿ç¨‹å‘æ¸²æŸ“çº¿ç¨‹çš„æ•°æ®ä¼ é€’ç‚¹ï¼‰</li>
<li><strong>æµç¨‹è¯´æ˜</strong>: ä¸»çº¿ç¨‹é€šè¿‡ syncAndDrawFrame å°†æ„å»ºå¥½çš„ DisplayListï¼ˆåŒ…å« RenderNode æ ‘ã€è§†å›¾å±æ€§å¦‚å˜æ¢çŸ©é˜µã€é€æ˜åº¦å’Œè£å‰ªåŒºåŸŸï¼Œä»¥åŠå…±äº«èµ„æºå¦‚çº¹ç†ï¼‰ä¼ é€’ç»™æ¸²æŸ“çº¿ç¨‹ã€‚è¿™ä¸ªåŒæ­¥è¿‡ç¨‹æ˜¯ç¡¬ä»¶åŠ é€Ÿçš„æ ¸å¿ƒï¼Œç¡®ä¿æ¸²æŸ“çº¿ç¨‹è·å¾—å®Œæ•´çš„ç»˜åˆ¶æŒ‡ä»¤ã€‚åŒæ­¥å®Œæˆåï¼Œä¸»çº¿ç¨‹ç«‹å³é‡Šæ”¾èµ„æºï¼ˆå¯ç»§ç»­å¤„ç†å…¶ä»–æ¶ˆæ¯ã€IdleHandler æˆ–è¿›å…¥ Sleep ç­‰å¾…ä¸‹ä¸€ä¸ª Vsyncï¼‰ï¼Œè€Œæ¸²æŸ“çº¿ç¨‹ç‹¬ç«‹æ¥ç®¡åç»­çš„ GPU æ¸²æŸ“å·¥ä½œã€‚</li>
</ul>
<h4 data-id="heading-17">9. æ¸²æŸ“çº¿ç¨‹è·å– Buffer</h4>
<ul>
<li><strong>Perfetto trace</strong>: <code>dequeueBuffer</code> å—</li>
<li><strong>æµç¨‹è¯´æ˜</strong>: æ¸²æŸ“çº¿ç¨‹ä» BlastBufferQueueï¼ˆApp ç«¯ç®¡ç†çš„ç¼“å†²é˜Ÿåˆ—ï¼‰é€šè¿‡ dequeueBuffer è·å–ä¸€ä¸ªå¯ç”¨ç¼“å†²åŒºï¼Œä½œä¸ºæ¸²æŸ“ç›®æ ‡ï¼ˆframebufferï¼‰ã€‚BlastBufferQueue é‡‡ç”¨ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼Œé¢„å…ˆç®¡ç†ç¼“å†²æ± ä»¥å‡å°‘ç­‰å¾…æ—¶é—´ï¼›å¦‚æœæ— å¯ç”¨ Bufferï¼Œå¯èƒ½çŸ­æš‚ç­‰å¾…æˆ–è§¦å‘æ–° Buffer åˆ›å»ºã€‚</li>
</ul>
<h4 data-id="heading-18">10. å¤„ç†æ¸²æŸ“æŒ‡ä»¤å¹¶ flush åˆ° GPU</h4>
<ul>
<li>
<h6 data-id="heading-19"><strong>Perfetto trace</strong>: <code>drawing</code> ç›¸å…³å—</h6>
</li>
<li><strong>æµç¨‹è¯´æ˜</strong>: RenderThreadï¼ˆè¿è¡Œåœ¨ CPU ä¸Šï¼‰é€šè¿‡ HardwareRenderer å’Œ CanvasContext å¤„ç†ä» UI thread åŒæ­¥è¿‡æ¥çš„ DisplayListï¼Œè°ƒç”¨ OpenGL ES æˆ– Vulkan API æ¥å‡†å¤‡ç»˜åˆ¶å‘½ä»¤åºåˆ—ï¼ˆå¦‚æ¸²æŸ“è§†å›¾çš„å‡ ä½•å½¢çŠ¶ã€çº¹ç†ã€ç€è‰²æ•ˆæœï¼‰ã€‚è¿™äº›å‘½ä»¤è¢«æ„å»ºæˆå‘½ä»¤ç¼“å†²åŒºï¼ˆcommand bufferï¼‰ï¼Œç„¶åé€šè¿‡ flush æ“ä½œï¼ˆä¾‹å¦‚ mRenderPipeline-&gt;flush()ï¼‰æäº¤åˆ° GPU é©±åŠ¨ï¼ŒåŒæ—¶ç”Ÿæˆ present fence ç”¨äºåç»­åŒæ­¥ã€‚GPU å¼‚æ­¥æ‰§è¡Œè¿™äº›æŒ‡ä»¤ï¼Œå®é™…ç”Ÿæˆå›¾åƒå†…å®¹ã€‚</li>
</ul>
<h4 data-id="heading-20">11. æäº¤ Bufferï¼ˆå¯èƒ½ unsignaledï¼‰</h4>
<ul>
<li><strong>Perfetto trace</strong>: queueBufferï¼ˆå¯è§‚å¯Ÿ acquireFence çŠ¶æ€ï¼‰</li>
<li><strong>æµç¨‹è¯´æ˜</strong>: RenderThread é€šè¿‡ queueBuffer å°†æ¸²æŸ“å®Œæˆçš„ Buffer æäº¤å› BlastBufferQueueï¼Œæ­¤æ—¶ Buffer å¯èƒ½æºå¸¦ unsignaled çš„ acquire fenceï¼ˆå³ GPU æ¸²æŸ“å‘½ä»¤å°šæœªå®Œå…¨æ‰§è¡Œå®Œæ¯•ï¼‰ã€‚è¿™ç§å¼‚æ­¥æäº¤æœºåˆ¶æœ‰åŠ©äºå‡å°‘æ•´ä½“æ¸²æŸ“å»¶è¿Ÿã€‚</li>
</ul>
<h4 data-id="heading-21">12. è§¦å‘ Transaction åˆ° SurfaceFlinger</h4>
<ul>
<li><strong>Perfetto trace</strong>: TransactionQueue æˆ– BLAST transaction äº‹ä»¶ ï¼Œä¸€èˆ¬åœ¨ queueBuffer ä¹‹åï¼Œæœ‰äº› Trace æ²¡æœ‰è¿™ä¸ª Tag</li>
<li><strong>æµç¨‹è¯´æ˜</strong>: åœ¨ queueBuffer å®Œæˆåï¼ŒRenderThread é€šè¿‡ applyPendingTransactions å°†ç§¯ç´¯çš„ Transactionï¼ˆåŒ…æ‹¬ Buffer æ›´æ–°ã€å±‚å±æ€§å˜åŒ–ç­‰ï¼‰æ‰¹é‡å‘é€ç»™ SurfaceFlingerã€‚SurfaceFlinger å¤„ç†è¿™äº› Transactionï¼Œæ ¹æ® LatchUnsignaledConfig ç­–ç•¥ï¼ˆä¾‹å¦‚ AutoSingleLayer é…ç½®ï¼‰æ£€æŸ¥å¹¶å¯èƒ½ latch unsignaled buffer ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–å»¶è¿Ÿï¼›å¦‚æœé…ç½®ç¦ç”¨ unsignaled latchï¼Œåˆ™ç­‰å¾… fence signaled ç¡®ä¿ Buffer å°±ç»ªã€‚éšåï¼ŒSurfaceFlinger æ‰§è¡Œå±‚åˆæˆï¼ˆcompositeï¼‰å¹¶å°†æœ€ç»ˆå›¾åƒæ˜¾ç¤ºåˆ°å±å¹•ã€‚</li>
</ul>
<p><strong>åœ¨ Perfetto ä¸­è¯†åˆ«ä¸åŒçš„æ¸²æŸ“æ¨¡å¼</strong>ï¼š</p>
<ul>
<li><strong>æ‰‹æŒ‡æ»‘åŠ¨æ—¶</strong>ï¼šæ¯å¸§éƒ½æœ‰ <code>Input</code> â†’ <code>Traversal</code> â†’ <code>RenderThread</code> çš„å®Œæ•´é“¾è·¯</li>
<li><strong>æƒ¯æ€§æ»‘åŠ¨æ—¶</strong>ï¼šæ¯å¸§éƒ½æœ‰ <code>Animation</code> â†’ <code>Traversal</code> â†’ <code>RenderThread</code>ï¼Œæ²¡æœ‰ <code>Input</code></li>
<li><strong>é™æ­¢çŠ¶æ€æ—¶</strong>ï¼šå¶å°”å‡ºç° <code>Animation</code> â†’ <code>Traversal</code> â†’ <code>RenderThread</code>ï¼Œæ²¡æœ‰ <code>Input</code></li>
</ul>
<h3 data-id="heading-22">è½¯ä»¶ç»˜åˆ¶ vs ç¡¬ä»¶åŠ é€Ÿ</h3>
<p>è™½ç„¶ç°åœ¨åŸºæœ¬éƒ½ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“ï¼Œä½†äº†è§£ä¸¤ç§æ¸²æŸ“æ¨¡å¼çš„åŒºåˆ«ä»ç„¶æœ‰åŠ©äºç†è§£ Perfetto traceï¼š</p>






























<table><thead><tr><th>æ–¹é¢</th><th>è½¯ä»¶ç»˜åˆ¶</th><th>ç¡¬ä»¶åŠ é€Ÿ</th></tr></thead><tbody><tr><td><strong>ç»˜åˆ¶çº¿ç¨‹</strong></td><td>ä¸»çº¿ç¨‹</td><td>RenderThread</td></tr><tr><td><strong>ç»˜åˆ¶å¼•æ“</strong></td><td>Skia (CPU)</td><td>OpenGL/Vulkan (GPU)</td></tr><tr><td><strong>Perfetto ç‰¹å¾</strong></td><td>ä¸»çº¿ç¨‹æœ‰å¤§å— <code>draw</code> äº‹ä»¶</td><td>ä¸»çº¿ç¨‹å¿«é€Ÿå®Œæˆï¼ŒRenderThread å¤„ç†ç»˜åˆ¶</td></tr><tr><td><strong>æ€§èƒ½å½±å“</strong></td><td>å¯èƒ½é˜»å¡ä¸»çº¿ç¨‹</td><td>å¼‚æ­¥æ¸²æŸ“ï¼Œæ€§èƒ½æ›´å¥½</td></tr></tbody></table>
<p>ä¸Šé¢ä»‹ç»çš„æ˜¯åŸºæœ¬çš„æ¸²æŸ“æµç¨‹ï¼Œæ›´è¯¦ç»†çš„ Choreographer åŸç†å¯ä»¥å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2025%2F03%2F26%2FAndroid-Perfetto-05-Chorergrapher%2F" target="_blank" title="https://androidperformance.com/2025/03/26/Android-Perfetto-05-Chorergrapher/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 5ï¼šAndroid App åŸºäº Choreographer çš„æ¸²æŸ“æµç¨‹</a>ã€‚</p>
<hr/>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬é‡ç‚¹è®²è§£ä¸»çº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹çš„æ·±å…¥å†…å®¹ï¼š</p>
<ol start="0">
<li>ä¸»çº¿ç¨‹çš„å‘å±•</li>
<li>ä¸»çº¿ç¨‹çš„åˆ›å»º</li>
<li>æ¸²æŸ“çº¿ç¨‹çš„åˆ›å»º</li>
<li>ä¸»çº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹çš„åˆ†å·¥</li>
</ol>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-evolution" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-23">åŒçº¿ç¨‹æ¸²æŸ“æ¶æ„çš„æ¼”è¿›</h2>
<p>Android çš„æ¸²æŸ“ç³»ç»Ÿç»å†äº†ä»å•çº¿ç¨‹åˆ°åŒçº¿ç¨‹çš„é‡è¦æ¼”è¿›è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-24">å•çº¿ç¨‹æ—¶ä»£ï¼ˆAndroid 4.4 ä¹‹å‰ï¼‰</h3>
<p>åœ¨æ—©æœŸçš„ Android ç‰ˆæœ¬ä¸­ï¼Œæ‰€æœ‰çš„ UI ç›¸å…³å·¥ä½œéƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼š</p>
<ul>
<li>å¤„ç†ç”¨æˆ·è¾“å…¥äº‹ä»¶</li>
<li>æ‰§è¡Œ measureã€layoutã€draw</li>
<li>è°ƒç”¨ OpenGL è¿›è¡Œå®é™…ç»˜åˆ¶</li>
<li>ä¸ SurfaceFlinger äº¤äº’</li>
</ul>
<p>è¿™ç§è®¾è®¡çš„é—®é¢˜ï¼š</p>
<ol start="0">
<li><strong>å“åº”æ€§å·®</strong>ï¼šä¸»çº¿ç¨‹è´Ÿè½½è¿‡é‡ï¼Œå®¹æ˜“å‡ºç° ANR</li>
<li><strong>æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šCPU å’Œ GPU æ— æ³•å¹¶è¡Œå·¥ä½œ</li>
<li><strong>å¸§ç‡ä¸ç¨³å®š</strong>ï¼šå¤æ‚ç•Œé¢å®¹æ˜“å¯¼è‡´æ‰å¸§</li>
</ol>
<h3 data-id="heading-25">åŒçº¿ç¨‹æ—¶ä»£ï¼ˆAndroid 5.0 Lollipop å¼€å§‹ï¼‰</h3>
<p>Android 5.0 å¼•å…¥äº† <strong>RenderThread</strong>ï¼Œå®ç°æ¸²æŸ“å·¥ä½œçš„åˆ†ç¦»ï¼š</p>
<p><strong>ä¸»çº¿ç¨‹èŒè´£</strong>ï¼š</p>
<ul>
<li>å¤„ç†ç”¨æˆ·è¾“å…¥å’Œä¸šåŠ¡é€»è¾‘</li>
<li>æ‰§è¡Œ View çš„ measureã€layoutã€draw</li>
<li>æ„å»º DisplayListï¼ˆç»˜åˆ¶æŒ‡ä»¤åˆ—è¡¨ï¼‰</li>
<li>ä¸æ¸²æŸ“çº¿ç¨‹åŒæ­¥æ•°æ®</li>
</ul>
<p><strong>æ¸²æŸ“çº¿ç¨‹èŒè´£</strong>ï¼š</p>
<ul>
<li>æ¥æ”¶å¹¶å¤„ç† DisplayList</li>
<li>æ‰§è¡Œ OpenGL/Vulkan æ¸²æŸ“å‘½ä»¤</li>
<li>ç®¡ç†çº¹ç†å’Œæ¸²æŸ“èµ„æº</li>
<li>ä¸ SurfaceFlinger äº¤äº’</li>
</ul>
<p>è¿™ç§æ¶æ„å¸¦æ¥çš„ä¼˜åŠ¿ï¼š</p>
<ol start="0">
<li><strong>å¹¶è¡Œå¤„ç†</strong>ï¼šä¸»çº¿ç¨‹å¯ä»¥åœ¨æ¸²æŸ“çº¿ç¨‹å·¥ä½œæ—¶å¤„ç†ä¸‹ä¸€å¸§</li>
<li><strong>å“åº”æ€§æå‡</strong>ï¼šä¸»çº¿ç¨‹ä¸å†è¢«æ¸²æŸ“é˜»å¡</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šGPU èµ„æºå¾—åˆ°æ›´å¥½åˆ©ç”¨</li>
</ol>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-main-thread-create" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-26">ä¸»çº¿ç¨‹çš„åˆ›å»ºè¿‡ç¨‹</h2>
<p>Android App çš„è¿›ç¨‹æ˜¯åŸºäº Linux çš„ï¼Œå…¶ç®¡ç†ä¹Ÿæ˜¯åŸºäº Linux çš„è¿›ç¨‹ç®¡ç†æœºåˆ¶ï¼Œæ‰€ä»¥å…¶åˆ›å»ºä¹Ÿæ˜¯è°ƒç”¨äº† fork å‡½æ•°</p>
<p>frameworks/base/core/jni/com_android_internal_os_Zygote.cpp</p>
<pre><code class="hljs language-ini" lang="ini">pid_t <span class="hljs-attr">pid</span> = fork()<span class="hljs-comment">;</span>
</code></pre>
<p>Fork å‡ºæ¥çš„è¿›ç¨‹ï¼Œæˆ‘ä»¬è¿™é‡Œå¯ä»¥æŠŠä»–çœ‹åšä¸»çº¿ç¨‹ï¼Œä½†æ˜¯è¿™ä¸ªçº¿ç¨‹è¿˜æ²¡æœ‰å’Œ Android è¿›è¡Œè¿æ¥ï¼Œæ‰€ä»¥æ— æ³•å¤„ç† Android App çš„ Message ï¼›ç”±äº Android App çº¿ç¨‹è¿è¡Œ<strong>åŸºäºæ¶ˆæ¯æœºåˆ¶</strong> ï¼Œé‚£ä¹ˆè¿™ä¸ª Fork å‡ºæ¥çš„ä¸»çº¿ç¨‹éœ€è¦å’Œ Android çš„ Message æ¶ˆæ¯ç»‘å®šï¼Œæ‰èƒ½å¤„ç† Android App çš„å„ç§ Message</p>
<p>è¿™é‡Œå°±å¼•å…¥äº† <strong>ActivityThread</strong> ï¼Œç¡®åˆ‡çš„è¯´ï¼ŒActivityThread åº”è¯¥èµ·åå« ProcessThread æ›´è´´åˆ‡ä¸€äº›ã€‚ActivityThread è¿æ¥äº† Fork å‡ºæ¥çš„è¿›ç¨‹å’Œ App çš„ Message ï¼Œä»–ä»¬çš„é€šåŠ›é…åˆç»„æˆäº†æˆ‘ä»¬ç†ŸçŸ¥çš„ Android App ä¸»çº¿ç¨‹ã€‚æ‰€ä»¥è¯´ ActivityThread å…¶å®å¹¶ä¸æ˜¯ä¸€ä¸ª Threadï¼Œè€Œæ˜¯ä»–åˆå§‹åŒ–äº† Message æœºåˆ¶æ‰€éœ€è¦çš„ MessageQueueã€Looperã€Handler ï¼Œè€Œä¸”å…¶ Handler è´Ÿè´£å¤„ç†å¤§éƒ¨åˆ† Message æ¶ˆæ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹ æƒ¯ä¸Šè§‰å¾— ActivityThread æ˜¯ä¸»çº¿ç¨‹ï¼Œå…¶å®ä»–åªæ˜¯ä¸»çº¿ç¨‹çš„ä¸€ä¸ªé€»è¾‘å¤„ç†å•å…ƒã€‚</p>
<h3 data-id="heading-27">ActivityThread çš„åˆ›å»º</h3>
<p>App è¿›ç¨‹ fork å‡ºæ¥ä¹‹åï¼Œå›åˆ° App è¿›ç¨‹ï¼ŒæŸ¥æ‰¾ ActivityThread çš„ Mainå‡½æ•°</p>
<p>com/android/internal/os/ZygoteInit.java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Android 16 æœ€æ–°çš„ Zygote åˆå§‹åŒ–å®ç°</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Runnable <span class="hljs-title function_">childZygoteInit</span><span class="hljs-params">(
        <span class="hljs-type">int</span> targetSdkVersion, String[] argv, ClassLoader classLoader)</span> {
    RuntimeInit.<span class="hljs-type">Arguments</span> <span class="hljs-variable">args</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeInit</span>.Arguments(argv);
    
    <span class="hljs-comment">// è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§</span>
    <span class="hljs-keyword">if</span> (args.niceName != <span class="hljs-literal">null</span>) {
        Process.setArgV0(args.niceName);
    }
    
    <span class="hljs-comment">// è®¾ç½®åº”ç”¨ç¨‹åºçš„è°ƒè¯•æ¨¡å¼</span>
    <span class="hljs-keyword">if</span> (args.invokeWith != <span class="hljs-literal">null</span>) {
        WrapperInit.execApplication(args.invokeWith,
                args.niceName, args.targetSdkVersion,
                VMRuntime.getCurrentInstructionSet(),
                <span class="hljs-literal">null</span>, args.remainingArgs);
        
        <span class="hljs-comment">// Should not get here.</span>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"WrapperInit.execApplication unexpectedly returned"</span>);
    } <span class="hljs-keyword">else</span> {
        ZygoteInit.zygoteInit(args.targetSdkVersion, args.disabledCompatChanges,
                args.remainingArgs, classLoader);
    }
    
    <span class="hljs-keyword">return</span> RuntimeInit.findStaticMain(args.startClass, args.startArgs, classLoader);
}
</code></pre>
<p>è¿™é‡Œçš„ startClass å°±æ˜¯ ActivityThreadï¼Œæ‰¾åˆ°ä¹‹åè°ƒç”¨ï¼Œé€»è¾‘å°±åˆ°äº† ActivityThreadçš„mainå‡½æ•°</p>
<p>android/app/ActivityThread.java</p>
<pre><code class="hljs language-ini" lang="ini">public static void main(String<span class="hljs-section">[]</span> args) {
    Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, "ActivityThreadMain")<span class="hljs-comment">;</span>
    
    // 1. åˆå§‹åŒ– Looperã€MessageQueue
    Looper.prepareMainLooper()<span class="hljs-comment">;</span>
    
    // 2. åˆå§‹åŒ– ActivityThread
    long <span class="hljs-attr">startSeq</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    if (args != null) {
        for (int <span class="hljs-attr">i</span> = args.length - <span class="hljs-number">1</span><span class="hljs-comment">; i &gt;= 0; --i) {</span>
            if (args<span class="hljs-section">[i]</span> != null &amp;&amp; args<span class="hljs-section">[i]</span>.startsWith(PROC_START_SEQ_IDENT)) {
                <span class="hljs-attr">startSeq</span> = Long.parseLong(
                        args<span class="hljs-section">[i]</span>.substring(PROC_START_SEQ_IDENT.length()))<span class="hljs-comment">;</span>
            }
        }
    }
    ActivityThread <span class="hljs-attr">thread</span> = new ActivityThread()<span class="hljs-comment">;</span>
    
    // 3. ä¸»è¦æ˜¯è°ƒç”¨ AMS.attachApplicationLockedï¼ŒåŒæ­¥è¿›ç¨‹ä¿¡æ¯ï¼Œåšä¸€äº›åˆå§‹åŒ–å·¥ä½œ
    thread.attach(false, startSeq)<span class="hljs-comment">;</span>
    
    // 4. è·å–ä¸»çº¿ç¨‹çš„ Handlerï¼Œè¿™é‡Œæ˜¯ H ï¼ŒåŸºæœ¬ä¸Š App çš„ Message éƒ½ä¼šåœ¨è¿™ä¸ª Handler é‡Œé¢è¿›è¡Œå¤„ç† 
    if (<span class="hljs-attr">sMainThreadHandler</span> == null) {
        <span class="hljs-attr">sMainThreadHandler</span> = thread.getHandler()<span class="hljs-comment">;</span>
    }
    
    Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER)<span class="hljs-comment">;</span>
    
    // 5. åˆå§‹åŒ–å®Œæˆï¼ŒLooper å¼€å§‹å·¥ä½œ
    Looper.loop()<span class="hljs-comment">;</span>
    
    throw new RuntimeException("Main thread loop unexpectedly exited")<span class="hljs-comment">;</span>
}
</code></pre>
<p>æ³¨é‡Šé‡Œé¢éƒ½å¾ˆæ¸…æ¥šï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†è¯´äº†ï¼Œmain å‡½æ•°å¤„ç†å®Œæˆä¹‹åï¼Œä¸»çº¿ç¨‹å°±ç®—æ˜¯æ­£å¼ä¸Šçº¿å¼€å§‹å·¥ä½œ.</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-activitythread" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-28">ActivityThread çš„åŠŸèƒ½</h3>
<p>å¦å¤–æˆ‘ä»¬ç»å¸¸è¯´çš„ï¼ŒAndroid å››å¤§ç»„ä»¶éƒ½æ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸Šçš„ï¼Œå…¶å®è¿™é‡Œä¹Ÿå¾ˆå¥½ç†è§£ï¼Œçœ‹ä¸€ä¸‹ ActivityThread çš„ Handler çš„ Message å°±çŸ¥é“äº†</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">H</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Handler</span> { <span class="hljs-comment">// æ‘˜æŠ„äº†éƒ¨åˆ†ï¼ŒåŸºäº Android 16 æœ€æ–°å®ç°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">BIND_APPLICATION</span>        <span class="hljs-operator">=</span> <span class="hljs-number">110</span>; <span class="hljs-comment">// åº”ç”¨å¯åŠ¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CREATE_SERVICE</span>          <span class="hljs-operator">=</span> <span class="hljs-number">114</span>; <span class="hljs-comment">// åˆ›å»ºService</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">BIND_SERVICE</span>            <span class="hljs-operator">=</span> <span class="hljs-number">121</span>; <span class="hljs-comment">// ç»‘å®šService  </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">RECEIVER</span>                <span class="hljs-operator">=</span> <span class="hljs-number">113</span>; <span class="hljs-comment">// å¹¿æ’­æ¥æ”¶</span>
    <span class="hljs-comment">// ... è¿˜æœ‰å…¶ä»–å››å¤§ç»„ä»¶ç›¸å…³çš„æ¶ˆæ¯ç±»å‹</span>
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿›ç¨‹åˆ›å»ºã€Activity å¯åŠ¨ã€Service çš„ç®¡ç†ã€Receiver çš„ç®¡ç†ã€Provider çš„ç®¡ç†è¿™äº›éƒ½ä¼šåœ¨è¿™é‡Œå¤„ç†ï¼Œç„¶åè¿›åˆ°å…·ä½“çš„ handleXXX</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-render-thread" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-29">æ¸²æŸ“çº¿ç¨‹çš„åˆ›å»ºå’Œå‘å±•</h2>
<p>ä¸»çº¿ç¨‹è®²å®Œäº†æˆ‘ä»¬æ¥è®²æ¸²æŸ“çº¿ç¨‹ï¼Œæ¸²æŸ“çº¿ç¨‹ä¹Ÿå°±æ˜¯ RenderThread ï¼Œæœ€åˆçš„ Android ç‰ˆæœ¬é‡Œé¢æ˜¯æ²¡æœ‰æ¸²æŸ“çº¿ç¨‹çš„ï¼Œæ¸²æŸ“å·¥ä½œéƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹å®Œæˆï¼Œä½¿ç”¨çš„ä¹Ÿéƒ½æ˜¯ CPU ï¼Œè°ƒç”¨çš„æ˜¯ libSkia è¿™ä¸ªåº“ï¼ŒRenderThread æ˜¯åœ¨ Android Lollipop ä¸­æ–°åŠ å…¥çš„ç»„ä»¶ï¼Œè´Ÿè´£æ‰¿æ‹…ä¸€éƒ¨åˆ†ä¹‹å‰ä¸»çº¿ç¨‹çš„æ¸²æŸ“å·¥ä½œï¼Œå‡è½»ä¸»çº¿ç¨‹çš„è´Ÿæ‹…</p>
<h3 data-id="heading-30">è½¯ä»¶ç»˜åˆ¶</h3>
<p>æˆ‘ä»¬ä¸€èˆ¬æåˆ°çš„ç¡¬ä»¶åŠ é€Ÿï¼ŒæŒ‡çš„å°±æ˜¯ GPU åŠ é€Ÿï¼Œè¿™é‡Œå¯ä»¥ç†è§£ä¸ºç”¨ RenderThread è°ƒç”¨ GPU æ¥è¿›è¡Œæ¸²æŸ“åŠ é€Ÿ ã€‚ ç¡¬ä»¶åŠ é€Ÿåœ¨ç›®å‰çš„ Android ä¸­æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œ æ‰€ä»¥å¦‚æœæˆ‘ä»¬ä»€ä¹ˆéƒ½ä¸è®¾ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„è¿›ç¨‹é»˜è®¤éƒ½ä¼šæœ‰ä¸»çº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹(æœ‰å¯è§çš„å†…å®¹)ã€‚æˆ‘ä»¬å¦‚æœåœ¨ App çš„ AndroidManifest é‡Œé¢ï¼Œåœ¨ Application æ ‡ç­¾é‡Œé¢åŠ ä¸€ä¸ª</p>
<pre><code class="hljs language-ini" lang="ini">android:<span class="hljs-attr">hardwareAccelerated</span>=<span class="hljs-string">"false"</span>
</code></pre>
<p>æˆ‘ä»¬å°±å¯ä»¥å…³é—­ç¡¬ä»¶åŠ é€Ÿï¼Œç³»ç»Ÿæ£€æµ‹åˆ°ä½ è¿™ä¸ª App å…³é—­äº†ç¡¬ä»¶åŠ é€Ÿï¼Œå°±ä¸ä¼šåˆå§‹åŒ– RenderThread ï¼Œç›´æ¥ cpu è°ƒç”¨ libSkia æ¥è¿›è¡Œæ¸²æŸ“ã€‚å…¶ Trace è·Ÿè¸ªè¡¨ç°å¦‚ä¸‹ <strong>ï¼ˆèµ„æºæ¯”è¾ƒè€ï¼Œç”¨ Systrace å›¾ç¤º)</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79ac3fe0510648b48b02425fae0f34df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904095&amp;x-signature=mQ27P4fJgpbkEjBpf9b4NwhEp50%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸è¿™ç¯‡æ–‡ç« å¼€å¤´å¼€å¯ç¡¬ä»¶åŠ é€Ÿçš„ Perfetto å›¾å¯¹æ¯”ï¼Œå¯ä»¥çœ‹åˆ°ä¸»çº¿ç¨‹ç”±äºè¦è¿›è¡Œæ¸²æŸ“å·¥ä½œï¼Œæ‰€ä»¥æ‰§è¡Œçš„æ—¶é—´å˜é•¿äº†ï¼Œä¹Ÿæ›´å®¹æ˜“å‡ºç°å¡é¡¿ï¼ŒåŒæ—¶å¸§ä¸å¸§ä¹‹é—´çš„ç©ºé—²é—´éš”ä¹Ÿå˜çŸ­äº†ï¼Œä½¿å¾—å…¶ä»– Message çš„æ‰§è¡Œæ—¶é—´è¢«å‹ç¼©ã€‚åœ¨ Perfetto ä¸­ï¼Œè¿™ç§å·®å¼‚é€šè¿‡çº¿ç¨‹æ´»åŠ¨çš„æ—¶é—´é•¿åº¦å’Œå¯†é›†ç¨‹åº¦å¯ä»¥æ¸…æ™°åœ°è§‚å¯Ÿåˆ°ã€‚</p>
<h3 data-id="heading-31">ç¡¬ä»¶åŠ é€Ÿç»˜åˆ¶</h3>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œç¡¬ä»¶åŠ é€Ÿæ˜¯å¼€å¯çš„ï¼Œä¸»çº¿ç¨‹çš„ draw å‡½æ•°å¹¶æ²¡æœ‰çœŸæ­£çš„æ‰§è¡Œ drawCall ï¼Œè€Œæ˜¯æŠŠè¦ draw çš„å†…å®¹è®°å½•åˆ° DisplayList é‡Œé¢ï¼Œé€šè¿‡ syncAndDrawFrame å°† DisplayList åŒæ­¥åˆ° RenderThread ä¸­ï¼Œä¸€æ—¦åŒæ­¥å®Œæˆï¼Œä¸»çº¿ç¨‹å°±å¯ä»¥è¢«é‡Šæ”¾å‡ºæ¥åšå…¶ä»–çš„äº‹æƒ…ï¼ŒRenderThread åˆ™ç»§ç»­è¿›è¡Œæ¸²æŸ“å·¥ä½œã€‚</p>
<h3 data-id="heading-32">æ¸²æŸ“çº¿ç¨‹åˆå§‹åŒ–</h3>
<p>æ¸²æŸ“çº¿ç¨‹åˆå§‹åŒ–åœ¨çœŸæ­£éœ€è¦ draw å†…å®¹çš„æ—¶å€™ï¼Œä¸€èˆ¬æˆ‘ä»¬å¯åŠ¨ä¸€ä¸ª Activity ï¼Œåœ¨ç¬¬ä¸€ä¸ª draw æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šå»æ£€æµ‹æ¸²æŸ“çº¿ç¨‹æ˜¯å¦åˆå§‹åŒ–ï¼Œå¦‚æœæ²¡æœ‰åˆ™å»è¿›è¡Œåˆå§‹åŒ–</p>
<p>android/view/ViewRootImpl.java</p>
<pre><code class="hljs language-ini" lang="ini">// æ¸²æŸ“çº¿ç¨‹åˆå§‹åŒ–
mAttachInfo.mThreadedRenderer.initializeIfNeeded(
        mWidth, mHeight, mAttachInfo, mSurface, surfaceInsets)<span class="hljs-comment">;</span>

// åˆå§‹åŒ– BlastBufferQueue - App ç«¯ç¼“å†²åŒºç®¡ç†å™¨
if (<span class="hljs-attr">mBlastBufferQueue</span> == null) {
    <span class="hljs-attr">mBlastBufferQueue</span> = new BLASTBufferQueue(mTag, mSurfaceControl,
        mSurfaceSize.x, mSurfaceSize.y,
        mWindowAttributes.format)<span class="hljs-comment">;</span>
    mBlastBufferQueue.update(mSurfaceControl, 
        mSurfaceSize.x, mSurfaceSize.y, mWindowAttributes.format)<span class="hljs-comment">;</span>
}
</code></pre>
<p>è¿™é‡Œåˆ›å»ºçš„ BlastBufferQueue å°†åœ¨åç»­çš„æ¸²æŸ“è¿‡ç¨‹ä¸­å‘æŒ¥å…³é”®ä½œç”¨ï¼š</p>
<ul>
<li>ä¸º RenderThread æä¾›é«˜æ•ˆçš„ Buffer ç®¡ç†</li>
<li>æ”¯æŒæ‰¹é‡ Transaction æäº¤ï¼Œå‡å°‘ä¸ SurfaceFlinger çš„äº¤äº’å¼€é”€</li>
<li>åœ¨ Perfetto ä¸­å¯è§‚å¯Ÿåˆ° QueuedBuffer æŒ‡æ ‡çš„å˜åŒ–</li>
</ul>
<p>åç»­ç›´æ¥è°ƒç”¨ draw</p>
<p>android/graphics/HardwareRenderer.java</p>
<pre><code class="hljs language-scss" lang="scss">mAttachInfo<span class="hljs-selector-class">.mThreadedRenderer</span><span class="hljs-selector-class">.draw</span>(mView, mAttachInfo, this);

void <span class="hljs-built_in">draw</span>(View view, AttachInfo attachInfo, DrawCallbacks callbacks) {
    final Choreographer choreographer = attachInfo<span class="hljs-selector-class">.mViewRootImpl</span><span class="hljs-selector-class">.mChoreographer</span>;
    choreographer<span class="hljs-selector-class">.mFrameInfo</span><span class="hljs-selector-class">.markDrawStart</span>();

    <span class="hljs-comment">// æ›´æ–° RootDisplayListï¼Œæ„å»º RenderNode æ ‘</span>
    <span class="hljs-built_in">updateRootDisplayList</span>(view, callbacks);

    <span class="hljs-comment">// å¤„ç†åŠ¨ç”» RenderNode</span>
    if (attachInfo.mPendingAnimatingRenderNodes != null) {
        final int count = attachInfo<span class="hljs-selector-class">.mPendingAnimatingRenderNodes</span><span class="hljs-selector-class">.size</span>();
        for (int i = <span class="hljs-number">0</span>; i &lt; count; i++) {
            <span class="hljs-built_in">registerAnimatingRenderNode</span>(
                    attachInfo.mPendingAnimatingRenderNodes.get(i));
        }
        attachInfo<span class="hljs-selector-class">.mPendingAnimatingRenderNodes</span><span class="hljs-selector-class">.clear</span>();
        attachInfo<span class="hljs-selector-class">.mPendingAnimatingRenderNodes</span> = null;
    }

    <span class="hljs-comment">// åŒæ­¥å¹¶ç»˜åˆ¶å¸§ï¼Œè¿™é‡Œä¼šè§¦å‘ RenderThread å·¥ä½œ</span>
    int syncResult = <span class="hljs-built_in">syncAndDrawFrame</span>(choreographer.mFrameInfo);
    
    <span class="hljs-comment">// å¤„ç†å„ç§ç»“æœçŠ¶æ€</span>
    if ((syncResult &amp; SYNC_LOST_SURFACE_REWARD_IF_FOUND) != <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">setEnabled</span>(false);
        attachInfo<span class="hljs-selector-class">.mViewRootImpl</span><span class="hljs-selector-class">.mSurface</span><span class="hljs-selector-class">.release</span>();
        attachInfo<span class="hljs-selector-class">.mViewRootImpl</span><span class="hljs-selector-class">.invalidate</span>();
    }
    if ((syncResult &amp; SYNC_REDRAW_REQUESTED) != <span class="hljs-number">0</span>) {
        attachInfo<span class="hljs-selector-class">.mViewRootImpl</span><span class="hljs-selector-class">.invalidate</span>();
    }
}
</code></pre>
<p>ä¸Šé¢çš„ draw åªæ˜¯æ›´æ–° DisplayList ï¼Œæ›´æ–°ç»“æŸåï¼Œè°ƒç”¨ syncAndDrawFrame ï¼Œé€šçŸ¥æ¸²æŸ“çº¿ç¨‹å¼€å§‹å·¥ä½œï¼Œä¸»çº¿ç¨‹é‡Šæ”¾ã€‚åœ¨ syncAndDrawFrame ä¸­å®Œæˆäº†å…³é”®çš„ <strong>UI Thread åˆ° RenderThread çš„æ•°æ®åŒæ­¥è¿‡ç¨‹</strong>ã€‚</p>
<h4 data-id="heading-33">UI Thread ä¸ RenderThread çš„ DisplayList åŒæ­¥æœºåˆ¶</h4>
<p>åœ¨ <code>syncAndDrawFrame</code> è¿™ä¸ªå…³é”®å‡½æ•°ä¸­ï¼Œå‘ç”Ÿäº†ä»¥ä¸‹é‡è¦çš„åŒæ­¥æ“ä½œï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// frameworks/base/libs/hwui/renderthread/RenderProxy.cpp</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">RenderProxy::syncAndDrawFrame</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// 1. å°† UI Thread çš„ DisplayList åŒæ­¥åˆ° RenderThread</span>
    <span class="hljs-comment">// è¿™é‡Œä¼šæŠŠä¸»çº¿ç¨‹æ„å»ºçš„ RenderNode æ ‘ä¼ é€’ç»™æ¸²æŸ“çº¿ç¨‹</span>
    <span class="hljs-keyword">return</span> mDrawFrameTask.<span class="hljs-built_in">drawFrame</span>();
}
</code></pre>
<p><code>syncAndDrawFrame</code> çš„è°ƒç”¨å¹¶éä¸€ä¸ªé˜»å¡çš„åŒæ­¥è¿‡ç¨‹ï¼Œè€Œæ˜¯ UI çº¿ç¨‹åˆ›å»ºå¹¶æ´¾å‘ä¸€ä¸ª <code>DrawFrameTask</code> åˆ° RenderThread çš„ä»»åŠ¡é˜Ÿåˆ—ã€‚è¿™ä¸ª Task å°è£…äº†æ¸²æŸ“è¿™ä¸€å¸§æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ï¼ˆä¸»è¦æ˜¯ RenderNode æ ‘ï¼‰ã€‚æ´¾å‘åï¼ŒUI çº¿ç¨‹å°±å¯ä»¥ä»æ¸²æŸ“å·¥ä½œä¸­è§£è„±å‡ºæ¥ï¼Œå¤„ç†å…¶ä»–äº‹åŠ¡ã€‚RenderThread åœ¨è‡ªå·±çš„ Looper ä¸­å–å‡ºè¿™ä¸ª Task å¹¶æ‰§è¡Œï¼Œä»è€Œå®ç°äº†ä¸¤ä¸ªçº¿ç¨‹çš„å¹¶è¡Œå·¥ä½œã€‚</p>
<p>å…·ä½“çš„åŒæ­¥è¿‡ç¨‹åŒ…æ‹¬ï¼š</p>
<ol start="0">
<li><strong>RenderNode æ ‘çš„ä¼ é€’</strong>ï¼šä¸»çº¿ç¨‹åœ¨ draw è¿‡ç¨‹ä¸­æ„å»ºçš„ RenderNode æ ‘ï¼ˆåŒ…å« DisplayListï¼‰ä¼šè¢«ä¼ é€’ç»™ RenderThread</li>
<li><strong>å±æ€§åŒæ­¥</strong>ï¼šView çš„å˜æ¢çŸ©é˜µã€é€æ˜åº¦ã€è£å‰ªåŒºåŸŸç­‰å±æ€§ä¼šä¸€å¹¶åŒæ­¥</li>
<li><strong>èµ„æºå…±äº«</strong>ï¼šçº¹ç†ã€Pathã€Paint ç­‰ç»˜åˆ¶èµ„æºåœ¨ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´å»ºç«‹å…±äº«æœºåˆ¶</li>
<li><strong>æ¸²æŸ“çŠ¶æ€ä¼ é€’</strong>ï¼šå½“å‰å¸§éœ€è¦çš„æ¸²æŸ“çŠ¶æ€ä¿¡æ¯ä¼ é€’ç»™ RenderThread</li>
</ol>
<p>è¿™ä¸ªåŒæ­¥è¿‡ç¨‹æ˜¯ Android ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“çš„æ ¸å¿ƒï¼Œå®ƒå®ç°äº† UI Thread ä¸“æ³¨äºé€»è¾‘å¤„ç†ï¼ŒRenderThread ä¸“æ³¨äºæ¸²æŸ“çš„åˆ†å·¥æ¨¡å¼ã€‚</p>
<p>æ¸²æŸ“çº¿ç¨‹çš„æ ¸å¿ƒå®ç°åœ¨ libhwui åº“é‡Œé¢ï¼Œå…¶ä»£ç ä½äº frameworks/base/libs/hwui</p>
<h4 data-id="heading-34">RenderThread ä¸ BlastBufferQueue çš„äº¤äº’æµç¨‹</h4>
<p>RenderThread æ¥æ”¶åˆ°åŒæ­¥çš„ DisplayList åï¼Œå¼€å§‹çœŸæ­£çš„æ¸²æŸ“å·¥ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šä¸ BlastBufferQueue è¿›è¡Œå¯†åˆ‡çš„äº¤äº’ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// frameworks/base/libs/hwui/renderthread/CanvasContext.cpp</span>
<span class="hljs-comment">// Android 16 æœ€æ–°çš„ RenderThread æ¸²æŸ“æµç¨‹</span>
void CanvasContext::<span class="hljs-built_in">draw</span>() {
    SkRect dirty;
    mDamageAccumulator<span class="hljs-selector-class">.finish</span>(&amp;dirty);
    
    <span class="hljs-comment">// 1. ä» BlastBufferQueue è·å–å¯ç”¨çš„ Buffer</span>
    ANativeWindowBuffer* buffer;
    int fenceFd;
    status_t result = mNativeSurface-&gt;<span class="hljs-built_in">dequeueBuffer</span>(&amp;buffer, &amp;fenceFd);
    if (result != OK) {
        <span class="hljs-built_in">ALOGW</span>("Failed to dequeue buffer: %s (%d)", <span class="hljs-built_in">strerror</span>(-result), result);
        return;
    }
    
    <span class="hljs-comment">// 2. è®¾ç½®æ¸²æŸ“ç›®æ ‡å¹¶ç»‘å®š Buffer</span>
    mRenderPipeline-&gt;<span class="hljs-built_in">onDequeueBuffer</span>(buffer);
    
    <span class="hljs-comment">// 3. æ‰§è¡Œ GPU æ¸²æŸ“å‘½ä»¤ï¼ŒåŒ…æ‹¬æ‰€æœ‰ RenderNode çš„ç»˜åˆ¶</span>
    bool drew = mRenderPipeline-&gt;<span class="hljs-built_in">draw</span>(frame, windowDirty, dirty, mLightGeometry,
                         &amp;mLayerUpdateQueue, mContentDrawBounds, mOpaque,
                         mLightInfo, mRenderNodes, &amp;(profiler()));
    
    <span class="hljs-comment">// 4. å®Œæˆæ¸²æŸ“åï¼Œæäº¤ Bufferï¼ˆå¯èƒ½ unsignaledï¼‰</span>
    if (drew) {
        <span class="hljs-comment">// GPU å¼‚æ­¥æ¸²æŸ“ï¼Œè·å– presentFenceï¼ˆå¯èƒ½æœª signalï¼‰</span>
        int presentFence = mRenderPipeline-&gt;<span class="hljs-built_in">flush</span>();
        
        <span class="hljs-comment">// 5. ç›´æ¥æäº¤ Buffer åˆ°é˜Ÿåˆ—ï¼ˆæ— éœ€ç­‰å¾… GPU å®Œæˆï¼‰ï¼Œå¹¶å°† presentFence ä¼ é€’ç»™æ¶ˆè´¹è€…</span>
        <span class="hljs-comment">// presentFence æ˜¯ä¸€ä¸ªåŒæ­¥é”ï¼Œç”± GPU åœ¨å®Œæˆæ¸²æŸ“æ—¶è§£å¼€ã€‚æ ¹æ®ç³»ç»Ÿé…ç½®ï¼ˆlatch_unsignaledï¼‰ï¼ŒSurfaceFlinger å¯èƒ½ä¼šç­‰å¾…è¿™ä¸ª fenceï¼Œä¹Ÿå¯èƒ½åœ¨ fence æœª signaled æ—¶å°±æå‰å¼€å§‹åˆæˆå·¥ä½œã€‚</span>
        result = mNativeSurface-&gt;<span class="hljs-built_in">queueBuffer</span>(buffer, presentFence);
        
        <span class="hljs-comment">// 6. è§¦å‘ transactionï¼Œæ‰¹é‡æäº¤åˆ° SurfaceFlinger</span>
        <span class="hljs-comment">// SurfaceFlinger å°†æ ¹æ® latch_unsignaled ç­–ç•¥å†³å®šæ˜¯å¦æ¥å—</span>
        if (mBlastBufferQueue != nullptr) {
            mBlastBufferQueue-&gt;<span class="hljs-built_in">flushTransaction</span>();
        }
    } else {
        <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ç»˜åˆ¶å†…å®¹ï¼Œç›´æ¥å–æ¶ˆ Buffer</span>
        mNativeSurface-&gt;<span class="hljs-built_in">cancelBuffer</span>(buffer, fenceFd);
    }
}
</code></pre>
<p><strong>BlastBufferQueue çš„å…³é”®ç‰¹æ€§ï¼š</strong></p>
<ol start="0">
<li><strong>App ç«¯ç®¡ç†</strong>ï¼šä¸åŒäºä¼ ç»Ÿçš„ BufferQueue ç”± SurfaceFlinger åˆ›å»ºï¼ŒBlastBufferQueue æ˜¯ç”± App ç«¯åˆ›å»ºå’Œç®¡ç†</li>
<li><strong>å‡å°‘åŒæ­¥ç­‰å¾…</strong>ï¼šé€šè¿‡ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼Œå‡å°‘äº† RenderThread åœ¨ dequeueBuffer æ—¶çš„ç­‰å¾…æ—¶é—´</li>
<li><strong>é«˜æ•ˆçš„ç¼“å†²åŒºè½®è½¬</strong>ï¼šæ”¯æŒæ›´æ™ºèƒ½çš„ç¼“å†²åŒºç®¡ç†ç­–ç•¥ï¼Œç‰¹åˆ«é€‚é…é«˜åˆ·æ–°ç‡æ˜¾ç¤ºå™¨</li>
<li><strong>å¼‚æ­¥æäº¤</strong>ï¼šé€šè¿‡ transaction æœºåˆ¶å¼‚æ­¥åœ°å°†å®Œæˆçš„å¸§æäº¤ç»™ SurfaceFlinger</li>
<li><strong>æ”¯æŒ unsignaled buffer</strong>ï¼šé…åˆ SurfaceFlinger çš„ <code>latch_unsignaled</code> ç­–ç•¥ï¼Œå…è®¸æäº¤ GPU å°šæœªå®Œæˆçš„ Bufferï¼Œè¿›ä¸€æ­¥å‡å°‘æ¸²æŸ“å»¶è¿Ÿ</li>
</ol>
<p><strong>å…³äº Latching Unsignaled Buffers çš„æ·±å…¥æ¢è®¨</strong></p>
<p>ç°ä»£ Android ç³»ç»Ÿå¯¹ <code>presentFence</code> çš„å¤„ç†æœ‰ç²¾ç»†çš„æ§åˆ¶ï¼Œå¹¶éæ€»æ˜¯ç­‰å¾…ã€‚è¿™ä¸ªæœºåˆ¶è¢«ç§°ä¸º <strong>"Latching Unsignaled Buffers"</strong> ï¼ˆæ•è·æœªå°±ç»ªçš„ç¼“å†²åŒºï¼‰ã€‚</p>
<ul>
<li><strong>ä¼ ç»Ÿæ¨¡å¼</strong>: SurfaceFlinger å¿…é¡»ç­‰å¾… App çš„ <code>presentFence</code> è¢« GPU signal åï¼Œæ‰èƒ½ "latch" (æ•è·) è¿™ä¸ª Buffer è¿›è¡Œåˆæˆã€‚è¿™ä¿è¯äº†å®‰å…¨æ€§ï¼Œä½†å¢åŠ äº†å»¶è¿Ÿã€‚</li>
<li><strong>Latch Unsignaled æ¨¡å¼</strong>: åœ¨æ­¤æ¨¡å¼ä¸‹ï¼ŒSurfaceFlinger å¯ä»¥ç«‹å³ latch ä¸€ä¸ª GPU å°šæœªå®Œæˆæ¸²æŸ“çš„ Bufferï¼ˆå³ fence æœª signaledï¼‰ï¼Œå¹¶æå‰å¼€å§‹éƒ¨åˆ†åˆæˆå·¥ä½œã€‚å½“å®ƒéœ€è¦çœŸæ­£ä½¿ç”¨è¿™ä¸ª Buffer çš„å†…å®¹æ—¶ï¼Œå®ƒæ‰ä¼šåœ¨å†…éƒ¨ç­‰å¾… <code>presentFence</code>ã€‚è¿™é€šè¿‡æµæ°´çº¿åŒ–è¿›ä¸€æ­¥éšè—äº† GPU æ¸²æŸ“çš„å»¶è¿Ÿï¼Œå¯¹é™ä½æ¸¸æˆã€è§†é¢‘ç­‰å…¨å±åº”ç”¨çš„è¾“å…¥å»¶è¿Ÿè‡³å…³é‡è¦ã€‚</li>
</ul>
<p><strong>æ§åˆ¶å¼€å…³ä¸ç­–ç•¥ (Android 13+)</strong> :</p>
<p>è¿™ä¸ªè¡Œä¸ºå¯ä»¥é€šè¿‡ç³»ç»Ÿå±æ€§ <code>debug.sf.latch_unsignaled</code> è¿›è¡Œå…¨å±€è°ƒè¯•ï¼Œä½†æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒç”±ä¸€ä¸ªåä¸º <code>LatchUnsignaledConfig</code> çš„åˆ†å±‚ç­–ç•¥æ§åˆ¶ã€‚ä¸€ä¸ªå…¸å‹çš„ç­–ç•¥æ˜¯ <code>AutoSingleLayer</code>ï¼š</p>
<ul>
<li>å½“å±å¹•ä¸Šåªæœ‰<strong>å•ä¸ªå›¾å±‚</strong>æ›´æ–°æ—¶ï¼ˆå¦‚å…¨å±æ¸¸æˆæˆ–è§†é¢‘ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¯ç”¨ Latch Unsignaled æ¨¡å¼ï¼Œå› ä¸ºæ­¤æ—¶æ²¡æœ‰å¤æ‚çš„å›¾å±‚ä¾èµ–ï¼Œé£é™©æœ€ä½ï¼Œæ”¶ç›Šæœ€å¤§ã€‚</li>
<li>å½“æœ‰å¤šä¸ªå›¾å±‚æ›´æ–°æ—¶ï¼Œç³»ç»Ÿä¼šå›é€€åˆ°æ›´å®‰å…¨çš„ä¼ ç»Ÿç­‰å¾…æ¨¡å¼ï¼Œä»¥é¿å…æ½œåœ¨çš„è§†è§‰é”™è¯¯ã€‚</li>
</ul>
<p>å› æ­¤ï¼ŒSurfaceFlinger å¹¶éæ€»æ˜¯ç›²ç›®ç­‰å¾… <code>presentFence</code>ï¼Œè€Œæ˜¯æ ¹æ®ç²¾å¯†çš„ç­–ç•¥æ¥å†³å®šæ˜¯å¦â€œæŠ¢è·‘â€ï¼Œä»¥åœ¨ç¨³å®šæ€§å’Œæè‡´æ€§èƒ½ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p>
<h3 data-id="heading-35">ä¸»çº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹çš„åˆ†å·¥</h3>
<p>ä¸»çº¿ç¨‹è´Ÿè´£å¤„ç†è¿›ç¨‹ Messageã€å¤„ç† Input äº‹ä»¶ã€å¤„ç† Animation é€»è¾‘ã€å¤„ç† Measureã€Layoutã€Draw ï¼Œæ›´æ–° DisplayList ï¼Œä½†æ˜¯ä¸æ¶‰åŠä¸ SurfaceFlinger ç›´æ¥æ‰“äº¤é“ï¼›æ¸²æŸ“çº¿ç¨‹è´Ÿè´£æ¸²æŸ“ç›¸å…³çš„å·¥ä½œï¼ŒåŒ…æ‹¬ä¸ BlastBufferQueue çš„äº¤äº’ã€GPU æ¸²æŸ“å‘½ä»¤çš„æ‰§è¡Œï¼Œä»¥åŠä¸ SurfaceFlinger çš„æœ€ç»ˆäº¤äº’ã€‚</p>
<p>å½“å¯åŠ¨ç¡¬ä»¶åŠ é€Ÿåï¼Œåœ¨ Measureã€Layoutã€Draw çš„ Draw è¿™ä¸ªç¯èŠ‚ï¼ŒAndroid ä½¿ç”¨ DisplayList è¿›è¡Œç»˜åˆ¶è€Œéç›´æ¥ä½¿ç”¨ CPU ç»˜åˆ¶æ¯ä¸€å¸§ã€‚DisplayList æ˜¯ä¸€ç³»åˆ—ç»˜åˆ¶æ“ä½œçš„è®°å½•ï¼ŒæŠ½è±¡ä¸º RenderNode ç±»ï¼Œè¿™æ ·é—´æ¥çš„è¿›è¡Œç»˜åˆ¶æ“ä½œçš„ä¼˜ç‚¹å¦‚ä¸‹</p>
<ol start="0">
<li>DisplayList å¯ä»¥æŒ‰éœ€å¤šæ¬¡ç»˜åˆ¶è€Œæ— é¡»åŒä¸šåŠ¡é€»è¾‘äº¤äº’</li>
<li>ç‰¹å®šçš„ç»˜åˆ¶æ“ä½œï¼ˆå¦‚ translationã€scale ç­‰ï¼‰å¯ä»¥ä½œç”¨äºæ•´ä¸ª DisplayList è€Œæ— é¡»é‡æ–°åˆ†å‘ç»˜åˆ¶æ“ä½œ</li>
<li>å½“çŸ¥æ™“äº†æ‰€æœ‰ç»˜åˆ¶æ“ä½œåï¼Œå¯ä»¥é’ˆå¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼šä¾‹å¦‚ï¼Œæ‰€æœ‰çš„æ–‡æœ¬å¯ä»¥ä¸€èµ·è¿›è¡Œç»˜åˆ¶ä¸€æ¬¡</li>
<li>å¯ä»¥å°†å¯¹ DisplayList çš„å¤„ç†è½¬ç§»è‡³å¦ä¸€ä¸ªçº¿ç¨‹ï¼ˆä¹Ÿå°±æ˜¯ RenderThreadï¼‰</li>
<li>ä¸»çº¿ç¨‹åœ¨ sync ç»“æŸåå¯ä»¥å¤„ç†å…¶ä»–çš„ Messageï¼Œè€Œä¸ç”¨ç­‰å¾… RenderThread ç»“æŸ</li>
<li>é€šè¿‡ BlastBufferQueue å®ç°æ›´é«˜æ•ˆçš„ç¼“å†²åŒºç®¡ç†ï¼Œå‡å°‘æ¸²æŸ“å»¶è¿Ÿå’Œä¸»çº¿ç¨‹é˜»å¡</li>
</ol>
<h4 data-id="heading-36">BlastBufferQueue çš„å·¥ä½œåŸç†</h4>
<p>BlastBufferQueue æ˜¯ç°ä»£ Android æ¸²æŸ“æ¶æ„ä¸­çš„å…³é”®ç»„ä»¶ï¼Œå®ƒæ”¹å˜äº†ä¼ ç»Ÿçš„ç¼“å†²åŒºç®¡ç†æ–¹å¼ï¼š</p>
<p><strong>ä¼ ç»Ÿ BufferQueue vs BlastBufferQueueï¼š</strong></p>
<ol start="0">
<li>
<p><strong>åˆ›å»ºä¸»ä½“ä¸åŒ</strong>ï¼š</p>
<ul>
<li>ä¼ ç»Ÿ BufferQueueï¼šç”± SurfaceFlinger åˆ›å»ºå’Œç®¡ç†</li>
<li>BlastBufferQueueï¼šç”± App ç«¯ï¼ˆViewRootImplï¼‰åˆ›å»ºå’Œç®¡ç†</li>
</ul>
</li>
<li>
<p><strong>ç¼“å†²åŒºè·å–æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>ä¼ ç»Ÿæ–¹å¼ï¼šRenderThread éœ€è¦é€šè¿‡ Binder è°ƒç”¨å‘ SurfaceFlinger è¯·æ±‚ Bufferï¼Œå¯èƒ½ä¼šå› ä¸ºæ²¡æœ‰å¯ç”¨ Buffer è€Œé˜»å¡</li>
<li>BlastBufferQueueï¼šApp ç«¯é¢„å…ˆç®¡ç†ç¼“å†²åŒºæ± ï¼ŒRenderThread å¯ä»¥æ›´é«˜æ•ˆåœ°è·å– Buffer</li>
</ul>
</li>
<li>
<p><strong>æäº¤æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>ä¼ ç»Ÿæ–¹å¼ï¼šé€šè¿‡ queueBuffer ç›´æ¥æäº¤ç»™ SurfaceFlinger</li>
<li>BlastBufferQueueï¼šé€šè¿‡ transaction æœºåˆ¶æ‰¹é‡æäº¤ï¼Œå‡å°‘ Binder è°ƒç”¨å¼€é”€</li>
</ul>
</li>
</ol>
<p><strong>åœ¨ Perfetto ä¸­è§‚å¯Ÿ BlastBufferQueueï¼š</strong></p>
<p>åœ¨ Perfetto è·Ÿè¸ªä¸­ï¼ŒBlastBufferQueue çš„çŠ¶æ€é€šè¿‡ä»¥ä¸‹å…³é”®æŒ‡æ ‡æ˜¾ç¤ºï¼š</p>
<h4 data-id="heading-37">App ç«¯çš„ QueuedBuffer æŒ‡æ ‡</h4>
<ul>
<li><strong>Perfetto æ˜¾ç¤º</strong>ï¼š<code>QueuedBuffer</code> æ•°å€¼è½¨é“</li>
<li><strong>è®¡ç®—è§„åˆ™</strong>ï¼šApp ç”Ÿäº§çš„ Buffer æ€»æ•° = QueuedBuffer - 1</li>
<li><strong>åŸºå‡†å€¼è¯´æ˜</strong>ï¼šQueuedBuffer çš„æœ€å°å€¼ä¸º 1ï¼Œ0 è¡¨ç¤ºæ²¡æœ‰ Buffer åœ¨é˜Ÿåˆ—ä¸­</li>
<li><strong>æ•°å€¼å«ä¹‰</strong>ï¼šQueuedBuffer ä¸º 2 è¡¨ç¤ºæœ‰ 1 ä¸ª Buffer åœ¨é˜Ÿåˆ—ä¸­ï¼ŒQueuedBuffer ä¸º 3 è¡¨ç¤ºæœ‰ 2 ä¸ª Buffer åœ¨é˜Ÿåˆ—ä¸­ï¼Œä»¥æ­¤ç±»æ¨</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c0455af8d1c48b1b95601da9e84ca19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904095&amp;x-signature=rRnefu3q1T7%2BcpxdgpExPgFGYHo%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-38">QueuedBuffer æ•°å€¼å˜åŒ–æ—¶æœº</h4>
<p><strong>QueuedBuffer +1 çš„æ—¶æœº</strong>ï¼š</p>
<ul>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šRenderThread æ‰§è¡Œ <code>queueBuffer</code> æ“ä½œ</li>
<li><strong>Perfetto è¡¨ç°</strong>ï¼š<code>queueBuffer</code> äº‹ä»¶æ‰§è¡Œæ—¶ï¼ŒQueuedBuffer è®¡æ•°å¢åŠ </li>
<li><strong>å«ä¹‰</strong>ï¼šRenderThread å°†æ¸²æŸ“å®Œæˆçš„ Buffer æäº¤åˆ° App ç«¯çš„ BlastBufferQueue ä¸­ç­‰å¾…å‘é€ç»™ SurfaceFlinger</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/280ac05948af4759bf997e5dd90dbd19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904095&amp;x-signature=AHf2H11ApXtkPs5Wo58xRdq1syA%3D" alt="image.png" loading="lazy"/></p>
<p><strong>QueuedBuffer -1 çš„æ—¶æœº</strong>ï¼š</p>
<ul>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šæ”¶åˆ° SurfaceFlinger çš„ <code>releaseBufferCallback</code></li>
<li><strong>Perfetto è¡¨ç°</strong>ï¼šå¯è§‚å¯Ÿåˆ° <code>releaseBuffer</code> ç›¸å…³äº‹ä»¶</li>
<li><strong>å«ä¹‰</strong>ï¼šSurfaceFlinger å·²ä½¿ç”¨å®ŒæŸä¸ª Bufferï¼Œå°†å…¶é‡Šæ”¾å› App ç«¯ BlastBufferQueueï¼Œè¯¥ Buffer å¯é‡æ–°ç”¨äºæ¸²æŸ“</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/269ba73379134ba598753dc9cc91e089~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904095&amp;x-signature=UGYEqIk4c0lASnkH3PTwhNUEzRc%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-39">SurfaceFlinger ç«¯çš„ BufferTX æŒ‡æ ‡</h4>
<ul>
<li><strong>Perfetto æ˜¾ç¤º</strong>ï¼šSurfaceFlinger è¿›ç¨‹ä¸­çš„ <code>BufferTX</code> æ•°å€¼è½¨é“</li>
<li><strong>å˜åŒ–æ—¶æœº</strong>ï¼šSurfaceFlinger æ¥æ”¶åˆ° Transaction å BufferTX +1</li>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šApp ç«¯é€šè¿‡ <code>flushTransaction</code> å°† Buffer çœŸæ­£å‘é€ç»™ SurfaceFlinger</li>
<li><strong>æœ€å¤§å€¼é™åˆ¶</strong>ï¼šBufferTX æœ€é«˜ä¸º 3</li>
<li><strong>åŸå› è¯´æ˜</strong>ï¼šè¿™ä¸ªæœ€å¤§å€¼ä¸º 3 çš„é™åˆ¶ï¼Œå®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„<strong>ä¸‰ç¼“å†²ï¼ˆTriple Bufferingï¼‰</strong> æœºåˆ¶åœ¨åˆæˆä¾§çš„ä½“ç°ï¼šä¸€ä¸ªæ­£åœ¨è¢«æ˜¾ç¤ºå™¨è¯»å–ï¼ˆFront Bufferï¼‰ï¼Œä¸€ä¸ªå‡†å¤‡åœ¨ä¸‹ä¸€ä¸ª Vsync å‘¨æœŸè¢«åˆæˆï¼ˆBack Bufferï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ªä½œä¸ºå¤‡ç”¨ï¼ˆThird Bufferï¼‰ã€‚è¿™ç¡®ä¿äº†å³ä½¿åœ¨è½»å¾®çš„æ¸²æŸ“æŠ–åŠ¨ä¸‹ï¼ŒSurfaceFlinger ä¾ç„¶æœ‰å¸§å¯åˆæˆï¼Œä»è€Œæå‡æµç•…åº¦ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/430d040b1d644fe38d8b120e5c65a3dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904095&amp;x-signature=UmaiHMrkz%2Ftxi5iWGAv5LFB%2FuyE%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-40">App ç«¯å’Œ SF ç«¯çš„åä½œæµç¨‹</h4>
<ol start="0">
<li><strong>App ç«¯</strong>ï¼šRenderThread <code>queueBuffer</code> â†’ App ç«¯ QueuedBuffer +1ï¼ˆBuffer è¿›å…¥ App ç«¯é˜Ÿåˆ—ï¼‰</li>
<li><strong>App ç«¯</strong>ï¼š<code>flushTransaction</code> â†’ å°†é˜Ÿåˆ—ä¸­çš„ Buffer æ‰¹é‡å‘é€ç»™ SurfaceFlinger</li>
<li><strong>SF ç«¯</strong>ï¼šæ¥æ”¶ Transaction â†’ SF ç«¯ BufferTX +1ï¼ˆBuffer è¿›å…¥ SF ç«¯å¤„ç†ï¼‰</li>
<li><strong>SF ç«¯</strong>ï¼šå¤„ç†å®Œæˆåå‘é€ <code>releaseBufferCallback</code> â†’ App ç«¯ QueuedBuffer -1ï¼ˆBuffer é‡Šæ”¾å› Appï¼‰</li>
</ol>
<h4 data-id="heading-41">å…³é”®æ€§èƒ½è§‚å¯Ÿç‚¹</h4>
<p>åœ¨åˆ†ææ€§èƒ½æ—¶ï¼Œé‡ç‚¹å…³æ³¨ï¼š</p>
<ul>
<li><strong>App ç«¯ QueuedBuffer æ•°å€¼</strong>ï¼šåæ˜ æ¸²æŸ“ç”Ÿäº§é€Ÿåº¦ï¼Œå¦‚æœ App ç”Ÿäº§è¿‡æ…¢ï¼ŒQueuedBuffer ä¸ªæ•°å°±å¯ä»¥ååº”å‡ºæ¥ ï¼ˆalways æ˜¯ 1 ï¼Œè¯´æ˜æ²¡æœ‰ Buffer ç”Ÿäº§å‡ºæ¥ï¼‰ã€‚é‡ç‚¹å…³æ³¨éœ€è¦è¿ç»­å‡ºå¸§çš„åœºæ™¯ï¼ˆæ¯”å¦‚æ»‘åŠ¨è¿‡ç¨‹ï¼‰ï¼ŒQueuedBuffer çš„å€¼ä¸º 1 è¶…è¿‡ 1 ä¸ª Vsync çš„åœ°æ–¹ï¼Œçœ‹å¯¹åº”çš„ App ä¸»çº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹æ˜¯å¦æœ‰æ€§èƒ½é—®é¢˜ã€‚</li>
<li><strong>SurfaceFlinger ç«¯ BufferTX</strong>ï¼šåæ˜ ç³»ç»Ÿåˆæˆå¤„ç†èƒ½åŠ› ï¼Œå¦‚æœ SurfaceFlinger æ¶ˆè´¹ Buffer è¿‡æ…¢ï¼Œä¹Ÿä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚é‡ç‚¹å…³æ³¨éœ€è¦è¿ç»­å‡ºå¸§çš„åœºæ™¯ï¼ˆæ¯”å¦‚æ»‘åŠ¨è¿‡ç¨‹ï¼‰ ï¼Œå¯¹åº”çš„ BufferTX ä¸º 0 çš„æƒ…å†µ æˆ–è€… BufferTX æ²¡æœ‰è¢«æ¶ˆè´¹çš„æƒ…å†µï¼Œå‰ä¸€ç§æƒ…å†µæ˜¯ App çš„é—®é¢˜ï¼Œåä¸€ç§æƒ…å†µæ˜¯ SurfaceFlinger çš„é—®é¢˜ã€‚</li>
</ul>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-performance" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-42">æ€§èƒ½</h2>
<p>å¦‚æœä¸»çº¿ç¨‹éœ€è¦å¤„ç†æ‰€æœ‰ä»»åŠ¡ï¼Œåˆ™æ‰§è¡Œè€—æ—¶è¾ƒé•¿çš„æ“ä½œï¼ˆä¾‹å¦‚ï¼Œç½‘ç»œè®¿é—®æˆ–æ•°æ®åº“æŸ¥è¯¢ï¼‰å°†ä¼šé˜»å¡æ•´ä¸ªç•Œé¢çº¿ç¨‹ã€‚ä¸€æ—¦è¢«é˜»å¡ï¼Œçº¿ç¨‹å°†æ— æ³•åˆ†æ´¾ä»»ä½•äº‹ä»¶ï¼ŒåŒ…æ‹¬ç»˜å›¾äº‹ä»¶ã€‚ä¸»çº¿ç¨‹æ‰§è¡Œè¶…æ—¶é€šå¸¸ä¼šå¸¦æ¥ä¸¤ä¸ªé—®é¢˜</p>
<ol start="0">
<li><strong>å¡é¡¿</strong>ï¼šå¦‚æœä¸»çº¿ç¨‹ + æ¸²æŸ“çº¿ç¨‹æ¯ä¸€å¸§çš„æ‰§è¡Œéƒ½è¶…è¿‡ 8.33ms(120fps çš„æƒ…å†µä¸‹)ï¼Œé‚£ä¹ˆå°±å¯èƒ½ä¼šå‡ºç°æ‰å¸§ï¼ˆè¯´å¯èƒ½æ˜¯å› ä¸ºæœ‰çš„æƒ…å†µä¸‹å…¶å®ä¸ä¼šæ‰å¸§ï¼Œå› ä¸ºæœ‰ app duration ã€buffer å †ç§¯ç­‰æƒ…å†µï¼‰ã€‚</li>
<li><strong>å¡æ­»</strong>ï¼šå¦‚æœç•Œé¢çº¿ç¨‹è¢«é˜»å¡è¶…è¿‡å‡ ç§’é’Ÿæ—¶é—´ï¼ˆæ ¹æ®ç»„ä»¶ä¸åŒ , è¿™é‡Œçš„é˜ˆå€¼ä¹Ÿä¸åŒï¼‰ï¼Œç”¨æˆ·ä¼šçœ‹åˆ° "<a href="https://link.juejin.cn?target=http%3A%2F%2Fdeveloper.android.google.cn%2Fguide%2Fpractices%2Fresponsiveness.html" target="_blank" title="http://developer.android.google.cn/guide/practices/responsiveness.html" ref="nofollow noopener noreferrer">åº”ç”¨æ— å“åº”</a>" (ANR) å¯¹è¯æ¡†(éƒ¨åˆ†å‚å•†å±è”½äº†è¿™ä¸ªå¼¹æ¡†,ä¼šç›´æ¥ Crash åˆ°æ¡Œé¢)</li>
</ol>
<p>å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæƒ…å†µéƒ½æ˜¯ç”¨æˆ·ä¸æ„¿æ„çœ‹åˆ°çš„ï¼Œæ‰€ä»¥å¯¹äº App å¼€å‘è€…æ¥è¯´ï¼Œä¸¤ä¸ªé—®é¢˜æ˜¯å‘ç‰ˆæœ¬ä¹‹å‰å¿…é¡»è¦è§£å†³çš„ï¼ŒANR è¿™ä¸ªç”±äºæœ‰è¯¦ç»†çš„è°ƒç”¨æ ˆï¼Œæ‰€ä»¥ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¥½å®šä½ï¼›ä½†æ˜¯é—´æ­‡æ€§å¡é¡¿è¿™ä¸ªï¼Œå¯èƒ½å°±éœ€è¦ä½¿ç”¨å·¥å…·æ¥è¿›è¡Œåˆ†æäº†ï¼š<strong>Perfetto + Trace View ï¼ˆAndroid Studio å·²ç»é›†æˆï¼‰</strong> ï¼Œæ‰€ä»¥ç†è§£ä¸»çº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹çš„å…³ç³»å’Œä»–ä»¬çš„å·¥ä½œåŸç†æ˜¯éå¸¸é‡è¦çš„ï¼Œè¿™ä¹Ÿæ˜¯æœ¬ç³»åˆ—çš„ä¸€ä¸ªåˆè¡·ã€‚</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-frametimeline" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-43">Perfetto ç‹¬æœ‰çš„ FrameTimeline åŠŸèƒ½</h3>
<p>Perfetto ç›¸æ¯” Systrace çš„ä¸€ä¸ªé‡è¦ä¼˜åŠ¿æ˜¯æä¾›äº† <strong>FrameTimeline</strong> åŠŸèƒ½ï¼Œå¯ä»¥ä¸€çœ¼å°±å¯ä»¥çœ‹åˆ°å¡é¡¿çš„åœ°æ–¹ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong>: FrameTimeline éœ€è¦ Android 12(S) æˆ–æ›´é«˜ç‰ˆæœ¬æ”¯æŒ</p>
</blockquote>
<h4 data-id="heading-44">FrameTimeline çš„æ ¸å¿ƒæ¦‚å¿µ</h4>
<p>æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fdata-sources%2Fframetimeline" target="_blank" title="https://perfetto.dev/docs/data-sources/frametimeline" ref="nofollow noopener noreferrer">Perfetto å®˜æ–¹æ–‡æ¡£</a>ï¼Œå½“å¸§åœ¨å±å¹•ä¸Šçš„å®é™…å‘ˆç°æ—¶é—´ä¸è°ƒåº¦å™¨é¢„æœŸçš„å‘ˆç°æ—¶é—´ä¸åŒ¹é…æ—¶ï¼Œå°±ä¼šäº§ç”Ÿå¡é¡¿ã€‚FrameTimeline ä¸ºæ¯ä¸ªæœ‰å¸§åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„åº”ç”¨æ·»åŠ äº†ä¸¤ä¸ªæ–°çš„è½¨é“ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aba3d60d534a49a29fd498e782b02258~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904095&amp;x-signature=nSCQuqiVa5lZzqEjLL0wu5cYqNw%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-45">1. Expected Timelineï¼ˆé¢„æœŸæ—¶é—´çº¿ï¼‰</h5>
<ul>
<li><strong>ä½œç”¨</strong>: æ˜¾ç¤ºç³»ç»Ÿåˆ†é…ç»™åº”ç”¨çš„æ¸²æŸ“æ—¶é—´çª—å£</li>
<li><strong>å¼€å§‹æ—¶é—´</strong>: Choreographer å›è°ƒè¢«è°ƒåº¦è¿è¡Œçš„æ—¶é—´</li>
<li><strong>å«ä¹‰</strong>: ä¸ºäº†é¿å…ç³»ç»Ÿå¡é¡¿ï¼Œåº”ç”¨éœ€è¦åœ¨è¿™ä¸ªæ—¶é—´èŒƒå›´å†…å®Œæˆå·¥ä½œ</li>
</ul>
<h5 data-id="heading-46">2. Actual Timelineï¼ˆå®é™…æ—¶é—´çº¿ï¼‰</h5>
<ul>
<li><strong>ä½œç”¨</strong>: æ˜¾ç¤ºåº”ç”¨å®Œæˆå¸§çš„å®é™…æ—¶é—´ï¼ˆåŒ…æ‹¬ GPU å·¥ä½œï¼‰</li>
<li><strong>å¼€å§‹æ—¶é—´</strong>: <code>Choreographer#doFrame</code> æˆ– <code>AChoreographer_vsyncCallback</code> å¼€å§‹è¿è¡Œçš„æ—¶é—´</li>
<li><strong>ç»“æŸæ—¶é—´</strong>: <code>max(GPU æ—¶é—´, Post æ—¶é—´)</code>ï¼Œå…¶ä¸­ Post æ—¶é—´æ˜¯å¸§è¢«æäº¤åˆ° SurfaceFlinger çš„æ—¶é—´</li>
</ul>
<p>å½“ä½ ç‚¹å‡» Actual Timeline ä¸Šçš„ä¸€ä¸ª è¿½è¸ªçš„æ—¶å€™ï¼Œä¼šæ˜¾ç¤ºè¿™ä¸€å¸§å…·ä½“çš„è¢«æ¶ˆè´¹çš„æ—¶é—´ï¼ˆå¯ä»¥çœ‹å»¶æ—¶ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19e0cd428f67476eb43ab7e72ecf3d6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904095&amp;x-signature=Q9n%2BCEjJaekUy65O9IbwfBVHduQ%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-47">é¢œè‰²ç¼–ç ç³»ç»Ÿ</h4>
<p>FrameTimeline ä½¿ç”¨ç›´è§‚çš„é¢œè‰²æ¥æ ‡è¯†ä¸åŒçš„å¸§çŠ¶æ€ï¼š</p>



































<table><thead><tr><th>é¢œè‰²</th><th>å«ä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ç»¿è‰²</strong></td><td>æ­£å¸¸å¸§</td><td>æ²¡æœ‰è§‚å¯Ÿåˆ°å¡é¡¿ï¼Œç†æƒ³çŠ¶æ€</td></tr><tr><td><strong>æµ…ç»¿è‰²</strong></td><td>é«˜å»¶è¿ŸçŠ¶æ€</td><td>å¸§ç‡ç¨³å®šä½†å¸§å‘ˆç°å»¶è¿Ÿï¼Œå¯¼è‡´è¾“å…¥å»¶è¿Ÿå¢åŠ </td></tr><tr><td><strong>çº¢è‰²</strong></td><td>å¡é¡¿å¸§</td><td>å½“å‰è¿›ç¨‹å¯¼è‡´çš„å¡é¡¿</td></tr><tr><td><strong>é»„è‰²</strong></td><td>åº”ç”¨æ— è´£ä»»å¡é¡¿</td><td>å¸§å‡ºç°å¡é¡¿ä½†åº”ç”¨ä¸æ˜¯åŸå› ï¼ŒSurfaceFlinger å¯¼è‡´çš„å¡é¡¿</td></tr><tr><td><strong>è“è‰²</strong></td><td>ä¸¢å¸§</td><td>SurfaceFlinger ä¸¢å¼ƒäº†è¯¥å¸§ï¼Œé€‰æ‹©äº†æ›´æ–°çš„å¸§</td></tr></tbody></table>
<p>ç‚¹å‡»ä¸åŒé¢œè‰²çš„ ActualTimeline å¯ä»¥åœ¨ä¿¡æ¯æ çœ‹åˆ°ä¸‹é¢çš„æè¿°ï¼Œå‘Šè¯‰ä½ å¡é¡¿çš„åŸå› ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d2b81891329485c8a49e60f61d636c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904095&amp;x-signature=GX09jcJMRITHcIj76uKHsiudR5A%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-48">å¡é¡¿ç±»å‹åˆ†æ</h4>
<p>FrameTimeline å¯ä»¥è¯†åˆ«å¤šç§å¡é¡¿ç±»å‹ï¼š</p>
<h5 data-id="heading-49">åº”ç”¨ç«¯å¡é¡¿ï¼š</h5>
<ul>
<li><strong>AppDeadlineMissed</strong>: åº”ç”¨è¿è¡Œæ—¶é—´è¶…è¿‡é¢„æœŸ</li>
<li><strong>BufferStuffing</strong>: åº”ç”¨åœ¨å‰ä¸€å¸§å‘ˆç°å‰å°±å‘é€æ–°å¸§ï¼Œå¯¼è‡´ Buffer é˜Ÿåˆ—å †ç§¯</li>
</ul>
<h5 data-id="heading-50">SurfaceFlinger å¡é¡¿ï¼š</h5>
<ul>
<li><strong>SurfaceFlingerCpuDeadlineMissed</strong>: SurfaceFlinger ä¸»çº¿ç¨‹è¶…æ—¶</li>
<li><strong>SurfaceFlingerGpuDeadlineMissed</strong>: GPU åˆæˆæ—¶é—´è¶…æ—¶</li>
<li><strong>DisplayHAL</strong>: HAL å±‚å‘ˆç°å»¶è¿Ÿ</li>
<li><strong>PredictionError</strong>: è°ƒåº¦å™¨é¢„æµ‹åå·®</li>
</ul>
<h4 data-id="heading-51">é…ç½® FrameTimeline</h4>
<p>åœ¨ Perfetto é…ç½®ä¸­å¯ç”¨ FrameTimelineï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">data_sources {
    config {
        name: <span class="hljs-string">"android.surfaceflinger.frametimeline"</span>
    }
}
</code></pre>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-vsync" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-52">Perfetto ä¸­ Vsync ä¿¡å·</h3>
<p>åœ¨ Perfetto ä¸­ï¼Œ<strong>Vsync ä¿¡å·ä½¿ç”¨ Counter ç±»å‹æ¥æ˜¾ç¤º</strong>ï¼Œè¿™ä¸å¾ˆå¤šäººçš„ç›´è§‰è®¤çŸ¥ä¸åŒï¼š</p>
<ul>
<li><strong>0 â†’ 1 çš„å˜åŒ–</strong>ï¼šè¡¨ç¤ºä¸€ä¸ª Vsync ä¿¡å·</li>
<li><strong>1 â†’ 0 çš„å˜åŒ–</strong>ï¼šåŒæ ·è¡¨ç¤ºä¸€ä¸ª Vsync ä¿¡å·</li>
<li><strong>é”™è¯¯ç†è§£</strong>ï¼šå¾ˆå¤šäººè¯¯ä»¥ä¸ºåªæœ‰å˜æˆ 1 æ‰æ˜¯ Vsync ä¿¡å·</li>
</ul>
<h4 data-id="heading-53">æ­£ç¡®çš„ Vsync ä¿¡å·è¯†åˆ«</h4>
<p>ä¸‹å›¾ä¸­ 1 ã€2ã€3ã€4 çš„æ—¶é—´ç‚¹éƒ½æ˜¯ Vsync ä¿¡å·åˆ°è¾¾</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c98c3de2a4324553928efba1f8350321~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904095&amp;x-signature=ZVyB666RXTizzWfUp8MpvUXoNEk%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å…³é”®è¦ç‚¹</strong>ï¼š</p>
<ol start="0">
<li><strong>æ¯æ¬¡æ•°å€¼å˜åŒ–éƒ½æ˜¯ä¸€ä¸ª Vsync</strong>ï¼šæ— è®ºæ˜¯ 0â†’1 è¿˜æ˜¯ 1â†’0</li>
<li><strong>ä¿¡å·é¢‘ç‡</strong>ï¼š120Hz è®¾å¤‡ä¸Šçº¦æ¯ 8.33ms ä¼šæœ‰ä¸€æ¬¡å˜åŒ–ï¼ˆå®é™…å¯èƒ½å› ç³»ç»Ÿè°ƒåº¦ç•¥æœ‰å·®å¼‚ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯è¿ç»­å‡ºå¸§åœºæ™¯ï¼‰</li>
<li><strong>å¤š App åœºæ™¯</strong>ï¼šCounter å¯èƒ½å› ä¸ºå…¶ä»– App çš„ç”³è¯·è€Œä¿æŒæ´»è·ƒçŠ¶æ€</li>
</ol>
<h4 data-id="heading-54">åˆ†ææŠ€å·§</h4>
<p><strong>åˆ¤æ–­ App æ˜¯å¦æ¥æ”¶åˆ° Vsync</strong>ï¼š</p>
<ul>
<li><strong>æ­£ç¡®æ–¹æ³•</strong>ï¼šæŸ¥çœ‹ App è¿›ç¨‹ä¸­æ˜¯å¦æœ‰å¯¹åº”çš„ <code>FrameDisplayEventReceiver.onVsync</code> äº‹ä»¶</li>
<li><strong>é”™è¯¯æ–¹æ³•</strong>ï¼šä»…å‡­ SurfaceFlinger ä¸­çš„ <code>vsync-app</code> counter å˜åŒ–æ¥åˆ¤æ–­</li>
</ul>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-refs" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-55">å‚è€ƒ</h2>
<ol start="0">
<li><a href="https://juejin.im/post/5a9e01c3f265da239d48ce32" target="_blank" title="https://juejin.im/post/5a9e01c3f265da239d48ce32">juejin.im/post/5a9e01â€¦</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.cocoachina.com%2Farticles%2F35302" target="_blank" title="http://www.cocoachina.com/articles/35302" ref="nofollow noopener noreferrer">www.cocoachina.com/articles/35â€¦</a></li>
<li><a href="https://juejin.im/post/5b7767fef265da43803bdc65" target="_blank" title="https://juejin.im/post/5b7767fef265da43803bdc65">juejin.im/post/5b7767â€¦</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fgityuan.com%2F2019%2F06%2F15%2Fflutter_ui_draw%2F" target="_blank" title="http://gityuan.com/2019/06/15/flutter_ui_draw/" ref="nofollow noopener noreferrer">gityuan.com/2019/06/15/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fguide%2Fcomponents%2Fprocesses-and-threads" target="_blank" title="https://developer.android.google.cn/guide/components/processes-and-threads" ref="nofollow noopener noreferrer">developer.android.google.cn/guide/compoâ€¦</a></li>
</ol>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-attachments" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-56">é™„ä»¶</h2>
<p>æœ¬æ–‡æ¶‰åŠåˆ°çš„ Perfetto è·Ÿè¸ªæ–‡ä»¶ä¹Ÿä¸Šä¼ äº†ï¼Œå„ä½ä¸‹è½½åå¯ä»¥åœ¨ Perfetto UI (<a href="https://link.juejin.cn?target=https%3A%2F%2Fui.perfetto.dev%2F" target="_blank" title="https://ui.perfetto.dev/" ref="nofollow noopener noreferrer">ui.perfetto.dev/</a>) ä¸­æ‰“å¼€åˆ†æ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGracker%2FSystraceForBlog%2Ftree%2Fmaster%2FAndroid_Perfetto%2Fdemo_app_aosp_scroll.perfetto-trace" target="_blank" title="https://github.com/Gracker/SystraceForBlog/tree/master/Android_Perfetto/demo_app_aosp_scroll.perfetto-trace" ref="nofollow noopener noreferrer">ç‚¹æ­¤é“¾æ¥ä¸‹è½½æ–‡ç« æ‰€æ¶‰åŠåˆ°çš„ Perfetto è·Ÿè¸ªæ–‡ä»¶</a></p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-about" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-57">å…³äºæˆ‘ &amp;&amp; åšå®¢</h2>
<p>ä¸‹é¢æ˜¯ä¸ªäººçš„ä»‹ç»å’Œç›¸å…³çš„é“¾æ¥ï¼ŒæœŸæœ›ä¸åŒè¡Œçš„å„ä½å¤šå¤šäº¤æµï¼Œä¸‰äººè¡Œï¼Œåˆ™å¿…æœ‰æˆ‘å¸ˆ!</p>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2Fabout%2F" target="_blank" title="https://www.androidperformance.com/about/" ref="nofollow noopener noreferrer">åšä¸»ä¸ªäººä»‹ç»</a> ï¼šé‡Œé¢æœ‰ä¸ªäººçš„å¾®ä¿¡å’Œå¾®ä¿¡ç¾¤é“¾æ¥ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2019%2F12%2F01%2FBlogMap%2F" target="_blank" title="https://www.androidperformance.com/2019/12/01/BlogMap/" ref="nofollow noopener noreferrer">æœ¬åšå®¢å†…å®¹å¯¼èˆª</a> ï¼šä¸ªäººåšå®¢å†…å®¹çš„ä¸€ä¸ªå¯¼èˆªã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2018%2F05%2F07%2FAndroid-performance-optimization-skills-and-tools%2F" target="_blank" title="https://androidperformance.com/2018/05/07/Android-performance-optimization-skills-and-tools/" ref="nofollow noopener noreferrer">ä¸ªäººæ•´ç†å’Œæœé›†çš„ä¼˜ç§€åšå®¢æ–‡ç«  - Android æ€§èƒ½ä¼˜åŒ–å¿…çŸ¥å¿…ä¼š</a> ï¼šæ¬¢è¿å¤§å®¶è‡ªèå’Œæ¨è ï¼ˆå¾®ä¿¡ç§èŠå³å¯ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2023%2F12%2F30%2Fthe-performance%2F" target="_blank" title="https://www.androidperformance.com/2023/12/30/the-performance/" ref="nofollow noopener noreferrer">Androidæ€§èƒ½ä¼˜åŒ–çŸ¥è¯†æ˜Ÿçƒ</a> ï¼š æ¬¢è¿åŠ å…¥ï¼Œå¤šè°¢æ”¯æŒï½</li>
</ol>
<blockquote>
<p><strong>ä¸€ä¸ªäººå¯ä»¥èµ°çš„æ›´å¿« , ä¸€ç¾¤äººå¯ä»¥èµ°çš„æ›´è¿œ</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®ä¿¡æµè§ˆå™¨ç¼“å­˜æœºåˆ¶å¤§æ­ç§˜ï¼šä¸ºä»€ä¹ˆä½ æ€»åˆ·ä¸å‡ºæ–°é¡µé¢ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572539461478858795</link>    <guid>https://juejin.cn/post/7572539461478858795</guid>    <pubDate>2025-11-16T13:31:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572539461478858795" data-draft-id="7571444391810138147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®ä¿¡æµè§ˆå™¨ç¼“å­˜æœºåˆ¶å¤§æ­ç§˜ï¼šä¸ºä»€ä¹ˆä½ æ€»åˆ·ä¸å‡ºæ–°é¡µé¢ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-16T13:31:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€è¯ºæ»šé›ªçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/2824015112318094"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®ä¿¡æµè§ˆå™¨ç¼“å­˜æœºåˆ¶å¤§æ­ç§˜ï¼šä¸ºä»€ä¹ˆä½ æ€»åˆ·ä¸å‡ºæ–°é¡µé¢ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2824015112318094/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€è¯ºæ»šé›ªçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:31:32.000Z" title="Sun Nov 16 2025 13:31:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¼“å­˜ä¹‹è°œï¼šä¸ºä½•ä½ çš„åº”ç”¨æ€»æ˜¯æ— æ³•è‡ªåŠ¨æ›´æ–°ï¼Ÿ</h2>
<p>ä½ æ˜¯å¦ä¹Ÿç»å†è¿‡è¿™æ ·çš„åœºæ™¯ï¼šçº¿ä¸Šåˆšä¿®å¤å®Œbugå¹¶å·²ç»å‘å¸ƒï¼Œå¾—åˆ°çš„åé¦ˆè¿˜æ˜¯å­˜åœ¨é—®é¢˜ã€‚æ‰€å‘å¸ƒçš„åº”ç”¨æ˜¯å†…åµŒåœ¨å°ç¨‹åºä¸­ï¼Œç»å¸¸ä¼šå‡ºç°å‘å¸ƒåæ²¡æœ‰æ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬ã€‚åªèƒ½æ— å¥ˆåœ°å›å¤ï¼šâ€œæ¸…ä¸€ä¸‹æ‰‹æœºç¼“å­˜â€ã€‚å¿ƒé‡Œæƒ³å¦‚ä½•èƒ½åœ¨å‘å¸ƒå®Œæˆåï¼Œç«‹å³è®©ç”¨æˆ·å¾—åˆ°æœ€æ–°çš„ç‰ˆæœ¬ã€‚</p>
<p>å¦‚æœè¿™ä¸ªåœºæ™¯è®©ä½ æ„ŸåŒèº«å—ï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚æä¾›ä¸€ä¸ªä¸€åŠ³æ°¸é€¸çš„ Nginx é…ç½®æ–¹æ¡ˆï¼Œè®©ä½ çš„åº”ç”¨å®æ—¶æ›´æ–°ã€‚</p>
<h2 data-id="heading-1">1. ç¼“å­˜ç­–ç•¥</h2>
<p>æˆ‘ä»¬å¿…é¡»ç†è§£æµè§ˆå™¨ç¼“å­˜ç­–ç•¥çš„ä¼˜å…ˆçº§ã€‚æœåŠ¡å™¨ï¼ˆå¦‚ Nginxï¼‰åœ¨ HTTP å“åº”ä¸­è¿”å›çš„Â <code>Cache-Control</code>ã€<code>Expires</code>Â ç­‰å¤´éƒ¨ä¿¡æ¯ï¼Œæ‰æ˜¯æµè§ˆå™¨å¿…é¡»ä¸¥æ ¼éµå®ˆçš„â€œæœ€é«˜æŒ‡ä»¤â€ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨Webpackç­‰æ„å»ºå·¥å…·ï¼Œåœ¨æ‰“åŒ…æ—¶ä¸º JSã€CSS ç­‰é™æ€èµ„æºç”Ÿæˆç‹¬ä¸€æ— äºŒçš„ Hash å€¼æ–‡ä»¶åã€‚å½“æ–‡ä»¶å˜åŒ–ï¼Œindex.htmlæ–‡ä»¶ä¸­çš„å¼•å…¥æ–‡ä»¶ä¹Ÿä¼šå˜åŒ–ï¼Œå¦‚æœæ­¤æ—¶æµè§ˆå™¨ç¼“å­˜äº†ï¼Œè¯·æ±‚çš„æ˜¯æ—§çš„html,å°±ä¼šå‡ºç°ä¸€ç›´è¯·æ±‚æ—§çš„é¡µé¢ã€‚</p>
<pre><code class="hljs language-js" lang="js">main.1258d91412371.<span class="hljs-property">js</span>
vendor.<span class="hljs-property">ant</span>-design.59d332b0.<span class="hljs-property">js</span>
</code></pre>
<p>ç†è®ºä¸Šï¼Œåªè¦æ–‡ä»¶å†…å®¹å‘ç”Ÿå˜åŒ–ï¼ŒHashå°±ä¼šæ”¹å˜ï¼Œæµè§ˆå™¨å°±è¦è¯·æ±‚æ–°çš„æ–‡ä»¶ã€‚</p>
<h2 data-id="heading-2">2. è§£å†³æ–¹æ¡ˆ</h2>
<p>é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦ä¿è¯æ¯æ¬¡è¯·æ±‚çš„htmlæ˜¯æœ€æ–°çš„å°±å¯ä»¥è§£å†³ç¼“å­˜é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬åªéœ€è¦å°†nginxä¸­çš„<code>index.html</code>å¼ºåˆ¶ä¸ç¼“å­˜ï¼š</p>
<pre><code class="hljs language-js" lang="js">location = /index.<span class="hljs-property">html</span> {
    add_header <span class="hljs-title class_">Cache</span>-<span class="hljs-title class_">Control</span> <span class="hljs-string">"no-cache, no-store, must-revalidate"</span>;
    add_header <span class="hljs-title class_">Pragma</span> <span class="hljs-string">"no-cache"</span>;
    add_header <span class="hljs-title class_">Expires</span> <span class="hljs-string">"0"</span>;
}
</code></pre>
<p>å‰åæ•´ä½“æµç¨‹æ˜¯ï¼š</p>
<ol>
<li>å½“æµè§ˆå™¨è¯·æ±‚Â <code>https://xxx.com/</code>Â æ—¶ï¼Œå‘½ä¸­äº†Â <code>location /</code>Â è§„åˆ™ã€‚</li>
<li>Nginx è¿”å›äº†æ—§çš„çš„<code>index.html</code>Â æ–‡ä»¶ï¼Œä½†<strong>æ²¡æœ‰é™„åŠ ä»»ä½•Â <code>Cache-Control</code>Â æˆ–Â <code>Expires</code>Â å“åº”å¤´</strong>ã€‚</li>
<li>æµè§ˆå™¨æˆ–ä¸Šæ¸¸CDNçœ‹åˆ°è¿™ä¸ªâ€œæ²‰é»˜â€çš„å“åº”ï¼Œä¾¿å¯ç”¨è‡ªå·±çš„é»˜è®¤ç¼“å­˜ç­–ç•¥ï¼Œå°†Â <code>index.html</code>Â ç¼“å­˜äº†ä¸€æ®µæ—¶é—´ã€‚</li>
<li>å½“ä½ éƒ¨ç½²æ–°ç‰ˆæœ¬åï¼ŒJS æ–‡ä»¶åï¼ˆä¾‹å¦‚Â <code>main.new-hash.js</code>ï¼‰è™½ç„¶å˜äº†ï¼Œä½†ç”¨æˆ·å†æ¬¡è®¿é—®æ—¶ï¼Œæµè§ˆå™¨ç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºäº†<strong>æ—§çš„Â <code>index.html</code></strong>ã€‚</li>
<li>æ—§çš„ HTML æ–‡ä»¶ä¾ç„¶å¼•ç”¨ç€<strong>æ—§çš„ JS æ–‡ä»¶</strong>ï¼ˆ<code>main.old-hash.js</code>ï¼‰ã€‚</li>
<li>æœ€ç»ˆï¼Œç”¨æˆ·çœ‹åˆ°çš„è¿˜æ˜¯æ—§ç‰ˆæœ¬ï¼Œé‚£ä¸ªè®©ä½ æŠ“ç‹‚çš„ Bug ä¾ç„¶å­˜åœ¨ã€‚</li>
<li>å¦‚æœæ­¤æ—¶æ–°çš„nginxé…ç½®å®Œæˆï¼Œæ¯æ¬¡è¯·æ±‚å‘½ä¸­<code>/index.html</code>è®¾ç½®</li>
<li>è·å–äº†æ–°çš„html,ä¹Ÿå°±ä¼šè·å–æ–°çš„jsæ–‡ä»¶ï¼Œé‚£ä¹ˆé—®é¢˜å°±è§£å†³äº†ã€‚</li>
</ol>
<h2 data-id="heading-3">3ï¼Œ CDNè®¾ç½®</h2>
<p>å¦‚æœä½ çš„åº”ç”¨éƒ¨ç½²åœ¨CDNä¸Šï¼Œç¡®ä¿CDNçš„ç¼“å­˜ç­–ç•¥ä¸ä½ çš„ Nginx é…ç½®ä¿æŒä¸€è‡´ã€‚é€šå¸¸éœ€è¦åœ¨CDNæ§åˆ¶å°è®¾ç½®ç¼“å­˜é…ç½®ï¼Œä½¿å…¶â€œ<strong>éµå®ˆæºç«™ï¼ˆOriginï¼‰çš„ Cache-Control å¤´</strong>â€ã€‚</p>















<table><thead><tr><th align="left">æ–‡ä»¶ç±»å‹</th><th align="left">å»ºè®® TTL</th><th align="left">æ˜¯å¦éµå®ˆæºç«™</th></tr></thead><tbody><tr><td align="left"><code>*.html</code></td><td align="left">0 ç§’</td><td align="left">æ˜¯</td></tr></tbody></table>
<h2 data-id="heading-4">4. æ³¨æ„ç‚¹</h2>
<p>å½“æ–°çš„<code>nginx</code>é…ç½®åï¼Œä¸ä¸€å®šä¼šç«‹åˆ»ç”Ÿæ•ˆã€‚è¿˜æ˜¯è¦å°†æ‰‹æœºç¼“å­˜æ¸…ç†ä¸‹ï¼Œæ‰èƒ½æ¯æ¬¡è·å–æœ€æ–°çš„é¡µé¢ã€‚</p>
<h2 data-id="heading-5">5. æ€»ç»“</h2>
<p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼šç¼“å­˜çš„æ ¹æœ¬åœ¨äºÂ <strong>HTTP å“åº”å¤´æ˜¯æ§åˆ¶ç¼“å­˜çš„å”¯ä¸€æƒå¨</strong>ã€‚é€šè¿‡åœ¨ Nginx å±‚å®æ–½ç²¾ç»†åŒ–çš„ç¼“å­˜ç­–ç•¥â€”â€”<strong>è®©å…¥å£ HTML æ°¸ä¸ç¼“å­˜ï¼Œè®©å¸¦ Hash çš„é™æ€èµ„æºæ°¸ä¹…ç¼“å­˜</strong>ï¼Œæ‰èƒ½åšåˆ°å®æ—¶æ›´æ–°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[try...catch æ ¸å¿ƒä¸ç”Ÿæ€åä½œå…¨è§£æ]]></title>    <link>https://juejin.cn/post/7572757056438534153</link>    <guid>https://juejin.cn/post/7572757056438534153</guid>    <pubDate>2025-11-16T13:32:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572757056438534153" data-draft-id="7568425510793068544" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" try...catch æ ¸å¿ƒä¸ç”Ÿæ€åä½œå…¨è§£æ"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-16T13:32:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             try...catch æ ¸å¿ƒä¸ç”Ÿæ€åä½œå…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:32:23.000Z" title="Sun Nov 16 2025 13:32:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="arta">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#222}.hljs-subst,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#aaa}.hljs-section{color:#fff}.hljs-comment,.hljs-meta,.hljs-quote{color:#444}.hljs-bullet,.hljs-regexp,.hljs-string,.hljs-symbol{color:#fc3}.hljs-addition,.hljs-number{color:#0c6}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-template-variable,.hljs-type{color:#32aaee}.hljs-keyword,.hljs-name,.hljs-selector-class,.hljs-selector-id,.hljs-selector-tag{color:#64a}.hljs-deletion,.hljs-template-tag,.hljs-title,.hljs-variable{color:#b16}.hljs-doctag,.hljs-section,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><h2 data-id="heading-0">ä¸€ã€try...catch æœ¬è´¨ï¼šä¸ºä½•éœ€è¦å®ƒï¼Ÿï¼ˆä»ç¨‹åºå¤±æ§åˆ°å¯æ§ï¼‰</h2>
<p>åœ¨ JavaScript æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä»£ç å¸¸å› å˜é‡æœªå®šä¹‰ã€ç±»å‹é”™è¯¯ã€API è°ƒç”¨å¤±è´¥ç­‰é—®é¢˜ä¸­æ–­ã€‚è‹¥ç¼ºä¹å¼‚å¸¸å¤„ç†ï¼ŒåŒæ­¥ä»£ç ä¼šç›´æ¥å´©æºƒï¼Œå¼‚æ­¥ä»£ç ä¼šé™·å…¥ä¸å¯é¢„çŸ¥çŠ¶æ€ã€‚<code>try...catch</code>Â çš„æ ¸å¿ƒä»·å€¼æ˜¯<strong>å°† â€œä¸å¯æ§çš„é”™è¯¯ä¸­æ–­â€ è½¬åŒ–ä¸º â€œå¯æ§çš„é€»è¾‘å¤„ç†â€</strong> ï¼Œé¿å…ç¨‹åºå´©æºƒå¹¶æä¾›è¡¥æ•‘æœºä¼šï¼Œæ˜¯ä¿éšœä»£ç å¥å£®æ€§çš„åŸºç¡€æœºåˆ¶ã€‚</p>
<h3 data-id="heading-1">1.1 æ—  try...catch æ—¶çš„é—®é¢˜</h3>
<p>ä»£ç æŠ¥é”™åç›´æ¥ç»ˆæ­¢ï¼Œåç»­é€»è¾‘æ— æ³•æ‰§è¡Œï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">'invalid json'</span>); <span class="hljs-comment">// æŠ¥é”™ï¼šUnexpected token i in JSON at position 0</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¨‹åºç»§ç»­æ‰§è¡Œ'</span>); <span class="hljs-comment">// ä¸ä¼šæ‰§è¡Œï¼Œä»£ç ä¸­æ–­</span>
</code></pre>
<h3 data-id="heading-2">1.2 æœ‰ try...catch æ—¶çš„ä¼˜åŒ–</h3>
<p>é”™è¯¯è¢«æ•è·åï¼Œå¯æ‰§è¡Œè¡¥æ•‘é€»è¾‘ï¼Œç¨‹åºæ­£å¸¸æµè½¬ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">'invalid json'</span>);
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è§£æå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®'</span>); <span class="hljs-comment">// æ‰§è¡Œè¡¥æ•‘æ“ä½œ</span>
  <span class="hljs-keyword">const</span> data = { <span class="hljs-attr">default</span>: <span class="hljs-string">'value'</span> }; 
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¨‹åºç»§ç»­æ‰§è¡Œ'</span>); <span class="hljs-comment">// æ­£å¸¸æ‰§è¡Œï¼Œæ— ä¸­æ–­</span>
</code></pre>
<h2 data-id="heading-3">äºŒã€try...catch ä¸æ ¸å¿ƒæŠ€æœ¯çš„å…³è”ï¼šä»åŸºç¡€åˆ°æ‰©å±•</h2>
<p><code>try...catch</code>Â å¹¶éä»…ä¸Â <code>Promise</code>ã€<code>axios</code>Â ç›¸å…³ï¼Œè€Œæ˜¯è´¯ç©¿ JavaScript å…¨åœºæ™¯çš„é€šç”¨æœºåˆ¶ï¼Œä»¥ä¸‹ä»æ ¸å¿ƒå…³è”ã€è·¨ç•Œåœºæ™¯ä¸¤æ–¹é¢è¯¦ç»†è§£æã€‚</p>
<h3 data-id="heading-4">2.1 ä¸ Promiseã€async/await çš„åº•å±‚å…³è”</h3>
<p><code>try...catch</code>Â æœ¬è´¨æ˜¯<strong>åŒæ­¥é”™è¯¯æ•è·å·¥å…·</strong>ï¼Œè€ŒÂ <code>Promise</code>Â å¤„ç†å¼‚æ­¥æ“ä½œï¼ŒäºŒè€…éœ€é…åˆå®ç° â€œåŒæ­¥ + å¼‚æ­¥â€ å…¨åœºæ™¯é”™è¯¯å¤„ç†ã€‚</p>
<h4 data-id="heading-5">2.1.1 Promise ä¸ºä½•éœ€è¦ç‹¬ç«‹é”™è¯¯å¤„ç†ï¼Ÿ</h4>
<p>å¼‚æ­¥ä»£ç ï¼ˆå¦‚å®šæ—¶å™¨ã€ç½‘ç»œè¯·æ±‚ï¼‰çš„é”™è¯¯å‘ç”Ÿåœ¨ â€œå½“å‰äº‹ä»¶å¾ªç¯ä¹‹å¤–â€ï¼Œ<code>try...catch</code>Â æ— æ³•ç›´æ¥æ•è·ã€‚<code>Promise</code>Â è®¾è®¡Â <code>.catch()</code>Â æ–¹æ³•ï¼Œä¸“é—¨æ•è·å¼‚æ­¥æ‰§è¡Œä¸­çš„é”™è¯¯ï¼ˆåŒ…æ‹¬Â <code>reject</code>Â å’Œæ‰§è¡Œå™¨å†…åŒæ­¥é”™è¯¯ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// try...catch æ— æ³•æ•è· Promise å†…éƒ¨å¼‚æ­¥é”™è¯¯</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¼‚æ­¥é”™è¯¯'</span>); <span class="hljs-comment">// é”™è¯¯å‘ç”Ÿåœ¨å®šæ—¶å™¨å›è°ƒï¼Œå±å¼‚æ­¥</span>
    }, <span class="hljs-number">100</span>);
  });
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•è·ä¸åˆ°'</span>, error); <span class="hljs-comment">// ä¸æ‰§è¡Œ</span>
}

<span class="hljs-comment">// éœ€ç”¨ Promise çš„ .catch() æ•è·</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¼‚æ­¥é”™è¯¯'</span>);
  }, <span class="hljs-number">100</span>);
}).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•è·åˆ°'</span>, error); <span class="hljs-comment">// æ­£å¸¸æ‰§è¡Œ</span>
});
</code></pre>
<h4 data-id="heading-6">2.1.2 async/await å¦‚ä½•è®© try...catch æ¥ç®¡å¼‚æ­¥é”™è¯¯ï¼Ÿ</h4>
<p><code>async/await</code>Â æ˜¯Â <code>Promise</code>Â è¯­æ³•ç³–ï¼Œèƒ½å°†å¼‚æ­¥ä»£ç  â€œä¼ªè£…â€ æˆåŒæ­¥æ‰§è¡Œé¡ºåºï¼Œä½¿Â <code>try...catch</code>Â å¯åŒæ—¶æ•è· â€œåŒæ­¥é”™è¯¯â€ å’Œ â€œawait åçš„ Promise é”™è¯¯â€ï¼ˆ<code>await</code>Â ç­‰å¾… Promise çŠ¶æ€å˜æ›´æ—¶ï¼Œå¼‚æ­¥é”™è¯¯è½¬åŒ–ä¸º â€œç­‰å¾…é˜¶æ®µé”™è¯¯â€ï¼‰ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">async</span> function <span class="hljs-title">fetchData</span>()</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// åŒæ­¥é”™è¯¯ï¼šæœªå®šä¹‰å˜é‡</span>
    <span class="hljs-keyword">const</span> invalid = undefinedVariable; 
    <span class="hljs-comment">// å¼‚æ­¥é”™è¯¯ï¼šaxios è¯·æ±‚å¤±è´¥ï¼ˆè¿”å› rejected Promiseï¼‰</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/invalid-api'</span>); 
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// åŒæ­¥ã€å¼‚æ­¥é”™è¯¯å‡è¢«æ•è·</span>
    console.log(<span class="hljs-string">'æ•è·åˆ°æ‰€æœ‰é”™è¯¯ï¼š'</span>, error); 
  }
}
</code></pre>
<h3 data-id="heading-7">2.2 ä¸ axios çš„åä½œé€»è¾‘</h3>
<p><code>axios</code>Â æ˜¯åŸºäºÂ <code>Promise</code>Â çš„ HTTP å®¢æˆ·ç«¯ï¼Œå…¶é”™è¯¯åˆ†ä¸¤ç±»ï¼Œéœ€é€šè¿‡Â <code>try...catch</code>Â æˆ–Â <code>.catch()</code>Â ç»Ÿä¸€å¤„ç†ï¼š</p>
<ul>
<li>ç½‘ç»œé”™è¯¯ï¼ˆå¦‚æ–­ç½‘ï¼‰ï¼šç›´æ¥è§¦å‘Â <code>reject</code>ï¼›</li>
<li>HTTP é”™è¯¯ï¼ˆå¦‚ 404/500ï¼‰ï¼šé»˜è®¤è§¦å‘Â <code>reject</code>ï¼Œå¯é€šè¿‡Â <code>validateStatus</code>Â é…ç½®ä¿®æ”¹ã€‚</li>
</ul>
<h4 data-id="heading-8">2.2.1 ç”¨ .catch () å¤„ç† axios é”™è¯¯</h4>
<pre><code class="hljs language-lua" lang="lua">axios.get(<span class="hljs-string">'/api/data'</span>)
  .<span class="hljs-keyword">then</span>(response =&gt; {
    console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'è¯·æ±‚æˆåŠŸ:'</span>, response.data);
  })
  .catch(<span class="hljs-built_in">error</span> =&gt; {
    // æ•è·ç½‘ç»œé”™è¯¯æˆ– HTTP é”™è¯¯
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">error</span>.response) {
      console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'HTTP é”™è¯¯çŠ¶æ€ç :'</span>, <span class="hljs-built_in">error</span>.response.<span class="hljs-built_in">status</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">error</span>.request) {
      console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'ç½‘ç»œé”™è¯¯ï¼Œæ— å“åº”:'</span>, <span class="hljs-built_in">error</span>.request);
    }
  });
</code></pre>
<h4 data-id="heading-9">2.2.2 ç”¨ try...catch å¤„ç† axios é”™è¯¯ï¼ˆasync/await åœºæ™¯ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserData</span>(<span class="hljs-params">userId</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api/users/<span class="hljs-subst">${userId}</span>`</span>);
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// ç»Ÿä¸€æ•è·å¹¶ç»†åŒ–å¤„ç†</span>
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>?.<span class="hljs-property">status</span> === <span class="hljs-number">404</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·ä¸å­˜åœ¨'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–ç”¨æˆ·æ•°æ®å¤±è´¥:'</span>, error);
    <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// éœ€ä¸Šå±‚å¤„ç†æ—¶é‡æ–°æŠ›å‡º</span>
  }
}
</code></pre>
<h3 data-id="heading-10">2.3 è·¨ç•Œå…³è”åœºæ™¯ï¼šä¸æ­¢äº Promiseã€axios</h3>
<p><code>try...catch</code>Â å¯æ•è· â€œå½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡â€ ä¸­æ‰€æœ‰åŒæ­¥é”™è¯¯ï¼Œè¦†ç›– DOM æ“ä½œã€Node.js æ ¸å¿ƒæ¨¡å—ã€ç¬¬ä¸‰æ–¹åº“ç­‰åœºæ™¯ã€‚</p>
<h4 data-id="heading-11">2.3.1 ä¸ DOM æ“ä½œçš„åä½œ</h4>
<p>DOM æ“ä½œæ˜“å›  â€œå…ƒç´ ä¸å­˜åœ¨â€â€œä¿®æ”¹åªè¯»å±æ€§â€ å‡ºé”™ï¼Œ<code>try...catch</code>Â å¯é¿å…é¡µé¢åŠŸèƒ½ç˜«ç—ªã€‚</p>
<pre><code class="hljs language-ini" lang="ini">function renderUserList(users) {
  try {
    const <span class="hljs-attr">list</span> = document.getElementById(<span class="hljs-string">'user-list'</span>)<span class="hljs-comment">;</span>
    // è‹¥ list ä¸å­˜åœ¨æˆ– users æ ¼å¼å¼‚å¸¸ï¼Œç›´æ¥æŠ¥é”™
    users.forEach(<span class="hljs-attr">user</span> =&gt; {
      const <span class="hljs-attr">item</span> = document.createElement(<span class="hljs-string">'li'</span>)<span class="hljs-comment">;</span>
      <span class="hljs-attr">item.textContent</span> = user.name<span class="hljs-comment">; // è‹¥ user æ—  name å±æ€§ï¼Œè§¦å‘é”™è¯¯</span>
      list.appendChild(item)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
  } catch (error) {
    console.error('æ¸²æŸ“å¤±è´¥ï¼š', error)<span class="hljs-comment">;</span>
    // é™çº§å¤„ç†ï¼šæ˜¾ç¤ºé”™è¯¯æç¤ºè€Œéç™½å±
    <span class="hljs-attr">document.body.innerHTML</span> = <span class="hljs-string">'&lt;p&gt;åŠ è½½ç”¨æˆ·åˆ—è¡¨å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•&lt;/p&gt;'</span><span class="hljs-comment">;</span>
  }
}
</code></pre>
<h4 data-id="heading-12">2.3.2 ä¸ Node.js æ ¸å¿ƒæ¨¡å—çš„é…åˆ</h4>
<p>Node.js ä¸­åŒæ­¥ APIï¼ˆå¦‚Â <code>fs.readFileSync</code>ï¼‰çš„é”™è¯¯éœ€Â <code>try...catch</code>Â æ•è·ï¼Œå¦åˆ™å¯¼è‡´è¿›ç¨‹å´©æºƒã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">readConfig</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// åŒæ­¥è¯»å–æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸å­˜åœ¨/æƒé™ä¸è¶³æ—¶æŠ›å‡ºé”™è¯¯</span>
    <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'./config.json'</span>, <span class="hljs-string">'utf8'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(content); <span class="hljs-comment">// è§£æå¤±è´¥ä¹Ÿè¢«æ•è·</span>
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é…ç½®æ–‡ä»¶è¯»å–å¤±è´¥ï¼š'</span>, error);
    <span class="hljs-comment">// è¿”å›é»˜è®¤é…ç½®ï¼Œä¿è¯ç¨‹åºæ­£å¸¸å¯åŠ¨</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">default</span>: <span class="hljs-string">'config'</span> }; 
  }
}
</code></pre>
<h4 data-id="heading-13">2.3.3 ä¸ç¬¬ä¸‰æ–¹åº“çš„å…¼å®¹</h4>
<p>ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚Â <code>moment</code>ã€<code>Redux</code>ï¼‰çš„åŒæ­¥æ–¹æ³•å¯èƒ½å› æ— æ•ˆå‚æ•°æŠ›å‡ºé”™è¯¯ï¼Œ<code>try...catch</code>Â æ˜¯é€šç”¨é˜²æŠ¤æ‰‹æ®µã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> moment <span class="hljs-keyword">from</span> <span class="hljs-string">'moment'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">formatDate</span>(<span class="hljs-params">dateString</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// è‹¥ dateString æ ¼å¼æ— æ•ˆï¼Œmoment æ ¼å¼åŒ–ä¼šæŠ¥é”™</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">moment</span>(dateString).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ—¥æœŸæ ¼å¼åŒ–å¤±è´¥ï¼š'</span>, error);
    <span class="hljs-comment">// å‹å¥½æç¤ºï¼Œé¿å…æš´éœ²æŠ€æœ¯é”™è¯¯</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'æ— æ•ˆæ—¥æœŸ'</span>; 
  }
}
</code></pre>
<h2 data-id="heading-14">ä¸‰ã€å¤æ‚é¡¹ç›®åœºæ™¯ï¼štry...catch çš„å®æˆ˜åº”ç”¨</h2>
<p>åœ¨å¤šä»»åŠ¡ä¾èµ–ã€å¹¶è¡Œæ‰§è¡Œç­‰å¤æ‚åœºæ™¯ä¸­ï¼Œ<code>try...catch</code>Â ä¸Â <code>Promise</code>Â ç»„åˆå¯å®ç° â€œé”™è¯¯éš”ç¦»â€â€œæµç¨‹å¯æ§â€ï¼Œé¿å…å±€éƒ¨é”™è¯¯å½±å“å…¨å±€ã€‚</p>
<h3 data-id="heading-15">3.1 åˆ†æ­¥ä¾èµ–ä»»åŠ¡ï¼šä¸²è”å¼ä»»åŠ¡é˜Ÿåˆ—</h3>
<p>åœºæ™¯ï¼šå…ˆè·å– Token â†’ ç”¨ Token æ‹‰å–ç”¨æˆ· ID â†’ æäº¤è¡¨å•ï¼ŒæŸä¸€æ­¥å‡ºé”™éœ€ä¸­æ–­å¹¶æç¤ºã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»»åŠ¡1ï¼šè·å– Token</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getToken</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/auth'</span>)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-property">data</span>.<span class="hljs-property">token</span>)
    .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`è·å– Token å¤±è´¥ï¼š<span class="hljs-subst">${err.message}</span>`</span>); <span class="hljs-comment">// åŒ…è£…é”™è¯¯ä¸Šä¸‹æ–‡</span>
    });
}

<span class="hljs-comment">// ä»»åŠ¡2ï¼šç”¨ Token è·å–ç”¨æˆ· ID</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserId</span>(<span class="hljs-params">token</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/user'</span>, { <span class="hljs-attr">headers</span>: { token } });
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>.<span class="hljs-property">id</span>;
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`è·å–ç”¨æˆ· ID å¤±è´¥ï¼š<span class="hljs-subst">${err.message}</span>`</span>); <span class="hljs-comment">// è¡¥å……é”™è¯¯ä¿¡æ¯</span>
  }
}

<span class="hljs-comment">// ä»»åŠ¡3ï¼šæäº¤è¡¨å•ï¼ˆä¾èµ–ç”¨æˆ· IDï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">submitForm</span>(<span class="hljs-params">userId, formData</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/submit'</span>, { ...formData, userId });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æäº¤æˆåŠŸ'</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`æäº¤è¡¨å•å¤±è´¥ï¼š<span class="hljs-subst">${err.message}</span>`</span>);
  }
}

<span class="hljs-comment">// ä¸»æµç¨‹ï¼šç»Ÿä¸€æ§åˆ¶ï¼Œæ±‡æ€»é”™è¯¯</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">formData</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getToken</span>();
    <span class="hljs-keyword">const</span> userId = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserId</span>(token);
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">submitForm</span>(userId, formData);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// æ‰€æœ‰æ­¥éª¤é”™è¯¯æ±‡æ€»åˆ°æ­¤å¤„ï¼Œç»Ÿä¸€æç¤º+ä¸ŠæŠ¥</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æµç¨‹ä¸­æ–­ï¼š'</span>, error.<span class="hljs-property">message</span>);
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">`æ“ä½œå¤±è´¥ï¼š<span class="hljs-subst">${error.message}</span>`</span>);
    <span class="hljs-comment">// ä¸ŠæŠ¥é”™è¯¯åˆ°ç›‘æ§ç³»ç»Ÿï¼ˆé™„å¸¦ç”¨æˆ·/æ—¶é—´ç­‰ä¸Šä¸‹æ–‡ï¼‰</span>
    <span class="hljs-title function_">logErrorToServer</span>({
      <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span>,
      <span class="hljs-attr">stack</span>: error.<span class="hljs-property">stack</span>,
      <span class="hljs-attr">context</span>: { <span class="hljs-attr">userId</span>: <span class="hljs-string">'xxx'</span>, <span class="hljs-attr">time</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>() }
    });
  }
}
</code></pre>
<h3 data-id="heading-16">3.2 å¹¶è¡Œä»»åŠ¡ï¼šé”™è¯¯éš”ç¦»ä¸ä¸­æ–­æ•´ä½“</h3>
<p>åœºæ™¯ï¼šé¡µé¢åŒæ—¶æ¸²æŸ“ 3 ä¸ªç‹¬ç«‹ç»„ä»¶ï¼ˆç”¨æˆ·ä¿¡æ¯ã€è®¢å•åˆ—è¡¨ã€æ¶ˆæ¯é€šçŸ¥ï¼‰ï¼Œä¸€ä¸ªç»„ä»¶å‡ºé”™ä¸å½±å“å…¶ä»–ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶1ï¼šæ¸²æŸ“ç”¨æˆ·ä¿¡æ¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderUserInfo</span>(<span class="hljs-params">userId</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">async</span> (resolve, reject) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api/user/<span class="hljs-subst">${userId}</span>`</span>);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'user-info'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`&lt;p&gt;<span class="hljs-subst">${user.data.name}</span>&lt;/p&gt;`</span>;
      <span class="hljs-title function_">resolve</span>();
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-title function_">reject</span>(<span class="hljs-string">`ç”¨æˆ·ä¿¡æ¯ç»„ä»¶å¤±è´¥ï¼š<span class="hljs-subst">${err.message}</span>`</span>);
    }
  });
}

<span class="hljs-comment">// ç»„ä»¶2ï¼šæ¸²æŸ“è®¢å•åˆ—è¡¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderOrderList</span>(<span class="hljs-params">userId</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">async</span> (resolve, reject) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api/orders/<span class="hljs-subst">${userId}</span>`</span>);
      <span class="hljs-comment">// æ¸²æŸ“é€»è¾‘...</span>
      <span class="hljs-title function_">resolve</span>();
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-title function_">reject</span>(<span class="hljs-string">`è®¢å•åˆ—è¡¨ç»„ä»¶å¤±è´¥ï¼š<span class="hljs-subst">${err.message}</span>`</span>);
    }
  });
}

<span class="hljs-comment">// ä¸»æµç¨‹ï¼šå¹¶è¡Œæ¸²æŸ“ï¼Œé”™è¯¯éš”ç¦»</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderAllComponents</span>(<span class="hljs-params">userId</span>) {
  <span class="hljs-comment">// ç”¨ Promise.allSettled æ•è·æ‰€æœ‰ç»“æœï¼ŒæˆåŠŸ/å¤±è´¥å‡ä¸ä¸­æ–­</span>
  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([
    <span class="hljs-title function_">renderUserInfo</span>(userId),
    <span class="hljs-title function_">renderOrderList</span>(userId),
    <span class="hljs-title function_">renderMessageList</span>(userId) <span class="hljs-comment">// ç»„ä»¶3ï¼šæ¸²æŸ“æ¶ˆæ¯é€šçŸ¥</span>
  ]);

  <span class="hljs-comment">// å¤„ç†å¤±è´¥ç»“æœï¼Œå•ç‹¬æç¤º</span>
  results.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">result, index</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">status</span> === <span class="hljs-string">'rejected'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ç»„ä»¶<span class="hljs-subst">${index+<span class="hljs-number">1</span>}</span>æ¸²æŸ“å¤±è´¥ï¼š`</span>, result.<span class="hljs-property">reason</span>);
      <span class="hljs-comment">// æ ‡è®°å¤±è´¥ç»„ä»¶ï¼Œä¸å½±å“å…¶ä»–ç»„ä»¶å±•ç¤º</span>
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.component'</span>)[index].<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'error'</span>);
    }
  });
}
</code></pre>
<h2 data-id="heading-17">å››ã€try...catch çš„å±€é™æ€§ï¼šå¹¶éä¸‡èƒ½</h2>
<p>å°½ç®¡Â <code>try...catch</code>Â æ˜¯åŸºç¡€æœºåˆ¶ï¼Œä½†å­˜åœ¨æ˜æ˜¾çŸ­æ¿ï¼Œéœ€ç»“åˆå…¶ä»–æ–¹æ¡ˆè§„é¿ã€‚</p>
<h3 data-id="heading-18">4.1 æ— æ³•æ•è·çš„é”™è¯¯ç±»å‹</h3>
<ul>
<li>
<p><strong>è¯­æ³•é”™è¯¯ä¸è§£æé”™è¯¯</strong>ï¼šä»£ç å­˜åœ¨è¯­æ³•é—®é¢˜ï¼ˆå¦‚æ‹¬å·ä¸åŒ¹é…ï¼‰æˆ–è§£æé˜¶æ®µé”™è¯¯ï¼ˆå¦‚Â <code>import</code>Â ä¸å­˜åœ¨çš„æ¨¡å—ï¼‰ï¼Œè„šæœ¬åŠ è½½æ—¶ç›´æ¥æŠ¥é”™ï¼Œ<code>try...catch</code>Â æ— æ³•æ•è·ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// è¯­æ³•é”™è¯¯ï¼šç¼ºå°‘å³æ‹¬å·</span>
  <span class="hljs-keyword">const</span> a = <span class="hljs-number">1</span> + <span class="hljs-number">2</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a; 
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-comment">// ä¸æ‰§è¡Œï¼Œè„šæœ¬è§£æé˜¶æ®µå·²æŠ¥é”™</span>
}
</code></pre>
</li>
<li>
<p><strong>é Promise å¼‚æ­¥é”™è¯¯</strong>ï¼šä¸åŸºäºÂ <code>Promise</code>Â çš„å¼‚æ­¥æ“ä½œï¼ˆå¦‚å›è°ƒå‡½æ•°ï¼‰ï¼Œé”™è¯¯æ— æ³•è¢«Â <code>try...catch</code>Â æ•è·ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å®šæ—¶å™¨é”™è¯¯'</span>); <span class="hljs-comment">// å¼‚æ­¥å›è°ƒé”™è¯¯ï¼Œæ— æ³•æ•è·</span>
  }, <span class="hljs-number">100</span>);
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•è·ä¸åˆ°'</span>, error); <span class="hljs-comment">// ä¸æ‰§è¡Œ</span>
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-19">4.2 åŠŸèƒ½ä¸Šçš„ä¸è¶³</h3>
<ul>
<li>
<p><strong>è¿‡åº¦æ•è·æ©ç›–é€»è¾‘é”™è¯¯</strong>ï¼šåŒ…è£¹å¤§æ®µä»£ç æ—¶ï¼Œä¼šæ•è· â€œé¢„æœŸå¤–é”™è¯¯â€ï¼ˆå¦‚å˜é‡æ‹¼å†™é”™è¯¯ï¼‰ï¼Œå¢åŠ è°ƒè¯•éš¾åº¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// é€»è¾‘é”™è¯¯ï¼šå˜é‡åæ‹¼å†™é”™è¯¯ï¼ˆåº”ä¸º user.nameï¼‰</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(uesr.<span class="hljs-property">name</span>); 
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‡ºé”™äº†ï¼Œä½†æ— æ³•å®šä½æ˜¯æ‹¼å†™é”™è¿˜æ˜¯å…¶ä»–é”™'</span>); <span class="hljs-comment">// æ©ç›–çœŸå®é—®é¢˜</span>
}
</code></pre>
</li>
<li>
<p><strong>æ€§èƒ½æŸè€—</strong>ï¼š<code>try...catch</code>Â ä¼šå½±å“ JavaScript å¼•æ“ä¼˜åŒ–ï¼ˆå¦‚ V8 å³æ—¶ç¼–è¯‘ï¼‰ï¼Œé«˜é¢‘æ‰§è¡Œåœºæ™¯ï¼ˆå¦‚å¾ªç¯ï¼‰ä¸­è¿‡åº¦ä½¿ç”¨ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åä¾‹ï¼šå¾ªç¯ä¸­é¢‘ç¹ä½¿ç”¨ try...catchï¼Œæ€§èƒ½æŸè€—æ˜æ˜¾</span>
for (let i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
  try {
    <span class="hljs-built_in">processData</span>(i); <span class="hljs-comment">// é«˜é¢‘æ‰§è¡Œï¼Œä¸å»ºè®®åŒ…è£¹</span>
  } catch (error) {
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
</li>
</ul>
<h2 data-id="heading-20">äº”ã€try...catch ä¸å…¶ä»–æœºåˆ¶çš„ç”Ÿæ€åä½œ</h2>
<p>ç°ä»£å¼€å‘ä¸­ï¼Œ<code>try...catch</code>Â éœ€ä¸å…¨å±€é”™è¯¯ç›‘å¬ã€æ¡†æ¶é”™è¯¯è¾¹ç•Œç­‰é…åˆï¼Œå½¢æˆå¤šå±‚é˜²æŠ¤ä½“ç³»ã€‚</p>
<h3 data-id="heading-21">5.1 ä¸å…¨å±€é”™è¯¯ç›‘å¬çš„é…åˆ</h3>
<p><code>window.onerror</code>Â æˆ–Â <code>window.addEventListener('error')</code>Â å¯æ•è·Â <code>try...catch</code>Â æœªå¤„ç†çš„ â€œæ¼ç½‘ä¹‹é±¼â€ï¼ˆå¦‚æœªè¢«æ•è·çš„ Promise é”™è¯¯ã€è·¨åŸŸè„šæœ¬é”™è¯¯ï¼‰ï¼Œä½œä¸ºæœ€åå…œåº•ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±€é”™è¯¯å…œåº•ï¼Œæ•è·æœªå¤„ç†é”™è¯¯</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-comment">// è¿‡æ»¤èµ„æºåŠ è½½é”™è¯¯ï¼ˆå¦‚å›¾ç‰‡åŠ è½½å¤±è´¥ï¼‰ï¼Œåªå¤„ç†è„šæœ¬é”™è¯¯</span>
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">message</span> !== <span class="hljs-string">'Script error.'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å…¨å±€æœªæ•è·é”™è¯¯ï¼š'</span>, event.<span class="hljs-property">error</span>);
    <span class="hljs-comment">// ä¸ŠæŠ¥åˆ°ç›‘æ§ç³»ç»Ÿï¼Œé¿å…é”™è¯¯é™é»˜</span>
    <span class="hljs-title function_">logErrorToServer</span>(event.<span class="hljs-property">error</span>);
  }
});

<span class="hljs-comment">// æ•è·æœªå¤„ç†çš„ Promise é”™è¯¯</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'unhandledrejection'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æœªå¤„ç†çš„ Promise é”™è¯¯ï¼š'</span>, event.<span class="hljs-property">reason</span>);
  event.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">// é˜»æ­¢æµè§ˆå™¨é»˜è®¤æç¤º</span>
  <span class="hljs-title function_">logErrorToServer</span>(event.<span class="hljs-property">reason</span>);
});
</code></pre>
<h3 data-id="heading-22">5.2 ä¸æ¡†æ¶é”™è¯¯è¾¹ç•Œçš„åä½œ</h3>
<p>åœ¨ Reactã€Vue ç­‰æ¡†æ¶ä¸­ï¼Œç»„ä»¶æ¸²æŸ“é”™è¯¯éœ€ç”¨ â€œé”™è¯¯è¾¹ç•Œâ€ å¤„ç†ï¼Œ<code>try...catch</code>Â è´Ÿè´£é€»è¾‘é”™è¯¯ï¼Œé”™è¯¯è¾¹ç•Œè´Ÿè´£æ¸²æŸ“é”™è¯¯ï¼Œåˆ†å·¥æ˜ç¡®ã€‚</p>
<h4 data-id="heading-23">5.2.1 React é”™è¯¯è¾¹ç•Œç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  state = { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span> };

  <span class="hljs-comment">// æ•è·å­ç»„ä»¶æ¸²æŸ“é”™è¯¯</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getDerivedStateFromError</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> }; <span class="hljs-comment">// æ›´æ–°çŠ¶æ€ï¼Œæ˜¾ç¤ºé™çº§ UI</span>
  }

  <span class="hljs-comment">// æ—¥å¿—ä¸ŠæŠ¥</span>
  <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error, errorInfo</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç»„ä»¶æ¸²æŸ“é”™è¯¯ï¼š'</span>, error, errorInfo);
    <span class="hljs-title function_">logErrorToServer</span>({ error, errorInfo });
  }

  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">hasError</span>) {
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç»„ä»¶åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>; <span class="hljs-comment">// é™çº§ UI</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ï¼šåŒ…è£¹å¯èƒ½å‡ºé”™çš„ç»„ä»¶</span>
&lt;<span class="hljs-title class_">ErrorBoundary</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> <span class="hljs-attr">userId</span>=<span class="hljs-string">{123}</span> /&gt;</span></span>
&lt;/<span class="hljs-title class_">ErrorBoundary</span>&gt;
</code></pre>
<h2 data-id="heading-24">å…­ã€æ€»ç»“</h2>
<h3 data-id="heading-25">6.1 æ ¸å¿ƒå®šä½</h3>
<p><code>try...catch</code>Â æ˜¯Â <strong>JavaScript é”™è¯¯å¤„ç†çš„ â€œåŸºç¡€è®¾æ–½â€</strong> ï¼Œè€Œé â€œæœ€ä¼˜è§£â€ï¼š</p>
<ul>
<li>åŸºç¡€ä½œç”¨ï¼šæ•è·åŒæ­¥é”™è¯¯ï¼Œé…åˆÂ <code>async/await</code>Â æ•è· Promise å¼‚æ­¥é”™è¯¯ï¼›</li>
<li>ç”Ÿæ€è§’è‰²ï¼šä¸Â <code>Promise.catch()</code>ã€å…¨å±€ç›‘å¬ã€æ¡†æ¶é”™è¯¯è¾¹ç•Œé…åˆï¼Œå½¢æˆ â€œå¤šå±‚é˜²æŠ¤â€ï¼›</li>
<li>ä»·å€¼æ ¸å¿ƒï¼šä¿éšœç¨‹åºå¯æ§æ€§ï¼Œå®ç°ä¼˜é›…é™çº§ä¸é”™è¯¯ä¸ŠæŠ¥ã€‚</li>
</ul>
<h3 data-id="heading-26">6.2 æœ€ä½³åº”ç”¨</h3>
<ol>
<li>
<p><strong>ç²¾å‡†æ•è·ï¼Œé¿å…è¿‡åº¦åŒ…è£¹</strong>ï¼šåªåŒ…è£¹ â€œé¢„æœŸå¯èƒ½å‡ºé”™çš„ä»£ç æ®µâ€ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€JSON è§£æï¼‰ï¼Œä¸åŒ…è£¹å¤§æ®µé€»è¾‘ï¼›</p>
</li>
<li>
<p><strong>ä¿ç•™é”™è¯¯ä¸Šä¸‹æ–‡</strong>ï¼šæ•è·é”™è¯¯åéœ€Â <code>throw error</code>Â é‡æ–°æŠ›å‡ºï¼ˆéœ€ä¸Šå±‚å¤„ç†æ—¶ï¼‰ï¼Œé¿å…ä¸¢å¤±é”™è¯¯æ ˆä¿¡æ¯ï¼›</p>
</li>
<li>
<p><strong>ç»“åˆåœºæ™¯é€‰æ‹©å¤„ç†æ–¹å¼</strong>ï¼š</p>
<ul>
<li>åŒæ­¥ä»£ç ï¼šç›´æ¥ç”¨Â <code>try...catch</code>ï¼›</li>
<li>çº¯ Promise å¼‚æ­¥ï¼šç”¨Â <code>.catch()</code>ï¼›</li>
<li><code>async/await</code>Â åœºæ™¯ï¼šç”¨Â <code>try...catch</code>Â ç»Ÿä¸€å¤„ç†ï¼›</li>
<li>å¹¶è¡Œä»»åŠ¡ï¼šç”¨Â <code>Promise.allSettled</code>Â é…åˆÂ <code>try...catch</code>Â éš”ç¦»é”™è¯¯ï¼›</li>
</ul>
</li>
<li>
<p><strong>è¡¥å……é”™è¯¯ä¸Šä¸‹æ–‡</strong>ï¼šæŠ›å‡ºé”™è¯¯æ—¶æ·»åŠ ä¸šåŠ¡ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ· IDã€è®¢å•å·ï¼‰ï¼Œä¾¿äºæ’æŸ¥ï¼›</p>
</li>
<li>
<p><strong>å…œåº•æœºåˆ¶ä¸å¯å°‘</strong>ï¼šå…¨å±€é”™è¯¯ç›‘å¬ + æ¡†æ¶é”™è¯¯è¾¹ç•Œï¼Œè¦†ç›–Â <code>try...catch</code>Â æœªå¤„ç†çš„åœºæ™¯ã€‚</p>
</li>
</ol>
<h2 data-id="heading-27">ä¸ƒã€å®é™…åº”ç”¨åœºæ™¯ä¸¾ä¾‹</h2>
<h3 data-id="heading-28">1. åŒæ­¥ä»£ç åœºæ™¯ï¼ˆåŸºç¡€ï¼‰</h3>
<p><strong>é€‚ç”¨</strong>ï¼šJSON è§£æã€å˜é‡ç±»å‹è½¬æ¢ã€åŒæ­¥å‡½æ•°è°ƒç”¨ç­‰ã€‚<strong>æ¨¡æ¿</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">function syncOperation(<span class="hljs-keyword">data</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å¯èƒ½å‡ºé”™çš„åŒæ­¥æ“ä½œï¼ˆå¦‚è§£æã€ç±»å‹è½¬æ¢ï¼‰</span>
    <span class="hljs-keyword">const</span> parsed = JSON.parse(<span class="hljs-keyword">data</span>); <span class="hljs-comment">// å¯èƒ½æŠ›é”™</span>
    <span class="hljs-keyword">const</span> result = parsed.value.toUpperCase(); <span class="hljs-comment">// å¯èƒ½æŠ›é”™ï¼ˆè‹¥ parsed.value ä¸å­˜åœ¨ï¼‰</span>
    <span class="hljs-keyword">return</span> result;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// 1. è¡¥å……ä¸Šä¸‹æ–‡ï¼ˆå¿…åšï¼‰</span>
    error.context = { <span class="hljs-keyword">data</span>, operation: <span class="hljs-string">'syncOperation'</span> };
    <span class="hljs-comment">// 2. å¯å¤„ç†åˆ™è¡¥æ•‘ï¼Œå¦åˆ™æŠ›å‡º</span>
    <span class="hljs-keyword">if</span> (error.name === <span class="hljs-string">'SyntaxError'</span>) {
      console.warn(<span class="hljs-string">'æ•°æ®æ ¼å¼é”™è¯¯ï¼Œä½¿ç”¨é»˜è®¤å€¼'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-string">'default'</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// ä¼ é€’ç»™ä¸Šå±‚å¤„ç†</span>
    }
  }
}
</code></pre>
<h3 data-id="heading-29">2. DOM æ“ä½œåœºæ™¯</h3>
<p><strong>é€‚ç”¨</strong>ï¼šåŠ¨æ€åˆ›å»ºå…ƒç´ ã€ä¿®æ”¹ DOM å±æ€§ã€äº‹ä»¶ç»‘å®šç­‰ï¼ˆæ˜“å› å…ƒç´ ä¸å­˜åœ¨ / æƒé™é—®é¢˜å‡ºé”™ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateDOM</span>(<span class="hljs-params">elementId, content</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(elementId);
    <span class="hljs-keyword">if</span> (!el) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`å…ƒç´  <span class="hljs-subst">${elementId}</span> ä¸å­˜åœ¨`</span>); <span class="hljs-comment">// ä¸»åŠ¨æŠ›é”™ï¼Œæ˜ç¡®ä¸Šä¸‹æ–‡</span>
    
    <span class="hljs-comment">// å¯èƒ½å‡ºé”™çš„ DOM æ“ä½œ</span>
    el.<span class="hljs-property">textContent</span> = content; 
    el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>); <span class="hljs-comment">// è‹¥ classList ä¸æ”¯æŒï¼ˆææ—§æµè§ˆå™¨ï¼‰ä¼šæŠ›é”™</span>
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'DOM æ›´æ–°å¤±è´¥ï¼š'</span>, error.<span class="hljs-property">message</span>);
    <span class="hljs-comment">// é™çº§å¤„ç†ï¼šæ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œä¸å½±å“é¡µé¢å…¶ä»–åŠŸèƒ½</span>
    <span class="hljs-keyword">const</span> errorEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    errorEl.<span class="hljs-property">className</span> = <span class="hljs-string">'error'</span>;
    errorEl.<span class="hljs-property">textContent</span> = <span class="hljs-string">`åŠ è½½å¤±è´¥ï¼š<span class="hljs-subst">${error.message}</span>`</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(errorEl);
  }
}
</code></pre>
<h3 data-id="heading-30">3. Node.js åŒæ­¥ API åœºæ™¯</h3>
<p><strong>é€‚ç”¨</strong>ï¼šæ–‡ä»¶è¯»å†™ï¼ˆ<code>fs.readFileSync</code>ï¼‰ã€è·¯å¾„å¤„ç†ï¼ˆ<code>path.resolve</code>ï¼‰ç­‰åŒæ­¥æ“ä½œï¼ˆå‡ºé”™ä¼šå¯¼è‡´è¿›ç¨‹å´©æºƒï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">readLocalFile</span>(<span class="hljs-params">filePath</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> fullPath = path.<span class="hljs-title function_">resolve</span>(filePath); <span class="hljs-comment">// è·¯å¾„è§£æå¯èƒ½æŠ›é”™</span>
    <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(fullPath, <span class="hljs-string">'utf8'</span>); <span class="hljs-comment">// æ–‡ä»¶ä¸å­˜åœ¨/æƒé™ä¸è¶³ä¼šæŠ›é”™</span>
    <span class="hljs-keyword">return</span> content;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// åŒºåˆ†é”™è¯¯ç±»å‹ï¼Œé’ˆå¯¹æ€§å¤„ç†</span>
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> === <span class="hljs-string">'ENOENT'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`æ–‡ä»¶ä¸å­˜åœ¨ï¼š<span class="hljs-subst">${filePath}</span>ï¼Œè¿”å›ç©ºå†…å®¹`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> === <span class="hljs-string">'EACCES'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`æƒé™ä¸è¶³ï¼Œæ— æ³•è¯»å– <span class="hljs-subst">${filePath}</span>`</span>);
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ–‡ä»¶è®¿é—®æƒé™ä¸è¶³ï¼Œè¯·æ£€æŸ¥é…ç½®'</span>); <span class="hljs-comment">// ä¸Šå±‚éœ€å¤„ç†çš„ä¸¥é‡é”™è¯¯</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> error;
    }
  }
}
</code></pre>
<h3 data-id="heading-31">4. å¼‚æ­¥åœºæ™¯ï¼ˆ<code>Promise</code>Â +Â <code>async/await</code>ï¼‰</h3>
<h4 data-id="heading-32">4.1 å•å¼‚æ­¥ä»»åŠ¡ï¼ˆ<code>async/await</code>ï¼‰</h4>
<p><strong>é€‚ç”¨</strong>ï¼šå•ä¸ªç½‘ç»œè¯·æ±‚ã€å¼‚æ­¥ API è°ƒç”¨ï¼ˆå¦‚Â <code>axios</code>Â è¯·æ±‚ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchSingleData</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(url);
    <span class="hljs-comment">// ä¸»åŠ¨æ ¡éªŒä¸šåŠ¡é”™è¯¯ï¼ˆå¦‚æ¥å£è¿”å› code é 0ï¼‰</span>
    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">data</span>.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`ä¸šåŠ¡é”™è¯¯ï¼š<span class="hljs-subst">${response.data.msg}</span>`</span>);
    }
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// åŒºåˆ†ç½‘ç»œé”™è¯¯å’Œä¸šåŠ¡é”™è¯¯</span>
    <span class="hljs-keyword">let</span> errorMsg;
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>) {
      <span class="hljs-comment">// HTTP é”™è¯¯ï¼ˆ404/500 ç­‰ï¼‰</span>
      errorMsg = <span class="hljs-string">`è¯·æ±‚å¤±è´¥[<span class="hljs-subst">${error.response.status}</span>]ï¼š<span class="hljs-subst">${url}</span>`</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">request</span>) {
      <span class="hljs-comment">// ç½‘ç»œé”™è¯¯ï¼ˆæ— å“åº”ï¼‰</span>
      errorMsg = <span class="hljs-string">`ç½‘ç»œé”™è¯¯ï¼Œæ— æ³•è¿æ¥ï¼š<span class="hljs-subst">${url}</span>`</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// ä¸šåŠ¡é”™è¯¯æˆ–å…¶ä»–</span>
      errorMsg = error.<span class="hljs-property">message</span>;
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(errorMsg);
    <span class="hljs-comment">// éè‡´å‘½é”™è¯¯å¯è¿”å›é»˜è®¤å€¼ï¼Œé¿å…æµç¨‹ä¸­æ–­</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; 
  }
}
</code></pre>
<h4 data-id="heading-33">4.2 å¤šä¾èµ–å¼‚æ­¥ä»»åŠ¡ï¼ˆä¸²è”ï¼‰</h4>
<p><strong>é€‚ç”¨</strong>ï¼šä»»åŠ¡ A â†’ ä»»åŠ¡ Bï¼ˆä¾èµ– A çš„ç»“æœï¼‰â†’ ä»»åŠ¡ Cï¼ˆä¾èµ– B çš„ç»“æœï¼‰ã€‚<strong>æ¨¡æ¿</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">taskA</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> } <span class="hljs-comment">// è¿”å› Promise</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">taskB</span>(<span class="hljs-params">resultA</span>) { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">taskC</span>(<span class="hljs-params">resultB</span>) { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">runTasks</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> resA = <span class="hljs-keyword">await</span> <span class="hljs-title function_">taskA</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»»åŠ¡ A å®Œæˆ'</span>);
    
    <span class="hljs-keyword">const</span> resB = <span class="hljs-keyword">await</span> <span class="hljs-title function_">taskB</span>(resA);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»»åŠ¡ B å®Œæˆ'</span>);
    
    <span class="hljs-keyword">const</span> resC = <span class="hljs-keyword">await</span> <span class="hljs-title function_">taskC</span>(resB);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰ä»»åŠ¡å®Œæˆ'</span>);
    <span class="hljs-keyword">return</span> resC;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// ä»»ä½•ä¸€æ­¥å¤±è´¥éƒ½ä¼šä¸­æ–­ï¼Œç»Ÿä¸€å¤„ç†</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ä»»åŠ¡ä¸­æ–­ï¼š<span class="hljs-subst">${error.message}</span>`</span>);
    <span class="hljs-comment">// è®°å½•ä¸­æ–­ä½ç½®ï¼ˆé€šè¿‡ error ä¸Šä¸‹æ–‡ï¼‰</span>
    error.<span class="hljs-property">task</span> = error.<span class="hljs-property">task</span> || <span class="hljs-string">'æœªçŸ¥ä»»åŠ¡'</span>; <span class="hljs-comment">// å¯åœ¨å­ä»»åŠ¡ä¸­æ·»åŠ  task å­—æ®µ</span>
    <span class="hljs-title function_">logToMonitor</span>(error); <span class="hljs-comment">// ä¸ŠæŠ¥ç›‘æ§</span>
    <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// å…è®¸ä¸Šå±‚é‡è¯•</span>
  }
}
</code></pre>
<h4 data-id="heading-34">4.3 å¤šç‹¬ç«‹å¼‚æ­¥ä»»åŠ¡ï¼ˆå¹¶è¡Œï¼‰</h4>
<p><strong>é€‚ç”¨</strong>ï¼šå¤šä¸ªæ— ä¾èµ–çš„å¼‚æ­¥ä»»åŠ¡ï¼ˆå¦‚åŒæ—¶æ¸²æŸ“å¤šä¸ªç»„ä»¶ï¼‰ï¼Œéœ€éš”ç¦»é”™è¯¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">componentA</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">componentB</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">componentC</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderAll</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç”¨ Promise.allSettled ç¡®ä¿æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ˆæ— è®ºæˆåŠŸå¤±è´¥ï¼‰</span>
  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([
    <span class="hljs-title function_">componentA</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> ({ <span class="hljs-attr">error</span>: err, <span class="hljs-attr">component</span>: <span class="hljs-string">'A'</span> })),
    <span class="hljs-title function_">componentB</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> ({ <span class="hljs-attr">error</span>: err, <span class="hljs-attr">component</span>: <span class="hljs-string">'B'</span> })),
    <span class="hljs-title function_">componentC</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> ({ <span class="hljs-attr">error</span>: err, <span class="hljs-attr">component</span>: <span class="hljs-string">'C'</span> }))
  ]);

  <span class="hljs-comment">// å¤„ç†å¤±è´¥ç»“æœ</span>
  results.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">value</span>?.<span class="hljs-property">error</span>) { <span class="hljs-comment">// æ•è·åˆ°çš„é”™è¯¯</span>
      <span class="hljs-keyword">const</span> { error, component } = result.<span class="hljs-property">value</span>;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ç»„ä»¶ <span class="hljs-subst">${component}</span> å¤±è´¥ï¼š`</span>, error.<span class="hljs-property">message</span>);
      <span class="hljs-comment">// å•ç‹¬æ ‡è®°å¤±è´¥ç»„ä»¶ï¼Œä¸å½±å“å…¶ä»–</span>
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">`comp-<span class="hljs-subst">${component}</span>`</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'failed'</span>);
    }
  });
}
</code></pre>
<h3 data-id="heading-35">5. ç¬¬ä¸‰æ–¹åº“è°ƒç”¨åœºæ™¯</h3>
<p><strong>é€‚ç”¨</strong>ï¼šè°ƒç”¨å¤–éƒ¨åº“ï¼ˆå¦‚Â <code>moment</code>ã€<code>lodash</code>ï¼‰çš„åŒæ­¥æ–¹æ³•ï¼ˆå¯èƒ½å› å‚æ•°é”™è¯¯æŠ›é”™ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> moment <span class="hljs-keyword">from</span> <span class="hljs-string">'moment'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">formatWithLibrary</span>(<span class="hljs-params">dateInput</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// ç¬¬ä¸‰æ–¹åº“å¯èƒ½å¯¹æ— æ•ˆå‚æ•°æŠ›é”™ï¼ˆå¦‚ moment(null) æ ¼å¼åŒ–ï¼‰</span>
    <span class="hljs-keyword">const</span> formatted = <span class="hljs-title function_">moment</span>(dateInput).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm'</span>);
    <span class="hljs-comment">// ä¸»åŠ¨æ ¡éªŒåº“è¿”å›çš„å¼‚å¸¸ç»“æœï¼ˆå¦‚ moment æ— æ•ˆæ—¥æœŸè¿”å› 'Invalid date'ï¼‰</span>
    <span class="hljs-keyword">if</span> (formatted === <span class="hljs-string">'Invalid date'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`æ— æ•ˆæ—¥æœŸï¼š<span class="hljs-subst">${dateInput}</span>`</span>);
    }
    <span class="hljs-keyword">return</span> formatted;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ ¼å¼åŒ–å¤±è´¥ï¼š'</span>, error.<span class="hljs-property">message</span>);
    <span class="hljs-comment">// é™çº§ä¸ºåŸç”Ÿæ–¹æ³•</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(dateInput).<span class="hljs-title function_">toLocaleString</span>() || <span class="hljs-string">'æ— æ³•è§£æçš„æ—¥æœŸ'</span>;
  }
}
</code></pre>
<h3 data-id="heading-36">6. æ¡†æ¶åœºæ™¯ï¼ˆä»¥ React ä¸ºä¾‹ï¼‰</h3>
<p><strong>é€‚ç”¨</strong>ï¼šç»„ä»¶é€»è¾‘é”™è¯¯ï¼ˆ<code>try...catch</code>ï¼‰ä¸æ¸²æŸ“é”™è¯¯ï¼ˆé”™è¯¯è¾¹ç•Œï¼‰åˆ†å·¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ç»„ä»¶å†…é€»è¾‘é”™è¯¯ç”¨ try...catch</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params">{ userId }</span>) {
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadUser</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api/user/<span class="hljs-subst">${userId}</span>`</span>);
        <span class="hljs-title function_">setUser</span>(res.<span class="hljs-property">data</span>);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åŠ è½½ç”¨æˆ·å¤±è´¥ï¼š'</span>, error);
        <span class="hljs-title function_">setUser</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'ç”¨æˆ·ä¿¡æ¯åŠ è½½å¤±è´¥'</span> }); <span class="hljs-comment">// çŠ¶æ€é™çº§</span>
      }
    }
    <span class="hljs-title function_">loadUser</span>();
  }, [userId]);

  <span class="hljs-comment">// 2. æ¸²æŸ“é”™è¯¯äº¤ç»™é”™è¯¯è¾¹ç•Œå¤„ç†ï¼ˆä¸ç›´æ¥ç”¨ try...catch åŒ…è£¹ JSXï¼‰</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {user?.error ? <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{user.error}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// é”™è¯¯è¾¹ç•Œç»„ä»¶ï¼ˆå¤„ç†æ¸²æŸ“é”™è¯¯ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-comment">// ä½¿ç”¨ï¼šé”™è¯¯è¾¹ç•ŒåŒ…è£¹å¯èƒ½æ¸²æŸ“å¤±è´¥çš„ç»„ä»¶</span>
&lt;<span class="hljs-title class_">ErrorBoundary</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> <span class="hljs-attr">userId</span>=<span class="hljs-string">{123}</span> /&gt;</span></span>
&lt;/<span class="hljs-title class_">ErrorBoundary</span>&gt;
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Perfetto ç³»åˆ— 9 - CPU ä¿¡æ¯è§£è¯»]]></title>    <link>https://juejin.cn/post/7572480736362397702</link>    <guid>https://juejin.cn/post/7572480736362397702</guid>    <pubDate>2025-11-16T13:35:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572480736362397702" data-draft-id="7572481101711540278" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Perfetto ç³»åˆ— 9 - CPU ä¿¡æ¯è§£è¯»"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-16T13:35:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gracker"/> <meta itemprop="url" content="https://juejin.cn/user/1816846860560749"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Perfetto ç³»åˆ— 9 - CPU ä¿¡æ¯è§£è¯»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1816846860560749/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gracker
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:35:18.000Z" title="Sun Nov 16 2025 13:35:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡æ˜¯ Perfetto ç³»åˆ—çš„ç¬¬ä¹ç¯‡æ–‡ç« ï¼Œä¸»é¢˜æ˜¯ Perfetto ä¸­çš„ CPU ä¿¡æ¯åˆ†æã€‚Perfetto æä¾›äº†è¿œè¶… Systrace çš„æ•°æ®å¯è§†åŒ–ä¸åˆ†æèƒ½åŠ›ï¼Œç†è§£ CPU ç›¸å…³ä¿¡æ¯æ˜¯å®šä½æ€§èƒ½ç“¶é¢ˆã€åˆ†æåŠŸè€—é—®é¢˜çš„åŸºç¡€ã€‚</p>
<p>æœ¬ç³»åˆ—çš„ç›®æ ‡ï¼Œå°±æ˜¯é€šè¿‡ Perfetto è¿™ä¸ªå·¥å…·ï¼Œä»ä¸€ä¸ªå…¨æ–°çš„å›¾å½¢åŒ–è§†è§’ï¼Œæ¥å®¡è§† Android ç³»ç»Ÿçš„æ•´ä½“è¿è¡Œï¼ŒåŒæ—¶ä¹Ÿæä¾›ä¸€ä¸ªå­¦ä¹  Framework çš„æ–°é€”å¾„ã€‚æˆ–è®¸ä½ å·²ç»è¯»è¿‡å¾ˆå¤šæºç åˆ†æçš„æ–‡ç« ï¼Œä½†æ€»æ˜¯å¯¹ç¹æ‚çš„è°ƒç”¨é“¾æ„Ÿåˆ°å›°æƒ‘ï¼Œæˆ–è€…è®°ä¸ä½å…·ä½“çš„æ‰§è¡Œæµç¨‹ã€‚é‚£ä¹ˆé€šè¿‡ Perfettoï¼Œå°†è¿™äº›æµç¨‹å¯è§†åŒ–ï¼Œä½ å¯èƒ½ä¼šå¯¹ç³»ç»Ÿæœ‰æ›´æ·±å…¥ã€æ›´ç›´è§‚çš„ç†è§£ã€‚</p>

<h3 data-id="heading-0">æœ¬æ–‡ç›®å½•</h3>
<ul>
<li><a href="#series" title="#series">Perfetto ç³»åˆ—æ–‡ç« </a></li>
<li><a href="#overview" title="#overview">Perfetto ä¸­çš„ CPU ä¿¡æ¯æ¦‚è§ˆ</a></li>
<li><a href="#traceconfig" title="#traceconfig">æŠ“å– CPU ä¿¡æ¯æ‰€éœ€è¦çš„ Trace Config</a></li>
<li><a href="#biglittle" title="#biglittle">CPU æ ¸å¿ƒæ¶æ„ï¼šbig.LITTLE</a></li>
<li><a href="#scheduling" title="#scheduling">CPU è°ƒåº¦</a></li>
<li><a href="#frequency" title="#frequency">CPU Frequency (CPU é¢‘ç‡) æ·±åº¦è§£æ</a></li>
<li><a href="#eas" title="#eas">Linux å†…æ ¸è°ƒåº¦ç­–ç•¥ï¼šé€‰æ ¸ä¸è¿ç§»</a></li>
<li><a href="#practices-sql" title="#practices-sql">å®æˆ˜ä¸ SQL</a></li>
<li><a href="#summary" title="#summary">æ€»ç»“</a></li>
</ul>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-series" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-1">Perfetto ç³»åˆ—æ–‡ç« </h3>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F03%2F27%2FAndroid-Perfetto-101%2F%23%2FPerfetto-%25E7%25B3%25BB%25E5%2588%2597%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="https://www.androidperformance.com/2024/03/27/Android-Perfetto-101/#/Perfetto-%E7%B3%BB%E5%88%97%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ—ç›®å½•</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-01-What-is-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-01-What-is-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 1ï¼šPerfetto å·¥å…·ç®€ä»‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-02-how-to-get-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-02-how-to-get-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 2ï¼šPerfetto Trace æŠ“å–</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-03-how-to-analysis-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-03-how-to-analysis-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 3ï¼šç†Ÿæ‚‰ Perfetto View</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F02%2F08%2FAndroid-Perfetto-04-Open-Big-Trace-With-Command-Line%2F" target="_blank" title="https://www.androidperformance.com/2025/02/08/Android-Perfetto-04-Open-Big-Trace-With-Command-Line/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 4ï¼šä½¿ç”¨å‘½ä»¤è¡Œåœ¨æœ¬åœ°æ‰“å¼€è¶…å¤§ Trace</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F03%2F26%2FAndroid-Perfetto-05-Chorergrapher%2F" target="_blank" title="https://www.androidperformance.com/2025/03/26/Android-Perfetto-05-Chorergrapher/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 5ï¼šAndroid App åŸºäº Choreographer çš„æ¸²æŸ“æµç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F04%2F26%2FAndroid-Perfetto-06-Why-120Hz%2F" target="_blank" title="https://www.androidperformance.com/2025/04/26/Android-Perfetto-06-Why-120Hz/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 6ï¼šä¸ºä»€ä¹ˆæ˜¯ 120Hzï¼Ÿé«˜åˆ·æ–°ç‡çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2025%2F08%2F02%2FAndroid-Perfetto-07-MainThread-And-RenderThread%2F" target="_blank" title="https://androidperformance.com/2025/08/02/Android-Perfetto-07-MainThread-And-RenderThread/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 7 - MainThread å’Œ RenderThread è§£è¯»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2025%2F08%2F05%2FAndroid-Perfetto-08-Vsync%2F" target="_blank" title="https://androidperformance.com/2025/08/05/Android-Perfetto-08-Vsync/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 8ï¼šæ·±å…¥ç†è§£ Vsync æœºåˆ¶ä¸æ€§èƒ½åˆ†æ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F11%2F12%2FAndroid-Perfetto-09-CPU%2F" target="_blank" title="https://www.androidperformance.com/2025/11/12/Android-Perfetto-09-CPU/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 9 - CPU ä¿¡æ¯è§£è¯»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1oi82efE4D%2F%3Fvd_source%3D0c6d2191e785de0a36dc21a9da7e664e" target="_blank" title="https://www.bilibili.com/video/BV1oi82efE4D/?vd_source=0c6d2191e785de0a36dc21a9da7e664e" ref="nofollow noopener noreferrer">è§†é¢‘(Bç«™) - Android Perfetto åŸºç¡€å’Œæ¡ˆä¾‹åˆ†äº«</a></li>
</ol>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-overview" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-2">Perfetto ä¸­çš„ CPU ä¿¡æ¯æ¦‚è§ˆ</h3>
<p>åœ¨ Perfetto UI ä¸­ï¼ŒCPU ç›¸å…³çš„ä¿¡æ¯é€šå¸¸åˆ†ç»„ç½®äºé¡¶éƒ¨ï¼Œæ˜¯æ€§èƒ½åˆ†æçš„èµ·ç‚¹ã€‚ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒè½¨é“ï¼š</p>
<ul>
<li><strong>CPU Scheduling (CPU è°ƒåº¦)</strong> : æ˜¾ç¤ºåœ¨æ¯ä¸ªæ—¶é—´ç‚¹ï¼Œå„ä¸ª CPU æ ¸å¿ƒä¸Šæ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ã€‚</li>
<li><strong>CPU Frequency (CPU é¢‘ç‡)</strong> : æ˜¾ç¤ºæ¯ä¸ª CPU æ ¸å¿ƒæˆ–æ ¸å¿ƒç°‡çš„é¢‘ç‡å˜åŒ–æƒ…å†µã€‚</li>
<li><strong>CPU Idle (CPU ç©ºé—²çŠ¶æ€)</strong> : æ˜¾ç¤ºæ¯ä¸ª CPU æ ¸å¿ƒè¿›å…¥çš„ä½åŠŸè€—çŠ¶æ€ (C-States)ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6163c941d386468d98b0cd451b5fb4d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=VEkmaxDJy1gP1H2fuCdZiEovHO8%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡åˆ†æ CPU ç›¸å…³çš„ä¿¡æ¯ï¼Œå¯ä»¥è§£ç­”ä»¥ä¸‹å…³é”®æ€§èƒ½é—®é¢˜ï¼Œ æˆ–è€…è¿›è¡Œç«å“åˆ†æï¼š</p>
<ul>
<li>åº”ç”¨ä¸»çº¿ç¨‹ä¸ºä½•æ²¡æœ‰æ‰§è¡Œï¼Ÿæ˜¯å¦è¢«å…¶ä»–çº¿ç¨‹æŠ¢å ï¼Ÿ</li>
<li>æŸä¸ªä»»åŠ¡æ‰§è¡Œç¼“æ…¢çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å¦è¢«è°ƒåº¦åˆ°äº†ä½æ€§èƒ½æ ¸å¿ƒï¼Ÿ</li>
<li>åœ¨ç‰¹å®šåœºæ™¯ä¸‹ï¼ŒCPU é¢‘ç‡æ˜¯å¦å—é™ï¼Ÿ</li>
<li>åº”ç”¨åœ¨åå°æ—¶ï¼ŒCPU æ˜¯å¦æœ‰æ•ˆè¿›å…¥äº†æ·±åº¦ç¡çœ çŠ¶æ€ï¼Ÿ</li>
</ul>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-traceconfig" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-3">æŠ“å– CPU ä¿¡æ¯æ‰€éœ€è¦çš„ Trace Config</h3>
<p>ä¸ºäº†é‡‡é›†åˆ°æœ¬æ–‡åˆ†ææ‰€éœ€çš„æ‰€æœ‰ CPU æ•°æ®ï¼Œä½ éœ€è¦ä¸€ä¸ªæ­£ç¡®çš„ <code>TraceConfig</code>ã€‚ä¸æ­£ç¡®çš„é…ç½®ä¼šå¯¼è‡´æŸäº›è½¨é“ï¼ˆå¦‚ CPU é¢‘ç‡ï¼‰æˆ–æŸäº›å†…æ ¸äº‹ä»¶ï¼ˆå¦‚å”¤é†’äº‹ä»¶ï¼‰ä¸¢å¤±ã€‚ä»¥ä¸‹æ˜¯ Perfetto å®˜æ–¹æ–‡æ¡£æ¨èçš„ã€ç”¨äºé€šç”¨ CPU åˆ†æçš„é…ç½®ã€‚ä½ å¯ä»¥å°†å…¶æ·»åŠ åˆ°ä½ çš„ Perfetto çš„ Config ä¸­ï¼ŒæŠ“ Trace çš„æ—¶å€™ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">data_sources</span> {
  <span class="hljs-string">config</span> {
    <span class="hljs-attr">name:</span> <span class="hljs-string">"linux.ftrace"</span>
    <span class="hljs-string">ftrace_config</span> {
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"sched/sched_process_exit"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"sched/sched_process_free"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"task/task_newtask"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"task/task_rename"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"sched/sched_switch"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"power/suspend_resume"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"sched/sched_blocked_reason"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"sched/sched_wakeup"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"sched/sched_wakeup_new"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"sched/sched_waking"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"sched/sched_process_exit"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"sched/sched_process_free"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"task/task_newtask"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"task/task_rename"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"power/cpu_frequency"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"power/cpu_idle"</span>
      <span class="hljs-attr">ftrace_events:</span> <span class="hljs-string">"power/suspend_resume"</span>
      <span class="hljs-attr">symbolize_ksyms:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">disable_generic_events:</span> <span class="hljs-literal">true</span>
    }
  }
}
<span class="hljs-string">data_sources</span> {
  <span class="hljs-string">config</span> {
    <span class="hljs-attr">name:</span> <span class="hljs-string">"linux.process_stats"</span>
    <span class="hljs-string">process_stats_config</span> {
      <span class="hljs-attr">scan_all_processes_on_start:</span> <span class="hljs-literal">true</span>
    }
  }
}
<span class="hljs-string">data_sources</span> {
  <span class="hljs-string">config</span> {
    <span class="hljs-attr">name:</span> <span class="hljs-string">"linux.sys_stats"</span>
    <span class="hljs-string">sys_stats_config</span> {
      <span class="hljs-attr">cpufreq_period_ms:</span> <span class="hljs-number">250</span>
    }
  }
}
</code></pre>
<p>è¿™ä¸ªé…ç½®å¯ç”¨äº†åŒ…æ‹¬ <code>sched</code>ï¼ˆè°ƒåº¦ï¼‰ã€<code>power</code>ï¼ˆé¢‘ç‡å’Œç©ºé—²ï¼‰ã€<code>task</code>ï¼ˆä»»åŠ¡ç”Ÿå‘½å‘¨æœŸï¼‰åœ¨å†…çš„å…³é”® ftrace äº‹ä»¶ï¼Œæ˜¯è¿›è¡Œæ·±åº¦ CPU åˆ†æçš„åŸºç¡€ã€‚</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-biglittle" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-4">CPU æ ¸å¿ƒæ¶æ„ï¼šbig.LITTLE</h3>
<p>åœ¨æ·±å…¥åˆ†æå‰ï¼Œå¿…é¡»äº†è§£ç°ä»£æ‰‹æœº SoC çš„ CPU æ ¸å¿ƒæ¶æ„ã€‚ç›®å‰ä¸»æµçš„ç§»åŠ¨å¤„ç†å™¨æ™®éé‡‡ç”¨ <code>big.LITTLE</code> å¼‚æ„å¤šæ ¸æ¶æ„ï¼Œæˆ–å…¶å˜ç§ï¼Œå¦‚ <code>big.Medium.LITTLE</code>ï¼ˆå¤§ä¸­å°æ ¸ï¼‰ã€‚</p>
<ul>
<li><strong>å°æ ¸ (LITTLE cores)</strong> : é’ˆå¯¹ä½åŠŸè€—è®¾è®¡ï¼Œé¢‘ç‡è¾ƒä½ï¼Œç”¨äºå¤„ç†åå°ä»»åŠ¡ã€è½»é‡çº§è®¡ç®—ï¼Œä»¥ä¿è¯ç»­èˆªã€‚</li>
<li><strong>å¤§æ ¸ (big cores)</strong> : é’ˆå¯¹é«˜æ€§èƒ½è®¾è®¡ï¼Œé¢‘ç‡æ›´é«˜ï¼ŒåŠŸè€—ä¹Ÿæ›´å¤§ï¼Œç”¨äºå¤„ç†ç”¨æˆ·äº¤äº’ã€æ¸¸æˆã€åº”ç”¨å¯åŠ¨ç­‰é‡è´Ÿè½½åœºæ™¯ã€‚</li>
<li><strong>è¶…å¤§æ ¸ (Prime Core)</strong> : éƒ¨åˆ†æ——èˆ°èŠ¯ç‰‡ä¼šæœ‰ä¸€ä¸ªé¢‘ç‡æé«˜çš„è¶…å¤§æ ¸ï¼Œç”¨äºåº”å¯¹æœ€ä¸¥è‹›çš„å•æ ¸æ€§èƒ½æŒ‘æˆ˜ã€‚</li>
</ul>
<p>åœ¨ Perfetto çš„ CPU è½¨é“ä¸­ï¼Œæ ¸å¿ƒé€šå¸¸ä» 0 å¼€å§‹ç¼–å·ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå…¸å‹çš„å…«æ ¸å¤„ç†å™¨ä¸­ï¼Œ<code>CPU 0-3</code> å¯èƒ½ä¸ºå°æ ¸ï¼Œ<code>CPU 4-6</code> ä¸ºå¤§æ ¸ï¼Œ<code>CPU 7</code> ä¸ºè¶…å¤§æ ¸ã€‚<strong>è¯†åˆ«æ ¸å¿ƒç±»å‹å¯¹äºæ€§èƒ½åˆ†æè‡³å…³é‡è¦</strong>ï¼šä¸€ä¸ªè®¡ç®—å¯†é›†å‹ä»»åŠ¡å¦‚æœé•¿æ—¶é—´è¿è¡Œåœ¨å°æ ¸ä¸Šï¼Œå…¶è€—æ—¶å¿…ç„¶è¿œè¶…é¢„æœŸã€‚åˆ†ææ—¶ï¼Œéœ€è¦å°†çº¿ç¨‹çš„è¿è¡Œæ ¸å¿ƒä¸å…¶ä»»åŠ¡å±æ€§è¿›è¡ŒåŒ¹é…ï¼Œä»¥åˆ¤æ–­è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰çš„è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„ 4+4 çš„ CPU ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a53fa715e1f34759808770552a520257~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=juThztbt%2BYpyMnpUdyANBsIUzrs%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„ 4+3+1 çš„ CPU ï¼ˆ MTK çš„å¤©ç‘ 9500ã€9400 ï¼Œä»¥åŠé«˜é€šéªé¾™é«˜ç«¯ç³»åˆ—ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d32564cf94f94f8882d847837d2c8e81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=wr1DXwqHNKU1NZ8gIuJKLJMboTs%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ª 5+2 çš„ CPU ï¼ˆé«˜é€š 8Elite 1 é˜‰å‰²ç‰ˆï¼Œ8Elite 1 çš„æ ‡å‡†ç‰ˆ 0-5 æ˜¯å°æ ¸ï¼Œ6-7 æ˜¯å¤§æ ¸ï¼Œè¿™é‡Œå°±ä¸æ”¾å›¾äº†ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83787e623afe4b06863b7a3f60bd3122~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=dP6%2Fu5np5ge761JWh4edoNyHdVQ%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸€èˆ¬é€šè¿‡æŸ¥é˜… CPU çš„ spec å°±å¯ä»¥çŸ¥é“ä»–çš„å¤§ä¸­å°æ ¸å¿ƒçš„æ¶æ„ï¼Œæˆ–è€… cat å¯¹åº”çš„ CPU èŠ‚ç‚¹ä¹Ÿå¯ä»¥ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-scheduling" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-5">CPU è°ƒåº¦</h3>
<p><code>CPU Scheduling</code> è½¨é“æ˜¯æœ€å¸¸ç”¨ä¸”æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå®ƒå¯è§†åŒ–äº† Linux å†…æ ¸è°ƒåº¦å™¨çš„å†³ç­–è¿‡ç¨‹ã€‚å…¶æ•°æ®æ¥æºäºå†…æ ¸ ftrace ä¸­çš„ <code>sched/sched_switch</code> äº‹ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17f8f233b822471086b0330fd44c1afe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=sDEeUnfinGJ1PlC4IQ0jAFEx5Jk%3D" alt="image.png" loading="lazy"/></p>
<p>æ¯ä¸ª CPU æ ¸å¿ƒå¯¹åº”ä¸€è¡Œç‹¬ç«‹çš„è½¨è¿¹ã€‚è½¨é“ä¸Šçš„ä¸åŒè‰²å—ï¼Œä»£è¡¨äº†åœ¨è¯¥æ—¶é—´ç‰‡ä¸Šï¼Œç‰¹å®šçº¿ç¨‹æ­£åœ¨è¯¥ CPU æ ¸å¿ƒä¸Šè¿è¡Œã€‚</p>
<ul>
<li>UI ç»†èŠ‚ï¼šç‚¹å‡» CPU åˆ‡ç‰‡ï¼Œè¯¦æƒ…é¢æ¿ä¼šæ˜¾ç¤ºè¯¥æ¬¡è°ƒåº¦çš„ <code>cpu</code>ã€<code>end_state</code>ã€<code>priority</code>ã€æ‰€å± <code>process/thread</code> ç­‰ï¼›å‘ä¸‹å±•å¼€è¿›ç¨‹è¿˜èƒ½çœ‹åˆ°æ¯ä¸ªçº¿ç¨‹çš„ç‹¬ç«‹è½¨é“ï¼Œä¾¿äºè·Ÿè¸ªå•ä¸ªçº¿ç¨‹çš„çŠ¶æ€æ¼”åŒ–ï¼ˆå‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fdata-sources%2Fcpu-scheduling" target="_blank" title="https://perfetto.dev/docs/data-sources/cpu-scheduling" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ï¼‰ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afe1e1f6bd844fe0bed1ec615913b198~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=FBchTzBmrlTzAf7vxC0YGNJhebY%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">çº¿ç¨‹çŠ¶æ€æ·±åº¦è§£æ</h4>
<p>ç†è§£ Linux çš„çº¿ç¨‹çŠ¶æ€æ˜¯è¿›è¡Œæ€§èƒ½ä¼˜åŒ–çš„å‰æã€‚åœ¨ Perfetto ä¸­ï¼Œé€‰ä¸­ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸‹æ–¹çš„ <code>Current State</code> é¢æ¿ä¼šæ˜¾ç¤ºå…¶å½“å‰çŠ¶æ€ã€‚è¿™äº›çŠ¶æ€ä¿¡æ¯æ¥æºäº Perfetto è§£æå¾—åˆ°çš„ <code>thread_state</code>/<code>thread_state_slice</code> è¡¨ã€‚</p>
<h5 data-id="heading-7">Running (ç»¿è‰²)</h5>
<p><strong>çŠ¶æ€å®šä¹‰</strong>ï¼šç»¿è‰²ä»£è¡¨çº¿ç¨‹æ­£åœ¨ CPU ä¸Šæ‰§è¡Œä»£ç ã€‚è¿™æ˜¯å”¯ä¸€çœŸæ­£åœ¨æ¶ˆè€— CPU èµ„æºè¿›è¡Œè®¡ç®—çš„çŠ¶æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/661455e18ae74e94a03101b100089fff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=4wejoE%2BthfHYvtO2hScBE1LNlJk%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åˆ†æè¦ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>æ‰§è¡Œæ—¶é•¿</strong>ï¼šè¿‡é•¿çš„ <code>Running</code> çŠ¶æ€ï¼Œå°¤å…¶æ˜¯åœ¨å…³é”®çº¿ç¨‹ä¸Šï¼Œé€šå¸¸æ„å‘³ç€å¯†é›†çš„è®¡ç®—ä»»åŠ¡ï¼Œä¾‹å¦‚å¤æ‚çš„ç®—æ³•æˆ–å¾ªç¯ã€‚è¿™ä¼šå¢åŠ ä»»åŠ¡è€—æ—¶ï¼Œå¹¶å¯èƒ½é˜»å¡å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œã€‚</li>
<li><strong>è¿è¡Œæ ¸å¿ƒ</strong>ï¼šç»“åˆ CPU çš„æ ¸å¿ƒæ¶æ„ï¼ˆä¾‹å¦‚ big.LITTLEï¼‰è¿›è¡Œåˆ†æã€‚ä¸€ä¸ªè®¡ç®—å¯†é›†å‹ä»»åŠ¡æ˜¯å¦è¢«è°ƒåº¦åˆ°äº†é¢„æœŸçš„æ€§èƒ½æ ¸å¿ƒï¼ˆå¤§æ ¸ï¼‰ä¸Šï¼Œæ˜¯è¯„ä¼°è°ƒåº¦ç­–ç•¥æ˜¯å¦åˆç†çš„é‡è¦ä¾æ®ã€‚</li>
<li><strong>è¿è¡Œé¢‘ç‡</strong>ï¼šçº¿ç¨‹çš„å®é™…æ‰§è¡Œé€Ÿåº¦ä¹Ÿå— CPU é¢‘ç‡å½±å“ã€‚å³ä½¿çº¿ç¨‹è¿è¡Œåœ¨å¤§æ ¸ä¸Šï¼Œå¦‚æœå› ä¸ºæ¸©æ§ç­‰åŸå› å¯¼è‡´é™é¢‘ï¼Œå…¶æ€§èƒ½è¡¨ç°ä¹Ÿä¼šä¸‹é™ã€‚å› æ­¤éœ€è¦ç»“åˆ <code>CPU Frequency</code> è½¨é“è¿›è¡Œç»¼åˆåˆ†æã€‚</li>
</ul>
<h5 data-id="heading-8">R (Runnable / å¯è¿è¡Œ)</h5>
<p><strong>çŠ¶æ€å®šä¹‰</strong>ï¼šçº¿ç¨‹å·²å…·å¤‡æ‰€æœ‰è¿è¡Œæ¡ä»¶ï¼Œæ­£åœ¨ç­‰å¾…è°ƒåº¦å™¨åˆ†é… CPU æ ¸å¿ƒã€‚åœ¨ Perfetto çš„çº¿ç¨‹ç§æœ‰è½¨é“ä¸­ï¼Œ<code>Runnable</code> çŠ¶æ€é€šå¸¸ä»¥æµ…ç»¿è‰²æˆ–ç™½è‰²æ¡æ˜¾ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf806951fc4c442f89a838f7e27c6d67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=A7Cwn6SdCInbL5TGAUBZlIJYCh0%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åˆ†æè¦ç‚¹</strong>ï¼š</p>
<ul>
<li><strong><code>Runnable</code> ä¸å¡é¡¿</strong>ï¼šå¯¹äº UI çº¿ç¨‹è¿™ç±»å¯¹å“åº”æ—¶é—´æ•æ„Ÿçš„çº¿ç¨‹ï¼Œé•¿æ—¶é—´å¤„äº <code>Runnable</code> çŠ¶æ€æ˜¯é€ æˆå¡é¡¿çš„ç›´æ¥åŸå› ã€‚å®ƒæ„å‘³ç€çº¿ç¨‹æ— æ³•åŠæ—¶è·å¾— CPU æ—¶é—´æ¥å¤„ç†ä»»åŠ¡ï¼ˆå¦‚ UI ç»˜åˆ¶ï¼‰ï¼Œä»è€Œå¯¼è‡´æ‰å¸§ã€‚</li>
</ul>
<p><strong><code>Runnable</code> çš„ä¸‰ç§ç±»å‹</strong>: ä»”ç»†è§‚å¯Ÿä¼šå‘ç°ï¼Œçº¿ç¨‹è¿›å…¥ <code>Runnable</code> çŠ¶æ€çš„â€œå‰èº«â€å„ä¸ç›¸åŒã€‚æ ¹æ®å†…æ ¸çš„è°ƒåº¦æ—¶æœºï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š</p>
<ol start="0">
<li><strong>ä»ç¡çœ ä¸­å”¤é†’ (Wake-up)</strong> ï¼šè¿™æ˜¯æœ€å¸¸è§çš„ä¸€ç§ã€‚çº¿ç¨‹å› ç­‰å¾…çš„èµ„æºï¼ˆå¦‚é”ã€I/Oã€Binder å›å¤ï¼‰å·²ç»å°±ç»ªï¼Œä» <code>S</code> æˆ– <code>D</code> çŠ¶æ€è¢«å”¤é†’ï¼Œè¿›å…¥ <code>Runnable</code> çŠ¶æ€ï¼Œç­‰å¾…è¢«è°ƒåº¦å™¨é€‰ä¸­æ‰§è¡Œã€‚</li>
<li><strong>ç”¨æˆ·æŠ¢å  (User Preemption)</strong> ï¼šæŒ‡çº¿ç¨‹çš„è¿è¡Œæ—¶é—´ç‰‡ç”¨å®Œï¼Œæˆ–å‡ºç°æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œå¯¼è‡´è°ƒåº¦å™¨åœ¨<strong>ä»å†…æ ¸æ€è¿”å›ç”¨æˆ·æ€æ—¶</strong>ï¼ˆå¦‚ç³»ç»Ÿè°ƒç”¨ã€ä¸­æ–­è¿”å›åï¼‰å†³å®šæ¢ä¸‹å½“å‰çº¿ç¨‹ã€‚æ­¤æ—¶ï¼Œè¢«æ¢ä¸‹çš„çº¿ç¨‹ä» <code>Running</code> å˜ä¸º <code>Runnable</code>ã€‚åœ¨åº•å±‚çš„ <code>sched_switch</code> trace ä¸­ï¼Œå®ƒçš„ <code>prev_state</code> æ ‡è®°ä¸º <code>R</code>ã€‚</li>
<li><strong>å†…æ ¸æŠ¢å  (Kernel Preemption)</strong> ï¼šæŒ‡ä¸€ä¸ªæ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡æˆ–ä¸­æ–­ï¼Œåœ¨å½“å‰çº¿ç¨‹<strong>æ­£åœ¨æ‰§è¡Œå†…æ ¸æ€ä»£ç æœŸé—´</strong>ï¼Œå°±â€œå¼ºè¡Œâ€å°†å…¶æ‰“æ–­ï¼Œä½¿å…¶è®©å‡º CPUã€‚è¿™ç§æƒ…å†µé€šå¸¸æ„å‘³ç€ä¸€æ¬¡æ›´ç´§æ€¥çš„è°ƒåº¦ã€‚æ­¤æ—¶ï¼Œè¢«æ¢ä¸‹çš„çº¿ç¨‹ä» <code>Running</code> å˜ä¸º <code>Runnable (Preempted)</code>ã€‚åœ¨åº•å±‚ trace ä¸­ï¼Œå®ƒçš„ <code>prev_state</code> æ ‡è®°ä¸º <code>R+</code>ï¼ŒPerfetto æ®æ­¤è¿›è¡Œäº†è§£æå’Œå±•ç¤ºã€‚</li>
</ol>
<p>ç†è§£è¿™ä¸‰ç§ç±»å‹çš„åŒºåˆ«ï¼Œæœ‰åŠ©äºæ›´ç²¾ç»†åœ°åˆ¤æ–­è°ƒåº¦å»¶è¿Ÿçš„åŸå› ã€‚ä¾‹å¦‚ï¼Œå¤§é‡çš„ <code>Runnable (Preempted)</code> å¯èƒ½æš—ç¤ºç€ç³»ç»Ÿä¸­å­˜åœ¨é¢‘ç¹çš„ã€é«˜ä¼˜å…ˆçº§çš„å”¤é†’æºï¼Œå¯¼è‡´å…³é”®çº¿ç¨‹åœ¨å†…æ ¸æ€ä¸­è¢«é¢‘ç¹æ‰“æ–­ï¼Œæˆ–è€…å½“æ—¶çš„ CPU å·²ç»æ»¡è½½äº†ï¼ˆæ¯”è¾ƒå¸¸è§çš„æƒ…å†µï¼‰ï¼Œè¿™æ—¶å€™ä¼˜å…ˆçº§æ¯”è¾ƒä½çš„ Task å°±å¾ˆå®¹æ˜“è¢«å…¶ä»–ä¼˜å…ˆçº§é«˜çš„ Task æŠ¢å ï¼Œè¢«è¿«è®©å‡º CPU ã€‚å¦‚æœä½ çš„å…³é”® Task æ€»æ˜¯è¢«æŠ¢å ï¼Œé‚£å°±éœ€è¦è°ƒæ•´ä¼˜å…ˆçº§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28e4407349c14ed5a227adac01c097ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=anpMNoSSOk453qsud1d6qCt%2Fjbw%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-9">S (Sleep / å¯ä¸­æ–­ç¡çœ )</h5>
<p><strong>çŠ¶æ€å®šä¹‰</strong>ï¼šçº¿ç¨‹å› ç­‰å¾…æŸä¸ªäº‹ä»¶è€Œè¿›å…¥ç¡çœ ï¼Œå¯ä»¥è¢«ä¿¡å·ä¸­æ–­ã€‚è¿™æ˜¯æœ€å¸¸è§çš„ç¡çœ çŠ¶æ€ï¼Œé€šå¸¸æƒ…å†µä¸‹æ˜¯è‰¯æ€§çš„ï¼Œå› ä¸ºå®ƒåœ¨ç­‰å¾…æœŸé—´ä¸æ¶ˆè€— CPU èµ„æºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee16cf40be114558bd67f6c16c329f71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=ueIID2NzdWteCLXgR025N3acn5U%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åˆ†æè¦ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p><strong>ç­‰å¾…çš„èµ„æº</strong>ï¼šå¦‚æœå…³é”®çº¿ç¨‹ï¼ˆå¦‚ UI çº¿ç¨‹ï¼‰ç¡çœ æ—¶é—´è¿‡é•¿ï¼ŒåŒæ ·ä¼šå¼•å‘æ€§èƒ½é—®é¢˜ã€‚å¸¸è§çš„ç­‰å¾…åŸå› åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>é”ç«äº‰</strong>ï¼šç­‰å¾…è·å–ä¸€ä¸ª <code>mutex</code> (Java é”æˆ– native futex)ã€‚</li>
<li><strong>Binder é€šä¿¡</strong>ï¼šç­‰å¾…å¦ä¸€ä¸ªè¿›ç¨‹é€šè¿‡ Binder è°ƒç”¨è¿”å›ç»“æœã€‚</li>
<li><strong>I/O æ“ä½œ</strong>ï¼šç­‰å¾…ç½‘ç»œ socket æ•°æ® (<code>epoll_wait</code>)ã€‚</li>
<li><strong>æ˜¾å¼ä¼‘çœ </strong>ï¼šä»£ç ä¸­è°ƒç”¨äº† <code>Thread.sleep()</code> æˆ– <code>Object.wait()</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¾èµ–åˆ†æ</strong>ï¼šåœ¨ Perfetto ä¸­ï¼Œé€‰ä¸­ CPU åŒºåŸŸè¢«å”¤é†’æ­£åœ¨ Running çš„ Taskï¼Œå°±ä¼šæœ‰ UI æ ‡è¯†ä»–æ˜¯è¢«å“ªä¸ª CPU ä¸Šçš„å“ªä¸ª Task å”¤é†’çš„ï¼Œè¿™æœ‰åŠ©äºå¿«é€Ÿå®šä½çº¿ç¨‹é—´çš„ä¾èµ–å…³ç³»ã€‚ç»“åˆå‡½æ•°è°ƒç”¨æ ˆï¼Œå¯ä»¥è¿›ä¸€æ­¥å®šä½å¯¼è‡´ç¡çœ çš„å…·ä½“ä»£ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ae353986783463596e05b32ad28ad1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=QuHOJgEOvP34unuMlsB8MZKT9%2Fo%3D" alt="image.png" loading="lazy"/></p>
</li>
</ul>
<h5 data-id="heading-10">D (Uninterruptible Sleep / ä¸å¯ä¸­æ–­ç¡çœ )</h5>
<p><strong>çŠ¶æ€å®šä¹‰</strong>ï¼šçº¿ç¨‹åœ¨ç­‰å¾…ç¡¬ä»¶ I/O æ“ä½œå®Œæˆï¼ŒæœŸé—´ä¸èƒ½è¢«ä»»ä½•ä¿¡å·ä¸­æ–­ã€‚æ­¤çŠ¶æ€æ—¨åœ¨ä¿æŠ¤è¿›ç¨‹ä¸è®¾å¤‡äº¤äº’è¿‡ç¨‹ä¸­çš„æ•°æ®ä¸€è‡´æ€§ã€‚åœ¨ Perfetto ä¸­ï¼Œè¯¥çŠ¶æ€é€šå¸¸æ˜¾ç¤ºä¸ºæ©™è‰²æˆ–çº¢è‰²ï¼Œæ˜¯éœ€è¦é‡ç‚¹å…³æ³¨çš„ä¿¡å·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1be1a90f6e648bf98d65754b54d343b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=IHtJ%2BPWxmxHglgQhwxO8DaCw8eg%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åˆ†æè¦ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p><strong>ä¸¥é‡çš„æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šé•¿æ—¶é—´çš„ <code>D</code> çŠ¶æ€æ„å‘³ç€çº¿ç¨‹è¢«å®Œå…¨é˜»å¡ï¼Œæ— æ³•å“åº”ä»»ä½•äº‹ä»¶ã€‚å¦‚æœå‘ç”Ÿåœ¨ UI çº¿ç¨‹ï¼Œææ˜“å¯¼è‡´ ANRã€‚</p>
</li>
<li>
<p><strong>å¸¸è§åŸå› </strong>ï¼š</p>
<ol start="0">
<li><strong>ç£ç›˜ I/O</strong>ï¼šé¢‘ç¹æˆ–å•æ¬¡å¤§é‡çš„æ–‡ä»¶è¯»å†™æ“ä½œã€‚</li>
<li><strong>å†…å­˜å‹åŠ›</strong>ï¼šç³»ç»Ÿç‰©ç†å†…å­˜ä¸è¶³ï¼Œå¯¼è‡´é¢‘ç¹çš„é¡µé¢æ¢å…¥/æ¢å‡º (swap)ï¼Œå…¶æœ¬è´¨æ˜¯é«˜é¢‘çš„ç£ç›˜ I/Oã€‚</li>
<li><strong>å†…æ ¸é©±åŠ¨é—®é¢˜</strong>ï¼šéƒ¨åˆ†å†…æ ¸é©±åŠ¨çš„å®ç°ç¼ºé™·ä¹Ÿå¯èƒ½å¯¼è‡´çº¿ç¨‹é™·å…¥ <code>D</code> çŠ¶æ€ã€‚</li>
</ol>
</li>
<li>
<p><strong>æ’æŸ¥æ–¹å‘</strong>ï¼šåœ¨ <code>Current State</code> é¢æ¿ä¸­ï¼Œå¦‚æœ <code>D</code> çŠ¶æ€ä¼´æœ‰ <code>(iowait)</code> æ ‡è®°ï¼Œåˆ™æ˜ç¡®è¡¨ç¤ºåœ¨ç­‰å¾… I/Oã€‚éœ€è¦æ£€æŸ¥åº”ç”¨çš„ I/O æ¨¡å¼ï¼Œè¯„ä¼°å…¶åˆç†æ€§ï¼Œä¾‹å¦‚æ˜¯å¦å°†è€—æ—¶ I/O æ“ä½œç½®äºä¸»çº¿ç¨‹ï¼Œæˆ–æ˜¯å¦å­˜åœ¨å¯ä¼˜åŒ–çš„ç©ºé—´ï¼ˆå¦‚å‡å°‘ I/O æ¬¡æ•°å’Œæ•°æ®é‡ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-11">å”¤é†’å…³ç³»åˆ†æ</h4>
<p>çº¿ç¨‹é—´çš„ä¾èµ–å…³ç³»æ˜¯æ€§èƒ½åˆ†æä¸­çš„ä¸€ä¸ªéš¾ç‚¹ã€‚ä¸€ä¸ªçº¿ç¨‹é•¿æ—¶é—´ <code>Sleep</code>ï¼Œå…³é”®åœ¨äºæ‰¾å‡ºå®ƒåœ¨â€œç­‰è°â€ã€‚Perfetto æä¾›äº†å¼ºå¤§çš„å”¤é†’å…³ç³»å¯è§†åŒ–åŠŸèƒ½ã€‚</p>
<ul>
<li><strong>UI æ“ä½œ</strong>ï¼šåœ¨ Perfetto çš„ CPU åŒºåŸŸä¸­ï¼Œç”¨é¼ æ ‡å·¦é”®å•å‡»é€‰ä¸­ä¸€ä¸ªå¤„äº <code>Running</code> çŠ¶æ€çš„çº¿ç¨‹ Task ã€‚Perfetto ä¼šè‡ªåŠ¨ç»˜åˆ¶ä¸€æ¡ä»â€œå”¤é†’è€…â€åˆ°â€œè¢«å”¤é†’è€…â€çš„ä¾èµ–ç®­å¤´ï¼Œå¹¶é«˜äº®æ˜¾ç¤ºå”¤é†’æºæ‰€åœ¨çš„çº¿ç¨‹åˆ‡ç‰‡ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e3675c063e14c699a1ffdf2005fbd5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=GnY%2BvZvZEwhKuk7%2BWWUkq5uQFnQ%3D" alt="image.png" loading="lazy"/></li>
<li><strong>åº•å±‚åŸç†</strong>ï¼šè¯¥åŠŸèƒ½ä¾èµ–äºå†…æ ¸çš„ <code>sched_wakeup</code> ftrace äº‹ä»¶ã€‚å½“çº¿ç¨‹ T1 é‡Šæ”¾äº†æŸä¸ªèµ„æºï¼ˆå¦‚è§£é”ã€å®Œæˆ Binder è°ƒç”¨ï¼‰ï¼Œè€Œçº¿ç¨‹ T2 æ­£åœ¨ç­‰å¾…è¯¥èµ„æºæ—¶ï¼Œå†…æ ¸ä¼šå°† T2 æ ‡è®°ä¸º <code>Runnable</code> çŠ¶æ€ï¼Œå¹¶è®°å½•ä¸‹ T1 -&gt; T2 çš„è¿™æ¬¡å”¤é†’äº‹ä»¶ã€‚Perfetto è§£æè¿™äº›äº‹ä»¶ï¼Œä»è€Œæ„å»ºå‡ºçº¿ç¨‹é—´çš„ä¾èµ–é“¾ã€‚</li>
</ul>
<p>é€šè¿‡å”¤é†’åˆ†æï¼Œå¯ä»¥æ¸…æ™°åœ°è¿½è¸ªå¤æ‚çš„è°ƒç”¨é“¾ï¼Œä¾‹å¦‚ï¼šUI çº¿ç¨‹ç­‰å¾…ä¸€ä¸ª Binder è°ƒç”¨ -&gt; Binder çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ -&gt; Binder çº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªé” -&gt; æŒé”çº¿ç¨‹é‡Šæ”¾é”å¹¶å”¤é†’ Binder çº¿ç¨‹ -&gt; Binder çº¿ç¨‹å®Œæˆä»»åŠ¡å¹¶å”¤é†’ UI çº¿ç¨‹ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­çš„ç“¶é¢ˆç‚¹å°†ä¸€ç›®äº†ç„¶ã€‚</p>
<h5 data-id="heading-12">è°ƒåº¦å”¤é†’ä¸å»¶è¿Ÿåˆ†æ</h5>
<p>å½“çº¿ç¨‹ A åœ¨ <code>wait()</code> ä¸ŠæŒ‚èµ·æ—¶ï¼Œå®ƒè¿›å…¥ <code>S</code>ï¼ˆSleepingï¼‰å¹¶ä» CPU è¿è¡Œé˜Ÿåˆ—ç§»é™¤ã€‚çº¿ç¨‹ B è°ƒç”¨ <code>notify()</code> åï¼Œå†…æ ¸ä¼šæŠŠçº¿ç¨‹ A è½¬æ¢ä¸º <code>R</code>ï¼ˆRunnableï¼‰ã€‚æ­¤æ—¶çº¿ç¨‹ Aâ€œæœ‰èµ„æ ¼â€è¢«æ”¾å›æŸä¸ª CPU çš„è¿è¡Œé˜Ÿåˆ—ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€â€œç«‹åˆ»â€è¿è¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/facd7219ea044066866f81cd2ea53547~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=YyGRWllfN0R6XiIEyH7WFFb9sQw%3D" alt="image.png" loading="lazy"/></p>
<p>å¸¸è§ç­‰å¾…åŸå› åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ‰€æœ‰ CPU éƒ½åœ¨å¿™ï¼šçº¿ç¨‹ A éœ€è¦ç­‰å¾…ç©ºå‡ºé˜Ÿåˆ—æ§½ä½ï¼ˆæˆ–å½“å‰è¿è¡Œçš„çº¿ç¨‹ä¼˜å…ˆçº§æ›´é«˜ï¼‰ã€‚</li>
<li>å­˜åœ¨ç©ºé—² CPUï¼Œä½†è¿ç§»éœ€æ—¶ï¼šè´Ÿè½½å‡è¡¡å™¨å°†çº¿ç¨‹è¿ç§»åˆ°å…¶ä»– CPU éœ€è¦ä¸€å®šæ—¶é—´çª—å£ã€‚</li>
</ul>
<p>é™¤éä½¿ç”¨å®æ—¶ä¼˜å…ˆçº§ï¼Œå¤§å¤šæ•° Linux è°ƒåº¦å™¨é…ç½®å¹¶éä¸¥æ ¼çš„â€œworkâ€‘conservingâ€ã€‚è°ƒåº¦å™¨æœ‰æ—¶ä¼šâ€œç­‰å¾…â€å½“å‰ CPU çº¿ç¨‹è‡ªç„¶ç©ºé—²ï¼Œä»¥é¿å…è·¨ CPU è¿ç§»å¸¦æ¥çš„é¢å¤–å¼€é”€ä¸åŠŸè€—ã€‚è¿™ä¼šåœ¨ <code>R</code> çŠ¶æ€ä¸‹å½¢æˆå¯è§‚æµ‹çš„â€œæ’é˜Ÿå»¶è¿Ÿâ€ã€‚ç»“åˆ <code>sched_waking</code>/<code>sched_wakeup_new</code> å¯æ›´ç²¾ç¡®åœ°åˆ»ç”»â€œè¢«å”¤é†’â€åˆ°â€œçœŸæ­£å…¥é˜Ÿ/è¿è¡Œâ€ä¹‹é—´çš„æ—¶é—´æ®µï¼ˆå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<code>sched_waking / sched_wakeup</code> çš„å·®å¼‚ä¸é€‚ç”¨åœºæ™¯ï¼‰ã€‚</p>
<ul>
<li>åœ¨ç›®æ ‡çº¿ç¨‹çš„ <code>thread_state</code> è½¨é“ä¸­ç­›é€‰ <code>state=R</code> çš„åˆ‡ç‰‡ï¼Œç”¨ä½œâ€œè°ƒåº¦å»¶è¿Ÿâ€çš„ç›´æ¥è¯æ®ã€‚</li>
<li>åŒæ­¥å¯¹ç…§åŒä¸€ CPU çš„å…¶å®ƒé‡è´Ÿè½½çº¿ç¨‹ä¸ IRQ/SoftIRQ è½¨è¿¹ï¼ŒéªŒè¯æ˜¯å¦å­˜åœ¨æ—¶é—´é‡å çš„æŠ¢å æˆ–é«˜ä¼˜å…ˆçº§å‹åˆ¶ã€‚</li>
<li>è‹¥é¢‘ç¹åœ¨ <code>R</code> çŠ¶æ€æ’é˜Ÿå¹¶ä»¥ <code>end_state=R+</code> æ”¶å°¾ï¼Œè§†ä¸ºéè‡ªæ„¿æŠ¢å ä¸¥é‡ï¼Œéœ€è¯„ä¼°ä¼˜å…ˆçº§ã€æ”¾ç½®ä¸è´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚</li>
</ul>
<h5 data-id="heading-13">sched_waking ä¸ sched_wakeup çš„å·®å¼‚ä¸éä¸¥æ ¼ work-conserving</h5>
<ul>
<li><code>sched_waking</code> åœ¨çº¿ç¨‹è¢«æ ‡è®°ä¸ºå¯è¿è¡Œï¼ˆRï¼‰æ—¶å°±ä¼šå‘å‡ºï¼Œ<code>sched_wakeup</code> ä¸è·¨ CPU å”¤é†’æœ‰å…³ï¼Œå¯èƒ½è®°å½•åœ¨æºæˆ–ç›®çš„ CPU ä¸Šï¼›å¯¹å¤§å¤šæ•°å»¶è¿Ÿåˆ†æè€Œè¨€ï¼Œä»… <code>sched_waking</code> å·²è¶³å¤Ÿï¼ˆå‚è§å®˜æ–¹è¯´æ˜ï¼‰ã€‚</li>
<li>å¤šæ•° Linux è°ƒåº¦é…ç½®åœ¨é€šç”¨ä¼˜å…ˆçº§ä¸‹å¹¶éä¸¥æ ¼â€œwork-conservingâ€ã€‚è°ƒåº¦å™¨æœ‰æ—¶ä¼šâ€œç­‰å¾…å½“å‰ CPU ç©ºé—²â€ä»¥é¿å…è·¨æ ¸è¿ç§»å¸¦æ¥çš„é¢å¤–å¼€é”€ä¸åŠŸè€—ï¼Œè¿™ä¼šé€ æˆ R çŠ¶æ€ä¸‹çš„ç­‰å¾…æ—¶é—´ï¼ˆæ’é˜Ÿå»¶è¿Ÿï¼‰å¹¶éå¼‚å¸¸ï¼Œè€Œæ˜¯æƒè¡¡åçš„ç»“æœï¼ˆå‚è§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fdata-sources%2Fcpu-scheduling" target="_blank" title="https://perfetto.dev/docs/data-sources/cpu-scheduling" ref="nofollow noopener noreferrer">Perfetto CPU Scheduling</a>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-14">ç”¨æˆ·æ€ä¸å†…æ ¸æ€ï¼šsys_* åˆ‡ç‰‡å®šä½ç©ºç«ç„°å›¾</h4>
<ul>
<li>
<p><code>Running</code> çš„ç»¿è‰²åˆ‡ç‰‡æœªå¿…éƒ½æ˜¯åº”ç”¨ä»£ç åœ¨å¿™ã€‚è‹¥çº¿ç¨‹é™·å…¥å•ä¸ªé•¿ç³»ç»Ÿè°ƒç”¨å¦‚ <code>sys_read</code>ã€<code>sys_futex</code>ï¼Œç”¨æˆ·æ€é‡‡æ ·ç«ç„°å›¾å¯èƒ½å‡ ä¹ä¸ºç©ºã€‚</p>
</li>
<li>
<p>è‹¥ UI çº¿ç¨‹æŸæ®µ <code>sched_slice</code> å¾ˆé•¿ï¼Œè€Œ CPU ç«ç„°å›¾çƒ­ç‚¹å¾ˆå°‘æˆ–å‡ ä¹æ²¡æœ‰ï¼š</p>
<ol start="0">
<li>æ‰“å¼€è¯¥çº¿ç¨‹çš„ <code>slice</code> è§†å›¾ï¼ŒæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨é•¿æ—¶é—´ <code>sys_*</code> åˆ‡ç‰‡ï¼›</li>
<li>è‹¥å­˜åœ¨ï¼šç“¶é¢ˆå¤šåœ¨ I/O æˆ–åŒæ­¥åŸè¯­ï¼Œä¼˜å…ˆæ£€æŸ¥ I/O è·¯å¾„ã€é”ç²’åº¦ä¸è®¿é—®æ¨¡å¼ï¼›</li>
<li>è‹¥ä¸å­˜åœ¨ï¼šå›åˆ°ç«ç„°å›¾ï¼Œç»§ç»­å‰–æç”¨æˆ·æ€çƒ­ç‚¹å‡½æ•°ã€‚</li>
</ol>
</li>
<li>
<p>å»ºè®®ï¼šåˆå¹¶ I/Oã€åˆ‡æ¢å¼‚æ­¥ã€ä¼˜åŒ–é”ç«äº‰ã€é™ä½ç³»ç»Ÿè°ƒç”¨é¢‘ç‡ä¸å•æ¬¡æ•°æ®é‡ã€‚</p>
</li>
</ul>
<h4 data-id="heading-15">CPU æ—¶é—´ä¸å¢™ä¸Šæ—¶é—´</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22028be248ee4dd0ba48826b3eb22d8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=mZxJJ8EqKytC1T3APjUh8LubJv8%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><code>Wall</code> æ˜¯åˆ‡ç‰‡ä»å¼€å§‹åˆ°ç»“æŸçš„çœŸå®ä¸–ç•Œæ—¶é—´ï¼Œ<code>CPU</code> æ˜¯çœŸæ­£åœ¨ CPU ä¸Šè¿è¡Œçš„æ—¶é—´ã€‚</p>
</li>
<li>
<p>äºŒè€…å…³ç³»ï¼š<code>Wall = CPU + Runnable + Sleep</code>ã€‚</p>
<ol start="0">
<li>é€‰ä¸­ç›®æ ‡åˆ‡ç‰‡ï¼ˆå¦‚ <code>Choreographer#doFrame</code>ï¼‰ï¼Œæ¯”è¾ƒ <code>Wall</code> ä¸ <code>CPU</code>ï¼›</li>
<li>è‹¥ <code>Wall â‰ˆ CPU</code>ï¼Œåˆ™ä¸ºè®¡ç®—è¿‡é‡ï¼Œä½¿ç”¨ç«ç„°å›¾å®šä½çƒ­ç‚¹ï¼›\n 3) è‹¥ <code>Wall &gt;&gt; CPU</code>ï¼Œåˆ™ä¸ºè°ƒåº¦æˆ–ä¾èµ–ç­‰å¾…ï¼ŒæŸ¥çœ‹ <code>thread_state</code> çš„ <code>R/S/D</code> åˆ†å¸ƒä¸å”¤é†’é“¾ã€‚</li>
</ol>
</li>
</ul>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-frequency" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-16">CPU Frequency (CPU é¢‘ç‡) æ·±åº¦è§£æ</h3>
<p>CPU é¢‘ç‡ç›´æ¥å½±å“ä»£ç æ‰§è¡Œé€Ÿåº¦ï¼ŒåŒæ—¶ä¹Ÿä¸åŠŸè€—æ­£ç›¸å…³ã€‚<code>CPU Frequency</code> è½¨é“æ˜¾ç¤ºäº†æ¯ä¸ªæ ¸å¿ƒåœ¨ç‰¹å®šæ—¶é—´çš„è¿è¡Œé¢‘ç‡ï¼ˆ<code>scaling_cur_freq</code>ï¼‰ã€‚ä½†æ›´é‡è¦çš„æ˜¯ç†è§£å…¶èƒŒåçš„é™åˆ¶å› ç´ ï¼š</p>
<h4 data-id="heading-17">å½±å“ CPU é¢‘ç‡çš„æ ¸å¿ƒå› ç´ </h4>
<ol start="0">
<li><strong>ä»»åŠ¡è´Ÿè½½ (Task Utilization)</strong> : è¿™æ˜¯æœ€ä¸»è¦çš„é©±åŠ¨å› ç´ ã€‚ç°ä»£ Android ç³»ç»Ÿå¤šé‡‡ç”¨ <code>schedutil</code> ä½œä¸º <code>cpufreq</code> è°ƒé¢‘ç­–ç•¥ã€‚å®ƒç›´æ¥å…³è”è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰ï¼Œæ ¹æ®çº¿ç¨‹çš„â€œç¹å¿™â€ç¨‹åº¦ï¼ˆ<code>utilization</code>ï¼‰æ¥å†³å®šé¢‘ç‡ã€‚ä¸€ä¸ªé«˜è´Ÿè½½çš„çº¿ç¨‹ï¼ˆ<code>util</code> å¾ˆé«˜ï¼‰ä¼šä¿ƒä½¿ <code>schedutil</code> è¯·æ±‚æ›´é«˜çš„é¢‘ç‡ï¼Œåä¹‹äº¦ç„¶ã€‚</li>
<li><strong>åœºæ™¯ç­–ç•¥ (Power HAL)</strong> : Android Framework é€šè¿‡ Power HAL å‘åº•å±‚ä¼ é€’å½“å‰çš„ç³»ç»ŸçŠ¶æ€ï¼Œå³â€œåœºæ™¯â€ã€‚ä¾‹å¦‚ï¼Œåœ¨åº”ç”¨å¯åŠ¨ã€æ¸¸æˆã€æˆ–è§¦æ‘¸å±å¹•æ—¶ï¼ŒPower HAL ä¼šå‘å†…æ ¸è¯·æ±‚æ›´é«˜çš„æ€§èƒ½ï¼Œè¿™é€šå¸¸é€šè¿‡æŠ¬é«˜ CPU çš„<strong>åœ°æ¿é¢‘ (Floor / <code>scaling_min_freq</code>)</strong> å’Œ/æˆ– <strong>å¤©èŠ±æ¿é¢‘ (Ceiling / <code>scaling_max_freq</code>)</strong> æ¥å®ç°ï¼Œç¡®ä¿ CPU èƒ½å¿«é€Ÿå“åº”ã€‚</li>
<li><strong>æ¸©åº¦æ§åˆ¶ (Thermal Throttling)</strong> : è¿™æ˜¯æ‹¥æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„é™åˆ¶ã€‚å½“è®¾å¤‡æ¸©åº¦ï¼ˆæ¥è‡ªç”µæ± ã€CPUã€NPU ç­‰ä¼ æ„Ÿå™¨ï¼‰è¶…è¿‡é¢„è®¾é˜ˆå€¼æ—¶ï¼Œæ¸©æ§ç³»ç»Ÿä¼šå¼ºåˆ¶é™ä½ CPU çš„<strong>å¤©èŠ±æ¿é¢‘</strong>ï¼Œä»¥å‡å°‘å‘çƒ­ï¼Œä¿æŠ¤ç¡¬ä»¶ã€‚æ­¤æ—¶ï¼Œå³ä½¿æœ‰é«˜è´Ÿè½½ä»»åŠ¡ï¼ŒCPU é¢‘ç‡ä¹Ÿæ— æ³•æå‡ï¼Œæ˜¯å¯¼è‡´æ¸¸æˆæ‰å¸§ã€åº”ç”¨å¡é¡¿çš„å¸¸è§å¤–éƒ¨åŸå› ã€‚</li>
<li><strong>åŠŸè€—é™åˆ¶ä¸çœç”µæ¨¡å¼</strong>: åœ¨ä½ç”µé‡æˆ–å¼€å¯çœç”µæ¨¡å¼æ—¶ï¼Œç³»ç»ŸåŒæ ·ä¼šé€šè¿‡é™ä½å¤©èŠ±æ¿é¢‘ã€é™åˆ¶æœ€é«˜æ€§èƒ½è¾“å‡ºæ¥å»¶é•¿ç»­èˆªã€‚</li>
</ol>
<p>å› æ­¤ï¼Œå½“å‘ç°ä¸€ä¸ªé‡ä»»åŠ¡åœ¨è¿è¡Œæ—¶ CPU é¢‘ç‡ä¸Šä¸å»ï¼Œä¸ä»…è¦çœ‹å½“å‰é¢‘ç‡ï¼Œæ›´è¦å…³æ³¨ <code>scaling_max_freq</code> æ˜¯å¦è¢«é™åˆ¶äº†ã€‚è¿™é€šå¸¸æ„å‘³ç€æ€§èƒ½ç“¶é¢ˆçš„æ ¹æºä¸åœ¨äºåº”ç”¨ä»£ç æœ¬èº«ï¼Œè€Œåœ¨äºç³»ç»Ÿçš„æ¸©æ§æˆ–åŠŸè€—ç­–ç•¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/970848fa0d9f43d9bc9b551bd6a2c1b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904918&amp;x-signature=KR%2BHSurX1N4azJJMEoHpU41H4IM%3D" alt="image.png" loading="lazy"/>
ä¸Šå›¾æ˜¯ CPU é¢‘ç‡åŒºåŸŸçš„æ ‡è¯†å›¾ï¼Œé¼ æ ‡æ”¾ä¸Šå»å°±å¯ä»¥çœ‹åˆ°å½“å‰çš„é¢‘ç‡ï¼ŒCPU é¢‘ç‡å˜åŒ–å¾ˆå¿«ã€‚å›¾ä¸­ CPU æœ‰å¸¦é¢œè‰²å’Œä¸å¸¦é¢œè‰²çš„éƒ¨åˆ†ï¼Œå¸¦é¢œè‰²æ ‡è¯†å½“å‰ CPU æœ‰ Task åœ¨è·‘ï¼Œä¸å¸¦é¢œè‰²è¯´æ˜å½“å‰ CPU æ˜¯ç©ºçš„ï¼Œæ—  Taskã€‚</p>
<h4 data-id="heading-18">é¢‘ç‡æ•°æ®é‡‡é›†ä¸å¹³å°å·®å¼‚</h4>
<ul>
<li>
<p>ä¸¤ç§è·å–æ–¹å¼ï¼š</p>
<ul>
<li>äº‹ä»¶é©±åŠ¨ï¼šå¯ç”¨ <code>power/cpu_frequency</code>ï¼Œåœ¨å†…æ ¸ cpufreq é©±åŠ¨å˜æ›´é¢‘ç‡æ—¶è®°å½•äº‹ä»¶ã€‚å¹¶éæ‰€æœ‰å¹³å°æ”¯æŒï¼Œåœ¨å¤šæ•° ARM SoC ä¸Šå¯é ï¼Œåœ¨å¤§é‡ç°ä»£ Intel å¹³å°ä¸Šå¸¸æ— æ•°æ®ã€‚</li>
<li>è½®è¯¢é‡‡æ ·ï¼šå¯ç”¨ <code>linux.sys_stats</code> å¹¶è®¾ç½® <code>cpufreq_period_ms &gt; 0</code>ï¼Œå®šæœŸè¯»å– <code>/sys/devices/system/cpu/cpu*/cpufreq/cpuinfo_cur_freq</code>ï¼ŒARM/Intel å‡å¯ç”¨ã€‚å»ºè®®ä¸äº‹ä»¶é©±åŠ¨ç»„åˆä½¿ç”¨ä»¥è¡¥é½â€œåˆå§‹é¢‘ç‡å¿«ç…§â€ã€‚</li>
</ul>
</li>
<li>
<p>Android è®¾å¤‡å¸¸ä»¥â€œç°‡â€ä¸ºå•ä½è°ƒé¢‘ï¼Œå¸¸è§ç°è±¡æ˜¯åŒç°‡å†…å¤šä¸ª CPU åŒæ­¥å˜é¢‘ã€‚</p>
</li>
<li>
<p>å·²çŸ¥é—®é¢˜ï¼š</p>
<ul>
<li>äº‹ä»¶ä»…åœ¨é¢‘ç‡å˜åŒ–æ—¶äº§ç”Ÿï¼ŒçŸ­ Trace æˆ–ç¨³å®šåœºæ™¯å¯èƒ½å‡ºç°å·¦ä¾§â€œç©ºç™½â€ã€‚æ­¤æ—¶éœ€ä¾èµ–è½®è¯¢è¡¥è¶³ã€‚</li>
<li>æŸäº› UI ç‰ˆæœ¬åœ¨æœªæ•è· Idle çŠ¶æ€æ—¶ä¸æ¸²æŸ“ cpufreq è½¨é“ï¼Œä½†æ•°æ®ä»å¯é€šè¿‡æŸ¥è¯¢å¾—åˆ°ã€‚</li>
<li>å‚è€ƒï¼š<code>CPU frequency and idle states</code> å®˜æ–¹è¯´æ˜ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-19">big.LITTLEï¼šç›¸åŒé¢‘ç‡ä¸ç­‰äºç›¸åŒæ€§èƒ½æˆ–èƒ½è€—</h4>
<ul>
<li>åœ¨å¼‚æ„ CPU ä¸Šï¼ŒåŒä¸º 2.0GHzï¼Œå°æ ¸ä¸å¤§æ ¸çš„å®é™…ç®—åŠ›å’Œèƒ½è€—å¹¶ä¸ç­‰ä»·ã€‚é¢‘ç‡å¿…é¡»ç»“åˆæ ¸å¿ƒç±»å‹ç†è§£ã€‚</li>
<li>æ ¸å¿ƒå®¹é‡ï¼ˆcapacityï¼‰ä¸ IPCï¼šå¤§æ ¸é€šå¸¸å…·å¤‡æ›´å®½çš„ä¹±åºæ‰§è¡Œã€æ›´å¤šæ‰§è¡Œç«¯å£ã€æ›´å¤§çš„ç¼“å­˜ä¸æ›´æ¿€è¿›çš„é¢„å–/åˆ†æ”¯é¢„æµ‹ï¼Œå•ä½å‘¨æœŸå®Œæˆçš„æŒ‡ä»¤æ•°ï¼ˆIPCï¼‰æ›´é«˜ï¼›åŒé¢‘ä¸‹ï¼Œå¤§æ ¸å®ŒæˆåŒæ ·å·¥ä½œæ‰€éœ€æ—¶é—´æ›´çŸ­ã€èƒ½é‡æ›´å°‘ã€‚</li>
<li>ç°‡çº§ DVFSï¼ˆcluster-level DVFSï¼‰ï¼šç§»åŠ¨ SoC å¤šä»¥â€œç°‡â€ä¸ºå•ä½è°ƒé¢‘ã€‚å°æ ¸ç°‡çš„é«˜é¢‘å¹¶ä¸ç­‰åŒäºå¤§æ ¸ç°‡çš„ä¸­é¢‘æ€§èƒ½è¾“å‡ºï¼›ä¸åŒç°‡çš„ç”µå‹-é¢‘ç‡-èƒ½é‡æ›²çº¿ä¸åŒï¼ŒåŒä¸€é¢‘ç‚¹æ— æ³•æ¨ªå‘ç±»æ¯”â€œæ¯ç“¦æ€§èƒ½â€ã€‚</li>
<li>å†…å­˜/ç¼“å­˜/äº’è”ç“¶é¢ˆï¼šçƒ­ç‚¹è‹¥å—åˆ¶äºå†…å­˜å¸¦å®½ã€LLC å‘½ä¸­ç‡æˆ–ç³»ç»Ÿäº’è”ï¼ˆNoCï¼‰ï¼Œå•çº¯æå‡å°æ ¸é¢‘ç‡æ”¶ç›Šæœ‰é™ï¼›å¤§æ ¸æ›´å¤§çš„ç¼“å­˜/æ›´å¼ºé¢„å–å¯æ˜¾è‘—é™ä½åŒä»»åŠ¡çš„è®¿å­˜ç­‰å¾…ï¼Œä½“ç°â€œåŒé¢‘ä¸åŒæ•ˆâ€ã€‚</li>
<li>èƒ½æ•ˆæ›²çº¿éçº¿æ€§ï¼šå°æ ¸åœ¨æ¥è¿‘æœ€é«˜é¢‘æ—¶å¸¸è¿›å…¥èƒ½æ•ˆé™¡é™åŒºï¼ˆç”µå‹æŠ¬å‡ä½¿è¾¹é™…èƒ½è€—æ¿€å¢ï¼‰ï¼Œè€Œå¤§æ ¸åœ¨ä¸­ç­‰é¢‘ç‚¹å¯èƒ½è¾¾åˆ°â€œæ›´é«˜å•ä½èƒ½æ•ˆâ€ã€‚åŒé¢‘æ¯”è¾ƒå¿½ç•¥äº†â€œç”µå‹-é¢‘ç‡-èƒ½é‡â€çš„ä¸‰ç»´æƒè¡¡ã€‚</li>
</ul>
<h5 data-id="heading-20">P-States ä¸ governor</h5>
<ul>
<li>
<p>CPU é¢‘ç‡å¹¶éè¿ç»­å€¼ï¼Œè€Œæ˜¯ç¦»æ•£çš„æ€§èƒ½çŠ¶æ€ P-Statesã€‚å¸¸ç”¨ governor ä¸º <code>schedutil</code>ï¼Œä¾æ®ä»»åŠ¡åˆ©ç”¨ç‡ç­‰ä¿¡å·é€‰æ‹©åˆé€‚ P-Stateï¼Œå¹¶è”åŠ¨ç”µå‹è°ƒèŠ‚ã€‚</p>
</li>
<li>
<p>UI ä¸Šçš„é¢‘ç‡å˜åŒ–ï¼Œå®è´¨æ˜¯ governor åœ¨ä¸åŒ P-State ä¹‹é—´åˆ‡æ¢ã€‚é«˜é¢‘ä¸å¿…ç„¶æ›´å¿«æˆ–æ›´çœç”µï¼Œéœ€è¦ç»“åˆæ ¸ç°‡ç±»å‹ä¸å½“æ—¶çš„ä¸Šé™/ä¸‹é™çº¦æŸç†è§£ã€‚</p>
</li>
<li>
<p>æ ¸éªŒæ­¥éª¤ï¼š</p>
<ol start="0">
<li>åœ¨ <code>CPU Frequency</code> è§‚å¯Ÿé¢‘ç‡çš„ä¸Šä¸‹é™æ˜¯å¦è¢«æ‹‰é«˜/å‹ä½ï¼ˆå¦‚åœºæ™¯ç­–ç•¥/æ¸©æ§é™åˆ¶ <code>scaling_max_freq</code>ï¼‰ã€‚</li>
<li>åœ¨ <code>CPU Scheduling</code> æŸ¥çœ‹å…³é”®çº¿ç¨‹è¿è¡Œåœ¨å“ªç±»æ ¸å¿ƒï¼ˆç»“åˆè®¾å¤‡çš„æ ¸ç¼–å·åˆ’åˆ†ï¼‰ã€‚</li>
<li>è‹¥â€œé«˜é¢‘ + å°æ ¸ + ä»æ…¢â€ï¼Œä¼˜å…ˆè€ƒè™‘é€‰æ ¸/è®¿å­˜ç“¶é¢ˆï¼Œè€Œéç®€å•â€œé¢‘ç‡ä¸å¤Ÿâ€ã€‚</li>
</ol>
</li>
<li>
<p>å»ºè®®ç»“åˆ Power HAL åœºæ™¯ã€çƒ­ç®¡ç†ä¸ä»»åŠ¡ç”»åƒï¼ˆCPU å¯†é›†æˆ–è®¿å­˜å¯†é›†ï¼‰ç»¼åˆä¼˜åŒ–ï¼Œé¿å…å•çº¯ä»¥é¢‘ç‡ä½œä¸ºè°ƒå‚ç›®æ ‡ã€‚å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fdata-sources%2Fcpu-scheduling" target="_blank" title="https://perfetto.dev/docs/data-sources/cpu-scheduling" ref="nofollow noopener noreferrer">Perfetto CPU Scheduling</a>ã€‚</p>
</li>
</ul>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-eas" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-21">Linux å†…æ ¸è°ƒåº¦ç­–ç•¥ï¼šé€‰æ ¸ä¸è¿ç§»</h3>
<p>ç†è§£äº†çº¿ç¨‹çŠ¶æ€å’Œé¢‘ç‡åï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ·±å…¥äº†è§£ Linux å†…æ ¸è°ƒåº¦å™¨ï¼ˆåœ¨ Android ä¸­ä¸»è¦æ˜¯ EAS - Energy Aware Schedulingï¼‰çš„ä¸¤ä¸ªæ ¸å¿ƒè¡Œä¸ºï¼šå¦‚ä½•ä¸ºä»»åŠ¡æŒ‘é€‰ä¸€ä¸ª CPU æ ¸å¿ƒï¼Œä»¥åŠä¸ºä½•è¦å°†ä»»åŠ¡ä»ä¸€ä¸ªæ ¸å¿ƒè¿ç§»åˆ°å¦ä¸€ä¸ªã€‚</p>
<h4 data-id="heading-22">é€‰æ ¸é€»è¾‘ (Task Placement)</h4>
<p>å½“ä¸€ä¸ªçº¿ç¨‹ä» <code>Sleep</code> çŠ¶æ€è¢«å”¤é†’ï¼Œæˆ–ä¸€ä¸ªæ–°çº¿ç¨‹è¢«åˆ›å»ºæ—¶ï¼ŒEAS è°ƒåº¦å™¨éœ€è¦ä¸ºå®ƒé€‰æ‹©ä¸€ä¸ªæœ€åˆé€‚çš„ CPU æ ¸å¿ƒã€‚å…¶æ ¸å¿ƒç›®æ ‡æ˜¯åœ¨æ»¡è¶³ä»»åŠ¡æ€§èƒ½éœ€æ±‚çš„å‰æä¸‹ï¼Œå°½å¯èƒ½åœ°é™ä½ç³»ç»ŸåŠŸè€—ã€‚å†³ç­–æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p>
<ol start="0">
<li><strong>è¯„ä¼°ä»»åŠ¡è´Ÿè½½ (Task Utilization)</strong> : è°ƒåº¦å™¨ä¼šè¯„ä¼°è¯¥çº¿ç¨‹çš„ <code>util</code>ï¼Œå³å®ƒéœ€è¦å¤šå°‘è®¡ç®—èµ„æºã€‚è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€è°ƒæ•´çš„å€¼ï¼Œåæ˜ äº†çº¿ç¨‹å†å²ä¸Šçš„ç¹å¿™ç¨‹åº¦ã€‚</li>
<li><strong>å¯»æ‰¾â€œè¶³å¤Ÿâ€çš„æ ¸å¿ƒ</strong>: è°ƒåº¦å™¨ä¼šéå†æ‰€æœ‰å¯ç”¨çš„ CPU æ ¸å¿ƒï¼Œæ¯”è¾ƒä»»åŠ¡çš„ <code>util</code> å’Œæ¯ä¸ªæ ¸å¿ƒçš„ <code>capacity</code>ï¼ˆå®¹é‡/æœ€å¤§è®¡ç®—èƒ½åŠ›ï¼‰ã€‚å¤§æ ¸çš„ <code>capacity</code> è¿œé«˜äºå°æ ¸ã€‚è°ƒåº¦å™¨ä¼šå¯»æ‰¾ <code>capacity</code> &gt; <code>util</code> çš„æ ¸å¿ƒï¼Œå³èƒ½â€œè£…ä¸‹â€è¿™ä¸ªä»»åŠ¡çš„æ ¸å¿ƒã€‚</li>
<li><strong>å¯»æ‰¾â€œæœ€èŠ‚èƒ½â€çš„æ ¸å¿ƒ</strong>: åœ¨æ‰€æœ‰æ»¡è¶³ <code>capacity</code> è¦æ±‚çš„æ ¸å¿ƒä¸­ï¼Œè°ƒåº¦å™¨ä¼šåˆ©ç”¨é¢„ç½®åœ¨å†…æ ¸ä¸­çš„â€œèƒ½é‡æ¨¡å‹â€ï¼ˆEnergy Modelï¼‰è¿›è¡Œè®¡ç®—ã€‚è¿™ä¸ªæ¨¡å‹çŸ¥é“æ¯ä¸ªæ ¸å¿ƒåœ¨æ¯ä¸ªé¢‘ç‡ä¸‹è¿è¡Œçš„åŠŸè€—ã€‚è°ƒåº¦å™¨ä¼šé€‰æ‹©ä¸€ä¸ªèƒ½è®©æ•´ä¸ªç³»ç»Ÿï¼ˆåŒ…æ‹¬ä»»åŠ¡æœ¬èº«å’Œå…¶ä»–æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ï¼‰æ€»åŠŸè€—æœ€ä½çš„ CPU æ ¸å¿ƒä½œä¸ºæœ€ç»ˆé€‰æ‹©ã€‚</li>
</ol>
<p><strong>ç®€è€Œè¨€ä¹‹</strong>ï¼šEAS çš„ç›®æ ‡ä¸æ˜¯ä¸ºä»»åŠ¡æ‰¾ä¸€ä¸ªæœ€å¿«çš„æ ¸ï¼Œè€Œæ˜¯æ‰¾ä¸€ä¸ªâ€œåˆšåˆšå¥½å¤Ÿç”¨â€ä¸”â€œæœ€çœç”µâ€çš„æ ¸ã€‚</p>
<h4 data-id="heading-23">æ ¸å¿ƒè¿ç§»é€»è¾‘ (Task Migration)</h4>
<p>å°†ä»»åŠ¡ä»ä¸€ä¸ª CPU æ ¸å¿ƒç§»åŠ¨åˆ°å¦ä¸€ä¸ªï¼Œæ˜¯è°ƒåº¦å™¨è¿›è¡ŒåŠ¨æ€è°ƒä¼˜çš„å…³é”®æ‰‹æ®µã€‚ä¸»è¦å‘ç”Ÿåœ¨ä»¥ä¸‹æƒ…å†µï¼š</p>
<ol start="0">
<li><strong>è´Ÿè½½å‡è¡¡ (Load Balancing)</strong> : è¿™æ˜¯æœ€å¸¸è§çš„è¿ç§»åŸå› ã€‚è°ƒåº¦å™¨ä¼šå‘¨æœŸæ€§åœ°æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å¤„äºâ€œè´Ÿè½½ä¸å‡è¡¡â€çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œ<code>CPU-1</code>ï¼ˆå°æ ¸ï¼‰ä¸ŠæŒ¤æ»¡äº†é«˜è´Ÿè½½ä»»åŠ¡å¯¼è‡´å…¶åˆ©ç”¨ç‡é¥±å’Œï¼Œè€Œ <code>CPU-7</code>ï¼ˆå¤§æ ¸ï¼‰å´å¾ˆç©ºé—²ã€‚æ­¤æ—¶ï¼Œè°ƒåº¦å™¨ä¼šåˆ¤å®šç³»ç»Ÿå¤±è¡¡ï¼Œå¹¶å°† <code>CPU-1</code> ä¸Šçš„æŸä¸ªé«˜è´Ÿè½½ä»»åŠ¡â€œæ‹‰åˆ°â€ï¼ˆpullï¼‰<code>CPU-7</code> ä¸Šè¿è¡Œï¼Œä»¥æ¢å¤å¹³è¡¡ï¼Œæå‡æ€§èƒ½ã€‚</li>
<li><strong>å”¤é†’æ—¶è¿ç§» (Wake-up Migration)</strong> : å½“ä¸€ä¸ªçº¿ç¨‹ç¡é†’æ—¶ï¼Œè°ƒåº¦å™¨ä¼šé‡æ–°è¯„ä¼°å®ƒçš„æœ€ä½³æ ¸å¿ƒã€‚å¦‚æœè¿™ä¸ªçº¿ç¨‹åœ¨ç¡çœ æœŸé—´ <code>util</code> å‘ç”Ÿäº†å˜åŒ–ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªåå°ä¸‹è½½çº¿ç¨‹çªç„¶æ”¶åˆ°äº†ä¸€ä¸ªå¤§æ–‡ä»¶ä¸‹è½½ä»»åŠ¡ï¼Œ<code>util</code> é£™å‡ï¼‰ï¼Œæˆ–è€…åŸå…ˆè¿è¡Œçš„æ ¸å¿ƒç°åœ¨éå¸¸ç¹å¿™ï¼Œè°ƒåº¦å™¨å°±å¯èƒ½åœ¨å”¤é†’æ—¶ç›´æ¥ä¸ºå®ƒé€‰æ‹©ä¸€ä¸ªæ›´åˆé€‚çš„æ–°æ ¸å¿ƒï¼Œè€Œä¸æ˜¯è®©å®ƒåœ¨åŸæ¥çš„åœ°æ–¹æ’é˜Ÿã€‚</li>
</ol>
<p>ç†è§£é€‰æ ¸ä¸è¿ç§»é€»è¾‘ï¼Œæœ‰åŠ©äºæˆ‘ä»¬åˆ¤æ–­è°ƒåº¦å™¨çš„è¡Œä¸ºæ˜¯å¦â€œå¼‚å¸¸â€ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ˜æ˜¾çš„å‰å° UI çº¿ç¨‹è¢«ä¸åˆç†åœ°é•¿æ—¶é—´é™åˆ¶åœ¨å°æ ¸ä¸Šï¼Œæˆ–è€…åœ¨å¤§å°æ ¸ä¹‹é—´è¿‡äºé¢‘ç¹åœ°â€œåå¤æ¨ªè·³â€ï¼Œéƒ½å¯èƒ½æš—ç¤ºç€ç³»ç»Ÿè°ƒåº¦ç­–ç•¥æˆ–ä»»åŠ¡ä¼˜å…ˆçº§è®¾ç½®å­˜åœ¨é—®é¢˜ã€‚</p>
<p>å½“ç„¶ç›®å‰ Android å‚å•†é’ˆå¯¹è°ƒåº¦å™¨æœ‰åšéå¸¸å¤šçš„å®¢åˆ¶åŒ–ï¼Œå…³é”® Taskï¼ˆCritical Taskï¼‰é€šå¸¸ä¼šå ç”¨æ›´å¤šçš„ CPU ï¼Œç”šè‡³æ›´å®¹æ˜“ä¸Šå¤§æ ¸ã€‚å¦å¤–è¿˜æœ‰å¾ˆå¤šç»‘æ ¸ç­–ç•¥ã€ç­¾æ ¸ç­–ç•¥ï¼Œå¯¼è‡´å¤§å®¶çœ‹åˆ°çš„æ¯ä¸ªå‚å•†çš„ç°è±¡éƒ½ä¸ä¸€æ ·ã€‚è¿™ä¹Ÿæ˜¯å„ä¸ªå‚å•†çš„æ ¸å¿ƒç«äº‰åŠ›ï¼ˆæ¯”å¦‚ Oppo çš„èœ‚é¸Ÿå¼•æ“ï¼‰ã€‚</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-practices-sql" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-24">å®æˆ˜ä¸ SQL</h3>
<h4 data-id="heading-25">ä½¿ç”¨ SQL è¿›è¡Œé‡åŒ–åˆ†æ</h4>
<p>Perfetto å†…ç½®çš„ SQL æŸ¥è¯¢å¼•æ“æ˜¯å…¶å¼ºå¤§åŠŸèƒ½ä¹‹ä¸€ï¼Œå…è®¸å¼€å‘è€…å¯¹ Trace æ•°æ®è¿›è¡Œç²¾ç¡®çš„èšåˆã€ç­›é€‰å’Œåˆ†æã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ CPU åˆ†ææŸ¥è¯¢ã€‚</p>
<h4 data-id="heading-26">1. è®¡ç®—å„è¿›ç¨‹çš„ CPU æ€»æ—¶é•¿</h4>
<p>æ­¤æŸ¥è¯¢ç»Ÿè®¡æ¯ä¸ªè¿›ç¨‹åœ¨æ‰€æœ‰ CPU ä¸Šè¿è¡Œçš„æ€»æ—¶é•¿ï¼ŒæŒ‰é™åºæ’åˆ—ï¼Œç”¨äºå¿«é€Ÿå®šä½æ¶ˆè€— CPU èµ„æºæœ€å¤šçš„è¿›ç¨‹ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">SELECT</span>
  process.name,
  sum(dur) / <span class="hljs-number">1e9</span> <span class="hljs-keyword">AS</span> total_cpu_time_s
<span class="hljs-keyword">FROM</span> sched
<span class="hljs-keyword">JOIN</span> thread <span class="hljs-keyword">ON</span> sched.utid = thread.utid
<span class="hljs-keyword">JOIN</span> process <span class="hljs-keyword">ON</span> thread.upid = process.upid
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> process.name
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> total_cpu_time_s DESC;
</code></pre>
<h4 data-id="heading-27">2. åˆ†æå•ä¸ªçº¿ç¨‹çš„æ—¶é—´çŠ¶æ€åˆ†å¸ƒ</h4>
<p>æ­¤æŸ¥è¯¢åŸºäº <code>thread_state</code> è¡¨ï¼Œå¯ç”¨äºåˆ†æç‰¹å®šçº¿ç¨‹ï¼ˆç¤ºä¾‹ä¸º <code>surfaceflinger</code>ï¼‰åœ¨å„ç§çŠ¶æ€ä¸‹çš„æ—¶é—´åˆ†å¸ƒï¼Œä»è€Œåˆ¤æ–­å…¶ä¸»è¦ç“¶é¢ˆã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span>
  <span class="hljs-keyword">CASE</span> state
    <span class="hljs-keyword">WHEN</span> <span class="hljs-string">'Running'</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'Running'</span>
    <span class="hljs-keyword">WHEN</span> <span class="hljs-string">'R'</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'Runnable'</span>
    <span class="hljs-keyword">WHEN</span> <span class="hljs-string">'S'</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'Interruptible Sleep'</span>
    <span class="hljs-keyword">WHEN</span> <span class="hljs-string">'D'</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'Uninterruptible Sleep'</span>
    <span class="hljs-keyword">ELSE</span> state
  <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> human_state,
  <span class="hljs-built_in">sum</span>(dur) <span class="hljs-operator">/</span> <span class="hljs-number">1e6</span> <span class="hljs-keyword">AS</span> total_time_ms
<span class="hljs-keyword">FROM</span> thread_state
<span class="hljs-keyword">WHERE</span> utid <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> utid <span class="hljs-keyword">FROM</span> thread <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'surfaceflinger'</span> LIMIT <span class="hljs-number">1</span>)
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> human_state
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> total_time_ms <span class="hljs-keyword">DESC</span>;
</code></pre>
<h4 data-id="heading-28">3. æŸ¥æ‰¾ç‰¹å®šæ—¶é—´æ®µå†… CPU æ¶ˆè€—æœ€é«˜çš„çº¿ç¨‹</h4>
<p>æ­¤æŸ¥è¯¢ç”¨äºåˆ†æç‰¹å®šåœºæ™¯ï¼ˆå¦‚åº”ç”¨å¯åŠ¨çš„ 2-5s æ—¶é—´æ®µï¼‰ä¸­ï¼Œæ¶ˆè€— CPU æ—¶é—´æœ€é•¿çš„çº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">SELECT</span>
  thread.name,
  sum(dur) / <span class="hljs-number">1e9</span> <span class="hljs-keyword">AS</span> cpu_time_s
<span class="hljs-keyword">FROM</span> sched
<span class="hljs-keyword">JOIN</span> thread <span class="hljs-keyword">ON</span> sched.utid = thread.utid
-- æ—¶é—´æˆ³å•ä½ä¸ºçº³ç§’ï¼Œå¯ä»¥è‡ªå·±åŠ ä¸Š <span class="hljs-keyword">WHERE</span> ts &gt; <span class="hljs-number">2e9</span> <span class="hljs-built_in">AND</span> ts &lt; <span class="hljs-number">5e9</span> æ¥å–æŸä¸€æ®µæ—¶é—´
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> thread.name
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> cpu_time_s DESC
LIMIT <span class="hljs-number">20</span>;
</code></pre>
<h4 data-id="heading-29">4. æŸ¥çœ‹çº¿ç¨‹åœ¨å„ CPU æ ¸å¿ƒä¸Šçš„è¿è¡Œæ—¶é—´åˆ†å¸ƒ</h4>
<p>æ­¤æŸ¥è¯¢æœ‰åŠ©äºäº†è§£ä¸€ä¸ªçº¿ç¨‹çš„ CPU äº²å’Œæ€§ï¼Œä»¥åŠå®ƒæ˜¯å¦åœ¨é¢„æœŸçš„å¤§å°æ ¸ä¸Šè¿è¡Œã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">SELECT</span>
  cpu,
  sum(dur) / <span class="hljs-number">1e6</span> <span class="hljs-keyword">AS</span> time_on_cpu_ms
<span class="hljs-keyword">FROM</span> sched
<span class="hljs-keyword">WHERE</span> utid = (<span class="hljs-keyword">SELECT</span> utid <span class="hljs-keyword">FROM</span> thread <span class="hljs-keyword">WHERE</span> name = <span class="hljs-comment">'system_server' LIMIT 1)</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> cpu
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> cpu;
</code></pre>
<h4 data-id="heading-30">5. è®¡ç®—å„è¿›ç¨‹çš„ CPU åˆ©ç”¨ç‡</h4>
<p>æ­¤æŸ¥è¯¢è®¡ç®—äº†æ¯ä¸ªè¿›ç¨‹åœ¨æ•´ä¸ª Trace æ—¶é—´èŒƒå›´å†…çš„ CPU åˆ©ç”¨ç‡ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">SELECT</span>
  process.name <span class="hljs-keyword">AS</span> process_name,
  <span class="hljs-number">100</span> * sum(dur) / CAST(TRACE_END() - TRACE_START() <span class="hljs-keyword">AS</span> REAL) <span class="hljs-keyword">AS</span> cpu_utilization_percent
<span class="hljs-keyword">FROM</span> sched
<span class="hljs-keyword">JOIN</span> thread <span class="hljs-keyword">ON</span> thread.utid = sched.utid
<span class="hljs-keyword">JOIN</span> process <span class="hljs-keyword">ON</span> process.upid = thread.upid
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> process.name
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> cpu_utilization_percent DESC;
</code></pre>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-summary" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-31">æ€»ç»“</h3>
<p>å¯¹ Perfetto ä¸­ CPU ä¿¡æ¯çš„ç†Ÿç»ƒåˆ†æï¼Œæ˜¯ Android æ€§èƒ½ä¼˜åŒ–çš„å…³é”®æŠ€èƒ½ã€‚é€šè¿‡æ·±åº¦ç†è§£ <strong>æ ¸å¿ƒæ¶æ„</strong>ã€<strong>çº¿ç¨‹çŠ¶æ€</strong>ã€<strong>å”¤é†’å…³ç³»</strong>ã€<strong>é¢‘ç‡é™åˆ¶</strong> å’Œ <strong>C-State</strong>ï¼Œå¹¶ç»“åˆå¼ºå¤§çš„ <strong>SQL æŸ¥è¯¢</strong>è¿›è¡Œé‡åŒ–åˆ†æï¼Œå¼€å‘è€…å¯ä»¥ç²¾å‡†åœ°å®šä½å¹¶è§£å†³å„ç±»æ€§èƒ½ä¸åŠŸè€—é—®é¢˜ã€‚</p>
<h2 data-id="heading-32">å…³äºæˆ‘ &amp;&amp; åšå®¢</h2>
<p>ä¸‹é¢æ˜¯ä¸ªäººçš„ä»‹ç»å’Œç›¸å…³çš„é“¾æ¥ï¼ŒæœŸæœ›ä¸åŒè¡Œçš„å„ä½å¤šå¤šäº¤æµï¼Œä¸‰äººè¡Œï¼Œåˆ™å¿…æœ‰æˆ‘å¸ˆ!</p>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2Fabout%2F" target="_blank" title="https://www.androidperformance.com/about/" ref="nofollow noopener noreferrer">åšä¸»ä¸ªäººä»‹ç»</a> ï¼šé‡Œé¢æœ‰ä¸ªäººçš„å¾®ä¿¡å’Œå¾®ä¿¡ç¾¤é“¾æ¥ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2019%2F12%2F01%2FBlogMap%2F" target="_blank" title="https://www.androidperformance.com/2019/12/01/BlogMap/" ref="nofollow noopener noreferrer">æœ¬åšå®¢å†…å®¹å¯¼èˆª</a> ï¼šä¸ªäººåšå®¢å†…å®¹çš„ä¸€ä¸ªå¯¼èˆªã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2018%2F05%2F07%2FAndroid-performance-optimization-skills-and-tools%2F" target="_blank" title="https://androidperformance.com/2018/05/07/Android-performance-optimization-skills-and-tools/" ref="nofollow noopener noreferrer">ä¸ªäººæ•´ç†å’Œæœé›†çš„ä¼˜ç§€åšå®¢æ–‡ç«  - Android æ€§èƒ½ä¼˜åŒ–å¿…çŸ¥å¿…ä¼š</a> ï¼šæ¬¢è¿å¤§å®¶è‡ªèå’Œæ¨è ï¼ˆå¾®ä¿¡ç§èŠå³å¯ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2023%2F12%2F30%2Fthe-performance%2F" target="_blank" title="https://www.androidperformance.com/2023/12/30/the-performance/" ref="nofollow noopener noreferrer">Androidæ€§èƒ½ä¼˜åŒ–çŸ¥è¯†æ˜Ÿçƒ</a> ï¼š æ¬¢è¿åŠ å…¥ï¼Œå¤šè°¢æ”¯æŒï½</li>
</ol>
<blockquote>
<p><strong>ä¸€ä¸ªäººå¯ä»¥èµ°çš„æ›´å¿« , ä¸€ç¾¤äººå¯ä»¥èµ°çš„æ›´è¿œ</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–°æ‰‹å»ºç«™é›¶é—¨æ§›ï¼Vercel+Cloudflare+NamesiloåŸŸåè´­ä¹°éƒ¨ç½²å…¨æµç¨‹]]></title>    <link>https://juejin.cn/post/7572757056438583305</link>    <guid>https://juejin.cn/post/7572757056438583305</guid>    <pubDate>2025-11-16T13:36:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572757056438583305" data-draft-id="7572793505900265523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–°æ‰‹å»ºç«™é›¶é—¨æ§›ï¼Vercel+Cloudflare+NamesiloåŸŸåè´­ä¹°éƒ¨ç½²å…¨æµç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-16T13:36:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç½‘é¡µå»ºç­‘å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/2999123453678535"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–°æ‰‹å»ºç«™é›¶é—¨æ§›ï¼Vercel+Cloudflare+NamesiloåŸŸåè´­ä¹°éƒ¨ç½²å…¨æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2999123453678535/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç½‘é¡µå»ºç­‘å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:36:54.000Z" title="Sun Nov 16 2025 13:36:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ‘˜è¦</p>
<p>ä½ æ˜¯å¦ä¹Ÿå’Œæˆ‘ä¸€æ ·ï¼Œæƒ³æ‹¥æœ‰ä¸€ä¸ªå±äºè‡ªå·±ç½‘ç«™æˆ–åšå®¢ï¼Ÿ</p>
<p>ä½†ä¸€æƒ³åˆ°â€œåŸŸåâ€ã€â€œæœåŠ¡å™¨â€ã€â€œéƒ¨ç½²â€è¿™äº›è¯å°±å¤´å¤§ï¼Œè§‰å¾—æ—¢éº»çƒ¦åˆæ˜‚è´µï¼Ÿ</p>
<p>è¿™ç¯‡æ•™ç¨‹ä¸“ä¸ºé¦–æ¬¡å»ºç«™çš„æ–°æ‰‹å‡†å¤‡ï¼ç”¨Namesiloä¹°ä¾¿å®œåŸŸåï¼ŒCloudflareåšå…è´¹åŠ é€Ÿå’Œå®‰å…¨é˜²æŠ¤ï¼ŒVercelä¸€é”®éƒ¨ç½²ç½‘ç«™ï¼Œå››æ­¥å°±èƒ½æå®šä»åŸŸååˆ°ä¸Šçº¿çš„å…¨æµç¨‹ï¼Œæ¯ä¸€æ­¥éƒ½æœ‰è¯¦ç»†æ“ä½œï¼Œçœ‹å®Œå°±èƒ½ä¸Šæ‰‹ï¼</p>
<p><img src="https://aip-enc.uecloud.com.cn/aiPainting/enc/eyJhbGciOiJIUzI1NiJ9.LzEvY2xvdWRzLWNvbm5lY3QtdGVjaG5vbG9neS1tZW4tZG93bmxvYWQtbmF0dXJlLWlkZWFzLWdlbmVyYXRlZC1ieS1haV8xODg1NDQtMjYwODcuanBn.n55QbpXpBfRnJjFFnZ5SfY6QyOX_pSaQNj4obLaDh1s.jpg" alt="Vercel+Cloudflare" loading="lazy"/></p>
<h2 data-id="heading-0"/>
<p>ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªâ€œé»„é‡‘ç»„åˆâ€ï¼Ÿ</p>
<p><strong>ä¸‰ä¸ªå·¥å…·çš„æ ¸å¿ƒä¼˜åŠ¿</strong></p>
<p>å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œé€‰æ‹©å·¥å…·çš„å…³é”®æ˜¯ç®€å•ã€çœé’±ã€ç¨³å®šã€‚è¿™ä¸‰ä¸ªå·¥å…·å®Œç¾å¥‘åˆè¿™äº›éœ€æ±‚ï¼š</p>
<ul>
<li><strong>Namesilo</strong>ï¼šåŸŸåä»·æ ¼äº²æ°‘ï¼ˆ.comåŸŸåæ¯å¹´çº¦17ç¾å…ƒï¼Œ.topåŸŸååªéœ€è¦1.48ç¾å…ƒï¼‰ï¼Œæä¾›Â **å…è´¹Whoisä¿æŠ¤ï¼Œ**éšè—ä¸ªäººä¿¡æ¯ï¼Œç®¡ç†ç•Œé¢æ— å¹¿å‘Šï¼Œæ“ä½œé€»è¾‘æ¸…æ™°ï¼Œæ–°æ‰‹ä¹Ÿèƒ½å¿«é€Ÿä¸Šæ‰‹ã€‚</li>
<li><strong>Cloudflare</strong>ï¼šå…è´¹æä¾›<strong>CDNåŠ é€Ÿ</strong>ï¼ˆè®©ç½‘ç«™æ‰“å¼€æ›´å¿«ï¼‰ã€DNSè§£æã€DDoSé˜²æŠ¤ï¼Œè¿˜èƒ½è‡ªåŠ¨ç”ŸæˆHTTPSè¯ä¹¦ï¼Œè§£å†³ç½‘ç«™å®‰å…¨å’Œé€Ÿåº¦é—®é¢˜ã€‚</li>
<li><strong>Vercel</strong>ï¼šæ”¯æŒGitHub/GitLabä¸€é”®å¯¼å…¥é¡¹ç›®ï¼Œè‡ªåŠ¨æ„å»ºéƒ¨ç½²ï¼Œæä¾›ä¸´æ—¶åŸŸåï¼Œç»‘å®šè‡ªå®šä¹‰åŸŸåè¶…ç®€å•ï¼Œå°¤å…¶é€‚åˆReact/Vueç­‰å‰ç«¯é¡¹ç›®ã€‚</li>
</ul>
<p>è¿™ä¸‰ä¸ªå·¥å…·ç»„åˆèµ·æ¥ï¼Œæ€»æˆæœ¬ä»…éœ€åŸŸåå¹´è´¹ï¼ˆçº¦å‡ åå…ƒäººæ°‘å¸ï¼‰ï¼Œå·¥å…·æœ¬èº«å…¨å…è´¹ï¼Œä¸éœ€è¦è´­ä¹°æœåŠ¡å™¨æˆ–å¤æ‚é…ç½®ï¼Œæ˜¯æ–°æ‰‹å»ºç«™çš„æœ€ä¼˜é€‰æ‹©ï¼</p>
<h2 data-id="heading-1"/>
<p>ç¬¬ä¸€æ­¥ï¼šè´­ä¹°åŸŸå (Namesilo)</p>
<p>é€‰æ‹© <strong>NameSilo</strong> é™¤äº†ä»·æ ¼ä½ï¼Œæ›´é‡è¦æ˜¯æ”¯æŒæ”¯ä»˜å®ï¼Œå¯¹å›½å†…ç”¨æˆ·æ”¯ä»˜å‹å¥½ã€‚</p>
<p>1. æ³¨å†ŒNamesiloè´¦å·ï¼šè®¿é—®Namesiloå®˜ç½‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.namesilo.com%25EF%25BC%2589%25EF%25BC%258C%25E7%2582%25B9%25E5%2587%25BB%25E5%258F%25B3%25E4%25B8%258A%25E8%25A7%2592%25E2%2580%259CSign" target="_blank" title="https://www.namesilo.com%EF%BC%89%EF%BC%8C%E7%82%B9%E5%87%BB%E5%8F%B3%E4%B8%8A%E8%A7%92%E2%80%9CSign" ref="nofollow noopener noreferrer">www.namesilo.comï¼‰ï¼Œç‚¹å‡»å³ä¸Šè§’â€œSign</a> Upâ€ï¼Œå¡«å†™é‚®ç®±å’Œå¯†ç å®Œæˆæ³¨å†Œ</p>
<p><img src="https://s.uecloud.com.cn/upload/image/bd/577d65678ee29c1fec9b52fd748209dd.png" alt="" loading="lazy"/></p>
<p>2. æœç´¢åŸŸåï¼šåœ¨é¦–é¡µæœç´¢æ¡†è¾“å…¥ä½ æƒ³è¦çš„åŸŸåï¼ˆæ¯”å¦‚â€œfupanoteâ€ï¼‰ï¼Œç‚¹å‡»â€œSearchâ€æŸ¥çœ‹æ˜¯å¦å¯ç”¨ã€‚</p>
<p>æœç´¢åï¼Œä½ ä¼šçœ‹åˆ°å¯ç”¨çš„åŸŸååˆ—è¡¨ã€‚é€‰æ‹©ä½ å¿ƒä»ªçš„ï¼Œç‚¹å‡»â€œAdd to Cartâ€ã€‚æˆ‘é€‰æ‹©äº† top åŸŸåï¼Œå‰æœŸå…ˆç”¨è´¹ç”¨ä½çš„æµ‹è¯•ï¼Œåé¢æµé‡èµ·æ¥å†ç”¨ com åŸŸå</p>
<p><img src="https://s.uecloud.com.cn/upload/image/3b/e57db5f3dc01ea7452c66bd592509ff7.png" alt="" loading="lazy"/></p>
<p>3.ç»“ç®—ä»˜æ¬¾ï¼šç‚¹å‡»é¡¶éƒ¨â€œCartâ€å›¾æ ‡ï¼Œæ£€æŸ¥è´­ç‰©è½¦å†…å®¹ï¼ŒåŠ¡å¿…å‹¾é€‰â€œFree Whois Guardâ€ï¼ˆå…è´¹éšè—ä¸ªäººä¿¡æ¯ï¼‰ï¼Œï¼Œé€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼ˆä¿¡ç”¨å¡/PayPalï¼‰å®Œæˆä»˜æ¬¾ï¼Œå¯é€‰æ”¯ä»˜å®</p>
<p><img src="https://s.uecloud.com.cn/upload/image/e5/faa3db74be28f8c6b5dbb45fd205a5d4.png" alt="" loading="lazy"/></p>
<p>Namesiloçš„åå°ç®¡ç†éå¸¸ç›´è§‚ï¼Œä½ å¯ä»¥åœ¨ â€œDomain Managerâ€ é‡Œæ‰¾åˆ°ä½ æ‰€æœ‰çš„åŸŸåï¼Œå¹¶ç®¡ç†å®ƒä»¬çš„DNSè®¾ç½®ã€‚è®°ä½è¿™ä¸ªåœ°æ–¹ï¼Œæˆ‘ä»¬åé¢ä¼šç”¨åˆ°ã€‚</p>
<p><img src="https://s.uecloud.com.cn/upload/image/28/26dd07fedf9027be52a3d67035f6ec38.png" alt="" loading="lazy"/></p>
<blockquote>
<p>å†æ¬¡æé†’ï¼šFree Whois Guardæ˜¯å¿…é€‰é¡¹ï¼Œèƒ½æœ‰æ•ˆä¿æŠ¤ä½ çš„éšç§ï¼Œé¿å…åƒåœ¾é‚®ä»¶å’Œä¿¡æ¯æ³„éœ²ï¼</p>
</blockquote>
<h2 data-id="heading-2"/>
<p>ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²ç½‘ç«™åˆ° Vercel</p>
<p>1. ç™»å½•Vercelï¼šè®¿é—®Vercelå®˜ç½‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%25EF%25BC%2589%25EF%25BC%258C%25E7%2594%25A8GitHub%25E8%25B4%25A6%25E5%258F%25B7%25E6%258E%2588%25E6%259D%2583%25E7%2599%25BB%25E5%25BD%2595%25EF%25BC%2588%25E6%259C%2580%25E6%2596%25B9%25E4%25BE%25BF%25EF%25BC%2589%25E3%2580%2582" target="_blank" title="https://vercel.com%EF%BC%89%EF%BC%8C%E7%94%A8GitHub%E8%B4%A6%E5%8F%B7%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95%EF%BC%88%E6%9C%80%E6%96%B9%E4%BE%BF%EF%BC%89%E3%80%82" ref="nofollow noopener noreferrer">vercel.comï¼‰ï¼Œç”¨GitHubè´¦å·æˆæƒç™»å½•ï¼ˆæœ€æ–¹ä¾¿ï¼‰ã€‚</a></p>
<p>2. å¯¼å…¥é¡¹ç›®ï¼šç‚¹å‡»â€œNew Projectâ€â†’â€œImport from Git Repositoryâ€ï¼Œé€‰æ‹©ä½ çš„GitHubä»“åº“ï¼ˆéœ€æå‰æˆæƒï¼‰ã€‚</p>
<p><img src="https://s.uecloud.com.cn/upload/image/34/640cd688ace9bd28c3d4e1e4f0d7fd84.png" alt="" loading="lazy"/></p>
<p>3. é…ç½®é¡¹ç›®ï¼šè¾“å…¥é¡¹ç›®åç§°ï¼Œé€‰æ‹©ä»£ç åˆ†æ”¯ï¼ˆæ¯”å¦‚mainï¼‰ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼Œç›´æ¥ç‚¹å‡»â€œDeployâ€ã€‚</p>
<p>4. ç­‰å¾…éƒ¨ç½²ï¼šVercelä¼šè‡ªåŠ¨æ‹‰å–ä»£ç ã€æ„å»ºé¡¹ç›®ï¼Œçº¦1åˆ†é’Ÿåéƒ¨ç½²å®Œæˆï¼Œé¡µé¢æ˜¾ç¤ºä¸´æ—¶åŸŸåï¼ˆæ¯”å¦‚â€œyour-project.vercel.appâ€ï¼‰ï¼Œç‚¹å‡»å³å¯è®¿é—®ç½‘ç«™ã€‚</p>
<h2 data-id="heading-3"/>
<p>ç¬¬ä¸‰æ­¥ï¼šé…ç½®CloudfareåŠ é€Ÿä¸DNS</p>
<p>1. æ³¨å†ŒCloudflareï¼šè®¿é—®Cloudflareå®˜ç½‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cloudflare.com%25EF%25BC%2589%25EF%25BC%258C%25E7%2594%25A8%25E9%2582%25AE%25E7%25AE%25B1%25E6%25B3%25A8%25E5%2586%258C%25E8%25B4%25A6%25E5%258F%25B7%25EF%25BC%258C%25E7%2582%25B9%25E5%2587%25BB%25E5%25A4%25B4%25E5%2583%258F%25EF%25BC%258C%25E8%25AE%25BE%25E7%25BD%25AE%25E8%25AF%25AD%25E8%25A8%2580%25E9%2580%2589%25E6%258B%25A9%25E7%25AE%2580%25E4%25BD%2593%25E4%25B8%25AD%25E6%2596%2587" target="_blank" title="https://www.cloudflare.com%EF%BC%89%EF%BC%8C%E7%94%A8%E9%82%AE%E7%AE%B1%E6%B3%A8%E5%86%8C%E8%B4%A6%E5%8F%B7%EF%BC%8C%E7%82%B9%E5%87%BB%E5%A4%B4%E5%83%8F%EF%BC%8C%E8%AE%BE%E7%BD%AE%E8%AF%AD%E8%A8%80%E9%80%89%E6%8B%A9%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87" ref="nofollow noopener noreferrer">www.cloudflare.comï¼‰ï¼Œç”¨é‚®ç®±æ³¨å†Œè´¦å·ï¼Œç‚¹å‡»å¤´åƒï¼Œè®¾ç½®è¯­è¨€é€‰æ‹©ç®€ä½“ä¸­æ–‡</a></p>
<p><img src="https://s.uecloud.com.cn/upload/image/79/2a5d22e83f4bbef214e2bd20b271c247.png" alt="" loading="lazy"/></p>
<p>2. æ·»åŠ ç«™ç‚¹ï¼šç‚¹å‡»â€œè¿æ¥åŸŸâ€ï¼Œè¾“å…¥ä½ åœ¨Namesiloè´­ä¹°çš„åŸŸåï¼ˆæ¯”å¦‚â€œfupanote.topâ€ï¼‰ï¼Œç‚¹å‡»â€œç»§ç»­â€ã€‚ã€</p>
<p><img src="https://s.uecloud.com.cn/upload/image/0d/b6cec8e0bbc31397747cad2bff66fbfb.png" alt="" loading="lazy"/></p>
<p>3. é€‰æ‹©è®¡åˆ’ï¼šé»˜è®¤é€‰æ‹©â€œFree Planâ€ï¼ˆå…è´¹è®¡åˆ’ï¼‰</p>
<p><img src="https://s.uecloud.com.cn/upload/image/1f/5c28fa20fc3c298993f33ee4190bd50e.png" alt="" loading="lazy"/></p>
<p>4.åˆ›å»ºåï¼ŒCloudflareä¼šæä¾›2ä¸ªDNSæœåŠ¡å™¨åœ°å€ï¼ˆæ¯”å¦‚â€œns1.cloudflare.comâ€å’Œâ€œns2.cloudflare.comâ€ï¼‰ï¼Œå¤åˆ¶è¿™ä¸¤ä¸ªåœ°å€ã€‚</p>
<p><img src="https://s.uecloud.com.cn/upload/image/64/5d26407ba907ad39a3468cc0aed1db8a.png" alt="" loading="lazy"/></p>
<p>5. ä¿®æ”¹Namesiloçš„DNSæœåŠ¡å™¨ï¼š</p>
<p>å›åˆ°Namesiloï¼Œç‚¹å‡»â€œMy Domainsâ€â†’åŸŸåæ—è¾¹çš„â€œManage DNSâ€â†’â€œChange Nameserversâ€ï¼Œæ›¿æ¢æˆCloudflareçš„DNSåœ°å€ï¼Œç‚¹å‡»â€œSubmitâ€ä¿å­˜ã€‚</p>
<p><img src="https://s.uecloud.com.cn/upload/image/a9/f80b3c3b80495514767e4a3cb5446fad.png" alt="" loading="lazy"/></p>
<p>6. éªŒè¯DNSï¼šå›åˆ°Cloudflareï¼Œç‚¹å‡»â€œDone, check nameserversâ€</p>
<p><img src="https://s.uecloud.com.cn/upload/image/78/33cd73dc3558cc67958dd2713df9be57.png" alt="" loading="lazy"/></p>
<p>DNSæœåŠ¡å™¨ä¿®æ”¹åï¼Œç­‰å¾…DNSç”Ÿæ•ˆï¼ˆé€šå¸¸5-30åˆ†é’Ÿï¼Œæœ€é•¿24å°æ—¶ï¼‰ã€‚å…¨çƒDNSç¼“å­˜æ›´æ–°éœ€è¦æ—¶é—´ï¼Œè¿™æ®µæ—¶é—´ç½‘ç«™å¯èƒ½æ— æ³•è®¿é—®ï¼Œè€å¿ƒç­‰å¾…å³å¯ï¼</p>
<h2 data-id="heading-4"/>
<p>ç»‘å®šåŸŸååˆ° Vercel</p>
<p>1. Vercelæ·»åŠ åŸŸåï¼šè¿›å…¥ä½ çš„Vercelé¡¹ç›®â†’â€œSettingsâ€â†’â€œDomainsâ€ï¼Œè¾“å…¥ä½ çš„åŸŸåï¼ˆæ¯”å¦‚â€œfupanote.topâ€ï¼‰ï¼Œç‚¹å‡»â€œAddâ€ã€‚</p>
<p><img src="https://s.uecloud.com.cn/upload/image/d5/0bf9a8331f2d65f43adeaa8b1a1b483e.png" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»æ·»åŠ åŸŸååï¼Œä¼šåˆ›å»ºä¸¤æ¡ DNS Records è®°å½•ï¼Œåœ¨Â Cloudflare åˆ†åˆ«åˆ›å»ºä¸¤å¤©ç›¸åŒçš„è®°å½•æ˜ å°„å°±å¯ä»¥äº†</p>
<p><img src="https://s.uecloud.com.cn/upload/image/db/df26c9e98deaa3fff07a4b5ab5b96355.png" alt="" loading="lazy"/></p>
<p>2.Cloudflareæ·»åŠ CNAMEè®°å½•ï¼Œå¤åˆ¶ä¸Šé¢çš„ä¿¡æ¯å¡«å…¥åˆ›å»ºçš„è®°å½•</p>
<p><img src="https://s.uecloud.com.cn/upload/image/d9/c61b0f6aa0eee1aa3be6472ca11a765b.png" alt="" loading="lazy"/></p>
<p>å›åˆ° Vercel åŸŸåé¡µé¢ï¼Œåˆ·æ–°å°±å¯ä»¥çœ‹åˆ°è¢«æ¿€æ´»å¯ä»¥è®¿é—®äº†</p>
<p><img src="https://s.uecloud.com.cn/upload/image/48/b87d45d96c7a56d111463c44523a5fb2.png" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agent : CrewAI ç®€å•ä½¿ç”¨ + å°è¯•ä¸€ä¸‹è‚¡ç¥¨åˆ†æ]]></title>    <link>https://juejin.cn/post/7572714389943615540</link>    <guid>https://juejin.cn/post/7572714389943615540</guid>    <pubDate>2025-11-16T13:46:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572714389943615540" data-draft-id="7570058831559311395" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agent : CrewAI ç®€å•ä½¿ç”¨ +  å°è¯•ä¸€ä¸‹è‚¡ç¥¨åˆ†æ"/> <meta itemprop="keywords" content="åç«¯,Python,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-16T13:46:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿—å­—è¾ˆå°èš‚èš"/> <meta itemprop="url" content="https://juejin.cn/user/3790771822007822"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agent : CrewAI ç®€å•ä½¿ç”¨ +  å°è¯•ä¸€ä¸‹è‚¡ç¥¨åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3790771822007822/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿—å­—è¾ˆå°èš‚èš
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:46:03.000Z" title="Sun Nov 16 2025 13:46:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">ä¸€. å‰è¨€</h2>
<p>ä¹‹å‰è¯´äº†ä¸€ç›´åœ¨åšè‚¡ç¥¨ä¿¡æ¯æ”¶é›† + é£é™© + æœºé‡ èˆ†æƒ…åˆ†æçš„ä¸€ä¸ªå°å·¥å…· ï¼Œç„¶åå¹´åº•çš„ç›®æ ‡æ˜¯æŠŠ AI æ¤å…¥è¿™ä¸ªç³»ç»Ÿã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸­å°è¯•äº†åŒ…æ‹¬ ï¼š CrewAI  / LangChain / AutoGen ã€‚ æ•´ä½“æ¥è¯´ç”¨æ³•éƒ½ç±»ä¼¼ ï¼Œæ‰€ä»¥ç»¼åˆä½¿ç”¨ä½“éªŒå’Œç»“æœå ï¼Œæˆ‘ä¸ªäººé€‰æ‹©äº† CrewAI ä½œä¸ºæ™ºèƒ½ä½“å¼•æ“ã€‚</p>
<p>é¡¹ç›®åœ°å€ ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fantblack%2Fai-demo%2Ftree%2Fmaster%2Fagent-demo%2FCrewAI_Sample_stock" target="_blank" title="https://gitee.com/antblack/ai-demo/tree/master/agent-demo/CrewAI_Sample_stock" ref="nofollow noopener noreferrer">gitee.com/antblack/aiâ€¦</a></p>
<h2 data-id="heading-1">äºŒ. ä½¿ç”¨æ–¹å¼</h2>
<ul>
<li><strong>CrewAI æ˜¯ä»€ä¹ˆ</strong> : ä¸€ä¸ªå¤šæ™ºèƒ½ä½“çš„å¼€æºæ¡†æ¶ ï¼Œç”¨äºå¤šæ™ºèƒ½ä½“çš„åœºæ™¯å¼€å‘</li>
<li><strong>æ ¸å¿ƒåŠŸèƒ½è¦ç‚¹</strong> ï¼š 3å¤§ä¸»è¦åŠŸèƒ½ç‚¹
<ul>
<li><em>æ™ºèƒ½ä½“ (Agent)</em> ï¼šå®šä¹‰è§’è‰² (Role)ã€ç›®æ ‡ (Goal) å’ŒèƒŒæ™¯ (Backstory)ï¼Œä½¿ AI æˆä¸ºç‰¹å®šåœºæ™¯çš„ä¸“å®¶
<ul>
<li>æˆ‘è¿™é‡Œç†è§£å°±æ˜¯æç¤ºè¯å¢å¼º ï¼Œé€šè¿‡æç¤ºè¯æ¥è®© AI å¤„ç†æ›´åŠ ä¸“ä¸€çš„äº‹æƒ…ï¼Œè‡³äºèƒ½å¤šä¸“å®¶ï¼Œå°±è¦çœ‹æç¤ºè¯æœ‰å¤šå¼ºäº†</li>
</ul>
</li>
<li><em>ä»»åŠ¡ (Task)</em> :åˆ†é…å…·ä½“å·¥ä½œï¼Œå¯è®¾ç½®é¢„æœŸè¾“å‡º (Expected Output) å’Œä¸Šä¸‹æ–‡ä¾èµ–ã€‚</li>
<li><em>å·¥å…· (Tools)</em> ï¼š èµ‹äºˆ Agent è”ç½‘æœç´¢ã€è¯»å†™æ–‡ä»¶ã€æ‰§è¡Œä»£ç ç­‰â€œæ‰‹è„šâ€èƒ½åŠ›</li>
</ul>
</li>
</ul>
<p>åŸºç¡€æ¦‚å¿µå°±è¯´è¿™ä¹ˆå¤š ï¼Œè¿™ä¸œè¥¿ä¹Ÿå‡ºæ¥å¾ˆä¹…äº†ï¼Œèµ„æ–™å¾ˆå¤šå°±ä¸èµ˜è¿°äº†ã€‚</p>
<blockquote>
<p>æ™ºèƒ½ä½“çš„åˆ›å»º ï¼š</p>
</blockquote>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_data_analyst_agent</span>(<span class="hljs-params">llm=<span class="hljs-literal">None</span></span>) -&gt; Agent:
    <span class="hljs-string">"""
    åˆ›å»ºæ•°æ®åˆ†æå¸ˆæ™ºèƒ½ä½“
    
    Args:
        llm: è¯­è¨€æ¨¡å‹å®ä¾‹ï¼ˆå¯é€‰ï¼‰
    
    Returns:
        é…ç½®å¥½çš„æ•°æ®åˆ†æå¸ˆ Agent
    """</span>
    agent_config = {
        <span class="hljs-string">"role"</span>: <span class="hljs-string">"èµ„æ·±è‚¡ç¥¨åˆ†æå¸ˆ"</span>,
        <span class="hljs-string">"goal"</span>: <span class="hljs-string">"å¯¹è‚¡ç¥¨è¿›è¡Œå…¨é¢çš„æŠ€æœ¯åˆ†æå’ŒåŸºæœ¬é¢åˆ†æï¼Œç»™å‡ºä¸“ä¸šçš„æŠ•èµ„å»ºè®®"</span>,
        <span class="hljs-string">"backstory"</span>: get_data_analyst_prompt(),
        <span class="hljs-string">"verbose"</span>: <span class="hljs-literal">True</span>,
        <span class="hljs-string">"allow_delegation"</span>: <span class="hljs-literal">False</span>
    }
    
    <span class="hljs-keyword">if</span> llm <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
        agent_config[<span class="hljs-string">"llm"</span>] = llm
    
    <span class="hljs-keyword">return</span> Agent(**agent_config)

</code></pre>
<blockquote>
<p>å·¥å…·è°ƒç”¨ ï¼š</p>
</blockquote>
<ul>
<li>å·¥å…·æˆ‘å‡†å¤‡äº†2ä¸ª ï¼š Tavily  å’Œ Tushare
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fapp.tavily.com%2Fhome" target="_blank" title="https://app.tavily.com/home" ref="nofollow noopener noreferrer">Tavily</a> ï¼š ä¸€ä¸ªèµ„è®¯æŸ¥è¯¢çš„å¹³å° ï¼Œæœ‰æ¯”è¾ƒé«˜çš„å…è´¹é¢åº¦ï¼Œæ¨è</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftushare.pro%2Fregister%3Freg%3D621792" target="_blank" title="https://tushare.pro/register?reg=621792" ref="nofollow noopener noreferrer">Tushare</a>  : ä¸€ä¸ªè‚¡ç¥¨é‡åŒ–å¹³å°ï¼Œæä¾›å…è´¹çš„é¢åº¦å¯ä»¥æŸ¥è¯¢è‚¡ç¥¨çš„æ—¥Kæ•°æ®</li>
</ul>
</li>
</ul>
<p>è¿™é‡Œä»£ç åªå±•ç¤ºä¸€ä¸‹ Tavily çš„è°ƒç”¨ ï¼Œå…¶ä»–çš„å¯ä»¥ä»é¡¹ç›®é‡Œé¢ä¸‹è½½ï¼š</p>
<pre><code class="hljs language-python" lang="python">TAVILY_API_KEY = os.environ.get(<span class="hljs-string">"TAVILY_API_KEY"</span>)

<span class="hljs-comment"># å‡è®¾ API Key æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œç›´æ¥åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
<span class="hljs-comment"># å¦‚æœ TAVILY_API_KEY ä¸º None, å®¢æˆ·ç«¯åœ¨è°ƒç”¨æ—¶ä¼šè‡ªè¡Œå¤±è´¥</span>
client = TavilyClient(api_key=TAVILY_API_KEY)
<span class="hljs-keyword">def</span> <span class="hljs-title function_">search_stock_news</span>(<span class="hljs-params">keyword: <span class="hljs-built_in">str</span>, max_results: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""
    æœç´¢è‚¡ç¥¨ç›¸å…³æ–°é—» (ç®€åŒ–ç‰ˆ)
    """</span>
    <span class="hljs-comment"># æ„å»ºæœç´¢æŸ¥è¯¢</span>
    query = <span class="hljs-string">f"<span class="hljs-subst">{keyword}</span> è‚¡ç¥¨ æœ€æ–°æ¶ˆæ¯"</span>

    <span class="hljs-comment"># æ‰§è¡Œæœç´¢</span>
    response = client.search(
        query=query,
        max_results=max_results,
        search_depth=<span class="hljs-string">"basic"</span>,
        include_domains=[<span class="hljs-string">"sina.com.cn"</span>, <span class="hljs-string">"eastmoney.com"</span>, <span class="hljs-string">"10jqka.com.cn"</span>, <span class="hljs-string">"cnstock.com"</span>]
    )

    results = response[<span class="hljs-string">'results'</span>]

    <span class="hljs-comment"># æ ¼å¼åŒ–è¾“å‡º</span>
    news_text = <span class="hljs-string">f"ã€<span class="hljs-subst">{keyword}</span> ç›¸å…³æ–°é—»ã€‘\n\n"</span>
    <span class="hljs-keyword">for</span> i, item <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(results, <span class="hljs-number">1</span>):
        title = item.get(<span class="hljs-string">'title'</span>, <span class="hljs-string">'æ— æ ‡é¢˜'</span>)
        url = item.get(<span class="hljs-string">'url'</span>, <span class="hljs-string">''</span>)
        content = item.get(<span class="hljs-string">'content'</span>, <span class="hljs-string">''</span>)

        <span class="hljs-comment"># æˆªå–å†…å®¹</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(content) &gt; <span class="hljs-number">200</span>:
            content = content[:<span class="hljs-number">200</span>] + <span class="hljs-string">"..."</span>

        news_text += <span class="hljs-string">f"<span class="hljs-subst">{i}</span>. <span class="hljs-subst">{title}</span>\n"</span>
        news_text += <span class="hljs-string">f"   æ‘˜è¦: <span class="hljs-subst">{content}</span>\n"</span>
        news_text += <span class="hljs-string">f"   æ¥æº: <span class="hljs-subst">{url}</span>\n\n"</span>

    <span class="hljs-keyword">return</span> news_text.strip()

</code></pre>
<ul>
<li>æ•°æ®å…¶å®æœ‰ä¸¤ç§æ–¹å¼çŒåˆ° CrewAI é‡Œé¢å» ï¼Œä½ å¯ä»¥å½“æˆæç¤ºè¯çš„åŸå§‹æ•°æ®å†™è¿›å» ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ CrewAI æœ¬èº«çš„ Tools çš„èƒ½åŠ›</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@tool(<span class="hljs-params"><span class="hljs-string">"æœç´¢è‚¡ç¥¨æ–°é—»"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">search_stock_news_tool</span>(<span class="hljs-params">keyword: <span class="hljs-built_in">str</span>, max_results: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    api_rate_limiter.wait_if_needed()
    <span class="hljs-keyword">return</span> _search_stock_news(keyword, max_results)
</code></pre>
<blockquote>
<p>å®šä¹‰ Task åŠ Agent åˆ—è¡¨</p>
</blockquote>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> crewai <span class="hljs-keyword">import</span> Agent, Task, Crew, Process

<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_stock_minimal</span>(<span class="hljs-params">stock_query: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
    <span class="hljs-comment"># ä»¥è´µå·èŒ…å°ä½œä¸ºæ¡ˆä¾‹</span>
    stock_code = <span class="hljs-string">"600519"</span> <span class="hljs-comment"># æŒ‰è¦æ±‚å†™æ­»æˆ–ç®€åŒ–</span>
    
    <span class="hljs-comment"># 2. è·å– LLM</span>
    llm = get_llm()
    
    <span class="hljs-comment"># 3. åˆ›å»ºæ™ºèƒ½ä½“ (é“¾å¼å®šä¹‰)</span>
    collector_agent = create_data_collector_agent(ALL_TOOLS, llm)
    analyst_agent = create_data_analyst_agent(llm)
    decision_agent = create_decision_maker_agent(llm)
    
    <span class="hljs-comment"># 4. åˆ›å»ºä»»åŠ¡ (å‹ç¼©æç¤ºè¯)</span>
    task_collect = Task(
        description=<span class="hljs-string">f"æ”¶é›† <span class="hljs-subst">{stock_query}</span> (<span class="hljs-subst">{stock_code}</span>) çš„æ•°æ®..."</span>,
        agent=collector_agent,
        expected_output=<span class="hljs-string">"æ•°æ®æ‘˜è¦..."</span>
    )
    
    task_analyze = Task(
        description=<span class="hljs-string">"åˆ†ææ•°æ®..."</span>,
        agent=analyst_agent,
        expected_output=<span class="hljs-string">"åˆ†ææŠ¥å‘Š..."</span>,
        context=[task_collect]
    )
    
    task_decision = Task(
        description=<span class="hljs-string">"ç»™å‡ºæŠ•èµ„å»ºè®®..."</span>,
        agent=decision_agent,
        expected_output=<span class="hljs-string">"æŠ•èµ„å†³ç­–..."</span>,
        context=[task_collect, task_analyze]
    )
    
    <span class="hljs-comment"># 5. åˆ›å»ºå¹¶æ‰§è¡Œ Crew</span>
    stock_crew = Crew(
        agents=[collector_agent, analyst_agent, decision_agent],
        tasks=[task_collect, task_analyze, task_decision],
        process=Process.sequential,
        <span class="hljs-comment"># verbose=True # æ¼”ç¤ºæ—¶å»ºè®®å¼€å¯ï¼Œä½†æŒ‰è¦æ±‚ç§»é™¤ print (verbose ä¼šè‡ªå·± print)</span>
    )
    
    <span class="hljs-comment"># 6. æ‰§è¡Œä»»åŠ¡</span>
    result = stock_crew.kickoff()
    
    <span class="hljs-comment"># 7. æå–ç»“æœ</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"stock_query"</span>: stock_query,
        <span class="hljs-string">"stage1_data"</span>: <span class="hljs-built_in">str</span>(task_collect.output.raw) <span class="hljs-keyword">if</span> task_collect.output <span class="hljs-keyword">else</span> <span class="hljs-string">"..."</span>,
        <span class="hljs-string">"stage2_analysis"</span>: <span class="hljs-built_in">str</span>(task_analyze.output.raw) <span class="hljs-keyword">if</span> task_analyze.output <span class="hljs-keyword">else</span> <span class="hljs-string">"..."</span>,
        <span class="hljs-string">"stage3_decision"</span>: <span class="hljs-built_in">str</span>(task_decision.output.raw) <span class="hljs-keyword">if</span> task_decision.output <span class="hljs-keyword">else</span> <span class="hljs-string">"..."</span>,
        <span class="hljs-string">"final_output"</span>: <span class="hljs-built_in">str</span>(result)
    }
    
  
</code></pre>
<ul>
<li>åŠŸèƒ½åº”è¯¥å¾ˆæ¸…æ™°äº† ï¼Œ llm ğŸ‘‰ Agent ğŸ‘‰ Task ğŸ‘‰ æ‰§è¡Œ Crew.</li>
<li>Crew çš„åˆ›å»ºå‚æ•°å¦‚ä¸‹ ï¼Œå¯ä»¥å‚è€ƒæºç é‡Œé¢ï¼Œä¼šæ›´è¯¦ç»†ä¸€ç‚¹</li>
</ul>

















































































<table><thead><tr><th>å‚æ•° (Attribute)</th><th>æ ¸å¿ƒä½œç”¨ä¸è¯´æ˜</th></tr></thead><tbody><tr><td><strong>agents</strong></td><td>(list) å›¢é˜Ÿçš„ "æˆå‘˜åˆ—è¡¨"ï¼Œå®šä¹‰äº†**'è°'**åœ¨å›¢é˜Ÿä¸­ã€‚</td></tr><tr><td><strong>tasks</strong></td><td>(list) å›¢é˜Ÿçš„ "ä»»åŠ¡æ¸…å•"ï¼Œå®šä¹‰äº†**'åšä»€ä¹ˆ'**ä»¥åŠæ‰§è¡Œé¡ºåºã€‚</td></tr><tr><td><strong>process</strong></td><td>(Enum) å·¥ä½œæµæ¨¡å¼ã€‚<strong>sequential</strong> (é¡ºåº) æˆ– <strong>hierarchical</strong> (å±‚çº§)ã€‚</td></tr><tr><td><strong>manager_llm</strong></td><td>(LLM) <strong>hierarchical</strong> æ¨¡å¼ä¸‹ï¼Œå……å½“ "ç»ç†" è§’è‰²çš„ LLMã€‚</td></tr><tr><td><strong>manager_agent</strong></td><td>(Agent) <strong>hierarchical</strong> æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰ Agent å®ä¾‹å……å½“ "ç»ç†"ã€‚</td></tr><tr><td><strong>planning</strong></td><td>(bool) åœ¨ kickoff å‰ï¼Œè®© Crew é¦–å…ˆç”Ÿæˆä¸€ä¸ªæ‰§è¡Œè®¡åˆ’ã€‚</td></tr><tr><td><strong>function_calling_llm</strong></td><td>(LLM) (æ¨è) æŒ‡å®šä¸€ä¸ª LLM <em><strong>ä¸“é—¨</strong></em> è´Ÿè´£æ‰€æœ‰æ™ºèƒ½ä½“çš„å·¥å…·è°ƒç”¨ã€‚</td></tr><tr><td><strong>chat_llm</strong></td><td>(LLM) åœ¨äº¤äº’å¼èŠå¤©æ¨¡å¼ä¸‹ï¼Œç”¨äºåè°ƒå¯¹è¯çš„ LLMã€‚</td></tr><tr><td><strong>memory</strong></td><td>(bool) å¯ç”¨è·¨ä»»åŠ¡çš„çŸ­æœŸè®°å¿†ï¼Œå…è®¸ Crew å­˜å‚¨å’Œå›å¿†ä¿¡æ¯ã€‚</td></tr><tr><td><strong>cache</strong></td><td>(bool) å¯ç”¨å·¥å…·ç¼“å­˜ã€‚é‡å¤è°ƒç”¨ç›¸åŒå‚æ•°çš„å·¥å…·æ—¶ï¼Œç›´æ¥è¿”å›ç¼“å­˜ç»“æœã€‚</td></tr><tr><td><strong>max_rpm</strong></td><td>(int) (æ¯åˆ†é’Ÿè¯·æ±‚æ•°) é™åˆ¶ Crew è°ƒç”¨ LLM API çš„æ€»é€Ÿç‡ã€‚</td></tr><tr><td><strong>verbose</strong></td><td>(bool/int) åœ¨æ§åˆ¶å°æ‰“å°è¯¦ç»†çš„å®æ—¶æ—¥å¿—ï¼ˆæ€è€ƒã€è¡ŒåŠ¨ã€å·¥å…·è¾“å‡ºï¼‰ã€‚</td></tr><tr><td><strong>task_callback</strong></td><td>(callable) æ¯ä¸ªå®Œæ•´ <strong>ä»»åŠ¡ (Task)</strong> æ‰§è¡Œå®Œæ¯•åè°ƒç”¨çš„å‡½æ•°ã€‚</td></tr><tr><td><strong>step_callback</strong></td><td>(callable) (ç²’åº¦æ›´ç»†) æ™ºèƒ½ä½“çš„æ¯ä¸€æ­¥ <strong>æ€è€ƒ/è¡ŒåŠ¨ (Step)</strong> åè°ƒç”¨çš„å‡½æ•°ã€‚</td></tr><tr><td><strong>config</strong></td><td>(dict) ç”¨äºä¼ å…¥é«˜çº§æˆ–ä¸å¸¸ç”¨çš„ JSON/å­—å…¸æ ¼å¼é…ç½®ã€‚</td></tr><tr><td><strong>prompt_file</strong></td><td>(str) æŒ‡å®šä¸€ä¸ª JSON æ–‡ä»¶è·¯å¾„ï¼Œç”¨è‡ªå®šä¹‰æç¤ºè¦†ç›–é»˜è®¤æç¤ºã€‚</td></tr><tr><td><strong>share_crew</strong></td><td>(bool) å…è®¸ crewAI (åŒ¿å) æ”¶é›†è¿è¡Œæ•°æ®ä»¥å¸®åŠ©æ”¹è¿›åº“ã€‚</td></tr><tr><td><strong>security_config</strong></td><td>(dict) ç”¨äºå·¥å…·ä½¿ç”¨çš„æŒ‡çº¹è¯†åˆ«å’Œå®‰å…¨æ§åˆ¶ã€‚</td></tr></tbody></table>
<h2 data-id="heading-2">ä¸‰. è¿‡ç¨‹ä¸­çš„éš¾ç‚¹å’Œç—›ç‚¹</h2>
<h3 data-id="heading-3">3.1 Tools è°ƒç”¨çš„ä¸å¯æ§</h3>
<p><strong>Tools è°ƒç”¨ä¸å¯æ§</strong> ï¼Œéœ€è¦æç¤ºè¯å»å¼ºæ§ ï¼Œæœ‰çš„æ—¶å€™ AI å¹¶ä¸ä¼šä¸»åŠ¨è°ƒç”¨Tools.</p>
<p>å†ä¸€ä¸ª Tools çš„è´¨é‡è¿”å›çš„ç»“æœä¹Ÿä¸å¯æ§ï¼Œéœ€è¦å»é€šè¿‡æç¤ºè¯å»è·å–æ›´å¥½çš„ç»“æœã€‚</p>
<p>æ¯”å¦‚é€šè¿‡  Tavily å»æŸ¥è¯¢çš„æ—¶å€™ ï¼Œæœ‰å¯èƒ½ä»€ä¹ˆéƒ½æŸ¥ä¸å‡ºæ¥ï¼ˆè¿™ç§æ•°æ®æ¯«æ— æ„ä¹‰ï¼‰ ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/546590e2efe9487fbf5e13378662c1cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-X5a2X6L6I5bCP6JqC6JqB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763905563&amp;x-signature=23Ug7UN5MpqXiFHynEkuEYdlcPM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">3.2 è¿‡ç¨‹è¿‡é•¿</h3>
<p>ä¸€ä¸ª AI æŸ¥è¯¢å·²ç»å¾ˆæ…¢äº† ï¼Œ<strong>3ä¸ª AI æŸ¥è¯¢åˆ—åŠ èµ·æ¥ä¼šå ç”¨å¤§é‡çš„æ—¶é—´</strong> ï¼Œè™½ç„¶æ™ºèƒ½ä½“èƒ½è®©ç»“æœæ›´åŠ å‡†ç¡®ï¼Œä½†æ˜¯ç›¸å¯¹çš„ä¼šå¯¼è‡´å¤„ç†æ—¶é—´è¢«æ‹‰é•¿</p>
<h3 data-id="heading-5">3.3 åŠŸèƒ½çš„å¿…è¦æ€§</h3>
<p>æ™ºèƒ½ä½“ è®© AI å˜æˆä¸“å®¶ ï¼Œä½†æ˜¯å…¶æœ¬è´¨æ˜¯é€šè¿‡æç¤ºè¯ï¼Œ é‚£æˆ‘å‡†å¤‡3å¥—æç¤ºè¯ ï¼Œç„¶åä¸€ä¸ª For å¾ªç¯åˆ†å¼€è°ƒç”¨ ï¼Œå…¶å¯¹åº”çš„æ•ˆæœæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯å·®ä¸å¤šçš„ ï¼Ÿ</p>
<p><strong>å¦‚æœä¸šåŠ¡ä¸æ˜¯å¾ˆå¤æ‚ ï¼Œç¡¬ç¼–ç æ•´å¥—æµç¨‹ ï¼Œå¥½åƒå¤„ç†èµ·æ¥ä¼šæ›´ç®€å•</strong>ï¼Œé‚£ä¹ˆçœŸçš„æœ‰å¿…è¦ä¸Šå¤æ‚çš„æ¡†æ¶å—ï¼Ÿ</p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>ä¸ªäººå¯¹äºæ™ºèƒ½ä½“çš„ä½¿ç”¨å¹¶ä¸å¤š ï¼Œå¾ˆå¤šåœ°æ–¹ä¹Ÿåœ¨æ…¢æ…¢æ¢ç´¢ä¸­ ï¼Œæ‰€ä»¥æ€è€ƒçš„å±‚æ¬¡ä¹Ÿæ¯”è¾ƒè‚¤æµ…ã€‚</p>
<p><strong>æ™ºèƒ½ä½“æˆ‘è§‰å¾—æ˜¯å¾ˆæœ‰å¿…è¦çš„ ï¼Œèƒ½è®©ææ˜“æ‰©æ•£çš„ AI æ”¶æŸèµ·æ¥ï¼Œæé«˜å›ç­”çš„å‡†ç¡®æ€§ã€‚</strong></p>
<p>åç»­å°±å‡†å¤‡åœ¨å¼€æºé¡¹ç›®é‡Œé¢æ¥å…¥è¿™ä¸ªåŠŸèƒ½äº†ã€‚</p>
<h2 data-id="heading-7">å‚è€ƒè®°å½•</h2>
<pre><code class="hljs language-xml" lang="xml">================================================================================
ğŸ“ˆ è‚¡ç¥¨åˆ†æå¤šæ™ºèƒ½ä½“ç³»ç»Ÿ
================================================================================

æœ¬ç³»ç»Ÿæ¼”ç¤ºå››ä¸ªé˜¶æ®µçš„åä½œæµç¨‹ï¼š
  S1: æ•°æ®æ”¶é›† â†’ S2: æ™ºèƒ½ä½“åˆ›å»º â†’ S3: æ™ºèƒ½ä½“åä½œ â†’ S4: ç»“æœä¿å­˜


================================================================================
ğŸ“Š å¼€å§‹åˆ†æè‚¡ç¥¨ï¼šè´µå·èŒ…å°
================================================================================

è¯†åˆ«è‚¡ç¥¨ä»£ç : 600519

================================================================================
S1: æ™ºèƒ½ä½“åˆ›å»ºé˜¶æ®µ - åˆå§‹åŒ–å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ
================================================================================

âœ… å·²åˆ›å»ºæ™ºèƒ½ä½“ï¼š
  ğŸ” æ•°æ®æ”¶é›†å‘˜ - é…å¤‡äº† 6 ä¸ªå·¥å…·ï¼ˆè‚¡ç¥¨æ•°æ®+æ–°é—»æœç´¢ï¼‰
  ğŸ“Š æ•°æ®åˆ†æå¸ˆ - è´Ÿè´£åˆ†æè‚¡ç¥¨
  ğŸ’¼ æŠ•èµ„å†³ç­–å®˜ - è´Ÿè´£åšå‡ºå†³ç­–

================================================================================
S2: æ™ºèƒ½ä½“åä½œé˜¶æ®µ - æ‰§è¡Œå¤šæ™ºèƒ½ä½“ä»»åŠ¡æµ
================================================================================

ğŸš€ å¼€å§‹æ‰§è¡Œåä½œä»»åŠ¡...
   æ•°æ®æ”¶é›†å‘˜å°†è‡ªä¸»è°ƒç”¨å·¥å…·è·å–æ•°æ®...
--------------------------------------------------------------------------------

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Crew Execution Started â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Crew Execution Started                                                                                                                    â”‚
â”‚  Name: crew                                                                                                                                â”‚
â”‚  ID: bd26e5d6-a16a-439c-ae84-75306378ec7c                                                                                                  â”‚
â”‚  Tool Args:                                                                                                                                â”‚
â”‚                                                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â””â”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
    Status: Executing Task...
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¤– Agent Started â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Agent: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶                                                                                                                   â”‚
â”‚                                                                                                                                            â”‚
â”‚  Task:                                                                                                                                     â”‚
â”‚  è¯·æ”¶é›†è‚¡ç¥¨ è´µå·èŒ…å° (ä»£ç : 600519) çš„å®Œæ•´æ•°æ®ã€‚                                                                                           â”‚
â”‚                                                                                                                                            â”‚
â”‚  **ä½ å¿…é¡»ä½¿ç”¨ä»¥ä¸‹å·¥å…·æ¥è·å–æ•°æ®ï¼š**                                                                                                        â”‚
â”‚  1. ä½¿ç”¨ "è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼" å·¥å…·è·å–å®æ—¶è¡Œæƒ…                                                                                               â”‚
â”‚  2. ä½¿ç”¨ "è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯" å·¥å…·è·å–å…¬å¸ä¿¡æ¯                                                                                               â”‚
â”‚  3. ä½¿ç”¨ "è·å–è‚¡ç¥¨å†å²æ•°æ®" å·¥å…·è·å–è¿‘5å¤©çš„Kçº¿æ•°æ®ï¼ˆå‚æ•°: stock_code="600519", days=5ï¼‰                                                    â”‚
â”‚  4. ä½¿ç”¨ "æœç´¢è‚¡ç¥¨æ–°é—»" å·¥å…·è·å–æœ€æ–°æ–°é—»ï¼ˆå‚æ•°: keyword="è´µå·èŒ…å°", max_results=3ï¼‰                                                        â”‚
â”‚                                                                                                                                            â”‚
â”‚  **è¾“å‡ºè¦æ±‚ï¼š**                                                                                                                            â”‚
â”‚  1. æ•´ç†å·¥å…·è¿”å›çš„æ‰€æœ‰æ•°æ®                                                                                                                 â”‚
â”‚  2. ä½¿ç”¨æ¸…æ™°çš„ Markdown æ ¼å¼                                                                                                               â”‚
â”‚  3. åŒ…å«ï¼šè‚¡ç¥¨åç§°ã€å½“å‰ä»·æ ¼ã€æ¶¨è·Œå¹…ã€è¡Œä¸šã€è¿‘æœŸèµ°åŠ¿ã€æœ€æ–°åŠ¨æ€                                                                             â”‚
â”‚  4. æ§åˆ¶åœ¨ 300 å­—ä»¥å†…                                                                                                                      â”‚
â”‚                                                                                                                                            â”‚
â”‚  **é‡è¦ï¼š**                                                                                                                                â”‚
â”‚  - å¿…é¡»è°ƒç”¨æ‰€æœ‰ 4 ä¸ªå·¥å…·è·å–å®Œæ•´æ•°æ®                                                                                                       â”‚
â”‚  - ä¸è¦ç¼–é€ ä»»ä½•æ•°æ®ï¼Œåªä½¿ç”¨å·¥å…·è¿”å›çš„çœŸå®æ•°æ®                                                                                              â”‚
â”‚                                                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â””â”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
    Status: Executing Task...
    â””â”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼ (1)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ”§ Agent Tool Execution â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Agent: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶                                                                                                                   â”‚
â”‚                                                                                                                                            â”‚
â”‚  Using Tool: è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼                                                                                                              â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Tool Input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  "{\"stock_code\": \"600519\"}"                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Tool Output â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  ã€600519 (600519.SH) å®æ—¶è¡Œæƒ…ã€‘                                                                                                           â”‚
â”‚  è‚¡ç¥¨åç§°: è´µå·èŒ…å°                                                                                                                        â”‚
â”‚  å½“å‰ä»·æ ¼: Â¥1456.60                                                                                                                        â”‚
â”‚  æ˜¨æ—¥æ”¶ç›˜: Â¥1470.38                                                                                                                        â”‚
â”‚  æ¶¨è·Œé¢: Â¥-13.78                                                                                                                           â”‚
â”‚  æ¶¨è·Œå¹…: -0.94%                                                                                                                            â”‚
â”‚  ä»Šæ—¥å¼€ç›˜: Â¥1470.00                                                                                                                        â”‚
â”‚  æœ€é«˜ä»·: Â¥1478.95                                                                                                                          â”‚
â”‚  æœ€ä½ä»·: Â¥1456.30                                                                                                                          â”‚
â”‚  æˆäº¤é‡: 2,747,306 æ‰‹                                                                                                                      â”‚
â”‚  æˆäº¤é¢: 4,031,007,106.00 ä¸‡å…ƒ                                                                                                             â”‚
â”‚  æ›´æ–°æ—¶é—´: 2025-11-14 15:00:00                                                                                                             â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â””â”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
    Status: Executing Task...
    â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼ (1)
    â””â”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (1)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ”§ Agent Tool Execution â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Agent: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶                                                                                                                   â”‚
â”‚                                                                                                                                            â”‚
â”‚  Using Tool: è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯                                                                                                              â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Tool Input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  "{\"stock_code\": \"600519\"}"                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Tool Output â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  ã€600519 (600519.SH) å…¬å¸ä¿¡æ¯ã€‘                                                                                                           â”‚
â”‚  è‚¡ç¥¨åç§°: è´µå·èŒ…å°                                                                                                                        â”‚
â”‚  æ‰€å±è¡Œä¸š: é£Ÿå“é¥®æ–™                                                                                                                        â”‚
â”‚  æ‰€å±åœ°åŒº: è´µå·                                                                                                                            â”‚
â”‚  ä¸Šå¸‚å¸‚åœº: ä¸Šæµ·è¯åˆ¸äº¤æ˜“æ‰€                                                                                                                  â”‚
â”‚                                                                                                                                            â”‚
â”‚  ğŸ’¡ æç¤ºï¼šè¯¦ç»†è´¢åŠ¡æ•°æ®éœ€è¦ Tushare ç§¯åˆ†æƒé™                                                                                                â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â””â”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
    Status: Executing Task...
    â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼ (1)
    â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (1)
    â””â”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å†å²æ•°æ® (1)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ”§ Agent Tool Execution â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Agent: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶                                                                                                                   â”‚
â”‚                                                                                                                                            â”‚
â”‚  Using Tool: è·å–è‚¡ç¥¨å†å²æ•°æ®                                                                                                              â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Tool Input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  "{\"stock_code\": \"600519\", \"days\": 5}"                                                                                               â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Tool Output â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  ã€600519 (600519.SH) è¿‘5å¤©å†å²æ•°æ®ã€‘                                                                                                      â”‚
â”‚  æœŸé—´æœ€é«˜ä»·: Â¥1478.95                                                                                                                      â”‚
â”‚  æœŸé—´æœ€ä½ä»·: Â¥1434.98                                                                                                                      â”‚
â”‚  æœŸé—´å¹³å‡ä»·: Â¥1462.68                                                                                                                      â”‚
â”‚  æœŸåˆä»·æ ¼: Â¥1462.30 (20251110)                                                                                                             â”‚
â”‚  æœ€æ–°ä»·æ ¼: Â¥1456.60 (20251114)                                                                                                             â”‚
â”‚  æœŸé—´æ¶¨è·Œ: Â¥-5.70 (-0.39%)                                                                                                                 â”‚
â”‚  æ•°æ®ç‚¹æ•°: 5 å¤©                                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â”‚  æœ€è¿‘5å¤©æ•°æ®:                                                                                                                              â”‚
â”‚    2025-11-10: å¼€Â¥1435.00 æ”¶Â¥1462.30 é«˜Â¥1463.69 ä½Â¥1434.98 é‡49,452æ‰‹ æ¶¨è·Œ+1.90%                                                           â”‚
â”‚    2025-11-11: å¼€Â¥1462.00 æ”¶Â¥1458.99 é«˜Â¥1462.18 ä½Â¥1447.00 é‡26,692æ‰‹ æ¶¨è·Œ-0.21%                                                           â”‚
â”‚    2025-11-12: å¼€Â¥1459.98 æ”¶Â¥1465.15 é«˜Â¥1478.36 ä½Â¥1459.21 é‡32,992æ‰‹ æ¶¨è·Œ+0.35%                                                           â”‚
â”‚    2025-11-13: å¼€Â¥1462.12 æ”¶Â¥1470.38 é«˜Â¥1473.58 ä½Â¥1458.00 é‡31,179æ‰‹ æ¶¨è·Œ+0.56%                                                           â”‚
â”‚    2025-11-14: å¼€Â¥1470.00 æ”¶Â¥1456.60 é«˜Â¥1478.95 ä½Â¥1456.30 é‡27,473æ‰‹ æ¶¨è·Œ-0.91%                                                           â”‚
â”‚                                                                                                                                            â”‚
â”‚  âœ… æ•°æ®æ¥æºï¼šTushare çœŸå®Kçº¿æ•°æ®                                                                                                          â”‚
â”‚                                                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â”‚  You ONLY have access to the following tools, and should NEVER make up tools that are not listed here:                                     â”‚
â”‚                                                                                                                                            â”‚
â”‚  Tool Name: è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼                                                                                                               â”‚
â”‚  Tool Arguments: {'stock_code': {'description': None, 'type': 'str'}}                                                                      â”‚
â”‚  Tool Description:                                                                                                                         â”‚
â”‚      è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼å’Œè¡Œæƒ…æ•°æ®                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â”‚      Args:                                                                                                                                 â”‚
â”‚          stock_code: è‚¡ç¥¨ä»£ç ï¼ˆå¦‚ 600519, 600000, 000001 ç­‰ï¼‰                                                                              â”‚
â”‚                                                                                                                                            â”‚
â”‚      Returns:                                                                                                                              â”‚
â”‚          è‚¡ç¥¨å®æ—¶ä»·æ ¼ä¿¡æ¯ï¼ŒåŒ…æ‹¬å½“å‰ä»·ã€æ¶¨è·Œå¹…ã€æˆäº¤é‡ç­‰                                                                                    â”‚
â”‚                                                                                                                                            â”‚
â”‚      Examples:                                                                                                                             â”‚
â”‚          get_stock_price_tool("600519")  # è´µå·èŒ…å°                                                                                        â”‚
â”‚          get_stock_price_tool("600000")  # æµ¦å‘é“¶è¡Œ                                                                                        â”‚
â”‚                                                                                                                                            â”‚
â”‚  Tool Name: è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯                                                                                                               â”‚
â”‚  Tool Arguments: {'stock_code': {'description': None, 'type': 'str'}}                                                                      â”‚
â”‚  Tool Description:                                                                                                                         â”‚
â”‚      è·å–è‚¡ç¥¨çš„åŸºæœ¬ä¿¡æ¯å’Œå…¬å¸èµ„æ–™                                                                                                          â”‚
â”‚                                                                                                                                            â”‚
â”‚      Args:                                                                                                                                 â”‚
â”‚          stock_code: è‚¡ç¥¨ä»£ç ï¼ˆå¦‚ 600519, 600000, 000001 ç­‰ï¼‰                                                                              â”‚
â”‚                                                                                                                                            â”‚
â”‚      Returns:                                                                                                                              â”‚
â”‚          è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¬å¸åç§°ã€æ‰€å±è¡Œä¸šã€ä¸Šå¸‚å¸‚åœºç­‰                                                                                  â”‚
â”‚                                                                                                                                            â”‚
â”‚      Examples:                                                                                                                             â”‚
â”‚          get_stock_info_tool("600519")  # è·å–è´µå·èŒ…å°å…¬å¸ä¿¡æ¯                                                                             â”‚
â”‚          get_stock_info_tool("600000")  # è·å–æµ¦å‘é“¶è¡Œå…¬å¸ä¿¡æ¯                                                                             â”‚
â”‚                                                                                                                                            â”‚
â”‚  Tool Name: è·å–è‚¡ç¥¨å†å²æ•°æ®                                                                                                               â”‚
â”‚  Tool Arguments: {'stock_code': {'description': None, 'type': 'str'}, 'days': {'description': None, 'type': 'int'}}                        â”‚
â”‚  Tool Description:                                                                                                                         â”‚
â”‚      è·å–è‚¡ç¥¨çš„å†å²Kçº¿æ•°æ®                                                                                                                 â”‚
â”‚                                                                                                                                            â”‚
â”‚      Args:                                                                                                                                 â”‚
â”‚          stock_code: è‚¡ç¥¨ä»£ç ï¼ˆå¦‚ 600519, 600000, 000001 ç­‰ï¼‰                                                                              â”‚
â”‚          days: è·å–æœ€è¿‘å¤šå°‘å¤©çš„æ•°æ®ï¼Œé»˜è®¤30å¤©                                                                                              â”‚
â”‚                                                                                                                                            â”‚
â”‚      Returns:                                                                                                                              â”‚
â”‚          å†å²Kçº¿æ•°æ®æ‘˜è¦ï¼ŒåŒ…æ‹¬æœŸé—´æœ€é«˜ä»·ã€æœ€ä½ä»·ã€æ¶¨è·Œå¹…ç­‰                                                                                 â”‚
â”‚                                                                                                                                            â”‚
â”‚      Examples:                                                                                                                             â”‚
â”‚          get_stock_history_tool("600519", 30)  # è·å–è´µå·èŒ…å°è¿‘30å¤©æ•°æ®                                                                    â”‚
â”‚          get_stock_history_tool("600000", 5)   # è·å–æµ¦å‘é“¶è¡Œè¿‘5å¤©æ•°æ®                                                                     â”‚
â”‚                                                                                                                                            â”‚
â”‚  Tool Name: æœç´¢è‚¡ç¥¨æ–°é—»                                                                                                                   â”‚
â”‚  Tool Arguments: {'keyword': {'description': None, 'type': 'str'}, 'max_results': {'description': None, 'type': 'int'}}                    â”‚
â”‚  ...                                                                                                                                       â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â””â”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
    Status: Executing Task...
    â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼ (1)
    â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (1)
    â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å†å²æ•°æ® (1)
    â””â”€â”€ ğŸ”§ Used æœç´¢è‚¡ç¥¨æ–°é—» (1)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ”§ Agent Tool Execution â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Agent: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶                                                                                                                   â”‚
â”‚                                                                                                                                            â”‚
â”‚  Using Tool: æœç´¢è‚¡ç¥¨æ–°é—»                                                                                                                  â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Tool Input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  "{\"keyword\": \"\\u8d35\\u5dde\\u8305\\u53f0\", \"max_results\": 3}"                                                                     â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Tool Output â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  ã€è´µå·èŒ…å° ç›¸å…³æ–°é—»ã€‘                                                                                                                     â”‚
â”‚                                                                                                                                            â”‚
â”‚  1. è´µå·èŒ…å°(SH600519)è‚¡å§-å®æ—¶è¡Œæƒ…åˆ†æè®¨è®º-æ–°æµªè´¢ç»                                                                                       â”‚
â”‚     æ‘˜è¦: ...                                                                                                                              â”‚
â”‚  è´µå·èŒ…å°(SH600519)è‚¡å§æä¾›å®æ—¶è‚¡ç¥¨è¡Œæƒ…ã€çƒ­é—¨è‚¡ç¥¨è®¨è®ºä¸æŠ•èµ„äº¤æµå¹³å°ã€‚æ±‡èšå…¨çƒè‚¡æ°‘ï¼Œåˆ†äº«è‚¡å¸‚åŠ¨æ€ã€æŠ•èµ„ç­–ç•¥ä¸ä¸ªè‚¡åˆ†æï¼ŒåŠ©æ‚¨æŠŠæ¡æŠ•èµ„æœºä¼šï¼    â”‚
â”‚  ... æœ€æ–°. æœ€çƒ­.                                                                                                                           â”‚
â”‚     æ¥æº: http://guba.sina.com.cn/bar.php?name=sh600519                                                                                    â”‚
â”‚                                                                                                                                            â”‚
â”‚  2. è´µå·èŒ…å°(600519)å…¬å¸é«˜ç®¡                                                                                                               â”‚
â”‚     æ‘˜è¦: è´µå·èŒ…å°é…’è‚¡ä»½æœ‰é™å…¬å¸. Aè‚¡. 0è‚¡. 2020-04-22 ; è´µå·èŒ…å°é…’è‚¡ä»½æœ‰é™å…¬å¸. Aè‚¡. 0è‚¡. 2019-03-29.                                     â”‚
â”‚     æ¥æº: https://vip.stock.finance.sina.com.cn/corp/view/vCI_CorpManagerInfo.php?stockid=600519&amp;Pcode=30030066&amp;Name=%D5%C5%D2%E3          â”‚
â”‚                                                                                                                                            â”‚
â”‚  3. è´µå·èŒ…å°1456.60(-0.94%)_ä¸ªè‚¡èµ„è®¯- æ–°æµªè´¢ç»                                                                                             â”‚
â”‚     æ‘˜è¦: ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½  ï¿½ï¿½Ñ¡ï¿½ï¿½Æ±ï¿½ï¿½ ï¿½Æ¾ï¿½ï¿½ï¿½Ò³ï¿½ï¿½Æ±ï¿½ï¿½ï¿½ï¿½ï¿½Û¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Õ®È¯ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É°ï¿½ï¿½ï¿½Ñ¡ï¿½ï¿½ * ï¿½ï¿½ï¿½ï¿½300 ï¿½ï¿½ï¿½Ë²Æ¾ï¿½ &gt; ï¿½ï¿½ï¿½Ë¹ï¿½Æ± &gt; ï¿½ï¿½ï¿½ï¿½Ã©Ì¨ &gt;    â”‚
â”‚  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¶ * ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ * ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ * ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ * ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ | ï¿½ï¿½ï¿½ï¿½ | ï¿½Û¸ï¿½(Ôª) | ï¿½Çµ...                                                               â”‚
â”‚     æ¥æº: https://vip.stock.finance.sina.com.cn/corp/go.php/vCB_AllNewsStock/symbol/sh600519.phtml                                         â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â””â”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
    Status: Executing Task...
    â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼ (1)
    â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (1)
    â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å†å²æ•°æ® (1)
    â””â”€â”€ ğŸ”§ Used æœç´¢è‚¡ç¥¨æ–°é—» (1)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ… Agent Final Answer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Agent: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶                                                                                                                   â”‚
â”‚                                                                                                                                            â”‚
â”‚  Final Answer:                                                                                                                             â”‚
â”‚  ## è´µå·èŒ…å° (600519)                                                                                                                      â”‚
â”‚  - **å½“å‰ä»·æ ¼**: Â¥1456.60                                                                                                                  â”‚
â”‚  - **æ¶¨è·Œå¹…**: -0.94%                                                                                                                      â”‚
â”‚  - **æ‰€å±è¡Œä¸š**: é£Ÿå“é¥®æ–™                                                                                                                  â”‚
â”‚  - **è¿‘æœŸèµ°åŠ¿**: è¿‘5å¤©æœ€é«˜ä»·: Â¥1478.95ï¼Œæœ€ä½ä»·: Â¥1434.98ï¼ŒæœŸé—´æ¶¨è·Œå¹…: -0.39%                                                               â”‚
â”‚                                                                                                                                            â”‚
â”‚  ### æœ€æ–°åŠ¨æ€:                                                                                                                             â”‚
â”‚  1. [è´µå·èŒ…å°(SH600519)è‚¡å§ - æ–°æµªè´¢ç»](http://guba.sina.com.cn/bar.php?name=sh600519): æä¾›å®æ—¶è‚¡ç¥¨è¡Œæƒ…ä¸æŠ•èµ„äº¤æµå¹³å°ã€‚                   â”‚
â”‚  2.                                                                                                                                        â”‚
â”‚  [è´µå·èŒ…å°å…¬å¸é«˜ç®¡ä¿¡æ¯](https://vip.stock.finance.sina.com.cn/corp/view/vCI_CorpManagerInfo.php?stockid=600519&amp;Pcode=30030066&amp;Name=%D5%C5  â”‚
â”‚  %D2%E3): æ˜¾ç¤ºå…¬å¸é«˜ç®¡ä¿¡æ¯ã€‚                                                                                                               â”‚
â”‚  3. [è´µå·èŒ…å°1456.60(-0.94%) - æ–°æµªè´¢ç»](https://vip.stock.finance.sina.com.cn/corp/go.php/vCB_AllNewsStock/symbol/sh600519.phtml):        â”‚
â”‚  æä¾›ä¸ªè‚¡æœ€æ–°è¡Œæƒ…èµ„è®¯ã€‚                                                                                                                    â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â””â”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
    Assigned to: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶
    Status: âœ… Completed
    â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼ (1)
    â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (1)
    â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å†å²æ•°æ® (1)
    â””â”€â”€ ğŸ”§ Used æœç´¢è‚¡ç¥¨æ–°é—» (1)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Task Completion â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Task Completed                                                                                                                            â”‚
â”‚  Name: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583                                                                                                â”‚
â”‚  Agent: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶                                                                                                                   â”‚
â”‚  Tool Args:                                                                                                                                â”‚
â”‚                                                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â”œâ”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
â”‚   Assigned to: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶
â”‚   Status: âœ… Completed
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼ (1)
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (1)
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å†å²æ•°æ® (1)
â”‚   â””â”€â”€ ğŸ”§ Used æœç´¢è‚¡ç¥¨æ–°é—» (1)
â””â”€â”€ ğŸ“‹ Task: 7c2f35af-7d01-4e3b-859c-4a312752f173
    Status: Executing Task...
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¤– Agent Started â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Agent: èµ„æ·±è‚¡ç¥¨åˆ†æå¸ˆ                                                                                                                     â”‚
â”‚                                                                                                                                            â”‚
â”‚  Task:                                                                                                                                     â”‚
â”‚  åŸºäºæ”¶é›†çš„æ•°æ®è¿›è¡Œç®€è¦åˆ†æã€‚                                                                                                              â”‚
â”‚                                                                                                                                            â”‚
â”‚  **è¾“å‡ºè¦æ±‚ï¼š**                                                                                                                            â”‚
â”‚  - ä½¿ç”¨ Markdown æ ¼å¼                                                                                                                      â”‚
â”‚  - æ§åˆ¶åœ¨ 200 å­—ä»¥å†…                                                                                                                       â”‚
â”‚  - åŒ…å«ï¼šæŠ€æœ¯é¢è¯„ä»·ã€åŸºæœ¬é¢è¯„ä»·ã€é£é™©æç¤º                                                                                                  â”‚
â”‚                                                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â”œâ”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
â”‚   Assigned to: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶
â”‚   Status: âœ… Completed
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼ (1)
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (1)
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å†å²æ•°æ® (1)
â”‚   â””â”€â”€ ğŸ”§ Used æœç´¢è‚¡ç¥¨æ–°é—» (1)
â””â”€â”€ ğŸ“‹ Task: 7c2f35af-7d01-4e3b-859c-4a312752f173
    Status: Executing Task...
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ… Agent Final Answer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Agent: èµ„æ·±è‚¡ç¥¨åˆ†æå¸ˆ                                                                                                                     â”‚
â”‚                                                                                                                                            â”‚
â”‚  Final Answer:                                                                                                                             â”‚
â”‚  ```markdown                                                                                                                               â”‚
â”‚  ## æŠ€æœ¯é¢                                                                                                                                 â”‚
â”‚  - å½“å‰ä»·æ ¼ä¸º Â¥1456.60ï¼Œè¿‘æœŸèµ°åŠ¿æ˜¾ç¤º5å¤©å†…æœ€é«˜ä»·ä¸º Â¥1478.95ï¼Œæœ€ä½ä»·ä¸º Â¥1434.98ï¼Œæ•´ä½“è¡¨ç°å¹³ç¨³ï¼Œä½†è¿‘æœŸè·Œå¹… -0.39%ï¼Œå¸‚åœºæƒ…ç»ªåå‘è°¨æ…ã€‚         â”‚
â”‚                                                                                                                                            â”‚
â”‚  ## åŸºæœ¬é¢                                                                                                                                 â”‚
â”‚  -                                                                                                                                         â”‚
â”‚  è´µå·èŒ…å°å±äºé£Ÿå“é¥®æ–™è¡Œä¸šï¼Œè¯¥è¡Œä¸šåœ¨å¸‚åœºä¸Šè¡¨ç°ç›¸å¯¹ç¨³å®šï¼Œé•¿è¿œå¢é•¿æ½œåŠ›å¤§ã€‚æ— æœ€æ–°è´¢æŠ¥åŠä¸šç»©æ•°æ®ï¼Œä½†é«˜ç®¡ä¿¡æ¯åŠå…¬å¸æ²»ç†é€æ˜åº¦è‰¯å¥½ï¼Œæœ‰åˆ©äºæŠ•èµ„è€…  â”‚
â”‚  ä¿¡å¿ƒã€‚                                                                                                                                    â”‚
â”‚                                                                                                                                            â”‚
â”‚  ## é£é™©æç¤º                                                                                                                               â”‚
â”‚  - å¸‚åœºæ³¢åŠ¨æ€§è¾ƒå¤§ï¼Œè¿‘æœŸå·²è¡¨ç°å‡ºå°å¹…ä¸‹æ»‘ï¼Œå¯èƒ½å—æ•´ä½“å®è§‚ç»æµæˆ–è¡Œä¸šè¶‹åŠ¿å½±å“ã€‚æŠ•èµ„è€…åº”å¯†åˆ‡å…³æ³¨è¡Œä¸šåŠ¨æ€å’Œå…¬å¸å…¬å‘Šã€‚                            â”‚
â”‚  ```                                                                                                                                       â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â”œâ”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
â”‚   Assigned to: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶
â”‚   Status: âœ… Completed
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼ (1)
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (1)
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å†å²æ•°æ® (1)
â”‚   â””â”€â”€ ğŸ”§ Used æœç´¢è‚¡ç¥¨æ–°é—» (1)
â””â”€â”€ ğŸ“‹ Task: 7c2f35af-7d01-4e3b-859c-4a312752f173
    Assigned to: èµ„æ·±è‚¡ç¥¨åˆ†æå¸ˆ
    Status: âœ… Completed
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Task Completion â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Task Completed                                                                                                                            â”‚
â”‚  Name: 7c2f35af-7d01-4e3b-859c-4a312752f173                                                                                                â”‚
â”‚  Agent: èµ„æ·±è‚¡ç¥¨åˆ†æå¸ˆ                                                                                                                     â”‚
â”‚  Tool Args:                                                                                                                                â”‚
â”‚                                                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â”œâ”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
â”‚   Assigned to: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶
â”‚   Status: âœ… Completed
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼ (1)
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (1)
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å†å²æ•°æ® (1)
â”‚   â””â”€â”€ ğŸ”§ Used æœç´¢è‚¡ç¥¨æ–°é—» (1)
â”œâ”€â”€ ğŸ“‹ Task: 7c2f35af-7d01-4e3b-859c-4a312752f173
â”‚   Assigned to: èµ„æ·±è‚¡ç¥¨åˆ†æå¸ˆ
â”‚   Status: âœ… Completed
â””â”€â”€ ğŸ“‹ Task: 4b3aba38-de18-4693-947c-49232a7b97ff
    Status: Executing Task...
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¤– Agent Started â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Agent: æŠ•èµ„å†³ç­–å®˜                                                                                                                         â”‚
â”‚                                                                                                                                            â”‚
â”‚  Task:                                                                                                                                     â”‚
â”‚  ç»™å‡ºæœ€ç»ˆæŠ•èµ„å»ºè®®ã€‚                                                                                                                        â”‚
â”‚                                                                                                                                            â”‚
â”‚  **è¾“å‡ºè¦æ±‚ï¼š**                                                                                                                            â”‚
â”‚  - ä½¿ç”¨ Markdown æ ¼å¼                                                                                                                      â”‚
â”‚  - æ§åˆ¶åœ¨ 200 å­—ä»¥å†…                                                                                                                       â”‚
â”‚  - åŒ…å«ï¼šæ“ä½œå»ºè®®ï¼ˆä¹°å…¥/æŒæœ‰/å–å‡ºï¼‰ã€ç›®æ ‡ä»·ä½ã€æ­¢æŸä»·ä½ã€æ ¸å¿ƒç†ç”±                                                                          â”‚
â”‚                                                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â”œâ”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
â”‚   Assigned to: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶
â”‚   Status: âœ… Completed
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼ (1)
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (1)
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å†å²æ•°æ® (1)
â”‚   â””â”€â”€ ğŸ”§ Used æœç´¢è‚¡ç¥¨æ–°é—» (1)
â”œâ”€â”€ ğŸ“‹ Task: 7c2f35af-7d01-4e3b-859c-4a312752f173
â”‚   Assigned to: èµ„æ·±è‚¡ç¥¨åˆ†æå¸ˆ
â”‚   Status: âœ… Completed
â””â”€â”€ ğŸ“‹ Task: 4b3aba38-de18-4693-947c-49232a7b97ff
    Status: Executing Task...
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ… Agent Final Answer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Agent: æŠ•èµ„å†³ç­–å®˜                                                                                                                         â”‚
â”‚                                                                                                                                            â”‚
â”‚  Final Answer:                                                                                                                             â”‚
â”‚  ```markdown                                                                                                                               â”‚
â”‚  ## æ“ä½œå»ºè®®ï¼šæŒæœ‰                                                                                                                         â”‚
â”‚                                                                                                                                            â”‚
â”‚  - ç›®æ ‡ä»·ä½ï¼šéœ€è¿›ä¸€æ­¥è§‚å¯Ÿå¸‚åœºæƒ…ç»ªï¼Œé€‚æ—¶è°ƒæ•´                                                                                                â”‚
â”‚  - æ­¢æŸä»·ä½ï¼šÂ¥1430ï¼Œé¿å…è¾ƒå¤§æŸå¤±                                                                                                           â”‚
â”‚  -                                                                                                                                         â”‚
â”‚  æ ¸å¿ƒç†ç”±ï¼šè´µå·èŒ…å°ç›®å‰ä»·æ ¼ç¨³å®šï¼Œå°½ç®¡è¿‘æœŸå°å¹…å›è°ƒï¼Œè¡Œä¸šå‰æ™¯è‰¯å¥½ã€‚æ•´ä½“è¡¨ç°æ˜¾ç¤ºå‡ºå¸‚åœºè°¨æ…æ€åº¦ï¼Œéœ€è¦å…³æ³¨å®è§‚ç»æµå˜åŒ–ã€‚æŒæœ‰å½“å‰è‚¡æƒå°†æœ‰åŠ©äºåœ¨  â”‚
â”‚  é•¿æœŸå†…æŠŠæ¡æ½œåœ¨ä¸Šæ¶¨ç©ºé—´ã€‚                                                                                                                  â”‚
â”‚  ```                                                                                                                                       â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸš€ Crew: crew
â”œâ”€â”€ ğŸ“‹ Task: 0523bfe7-8daa-470f-a8fc-5f0aa6e49583
â”‚   Assigned to: è‚¡ç¥¨æ•°æ®æ”¶é›†ä¸“å®¶
â”‚   Status: âœ… Completed
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼ (1)
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (1)
â”‚   â”œâ”€â”€ ğŸ”§ Used è·å–è‚¡ç¥¨å†å²æ•°æ® (1)
â”‚   â””â”€â”€ ğŸ”§ Used æœç´¢è‚¡ç¥¨æ–°é—» (1)
â”œâ”€â”€ ğŸ“‹ Task: 7c2f35af-7d01-4e3b-859c-4a312752f173
â”‚   Assigned to: èµ„æ·±è‚¡ç¥¨åˆ†æå¸ˆ
â”‚   Status: âœ… Completed
â””â”€â”€ ğŸ“‹ Task: 4b3aba38-de18-4693-947c-49232a7b97ff
    Assigned to: æŠ•èµ„å†³ç­–å®˜
    Status: âœ… Completed
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Task Completion â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Task Completed                                                                                                                            â”‚
â”‚  Name: 4b3aba38-de18-4693-947c-49232a7b97ff                                                                                                â”‚
â”‚  Agent: æŠ•èµ„å†³ç­–å®˜                                                                                                                         â”‚
â”‚  Tool Args:                                                                                                                                â”‚
â”‚                                                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Crew Completion â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                            â”‚
â”‚  Crew Execution Completed                                                                                                                  â”‚
â”‚  Name: crew                                                                                                                                â”‚
â”‚  ID: bd26e5d6-a16a-439c-ae84-75306378ec7c                                                                                                  â”‚
â”‚  Tool Args:                                                                                                                                â”‚
â”‚  Final Output: ```markdown                                                                                                                 â”‚
â”‚  ## æ“ä½œå»ºè®®ï¼šæŒæœ‰                                                                                                                         â”‚
â”‚                                                                                                                                            â”‚
â”‚  - ç›®æ ‡ä»·ä½ï¼šéœ€è¿›ä¸€æ­¥è§‚å¯Ÿå¸‚åœºæƒ…ç»ªï¼Œé€‚æ—¶è°ƒæ•´                                                                                                â”‚
â”‚  - æ­¢æŸä»·ä½ï¼šÂ¥1430ï¼Œé¿å…è¾ƒå¤§æŸå¤±                                                                                                           â”‚
â”‚  -                                                                                                                                         â”‚
â”‚  æ ¸å¿ƒç†ç”±ï¼šè´µå·èŒ…å°ç›®å‰ä»·æ ¼ç¨³å®šï¼Œå°½ç®¡è¿‘æœŸå°å¹…å›è°ƒï¼Œè¡Œä¸šå‰æ™¯è‰¯å¥½ã€‚æ•´ä½“è¡¨ç°æ˜¾ç¤ºå‡ºå¸‚åœºè°¨æ…æ€åº¦ï¼Œéœ€è¦å…³æ³¨å®è§‚ç»æµå˜åŒ–ã€‚æŒæœ‰å½“å‰è‚¡æƒå°†æœ‰åŠ©äºåœ¨  â”‚
â”‚  é•¿æœŸå†…æŠŠæ¡æ½œåœ¨ä¸Šæ¶¨ç©ºé—´ã€‚                                                                                                                  â”‚
â”‚  ```                                                                                                                                       â”‚
â”‚                                                                                                                                            â”‚
â”‚                                                                                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯


================================================================================
S3: ç»“æœä¿å­˜é˜¶æ®µ - ç”Ÿæˆåˆ†ææŠ¥å‘Š
================================================================================


ğŸ’¾ å®Œæ•´ç»“æœå·²ä¿å­˜åˆ°: result\stock_analysis_20251116_202851.md
ğŸ’¾ ç»“æœä¹Ÿå·²ä¿å­˜åˆ°: output.md

================================================================================
âœ… æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼
================================================================================

ğŸ’¡ æŠ€æœ¯äº®ç‚¹ï¼šAgent é€šè¿‡ CrewAI å·¥å…·è°ƒç”¨é“¾è‡ªä¸»è·å–æ•°æ®
   ä¸å†æ˜¯æ‰‹åŠ¨è°ƒç”¨å·¥å…·åå°†æ•°æ®æ³¨å…¥ï¼Œè€Œæ˜¯è®© Agent è‡ªå·±å†³å®šä½•æ—¶è°ƒç”¨å“ªä¸ªå·¥å…·

================================================================================
S4: æœ€ç»ˆè¾“å‡ºé˜¶æ®µ - æŠ•èµ„å†³ç­–å»ºè®®
================================================================================

```markdown
## æ“ä½œå»ºè®®ï¼šæŒæœ‰

- ç›®æ ‡ä»·ä½ï¼šéœ€è¿›ä¸€æ­¥è§‚å¯Ÿå¸‚åœºæƒ…ç»ªï¼Œé€‚æ—¶è°ƒæ•´
- æ­¢æŸä»·ä½ï¼šÂ¥1430ï¼Œé¿å…è¾ƒå¤§æŸå¤±
- æ ¸å¿ƒç†ç”±ï¼šè´µå·èŒ…å°ç›®å‰ä»·æ ¼ç¨³å®šï¼Œå°½ç®¡è¿‘æœŸå°å¹…å›è°ƒï¼Œè¡Œä¸šå‰æ™¯è‰¯å¥½ã€‚æ•´ä½“è¡¨ç°æ˜¾ç¤ºå‡ºå¸‚åœºè°¨æ…æ€åº¦ï¼Œéœ€è¦å…³æ³¨å®è§‚ç»æµå˜åŒ–ã€‚æŒæœ‰å½“å‰è‚¡æƒå°†æœ‰åŠ©äºåœ¨é•¿æœŸå†…æŠŠæ¡æ½œåœ¨ä¸Šæ¶¨ç©ºé—´ã€‚
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Perfetto ç³»åˆ— 8ï¼šæ·±å…¥ç†è§£ Vsync æœºåˆ¶ä¸æ€§èƒ½åˆ†æ]]></title>    <link>https://juejin.cn/post/7572480736362381318</link>    <guid>https://juejin.cn/post/7572480736362381318</guid>    <pubDate>2025-11-16T13:30:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572480736362381318" data-draft-id="7572480736362364934" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Perfetto ç³»åˆ— 8ï¼šæ·±å…¥ç†è§£ Vsync æœºåˆ¶ä¸æ€§èƒ½åˆ†æ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-16T13:30:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gracker"/> <meta itemprop="url" content="https://juejin.cn/user/1816846860560749"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Perfetto ç³»åˆ— 8ï¼šæ·±å…¥ç†è§£ Vsync æœºåˆ¶ä¸æ€§èƒ½åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1816846860560749/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gracker
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:30:33.000Z" title="Sun Nov 16 2025 13:30:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬ç¯‡æ˜¯ Perfetto ç³»åˆ—æ–‡ç« çš„ç¬¬å…«ç¯‡ï¼Œä¸»è¦æ·±å…¥ä»‹ç» Android ä¸­çš„ Vsync æœºåˆ¶åŠå…¶åœ¨ Perfetto ä¸­çš„è¡¨ç°å½¢å¼ã€‚æ–‡ç« å°†ä» Perfetto çš„è§’åº¦æ¥åˆ†æ Android ç³»ç»Ÿå¦‚ä½•åŸºäº Vsync ä¿¡å·è¿›è¡Œå¸§æ¸²æŸ“å’Œåˆæˆï¼Œæ¶µç›– Vsyncã€Vsync-appã€Vsync-sfã€VsyncWorkDuration ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<p>éšç€é«˜åˆ·æ–°ç‡å±å¹•çš„æ™®åŠï¼Œç†è§£ Vsync æœºåˆ¶å˜å¾—æ›´åŠ é‡è¦ã€‚æœ¬æ–‡å°†ä»¥ 120Hz åˆ·æ–°ç‡ä¸ºä¸»è¦å™äº‹çº¿ï¼Œå¸®åŠ©å¼€å‘è€…ç†è§£ç°ä»£ Android è®¾å¤‡ä¸­ Vsync çš„å·¥ä½œåŸç†ï¼Œä»¥åŠå¦‚ä½•åœ¨ Perfetto ä¸­è§‚å¯Ÿå’Œåˆ†æ Vsync ç›¸å…³çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<blockquote>
<p><strong>æ³¨ï¼šæœ¬æ–‡å†…å®¹åŸºäº Android 16 çš„æœ€æ–°æ¶æ„å’Œå®ç°</strong></p>
</blockquote>

<h3 data-id="heading-0">æœ¬æ–‡ç›®å½•</h3>
<ul>
<li><a href="#series" title="#series">ç³»åˆ—æ–‡ç« ç›®å½•</a></li>
<li><a href="#what-is-vsync" title="#what-is-vsync">ä»€ä¹ˆæ˜¯ Vsync</a></li>
<li><a href="#principle" title="#principle">Android ä¸­ Vsync çš„åŸºæœ¬å·¥ä½œåŸç†</a></li>
<li><a href="#perfetto-observe" title="#perfetto-observe">åœ¨ Perfetto ä¸­è§‚å¯Ÿ Vsync</a></li>
<li><a href="#app-frames" title="#app-frames">Android App æ¯ä¸€å¸§æ˜¯å¦‚ä½•åŸºäº Vsync å·¥ä½œçš„</a></li>
<li><a href="#refs" title="#refs">å‚è€ƒæ–‡æ¡£</a></li>
<li><a href="#about" title="#about">å…³äºæˆ‘ &amp;&amp; åšå®¢</a></li>
</ul>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-series" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-1">ç³»åˆ—æ–‡ç« ç›®å½•</h2>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F03%2F27%2FAndroid-Perfetto-101%2F%23%2FPerfetto-%25E7%25B3%25BB%25E5%2588%2597%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="https://www.androidperformance.com/2024/03/27/Android-Perfetto-101/#/Perfetto-%E7%B3%BB%E5%88%97%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ—ç›®å½•</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-01-What-is-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-01-What-is-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 1ï¼šPerfetto å·¥å…·ç®€ä»‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-02-how-to-get-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-02-how-to-get-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 2ï¼šPerfetto Trace æŠ“å–</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2024%2F05%2F21%2FAndroid-Perfetto-03-how-to-analysis-perfetto%2F" target="_blank" title="https://www.androidperformance.com/2024/05/21/Android-Perfetto-03-how-to-analysis-perfetto/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 3ï¼šç†Ÿæ‚‰ Perfetto View</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F02%2F08%2FAndroid-Perfetto-04-Open-Big-Trace-With-Command-Line%2F" target="_blank" title="https://www.androidperformance.com/2025/02/08/Android-Perfetto-04-Open-Big-Trace-With-Command-Line/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 4ï¼šä½¿ç”¨å‘½ä»¤è¡Œåœ¨æœ¬åœ°æ‰“å¼€è¶…å¤§ Trace</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F03%2F26%2FAndroid-Perfetto-05-Chorergrapher%2F" target="_blank" title="https://www.androidperformance.com/2025/03/26/Android-Perfetto-05-Chorergrapher/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 5ï¼šAndroid App åŸºäº Choreographer çš„æ¸²æŸ“æµç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F04%2F26%2FAndroid-Perfetto-06-Why-120Hz%2F" target="_blank" title="https://www.androidperformance.com/2025/04/26/Android-Perfetto-06-Why-120Hz/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 6ï¼šä¸ºä»€ä¹ˆæ˜¯ 120Hzï¼Ÿé«˜åˆ·æ–°ç‡çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2025%2F08%2F02%2FAndroid-Perfetto-07-MainThread-And-RenderThread%2F" target="_blank" title="https://androidperformance.com/2025/08/02/Android-Perfetto-07-MainThread-And-RenderThread/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 7 - MainThread å’Œ RenderThread è§£è¯»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2025%2F08%2F05%2FAndroid-Perfetto-08-Vsync%2F" target="_blank" title="https://androidperformance.com/2025/08/05/Android-Perfetto-08-Vsync/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 8ï¼šæ·±å…¥ç†è§£ Vsync æœºåˆ¶ä¸æ€§èƒ½åˆ†æ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F11%2F12%2FAndroid-Perfetto-09-CPU%2F" target="_blank" title="https://www.androidperformance.com/2025/11/12/Android-Perfetto-09-CPU/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 9 - CPU ä¿¡æ¯è§£è¯»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1oi82efE4D%2F%3Fvd_source%3D0c6d2191e785de0a36dc21a9da7e664e" target="_blank" title="https://www.bilibili.com/video/BV1oi82efE4D/?vd_source=0c6d2191e785de0a36dc21a9da7e664e" ref="nofollow noopener noreferrer">è§†é¢‘(Bç«™) - Android Perfetto åŸºç¡€å’Œæ¡ˆä¾‹åˆ†äº«</a></li>
</ol>
<p>å¦‚æœå¤§å®¶è¿˜æ²¡çœ‹è¿‡ Systrace ç³»åˆ—ï¼Œä¸‹é¢æ˜¯ä¼ é€é—¨ï¼š</p>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2019%2F05%2F26%2FAndroid_Systrace_0%2F%23%2F%25E7%25B3%25BB%25E5%2588%2597%25E6%2596%2587%25E7%25AB%25A0%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="https://www.androidperformance.com/2019/05/26/Android_Systrace_0/#/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">Systrace ç³»åˆ—ç›®å½•</a> ï¼š ç³»ç»Ÿä»‹ç»äº† Perfetto çš„å‰èº« Systrace çš„ä½¿ç”¨ï¼Œå¹¶é€šè¿‡ Systrace æ¥å­¦ä¹ å’Œäº†è§£ Android æ€§èƒ½ä¼˜åŒ–å’Œ Android ç³»ç»Ÿè¿è¡Œçš„åŸºæœ¬è§„åˆ™ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F" target="_blank" title="https://www.androidperformance.com/" ref="nofollow noopener noreferrer">ä¸ªäººåšå®¢</a> ï¼šä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯ Android ç›¸å…³çš„å†…å®¹ï¼Œä¹Ÿæ”¾äº†ä¸€äº›ç”Ÿæ´»å’Œå·¥ä½œç›¸å…³çš„å†…å®¹ã€‚</li>
</ol>
<p>æ¬¢è¿å¤§å®¶åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2Fabout%2F" target="_blank" title="https://www.androidperformance.com/about/" ref="nofollow noopener noreferrer">å…³äºæˆ‘</a> é¡µé¢åŠ å…¥å¾®ä¿¡ç¾¤æˆ–è€…æ˜Ÿçƒï¼Œè®¨è®ºä½ çš„é—®é¢˜ã€ä½ æœ€æƒ³çœ‹åˆ°çš„å…³äº Perfetto çš„éƒ¨åˆ†ï¼Œä»¥åŠè·Ÿå„ä½ç¾¤å‹è®¨è®ºæ‰€æœ‰ Android å¼€å‘ç›¸å…³çš„å†…å®¹</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-what-is-vsync" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Vsync</h3>
<p>Vsyncï¼ˆVertical Synchronizationï¼Œå‚ç›´åŒæ­¥ï¼‰æ˜¯ Android å›¾å½¢ç³»ç»Ÿçš„æ ¸å¿ƒæœºåˆ¶ï¼Œå®ƒçš„å­˜åœ¨æ˜¯ä¸ºäº†è§£å†³ä¸€ä¸ªæ ¹æœ¬æ€§çš„é—®é¢˜ï¼šå¦‚ä½•è®©è½¯ä»¶çš„æ¸²æŸ“èŠ‚å¥ä¸ç¡¬ä»¶çš„æ˜¾ç¤ºèŠ‚å¥ä¿æŒåŒæ­¥ã€‚</p>
<p>åœ¨æ²¡æœ‰ Vsync æœºåˆ¶ä¹‹å‰ï¼Œå¸¸è§é—®é¢˜æ˜¯å±å¹•æ’•è£‚ï¼ˆScreen Tearingï¼‰ã€‚å½“æ˜¾ç¤ºå™¨è¯»å– framebuffer çš„åŒæ—¶ï¼ŒGPU å†™å…¥äº†ä¸‹ä¸€å¸§ï¼Œå°±ä¼šåœ¨åŒä¸€æ¬¡åˆ·æ–°ä¸­å‡ºç°ä¸Šä¸‹ä¸¤éƒ¨åˆ†ä¸ä¸€è‡´çš„ç”»é¢ã€‚</p>
<h4 data-id="heading-3">Vsync è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h4>
<p>Vsync æœºåˆ¶çš„æ ¸å¿ƒæ€æƒ³éå¸¸ç®€å•ï¼š<strong>è®©æ‰€æœ‰çš„æ¸²æŸ“å·¥ä½œéƒ½æŒ‰ç…§æ˜¾ç¤ºå™¨çš„åˆ·æ–°èŠ‚æ‹æ¥è¿›è¡Œ</strong>ã€‚å…·ä½“æ¥è¯´ï¼š</p>
<ol start="0">
<li><strong>åŒæ­¥ä¿¡å·</strong>ï¼šæ˜¾ç¤ºå™¨æ¯æ¬¡å¼€å§‹æ–°çš„åˆ·æ–°å‘¨æœŸæ—¶ï¼Œéƒ½ä¼šå‘å‡ºä¸€ä¸ª Vsync ä¿¡å·ã€‚</li>
<li><strong>å¸§èŠ‚æ‹ä¸ç”Ÿäº§</strong>ï¼šåº”ç”¨ä¾§åœ¨ Vsync åˆ°æ¥æ—¶ç”± Choreographer é©±åŠ¨å¼€å§‹ä¸€å¸§çš„ç”Ÿäº§ï¼ˆInput/Animation/Traversalï¼‰ï¼›CPU æäº¤æ¸²æŸ“å‘½ä»¤åï¼ŒGPU å¼‚æ­¥æµæ°´æ‰§è¡Œã€‚SurfaceFlinger ä¾§åœ¨ Vsync åˆ°æ¥æ—¶è¿›è¡Œ Buffer çš„åˆæˆæ“ä½œã€‚</li>
<li><strong>ç¼“å†²æœºåˆ¶</strong>ï¼šä½¿ç”¨åŒç¼“å†²æˆ–ä¸‰ç¼“å†²æŠ€æœ¯ï¼Œç¡®ä¿æ˜¾ç¤ºå™¨æ€»æ˜¯è¯»å–å®Œæ•´çš„å¸§æ•°æ®ã€‚</li>
</ol>
<p>è¿™æ ·ï¼Œå¸§çš„ç”Ÿäº§ä¸æ˜¾ç¤ºä»¥ Vsync ä¸ºèŠ‚æ‹å¯¹é½ã€‚ä»¥ 120Hz ä¸ºä¾‹ï¼Œæ¯ 8.333ms ä¼šæœ‰ä¸€ä¸ªæ˜¾ç¤ºæœºä¼šï¼›åº”ç”¨éœ€è¦åœ¨è¯¥çª—å£å‰æŠŠå¯åˆæˆçš„ Buffer æäº¤ç»™ SurfaceFlingerã€‚å…³é”®çº¦æŸæ˜¯ <code>queueBuffer</code>/<code>acquire_fence</code>/<code>present_fence</code> çš„æ—¶åºï¼›è‹¥æœªèµ¶ä¸Šæœ¬å‘¨æœŸï¼Œä¼šé¡ºå»¶åˆ°ä¸‹ä¸€ä¸ªå‘¨æœŸæ˜¾ç¤ºã€‚</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-principle" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-4">Android ä¸­ Vsync çš„åŸºæœ¬å·¥ä½œåŸç†</h3>
<p>Android ç³»ç»Ÿçš„ Vsync å®ç°æ¯”åŸºæœ¬æ¦‚å¿µå¤æ‚å¾—å¤šï¼Œéœ€è¦è€ƒè™‘å¤šä¸ªä¸åŒçš„æ¸²æŸ“ç»„ä»¶ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„åè°ƒå·¥ä½œã€‚</p>
<h4 data-id="heading-5">Vsync ä¿¡å·çš„åˆ†å±‚æ¶æ„</h4>
<p>åœ¨ Android ç³»ç»Ÿä¸­ï¼Œå¹¶ä¸æ˜¯åªæœ‰ä¸€ä¸ªç®€å•çš„ Vsync ä¿¡å·ã€‚å®é™…ä¸Šï¼Œç³»ç»Ÿç»´æŠ¤ç€å¤šä¸ªä¸åŒç”¨é€”çš„ Vsync ä¿¡å·ï¼š</p>
<p><strong>ç¡¬ä»¶ Vsyncï¼ˆHW Vsyncï¼‰</strong> ï¼š è¿™æ˜¯æœ€åº•å±‚çš„ Vsync ä¿¡å·ï¼Œç”±æ˜¾ç¤ºç¡¬ä»¶ï¼ˆHWCï¼ŒHardware Composerï¼‰äº§ç”Ÿã€‚å®ƒçš„é¢‘ç‡ä¸¥æ ¼å¯¹åº”æ˜¾ç¤ºå™¨çš„åˆ·æ–°ç‡ï¼Œæ¯”å¦‚ 60Hz çš„æ˜¾ç¤ºå™¨ä¼šæ¯ 16.67ms äº§ç”Ÿä¸€æ¬¡ HW Vsyncï¼Œ120Hz çš„æ˜¾ç¤ºå™¨ä¼šæ¯ 8.333ms äº§ç”Ÿä¸€æ¬¡ã€‚ï¼ˆç¡¬ä»¶ Vsync å›è°ƒç”± HWC/SurfaceFlinger ç®¡ç†ï¼Œè¯¦è§ <code>frameworks/native/services/surfaceflinger</code> ç›¸å…³å®ç°ï¼‰</p>
<p>ä½†æ˜¯ï¼ŒHW Vsync å¹¶ä¸æ˜¯ä¸€ç›´å¼€å¯çš„ã€‚ç”±äºé¢‘ç¹çš„ç¡¬ä»¶ä¸­æ–­ä¼šæ¶ˆè€—è¾ƒå¤šçš„ç”µé‡ï¼ŒAndroid ç³»ç»Ÿé‡‡ç”¨äº†ä¸€ç§æ™ºèƒ½çš„ç­–ç•¥ï¼šåªæœ‰åœ¨éœ€è¦ç²¾ç¡®åŒæ­¥çš„æ—¶å€™æ‰å¼€å¯ HW Vsyncï¼Œå¤§éƒ¨åˆ†æ—¶é—´ä½¿ç”¨è½¯ä»¶é¢„æµ‹çš„æ–¹å¼ç”Ÿæˆ Vsync ä¿¡å·ã€‚</p>
<p><strong>Vsync-appï¼ˆåº”ç”¨ Vsyncï¼‰</strong> ï¼š è¿™æ˜¯ä¸“é—¨ç”¨äºé©±åŠ¨åº”ç”¨å±‚æ¸²æŸ“çš„ Vsync ä¿¡å·ã€‚å½“åº”ç”¨éœ€è¦è¿›è¡Œ UI æ›´æ–°æ—¶ï¼ˆæ¯”å¦‚ç”¨æˆ·è§¦æ‘¸ã€åŠ¨ç”»è¿è¡Œã€ç•Œé¢æ»šåŠ¨ç­‰ï¼‰ï¼Œåº”ç”¨ä¼šå‘ç³»ç»Ÿç”³è¯·æ¥æ”¶ Vsync-app ä¿¡å·ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// frameworks/base/core/java/android/view/Choreographer.java</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">scheduleFrameLocked</span><span class="hljs-params">(<span class="hljs-type">long</span> now)</span> </span>{
    <span class="hljs-keyword">if</span> (!mFrameScheduled) {
        mFrameScheduled = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (USE_VSYNC) {
            <span class="hljs-comment">// å‘ç³»ç»Ÿç”³è¯·ä¸‹ä¸€ä¸ª Vsync ä¿¡å·</span>
            mDisplayEventReceiver.<span class="hljs-built_in">scheduleVsync</span>();
        }
    }
}
</code></pre>
<p>Vsync-app æ˜¯æŒ‰éœ€ç”³è¯·çš„ã€‚å¦‚æœåº”ç”¨ç•Œé¢æ˜¯é™æ€çš„ï¼Œæ²¡æœ‰ä»»ä½•åŠ¨ç”»æˆ–ç”¨æˆ·äº¤äº’ï¼Œé‚£ä¹ˆåº”ç”¨ä¸ä¼šç”³è¯· Vsync-app ä¿¡å·ï¼Œç³»ç»Ÿä¹Ÿå°±ä¸ä¼šä¸ºè¿™ä¸ªåº”ç”¨ç”Ÿæˆ Vsync äº‹ä»¶ã€‚</p>
<p><strong>Vsync-sfï¼ˆSurfaceFlinger Vsyncï¼‰</strong> ï¼š è¿™æ˜¯ä¸“é—¨ç”¨äºé©±åŠ¨ SurfaceFlinger è¿›è¡Œå›¾å±‚åˆæˆçš„ Vsync ä¿¡å·ã€‚SurfaceFlinger æ˜¯ Android ç³»ç»Ÿä¸­è´Ÿè´£å°†æ‰€æœ‰åº”ç”¨çš„å›¾å±‚åˆæˆä¸ºæœ€ç»ˆç”»é¢çš„æœåŠ¡ã€‚</p>
<p><strong>Vsync-appSfï¼ˆåº”ç”¨-SurfaceFlinger Vsyncï¼‰</strong> ï¼š Android 13 å¼•å…¥çš„æ–°ä¿¡å·ç±»å‹ã€‚ä¸ºæ¶ˆé™¤æ—§è®¾è®¡ä¸­ sf EventThread æ—¢å”¤é†’ SurfaceFlinger åˆæœåŠ¡éƒ¨åˆ† Choreographer å®¢æˆ·ç«¯å¸¦æ¥çš„æ—¶åºæ­§ä¹‰ï¼Œç³»ç»Ÿå°†ä¸¤ç±»èŒè´£åˆ†ç¦»ï¼š<code>vsync-sf</code> ä¸“æ³¨å”¤é†’ SurfaceFlingerï¼Œ<code>vsync-appSf</code> é¢å‘éœ€è¦ä¸ SurfaceFlinger åŒæ­¥çš„å®¢æˆ·ç«¯ã€‚</p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-perfetto-observe" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-6">åœ¨ Perfetto ä¸­è§‚å¯Ÿ Vsync</h3>
<p>Perfetto trace ä¸­åŒ…å«å¤šä¸ªä¸ Vsync ç›¸å…³çš„ Trackï¼Œç†è§£è¿™äº› Track çš„å«ä¹‰æœ‰åŠ©äºåˆ†ææ€§èƒ½é—®é¢˜ã€‚</p>
<p><strong>åœ¨ SurfaceFlinger è¿›ç¨‹ä¸­</strong>ï¼š</p>
<ol start="0">
<li>
<p><strong>vsync-app</strong> æ˜¾ç¤ºåº”ç”¨ Vsync ä¿¡å·çŠ¶æ€ï¼Œæ•°å€¼åœ¨ 0 å’Œ 1 ä¹‹é—´å˜åŒ–ã€‚æ¯æ¬¡æ•°å€¼å˜åŒ–ä»£è¡¨ä¸€ä¸ª Vsync ä¿¡å·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/feb20729cf2c4ed488165ad7fad4f459~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=vOTUX4Jq3H4HWGnF%2FML3FhxWeu4%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p><strong>vsync-sf</strong> æ˜¾ç¤º SurfaceFlinger Vsync ä¿¡å·çŠ¶æ€ã€‚æ—  Vsync Offset æ—¶ä¸ <code>vsync-app</code> åŒæ­¥å˜åŒ–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5ae5c762b2342e9b71bf2f495182190~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=UguwQE7PqeezTvSYgJbdJvQdWuc%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p><strong>vsync-appSf</strong> Android 13+ æ–°å¢ï¼ŒæœåŠ¡äºéœ€è¦ä¸ SurfaceFlinger åŒæ­¥çš„ç‰¹æ®Š Choreographer å®¢æˆ·ç«¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3125b021ecb146bfbe489e80a113ba73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=dn8e1HiPpVZtFVSmkY6KsLBHNQg%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p><strong>HW_VSYNC</strong> æ˜¾ç¤ºç¡¬ä»¶ Vsync å¼€å¯çŠ¶æ€ã€‚å€¼ä¸º 1 è¡¨ç¤ºå¼€å¯ï¼Œå€¼ä¸º 0 è¡¨ç¤ºå…³é—­ã€‚ä¸ºèŠ‚çœç”µé‡ï¼Œç¡¬ä»¶ Vsync ä»…åœ¨éœ€è¦ç²¾ç¡®åŒæ­¥æ—¶å¼€å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10bf75abb524471bbfd12679512b686d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=nqt5ht9Ryr%2F99RskCk2iMtmUddE%3D" alt="image.png" loading="lazy"/></p>
</li>
</ol>
<p><strong>åœ¨åº”ç”¨è¿›ç¨‹ä¸­</strong>ï¼š</p>
<p><code>FrameDisplayEventReceiver.onVsync</code> Slice Trackï¼š æ˜¾ç¤ºåº”ç”¨æ¥æ”¶ Vsync ä¿¡å·çš„æ—¶é—´ç‚¹ã€‚ç”±äºä¿¡å·é€šè¿‡ Binder ä¼ é€’ï¼Œæ—¶é—´å¯èƒ½ç•¥æ™šäº SurfaceFlinger ä¸­çš„ <code>vsync-app</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fe70fca456d451c9b27e28299f915d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=PNPZ1CeAVcPPYW5LRLMv5pVnmis%3D" alt="image.png" loading="lazy"/></p>
<p><code>UI Thread</code> Slice Trackï¼š åŒ…å« <code>Choreographer#doFrame</code> åŠç›¸å…³çš„ Inputã€Animationã€Traversal ç­‰ Sliceã€‚æ¯ä¸ª <code>doFrame</code> å¯¹åº”ä¸€å¸§çš„å¤„ç†å·¥ä½œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d29a601005d43d98fedbf3322eb6c6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=ZMjnABniA5yZB9Kq8ecvgWgNRYs%3D" alt="image.png" loading="lazy"/></p>
<p><code>RenderThread</code> Slice Trackï¼š åŒ…å« <code>DrawFrame</code>ã€<code>syncAndDrawFrame</code>ã€<code>queueBuffer</code> ç­‰ Sliceï¼Œå¯¹åº”æ¸²æŸ“çº¿ç¨‹å·¥ä½œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c676ee0520e48a09843cafa45259962~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=352IQt2VcsUtyA2zs5jn8iyG2jA%3D" alt="image.png" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-app-frames" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-7">Android App æ¯ä¸€å¸§æ˜¯å¦‚ä½•åŸºäº Vsync å·¥ä½œçš„</h3>
<p>Android åº”ç”¨çš„æ¯ä¸€å¸§åŸºäº Vsync æœºåˆ¶å®Œæˆä»æ¸²æŸ“åˆ°æ˜¾ç¤ºçš„å®Œæ•´è¿‡ç¨‹æ¶‰åŠå¤šä¸ªå…³é”®æ­¥éª¤ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3236da8c07a4ab699f03c09abc3341b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=jRr745eGt5r6wo7FJaEodWX9q2o%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-8">æµç¨‹æ€»è§ˆï¼ˆæŒ‰é¡ºåºï¼‰</h4>
<ol start="0">
<li>è§¦å‘é‡ç»˜/è¾“å…¥ï¼š<code>View.invalidate()</code>ã€åŠ¨ç”»ã€æ•°æ®å˜åŒ–æˆ–è¾“å…¥äº‹ä»¶è§¦å‘ â†’ <code>ViewRootImpl.scheduleTraversals()</code> â†’ <code>Choreographer.postCallback(TRAVERSAL)</code></li>
<li>ç”³è¯· Vsyncï¼š<code>Choreographer</code> é€šè¿‡ <code>DisplayEventReceiver.scheduleVsync()</code> ç”³è¯·ä¸‹ä¸€æ¬¡ Vsyncï¼ˆapp ç›¸ä½ï¼‰</li>
<li>æ¥æ”¶ Vsyncï¼š<code>DisplayEventReceiver.onVsync()</code> æ”¶åˆ° Vsync åï¼Œå‘ä¸»çº¿ç¨‹æ¶ˆæ¯é˜Ÿåˆ—æŠ•é€’å¼‚æ­¥æ¶ˆæ¯</li>
<li>ä¸»çº¿ç¨‹å¸§å¤„ç†ï¼š<code>Choreographer.doFrame()</code> æŒ‰é¡ºåºæ‰§è¡Œäº”ç±»å›è°ƒï¼š<code>INPUT â†’ ANIMATION â†’ INSETS_ANIMATION â†’ TRAVERSAL â†’ COMMIT</code></li>
<li>æ¸²æŸ“æäº¤ï¼š<code>RenderThread</code> æ‰§è¡Œ <code>syncAndDrawFrame/DrawFrame</code>ï¼ŒCPU è®°å½• GPU å‘½ä»¤ï¼Œ<code>queueBuffer</code> æäº¤åˆ° BufferQueue</li>
<li>åˆæˆæ˜¾ç¤ºï¼š<code>SurfaceFlinger</code> åœ¨ <code>vsync-sf</code> åˆ°æ¥æ—¶åˆæˆï¼ˆGPU/æˆ–HWCï¼‰ï¼Œç”Ÿæˆ <code>present_fence</code>ï¼Œè¾“å‡ºåˆ°æ˜¾ç¤º</li>
<li>å¸§å®Œæˆåº¦é‡ï¼šé€šè¿‡ <code>FrameTimeline</code>ï¼ˆPresentType/JankTypeï¼‰ä¸ <code>acquire/present_fence</code> åˆ¤å®šæ˜¯å¦æŒ‰æœŸæ˜¾ç¤º</li>
</ol>
<p>ä¸‹é¢åˆ†åˆ«å±•å¼€æ¯ä¸€æ­¥çš„å…³é”®å®ç°ä¸ Perfetto è§‚æµ‹ç‚¹ã€‚</p>
<h4 data-id="heading-9">App ä»€ä¹ˆæ—¶å€™ä¼šç”³è¯· Vsync ä¿¡å·</h4>
<p>åº”ç”¨å¹¶ä¸æ˜¯æ—¶åˆ»éƒ½åœ¨ç”³è¯· Vsync ä¿¡å·çš„ã€‚Vsync ä¿¡å·æ˜¯æŒ‰éœ€ç”³è¯·çš„ï¼Œåªæœ‰åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œåº”ç”¨æ‰ä¼šå‘ç³»ç»Ÿç”³è¯·ä¸‹ä¸€ä¸ª Vsyncï¼š</p>
<p><strong>è§¦å‘ç”³è¯· Vsync çš„åœºæ™¯</strong>ï¼š</p>
<ol start="0">
<li><strong>UI æ›´æ–°éœ€æ±‚</strong>ï¼šå½“ View è°ƒç”¨ <code>invalidate()</code> æ—¶</li>
<li><strong>åŠ¨ç”»æ‰§è¡Œ</strong>ï¼šValueAnimatorã€ObjectAnimator ç­‰åŠ¨ç”»å¼€å§‹æ—¶</li>
<li><strong>ç”¨æˆ·äº¤äº’</strong>ï¼šè§¦æ‘¸äº‹ä»¶ã€æŒ‰é”®äº‹ä»¶ç­‰éœ€è¦ UI å“åº”æ—¶</li>
<li><strong>æ•°æ®å˜åŒ–</strong>ï¼šRecyclerView æ•°æ®æ›´æ–°ã€TextView æ–‡æœ¬æ”¹å˜ç­‰</li>
</ol>
<h4 data-id="heading-10">App ç”³è¯· Vsync çš„å®Œæ•´æµç¨‹</h4>
<p>å½“åº”ç”¨éœ€è¦æ›´æ–° UI æ—¶ï¼Œä¼šé€šè¿‡ä»¥ä¸‹æµç¨‹ç”³è¯· Vsync ä¿¡å·ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. UI ç»„ä»¶è¯·æ±‚é‡ç»˜</span>
<span class="hljs-comment">// frameworks/base/core/java/android/view/View.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">invalidate</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ ‡è®°ä¸ºéœ€è¦é‡ç»˜ï¼Œä½†ä¸ç«‹å³æ‰§è¡Œ</span>
    mPrivateFlags |= <span class="hljs-variable constant_">PFLAG_DIRTY</span>;
    
    <span class="hljs-keyword">if</span> (mParent != <span class="hljs-literal">null</span> &amp;&amp; mAttachInfo != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// å‘çˆ¶å®¹å™¨è¯·æ±‚é‡ç»˜</span>
        mParent.<span class="hljs-title function_">invalidateChild</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-literal">null</span>);
    }
}

<span class="hljs-comment">// 2. ViewRootImpl è°ƒåº¦éå†</span>
<span class="hljs-comment">// frameworks/base/core/java/android/view/ViewRootImpl.java</span>
<span class="hljs-built_in">void</span> <span class="hljs-title function_">scheduleTraversals</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!mTraversalScheduled) {
        mTraversalScheduled = <span class="hljs-literal">true</span>;
        <span class="hljs-comment">// å…³é”®ï¼šå‘ Choreographer æ³¨å†Œå›è°ƒï¼Œç­‰å¾…ä¸‹ä¸€ä¸ª Vsync</span>
        mChoreographer.<span class="hljs-title function_">postCallback</span>(
            <span class="hljs-title class_">Choreographer</span>.<span class="hljs-property">CALLBACK_TRAVERSAL</span>, mTraversalRunnable, <span class="hljs-literal">null</span>);
    }
}

<span class="hljs-comment">// 3. Choreographer ç”³è¯· Vsync</span>
<span class="hljs-comment">// frameworks/base/core/java/android/view/Choreographer.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">postCallback</span>(<span class="hljs-params">int callbackType, Runnable action, <span class="hljs-built_in">Object</span> token</span>) {
    <span class="hljs-comment">// æ·»åŠ å›è°ƒåˆ°é˜Ÿåˆ—</span>
    mCallbackQueues[callbackType].<span class="hljs-title function_">addCallbackLocked</span>(action, token);
    
    <span class="hljs-keyword">if</span> (callbackType == <span class="hljs-variable constant_">CALLBACK_TRAVERSAL</span>) {
        <span class="hljs-comment">// å¦‚æœæ˜¯ UI éå†å›è°ƒï¼Œç«‹å³ç”³è¯· Vsync</span>
        <span class="hljs-title function_">scheduleFrameLocked</span>(now);
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">scheduleFrameLocked</span>(<span class="hljs-params">long now</span>) {
    <span class="hljs-keyword">if</span> (!mFrameScheduled) {
        mFrameScheduled = <span class="hljs-literal">true</span>;
        <span class="hljs-comment">// å…³é”®ï¼šå‘ç³»ç»Ÿç”³è¯· Vsync ä¿¡å·</span>
        mDisplayEventReceiver.<span class="hljs-title function_">scheduleVsync</span>();
    }
}
</code></pre>
<h4 data-id="heading-11">ä¸»çº¿ç¨‹å¦‚ä½•ç›‘å¬ Vsync ä¿¡å·</h4>
<p>åº”ç”¨ä¸»çº¿ç¨‹é€šè¿‡ <code>DisplayEventReceiver</code> æ¥ç›‘å¬ Vsync ä¿¡å·ã€‚è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠå‡ ä¸ªå…³é”®æ­¥éª¤ï¼š</p>
<p><strong>1. å»ºç«‹è¿æ¥</strong>ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// frameworks/base/core/java/android/view/Choreographer.java</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FrameDisplayEventReceiver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">DisplayEventReceiver</span></span>
        implements <span class="hljs-type">Runnable</span> {
    
    public <span class="hljs-type">FrameDisplayEventReceiver</span>(<span class="hljs-type">Looper</span> looper, int vsyncSource) {
        <span class="hljs-keyword">super</span>(looper, vsyncSource);
        <span class="hljs-comment">// åœ¨æ„é€ æ—¶å»ºç«‹ä¸ SurfaceFlinger çš„è¿æ¥</span>
    }
}
</code></pre>
<p><strong>2. æ¥æ”¶ Vsync ä¿¡å·</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onVsync</span><span class="hljs-params">(<span class="hljs-type">long</span> timestampNanos, <span class="hljs-type">long</span> physicalDisplayId, <span class="hljs-type">int</span> frame)</span> {
    <span class="hljs-comment">// æ¥æ”¶åˆ° Vsync ä¿¡å·ï¼Œä½†æ³¨æ„ï¼šè¿™é‡Œå¹¶ä¸ç›´æ¥æ‰§è¡Œ doFrame</span>
    mTimestampNanos = timestampNanos;
    mFrame = frame;
    
    <span class="hljs-comment">// å…³é”®ï¼šå°†å·¥ä½œ post åˆ°ä¸»çº¿ç¨‹çš„ MessageQueue ä¸­</span>
    <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Message.obtain(mHandler, <span class="hljs-built_in">this</span>);
    msg.setAsynchronous(<span class="hljs-literal">true</span>);  <span class="hljs-comment">// è®¾ä¸ºå¼‚æ­¥æ¶ˆæ¯ï¼Œä¼˜å…ˆå¤„ç†</span>
    mHandler.sendMessageAtTime(msg, timestampNanos / TimeUtils.NANOS_PER_MS);
}

<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// è¿™é‡Œæ‰çœŸæ­£å¼€å§‹æ‰§è¡Œä¸€å¸§çš„å·¥ä½œ</span>
    doFrame(mTimestampNanos, mFrame);
}
</code></pre>
<h4 data-id="heading-12">å‡ ä¸ªé—ç•™é—®é¢˜</h4>
<p><strong>Q1ï¼šä¸ºä»€ä¹ˆä¸åœ¨ <code>onVsync()</code> ä¸­ç›´æ¥æ‰§è¡Œ <code>doFrame()</code>ï¼Ÿ</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d7bb81f805745cfaa5752c09f75488f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=ksM7izxTWeVmPv9xE0PHM%2B4SPYE%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>çº¿ç¨‹è¾¹ç•Œï¼š<code>onVsync()</code> å¯èƒ½ä¸åœ¨ä¸»çº¿ç¨‹ï¼ŒUI å¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ</li>
<li>è°ƒåº¦æ§åˆ¶ï¼šé€šè¿‡ <code>sendMessageAtTime()</code> ç²¾ç¡®å¯¹é½æ‰§è¡Œæ—¶åˆ»</li>
<li>é˜Ÿåˆ—è¯­ä¹‰ï¼šè¿›å…¥ä¸»çº¿ç¨‹ MessageQueueï¼Œç¡®ä¿ä¸å…¶ä»–é«˜ä¼˜å…ˆçº§ä»»åŠ¡ååŒ</li>
</ul>
<p><strong>Q2ï¼šVsync æ¶ˆæ¯æ¥äº†ä½†ä¸»çº¿ç¨‹åœ¨å¿™ï¼Œä¼šä¸¢å—ï¼Ÿ</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad87408d85f94c5cb3fb7759aaade007~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=hAhuCT7U0C1aMhF6JUE0NO5F6ww%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>ä¸ä¼šã€‚Vsync æ¶ˆæ¯å…¥é˜Ÿåç­‰å¾…æ‰§è¡Œ</li>
</ul>
<p><strong>Q3ï¼šCPU/GPU æ˜¯å¦å¿…é¡»åœ¨å•ä¸ª Vsync å‘¨æœŸå†…å®Œæˆï¼Ÿ</strong> å¦‚æœä»»ä½•ä¸€ä¸ªç¯èŠ‚è¶…è¿‡ 1 ä¸ª vsync ï¼Œéƒ½ä¼šå¯¼è‡´æ‰å¸§ï¼Ÿ</p>
<ul>
<li>
<p>ç°ä»£ Android ç³»ç»Ÿé‡‡ç”¨å¤šç¼“å†²ï¼ˆé€šå¸¸æ˜¯ä¸‰ç¼“å†²ï¼‰æœºåˆ¶ï¼š</p>
<ul>
<li><strong>åº”ç”¨ç«¯</strong>ï¼šFront Bufferï¼ˆæ˜¾ç¤ºä¸­ï¼‰+ Back Bufferï¼ˆæ¸²æŸ“ä¸­ï¼‰+ å¯èƒ½çš„ç¬¬ä¸‰ä¸ª Buffer</li>
<li><strong>SurfaceFlinger ç«¯</strong>ï¼šä¹Ÿæœ‰ç±»ä¼¼çš„ç¼“å†²æœºåˆ¶</li>
<li>è¿™æ„å‘³ç€å³ä½¿åº”ç”¨çš„æŸä¸€å¸§è¶…è¿‡äº† Vsync å‘¨æœŸï¼Œä¹Ÿä¸ä¸€å®šä¼šç«‹å³æ‰å¸§ã€‚</li>
</ul>
</li>
<li>
<p>GPU å¼‚æ­¥æµæ°´ï¼›å…³é”®æ˜¯ <code>queueBuffer</code> æ˜¯å¦èµ¶ä¸Š SF åˆæˆçª—å£ï¼Œå¤šç¼“å†²å¯æ©ç›–å•å¸§å»¶è¿Ÿä½†å¯èƒ½å¼•å…¥é¢å¤–æ—¶å»¶ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹å›¾é‡Œé¢ï¼ŒApp ç«¯çš„ BufferQueue å’Œ SurfaceFlinger ç«¯çš„ Buffer éƒ½æ˜¯å……è¶³çš„ï¼Œä¸”æœ‰å†—ä½™ï¼Œæ‰€ä»¥æ²¡æœ‰æ‰å¸§ã€‚</p>
</li>
<li>
<p>ä½†æ˜¯å¦‚æœ App åœ¨ä¹‹å‰æ²¡æœ‰å †ç§¯ Buffer ï¼Œåˆ™è¿˜æ˜¯ä¼šå‡ºç°æ‰å¸§ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79c08e00432e4c5f99b576864f2735f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=W6hF8qraQgkcCl%2Bw%2F7sH84P7hck%3D" alt="image.png" loading="lazy"/></p>
<p><strong>Q4ï¼šGPU å’Œ CPU æ˜¯æ€ä¹ˆååŒçš„ï¼Ÿ</strong> ï¼š</p>
<ul>
<li>
<p>GPU æ¸²æŸ“æ˜¯å¼‚æ­¥çš„ï¼Œè¿™å¸¦æ¥äº†é¢å¤–çš„å¤æ‚æ€§ï¼š</p>
<ul>
<li><strong>CPU å·¥ä½œæ­£å¸¸ï¼ŒGPU æˆä¸ºç“¶é¢ˆ</strong>ï¼šå³ä½¿åº”ç”¨ä¸»çº¿ç¨‹åœ¨ Vsync å‘¨æœŸå†…å®Œæˆå·¥ä½œï¼ŒGPU æ¸²æŸ“è€—æ—¶è¿‡é•¿ä»ä¼šå¯¼è‡´æ‰å¸§</li>
<li><strong>GPU Fence æœºåˆ¶</strong>ï¼š<code>presentFence</code> æ˜¯è¿æ¥ GPU æ¸²æŸ“å’Œ SurfaceFlinger åˆæˆçš„å…³é”®åŒæ­¥æœºåˆ¶ã€‚æ ¹æ®ç³»ç»Ÿ <code>Latch Unsignaled Buffers</code> ç­–ç•¥ï¼ŒSurfaceFlinger å¹¶éæ€»æ˜¯ç­‰å¾… GPU å®Œæˆï¼Œè€Œæ˜¯å¯ä»¥â€œæŠ¢è·‘â€æå‰å¼€å§‹åˆæˆï¼Œä»…åœ¨æœ€ç»ˆéœ€è¦ä½¿ç”¨ Buffer å†…å®¹æ—¶æ‰ç­‰å¾… fence ä¿¡å·ï¼Œä»¥æ­¤æ¥éšè—å»¶è¿Ÿã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1be83fd29efb47eba5a5310a06344656~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=i3sgiBywl7T3P6d1K%2B3nAqrQbds%3D" alt="image.png" loading="lazy"/></p>
<p><strong>Q5ï¼šVsync Phaseï¼ˆç›¸ä½å·®ï¼‰çš„çœŸæ­£ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong> ï¼š</p>
<ul>
<li><strong>æå‡è·Ÿæ‰‹æ€§</strong>ï¼šé€šè¿‡è°ƒæ•´ sf vsync çš„ç›¸ä½å·®ï¼Œå¯ä»¥è®©åº”ç”¨ä»å¼€å§‹ç»˜åˆ¶åˆ°æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ—¶é—´ä» 3 ä¸ª Vsync å‘¨æœŸç¼©çŸ­åˆ° 2 ä¸ª Vsync å‘¨æœŸã€‚è¿™å¯¹äºè§¦æ‘¸å“åº”ç­‰äº¤äº’åœºæ™¯éå¸¸é‡è¦ã€‚</li>
<li><strong>è§£å†³åº”ç”¨ç»˜åˆ¶è¶…æ—¶é—®é¢˜</strong>ï¼šå½“åº”ç”¨ç»˜åˆ¶è¶…æ—¶æ—¶ï¼Œåˆç†çš„ sf ç›¸ä½å·®å¯ä»¥ä¸ºåº”ç”¨äº‰å–æ›´å¤šçš„å¤„ç†æ—¶é—´ï¼Œé¿å…å› ä¸ºæ—¶åºä¸å½“å¯¼è‡´çš„æ‰å¸§ã€‚</li>
<li>é€šè¿‡è§‚å¯Ÿ Perfetto ä¸­çš„ VsyncWorkDuration æŒ‡æ ‡å¯ä»¥äº†è§£ç³»ç»Ÿçš„ Vsync Offset é…ç½®ã€‚</li>
<li>ä¸‹å›¾ä¸­æ˜¾ç¤ºçš„æ—¶é—´æ®µå°±æ˜¯æˆ‘æ‰‹ä¸Šçš„æ‰‹æœºé…ç½®çš„ app offset ï¼ˆ13.3msï¼‰</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b1b7e502e03445e8d40e9d6500e5d22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=8BSkoOcZZoXY0rPOdv7NHthFWG4%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-13">Vsync Offset çš„æŠ€æœ¯å®ç°</h4>
<p>åœ¨ Android ç³»ç»Ÿä¸­ï¼ŒVsync Offset æ˜¯é€šè¿‡ VsyncConfiguration æ¥å®ç°çš„ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// frameworks/native/services/surfaceflinger/Scheduler/VsyncConfiguration.cpp</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">VsyncConfiguration</span> {
    <span class="hljs-comment">// åº”ç”¨ Vsync ç›¸å¯¹äºç¡¬ä»¶ Vsync çš„åç§»</span>
    <span class="hljs-type">nsecs_t</span> appOffset;
    <span class="hljs-comment">// SurfaceFlinger Vsync ç›¸å¯¹äºç¡¬ä»¶ Vsync çš„åç§»  </span>
    <span class="hljs-type">nsecs_t</span> sfOffset;
    <span class="hljs-comment">// æ—©æœŸåº”ç”¨ Vsync åç§»ï¼ˆç”¨äºç‰¹æ®Šæƒ…å†µï¼‰</span>
    <span class="hljs-type">nsecs_t</span> appOffsetEarly;
    <span class="hljs-comment">// æ—©æœŸ SurfaceFlinger Vsync åç§»</span>
    <span class="hljs-type">nsecs_t</span> sfOffsetEarly;
};
</code></pre>
<p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p>
<ul>
<li><code>appOffset</code>ï¼šåº”ç”¨ Vsync ç›¸å¯¹äºç¡¬ä»¶ Vsync çš„æ—¶é—´åç§»</li>
<li><code>sfOffset</code>ï¼šSurfaceFlinger Vsync ç›¸å¯¹äºç¡¬ä»¶ Vsync çš„æ—¶é—´åç§»</li>
<li><code>Vsync Offset = sfOffset - appOffset</code>ï¼šåº”ç”¨å’Œ SurfaceFlinger æ¥æ”¶ä¿¡å·çš„æ—¶é—´å·®</li>
</ul>
<h4 data-id="heading-14">å®é™…çš„ä¼˜åŒ–æ•ˆæœ</h4>
<p>ä»¥ 120Hz è®¾å¤‡ä¸ºä¾‹ï¼Œé…ç½® 3ms Offset çš„æ•ˆæœï¼š</p>
<p><strong>æ—  Offsetï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰</strong> ï¼š</p>
<ul>
<li>T0ï¼šåº”ç”¨å’Œ SurfaceFlinger åŒæ—¶æ¥æ”¶ Vsync</li>
<li>T0+3msï¼šåº”ç”¨å®Œæˆæ¸²æŸ“</li>
<li>T0+8.333msï¼šä¸‹ä¸€ä¸ª Vsyncï¼ŒSurfaceFlinger å¼€å§‹åˆæˆ</li>
<li>T0+16.666msï¼šç”¨æˆ·çœ‹åˆ°ç”»é¢ï¼ˆæ€»å»¶è¿Ÿ 16.666msï¼‰</li>
</ul>
<p><strong>æœ‰ Offsetï¼ˆä¼˜åŒ–æ–¹å¼ï¼‰</strong> ï¼š</p>
<ul>
<li>T0+1msï¼šåº”ç”¨æ¥æ”¶ Vsync-appï¼Œå¼€å§‹æ¸²æŸ“</li>
<li>T0+3msï¼šåº”ç”¨å®Œæˆæ¸²æŸ“ï¼Œæäº¤ Buffer</li>
<li>T0+4msï¼šSurfaceFlinger æ¥æ”¶ Vsync-sfï¼Œç«‹å³å¼€å§‹åˆæˆ</li>
<li>T0+6msï¼šSurfaceFlinger å®Œæˆåˆæˆ</li>
<li>T0+8.333msï¼šç”¨æˆ·çœ‹åˆ°ç”»é¢ï¼ˆæ€»å»¶è¿Ÿ 8.333msï¼‰</li>
</ul>
<p>é€šè¿‡åˆç†é…ç½® Offsetï¼Œå¯ä»¥å°†å»¶è¿Ÿä» 16.666ms å‡å°‘åˆ° 8.333msï¼Œæå‡ä¸€å€çš„å“åº”æ€§èƒ½ã€‚</p>
<p><strong>å®é™…çš„æ—¶é—´é¢„ç®—åˆ†é…</strong>ï¼š</p>
<p>ä»¥ 120Hz è®¾å¤‡ä¸ºä¾‹ï¼ˆ8.333ms å‘¨æœŸï¼‰ï¼š</p>
<ul>
<li><strong>ç†æƒ³æƒ…å†µ</strong>ï¼šåº”ç”¨ 4ms + SurfaceFlinger 2ms + ç¼“å†² 2.333ms</li>
<li><strong>ä½†å®é™…å¯ä»¥æ¥å—</strong>ï¼šåº”ç”¨ 6ms + SurfaceFlinger 3msï¼ˆå¦‚æœæœ‰è¶³å¤Ÿçš„ Buffer ç¼“å†²ï¼‰</li>
<li><strong>GPU é™åˆ¶</strong>ï¼šåœ¨ä½ç«¯è®¾å¤‡ä¸Šï¼ŒGPU æ¸²æŸ“å¯èƒ½éœ€è¦ 10-15msï¼Œæˆä¸ºçœŸæ­£çš„ç“¶é¢ˆ</li>
</ul>
<p><strong>æ‰å¸§çš„çœŸæ­£åŸå› </strong>ï¼š</p>
<ol start="0">
<li><strong>åº”ç”¨ç«¯è¶…æ—¶ + Buffer è€—å°½</strong>ï¼šè¿ç»­å¤šå¸§è¶…æ—¶å¯¼è‡´ BufferQueue æ²¡æœ‰å¯ç”¨ Buffer</li>
<li><strong>GPU æ¸²æŸ“è¶…æ—¶</strong>ï¼šå³ä½¿ CPU å·¥ä½œæ­£å¸¸ï¼ŒGPU æ¸²æŸ“è¶…æ—¶ä¹Ÿä¼šæ‰å¸§</li>
<li><strong>SurfaceFlinger è¶…æ—¶</strong>ï¼šç³»ç»Ÿçº§åˆæˆè¶…æ—¶ï¼Œå½±å“æ‰€æœ‰åº”ç”¨</li>
<li><strong>ç³»ç»Ÿèµ„æºç«äº‰</strong>ï¼šCPU/GPU/å†…å­˜ç­‰èµ„æºè¢«å…¶ä»–è¿›ç¨‹å ç”¨</li>
</ol>
<h3 data-id="heading-15">Vsync ä¿¡å·çš„å®Œæ•´ä»£ç æµç¨‹</h3>
<p>Vsync ä¿¡å·ä»ç¡¬ä»¶ä¼ é€’åˆ°åº”ç”¨å±‚çš„å®Œæ•´é“¾è·¯å¦‚ä¸‹ã€‚</p>
<h4 data-id="heading-16">Native å±‚ï¼šVsync ä¿¡å·çš„äº§ç”Ÿä¸ç®¡ç†</h4>
<p><strong>ç¡¬ä»¶ Vsync çš„äº§ç”Ÿ</strong></p>
<p>Vsync ä¿¡å·æœ€åˆç”±æ˜¾ç¤ºç¡¬ä»¶äº§ç”Ÿã€‚åœ¨ HWCï¼ˆHardware Composerï¼‰å±‚é¢ï¼Œç¡¬ä»¶ä¼šå®šæœŸäº§ç”Ÿ Vsync ä¸­æ–­ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// hardware/interfaces/graphics/composer/2.1/utils/hwc2on1adapter/HWC2On1Adapter.cpp</span>
<span class="hljs-comment">// æ³¨æ„ï¼šè¿™æ˜¯ HWC 1.x åˆ° 2.x çš„å…¼å®¹æ€§é€‚é…å™¨ï¼Œç°ä»£è®¾å¤‡é€šå¸¸ä½¿ç”¨åŸç”Ÿ HWC 2.x+</span>
<span class="hljs-comment">// åŸºäº Android 16 AOSP æœ€æ–°ä»£ç </span>
<span class="hljs-type">void</span> <span class="hljs-title function_">HWC2On1Adapter::vsyncThread</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">while</span> (!mVsyncEnded) {
        <span class="hljs-keyword">if</span> (mVsyncEnabled) {
            <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> now = <span class="hljs-built_in">std</span>::chrono::steady_clock::now();
            <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> vsyncPeriod = <span class="hljs-built_in">std</span>::chrono::nanoseconds(mVsyncPeriod);
            <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> nextVsync = mLastVsync + vsyncPeriod;
            
            <span class="hljs-keyword">if</span> (now &gt;= nextVsync) {
                <span class="hljs-comment">// äº§ç”Ÿç¡¬ä»¶ Vsync æ—¶é—´æˆ³</span>
                <span class="hljs-keyword">auto</span> timestamp = <span class="hljs-built_in">std</span>::chrono::duration_cast&lt;<span class="hljs-built_in">std</span>::chrono::nanoseconds&gt;(
                    nextVsync.time_since_epoch()).count();
                
                <span class="hljs-comment">// å›è°ƒåˆ° SurfaceFlinger</span>
                <span class="hljs-keyword">if</span> (mVsyncCallback) {
                    mVsyncCallback-&gt;onVsync(timestamp, mDisplayId);
                }
                mLastVsync = nextVsync;
            }
        }
        <span class="hljs-built_in">std</span>::this_thread::sleep_for(<span class="hljs-built_in">std</span>::chrono::microseconds(<span class="hljs-number">100</span>));
    }
}
</code></pre>
<p><strong>VsyncControllerï¼šæ ¸å¿ƒæ§åˆ¶å™¨</strong></p>
<p>VsyncController æ˜¯æ•´ä¸ª Vsync ç³»ç»Ÿçš„å¤§è„‘ï¼Œå®ƒæ¥æ”¶ç¡¬ä»¶ Vsync å¹¶ç®¡ç†è½¯ä»¶é¢„æµ‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// frameworks/native/services/surfaceflinger/Scheduler/VsyncController.h</span>
<span class="hljs-comment">// å®é™…å®ç°é€šå¸¸åœ¨ VSyncReactor.cpp ä¸­</span>
<span class="hljs-comment">// åŸºäº Android 16 AOSP æœ€æ–°ä»£ç </span>
void VsyncController::<span class="hljs-built_in">onVsync</span>(nsecs_t timestamp, int32_t hwcDisplayId) {
    std::lock_guard&lt;std::mutex&gt; <span class="hljs-built_in">lock</span>(mMutex);
    
    <span class="hljs-comment">// è®°å½•ç¡¬ä»¶ Vsync æ—¶é—´æˆ³åˆ°è¿½è¸ªå™¨</span>
    mVsyncTracker-&gt;<span class="hljs-built_in">addVsyncTimestamp</span>(timestamp);
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦æ›´å¤šç¡¬ä»¶ Vsync æ ·æœ¬æ¥æ ¡å‡†é¢„æµ‹æ¨¡å‹</span>
    if (mVsyncTracker-&gt;needsMoreSamples()) {
        <span class="hljs-comment">// æ¨¡å‹è¿˜éœ€è¦æ›´å¤šæ ·æœ¬ï¼Œç»§ç»­å¯ç”¨ç¡¬ä»¶ Vsync</span>
        <span class="hljs-built_in">ALOGV</span>("VsyncController: Need more samples, keeping HW Vsync enabled");
    } else {
        <span class="hljs-comment">// æ¨¡å‹å·²ç»ç¨³å®šï¼Œå¯ä»¥å…³é—­ç¡¬ä»¶ Vsync èŠ‚çœç”µé‡</span>
        <span class="hljs-built_in">ALOGV</span>("VsyncController: Model stable, disabling HW Vsync");
        <span class="hljs-built_in">enableHardwareVsync</span>(false);
    }
    
    <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰ç­‰å¾…çš„å®¢æˆ·ç«¯</span>
    for (auto&amp; callback : mCallbacks) {
        callback-&gt;<span class="hljs-built_in">onVsync</span>(timestamp);
    }
}

void VsyncController::<span class="hljs-built_in">enableHardwareVsync</span>(bool enable) {
    if (mHwVsyncEnabled != enable) {
        mHwVsyncEnabled = enable;
        <span class="hljs-comment">// é€šè¿‡ HWC æ¥å£æ§åˆ¶ç¡¬ä»¶ Vsync</span>
        mHwc<span class="hljs-selector-class">.setVsyncEnabled</span>(mDisplayId, enable);
        
        <span class="hljs-comment">// åœ¨ Perfetto trace ä¸­å¯ä»¥çœ‹åˆ°è¿™ä¸ªçŠ¶æ€å˜åŒ–</span>
        <span class="hljs-built_in">ATRACE_INT</span>("HW_VSYNC", enable ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);
    }
}
</code></pre>
<p><strong>VsyncDispatchï¼šä¿¡å·åˆ†å‘æœºåˆ¶</strong></p>
<p>VsyncDispatch è´Ÿè´£å°† Vsync ä¿¡å·ç²¾ç¡®åœ°åˆ†å‘ç»™ä¸åŒçš„æ¶ˆè´¹è€…ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…å¯ä»¥æœ‰ä¸åŒçš„è§¦å‘æ—¶é—´ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// frameworks/native/services/surfaceflinger/Scheduler/VSyncDispatch.h
// å®é™…å®ç°åœ¨ VSyncDispatchTimerQueue.cpp ä¸­
// åŸºäº Android 16 AOSP æœ€æ–°ä»£ç 
VsyncDispatch::CallbackToken VsyncDispatch::registerCallback(
        Callback callback, std::string callbackName) {
    std::lock_guard&lt;decltype(mMutex)&gt; lock(mMutex)<span class="hljs-comment">;</span>
    
    // ä¸ºæ¯ä¸ªå›è°ƒç”Ÿæˆå”¯ä¸€çš„ token
    auto <span class="hljs-attr">token</span> = CallbackToken(mCallbackMap.size())<span class="hljs-comment">;</span>
    mCallbackMap<span class="hljs-section">[token]</span> = std::make_unique&lt;CallbackEntry&gt;(
        std::move(callback), std::move(callbackName))<span class="hljs-comment">;</span>
    
    return token<span class="hljs-comment">;</span>
}

nsecs_t VsyncDispatch::schedule(CallbackToken token, 
                               nsecs_t workDuration, 
                               nsecs_t earliestVsync) {
    std::lock_guard&lt;decltype(mMutex)&gt; lock(mMutex)<span class="hljs-comment">;</span>
    
    auto <span class="hljs-attr">it</span> = mCallbackMap.find(token)<span class="hljs-comment">;</span>
    if (<span class="hljs-attr">it</span> == mCallbackMap.end()) {
        return kInvalidTime<span class="hljs-comment">;</span>
    }
    
    // è®¡ç®—ç›®æ ‡ Vsync æ—¶é—´
    auto <span class="hljs-attr">targetVsync</span> = mVsyncTracker-&gt;nextVsyncTime(earliestVsync)<span class="hljs-comment">;</span>
    
    // è®¡ç®—å”¤é†’æ—¶é—´ = ç›®æ ‡ Vsync - å·¥ä½œæ—¶é•¿
    auto <span class="hljs-attr">wakeupTime</span> = targetVsync - workDuration<span class="hljs-comment">;</span>
    
    // å¦‚æœå”¤é†’æ—¶é—´å·²ç»è¿‡äº†ï¼Œæ¨åˆ°ä¸‹ä¸€ä¸ª Vsync
    auto <span class="hljs-attr">now</span> = systemTime(SYSTEM_TIME_MONOTONIC)<span class="hljs-comment">;</span>
    if (wakeupTime &lt; now) {
        <span class="hljs-attr">targetVsync</span> = mVsyncTracker-&gt;nextVsyncTime(targetVsync + <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
        <span class="hljs-attr">wakeupTime</span> = targetVsync - workDuration<span class="hljs-comment">;</span>
    }
    
    // è®¾ç½®å›è°ƒçš„è§¦å‘æ—¶é—´
    it-&gt;second-&gt;<span class="hljs-attr">wakeupTime</span> = wakeupTime<span class="hljs-comment">;</span>
    it-&gt;second-&gt;<span class="hljs-attr">targetVsync</span> = targetVsync<span class="hljs-comment">;</span>
    it-&gt;second-&gt;<span class="hljs-attr">workDuration</span> = workDuration<span class="hljs-comment">;</span>
    
    // é‡æ–°è°ƒåº¦å®šæ—¶å™¨
    reschedule()<span class="hljs-comment">;</span>
    
    return targetVsync<span class="hljs-comment">;</span>
}

void VsyncDispatch::reschedule() {
    // æ‰¾åˆ°æœ€æ—©éœ€è¦è§¦å‘çš„å›è°ƒ
    nsecs_t <span class="hljs-attr">nextWakeup</span> = std::numeric_limits&lt;nsecs_t&gt;::max()<span class="hljs-comment">;</span>
    for (const auto&amp; <span class="hljs-section">[token, entry]</span> : mCallbackMap) {
        if (entry-&gt;wakeupTime &gt; 0 &amp;&amp; entry-&gt;wakeupTime &lt; nextWakeup) {
            <span class="hljs-attr">nextWakeup</span> = entry-&gt;wakeupTime<span class="hljs-comment">;</span>
        }
    }
    
    if (nextWakeup != std::numeric_limits&lt;nsecs_t&gt;::max()) {
        // è®¾ç½®å®šæ—¶å™¨åœ¨ nextWakeup æ—¶é—´è§¦å‘
        mTimeKeeper-&gt;alarmAt(std::bind(&amp;VsyncDispatch::timerCallback, this), nextWakeup)<span class="hljs-comment">;</span>
    }
}

void VsyncDispatch::timerCallback() {
    std::vector&lt;std::pair&lt;CallbackToken, CallbackEntry*&gt;&gt; firedCallbacks<span class="hljs-comment">;</span>
    
    {
        std::lock_guard&lt;decltype(mMutex)&gt; lock(mMutex)<span class="hljs-comment">;</span>
        auto <span class="hljs-attr">now</span> = systemTime(SYSTEM_TIME_MONOTONIC)<span class="hljs-comment">;</span>
        
        // æ‰¾åˆ°æ‰€æœ‰åº”è¯¥è§¦å‘çš„å›è°ƒ
        for (auto&amp; <span class="hljs-section">[token, entry]</span> : mCallbackMap) {
            if (entry-&gt;wakeupTime &gt; 0 &amp;&amp; now &gt;= entry-&gt;wakeupTime) {
                firedCallbacks.push_back({token, entry.get()})<span class="hljs-comment">;</span>
                entry-&gt;<span class="hljs-attr">wakeupTime</span> = <span class="hljs-number">0</span><span class="hljs-comment">; // é‡ç½®</span>
            }
        }
    }
    
    // åœ¨é”å¤–æ‰§è¡Œå›è°ƒï¼Œé¿å…æ­»é”
    for (auto&amp; <span class="hljs-section">[token, entry]</span> : firedCallbacks) {
        entry-&gt;callback(entry-&gt;targetVsync, entry-&gt;wakeupTime)<span class="hljs-comment">;</span>
    }
}
</code></pre>
<p><strong>EventThreadï¼šè¿æ¥ Native å’Œ Framework</strong></p>
<p>EventThread æ˜¯è¿æ¥ Native å±‚ Vsync ç³»ç»Ÿå’Œ Framework å±‚çš„æ¡¥æ¢ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// frameworks/native/services/surfaceflinger/Scheduler/EventThread.cpp</span>
EventThread::<span class="hljs-built_in">EventThread</span>(std::unique_ptr&lt;VSyncSource&gt; vsyncSource,
                        std::unique_ptr&lt;InterceptVSyncCallback&gt; interceptVSyncCallback,
                        <span class="hljs-type">const</span> <span class="hljs-type">char</span>* threadName)
    : <span class="hljs-built_in">mVSyncSource</span>(std::<span class="hljs-built_in">move</span>(vsyncSource))
    , <span class="hljs-built_in">mInterceptVSyncCallback</span>(std::<span class="hljs-built_in">move</span>(interceptVSyncCallback))
    , <span class="hljs-built_in">mThreadName</span>(threadName) {
    
    <span class="hljs-comment">// å‘ VsyncDispatch æ³¨å†Œå›è°ƒ</span>
    mVSyncSource-&gt;<span class="hljs-built_in">setCallback</span>(<span class="hljs-keyword">this</span>);
    
    <span class="hljs-comment">// å¯åŠ¨ EventThread çº¿ç¨‹</span>
    mThread = std::<span class="hljs-built_in">thread</span>([<span class="hljs-keyword">this</span>] { <span class="hljs-built_in">threadMain</span>(); });
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">EventThread::threadMain</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mMutex)</span></span>;
    
    <span class="hljs-keyword">while</span> (mKeepRunning) {
        <span class="hljs-comment">// ç­‰å¾… Vsync äº‹ä»¶æˆ–è¿æ¥å˜åŒ–</span>
        mCondition.<span class="hljs-built_in">wait</span>(lock, [<span class="hljs-keyword">this</span>] {
            <span class="hljs-keyword">return</span> !mPendingEvents.<span class="hljs-built_in">empty</span>() || !mKeepRunning;
        });
        
        <span class="hljs-comment">// å¤„ç†æ‰€æœ‰å¾…å¤„ç†çš„äº‹ä»¶</span>
        <span class="hljs-keyword">auto</span> pendingEvents = std::<span class="hljs-built_in">move</span>(mPendingEvents);
        lock.<span class="hljs-built_in">unlock</span>();
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; event : pendingEvents) {
            <span class="hljs-comment">// åˆ†å‘ç»™æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; connection : mConnections) {
                <span class="hljs-keyword">if</span> (connection-&gt;vsyncRequest != VSyncRequest::None) {
                    connection-&gt;<span class="hljs-built_in">postEvent</span>(event);
                }
            }
        }
        
        lock.<span class="hljs-built_in">lock</span>();
    }
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">EventThread::onVSyncEvent</span><span class="hljs-params">(<span class="hljs-type">nsecs_t</span> timestamp, <span class="hljs-type">int32_t</span> displayId)</span> </span>{
    <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mMutex)</span></span>;
    
    <span class="hljs-comment">// åˆ›å»º Vsync äº‹ä»¶</span>
    DisplayEventReceiver::Event event;
    event.header.type = DisplayEventReceiver::DISPLAY_EVENT_VSYNC;
    event.header.id = displayId;
    event.header.timestamp = timestamp;
    event.vsync.count = ++mVSyncCount;
    
    <span class="hljs-comment">// æ·»åŠ åˆ°å¾…å¤„ç†äº‹ä»¶é˜Ÿåˆ—</span>
    mPendingEvents.<span class="hljs-built_in">push_back</span>(event);
    mCondition.<span class="hljs-built_in">notify_all</span>();
}
</code></pre>
<h4 data-id="heading-17">Framework å±‚ï¼šVsync ä¿¡å·çš„æ¥æ”¶ä¸å¤„ç†</h4>
<p><strong>DisplayEventReceiverï¼šJava å’Œ Native çš„æ¡¥æ¢</strong></p>
<p>DisplayEventReceiver æ˜¯ Framework å±‚æ¥æ”¶ Vsync ä¿¡å·çš„å…³é”®ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// frameworks/base/core/jni/android_view_DisplayEventReceiver.cpp</span>
static jlong <span class="hljs-built_in">nativeInit</span>(JNIEnv* env, jclass clazz, jobject receiverWeak,
        jobject messageQueueObj, jint vsyncSource, jint configChanged) {
    
    <span class="hljs-comment">// è·å– Java å±‚çš„ MessageQueue</span>
    sp&lt;MessageQueue&gt; messageQueue = <span class="hljs-built_in">android_os_MessageQueue_getMessageQueue</span>(env, messageQueueObj);
    
    <span class="hljs-comment">// åˆ›å»º Native å±‚çš„ DisplayEventReceiver</span>
    sp&lt;NativeDisplayEventReceiver&gt; receiver = new <span class="hljs-built_in">NativeDisplayEventReceiver</span>(
        env, receiverWeak, messageQueue, vsyncSource, configChanged);
    
    <span class="hljs-comment">// æ³¨å†Œåˆ° EventThread</span>
    status_t status = receiver-&gt;<span class="hljs-built_in">initialize</span>();
    if (status) {
        <span class="hljs-built_in">ALOGE</span>("Failed to initialize display event receiver, status=%d", status);
        return <span class="hljs-number">0</span>;
    }
    
    receiver-&gt;<span class="hljs-built_in">incStrong</span>(gDisplayEventReceiverClassInfo.clazz);
    return reinterpret_cast&lt;jlong&gt;(receiver.get());
}

class NativeDisplayEventReceiver : public DisplayEventReceiver, public MessageHandler {
public:
    <span class="hljs-built_in">NativeDisplayEventReceiver</span>(JNIEnv* env, jobject receiverWeak, 
                              const sp&lt;MessageQueue&gt;&amp; messageQueue,
                              jint vsyncSource, jint configChanged)
        : <span class="hljs-built_in">DisplayEventReceiver</span>(static_cast&lt;ISurfaceComposer::VsyncSource&gt;(vsyncSource),
                             static_cast&lt;ISurfaceComposer::ConfigChanged&gt;(configChanged))
        , <span class="hljs-built_in">mReceiverWeakGlobal</span>(env-&gt;<span class="hljs-built_in">NewGlobalWeakRef</span>(receiverWeak))
        , <span class="hljs-built_in">mMessageQueue</span>(messageQueue) {
    }
    
    <span class="hljs-comment">// å½“ Vsync äº‹ä»¶åˆ°è¾¾æ—¶çš„å›è°ƒ</span>
    virtual void <span class="hljs-built_in">onVsync</span>(nsecs_t timestamp, nsecs_t physicalDisplayId, uint32_t count) override {
        <span class="hljs-built_in">ALOGV</span>("NativeDisplayEventReceiver: onVsync timestamp=%lld", (long long)timestamp);
        
        <span class="hljs-comment">// å°†äº‹ä»¶ä¿å­˜å¹¶ post åˆ° MessageQueue</span>
        mTimestamp = timestamp;
        mDisplayId = physicalDisplayId;
        mCount = count;
        
        <span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ° Java å±‚çš„ MessageQueue</span>
        mMessageQueue-&gt;<span class="hljs-built_in">getLooper</span>()-&gt;<span class="hljs-built_in">sendMessage</span>(this, Message(MSG_VSYNC));
    }
    
    <span class="hljs-comment">// MessageHandler çš„å®ç°ï¼Œåœ¨ Java å±‚ Looper ä¸­æ‰§è¡Œ</span>
    virtual void <span class="hljs-built_in">handleMessage</span>(const Message&amp; message) override {
        switch (message.what) {
        case MSG_VSYNC:
            // è°ƒç”¨ Java å±‚çš„ onVsync æ–¹æ³•
            <span class="hljs-built_in">dispatchVsync</span>(mTimestamp, mDisplayId, mCount);
            break;
        }
    }
    
private:
    void <span class="hljs-built_in">dispatchVsync</span>(nsecs_t timestamp, nsecs_t displayId, uint32_t count) {
        JNIEnv* env = AndroidRuntime::<span class="hljs-built_in">getJNIEnv</span>();
        
        jobject receiverObj = env-&gt;<span class="hljs-built_in">NewLocalRef</span>(mReceiverWeakGlobal);
        if (receiverObj) {
            <span class="hljs-comment">// è°ƒç”¨ Java å±‚ DisplayEventReceiver.onVsync()</span>
            env-&gt;<span class="hljs-built_in">CallVoidMethod</span>(receiverObj, gDisplayEventReceiverClassInfo.onVsync,
                    ns2ms(timestamp), displayId, count);
            env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(receiverObj);
        }
    }
};
</code></pre>
<p><strong>Choreographer ä¸­çš„ Vsync å¤„ç†</strong></p>
<p>åœ¨ Java å±‚ï¼ŒChoreographer çš„ FrameDisplayEventReceiver è´Ÿè´£å¤„ç† Vsync ä¿¡å·ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// frameworks/base/core/java/android/view/Choreographer.java</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FrameDisplayEventReceiver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DisplayEventReceiver</span>
        <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> mHavePendingVsync;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> mTimestampNanos;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> mFrame;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">FrameDisplayEventReceiver</span><span class="hljs-params">(Looper looper, <span class="hljs-type">int</span> vsyncSource)</span> {
        <span class="hljs-built_in">super</span>(looper, vsyncSource);
    }
    
    <span class="hljs-comment">// Native å±‚å›è°ƒåˆ°è¿™é‡Œ</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onVsync</span><span class="hljs-params">(<span class="hljs-type">long</span> timestampNanos, <span class="hljs-type">int</span> builtInDisplayId, <span class="hljs-type">int</span> frame)</span> {
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤çš„ Vsyncï¼ˆé˜²å¾¡æ€§ç¼–ç¨‹ï¼‰</span>
        <span class="hljs-keyword">if</span> (mHavePendingVsync) {
            Log.w(TAG, <span class="hljs-string">"Already have a pending vsync event. There should only be one"</span>
                    + <span class="hljs-string">" at a time."</span>);
        } <span class="hljs-keyword">else</span> {
            mHavePendingVsync = <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-comment">// ä¿å­˜ Vsync ä¿¡æ¯</span>
        mTimestampNanos = timestampNanos;
        mFrame = frame;
        
        <span class="hljs-comment">// å…³é”®ï¼šå°†å¤„ç†å·¥ä½œ post åˆ°ä¸»çº¿ç¨‹çš„ MessageQueue</span>
        <span class="hljs-comment">// æ³¨æ„è¿™é‡Œä½¿ç”¨äº† timestampNanos ä½œä¸ºæ‰§è¡Œæ—¶é—´</span>
        <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Message.obtain(mHandler, <span class="hljs-built_in">this</span>);
        msg.setAsynchronous(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å¼‚æ­¥æ¶ˆæ¯ï¼Œæœ‰æ›´é«˜ä¼˜å…ˆçº§</span>
        mHandler.sendMessageAtTime(msg, timestampNanos / TimeUtils.NANOS_PER_MS);
    }
    
    <span class="hljs-comment">// Runnable æ¥å£çš„å®ç°ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        mHavePendingVsync = <span class="hljs-literal">false</span>;
        <span class="hljs-comment">// å¼€å§‹å¤„ç†ä¸€å¸§çš„å·¥ä½œ</span>
        doFrame(mTimestampNanos, mFrame);
    }
}

<span class="hljs-comment">// Choreographer å¤„ç†ä¸€å¸§çš„æ ¸å¿ƒé€»è¾‘ï¼ˆç®€åŒ–æ‘˜å½•ï¼Œè¯¦è§ AOSP æºç ï¼‰</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">doFrame</span><span class="hljs-params">(<span class="hljs-type">long</span> frameTimeNanos, <span class="hljs-type">int</span> frame)</span> {
    <span class="hljs-comment">// â€¦ çœç•¥å‰ç½®æ£€æŸ¥ä¸æ—¶é—´æ ¡æ­£ â€¦</span>
    <span class="hljs-comment">// æŒ‰é¡ºåºæ‰§è¡Œäº”ç±»å›è°ƒ</span>
    doCallbacks(Choreographer.CALLBACK_INPUT, frameTimeNanos);
    doCallbacks(Choreographer.CALLBACK_ANIMATION, frameTimeNanos);
    doCallbacks(Choreographer.CALLBACK_INSETS_ANIMATION, frameTimeNanos);
    doCallbacks(Choreographer.CALLBACK_TRAVERSAL, frameTimeNanos);
    doCallbacks(Choreographer.CALLBACK_COMMIT, frameTimeNanos);
}
</code></pre>
<h4 data-id="heading-18">å…³é”®æ—¶åºç‚¹åˆ†æ</h4>
<p>é€šè¿‡ä¸Šè¿°ä»£ç æµç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®Œæ•´çš„æ—¶åºé“¾è·¯ï¼š</p>
<ol start="0">
<li><strong>HWC äº§ç”Ÿç¡¬ä»¶ä¸­æ–­</strong> â†’ <code>VsyncController::onVsync()</code></li>
<li><strong>VsyncController å¤„ç†</strong> â†’ <code>VsyncDispatch::schedule()</code></li>
<li><strong>VsyncDispatch åˆ†å‘</strong> â†’ <code>EventThread::onVSyncEvent()</code></li>
<li><strong>EventThread é€šçŸ¥</strong> â†’ <code>NativeDisplayEventReceiver::onVsync()</code></li>
<li><strong>Native ä¼ é€’åˆ° Java</strong> â†’ <code>FrameDisplayEventReceiver::onVsync()</code></li>
<li><strong>ä¸»çº¿ç¨‹å¤„ç†</strong> â†’ <code>Choreographer::doFrame()</code></li>
</ol>
<p>å„ç¯èŠ‚çš„èŒè´£å’Œä¼˜åŒ–ç‚¹ä¸åŒï¼Œç†è§£å®Œæ•´æµç¨‹æœ‰åŠ©äºåœ¨ Perfetto ä¸­åˆ†æ Vsync ç›¸å…³æ€§èƒ½é—®é¢˜ã€‚</p>
<h4 data-id="heading-19">FrameTimeline</h4>
<p>App å’Œ SurfaceFlinger éƒ½æœ‰ FrameTimeline</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d11a83c5d341498f8101c844707ad6a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=ToH4W6%2F44UKOflsK2nr7CRmfyak%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>è½¨é“</strong>ï¼š<code>Expected Timeline</code>ã€<code>Actual Timeline</code></p>
</li>
<li>
<p><strong>PresentType/JankType</strong>ï¼š</p>
<ul>
<li>PresentType æŒ‡ç¤ºæœ¬å¸§å‘ˆç°æ–¹å¼ï¼ˆä¾‹å¦‚ On-timeã€Lateï¼‰ï¼ŒJankType æŒ‡ç¤ºå¡é¡¿ç±»å‹æ¥æº</li>
<li>å¸¸è§ JankTypeï¼š<code>AppDeadlineMissed</code>ã€<code>BufferStuffing</code>ã€<code>SfCpuDeadlineMissed</code>ã€<code>SfGpuDeadlineMissed</code> ç­‰</li>
</ul>
</li>
<li>
<p><strong>æ“ä½œæ­¥éª¤ï¼ˆPerfetto UIï¼‰</strong> ï¼š</p>
<ol start="0">
<li>åœ¨åº”ç”¨è¿›ç¨‹é€‰æ‹©ç›®æ ‡ <code>Surface/Layer</code> æˆ–ä½¿ç”¨ FrameToken è¿‡æ»¤</li>
<li>å¯¹é½ Expected ä¸ Actualï¼ŒæŸ¥çœ‹åç§»ä¸é¢œè‰²ç¼–ç </li>
<li>å‘ä¸Šé’»å–ï¼š<code>Choreographer#doFrame</code>ã€<code>RenderThread</code>ã€<code>queueBuffer</code>ã€<code>acquire/present_fence</code></li>
</ol>
</li>
<li>
<p><strong>è¯¯åˆ¤è§„é¿</strong>ï¼š</p>
<ul>
<li>ä»…å‡­ <code>doFrame</code> æ—¶é•¿åˆ¤æ–­æ‰å¸§ä¸å¯é ï¼›ä»¥ FrameTimeline çš„ PresentType/JankType ä¸ºå‡†</li>
<li>å¤šç¼“å†²å¯èƒ½æ©ç›–å•å¸§è¶…æ—¶ï¼Œéœ€è¦çœ‹è¿ç»­å¸§ä¸ Buffer å¯ç”¨æ€§</li>
</ul>
</li>
</ul>
<h4 data-id="heading-20">åˆ·æ–°ç‡/æ˜¾ç¤ºæ¨¡å¼/VRR å¯¹ Vsync ä¸ Offset/é¢„æµ‹çš„å½±å“</h4>
<ul>
<li>
<p><strong>æ¨¡å¼åˆ‡æ¢</strong>ï¼šåˆ·æ–°ç‡å˜æ›´ä¼šé‡æ–°é…ç½® <code>VsyncConfiguration</code>ï¼Œå½±å“ app/sf Offset ä¸é¢„æµ‹æ¨¡å‹ï¼›</p>
<ul>
<li>Perfettoï¼šæŸ¥ <code>display mode change</code> äº‹ä»¶ä¸éšåçš„ <code>vsync</code> é—´éš”å˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>VRRï¼ˆå¯å˜åˆ·æ–°ç‡ï¼‰</strong> ï¼šç›®æ ‡å‘¨æœŸä¸æ’å®šï¼Œè½¯ä»¶é¢„æµ‹æ›´ä¾èµ– present_fence åé¦ˆæ ¡å‡†ï¼›</p>
<ul>
<li>Perfettoï¼šè§‚å¯Ÿ <code>vsync</code> é—´éš”åˆ†å¸ƒä¸ <code>present_fence</code> åå·®</li>
</ul>
</li>
<li>
<p><strong>å¤šæ˜¾ç¤º/å¤–æ¥æ˜¾ç¤º</strong>ï¼šä¸åŒ <code>physicalDisplayId</code> çš„ vsync æºç‹¬ç«‹ï¼Œæ³¨æ„ app/sf/appSf çš„é€‰æ‹©ä¸å¯¹é½ï¼›</p>
<ul>
<li>Perfettoï¼šæŒ‰æ˜¾ç¤º ID è¿‡æ»¤ç›¸å…³ Counter/Slice</li>
</ul>
</li>
</ul>
<h4 data-id="heading-21">Perfetto å®æˆ˜ Checklistï¼ˆå»ºè®®æŒ‰åºæŸ¥çœ‹ï¼‰</h4>
<ol start="0">
<li>
<p><strong>Vsync ä¿¡å·ä¸å‘¨æœŸ</strong></p>
<ul>
<li><code>vsync-app / vsync-sf / vsync-appSf</code> é—´éš”æ˜¯å¦ç¨³å®šï¼ˆ60/90/120Hz å¯¹åº”å‘¨æœŸï¼‰</li>
<li>æ˜¯å¦å­˜åœ¨å¼‚å¸¸å¯†é›†/ç¨€ç–çš„ Vsyncï¼ˆé¢„æµ‹æŠ–åŠ¨ï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cbc4f81abe04a97adfb08ad10d62196~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=XaLYrFBTK1JfwiffFhEOy9sW9xA%3D" alt="image.png" loading="lazy"/></li>
</ul>
</li>
<li>
<p><strong>Vsync ç›¸ä½å·®é…ç½®</strong></p>
<ul>
<li><code>VsyncWorkDuration</code> æ˜¯å¦ç¬¦åˆæœºå‹é¢„æœŸçš„ app/sf Offset</li>
<li>app ä¸ sf çš„å…ˆåæ˜¯å¦åŒ¹é…â€œå…ˆç»˜åˆ¶ååˆæˆâ€çš„ç­–ç•¥ !
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a94a17f3e6bf449fa3b84ef15899e739~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=jWjCgi4KC1DGWwnz%2BASUNae6zi4%3D" alt="image.png" loading="lazy"/></li>
</ul>
</li>
<li>
<p><strong>FrameTimeline åˆ¤è¯»</strong></p>
<ul>
<li>å…ˆçœ‹ <code>PresentType</code>ï¼Œå†çœ‹ <code>JankType</code>ï¼›ç¡®è®¤æ˜¯ app è¿˜æ˜¯ SF/GPU ä¾§é—®é¢˜</li>
<li>é€‰æ‹©ç›®æ ‡ Surface/FrameToken å®šä½å…·ä½“å¸§ !
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6bb7340fe3e4548b1912b7ba68e1110~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=hKC%2FoDX9qE0mdaVAzT%2FqaZm8Jmc%3D" alt="image.png" loading="lazy"/></li>
</ul>
</li>
<li>
<p><strong>åº”ç”¨ä¸»çº¿ç¨‹ä¸æ¸²æŸ“çº¿ç¨‹</strong></p>
<ul>
<li><code>Choreographer#doFrame</code> å„é˜¶æ®µè€—æ—¶ï¼ˆInput/Animation/Traversalï¼‰</li>
<li><code>RenderThread</code> çš„ <code>syncAndDrawFrame/DrawFrame</code> è€—æ—¶æ˜¯å¦å¼‚å¸¸
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2076221a7ae448e48bff2d4042ffee6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=Cvd%2F5%2BFETojLwJYCtKi2cQJqOgE%3D" alt="image.png" loading="lazy"/></li>
</ul>
</li>
<li>
<p><strong>BufferQueue ä¸ Fence</strong></p>
<ul>
<li>ç”Ÿäº§è€…ï¼šRenderThread queueBuffer ä¹‹åï¼Œè¿™ä¸ª Buffer å°±è¢«æ ‡è®°å¯ä»¥è¢«æ¶ˆè´¹äº†ï¼Œåœ¨ç»è¿‡ä¸€æ¬¡ Transaction ä¹‹åå°±å¯ä»¥è¢« sf æ¶ˆè´¹ã€‚åˆšåˆš queueBuffer ä¹‹å Buffer è¿˜éœ€è¦è®© GPU å®é™…è¿›è¡Œæ¸²æŸ“ï¼Œè¿™é‡Œæ˜¯ç”¨çš„ Fence æ¥è¿½è¸ª GPU çš„æ‰§è¡Œè€—æ—¶ã€‚SF ä¹Ÿéœ€è¦çœ‹è¿™ä¸ª Fence æ¥å†³å®šè¿™ä¸ª Buffer æ˜¯ä¸æ˜¯ Ready ï¼ˆæ–°ç‰ˆæœ¬ SF æœ‰ä¸ªå±æ€§å€¼é…ç½®ï¼Œä¹Ÿå¯ä»¥ä¸ç­‰è¿™ä¸ª Fenceï¼Œç­‰åé¢å®é™…è¦åˆæˆçš„æ—¶å€™æ‰å»çœ‹ï¼‰ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b18cd54c2a34a31bfc60799100647a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=0tpSEDVGxg0VgR2av1noao8mDmQ%3D" alt="image.png" loading="lazy"/></li>
<li>æ¶ˆè´¹è€… SF ä¸ BufferTXï¼šSF ä½œä¸º Buffer çš„æ¶ˆè´¹è€…ï¼Œä¼šåœ¨ vsync åˆ°æ¥çš„æ—¶å€™æ˜¯ä¼šå–ä¸€ä¸ª Buffer è¿›è¡Œåˆæˆçš„ï¼Œè¿™é‡Œ App çš„ Buffer æ˜¯ä»¥ BufferTX-xxxx çš„åå­—å­˜åœ¨çš„ï¼Œä¸‹å›¾å¯ä»¥çœ‹åˆ°æ¯æ¬¡ SF å–èµ°ä¸€ä¸ª Bufferï¼ŒBufferTX ä¸ªæ•°å°±ä¼šå‡1ï¼Œè¿™å°±æ˜¯æ­£å¸¸çš„ã€‚å¦‚æœ BufferTX ä¸º 0ï¼Œè¯´æ˜ App æ²¡æœ‰åŠæ—¶é€ Buffer ä¸Šæ¥ï¼ŒSF ä¹Ÿå°±åœæ­¢åˆæˆäº†ï¼Œè¿™å°±ä¼šå‡ºç°å¡é¡¿ ï¼ˆå½“ç„¶å¦‚æœåŒæ—¶æœ‰å¤šä¸ªå‡ºå›¾æºï¼ŒSF ä¼šå–å…¶ä»–çš„ Bufferï¼Œä½†æ˜¯å¯¹äº App æ¥è¯´ä¾ç„¶æ˜¯å¡é¡¿çš„ï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2940110766c4ce19000d7619987f38b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=8J9PbfOhiF1Y6Ox4u1%2Bp1IW6rLg%3D" alt="image.png" loading="lazy"/></li>
</ul>
</li>
<li>
<p><strong>åˆæˆç­–ç•¥ä¸æ˜¾ç¤º</strong></p>
<ul>
<li>SF æ˜¯å¦é¢‘ç¹èµ° ClientCompositionï¼›HWC validate/present æ˜¯å¦å¼‚å¸¸</li>
<li>å¤šæ˜¾ç¤º/æ¨¡å¼åˆ‡æ¢/VRR æ—¶æ˜¯å¦ä¼´éšæ˜æ˜¾é¢„æµ‹åå·®
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6adcb6e59414dbcab90c561bad48072~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=w8X5YdpFp17PkmpZWVwV9tTRzKA%3D" alt="image.png" loading="lazy"/></li>
</ul>
</li>
<li>
<p><strong>èµ„æºä¸å…¶ä»–å¹²æ‰°</strong></p>
<ul>
<li>CPU ç«äº‰ï¼ˆå¤§æ ¸å ç”¨ï¼‰ã€GPU å¿™ã€IO/å†…å­˜æŠ–åŠ¨ï¼ˆGC/compactionï¼‰</li>
<li>å…¶ä»–å‰å°åº”ç”¨/ç³»ç»ŸæœåŠ¡æ˜¯å¦å ç”¨å…³é”®èµ„æº
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59e8ffe5e73248bf96c81bea90153dbe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JhY2tlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763904632&amp;x-signature=iFvbVV%2BzOUcj7rNnY7tzDPiSlRE%3D" alt="image.png" loading="lazy"/>
<a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-refs" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></li>
</ul>
</li>
</ol>
<h3 data-id="heading-22">å‚è€ƒæ–‡æ¡£</h3>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.android.com%2Fdocs%2Fcore%2Fgraphics" target="_blank" title="https://source.android.com/docs/core/graphics" ref="nofollow noopener noreferrer">Android Graphics Architecture</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.android.com%2Fdocs%2Fcore%2Fgraphics%2Fimplement-vsync" target="_blank" title="https://source.android.com/docs/core/graphics/implement-vsync" ref="nofollow noopener noreferrer">VSYNC Implementation Guide</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.android.com%2Fdocs%2Fcore%2Fgraphics%2Fframe-pacing" target="_blank" title="https://source.android.com/docs/core/graphics/frame-pacing" ref="nofollow noopener noreferrer">Frame Pacing</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2F" target="_blank" title="https://perfetto.dev/docs/" ref="nofollow noopener noreferrer">Perfetto Documentation</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F03%2F26%2FAndroid-Perfetto-05-Chorergrapher%2F" target="_blank" title="https://www.androidperformance.com/2025/03/26/Android-Perfetto-05-Chorergrapher/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 5ï¼šAndroid App åŸºäº Choreographer çš„æ¸²æŸ“æµç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2025%2F04%2F26%2FAndroid-Perfetto-06-Why-120Hz%2F" target="_blank" title="https://www.androidperformance.com/2025/04/26/Android-Perfetto-06-Why-120Hz/" ref="nofollow noopener noreferrer">Android Perfetto ç³»åˆ— 6ï¼šä¸ºä»€ä¹ˆæ˜¯ 120Hzï¼Ÿé«˜åˆ·æ–°ç‡çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F1905184" target="_blank" title="https://cloud.tencent.com/developer/article/1905184" ref="nofollow noopener noreferrer">Vsync offset ç›¸å…³æŠ€æœ¯åˆ†æ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Flearnframework%2Farticle%2Fdetails%2F133964332" target="_blank" title="https://blog.csdn.net/learnframework/article/details/133964332" ref="nofollow noopener noreferrer">Android 13/14é«˜ç‰ˆæœ¬SurfaceFlingerå‡ºç°VSYNC-app/VSYNC-appSf/VSYNC-sfå‰–æ</a></li>
</ol>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a id="user-content-about" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-23">å…³äºæˆ‘ &amp;&amp; åšå®¢</h2>
<p>ä¸‹é¢æ˜¯ä¸ªäººçš„ä»‹ç»å’Œç›¸å…³çš„é“¾æ¥ï¼ŒæœŸæœ›ä¸åŒè¡Œçš„å„ä½å¤šå¤šäº¤æµï¼Œä¸‰äººè¡Œï¼Œåˆ™å¿…æœ‰æˆ‘å¸ˆ!</p>
<ol start="0">
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2Fabout%2F" target="_blank" title="https://www.androidperformance.com/about/" ref="nofollow noopener noreferrer">åšä¸»ä¸ªäººä»‹ç»</a> ï¼šé‡Œé¢æœ‰ä¸ªäººçš„å¾®ä¿¡å’Œå¾®ä¿¡ç¾¤é“¾æ¥ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2019%2F12%2F01%2FBlogMap%2F" target="_blank" title="https://www.androidperformance.com/2019/12/01/BlogMap/" ref="nofollow noopener noreferrer">æœ¬åšå®¢å†…å®¹å¯¼èˆª</a> ï¼šä¸ªäººåšå®¢å†…å®¹çš„ä¸€ä¸ªå¯¼èˆªã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fandroidperformance.com%2F2018%2F05%2F07%2FAndroid-performance-optimization-skills-and-tools%2F" target="_blank" title="https://androidperformance.com/2018/05/07/Android-performance-optimization-skills-and-tools/" ref="nofollow noopener noreferrer">ä¸ªäººæ•´ç†å’Œæœé›†çš„ä¼˜ç§€åšå®¢æ–‡ç«  - Android æ€§èƒ½ä¼˜åŒ–å¿…çŸ¥å¿…ä¼š</a> ï¼šæ¬¢è¿å¤§å®¶è‡ªèå’Œæ¨è ï¼ˆå¾®ä¿¡ç§èŠå³å¯ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidperformance.com%2F2023%2F12%2F30%2Fthe-performance%2F" target="_blank" title="https://www.androidperformance.com/2023/12/30/the-performance/" ref="nofollow noopener noreferrer">Androidæ€§èƒ½ä¼˜åŒ–çŸ¥è¯†æ˜Ÿçƒ</a> ï¼š æ¬¢è¿åŠ å…¥ï¼Œå¤šè°¢æ”¯æŒï½</li>
</ol>
<blockquote>
<p><strong>ä¸€ä¸ªäººå¯ä»¥èµ°çš„æ›´å¿« , ä¸€ç¾¤äººå¯ä»¥èµ°çš„æ›´è¿œ</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å®æ—¶æ¨é€ & WebSocket é¢è¯•é¢˜ï¼ˆ2026ç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7572539461478907947</link>    <guid>https://juejin.cn/post/7572539461478907947</guid>    <pubDate>2025-11-16T13:55:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572539461478907947" data-draft-id="7572525491539329066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å®æ—¶æ¨é€ &amp; WebSocket é¢è¯•é¢˜ï¼ˆ2026ç‰ˆï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,HTTP"/> <meta itemprop="datePublished" content="2025-11-16T13:55:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HiStewie"/> <meta itemprop="url" content="https://juejin.cn/user/1591748568038823"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å®æ—¶æ¨é€ &amp; WebSocket é¢è¯•é¢˜ï¼ˆ2026ç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748568038823/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HiStewie
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:55:05.000Z" title="Sun Nov 16 2025 13:55:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">ä¸€ã€å†å²èƒŒæ™¯ + æ—¶é—´è½´</h2>
<p>ç½‘é¡µä¸€æ—¦éœ€è¦ <strong>â€œå®æ—¶â€</strong> ï¼Œéº»çƒ¦å°±å¼€å§‹äº†ï¼šæ•°æ®åœ¨ä¸æ–­å˜åŒ–ï¼Œç”¨æˆ·å´åªèƒ½ç­‰ä¸‹ä¸€æ¬¡åˆ·æ–°ï¼›</p>
<ul>
<li>åˆ·æ–°è§£å†³ä¸äº†çš„å»¶è¿Ÿï¼Œç”¨çŸ­è½®è¯¢å‡‘æ•°ï¼Œåˆè¢«æ— æ•°ç©ºè¯·æ±‚åå™¬ï¼›</li>
<li>å†åŠ é•¿è½®è¯¢ï¼Œè¯•å›¾æŠŠâ€œæœ‰äº†æ–°æ•°æ®å†è¯´â€å˜æˆä¸€ç§ä¼ªæ¨é€ï¼Œå´ä»å›°åœ¨è¯·æ±‚â€”å“åº”çš„ç¬¼å­é‡Œã€‚</li>
<li>å¼€å‘è€…äºæ˜¯ç»§ç»­å‰æ¢ï¼šè®©è¿æ¥ä¸å†é¢‘ç¹é‡å»ºï¼Œå°è¯•åˆ†å—ç›´è¾“ï¼ŒæŠŠäº‹ä»¶åƒæ°´ä¸€æ ·æŒç»­é€è¾¾ï¼Œäºæ˜¯æœ‰äº†æ›´é¡ºæ»‘çš„ Streaming ä¸æ ‡å‡†åŒ–çš„ SSEã€‚</li>
</ul>
<p>ç›´åˆ°æŸä¸€åˆ»ï¼Œæˆ‘ä»¬ä¸å†æ»¡è¶³äºâ€œæ›´èªæ˜çš„å•å‘â€ï¼Œè€Œæ˜¯è¿ˆå‘çœŸæ­£çš„â€œåŒæ—¶è¯´è¯ä¸å€¾å¬â€â€”â€”WebSocket æŠŠé€šä¿¡ä»ä¸€æ¬¡æ¬¡è¯·æ±‚ï¼Œå˜æˆä¸€æ¡æŒä¹…è€Œé€šé€çš„é€šé“ã€‚æ­¤åï¼Œ</p>
<ul>
<li>HTTP/2ã€HTTP/3 ä¸ QUIC åˆåœ¨åº•å±‚ä¸ºæ•ˆç‡å’Œæ—¶å»¶å¼€äº†ç»¿ç¯ï¼Œç”šè‡³æä¾›äº†å¯é€‰å¯é ä¸æ— åºä¼ è¾“çš„æ›´å¤šå¯èƒ½ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ²¿ç€è¿™æ¡ä¸»çº¿ï¼Œå±‚å±‚å±•å¼€ï¼šå®ƒä»¬å„è‡ªè§£å†³äº†ä»€ä¹ˆã€åœ¨å“ªäº›åœºæ™¯æœ€åˆæ‹ã€åˆå¦‚ä½•åœ¨ä½ çš„ç³»ç»Ÿé‡Œå½¢æˆæ¸…æ™°çš„é€‰å‹è¾¹ç•Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8085af3caddd431a98f2e1f6676fe5da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906105&amp;x-signature=ojWmhS9CRiHUJ1JA%2Bay2PASTJUU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-1">01ï½œä»æ•´é¡µåˆ·æ–°å‡ºå‘ï¼šå‡å°‘æµªè´¹çš„ä¸€æ¡é“¾è·¯</h3>
<p>è¿™ä¸€å—æ˜¯ä¸ºäº†è§£å†³â€œæ•´é¡µåˆ·æ–°å¯¼è‡´çš„é«˜å»¶è¿Ÿä¸å¸¦å®½æµªè´¹â€ï¼Œé€çº§ç»†åŒ–ä¸ä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-2">a. æ—©æœŸç½‘é¡µï¼šæ•´é¡µåˆ·æ–°</h4>
<ul>
<li>èƒŒæ™¯ä¸é—®é¢˜ï¼šæ¯æ¬¡æ›´æ–°éƒ½æ•´é¡µè¯·æ±‚ï¼Œä½“éªŒå‰²è£‚ã€å¸¦å®½æµªè´¹ã€å»¶è¿Ÿé«˜ã€‚</li>
<li>ç›´æ¥å½±å“ï¼šä¿ƒä½¿å‰ç«¯ä¸æœåŠ¡ç«¯æ€è€ƒâ€œåªå–å˜åŒ–â€ã€‚</li>
</ul>
<h4 data-id="heading-3">b. çŸ­è½®è¯¢ï¼ˆShort Pollingï¼‰ä¸ºè§£å†³æ•´é¡µåˆ·æ–°çš„ä½æ•ˆ</h4>
<ul>
<li>è§£å†³ï¼šæ”¹ä¸ºâ€œéš”ä¸€æ®µæ—¶é—´æ‹‰ä¸€æ¬¡â€ï¼Œæ˜¾è‘—å‡å°‘æ•´é¡µé‡è½½å¸¦æ¥çš„æµªè´¹ã€‚</li>
<li>å±€é™ï¼šé«˜é¢‘è¯·æ±‚å¸¦æ¥å¤§é‡ç©ºå“åº”ä¸æœåŠ¡å™¨å¼€é”€ã€‚</li>
<li>æ‰¿æ¥æ”¹è¿›ï¼šä¸ºå‡å°‘ç©ºè½¬ï¼Œæ¼”è¿›åˆ°é•¿è½®è¯¢ï¼›åŒæ—¶å‚¬ç”Ÿæ›´æµå¼çš„æ€è·¯ï¼ˆStreaming/SSEï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-4">c. é•¿è½®è¯¢ï¼ˆComet/æŒ‚èµ·è¯·æ±‚ï¼‰ä¸ºå‡å°‘çŸ­è½®è¯¢çš„ç©ºè½¬</h4>
<ul>
<li>
<p>è§£å†³ï¼šè¯·æ±‚æŒ‚èµ·ï¼ŒæœåŠ¡å™¨æœ‰æ–°æ•°æ®æ‰è¿”å›ï¼Œæ¥è¿‘â€œä¼ªæ¨é€â€ï¼Œæ˜¾è‘—é™ä½ç©ºè½¬ã€‚</p>
</li>
<li>
<p>å±€é™ï¼šæœ¬è´¨ä»æ˜¯è¯·æ±‚-å“åº”ï¼›è¿æ¥é¢‘ç¹é‡å»ºï¼›éš¾åšçœŸæ­£åŒå‘ã€‚</p>
</li>
<li>
<p>æ‰¿æ¥æ”¹è¿›ï¼š</p>
<ul>
<li>å•å‘æ¨é€æ›´ç¨³ï¼šSSE æ ‡å‡†åŒ–å•å‘äº‹ä»¶æµã€‚</li>
<li>è‹¥è¦çœŸåŒå‘ä¸äºŒè¿›åˆ¶ï¼šäº¤ç»™ WebSocketï¼ˆè§ç‹¬ç«‹å—ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-5">d. HTTP Streamingï¼ˆåˆ†å—ä¼ è¾“/æŒç»­è¾“å‡ºï¼‰ä¸ºè¿›ä¸€æ­¥é™ä½é‡è¿ä¸å»¶è¿Ÿ</h4>
<ul>
<li>è§£å†³ï¼šä¿æŒè¿æ¥ï¼Œåˆ†å—æŒç»­è¾“å‡ºï¼Œé€‚åˆè¿ç»­æ–‡æœ¬/äº‹ä»¶æµï¼Œé‡è¿æ›´å°‘ã€å»¶è¿Ÿæ›´ä½ã€‚</li>
<li>å±€é™ï¼šå¤šä¸ºå•å‘ï¼Œå—ä»£ç†/ä¸­é—´ä»¶å½±å“ï¼Œå…¼å®¹æ€§ä¸ä¸€ã€‚</li>
<li>æ‰¿æ¥æ”¹è¿›ï¼šå•å‘äº‹ä»¶ç”± SSE æ ‡å‡†åŒ–ï¼›åŒå‘åœºæ™¯ä»éœ€ WebSocketã€‚</li>
</ul>
<h4 data-id="heading-6">e. SSEï¼ˆServer-Sent Eventsï¼‰å•å‘æ¨é€çš„æ ‡å‡†åŒ–ç»ˆç‚¹</h4>
<ul>
<li>è§£å†³ï¼šä»¥æ ‡å‡†äº‹ä»¶æµè¯­ä¹‰æä¾›å•å‘æ¨é€ï¼Œæµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼Œèµ„æºå ç”¨ä½ã€‚</li>
<li>é€‚é…èŒƒå›´ï¼šé€šçŸ¥ã€è¿›åº¦ã€æ—¥å¿—/ç›‘æ§ç­‰æ–‡æœ¬æˆ–äº‹ä»¶æµã€‚</li>
<li>ä½ç½®å…³ç³»ï¼šåœ¨â€œåªéœ€å•å‘æ¨é€â€çš„åœºæ™¯ä¸­ï¼ŒSSE æ˜¯è¿™ä¸€é“¾æ¡çš„ç¨³å®šè½ç‚¹ï¼Œè€Œéè¿‡æ¸¡æŠ€æœ¯ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">02ï½œèŒƒå¼è·ƒè¿ï¼šWebSocketï¼ˆç‹¬ç«‹å¤§å—ï¼‰</h3>
<p>è¿™ä¸æ˜¯å‰é¢é“¾æ¡çš„â€œåˆä¸€æ”¹è‰¯â€ï¼Œè€Œæ˜¯ä»è¯·æ±‚-å“åº”è½¬å‘å…¨åŒå·¥æŒä¹…è¿æ¥çš„èŒƒå¼å˜åŒ–ã€‚</p>
<h4 data-id="heading-8">WebSocketï¼ˆå…¨åŒå·¥ã€æŒä¹…ã€ä½å¼€é”€ï¼‰</h4>
<ul>
<li>
<p>è§£å†³ï¼šçœŸæ­£çš„åŒå‘å®æ—¶é€šä¿¡ï¼Œé™ä½æ¡æ‰‹ä¸å¤´éƒ¨å¼€é”€ï¼Œæ”¯æŒæ–‡æœ¬ä¸äºŒè¿›åˆ¶ï¼Œç«¯åˆ°ç«¯å»¶è¿Ÿä½ã€‚</p>
</li>
<li>
<p>å…¸å‹åœºæ™¯ï¼šèŠå¤©ã€ååŒç¼–è¾‘ã€åœ¨çº¿æ¸¸æˆã€è¡Œæƒ…æ¨é€ã€IoTã€‚</p>
</li>
<li>
<p>ä¸ä¸Šä¸€é“¾æ¡çš„å…³ç³»ï¼š</p>
<ul>
<li>åœ¨â€œéœ€è¦åŒå‘å®æ—¶â€çš„ä¸»æˆ˜åœºï¼Œå®è´¨ä¸Šå–ä»£äº†çŸ­è½®è¯¢/é•¿è½®è¯¢ç­‰è¿‡æ¸¡æ–¹æ¡ˆã€‚</li>
<li>ä¸ SSE å¹¶å­˜ï¼šè‹¥åªæœ‰å•å‘é€šçŸ¥/äº‹ä»¶æµï¼ŒSSE æ›´ç®€å•æ›´çœèµ„æºï¼›è‹¥éœ€è¦åŒå‘æˆ–äºŒè¿›åˆ¶ï¼ŒWebSocket æ›´åˆé€‚ã€‚</li>
</ul>
</li>
</ul>

<ul>
<li>è¿ç»´å…³æ³¨ï¼šè¿æ¥çŠ¶æ€ç®¡ç†ã€å®¹é‡ä¸åå‹ã€ä¼ä¸šä»£ç†/è´Ÿè½½å‡è¡¡å…¼å®¹ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">03ï½œåº•åº§å‡çº§ä¸æ–°é€‰é¡¹ï¼šHTTP/2Â·HTTP/3Â·QUIC å®¶æ—</h3>
<p>è¿™éƒ¨åˆ†ä¸æ˜¯æ›¿ä»£å‰ä¸¤å—ï¼Œè€Œæ˜¯æä¾›æ›´é«˜æ•ˆçš„æ‰¿è½½ä¸æ›´çµæ´»çš„ä¼ è¾“è¯­ä¹‰ã€‚</p>
<h4 data-id="heading-10">WS over H2/H3</h4>
<ul>
<li>ä»·å€¼ï¼šä¸åŒåŸŸè¯·æ±‚å¤ç”¨è¿æ¥ã€æ›´å¥½ç©¿é€ä¸æ•ˆç‡ã€æ›´ä½æ¡æ‰‹æˆæœ¬ã€‚</li>
<li>ä½œç”¨ï¼šè®© WebSocket çš„éƒ¨ç½²ä¸ç½‘ç»œæ•ˆç‡æ›´ä¼˜ã€‚</li>
</ul>
<h4 data-id="heading-11">WebTransportï¼ˆåŸºäº QUICï¼‰</h4>
<ul>
<li>ä»·å€¼ï¼šå¯é€‰å¯é ä¸æœ‰åº/æ— åºã€æ›´ä½å»¶è¿Ÿï¼Œé€‚åˆå®æ—¶åª’ä½“ã€æ¸¸æˆã€å®šåˆ¶åè®®ã€‚</li>
<li>å…³ç³»ï¼šä¸æ˜¯å–ä»£ WebSocket/SSE çš„é€šåƒæ–¹æ¡ˆï¼Œè€Œæ˜¯å½“ä½ éœ€è¦â€œæ›´ç»†ç²’åº¦çš„å¯é æ€§ä¸é¡ºåºæ§åˆ¶â€æ—¶çš„æ–°å·¥å…·ã€‚</li>
</ul>
<h2 data-id="heading-12">äºŒã€é€ŸæŸ¥è¡¨</h2>
<p>å®æ—¶æ¨é€çš„ç›®æ ‡æ˜¯â€œä½å»¶è¿Ÿã€åŒå‘æˆ–å•å‘åœ°æŠŠæ•°æ®ä»æœåŠ¡ç«¯é€åˆ°å®¢æˆ·ç«¯â€ã€‚ä¸»æµæŠ€æœ¯é€‰å‹åŒ…æ‹¬ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8209e461669243e489bc9efcbc7d59c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906105&amp;x-signature=EJm0E3wJEZu69PYQqtHZs1JWsJU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-13">ä¸‰ã€WebSocket æ ¸å¿ƒå®šä¹‰ï¼ˆé‡è¦ï¼‰</h2>
<p>WebSocket æ˜¯ HTML5 æ¨å‡ºçš„ä¸€ç§<strong>å…¨åŒå·¥(Full-Duplex)ã€æŒä¹…åŒ–(Persistent)çš„ç½‘ç»œé€šä¿¡åè®®</strong>ï¼Œ åŸºäºTCPåè®®æ„å»ºï¼Œå…è®¸å®¢æˆ·ç«¯(æµè§ˆå™¨)ä¸æœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€æ¡é•¿æœŸç¨³å®šçš„è¿æ¥é€šé“ï¼Œå®ç°ã€ŒæœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ã€å’Œã€Œå®¢æˆ·ç«¯å®æ—¶å‘æœåŠ¡å™¨å‘é€æ•°æ®ã€çš„åŒå‘é€šä¿¡ï¼Œæ— éœ€é¢‘ç¹å»ºç«‹/æ–­å¼€è¿æ¥ã€‚</p>
<p>å…¶æ ¸å¿ƒç‰¹ç‚¹å¯æ¦‚æ‹¬ä¸ºï¼š</p>
<ul>
<li><strong>å…¨åŒå·¥</strong>ï¼šé€šä¿¡åŒæ–¹å¯åŒæ—¶å‘é€/æ¥æ”¶æ•°æ®(åŒºåˆ«äºHTTPçš„ã€Œè¯·æ±‚-å“åº”ã€å•å‘é€šä¿¡)ï¼›</li>
<li><strong>æŒä¹…è¿æ¥</strong>ï¼šè¿æ¥å»ºç«‹åé•¿æœŸä¿æŒï¼Œé¿å…HTTPæ¯æ¬¡é€šä¿¡éƒ½éœ€é‡æ–°æ¡æ‰‹çš„å¼€é”€ï¼›</li>
<li><strong>è½»é‡åè®®</strong>ï¼šæ•°æ®å¸§å¤´éƒ¨ä¿¡æ¯ç®€æ´(ä»…2-14å­—èŠ‚)ï¼Œä¼ è¾“æ•ˆç‡è¿œé«˜äºHTTPï¼›</li>
<li><strong>åè®®æ ‡è¯†</strong>ï¼šå®¢æˆ·ç«¯å‘èµ·è¿æ¥æ—¶ä½¿ç”¨wsï¼š//(éåŠ å¯†)æˆ–wssï¼š//(åŠ å¯†ï¼ŒåŸºäºTLSï¼Œç±»ä¼¼HTTPS)ä½œä¸ºåè®®å‰ç¼€ã€‚</li>
</ul>
<h3 data-id="heading-14">ä»é›¶å¼€å§‹çš„å®Œæ•´æµç¨‹</h3>
<p>ä¸‹é¢æ˜¯ä¸€æ¡ä½ åœ¨å‰ç«¯çœŸå®ä¼šèµ°çš„é“¾è·¯ï¼šåˆ›å»ºè¿æ¥ â†’ HTTP æ¡æ‰‹ä¸åè®®åˆ‡æ¢ â†’ è¿›å…¥ WebSocket åŒå‘é€šä¿¡ â†’ å¯åŠ¨å¿ƒè·³æ£€æµ‹ â†’ å‘ç°å¼‚å¸¸å¹¶é‡è¿ â†’ é‡è¿æˆåŠŸåçš„è¡¥å¿ â†’ æœåŠ¡ç«¯è·¨åŸŸæ”¾è¡Œ â†’ æ­£å¸¸/å¼‚å¸¸å…³é—­ã€‚</p>
<hr/>
<h3 data-id="heading-15">1) åˆ›å»ºè¿æ¥ï¼ˆå…¥å£ï¼‰</h3>
<p>ä½ å†™ä¸‹ç¬¬ä¸€è¡Œä»£ç æ—¶ï¼Œè¦è§£å†³ä¸¤ä»¶äº‹ï¼šç”¨å¯¹åè®®å‰ç¼€ã€ç»‘å®šå¥½äº‹ä»¶ã€‚</p>
<ul>
<li>å¦‚æœç½‘é¡µæ˜¯ <code>HTTPS å¿…é¡»ç”¨ wss://</code>ï¼Œ<code>HTTP é¡µé¢ç”¨ ws://</code></li>
<li>ç«‹åˆ»ç»‘å®š <code>onopen</code>/<code>onmessage</code>/<code>onerror</code>/<code>onclose</code>ï¼Œä»¥ä¾¿åç»­é‡ç”¨ã€‚</li>
</ul>
<p>ç¤ºæ„ä»£ç ï¼ˆç²¾ç®€ï¼‰ï¼š</p>
<ul>
<li>new WebSocket(url)</li>
<li>ç»‘å®šäº‹ä»¶ï¼šinitWebSocketEvents(ws)</li>
</ul>
<hr/>
<h3 data-id="heading-16">2) HTTP æ¡æ‰‹ä¸åè®®åˆ‡æ¢ï¼ˆä»â€œè¯·æ±‚â€åˆ°â€œé•¿è¿â€ï¼‰</h3>
<p>å®¢æˆ·ç«¯(æµè§ˆå™¨) åˆ›å»º WebSocket å®ä¾‹æ—¶ï¼Œä¼šå‘èµ·ä¸€ä¸ªç‰¹æ®Šçš„ <code>HTTP - GET</code>ï¼Œæ ¸å¿ƒç›®çš„æ˜¯ ã€Œ<strong>è¯·æ±‚å°†åè®®ä»HTTPå‡çº§ä¸ºWebSocketã€</strong>ã€‚æœåŠ¡ç«¯éªŒè¯é€šè¿‡åè¿”å› <code>101</code>ï¼ŒåŒæ–¹åˆ‡æ¢åˆ° WebSocket å¸§é€šä¿¡ã€‚</p>
<p>WebSocket å¸§æ˜¯åŒå‘é€šä¿¡ä¸­çš„æœ€å°ä¼ è¾“ç»“æ„ï¼Œæºå¸¦ <strong>â€œ</strong> <code>æ•°æ®ç±»å‹</code> <strong>ã€</strong> <code>æ˜¯å¦ä¸ºæ¶ˆæ¯çš„æœ€åä¸€æ®µ</code> <strong>ã€</strong> <code>è´Ÿè½½é•¿åº¦</code> <strong>ã€</strong> <code>æ©ç /å¯†é’¥</code> <strong>ã€</strong> <code>å®é™…æ•°æ®</code> <strong>â€</strong> ã€‚æ¶ˆæ¯å¯ä»¥è¢«æ‹†æˆå¤šå¸§è¿ç»­å‘é€ï¼Œä¹Ÿå¯ä»¥ä¸€ä¸ªå¸§å°±é€å®Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17670be5af774bca949745c7a9f3124e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906105&amp;x-signature=DIHKWC8lJfegffXrHbxYWAvZcaU%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-17">å®¢æˆ·ç«¯å‘èµ·ã€Œåè®®å‡çº§è¯·æ±‚ã€(HTTP - GET è¯·æ±‚)</h4>
<p><strong>è¯·æ±‚å¤´ä¸­å…³é”®å­—æ®µ(é¢è¯•é«˜é¢‘è€ƒç‚¹)ï¼š</strong></p>
<ul>
<li><code>GET /ws-endpoint HTTP/1.1</code>ï¼šè¯·æ±‚æ–¹æ³•ä¸º <code>GET</code>ï¼Œè·¯å¾„ä¸ºæœåŠ¡å™¨çš„ WebSocket ç«¯ç‚¹(å¦‚<code>/ws</code>)ï¼›</li>
<li><code>Hostï¼šexample.com</code>ï¼šæœåŠ¡å™¨åŸŸåï¼›</li>
<li><code>Upgradeï¼šwebsocket</code>ï¼šæ ¸å¿ƒå­—æ®µï¼Œå‘ŠçŸ¥æœåŠ¡å™¨ã€Œè¦å‡çº§åè®®ä¸º WebSocketã€ï¼›</li>
<li><code>Connectionï¼šUpgrade</code>ï¼šé…åˆ Upgradeï¼Œè¡¨ç¤ºã€Œè¿™æ˜¯ä¸€ä¸ªåè®®å‡çº§è¯·æ±‚ã€ï¼›</li>
<li><code>Sec-WebSocket-Keyï¼šdGhlIHNhbXBsZSBub25jzQ==</code>ï¼šå®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²(Base64 ç¼–ç ï¼Œé•¿åº¦ 16 å­—èŠ‚)ï¼Œç”¨äºæœåŠ¡å™¨éªŒè¯(é˜²æ­¢æ¶æ„è¿æ¥)ï¼›</li>
<li><code>Sec-WebSocket-Versionï¼š13</code>ï¼šWebSocket åè®®ç‰ˆæœ¬(å½“å‰ä¸»æµä¸º 13ï¼Œéœ€æœåŠ¡å™¨æ”¯æŒ)ï¼›</li>
<li><code>Sec-WebSocket-Originï¼šhttpsï¼š//example.com</code>ï¼šå®¢æˆ·ç«¯æ‰€åœ¨åŸŸå(ç”¨äºæœåŠ¡å™¨è·¨åŸŸéªŒè¯)ã€‚</li>
</ul>
<h4 data-id="heading-18">æœåŠ¡å™¨å“åº”ã€Œåè®®å‡çº§æˆåŠŸã€(HTTP - 101çŠ¶æ€ç )</h4>
<p>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œè‹¥æ”¯æŒ WebSocket åè®®ä¸”éªŒè¯é€šè¿‡(å¦‚ Sec-WebSocket-Key éªŒè¯ã€è·¨åŸŸéªŒè¯) ï¼Œä¼šè¿”å›<code>HTTP - 101</code>(SwitchingProtocols)çŠ¶æ€ç ï¼Œè¡¨ç¤ºã€ŒåŒæ„åè®®å‡çº§ã€ã€‚</p>
<p><strong>å“åº”å¤´ä¸­å…³é”®å­—æ®µ</strong> <strong>(é¢è¯•é«˜é¢‘è€ƒç‚¹)ï¼š</strong></p>
<ul>
<li>
<p><code>HTTP/1.1 101 Switching Protocols</code>ï¼š101 çŠ¶æ€ç æ˜¯åè®®åˆ‡æ¢çš„æ ‡å¿—ï¼›</p>
</li>
<li>
<p><code>Upgradeï¼š websocket</code>ï¼šç¡®è®¤å‡çº§ä¸ºWebSocket åè®®ï¼›</p>
</li>
<li>
<p><code>Connectionï¼šUpgrade</code>ï¼šç¡®è®¤è¿æ¥ç”¨äºåè®®å‡çº§ï¼›</p>
</li>
<li>
<p><code>Sec-WebSocket-Acceptï¼šs3pPLMBiTxaQ9kYGzzhZRbK+xOo=</code>ï¼šæœåŠ¡å™¨å¯¹Sec-WebSocket-Key çš„å¤„ç†ç»“æœ(æ ¸å¿ƒéªŒè¯é€»è¾‘)ï¼š</p>
<ol>
<li>æœåŠ¡å™¨å°†å®¢æˆ·ç«¯å‘é€çš„ Sec-WebSocket-Key ä¸å›ºå®šå­—ç¬¦ä¸² <code>258EAFA5-E914-47DA-95CA-C5AB0DC85B11</code> æ‹¼æ¥ï¼›</li>
<li>å¯¹æ‹¼æ¥åçš„å­—ç¬¦ä¸²è¿›è¡Œ <code>SHA-1</code> å“ˆå¸Œè®¡ç®—ï¼›</li>
<li>å°†å“ˆå¸Œç»“æœè½¬ä¸º Base64 ç¼–ç ï¼Œå³ä¸º Sec-WebSocket-Accept çš„å€¼ï¼›</li>
<li>å®¢æˆ·ç«¯ä¼šéªŒè¯è¯¥å€¼æ˜¯å¦æ­£ç¡®ï¼Œè‹¥ä¸æ­£ç¡®åˆ™æ‹’ç»å»ºç«‹è¿æ¥(é˜²æ­¢ä¼ªé€ å“åº”)ã€‚</li>
</ol>
</li>
</ul>
<hr/>
<h3 data-id="heading-19">3) è¿›å…¥é€šä¿¡é˜¶æ®µï¼ˆåŒå‘æ•°æ® + åŸºç¡€å‘é€ï¼‰</h3>
<p>æ¡æ‰‹é€šè¿‡ï¼Œ<code>onopen</code> ä¼šè§¦å‘ã€‚æ­¤æ—¶åšä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>å‘é€åˆå§‹åŒ–æ•°æ®ï¼ˆå¦‚èº«ä»½ã€è®¢é˜…ä¸»é¢˜ï¼‰</li>
<li>å¯åŠ¨å¿ƒè·³ï¼ˆä¸‹ä¸€æ­¥ä¼šè®²ï¼‰</li>
</ul>
<p>é€šä¿¡æ³¨æ„ï¼š</p>
<ul>
<li><code>onmessage</code> æ—¢å¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯èƒ½æ˜¯äºŒè¿›åˆ¶ï¼ˆBlob/ArrayBufferï¼‰</li>
<li><code>bufferedAmount</code> å¯ç”¨æ¥åšèƒŒå‹æ§åˆ¶ï¼ˆç§¯å‹å¤ªå¤§æ—¶æš‚åœç»§ç»­ sendï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-20">4) å¯åŠ¨å¿ƒè·³ï¼ˆè®©è¿æ¥â€œæ´»ç€â€ä¸”å¯æ„ŸçŸ¥ï¼‰</h3>
<p>æŒä¹…è¿æ¥ä¼šé­é‡ Wiâ€‘Fi æŠ–åŠ¨ã€é˜²ç«å¢™æ¸…ç†ç­‰é—®é¢˜ã€‚<strong>å¿ƒè·³=å‘¨æœŸæ€§å‘ pingï¼Œè¶…æ—¶æœªæ”¶åˆ° pong å°±åˆ¤æ­»é“¾</strong>ã€‚</p>
<p>æ¨èå‚æ•°ï¼ˆå¯æŒ‰ä¸šåŠ¡è°ƒä¼˜ï¼‰ï¼š</p>
<ul>
<li><code>HEARTBEAT_INTERVAL â‰ˆ 30s</code></li>
<li><code>HEARTBEAT_TIMEOUT â‰ˆ 10s</code></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0fd9ed3720648cb9ed2cd5a4c689c2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906105&amp;x-signature=ZIMcr6AN08Rw18SUulF0l8BxMv0%3D" alt="" loading="lazy"/></p>
<p>å®æ“è¦ç‚¹ï¼š</p>
<ul>
<li>å¯åŠ¨å‰å…ˆæ¸…ç†æ—§å®šæ—¶å™¨ï¼Œé¿å…é‡å¤</li>
<li>æ”¶åˆ° pong ç«‹å³æ¸…é™¤è¶…æ—¶å®šæ—¶å™¨</li>
<li>onclose/onerror å¿…é¡»åœæ­¢å¿ƒè·³</li>
</ul>
<hr/>
<h3 data-id="heading-21">5) å¼‚å¸¸â†’é‡è¿ï¼ˆæ¢å¤è¿æ¥ä½†ä¸è¿‡è½½ï¼‰</h3>
<p>ä¸€æ—¦ <code>onerror</code>ã€<code>onclose(code â‰  1000)</code> æˆ–å¿ƒè·³åˆ¤å®šè¶…æ—¶ï¼Œè¿›å…¥é‡è¿ã€‚</p>
<p>ç›®æ ‡æ˜¯ï¼š<strong>èƒ½æ¢å¤ã€ä¸è¿‡è½½ã€å¯è¢«ç”¨æˆ·åœæ­¢ã€‚</strong></p>
<p>ç­–ç•¥ä¸‰ä»¶å¥—ï¼š</p>
<ul>
<li>æŒ‡æ•°é€€é¿ï¼š1s â†’ 2s â†’ 4s â€¦ æœ€å¤š 30s</li>
<li>æ¬¡æ•°ä¸Šé™ï¼šå¦‚ 10 æ¬¡ï¼ˆè¾¾åˆ°å³åœï¼‰</li>
<li>å¯æ§åœæ­¢ï¼šæä¾›â€œåœæ­¢é‡è¿â€æˆ–é¡µé¢å…³é—­æ—¶åœ</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa29ef3c90f94ae795499a47a02381dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906105&amp;x-signature=6xXSyktpLLND%2FdfwjLXZTTfgS4o%3D" alt="" loading="lazy"/></p>
<p>è¡¥å¿æœºåˆ¶ï¼š</p>
<ul>
<li>åœ¨æ–­å¼€å‰ç¼“å­˜â€œå¾…å‘é€â€æ•°æ®ï¼ˆä¾‹å¦‚æœªå‘å‡ºçš„èŠå¤©æ¶ˆæ¯ï¼‰</li>
<li>é‡è¿æˆåŠŸåæŒ‰åºè¡¥å‘ï¼Œç¡®ä¿ä¸šåŠ¡è¿ç»­æ€§</li>
</ul>
<hr/>
<h3 data-id="heading-22">6) æœåŠ¡å™¨æ”¾è¡Œè·¨åŸŸï¼ˆæ¡æ‰‹èƒ½å¦è¿‡å…³çš„å…³é”®ï¼‰</h3>
<p>è™½ç„¶ WebSocket åŸç”Ÿâ€œæ”¯æŒè·¨åŸŸâ€ï¼Œä½†æ¡æ‰‹æ˜¯ HTTPï¼ŒæœåŠ¡ç«¯éœ€è¦å¯¹ Sec-WebSocket-Origin åšç™½åå•æ ¡éªŒã€‚</p>
<p>å¦åˆ™ä¼š 403 æˆ–ç›´æ¥å…³é—­ã€‚</p>
<ul>
<li>
<p>Node.jsï¼ˆwsï¼‰</p>
<ul>
<li>è¯»å– <code>req.headers['sec-websocket-origin']</code></li>
<li>ä¸åœ¨ <code>allowedOrigins</code> åˆ—è¡¨ï¼šå…³é—­ <code>1008</code> â€œ<code>Cross-origin access denied</code>â€</li>
</ul>
</li>
</ul>

<ul>
<li>
<p>Spring Boot</p>
<ul>
<li><code>registry.addHandler(...).setAllowedOrigins("https://a.com", "https://b.com")</code></li>
<li>éœ€è¦æ—¶ <code>.withSockJS()</code>æä¾›é™çº§</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e39da6050414e6780b5f078f4272964~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906105&amp;x-signature=hzoLKTV3pyCXPnHeZ5UAQK2Lzn8%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-23">7) æ­£å¸¸å…³é—­ä¸èµ„æºæ¸…ç†ï¼ˆå–„å§‹å–„ç»ˆï¼‰</h3>
<ul>
<li>ç”¨æˆ·ç¦»å¼€é¡µé¢æˆ–ä¸»åŠ¨é€€å‡ºï¼šws.close(1000, 'ç”¨æˆ·ä¸»åŠ¨é€€å‡º')</li>
<li>onclose ä¸­åœæ­¢å¿ƒè·³ä¸é‡è¿ï¼Œæ¸…ç©ºå®šæ—¶å™¨ä¸é˜Ÿåˆ—ï¼Œé¿å…æ³„æ¼</li>
<li>è®°å½•å…³é—­åŸå› ç ï¼š1000 æ­£å¸¸ã€1006 å¸¸è§äºå¼‚å¸¸/å¿ƒè·³è¶…æ—¶</li>
</ul>
<h2 data-id="heading-24">å››ã€é¢è¯•é¢˜</h2>
<p>é¢è¯•å…³æ³¨ç‚¹é€šå¸¸å›´ç»•â€œ<strong>åè®®å¯¹æ¯”ã€è¿æ¥ç®¡ç†ã€æ¶ˆæ¯è¯­ä¹‰ã€å¯é æ€§ä¸æ‰©å±•æ€§ã€å®‰å…¨ä¸è¿ç»´æˆæœ¬</strong>â€ã€‚</p>
<h3 data-id="heading-25">1ã€WebSocket ä¸ SSE çš„å·®å¼‚ä¸ä½¿ç”¨åœºæ™¯ï¼ŒHTTPè½®è¯¢å‘¢ï¼Ÿ</h3>
<p><strong>WebSocketï¼ˆå…¨åŒå·¥ï¼ŒäºŒè¿›åˆ¶/æ–‡æœ¬ï¼‰</strong></p>
<ul>
<li>é€‚ç”¨ï¼šå³æ—¶èŠå¤©ã€åä½œç¼–è¾‘ã€æ¸¸æˆçŠ¶æ€åŒæ­¥ã€è¡Œæƒ…æ¨é€ã€éœ€è¦å®¢æˆ·ç«¯â†’æœåŠ¡ç«¯ä¸»åŠ¨ä¸Šè¡Œçš„å®æ—¶äº¤äº’ã€‚</li>
<li>ä¼˜ç‚¹ï¼šä½å»¶è¿Ÿã€å¤´å¼€é”€å°ã€å…¨åŒå·¥ã€æ”¯æŒäºŒè¿›åˆ¶ã€å¯è‡ªå®šä¹‰å­åè®®ã€‚</li>
<li>æ³¨æ„ï¼šéœ€å¤„ç†å¿ƒè·³ã€é‡è¿ã€èƒŒå‹ã€é‰´æƒä¸æ‰‡å‡ºæ‰©å±•ï¼›ä»£ç†/LB è¦æ­£ç¡®é€ä¼  Upgrade å’Œè¶…æ—¶è®¾ç½®ã€‚</li>
</ul>
<p><strong>Server-Sent Eventsï¼ˆSSEï¼Œå•å‘ serverâ†’clientï¼‰</strong></p>
<ul>
<li>é€‚ç”¨ï¼šé€šçŸ¥æµã€æ—¥å¿—æµã€ç›‘æ§äº‹ä»¶ã€æµå¼ç”Ÿæˆæ–‡æœ¬ï¼ˆå¦‚å¢é‡è¾“å‡ºï¼‰ã€åªéœ€æœåŠ¡ç«¯ä¸‹è¡Œçš„å®æ—¶æ›´æ–°ã€‚</li>
<li>ä¼˜ç‚¹ï¼šæµè§ˆå™¨åŸç”Ÿ EventSourceã€æ–‡æœ¬æµã€è‡ªåŠ¨é‡è¿ã€æ”¯æŒ Last-Event-ID æ–­ç‚¹ç»­ä¼ ï¼›å®ç°ç®€å•ã€‚</li>
<li>æ³¨æ„ï¼šå•å‘ã€ä»…æ–‡æœ¬ï¼ˆå¯ base64 äºŒè¿›åˆ¶ï¼‰ã€è¿æ¥æ•°é™åˆ¶ä¸ä»£ç†è¶…æ—¶éœ€è¦å…³æ³¨ï¼›ç§»åŠ¨ç«¯ç½‘ç»œåˆ‡æ¢è¦åšå®¹é”™ã€‚</li>
</ul>
<p><strong>HTTP è½®è¯¢/é•¿è½®è¯¢ï¼ˆå…¼å®¹å…œåº•ï¼‰</strong></p>
<ul>
<li>é€‚ç”¨ï¼šå¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„å°æµé‡åœºæ™¯ã€å—ç½‘ç»œç¯å¢ƒæˆ–ä¼ä¸šé˜²ç«å¢™é™åˆ¶æ— æ³•ä½¿ç”¨ WS/SSE æ—¶çš„å…œåº•ã€‚</li>
<li>ä¼˜ç‚¹ï¼šæœ€æ˜“è½åœ°ã€ä¸ç¼“å­˜/é‰´æƒ/ç›‘æ§ä½“ç³»å¤©ç„¶å…¼å®¹ï¼›å¯¹ä¸­é—´è®¾å¤‡æœ€å‹å¥½ã€‚</li>
<li>æ³¨æ„ï¼šå»¶è¿Ÿæ›´é«˜ã€èµ„æºåˆ©ç”¨ä½ï¼›é«˜é¢‘è½®è¯¢ä¼šå¸¦æ¥æˆæœ¬ä¸é™æµå‹åŠ›ã€‚</li>
</ul>
<p><strong>âœ… é‡ç‚¹</strong></p>
<ul>
<li>WebSocket é€šè¿‡ HTTP/1.1 Upgrade â†’ 101 å®Œæˆåˆ‡æ¢ï¼Œæ­¤åæ˜¯å¸§åè®®çš„å…¨åŒå·¥é€šé“ï¼›Keep-Alive ä»…æ˜¯å¤ç”¨ TCPï¼Œä¸æ”¹å˜ HTTP çš„è¯·æ±‚-å“åº”è¯­ä¹‰ã€‚</li>
<li>é€‰å‹è§„åˆ™ï¼šéœ€è¦åŒå‘å®æ—¶äº¤äº’é€‰ WebSocketï¼›å•å‘äº‹ä»¶æµé€‰ SSEï¼›å—é™æˆ–ä½å®æ—¶æ€§åœºæ™¯ç”¨è½®è¯¢ä½œå…œåº•ã€‚</li>
</ul>
<h3 data-id="heading-26">2ã€å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¯æ°´å¹³æ‰©å±•çš„å®æ—¶æ¨é€ç³»ç»Ÿï¼Ÿ</h3>
<p>åœ¨å¯æ°´å¹³æ‰©å±•çš„å®æ—¶æ¨é€ç³»ç»Ÿä¸­ï¼ŒWebSocket è¿æ¥ä¼šåˆ†å¸ƒåœ¨å¤šå°ç½‘å…³èŠ‚ç‚¹ä¸Šã€‚</p>
<p>æ ¸å¿ƒæŒ‘æˆ˜æ˜¯å¦‚ä½•åœ¨è¿æ¥ä¸æ¶ˆæ¯ä¸åœ¨åŒä¸€å°æœºå™¨æ—¶ï¼Œä»èƒ½æŠŠæ¶ˆæ¯å¿«é€Ÿè·¯ç”±åˆ°æ­£ç¡®çš„è¿æ¥ã€‚å¯è¡Œçš„èŒƒå¼æ˜¯</p>
<ul>
<li>ç½‘å…³å±‚è´Ÿè´£è¿æ¥</li>
<li>ç®¡é“å±‚è´Ÿè´£è·¯ç”±ä¸å‘å¸ƒè®¢é˜…</li>
<li>å­˜å‚¨å±‚è´Ÿè´£çŠ¶æ€ä¸å›æ”¾</li>
</ul>
<h4 data-id="heading-27">ğŸ”Œ ç½‘å…³å±‚ï¼ˆè´Ÿè´£è¿æ¥ï¼‰</h4>
<ul>
<li>ç»ˆæ­¢ TLS/WSï¼Œç»´æŒå¿ƒè·³ä¸é€Ÿç‡é™åˆ¶ï¼Œä¿æŒæ— çŠ¶æ€å®ä¾‹ã€‚</li>
<li>å»ºç«‹æœ¬åœ°ç´¢å¼•ï¼šconnectionId â†’ è®¢é˜…é›†åˆï¼ŒuserId â†’ connectionIdsã€‚</li>
<li>å°†è¿æ¥å…ƒæ•°æ®ä¸ŠæŠ¥å…±äº«å­˜å‚¨ï¼šconnectionIdã€userIdã€nodeIdã€è®¢é˜…ã€æœ€è¿‘å¿ƒè·³ã€‚</li>
<li>ä»…è®¢é˜…â€œä¸è‡ªå·±æœ‰å…³çš„åˆ†ç‰‡â€ï¼šæŒ‰ userId/topic çš„å“ˆå¸Œåˆ†ç‰‡ä»ç®¡é“å±‚æ‹‰å–ï¼Œå‡å°‘æ— å…³æ‰‡å‡ºã€‚</li>
<li>å†™é€šé“èƒŒå‹ä¸ä¼˜å…ˆçº§ï¼šæ§åˆ¶å¸§/å…³é”®æ¶ˆæ¯ä¼˜å…ˆï¼Œä½ä¼˜å…ˆçº§å¯ä¸¢å°¾æˆ–æŠ½æ ·ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-28">ğŸš‡ ç®¡é“å±‚ï¼ˆè´Ÿè´£è·¯ç”±ä¸å‘å¸ƒè®¢é˜…ï¼‰</h4>
<ul>
<li>
<p>é€‰å‹å…·å¤‡åˆ†ç‰‡ä¸å›æ”¾èƒ½åŠ›çš„æ€»çº¿ï¼ˆKafka/Pulsar/NATS/Redis Streamsï¼‰ã€‚</p>
</li>
<li>
<p><strong>åˆ†ç‰‡ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>ç‚¹æ¨ï¼šæŒ‰ userId/connectionId ä¸€è‡´æ€§å“ˆå¸Œåˆ°åˆ†åŒºï¼Œä¿è¯å•ç”¨æˆ·å±€éƒ¨æœ‰åºã€‚</li>
<li>ä¸»é¢˜æ¨é€ï¼šæŒ‰ topic åˆ†åŒºï¼Œç½‘å…³æœ¬åœ°å†åšè®¢é˜…è¿‡æ»¤ä¸æ‰‡å‡ºã€‚</li>
</ul>
</li>
</ul>

<ul>
<li>
<p><strong>è·¯ç”±æ–¹å¼</strong>ï¼š</p>
<ul>
<li>ç”Ÿäº§è€…åªéœ€å†™å¯¹çš„åˆ†ç‰‡ï¼›æ€»çº¿æŒ‰åˆ†åŒºæŠŠæ¶ˆæ¯é€åˆ°è®¢é˜…è¯¥åˆ†ç‰‡çš„ç½‘å…³ã€‚</li>
<li>å¹¿æ’­/è¶…å¤§æˆ¿é—´é‡‡ç”¨â€œåˆ†å±‚æ‰‡å‡ºâ€ï¼šå…ˆåˆ°åˆ†ç‰‡ï¼Œå†ç”±å„ç½‘å…³æœ¬åœ°æ‰‡å‡ºï¼Œå¿…è¦æ—¶åŠ ä¸­é—´æ‰‡å‡ºä»£ç†ã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><strong>å»é‡ä¸å¹‚ç­‰</strong>ï¼šmessageId æˆ– (topic, partition, offset) ä½œä¸ºå¹‚ç­‰é”®ï¼Œç½‘å…³/å®¢æˆ·ç«¯å„è‡ªç»´æŠ¤çŸ­æœŸå»é‡é›†åˆã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-29">ğŸ—ƒï¸ å­˜å‚¨å±‚ï¼ˆè´Ÿè´£çŠ¶æ€ä¸å›æ”¾ï¼‰</h4>
<ul>
<li>ä¼šè¯ä¸è®¢é˜…çŠ¶æ€ï¼šä½¿ç”¨ Redis Cluster æˆ– KV æœåŠ¡å­˜ userIdâ†’connectionIdsã€connectionIdâ†’nodeIdã€è®¢é˜…æ¸…å•ã€å¿ƒè·³æ—¶é—´ã€‚</li>
<li>æ¸¸æ ‡ä¸å›æ”¾ï¼šåœ¨æ€»çº¿å±‚ä¿ç•™ offsetï¼›å®¢æˆ·ç«¯é‡è¿æºå¸¦ resumeTokenï¼Œç½‘å…³æ®æ­¤æ¢å¤è®¢é˜…å¹¶æŒ‰ offset å¢é‡è¡¥å‘ã€‚</li>
<li>ä¸€è‡´æ€§ä¸æ›´æ–°ï¼šè®¢é˜…å˜æ›´å†™äº‹ä»¶æµï¼Œç›¸å…³ç½‘å…³æ¶ˆè´¹ååˆ·æ–°æœ¬åœ°ç´¢å¼•ï¼›ç”¨ç‰ˆæœ¬å·/é€»è¾‘æ—¶é’Ÿé¿å…ä¹±åºè¦†ç›–ã€‚</li>
</ul>
<h3 data-id="heading-30">3ã€å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢ã€ä¸é‡ã€æŒ‰åºï¼Ÿ</h3>
<ol>
<li><strong>ä¸ä¸¢ï¼š</strong> æ¶ˆæ¯å…ˆè½åˆ°èƒ½æŒä¹…åŒ–ã€å¸¦å‰¯æœ¬ç¡®è®¤çš„æ€»çº¿é‡Œï¼ˆåƒâ€œå†™ç›˜ä¸”å¤šå‰¯æœ¬åˆ°ä½æ‰ç®—æˆåŠŸâ€ï¼‰ï¼Œå†™å¤±è´¥å°±é€€é¿é‡è¯•ï¼›æ¶ˆè´¹ä¾§æ˜¯â€œå…ˆé€åˆ°ç”¨æˆ·æ‰‹é‡Œæˆ–è¿›å¯é ä¸‹è¡Œé˜Ÿåˆ—ï¼Œå†æ›´æ–°ä½ç‚¹â€ï¼Œæ–­çº¿åæ‹¿ç€ <code>resumeToken+offset</code> ä»ä¿ç•™çš„å†å²é‡ŒæŠŠæ¼æ‰çš„è¡¥å›æ¥ã€‚</li>
<li><strong>ä¸é‡ï¼š</strong> æ¯æ¡æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªä¸ä¼šæ’è½¦çš„â€œæŒ‡çº¹â€ï¼ˆmessageId æˆ– topic-partition-offsetï¼‰ï¼›ç½‘å…³ç”¨ä¸€å°å—å†…å­˜åšè¿‘ç«¯å»é‡ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡çœŸæ­£å†™å…¥æ‰å‰è¿›ä½ç‚¹ï¼Œé‡å¤çš„ä¸€æ¦‚å¿½ç•¥ï¼›å®¢æˆ·ç«¯ä¹ŸæŒ‰åŒä¸€æŒ‡çº¹åšå¹‚ç­‰å¤„ç†ï¼Œé¿å…ä¸šåŠ¡çŠ¶æ€è¢«äºŒæ¬¡æ”¹åŠ¨ã€‚</li>
<li><strong>æŒ‰åºï¼š</strong> æŠŠéœ€è¦æœ‰åºçš„å¯¹è±¡ï¼ˆuserId/roomIdï¼‰å“ˆå¸Œåˆ°åŒä¸€åˆ†åŒºï¼Œå€Ÿç”¨åˆ†åŒºå†…å¤©ç„¶é¡ºåºï¼›åŒä¸€ä¸ªé”®åœ¨ç½‘å…³é‡Œä¸²è¡Œå‘é€ã€åŒé˜Ÿåˆ—å†…é‡è¯•ï¼Œä¸è·¨åˆ†åŒºä¸å¹¶è¡Œç©¿æ’ï¼Œè¿™æ ·å³ä½¿é‡è¯•å’Œè¡¥å‘ä¹Ÿä¸ä¼šæŠŠé¡ºåºæ‰“ä¹±ã€‚</li>
</ol>
<h3 data-id="heading-31">4ã€å¿ƒè·³å¦‚ä½•è®¾è®¡ï¼Ÿè¶…æ—¶å¦‚ä½•åˆ¤å®šï¼Ÿ</h3>
<p>è¿™é‡Œçš„å¿ƒè·³ï¼Œç›®æ ‡æ˜¯ <strong>â€œä¿æ´»ã€æ¢æµ‹ã€å¯å¹³æ»‘é‡è¿â€ã€‚</strong></p>
<ol>
<li>
<p><strong>ä¸å¤±è”ï¼š</strong> ç”¨åº”ç”¨å±‚ <code>ping/pong</code>ï¼Œå®¢æˆ·ç«¯ä¸»å‘ã€æœåŠ¡ç«¯å›ï¼›</p>
<ol>
<li>é—´éš” 20â€“60sï¼ŒåŠ Â±10%æŠ–åŠ¨</li>
<li>æœªçŸ¥ç½‘ç»œæ—¶å– 20â€“30sï¼Œç¡®ä¿å°äºæœ€çŸ­ NAT ç©ºé—²å›æ”¶ã€‚</li>
</ol>
</li>
</ol>

<ol start="2">
<li><strong>æ€ä¹ˆåˆ¤æ­»ï¼š</strong> åˆ«ä¸€è·³ä¸å›å°±æ‹æ¿ã€‚è®°å½• <code>lastSeen</code>ï¼Œ<strong>å…è®¸ 2â€“3 æ¬¡å¿ƒè·³æœªè¾¾æˆ–</strong> <code>now-lastSeen</code> <strong>è¶…è¿‡ 2â€“3 ä¸ªå‘¨æœŸå†åˆ¤æ–­</strong>ï¼›è¿›å…¥â€œ<code>Suspect</code>â€æ—¶é™çº§å†™å…¥ï¼Œä»æœ‰ä¸šåŠ¡æµé‡å³ç«‹åˆ»æ¢å¤ã€‚</li>
<li><strong>æ–­äº†å’‹åŠï¼šé‡è¿èµ°æŒ‡æ•°é€€é¿å¹¶å¸¦æŠ–åŠ¨ï¼Œæºå¸¦</strong> <code>resumeToken/offset</code> <strong>è¡¥å‘</strong>ï¼›ç§»åŠ¨ç«¯åˆ‡ç½‘ä¼˜å…ˆå¤ç”¨ä¼šè¯ï¼Œå¤±è´¥å†é‡å»ºã€‚ç›‘æ§ RTT/ä¸¢åŒ…ä¸ Suspect æ¯”ä¾‹ï¼Œè‡ªåŠ¨è°ƒå¿ƒè·³ä¸é˜ˆå€¼ã€‚</li>
</ol>
<h3 data-id="heading-32">5ã€å¦‚ä½•åœ¨ Nginx/Envoy åå‘ä»£ç†åç¨³å®šè¿è¡Œ WebSocketï¼Ÿ</h3>
<p>æ ¸å¿ƒæ€è·¯ï¼šè®©ä»£ç†â€œä¸çæ“å¿ƒâ€ã€è¿æ¥â€œå¸¸è¢«çœ‹è§â€ã€åç«¯â€œå¯ç»­ä¸Šâ€ã€‚</p>
<ul>
<li><strong>ä»£ç†è®¾ç½®</strong>ï¼šå¼€å¯ WebSocket å‡çº§ï¼›è°ƒå¤§è¶…æ—¶ï¼Œç¦ç”¨ç¼“å†²ä¸å‹ç¼©ï¼›ä¿æŒ TCP keepaliveï¼ŒHTTP/2 ç”¨ CONNECTï¼ˆH2/WebSocketï¼‰ã€‚</li>
<li><strong>å¿ƒè·³ä¸ä¿æ´»</strong>ï¼šåº”ç”¨å±‚ ping/pong 20â€“30sï¼ˆÂ±10%æŠ–åŠ¨ï¼‰ï¼Œä¿è¯å°äºä»£ç†/NATç©ºé—²å›æ”¶ï¼›å¤§è¿æ¥æ•°ç”¨è½»é‡è´Ÿè½½å‡è¡¡ï¼ˆhash by userId/roomIdï¼‰é¿å…è·¨èŠ‚ç‚¹è¿ç§»ã€‚</li>
<li><strong>æ–­çº¿ä¸é‡è¿</strong>ï¼šå®¢æˆ·ç«¯æŒ‡æ•°é€€é¿+æŠ–åŠ¨ï¼Œå¸¦ä¼šè¯ token/offset ç»­ä¼ ï¼›åç«¯å¹‚ç­‰å»é‡ï¼Œé‡æ”¾ä¸é‡ä¸ä¸¢ã€‚</li>
<li><strong>è¿ç»´ä¸è§‚æµ‹</strong>ï¼šå¼€ä»£ç†å±‚æŒ‡æ ‡ï¼ˆå‡çº§æˆåŠŸç‡ã€idle å…³é—­æ•°ã€5xxï¼‰ã€RTT/ä¸¢åŒ…ä¸é‡è¿ç‡ï¼Œå¼‚å¸¸æ—¶è‡ªé€‚åº”ç¼©çŸ­å¿ƒè·³æˆ–æ”¾å®½è¶…æ—¶ã€‚</li>
</ul>
<h3 data-id="heading-33">6ã€å¦‚ä½•åšé‰´æƒä¸æƒé™éš”ç¦»ï¼Ÿ</h3>
<p>æ¡æ‰‹å‰æ ¡éªŒ JWTï¼›Subprotocol æŒ‡å®šç§Ÿæˆ·/ç‰ˆæœ¬ï¼›é¢‘é“çº§ ACLï¼›é¿å…æ•æ„Ÿæ•°æ®ä»å®¢æˆ·ç«¯è¯·æ±‚éæˆæƒé¢‘é“ã€‚</p>
<ul>
<li><strong>æ¡æ‰‹å‰æ ¡éªŒ JWT</strong>ï¼šåœ¨ <code>HTTP Upgrade </code>å‰éªŒè¯ iss/aud/exp/ç­¾åå¹¶è§£æ tenant_id/user_id/scopesï¼Œé¿å…å»ºç«‹é•¿è¿åå†è¸¢ã€‚</li>
<li><strong>Subprotocol æŒ‡å®šç§Ÿæˆ·/ç‰ˆæœ¬</strong>ï¼šç”¨ Sec-WebSocket-Protocol æºå¸¦ tenant å’Œç­–ç•¥ç‰ˆæœ¬åšç™½åå•åŒ¹é…ï¼Œç¡®ä¿è¿æ¥ä¸Šä¸‹æ–‡ä¸€è‡´ã€‚</li>
<li><strong>é¢‘é“çº§ ACL</strong>ï¼šé¢‘é“å¼ºåˆ¶ä»¥ç§Ÿæˆ·å‰ç¼€å‘½åï¼Œæ¯æ¬¡ subscribe/publish ä¾æ® RBAC+scope å‰ç¼€ï¼ˆåˆ°èµ„æºæˆ–å‰ç¼€ï¼‰åšæœåŠ¡ç«¯æˆæƒã€‚</li>
<li><strong>é¿å…æ•æ„Ÿæ•°æ®è¶Šæƒ</strong>ï¼šä»…æŒ‰æœåŠ¡å™¨ç»´æŠ¤çš„â€œå·²æˆæƒè®¢é˜…é›†åˆâ€ä¸‹å‘æ•°æ®ï¼Œå¿½ç•¥å®¢æˆ·ç«¯è‡ªæŠ¥ç­›é€‰è¯·æ±‚å¹¶æ‹’ç»æœªæˆæƒé¢‘é“ã€‚</li>
</ul>
<h3 data-id="heading-34">7ã€å¦‚ä½•è¯„ä¼°æ€§èƒ½ä¸æˆæœ¬ï¼Ÿ</h3>
<ul>
<li><strong>æ¯è¿æ¥å†…å­˜å ç”¨ï¼š</strong> ç”¨åŸºçº¿å‹æµ‹é‡å‡º MB/1k è¿æ¥çš„å®é™…å ç”¨ï¼Œç»“åˆç›®æ ‡å¹¶å‘å¤–æ¨å•æœºä¸Šé™å¹¶ç›‘æ§ GC/ç¢ç‰‡ã€‚</li>
<li><strong>æ¯ç§’æ¶ˆæ¯æ•°ï¼ˆfanoutÃ—é¢‘ç‡ï¼‰ï¼š</strong> ç”¨å‘å¸ƒé¢‘ç‡Ã—å¹³å‡æ‰‡å‡ºå¾—åˆ°æ€»ååï¼Œæ ¸ç®—å¸¦å®½ä¸å‘é€é˜Ÿåˆ—å®¹é‡ï¼Œè¯†åˆ«çƒ­ç‚¹é¢‘é“æ”¾å¤§æ•ˆåº”ã€‚</li>
<li><strong>å°¾å»¶è¿Ÿ P95/P99ï¼š</strong> æŒç»­è·Ÿè¸ªç«¯åˆ°ç«¯å»¶è¿Ÿé•¿å°¾å¹¶å…³è”é˜Ÿåˆ—æ·±åº¦ä¸CPU/GCäº‹ä»¶ï¼Œç¡®ä¿åœ¨SLAçº¢çº¿ä¸‹ä»ç¨³å®šã€‚</li>
<li><strong>å‹æµ‹è€ƒè™‘å¹¿æ’­å³°å€¼ä¸é‡è¿é£æš´ï¼š</strong> åˆ†åˆ«æ¨¡æ‹Ÿå¤§æ‰‡å‡ºç¬æ—¶å¹¿æ’­ä¸å¤§é‡çŸ­æ—¶é—´å†…æ¡æ‰‹é‡è¿ï¼ŒéªŒè¯èƒŒå‹ã€é™é€Ÿå’Œæ¡æ‰‹è·¯å¾„çš„éŸ§æ€§ã€‚</li>
</ul>
<h3 data-id="heading-35">8ã€é‡åˆ°â€œé‡è¿é£æš´â€æ€ä¹ˆå¤„ç†ï¼Ÿ</h3>
<ul>
<li><strong>æŠ–åŠ¨é€€é¿ï¼ˆæŒ‡æ•°é€€é¿ + éšæœºæŠ–åŠ¨ï¼‰ï¼š</strong> å®¢æˆ·ç«¯æŒ‰æŒ‡æ•°é€€é¿é—´éš”é‡è¯•å¹¶åŠ å…¥éšæœºæŠ–åŠ¨ï¼Œé¿å…åŒç›¸ä½åŒæ—¶é‡è¿é€ æˆå°–å³°ã€‚</li>
<li><strong>åˆ†æ‰¹æ¢å¤ï¼š</strong> å°†è¿æ¥æ¢å¤æŒ‰å›ºå®šæ‰¹æ¬¡/æ—¶é—´ç‰‡å‘æ”¾ï¼ˆå¦‚æ¯ 100ms å¼€æ”¾ N ä¸ªï¼‰ï¼ŒæŠŠå°–å³°æ‘Šå¹³åˆ°æ›´é•¿çª—å£ã€‚</li>
<li><strong>æœåŠ¡ç«¯é™æµä¸æ’é˜Ÿï¼š</strong> åœ¨æ¡æ‰‹ä¸è®¤è¯è·¯å¾„è®¾ç½®å¹¶å‘/é€Ÿç‡ä¸Šé™ä¸é˜Ÿåˆ—ï¼Œè¶…é™ç›´æ¥è¿”å›å¯é‡è¯•é”™è¯¯æˆ–å»¶è¿Ÿä»¤ç‰Œã€‚</li>
<li><strong>ç°åº¦æ”¾é‡ï¼š</strong> æŒ‰ç§Ÿæˆ·/åŒºåŸŸ/ç‰ˆæœ¬é€æ­¥æå‡å…è®¸é‡è¿æ¯”ä¾‹ï¼Œç»“åˆå¥åº·åº¦ä¸é”™è¯¯ç‡è‡ªåŠ¨è°ƒèŠ‚æ”¾é‡é€Ÿåº¦ã€‚</li>
</ul>
<h3 data-id="heading-36">9ã€å‰ç«¯å¦‚ä½•å°è£…ä¸€ä¸ªå¥å£®çš„ WebSocket å®¢æˆ·ç«¯ï¼Ÿ<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce94c88ac24a4e95a110b4c495a23f50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763906105&amp;x-signature=Qzn4d08ANP%2B9NwdDG2jnn06wgkw%3D" alt="" loading="lazy"/></h3>
<ul>
<li><strong>çŠ¶æ€æœºï¼ˆ</strong> <code>CONNECTING</code> <strong>/</strong> <code>OPEN</code> <strong>/</strong> <code>CLOSING</code> <strong>/</strong> <code>CLOSED</code> <strong>ï¼‰ï¼š</strong> ç”¨æœ‰é™çŠ¶æ€æœºé©±åŠ¨æ‰€æœ‰äº‹ä»¶ä¸è¿ç§»ï¼Œå•èˆªé“æ§åˆ¶é¿å…å¹¶å‘é‡è¿ä¸å›è°ƒç«æ€ã€‚</li>
<li><strong>å¿ƒè·³/é‡è¿ç­–ç•¥ï¼š</strong> æŒ‰å›ºå®šå¿ƒè·³æ¢æ´»ä¸åŠå¼€æ£€æµ‹ï¼Œé‡è¿é‡‡ç”¨æŒ‡æ•°é€€é¿å åŠ éšæœºæŠ–åŠ¨å¹¶è®¾ä¸Šé™ä¸å†·å´æœŸã€‚</li>
<li><strong>æ¶ˆæ¯åºåˆ—åŒ–ï¼š</strong> ç»Ÿä¸€ envelopeï¼ˆtype/id/ts/payloadï¼‰ï¼Œé»˜è®¤ JSONï¼Œæ€§èƒ½æ•æ„Ÿæ—¶åˆ‡ Protobuf/MessagePack å¹¶ä¿æŒå‘åå…¼å®¹ã€‚</li>
<li><strong>ç¦»çº¿ç¼“å­˜ä¸å»é‡ï¼š</strong> æœªè¿é€šæ—¶å°†å¾…å‘å…¥é˜Ÿã€è·¨åˆ·æ–°ç”¨ IndexedDBï¼ŒæŒ‰ seq/uuid å»é‡å¹¶ç”¨ last-seq åšæ–­ç‚¹ç»­ä¼ ã€‚</li>
<li><strong>å¯è§‚æµ‹æ—¥å¿—ï¼š</strong> è®°å½•è¿æ¥å°è¯•/å…³é—­ç /é‡è¿æ¬¡æ•°/å¿ƒè·³RTT/é˜Ÿåˆ—é•¿åº¦ç­‰æŒ‡æ ‡ä¸äº‹ä»¶ï¼Œä¾¿äºå¿«é€Ÿå®šä½é•¿å°¾ä¸æ•…éšœã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç°ä»£C++ï¼šä¸€åœºé™é»˜çš„é©å‘½ï¼Œå‘Šåˆ«â€œC with Classesâ€]]></title>    <link>https://juejin.cn/post/7572757056438665225</link>    <guid>https://juejin.cn/post/7572757056438665225</guid>    <pubDate>2025-11-16T13:59:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572757056438665225" data-draft-id="7572880767584337971" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç°ä»£C++ï¼šä¸€åœºé™é»˜çš„é©å‘½ï¼Œå‘Šåˆ«â€œC with Classesâ€"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-16T13:59:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="oioihoii"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç°ä»£C++ï¼šä¸€åœºé™é»˜çš„é©å‘½ï¼Œå‘Šåˆ«â€œC with Classesâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    oioihoii
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T13:59:16.000Z" title="Sun Nov 16 2025 13:59:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ å¯¹C++çš„å°è±¡è¿˜åœç•™åœ¨å¤æ‚çš„æŒ‡é’ˆæ“ä½œã€ä»¤äººå¤´ç–¼çš„å†…å­˜ç®¡ç†å’Œ<code>new</code>/<code>delete</code>çš„æ³¥æ½­ä¸­ï¼Œé‚£ä¹ˆæ˜¯æ—¶å€™æ›´æ–°ä½ çš„è®¤çŸ¥äº†ã€‚ä»Šå¤©çš„C++å·²ç»ç»å†äº†ä¸€åœºæ·±åˆ»çš„â€œç°ä»£åŒ–â€é©å‘½ï¼Œå®ƒå˜å¾—æ›´å®‰å…¨ã€æ›´é«˜æ•ˆã€æ›´ä¼˜é›…ã€‚</p>
<h4 data-id="heading-0"><strong>ä¸€ã€ â€œç°åœ¨C++â€æŒ‡ä»€ä¹ˆï¼Ÿ</strong></h4>
<p>â€œç°åœ¨C++â€é€šå¸¸æŒ‡çš„æ˜¯<strong>C++11åŠä¹‹åçš„æ ‡å‡†</strong>ï¼ˆC++14, C++17, C++20, C++23...ï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„åˆ†æ°´å²­ã€‚</p>
<ul>
<li><strong>C++11çš„å‘å¸ƒï¼ˆ2011å¹´ï¼‰</strong>ï¼šè¿™è¢«è§†ä¸ºç°ä»£C++çš„èµ·ç‚¹ã€‚å®ƒå¼•å…¥äº†å¦‚æ­¤ä¹‹å¤šé¢ è¦†æ€§çš„æ–°ç‰¹æ€§ï¼Œä»¥è‡³äºBjarne Stroustrupï¼ˆC++ä¹‹çˆ¶ï¼‰ç§°å…¶ä¸ºâ€œä¸€é—¨æ–°è¯­è¨€â€ã€‚</li>
<li><strong>æŒç»­æ¼”è¿›</strong>ï¼šä¹‹åï¼ŒC++æ ‡å‡†å§”å‘˜ä¼šè½¬å‘äº†æ¯ä¸‰å¹´å‘å¸ƒä¸€ä¸ªæ–°æ ‡å‡†çš„â€œç«è½¦æ—¶åˆ»è¡¨â€æ¨¡å¼ï¼Œä½¿å¾—è¯­è¨€èƒ½å¤ŸæŒç»­ã€ç¨³å®šåœ°å¸æ”¶æ–°æ€æƒ³å’Œç¤¾åŒºéœ€æ±‚ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œå½“æœ‰äººè°ˆè®ºâ€œç°ä»£C++â€æ—¶ï¼Œä»–ä»¬æŒ‡çš„æ˜¯ä¸€å¥—éµå¾ªæ–°æ ‡å‡†ã€åˆ©ç”¨æ–°ç‰¹æ€§æ¥ç¼–å†™ä»£ç çš„ç†å¿µå’Œå®è·µã€‚</p>
<h4 data-id="heading-1"><strong>äºŒã€ ç°ä»£C++ä¸æ—©æœŸC++çš„æ ¸å¿ƒåŒºåˆ«</strong></h4>
<p>è¿™åœºé©å‘½å¹¶éåªæ˜¯å¢åŠ å‡ ä¸ªæ–°å…³é”®å­—ï¼Œè€Œæ˜¯ä»æ ¸å¿ƒå±‚é¢æ”¹å˜äº†æˆ‘ä»¬ç¼–å†™C++ä»£ç çš„æ–¹å¼ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªæœ€å…³é”®çš„è½¬å˜ï¼š</p>
<p><strong>1. å†…å­˜ç®¡ç†çš„é©å‘½ï¼šä»â€œæ‰‹åŠ¨â€åˆ°â€œè‡ªåŠ¨â€</strong></p>
<p>è¿™æ˜¯æœ€æ˜¾è‘—çš„è¿›æ­¥ã€‚æ—©æœŸC++ä¸¥é‡ä¾èµ–<code>new</code>å’Œ<code>delete</code>ï¼Œå†…å­˜æ³„æ¼å’Œæ‚¬ç©ºæŒ‡é’ˆæ˜¯ç¨‹åºå‘˜çš„å™©æ¢¦ã€‚</p>
<ul>
<li>
<p><strong>æ—©æœŸC++</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">MyClass* obj = <span class="hljs-keyword">new</span> <span class="hljs-built_in">MyClass</span>();
<span class="hljs-comment">// ... ä½¿ç”¨ obj</span>
<span class="hljs-keyword">delete</span> obj; <span class="hljs-comment">// å¿…é¡»æ‰‹åŠ¨é‡Šæ”¾ï¼Œå¦åˆ™å†…å­˜æ³„æ¼</span>
</code></pre>
</li>
<li>
<p><strong>ç°ä»£C++</strong>ï¼š
å¼•å…¥äº†<strong>æ™ºèƒ½æŒ‡é’ˆ</strong>ï¼ˆ<code>std::unique_ptr</code>, <code>std::shared_ptr</code>ï¼‰ï¼Œå®ƒä»¬åˆ©ç”¨RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰ç†å¿µï¼Œåœ¨å¯¹è±¡ææ„æ—¶è‡ªåŠ¨é‡Šæ”¾èµ„æºã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>
<span class="hljs-keyword">auto</span> obj = std::<span class="hljs-built_in">make_unique</span>&lt;MyClass&gt;(); <span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨delete</span>
<span class="hljs-comment">// å½“objç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå†…å­˜ä¼šè‡ªåŠ¨è¢«é‡Šæ”¾</span>
</code></pre>
<p><strong>åŒºåˆ«</strong>ï¼šæ‰‹åŠ¨ç®¡ç† -&gt; è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œä»æ ¹æœ¬ä¸Šå‡å°‘äº†å†…å­˜é”™è¯¯ã€‚</p>
</li>
</ul>
<p><strong>2. è¯­è¨€æ ¸å¿ƒçš„ç°ä»£åŒ–ï¼šæ›´ç®€æ´ï¼Œæ›´å¼ºå¤§</strong></p>
<p>ç°ä»£C++æä¾›äº†å¤§é‡è¯­æ³•ç³–å’Œæ–°ç‰¹æ€§ï¼Œè®©ä»£ç æ›´æ¸…æ™°ã€è¡¨è¾¾èƒ½åŠ›æ›´å¼ºã€‚</p>
<ul>
<li>
<p><strong>è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼ˆ<code>auto</code>ï¼‰</strong>ï¼š</p>
<ul>
<li><strong>æ—©æœŸ</strong>ï¼š<code>std::vector&lt;int&gt;::iterator it = vec.begin();</code></li>
<li><strong>ç°ä»£</strong>ï¼š<code>auto it = vec.begin();</code> // ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼ç±»å‹
<strong>åŒºåˆ«</strong>ï¼šä»£ç æ›´ç®€æ´ï¼Œå‡å°‘äº†å†—ä½™ï¼Œå°¤å…¶åœ¨æ¨¡æ¿ç¼–ç¨‹ä¸­æä¸ºæœ‰ç”¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>åŸºäºèŒƒå›´çš„forå¾ªç¯</strong>ï¼š</p>
<ul>
<li><strong>æ—©æœŸ</strong>ï¼š<code>for (int i = 0; i &lt; vec.size(); ++i) { ... }</code></li>
<li><strong>ç°ä»£</strong>ï¼š<code>for (const auto&amp; element : vec) { ... }</code>
<strong>åŒºåˆ«</strong>ï¼šæ›´å®‰å…¨ï¼ˆä¸ä¼šè¶Šç•Œï¼‰ï¼Œæ›´ç®€æ´ï¼Œæ„å›¾æ›´æ˜ç¡®ã€‚</li>
</ul>
</li>
<li>
<p><strong>Lambdaè¡¨è¾¾å¼</strong>ï¼š
å…è®¸åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰åŒ¿åå‡½æ•°ï¼Œæå¤§åœ°ä¾¿åˆ©äº†STLç®—æ³•çš„ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp">std::<span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), [](<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b) { <span class="hljs-keyword">return</span> a &gt; b; });
</code></pre>
<p><strong>åŒºåˆ«</strong>ï¼šä»å¿…é¡»å®šä¹‰å¤–éƒ¨å‡½æ•°æˆ–å‡½æ•°å¯¹è±¡ï¼Œå˜ä¸ºå°±åœ°å®šä¹‰ï¼Œä»£ç å†…èšæ€§æ›´é«˜ã€‚</p>
</li>
<li>
<p><strong>ç§»åŠ¨è¯­ä¹‰å’Œå³å€¼å¼•ç”¨ï¼ˆ<code>&amp;&amp;</code>ï¼‰</strong>ï¼š
è¿™æ˜¯C++11æœ€æ·±åˆ»çš„å˜é©ä¹‹ä¸€ã€‚å®ƒå…è®¸èµ„æºçš„â€œè½¬ç§»â€è€Œéâ€œæ‹·è´â€ï¼Œæå¤§åœ°æå‡äº†æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">createHugeVector</span><span class="hljs-params">()</span></span>;
std::vector&lt;<span class="hljs-type">int</span>&gt; v = <span class="hljs-built_in">createHugeVector</span>(); <span class="hljs-comment">// è¿™é‡Œå‘ç”Ÿçš„æ˜¯ç§»åŠ¨æ„é€ ï¼Œè€Œéæ˜‚è´µçš„æ‹·è´</span>
</code></pre>
<p><strong>åŒºåˆ«</strong>ï¼šè§£å†³äº†ä¸´æ—¶å¯¹è±¡å¸¦æ¥çš„ä¸å¿…è¦çš„æ‹·è´å¼€é”€ï¼Œä½¿å¾—åœ¨å‡½æ•°é—´ä¼ é€’å¤§å‹å¯¹è±¡å˜å¾—é«˜æ•ˆã€‚</p>
</li>
</ul>
<p><strong>3. æ ‡å‡†åº“çš„æå¤§ä¸°å¯Œ</strong></p>
<p>ç°ä»£C++çš„æ ‡å‡†åº“ï¼ˆSTLï¼‰å·²ç»æˆä¸ºä¸€ä¸ªåŠŸèƒ½æå…¶å¼ºå¤§çš„å·¥å…·ç®±ã€‚</p>
<ul>
<li><strong>æ–°çš„å®¹å™¨</strong>ï¼š<code>std::unordered_map</code>, <code>std::unordered_set</code>ï¼ˆå“ˆå¸Œè¡¨ï¼‰ï¼Œæä¾›äº†å¹³å‡O(1)çš„æŸ¥æ‰¾æ€§èƒ½ã€‚</li>
<li><strong>å¤šçº¿ç¨‹æ”¯æŒ</strong>ï¼šæ—©æœŸC++æ²¡æœ‰æ ‡å‡†çº¿ç¨‹åº“ï¼Œä¾èµ–å¹³å°APIï¼ˆå¦‚pthreadï¼‰ã€‚ç°ä»£C++å†…ç½®äº†<code>std::thread</code>, <code>std::mutex</code>, <code>std::async</code>ç­‰ï¼Œä½¿å¾—ç¼–å†™è·¨å¹³å°å¹¶å‘ç¨‹åºå˜å¾—ç®€å•ã€‚</li>
<li><strong>æ­£åˆ™è¡¨è¾¾å¼ã€éšæœºæ•°åº“ã€æ—¶é—´åº“</strong>ç­‰å¸¸ç”¨åŠŸèƒ½éƒ½è¢«çº³å…¥æ ‡å‡†ï¼Œä¸å†éœ€è¦å¯»æ‰¾ç¬¬ä¸‰æ–¹åº“ã€‚</li>
</ul>
<p><strong>4. é¢å‘â€œæœ€ä½³å®è·µâ€ç¼–ç¨‹</strong></p>
<p>ç°ä»£C++çš„ç‰¹æ€§å¼•å¯¼å¼€å‘è€…èµ°å‘æ›´å®‰å…¨çš„ç¼–ç¨‹èŒƒå¼ã€‚</p>
<ul>
<li><strong><code>nullptr</code>æ›¿ä»£<code>NULL</code></strong>ï¼šæä¾›äº†ç±»å‹å®‰å…¨çš„ç©ºæŒ‡é’ˆã€‚</li>
<li><strong><code>constexpr</code></strong>ï¼šå…è®¸åœ¨ç¼–è¯‘æœŸè®¡ç®—ï¼Œæå‡æ€§èƒ½ã€‚</li>
<li><strong>ç±»å‹ç³»ç»Ÿå¢å¼º</strong>ï¼šå¦‚<code>enum class</code>æ›¿ä»£ä¼ ç»Ÿæšä¸¾ï¼Œé¿å…äº†å‘½åæ±¡æŸ“å’Œéšå¼è½¬æ¢ã€‚</li>
<li><strong>æ¦‚å¿µï¼ˆC++20ï¼‰</strong>ï¼šä¸ºæ¨¡æ¿å‚æ•°æ·»åŠ çº¦æŸï¼Œä½¿å¾—æ¨¡æ¿é”™è¯¯ä¿¡æ¯æ›´å‹å¥½ï¼Œä»£ç æ›´å¥å£®ã€‚</li>
</ul>
<h4 data-id="heading-2"><strong>æ€»ç»“ï¼šæ€ç»´æ¨¡å¼çš„è½¬å˜</strong></h4>













































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">æ—©æœŸC++ï¼ˆC++98/03ï¼‰</th><th align="left">ç°ä»£C++ï¼ˆC++11åŠä»¥åï¼‰</th></tr></thead><tbody><tr><td align="left"><strong>å†…å­˜ç®¡ç†</strong></td><td align="left">æ‰‹åŠ¨<code>new</code>/<code>delete</code></td><td align="left">æ™ºèƒ½æŒ‡é’ˆï¼Œè‡ªåŠ¨ç®¡ç†</td></tr><tr><td align="left"><strong>ç±»å‹å£°æ˜</strong></td><td align="left">æ˜¾å¼å†™å‡ºå†—é•¿ç±»å‹</td><td align="left">å¹¿æ³›ä½¿ç”¨<code>auto</code></td></tr><tr><td align="left"><strong>å¾ªç¯</strong></td><td align="left">ä¼ ç»Ÿ<code>for</code>å¾ªç¯ç´¢å¼•</td><td align="left">åŸºäºèŒƒå›´çš„<code>for</code>å¾ªç¯</td></tr><tr><td align="left"><strong>å‡½æ•°å¯¹è±¡</strong></td><td align="left">éœ€è¦å®šä¹‰ç‹¬ç«‹çš„å‡½æ•°æˆ–ä»¿å‡½æ•°</td><td align="left">ä½¿ç”¨Lambdaè¡¨è¾¾å¼å°±åœ°å®šä¹‰</td></tr><tr><td align="left"><strong>æ€§èƒ½ä¼˜åŒ–</strong></td><td align="left">ä¸»è¦ä¾èµ–å¼•ç”¨å‡å°‘æ‹·è´</td><td align="left"><strong>ç§»åŠ¨è¯­ä¹‰</strong>è½¬ç§»èµ„æºæ‰€æœ‰æƒ</td></tr><tr><td align="left"><strong>å¹¶å‘</strong></td><td align="left">ä¾èµ–å¹³å°ç‰¹å®šAPI</td><td align="left">ä½¿ç”¨æ ‡å‡†åº“<code>std::thread</code></td></tr><tr><td align="left"><strong>æ ¸å¿ƒç†å¿µ</strong></td><td align="left">â€œC with Classesâ€ï¼Œè´´è¿‘åº•å±‚</td><td align="left">é«˜çº§æŠ½è±¡ä¸åº•å±‚æ§åˆ¶å¹¶å­˜ï¼Œå®‰å…¨ä¸æ•ˆç‡å…¼å¾—</td></tr></tbody></table>
<p><strong>ç»“è®º</strong></p>
<p>ç°ä»£C++å¹¶æ²¡æœ‰æŠ›å¼ƒå…¶â€œé›¶å¼€é”€æŠ½è±¡â€å’Œé«˜æ•ˆçš„æ ¸å¿ƒåŸåˆ™ï¼Œè€Œæ˜¯é€šè¿‡æä¾›æ›´é«˜çº§ã€æ›´å®‰å…¨çš„å·¥å…·ï¼Œè®©ç¨‹åºå‘˜èƒ½å¤Ÿæ›´è½»æ¾åœ°å†™å‡ºæ­£ç¡®ã€é«˜æ•ˆä¸”æ˜“äºç»´æŠ¤çš„ä»£ç ã€‚å®ƒå·²ç»ä»ä¸€é—¨éœ€è¦æé«˜æŠ€å·§å’Œç»†å¿ƒæ¥è§„é¿é™·é˜±çš„è¯­è¨€ï¼Œæ¼”å˜ä¸ºä¸€é—¨æ—¢å¼ºå¤§åˆç›¸å¯¹â€œå‹å¥½â€çš„å·¥ä¸šçº§è¯­è¨€ã€‚</p>
<p>å¦‚æœä½ æ˜¯ä¸€ä½C++è€æ‰‹ï¼Œæ‹¥æŠ±ç°ä»£C++æ„å‘³ç€æå‡ç”Ÿäº§åŠ›å’Œä»£ç è´¨é‡ã€‚å¦‚æœä½ æ˜¯ä¸€ä½æ–°æ‰‹ï¼Œé‚£ä¹ˆä½ å¾ˆå¹¸è¿ï¼Œå¯ä»¥ä»è¿™äº›ç°ä»£åŒ–çš„ç‰¹æ€§å¼€å§‹å­¦ä¹ ï¼Œé¿å¼€å‰è¾ˆä»¬è¸©è¿‡çš„è®¸å¤šâ€œå‘â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter,Compose,Web åœ¨Androidå¹³å°ä¸Šä»å¸ƒå±€åˆ°å±å¹•çš„æœºåˆ¶æ¢ç©¶]]></title>    <link>https://juejin.cn/post/7572480736362266630</link>    <guid>https://juejin.cn/post/7572480736362266630</guid>    <pubDate>2025-11-16T12:41:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572480736362266630" data-draft-id="7572525491538821162" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter,Compose,Web åœ¨Androidå¹³å°ä¸Šä»å¸ƒå±€åˆ°å±å¹•çš„æœºåˆ¶æ¢ç©¶"/> <meta itemprop="keywords" content="Flutter,Android,WebView"/> <meta itemprop="datePublished" content="2025-11-16T12:41:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="apigfly"/> <meta itemprop="url" content="https://juejin.cn/user/2488950054453613"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter,Compose,Web åœ¨Androidå¹³å°ä¸Šä»å¸ƒå±€åˆ°å±å¹•çš„æœºåˆ¶æ¢ç©¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2488950054453613/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    apigfly
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T12:41:46.000Z" title="Sun Nov 16 2025 12:41:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ€è¿‘ç”¨åˆ°äº† Flutter åšè·¨å¹³å°é¡¹ç›®ï¼Œæ¯”è¾ƒå¥½å¥‡è·¨å¹³å°é¡¹ç›®æ˜¯æ€ä¹ˆèƒ½å¤Ÿåœ¨ Android è®¾å¤‡ä¸Šæ˜¾ç¤ºå‡ºæ¥çš„ï¼Œå°±æœ‰äº†ä»Šå¤©çš„æ–‡ç« ï¼Œå› ä¸ºä¹‹å‰å†™çš„ <a href="https://juejin.cn/post/6944960866404007944" target="_blank" title="https://juejin.cn/post/6944960866404007944">Android å›¾å½¢æ˜¾ç¤ºç³»ç»Ÿ</a> ï¼Œä¹Ÿç®—æ˜¯æ‰¿ä¸Šå¯ä¸‹äº†å§ï¼Œæ¯•ç«Ÿè¿™ä¹ˆå¤šå¹´æ²¡æ›´å•¦</p>
</blockquote>
<h2 data-id="heading-0"><strong>1. æ ¸å¿ƒæ¶æ„åŸºç¡€ï¼šAndroid å›¾å½¢æ ˆä¸æ•°æ®æµ</strong></h2>
<p>ç†è§£ä»»ä½• Android UI ç»„ä»¶çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œéƒ½å¿…é¡»ä»æ“ä½œç³»ç»Ÿçš„åº•å±‚å›¾å½¢æ¶æ„å¼€å§‹ï¼Œç‰¹åˆ«æ˜¯ç¼“å†²åŒºç®¡ç†ã€Surface æŠ½è±¡ä»¥åŠç³»ç»Ÿåˆæˆå™¨çš„åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-1"><strong>1.1. Android æ¸²æŸ“æ•°æ®æµï¼šBufferQueue, Surface ä¸ Layer æ¨¡å‹</strong></h3>
<p>Android å›¾å½¢ç³»ç»ŸåŸºäº<code>ç”Ÿäº§è€…-æ¶ˆè´¹è€…</code>æ¨¡å‹ã€‚
åœ¨è¿™ç§æ¨¡å‹ä¸­ï¼Œåº”ç”¨æˆ–å…¶æ¸²æŸ“å¼•æ“è¢«è§†ä¸º<code>ç”Ÿäº§è€…</code>ï¼Œè€Œç³»ç»Ÿåˆæˆå™¨ <code>SurfaceFlinger</code> åˆ™å……å½“<code>æ¶ˆè´¹è€…</code>ã€‚å…·ä½“å¤§å®¶å¯ä»¥çœ‹ä¹‹å‰çš„æ–‡ç« ï¼š<a href="https://juejin.cn/post/6944960866404007944#heading-0" target="_blank" title="https://juejin.cn/post/6944960866404007944#heading-0">æ˜¾ç¤ºåŸç†</a></p>
<p>ç®€è¦ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1eb1d3858e0a4552bdcf7f7ab7935270~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXBpZ2ZseQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763902138&amp;x-signature=dv7A%2FgboMU5H0jYcGQ0o2kt6evw%3D" alt="graphics-pipeline.png" loading="lazy"/></p>
<h4 data-id="heading-2"><code>BufferQueue</code></h4>
<p>æ•°æ®äº¤æ¢çš„æ ¸å¿ƒã€‚è¿™æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰é˜Ÿåˆ—ï¼Œä½äº <code>libgui IPC</code> åº“ä¸­ï¼Œç”¨äºè·¨è¿›ç¨‹å®‰å…¨åœ°ä¼ è¾“å›¾å½¢ç¼“å†²åŒºã€‚</p>
<p><code>ç”Ÿäº§è€…</code>è´Ÿè´£å‘é˜Ÿåˆ—ä¸­å†™å…¥å·²æ¸²æŸ“çš„å¸§ï¼Œè€Œ<code>æ¶ˆè´¹è€…</code>åˆ™ä»é˜Ÿåˆ—ä¸­å–å‡ºå¸§è¿›è¡Œåˆæˆã€‚
è¿™ç§æœºåˆ¶çš„è®¾è®¡ç›®æ ‡æ˜¯ç¡®ä¿æ•°æ®çš„åŸå­æ€§ä¼ è¾“å’ŒåŒæ­¥ã€‚</p>
<p><code>æ¶ˆè´¹è€…</code>é€šå¸¸æ˜¯ Android çš„æ ¸å¿ƒåˆæˆå™¨ <code>SurfaceFlinger</code>ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ç»„ä»¶ï¼Œä¾‹å¦‚ <code>SurfaceView</code>ã€<code>SurfaceTexture</code> æˆ– <code>ImageReader</code>ã€‚</p>
<h4 data-id="heading-3"><code>Surface</code></h4>
<p><code>Surface</code> å¯¹è±¡æ˜¯åº”ç”¨è¿›ç¨‹ç”¨äºä¸ <code>BufferQueue</code> äº¤äº’çš„é«˜çº§ API æ¥å£ã€‚
å®ƒæœ¬èº«å¹¶ä¸å­˜å‚¨åƒç´ æ•°æ®ï¼Œè€Œæ˜¯æŒæœ‰ä¸€ä¸ªå¯¹åº•å±‚ <code>IGraphicBufferProducer</code> æ¥å£çš„å¼•ç”¨ã€‚
è¿™ä¸ªæ¥å£å…è®¸åº”ç”¨è·¨è¿›ç¨‹å°†æ¸²æŸ“å®Œæˆçš„å›¾å½¢ç¼“å†²åŒºæ’é˜Ÿç­‰å¾…æ¶ˆè´¹ã€‚</p>
<h4 data-id="heading-4"><code>Layer</code></h4>
<p><code>Layer</code> æ˜¯ <code>SurfaceFlinger</code> å†…éƒ¨ç”¨äºåˆæˆçš„åŸºæœ¬å•ä½ã€‚
å®ƒä¸ <code>Surface</code> ä¸åŒï¼Œ<code>Surface</code> ä¸“æ³¨äºåƒç´ å†…å®¹çš„ç”Ÿäº§ï¼Œè€Œ <code>Layer</code> ä¸“æ³¨äºè¯¥å†…å®¹çš„åˆæˆæ–¹å¼ã€‚
ä¸€ä¸ª <code>Layer</code> å°è£…äº†åˆæˆæ‰€éœ€çš„å…¨éƒ¨å…ƒæ•°æ®å’ŒçŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šZ è½´é¡ºåºï¼ˆå†³å®šé®æŒ¡å…³ç³»ï¼‰ã€å¯è§æ€§ã€æ··åˆæ¨¡å¼ï¼ˆAlpha æ··åˆï¼‰ã€è£å‰ªåŒºåŸŸã€å®Œæ•´çš„ 2D/3D è½¬æ¢çŸ©é˜µï¼ˆTranslation, Rotation, Scaleï¼‰ã€‚</p>
<h4 data-id="heading-5">é›¶æ‹·è´ä¼˜åŒ–</h4>
<p>ç°ä»£ Android å›¾å½¢ç³»ç»Ÿä¸¥é‡ä¾èµ– <code>AHardwareBuffer (API 26+)</code> æ¥å®ç°é«˜æ€§èƒ½ã€ä½å»¶è¿Ÿçš„å›¾å½¢æ•°æ®ä¼ è¾“ã€‚<br/>
<code>AHardwareBuffer</code> ä»£è¡¨ä¸€ç§ç¡¬ä»¶æ”¯æŒçš„ç¼“å†²åŒºï¼Œå¯ä»¥é«˜æ•ˆåœ°åœ¨ä¸åŒç³»ç»Ÿç»„ä»¶å’Œè¿›ç¨‹ä¹‹é—´å…±äº«ï¼Œé€šå¸¸ç”¨äºå®ç°é›¶æ‹·è´æ“ä½œã€‚<br/>
<code>AHardwareBuffer</code>æ”¯æŒå¤šå±‚çº¹ç†æ•°ç»„å’Œç«‹æ–¹ä½“è´´å›¾çš„å®šä¹‰ï¼Œç‰¹åˆ«é€‚ç”¨äº Vulkan åç«¯æˆ–è·¨è¿›ç¨‹å›¾å½¢ä¼ è¾“<br/>
<code>WebView</code> çš„è¿›ç¨‹å¤–å…‰æ …åŒ–ï¼ˆOOPRï¼‰å°±éœ€è¦åˆ©ç”¨<code>AHardwareBuffer</code>æœºåˆ¶å®ç°é«˜æ•ˆçš„ç¼“å†²åŒºå…±äº«ã€‚</p>
<p><strong>ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…çš„â€œè·ç¦»â€ä¸éš”ç¦»</strong>
<code>BufferQueue</code> æœºåˆ¶çš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼Œå®ƒä½¿å¾—<code>ç”Ÿäº§è€…</code>å’Œ<code>æ¶ˆè´¹è€…</code>èƒ½å¤Ÿåœ¨ä¸åŒçš„çº¿ç¨‹ç”šè‡³ä¸åŒçš„è¿›ç¨‹ä¸­ç‹¬ç«‹ã€å¹¶è¡Œåœ°è¿è¡Œã€‚è¿™ç§éš”ç¦»æ€§æ˜¯ Android å®ç°æµç•… UI å’Œé«˜ä¿çœŸåª’ä½“æ’­æ”¾çš„å…³é”®ï¼š</p>
<ol>
<li><strong>çº¿ç¨‹éš”ç¦»ï¼ˆè·ç¦»è¿‘ï¼‰ï¼š</strong> ç”Ÿäº§è€…ï¼ˆå¦‚åº”ç”¨ä¸­çš„ RenderThread æˆ– GLSurfaceView çš„ä¸“ç”¨æ¸²æŸ“çº¿ç¨‹ï¼‰å¯ä»¥åœ¨é«˜é¢‘ä¸‹ï¼ˆå¦‚ 60FPSï¼‰æ¸²æŸ“ï¼Œè€Œä¸ä¼šé˜»å¡æ¥æ”¶è¯¥ç¼“å†²åŒºçš„æ¶ˆè´¹è€…ï¼ˆé€šå¸¸æ˜¯ <code>SurfaceFlinger</code>ï¼‰ã€‚è¿™ç¡®ä¿äº†æ¸²æŸ“ä»»åŠ¡ä¸ä¼šæ‹–ç´¯åº”ç”¨çš„ä¸» UI çº¿ç¨‹ã€‚</li>
<li><strong>è¿›ç¨‹éš”ç¦»ï¼ˆè·ç¦»è¿œï¼‰ï¼š</strong> <code>Surface</code> å¯¹è±¡å®ç°äº† <code>Parcelable</code> æ¥å£ï¼Œå› æ­¤å¯ä»¥å®‰å…¨åœ°é€šè¿‡ <code>Binder IPC</code> æœºåˆ¶è·¨è¶Šè¿›ç¨‹è¾¹ç•Œä¼ è¾“ã€‚è¿™ç§èƒ½åŠ›ä½¿å¾—ä¸€ä¸ªç‹¬ç«‹è¿›ç¨‹çš„æ¸²æŸ“ç»“æœèƒ½å¤Ÿç›´æ¥æäº¤ç»™å¦ä¸€ä¸ªè¿›ç¨‹ä¸­çš„æ¥æ”¶è€…ï¼ˆä¾‹å¦‚ <code>SurfaceFlinger</code> æˆ– <code>SurfaceView</code>ï¼‰ã€‚</li>
</ol>
<p><strong>SF ä¹‹å¤–çš„æ¶ˆè´¹è€… (åº”ç”¨ç¨‹åºä¸»åŠ¨é€‰æ‹©çš„æ•°æ®å¤„ç†æµ)</strong></p>
<ol>
<li><strong>SurfaceTexture (GPU çº¹ç†æ¶ˆè´¹è€…):</strong>
<ul>
<li><strong>åœºæ™¯ï¼š</strong> å®æ—¶ç›¸æœºé¢„è§ˆã€å°†è§†é¢‘æµä½œä¸ºçº¹ç†åº”ç”¨åˆ° 3D æ¸¸æˆæˆ– AR åœºæ™¯ä¸­ã€‚</li>
<li><strong>æœºåˆ¶ï¼š</strong> <code>SurfaceTexture</code> å……å½“ <code>BufferQueue</code> çš„æ¶ˆè´¹è€…ã€‚å®ƒæ¥æ”¶ç”Ÿäº§è€…ï¼ˆå¦‚ç›¸æœºé©±åŠ¨æˆ–è§†é¢‘è§£ç å™¨ï¼‰æäº¤çš„å¸§æ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª <strong>OpenGL ES çº¹ç†</strong>ï¼Œä¾›åº”ç”¨å†…çš„ GLES çº¿ç¨‹ç»‘å®šå’Œä½¿ç”¨ã€‚è¿™å…è®¸å¼€å‘è€…åœ¨ GPU ä¸Šç›´æ¥å¤„ç†è¿™äº›æ•°æ®ï¼ˆä¾‹å¦‚åº”ç”¨æ»¤é•œã€è¿›è¡Œå‡ ä½•å˜æ¢ï¼‰ï¼Œ<strong>è€Œæ— éœ€å°†æ•°æ®æäº¤ç»™ SurfaceFlinger è¿›è¡Œç³»ç»Ÿåˆæˆ</strong>ã€‚è¿™ç§è·¯å¾„å…è®¸åº”ç”¨åœ¨æœ¬åœ° GPU ä¸Šå®Œæˆæ¸²æŸ“å’Œå¤„ç†ï¼Œä½†æœ€ç»ˆå¦‚æœéœ€è¦æ˜¾ç¤ºï¼Œåº”ç”¨é€šå¸¸éœ€è¦å°†è¿™ä¸ª<strong>å¤„ç†åçš„çº¹ç†</strong>ç»˜åˆ¶åˆ°è‡ªå·±çš„ä¸» <code>Surface</code> ä¸Šï¼ˆæœ€ç»ˆä»ç”± SF åˆæˆï¼‰ã€‚</li>
</ul>
</li>
<li><strong>ImageReader (æ•°æ®å¤„ç†æ¶ˆè´¹è€…):</strong>
<ul>
<li><strong>åœºæ™¯ï¼š</strong> æˆªå±ã€å›¾åƒåˆ†æï¼ˆå¦‚äººè„¸è¯†åˆ«ï¼‰ã€è‡ªå®šä¹‰ç›¸æœºæ•è·åŸå§‹å¸§ã€‚</li>
<li><strong>æœºåˆ¶ï¼š</strong> ImageReader ä¹Ÿå……å½“ BufferQueue çš„æ¶ˆè´¹è€…ã€‚å®ƒå…è®¸åº”ç”¨ç¨‹åºä»é˜Ÿåˆ—ä¸­è·å–å›¾åƒæ•°æ®ï¼ˆImage å¯¹è±¡ï¼‰ï¼Œé€šå¸¸æ˜¯åŸå§‹åƒç´ æ•°æ®ã€‚æ•°æ®éšåè¢«å‘é€åˆ°åº”ç”¨çš„ CPU/NDK å±‚ï¼Œç”¨äºè¿›ä¸€æ­¥çš„è½¯ä»¶å¤„ç†ã€åˆ†ææˆ–ä¿å­˜ï¼Œ<strong>å®Œå…¨ç»•è¿‡äº† Android çš„ç¡¬ä»¶åŠ é€Ÿæ˜¾ç¤ºè·¯å¾„</strong>ï¼Œæ˜¯çº¯ç²¹çš„æ•°æ®è·å–å’Œå¤„ç†é€šé“ã€‚</li>
</ul>
</li>
</ol>
<p><strong>SF è·¨è¿›ç¨‹/è·¨çº¿ç¨‹èƒ½åŠ›çš„å¸¸è§ç¤ºä¾‹ (æ˜¾ç¤ºåœºæ™¯)</strong></p>
<ul>
<li><strong>è§†é¢‘æ’­æ”¾ (SurfaceView åœºæ™¯):</strong>
<ul>
<li><strong>ç”Ÿäº§è€…ï¼š</strong> è§†é¢‘è§£ç å™¨ï¼ˆé€šå¸¸æ˜¯è¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹ä¸­çš„ç¡¬ä»¶æˆ–ç³»ç»ŸæœåŠ¡ï¼‰ã€‚</li>
<li><strong>æ¶ˆè´¹è€…ï¼š</strong> SurfaceFlingerã€‚</li>
<li><strong>ä¼˜åŠ¿ï¼š</strong> è§£ç å™¨å°†è§†é¢‘å¸§ç›´æ¥ç»˜åˆ¶åˆ°ä» SurfaceView è·å¾—çš„ Surface ä¸Šã€‚ç”±äº SurfaceFlinger ç›´æ¥ä» BufferQueue è·å–ç¼“å†²åŒºï¼Œæ•´ä¸ªè¿‡ç¨‹<strong>å®Œå…¨ç»•è¿‡äº†åº”ç”¨çš„ä¸» CPU/GPU ç®¡çº¿</strong>ã€‚è¿™å®ç°äº†é›¶æ‹·è´çš„æ•°æ®è·¯å¾„ï¼Œå¯¹é«˜ååé‡çš„è§†é¢‘å¸§ä¼ è¾“è‡³å…³é‡è¦ï¼Œç¡®ä¿äº†ä½å»¶è¿Ÿå’Œä½åŠŸè€—ã€‚</li>
</ul>
</li>
<li><strong>å¤šçª—å£/ç³»ç»Ÿ UI åˆæˆ (SurfaceFlinger æ ¸å¿ƒåŠŸèƒ½):</strong>
<ul>
<li><strong>ç”Ÿäº§è€…ï¼š</strong> åº”ç”¨ A çš„ä¸»æ¸²æŸ“ Layer (Native View/Compose çš„ RenderThread æäº¤)ï¼›åº”ç”¨ B çš„ç‹¬ç«‹ Layerï¼›ç³»ç»ŸçŠ¶æ€æ å’Œå¯¼èˆªæ  Layerã€‚</li>
<li><strong>æ¶ˆè´¹è€…ï¼š</strong> SurfaceFlingerã€‚</li>
<li><strong>ä¼˜åŠ¿ï¼š</strong> SurfaceFlinger æ¥æ”¶æ¥è‡ª<strong>å¤šä¸ªä¸åŒåº”ç”¨è¿›ç¨‹</strong>å’Œ<strong>ç³»ç»Ÿè¿›ç¨‹</strong>çš„ç‹¬ç«‹ Layerï¼Œå¹¶ç®¡ç†å®ƒä»¬çš„ Z è½´é¡ºåºã€ä½ç½®å’Œå˜æ¢ã€‚è¿™ç§éš”ç¦»ç¡®ä¿äº†å³ä½¿ä¸€ä¸ªåº”ç”¨å´©æºƒï¼Œä¹Ÿä¸ä¼šå½±å“å…¶ä»–åº”ç”¨æˆ–ç³»ç»Ÿ UI çš„æ˜¾ç¤ºã€‚</li>
</ul>
</li>
<li><strong>è¿›ç¨‹å¤– WebView æ¸²æŸ“ (OOPR æ¨¡å¼):</strong>
<ul>
<li><strong>ç”Ÿäº§è€…ï¼š</strong> æ²™ç®±éš”ç¦»çš„ Chrome Render Processï¼ˆä¸€ä¸ªç‹¬ç«‹è¿›ç¨‹ï¼‰ã€‚</li>
<li><strong>æ¶ˆè´¹è€…ï¼š</strong> SurfaceFlingerã€‚</li>
<li><strong>ä¼˜åŠ¿ï¼š</strong> WebView çš„å†…å®¹æ¸²æŸ“å‘ç”Ÿåœ¨åº”ç”¨ä¸»è¿›ç¨‹ä¹‹å¤–ã€‚æ¸²æŸ“è¿›ç¨‹å°†ç»“æœæäº¤åˆ°ä¸“ç”¨çš„ Surface ç¼“å†²åŒºï¼ŒSurfaceFlinger å°†å…¶ä½œä¸ºç‹¬ç«‹ Layer åˆæˆã€‚è¿™æä¾›äº†æä½³çš„å®‰å…¨æ€§å’Œç¨³å®šæ€§éš”ç¦»ï¼Œå³ä½¿ Web å†…å®¹ä¸­çš„ JavaScript å¯¼è‡´æ¸²æŸ“è¿›ç¨‹å´©æºƒï¼Œä¸»æœºåº”ç”¨ä¹Ÿå¯ä»¥é€šè¿‡å›è°ƒæœºåˆ¶æ¢å¤ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-6"><strong>1.2. ç³»ç»Ÿåˆæˆå™¨ï¼š<code>SurfaceFlinger</code> ä¸ç¡¬ä»¶åˆæˆå™¨ (<code>HWC</code>) çš„è§’è‰²</strong></h3>
<p><code>SurfaceFlinger (SF)</code> æ˜¯ Android çš„æ ¸å¿ƒç³»ç»ŸæœåŠ¡ï¼Œå……å½“æ‰€æœ‰å¯è§ UI å…ƒç´ çš„æœ€ç»ˆåˆæˆå™¨ã€‚</p>
<h4 data-id="heading-7"><code>SurfaceFlinger (SF)</code> çš„èŒè´£</h4>
<p><code>SF</code> æ¥æ”¶æ¥è‡ªæ‰€æœ‰å¯è§çª—å£å’Œç³»ç»Ÿ UI ç»„ä»¶çš„å›¾å½¢ç¼“å†²åŒºï¼Œè¿™äº›ç¼“å†²åŒºé€šè¿‡ <code>Layer</code> çš„å½¢å¼æäº¤ç»™ <code>SF</code> ã€‚<br/>
<code>SF</code> çš„ä»»åŠ¡æ˜¯ï¼š</p>
<ul>
<li>ç®¡ç†æ‰€æœ‰ <code>Layer</code> çš„ Z è½´é¡ºåºã€ä½ç½®ã€å˜æ¢å’Œå‰ªè£ã€‚</li>
<li>æ ¹æ® <code>Layer</code> çš„å±æ€§ï¼ˆä¾‹å¦‚é€æ˜åº¦ã€ç›¸å¯¹ Z è½´ã€åœ†è§’ç­‰ï¼‰å†³å®šå¦‚ä½•è¿›è¡Œåˆæˆã€‚</li>
<li>å°†æœ€ç»ˆåˆæˆçš„ç»“æœå‘é€ç»™æ˜¾ç¤ºç¡¬ä»¶ã€‚</li>
</ul>
<h4 data-id="heading-8"><code>SurfaceFlinger</code> çš„æ ¸å¿ƒåœ°ä½</h4>
<p>æ— è®ºé‡‡ç”¨å“ªç§æ¸²æŸ“æŠ€æœ¯æ ˆï¼ˆ<code>Native View</code>, <code>Compose</code>, <code>Flutter</code>, <code>WebView</code>, <code>GLSurfaceView</code>ï¼‰ï¼Œå®ƒä»¬æœ€ç»ˆéƒ½å¿…é¡»é€šè¿‡å„è‡ªçš„ <code>Surface</code> æ¥å£å‘ <code>BufferQueue</code> æäº¤æ¸²æŸ“å®Œæˆçš„å›¾å½¢ç¼“å†²åŒºã€‚<br/>
å› æ­¤ï¼Œå¯ä»¥ç¡®å®šï¼Œåœ¨ Android å¹³å°ä¸Šï¼Œæ‰€æœ‰äº”ç§æŠ€æœ¯è·¯çº¿çš„æ¸²æŸ“ç»“æœï¼Œéƒ½ä¼šä»¥ç‹¬ç«‹çš„æˆ–åº”ç”¨ä¸» Layer çš„å½¢å¼ï¼Œç»Ÿä¸€ç”± <code>SurfaceFlinger</code> æ¥æ¥æ”¶å’Œå¤„ç†ï¼Œè¿™æ˜¯å®ƒä»¬æœ€ç»ˆå¾—ä»¥åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„å¿…ç»ä¹‹è·¯ã€‚</p>
<h4 data-id="heading-9">ç¡¬ä»¶åˆæˆå™¨ (HWC) ä¼˜åŒ–</h4>
<p>ä¸ºäº†æœ€å¤§åŒ–æ€§èƒ½å’Œé™ä½åŠŸè€—ï¼Œ<code>SurfaceFlinger</code> å€¾å‘äºå°†åˆæˆä»»åŠ¡å¸è½½ç»™ç¡¬ä»¶åˆæˆå™¨ï¼ˆ<code>Hardware Composer, HWC</code>ï¼‰ã€‚<br/>
<code>HWC</code> æ˜¯ä¸€ä¸ª SoC å‚å•†å®ç°çš„ HALï¼ˆç¡¬ä»¶æŠ½è±¡å±‚ï¼‰æ¨¡å—ï¼Œèƒ½å¤Ÿç›´æ¥å¤„ç† Layer çš„åˆæˆï¼Œé€šå¸¸ä»¥é›¶æ‹·è´çš„æ–¹å¼æ“ä½œç¼“å†²åŒºã€‚è¿™æå¤§åœ°æé«˜äº†æ•ˆç‡ã€‚<br/>
åªæœ‰å½“ <code>Layer</code> å…·æœ‰å¤æ‚çš„æ··åˆã€å˜æ¢æˆ–ç‰¹æ•ˆï¼Œ<code>HWC</code> æ— æ³•ç›´æ¥å¤„ç†æ—¶ï¼Œ<code>SF</code> æ‰ä¼šé€€å›åˆ°ä½¿ç”¨ GPU è¿›è¡Œåˆæˆï¼ˆGPU Compositingï¼‰ï¼Œè¿™ä¼šå¢åŠ ç³»ç»Ÿçš„æ¸²æŸ“å¼€é”€ã€‚</p>
<h3 data-id="heading-10"><strong>1.3. ç»˜åˆ¶æŒ‡ä»¤æ¨¡å¼å¯¹æ¯”ï¼šå³æ—¶ä¸ä¿ç•™</strong></h3>
<p>UI æ¡†æ¶åœ¨ç”Ÿæˆç»˜å›¾æŒ‡ä»¤æ—¶ï¼Œä¸»è¦éµå¾ªä¸¤ç§æ¨¡å¼ï¼šä¿ç•™æ¨¡å¼ (Retained Mode) å’Œå³æ—¶æ¨¡å¼ (Immediate Mode)ã€‚</p>
<h4 data-id="heading-11">ä¿ç•™æ¨¡å¼ (Retained Mode)</h4>
<p>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒUI å…ƒç´ çš„ç»“æ„å’Œå±æ€§è¢«å­˜å‚¨ä¸ºä¸€ä¸ªåœºæ™¯å›¾æˆ–å¯¹è±¡å±‚çº§ç»“æ„ï¼ˆåœ¨ Android <code>Native/Compose</code> ä¸­ç§°ä¸º <code>RenderNode</code> æˆ– <code>Display List</code>ï¼‰ã€‚å½“ UI çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç³»ç»Ÿåªéœ€æ›´æ–°åœºæ™¯å›¾ä¸­å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯é‡æ–°æ‰§è¡Œæ‰€æœ‰ç»˜å›¾æŒ‡ä»¤ã€‚è¿™ç§æ¨¡å¼éå¸¸é€‚åˆåŠ¨æ€æˆ–é¢‘ç¹å˜åŒ–çš„ UIï¼Œå› ä¸ºå®ƒå…è®¸æ›´çµæ´»å’Œé«˜æ•ˆçš„æ›´æ–° ã€‚Android Native Views å’Œ Jetpack Compose éƒ½æ˜¯åŸºäºä¿ç•™æ¨¡å¼çš„å®ç°ã€‚</p>
<h4 data-id="heading-12">å³æ—¶æ¨¡å¼ (Immediate Mode)</h4>
<p>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ¯ä¸€æ¬¡å¸§æ›´æ–°ï¼Œåº”ç”¨ç¨‹åºéƒ½éœ€è¦é‡æ–°å‘é€å®Œæ•´çš„ç»˜å›¾æŒ‡ä»¤åºåˆ—ã€‚ç³»ç»Ÿä¸å­˜å‚¨ UI çŠ¶æ€å›¾ã€‚å³æ—¶æ¨¡å¼è¦æ±‚å¼€å‘è€…å¯¹åº•å±‚çš„å›¾å½¢ APIï¼ˆå¦‚ OpenGL ES æˆ– Skia Canvasï¼‰æœ‰æ›´ç›´æ¥çš„æ§åˆ¶ã€‚å®ƒåœ¨é™æ€ UI ä¸­å¯èƒ½èµ„æºå ç”¨è¾ƒå°‘ï¼Œä½†åœ¨åŠ¨æ€ UI ä¸­å¯èƒ½æ€§èƒ½è¾ƒå·®ï¼Œé™¤éåº•å±‚å¼•æ“è¿›è¡Œäº†é«˜æ•ˆä¼˜åŒ–ï¼ˆå¦‚ Flutter çš„ Skiaï¼‰ã€‚<br/>
GLSurfaceView å’Œ Flutter çš„æ ¸å¿ƒæ¸²æŸ“æµç¨‹å±äºå³æ—¶æ¨¡å¼ã€‚</p>
<p><strong>ç»˜åˆ¶æ¨¡å¼ (Immediate vs. Retained) ç‰¹æ€§å¯¹æ¯”</strong></p>






























<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">ä¿ç•™æ¨¡å¼ (Retained Mode)</th><th align="left">å³æ—¶æ¨¡å¼ (Immediate Mode)</th></tr></thead><tbody><tr><td align="left"><strong>æ ¸å¿ƒæœºåˆ¶</strong></td><td align="left">åœºæ™¯å›¾/æ˜¾ç¤ºåˆ—è¡¨ (RenderNode) å­˜å‚¨çŠ¶æ€</td><td align="left">ç«‹å³æ‰§è¡Œç»˜å›¾æŒ‡ä»¤ï¼Œä¸å­˜å‚¨çŠ¶æ€</td></tr><tr><td align="left"><strong>æ›´æ–°æ•ˆç‡</strong></td><td align="left">é«˜æ•ˆ (ä»…é‡ç»˜å˜åŠ¨éƒ¨åˆ†)</td><td align="left">ä¾èµ–æ¡†æ¶/å¼•æ“ (Skia ä¼˜åŒ–äº†åº•å±‚æ•ˆç‡)</td></tr><tr><td align="left"><strong>çº¿ç¨‹éš”ç¦»</strong></td><td align="left">RenderThread æœºåˆ¶æä¾›åŸç”Ÿçš„ CPU/GPU éš”ç¦»</td><td align="left">éœ€ç”¨æˆ·/å¼•æ“è‡ªè¡Œå®ç°ä¸“ç”¨ Raster/GLES çº¿ç¨‹</td></tr><tr><td align="left"><strong>ä»£è¡¨æŠ€æœ¯</strong></td><td align="left">Android Native View, Jetpack Compose</td><td align="left">Flutter (Skia), GLSurfaceView</td></tr></tbody></table>
<h2 data-id="heading-13"><strong>2. ä¿ç•™æ¨¡å¼ä¸‹çš„åŸç”Ÿ UI æ¸²æŸ“ç®¡çº¿ï¼šNative View ä¸ Compose</strong></h2>
<p>Android åŸç”Ÿ UI æ¡†æ¶ï¼ˆæ— è®ºæ˜¯åŸºäº View è¿˜æ˜¯ Composeï¼‰éƒ½ä¾èµ–äº AOSP çš„ä¿ç•™æ¨¡å¼æ¸²æŸ“æ¶æ„ï¼Œæ ¸å¿ƒåœ¨äº <code>RenderThread</code>ã€‚</p>
<h3 data-id="heading-14"><strong>2.1. Android åŸç”Ÿ View æ¸²æŸ“æµç¨‹ï¼šRecord, Execute ä¸ RenderThread</strong></h3>
<p>å½“ <code>View</code> å±‚æ¬¡ç»“æ„éœ€è¦æ›´æ–°æ—¶ï¼Œæ¸²æŸ“æµç¨‹åœ¨åº”ç”¨è¿›ç¨‹å†…åˆ†ä¸¤ä¸ªä¸»è¦é˜¶æ®µè¿›è¡Œï¼š</p>
<h4 data-id="heading-15">1. UI çº¿ç¨‹ï¼šè®°å½• (<code>Record</code>) é˜¶æ®µ</h4>
<p>UI çº¿ç¨‹ï¼ˆæˆ–ä¸»çº¿ç¨‹ï¼‰è´Ÿè´£æ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘ã€å¸ƒå±€è®¡ç®—ï¼ˆMeasure å’Œ Layoutï¼‰ï¼Œä»¥åŠç»˜å›¾æŒ‡ä»¤çš„è®°å½•ã€‚åœ¨ç¡¬ä»¶åŠ é€Ÿå¼€å¯çš„å‰æä¸‹ï¼Œ<code>View#draw(Canvas)</code>çš„è°ƒç”¨ä¸ä¼šç›´æ¥æ‰§è¡Œ GPU æ¸²æŸ“ï¼Œè€Œæ˜¯å°†ç»˜å›¾æ“ä½œè®°å½•åˆ°å…³è”çš„ <code>RenderNode</code>ï¼ˆå³ <code>Display List</code>ï¼‰ä¸­ã€‚</p>
<ul>
<li><strong>æ€§èƒ½é£é™©ï¼š</strong> å°½ç®¡è®°å½• Display List é€šå¸¸å¾ˆå¿«ï¼Œä½†å¦‚æœåº”ç”¨ä»£ç åœ¨æ­¤é˜¶æ®µæ¶‰åŠå¤æ‚çš„ CPU å¯†é›†å‹æ“ä½œï¼Œä¾‹å¦‚ç»˜åˆ¶åˆ° Bitmapï¼ˆè¿™ä¼šè§¦å‘ CPU è½¯ä»¶æ¸²æŸ“ï¼‰ï¼Œåˆ™ä¼šå ç”¨ UI çº¿ç¨‹æ—¶é—´ï¼Œå¯èƒ½å¯¼è‡´å¸§ç‡ä¸‹é™ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F476477559" target="_blank" title="https://zhuanlan.zhihu.com/p/476477559" ref="nofollow noopener noreferrer">JankæŒ‡æ ‡</a>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-16">2. RenderThreadï¼šæ‰§è¡Œ (Execute) é˜¶æ®µ</h4>
<p><code>RenderThread</code> æ˜¯ä¸€ä¸ªç³»ç»Ÿç®¡ç†çš„æ–°çº¿ç¨‹ï¼Œè‡ª Android Lollipop å¼•å…¥ï¼Œæ—¨åœ¨å°† GPU ç›¸å…³çš„é‡å‹å·¥ä½œè´Ÿè½½ä» UI çº¿ç¨‹åˆ†ç¦»å‡ºæ¥ã€‚</p>
<ul>
<li><strong>JANK éš”ç¦»ï¼š</strong> <code>RenderThread</code> çš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼Œå³ä½¿ UI çº¿ç¨‹è¢«é˜»å¡ï¼ˆä¾‹å¦‚ï¼Œå› åƒåœ¾å›æ”¶æˆ–å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼‰ï¼Œå®ƒä»èƒ½ç»§ç»­æ‰§è¡Œå…ˆå‰æäº¤çš„ Display Listï¼Œä»è€Œä¿æŒåŠ¨ç”»ã€è§¦æ‘¸åé¦ˆå’Œ <code>Material Design</code> ç‰¹æ•ˆï¼ˆå¦‚æ¶Ÿæ¼ªæ•ˆæœï¼‰çš„å¹³æ»‘è¿è¡Œã€‚</li>
<li><strong>æ‰§è¡Œä¸ä¼˜åŒ–ï¼š</strong> <code>RenderThread</code> æ¥æ”¶ UI çº¿ç¨‹æäº¤çš„ <code>RenderNode</code>ï¼Œè´Ÿè´£å¯¹æŒ‡ä»¤è¿›è¡Œä¼˜åŒ–ï¼ˆä¾‹å¦‚ï¼Œæ‰¹å¤„ç†ï¼‰ï¼Œå°†å®ƒä»¬ç¿»è¯‘æˆä½çº§çš„ GPU API è°ƒç”¨ï¼ˆGLES æˆ– Vulkanï¼‰ï¼Œå¹¶æœ€ç»ˆé€šè¿‡ <code>eglSwapBuffers()</code> æäº¤åˆ° <code>Surface</code> çš„ <code>BufferQueue</code> ä¸­ã€‚</li>
<li><strong>æ½œåœ¨çš„æ€§èƒ½é™·é˜±ï¼š</strong> æŸäº› <code>Canvas</code> æ“ä½œï¼Œå¦‚ç»˜åˆ¶éå¸¸å¤§çš„æˆ–å¤æ‚çš„ <code>Path</code> å¯¹è±¡ï¼Œåœ¨ UI çº¿ç¨‹ä¸Šçš„è®°å½•æˆæœ¬å¾ˆä½ï¼Œä½†åœ¨ <code>RenderThread</code> æ‰§è¡Œæ—¶å¯èƒ½è§¦å‘æ˜‚è´µçš„ CPU æˆ– GPU è®¡ç®—ï¼Œå¯¼è‡´ <code>RenderThread</code> æˆä¸ºæ–°çš„ç“¶é¢ˆã€‚ç³»ç»Ÿåˆ†æå·¥å…·ï¼ˆå¦‚ Systraceï¼‰å¸¸ç”¨äºè¯†åˆ«è¿™ç±»é—®é¢˜ã€‚</li>
</ul>
<p><strong>æ¸²æŸ“é©±åŠ¨é€»è¾‘ä¸ VSync ä¾èµ–</strong></p>
<ul>
<li><strong>æ¸²æŸ“çº¿ç¨‹ï¼š</strong> ä¸“ç”¨ <code>RenderThread</code>ã€‚</li>
<li><strong>é©±åŠ¨æœºåˆ¶ï¼š</strong> <strong>å¼ºä¾èµ– VSync ä¿¡å·ã€‚</strong> å½“åº”ç”¨éœ€è¦æ¸²æŸ“æ—¶ï¼Œç³»ç»Ÿä¼šå‘ <code>Choreographer</code> æ³¨å†Œä¸€ä¸ªå›è°ƒï¼Œç­‰å¾… <code>VSync</code> ä¿¡å·çš„åˆ°æ¥ã€‚</li>
<li><strong>é¢‘ç‡æ§åˆ¶ï¼š</strong> æ¸²æŸ“é¢‘ç‡ä¸»è¦ç”±ç³»ç»Ÿ <code>VSync é¢‘ç‡</code>ï¼ˆé€šå¸¸ 60Hz æˆ– 120Hzï¼‰æ§åˆ¶ã€‚åº”ç”¨é€šè¿‡ <code>View.invalidate()</code> æ ‡è®° <code>View</code> ä¸ºè„ï¼Œä½†å®é™…çš„ç»˜åˆ¶æ‰§è¡Œå§‹ç»ˆä¸ <code>VSync</code> åŒæ­¥ï¼Œä»¥é¿å…ç”»é¢æ’•è£‚ã€‚</li>
</ul>
<h4 data-id="heading-17">åŸç”Ÿ View æ¸²æŸ“æµç¨‹</h4>
<p>æ—¶åºå›¾ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/798ae6ffa43b42c194fe7292b8475ea0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXBpZ2ZseQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763902138&amp;x-signature=0lmRV1St0QkWybG1WhxQYVmJK%2BA%3D" alt="image.png" loading="lazy"/></p>
<p>è¯¥æµç¨‹æè¿°äº† Native View ä»è¾“å…¥äº‹ä»¶åˆ°æœ€ç»ˆæ˜¾ç¤ºçš„åºåˆ—ï¼š</p>
<ol>
<li><strong>Application UI Threadï¼š</strong> æ‰§è¡Œ <code>View</code> å±‚æ¬¡ç»“æ„çš„ <code>Measure</code> &amp; <code>Layout</code> é˜¶æ®µï¼Œç¡®å®šæ‰€æœ‰ç»„ä»¶çš„å°ºå¯¸å’Œä½ç½®ã€‚</li>
<li><strong>Application UI Threadï¼š</strong> æ‰§è¡Œ <code>Record</code> é˜¶æ®µï¼Œè°ƒç”¨ <code>View#draw</code>ï¼Œå°†æ‰€æœ‰ç»˜å›¾æ“ä½œï¼ˆå¦‚ç»˜åˆ¶æ–‡æœ¬ã€å½¢çŠ¶ï¼‰è®°å½•åˆ° <code>RenderNode (Display List)</code> ä¸­ã€‚</li>
<li><strong>Application UI Thread -&gt; RenderThreadï¼š</strong> åˆ†å‘è®°å½•å¥½çš„ <code>RenderNode</code> æ•°æ®åˆ°ç‹¬ç«‹çš„ <strong>RenderThread</strong>ã€‚</li>
<li><strong>RenderThreadï¼š</strong> ä¼˜åŒ– <code>RenderNode</code> ä¸­çš„æŒ‡ä»¤ï¼Œå°†å…¶è½¬åŒ–ä¸ºä½çº§ GPU è°ƒç”¨ (GLES æˆ– Vulkan)ã€‚</li>
<li><strong>RenderThread -&gt; GPUï¼š</strong> å‘å‡º <strong>å…‰æ …åŒ–æŒ‡ä»¤</strong>ï¼Œåœ¨ <code>VSync</code> ä¿¡å·é©±åŠ¨ä¸‹ï¼Œåœ¨åº”ç”¨ç‹¬å çš„ç¼“å†²åŒºä¸­ç»˜åˆ¶ View çš„åƒç´ å†…å®¹ã€‚<strong>æ­¤æ­¥éª¤åœ¨åº”ç”¨è¿›ç¨‹å†…å®Œæˆæ‰€æœ‰ UI å…ƒç´ çš„ç»˜åˆ¶ã€‚</strong></li>
<li><strong>RenderThread -&gt; SurfaceFlingerï¼š</strong> é€šè¿‡ <code>EGLSurface</code> è°ƒç”¨ <code>eglSwapBuffers()</code>ï¼Œå°†ç»˜åˆ¶å®Œæˆçš„ç¼“å†²åŒºæäº¤ç»™ç³»ç»Ÿåˆæˆå™¨<code>SF</code>ã€‚</li>
<li><strong>SurfaceFlinger/HWCï¼š</strong> æ¥æ”¶åº”ç”¨ç¼“å†²åŒºï¼Œè¿›è¡Œ <strong>ç³»ç»Ÿçº§åˆæˆ (Composition)</strong> å’Œæœ€ç»ˆæ˜¾ç¤ºã€‚<code>HWC</code> ç¡®å®šæœ€ä½³åˆæˆè·¯å¾„ï¼Œå°†æ­¤ <code>Layer</code> ä¸çŠ¶æ€æ ã€å¯¼èˆªæ ã€å…¶ä»–åº”ç”¨çª—å£ç­‰æ‰€æœ‰ <code>Layer</code> åˆå¹¶ï¼Œå¹¶æœ€ç»ˆæ˜¾ç¤ºåˆ°å±å¹•ä¸Šã€‚</li>
</ol>
<h3 data-id="heading-18"><strong>2.2. Jetpack Compose æ¸²æŸ“ç®¡çº¿ï¼šå£°æ˜å¼ä¸ GraphicsLayer ä¼˜åŒ–</strong></h3>
<p><code>Jetpack Compose</code> é‡‡ç”¨äº†å£°æ˜å¼ UI æ¨¡å‹ï¼Œå…¶æ¸²æŸ“ç®¡çº¿éµå¾ª <code>Composition</code>ï¼ˆèŠ‚ç‚¹åˆ›å»ºï¼‰ã€<code>Measure</code>ã€<code>Layout</code>ï¼Œæœ€ç»ˆåˆ°è¾¾ <code>Drawing</code> é˜¶æ®µã€‚å°½ç®¡å…¶ç¼–ç¨‹èŒƒå¼å‘ç”Ÿäº†æ ¹æœ¬æ€§å˜åŒ–ï¼Œä½†åœ¨ Android å¹³å°ä¸Šï¼Œ<code>Compose</code> æœ€ç»ˆä»å¤ç”¨ <code>Native View</code> çš„åº•å±‚ç¡¬ä»¶åŠ é€Ÿæœºåˆ¶ã€‚</p>
<h4 data-id="heading-19"><code>Draw</code> é˜¶æ®µä¸ <code>Canvas</code> çš„å…³è”</h4>
<p><code>Compose</code> æ¡†æ¶åœ¨ <code>Draw</code> é˜¶æ®µï¼Œåº•å±‚ä»ç„¶ä¾èµ–äº <code>View</code> ç³»ç»Ÿçš„ <code>Canvas API</code> è¿›è¡Œå®é™…çš„åƒç´ æ“ä½œ ã€‚<br/>
ç„¶è€Œï¼Œ<code>Compose</code> é€šè¿‡ <code>DrawScope</code> æŠ½è±¡ç®€åŒ–äº†ä¼ ç»Ÿçš„ <code>View</code> ç»˜å›¾æ¨¡å‹ï¼Œä¾‹å¦‚æ›¿å¼€å‘è€…ç®¡ç†å¤æ‚çš„ <code>Paint</code> å¯¹è±¡é…ç½®ï¼Œç¡®ä¿æ€§èƒ½ä¼˜åŒ–ã€‚<br/>
<strong>GraphicsLayer ä¸ RenderNode çš„å¤ç”¨</strong><br/>
<code>Compose</code>é€šè¿‡ <code>Modifier.graphicsLayer</code> å¼•å…¥äº†ä¸ <code>Native View</code> ä¸­ <code>RenderNode</code> ç›¸ä¼¼çš„æ¦‚å¿µ ã€‚<br/>
ä½¿ç”¨ <code>graphicsLayer</code> æ„å‘³ç€ <code>Composable</code> ç»„ä»¶çš„ç»˜å›¾æŒ‡ä»¤ä¼šè¢«æ•è·å¹¶ç¼“å­˜åˆ°ä¸€ä¸ª <code>Layer</code> ä¸­ ã€‚</p>
<ul>
<li><strong>æ€§èƒ½æ”¶ç›Šï¼š</strong> è¿™ç§ç¼“å­˜æœºåˆ¶å…è®¸æ¸²æŸ“ç®¡çº¿é«˜æ•ˆåœ°é‡å‘è¿™äº›ç»˜å›¾æŒ‡ä»¤ï¼Œå°¤å…¶é€‚ç”¨äºé¢‘ç¹çš„å‡ ä½•å˜æ¢ã€é€æ˜åº¦å˜åŒ–æˆ–ç¼©æ”¾åŠ¨ç”»ã€‚ä¸€æ—¦æŒ‡ä»¤è¢«æ•è·ï¼ŒRenderThread å¯ä»¥åœ¨ä¸ä¾èµ– UI çº¿ç¨‹é‡æ–°æ‰§è¡Œ Composable ä»£ç çš„æƒ…å†µä¸‹ï¼Œé‡å¤æ‰§è¡Œè¿™äº›å·²ç¼“å­˜çš„æŒ‡ä»¤ã€‚</li>
</ul>
<h4 data-id="heading-20">Offscreen Rasterization (ç¦»å±å…‰æ …åŒ–)</h4>
<p><code>graphicsLayer</code> çš„è¿›ä¸€æ­¥ä¼˜åŒ–æ˜¯ç¦»å±å…‰æ …åŒ–ï¼Œä¹Ÿè¢«ç§°ä¸ºçº¹ç†ç¼“å­˜ã€‚<br/>
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>RenderThread</code> ä¼šæ‰§è¡Œ <code>RenderNode</code> ä¸­çš„æŒ‡ä»¤ï¼Œå¹¶å°†ç»“æœæ•è·åˆ°ä¸€ä¸ªç¦»å± GPU çº¹ç†ä¸­ã€‚<br/>
åœ¨åç»­çš„å¸§ä¸­ï¼Œ<code>RenderThread</code> åªéœ€è¦å‘é€ä¸€ä¸ªç®€å•çš„æŒ‡ä»¤ï¼šâ€œç»˜åˆ¶è¿™ä¸ªçº¹ç†â€ï¼Œè¿™æå¤§å‡å°‘äº† CPU å’Œ GPU çš„é‡å¤è®¡ç®—ï¼Œå°¤å…¶å¯¹äºå¤æ‚çš„ã€ä¸å¸¸å˜åŒ–çš„ç»„ä»¶ï¼ˆå¦‚ <code>LazyList</code> ä¸­æ»šåŠ¨çš„æ¡ç›®ï¼‰çš„æ€§èƒ½ä¼˜åŒ–è‡³å…³é‡è¦ã€‚</p>
<h4 data-id="heading-21">æ¸²æŸ“ç®¡çº¿æ€§èƒ½ç“¶é¢ˆèšç„¦</h4>
<p>åŸç”Ÿ View å’Œ Compose å…±äº« RenderThread æ‰§è¡Œç®¡çº¿ï¼Œè¿™è¡¨æ˜å®ƒä»¬çš„ GPU æ€§èƒ½ä¼˜åŒ–é€”å¾„æ˜¯ç›¸ä¼¼çš„ã€‚å®ƒä»¬çš„ä¸»è¦æ€§èƒ½å·®å¼‚ä½“ç°åœ¨ UI çº¿ç¨‹çš„è®°å½•é˜¶æ®µï¼š</p>
<ul>
<li>åŸç”Ÿ View çš„æ€§èƒ½ç“¶é¢ˆé€šå¸¸é›†ä¸­åœ¨ä¼ ç»Ÿçš„ View å±‚æ¬¡ç»“æ„éå†å’Œ Measure/Layout æ•ˆç‡ä¸Šã€‚</li>
<li>Compose çš„æ€§èƒ½ç“¶é¢ˆåˆ™é›†ä¸­åœ¨ Composition/Recomposition é€»è¾‘çš„æ•ˆç‡å’ŒçŠ¶æ€ç®¡ç†ä¸Šã€‚<br/>
å³ä½¿ RenderThread éš”ç¦»äº† GPU æ‰§è¡Œï¼Œå¦‚æœ Composition æˆ– Layout é˜¶æ®µè€—æ—¶è¶…è¿‡æ¯å¸§é¢„ç®—ï¼ˆä¾‹å¦‚ 16msï¼‰ï¼ŒUI çº¿ç¨‹çš„é˜»å¡ä»ä¼šå¯¼è‡´æ–°çš„ RenderNode æ— æ³•åŠæ—¶æäº¤ï¼Œä»è€Œå¼•å‘ JANKã€‚å› æ­¤ï¼Œæ— è®ºæ˜¯ Native è¿˜æ˜¯ Composeï¼Œä¼˜åŒ–ç­–ç•¥çš„é‡ç‚¹éƒ½å¿…é¡»æ”¾åœ¨å‡å°‘ UI çº¿ç¨‹çš„è´Ÿè½½ä¸Šã€‚</li>
</ul>
<p><strong>æ¸²æŸ“é©±åŠ¨é€»è¾‘ä¸ VSync ä¾èµ–</strong></p>
<ul>
<li><strong>æ¸²æŸ“çº¿ç¨‹ï¼š</strong> å…±äº« AOSP çš„ RenderThreadã€‚</li>
<li><strong>é©±åŠ¨æœºåˆ¶ï¼š</strong> <strong>å¼ºä¾èµ– VSync ä¿¡å·ã€‚</strong> Compose çŠ¶æ€ï¼ˆStateï¼‰å˜åŒ–è§¦å‘ UI çº¿ç¨‹çš„é‡ç»„å’Œå¸ƒå±€è®¡ç®—ã€‚RenderThread çš„å…‰æ …åŒ–æ‰§è¡Œï¼ˆç»˜åˆ¶ï¼‰åŒæ ·ä¸¥æ ¼å¯¹é½ VSync è„‰å†²ã€‚</li>
<li><strong>é¢‘ç‡æ§åˆ¶ï¼š</strong> æ— æ³•ç›´æ¥æ§åˆ¶ã€‚é¢‘ç‡ç”±ç³»ç»Ÿ VSync ç¡®å®šã€‚Compose ä»…åœ¨éœ€è¦æ—¶ï¼ˆçŠ¶æ€æ”¹å˜ï¼‰æ‰è§¦å‘æ–°çš„å¸§æäº¤ã€‚</li>
</ul>
<h4 data-id="heading-22">Jetpack Compose æ¸²æŸ“æµç¨‹</h4>
<p>æ—¶åºå›¾ï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb044636c992468d8eb5196c5104a544~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXBpZ2ZseQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763902138&amp;x-signature=Gsih9xpjFxOn3PZdMsAjsDkgJmk%3D" alt="image.png" loading="lazy"/></p>
<p>è¯¥æµç¨‹æè¿°äº† Compose ä»çŠ¶æ€å˜åŒ–åˆ°æ¸²æŸ“çš„åºåˆ—ï¼š</p>
<ol>
<li><strong>UI Thread (Composition/Layout)ï¼š</strong> æ‰§è¡Œ <strong>Composition</strong> é˜¶æ®µï¼Œæ ¹æ®çŠ¶æ€ï¼ˆStateï¼‰å˜åŒ–ç¡®å®šéœ€è¦åˆ›å»ºã€æ›´æ–°æˆ–è·³è¿‡å“ªäº› UI èŠ‚ç‚¹ã€‚</li>
<li><strong>UI Thread (Composition/Layout)ï¼š</strong> æ‰§è¡Œ <strong>Measure &amp; Layout</strong> é˜¶æ®µï¼Œç¡®å®šæ‰€æœ‰ Composable ç»„ä»¶çš„æœ€ç»ˆå°ºå¯¸å’Œå±å¹•ä½ç½®ã€‚</li>
<li><strong>UI Thread (Composition/Layout)ï¼š</strong> æ‰§è¡Œ <strong>Draw Phase</strong>ï¼Œæ•è·ç»˜å›¾æ“ä½œï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ GraphicsLayer ä¸­ã€‚</li>
<li><strong>UI Thread -&gt; RenderThreadï¼š</strong> å°†å°è£…äº†ç»˜å›¾æŒ‡ä»¤çš„ RenderNode/GraphicsLayer æäº¤ç»™ RenderThreadã€‚</li>
<li><strong>RenderThread -&gt; GPUï¼š</strong> <strong>RenderThread</strong> åœ¨ VSync é©±åŠ¨ä¸‹ï¼Œåœ¨ GPU ä¸Šæ‰§è¡Œå…‰æ …åŒ–æŒ‡ä»¤ï¼ŒåŒ…æ‹¬å¤„ç†ç¦»å±çº¹ç†ç¼“å­˜ç­‰ä¼˜åŒ–ï¼Œåœ¨åº”ç”¨ Surface ç¼“å†²åŒºä¸­ç»˜åˆ¶ Composable UI åƒç´ ã€‚</li>
<li><strong>RenderThread -&gt; SurfaceFlingerï¼š</strong> è°ƒç”¨ç¼“å†²åŒºäº¤æ¢å‡½æ•°ï¼Œæäº¤æ¸²æŸ“å®Œæˆçš„å¸§ç¼“å†²åŒºã€‚</li>
<li><strong>SurfaceFlingerï¼š</strong> æ¥æ”¶ç¼“å†²åŒºï¼Œæ‰§è¡Œç³»ç»Ÿçº§åˆæˆï¼Œå¹¶æœ€ç»ˆäº¤ç»™ HWC è¿›è¡Œæ˜¾ç¤ºã€‚</li>
</ol>
<h2 data-id="heading-23"><strong>3. å³æ—¶æ¨¡å¼ä¸ä¸“ç”¨æ¸²æŸ“ç®¡çº¿ï¼šFlutter ä¸ GLSurfaceView</strong></h2>
<p>ä¸ä¾èµ– <code>AOSP</code> <code>RenderThread</code> çš„ <code>Native/Compose</code> ä¸åŒï¼Œ<code>Flutter</code> å’Œ <code>GLSurfaceView</code> ä½¿ç”¨å³æ—¶æ¨¡å¼æ¸²æŸ“ï¼Œå¹¶åˆ›å»ºäº†ç‹¬ç«‹äº <code>AOSP</code> å›¾å½¢æ ˆçš„ä¸“ç”¨æ¸²æŸ“ç¯å¢ƒã€‚</p>
<h3 data-id="heading-24"><strong>3.1. Flutter View æ¸²æŸ“ç®¡çº¿</strong></h3>
<p><code>Flutter</code> åœ¨ Android ä¸Šè¿è¡Œäºä¸€ä¸ªåä¸º <code>Flutter Embedder</code> çš„ C++ ç»„ä»¶ä¸­ï¼Œå¹¶ç®¡ç†ç€ä¸€ç»„ä¸“ç”¨çš„çº¿ç¨‹ï¼šå¹³å°çº¿ç¨‹ï¼ˆè´Ÿè´£ä¸å®¿ä¸» OS é€šä¿¡ï¼‰ã€UI çº¿ç¨‹ï¼ˆè¿è¡Œ Dart é€»è¾‘å’Œ Widget æ ‘æ„å»ºï¼‰ï¼Œä»¥åŠå…³é”®çš„ Raster Threadï¼ˆæ …æ ¼åŒ–çº¿ç¨‹ï¼‰ã€‚</p>
<h4 data-id="heading-25">åŒçº¿ç¨‹æ¨¡å‹</h4>
<p><code>Flutter</code> çš„é«˜æ€§èƒ½æ¸²æŸ“åŸºäºå…¶ä¸¥æ ¼éš”ç¦»çš„åŒçº¿ç¨‹æ¨¡å‹ï¼š</p>
<ol>
<li><strong>Dart UI Threadï¼š</strong> è´Ÿè´£å¤„ç†åº”ç”¨é€»è¾‘ã€Widget æ„å»ºã€Element Tree ç»´æŠ¤ã€Render Tree åˆ›å»ºä»¥åŠå¸ƒå±€è®¡ç®—ã€‚</li>
<li><strong>Flutter Raster Thread (ä¹Ÿç§° GPU Thread)ï¼š</strong> è¿™æ˜¯ä¸€ä¸ªä¸“ç”¨çš„ C++ çº¿ç¨‹ï¼Œè´Ÿè´£å°† Dart UI Thread ç”Ÿæˆçš„ Layer Tree ä¼ é€’ç»™ Flutter å¼•æ“ã€‚Flutter å¼•æ“åœ¨æ­¤çº¿ç¨‹ä¸Šå°†é«˜å±‚çº§ç»˜å›¾æŒ‡ä»¤ç¿»è¯‘æˆä½å±‚çº§çš„ GPU/CPU æŒ‡ä»¤ï¼Œæ‰§è¡Œå…‰æ …åŒ–ï¼Œå¹¶åˆ©ç”¨ GPU åŠ é€Ÿï¼Œç¡®ä¿é«˜æ•ˆæ¸²æŸ“ã€‚</li>
</ol>
<blockquote>
<p>Flutter çš„ UI çº¿ç¨‹è´Ÿè´£æ„å»ºé«˜å±‚æ¬¡çš„ Layer Treeã€‚ç„¶åï¼ŒRaster Thread ä¸“é—¨è´Ÿè´£æ¶ˆè€—è¿™ä¸ª Layer Treeï¼Œå¹¶ä½¿ç”¨å…¶é›†æˆçš„ Skia æˆ–æ›´æ–°çš„ Impeller æ¸²æŸ“å¼•æ“ç”Ÿæˆä½çº§å›¾å½¢å‘½ä»¤ã€‚</p>
</blockquote>
<blockquote>
<p>Impeller æ—¨åœ¨é€šè¿‡æå‰ç¼–è¯‘ç€è‰²å™¨ç­‰æ–¹å¼ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–ç§»åŠ¨ GPU æ€§èƒ½</p>
</blockquote>
<h4 data-id="heading-26">å³æ—¶æ¨¡å¼ä¸åº•å±‚ä¼˜åŒ–</h4>
<p><code>Flutter Android Embedder</code> è´Ÿè´£ä¸ Android ç³»ç»Ÿè¿›è¡Œåº•å±‚äº¤äº’ã€‚å®ƒä¸º Flutter çš„è¾“å‡ºè·å–ä¸€ä¸ªä¸“ç”¨çš„ Android <code>Surface</code>ï¼Œä¸º <code>Raster Thread</code> è®¾ç½®å¿…è¦çš„ <code>EGL</code> æˆ– <code>Vulkan</code> ä¸Šä¸‹æ–‡ï¼Œå¹¶å¤„ç†ä½çº§çš„ç¼“å†²åŒºæäº¤é€»è¾‘ã€‚</p>
<p><code>Skia/Impeller</code> æœ€ç»ˆå°†æ•´ä¸ªåº”ç”¨ UI æ¸²æŸ“åˆ°ä¸€ä¸ª <code>Surface</code> ä¸­ï¼Œä½œä¸º Android ç³»ç»Ÿçš„ä¸€ä¸ªç‹¬ç«‹ <code>Layer</code> æäº¤ç»™ <code>SurfaceFlinger</code>ã€‚</p>
<p>è™½ç„¶ <code>Flutter</code> åœ¨ <code>Dart</code> ä¾§çš„ <code>Widget</code> æ„å»ºå’Œ <code>Render Tree</code> åˆ›å»ºå¯ä»¥è¢«è§†ä¸ºæ¯å¸§éƒ½å¯èƒ½é‡æ–°å‘ç”Ÿçš„å³æ—¶æ¨¡å¼è¡Œä¸ºï¼Œä½† <code>Skia/Impeller</code> åœ¨åº•å±‚å¯¹è¿™äº›æŒ‡ä»¤è¿›è¡Œé«˜åº¦ä¼˜åŒ–ã€æ‰¹å¤„ç†å’Œç¡¬ä»¶åŠ é€Ÿã€‚</p>
<h4 data-id="heading-27">æ¸²æŸ“æ¶æ„çš„ç‹¬ç«‹æ€§</h4>
<p>Flutter <code>Raster Thread</code> çš„å­˜åœ¨ç»•è¿‡äº† AOSP çš„ <code>RenderThread</code> æœºåˆ¶ã€‚è¿™èµ‹äºˆäº† <code>Flutter Engine</code> å¯¹æ¸²æŸ“ç®¡çº¿çš„å®Œå…¨æ§åˆ¶æƒå’Œè·¨å¹³å°æ€§èƒ½çš„ç¡®å®šæ€§ã€‚</p>
<p>è¿™ç§æ¶æ„å†³ç­–é¿å…äº†ä¸åŸç”Ÿ View ç³»ç»Ÿçš„å¤æ‚äº¤äº’ï¼Œä½†ä»£ä»·æ˜¯åœ¨é›†æˆåŸç”Ÿç»„ä»¶æ—¶éœ€è¦å¼•å…¥é¢å¤–çš„æ¡¥æ¥å±‚å’Œåˆæˆæ¨¡å¼ï¼Œå¦‚ <code>Platform Views</code>ã€‚</p>
<p><strong>æ¸²æŸ“é©±åŠ¨é€»è¾‘ä¸ VSync ä¾èµ–</strong></p>
<ul>
<li><strong>æ¸²æŸ“çº¿ç¨‹ï¼š</strong> ç‹¬ç«‹äº AOSP çš„ <code>Raster Thread</code> (C++ å®ç°)ã€‚</li>
<li><strong>é©±åŠ¨æœºåˆ¶ï¼š</strong> <code>Flutter Engine</code> å†…éƒ¨å…·å¤‡è‡ªå·±çš„è°ƒåº¦å™¨ï¼Œä½†å®ƒä¼šç›‘å¬å’Œå¯¹é½<strong>å¹³å° VSync ä¿¡å·</strong>ï¼Œä»¥ç¡®ä¿æ¸²æŸ“å¸§ä¸æ˜¾ç¤ºå™¨çš„åˆ·æ–°ç‡åŒæ­¥ï¼ˆç›®æ ‡ 60 FPS æˆ– 120 FPSï¼‰ã€‚æ¸²æŸ“å·¥ä½œåœ¨ UI Thread å’Œ <code>Raster Thread</code> ä¹‹é—´åˆ†å·¥ã€‚</li>
<li><strong>é¢‘ç‡æ§åˆ¶ï¼š</strong> ç”± <code>Skia/Impeller</code> æ§åˆ¶ï¼ŒåŒæ­¥äºç³»ç»Ÿ <code>VSync</code> é¢‘ç‡ã€‚</li>
</ul>
<h4 data-id="heading-28"><strong>Flutter Platform Views çš„é›†æˆæ–¹æ¡ˆæ·±åº¦å¯¹æ¯”</strong></h4>
<p>Flutter Engine ä½œä¸ºä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„æ¸²æŸ“å¼•æ“ï¼Œå½“éœ€è¦åµŒå…¥åŸç”Ÿ Android Viewï¼ˆå¦‚ MapView æˆ– WebViewï¼‰æ—¶ï¼Œå¿…é¡»é‡‡ç”¨ç‰¹æ®Šçš„æœºåˆ¶æ¥æ¡¥æ¥ Flutter çš„ Raster Thread ä¸ Android çš„ Surface æœºåˆ¶ã€‚</p>
<p>Flutter æä¾›äº†ä¸¤ç§æ ¸å¿ƒæ¸²æŸ“æœºåˆ¶ï¼Œé€‰æ‹©å“ªä¸€ç§å–å†³äºå¯¹åŸç”Ÿç»„ä»¶ä¿çœŸåº¦ã€Flutter åŠ¨ç”»æ€§èƒ½ä»¥åŠæ˜¯å¦éœ€è¦ Flutter ä¾§å˜æ¢çš„éœ€æ±‚ã€‚</p>























<table><thead><tr><th align="left">æ¨¡å¼</th><th align="left">é€‚ç”¨åœºæ™¯/ä¼˜åŠ¿</th><th align="left">é™åˆ¶/åŠ£åŠ¿</th><th align="left">é€‰æ‹©åˆ¤æ–­</th></tr></thead><tbody><tr><td align="left"><strong>Hybrid Composition (HC)</strong></td><td align="left"><strong>åŸç”Ÿè§†å›¾ä¿çœŸåº¦å’Œæ€§èƒ½è‡³ä¸Šï¼š</strong> é€‚ç”¨äºå¯¹è¾“å…¥å¤„ç†ã€æœ¬åœ°è§†å›¾ç”Ÿå‘½å‘¨æœŸå’Œæ¸²æŸ“ä¿çœŸåº¦è¦æ±‚æé«˜ï¼ˆæ¥è¿‘åŸç”Ÿä½“éªŒï¼‰çš„ç»„ä»¶ã€‚å®ƒæä¾›<strong>æœ€ä½³çš„ Android View æ€§èƒ½å’Œä¿çœŸåº¦</strong></td><td align="left"><strong>ç‰ºç‰² Flutter æ€§èƒ½ï¼š</strong> ç”±äº SurfaceFlinger éœ€è¦è¿›è¡Œç³»ç»Ÿçº§åˆæˆï¼ŒFlutter UI çš„ FPS ä¼šæœ‰æ‰€é™ä½ <strong>ä¸æ”¯æŒ Flutter ä¾§å˜æ¢ï¼š</strong> æ— æ³•å¯¹åµŒå…¥çš„åŸç”Ÿè§†å›¾åº”ç”¨æ‰€æœ‰ Flutter Widget çš„å‡ ä½•å˜æ¢ã€é€æ˜åº¦æˆ–è£å‰ªæ•ˆæœã€‚</td><td align="left"><strong>åŸç”Ÿ View åŒ…å« SurfaceView</strong> (å¦‚è§†é¢‘ã€ç›¸æœº)ï¼Œä¸”åŸç”Ÿè§†å›¾æ€§èƒ½ä¼˜å…ˆäº Flutter åŠ¨ç”»æµç•…åº¦ã€‚</td></tr><tr><td align="left"><strong>Texture Layer (TLHC)</strong></td><td align="left"><strong>Flutter åŠ¨ç”»å’Œå˜æ¢èƒ½åŠ›è‡³ä¸Šï¼š</strong> é€‚ç”¨äºéœ€è¦å¯¹åµŒå…¥çš„ View è¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€è£å‰ªæˆ–åº”ç”¨é€æ˜åº¦æ•ˆæœçš„åœºæ™¯ã€‚å®ƒæä¾›<strong>æœ€ä½³çš„ Flutter æ¸²æŸ“æ€§èƒ½</strong>ã€‚</td><td align="left"><strong>åŸç”Ÿè§†å›¾æ»šåŠ¨å¯èƒ½å‡ºç°å¡é¡¿ (Jank)ï¼š</strong> ç”±äºå°†åŸç”Ÿ View æ¸²æŸ“åˆ°çº¹ç†éœ€è¦é¢å¤–çš„å¤„ç†å»¶è¿Ÿï¼Œå¿«é€Ÿæ»šåŠ¨ï¼ˆå¦‚å†…åµŒçš„ WebViewï¼‰å¯èƒ½å‡ºç°å¡é¡¿ [17]ã€‚SurfaceView ç»„ä»¶åœ¨æ­¤æ¨¡å¼ä¸‹è¡¨ç°ä¸ä½³ã€‚</td><td align="left"><strong>éœ€è¦å¯¹åŸç”Ÿ View åº”ç”¨ Flutter ä¾§å˜æ¢</strong>ï¼ˆå¦‚ 3D æ—‹è½¬ã€è£å‰ªï¼‰ï¼Œä¸”åŸç”Ÿ View å†…å®¹æ›´æ–°é¢‘ç‡ä¸é«˜æˆ–ä¸éœ€è¦ä½¿ç”¨ SurfaceViewã€‚</td></tr></tbody></table>
<p><strong>é»˜è®¤æœºåˆ¶ä¸è‡ªåŠ¨é€‰æ‹©</strong></p>
<ul>
<li><strong>Texture Layer Hybrid Composition (TLHC)</strong> æ˜¯ç›®å‰ Flutter æ¡†æ¶ä¸­æ¨èä¸”é»˜è®¤çš„ Platform View æ¸²æŸ“æ¨¡å¼ã€‚</li>
<li><strong>å›é€€æœºåˆ¶ï¼š</strong> å½“åŸç”Ÿè§†å›¾æ ‘ä¸­åŒ…å« SurfaceView ç»„ä»¶æ—¶ï¼ˆä¾‹å¦‚è§†é¢‘æ’­æ”¾å™¨ã€ç›¸æœºé¢„è§ˆç­‰ï¼‰ï¼ŒTLHC æ¨¡å¼ä¼šé‡åˆ°å›°éš¾ï¼Œç³»ç»Ÿå¯èƒ½ä¼šè‡ªåŠ¨å›é€€åˆ° Hybrid Composition (HC) æ¨¡å¼ã€‚</li>
</ul>
<h4 data-id="heading-29">Flutter æ¸²æŸ“æ¶æ„ (æµç¨‹æè¿°)</h4>
<p>æ—¶åºå›¾ï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd5ef9e3e3cd4e94a7c95cb5a3be3614~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXBpZ2ZseQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763902138&amp;x-signature=FMKlOo8nbpJ%2BzpZOHwNlhvYu%2F9Y%3D" alt="image.png" loading="lazy"/></p>
<p>è¯¥æµç¨‹æè¿°äº† Flutter å¼•æ“çš„æ¸²æŸ“åºåˆ—ï¼š</p>
<ol>
<li><strong>Dart UI Thread (Engine)ï¼š</strong> æ‰§è¡Œ Widget Tree çš„æ„å»ºï¼Œè½¬æ¢ä¸º Element Treeã€‚</li>
<li><strong>Dart UI Thread (Engine)ï¼š</strong> åœ¨ VSync ä¿¡å·å¼€å§‹æ—¶ï¼Œæ‰§è¡Œ Layout é˜¶æ®µï¼Œè®¡ç®— Render Treeï¼Œæœ€ç»ˆç”ŸæˆåŒ…å« Skia/Impeller ç»˜å›¾æŒ‡ä»¤çš„ Layer Treeã€‚</li>
<li><strong>Dart UI Thread -&gt; Raster Thread (Skia/GPU Thread)ï¼š</strong> å°† Layer Tree ä¼ è¾“åˆ°ç‹¬ç«‹çš„ Raster Threadã€‚</li>
<li><strong>Raster Thread (Skia/GPU Thread) -&gt; GPUï¼š</strong> <strong>Skia å¼•æ“</strong> åœ¨å…¶ä¸“ç”¨çº¿ç¨‹ä¸Šæ‰§è¡Œ <strong>å…‰æ …åŒ–</strong>ï¼Œå°† Layer Tree æŒ‡ä»¤è½¬æ¢ä¸ºä½çº§ GPU è°ƒç”¨ï¼Œåœ¨ Flutter çš„ Surface ç¼“å†²åŒºä¸­ç»˜åˆ¶æ•´ä¸ª UI åƒç´ å†…å®¹ã€‚</li>
<li><strong>Raster Thread -&gt; SurfaceFlinger (System)ï¼š</strong> æäº¤åº”ç”¨ Surface ç¼“å†²åŒºï¼Œä½œä¸ºå•ä¸€ Layer æäº¤ç»™ç³»ç»Ÿã€‚</li>
<li><strong>SurfaceFlinger (System)ï¼š</strong> æ¥æ”¶ Flutter çš„ Layerï¼Œè¿›è¡Œç³»ç»Ÿçº§åˆæˆï¼Œå¹¶æœ€ç»ˆäº¤ç»™ HWC æ˜¾ç¤ºã€‚</li>
</ol>
<h3 data-id="heading-30"><strong>3.2. <code>GLSurfaceView</code>ï¼šé¢å‘ <code>GLES</code> çš„ä½å±‚çº§æ§åˆ¶</strong></h3>
<p><code>GLSurfaceView</code> ä¸ºéœ€è¦è¿›è¡Œé«˜æ€§èƒ½ã€è‡ªå®šä¹‰ GLES æ¸²æŸ“çš„åº”ç”¨æä¾›äº†ä¸€ä¸ªç›´æ¥çš„æ¥å£ï¼Œå¦‚æ¸¸æˆæˆ–è§†é¢‘å¤„ç†ã€‚</p>
<h4 data-id="heading-31">EGL ç¯å¢ƒä¸çº¿ç¨‹è¦æ±‚</h4>
<p><code>GLSurfaceView</code> çš„ä¸»è¦åŠŸèƒ½æ˜¯ç®¡ç† <code>GLES</code> æ¸²æŸ“æ‰€éœ€çš„ <code>EGL</code> ç¯å¢ƒã€‚è¿™åŒ…æ‹¬åœ¨ç”Ÿå‘½å‘¨æœŸå›è°ƒä¸­åˆ›å»º <code>EGLContext</code> å’Œ <code>EGLSurface</code> å®ä¾‹ã€‚</p>
<ul>
<li><strong>ä¸“ç”¨ GLES çº¿ç¨‹ï¼š</strong> <code>GLES</code> è§„èŒƒè¦æ±‚æ‰€æœ‰çš„ç»˜å›¾æ“ä½œå¿…é¡»åœ¨ç‰¹å®šçš„ <code>GLES</code> çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œç»å¯¹ä¸èƒ½åœ¨ UI çº¿ç¨‹ä¸Šæ‰§è¡Œã€‚<code>GLSurfaceView</code> å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªä¸“ç”¨çš„æ¸²æŸ“çº¿ç¨‹æ¥æ»¡è¶³è¿™ä¸€è¦æ±‚ï¼Œç¡®ä¿äº†é‡å‹ GPU è´Ÿè½½ä¸åº”ç”¨ä¸»çº¿ç¨‹çš„å½»åº•éš”ç¦»ã€‚</li>
</ul>
<p>å³æ—¶æ¨¡å¼ä¸ç¼“å†²åŒºæ§åˆ¶<br/>
å¼€å‘è€…åœ¨ <code>GLES</code> çº¿ç¨‹ä¸­æ‰§è¡Œå³æ—¶æ¨¡å¼çš„ç»˜å›¾æŒ‡ä»¤ã€‚å½“ä¸€å¸§æ¸²æŸ“å®Œæˆåï¼Œå¿…é¡»é€šè¿‡è°ƒç”¨ <code>eglSwapBuffers()</code> æ¥æ˜ç¡®åœ°æäº¤å½“å‰ç¼“å†²åŒºã€‚è¿™ä¸ªæ–¹æ³•åæºäºä¼ ç»Ÿçš„åŒç¼“å†²æœºåˆ¶ï¼Œå®ƒå°†æ¸²æŸ“å¥½çš„åå°ç¼“å†²åŒºæäº¤åˆ°å‰å°ä¾›æ¶ˆè´¹è€…ä½¿ç”¨ã€‚</p>
<ul>
<li><strong>å¸§ç‡æ§åˆ¶ï¼š</strong> é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>GLSurfaceView</code> å¯èƒ½ä»¥æ˜¾ç¤ºå™¨çš„åˆ·æ–°ç‡ï¼ˆä¾‹å¦‚ 60fpsï¼‰è¿ç»­æ¸²æŸ“ã€‚ç„¶è€Œï¼Œé€šè¿‡è®¾ç½® <code>RENDERMODE_WHEN_DIRTY</code>ï¼Œå¼€å‘è€…å¯ä»¥åªåœ¨ UI é€»è¾‘æˆ–è¾“å…¥äº‹ä»¶æ˜ç¡®è¦æ±‚æ—¶æ‰è¯·æ±‚æ¸²æŸ“ (<code>requestRender()</code>)ï¼Œè¿™å¯¹äºéå®æ—¶åŠ¨ç”»æˆ–é™æ€åœºæ™¯çš„ç”µæºå’Œæ€§èƒ½ä¼˜åŒ–è‡³å…³é‡è¦ã€‚</li>
</ul>
<p><strong>æ¸²æŸ“é©±åŠ¨é€»è¾‘ä¸ VSync ä¾èµ–</strong></p>
<ul>
<li><strong>æ¸²æŸ“çº¿ç¨‹ï¼š</strong> ä¸“ç”¨ Dedicated GLES Threadã€‚</li>
<li><strong>é©±åŠ¨æœºåˆ¶ï¼š</strong> <strong>å¯æ§æ¨¡å¼ã€‚</strong>
<ul>
<li><strong>RENDERMODE_CONTINUOUSLYï¼š</strong> æ¸²æŸ“å¾ªç¯æŒç»­è¿è¡Œï¼Œé»˜è®¤ä¸ <code>VSync</code> å¯¹é½ï¼Œå°è¯•è¾¾åˆ°æœ€é«˜åˆ·æ–°ç‡ã€‚</li>
<li><strong>RENDERMODE_WHEN_DIRTYï¼š</strong> æ¸²æŸ“å¾ªç¯ä»…åœ¨åº”ç”¨æ˜ç¡®è°ƒç”¨ requestRender() æ—¶æ‰§è¡Œä¸€å¸§ã€‚</li>
</ul>
</li>
<li><strong>é¢‘ç‡æ§åˆ¶ï¼š</strong> <strong>å¼€å‘è€…å®Œå…¨æ§åˆ¶ã€‚</strong> å¯ä»¥é€‰æ‹©è¿ç»­æ¸²æŸ“ï¼ˆé«˜é¢‘/Vsync çº¦æŸï¼‰æˆ–äº‹ä»¶é©±åŠ¨æ¸²æŸ“ï¼ˆä½é¢‘/æŒ‰éœ€ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-32">GLSurfaceView æ¸²æŸ“æµç¨‹</h4>
<p>æ—¶åºå›¾ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e20a6d4865e74adc97d21e2272733167~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXBpZ2ZseQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763902138&amp;x-signature=uflmgBv89AJ4rNSbyG1L0qB%2BBio%3D" alt="image.png" loading="lazy"/></p>
<p>è¯¥æµç¨‹æè¿°äº† <code>GLSurfaceView</code> çš„æ¸²æŸ“åºåˆ—ï¼š</p>
<ol>
<li><strong>Application UI Thread -&gt; Dedicated GLES Threadï¼š</strong> UI çº¿ç¨‹åœ¨ç”Ÿå‘½å‘¨æœŸå›è°ƒä¸­ï¼Œè¯·æ±‚ <code>GLES</code> çº¿ç¨‹è®¾ç½® <code>EGL</code> ç¯å¢ƒï¼Œåˆ›å»º <code>EGLContext</code> å’Œ <code>EGLSurface</code> å®ä¾‹ã€‚</li>
<li><strong>Application UI Thread -&gt; Dedicated GLES Threadï¼š</strong> UI çº¿ç¨‹é€šè¿‡äº‹ä»¶æˆ–åŠ¨ç”»å¾ªç¯ï¼Œè§¦å‘ GLES çº¿ç¨‹è°ƒç”¨ <code>requestRender()</code> æˆ–ä¿æŒè¿ç»­æ¸²æŸ“æ¨¡å¼ã€‚</li>
<li><strong>Dedicated GLES Thread -&gt; GPUï¼š</strong> æ‰§è¡Œç”¨æˆ·å®šä¹‰çš„ OpenGL ES ç»˜å›¾å‘½ä»¤ï¼ˆå³æ—¶æ¨¡å¼ï¼‰ï¼Œç›´æ¥åˆ©ç”¨ GPU <strong>å…‰æ …åŒ–</strong> 3D/2D å†…å®¹åˆ°å½“å‰çš„ EGL ç¼“å†²åŒºã€‚<strong>è¿™æ˜¯å¼€å‘è€…å¯¹ GPU ç»˜å›¾çš„æœ€ç›´æ¥æ§åˆ¶</strong>ã€‚</li>
<li><strong>Dedicated GLES Thread -&gt; BufferQueue (EGLSurface)ï¼š</strong> è°ƒç”¨ <code>eglSwapBuffers()</code>ï¼Œå°†åˆšåˆšç»˜åˆ¶çš„ç¼“å†²åŒºæäº¤ç»™ <code>BufferQueue</code> æ¶ˆè´¹è€…ã€‚</li>
<li><strong>BufferQueue (EGLSurface) -&gt; SurfaceFlinger (System)ï¼š</strong> ç¼“å†²åŒºä½œä¸ºç‹¬ç«‹ <code>Layer</code> æäº¤ç»™ç³»ç»Ÿåˆæˆå™¨ã€‚</li>
<li><strong>SurfaceFlinger (System)ï¼š</strong> å°† <code>GLSurfaceView</code> çš„ç‹¬ç«‹ Layer ä¸å…¶ä»–ç³»ç»Ÿ UI åˆæˆï¼Œå¹¶é€šè¿‡ HWC æ˜¾ç¤ºã€‚</li>
</ol>
<h2 data-id="heading-33"><strong>4. æ··åˆä¸è·¨è¿›ç¨‹æ¸²æŸ“ï¼š<code>WebView</code> ä¸ Platform Views</strong></h2>
<p>å¤æ‚çš„ UI åœºæ™¯å¾€å¾€æ¶‰åŠä¸åŒæ¸²æŸ“æŠ€æœ¯çš„æ··åˆï¼Œè¿™è¦æ±‚ç³»ç»Ÿåˆæˆå™¨ <code>SurfaceFlinger</code> ä»‹å…¥å¤„ç†å¤šä¸ªç‹¬ç«‹æ¸²æŸ“æºçš„ <code>Layer</code> åˆæˆã€‚</p>
<h3 data-id="heading-34"><strong>4.1. ç°ä»£ <code>WebView</code> æ¸²æŸ“æœºåˆ¶ï¼šOut-of-Process Rasterization (OOPR)</strong></h3>
<p><code>WebView</code> æ‰¿è½½äº†å¤æ‚çš„ <code>Web</code> æ¸²æŸ“å¼•æ“ï¼ˆ<code>Chromium</code>ï¼‰ã€‚ä¸ºäº†å¢å¼ºå®‰å…¨æ€§å’Œç¨³å®šæ€§ï¼Œç°ä»£ Android ç³»ç»Ÿï¼ˆAPI 30 åŠä»¥ä¸Šï¼‰é»˜è®¤ä½¿ç”¨è¿›ç¨‹å¤–å…‰æ …åŒ– (<code>OOPR</code>) æ¨¡å¼ã€‚<br/>
åœ¨ Android API 30 (Android R) ä¹‹å‰ï¼Œ<code>WebView</code> çš„æ¸²æŸ“æ¨¡å¼å–å†³äºå…·ä½“çš„ <code>Android</code> ç‰ˆæœ¬å’Œè®¾å¤‡çš„å†…å­˜æ¡ä»¶ï¼š</p>
<ul>
<li>è¿›ç¨‹å†…æ¸²æŸ“ (In-Process Renderer): åœ¨ Android Lollipop (API 21) åˆ° Android Nougat (API 25) æœŸé—´ï¼Œè¿›ç¨‹å†…æ¸²æŸ“æ˜¯é»˜è®¤æ¨¡å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œ<code>Chromium</code> æ¸²æŸ“å¼•æ“ï¼ˆåŒ…æ‹¬å¸ƒå±€å’Œå…‰æ …åŒ–ï¼‰ä¸ä¸»æœºåº”ç”¨è¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹å†…ï¼Œå…±äº«èµ„æºå’Œå†…å­˜ç©ºé—´ã€‚è¿™å¯¼è‡´ Web å†…å®¹çš„å¤æ‚æ“ä½œå¯èƒ½ç›´æ¥é˜»å¡åº”ç”¨çš„ä¸» UI çº¿ç¨‹ã€‚</li>
<li>è¿›ç¨‹å¤–æ¸²æŸ“çš„è¿‡æ¸¡ (Oreo - Q): ä» Android Oreo (API 26) åˆ° Android Q (API 29)ï¼Œç³»ç»Ÿé€šå¸¸ä¼šå¯ç”¨è¿›ç¨‹å¤–æ¸²æŸ“ï¼Œä½†å¯¹äºä½å†…å­˜è®¾å¤‡ï¼Œå¯èƒ½ä¼šå›é€€åˆ°è¿›ç¨‹å†…æ¸²æŸ“æ¨¡å¼ã€‚</li>
<li><code>OOPR</code> é»˜è®¤åŒ– (Android R/API 30+): ç”±äº Android R å¯¹å†…å­˜ç®¡ç†çš„ä¼˜åŒ–ï¼ŒWebView åœ¨ Android R åŠä»¥ä¸Šç‰ˆæœ¬ä¸­æ€»æ˜¯é»˜è®¤ä½¿ç”¨è¿›ç¨‹å¤–å…‰æ …åŒ– (<code>OOPR</code>) æ¨¡å¼ï¼Œç¡®ä¿äº†éš”ç¦»æ€§ã€‚</li>
</ul>
<h4 data-id="heading-35">è¿›ç¨‹éš”ç¦»ä¸ Surface IPC</h4>
<p>åœ¨ OOPR æ¨¡å¼ä¸‹ï¼Œå®é™…çš„ Web å†…å®¹æ¸²æŸ“å·¥ä½œå‘ç”Ÿåœ¨å®¿ä¸»åº”ç”¨è¿›ç¨‹ä¹‹å¤–çš„ Chrome Render Process ä¸­ã€‚</p>
<ul>
<li><strong>æ•°æ®æµï¼š</strong> <code>Chrome</code> æ¸²æŸ“è¿›ç¨‹å°†å…¶æ¸²æŸ“ç»“æœç»˜åˆ¶åˆ°ä¸€ä¸ªä¸“ç”¨çš„ Surface ä¸­ã€‚è¿™ä¸ª <code>Surface</code> å¯¹è±¡é€šè¿‡ <code>Android</code> çš„ <code>Binder IPC</code> æœºåˆ¶è¢«ä¼ é€’å’Œç®¡ç†ã€‚æ¸²æŸ“è¿›ç¨‹å……å½“ <code>Surface</code> çš„ç”Ÿäº§è€…ï¼Œè´Ÿè´£å°†æ¸²æŸ“å¥½çš„ <code>GraphicBuffer</code> (æˆ– <code>AHardwareBuffer</code>) æäº¤ç»™ <code>SurfaceFlinger</code>ã€‚</li>
<li><strong>å®¿ä¸»åº”ç”¨èŒè´£ï¼š</strong> å®¿ä¸»åº”ç”¨çš„ä¸»è¿›ç¨‹åªéœ€è¦ç®¡ç† <code>WebView</code> çš„ç”Ÿå‘½å‘¨æœŸã€è¾“å…¥äº‹ä»¶è½¬å‘ä»¥åŠ <code>Surface</code> çš„åˆ†é…ï¼Œæ¸²æŸ“å·¥ä½œè´Ÿè½½è¢«å®Œå…¨å¸è½½åˆ°è¿œç¨‹è¿›ç¨‹ï¼Œå®ç°äº†æé«˜çš„éš”ç¦»æ€§ã€‚</li>
</ul>
<h4 data-id="heading-36">WebView çš„ç»˜åˆ¶æ¨¡å¼ä¸å´©æºƒéš”ç¦»</h4>
<p><strong>ç»˜åˆ¶æ¨¡å¼ï¼š</strong> å°½ç®¡ <code>WebView</code> æ˜¯ä½œä¸º Android Native View å±‚æ¬¡ç»“æ„çš„ä¸€éƒ¨åˆ†è¢«æ‰˜ç®¡ï¼Œå…¶å†…éƒ¨çš„ Chromium æ¸²æŸ“å¼•æ“éµå¾ª <code>ä¿ç•™æ¨¡å¼ (Retained Mode)</code> çš„åŸåˆ™ã€‚<br/>
Web å¹³å°çš„ æ–‡æ¡£å¯¹è±¡æ¨¡å‹ (DOM) å……å½“äº†å…¶ä¿ç•™çŠ¶æ€çš„æ¨¡å‹ã€‚æµè§ˆå™¨ç»´æŠ¤ DOM çš„çŠ¶æ€ï¼Œå¹¶å¯ä»¥åœ¨ä¸éœ€è¦ JavaScript æŒç»­é‡æ–°å‘é€æ‰€æœ‰ç»˜å›¾æŒ‡ä»¤çš„æƒ…å†µä¸‹è¿›è¡Œæ¸²æŸ“ï¼Œè¿™ä¸ <code>Android View</code> ä½¿ç”¨ <code>RenderNode</code> çš„æ€è·¯ä¸€è‡´ ã€‚</p>
<p><strong>å´©æºƒéš”ç¦»ï¼š</strong> <code>WebView</code> çš„è¿›ç¨‹å¤–å…‰æ …åŒ–ï¼ˆ<code>OOPR</code>ï¼‰æ—¨åœ¨é€šè¿‡å°†æ¸²æŸ“å·¥ä½œè´Ÿè½½è½¬ç§»åˆ°æ²™ç®±éš”ç¦»çš„è¿›ç¨‹ä¸­ ï¼Œä»è€Œæé«˜ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚<br/>
ç„¶è€Œï¼Œå¦‚æœå‘ç”Ÿä¸¥é‡çš„æ¸²æŸ“æ•…éšœï¼Œä¾‹å¦‚æœªæ•è·çš„ <code>JavaScript</code> å¼‚å¸¸å¯¼è‡´ <code>Chrome Render Process</code> å´©æºƒï¼Œè¿™ä»ç„¶å¯èƒ½å¯¼è‡´ä¸»æœºåº”ç”¨ç¨‹åºå—åˆ°å½±å“ã€‚<br/>
ä¸ºäº†å®ç°è¿›ç¨‹çº§åˆ«çš„é²æ£’æ€§ï¼ŒAndroid å¹³å°åœ¨ API 26 åŠæ›´é«˜ç‰ˆæœ¬ä¸­æä¾›äº† <code>WebViewClient#onRenderProcessGone</code> å›è°ƒæ–¹æ³•ã€‚é€šè¿‡é‡å†™æ­¤æ–¹æ³•ï¼Œä¸»æœºåº”ç”¨å¯ä»¥åœ¨æ¸²æŸ“è¿›ç¨‹å´©æºƒæ—¶è¢«é€šçŸ¥ï¼Œä»è€Œå…è®¸åº”ç”¨è¿›è¡Œæ¢å¤æ“ä½œï¼Œä¾‹å¦‚é‡æ–°åŠ è½½ WebView æˆ–æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œé˜²æ­¢æ•´ä¸ªåº”ç”¨ç¨‹åºå´©æºƒã€‚</p>
<p><strong>æ¸²æŸ“é©±åŠ¨é€»è¾‘ä¸ VSync ä¾èµ–</strong></p>
<ul>
<li><strong>æ¸²æŸ“çº¿ç¨‹ï¼š</strong> éš”ç¦»çš„ <code>Chrome Render Process</code> å†…éƒ¨çš„æ¸²æŸ“çº¿ç¨‹ã€‚</li>
<li><strong>é©±åŠ¨æœºåˆ¶ï¼š</strong> <strong>å†…éƒ¨ VSync å¯¹é½ã€‚</strong> æ¸²æŸ“è¿›ç¨‹çš„æ¸²æŸ“å¾ªç¯ç‹¬ç«‹è¿è¡Œï¼Œä½†ä¼šä¸ç³»ç»Ÿ VSync ä¿¡å·å¯¹é½ã€‚ä¸»æœºåº”ç”¨é€šè¿‡æ»šåŠ¨ã€é¡µé¢åŠ è½½æˆ– JavaScript åŠ¨ç”»ç­‰è§¦å‘æ›´æ–°ï¼Œæ¸²æŸ“è¿›ç¨‹è´Ÿè´£é«˜æ•ˆåœ°å°†æ–°å†…å®¹å…‰æ …åŒ–ã€‚</li>
<li><strong>é¢‘ç‡æ§åˆ¶ï¼š</strong> ç”± Chromium å¼•æ“å†…éƒ¨æ§åˆ¶ã€‚ä¸»æœºåº”ç”¨æ— æ³•ç›´æ¥è°ƒèŠ‚å…¶å¸§ç‡ã€‚</li>
</ul>
<h4 data-id="heading-37">SurfaceFlinger çš„å‚ä¸</h4>
<p>ç”±äº <code>WebView</code> çš„å†…å®¹æ˜¯ä½œä¸ºç‹¬ç«‹è¿›ç¨‹çš„è¾“å‡ºï¼Œå®ƒå¿…å®šæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Layer æäº¤ç»™ SurfaceFlingerã€‚</p>
<ul>
<li><strong>æ€§èƒ½å½±å“ï¼š</strong> å°½ç®¡ <code>OOPR</code> æä¾›äº†å“è¶Šçš„è¿›ç¨‹éš”ç¦»ï¼Œä½†å®ƒå¼ºåˆ¶ <code>WebView</code> æˆä¸ºä¸€ä¸ªç‹¬ç«‹ <code>Layer</code>ï¼Œæ— æ³•å†…åµŒåˆ°åº”ç”¨ä¸»ç•Œé¢çš„ <code>RenderNode</code> ä¸­è¿›è¡Œä¼˜åŒ–ã€‚è¿™æ„å‘³ç€ <code>WebView</code> å†…å®¹çš„ä»»ä½•æ›´æ–°éƒ½å¿…é¡»ç»è¿‡ SurfaceFlinger çš„ç³»ç»Ÿçº§åˆæˆæ­¥éª¤ã€‚è¿™å¢åŠ äº†ç³»ç»Ÿåˆæˆçš„å¼€é”€ï¼Œå°¤å…¶æ˜¯åœ¨é«˜é¢‘æ›´æ–°çš„åœºæ™¯ä¸‹ã€‚</li>
</ul>
<h4 data-id="heading-38">WebView OOPR æ¸²æŸ“æµç¨‹</h4>
<p>æ—¶åºå›¾ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30b0ed54774140a29a80c515f029b1c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXBpZ2ZseQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763902138&amp;x-signature=OMYido96TIS69haAc46aTK6tGMs%3D" alt="image.png" loading="lazy"/></p>
<p><code>WebView</code> <code>OOPR</code> æ¸²æŸ“æ¶æ„ (æµç¨‹æè¿°) è¯¥æµç¨‹æè¿°äº† WebView è·¨è¿›ç¨‹æ¸²æŸ“çš„ç»„ä»¶äº¤äº’ï¼š</p>
<ol>
<li>App Host Process (WVHost)ï¼š è°ƒç”¨ WebView.loadUrl() æˆ– loadData()ï¼Œè§¦å‘ Web å†…å®¹åŠ è½½ã€‚</li>
<li>App Host Process (WVHost) -&gt; Chrome Render Process (WebEngine)ï¼š Host è¿›ç¨‹é€šè¿‡ Binder IPC æœºåˆ¶å‘ Chrome æ¸²æŸ“è¿›ç¨‹åˆ†å‘åŠ è½½è¯·æ±‚ã€ç”Ÿå‘½å‘¨æœŸæ§åˆ¶å’Œè¾“å…¥äº‹ä»¶ã€‚</li>
<li>Chrome Render Process (WebEngine)ï¼š Web å¼•æ“ï¼ˆBlinkï¼‰åœ¨è¿œç¨‹è¿›ç¨‹ä¸­æ‰§è¡Œé¡µé¢è§£æã€å¸ƒå±€è®¡ç®—ï¼Œå¹¶æ„å»º Web Layer Treeã€‚</li>
<li>Chrome Render Process (WebEngine) -&gt; GPUï¼š æ¸²æŸ“è¿›ç¨‹çš„ GPU çº¿ç¨‹æ‰§è¡Œ å…‰æ …åŒ–ï¼Œå°† Web å†…å®¹ç»˜åˆ¶åˆ°ä¸“ç”¨çš„ AHardwareBuffer ä¸­ã€‚æ¸²æŸ“å¸§ç‡å†…éƒ¨ä¸ VSync å¯¹é½ã€‚</li>
<li>Chrome Render Process (WebEngine) -&gt; Android Graphics Subsystem (SF/BQ): Chrome è¿›ç¨‹é€šè¿‡ Surface ç”Ÿäº§è€…æ¥å£ï¼Œå°†æ¸²æŸ“å¥½çš„ç¼“å†²åŒºæäº¤åˆ° BufferQueueã€‚</li>
<li>Android Graphics Subsystem (SF/BQ) -&gt; SurfaceFlinger (System)ï¼š SurfaceFlinger æ¥æ”¶ WebView çš„ç‹¬ç«‹ Layerã€‚</li>
<li>SurfaceFlinger (System)ï¼š æ‰§è¡Œç³»ç»Ÿçº§åˆæˆï¼Œå°† WebView Layer æ”¾ç½®åœ¨æ­£ç¡®çš„ Z è½´é¡ºåºå’Œä½ç½®ä¸Šï¼Œå¹¶æœ€ç»ˆæ˜¾ç¤ºã€‚</li>
</ol>
<h2 data-id="heading-39">5. <strong>æ€»ç»“ä¸å»ºè®®</strong></h2>








































<table><thead><tr><th align="left">æŠ€æœ¯æ ˆ</th><th align="left">ç³»ç»Ÿé›†æˆåº¦</th><th align="left">çº¿ç¨‹éš”ç¦»ç²’åº¦</th><th align="left">å…³é”®æ€§èƒ½å…³æ³¨ç‚¹</th><th align="left">å…¸å‹åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong>Native/Compose</strong></td><td align="left">é«˜ (å…±äº« RenderThread)</td><td align="left">CPU/GPU éš”ç¦» (RT)</td><td align="left">ä¼˜åŒ– UI çº¿ç¨‹çš„è®°å½•/é‡ç»„è´Ÿè½½ã€‚</td><td align="left">æ ‡å‡† UI ç•Œé¢ï¼Œéœ€è¦é«˜åº¦åŸç”Ÿå¹³å°ç‰¹æ€§ã€‚</td></tr><tr><td align="left"><strong>Flutter</strong></td><td align="left">ä½ (ç‹¬ç«‹å¼•æ“)</td><td align="left">å½»åº•éš”ç¦» (Raster Thread)</td><td align="left">è·¨å¹³å°ä¸€è‡´æ€§ï¼Œå‡å°‘ Platform View çš„åˆæˆå¼€é”€ã€‚</td><td align="left">é«˜æ€§èƒ½ã€é«˜è‡ªå®šä¹‰åº¦ UIï¼Œè·¨å¹³å°é¡¹ç›®ã€‚</td></tr><tr><td align="left"><strong>GLSurfaceView</strong></td><td align="left">ä¸­ (ç‹¬ç«‹ Surface)</td><td align="left">å½»åº•éš”ç¦» (GLES Thread)</td><td align="left">è‡ªä¸»æ§åˆ¶ eglSwapBuffers é¢‘ç‡ã€‚</td><td align="left">æ¸¸æˆå¼•æ“ï¼Œå®æ—¶è§†é¢‘æµï¼Œè‡ªå®šä¹‰ 3D æ¸²æŸ“ã€‚</td></tr><tr><td align="left"><strong>WebView</strong></td><td align="left">ä¸­ (è·¨è¿›ç¨‹ Surface)</td><td align="left">å½»åº•éš”ç¦» (OOPR)</td><td align="left">è·¨è¿›ç¨‹é€šä¿¡å»¶è¿Ÿå’Œ SurfaceFlinger çš„ Layer åˆæˆå¼€é”€ã€‚</td><td align="left">åµŒå…¥å¤æ‚ HTML/JS å†…å®¹ã€‚</td></tr></tbody></table>
<p><strong>åŸç”Ÿ UI çš„ç“¶é¢ˆè½¬ç§»ï¼š</strong> å¯¹äº Native View å’Œ Composeï¼ŒAOSP å·²ç»é€šè¿‡ RenderThread è§£å†³äº† GPU æ‰§è¡Œé˜»å¡ UI çº¿ç¨‹çš„é—®é¢˜ã€‚ç„¶è€Œï¼Œæ€§èƒ½ä¼˜åŒ–çš„é‡ç‚¹å·²ä» GPU è½¬ç§»åˆ° UI çº¿ç¨‹çš„ <strong>è®°å½•/å¸ƒå±€/é‡ç»„</strong> é˜¶æ®µã€‚</p>
<p><strong>ç‹¬ç«‹ Surface çš„å¼€é”€ï¼š</strong> æ— è®ºé‡‡ç”¨ Flutterã€WebView è¿˜æ˜¯ GLSurfaceViewï¼Œå½“å®ƒä»¬ä½¿ç”¨ç‹¬ç«‹çš„ Surface å¯¹è±¡æ—¶ï¼Œéƒ½ä¸å¯é¿å…åœ°æˆä¸º SurfaceFlinger çš„ä¸€ä¸ªç‹¬ç«‹ Layerã€‚è™½ç„¶è¿™æä¾›äº†æä½³çš„çº¿ç¨‹éš”ç¦»ï¼Œä½†ä¹Ÿæ„å‘³ç€æ¯ä¸€æ¬¡æ›´æ–°éƒ½å¿…é¡»ç»è¿‡ç³»ç»Ÿåˆæˆå™¨çš„å¤„ç†ã€‚å¯¹äºéœ€è¦å¤§é‡ Layer åˆæˆæˆ–å¤æ‚æ··åˆçš„åœºæ™¯ï¼Œè¿™å¯èƒ½å¯¼è‡´æ¯” HWC é›¶æ‹·è´åˆæˆæ›´é«˜çš„ç³»ç»Ÿèµ„æºæ¶ˆè€—ã€‚</p>
<p><strong>é«˜æ€§èƒ½å›¾å½¢çš„é€‰æ‹©ï¼š</strong> å¯¹äºéœ€è¦å®æ—¶ï¼ˆ60fps æˆ– 120fpsï¼‰æ›´æ–°å’Œå®Œå…¨æ§åˆ¶å›¾å½¢ç®¡çº¿çš„åœºæ™¯ï¼ŒGLSurfaceView æˆ– Flutter Engine æ˜¯æœ€ä½³é€‰æ‹©ã€‚å®ƒä»¬é€šè¿‡ä¸“ç”¨çš„æ¸²æŸ“çº¿ç¨‹å®ç°äº†é«˜ç¡®å®šæ€§æ€§èƒ½ï¼Œå°†å…‰æ …åŒ–å·¥ä½œè´Ÿè½½ä» AOSP çš„ä¸»æ¸²æŸ“è·¯å¾„ä¸­å®Œå…¨è§£è€¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openGausså®æˆ˜ï¼šPythonå¼€å‘ä¸AIå‘é‡æ•°æ®åº“åº”ç”¨]]></title>    <link>https://juejin.cn/post/7572714389943271476</link>    <guid>https://juejin.cn/post/7572714389943271476</guid>    <pubDate>2025-11-16T11:15:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572714389943271476" data-draft-id="7572534419880525859" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openGausså®æˆ˜ï¼šPythonå¼€å‘ä¸AIå‘é‡æ•°æ®åº“åº”ç”¨"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-16T11:15:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openGausså®æˆ˜ï¼šPythonå¼€å‘ä¸AIå‘é‡æ•°æ®åº“åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T11:15:34.000Z" title="Sun Nov 16 2025 11:15:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>ç»è¿‡å‰ä¸¤ç¯‡æ–‡ç« çš„é“ºå«ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†openGaussçš„éƒ¨ç½²å®‰è£…å’Œä½¿ç”¨Data Studioè¿›è¡Œå¯è§†åŒ–ç®¡ç†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥åˆ°äº†æœ¬ç³»åˆ—æ–‡ç« çš„ç»ˆç« ï¼Œå°†ç›®å…‰èšç„¦äºå¼€å‘è€…æœ€å…³å¿ƒçš„ç¯èŠ‚â€”â€”å¦‚ä½•åœ¨åº”ç”¨ç¨‹åºä¸­ä¸openGaussè¿›è¡Œäº¤äº’ï¼Œå¹¶æ¢ç´¢å…¶åœ¨AIé¢†åŸŸçš„åº”ç”¨æ½œåŠ›ã€‚</p>
<p>æœ¬æ–‡å°†ä»¥ç›®å‰æœ€æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€Pythonä¸ºä¾‹ï¼Œè¯¦ç»†æ¼”ç¤ºå¦‚ä½•è¿æ¥openGaussæ•°æ®åº“ï¼Œå¹¶å›´ç»•ä¸¤ä¸ªå…¸å‹çš„ä¸šåŠ¡åœºæ™¯â€”â€”â€œç”¨æˆ·ç®¡ç†ç³»ç»Ÿâ€å’Œâ€œè®¢å•æ”¯ä»˜æµç¨‹â€ï¼Œæ„å»ºå®Œæ•´çš„CRUDï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰ä¸äº‹åŠ¡å¤„ç†ä»£ç ç¤ºä¾‹ã€‚æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ç»“åˆä¸šç•Œçƒ­ç‚¹ï¼Œæ¢è®¨å¦‚ä½•åˆ©ç”¨openGaussçš„å‘é‡è®¡ç®—èƒ½åŠ›ï¼Œæ„å»ºä¸€ä¸ªç®€å•çš„ä»¥æ–‡æœå›¾RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰åº”ç”¨ï¼Œå……åˆ†å±•ç°openGaussä½œä¸ºä¸€æ¬¾AIåŸç”Ÿæ•°æ®åº“çš„é­…åŠ›ã€‚
@[toc]
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ecc742f65bf4188bba3c4639c39463e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763896534&amp;x-signature=tVp0Zw4ALYTw94xR53Kq9KLvdLM%3D" alt="image.png" loading="lazy"/></p>
<p>æœ¬æ–‡çš„åç«¯ç¯å¢ƒä¸ºâ€œCentOS 7.9 + openGauss æç®€ç‰ˆï¼ˆsimpleInstallï¼Œ6.xï¼‰â€ï¼Œæ•°æ®åº“è¿è¡Œåœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œåº”ç”¨åœ¨æœ¬åœ°å¼€å‘æœºï¼ˆWindows/macOS/Linuxï¼‰è¿è¡Œå¹¶è¿œç¨‹è¿æ¥åˆ°æ•°æ®åº“ã€‚è‹¥è¿œç¨‹è¿æ¥å¤±è´¥ï¼Œè¯·å‚è€ƒç¬¬äºŒç¯‡ä¸­å…³äº<code>listen_addresses</code>ä¸<code>pg_hba.conf</code>çš„é…ç½®è¯´æ˜ã€‚</p>
<h2 data-id="heading-1">Pythonè¿æ¥openGaussï¼špsycopg2é©±åŠ¨</h2>
<p>openGausså…¼å®¹PostgreSQLç”Ÿæ€ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨PostgreSQLæœ€æˆç†Ÿçš„Pythoné©±åŠ¨<code>psycopg2</code>æ¥è¿æ¥å’Œæ“ä½œopenGaussæ•°æ®åº“ã€‚</p>
<h3 data-id="heading-2">1. å®‰è£…psycopg2</h3>
<p>é¦–å…ˆï¼Œå®‰è£…Pythoné©±åŠ¨ã€‚è¯·æ ¹æ®ç¯å¢ƒé€‰æ‹©ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<ul>
<li>Python 3.8 åŠä»¥ä¸Šï¼ˆæ¨èï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">python3 -m pip install --user psycopg2-binary
</code></pre>
<ul>
<li>CentOS 7 + Python 3.6ï¼ˆéœ€å›ºå®šç‰ˆæœ¬å¹¶ä½¿ç”¨å›½å†…é•œåƒï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">python3 -m pip install --upgrade <span class="hljs-string">"pip==21.3.1"</span> --user -i https://pypi.tuna.tsinghua.edu.cn/simple
python3 -m pip install --user -i https://mirrors.aliyun.com/pypi/simple <span class="hljs-string">"psycopg2-binary==2.8.6"</span>
<span class="hljs-comment"># å¦‚ç½‘ç»œè¾ƒæ…¢ï¼Œå¯è¿½åŠ  --default-timeout=120</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31f000e4a5d84062a91348784cce2b50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763896534&amp;x-signature=Cxbor0a7bzzELL%2BEAvA58M9X0p8%3D" alt="e1821a45e4b7bcadd15800e7f81934cf.png" loading="lazy"/></p>
<p>æç¤ºï¼šå°½é‡ä½¿ç”¨ <code>python3 -m pip</code>ï¼ˆæˆ– <code>pip3</code>ï¼‰ï¼Œå¹¶åœ¨éè™šæ‹Ÿç¯å¢ƒä¸‹åŠ  <code>--user</code> ä»¥é¿å…æƒé™å†²çªï¼›è‹¥éœ€æºç ç¼–è¯‘ï¼Œå¯æ”¹ä¸ºå®‰è£… <code>psycopg2==2.8.6</code>ï¼Œå¹¶æå‰å®‰è£…æ„å»ºä¾èµ–ï¼ˆå¦‚ <code>gcc</code>ã€<code>python3-devel</code>ã€<code>postgresql-libs</code>/<code>postgresql-devel</code>ï¼‰ã€‚</p>
<p>å¸¸è§å®‰è£…é—®é¢˜æ’éšœï¼š</p>
<ul>
<li>ä¸‹è½½è¶…æ—¶ï¼šåŠ å…¥ <code>--default-timeout=120</code> æˆ–åˆ‡æ¢é•œåƒæºï¼ˆå¦‚æ¸…åã€é˜¿é‡Œï¼‰ã€‚</li>
<li>è¯ä¹¦/ä»£ç†ï¼šåœ¨å…¬å¸ç½‘ç»œéœ€é…ç½® HTTPS ä»£ç†æˆ–ä¸´æ—¶å…³é—­ MITM æ£€æŸ¥ï¼›ä¹Ÿå¯ç¦»çº¿ä¸‹è½½ <code>.whl</code> åæœ¬åœ°å®‰è£…ã€‚</li>
<li>æƒé™è­¦å‘Šï¼šåœ¨ root ç¯å¢ƒä¸‹å»ºè®®ä½¿ç”¨ <code>--user</code> æˆ–åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚</li>
<li>Windows ä¸å¤šç‰ˆæœ¬ Python æ˜ å°„ï¼šåœ¨ PowerShell æ‰§è¡Œ <code>python -V</code>ã€<code>pip -V</code>ã€<code>py -0p</code>ï¼Œç¡®ä¿ <code>pip</code> ä¸ <code>python</code> æŒ‡å‘åŒä¸€è§£é‡Šå™¨ï¼›ä¼˜å…ˆä½¿ç”¨ <code>python -m pip install --user psycopg2-binary</code>ã€‚</li>
<li>è·¯å¾„æ£€æŸ¥ï¼š<code>where python</code>ã€<code>where pip</code> æŸ¥çœ‹å¯æ‰§è¡Œè·¯å¾„ï¼›å¿…è¦æ—¶ä½¿ç”¨ç›®æ ‡è§£é‡Šå™¨ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚ <code>C:\Python39\python.exe -m pip install psycopg2-binary</code>ã€‚</li>
<li>å¿«é€ŸéªŒè¯å®‰è£…ï¼š<code>python -c "import psycopg2, sys; print(psycopg2.__version__, sys.executable)"</code>ï¼Œç¡®è®¤é©±åŠ¨ç‰ˆæœ¬ä¸è§£é‡Šå™¨è·¯å¾„åŒ¹é…ã€‚</li>
<li>æºç ç¼–è¯‘æç¤ºï¼šè‹¥æŠ¥ç¼ºå°‘ <code>pg_config</code> æˆ–å¼€å‘å¤´æ–‡ä»¶ï¼Œä¼˜å…ˆä½¿ç”¨ <code>psycopg2-binary</code>ï¼›æˆ–å…ˆå®‰è£… <code>postgresql-libs</code>/<code>postgresql-devel</code> ä¸ <code>python3-devel</code> åå†ç¼–è¯‘ <code>psycopg2</code>ã€‚</li>
</ul>
<h3 data-id="heading-3">2. å»ºç«‹æ•°æ®åº“è¿æ¥</h3>
<p>è¿æ¥openGaussæ•°æ®åº“éå¸¸ç®€å•ï¼Œåªéœ€æä¾›ä¸»æœºã€ç«¯å£ã€ç”¨æˆ·åã€å¯†ç å’Œæ•°æ®åº“åå³å¯ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä¸å…¥é—¨ç¯‡é»˜è®¤å‚æ•°ä¿æŒä¸€è‡´ï¼ˆè¯·æ›¿æ¢ä¸ºå®é™…çš„æœåŠ¡å™¨IPä¸å¯†ç ï¼‰</p>
<p>å®æ“æ­¥éª¤ï¼ˆæœ¬åœ°å¼€å‘æœºï¼‰ï¼š</p>
<ul>
<li>åœ¨æœ¬åœ°ä»»æ„å·¥ä½œç›®å½•åˆ›å»ºé¡¹ç›®å¹¶æ–°å»ºè¿æ¥æµ‹è¯•è„šæœ¬ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Windows PowerShell</span>
<span class="hljs-built_in">mkdir</span> opengauss_demo
<span class="hljs-built_in">cd</span> opengauss_demo
<span class="hljs-comment"># Linux/macOS å¯ç”¨ï¼š</span>
<span class="hljs-comment"># mkdir -p opengauss_demo</span>
<span class="hljs-comment"># å¦‚å°šæœªå®‰è£…é©±åŠ¨ï¼Œè¯·å…ˆæ‰§è¡Œï¼š</span>
python3 -m pip install --user psycopg2-binary
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a73c91a6b2046efa57f07c0755e335a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763896534&amp;x-signature=loLG9NMvfbamgfIyenUsRAfTRpg%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨è¯¥ç›®å½•ä¸­æ–°å»ºæ–‡ä»¶ <code>db_connect_test.py</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># db_connect_test.py</span>
<span class="hljs-keyword">import</span> psycopg2

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_db_connection</span>():
    <span class="hljs-keyword">try</span>:
        conn = psycopg2.connect(
            host=<span class="hljs-string">"YOUR_SERVER_IP"</span>,   <span class="hljs-comment"># æ›¿æ¢ä¸ºäº‘æœåŠ¡å™¨å…¬ç½‘IP</span>
            port=<span class="hljs-number">5432</span>,
            user=<span class="hljs-string">"omm"</span>,
            password=<span class="hljs-string">"Gauss@123456"</span>, <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…å¯†ç </span>
            database=<span class="hljs-string">"postgres"</span>,
            connect_timeout=<span class="hljs-number">5</span>
        )
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®åº“è¿æ¥æˆåŠŸï¼"</span>)
        <span class="hljs-keyword">return</span> conn
    <span class="hljs-keyword">except</span> psycopg2.OperationalError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®åº“è¿æ¥å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    conn = get_db_connection()
    <span class="hljs-keyword">if</span> conn:
        conn.close()
</code></pre>
<p>è¿è¡Œä¸éªŒè¯ï¼ˆWindows/ macOS/ Linuxï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python3 db_connect_test.py
<span class="hljs-comment"># è‹¥ Windows ä¸Šæ²¡æœ‰ python3 å‘½ä»¤ï¼Œå¯ç”¨ï¼š</span>
<span class="hljs-comment"># python db_connect_test.py</span>
</code></pre>
<p>é¢„æœŸè¾“å‡ºï¼šå‡ºç°â€œæ•°æ®åº“è¿æ¥æˆåŠŸï¼â€å¹¶é€€å‡ºï¼›å¦‚æŠ¥é”™ï¼ŒæŒ‰ä¸‹æ–¹â€œè¿œç¨‹è¿æ¥å¤±è´¥æ’æŸ¥è¦ç‚¹â€é€é¡¹æ£€æŸ¥ã€‚</p>
<p>è‹¥å‡ºç°è¿æ¥è¶…æ—¶æˆ–è®¤è¯å¤±è´¥ï¼Œè¯·å›åˆ°ç¬¬äºŒç¯‡ç¡®è®¤ï¼š</p>
<ul>
<li><code>postgresql.conf</code>çš„<code>listen_addresses</code>æ˜¯å¦ä¸º<code>'*'</code>æˆ–å¯¹åº”IPï¼›</li>
<li><code>pg_hba.conf</code>æ˜¯å¦æ·»åŠ äº†å…è®¸è¿œç¨‹è®¿é—®çš„<code>host</code>æ¡ç›®ï¼ˆ<code>md5</code>è®¤è¯ï¼‰ï¼›</li>
<li>äº‘å®‰å…¨ç»„æ˜¯å¦å¼€æ”¾<code>TCP 5432</code>å…¥ç«™è§„åˆ™åˆ°æ‚¨çš„æœ¬åœ°IPèŒƒå›´ã€‚</li>
</ul>
<p>è¿æ¥å¤±è´¥å¿«é€Ÿæ’æŸ¥ï¼š</p>
<ul>
<li>æ›¿æ¢å ä½ç¬¦ï¼šç¡®è®¤å·²å°† <code>YOUR_SERVER_IP</code> ä¸ <code>Gauss@123456</code> æ›¿æ¢ä¸ºçœŸå®å€¼ï¼›è‹¥è„šæœ¬æŠ¥ <code>NoneType</code> é”™è¯¯ï¼Œé€šå¸¸æ˜¯è¿æ¥å¤±è´¥å¯¼è‡´è¿”å› <code>None</code>ã€‚</li>
<li>ç«¯å£è¿é€šæ€§ï¼šWindows æ‰§è¡Œ <code>Test-NetConnection YOUR_SERVER_IP -Port 5432</code>ï¼›Linux/macOS æ‰§è¡Œ <code>telnet YOUR_SERVER_IP 5432</code> æˆ– <code>nc -vz YOUR_SERVER_IP 5432</code>ã€‚</li>
<li>è®¤è¯è§„åˆ™ï¼šåœ¨æ•°æ®åº“ä¾§ <code>pg_hba.conf</code> æ·»åŠ åˆé€‚çš„ <code>host</code> æ¡ç›®ï¼ˆå¦‚ <code>md5</code>ï¼‰ï¼Œä¿®æ”¹å <code>gs_ctl reload</code> æˆ–é‡å¯å®ä¾‹ã€‚</li>
<li>åˆå§‹ç”¨æˆ·è¿œç¨‹è¿æ¥è¯´æ˜ï¼šä¸å»ºè®®ç”¨åˆå§‹ç”¨æˆ·ï¼ˆå¦‚ <code>omm</code>ï¼‰ä½œä¸ºåº”ç”¨è¿œç¨‹è´¦å·ï¼›æ¨èæ–°å»ºä¸šåŠ¡ç”¨æˆ·ï¼ˆå¦‚ <code>xsc</code>ï¼‰å¹¶æˆäºˆè¡¨/åºåˆ—æƒé™ï¼Œè§ä¸‹æ–‡â€œç”¨æˆ·ç®¡ç†â€æˆæƒæ–¹æ¡ˆã€‚</li>
<li>æ•°æ®åº“/Schemaï¼šç¡®è®¤è¿æ¥çš„ <code>database="postgres"</code> ä¸ <code>search_path</code> åŒ…å« <code>public</code>ï¼›ä½¿ç”¨é™å®šå <code>public.t_user</code> å¯é¿å…è·¯å¾„é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-4">åœºæ™¯ä¸€ï¼šç”¨æˆ·ç®¡ç†ç³»ç»Ÿçš„CRUDå®æˆ˜</h2>
<p>ç”¨æˆ·ç®¡ç†æ˜¯å‡ ä¹æ‰€æœ‰åº”ç”¨çš„æ ‡é…ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ŒåŒ…å«å¢ã€åˆ ã€æ”¹ã€æŸ¥åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-5">1. åˆ›å»ºç”¨æˆ·è¡¨</h3>
<p>é¦–å…ˆï¼Œåœ¨æ•°æ®åº“ä¸­åˆ›å»º<code>t_user</code>è¡¨ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> t_user (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">WITH</span> <span class="hljs-type">TIME</span> ZONE <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);
</code></pre>
<p>å®æ“æ­¥éª¤ï¼ˆæ•°æ®åº“ä¾§ï¼‰ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>gsql</code> è¿œç¨‹è¿æ¥åˆ° openGaussï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">gsql -d postgres -h YOUR_SERVER_IP -p 5432 -U omm -W
</code></pre>
<ul>
<li>æ‰§è¡Œä¸Šè¿° <code>CREATE TABLE</code> è¯­å¥åˆ›å»ºè¡¨ã€‚</li>
<li>éªŒè¯ï¼š</li>
</ul>
<pre><code class="hljs language-sql" lang="sql">\dt
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t_user;
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/333ff30978cd4d66a3fdcc7ab7569942~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763896534&amp;x-signature=fUIaxUTfyMWvpt9F%2FFh%2FTDrNf1g%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">2. Pythonä»£ç å®ç°</h3>
<p>åœ¨æœ¬åœ°å¼€å‘æœºåˆ›å»ºç›®å½•ï¼ˆä¾‹å¦‚ <code>opengauss_demo</code>ï¼‰ï¼Œæ–°å¢æ–‡ä»¶ <code>user_crud.py</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># user_crud.py</span>

<span class="hljs-keyword">import</span> psycopg2
<span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> closing


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_db_connection</span>():
    <span class="hljs-keyword">try</span>:
        conn = psycopg2.connect(
            host=<span class="hljs-string">"YOUR_SERVER_IP"</span>,
            port=<span class="hljs-number">5432</span>,
            user=<span class="hljs-string">"omm"</span>,
            password=<span class="hljs-string">"Gauss@123456"</span>,
            database=<span class="hljs-string">"postgres"</span>,
            connect_timeout=<span class="hljs-number">5</span>,
        )
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®åº“è¿æ¥æˆåŠŸï¼"</span>)
        <span class="hljs-keyword">return</span> conn
    <span class="hljs-keyword">except</span> psycopg2.OperationalError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®åº“è¿æ¥å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_user</span>(<span class="hljs-params">username, email</span>):
    <span class="hljs-keyword">with</span> closing(get_db_connection()) <span class="hljs-keyword">as</span> conn:
        <span class="hljs-keyword">with</span> conn.cursor() <span class="hljs-keyword">as</span> cursor:
            cursor.execute(
                <span class="hljs-string">"INSERT INTO t_user (username, email) VALUES (%s, %s)"</span>,
                (username, email),
            )
            conn.commit()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”¨æˆ· '<span class="hljs-subst">{username}</span>' åˆ›å»ºæˆåŠŸã€‚"</span>)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_by_username</span>(<span class="hljs-params">username</span>):
    <span class="hljs-keyword">with</span> closing(get_db_connection()) <span class="hljs-keyword">as</span> conn:
        <span class="hljs-keyword">with</span> conn.cursor() <span class="hljs-keyword">as</span> cursor:
            cursor.execute(
                <span class="hljs-string">"SELECT id, username, email FROM t_user WHERE username = %s"</span>,
                (username,),
            )
            <span class="hljs-keyword">return</span> cursor.fetchone()


<span class="hljs-keyword">def</span> <span class="hljs-title function_">update_user_email</span>(<span class="hljs-params">username, new_email</span>):
    <span class="hljs-keyword">with</span> closing(get_db_connection()) <span class="hljs-keyword">as</span> conn:
        <span class="hljs-keyword">with</span> conn.cursor() <span class="hljs-keyword">as</span> cursor:
            cursor.execute(
                <span class="hljs-string">"UPDATE t_user SET email = %s WHERE username = %s"</span>,
                (new_email, username),
            )
            conn.commit()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”¨æˆ· '<span class="hljs-subst">{username}</span>' çš„é‚®ç®±æ›´æ–°æˆåŠŸã€‚"</span>)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">delete_user</span>(<span class="hljs-params">username</span>):
    <span class="hljs-keyword">with</span> closing(get_db_connection()) <span class="hljs-keyword">as</span> conn:
        <span class="hljs-keyword">with</span> conn.cursor() <span class="hljs-keyword">as</span> cursor:
            cursor.execute(
                <span class="hljs-string">"DELETE FROM t_user WHERE username = %s"</span>,
                (username,),
            )
            conn.commit()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”¨æˆ· '<span class="hljs-subst">{username}</span>' åˆ é™¤æˆåŠŸã€‚"</span>)


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    create_user(<span class="hljs-string">"john_doe"</span>, <span class="hljs-string">"john.doe@example.com"</span>)
    user = get_user_by_username(<span class="hljs-string">"john_doe"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æŸ¥è¯¢åˆ°ç”¨æˆ·: <span class="hljs-subst">{user}</span>"</span>)
    update_user_email(<span class="hljs-string">"john_doe"</span>, <span class="hljs-string">"john.doe.new@example.com"</span>)
    user = get_user_by_username(<span class="hljs-string">"john_doe"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ›´æ–°åç”¨æˆ·: <span class="hljs-subst">{user}</span>"</span>)
    delete_user(<span class="hljs-string">"john_doe"</span>)
</code></pre>
<p>è¿è¡Œä¸éªŒè¯ï¼ˆæœ¬åœ°å¼€å‘æœºï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> opengauss_demo
python3 user_crud.py
</code></pre>
<p>é¢„æœŸè¾“å‡ºï¼šä¾æ¬¡æ‰“å°â€œæ•°æ®åº“è¿æ¥æˆåŠŸâ€ã€â€œåˆ›å»ºæˆåŠŸâ€ã€â€œæŸ¥è¯¢åˆ°ç”¨æˆ·â€ã€â€œæ›´æ–°åç”¨æˆ·â€ã€â€œåˆ é™¤æˆåŠŸâ€ã€‚
å¦‚éœ€æ•°æ®åº“ä¾§äºŒæ¬¡ç¡®è®¤ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t_user <span class="hljs-keyword">WHERE</span> username<span class="hljs-operator">=</span><span class="hljs-string">'john_doe'</span>;
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7233e7af11948aab7c769fb30c3055a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763896534&amp;x-signature=XwAJe6arZphy41IKFnd5LNjUOCE%3D" alt="image.png" loading="lazy"/></p>
<p>å¸¸è§æŠ¥é”™ä¸è§£å†³ï¼ˆç”¨æˆ·ç®¡ç†ï¼‰ï¼š</p>
<p>æˆ‘ç”¨åº”ç”¨è´¦å· xsc è¿œç¨‹è¿åº“ï¼Œä½†è¡¨ t_user æ˜¯åˆå§‹ç”¨æˆ· omm åˆ›å»ºå’Œæ‹¥æœ‰ï¼›é»˜è®¤æƒé™ä¸‹ï¼Œ xsc æ²¡æœ‰å¯¹è¯¥è¡¨çš„æ“ä½œæƒé™ï¼Œå› æ­¤å‡ºç° â€œpermission denied for relation t_userâ€ã€‚å¦å¤– openGauss ä¸å»ºè®®ç”¨åˆå§‹ç”¨æˆ·åšè¿œç¨‹åº”ç”¨è¿æ¥ï¼Œè¿™æ˜¯å®‰å…¨æœ€ä½³å®è·µã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c525931642614098abb3198fab856355~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763896534&amp;x-signature=KRp%2FQsUywXFXOOt%2B%2BO1es73%2Fx%2Bw%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p>æŠ¥é”™ <code>psycopg2.errors.InsufficientPrivilege: permission denied for relation t_user</code>ï¼šä¸šåŠ¡ç”¨æˆ·ï¼ˆå¦‚ <code>xsc</code>ï¼‰ç¼ºå°‘æƒé™ã€‚è¯·åœ¨æœåŠ¡å™¨ä¸Šä»¥æ‰€æœ‰è€…/ç®¡ç†å‘˜ï¼ˆé€šå¸¸ä¸º <code>omm</code>ï¼‰æ‰§è¡Œï¼š</p>
<ul>
<li><code>GRANT USAGE ON SCHEMA public TO xsc;</code></li>
<li><code>GRANT SELECT, INSERT, UPDATE, DELETE ON TABLE public.t_user TO xsc;</code></li>
<li><code>GRANT USAGE, SELECT ON SEQUENCE public.t_user_id_seq TO xsc;</code>
åºåˆ—æˆæƒæ˜¯å› ä¸º <code>SERIAL</code> ä¼šåˆ›å»ºéšå¼åºåˆ—ï¼Œæ’å…¥æ—¶éœ€è¯»å†™åºåˆ—ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d9d87773a7a46438c9d9bb8592dc554~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763896534&amp;x-signature=XC2mEn4Zyoz7gtTm6mjmvIb1tn8%3D" alt="image.png" loading="lazy"/></li>
</ul>
</li>
<li>
<p>å¯é€‰ï¼ˆéœ€è°¨æ…ï¼‰ï¼šå°†æ‰€æœ‰è€…å˜æ›´ä¸ºä¸šåŠ¡ç”¨æˆ·ä»¥ç®€åŒ–æƒé™ç®¡ç†ï¼š</p>
<ul>
<li><code>ALTER TABLE public.t_user OWNER TO xsc;</code></li>
<li><code>ALTER SEQUENCE public.t_user_id_seq OWNER TO xsc;</code></li>
</ul>
</li>
<li>
<p>ä»£ç å¥å£®æ€§å»ºè®®ï¼šåœ¨æ¯ä¸ªæ“ä½œå‰åˆ¤æ–­è¿æ¥æ˜¯å¦æˆåŠŸï¼Œå¹¶ä½¿ç”¨è¡¨çš„é™å®šåï¼š</p>
</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_user</span>(<span class="hljs-params">username, email</span>):
    conn = get_db_connection()  <span class="hljs-comment"># å¯å°† user æ”¹ä¸ºä¸šåŠ¡è´¦å·ï¼Œå¦‚ xsc</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> conn:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿æ¥å¤±è´¥ï¼Œå·²è·³è¿‡ insert"</span>)
        <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">with</span> conn.cursor() <span class="hljs-keyword">as</span> cur:
            cur.execute(
                <span class="hljs-string">"INSERT INTO public.t_user (username, email) VALUES (%s, %s)"</span>,
                (username, email),
            )
        conn.commit()
    <span class="hljs-keyword">finally</span>:
        conn.close()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_by_username</span>(<span class="hljs-params">username</span>):
    conn = get_db_connection()
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> conn:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">with</span> conn.cursor() <span class="hljs-keyword">as</span> cur:
            cur.execute(
                <span class="hljs-string">"SELECT id, username, email FROM public.t_user WHERE username = %s"</span>,
                (username,),
            )
            <span class="hljs-keyword">return</span> cur.fetchone()
    <span class="hljs-keyword">finally</span>:
        conn.close()
</code></pre>
<ul>
<li>æˆæƒå¿«é€ŸéªŒè¯ï¼š
<ul>
<li><code>gsql -d postgres -h YOUR_SERVER_IP -p 5432 -U xsc -W</code></li>
<li>ä¾æ¬¡æ‰§è¡Œï¼š<code>INSERT/SELECT/UPDATE/DELETE</code> åˆ° <code>public.t_user</code>ï¼Œç¡®è®¤æ— æƒé™æŠ¥é”™ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-7">åœºæ™¯äºŒï¼šè®¢å•æ”¯ä»˜æµç¨‹çš„äº‹åŠ¡å¤„ç†</h2>
<p>åœ¨ç”µå•†ç­‰é‡‘èæ•æ„Ÿåœºæ™¯ä¸­ï¼Œæ•°æ®ä¸€è‡´æ€§è‡³å…³é‡è¦ã€‚æˆ‘ä»¬å°†æ¨¡æ‹Ÿä¸€ä¸ªâ€œç”¨æˆ·ä¸‹å•æ‰£å‡åº“å­˜â€çš„åœºæ™¯ï¼Œæ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨äº‹åŠ¡ä¿è¯æ“ä½œçš„åŸå­æ€§ã€‚</p>
<h3 data-id="heading-8">1. åˆ›å»ºå•†å“è¡¨å’Œè®¢å•è¡¨</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> t_product (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    stock <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> t_order (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    product_id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    quantity <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">WITH</span> <span class="hljs-type">TIME</span> ZONE <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);

<span class="hljs-comment">-- æ’å…¥ä¸€ä¸ªå•†å“</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_product (name, stock) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'openGauss T-shirt'</span>, <span class="hljs-number">100</span>);
</code></pre>
<p>å®æ“æ­¥éª¤ï¼ˆæ•°æ®åº“ä¾§ï¼‰ï¼š</p>
<ul>
<li>è¿æ¥æ•°æ®åº“ï¼ˆåŒä¸Šï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">gsql -d postgres -h YOUR_SERVER_IP -p 5432 -U omm -W
</code></pre>
<ul>
<li>ä¾æ¬¡æ‰§è¡Œåˆ›å»ºä¸¤å¼ è¡¨ä¸åˆå§‹åŒ–æ•°æ®çš„ SQLï¼›å¯ç”¨ä¸‹åˆ—æŸ¥è¯¢éªŒè¯ï¼š</li>
</ul>
<pre><code class="hljs language-sql" lang="sql">\dt
<span class="hljs-keyword">SELECT</span> id, name, stock <span class="hljs-keyword">FROM</span> t_product;  <span class="hljs-comment">-- åº”çœ‹åˆ°ä¸€æ¡åº“å­˜ä¸º100çš„å•†å“</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> t_order;           <span class="hljs-comment">-- åˆå§‹ä¸º0</span>
</code></pre>
<h3 data-id="heading-9">2. Pythonä»£ç å®ç°</h3>
<p>åœ¨æœ¬åœ°å¼€å‘æœºåˆ›å»ºæ–‡ä»¶ <code>transaction_example.py</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># transaction_example.py</span>

<span class="hljs-keyword">import</span> psycopg2


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_db_connection</span>():
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">return</span> psycopg2.connect(
            host=<span class="hljs-string">"YOUR_SERVER_IP"</span>,
            port=<span class="hljs-number">5432</span>,
            user=<span class="hljs-string">"omm"</span>,
            password=<span class="hljs-string">"Gauss@123456"</span>,
            database=<span class="hljs-string">"postgres"</span>,
            connect_timeout=<span class="hljs-number">5</span>,
        )
    <span class="hljs-keyword">except</span> psycopg2.OperationalError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®åº“è¿æ¥å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">place_order</span>(<span class="hljs-params">product_id, quantity</span>):
    conn = get_db_connection()
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> conn:
        <span class="hljs-keyword">return</span>

    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">with</span> conn.cursor() <span class="hljs-keyword">as</span> cursor:
            <span class="hljs-comment"># 1. æ£€æŸ¥åº“å­˜å¹¶åŠ è¡Œé”ï¼Œé¿å…å¹¶å‘ä¸‹è¯»åˆ°æ—§åº“å­˜</span>
            cursor.execute(
                <span class="hljs-string">"SELECT stock FROM t_product WHERE id = %s FOR UPDATE"</span>,
                (product_id,),
            )
            row = cursor.fetchone()
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> row:
                <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"å•†å“ä¸å­˜åœ¨ï¼"</span>)
            stock = row[<span class="hljs-number">0</span>]
            <span class="hljs-keyword">if</span> stock &lt; quantity:
                <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"åº“å­˜ä¸è¶³ï¼"</span>)

            <span class="hljs-comment"># 2. æ‰£å‡åº“å­˜</span>
            cursor.execute(
                <span class="hljs-string">"UPDATE t_product SET stock = stock - %s WHERE id = %s"</span>,
                (quantity, product_id),
            )

            <span class="hljs-comment"># 3. åˆ›å»ºè®¢å•</span>
            cursor.execute(
                <span class="hljs-string">"INSERT INTO t_order (product_id, quantity) VALUES (%s, %s)"</span>,
                (product_id, quantity),
            )

            conn.commit()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸‹å•æˆåŠŸï¼"</span>)

    <span class="hljs-keyword">except</span> (Exception, psycopg2.Error) <span class="hljs-keyword">as</span> error:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸‹å•å¤±è´¥: <span class="hljs-subst">{error}</span>"</span>)
        conn.rollback()
    <span class="hljs-keyword">finally</span>:
        conn.close()


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    place_order(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)   <span class="hljs-comment"># æˆåŠŸä¸‹å•ï¼Œåº“å­˜ä»100å‡åˆ°95</span>
    place_order(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>) <span class="hljs-comment"># è¶…å–ç¤ºä¾‹ï¼Œå°†æŠ›å‡ºâ€œåº“å­˜ä¸è¶³ï¼â€å¹¶å›æ»š</span>
</code></pre>
<p>è¿è¡Œä¸éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python3 transaction_example.py
</code></pre>
<p>å¯åœ¨æ•°æ®åº“ä¾§éªŒè¯ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> id, stock <span class="hljs-keyword">FROM</span> t_product <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span>;   <span class="hljs-comment">-- åº”ä¸º95</span>
<span class="hljs-keyword">SELECT</span> id, product_id, quantity <span class="hljs-keyword">FROM</span> t_order; <span class="hljs-comment">-- åº”æ–°å¢ä¸€æ¡ quantity=5 çš„è®¢å•</span>
</code></pre>
<p>è¯´æ˜ï¼š<code>FOR UPDATE</code> ä¼šåœ¨æŸ¥è¯¢åˆ°çš„è¡Œä¸ŠåŠ æ’ä»–é”ï¼Œç¡®ä¿å¹¶å‘äº‹åŠ¡ä¸ä¼šåœ¨ä½ æäº¤å‰ä¿®æ”¹è¯¥è¡Œï¼Œé¿å…è¶…å–ï¼›ä¸€æ—¦å‘ç”Ÿå¼‚å¸¸ï¼Œä»£ç ä¼šæ‰§è¡Œ <code>rollback()</code> ä¿è¯åº“å­˜ä¸è®¢å•çš„ä¸€è‡´æ€§ã€‚</p>
<p>è¿™æ®µä»£ç ç¡®ä¿äº†â€œæ‰£å‡åº“å­˜â€å’Œâ€œåˆ›å»ºè®¢å•â€è¿™ä¸¤ä¸ªæ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ï¼Œé¿å…äº†æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p>
<p>å¸¸è§æŠ¥é”™ä¸å¤„ç†ï¼ˆäº‹åŠ¡ï¼‰ï¼š</p>
<ul>
<li>æƒé™é—®é¢˜ï¼šä¸šåŠ¡ç”¨æˆ·å¯¹ <code>t_product</code> éœ€è‡³å°‘ <code>SELECT, UPDATE</code>ï¼Œå¯¹ <code>t_order</code> éœ€ <code>INSERT, SELECT</code>ï¼Œå¹¶ä¸ºéšå¼åºåˆ—æˆäºˆ <code>USAGE, SELECT</code>ï¼ˆä¾‹å¦‚ <code>t_product_id_seq</code>ã€<code>t_order_id_seq</code>ï¼‰ã€‚</li>
<li>å¹¶å‘å†²çªï¼šè‹¥é‡åˆ° <code>could not serialize access due to concurrent update</code>ï¼Œè¯´æ˜å¹¶å‘æ›´æ–°å†²çªï¼›ä¿ç•™ <code>FOR UPDATE</code>ï¼Œåœ¨åº”ç”¨ä¾§æ•è·å¹¶é‡è¯•ï¼Œæˆ–ç¡®è®¤éš”ç¦»çº§åˆ«ä¸º <code>READ COMMITTED</code>ã€‚</li>
<li>å¼‚å¸¸å¤„ç†ï¼šä»»ä½•å¼‚å¸¸å‡åº” <code>rollback()</code> ä¿è¯ä¸€è‡´æ€§ï¼Œæäº¤æˆåŠŸåå†æ‰“å°â€œä¸‹å•æˆåŠŸâ€ã€‚</li>
</ul>
<h2 data-id="heading-10">åœºæ™¯ä¸‰ï¼šAIèµ‹èƒ½ - åŸºäºå‘é‡çš„ä»¥æ–‡æœå›¾ï¼ˆRAGï¼‰</h2>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬è¿›å…¥æœ€æ¿€åŠ¨äººå¿ƒçš„éƒ¨åˆ†ã€‚openGauss 5.0ç‰ˆæœ¬åå¼•å…¥äº†å¯¹å‘é‡æ•°æ®ç±»å‹å’Œå‘é‡è®¡ç®—çš„å†…ç½®æ”¯æŒï¼Œä½¿å…¶æˆä¸ºæ„å»ºAIåº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªç®€å•çš„RAGåº”ç”¨ï¼Œé€šè¿‡æ–‡æœ¬æè¿°æ¥æœç´¢ç›¸ä¼¼çš„å›¾ç‰‡ã€‚</p>
<h3 data-id="heading-11">1. å¼€å¯å‘é‡æ’ä»¶å¹¶åˆ›å»ºè¡¨</h3>
<p>é¦–å…ˆï¼Œéœ€è¦åœ¨æ•°æ®åº“ä¸­å¼€å¯<code>vectors</code>æ’ä»¶</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> EXTENSION vectors;
</code></pre>
<p>è¯´æ˜ï¼šéƒ¨åˆ†å‘è¡Œç‰ˆæˆ–æ„å»ºä¸­æ‰©å±•åå¯èƒ½ä¸º <code>vector</code>ï¼ˆpgvectorï¼‰ï¼Œè‹¥ä¸Šé¢çš„å‘½ä»¤æŠ¥æœªæ‰¾åˆ°æ‰©å±•ï¼Œå¯å°è¯•ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> EXTENSION vector;
</code></pre>
<p>ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªç”¨äºå­˜å‚¨å›¾ç‰‡å‘é‡çš„è¡¨ã€‚æœ¬æ–‡ä½¿ç”¨<code>clip-ViT-B-32</code>æ¨¡å‹ï¼Œå…¶é»˜è®¤è¾“å‡ºç»´åº¦ä¸º<code>512</code>ï¼Œå› æ­¤ç¤ºä¾‹ä½¿ç”¨<code>VECTOR(512)</code>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> t_image_vectors (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    image_path <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    image_vector VECTOR(<span class="hljs-number">512</span>)
);
</code></pre>
<p>éªŒè¯ä¸æ³¨æ„ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>\dx</code> æŸ¥çœ‹å·²å¯ç”¨çš„æ‰©å±•ï¼›è‹¥æ˜¾ç¤º <code>vectors</code>/<code>vector</code> å³æˆåŠŸã€‚</li>
<li><code>\d t_image_vectors</code> å¯æŸ¥çœ‹è¡¨ç»“æ„ï¼›å‘é‡å­—æ®µç±»å‹ä¸º <code>vector(512)</code>ã€‚</li>
</ul>
<h3 data-id="heading-12">2. Pythonä»£ç å®ç°</h3>
<p>è¿™ä¸ªåœºæ™¯éœ€è¦å€ŸåŠ©ä¸€ä¸ªèƒ½å¤Ÿå°†æ–‡æœ¬å’Œå›¾ç‰‡è½¬æ¢ä¸ºå‘é‡çš„æ¨¡å‹ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>sentence-transformers</code>åº“ä½œä¸ºç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">python3 -m pip install --user -i https://mirrors.aliyun.com/pypi/simple sentence-transformers Pillow
</code></pre>
<p>å‰ç½®è¯´æ˜ï¼šè¯¥æ­¥éª¤å»ºè®®åœ¨æœ¬åœ°å¼€å‘æœºçš„ Python 3.8+ ç¯å¢ƒæ‰§è¡Œï¼ˆ<code>sentence-transformers</code> å¯¹ Py3.6 æ”¯æŒä¸ä½³ï¼‰ã€‚é¦–æ¬¡è¿è¡Œä¼šä» HuggingFace ä¸‹è½½æ¨¡å‹ï¼Œéœ€è”ç½‘ã€‚</p>
<p>åœ¨æœ¬åœ°å‡†å¤‡å·¥ç¨‹ä¸å›¾ç‰‡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p opengauss_demo/assets/images
<span class="hljs-comment"># å°†ä¸¤å¼ ç¤ºä¾‹å›¾ç‰‡ä¿å­˜ä¸ºï¼šopengauss_demo/assets/images/cat.jpgã€dog.jpg</span>
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># rag_example.py</span>

<span class="hljs-keyword">import</span> psycopg2
<span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> SentenceTransformer
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_db_connection</span>():
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">return</span> psycopg2.connect(
            host=<span class="hljs-string">"YOUR_SERVER_IP"</span>,
            port=<span class="hljs-number">5432</span>,
            user=<span class="hljs-string">"omm"</span>,
            password=<span class="hljs-string">"Gauss@123456"</span>,
            database=<span class="hljs-string">"postgres"</span>,
            connect_timeout=<span class="hljs-number">5</span>,
        )
    <span class="hljs-keyword">except</span> psycopg2.OperationalError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®åº“è¿æ¥å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>


model = SentenceTransformer(<span class="hljs-string">"clip-ViT-B-32"</span>)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">insert_image_vector</span>(<span class="hljs-params">image_path: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-literal">None</span>:
    conn = get_db_connection()
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> conn:
        <span class="hljs-keyword">return</span>

    <span class="hljs-keyword">try</span>:
        img_embedding = model.encode(Image.<span class="hljs-built_in">open</span>(image_path))  <span class="hljs-comment"># 512ç»´</span>
        vector_str = <span class="hljs-string">"["</span> + <span class="hljs-string">","</span>.join(<span class="hljs-built_in">str</span>(<span class="hljs-built_in">float</span>(x)) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> img_embedding.tolist()) + <span class="hljs-string">"]"</span>

        <span class="hljs-keyword">with</span> conn.cursor() <span class="hljs-keyword">as</span> cursor:
            cursor.execute(
                <span class="hljs-string">"INSERT INTO t_image_vectors (image_path, image_vector) VALUES (%s, %s::vector)"</span>,
                (image_path, vector_str),
            )
            conn.commit()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²å…¥åº“å‘é‡ï¼š<span class="hljs-subst">{image_path}</span>"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤„ç†å›¾ç‰‡å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        conn.rollback()
    <span class="hljs-keyword">finally</span>:
        conn.close()


<span class="hljs-keyword">def</span> <span class="hljs-title function_">search_images_by_text</span>(<span class="hljs-params">text_query: <span class="hljs-built_in">str</span>, top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">3</span></span>):
    conn = get_db_connection()
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> conn:
        <span class="hljs-keyword">return</span> []

    <span class="hljs-keyword">try</span>:
        query_embedding = model.encode(text_query)
        vector_str = <span class="hljs-string">"["</span> + <span class="hljs-string">","</span>.join(<span class="hljs-built_in">str</span>(<span class="hljs-built_in">float</span>(x)) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> query_embedding.tolist()) + <span class="hljs-string">"]"</span>

        <span class="hljs-keyword">with</span> conn.cursor() <span class="hljs-keyword">as</span> cursor:
            cursor.execute(
                <span class="hljs-string">"SELECT image_path, image_vector &lt;-&gt; %s::vector AS dist FROM t_image_vectors ORDER BY dist LIMIT %s"</span>,
                (vector_str, top_k),
            )
            <span class="hljs-keyword">return</span> cursor.fetchall()
    <span class="hljs-keyword">finally</span>:
        conn.close()


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># å°†ä¸¤å¼ å›¾ç‰‡å‘é‡åŒ–å¹¶å…¥åº“</span>
    insert_image_vector(<span class="hljs-string">"assets/images/cat.jpg"</span>)
    insert_image_vector(<span class="hljs-string">"assets/images/dog.jpg"</span>)

    <span class="hljs-comment"># æ–‡æœ¬æ£€ç´¢</span>
    query = <span class="hljs-string">"A photo of a cute animal sitting on the grass"</span>
    results = search_images_by_text(query, top_k=<span class="hljs-number">3</span>)

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næŸ¥è¯¢ï¼š<span class="hljs-subst">{query}</span>"</span>)
    <span class="hljs-keyword">for</span> path, dist <span class="hljs-keyword">in</span> results:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"- å›¾ç‰‡: <span class="hljs-subst">{path}</span>ï¼ŒL2è·ç¦»: <span class="hljs-subst">{dist:<span class="hljs-number">.4</span>f}</span>"</span>)
</code></pre>
<p>è¿è¡Œä¸éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> opengauss_demo
python3 rag_example.py
</code></pre>
<p>é¢„æœŸè¾“å‡ºï¼šæ‰“å°ä¸¤æ¡â€œå·²å…¥åº“å‘é‡ï¼šâ€¦â€åï¼Œè¿”å›æŒ‰è·ç¦»æ’åºçš„å›¾ç‰‡åˆ—è¡¨ã€‚è·ç¦»è¶Šå°è¡¨ç¤ºè¶Šç›¸ä¼¼ã€‚</p>
<p>è¡¥å……è¯´æ˜ï¼š</p>
<ul>
<li><code>&lt;-&gt;</code> æ˜¯å‘é‡ç›¸ä¼¼åº¦çš„è·ç¦»æ“ä½œç¬¦ï¼ˆL2è·ç¦»ï¼‰ã€‚è‹¥å‘è¡Œç‰ˆæä¾› <code>l2_distance(v1,v2)</code>ï¼Œä¹Ÿå¯æ›¿æ¢ä¸ºè¯¥å‡½æ•°ã€‚</li>
<li>å¦‚éœ€åŠ é€Ÿæ£€ç´¢ï¼Œå¯å»ºç«‹å‘é‡ç´¢å¼•ï¼ˆä¾‹å¦‚ <code>ivfflat</code>/<code>hnsw</code>ï¼‰ï¼Œä¸åŒç‰ˆæœ¬æ”¯æŒæƒ…å†µä¸ä¸€ï¼Œé…ç½®å‰è¯·ç¡®è®¤ã€‚</li>
</ul>
<p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†openGausså¦‚ä½•æ— ç¼é›†æˆåˆ°AIå·¥ä½œæµä¸­ã€‚é€šè¿‡åœ¨æ•°æ®åº“å±‚é¢è¿›è¡Œå‘é‡æ£€ç´¢ï¼Œå¯ä»¥ç®€åŒ–RAGåº”ç”¨çš„æ¶æ„ï¼Œé™ä½å¼€å‘å¤æ‚åº¦ï¼Œå¹¶åˆ©ç”¨æ•°æ®åº“çš„äº‹åŠ¡æ€§å’Œå¯é æ€§æ¥ç®¡ç†AIæ•°æ®ã€‚</p>
<p>å°è´´å£«ï¼š</p>
<ul>
<li>è‹¥æ‚¨çš„ç‰ˆæœ¬æä¾›<code>l2_distance(v1, v2)</code>å‡½æ•°ï¼Œä¹Ÿå¯å°†ç¤ºä¾‹ä¸­çš„<code>image_vector &lt;-&gt; %s::vector</code>æ›¿æ¢ä¸º<code>l2_distance(image_vector, %s::vector)</code>ï¼›</li>
<li>å‘é‡ç´¢å¼•ï¼ˆå¦‚<code>ivfflat</code>æˆ–<code>hnsw</code>ï¼‰å¯æ˜¾è‘—æå‡æ£€ç´¢æ€§èƒ½ï¼Œä½†ä¸åŒç‰ˆæœ¬æ”¯æŒæƒ…å†µå¯èƒ½ä¸åŒï¼Œå»ºè®®åœ¨åŠŸèƒ½ç¡®è®¤åå†é…ç½®ç´¢å¼•ã€‚</li>
</ul>
<p>å¸¸è§é—®é¢˜ä¸è§£å†³ï¼ˆRAG å‘é‡æ£€ç´¢ï¼‰ï¼š</p>
<ul>
<li>æ‰©å±•ä¸å­˜åœ¨ï¼š<code>ERROR: extension "vectors" does not exist</code> æˆ– <code>type "vector" does not exist</code> â†’ æ‰§è¡Œ <code>CREATE EXTENSION vectors;</code>ï¼Œè‹¥æ— åˆ™å°è¯• <code>CREATE EXTENSION vector;</code>ï¼Œå¹¶ç”¨ <code>\dx</code> æ£€æŸ¥æ‰©å±•å·²å¯ç”¨ã€‚</li>
<li>æ“ä½œç¬¦ç¼ºå¤±ï¼š<code>operator does not exist: vector &lt;-&gt; vector</code> â†’ æœªå¯ç”¨å‘é‡æ‰©å±•æˆ–ç‰ˆæœ¬ä¸åŒ¹é…ï¼›å¯ç”¨æ‰©å±•æˆ–æ”¹ç”¨ <code>l2_distance(...)</code>ã€‚</li>
<li>å‘é‡æ–‡æœ¬æ ¼å¼é”™è¯¯ï¼š<code>invalid input syntax for type vector</code> â†’ ç¡®ä¿æ˜¯ç±»ä¼¼ <code>[0.1,0.2,...]</code> çš„ JSON é£æ ¼åˆ—è¡¨ï¼Œå¹¶åœ¨ SQL ä¸­ä½¿ç”¨ <code>%s::vector</code> æ˜¾å¼ç±»å‹è½¬æ¢ã€‚</li>
<li>æ¨¡å‹ä¸‹è½½å¤±è´¥ï¼šå—å…¬å¸ç½‘ç»œé™åˆ¶å¯é…ç½®ä»£ç†æˆ–ç¦»çº¿ä¸‹è½½æ¨¡å‹ï¼›ä¹Ÿå¯åˆ‡æ¢ pip é•œåƒå®‰è£…ä¾èµ–ï¼ˆç¤ºä¾‹å·²ä½¿ç”¨é˜¿é‡Œé•œåƒï¼‰ã€‚</li>
<li>Pillow ä¾èµ–ï¼šLinux å‘è¡Œç‰ˆå¯èƒ½éœ€å®‰è£… <code>libjpeg</code>/<code>zlib</code> ç­‰ç³»ç»Ÿåº“ï¼›Windows/macOS é€šå¸¸æ— éœ€é¢å¤–é…ç½®ã€‚</li>
</ul>
<p>å¸¸è§é”™è¯¯é€ŸæŸ¥è¡¨ï¼š</p>
<ul>
<li><code>ModuleNotFoundError: No module named psycopg2</code> â†’ ç”¨ç›®æ ‡è§£é‡Šå™¨æ‰§è¡Œ <code>python -m pip install --user psycopg2-binary</code>ï¼Œå¹¶ç”¨ <code>python -c "import psycopg2"</code> éªŒè¯ã€‚</li>
<li>Windows <code>python3</code> ä¸è¯†åˆ« â†’ ç›´æ¥ç”¨ <code>python</code> æˆ– <code>py -3</code>ï¼Œä¼˜å…ˆ <code>python -m pip</code>ã€‚</li>
<li><code>psycopg2.OperationalError: could not connect to server</code>/è¶…æ—¶ â†’ æ£€æŸ¥ <code>listen_addresses</code>ã€<code>pg_hba.conf</code> ä¸å®‰å…¨ç»„ï¼›æœ¬æœºç”¨ <code>Test-NetConnection</code>/<code>telnet</code> éªŒè¯ 5432 ç«¯å£è¿é€šã€‚</li>
<li><code>permission denied for relation/sequence ...</code> â†’ æŒ‰ä¸Šæ–‡ä¸ºä¸šåŠ¡ç”¨æˆ·æˆäºˆ <code>SCHEMA</code>ã€<code>TABLE</code> ä¸éšå¼åºåˆ—æƒé™ã€‚</li>
<li><code>relation "t_user" does not exist</code> â†’ ç¡®è®¤å·²åˆ›å»ºè¡¨ã€è¿æ¥çš„æ•°æ®åº“æ­£ç¡®ï¼Œæˆ–åœ¨ SQL ä¸­ä½¿ç”¨ <code>public.t_user</code> é™å®šåã€‚</li>
<li><code>extension "vectors" does not exist</code>/<code>type "vector" does not exist</code> â†’ å®‰è£…å¹¶å¯ç”¨å‘é‡æ‰©å±•ï¼Œæˆ–ä½¿ç”¨å…¼å®¹æ‰©å±•å <code>vector</code>ã€‚</li>
</ul>
<h2 data-id="heading-13">æ€»ç»“</h2>
<p>ä»åŸºç¡€çš„CRUDæ“ä½œåˆ°å¤æ‚çš„äº‹åŠ¡ç®¡ç†ï¼Œå†åˆ°å‰æ²¿çš„AIå‘é‡åº”ç”¨ï¼ŒopenGaussé€šè¿‡å…¶å¼ºå¤§çš„åŠŸèƒ½å’Œå¯¹ä¸»æµå¼€å‘ç”Ÿæ€çš„è‰¯å¥½å…¼å®¹æ€§ï¼Œè¯æ˜äº†å…¶åœ¨ç°ä»£åº”ç”¨å¼€å‘ä¸­çš„æ ¸å¿ƒä»·å€¼ã€‚ç‰¹åˆ«æ˜¯å…¶åŸç”Ÿçš„å‘é‡æ•°æ®åº“èƒ½åŠ›ï¼Œä¸ºä¼ä¸šåœ¨AIæ—¶ä»£æ„å»ºæ™ºèƒ½åº”ç”¨æä¾›äº†åšå®ã€é«˜æ•ˆä¸”æ˜“äºç®¡ç†çš„æ•°æ®åº•åº§ã€‚</p>
<p>å¸Œæœ›è¿™ä¸ªç³»åˆ—çš„æ–‡ç« èƒ½å¸®åŠ©æ‚¨å¯¹openGaussæœ‰ä¸€ä¸ªå…¨é¢è€Œæ·±å…¥çš„äº†è§£ã€‚æ•°æ®åº“çš„ä¸–ç•Œå¹¿é˜”æ— å ï¼Œè€ŒopenGaussçš„æ¢ç´¢ä¹‹æ—…ï¼Œæ‰åˆšåˆšå¼€å§‹ã€‚æ¬¢è¿æ‚¨ç»§ç»­æ·±å…¥ç ”ç©¶ï¼Œå‘æ˜å®ƒæ›´å¤šçš„å¯èƒ½æ€§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•æ¥æ”¶å‰ç«¯å‚æ•°]]></title>    <link>https://juejin.cn/post/7572776177691082761</link>    <guid>https://juejin.cn/post/7572776177691082761</guid>    <pubDate>2025-11-16T10:01:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572776177691082761" data-draft-id="7572793505900068915" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•æ¥æ”¶å‰ç«¯å‚æ•°"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-16T10:01:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaå¤©æ¢¯ä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/2825061103052843"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•æ¥æ”¶å‰ç«¯å‚æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2825061103052843/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaå¤©æ¢¯ä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T10:01:03.000Z" title="Sun Nov 16 2025 10:01:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Spring Boot å…¥é—¨ï¼šå¦‚ä½•æ¥æ”¶å‰ç«¯å‚æ•°</h2>
<p>å¤§å®¶å¥½å‘€ï¼ä¸Šä¸€ç¯‡æˆ‘ä»¬å­¦ä¼šäº†è®©æ¥å£è¿”å› JSON æ•°æ®ï¼Œå°ä¼™ä¼´ä¼šä¸ä¼šæœ‰ç–‘é—®ï¼šâ€œå‰ç«¯æ€ä¹ˆç»™åç«¯ä¼ æ•°æ®å‘€ï¼Ÿæ¯”å¦‚æˆ‘æƒ³æ ¹æ®ç”¨æˆ· ID æŸ¥å¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯ï¼Œè¯¥æ€ä¹ˆå†™ï¼Ÿâ€ ä»Šå¤©è¿™ç¯‡å°±èšç„¦ â€œæ¥æ”¶å‰ç«¯å‚æ•°â€ è¿™ä¸ªæ ¸å¿ƒéœ€æ±‚ï¼Œç”¨ 3 ä¸ªæœ€å¸¸ç”¨çš„åœºæ™¯ + å…·ä½“æ¡ˆä¾‹ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ æå®šï¼Œçœ‹å®Œå°±èƒ½ç›´æ¥ç”¨åœ¨é¡¹ç›®é‡Œï¼</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆææ‡‚ï¼šå‰ç«¯ä¼šæ€ä¹ˆä¼ å‚æ•°ï¼Ÿ</h3>
<p>åœ¨å†™ä»£ç å‰ï¼Œæˆ‘ä»¬å…ˆèŠ± 2 åˆ†é’Ÿææ¸…æ¥šå‰ç«¯ç»™åç«¯ä¼ å‚æ•°çš„ 3 ç§å¸¸è§æ–¹å¼ï¼Œå› ä¸ºä¸åŒçš„ä¼ å‚æ–¹å¼ï¼Œåç«¯æ¥æ”¶çš„å†™æ³•ä¸ä¸€æ ·ï¼š</p>
<h4 data-id="heading-2">1. è·¯å¾„ä¼ å‚ï¼ˆæ¯”å¦‚ <code>http://localhost:8080/user/1</code>ï¼‰</h4>
<p>å‚æ•°ç›´æ¥æ‹¼åœ¨ URL è·¯å¾„é‡Œï¼Œåƒä¸Šé¢çš„ â€œ1â€ å°±æ˜¯ç”¨æˆ· IDï¼Œè¿™ç§æ–¹å¼é€‚åˆä¼ <strong>å•ä¸ªã€ç®€å•çš„å‚æ•°</strong>ï¼ˆæ¯”å¦‚ IDã€ç¼–å·ï¼‰ï¼ŒURL çœ‹èµ·æ¥å¾ˆç®€æ´ã€‚</p>
<h4 data-id="heading-3">2. é—®å·ä¼ å‚ï¼ˆæ¯”å¦‚ <code>http://localhost:8080/product?name=æ‰‹æœº&amp;price=3000</code>ï¼‰</h4>
<p>å‚æ•°ç”¨ â€œ?â€ å¼€å¤´ï¼Œå¤šä¸ªå‚æ•°ç”¨ â€œ&amp;â€ åˆ†éš”ï¼Œè¿™ç§æ–¹å¼é€‚åˆä¼ <strong>å¤šä¸ªå¯é€‰å‚æ•°</strong>ï¼ˆæ¯”å¦‚å•†å“æœç´¢æ—¶çš„åç§°ã€ä»·æ ¼èŒƒå›´ï¼‰ã€‚</p>
<h4 data-id="heading-4">3. è¯·æ±‚ä½“ä¼ å‚ï¼ˆJSON æ ¼å¼ï¼‰</h4>
<p>å‚æ•°æ”¾åœ¨è¯·æ±‚çš„ â€œbodyâ€ é‡Œï¼Œä¸æ˜¯æ‹¼åœ¨ URL ä¸Šï¼Œæ ¼å¼æ˜¯ JSONï¼Œè¿™ç§æ–¹å¼é€‚åˆä¼ <strong>å¤æ‚ã€å¤šå­—æ®µçš„å‚æ•°</strong>ï¼ˆæ¯”å¦‚ç”¨æˆ·æ³¨å†Œæ—¶çš„å§“åã€æ‰‹æœºå·ã€å¯†ç ï¼Œæˆ–è€…æäº¤è®¢å•æ—¶çš„å¤šä¸ªå•†å“ä¿¡æ¯ï¼‰ï¼Œå®‰å…¨æ€§æ›´é«˜ï¼Œå‚æ•°ä¹Ÿæ›´çµæ´»ã€‚</p>
<p>è¿™ 3 ç§æ–¹å¼è¦†ç›–äº† 90% ä»¥ä¸Šçš„å¼€å‘åœºæ™¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é€ä¸ªè®²è§£åç«¯æ€ä¹ˆæ¥æ”¶ï½</p>
<h3 data-id="heading-5">äºŒã€å‡†å¤‡å·¥ä½œï¼šå¤ç”¨ä¹‹å‰çš„é¡¹ç›®å’Œå®ä½“ç±»</h3>
<p>æˆ‘ä»¬è¿˜æ˜¯åœ¨ä¹‹å‰çš„ã€Œfirst-springboot-projectã€é¡¹ç›®é‡Œæ“ä½œï¼Œä¸ç”¨æ–°å»ºé¡¹ç›®ï¼Œç›´æ¥å¤ç”¨å·²ç»åˆ›å»ºå¥½çš„ï¼š</p>
<ul>
<li>å®ä½“ç±»ï¼š<code>User</code>ï¼ˆç”¨æˆ· IDã€å§“åã€å¹´é¾„ã€æ‰‹æœºå·ï¼‰ã€<code>Product</code>ï¼ˆå•†å“ IDã€åç§°ã€ä»·æ ¼ã€åº“å­˜ï¼‰ï¼›</li>
<li>æ§åˆ¶å™¨ï¼šå¯ä»¥åœ¨ä¹‹å‰çš„<code>JsonController</code>é‡ŒåŠ æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ–°å»º<code>ParamController</code>ï¼ˆæ¨èæ–°å»ºï¼Œåˆ†ç±»æ›´æ¸…æ™°ï¼‰ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©æ–°å»ºã€‚</li>
</ul>
<p>å…ˆç¡®è®¤é¡¹ç›®èƒ½æ­£å¸¸è¿è¡Œï¼Œæ²¡æœ‰æŠ¥é”™ï½</p>
<h3 data-id="heading-6">ä¸‰ã€åœºæ™¯ 1ï¼šè·¯å¾„ä¼ å‚ï¼ˆæ¥æ”¶å•ä¸ªå‚æ•°ï¼Œå¦‚ç”¨æˆ· IDï¼‰</h3>
<p>æœ€å¸¸è§çš„éœ€æ±‚ï¼šå‰ç«¯ä¼ ç”¨æˆ· IDï¼ˆæ¯”å¦‚ â€œ1â€ï¼‰ï¼Œåç«¯æ ¹æ® ID æŸ¥è¯¢å¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯å¹¶è¿”å›ã€‚</p>
<h4 data-id="heading-7">1. å†™æ¥å£ï¼šç”¨ <code>@PathVariable</code> æ¥æ”¶è·¯å¾„å‚æ•°</h4>
<p>æ–°å»º<code>ParamController</code>ï¼Œåœ¨é‡Œé¢å†™ä¸€ä¸ªæ ¹æ®ç”¨æˆ· ID æŸ¥ç”¨æˆ·çš„æ¥å£ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.firstspringbootproject.controller;

<span class="hljs-keyword">import</span> com.example.firstspringbootproject.entity.User;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.PathVariable;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParamController</span> {

    <span class="hljs-comment">/*
     æ¥å£1ï¼šè·¯å¾„ä¼ å‚â€”â€”æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢ç”¨æˆ·
     è®¿é—®è·¯å¾„ï¼š/user/{userId}ï¼Œå…¶ä¸­{userId}æ˜¯å ä½ç¬¦ï¼Œè¡¨ç¤ºè¿™é‡Œè¦ä¼ ç”¨æˆ·ID
     @PathVariable("userId")ï¼šæŠŠè·¯å¾„é‡Œ{userId}çš„å€¼ï¼Œèµ‹å€¼ç»™æ–¹æ³•å‚æ•°Integer userId
     */</span>
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/user/{userId}"</span>)</span>
    <span class="hljs-keyword">public</span> User getUserById(<span class="hljs-meta">@PathVariable(<span class="hljs-string">"userId"</span>)</span> Integer userId) {

        <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œåªæ˜¯æ¨¡æ‹ŸæŸ¥è¯¢ï¼ˆå®é™…é¡¹ç›®ä¼šä»æ•°æ®åº“æŸ¥ï¼‰ï¼Œæ ¹æ®ä¼ çš„userIdè¿”å›ä¸åŒç”¨æˆ·</span>
        <span class="hljs-keyword">if</span> (userId == <span class="hljs-number">1</span>) {
            <span class="hljs-comment">// è¿”å›IDä¸º1çš„ç”¨æˆ·</span>
            <span class="hljs-keyword">return</span> new User(<span class="hljs-number">1</span>, <span class="hljs-string">"å°æ˜"</span>, <span class="hljs-number">20</span>, <span class="hljs-string">"13800138000"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (userId == <span class="hljs-number">2</span>) {
            <span class="hljs-comment">// è¿”å›IDä¸º2çš„ç”¨æˆ·</span>
            <span class="hljs-keyword">return</span> new User(<span class="hljs-number">2</span>, <span class="hljs-string">"å°çº¢"</span>, <span class="hljs-number">19</span>, <span class="hljs-string">"13900139000"</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æ²¡æœ‰åŒ¹é…çš„ç”¨æˆ·ï¼Œè¿”å›nullï¼ˆå®é™…é¡¹ç›®ä¼šè¿”å›â€œç”¨æˆ·ä¸å­˜åœ¨â€çš„æç¤ºï¼‰</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }
}
</code></pre>
<h4 data-id="heading-8">2. å…³é”®è¯´æ˜ï¼ˆé‡ç‚¹çœ‹è¿™ 2 å¤„ï¼‰ï¼š</h4>
<ul>
<li><strong>è·¯å¾„å ä½ç¬¦</strong>ï¼š<code>@GetMapping("/user/{userId}")</code> é‡Œçš„ <code>{userId}</code> æ˜¯ â€œå ä½ç¬¦â€ï¼Œè¡¨ç¤ºè¿™ä¸ªä½ç½®è¦ä¼ å‚æ•°ï¼Œå‚æ•°åå¯ä»¥è‡ªå·±å®šï¼ˆæ¯”å¦‚<code>{id}</code>ä¹Ÿå¯ä»¥ï¼‰ï¼›</li>
<li><strong>@PathVariable æ³¨è§£</strong>ï¼š<code>@PathVariable("userId")</code> ç”¨æ¥ â€œæå–â€ è·¯å¾„é‡Œå ä½ç¬¦çš„å€¼ï¼Œæ‹¬å·é‡Œçš„ â€œuserIdâ€ è¦å’Œè·¯å¾„é‡Œ<code>{userId}</code>çš„åç§°<strong>å®Œå…¨ä¸€è‡´</strong>ï¼Œç„¶åèµ‹å€¼ç»™åé¢çš„<code>Integer userId</code>å‚æ•°ã€‚</li>
</ul>
<h4 data-id="heading-9">3. æµ‹è¯•æ¥å£ï¼ˆç”¨æµè§ˆå™¨æˆ– Apifoxï¼‰</h4>
<h5 data-id="heading-10">æµ‹è¯• 1ï¼šæŸ¥è¯¢ ID ä¸º 1 çš„ç”¨æˆ·</h5>
<ul>
<li>æµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼š<code>http://localhost:8080/user/1</code>ï¼›</li>
<li>è¿”å›ç»“æœï¼ˆJSONï¼‰ï¼š<code>{"id":1,"name":"å°æ˜","age":20,"phone":"13800138000"}</code>ï¼Œæ­£ç¡®ï¼</li>
</ul>
<h5 data-id="heading-11">æµ‹è¯• 2ï¼šæŸ¥è¯¢ ID ä¸º 2 çš„ç”¨æˆ·</h5>
<ul>
<li>è¾“å…¥ï¼š<code>http://localhost:8080/user/2</code>ï¼›</li>
<li>è¿”å›ï¼š<code>{"id":2,"name":"å°çº¢","age":19,"phone":"13900139000"}</code>ï¼Œæ­£ç¡®ï¼</li>
</ul>
<h5 data-id="heading-12">æµ‹è¯• 3ï¼šæŸ¥è¯¢ä¸å­˜åœ¨çš„ IDï¼ˆæ¯”å¦‚ 3ï¼‰</h5>
<ul>
<li>è¾“å…¥ï¼š<code>http://localhost:8080/user/3</code>ï¼›</li>
<li>è¿”å›ï¼š<code>null</code>ï¼ˆç¬¦åˆæˆ‘ä»¬ä»£ç é‡Œçš„é€»è¾‘ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-13">å››ã€åœºæ™¯ 2ï¼šé—®å·ä¼ å‚ï¼ˆæ¥æ”¶å¤šä¸ªå¯é€‰å‚æ•°ï¼Œå¦‚å•†å“æœç´¢ï¼‰</h3>
<p>éœ€æ±‚ï¼šå‰ç«¯ä¼ å•†å“åç§°ï¼ˆå¯é€‰ï¼‰å’Œä»·æ ¼ä¸Šé™ï¼ˆå¯é€‰ï¼‰ï¼Œåç«¯æ ¹æ®å‚æ•°ç­›é€‰å•†å“åˆ—è¡¨ï¼ˆæ¯”å¦‚åªä¼ åç§° â€œæ‰‹æœºâ€ï¼Œå°±è¿”å›æ‰€æœ‰æ‰‹æœºï¼›åªä¼ ä»·æ ¼ä¸Šé™ 3000ï¼Œå°±è¿”å›æ‰€æœ‰ä½äº 3000 çš„å•†å“ï¼›ä¸¤ä¸ªéƒ½ä¼ ï¼Œå°±è¿”å›ç¬¦åˆæ¡ä»¶çš„æ‰‹æœºï¼‰ã€‚</p>
<h4 data-id="heading-14">1. å†™æ¥å£ï¼šç”¨ <code>@RequestParam</code> æ¥æ”¶é—®å·å‚æ•°</h4>
<p>åœ¨<code>ParamController</code>é‡ŒåŠ ä¸€ä¸ªå•†å“æœç´¢æ¥å£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.firstspringbootproject.controller;

<span class="hljs-keyword">import</span> com.example.firstspringbootproject.entity.Product;
<span class="hljs-keyword">import</span> com.example.firstspringbootproject.entity.User;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PathVariable;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestParam;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParamController</span> {
    <span class="hljs-comment">/*
     æ¥å£2ï¼šé—®å·ä¼ å‚â€”â€”å•†å“æœç´¢ï¼ˆåç§°å’Œä»·æ ¼ä¸Šé™éƒ½æ˜¯å¯é€‰å‚æ•°ï¼‰
     è®¿é—®è·¯å¾„ç¤ºä¾‹ï¼š/product/search?name=æ‰‹æœº&amp;maxPrice=3000
     @RequestParam(required = false)ï¼šè¡¨ç¤ºè¿™ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œä¸ä¼ ä¹Ÿä¸ä¼šæŠ¥é”™
     defaultValue = "": è¡¨ç¤ºå¦‚æœå‚æ•°æ²¡ä¼ ï¼Œé»˜è®¤å€¼æ˜¯ç©ºå­—ç¬¦ä¸²ï¼ˆé’ˆå¯¹Stringç±»å‹ï¼‰
     */</span>
    <span class="hljs-meta">@GetMapping("/product/search")</span>
    <span class="hljs-keyword">public</span> List&lt;Product&gt; <span class="hljs-title function_">searchProduct</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(required = false, defaultValue = "")</span> String name, <span class="hljs-meta">@RequestParam(required = false)</span> Double maxPrice)</span> {

        <span class="hljs-comment">//1.åˆ›å»ºå•†å“æ•°æ®åº“</span>
        List&lt;Product&gt; productDB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        productDB.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-number">101</span>, <span class="hljs-string">"åä¸ºæ‰‹æœº"</span>, <span class="hljs-number">3999.0</span>, <span class="hljs-number">100</span>));
        productDB.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-number">102</span>, <span class="hljs-string">"è‹¹æœå¹³æ¿"</span>, <span class="hljs-number">5999.0</span>, <span class="hljs-number">50</span>));
        productDB.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-number">103</span>, <span class="hljs-string">"å°ç±³è€³æœº"</span>, <span class="hljs-number">299.0</span>, <span class="hljs-number">200</span>));
        productDB.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-number">104</span>, <span class="hljs-string">"OPPOæ‰‹æœº"</span>, <span class="hljs-number">2999.0</span>, <span class="hljs-number">80</span>));

        <span class="hljs-comment">// 2. åˆ›å»ºä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œç”¨æ¥è£…ç­›é€‰åçš„å•†å“</span>
        List&lt;Product&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

        <span class="hljs-comment">// 3. éå†â€œå•†å“æ•°æ®åº“â€ï¼Œæ ¹æ®å‚æ•°ç­›é€‰</span>
        <span class="hljs-keyword">for</span> (Product product : productDB) {
            <span class="hljs-comment">// æ¡ä»¶1ï¼šå•†å“åç§°åŒ…å«ä¼ å…¥çš„nameï¼ˆå¦‚æœnameä¸ä¸ºç©ºï¼‰</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">matchName</span> <span class="hljs-operator">=</span> product.getProductName().contains(name);
            <span class="hljs-comment">// æ¡ä»¶2ï¼šå•†å“ä»·æ ¼å°äºç­‰äºä¼ å…¥çš„maxPriceï¼ˆå¦‚æœmaxPriceä¸ä¸ºç©ºï¼‰</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">matchPrice</span> <span class="hljs-operator">=</span> (maxPrice == <span class="hljs-literal">null</span>) || (product.getPrice() &lt;= maxPrice);
            <span class="hljs-comment">// ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³ï¼Œå°±åŠ å…¥ç»“æœåˆ—è¡¨</span>
            <span class="hljs-keyword">if</span> (matchName &amp;&amp; matchPrice) {
                result.add(product);
            }
        }

        <span class="hljs-comment">// 4. è¿”å›ç­›é€‰åçš„å•†å“åˆ—è¡¨ï¼ˆSpring Bootè‡ªåŠ¨è½¬JSONï¼‰</span>
        <span class="hljs-keyword">return</span> result;

    }
}
</code></pre>
<h4 data-id="heading-15">2. å…³é”®è¯´æ˜ï¼ˆé‡ç‚¹çœ‹ <code>@RequestParam</code>ï¼‰ï¼š</h4>
<ul>
<li><code>required = false</code>ï¼šè¡¨ç¤ºè¿™ä¸ªå‚æ•°æ˜¯ â€œå¯é€‰çš„â€ï¼Œå‰ç«¯å¯ä»¥ä¸ä¼ ï¼ˆå¦‚æœä¸å†™è¿™ä¸ªå±æ€§ï¼Œé»˜è®¤æ˜¯<code>required = true</code>ï¼Œå‰ç«¯ä¸ä¼ å°±ä¼šæŠ¥é”™ï¼‰ï¼›</li>
<li><code>defaultValue = ""</code>ï¼šç»™å‚æ•°è®¾ç½® â€œé»˜è®¤å€¼â€ï¼Œæ¯”å¦‚ name çš„é»˜è®¤å€¼æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œè¿™æ ·å³ä½¿å‰ç«¯ä¸ä¼  nameï¼Œä¹Ÿä¸ä¼šæ˜¯ nullï¼Œé¿å…åç»­ä»£ç æŠ¥é”™ï¼›</li>
<li><strong>å‚æ•°åå¯¹åº”</strong>ï¼š<code>@RequestParam</code> æ‹¬å·é‡Œå¯ä»¥å†™å‚æ•°åï¼ˆæ¯”å¦‚<code>@RequestParam("productName")</code>ï¼‰ï¼Œå¦‚æœæ‹¬å·é‡Œä¸å†™ï¼Œé»˜è®¤ä¼šæ‰¾å’Œæ–¹æ³•å‚æ•°åï¼ˆæ¯”å¦‚<code>name</code>ï¼‰ä¸€è‡´çš„å‰ç«¯å‚æ•°ã€‚</li>
</ul>
<h4 data-id="heading-16">3. æµ‹è¯•æ¥å£ï¼ˆå¤šåœºæ™¯æµ‹è¯•ï¼Œæ›´èƒ½ç†è§£ï¼‰</h4>
<h5 data-id="heading-17">æµ‹è¯• 1ï¼šåªä¼  â€œå•†å“åç§°â€ï¼ˆæœç´¢ â€œæ‰‹æœºâ€ï¼‰</h5>
<ul>
<li>è®¿é—®è·¯å¾„ï¼š<code>http://localhost:8080/product/search?name=æ‰‹æœº</code>ï¼›</li>
<li>ç­›é€‰é€»è¾‘ï¼šåç§°åŒ…å« â€œæ‰‹æœºâ€ï¼Œä»·æ ¼ä¸é™åˆ¶ï¼›</li>
<li>è¿”å›ç»“æœï¼šåä¸ºæ‰‹æœºï¼ˆ3999ï¼‰å’Œ OPPO æ‰‹æœºï¼ˆ2999ï¼‰ï¼Œæ­£ç¡®ï¼</li>
</ul>
<h5 data-id="heading-18">æµ‹è¯• 2ï¼šåªä¼  â€œä»·æ ¼ä¸Šé™â€ï¼ˆmaxPrice=3000ï¼‰</h5>
<ul>
<li>è®¿é—®è·¯å¾„ï¼š<code>http://localhost:8080/product/search?maxPrice=3000</code>ï¼›</li>
<li>ç­›é€‰é€»è¾‘ï¼šä»·æ ¼â‰¤3000ï¼Œåç§°ä¸é™åˆ¶ï¼›</li>
<li>è¿”å›ç»“æœï¼šå°ç±³è€³æœºï¼ˆ299ï¼‰å’Œ OPPO æ‰‹æœºï¼ˆ2999ï¼‰ï¼Œæ­£ç¡®ï¼</li>
</ul>
<h5 data-id="heading-19">æµ‹è¯• 3ï¼šä¸¤ä¸ªå‚æ•°éƒ½ä¼ ï¼ˆname = æ‰‹æœº &amp; maxPrice=3000ï¼‰</h5>
<ul>
<li>è®¿é—®è·¯å¾„ï¼š<code>http://localhost:8080/product/search?name=æ‰‹æœº&amp;maxPrice=3000</code>ï¼›</li>
<li>ç­›é€‰é€»è¾‘ï¼šåç§°åŒ…å« â€œæ‰‹æœºâ€ ä¸”ä»·æ ¼â‰¤3000ï¼›</li>
<li>è¿”å›ç»“æœï¼šåªæœ‰ OPPO æ‰‹æœºï¼ˆ2999ï¼‰ï¼Œæ­£ç¡®ï¼</li>
</ul>
<h5 data-id="heading-20">æµ‹è¯• 4ï¼šä¸¤ä¸ªå‚æ•°éƒ½ä¸ä¼ </h5>
<ul>
<li>è®¿é—®è·¯å¾„ï¼š<code>http://localhost:8080/product/search</code>ï¼›</li>
<li>ç­›é€‰é€»è¾‘ï¼šæ‰€æœ‰å•†å“éƒ½ç¬¦åˆæ¡ä»¶ï¼›</li>
<li>è¿”å›ç»“æœï¼šæ‰€æœ‰ 4 ä¸ªå•†å“ï¼Œæ­£ç¡®ï¼</li>
</ul>
<h3 data-id="heading-21">äº”ã€åœºæ™¯ 3ï¼šè¯·æ±‚ä½“ä¼ å‚ï¼ˆæ¥æ”¶å¤æ‚ JSON å‚æ•°ï¼Œå¦‚ç”¨æˆ·æ³¨å†Œï¼‰</h3>
<p>éœ€æ±‚ï¼šç”¨æˆ·æ³¨å†Œæ—¶ï¼Œå‰ç«¯ä¼ ä¸€ä¸ª JSON æ ¼å¼çš„ç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…å«å§“åã€å¹´é¾„ã€æ‰‹æœºå·ï¼‰ï¼Œåç«¯æ¥æ”¶è¿™äº›å‚æ•°ï¼Œæ¨¡æ‹Ÿ â€œä¿å­˜ç”¨æˆ·â€ï¼Œç„¶åè¿”å› â€œæ³¨å†ŒæˆåŠŸâ€ çš„æç¤ºå’Œä¿å­˜åçš„ç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…å«è‡ªåŠ¨ç”Ÿæˆçš„ç”¨æˆ· IDï¼‰ã€‚</p>
<h4 data-id="heading-22">1. å†™æ¥å£ï¼šç”¨ â€œå®ä½“ç±»â€ æ¥æ”¶è¯·æ±‚ä½“å‚æ•°</h4>
<p>åœ¨<code>ParamController</code>é‡ŒåŠ ä¸€ä¸ªç”¨æˆ·æ³¨å†Œæ¥å£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.firstspringbootproject.controller;

<span class="hljs-keyword">import</span> com.example.firstspringbootproject.entity.Product;
<span class="hljs-keyword">import</span> com.example.firstspringbootproject.entity.User;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParamController</span> {

    <span class="hljs-comment">// æ¨¡æ‹Ÿâ€œç”¨æˆ·æ•°æ®åº“â€ï¼šå­˜æ³¨å†Œåçš„ç”¨æˆ·</span>
    <span class="hljs-keyword">private</span> List&lt;User&gt;userDB =<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-comment">// æ¨¡æ‹Ÿè‡ªå¢IDï¼šæ¯æ¬¡æ³¨å†Œæ–°ç”¨æˆ·ï¼ŒID+1</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">nextUserId</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>; <span class="hljs-comment">// ä¹‹å‰å·²æœ‰ID=1ã€2çš„ç”¨æˆ·ï¼Œæ‰€ä»¥ä»3å¼€å§‹</span>

    <span class="hljs-comment">/*
     * æ¥å£3ï¼šè¯·æ±‚ä½“ä¼ å‚â€”â€”ç”¨æˆ·æ³¨å†Œï¼ˆæ¥æ”¶JSONæ ¼å¼çš„ç”¨æˆ·ä¿¡æ¯ï¼‰
     *  @PostMappingï¼šè¡¨ç¤ºè¿™ä¸ªæ¥å£ç”¨POSTè¯·æ±‚ï¼ˆå‰ç«¯ä¼ è¯·æ±‚ä½“ä¸€èˆ¬ç”¨POSTï¼Œä¸ç”¨GETï¼‰
     *  @RequestBodyï¼šè¡¨ç¤ºæŠŠè¯·æ±‚ä½“é‡Œçš„JSONæ•°æ®ï¼Œè½¬æ¢æˆUserå¯¹è±¡
     */</span>
    <span class="hljs-meta">@PostMapping("/user/register")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">registerUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {

        <span class="hljs-comment">// 1. ç»™æ–°ç”¨æˆ·è®¾ç½®è‡ªå¢IDï¼ˆå‰ç«¯æ²¡ä¼ ï¼Œåç«¯è‡ªåŠ¨ç”Ÿæˆï¼‰</span>
        user.setId(nextUserId);
        nextUserId++; <span class="hljs-comment">// ä¸‹æ¬¡æ³¨å†ŒID+1</span>
        <span class="hljs-comment">// 2. æ¨¡æ‹Ÿâ€œä¿å­˜ç”¨æˆ·â€ï¼šæŠŠç”¨æˆ·æ·»åŠ åˆ°â€œç”¨æˆ·æ•°æ®åº“â€</span>
        userDB.add(user);
        <span class="hljs-comment">// 3. è¿”å›æ³¨å†ŒæˆåŠŸçš„æç¤ºï¼ˆåŒ…å«ç”¨æˆ·ä¿¡æ¯ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ³¨å†ŒæˆåŠŸï¼ä½ çš„ç”¨æˆ·ä¿¡æ¯ï¼š"</span> +

                <span class="hljs-string">"ID="</span> + user.getId() +

                <span class="hljs-string">"ï¼Œå§“å="</span> + user.getName() +

                <span class="hljs-string">"ï¼Œå¹´é¾„="</span> + user.getAge() +

                <span class="hljs-string">"ï¼Œæ‰‹æœºå·="</span> + user.getPhone();

    }
}
</code></pre>
<h4 data-id="heading-23">2. å…³é”®è¯´æ˜ï¼ˆé‡ç‚¹çœ‹è¿™ 2 ä¸ªæ³¨è§£ï¼‰ï¼š</h4>
<ul>
<li><code>@PostMapping</code>ï¼šæ¥æ”¶å‰ç«¯çš„ POST è¯·æ±‚ï¼ˆGET è¯·æ±‚ä¸€èˆ¬ç”¨æ¥ â€œæŸ¥è¯¢â€ æ•°æ®ï¼ŒPOST è¯·æ±‚ç”¨æ¥ â€œæäº¤â€ æ•°æ®ï¼Œæ¯”å¦‚æ³¨å†Œã€æäº¤è®¢å•ï¼Œè¿™æ˜¯å¼€å‘ä¸­çš„è§„èŒƒï¼‰ï¼›</li>
<li><code>@RequestBody</code>ï¼šæŠŠå‰ç«¯è¯·æ±‚ä½“é‡Œçš„ JSON æ•°æ®ï¼Œè‡ªåŠ¨è½¬æ¢æˆ<code>User</code>å®ä½“ç±»å¯¹è±¡ â€”â€” è¿™é‡Œçš„å…³é”®æ˜¯ï¼šJSON é‡Œçš„å­—æ®µåè¦å’Œ<code>User</code>ç±»çš„å±æ€§å<strong>å®Œå…¨ä¸€è‡´</strong>ï¼ˆæ¯”å¦‚ JSON é‡Œçš„ â€œnameâ€ å¯¹åº” User ç±»çš„<code>private String name</code>ï¼‰ï¼Œå¦åˆ™æ— æ³•æ­£ç¡®èµ‹å€¼ã€‚</li>
</ul>
<h4 data-id="heading-24">3. æµ‹è¯•æ¥å£ï¼ˆå¿…é¡»ç”¨ Apifoxï¼Œæµè§ˆå™¨æ²¡æ³•ä¼ è¯·æ±‚ä½“ï¼‰</h4>
<h5 data-id="heading-25">æµ‹è¯•æ­¥éª¤ï¼š</h5>
<ol>
<li>æ‰“å¼€ Apifoxï¼Œç‚¹å‡»å·¦ä¸Šè§’ã€Œ+ã€æ–°å»ºå¿«æ·è¯·æ±‚ï¼›</li>
<li>ã€ŒMethodã€é€‰æ‹©ã€ŒPOSTã€ï¼Œã€ŒURLã€è¾“å…¥ï¼š<code>http://localhost:8080/user/register</code>ï¼›</li>
<li>ç‚¹å‡»ã€ŒBodyã€â†’ é€‰æ‹©ã€Œjsonã€â†’ å³ä¾§ä¸‹æ‹‰æ¡†é€‰æ‹©ã€ŒJSONã€ï¼Œåœ¨è¾“å…¥æ¡†é‡Œå†™å‰ç«¯è¦ä¼ çš„ JSON æ•°æ®ï¼š</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å°æ"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">22</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"phone"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"13700137000"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol>
<li>ç‚¹å‡»å³ä¸Šè§’ã€ŒSendã€ï¼ŒæŸ¥çœ‹è¿”å›ç»“æœï¼š</li>
</ol>
<ul>
<li>ã€ŒResponse Bodyã€é‡Œä¼šæ˜¾ç¤ºï¼š<code>æ³¨å†ŒæˆåŠŸï¼ä½ çš„ç”¨æˆ·ä¿¡æ¯ï¼šID=3ï¼Œå§“å=å°æï¼Œå¹´é¾„=22ï¼Œæ‰‹æœºå·=13700137000</code>ï¼›</li>
<li>çŠ¶æ€ç æ˜¯ 200ï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸã€‚</li>
</ul>
<h5 data-id="heading-26">å†æµ‹è¯•ä¸€æ¬¡ï¼š</h5>
<ul>
<li>å†ä¼ ä¸€ä¸ª JSONï¼š</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å°æ"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">21</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"phone"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"13600136000"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>è¿”å›ç»“æœï¼š<code>æ³¨å†ŒæˆåŠŸï¼ä½ çš„ç”¨æˆ·ä¿¡æ¯ï¼šID=4ï¼Œå§“å=å°å¼ ï¼Œå¹´é¾„=21ï¼Œæ‰‹æœºå·=13600136000</code>ï¼ŒID è‡ªåŠ¨å¢é•¿ï¼Œæ­£ç¡®ï¼</li>
</ul>
<h3 data-id="heading-27">å…­ã€å¸¸è§é—®é¢˜ï¼šæ¥æ”¶å‚æ•°æ—¶çš„å°å‘å’Œè§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-28">1. è·¯å¾„ä¼ å‚æ—¶ï¼Œå‚æ•°åå’Œå ä½ç¬¦ä¸ä¸€è‡´ï¼Œå¯¼è‡´æ¥æ”¶ä¸åˆ°å€¼ï¼Ÿ</h4>
<ul>
<li>æ¯”å¦‚è·¯å¾„æ˜¯<code>/user/{id}</code>ï¼Œä½†æ³¨è§£å†™çš„æ˜¯<code>@PathVariable("userId")</code>ï¼Œè¿™æ ·å°±ä¼šåŒ¹é…å¤±è´¥ï¼›</li>
<li>è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿<code>@PathVariable</code>æ‹¬å·é‡Œçš„åç§°ï¼Œå’Œè·¯å¾„é‡Œ<code>{}</code>çš„åç§°å®Œå…¨ä¸€è‡´ï¼ˆæ¯”å¦‚<code>@PathVariable("id")</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-29">2. é—®å·ä¼ å‚æ—¶ï¼Œå‰ç«¯ä¼ äº†å‚æ•°ï¼Œä½†åç«¯æ¥æ”¶çš„æ˜¯ nullï¼Ÿ</h4>
<ul>
<li>åŸå›  ï¼šå‰ç«¯ä¼ çš„å‚æ•°åå’Œåç«¯<code>@RequestParam</code>é‡Œçš„å‚æ•°åä¸ä¸€è‡´ï¼ˆæ¯”å¦‚å‰ç«¯ä¼ <code>product_name</code>ï¼Œåç«¯ç”¨<code>name</code>ï¼‰ï¼›</li>
</ul>
<h4 data-id="heading-30">3. è¯·æ±‚ä½“ä¼ å‚æ—¶ï¼Œå®ä½“ç±»å±æ€§å€¼æ˜¯ nullï¼Ÿ</h4>
<ul>
<li>åŸå›  ï¼šJSON é‡Œçš„å­—æ®µåå’Œå®ä½“ç±»å±æ€§åä¸ä¸€è‡´ï¼ˆæ¯”å¦‚ JSON é‡Œæ˜¯ â€œuserNameâ€ï¼Œå®ä½“ç±»æ˜¯ â€œnameâ€ï¼‰ï¼›</li>
</ul>
<h3 data-id="heading-31">ä¸ƒã€æ€»ç»“ï¼š3 ç§ä¼ å‚æ–¹å¼æ€ä¹ˆé€‰ï¼Ÿ</h3>
<p>ä»Šå¤©æˆ‘ä»¬å­¦å®Œäº†æ¥æ”¶å‰ç«¯å‚æ•°çš„ 3 ç§æ ¸å¿ƒæ–¹å¼ï¼Œæœ€åç”¨ä¸€å¼ è¡¨å¸®ä½ å¿«é€Ÿåˆ¤æ–­è¯¥ç”¨å“ªç§ï¼š</p>





























<table><thead><tr><th>ä¼ å‚æ–¹å¼</th><th>æ³¨è§£ / æ–¹å¼</th><th>é€‚ç”¨åœºæ™¯</th><th>ç¤ºä¾‹ URL/JSON</th></tr></thead><tbody><tr><td>è·¯å¾„ä¼ å‚</td><td><code>@PathVariable</code></td><td>å•ä¸ªã€ç®€å•å‚æ•°ï¼ˆå¦‚ IDã€ç¼–å·ï¼‰</td><td><code>http://localhost:8080/user/1</code></td></tr><tr><td>é—®å·ä¼ å‚</td><td><code>@RequestParam</code></td><td>å¤šä¸ªå¯é€‰å‚æ•°ï¼ˆå¦‚æœç´¢æ¡ä»¶ï¼‰</td><td><code>http://localhost:8080/product/search?name=æ‰‹æœº&amp;maxPrice=3000</code></td></tr><tr><td>è¯·æ±‚ä½“ä¼ å‚</td><td><code>@RequestBody + å®ä½“ç±»</code></td><td>å¤æ‚ã€å¤šå­—æ®µå‚æ•°ï¼ˆå¦‚æ³¨å†Œã€æäº¤è®¢å•ï¼‰</td><td><code>{"name":"å°æ","age":22,"phone":"13700137000"}</code></td></tr></tbody></table>
<p>ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä¼šæ•™å¤§å®¶æ€ä¹ˆ â€œè¿æ¥æ•°æ®åº“â€ï¼ˆæ¯”å¦‚ç”¨ MySQLï¼‰ï¼ŒæŠŠä¹‹å‰æ¨¡æ‹Ÿçš„ â€œå•†å“æ•°æ®åº“â€â€œç”¨æˆ·æ•°æ®åº“â€ æ¢æˆçœŸå®çš„æ•°æ®åº“ï¼Œè®©æ¥å£èƒ½çœŸæ­£æ“ä½œæ•°æ®åº“é‡Œçš„æ•°æ®ï¼Œè¿™æ‰æ˜¯ä¼ä¸šå¼€å‘çš„çœŸå®åœºæ™¯ï¼æ„Ÿå…´è¶£çš„å°ä¼™ä¼´ç‚¹ä¸ªå…³æ³¨ï¼Œä¸‹æ¬¡æ›´æ–°ä¸è¿·è·¯ï½</p>
<p>å¦‚æœæ“ä½œä¸­é‡åˆ°é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘ä¼šä¸€ä¸€å›å¤ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘å¼€å‘äº†ä¸€æ¬¾å…³äºç—…å†ç®¡ç†çš„appï¼šå®‰åº·è®°]]></title>    <link>https://juejin.cn/post/7572781559767695410</link>    <guid>https://juejin.cn/post/7572781559767695410</guid>    <pubDate>2025-11-16T10:59:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572781559767695410" data-draft-id="7572697146287669298" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘å¼€å‘äº†ä¸€æ¬¾å…³äºç—…å†ç®¡ç†çš„appï¼šå®‰åº·è®°"/> <meta itemprop="keywords" content="APP,Apple"/> <meta itemprop="datePublished" content="2025-11-16T10:59:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ"/> <meta itemprop="url" content="https://juejin.cn/user/2831954919569245"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘å¼€å‘äº†ä¸€æ¬¾å…³äºç—…å†ç®¡ç†çš„appï¼šå®‰åº·è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2831954919569245/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T10:59:07.000Z" title="Sun Nov 16 2025 10:59:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šçº¿äº†ï¼ä¸Šçº¿äº†ï¼åŸºäºVibe Codingæˆ‘ç»ˆäºä¹Ÿèƒ½ç‹¬ç«‹å¼€å‘å‡ºä¸€æ¬¾å±äºè‡ªå·±çš„app-<strong>å®‰åº·è®°</strong>ï¼Œç›®å‰ç»ˆäºæˆåŠŸä¸Šæ¶App Storeå•¦ã€‚</p>
<p>ç‹¬ç«‹å¼€å‘appè¿™ä¸ªäº‹æƒ…æˆ‘å¾ˆæ—©ä¹‹å‰å°±æœ‰ç‚¹å¿µå¤´ï¼Œä½†å­¦ä¹ Swiftè¿‡ç¨‹è¿˜æŒºç—›è‹¦çš„ï¼Œæ€»è§‰çš„å„ç§è¯­æ³•ç³–å¾ˆè†ˆåº”ï¼Œå¯¼è‡´è¿›åº¦ç¼“æ…¢ï¼Œåé¢å°±ä¸€ç›´æç½®äº†ã€‚ChatGPTå‡ºæ¥ä¹‹åä¹Ÿå°è¯•äº†ä¸€ç‚¹ï¼Œä½†è¿˜æ˜¯è§‰å¾—å½“æ—¶çš„AIèƒ½åŠ›ä¸å¤Ÿï¼Œå¹¶ä¸”çº¯é èŠå¤©è¿˜æ˜¯ä¸å¤ªè¡Œï¼Œè‡ªä»Cursorã€Windsurfã€CCã€Codexè¿™ä¸€ç±»AIå¼€å‘å·¥å…·å‡ºæ¥ä¹‹åï¼ŒVibe Codingçš„æ¦‚å¿µä¹Ÿéšä¹‹ç«çƒ­ï¼Œæˆ‘æƒ³ä¹Ÿæ˜¯æ—¶å€™é‡å¯è‡ªå·±çš„å¼€å‘è®¡åˆ’äº†ï¼ŒèŠ±äº†æ¥è¿‘ä¸¤ä¸ªæœˆçš„æ™šä¸Šå’Œå‘¨æœ«æ—¶é—´ï¼Œç»ˆäºå°†å…¶å¼€å‘å®Œæˆå¹¶ä¸Šæ¶ï¼</p>
<p>App Storeåœ°å€: <strong>å®‰åº·è®°</strong>(<a href="https://link.juejin.cn?target=https%3A%2F%2Fapps.apple.com%2Fcn%2Fapp%2F%25E5%25AE%2589%25E5%25BA%25B7%25E8%25AE%25B0%2Fid6754668335)%25E3%2580%2582" target="_blank" title="https://apps.apple.com/cn/app/%E5%AE%89%E5%BA%B7%E8%AE%B0/id6754668335)%E3%80%82" ref="nofollow noopener noreferrer">apps.apple.com/cn/app/%E5%â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09ada5a4a0894e56808d5cfce5410ba6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25a2Q55qE5oqA5pyv56KO56KO5b-1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763895547&amp;x-signature=WPSZrT%2BMlUMfox3kehmJsbmdcdU%3D" alt="appstore" loading="lazy"/></p>
<p>è¿™ä¸ªappçš„å¿µå¤´èµ·æºäºæˆ‘è‡ªå·±çš„éœ€æ±‚ï¼Œä½œä¸ºä¸€ä¸ªåŠ¨ä¸åŠ¨å°±çœç‚¹å°æ¯›ç—…ç„¶åè¿˜æ€»æ˜¯å¾€åŒ»é™¢è·‘çš„äººï¼Œå…¶å®ç»å¸¸æ˜¯åŒä¸€ä¸ªç—…æˆ–è€…ç—‡çŠ¶æ¥è¿‘ï¼Œä½†æ€»æ˜¯å¿˜äº†æ­¤å‰æ˜¯å¦‚ä½•æ²»ç–—çš„ï¼Œç›®å‰ç»å¸¸å»çš„é‚£å®¶åŒ»é™¢æœ‰ä¸ªè‡ªå·±çš„å°ç¨‹åºï¼Œèƒ½çœ‹åˆ°å¾ˆå¤šæ£€æŸ¥å’Œè¯ç‰©è®°å½•ï¼Œä½†æ˜¯æ²¡æœ‰å°±è¯Šè®°å½•ï¼Œè€Œä¸”å¦‚æœæœ‰æ—¶å€™å»äº†åˆ«çš„åŒ»é™¢ï¼Œé‚£ä¹ˆè¿™äº›è®°å½•ä¹Ÿä¸èƒ½æ”¾åœ¨ä¸€èµ·ï¼Œç½‘ä¸Šæœäº†ä¸€äº›å…³äºç—…å†ç®¡ç†çš„appï¼Œè¦ä¹ˆUIä¸å–œæ¬¢è¦ä¹ˆäº¤äº’ä¸å–œæ¬¢ï¼Œé‚£ä¹ˆæ˜¯æ—¶å€™è‡ªå·±æ•´èµ·æ¥äº†ï¼</p>
<p>é¦–å…ˆæ•´ä½“åŠŸèƒ½è®¾è®¡è¿˜æ˜¯å¾—é è‡ªå·±ï¼Œä¸­é—´å¯ä»¥è·ŸAIæ²Ÿé€šè®©ä»–æä¸€äº›å»ºè®®ï¼Œä½†æ ¸å¿ƒçš„åŠŸèƒ½ç‚¹è¿˜æ˜¯éœ€è¦è‡ªå·±æ¥å‡ºã€‚è¿™ä¸ªappçš„æ ¸å¿ƒæ€æƒ³è¿˜æ˜¯: ç—…å†-&gt;å°±è¯Š-&gt;è¯ç‰©/æ£€æŸ¥ã€‚ ä¹Ÿå°±æ˜¯è¯´å½“ä½ ç”Ÿç—…æ—¶ï¼Œå¯ä»¥åˆ›å»ºä¸€æ¬¡å½“å‰ç—…æƒ…çš„ç—…å†ï¼Œè‹¥å»åŒ»é™¢å°±è¯Šï¼Œåˆ™ç»‘å®šåœ¨è¯¥æ¬¡ç—…å†ä¸‹ï¼Œå»åŒ»é™¢å¯èƒ½ä¼šæœ‰è¯ç‰©å¤„æ–¹å’Œæ£€æŸ¥é¡¹ç›®ï¼Œè¿™äº›å‡å¯ä»¥è®°å½•åœ¨æ¡ˆã€‚</p>
<p>appçš„è®¾è®¡æ€è·¯æ•´ç†å¥½äº†ä¹‹åï¼Œå¯ä»¥é€šè¿‡AIå·¥å…·å…ˆå¸®ä½ ä½¿ç”¨å‰ç«¯å·¥å…·ç”Ÿæˆä¸€ä¸ªappçš„åŸå‹å›¾ï¼Œç„¶åå†åŸºäºè¿™ä¸ªåŸå‹å»ä½¿ç”¨Swiftæ¥å¼€å‘ï¼Œè¿™æ ·å¯¹äºå¼€å‘çš„å‡†ç¡®æ•ˆæœä¼šæ¯”ç›´æ¥è·Ÿä»–è¯´è¦å¯æ§ä¸€ç‚¹ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘åˆæœŸç›´æ¥è®©AIä¸Šæ‰‹å¹²å‘ç°æ•ˆæœä¸å¤ªå¥½æ‰é‡‡ç”¨çš„æ–¹æ¡ˆï¼Œä¹Ÿæ¨èå¤§å®¶å¯ä»¥è¯•è¯•è¿™ä¹ˆå¹²ã€‚</p>
<p>å¦å¤–æˆ‘æœ¬äººä¸»åŠ›ä½¿ç”¨çš„AIç¼–è¾‘å™¨æ˜¯Windsurfï¼Œä½†åˆ°ä¸­åæœŸçš„æ—¶å€™æˆ‘å‡ ä¹å·²ç»å®Œå…¨æ›¿æ¢æˆäº†Codexï¼Œå› ä¸ºæˆ‘å‘ç°codexç¼–å†™Swiftä»£ç çš„æ•ˆæœç«Ÿç„¶æ¯”Windsurfè¦å¥½ï¼Œå“ªæ€•éƒ½ä½¿ç”¨OpenAIçš„æ¨¡å‹ï¼Œç”šè‡³Windsurfä½¿ç”¨Claudeï¼Œä¹Ÿæ˜¯codexçš„æ•ˆæœæ›´å¥½ï¼Œè¿™ä¸ªå…¶å®æœ‰ç‚¹è¶…å‡ºæˆ‘çš„è®¤çŸ¥ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸­é—´å› ä¸ºWindsurfçš„ç‚¹æ•°ç”¨å®Œäº†ï¼Œä¸´æ—¶ä½¿ç”¨Codexä¸Šé˜µæ‰å‘ç°çš„ï¼Œä½†å¹³æ—¶å·¥ä½œä¸­å¼€å‘Javaæˆ–è€…Pythonæ—¶ï¼ŒWindsurfçš„æ•ˆæœè¿˜æ˜¯æ„Ÿè§‰æŒºå¥½çš„ï¼Œä¸æ€ä¹ˆä¼šä½¿ç”¨Codexï¼Œå¦‚æœæœ‰ä½¿ç”¨Claude Codeæˆ–è€…Cursorçš„æœ‹å‹ï¼Œä¹Ÿå¯ä»¥è¯´è¯´è‡ªå·±æœ‰æ²¡æœ‰æ„Ÿè§‰æŸä¸ªå·¥å…·å¯¹äºSwiftå¼€å‘æ›´å‹å¥½ã€‚</p>
<p>å®‰åº·è®°ç›®å‰æ”¯æŒåˆ›å»ºå¤šä¸ªç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä¸€ä¸ªäººæ¥ç®¡ç†å®¶ä¸­å¤šäººçš„ç—…å†ï¼Œå¯¹äºå®¶ä¸­æœ‰è€äººå°å­©çš„æœ‹å‹ä»¬è¿˜æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ï¼ˆPSï¼šå¤šç”¨æˆ·éœ€è¦ä¼šå‘˜ï¼‰ã€‚å¦å¤–å¯¹äºåŒ»é™¢ç§‘å®¤å’ŒåŒ»ç”Ÿçš„ç®¡ç†ï¼ŒåŸæœ¬è®¡åˆ’æ˜¯ç›´æ¥ä»ç½‘ä¸Šå…¬å¼€æ•°æ®é›†ä¸­å¯¼å…¥ä¸€äº›å½“å‰å›½å†…çš„åŒ»é™¢ç§‘å®¤å’ŒåŒ»ç”Ÿï¼Œä½†æ˜¯å‘ç°æ•°æ®é‡å¤ªå¤§ï¼Œè€Œä¸”éœ€è¦ç»´æŠ¤ï¼Œæ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯é€‰æ‹©è‡ªå·±æ‰‹åŠ¨è¾“å…¥ï¼Œå¯ä»¥è‡ªå·±å…ˆåˆ›å»ºå¥½äº†å†ç”¨ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºå°±è¯Šè®°å½•çš„æ—¶å€™å¿«æ·åˆ›å»ºã€‚å¯¹äºè¯ç‰©å’Œæ£€æŸ¥é¡¹ç›®è¿˜æä¾›äº†å¿«æ·è¾“å…¥åŠŸèƒ½æ–¹ä¾¿è¾“å…¥ä¸€äº›å¦‚ç”¨è¯é€”å¾„è¯å“è§„æ ¼ç­‰å¸¸è§çš„ä¿¡æ¯ï¼ˆPSï¼šå¿«æ·è¾“å…¥ä¹Ÿéœ€è¦ä¼šå‘˜ï¼‰ã€‚è€Œä¸”appçš„æ‰€æœ‰æ•°æ®å­˜å‚¨éƒ½æ˜¯åŸºäºæœ¬åœ°çš„ï¼Œåªä¼šé€šè¿‡iCloudåŒæ­¥ï¼Œå› æ­¤ä½¿ç”¨è€…ä»¬éƒ½æ— éœ€æ‹…å¿ƒéšç§é—®é¢˜ï¼Œå¯¹æˆ‘ä¸ªäººè€Œè¨€ï¼Œä¸ç”¨èŠ±é’±ä¹°æœåŠ¡å™¨ä¹Ÿæ˜¯æå¥½çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98bfe8522038441b9b9ba5e2c9296d6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25a2Q55qE5oqA5pyv56KO56KO5b-1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763895547&amp;x-signature=gVuo4NYICBaabHvAkAeQMD5vDsQ%3D" alt="setting" loading="lazy"/></p>
<p>ç›®å‰è¿™ä¸ªappè¿˜åªæ˜¯ä¸€ä¸ªåˆç‰ˆï¼Œå½“å‰çš„è®¾è®¡æµç¨‹è¿˜æ¬ ç¼ºå‡ ä¸ªåŠŸèƒ½ï¼ŒåŒ…æ‹¬ä¸ªäººç‹¬ç«‹ç”¨è¯ï¼Œå³ç”Ÿç—…äº†ä¹Ÿä¸ä¸€å®šå»åŒ»é™¢ï¼Œå¯èƒ½è‡ªå·±åœ¨å®¶åƒä¸€äº›è¯ç‰©ï¼Œè¿™äº›è¯ç‰©ä¹Ÿåº”å½“å¯ä»¥ç›´æ¥è®°å½•è€Œä¸æ˜¯é€šè¿‡å°±è¯Šè®°å½•ã€‚æ­¤å¤–è¿™ä¸ªappè¿˜åº”å½“ä¼šæ”¯æŒä½“æ£€é¡¹ç›®ï¼Œå³ä¸“é—¨è®°å½•ä¸ªäººé˜¶æ®µæ€§çš„ä½“æ£€æŠ¥å‘Šã€‚è¿™äº›åŠŸèƒ½ä¼šæ”¾åœ¨æ¥ä¸‹æ¥çš„ç‰ˆæœ¬é™†ç»­å»æ›´æ–°ï¼Œå¦å¤–ç°åœ¨çš„UIæˆ‘å…¶å®è°ˆä¸ä¸Šå¤šæ»¡æ„ï¼Œä½†ä¸€ç›´æ²¡æ‰¾åˆ°å¥½çš„æ–¹å‘å»ä¼˜åŒ–ï¼Œåé¢ä¹Ÿä¼šç»§ç»­å°è¯•æå‡UIä¸Šçš„ä½“éªŒã€‚</p>
<p>ä¸‹ä¸ªç‰ˆæœ¬é¢„è®¡ä¼šåœ¨2-4å‘¨å·¦å³æ¨å‡ºï¼Œå…¬ä¼—å·ä¹Ÿä¼šåŒæ­¥æ¨é€æ›´æ–°æ—¥å¿—ï¼Œåç»­ä¹Ÿå¯èƒ½ä¼šå…¬å¼€éœ€æ±‚æ± å’Œå¼€å‘è®¡åˆ’ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥ä¸‹è½½appè¿›è¡Œä½“éªŒï¼Œæœ‰ä»€ä¹ˆéœ€æ±‚æˆ–è€…å»ºè®®å¯ä»¥é€šè¿‡ç•™è¨€æˆ–åœ¨appä¸­çš„æ„è§åé¦ˆä¸­æå‡ºã€‚è°¢è°¢å¤§å®¶ áƒ¦( Â´ï½¥á´—ï½¥` )ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JdbcTemplateå¸¸ç”¨æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7572776177690837001</link>    <guid>https://juejin.cn/post/7572776177690837001</guid>    <pubDate>2025-11-16T08:42:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572776177690837001" data-draft-id="7572749797468815369" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JdbcTemplateå¸¸ç”¨æ–¹æ³•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-16T08:42:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="kevinzeng"/> <meta itemprop="url" content="https://juejin.cn/user/1964143993949127"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JdbcTemplateå¸¸ç”¨æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1964143993949127/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    kevinzeng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T08:42:04.000Z" title="Sun Nov 16 2025 08:42:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>JdbcTemplate</code>Â æ˜¯ Spring Framework ä¸­ç”¨äºç®€åŒ– JDBC æ“ä½œçš„æ ¸å¿ƒç±»ã€‚å®ƒå°è£…äº† JDBC çš„åº•å±‚ç»†èŠ‚ï¼Œå¦‚è¿æ¥ç®¡ç†ã€Statement åˆ›å»ºã€å¼‚å¸¸å¤„ç†ç­‰ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿæ›´ä¸“æ³¨äº SQL è¯­å¥å’Œä¸šåŠ¡é€»è¾‘ï¼Œä»è€Œæé«˜å¼€å‘æ•ˆç‡å¹¶å‡å°‘æ¨¡æ¿ä»£ç ã€‚</p>
<h2 data-id="heading-0">SpringBooté…ç½®</h2>
<h3 data-id="heading-1">1. ä¾èµ–é…ç½®ï¼ˆMavenï¼‰</h3>
<p>éœ€å¼•å…¥Â <strong>Spring JDBC</strong>Â å’ŒÂ <strong>æ•°æ®åº“é©±åŠ¨</strong>ï¼ˆä»¥ MySQL ä¸ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Spring JDBC æ ¸å¿ƒä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!-- ä¸ Spring ç‰ˆæœ¬ä¸€è‡´ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- MySQL é©±åŠ¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.28<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Spring ä¸Šä¸‹æ–‡ï¼ˆç”¨äºä¾èµ–æ³¨å…¥ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>æ¥ç€å°±æ˜¯åœ¨<code>application.yml</code>é…ç½®æ•°æ®æºã€‚</p>
<h2 data-id="heading-2">jdbcTemplateå¸¸ç”¨çš„æ–¹æ³•</h2>
<h3 data-id="heading-3">åˆå§‹åŒ–ä¸€ä¸ªæ•°æ®åº“demo</h3>
<pre><code class="hljs language-mysql" lang="mysql">CREATE TABLE `user` ( 
`id` INT PRIMARY KEY AUTO_INCREMENT, 
`name` VARCHAR(50) NOT NULL, 
`age` INT DEFAULT NULL, 
`email` VARCHAR(100) UNIQUE );
</code></pre>
<h3 data-id="heading-4">INSERT(å¢)</h3>
<p><code>JdbcTemplate</code>Â æä¾›Â <code>update()</code>Â æ–¹æ³•æ‰§è¡Œå¢åˆ æ”¹æ“ä½œï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°ã€‚</p>
<h5 data-id="heading-5">ç¤ºä¾‹ 1ï¼šç®€å•æ–°å¢ï¼ˆä½¿ç”¨Â <code>?</code>Â å ä½ç¬¦ï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addUser</span><span class="hljs-params">(String name, Integer age, String email)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"INSERT INTO user (name, age, email) VALUES (?, ?, ?)"</span>;
    <span class="hljs-comment">// å‚æ•°é¡ºåºéœ€ä¸ SQL å ä½ç¬¦ä¸€è‡´</span>
    <span class="hljs-keyword">return</span> jdbcTemplate.update(sql, name, age, email);
}
</code></pre>
<h5 data-id="heading-6">ç¤ºä¾‹ 2ï¼šæ–°å¢å¹¶è¿”å›è‡ªå¢ä¸»é”®ï¼ˆ<code>KeyHolder</code>ï¼‰</h5>
<p>å¦‚æœéœ€è¦è·å–æ’å…¥åçš„è‡ªå¢ IDï¼ˆå¦‚Â <code>id</code>ï¼‰ï¼Œå¯ä½¿ç”¨Â <code>KeyHolder</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.jdbc.support.GeneratedKeyHolder;
<span class="hljs-keyword">import</span> org.springframework.jdbc.support.KeyHolder;
<span class="hljs-keyword">import</span> java.sql.PreparedStatement;

<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addUserWithId</span><span class="hljs-params">(String name, Integer age, String email)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"INSERT INTO user (name, age, email) VALUES (?, ?, ?)"</span>;
    
    <span class="hljs-type">KeyHolder</span> <span class="hljs-variable">keyHolder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GeneratedKeyHolder</span>(); <span class="hljs-comment">// ç”¨äºå­˜å‚¨è‡ªå¢ä¸»é”®</span>
    
    jdbcTemplate.update(connection -&gt; {
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">"id"</span>}); <span class="hljs-comment">// æŒ‡å®šè¿”å›çš„ä¸»é”®åˆ—å</span>
        ps.setString(<span class="hljs-number">1</span>, name);
        ps.setObject(<span class="hljs-number">2</span>, age); <span class="hljs-comment">// æ”¯æŒ null</span>
        ps.setString(<span class="hljs-number">3</span>, email);
        <span class="hljs-keyword">return</span> ps;
    }, keyHolder);
    
    <span class="hljs-comment">// è·å–è‡ªå¢ä¸»é”®ï¼ˆLong ç±»å‹ï¼Œéœ€æ ¹æ®æ•°æ®åº“ç±»å‹è½¬æ¢ï¼‰</span>
    <span class="hljs-keyword">return</span> keyHolder.getKey().intValue();
}
</code></pre>
<h3 data-id="heading-7">UPDATE(æ”¹)</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">updateUserAge</span><span class="hljs-params">(Integer id, Integer newAge)</span> { 
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UPDATE user SET age = ? WHERE id = ?"</span>; 
    <span class="hljs-keyword">return</span> jdbcTemplate.update(sql, newAge, id); 
}
</code></pre>
<h3 data-id="heading-8">åˆ é™¤ï¼ˆDELETEï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(Integer id)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"DELETE FROM user WHERE id = ?"</span>;
    <span class="hljs-keyword">return</span> jdbcTemplate.update(sql, id);
}
</code></pre>
<h3 data-id="heading-9">æŸ¥è¯¢ï¼ˆSELECTï¼‰</h3>
<p>æŸ¥è¯¢æ˜¯Â <code>JdbcTemplate</code>Â æœ€å¸¸ç”¨çš„åœºæ™¯ï¼Œæä¾›å¤šç§æ–¹æ³•é€‚é…ä¸åŒç»“æœé›†ï¼š</p>
<h4 data-id="heading-10">åœºæ™¯ 1ï¼šæŸ¥è¯¢å•ä¸ªå¯¹è±¡ï¼ˆè¿”å›è‡ªå®šä¹‰ POJOï¼‰</h4>
<p>éœ€å®ç°Â <code>RowMapper</code>Â æ¥å£ï¼Œå°†Â <code>ResultSet</code>Â æ˜ å°„ä¸º Java å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">private</span> Integer id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> Integer age;
    <span class="hljs-keyword">private</span> String email;

    <span class="hljs-comment">// æ„é€ å™¨ã€getter/setterã€toString()</span>
}
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šå®ç°Â <code>RowMapper</code></strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.jdbc.core.RowMapper;
<span class="hljs-keyword">import</span> java.sql.ResultSet;
<span class="hljs-keyword">import</span> java.sql.SQLException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRowMapper</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RowMapper</span>&lt;User&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">mapRow</span><span class="hljs-params">(ResultSet rs, <span class="hljs-type">int</span> rowNum)</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setId(rs.getInt(<span class="hljs-string">"id"</span>));
        user.setName(rs.getString(<span class="hljs-string">"name"</span>));
        user.setAge(rs.getInt(<span class="hljs-string">"age"</span>));
        user.setEmail(rs.getString(<span class="hljs-string">"email"</span>));
        <span class="hljs-keyword">return</span> user;
    }
}
</code></pre>
<p><strong>æ­¥éª¤ 3ï¼šæŸ¥è¯¢å•ä¸ªå¯¹è±¡</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Integer id)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT id, name, age, email FROM user WHERE id = ?"</span>;
    <span class="hljs-comment">// queryForObject()ï¼šè¿”å›å•ä¸ªå¯¹è±¡ï¼Œæ— ç»“æœæ—¶æŠ›å‡º EmptyResultDataAccessException</span>
    <span class="hljs-keyword">return</span> jdbcTemplate.queryForObject(sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserRowMapper</span>(), id);
}
</code></pre>
<h5 data-id="heading-11">åœºæ™¯ 2ï¼šæŸ¥è¯¢å¤šä¸ªå¯¹è±¡ï¼ˆè¿”å›Â <code>List&lt;POJO&gt;</code>ï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getAllUsers</span><span class="hljs-params">()</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT id, name, age, email FROM user"</span>;
    <span class="hljs-keyword">return</span> jdbcTemplate.query(sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserRowMapper</span>());
}
</code></pre>
<h5 data-id="heading-12">åœºæ™¯ 3ï¼šæŸ¥è¯¢å•ä¸ªå€¼ï¼ˆå¦‚ countã€sumï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getUserCount</span><span class="hljs-params">()</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT COUNT(*) FROM user"</span>;
    <span class="hljs-comment">// queryForObject()ï¼šæŒ‡å®šè¿”å›ç±»å‹ï¼ˆå¦‚ Integer.classï¼‰</span>
    <span class="hljs-keyword">return</span> jdbcTemplate.queryForObject(sql, Integer.class);
}

<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUserNameById</span><span class="hljs-params">(Integer id)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT name FROM user WHERE id = ?"</span>;
    <span class="hljs-keyword">return</span> jdbcTemplate.queryForObject(sql, String.class, id);
}
</code></pre>
<h5 data-id="heading-13">åœºæ™¯ 4ï¼šæŸ¥è¯¢ç»“æœæ˜ å°„ä¸ºÂ <code>Map</code></h5>
<p>é€‚ç”¨äºä¸éœ€è¦è‡ªå®šä¹‰ POJO çš„ç®€å•åœºæ™¯ï¼Œ<code>Map</code>Â çš„ key ä¸ºåˆ—åï¼Œvalue ä¸ºå­—æ®µå€¼ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getUserMapById</span><span class="hljs-params">(Integer id)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT id, name, age, email FROM user WHERE id = ?"</span>;
    <span class="hljs-keyword">return</span> jdbcTemplate.queryForMap(sql, id);
}
</code></pre>
<h5 data-id="heading-14">åœºæ™¯ 5ï¼šæŸ¥è¯¢å¤§ç»“æœé›†ï¼ˆåˆ†é¡µ / æµå¼å¤„ç†ï¼‰</h5>
<p>å¦‚æœç»“æœé›†è¿‡å¤§ï¼ˆå¦‚ 10 ä¸‡æ¡ä»¥ä¸Šï¼‰ï¼Œç›´æ¥æŸ¥è¯¢ä¼šå ç”¨å¤§é‡å†…å­˜ï¼Œæ¨èä½¿ç”¨Â <code>query()</code>Â ç»“åˆÂ <code>RowCallbackHandler</code>Â è¿›è¡Œæµå¼å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.jdbc.core.RowCallbackHandler;
<span class="hljs-keyword">import</span> java.sql.ResultSet;
<span class="hljs-keyword">import</span> java.sql.SQLException;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getUserByPage</span><span class="hljs-params">(<span class="hljs-type">int</span> pageNum, <span class="hljs-type">int</span> pageSize)</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">offset</span> <span class="hljs-operator">=</span> (pageNum - <span class="hljs-number">1</span>) * pageSize;
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT id, name, age, email FROM user LIMIT ? OFFSET ?"</span>;

    List&lt;User&gt; userList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    jdbcTemplate.query(sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">RowCallbackHandler</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRow</span><span class="hljs-params">(ResultSet rs)</span> <span class="hljs-keyword">throws</span> SQLException {
            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
            user.setId(rs.getInt(<span class="hljs-string">"id"</span>));
            user.setName(rs.getString(<span class="hljs-string">"name"</span>));
            user.setAge(rs.getInt(<span class="hljs-string">"age"</span>));
            user.setEmail(rs.getString(<span class="hljs-string">"email"</span>));
            userList.add(user);
        }
    }, pageSize, offset);

    <span class="hljs-keyword">return</span> userList;
}
</code></pre>
<h3 data-id="heading-15">å››ã€é«˜çº§ç‰¹æ€§</h3>
<h4 data-id="heading-16">1. æ‰¹é‡æ“ä½œï¼ˆBatch Updateï¼‰</h4>
<p>ç”¨äºä¸€æ¬¡æ€§æ‰§è¡Œå¤šä¸ªå¢åˆ æ”¹æ“ä½œï¼Œæå‡æ€§èƒ½ï¼ˆå‡å°‘æ•°æ®åº“è¿æ¥æ¬¡æ•°ï¼‰ã€‚</p>
<h5 data-id="heading-17">ç¤ºä¾‹ï¼šæ‰¹é‡æ–°å¢ç”¨æˆ·</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] batchAddUsers(List&lt;User&gt; userList) {
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"INSERT INTO user (name, age, email) VALUES (?, ?, ?)"</span>;

    <span class="hljs-comment">// è½¬æ¢ä¸º Object æ•°ç»„åˆ—è¡¨ï¼ˆæ¯ä¸ªæ•°ç»„å¯¹åº”ä¸€æ¡ SQL çš„å‚æ•°ï¼‰</span>
    List&lt;Object[]&gt; batchArgs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">for</span> (User user : userList) {
        batchArgs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{user.getName(), user.getAge(), user.getEmail()});
    }

    <span class="hljs-comment">// batchUpdate()ï¼šè¿”å›æ¯ä¸ªæ“ä½œå—å½±å“çš„è¡Œæ•°æ•°ç»„</span>
    <span class="hljs-keyword">return</span> jdbcTemplate.batchUpdate(sql, batchArgs);
}
</code></pre>
<h4 data-id="heading-18">2. å‘½åå‚æ•°ï¼ˆNamed Parametersï¼‰</h4>
<p>é»˜è®¤Â <code>JdbcTemplate</code>Â ä½¿ç”¨Â <code>?</code>Â å ä½ç¬¦ï¼Œå‚æ•°é¡ºåºå¿…é¡»ä¸¥æ ¼å¯¹åº”ã€‚è‹¥éœ€ä½¿ç”¨å‘½åå‚æ•°ï¼ˆå¦‚Â <code>:name</code>ï¼‰ï¼Œéœ€é…åˆÂ <code>NamedParameterJdbcTemplate</code>ï¼ˆ<code>JdbcTemplate</code>Â çš„å­ç±»ï¼‰ã€‚</p>
<h5 data-id="heading-19">ç¤ºä¾‹ï¼šä½¿ç”¨å‘½åå‚æ•°æŸ¥è¯¢</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> NamedParameterJdbcTemplate namedParameterJdbcTemplate; <span class="hljs-comment">// æ³¨å…¥å‘½åå‚æ•°æ¨¡æ¿</span>

    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserByName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT id, name, age, email FROM user WHERE name = :name"</span>;
        
        <span class="hljs-comment">// å°è£…å‚æ•°ï¼ˆkey å¯¹åº”å‘½åå‚æ•°ï¼Œvalue ä¸ºå‚æ•°å€¼ï¼‰</span>
        Map&lt;String, Object&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        params.put(<span class="hljs-string">"name"</span>, name);
        
        <span class="hljs-comment">// queryForObject()ï¼šä½¿ç”¨å‘½åå‚æ•°ï¼Œæ— éœ€å…³å¿ƒå‚æ•°é¡ºåº</span>
        <span class="hljs-keyword">return</span> namedParameterJdbcTemplate.queryForObject(sql, params, <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserRowMapper</span>());
    }
}
</code></pre>
<h4 data-id="heading-20">3. äº‹åŠ¡ç®¡ç†</h4>
<p><code>JdbcTemplate</code>Â æœ¬èº«ä¸ç®¡ç†äº‹åŠ¡ï¼Œéœ€ç»“åˆ Spring çš„äº‹åŠ¡ç®¡ç†æœºåˆ¶ï¼ˆå¦‚Â <code>@Transactional</code>Â æ³¨è§£ï¼‰ã€‚</p>
<h5 data-id="heading-21">ç¤ºä¾‹ï¼šäº‹åŠ¡æ§åˆ¶ä¸‹çš„æ‰¹é‡æ“ä½œ</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JdbcTemplate jdbcTemplate;

    <span class="hljs-comment">// å£°æ˜äº‹åŠ¡ï¼šæ–¹æ³•å†…æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»š</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchOperation</span><span class="hljs-params">(List&lt;User&gt; addUsers, List&lt;Integer&gt; deleteIds)</span> {
        <span class="hljs-comment">// æ‰¹é‡æ–°å¢</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">addSql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"INSERT INTO user (name, age, email) VALUES (?, ?, ?)"</span>;
        List&lt;Object[]&gt; addArgs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">for</span> (User user : addUsers) {
            addArgs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{user.getName(), user.getAge(), user.getEmail()});
        }
        jdbcTemplate.batchUpdate(addSql, addArgs);

        <span class="hljs-comment">// æ‰¹é‡åˆ é™¤ï¼ˆè‹¥æ­¤å¤„æŠ›å‡ºå¼‚å¸¸ï¼Œæ–°å¢æ“ä½œä¼šå›æ»šï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">deleteSql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"DELETE FROM user WHERE id = ?"</span>;
        List&lt;Object[]&gt; deleteArgs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">for</span> (Integer id : deleteIds) {
            deleteArgs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{id});
        }
        jdbcTemplate.batchUpdate(deleteSql, deleteArgs);
    }
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šéœ€åœ¨é…ç½®ç±»ä¸­å¯ç”¨äº‹åŠ¡ç®¡ç†ï¼ˆ<code>@EnableTransactionManagement</code>ï¼‰ã€‚</p>
<h4 data-id="heading-22">4. å¼‚å¸¸å¤„ç†</h4>
<p><code>JdbcTemplate</code>Â å°† JDBC å¼‚å¸¸ï¼ˆå¦‚Â <code>SQLException</code>ï¼‰è½¬æ¢ä¸º Spring ç»Ÿä¸€çš„Â <strong>æ•°æ®è®¿é—®å¼‚å¸¸ä½“ç³»</strong>ï¼ˆç»§æ‰¿è‡ªÂ <code>DataAccessException</code>ï¼‰ï¼Œå¸¸ç”¨å¼‚å¸¸åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>EmptyResultDataAccessException</code>ï¼šæŸ¥è¯¢æ— ç»“æœ</li>
<li><code>IncorrectResultSizeDataAccessException</code>ï¼šæŸ¥è¯¢ç»“æœæ•°é‡ä¸åŒ¹é…</li>
<li><code>DuplicateKeyException</code>ï¼šä¸»é”®å†²çª</li>
<li><code>DataIntegrityViolationException</code>ï¼šæ•°æ®å®Œæ•´æ€§çº¦æŸ violation</li>
</ul>
<h5 data-id="heading-23">ç¤ºä¾‹ï¼šå¼‚å¸¸æ•è·</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserByIdSafe</span><span class="hljs-params">(Integer id)</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT id, name, age, email FROM user WHERE id = ?"</span>;
        <span class="hljs-keyword">return</span> jdbcTemplate.queryForObject(sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserRowMapper</span>(), id);
    } <span class="hljs-keyword">catch</span> (EmptyResultDataAccessException e) {
        <span class="hljs-comment">// æ— ç»“æœæ—¶è¿”å› null æˆ–æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸</span>
        log.warn(<span class="hljs-string">"ç”¨æˆ· id={} ä¸å­˜åœ¨"</span>, id);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    } <span class="hljs-keyword">catch</span> (DataAccessException e) {
        <span class="hljs-comment">// å…¶ä»–æ•°æ®åº“å¼‚å¸¸ï¼ˆå¦‚è¿æ¥å¤±è´¥ã€SQL è¯­æ³•é”™è¯¯ï¼‰</span>
        log.error(<span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·å¤±è´¥ï¼š"</span>, e);
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•"</span>);
    }
}
</code></pre>
<h3 data-id="heading-24">äº”ã€æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>
<p><strong>SQL æ³¨å…¥é˜²æŠ¤</strong>ï¼š</p>
<ul>
<li>å§‹ç»ˆä½¿ç”¨Â <strong>å ä½ç¬¦ï¼ˆ<code>?</code>Â æˆ–å‘½åå‚æ•°ï¼‰</strong> Â ä¼ é€’å‚æ•°ï¼Œé¿å…ç›´æ¥æ‹¼æ¥ SQL å­—ç¬¦ä¸²ã€‚</li>
<li>é”™è¯¯ç¤ºä¾‹ï¼š<code>String sql = "SELECT * FROM user WHERE name = '" + name + "'";</code>ï¼ˆå­˜åœ¨æ³¨å…¥é£é™©ï¼‰</li>
</ul>
</li>
<li>
<p><strong>èµ„æºé‡Šæ”¾</strong>ï¼š</p>
<ul>
<li><code>JdbcTemplate</code>Â è‡ªåŠ¨ç®¡ç†è¿æ¥ã€Statementã€ResultSet çš„é‡Šæ”¾ï¼Œæ— éœ€æ‰‹åŠ¨å…³é—­ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>æ‰¹é‡æ“ä½œä¼˜å…ˆä½¿ç”¨Â <code>batchUpdate()</code>ï¼Œå‡å°‘æ•°æ®åº“äº¤äº’æ¬¡æ•°ã€‚</li>
<li>å¤§ç»“æœé›†ä½¿ç”¨Â <code>RowCallbackHandler</code>Â æµå¼å¤„ç†ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®åˆ°å†…å­˜ã€‚</li>
<li>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨Â <strong>è¿æ¥æ± </strong>ï¼ˆå¦‚ HikariCPï¼‰ï¼Œè€ŒéÂ <code>DriverManagerDataSource</code>ï¼ˆæ— è¿æ¥æ± ï¼Œæ€§èƒ½å·®ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç±»å‹è½¬æ¢</strong>ï¼š</p>
<ul>
<li>
<p><code>JdbcTemplate</code>Â è‡ªåŠ¨å¤„ç†å¸¸è§ç±»å‹è½¬æ¢ï¼ˆå¦‚Â <code>String</code>Â â†”Â <code>VARCHAR</code>ã€<code>Integer</code>Â â†”Â <code>INT</code>ï¼‰ã€‚</p>
</li>
<li>
<p>å¯¹äºå¤æ‚ç±»å‹ï¼ˆå¦‚Â <code>LocalDateTime</code>ï¼‰ï¼Œéœ€æ‰‹åŠ¨æŒ‡å®šç±»å‹æˆ–ä½¿ç”¨Â <code>SqlParameterValue</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.jdbc.core.SqlParameterValue;
<span class="hljs-keyword">import</span> java.sql.Types;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addUserWithTime</span><span class="hljs-params">(String name, LocalDateTime createTime)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"INSERT INTO user (name, create_time) VALUES (?, ?)"</span>;
    <span class="hljs-comment">// æŒ‡å®šå‚æ•°ç±»å‹ä¸º TIMESTAMP</span>
    <span class="hljs-type">SqlParameterValue</span> <span class="hljs-variable">timeParam</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlParameterValue</span>(Types.TIMESTAMP, createTime);
    jdbcTemplate.update(sql, name, timeParam);
}
</code></pre>
</li>
</ul>
</li>
</ol>
<h2 data-id="heading-25">chatGPTç»™çš„ä¼˜é›…ä»£ç </h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Java</span>
<span class="hljs-keyword">package</span> com.example.demo;

<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.dao.DataAccessException;
<span class="hljs-keyword">import</span> org.springframework.jdbc.core.*;
<span class="hljs-keyword">import</span> org.springframework.jdbc.support.GeneratedKeyHolder;
<span class="hljs-keyword">import</span> org.springframework.jdbc.support.KeyHolder;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Repository;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-keyword">import</span> java.sql.PreparedStatement;
<span class="hljs-keyword">import</span> java.sql.Statement;
<span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Repository</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoJdbcTemplateUsage</span> {

 <span class="hljs-comment">// æ„é€ å™¨æ³¨å…¥ï¼Œå’Œä½ çš„ MysqlService ç›¸åŒå†™æ³•</span>
 <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JdbcTemplate jdbcTemplate;

 <span class="hljs-comment">// 1) æŸ¥è¯¢åˆ—è¡¨ï¼ˆç­‰å€¼æ¡ä»¶ + åˆ†é¡µï¼‰ï¼Œè¿”å› List&lt;Map&lt;String,Object&gt;&gt;</span>
 <span class="hljs-keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">listByStatus</span><span class="hljs-params">(String status, <span class="hljs-type">int</span> limit, <span class="hljs-type">int</span> offset)</span> {
     <span class="hljs-type">int</span> <span class="hljs-variable">safeLimit</span> <span class="hljs-operator">=</span> (limit &gt; <span class="hljs-number">0</span> &amp;&amp; limit &lt;= <span class="hljs-number">1000</span>) ? limit : <span class="hljs-number">100</span>;
     <span class="hljs-type">int</span> <span class="hljs-variable">safeOffset</span> <span class="hljs-operator">=</span> Math.max(offset, <span class="hljs-number">0</span>);
     <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT `id`,`username`,`email` FROM `user` "</span> +
                  <span class="hljs-string">"WHERE `status` = ? ORDER BY `id` DESC LIMIT ? OFFSET ?"</span>;
     <span class="hljs-keyword">return</span> jdbcTemplate.queryForList(sql, status, safeLimit, safeOffset);
 }

 <span class="hljs-comment">// 2) ç»Ÿè®¡æ€»æ•°ï¼ˆä¸åˆ—è¡¨æŸ¥è¯¢çš„ where å‚æ•°ä¸€è‡´ï¼‰</span>
 <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">countByStatus</span><span class="hljs-params">(String status)</span> {
     <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT COUNT(1) FROM `user` WHERE `status` = ?"</span>;
     <span class="hljs-type">Integer</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> jdbcTemplate.queryForObject(sql, Integer.class, status);
     <span class="hljs-keyword">return</span> n == <span class="hljs-literal">null</span> ? <span class="hljs-number">0</span> : n;
 }

 <span class="hljs-comment">// 3) æŸ¥è¯¢å•æ¡å¹¶æ˜ å°„ä¸ºå¯¹è±¡ï¼ˆRowMapperï¼‰</span>
 <span class="hljs-keyword">public</span> Optional&lt;User&gt; <span class="hljs-title function_">findById</span><span class="hljs-params">(<span class="hljs-type">long</span> id)</span> {
     <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT `id`,`username`,`email`,`status` FROM `user` WHERE `id` = ?"</span>;
     List&lt;User&gt; list = jdbcTemplate.query(sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{id}, userRowMapper());
     <span class="hljs-keyword">return</span> list.stream().findFirst();
 }

 <span class="hljs-keyword">private</span> RowMapper&lt;User&gt; <span class="hljs-title function_">userRowMapper</span><span class="hljs-params">()</span> {
     <span class="hljs-keyword">return</span> (rs, rowNum) -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(
         rs.getLong(<span class="hljs-string">"id"</span>),
         rs.getString(<span class="hljs-string">"username"</span>),
         rs.getString(<span class="hljs-string">"email"</span>),
         rs.getString(<span class="hljs-string">"status"</span>)
     );
 }

 <span class="hljs-comment">// 4) æ–°å¢å¹¶è¿”å›è‡ªå¢ä¸»é”®</span>
 <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">insertUser</span><span class="hljs-params">(String username, String email, String status)</span> {
     <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"INSERT INTO `user`(`username`,`email`,`status`) VALUES(?,?,?)"</span>;
     <span class="hljs-type">KeyHolder</span> <span class="hljs-variable">kh</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GeneratedKeyHolder</span>();
     jdbcTemplate.update(con -&gt; {
         <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> con.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);
         ps.setString(<span class="hljs-number">1</span>, username);
         ps.setString(<span class="hljs-number">2</span>, email);
         ps.setString(<span class="hljs-number">3</span>, status);
         <span class="hljs-keyword">return</span> ps;
     }, kh);
     <span class="hljs-type">Number</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> kh.getKey();
     <span class="hljs-keyword">return</span> key == <span class="hljs-literal">null</span> ? <span class="hljs-number">0L</span> : key.longValue();
 }

 <span class="hljs-comment">// 5) æ›´æ–°æˆ–åˆ é™¤ï¼ˆå—å½±å“è¡Œæ•°ï¼‰</span>
 <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">deactivateUser</span><span class="hljs-params">(<span class="hljs-type">long</span> id)</span> {
     <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UPDATE `user` SET `status` = ? WHERE `id` = ?"</span>;
     <span class="hljs-keyword">return</span> jdbcTemplate.update(sql, <span class="hljs-string">"INACTIVE"</span>, id);
 }

 <span class="hljs-comment">// 6) æ‰¹é‡æ›´æ–°ï¼ˆå ä½ç¬¦å‚æ•°åŒ–ï¼Œé¿å…æ‹¼æ¥ï¼‰</span>
 <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] batchDeactivate(List&lt;Long&gt; ids) {
     <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UPDATE `user` SET `status` = 'INACTIVE' WHERE `id` = ?"</span>;
     <span class="hljs-keyword">return</span> jdbcTemplate.batchUpdate(sql, ids, ids.size(),
             (ps, userId) -&gt; ps.setLong(<span class="hljs-number">1</span>, userId));
 }

 <span class="hljs-comment">// 7) äº‹åŠ¡ç¤ºä¾‹ï¼ˆå¤šæ¡è¯­å¥è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å›æ»šï¼‰</span>
 <span class="hljs-meta">@Transactional</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transferDemo</span><span class="hljs-params">(<span class="hljs-type">long</span> fromUserId, <span class="hljs-type">long</span> toUserId, <span class="hljs-type">int</span> points)</span> {
     <span class="hljs-type">String</span> <span class="hljs-variable">dec</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UPDATE `user_points` SET `points` = `points` - ? WHERE `user_id` = ?"</span>;
     <span class="hljs-type">String</span> <span class="hljs-variable">inc</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UPDATE `user_points` SET `points` = `points` + ? WHERE `user_id` = ?"</span>;
     jdbcTemplate.update(dec, points, fromUserId);
     <span class="hljs-comment">// ä»»æ„å¼‚å¸¸éƒ½ä¼šè§¦å‘å›æ»š</span>
     jdbcTemplate.update(inc, points, toUserId);
 }

 <span class="hljs-comment">// 8) å®‰å…¨æ„é€ ç®€å• ORDER BYï¼ˆåˆ—åç™½åå•æ ¡éªŒï¼‰</span>
 <span class="hljs-keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">listWithOrder</span><span class="hljs-params">(Set&lt;String&gt; allowedCols, String orderBy)</span> {
     <span class="hljs-type">String</span> <span class="hljs-variable">orderSql</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
     <span class="hljs-keyword">if</span> (orderBy != <span class="hljs-literal">null</span> &amp;&amp; !orderBy.isBlank()) {
         String[] parts = orderBy.trim().split(<span class="hljs-string">"\s+"</span>);
         <span class="hljs-type">String</span> <span class="hljs-variable">col</span> <span class="hljs-operator">=</span> parts[<span class="hljs-number">0</span>];
         <span class="hljs-type">String</span> <span class="hljs-variable">dir</span> <span class="hljs-operator">=</span> (parts.length &gt; <span class="hljs-number">1</span> ? parts[<span class="hljs-number">1</span>] : <span class="hljs-string">"ASC"</span>).toUpperCase(Locale.ROOT);
         <span class="hljs-keyword">if</span> (allowedCols.contains(col) &amp;&amp; (<span class="hljs-string">"ASC"</span>.equals(dir) || <span class="hljs-string">"DESC"</span>.equals(dir))) {
             orderSql = <span class="hljs-string">" ORDER BY `"</span> + col + <span class="hljs-string">"` "</span> + dir + <span class="hljs-string">" "</span>;
         }
     }
     <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT `id`,`username` FROM `user` WHERE 1=1 "</span> + orderSql + <span class="hljs-string">" LIMIT ? OFFSET ?"</span>;
     <span class="hljs-keyword">return</span> jdbcTemplate.queryForList(sql, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>);
 }

 <span class="hljs-comment">// 9) åŸºæœ¬å¼‚å¸¸å¤„ç†ï¼ˆä¸ä½ çš„ MysqlService ç›¸åŒæ€è·¯ï¼‰</span>
 <span class="hljs-keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">safeQuery</span><span class="hljs-params">()</span> {
     <span class="hljs-keyword">try</span> {
         <span class="hljs-keyword">return</span> jdbcTemplate.queryForList(<span class="hljs-string">"SELECT 1 AS one"</span>);
     } <span class="hljs-keyword">catch</span> (DataAccessException dae) {
         log.error(<span class="hljs-string">"DB error"</span>, dae);
         <span class="hljs-keyword">return</span> Collections.emptyList();
     }
 }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†å¸ƒå¼æ–‡ä»¶æœåŠ¡å®æˆ˜ç¨¿ï¼šä»æœ¬åœ°å­˜å‚¨åˆ°å¯¹è±¡å­˜å‚¨çš„æ¶æ„å‡çº§]]></title>    <link>https://juejin.cn/post/7572493520004661282</link>    <guid>https://juejin.cn/post/7572493520004661282</guid>    <pubDate>2025-11-16T09:04:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572493520004661282" data-draft-id="7572537221541134351" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†å¸ƒå¼æ–‡ä»¶æœåŠ¡å®æˆ˜ç¨¿ï¼šä»æœ¬åœ°å­˜å‚¨åˆ°å¯¹è±¡å­˜å‚¨çš„æ¶æ„å‡çº§"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-16T09:04:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="yunxi_05"/> <meta itemprop="url" content="https://juejin.cn/user/310483456105751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†å¸ƒå¼æ–‡ä»¶æœåŠ¡å®æˆ˜ç¨¿ï¼šä»æœ¬åœ°å­˜å‚¨åˆ°å¯¹è±¡å­˜å‚¨çš„æ¶æ„å‡çº§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/310483456105751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    yunxi_05
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T09:04:57.000Z" title="Sun Nov 16 2025 09:04:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åˆ†å¸ƒå¼æ–‡ä»¶æœåŠ¡å®æˆ˜ç¨¿ï¼šä»æœ¬åœ°å­˜å‚¨åˆ°å¯¹è±¡å­˜å‚¨çš„æ¶æ„å‡çº§</h2>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆå¤§å‚é¢è¯•çˆ±é—®â€œä¸ºä»€ä¹ˆè¦ç”¨ MinIO/OSSï¼Ÿâ€</h3>
<p>é¢è¯•å®˜é—®è¿™ä¸ªé—®é¢˜ï¼Œä¸æ˜¯æƒ³å¬â€œå¯¹è±¡å­˜å‚¨èƒ½å­˜å¤§æ–‡ä»¶â€â€œOSS æ”¯æŒ CDN åŠ é€Ÿâ€è¿™äº›æ¦‚å¿µï¼Œè€Œæ˜¯æƒ³åˆ¤æ–­ï¼šä½ åœ¨å®é™…é¡¹ç›®ä¸­ï¼ŒçœŸçš„é‡åˆ°è¿‡æ–‡ä»¶å­˜å‚¨çš„ç—›ç‚¹å—ï¼Ÿä½ èƒ½è¯´æ¸…æ¥šæœ¬åœ°å­˜å‚¨å’Œå¯¹è±¡å­˜å‚¨çš„åŒºåˆ«ï¼Œä»¥åŠå¦‚ä½•æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆå—ï¼Ÿ</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šé€šè¿‡å››ä¸ªçœŸå®é¡¹ç›®åœºæ™¯ï¼Œå±•ç¤ºæˆ‘ä»¬æ˜¯å¦‚ä½•ä»â€œæœ¬åœ°æ–‡ä»¶å­˜å‚¨çš„ç§ç§é—®é¢˜â€åˆ°â€œå¯¹è±¡å­˜å‚¨çš„å®Œç¾è§£å†³æ–¹æ¡ˆâ€çš„å®Œæ•´è¿‡ç¨‹ã€‚æ¯ä¸ªåœºæ™¯éƒ½ä¼šåŒ…å«ï¼šå½“æ—¶é‡åˆ°äº†ä»€ä¹ˆå…·ä½“é—®é¢˜ã€æˆ‘ä»¬æ˜¯æ€ä¹ˆè§£å†³çš„ã€æœ€ç»ˆå–å¾—äº†ä»€ä¹ˆæ•ˆæœã€‚</p>
<hr/>
<h3 data-id="heading-2">åœºæ™¯ 1ï¼šæœ¬åœ°å­˜å‚¨å®¹é‡çˆ†ç‚¸ â€”â€” ä»â€œæœåŠ¡å™¨ç£ç›˜ 100% å‘Šè­¦â€åˆ°â€œOSS æ— é™æ‰©å®¹â€</h3>
<p><strong>ä¸šåŠ¡èƒŒæ™¯</strong>ï¼šå†…å®¹ç¤¾åŒºå¹³å°ï¼Œç”¨æˆ·æ¯å¤©ä¸Šä¼  50 ä¸‡å¼ å›¾ç‰‡ï¼Œå¹³å‡æ¯å¼  2MBï¼Œæ¯å¤©æ–°å¢å­˜å‚¨ 100GBã€‚å›¾ç‰‡å­˜å‚¨åœ¨åº”ç”¨æœåŠ¡å™¨çš„æœ¬åœ°ç£ç›˜ï¼Œ3 ä¸ªæœˆåç£ç›˜ç©ºé—´å‘Šæ€¥ã€‚</p>
<p><strong>é‡åˆ°çš„é—®é¢˜</strong>ï¼š</p>
<ul>
<li>æœåŠ¡å™¨ç£ç›˜ä½¿ç”¨ç‡ä» 60% é£™å‡åˆ° 100%ï¼Œé¢‘ç¹å‘Šè­¦ï¼Œè¿ç»´æ¯å¤©éƒ½è¦æ¸…ç†ä¸´æ—¶æ–‡ä»¶ã€‚</li>
<li>ç£ç›˜æ»¡äº†å¯¼è‡´æ–°ç”¨æˆ·æ— æ³•ä¸Šä¼ å›¾ç‰‡ï¼Œç”¨æˆ·æŠ•è¯‰â€œä¸Šä¼ å¤±è´¥â€ï¼Œæ¯å¤© 100+ æ¡æŠ•è¯‰ã€‚</li>
<li>æ‰©å®¹å›°éš¾ï¼šéœ€è¦åœæœºè¿ç§»æ•°æ®ï¼Œå½±å“ä¸šåŠ¡ï¼Œè€Œä¸”å•æœºç£ç›˜å®¹é‡æœ‰é™ï¼Œæ— æ³•æ— é™æ‰©å®¹ã€‚</li>
<li>æ•°æ®å®‰å…¨é£é™©ï¼šæœåŠ¡å™¨æ•…éšœå¯èƒ½å¯¼è‡´æ‰€æœ‰å›¾ç‰‡ä¸¢å¤±ï¼Œè™½ç„¶æœ‰å¤‡ä»½ï¼Œä½†æ¢å¤éœ€è¦ 6 å°æ—¶ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>è¿ç§»åˆ° <strong>é˜¿é‡Œäº‘ OSS</strong>ï¼ˆå¯¹è±¡å­˜å‚¨æœåŠ¡ï¼‰ï¼Œæ”¯æŒæ— é™æ‰©å®¹ï¼ŒæŒ‰éœ€ä»˜è´¹ã€‚</li>
<li>å›¾ç‰‡ä¸Šä¼ æµç¨‹æ”¹ä¸ºï¼šç”¨æˆ·ä¸Šä¼  â†’ åº”ç”¨æœåŠ¡å™¨æ¥æ”¶ â†’ ç›´æ¥ä¸Šä¼ åˆ° OSS â†’ è¿”å› OSS URLã€‚</li>
<li>å¯ç”¨ OSS çš„ CDN åŠ é€Ÿï¼Œç”¨æˆ·è®¿é—®å›¾ç‰‡é€Ÿåº¦æå‡ 3 å€ã€‚</li>
<li>é…ç½® OSS ç”Ÿå‘½å‘¨æœŸè§„åˆ™ï¼š30 å¤©å‰çš„å›¾ç‰‡è‡ªåŠ¨è½¬å­˜åˆ°ä½é¢‘è®¿é—®å­˜å‚¨ï¼Œé™ä½æˆæœ¬ 60%ã€‚</li>
</ul>
<p><strong>æ ¸å¿ƒä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// OSS æ–‡ä»¶ä¸Šä¼ </span>
<span class="hljs-type">OSS</span> <span class="hljs-variable">ossClient</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OSSClientBuilder</span>().build(endpoint, accessKeyId, accessKeySecret);
<span class="hljs-type">String</span> <span class="hljs-variable">objectName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"images/"</span> + userId + <span class="hljs-string">"/"</span> + fileName;
ossClient.putObject(bucketName, objectName, inputStream);
<span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"https://"</span> + bucketName + <span class="hljs-string">"."</span> + endpoint + <span class="hljs-string">"/"</span> + objectName;
</code></pre>
<p><strong>å®é™…æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>å­˜å‚¨å®¹é‡ä»å•æœº 2TB æ‰©å±•åˆ°æ— é™ï¼Œä¸å†æ‹…å¿ƒç£ç›˜æ»¡çš„é—®é¢˜ã€‚</li>
<li>ç”¨æˆ·ä¸Šä¼ æˆåŠŸç‡ä» 95% æå‡åˆ° 99.9%ï¼ŒæŠ•è¯‰é‡ä¸‹é™ 90%ã€‚</li>
<li>å›¾ç‰‡è®¿é—®é€Ÿåº¦æå‡ 3 å€ï¼ŒCDN å‘½ä¸­ç‡ 95%ï¼Œç”¨æˆ·ä½“éªŒæ˜¾è‘—æ”¹å–„ã€‚</li>
<li>å­˜å‚¨æˆæœ¬é™ä½ 40%ï¼Œé€šè¿‡ç”Ÿå‘½å‘¨æœŸè§„åˆ™è‡ªåŠ¨ä¼˜åŒ–å­˜å‚¨ç±»å‹ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">åœºæ™¯ 2ï¼šå¤šæœåŠ¡å™¨æ–‡ä»¶åŒæ­¥éš¾é¢˜ â€”â€” ä»â€œæ–‡ä»¶æ‰¾ä¸åˆ°â€åˆ°â€œç»Ÿä¸€å¯¹è±¡å­˜å‚¨â€</h3>
<p><strong>ä¸šåŠ¡èƒŒæ™¯</strong>ï¼šç”µå•†å¹³å°ï¼Œåº”ç”¨éƒ¨ç½²åœ¨ 5 å°æœåŠ¡å™¨ä¸Šï¼Œç”¨æˆ·ä¸Šä¼ çš„å•†å“å›¾ç‰‡å­˜å‚¨åœ¨æœ¬åœ°ã€‚ç”¨æˆ·è®¿é—®æ—¶ï¼Œå¦‚æœè¯·æ±‚è¢«è´Ÿè½½å‡è¡¡åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼Œå¯èƒ½è®¿é—®ä¸åˆ°å›¾ç‰‡ã€‚</p>
<p><strong>é‡åˆ°çš„é—®é¢˜</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ· A åœ¨æœåŠ¡å™¨ 1 ä¸Šä¼ å›¾ç‰‡ï¼Œç”¨æˆ· B è®¿é—®æ—¶è¢«è´Ÿè½½å‡è¡¡åˆ°æœåŠ¡å™¨ 2ï¼Œæ‰¾ä¸åˆ°å›¾ç‰‡ï¼Œæ˜¾ç¤ºâ€œå›¾ç‰‡åŠ è½½å¤±è´¥â€ã€‚</li>
<li>éœ€è¦æ‰‹åŠ¨åŒæ­¥æ–‡ä»¶åˆ°æ‰€æœ‰æœåŠ¡å™¨ï¼ŒåŒæ­¥è„šæœ¬ç»å¸¸å¤±è´¥ï¼Œè¿ç»´æˆæœ¬é«˜ã€‚</li>
<li>æ–‡ä»¶åŒæ­¥æœ‰å»¶è¿Ÿï¼Œç”¨æˆ·ä¸Šä¼ åç«‹å³è®¿é—®å¯èƒ½çœ‹ä¸åˆ°å›¾ç‰‡ï¼Œä½“éªŒå·®ã€‚</li>
<li>æœåŠ¡å™¨æ‰©å®¹æ—¶ï¼Œæ–°æœåŠ¡å™¨æ²¡æœ‰å†å²æ–‡ä»¶ï¼Œéœ€è¦å…¨é‡åŒæ­¥ï¼Œè€—æ—¶ 8 å°æ—¶ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>è¿ç§»åˆ° <strong>MinIO</strong>ï¼ˆå¼€æºå¯¹è±¡å­˜å‚¨ï¼‰ï¼Œéƒ¨ç½²åœ¨ç‹¬ç«‹çš„å­˜å‚¨é›†ç¾¤ï¼Œæ‰€æœ‰åº”ç”¨æœåŠ¡å™¨å…±äº«åŒä¸€ä¸ªå­˜å‚¨ã€‚</li>
<li>æ–‡ä»¶ä¸Šä¼ æµç¨‹ï¼šç”¨æˆ·ä¸Šä¼  â†’ åº”ç”¨æœåŠ¡å™¨ â†’ MinIO é›†ç¾¤ â†’ è¿”å›ç»Ÿä¸€ URLã€‚</li>
<li>æ‰€æœ‰æœåŠ¡å™¨é€šè¿‡ç»Ÿä¸€çš„ MinIO åœ°å€è®¿é—®æ–‡ä»¶ï¼Œä¸å†éœ€è¦æ–‡ä»¶åŒæ­¥ã€‚</li>
<li>MinIO æ”¯æŒå¤šå‰¯æœ¬ï¼Œæ•°æ®è‡ªåŠ¨å¤‡ä»½ï¼Œä¿è¯é«˜å¯ç”¨ã€‚</li>
</ul>
<p><strong>æ ¸å¿ƒä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MinIO å®¢æˆ·ç«¯é…ç½®ï¼ˆæ‰€æœ‰æœåŠ¡å™¨ä½¿ç”¨ç›¸åŒé…ç½®ï¼‰</span>
<span class="hljs-type">MinioClient</span> <span class="hljs-variable">minioClient</span> <span class="hljs-operator">=</span> MinioClient.builder()
    .endpoint(<span class="hljs-string">"http://minio-cluster:9000"</span>)
    .credentials(<span class="hljs-string">"minioadmin"</span>, <span class="hljs-string">"minioadmin"</span>)
    .build();

<span class="hljs-comment">// æ–‡ä»¶ä¸Šä¼ ï¼ˆè¿”å›ç»Ÿä¸€URLï¼‰</span>
minioClient.putObject(PutObjectArgs.builder()
    .bucket(<span class="hljs-string">"product-images"</span>)
    .object(fileName)
    .stream(inputStream, fileSize, -<span class="hljs-number">1</span>)
    .build());
<span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"http://minio-cluster:9000/product-images/"</span> + fileName;
</code></pre>
<p><strong>å®é™…æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>æ–‡ä»¶è®¿é—®æˆåŠŸç‡ä» 85% æå‡åˆ° 99.9%ï¼Œå½»åº•è§£å†³â€œæ–‡ä»¶æ‰¾ä¸åˆ°â€çš„é—®é¢˜ã€‚</li>
<li>è¿ç»´æˆæœ¬ä¸‹é™ 80%ï¼Œä¸å†éœ€è¦æ–‡ä»¶åŒæ­¥è„šæœ¬ï¼ŒæœåŠ¡å™¨æ‰©å®¹æ—¶æ— éœ€åŒæ­¥æ–‡ä»¶ã€‚</li>
<li>æ–‡ä»¶è®¿é—®å»¶è¿Ÿä» 500ms é™åˆ° 100msï¼Œç”¨æˆ·ä½“éªŒæ˜¾è‘—æå‡ã€‚</li>
<li>æ•°æ®å®‰å…¨æ€§æå‡ï¼ŒMinIO å¤šå‰¯æœ¬ä¿è¯æ•°æ®ä¸ä¸¢å¤±ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">åœºæ™¯ 3ï¼šå¤§æ–‡ä»¶ä¸Šä¼ è¶…æ—¶ â€”â€” ä»â€œä¸Šä¼ å¤±è´¥ç‡ 30%â€åˆ°â€œåˆ†ç‰‡ä¸Šä¼ æˆåŠŸç‡ 99.9%â€</h3>
<p><strong>ä¸šåŠ¡èƒŒæ™¯</strong>ï¼šåœ¨çº¿æ•™è‚²å¹³å°ï¼Œç”¨æˆ·éœ€è¦ä¸Šä¼ è§†é¢‘æ–‡ä»¶ï¼Œå¹³å‡å¤§å° 500MBï¼Œæœ€å¤§ 2GBã€‚ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼ä¸Šä¼ ï¼Œç»å¸¸å› ä¸ºç½‘ç»œæ³¢åŠ¨æˆ–è¶…æ—¶å¯¼è‡´ä¸Šä¼ å¤±è´¥ã€‚</p>
<p><strong>é‡åˆ°çš„é—®é¢˜</strong>ï¼š</p>
<ul>
<li>å¤§æ–‡ä»¶ä¸Šä¼ æ—¶é—´é•¿ï¼Œç½‘ç»œæ³¢åŠ¨å¯¼è‡´ä¸Šä¼ ä¸­æ–­ï¼Œéœ€è¦é‡æ–°ä¸Šä¼ ï¼Œç”¨æˆ·ä½“éªŒæå·®ã€‚</li>
<li>ä¸Šä¼ å¤±è´¥ç‡é«˜è¾¾ 30%ï¼Œç”¨æˆ·æŠ•è¯‰â€œè§†é¢‘ä¸Šä¼ æ€»æ˜¯å¤±è´¥â€ï¼Œæ¯å¤© 50+ æ¡æŠ•è¯‰ã€‚</li>
<li>æœåŠ¡å™¨å†…å­˜å ç”¨é«˜ï¼šå¤§æ–‡ä»¶éœ€è¦å…ˆä¸Šä¼ åˆ°æœåŠ¡å™¨å†…å­˜ï¼Œå†å†™å…¥ç£ç›˜ï¼Œå®¹æ˜“å¯¼è‡´ OOMã€‚</li>
<li>æ— æ³•æ–­ç‚¹ç»­ä¼ ï¼šä¸Šä¼ å¤±è´¥åéœ€è¦ä»å¤´å¼€å§‹ï¼Œæµªè´¹å¸¦å®½å’Œæ—¶é—´ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <strong>OSS åˆ†ç‰‡ä¸Šä¼ </strong>ï¼ˆMultipart Uploadï¼‰ï¼Œå°†å¤§æ–‡ä»¶åˆ†æˆå¤šä¸ª 5MB çš„å°å—ï¼Œé€ä¸ªä¸Šä¼ ã€‚</li>
<li>å‰ç«¯å®ç°æ–­ç‚¹ç»­ä¼ ï¼šä¸Šä¼ å¤±è´¥åï¼Œåªé‡æ–°ä¸Šä¼ å¤±è´¥çš„åˆ†ç‰‡ï¼Œä¸éœ€è¦ä»å¤´å¼€å§‹ã€‚</li>
<li>ä¸Šä¼ è¿›åº¦å®æ—¶æ˜¾ç¤ºï¼šç”¨æˆ·å¯ä»¥çœ‹åˆ°ä¸Šä¼ è¿›åº¦ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</li>
<li>æœåŠ¡ç«¯ç›´ä¼ ï¼šå‰ç«¯ç›´æ¥ä¸Šä¼ åˆ° OSSï¼Œä¸ç»è¿‡åº”ç”¨æœåŠ¡å™¨ï¼Œå‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚</li>
</ul>
<p><strong>æ ¸å¿ƒä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// OSS åˆ†ç‰‡ä¸Šä¼ </span>
<span class="hljs-type">InitiateMultipartUploadRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InitiateMultipartUploadRequest</span>(bucketName, objectName);
<span class="hljs-type">InitiateMultipartUploadResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> ossClient.initiateMultipartUpload(request);
<span class="hljs-type">String</span> <span class="hljs-variable">uploadId</span> <span class="hljs-operator">=</span> result.getUploadId();

<span class="hljs-comment">// åˆ†ç‰‡ä¸Šä¼ ï¼ˆæ¯ä¸ªåˆ†ç‰‡5MBï¼‰</span>
List&lt;PartETag&gt; partETags = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; partCount; i++) {
    <span class="hljs-type">UploadPartRequest</span> <span class="hljs-variable">uploadPartRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UploadPartRequest</span>();
    uploadPartRequest.setBucketName(bucketName);
    uploadPartRequest.setKey(objectName);
    uploadPartRequest.setUploadId(uploadId);
    uploadPartRequest.setPartNumber(i + <span class="hljs-number">1</span>);
    uploadPartRequest.setInputStream(partInputStream);
    <span class="hljs-type">UploadPartResult</span> <span class="hljs-variable">uploadPartResult</span> <span class="hljs-operator">=</span> ossClient.uploadPart(uploadPartRequest);
    partETags.add(uploadPartResult.getPartETag());
}

<span class="hljs-comment">// å®Œæˆåˆ†ç‰‡ä¸Šä¼ </span>
<span class="hljs-type">CompleteMultipartUploadRequest</span> <span class="hljs-variable">completeRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompleteMultipartUploadRequest</span>(
    bucketName, objectName, uploadId, partETags);
ossClient.completeMultipartUpload(completeRequest);
</code></pre>
<p><strong>å®é™…æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>ä¸Šä¼ æˆåŠŸç‡ä» 70% æå‡åˆ° 99.9%ï¼Œå¤§æ–‡ä»¶ä¸Šä¼ ä¸å†å¤±è´¥ã€‚</li>
<li>ä¸Šä¼ é€Ÿåº¦æå‡ 2 å€ï¼Œåˆ†ç‰‡å¹¶è¡Œä¸Šä¼ å……åˆ†åˆ©ç”¨å¸¦å®½ã€‚</li>
<li>æœåŠ¡å™¨å†…å­˜å ç”¨ä¸‹é™ 90%ï¼Œä¸å†éœ€è¦ç¼“å­˜å¤§æ–‡ä»¶ã€‚</li>
<li>ç”¨æˆ·ä½“éªŒæ˜¾è‘—æå‡ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œä¸Šä¼ è¿›åº¦å¯è§†åŒ–ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">åœºæ™¯ 4ï¼šå›¾ç‰‡å¤„ç†æ€§èƒ½ç“¶é¢ˆ â€”â€” ä»â€œç¼©ç•¥å›¾ç”Ÿæˆ 5 ç§’â€åˆ°â€œOSS å›¾ç‰‡å¤„ç†å®æ—¶ç”Ÿæˆâ€</h3>
<p><strong>ä¸šåŠ¡èƒŒæ™¯</strong>ï¼šç¤¾äº¤å¹³å°ï¼Œç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡éœ€è¦ç”Ÿæˆå¤šç§å°ºå¯¸çš„ç¼©ç•¥å›¾ï¼ˆåŸå›¾ã€å¤§å›¾ã€ä¸­å›¾ã€å°å›¾ï¼‰ã€‚ä½¿ç”¨æœåŠ¡å™¨ CPU å¤„ç†ï¼Œé«˜å³°æœŸ CPU å ç”¨ 90%ï¼Œå½±å“ä¸šåŠ¡æ€§èƒ½ã€‚</p>
<p><strong>é‡åˆ°çš„é—®é¢˜</strong>ï¼š</p>
<ul>
<li>å›¾ç‰‡å¤„ç†è€—æ—¶ï¼šç”Ÿæˆ 4 ç§å°ºå¯¸çš„ç¼©ç•¥å›¾éœ€è¦ 5 ç§’ï¼Œç”¨æˆ·ç­‰å¾…æ—¶é—´é•¿ã€‚</li>
<li>æœåŠ¡å™¨ CPU å ç”¨é«˜ï¼šé«˜å³°æœŸå›¾ç‰‡å¤„ç†å ç”¨ 90% CPUï¼Œå½±å“å…¶ä»–ä¸šåŠ¡ã€‚</li>
<li>å­˜å‚¨ç©ºé—´æµªè´¹ï¼šéœ€è¦å­˜å‚¨åŸå›¾ + 4 ç§ç¼©ç•¥å›¾ï¼Œå­˜å‚¨ç©ºé—´å¢åŠ  5 å€ã€‚</li>
<li>å¤„ç†å¤±è´¥ç‡é«˜ï¼šæœåŠ¡å™¨è´Ÿè½½é«˜æ—¶ï¼Œå›¾ç‰‡å¤„ç†ç»å¸¸å¤±è´¥ï¼Œéœ€è¦é‡è¯•ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <strong>OSS å›¾ç‰‡å¤„ç†æœåŠ¡</strong>ï¼ˆImage Serviceï¼‰ï¼Œæ”¯æŒå®æ—¶ç”Ÿæˆç¼©ç•¥å›¾ï¼Œæ— éœ€é¢„å…ˆå¤„ç†ã€‚</li>
<li>å­˜å‚¨ç­–ç•¥ï¼šåªå­˜å‚¨åŸå›¾ï¼Œç¼©ç•¥å›¾é€šè¿‡ URL å‚æ•°å®æ—¶ç”Ÿæˆï¼Œå¦‚ image.jpg?x-oss-process=image/resize,w_200ã€‚</li>
<li>å¯ç”¨ OSS å›¾ç‰‡ç¼“å­˜ï¼šç”Ÿæˆçš„ç¼©ç•¥å›¾è‡ªåŠ¨ç¼“å­˜ï¼Œç›¸åŒå°ºå¯¸çš„è¯·æ±‚ç›´æ¥è¿”å›ç¼“å­˜ï¼Œæå‡æ€§èƒ½ã€‚</li>
<li>ç»“åˆ CDNï¼šç¼©ç•¥å›¾è¯·æ±‚èµ° CDNï¼Œè¿›ä¸€æ­¥åŠ é€Ÿè®¿é—®ã€‚</li>
</ul>
<p><strong>æ ¸å¿ƒä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åªå­˜å‚¨åŸå›¾</span>
<span class="hljs-type">String</span> <span class="hljs-variable">originalUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">"https://bucket.oss-cn-hangzhou.aliyuncs.com/images/original.jpg"</span>;

<span class="hljs-comment">// å®æ—¶ç”Ÿæˆä¸åŒå°ºå¯¸çš„ç¼©ç•¥å›¾ï¼ˆæ— éœ€é¢„å¤„ç†ï¼‰</span>
<span class="hljs-type">String</span> <span class="hljs-variable">thumbnailSmall</span> <span class="hljs-operator">=</span> originalUrl + <span class="hljs-string">"?x-oss-process=image/resize,w_200,h_200"</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">thumbnailMedium</span> <span class="hljs-operator">=</span> originalUrl + <span class="hljs-string">"?x-oss-process=image/resize,w_500,h_500"</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">thumbnailLarge</span> <span class="hljs-operator">=</span> originalUrl + <span class="hljs-string">"?x-oss-process=image/resize,w_1000,h_1000"</span>;

<span class="hljs-comment">// å…¶ä»–å›¾ç‰‡å¤„ç†ï¼šè£å‰ªã€æ—‹è½¬ã€æ°´å°ç­‰</span>
<span class="hljs-type">String</span> <span class="hljs-variable">cropped</span> <span class="hljs-operator">=</span> originalUrl + <span class="hljs-string">"?x-oss-process=image/crop,w_300,h_300,x_100,y_100"</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">watermarked</span> <span class="hljs-operator">=</span> originalUrl + <span class="hljs-string">"?x-oss-process=image/watermark,text_SGVsbG8gV29ybGQ"</span>;
</code></pre>
<p><strong>å®é™…æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>å›¾ç‰‡å¤„ç†æ—¶é—´ä» 5 ç§’é™åˆ° 0.1 ç§’ï¼ˆå®æ—¶ç”Ÿæˆï¼‰ï¼Œç”¨æˆ·ä½“éªŒæ˜¾è‘—æå‡ã€‚</li>
<li>æœåŠ¡å™¨ CPU å ç”¨ä» 90% é™åˆ° 20%ï¼Œé‡Šæ”¾èµ„æºç»™å…¶ä»–ä¸šåŠ¡ã€‚</li>
<li>å­˜å‚¨ç©ºé—´èŠ‚çœ 80%ï¼Œåªå­˜å‚¨åŸå›¾ï¼Œç¼©ç•¥å›¾æŒ‰éœ€ç”Ÿæˆã€‚</li>
<li>å›¾ç‰‡å¤„ç†æˆåŠŸç‡ä» 85% æå‡åˆ° 99.9%ï¼Œä¸å†æœ‰å¤„ç†å¤±è´¥çš„é—®é¢˜ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">å››ç±»åœºæ™¯æ€»ç»“</h3>



































<table><thead><tr><th>åœºæ™¯</th><th>æ ¸å¿ƒé—®é¢˜</th><th>å¯¹è±¡å­˜å‚¨æ–¹æ¡ˆä»·å€¼</th><th>æ”¹å–„æ•°æ®</th></tr></thead><tbody><tr><td>å­˜å‚¨å®¹é‡çˆ†ç‚¸</td><td>ç£ç›˜æ»¡ã€æ‰©å®¹å›°éš¾</td><td>OSS æ— é™æ‰©å®¹ã€æŒ‰éœ€ä»˜è´¹</td><td>å®¹é‡æ— é™ã€æˆæœ¬é™ 40%</td></tr><tr><td>å¤šæœåŠ¡å™¨åŒæ­¥</td><td>æ–‡ä»¶æ‰¾ä¸åˆ°ã€åŒæ­¥å›°éš¾</td><td>ç»Ÿä¸€å¯¹è±¡å­˜å‚¨ã€æ— éœ€åŒæ­¥</td><td>è®¿é—®æˆåŠŸç‡ 99.9%</td></tr><tr><td>å¤§æ–‡ä»¶ä¸Šä¼ </td><td>ä¸Šä¼ å¤±è´¥ã€è¶…æ—¶</td><td>åˆ†ç‰‡ä¸Šä¼ ã€æ–­ç‚¹ç»­ä¼ </td><td>ä¸Šä¼ æˆåŠŸç‡ 99.9%</td></tr><tr><td>å›¾ç‰‡å¤„ç†ç“¶é¢ˆ</td><td>å¤„ç†æ…¢ã€CPU å ç”¨é«˜</td><td>OSS å›¾ç‰‡å¤„ç†ã€å®æ—¶ç”Ÿæˆ</td><td>å¤„ç†æ—¶é—´ 5s â†’ 0.1s</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7">å¸¸è§è¿½é—®ç‚¹</h3>
<p><strong>1. MinIO å’Œ OSS æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ</strong></p>
<p><strong>å®æˆ˜ç­”æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>OSSï¼ˆé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨ï¼‰</strong>ï¼šäº‘æœåŠ¡ï¼Œå¼€ç®±å³ç”¨ï¼Œæ— éœ€è¿ç»´ï¼Œæ”¯æŒ CDNã€å›¾ç‰‡å¤„ç†ç­‰é«˜çº§åŠŸèƒ½ï¼ŒæŒ‰é‡ä»˜è´¹ã€‚é€‚åˆå¯¹è¿ç»´è¦æ±‚ä½ã€éœ€è¦é«˜çº§åŠŸèƒ½çš„åœºæ™¯ã€‚</li>
<li><strong>MinIOï¼ˆå¼€æºå¯¹è±¡å­˜å‚¨ï¼‰</strong>ï¼šéœ€è¦è‡ªå·±éƒ¨ç½²å’Œè¿ç»´ï¼Œå®Œå…¨å¯æ§ï¼Œå¯ä»¥éƒ¨ç½²åœ¨ç§æœ‰äº‘æˆ–å†…ç½‘ï¼Œæˆæœ¬å¯æ§ã€‚é€‚åˆå¯¹æ•°æ®å®‰å…¨è¦æ±‚é«˜ã€éœ€è¦ç§æœ‰åŒ–éƒ¨ç½²çš„åœºæ™¯ã€‚</li>
<li><strong>é€‰æ‹©å»ºè®®</strong>ï¼šå¦‚æœé¡¹ç›®åœ¨å…¬æœ‰äº‘ä¸Šï¼Œæ¨è OSSï¼Œè¿ç»´æˆæœ¬ä½ï¼›å¦‚æœé¡¹ç›®åœ¨å†…ç½‘æˆ–ç§æœ‰äº‘ï¼Œæ¨è MinIOï¼Œæ•°æ®æ›´å®‰å…¨ã€‚æˆ‘ä»¬é¡¹ç›®æ˜¯æ··åˆæ–¹æ¡ˆï¼šå…¬ç½‘å›¾ç‰‡ç”¨ OSSï¼Œå†…ç½‘æ–‡ä»¶ç”¨ MinIOã€‚</li>
</ul>
<p><strong>2. å¯¹è±¡å­˜å‚¨å’Œä¼ ç»Ÿæ–‡ä»¶ç³»ç»Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<p><strong>å®æˆ˜ç­”æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>å­˜å‚¨æ–¹å¼</strong>ï¼šä¼ ç»Ÿæ–‡ä»¶ç³»ç»Ÿæ˜¯æ ‘å½¢ç›®å½•ç»“æ„ï¼Œå¯¹è±¡å­˜å‚¨æ˜¯æ‰å¹³åŒ–çš„é”®å€¼å¯¹ç»“æ„ï¼Œé€šè¿‡å”¯ä¸€ Key è®¿é—®ã€‚</li>
<li><strong>æ‰©å±•æ€§</strong>ï¼šä¼ ç»Ÿæ–‡ä»¶ç³»ç»Ÿå—å•æœºå®¹é‡é™åˆ¶ï¼Œå¯¹è±¡å­˜å‚¨æ”¯æŒæ— é™æ‰©å®¹ï¼Œåˆ†å¸ƒå¼å­˜å‚¨ã€‚</li>
<li><strong>è®¿é—®æ–¹å¼</strong>ï¼šä¼ ç»Ÿæ–‡ä»¶ç³»ç»Ÿé€šè¿‡æ–‡ä»¶è·¯å¾„è®¿é—®ï¼Œå¯¹è±¡å­˜å‚¨é€šè¿‡ HTTP/HTTPS URL è®¿é—®ã€‚</li>
<li><strong>æ€§èƒ½</strong>ï¼šä¼ ç»Ÿæ–‡ä»¶ç³»ç»Ÿé€‚åˆå°æ–‡ä»¶é¢‘ç¹è¯»å†™ï¼Œå¯¹è±¡å­˜å‚¨é€‚åˆå¤§æ–‡ä»¶ã€é«˜å¹¶å‘è¯»ã€‚</li>
<li><strong>æˆæœ¬</strong>ï¼šä¼ ç»Ÿæ–‡ä»¶ç³»ç»Ÿéœ€è¦è´­ä¹°æœåŠ¡å™¨å’Œç£ç›˜ï¼Œå¯¹è±¡å­˜å‚¨æŒ‰é‡ä»˜è´¹ï¼Œæˆæœ¬æ›´ä½ã€‚</li>
<li>æˆ‘ä»¬é¡¹ç›®è¿ç§»åˆ°å¯¹è±¡å­˜å‚¨åï¼Œå­˜å‚¨æˆæœ¬é™ä½ 40%ï¼Œè®¿é—®æ€§èƒ½æå‡ 3 å€ã€‚</li>
</ul>
<p><strong>3. å¦‚ä½•ä¿è¯å¯¹è±¡å­˜å‚¨çš„æ•°æ®å®‰å…¨ï¼Ÿ</strong></p>
<p><strong>å®æˆ˜ç­”æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>è®¿é—®æ§åˆ¶</strong>ï¼šä½¿ç”¨ OSS çš„è®¿é—®æ§åˆ¶ç­–ç•¥ï¼ˆBucket Policyï¼‰ï¼Œé™åˆ¶åªæœ‰æˆæƒç”¨æˆ·æ‰èƒ½è®¿é—®ã€‚</li>
<li><strong>ç­¾å URL</strong>ï¼šæ•æ„Ÿæ–‡ä»¶ä½¿ç”¨ä¸´æ—¶ç­¾å URLï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢æ–‡ä»¶è¢«æ¶æ„ä¸‹è½½ã€‚</li>
<li><strong>æ•°æ®åŠ å¯†</strong>ï¼šå¯ç”¨ OSS æœåŠ¡ç«¯åŠ å¯†ï¼ˆSSEï¼‰ï¼Œæ•°æ®è‡ªåŠ¨åŠ å¯†å­˜å‚¨ï¼Œä¿è¯æ•°æ®å®‰å…¨ã€‚</li>
<li><strong>å¤‡ä»½ç­–ç•¥</strong>ï¼šå¯ç”¨ OSS è·¨åŒºåŸŸå¤åˆ¶ï¼Œæ•°æ®è‡ªåŠ¨å¤‡ä»½åˆ°å¤šä¸ªåŒºåŸŸï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚</li>
<li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šå¯ç”¨ OSS ç‰ˆæœ¬æ§åˆ¶ï¼Œæ–‡ä»¶ä¿®æ”¹åä¿ç•™å†å²ç‰ˆæœ¬ï¼Œå¯ä»¥æ¢å¤è¯¯åˆ æ–‡ä»¶ã€‚</li>
<li>æˆ‘ä»¬é¡¹ç›®å¯ç”¨åŠ å¯†å’Œå¤‡ä»½åï¼Œæ•°æ®å®‰å…¨æ€§æå‡ 10 å€ï¼Œä»æœªå‡ºç°æ•°æ®ä¸¢å¤±é—®é¢˜ã€‚</li>
</ul>
<p><strong>ç­¾å URL ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”Ÿæˆä¸´æ—¶ç­¾åURLï¼ˆ1å°æ—¶æœ‰æ•ˆï¼‰</span>
<span class="hljs-type">Date</span> <span class="hljs-variable">expiration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis() + <span class="hljs-number">3600</span> * <span class="hljs-number">1000</span>);
<span class="hljs-type">GeneratePresignedUrlRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GeneratePresignedUrlRequest</span>(
    bucketName, objectName, HttpMethod.GET);
request.setExpiration(expiration);
<span class="hljs-type">URL</span> <span class="hljs-variable">signedUrl</span> <span class="hljs-operator">=</span> ossClient.generatePresignedUrl(request);
<span class="hljs-comment">// è¿”å›ç»™å‰ç«¯ï¼Œ1å°æ—¶åè‡ªåŠ¨å¤±æ•ˆ</span>
</code></pre>
<p><strong>4. å¯¹è±¡å­˜å‚¨çš„æˆæœ¬å¦‚ä½•æ§åˆ¶ï¼Ÿ</strong></p>
<p><strong>å®æˆ˜ç­”æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>å­˜å‚¨ç±»å‹é€‰æ‹©</strong>ï¼šçƒ­æ•°æ®ç”¨æ ‡å‡†å­˜å‚¨ï¼Œå†·æ•°æ®ç”¨ä½é¢‘è®¿é—®å­˜å‚¨æˆ–å½’æ¡£å­˜å‚¨ï¼Œæˆæœ¬é™ä½ 60-80%ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸè§„åˆ™</strong>ï¼šè‡ªåŠ¨å°†æ—§æ–‡ä»¶è½¬å­˜åˆ°ä½é¢‘å­˜å‚¨ï¼Œ30 å¤©å‰çš„æ–‡ä»¶è‡ªåŠ¨è½¬å­˜ï¼Œé™ä½æˆæœ¬ã€‚</li>
<li><strong>CDN åŠ é€Ÿ</strong>ï¼šå¯ç”¨ CDN å‡å°‘å›æºæµé‡ï¼ŒCDN æµé‡æˆæœ¬æ¯” OSS æµé‡æˆæœ¬ä½ 50%ã€‚</li>
<li><strong>åˆ é™¤ç­–ç•¥</strong>ï¼šå®šæœŸæ¸…ç†æ— ç”¨æ–‡ä»¶ï¼Œå¦‚ä¸´æ—¶æ–‡ä»¶ã€è¿‡æœŸæ–‡ä»¶ï¼Œå‡å°‘å­˜å‚¨æˆæœ¬ã€‚</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šè®¾ç½®å­˜å‚¨å®¹é‡å’Œè´¹ç”¨å‘Šè­¦ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸ï¼Œæ§åˆ¶æˆæœ¬ã€‚</li>
<li>æˆ‘ä»¬é¡¹ç›®é€šè¿‡ç”Ÿå‘½å‘¨æœŸè§„åˆ™å’Œå­˜å‚¨ç±»å‹ä¼˜åŒ–ï¼Œå­˜å‚¨æˆæœ¬é™ä½ 40%ï¼Œæ¯æœˆèŠ‚çœ 2 ä¸‡å…ƒã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">é¢è¯•æ—¶æ€ä¹ˆå›ç­”è¿™ä¸ªé—®é¢˜ï¼Ÿ</h3>
<p><strong>å¦‚æœé¢è¯•å®˜é—®â€œä¸ºä»€ä¹ˆè¦ç”¨ MinIO/OSSâ€ï¼Œä½ å¯ä»¥è¿™æ ·ç»„ç»‡ç­”æ¡ˆï¼š</strong></p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šå…ˆè®²èƒŒæ™¯å’Œé—®é¢˜</strong>
â€œæˆ‘åœ¨åš XX é¡¹ç›®ï¼ˆæ¯”å¦‚å†…å®¹ç¤¾åŒº/ç”µå•†å¹³å°ï¼‰æ—¶ï¼Œé‡åˆ°äº†æ–‡ä»¶å­˜å‚¨çš„é—®é¢˜ã€‚å…·ä½“è¡¨ç°æ˜¯ï¼šXXï¼ˆæ¯”å¦‚æœåŠ¡å™¨ç£ç›˜æ»¡äº†/å¤šæœåŠ¡å™¨æ–‡ä»¶åŒæ­¥å›°éš¾/å¤§æ–‡ä»¶ä¸Šä¼ æ€»æ˜¯å¤±è´¥/å›¾ç‰‡å¤„ç†å ç”¨ CPU å¤ªé«˜ï¼‰ã€‚ç”¨æˆ·æŠ•è¯‰ XXï¼ˆæ¯”å¦‚ä¸Šä¼ å¤±è´¥/å›¾ç‰‡åŠ è½½æ…¢ï¼‰ï¼Œä¸šåŠ¡å—åˆ°å¾ˆå¤§å½±å“ã€‚â€</p>
<p><strong>ç¬¬äºŒæ­¥ï¼šè¯´æ˜è§£å†³æ–¹æ¡ˆ</strong>
â€œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è¿ç§»åˆ° XXï¼ˆæ¯”å¦‚é˜¿é‡Œäº‘ OSS/ MinIOï¼‰ã€‚å…·ä½“å®ç°æ˜¯ï¼šXXï¼ˆæ¯”å¦‚ç›´æ¥ä¸Šä¼ åˆ° OSS/ä½¿ç”¨åˆ†ç‰‡ä¸Šä¼ /å¯ç”¨å›¾ç‰‡å¤„ç†æœåŠ¡ï¼‰ã€‚åŒæ—¶è€ƒè™‘äº† XXï¼ˆæ¯”å¦‚æ•°æ®å®‰å…¨/æˆæœ¬æ§åˆ¶/è®¿é—®æ€§èƒ½ï¼‰è¿™äº›æŠ€æœ¯è¦ç‚¹ã€‚â€</p>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šå±•ç¤ºå®é™…æ•ˆæœ</strong>
â€œä¸Šçº¿åæ•ˆæœå¾ˆæ˜æ˜¾ï¼šXXï¼ˆæ¯”å¦‚å­˜å‚¨å®¹é‡æ— é™/ä¸Šä¼ æˆåŠŸç‡ä» 70% æå‡åˆ° 99.9%/å›¾ç‰‡å¤„ç†æ—¶é—´ä» 5 ç§’é™åˆ° 0.1 ç§’/å­˜å‚¨æˆæœ¬é™ä½ 40%ï¼‰ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œç³»ç»Ÿå…·å¤‡äº† XXï¼ˆæ¯”å¦‚æ— é™æ‰©å®¹èƒ½åŠ›/é«˜å¯ç”¨æ€§/é«˜æ€§èƒ½è®¿é—®ï¼‰ï¼Œä¸ºåç»­ä¸šåŠ¡å¢é•¿æ‰“ä¸‹äº†åŸºç¡€ã€‚â€</p>
<p><strong>æ ¸å¿ƒè¦ç‚¹ï¼šé¢è¯•å®˜è¦çš„ä¸æ˜¯â€œä½ çŸ¥é“ OSS èƒ½å­˜æ–‡ä»¶â€ï¼Œè€Œæ˜¯â€œä½ èƒ½æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„å­˜å‚¨æ–¹æ¡ˆï¼Œè¿˜æ‡‚æ•°æ®å®‰å…¨ã€æˆæœ¬æ§åˆ¶ã€æ€§èƒ½ä¼˜åŒ–è¿™äº›å·¥ç¨‹å®è·µâ€ã€‚</strong></p>
<hr/>
<h3 data-id="heading-9">å¯è§†åŒ–æ’å›¾</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e03cb28dafff40de90b0b219e1703c60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeXVueGlfMDU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763888698&amp;x-signature=hUEYIig2afrTj1yzPkoQGQGdrws%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<p><strong>æç¤º</strong>ï¼šæœ¬æ–‡è®²çš„æ˜¯å¯¹è±¡å­˜å‚¨çš„åŸºç¡€åº”ç”¨ã€‚å¦‚æœä½ çš„é¡¹ç›®éœ€è¦å¤„ç†æµ·é‡æ–‡ä»¶ã€å®æ—¶æµåª’ä½“ã€å¤§æ•°æ®åˆ†æç­‰åœºæ™¯ï¼Œå°±éœ€è¦è€ƒè™‘å¯¹è±¡å­˜å‚¨çš„é«˜çº§åŠŸèƒ½ï¼ˆå¦‚äº‹ä»¶é€šçŸ¥ã€æ•°æ®æ¹–ã€æ™ºèƒ½åˆ†å±‚ç­‰ï¼‰ï¼Œè¿™æ˜¯é¢è¯•å¦ä¸€é«˜é¢‘è€ƒç‚¹ï¼Œåé¢å•ç‹¬æ‹†è§£ã€‚</p>
<p><strong>ä½ é¡¹ç›®é‡Œç”¨å¯¹è±¡å­˜å‚¨è§£å†³è¿‡ä»€ä¹ˆå­˜å‚¨é—®é¢˜ï¼Ÿè¯„è®ºåŒºèŠèŠï¼Œä¸‹æ¬¡é¢è¯•ç›´æ¥ç”¨ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å“åº”å¼é¡µé¢è®¾è®¡ä¸å®ç°ï¼šè®©ç½‘ç«™é€‚é…æ‰€æœ‰è®¾å¤‡çš„è‰ºæœ¯]]></title>    <link>https://juejin.cn/post/7572525491538919466</link>    <guid>https://juejin.cn/post/7572525491538919466</guid>    <pubDate>2025-11-16T08:18:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572525491538919466" data-draft-id="7572481101711114294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å“åº”å¼é¡µé¢è®¾è®¡ä¸å®ç°ï¼šè®©ç½‘ç«™é€‚é…æ‰€æœ‰è®¾å¤‡çš„è‰ºæœ¯"/> <meta itemprop="keywords" content="å‰ç«¯,HTML"/> <meta itemprop="datePublished" content="2025-11-16T08:18:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å“åº”å¼é¡µé¢è®¾è®¡ä¸å®ç°ï¼šè®©ç½‘ç«™é€‚é…æ‰€æœ‰è®¾å¤‡çš„è‰ºæœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T08:18:36.000Z" title="Sun Nov 16 2025 08:18:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨äº’è”ç½‘é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„è®¾å¤‡ç§ç±»å‰æ‰€æœªæœ‰åœ°ä¸°å¯Œâ€”â€”ä»4è‹±å¯¸çš„æ™ºèƒ½æ‰‹æœºåˆ°30è‹±å¯¸çš„æ¡Œé¢æ˜¾ç¤ºå™¨ï¼Œä»å¹³æ¿ç”µè„‘åˆ°æ™ºèƒ½ç”µè§†ã€‚é¢å¯¹å¦‚æ­¤å¤šæ ·åŒ–çš„å±å¹•å°ºå¯¸ï¼Œå¦‚ä½•ç¡®ä¿ç”¨æˆ·åœ¨ä»»ä½•è®¾å¤‡ä¸Šéƒ½èƒ½è·å¾—ä¼˜ç§€çš„æµè§ˆä½“éªŒï¼Ÿå“åº”å¼ç½‘é¡µè®¾è®¡ï¼ˆResponsive Web Designï¼‰æ­£æ˜¯è§£å†³è¿™ä¸€æŒ‘æˆ˜çš„æœ€ä½³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-0">å“åº”å¼è®¾è®¡</h2>
<p>å“åº”å¼ç½‘é¡µè®¾è®¡æ˜¯ä¸€ç§ç½‘é¡µå¼€å‘æ–¹æ³•ï¼Œå®ƒä½¿ç½‘ç«™èƒ½å¤Ÿ"å“åº”"ä¸åŒè®¾å¤‡çš„å±å¹•å°ºå¯¸ã€å¹³å°å’Œæ–¹å‘ï¼Œè‡ªåŠ¨è°ƒæ•´å¸ƒå±€å’Œå†…å®¹å‘ˆç°æ–¹å¼ã€‚ç®€å•æ¥è¯´ï¼Œå“åº”å¼è®¾è®¡å°±åƒæ°´ä¸€æ ·ï¼Œèƒ½å¤Ÿå¡«å……ä»»ä½•å®¹å™¨â€”â€”æ— è®ºè¿™ä¸ªå®¹å™¨æ˜¯æ‰‹æœºå±å¹•è¿˜æ˜¯æ¡Œé¢æ˜¾ç¤ºå™¨ã€‚</p>
<h2 data-id="heading-1">å“åº”å¼è®¾è®¡çš„ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯æ”¯æŸ±ï¼š</h2>
<ul>
<li>æµä½“ç½‘æ ¼ï¼ˆFluid Gridsï¼‰</li>
<li>å¼¹æ€§å›¾ç‰‡ï¼ˆFlexible Imagesï¼‰</li>
<li>åª’ä½“æŸ¥è¯¢ï¼ˆMedia Queriesï¼‰</li>
</ul>
<h2 data-id="heading-2">å®ç°å“åº”å¼é¡µé¢çš„å…³é”®æŠ€æœ¯</h2>
<h3 data-id="heading-3">1. è§†å£è®¾ç½®ï¼ˆViewportï¼‰</h3>
<p>åœ¨HTMLçš„<code>&lt;head&gt;</code>éƒ¨åˆ†æ·»åŠ è§†å£å…ƒæ ‡ç­¾æ˜¯å“åº”å¼è®¾è®¡çš„é¦–è¦æ­¥éª¤ï¼š</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ªæ ‡ç­¾å‘Šè¯‰æµè§ˆå™¨æŒ‰ç…§è®¾å¤‡çš„å®½åº¦æ¥æ¸²æŸ“é¡µé¢ï¼Œå¹¶é˜²æ­¢ç”¨æˆ·ç¼©æ”¾ã€‚</p>
<h3 data-id="heading-4">2. åª’ä½“æŸ¥è¯¢ï¼ˆMedia Queriesï¼‰</h3>
<p>åª’ä½“æŸ¥è¯¢æ˜¯å“åº”å¼è®¾è®¡çš„æ ¸å¿ƒï¼Œå…è®¸æ ¹æ®è®¾å¤‡ç‰¹æ€§åº”ç”¨ä¸åŒçš„CSSæ ·å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç§»åŠ¨è®¾å¤‡ä¼˜å…ˆçš„åŸºç¡€æ ·å¼ */</span>
<span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
}

<span class="hljs-comment">/* å¹³æ¿è®¾å¤‡ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">750px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
  }
}

<span class="hljs-comment">/* æ¡Œé¢è®¾å¤‡ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">992px</span>) {
  <span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">970px</span>;
  }
}

<span class="hljs-comment">/* å¤§å±å¹•è®¾å¤‡ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">1200px</span>) {
  <span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">1170px</span>;
  }
}
</code></pre>
<h3 data-id="heading-5">3. æµä½“ç½‘æ ¼å¸ƒå±€ï¼ˆFluid Gridï¼‰</h3>
<p>ä½¿ç”¨ç™¾åˆ†æ¯”è€Œéå›ºå®šå•ä½åˆ›å»ºæµåŠ¨çš„ç½‘æ ¼ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.grid-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">1200px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
}

<span class="hljs-selector-class">.col-1</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">8.33%</span>; }
<span class="hljs-selector-class">.col-2</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">16.66%</span>; }
<span class="hljs-selector-class">.col-3</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">25%</span>; }
<span class="hljs-selector-class">.col-4</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">33.33%</span>; }
<span class="hljs-selector-class">.col-5</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">41.66%</span>; }
<span class="hljs-selector-class">.col-6</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>; }
<span class="hljs-selector-class">.col-7</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">58.33%</span>; }
<span class="hljs-selector-class">.col-8</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">66.66%</span>; }
<span class="hljs-selector-class">.col-9</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">75%</span>; }
<span class="hljs-selector-class">.col-10</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">83.33%</span>; }
<span class="hljs-selector-class">.col-11</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">91.66%</span>; }
<span class="hljs-selector-class">.col-12</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>; }

<span class="hljs-comment">/* æ‰€æœ‰åˆ—éƒ½æµ®åŠ¨å¹¶è®¾ç½®ç›’æ¨¡å‹ */</span>
<span class="hljs-selector-attr">[class*=<span class="hljs-string">"col-"</span>]</span> {
  <span class="hljs-attribute">float</span>: left;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-comment">/* æ¸…é™¤æµ®åŠ¨ */</span>
<span class="hljs-selector-class">.row</span><span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;
  <span class="hljs-attribute">clear</span>: both;
  <span class="hljs-attribute">display</span>: table;
}
</code></pre>
<h3 data-id="heading-6">4. å¼¹æ€§å›¾ç‰‡å’Œåª’ä½“</h3>
<p>ç¡®ä¿å›¾ç‰‡å’Œå…¶ä»–åª’ä½“å…ƒç´ èƒ½å¤Ÿè‡ªé€‚åº”å®¹å™¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">img</span>, <span class="hljs-selector-tag">video</span>, embed, <span class="hljs-selector-tag">object</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: auto;
}
</code></pre>
<h2 data-id="heading-7">å®Œæ•´å“åº”å¼é¡µé¢ç¤ºä¾‹</h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å“åº”å¼è®¾è®¡ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-comment">/* åŸºç¡€é‡ç½®æ ·å¼ */</span>
        * {
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">box-sizing</span>: border-box;
        }
        
        <span class="hljs-selector-tag">body</span> {
            <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Arial'</span>, sans-serif;
            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f4f4f4</span>;
        }
        
        <span class="hljs-selector-tag">a</span> {
            <span class="hljs-attribute">text-decoration</span>: none;
            <span class="hljs-attribute">color</span>: inherit;
        }
        
        <span class="hljs-comment">/* ç§»åŠ¨ä¼˜å…ˆçš„æ ·å¼ */</span>
        <span class="hljs-selector-class">.container</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">15px</span>;
        }
        
        <span class="hljs-comment">/* å“åº”å¼å¯¼èˆª */</span>
        <span class="hljs-selector-class">.navbar</span> {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2c3e50</span>;
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span> <span class="hljs-number">0</span>;
        }
        
        <span class="hljs-selector-class">.navbar</span> <span class="hljs-selector-class">.container</span> {
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">justify-content</span>: space-between;
            <span class="hljs-attribute">align-items</span>: center;
        }
        
        <span class="hljs-selector-class">.logo</span> {
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;
            <span class="hljs-attribute">font-weight</span>: bold;
        }
        
        <span class="hljs-selector-class">.nav-links</span> {
            <span class="hljs-attribute">display</span>: none;
            <span class="hljs-attribute">list-style</span>: none;
        }
        
        <span class="hljs-selector-class">.nav-links</span> <span class="hljs-selector-tag">li</span> {
            <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">20px</span>;
        }
        
        <span class="hljs-selector-class">.nav-links</span> <span class="hljs-selector-tag">a</span> {
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">transition</span>: color <span class="hljs-number">0.3s</span>;
        }
        
        <span class="hljs-selector-class">.nav-links</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#3498db</span>;
        }
        
        <span class="hljs-selector-class">.menu-toggle</span> {
            <span class="hljs-attribute">display</span>: block;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;
            <span class="hljs-attribute">cursor</span>: pointer;
        }
        
        <span class="hljs-comment">/* å“åº”å¼ç½‘æ ¼ç³»ç»Ÿ */</span>
        <span class="hljs-selector-class">.grid</span> {
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">flex-wrap</span>: wrap;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> -<span class="hljs-number">15px</span>;
        }
        
        <span class="hljs-selector-class">.col</span> {
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        }
        
        <span class="hljs-comment">/* å¡ç‰‡ç»„ä»¶ */</span>
        <span class="hljs-selector-class">.card</span> {
            <span class="hljs-attribute">background</span>: white;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">5px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);
            <span class="hljs-attribute">overflow</span>: hidden;
            <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.3s</span>, box-shadow <span class="hljs-number">0.3s</span>;
        }
        
        <span class="hljs-selector-class">.card</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">5px</span>);
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span> <span class="hljs-number">15px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);
        }
        
        <span class="hljs-selector-class">.card-img</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
            <span class="hljs-attribute">object-fit</span>: cover;
        }
        
        <span class="hljs-selector-class">.card-content</span> {
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
        }
        
        <span class="hljs-selector-class">.card-title</span> {
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.25rem</span>;
        }
        
        <span class="hljs-comment">/* é¡µè„š */</span>
        <span class="hljs-selector-class">.footer</span> {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#34495e</span>;
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">30px</span> <span class="hljs-number">0</span>;
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;
        }
        
        <span class="hljs-comment">/* å¹³æ¿è®¾å¤‡æ ·å¼ */</span>
        <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) {
            <span class="hljs-selector-class">.container</span> {
                <span class="hljs-attribute">width</span>: <span class="hljs-number">750px</span>;
                <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
            }
            
            <span class="hljs-selector-class">.menu-toggle</span> {
                <span class="hljs-attribute">display</span>: none;
            }
            
            <span class="hljs-selector-class">.nav-links</span> {
                <span class="hljs-attribute">display</span>: flex;
            }
            
            <span class="hljs-selector-class">.col</span> {
                <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;
            }
        }
        
        <span class="hljs-comment">/* æ¡Œé¢è®¾å¤‡æ ·å¼ */</span>
        <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">992px</span>) {
            <span class="hljs-selector-class">.container</span> {
                <span class="hljs-attribute">width</span>: <span class="hljs-number">970px</span>;
            }
            
            <span class="hljs-selector-class">.col</span> {
                <span class="hljs-attribute">width</span>: <span class="hljs-number">33.333%</span>;
            }
        }
        
        <span class="hljs-comment">/* å¤§å±å¹•è®¾å¤‡æ ·å¼ */</span>
        <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">1200px</span>) {
            <span class="hljs-selector-class">.container</span> {
                <span class="hljs-attribute">width</span>: <span class="hljs-number">1170px</span>;
            }
            
            <span class="hljs-selector-class">.col</span> {
                <span class="hljs-attribute">width</span>: <span class="hljs-number">25%</span>;
            }
        }
        
        <span class="hljs-comment">/* æ‰“å°æ ·å¼ */</span>
        <span class="hljs-keyword">@media</span> print {
            <span class="hljs-selector-class">.navbar</span>, <span class="hljs-selector-class">.footer</span>, <span class="hljs-selector-class">.menu-toggle</span> {
                <span class="hljs-attribute">display</span>: none;
            }
            
            <span class="hljs-selector-tag">body</span> {
                <span class="hljs-attribute">background</span>: white;
                <span class="hljs-attribute">color</span>: black;
                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12pt</span>;
            }
            
            <span class="hljs-selector-class">.card</span> {
                <span class="hljs-attribute">box-shadow</span>: none;
                <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
            }
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¯¼èˆªæ  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"logo"</span>&gt;</span>å“åº”å¼ç½‘ç«™<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-links"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>å…³äºæˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>äº§å“<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>è”ç³»æˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu-toggle"</span>&gt;</span>â˜°<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¸»è¦å†…å®¹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin: 20px 0; text-align: center;"</span>&gt;</span>å“åº”å¼è®¾è®¡æ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grid"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- å¡ç‰‡1 --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://via.placeholder.com/400x200"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç¤ºä¾‹å›¾ç‰‡"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-img"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>å“åº”å¼å¸ƒå±€<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä½¿ç”¨æµä½“ç½‘æ ¼å’Œåª’ä½“æŸ¥è¯¢åˆ›å»ºé€‚åº”ä¸åŒå±å¹•çš„å¸ƒå±€ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            
            <span class="hljs-comment">&lt;!-- å¡ç‰‡2 --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://via.placeholder.com/400x200"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç¤ºä¾‹å›¾ç‰‡"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-img"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>å¼¹æ€§å›¾ç‰‡<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç¡®ä¿å›¾ç‰‡åœ¨ä¸åŒè®¾å¤‡ä¸Šéƒ½èƒ½æ­£ç¡®ç¼©æ”¾ï¼Œä¿æŒæ¯”ä¾‹ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            
            <span class="hljs-comment">&lt;!-- å¡ç‰‡3 --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://via.placeholder.com/400x200"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç¤ºä¾‹å›¾ç‰‡"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-img"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>ç§»åŠ¨ä¼˜å…ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä»ç§»åŠ¨è®¾å¤‡å¼€å§‹è®¾è®¡ï¼Œç„¶åé€æ­¥å¢å¼ºæ›´å¤§å±å¹•çš„ä½“éªŒã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            
            <span class="hljs-comment">&lt;!-- å¡ç‰‡4 --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://via.placeholder.com/400x200"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç¤ºä¾‹å›¾ç‰‡"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-img"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>æ€§èƒ½ä¼˜åŒ–<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç¡®ä¿å“åº”å¼ç½‘ç«™åœ¨æ‰€æœ‰è®¾å¤‡ä¸Šéƒ½èƒ½å¿«é€ŸåŠ è½½å’Œè¿è¡Œã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- é¡µè„š --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"footer"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-symbol">&amp;copy;</span> 2023 å“åº”å¼ç½‘ç«™ç¤ºä¾‹. ç‰ˆæƒæ‰€æœ‰.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// ç®€å•çš„ç§»åŠ¨èœå•åˆ‡æ¢</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.menu-toggle'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">const</span> navLinks = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.nav-links'</span>);
            <span class="hljs-keyword">if</span> (navLinks.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> === <span class="hljs-string">'flex'</span>) {
                navLinks.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
            } <span class="hljs-keyword">else</span> {
                navLinks.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'flex'</span>;
                navLinks.<span class="hljs-property">style</span>.<span class="hljs-property">flexDirection</span> = <span class="hljs-string">'column'</span>;
                navLinks.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'absolute'</span>;
                navLinks.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">'60px'</span>;
                navLinks.<span class="hljs-property">style</span>.<span class="hljs-property">right</span> = <span class="hljs-string">'15px'</span>;
                navLinks.<span class="hljs-property">style</span>.<span class="hljs-property">background</span> = <span class="hljs-string">'#2c3e50'</span>;
                navLinks.<span class="hljs-property">style</span>.<span class="hljs-property">padding</span> = <span class="hljs-string">'15px'</span>;
                navLinks.<span class="hljs-property">style</span>.<span class="hljs-property">borderRadius</span> = <span class="hljs-string">'5px'</span>;
            }
        });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p><strong><code>è§†å£è®¾ç½®</code></strong>Â +Â <strong><code>åª’ä½“æŸ¥è¯¢</code></strong>Â +Â <strong><code>æµä½“ç½‘æ ¼</code></strong>Â =Â <strong>ä¸€ä¸ªå¯å·¥ä½œçš„å“åº”å¼é¡µé¢</strong>ã€‚</p>
<ol>
<li><strong>è§†å£è®¾ç½®</strong><br/>
è¿™æ˜¯å“åº”å¼çš„<strong>ç»å¯¹å‰æ</strong>ã€‚æ²¡æœ‰è¿™è¡Œä»£ç ï¼Œåª’ä½“æŸ¥è¯¢å’Œæ‰€æœ‰å“åº”å¼å¸ƒå±€åœ¨ç§»åŠ¨ç«¯éƒ½ä¼šå¤±æ•ˆã€‚å®ƒå°±åƒæ‰“å¼€å“åº”å¼å¤§é—¨çš„<strong>å”¯ä¸€é’¥åŒ™</strong>ã€‚</li>
<li><strong>åª’ä½“æŸ¥è¯¢</strong><br/>
è¿™æ˜¯å®ç°å“åº”å¼è®¾è®¡çš„<strong>æ ¸å¿ƒæœºåˆ¶</strong>ã€‚å®ƒæ˜¯è®©CSSèƒ½å¤Ÿâ€œæ™ºèƒ½åœ°â€æ„ŸçŸ¥å±å¹•å°ºå¯¸å¹¶åº”ç”¨ä¸åŒæ ·å¼çš„<strong>å”¯ä¸€æ‰‹æ®µ</strong>ï¼Œæ˜¯æ‰€æœ‰å¸ƒå±€å˜åŒ–çš„æ§åˆ¶ä¸­å¿ƒã€‚</li>
<li><strong>æµä½“ç½‘æ ¼</strong><br/>
è¿™æ˜¯å“åº”å¼å¸ƒå±€çš„<strong>å®ç°åŸºç¡€</strong>ã€‚å®ƒå†³å®šäº†é¡µé¢å…ƒç´ èƒ½å¦åƒæ°´ä¸€æ ·æµç•…åœ°é€‚åº”å®¹å™¨ï¼Œæ˜¯ä»â€œå›ºå®šâ€æ€ç»´è½¬å‘â€œå“åº”â€æ€ç»´çš„<strong>æ ¹æœ¬æ€§å˜é©</strong>ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[redditå‰å‰¯æ€»è£Yishançš„AIåº”ç”¨å±‚è§‚ç‚¹]]></title>    <link>https://juejin.cn/post/7572534419880443939</link>    <guid>https://juejin.cn/post/7572534419880443939</guid>    <pubDate>2025-11-16T09:28:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572534419880443939" data-draft-id="7572534419880394787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="redditå‰å‰¯æ€»è£Yishançš„AIåº”ç”¨å±‚è§‚ç‚¹"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-16T09:28:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            redditå‰å‰¯æ€»è£Yishançš„AIåº”ç”¨å±‚è§‚ç‚¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T09:28:03.000Z" title="Sun Nov 16 2025 09:28:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fyishan%2Fstatus%2F1987787127204249824" target="_blank" title="https://x.com/yishan/status/1987787127204249824" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<blockquote>
<p>ä»–çš„è§‚ç‚¹åŸºæœ¬éƒ½è®¤åŒï¼Œå½’çº³ä¸€ä¸‹ä¸»è¦æ˜¯å‡ ä¸ªï¼š</p>
</blockquote>
<ol>
<li>è¿™æ³¢å¤§æ¨¡å‹æµªæ½®é‡Œå·¨å¤´æœ¬èº«å°±æ˜¯é«˜å¢é€Ÿã€è¶…é«˜æŠ•å…¥çš„â€œå·¨æ— éœ¸åˆåˆ›â€</li>
<li>åº”ç”¨åŠŸèƒ½ä¼šè¢«å¿«é€Ÿå¸è¿›å¤§æ¨¡å‹äº§å“çº¿ã€‚â€”â€”è¿™åœ¨chatgptå’Œanthropicçš„å‘å±•é‡Œå·²ç»åå¤éªŒè¯äº†ã€‚chatgptæ€»æ˜¯æŠŠæœ€æ™®é€‚çš„åŠŸèƒ½èåˆè¿›æ¥ï¼Œæ‰€è°“çš„â€œåƒåº”ç”¨ã€åƒç¤¾åŒºâ€ï¼›è€ŒanthropicæŒç»­çš„åœ¨æå‡ºå„ç§ç†å¿µå…ˆè¿›çš„æ–°æ ‡å‡†ã€æ–°å®è·µï¼Œå°†åº”ç”¨å±‚çš„â€œè¡¥ä¸â€ç¬é—´å‡»ç¢</li>
<li>åŸºç¡€å±‚å˜åŒ–å¤ªå¿«ï¼Œåº”ç”¨æ ¹æœ¬æ¥ä¸åŠæ²‰æ·€å‡ºä¸€ä¸ªâ€œå…¬å¸â€ã€‚ä»å½“å‰å¸‚å€¼æœ€é«˜çš„å¤§æ¨¡å‹åº”ç”¨å…¬å¸ï¼ˆ~300äº¿ï¼‰cursorèº«ä¸Šæœ‰è¿™ä¹ˆå¤šéšå¿§ï¼Œå°±èƒ½ä¸€è§ç«¯å€ªã€‚</li>
</ol>
<p>æ‰€ä»¥å¾—ä»–å»ºè®®æ˜¯ï¼Œåº”ç”¨åªæœ‰è¿™å‡ æ¡å‡ºè·¯ï¼š</p>
<ol>
<li>èµšä¸€æ³¢å—é’±ã€‚â€”â€”æˆ‘ç†è§£ç°åœ¨å¾ˆå¤šåšç°æœ‰æµç¨‹ææ•ˆçš„ï¼Œç‰¹åˆ«æ˜¯2Bçš„ã€forç”µå•†ï¼Œæ‰“çš„å°±æ˜¯è¿™ä¸ªå¿ƒæ€ã€‚ä»–ä»¬å¾ˆæ¸…æ¥šè‡ªå·±æ²¡æœ‰é•¿æœŸçš„æŠ¤åŸæ²³ï¼Œä¿æŒæ­£å‘ç°é‡‘æµï¼Œç§¯ç´¯è®¤çŸ¥ã€åŸ¹å…»å›¢é˜Ÿï¼Œç­‰ä¸‹ä¸€ä¸ªèŒƒå¼ã€‚</li>
<li>è¢«å¤§å…¬å¸æ”¶è´­ã€‚â€”â€”ä½ å¯ä»¥è¯´windsurfè€æ¿è„ï¼Œä½†ä½ ä¸èƒ½è¯´ä»–è®¤çŸ¥ä½ã€‚</li>
<li>æ‰¾å‚ç›´ã€ä¸“ä¸šåœºæ™¯ï¼Œæ‰¾â€œçœŸå®ä¸–ç•Œæ•°æ®æŠ¤åŸæ²³â€ï¼ˆç¡¬ä»¶ã€æ•°æ®å­¤å²›ï¼‰</li>
</ol>
<p>ä½ æ€ä¹ˆçœ‹ï¼Ÿ</p>
<h2 data-id="heading-0">åŸæ–‡</h2>
<hr/>
<p>æˆ‘çš„AIæŠ•èµ„æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼Œæ¯ä¸€å®¶AIåº”ç”¨åˆåˆ›å…¬å¸éƒ½å¯èƒ½è¢«åŸºç¡€æ¨¡å‹æä¾›å•†çš„å¿«é€Ÿæ‰©å¼ æ‰€ç¢¾å‹ã€‚</p>
<p>åº”ç”¨åŠŸèƒ½å°†è¢«æ·»åŠ åˆ°åŸºç¡€æ¨¡å‹çš„äº§å“ä¸­ï¼Œå› ä¸ºå¤§å…¬å¸å¹¶ä¸åƒä¼ ç»Ÿæ„ä¹‰ä¸Šçš„"ååº”è¿Ÿé’çš„è€ç‰Œä¼ä¸š"ï¼ˆåœ¨è¿™é‡Œå¥—ç”¨"å¿«é€Ÿåˆåˆ›å…¬å¸ï¼Œè¿Ÿç¼“è€ç‰Œä¼ä¸š"çš„ç±»æ¯”æ˜¯é”™è¯¯çš„ï¼‰ï¼Œå®ƒä»¬åªæ˜¯è§„æ¨¡åºå¤§ã€‚ä¸ä»»ä½•å…¶ä»–å…ˆå‰çš„æ–°æŠ€æœ¯ç›¸æ¯”ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¨å¤§ä¸”å¿«é€Ÿå˜åŒ–çš„æµªæ½®ï¼Œå‡ ä¹æ¯ä¸ªæ–°åº”ç”¨éƒ½èƒ½åœ¨å‘æ˜çš„åŒæ—¶è¢«æ·˜æ±°ã€‚å‡ ä¹æ²¡æœ‰æ—¶é—´æ¥å»ºç«‹å…¬å¸å¹¶å°†å…¶è§„æ¨¡åŒ–ã€‚</p>
<p>AIåº”ç”¨åˆåˆ›å…¬å¸åˆ›å§‹äººæœ‰ä¸¤ç§èµšé’±æ–¹å¼ï¼š</p>
<ul>
<li>åˆ¶ä½œä¸€ä¸ªæ˜™èŠ±ä¸€ç°çš„åº”ç”¨ï¼Œèµšå–å¤§é‡ç°é‡‘å¹¶å­˜å…¥é“¶è¡Œï¼ˆæˆ‘çš„ä¼°è®¡æ˜¯æ‚¨å¤§çº¦æœ‰12-18ä¸ªæœˆçš„ç°é‡‘æµç”Ÿæˆæ—¶é—´ï¼‰</li>
<li>åˆ¶ä½œä¸€ä¸ªè¶³å¤Ÿå¥½çš„åº”ç”¨ï¼Œè¢«å¤§å…¬å¸ä»¥è¶³å¤Ÿçš„è‚¡æƒæ”¶è´­</li>
</ul>
<p>è¿™ç§æƒ…å†µæä¸ç¨³å®šâ€”â€”æˆ‘ä»¬ä¸çŸ¥é“å®ƒä¼šå´©ç›˜è¿˜æ˜¯ä¼šæš´æ¶¨ï¼Œä½†è¿™ä¸¤ç§æƒ…å†µéƒ½ä½¿å¾—ä»»ä½•AIåº”ç”¨åˆåˆ›å…¬å¸ä¸å¤ªå¯èƒ½ç‹¬ç«‹æˆä¸ºä¸€ä»£è¶…çº§å…¬å¸ï¼ˆåŸºç¡€æ¦‚ç‡æœ¬æ¥å°±å¾ˆä½ï¼‰ã€‚</p>
<p>æœ€å¥½çš„æœºä¼šæ˜¯åœ¨é«˜åº¦ä¸“ä¸šåŒ–çš„é¢†åŸŸæ‰¾åˆ°åº”ç”¨ç»†åˆ†å¸‚åœºï¼Œè¿™äº›é¢†åŸŸæ‹¥æœ‰æå…¶ç‹¬ç‰¹å’Œå…·ä½“çš„æ•°æ®å£å’ï¼Œæœ€å¥½æ˜¯æ¶‰åŠçœŸå®åŸå­ï¼ˆç¡¬ä»¶æˆ–ç°å®ä¸–ç•Œç›¸å…³ï¼‰æ•°æ®ï¼Œè€Œä¸æ˜¯è½¯ä»¶/é‡‘èæ•°æ®ã€‚</p>
<hr/>
<p><strong>è¡¥å……è¯´æ˜ï¼š</strong></p>
<p>è¿™ä¸ªthreadå¼•èµ·äº†å¾ˆå¤§åå“ï¼Œæ‰€ä»¥æˆ‘æä¾›ä¸€äº›é¢å¤–çš„è·Ÿè¿›è¯´æ˜ï¼š</p>
<p>è¿™å¹¶ä¸æ˜¯ä½ å…¸å‹çš„"è€ç‰Œä¼ä¸šå¾ˆæ•æ·"çš„é¢„æµ‹ï¼Œä¹Ÿä¸æ˜¯è€å¥—çš„"å¦‚æœè°·æ­Œå¤åˆ¶ä½ çš„åˆåˆ›å…¬å¸æ€ä¹ˆåŠ"è¿™ç§ä¸­ç­‰æ°´å¹³æŠ•èµ„è€…çš„é—®é¢˜ã€‚</p>
<p>è¿™ä¸ªæ ¸å¿ƒè§‚ç‚¹çš„å…¨æ–°ä¹‹å¤„åœ¨äºï¼Œä¸è¿‡å»ä¸åŒï¼ŒAIè¡Œä¸šçš„ç‰¹å®šè¦ç´ å¾ˆå¯èƒ½ä½¿å¾—åº”ç”¨å…¬å¸æ— æ³•è·Ÿä¸Šè¢«æ·˜æ±°çš„æµªæ½®ï¼Œè¿™ä¸ªæµªæ½®å°†æ¯”ä»¥å‰çš„æŠ€æœ¯æµªæ½®å¿«å¾—å¤šï¼Œå¿«å¾—å¤šã€‚</p>
<p>åŸºç¡€æŠ€æœ¯æ ¹æœ¬æ²¡æœ‰ä»¥ä»»ä½•æ–¹å¼ç¨³å®šä¸‹æ¥ï¼Œåº”ç”¨éœ€è¦ä¸€ä¸ªè¶³å¤Ÿç¨³å®šçš„åŸºç¡€å¹³å°åœ¨ç›¸å½“é•¿çš„æ—¶é—´å†…æ¥åˆ›é€ ä»·å€¼ï¼Œç„¶åå»ºç«‹ä¸€ä¸ªç³»ç»Ÿæ¥è´§å¸åŒ–é‚£ä¸ªä»·å€¼ï¼ˆå³"ä¸€ä¸ªä¸šåŠ¡"ï¼‰ã€‚åŸºç¡€æ€§è´¨çš„æ ¹æœ¬æ€§å˜åŒ–ç‡æ˜¯ä¸ºä»€ä¹ˆæˆ‘è®¤ä¸ºå‡ ä¹æ‰€æœ‰åº”ç”¨åˆåˆ›å…¬å¸éƒ½æ— æ³•å­˜æ´»åˆ°å®ç°ä»»ä½•è§„æ¨¡åŒ–ï¼Œè€Œä¸æ˜¯å› ä¸ºå½“å‰çš„å¤§ç©å®¶æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ã€‚</p>
<p>å¤§å¤šæ•°å…¬å¸éƒ½æ— æ³•åœ¨å•†ä¸šæŠ€æœ¯ç¯å¢ƒçš„é‡å¤§å˜é©ä¸­å¹¸å­˜ä¸‹æ¥ã€‚ä½†è¿™äº›é‡å¤§å˜é©å‘ç”Ÿå¾—è¶³å¤Ÿç¼“æ…¢ï¼Œä»¥è‡³äºäººä»¬å¯ä»¥åœ¨ä¹‹é—´å»ºç«‹ä¸šåŠ¡ã€‚PCã€æ¡Œé¢äº’è”ç½‘ã€ç§»åŠ¨äº’è”ç½‘ç­‰éƒ½èŠ±äº†å¤šå¹´æ—¶é—´å‘å±•ï¼Œå¹¶ä¸”é—´éš”è¶³å¤Ÿé•¿ï¼Œè®©åº”ç”¨å…¬å¸èƒ½å¤Ÿæˆé•¿ã€æˆç†Ÿï¼Œå¹¶è‡ªå·±æˆä¸ºè€ç‰Œä¼ä¸šã€‚ä½œä¸ºåŸºå‡†ï¼Œå¤§å¤šæ•°åˆåˆ›å…¬å¸åœ¨å¿«é€Ÿå˜é©æ—¶æœŸä¹Ÿæ— æ³•å¹¸å­˜ã€‚å°‘æ•°å¹¸å­˜çš„è€ç‰Œä¼ä¸šéœ€è¦æå¼ºçš„æ•æ·æ€§ï¼Œä»¥åŠåœ¨ä¸Šä¸€çºªå…ƒè¶³å¤Ÿçš„ç¨³å®šç«‹è¶³ç‚¹ï¼ˆå³ä¸ä¼šå¤ªå¿«æ¶ˆå¤±çš„æ”¶å…¥åŸºç¡€ï¼‰æ¥èµ„åŠ©å®ƒä»¬çš„è¿›åŒ–ã€‚</p>
<p>æ­¤å¤–ï¼Œé€šå¸¸æ˜¯æ–°åˆåˆ›å…¬å¸æ¨åŠ¨é¢ è¦†æ¥æŒ‘æˆ˜è€ç‰Œä¼ä¸šã€‚AIçš„æƒ…å†µå¹¶éå¦‚æ­¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¤§çš„ç©å®¶æ˜¯é‚£äº›æŒç»­å¼•å‘é‡å¤§å˜é©çš„ä¸€æ–¹ã€‚ç¯å¢ƒè¢«æŒç»­æ…åŠ¨ï¼Œä»¥è‡³äºåœ¨ä¸‹ä¸€æ³¢æµªæ½®å°†å®ƒä»¬æ·¹æ²¡ä¹‹å‰ï¼Œåº”ç”¨åˆåˆ›å…¬å¸æ²¡æœ‰ç¨³å®šçš„åŸºç¡€æ¥ç«™ç¨³è„šè·Ÿã€‚æˆ‘ä¸æ˜¯åœ¨è¯´è€ç‰Œä¼ä¸šåœ¨ç«äº‰ä¸­å‡»è´¥å®ƒä»¬ï¼Œæˆ‘æ˜¯åœ¨è¯´æ ¼å±€çš„å˜åŒ–ä½¿å®ƒä»¬å˜å¾—è¿‡æ—¶ã€‚</p>
<p>ä»å®é™…æŠ•èµ„çš„è§’åº¦æ¥çœ‹ï¼Œå°†è¿™ä¸ªæ ¸å¿ƒè§‚ç‚¹åº”ç”¨åˆ°AIåº”ç”¨åˆåˆ›å…¬å¸çš„æ–¹æ³•æ˜¯é—®ï¼šæ”¯æ’‘è¿™å®¶åˆåˆ›å…¬å¸å­˜åœ¨çš„åŸºæœ¬å‡è®¾åœ¨äº”å¹´åä¼šæ˜¯ä¸€æ ·çš„å—ï¼Ÿè¿˜æ˜¯ä¼šæœ‰ä¸å¯é¢„æµ‹çš„ä¸åŒï¼Ÿè¿™é‡Œçš„å…³é”®æ˜¯å¯é¢„æµ‹æ€§â€”â€”å¦‚æœæœªæ¥ä¼šå®Œå…¨ä¸åŒï¼Œä½†ä½ å¯ä»¥è‡ªä¿¡åœ°é¢„æµ‹å®ƒï¼Œä½ å¯ä»¥é¢„å…ˆè°ƒæ•´ä½ çš„ä¸šåŠ¡å®šä½ã€‚ä½†è¿™ä¸æ˜¯å½“å‰AIé¢†åŸŸçš„æƒ…å†µã€‚å¦‚æœä½ å”¯ä¸€ç¡®å®šçš„æ˜¯20ä¸ªäººå°†ä»¥æé«˜çš„é€Ÿåº¦æŠŠå†°çƒæ‹å‘æŸä¸ªç–¯ç‹‚çš„æ–¹å‘ï¼Œä½ å°±æ— æ³•æ»‘å‘å†°çƒè¦å»çš„åœ°æ–¹ã€‚</p>
<p>é‡å¤§å˜é©ç°åœ¨ä»¥9-12ä¸ªæœˆçš„å‘¨æœŸå‘ç”Ÿã€‚å¾ˆå°‘æœ‰åˆåˆ›å…¬å¸èƒ½åœ¨é‚£ä¸ªæ—¶é—´æ¡†æ¶å†…æˆé•¿ä¸ºæˆç†Ÿçš„ä¼ä¸šâ€”â€”æˆ‘è¯´çš„æˆç†Ÿæ˜¯æŒ‡æ‹¥æœ‰æ‰€æœ‰æ— èŠçš„ä¸œè¥¿ï¼Œæ¯”å¦‚é”€å”®å…³ç³»å’Œå“ç‰Œè®¤çŸ¥ã€‚æ˜¯çš„ï¼Œä½ çš„å·¥ç¨‹å¸ˆå¯ä»¥è¿›è¡Œå˜é©ï¼Œä½†äººç±»çš„æ‹›è˜å‘¨æœŸã€å›¢é˜Ÿå·©å›ºå’Œå¸‚åœºå…³ç³»æ˜¯ä¸å¯å‹ç¼©çš„ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªæœˆå†…é›‡ä½£100äººï¼Œä½ çš„ç»„ç»‡å°±ä¼šå´©æºƒï¼‰ã€‚</p>
<p>å› æ­¤ï¼Œåº”ç”¨å…¬å¸åœ¨é‡å¤§å˜é©å‘ç”Ÿä¹‹å‰æ°¸è¿œæ— æ³•å®Œå…¨è¾¾åˆ°ä¸šåŠ¡é—¨æ§›ã€‚å½“æˆ‘è¯´è€ç‰Œä¼ä¸šå°†å æ®åº”ç”¨é¢†åŸŸæ—¶ï¼Œæˆ‘æ˜¯è¯´å®ƒä»¬æ˜¯å”¯ä¸€èƒ½å¤Ÿæä¾›è¶³å¤Ÿå†…éƒ¨ç¨³å®šæ€§å’Œèµ„æºæ¥åœ¨å®ƒä»¬è‡ªå·±å°†æ¨åŠ¨çš„é‡å¤§å˜é©ä¸­å¹¸å­˜ä¸‹æ¥çš„å…¬å¸ï¼Œè€Œä¸æ˜¯è¯´å®ƒä»¬å°†æä¾›æ›´ä¼˜è¶Šçš„äº§å“ã€‚å®ƒä»¬åªæ˜¯ä¸ä¼šé¥¿æ­»çš„é‚£ä¸€æ‰¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§†é‡ä¿®ç‚¼-æŠ€æœ¯å‘¨åˆŠç¬¬127æœŸ | Valdi]]></title>    <link>https://juejin.cn/post/7572539461478547499</link>    <guid>https://juejin.cn/post/7572539461478547499</guid>    <pubDate>2025-11-16T09:44:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572539461478547499" data-draft-id="7572480736362102790" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§†é‡ä¿®ç‚¼-æŠ€æœ¯å‘¨åˆŠç¬¬127æœŸ | Valdi"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,GitHub"/> <meta itemprop="datePublished" content="2025-11-16T09:44:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç²¥é‡Œæœ‰å‹ºç³–"/> <meta itemprop="url" content="https://juejin.cn/user/1028798615918983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§†é‡ä¿®ç‚¼-æŠ€æœ¯å‘¨åˆŠç¬¬127æœŸ | Valdi
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1028798615918983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç²¥é‡Œæœ‰å‹ºç³–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T09:44:23.000Z" title="Sun Nov 16 2025 09:44:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¬¢è¿æ¥åˆ°ç¬¬ 127 æœŸçš„ã€è§†é‡ä¿®ç‚¼ - æŠ€æœ¯å‘¨åˆŠã€‘ï¼Œä¸‹é¢æ˜¯æœ¬æœŸçš„ç²¾é€‰å†…å®¹ç®€ä»‹</p>
<p>ğŸ”¥å¼ºçƒˆæ¨è</p>
<ol>
<li>tasuku - æç®€ Node ä»»åŠ¡å¤„ç†</li>
<li>fkill - å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹</li>
<li>FileMock</li>
</ol>
<p>ğŸ”§å¼€æºå·¥å…·&amp;æŠ€æœ¯èµ„è®¯</p>
<ol start="4">
<li>Valdi - æ–°çš„è·¨å¹³å° UI æ¡†æ¶</li>
<li>JavaScript å¼•æ“å¤§å…¨</li>
</ol>
<p>ğŸ“šæ•™ç¨‹&amp;æ–‡ç« </p>
<ol start="6">
<li>ä½¿ç”¨ Error.cause è¿›è¡Œé”™è¯¯å¤„ç†</li>
</ol>
<p>ğŸ¤–AIå·¥å…·&amp;èµ„è®¯</p>
<ol start="7">
<li>GitHub Repo Visibility Analyzer</li>
</ol>

<p>ä¸‹é¢å¼€å§‹æœ¬æœŸå†…å®¹çš„ä»‹ç»ï¼Œé¢„è®¡é˜…è¯»æ—¶é—´ 6 åˆ†é’Ÿã€‚</p>

<h2 data-id="heading-0">ğŸ”¥å¼ºçƒˆæ¨è</h2>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fprivatenumber%2Ftasuku" target="_blank" title="https://github.com/privatenumber/tasuku" ref="nofollow noopener noreferrer">1. tasuku</a> - æç®€ Node ä»»åŠ¡å¤„ç†</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> task <span class="hljs-keyword">from</span> <span class="hljs-string">'tasuku'</span>

<span class="hljs-title function_">task</span>(<span class="hljs-string">'Task 1'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">someAsyncTask</span>()
})

<span class="hljs-title function_">task</span>(<span class="hljs-string">'Task 2'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">someAsyncTask</span>()
})

<span class="hljs-title function_">task</span>(<span class="hljs-string">'Task 3'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">someAsyncTask</span>()
})
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae7c5dbecba247c4bec7b8e3795928ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57Kl6YeM5pyJ5Yu657OW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891062&amp;x-signature=qnW5migff0E5SHT4T9C7Z5eodlc%3D" alt="" loading="lazy"/></p>
<p>åœ¨åš CLI çš„æ—¶å€™å¯ä»¥ç”¨ä¸Šï¼Œå°¤å…¶éœ€è¦å¤„ç†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡æ—¶ã€‚</p>
<p>è¿˜æ”¯æŒåµŒå¥—ï¼Œå¤šçŠ¶æ€å±•ç¤ºç­‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d33ca5ec35d04a2dbc6f03443abd4c7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57Kl6YeM5pyJ5Yu657OW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891062&amp;x-signature=11plWrB5L%2BI1FWAYcs2CpaD94vg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d93284d8aae5497bb2079bab3842a65e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57Kl6YeM5pyJ5Yu657OW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891062&amp;x-signature=uWdsvnAb176mm9h1%2BEk2NBoHS%2Bc%3D" alt="" loading="lazy"/></p>
<p>æ„Ÿè§‰å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbombshell-dev%2Fclack" target="_blank" title="https://github.com/bombshell-dev/clack" ref="nofollow noopener noreferrer">@clack/prompts</a> å’Œéå¸¸æ­é…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35e54507107449f7bae3f55acb0ba282~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57Kl6YeM5pyJ5Yu657OW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891062&amp;x-signature=0yPCP%2FHGHnEwdAdHk3o1w7vnrLY%3D" alt="" loading="lazy"/></p>
<p>æ”¶è— â­ï¸ï¼</p>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsindresorhus%2Ffkill" target="_blank" title="https://github.com/sindresorhus/fkill" ref="nofollow noopener noreferrer">2. fkill</a> - å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹</h3>
<p>è¿›ç¨‹å¤§æ€å™¨ï¼Œæ”¯æŒå¤šç§ç»ˆæ­¢è¿›ç¨‹çš„æ–¹å¼ğŸ‘ğŸ»ï¼Œè·¨å¹³å°å¯ç”¨ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> fkill <span class="hljs-keyword">from</span> <span class="hljs-string">'fkill'</span>

<span class="hljs-keyword">await</span> <span class="hljs-title function_">fkill</span>(<span class="hljs-number">1337</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Killed process'</span>)

<span class="hljs-title function_">fkill</span>(<span class="hljs-string">'Safari'</span>)
<span class="hljs-title function_">fkill</span>(<span class="hljs-string">':8080'</span>)

<span class="hljs-title function_">fkill</span>([<span class="hljs-number">1337</span>, <span class="hljs-string">'Safari'</span>, <span class="hljs-string">':8080'</span>])
</code></pre>
<p>ä¹Ÿæ”¯æŒ CLI è°ƒç”¨ã€‚</p>
<pre><code class="hljs language-sh" lang="sh">npm install --global fkill-cli

fkill 1337
fkill Safari
fkill :8080
</code></pre>
<p>è¿˜æ”¯æŒ äº¤äº’å¼ CLIã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8d17ab0779d4a78b5bb8f74a9eea793~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57Kl6YeM5pyJ5Yu657OW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891062&amp;x-signature=ercCrZVgUFb589r1z0JDwHFIFHs%3D" alt="" loading="lazy"/></p>
<p>èµ¶ç´§è£…ä¸Šã€‚</p>
<h3 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Ffilemock.com%2F" target="_blank" title="https://filemock.com/" ref="nofollow noopener noreferrer">3. FileMock</a></h3>
<p>å…è´¹çš„æµ‹è¯•æ–‡ä»¶ç”Ÿæˆå™¨ï¼Œæ”¯æŒè§†é¢‘/å›¾ç‰‡/éŸ³ä¹/æ–‡æ¡£ç­‰å¤šç§æ ¼å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81641c5b9d1b4dcc887522edcf46a994~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57Kl6YeM5pyJ5Yu657OW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891062&amp;x-signature=Ns64lU1rVBsNgL2rU7z61yJ2ICo%3D" alt="" loading="lazy"/></p>
<p>æ”¶è—â­ï¸ï¼ŒåŸºæœ¬è¦†ç›–äº†å¸¸è§çš„æ–‡ä»¶æ ¼å¼ï¼</p>
<h2 data-id="heading-4">ğŸ”§å¼€æºå·¥å…·&amp;æŠ€æœ¯èµ„è®¯</h2>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSnapchat%2FValdi" target="_blank" title="https://github.com/Snapchat/Valdi" ref="nofollow noopener noreferrer">4. Valdi</a> - æ–°çš„è·¨å¹³å° UI æ¡†æ¶</h3>
<p>ä½¿ç”¨ TypeScript&amp;TSX ç¼–å†™ UIï¼Œå¯ä»¥ç›´æ¥ç¼–è¯‘æˆ iOSã€Android å’Œ macOS ä¸Š ç”± Native æ¸²æŸ“çš„è§†å›¾åº”ç”¨ï¼Œæ—  JS ä¸­é—´å±‚ã€‚</p>
<p>ç¬”è€…æ‹‰ä»“åº“è¯•äº†ä¸€ä¸‹ Demoï¼Œæ•ˆæœå¦‚ä¸‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1eab51fed1014c779eb27fe425948e46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57Kl6YeM5pyJ5Yu657OW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891062&amp;x-signature=7E2DBvvU9YnLQ1%2BsX8wtw30rFbQ%3D" alt="" loading="lazy"/></p>
<p>æ„Ÿè§‰è¿˜è¡Œï¼Œå°±æ˜¯æ‰åˆšå¼€æºï¼Œæ–‡æ¡£è¿˜ä¸æ˜¯ç‰¹åˆ«å‹å¥½ï¼Œé¡¹ç›®åˆå§‹åŒ–æµç¨‹ä¸æ˜¯ç‰¹åˆ«æ ‡å‡†ã€‚</p>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Fivankra.github.io%2Fjavascript-zoo%2F" target="_blank" title="https://ivankra.github.io/javascript-zoo/" ref="nofollow noopener noreferrer">5. JavaScript å¼•æ“å¤§å…¨</a></h3>
<p>åŒ…å«ä¸Šç™¾ç§ JS å¼•æ“çš„åŸºæœ¬ä¿¡æ¯ ES æ”¯æŒç¨‹åº¦ï¼Œæ€§èƒ½ç­‰å¯¹æ¯”ä¿¡æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73144b5f93e4434a8a67b0031874825d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57Kl6YeM5pyJ5Yu657OW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891062&amp;x-signature=pS9zaVkBkXlRQs%2Ficc2A82gLQ6g%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">ğŸ“šæ•™ç¨‹&amp;æ–‡ç« </h2>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=https%3A%2F%2Fallthingssmitty.com%2F2025%2F11%2F10%2Ferror-chaining-in-javascript-cleaner-debugging-with-error-cause%2F" target="_blank" title="https://allthingssmitty.com/2025/11/10/error-chaining-in-javascript-cleaner-debugging-with-error-cause/" ref="nofollow noopener noreferrer">6. ä½¿ç”¨ Error.cause è¿›è¡Œé”™è¯¯å¤„ç†</a></h3>
<p>ä½¿ç”¨ <code>Error.cause</code> å¤„ç†é”™è¯¯ï¼Œä¿ç•™æ›´æ¸…æ™°çš„å †æ ˆè·Ÿè¸ªä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUserData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">'{ broken: true }'</span>) <span class="hljs-comment">// â† This will fail</span>
  }
  <span class="hljs-keyword">catch</span> (parseError) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Failed to fetch user data'</span>, { <span class="hljs-attr">cause</span>: parseError })
  }
}

<span class="hljs-keyword">try</span> {
  <span class="hljs-title function_">fetchUserData</span>()
}
<span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">message</span>) <span class="hljs-comment">// "Failed to fetch user data"</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">cause</span>) <span class="hljs-comment">// [SyntaxError: Unexpected token b in JSON]</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">cause</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">SyntaxError</span>) <span class="hljs-comment">// true</span>
}
</code></pre>
<h2 data-id="heading-9">ğŸ¤–AIå·¥å…·&amp;èµ„è®¯</h2>
<h3 data-id="heading-10"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnakora.co%2Ftools%2Fgithub-repo-visibility" target="_blank" title="https://nakora.co/tools/github-repo-visibility" ref="nofollow noopener noreferrer">7. GitHub Repo Visibility Analyzer</a></h3>
<p>è¿™ä¸ªå…è´¹çš„å·¥å…·å¯ä»¥å¯¹ä½ çš„ä»“åº“è¿›è¡Œåˆ†æï¼Œæä¾›ä¸»é¢˜æ ‡ç­¾å»ºè®®å’Œå…¶ä»–æ¨èçš„è¡ŒåŠ¨é¡¹ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å®¹æ˜“åœ°æ‰¾åˆ°ä½ çš„é¡¹ç›®ã€‚</p>
<p>æå‡ä½ åœ¨ GitHub æœç´¢ã€Google å’Œå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰ä¸­çš„ä»“åº“å¯è§æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e1d0a5943d8455f89f60e7a3440f23f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57Kl6YeM5pyJ5Yu657OW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891062&amp;x-signature=70OlFyHvqQKuDvc4kD733IEwfwE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">â­ï¸å¼ºåŠ›æ¨èå…³æ³¨</h2>
<blockquote>
<p>å‘¨åˆŠéƒ¨åˆ†å†…å®¹æ¥æºå¦‚ä¸‹æ¸ é“ï¼Œæ¨èå¤§å®¶å…³æ³¨ã€‚</p>
</blockquote>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2Farchives.html" target="_blank" title="https://www.ruanyifeng.com/blog/archives.html" ref="nofollow noopener noreferrer">é˜®ä¸€å³°: ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠ</a> - è®°å½•æ¯å‘¨å€¼å¾—åˆ†äº«çš„ç§‘æŠ€å†…å®¹ï¼Œå‘¨äº”å‘å¸ƒ</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.fre321.com%2Fweekly" target="_blank" title="https://www.fre321.com/weekly" ref="nofollow noopener noreferrer">FRE123 æŠ€æœ¯å‘¨åˆŠç²¾é€‰</a> - æŠ€æœ¯å‘¨åˆŠç²¾é€‰æ¨èä¿¡æ¯æµ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis8ä¸­æ–°ç‰¹æ€§:TopKè·å–æœ€é«˜æ’åçš„æ•°æ®]]></title>    <link>https://juejin.cn/post/7572525491539132458</link>    <guid>https://juejin.cn/post/7572525491539132458</guid>    <pubDate>2025-11-16T09:44:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572525491539132458" data-draft-id="7572793505899954227" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis8ä¸­æ–°ç‰¹æ€§:TopKè·å–æœ€é«˜æ’åçš„æ•°æ®"/> <meta itemprop="keywords" content="åç«¯,Redis"/> <meta itemprop="datePublished" content="2025-11-16T09:44:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è€ƒè™‘è€ƒè™‘"/> <meta itemprop="url" content="https://juejin.cn/user/4406498335157287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis8ä¸­æ–°ç‰¹æ€§:TopKè·å–æœ€é«˜æ’åçš„æ•°æ®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4406498335157287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è€ƒè™‘è€ƒè™‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T09:44:35.000Z" title="Sun Nov 16 2025 09:44:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p><code>Redis8</code>æ–°å¢äº†æ–°ç‰¹æ€§ï¼Œå¯ä»¥åˆ©ç”¨<code>TopK</code>è·å–æœ€é«˜æ’åçš„æ•°æ®</p>
<h3 data-id="heading-1">Topkä½¿ç”¨</h3>
<h4 data-id="heading-2">TOPK.RESERVEÂ åˆå§‹åŒ–</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">TOPK.RESERVE</span> <span class="hljs-string">hello</span> <span class="hljs-number">20</span> <span class="hljs-number">2000 </span><span class="hljs-number">7</span> <span class="hljs-number">0.925</span>
</code></pre>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¯­æ³•</span>

<span class="hljs-comment">#topk: è¦ä¿ç•™çš„å‡ºç°é¢‘ç‡æœ€é«˜é¡¹ç›®çš„æ•°é‡ã€‚</span>

<span class="hljs-comment">#width: æ¯ä¸ªæ•°ç»„ä¸­ä¿ç•™çš„è®¡æ•°å™¨æ•°é‡ã€‚ï¼ˆé»˜è®¤å€¼ 8ï¼‰</span>

<span class="hljs-comment">#depth: æ•°ç»„æ•°é‡ã€‚ï¼ˆé»˜è®¤å€¼ 7ï¼‰</span>

<span class="hljs-comment">#decay: å·²å ç”¨æ¡¶ä¸­è®¡æ•°å™¨å‡å°‘çš„æ¦‚ç‡ã€‚å®ƒä¼šå¯¹å…¶è®¡æ•°å™¨è¿›è¡Œå¹‚è¿ç®— (decay ^ bucket[i].counter)ã€‚å› æ­¤ï¼Œéšç€è®¡æ•°å™¨å€¼çš„å‡é«˜ï¼Œå‡å°‘çš„å‡ ç‡ä¼šé™ä½ã€‚ï¼ˆé»˜è®¤å€¼ 0.9ï¼‰</span>

TOPK.RESERVE key topk <span class="hljs-section">[width depth decay]</span>
</code></pre>
<h4 data-id="heading-3">TOPK.ADDÂ æ·»åŠ ä¸€æ¬¡</h4>
<p>å‘æ•°æ®ç»“æ„æ·»åŠ ä¸€ä¸ªé¡¹ã€‚å¯ä»¥ä¸€æ¬¡æ·»åŠ å¤šä¸ªé¡¹ã€‚å¦‚æœä¸€ä¸ªé¡¹è¿›å…¥ Top-K åˆ—è¡¨ï¼Œåˆ™è¿”å›<code>è¢«é€å‡ºçš„é¡¹</code></p>
<p>è¯­æ³•ä¸º</p>
<pre><code class="hljs language-css" lang="css">TOPK<span class="hljs-selector-class">.ADD</span> key items <span class="hljs-selector-attr">[items ...]</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed1743a0b61745fbafe045409654c28e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891075&amp;x-signature=ADhou4hjcaWPHxwKXquAJLmS6%2Bk%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">TOPK.INCRBY å¸¦å¢é‡åˆ†æ•°æ·»åŠ </h4>
<p>æŒ‰å¢é‡å¢åŠ æ•°æ®ç»“æ„ä¸­é¡¹ç›®çš„åˆ†æ•°ã€‚å¯ä»¥ä¸€æ¬¡å¢åŠ å¤šä¸ªé¡¹ç›®çš„åˆ†æ•°ã€‚å¦‚æœæŸä¸ªé¡¹ç›®è¿›å…¥ Top-K åˆ—è¡¨ï¼Œåˆ™è¿”å›è¢«é€å‡ºçš„é¡¹ç›®</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/522500edb2a64952b7862b0314db0406~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891075&amp;x-signature=o2L7owlzu3HV%2F%2FfYSvJlRQnGrPU%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">TOPK.INFO æŸ¥çœ‹ä¿¡æ¯</h4>
<p>è¿”å›æ‰€éœ€é¡¹ç›®æ•° (k)ã€å®½åº¦ã€æ·±åº¦å’Œè¡°å‡å€¼ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">TOPK.INFO <span class="hljs-keyword">key</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ae7959f2b1b48d38ac49d3df227410d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891075&amp;x-signature=WtlbYF0P%2B3QAVWWmOK8S8l7RUws%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">TOPK.LIST æŸ¥è¯¢Top K åˆ—è¡¨</h4>
<p>è¿”å›topkåˆ—è¡¨</p>
<pre><code class="hljs language-css" lang="css">TOPK<span class="hljs-selector-class">.LIST</span> key <span class="hljs-selector-attr">[WITHCOUNT]</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d11ccbc09a44cf39d38c440ddb4afd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891075&amp;x-signature=WFQGZH8nCv7Z4iazXdhmujrCLoc%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-7">TOPK.QUERY æ£€æŸ¥å…ƒç´ </h4>
<p>è¯­æ³•</p>
<pre><code class="hljs language-css" lang="css">TOPK<span class="hljs-selector-class">.QUERY</span> key item <span class="hljs-selector-attr">[item ...]</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0c96b16a6bd422983550123c6a82de3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891075&amp;x-signature=mVQK1aRxt1riAUW3dgc8rHbauCE%3D" alt="image.png" loading="lazy"/>
ä»¥ä¸‹ç¤ºä¾‹</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">TOPK.RESERVE</span> <span class="hljs-string">book1</span> <span class="hljs-number">2</span> <span class="hljs-number">2000 </span><span class="hljs-number">7</span> <span class="hljs-number">0.925</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e11eb643472a4ca481e86f929f402996~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891075&amp;x-signature=AoJyxtO8jWeLmSnuz2T85UiVrVM%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs">TOPK.ADD book1 hello hello1 hello3 hello4
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31e30daa99054469a4f34b41694a5c60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891075&amp;x-signature=NKj6%2FsUVF%2Br0sE4XW4x0KSK4GKQ%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs">TOPK.LIST book1
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbdc72e5b3574a708c86856097edf95e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891075&amp;x-signature=oTk8AbPxiGDKkdrxGyQsXzuxiNM%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs">TOPK.ADD book1 hello hello1
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff8741d009984c0bb6c52e90090fa92e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891075&amp;x-signature=lVGiseO%2BSIsdDQehDpkzSuUdOgw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45285d3babfc40968c4437f3d005a671~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891075&amp;x-signature=CdgmV71rY4JBWMaZ5Xn7d8x8eY8%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e011f7d229204ddd9f7725bcd5c5fbdf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891075&amp;x-signature=ht3HNrPNgaO0ms95Ebp1K7WUB8s%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p>å¯ä»¥åˆ©ç”¨<code>TopK</code>è·å–æœ€é«˜æ’åçš„æ•°æ®ï¼Œä½†æ˜¯å¿…é¡»æ—¶<code>Redis8</code>ç‰ˆæœ¬</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[17. Vue3 ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„å®ç°åŸç†]]></title>    <link>https://juejin.cn/post/7572480736362119174</link>    <guid>https://juejin.cn/post/7572480736362119174</guid>    <pubDate>2025-11-16T09:53:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572480736362119174" data-draft-id="7567194020462133274" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="17. Vue3 ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„å®ç°åŸç†"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-16T09:53:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Cobyte"/> <meta itemprop="url" content="https://juejin.cn/user/668147376989517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            17. Vue3 ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„å®ç°åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/668147376989517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Cobyte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T09:53:14.000Z" title="Sun Nov 16 2025 09:53:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto;border:3px solid rgba(62,175,124,.2)}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-weight:700;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:6px;border:2px solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c}.markdown-body a:active,.markdown-body a:hover{border-bottom:1.5px solid #3eaf7c}.markdown-body a:before{content:"â‡²"}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(62,175,124,.2)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:.5rem solid;border-color:#42b983;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none}.markdown-body ul li:before{content:"â€¢";margin-right:4px;color:#3eaf7c}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>æœ€è¿‘åœ¨å…¬å¸å®ç°ä¸€ä¸ªä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„éœ€æ±‚ã€‚ç®€å•æ¥è¯´ï¼Œæœ‰ä¸¤ä¸ªéœ€æ±‚ï¼Œç¬¬ä¸€ä¸ªæ˜¯å®ç°ä¸šåŠ¡ç»„ä»¶åº“çš„æŒ‰éœ€åŠ è½½ï¼Œç¬¬äºŒï¼Œå› ä¸ºä¸šåŠ¡ç»„ä»¶åº“é‡Œé¢æœ‰å¼•ç”¨äº†ç±»ä¼¼ Element Plus çš„ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼Œæ‰€ä»¥åœ¨å®ç°ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„åŒæ—¶ï¼Œä¸šåŠ¡ç»„ä»¶åº“é‡Œé¢çš„å¼•ç”¨çš„ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ä¹Ÿè¦å®ç°æŒ‰éœ€åŠ è½½ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªç¼–ç¨‹æŠ€æœ¯äººå‘˜ï¼Œå³ä¾¿æœ‰äº†AIï¼Œä¹Ÿéœ€è¦ç ”ç©¶åº•å±‚çš„æŠ€æœ¯åŸç†ï¼Œç”šè‡³éœ€è¦æ¯”æ²¡æœ‰AIçš„æ—¶ä»£ï¼Œéœ€è¦æ›´åŠ æ·±å…¥ç ”ç©¶ï¼Œåœ¨AIæ—¶ä»£ï¼ŒåŸºç¡€çš„éƒ½é€šè¿‡AIå®ç°äº†ï¼Œåªæœ‰AIè§£å†³ä¸äº†çš„é—®é¢˜ï¼Œæœ€ç»ˆè¿˜å¾—é ä½ è‡ªå·±çš„ä¸“ä¸šçŸ¥è¯†å»è§£å†³ï¼Œè€Œè¿™å°†æ˜¯ä½ çš„æ ¸å¿ƒç«äº‰åŠ›çš„ä½“ç°ï¼Œæ‰€ä»¥åœ¨AIæ—¶ä»£å¯¹æŠ€æœ¯äººå‘˜çš„æŠ€æœ¯ç´ å…»è¦æ±‚å°†æ›´åŠ çš„é«˜ã€‚</p>
<p>æ‰¯è¿œäº†ï¼Œæˆ‘ä»¬å›åˆ°ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„å®ç°åŸç†çš„ä¸»é¢˜ä¸Šæ¥ã€‚</p>
<p>ä¸€èˆ¬åœ¨é¡¹ç›®ä¸­å¦‚æœæ²¡æœ‰è¿›è¡Œç»„ä»¶åº“æŒ‰éœ€åŠ è½½é…ç½®ï¼Œéƒ½æ˜¯ä¸€å¼€å§‹å°±å…¨é‡åŠ è½½è¿›è¡Œå…¨å±€ç»„ä»¶æ³¨å†Œï¼Œè¿™æ ·å°±ç­‰äºæ•´ä¸ªç»„ä»¶åº“åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±å…¨éƒ¨åŠ è½½äº†ï¼Œå¦‚æœåœ¨è¿½æ±‚æ€§èƒ½çš„é¡¹ç›®ä¸­ï¼Œè¿™æ˜¯ä¸å¯æ¥å—çš„ã€‚è¿™æ—¶æˆ‘ä»¬å°±è¦å®ç°ç»„ä»¶åº“çš„æŒ‰éœ€åŠ è½½ï¼Œæ¥æé«˜æ€§èƒ½ã€‚</p>
<h3 data-id="heading-1">æŒ‰éœ€åŠ è½½çš„åŸºæœ¬å®ç°åŸç†</h3>
<p>é¦–å…ˆä»€ä¹ˆæ˜¯æŒ‰éœ€åŠ è½½ï¼Ÿ</p>
<p>æ‰€è°“æŒ‰éœ€åŠ è½½ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æœ‰éœ€è¦å°±åŠ è½½ï¼Œä¸éœ€è¦å°±ä¸åŠ è½½ï¼Œæ¯”å¦‚ <code>Element Plus</code> ç»„ä»¶åº“æœ‰å‡ åä¸ªç»„ä»¶ï¼Œå¯èƒ½åœ¨æˆ‘ä»¬çš„é¡¹ç›®åªç”¨åˆ°äº†åˆ°äº†å…¶ä¸­ä¸€ä¸ªç»„ä»¶ <code>&lt;el-button&gt;</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¸Œæœ›åªåŠ è½½è·Ÿè¿™ä¸ªæŒ‰é’®ç»„ä»¶ç›¸å…³çš„ä»£ç ï¼Œä»è€Œè¾¾åˆ°å‡å°‘æ‰“åŒ…ä½“ç§¯çš„æ•ˆæœã€‚</p>
<p>æŒ‰éœ€åŠ è½½æœ€ç®€å•çš„å®ç°æ–¹å¼å°±æ˜¯æ‰‹åŠ¨è®¾ç½®ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus/es/components/button'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'element-plus/es/components/button/style/index'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: { <span class="hljs-title class_">ElButton</span> },
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æˆ‘ä»¬åƒä¸Šè¿°ä¾‹å­è¿™æ ·æ‰‹åŠ¨å¼•ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶åº“çš„è¯ï¼Œåœ¨æ‰“åŒ…çš„æ—¶å€™å°±åªä¼šæ‰“åŒ…å¼•ç”¨åˆ°çš„ç»„ä»¶ï¼Œå› ä¸ºç›®å‰çš„å¼€æºç»„ä»¶åº“åŸºæœ¬éƒ½å®ç°äº†åˆ©äº Tree Shaking çš„ <code>ESM</code> æ¨¡å—åŒ–å®ç°ã€‚</p>
<p>å¦‚æœæ¯ä¸ªä¸šåŠ¡ç»„ä»¶éƒ½éœ€è¦è¿›è¡Œä¸Šè¿°è®¾ç½®ï¼Œå…¶å®è¿˜æ˜¯æŒºç¹ççš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›åªåœ¨ template ä¸­ç›´æ¥è°ƒç”¨å°±å¥½ï¼Œå…¶ä»–ä»€ä¹ˆè®¾ç½®éƒ½ä¸éœ€è¦ï¼Œå°±åƒå…¨å±€æ³¨å†Œç»„ä»¶é‚£æ ·ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>è€Œå‰©ä¸‹éƒ¨åˆ†çš„ä»£ç ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æ‰“åŒ…æˆ–è€…è¿è¡Œçš„æ—¶å€™è‡ªåŠ¨è®¾ç½®ä¸Šå»ã€‚ä¸»è¦æ˜¯ä»¥ä¸‹éƒ¨åˆ†çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus/es/components/button'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'element-plus/es/components/button/style/index'</span>
</code></pre>
<p>ä¸Šè¿°éƒ¨åˆ†çš„ä»£ç ï¼Œå¸Œæœ›è‡ªåŠ¨åŠ è½½ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®ã€‚æ•´ä¸ªæ‰€è°“æŒ‰éœ€åŠ è½½æ‰€éœ€è¦å®ç°çš„å°±æ˜¯ä¸Šè¿°çš„åŠŸèƒ½ã€‚</p>
<p>é‚£ä¹ˆæ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆä¸Šè¿°æ¨¡æ¿ä»£ç çš„ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createTextVNode <span class="hljs-keyword">as</span> _createTextVNode, resolveComponent <span class="hljs-keyword">as</span> _resolveComponent, withCtx <span class="hljs-keyword">as</span> _withCtx, createVNode <span class="hljs-keyword">as</span> _createVNode, openBlock <span class="hljs-keyword">as</span> _openBlock, createElementBlock <span class="hljs-keyword">as</span> _createElementBlock } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">_ctx, _cache, $props, $setup, $data, $options</span>) {
  <span class="hljs-keyword">const</span> _component_el_button = <span class="hljs-title function_">_resolveComponent</span>(<span class="hljs-string">"el-button"</span>)

  <span class="hljs-keyword">return</span> (<span class="hljs-title function_">_openBlock</span>(), <span class="hljs-title function_">_createElementBlock</span>(<span class="hljs-string">"template"</span>, <span class="hljs-literal">null</span>, [
    <span class="hljs-title function_">_createVNode</span>(_component_el_button, <span class="hljs-literal">null</span>, {
      <span class="hljs-attr">default</span>: <span class="hljs-title function_">_withCtx</span>(<span class="hljs-function">() =&gt;</span> [
        <span class="hljs-title function_">_createTextVNode</span>(<span class="hljs-string">"æŒ‰é’®"</span>)
      ], <span class="hljs-literal">undefined</span>, <span class="hljs-literal">true</span>),
      <span class="hljs-attr">_</span>: <span class="hljs-number">1</span> <span class="hljs-comment">/* STABLE */</span>
    })
  ]))
}
</code></pre>
<p>æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ° Vue3 çš„å†…ç½®å‡½æ•° <code>_resolveComponent("el-button")</code> éƒ¨åˆ†ï¼Œç„¶åæ›¿æ¢æˆå¯¹åº”çš„ç»„ä»¶ä»£ç å³å¯ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ import { ElButton } from 'element-plus/es/components/button'</span>
<span class="hljs-addition">+ import 'element-plus/es/components/button/style/index'</span>
import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from "vue"

export function render(_ctx, _cache, $props, $setup, $data, $options) {
<span class="hljs-deletion">-  const _component_el_button = _resolveComponent("el-button")</span>
<span class="hljs-addition">+ const _component_el_button = ElButton</span>

  return (_openBlock(), _createElementBlock("template", null, [
    _createVNode(_component_el_button, null, {
      default: _withCtx(() =&gt; [
        _createTextVNode("æŒ‰é’®")
      ], undefined, true),
      _: 1 /* STABLE */
    })
  ]))
}
</code></pre>
<p>ä¸Šè¿°å°±æ˜¯ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„åŸºæœ¬å®ç°åŸç†ã€‚</p>
<h3 data-id="heading-2">ä½¿ç”¨ Vite æ‰“åŒ…ç»„ä»¶åº“</h3>
<p>ä¸ºäº†æ›´å¥½è¿˜åŸå®é™…åœºæ™¯ï¼Œæˆ‘ä»¬å¿«é€Ÿåˆ›å»ºä¸€ä¸ªç»„ä»¶åº“é¡¹ç›®å¹¶ä¸”é€šè¿‡ Vite è¿›è¡Œæ‰“åŒ…ã€‚
é¦–å…ˆåˆ›å»ºä¸€ä¸ª <code>cobyte-vite-ui</code> çš„ç»„ä»¶åº“ç›®å½•ï¼Œåœ¨æ ¹ç›®å½•ä¸‹åˆå§‹åŒ– Node é¡¹ç›®ï¼Œæ‰§è¡Œ <code>pnpm init</code>, ä¼šè‡ªåŠ¨ç”Ÿæˆ <code>package.json</code>  æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cobyte-vite-ui"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ISC"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"packageManager"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm@10.20.0"</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åœ¨æ ¹ç›®å½•æ–°å»º <code>pnpm-workspace.yaml</code> æ–‡ä»¶è¿›è¡Œ Monorepo é¡¹ç›®é…ç½®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">packages:
<span class="hljs-bullet">  -</span> packages/*
<span class="hljs-bullet">  -</span> play
</code></pre>
<p>æ€»çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-go" lang="go">â”œâ”€â”€ packages
â”‚   â”œâ”€â”€ components
â”‚   â”œâ”€â”€ hooks
â”‚   â””â”€â”€ utils
â”œâ”€â”€ play
â”œâ”€â”€ <span class="hljs-keyword">package</span>.json
â””â”€â”€ pnpm-workspace.yaml
</code></pre>
<p>æ¥ç€æˆ‘ä»¬å®‰è£…ä¸€äº›å¿…è¦çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">pnpm <span class="hljs-keyword">add</span> vite typescript <span class="hljs-variable">@vitejs</span><span class="hljs-operator">/</span>plugin<span class="hljs-operator">-</span>vue sass <span class="hljs-variable">@types</span><span class="hljs-operator">/</span>node <span class="hljs-operator">-</span>D <span class="hljs-operator">-</span>w
</code></pre>
<p>æ¥ç€æˆ‘ä»¬å®‰è£…ä¸€ä¸‹ vue ä¾èµ–ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> vue -w
</code></pre>
<p>åŸºç¡€ä¾èµ–å®‰è£…å®Œæ¯•ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸‹ TS çš„é…ç½®ï¼Œå› ä¸ºæˆ‘ä»¬è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ª TS çš„é¡¹ç›®ï¼Œåœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª <code>tsconfig.json</code>ï¼Œé…ç½®å†…å®¹å¯ä»¥ç®€å•è®¾ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">{
    <span class="hljs-string">"compilerOptions"</span>: {
      <span class="hljs-string">"target"</span>: <span class="hljs-string">"ESNext"</span>,
      <span class="hljs-string">"module"</span>: <span class="hljs-string">"NodeNext"</span>,
      <span class="hljs-string">"sourceMap"</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å…³é”®ï¼šå¯ç”¨æºæ˜ å°„</span>
      <span class="hljs-string">"outDir"</span>: <span class="hljs-string">"./dist"</span>, <span class="hljs-comment">// å¯é€‰ï¼šæŒ‡å®šè¾“å‡ºç›®å½•</span>
      <span class="hljs-string">"esModuleInterop"</span>: <span class="hljs-literal">true</span>
    }
}
</code></pre>
<p>æ¥ç€æˆ‘ä»¬å°±åœ¨ <code>packages/components</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæµ‹è¯•æŒ‰é’®ç»„ä»¶</p>
<p>ç›®å½•è·¯å¾„ï¼š<code>packages/components/button/button.vue</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æµ‹è¯•æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-title function_">defineOptions</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'co-button'</span>,
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">color</span>: red;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>ç›®å½•è·¯å¾„ï¼š<code>packages/components/button/index.ts</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> button <span class="hljs-keyword">from</span> <span class="hljs-string">"./button.vue"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CoButton</span> = button;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CoButton</span>;
</code></pre>
<p>ç›®å½•è·¯å¾„ï¼š<code>packages/components/components.ts</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CoButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./button'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
    <span class="hljs-title class_">CoButton</span>
]
</code></pre>
<p>ç›®å½•è·¯å¾„ï¼š<code>packages/components/defaults.ts</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">App</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> components <span class="hljs-keyword">from</span> <span class="hljs-string">'./components'</span>;

<span class="hljs-keyword">const</span> install = <span class="hljs-keyword">function</span> (<span class="hljs-params">app: App</span>) {
    components.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">component</span> =&gt;</span> {
        app.<span class="hljs-title function_">component</span>(component.<span class="hljs-property">name</span>, component);
    });
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    install
};
</code></pre>
<p>ç›®å½•è·¯å¾„ï¼š<code>packages/components/index.ts</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./button'</span>;

<span class="hljs-keyword">import</span> install <span class="hljs-keyword">from</span>  <span class="hljs-string">'./defaults'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> install;
</code></pre>
<p>æˆ‘ä»¬å†é…ç½®ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œç›®å½•è·¯å¾„ï¼š<code>packages/utils/index.ts</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">testUtils</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'testUtils'</span>);
}
</code></pre>
<p>å¦‚æœå¤§å®¶å¯¹åˆ›å»ºç»„ä»¶åº“æ¯”è¾ƒæœ‰ç»éªŒçš„è¯ï¼Œå°±çŸ¥é“ä¸Šè¿°æ­¥éª¤ï¼Œæ˜¯ Vue3 ç»„ä»¶åº“çš„åŸºç¡€è®¾ç½®ï¼Œå„å¤§ç»„ä»¶åº“çš„å®ç°è™½ç„¶å·®å¼‚å¾ˆå¤§ï¼Œä½†æœ€æ ¸å¿ƒæœºåˆ¶éƒ½å¯ä»¥ç®€å•å½’çº³ä¸ºä¸Šè¿°è®¾ç½®å†…å®¹ã€‚
å¤§å®¶å¦‚æœæƒ³è¯¦ç»†äº†è§£æ›´å¤šä¹Ÿå¯ä»¥çœ‹çœ‹æœ¬æ ç›®å‰é¢ç« èŠ‚çš„å†…å®¹ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬å°±åˆ°äº†æˆ‘ä»¬æœ€æ ¸å¿ƒçš„ç»„ä»¶åº“æ‰“åŒ…çš„ç¯èŠ‚äº†ï¼Œæˆ‘ä»¬åœ¨æ ¹æœ¬ç›®å½•åˆ›å»ºä¸€ä¸ª <code>vite.config.ts</code>ï¼Œè®¾ç½®å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"vite"</span>;
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">"@vitejs/plugin-vue"</span>;
<span class="hljs-keyword">import</span> path, { resolve } <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>;
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">"fs"</span>;

<span class="hljs-comment">// åŠ¨æ€è·å–ç»„ä»¶ç›®å½•åˆ—è¡¨</span>
<span class="hljs-keyword">const</span> componentsDir = <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"./packages/components"</span>);
<span class="hljs-keyword">const</span> modules = fs.<span class="hljs-title function_">readdirSync</span>(componentsDir).<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> fullPath = path.<span class="hljs-title function_">join</span>(componentsDir, name);
    <span class="hljs-comment">// åªè·å–ç›®å½•ï¼Œæ’é™¤æ–‡ä»¶</span>
    <span class="hljs-keyword">return</span> fs.<span class="hljs-title function_">statSync</span>(fullPath).<span class="hljs-title function_">isDirectory</span>();
});

<span class="hljs-keyword">const</span> entryArr = {
    <span class="hljs-comment">// ä¸»å…¥å£</span>
    <span class="hljs-attr">index</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"./packages/components/index.ts"</span>),

    <span class="hljs-comment">// å·¥å…·å…¥å£</span>
    <span class="hljs-attr">utils</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"./packages/utils/index.ts"</span>),
};

<span class="hljs-comment">// ä¸ºæ¯ä¸ªç»„ä»¶åˆ›å»ºç‹¬ç«‹å…¥å£</span>
modules.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
    entryArr[<span class="hljs-string">`components/<span class="hljs-subst">${name}</span>/index`</span>] = <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">`./packages/components/<span class="hljs-subst">${name}</span>/index.ts`</span>);
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ command, mode }</span>) =&gt;</span> {
    <span class="hljs-comment">// ä¸»æ„å»ºé…ç½®</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">plugins</span>: [
            <span class="hljs-title function_">vue</span>(),
        ],
        <span class="hljs-attr">build</span>: {
            <span class="hljs-attr">lib</span>: {
                <span class="hljs-attr">entry</span>: entryArr,
                <span class="hljs-attr">formats</span>: [<span class="hljs-string">"es"</span>], <span class="hljs-comment">// åªæ„å»º ES æ¨¡å—</span>
                <span class="hljs-attr">cssFileName</span>: <span class="hljs-string">"style"</span>,
            },
            <span class="hljs-attr">rollupOptions</span>: {
                <span class="hljs-attr">external</span>: [
                    <span class="hljs-string">"vue"</span>,
                ],
                <span class="hljs-attr">output</span>: {
                    <span class="hljs-attr">format</span>: <span class="hljs-string">"es"</span>,
                    <span class="hljs-attr">preserveModules</span>: <span class="hljs-literal">true</span>,
                },
            },
        },
    };
});
</code></pre>
<p>è®¾ç½®å®Œ Vite é…ç½®æ–‡ä»¶åï¼Œæˆ‘ä»¬è¿˜è¦è®¾ç½® <code>packages.json</code> ä¸­çš„æ‰“åŒ…å‘½ä»¤è„šæœ¬é…ç½®ï¼Œè®¾ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"build"</span>: <span class="hljs-string">"vite build"</span>
  },
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨æ ¹ç›®å½•è¿è¡Œæ‰“åŒ…å‘½ä»¤äº†ï¼š<code>pnpm build</code>ã€‚</p>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œæˆ‘ä»¬æˆåŠŸæ‰“åŒ…äº†æˆ‘ä»¬çš„ç»„ä»¶åº“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c195ef5bfdd043c2a61e6435e0d4c4f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891951&amp;x-signature=eH1wfsF7Js6BvqtC%2BDxoBL6n%2F%2Fs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">é€šè¿‡ pnpm å®‰è£…æœ¬åœ° npm åŒ…</h3>
<p>æ¥ç€æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">pnpm <span class="hljs-built_in">create</span> vite play <span class="hljs-comment">--template vue-ts</span>
</code></pre>
<p>ä¸Šè¿° play å°±æ˜¯æµ‹è¯•é¡¹ç›®ç›®å½•ï¼Œæˆ‘ä»¬åŸæœ¬å°±å»ºäº†ä¸€ä¸ª play ç›®å½•ï¼Œç°åœ¨è¿™æ¡å‘½ä»¤ä¼šç›´æ¥åœ¨ play ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ªä½¿ç”¨ Vite åˆ›å»ºçš„ Vue é¡¹ç›®ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬ä¿®æ”¹æ ¹ç›®å½•çš„ package.json æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- "main": "index.js",</span>
<span class="hljs-addition">+ "module": "/dist/index.mjs",</span>
</code></pre>
<p>æ¥ç€æˆ‘ä»¬è¿›å…¥ play ç›®å½•ï¼Œé€šè¿‡ pnpm å®‰è£…æœ¬åœ° npm åŒ…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> ../
</code></pre>
<p>è¿è¡Œå®Œä¸Šè¿°å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>./play/packages.json</code> æ–‡ä»¶å˜åŒ–å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3f21a2e6b8f4ee08a4a56ae78e9f51e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891951&amp;x-signature=Ncv1XBWGcAnuKu80OthFOvYu7JA%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æˆåŠŸæŠŠæˆ‘ä»¬æœ¬åœ°çš„ npm åŒ…å®‰è£…åˆ° play æµ‹è¯•é¡¹ç›®ä¸­äº†ã€‚</p>
<p>æ¥ç€ä¿®æ”¹ <code>./play/main.ts</code> å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CobyteViteUI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'cobyte-vite-ui'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'cobyte-vite-ui/dist/style.css'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">CobyteViteUI</span>)
app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<p>æˆ‘ä»¬ç›´æ¥å¼•ç”¨æˆ‘ä»¬æœ¬åœ°åˆ›å»ºçš„ npm åŒ…ã€‚</p>
<p>æ¥ç€ä¿®æ”¹ <code>./play/App.vue</code> å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">co-button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">co-button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æœ€åæˆ‘ä»¬è¿è¡Œ play æµ‹è¯•é¡¹ç›®ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74f6c189f9d44171887736447e2e142d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891951&amp;x-signature=Gm4jArr6V67Ej23r5YO1bv6KPWc%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆåŠŸè¿è¡Œäº†æœ¬åœ°ç»„ä»¶åº“çš„ npm åŒ…ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å¸Œæœ›ä¸è¿›è¡Œå®Œæ•´å¼•å…¥ç»„ä»¶åº“ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">import { createApp } from 'vue'
import App from './App.vue'
<span class="hljs-deletion">- import CobyteViteUI from 'cobyte-vite-ui'</span>
<span class="hljs-deletion">- import 'cobyte-vite-ui/dist/style.css'</span>

const app = createApp(App)
<span class="hljs-deletion">- app.use(CobyteViteUI)</span>
app.mount('#app')
</code></pre>
<p>å³ä¾¿è¿™æ ·æˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨æµ‹è¯•é¡¹ç›®ä¸­ä½¿ç”¨æˆ‘ä»¬çš„æµ‹è¯•ç»„ä»¶ã€‚</p>
<h3 data-id="heading-4">é€šè¿‡é™æ€åˆ†æå®ç°æŒ‰éœ€åŠ è½½</h3>
<p>æ ¹æ®ä¸Šæ–‡æˆ‘ä»¬çŸ¥é“ App.vue çš„æ¨¡æ¿å†…å®¹ä¼šè¢«ç¼–è¯‘æˆï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { resolveComponent <span class="hljs-keyword">as</span> _resolveComponent, createVNode <span class="hljs-keyword">as</span> _createVNode, openBlock <span class="hljs-keyword">as</span> _openBlock, createElementBlock <span class="hljs-keyword">as</span> _createElementBlock } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">_ctx, _cache, $props, $setup, $data, $options</span>) {
  <span class="hljs-keyword">const</span> _component_co_button = <span class="hljs-title function_">_resolveComponent</span>(<span class="hljs-string">"co-button"</span>)

  <span class="hljs-keyword">return</span> (<span class="hljs-title function_">_openBlock</span>(), <span class="hljs-title function_">_createElementBlock</span>(<span class="hljs-string">"template"</span>, <span class="hljs-literal">null</span>, [
    <span class="hljs-title function_">_createVNode</span>(_component_co_button)
  ]))
}
</code></pre>
<p>é‚£ä¹ˆæ ¹æ®ä¸Šæ–‡æˆ‘ä»¬çŸ¥é“éœ€è¦æŠŠ <code>_resolveComponent("co-button")</code> éƒ¨åˆ†æ›¿æ¢æˆå¯¹åº”çš„ç»„ä»¶å¯¹è±¡ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ import CoButton from 'cobyte-vite-ui/dist/components/button'</span>
<span class="hljs-addition">+ import 'cobyte-vite-ui/dist/style.css'</span>
import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from "vue"

export function render(_ctx, _cache, $props, $setup, $data, $options) {
<span class="hljs-deletion">-  const _component_co_button = _resolveComponent("co-button")</span>
<span class="hljs-addition">+  const _component_co_button = CoButton</span>

  return (_openBlock(), _createElementBlock("template", null, [
    _createVNode(_component_co_button)
  ]))
}
</code></pre>
<p>é‚£ä¹ˆè¦å®ç°ä¸Šè¿°åŠŸèƒ½ï¼Œæˆ‘ä»¬å¾—é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vitejs.dev%2Fguide%2Fapi-plugin" target="_blank" title="https://cn.vitejs.dev/guide/api-plugin" ref="nofollow noopener noreferrer">Vite æ’ä»¶</a>æ¥å®ç°ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢å®‰è£…äº†ä¸€ä¸ª <code>@vitejs/plugin-vue</code> æ’ä»¶ï¼Œè¿™ä¸ª Vite æ’ä»¶çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯æŠŠ <code>.vue</code> æ–‡ä»¶ç¼–è¯‘æˆä¸Šè¿°çš„ js å†…å®¹ã€‚é‚£ä¹ˆæˆ‘ä»¬è¿™æ ·åœ¨å®ƒçš„åé¢ç»§ç»­æ·»åŠ ä¸€ä¸ªæ’ä»¶åœ¨ç¼–è¯‘åçš„ js å†…å®¹ä¸­å»å®ç°ä¸Šè¿°æ›¿æ¢åŠŸèƒ½å³å¯ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>./packages/utils/index.ts</code> æ–‡ä»¶ä¸­å®ç°è¿™ä¸ªè‡ªåŠ¨åŠ è½½ç»„ä»¶çš„ Vite æ’ä»¶ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">MagicString</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'magic-string'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">VitePluginAutoComponents</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// æ’ä»¶åç§°ï¼Œç”¨äºè°ƒè¯•å’Œé”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-attr">name</span>: <span class="hljs-string">'vite-plugin-auto-component'</span>,

    <span class="hljs-comment">// transform é’©å­å‡½æ•°ï¼Œåœ¨è½¬æ¢æ¨¡å—æ—¶è°ƒç”¨</span>
    <span class="hljs-comment">// code: æ–‡ä»¶å†…å®¹ï¼Œid: æ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-title function_">transform</span>(<span class="hljs-params">code, id</span>) {
      <span class="hljs-comment">// ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸º.vueæ–‡ä»¶</span>
      <span class="hljs-comment">// å¦‚æœä¸æ˜¯.vueæ–‡ä»¶ï¼Œä¸è¿›è¡Œå¤„ç†</span>
      <span class="hljs-keyword">if</span>(<span class="hljs-regexp">/\.vue$/</span>.<span class="hljs-title function_">test</span>(id)) {
          <span class="hljs-comment">// åˆ›å»º MagicString å®ä¾‹ï¼Œç”¨äºé«˜æ•ˆåœ°ä¿®æ”¹å­—ç¬¦ä¸²å¹¶ç”Ÿæˆ source map</span>
          <span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MagicString</span>(code)
          <span class="hljs-comment">// åˆå§‹åŒ–ç»“æœæ•°ç»„ï¼Œç”¨äºå­˜å‚¨åŒ¹é…åˆ°çš„ç»„ä»¶ä¿¡æ¯</span>
          <span class="hljs-keyword">const</span> results = []

          <span class="hljs-comment">// ä½¿ç”¨ matchAll æ–¹æ³•æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„ resolveComponent è°ƒç”¨</span>
          <span class="hljs-comment">// æ­£åˆ™è¡¨è¾¾å¼è§£é‡Šï¼š</span>
          <span class="hljs-comment">// _?resolveComponent\d* - åŒ¹é…å¯èƒ½çš„å‡½æ•°åå˜ä½“ï¼ˆå¯èƒ½å¸¦ä¸‹åˆ’çº¿æˆ–æ•°å­—åç¼€ï¼‰</span>
          <span class="hljs-comment">// \("(.+?)"\) - åŒ¹é…æ‹¬å·å†…çš„å­—ç¬¦ä¸²å‚æ•°</span>
          <span class="hljs-comment">// g - å…¨å±€åŒ¹é…</span>
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> match <span class="hljs-keyword">of</span> code.<span class="hljs-title function_">matchAll</span>(<span class="hljs-regexp">/_?resolveComponent\d*\("(.+?)"\)/g</span>)) {
              <span class="hljs-comment">// match[1] æ˜¯ç¬¬ä¸€ä¸ªæ•è·ç»„ï¼Œå³ç»„ä»¶åç§°å­—ç¬¦ä¸²</span>
              <span class="hljs-keyword">const</span> matchedName = match[<span class="hljs-number">1</span>]
              <span class="hljs-comment">// æ£€æŸ¥åŒ¹é…æ˜¯å¦æœ‰æ•ˆï¼š</span>
              <span class="hljs-comment">// match.index != null - ç¡®ä¿æœ‰åŒ¹é…ä½ç½®</span>
              <span class="hljs-comment">// matchedName - ç¡®ä¿æ•è·åˆ°ç»„ä»¶å</span>
              <span class="hljs-comment">// !matchedName.startsWith('_') - ç¡®ä¿ç»„ä»¶åä¸ä»¥_å¼€å¤´ï¼ˆå¯èƒ½æ˜¯å†…éƒ¨ç»„ä»¶ï¼‰</span>
              <span class="hljs-keyword">if</span> (match.<span class="hljs-property">index</span> != <span class="hljs-literal">null</span> &amp;&amp; matchedName &amp;&amp; !matchedName.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'_'</span>)) {
                  <span class="hljs-comment">// è®¡ç®—åŒ¹é…å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®</span>
                  <span class="hljs-keyword">const</span> start = match.<span class="hljs-property">index</span>
                  <span class="hljs-comment">// è®¡ç®—åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®</span>
                  <span class="hljs-keyword">const</span> end = start + match[<span class="hljs-number">0</span>].<span class="hljs-property">length</span>
                  <span class="hljs-comment">// å°†åŒ¹é…ä¿¡æ¯å­˜å…¥ç»“æœæ•°ç»„</span>
                  results.<span class="hljs-title function_">push</span>({
                      <span class="hljs-attr">rawName</span>: matchedName,  <span class="hljs-comment">// åŸå§‹ç»„ä»¶åç§°</span>
                      <span class="hljs-comment">// åˆ›å»ºæ›¿æ¢å‡½æ•°ï¼Œä½¿ç”¨ MagicString çš„ overwrite æ–¹æ³•æ›¿æ¢æŒ‡å®šèŒƒå›´çš„æ–‡æœ¬</span>
                      <span class="hljs-attr">replace</span>: <span class="hljs-function"><span class="hljs-params">resolved</span> =&gt;</span> s.<span class="hljs-title function_">overwrite</span>(start, end, resolved),
                  })
              }
          }

          <span class="hljs-comment">// éå†æ‰€æœ‰åŒ¹é…ç»“æœè¿›è¡Œå¤„ç†</span>
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> { rawName, replace } <span class="hljs-keyword">of</span> results) {
              <span class="hljs-comment">// å®šä¹‰è¦æ›¿æ¢çš„å˜é‡åï¼ˆè¿™é‡Œæš‚æ—¶ç¼–ç ä¸º CoButtonï¼‰</span>
              <span class="hljs-keyword">const</span> varName = <span class="hljs-string">`CoButton`</span>
              <span class="hljs-comment">// åœ¨ä»£ç å¼€å¤´æ·»åŠ å¯¼å…¥è¯­å¥ï¼š</span>
              <span class="hljs-comment">// 1. å¯¼å…¥ CoButton ç»„ä»¶</span>
              <span class="hljs-comment">// 2. å¯¼å…¥æ ·å¼æ–‡ä»¶</span>
              s.<span class="hljs-title function_">prepend</span>(<span class="hljs-string">`import CoButton from 'cobyte-vite-ui/dist/components/button';\nimport 'cobyte-vite-ui/dist/style.css';\n`</span>)

              <span class="hljs-comment">// æ‰§è¡Œæ›¿æ¢ï¼šå°† resolveComponent("xxx") è°ƒç”¨æ›¿æ¢ä¸ºç»„ä»¶å˜é‡å</span>
              <span class="hljs-title function_">replace</span>(varName)
          }

          <span class="hljs-comment">// è¿”å›è½¬æ¢åçš„ä»£ç </span>
          <span class="hljs-keyword">return</span> {
              <span class="hljs-attr">code</span>: s.<span class="hljs-title function_">toString</span>(),  <span class="hljs-comment">// è½¬æ¢åçš„ä»£ç å­—ç¬¦ä¸²</span>
              <span class="hljs-attr">map</span>: <span class="hljs-literal">null</span>, 
          }
      }
    },
  }
}
</code></pre>
<p>æˆ‘ä»¬åœ¨ä¸Šè¿° Vite æ’ä»¶ä¸­ä½¿ç”¨åˆ°äº†ä¸€ä¸ªæ–°å·¥å…·åº“ <code>magic-string</code>ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸‹å®ƒçš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> magic-<span class="hljs-built_in">string</span> -D -w
</code></pre>
<p><code>magic-string</code>Â æ˜¯ä¸€ä¸ªä¸“æ³¨äºå­—ç¬¦ä¸²æ“ä½œï¼Œä¸»è¦ä½œç”¨æ˜¯å¯¹æºä»£ç å¯ä»¥è¿›è¡Œ<strong>ç²¾å‡†çš„æ’å…¥ã€åˆ é™¤ã€æ›¿æ¢ç­‰æ“ä½œ</strong>ã€‚</p>
<p>ä¸Šè¿°ç¼–å†™çš„ Vite çš„æ’ä»¶ä¸»è¦æ˜¯å®ç°åœ¨<code>.vue</code> æ–‡ä»¶ä¸­æŸ¥æ‰¾æ‰€æœ‰å½¢å¦‚ <code>resolveComponent("xxx")</code> çš„å‡½æ•°è°ƒç”¨ï¼Œå¯¹äºæ¯ä¸€ä¸ªæ‰¾åˆ°çš„è°ƒç”¨ï¼Œå®ƒä¼šåœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ ä¸€ä¸ªå›ºå®šçš„å¯¼å…¥è¯­å¥ï¼Œä¾‹å¦‚å¯¼å…¥ <code>CoButton</code> ç»„ä»¶å’Œæ ·å¼ã€‚æœ€åæŠŠæ‰¾åˆ°çš„<code>resolveComponent("xxx")</code> æ›¿æ¢æˆå¯¹åº”çš„ç»„ä»¶ï¼Œä¾‹å¦‚ <code>CoButton</code>ã€‚</p>
<p>ç„¶åæˆ‘ä»¬åœ¨æ ¹ç›®å½•é‡æ–°æ‰“åŒ…ï¼Œæ¥ç€åœ¨ play ç›®å½•ä¸­çš„ <code>vite.config.ts</code> æ–‡ä»¶ä¸­è¿›è¡Œä»¥ä¸‹ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
<span class="hljs-addition">+ import AutoComponents from 'cobyte-vite-ui/dist/utils'</span>

// https://vite.dev/config/
export default defineConfig({
<span class="hljs-deletion">-  plugins: [vue()],</span>
<span class="hljs-addition">+  plugins: [vue(), AutoComponents()],</span>
})
</code></pre>
<p>æ¥ç€æˆ‘ä»¬å†æ¬¡é‡å¯ play æµ‹è¯•é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å³ä¾¿æˆ‘ä»¬ä¸å¯¼å…¥ä»»ä½•æˆ‘ä»¬ç¼–å†™çš„ç»„ä»¶åº“è®¾ç½®ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥åœ¨ play é¡¹ç›®ä¸­æˆåŠŸä½¿ç”¨ <code>CoButton</code> ç»„ä»¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74f6c189f9d44171887736447e2e142d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891951&amp;x-signature=Gm4jArr6V67Ej23r5YO1bv6KPWc%3D" alt="image.png" loading="lazy"/></p>
<p>åŒæ—¶æˆ‘ä»¬åœ¨ç½‘ç»œçª—å£å¯ä»¥æŸ¥çœ‹åˆ° App.vue æ–‡ä»¶çš„å†…å®¹å˜åŒ–å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f36029b5c57d4c9ca82ddb0fecd2f3be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891951&amp;x-signature=9HKmjVIGmaHnjRhtNwhl00IzxsY%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°<strong>æˆ‘ä»¬é€šè¿‡é™æ€åˆ†æä»£ç ï¼Œè¯†åˆ«å¹¶æ›¿æ¢ Vue3 çš„ç»„ä»¶è§£æå‡½æ•°ï¼ŒæˆåŠŸå®ç°äº†ç»„ä»¶çš„è‡ªåŠ¨å¯¼å…¥åŠŸèƒ½</strong>ã€‚ä½†ä¸Šè¿°å®ç°ä¸ºäº†å¿«é€ŸéªŒè¯åŠŸèƒ½ï¼Œæ— è®ºåŒ¹é…åˆ°çš„ç»„ä»¶åæ˜¯ä»€ä¹ˆï¼Œéƒ½å¯¼å…¥ <code>CoButton</code> ç»„ä»¶ï¼Œå¹¶æ›¿æ¢ä¸º <code>CoButton</code>ã€‚è¿™æ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ï¼Œåº”è¯¥æ ¹æ®åŒ¹é…åˆ°çš„ç»„ä»¶ååŠ¨æ€å¯¼å…¥å¯¹åº”çš„ç»„ä»¶ã€‚</p>
<h3 data-id="heading-5">è‡ªåŠ¨åŒ–è·¯å¾„è§£æ</h3>
<p>å› ä¸ºæˆ‘ä»¬çš„ç»„ä»¶ç¼–è¯‘åçš„è°ƒç”¨å˜æˆ <code>_resolveComponent("co-button")</code>ï¼Œç»„ä»¶åç§°å˜æˆäº† <code>co-button</code>ï¼Œè€Œæˆ‘ä»¬åœ¨å¯¼å…¥çš„è¯­å¥æ˜¯è¿™æ ·çš„ <code>import CoButton from 'cobyte-vite-ui/dist/components/button'</code>ï¼Œç»„ä»¶åç§°åˆéœ€è¦å˜æˆ <code>CoButton</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠåŒ¹é…åˆ°çš„ <code>co-button</code> å˜æˆ <code>CoButton</code>ã€‚</p>
<p>ä»£ç è¿­ä»£å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¸•æ–¯å¡å‘½åï¼ˆå³å¤§é©¼å³°ï¼Œæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼‰</span>
<span class="hljs-addition">+ export function pascalCase(str: string) {</span>
<span class="hljs-addition">+    return capitalize(camelCase(str))</span>
<span class="hljs-addition">+ }</span>
<span class="hljs-addition">+ // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºé©¼å³°å‘½å  </span>
<span class="hljs-addition">+ export function camelCase(str: string) {</span>
<span class="hljs-addition">+    return str.replace(/-(\w)/g, (_, c) =&gt; (c ? c.toUpperCase() : ''))</span>
<span class="hljs-addition">+ }</span>
<span class="hljs-addition">+ // å°†å­—ç¬¦ä¸²çš„é¦–å­—æ¯å¤§å†™ï¼Œä½¿ç”¨ charAt(0) è·å–ç¬¬ä¸€ä¸ªå­—ç¬¦å¹¶è½¬æ¢ä¸ºå¤§å†™ï¼Œç„¶ååŠ ä¸Šå‰©ä½™å­—ç¬¦ä¸²ï¼ˆä»ç´¢å¼•1å¼€å§‹ï¼‰</span>
<span class="hljs-addition">+ export function capitalize(str: string) {</span>
<span class="hljs-addition">+    return str.charAt(0).toUpperCase() + str.slice(1)</span>
<span class="hljs-addition">+ }</span>

export default function VitePluginAutoComponents() {
    return {
      // æ’ä»¶åç§°ï¼Œç”¨äºè°ƒè¯•å’Œé”™è¯¯ä¿¡æ¯
      name: 'vite-plugin-auto-component',
  
      // transform é’©å­å‡½æ•°ï¼Œåœ¨è½¬æ¢æ¨¡å—æ—¶è°ƒç”¨
      // code: æ–‡ä»¶å†…å®¹ï¼Œid: æ–‡ä»¶è·¯å¾„
      transform(code, id) {
        // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸º.vueæ–‡ä»¶
        // å¦‚æœä¸æ˜¯.vueæ–‡ä»¶ï¼Œä¸è¿›è¡Œå¤„ç†
        if(/\.vue$/.test(id)) {
            // çœç•¥...
  
            // éå†æ‰€æœ‰åŒ¹é…ç»“æœè¿›è¡Œå¤„ç†
            for (const { rawName, replace } of results) {
<span class="hljs-addition">+                // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§é©¼å³°</span>
<span class="hljs-addition">+                const name = pascalCase(rawName)</span>
<span class="hljs-addition">+                // åªå¤„ç† Co å¼€å¤´çš„ç»„ä»¶</span>
<span class="hljs-addition">+                if (!name.match(/^Co[A-Z]/)) return</span>
                // å®šä¹‰è¦æ›¿æ¢çš„å˜é‡å
<span class="hljs-deletion">-                const varName = `CoButton`</span>
<span class="hljs-addition">+                const varName = name</span>
                // åœ¨ä»£ç å¼€å¤´æ·»åŠ å¯¼å…¥è¯­å¥ï¼š
                // 1. å¯¼å…¥ CoButton ç»„ä»¶
                // 2. å¯¼å…¥æ ·å¼æ–‡ä»¶
                s.prepend(`\nimport ${varName} from 'cobyte-vite-ui/dist/components/button';\nimport 'cobyte-vite-ui/dist/style.css';\n`)
  
                // æ‰§è¡Œæ›¿æ¢ï¼šå°† resolveComponent("xxx") è°ƒç”¨æ›¿æ¢ä¸ºç»„ä»¶å˜é‡å
                replace(varName)
            }
  
            // è¿”å›è½¬æ¢åçš„ä»£ç 
            return {
                code: s.toString(),  // è½¬æ¢åçš„ä»£ç å­—ç¬¦ä¸²
                map: null, 
            }
        }
      },
    }
}
</code></pre>
<p>ç»è¿‡ä¸Šè¿°å®ç°è¿˜æ˜¯å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼Œæ— è®ºÂ <code>rawName</code>Â æ˜¯ä»€ä¹ˆï¼Œç»„ä»¶éƒ½æ˜¯ä»Â <code>'cobyte-vite-ui/dist/components/button'</code>Â è¿™ä¸ªå›ºå®šè·¯å¾„å¯¼å…¥ã€‚è¿™æ„å‘³ç€å³ä½¿ä½¿ç”¨äº†Â <code>resolveComponent("CoTable")</code>ï¼Œæ’ä»¶ä¾ç„¶ä¼šå°è¯•ä»Â <code>button</code>Â æ–‡ä»¶å¯¼å…¥ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå¯¼å…¥è·¯å¾„åº”æ ¹æ®ç»„ä»¶ååŠ¨æ€ç”Ÿæˆã€‚æ‰€ä»¥æˆ‘ä»¬ç»§ç»­å®ç°åŠ¨æ€ç»„ä»¶è·¯å¾„ï¼Œä¾‹å¦‚Â <code>CoTableColumn</code>Â ç»„ä»¶æ˜ å°„åˆ°Â <code>'cobyte-vite-ui/dist/components/table-column'</code>ã€‚</p>
<p>æˆ‘ä»¬ä¸Šè¿°çš„ç»„ä»¶æ˜¯ "CoButton"ï¼Œé‚£ä¹ˆè½¬æ¢è¿‡ç¨‹åˆ™æ˜¯ï¼š<br/>
"CoButton" -&gt; å»æ‰"Co" -&gt; "Button" -&gt; kebabCase -&gt; "button"ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡å®ç°ä¸€ä¸ª kebabCase å‡½æ•°è¿›è¡Œç»„ä»¶è·¯å¾„è½¬æ¢è§£æï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">// çœç•¥...

<span class="hljs-addition">+ // å°†é©¼å³°å‘½åçš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºçŸ­æ¨ªçº¿åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ˆå³kebab-caseï¼‰</span>
<span class="hljs-addition">+ export function kebabCase(key: string) {</span>
<span class="hljs-addition">+    const result = key.replace(/([A-Z])/g, ' $1').trim()</span>
<span class="hljs-addition">+    return result.split(' ').join('-').toLowerCase()</span>
<span class="hljs-addition">+ }</span>

export default function VitePluginAutoComponents() {
    return {
      // æ’ä»¶åç§°ï¼Œç”¨äºè°ƒè¯•å’Œé”™è¯¯ä¿¡æ¯
      name: 'vite-plugin-auto-component',
  
      // transform é’©å­å‡½æ•°ï¼Œåœ¨è½¬æ¢æ¨¡å—æ—¶è°ƒç”¨
      // code: æ–‡ä»¶å†…å®¹ï¼Œid: æ–‡ä»¶è·¯å¾„
      transform(code, id) {
        // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸º.vueæ–‡ä»¶
        // å¦‚æœä¸æ˜¯.vueæ–‡ä»¶ï¼Œä¸è¿›è¡Œå¤„ç†
        if(/\.vue$/.test(id)) {
            // çœç•¥...
  
            // éå†æ‰€æœ‰åŒ¹é…ç»“æœè¿›è¡Œå¤„ç†
            for (const { rawName, replace } of results) {
                // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§é©¼å³°
                const name = pascalCase(rawName)
                // åªå¤„ç† Co å¼€å¤´çš„ç»„ä»¶
                if (!name.match(/^Co[A-Z]/)) return
<span class="hljs-addition">+                // ç»„ä»¶è·¯å¾„è½¬æ¢</span>
<span class="hljs-addition">+                const partialName = kebabCase(name.slice(2))</span>
                // å®šä¹‰è¦æ›¿æ¢çš„å˜é‡å
                const varName = name
                // åœ¨ä»£ç å¼€å¤´æ·»åŠ å¯¼å…¥è¯­å¥ï¼š
                // 1. å¯¼å…¥ CoButton ç»„ä»¶
                // 2. å¯¼å…¥æ ·å¼æ–‡ä»¶
<span class="hljs-deletion">-                s.prepend(`\nimport ${varName} from 'cobyte-vite-ui/dist/components/button';\nimport 'cobyte-vite-ui/dist/style.css';\n`)</span>
<span class="hljs-addition">+                s.prepend(`\nimport ${varName} from 'cobyte-vite-ui/dist/components/${partialName}';\nimport 'cobyte-vite-ui/dist/style.css';\n`)</span>
  
                // æ‰§è¡Œæ›¿æ¢ï¼šå°† resolveComponent("xxx") è°ƒç”¨æ›¿æ¢ä¸ºç»„ä»¶å˜é‡å
                replace(varName)
            }
  
            // è¿”å›è½¬æ¢åçš„ä»£ç 
            return {
                code: s.toString(),  // è½¬æ¢åçš„ä»£ç å­—ç¬¦ä¸²
                map: null, 
            }
        }
      },
    }
}
</code></pre>
<p>ç»è¿‡ä¸Šè¿°è¿­ä»£åï¼Œæˆ‘ä»¬é‡æ–°æ‰“åŒ…ï¼Œé‡æ–°å¯åŠ¨ play æµ‹è¯•é¡¹ç›®ï¼Œæˆ‘ä»¬å‘ç°æˆ‘ä»¬çš„ä»£ç æ˜¯èƒ½å¤Ÿæ­£å¸¸è¿è¡Œçš„ï¼Œè¯´æ˜æˆ‘ä»¬ä¸Šè¿°çš„è¿­ä»£æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚<strong>è‡³æ­¤æˆ‘ä»¬ä¸ºç»„ä»¶è‡ªåŠ¨å¯¼å…¥æä¾›äº†æ ¸å¿ƒçš„è·¯å¾„è§£æèƒ½åŠ›</strong>ã€‚</p>
<h3 data-id="heading-6">å¼•å…¥è§£æå™¨ (Resolver) æ¦‚å¿µ</h3>
<p>å½“å‰æ’ä»¶ç¡¬ç¼–ç äº†ç»„ä»¶åº“çš„è·¯å¾„å’Œæ ·å¼æ–‡ä»¶ï¼Œåªèƒ½ç”¨äºç‰¹å®šçš„ç»„ä»¶åº“ï¼ˆcobyte-vite-uiï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥è§£æå™¨(Resolver)ï¼Œè®©æ’ä»¶æ”¯æŒä¸åŒçš„ç»„ä»¶åº“ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦é…ç½®ä¸åŒçš„è§£æå™¨ã€‚</p>
<p>è§£æå™¨çš„ä½œç”¨æ˜¯æ ¹æ®ç»„ä»¶åè¿”å›ä¸€ä¸ªè§£æç»“æœï¼ŒåŒ…æ‹¬ç»„ä»¶çš„å¯¼å…¥è·¯å¾„å’Œæ ·å¼æ–‡ä»¶è·¯å¾„ä»¥åŠç»„ä»¶åŸå§‹åç§°ã€‚è¿™æ ·ï¼Œæ’ä»¶å°±å¯ä»¥é€šè¿‡è§£æå™¨è¿”å›çš„å¯¹è±¡ä¿¡æ¯åŠ¨æ€è·å–ç»„ä»¶çš„å¯¼å…¥ä¿¡æ¯ï¼Œè€Œä¸æ˜¯å›ºå®šå†™æ­»ã€‚</p>
<p>åœ¨å®ç°è§£æå™¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè®¾è®¡è§£æå™¨è¿”å›çš„å¯¹è±¡ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> component = {
    name, <span class="hljs-comment">// ç»„ä»¶åŸå§‹åç§°</span>
    <span class="hljs-attr">from</span>: <span class="hljs-string">`cobyte-vite-ui/dist/components/<span class="hljs-subst">${partialName}</span>`</span>, <span class="hljs-comment">// ç»„ä»¶çš„å¯¼å…¥è·¯å¾„</span>
    <span class="hljs-attr">sideEffects</span>: [<span class="hljs-string">'cobyte-vite-ui/dist/style.css'</span>] <span class="hljs-comment">// ç»„ä»¶çš„æ ·å¼æ–‡ä»¶è·¯å¾„</span>
}
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ</p>
<ol>
<li>ç»„ä»¶å (name):<br/>
ç”¨äºåœ¨å¯¼å…¥è¯­å¥ä¸­ä½œä¸ºæ ‡è¯†ç¬¦ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯å¸•æ–¯å¡å‘½åï¼Œå› ä¸ºå®ƒåœ¨ Vue ä¸­é€šå¸¸ç”¨äºç»„ä»¶æ³¨å†Œå’Œæ¨¡æ¿ä¸­ã€‚</li>
<li>å¯¼å…¥è·¯å¾„ (from):<br/>
è¿™é‡Œä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²åŠ¨æ€æ„å»ºå¯¼å…¥è·¯å¾„ã€‚å…¶ä¸­ï¼Œ<code>partialName</code>Â æ˜¯é€šè¿‡å°†ç»„ä»¶åå»æ‰å‰ä¸¤ä¸ªå­—ç¬¦ï¼ˆå³å»æ‰"Co"ï¼‰å¹¶è½¬æ¢ä¸º kebab-case å¾—åˆ°çš„ã€‚<br/>
ä¾‹å¦‚ï¼Œç»„ä»¶å "CoTableColumn" è½¬æ¢ä¸º "table-column"ï¼Œç„¶åæ‹¼æ¥æˆè·¯å¾„ 'cobyte-vite-ui/dist/components/table-column'ã€‚<br/>
è¿™æ ·è®¾è®¡æ˜¯å› ä¸ºç»„ä»¶åº“çš„ç›®å½•ç»“æ„å¯èƒ½æ˜¯æŒ‰ç…§ kebab-case å‘½åçš„ï¼Œè€Œç»„ä»¶åœ¨ä»£ç ä¸­æ˜¯ä»¥å¸•æ–¯å¡å‘½åä½¿ç”¨çš„ã€‚</li>
<li>å‰¯ä½œç”¨ (sideEffects):<br/>
è¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒæŒ‡å®šåœ¨å¯¼å…¥ç»„ä»¶æ—¶éœ€è¦åŒæ—¶å¯¼å…¥çš„æ ·å¼æ–‡ä»¶æˆ–å…¶ä»–èµ„æºã€‚è¿™é‡ŒæŒ‡å®šäº†ç»„ä»¶åº“çš„å…¨å±€æ ·å¼æ–‡ä»¶ã€‚<br/>
æ³¨æ„ï¼šè¿™ä¸ªæ ·å¼æ–‡ä»¶æ˜¯å…¨å±€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡å¯¼å…¥å“ªä¸ªç»„ä»¶ï¼Œéƒ½ä¼šå¯¼å…¥æ•´ä¸ªç»„ä»¶åº“çš„æ ·å¼ã€‚è¿™å¯èƒ½ä¼šé€ æˆæ ·å¼å†—ä½™ã€‚<br/>
æ›´ç²¾ç»†çš„åšæ³•æ˜¯ä¸ºæ¯ä¸ªç»„ä»¶æŒ‡å®šå…¶å¯¹åº”çš„æ ·å¼æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š<br/>
sideEffects: [<code>cobyte-vite-ui/dist/components/${partialName}/style.css</code>]</li>
</ol>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬å½“å‰ç»„ä»¶åº“æ²¡æœ‰ä¸ºæ¯ä¸ªç»„ä»¶å•ç‹¬æä¾›æ ·å¼æ–‡ä»¶ï¼Œæˆ‘ä»¬åªæä¾›äº†å›ºå®šçš„å…¨å±€æ ·å¼æ–‡ä»¶ã€‚</p>
<p>ä¸Šé¢è®¾è®¡è§£æå™¨è¿”å›çš„å¯¹è±¡å°è£…äº†ç»„ä»¶çš„å®Œæ•´å¯¼å…¥ä¿¡æ¯ï¼Œä½œä¸ºæ•°æ®è½½ä½“ä¼ é€’ç»™åç»­å¤„ç†å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºæ­¤è¿›è¡Œè¿­ä»£ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">// çœç•¥...

<span class="hljs-addition">+ // æ ¹æ®ä¼ å…¥çš„ä¿¡æ¯ç”Ÿæˆå¯¹åº”çš„å¯¼å…¥è¯­å¥å­—ç¬¦ä¸²</span>
<span class="hljs-addition">+ export function stringifyImport(info) {</span>
<span class="hljs-addition">+    if (typeof info === 'string')</span>
<span class="hljs-addition">+      return `import '${info}'`</span>
<span class="hljs-addition">+    if (!info.as)</span>
<span class="hljs-addition">+      return `import '${info.from}'`</span>
<span class="hljs-addition">+    else if (info.name)</span>
<span class="hljs-addition">+      return `import { ${info.name} as ${info.as} } from '${info.from}'`</span>
<span class="hljs-addition">+    else</span>
<span class="hljs-addition">+      return `import ${info.as} from '${info.from}'`</span>
<span class="hljs-addition">+ }</span>
<span class="hljs-addition">+ // æ ¹æ®ç»„ä»¶çš„å¯¼å…¥ä¿¡æ¯ç”Ÿæˆå®Œæ•´çš„å¯¼å…¥è¯­å¥ï¼ŒåŒ…æ‹¬ç»„ä»¶æœ¬èº«çš„å¯¼å…¥å’Œå…¶å‰¯ä½œç”¨ï¼ˆå¦‚æ ·å¼æ–‡ä»¶ï¼‰çš„å¯¼å…¥ã€‚</span>
<span class="hljs-addition">+ export function stringifyComponentImport({ as: name, from: path, name: importName, sideEffects }) {</span>
<span class="hljs-addition">+    const imports = [</span>
<span class="hljs-addition">+      // ç”Ÿæˆç»„ä»¶å¯¼å…¥è¯­å¥</span>
<span class="hljs-addition">+      stringifyImport({ as: name, from: path, name: importName }),</span>
<span class="hljs-addition">+    ]</span>
  
<span class="hljs-addition">+    if (sideEffects) {</span>
<span class="hljs-addition">+      // ç”Ÿæˆå‰¯ä½œç”¨å¯¼å…¥è¯­å¥</span>
<span class="hljs-addition">+      sideEffects.forEach(i =&gt; imports.push(stringifyImport(i)))</span>
<span class="hljs-addition">+    }</span>
  
<span class="hljs-addition">+    return imports.join(';')</span>
<span class="hljs-addition">+ }</span>

  export default function VitePluginAutoComponents() {
    return {
      // æ’ä»¶åç§°ï¼Œç”¨äºè°ƒè¯•å’Œé”™è¯¯ä¿¡æ¯
      name: 'vite-plugin-auto-component',
  
      // transform é’©å­å‡½æ•°ï¼Œåœ¨è½¬æ¢æ¨¡å—æ—¶è°ƒç”¨
      // code: æ–‡ä»¶å†…å®¹ï¼Œid: æ–‡ä»¶è·¯å¾„
      transform(code, id) {
        // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸º.vueæ–‡ä»¶
        // å¦‚æœä¸æ˜¯.vueæ–‡ä»¶ï¼Œä¸è¿›è¡Œå¤„ç†
        if(/\.vue$/.test(id)) {
            // çœç•¥...
<span class="hljs-addition">+            let no = 0</span>
            // éå†æ‰€æœ‰åŒ¹é…ç»“æœè¿›è¡Œå¤„ç†
            for (const { rawName, replace } of results) {
                // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§é©¼å³°
                const name = pascalCase(rawName)
                // åªå¤„ç† Co å¼€å¤´çš„ç»„ä»¶
                if (!name.match(/^Co[A-Z]/)) return
                // ç»„ä»¶è·¯å¾„è½¬æ¢
                const partialName = kebabCase(name.slice(2))
<span class="hljs-addition">+                // å°è£…äº†ç»„ä»¶çš„å®Œæ•´å¯¼å…¥ä¿¡æ¯ï¼Œä½œä¸ºæ•°æ®è½½ä½“ä¼ é€’ç»™åç»­å¤„ç†å‡½æ•°</span>
<span class="hljs-addition">+                const component = {</span>
<span class="hljs-addition">+                    name,</span>
<span class="hljs-addition">+                    from: `cobyte-vite-ui/dist/components/${partialName}`,</span>
<span class="hljs-addition">+                    sideEffects: ['cobyte-vite-ui/dist/style.css']</span>
<span class="hljs-addition">+                }</span>
<span class="hljs-deletion">-                // å®šä¹‰è¦æ›¿æ¢çš„å˜é‡åï¼ˆè¿™é‡Œæš‚æ—¶ç¼–ç ä¸º CoButtonï¼‰</span>
<span class="hljs-deletion">-                const varName = name</span>
<span class="hljs-addition">+                // ä½¿ç”¨ç‰¹æ®Šå‰ç¼€å‡å°‘ä¸ç”¨æˆ·å˜é‡çš„å†²çªï¼Œä»¥åŠä½¿ç”¨é€’å¢çš„åºå·ï¼Œä¿è¯å”¯ä¸€æ€§ï¼Œé¿å…å˜é‡åå†²çª</span>
<span class="hljs-addition">+                const varName = `__unplugin_components_${no}`</span>
                // åœ¨ä»£ç å¼€å¤´æ·»åŠ å¯¼å…¥è¯­å¥ï¼š
                // 1. å¯¼å…¥ CoButton ç»„ä»¶
                // 2. å¯¼å…¥æ ·å¼æ–‡ä»¶
<span class="hljs-deletion">-                 s.prepend(`\nimport ${varName} from 'cobyte-vite-ui/dist/components/${partialName}';\nimport 'cobyte-vite-ui/dist/style.css';\n`)</span>
<span class="hljs-addition">+                // è¿™é‡Œå°† component å¯¹è±¡å±•å¼€ï¼Œå¹¶æ·»åŠ  as: varName å‚æ•°ï¼Œå½¢æˆå®Œæ•´çš„å¯¼å…¥é…ç½®</span>
<span class="hljs-addition">+                s.prepend(`${stringifyComponentImport({ ...component, as: varName })};\n`)</span>
<span class="hljs-addition">+                no += 1</span>
                // æ‰§è¡Œæ›¿æ¢ï¼šå°† resolveComponent("xxx") è°ƒç”¨æ›¿æ¢ä¸ºç»„ä»¶å˜é‡å
                replace(varName)
            }
  
            // è¿”å›è½¬æ¢åçš„ä»£ç 
            return {
                code: s.toString(),  // è½¬æ¢åçš„ä»£ç å­—ç¬¦ä¸²
                map: null, 
            }
        }
      },
    }
}
</code></pre>
<p>æˆ‘ä»¬æ·»åŠ äº†æ ¹æ®ä¼ å…¥çš„ä¿¡æ¯ç”Ÿæˆå¯¹åº”çš„å¯¼å…¥è¯­å¥å­—ç¬¦ä¸²çš„ <code>stringifyImport</code> å‡½æ•°å’Œæ ¹æ®ç»„ä»¶çš„å¯¼å…¥ä¿¡æ¯ç”Ÿæˆå®Œæ•´çš„å¯¼å…¥è¯­å¥ï¼ŒåŒ…æ‹¬ç»„ä»¶æœ¬èº«çš„å¯¼å…¥å’Œå…¶å‰¯ä½œç”¨ï¼ˆå¦‚æ ·å¼æ–‡ä»¶ï¼‰çš„å¯¼å…¥çš„ <code>stringifyComponentImport</code> å‡½æ•°ã€‚å…¶ä¸­ stringifyImport å¤„ç†å•ä¸€å¯¼å…¥è¯­å¥ï¼Œ<code>stringifyComponentImport</code> å¤„ç†ç»„åˆå¤šä¸ªç›¸å…³å¯¼å…¥ï¼Œå®ç°äº†èŒè´£åˆ†ç¦»å’Œé…ç½®çµæ´»çš„è®¾è®¡ä¼˜åŠ¿ã€‚è¿™ä¸¤ä¸ªå‡½æ•°å…±åŒæ„æˆäº†ä¸€ä¸ªçµæ´»çš„å¯¼å…¥è¯­å¥ç”Ÿæˆç³»ç»Ÿï¼Œä¸ºè‡ªåŠ¨å¯¼å…¥æ’ä»¶æä¾›äº†å¼ºå¤§çš„ä»£ç ç”Ÿæˆèƒ½åŠ›ã€‚</p>
<p>æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªè§£æç»“æœåŒ…æ‹¬ï¼š<code>name</code>ï¼ˆç»„ä»¶åï¼‰ã€<code>from</code>ï¼ˆå¯¼å…¥è·¯å¾„ï¼‰ã€<code>sideEffects</code>ï¼ˆæ ·å¼ç­‰å‰¯ä½œç”¨å¯¼å…¥ï¼‰çš„æ•°æ®ç»“æ„å¯¹è±¡ <code>component</code> ä½œä¸ºæ•°æ®è½½ä½“ä¼ é€’ç»™åç»­å¤„ç†å‡½æ•°ï¼Œåç»­ç¨‹åºåŸºäºæ­¤æ¥ç”Ÿæˆå¯¼å…¥è¯­å¥å’Œæ›¿æ¢ä»£ç ã€‚</p>
<p>å…¶ä¸­å˜é‡åç”Ÿæˆç­–ç•¥ä½¿ç”¨ç‰¹æ®Šå‰ç¼€å‡å°‘ä¸ç”¨æˆ·å˜é‡çš„å†²çªä»è€Œ<strong>é¿å…æ±¡æŸ“</strong>ï¼ŒåŒæ—¶ä½¿ç”¨é€’å¢åºå·æ¥<strong>ä¿è¯å”¯ä¸€æ€§</strong>ã€‚</p>
<p>æœ€ç»ˆæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåŸºäºæ•°æ®é©±åŠ¨çš„æ¶æ„ï¼Œå°†æ¥è§£æå™¨åªè´Ÿè´£è¯†åˆ«ç»„ä»¶å’Œè¿”å›è·¯å¾„çš„æ•°æ®ä¿¡æ¯ï¼Œç„¶åå¯¼å…¥ç”Ÿæˆå™¨å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°çš„ <code>stringifyComponentImport</code> å’Œ <code>stringifyImport</code> è´Ÿè´£æ ¹æ®é…ç½®ç”Ÿæˆå¯¼å…¥ä»£ç ï¼Œæˆ‘ä»¬æ•´ä½“çš„ Vite æ’ä»¶å°±åªè´Ÿè´£åè°ƒæµç¨‹å’Œä»£ç ä¿®æ”¹ã€‚</p>
<p>è¿™ç§æ¶æ„ä¸ºåç»­å¼•å…¥çœŸæ­£çš„å¤šè§£æå™¨æ”¯æŒå¥ å®šäº†è‰¯å¥½åŸºç¡€ï¼Œåªéœ€è¦å°†ç¡¬ç¼–ç çš„è§£æé€»è¾‘æ›¿æ¢ä¸ºå¯é…ç½®çš„è§£æå™¨æ•°ç»„å³å¯ã€‚</p>
<h3 data-id="heading-7">å®ç°è§£æå™¨ (Resolver)</h3>
<p>æˆ‘ä»¬å¼•å…¥è§£æå™¨æ˜¯ä¸ºäº†æé«˜æ’ä»¶çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚å½“å‰æ’ä»¶ç¡¬ç¼–ç äº†ç»„ä»¶åº“çš„è·¯å¾„å’Œæ ·å¼æ–‡ä»¶ï¼Œåªèƒ½ç”¨äºç‰¹å®šçš„ç»„ä»¶åº“ï¼ˆcobyte-vite-uiï¼‰ã€‚é€šè¿‡å¼•å…¥è§£æå™¨ï¼Œæˆ‘ä»¬å¯ä»¥è®©æ’ä»¶æ”¯æŒä¸åŒçš„ç»„ä»¶åº“ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦é…ç½®ä¸åŒçš„è§£æå™¨ã€‚</p>
<p>è§£æå™¨çš„ä½œç”¨æ˜¯æ ¹æ®ç»„ä»¶åè¿”å›ä¸€ä¸ªè§£æç»“æœï¼ŒåŒ…æ‹¬ç»„ä»¶çš„å¯¼å…¥è·¯å¾„å’Œæ ·å¼æ–‡ä»¶è·¯å¾„ç­‰ã€‚è¿™æ ·ï¼Œæ’ä»¶å°±å¯ä»¥é€šè¿‡è§£æå™¨æ¥åŠ¨æ€è·å–ç»„ä»¶çš„å¯¼å…¥ä¿¡æ¯ï¼Œè€Œä¸æ˜¯å›ºå®šå†™æ­»ã€‚</p>
<p>æ”¹é€ æ­¥éª¤ï¼š</p>
<ol>
<li>ä¿®æ”¹æ’ä»¶å‡½æ•°ï¼Œä½¿å…¶å¯ä»¥æ¥å—ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ï¼Œé€‰é¡¹ä¸­åŒ…å«è§£æå™¨æ•°ç»„ã€‚</li>
<li>åœ¨æ’ä»¶å†…éƒ¨ï¼Œéå†è§£æå™¨æ•°ç»„ï¼Œå¯¹æ¯ä¸ªç»„ä»¶åå°è¯•ä½¿ç”¨è§£æå™¨è¿›è¡Œè§£æã€‚</li>
<li>å¦‚æœæŸä¸ªè§£æå™¨è¿”å›äº†ç»“æœï¼Œåˆ™ä½¿ç”¨è¯¥ç»“æœæ¥ç”Ÿæˆå¯¼å…¥è¯­å¥ã€‚</li>
<li>å¦‚æœæ²¡æœ‰è§£æå™¨åŒ¹é…ï¼Œå¯ä»¥è·³è¿‡è¯¥ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€æ±‚åšå…¶ä»–å¤„ç†ã€‚</li>
</ol>
<p>å‚è€ƒ <code>NaiveUi</code> åŸºäº <code>unplugin-vue-components</code> å®ç°çš„è§£æå™¨ç»“æ„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">NaiveUiResolver</span>(<span class="hljs-params"/>): <span class="hljs-title class_">ComponentResolver</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'component'</span>,
    <span class="hljs-attr">resolve</span>: <span class="hljs-function">(<span class="hljs-params">name: string</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (name.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^(N[A-Z]|n-[a-z])/</span>))
        <span class="hljs-keyword">return</span> { name, <span class="hljs-attr">from</span>: <span class="hljs-string">'naive-ui'</span>, <span class="hljs-attr">sideEffects</span>: [] }
    },
  }
}
</code></pre>
<ul>
<li>è§£æå™¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä¸€ä¸ª<code>resolve</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ç»„ä»¶åï¼Œè¿”å›ä¸€ä¸ªè§£æç»“æœå¯¹è±¡æˆ–undefinedã€‚</li>
<li>è§£æç»“æœå¯¹è±¡åŒ…æ‹¬ï¼š<code>name</code>ï¼ˆç»„ä»¶åï¼Œå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨åŸå§‹åï¼‰ï¼Œ<code>from</code>ï¼ˆå¯¼å…¥è·¯å¾„ï¼‰ï¼Œ<code>sideEffects</code>ï¼ˆæ ·å¼æ–‡ä»¶è·¯å¾„ç­‰ï¼Œå¯é€‰ï¼‰</li>
</ul>
<p>æˆ‘ä»¬è¿˜å¯ä»¥æ”¯æŒå¤šç§è§£æå™¨ï¼Œè¿™æ ·æ’ä»¶å¯ä»¥åŒæ—¶æ”¯æŒå¤šä¸ªç»„ä»¶åº“ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæ€è·¯æ”¹é€ æ’ä»¶ä»£ç ã€‚é¦–å…ˆåŸºäºä¸Šè¿° <code>NaiveUi</code> çš„è§£æå™¨å®ç°æˆ‘ä»¬çš„æµ‹è¯•ç»„ä»¶çš„è§£æå™¨ï¼Œ<code>./packages/utils/index.ts</code> æ–°å¢ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è§£æå™¨å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CobyteViteUiResolver</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'component'</span>,
    <span class="hljs-attr">resolve</span>: <span class="hljs-function">(<span class="hljs-params">name: string</span>) =&gt;</span> {
      <span class="hljs-comment">// åªå¤„ç† Co å¼€å¤´çš„ç»„ä»¶</span>
      <span class="hljs-keyword">if</span> (name.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^Co[A-Z]/</span>)) {
        <span class="hljs-keyword">const</span> partialName = <span class="hljs-title function_">kebabCase</span>(name.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>)) <span class="hljs-comment">// CoTableColumn -&gt; table-column</span>
        <span class="hljs-keyword">return</span> { 
          name, 
          <span class="hljs-attr">from</span>: <span class="hljs-string">`cobyte-vite-ui/dist/components/<span class="hljs-subst">${partialName}</span>`</span>, 
          <span class="hljs-attr">sideEffects</span>: [<span class="hljs-string">'cobyte-vite-ui/dist/style.css'</span>] 
        }
      }
    },
  }
}
</code></pre>
<p>æ¥ä¸‹æ¥ä¿®æ”¹æ’ä»¶å‡½æ•°ï¼Œä½¿å…¶å¯ä»¥æ¥å—ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ï¼Œé€‰é¡¹ä¸­åŒ…å«è§£æå™¨æ•°ç»„ï¼Œé‡‡ç”¨ä¸Šä¸‹æ–‡ç®¡ç†ï¼Œå› æ­¤æˆ‘ä»¬å¼•å…¥ Context ç±»ï¼Œåˆ›å»º Context ç±»æ¥ç®¡ç†æ’ä»¶é…ç½®å’Œè§£æå™¨ï¼Œå¹¶ç¼“å­˜è§£æç»“æœï¼Œæ¥ç€åœ¨ transform é’©å­ä¸­ï¼Œä½¿ç”¨ Context å®ä¾‹æ¥æŸ¥æ‰¾ç»„ä»¶ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç è§£æé€»è¾‘ã€‚</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ export class Context {</span>
<span class="hljs-addition">+  options: any;</span>
<span class="hljs-addition">+  private _componentNameMap = {} // ç»„ä»¶ç¼“å­˜</span>
<span class="hljs-addition">+  constructor(private rawOptions: any) {</span>
<span class="hljs-addition">+    this.options = rawOptions</span>
<span class="hljs-addition">+  }</span>

<span class="hljs-addition">+  async findComponent(name: string) {</span>
<span class="hljs-addition">+    // 1. æ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦æœ‰è¯¥ç»„ä»¶çš„ä¿¡æ¯</span>
<span class="hljs-addition">+    let info = this._componentNameMap[name]</span>
<span class="hljs-addition">+    if (info) {</span>
<span class="hljs-addition">+      return info // ç¼“å­˜å‘½ä¸­ï¼Œç›´æ¥è¿”å›</span>
<span class="hljs-addition">+    }</span>
<span class="hljs-addition">+    // 2. éå†æ‰€æœ‰è§£æå™¨</span>
<span class="hljs-addition">+    for (const resolver of this.options.resolvers) {</span>
<span class="hljs-addition">+      const result = await resolver.resolve(name)</span>
<span class="hljs-addition">+      // 3. åˆ¤æ–­è§£æå™¨æ˜¯å¦è¿”å›äº†ç»“æœ</span>
<span class="hljs-addition">+      if (!result) {</span>
<span class="hljs-addition">+        continue</span>
<span class="hljs-addition">+      }</span>
<span class="hljs-addition">+      // 4. æ„å»ºå®Œæ•´ç»„ä»¶ä¿¡æ¯</span>
<span class="hljs-addition">+      info = {</span>
<span class="hljs-addition">+        as: name, // æ·»åŠ åˆ«å</span>
<span class="hljs-addition">+        ...result,</span>
<span class="hljs-addition">+      }</span>
<span class="hljs-addition">+      // 5. å­˜å…¥ç¼“å­˜</span>
<span class="hljs-addition">+      this._componentNameMap[name] = info</span>
<span class="hljs-addition">+      return info</span>
<span class="hljs-addition">+    }</span>
<span class="hljs-addition">+    // æ‰€æœ‰è§£æå™¨éƒ½ä¸åŒ¹é…ï¼Œè¿”å› undefined</span>
<span class="hljs-addition">+  }</span>
<span class="hljs-addition">+ }</span>

<span class="hljs-deletion">-  export default function VitePluginAutoComponents() {</span>
<span class="hljs-addition">+  export default function VitePluginAutoComponents(options = {}) {</span>
<span class="hljs-addition">+    // åˆ›å»º Context å®ä¾‹ï¼Œç”¨äºå­˜å‚¨æ’ä»¶é…ç½®å’Œç»„ä»¶ä¿¡æ¯</span>
<span class="hljs-addition">+    const ctx = new Context(options)</span>
    return {
      // æ’ä»¶åç§°ï¼Œç”¨äºè°ƒè¯•å’Œé”™è¯¯ä¿¡æ¯
      name: 'vite-plugin-auto-component',
  
      // transform é’©å­å‡½æ•°ï¼Œåœ¨è½¬æ¢æ¨¡å—æ—¶è°ƒç”¨
      // code: æ–‡ä»¶å†…å®¹ï¼Œid: æ–‡ä»¶è·¯å¾„
      async transform(code, id) {
        // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸º.vueæ–‡ä»¶
        // å¦‚æœä¸æ˜¯.vueæ–‡ä»¶ï¼Œä¸è¿›è¡Œå¤„ç†
        if(/\.vue$/.test(id)) {
            // çœç•¥...
            
            let no = 0
            // éå†æ‰€æœ‰åŒ¹é…ç»“æœè¿›è¡Œå¤„ç†
            for (const { rawName, replace } of results) {
                // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§é©¼å³°
                const name = pascalCase(rawName)
<span class="hljs-deletion">-                // åªå¤„ç† Co å¼€å¤´çš„ç»„ä»¶</span>
<span class="hljs-deletion">-                 if (!name.match(/^Co[A-Z]/)) return</span>
<span class="hljs-deletion">-                // ç»„ä»¶è·¯å¾„è½¬æ¢</span>
<span class="hljs-deletion">-                 const partialName = kebabCase(name.slice(2))</span>
<span class="hljs-deletion">-                // å°è£…äº†ç»„ä»¶çš„å®Œæ•´å¯¼å…¥ä¿¡æ¯ï¼Œä½œä¸ºæ•°æ®è½½ä½“ä¼ é€’ç»™åç»­å¤„ç†å‡½æ•°</span>
<span class="hljs-deletion">-                 const component = {</span>
<span class="hljs-deletion">-                     name,</span>
<span class="hljs-deletion">-                     from: `cobyte-vite-ui/dist/components/${partialName}`,</span>
<span class="hljs-deletion">-                     sideEffects: ['cobyte-vite-ui/dist/style.css']</span>
<span class="hljs-deletion">-                 }</span>
<span class="hljs-addition">+                const component = await ctx.findComponent(name)</span>
<span class="hljs-addition">+                if (component) {</span>
                  // å®šä¹‰è¦æ›¿æ¢çš„å˜é‡åï¼ˆè¿™é‡Œæš‚æ—¶ç¼–ç ä¸º CoButtonï¼‰
                  // const varName = name
                  // ä½¿ç”¨ç‰¹æ®Šå‰ç¼€å‡å°‘ä¸ç”¨æˆ·å˜é‡çš„å†²çªï¼Œä»¥åŠä½¿ç”¨é€’å¢çš„åºå·ï¼Œä¿è¯å”¯ä¸€æ€§ï¼Œé¿å…å˜é‡åå†²çª
                  const varName = `__unplugin_components_${no}`
                  // åœ¨ä»£ç å¼€å¤´æ·»åŠ å¯¼å…¥è¯­å¥ï¼š
                  // 1. å¯¼å…¥ CoButton ç»„ä»¶
                  // 2. å¯¼å…¥æ ·å¼æ–‡ä»¶
                  // s.prepend(`\nimport ${varName} from 'cobyte-vite-ui/dist/components/${partialName}';\nimport 'cobyte-vite-ui/dist/style.css';\n`)
                  // è¿™é‡Œå°† component å¯¹è±¡å±•å¼€ï¼Œå¹¶æ·»åŠ  as: varName å‚æ•°ï¼Œå½¢æˆå®Œæ•´çš„å¯¼å…¥é…ç½®
                  s.prepend(`${stringifyComponentImport({ ...component, as: varName })};\n`)
                  no += 1
                  // æ‰§è¡Œæ›¿æ¢ï¼šå°† resolveComponent("xxx") è°ƒç”¨æ›¿æ¢ä¸ºç»„ä»¶å˜é‡å
                  replace(varName)
<span class="hljs-addition">+                }</span>
            }
  
            // è¿”å›è½¬æ¢åçš„ä»£ç 
            return {
                code: s.toString(),  // è½¬æ¢åçš„ä»£ç å­—ç¬¦ä¸²
                map: null, 
            }
        }
      },
    }
}
</code></pre>
<p>æ’ä»¶åˆå§‹åŒ–æ—¶ï¼Œåˆ›å»º Context å®ä¾‹ï¼Œä¼ å…¥optionsï¼Œå…¶ä¸­åŒ…å«è§£æå™¨ resolversã€‚Context ç±»æä¾›äº†ä¸€ä¸ªfindComponentæ–¹æ³•ï¼Œç”¨äºæ ¹æ®ç»„ä»¶åæŸ¥æ‰¾ç»„ä»¶ä¿¡æ¯ã€‚è¯¥æ–¹æ³•ä¼šå…ˆæŸ¥çœ‹ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ï¼Œåˆ™ä¾æ¬¡è°ƒç”¨æ¯ä¸ªè§£æå™¨çš„ resolve æ–¹æ³•ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªè§£æå™¨è¿”å›ç»“æœã€‚ç„¶åå°†ç»“æœç¼“å­˜èµ·æ¥ã€‚åœ¨ transform é’©å­ä¸­ï¼Œä½¿ç”¨ Context å®ä¾‹çš„findComponent æ–¹æ³•æ¥æŸ¥æ‰¾ç»„ä»¶ä¿¡æ¯ï¼Œè€Œä¸å†æ˜¯ç¡¬ç¼–ç è§£æé€»è¾‘ã€‚è¿™æ¬¡è¿­ä»£ä½¿æ’ä»¶ä»å•ä¸€ç»„ä»¶åº“çš„æ”¯æŒæ‰©å±•åˆ°å¤šç»„ä»¶åº“ï¼Œä½¿ç”¨ç¼“å­˜æé«˜æ€§èƒ½ï¼Œé€šè¿‡è§£æå™¨æ¨¡å¼æé«˜æ‰©å±•æ€§ï¼Œå¹¶ä¸”é€šè¿‡å¼‚æ­¥è§£ææŸ¥æ‰¾ç»„ä»¶ä¿¡æ¯ã€ä¸ºæœªæ¥å¼‚æ­¥è§£æé¢„ç•™æ¥å£ã€‚</p>
<p>ç»è¿‡æ­¤æ¬¡çš„è¿­ä»£ï¼Œæˆ‘ä»¬çš„æ’ä»¶å®ç°äº†çœŸæ­£çš„è§£è€¦ï¼Œæ’ä»¶æ ¸å¿ƒåªè´Ÿè´£æµç¨‹æ§åˆ¶ï¼Œè§£æé€»è¾‘åˆ™å®Œå…¨ç”±è§£æå™¨å¤„ç†ï¼Œé…ç½®ç®¡ç†åˆ™ç”± Context ç»Ÿä¸€ç®¡ç†ï¼Œæ ‡å‡†åŒ–äº†è§£æå™¨çš„æ¥å£ï¼Œè¿™æ ·æ‰€æœ‰è§£æå™¨éƒ½éµå¾ªç›¸åŒçš„æ¥å£ï¼Œç”±æ­¤å®ç°äº†å¼ºå¤§çš„æ‹“å±•æ€§ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬æ›´æ–° play é¡¹ç›®ä¸­çš„ Vite é…ç½®æ–‡ä»¶ <code>vite.config.ts</code>ï¼Œæ›´æ–°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
<span class="hljs-deletion">- import AutoComponents from 'cobyte-vite-ui/dist/utils'</span>
<span class="hljs-addition">+ import AutoComponents, { CobyteViteUiResolver} from 'cobyte-vite-ui/dist/utils'</span>

export default defineConfig({
<span class="hljs-deletion">-  plugins: [vue(), AutoComponents()]</span>
<span class="hljs-addition">+  plugins: [vue(), AutoComponents({</span>
<span class="hljs-addition">+    resolvers: [CobyteViteUiResolver()]</span>
<span class="hljs-addition">+  })],</span>
})
</code></pre>
<p>æ¥ç€é‡æ–°æ‰“åŒ…ç»„ä»¶åº“ï¼Œå†é‡å¯ play é¡¹ç›®ï¼Œæˆ‘ä»¬å‘ç°ä¾ç„¶æ­£å¸¸ï¼Œè¯´æ˜æˆ‘ä»¬ä¸Šè¿°çš„æ”¹åŠ¨æ˜¯æ­£ç¡®çš„ã€‚</p>
<h3 data-id="heading-8">å¤šè§£æå™¨é…ç½®</h3>
<p>ä¸Šæ–‡è¯´äº†æˆ‘ä»¬å®ç°äº†æ’ä»¶ä»å•ä¸€ç»„ä»¶åº“çš„æ”¯æŒæ‰©å±•åˆ°å¤šç»„ä»¶åº“çš„æŒ‰éœ€åŠ è½½è§£æï¼Œé‚£ä¹ˆä¸‹é¢å°±è®©æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚
é¦–å…ˆæˆ‘ä»¬å¾€ <code>packages/utils/index.ts</code> æ–‡ä»¶æ·»åŠ  Naive UI çš„è§£æå™¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * Resolver for Naive UI
 *
 * <span class="hljs-doctag">@link</span> https://www.naiveui.com/
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">NaiveUiResolver</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'component'</span>,
    <span class="hljs-attr">resolve</span>: <span class="hljs-function">(<span class="hljs-params">name: string</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'NaiveUiResolver'</span>, name, name.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^(N[A-Z]|n-[a-z])/</span>));
      <span class="hljs-keyword">if</span> (name.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^(N[A-Z]|n-[a-z])/</span>))
        <span class="hljs-keyword">return</span> { name, <span class="hljs-attr">from</span>: <span class="hljs-string">'naive-ui'</span> }
    },
  }
}
</code></pre>
<p>è¿™ä¸ªè§£æå™¨æ˜¯å®Œå…¨ä» <code>unplugin-vue-components</code> æ’ä»¶ä¸­æ¬è¿‡æ¥çš„ï¼Œæˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½å¤Ÿåœ¨æˆ‘ä»¬å®ç°çš„æ’ä»¶ä¸­ä½¿ç”¨ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬åœ¨ play é¡¹ç›®ä¸­å®‰è£… Naive UI çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> naive-ui
</code></pre>
<p>ç„¶ååœ¨ App.vue æ–‡ä»¶ä¸­å¼•ç”¨ Naive UI çš„ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">co-button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">co-button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>&gt;</span>naive-ui<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>æ¥ç€ä¿®æ”¹ <code>./play/vite.config.ts</code> æ–‡ä»¶ä¸­çš„é…ç½®ã€‚</p>
<pre><code class="hljs language-diff" lang="diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
<span class="hljs-deletion">- import AutoComponents, { CobyteViteUiResolver } from 'cobyte-vite-ui/dist/utils'</span>
<span class="hljs-addition">+ import AutoComponents, { CobyteViteUiResolver, NaiveUiResolver } from 'cobyte-vite-ui/dist/utils'</span>

// https://vite.dev/config/
export default defineConfig({
  plugins: [vue(), AutoComponents({
<span class="hljs-deletion">-   resolvers: [CobyteViteUiResolver()]</span>
<span class="hljs-addition">+    resolvers: [CobyteViteUiResolver(), NaiveUiResolver()]</span>
  })],
})
</code></pre>
<p>æ¥ç€æˆ‘ä»¬é‡æ–°æ‰“åŒ…æˆ‘ä»¬çš„æµ‹è¯•ç»„ä»¶åº“ï¼Œå†é‡å¯ play æµ‹è¯•é¡¹ç›®ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9fc0afaa6f74916a0a1ba1e7f0b866c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891951&amp;x-signature=6Vrsvpa18gSxVlbZRqcRepE7Bzc%3D" alt="01.png" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆåŠŸéªŒè¯äº†æˆ‘ä»¬ä¸Šè¿°çš„ç»“è®ºï¼š<strong>æˆ‘ä»¬å®ç°äº†æ’ä»¶ä»å•ä¸€ç»„ä»¶åº“çš„æ”¯æŒæ‰©å±•åˆ°å¤šç»„ä»¶åº“çš„æŒ‰éœ€åŠ è½½è§£</strong>ã€‚</p>
<p>æˆ‘ä»¬ä¸Šé¢æ‰€å®ç°çš„æ’ä»¶å…¶å®å°±æ˜¯ <code>unplugin-vue-components</code> åº“çš„å®ç°åŸç†ï¼Œåœ¨ Vue æŠ€æœ¯æ ˆä¸­éƒ½æ˜¯é€šè¿‡è¿™ä¸ªåº“æ¥å®ç°ç»„ä»¶æŒ‰éœ€åŠ è½½çš„ã€‚</p>
<h3 data-id="heading-9">ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½å®è·µ</h3>
<p>æˆ‘ä»¬åœ¨ play é¡¹ç›®ä¸­å®‰è£… <code>unplugin-vue-components</code> åº“æ¥æ›¿æ¢æˆ‘ä»¬æ‰‹å†™çš„æ’ä»¶ã€‚å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> unplugin-vue-components -D 
</code></pre>
<p>æ¥ç€ä¿®æ”¹ play é¡¹ç›®ä¸­çš„ <code>vite.config.ts</code> æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-diff" lang="diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
<span class="hljs-deletion">- import AutoComponent, { CobyteViteUiResolver, NaiveUiResolver } from 'cobyte-vite-ui/dist/utils'</span>
<span class="hljs-addition">+ import { CobyteViteUiResolver, NaiveUiResolver } from 'cobyte-vite-ui/dist/utils'</span>
<span class="hljs-addition">+ import AutoComponents from 'unplugin-vue-components/vite';</span>

// https://vite.dev/config/
export default defineConfig({
  plugins: [vue(), AutoComponents({
    resolvers: [CobyteViteUiResolver(), NaiveUiResolver()]
  })],
})
</code></pre>
<p>ç„¶åé‡å¯ play é¡¹ç›®ï¼Œæˆ‘ä»¬å‘ç°æˆ‘ä»¬çš„æµ‹è¯•ä¾‹å­ä¾ç„¶æ˜¯æ­£å¸¸è¿è¡Œçš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬çš„ç»„ä»¶åº“æˆ–è€…ä¸šåŠ¡ç»„ä»¶åº“æƒ³è¦å®ç°æŒ‰éœ€åŠ è½½ï¼Œåªéœ€è¦å‚è€ƒ <code>unplugin-vue-components</code> åº“ä¸­æä¾›çš„è§£æå™¨ï¼Œå†™ä¸€ä¸ªç¬¦åˆè‡ªå·±çš„ç»„ä»¶åº“çš„è§£æå™¨å†é…åˆ <code>unplugin-vue-components</code> å³å¯ã€‚å½“ç„¶è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„å‰æï¼Œä½ çš„ç»„ä»¶åº“å¾—è®¾è®¡æˆæ¨¡å—åŒ–ï¼Œå³ä¸€ä¸ªç»„ä»¶ä¸€ä¸ªæ¨¡å—ï¼Œäº’ä¸å…³è”æˆ–è€…å¼±å…³è”ã€‚</p>
<h3 data-id="heading-10">ä¸šåŠ¡ç»„ä»¶åº“å¼•ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶åº“çš„æŒ‰éœ€åŠ è½½</h3>
<p>æˆ‘ä»¬çŸ¥é“æ‰€è°“ä¸šåŠ¡ç»„ä»¶åº“ï¼Œå°±æ˜¯ä¸€äº›åŸºäºç¬¬ä¸‰æ–¹ç»„ä»¶åº“å¼€å‘çš„ç»„ä»¶åº“ï¼Œæ¯”å¦‚åŸºäº Element Plusã€Naive UI å¼€å‘çš„ç»„ä»¶åº“ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬çš„æµ‹è¯•ç»„ä»¶åº“ <code>./packages/components/button</code>ï¼Œè®©å®ƒä½¿ç”¨ Naive UI çš„ button ç»„ä»¶ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"warning"</span>&gt;</span>
    Warning
  <span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-title function_">defineOptions</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'co-button'</span>,
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">color</span>: red;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>æ¥ç€æˆ‘ä»¬é‡æ–°æ‰“åŒ…æµ‹è¯•ç»„ä»¶åº“ï¼Œç„¶åé‡å¯ play é¡¹ç›®ã€‚æˆ‘ä»¬å‘ç°æµ‹è¯•ç»„ä»¶åº“ä¸­ Naive UI çš„æŒ‰é’® Button å¹¶æ²¡æœ‰ç”Ÿæ•ˆã€‚å¹¶ä¸”åœ¨æµè§ˆå™¨çš„æ§åˆ¶å°æŠ¥ä»¥ä¸‹è­¦æŠ¥ï¼š</p>
<pre><code class="hljs language-css" lang="css">Failed <span class="hljs-selector-tag">to</span> resolve component: n-button
</code></pre>
<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨ Vite æ¥æ‰“åŒ…ç»„ä»¶åº“ï¼ŒVite é»˜è®¤ä¼šæŠŠä»£ç è¿›è¡Œå‹ç¼©æ··æ·†ã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹æ‰“åŒ…åçš„æµ‹è¯• button ç»„ä»¶çš„ä»£ç ã€‚å¯ä»¥çœ‹åˆ°åŸæœ¬åº”è¯¥æ˜¯ <code>_resolveComponent("n-button")</code> çš„ä»£ç ï¼Œå› ä¸º Vite è¿›è¡Œäº†å‹ç¼©æ··æ·†è€Œå˜æˆäº† o("n-button")ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a1fd47f258b45e7825b38666b32cef5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891951&amp;x-signature=jR3MBUfmLK%2FgYWlVlmQGv9zk0gQ%3D" alt="02.png" loading="lazy"/></p>
<p>è€Œæˆ‘ä»¬çš„æ’ä»¶æ˜¯åŸºäº <code>_resolveComponent</code> ä¸ºå‰ç¼€è¿›è¡ŒåŒ¹é…çš„ï¼Œç°åœ¨å‰ç¼€è¢«å‹ç¼©äº†ä¹Ÿå°±è‚¯å®šåŒ¹é…åˆ°ä¸åˆ°äº†ã€‚æ‰€ä»¥ç®€å•çš„å¤„ç†æ–¹æ³•å°±æ˜¯ä¿®æ”¹ Vite æ‰“åŒ…é…ç½®ï¼Œè®©å…¶ä¸è¿›è¡Œå‹ç¼©æ··æ·†ï¼Œæ¯•ç«Ÿ Element Plusã€Naive UI è¿™äº›å¼€æºç»„ä»¶åº“æ‰“åŒ…åçš„äº§ç‰©ä¹Ÿæ²¡æœ‰è¿›è¡Œå‹ç¼©æ··æ·†ã€‚æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ Vite æ‰“åŒ…é…ç½®ç¦æ­¢æ„å»ºå‹ç¼©æ··æ·†ã€‚ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ <code>vite.config.ts</code> å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">// çœç•¥...

export default defineConfig(({ command, mode }) =&gt; {
    // ä¸»æ„å»ºé…ç½®
    return {
        // çœç•¥...
        build: {
<span class="hljs-addition">+            minify: false, // ç¦æ­¢å‹ç¼©æ··æ·†</span>
            // çœç•¥...
        },
    };
});
</code></pre>
<p>æˆ‘ä»¬å‘ç°æ‰“åŒ…åçš„ç»„ä»¶ä»£ç ä¸å‹ç¼©æ··æ·†äº†ï¼Œä½†è¿˜æ˜¯ä¸ç”Ÿæ•ˆï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬å†™çš„æ’ä»¶åªè§£æ <code>.vue</code> æ–‡ä»¶ï¼Œè€Œæˆ‘ä»¬æ‰“åŒ…åçš„æ–‡ä»¶å˜æˆäº† <code>.mjs</code> äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¿®æ”¹ä¸€ä¸‹ play é¡¹ç›®çš„ Vite é…ç½®è®© <code>.mjs</code> æ–‡ä»¶ä¹Ÿå¯ä»¥è¢«è§£æã€‚ä¿®æ”¹ <code>./play/vite.config.ts</code>  æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">  // çœç•¥...
export default defineConfig({
  plugins: [vue(), AutoComponents({
<span class="hljs-addition">+    include: [</span>
<span class="hljs-addition">+      /\.vue$/,</span>
<span class="hljs-addition">+      /\.mjs$/</span>
<span class="hljs-addition">+    ],</span>
    resolvers: [CobyteViteUiResolver(), NaiveUiResolver()]
  })],
})
</code></pre>
<p>ç»è¿‡ä¸Šè¿°ä¿®æ”¹åæˆ‘ä»¬é‡å¯ play é¡¹ç›®ï¼Œå‘ç°åŸºäº Naive UI äºŒæ¬¡å¼€å‘çš„ç»„ä»¶å¯ä»¥æˆåŠŸåŠ è½½äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40241ada01dc43be8f8adfdd50ebac34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891951&amp;x-signature=KCiPTpjGvRudmI3WE5su1PLIgLk%3D" alt="03.png" loading="lazy"/></p>
<h3 data-id="heading-11">ä¾èµ–é¢„æ„å»ºé…ç½®</h3>
<p>æˆ‘ä»¬çŸ¥é“ Vite ä¼šåœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™æŠŠä¾èµ–é¢„æ„å»ºå¹¶ç¼“å­˜åˆ° <code>node_modules/.vite</code> ç›®å½•ä¸­ã€‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š</p>
<ol>
<li>æ¨¡å—æ ¼å¼è½¬æ¢</li>
</ol>
<p>è®¸å¤š npm åŒ…ä½¿ç”¨çš„æ˜¯ CommonJS æˆ– UMD æ ¼å¼ï¼Œè€Œ Vite åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨çš„æ˜¯åŸç”Ÿ ES æ¨¡å—ï¼ˆESMï¼‰ã€‚é¢„æ„å»ºä¼šå°†è¿™äº›åŒ…è½¬æ¢ä¸º ESM æ ¼å¼ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­ç›´æ¥è¿è¡Œã€‚</p>
<ol start="2">
<li>æ€§èƒ½ä¼˜åŒ– - å‡å°‘ HTTP è¯·æ±‚</li>
</ol>
<p>æŸäº›åŒ…ä¼šæœ‰å¾ˆå¤šå†…éƒ¨æ¨¡å—ï¼Œå¦‚æœä¸é¢„æ„å»ºï¼Œæµè§ˆå™¨å¯èƒ½éœ€è¦å‘èµ·æ•°ç™¾ä¸ª HTTP è¯·æ±‚ã€‚é¢„æ„å»ºä¼šå°†è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å°‘æ•°å‡ ä¸ªæ–‡ä»¶ã€‚</p>
<p>å…¸å‹ä¾‹å­ï¼š</p>
<ul>
<li>lodash-es æœ‰è¶…è¿‡ 600 ä¸ªå†…ç½®æ¨¡å—</li>
<li>å¦‚æœä¸é¢„æ„å»ºï¼Œä¼šå¯¼è‡´ 600+ ä¸ª HTTP è¯·æ±‚</li>
<li>é¢„æ„å»ºååªéœ€è¦ 1-2 ä¸ªè¯·æ±‚</li>
</ul>
<ol start="3">
<li>æå‡é¡µé¢åŠ è½½é€Ÿåº¦</li>
</ol>
<p>é¢„æ„å»ºä½¿ç”¨ esbuildï¼ˆç”¨ Go ç¼–å†™ï¼‰ï¼Œé€Ÿåº¦æ¯”ä¼ ç»Ÿ JavaScript æ‰“åŒ…å·¥å…·å¿« 10-100 å€ã€‚é€šè¿‡å°†ä¾èµ–é¢„å…ˆæ‰“åŒ…å¹¶ç¼“å­˜ï¼Œå¯ä»¥æ˜¾è‘—æå‡å¼€å‘æœåŠ¡å™¨çš„å¯åŠ¨é€Ÿåº¦å’Œæ¨¡å—çƒ­æ›´æ–°ï¼ˆHMRï¼‰çš„å“åº”é€Ÿåº¦ã€‚</p>
<p>é»˜è®¤çš„æ—¶å€™ Vite æ˜¯é€šè¿‡ import è¯­å¥è¿›è¡Œåˆ†æéœ€è¦é¢„æ„å»ºçš„ä¾èµ–çš„ï¼Œä½†æˆ‘ä»¬ä½¿ç”¨æŒ‰éœ€åŠ è½½çš„æ’ä»¶ä¹‹åï¼Œåœ¨ä»£ç ä¸­å°±æœ‰äº› npm åŒ…ä¸å­˜åœ¨ import è¯­å¥äº†ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨é€šè¿‡ <code>optimizeDeps.include</code> é€‰é¡¹è®¾ç½®é¢„æ„å»ºã€‚</p>
<p>æˆ‘ä»¬å¯¹ <code>./play/vite.config.ts</code> è®¾ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { CobyteViteUiResolver, NaiveUiResolver } from 'cobyte-vite-ui/dist/utils'
import AutoComponents from 'unplugin-vue-components/vite';
<span class="hljs-addition">+ import pkg from './package.json';</span>
<span class="hljs-addition">+ const dependencies = Object.keys(pkg.dependencies);</span>

export default defineConfig({
  plugins: [vue(), AutoComponents({
    include: [
      /\.vue$/,
      /\.mjs$/
    ],
    resolvers: [CobyteViteUiResolver(), NaiveUiResolver()]
  })],
<span class="hljs-addition">+  optimizeDeps: {</span>
<span class="hljs-addition">+    include: [...dependencies]</span>
<span class="hljs-addition">+  }</span>
})
</code></pre>
<p>ç”±äº Node ä¸å¤„ç†è™šæ‹Ÿé“¾æ¥ï¼ŒåŒæ—¶ä¸ºäº†æ›´çœŸå®éªŒè¯çœŸå®åœºæ™¯ï¼Œæˆ‘ä»¬æŠŠæµ‹è¯•ç»„ä»¶åº“æ”¹æˆæ›´åŠ çœŸå®ï¼Œé¦–å…ˆä¿®æ”¹ <code>./play/packages.json</code></p>
<pre><code class="hljs language-diff" lang="diff">{
  // çœç•¥...
  "dependencies": {
<span class="hljs-deletion">-    "cobyte-vite-ui": "link:..",</span>
    "cobyte-vite-ui": "^1.0.0",
    "naive-ui": "^2.43.1",
    "vue": "^3.5.22"
  },
  // çœç•¥...
}
</code></pre>
<p>åŒæ—¶åˆ æ‰ <code>./play/node_modules</code> ç›®å½•ä¸­çš„ <code>cobyte-vite-ui</code> è™šæ‹Ÿç›®å½•ï¼Œå†é‡æ–°åˆ›å»ºä¸€ä¸ª <code>cobyte-vite-ui</code> ç›®å½•ï¼ŒåŒæ—¶æŠŠæ ¹ç›®å½•ä¸‹çš„ <code>./dist</code> ç›®å½•ä¸­çš„å†…å®¹å’Œæ ¹ç›®å½•ä¸‹çš„ <code>packages.json</code> æ–‡ä»¶å¤åˆ¶åˆ°åˆšåˆšæ–°åˆ›å»ºçš„
<code>cobyte-vite-ui</code> ç›®å½•ä¸­ï¼Œè¿™ç›¸å½“äºæ‰‹åŠ¨å®‰è£…æˆ‘ä»¬åˆ›å»ºçš„æµ‹è¯•ç»„ä»¶åº“çš„ä¾èµ–äº†ã€‚ä¹‹åæˆ‘ä»¬å†åˆ æ‰ <code>./play/node_modules/.vite</code> ç›®å½•çš„é¢„æ„å»ºç¼“å­˜ï¼Œå†é‡å¯ play é¡¹ç›®ã€‚è¿™æ—¶æˆ‘ä»¬å‘ç° <code>cobyte-vite-ui</code> ç»„ä»¶åº“ä¸­å¼•ç”¨çš„ Naive UI çš„ button ç»„ä»¶ä¸ç”Ÿæ•ˆäº†ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æŠŠ <code>cobyte-vite-ui</code> è¿›è¡Œé¢„æ„å»ºåï¼Œå®ƒçš„å†…å®¹å°±ä¼šè¢«é¢„æ„å»ºåç¼“å­˜åˆ° <code>./play/node_modules/.vite</code> ç›®å½•ä¸­äº†ï¼Œè€Œ unplugin-vue-components æ’ä»¶é»˜è®¤æ˜¯ä¸è§£æ <code>node_modules</code> ç›®å½•ä¸­çš„æ–‡ä»¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ unplugin-vue-components æ’ä»¶çš„é…ç½®è®©å…¶å¯ä»¥è§£æ <code>node_modules</code> ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œä½†è¿™ä¸æ˜¯æœ€ä¼˜çš„æ–¹æ¡ˆã€‚æœ€ä¼˜çš„æ–¹æ¡ˆæ˜¯åœ¨æ‰“åŒ… <code>cobyte-vite-ui</code> ç»„ä»¶åº“çš„æ—¶å€™å°±
è¿›è¡ŒæŒ‰éœ€æ‰“åŒ…ã€‚æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹å®‰è£… <code>unplugin-vue-components</code> ä¾èµ–ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> unplugin-vue-components -D -w
</code></pre>
<p>æˆ‘ä»¬åœ¨å®‰è£…ä¸Šè¿°ä¾èµ–çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6746af5fde3446af853e12ef3aa69e0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763891951&amp;x-signature=u5WYPU5PuZ23BsjZLeR8rv4N0Jk%3D" alt="04.png" loading="lazy"/></p>
<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åˆšåˆšæŠŠ play ç›®å½•ä¸­çš„æµ‹è¯•ç»„ä»¶åº“ <code>cobyte-vite-ui</code> æ”¹äº†æ­£å¼åº“ä¸€æ ·çš„ä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥æš‚æ—¶æŠŠå®ƒæ”¹å›è™šæ‹Ÿä¾èµ–ã€‚</p>
<pre><code class="hljs language-diff" lang="diff">"dependencies": {
<span class="hljs-deletion">-    "cobyte-vite-ui": "^1.0.0",</span>
<span class="hljs-addition">+    "cobyte-vite-ui": "link:..",</span>
    "naive-ui": "^2.43.1",
    "vue": "^3.5.22"
},
</code></pre>
<p>å†è¿›è¡Œå®‰è£…å³å¯ã€‚</p>
<p>ç„¶åæ–°å¢æ ¹ç›®å½•ä¸‹çš„ <code>vite.config.ts</code> æ–‡ä»¶çš„é…ç½®ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">// çœç•¥...
<span class="hljs-addition">+ import AutoComponents from 'unplugin-vue-components/vite';</span>
<span class="hljs-addition">+ import { NaiveUiResolver } from 'unplugin-vue-components/resolvers';</span>

// çœç•¥...

export default defineConfig(({ command, mode }) =&gt; {
    // ä¸»æ„å»ºé…ç½®
    return {
        plugins: [
            vue(),
<span class="hljs-addition">+            AutoComponents({</span>
<span class="hljs-addition">+                resolvers: [NaiveUiResolver()]</span>
<span class="hljs-addition">+            })</span>
        ],
        build: {
            // çœç•¥...
            rollupOptions: {
                external: [
                    "vue", 
<span class="hljs-addition">+                    "naive-ui", // æ’é™¤æ‰“åŒ…</span>
                ],
            // çœç•¥..
            },
        },
    };
});
</code></pre>
<p>é…ç½®å®Œåï¼Œé‡æ–°æ‰“åŒ…æˆ‘ä»¬çš„æµ‹è¯•ç»„ä»¶åº“ï¼Œæ‰“åŒ…å®Œåï¼Œé‡æ–°åˆ æ‰ <code>./play/node_modules/.vite</code> ä¸­çš„ç¼“å­˜ï¼Œå’Œ <code>./play/node_modules/cobyte-vite-ui</code> ä¸­çš„å†…å®¹ï¼Œé‡æ–°æŠŠåˆšåˆšæ–°æ‰“åŒ…çš„æ ¹ç›®å½•ä¸‹çš„ <code>./dist</code> ç›®å½•ä¸­çš„å†…å®¹å’Œæ ¹ç›®å½•ä¸‹çš„ <code>packages.json</code> æ–‡ä»¶å¤åˆ¶åˆ° <code>./play/node_modules/cobyte-vite-ui</code> ä¸­ï¼ŒåŒæ—¶æ¢å¤ä¿®æ”¹çš„ <code>./play/packages.json</code> æ–‡ä»¶ï¼Œç„¶åé‡å¯ play é¡¹ç›®ã€‚</p>
<p>è¿™æ—¶æˆ‘ä»¬å°±å‘ç°æµ‹è¯•é¡¹ç›®å¯ä»¥æ­£å¸¸æ¸²æŸ“äº†ã€‚</p>
<p>è‡³æ­¤æˆ‘ä»¬ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„å®ç°åŸç†å°±éƒ½è®²å¾—å·®ä¸å¤šäº†ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥åœ¨è¯„è®ºåŒºäº¤æµã€‚</p>
<h3 data-id="heading-12">æ€»ç»“</h3>
<p>çœ‹å®Œäº†å…¨ç¯‡æ–‡ç« ç›¸ä¿¡ä½ ä¼šè§‰å¾—ï¼Œæ‰€è°“ç»„ä»¶åº“æŒ‰éœ€åŠ è½½æˆ–è€…ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½å…¶å®å¾ˆç®€å•ï¼Œé¦–å…ˆç»„ä»¶åº“çš„æ¯ä¸€ä¸ªç»„ä»¶éƒ½å¾—è®¾è®¡æˆç‹¬ç«‹çš„æ¨¡å—ï¼Œå¹¶ä¸”å¯ä»¥æŒ‰æ¨¡å—å¯¼å…¥ï¼Œä¹Ÿå°±æ˜¯ ESM åŒ–ï¼Œå¯ä»¥è¿›è¡Œ Tree Shakingï¼Œåªæœ‰è¿™æ ·æŒ‰éœ€åŠ è½½æ‰æœ‰æ„ä¹‰ï¼Œæ‰èƒ½è¾¾åˆ°å‡å°åŒ…ä½“ç§¯çš„ä½œç”¨ã€‚</p>
<p>å…¨å±€ç»„ä»¶åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¢«ç¼–è¯‘åä¼šé€šè¿‡ä¸€ä¸ªå†…ç½®å‡½æ•° <strong>resolveComponent</strong> æ¥è°ƒç”¨ç»„ä»¶ï¼ŒæŒ‰éœ€åŠ è½½çš„å®ç°åŸç†å°±æ˜¯é€šè¿‡æ’ä»¶è¿›è¡Œæ­£åˆ™åŒ¹é…æŸ¥æ‰¾ç¼–è¯‘åçš„æ¨¡æ¿ä»£ç ä¸­çš„ <strong>resolveComponent</strong> å‡½æ•°çš„ç›¸å…³ä»£ç æ¥æ‰¾åˆ°éœ€è¦æŒ‰éœ€åŠ è½½çš„ç»„ä»¶ï¼Œç„¶åè‡ªåŠ¨æŒ‰ç¼–è¯‘åçš„ä»£ç çš„å¤´éƒ¨æ·»åŠ éœ€è¦åŠ è½½çš„ç»„ä»¶çš„å¯¼å…¥è¯­å¥ä»£ç ä»¥åŠæ›¿æ¢æ‰ <strong>resolveComponent</strong> å‡½æ•°çš„ç›¸å…³ä»£ç ä¸ºå¯¹åº”çš„ç»„ä»¶å¯¹è±¡ã€‚</p>
<p>è€Œä¸šåŠ¡ç»„ä»¶å®ç°æŒ‰éœ€åŠ è½½çš„å…³é”®æ˜¯éœ€è¦åœ¨ä¸šåŠ¡ç»„ä»¶åº“æ‰“åŒ…çš„æ—¶å€™ä¹Ÿè¿›è¡ŒæŒ‰éœ€åŠ è½½é…ç½®ã€‚è™½ç„¶è¿™ä¸ªå…³é”®æ­¥éª¤å¾ˆç®€å•ï¼Œä½†ç”±äºè¿™æ˜¯ä¸€ä¸ªä½é¢‘ä¸”è·¨é¡¹ç›®çš„éœ€æ±‚ï¼Œæ‰€ä»¥AIå¯¹ä½é¢‘çš„éœ€æ±‚çš„å®ç°å’Œç»™çš„è§£å†³æ–¹æ¡ˆéƒ½ä¸å°½äººæ„ï¼Œè‡³å°‘æœ¬äººè§£å†³ä¸Šè¿°é—®é¢˜æ—¶ï¼ŒAIæä¾›æ–¹æ¡ˆæ²¡æœ‰ä¸€ä¸ªå¯ä»¥å®ç°çš„ï¼Œè™½ç„¶æœ€åçš„å®ç°å…¶å®å¾ˆç®€å•ã€‚</p>
<p>æœ€åï¼Œå†è¯´è¯´ä¸ªäººå¯¹AIçš„ä¸€äº›æ„Ÿæ‚Ÿå§ï¼Œä¸ªäººè§‰å¾—åœ¨AIæ—¶ä»£ï¼Œå°±ç¼–ç¨‹è¿™ä¸ªé¢†åŸŸè€Œè¨€å¯¹ä¸ªäººçš„ä¸“ä¸šè¦æ±‚ä¼šæ¯”ä»¥å‰æ›´åŠ çš„é«˜ï¼Œè‡³å°‘ä½ å¾—æœ‰èƒ½åŠ›å»è§£å†³AIä¸ä¼šçš„é—®é¢˜ã€‚</p>
<p>ä¸Šè¿°ç»„ä»¶åº“æµ‹è¯•ä»£ç åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Famebyte%2Fcobyte-vite-ui" target="_blank" title="https://github.com/amebyte/cobyte-vite-ui" ref="nofollow noopener noreferrer">github.com/amebyte/cobâ€¦</a></p>
<p>æ¬¢è¿å…³æ³¨æœ¬ä¸“æ ï¼Œäº†è§£æ›´å¤š Element Plus ç»„ä»¶åº“çŸ¥è¯†</p>
<p>æœ¬ä¸“æ æ–‡ç« ï¼š</p>
<p><a href="https://juejin.cn/post/7143196940992413709" target="_blank" title="https://juejin.cn/post/7143196940992413709">1. Vue3 ç»„ä»¶åº“çš„è®¾è®¡å’Œå®ç°åŸç†</a></p>
<p><a href="https://juejin.cn/post/7146183222425518093" target="_blank" title="https://juejin.cn/post/7146183222425518093">2. ç»„ä»¶åº“å·¥ç¨‹åŒ–å®æˆ˜ä¹‹ Monorepo æ¶æ„æ­å»º</a></p>
<p><a href="https://juejin.cn/post/7153659360177029150" target="_blank" title="https://juejin.cn/post/7153659360177029150">3. ESLint æ ¸å¿ƒåŸç†å‰–æ</a></p>
<p><a href="https://juejin.cn/post/7157743898939359262" target="_blank" title="https://juejin.cn/post/7157743898939359262">4. ESLint æŠ€æœ¯åŸç†ä¸å®æˆ˜åŠä»£ç è§„èŒƒè‡ªåŠ¨åŒ–è¯¦è§£</a></p>
<p><a href="https://juejin.cn/post/7161063570594070559" target="_blank" title="https://juejin.cn/post/7161063570594070559">5. ä»ç»ˆç«¯å‘½ä»¤è§£æå™¨è¯´èµ·è°ˆè°ˆ npm åŒ…ç®¡ç†å·¥å…·çš„è¿è¡ŒåŸç†</a></p>
<p><a href="https://juejin.cn/post/7165503808217284616" target="_blank" title="https://juejin.cn/post/7165503808217284616">6. CSS æ¶æ„æ¨¡å¼ä¹‹ BEM åœ¨ç»„ä»¶åº“ä¸­çš„å®è·µ</a></p>
<p><a href="https://juejin.cn/post/7168835045984043022" target="_blank" title="https://juejin.cn/post/7168835045984043022">7. ç»„ä»¶å®ç°çš„åŸºæœ¬æµç¨‹åŠ Icon ç»„ä»¶çš„å®ç°</a></p>
<p><a href="https://juejin.cn/post/7170716245762048036" target="_blank" title="https://juejin.cn/post/7170716245762048036">8. ä¸ºä»€ä¹ˆç»„ä»¶åº“æˆ–æ’ä»¶éœ€è¦å®šä¹‰ peerDependencies</a></p>
<p><a href="https://juejin.cn/post/7179257832632483896" target="_blank" title="https://juejin.cn/post/7179257832632483896">9. ç»„ä»¶å¼€å‘ä¸­ Vue3 ç›¸å…³çŸ¥è¯†çš„åº”ç”¨ä¸è§£æåŠ Button ç»„ä»¶çš„å®ç°</a></p>
<p><a href="https://juejin.cn/post/7186683381470462007" target="_blank" title="https://juejin.cn/post/7186683381470462007">10. CSS ç³»ç»Ÿé¢œè‰²å’Œæš—é»‘æ¨¡å¼çš„å…³ç³»åŠæ„ä¹‰</a></p>
<p><a href="https://juejin.cn/post/7190370726677839932" target="_blank" title="https://juejin.cn/post/7190370726677839932">11. æ·±å…¥ç†è§£ç»„ä»¶åº“ä¸­SCSSå’ŒCSSå˜é‡çš„æ¶æ„åº”ç”¨å’Œå®è·µ</a></p>
<p><a href="https://juejin.cn/post/7204454572890046501" target="_blank" title="https://juejin.cn/post/7204454572890046501">12. ç»„ä»¶ v-model çš„å°è£…å®ç°åŸç†åŠ Input ç»„ä»¶çš„æ ¸å¿ƒå®ç°</a></p>
<p><a href="https://juejin.cn/post/7217399337989881911" target="_blank" title="https://juejin.cn/post/7217399337989881911">13. æ·±å…¥ç†è§£ Vue3 çš„ v-model åŠè‡ªå®šä¹‰æŒ‡ä»¤çš„å®ç°åŸç†</a></p>
<p><a href="https://juejin.cn/post/7249299811497066551" target="_blank" title="https://juejin.cn/post/7249299811497066551">14. React å’Œ Vue éƒ½ç¦»ä¸å¼€çš„è¡¨å•éªŒè¯å·¥å…·åº“ async-validator ä¹‹ç­–ç•¥æ¨¡å¼çš„åº”ç”¨</a></p>
<p><a href="https://juejin.cn/post/7258966810350174263" target="_blank" title="https://juejin.cn/post/7258966810350174263">15. Form è¡¨å•çš„è®¾è®¡ä¸å®ç°</a></p>
<p><a href="https://juejin.cn/post/7313380227160522763" target="_blank" title="https://juejin.cn/post/7313380227160522763">16. ç»„ä»¶åº“çš„æ‰“åŒ…åŸç†ä¸å®è·µè¯¦è§£</a></p>
<p><a href="https://juejin.cn/post/7572480736362119174" target="_blank" title="https://juejin.cn/post/7572480736362119174">17. Vue3 ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„å®ç°åŸç†</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vite-plugin-openapi-ts CLI ä½¿ç”¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7572537221541036047</link>    <guid>https://juejin.cn/post/7572537221541036047</guid>    <pubDate>2025-11-16T07:05:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572537221541036047" data-draft-id="7572534419880263715" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vite-plugin-openapi-ts CLI ä½¿ç”¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,Vite"/> <meta itemprop="datePublished" content="2025-11-16T07:05:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="isyuah"/> <meta itemprop="url" content="https://juejin.cn/user/2527090418131764"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vite-plugin-openapi-ts CLI ä½¿ç”¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2527090418131764/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    isyuah
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T07:05:26.000Z" title="Sun Nov 16 2025 07:05:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">vite-plugin-openapi-ts CLI ä½¿ç”¨æŒ‡å—</h2>
<blockquote>
<p>å»ºè®®å…ˆçœ‹æ’ä»¶æœ¬ä½“çš„ä»‹ç»</p>
</blockquote>
<p>vite-plugin-openapi-ts é™¤äº†ä»¥ Vite æ’ä»¶çš„å½¢å¼åœ¨å¼€å‘ / æ„å»ºé˜¶æ®µè‡ªåŠ¨ç”Ÿæˆä»£ç å¤–ï¼Œè¿˜æä¾›äº†ä¸€å¥—ç‹¬ç«‹çš„ <strong>å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰</strong>ã€‚<br/>
CLI æ›´é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>åœ¨ CI / CD æµæ°´çº¿é‡Œï¼Œå…ˆç”Ÿæˆç±»å‹å’Œå®¢æˆ·ç«¯ï¼Œå†è¿›è¡Œæ„å»ºä¸æµ‹è¯•ï¼›</li>
<li>åœ¨ monorepo ä¸­é›†ä¸­ç”Ÿæˆï¼Œå†ç»™å¤šä¸ªå­åº”ç”¨å¤ç”¨ï¼›</li>
<li>æœ¬åœ°éœ€è¦â€œåªç”Ÿæˆä¸€æ¬¡çœ‹ç»“æœâ€ï¼Œä¸æƒ³ä¾èµ– Vite å¯åŠ¨è¿‡ç¨‹ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯è¿™å¥— CLI çš„å®Œæ•´ç”¨æ³•è¯´æ˜ã€‚</p>
<hr/>
<h3 data-id="heading-1">å®‰è£…ä¸åŸºç¡€å‘½ä»¤</h3>
<p>CLI å…¥å£å·²ç»é€šè¿‡ <code>bin</code> å­—æ®µç»‘å®šä¸º <code>openapi-ts</code>ï¼Œå®‰è£…æ’ä»¶åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D vite-plugin-openapi-ts

<span class="hljs-comment"># æœ¬åœ°è°ƒç”¨</span>
npx openapi-ts --<span class="hljs-built_in">help</span>
</code></pre>
<p>ç›®å‰å†…ç½®çš„å‡ ä¸ªæ ¸å¿ƒå­å‘½ä»¤æ˜¯ï¼š</p>
<ul>
<li><code>openapi-ts generate</code>ï¼šä» OpenAPI è§„èŒƒç”Ÿæˆ TypeScript ç±»å‹å’Œ API å®¢æˆ·ç«¯ï¼›</li>
<li><code>openapi-ts clean</code>ï¼šæ¸…ç†ç”Ÿæˆçš„ <code>schemes.ts</code> / <code>index.ts</code> ä»¥åŠå¯é€‰ç¼“å­˜æ–‡ä»¶ï¼›</li>
<li><code>openapi-ts clean-cache</code>ï¼šåªæ¸…ç†ç¼“å­˜æ–‡ä»¶ <code>.openapi-cache.json</code>ã€‚</li>
</ul>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç®€å†™ï¼š</p>
<ul>
<li><code>openapi-ts gen</code> æˆ– <code>openapi-ts g</code> ç­‰ä»·äº <code>openapi-ts generate</code>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">ä½¿ç”¨ openapi.config.json è¿›è¡Œé…ç½®</h3>
<p>CLI æ”¯æŒä»å½“å‰å·¥ä½œç›®å½•ä¸‹è¯»å– <code>openapi.config.json</code> ä½œä¸ºé»˜è®¤é…ç½®ï¼Œç„¶åå†ç”±å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œè¦†ç›–ã€‚</p>
<p>ä¸€ä¸ªå…¸å‹çš„ <code>openapi.config.json</code> ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://localhost:8080/v3/api-docs"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://localhost:8080"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"outputDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"src/openapi"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"enableCache"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"skipTimeout"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"force"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åœ¨æœ‰äº†è¿™ä¸ªæ–‡ä»¶ä¹‹åï¼Œä½ å¯ä»¥ç›´æ¥è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx openapi-ts generate
</code></pre>
<p>æ­¤æ—¶ CLI ä¼šæŒ‰å¦‚ä¸‹ä¼˜å…ˆçº§åˆå¹¶é…ç½®ï¼š</p>
<ol>
<li>å‘½ä»¤è¡Œå‚æ•°ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰ï¼›</li>
<li><code>openapi.config.json</code> ä¸­çš„å­—æ®µï¼›</li>
<li>å†…ç½®é»˜è®¤å€¼ï¼ˆä¾‹å¦‚ <code>outputDir</code> é»˜è®¤ä¸º <code>src/openapi</code>ï¼‰ã€‚</li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>æœ€ç»ˆ <code>url</code> æ¥æºï¼š<code>--url</code> &gt; <code>openapi.config.json</code> ä¸­çš„ <code>url</code>ï¼›</li>
<li>æœ€ç»ˆ <code>baseUrl</code> æ¥æºï¼š<code>--base-url</code> &gt; <code>openapi.config.json.baseUrl</code> &gt;ï¼ˆè¿œç¨‹åœ°å€æ—¶è‡ªåŠ¨ä» <code>url</code> æå–ï¼‰ï¼›</li>
<li>æœ€ç»ˆ <code>outputDir</code> æ¥æºï¼š<code>--output-dir</code> &gt; <code>openapi.config.json.outputDir</code> &gt; é»˜è®¤å€¼ <code>src/openapi</code>ã€‚</li>
</ul>
<p>å¦‚æœæ—¢æ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¼  <code>--url</code>ï¼Œä¹Ÿæ²¡æœ‰åœ¨é…ç½®æ–‡ä»¶é‡Œé…ç½® <code>url</code>ï¼ŒCLI ä¼šç»™å‡ºé”™è¯¯æç¤ºå¹¶é€€å‡ºã€‚</p>
<hr/>
<h3 data-id="heading-3">generateï¼šç”Ÿæˆç±»å‹å’Œå®¢æˆ·ç«¯</h3>
<p><code>generate</code> æ˜¯ CLI ä¸­æœ€æ ¸å¿ƒçš„å‘½ä»¤ï¼Œç”¨äºæ ¹æ® OpenAPI è§„èŒƒç”Ÿæˆç±»å‹æ–‡ä»¶å’Œ API å®¢æˆ·ç«¯ã€‚</p>
<h4 data-id="heading-4">å‘½ä»¤å‚æ•°</h4>
<pre><code class="hljs language-bash" lang="bash">openapi-ts generate \
  --url        &lt;specUrl&gt;   \ <span class="hljs-comment"># OpenAPI æ–‡æ¡£åœ°å€ï¼ˆJSON æˆ– YAMLï¼‰</span>
  --base-url   &lt;baseUrl&gt;   \ <span class="hljs-comment"># API åŸºç¡€åœ°å€ï¼Œå¯é€‰</span>
  --output-dir &lt;outputDir&gt; \ <span class="hljs-comment"># è¾“å‡ºç›®å½•ï¼Œé»˜è®¤ src/openapi</span>
  --enable-cache           \ <span class="hljs-comment"># å¯ç”¨ç¼“å­˜ï¼ˆé»˜è®¤ trueï¼‰</span>
  --skip-timeout &lt;ms&gt;      \ <span class="hljs-comment"># è·³è¿‡è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
  --force                    <span class="hljs-comment"># å¼ºåˆ¶é‡æ–°ç”Ÿæˆï¼Œå¿½ç•¥ç¼“å­˜</span>
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><code>--url</code> / <code>-u</code>ï¼šOpenAPI è§„èŒƒåœ°å€ï¼Œæ”¯æŒ <code>http(s)</code> å’Œæœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼›</li>
<li><code>--base-url</code> / <code>-b</code>ï¼šç”Ÿæˆå®¢æˆ·ç«¯æ—¶ä½¿ç”¨çš„åŸºç¡€åœ°å€ï¼›
<ul>
<li>å¦‚æœæ˜¯è¿œç¨‹ <code>http(s)</code> åœ°å€ä¸”æœªæ˜¾å¼æä¾› <code>baseUrl</code>ï¼ŒCLI ä¼šè‡ªåŠ¨å°è¯•ä» <code>url</code> ä¸­æå–ï¼ˆå½¢å¦‚ <code>protocol://host</code>ï¼‰ï¼›</li>
<li>å¦‚æœæ˜¯æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œä¸”æœªæä¾› <code>baseUrl</code>ï¼ŒCLI ä¼šæç¤ºä½ å¿…é¡»æä¾›ä¸€ä¸ª <code>baseUrl</code>ï¼ˆå¯ä»¥å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼‰ã€‚</li>
</ul>
</li>
<li><code>--output-dir</code> / <code>-o</code>ï¼šç”Ÿæˆæ–‡ä»¶è¾“å‡ºç›®å½•ï¼Œé»˜è®¤æ˜¯ <code>src/openapi</code>ï¼›</li>
<li><code>--enable-cache</code> / <code>-c</code>ï¼šæ˜¯å¦å¯ç”¨ç¼“å­˜ï¼Œé»˜è®¤å¼€å¯ï¼›ç¼“å­˜æ–‡ä»¶ä¸º <code>{outputDir}/.openapi-cache.json</code>ï¼›</li>
<li><code>--skip-timeout</code> / <code>-t</code>ï¼šåœ¨å¯ç”¨ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸ä¸Šæ¬¡ç”Ÿæˆé—´éš”æ—¶é—´å°äºè¯¥å€¼ï¼ˆæ¯«ç§’ï¼‰ï¼Œä¸” <code>url</code> / <code>baseUrl</code> æœªå‘ç”Ÿæ”¹å˜ï¼Œåˆ™ä¼šè·³è¿‡æœ¬æ¬¡ç”Ÿæˆï¼›</li>
<li><code>--force</code> / <code>-f</code>ï¼šå¼ºåˆ¶é‡æ–°ç”Ÿæˆï¼Œå¿½ç•¥ç¼“å­˜é€»è¾‘ã€‚</li>
</ul>
<h4 data-id="heading-5">å¸¸è§ç”¨æ³•ç¤ºä¾‹</h4>
<ol>
<li><strong>å®Œå…¨ä¾èµ–é…ç½®æ–‡ä»¶ï¼š</strong></li>
</ol>
<pre><code class="hljs language-bash" lang="bash">npx openapi-ts generate
</code></pre>
<p>åªè¦åœ¨ <code>openapi.config.json</code> ä¸­æä¾›äº† <code>url</code>ï¼ˆä»¥åŠå¯é€‰çš„å…¶ä»–å­—æ®µï¼‰ï¼Œå°±å¯ä»¥è¿™æ ·ä½¿ç”¨ã€‚</p>
<ol start="2">
<li><strong>åœ¨é…ç½®åŸºç¡€ä¸Šä¸´æ—¶è¦†ç›–éƒ¨åˆ†å­—æ®µï¼š</strong></li>
</ol>
<pre><code class="hljs language-bash" lang="bash">npx openapi-ts generate \
  --url http://localhost:8081/v3/api-docs \
  --force
</code></pre>
<p>è¿™é‡Œä¼šè¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„ <code>url</code>ï¼Œå¹¶ä¸”å¼ºåˆ¶é‡æ–°ç”Ÿæˆï¼ˆæ— è§†ç¼“å­˜ï¼‰ã€‚</p>
<ol start="3">
<li><strong>ä¸ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œä»…å‘½ä»¤è¡Œå‚æ•°é©±åŠ¨ï¼š</strong></li>
</ol>
<pre><code class="hljs language-bash" lang="bash">npx openapi-ts generate \
  --url ./openapi.yaml \
  --base-url https://api.example.com \
  --output-dir src/openapi
</code></pre>
<p>å½“ <code>url</code> æ˜¯æœ¬åœ°æ–‡ä»¶è·¯å¾„æ—¶ï¼Œ<code>baseUrl</code> å¿…é¡»æ˜¾å¼æä¾›ï¼ˆæˆ–å†™åœ¨ <code>openapi.config.json</code> é‡Œï¼‰ï¼Œå¦åˆ™ CLI ä¼šæŠ¥é”™ã€‚</p>
<hr/>
<h3 data-id="heading-6">cleanï¼šæ¸…ç†ç”Ÿæˆæ–‡ä»¶</h3>
<p><code>clean</code> å‘½ä»¤ç”¨äºæ¸…ç†é€šè¿‡ CLI æˆ–æ’ä»¶ç”Ÿæˆçš„æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openapi-ts clean \
  --<span class="hljs-built_in">dir</span>         &lt;outputDir&gt; \
  --clean-cache           <span class="hljs-comment"># æ˜¯å¦åŒæ—¶æ¸…ç†ç¼“å­˜ï¼Œé»˜è®¤ true</span>
</code></pre>
<ul>
<li>é»˜è®¤ä¼šåˆ é™¤ <code>{outputDir}/schemes.ts</code> å’Œ <code>{outputDir}/index.ts</code>ï¼›</li>
<li>å¦‚æœ <code>--clean-cache</code> ä¸º <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼Œè¿˜ä¼šåˆ é™¤ <code>{outputDir}/.openapi-cache.json</code>ã€‚</li>
</ul>
<p>å…¸å‹ç”¨æ³•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx openapi-ts clean
</code></pre>
<p>é…åˆ <code>openapi.config.json</code> æˆ–é»˜è®¤å€¼ä½¿ç”¨æ—¶ï¼Œä¼šæ¸…ç† <code>src/openapi</code> ä¸‹çš„ç”Ÿæˆå†…å®¹ã€‚<br/>
åœ¨éœ€è¦â€œé‡æ–°å®Œæ•´ç”Ÿæˆâ€æˆ–é‡ç½®ç”ŸæˆçŠ¶æ€æ—¶ï¼Œè¿™ä¸ªå‘½ä»¤éå¸¸æœ‰ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-7">clean-cacheï¼šä»…æ¸…ç†ç¼“å­˜</h3>
<p>å¦‚æœä½ åªæƒ³æ¸…ç†ç¼“å­˜æ–‡ä»¶ï¼Œè€Œä¿ç•™å·²ç»ç”Ÿæˆå¥½çš„ç±»å‹å’Œå®¢æˆ·ç«¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>clean-cache</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openapi-ts clean-cache --<span class="hljs-built_in">dir</span> src/openapi
</code></pre>
<p>è¿™æ¡å‘½ä»¤åªä¼šåˆ é™¤æŒ‡å®šç›®å½•ä¸‹çš„ <code>.openapi-cache.json</code>ï¼Œä¸ä¼šå½±å“å·²æœ‰çš„ <code>schemes.ts</code> å’Œ <code>index.ts</code>ã€‚</p>
<hr/>
<h3 data-id="heading-8">åœ¨ npm scripts / CI ä¸­ä½¿ç”¨</h3>
<p>æ¨èæŠŠ CLI å‘½ä»¤å°è£…åˆ° <code>package.json</code> é‡Œï¼Œæ–¹ä¾¿å›¢é˜Ÿæˆå‘˜ç»Ÿä¸€ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"openapi:gen"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"openapi-ts generate"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"openapi:clean"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"openapi-ts clean"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"openapi:clean-cache"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"openapi-ts clean-cache"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç„¶ååœ¨å‘½ä»¤è¡Œä¸­ç›´æ¥æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm openapi:gen
</code></pre>
<p>åœ¨ CI åœºæ™¯é‡Œï¼Œå¯ä»¥åœ¨æ„å»ºå‰æ’å…¥ä¸€æ®µï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm openapi:gen
pnpm build
</code></pre>
<p>è¿™æ ·å¯ä»¥ç¡®ä¿ç”Ÿæˆçš„ç±»å‹ä¸æœåŠ¡ç«¯ OpenAPI è§„èŒƒä¿æŒæœ€æ–°ï¼Œä»è€Œåœ¨å‰ç«¯æ„å»ºé˜¶æ®µå°±å‘ç°æ¥å£ä¸å…¼å®¹çš„é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-9">å°ç»“</h3>
<ul>
<li>CLI é€‚åˆåœ¨ Vite ä¹‹å¤–çš„åœºæ™¯ä½¿ç”¨ï¼Œä¾‹å¦‚ CIã€ç‹¬ç«‹è„šæœ¬æˆ– monorepo æ ¹ç›®å½•ï¼›</li>
<li>é€šè¿‡ <code>openapi.config.json</code> + CLI å‚æ•°è¦†ç›–çš„æœºåˆ¶ï¼Œå¯ä»¥å…¼é¡¾â€œç»Ÿä¸€é…ç½®â€å’Œâ€œå±€éƒ¨çµæ´»è°ƒæ•´â€ï¼›</li>
<li><code>generate</code> è´Ÿè´£ç”Ÿæˆï¼Œ<code>clean</code> / <code>clean-cache</code> è´Ÿè´£å›æ”¶å’Œé‡ç½®ï¼Œæ­é…ä½¿ç”¨å¯ä»¥æ„å»ºå‡ºä¸€å¥—æ¯”è¾ƒå®Œæ•´çš„æ¥å£ä»£ç ç”Ÿæˆæµç¨‹ã€‚</li>
</ul>
<p>åœ¨æ›´å®Œæ•´çš„é¡¹ç›®ä»‹ç» / æ¨èæ–‡ç« ä¸­ï¼Œä½ å¯ä»¥å°†æœ¬æ–‡ä»¶çš„å†…å®¹ä½œä¸ºâ€œCLI ä½¿ç”¨ç« èŠ‚â€ç›´æ¥åµŒå…¥ï¼›å¦‚æœä½ åªæƒ³å•ç‹¬ä»‹ç»å‘½ä»¤è¡Œç”¨æ³•ï¼Œä¹Ÿå¯ä»¥å•ç‹¬å‘å¸ƒè¿™ä¸€ç¯‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Androidã€‘æ¨¡æ¿åŒ–è§£å†³å¤æ‚åœºæ™¯çš„æ»‘åŠ¨å†²çªé—®é¢˜]]></title>    <link>https://juejin.cn/post/7572793505899757619</link>    <guid>https://juejin.cn/post/7572793505899757619</guid>    <pubDate>2025-11-16T07:57:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572793505899757619" data-draft-id="7572539461478285355" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Androidã€‘æ¨¡æ¿åŒ–è§£å†³å¤æ‚åœºæ™¯çš„æ»‘åŠ¨å†²çªé—®é¢˜"/> <meta itemprop="keywords" content="Java,Android"/> <meta itemprop="datePublished" content="2025-11-16T07:57:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Propeller"/> <meta itemprop="url" content="https://juejin.cn/user/4311645702612554"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Androidã€‘æ¨¡æ¿åŒ–è§£å†³å¤æ‚åœºæ™¯çš„æ»‘åŠ¨å†²çªé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4311645702612554/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Propeller
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T07:57:02.000Z" title="Sun Nov 16 2025 07:57:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»¿å†™é¡¹ç›®çš„ä¸šåŠ¡åœºæ™¯åˆšå¥½è¦†ç›–æœ‰ä¸¤ç§å¤æ‚æ»‘åŠ¨å†²çªåœºæ™¯ï¼š</p>
<p>Horizontal ViewPager2 åµŒå¥— Vertical RecyclerView (<strong>OuterRecyclerView</strong>) åµŒå¥— Horizontal RecyclerView (<strong>InnerRecyclerView</strong>) çš„æ¨ªçºµæ¨ªåœºæ™¯å’Œ</p>
<p>Horizontal ViewPager2 åµŒå¥— Horizontal ViewPager2 (<strong>InnerViewPager</strong>) åµŒå¥— Vertical RecyclerView çš„æ¨ªæ¨ªçºµåœºæ™¯ã€‚</p>
<p>åŒæ—¶è¦è®©å†…å±‚çš„ InnerRecyclerView å’Œ InnerViewPager åœ¨æ¨ªå‘æ»‘åŠ¨æ–¹å‘å°šå¯æ»‘åŠ¨æ¥ç®¡äº‹ä»¶ï¼Œä¸å¯æ»‘åŠ¨æ—¶å°†äº‹ä»¶äº¤ç»™å¤–å±‚çš„ Horizontal ViewPager2ã€‚</p>
<h2 data-id="heading-0">èƒŒæ™¯åŸç†</h2>
<p>æˆ‘ä»¬çŸ¥é“ MotionEvent äº‹ä»¶ä¼ é€’æ˜¯ç”± DecorView åˆ° ViewGroup å†åˆ° Viewï¼Œå®Œæ•´äº‹ä»¶åºåˆ—å¿…å®šç”± MotionEvent.DOWN å¼€å§‹ï¼ŒViewGroup åœ¨äº‹ä»¶ä¼ é€’è¿‡ç¨‹ä¸­ä¼šåˆ¤æ–­æ˜¯å¦æ‹¦æˆªè¯¥äº‹ä»¶åºåˆ—ï¼Œå¦‚æœ DOWN è¢«æ‹¦æˆªåˆ™è¯¥ ViewGroup ä¼šå®Œå…¨æ¥ç®¡åç»­æ‰€æœ‰äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> intercepted;
<span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN
        || mFirstTouchTarget != <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">disallowIntercept</span> <span class="hljs-operator">=</span> (mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT) != <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span> (!disallowIntercept) {
        intercepted = onInterceptTouchEvent(ev);
        ev.setAction(action);
    } <span class="hljs-keyword">else</span> {
        intercepted = <span class="hljs-literal">false</span>;
    }
} <span class="hljs-keyword">else</span> {
    intercepted = <span class="hljs-literal">true</span>;
}
</code></pre>
<p>ç”±å¤–å±‚æ¡ä»¶è¯­å¥çŸ¥ï¼Œchild çš„ requestDisallowInterceptTouchEvent æ–¹æ³•æ— æ³•å½±å“ ViewGroup å¯¹ DOWN äº‹ä»¶çš„æ‹¦æˆªå¤„ç†ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æƒ…å†µ ViewGroup æ´¾ç”Ÿç±»éƒ½ä¸ä¼šæ‹¦æˆª DOWN äº‹ä»¶ï¼Œé€šå¸¸é€»è¾‘æ˜¯è®© child æ¶ˆè´¹ DOWN äº‹ä»¶ï¼Œå†æ ¹æ®åç»­ MOVE æ–¹å‘åˆ¤æ–­æ˜¯å¦æ‹¦æˆªã€‚</p>
<h3 data-id="heading-1">requestDisallowInterceptTouchEvent</h3>
<p>è¯¥æ–¹æ³•æ˜¯ child å‘é€ç»™çˆ¶å®¹å™¨çš„è¯·æ±‚ï¼Œå‚æ•°çš„å¸ƒå°”å€¼è¡¨ç¤ºæ˜¯å¦æœŸæœ›çˆ¶å®¹å™¨æ‹¦æˆªäº‹ä»¶ï¼Œçˆ¶å®¹å™¨æ¥æ”¶åˆ°è¯·æ±‚åä¼šå°† FLAG_DISALLOW_INTERCELT æ ‡å¿—ä½è®¾ç½®ä¸º 1ï¼Œå†…éƒ¨çš„ disallowIntercept å­—æ®µè¿›è€Œå¾—åˆ° trueã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">requestDisallowInterceptTouchEvent</span><span class="hljs-params">(<span class="hljs-type">boolean</span> disallowIntercept)</span> {
    <span class="hljs-keyword">if</span> (mParent != <span class="hljs-literal">null</span>) {
        mParent.requestDisallowInterceptTouchEvent(disallowIntercept);
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">requestDisallowInterceptTouchEvent</span><span class="hljs-params">(<span class="hljs-type">boolean</span> disallowIntercept)</span> {

    <span class="hljs-keyword">if</span> (disallowIntercept == ((mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT) != <span class="hljs-number">0</span>)) {
        <span class="hljs-comment">// We're already in this state, assume our ancestors are too</span>
<span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (disallowIntercept) {
        mGroupFlags |= FLAG_DISALLOW_INTERCEPT;
    } <span class="hljs-keyword">else</span> {
        mGroupFlags &amp;= ~FLAG_DISALLOW_INTERCEPT;
    }

    <span class="hljs-comment">// Pass it up to our parent</span>
<span class="hljs-keyword">if</span> (mParent != <span class="hljs-literal">null</span>) {
        mParent.requestDisallowInterceptTouchEvent(disallowIntercept);
    }
} <span class="hljs-comment">/* mGroupFlagså¯ä»¥çœ‹æˆæ ‡è®°ä½å¤§é›†åˆ */</span>
</code></pre>
<p>æ‰€ä»¥è§£å†³æ»‘åŠ¨å†²çªçš„æ–¹æ³•å¾ˆæ˜ç¡®ï¼šçˆ¶å¸ƒå±€ä¸è¦æ‹¦æˆªå‘ä¸‹ä¼ é€’çš„ DOWN äº‹ä»¶ï¼Œè®© child åœ¨ DOWN äº‹ä»¶ç¦æ­¢çˆ¶å¸ƒå±€æ‹¦æˆªäº‹ä»¶ï¼Œæ ¹æ®åç»­ MOVE äº‹ä»¶çš„æ»‘åŠ¨æ–¹å‘å’Œ child æœ¬èº«çš„æƒ…å†µåˆ¤æ–­æ˜¯å¦å…è®¸çˆ¶å¸ƒå±€æ‹¦æˆªäº‹ä»¶ï¼Œåœ¨ CANCEL æˆ– UP äº‹ä»¶æ¢å¤åŸçŠ¶ã€‚</p>
<h2 data-id="heading-2">æ¨ªçºµæ¨ª</h2>
<p>InnerRecyclerView åˆ¤æ–­æ˜¯å¦ä¸ºæ¨ªå‘æ»‘åŠ¨ä¸”æ»‘åŠ¨æ–¹å‘æœ‰å†…å®¹åœ¨å±å¹•å¤–ï¼Œæ˜¯åˆ™ç”±è‡ªå·±æ¥ç®¡ï¼Œå¦åˆ™äº¤ç»™ ViewPager2ï¼Œè¿™é‡Œåˆ©ç”¨ View æ ‘çš„ç‰¹ç‚¹å†’æ³¡è·å¾—ä»¥ ViewPager2 ä¸ºçˆ¶å®¹å™¨çš„ Viewï¼Œå¯¹è¯¥ View è¿›è¡Œ requestDisallowInterceptTouchEventï¼Œéš”ç¦»äº† OuterRecyclerView å’Œ ViewPager2ã€‚</p>
<p>å¦‚æœä¸ºçºµå‘æ»‘åŠ¨åˆ™è®¾ç½® requestDisallowInterceptTouchEvent(false)ï¼Œè®© OuterRecyclerView æ¥ç¦æ­¢çˆ¶å®¹å™¨æ‹¦æˆªï¼Œä¿è¯äº† InnerRecyclerView å’Œ OuterRecyclerView äº’ä¸å†²çªã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerRecyclerView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RecyclerView</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> x0, y0;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> touchSlop;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InnerRecyclerView</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-built_in">super</span>(context);
        touchSlop = ViewConfiguration.get(context).getScaledTouchSlop();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InnerRecyclerView</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Context context, <span class="hljs-meta">@Nullable</span> AttributeSet attrs)</span> {
        <span class="hljs-built_in">super</span>(context, attrs);
        touchSlop = ViewConfiguration.get(context).getScaledTouchSlop();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InnerRecyclerView</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Context context, <span class="hljs-meta">@Nullable</span> AttributeSet attrs, <span class="hljs-type">int</span> defStyleAttr)</span> {
        <span class="hljs-built_in">super</span>(context, attrs, defStyleAttr);
        touchSlop = ViewConfiguration.get(context).getScaledTouchSlop();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onInterceptTouchEvent</span><span class="hljs-params">(MotionEvent e)</span> {
        <span class="hljs-type">ViewGroup</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>;
        <span class="hljs-keyword">while</span> (v != <span class="hljs-literal">null</span> &amp;&amp; !(v.getParent() <span class="hljs-keyword">instanceof</span> ViewPager2)) {
            v = (ViewGroup) v.getParent();
        }

        <span class="hljs-keyword">switch</span> (e.getActionMasked()) {
            <span class="hljs-keyword">case</span> MotionEvent.ACTION_DOWN:
                x0 = e.getX();
                y0 = e.getY();
                v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">true</span>);
                <span class="hljs-keyword">break</span>;

            <span class="hljs-keyword">case</span> MotionEvent.ACTION_MOVE:
                <span class="hljs-type">double</span> <span class="hljs-variable">dx</span> <span class="hljs-operator">=</span> e.getX() - x0;
                <span class="hljs-type">double</span> <span class="hljs-variable">dy</span> <span class="hljs-operator">=</span> e.getY() - y0;

                <span class="hljs-keyword">if</span> (Math.abs(dx) &lt; touchSlop &amp;&amp; Math.abs(dy) &lt; touchSlop) <span class="hljs-keyword">break</span>;

                <span class="hljs-keyword">if</span> (Math.abs(dx) &gt; Math.abs(dy)) {
                    <span class="hljs-keyword">if</span> (dx &gt; <span class="hljs-number">0</span>) {
                        <span class="hljs-keyword">if</span> (!canScrollHorizontally(-<span class="hljs-number">1</span>)) {
                            v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">false</span>);
                        } <span class="hljs-keyword">else</span> {
                            v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">true</span>);
                        }
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">if</span> (!canScrollHorizontally(<span class="hljs-number">1</span>)) {
                            v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">false</span>);
                        } <span class="hljs-keyword">else</span> {
                            v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">true</span>);
                        }
                    }
                } <span class="hljs-keyword">else</span> {
                    v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">false</span>);
                }
                <span class="hljs-keyword">break</span>;

            <span class="hljs-keyword">case</span> MotionEvent.ACTION_UP:
            <span class="hljs-keyword">case</span> MotionEvent.ACTION_CANCEL:
                v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">false</span>);
                <span class="hljs-keyword">break</span>;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.onInterceptTouchEvent(e);
    }
}
</code></pre>
<p>OuterRecyclerView åˆ¤æ–­æ˜¯å¦ä¸ºçºµå‘æ»‘åŠ¨ï¼Œæ˜¯åˆ™ç”±è‡ªå·±æ¥ç®¡ï¼Œå¦åˆ™äº¤ç»™ ViewPager2ï¼ŒInnerRecycler å’Œ OuterRecyclerView çš„æ‹¦æˆªå†³ç­–å‡åªå½±å“ ViewPager2 æ˜¯å¦æ‹¦æˆªï¼Œæ‰€ä»¥ä¿è¯ ViewPager2 å’Œå†…å±‚æ•´ä½“äº’ä¸å†²çªï¼Œè¿›è€Œè§£å†³æ¨ªçºµæ¨ªæ–¹å‘çš„æ»‘åŠ¨å†²çªã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OuterRecyclerView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RecyclerView</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> x0, y0;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> touchSlop;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OuterRecyclerView</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Context context)</span> {
        <span class="hljs-built_in">super</span>(context);
        touchSlop = ViewConfiguration.get(context).getScaledTouchSlop();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OuterRecyclerView</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Context context, <span class="hljs-meta">@Nullable</span> AttributeSet attrs)</span> {
        <span class="hljs-built_in">super</span>(context, attrs);
        touchSlop = ViewConfiguration.get(context).getScaledTouchSlop();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OuterRecyclerView</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Context context, <span class="hljs-meta">@Nullable</span> AttributeSet attrs, <span class="hljs-type">int</span> defStyleAttr)</span> {
        <span class="hljs-built_in">super</span>(context, attrs, defStyleAttr);
        touchSlop = ViewConfiguration.get(context).getScaledTouchSlop();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onInterceptTouchEvent</span><span class="hljs-params">(MotionEvent ev)</span> {
        <span class="hljs-keyword">switch</span> (ev.getAction()) {
            <span class="hljs-keyword">case</span> MotionEvent.ACTION_DOWN:
                x0 = ev.getX();
                y0 = ev.getY();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> MotionEvent.ACTION_MOVE:
                <span class="hljs-type">double</span> <span class="hljs-variable">dx</span> <span class="hljs-operator">=</span> ev.getX() - x0;
                <span class="hljs-type">double</span> <span class="hljs-variable">dy</span> <span class="hljs-operator">=</span> ev.getY() - y0;

                <span class="hljs-keyword">if</span> (Math.abs(dx) &lt; touchSlop &amp;&amp; Math.abs(dy) &lt; touchSlop) <span class="hljs-keyword">break</span>;

                <span class="hljs-keyword">if</span> (Math.abs(dy) &gt; Math.abs(dx)) {
                    getParent().requestDisallowInterceptTouchEvent(<span class="hljs-literal">true</span>);
                } <span class="hljs-keyword">else</span> getParent().requestDisallowInterceptTouchEvent(<span class="hljs-literal">false</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> MotionEvent.ACTION_UP:
            <span class="hljs-keyword">case</span> MotionEvent.ACTION_CANCEL:
                getParent().requestDisallowInterceptTouchEvent(<span class="hljs-literal">false</span>);
                <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.onInterceptTouchEvent(ev);
    }
}
</code></pre>
<h2 data-id="heading-3">æ¨ªæ¨ªçºµ</h2>
<p>å› ä¸º ViewPager2 æ˜¯ final ç±»ï¼Œæ— æ³•é€šè¿‡é‡å†™ onInterceptTouchEvent æ–¹æ³•è§£å†³å†²çªï¼Œæ¢ç§æ€è·¯æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ FrameLayout åŒ…è£¹ InnerPager2ï¼Œé‡å†™ FrameLayout çš„ onInterceptTouchEvent æ–¹æ³•æ¥è§£å†³ï¼Œå…¶å†…éƒ¨é€»è¾‘å’Œæ¨ªçºµæ¨ªçš„ InnerRecyclerView ç±»ä¼¼ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerViewPagerContainer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">FrameLayout</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> touchSlop;
    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> startX, startY;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InnerViewPagerContainer</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-built_in">super</span>(context);
        touchSlop = ViewConfiguration.get(context).getScaledTouchSlop();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InnerViewPagerContainer</span><span class="hljs-params">(Context context, AttributeSet attrs)</span> {
        <span class="hljs-built_in">super</span>(context, attrs);
        touchSlop = ViewConfiguration.get(context).getScaledTouchSlop();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onInterceptTouchEvent</span><span class="hljs-params">(MotionEvent e)</span> {
        <span class="hljs-type">ViewGroup</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>;
        <span class="hljs-keyword">while</span> (v != <span class="hljs-literal">null</span> &amp;&amp; !(v.getParent() <span class="hljs-keyword">instanceof</span> ViewPager2)) {
            v = (ViewGroup) v.getParent();
        }

        <span class="hljs-keyword">switch</span> (e.getActionMasked()) {
            <span class="hljs-keyword">case</span> MotionEvent.ACTION_DOWN:
                startX = e.getX();
                startY = e.getY();
                v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">true</span>);
                <span class="hljs-keyword">break</span>;

            <span class="hljs-keyword">case</span> MotionEvent.ACTION_MOVE:
                <span class="hljs-type">float</span> <span class="hljs-variable">dx</span> <span class="hljs-operator">=</span> e.getX() - startX;
                <span class="hljs-type">float</span> <span class="hljs-variable">dy</span> <span class="hljs-operator">=</span> e.getY() - startY;

                <span class="hljs-keyword">if</span> (Math.abs(dx) &lt; touchSlop &amp;&amp; Math.abs(dy) &lt; touchSlop) <span class="hljs-keyword">break</span>;

                <span class="hljs-keyword">if</span> (Math.abs(dx) &gt; Math.abs(dy)) {
                    <span class="hljs-keyword">if</span> (dx &gt; <span class="hljs-number">0</span>) {
                        <span class="hljs-keyword">if</span> (!getChildAt(<span class="hljs-number">0</span>).canScrollHorizontally(-<span class="hljs-number">1</span>)) {
                            v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">false</span>);
                        } <span class="hljs-keyword">else</span> {
                            v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">true</span>);
                        }
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">if</span> (!getChildAt(<span class="hljs-number">0</span>).canScrollHorizontally(<span class="hljs-number">1</span>)) {
                            v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">false</span>);
                        } <span class="hljs-keyword">else</span> {
                            v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">true</span>);
                        }
                    }
                } <span class="hljs-keyword">else</span> {
                    v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">false</span>);
                }
                <span class="hljs-keyword">break</span>;

            <span class="hljs-keyword">case</span> MotionEvent.ACTION_UP:
            <span class="hljs-keyword">case</span> MotionEvent.ACTION_CANCEL:
                v.requestDisallowInterceptTouchEvent(<span class="hljs-literal">false</span>);
                <span class="hljs-keyword">break</span>;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.onInterceptTouchEvent(e);
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆæ¯ä¸ªå›¢é˜Ÿéƒ½éœ€è¦ä¸€å¥—ç§æœ‰ Context å·¥ç¨‹]]></title>    <link>https://juejin.cn/post/7572781559767302194</link>    <guid>https://juejin.cn/post/7572781559767302194</guid>    <pubDate>2025-11-16T08:27:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572781559767302194" data-draft-id="7572749797468864521" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆæ¯ä¸ªå›¢é˜Ÿéƒ½éœ€è¦ä¸€å¥—ç§æœ‰ Context å·¥ç¨‹"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-16T08:27:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Vadaski"/> <meta itemprop="url" content="https://juejin.cn/user/1767670428477015"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆæ¯ä¸ªå›¢é˜Ÿéƒ½éœ€è¦ä¸€å¥—ç§æœ‰ Context å·¥ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1767670428477015/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Vadaski
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T08:27:59.000Z" title="Sun Nov 16 2025 08:27:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¦‚æœä½ å·²ç»åœ¨å·¥ä½œé‡Œé¢‘ç¹ç”¨å¤§æ¨¡å‹ï¼Œå´æ€»è§‰å¾—â€œå¶å°”å¾ˆæƒŠè‰³ï¼Œå¤§å¤šæ•°æ—¶å€™åˆç´¯åˆä¸ç¨³â€ï¼Œé‚£è¿™ç¯‡æ–‡ç« ä¹Ÿè®¸å€¼å¾—ä½ èŠ±ååˆ†é’Ÿè¯»å®Œï¼šæˆ‘ä¼šä»æˆæœ¬ç»“æ„ã€INâ†’æ¨ç†â†’OUT è¿™ä¸ªæœ€å°å•å…ƒï¼Œä»¥åŠé€šç”¨å·¥å…·åœ¨å¤æ‚ä¸šåŠ¡ä¸­çš„ä¸Šé™å‡ºå‘ï¼Œè¯´æ˜ä¸€ä»¶äº‹â€”â€”åªè¦ä½ ä¸ºè‡ªå·±çš„ä¸šåŠ¡å»ºç«‹ä¸€å¥—ç§æœ‰çš„ Context å·¥ç¨‹å®è·µï¼Œè®©æ„é€ å¥½ IN è¿™ä»¶äº‹å˜å¾—æœ‰ç« å¯å¾ªã€å¯å¤ç”¨ã€å¯æ¼”è¿›ï¼ŒåŒä¸€æ‰¹äººåšåŒæ ·çš„äº‹ï¼Œæ•ˆç‡å‡ºç° 3â€“5 å€çš„è´¨å˜ï¼Œç”šè‡³æ›´é«˜ã€‚
æœ¬æ–‡ä¸Šç¯‡åªå›ç­”ä¸€ä¸ªé—®é¢˜ï¼š<strong>ä¸ºä»€ä¹ˆè¦åšç§æœ‰ Context å·¥ç¨‹</strong>ï¼›ä¸‹ç¯‡å†è°ˆâ€œåº”è¯¥æ€ä¹ˆåšâ€ã€‚</p>
<h2 data-id="heading-1">ä¸€ä¸ªç›´è§‚æ„Ÿå—ï¼šæ¨¡å‹å¾ˆå¼ºï¼Œä½†æ•ˆç‡ä¸ºä»€ä¹ˆæ²¡èµ·æ¥ï¼Ÿ</h2>
<p>å¦‚æœä½ å·²ç»åœ¨å·¥ä½œä¸­é¢‘ç¹ä½¿ç”¨å¤§æ¨¡å‹ï¼Œå¤§æ¦‚ç‡ä¼šæœ‰ä¸€ç§çŸ›ç›¾ä½“éªŒï¼š</p>
<ul>
<li>å®ƒæœ‰æ—¶å€™èƒ½ç»™å‡ºéå¸¸æƒŠè‰³çš„ç»“æœï¼›</li>
<li>ä½†çœŸæ­£æ”¾åˆ°ä¸¥è‚ƒå·¥ä½œé‡Œï¼Œè¦è®©å®ƒæŒç»­é è°±ï¼Œå¾€å¾€éœ€è¦ä½ èŠ±å¾ˆå¤šæ—¶é—´â€œå–‚ä¿¡æ¯ã€è®²èƒŒæ™¯ã€è¡¥ç»†èŠ‚ã€çº æ­£è¯¯è§£â€ã€‚</li>
</ul>
<p>æˆ‘çš„ç›´è§‚æ„Ÿå—æ˜¯ï¼š</p>
<ul>
<li>å½“åªæ˜¯â€œä¸´æ—¶é—®ä¸¤å¥â€çš„æ—¶å€™ï¼Œå·¥å…·å¾ˆå¥½ç”¨ï¼›</li>
<li>å½“æŒ‡æœ›å®ƒè·Ÿæˆ‘ä¸€èµ·å®Œæˆä¸€ä¸ªå®Œæ•´çš„äº§å“è¿­ä»£ã€ç³»ç»Ÿæ”¹é€ ã€è°ƒç ”åˆ†ææ—¶ï¼Œ<strong>ä¸Šä¸‹æ–‡å‡†å¤‡æœ¬èº«å˜æˆäº†ä¸€ä»¶å¾ˆç´¯çš„äº‹</strong>ã€‚</li>
</ul>
<p>åè¿‡æ¥ï¼Œå½“æˆ‘å¼€å§‹ç³»ç»ŸåŒ–åœ°æ€è€ƒâ€œåˆ°åº•è¯¥ç»™å®ƒä»€ä¹ˆã€ä»¥ä»€ä¹ˆç»“æ„ç»™â€ï¼Œå¹¶é’ˆå¯¹è‡ªå·±çš„ä¸šåŠ¡æ­äº†ä¸€äº›å›ºå®šçš„ Context æ¨¡æ¿å’Œæ•´ç†æ–¹å¼ä¹‹åï¼š</p>
<ul>
<li>åŒæ ·çš„äº‹æƒ…ï¼Œæˆ‘çš„æ•ˆç‡å¤§æ¦‚ç¨³å®šæé«˜åœ¨Â <strong>3â€“5å€</strong>ï¼›</li>
<li>é‡ç‚¹ä¸åœ¨äºæ¨¡å‹å˜èªæ˜äº†ï¼Œè€Œåœ¨äºï¼š<strong>æˆ‘å’Œå®ƒä¹‹é—´çš„ä¿¡æ¯é€šé“å˜å¾—æ›´åˆç†äº†</strong>ã€‚</li>
</ul>
<p>è¿™èƒŒåæŒ‡å‘çš„æ˜¯ä¸€ä»¶æ›´åº•å±‚çš„äº‹ï¼š<strong>æ™ºåŠ›çš„æˆæœ¬ç»“æ„å·²ç»è¢«æ‚„æ‚„æ”¹å†™äº†ã€‚</strong></p>
<h2 data-id="heading-2">æ™ºåŠ›çš„å·¥ä¸šåŒ–ï¼šæˆæœ¬ç»“æ„çš„å·¨å˜</h2>
<p>è¿‡å»ï¼Œå¤æ‚é—®é¢˜çš„æ ¸å¿ƒæˆæœ¬åœ¨äºâ€œäººè„‘â€ï¼š</p>
<ul>
<li>èƒ½åšæ³›åŒ–æ¨ç†çš„åªæœ‰äººï¼›</li>
<li>çŸ¥è¯†æ— æ³•ä½æˆæœ¬å¤åˆ¶ï¼Œåªèƒ½é åŸ¹è®­ã€ä¼šè®®ã€åä½œä¸€ç‚¹ç‚¹ä¼ é€’ï¼›</li>
<li>æ‰€ä»¥ç»å¤§å¤šæ•°ç»„ç»‡çš„ä¸»è¦æˆæœ¬ï¼Œéƒ½å‹åœ¨â€œæ‰¾äºº + ç”¨äºº + åè°ƒäººâ€ä¸Šã€‚</li>
</ul>
<p>å¤§æ¨¡å‹æŠŠè¿™ä»¶äº‹ç¿»è½¬äº†ï¼š</p>
<ul>
<li>æ¨ç†èƒ½åŠ›å¼€å§‹åƒâ€œæ°´ç”µç½‘â€ä¸€æ ·å¯ä»¥æŒ‰é‡ä»˜è´¹ï¼›</li>
<li>åŒä¸€ä»½æ¨¡å‹èƒ½åŠ›å¯ä»¥è¢«æ— æ•°ä»»åŠ¡é‡å¤è°ƒç”¨ï¼›</li>
<li>æˆ‘ä»¬ç¬¬ä¸€æ¬¡å¯ä»¥æŠŠâ€œéƒ¨åˆ†æ™ºåŠ›åŠ³åŠ¨â€è§†ä¸ºä¸€ç§åŸºç¡€è®¾æ–½ã€‚</li>
</ul>
<p>å¦‚æœåªçœ‹è´¦å•ï¼Œä½ ä¼šå‘ç°çœŸæ­£å¼€å§‹å˜è´µçš„ä¸æ˜¯â€œæ¨ç†â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>ä¸ºæ¯ä¸€æ¬¡æ¨ç†<br/>
<strong>å‡†å¤‡ã€é€‰æ‹©ã€ç»„ç»‡ã€ç­›é€‰ã€å‹ç¼©ä¿¡æ¯</strong>Â çš„è¿‡ç¨‹ã€‚</li>
</ul>
<p>ç”¨æ›´ç›´ç™½çš„è¯è¯´ï¼š</p>
<blockquote>
<p>**èªæ˜æœ¬èº«å˜ä¾¿å®œäº†ï¼Œ<br/>
ä½†æ˜¯è¿™ä¸ªèªæ˜çš„äººæ²¡æœ‰è®°å¿†ï¼Œ ä»–éœ€è¦æˆ‘ä»¬ä¸€æ¬¡åˆä¸€æ¬¡çš„å‘Šè¯‰ä»–èƒŒæ™¯ä¿¡æ¯ï¼Œ å¦‚æœç»™ä»–è¯´çš„æ˜¯é”™çš„ï¼Œé‚£æˆ‘ä»¬ä¸€å®šæ‹¿ä¸åˆ°å¥½çš„ç»“æœã€‚</p>
</blockquote>
<p>å¦‚æœå·¥ç¨‹æ–¹æ³•è®ºä¸è·Ÿç€è¿™æ³¢æˆæœ¬ç»“æ„çš„å˜åŒ–è°ƒæ•´ï¼Œæˆ‘ä»¬å°±ä¼šå¡åœ¨ä¸€ä¸ªå¥‡æ€ªçš„ä½ç½®ï¼š</p>
<ul>
<li>ç†è®ºä¸Šå·¥å…·è¶Šæ¥è¶Šå¼ºï¼›</li>
<li>å®é™…ä¸Šå¾ˆå¿«å°±è·‘å‡ºäº†ä¸€å †å±å±±ï¼Œæ²¡æœ‰äººèƒ½å¤Ÿç»§ç»­ç»´æŠ¤ä¸‹å»ã€‚</li>
</ul>
<h2 data-id="heading-3">é—®é¢˜è§£å†³çš„æœ€å°å•å…ƒï¼šIN â†’ æ¨ç† â†’ OUT</h2>
<p>ä¸ç®¡æ˜¯å†™ä»£ç ã€å†™ PRDã€åšè¿è¥æ–¹æ¡ˆï¼Œè¿˜æ˜¯åšå¸‚åœºåˆ†æï¼Œæœ¬è´¨ä¸Šéƒ½å¯ä»¥å‹ç¼©æˆä¸€ä¸ªæœ€å°å•å…ƒï¼š</p>
<p>[ è¾“å…¥ï¼ˆINï¼‰â†’ æ¨ç† â†’ è¾“å‡ºï¼ˆOUTï¼‰ ]</p>
<ul>
<li><strong>IN</strong>ï¼šè¿™ä¸€æ­¥ä½ ç»™åˆ°æ¨¡å‹çš„ä¸€åˆ‡ä¸œè¥¿ï¼šç›®æ ‡ã€çº¦æŸã€èƒŒæ™¯ã€ç›¸å…³äº‹å®ã€å†å²å†³ç­–ã€ç¤ºä¾‹â€¦â€¦</li>
<li><strong>æ¨ç†</strong>ï¼šæ¨¡å‹åŸºäºè¿™äº›ä¿¡æ¯åšçš„ç†è§£ã€æ‹†è§£ã€è§„åˆ’ã€ç”Ÿæˆã€‚</li>
<li><strong>OUT</strong>ï¼šä¸­é—´ç»“æœæˆ–æœ€ç»ˆç»“æœï¼šä»£ç ã€è®¾è®¡ã€æ–¹æ¡ˆã€æŠ¥å‘Šã€å†³ç­–å»ºè®®ç­‰ã€‚</li>
</ul>
<p>åœ¨ä»Šå¤©çš„æ¨¡å‹èƒ½åŠ›æ°´å¹³ä¸‹ï¼Œæœ‰ä¸¤ä¸ªåˆ¤æ–­è¶Šæ¥è¶Šæ¸…æ™°ï¼š</p>
<ol>
<li>
<p><strong>æ¨ç†æœ¬èº«å·²ç»ä¸åƒè¿‡å»é‚£æ ·ç¨€ç¼º</strong><br/>
åœ¨å¾ˆå¤šä»»åŠ¡ä¸Šï¼Œå®ƒçš„æ•´ä½“è¡¨ç°å·²ç»è¶…è¿‡äº†æ™®é€šäººç±»çš„å¹³å‡æ°´å‡†ã€‚</p>
</li>
<li>
<p><strong>ç»å¤§å¤šæ•°å¤±è´¥æ¥è‡ª INï¼Œè€Œä¸æ˜¯æ¨ç†é˜¶æ®µ</strong></p>
<ul>
<li>è¯¥ç»™çš„æ²¡ç»™ï¼šå…³é”®å‰æã€é‡è¦å†å²è¢«å½»åº•é—æ¼ï¼›</li>
<li>ä¸è¯¥ç»™çš„ç»™å¤ªå¤šï¼šå¤§é‡å™ªéŸ³å æ»¡äº†æœ‰é™çš„æ³¨æ„åŠ›ï¼›</li>
<li>æ¡ä»¶è¯´ä¸æ¸…ï¼šå“ªäº›æ˜¯å¼ºçº¦æŸã€å“ªäº›åªæ˜¯åå¥½ï¼Œæ¨¡å‹åˆ†ä¸æ¸…ã€‚</li>
</ul>
</li>
</ol>
<p>å¦‚æœå†åŠ ä¸Šå‰é¢é‚£å¥â€œå·¥ç¨‹ä¿¡å¿µâ€ï¼š</p>
<ul>
<li>æˆ‘ä»¬ç›¸ä¿¡ï¼šå¤æ‚é—®é¢˜å¯ä»¥è¢«æ‹†è§£ä¸ºè¶³å¤Ÿå¤šçš„å°é—®é¢˜ï¼›</li>
<li>æˆ‘ä»¬ä¹Ÿç›¸ä¿¡ï¼šå¯¹è¿™äº›å°é—®é¢˜ï¼ŒIN â†’ æ¨ç† â†’ OUT çš„æœ€å°å•å…ƒæ˜¯æˆç«‹çš„ï¼›</li>
</ul>
<p>é‚£ä¹ˆå°±å¯ä»¥åšå‡ºè¿™æ ·ä¸€ä¸ªæ¨æ¼”ï¼š</p>
<blockquote>
<p><strong>åªè¦æˆ‘ä»¬èƒ½æŒç»­æ„é€ å‡ºè¶³å¤Ÿå¥½çš„ INï¼Œ<br/>
ç†è®ºä¸Šï¼ŒAI å¯ä»¥è¢«ç”¨æ¥å®Œæˆå‡ ä¹ä¸€åˆ‡ä»»åŠ¡ã€‚</strong></p>
</blockquote>
<p>è¿™ä¸æ˜¯ä¸€å¥åŠ±å¿—å£å·ï¼Œè€Œæ˜¯ä¸€ä¸ªå…³äº<strong>æˆæœ¬ç»“æ„ + å·¥ç¨‹æ‹†è§£ + æœ€å°å•å…ƒ</strong>çš„æ¨ç†ç»“æœã€‚</p>
<h2 data-id="heading-4">å·¥å…·å±‚çš„â€œçœ¼èŠ±ç¼­ä¹±â€ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨å¸®ä½ æ„é€  IN</h2>
<p>è¿™ä¸¤å¹´å›´ç»•å¤§æ¨¡å‹å·²ç»æ¶Œç°äº†å¤§é‡â€œè¾…åŠ©å·¥å…·â€å’Œâ€œæ–¹æ³•è®ºâ€ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å„ç§è§„èŒƒæµç¨‹å·¥å…·ï¼ˆå¦‚ spec-kit ç­‰ï¼‰ï¼›</li>
<li>ç»“æ„åŒ–æ€è€ƒ/æ‹†è§£æ–¹æ³•ï¼ˆå¦‚ bmad-method ç­‰ï¼‰ï¼›</li>
<li>claude code çš„ skills / mcp èƒ½åŠ›é›†åˆï¼›</li>
</ul>
<p>å¦‚æœåªç›¯ç€è¿™äº›å·¥å…·çš„åå­—å’Œå½¢æ€ï¼Œå¾ˆå®¹æ˜“æœ‰ä¸€ç§â€œçœ¼èŠ±ç¼­ä¹±â€çš„æ„Ÿè§‰ï¼š</p>
<ul>
<li>ä»Šå¤©æ˜¯ A å¥—ä»¶ï¼Œæ˜å¤©æ˜¯ B æ–¹æ³•è®ºï¼Œåå¤©åˆå†’å‡ºä¸€ä¸ª C å¹³å°ï¼›</li>
<li>ä¼¼ä¹ä¸è·Ÿä¸€è·Ÿæœ€æ–°çš„å·¥å…·ï¼Œå°±ä¼šè½ä¼ã€‚</li>
</ul>
<p>ä½†ä»Â <strong>IN â†’ æ¨ç† â†’ OUT</strong>Â çš„è§’åº¦å¾€å›çœ‹ï¼Œè¿™äº›ä¸œè¥¿æœ‰ä¸€ä¸ªå…±åŒçš„æœ¬è´¨ï¼š</p>
<blockquote>
<p><strong>å®ƒä»¬æ— ä¸€ä¾‹å¤–ï¼Œéƒ½æ˜¯åœ¨å¸®ä½ æ„é€ ä¸€ä¸ªâ€œæ›´å¥½ã€æ›´ç¡®å®šçš„ INâ€ã€‚</strong></p>
</blockquote>
<p>æŠŠè„‘å­é‡Œçš„æƒ³æ³•å˜æˆçœŸæ­£å¯äº¤ä»˜çš„ç»“æœï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªâ€œè§£å‹ç¼©â€çš„è¿‡ç¨‹ï¼š</p>
<ul>
<li>ä¸€å¼€å§‹åªæ˜¯æ¨¡ç³Šç›´è§‰å’Œé›¶æ•£æƒ³æ³•ï¼›</li>
<li>é€æ­¥è¢«å‹æˆè§„æ ¼æ›´æ¸…æ™°çš„æè¿°ã€å†³ç­–ã€æ–¹æ¡ˆã€å®ç°ï¼›</li>
<li>åœ¨è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä¸æ–­å¯¹é½ï¼ˆalignmentï¼‰ã€ä¿®æ­£ã€è¡¥å……ï¼Œæœ€åæ‰æ”¶æ•›ä¸ºä¸€ä¸ªå¯ä»¥äº¤ä»˜çš„ OUTã€‚</li>
</ul>
<p>è¿™äº›å·¥å…·åšçš„äº‹æƒ…å…¶å®æ˜¯ï¼š</p>
<ul>
<li>å¸®ä½ åœ¨è§£å‹ç¼©çš„ä¸åŒé˜¶æ®µï¼Œç”¨æ›´ç»“æ„åŒ–çš„æ–¹å¼è¡¨è¾¾æ„å›¾å’Œçº¦æŸï¼›</li>
<li>åœ¨ä½ å’Œæ¨¡å‹ä¹‹é—´å»ºç«‹æ›´ç¨³å®šçš„â€œå¯¹é½æœºåˆ¶â€ï¼›</li>
<li>å‡å°‘â€œè¯´ä¸æ¸…ã€è¯´ä¸å…¨ã€è¯´é”™äº†â€çš„æ¦‚ç‡ï¼Œä»è€Œæé«˜æ•´ä¸ªé“¾è·¯çš„ç¡®å®šæ€§ã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œä»ç§æœ‰ Context å·¥ç¨‹çš„è§†è§’çœ‹ï¼š</p>
<ul>
<li>
<p>å·¥å…·è‡ªç„¶ä¼šä¸æ–­è¿­ä»£æ›´æ–°ï¼›</p>
</li>
<li>
<p>ä½†åªè¦Â <strong>IN â†’ æ¨ç† â†’ OUT</strong>Â è¿™ä¸ªæœ€å°å•å…ƒè¿˜æˆç«‹ï¼Œè¿™äº›å·¥å…·çš„è§’è‰²å°±å¯ä»¥è¢«è§†ä¸ºï¼š</p>
<ul>
<li><strong>åœ¨ä¸åŒå±‚æ¬¡ä¸ŠååŠ©æˆ‘ä»¬æ„é€ æ›´å¥½çš„ INï¼Œå‡å°‘è§£å‹ç¼©è¿‡ç¨‹ä¸­çš„ä¸ç¡®å®šæ€§ã€‚</strong></li>
</ul>
</li>
</ul>
<h2 data-id="heading-5">é€šç”¨ä¸Šä¸‹æ–‡å·¥ç¨‹çš„è¾¹ç•Œï¼šé¢å¯¹æœªçŸ¥ä¸–ç•Œçš„å¿…ç„¶ç­–ç•¥</h2>
<p>ä¸ºäº†å¸®ç”¨æˆ·æ„é€ æ›´å¥½çš„ INï¼Œä¸šç•Œæå‡ºäº†â€œä¸Šä¸‹æ–‡å·¥ç¨‹â€ï¼š</p>
<ul>
<li>å¦‚ä½•ç»„ç»‡ç³»ç»Ÿæç¤ºï¼›</li>
<li>å¦‚ä½•è§„åˆ’å·¥å…·ï¼›</li>
<li>å¦‚ä½•ç”¨æ£€ç´¢æŠŠå¤–éƒ¨çŸ¥è¯†æ¥è¿›æ¥ï¼›</li>
<li>å¦‚ä½•é€šè¿‡å‹ç¼©å’Œç»“æ„åŒ–ç¬”è®°ç»´æŒé•¿ä»»åŠ¡çš„è¿è´¯æ€§ã€‚</li>
</ul>
<p>è¿™äº›æ–¹æ³•éå¸¸æœ‰ä»·å€¼ï¼Œä½†æœ‰ä¸€ä¸ªç»å¸¸è¢«å¿½ç•¥çš„å‰æï¼š</p>
<blockquote>
<p>å®ƒä»¬å¤§å¤šç«™åœ¨Â  <strong>â€œé€šç”¨å·¥å…·æä¾›æ–¹â€</strong> Â çš„è§†è§’ã€‚</p>
</blockquote>
<p>åœ¨è¿™ä¸ªè§†è§’ä¸‹ï¼Œä¸–ç•Œæ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>ä»–ä»¬ä¸çŸ¥é“æ¯ä¸€ä¸ªå®¢æˆ·çš„ä¸šåŠ¡ç»“æ„ï¼›</li>
<li>ä¸çŸ¥é“ä½ çš„ä»£ç  / æµç¨‹ / æœ¯è¯­ï¼›</li>
<li>ä¸çŸ¥é“ä½ æœ‰å“ªäº›éšå«çº¢çº¿å’Œç»„ç»‡çº¦æŸã€‚</li>
</ul>
<p>äºæ˜¯ï¼Œä»–ä»¬åªèƒ½å‡è®¾ï¼š<strong>æ‰€æœ‰å·¥ç¨‹éƒ½æ˜¯â€œæœªçŸ¥å·¥ç¨‹â€</strong> ã€‚<br/>
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå”¯ä¸€ç°å®çš„ç­–ç•¥å°±æ˜¯ï¼š</p>
<ul>
<li>å°½å¯èƒ½å¢å¼º Search èƒ½åŠ›ï¼›</li>
<li>æä¾›å°½å¯èƒ½å¤šçš„ä¸Šä¸‹æ–‡å…¥å£ï¼ˆRAGã€MCPã€å„ç§å·¥å…·å’ŒæŠ€èƒ½ï¼‰ï¼›</li>
<li>è®©æ¨¡å‹åœ¨è¿è¡Œæ—¶è‡ªå·±å»æ¢ç´¢ã€è‡ªå·±å»æ‹¼æ¥ã€è‡ªå·±å»çŒœã€‚</li>
</ul>
<p>åœ¨å°åœºæ™¯ã€ç®€å•åœºæ™¯ä¸‹ï¼Œè¿™äº›æ‰‹æ®µæ•ˆæœå¾ˆå¥½ã€‚<br/>
ä½†ä¸€æ—¦ä¸šåŠ¡å¤æ‚åº¦ä¸Šæ¥ï¼Œä½ ä¼šè¶Šæ¥è¶Šæ˜æ˜¾åœ°æ„Ÿå—åˆ°å®ƒä»¬çš„ä¸Šé™ï¼š</p>
<ul>
<li>æœç´¢ç»“æœå¤ªå¤šæˆ–å¤ªå°‘ï¼Œçª—å£å¾ˆå¿«è¢«åƒæ»¡ï¼›</li>
<li>å¤æ‚æµç¨‹å’Œè§„èŒƒï¼Œå¾ˆéš¾é€šè¿‡ä¸€æ¬¡æ€§çš„ prompt æ³¨å…¥æ¨¡å‹è„‘ä¸­ï¼›</li>
<li>å·¥ç¨‹è¶Šå¤§ã€ä¸Šä¸‹æ¸¸è¶Šå¤šï¼Œâ€œè®©æ¨¡å‹è‡ªå·±å»æ‰¾è·¯â€è¿™ä»¶äº‹å°±è¶Šä¸å¯é ã€‚</li>
</ul>
<p>å®ƒä»¬ä¹‹æ‰€ä»¥å¦‚æ­¤ï¼Œæ˜¯å› ä¸ºï¼š</p>
<blockquote>
<p><strong>é€šç”¨ä¸Šä¸‹æ–‡å·¥ç¨‹é¢å¯¹çš„æ˜¯â€œä¸€ä¸ªæ‰€æœ‰ç»†èŠ‚éƒ½æœªçŸ¥çš„ä¸–ç•Œâ€ã€‚<br/>
åœ¨è¿™æ ·çš„ä¸–ç•Œé‡Œï¼ŒSearch + åŠ¨æ€æ‹¼æ¥æ˜¯å”¯ä¸€çš„é€šç”¨ç­–ç•¥ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-6">å½“è¿™æ˜¯â€œæˆ‘çš„ä¸šåŠ¡â€æ—¶ï¼šContext ä¸è¯¥ç»§ç»­è¢«å½“ä½œæœªçŸ¥é‡</h2>
<p>è€Œåœ¨ä¸€ä¸ªå…·ä½“ä¸šåŠ¡å›¢é˜Ÿå†…éƒ¨ï¼Œæƒ…å†µå®Œå…¨ä¸åŒã€‚</p>
<p>ä½ å¹¶ä¸æ˜¯é¢å¯¹ä¸€ä¸ªå®Œå…¨æœªçŸ¥çš„ä¸–ç•Œï¼Œä½ çŸ¥é“å¾ˆå¤šäº‹æƒ…ï¼š</p>
<ul>
<li>ä½ çš„ä¸šåŠ¡è¾¹ç•Œæ˜¯ä»€ä¹ˆï¼›</li>
<li>å…³é”®æµç¨‹ã€å¸¸è§å¥—è·¯ã€å›ºå®šæ­¥éª¤æœ‰å“ªäº›ï¼›</li>
<li>å“ªäº›è§„èŒƒæ˜¯çº¢çº¿ï¼Œå“ªäº›æ˜¯å»ºè®®ï¼›</li>
<li>å“ªäº›å†å²å†³ç­–ã€å¤ç›˜å’Œè¸©å‘è®°å½•ï¼Œå€¼å¾—è¢«é•¿æœŸè®°ä½ã€‚</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼Œåœ¨ä½ çš„å›¢é˜Ÿé‡Œï¼š</p>
<blockquote>
<p><strong>Context ä¸æ˜¯ä¸€å›¢é›¾ï¼Œè€Œæ˜¯ä¸€å¥—å¯ä»¥è¢«è®¾è®¡ã€è¢«ç»´æŠ¤ã€è¢«æ¼”è¿›çš„ç»“æ„ã€‚</strong></p>
</blockquote>
<p>è¿™æ—¶è¿˜ç»§ç»­å®Œå…¨æŒ‰ç…§é€šç”¨èŒƒå¼æ¥ç”¨ AIâ€”â€”<br/>
æ¯æ¬¡éƒ½ä»é›¶å¼€å§‹æ‹¼å‡‘ä¸Šä¸‹æ–‡ï¼Œè®©æ¨¡å‹å»é»‘ç®±å¼åœ° Search å’Œæ‹¼æ¥â€”â€”<br/>
å°±æœ‰ç‚¹åƒï¼š</p>
<ul>
<li>ä½ å¯¹è‡ªå·±çš„å…¬å¸ç»„ç»‡ç»“æ„å’Œæµç¨‹éå¸¸ç†Ÿï¼›</li>
<li>å´æ¯æ¬¡è®©ä¸€ä¸ªæ–°äººè‡ªå·±ä»å…¬å¸å¤§é—¨å¼€å§‹ä¹±é€›ï¼Œå¸Œæœ›ä»–èƒ½æ‘¸ç´¢å‡ºæ­£ç¡®è·¯å¾„ã€‚</li>
</ul>
<p><strong>ç§æœ‰ Context å·¥ç¨‹å®è·µ</strong>æƒ³åšçš„ï¼Œæ˜¯æŠŠè¿™ä»¶äº‹åè¿‡æ¥ï¼š</p>
<ul>
<li>æ‰¿è®¤æˆ‘ä»¬å¯¹è‡ªå·±ä¸šåŠ¡çš„â€œå…ˆéªŒçŸ¥è¯†â€æ˜¯å®è´µèµ„äº§ï¼›</li>
<li>æŠŠè¿™äº›å…ˆéªŒï¼Œé€šè¿‡å·¥ç¨‹æ–¹å¼å›ºåŒ–æˆä¸€æ•´å¥—ä¸Šä¸‹æ–‡ç®¡ç†å®è·µï¼›</li>
<li>è®©æ¨¡å‹ä¸å†åœ¨æœªç»æ•´ç†çš„â€œåŸå§‹ä¸–ç•Œâ€é‡Œè¿·è·¯ï¼Œè€Œæ˜¯åœ¨è¿™å¥—å®è·µä¹‹ä¸Šå·¥ä½œã€‚</li>
</ul>
<p>å®ƒå…³å¿ƒçš„ä¸ä»…æ˜¯ï¼š</p>
<ul>
<li>â€œå¸®æˆ‘å†™å‡½æ•°ã€ä¿® bugâ€ã€‚</li>
</ul>
<p>å®ƒå…³å¿ƒçš„æ˜¯ï¼š</p>
<ul>
<li>åšä¸€æ¬¡æ–°ä¸šåŠ¡ï¼Œåº”è¯¥è‡ªåŠ¨å¸¦å‡ºå“ªäº›å†å²äº‹å®ä¸æµç¨‹çº¦æŸï¼›</li>
<li>åšä¸€ä¸ªæ–°æ´»åŠ¨ï¼Œåº”è¯¥è‡ªåŠ¨æé†’å“ªäº›é£é™©ç‚¹å’Œå¿…ç»æ­¥éª¤ï¼›</li>
<li>åšä¸€æ¬¡åˆ†æï¼Œåº”è¯¥è‡ªåŠ¨æ¥ä¸Šå“ªäº›æŒ‡æ ‡ã€æŠ¥å‘Šå’Œè¿‡å¾€å°è¯•ã€‚</li>
</ul>
<h2 data-id="heading-7">â€œä¸Šä¸‹æ–‡æ¶æ„å¸ˆâ€ï¼šé‚£ä¸ªé‡æ„ IN çš„äºº</h2>
<p>å½“ Context è¢«å½“æˆå·¥ç¨‹å¯¹è±¡ï¼Œå°±ä¼šè‡ªç„¶å†’å‡ºæ¥ä¸€ä¸ªæ–°è§’è‰²ï¼š</p>
<blockquote>
<p><strong>ä¸Šä¸‹æ–‡æ¶æ„å¸ˆï¼ˆContext Architectï¼‰</strong></p>
</blockquote>
<p>è¿™ä¸ªè§’è‰²çš„ç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>
<p><strong>æ—¢æ‡‚ä¸šåŠ¡ï¼Œä¹Ÿæ‡‚æ€ä¹ˆç»´æŠ¤ä¸Šä¸‹æ–‡</strong><br/>
ä»–çŸ¥é“ä¸šåŠ¡æ˜¯æ€ä¹ˆè·‘çš„ï¼Œä¹ŸçŸ¥é“ä»€ä¹ˆä¸œè¥¿åº”è¯¥é•¿æœŸå­˜åœ¨äºâ€œå¯ç”¨çš„ Context é›†åˆâ€é‡Œã€‚</p>
</li>
<li>
<p><strong>å·¥ä½œæ–¹å¼æ˜¯â€œå…ˆè·‘ä¸šåŠ¡ï¼Œå†æŠ½è±¡ï¼Œå†åå“º AIâ€</strong><br/>
ä¸€æ¡å…¸å‹é—­ç¯å¤§è‡´æ˜¯ï¼š</p>
<ol>
<li>ä»çœŸå®ä¸šåŠ¡å‡ºå‘ï¼Œé€‰ä¸€ä¸ªæœ€å°é—­ç¯ï¼ŒæŠŠå®ƒå…ˆè·‘åˆ°â€œå¯ç”¨â€ï¼›</li>
<li>ä»è¿™ä¸ªé—­ç¯ä¸­åæ¨ï¼šå“ªäº›ä¿¡æ¯ã€å“ªäº›æ­¥éª¤ã€å“ªäº›çº¦æŸæ˜¯å¯ä»¥æŠ½è±¡å‡ºæ¥å¤ç”¨çš„ï¼›</li>
<li>æŠŠè¿™äº›æŠ½è±¡æ•´ç†æˆç»“æ„åŒ–çš„è§„èŒƒå’Œçº¦æŸï¼Œè®© AI åœ¨ä¸‹ä¸€æ¬¡ä»»åŠ¡ä¸­æŒ‰å®ƒä»¬æ¥è¡ŒåŠ¨ï¼›</li>
<li>åœ¨å®é™…æ‰§è¡Œä¸­è§‚å¯Ÿåå·®ï¼Œå¾®è°ƒçº¦æŸå’Œä¸Šä¸‹æ–‡ç»“æ„ï¼Œç›´åˆ° AI èƒ½é•¿æœŸç¨³å®šåœ°æŒ‰è¿™å¥—æ–¹å¼å®Œæˆä»»åŠ¡ã€‚</li>
</ol>
</li>
<li>
<p><strong>æ›´å…³æ³¨â€œè¿‡ç¨‹æ˜¯å¦å¯å¤ç”¨â€ï¼Œè€Œä¸ä»…æ˜¯æŸæ¬¡ç»“æœæ˜¯å¦å‡‘å·§æ­£ç¡®</strong><br/>
ä»–çš„ç›®æ ‡ä¸æ˜¯â€œè¿™æ¬¡è¾“å‡ºå¯¹äº†å°±è¡Œâ€ï¼Œ<br/>
è€Œæ˜¯è®©è¿™å¥— Context è®¾è®¡æœ¬èº«å˜å¾—å¯è¿ç§»ã€å¯å¤åˆ¶ã€å¯è¿­ä»£ã€‚</p>
</li>
<li>
<p><strong>éœ€è¦è®¾è®¡ä¸€å¥—â€œåƒæ–‡ä»¶ç³»ç»Ÿä¸€æ ·å¥½ç”¨çš„ä¸Šä¸‹æ–‡å­˜å‚¨ç»“æ„â€</strong><br/>
ç›®æ ‡å¾ˆç›´æ¥ï¼š<br/>
è®©ä»»ä½•ä¸€ä¸ªä¸šåŠ¡åŒå­¦ï¼Œåœ¨å¼€å§‹ä¸€ä»¶æ–°äº‹ä¹‹å‰ï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>ä¸€ä¸¤æ­¥æ‹‰å‡ºè¿™ä¸ªä»»åŠ¡å¿…éœ€çš„ä¸Šä¸‹æ–‡æ¨¡å—ï¼›</li>
<li>å†è¡¥å……ä¸€ä¸‹å½“ä¸‹ç‰¹å®šç›®æ ‡ï¼›<br/>
ç³»ç»Ÿå°±èƒ½ä¸ºæ¨¡å‹æ„é€ å‡ºä¸€ä»½è´¨é‡è¶³å¤Ÿé«˜çš„ INï¼Œè€Œä¸éœ€è¦æ¯æ¬¡ä»å¤´æ‹¼å‡‘ã€‚</li>
</ul>
</li>
</ul>
<p>åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œ<strong>ä¸Šä¸‹æ–‡æ¶æ„å¸ˆå°±æ˜¯é‚£ä¸ªé‡æ„ IN çš„äºº</strong>ã€‚<br/>
ä»–è´Ÿè´£çš„ï¼Œä¸æ˜¯å•æ¬¡äº§å‡ºï¼Œè€Œæ˜¯æ•´ä¸ªå›¢é˜Ÿæœªæ¥è®¸å¤šæ¬¡äº§å‡ºçš„â€œä¸Šé™â€ã€‚</p>
<h2 data-id="heading-8">å†™åœ¨æœ€åï¼šä¸ºä»€ä¹ˆè¿™æ˜¯ä¸€ä¸ªâ€œå¿…é€‰é¡¹â€ï¼Ÿ</h2>
<p>æŠŠä¸Šè¿°é€»è¾‘å‹ç¼©æˆä¸€æ¡é“¾ï¼š</p>
<ul>
<li>æ™ºåŠ›è¢«å·¥ä¸šåŒ–ç”Ÿäº§ä¹‹åï¼ŒçœŸæ­£æ˜‚è´µçš„å˜æˆäº†â€œæ„é€ ä¸Šä¸‹æ–‡â€ï¼›</li>
<li>ä¸€åˆ‡ä»»åŠ¡éƒ½å¯ä»¥çœ‹æˆ IN â†’ æ¨ç† â†’ OUTï¼Œå½“å‰é‡è¦çš„é—®é¢˜æ˜¯ï¼š<strong>æˆ‘ä»¬ç”¨ä»€ä¹ˆæ–¹å¼æ¥æ„é€  IN</strong>ï¼›</li>
<li>é€šç”¨ä¸Šä¸‹æ–‡å·¥ç¨‹é¢å¯¹çš„æ˜¯ä¸€ä¸ªæœªçŸ¥ä¸–ç•Œï¼Œåªèƒ½ä¾èµ– Search + åŠ¨æ€æ‹¼æ¥ï¼Œåœ¨å¤æ‚ä¸šåŠ¡é‡Œä¼šé‡åˆ°å¤©èŠ±æ¿ï¼›</li>
<li>å¯¹å…·ä½“ç»„ç»‡è€Œè¨€ï¼ŒContext æ˜¯å¯ä»¥è¢«è®¾è®¡ã€è¢«ç»´æŠ¤ã€è¢«æ¼”è¿›çš„èµ„äº§ï¼›</li>
<li>ä¸ºè‡ªå·±çš„ä¸šåŠ¡å»ºç«‹ä¸€å¥—â€œç§æœ‰ Context å·¥ç¨‹å®è·µâ€ï¼Œä¸æ˜¯é”¦ä¸Šæ·»èŠ±ï¼Œè€Œæ˜¯åœ¨æ–°çš„æˆæœ¬ç»“æ„ä¸‹Â <strong>èƒ½å¦çœŸæ­£ç”¨å¥½ AI çš„å‰ææ¡ä»¶</strong>ï¼›</li>
<li>ä¸Šä¸‹æ–‡æ¶æ„å¸ˆï¼Œåˆ™æ˜¯è¿™å¥—å®è·µçš„è®¾è®¡è€…å’Œå®ˆé—¨äººï¼Œé€šè¿‡çº¦æŸã€æµç¨‹å’Œå­˜å‚¨ç»“æ„ï¼ŒæŠŠâ€œä¸ AI åä½œâ€è¿™ä»¶äº‹å˜æˆå¯å·¥ç¨‹åŒ–ã€å¯ç§¯ç´¯çš„äº‹æƒ…ã€‚</li>
</ul>
<p>è¿™ä¸€ç¯‡åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åªå›ç­”äº†ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>åœ¨ä»Šå¤©çš„ç¯å¢ƒé‡Œï¼Œ<strong>ä¸ºä»€ä¹ˆç§æœ‰ Context å·¥ç¨‹æ˜¯å¿…ç„¶ä¼šè¢«æå‡ºã€å¹¶ä¸”è¿Ÿæ—©ä¼šæœ‰äººå»åšçš„äº‹æƒ…</strong>ã€‚</p>
</blockquote>
<p>åœ¨ä¸‹ç¯‡é‡Œï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥èŠèŠç§æœ‰ä¸Šä¸‹æ–‡å·¥ç¨‹å¦‚ä½•è½åœ°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LLM äº¤äº’çš„â€œçœé’±â€æ–°å§¿åŠ¿ï¼šJSON å·²æ­»ï¼ŒTOON å½“ç«‹]]></title>    <link>https://juejin.cn/post/7572453554331009024</link>    <guid>https://juejin.cn/post/7572453554331009024</guid>    <pubDate>2025-11-15T03:38:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572453554331009024" data-draft-id="7572408522438344739" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LLM äº¤äº’çš„â€œçœé’±â€æ–°å§¿åŠ¿ï¼šJSON å·²æ­»ï¼ŒTOON å½“ç«‹"/> <meta itemprop="keywords" content="åç«¯,AIGC"/> <meta itemprop="datePublished" content="2025-11-15T03:38:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å¥æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/395479918848487"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LLM äº¤äº’çš„â€œçœé’±â€æ–°å§¿åŠ¿ï¼šJSON å·²æ­»ï¼ŒTOON å½“ç«‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479918848487/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å¥æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T03:38:16.000Z" title="Sat Nov 15 2025 03:38:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>å˜¿ï¼Œå…„å¼Ÿï¼ä½ æ˜¯ä¸æ˜¯ä¹Ÿæ„Ÿè§‰ AI è¶Šæ¥è¶Šé¦™ï¼Œä½† Token è´¦å•ä¹Ÿè¶Šæ¥è¶Šâ€œçƒ«â€ï¼Ÿ ğŸ’¸</p>
<p><code>GPT-4o</code>ã€<code>Kimi</code> è¿™äº›æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£åŠ¨ä¸åŠ¨å°±å‡ åä¸‡ã€ä¸Šç™¾ä¸‡ <code>Token</code>ï¼Œæˆ‘ä»¬æ¨ä¸å¾—æŠŠæ•´ä¸ªé¡¹ç›®éƒ½æ‰”è¿›å»ã€‚ä½†å†·é™ä¸‹æ¥çœ‹çœ‹è´¦å•... ... å“‡å“¦</p>
<p><code>LLM</code> çš„ <code>Token</code> æ¯ä¸€åˆ†éƒ½æ˜¯çœŸé‡‘ç™½é“¶å•Šï¼</p>
<p>å½“å¤§å®¶éƒ½åœ¨æƒ³åŠæ³•ä¼˜åŒ–æ¨¡å‹ã€ä¼˜åŒ–ç®—æ³•æ—¶ï¼Œæœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨ç”¨çš„ <code>JSON</code>ï¼Œå¯èƒ½å°±æ˜¯é‚£ä¸ªâ€œèƒŒåˆºâ€æˆ‘ä»¬ Token è´¹ç”¨çš„â€œå†…é¬¼â€ï¼Ÿ</p>
<p>JSON è™½å¥½ï¼Œä½†å®ƒå®åœ¨æ˜¯... ... å¤ªï¼å•°ï¼å—¦ï¼äº†ï¼</p>
<h2 data-id="heading-1">â€œå†…é¬¼â€ç°å½¢ï¼šJSON åˆ°åº•æœ‰å¤šæµªè´¹</h2>
<p>åœ¨ LLM çš„ä¸–ç•Œé‡Œï¼ŒToken å°±æ˜¯é’±ã€‚è¡¨è¾¾åŒæ ·çš„ä¿¡æ¯ï¼Œè°ç”¨çš„ Token å°‘ï¼Œè°å°±æ˜¯èµ¢å®¶ã€‚</p>
<p>ä¸ä¿¡ï¼Ÿæˆ‘ä»¬ç›´æ¥ä¸Šä¾‹å­ï¼Œç”¨äº‹å®è¯´è¯ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªç®€å•çš„ç”¨æˆ·åˆ—è¡¨ï¼š</p>
<h3 data-id="heading-2">1. å†—é•¿çš„â€œè€å¤§å“¥â€ï¼šJSON</h3>
<p>æ ‡å‡†çš„ JSON æ ¼å¼ï¼Œå……æ»¡äº†å¤§æ‹¬å·ã€åŒå¼•å·å’Œé€—å·ï¼Œç®€ç›´æ˜¯ Token æ€æ‰‹ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Alice"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Bob"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">25</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Charlie"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">35</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<p>ï¼ˆæ•°æ•°çœ‹ï¼Œå…‰æ˜¯ name è¿™ä¸ªè¯å°±é‡å¤äº† 3 éï¼ï¼‰</p>
<h3 data-id="heading-3">2. â€œå°æ¸…æ–°â€ä½†è¿˜ä¸å¤Ÿï¼šYAML</h3>
<p>YAML ç¡®å®æ¸…çˆ½äº†ä¸å°‘ï¼Œç”¨ç¼©è¿›ä»£æ›¿äº†æ‹¬å·ï¼Œä¹Ÿå»æ‰äº†åŒå¼•å·ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-number">1</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">Alice</span>
  <span class="hljs-attr">age:</span> <span class="hljs-number">30</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-number">2</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">Bob</span>
  <span class="hljs-attr">age:</span> <span class="hljs-number">25</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">Charlie</span>
  <span class="hljs-attr">age:</span> <span class="hljs-number">35</span>
</code></pre>
<p>å—¯ï¼Œè¿›æ­¥äº†ï¼Œä½†ä¸å¤šã€‚id, name, age è¿™äº›é”®åè¿˜æ˜¯åœ¨æ— æƒ…åœ°é‡å¤ã€‚</p>
<h3 data-id="heading-4">3. â€œæŠ é—¨â€çš„ç‹è€…ï¼šTOON ç™»åœºï¼</h3>
<p>TOON ï¼ˆToken-Oriented Object Notationï¼‰é—ªäº®ç™»åœºï¼Œå®ƒç”¨äº†ä¸€ç§è¿‘ä¹â€œå˜æ€â€çš„æ–¹å¼æ¥å‹ç¼©ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-TOON" lang="TOON">[3]{id,name,age}:
  1,Alice,30
  2,Bob,25
  3,Charlie,35
</code></pre>
<p>çœ‹æ˜ç™½äº†å—ï¼Ÿ[3] è¡¨ç¤ºæœ‰3ä¸ªå¯¹è±¡ï¼Œ{id,name,age} åªå®šä¹‰äº†ä¸€æ¬¡â€œè¡¨å¤´â€ï¼Œåé¢çš„æ•°æ®å°±åƒ CSV ä¸€æ ·ç´§å‡‘æ’åˆ—ã€‚</p>
<p>æ²¡æœ‰å¯¹æ¯”å°±æ²¡æœ‰ä¼¤å®³ï¼ åŒæ ·çš„æ•°æ®ï¼Œ<code>TOON</code> çš„ <code>Token</code> å ç”¨é‡ç®€ç›´æ˜¯â€œéª¨æŠ˜ä»·â€ï¼</p>
<h2 data-id="heading-5">å•¥æ˜¯ TOONï¼Ÿä¸º LLM è€Œç”Ÿçš„â€œçœé’±åˆ©å™¨â€</h2>
<p><code>TOON</code>ï¼ˆé¢å‘ Token çš„å¯¹è±¡è¡¨ç¤ºæ³•ï¼‰å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªä¸“ä¸º LLM æç¤ºè¯è€Œç”Ÿçš„ã€ç´§å‡‘ä¸”äººç±»å¯è¯»çš„æ•°æ®æ ¼å¼ã€‚</p>
<p>å®ƒèƒ½è¡¨ç¤ºå’Œ <code>JSON</code> ä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡ã€æ•°ç»„å’Œæ•°æ®ç±»å‹ï¼Œä½†å®ƒçš„è¯­æ³•å°±æ˜¯ä¸ºäº†æœ€å°åŒ– Token ä½¿ç”¨è€Œè®¾è®¡çš„ã€‚</p>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸º <code>YAML</code> çš„åµŒå¥—ç»“æ„ +<code> CSV</code> çš„è¡¨æ ¼å¸ƒå±€ = <code>TOON</code></p>
<p>TOON æœ€æ“…é•¿å¤„ç†çš„åœºæ™¯ï¼Œå°±æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„**â€œç»“æ„ä¸€è‡´çš„å¯¹è±¡æ•°ç»„â€**ã€‚åœ¨å®ç° CSV èˆ¬ç´§å‡‘çš„åŒæ—¶ï¼Œå®ƒåˆæä¾›äº†æ¸…æ™°çš„ç»“æ„ä¿¡æ¯ï¼ˆ{key1, key2}:ï¼‰ï¼Œå¸®åŠ© LLM æ›´å¯é åœ°è§£æå’ŒéªŒè¯æ•°æ®ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š TOON å¹¶éé“¶å¼¹ã€‚å¦‚æœä½ çš„æ•°æ®æ˜¯æ·±åº¦åµŒå¥—æˆ–ç»“æ„æå…¶ä¸ç»Ÿä¸€çš„ï¼Œé‚£ JSON å¯èƒ½è¿˜æ˜¯è€è€å®å®çš„é€‰æ‹©ã€‚ä½†åœ¨â€œå¯¹è±¡æ•°ç»„â€è¿™ä¸ª LLM æœ€å¸¸è§çš„åœºæ™¯ä¸‹ï¼ŒTOON ç®€ç›´æ— æ•Œã€‚</p>
</blockquote>
<h2 data-id="heading-6">æ•°æ®ä¸ºè¯ï¼šTOON åˆ°åº•æœ‰å¤šèƒ½æ‰“ï¼Ÿ</h2>
<p>å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ã€‚<code>Chase Adams</code> å¤§ä½¬åšäº†ä¸€ç»„éå¸¸ç›´è§‚çš„åŸºå‡†æµ‹è¯•ï¼Œå¯¹æ¯”äº† <code>JSON</code>ã€<code>YAML</code>ã€<code>TOON</code> å’Œ <code>CSV</code> çš„ <code>Token</code> æ•ˆç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fb85506e00a48b19fe5304bcfd16793~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5aWP5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763782696&amp;x-signature=hPM7corj2AoLxlSEq%2BZ16r7lJfQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12f9a5eaf8104b99bbe50a23c0c26149~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5aWP5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763782696&amp;x-signature=Q8OVpSc4uu1YqOfj6VTa3kUyXc4%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>åŸºå‡†æµ‹è¯•é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.curiouslychase.com%2Fplayground%2Fformat-tokenization-exploration" target="_blank" title="https://www.curiouslychase.com/playground/format-tokenization-exploration" ref="nofollow noopener noreferrer">www.curiouslychase.com/playground/â€¦</a></p>
</blockquote>
<p>ç»“è®ºä¸€ç›®äº†ç„¶ï¼š</p>
<p><code>CSV</code> æ˜¯ <code>Token</code> æ•ˆç‡çš„â€œå¤©èŠ±æ¿â€ï¼Œä½†å®ƒæ— æ³•è¡¨ç¤ºåµŒå¥—ç»“æ„ï¼Œè€Œä¸”æ²¡æœ‰å…ƒæ•°æ®ï¼ŒLLM å¾ˆå®¹æ˜“â€œè¯»æ­ªâ€ã€‚</p>
<p><code>TOON</code> ç¨³åç¬¬äºŒæŠŠäº¤æ¤…ï¼Œæ•ˆç‡ç›´é€¼ CSVï¼Œä½†å®ƒä¿ç•™äº†å®Œæ•´çš„ç»“æ„ä¿¡æ¯ã€‚</p>
<p>J<code>SON</code> å’Œ <code>YAML</code>... ... ä¸¤ä½è€å¤§å“¥ï¼Œåœ¨ <code>Token</code> æ•ˆç‡ä¸Šè¢« <code>TOON</code> åŠæ‰“ã€‚</p>
<h2 data-id="heading-7">å¦‚ä½•åœ¨ LLM ä¸­â€œæ— ç—›â€ç”¨ä¸Š TOONï¼Ÿ</h2>
<p>ä½ å¯èƒ½ä¼šæƒ³ï¼šâ€œå“‡ï¼Œè¿™ä¹ˆç‰›ï¼Ÿé‚£æˆ‘å²‚ä¸æ˜¯è¦é‡æ„æ•´ä¸ªç³»ç»Ÿï¼Ÿâ€</p>
<p>å®Œå…¨ä¸ç”¨</p>
<p>å®˜æ–¹æ¨èçš„æ¶æ„æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cc3d269124e4fb983ca51c898a65ab1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5aWP5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763782696&amp;x-signature=TeXTKGnpbLsqNdwbD5tpA%2B9zyM8%3D" alt="" loading="lazy"/></p>
<p>çœ‹æ‡‚äº†å—ï¼Ÿ<code>TOON</code> åªæ˜¯ä¸€ä¸ª**â€œè½¬æ¢å±‚â€**ã€‚</p>
<p>ä½ çš„ç³»ç»Ÿå†…éƒ¨ï¼Œè¯¥ç”¨ <code>JSON</code> è¿˜æ˜¯ç”¨ <code>JSON</code>ï¼Œå•¥ä¹Ÿä¸ç”¨æ”¹ã€‚</p>
<p>åœ¨è°ƒç”¨ <code>LLM</code> ä¹‹å‰ï¼Œä½ åªéœ€åŠ ä¸€ä¸ªç¼–ç æ­¥éª¤ï¼ŒæŠŠ <code>JSON</code> ç¼–ç ï¼ˆEncodeï¼‰ æˆ <code>TOON</code> æ ¼å¼å†å‘é€ã€‚</p>
<p><code>LLM</code> è¿”å› <code>TOON</code> æ ¼å¼çš„æ•°æ®åï¼Œä½ å†è§£ç ï¼ˆDecodeï¼‰ æˆ <code>JSON</code> ç»™ç³»ç»Ÿç”¨ã€‚</p>
<p>ä½ å°±æŠŠå®ƒå½“æˆä¸€ä¸ªâ€œä¸­é—´ä»¶â€ï¼Œåœ¨å’Œ <code>LLM</code> äº¤äº’çš„â€œæœ€åä¸€å…¬é‡Œâ€ä¸Šå¸®ä½ çœé’±</p>
<h2 data-id="heading-8">åˆ«å†æµªè´¹ Token äº†ï¼</h2>
<p>åœ¨ <code>LLM</code> æ—¶ä»£ï¼Œ<code>Token</code> æ•ˆç‡å°±æ˜¯æ ¸å¿ƒç«äº‰åŠ›ã€‚</p>
<p><code>JSON</code> æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„æ ¼å¼ï¼Œä½†åœ¨ <code>LLM</code> äº¤äº’è¿™ä¸ªæ–°åœºæ™¯ä¸‹ï¼Œå®ƒæ˜¾å¾—æ—¢è‡ƒè‚¿åˆæ˜‚è´µã€‚</p>
<p><code>TOON</code> æä¾›äº†ä¸€ä¸ªå®Œç¾çš„æ›¿ä»£æ–¹æ¡ˆï¼šå®ƒåœ¨ä¿ç•™ <code>JSON</code> å®Œæ•´è¡¨è¾¾èƒ½åŠ›çš„åŒæ—¶ï¼Œå®ç°äº†æ¥è¿‘ <code>CSV</code> çš„ <code>Token</code> æ•ˆç‡ã€‚</p>
<p>å¦‚æœä½ è¿˜åœ¨ä¸ºé«˜æ˜‚çš„ <code>LLM Token</code> è´¹ç”¨è€Œå¤´ç–¼ï¼Œå¦‚æœä½ è¿˜åœ¨å¿å— <code>JSON</code> å¸¦æ¥çš„å†—ä½™ï¼Œé‚£ä¹ˆï¼Œæ˜¯æ—¶å€™ç»™ä½ çš„ç³»ç»Ÿâ€œå‡ä¸ªèˆ±â€äº†</p>
<h2 data-id="heading-9">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftoon-format%2Ftoon" target="_blank" title="https://github.com/toon-format/toon" ref="nofollow noopener noreferrer">github.com/toon-formatâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.curiouslychase.com%2Fplayground%2Fformat-tokenization-exploration" target="_blank" title="https://www.curiouslychase.com/playground/format-tokenization-exploration" ref="nofollow noopener noreferrer">www.curiouslychase.com/playground/â€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ°å›¾å¼•æ“æ€§èƒ½ä¼˜åŒ–ï¼šè§£å†³3DTilesåŠ è½½ç—›ç‚¹çš„å…­å¤§æ ¸å¿ƒç­–ç•¥]]></title>    <link>https://juejin.cn/post/7572537221541052431</link>    <guid>https://juejin.cn/post/7572537221541052431</guid>    <pubDate>2025-11-16T07:20:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572537221541052431" data-draft-id="7572207610495041570" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ°å›¾å¼•æ“æ€§èƒ½ä¼˜åŒ–ï¼šè§£å†³3DTilesåŠ è½½ç—›ç‚¹çš„å…­å¤§æ ¸å¿ƒç­–ç•¥"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-16T07:20:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Mapmost"/> <meta itemprop="url" content="https://juejin.cn/user/1679709496936343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ°å›¾å¼•æ“æ€§èƒ½ä¼˜åŒ–ï¼šè§£å†³3DTilesåŠ è½½ç—›ç‚¹çš„å…­å¤§æ ¸å¿ƒç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1679709496936343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Mapmost
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T07:20:34.000Z" title="Sun Nov 16 2025 07:20:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å®æ™¯ä¸‰ç»´åº”ç”¨è½åœ°ç»•ä¸å¼€çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼š<strong>å¦‚ä½•é«˜æ€§èƒ½åŠ è½½å¤§è§„æ¨¡å€¾æ–œæ•°æ®ï¼Ÿ</strong></p>
<p>ä»Šå¤©è¿™æœŸï¼Œæˆ‘ä»¬å…ˆæ¥è¯´è¯´å¦‚ä½•ç”¨å¥½<strong>Mapmoståœ°å›¾å¼•æ“</strong>ï¼Œè®©æ‚¨åœ¨<strong>å¤§è§„æ¨¡å€¾æ–œæ•°æ®çš„ç²¾ç»†å‘ˆç°</strong>ä¸<strong>è®¾å¤‡æ€§èƒ½</strong>ä¹‹é—´å–å¾—å¹³è¡¡ï¼Œæ»¡è¶³å¼€å‘è€…å’Œç»ˆç«¯ç”¨æˆ·çš„éœ€æ±‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/430c57db068640a4ace8bf84614562f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763882433&amp;x-signature=x526fbbOZ%2Ff1iqHji8ucsrOPzzI%3D" alt="" loading="lazy"/></p>
<p>Mapmost SDK for WebGLé¢å‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D266397264%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%2580%25BE%25E6%2596%259C%25E6%2591%2584%25E5%25BD%25B1%25E6%2595%25B0%25E6%258D%25AE%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=266397264&amp;content_type=Article&amp;match_order=1&amp;q=%E5%80%BE%E6%96%9C%E6%91%84%E5%BD%B1%E6%95%B0%E6%8D%AE&amp;zhida_source=entity" ref="nofollow noopener noreferrer">å€¾æ–œæ‘„å½±æ•°æ®</a>åŠ è½½ï¼Œç³»ç»Ÿæ€§åœ°å¼€æ”¾äº†<strong>å…­é¡¹å…³é”®èƒ½åŠ›</strong>ï¼š</p>
<p><strong><em>1.</em></strong> **è‡ªå®šä¹‰å†…å­˜ç®¡ç†æœºåˆ¶ï¼š**ä¸»åŠ¨æ§åˆ¶èµ„æºå ç”¨</p>
<p><strong><em>2.</em></strong> **åŠ¨æ€ç“¦ç‰‡æ¸…æ™°åº¦è°ƒæ•´ï¼š**å€¾æ–œè§†è§’æ™ºèƒ½ä¼˜åŒ–</p>
<p><strong><em>3.</em></strong> **ç“¦ç‰‡è°ƒåº¦ç­–ç•¥ä¼˜åŒ–ï¼š**è¿‡æ»¤å†—ä½™è¯·æ±‚</p>
<p><strong><em>4.</em></strong> **åœºæ™¯æ¸…æ™°åº¦è°ƒæ•´ï¼š**ç”»è´¨ç²¾åº¦è‡ªå·±å®š</p>
<p><strong><em>5.</em></strong> **è·³çº§æ¸²æŸ“æœºåˆ¶ï¼š**æé€ŸåŠ è½½è¿‡ç¨‹</p>
<p><strong><em>6.</em></strong> **ç›®çš„åœ°é¢„åŠ è½½æœºåˆ¶ï¼š**æœ‰æ•ˆå‡å°‘ç­‰å¾…æ—¶é—´</p>
<p>ä»å†…å­˜æ§åˆ¶ã€è°ƒåº¦ç­–ç•¥åˆ°æ¸²æŸ“æœºåˆ¶ï¼Œå¸®åŠ©ç”¨æˆ·è½»æ¾å®ç°<strong>æµç•…ä¸ç²¾ç»†</strong>å…¼å¾—çš„ä¸‰ç»´ä½“éªŒã€‚</p>
<h2 data-id="heading-0">ä¸€ã€è‡ªå®šä¹‰å†…å­˜ç®¡ç†æœºåˆ¶ï¼šä¸»åŠ¨æ§åˆ¶èµ„æºå ç”¨</h2>
<p>âœ… <strong>è§£å†³é—®é¢˜</strong>ï¼šåŒä¸€åœºæ™¯åœ¨ä¸åŒè®¾å¤‡åŠ è½½æ—¶ï¼Œæ€§èƒ½è¾ƒå¼±çš„è®¾å¤‡æ˜“å› å†…å­˜å ç”¨è¿‡é«˜å¯¼è‡´å´©æºƒã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šç”¨æˆ·å¯è®¾ç½®<code>maxMemoryUsage</code>å‚æ•°ï¼Œæ˜ç¡®é™åˆ¶ç“¦ç‰‡æ•°æ®çš„æœ€å¤§ç¼“å­˜å†…å­˜ä½¿ç”¨é‡ï¼ŒåŒ…æ‹¬å‡ ä½•ä½“å’Œçº¹ç†ç­‰èµ„æºçš„å­˜å‚¨é™åˆ¶ã€‚å½“ç¼“å­˜æ•°æ®é‡è¶…å‡ºè®¾å®šå€¼æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸è½½ä¸å¸¸ç”¨çš„ç“¦ç‰‡ï¼ŒåŒæ—¶å…¨å±è°ƒæ•´ä¸ºæ˜¾ç¤ºæ›´ç²—ç³™çš„ç“¦ç‰‡çº§åˆ«ã€‚</p>
<p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼š<code>maxMemoryUsage</code>å‚æ•°è¶Šå¤§ç”»è´¨è¶Šä¼˜ï¼Œä½†ç›¸åº”ä¼šå¯¹æ€§èƒ½äº§ç”Ÿæ›´å¤§å‹åŠ›ã€‚å»ºè®®æ ¹æ®å®é™…è®¾å¤‡æ€§èƒ½æƒ…å†µçµæ´»è°ƒæ•´ï¼Œå¹³è¡¡ç”»è´¨ä¸æµç•…åº¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02060f64b71e4e079282509281b02ebf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763882433&amp;x-signature=m2nPG8YF5THx%2Be2YQdCmCfO%2FFrM%3D" alt="" loading="lazy"/></p>
<p><em>ä¸å¼€å¯å†…å­˜ç®¡ç†æœºåˆ¶</em></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fca44aff1ec742129402f0b52ed3024b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763882433&amp;x-signature=JE7tl%2Bf%2FJxClGWXbupucxBDEEwg%3D" alt="" loading="lazy"/></p>
<p><em>å¼€å¯å†…å­˜ç®¡ç†æœºåˆ¶å¹¶è®¾ç½®æœ€å¤§å†…å­˜ä¸º500MB</em></p>
<h2 data-id="heading-1">äºŒã€åŠ¨æ€ç“¦ç‰‡æ¸…æ™°åº¦è°ƒæ•´ï¼šå€¾æ–œè§†è§’æ™ºèƒ½ä¼˜åŒ–</h2>
<p>âœ… <strong>è§£å†³é—®é¢˜</strong>ï¼šç›¸æœºå€¾æ–œæ—¶ï¼Œè¿œå¤„ç“¦ç‰‡åŠ è½½å†—ä½™ï¼Œé™ä½æ€§èƒ½ã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šå½“ç”¨æˆ·é™ä½æ°´å¹³è§†è§’è§‚å¯Ÿåœºæ™¯æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é™ä½è¿œå¤„ç“¦ç‰‡çš„æ¸²æŸ“ç²¾åº¦ï¼Œä»è€ŒèŠ‚çœè¯·æ±‚ä¸æ¸²æŸ“èµ„æºã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤§èŒƒå›´å€¾æ–œæµè§ˆã€ç§»åŠ¨å·¡æ£€åœºæ™¯</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a6383a0731943b78d10780010fe180b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763882433&amp;x-signature=EXP0jjoGIJPHT9emw%2FT%2BDTDHTjs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€ç“¦ç‰‡è°ƒåº¦ç­–ç•¥ä¼˜åŒ–ï¼šè¿‡æ»¤å†—ä½™è¯·æ±‚</h2>
<p>âœ… <strong>è§£å†³é—®é¢˜</strong>ï¼šç›¸æœºç§»åŠ¨æ—¶ï¼Œå¤§é‡æ— ç”¨ç“¦ç‰‡è¯·æ±‚å ç”¨å¸¦å®½ï¼Œæ‹–æ…¢åŠ è½½é€Ÿåº¦ã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šä¸“é—¨é’ˆå¯¹ç›¸æœºç§»åŠ¨è¿‡ç¨‹ä¸­çš„å†—ä½™è¯·æ±‚è¿›è¡Œè¿‡æ»¤ã€‚åœ¨ç›¸æœºç§»åŠ¨è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿä¼šæ ¹æ®è®¾ç½®çš„è¿‡æ»¤å¼ºåº¦å‰”é™¤æ‰å› ç›¸æœºç§»åŠ¨è€Œå®é™…ä¸Šä¸ä¼šä½¿ç”¨åˆ°çš„ç“¦ç‰‡è¯·æ±‚ï¼Œå‡å°‘ä¸å¿…è¦çš„æ•°æ®åŠ è½½ã€‚</p>
<p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼šè¿‡æ»¤å¼ºåº¦å€¼ä¸å®œè¿‡å¤§ï¼Œè¿‡å¤§çš„è®¾ç½®å¯èƒ½ä¼šå¯¼è‡´è¿‡åº¦å‰”é™¤ï¼Œå¢åŠ éƒ¨åˆ†ç“¦ç‰‡åŠ è½½æ—¶é—´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9e9fac536b14bc493963ce86949dc37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763882433&amp;x-signature=I3WypHO4QXv0%2FTX9f2005cRZF18%3D" alt="" loading="lazy"/></p>
<p><em>å…³é—­ç“¦ç‰‡è°ƒåº¦ç­–ç•¥ä¼˜åŒ–</em></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af83f8f29fb24c258700c4513d2d31b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763882433&amp;x-signature=yQxVrfdIEp5QGXKjA9zFtKrzAjI%3D" alt="" loading="lazy"/></p>
<p><em>å¼€å¯ç“¦ç‰‡è°ƒåº¦ç­–ç•¥ä¼˜åŒ–</em></p>
<h2 data-id="heading-3">å››ã€åœºæ™¯æ¸…æ™°åº¦è°ƒæ•´ï¼šç”»è´¨ç²¾åº¦è‡ªå·±å®š</h2>
<p>âœ… <strong>è§£å†³é—®é¢˜</strong>ï¼šå›ºå®šç²¾åº¦å¯¼è‡´â€œè¦ä¹ˆæ¨¡ç³Šè¦ä¹ˆå¡é¡¿â€ã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šç”¨æˆ·å¯è®¾ç½®<code>maximumScreenSpaceError</code>æœ€å¤§å±å¹•ç©ºé—´è¯¯å·®å‚æ•°ç›´è§‚æ§åˆ¶æ¨¡å‹æ˜¾ç¤ºçš„ç²¾ç»†ç¨‹åº¦ã€‚è¯¥å€¼è¶Šå°ï¼ŒåŒå±‚çº§ä¸‹æ¨¡å‹è¶Šç²¾ç»†ï¼Œä½†ç›¸åº”çš„æ€§èƒ½æ¶ˆè€—ä¹Ÿè¶Šå¤§ï¼›åä¹‹åˆ™æ¨¡å‹è¶Šç²—ç³™ï¼Œä½†æ€§èƒ½è¶Šå¥½ã€‚</p>
<p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼šå»ºè®®æ ¹æ®é¡¹ç›®å¯¹ç»†èŠ‚ç¨‹åº¦çš„è¦æ±‚çµæ´»è®¾ç½®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5aa178c9e31e4443ac7a14d0f2783dc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763882433&amp;x-signature=umJgZm1Icjm39ujloSrUI6960WE%3D" alt="" loading="lazy"/></p>
<p><em>maximumScreenSpaceError=8</em></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64cad6f2ce09445a89c7262c62eeb1e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763882433&amp;x-signature=LZmEwT2V2pbRdgxp8GSZGuugRSA%3D" alt="" loading="lazy"/></p>
<p><em>maximumScreenSpaceError=32</em></p>
<h2 data-id="heading-4">äº”ã€è·³çº§æ¸²æŸ“æœºåˆ¶ï¼šæé€ŸåŠ è½½è¿‡ç¨‹</h2>
<p>âœ… <strong>è§£å†³é—®é¢˜</strong>ï¼šç“¦ç‰‡é€å±‚åŠ è½½æ…¢ï¼Œåœºæ™¯åˆå§‹åŒ–è€—æ—¶ä¹…ã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šé€šè¿‡ä¼˜åŒ–ç“¦ç‰‡æ¸²æŸ“é¡ºåºï¼Œç¡®ä¿ç”¨æˆ·æœ€å¯èƒ½å…³æ³¨çš„å†…å®¹ä¼˜å…ˆåŠ è½½å’Œæ¸²æŸ“ï¼Œå¤§å¹…ç¼©çŸ­ç­‰å¾…æ—¶é—´ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼šå»ºè®®å¼€å¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec40e731f3324589bc2ecfe8dd624947~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763882433&amp;x-signature=Iw93tkIIdYOCCobPw%2B09uLTAUaU%3D" alt="åŠ¨å›¾å°é¢" loading="lazy"/></p>
<p>è·³çº§æ¸²æŸ“</p>
<p><strong>å…­ã€ç›®çš„åœ°é¢„åŠ è½½æœºåˆ¶ï¼šæœ‰æ•ˆå‡å°‘ç­‰å¾…æ—¶é—´</strong></p>
<p>âœ… <strong>è§£å†³é—®é¢˜</strong>ï¼šé£è¡Œåˆ‡æ¢æ–°åŒºåŸŸæ—¶ï¼Œç“¦ç‰‡åŠ è½½æ»åï¼Œå‡ºç°å¡é¡¿ç°è±¡ã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šåœ¨é£è¡Œè¿‡ç¨‹ä¸­æå‰åŠ è½½ç›®æ ‡åŒºåŸŸç“¦ç‰‡æ•°æ®ï¼Œå®ç°**â€œäººæœªåˆ°ï¼Œæ•°æ®å·²å°±ä½â€**ï¼Œæœ‰æ•ˆå‡å°‘é£åˆ°æ–°åŒºåŸŸæ—¶çš„ç­‰å¾…æ—¶é—´ã€‚</p>
<p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼šå½“è¯¥æœºåˆ¶å¼€å¯ï¼Œé£è¡Œè¿‡ç¨‹ä¸­çš„å¸§ç‡å¯èƒ½ä¼šæœ‰æ‰€é™ä½ï¼Œéœ€è¦æ ¹æ®å®é™…éœ€æ±‚å†³å®šæ˜¯å¦å¼€å¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3507a6b710c04ea88e5591443c3756e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763882433&amp;x-signature=h17Nzxh0W7KFYqsAOLB0CObTNm0%3D" alt="åŠ¨å›¾å°é¢" loading="lazy"/></p>
<p><em>ç›®çš„åœ°é¢„åŠ è½½</em></p>
<p><strong>é…å¥—æ•°æ®æœåŠ¡è¦æ±‚ï¼šä¼˜åŒ–æ•ˆæœçš„åŸºç¡€ä¿éšœ</strong></p>
<p><strong>6å¤§æ ¸å¿ƒèƒ½åŠ›</strong>çš„è½åœ°ï¼Œéœ€é…åˆä»¥ä¸‹æ•°æ®æœåŠ¡é…ç½®ï¼Œç¡®ä¿æ€§èƒ½æœ€å¤§åŒ–ï¼š</p>
<p>**<em>1.</em> æ•°æ®é¢„å¤„ç†ï¼šå¼€å¯é¡¶å±‚é‡å»ºï¼Œ**åˆå¹¶ç®€åŒ–åº•å±‚å†—ä½™æ•°æ®ï¼Œä¼˜åŒ–ç“¦ç‰‡å±‚çº§ç»“æ„ã€‚</p>
<p><strong><em>2.</em> çº¹ç†æ ¼å¼ï¼šé‡‡ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D266397264%26content_type%3DArticle%26match_order%3D1%26q%3DKTX2.0%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=266397264&amp;content_type=Article&amp;match_order=1&amp;q=KTX2.0&amp;zhida_source=entity" ref="nofollow noopener noreferrer">KTX2.0</a></strong></p>
<p>**å‹ç¼©ï¼Œ**æ¨¡å‹çº¹ç†éœ€è½¬æ¢ä¸º KTX2.0 æ ¼å¼ï¼Œæ›¿ä»£ä¼ ç»Ÿ PNG/JPGã€‚</p>
<p><strong><em>3.</em> æœåŠ¡åˆ†å‘ï¼šä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D266397264%26content_type%3DArticle%26match_order%3D1%26q%3DMapmost%2BStudio%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=266397264&amp;content_type=Article&amp;match_order=1&amp;q=Mapmost+Studio&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Mapmost Studio</a></strong></p>
<p>**ä»£ç†ï¼Œ**é€šè¿‡ Mapmost Studio å¯¹æ•°æ®è¿›è¡Œåæ ‡è½¬æ¢å¹¶é…ç½®æ•°æ®ä»£ç†æœåŠ¡ï¼Œç»Ÿä¸€ç®¡ç†ç“¦ç‰‡åˆ†å‘ã€‚</p>
<h2 data-id="heading-5">åœºæ™¯åŒ–é…ç½®ç¤ºä¾‹ï¼š300 å¹³æ–¹å…¬é‡Œå…¨å›­åŒºå€¾æ–œæ¨¡å‹</h2>
<p>ä»¥åŠ è½½<strong>300å¹³æ–¹å…¬é‡Œå…¨å›­åŒºå€¾æ–œæ¨¡å‹</strong>ä¸ºä¾‹ï¼Œå»ºè®®é…ç½®å¦‚ä¸‹ï¼š</p>
<p><strong>1. å¿…å¼€èƒ½åŠ›</strong>ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db2e50a4730d4c9e95170d1727435b8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763882433&amp;x-signature=60KKKWy5IN9ufvnB%2F06USa9IzCU%3D" alt="" loading="lazy"/></p>
<p><strong><em>2.</em> æŒ‰éœ€è¡¥å……</strong>ï¼š</p>
<p><strong>ç›®çš„åœ°é¢„åŠ è½½æœºåˆ¶ï¼š<strong>è‹¥åœºæ™¯ä¸­éœ€è¦é¢‘ç¹è¿›è¡Œ</strong>é£è¡Œåˆ‡æ¢åŒºåŸŸ</strong>ï¼ˆå¦‚åœºæ™¯å·¡æ£€ï¼‰ï¼Œå»ºè®®é¢å¤–å¼€å¯ã€Œç›®çš„åœ°é¢„åŠ è½½æœºåˆ¶ã€ï¼Œæå‰åŠ è½½é£è¡Œç»ˆç‚¹çš„ç“¦ç‰‡ï¼Œå‡å°‘é£è¡Œè½åœ°åçš„ç­‰å¾…æ—¶é—´ã€‚</p>
<p>**åœºæ™¯æ¸…æ™°åº¦è°ƒæ•´ï¼š**æ ¹æ®éœ€æ±‚ä¸æ•°æ®æƒ…å†µè°ƒæ•´maximumScreenSpaceErrorå‚æ•°ï¼Œä¸€èˆ¬ä¿æŒé»˜è®¤å³å¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1a5ca82aa7b4a668a9770c7f26f76f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763882433&amp;x-signature=Na870qnrWtdKKvq7nkvQ7IzkNa4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ç»“è¯­</h2>
<p>Mapmost å€¾æ–œåŠ è½½èƒ½åŠ›ä»**â€œå†…å­˜é€‚é…ã€æ€§èƒ½ä¼˜åŒ–ã€åŠ è½½æ•ˆç‡â€**ä¸‰å¤§ç»´åº¦å‡ºå‘ï¼Œæ— éœ€å¤æ‚å¼€å‘ï¼Œé€šè¿‡ç®€å•å‚æ•°é…ç½®å³å¯å®ç°ï¼š</p>
<p>âœ… **å…¨è®¾å¤‡å…¼å®¹ï¼š**ä½æ€§èƒ½è®¾å¤‡ä¹Ÿèƒ½æµç•…è¿è¡Œ</p>
<p>âœ… **ç”»è´¨æ€§èƒ½å¹³è¡¡ï¼š**æŒ‰éœ€è°ƒæ•´ï¼Œå‘Šåˆ«â€œä¸€åˆ€åˆ‡â€</p>
<p>âœ… **æ“ä½œä½“éªŒå‡çº§ï¼š**ç§»åŠ¨ã€é£è¡Œåœºæ™¯å¿«é€ŸåŠ è½½</p>
<p>è¿™äº›ä¼˜åŒ–èƒ½åŠ›å…¨æ–¹ä½æå‡äº†å¤§åœºæ™¯å€¾æ–œæ¨¡å‹çš„åº”ç”¨ä½“éªŒï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿæ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ï¼Œè€Œä¸å¿…è¿‡åº¦æ‹…å¿§æ€§èƒ½ç“¶é¢ˆã€‚Mapmoståç»­å°†æŒç»­ä¼˜åŒ–ä¸‰ç»´å¯è§†åŒ–æŠ€æœ¯ï¼Œä¸ºè¡Œä¸šæä¾›æ›´å¼ºå¤§ã€æ›´æ˜“ç”¨çš„å¼€å‘å·¥å…·å’Œè§£å†³æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨äº†è¿™ä¸ªæ›´å‰å®³çš„På›¾AIï¼Œæˆ‘æŠŠPSå¸äº†ï¼æ–‡å­—ä¹Ÿèƒ½æ— ç—•ä¿®æ”¹ï¼1ç§’æ•‘åºŸå›¾ï¼ˆé™„ä¿å§†çº§æ•™ç¨‹ï¼‰]]></title>    <link>https://juejin.cn/post/7572749797468831753</link>    <guid>https://juejin.cn/post/7572749797468831753</guid>    <pubDate>2025-11-16T07:55:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572749797468831753" data-draft-id="7572793505899724851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨äº†è¿™ä¸ªæ›´å‰å®³çš„På›¾AIï¼Œæˆ‘æŠŠPSå¸äº†ï¼æ–‡å­—ä¹Ÿèƒ½æ— ç—•ä¿®æ”¹ï¼1ç§’æ•‘åºŸå›¾ï¼ˆé™„ä¿å§†çº§æ•™ç¨‹ï¼‰"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-16T07:55:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜Xå°é¹¿"/> <meta itemprop="url" content="https://juejin.cn/user/2928754709505608"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨äº†è¿™ä¸ªæ›´å‰å®³çš„På›¾AIï¼Œæˆ‘æŠŠPSå¸äº†ï¼æ–‡å­—ä¹Ÿèƒ½æ— ç—•ä¿®æ”¹ï¼1ç§’æ•‘åºŸå›¾ï¼ˆé™„ä¿å§†çº§æ•™ç¨‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2928754709505608/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜Xå°é¹¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T07:55:37.000Z" title="Sun Nov 16 2025 07:55:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Xå°é¹¿ã€‚</p>
<p>ç°åœ¨è¶Šæ¥è¶Šå¤šçš„äººéƒ½å¼€å§‹ç”¨ AI æ¥ç”Ÿæˆå›¾ç‰‡äº†ï¼Œå„ç§æµ·æŠ¥ã€ç”µå•†å›¾ç­‰ç­‰ã€‚</p>
<p>æ¯”å¦‚æˆ‘å¹³æ—¶ç”¨çš„æœ€å¤šçš„åœºæ™¯ï¼Œå°±æ˜¯ç”Ÿæˆå°é¢å’Œæ–‡ç« é…å›¾ ã€‚</p>
<p>å¯¹äºä¸€ä¸ªå®Œå…¨ä¸æ‡‚ç”»ç”»çš„äººæ¥è¯´ï¼ŒçœŸçš„éå¸¸æ–¹ä¾¿ã€‚</p>
<p>ä½†å¹³æ—¶ç”¨ AI ç”»å›¾é‡åˆ°æœ€å¤šçš„é—®é¢˜å°±æ˜¯ï¼š</p>
<p><strong>å›¾ç‰‡ä¸Šå¤§éƒ¨åˆ†åœ°æ–¹éƒ½æ»¡æ„ï¼Œä½†å¾€å¾€ä¸€ä¸ªã€Œç‘•ç–µã€ï¼Œåäº†æ•´å¼ å›¾ç‰‡ã€‚</strong></p>
<p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰å’Œæˆ‘ä¸€æ ·çš„ç»å†ã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢è¿™å¼ å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52ad6571b78c4d5c97bda9066ba4d152~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGYWOWwj-m5vw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763884536&amp;x-signature=5afNQi1J6vrBxneEesSlEwy42eY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>â€œæå®šâ€ä¸¤å­—æŒ¤åœ¨ä¸€èµ·äº†ï¼Œè€Œä¸”è¿˜æƒ³æŠŠå›¾ä¸­çš„ä¸»ã€å‰¯æ ‡é¢˜ç§»åŠ¨ä¸ªä½ç½®ã€‚</p>
<p>ä½†ç”¨ç›®å‰ä¸»æµçš„ä¸€äº› AI ç»˜ç”»å·¥å…·æˆ–å›¾ç‰‡ç¼–è¾‘å·¥å…·ï¼Œè¦ä¹ˆæ”¹ä¸äº†ï¼Œè¦ä¹ˆæ•ˆæœä¸ç†æƒ³ã€‚</p>
<p>é‡æ–°ç”Ÿæˆï¼Œæ•´å¼ å›¾éƒ½å˜äº†ï¼Œåˆå¾—æŠ½ä¸€ä¼šã€‚</p>
<p>ä¸è¿‡æœ€è¿‘çœ‹ Lovart ä¸Šçº¿äº†ã€Œç¼–è¾‘å…ƒç´ ã€çš„åŠŸèƒ½ï¼Œå¾ˆå¥½å¾—è§£å†³äº†äº›é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8fdbf8240ba45c88dbcc5eb6fce25de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGYWOWwj-m5vw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763884536&amp;x-signature=9l%2FKViWnggStxEqrCY%2F9naaI19g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<blockquote>
<p><strong>åªéœ€è¦æŠŠä¿®æ”¹çš„å›¾ç‰‡æ‹–è¿› Lovartï¼ŒLovart çš„ã€Œç¼–è¾‘å…ƒç´ ã€åŠŸèƒ½ï¼Œå°±èƒ½å°†å›¾ç‰‡æ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹çš„å›¾å±‚ã€‚æ–‡å­—ã€èƒŒæ™¯åŠå›¾ç‰‡ä¸­çš„ä¸»ä½“éƒ½å¯ä»¥éšä¿®æ”¹ã€åˆ é™¤æˆ–ç§»åŠ¨åˆ°ä»»æ„ä½ç½®ã€‚</strong></p>
</blockquote>
<p>ä¸€èµ·æ¥çœ‹çœ‹å§~</p>
<h2 data-id="heading-0">Lovart ç¼–è¾‘å…ƒç´ </h2>
<p>æ‰“å¼€ Lovartï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lovart.ai%2F" target="_blank" title="https://www.lovart.ai/" ref="nofollow noopener noreferrer">www.lovart.ai/</a></p>
<p>ç‚¹ã€Œé¡¹ç›®ã€-ã€Œæ–°å»ºé¡¹ç›®ã€ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4661a6675dfa40fb9d64ddaf350f5962~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGYWOWwj-m5vw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763884536&amp;x-signature=lL58iQEJSXWs%2FbjWFNgjcdmtCkU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å°†è¦ä¿®æ”¹çš„å›¾ç‰‡æ‹–è¿› Lovartï¼Œç„¶åç‚¹ã€Œç¼–è¾‘å…ƒç´ ã€ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8874b9e2af440878d97f3c3ab000863~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGYWOWwj-m5vw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763884536&amp;x-signature=2ysSWc0%2BIYdMexcFErdrWIYnmCA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç¨å¾®ç­‰ä¸€ä¼šï¼Œå›¾ç‰‡å°±è¢«æ‹†åˆ†æˆäº†å¤šä¸ªå¯ç¼–è¾‘çš„å›¾å±‚ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb8d372ec576494a98cd59dccaa98728~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGYWOWwj-m5vw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763884536&amp;x-signature=xhJPeHJ5jXCAs3hTG4mXJTplPhU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥éšæ„ä¿®æ”¹æ–‡å­—å†…å®¹ã€é¢œè‰²ã€å­—ä½“ã€ç²—ç»†ã€å­—å·ã€å¯¹é½æ–¹å¼ã€å­—é—´è·ã€è¡Œé—´è·ç­‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2905498b37f458cb08379ea4fa438bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGYWOWwj-m5vw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763884536&amp;x-signature=6iuVCyiFDboNeIGgjQyNKi5OBIw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç”»é¢ä¸­è¢«æ‹†åˆ†å‡ºæ¥çš„å…¶ä»–å…ƒç´ ï¼Œä¹Ÿèƒ½éšæ„æ”¾å¤§ã€ç¼©å°ã€åˆ é™¤ã€ç§»åŠ¨ä½ç½®ã€‚</p>
<p>ä¿®æ”¹å®Œæˆåï¼Œ<strong>è®°å¾—å…ˆã€Œåˆå¹¶å›¾å±‚ã€å†ã€Œä¸‹è½½ã€</strong>ï¼Œå¦åˆ™å¯èƒ½ä»…ä»…æ˜¯æŠŠæŸä¸€ä¸ªå›¾å±‚ä¸‹è½½ä¸‹æ¥äº†ï¼Œä¸å®Œæ•´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dda05b3edb35453c9e54dc2afc040ef0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGYWOWwj-m5vw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763884536&amp;x-signature=OBPHCLnKxXCd0yteWPBmPQY8q5U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è™½ç„¶æœ‰æ—¶æ‹†åˆ†å®Œï¼Œå¯èƒ½ä¼šæœ‰ä¸€äº›å…ƒç´ ä¸¢å¤±ï¼Œå¯ä»¥å†é‡è¯•ä¸€ä¸‹ï¼Œä¸è¿‡æ•´ä½“æ•ˆæœè¿˜å¯ä»¥ã€‚</p>
<p>è€Œä¸” Lovart çš„å…è´¹ç”¨æˆ·ï¼Œç›®å‰æ¯å¤©éƒ½æœ‰ 100 ç§¯åˆ†ï¼Œè€Œã€Œç¼–è¾‘å…ƒç´ ã€ï¼Œæ¯æ¬¡åªéœ€è¦æ¶ˆè€— 5 ç§¯åˆ†ã€‚</p>
<h2 data-id="heading-1">å†™åœ¨æœ€å</h2>
<p>Lovartï¼Œä½œä¸ºå…¨çƒé¦–ä¸ªè®¾è®¡æ™ºèƒ½ä½“ï¼Œèƒ½å¤Ÿå°†ç”¨æˆ·çš„æ¨¡ç³Šåˆ›æ„ä¸€æ­¥æ­¥è½¬åŒ–ä¸ºä¸“ä¸šçš„è®¾è®¡ä½œå“ã€‚</p>
<p>è¿˜æ•´åˆäº† Nano Bananaã€Seedreamã€Midjourneyã€Soraã€Veoã€Hailuoã€Klingã€Tripo ç­‰ä¸»æµ AI å›¾ç‰‡ã€è§†é¢‘ã€3D æ¨¡å‹ã€‚</p>
<p>é™¤äº†ä»Šå¤©ä»‹ç»çš„ã€Œç¼–è¾‘å…ƒç´ ã€å¤–ï¼ŒLovart è¿˜æœ‰å¾ˆå¤šå®ç”¨çš„åŠŸèƒ½ï¼Œæ„Ÿå…´è¶£çš„éƒ½å¯ä»¥è¯•è¯•ã€‚</p>
<hr/>
<blockquote>
<p>æˆ‘æ˜¯<a href="https://juejin.cn/user/2928754709505608/posts" title="https://juejin.cn/user/2928754709505608/posts" target="_blank">ç¨‹åºå‘˜Xå°é¹¿</a>ï¼Œå‰äº’è”ç½‘å¤§å‚ç¨‹åºå‘˜ï¼Œä¹Ÿæ˜¯ä¸€å AIGC çˆ±å¥½è€…ï¼ŒæŒç»­åˆ†äº«æ›´å¤šå¥½ç”¨çš„ AI å·¥å…·ï¼Œæ¬¢è¿ä¸€èµ·äº¤æµ~</p>
</blockquote>
<p><strong>æ¨èé˜…è¯»</strong></p>
<p><a href="https://juejin.cn/post/7454501732203610131" title="https://juejin.cn/post/7454501732203610131" target="_blank">2024å¹´ç»ˆAIå·¥å…·æ±‡æ€»ï¼š9å¤§AIé¢†åŸŸï¼Œ70+ç²¾é€‰AIå·¥å…·ï¼Œå…¨éƒ½åœ¨è¿™äº†ï¼(å»ºè®®æ”¶è—)</a></p>
<p>æ›´å¤š AI å·¥å…·è§<a href="https://juejin.cn/column/7284164153576947724" title="https://juejin.cn/column/7284164153576947724" target="_blank">ã€AIå·¥å…·ã€‘</a>ä¸“æ ï¼ŒæŒç»­æ›´æ–°ä¸­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251110-251114ï¼‰]]></title>    <link>https://juejin.cn/post/7572697146287226930</link>    <guid>https://juejin.cn/post/7572697146287226930</guid>    <pubDate>2025-11-16T06:40:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572697146287226930" data-draft-id="7572749797468684297" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251110-251114ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-16T06:40:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ"/> <meta itemprop="url" content="https://juejin.cn/user/2831954919569245"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251110-251114ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2831954919569245/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T06:40:15.000Z" title="Sun Nov 16 2025 06:40:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Lumine: An Open Recipe for Building Generalist Agents in 3D Open Worlds</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.08892" target="_blank" title="https://arxiv.org/abs/2511.08892" ref="nofollow noopener noreferrer">Lumine: æ„å»º3Då¼€æ”¾ä¸–ç•Œä¸­é€šç”¨AIæ™ºèƒ½ä½“çš„å¼€æ”¾æ–¹æ¡ˆ</a></p>
<p>æˆ‘ä»¬æ¨å‡ºLumineï¼Œè¿™æ˜¯é¦–ä¸ªç”¨äºå¼€å‘é€šç”¨AIæ™ºèƒ½ä½“çš„å¼€æ”¾æ–¹æ¡ˆï¼Œèƒ½å¤Ÿåœ¨æŒ‘æˆ˜æ€§3Då¼€æ”¾ä¸–ç•Œç¯å¢ƒä¸­å®æ—¶å®Œæˆé•¿è¾¾æ•°å°æ—¶çš„å¤æ‚ä»»åŠ¡ã€‚Lumineé‡‡ç”¨ç±»äººäº¤äº’èŒƒå¼ï¼Œä»¥è§†è§‰è¯­è¨€æ¨¡å‹é©±åŠ¨ï¼Œç«¯åˆ°ç«¯åœ°ç»Ÿä¸€æ„ŸçŸ¥ã€æ¨ç†ä¸è¡ŒåŠ¨ã€‚å®ƒä»¥5Hzå¤„ç†åŸå§‹åƒç´ ï¼Œç”Ÿæˆç²¾ç¡®çš„30Hzé”®é¼ åŠ¨ä½œï¼Œå¹¶ä»…åœ¨å¿…è¦æ—¶è‡ªé€‚åº”è§¦å‘æ¨ç†ã€‚åœ¨ã€ŠåŸç¥ã€‹ä¸­è®­ç»ƒåï¼ŒLumineæˆåŠŸé€šå…³æ•´ä¸ªäº”å°æ—¶è’™å¾·ä¸»çº¿å‰§æƒ…ï¼Œæ•ˆç‡è¾¾åˆ°äººç±»æ°´å¹³ï¼Œå¹¶èƒ½éµå¾ªè‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œåœ¨3Då¼€æ”¾ä¸–ç•Œæ¢ç´¢å’Œ2Då›¾å½¢ç•Œé¢æ“ä½œä¸­å¹¿æ³›æ‰§è¡Œæ”¶é›†ã€æˆ˜æ–—ã€è§£è°œåŠNPCäº¤äº’ç­‰ä»»åŠ¡ã€‚é™¤é¢†åŸŸå†…æ€§èƒ½å¤–ï¼ŒLumineè¿˜å±•ç°å‡ºå¼ºå¤§çš„é›¶æ ·æœ¬è·¨æ¸¸æˆæ³›åŒ–èƒ½åŠ›ï¼šæ— éœ€å¾®è°ƒï¼Œå³å¯åœ¨ã€Šé¸£æ½®ã€‹ä¸­å®Œæˆ100åˆ†é’Ÿä»»åŠ¡ï¼Œå¹¶åœ¨ã€Šå´©åï¼šæ˜Ÿç©¹é“é“ã€‹ä¸­é€šå…³å®Œæ•´äº”å°æ—¶ç¬¬ä¸€ç« ã€‚è¿™äº›æ˜¾è‘—æˆæœè¯æ˜äº†Lumineåœ¨ä¸åŒä¸–ç•Œä¸äº¤äº’æœºåˆ¶ä¸­çš„é«˜æ•ˆæ€§ï¼Œæ ‡å¿—ç€å¼€æ”¾ç¯å¢ƒä¸‹é€šç”¨AIæ™ºèƒ½ä½“å‘å±•çš„å®è´¨æ€§è¿›å±•ã€‚</p>
<h2 data-id="heading-1">Grounding Computer Use Agents on Human Demonstrations</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.07332" target="_blank" title="https://arxiv.org/abs/2511.07332" ref="nofollow noopener noreferrer">åŸºäºäººç±»æ¼”ç¤ºçš„è®¡ç®—æœºä½¿ç”¨æ™ºèƒ½ä½“åŸºç¡€æ„å»º</a></p>
<p>æ„å»ºå¯é çš„è®¡ç®—æœºä½¿ç”¨æ™ºèƒ½ä½“éœ€è¦åŸºç¡€åŒ–ï¼šå°†è‡ªç„¶è¯­è¨€æŒ‡ä»¤ä¸æ­£ç¡®çš„å±å¹•å…ƒç´ ç²¾ç¡®å…³è”ã€‚å°½ç®¡å·²æœ‰å¤§é‡ç½‘é¡µå’Œç§»åŠ¨äº¤äº’æ•°æ®é›†ï¼Œä½†æ¡Œé¢ç¯å¢ƒçš„é«˜è´¨é‡æ•°æ®èµ„æºä»æ˜¾ä¸è¶³ã€‚ä¸ºå¡«è¡¥è¿™ä¸€ç©ºç™½ï¼Œæˆ‘ä»¬æ¨å‡ºäº† GroundCUAâ€”â€”ä¸€ä¸ªåŸºäºä¸“å®¶äººç±»æ¼”ç¤ºæ„å»ºçš„å¤§è§„æ¨¡æ¡Œé¢åŸºç¡€åŒ–æ•°æ®é›†ã€‚è¯¥æ•°æ®é›†è¦†ç›– 12 ä¸ªç±»åˆ«ä¸‹çš„ 87 ä¸ªåº”ç”¨ç¨‹åºï¼ŒåŒ…å« 5.6 ä¸‡å¼ å±å¹•æˆªå›¾ï¼Œæ‰€æœ‰å±å¹•å…ƒç´ å‡ç»è¿‡ç²¾ç»†æ ‡æ³¨ï¼Œç´¯è®¡äººç±»éªŒè¯æ ‡æ³¨é‡è¶…è¿‡ 356 ä¸‡æ¡ã€‚åŸºäºè¿™äº›æ¼”ç¤ºï¼Œæˆ‘ä»¬ç”Ÿæˆäº†æ¶µç›–å¹¿æ³›ç°å®ä»»åŠ¡çš„å¤šæ ·åŒ–æŒ‡ä»¤ï¼Œä¸ºæ¨¡å‹è®­ç»ƒæä¾›é«˜è´¨é‡æ•°æ®æ”¯æ’‘ã€‚åˆ©ç”¨ GroundCUAï¼Œæˆ‘ä»¬å¼€å‘äº† GroundNext ç³»åˆ—æ¨¡å‹ï¼Œèƒ½å¤Ÿå°†æŒ‡ä»¤æ˜ å°„è‡³å¯¹åº” UI å…ƒç´ ã€‚åœ¨ 30 äº¿å’Œ 70 äº¿å‚æ•°è§„æ¨¡ä¸‹ï¼Œé€šè¿‡ç›‘ç£å¾®è°ƒï¼ŒGroundNext åœ¨äº”é¡¹åŸºå‡†æµ‹è¯•ä¸­å‡è¾¾åˆ°æœ€å…ˆè¿›æ°´å¹³ï¼Œä¸”è®­ç»ƒæ•°æ®é‡ä¸è¶³å…ˆå‰å·¥ä½œçš„ååˆ†ä¹‹ä¸€ã€‚åç»­å¼ºåŒ–å­¦ä¹ è¿›ä¸€æ­¥æå‡äº†æ¨¡å‹æ€§èƒ½ï¼Œåœ¨ OSWorld åŸºå‡†çš„æ™ºèƒ½ä½“æµ‹è¯•ç¯å¢ƒä¸­ï¼Œä»¥ o3 ä½œä¸ºè§„åˆ’å™¨æ—¶ï¼ŒGroundNext å–å¾—äº†ä¸ä½¿ç”¨è¿œè¶…å…¶è®­ç»ƒæ•°æ®é‡çš„æ¨¡å‹ç›¸å½“æˆ–æ›´ä¼˜çš„ç»“æœã€‚è¿™äº›æˆæœå°è¯äº†é«˜è´¨é‡ä¸“å®¶é©±åŠ¨æ•°æ®é›†å¯¹æ¨è¿›é€šç”¨è®¡ç®—æœºä½¿ç”¨æ™ºèƒ½ä½“å‘å±•çš„å…³é”®ä½œç”¨ã€‚</p>
<h2 data-id="heading-2">Tiny Model, Big Logic: Diversity-Driven Optimization Elicits Large-Model Reasoning Ability in VibeThinker-1.5B</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.06221" target="_blank" title="https://arxiv.org/abs/2511.06221" ref="nofollow noopener noreferrer">å°æ¨¡å‹ï¼Œå¤§é€»è¾‘ï¼šå¤šæ ·æ€§é©±åŠ¨ä¼˜åŒ–æ¿€å‘ VibeThinker-1.5B çš„å¤§æ¨¡å‹çº§æ¨ç†èƒ½åŠ›</a></p>
<p>é’ˆå¯¹å½“å‰æ™®éè®¤ä¸ºå°æ¨¡å‹å¤©ç”Ÿç¼ºä¹å¼ºå¤§æ¨ç†èƒ½åŠ›çš„å…±è¯†ï¼Œæœ¬æŠ¥å‘Šæå‡ºäº† VibeThinker-1.5Bï¼Œè¿™æ˜¯ä¸€ä¸ªé€šè¿‡é¢‘è°±åˆ°ä¿¡å·åŸåˆ™ (SSP) å¼€å‘çš„ 1.5B å‚æ•°å¯†é›†æ¨¡å‹ã€‚è¯¥æ¨¡å‹æŒ‘æˆ˜äº†é€šè¿‡æ‰©å¤§æ¨¡å‹å‚æ•°æ¥æå‡èƒ½åŠ›çš„æµè¡Œæ–¹æ³•ï¼Œä¾‹å¦‚ DeepSeek R1 (671B) å’Œ Kimi k2 (&gt;1T) ç­‰æ¨¡å‹æ‰€é‡‡ç”¨çš„ç­–ç•¥ã€‚SSP æ¡†æ¶é¦–å…ˆé‡‡ç”¨ä¸¤é˜¶æ®µå¤šæ ·æ€§æ¢ç´¢è’¸é¦ (SFT) ç”Ÿæˆå¹¿æ³›çš„è§£ç©ºé—´ï¼Œéšåé€šè¿‡æœ€å¤§ç†µå¼•å¯¼ç­–ç•¥ä¼˜åŒ– (RL) å¼ºåŒ–æ­£ç¡®ä¿¡å·ã€‚æ€»è®­ç»ƒæˆæœ¬ä»…ä¸º 7,800 ç¾å…ƒï¼ŒVibeThinker-1.5B åœ¨æ¨ç†èƒ½åŠ›ä¸Šä¼˜äºé—­æºæ¨¡å‹å¦‚ Magistral Medium å’Œ Claude Opus 4ï¼Œå¹¶ä¸å¼€æºæ¨¡å‹ GPT OSS-20B Medium è¡¨ç°ç›¸å½“ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå®ƒåœ¨ä¸‰ä¸ªæ•°å­¦åŸºå‡†æµ‹è¯•ä¸­è¶…è¶Šäº†å‚æ•°è§„æ¨¡å¤§ 400 å€çš„ DeepSeek R1ï¼šAIME24 (80.3 å¯¹ 79.8)ã€AIME25 (74.4 å¯¹ 70.0) å’Œ HMMT25 (50.4 å¯¹ 41.7)ã€‚è¿™ç›¸å¯¹äºå…¶åŸºç¡€æ¨¡å‹ï¼ˆå¾—åˆ†åˆ†åˆ«ä¸º 6.7ã€4.3 å’Œ 0.6ï¼‰æ˜¯æ˜¾è‘—æå‡ã€‚åœ¨ LiveCodeBench V6 ä¸Šï¼Œå…¶å¾—åˆ†ä¸º 51.1ï¼Œè¶…è¿‡ Magistral Medium çš„ 50.3 åŠå…¶åŸºç¡€æ¨¡å‹çš„ 0.0ã€‚è¿™äº›ç»“æœè¡¨æ˜ï¼Œå°æ¨¡å‹èƒ½å¤Ÿå®ç°ä¸å¤§æ¨¡å‹ç›¸åª²ç¾çš„æ¨ç†èƒ½åŠ›ï¼Œå¤§å¹…é™ä½è®­ç»ƒå’Œæ¨ç†æˆæœ¬ï¼Œä»è€Œæ¨åŠ¨å…ˆè¿› AI ç ”ç©¶çš„æ™®åŠã€‚</p>
<h2 data-id="heading-3">HaluMem: Evaluating Hallucinations in Memory Systems of Agents</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.03506" target="_blank" title="https://arxiv.org/abs/2511.03506" ref="nofollow noopener noreferrer">HaluMemï¼šè¯„ä¼°æ™ºèƒ½ä½“è®°å¿†ç³»ç»Ÿä¸­çš„å¹»è§‰</a></p>
<p>è®°å¿†ç³»ç»Ÿæ˜¯å®ç°å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’ŒAIæ™ºèƒ½ä½“ç­‰äººå·¥æ™ºèƒ½ç³»ç»Ÿé•¿æœŸå­¦ä¹ ä¸æŒç»­äº¤äº’çš„å…³é”®ç»„ä»¶ã€‚ç„¶è€Œåœ¨è®°å¿†å­˜å‚¨å’Œæ£€ç´¢è¿‡ç¨‹ä¸­ï¼Œè¿™äº›ç³»ç»Ÿå¸¸å‡ºç°è®°å¿†å¹»è§‰ç°è±¡ï¼ŒåŒ…æ‹¬è™šæ„ã€é”™è¯¯ã€å†²çªå’Œé—æ¼ç­‰é—®é¢˜ã€‚ç°æœ‰å¯¹è®°å¿†å¹»è§‰çš„è¯„ä¼°ä¸»è¦é‡‡ç”¨ç«¯åˆ°ç«¯é—®ç­”å½¢å¼ï¼Œéš¾ä»¥å‡†ç¡®å®šä½å¹»è§‰åœ¨è®°å¿†ç³»ç»Ÿå†…éƒ¨äº§ç”Ÿçš„å…·ä½“æ“ä½œç¯èŠ‚ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æå‡ºè®°å¿†å¹»è§‰åŸºå‡†ï¼ˆHaluMemï¼‰ï¼Œè¿™æ˜¯é¦–ä¸ªä¸“ä¸ºè®°å¿†ç³»ç»Ÿè®¾è®¡çš„æ“ä½œçº§å¹»è§‰è¯„ä¼°åŸºå‡†ã€‚HaluMemå®šä¹‰äº†è®°å¿†æå–ã€è®°å¿†æ›´æ–°å’Œè®°å¿†é—®ç­”ä¸‰é¡¹è¯„ä¼°ä»»åŠ¡ï¼Œå…¨é¢æ­ç¤ºäº¤äº’è¿‡ç¨‹ä¸­ä¸åŒæ“ä½œé˜¶æ®µçš„å¹»è§‰è¡Œä¸ºã€‚ä¸ºæ”¯æŒè¯„ä¼°ï¼Œæˆ‘ä»¬æ„å»ºäº†ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„å¤šè½®äººæœºäº¤äº’æ•°æ®é›†HaluMem-Mediumå’ŒHaluMem-Longï¼Œä¸¤è€…å‡åŒ…å«çº¦1.5ä¸‡è®°å¿†ç‚¹å’Œ3500ä¸ªå¤šç±»å‹é—®é¢˜ã€‚æ¯ä¸ªç”¨æˆ·çš„å¹³å‡å¯¹è¯è½®æ•°åˆ†åˆ«è¾¾åˆ°1500è½®å’Œ2600è½®ï¼Œä¸Šä¸‹æ–‡é•¿åº¦è¶…è¿‡100ä¸‡tokenï¼ˆTokenï¼‰ï¼Œå¯è¯„ä¼°ä¸åŒä¸Šä¸‹æ–‡è§„æ¨¡ä¸ä»»åŠ¡å¤æ‚åº¦ä¸‹çš„å¹»è§‰ç°è±¡ã€‚åŸºäºHaluMemçš„å®è¯ç ”ç©¶è¡¨æ˜ï¼Œç°æœ‰è®°å¿†ç³»ç»Ÿåœ¨æå–å’Œæ›´æ–°é˜¶æ®µå®¹æ˜“äº§ç”Ÿå¹¶ç§¯ç´¯å¹»è§‰ï¼Œè¿›è€Œå°†é”™è¯¯ä¼ æ’­è‡³é—®ç­”é˜¶æ®µã€‚æœªæ¥ç ”ç©¶åº”è‡´åŠ›äºå¼€å‘å…·æœ‰å¯è§£é‡Šæ€§çš„å—çº¦æŸè®°å¿†æ“ä½œæœºåˆ¶ï¼Œç³»ç»Ÿæ€§åœ°æŠ‘åˆ¶å¹»è§‰å¹¶æå‡è®°å¿†å¯é æ€§ã€‚</p>
<h2 data-id="heading-4">One Small Step in Latent, One Giant Leap for Pixels: Fast Latent Upscale Adapter for Your Diffusion Models</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.10629" target="_blank" title="https://arxiv.org/abs/2511.10629" ref="nofollow noopener noreferrer">æ½œåœ¨ç©ºé—´ä¸€å°æ­¥ï¼Œåƒç´ ç»´åº¦å¤§è·¨è¶Šï¼šæ‰©æ•£æ¨¡å‹å¿«é€Ÿæ½œåœ¨ä¸Šé‡‡æ ·é€‚é…å™¨</a></p>
<p>æ‰©æ•£æ¨¡å‹éš¾ä»¥çªç ´å…¶è®­ç»ƒåˆ†è¾¨ç‡çš„é™åˆ¶ï¼šç›´æ¥è¿›è¡Œé«˜åˆ†è¾¨ç‡é‡‡æ ·é€Ÿåº¦ç¼“æ…¢ä¸”è®¡ç®—æˆæœ¬é«˜æ˜‚ï¼Œè€Œåå¤„ç†çš„å›¾åƒè¶…åˆ†è¾¨ç‡ï¼ˆISRï¼‰æ–¹æ³•éœ€åœ¨è§£ç åæ‰§è¡Œæ“ä½œï¼Œä¸ä»…ä¼šå¼•å…¥ä¼ªå½±ï¼Œè¿˜ä¼šå¢åŠ é¢å¤–å»¶è¿Ÿã€‚æœ¬æ–‡æå‡ºæ½œåœ¨ä¸Šé‡‡æ ·é€‚é…å™¨ï¼ˆLUAï¼‰ï¼Œè¯¥è½»é‡æ¨¡å—å¯åœ¨æœ€ç»ˆVAEè§£ç æ­¥éª¤ä¹‹å‰ï¼Œç›´æ¥åœ¨ç”Ÿæˆå™¨çš„æ½œåœ¨ç¼–ç ä¸Šæ‰§è¡Œè¶…åˆ†è¾¨ç‡ã€‚LUAä»¥å³æ’å³ç”¨å¼ç»„ä»¶å½¢å¼é›†æˆï¼Œæ— éœ€ä¿®æ”¹åŸºç¡€æ¨¡å‹ç»“æ„æˆ–å¢åŠ é¢å¤–æ‰©æ•£é˜¶æ®µï¼Œä»…éœ€åœ¨æ½œåœ¨ç©ºé—´æ‰§è¡Œå•æ¬¡å‰å‘ä¼ æ’­å³å¯å®ç°é«˜åˆ†è¾¨ç‡åˆæˆã€‚å…¶é‡‡ç”¨å…±äº«å¼Swinæ¶æ„éª¨å¹²ç½‘ç»œé…åˆå¤šå°ºåº¦åƒç´ é‡ç»„å¤´ï¼Œæ”¯æŒ2å€ä¸4å€ä¸Šé‡‡æ ·å› å­ï¼ŒåŒæ—¶ä¿æŒä¸å›¾åƒç©ºé—´è¶…åˆ†è¾¨ç‡åŸºå‡†çš„å…¼å®¹æ€§â€”â€”åœ¨è¾¾åˆ°ç›¸è¿‘æ„ŸçŸ¥è´¨é‡çš„å‰æä¸‹ï¼Œå°†è§£ç ä¸ä¸Šé‡‡æ ·æ—¶é—´é™ä½è¿‘3å€ï¼ˆä»512åƒç´ ç”Ÿæˆ1024åƒç´ ä»…éœ€å¢åŠ 0.42ç§’ï¼Œè€Œä½¿ç”¨ç›¸åŒSwinIRæ¶æ„çš„åƒç´ ç©ºé—´è¶…åˆ†è¾¨ç‡éœ€1.87ç§’ï¼‰ã€‚æ­¤å¤–ï¼ŒLUAåœ¨ä¸åŒVAEçš„æ½œåœ¨ç©ºé—´å‡å±•ç°å‡ºå“è¶Šçš„æ³›åŒ–èƒ½åŠ›ï¼Œæ— éœ€é’ˆå¯¹æ¯ä¸ªæ–°è§£ç å™¨é‡æ–°è®­ç»ƒå³å¯å¿«é€Ÿéƒ¨ç½²ã€‚å¤§é‡å®éªŒè¡¨æ˜ï¼ŒLUAåœ¨ä¿çœŸåº¦æ–¹é¢å¯åª²ç¾åŸç”Ÿé«˜åˆ†è¾¨ç‡ç”Ÿæˆï¼ŒåŒæ—¶ä¸ºç°ä»£æ‰©æ•£æµç¨‹ä¸­çš„å¯æ‰©å±•é«˜ä¿çœŸå›¾åƒåˆæˆæä¾›äº†å®ç”¨é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-5">TiDAR: Think in Diffusion, Talk in Autoregression</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.08923" target="_blank" title="https://arxiv.org/abs/2511.08923" ref="nofollow noopener noreferrer">TiDAR: æ‰©æ•£æ€è€ƒï¼Œè‡ªå›å½’äº¤è°ˆ</a></p>
<p>æ‰©æ•£è¯­è¨€æ¨¡å‹å…·å¤‡å¿«é€Ÿå¹¶è¡Œç”Ÿæˆèƒ½åŠ›ï¼Œè€Œè‡ªå›å½’ (AR) æ¨¡å‹å› å…¶å› æœç»“æ„ä¸è¯­è¨€å»ºæ¨¡å¤©ç„¶å¥‘åˆï¼Œé€šå¸¸åœ¨ç”Ÿæˆè´¨é‡ä¸Šæ›´ä¼˜ã€‚è¿™å¼•å‡ºä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šèƒ½å¦åœ¨å®ç°é«˜ååé‡ã€æ›´é«˜ GPU åˆ©ç”¨ç‡çš„åŒæ—¶ï¼Œè¾¾åˆ° AR çº§åˆ«çš„è´¨é‡ï¼Ÿç°æœ‰æ–¹æ³•å‡æœªèƒ½æœ‰æ•ˆå¹³è¡¡è¿™ä¸¤æ–¹é¢ï¼šè¦ä¹ˆé‡‡ç”¨è¾ƒå¼±æ¨¡å‹è¿›è¡Œé¡ºåºè‰ç¨¿ç”Ÿæˆï¼ˆæ¨æµ‹è§£ç ï¼‰ä»¥ä¼˜å…ˆä¿éšœ AR ç‰¹æ€§ï¼Œå¯¼è‡´è‰ç¨¿æ•ˆç‡ä½ä¸‹ï¼›è¦ä¹ˆä¸ºæ‰©æ•£æ¨¡å‹å¼•å…¥ç±» AR çš„å·¦åˆ°å³è§£ç é€»è¾‘ï¼Œä»é¢ä¸´è´¨é‡ä¸‹é™é—®é¢˜ä¸”ä¸§å¤±å¹¶è¡Œæ½œåŠ›ã€‚æˆ‘ä»¬æå‡º TiDARâ€”â€”ä¸€ç§åºåˆ—çº§æ··åˆæ¶æ„ï¼Œé€šè¿‡ä¸“é—¨è®¾è®¡çš„ç»“æ„åŒ–æ³¨æ„åŠ›æ©ç ï¼Œåœ¨å•æ¬¡å‰å‘ä¼ æ’­ä¸­å®ç°æ‰©æ•£å¼ token è‰ç¨¿ç”Ÿæˆï¼ˆæ€è€ƒï¼‰ä¸è‡ªå›å½’æœ€ç»ˆè¾“å‡ºé‡‡æ ·ï¼ˆäº¤è°ˆï¼‰ã€‚è¯¥è®¾è®¡å……åˆ†åˆ©ç”¨ GPU é—²ç½®è®¡ç®—èµ„æºï¼Œåœ¨è‰ç¨¿ç”Ÿæˆä¸éªŒè¯èƒ½åŠ›é—´å–å¾—ä¼˜å¼‚å¹³è¡¡ã€‚æ­¤å¤–ï¼ŒTiDAR ä½œä¸ºç‹¬ç«‹æ¨¡å‹å…·å¤‡ä½å¼€é”€çš„éƒ¨ç½²å‹å¥½ç‰¹æ€§ã€‚æˆ‘ä»¬åœ¨ 1.5B å’Œ 8B è§„æ¨¡ä¸‹ï¼Œé’ˆå¯¹ç”Ÿæˆä¸ä¼¼ç„¶ä»»åŠ¡å¯¹ TiDARã€AR æ¨¡å‹ã€æ¨æµ‹è§£ç åŠæ‰©æ•£å˜ä½“è¿›è¡Œå¹¿æ³›è¯„ä¼°ã€‚å‡­å€Ÿå¹¶è¡Œè‰ç¨¿ç”Ÿæˆä¸é‡‡æ ·æœºåˆ¶ä»¥åŠç²¾ç¡® KV ç¼“å­˜æ”¯æŒï¼ŒTiDAR åœ¨ååé‡ä¸Šè¶…è¶Šæ¨æµ‹è§£ç ï¼Œåœ¨æ•ˆç‡ä¸è´¨é‡æ–¹é¢å‡ä¼˜äº Dreamã€Llada ç­‰æ‰©æ•£æ¨¡å‹ã€‚æœ€æ˜¾è‘—çš„æ˜¯ï¼ŒTiDAR æˆä¸ºé¦–ä¸ªåœ¨ä¿æŒæ¯ç§’ç”Ÿæˆ 4.71-5.91 å€æ›´å¤š token çš„åŒæ—¶ï¼Œå®Œå…¨å¼¥åˆä¸ AR æ¨¡å‹è´¨é‡å·®è·çš„æ¶æ„ã€‚</p>
<h2 data-id="heading-6">IterResearch: Rethinking Long-Horizon Agents via Markovian State Reconstruction</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.07327" target="_blank" title="https://arxiv.org/abs/2511.07327" ref="nofollow noopener noreferrer">IterResearchï¼šé€šè¿‡é©¬å°”å¯å¤«çŠ¶æ€é‡æ„é‡æ–°æ€è€ƒé•¿è§†é‡æ™ºèƒ½ä½“</a></p>
<p>æ·±åº¦ç ”ç©¶æ™ºèƒ½ä½“çš„æœ€æ–°è¿›å±•è¡¨æ˜ï¼Œé€šè¿‡å¯¹å¤–éƒ¨ä¿¡æ¯æºè¿›è¡ŒåŠ¨æ€æ¨ç†ï¼Œæœ‰æœ›å®ç°è‡ªä¸»çŸ¥è¯†æ„å»ºã€‚ç„¶è€Œï¼Œç°æœ‰æ–¹æ³•é‡‡ç”¨å•ä¸Šä¸‹æ–‡èŒƒå¼ï¼Œå°†æ‰€æœ‰ä¿¡æ¯ç´¯ç§¯åœ¨æŒç»­æ‰©å±•çš„ä¸Šä¸‹æ–‡çª—å£ä¸­ï¼Œå¯¼è‡´ä¸Šä¸‹æ–‡æ‹¥å¡å’Œå™ªå£°å¹²æ‰°ï¼Œä»è€Œé™åˆ¶äº†å…¶åœ¨é•¿è§†é‡ä»»åŠ¡ä¸­çš„æ•ˆèƒ½ã€‚æˆ‘ä»¬æå‡º IterResearchï¼Œä¸€ç§æ–°é¢–çš„è¿­ä»£å¼æ·±åº¦ç ”ç©¶èŒƒå¼ï¼Œå°†é•¿è§†é‡ç ”ç©¶é‡æ–°å®šä¹‰ä¸ºå…·æœ‰ç­–ç•¥æ€§å·¥ä½œåŒºé‡æ„çš„é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ã€‚è¯¥æ–¹æ³•é€šè¿‡ç»´æŠ¤åŠ¨æ€æ¼”è¿›çš„æŠ¥å‘Šä½œä¸ºè®°å¿†ä½“ï¼Œå¹¶å®šæœŸæ•´åˆå…³é”®è§è§£ï¼Œå¯åœ¨ä»»æ„æ¢ç´¢æ·±åº¦ä¸‹ä¿æŒç¨³å®šçš„æ¨ç†èƒ½åŠ›ã€‚æˆ‘ä»¬è¿˜å¼€å‘äº†æ•ˆç‡æ„ŸçŸ¥ç­–ç•¥ä¼˜åŒ– (EAPO)ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäºå‡ ä½•å¥–åŠ±è¡°å‡æœºåˆ¶æ¿€åŠ±é«˜æ•ˆæ¢ç´¢çš„å¼ºåŒ–å­¦ä¹ æ¡†æ¶ï¼Œå¹¶é€šè¿‡è‡ªé€‚åº”é™é‡‡æ ·å®ç°ç¨³å®šçš„åˆ†å¸ƒå¼è®­ç»ƒã€‚å¤§é‡å®éªŒè¡¨æ˜ï¼ŒIterResearch åœ¨å…­ä¸ªåŸºå‡†æµ‹è¯•ä¸­ç›¸è¾ƒç°æœ‰å¼€æºæ™ºèƒ½ä½“å¹³å‡æå‡ 14.5 ä¸ªç™¾åˆ†ç‚¹ï¼Œæ˜¾è‘—ç¼©å°äº†ä¸å°–ç«¯ä¸“æœ‰ç³»ç»Ÿçš„å·®è·ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¯¥èŒƒå¼å±•ç°å‡ºå‰æ‰€æœªæœ‰çš„äº¤äº’æ‰©å±•èƒ½åŠ›ï¼Œæ”¯æŒå¤šè¾¾ 2048 æ¬¡äº¤äº’ä¸”æ€§èƒ½å¤§å¹…æå‡ï¼ˆä» 3.5% å¢è‡³ 42.5%ï¼‰ï¼ŒåŒæ—¶ä½œä¸ºæœ‰æ•ˆçš„æç¤ºç­–ç•¥ï¼Œåœ¨é•¿è§†é‡ä»»åŠ¡ä¸­è¾ƒ ReAct å°†å°–ç«¯æ¨¡å‹æ€§èƒ½æå‡æœ€é«˜è¾¾ 19.2 ä¸ªç™¾åˆ†ç‚¹ã€‚è¿™äº›æˆæœç¡®ç«‹äº† IterResearch ä½œä¸ºé•¿è§†é‡æ¨ç†çš„å¤šåŠŸèƒ½è§£å†³æ–¹æ¡ˆï¼Œæ—¢å¯ä½œä¸ºè®­ç»ƒå®Œå¤‡çš„æ™ºèƒ½ä½“ç‹¬ç«‹è¿è¡Œï¼Œä¹Ÿå¯ä½œä¸ºå°–ç«¯æ¨¡å‹çš„æç¤ºèŒƒå¼ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-7">PAN: A World Model for General, Interactable, and Long-Horizon World Simulation</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.09057" target="_blank" title="https://arxiv.org/abs/2511.09057" ref="nofollow noopener noreferrer">PANï¼šé€šç”¨ã€å¯äº¤äº’ä¸é•¿è§†é‡çš„ä¸–ç•Œæ¨¡æ‹Ÿæ¨¡å‹</a></p>
<p>ä¸–ç•Œæ¨¡å‹ä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿæƒ³è±¡ã€é¢„æµ‹å¹¶æ¨ç†ä¸–ç•Œå¦‚ä½•éšå…¶åŠ¨ä½œæ¼”å˜ï¼Œä»è€Œè¿›è¡Œè§„åˆ’ä¸å†³ç­–ã€‚å°½ç®¡å½“å‰è§†é¢‘ç”Ÿæˆæ¨¡å‹å¯ç”Ÿæˆé€¼çœŸè§†è§‰åºåˆ—ï¼Œä½†å®ƒä»¬å¤šé‡‡ç”¨ä»æç¤ºåˆ°å®Œæ•´è§†é¢‘çš„ç”Ÿæˆæ¨¡å¼ï¼Œç¼ºä¹å› æœæ§åˆ¶ã€äº¤äº’èƒ½åŠ›ä»¥åŠç›®æ ‡å¯¼å‘æ¨ç†æ‰€éœ€çš„é•¿æœŸä¸€è‡´æ€§ã€‚è€Œç°æœ‰ä¸–ç•Œå»ºæ¨¡æ–¹æ³•å¸¸å±€é™äºç‰¹å®šé¢†åŸŸï¼ˆå¦‚ç‰©ç†ã€æ¸¸æˆæˆ–ä¸‰ç»´åœºæ™¯åŠ¨æ€ï¼‰ï¼Œæ·±åº¦ä¸è¶³ä¸”å¯æ§æ€§æœ‰é™ï¼Œéš¾ä»¥æ³›åŒ–è‡³å¤šæ ·åŒ–ç¯å¢ƒä¸äº¤äº’å½¢å¼ã€‚æœ¬æ–‡æå‡ºPANï¼Œä¸€ç§é€šç”¨ã€å¯äº¤äº’ä¸”æ”¯æŒé•¿è§†é‡çš„ä¸–ç•Œæ¨¡å‹ï¼Œå®ƒåŸºäºå†å²çŠ¶æ€ä¸è‡ªç„¶è¯­è¨€åŠ¨ä½œï¼Œé€šè¿‡é«˜è´¨é‡è§†é¢‘æ¨¡æ‹Ÿé¢„æµ‹æœªæ¥ä¸–ç•ŒçŠ¶æ€ã€‚PANé‡‡ç”¨ç”Ÿæˆå¼æ½œåœ¨é¢„æµ‹ï¼ˆGLPï¼‰æ¶æ„ï¼šå…¶è‡ªå›å½’æ½œåœ¨åŠ¨æ€ä¸»å¹²åŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ï¼Œå°†æ¨¡æ‹Ÿé”šå®šäºå¹¿æ³›æ–‡æœ¬çŸ¥è¯†ï¼Œå¹¶æ”¯æŒè¯­è¨€æŒ‡å®šåŠ¨ä½œçš„æ¡ä»¶æ§åˆ¶ï¼›è§†é¢‘æ‰©æ•£è§£ç å™¨åˆ™é‡å»ºæ„ŸçŸ¥ç»†èŠ‚ä¸°å¯Œä¸”æ—¶åºä¸€è‡´çš„è§†è§‰è§‚æµ‹ã€‚è¯¥æ¶æ„å®ç°äº†æ½œåœ¨ç©ºé—´æ¨ç†ï¼ˆæƒ³è±¡ï¼‰ä¸å¯å®ç°ä¸–ç•ŒåŠ¨æ€ï¼ˆç°å®ï¼‰çš„ç»Ÿä¸€ã€‚é€šè¿‡åœ¨å¤§è§„æ¨¡è·¨é¢†åŸŸè§†é¢‘-åŠ¨ä½œå¯¹ä¸Šè¿›è¡Œè®­ç»ƒï¼ŒPANæ”¯æŒå¼€æ”¾åŸŸçš„åŠ¨ä½œæ¡ä»¶æ¨¡æ‹Ÿï¼Œå¹¶ä¿æŒè¿è´¯çš„é•¿æœŸåŠ¨æ€ã€‚å¤§é‡å®éªŒè¡¨æ˜ï¼Œç›¸è¾ƒäºå…¶ä»–è§†é¢‘ç”Ÿæˆå™¨ä¸ä¸–ç•Œæ¨¡å‹ï¼ŒPANåœ¨åŠ¨ä½œæ¡ä»¶ä¸–ç•Œæ¨¡æ‹Ÿã€é•¿è§†é‡é¢„æµ‹åŠæ¨¡æ‹Ÿæ¨ç†ä»»åŠ¡ä¸­å‡è¡¨ç°ä¼˜å¼‚ï¼Œä¸ºæ„å»ºé€šç”¨ä¸–ç•Œæ¨¡å‹è¿ˆå‡ºå…³é”®ä¸€æ­¥â€”â€”è¿™ç±»æ¨¡å‹èƒ½é€šè¿‡å¯¹æœªæ¥çŠ¶æ€çš„é¢„æµ‹æ¨¡æ‹Ÿæ”¯æŒæ¨ç†ä¸è¡ŒåŠ¨å†³ç­–ã€‚</p>
<h2 data-id="heading-8">MADD: Multi-Agent Drug Discovery Orchestra</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.08217" target="_blank" title="https://arxiv.org/abs/2511.08217" ref="nofollow noopener noreferrer">MADDï¼šå¤šæ™ºèƒ½ä½“è¯ç‰©å‘ç°åå¥æ›²</a></p>
<p>è‹—å¤´åŒ–åˆç‰©è¯†åˆ«æ˜¯æ—©æœŸè¯ç‰©å‘ç°çš„æ ¸å¿ƒæŒ‘æˆ˜ï¼Œä¼ ç»Ÿæ–¹æ³•éœ€è€—è´¹å¤§é‡å®éªŒèµ„æºã€‚äººå·¥æ™ºèƒ½çš„æœ€æ–°è¿›å±•ï¼Œç‰¹åˆ«æ˜¯å¤§è¯­è¨€æ¨¡å‹ (LLMs)ï¼Œå‚¬ç”Ÿäº†å¯é™ä½æˆæœ¬å’Œæå‡æ•ˆç‡çš„è™šæ‹Ÿç­›é€‰æ–¹æ³•ã€‚ç„¶è€Œï¼Œè¿™äº›å·¥å…·æ—¥ç›Šå¤æ‚ï¼Œé™åˆ¶äº†æ¹¿å®éªŒç ”ç©¶äººå‘˜çš„å®é™…ä½¿ç”¨ã€‚å¤šæ™ºèƒ½ä½“ç³»ç»Ÿé€šè¿‡èåˆ LLMs çš„å¯è§£é‡Šæ€§ä¸ä¸“ä¸šæ¨¡å‹åŠå·¥å…·çš„ç²¾ç¡®æ€§ï¼Œæä¾›äº†é¢‡å…·å‰æ™¯çš„è§£å†³æ–¹æ¡ˆã€‚æœ¬ç ”ç©¶æå‡º MADDâ€”â€”ä¸€ä¸ªèƒ½å¤Ÿæ ¹æ®è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ„å»ºå¹¶æ‰§è¡Œå®šåˆ¶åŒ–è‹—å¤´åŒ–åˆç‰©è¯†åˆ«æµç¨‹çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚MADD éƒ¨ç½²å››ä¸ªååŒå·¥ä½œçš„æ™ºèƒ½ä½“ï¼Œåˆ†åˆ«å¤„ç†ä»å¤´åŒ–åˆç‰©ç”Ÿæˆä¸ç­›é€‰ä¸­çš„å…³é”®å­ä»»åŠ¡ã€‚æˆ‘ä»¬åœ¨ä¸ƒä¸ªè¯ç‰©å‘ç°æ¡ˆä¾‹ä¸­è¯„ä¼° MADDï¼Œè¯æ˜å…¶æ€§èƒ½ä¼˜äºç°æœ‰åŸºäº LLM çš„è§£å†³æ–¹æ¡ˆã€‚å€ŸåŠ© MADDï¼Œæˆ‘ä»¬ç‡å…ˆå°† AI é©±åŠ¨çš„è¯ç‰©è®¾è®¡åº”ç”¨äºäº”ä¸ªç”Ÿç‰©é¶æ ‡ï¼Œå¹¶å…¬å¼€äº†å·²è¯†åˆ«çš„è‹—å¤´åˆ†å­ã€‚æœ€åï¼Œæˆ‘ä»¬å»ºç«‹äº†åŒ…å«ä¸‰ç™¾ä½™ä¸‡ç§åŒ–åˆç‰©çš„æŸ¥è¯¢-åˆ†å­å¯¹ä¸å¯¹æ¥è¯„åˆ†æ–°åŸºå‡†ï¼Œä»¥æ¨åŠ¨è¯ç‰©è®¾è®¡è¿ˆå‘æ™ºèƒ½ä½“ä¸»å¯¼çš„æœªæ¥ã€‚</p>
<h2 data-id="heading-9">Too Good to be Bad: On the Failure of LLMs to Role-Play Villains</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.04962" target="_blank" title="https://arxiv.org/abs/2511.04962" ref="nofollow noopener noreferrer">è¿‡äºè‰¯å–„éš¾æˆæ¶ï¼šå¤§è¯­è¨€æ¨¡å‹åœ¨åæ´¾è§’è‰²æ‰®æ¼”ä¸­çš„å¤±è´¥</a></p>
<p>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰æ­£æ—¥ç›Šæ‰¿æ‹…åˆ›é€ æ€§ç”Ÿæˆä»»åŠ¡ï¼ŒåŒ…æ‹¬æ¨¡æ‹Ÿè™šæ„è§’è‰²ã€‚ç„¶è€Œï¼Œæ¨¡å‹åœ¨åˆ»ç”»éäº²ç¤¾ä¼šæˆ–æ•Œå¯¹å‹è§’è‰²æ–¹é¢çš„èƒ½åŠ›ä»é²œæœ‰ç ”ç©¶ã€‚æˆ‘ä»¬å‡è®¾ï¼Œç°ä»£å¤§è¯­è¨€æ¨¡å‹çš„å®‰å…¨å¯¹é½æœºåˆ¶ä¸é€¼çœŸæ‰®æ¼”é“å¾·æ¨¡ç³Šæˆ–åæ´¾è§’è‰²çš„ä»»åŠ¡ä¹‹é—´å­˜åœ¨æ ¹æœ¬æ€§å†²çªã€‚ä¸ºæ¢ç©¶æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†é“å¾·è§’è‰²æ‰®æ¼”åŸºå‡†ï¼ˆMoral RolePlay benchmarkï¼‰ï¼Œè¯¥æ–°æ•°æ®é›†åŒ…å«å››çº§é“å¾·å€¾å‘é‡è¡¨å’Œä¸€ä¸ªå¹³è¡¡æµ‹è¯•é›†ï¼Œç”¨äºä¸¥æ ¼è¯„ä¼°ã€‚æˆ‘ä»¬è¦æ±‚å‰æ²¿å¤§è¯­è¨€æ¨¡å‹æ‰®æ¼”ä»é“å¾·æ¥·æ¨¡åˆ°çº¯ç²¹æ¶æ£çš„å„ç±»è§’è‰²ã€‚å¤§è§„æ¨¡è¯„ä¼°ç»“æœè¡¨æ˜ï¼Œéšç€è§’è‰²é“å¾·æ°´å¹³çš„é™ä½ï¼Œè§’è‰²æ‰®æ¼”çš„é€¼çœŸåº¦å‘ˆç°ç¨³å®šä¸”å•è°ƒçš„ä¸‹é™è¶‹åŠ¿ã€‚æ¨¡å‹åœ¨ä¸å®‰å…¨åŸåˆ™ç›´æ¥å†²çªçš„ç‰¹è´¨ä¸Šè¡¨ç°æœ€å·®ï¼Œå¦‚â€œæ¬ºè¯ˆæ€§â€å’Œâ€œæ“çºµæ€§â€ï¼Œå¾€å¾€ä»¥æµ…å±‚çš„æ”»å‡»æ€§æ›¿ä»£å¤æ‚çš„æ¶æ„åˆ»ç”»ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å‘ç°é€šç”¨èŠå¤©æœºå™¨äººèƒ½åŠ›æ— æ³•æœ‰æ•ˆé¢„æµ‹åæ´¾æ‰®æ¼”æ°´å¹³ï¼Œé«˜åº¦ä¼˜åŒ–å®‰å…¨çš„æ¨¡å‹è¡¨ç°å°¤ä¸ºé€Šè‰²ã€‚æœ¬ç ”ç©¶é¦–æ¬¡ç³»ç»Ÿæ€§åœ°æ­ç¤ºäº†è¿™ä¸€å…³é”®å±€é™ï¼Œçªæ˜¾äº†æ¨¡å‹å®‰å…¨æ€§ä¸åˆ›é€ æ€§çœŸå®åº¦ä¹‹é—´çš„æ ¸å¿ƒçŸ›ç›¾ã€‚æ‰€æå‡ºçš„åŸºå‡†å’Œç»“è®ºä¸ºå¼€å‘æ›´ç²¾ç»†ã€æƒ…å¢ƒæ„ŸçŸ¥çš„å¯¹é½æ–¹æ³•å¥ å®šäº†åŸºç¡€ã€‚</p>
<h2 data-id="heading-10">Time-to-Move: Training-Free Motion Controlled Video Generation via Dual-Clock Denoising</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.08633" target="_blank" title="https://arxiv.org/abs/2511.08633" ref="nofollow noopener noreferrer">Time-to-Moveï¼šé€šè¿‡åŒæ—¶é’Ÿå»å™ªå®ç°å…è®­ç»ƒçš„è¿åŠ¨æ§åˆ¶è§†é¢‘ç”Ÿæˆ</a></p>
<p>åŸºäºæ‰©æ•£æ¨¡å‹çš„è§†é¢‘ç”ŸæˆæŠ€æœ¯èƒ½å¤Ÿåˆæˆé€¼çœŸè§†é¢‘ï¼Œä½†ç°æœ‰åŸºäºå›¾åƒå’Œæ–‡æœ¬çš„æ¡ä»¶æ§åˆ¶æ–¹æ³•æ— æ³•å®ç°ç²¾ç¡®çš„è¿åŠ¨æ§åˆ¶ã€‚ä»¥å¾€çš„è¿åŠ¨æ¡ä»¶åˆæˆæ–¹æ³•é€šå¸¸éœ€è¦å¯¹ç‰¹å®šæ¨¡å‹è¿›è¡Œå¾®è°ƒï¼Œè®¡ç®—æˆæœ¬é«˜æ˜‚ä¸”é€‚ç”¨æ€§å—é™ã€‚æœ¬æ–‡æå‡º Time-to-Move (TTM) ï¼Œä¸€ç§å…è®­ç»ƒã€å³æ’å³ç”¨ (plug-and-play) çš„æ¡†æ¶ï¼Œé€šè¿‡å›¾åƒåˆ°è§†é¢‘ (I2V) æ‰©æ•£æ¨¡å‹å®ç°è¿åŠ¨ä¸å¤–è§‚å¯æ§çš„è§†é¢‘ç”Ÿæˆã€‚æˆ‘ä»¬çš„æ ¸å¿ƒæ€è·¯æ˜¯åˆ©ç”¨é€šè¿‡ç”¨æˆ·å‹å¥½æ“ä½œï¼ˆå¦‚å‰ªåˆ‡-æ‹–æ‹½ (cut-and-drag) æˆ–åŸºäºæ·±åº¦çš„é‡æŠ•å½± (depth-based reprojection)ï¼‰è·å¾—çš„ç²—ç•¥å‚è€ƒåŠ¨ç”»ã€‚å— SDEdit åˆ©ç”¨ç²—ç•¥å¸ƒå±€çº¿ç´¢ (coarse layout cues) è¿›è¡Œå›¾åƒç¼–è¾‘çš„å¯å‘ï¼Œæˆ‘ä»¬å°†è¿™äº›ç²—ç•¥åŠ¨ç”»è§†ä¸ºè¿åŠ¨çº¿ç´¢ï¼Œå¹¶å°†è¯¥æœºåˆ¶æ‰©å±•è‡³è§†é¢‘é¢†åŸŸã€‚æˆ‘ä»¬é€šè¿‡å›¾åƒæ¡ä»¶ä¿æŒå¤–è§‚ä¸€è‡´æ€§ï¼Œå¹¶å¼•å…¥åŒæ—¶é’Ÿå»å™ª (dual-clock denoising) â€”â€” ä¸€ç§åŒºåŸŸä¾èµ–ç­–ç•¥ï¼Œåœ¨è¿åŠ¨æŒ‡å®šåŒºåŸŸå¼ºåˆ¶æ‰§è¡Œä¸¥æ ¼å¯¹é½ï¼ŒåŒæ—¶åœ¨å…¶ä½™åŒºåŸŸä¿æŒçµæ´»æ€§ï¼Œä»è€Œåœ¨ç”¨æˆ·æ„å›¾å¿ å®åº¦ä¸è‡ªç„¶è¿åŠ¨åŠ¨æ€ä¹‹é—´å–å¾—å¹³è¡¡ã€‚è¿™ç§å¯¹é‡‡æ ·è¿‡ç¨‹çš„è½»é‡çº§ä¿®æ”¹æ— éœ€é¢å¤–è®­ç»ƒæˆ–è¿è¡Œæ—¶å¼€é”€ï¼Œä¸”å…¼å®¹ä»»ä½•éª¨å¹²ç½‘ç»œã€‚åœ¨ç‰©ä½“è¿åŠ¨å’Œç›¸æœºè¿åŠ¨çš„åŸºå‡†æµ‹è¯•ä¸Šè¿›è¡Œçš„å¤§é‡å®éªŒè¡¨æ˜ï¼ŒTTM åœ¨çœŸå®æ„Ÿä¸è¿åŠ¨æ§åˆ¶ç²¾åº¦æ–¹é¢è¾¾åˆ°æˆ–è¶…è¶Šäº†ç°æœ‰åŸºäºè®­ç»ƒçš„åŸºçº¿æ–¹æ³•ã€‚æ­¤å¤–ï¼ŒTTM è¿˜å…·å¤‡ç‹¬ç‰¹ä¼˜åŠ¿ï¼šé€šè¿‡åƒç´ çº§æ¡ä»¶æ§åˆ¶å®ç°ç²¾ç¡®çš„å¤–è§‚è°ƒæ§ï¼Œçªç ´äº†çº¯æ–‡æœ¬æç¤ºçš„é™åˆ¶ã€‚æ¬¢è¿è®¿é—®æˆ‘ä»¬çš„é¡¹ç›®é¡µé¢æŸ¥çœ‹è§†é¢‘ç¤ºä¾‹å’Œä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftime-to-move.github.io%2F%25E3%2580%2582" target="_blank" title="https://time-to-move.github.io/%E3%80%82" ref="nofollow noopener noreferrer">time-to-move.github.io/ã€‚</a></p>
<h2 data-id="heading-11">DRIVE: Data Curation Best Practices for Reinforcement Learning with Verifiable Reward in Competitive Code Generation</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.06307" target="_blank" title="https://arxiv.org/abs/2511.06307" ref="nofollow noopener noreferrer">DRIVE: ç«äº‰æ€§ä»£ç ç”Ÿæˆä¸­å¸¦å¯éªŒè¯å¥–åŠ±çš„å¼ºåŒ–å­¦ä¹ æ•°æ®ç®¡ç†æœ€ä½³å®è·µ</a></p>
<p>è¿‘æœŸæ¨ç†ä¼˜å…ˆæ¨¡å‹ï¼ˆå¦‚ OpenAI o1ã€DeepSeek R1ï¼‰é‡æ–°æ¿€å‘äº†å¯¹ RLVR çš„å…´è¶£ã€‚ç„¶è€Œï¼Œç›¸å…³è¿›å±•ä¸»è¦é›†ä¸­åœ¨æ•°å­¦é¢†åŸŸï¼ˆå¦‚ AIMEï¼‰ï¼Œç«äº‰æ€§ç¼–ç¨‹ä»£ç ç”Ÿæˆæ–¹å‘æ¢ç´¢ä¸è¶³ï¼Œä¸”æ•°æ®ç®¡ç†å—åˆ°çš„å…³æ³¨è¿œå°‘äº RL ç®—æ³•è®¾è®¡ã€‚æœ¬ç ”ç©¶æ¢è®¨å¦‚ä½•æ„å»º RLVR æ•°æ®é›†ï¼ˆå³ RL æç¤ºï¼‰ï¼Œå¹¶æå‡ºåœ¨ç«äº‰æ€§ç¼–ç¨‹ä»£ç ç”Ÿæˆä¸­å®ç°å¼ºåŠ²æ€§èƒ½çš„å®ç”¨è®­ç»ƒæŠ€æœ¯ã€‚æˆ‘ä»¬çš„æµç¨‹å§‹äºä»å¼ºå¼€æºæ¨¡å‹è’¸é¦å¾—åˆ°çš„ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰ï¼Œå¹¶è¾…ä»¥é€šç”¨å‹ä¸æ¨ç†å¯†é›†å‹æ•°æ®è¿›è¡Œå¢å¼ºã€‚éšåï¼Œå¼ºåŒ–å­¦ä¹ é‡‡ç”¨åŒ…å«å¯æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹é©±åŠ¨å¥–åŠ±çš„ä¸¤é˜¶æ®µæµç¨‹ï¼šé¦–å…ˆï¼Œåœ¨å‡åŒ€åˆ†å¸ƒçš„å¤§è§„æ¨¡ç«äº‰æ€§ç¼–ç¨‹é—®é¢˜é›†ä¸Šï¼Œä½¿ç”¨ç»„ç›¸å¯¹ç­–ç•¥ä¼˜åŒ–ï¼ˆGRPOï¼‰è¿›è¡Œè®­ç»ƒï¼Œæ¯ä¸ªæç¤ºæ‰§è¡Œ 8 æ¬¡ rolloutï¼Œå¹¶è®¾ç½®è¾ƒçŸ­å“åº”ç”Ÿæˆçª—å£ï¼ˆå¦‚ SFT é˜¶æ®µ 32kï¼Œæœ¬é˜¶æ®µ 24kï¼‰ä»¥æ‰©å±•ç†µå¹¶å‡å°‘é‡å¤ä¸æˆªæ–­é—®é¢˜ï¼›å…¶æ¬¡ï¼Œæ‰§è¡Œ \textbf{Pre-GRPO} é˜¶æ®µï¼šåœ¨å°å‹é«˜è´¨é‡æŒ‘æˆ˜æ€§é—®é¢˜é›†ä¸Šï¼Œä»¥æ¯ä¸ªæç¤º 64 æ¬¡ rollout çš„å¤§é¢„ç®—è¿›è¡Œæ›´æ–°ï¼Œé‡‡ç”¨ç¡¬ç„¦ç‚¹è¯¾ç¨‹ç­–ç•¥æŒç»­ä¿ç•™è®­ç»ƒå…¨ç¨‹ä¸­æœ€å›°éš¾çš„å®ä¾‹ã€‚æˆ‘ä»¬åœ¨ Qwen2.5-32B ä¸Šå®ç°è¯¥æ–¹æ³•ï¼Œå¹¶åœ¨ LeetCode å’Œ Codeforces å‘¨èµ›ä¸­è¿›è¡Œè¯„ä¼°ä»¥é¿å…æ•°æ®æ³„éœ²ã€‚æœ€ç»ˆæ¨¡å‹åœ¨åŒç­‰è§„æ¨¡æ¨¡å‹ä¸­è¾¾åˆ°æœ€å…ˆè¿›æ€§èƒ½ï¼Œä¸ DeepSeek v3.1ã€Doubao-1.5-Thinking ç­‰é¢†å…ˆç³»ç»Ÿè¡¨ç°ç›¸å½“ã€‚æˆ‘ä»¬è¿˜åˆ†æäº†ç¼©æ”¾è¶‹åŠ¿ï¼Œåœ¨å†…éƒ¨å¤§è§„æ¨¡æ··åˆä¸“å®¶ï¼ˆMoEï¼‰æ¨¡å‹ä¸Šè§‚å¯Ÿåˆ°æ˜¾è‘—çš„ RL ç¼©æ”¾æ•ˆåº”ã€‚æœ¬ç ”ç©¶æç‚¼å‡ºç«äº‰æ€§ç¼–ç¨‹ä»£ç ç”Ÿæˆä¸­ RLVR æ•°æ®ç®¡ç†ã€ç†µæ‰©å±•ä¸è¯¾ç¨‹è®¾è®¡çš„ç®€æ´æœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-12">Visual Spatial Tuning</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.05491" target="_blank" title="https://arxiv.org/abs/2511.05491" ref="nofollow noopener noreferrer">è§†è§‰ç©ºé—´è°ƒä¼˜</a></p>
<p>ä»è§†è§‰è¾“å…¥ä¸­æ•è·ç©ºé—´å…³ç³»æ˜¯å®ç°äººç±»æ°´å¹³é€šç”¨æ™ºèƒ½çš„å…³é”®åŸºç¡€ã€‚å…ˆå‰ç ”ç©¶å¤šé€šè¿‡å¼•å…¥é¢å¤–ä¸“å®¶ç¼–ç å™¨æ¥å¢å¼ºè§†è§‰è¯­è¨€æ¨¡å‹ (VLMs) çš„ç©ºé—´æ„ŸçŸ¥èƒ½åŠ›ï¼Œä½†è¿™ä¸ä»…å¢åŠ äº†è®¡ç®—å¼€é”€ï¼Œè¿˜å¾€å¾€æŸå®³æ¨¡å‹çš„é€šç”¨æ€§èƒ½ã€‚ä¸ºåœ¨é€šç”¨æ¶æ„ä¸­æœ‰æ•ˆæå‡ç©ºé—´èƒ½åŠ›ï¼Œæˆ‘ä»¬æå‡ºè§†è§‰ç©ºé—´è°ƒä¼˜ (VST) è¿™ä¸€ç»¼åˆæ¡†æ¶ï¼Œæ—¨åœ¨ç³»ç»ŸåŸ¹å…» VLMs ä»ç©ºé—´æ„ŸçŸ¥åˆ°æ¨ç†çš„ç±»äººè§†è§‰ç©ºé—´èƒ½åŠ›ã€‚æˆ‘ä»¬é¦–å…ˆé€šè¿‡æ„å»ºå¤§è§„æ¨¡æ•°æ®é›† VST-P æ¥å¼ºåŒ–ç©ºé—´æ„ŸçŸ¥ï¼Œè¯¥æ•°æ®é›†åŒ…å« 410 ä¸‡æ ·æœ¬ï¼Œè¦†ç›–å•è§†å›¾ã€å¤šå›¾åƒå’Œè§†é¢‘ä¸‰å¤§åœºæ™¯ä¸‹çš„ 19 ç±»ç©ºé—´ä»»åŠ¡ã€‚ç»§è€Œæ¨å‡º VST-R ç²¾é€‰æ•°æ®é›†ï¼ˆå« 13.5 ä¸‡æ ·æœ¬ï¼‰ï¼Œä¸“é—¨è®­ç»ƒæ¨¡å‹è¿›è¡Œç©ºé—´æ¨ç†ã€‚æˆ‘ä»¬é‡‡ç”¨æ¸è¿›å¼è®­ç»ƒç­–ç•¥ï¼šå…ˆé€šè¿‡ç›‘ç£å¾®è°ƒå»ºç«‹ç©ºé—´çŸ¥è¯†åŸºç¡€ï¼Œå†é€šè¿‡å¼ºåŒ–å­¦ä¹ è¿›é˜¶ä¼˜åŒ–ç©ºé—´æ¨ç†èƒ½åŠ›ã€‚åœ¨ä¿æŒé€šç”¨èƒ½åŠ›ä¸å—å½±å“çš„å‰æä¸‹ï¼ŒVST åœ¨å¤šä¸ªç©ºé—´åŸºå‡†æµ‹è¯•ä¸­å‡è¾¾åˆ°æœ€å…ˆè¿›æ°´å¹³ï¼Œå¦‚åœ¨ MMSI-Bench ä¸Šè·å¾— 34.8% çš„å‡†ç¡®ç‡ï¼Œåœ¨ VSIBench ä¸Šè¾¾åˆ° 61.2%ã€‚å®éªŒè¡¨æ˜ï¼Œæ‰€æå‡ºçš„ç©ºé—´è°ƒä¼˜èŒƒå¼èƒ½æ˜¾è‘—å¢å¼ºè§†è§‰-è¯­è¨€-è¡ŒåŠ¨æ¨¡å‹ï¼Œä¸ºæ¨åŠ¨å…·èº«æ™ºèƒ½å‘å±•å¥ å®šåŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Unibestï¼šæ–°ä¸€ä»£uni-appå·¥ç¨‹åŒ–æœ€ä½³å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7572480736361889798</link>    <guid>https://juejin.cn/post/7572480736361889798</guid>    <pubDate>2025-11-16T06:22:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572480736361889798" data-draft-id="7572539461478170667" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Unibestï¼šæ–°ä¸€ä»£uni-appå·¥ç¨‹åŒ–æœ€ä½³å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-16T06:22:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®‡ä½™"/> <meta itemprop="url" content="https://juejin.cn/user/2999123453424542"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Unibestï¼šæ–°ä¸€ä»£uni-appå·¥ç¨‹åŒ–æœ€ä½³å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2999123453424542/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®‡ä½™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T06:22:45.000Z" title="Sun Nov 16 2025 06:22:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨uni-appç”Ÿæ€æ—¥ç›Šæˆç†Ÿçš„ä»Šå¤©ï¼Œå¼€å‘è€…å¯¹å·¥ç¨‹åŒ–ã€æ€§èƒ½ä¼˜åŒ–å’Œè·¨ç«¯ä¸€è‡´æ€§çš„éœ€æ±‚æ„ˆå‘è¿«åˆ‡ã€‚Unibestä½œä¸ºä¸€å¥—åŸºäºuni-appçš„ä¼ä¸šçº§å·¥ç¨‹åŒ–æ–¹æ¡ˆï¼Œæ•´åˆäº†è·¯ç”±å°è£…ã€çŠ¶æ€ç®¡ç†ã€è¯·æ±‚æ‹¦æˆªã€ç»„ä»¶è§„èŒƒç­‰æ ¸å¿ƒèƒ½åŠ›ï¼Œæ—¨åœ¨é™ä½å¤§å‹é¡¹ç›®å¼€å‘æˆæœ¬ï¼Œæå‡å›¢é˜Ÿåä½œæ•ˆç‡ã€‚æœ¬æ–‡å°†ä»æ ¸å¿ƒç‰¹æ€§ã€å¿«é€Ÿä¸Šæ‰‹ã€å®æˆ˜æŠ€å·§ä¸‰ä¸ªç»´åº¦ï¼Œå¸¦ä½ å…¨é¢æŒæ¡Unibestçš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Unibestæ ¸å¿ƒç‰¹æ€§è§£æ</h2>
<p>Unibestå¹¶éç®€å•çš„æ¨¡æ¿é›†åˆï¼Œè€Œæ˜¯ç»è¿‡å¤šä¸ªç”Ÿäº§é¡¹ç›®éªŒè¯çš„å·¥ç¨‹åŒ–ä½“ç³»ï¼Œå…¶æ ¸å¿ƒç‰¹æ€§å¯æ¦‚æ‹¬ä¸ºä»¥ä¸‹å››ç‚¹ï¼š</p>
<h3 data-id="heading-1">1.1 å¼€ç®±å³ç”¨çš„å·¥ç¨‹åŒ–æ–¹æ¡ˆ</h3>
<p>Unibestå†…ç½®äº†å®Œæ•´çš„å·¥ç¨‹åŒ–é…ç½®ï¼Œæ— éœ€å¼€å‘è€…æ‰‹åŠ¨æ­å»ºï¼š</p>
<ul>
<li>
<p><strong>è·¯ç”±ç®¡ç†</strong>ï¼šåŸºäºuni-simple-routerå°è£…ï¼Œæ”¯æŒè·¯ç”±å®ˆå«ã€åŠ¨æ€è·¯ç”±å’Œè·¯ç”±åˆ«åï¼Œè§£å†³åŸç”Ÿuni-appè·¯ç”±è·³è½¬ç¹ççš„é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>è¯·æ±‚å±‚å°è£…</strong>ï¼šç»Ÿä¸€çš„requestæ‹¦æˆªå™¨ï¼Œæ”¯æŒè¯·æ±‚å¤´æ·»åŠ ã€é”™è¯¯ç»Ÿä¸€å¤„ç†ã€loadingè‡ªåŠ¨æ§åˆ¶ï¼ŒåŒæ—¶å…¼å®¹mockæ•°æ®å’Œç”Ÿäº§ç¯å¢ƒåˆ‡æ¢ã€‚</p>
</li>
<li>
<p><strong>ä»£ç è§„èŒƒ</strong>ï¼šé›†æˆESLint + Prettier + Huskyï¼Œå¼ºåˆ¶ä»£ç é£æ ¼ç»Ÿä¸€ï¼Œå‡å°‘å›¢é˜Ÿåä½œå†²çªã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">1.2 è·¨ç«¯ä¸€è‡´æ€§ä¿éšœ</h3>
<p>é’ˆå¯¹uni-appè·¨ç«¯å¼€å‘ä¸­å¸¸è§çš„æ ·å¼å·®å¼‚ã€APIå…¼å®¹æ€§é—®é¢˜ï¼ŒUnibestæä¾›äº†é’ˆå¯¹æ€§è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>
<p><strong>æ ·å¼è§£å†³æ–¹æ¡ˆ</strong>ï¼šå†…ç½®px2rpxè‡ªåŠ¨è½¬æ¢ï¼Œé…åˆscsså˜é‡å’Œmixinï¼Œç¡®ä¿å¤šç«¯æ ·å¼ä¸€è‡´æ€§ï¼›æä¾›é€‚é…H5ã€å°ç¨‹åºã€Appçš„æ ·å¼éš”ç¦»æ–¹æ¡ˆã€‚</p>
</li>
<li>
<p><strong>APIé€‚é…å±‚</strong>ï¼šå¯¹uni-appåŸç”ŸAPIè¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œå¤„ç†ä¸åŒå¹³å°çš„å·®å¼‚é€»è¾‘ï¼Œå¦‚æ”¯ä»˜ã€åˆ†äº«ç­‰åŠŸèƒ½çš„è·¨ç«¯å…¼å®¹ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">1.3 æ€§èƒ½ä¼˜åŒ–å†…ç½®</h3>
<p>Unibestä»åˆå§‹åŒ–é˜¶æ®µå°±èå…¥äº†æ€§èƒ½ä¼˜åŒ–ç†å¿µï¼š</p>
<p>æ ¸å¿ƒä¼˜åŒ–ç‚¹ï¼šé¡µé¢æ‡’åŠ è½½ã€å›¾ç‰‡æ‡’åŠ è½½ã€åˆ†åŒ…åŠ è½½é…ç½®ã€å¤§å‹ç»„ä»¶å¼‚æ­¥å¼•å…¥ï¼Œå¯åŠ¨é€Ÿåº¦è¾ƒåŸç”Ÿuni-appæå‡30%+ï¼ˆåŸºäºå®˜æ–¹æµ‹è¯•æ•°æ®ï¼‰ã€‚</p>
<h3 data-id="heading-4">1.4 ä¸°å¯Œçš„ç”Ÿæ€é›†æˆ</h3>
<p>æ— ç¼å¯¹æ¥uni-appç”Ÿæ€çš„åŒæ—¶ï¼Œæ‰©å±•äº†å¸¸ç”¨å·¥å…·åº“ï¼š</p>
<ul>
<li>
<p>çŠ¶æ€ç®¡ç†ï¼šæ”¯æŒPinia/Vuexï¼Œæä¾›æ¨¡å—åŒ–çŠ¶æ€ç®¡ç†æ¨¡æ¿ï¼›</p>
</li>
<li>
<p>UIç»„ä»¶ï¼šå…¼å®¹uViewã€ColorUIç­‰ä¸»æµUIåº“ï¼ŒåŒæ—¶æä¾›è‡ªå®šä¹‰ä¸šåŠ¡ç»„ä»¶æ¨¡æ¿ï¼›</p>
</li>
<li>
<p>å·¥å…·å‡½æ•°ï¼šé›†æˆæ—¥æœŸå¤„ç†ã€åŠ å¯†è§£å¯†ã€æ•°æ®æ ¼å¼åŒ–ç­‰å¸¸ç”¨å·¥å…·ã€‚</p>
</li>
</ul>
<h2 data-id="heading-5">äºŒã€Unibestå¿«é€Ÿä¸Šæ‰‹æ•™ç¨‹</h2>
<p>åªéœ€ä¸‰æ­¥ï¼Œå³å¯æ­å»ºåŸºäºUnibestçš„é¡¹ç›®ï¼š</p>
<h3 data-id="heading-6">2.1 ç¯å¢ƒå‡†å¤‡</h3>
<p>ç¡®ä¿å·²å®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">

<span class="hljs-comment"># å®‰è£…Node.jsï¼ˆv14+ï¼‰</span>
<span class="hljs-comment"># å®‰è£…uni-app CLI</span>
npm install -g @dcloudio/cli
<span class="hljs-comment"># å®‰è£…pnpmï¼ˆæ¨èï¼‰</span>
npm install -g pnpm
    
</code></pre>
<h3 data-id="heading-7">2.2 åˆ›å»ºé¡¹ç›®</h3>
<p>ä½¿ç”¨Unibestæ¨¡æ¿åˆ›å»ºæ–°é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">

<span class="hljs-comment"># å…‹éš†Unibestæ¨¡æ¿</span>
git <span class="hljs-built_in">clone</span> https://github.com/unibest-team/unibest.git my-unibest-project
<span class="hljs-comment"># è¿›å…¥é¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">cd</span> my-unibest-project
<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
pnpm install
    
</code></pre>
<h3 data-id="heading-8">2.3 è¿è¡Œé¡¹ç›®</h3>
<p>æ”¯æŒå¤šç«¯è¿è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">

<span class="hljs-comment"># è¿è¡Œåˆ°å¾®ä¿¡å°ç¨‹åº</span>
pnpm dev:mp-weixin
<span class="hljs-comment"># è¿è¡Œåˆ°H5</span>
pnpm dev:h5
<span class="hljs-comment"># è¿è¡Œåˆ°Appï¼ˆéœ€é…åˆHBuilderXï¼‰</span>
pnpm dev:app-plus
    
</code></pre>
<h3 data-id="heading-9">2.4 ç›®å½•ç»“æ„è§£æ</h3>
<p>Unibesté‡‡ç”¨çº¦å®šå¼ç›®å½•ç»“æ„ï¼Œæ ¸å¿ƒç›®å½•è¯´æ˜ï¼š</p>





























<table><thead><tr><th>ç›®å½•</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td>/src/api</td><td>æ¥å£è¯·æ±‚å°è£…</td></tr><tr><td>/src/router</td><td>è·¯ç”±é…ç½®å’Œå®ˆå«</td></tr><tr><td>/src/store</td><td>Pinia/VuexçŠ¶æ€ç®¡ç†</td></tr><tr><td>/src/components</td><td>å…¬å…±ç»„ä»¶å’Œä¸šåŠ¡ç»„ä»¶</td></tr><tr><td>/src/utils</td><td>å·¥å…·å‡½æ•°é›†åˆ</td></tr></tbody></table>
<h2 data-id="heading-10">ä¸‰ã€Unibestå®æˆ˜æŠ€å·§</h2>
<h3 data-id="heading-11">3.1 å¤šç¯å¢ƒé…ç½®</h3>
<p>åœ¨<code>/src/env</code>ç›®å½•ä¸‹é…ç½®ä¸åŒç¯å¢ƒçš„æ¥å£åœ°å€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">

<span class="hljs-comment">// .env.development</span>
<span class="hljs-variable constant_">VITE_BASE_URL</span> = <span class="hljs-string">'https://dev-api.unibest.com'</span>

<span class="hljs-comment">// .env.production</span>
<span class="hljs-variable constant_">VITE_BASE_URL</span> = <span class="hljs-string">'https://api.unibest.com'</span>
    
</code></pre>
<p>é€šè¿‡å‘½ä»¤è‡ªåŠ¨åˆ‡æ¢ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">

<span class="hljs-comment"># å¼€å‘ç¯å¢ƒ</span>
pnpm dev:mp-weixin --mode development
<span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒ</span>
pnpm build:mp-weixin --mode production
    
</code></pre>
<h3 data-id="heading-12">3.2 ç»„ä»¶å°è£…æœ€ä½³å®è·µ</h3>
<p>ä»¥è‡ªå®šä¹‰æŒ‰é’®ç»„ä»¶ä¸ºä¾‹ï¼ŒUnibestæ¨èçš„å°è£…æ–¹å¼ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">

&lt;template&gt;
  &lt;button 
    class="u-btn" 
    :class="{ 'u-btn--primary': type === 'primary' }"
    @click="handleClick"
  &gt;
    &lt;slot&gt;&lt;/slot&gt;
  &lt;/button&gt;
&lt;/template&gt;

&lt;script setup&gt;
const props = defineProps({
  type: {
    type: String,
    default: 'default'
  }
})

const emit = defineEmits(['click'])

const handleClick = (e) =&gt; {
  emit('click', e)
}
&lt;/script&gt;

&lt;style scoped lang="scss"&gt;
.u-btn {
  padding: 12rpx 24rpx;
  border-radius: 8rpx;
  &amp;--primary {
    background: #007aff;
    color: #fff;
  }
}
&lt;/style&gt;
    
</code></pre>
<h3 data-id="heading-13">3.3 è·¯ç”±å®ˆå«åº”ç”¨</h3>
<p>åœ¨<code>/src/router/guard.js</code>ä¸­é…ç½®å…¨å±€è·¯ç”±å®ˆå«ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">

<span class="hljs-comment">// ç™»å½•æ‹¦æˆª</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> token = uni.<span class="hljs-title function_">getStorageSync</span>(<span class="hljs-string">'token'</span>)
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span> &amp;&amp; !token) {
    <span class="hljs-title function_">next</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/pages/login/login'</span> })
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">next</span>()
  }
})
    
</code></pre>
<h2 data-id="heading-14">å››ã€æ€»ç»“ä¸å±•æœ›</h2>
<p>Unibesté€šè¿‡æ ‡å‡†åŒ–çš„å·¥ç¨‹åŒ–æ–¹æ¡ˆï¼Œè§£å†³äº†uni-appå¼€å‘ä¸­çš„ç—›ç‚¹é—®é¢˜ï¼Œå°¤å…¶é€‚åˆä¸­å¤§å‹å›¢é˜Ÿå’Œå¤æ‚é¡¹ç›®ã€‚ç›®å‰Unibestå·²æ”¯æŒVue3+Viteæ¶æ„ï¼Œåç»­å°†æŒç»­ä¼˜åŒ–è·¨ç«¯æ€§èƒ½ã€æ‰©å±•ç”Ÿæ€é›†æˆï¼ˆå¦‚å¾®å‰ç«¯æ–¹æ¡ˆï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è™šæ‹Ÿåˆ—è¡¨(Virtual List)ç»„ä»¶å®ç°ä¸ä¼˜åŒ–é“è‡‚çŒ¿ç‰ˆï¼ˆç®€æ˜“ç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7572481101710868534</link>    <guid>https://juejin.cn/post/7572481101710868534</guid>    <pubDate>2025-11-16T06:47:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572481101710868534" data-draft-id="7572002432451100681" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è™šæ‹Ÿåˆ—è¡¨(Virtual List)ç»„ä»¶å®ç°ä¸ä¼˜åŒ–é“è‡‚çŒ¿ç‰ˆï¼ˆç®€æ˜“ç‰ˆï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-16T06:47:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¥¿è¥¿è¥¿è¥¿èƒ¡èåœé¸¡"/> <meta itemprop="url" content="https://juejin.cn/user/2918532014943187"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è™šæ‹Ÿåˆ—è¡¨(Virtual List)ç»„ä»¶å®ç°ä¸ä¼˜åŒ–é“è‡‚çŒ¿ç‰ˆï¼ˆç®€æ˜“ç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2918532014943187/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¥¿è¥¿è¥¿è¥¿èƒ¡èåœé¸¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T06:47:30.000Z" title="Sun Nov 16 2025 06:47:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¼•å…¥ï¼šæœ¬æ–‡ä½¿ç”¨vue3+ts+tailwindcsså®ç°</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦â€œè™šæ‹Ÿåˆ—è¡¨â€ï¼Ÿ</h2>
<p>å½“æˆ‘ä»¬åœ¨é¡µé¢ä¸­æ¸²æŸ“ä¸€ä¸ª<strong>å¾ˆé•¿çš„åˆ—è¡¨</strong>æ—¶ï¼ˆæ¯”å¦‚ä¸Šä¸‡æ¡æ•°æ®ï¼‰ï¼Œæ™®é€šçš„<code>v-for</code>ä¼šä¸€æ¬¡æ€§åˆ›å»ºä¸Šä¸‡ä¸ªDOMèŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;li v-for="item in 10000"&gt;{{ item }}&lt;/li&gt;
</code></pre>
<p>è¿™ä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>é¡µé¢åŠ è½½æ…¢ï¼›</li>
<li>å†…å­˜å ç”¨å¤§ï¼›</li>
<li>æ»šåŠ¨å¡é¡¿ã€‚</li>
</ul>
<p>äºæ˜¯å°±æœ‰äº†æ€§èƒ½ç¥å™¨â€”â€”<strong>è™šæ‹Ÿåˆ—è¡¨ (Virtual List)</strong> ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒæ€æƒ³</h2>
<p>è™šæ‹Ÿåˆ—è¡¨çš„æ ¸å¿ƒå®ç°æ€è·¯å…¶å®å¾ˆç®€å•ï¼š</p>
<blockquote>
<p>å›ºå®šå¤–å±‚ç›’å­çš„é«˜ï¼Œé€šè¿‡è®¡ç®—åªæ¸²æŸ“å‡ºå¯è§åŒºåŸŸçš„æ•°æ®ï¼Œå…¶ä½™ä¸å¯è§å…ƒç´ ç”¨ä¸€ä¸ªå ä½å…ƒç´ æ’‘å‡ºæ»šåŠ¨æ¡ã€‚</p>
</blockquote>
<h4 data-id="heading-2">å¯è§†åŒ–ç†è§£</h4>
<p>å‡è®¾åˆ—è¡¨å…±æœ‰ 10000 æ¡ï¼Œæ¯è¡Œé«˜ 40pxï¼š</p>

























<table><thead><tr><th>åŒºåŸŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å¯è§åŒºåŸŸ</td><td>ä¸€æ¬¡åªæ˜¾ç¤ºçº¦ 10 è¡Œ</td></tr><tr><td>ç¼“å†²åŒº</td><td>ä¸Šä¸‹å„å¤šæ¸²æŸ“å‡ è¡Œé˜²æ­¢é—ªçƒ</td></tr><tr><td>å ä½å®¹å™¨</td><td>ç”¨æ€»é«˜åº¦æ’‘å‡ºæ»šåŠ¨æ¡</td></tr><tr><td>æ¸²æŸ“çª—å£</td><td>åŠ¨æ€å¹³ç§»ï¼ˆtranslateYï¼‰åˆ°å¯¹åº”ä½ç½®</td></tr></tbody></table>
<p>è¿™æ ·ï¼š</p>
<ul>
<li>é¡µé¢ä¸Š<strong>å®é™…åªæœ‰å‡ åä¸ª DOM</strong>ï¼›</li>
<li>ä½†æ»šåŠ¨æ¡çœ‹èµ·æ¥ä¾ç„¶å®Œæ•´ï¼›</li>
<li>ç”¨æˆ·çœ‹èµ·æ¥å°±åƒå…¨éƒ¨éƒ½æ¸²æŸ“å‡ºæ¥ä¸€æ ·ã€‚</li>
</ul>
<h2 data-id="heading-3">ä¸‰ã€åŸºç¡€ç‰ˆè™šæ‹Ÿåˆ—è¡¨ç¤ºä¾‹</h2>
<p>æˆ‘ä»¬å…ˆç”¨æœ€ç®€å•çš„æ–¹æ³•æ¥å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆçš„ï¼Œä»¥ä¾¿æˆ‘ä»¬æ›´å¥½çš„ç†è§£æœ€åº•å±‚çš„æ€æƒ³åŸç†ï¼š</p>
<ul>
<li>æ”¯æŒæ»šåŠ¨</li>
<li>æ”¯æŒæ»šåŠ¨æ•°æ®åˆ‡ç‰‡</li>
<li>æ”¯æŒç¼“å†²åŒº</li>
</ul>
<p><strong>JSéƒ¨åˆ†å®ç°æ€è·¯ï¼š</strong></p>
<blockquote>
<p>ç”¨ä¸€ä¸ªå›ºå®šé«˜åº¦çš„å®¹å™¨åˆ¶é€ æ»šåŠ¨æ¡ï¼Œé€šè¿‡è®¡ç®—åªæ¸²æŸ“å¯è§†åŒºåŸŸçš„æ•°æ®ï¼Œå¹¶ç”¨åç§»é‡è®©è¿™äº›æ•°æ®çœ‹èµ·æ¥åœ¨æ­£ç¡®çš„ä½ç½®ã€‚</p>
</blockquote>
<h4 data-id="heading-4">1. ä¸»è¦å˜é‡è®¾ç½®ï¼Œæœ¬æ•™ç¨‹ä¸ºç®€æ˜“ç‰ˆï¼Œé»˜è®¤æ‰€æœ‰æ•°æ®é¡¹ç­‰é«˜</h4>
<pre><code class="hljs language-js" lang="js">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { ref, computed, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-comment">/**
 * ç»„ä»¶å‚æ•°ï¼ˆPropsï¼‰
 */</span>
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">items</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span>, <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> [] }, <span class="hljs-comment">// æ•°æ®æ•°ç»„</span>
  <span class="hljs-attr">itemHeight</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>, <span class="hljs-attr">default</span>: <span class="hljs-number">40</span> }, <span class="hljs-comment">// å•è¡Œé«˜åº¦</span>
  <span class="hljs-attr">height</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>, <span class="hljs-attr">default</span>: <span class="hljs-number">300</span> },     <span class="hljs-comment">// å®¹å™¨é«˜åº¦</span>
  <span class="hljs-attr">buffer</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>, <span class="hljs-attr">default</span>: <span class="hljs-number">5</span> }        <span class="hljs-comment">// ä¸Šä¸‹ç¼“å†²è¡Œæ•°</span>
})
<span class="hljs-comment">/**
 *  çŠ¶æ€å˜é‡ï¼ˆä¼šéšæ»šåŠ¨å˜åŒ–ï¼‰
 */</span>
<span class="hljs-keyword">const</span> containerRef = ref&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;()   <span class="hljs-comment">// æ»šåŠ¨å®¹å™¨ DOM</span>
<span class="hljs-keyword">const</span> scrollTop = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)                     <span class="hljs-comment">// å½“å‰æ»šåŠ¨ä½ç½®</span>
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-5">2.å¯è§†åŒºåŸŸè®¡ç®—ï¼šåŒ…æ‹¬é«˜åº¦è®¡ç®—å’Œåç§»é‡ï¼ˆoffsetï¼‰è®¡ç®—</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ€»é«˜åº¦ï¼ˆæ’‘å‡ºæ»šåŠ¨æ¡ï¼‰ï¼šæ€»æ•°å±…æ¡æ•°*æ¯ä¸€é¡¹é«˜åº¦</span>
<span class="hljs-keyword">const</span> totalHeight = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">items</span>.<span class="hljs-property">length</span> * props.<span class="hljs-property">itemHeight</span>)

<span class="hljs-comment">// å½“å‰ä¸€å±å¯æ˜¾ç¤ºå¤šå°‘è¡Œï¼ˆåŠ ä¸Šç¼“å†²ï¼‰ï¼šå¯è§†åŒºé«˜åº¦/æ¯ä¸€é¡¹é«˜åº¦</span>
<span class="hljs-keyword">const</span> visibleCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> base = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(props.<span class="hljs-property">height</span> / props.<span class="hljs-property">itemHeight</span>)
  <span class="hljs-keyword">return</span> base + props.<span class="hljs-property">buffer</span> * <span class="hljs-number">2</span>
})

<span class="hljs-comment">// å¯è§æ•°æ®çš„èµ·æ­¢ç´¢å¼•ï¼š</span>
<span class="hljs-comment">// 1. å½“å‰ä½ç½® Ã· æ¯ä¸€é¡¹é«˜åº¦ = å½“å‰å®Œå…¨æ»šè¿‡å¤šå°‘é¡¹ï¼ˆå‘ä¸‹å–æ•´å¾—åˆ°æœ€å®Œæ•´çš„å·²æ»šè¿‡é¡¹æ•°ï¼‰</span>
<span class="hljs-comment">// 2. å‡å»ç¼“å†²åŒºï¼šå› ä¸ºä¸Šæ–¹ç¼“å†²åŒºçš„å†…å®¹ä¹Ÿéœ€è¦æå‰æ¸²æŸ“</span>
<span class="hljs-comment">// 3. ç¡®ä¿ç´¢å¼•ä¸å°äº0ï¼ˆè¾¹ç•Œä¿æŠ¤ï¼‰</span>
<span class="hljs-keyword">const</span> startIndex = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> start = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(scrollTop.<span class="hljs-property">value</span> / props.<span class="hljs-property">itemHeight</span>) - props.<span class="hljs-property">buffer</span>
  <span class="hljs-keyword">return</span> start &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : start
})

<span class="hljs-comment">// ç»“æŸç´¢å¼• = å¼€å§‹ç´¢å¼• + è¦æ¸²æŸ“çš„æ€»æ•°é‡ï¼ˆå¯è§åŒº+ä¸Šä¸‹ç¼“å†²åŒºï¼‰</span>
<span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œåº”è¯¥åŠ ä¸Šè¾¹ç•Œæ£€æŸ¥ï¼Œé˜²æ­¢è¶…è¿‡æ•°ç»„é•¿åº¦</span>
<span class="hljs-keyword">const</span> endIndex = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> end = startIndex.<span class="hljs-property">value</span> + visibleCount.<span class="hljs-property">value</span>
  <span class="hljs-keyword">return</span> end &gt; props.<span class="hljs-property">items</span>.<span class="hljs-property">length</span> ? props.<span class="hljs-property">items</span>.<span class="hljs-property">length</span> : end
})
<span class="hljs-comment">// å½“å‰å¯è§çš„æ•°æ®åˆ‡ç‰‡</span>
<span class="hljs-keyword">const</span> visibleItems = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">items</span>.<span class="hljs-title function_">slice</span>(startIndex.<span class="hljs-property">value</span>, endIndex.<span class="hljs-property">value</span>))

<span class="hljs-comment">// å¹³ç§»åç§»é‡ï¼ˆç”¨äº translateYï¼‰</span>
<span class="hljs-keyword">const</span> offsetTop = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> startIndex.<span class="hljs-property">value</span> * props.<span class="hljs-property">itemHeight</span>)
</code></pre>
<h4 data-id="heading-6">3.æ»šåŠ¨äº‹ä»¶ç›‘å¬</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">onScroll</span> = (<span class="hljs-params"/>) =&gt; {
<span class="hljs-comment">//è¿™é‡ŒåŠ ä¸€ä¸ªåˆ¤æ–­é˜²æ­¢DOMä¸ºæ¸²æŸ“å‘ç”Ÿé—ªçƒ</span>
  <span class="hljs-keyword">if</span> (!containerRef.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>
  scrollTop.<span class="hljs-property">value</span> = containerRef.<span class="hljs-property">value</span>.<span class="hljs-property">scrollTop</span>
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// åˆå§‹åŒ–è®¡ç®—ï¼Œé¿å…ç¬¬ä¸€æ¬¡æ¸²æŸ“é—ªçƒ</span>
  <span class="hljs-title function_">onScroll</span>()
})
</code></pre>
<p><strong>HTMLéƒ¨åˆ†å®ç°æ€è·¯åŠä»£ç ï¼š</strong></p>
<blockquote>
<p>åŒ…æ‹¬ä¸‰å±‚çš„ç›’å­ï¼š</p>
<p><strong>ç¬¬ä¸€å±‚</strong>ï¼šæœ€å¤–å±‚å›ºå®šé«˜åº¦çš„ç›’å­ï¼Œè´Ÿè´£æ»šåŠ¨
<strong>ç¬¬äºŒå±‚</strong>ï¼šæ’‘å¼€é«˜åº¦ï¼Œè®©æ»šåŠ¨æ¡çœ‹èµ·æ¥åƒæœ‰å…¨éƒ¨æ•°æ®
<strong>ç¬¬ä¸‰å±‚</strong>ï¼šå¯è§†åŒºåŸŸï¼Œåªæ¸²æŸ“çœ‹å¾—è§çš„å‡ æ¡æ•°æ®ï¼Œè·Ÿç€æ»šåŠ¨åŠ¨æ€ç§»åŠ¨</p>
</blockquote>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  &lt;!-- å¤–å±‚å®¹å™¨ï¼šå›ºå®šé«˜åº¦ + æ»šåŠ¨ --&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
    <span class="hljs-attr">ref</span>=<span class="hljs-string">"containerRef"</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"overflow-auto border rounded"</span>
    <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ height: `${props.height}px` }"</span>
    @<span class="hljs-attr">scroll</span>=<span class="hljs-string">"onScroll"</span>
  &gt;</span>
    <span class="hljs-comment">&lt;!-- å ä½å®¹å™¨ï¼šæ’‘èµ·æ»šåŠ¨æ¡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ height: `${totalHeight}px`, position: 'relative' }"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- æ¸²æŸ“çª—å£ï¼šé€šè¿‡ translateY åç§» --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ transform: `translateY(${offsetTop}px)` }"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
          <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, idx) in visibleItems"</span>
          <span class="hljs-attr">:key</span>=<span class="hljs-string">"startIndex + idx"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"border-b px-3 flex items-center"</span>
          <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ height: `${props.itemHeight}px` }"</span>
        &gt;</span>
          {{ item }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
</code></pre>
<p><strong>çˆ¶ç»„ä»¶ä½¿ç”¨å®ä¾‹ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">VirtualList</span> <span class="hljs-attr">:items</span>=<span class="hljs-string">"list"</span> <span class="hljs-attr">:height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">:itemHeight</span>=<span class="hljs-string">"35"</span> /&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">VirtualList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./VirtualList.vue'</span>

<span class="hljs-comment">// æ¨¡æ‹Ÿ 1 ä¸‡æ¡æ•°æ®</span>
<span class="hljs-keyword">const</span> list = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">10000</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> <span class="hljs-string">`ç¬¬ <span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span> æ¡æ•°æ®`</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

</code></pre>
<h2 data-id="heading-7">å››ã€ä¼˜åŒ–æ–¹æ¡ˆï¼šè®©è™šæ‹Ÿåˆ—è¡¨æ›´ä¸æ»‘</h2>
<p>ä¸Šé¢çš„åŸºç¡€ç‰ˆæˆ‘ä»¬å·²ç»å®ç°äº†æœ€åº•å±‚å¿…è¦çš„ä»£ç ï¼Œä½†åœ¨çœŸå®é¡¹ç›®ä¸­å¯èƒ½è¿˜æœ‰ä¸‹åˆ—é—®é¢˜ï¼š</p>
<ul>
<li>æ»šåŠ¨äº‹ä»¶è§¦å‘å¤ªé¢‘ç¹</li>
<li>å®¹å™¨å°ºå¯¸æ”¹å˜æ²¡æœ‰è‡ªåŠ¨é€‚é…</li>
<li>æƒ³è¦æš´éœ²APIæ¯”å¦‚ï¼šâ€œæ»šåŠ¨åˆ°ç¬¬Nè¡Œâ€</li>
<li>itemå¦‚æœä¸æ˜¯å­—ç¬¦ä¸²è€Œæ˜¯å¯¹è±¡ï¼Œè®¿é—®å±æ€§ä¼šç±»å‹æŠ¥é”™</li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç»™è¿™ä¸ªç®€æ˜“ç‰ˆçš„è™šæ‹Ÿåˆ—è¡¨åŠ ç‚¹<strong>å°ä¼˜åŒ–</strong></p>
<h4 data-id="heading-8">1.ä½¿ç”¨<code>requestAnimationFrame</code>èŠ‚æµæ»šåŠ¨äº‹ä»¶</h4>
<p><strong>åŸå› </strong>ï¼š
æ»šåŠ¨äº‹ä»¶ï¼ˆscrollï¼‰è§¦å‘é¢‘ç‡æé«˜ï¼ˆæ¯ç§’ä¸Šç™¾æ¬¡ï¼‰ï¼Œé¢‘ç¹è®¡ç®—ä¼šå¯¼è‡´é¡µé¢å¡é¡¿ã€‚</p>
<p><strong>è§£å†³</strong>ï¼š åˆ©ç”¨æµè§ˆå™¨çš„â€œä¸‹ä¸€å¸§æ›´æ–°â€æœºåˆ¶</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> <span class="hljs-attr">rafId</span>: number | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">onScroll</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!containerRef.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>
  <span class="hljs-keyword">const</span> top = containerRef.<span class="hljs-property">value</span>.<span class="hljs-property">scrollTop</span>

  <span class="hljs-comment">// å¦‚æœä¸Šä¸€å¸§ä»»åŠ¡è¿˜æ²¡æ‰§è¡Œå®Œï¼Œå°±å–æ¶ˆå®ƒ</span>
  <span class="hljs-keyword">if</span> (rafId !== <span class="hljs-literal">null</span>) <span class="hljs-title function_">cancelAnimationFrame</span>(rafId)

  <span class="hljs-comment">// åªä¿ç•™æœ€åä¸€æ¬¡</span>
  rafId = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
    scrollTop.<span class="hljs-property">value</span> = top
    rafId = <span class="hljs-literal">null</span>
  })
}
</code></pre>
<p><strong>åŸç†</strong>ï¼š</p>
<ul>
<li><code>requestAnimationFrame</code>è®©ä»£ç åœ¨â€œä¸‹ä¸€æ¬¡å±å¹•ç»˜åˆ¶â€å‰æ‰§è¡Œï¼›</li>
<li>æ¯å¸§çº¦16msï¼Œå³ä½¿æ»šåŠ¨å†å¿«ï¼Œæœ€å¤š60æ¬¡/ç§’ï¼Œæ€§èƒ½ç¨³å®š</li>
</ul>
<h4 data-id="heading-9">2.æ”¯æŒâ€œæ»šåŠ¨åˆ°æŒ‡å®šè¡Œâ€</h4>
<p>æƒ³è®©åˆ—è¡¨è‡ªåŠ¨æ»šåŠ¨ç¬¬200è¡Œæ€ä¹ˆåšï¼Ÿ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">scrollToIndex</span>(<span class="hljs-params">index: number</span>) {
  <span class="hljs-keyword">if</span> (!containerRef.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>
  containerRef.<span class="hljs-property">value</span>.<span class="hljs-property">scrollTop</span> = index * props.<span class="hljs-property">itemHeight</span>
}
<span class="hljs-title function_">defineExpose</span>({ scrollToIndex })

</code></pre>
<p>çˆ¶ç»„ä»¶è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;button @click="goTo200"&gt;æ»šåŠ¨åˆ°ç¬¬ 200 è¡Œ&lt;/button&gt;
&lt;VirtualList ref="listRef" :items="list" /&gt;
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> listRef = <span class="hljs-title function_">ref</span>()
<span class="hljs-keyword">const</span> <span class="hljs-title function_">goTo200</span> = (<span class="hljs-params"/>) =&gt; listRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">scrollToIndex</span>(<span class="hljs-number">200</span>)
</code></pre>
<h4 data-id="heading-10">3.ç±»å‹å®‰å…¨å±•ç¤ºï¼ˆé˜²æ­¢TSæŠ¥é”™ï¼‰</h4>
<p>å¦‚æœæ•°æ®æ˜¯å¯¹è±¡ï¼Œç›´æ¥å†™<code>item.id</code>ä¼šæŠ¥é”™ï¼ˆå› ä¸º<code>item</code>æ˜¯unknownï¼‰
<strong>è§£å†³</strong>ï¼šå°è£…ä¸€ä¸ªå®‰å…¨å‡½æ•°ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">displayText</span>(<span class="hljs-params">item: unknown</span>): string {
  <span class="hljs-keyword">if</span> (item &amp;&amp; <span class="hljs-keyword">typeof</span> item === <span class="hljs-string">'object'</span>) {
    <span class="hljs-keyword">const</span> r = item <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;string, unknown&gt;
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>(r.<span class="hljs-property">label</span> ?? r.<span class="hljs-property">id</span> ?? <span class="hljs-string">'[Object]'</span>)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>(item)
}
<span class="hljs-comment">//æ¨¡æ¿</span>
{{ <span class="hljs-title function_">displayText</span>(item) }}
</code></pre>
<h4 data-id="heading-11">4.è‡ªåŠ¨é€‚é…å®¹å™¨é«˜åº¦å˜åŒ–</h4>
<p>å®¹å™¨å¯èƒ½å› çˆ¶å…ƒç´ å¸ƒå±€å˜åŒ–è€Œé«˜åº¦æ”¹å˜ï¼Œä½¿ç”¨<code>ResizeObserver</code>è‡ªåŠ¨ç›‘å¬ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { onBeforeUnmount } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">let</span> <span class="hljs-attr">resizeObserver</span>: <span class="hljs-title class_">ResizeObserver</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> el = containerRef.<span class="hljs-property">value</span>
  <span class="hljs-keyword">if</span> (el) {
    resizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// é‡æ–°è®¡ç®—é«˜åº¦</span>
      containerHeight.<span class="hljs-property">value</span> = el.<span class="hljs-property">clientHeight</span>
    })
    resizeObserver.<span class="hljs-title function_">observe</span>(el)
  }
})
<span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> resizeObserver?.<span class="hljs-title function_">disconnect</span>())
</code></pre>
<h2 data-id="heading-12">äº”ã€æœ€ç»ˆç»“æœ</h2>
<p>ç°åœ¨å®ç°çš„è™šæ‹Ÿåˆ—è¡¨ï¼š</p>
<ul>
<li>æµç•…ä¸å¡é¡¿ï¼›</li>
<li>ç±»å‹å®‰å…¨ï¼›</li>
<li>å¯ä¸»åŠ¨æ»šåŠ¨ï¼›</li>
<li>è‡ªé€‚åº”å®¹å™¨å˜åŒ–ï¼›</li>
<li>å¯¹è±¡æ•°æ®ã€å­—ç¬¦ä¸²æ•°æ®éƒ½èƒ½æ˜¾ç¤ºï¼›</li>
<li>çœŸæ­£åšåˆ° <strong>æ€§èƒ½ä¸ä½“éªŒä¸¤ä¸è¯¯</strong></li>
</ul>
<h2 data-id="heading-13">å…­ã€æ€»ç»“ï¼š</h2>
<h3 data-id="heading-14"/>

































<table><thead><tr><th>æ¨¡å—</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>totalHeight</code></td><td>æ’‘å‡ºæ»šåŠ¨æ¡</td></tr><tr><td><code>visibleItems</code></td><td>æ§åˆ¶æ¸²æŸ“æ•°é‡</td></tr><tr><td><code>offsetTop</code></td><td>å¹³ç§»åˆ°æ­£ç¡®ä½ç½®</td></tr><tr><td><code>requestAnimationFrame</code></td><td>ä¼˜åŒ–é«˜é¢‘æ»šåŠ¨æ€§èƒ½</td></tr><tr><td><code>scrollToIndex</code></td><td>æä¾›å¤–éƒ¨æ§åˆ¶</td></tr><tr><td><code>ResizeObserver</code></td><td>è‡ªé€‚åº”å®¹å™¨å°ºå¯¸</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†è§äº†ï¼Œclaude code]]></title>    <link>https://juejin.cn/post/7572749797468635145</link>    <guid>https://juejin.cn/post/7572749797468635145</guid>    <pubDate>2025-11-16T06:26:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572749797468635145" data-draft-id="7571636682694410280" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†è§äº†ï¼Œclaude code"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-16T06:26:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="golangå­¦ä¹ è®°"/> <meta itemprop="url" content="https://juejin.cn/user/4371313964100990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†è§äº†ï¼Œclaude code
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313964100990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    golangå­¦ä¹ è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T06:26:44.000Z" title="Sun Nov 16 2025 06:26:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¤– ä»å‰ï¼Œæœ‰ä¸ªç¨‹åºå‘˜ï¼Œå’Œä»–é‚£æ²‰é»˜å¯¡è¨€çš„ç»ˆç«¯â€¦â€¦</h2>
<p>ä»–çš„ç»ˆç«¯ï¼Œåªä¼šä¸‰ä»¶äº‹ï¼š</p>
<ul>
<li><code>command not found</code></li>
<li><code>segmentation fault (core dumped)</code></li>
<li><code>Killed</code></li>
</ul>
<p>ç›´åˆ°æŸå¤©ï¼Œä»– <code>curl -fsSL https://opencode.ai/install | bash</code> â€”â€”<br/>
<strong>ç»ˆç«¯çªç„¶å¼€å£äº†ï¼š</strong></p>
<blockquote>
<p>â€œæ‚¨å¥½ï¼Œæ£€æµ‹åˆ°æ‚¨åˆšå†™äº†ä¸€ä¸ª <code>for (i = 0; i &lt; 10; i++) console.log(i++);</code>â€¦â€¦<br/>
æ‚¨â€¦â€¦æ˜¯æƒ³æ‰“å°å¶æ•°ï¼Œè¿˜æ˜¯å•çº¯æƒ³æŒ‘æˆ˜å†¯Â·è¯ºä¾æ›¼çš„æé™ï¼Ÿâ€</p>
</blockquote>
<p>é‚£ä¸€åˆ»ï¼Œä»–çŸ¥é“ï¼š<strong>æ—¶ä»£å˜äº†</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">âœ¨ ä»€ä¹ˆæ˜¯ OpenCodeï¼Ÿâ€”â€” ä½ çš„ <code>bash</code> ç»ˆäºè€ƒä¸Šäº† AI ç ”ç©¶ç”Ÿ</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsst%2Fopencode" target="_blank" title="https://github.com/sst/opencode" ref="nofollow noopener noreferrer">OpenCode</a> æ˜¯ä¸€ä¸ª<strong>å¼€æºã€æœ¬åœ°ä¼˜å…ˆã€ç»ˆç«¯åŸç”Ÿ</strong>çš„ AI ç¼–ç åŠ©æ‰‹ã€‚<br/>
å®ƒä¸åƒ Copilot é‚£æ ·èº²åœ¨ VS Code çš„è§’è½é‡Œå½“ã€Œå¹½çµå®ä¹ ç”Ÿã€ï¼Œ<br/>
è€Œæ˜¯ç›´æ¥ <code>cd</code> è¿›ä½ çš„å·¥ä½œæµï¼Œåä½ éš”å£å·¥ä½ï¼Œè‡ªå¸¦å’–å•¡æ¯ï¼ˆå’Œçº é”™æœ¬èƒ½ï¼‰ã€‚</p>
<h3 data-id="heading-2">ğŸŒŸ å®ƒèƒ½å¹²å•¥ï¼Ÿçœ‹å‡ ä¸ªçœŸå®åœºæ™¯ï¼š</h3>

























<table><thead><tr><th>ä½ æ•²çš„å‘½ä»¤</th><th>OpenCode çš„ååº”</th></tr></thead><tbody><tr><td><code>opencode fix error in main.go</code></td><td>æ‰«æ <code>main.go</code> â†’ å®šä½ nil æŒ‡é’ˆ â†’ æä¾›å¸¦æ³¨é‡Šçš„è¡¥ä¸</td></tr><tr><td><code>opencode add login to Express app</code></td><td>è‡ªåŠ¨ç”Ÿæˆ <code>authMiddleware.js</code> + JWT ç§˜é’¥ç®¡ç†å»ºè®®</td></tr><tr><td><code>opencode explain this function</code></td><td>ç”¨ã€Œäººè¯ã€è§£é‡Šä½ ä¸‰ä¸ªæœˆå‰å†™çš„â€œç¥é€»è¾‘â€</td></tr><tr><td><code>opencode review before commit</code></td><td>æ¨¡æ‹Ÿ PR è¯„å®¡å‘˜ï¼šâ€œè¿™æ®µç”¨ <code>map</code> æ¯” <code>for</code> æ›´å‡½æ•°å¼ï¼Œä¸”å°‘ 2 ä¸ª bugâ€</td></tr></tbody></table>
<blockquote>
<p>ğŸ¯ å…³é”®ä¼˜åŠ¿ï¼š<strong>ä¸ç”¨åˆ‡çª—å£</strong>ã€‚<br/>
ä½ è¿˜åœ¨ <code>vim</code> é‡ŒæŒ£æ‰ <code>:wq!</code>ï¼Œå®ƒå·²ç»å¸®ä½ ç”Ÿæˆäº†å•å…ƒæµ‹è¯•ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06a7ba660fbc4996bb7b2756bdb89690~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763879203&amp;x-signature=%2FpbGPJ%2B30neOQ%2BKfBF5GDOMJAf8%3D" alt="OpenCode äº¤äº’ç•Œé¢" loading="lazy"/></p>
<blockquote>
<p>ğŸ‘† è¿™ä¸æ˜¯ç§‘å¹»ç‰‡â€”â€”è¿™æ˜¯ä½ æ˜å¤©æ—©ä¸Šçš„ç»ˆç«¯ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ğŸ› ï¸ ä¸‰æ­¥å®‰è£…ï¼šæ¯”é…ç½® <code>.bashrc</code> è¿˜ç®€å•</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1ï¸âƒ£ ä¸€é”®å®‰è£…ï¼ˆè¿ `sudo` éƒ½æ‡’å¾—è¦ï¼‰</span>
curl -fsSL https://opencode.ai/install | bash

<span class="hljs-comment"># 2ï¸âƒ£ è¿›é¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">cd</span> my-legacy-node-app-that-still-uses-callbacks

<span class="hljs-comment"># 3ï¸âƒ£ å¯åŠ¨é­”æ³•</span>
opencode
</code></pre>
<p>é¦–æ¬¡è¿è¡Œæ—¶ï¼Œæ•² <code>/init</code>ï¼Œå®ƒä¼šé»˜é»˜è¯»å®Œæ•´ä¸ªé¡¹ç›®ï¼ˆåƒæäº†ä½ å…¥èŒç¬¬ä¸€å¤©ç¿»ä¸‰å¹´å‰çš„ä»£ç ï¼‰ï¼Œ<br/>
ç„¶åç”Ÿæˆä¸€ä¸ª <code>agents.md</code> â€”â€” ç›¸å½“äºç»™ AI åŠ©æ‰‹å‘äº†æœ¬ã€Šæœ¬é¡¹ç›®é»‘è¯æ‰‹å†Œã€‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4ada58c94764f5a8e935b47e8542787~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763879203&amp;x-signature=E9P1Fx7Px8ZOAltheJCY2lyLZdQ%3D" alt="é¡¹ç›®åˆå§‹åŒ–åç”Ÿæˆ agents.md" loading="lazy"/></p>
<blockquote>
<p>ğŸ” å°å¹½é»˜æ—¶é—´ï¼š<br/>
å½“ä½ é—®å®ƒï¼š<em>â€œè¿™ä¸ª repo æ˜¯å¹²å•¥çš„ï¼Ÿâ€</em><br/>
å®ƒç­”ï¼š<em>â€œä¸€ä¸ªç”¨ React + Express + SQLite å®ç°çš„ Todo åº”ç”¨â€¦â€¦ä½œè€…ä¼¼ä¹æƒ³è¯æ˜è‡ªå·±è¿˜æ²¡å¿˜æ‰ CRUDã€‚â€</em><br/>
â€”â€” ç²¾å‡†æ‰å¿ƒï¼Œè¿˜å¸¦æ–‡çŒ®ç»¼è¿° ğŸ˜­</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ğŸ§© ä¸ºä»€ä¹ˆ OpenCode æ¯” claude code æ›´é è°±ï¼Ÿ</h2>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>ç½‘é¡µç‰ˆ AIï¼ˆå¦‚ ChatGPTï¼‰</th><th>OpenCode</th></tr></thead><tbody><tr><td>ä¸Šä¸‹æ–‡</td><td>â€œä¸Šæ¬¡ä½ è¯´è¿‡ä»€ä¹ˆï¼Ÿâ€ â“</td><td>è®°å¾—ä½ <code>package.json</code>é‡Œç”¨çš„æ˜¯<code>express@4.18</code> âœ…</td></tr><tr><td>æ–‡ä»¶æ„ŸçŸ¥</td><td>â€œè¯·ç²˜è´´ä»£ç â€ ğŸ“‹</td><td>è‡ªåŠ¨æ‰«æ <code>./src</code>ã€<code>git diff</code>ã€ç”šè‡³ <code>node_modules/.bin</code> ğŸ”</td></tr><tr><td>éšç§</td><td>ä»£ç ä¸Šäº‘ï¼Ÿç¥ˆç¥· GDPR å§ â˜ï¸</td><td>é»˜è®¤<strong>æœ¬åœ°è¿è¡Œ</strong>ï¼›è¿ Ollama éƒ½èƒ½å¡è¿›å» ğŸ”’</td></tr><tr><td>ç¼–è¾‘èƒ½åŠ›</td><td>â€œå¤åˆ¶ â†’ ç²˜è´´ â†’ æ‰‹åŠ¨æ”¹ç¼©è¿›â€ âœ‚ï¸</td><td><code>accept all</code> â†’ <code>git add .</code> â†’ <code>git commit -m "AI did it"</code> âœ…</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ å®ƒç”šè‡³ä¼šåœ¨ä¿®æ”¹å‰é—®ä½ ï¼š<br/>
<em>â€œæˆ‘å‡†å¤‡æŠŠ <code>if (err) throw err</code> æ”¹æˆ <code>try/catch</code> + æ—¥å¿—è®°å½•ï¼Œæ¥å—ï¼Ÿ[Y/n]â€</em><br/>
â€”â€” æ¯”æŸäº›é˜Ÿå‹è¿˜æ‡‚<strong>ä»£ç ç¤¼ä»ª</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-5">ä¸Šä¸‹æ–‡çš„åŠ›é‡</h3>
<p>OpenCodeâ€‹ æœ€å¤§çš„ä¼˜åŠ¿ä¹‹ä¸€åœ¨äºå®ƒå¦‚ä½•å¤„ç†ä¸Šä¸‹æ–‡ã€‚ä¼ ç»Ÿçš„èŠå¤©æœºå™¨äººåœ¨å‡ è½®å¯¹è¯åä¼šå¿˜è®°ä½ æ­£åœ¨åšä»€ä¹ˆã€‚è€Œ OpenCode ä¸ä¼šã€‚</p>
<p>OpenCodeâ€‹ è®°ä½ä½ çš„ä»£ç åº“ï¼Œç†è§£å¯¼å…¥ï¼Œå¹¶è·Ÿè¸ªç›¸å…³æ–‡ä»¶ã€‚è¿™ä½¿å¾—å®ƒæ›´åƒä¸€ä¸ªçœŸæ­£çš„å¼€å‘è€…åŠ©æ‰‹ã€‚
å‡è®¾ä½ å‘Šè¯‰å®ƒï¼šâ€œä¸ºæˆ‘çš„ Go åº”ç”¨æ·»åŠ èº«ä»½éªŒè¯ã€‚â€</p>
<p>OpenCodeâ€‹ ä¼šæ‰«æä½ çš„é¡¹ç›®ï¼Œè¯†åˆ«è·¯ç”±å®šä¹‰çš„ä½ç½®ï¼Œåˆ›å»ºç™»å½•ä¸­é—´ä»¶ï¼Œç”šè‡³å»ºè®®å®‰å…¨å­˜å‚¨ä»¤ç‰Œçš„ä½ç½®ã€‚æ­£æ˜¯è¿™ç§ä¸Šä¸‹æ–‡æ„ŸçŸ¥ä¸è‡ªç„¶è¯­è¨€ç†è§£çš„ç»“åˆï¼Œä½¿å¾— OpenCode æ„Ÿè§‰æ›´åƒä¸€ä¸ªé˜Ÿå‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸ§ª å®æµ‹ï¼šè®© OpenCode æ•‘ä¸€ä¸ªâ€œæ¿’ä¸´å´©æºƒâ€çš„é¡¹ç›®</h2>
<p>å‡è®¾ä½ æ¥äº†ä¸ªè€é¡¹ç›®ï¼š</p>
<ul>
<li>ç”¨ <code>callback hell</code> å†™çš„ Node.js æœåŠ¡</li>
<li>æŠ¥é”™ï¼š<code>TypeError: Cannot read property 'user' of undefined</code></li>
<li>ä¸Šä¸€ä¸ªå¼€å‘è€…å·²ç¦»èŒï¼ŒGitHub å¤´åƒè¿˜æ˜¯é»˜è®¤çš„ç« é±¼ ğŸ™</li>
</ul>
<h3 data-id="heading-7">æ“ä½œæµç¨‹ï¼š</h3>
<pre><code class="hljs language-bash" lang="bash">$ opencode explain the error <span class="hljs-keyword">in</span> server.js:42
</code></pre>
<p>â†’ å®ƒå®šä½åˆ°ï¼š</p>
<pre><code class="hljs language-js" lang="js">db.<span class="hljs-title function_">query</span>(<span class="hljs-string">"SELECT * FROM users WHERE id = ?"</span>, [req.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>], <span class="hljs-function">(<span class="hljs-params">err, rows</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> user = rows[<span class="hljs-number">0</span>]; <span class="hljs-comment">// â† rows ä¸º [] æ—¶ user = undefinedï¼</span>
  res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">name</span>: user.<span class="hljs-property">name</span> }); <span class="hljs-comment">// ğŸ’¥</span>
});
</code></pre>
<h3 data-id="heading-8">ç„¶åä½ è¾“å…¥ï¼š</h3>
<pre><code class="hljs language-bash" lang="bash">$ opencode refactor this to use async/await and add null check
</code></pre>
<p>å®ƒè¾“å‡ºè¡¥ä¸ï¼ˆæ”¯æŒé¢„è§ˆ + ä¸€é”®åº”ç”¨ï¼‰ğŸ‘‡ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- db.query("SELECT * FROM users WHERE id = ?", [req.params.id], (err, rows) =&gt; {</span>
<span class="hljs-deletion">-   const user = rows[0];</span>
<span class="hljs-deletion">-   res.json({ name: user.name });</span>
<span class="hljs-deletion">- });</span>
<span class="hljs-addition">+ try {</span>
<span class="hljs-addition">+   const [rows] = await db.promise().query(</span>
<span class="hljs-addition">+     "SELECT * FROM users WHERE id = ?",</span>
<span class="hljs-addition">+     [req.params.id]</span>
<span class="hljs-addition">+   );</span>
<span class="hljs-addition">+   if (!rows.length) {</span>
<span class="hljs-addition">+     return res.status(404).json({ error: "User not found" });</span>
<span class="hljs-addition">+   }</span>
<span class="hljs-addition">+   res.json({ name: rows[0].name });</span>
<span class="hljs-addition">+ } catch (err) {</span>
<span class="hljs-addition">+   console.error(err);</span>
<span class="hljs-addition">+   res.status(500).json({ error: "Internal server error" });</span>
<span class="hljs-addition">+ }</span>
</code></pre>
<blockquote>
<p>ğŸ‰ æ•´ä¸ªè¿‡ç¨‹è€—æ—¶ï¼š<strong>47 ç§’</strong><br/>
ä½ å–äº†ä¸€å£å’–å•¡ï¼Œé¡¹ç›®èµ·æ­»å›ç”Ÿã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">ğŸ›¡ï¸ éšç§ï¼Ÿæˆ‘ä»¬è¿ <code>.env</code> éƒ½ä¸å·çœ‹</h2>
<p>OpenCode çš„åº§å³é“­æ˜¯ï¼š</p>
<blockquote>
<p><strong>â€œä½ çš„ä»£ç ï¼Œä½ çš„è§„åˆ™â€”â€”æˆ‘åªè´Ÿè´£åŠ¨å˜´ï¼Œä¸åŠ¨æ‰‹ä¸Šä¼ ã€‚â€</strong></p>
</blockquote>
<ul>
<li>âœ… æ”¯æŒæœ¬åœ°æ¨¡å‹ï¼ˆOllama / Llama.cpp / vLLMï¼‰</li>
<li>âœ… å¯æŒ‡å®š API å¯†é’¥ä»…ç”¨äºæ¨ç†ï¼Œ<strong>ä¸ä¼ æ–‡ä»¶å†…å®¹</strong>ï¼ˆé€šè¿‡ä¸Šä¸‹æ–‡æ‘˜è¦ï¼‰</li>
<li>âœ… æ‰€æœ‰ä¿®æ”¹èµ° <code>git diff</code> é¢„è§ˆï¼Œ<strong>äººç±» veto æƒç¥åœ£ä¸å¯ä¾µçŠ¯</strong></li>
</ul>
<blockquote>
<p>ğŸ™ƒ å¼€å‘è€…çœŸå®åé¦ˆï¼š<br/>
<em>â€œç»ˆäºæœ‰ä¸ª AI ä¸ä¼šåœ¨æˆ‘å†™å¯†ç æ—¶å»ºè®®â€˜å»ºè®®ç”¨ bcrypt åŠ å¯†â€™â€¦â€¦å®ƒç›´æ¥è·³è¿‡äº†é‚£è¡Œã€‚â€</em></p>
</blockquote>
<hr/>
<h2 data-id="heading-10">ğŸ¯ ç»“è¯­</h2>
<p>OpenCode çš„å“²å­¦å¾ˆç®€å•ï¼š</p>
<blockquote>
<p><strong>â€œè®©æœºå™¨å¹²å®ƒæ“…é•¿çš„â€”â€”è®°å¿†ã€æœç´¢ã€è¯•é”™ï¼›<br/>
è®©äººç±»å¹²æˆ‘ä»¬æ“…é•¿çš„â€”â€”å†³ç­–ã€è®¾è®¡ã€ç”©é”…â€¦â€¦å•Šä¸ï¼Œæ˜¯å½’å› åˆ†æã€‚â€</strong></p>
</blockquote>
<p>éšç€ AI ç¼–ç ä»£ç†çš„æˆç†Ÿï¼Œç¼–å†™ä»£ç ä¸æè¿°ä½ æƒ³è¦çš„å†…å®¹ä¹‹é—´çš„ç•Œé™å°†ç»§ç»­æ¨¡ç³Šã€‚åƒ OpenCodeâ€‹ è¿™æ ·çš„å·¥å…·å‘æˆ‘ä»¬å±•ç¤ºäº†é‚£ä¸ªæœªæ¥å¯èƒ½çš„æ ·å­ï¼Œä¸€ä¸ªå¼€å‘è€…èŠ±è´¹æ›´å°‘æ—¶é—´ä¸è¯­æ³•æ–—äº‰ï¼Œè€Œæ›´å¤šæ—¶é—´æ„å»ºæƒ³æ³•çš„æœªæ¥ã€‚
æƒ³è±¡ä¸€ä¸‹ï¼Œæœ‰ä¸€å¤©ä½ é€šè¿‡è¾“å…¥ï¼šâ€œä¸ºå¸¦æœ‰ç”¨æˆ·èº«ä»½éªŒè¯å’Œ SQLite æ”¯æŒçš„å¾…åŠäº‹é¡¹åº”ç”¨åˆ›å»ºä¸€ä¸ª REST APIã€‚â€
å‡ ç§’é’Ÿå†…ï¼Œä½ çš„é¡¹ç›®ç»“æ„ã€æ•°æ®åº“å’Œè·¯ç”±å°±å‡†å¤‡å¥½äº†ï¼Œå¹¶ç”±ä½ çš„ AI åŠ©æ‰‹å®¡æŸ¥ã€æµ‹è¯•å’Œè®°å½•ã€‚
è¿™å°±æ˜¯ OpenCodeâ€‹ æ­£åœ¨è¿ˆå‘çš„æ„¿æ™¯ï¼šä¸ä»…ä»…æ˜¯ç”Ÿæˆä»£ç çš„ AI å·¥å…·ï¼Œè€Œæ˜¯ç†è§£ä¸Šä¸‹æ–‡ã€å¤„ç†å¤æ‚æ€§ï¼Œå¹¶è®©äººç±»ä¿æŒæ§åˆ¶çš„å·¥å…·</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ChatGPTä¸­çš„ç¾¤èŠåŠŸèƒ½è¯•ç‚¹é¡¹ç›®]]></title>    <link>https://juejin.cn/post/7572493520004481058</link>    <guid>https://juejin.cn/post/7572493520004481058</guid>    <pubDate>2025-11-16T06:56:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572493520004481058" data-draft-id="7572714389942911028" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ChatGPTä¸­çš„ç¾¤èŠåŠŸèƒ½è¯•ç‚¹é¡¹ç›®"/> <meta itemprop="keywords" content="ChatGPT"/> <meta itemprop="datePublished" content="2025-11-16T06:56:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ChatGPTä¸­çš„ç¾¤èŠåŠŸèƒ½è¯•ç‚¹é¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T06:56:48.000Z" title="Sun Nov 16 2025 06:56:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fopenai.com%2Findex%2Fgroup-chats-in-chatgpt%2F" target="_blank" title="https://openai.com/index/group-chats-in-chatgpt/" ref="nofollow noopener noreferrer">åŸæ–‡</a></p>
<blockquote>
<p>ç¾¤èŠå¼€å§‹åœ¨ç§»åŠ¨è®¾å¤‡å’Œç½‘é¡µä¸Šå‘æ—¥æœ¬ã€æ–°è¥¿å…°ã€éŸ©å›½å’Œå°æ¹¾ã€‚â€”â€”é¢ã€‚ã€‚è¿™æ˜¯è¦åŒ…å›´ä¸œå¤§å—ã€‚ã€‚</p>
</blockquote>
<p><strong>å‘å¸ƒæ—¥æœŸï¼š2025å¹´11æœˆ13æ—¥</strong>
<strong>åˆ†ç±»ï¼šäº§å“</strong></p>
<h2 data-id="heading-0">è¯•ç‚¹ChatGPTç¾¤èŠåŠŸèƒ½</h2>
<p>ä¸ä»–äººä»¥åŠChatGPTåœ¨åŒä¸€å¯¹è¯ä¸­åä½œã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fchatgpt.com%2F%3Fopenaicom-did%3Dd70b6f18-35f1-4245-bcc8-934682ad98b9%26openaicom_referred%3Dtrue" target="_blank" title="https://chatgpt.com/?openaicom-did=d70b6f18-35f1-4245-bcc8-934682ad98b9&amp;openaicom_referred=true" ref="nofollow noopener noreferrer">åœ¨ChatGPTä¸­è¯•ç”¨</a>ï¼ˆåœ¨æ–°çª—å£ä¸­æ‰“å¼€ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23be7d1d1b4e4babb6ef6ae0902939cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763881008&amp;x-signature=wbPFgaYMYnwuRKAesQ76VyYXAIA%3D" alt="å›¾ç‰‡æè¿°ï¼šç§»åŠ¨èŠå¤©å±å¹•æ˜¾ç¤ºç¾¤ç»„å¯¹è¯ã€‚èŠå¤©é¡¶éƒ¨ï¼Œåœ†å½¢å¤´åƒç…§ç‰‡æ˜¾ç¤ºå¤šä½å‚ä¸è€…ã€‚ä¸€æ¡æ¶ˆæ¯æ˜¾ç¤ºï¼š&quot;æ˜¯çš„æ„å¤§åˆ©èœï¼Casa di Romaçœ‹èµ·æ¥å¾ˆæ£’ã€‚è°¢è°¢ChatGPTã€‚&quot;å¦ä¸€ä½å‚ä¸è€…Davidå›å¤ï¼š&quot;æˆ‘è¦å¼€å§‹äº«ç”¨æ„å¤§åˆ©é¢äº†â€¦â€¦&quot;é…æœ‰é£Ÿç‰©å’Œç¬‘è„¸è¡¨æƒ…ç¬¦å·ã€‚æŸ”å’Œçš„è“è‰²å’Œç´«è‰²æ¸å˜èƒŒæ™¯ã€‚" loading="lazy"/></p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å¼€å§‹åœ¨å°‘æ•°åœ°åŒºè¯•ç‚¹ä¸€ç§æ–°ä½“éªŒï¼Œè®©äººä»¬èƒ½å¤Ÿè½»æ¾åœ°å½¼æ­¤åä½œâ€”â€”ä»¥åŠä¸ChatGPTåä½œâ€”â€”åœ¨åŒä¸€å¯¹è¯ä¸­ã€‚é€šè¿‡ç¾¤èŠï¼Œä½ å¯ä»¥å°†æœ‹å‹ã€å®¶äººæˆ–åŒäº‹å¸¦å…¥å…±äº«ç©ºé—´ï¼Œä¸€èµ·è§„åˆ’ã€åšå‡ºå†³å®šæˆ–è®¨è®ºæƒ³æ³•ã€‚</p>
<p>æ— è®ºä½ æ˜¯åœ¨ç»„ç»‡å›¢ä½“æ™šé¤è¿˜æ˜¯ä¸åŒäº‹èµ·è‰å¤§çº²ï¼ŒChatGPTéƒ½èƒ½æä¾›å¸®åŠ©ã€‚ç¾¤èŠä¸ä½ çš„ç§äººå¯¹è¯æ˜¯åˆ†å¼€çš„ï¼Œä½ çš„ä¸ªäººChatGPTè®°å¿†æ°¸è¿œä¸ä¼šä¸èŠå¤©ä¸­çš„ä»»ä½•äººåˆ†äº«ã€‚</p>
<p>ç¾¤èŠå¼€å§‹åœ¨ç§»åŠ¨è®¾å¤‡å’Œç½‘é¡µä¸Šå‘æ—¥æœ¬ã€æ–°è¥¿å…°ã€éŸ©å›½å’Œå°æ¹¾çš„ChatGPT Freeã€Goã€Pluså’ŒProè®¡åˆ’ç”¨æˆ·æ¨å‡ºã€‚è¿™ä¸ªè¯•ç‚¹æ˜¯ChatGPTå…±äº«ä½“éªŒçš„å°å°ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬æœŸå¾…ä»æ—©æœŸç”¨æˆ·åé¦ˆä¸­å­¦ä¹ ï¼Œä»¥æŒ‡å¯¼æˆ‘ä»¬å¦‚ä½•æ‰©å±•åˆ°æ›´å¤šåœ°åŒºå’ŒChatGPTè®¡åˆ’ã€‚</p>
<h2 data-id="heading-1">ä¸ChatGPTä¸€èµ·åä½œ</h2>
<p>ç¾¤èŠè®©äººä»¬å’ŒChatGPTèƒ½å¤Ÿè¿›å…¥åŒä¸€å¯¹è¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨ä¸æœ‹å‹è®¡åˆ’å‘¨æœ«æ—…è¡Œï¼Œåˆ›å»ºä¸€ä¸ªç¾¤èŠï¼Œè®©ChatGPTå¸®åŠ©æ¯”è¾ƒç›®çš„åœ°ã€å»ºç«‹è¡Œç¨‹ï¼Œå¹¶åˆ›å»ºè¡Œææ¸…å•ï¼Œè®©æ¯ä¸ªäººéƒ½å‚ä¸å…¶ä¸­å¹¶è·Ÿè¿›è¡Œç¨‹ã€‚</p>
<p>å¯¹äºæ›´å®é™…çš„é¡¹ç›®ï¼Œå¦‚è®¾è®¡åé™¢èŠ±å›­æˆ–ä¸ºæ–°å…¬å¯“å¯»æ‰¾è‰ºæœ¯å“ï¼Œä¸ä½ çš„ä¼´ä¾£æˆ–å®¤å‹åˆ›å»ºç¾¤èŠï¼Œå¸®åŠ©åä½œè®¾è®¡æƒ³æ³•ã€åå¥½å’Œé£æ ¼ã€‚è¿™å¯¹äºå›¢ä½“å†³ç­–ä¹Ÿå¾ˆæ£’ï¼Œæ¯”å¦‚æ‰¾åˆ°é€‚åˆæ¯ä¸ªäººå£å‘³çš„é¤å…ï¼Œæˆ–è€…ç”¨å…¬æ­£çš„è£åˆ¤è§£å†³å‹å¥½çš„äº‰è®ºã€‚</p>
<p>ç¾¤èŠä¹Ÿè®©å·¥ä½œæˆ–å­¦æ ¡çš„åä½œå˜å¾—æ›´å®¹æ˜“ã€‚ä½ å¯ä»¥ä¸€èµ·èµ·è‰å¤§çº²æˆ–ç ”ç©¶æ–°è¯é¢˜ã€‚åˆ†äº«æ–‡ç« ã€ç¬”è®°å’Œé—®é¢˜ï¼ŒChatGPTå¯ä»¥å¸®åŠ©æ€»ç»“å’Œç»„ç»‡ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-2">å·¥ä½œåŸç†</h2>
<p>è¦å¼€å§‹ç¾¤èŠï¼Œè¯·ç‚¹å‡»ä»»ä½•æ–°èŠå¤©æˆ–ç°æœ‰èŠå¤©å³ä¸Šè§’çš„äººå‘˜å›¾æ ‡ã€‚å½“ä½ å°†æŸäººæ·»åŠ åˆ°ç°æœ‰èŠå¤©æ—¶ï¼ŒChatGPTä¼šåˆ›å»ºä½ å¯¹è¯çš„å‰¯æœ¬ä½œä¸ºæ–°çš„ç¾¤èŠï¼Œè¿™æ ·ä½ çš„åŸå§‹å¯¹è¯å°±ä¿æŒç‹¬ç«‹ã€‚ä½ å¯ä»¥é€šè¿‡åˆ†äº«é“¾æ¥ç›´æ¥é‚€è¯·1åˆ°20ä¸ªäººï¼Œç¾¤ç»„ä¸­çš„ä»»ä½•äººéƒ½å¯ä»¥åˆ†äº«è¯¥é“¾æ¥æ¥é‚€è¯·å…¶ä»–äººã€‚å½“ä½ åŠ å…¥æˆ–åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªç¾¤èŠæ—¶ï¼Œç³»ç»Ÿä¼šè¦æ±‚ä½ è®¾ç½®ä¸€ä¸ªåŒ…å«å§“åã€ç”¨æˆ·åå’Œç…§ç‰‡çš„ç®€çŸ­æ¡£æ¡ˆï¼Œè¿™æ ·æ¯ä¸ªäººéƒ½çŸ¥é“è°åœ¨å¯¹è¯ä¸­ã€‚ç¾¤èŠå¯ä»¥åœ¨ä¾§è¾¹æ ä¸€ä¸ªæ–°çš„æ¸…æ™°æ ‡è®°çš„éƒ¨åˆ†ä¸­æ‰¾åˆ°ï¼Œæ–¹ä¾¿è®¿é—®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2291d2c752cb4347988c22cd018fded7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763881008&amp;x-signature=lyCJz7BHigUgEIygWXVlOKqlEZg%3D" alt="å›¾ç‰‡æè¿°ï¼šå››ä¸ªç§»åŠ¨è®¾å¤‡æˆªå›¾å±•ç¤ºå¦‚ä½•åœ¨ChatGPTä¸­å¼€å§‹ç¾¤èŠ" loading="lazy"/></p>
<p>ç¾¤èŠçš„å·¥ä½œæ–¹å¼ä¸ä½ å¹³å¸¸çš„ChatGPTå¯¹è¯éå¸¸ç›¸ä¼¼â€”â€”åªæ˜¯ç°åœ¨å…¶ä»–äººä¹Ÿå¯ä»¥åŠ å…¥ã€‚å“åº”ç”±GPTâ€‘5.1 Autoé©±åŠ¨ï¼Œå®ƒä¼šæ ¹æ®æç¤ºä»¥åŠç”¨æˆ·åŸºäºå…¶å…è´¹ã€Goã€Plusæˆ–Proè®¡åˆ’å¯ç”¨çš„æ¨¡å‹æ¥é€‰æ‹©æœ€ä½³å“åº”æ¨¡å‹ã€‚æœç´¢ã€å›¾ç‰‡å’Œæ–‡ä»¶ä¸Šä¼ ã€å›¾ç‰‡ç”Ÿæˆå’Œå¬å†™åŠŸèƒ½éƒ½å·²å¯ç”¨ã€‚é€Ÿç‡é™åˆ¶ä»…åœ¨ChatGPTå“åº”æ—¶é€‚ç”¨â€”â€”ä¸é€‚ç”¨äºç¾¤èŠä¸­ç”¨æˆ·ä¹‹é—´çš„æ¶ˆæ¯â€”â€”ChatGPTçš„å“åº”è®¡å…¥è¢«å“åº”çš„äººçš„å¯ç”¨é™åˆ¶ã€‚æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œä½ å¯ä»¥è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.openai.com%2Fen%2Farticles%2F12703475-group-chats-in-chatgpt" target="_blank" title="https://help.openai.com/en/articles/12703475-group-chats-in-chatgpt" ref="nofollow noopener noreferrer">å¸®åŠ©ä¸­å¿ƒ</a>ï¼ˆåœ¨æ–°çª—å£ä¸­æ‰“å¼€ï¼‰ã€‚</p>
<p>æˆ‘ä»¬è¿˜ä¸ºç¾¤èŠæ•™ç»™ChatGPTæ–°çš„ç¤¾äº¤è¡Œä¸ºã€‚å®ƒè·Ÿéšå¯¹è¯çš„æµç¨‹ï¼Œå¹¶æ ¹æ®ç¾¤ç»„å¯¹è¯çš„ä¸Šä¸‹æ–‡å†³å®šä½•æ—¶å“åº”å’Œä½•æ—¶ä¿æŒå®‰é™ã€‚å½“ä½ å¸Œæœ›ChatGPTå“åº”æ—¶ï¼Œæ€»å¯ä»¥åœ¨æ¶ˆæ¯ä¸­æåŠ"ChatGPT"ã€‚æˆ‘ä»¬è¿˜èµ‹äºˆäº†ChatGPTç”¨è¡¨æƒ…ç¬¦å·å“åº”æ¶ˆæ¯çš„èƒ½åŠ›ï¼Œä»¥åŠå¼•ç”¨å¤´åƒçš„åŠŸèƒ½â€”â€”è¿™æ ·ï¼Œå½“è¢«è¦æ±‚åœ¨è¯¥ç¾¤ç»„å¯¹è¯ä¸­åˆ›å»ºæœ‰è¶£çš„ä¸ªæ€§åŒ–å›¾åƒæ—¶ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ç¾¤ç»„æˆå‘˜çš„å¤´åƒã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ç®¡ç†ç¾¤ç»„è®¾ç½®â€”â€”ç‚¹å‡»å‚ä¸è€…å›¾æ ‡æ¥å‘½åç¾¤ç»„ã€æ·»åŠ æˆ–åˆ é™¤äººå‘˜ï¼Œæˆ–é™éŸ³é€šçŸ¥ã€‚ä½ å¯ä»¥ä¸ºChatGPTåœ¨æ¯ä¸ªç¾¤èŠä¸­çš„å“åº”æ–¹å¼è®¾ç½®è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œæ— è®ºæ˜¯åˆ†äº«æ›´å¤šä¸Šä¸‹æ–‡è¿˜æ˜¯ç»™äºˆç‰¹å®šçš„è¯­è°ƒæˆ–ä¸ªæ€§ã€‚</p>
<h2 data-id="heading-3">éšç§å’Œæ§åˆ¶çš„æŒ‰è®¾è®¡å®ç°</h2>
<p>ç¾¤èŠä¸ä½ çš„ç§äººå¯¹è¯æ˜¯åˆ†å¼€çš„ã€‚ä½ çš„ä¸ªäººChatGPTè®°å¿†ä¸ä¼šåœ¨ç¾¤èŠä¸­ä½¿ç”¨ï¼ŒChatGPTä¹Ÿä¸ä¼šä»è¿™äº›å¯¹è¯ä¸­åˆ›å»ºæ–°çš„è®°å¿†ã€‚æˆ‘ä»¬æ­£åœ¨æ¢ç´¢æœªæ¥æä¾›æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œè¿™æ ·ä½ å°±å¯ä»¥é€‰æ‹©ChatGPTæ˜¯å¦ä»¥åŠå¦‚ä½•ä¸ç¾¤èŠä½¿ç”¨è®°å¿†ã€‚</p>
<p>ä½ å¤„äºæ§åˆ¶ä¹‹ä¸­ã€‚ä½ å¿…é¡»æ¥å—é‚€è¯·æ‰èƒ½åŠ å…¥ç¾¤èŠã€‚æ¯ä¸ªäººéƒ½å¯ä»¥çœ‹åˆ°è°åœ¨èŠå¤©ä¸­ï¼Œæˆ–éšæ—¶ç¦»å¼€ã€‚ç¾¤ç»„æˆå‘˜å¯ä»¥åˆ é™¤å…¶ä»–å‚ä¸è€…ï¼Œä½†ç¾¤ç»„åˆ›å»ºè€…é™¤å¤–ï¼Œåˆ›å»ºè€…åªèƒ½é€šè¿‡è‡ªå·±ç¦»å¼€æ¥è¢«åˆ é™¤ã€‚</p>
<p>ä¸ºå¹´è½»ç”¨æˆ·æä¾›é¢å¤–çš„å®‰å…¨ä¿éšœã€‚å¦‚æœ18å²ä»¥ä¸‹çš„äººä½¿ç”¨ç¾¤èŠï¼ŒChatGPTä¼šè‡ªåŠ¨å‡å°‘èŠå¤©ä¸­æ¯ä¸ªäººå¯¹æ•æ„Ÿå†…å®¹çš„æš´éœ²ã€‚çˆ¶æ¯æˆ–ç›‘æŠ¤äººå¯ä»¥é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.openai.com%2Fen%2Farticles%2F12315553-parental-controls-on-chatgpt-faq" target="_blank" title="https://help.openai.com/en/articles/12315553-parental-controls-on-chatgpt-faq" ref="nofollow noopener noreferrer">å®¶é•¿æ§åˆ¶</a>ï¼ˆåœ¨æ–°çª—å£ä¸­æ‰“å¼€ï¼‰å®Œå…¨å…³é—­ç¾¤èŠåŠŸèƒ½ã€‚</p>
<h2 data-id="heading-4">æ¥ä¸‹æ¥çš„å‘å±•</h2>
<p>ç¾¤èŠåªæ˜¯ChatGPTæˆä¸ºåä½œå’Œä¸ä»–äººäº’åŠ¨çš„å…±äº«ç©ºé—´çš„å¼€å§‹ã€‚éšç€ChatGPTæˆä¸ºç¾¤ç»„å¯¹è¯ä¸­æ›´å¥½çš„ä¼™ä¼´ï¼Œå®ƒå°†å¸®åŠ©ä½ æ¿€å‘æƒ³æ³•ã€åšå‡ºå†³ç­–ï¼Œå¹¶ä¸ç”Ÿæ´»ä¸­æœ€é‡è¦çš„äººä¸€èµ·è¡¨è¾¾ä½ çš„åˆ›é€ åŠ›ã€‚å½“æˆ‘ä»¬è¯•ç‚¹è¿™ä¸ªä½“éªŒæ—¶ï¼Œæˆ‘ä»¬å°†å­¦ä¹ äººä»¬å¦‚ä½•ä¸€èµ·ä½¿ç”¨ChatGPTï¼Œå¹¶å°†æ ¹æ®æ—©æœŸåé¦ˆç»§ç»­æ”¹è¿›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Monorepoæ€§èƒ½å™©æ¢¦ï¼šä¸€è¡Œé…ç½®è§£å†³VSCodeå¡é¡¿ä¸TSç±»å‹å´©æºƒ]]></title>    <link>https://juejin.cn/post/7572434032518807598</link>    <guid>https://juejin.cn/post/7572434032518807598</guid>    <pubDate>2025-11-15T03:44:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572434032518807598" data-draft-id="7572466174224465946" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Monorepoæ€§èƒ½å™©æ¢¦ï¼šä¸€è¡Œé…ç½®è§£å†³VSCodeå¡é¡¿ä¸TSç±»å‹å´©æºƒ"/> <meta itemprop="keywords" content="å‰ç«¯,Visual Studio Code,TypeScript"/> <meta itemprop="datePublished" content="2025-11-15T03:44:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="eason_fan"/> <meta itemprop="url" content="https://juejin.cn/user/2995517308808877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Monorepoæ€§èƒ½å™©æ¢¦ï¼šä¸€è¡Œé…ç½®è§£å†³VSCodeå¡é¡¿ä¸TSç±»å‹å´©æºƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2995517308808877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    eason_fan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T03:44:33.000Z" title="Sat Nov 15 2025 03:44:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    24
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Monorepoæ€§èƒ½å™©æ¢¦ï¼šä¸€è¡Œé…ç½®è§£å†³VSCodeå¡é¡¿ä¸TSç±»å‹å´©æºƒ</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼ŒMonorepoå·²æˆä¸ºç®¡ç†å¤§å‹é¡¹ç›®çš„æµè¡Œæ–¹æ¡ˆã€‚å®ƒé€šè¿‡å°†å¤šä¸ªé¡¹ç›®ã€åº“å’Œç»„ä»¶é›†ä¸­åœ¨åŒä¸€ä¸ªä»£ç ä»“åº“ä¸­ï¼Œç®€åŒ–äº†ä¾èµ–ç®¡ç†å’Œä»£ç å¤ç”¨ã€‚ç„¶è€Œï¼Œéšç€é¡¹ç›®è§„æ¨¡çš„æ‰©å¤§ï¼ŒMonorepoä¹Ÿå¯èƒ½å¸¦æ¥ä¸€äº›æ„æƒ³ä¸åˆ°çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p>æœ¬æ–‡å°†åˆ†äº«ä¸€ä¸ªæˆ‘åœ¨å®é™…é¡¹ç›®ä¸­é‡åˆ°çš„æ€§èƒ½å™©æ¢¦ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡ä¸€è¡Œç®€å•çš„VSCodeé…ç½®è§£å†³è¿™ä¸ªé—®é¢˜çš„ç»å†ã€‚</p>
<h3 data-id="heading-2">é—®é¢˜èƒŒæ™¯</h3>
<p>æˆ‘æ‰€åœ¨çš„é¡¹ç›®æ˜¯ä¸€ä¸ªå¤§å‹çš„Monorepoï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªä¸»é¡¹ç›®Aï¼Œä»¥åŠä»Aä¸­æ‹†åˆ†å‡ºçš„å­åŒ…Bå’Œåå‡ ä¸ªç»„ä»¶åº“C-Gã€‚é¡¹ç›®çš„å¼•ç”¨å…³ç³»å˜å¾—éå¸¸å¤æ‚ï¼ŒTypeScripté…ç½®ä¸ºç›´æ¥è¯»å–æºç è¿›è¡Œç±»å‹ç”Ÿæˆï¼Œè€Œä¸æ˜¯ä¾èµ–æ‰“åŒ…åçš„<code>dist</code>æ–‡ä»¶ã€‚</p>
<p>æ‹†åŒ…ä¹‹åï¼ŒVSCodeçš„æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼Œå‡ºç°äº†ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li><strong>è·¯å¾„è·³è½¬å¡é¡¿</strong>ï¼šæ¯æ¬¡å®‰è£…ä¾èµ–åï¼Œç¬¬ä¸€æ¬¡è·³è½¬åˆ°å®šä¹‰éœ€è¦ç­‰å¾…é•¿è¾¾ä¸€åˆ†é’Ÿçš„åˆå§‹åŒ–æ—¶é—´</li>
<li><strong>ç±»å‹æ¨æ–­å´©æºƒ</strong>ï¼šTypeScriptç±»å‹æç¤ºç»å¸¸å¤±æ•ˆï¼Œå¯¼è‡´å‡ºç°å¤§é‡<code>unsafe type error</code></li>
<li><strong>ç¼–è¾‘å™¨å‡æ­»</strong>ï¼šéœ€è¦é¢‘ç¹é‡å¯VSCodeæ‰èƒ½æ¢å¤æ­£å¸¸</li>
</ul>
<p>æˆ‘å°è¯•äº†å„ç§æ–¹æ³•ï¼ŒåŒ…æ‹¬è°ƒæ•´TypeScripté…ç½®ã€å‡çº§VSCodeã€ç¦ç”¨æ’ä»¶ç­‰ï¼Œä½†éƒ½æ— æµäºäº‹ã€‚</p>
<h3 data-id="heading-3">é—®é¢˜æ ¹æº</h3>
<p>ç»è¿‡åå¤æ’æŸ¥ï¼Œæˆ‘å‘ç°é—®é¢˜çš„æ ¹æºåœ¨äºVSCodeçš„<strong>æ–‡ä»¶ç›‘å¬æœºåˆ¶</strong>ã€‚</p>
<p>ç”±äºæˆ‘ä»¬çš„TypeScripté…ç½®æ˜¯ç›´æ¥è¯»å–æºç ï¼Œ<code>dist</code>ç›®å½•ä¸‹çš„æ‰“åŒ…æ–‡ä»¶å®é™…ä¸Šå¯¹ç±»å‹æ¨æ–­æ˜¯æ— ç”¨çš„ã€‚ç„¶è€Œï¼ŒVSCodeçš„æ–‡ä»¶ç›‘å¬å™¨ï¼ˆFile Watcherï¼‰é»˜è®¤ä¼šç›‘æ§é¡¹ç›®ä¸­çš„æ‰€æœ‰æ–‡ä»¶å˜åŒ–ï¼ŒåŒ…æ‹¬<code>dist</code>ç›®å½•ã€‚</p>
<p>å½“æˆ‘ä»¬åœ¨Monorepoä¸­è¿›è¡Œæ„å»ºæˆ–å®‰è£…ä¾èµ–æ—¶ï¼Œå¤§é‡çš„<code>dist</code>æ–‡ä»¶ä¼šè¢«ç”Ÿæˆæˆ–ä¿®æ”¹ï¼Œå¯¼è‡´VSCodeçš„æ–‡ä»¶ç›‘å¬å™¨ä¸å ªé‡è´Ÿï¼Œå ç”¨äº†å¤§é‡ç³»ç»Ÿèµ„æºï¼Œä»è€Œå¼•å‘äº†ä¸Šè¿°æ€§èƒ½é—®é¢˜ã€‚</p>
<h3 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h3>
<p>æœ€ç»ˆï¼Œæˆ‘é€šè¿‡åœ¨é¡¹ç›®çš„<code>.vscode/settings.json</code>æ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œç®€å•çš„é…ç½®ï¼Œå½»åº•è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"files.watcherExclude"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"**/dist/**"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™è¡Œé…ç½®çš„ä½œç”¨æ˜¯å‘Šè¯‰VSCodeçš„æ–‡ä»¶ç›‘å¬å™¨<strong>å¿½ç•¥æ‰€æœ‰<code>dist</code>ç›®å½•ä¸‹çš„æ–‡ä»¶å˜åŒ–</strong>ã€‚</p>
<h4 data-id="heading-5">ä¸ºä»€ä¹ˆè¿™ä¸ªé…ç½®æœ‰æ•ˆï¼Ÿ</h4>
<ol>
<li><strong>å‡å°‘ä¸å¿…è¦çš„ç›‘å¬</strong>ï¼šæ’é™¤äº†å¯¹<code>dist</code>ç›®å½•çš„ç›‘å¬ï¼Œå¤§å¤§å‡å°‘äº†VSCodeéœ€è¦å¤„ç†çš„æ–‡ä»¶å˜åŒ–äº‹ä»¶</li>
<li><strong>é‡Šæ”¾ç³»ç»Ÿèµ„æº</strong>ï¼šé™ä½äº†CPUå’Œå†…å­˜å ç”¨ï¼Œä½¿VSCodeèƒ½å¤Ÿæ›´æµç•…åœ°è¿è¡Œ</li>
<li><strong>ä¸“æ³¨æºç </strong>ï¼šè®©VSCodeä¸“æ³¨äºç›‘å¬æºç æ–‡ä»¶ï¼Œç¡®ä¿ç±»å‹æ¨æ–­å’Œè·¯å¾„è·³è½¬çš„æ€§èƒ½</li>
</ol>
<h3 data-id="heading-6">æ€»ç»“</h3>
<p>å¦‚æœä½ ä¹Ÿåœ¨ä½¿ç”¨Monorepoï¼Œå¹¶ä¸”é‡åˆ°äº†ç±»ä¼¼çš„æ€§èƒ½é—®é¢˜ï¼Œä¸å¦¨æ£€æŸ¥ä¸€ä¸‹ä½ çš„VSCodeé…ç½®ã€‚é€šè¿‡<code>files.watcherExclude</code>é…ç½®ï¼Œæ’é™¤æ‰ä¸éœ€è¦ç›‘å¬çš„ç›®å½•ï¼Œå¯èƒ½ä¼šç»™ä½ å¸¦æ¥æ„æƒ³ä¸åˆ°çš„æƒŠå–œã€‚</p>
<p>è¿™ä¸ªç»å†å‘Šè¯‰æˆ‘ä»¬ï¼Œæœ‰æ—¶å€™è§£å†³å¤æ‚é—®é¢˜çš„ç­”æ¡ˆå¯èƒ½å°±éšè—åœ¨æœ€ç®€å•çš„é…ç½®ä¸­ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ‘†è„±Monorepoæ€§èƒ½å™©æ¢¦ï¼Œäº«å—æ›´æµç•…çš„å¼€å‘ä½“éªŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3.4 æ­£å¼å‘å¸ƒï¼š5ä¸ªä¸å¯é”™è¿‡çš„æ€§èƒ½ä¼˜åŒ–ä¸Composition APIæ–°ç‰¹æ€§]]></title>    <link>https://juejin.cn/post/7572524368879452194</link>    <guid>https://juejin.cn/post/7572524368879452194</guid>    <pubDate>2025-11-16T04:16:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572524368879452194" data-draft-id="7572537221540790287" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3.4 æ­£å¼å‘å¸ƒï¼š5ä¸ªä¸å¯é”™è¿‡çš„æ€§èƒ½ä¼˜åŒ–ä¸Composition APIæ–°ç‰¹æ€§"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-16T04:16:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3.4 æ­£å¼å‘å¸ƒï¼š5ä¸ªä¸å¯é”™è¿‡çš„æ€§èƒ½ä¼˜åŒ–ä¸Composition APIæ–°ç‰¹æ€§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T04:16:24.000Z" title="Sun Nov 16 2025 04:16:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vue 3.4 æ­£å¼å‘å¸ƒï¼š5ä¸ªä¸å¯é”™è¿‡çš„æ€§èƒ½ä¼˜åŒ–ä¸Composition APIæ–°ç‰¹æ€§</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Vue.js ä½œä¸ºå½“ä»Šæœ€æµè¡Œçš„å‰ç«¯æ¡†æ¶ä¹‹ä¸€ï¼Œä¸€ç›´åœ¨ä¸æ–­æ¼”è¿›å’Œå®Œå–„ã€‚2023å¹´åº•ï¼ŒVueå›¢é˜Ÿæ­£å¼å‘å¸ƒäº†Vue 3.4ç‰ˆæœ¬ï¼ˆä»£å·"ğŸ€ Slam Dunk"ï¼‰ï¼Œè¿™æ¬¡æ›´æ–°å¸¦æ¥äº†å¤šé¡¹æ€§èƒ½ä¼˜åŒ–å’ŒComposition APIçš„å¢å¼ºåŠŸèƒ½ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æ5ä¸ªæœ€é‡è¦çš„æ€§èƒ½æ”¹è¿›å’Œ3ä¸ªComposition APIæ–°ç‰¹æ€§ï¼Œå¸®åŠ©å¼€å‘è€…å……åˆ†åˆ©ç”¨è¿™äº›æ”¹è¿›æ¥æ„å»ºæ›´é«˜æ•ˆçš„Vueåº”ç”¨ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€æ ¸å¿ƒæ€§èƒ½ä¼˜åŒ–è§£æ</h2>
<h3 data-id="heading-3">1. æ¨¡æ¿ç¼–è¯‘å™¨æ€§èƒ½æå‡40%</h3>
<p>Vue 3.4å¯¹æ¨¡æ¿ç¼–è¯‘å™¨è¿›è¡Œäº†å…¨é¢é‡å†™ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹æ¨¡æ¿çš„å¤„ç†ä¸Šè¡¨ç°å°¤ä¸ºçªå‡ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ—§ç‰ˆç¼–è¯‘å™¨å¤„ç†å¤æ‚v-forçš„é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processFor</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è¾ƒæ…¢çš„é€’å½’å¤„ç†</span>
}

<span class="hljs-comment">// æ–°ç‰ˆé‡‡ç”¨çº¿æ€§å¤„ç†æ–¹å¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">optimizeFor</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åŸºäºé™æ€åˆ†æçš„ä¼˜åŒ–è·¯å¾„</span>
}
</code></pre>
<p>å…³é”®æŠ€æœ¯ç‚¹ï¼š</p>
<ul>
<li>ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ç”Ÿæˆé€Ÿåº¦æå‡30%</li>
<li>SSRç¼–è¯‘æ—¶å†…å­˜å ç”¨å‡å°‘50%</li>
<li>v-if/v-foråµŒå¥—å¤„ç†é‡‡ç”¨æ–°çš„å¯å‘å¼ç®—æ³•</li>
</ul>
<p>å®æµ‹æ•°æ®è¡¨æ˜ï¼Œåœ¨ä¸€ä¸ªåŒ…å«1000+èŠ‚ç‚¹çš„å¤æ‚è¡¨å•åœºæ™¯ä¸‹ï¼Œç¼–è¯‘æ—¶é—´ä»120msé™è‡³72msã€‚</p>
<h3 data-id="heading-4">2. Reactivityç³»ç»Ÿå¾®ä¼˜åŒ–</h3>
<p>å“åº”å¼ç³»ç»Ÿçš„åº•å±‚å®ç°æœ‰è¿™äº›æ”¹è¿›ï¼š</p>
<ul>
<li>Proxy handlerè°ƒç”¨å‡å°‘15%</li>
<li>track/tiggeræ“ä½œä½¿ç”¨æ›´è½»é‡çš„æ•°æ®ç»“æ„</li>
<li>effectè°ƒåº¦å™¨å¼•å…¥ä¼˜å…ˆçº§é˜Ÿåˆ—</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–°ç‰ˆå“åº”å¼è·Ÿè¸ªç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key</span>) {
    <span class="hljs-title function_">track</span>(target, key) <span class="hljs-comment">// æ›´å¿«çš„è·¯å¾„æŸ¥æ‰¾</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(...<span class="hljs-variable language_">arguments</span>)
  }
})
</code></pre>
<h3 data-id="heading-5">3. Patch Flagä¼˜åŒ–ç­–ç•¥è°ƒæ•´</h3>
<p>è™šæ‹ŸDOMçš„diffingç®—æ³•æ›´æ–°ï¼š</p>
<ul>
<li>dynamicChildrenå¤„ç†é€»è¾‘é‡æ„</li>
<li>Block Treeéå†é¡ºåºä¼˜åŒ–</li>
<li>FragmentèŠ‚ç‚¹ç‰¹æ®Šå¤„ç†</li>
</ul>
<pre><code class="hljs language-jsx" lang="jsx">&lt;div&gt;
  &lt;!-- <span class="hljs-keyword">static</span> node --&gt;
  
&lt;/div&gt;
</code></pre>
<h2 data-id="heading-6">Composition APIé©å‘½æ€§æ”¹è¿›</h2>
<h3 data-id="heading-7">setupè¯­æ³•ç³–çš„é‡å¤§å‡çº§</h3>
<pre><code class="hljs language-typescript" lang="typescript"/></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PandaCoderï¼šæˆ‘çš„ä¸ªäººå¼€å‘è€…å·¥å…·è¿›åŒ–ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7572525491538624554</link>    <guid>https://juejin.cn/post/7572525491538624554</guid>    <pubDate>2025-11-16T04:31:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572525491538624554" data-draft-id="7572524368879484962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" PandaCoderï¼šæˆ‘çš„ä¸ªäººå¼€å‘è€…å·¥å…·è¿›åŒ–ä¹‹è·¯"/> <meta itemprop="keywords" content="åç«¯,IntelliJ IDEA,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-16T04:31:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/4257747754552599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             PandaCoderï¼šæˆ‘çš„ä¸ªäººå¼€å‘è€…å·¥å…·è¿›åŒ–ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4257747754552599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T04:31:15.000Z" title="Sun Nov 16 2025 04:31:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä»ä¸ªäººé¡¹ç›®åˆ°å¼€å‘è€…å·¥å…·çš„è½¬å˜</h2>
<p>åœ¨æŠ€æœ¯é¢†åŸŸï¼Œæˆ‘å¸¸å¸¸æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šä»€ä¹ˆæ ·çš„å·¥å…·æ‰èƒ½çœŸæ­£å¸®åŠ©å¼€å‘è€…ï¼Ÿæˆ‘æ„è¯†åˆ°çœŸæ­£çš„ä»·å€¼ä¸åœ¨äºåŠŸèƒ½çš„æ•°é‡ï¼Œè€Œåœ¨äºè¿™äº›åŠŸèƒ½æ˜¯å¦çœŸæ­£è§£å†³äº†ç”¨æˆ·çš„ç—›ç‚¹ã€‚ä½œä¸ºPandaCoderçš„ç‹¬ç«‹å¼€å‘è€…ï¼Œæˆ‘çš„æ ¸å¿ƒç†å¿µæ­£æ˜¯å»ºç«‹åœ¨è¿™ä¸€è®¤çŸ¥ä¹‹ä¸Šâ€”â€”<strong>ä¸å…¶å †ç ŒåŠŸèƒ½ï¼Œä¸å¦‚å€¾å¬ç”¨æˆ·çš„å£°éŸ³</strong>ã€‚</p>
<h3 data-id="heading-1">å·¥å…·çš„æœ¬è´¨</h3>
<p>æ­£å¦‚çº³ç“¦å°”æ‰€è¨€ï¼š"å·¥å…·åº”è¯¥ä¸ºä½ å·¥ä½œï¼Œè€Œä¸æ˜¯ä½ ä¸ºå·¥å…·å·¥ä½œã€‚"æˆ‘è®¾è®¡PandaCoderçš„åˆè¡·æ˜¯åˆ›å»ºä¸€ä¸ªèƒ½å¤ŸçœŸæ­£ç†è§£å¼€å‘è€…éœ€æ±‚çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œè€Œä¸æ˜¯åˆä¸€ä¸ªéœ€è¦å¤æ‚é…ç½®çš„è´Ÿæ‹…ã€‚</p>
<h2 data-id="heading-2">ç”¨æˆ·åé¦ˆï¼šäº§å“è¿›åŒ–çš„æ ¸å¿ƒé©±åŠ¨åŠ›</h2>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆå»ºè®®æ¯”æ‰“èµæ›´é‡è¦ï¼Ÿ</h3>
<p>åœ¨PandaCoderçš„è®¾è®¡ä¸­ï¼Œæˆ‘åˆ»æ„å°†"âœï¸ æ’ä»¶çš„å»ºè®®"åŠŸèƒ½ç½®äº"â˜•ï¸ è¯·ä½œè€…å–æ¯"ä¹‹å‰ã€‚è¿™ä¸æ˜¯å¶ç„¶ï¼Œè€Œæ˜¯åŸºäºä¸€ä¸ªæ·±åˆ»çš„æ´å¯Ÿï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d818826f430d44e9b279fc77876412b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763872275&amp;x-signature=eQdpb9YiOrepJUOiwEYdggGtOWM%3D" alt="" loading="lazy"/></p>
<p><strong>ç”¨æˆ·çš„å»ºè®®æ˜¯äº§å“è¿›åŒ–çš„ç‡ƒæ–™ï¼Œè€Œæ‰“èµåªæ˜¯è¿™ä¸ªè¿‡ç¨‹çš„å‰¯äº§å“ã€‚</strong></p>
<p>å½“å¼€å‘è€…æ„¿æ„èŠ±æ—¶é—´æä¾›åé¦ˆæ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æŠ•èµ„è¿™ä¸ªå·¥å…·çš„æœªæ¥ã€‚è¿™ç§æŠ•èµ„è¿œæ¯”é‡‘é’±æ›´æœ‰ä»·å€¼ï¼Œå› ä¸ºå®ƒåŒ…å«äº†çœŸå®çš„ç”¨æˆ·ä½“éªŒå’Œéœ€æ±‚æ´å¯Ÿã€‚</p>
<h3 data-id="heading-4">åé¦ˆç³»ç»Ÿçš„è®¾è®¡å“²å­¦</h3>
<p>æˆ‘è®¾è®¡çš„åé¦ˆç³»ç»Ÿé‡‡ç”¨äº†ç²¾å¿ƒè®¾è®¡çš„äº¤äº’ä½“éªŒï¼š</p>
<ul>
<li><strong>æ™ºèƒ½é™æµæœºåˆ¶</strong>ï¼šæ¯æ—¥6æ¬¡åé¦ˆé™åˆ¶ï¼Œç¡®ä¿æ¯ä¸€æ¡å»ºè®®éƒ½æ˜¯ç»è¿‡æ·±æ€ç†Ÿè™‘çš„</li>
<li><strong>åˆ†ç±»åé¦ˆ</strong>ï¼šåŠŸèƒ½å»ºè®®ã€Bugåé¦ˆã€ä½¿ç”¨ä½“éªŒã€å…¶ä»–ï¼Œè®©åé¦ˆæ›´æœ‰é’ˆå¯¹æ€§</li>
<li><strong>å³æ—¶ç¡®è®¤</strong>ï¼šç”¨æˆ·æäº¤åç«‹å³æ”¶åˆ°ç¡®è®¤ï¼Œå»ºç«‹åé¦ˆé—­ç¯</li>
</ul>
<p>è¿™ç§è®¾è®¡ä½“ç°äº†å²è’‚æ–‡Â·å·´ç‰¹åˆ©ç‰¹å¼ºè°ƒçš„"ç”¨æˆ·ä½“éªŒå³å“ç‰Œ"ç†å¿µã€‚</p>
<h2 data-id="heading-5">åŠŸèƒ½æ¼”è¿›ï¼šä»ç”¨æˆ·éœ€æ±‚å‡ºå‘</h2>
<h3 data-id="heading-6">ä¸­æ–‡ç¼–ç¨‹åŠ©æ‰‹çš„è¯ç”Ÿ</h3>
<p>æœ€åˆçš„PandaCoderåªæ˜¯ä¸€ä¸ªç®€å•çš„ç¿»è¯‘å·¥å…·ã€‚ä½†é€šè¿‡ç”¨æˆ·åé¦ˆï¼Œæˆ‘å‘ç°ä¸­å›½å¼€å‘è€…çœŸæ­£éœ€è¦çš„æ˜¯<strong>ä»ä¸­æ–‡æ€ç»´åˆ°è‹±æ–‡ä»£ç çš„é¡ºç•…è½¬æ¢</strong>ï¼Œè€Œä¸ä»…ä»…æ˜¯æ–‡å­—ç¿»è¯‘ã€‚</p>
<p>ç”¨æˆ·å»ºè®®ä¿ƒä½¿æˆ‘å¼€å‘äº†ï¼š</p>
<ul>
<li>æ™ºèƒ½å‘½åè½¬æ¢ï¼ˆå°é©¼å³°ã€å¤§é©¼å³°ã€å¤§å†™å¸¦ä¸‹åˆ’çº¿ï¼‰</li>
<li>ä¸­æ–‡ç±»åè‡ªåŠ¨ç”Ÿæˆ</li>
<li>å¤šçº§ç¿»è¯‘å¼•æ“ï¼ˆå›½å†…å¤§æ¨¡å‹ &gt; Googleç¿»è¯‘ &gt; ç™¾åº¦ç¿»è¯‘ï¼‰</li>
</ul>
<h3 data-id="heading-7">Jenkins Pipelineæ”¯æŒçš„è¿›åŒ–</h3>
<p>æœ€åˆåªæ˜¯è¯­æ³•é«˜äº®ï¼Œä½†ç”¨æˆ·åé¦ˆæ­ç¤ºäº†æ›´æ·±å±‚æ¬¡çš„éœ€æ±‚ï¼šå¼€å‘è€…åœ¨ç¼–å†™Pipelineæ—¶éœ€è¦<strong>æ™ºèƒ½è¡¥å…¨ã€ç¯å¢ƒå˜é‡ç®¡ç†ã€æ–‡æ¡£æ”¯æŒ</strong>ã€‚</p>
<p>è¿™äº›åŠŸèƒ½ä¸æ˜¯å‡­ç©ºæƒ³è±¡çš„ï¼Œè€Œæ˜¯æ¥è‡ªçœŸå®ç”¨æˆ·çš„ç—›ç‚¹åé¦ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1015672231340d7865487387b6ad129~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763872275&amp;x-signature=mIJvodtmHcmN%2BFgM0Id6U7REenc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">SpringBooté…ç½®çš„å¯è§†åŒ–</h3>
<p>é€šè¿‡ç”¨æˆ·å»ºè®®ï¼Œæˆ‘å®ç°äº†æŠ€æœ¯æ ˆçš„æ™ºèƒ½è¯†åˆ«å’Œå¯è§†åŒ–æ˜¾ç¤ºã€‚ç°åœ¨å¼€å‘è€…æ‰“å¼€é…ç½®æ–‡ä»¶æ—¶ï¼Œèƒ½å¤Ÿç›´è§‚çœ‹åˆ°ä½¿ç”¨çš„æŠ€æœ¯ç»„ä»¶ï¼Œå¤§å¤§æå‡äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/312d7b796b3046a6b7196b0180b0bdc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763872275&amp;x-signature=%2BjLXoq98pShrk%2FynCPl8lvRWMvU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">æ•°æ®é©±åŠ¨çš„äº§å“è¿­ä»£</h2>
<h3 data-id="heading-10">Gitç»Ÿè®¡åˆ†æåŠŸèƒ½</h3>
<p>ç”¨æˆ·åé¦ˆæ˜¾ç¤ºï¼Œå›¢é˜Ÿéœ€è¦æ›´å¥½çš„ä»£ç åä½œæ´å¯Ÿã€‚æˆ‘å¼€å‘äº†ï¼š</p>
<ul>
<li>å¤šç»´åº¦ä»£ç ç»Ÿè®¡</li>
<li>å¯è§†åŒ–å›¾è¡¨å±•ç¤º</li>
<li>è‡ªåŠ¨é‚®ä»¶æŠ¥å‘Šç³»ç»Ÿ</li>
</ul>
<p>è¿™äº›åŠŸèƒ½å¸®åŠ©å›¢é˜Ÿç®¡ç†è€…äº†è§£å¼€å‘è¿›åº¦ï¼Œè¯†åˆ«ç“¶é¢ˆï¼Œä¼˜åŒ–åä½œæµç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/006903a9482d42019a279913d08d8c21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763872275&amp;x-signature=ZbMqjMjCesArBX6Eq1lz%2B%2Bmcf0c%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">å®æ—¶ç›‘æ§ä½“ç³»çš„å»ºç«‹</h3>
<p>åŸºäºç”¨æˆ·å¯¹è°ƒè¯•æ•ˆç‡çš„éœ€æ±‚ï¼Œæˆ‘æ„å»ºäº†å®Œæ•´çš„ç›‘æ§ä½“ç³»ï¼š</p>
<ul>
<li>Elasticsearch DSLç›‘æ§</li>
<li>SQLæ‰§è¡Œç›‘æ§</li>
<li>APIè°ƒç”¨é“¾è¿½è¸ª</li>
</ul>
<p>è¿™äº›åŠŸèƒ½è®©å¼€å‘è€…èƒ½å¤Ÿå®æ—¶äº†è§£åº”ç”¨è¿è¡ŒçŠ¶æ€ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6090af814703472184ad9e6cf228f43f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763872275&amp;x-signature=FbR8BAQcpHP7QV8qg0dwNhiffj0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">ç¤¾åŒºé©±åŠ¨çš„æŠ€æœ¯å†³ç­–</h2>
<h3 data-id="heading-13">ç¿»è¯‘å¼•æ“çš„é€‰æ‹©</h3>
<p>æœ€åˆæˆ‘åªæ”¯æŒç™¾åº¦ç¿»è¯‘ï¼Œä½†ç”¨æˆ·åé¦ˆæ˜¾ç¤ºï¼š</p>
<ul>
<li>å›½å†…å¤§æ¨¡å‹åœ¨æŸäº›åœºæ™¯ä¸‹ç¿»è¯‘è´¨é‡æ›´é«˜</li>
<li>Googleç¿»è¯‘åœ¨å›½é™…åŒ–é¡¹ç›®ä¸­æœ‰ç‹¬ç‰¹ä¼˜åŠ¿</li>
<li>éœ€è¦å¤šå¼•æ“å¤‡ç”¨ç¡®ä¿æœåŠ¡ç¨³å®šæ€§</li>
</ul>
<p>è¿™äº›åé¦ˆä¿ƒä½¿æˆ‘å»ºç«‹äº†ä¸‰çº§ç¿»è¯‘å¼•æ“ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-14">AIåŠ©æ‰‹åŠŸèƒ½çš„æ‰©å±•</h3>
<p>ç”¨æˆ·å»ºè®®è®©æˆ‘æ„è¯†åˆ°ï¼šå¼€å‘è€…éœ€è¦çš„ä¸åªæ˜¯ç¿»è¯‘ï¼Œè¿˜æœ‰<strong>ä»£ç å®¡æŸ¥ã€æŠ€æœ¯å’¨è¯¢ã€å­¦ä¹ è¾…å¯¼</strong>ç­‰AIèƒ½åŠ›ã€‚</p>
<p>è¿™ä¿ƒä½¿æˆ‘é›†æˆäº†å¤šç§AIæ¨¡å‹ï¼ŒåŒ…æ‹¬OpenAIã€Ollamaæœ¬åœ°éƒ¨ç½²ã€å›½å†…å¤§æ¨¡å‹ç­‰ã€‚</p>
<h2 data-id="heading-15">æŠ€æœ¯å®ç°èƒŒåçš„æ€è€ƒ</h2>
<h3 data-id="heading-16">æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒçš„å¹³è¡¡</h3>
<p>åœ¨å®ç°åŠŸèƒ½æ—¶ï¼Œæˆ‘å§‹ç»ˆéµå¾ªçº³ç“¦å°”çš„å»ºè®®ï¼š"åœ¨æŠ€æœ¯å†³ç­–ä¸­ï¼Œç®€å•æ€§å¾€å¾€æ¯”å¤æ‚æ€§æ›´æœ‰ä»·å€¼ã€‚"</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>ä½¿ç”¨ConcurrentHashMapç¡®ä¿çº¿ç¨‹å®‰å…¨</li>
<li>å®ç°å»¶è¿ŸåŠ è½½ä¼˜åŒ–æ€§èƒ½</li>
<li>åˆç†çš„ç¼“å­˜ç­–ç•¥æå‡å“åº”é€Ÿåº¦</li>
</ul>
<h3 data-id="heading-17">å¯æ‰©å±•æ€§è®¾è®¡</h3>
<p>æˆ‘é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œç¡®ä¿æ–°åŠŸèƒ½èƒ½å¤Ÿæ— ç¼é›†æˆã€‚è¿™ç§è®¾è®¡ç†å¿µæ¥æºäºç”¨æˆ·å¯¹æœªæ¥æ‰©å±•æ€§çš„éœ€æ±‚é¢„æœŸã€‚</p>
<h2 data-id="heading-18">ç”¨æˆ·å‚ä¸çš„ä»·å€¼åˆ›é€ </h2>
<h3 data-id="heading-19">ä»ä½¿ç”¨è€…åˆ°å…±å»ºè€…</h3>
<p>PandaCoderçš„æˆåŠŸæ¡ˆä¾‹è¯æ˜ï¼š<strong>å½“ç”¨æˆ·å‚ä¸äº§å“è®¾è®¡æ—¶ï¼Œä»–ä»¬ä»è¢«åŠ¨çš„ä½¿ç”¨è€…è½¬å˜ä¸ºç§¯æçš„å…±å»ºè€…ã€‚</strong></p>
<p>è¿™ç§è½¬å˜å¸¦æ¥çš„ä»·å€¼æ˜¯åŒå‘çš„ï¼š</p>
<ul>
<li>ç”¨æˆ·è·å¾—æ›´ç¬¦åˆéœ€æ±‚çš„å·¥å…·</li>
<li>æˆ‘è·å¾—çœŸå®çš„ç”¨æˆ·æ´å¯Ÿ</li>
<li>æ•´ä¸ªç”Ÿæ€å®ç°è‰¯æ€§å¾ªç¯</li>
</ul>
<h3 data-id="heading-20">åé¦ˆçš„ä¹˜æ•°æ•ˆåº”</h3>
<p>ä¸€ä¸ªç”¨æˆ·çš„å»ºè®®å¯èƒ½å½±å“æ•°åƒåå…¶ä»–ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒã€‚è¿™ç§ä¹˜æ•°æ•ˆåº”æ˜¯å¼€æºç¤¾åŒºæœ€å¼ºå¤§çš„åŠ›é‡ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-21">æœªæ¥å±•æœ›ï¼šåŸºäºç”¨æˆ·éœ€æ±‚çš„æŒç»­è¿›åŒ–</h2>
<h3 data-id="heading-22">çŸ­æœŸè§„åˆ’</h3>
<p>åŸºäºå½“å‰ç”¨æˆ·åé¦ˆï¼Œæˆ‘è®¡åˆ’ï¼š</p>
<ul>
<li>å¢å¼ºAIåŠ©æ‰‹åŠŸèƒ½ï¼ˆä»£ç ç”Ÿæˆã€é‡æ„å»ºè®®ï¼‰</li>
<li>ä¼˜åŒ–Gitç»Ÿè®¡å›¾è¡¨æ ·å¼</li>
<li>æ”¹è¿›é‚®ä»¶æ¨¡æ¿è‡ªå®šä¹‰åŠŸèƒ½</li>
</ul>
<h3 data-id="heading-23">ä¸­é•¿æœŸæ„¿æ™¯</h3>
<p>ç”¨æˆ·å»ºè®®æŒ‡å¼•æˆ‘å‘æ›´æ™ºèƒ½åŒ–çš„æ–¹å‘å‘å±•ï¼š</p>
<ul>
<li>ä»£ç æ™ºèƒ½åˆ†æä¸å»ºè®®ç³»ç»Ÿ</li>
<li>é¡¹ç›®å¥åº·åº¦è¯„ä¼°æŠ¥å‘Š</li>
<li>å›¢é˜Ÿåä½œæ•ˆç‡åˆ†æå·¥å…·</li>
</ul>
<h2 data-id="heading-24">ç»“è¯­ï¼šå…±å»ºæ›´å¥½çš„å¼€å‘è€…å·¥å…·</h2>
<p>PandaCoderçš„æˆé•¿å†ç¨‹å°è¯äº†ä¸€ä¸ªé‡è¦è§‚ç‚¹ï¼š<strong>æœ€å¥½çš„äº§å“åŠŸèƒ½æ¥æºäºçœŸå®ç”¨æˆ·çš„éœ€æ±‚ã€‚</strong></p>
<p>æˆ‘ç›¸ä¿¡ï¼ŒæŠ€æœ¯å·¥å…·çš„ä»·å€¼ä¸åœ¨äºå®ƒæ‹¥æœ‰å¤šå°‘åŠŸèƒ½ï¼Œè€Œåœ¨äºå®ƒæ˜¯å¦çœŸæ­£è§£å†³äº†å¼€å‘è€…çš„é—®é¢˜ã€‚è€Œäº†è§£è¿™äº›é—®é¢˜çš„å”¯ä¸€é€”å¾„ï¼Œå°±æ˜¯å€¾å¬ç”¨æˆ·çš„å£°éŸ³ã€‚</p>
<p>æ­£å¦‚å²è’‚æ–‡Â·å·´ç‰¹åˆ©ç‰¹æ‰€è¯´ï¼š"æˆåŠŸçš„ä¼ä¸šä¸æ˜¯é‚£äº›æ‹¥æœ‰æœ€å¥½äº§å“çš„ä¼ä¸šï¼Œè€Œæ˜¯é‚£äº›æœ€äº†è§£å®¢æˆ·éœ€æ±‚çš„ä¼ä¸šã€‚"</p>
<p>æˆ‘é‚€è¯·æ¯ä¸€ä½å¼€å‘è€…å‚ä¸PandaCoderçš„è¿›åŒ–ä¹‹æ—…ã€‚æ‚¨çš„æ¯ä¸€ä¸ªå»ºè®®éƒ½å¯èƒ½æˆä¸ºä¸‹ä¸€ä¸ªé‡è¦åŠŸèƒ½çš„çµæ„Ÿæ¥æºã€‚</p>
<hr/>
<p><strong>å‚ä¸æ–¹å¼ï¼š</strong></p>
<ul>
<li>åœ¨IDEä¸­ç‚¹å‡»"âœï¸ æ’ä»¶çš„å»ºè®®"æäº¤åé¦ˆ</li>
<li>é€šè¿‡GitHub Issueså‚ä¸è®¨è®º</li>
</ul>
<hr/>
<p><em>èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´ï¼Œç”Ÿæˆå¼AIåº”ç”¨å·¥ç¨‹å¸ˆ(é«˜çº§)è®¤è¯ï¼Œé˜¿é‡Œäº‘åšå®¢ä¸“å®¶ï¼Œä¸“æ³¨äºä¼ä¸šçº§Javaå¼€å‘å’ŒAIåº”ç”¨å¼€å‘ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ArrayUtilsï¼šJavaæ•°ç»„æ“ä½œçš„ç‘å£«å†›åˆ€]]></title>    <link>https://juejin.cn/post/7572534419880034339</link>    <guid>https://juejin.cn/post/7572534419880034339</guid>    <pubDate>2025-11-16T03:13:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572534419880034339" data-draft-id="7572534419880017955" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ArrayUtilsï¼šJavaæ•°ç»„æ“ä½œçš„ç‘å£«å†›åˆ€"/> <meta itemprop="keywords" content="åç«¯,è®¾è®¡,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-16T03:13:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™½è¡£é¸½å­"/> <meta itemprop="url" content="https://juejin.cn/user/3072451409619223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ArrayUtilsï¼šJavaæ•°ç»„æ“ä½œçš„ç‘å£«å†›åˆ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3072451409619223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™½è¡£é¸½å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T03:13:02.000Z" title="Sun Nov 16 2025 03:13:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. å‰è¨€</h3>
<blockquote>
<p>æœ¬æ–‡ä»‹ç»çš„ ArrayUtils ä»¥org.apache.commons.collections4.ArrayUtils ä¸ºä¾‹</p>
<p>æºä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fcommons-collections%2Fblob%2Fmaster%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fcommons%2Fcollections4%2FArrayUtils.java" target="_blank" title="https://github.com/apache/commons-collections/blob/master/src/main/java/org/apache/commons/collections4/ArrayUtils.java" ref="nofollow noopener noreferrer">org.apache.commons.collections4.ArrayUtils</a></p>
<p>è‡ªå®šä¹‰ç‰¹å¾å¯ä»¥åœ¨è‡ªå·±æœåŠ¡å†…å®ç°</p>
</blockquote>
<p>åœ¨Javaåº”ç”¨å¼€å‘ä¸­ï¼Œæ•°ç»„æ“ä½œæ˜¯æˆ‘ä»¬æ—¥å¸¸ç¼–ç çš„åŸºç¡€ä»»åŠ¡ä¹‹ä¸€ã€‚ä½ æ˜¯å¦æ›¾å†™è¿‡ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼Ÿ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">findUser</span><span class="hljs-params">(String[] users, String targetUser)</span> {
    <span class="hljs-keyword">if</span> (users == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; users.length; i++) {
        <span class="hljs-keyword">if</span> (targetUser == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (users[i] == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (targetUser.equals(users[i])) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">findUserIndex</span><span class="hljs-params">(String[] users, String targetUser)</span> {
    <span class="hljs-keyword">if</span> (users == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; users.length; i++) {
        <span class="hljs-comment">// ... ç±»ä¼¼çš„é‡å¤ä»£ç </span>
    }
    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
}
</code></pre>
<p>è¿™ç§æ‰‹åŠ¨éå†æ•°ç»„çš„æ–¹å¼ä¸ä»…ç¹çã€é‡å¤ï¼Œæ›´é‡è¦çš„æ˜¯éœ€è¦å¤„ç†å„ç§è¾¹ç•Œæƒ…å†µï¼ˆå¦‚ç©ºæ•°ç»„ã€nullå…ƒç´ ã€èµ·å§‹ä½ç½®ç­‰ï¼‰ï¼Œå®¹æ˜“å‡ºé”™ä¸”ä»£ç å¯è¯»æ€§å·®ã€‚ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„å·¥å…·ç±»å¯ä»¥å°è£…è¿™äº›é€šç”¨é€»è¾‘ï¼Œè®©æ•°ç»„æ“ä½œå˜å¾—ç®€å•è€Œå®‰å…¨ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æArrayUtilså·¥å…·ç±»çš„å®ç°åŸç†ï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡ç®€æ´çš„APIè§£å†³æ•°ç»„æ“ä½œçš„å¸¸è§ç—›ç‚¹ã€‚</p>
<h3 data-id="heading-1">2. å¸¸ç”¨æ–¹æ³•</h3>
<h4 data-id="heading-2">2.1 åŒ…å«æ£€æŸ¥æ–¹æ³•</h4>
<h5 data-id="heading-3">2.1.1 æ–¹æ³•ç­¾å</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(Object[] array, Object objectToFind)</span>
</code></pre>
<h5 data-id="heading-4">2.1.2 åº”ç”¨ç¤ºèŒƒ</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayUtilsDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        String[] fruits = {<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"orange"</span>, <span class="hljs-literal">null</span>};
        
        <span class="hljs-comment">// æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</span>
        System.out.println(ArrayUtils.contains(fruits, <span class="hljs-string">"apple"</span>)); <span class="hljs-comment">// true</span>
        System.out.println(ArrayUtils.contains(fruits, <span class="hljs-string">"grape"</span>)); <span class="hljs-comment">// false</span>
        System.out.println(ArrayUtils.contains(fruits, <span class="hljs-literal">null</span>));    <span class="hljs-comment">// true</span>
        
        <span class="hljs-comment">// å¤„ç†ç©ºæ•°ç»„åœºæ™¯</span>
        String[] emptyArray = <span class="hljs-literal">null</span>;
        System.out.println(ArrayUtils.contains(emptyArray, <span class="hljs-string">"test"</span>)); <span class="hljs-comment">// false</span>
    }
}
</code></pre>
<h5 data-id="heading-5">2.1.3 å…³é”®æºç </h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(Object[] array, Object objectToFind)</span> {
    <span class="hljs-keyword">return</span> indexOf(array, objectToFind) != -<span class="hljs-number">1</span>;
}
</code></pre>
<h4 data-id="heading-6">2.2 ç´¢å¼•æŸ¥æ‰¾æ–¹æ³•</h4>
<h5 data-id="heading-7">2.2.1 æ–¹æ³•ç­¾å</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-type">int</span> <span class="hljs-title function_">indexOf</span><span class="hljs-params">(T[] array, Object objectToFind)</span>
<span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">indexOf</span><span class="hljs-params">(Object[] array, Object objectToFind, <span class="hljs-type">int</span> startIndex)</span>
</code></pre>
<h5 data-id="heading-8">2.2.2 åº”ç”¨ç¤ºèŒƒ</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IndexOfDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Integer[] numbers = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>};
        
        <span class="hljs-comment">// æŸ¥æ‰¾å…ƒç´ é¦–æ¬¡å‡ºç°ä½ç½®</span>
        System.out.println(ArrayUtils.indexOf(numbers, <span class="hljs-number">2</span>));     <span class="hljs-comment">// 1</span>
        System.out.println(ArrayUtils.indexOf(numbers, <span class="hljs-number">10</span>));    <span class="hljs-comment">// -1</span>
        System.out.println(ArrayUtils.indexOf(numbers, <span class="hljs-literal">null</span>));  <span class="hljs-comment">// 5</span>
        
        <span class="hljs-comment">// ä»æŒ‡å®šä½ç½®å¼€å§‹æŸ¥æ‰¾</span>
        System.out.println(ArrayUtils.indexOf(numbers, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>));  <span class="hljs-comment">// 3</span>
        System.out.println(ArrayUtils.indexOf(numbers, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>));  <span class="hljs-comment">// 6</span>
        
        <span class="hljs-comment">// å¤„ç†è¾¹ç•Œæƒ…å†µ</span>
        System.out.println(ArrayUtils.indexOf(<span class="hljs-literal">null</span>, <span class="hljs-number">1</span>));        <span class="hljs-comment">// -1</span>
    }
}
</code></pre>
<h5 data-id="heading-9">2.2.3 å…³é”®æºç </h5>
<blockquote>
<p>æœ¬è´¨æ¯”è¾ƒçš„æ˜¯equalsæ–¹æ³•ï¼Œå¦‚æœ‰éœ€è¦å¯ä»¥é‡å†™equalsæ–¹æ³•</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">indexOf</span><span class="hljs-params">(Object[] array, Object objectToFind, <span class="hljs-type">int</span> startIndex)</span> {
    <span class="hljs-keyword">if</span> (array == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (startIndex &lt; <span class="hljs-number">0</span>) {
            startIndex = <span class="hljs-number">0</span>;
        }

        <span class="hljs-keyword">if</span> (objectToFind == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> startIndex; i &lt; array.length; ++i) {
                <span class="hljs-keyword">if</span> (array[i] == <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">return</span> i;
                }
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> startIndex; i &lt; array.length; ++i) {
                <span class="hljs-keyword">if</span> (objectToFind.equals(array[i])) {
                    <span class="hljs-keyword">return</span> i;
                }
            }
        }

        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
}
</code></pre>
<h2 data-id="heading-10">3. ä¸Stream APIçš„å¯¹æ¯”</h2>
<h3 data-id="heading-11">3.1 ç›¸åŒåŠŸèƒ½çš„ä¸åŒå®ç°</h3>
<p><strong>ArrayUtilsæ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ£€æŸ¥åŒ…å«</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">contains</span> <span class="hljs-operator">=</span> ArrayUtils.contains(array, target);

<span class="hljs-comment">// æŸ¥æ‰¾ç´¢å¼•</span>
<span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> ArrayUtils.indexOf(array, target);
</code></pre>
<p><strong>Stream APIæ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ£€æŸ¥åŒ…å«</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">contains</span> <span class="hljs-operator">=</span> Arrays.stream(array)
                        .anyMatch(element -&gt; Objects.equals(element, target));

<span class="hljs-comment">// æŸ¥æ‰¾ç´¢å¼•ï¼ˆè¾ƒä¸ºç¹çï¼‰</span>
<span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> IntStream.range(<span class="hljs-number">0</span>, array.length)
                    .filter(i -&gt; Objects.equals(array[i], target))
                    .findFirst()
                    .orElse(-<span class="hljs-number">1</span>);
</code></pre>
<h3 data-id="heading-12">3.2 æ€§èƒ½å¯¹æ¯”</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceComparison</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        String[] largeArray = createLargeArray(<span class="hljs-number">100000</span>);
        
        <span class="hljs-comment">// ArrayUtilsæ€§èƒ½æµ‹è¯•</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">start1</span> <span class="hljs-operator">=</span> System.nanoTime();
        <span class="hljs-type">boolean</span> <span class="hljs-variable">result1</span> <span class="hljs-operator">=</span> ArrayUtils.contains(largeArray, <span class="hljs-string">"target"</span>);
        <span class="hljs-type">long</span> <span class="hljs-variable">time1</span> <span class="hljs-operator">=</span> System.nanoTime() - start1;
        
        <span class="hljs-comment">// Stream APIæ€§èƒ½æµ‹è¯•</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">start2</span> <span class="hljs-operator">=</span> System.nanoTime();
        <span class="hljs-type">boolean</span> <span class="hljs-variable">result2</span> <span class="hljs-operator">=</span> Arrays.stream(largeArray)
                               .anyMatch(<span class="hljs-string">"target"</span>::equals);
        <span class="hljs-type">long</span> <span class="hljs-variable">time2</span> <span class="hljs-operator">=</span> System.nanoTime() - start2;
        
        System.out.println(<span class="hljs-string">"ArrayUtilsè€—æ—¶: "</span> + time1 + <span class="hljs-string">"ns"</span>);
        System.out.println(<span class="hljs-string">"Stream APIè€—æ—¶: "</span> + time2 + <span class="hljs-string">"ns"</span>);
    }
}
</code></pre>
<h3 data-id="heading-13">3.3 é€‚ç”¨åœºæ™¯åˆ†æ</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>ArrayUtils</th><th>Stream API</th></tr></thead><tbody><tr><td><strong>ä»£ç ç®€æ´æ€§</strong></td><td>â­â­â­â­â­</td><td>â­â­â­</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>â­â­â­â­â­</td><td>â­â­â­</td></tr><tr><td><strong>å¯è¯»æ€§</strong></td><td>â­â­â­â­â­</td><td>â­â­â­â­</td></tr><tr><td><strong>å‡½æ•°å¼æ”¯æŒ</strong></td><td>â­â­</td><td>â­â­â­â­â­</td></tr><tr><td><strong>é“¾å¼æ“ä½œ</strong></td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td><strong>ç©ºå®‰å…¨</strong></td><td>â­â­â­â­â­</td><td>éœ€è¦é¢å¤–å¤„ç†</td></tr></tbody></table>
<h2 data-id="heading-14">4. æ€»ç»“</h2>
<p>ArrayUtilsé€šè¿‡ç®€æ´çš„APIè®¾è®¡ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„æ•°ç»„æ“ä½œèƒ½åŠ›ã€‚å®ƒçš„ä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>ä»£ç ç®€æ´æ€§</strong>ï¼šå°†å¸¸è§çš„æ•°ç»„æ“ä½œå°è£…æˆç®€å•çš„æ–¹æ³•è°ƒç”¨</li>
<li><strong>ç©ºå®‰å…¨</strong>ï¼šå¦¥å–„å¤„ç†nullå€¼åœºæ™¯ï¼Œæé«˜ä»£ç å¥å£®æ€§</li>
<li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒä»æŒ‡å®šä½ç½®å¼€å§‹æœç´¢ï¼Œæ»¡è¶³ä¸åŒä¸šåŠ¡éœ€æ±‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šä½¿ç”¨æ³›å‹ç¡®ä¿ç±»å‹ä¸€è‡´æ€§</li>
</ol>
<p>è™½ç„¶è¿™ä¸ªå·¥å…·ç±»åŠŸèƒ½ç›¸å¯¹åŸºç¡€ï¼Œä½†å®ƒä½“ç°äº†è‰¯å¥½çš„è®¾è®¡æ€æƒ³ï¼šä¸“æ³¨äºè§£å†³ç‰¹å®šé—®é¢˜ï¼Œä¿æŒæ¥å£ç®€å•ï¼Œå¤„ç†è¾¹ç•Œæƒ…å†µã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å€Ÿé‰´è¿™ç§è®¾è®¡æ€è·¯ï¼Œåˆ›å»ºæ›´å¤šå®ç”¨çš„å·¥å…·ç±»æ¥æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<p><strong>å»ºè®®ä½¿ç”¨åœºæ™¯</strong>ï¼šé€‚åˆä¸­å°å‹æ•°ç»„çš„å¿«é€Ÿæ“ä½œï¼Œå¯¹äºæ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯å»ºè®®è€ƒè™‘å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[linuxä¸Šgitlab runneréƒ¨ç½²æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7572776177690427401</link>    <guid>https://juejin.cn/post/7572776177690427401</guid>    <pubDate>2025-11-16T04:23:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572776177690427401" data-draft-id="7572776177690411017" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="linuxä¸Šgitlab runneréƒ¨ç½²æ–‡æ¡£"/> <meta itemprop="keywords" content="Java,GitHub"/> <meta itemprop="datePublished" content="2025-11-16T04:23:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¾è¿ªç‹"/> <meta itemprop="url" content="https://juejin.cn/user/2744837165290328"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            linuxä¸Šgitlab runneréƒ¨ç½²æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2744837165290328/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¾è¿ªç‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T04:23:06.000Z" title="Sun Nov 16 2025 04:23:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025å¹´11æœˆ16æ—¥</p>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>å¹³å¸¸ä½¿ç”¨çš„CI/CDä¸»è¦æ˜¯ç”¨Jenkinsï¼Œgitçš„æœ¬åœ°hookï¼Œä½†æ˜¯å¯¹äºä»£ç ä¸Šä¼ åæ‰§è¡Œå·®å¼‚ä»£ç ä¼˜åŒ–è¿™ä¸ªæŠ€æœ¯åœºæ™¯æµç¨‹åœºæ™¯æ¥è¯´ï¼š</p>
<ol>
<li>Jenkinsæµç¨‹åªä¼šåšåˆ°å…¨é‡æ’æŸ¥ï¼Œå¦‚æœä¸­é€”é‡åˆ°é—®é¢˜ä»£ç å¯¼è‡´å¤±è´¥ï¼Œå¾—ä¸å¿å¤±ï¼Œä¸”ä¸€ä¸ªä»“åº“å¯èƒ½ä¼šæœ‰ä¸å†ç»´æŠ¤ä»£ç ä¸æ— å…³ä»£ç ï¼Œé€ æˆèµ„æºæµªè´¹</li>
<li>gitæœ¬åœ°hooké—®é¢˜åœ¨äºï¼Œæ›´æ–°æ—¶æ¯ä¸ªç»„å‘˜éƒ½éœ€è¦åšï¼Œå¹¶ä¸”git commitçš„æ—¶å€™å¯ä»¥é€šè¿‡--no-verify è§„é¿æœ¬åœ°checkï¼ŒåŒæ—¶å¦‚æœç›´æ¥åœ¨gitlabä¸Šé¢IDEç›´æ¥ä¿®æ”¹ï¼Œåˆ™æœ¬åœ°git hookè„šæœ¬ä¸ä¼šæ‰§è¡Œ</li>
</ol>
<p>å› æ­¤ä¸ºäº†ä¼˜åŒ–è¿™ä¸€å—çš„æµæ°´çº¿ï¼Œé¿å…ä¸Šè¿°2ä¸ªé—®é¢˜ï¼Œæˆ‘æ‰“ç®—é€šè¿‡gitåˆå…¥æ—¶é€šè¿‡git çš„CI/CDï¼Œæ‰§è¡Œè„šæœ¬åˆ†æå·®å¼‚åŒ–æ–‡ä»¶</p>
<p>ï¼ˆæœ¬æ–‡å› ä¸ºç¦»èŒåæ‰€æœ‰æ¶ˆæ¯è®°å½•ä¼šè¢«åˆ é™¤ï¼Œå› æ­¤å›¾ç‰‡æ˜¯æ²¡æœ‰çš„ï¼Œè¯·è§è°…ï¼‰</p>
<h2 data-id="heading-1">éƒ¨ç½²ä¸éªŒè¯</h2>
<p>gitlabè‡ªå¸¦éƒ¨ç½²runneræ–‡æ¡£ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.gitlab.cn%2Fdocs%2Fjh%2Finstall%2F" target="_blank" title="https://docs.gitlab.cn/docs/jh/install/" ref="nofollow noopener noreferrer">docs.gitlab.cn/docs/jh/insâ€¦</a> ï¼ŒåŒæ—¶csdnä¹Ÿæœ‰å¯¹åº”çš„æ–‡æ¡£å¯ä»¥å€Ÿé‰´ <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_39826207%2Farticle%2Fdetails%2F144275485" target="_blank" title="https://blog.csdn.net/qq_39826207/article/details/144275485" ref="nofollow noopener noreferrer">blog.csdn.net/qq_39826207â€¦</a> ä¸è¿‡å®é™…ä¸Šæˆ‘åœ¨å¼€å‘æ—¶ä¹Ÿé‡åˆ°äº†ä¸€ç‚¹é—®é¢˜ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éƒ¨ç½²ï¼š</p>
<ol>
<li>
<p>å‡†å¤‡Linuxç¯å¢ƒï¼ˆCentosä¸ºä¾‹ï¼‰</p>
</li>
<li>
<p>é€šè¿‡wgetæˆ–è€…ç¦»çº¿ç­‰æ–¹å¼è·å–gitlab runnerçš„å®‰è£…åŒ…</p>
</li>
<li>
<pre><code class="hljs language-sh" lang="sh">Â <span class="hljs-comment"># åˆ›å»ºä¸“ç”¨ç”¨æˆ·ï¼ˆä¸åˆ›å»º home ç›®å½•ï¼‰</span>
Â sudo useradd --comment <span class="hljs-string">'GitLab Runner'</span> --create-home gitlab-runner
Â â€‹
Â <span class="hljs-comment"># åˆ›å»º runner å·¥ä½œç›®å½•</span>
Â sudo <span class="hljs-built_in">mkdir</span> /home/gitlab-runner/runner
Â â€‹
Â sudo <span class="hljs-built_in">chown</span> gitlab-runner:gitlab-runner /home/gitlab-runner/runner
</code></pre>
</li>
<li>
<p>åˆå§‹åŒ–å¹¶å¯åŠ¨ GitLab Runnerï¼ˆä½œä¸ºæœåŠ¡ï¼‰</p>
<p>è™½ç„¶ä½¿ç”¨äºŒè¿›åˆ¶ï¼Œä½†å»ºè®®ä»¥ç³»ç»ŸæœåŠ¡æ–¹å¼è¿è¡Œã€‚</p>
<ol>
<li>
<p>åˆ›å»º systemd æœåŠ¡æ–‡ä»¶</p>
<pre><code class="hljs language-sh" lang="sh">Â sudo <span class="hljs-built_in">tee</span> /etc/systemd/system/gitlab-runner.service &lt;&lt;<span class="hljs-string">EOF
Â [Unit]
Â Description=GitLab Runner
Â After=syslog.target network.target
Â ConditionFileIsExecutable=/usr/local/bin/gitlab-runner
Â â€‹
Â [Service]
Â StartLimitInterval=5
Â StartLimitBurst=10
Â ExecStart=/usr/local/bin/gitlab-runner run --working-directory /home/gitlab-runner/runner
Â SuccessExitStatus=0 143
Â Restart=always
Â RestartSec=5
Â KillMode=mixed
Â WorkingDirectory=/home/gitlab-runner/runner
Â User=gitlab-runner
Â Group=gitlab-runner
Â Environment=PATH=/bin:/usr/local/bin:/usr/bin
Â CacheDirectory=gitlab-runner
Â CacheDirectoryMode=0750
Â â€‹
Â [Install]
Â WantedBy=multi-user.target
Â EOF</span>
</code></pre>
</li>
<li>
<p>é‡è½½ systemd å¹¶å¯åŠ¨æœåŠ¡</p>
<pre><code class="hljs language-bash" lang="bash">Â sudo systemctl daemon-reexec
Â sudo systemctl daemon-reload
Â sudo systemctl <span class="hljs-built_in">enable</span> gitlab-runner
Â sudo systemctl start gitlab-runner
</code></pre>
</li>
<li>
<p>æ£€æŸ¥æœåŠ¡çŠ¶æ€</p>
<pre><code class="hljs language-sh" lang="sh">Â sudo systemctl status gitlab-runner
</code></pre>
</li>
</ol>
</li>
<li>
<p>æ³¨å†ŒGitLab Runner åˆ° GitLab å®ä¾‹</p>
<p>ï¼ˆå¦‚æœæ˜¯å¤šæ¬¡æ³¨å†Œï¼Œåˆ™éœ€è¦ä¼˜å…ˆæŒ‰ç…§ç¬¬ä¸€æ­¥åˆ‡æ¢æˆå¯¹åº”çš„gitlabç”¨æˆ·è¿›è¡Œå‘½ä»¤æ“ä½œï¼Œæ•´ä¸ªçš„å®‰è£…æµç¨‹ï¼Œæˆ‘æŒ‰ç…§å®˜æ–¹æµç¨‹æ²¡æˆåŠŸï¼Œå’Œå½“å‰æµç¨‹å”¯ä¸€çš„å·®åˆ«å°±æ˜¯å®˜æ–¹æ²¡æœ‰åˆ‡æ¢åˆ°gitlabç”¨æˆ·ï¼‰</p>
<ol>
<li>
<p>è·å–æ³¨å†Œä»¤ç‰Œ ç™»å½• GitLab Web ç•Œé¢ã€‚ è¿›å…¥ä½ çš„é¡¹ç›® â†’ Settings â†’ CI / CD â†’ Runnersã€‚ å¤åˆ¶ Registration tokenï¼ˆé¡¹ç›®çº§ Runnerï¼‰ã€‚ æˆ–è€…åœ¨ Admin Area â†’ Overview â†’ Runners è·å–å®ä¾‹çº§ä»¤ç‰Œã€‚</p>
</li>
<li>
<p>è¿è¡Œæ³¨å†Œå‘½ä»¤ï¼š åˆ‡æ¢åˆ° gitlab-runner ç”¨æˆ·å¹¶æ³¨å†Œï¼š</p>
<pre><code class="hljs language-sh" lang="sh">Â sudo -u gitlab-runner -H /usr/local/bin/gitlab-runner register
</code></pre>
<p>æŒ‰æç¤ºè¾“å…¥ï¼š</p>
<ul>
<li>GitLab instance URL: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitlab.com%2F" target="_blank" title="https://gitlab.com/" ref="nofollow noopener noreferrer">gitlab.com</a>ï¼ˆæˆ–ä½ çš„è‡ªå»º GitLab åœ°å€ï¼‰</li>
<li>Registration token: ä½ å¤åˆ¶çš„ä»¤ç‰Œ</li>
<li>Description: my-runnerï¼ˆè‡ªå®šä¹‰æè¿°ï¼‰</li>
<li>Tags: linux,dockerï¼ˆå¯é€‰ï¼Œç”¨äºä»»åŠ¡åŒ¹é…ï¼‰</li>
<li>Executor: shellï¼ˆæˆ– docker, docker+machine ç­‰ï¼‰</li>
<li>Default Docker image: alpine:latestï¼ˆå¦‚æœä½¿ç”¨ docker executorï¼‰</li>
</ul>
</li>
<li>
<p>æŒ‰æç¤ºè¾“å…¥ï¼š</p>
<ul>
<li>GitLab instance URL: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitlab.com%2F" target="_blank" title="https://gitlab.com/" ref="nofollow noopener noreferrer">gitlab.com</a>ï¼ˆæˆ–ä½ çš„è‡ªå»º GitLab åœ°å€ï¼‰</li>
<li>Registration token: ä½ å¤åˆ¶çš„ä»¤ç‰Œ</li>
<li>Description: my-runnerï¼ˆè‡ªå®šä¹‰æè¿°ï¼‰</li>
<li>Tags: linux,dockerï¼ˆå¯é€‰ï¼Œç”¨äºä»»åŠ¡åŒ¹é…ï¼‰ã€</li>
<li>Executor: shellï¼ˆæˆ– docker, docker+machine ç­‰ï¼‰</li>
<li>Default Docker image: alpine:latestï¼ˆå¦‚æœä½¿ç”¨ docker executorï¼‰</li>
<li>æ³¨å†ŒæˆåŠŸåï¼Œé…ç½®ä¼šä¿å­˜åœ¨ /home/gitlab-runner/runner/config.tomlã€‚</li>
</ul>
</li>
</ol>
</li>
</ol>
<p>éªŒè¯æ³¨å†Œï¼š åœ¨ GitLab Web ç•Œé¢çš„ Runners é¡µé¢ï¼Œåº”çœ‹åˆ°æ–°æ³¨å†Œçš„ Runner å¤„äºâ€œåœ¨çº¿â€çŠ¶æ€ã€‚</p>
<h2 data-id="heading-2">å¸è½½</h2>
<p>æœ‰æ—¶å€™å¯èƒ½æ˜¯å®‰è£…é”™è¯¯ï¼Œå¯èƒ½æ˜¯éœ€è¦è¿ç§»ä¸šåŠ¡ï¼Œéœ€è¦ç°åœ¨åŸæœ‰çš„ç¯å¢ƒçš„æœåŠ¡ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤</p>
<ol>
<li>
<p>åœæ­¢å¹¶ç¦ç”¨æœåŠ¡</p>
<pre><code class="hljs language-sh" lang="sh">Â sudo systemctl stop gitlab-runner
Â sudo systemctl <span class="hljs-built_in">disable</span> gitlab-runner
</code></pre>
</li>
<li>
<p>åˆ é™¤æœåŠ¡æ–‡ä»¶</p>
<pre><code class="hljs language-sh" lang="sh">Â sudo <span class="hljs-built_in">rm</span> /etc/systemd/system/gitlab-runner.service
Â sudo systemctl daemon-reload
</code></pre>
</li>
<li>
<p>åˆ é™¤äºŒè¿›åˆ¶æ–‡ä»¶å’Œç”¨æˆ·</p>
<pre><code class="hljs language-sh" lang="sh">Â sudo <span class="hljs-built_in">rm</span> /usr/local/bin/gitlab-runner
Â <span class="hljs-comment"># -r åˆ é™¤ç”¨æˆ·ä¸»ç›®å½•</span>
Â sudo userdel -r gitlab-runner Â 
</code></pre>
</li>
<li>
<p>æ¸…ç†æ®‹ç•™æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰</p>
<pre><code class="hljs language-sh" lang="sh">sudo <span class="hljs-built_in">rm</span> -rf /home/gitlab-runner
</code></pre>
</li>
</ol>
<h2 data-id="heading-3">è„šæœ¬åˆ†äº«</h2>
<h3 data-id="heading-4">.gitlab-ci.yml</h3>
<p>è¿™ä¸ªæ˜¯ä»“åº“å…¨å±€çš„git CI/CDçš„é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®è§¦å‘é˜¶æ®µå¯ä»¥æ‰§è¡Œå¯¹åº”çš„scriptç›¸å…³çš„è„šæœ¬ï¼Œåœ¨è¯¥è„šæœ¬å¯ä»¥æ‰§è¡Œæ›´å¤šshellè„šæœ¬ï¼Œæ–¹ä¾¿ç®¡ç†</p>
<p>è¯¥ä¾‹å­æ˜¯åˆå…¥æ—¶æ‰§è¡Œ2ä¸ªè„šæœ¬ï¼Œå¯ä¾›å‚è€ƒ</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">stages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">check</span>

<span class="hljs-comment"># å…¨å±€å˜é‡</span>
<span class="hljs-attr">variables:</span>
  <span class="hljs-attr">GIT_DEPTH:</span> <span class="hljs-string">""</span>  <span class="hljs-comment"># å®Œæ•´å…‹éš†</span>

<span class="hljs-comment"># åªåœ¨ Merge Request æ—¶è§¦å‘æµæ°´çº¿ï¼ˆå³â€œåˆå…¥å‰æ£€æŸ¥â€ï¼‰</span>
<span class="hljs-attr">workflow:</span>
  <span class="hljs-attr">rules:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">if:</span> <span class="hljs-string">$CI_PIPELINE_SOURCE</span> <span class="hljs-string">==</span> <span class="hljs-string">"merge_request_event"</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">when:</span> <span class="hljs-string">never</span>

<span class="hljs-attr">check:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">check</span>
  <span class="hljs-attr">interruptible:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å¯ä¸­æ–­ï¼šå½“ MR æ›´æ–°æ—¶å–æ¶ˆæ—§æµæ°´çº¿</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-comment"># è„šæœ¬1ï¼šæƒé™/é…ç½®æ£€æŸ¥</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">chmod</span> <span class="hljs-string">+x</span> <span class="hljs-string">./cloud/env/install/script/config_checkstyle.sh</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">./cloud/env/install/script/config_checkstyle.sh</span> <span class="hljs-string">ucs-server</span> <span class="hljs-string">$GITLAB_USER_EMAIL</span> <span class="hljs-string">$CI_MERGE_REQUEST_TARGET_BRANCH_NAME</span>

    <span class="hljs-comment"># è„šæœ¬2ï¼šå¦ä¸€ä¸ªæ£€æŸ¥è„šæœ¬ï¼ˆç¤ºä¾‹ï¼‰</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">chmod</span> <span class="hljs-string">+x</span> <span class="hljs-string">./cloud/env/install/script/another_check.sh</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">./cloud/env/install/script/another_check.sh</span>

  <span class="hljs-comment"># åªåœ¨ MR ä¸­è¿è¡Œ</span>
  <span class="hljs-attr">only:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">merge_requests</span>

  <span class="hljs-attr">tags:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">ucs_server</span>

  <span class="hljs-comment"># å¯é€‰ï¼šæŒ‡å®š MR çš„ç›®æ ‡åˆ†æ”¯ï¼ˆæ¯”å¦‚åªå¯¹ main/develop çš„åˆå…¥åšæ£€æŸ¥ï¼‰</span>
  <span class="hljs-comment"># rules:</span>
  <span class="hljs-comment">#   - if: $CI_MERGE_REQUEST_TARGET_BRANCH_NAME =~ /^(main|develop)$/</span>
</code></pre>
<h3 data-id="heading-5">shè„šæœ¬æ–‡ä»¶</h3>
<h4 data-id="heading-6">JavaéªŒè¯å·®å¼‚æ–‡ä»¶</h4>
<p>ç”¨äºéªŒè¯åˆå…¥æ—¶ä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´çš„å·®å¼‚æ–‡ä»¶ï¼Œå¯¹å·®å¼‚æ–‡ä»¶è¿›è¡Œcheckstyleï¼ˆé€šè¿‡æ‰§è¡ŒjaråŒ…ï¼‰æœ‰é—®é¢˜å°±è¿”å›0ï¼Œæ— é—®é¢˜ä¼šè¿”å›1ï¼Œgitlabåˆå¹¶æ£€æµ‹ä¼šæ ¹æ®è¿”å›å€¼åˆ¤å®šæµæ°´çº¿æˆåŠŸ/å¤±è´¥</p>
<p>åŸæœ‰è„šæœ¬å·²ç»é—å¤±ï¼Œåˆ¤æ–­é€»è¾‘åº”å½“æ˜¯jaråŒ…äº§ç”Ÿçš„è¾“å‡ºï¼Œåº”å½“åªçœ‹[WARN][ERROR]å¼€å¤´çš„çš„è¡Œæ˜¯å¦&gt;0ï¼Œæœ‰åˆ™æœ‰é—®é¢˜ï¼ˆéœ€è¦jaråŒ…å¯åŠ¨checkstyleï¼Œéœ€è¦xmlé…ç½®æ–‡ä»¶è¿›è¡Œè§„åˆ™é…ç½®ï¼‰</p>
<p>Javaç¨‹åºçš„checkstyleéœ€è¦ä»¥ä¸åŒç‰ˆæœ¬ä¸ºå¤§å‰æåˆ›å»ºå„è‡ªç¯å¢ƒï¼Œå…¶ä»–çš„å¦‚æœ¬åœ°æ‰§è¡Œhookï¼ŒJenkinsæ‰§è¡Œï¼Œgit CI/CDæ‰§è¡Œæµç¨‹ï¼Œéœ€è¦çš„å„ç§é™æ€èµ„æºéœ€è¦ä¸€è‡´</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># ================== å‚æ•°æ ¡éªŒ ==================</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -ne 4 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$0</span> &lt;namespace&gt; &lt;email&gt; &lt;source_branch&gt; &lt;target_branch&gt;"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Example: <span class="hljs-variable">$0</span> ucs-server dev@example.com feature/add-config main"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

NAMESPACE=<span class="hljs-variable">$1</span>
EMAIL=<span class="hljs-variable">$2</span>
SOURCE_BRANCH=<span class="hljs-variable">$3</span>
TARGET_BRANCH=<span class="hljs-variable">$4</span>

<span class="hljs-comment"># ================== é…ç½®åŒº ==================</span>
<span class="hljs-comment"># Checkstyle jar åŒ…è·¯å¾„ï¼ˆè¯·æ ¹æ®å®é™…è·¯å¾„ä¿®æ”¹ï¼‰</span>
CHECKSTYLE_JAR=<span class="hljs-string">"./cloud/env/install/script/checkstyle.jar"</span>

<span class="hljs-comment"># Checkstyle é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆcheckstyle.xmlï¼‰</span>
CHECKSTYLE_CONFIG=<span class="hljs-string">"./cloud/env/install/script/checkstyle.xml"</span>

<span class="hljs-comment"># ä¸´æ—¶æ–‡ä»¶ç”¨äºä¿å­˜ Checkstyle è¾“å‡º</span>
CHECKSTYLE_LOG=<span class="hljs-string">"/tmp/checkstyle_output_$$_<span class="hljs-subst">$(date +%s)</span>.txt"</span>
<span class="hljs-comment"># ===========================================</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Analyzing Java files changed between '<span class="hljs-variable">$SOURCE_BRANCH</span>' and '<span class="hljs-variable">$TARGET_BRANCH</span>'..."</span>

<span class="hljs-comment"># 1. ç¡®ä¿è¿œç¨‹åˆ†æ”¯å­˜åœ¨</span>
<span class="hljs-keyword">if</span> ! git rev-parse --verify <span class="hljs-string">"origin/<span class="hljs-variable">$SOURCE_BRANCH</span>"</span> &gt; /dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: Remote branch 'origin/<span class="hljs-variable">$SOURCE_BRANCH</span>' not found."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Available branches:"</span>; git branch -r
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">if</span> ! git rev-parse --verify <span class="hljs-string">"origin/<span class="hljs-variable">$TARGET_BRANCH</span>"</span> &gt; /dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: Remote branch 'origin/<span class="hljs-variable">$TARGET_BRANCH</span>' not found."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Available branches:"</span>; git branch -r
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 2. è·å–ä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´å˜æ›´çš„ Java æ–‡ä»¶</span>
CHANGED_JAVA_FILES=()

<span class="hljs-keyword">while</span> IFS= <span class="hljs-built_in">read</span> -r file; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> == *.java ]] &amp;&amp; [ -f <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> ]; <span class="hljs-keyword">then</span>
        CHANGED_JAVA_FILES+=(<span class="hljs-string">"<span class="hljs-variable">$file</span>"</span>)
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span> &lt; &lt;(git diff --name-only <span class="hljs-string">"origin/<span class="hljs-variable">$TARGET_BRANCH</span>"</span>...origin/<span class="hljs-variable">$SOURCE_BRANCH</span>)

<span class="hljs-comment"># 3. æ£€æŸ¥æ˜¯å¦æœ‰å˜æ›´çš„ Java æ–‡ä»¶</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">${#CHANGED_JAVA_FILES[@]}</span> -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"No Java files changed between 'origin/<span class="hljs-variable">$TARGET_BRANCH</span>' and 'origin/<span class="hljs-variable">$SOURCE_BRANCH</span>'."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"No Java changes detected."</span> | mail -s <span class="hljs-string">"<span class="hljs-variable">$NAMESPACE</span>: No Java changes"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span>
    <span class="hljs-built_in">exit</span> 0  <span class="hljs-comment"># æ— å˜æ›´è§†ä¸ºé€šè¿‡</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Found <span class="hljs-variable">${#CHANGED_JAVA_FILES[@]}</span> Java file(s) to check:"</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">'  %s\n'</span> <span class="hljs-string">"<span class="hljs-variable">${CHANGED_JAVA_FILES[@]}</span>"</span>

<span class="hljs-comment"># 4. æ‰§è¡Œ Checkstyle æ£€æŸ¥ï¼ˆä¸€æ¬¡æ€§ä¼ å…¥æ‰€æœ‰æ–‡ä»¶ï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Running Checkstyle..."</span>
<span class="hljs-comment"># ä½¿ç”¨ -c æŒ‡å®šé…ç½®ï¼Œ-f xml æˆ– summary å¯é€‰ï¼Œè¿™é‡Œä½¿ç”¨ç®€æ´æ ¼å¼</span>
<span class="hljs-comment"># å¦‚æœä½ å¸Œæœ›è¯¦ç»†è¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨ -f xml å¹¶ç”¨ xmllint æ ¼å¼åŒ–</span>
<span class="hljs-keyword">if</span> java -jar <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_JAR</span>"</span> -c <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_CONFIG</span>"</span> <span class="hljs-string">"<span class="hljs-variable">${CHANGED_JAVA_FILES[@]}</span>"</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span> 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># Checkstyle å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼ˆè¯­æ³•æ­£ç¡®ï¼‰ï¼Œä½†ä¸ä»£è¡¨æ— è­¦å‘Š/é”™è¯¯</span>
    OUTPUT=$(<span class="hljs-built_in">cat</span> <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$OUTPUT</span>"</span>

    <span class="hljs-comment"># æ£€æŸ¥è¾“å‡ºä¸­æ˜¯å¦åŒ…å«è¿è§„ä¿¡æ¯ï¼ˆCheckstyle é€šå¸¸ä¼šåœ¨æœ‰è¿è§„æ—¶è¾“å‡ºå†…å®¹ï¼‰</span>
    <span class="hljs-keyword">if</span> [[ -s <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span> &amp;&amp; <span class="hljs-string">"<span class="hljs-subst">$(echo <span class="hljs-string">"<span class="hljs-variable">$OUTPUT</span>"</span> | grep -v '^$' | wc -l)</span>"</span> -gt 0 ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Checkstyle found issues in changed Java files."</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Checkstyle Report:"</span> | mail -s <span class="hljs-string">"[FAIL] <span class="hljs-variable">$NAMESPACE</span>: Checkstyle failed"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span> -A <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>
        <span class="hljs-built_in">rm</span> -f <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>
        <span class="hljs-built_in">exit</span> 1  <span class="hljs-comment"># æœ‰è¿è§„ â†’ å¤±è´¥</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"All changed Java files passed Checkstyle."</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"No checkstyle violations found."</span> | mail -s <span class="hljs-string">"[OK] <span class="hljs-variable">$NAMESPACE</span>: Checkstyle passed"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span>
        <span class="hljs-built_in">rm</span> -f <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>
        <span class="hljs-built_in">exit</span> 0  <span class="hljs-comment"># æ— è¿è§„ â†’ æˆåŠŸ</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-comment"># Checkstyle å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼ˆå¦‚ jar æŠ¥é”™ã€é…ç½®é”™è¯¯ç­‰ï¼‰</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Checkstyle execution failed!"</span>
    <span class="hljs-built_in">cat</span> <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Checkstyle execution failed. See details."</span> | mail -s <span class="hljs-string">"[ERROR] <span class="hljs-variable">$NAMESPACE</span>: Checkstyle execution error"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span> -A <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>
    <span class="hljs-built_in">rm</span> -f <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
</code></pre>
<h4 data-id="heading-7">ymléªŒè¯å·®å¼‚æ–‡ä»¶</h4>
<p>ä¸ä¸Šé¢çš„JavaéªŒè¯ç±»ä¼¼ï¼Œå°±æ˜¯æŸ¥è¯¢å·®å¼‚æ–‡ä»¶ymlä¸yamlï¼Œcheckstyleæœ‰é—®é¢˜å°±è¿”å›0ï¼Œæ— é—®é¢˜ä¼šè¿”å›1ï¼Œgitlabåˆå¹¶æ£€æµ‹ä¼šæ ¹æ®è¿”å›å€¼åˆ¤å®šæµæ°´çº¿æˆåŠŸ/å¤±è´¥</p>
<p>ï¼ˆå¦‚æœæ˜¯springå¯ä»¥è·³è¿‡æ‰€æœ‰çš„application.ymlæ–‡ä»¶ï¼Œå› ä¸ºyml éªŒè¯ä¸»è¦æ˜¯ä¸ºäº†äº¤ä»˜ç»™è¿ç»´åŒäº‹é…ç½®æ–‡ä»¶æ‰ä¼šæœ‰çš„æµæ°´çº¿æ­¥éª¤ï¼‰</p>
<p>åŸæœ‰è„šæœ¬å·²ç»é—å¤±ï¼Œåˆ¤æ–­é€»è¾‘åº”å½“é€šè¿‡yamllintè¿›è¡ŒéªŒè¯ï¼Œæ ¹æ®è¾“å‡ºäº§ç”Ÿè¡Œæ•°&gt;0åˆ™æœ‰é—®é¢˜ï¼ˆéœ€è¦ymlconfæ–‡ä»¶ä½œä¸ºé…ç½®è§„åˆ™ï¼‰</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -ne 2 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$0</span> &lt;namespace&gt; &lt;email&gt;"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

NAMESPACE=<span class="hljs-variable">$1</span>
EMAIL=<span class="hljs-variable">$2</span>

<span class="hljs-comment"># ================== é…ç½®åŒº ==================</span>
TARGET_BRANCH=<span class="hljs-string">"main"</span>  <span class="hljs-comment"># ç›®æ ‡åˆå¹¶åˆ†æ”¯ï¼Œå¯æ ¹æ®éœ€è¦æ”¹ä¸º devã€release ç­‰</span>
CONFIG_FILE=<span class="hljs-string">"./cloud/env/install/script/ymlconf"</span>
<span class="hljs-comment"># ===========================================</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ” Checking YAML files changed between current branch and '<span class="hljs-variable">$TARGET_BRANCH</span>'..."</span>

<span class="hljs-comment"># 1. è·å–å½“å‰åˆ†æ”¯ç›¸å¯¹äºç›®æ ‡åˆ†æ”¯çš„å·®å¼‚æ–‡ä»¶ï¼ˆä»…æ–°å¢æˆ–ä¿®æ”¹ï¼‰</span>
<span class="hljs-comment"># æ³¨æ„ï¼šGitLab CI ä¼šè‡ªåŠ¨ fetch æ‰€æœ‰åˆ†æ”¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</span>
CHANGED_YAML_FILES=()
<span class="hljs-keyword">while</span> IFS= <span class="hljs-built_in">read</span> -r file; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> == *.yml || <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> == *.yaml ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> ]; <span class="hljs-keyword">then</span>  <span class="hljs-comment"># ç¡®ä¿æ–‡ä»¶å­˜åœ¨ï¼ˆé¿å…åˆ é™¤çš„æ–‡ä»¶ï¼‰</span>
            CHANGED_YAML_FILES+=(<span class="hljs-string">"<span class="hljs-variable">$file</span>"</span>)
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span> &lt; &lt;(git diff --name-only <span class="hljs-string">"origin/<span class="hljs-variable">$TARGET_BRANCH</span>"</span>...HEAD)

<span class="hljs-comment"># 2. æ£€æŸ¥æ˜¯å¦æœ‰å˜æ›´çš„ YAML æ–‡ä»¶</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">${#CHANGED_YAML_FILES[@]}</span> -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… No YAML files changed. Skipping yamllint."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"No YAML changes detected."</span> | mail -s <span class="hljs-string">"<span class="hljs-variable">$NAMESPACE</span>: No YAML changes"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span>
    <span class="hljs-built_in">exit</span> 0
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ“„ Found <span class="hljs-variable">${#CHANGED_YAML_FILES[@]}</span> YAML file(s) to check:"</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">'  %s\n'</span> <span class="hljs-string">"<span class="hljs-variable">${CHANGED_YAML_FILES[@]}</span>"</span>

<span class="hljs-comment"># 3. å¯¹å·®å¼‚æ–‡ä»¶é€ä¸ªè¿è¡Œ yamllint</span>
ERRORS_FOUND=<span class="hljs-string">""</span>
<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${CHANGED_YAML_FILES[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">" linting <span class="hljs-variable">$file</span>"</span>
    <span class="hljs-keyword">if</span> ! yamllint -c <span class="hljs-string">"<span class="hljs-variable">$CONFIG_FILE</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> &gt; /tmp/yamllint.log 2&gt;&amp;1; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ yamllint failed on <span class="hljs-variable">$file</span>"</span>
        ERRORS_FOUND+=<span class="hljs-string">"<span class="hljs-variable">$file</span>:\n"</span>
        ERRORS_FOUND+=$(<span class="hljs-built_in">cat</span> /tmp/yamllint.log)
        ERRORS_FOUND+=<span class="hljs-string">"\n\n"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># 4. å¤„ç†ç»“æœ</span>
<span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$ERRORS_FOUND</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"YAML file has syntax errors!"</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">$ERRORS_FOUND</span>"</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">$ERRORS_FOUND</span>"</span> | mail -s <span class="hljs-string">"<span class="hljs-variable">$NAMESPACE</span> YAML file has syntax errors!"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span>
    <span class="hljs-built_in">rm</span> -f /tmp/yamllint.log
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… All changed YAML files are valid."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"All changed YAML files passed lint."</span> | mail -s <span class="hljs-string">"<span class="hljs-variable">$NAMESPACE</span>: YAML lint passed"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span>
    <span class="hljs-built_in">rm</span> -f /tmp/yamllint.log
    <span class="hljs-built_in">exit</span> 0
<span class="hljs-keyword">fi</span>
</code></pre>
<h2 data-id="heading-8">å…¶ä»–é—®é¢˜</h2>
<h3 data-id="heading-9">gitlab runnerå®ä¾‹åœ¨shellæ¨¡å¼ä¸‹æ€ä¹ˆå ç”¨Centosèµ„æºçš„</h3>
<p>åœ¨ shell executor æ¨¡å¼ä¸‹ï¼ŒGitLab Runner çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>ç›´æ¥åœ¨å®¿ä¸»æœºï¼ˆCentosï¼‰ä¸Šæ‰§è¡Œå‘½ä»¤ï¼šRunner ä¼šä»¥è¿è¡Œå®ƒçš„ç”¨æˆ·èº«ä»½ï¼ˆå¦‚ gitlab-runner ç”¨æˆ·ï¼‰ï¼Œåœ¨ç³»ç»Ÿ shell ä¸­ç›´æ¥æ‰§è¡Œ .gitlab-ci.yml ä¸­å®šä¹‰çš„ script å‘½ä»¤ã€‚</p>
</li>
<li>
<p>èµ„æºå ç”¨ç‰¹ç‚¹ï¼š</p>
<ul>
<li>CPU/å†…å­˜ï¼šç”±å®é™…æ‰§è¡Œçš„è„šæœ¬å†³å®šï¼ˆå¦‚ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ç­‰ï¼‰ï¼Œç›´æ¥æ¶ˆè€—å®¿ä¸»æœºèµ„æºã€‚</li>
<li>ç£ç›˜ï¼šä¼šåœ¨ä¸´æ—¶ç›®å½•ï¼ˆé»˜è®¤ /home/gitlab-runner/builds//...ï¼‰å…‹éš†ä»£ç å¹¶æ‰§è¡Œä»»åŠ¡ï¼Œä»»åŠ¡ç»“æŸåé»˜è®¤æ¸…ç†ï¼ˆå¯é€šè¿‡ builds_dir é…ç½®ï¼‰ã€‚</li>
<li>ç¯å¢ƒä¾èµ–ï¼šæ‰€æœ‰ä¾èµ–ï¼ˆå¦‚ Pythonã€Node.jsã€Docker CLI ç­‰ï¼‰å¿…é¡»é¢„å…ˆå®‰è£…åœ¨ Centos ç³»ç»Ÿä¸­ã€‚</li>
<li>æ— éš”ç¦»æ€§ï¼šå¤šä¸ª job å…±äº«åŒä¸€ç³»ç»Ÿç¯å¢ƒï¼Œå¯èƒ½äº’ç›¸å¹²æ‰°ï¼ˆæ¯”å¦‚ä¿®æ”¹å…¨å±€ PATHã€å†™æ–‡ä»¶åˆ° /tmpï¼‰ã€‚</li>
<li>å¹¶å‘æ§åˆ¶ï¼šé€šè¿‡ concurrentï¼ˆå…¨å±€ï¼‰å’Œ limitï¼ˆæ¯ä¸ª runnerï¼‰æ§åˆ¶åŒæ—¶è¿è¡Œçš„ job æ•°ï¼Œé¿å…èµ„æºè€—å°½ã€‚</li>
</ul>
</li>
</ul>
<p>å»ºè®®ï¼š</p>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒæ…ç”¨ shell æ¨¡å¼ï¼Œæ¨èç”¨ docker æˆ– kubernetes æä¾›éš”ç¦»ã€‚</li>
<li>å¦‚æœå¿…é¡»ç”¨ shellï¼Œç¡®ä¿ runner ç”¨æˆ·æƒé™æœ€å°åŒ–ï¼Œå¹¶ç›‘æ§ç³»ç»Ÿè´Ÿè½½ã€‚</li>
</ul>
<h3 data-id="heading-10">gitlab CI/CDå¦‚æœå¤±è´¥ï¼Œå¯ä¸å¯ä»¥é˜»æ­¢åˆå¹¶ä»»åŠ¡</h3>
<p>å®ç°æ–¹å¼ï¼š</p>
<ul>
<li>
<p>å¯ç”¨â€œåˆå¹¶å‰å¿…é¡»é€šè¿‡æµæ°´çº¿â€ï¼š</p>
<ul>
<li>è¿›å…¥é¡¹ç›® â†’ Settings &gt; General &gt; Merge requests</li>
<li>å‹¾é€‰ Pipelines must succeed</li>
<li>ï¼ˆå¯é€‰ï¼‰å‹¾é€‰ Require approval from code owners</li>
</ul>
</li>
<li>
<p>ä¿æŠ¤ç›®æ ‡åˆ†æ”¯ï¼ˆå¦‚ main / developï¼‰ï¼šï¼ˆè¿™ä¸ªå¯¹äºæœ‰è§„æ¨¡çš„å¼€å‘å›¢é˜Ÿï¼Œå·²ç»æœ‰CMOè¿›è¡Œé…ç½®è¿‡äº†ï¼‰</p>
<ul>
<li>
<p>Settings &gt; Repository &gt; Protected Branches</p>
</li>
<li>
<p>å¯¹ç›®æ ‡åˆ†æ”¯è®¾ç½®ï¼š</p>
<ul>
<li>Allowed to merge: Maintainersï¼ˆæˆ–æŒ‡å®šè§’è‰²ï¼‰</li>
<li>Require status checks to pass before mergingï¼ˆå¦‚æœå¯ç”¨äº†å¤–éƒ¨çŠ¶æ€æ£€æŸ¥ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>
<p>ç»“æœï¼š</p>
<ul>
<li>å¦‚æœ CI pipeline å¤±è´¥ï¼ˆä»»ä½• job å¤±è´¥ä¸”æœªè¢« allow_failure: true å¿½ç•¥ï¼‰ï¼ŒMerge æŒ‰é’®å˜ç°ï¼Œæ— æ³•åˆå¹¶ã€‚</li>
<li>å³ä½¿æœ‰ Approver åŒæ„ï¼Œåªè¦ pipeline å¤±è´¥ï¼Œä¹Ÿæ— æ³•åˆå¹¶ã€‚ å·¥ä½œæµç¨‹ï¼š</li>
</ul>
</li>
<li>
<p>æ³¨å†Œï¼šRunner å‘ GitLab Server æ³¨å†Œï¼Œè·å¾—å”¯ä¸€ tokenï¼Œå¹¶ç»‘å®šåˆ°é¡¹ç›®æˆ– groupã€‚</p>
</li>
<li>
<p>è½®è¯¢/é•¿è¿æ¥ï¼šRunner å®šæœŸå‘ GitLab Server çš„ /jobs/request API å‘èµ·è¯·æ±‚ï¼ˆé»˜è®¤æ¯å‡ ç§’ä¸€æ¬¡ï¼‰ï¼Œè¯¢é—®æ˜¯å¦æœ‰å¾…å¤„ç†çš„ jobã€‚</p>
</li>
<li>
<p>é¢†å–ä»»åŠ¡ï¼šå½“æœ‰åŒ¹é…æ ‡ç­¾ï¼ˆtagsï¼‰çš„ job åˆ°æ¥ï¼ŒRunner é¢†å–ä»»åŠ¡ï¼ˆåŒ…å« .gitlab-ci.yml ä¸­çš„ scriptã€variablesã€artifacts ç­‰ä¿¡æ¯ï¼‰ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œä»»åŠ¡ ï¼š</p>
<ul>
<li>æ ¹æ®é…ç½®çš„ executorï¼ˆshell/docker/ssh/k8s ç­‰ï¼‰å¯åŠ¨æ‰§è¡Œç¯å¢ƒï¼›</li>
<li>å…‹éš†ä»£ç ï¼›</li>
<li>æ‰§è¡Œ before_script â†’ script â†’ after_scriptï¼›</li>
<li>ä¸Šä¼  artifacts/logsï¼›</li>
<li>ä¸ŠæŠ¥çŠ¶æ€ï¼ˆsuccess/failureï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>é‡Šæ”¾èµ„æºï¼šä»»åŠ¡ç»“æŸï¼Œæ¸…ç†ä¸´æ—¶æ–‡ä»¶ï¼ˆé™¤éé…ç½®ä¿ç•™ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-11">gitlab CI/CDï¼Œå¦‚æœè¦æ‰§è¡Œè„šæœ¬ï¼Œæœ‰å“ªäº›å‚æ•°æ˜¯gitlabè¿™è¾¹å¯ä»¥æä¾›</h3>
<p>GitLab è‡ªåŠ¨æ³¨å…¥å¤§é‡ é¢„å®šä¹‰ CI/CD å˜é‡ï¼ˆPredefined Variablesï¼‰ï¼Œä½ å¯ä»¥åœ¨è„šæœ¬ä¸­ç›´æ¥ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š</p>
<p>å¸¸ç”¨å†…ç½®å˜é‡ç¤ºä¾‹ï¼š</p>





















<table><thead><tr><th>å˜é‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>CI_COMMIT_REF_NAME</td><td>å½“å‰åˆ†æ”¯æˆ– tag åï¼ˆå¦‚ main, v1.0ï¼‰</td></tr><tr><td>CI_PROJECT_DIR</td><td>CI ä»»åŠ¡çš„å·¥ä½œç›®å½•ï¼ˆä»£ç è¢« clone åˆ°è¿™é‡Œï¼‰</td></tr><tr><td>GITLAB_USER_EMAIL</td><td>è§¦å‘ pipeline çš„ç”¨æˆ·é‚®ç®±</td></tr></tbody></table>
<p>å…¶ä»–çš„åƒæ˜¯ä¸¤ä¸ªåˆ†æ”¯çš„åˆ†æ”¯hashä¹Ÿå¯ä»¥é€šè¿‡gitæä¾›çš„å‚æ•°è·å–åˆ°ï¼Œç”¨äºå·®å¼‚æ–‡ä»¶çš„æ’æŸ¥ã€‚æ›´å¤šçš„å¯ä»¥çœ‹å®˜ç½‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.gitlab.com%2Fci%2Fvariables%2Fpredefined_variables%2F" target="_blank" title="https://docs.gitlab.com/ci/variables/predefined_variables/" ref="nofollow noopener noreferrer">docs.gitlab.com/ci/variableâ€¦</a></p>
<h3 data-id="heading-12">åˆå¹¶ä»»åŠ¡ä¸‹ï¼Œä¸¤ä¸ªåˆ†æ”¯éƒ½æœ‰è„šæœ¬ï¼Œæ”¹ç”¨å“ªä¸€ä¸ªï¼Œå¦‚æœä»»æ„ä¸€æ–¹ç¼ºå°‘è„šæœ¬ï¼Œè¯¥ç”¨å“ªä¸€ä¸ª</h3>
<p>GitLab çš„è§„åˆ™éå¸¸æ˜ç¡®ï¼š å§‹ç»ˆä½¿ç”¨ source branchï¼ˆæºåˆ†æ”¯ï¼‰ä¸­çš„ .gitlab-ci.yml æ–‡ä»¶</p>
<p>è¯¦ç»†è¯´æ˜ï¼š</p>
<ul>
<li>å½“ä½ åˆ›å»ºä¸€ä¸ªä» feature â†’ main çš„ MRï¼Œ</li>
<li>GitLab ä¼š checkout feature åˆ†æ”¯çš„ä»£ç ï¼Œ</li>
<li>å¹¶è¯»å– feature åˆ†æ”¯æ ¹ç›®å½•ä¸‹çš„ .gitlab-ci.yml æ¥æ‰§è¡Œ pipelineã€‚</li>
<li>ä¸ä¼šå»è¯» main åˆ†æ”¯çš„ .gitlab-ci.ymlã€‚</li>
</ul>

























<table><thead><tr><th>æƒ…å†µ</th><th>ä½¿ç”¨å“ªä¸ª .gitlab-ci.yml?</th></tr></thead><tbody><tr><td>feature æœ‰ï¼Œmain æœ‰</td><td>âœ… ç”¨ feature çš„</td></tr><tr><td>feature æœ‰ï¼Œmain æ²¡æœ‰</td><td>âœ… ç”¨ feature çš„</td></tr><tr><td>feature æ²¡æœ‰ï¼Œmain æœ‰</td><td>âŒ pipeline ä¸ä¼šè§¦å‘ï¼ˆå› ä¸º source branch æ²¡æœ‰ .gitlab-ci.ymlï¼‰</td></tr><tr><td>ä¸¤è€…éƒ½æ²¡æœ‰</td><td>âŒ æ—  CI pipeline</td></tr></tbody></table>
<h3 data-id="heading-13">gitlab-ci.ymlä¼šæ‰§è¡Œæ›´å¤šè„šæœ¬ï¼Œè¿™äº›è„šæœ¬/é™æ€èµ„æºæ€ä¹ˆå­˜æ”¾</h3>
<p>æ¨èå°†å¤§èµ„æºï¼ˆå¦‚git CI/CDå¯ä»¥æ¥å…¥é€šè¿‡checkstyle.jaræ‰§è¡Œcheckstyleï¼Œå¯¹åº”çš„jaræ–‡ä»¶ï¼‰æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼Œå…¶ä»–çš„åˆ™å¯ä»¥æ”¾åœ¨å„è‡ªçš„ä»£ç ä»“åº“å†…</p>
<h3 data-id="heading-14">ä¸ºä»€ä¹ˆ GitLab Runner å®‰è£…æ—¶æ²¡æœ‰ gitlab-runner ç”¨æˆ·å°±æ— æ³•æ³¨å†Œï¼Ÿè¿™ä¸ªç”¨æˆ·ä»£è¡¨ä»€ä¹ˆï¼Ÿ</h3>
<p>å½“ä½ é€šè¿‡å®˜æ–¹æ–¹å¼å®‰è£… GitLab Runnerï¼ˆå¦‚ yum install gitlab-runner æˆ– dpkg -i gitlab-runner_xxx.debï¼‰ï¼Œå®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨ï¼š</p>
<ol start="0">
<li>åˆ›å»ºç³»ç»Ÿç”¨æˆ· gitlab-runner</li>
<li>ä»¥è¯¥ç”¨æˆ·èº«ä»½è¿è¡Œ runner æœåŠ¡</li>
<li>Runner åœ¨æ‰§è¡Œ job æ—¶ï¼Œæ‰€æœ‰å‘½ä»¤éƒ½ä»¥ gitlab-runner èº«ä»½è¿è¡Œ</li>
</ol>
<p>æ‰€ä»¥å¦‚æœæ‰‹åŠ¨çš„å®‰è£…ï¼Œå¯èƒ½ä¼šé”™è¿‡è¿™ä¸€æ­¥ï¼Œæœ€ç»ˆå¯¼è‡´æ— æ³•æ³¨å†Œrunneråˆ°gitlabä¸Šé¢</p>
<h3 data-id="heading-15">.gitlab-ci.ymlçš„å®Œæ•´å…‹éš†æ˜¯ä»€ä¹ˆæ„æ€</h3>
<p>ç­”æ¡ˆï¼šGitLab ä¼šå®Œæ•´å…‹éš†ï¼ˆcheckoutï¼‰æºåˆ†æ”¯ï¼ˆsource branchï¼‰çš„ä»£ç ï¼Œå¹¶ä½¿ç”¨è¯¥åˆ†æ”¯ä¸­çš„ .gitlab-ci.yml æ–‡ä»¶</p>
<ul>
<li>
<p>è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ï¼š</p>
<ul>
<li>åœ¨ Runner ä¸Šæ‰§è¡Œ git clone </li>
<li>git checkout ï¼ˆä¾‹å¦‚ feature/add-login çš„æœ€æ–° commitï¼‰</li>
<li>è¯»å–è¿™ä¸ª commit ä¸­çš„ .gitlab-ci.yml</li>
<li>æŒ‰ç…§å®ƒçš„å®šä¹‰æ‰§è¡Œ job</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥ï¼Œâ€œå®Œæ•´å…‹éš†â€åœ¨è¿™é‡Œçš„æ„æ€æ˜¯ï¼š</p>
<p>ä¸æ˜¯åªå¤åˆ¶ .gitlab-ci.yml æ–‡ä»¶ï¼Œè€Œæ˜¯æŠŠæ•´ä¸ªæºåˆ†æ”¯çš„ä»£ç ä»“åº“å®Œæ•´æ‹‰ä¸‹æ¥ï¼Œç¡®ä¿ CI é…ç½®å’Œä»£ç ç‰ˆæœ¬ä¸¥æ ¼ä¸€è‡´ã€‚</p>
<p>ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</p>
<ul>
<li>å¦‚æœä½ ä¿®æ”¹äº† .gitlab-ci.ymlï¼ˆæ¯”å¦‚åŠ äº†ä¸€ä¸ªæµ‹è¯• jobï¼‰ï¼Œåªæœ‰æ¨é€åˆ° æºåˆ†æ”¯ æ‰ä¼šåœ¨ MR ä¸­ç”Ÿæ•ˆã€‚</li>
<li>ç›®æ ‡åˆ†æ”¯ï¼ˆå¦‚ mainï¼‰çš„ .gitlab-ci.ymlå®Œå…¨ä¸ä¼šè¢«ä½¿ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-16">gitlab runneræ‹‰ä»£ç çš„æ—¶å€™æœ‰ä»€ä¹ˆçº§åˆ«å˜›ï¼Œæ¯”å¦‚ä¸€ä¸ªçº§åˆ«åªæ‹‰ä»£ç ï¼Œä¸€ä¸ªçº§åˆ«æŠŠå…¨éƒ¨çš„ä¿¡æ¯éƒ½æ‹‰å–ä¸‹æ¥ï¼Ÿå¦‚æœæœ‰ä¸åŒçº§åˆ«ï¼Œgitlabcicdæä¾›çš„å‚æ•°è¿˜ä¼šç”Ÿæ•ˆå—ï¼Ÿå¦‚ä½•é…ç½®ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ</h3>
<blockquote>
<p><strong>gitlab runneræ‹‰ä»£ç çš„æ—¶å€™æœ‰ä»€ä¹ˆçº§åˆ«å˜›ï¼Œæ¯”å¦‚ä¸€ä¸ªçº§åˆ«åªæ‹‰ä»£ç ï¼Œä¸€ä¸ªçº§åˆ«æŠŠå…¨éƒ¨çš„ä¿¡æ¯éƒ½æ‹‰å–ä¸‹æ¥ï¼Ÿ</strong></p>
</blockquote>
<p>GitLab Runner åœ¨æ‹‰å–ä»£ç æ—¶ï¼Œç¡®å®æ”¯æŒâ€œä¸åŒæ·±åº¦â€çš„å…‹éš†ï¼ˆclone depthï¼‰ï¼Œä½†æ²¡æœ‰â€œåªæ‹‰ä»£ç  / æ‹‰å…¨éƒ¨ä¿¡æ¯â€è¿™ç§äºŒå…ƒçº§åˆ«ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ§åˆ¶ æ‹‰å–å¤šå°‘ Git å†å²ï¼ˆcommit historyï¼‰ï¼š</p>
<ul>
<li>æµ…å…‹éš†ï¼ˆshallow cloneï¼‰ï¼šåªæ‹‰æœ€è¿‘ N ä¸ª commitï¼ˆé»˜è®¤è¡Œä¸ºï¼‰</li>
<li>æ·±å…‹éš†ï¼ˆfull cloneï¼‰ï¼šæ‹‰å–å®Œæ•´å†å²ï¼ˆæ‰€æœ‰åˆ†æ”¯ã€tagsã€å®Œæ•´ commit graphï¼‰</li>
</ul>
<p>æ³¨æ„ï¼šæ— è®ºå“ªç§æ–¹å¼ï¼Œéƒ½ä¼šæ‹‰å–å®Œæ•´çš„å½“å‰ commit çš„æ–‡ä»¶å†…å®¹ï¼ˆå³â€œä»£ç â€ï¼‰ã€‚</p>
<p>æ‰€è°“â€œåªæ‹‰ä»£ç â€å…¶å®æ˜¯è¯¯è§£ â€”â€” ä»£ç æ–‡ä»¶æ€»æ˜¯å®Œæ•´çš„ï¼ŒåŒºåˆ«åªåœ¨ å†å²è®°å½•æ˜¯å¦å®Œæ•´ã€‚
æµ…æ‹·è´ï¼Œæ·±æ‹·è´çš„åœ¨å„ä¸ªæ–¹é¢çš„ä¸åŒ</p>

























<table><thead><tr><th>é…ç½®</th><th>è¡Œä¸º</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>GIT_DEPTH: 1ï¼ˆé»˜è®¤ï¼‰</td><td>æµ…å…‹éš†ï¼šåªæ‹‰å½“å‰ commit + æœ€è¿‘ 1 å±‚å†å²</td><td>å¿«é€Ÿæ„å»ºã€èŠ‚çœå¸¦å®½</td></tr><tr><td>GIT_DEPTH: 0 æˆ–æœªè®¾ç½®</td><td>æ·±å…‹éš†ï¼šæ‹‰å–å®Œæ•´ä»“åº“å†å²ï¼ˆç­‰ä»·äº git clone --mirrorï¼‰</td><td>éœ€è¦ git logã€git describeã€è®¡ç®—ç‰ˆæœ¬å·ç­‰</td></tr><tr><td>GIT_DEPTH: 10</td><td>æ‹‰æœ€è¿‘ 10 ä¸ª commit çš„å†å²</td><td>æŠ˜ä¸­æ–¹æ¡ˆ</td></tr></tbody></table>
<p>ä¸åŒçš„é…ç½®æ¨èåœºæ™¯å¦‚ä¸‹ï¼š</p>





























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èé…ç½®</th></tr></thead><tbody><tr><td>æ™®é€šæ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²</td><td>GIT_DEPTH: 1ï¼ˆé»˜è®¤ï¼Œæœ€å¿«ï¼‰</td></tr><tr><td>éœ€è¦ç”Ÿæˆç‰ˆæœ¬å·ï¼ˆå¦‚ v1.2.3-5-gabc123ï¼‰</td><td>GIT_DEPTH: 0 + git fetch --tags</td></tr><tr><td>éœ€è¦åˆ†æ commit å·®å¼‚ï¼ˆå¦‚ changelogï¼‰</td><td>GIT_DEPTH: 0</td></tr><tr><td>ä½¿ç”¨ Lerna / Nx ç­‰å·¥å…·ä¾èµ– Git å†å²</td><td>GIT_DEPTH: 0</td></tr><tr><td>èŠ‚çœ CI æ—¶é—´å’Œå¸¦å®½</td><td>ä¿æŒé»˜è®¤ï¼ˆGIT_DEPTH: 1ï¼‰</td></tr></tbody></table>
<blockquote>
<p><strong>GitLab CI æä¾›çš„å‚æ•°è¿˜ä¼šç”Ÿæ•ˆå—ï¼Ÿ</strong></p>
</blockquote>
<p>ä¼šï¼å®Œå…¨ä¸å—å½±å“ã€‚</p>
<p>æ— è®ºä½ ç”¨æµ…å…‹éš†è¿˜æ˜¯æ·±å…‹éš†ï¼Œä»¥ä¸‹å†…å®¹éƒ½ æ­£å¸¸å¯ç”¨</p>
<blockquote>
<p>å¦‚ä½•é…ç½®ï¼Ÿ</p>
</blockquote>
<p>GitLab CI é€šè¿‡ä¸€ä¸ªå†…ç½®å˜é‡ GIT_DEPTH æ§åˆ¶å…‹éš†æ·±åº¦ï¼š</p>
<p>å¦‚ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">variables:</span>
  <span class="hljs-attr">GIT_DEPTH:</span> <span class="hljs-number">0</span>  <span class="hljs-comment"># æ‹‰å–å®Œæ•´å†å²</span>

<span class="hljs-attr">build:</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">git</span> <span class="hljs-string">log</span> <span class="hljs-string">--oneline</span> <span class="hljs-string">-n</span> <span class="hljs-number">5</span>   <span class="hljs-comment"># åªæœ‰ GIT_DEPTH &gt; 1 æˆ– =0 æ—¶æ‰æœ‰å¤šä¸ª commit</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">git</span> <span class="hljs-string">describe</span> <span class="hljs-string">--tags</span>      <span class="hljs-comment"># éœ€è¦å®Œæ•´ tag å†å²</span>
</code></pre>
<blockquote>
<p><strong>é»˜è®¤è¡Œä¸ºæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
</blockquote>
<p>GIT_DEPTH: 1ï¼ˆæµ…å…‹éš†ï¼Œé«˜æ•ˆï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Skills å®æˆ˜æŒ‡å—ï¼šä¸€é”®ç”Ÿæˆå…¬ä¼—å·å°é¢ï¼Œ3D æ’ç”» + æè¾¹æ ‡é¢˜ 3 ç§’å‡ºå›¾]]></title>    <link>https://juejin.cn/post/7572537221540708367</link>    <guid>https://juejin.cn/post/7572537221540708367</guid>    <pubDate>2025-11-16T02:03:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572537221540708367" data-draft-id="7572524368879255586" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Skills å®æˆ˜æŒ‡å—ï¼šä¸€é”®ç”Ÿæˆå…¬ä¼—å·å°é¢ï¼Œ3D æ’ç”» + æè¾¹æ ‡é¢˜ 3 ç§’å‡ºå›¾"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-16T02:03:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wwwzhouhui"/> <meta itemprop="url" content="https://juejin.cn/user/3428746411400537"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Skills å®æˆ˜æŒ‡å—ï¼šä¸€é”®ç”Ÿæˆå…¬ä¼—å·å°é¢ï¼Œ3D æ’ç”» + æè¾¹æ ‡é¢˜ 3 ç§’å‡ºå›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3428746411400537/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wwwzhouhui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T02:03:43.000Z" title="Sun Nov 16 2025 02:03:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä½ æ˜¯ä¸æ˜¯ç»å¸¸ä¸ºäº†åšä¸€å¼ å…¬ä¼—å·å°é¢å›¾è€Œçƒ¦æ¼ï¼Ÿæ‰“å¼€PSæˆ–è€…Figmaï¼Œè°ƒè‰²ã€æ’ç‰ˆã€æ‰¾ç´ æï¼ŒæŠ˜è…¾å¤§åŠå¤©è¿˜ä¸ä¸€å®šæ»¡æ„ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œæœ‰æ—¶å€™çµæ„Ÿæ¥äº†æƒ³ç«‹åˆ»å‘æ–‡ï¼Œå´è¢«å°é¢å›¾å¡ä½äº†è¿›åº¦ã€‚ä½œä¸ºä¸€ä¸ªæŠ€æœ¯åšä¸»ï¼Œæˆ‘æ·±æœ‰ä½“ä¼šâ€”â€”æˆ‘æƒ³ä¸“æ³¨äºå†™ä½œå’Œåˆ†äº«æŠ€æœ¯ï¼Œè€Œä¸æ˜¯åœ¨è®¾è®¡å·¥å…·ä¸Šè€—è´¹æ—¶é—´ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼Œç°åœ¨æœ‰äº†AIåŠ æŒï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥å½»åº•è§£å†³äº†ï¼æˆ‘æœ€è¿‘å¼€å‘äº†ä¸€ä¸ªå« mp-cover-generator çš„å·¥å…·ï¼Œå®ƒèƒ½æ ¹æ®ä½ çš„æ–‡ç« ä¸»é¢˜å’Œæ ‡é¢˜ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯çˆ±çš„3Dæ’ç”»é£æ ¼å°é¢å›¾ã€‚ä¸éœ€è¦è®¾è®¡åŠŸåº•ï¼Œä¸éœ€è¦PSæŠ€èƒ½ï¼Œåªè¦ä¸€å¥è¯æè¿°ï¼Œ3ç§’é’Ÿå°±èƒ½æå®šã€‚æœ€å…³é”®çš„æ˜¯ï¼Œç”Ÿæˆçš„å°é¢å›¾è¿˜ç‰¹åˆ«æœ‰è´¨æ„Ÿï¼Œç±»ä¼¼çš®å…‹æ–¯åŠ¨ç”»çš„é‚£ç§å¡é€šé£æ ¼ï¼Œé…ä¸Šé†’ç›®çš„æè¾¹æ ‡é¢˜ï¼Œè§†è§‰å†²å‡»åŠ›ç›´æ¥æ‹‰æ»¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c04b4370f2cd4d1cbe37db3280880e3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=Gn0%2FliSmVETPLtJt%2BYo%2BZRbCi%2Fk%3D" alt="image-20251115213038620" loading="lazy"/></p>
<p>è¿™ç¯‡æ–‡ç« æˆ‘å°±æ¥æ‰‹æŠŠæ‰‹æ•™ä½ æ€ä¹ˆç”¨è¿™ä¸ªå·¥å…·ï¼Œä»ç¯å¢ƒæ­å»ºåˆ°å®é™…ç”Ÿæˆå°é¢ï¼Œå…¨ç¨‹å›¾æ–‡è¯¦è§£ã€‚ä¸ç®¡ä½ æ˜¯å…¬ä¼—å·ä½œè€…ã€æŠ€æœ¯åšä¸»ï¼Œè¿˜æ˜¯è¿è¥å°ä¼™ä¼´ï¼Œçœ‹å®Œè¿™ç¯‡éƒ½èƒ½ç«‹åˆ»ä¸Šæ‰‹ï¼Œå½»åº•å‘Šåˆ«å°é¢å›¾åˆ¶ä½œçš„çƒ¦æ¼ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2176bd82631d436aad500f29e09829b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=ZRgjPcIimOyJAu5hAkEZSZYuKNU%3D" alt="ç”Ÿæˆè¿‡ç¨‹2" loading="lazy"/></p>
<h2 data-id="heading-1">é¡¹ç›®ä»‹ç»</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ mp-cover-generatorï¼Ÿ</h3>
<p>mp-cover-generatorï¼ˆå…¬ä¼—å·å°é¢ç”Ÿæˆå™¨ï¼‰æ˜¯ä¸€ä¸ªåŸºäº AI æŠ€æœ¯çš„è‡ªåŠ¨åŒ–å°é¢å›¾ç”Ÿæˆå·¥å…·ã€‚å®ƒçš„æ ¸å¿ƒç†å¿µå¾ˆç®€å•ï¼š<strong>è®©å†…å®¹åˆ›ä½œè€…ä¸“æ³¨äºå†…å®¹æœ¬èº«ï¼Œè€Œä¸æ˜¯åœ¨è®¾è®¡ä¸Šæµªè´¹æ—¶é—´</strong>ã€‚</p>
<p>è¿™ä¸ªå·¥å…·æœ€å¤§çš„äº®ç‚¹æœ‰ä¸‰ä¸ªï¼š</p>
<p><strong>1. AI é©±åŠ¨çš„åº•å›¾ç”Ÿæˆ</strong>
å®ƒé›†æˆäº†å³æ¢¦ AIï¼ˆå­—èŠ‚è·³åŠ¨æ——ä¸‹çš„å¤šæ¨¡æ€ AI ç”Ÿæˆå¹³å°ï¼‰ï¼Œèƒ½æ ¹æ®ä½ çš„ä¸»é¢˜å…³é”®è¯ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯çˆ±åœ†æ¶¦çš„ 3D æ’ç”»é£æ ¼åº•å›¾ã€‚ä½ è¯´"MCP æŠ€æœ¯æ•™ç¨‹"ï¼Œå®ƒå°±ç»™ä½ ç”Ÿæˆä¸€ä¸ªå¸¦ç€å¯çˆ±ç”µè„‘ã€AI å¤§è„‘ã€æ•™ç¨‹ä¹¦ç±çš„å¡é€šåœºæ™¯ã€‚é£æ ¼ç±»ä¼¼çš®å…‹æ–¯åŠ¨ç”»ï¼Œè´¨æ„ŸæŸ”å’Œï¼Œè‰²å½©æ˜å¿«ï¼Œçœ‹ç€å°±è®©äººèˆ’æœã€‚</p>
<p><strong>2. æè¾¹å¡é€šå­—ä½“ï¼Œè§†è§‰å†²å‡»åŠ›çˆ†è¡¨</strong>
ç”Ÿæˆçš„å°é¢æ ‡é¢˜ä¸æ˜¯æ™®é€šçš„æ–‡å­—ï¼Œè€Œæ˜¯å¸¦æœ‰å¤šå±‚æè¾¹æ•ˆæœçš„å¡é€šå­—ä½“ã€‚ä¸»æ ‡é¢˜ç”¨çº¢è‰²é…ç™½è‰²æè¾¹ï¼Œå‰¯æ ‡é¢˜ç”¨æ©™é»„è‰²é…æ·±æ£•è‰²æè¾¹ï¼Œ8 ä¸ªæ–¹å‘çš„æ–‡å­—é˜´å½±æ¨¡æ‹Ÿå‡ºåšé‡çš„è½®å»“ï¼Œå†åŠ ä¸Šç«‹ä½“é˜´å½±å¢å¼ºè§†è§‰å†²å‡»åŠ›ã€‚è¿™ç§æ•ˆæœåœ¨å…¬ä¼—å·å°é¢ä¸Šéå¸¸å¸ç›ï¼Œèƒ½å¤§å¹…æå‡æ–‡ç« çš„ç‚¹å‡»ç‡ã€‚</p>
<p><strong>3. åŒæ ¼å¼è¾“å‡ºï¼Œéšå¿ƒæ‰€æ¬²</strong>
å·¥å…·ä¼šè‡ªåŠ¨ç”Ÿæˆ HTML å’Œé«˜æ¸…å›¾ç‰‡ä¸¤ç§æ ¼å¼ã€‚HTML æ–‡ä»¶å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆå’Œç¼–è¾‘ï¼Œå›¾ç‰‡æ ¼å¼åˆ™æ”¯æŒ PNGï¼ˆæ— æŸé«˜è´¨é‡ï¼‰å’Œ JPEGï¼ˆå‹ç¼©èŠ‚çœç©ºé—´ï¼‰ä¸¤ç§ã€‚æœ€ç»ˆè¾“å‡ºçš„å›¾ç‰‡åˆ†è¾¨ç‡è¾¾åˆ° 5120x2916 åƒç´ ï¼Œ2 å€åƒç´ å¯†åº¦ï¼Œæ— è®ºæ˜¯åœ¨æ‰‹æœºä¸Šçœ‹è¿˜æ˜¯æ‰“å°å‡ºæ¥ï¼Œéƒ½éå¸¸æ¸…æ™°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4aefd5cd8faa4ef7962ba252bfbf9a04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=Bjcod5hLugtiEQ6LxrzOzerDCcg%3D" alt="image-20251115212415744" loading="lazy"/></p>
<h3 data-id="heading-3">æŠ€æœ¯æ¶æ„</h3>
<p>mp-cover-generator çš„æŠ€æœ¯æ ˆéå¸¸ç°ä»£ï¼š</p>
<ul>
<li><strong>AI å›¾åƒç”Ÿæˆ</strong>ï¼šåŸºäº jimeng-mcp-serverï¼ˆå³æ¢¦ AI çš„ MCP åè®®å°è£…ï¼‰ï¼Œæ”¯æŒæ–‡ç”Ÿå›¾åŠŸèƒ½</li>
<li><strong>å‰ç«¯æŠ€æœ¯</strong>ï¼šHTML5 + CSS3ï¼Œä½¿ç”¨å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¤šç§å±å¹•å°ºå¯¸</li>
<li><strong>æˆªå›¾å¼•æ“</strong>ï¼šPlaywrightï¼ˆå¾®è½¯å¼€æºçš„æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ï¼‰ï¼Œå®ç° HTML åˆ°å›¾ç‰‡çš„é«˜è´¨é‡è½¬æ¢</li>
<li><strong>å®¹å™¨åŒ–éƒ¨ç½²</strong>ï¼šjimeng-free-api-all Docker å®¹å™¨ï¼Œæä¾›ç¨³å®šçš„ AI å›¾åƒç”ŸæˆæœåŠ¡</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcae215abf4a4a27baec371892ff0117~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=GWisf%2FDz3jBCQJuLbtLfilRw89g%3D" alt="image-20251115212549474" loading="lazy"/></p>
<p>æ•´ä¸ªå·¥å…·çš„å·¥ä½œæµç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼š</p>
<ol>
<li>ç”¨æˆ·æä¾›ä¸»é¢˜å…³é”®è¯å’Œæ ‡é¢˜æ–‡å­—</li>
<li>è°ƒç”¨ jimeng-mcp-server ç”Ÿæˆ 3D æ’ç”»é£æ ¼åº•å›¾ï¼ˆè¿”å› 4 å¼ å¯é€‰ï¼‰</li>
<li>å åŠ æ–‡å­—å±‚ç”Ÿæˆ HTMLï¼Œä½¿ç”¨ Playwright è½¬æ¢ä¸ºé«˜æ¸…å›¾ç‰‡</li>
</ol>
<p>è¿™ä¸ªæµç¨‹å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œä»è¾“å…¥åˆ°è¾“å‡ºåªéœ€è¦ 10-20 ç§’ï¼Œæ•ˆç‡æé«˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6e59aebc79b4eeb95a7279e70d5b88e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=rXvzqOd9hFI6MeXvT7v67HKA4fk%3D" alt="image-20251115212518494" loading="lazy"/></p>
<h3 data-id="heading-4">é€‚ç”¨åœºæ™¯</h3>
<p>mp-cover-generator ç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li><strong>å…¬ä¼—å·æ–‡ç« å°é¢</strong>ï¼šæŠ€æœ¯åšå®¢ã€ç”Ÿæ´»åˆ†äº«ã€è¡Œä¸šèµ„è®¯ç­‰å„ç±»æ–‡ç« </li>
<li><strong>ç¤¾äº¤åª’ä½“æ¨ªå¹…å›¾</strong>ï¼šå¾®åšã€çŸ¥ä¹ã€å°çº¢ä¹¦ç­‰å¹³å°çš„é…å›¾</li>
<li><strong>æŠ€æœ¯åšå®¢å¤´å›¾</strong>ï¼šæ˜é‡‘ã€CSDNã€åšå®¢å›­ç­‰æŠ€æœ¯å¹³å°çš„æ–‡ç« é…å›¾</li>
<li><strong>å®£ä¼ æµ·æŠ¥å¿«é€Ÿè®¾è®¡</strong>ï¼šæ´»åŠ¨é¢„å‘Šã€è¯¾ç¨‹æ¨å¹¿ç­‰è½»é‡çº§è®¾è®¡éœ€æ±‚</li>
</ul>
<p>åªè¦ä½ éœ€è¦å›¾æ–‡ç»“åˆçš„è®¾è®¡ï¼Œå¹¶ä¸”æƒ³è¦å¯çˆ±çš„ 3D æ’ç”»é£æ ¼ï¼Œmp-cover-generator éƒ½èƒ½å¸®ä½ æå®šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3ec3941f1eb4c5487fb0bfe85a7148f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=pIQjeJYbwGzgL7yfc%2Bl8l3kJ6pw%3D" alt="image-20251115212639081" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4ce1b9421f640279c1de067810d5fd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=4KLzdwVZ7YjvKSLESw5QA26xqqw%3D" alt="image-20251115212704574" loading="lazy"/></p>
<h2 data-id="heading-5">éƒ¨ç½²å®æˆ˜</h2>
<p>å¥½äº†ï¼Œç†è®ºè®²å®Œäº†ï¼Œå’±ä»¬ç›´æ¥ä¸Šæ‰‹æ“ä½œï¼ä¸‹é¢æˆ‘ä¼šä¸€æ­¥æ­¥å¸¦ä½ å®Œæˆç¯å¢ƒæ­å»ºå’Œå®é™…ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-6">ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡</h3>
<p>åœ¨ä½¿ç”¨ mp-cover-generator ä¹‹å‰ï¼Œä½ éœ€è¦å‡†å¤‡ä»¥ä¸‹ç¯å¢ƒï¼š</p>
<p><strong>1. å®‰è£… Docker</strong></p>
<p>jimeng-free-api-all æ˜¯é€šè¿‡ Docker å®¹å™¨è¿è¡Œçš„ï¼Œæ‰€ä»¥é¦–å…ˆè¦å®‰è£… Dockerã€‚</p>
<p>Linux/Mac ç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… Dockerï¼ˆä»¥ Ubuntu ä¸ºä¾‹ï¼‰</span>
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

<span class="hljs-comment"># å¯åŠ¨ Docker æœåŠ¡</span>
sudo systemctl start docker
sudo systemctl <span class="hljs-built_in">enable</span> docker
</code></pre>
<p>Windows ç”¨æˆ·ï¼š
è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.docker.com%2Fproducts%2Fdocker-desktop" target="_blank" title="https://www.docker.com/products/docker-desktop" ref="nofollow noopener noreferrer">Docker Desktop å®˜ç½‘</a> ä¸‹è½½å¹¶å®‰è£… Docker Desktopã€‚</p>
<p><strong>2. å®‰è£… Node.js</strong></p>
<p>Playwright éœ€è¦ Node.js 16+ ç¯å¢ƒã€‚æˆ‘ä»¬å¯ä»¥å»<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fzh-cn%2Fdownload" target="_blank" title="https://nodejs.org/zh-cn/download" ref="nofollow noopener noreferrer">nodejs.org/zh-cn/downlâ€¦</a>  ä¸‹è½½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be9e119e02f24c138a9206c6b72dc66d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=yqAl%2B6YxXrFXtGkjTmEqqhMlrTA%3D" alt="image-20251115201350566" loading="lazy"/></p>
<p>Linux/Mac ç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ nvm å®‰è£… Node.jsï¼ˆæ¨èï¼‰</span>
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh | bash
<span class="hljs-comment"># in lieu of restarting the shell</span>
\. <span class="hljs-string">"<span class="hljs-variable">$HOME</span>/.nvm/nvm.sh"</span>
<span class="hljs-comment"># Download and install Node.js:</span>
nvm install 22
<span class="hljs-comment"># Verify the Node.js version:</span>
node -v <span class="hljs-comment"># Should print "v22.19.0".</span>
<span class="hljs-comment"># Verify npm version:</span>
npm -v <span class="hljs-comment"># Should print "10.9.3".</span>
</code></pre>
<p>Windows ç”¨æˆ·ï¼š
è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2F" target="_blank" title="https://nodejs.org/" ref="nofollow noopener noreferrer">Node.js å®˜ç½‘</a> ä¸‹è½½å¹¶å®‰è£… LTS ç‰ˆæœ¬ã€‚</p>
<p><strong>3. å®‰è£… Python 3.10+</strong></p>
<p>jimeng-mcp-server éœ€è¦ Python ç¯å¢ƒã€‚</p>
<p>Linux/Mac ç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ Python ç‰ˆæœ¬</span>
python3 --version
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abf20da5df664f119a851957834f13c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=xlfUeS7zZc2WLiWJ0eK0c5dOq8M%3D" alt="image-20251115095759755" loading="lazy"/></p>
<p>Windows ç”¨æˆ·ï¼š
è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.python.org%2F" target="_blank" title="https://www.python.org/" ref="nofollow noopener noreferrer">Python å®˜ç½‘</a> ä¸‹è½½å¹¶å®‰è£… Python 3.10+ã€‚</p>
<h3 data-id="heading-7">ç¬¬äºŒæ­¥ï¼šå¯åŠ¨ jimeng-free-api-all å®¹å™¨</h3>
<p>jimeng-free-api-all æ˜¯å³æ¢¦ AI çš„å…è´¹ API æœåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯åŠ¨è¿™ä¸ªå®¹å™¨ã€‚</p>
<p><strong>ä¸‹è½½é•œåƒï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">docker pull wwwzhouhui569/jimeng-free-api-all:latest
</code></pre>
<p><strong>å¯åŠ¨ Docker å®¹å™¨ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">docker run -it -d --init \
  --name jimeng-free-api-all \
  -p 8001:8000 \
  -e TZ=Asia/Shanghai \
  wwwzhouhui569/jimeng-free-api-all:latest
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ca97c09614047e0a9b3265f25eb8c39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=i8WmfBmFCQ5ohNjdVwsgoyr50xs%3D" alt="å¯åŠ¨å®¹å™¨" loading="lazy"/></p>
<p><strong>éªŒè¯å®¹å™¨çŠ¶æ€ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨æ˜¯å¦å¯åŠ¨æˆåŠŸ</span>
docker ps | grep jimeng

<span class="hljs-comment"># æµ‹è¯• API æ˜¯å¦å¯ç”¨</span>
curl http://localhost:8001
</code></pre>
<p>å¦‚æœçœ‹åˆ°ç±»ä¼¼ <code>{"message":"Welcome to Jimeng Free API"}</code> çš„å“åº”ï¼Œè¯´æ˜å®¹å™¨å¯åŠ¨æˆåŠŸã€‚</p>
<h3 data-id="heading-8">ç¬¬ä¸‰æ­¥ï¼šè·å–å³æ¢¦ API å¯†é’¥</h3>
<p>è¦ä½¿ç”¨å³æ¢¦ AI çš„å›¾åƒç”ŸæˆæœåŠ¡ï¼Œéœ€è¦è·å– API å¯†é’¥ï¼ˆå³ sessionidï¼‰ã€‚</p>
<p><strong>è·å–æ­¥éª¤ï¼š</strong></p>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fjimeng.jianying.com%2F" target="_blank" title="https://jimeng.jianying.com/" ref="nofollow noopener noreferrer">å³æ¢¦ AI å®˜ç½‘</a> å¹¶ç™»å½•ï¼ˆå¯ä»¥ç”¨æŠ–éŸ³è´¦å·ç™»å½•ï¼‰</li>
<li>æŒ‰ <strong>F12</strong> æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·</li>
<li>åˆ‡æ¢åˆ° <strong>Application</strong> æ ‡ç­¾é¡µï¼ˆChromeï¼‰æˆ– <strong>å­˜å‚¨</strong> æ ‡ç­¾é¡µï¼ˆFirefoxï¼‰</li>
<li>æ‰¾åˆ° <strong>Cookies</strong> ä¸‹çš„ <strong>sessionid</strong> å€¼ï¼Œå¤åˆ¶å®ƒ</li>
<li>å°†è¿™ä¸ªå€¼ä¿å­˜ä¸‹æ¥ï¼Œåé¢ä¼šç”¨åˆ°</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43bdf049f87f417db3f7f66ce50d666f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=t%2Bh2Rc%2Ba%2FstBokMjNx2GdAyKTQE%3D" alt="è·å– sessionid" loading="lazy"/></p>
<p><strong>æ³¨æ„ï¼š</strong> å³æ¢¦ AI å…è´¹å±‚æ¯å¤©æä¾› <strong>88 ç§¯åˆ†</strong>ï¼Œæ¯æ¬¡ç”Ÿæˆå›¾ç‰‡æ¶ˆè€— 1-2 ç§¯åˆ†ï¼Œå®Œå…¨å¤Ÿæ—¥å¸¸ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-9">ç¬¬å››æ­¥ï¼šå®‰è£… jimeng-mcp-server</h3>
<p>jimeng-mcp-server æ˜¯å³æ¢¦ AI çš„ MCP åè®®å°è£…ï¼Œè®©æˆ‘ä»¬èƒ½åœ¨ Claude Code ä¸­ç›´æ¥è°ƒç”¨ã€‚</p>
<p><strong>å…‹éš†é¡¹ç›®ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš† jimeng-mcp-server é¡¹ç›®</span>
git <span class="hljs-built_in">clone</span> https://github.com/wwwzhouhui/jimeng-mcp-server.git
<span class="hljs-built_in">cd</span> jimeng-mcp-server
</code></pre>
<p><strong>å®‰è£… Python ä¾èµ–ï¼š</strong></p>
<p>é¡¹ç›®ä½¿ç”¨ <code>uv</code> ä½œä¸ºåŒ…ç®¡ç†å·¥å…·ï¼ˆæ¨èï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„ pipã€‚</p>
<p><strong>æ–¹æ³•ä¸€ï¼šä½¿ç”¨ uvï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… uvï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰</span>
curl -LsSf https://astral.sh/uv/install.sh | sh

<span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–</span>
uv venv
<span class="hljs-built_in">source</span> .venv/bin/activate  <span class="hljs-comment"># Linux/macOS</span>
<span class="hljs-comment"># æˆ–è€…åœ¨ Windows ä¸Šä½¿ç”¨: .venv\Scripts\activate</span>

uv pip install -e .
</code></pre>
<p><strong>æ–¹æ³•äºŒï¼šä½¿ç”¨ pip</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
python -m venv .venv
<span class="hljs-built_in">source</span> .venv/bin/activate  <span class="hljs-comment"># Linux/macOS</span>
<span class="hljs-comment"># æˆ–è€…åœ¨ Windows ä¸Šä½¿ç”¨: .venv\Scripts\activate</span>

<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
pip install -e .
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b27e1dc57e042a3b480ee857eb9e43a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=6Yn0C6d8DJB42cFXDO%2Fd4kHToaE%3D" alt="å®‰è£…ä¾èµ–" loading="lazy"/></p>
<p>å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚</p>
<p><strong>é…ç½® MCP æœåŠ¡å™¨ï¼š</strong></p>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶é…ç½®åç«¯ API åœ°å€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">touch</span> .<span class="hljs-built_in">env</span>
</code></pre>
<p>ç¼–è¾‘ <code>.env</code> æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-env" lang="env"># å³æ¢¦APIé…ç½®

# æ‚¨çš„å³æ¢¦APIå¯†é’¥ï¼ˆå¿…éœ€ï¼‰
JIMENG_API_KEY=ä½ çš„sessionidå€¼

# APIåŸºç¡€URLï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º https://jimeng.duckcloud.funï¼‰
JIMENG_API_URL=http://127.0.0.1:8001

# å›¾åƒç”Ÿæˆçš„é»˜è®¤æ¨¡å‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º jimeng-4.0ï¼‰
JIMENG_MODEL=jimeng-3.1
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acb0ce2f23fe45deb9718572b1c18a19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=wxqJMvm%2BKKewYqQSWcnTzcKSJos%3D" alt="é…ç½®ç¯å¢ƒå˜é‡" loading="lazy"/></p>
<p><strong>æ³¨æ„ï¼š</strong> å°† <code>JIMENG_API_KEY</code> æ›¿æ¢ä¸ºä½ åœ¨ç¬¬ä¸‰æ­¥è·å–çš„ sessionid å€¼ã€‚</p>
<h3 data-id="heading-10">ç¬¬äº”æ­¥ï¼šCherry Studioé…ç½®</h3>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Claude Desktop æˆ– Cherry Studioï¼Œéœ€è¦é…ç½® MCP æœåŠ¡å™¨ã€‚</p>
<p><strong>Claude Desktop é…ç½®ï¼š</strong></p>
<p>æ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼ˆä¸åŒæ“ä½œç³»ç»Ÿä½ç½®ä¸åŒï¼‰ï¼š</p>
<ul>
<li><strong>macOS</strong>: <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></li>
<li><strong>Windows</strong>: <code>%APPDATA%\Claude\claude_desktop_config.json</code></li>
<li><strong>Linux</strong>: <code>~/.config/Claude/claude_desktop_config.json</code></li>
</ul>
<p>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"jimeng-mcp-server"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"jimeng_mcp.server"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"JIMENG_API_KEY"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„sessionidå€¼"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"JIMENG_API_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://127.0.0.1:8001"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æˆ–è€…ï¼Œå¦‚æœä½ å·²ç»é…ç½®äº† <code>.env</code> æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"jimeng-mcp-server"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"jimeng_mcp.server"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Cherry Studio SSE æ¨¡å¼é…ç½®ï¼š</strong></p>
<p>å¦‚æœä½ ä½¿ç”¨ Cherry Studioï¼Œå¯ä»¥ç”¨ SSE æ¨¡å¼ï¼š</p>
<ol>
<li>å¯åŠ¨ SSE æœåŠ¡å™¨ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> jimeng-mcp-server
<span class="hljs-built_in">source</span> .venv/bin/activate
python -m jimeng_mcp.server --transport sse --port 8080
</code></pre>
<ol start="2">
<li>åœ¨ Cherry Studio ä¸­æ·»åŠ  MCP æœåŠ¡å™¨ï¼š</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2a7823b1121428a828fa0739c9a4fb5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=xL7EMr0MhTgyZCf%2BS%2BYqVzJO%2B4U%3D" alt="Cherry Studio SSEé…ç½®" loading="lazy"/></p>
<p>é…ç½®å®Œæˆåï¼Œé‡å¯ Claude Desktop æˆ– Cherry Studioï¼ŒMCP æœåŠ¡å™¨å°±ä¼šè‡ªåŠ¨åŠ è½½ã€‚</p>
<h3 data-id="heading-11">ç¬¬å…­æ­¥ï¼šå®‰è£… mp-cover-generator</h3>
<p>ç°åœ¨å¯ä»¥å®‰è£… mp-cover-generator äº†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®</span>
git <span class="hljs-built_in">clone</span> https://github.com/wwwzhouhui/skills_collection.git
<span class="hljs-built_in">cd</span> skills_collection/mp-cover-generator

<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm install

<span class="hljs-comment"># Playwright ä¼šè‡ªåŠ¨å®‰è£… Chromium æµè§ˆå™¨</span>
<span class="hljs-comment"># å¦‚æœæ²¡æœ‰è‡ªåŠ¨å®‰è£…ï¼Œæ‰‹åŠ¨æ‰§è¡Œï¼š</span>
npx playwright install chromium
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œé¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">mp-cover-generator/
â”œâ”€â”€ SKILL.md              <span class="hljs-comment"># Skill è¯¦ç»†æ–‡æ¡£</span>
â”œâ”€â”€ README.md             <span class="hljs-comment"># ä½¿ç”¨è¯´æ˜</span>
â”œâ”€â”€ package.json          <span class="hljs-comment"># npm é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ capture.js        <span class="hljs-comment"># HTML è½¬å›¾ç‰‡è„šæœ¬</span>
â””â”€â”€ resources/            <span class="hljs-comment"># ç¤ºä¾‹æ–‡ä»¶</span>
</code></pre>
<h3 data-id="heading-12">ç¬¬ä¸ƒæ­¥ï¼šç”Ÿæˆç¬¬ä¸€å¼ å°é¢å›¾</h3>
<p>ç¯å¢ƒæ­å»ºå®Œæˆï¼Œç°åœ¨æ¥ç”Ÿæˆç¬¬ä¸€å¼ å°é¢å›¾ï¼</p>
<p><strong>åœ¨ Claude Code ä¸­ç›´æ¥è¾“å…¥ï¼š</strong></p>
<pre><code class="hljs">è¯·ä½¿ç”¨ mp-cover-generator skill ç”Ÿæˆä¸€ä¸ª MCPæ¡ˆä¾‹åˆ†äº« claudeè°ƒç”¨AIç”Ÿå›¾è§†é¢‘æ•™ç¨‹ ä»‹ç»çš„æ–‡ç« çš„å…¬ä¼—å·å°é¢
</code></pre>
<p>Claude ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><strong>è°ƒç”¨ jimeng-mcp-server</strong> ç”Ÿæˆ 3D æ’ç”»åº•å›¾ï¼ˆè¿”å› 4 å¼ å¯é€‰å›¾ç‰‡ï¼‰</li>
<li><strong>é€‰æ‹©ç¬¬ä¸€å¼ å›¾ç‰‡</strong>ï¼Œå åŠ æ–‡å­—å±‚ç”Ÿæˆ HTML</li>
<li><strong>ä½¿ç”¨ Playwright</strong> è½¬æ¢ä¸º PNG å’Œ JPEG å›¾ç‰‡</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹å¤§çº¦ <strong>20 ç§’</strong>ï¼Œä½ ä¼šå¾—åˆ°ï¼š</p>
<ul>
<li><code>mcp_tutorial_cover_YYYYMMDD.html</code> - HTML æ–‡ä»¶</li>
<li><code>mcp_tutorial_cover_YYYYMMDD.png</code> - PNG å›¾ç‰‡ï¼ˆçº¦ 4-5 MBï¼‰</li>
<li><code>mcp_tutorial_cover_YYYYMMDD.jpg</code> - JPEG å›¾ç‰‡ï¼ˆçº¦ 1.5 MBï¼‰</li>
</ul>
<p><strong>ç”Ÿæˆè¿‡ç¨‹æˆªå›¾ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e10c33d285f45bba3aca7318e9e19c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=JVZeh0Ycr7bxtUC2nvDRTzAjktE%3D" alt="ç”Ÿæˆè¿‡ç¨‹1" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91de57866fe84cfdb58c49fe122b7eeb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=CoHbV3s%2FCvGA1NaZlYUkbHX4m7c%3D" alt="ç”Ÿæˆè¿‡ç¨‹2" loading="lazy"/></p>
<p><strong>æ–¹å¼äºŒï¼šæ‰‹åŠ¨è½¬æ¢ HTML ä¸ºå›¾ç‰‡</strong></p>
<p>å¦‚æœä½ å·²ç»æœ‰äº† HTML æ–‡ä»¶ï¼Œæƒ³å•ç‹¬è½¬æ¢ä¸ºå›¾ç‰‡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è½¬æ¢ä¸º PNGï¼ˆæ— æŸé«˜è´¨é‡ï¼‰</span>
node scripts/capture.js your_cover.html your_cover.png

<span class="hljs-comment"># è½¬æ¢ä¸º JPEGï¼ˆå‹ç¼©ç‰ˆæœ¬ï¼‰</span>
node scripts/capture.js your_cover.html your_cover.jpg --quality 95

<span class="hljs-comment"># è‡ªå®šä¹‰å‚æ•°</span>
node scripts/capture.js cover.html cover.png \
  --width 2560 \
  --height 1097 \
  --scale 2 \
  --<span class="hljs-built_in">wait</span> 3000
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>--width</code>: è§†å£å®½åº¦ï¼ˆåƒç´ ï¼‰ï¼Œé»˜è®¤ 2560</li>
<li><code>--height</code>: è§†å£é«˜åº¦ï¼ˆåƒç´ ï¼‰ï¼Œé»˜è®¤ 1097</li>
<li><code>--quality</code>: JPEG è´¨é‡ï¼ˆ1-100ï¼‰ï¼Œé»˜è®¤ 95</li>
<li><code>--wait</code>: ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ 2000</li>
<li><code>--scale</code>: è®¾å¤‡åƒç´ æ¯”ï¼Œé»˜è®¤ 2ï¼ˆè¾“å‡º 2 å€é«˜æ¸…å›¾ï¼‰</li>
</ul>
<h3 data-id="heading-13">ç¬¬å…«æ­¥ï¼šæŸ¥çœ‹ç”Ÿæˆæ•ˆæœ</h3>
<p>ç”Ÿæˆå®Œæˆåï¼Œç”¨æµè§ˆå™¨æ‰“å¼€ HTML æ–‡ä»¶ï¼Œæˆ–è€…ç›´æ¥æŸ¥çœ‹å›¾ç‰‡ã€‚</p>
<p><strong>å°é¢å›¾ç‰¹ç‚¹ï¼š</strong></p>
<p><strong>è§†è§‰é£æ ¼ï¼š</strong></p>
<ul>
<li>ä¸»é¢˜é£æ ¼ï¼šå¯çˆ±ã€åœ†æ¶¦ã€ç®€æ´çš„ 3D æ’ç”»</li>
<li>è´¨æ„Ÿï¼šç±»ä¼¼çš®å…‹æ–¯åŠ¨ç”»æˆ–é»åœŸå®šæ ¼åŠ¨ç”»</li>
<li>è‰²å½©ï¼šå’Œè°æ˜å¿«ï¼Œä½é¥±å’Œåº¦æ¸å˜èƒŒæ™¯</li>
<li>æ„å›¾ï¼šå³å›¾å·¦æ–‡ï¼Œä¸»ä½“ä½äºå³ä¾§ 30-40% åŒºåŸŸ</li>
<li>ç•™ç™½ï¼šå·¦ä¾§ 60-70% å¹²å‡€ç•™ç™½ä¾›æ–‡å­—æ˜¾ç¤º</li>
</ul>
<p><strong>æ–‡å­—æ ·å¼ï¼ˆæ ¸å¿ƒäº®ç‚¹ï¼‰ï¼š</strong></p>
<ul>
<li><strong>ä¸»æ ‡é¢˜</strong>ï¼šçº¢è‰²ï¼ˆ#FF3333ï¼‰+ ç™½è‰²æè¾¹ï¼Œ8 æ–¹å‘æ–‡å­—é˜´å½±</li>
<li><strong>å‰¯æ ‡é¢˜</strong>ï¼šæ©™é»„è‰²ï¼ˆ#FFB84Dï¼‰+ æ·±æ£•è‰²æè¾¹ï¼Œå•è¡Œä¸æŠ˜è¡Œ</li>
<li><strong>ç«‹ä½“æ„Ÿ</strong>ï¼šå¤šå±‚é˜´å½±æ¨¡æ‹Ÿæè¾¹ + é¢å¤–ç«‹ä½“é˜´å½±</li>
<li><strong>ä½ç½®</strong>ï¼šå‚ç›´å±…ä¸­ï¼ˆ<code>top: 50%; transform: translateY(-50%);</code>ï¼‰</li>
<li><strong>å­—å·</strong>ï¼š5vwï¼ˆå¤§å­—ä½“ï¼Œå“åº”å¼ï¼‰</li>
</ul>
<p><strong>è‡ªåŠ¨ç”Ÿæˆä¿¡æ¯ï¼š</strong></p>
<ul>
<li><strong>æ—¥æœŸ</strong>ï¼šè‡ªåŠ¨æ˜¾ç¤ºå½“å‰æ—¥æœŸï¼ˆæ ¼å¼ï¼šFri. 11.15ï¼‰</li>
<li><strong>ä½œè€…</strong>ï¼šå›ºå®šæ˜¾ç¤º"O3sky"</li>
<li><strong>åˆ†è¾¨ç‡</strong>ï¼š5120x2916 åƒç´ ï¼ˆå®Œæ•´é¡µé¢æˆªå›¾ï¼Œæ— æˆªæ–­ï¼‰</li>
</ul>
<p>å¦‚æœå¯¹åº•å›¾ä¸æ»¡æ„ï¼Œå¯ä»¥é‡æ–°ç”Ÿæˆã€‚jimeng-mcp-server æ¯æ¬¡ä¼šè¿”å› <strong>4 å¼ ä¸åŒé£æ ¼çš„å›¾ç‰‡</strong>ï¼Œä½ å¯ä»¥é€‰æ‹©æœ€å–œæ¬¢çš„ä¸€å¼ ã€‚</p>
<h3 data-id="heading-14">ç¬¬ä¹æ­¥ï¼šè‡ªå®šä¹‰å°é¢æ ·å¼</h3>
<p>å¦‚æœä½ æƒ³è‡ªå®šä¹‰å°é¢çš„æ ·å¼ï¼Œå¯ä»¥ç¼–è¾‘ HTML æ–‡ä»¶ã€‚ä¸»è¦å¯è°ƒæ•´çš„éƒ¨åˆ†ï¼š</p>
<p><strong>1. ä¿®æ”¹æ ‡é¢˜é¢œè‰²</strong>
åœ¨ CSS ä¸­æ‰¾åˆ° <code>.headline-main</code> å’Œ <code>.headline-secondary</code>ï¼Œä¿®æ”¹ <code>color</code> å±æ€§ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.headline-main</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#FF3333</span>;  <span class="hljs-comment">/* ä¸»æ ‡é¢˜é¢œè‰²ï¼Œæ”¹ä¸ºä½ å–œæ¬¢çš„é¢œè‰² */</span>
}

<span class="hljs-selector-class">.headline-secondary</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#FFB84D</span>;  <span class="hljs-comment">/* å‰¯æ ‡é¢˜é¢œè‰² */</span>
}
</code></pre>
<p><strong>2. è°ƒæ•´æ ‡é¢˜ä½ç½®</strong>
é»˜è®¤æ˜¯å‚ç›´å±…ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥æ”¹æˆé ä¸Šæˆ–é ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.headline</span> {
    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;  <span class="hljs-comment">/* å‚ç›´å±…ä¸­ */</span>
    <span class="hljs-comment">/* top: 20%; æ”¹ä¸ºé ä¸Š */</span>
    <span class="hljs-comment">/* top: 70%; æ”¹ä¸ºé ä¸‹ */</span>
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">50%</span>);
}
</code></pre>
<p><strong>3. ä¿®æ”¹å­—ä½“å¤§å°</strong>
é»˜è®¤å­—å·æ˜¯ 5vwï¼ˆå“åº”å¼ï¼‰ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.headline</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">5vw</span>;  <span class="hljs-comment">/* æ”¹ä¸º 6vw ä¼šæ›´å¤§ï¼Œ4vw ä¼šæ›´å° */</span>
}
</code></pre>
<p><strong>4. æ›´æ¢ä½œè€…å</strong>
åœ¨ HTML ä¸­æ‰¾åˆ° <code>.author</code> éƒ¨åˆ†ï¼Œä¿®æ”¹æ–‡å­—å†…å®¹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"author"</span>&gt;</span>O3sky<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>  <span class="hljs-comment">&lt;!-- æ”¹ä¸ºä½ çš„åå­— --&gt;</span>
</code></pre>
<p>ä¿®æ”¹å®Œæˆåï¼Œé‡æ–°è¿è¡Œ capture.js è½¬æ¢ä¸ºå›¾ç‰‡å³å¯ã€‚</p>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>ä»Šå¤©ä¸»è¦å¸¦å¤§å®¶äº†è§£å¹¶å®ç°äº† <strong>mp-cover-generatorï¼ˆå…¬ä¼—å·å°é¢ç”Ÿæˆå™¨ï¼‰</strong> çš„ å®Œæ•´éƒ¨ç½²ä¸ä½¿ç”¨æµç¨‹ï¼Œè¯¥ å¼€æºè‡ªåŠ¨åŒ–å·¥å…· ä»¥ "AIå›¾åƒç”Ÿæˆ + æè¾¹å¡é€šå­—ä½“ + å®Œæ•´é¡µé¢æˆªå›¾" ä¸ºæ ¸å¿ƒä¼˜åŠ¿ï¼Œç»“åˆ å†…å®¹åˆ›ä½œæ•ˆç‡æå‡ éœ€æ±‚ï¼Œé€šè¿‡ jimeng-mcp-serveré›†æˆ ä¸ Playwrightæµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Œå½¢æˆäº†ä¸€å¥—ä» <strong>AIåº•å›¾ç”Ÿæˆ</strong> åˆ° <strong>é«˜æ¸…å°é¢è¾“å‡º</strong> çš„å…¨é“¾è·¯ <strong>å…¬ä¼—å·å°é¢åˆ¶ä½œè§£å†³æ–¹æ¡ˆ</strong>ã€‚</p>
<p>é€šè¿‡è¿™å¥—å®è·µæ–¹æ¡ˆï¼Œå…¬ä¼—å·ä½œè€…ä¸æŠ€æœ¯åšä¸» èƒ½å¤Ÿé«˜æ•ˆçªç ´ ä¼ ç»Ÿè®¾è®¡å·¥å…·å­¦ä¹ æˆæœ¬é«˜ã€åˆ¶ä½œå‘¨æœŸé•¿ çš„æ•ˆç‡ç“¶é¢ˆ â€”â€” å€ŸåŠ© ä¸‰å±‚æŠ€æœ¯æ ˆï¼ˆåŒ…æ‹¬ å³æ¢¦AIå›¾åƒç”Ÿæˆå±‚ã€HTML/CSSå“åº”å¼è®¾è®¡å±‚ã€Playwrightæˆªå›¾è½¬æ¢å±‚ï¼‰ï¼Œæ— éœ€ æŒæ¡PSã€Figmaç­‰ä¸“ä¸šè®¾è®¡å·¥å…·ï¼Œå°±èƒ½å¿«é€Ÿ å®ç°AIç”Ÿæˆ3Dæ’ç”»åº•å›¾ã€æ™ºèƒ½å åŠ æè¾¹å­—ä½“ã€è‡ªåŠ¨è½¬æ¢é«˜æ¸…å›¾ç‰‡ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚æœ¬æ¬¡æ¼”ç¤ºçš„ "ä¸€å¥è¯ç”ŸæˆMCPæ•™ç¨‹å°é¢ï¼Œ20ç§’æ‹¿åˆ°HTML+PNG+JPGä¸‰ç§æ ¼å¼"ï¼‰ã€‚æ— è®ºæ˜¯ æŠ€æœ¯åšå®¢å°é¢è®¾è®¡ã€å…¬ä¼—å·æ–‡ç« é…å›¾ï¼Œè¿˜æ˜¯ ç¤¾äº¤åª’ä½“æ¨ªå¹…å›¾ã€å®£ä¼ æµ·æŠ¥å¿«é€Ÿåˆ¶ä½œï¼Œéƒ½èƒ½é€šè¿‡ è‡ªç„¶è¯­è¨€æè¿°ä¸»é¢˜ å®Œæˆï¼Œæå¤§ æå‡å†…å®¹åˆ›ä½œæ•ˆç‡å’Œè§†è§‰å‘ˆç°è´¨é‡ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¯¥ <strong>å°é¢ç”Ÿæˆå™¨</strong> ä¸ä»… <strong>æ”¯æŒå¯çˆ±åœ†æ¶¦çš„3Dæ’ç”»é£æ ¼ï¼ˆç±»ä¼¼çš®å…‹æ–¯åŠ¨ç”»ï¼‰</strong>ï¼Œè¿˜ <strong>æä¾›å¤šå±‚æè¾¹å¡é€šå­—ä½“æ•ˆæœï¼ˆ8æ–¹å‘æ–‡å­—é˜´å½± + ç«‹ä½“é˜´å½±ï¼‰</strong>ï¼Œè§†è§‰å†²å‡»åŠ›è¿œä¼˜äº <strong>ä¼ ç»Ÿçº¯æ–‡å­—æˆ–ç®€å•å›¾ç‰‡å åŠ æ–¹æ¡ˆ</strong>ï¼›ç‰¹åˆ«æ˜¯é€šè¿‡ Playwrightå®Œæ•´é¡µé¢æˆªå›¾ï¼Œæœ‰æ•ˆè§£å†³äº† ä¼ ç»Ÿæˆªå›¾å·¥å…·å†…å®¹æˆªæ–­å’Œåˆ†è¾¨ç‡ä¸è¶³ çš„éš¾é¢˜ï¼ˆè¾“å‡ºåˆ†è¾¨ç‡è¾¾åˆ° 5120x2916åƒç´ ï¼Œ2å€åƒç´ å¯†åº¦ï¼‰ã€‚åŒæ—¶ï¼Œæ–¹æ¡ˆå…·å¤‡è‰¯å¥½çš„å¯å®šåˆ¶æ€§ â€”â€” å°ä¼™ä¼´ä»¬å¯ä»¥åŸºäºç”Ÿæˆçš„HTMLæ–‡ä»¶è‡ªå®šä¹‰ æ ‡é¢˜é¢œè‰²ã€å­—ä½“å¤§å°ã€ä½ç½®å¸ƒå±€ ç­‰æ ·å¼ï¼Œè¿›ä¸€æ­¥å‘æŒ¥ CSSå“åº”å¼è®¾è®¡èƒ½åŠ› åœ¨ ä¸ªäººå“ç‰Œè§†è§‰ç»Ÿä¸€ã€ç³»åˆ—æ–‡ç« å°é¢é£æ ¼ä¸€è‡´æ€§ ç­‰åœºæ™¯çš„åº”ç”¨ä»·å€¼ã€‚æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æŒ‰ç…§æ–‡ä¸­æä¾›çš„æ­¥éª¤è¿›è¡Œå®è·µï¼Œæ ¹æ®å®é™… å†…å®¹ä¸»é¢˜å’Œè§†è§‰éœ€æ±‚ è°ƒæ•´ ä¸»é¢˜å…³é”®è¯ã€æ ‡é¢˜æ–‡å­—ã€é¢œè‰²æ–¹æ¡ˆç­‰é…ç½®é¡¹ã€‚ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œç»“æŸäº†ï¼Œæˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»€ä¹ˆæ˜¯RAGï¼Ÿå•¥åˆæ˜¯å‘é‡ï¼Ÿå¸¦ä½ ä»å‘¨æ°ä¼¦çš„è§’åº¦è¯»æ‡‚.....]]></title>    <link>https://juejin.cn/post/7572454929145053219</link>    <guid>https://juejin.cn/post/7572454929145053219</guid>    <pubDate>2025-11-15T15:11:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572454929145053219" data-draft-id="7572493520003596322" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»€ä¹ˆæ˜¯RAGï¼Ÿå•¥åˆæ˜¯å‘é‡ï¼Ÿå¸¦ä½ ä»å‘¨æ°ä¼¦çš„è§’åº¦è¯»æ‡‚....."/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Agent"/> <meta itemprop="datePublished" content="2025-11-15T15:11:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="eacape"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289440478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»€ä¹ˆæ˜¯RAGï¼Ÿå•¥åˆæ˜¯å‘é‡ï¼Ÿå¸¦ä½ ä»å‘¨æ°ä¼¦çš„è§’åº¦è¯»æ‡‚.....
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289440478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    eacape
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T15:11:40.000Z" title="Sat Nov 15 2025 15:11:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>LLMç«äº†è¿™ä¹ˆé•¿æ—¶é—´ï¼ŒRAGã€mcpã€embeddingç­‰æŠ€æœ¯åè¯ä¹Ÿå‡ºç°åœ¨äº†æ—¥å¸¸çš„å…¬ä¼—å·æ–‡ç« ä¸­ï¼Œä½ æœ‰äº†è§£è¿‡è¿™äº›æŠ€æœ¯å—ï¼Ÿ</p>
</blockquote>
<h2 data-id="heading-0">å¤§æ¨¡å‹å‡ºç°å¹»è§‰å•¦</h2>
<p>ä½ å¯ä»¥æŠŠå¤§æ¨¡å‹æƒ³è±¡æˆï¼šä¸€ä¸ªçŸ¥è¯†æ¸Šåšã€å£æ‰æä½³çš„â€œå¤§å¿½æ‚ â€ã€‚</p>
<p>è¿™ä¸ªâ€œå¤§å¿½æ‚ â€è„‘å­é‡Œè£…äº†æµ·é‡çš„çŸ¥è¯†ï¼Œæ‰€ä»¥è·Ÿä½ èŠå¤©æ—¶æ€»æ˜¯ä¾ƒä¾ƒè€Œè°ˆï¼Œå¬èµ·æ¥éå¸¸æœ‰é“ç†ã€‚ä½†é—®é¢˜æ˜¯ï¼Œ<strong>ä»–æœ‰ä¸€ç§â€œæ— æ³•å¿å—æ²‰é»˜å’Œä¸çŸ¥é“â€çš„å¼ºè¿«ç—‡</strong>ã€‚å½“ä½ é—®åˆ°ä¸€ä¸ªä»–ä¸çŸ¥é“æˆ–è€…ä»–è®°å¿†æ¨¡ç³Šçš„äº‹æƒ…æ—¶ï¼Œä»–ä¸ä¼šè¯´â€œæˆ‘ä¸çŸ¥é“â€ï¼Œè€Œæ˜¯ä¼š<strong>åŸºäºä»–å·²æœ‰çš„çŸ¥è¯†â€œè„‘è¡¥â€å‡ºä¸€æ®µå¬èµ·æ¥æå…¶åˆç†ã€ä½†å®Œå…¨æ˜¯ç¼–é€ çš„å†…å®¹</strong>ï¼Œå¹¶ä¸”ç”¨éå¸¸è‡ªä¿¡ã€è‚¯å®šçš„è¯­æ°”å‘Šè¯‰ä½ ã€‚</p>
<p>è¿™å°±æ˜¯å¤§æ¨¡å‹çš„â€œå¹»è§‰â€ï¼Œå­¦æœ¯ä¸Šå¸¸ç§°ä¸ºâ€œèƒ¡è¨€ä¹±è¯­â€æˆ–â€œè™šæ„â€ã€‚å®ƒæŒ‡å¤§æ¨¡å‹ç”Ÿæˆçš„å†…å®¹åœ¨äº‹å®å±‚é¢æ˜¯é”™è¯¯çš„ã€ä¸å­˜åœ¨çš„ï¼Œä½†å½¢å¼ä¸Šå´éå¸¸è¿è´¯ã€å¯ä¿¡ã€‚</p>
<p>æ¯”å¦‚~æˆ‘çš„ä»£ç é‡Œæœ‰ä¸€ä¸ªåä¸º<code>@CustomFilter</code>æ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£å¤§æ¨¡å‹è‚¯å®šä¸çŸ¥é“å§....ä¸‹é¢æ˜¯å¤§æ¨¡å‹çš„å›ç­”ï¼Œæˆ‘æœäº†ä¸‹ <code>Mybatis-Plus</code> å¹¶æ²¡æœ‰è¿™ä¸ªæ³¨è§£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5be1829eb750432fba924552e311521b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=ZF%2BAyV06mwb6PkDZWZ5BzEVDDvQ%3D" alt="image-20251114230523762" loading="lazy"/></p>
<h2 data-id="heading-1">è®©å¤§æ¨¡å‹åˆ«â€œèƒ¡è¯´å…«é“â€</h2>
<p>å¦‚ä½•ä¸è®©å¤§æ¨¡å‹èƒ¡è¯´å…«é“å‘¢ï¼Ÿçœ‹ä¸€ä¸‹ä¸‹é¢è¿™äº›æ–¹å¼å§ï¼Œå…¶ä¸­ RAG å°†ä¼šæ˜¯æˆ‘ä»¬è¿™ç¯‡æ–‡ç« è®²è¿°çš„é‡ç‚¹ã€‚</p>
<h3 data-id="heading-2">Prompt - åœ¨æé—®æ—¶ç»™å®ƒç«‹è§„çŸ©</h3>
<p>é€šè¿‡ç²¾å¿ƒè®¾è®¡ä½ çš„æé—®æ–¹å¼ï¼Œæ¥çº¦æŸæ¨¡å‹çš„è¡Œä¸ºã€‚</p>
<ul>
<li>
<p><strong>æ˜¯ä»€ä¹ˆ</strong>ï¼šåœ¨æé—®çš„æŒ‡ä»¤ä¸­ï¼Œæ˜ç¡®å‘Šè¯‰æ¨¡å‹â€œå¿…é¡»åŸºäºå·²çŸ¥äº‹å®â€ã€â€œå¦‚æœä¸çŸ¥é“å°±æ˜ç¡®è¯´ä¸çŸ¥é“â€ã€â€œç¦æ­¢è™šæ„ä¿¡æ¯â€ã€‚</p>
</li>
<li>
<p>ä¸¾ä¾‹ï¼šæç¤ºè¯å¦‚ä¸‹ï¼Œå¤§æ¨¡å‹ä¹Ÿç»™å‡ºäº†â€œä¸çŸ¥é“â€çš„å›ç­”</p>
<pre><code class="hljs">1.ä¸ç¡®å®šã€ä¸æ¸…æ¥šã€æ— æ³•ç¡®è®¤çš„å†…å®¹ï¼Œä¸€å¾‹å›ç­”ï¼šä¸çŸ¥é“ã€‚
2.ä¸èƒ½æ ¹æ®çŒœæµ‹ã€å¯èƒ½æ€§ã€å‡è®¾æ¥å›ç­”ã€‚
3.æ‰€æœ‰å›ç­”å¿…é¡»åŸºäºç¡®å®šã€å‡†ç¡®ã€å¯é çš„çŸ¥è¯†ã€‚
4.ä¸å…è®¸ç¼–é€ äº‹å®æˆ–è¡¥å……æœªç»ç¡®è®¤çš„ä¿¡æ¯ã€‚
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acc54e7e6b794e65bf56123ddf65135c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=5nlisaPzKRhT%2BoTcMvfmVOGr8dw%3D" alt="image-20251115000335026" loading="lazy"/></p>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šé›¶æˆæœ¬ï¼Œç®€å•æ˜“ç”¨ï¼Œå¯¹æ‰€æœ‰æ¨¡å‹éƒ½æœ‰æ•ˆã€‚</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šçº¦æŸåŠ›æœ‰é™ï¼Œå¯¹äºå¤æ‚æˆ–æ¨¡å‹çŸ¥è¯†ç›²åŒºçš„é—®é¢˜ï¼Œå®ƒå¯èƒ½è¿˜æ˜¯ä¼šâ€œå¿ä¸ä½â€ç¼–é€ ï¼Œå¹¶ä¸”<strong>æˆ‘ä»¬æ˜¯æƒ³è¦å®ƒå›ç­”çš„...ğŸ˜­</strong></p>
</li>
</ul>
<hr/>
<h3 data-id="heading-3">Fine-Tuning - ä»æ ¹æœ¬ä¸Šæ”¹å˜å®ƒçš„çŸ¥è¯†</h3>
<ul>
<li><strong>æ˜¯ä»€ä¹ˆ</strong>ï¼šç”¨å¤§é‡â€œé«˜è´¨é‡ã€é«˜äº‹å®æ€§ã€ç›¸å…³å†…å®¹çš„â€çš„æ•°æ®å¯¹åŸºç¡€æ¨¡å‹è¿›è¡Œé¢å¤–çš„è®­ç»ƒï¼Œå¾®è°ƒå…¶å‚æ•°ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šèƒ½ä»æ¨¡å‹å†…éƒ¨æå‡å…¶äº‹å®æ€§å’Œå¯é æ€§ï¼Œæ•ˆæœæ¯”è¾ƒæ ¹æœ¬ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šæˆæœ¬é«˜æ˜‚ï¼ˆéœ€è¦å¤§é‡ç®—åŠ›å’Œé«˜è´¨é‡æ•°æ®ï¼‰ï¼Œè¿‡ç¨‹å¤æ‚ï¼Œè€Œä¸”æ— æ³•æ•™ç»™æ¨¡å‹å®ƒä»æœªå­¦è¿‡çš„çŸ¥è¯†ï¼ˆæ¯”å¦‚æœ€æ–°æ–°é—»ï¼‰ã€‚</li>
</ul>
<p>æ¯”æ›¾ç»çš„AIå…­å°è™ï¼Œæœç‹—åˆ›å§‹äººç‹å°å·åˆ›ç«‹çš„ç™¾å·æ™ºèƒ½å·²ç»ä¸å†æ¨å‡ºé€šç”¨å¤§æ¨¡å‹ï¼Œè½¬å‘åŒ»ç–—å¤§æ¨¡å‹ï¼ŒèƒŒåå°±æ˜¯ç»™å¤§æ¨¡å‹ä¸æ–­çš„ Fine-Tuning åŒ»ç–—ç›¸å…³çš„æ•°æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5210ac765ef4d22bfb16d1a81828dcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=Zb7RTHEAOaYmc4yK0YnnmBUn%2FeY%3D" alt="image-20251114232027429" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-4">RAG - ç»™å®ƒä¸€æœ¬â€œå‚è€ƒç­”æ¡ˆâ€ï¼Œè®©å®ƒç…§æœ¬å®£ç§‘</h3>
<p>è¿™æ˜¯ç›®å‰<strong>æœ€æµè¡Œã€æœ€æœ‰æ•ˆä¸”æˆæœ¬æœ€ä½</strong>çš„æ–¹æ³•ã€‚</p>
<ul>
<li>
<p><strong>æ˜¯ä»€ä¹ˆ</strong>ï¼š<strong>æ£€ç´¢å¢å¼ºç”Ÿæˆ</strong>ã€‚åœ¨è®©æ¨¡å‹å›ç­”ä¹‹å‰ï¼Œå…ˆä»ä¸€ä¸ªä½ å‡†å¤‡å¥½çš„ã€å¯ä¿¡çš„çŸ¥è¯†åº“ï¼ˆæ¯”å¦‚å…¬å¸æ–‡æ¡£ã€äº§å“æ‰‹å†Œã€æƒå¨è®ºæ–‡ï¼‰é‡Œï¼Œæœç´¢å‡ºä¸é—®é¢˜æœ€ç›¸å…³çš„ç‰‡æ®µï¼Œç„¶åæŠŠâ€œé—®é¢˜+ç›¸å…³ç‰‡æ®µâ€ä¸€èµ·äº¤ç»™æ¨¡å‹ï¼Œè®©å®ƒåŸºäºè¿™äº›ç‰‡æ®µæ¥ç»„ç»‡ç­”æ¡ˆã€‚</p>
</li>
<li>
<p><strong>ç”Ÿæ´»æ¯”å–»</strong>ï¼šå°±åƒè€ƒè¯•æ—¶ï¼Œä¸å…è®¸å­¦ç”Ÿè‡ªç”±å‘æŒ¥ï¼Œè€Œæ˜¯å‘ç»™ä»–ä¸€æœ¬ã€Šæ ‡å‡†ç­”æ¡ˆæ±‡ç¼–ã€‹ï¼Œè¦æ±‚ä»–æ‰€æœ‰çš„å›ç­”éƒ½å¿…é¡»å¼•ç”¨è¿™æœ¬æ±‡ç¼–é‡Œçš„åŸè¯ã€‚</p>
</li>
<li>
<p>å¦‚ä½•å·¥ä½œï¼š</p>
<ol start="0">
<li><strong>å‡†å¤‡çŸ¥è¯†åº“</strong>ï¼šæŠŠä½ çš„æ‰€æœ‰å¯é èµ„æ–™ï¼ˆPDFã€Wordã€ç½‘é¡µç­‰ï¼‰å¤„ç†æˆå¯æœç´¢çš„æ ¼å¼ã€‚</li>
<li><strong>ç”¨æˆ·æé—®</strong>ï¼šç”¨æˆ·é—®ï¼šâ€œæˆ‘ä»¬äº§å“çš„æ——èˆ°å‹å·æ”¯æŒå“ªäº›AIåŠŸèƒ½ï¼Ÿâ€</li>
<li><strong>å®æ—¶æ£€ç´¢</strong>ï¼šç³»ç»Ÿç«‹åˆ»åœ¨ä½ çš„äº§å“æ‰‹å†ŒçŸ¥è¯†åº“é‡Œæœç´¢â€œæ——èˆ°å‹å·â€ã€â€œAIåŠŸèƒ½â€ç­‰å…³é”®è¯ï¼Œæ‰¾åˆ°æœ€ç›¸å…³çš„å‡ æ®µæè¿°ã€‚</li>
<li><strong>ç»„åˆå¹¶å›ç­”</strong>ï¼šæ¨¡å‹æ”¶åˆ°çš„æŒ‡ä»¤å®é™…ä¸Šæ˜¯ï¼šâ€œè¯·æ ¹æ®ä»¥ä¸‹èµ„æ–™ï¼Œå›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚èµ„æ–™ï¼š[æ£€ç´¢åˆ°çš„äº§å“æ‰‹å†ŒåŸæ–‡]ã€‚ é—®é¢˜ï¼šæˆ‘ä»¬äº§å“çš„æ——èˆ°å‹å·æ”¯æŒå“ªäº›AIåŠŸèƒ½ï¼Ÿâ€</li>
<li><strong>æ¨¡å‹ç”Ÿæˆ</strong>ï¼šæ¨¡å‹ä¼šä¹–ä¹–åœ°åŸºäºä½ æä¾›çš„èµ„æ–™ï¼Œæ€»ç»“ã€å¤è¿°ç”Ÿæˆç­”æ¡ˆï¼Œå‡ ä¹ä¸ä¼šç¼–é€ ã€‚</li>
</ol>
</li>
</ul>
<h2 data-id="heading-5"><strong>æ£€ç´¢å¢å¼ºç”Ÿæˆ</strong></h2>
<p><em>Retrieval-Augmented Generation</em></p>
<ul>
<li><strong>è§£å†³æ€è·¯</strong>ï¼šå°†å¤–éƒ¨çŸ¥è¯†åº“ä¸LLMç»“åˆï¼Œé€šè¿‡æ£€ç´¢è·å–ç›¸å…³ä¿¡æ¯ï¼Œå¢å¼ºç”Ÿæˆè´¨é‡</li>
<li><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šé™ä½å¹»è§‰ã€æä¾›å®æ—¶ä¿¡æ¯ã€æ”¯æŒç§åŸŸçŸ¥è¯†</li>
</ul>
<p>ä¸€ä¸ªRAGç³»ç»Ÿçš„åŸºæœ¬æ¶æ„å°±æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåˆ†ä¸ºç´¢å¼•ã€æ£€ç´¢ã€ç”Ÿæˆä¸‰ä¸ªæ­¥éª¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¨“å¨“é“æ¥</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40c820f6542c433993d27899ffa32688~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=Fent3vMTtx2vVEtIGHFKe%2BQUD4k%3D" alt="image-20251114222532878" loading="lazy"/></p>
<h3 data-id="heading-6">ä»€ä¹ˆæ˜¯å‘é‡ï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨æ•™ä¸€ä¸ªå¤–æ˜Ÿäººç†è§£åœ°çƒè¯­è¨€ã€‚è¿™ä¸ªå¤–æ˜Ÿäººä¸æ‡‚ä¸­æ–‡ã€è‹±æ–‡ï¼Œä½†å®ƒç²¾é€šæ•°å­¦ã€‚ä½ æ€ä¹ˆå‘å®ƒè§£é‡Š"è‹¹æœ"è¿™ä¸ªè¯çš„å«ä¹‰å‘¢ï¼Ÿ</p>
<p><strong>å‘é‡çš„ç¥å¥‡ä¹‹å¤„</strong>å°±åœ¨äºï¼šå®ƒæŠŠäººç±»è¯­è¨€ä¸­æ¨¡ç³Šçš„ã€ä¸»è§‚çš„è¯­ä¹‰æ¦‚å¿µï¼Œè½¬æ¢æˆäº†ç²¾ç¡®çš„ã€å¯è®¡ç®—çš„æ•°å­¦è¡¨ç¤º(æœ€ç»ˆå½¢æ€æ˜¯ ä¸€ä¸ªå›ºå®šé•¿åº¦çš„æµ®ç‚¹æ•°æ•°ç»„)ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac16f8e923be4a598ca64e77edd5463a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=W79HqqllpJUWlWSnE98fdF5g%2Bo8%3D" alt="image-20251114234945089" loading="lazy"/></p>
<h3 data-id="heading-7">æŠŠä½ çš„èµ„æ–™å‘é‡åŒ–</h3>
<p>åœ¨RAGä¸­ä¾¿æ˜¯å°†ä½ æ‰€è¦æ„å»ºçš„â€œçŸ¥è¯†â€æ–‡æœ¬å…ˆåˆ‡åˆ†æˆå¾ˆå¤šç«¯çš„å°å—ï¼Œç„¶åå°†è¿™äº›å°å—ä½¿ç”¨å‘é‡æ¨¡å‹è¿›è¡Œå‘é‡åŒ–ï¼Œæœ€åå°†æ–‡æœ¬å—çš„å‘é‡å’Œæ–‡æœ¬å—åŒæ—¶å­˜åˆ°å‘é‡æ•°æ®åº“å½“ä¸­ã€‚</p>
<p><strong>æ–‡æœ¬å—å‘é‡å’Œæ–‡æœ¬å—æ˜¯ä¸€ç§ <code>key-value</code>ç»“æ„ï¼Œæ‰€ä»¥åé¢æˆ‘ä»¬æ‰¾åˆ°äº†æ–‡æœ¬å—å‘é‡ä¹Ÿå°±æ‰¾åˆ°äº†æ–‡æœ¬å—ã€‚</strong></p>
<p><strong>1. æ–‡æœ¬åˆ†å—å¤„ç†</strong></p>
<ul>
<li>å›ºå®šé•¿åº¦åˆ†å—ï¼šæŒ‰é¢„è®¾å­—ç¬¦æ•°å‡åŒ€åˆ‡åˆ†ï¼Œé€‚åˆæ ¼å¼è§„æ•´çš„æ–‡æ¡£</li>
<li>è¯­ä¹‰åˆ†å—ï¼šåŸºäºå¥å­è¾¹ç•Œå’Œè¯­ä¹‰å®Œæ•´æ€§è¿›è¡Œæ™ºèƒ½åˆ†å‰²</li>
<li>é‡å åˆ†å—ï¼šåœ¨ç›¸é‚»åˆ†å—é—´è®¾ç½®é‡å åŒºåŸŸï¼Œé¿å…å…³é”®ä¿¡æ¯è¢«å‰²è£‚</li>
<li>è‡ªå®šä¹‰åˆ†å—ï¼šå¯æ ¹æ®æ®µè½ã€ç« èŠ‚ç­‰æ–‡æ¡£ç»“æ„è¿›è¡Œçµæ´»åˆ’åˆ†</li>
</ul>
<p><strong>2. å‘é‡åŒ–ç¼–ç </strong></p>
<ul>
<li>
<p>OpenAIçš„text-embedding-ada-002ç­‰ç³»åˆ—</p>
</li>
<li>
<p>Googleçš„BERTåŠå…¶å˜ä½“æ¨¡å‹</p>
</li>
<li>
<p>Sentence-BERTç­‰ä¸“ç”¨è¯­ä¹‰ç¼–ç æ¨¡å‹</p>
</li>
<li>
<p>é˜¿é‡Œäº‘çš„text-embeddingç³»åˆ—</p>
</li>
<li>
<p>è½»é‡çº§æœ¬åœ°éƒ¨ç½²ï¼š</p>
<ul>
<li>all-MiniLM-L6-v2ç­‰å°å‹æ¨¡å‹ ï¼ˆè¯•è¿‡äº†ï¼Œä¸å¥½ç”¨åˆ«ç”¨ï¼Œä¸­å°å‹å…¬å¸ä¹–ä¹–ç”¨å‚å•†çš„ğŸ‘€ï¼‰</li>
<li>é’ˆå¯¹ä¸­æ–‡ä¼˜åŒ–çš„m3eç­‰å¼€æºæ¨¡å‹</li>
</ul>
</li>
</ul>
<p><strong>3. å‘é‡å­˜å‚¨æ–¹æ¡ˆ</strong></p>
<ul>
<li>
<p>Milvusï¼ˆå¼€æºé¦–é€‰ï¼Œå¼ºæ¨ï¼Œå›½äº§ä¹‹å…‰ğŸ’ªï¼‰</p>
</li>
<li>
<p>Pineconeï¼ˆå…¨æ‰˜ç®¡æœåŠ¡ï¼‰</p>
</li>
<li>
<p>Chromaï¼ˆè½»é‡æ˜“ç”¨ï¼‰</p>
</li>
<li>
<p>ä¼ ç»Ÿæ•°æ®åº“æ‰©å±•</p>
<ul>
<li>ElasticSearch with å‘é‡æ’ä»¶</li>
<li>PostgreSQL + pgvectoræ‰©å±•</li>
<li>Redis å‘é‡æœç´¢æ¨¡å—</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d9d272b1003440eba6d23c8e3650a6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=DW8Or4PaARF9nM09oWsG9zEEspo%3D" alt="image-20251114235538955" loading="lazy"/></p>
<h3 data-id="heading-8">æ£€ç´¢å‘é‡åŒ–åçš„å†…å®¹</h3>
<p>é‚£ä¹ˆå°†åŸå§‹çš„æ–‡æ¡£è½¬æ¢ä¸ºå‘é‡å­˜å‚¨åï¼Œæˆ‘ä»¬è¦æ€ä¹ˆç”¨å‘¢ï¼Ÿå…¶å®ä¸€ä¸ªå‘é‡å¯ä»¥åœ¨ä¸€å †å‘é‡ä¹‹é—´æ‰¾å‡ºä»–çš„â€œå“¥ä»¬â€ã€‚</p>
<p>ä¸¾ä¸ªğŸŒ°ï¼šå‡å¦‚å…¨ä¸–ç•Œçš„äººéƒ½é¢éƒ¨ä¿¡æ¯æ˜¯ä¸€ä¸ªå‘é‡æ•°æ®åº“ï¼Œæˆ‘ä»¬æŠŠå‘¨æ°ä¼¦çš„è„¸çœ‹ä½œä¸€ä¸ªå‘é‡ï¼Œé‚£ä¹ˆå‘é‡æ•°æ®åº“å°±ä¼šå¾ˆå¿«ç»™æˆ‘ä»¬åŒ¹é…å‡ºâ€œå‘¨é¥¼ä¼¦â€œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d68a8623ce054a508108231596f7975c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=Tp4vRU8F8wzWq7kHzoMJReWkNRE%3D" alt="image-20251115010225934" loading="lazy"/></p>
<p>é‚£ä¹ˆæˆ‘ä»¬æƒ³è¦ä»å‘é‡æ•°æ®åº“é‡ŒåŒ¹é…å‡ºç›¸ä¼¼çš„å†…å®¹ï¼Œéœ€è¦ä»¥ä¸‹æ­¥éª¤</p>
<ul>
<li>å°†æŸ¥è¯¢çš„å†…å®¹ä¹Ÿè½¬æ¢ä¸ºå‘é‡</li>
<li>è®¡ç®—æŸ¥è¯¢å‘é‡ä¸æ‰€æœ‰æ–‡æ¡£å‘é‡çš„ç›¸ä¼¼åº¦</li>
<li>è¿”å›ç›¸ä¼¼åº¦æœ€é«˜çš„Kä¸ªæ–‡æœ¬å—ï¼ˆå‰é¢æˆ‘ä»¬è®²äº†å‘é‡å’Œæ–‡æœ¬å—æ˜¯ä¸€ç§key-valueç»“æ„ï¼Œæˆ‘ä»¬æœç´¢åˆ°äº†å‘é‡ï¼Œå°±æ‰¾åˆ°æ–‡æœ¬å—ï¼Œè¿™é‡Œå‘é‡èµ·åˆ°çš„æ˜¯ä¸€ä¸ªç´¢å¼•çš„ä½œç”¨ï¼‰</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf2d095ff5d24721a332f8d813a5b1a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=xsdqKMtG1Onk0e8%2FYXa%2Fq6fB3aI%3D" alt="image-20251115002605890" loading="lazy"/></p>
<h3 data-id="heading-9">æ€ä¹ˆè®¡ç®—ç›¸ä¼¼åº¦å‘¢</h3>
<p>è®¡ç®—å‘é‡ç›¸ä¼¼åº¦å¸¸ç”¨çš„ç®—æ³•æœ‰ä¸‰ç§ï¼šåˆ†åˆ«æ˜¯ç‚¹ç§¯ç›¸ä¼¼ã€ä½™å¼¦ç›¸ä¼¼ã€æ¬§æ°è·ç¦»</p>
<h4 data-id="heading-10">ç‚¹ç§¯ç›¸ä¼¼åº¦</h4>
<p>ç‚¹ç§¯ç›¸ä¼¼çš„è®¡ç®—æ–¹å¼å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸¤ä¸ªå‘é‡å¯¹åº”ä½ç½®çš„æ•°å€¼ç›¸ä¹˜ï¼Œå€¼è¶Šå¤§å°±æ˜¯è¶Šç›¸ä¼¼</p>
<pre><code class="hljs language-css" lang="css">ç‚¹ç§¯ = (<span class="hljs-selector-tag">A</span>â‚ Ã— <span class="hljs-selector-tag">B</span>â‚) + (<span class="hljs-selector-tag">A</span>â‚‚ Ã— <span class="hljs-selector-tag">B</span>â‚‚) + (<span class="hljs-selector-tag">A</span>â‚ƒ Ã— <span class="hljs-selector-tag">B</span>â‚ƒ) + ... + (<span class="hljs-selector-tag">A</span>â‚™ Ã— <span class="hljs-selector-tag">B</span>â‚™)  = Î£(<span class="hljs-selector-tag">A</span>áµ¢ Ã— <span class="hljs-selector-tag">B</span>áµ¢)  å¯¹äº <span class="hljs-selector-tag">i</span> ä» <span class="hljs-number">1</span> åˆ° n
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20b4df5e25a946ef953f096beddf2504~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=SqkxxlU%2BbpW3FvcZC2VIp%2BIpV8E%3D" alt="image-20251115013647329" loading="lazy"/></p>
<h4 data-id="heading-11">ä½™å¼¦ç›¸ä¼¼åº¦</h4>
<p>å…¶å®å°±æ˜¯é«˜ä¸­å­¦çš„<strong>è®¡ç®—ä¸¤ä¸ªç‚¹ä¸åŸç‚¹å½¢æˆçš„å¤¹è§’çš„ä½™å¼¦å€¼</strong>ï¼Œæ¯”å¦‚è¯´<strong>å·²çŸ¥å¹³é¢å†…ä¸¤ä¸ªç‚¹</strong> <em>X</em>(<em>x</em>1,<em>y</em>1) å’Œ <em>Y</em>(<em>x</em>2,<em>y</em>2)ï¼Œæˆ‘ä»¬å°±æ˜¯è¦è®¡ç®—ï¼Œè¿™ä¸¤ä¸ªç‚¹ä¸åŸç‚¹çš„è¿æ¥çº¿çš„å¤¹è§’çš„ä½™å¼¦å€¼ï¼Œæœ€ç»ˆä¹Ÿæ˜¯å€¼è¶Šå¤§çš„è¶Šç›¸ä¼¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68ea1dfaffa84920b8beb2810da496d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=Dekf4jAwl3Yjq4IDyKBesaI0IBY%3D" alt="image-20251115015359575" loading="lazy"/></p>
<p>å…¬å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"> Â  Â  Â  Â  Â   <span class="hljs-selector-tag">A</span>Â·<span class="hljs-selector-tag">B</span>
cos(Î¸) = â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
 Â  Â  Â  Â   |<span class="hljs-selector-tag">A</span>| Ã— |<span class="hljs-selector-tag">B</span>|
â€‹
å…¶ä¸­ï¼š
<span class="hljs-selector-tag">A</span>Â·<span class="hljs-selector-tag">B</span> = å‘é‡<span class="hljs-selector-tag">A</span>å’Œ<span class="hljs-selector-tag">B</span>çš„ç‚¹ç§¯
|<span class="hljs-selector-tag">A</span>| = å‘é‡<span class="hljs-selector-tag">A</span>çš„é•¿åº¦ = âˆš(<span class="hljs-selector-tag">A</span>â‚Â² + <span class="hljs-selector-tag">A</span>â‚‚Â² + ... + <span class="hljs-selector-tag">A</span>â‚™Â²)
|<span class="hljs-selector-tag">B</span>| = å‘é‡<span class="hljs-selector-tag">B</span>çš„é•¿åº¦ = âˆš(<span class="hljs-selector-tag">B</span>â‚Â² + <span class="hljs-selector-tag">B</span>â‚‚Â² + ... + <span class="hljs-selector-tag">B</span>â‚™Â²)
â€‹
ä¸¾ä¸ªğŸŒ°å§
â€‹
å‡è®¾ï¼š
å‘é‡<span class="hljs-selector-tag">A</span> = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
å‘é‡<span class="hljs-selector-tag">B</span> = (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)
â€‹
è®¡ç®—æ­¥éª¤ï¼š
<span class="hljs-number">1</span>. ç‚¹ç§¯ <span class="hljs-selector-tag">A</span>Â·<span class="hljs-selector-tag">B</span> = (<span class="hljs-number">1</span>Ã—<span class="hljs-number">4</span>) + (<span class="hljs-number">2</span>Ã—<span class="hljs-number">5</span>) + (<span class="hljs-number">3</span>Ã—<span class="hljs-number">6</span>) = <span class="hljs-number">4</span> + <span class="hljs-number">10</span> + <span class="hljs-number">18</span> = <span class="hljs-number">32</span>
<span class="hljs-number">2</span>. å‘é‡<span class="hljs-selector-tag">A</span>é•¿åº¦ |<span class="hljs-selector-tag">A</span>| = âˆš(<span class="hljs-number">1</span>Â² + <span class="hljs-number">2</span>Â² + <span class="hljs-number">3</span>Â²) = âˆš(<span class="hljs-number">1</span> + <span class="hljs-number">4</span> + <span class="hljs-number">9</span>) = âˆš<span class="hljs-number">14</span> â‰ˆ <span class="hljs-number">3.74</span>
<span class="hljs-number">3</span>. å‘é‡<span class="hljs-selector-tag">B</span>é•¿åº¦ |<span class="hljs-selector-tag">B</span>| = âˆš(<span class="hljs-number">4</span>Â² + <span class="hljs-number">5</span>Â² + <span class="hljs-number">6</span>Â²) = âˆš(<span class="hljs-number">16</span> + <span class="hljs-number">25</span> + <span class="hljs-number">36</span>) = âˆš<span class="hljs-number">77</span> â‰ˆ <span class="hljs-number">8.77</span>
<span class="hljs-number">4</span>. ä½™å¼¦ç›¸ä¼¼åº¦ = <span class="hljs-number">32</span> / (<span class="hljs-number">3.74</span> Ã— <span class="hljs-number">8.77</span>) â‰ˆ <span class="hljs-number">32</span> / <span class="hljs-number">32.8</span> â‰ˆ <span class="hljs-number">0.975</span>
â€‹
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61b440edf7cb4759864aa55ffb598e10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=eoX1oB%2BSJjs8SACRkz38os3O2Vk%3D" alt="image-20251115015759265" loading="lazy"/></p>
<h4 data-id="heading-12">æ¬§æ°è·ç¦»</h4>
<p>åœ¨è¯­ä¹‰ç©ºé—´ä¸­æµ‹é‡"ç›´çº¿è·ç¦»"ï¼Œå…¬å¼ä¸ºï¼šè·ç¦» = âˆš[(Aâ‚-Bâ‚)Â² + (Aâ‚‚-Bâ‚‚)Â² + ... + (Aâ‚™-Bâ‚™)Â²]</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09e9e7316f43440f8d710622ce49f7d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=9xuYTSgFkysVosP5YLkipC3Fpiw%3D" alt="image-20251115015900791" loading="lazy"/></p>
<h4 data-id="heading-13">ä¸‰ç§æ–¹å¼çš„é€‚ç”¨åœºæ™¯</h4>
<p><strong>ä½™å¼¦ç›¸ä¼¼åº¦</strong>ï¼šæ–‡æœ¬è¯­ä¹‰æ¯”è¾ƒã€æ–‡æ¡£æ£€ç´¢æ’åºã€å†…å®¹æ¨èç³»ç»Ÿï¼ˆå¤šæ•°åœºæ™¯ç”¨çš„éƒ½æ˜¯è¿™ä¸ªï¼‰</p>
<p><strong>æ¬§æ°è·ç¦»</strong>ï¼šç©ºé—´ä½ç½®æµ‹é‡ã€èšç±»åˆ†æã€å¼‚å¸¸æ£€æµ‹</p>
<p><strong>ç‚¹ç§¯ç›¸ä¼¼åº¦</strong>ï¼šå¿«é€Ÿåˆæ­¥ç­›é€‰ã€è®¡ç®—èµ„æºæœ‰é™åœºæ™¯ï¼ˆè¯´ç™½äº†ï¼Œå°±æ˜¯æ¯”è¾ƒæ‹‰ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d9ec75e80ed4bf8a59c3405db71af07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=ZYbUoM%2F5UKgrs7n0MLOcSBZd4j4%3D" alt="image-20251115002350117" loading="lazy"/></p>
<h3 data-id="heading-14">LLM ç”Ÿæˆ</h3>
<p>å¥½äº†ï¼Œç»å†äº†ä¸Šé¢æµç¨‹æˆ‘ä»¬åŸºæœ¬çŸ¥é“äº†ç´¢å¼•å’Œæ£€ç´¢çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆç»è¿‡æ£€ç´¢åŒ¹é…åçš„æ–‡æ¡£å°±ä¼šä½œä¸ºæˆ‘ä»¬è·Ÿå¤§æ¨¡å‹äº¤äº’çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ ·å¤§æ¨¡å‹å°±ä¼šæ ¹æ®æˆ‘ä»¬æ¨èç»™å®ƒçš„æ–‡æ¡£è¿›è¡Œæ€è€ƒå›å¤ï¼Œå°±é¿å…â€œèƒ¡è¯´å…«é“â€ã€‚</p>
<p>ä¸‹é¢æœ‰ä¸€ä¸ªå®Œæ•´çš„æµç¨‹å›¾ï¼Œå¯ä»¥å›é¡¾ä¸€ä¸‹~</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d57ed55a36f8427fb7392122ff65fd08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=4rlojaEoNDl1UjDSG7jywxVIQIs%3D" alt="image-20251115021335718" loading="lazy"/></p>
<h2 data-id="heading-15">RAG å®æˆ˜æ¡ˆä¾‹</h2>
<p>ä¸ºäº†æ›´æ·±å…¥çš„äº†è§£ RAG æˆ‘ä»¬å°±åˆ©ç”¨ Cherry Studio è¿™ä¸ªå·¥å…·æ­å»ºä¸€ä¸ªæœ€ç®€å•çš„ RAG</p>
<h3 data-id="heading-16">ç¬¬ä¸€æ­¥-æ³¨å†Œä¸€ä¸ªé˜¿é‡Œç™¾ç‚¼çš„è´¦å·</h3>
<p>ä¸ºä»€ä¹ˆé€‰æ‹©é˜¿é‡Œç™¾ç‚¼ï¼Ÿå…¶å®ç°åœ¨çš„ LLM å·®è·å¹¶ä¸å¤§ï¼Œæˆ‘ä»¬é€‰æ‹©å“ªå®¶éƒ½å¯ä»¥ï¼Œæœ€ä¸»è¦çš„ç™¾ç‚¼å¹³å°ä¸Šæœ‰å‘é‡æ¨¡å‹ï¼Œæˆ‘ä»¬ä»ä¸Šé¢å–ä¸€ä»½å¯†é’¥å°±å¯ä»¥ç›´æ¥ç”¨ LLM å’Œå‘é‡æ¨¡å‹å•¦ï¼Œæ¯”è¾ƒæ–¹ä¾¿ä¸€ç‚¹ï¼ˆä¹Ÿè®¸è…¾è®¯äº‘ã€ç™¾åº¦é£æ¡¨ã€å­—èŠ‚ç«å±±ä¹Ÿä¼šæœ‰ï¼Œä½†æ˜¯æˆ‘å¹¶ä¸çŸ¥é“......è¿™ä¸ªéšæ„ï¼‰</p>
<p>æˆ‘ä»¬å°±ç›´æ¥åˆ›å»ºä¸€ä¸ªAPI å¤åˆ¶å°±è¡Œäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91606eb38d234819920396daae9aa3f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=rGZdyhcw%2BlWF1JKUE68s7TpgkOY%3D" alt="image-20251115223214671" loading="lazy"/></p>
<h3 data-id="heading-17">ç¬¬äºŒæ­¥-æ‰“å¼€Cherry Studioè¿›è¡Œç›¸å…³é…ç½®</h3>
<p>é¦–å…ˆï¼Œåœ¨æ¨¡å‹æœåŠ¡ä¸­æœç´¢åˆ°â€œé˜¿é‡Œäº‘ç™¾ç‚¼â€ï¼Œç„¶åå¡«å……å¥½åˆšåˆšå¤åˆ¶å¥½çš„å¯†é’¥ï¼Œæ£€æµ‹æˆåŠŸå³å¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5e19f12d88f4e6c9955110a35f7c5c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=3Zqmm7fCrE5RuxhmL7DX%2BSsTLj8%3D" alt="image-20251115223906067" loading="lazy"/></p>
<p>ç„¶åç‚¹å‡»æœ€ä¸‹æ–¹çš„æ·»åŠ æŒ‰é’®ï¼Œæ·»åŠ å‘é‡æ¨¡å‹ï¼štext-embedding-v4</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/032f9675807945d09bfa4343173002df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=39S9PkL%2F536%2Ffit3LX%2BgsujZDII%3D" alt="image-20251115224016654" loading="lazy"/></p>
<h3 data-id="heading-18">ç¬¬ä¸‰æ­¥-æ·»åŠ çŸ¥è¯†åº“</h3>
<p>åˆ›å»ºçŸ¥è¯†åº“ï¼Œé…ç½®å‘é‡æ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6a7c15ca3714b20bb98776e4130c207~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=%2F6W2Q3SXghMEu3L5URWjOnJN0oo%3D" alt="image-20251115224418364" loading="lazy"/></p>
<p>æ·»åŠ è¦å‘é‡åŒ–çš„æ–‡ä»¶æˆ–è€…ç›®å½•çš„ä½ç½®ï¼ˆæˆ‘è¦æ¼”ç¤ºçš„æ˜¯ @CustomFilter è¿™ä¸ªæ³¨è§£ï¼Œæ‰€ä»¥å°±æŠŠæœ‰è¿™ä¸ªæ³¨è§£çš„MilvusPlusçš„æºç æ·»åŠ è¿›æ¥äº†ï¼‰ï¼Œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/386b1fd3db634f55965134c067faeb92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=coo%2BKZQzguaRTLDLtsI8WJqhosU%3D" alt="image-20251115224610581" loading="lazy"/></p>
<p>è¿™æ•´ä¸ªè¿‡ç¨‹å¯¹åº”çš„å°±æ˜¯ï¼Œä¹‹å‰è®²çš„RAGç³»ç»Ÿä¸­çš„ç´¢å¼•æµç¨‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf16902e695f4ccdb948309be23cb78b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=%2B9xfKlo1aTSc00XHOvH5%2B8Qv3UY%3D" alt="image-20251115224833168" loading="lazy"/></p>
<h3 data-id="heading-19">ç¬¬å››æ­¥-é…ç½®åŠ©æ‰‹ï¼Œä½“éªŒçŸ¥è¯†åº“</h3>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆä¸ç»™ä»–é…ç½®çŸ¥è¯†åº“ï¼Œä½“éªŒä¸€ä¸‹ä»–æ˜¯å¦ä¼šâ€œèƒ¡è¯´å…«é“â€œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f737791dc5c444958ac9cce4e598f7bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=yYeJzRzZhXgnEMaTyK%2BgvZ7NNW8%3D" alt="image-20251115225044022" loading="lazy"/></p>
<p>ç¡®å®åœ¨èƒ¡è¯´å…«é“äº†ã€‚ã€‚ã€‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f43107bda15d4b4c9f980b66942a31e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=%2FTY%2F9NsGPQKPXj4RpkuUUwbtfn4%3D" alt="image-20251115225448855" loading="lazy"/></p>
<p>ç°åœ¨ç¼–è¾‘åŠ©æ‰‹ï¼Œç»™ä»–å®‰æ’ä¸ŠçŸ¥è¯†åº“çœ‹ä¸€ä¸‹ï¼Œå®Œç¾æ’’èŠ±ğŸ‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47657e65337543d58afe4c73fa642eb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=YVoMO5yy%2FQPQJ3g%2B59bj%2FNp3P6g%3D" alt="image-20251115225537768" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>