<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ä¸€æ–‡ææ‡‚ LLM çš„ Transformerï¼çœ‹å®Œèƒ½å’Œåˆ«äººå¹ä¸€å¹´]]></title>    <link>https://juejin.cn/post/7577313637951094793</link>    <guid>https://juejin.cn/post/7577313637951094793</guid>    <pubDate>2025-11-28T03:26:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577313637951094793" data-draft-id="7577295460249354286" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡ææ‡‚ LLM çš„ Transformerï¼çœ‹å®Œèƒ½å’Œåˆ«äººå¹ä¸€å¹´"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-28T03:26:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡ææ‡‚ LLM çš„ Transformerï¼çœ‹å®Œèƒ½å’Œåˆ«äººå¹ä¸€å¹´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:26:56.000Z" title="Fri Nov 28 2025 03:26:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>å¦‚æœä½ æƒ³å¯¹å½“ä¸‹ AI LLM(å¤§è¯­è¨€æ¨¡å‹) çš„å·¥ä½œåŸç†æœ‰æ‰€äº†è§£ï¼Œæ­å¼€ ChatGPTã€DeepSeek èƒŒåçš„ç§˜å¯†ï¼Œé‚£ä¸€å®šè¦è®¤è¯†ä¸€ä¸‹æœ¬æ–‡çš„ä¸»è§’ Transformerã€‚</p>
<p>å½“æèµ· Transformer è¿™ä¸ªè¯é¢˜æ—¶ï¼Œä»¿ä½›äººäººéƒ½å¯ä»¥è®²äº›ç›¸å…³åè¯å‡ºæ¥ï¼Œä»€ä¹ˆè‡ªæ³¨æ„åŠ›æœºåˆ¶å•Šã€encoderã€decoderä»€ä¹ˆçš„ï¼Œä½†è‹¥æ·±å…¥è¿½é—®ç»†èŠ‚ï¼Œå´å¾ˆå°‘æœ‰äººèƒ½çœŸæ­£åœ°è¯´æ¸…æ¥šã€‚</p>
<p>å®ƒæœ€åˆæ¥è‡ªä¸€ç¯‡è¢«ç§°ä¸ºâ€œAI å¤§èˆªæµ·æ—¶ä»£èµ·ç‚¹â€çš„è®ºæ–‡ï¼š</p>
<ul>
<li>Attention is All You Need</li>
</ul>
<p>è¿™ç¯‡è®ºæ–‡é¦–æ¬¡æå‡ºçš„ Transformer æ¶æ„ï¼Œå·²ç»æˆä¸ºå½“ä¸‹æ‰€æœ‰å¤§æ¨¡å‹çš„åŸºç¡€ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±ä»è¿™ç¯‡æœ€åˆçš„è®ºæ–‡å‡ºå‘ï¼ŒçœŸæ­£ç†è§£ä¸‹ Transformer ç©¶ç«Ÿæ˜¯ä½•æ–¹ç¥åœ£ã€‚</p>
<p>æœ¬æ–‡ä¸è®¨è®ºå…¬å¼ï¼Œåªè§£è¯»å›¾è¡¨ï¼Œæ—¨åœ¨è®©æ›´å¤šè¯»è€…çœ‹å®Œå°±èƒ½é€šä¿—åœ°ã€æˆä½“ç³»åœ°ç»™èº«è¾¹å…¶ä»–äººè®²æ¸…æ¥š Transformer å·¥ä½œåŸç†ï¼Œä»è€ŒçœŸæ­£ç†è§£å®ƒç©¶ç«Ÿä¸ºä»€ä¹ˆå¦‚æ­¤ç«çˆ†ã€‚</p>
<p>é¦–å…ˆï¼Œå…ˆå¼•ç”¨è¿™ç¯‡è®ºæ–‡ä¸­çš„å…³äº Transformer è¿™ä¸ªæ¨¡å‹çš„æ•´ä½“æ¶æ„å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d0e659f6ad9423fa0febadf1eeba61e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905215&amp;x-signature=EKhlXxnUN%2Bp%2Bc9jagsfIwzjuKMg%3D" alt="" loading="lazy"/></p>
<p>ä¸Šæ¥ç›´æ¥å°±çœ‹æ¶æ„å›¾æ˜¯ä¸æ˜¯æœ‰äº›æ™•ï¼Ÿ</p>
<p>æ²¡å…³ç³»ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥ä¸€æ­¥æ­¥é€šä¿—ç†è§£ä¸‹è¿™å¼ æ¶æ„å›¾çš„æ·±å±‚å«ä¹‰ã€‚</p>
<p>å›¾çš„å·¦è¾¹ä¸€ä¾§Inputï¼ˆè¾“å…¥ï¼‰ï¼Œæ•´ä½“ä»£è¡¨Encoderï¼›å³è¾¹ä¸€ä¾§Outputï¼ˆè¾“å‡ºï¼‰ï¼Œæ•´ä½“ä»£è¡¨Decoderã€‚</p>
<h2 data-id="heading-0">01ï½œè¾“å…¥æ˜¯æ€ä¹ˆè¢« Transformerâ€œçœ‹æ‡‚â€çš„ï¼Ÿ</h2>
<p>æ•´ä¸ªè¾“å…¥æµç¨‹ä½ åªéœ€è¦å…ˆè®°ä½ä¸‹é¢çš„å…³é”®æµç¨‹ï¼š</p>
<blockquote>
<p>è¯ â†’ å‘é‡ â†’ åŠ ä½ç½® â†’ Q/K/V â†’ æ³¨æ„åŠ› â†’ FFN â†’ è¾“å‡º</p>
</blockquote>
<p>ç„¶åæˆ‘ä»¬æ¥ä¸€ç‚¹ä¸€ç‚¹çœ‹ã€‚</p>
<h3 data-id="heading-1">â‘  Input Embeddingï¼šæŠŠè¯å˜æˆæ•°å­—å‘é‡</h3>
<p>æ¨¡å‹ä¸è®¤è¯†â€œæˆ‘â€ã€â€œä½ â€ã€â€œçŒ«â€è¿™äº›è¯ï¼Œåªèƒ½æ¥å—æ•°å­—ã€‚</p>
<p>æ‰€ä»¥ï¼Œéœ€è¦æŠŠæ¯ä¸ªè¯è½¬æ¢æˆä¸€ä¸ªå‘é‡ï¼Œä¹Ÿå°±æ˜¯ä¸€ç»„æ•°å­—ï¼Œä¾‹å¦‚ï¼š</p>
<blockquote>
<p>æˆ‘ â†’ [0.12, -0.88, 0.43, ...]</p>
</blockquote>
<p>è¿™é‡Œç®€åŒ–äº†ç²¾åº¦æ–¹ä¾¿é˜…è¯»ï¼Œå‘é‡åŒ–è¿™ä¸€æ­¥éå¸¸åŸºç¡€ï¼Œä½†ä¹Ÿæ˜¯ç†è§£åé¢ä¸€åˆ‡çš„èµ·ç‚¹ã€‚</p>
<h3 data-id="heading-2">â‘¡ Positional Encodingï¼šç»™æ¨¡å‹è£…ä¸Šâ€œä½ç½®æ„Ÿâ€</h3>
<p>Transformer æ²¡æœ‰åƒä¼ ç»Ÿ RNN é‚£æ ·æŒ‰é¡ºåºé€è¯å¤„ç†è¾“å…¥ï¼Œå› æ­¤æ¨¡å‹æœ¬èº«æ— æ³•â€œå¤©ç„¶â€æ„ŸçŸ¥è¯çš„å…ˆåå…³ç³»ã€‚</p>
<p>æ‰€ä»¥éœ€è¦é¢å¤–å‘Šè¯‰æ¨¡å‹ï¼š</p>
<blockquote>
<p>â€œè¿™æ˜¯ç¬¬ 1 ä¸ªè¯ï¼Œè¿™æ˜¯ç¬¬ 2 ä¸ªè¯â€¦â€¦â€</p>
</blockquote>
<p>è®ºæ–‡ä½¿ç”¨äº† sin + cos å‡½æ•°è®¡ç®—çš„ä½ç½®ç¼–ç æ–¹å¼ï¼Œè®©æ¯ä¸ªè¯æ¸…æ¥šè‡ªå·±çš„â€œä½ç½®â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80ce180e16a34c39b4697eb5169f3c27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905215&amp;x-signature=WifRNE6CM3ZdeuJkcbOKkJiZ9qg%3D" alt="" loading="lazy"/></p>
<p>sin/cos ä½ç½®ç¼–ç ä¹ä¸€çœ‹æœ‰ç‚¹æ•°å­¦å‘³ï¼Œä½†å¯¹æ¨¡å‹æ¥è¯´æ˜¯éå¸¸ç®€å•é«˜æ•ˆçš„ã€‚</p>
<p>å®ƒåƒç»™æ¯ä¸ªä½ç½®è´´ä¸Šä¸€æ®µç‹¬ä¸€æ— äºŒçš„â€œèŠ‚å¥æ ‡ç­¾â€ï¼Œè®© Transformer èƒ½åˆ†è¾¨è¯çš„â€œä½ç½®â€ï¼ŒåŒæ—¶åˆä¸éœ€è¦å¤šä½™çš„è®­ç»ƒæˆæœ¬ã€‚</p>
<h3 data-id="heading-3">â‘¢ Q / K / Vï¼šSelf-Attention çš„çµé­‚</h3>
<p>è¿™æ˜¯æœ€è®©äººæ‹æ¡ˆå«ç»çš„è®¾è®¡ä¹‹ä¸€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72a679bc85e645989f46f6281a7d05ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905215&amp;x-signature=RfX2J9867PjtXxcgxh%2BNOcGYwrU%3D" alt="" loading="lazy"/></p>
<p>å¥å­ä¸­çš„æ¯ä¸ªè¯éƒ½ä¼šç”Ÿæˆ 3 ä¸ªå‘é‡ï¼š</p>
<ul>
<li>Qï¼ˆQueryï¼‰æˆ‘æƒ³æ‰¾ä»€ä¹ˆï¼Ÿ</li>
<li>Kï¼ˆKeyï¼‰æˆ‘æ˜¯è°ï¼Ÿæˆ‘æœ‰ä»€ä¹ˆç‰¹å¾ï¼Ÿ</li>
<li>Vï¼ˆValueï¼‰æˆ‘çš„å®é™…å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<p>å®ƒä»¬ä¸æ˜¯æ¦‚å¿µï¼Œè€Œæ˜¯å®å®åœ¨åœ¨çš„çŸ©é˜µä¹˜æ³•ç»“æœã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå¥å­é‡Œçš„æ¯ä¸ªè¯éƒ½ä¼šï¼š</p>
<p>æ‹¿ç€è‡ªå·±çš„ Q åˆ°å…¶ä»–è¯çš„ K é‚£é‡Œå»â€œæ‰“åˆ†â€ï¼Œé—®ï¼š<br/>
â€œä½ è·Ÿæˆ‘æœ‰å¤šç›¸å…³ï¼Ÿâ€</p>
<p>æ‰“åˆ†è¶Šé«˜ï¼Œå°±è¶Šå…³æ³¨è¿™ä¸ªè¯ã€‚</p>
<p>æœ€åå¯¹ V è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå¾—åˆ°â€œæ–°å«ä¹‰â€ã€‚</p>
<p>è¿™å°±æ˜¯å•ä¸€çš„ Self-Attentionã€‚</p>
<h2 data-id="heading-4">02ï½œä¸ºä»€ä¹ˆéœ€è¦ Multi-Head Attentionï¼Ÿ</h2>
<p>æœ‰äº†å•ä¸€çš„ Self-Attentionï¼Œä¸ºå•¥åˆéœ€è¦ Multi-Head Attention å‘¢ï¼Ÿ</p>
<p>å› ä¸ºæˆ‘ä»¬éœ€è¦ä»å¤šä¸ªè§’åº¦æ¥ç†è§£è‡ªç„¶è¯­è¨€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80324c3c8422473395f809aca69b428f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905215&amp;x-signature=Vls8Iwf%2BpyczmGx0FQ%2BEwGL9d20%3D" alt="" loading="lazy"/></p>
<p>æ³¨æ„åŠ›å¤´çš„æ•°é‡æ˜¯ä¸€ä¸ªè¶…å‚ï¼ˆHyperparameterï¼‰ï¼Œæ¯ä¸ªæ³¨æ„åŠ›å¤´å¯ä»¥å…³æ³¨ä¸åŒçš„è§†è§’ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æœ‰äº›å¤´ä¸“æ³¨äºä¸»è°“å…³ç³»</li>
<li>æœ‰äº›å¤´æ•æ‰ä»£è¯æŒ‡ä»£</li>
<li>æœ‰äº›å¤´çœ‹å¥å­æƒ…æ„Ÿ</li>
<li>æœ‰äº›å¤´çœ‹åè¯çŸ­è¯­è¾¹ç•Œ</li>
<li>æœ‰äº›å¤´çœ‹é•¿è·ç¦»ä¾èµ–</li>
<li>æœ‰äº›å¤´æ•æ‰å¥æ³•æ ‘ç»“æ„</li>
<li>...</li>
</ul>
<p>Transformer ä¸æ˜¯åªçœ‹ä¸€ä¸ªè§’åº¦ï¼Œè®ºæ–‡ä¸­çš„ä¾‹å­æ˜¯å¹¶è¡Œå¼€ 8 ä¸ªæ³¨æ„åŠ›å¤´ã€‚</p>
<p>å®é™…å¯ä»¥å¼€12 ä¸ªã€48 ä¸ªç”šè‡³æ›´å¤šçš„æ³¨æ„åŠ›å¤´ï¼Œä»æ›´å¤šè§†è§’æ‰«æå¥å­ã€‚</p>
<p>ä¸‹å›¾æ˜¯è®ºæ–‡æœ€åç»™å‡ºçš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œæè¿°äº†é’ˆå¯¹åŒä¸€æ®µæ–‡å­—ï¼Œä¸¤ä¸ªä¸åŒçš„æ³¨æ„åŠ›å¤´æ‰€å±•ç°å‡ºçš„å„è‡ªå…³ç³»ï¼Œå¯ä»¥çœ‹åˆ°ç¡®å®å­˜åœ¨æ˜æ˜¾åŒºåˆ«ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ba077f0d37b45b18c5bafe7821b687d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905215&amp;x-signature=dNuxziI2cXLbZHUQgXVY%2BU823pI%3D" alt="" loading="lazy"/></p>
<p>è¿™å°±æ˜¯ Multi-Head Attention çš„ç›´è§‚ä½“ç°ã€‚</p>
<h2 data-id="heading-5">03ï½œæ®‹å·®è¿æ¥ + LayerNormï¼šè®©è®­ç»ƒæ›´ç¨³å®š</h2>
<p>Self-Attention åªæ˜¯â€œåŠ å·¥â€äº†ä¸€éè¯å‘é‡ï¼Œä½†æˆ‘ä»¬è‚¯å®šè¿˜ä¸èƒ½ä¸¢æ‰åŸå§‹ä¿¡æ¯ã€‚</p>
<p>äºæ˜¯ï¼š</p>
<p>åŸå§‹è¾“å…¥ + æ³¨æ„åŠ›ç»“æœ â†’ åš LayerNorm å½’ä¸€åŒ–ï¼ˆå¯¹åº”æ¶æ„å›¾ä¸­ Add &amp; Normï¼‰</p>
<p>è¿™ä¸ªæ®‹å·®ç»“æ„è®©è®­ç»ƒç¨³å®šå¾—å¤šï¼Œä¹Ÿèƒ½å †æ›´å¤šå±‚ã€‚</p>
<h2 data-id="heading-6">04ï½œFeed Forward ç½‘ç»œï¼ˆFFNï¼‰ï¼šè¿›ä¸€æ­¥åŠ å·¥è¯­ä¹‰</h2>
<p>Attentionå±‚è´Ÿè´£å¹¿æ’’ç½‘ï¼ŒæŠŠç›¸å…³ä¿¡æ¯æœé›†åˆ°ä¸€èµ·ï¼›</p>
<p>FFNåˆ™è´Ÿè´£æ·±åŠ å·¥ï¼Œå¯¹è¿™ä¸ªä¿¡æ¯è¿›è¡Œæ›´å¤æ‚ã€æ›´æ·±åº¦çš„éçº¿æ€§å˜æ¢ã€‚</p>
<p>åˆæ™•äº†ï¼Ÿå…¶å®é€šä¿—æ¥è®²å°±æ˜¯ï¼šAttention è´Ÿè´£æ‰¾å…³ç³»ï¼ŒFFN è´Ÿè´£æå‡è¡¨è¾¾åŠ›ã€‚</p>
<p>è®ºæ–‡ä¸­æè¿°FFNçš„å…³é”®å†…å®¹å‚è€ƒå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd92d3744ade438496edc3909f78608a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905215&amp;x-signature=hJ7L%2BcBUoxZqokWjnDenyq4GyYs%3D" alt="" loading="lazy"/></p>
<p>ç®€å•ç†è§£å®ƒå°±æ˜¯ä¸€ä¸ªéå¸¸æœ´ç´ çš„ä¸¤å±‚å…¨è¿æ¥ç½‘ç»œï¼š</p>
<blockquote>
<p>Linear â†’ ReLU â†’ Linear</p>
</blockquote>
<p>FFN çš„ç»“æœæ˜¯ï¼šè®©æ¯ä¸ª token å¾—åˆ°æ›´ä¸°å¯Œã€æ›´æŠ½è±¡çš„ç‰¹å¾è¡¨è¾¾ï¼Œè¿™æ ·æ¨¡å‹æ‰èƒ½è¡¨è¾¾æ›´å¤æ‚çš„æ¨¡å¼ï¼Œè€Œä¸ä»…ä»…æ˜¯åšç®€å•çš„çº¿æ€§ç»„åˆã€‚</p>
<h2 data-id="heading-7">05ï½œé‡å¤ N æ¬¡ï¼šè®ºæ–‡æ˜¯ 6 å±‚ï¼Œå¯ä»¥åŠ æ›´å¤š</h2>
<p>è®ºæ–‡é‡Œ EncoderÂ <code>Nx</code>Â è¿™é‡Œæ˜¯å †äº† 6 å±‚ã€‚</p>
<p>ä½†è¿™å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ª è¶…å‚ï¼ˆHyperparameterï¼‰ã€‚</p>
<p>åæ¥çš„ BERTã€GPTã€Llama éƒ½å †åˆ°äº†å‡ åå±‚ç”šè‡³ä¸Šç™¾å±‚ã€‚</p>
<p>ä¸€èˆ¬æ¥è®²ï¼Œå±‚æ•°è¶Šå¤šã€æ¨¡å‹è¶Šå¤§ã€ç†è§£åŠ›è¶Šå¼ºã€‚</p>
<p>è¿™å…¶å®ä¹Ÿæ˜¯æ¨¡å‹è®­ç»ƒå †GPUèƒ½â€œå¤§åŠ›å‡ºå¥‡è¿¹â€çš„ç†è®ºåŸºç¡€ã€‚</p>
<h2 data-id="heading-8">06ï½œDecoder å¦‚ä½•åƒäººä¸€æ ·â€œè¾“å‡ºâ€å†…å®¹ï¼Ÿ</h2>
<p>Decoderæ˜¯æ¨¡å‹çš„â€œå†™ä½œå™¨â€ï¼Œå…¶å·¥ä½œä¸¥æ ¼éµå¾ªæ¶æ„å›¾å³ä¾§æµç¨‹ï¼Œæ ¸å¿ƒæ˜¯ â€œä»å·¦åˆ°å³ï¼Œé€è¯ç”Ÿæˆâ€ã€‚</p>
<p>ä¸ºäº†ç†è§£è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬ä»¥ç¿»è¯‘ä»»åŠ¡ä¸ºä¾‹ï¼šè¾“å…¥ "I Love You"ï¼Œè¾“å‡º "æˆ‘çˆ±ä½ "ã€‚</p>
<h3 data-id="heading-9">â‘  Output Embeddingï¼šå…ˆæŠŠè¾“å‡ºè¯å˜å‘é‡</h3>
<p>ç†è§£æ–¹å¼å’Œè¾“å…¥ä¸€æ ·ï¼Œæ¯ä¸ªè¯è¢«æ˜ å°„æˆä¸€ä¸ªå‘é‡ï¼Œç”¨äºåç»­è®¡ç®—ã€‚</p>
<h3 data-id="heading-10">â‘¡ Shifted Rightï¼šé˜²æ­¢æ¨¡å‹â€œå·çœ‹ç­”æ¡ˆâ€</h3>
<p>åœ¨æ¨¡å‹è®­ç»ƒé˜¶æ®µï¼Œéœ€è¦æŠŠæ ‡å‡†ç­”æ¡ˆæ•´ä½“å³ç§»ä¸€ä½ï¼Œå¹¶åœ¨å¼€å¤´åŠ ä¸Šèµ·å§‹ç¬¦Â ï¼Œç›¸å½“äºç»™æ¨¡å‹åšä¸€ä¸ªå¡«ç©ºé¢˜ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">	é¢˜ç›®: &lt;start&gt; æˆ‘ çˆ±
</span></code></pre>
<p>æ­¤æ—¶æ¨¡å‹çœ‹åˆ°çš„æ˜¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">	&lt;start&gt; æˆ‘ çˆ±
</span></code></pre>
<p>ä¹Ÿå°±æ˜¯å³ç§»ä¸€æ ¼ã€‚</p>
<h3 data-id="heading-11">â‘¢ Masked Multi-Head Attentionï¼šé®ä½æœªæ¥</h3>
<p>æœ‰åŒå­¦è¯´äº†ï¼Œä¸Šé¢å‘å³ç§»ä¸€ä½æ²¡å•¥æ„ä¹‰å‘€ï¼Œæ¨¡å‹è¿˜æ˜¯å¯ä»¥çœ‹åˆ°ç­”æ¡ˆçš„ä¸€éƒ¨åˆ†ï¼Œç›´æ¥æŠ„å°±å¯ä»¥å•Šï¼Œèµ·ä¸åˆ°è®­ç»ƒæ•ˆæœã€‚</p>
<p>æ­¤æ—¶å°±éœ€è¦Â <code>Masked Multi-Head Attention</code>Â åŠŸèƒ½æ¥é®ä½æœªé¢„æµ‹çš„è¯ï¼Œé˜²æ­¢æ¨¡å‹ä»æœªæ¥æŠ„ç­”æ¡ˆã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´å®ƒå’Œä¸Šé¢çš„Â <code>Shifted Right</code>Â ååŒå·¥ä½œï¼Œå…±åŒç¡®ä¿äº†æ¨¡å‹æ— æ³•â€œå·çœ‹ç­”æ¡ˆâ€ã€‚</p>
<p>æ¯”å¦‚æ¨¡å‹è¦å¼€å§‹åšè¿™å¼ å¡«ç©ºå·äº†ã€‚å®ƒéœ€è¦ä¾æ¬¡å¡«å‡ºä¸‰ä¸ªç©ºï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">	ç¬¬ä¸€ä¸ªç©ºï¼šé¢˜ç›®æ˜¯ &lt;start&gt; ______
</span>
<span class="hljs-code">	 
</span>
<span class="hljs-code">	ç¬¬äºŒä¸ªç©ºï¼šé¢˜ç›®æ˜¯ &lt;start&gt; æˆ‘ ______
</span>
<span class="hljs-code">	 
</span>
<span class="hljs-code">	ç¬¬ä¸‰ä¸ªç©ºï¼šé¢˜ç›®æ˜¯ &lt;start&gt; æˆ‘ çˆ± ______
</span>
<span class="hljs-code">	
</span></code></pre>
<h3 data-id="heading-12">â‘£ Multi-Head Attention- â€œè¯·æ•™Encoderâ€</h3>
<p>Decoder åœ¨ç”Ÿæˆæ–°è¯æ—¶ï¼Œéœ€è¦å‚è€ƒ Encoder çš„è¾“å‡ºã€‚è¿™å±‚ Attention æ˜¯æ¡¥æ¢ï¼Œè¿æ¥è¾“å…¥å’Œè¾“å‡ºï¼Œè®© Decoder å¯ä»¥â€œè¯·æ•™ Encoderâ€ï¼š</p>
<p>â€œä½ ç”Ÿæˆçš„è¯å’Œè¾“å…¥åºåˆ—çš„å“ªäº›éƒ¨åˆ†ç›¸å…³ï¼Ÿâ€</p>
<p>ä¾‹å¦‚ç¿»è¯‘ "I Love You"ï¼š</p>
<ul>
<li>ç”Ÿæˆ "æˆ‘" æ—¶ï¼Œå¯èƒ½ä¸»è¦å…³æ³¨è¾“å…¥çš„ "I"</li>
<li>ç”Ÿæˆ "çˆ±" æ—¶ï¼Œå¯èƒ½ä¸»è¦å…³æ³¨è¾“å…¥çš„ "Love"</li>
<li>ç”Ÿæˆ "ä½ " æ—¶ï¼Œå¯èƒ½ä¸»è¦å…³æ³¨è¾“å…¥çš„ "You"</li>
</ul>
<h3 data-id="heading-13">â‘¤ Linear + Softmaxï¼šå¾—åˆ°ä¸‹ä¸€ä¸ªè¯çš„æ¦‚ç‡</h3>
<p>æ¯”å¦‚å·²ç»ç”Ÿæˆäº†â€œæˆ‘çˆ±â€ï¼Œåé¢è¿™ä¸ªå­—æ˜¯å•¥ï¼Œä¼šæœ‰ç±»ä¼¼è¿™æ ·çš„ä¸€ç»„æ¦‚ç‡ï¼š</p>
<blockquote>
<p>ä½ ï¼š71%<br/>
ä»–ï¼š16%<br/>
å®ƒï¼š11%<br/>
å…¶å®ƒï¼š2%</p>
</blockquote>
<p>é€‰æ¦‚ç‡æœ€é«˜çš„ï¼Œå°±æ˜¯ä¸‹ä¸€ä¸ªè¦ç”Ÿæˆçš„è¯ã€‚</p>
<h2 data-id="heading-14">æœ€ç»ˆæ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ–‡çš„è®²è§£ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥æ‹†è§£äº†Transformerçš„æ ¸å¿ƒæœºåˆ¶ï¼šä»è¯å‘é‡åŒ–ä¸ä½ç½®ç¼–ç å¥ å®šåŸºç¡€ï¼Œåˆ°Self-Attentionä¸Multi-Head Attentionå®ç°å¤šè§†è§’çš„è¯­ä¹‰æ•æ‰ï¼Œå†é€šè¿‡æ®‹å·®è¿æ¥ä¸LayerNormä¿éšœè®­ç»ƒçš„ç¨³å®šæ€§ï¼Œæœ€åç”±FFNè¿›è¡Œæ·±åº¦éçº¿æ€§å˜æ¢ä»¥å¢å¼ºç‰¹å¾è¡¨è¾¾ã€‚</p>
<p>Encoderé€šè¿‡å †å Nä¸ªç›¸åŒçš„å±‚æ¥é€æ­¥æ·±åŒ–å¯¹è¾“å…¥çš„ç†è§£ï¼›Decoderçš„æ¯ä¸ªå±‚åˆ™ä¸¥æ ¼éµå¾ªä¸€ä¸ªæ›´å¤æ‚çš„å¤„ç†æµç¨‹ï¼š</p>
<p>åœ¨Masked Multi-Head Attentionä¸­ç¡®ä¿ç”Ÿæˆæ—¶ä¸ä¼šâ€œå·çœ‹â€æœªæ¥ï¼Œå¹¶ç»è¿‡Add &amp; Normã€‚</p>
<p>åœ¨Multi-Head Attentionï¼ˆå³è®ºæ–‡ä¸­çš„Encoder-Decoder Attentionå±‚ï¼‰ä¸­â€œè¯·æ•™â€Encoderçš„æœ€ç»ˆè¾“å‡ºï¼Œå¹¶å†æ¬¡ç»è¿‡Add &amp; Normã€‚</p>
<p>åŒæ ·é€šè¿‡ä¸€ä¸ªFFNç½‘ç»œè¿›è¡Œæ·±åº¦åŠ å·¥ï¼Œå¹¶æœ€ç»ˆç»è¿‡Add &amp; Normåè¾“å‡ºç»™ä¸‹ä¸€å±‚æˆ–æœ€ç»ˆçš„é¢„æµ‹æ¨¡å—ã€‚</p>
<p>æœ€ç»ˆï¼ŒDecoderçš„è¾“å‡ºç»ç”±Linear+Softmaxå±‚è½¬æ¢ä¸ºä¸‹ä¸€ä¸ªè¯çš„æ¦‚ç‡åˆ†å¸ƒã€‚Transformerå‡­å€Ÿè¿™ä¸€é«˜åº¦å¹¶è¡Œã€å¯æ‰©å±•çš„å¯¹ç§°æ€§è®¾è®¡ï¼ˆEncoderä¸Decoderå±‚å…·æœ‰ç›¸ä¼¼çš„æ ¸å¿ƒç»“æ„ï¼‰ï¼Œæˆä¸ºå½“ä»Šæ‰€æœ‰å¤§è¯­è¨€æ¨¡å‹çš„åŸºçŸ³ï¼Œå®Œç¾è¯ é‡Šäº†Â <code>Attention is All You Need</code>Â çš„é©å‘½æ€§æ€æƒ³ã€‚</p>
<h2 data-id="heading-15">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€å‘å·¥å…·é“¾-æ„å»ºã€æµ‹è¯•ã€ä»£ç è´¨é‡æ ¡éªŒå¸¸ç”¨åŒ…çš„æ¯”è¾ƒ]]></title>    <link>https://juejin.cn/post/7577332659506364459</link>    <guid>https://juejin.cn/post/7577332659506364459</guid>    <pubDate>2025-11-28T03:48:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577332659506364459" data-draft-id="7577343038428201003" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€å‘å·¥å…·é“¾-æ„å»ºã€æµ‹è¯•ã€ä»£ç è´¨é‡æ ¡éªŒå¸¸ç”¨åŒ…çš„æ¯”è¾ƒ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2025-11-28T03:48:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€å‘å·¥å…·é“¾-æ„å»ºã€æµ‹è¯•ã€ä»£ç è´¨é‡æ ¡éªŒå¸¸ç”¨åŒ…çš„æ¯”è¾ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:48:20.000Z" title="Fri Nov 28 2025 03:48:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¼€å‘å·¥å…·é“¾åŒ…æ‹¬æ„å»ºã€æµ‹è¯•ã€ä»£ç è´¨é‡æ ¡éªŒç­‰æ ¸å¿ƒå·¥å…·ï¼Œæ˜¯ npm åŒ…å¼€å‘çš„åŸºç¡€è®¾æ–½ã€‚</p>
<h2 data-id="heading-0">ğŸ“‘ ç›®å½•</h2>
<ul>
<li><a href="#%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83" title="#%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83">å¿«é€Ÿå‚è€ƒ</a></li>
<li><a href="#%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7" title="#%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7">æ„å»ºå·¥å…·</a>
<ul>
<li><a href="#tsup-%E6%8E%A8%E8%8D%90" title="#tsup-%E6%8E%A8%E8%8D%90">tsup</a></li>
<li><a href="#rollup" title="#rollup">Rollup</a></li>
<li><a href="#esbuild" title="#esbuild">esbuild</a></li>
<li><a href="#unbuild" title="#unbuild">unbuild</a></li>
<li><a href="#%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E5%AF%B9%E6%AF%94" title="#%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E5%AF%B9%E6%AF%94">æ„å»ºå·¥å…·å¯¹æ¯”</a></li>
</ul>
</li>
<li><a href="#%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7" title="#%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7">æµ‹è¯•å·¥å…·</a>
<ul>
<li><a href="#vitest-%E6%8E%A8%E8%8D%90" title="#vitest-%E6%8E%A8%E8%8D%90">Vitest</a></li>
<li><a href="#jest" title="#jest">Jest</a></li>
<li><a href="#mocha" title="#mocha">Mocha</a></li>
<li><a href="#ava" title="#ava">Ava</a></li>
<li><a href="#%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E5%AF%B9%E6%AF%94" title="#%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E5%AF%B9%E6%AF%94">æµ‹è¯•å·¥å…·å¯¹æ¯”</a></li>
</ul>
</li>
<li><a href="#%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E5%B7%A5%E5%85%B7" title="#%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E5%B7%A5%E5%85%B7">ä»£ç è´¨é‡å·¥å…·</a>
<ul>
<li><a href="#eslint--prettier" title="#eslint--prettier">ESLint + Prettier</a></li>
<li><a href="#stylelint%E6%A0%B7%E5%BC%8F%E6%96%87%E4%BB%B6%E6%A0%A1%E9%AA%8C" title="#stylelint%E6%A0%B7%E5%BC%8F%E6%96%87%E4%BB%B6%E6%A0%A1%E9%AA%8C">Stylelint</a></li>
</ul>
</li>
<li><a href="#git-hooks" title="#git-hooks">Git Hooks</a></li>
<li><a href="#vs-code-%E9%9B%86%E6%88%90" title="#vs-code-%E9%9B%86%E6%88%90">VS Code é›†æˆ</a></li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æœ€ä½³å®è·µ</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" title="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">å¸¸è§é—®é¢˜</a></li>
</ul>
<hr/>
<h2 data-id="heading-1">å¿«é€Ÿå‚è€ƒ</h2>
<h3 data-id="heading-2">å·¥å…·é€‰å‹é€ŸæŸ¥è¡¨</h3>



































<table><thead><tr><th>å·¥å…·ç±»å‹</th><th>æ¨èå·¥å…·</th><th>é€‚ç”¨åœºæ™¯</th><th>å¤‡é€‰æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>æ„å»ºå·¥å…·</strong></td><td>tsup</td><td>TypeScript åº“ã€åŒæ¨¡å¼ï¼ˆESM+CJSï¼‰ã€å¿«é€Ÿä¸Šæ‰‹</td><td>Rollupï¼ˆå¤æ‚åœºæ™¯ï¼‰ã€esbuildï¼ˆæé€Ÿæ„å»ºï¼‰</td></tr><tr><td><strong>æµ‹è¯•å·¥å…·</strong></td><td>Vitest</td><td>TypeScriptã€ESMã€å¿«é€Ÿæµ‹è¯•</td><td>Jestï¼ˆæˆç†Ÿç”Ÿæ€ï¼‰ã€Mochaï¼ˆçµæ´»é…ç½®ï¼‰</td></tr><tr><td><strong>ä»£ç è´¨é‡</strong></td><td>ESLint + Prettier + Stylelint</td><td>ä»£ç è§„èŒƒã€æ ¼å¼åŒ–</td><td>Biomeï¼ˆä¸€ä½“åŒ–æ–¹æ¡ˆï¼‰</td></tr><tr><td><strong>Git Hooks</strong></td><td>simple-git-hooks</td><td>è½»é‡çº§ã€é›¶é…ç½®</td><td>huskyï¼ˆåŠŸèƒ½ä¸°å¯Œï¼‰</td></tr></tbody></table>
<h3 data-id="heading-3">å¿«é€Ÿå¼€å§‹</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…æ ¸å¿ƒå·¥å…·</span>
pnpm add tsup typescript vitest -D
pnpm add eslint prettier -D

<span class="hljs-comment"># 2. åˆå§‹åŒ–é…ç½®</span>
<span class="hljs-comment"># - tsup.config.ts</span>
<span class="hljs-comment"># - vitest.config.ts</span>
<span class="hljs-comment"># - .eslintrc.js</span>
<span class="hljs-comment"># - .prettierrc.js</span>

<span class="hljs-comment"># 3. é…ç½® package.json scripts</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">æ„å»ºå·¥å…·</h2>
<h3 data-id="heading-5">tsupï¼ˆæ¨èï¼‰</h3>
<p>å¯¹äºéœ€è¦ TypeScript + åŒæ¨¡å¼å…¼å®¹ï¼ˆESM + CJSï¼‰çš„ npm åŒ…å¼€å‘ï¼Œtsup æ˜¯å½“å‰æœ€æ¨èçš„å·¥å…·ä¹‹ä¸€â€”â€”å®ƒå®Œç¾è§£å†³äº†ã€ŒTS è½¬è¯‘ + åŒæ¨¡å¼æ‰“åŒ… + ç±»å‹å£°æ˜ç”Ÿæˆ + ä½é…ç½®æˆæœ¬ã€çš„æ ¸å¿ƒéœ€æ±‚ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… é›¶é…ç½®ï¼Œå¼€ç®±å³ç”¨</li>
<li>âœ… åŸºäº esbuildï¼Œæ„å»ºé€Ÿåº¦æå¿«</li>
<li>âœ… è‡ªåŠ¨ç”Ÿæˆç±»å‹å£°æ˜ï¼ˆ.d.tsï¼‰</li>
<li>âœ… æ”¯æŒ Shebangï¼ˆCLI å·¥å…·å¿…éœ€ï¼‰</li>
<li>âœ… å†…ç½® Tree-shaking</li>
</ul>
<h4 data-id="heading-6">å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add tsup typescript -D
</code></pre>
<h4 data-id="heading-7">é…ç½®</h4>
<p><strong>tsup.config.ts</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'tsup'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">entry</span>: [<span class="hljs-string">'src/index.ts'</span>], <span class="hljs-comment">// å…¥å£æ–‡ä»¶</span>
  <span class="hljs-attr">format</span>: [<span class="hljs-string">'esm'</span>, <span class="hljs-string">'cjs'</span>], <span class="hljs-comment">// åŒæ—¶è¾“å‡º ESMï¼ˆ.jsï¼‰å’Œ CJSï¼ˆ.cjsï¼‰</span>
  <span class="hljs-attr">shebang</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// CLI å¿…é¡»æ·»åŠ  Shebangï¼Œä¼šè‡ªåŠ¨æ·»åŠ  #!/usr/bin/env node</span>
  <span class="hljs-attr">dts</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆ TypeScript ç±»å‹å£°æ˜ï¼ˆ.d.tsï¼‰</span>
  <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç”Ÿæˆ sourcemap</span>
  <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ‰“åŒ…å‰æ¸…ç©º dist ç›®å½•</span>
  <span class="hljs-attr">minify</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒå‹ç¼©ä»£ç ï¼ˆå¯é€‰ï¼‰</span>
  <span class="hljs-attr">target</span>: <span class="hljs-string">'es2020'</span>, <span class="hljs-comment">// è½¬è¯‘ç›®æ ‡ï¼ˆå…¼å®¹ Node 14+ï¼‰</span>
  <span class="hljs-attr">splitting</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// å…³é—­ä»£ç åˆ†å‰²ï¼ˆåº“æ‰“åŒ…ä¸éœ€è¦ï¼‰</span>
});
</code></pre>
<p><strong>package.json scripts</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prepublishOnly"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run build"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-8">æ‰“åŒ…äº§ç‰©</h4>
<pre><code class="hljs language-bash" lang="bash">dist/
â”œâ”€â”€ index.js        <span class="hljs-comment"># ESM äº§ç‰©</span>
â”œâ”€â”€ index.cjs       <span class="hljs-comment"># CJS äº§ç‰©</span>
â”œâ”€â”€ index.d.ts      <span class="hljs-comment"># TS ç±»å‹å£°æ˜</span>
â”œâ”€â”€ index.js.map    <span class="hljs-comment"># ESM sourcemap</span>
â””â”€â”€ index.cjs.map   <span class="hljs-comment"># CJS sourcemap</span>
</code></pre>
<hr/>
<h3 data-id="heading-9">Rollup</h3>
<p>Rollup æ˜¯æˆç†Ÿçš„æ¨¡å—æ‰“åŒ…å™¨ï¼Œé€‚åˆå¤æ‚åœºæ™¯å’Œç²¾ç»†æ§åˆ¶ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… å¼ºå¤§çš„æ’ä»¶ç”Ÿæ€</li>
<li>âœ… ç²¾ç¡®çš„ Tree-shaking</li>
<li>âœ… æ”¯æŒå¤šå…¥å£ã€ä»£ç åˆ†å‰²</li>
<li>âœ… é€‚åˆå¤§å‹åº“å’Œå¤æ‚æ„å»ºéœ€æ±‚</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>ï¼š</p>
<ul>
<li>âŒ é…ç½®ç›¸å¯¹å¤æ‚</li>
<li>âŒ éœ€è¦æ‰‹åŠ¨é…ç½® TypeScript ç±»å‹ç”Ÿæˆ</li>
</ul>
<h4 data-id="heading-10">å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add rollup @rollup/plugin-typescript @rollup/plugin-node-resolve @rollup/plugin-commonjs rollup-plugin-dts -D
</code></pre>
<h4 data-id="heading-11">é…ç½®</h4>
<p><strong>rollup.config.js</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> typescript <span class="hljs-keyword">from</span> <span class="hljs-string">'@rollup/plugin-typescript'</span>;
<span class="hljs-keyword">import</span> resolve <span class="hljs-keyword">from</span> <span class="hljs-string">'@rollup/plugin-node-resolve'</span>;
<span class="hljs-keyword">import</span> commonjs <span class="hljs-keyword">from</span> <span class="hljs-string">'@rollup/plugin-commonjs'</span>;
<span class="hljs-keyword">import</span> dts <span class="hljs-keyword">from</span> <span class="hljs-string">'rollup-plugin-dts'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
  <span class="hljs-comment">// æ„å»º JS æ–‡ä»¶</span>
  {
    <span class="hljs-attr">input</span>: <span class="hljs-string">'src/index.ts'</span>,
    <span class="hljs-attr">output</span>: [
      {
        <span class="hljs-attr">file</span>: <span class="hljs-string">'dist/index.cjs'</span>,
        <span class="hljs-attr">format</span>: <span class="hljs-string">'cjs'</span>,
        <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>,
      },
      {
        <span class="hljs-attr">file</span>: <span class="hljs-string">'dist/index.js'</span>,
        <span class="hljs-attr">format</span>: <span class="hljs-string">'esm'</span>,
        <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>,
      },
    ],
    <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">typescript</span>(), <span class="hljs-title function_">resolve</span>(), <span class="hljs-title function_">commonjs</span>()],
    <span class="hljs-attr">external</span>: [<span class="hljs-string">'react'</span>, <span class="hljs-string">'react-dom'</span>], <span class="hljs-comment">// å¤–éƒ¨ä¾èµ–</span>
  },
  <span class="hljs-comment">// ç”Ÿæˆç±»å‹å£°æ˜</span>
  {
    <span class="hljs-attr">input</span>: <span class="hljs-string">'src/index.ts'</span>,
    <span class="hljs-attr">output</span>: {
      <span class="hljs-attr">file</span>: <span class="hljs-string">'dist/index.d.ts'</span>,
      <span class="hljs-attr">format</span>: <span class="hljs-string">'es'</span>,
    },
    <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">dts</span>()],
  },
];
</code></pre>
<hr/>
<h3 data-id="heading-12">esbuild</h3>
<p>esbuild æ˜¯æé€Ÿçš„ JavaScript/TypeScript æ‰“åŒ…å™¨ï¼Œé€‚åˆå¯¹æ„å»ºé€Ÿåº¦è¦æ±‚æé«˜çš„åœºæ™¯ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… æ„å»ºé€Ÿåº¦æå¿«ï¼ˆ10-100x å¿«äºå…¶ä»–å·¥å…·ï¼‰</li>
<li>âœ… é›¶é…ç½®ï¼ŒAPI ç®€å•</li>
<li>âœ… å†…ç½® TypeScript æ”¯æŒ</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>ï¼š</p>
<ul>
<li>âŒ ä¸æ”¯æŒç±»å‹å£°æ˜ç”Ÿæˆï¼ˆéœ€é…åˆ tscï¼‰</li>
<li>âŒ æ’ä»¶ç”Ÿæ€ç›¸å¯¹è¾ƒå°‘</li>
<li>âŒ é…ç½®é€‰é¡¹è¾ƒå°‘</li>
</ul>
<h4 data-id="heading-13">å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add esbuild typescript -D
</code></pre>
<h4 data-id="heading-14">é…ç½®</h4>
<p><strong>esbuild.config.js</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { build } <span class="hljs-keyword">from</span> <span class="hljs-string">'esbuild'</span>;

<span class="hljs-title function_">build</span>({
  <span class="hljs-attr">entryPoints</span>: [<span class="hljs-string">'src/index.ts'</span>],
  <span class="hljs-attr">bundle</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">outdir</span>: <span class="hljs-string">'dist'</span>,
  <span class="hljs-attr">format</span>: <span class="hljs-string">'esm'</span>,
  <span class="hljs-attr">platform</span>: <span class="hljs-string">'node'</span>,
  <span class="hljs-attr">target</span>: <span class="hljs-string">'es2020'</span>,
  <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">minify</span>: <span class="hljs-literal">true</span>,
}).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>));
</code></pre>
<p><strong>package.json scripts</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node esbuild.config.js &amp;&amp; tsc --emitDeclarationOnly"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build:cjs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbuild src/index.ts --bundle --format=cjs --outfile=dist/index.cjs"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build:esm"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbuild src/index.ts --bundle --format=esm --outfile=dist/index.js"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-15">unbuild</h3>
<p>unbuild æ˜¯ Nuxt å›¢é˜Ÿå¼€å‘çš„æ„å»ºå·¥å…·ï¼ŒåŸºäº Rollupï¼Œé…ç½®æ›´ç®€å•ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… é…ç½®ç®€å•ï¼Œç±»ä¼¼ tsup</li>
<li>âœ… åŸºäº Rollupï¼ŒåŠŸèƒ½å¼ºå¤§</li>
<li>âœ… è‡ªåŠ¨ç”Ÿæˆç±»å‹å£°æ˜</li>
<li>âœ… æ”¯æŒ monorepo</li>
</ul>
<h4 data-id="heading-16">å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add unbuild -D
</code></pre>
<h4 data-id="heading-17">é…ç½®</h4>
<p><strong>build.config.ts</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { defineBuildConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'unbuild'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineBuildConfig</span>({
  <span class="hljs-attr">entries</span>: [<span class="hljs-string">'src/index'</span>],
  <span class="hljs-attr">declaration</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">rollup</span>: {
    <span class="hljs-attr">emitCJS</span>: <span class="hljs-literal">true</span>,
  },
});
</code></pre>
<hr/>
<h3 data-id="heading-18">æ„å»ºå·¥å…·å¯¹æ¯”</h3>





















































<table><thead><tr><th>å·¥å…·</th><th>é€Ÿåº¦</th><th>é…ç½®å¤æ‚åº¦</th><th>ç±»å‹å£°æ˜</th><th>æ’ä»¶ç”Ÿæ€</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>tsup</strong></td><td>â­â­â­â­â­</td><td>â­â­â­â­â­</td><td>âœ… è‡ªåŠ¨</td><td>â­â­â­</td><td>TypeScript åº“ã€å¿«é€Ÿä¸Šæ‰‹</td></tr><tr><td><strong>Rollup</strong></td><td>â­â­â­</td><td>â­â­</td><td>âŒ éœ€æ’ä»¶</td><td>â­â­â­â­â­</td><td>å¤§å‹åº“ã€å¤æ‚æ„å»º</td></tr><tr><td><strong>esbuild</strong></td><td>â­â­â­â­â­</td><td>â­â­â­â­</td><td>âŒ éœ€ tsc</td><td>â­â­</td><td>æé€Ÿæ„å»ºã€ç®€å•é¡¹ç›®</td></tr><tr><td><strong>unbuild</strong></td><td>â­â­â­â­</td><td>â­â­â­â­â­</td><td>âœ… è‡ªåŠ¨</td><td>â­â­â­â­</td><td>Nuxt ç”Ÿæ€ã€monorepo</td></tr><tr><td><strong>webpack</strong></td><td>â­â­</td><td>â­</td><td>âŒ éœ€é…ç½®</td><td>â­â­â­â­â­</td><td>åº”ç”¨é¡¹ç›®ï¼ˆä¸æ¨èåº“ï¼‰</td></tr></tbody></table>
<p><strong>é€‰å‹å»ºè®®</strong>ï¼š</p>
<ul>
<li><strong>å¿«é€Ÿå¼€å‘ TypeScript åº“</strong>ï¼štsup</li>
<li><strong>å¤æ‚æ„å»ºéœ€æ±‚</strong>ï¼šRollup</li>
<li><strong>æè‡´æ„å»ºé€Ÿåº¦</strong>ï¼šesbuild</li>
<li><strong>Nuxt é¡¹ç›®</strong>ï¼šunbuild</li>
</ul>
<hr/>
<h2 data-id="heading-19">æµ‹è¯•å·¥å…·</h2>
<h3 data-id="heading-20">Vitestï¼ˆæ¨èï¼‰</h3>
<p>Vitest æ˜¯åŸºäº esbuild çš„è¶…é«˜é€Ÿæµ‹è¯•å·¥å…·ï¼Œå¤©ç”Ÿæ”¯æŒ TS/ESM/CJSï¼Œä¸ tsup ç”Ÿæ€å¥‘åˆåº¦æé«˜ï¼Œé…ç½®ç®€å•ä¸”è¿è¡Œé€Ÿåº¦æ¯” Jest å¿« 5-10 å€ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… åŸºäº esbuildï¼Œé€Ÿåº¦æå¿«</li>
<li>âœ… é›¶é…ç½®ï¼Œå¼€ç®±å³ç”¨</li>
<li>âœ… åŸç”Ÿæ”¯æŒ TypeScriptã€ESM</li>
<li>âœ… å…¼å®¹ Jest APIï¼Œè¿ç§»æˆæœ¬ä½</li>
<li>âœ… å†…ç½® UI ç•Œé¢</li>
</ul>
<h4 data-id="heading-21">å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add vitest @vitest/ui @vitest/coverage-v8 -D
</code></pre>
<h4 data-id="heading-22">é…ç½®</h4>
<p><strong>é›¶é…ç½®ä½¿ç”¨</strong>ï¼ˆpackage.jsonï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest run"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test:watch"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test:ui"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest ui"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test:coverage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest run --coverage"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ä½¿ç”¨é…ç½®æ–‡ä»¶</strong>ï¼ˆvitest.config.tsï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vitest/config'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">globals</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">environment</span>: <span class="hljs-string">'node'</span>,
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'test/**/*.test.{ts,js}'</span>],
    <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'node_modules'</span>, <span class="hljs-string">'dist'</span>],
    <span class="hljs-attr">coverage</span>: {
      <span class="hljs-attr">provider</span>: <span class="hljs-string">'v8'</span>,
      <span class="hljs-attr">reporter</span>: [<span class="hljs-string">'text'</span>, <span class="hljs-string">'html'</span>, <span class="hljs-string">'lcov'</span>],
      <span class="hljs-attr">reportsDirectory</span>: <span class="hljs-string">'coverage'</span>,
      <span class="hljs-attr">thresholds</span>: {
        <span class="hljs-attr">lines</span>: <span class="hljs-number">80</span>,
        <span class="hljs-attr">functions</span>: <span class="hljs-number">80</span>,
        <span class="hljs-attr">branches</span>: <span class="hljs-number">80</span>,
        <span class="hljs-attr">statements</span>: <span class="hljs-number">80</span>,
      },
    },
  },
});
</code></pre>
<h4 data-id="heading-23">ç¼–å†™æµ‹è¯•ç”¨ä¾‹</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { describe, test, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vitest'</span>;
<span class="hljs-keyword">import</span> { add, formatDate } <span class="hljs-keyword">from</span> <span class="hljs-string">'../src/index.ts'</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'å·¥å…·å‡½æ•°'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">test</span>(<span class="hljs-string">'add(1, 2) åº”è¯¥è¿”å› 3'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">3</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">add</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">4</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">0</span>);
  });

  <span class="hljs-title function_">test</span>(<span class="hljs-string">'formatDate åº”è¯¥å°†æ—¥æœŸæ ¼å¼åŒ–ä¸º YYYY-MM-DD'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-string">'2025-11-24'</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">formatDate</span>(date)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">'2025-11-24'</span>);
  });

  <span class="hljs-title function_">test</span>(<span class="hljs-string">'å¼‚æ­¥å‡½æ•°åº”è¯¥è¿”å›æˆåŠŸç»“æœ'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'test'</span> });
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>();
    <span class="hljs-title function_">expect</span>(result.<span class="hljs-property">name</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">'test'</span>);
  });
});
</code></pre>
<hr/>
<h3 data-id="heading-24">Jest</h3>
<p>Jest æ˜¯ Facebook å¼€å‘çš„æˆç†Ÿæµ‹è¯•æ¡†æ¶ï¼Œç”Ÿæ€ä¸°å¯Œï¼Œé€‚åˆå¤§å‹é¡¹ç›®ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… åŠŸèƒ½å…¨é¢ï¼ˆMockã€Snapshotã€Coverageï¼‰</li>
<li>âœ… ç”Ÿæ€ä¸°å¯Œï¼Œæ’ä»¶å¤š</li>
<li>âœ… æ–‡æ¡£å®Œå–„ï¼Œç¤¾åŒºæ´»è·ƒ</li>
<li>âœ… é€‚åˆ React é¡¹ç›®</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>ï¼š</p>
<ul>
<li>âŒ é…ç½®ç›¸å¯¹å¤æ‚</li>
<li>âŒ é€Ÿåº¦è¾ƒæ…¢ï¼ˆéœ€é…ç½® esbuild åŠ é€Ÿï¼‰</li>
<li>âŒ TypeScript æ”¯æŒéœ€é¢å¤–é…ç½®</li>
</ul>
<h4 data-id="heading-25">å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add jest @types/jest ts-jest -D
</code></pre>
<h4 data-id="heading-26">é…ç½®</h4>
<p><strong>jest.config.js</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">preset</span>: <span class="hljs-string">'ts-jest'</span>,
  <span class="hljs-attr">testEnvironment</span>: <span class="hljs-string">'node'</span>,
  <span class="hljs-attr">roots</span>: [<span class="hljs-string">'&lt;rootDir&gt;/test'</span>],
  <span class="hljs-attr">testMatch</span>: [<span class="hljs-string">'**/*.test.{ts,js}'</span>],
  <span class="hljs-attr">collectCoverageFrom</span>: [<span class="hljs-string">'src/**/*.{ts,js}'</span>, <span class="hljs-string">'!src/**/*.d.ts'</span>],
  <span class="hljs-attr">coverageDirectory</span>: <span class="hljs-string">'coverage'</span>,
  <span class="hljs-attr">coverageReporters</span>: [<span class="hljs-string">'text'</span>, <span class="hljs-string">'html'</span>, <span class="hljs-string">'lcov'</span>],
};
</code></pre>
<hr/>
<h3 data-id="heading-27">Mocha</h3>
<p>Mocha æ˜¯çµæ´»çš„æµ‹è¯•æ¡†æ¶ï¼Œéœ€è¦é…åˆæ–­è¨€åº“ä½¿ç”¨ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… çµæ´»ï¼Œå¯è‡ªç”±é€‰æ‹©æ–­è¨€åº“</li>
<li>âœ… æ”¯æŒå¤šç§æŠ¥å‘Šæ ¼å¼</li>
<li>âœ… é€‚åˆ Node.js é¡¹ç›®</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>ï¼š</p>
<ul>
<li>âŒ éœ€è¦é¢å¤–é…ç½®æ–­è¨€åº“ã€è¦†ç›–ç‡å·¥å…·</li>
<li>âŒ é…ç½®ç›¸å¯¹å¤æ‚</li>
</ul>
<h4 data-id="heading-28">å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add mocha @types/mocha chai @types/chai nyc -D
</code></pre>
<h4 data-id="heading-29">é…ç½®</h4>
<p><strong>mocha.opts</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">--require ts-node/register
--<span class="hljs-built_in">timeout</span> 5000
<span class="hljs-built_in">test</span>/**/*.test.ts
</code></pre>
<p><strong>æµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'chai'</span>;
<span class="hljs-keyword">import</span> { add } <span class="hljs-keyword">from</span> <span class="hljs-string">'../src/index'</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'add å‡½æ•°'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'åº”è¯¥æ­£ç¡®ç›¸åŠ ä¸¤ä¸ªæ•°å­—'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">3</span>);
  });
});
</code></pre>
<hr/>
<h3 data-id="heading-30">Ava</h3>
<p>Ava æ˜¯è½»é‡çº§ã€å¹¶è¡Œçš„æµ‹è¯•æ¡†æ¶ï¼Œé€‚åˆå¿«é€Ÿæµ‹è¯•ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… è½»é‡çº§ï¼Œé€Ÿåº¦å¿«</li>
<li>âœ… å¹¶è¡Œæ‰§è¡Œæµ‹è¯•</li>
<li>âœ… å†…ç½®æ–­è¨€</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>ï¼š</p>
<ul>
<li>âŒ ç”Ÿæ€ç›¸å¯¹è¾ƒå°</li>
<li>âŒ æ–‡æ¡£è¾ƒå°‘</li>
</ul>
<h4 data-id="heading-31">å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add ava -D
</code></pre>
<h4 data-id="heading-32">é…ç½®</h4>
<p><strong>ava.config.js</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">files</span>: [<span class="hljs-string">'test/**/*.test.{ts,js}'</span>],
  <span class="hljs-attr">extensions</span>: [<span class="hljs-string">'ts'</span>],
  <span class="hljs-attr">require</span>: [<span class="hljs-string">'ts-node/register'</span>],
};
</code></pre>
<hr/>
<h3 data-id="heading-33">æµ‹è¯•å·¥å…·å¯¹æ¯”</h3>













































<table><thead><tr><th>å·¥å…·</th><th>é€Ÿåº¦</th><th>é…ç½®å¤æ‚åº¦</th><th>TypeScript</th><th>ç”Ÿæ€</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Vitest</strong></td><td>â­â­â­â­â­</td><td>â­â­â­â­â­</td><td>âœ… åŸç”Ÿ</td><td>â­â­â­â­</td><td>TypeScript é¡¹ç›®ã€å¿«é€Ÿæµ‹è¯•</td></tr><tr><td><strong>Jest</strong></td><td>â­â­â­</td><td>â­â­â­</td><td>âš ï¸ éœ€é…ç½®</td><td>â­â­â­â­â­</td><td>React é¡¹ç›®ã€å¤§å‹é¡¹ç›®</td></tr><tr><td><strong>Mocha</strong></td><td>â­â­â­</td><td>â­â­</td><td>âš ï¸ éœ€é…ç½®</td><td>â­â­â­â­</td><td>Node.js é¡¹ç›®ã€çµæ´»é…ç½®</td></tr><tr><td><strong>Ava</strong></td><td>â­â­â­â­</td><td>â­â­â­â­</td><td>âš ï¸ éœ€é…ç½®</td><td>â­â­â­</td><td>è½»é‡çº§é¡¹ç›®ã€å¿«é€Ÿæµ‹è¯•</td></tr></tbody></table>
<p><strong>é€‰å‹å»ºè®®</strong>ï¼š</p>
<ul>
<li><strong>TypeScript é¡¹ç›®</strong>ï¼šVitestï¼ˆæ¨èï¼‰</li>
<li><strong>React é¡¹ç›®</strong>ï¼šJest</li>
<li><strong>Node.js é¡¹ç›®</strong>ï¼šMocha</li>
<li><strong>è½»é‡çº§é¡¹ç›®</strong>ï¼šAva</li>
</ul>
<hr/>
<h2 data-id="heading-34">ä»£ç è´¨é‡å·¥å…·</h2>
<h3 data-id="heading-35">ESLint + Prettier</h3>
<p>ESLint å’Œ Prettier æ˜¯å‰ç«¯ä»£ç è´¨é‡ä¸æ ¼å¼è§„èŒƒçš„é»„é‡‘ç»„åˆï¼š</p>
<ul>
<li><strong>ESLint</strong>ï¼šè´Ÿè´£ä»£ç è´¨é‡æ ¡éªŒï¼ˆè¯­æ³•é”™è¯¯ã€é€»è¾‘é—®é¢˜ï¼‰</li>
<li><strong>Prettier</strong>ï¼šè´Ÿè´£ä»£ç æ ¼å¼ç¾åŒ–ï¼ˆç¼©è¿›ã€å¼•å·ã€åˆ†å·ï¼‰</li>
</ul>
<h4 data-id="heading-36">å®‰è£…ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add eslint prettier -D
pnpm add @typescript-eslint/eslint-plugin @typescript-eslint/parser -D
pnpm add eslint-config-prettier eslint-plugin-prettier -D
</code></pre>
<h4 data-id="heading-37">ESLint é…ç½®ï¼ˆ.eslintrc.jsï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">env</span>: {
    <span class="hljs-attr">browser</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">node</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">es2024</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">parser</span>: <span class="hljs-string">'@typescript-eslint/parser'</span>,
  <span class="hljs-attr">parserOptions</span>: {
    <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-string">'latest'</span>,
    <span class="hljs-attr">project</span>: <span class="hljs-string">'./tsconfig.json'</span>,
    <span class="hljs-attr">tsconfigRootDir</span>: __dirname,
    <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'module'</span>,
  },
  <span class="hljs-attr">plugins</span>: [<span class="hljs-string">'@typescript-eslint'</span>, <span class="hljs-string">'prettier'</span>],
  <span class="hljs-attr">extends</span>: [
    <span class="hljs-string">'eslint:recommended'</span>,
    <span class="hljs-string">'plugin:@typescript-eslint/recommended'</span>,
    <span class="hljs-string">'plugin:@typescript-eslint/recommended-requiring-type-checking'</span>,
    <span class="hljs-string">'plugin:prettier/recommended'</span>,
  ],
  <span class="hljs-attr">rules</span>: {
    <span class="hljs-string">'@typescript-eslint/no-explicit-any'</span>: <span class="hljs-string">'warn'</span>,
    <span class="hljs-string">'@typescript-eslint/no-unused-vars'</span>: [<span class="hljs-string">'warn'</span>, { <span class="hljs-attr">argsIgnorePattern</span>: <span class="hljs-string">'^_'</span> }],
    <span class="hljs-string">'no-console'</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>,
  },
  <span class="hljs-attr">ignorePatterns</span>: [<span class="hljs-string">'dist/'</span>, <span class="hljs-string">'node_modules/'</span>, <span class="hljs-string">'*.config.*'</span>],
};
</code></pre>
<h4 data-id="heading-38">Prettier é…ç½®ï¼ˆ.prettierrc.jsï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">printWidth</span>: <span class="hljs-number">80</span>,
  <span class="hljs-attr">tabWidth</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">useTabs</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">semi</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">singleQuote</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">quoteProps</span>: <span class="hljs-string">'as-needed'</span>,
  <span class="hljs-attr">jsxSingleQuote</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">trailingComma</span>: <span class="hljs-string">'es5'</span>,
  <span class="hljs-attr">bracketSpacing</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">bracketSameLine</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">arrowParens</span>: <span class="hljs-string">'avoid'</span>,
  <span class="hljs-attr">proseWrap</span>: <span class="hljs-string">'preserve'</span>,
  <span class="hljs-attr">htmlWhitespaceSensitivity</span>: <span class="hljs-string">'css'</span>,
  <span class="hljs-attr">endOfLine</span>: <span class="hljs-string">'lf'</span>,
};
</code></pre>
<h4 data-id="heading-39">å¿½ç•¥æ–‡ä»¶é…ç½®</h4>
<p><strong>.eslintignore</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">dist/
node_modules/
*.config.*
coverage/
</code></pre>
<p><strong>.prettierignore</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">dist/
node_modules/
coverage/
*.min.js
package-<span class="hljs-keyword">lock</span>.json
pnpm-<span class="hljs-keyword">lock</span>.yaml
</code></pre>
<h4 data-id="heading-40">è„šæœ¬å‘½ä»¤</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint . --ext .ts,.tsx,.js,.jsx"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lint:fix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint . --ext .ts,.tsx,.js,.jsx --fix"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prettier:check"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prettier --check ."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prettier:fix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prettier --write ."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm run prettier:fix &amp;&amp; pnpm run lint:fix"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-41">Stylelintï¼ˆæ ·å¼æ–‡ä»¶æ ¡éªŒï¼‰</h3>
<p>stylelint æ˜¯æ ·å¼æ–‡ä»¶çš„ä»£ç è´¨é‡ä¸æ ¼å¼æ ¡éªŒå·¥å…·ï¼Œç›¸å½“äºæ ·å¼é¢†åŸŸçš„ã€ŒESLintã€ã€‚</p>
<h4 data-id="heading-42">å®‰è£…ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add stylelint stylelint-config-standard stylelint-config-standard-scss -D
pnpm add stylelint-scss postcss-scss -D
pnpm add stylelint-config-prettier stylelint-prettier -D
pnpm add stylelint-order stylelint-config-recess-order -D
</code></pre>
<h4 data-id="heading-43">é…ç½®ï¼ˆ.stylelintrc.jsï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">files</span>: [<span class="hljs-string">'**/*.{css,scss,sass,less,vue}'</span>],
  <span class="hljs-attr">ignoreFiles</span>: [<span class="hljs-string">'dist/'</span>, <span class="hljs-string">'node_modules/'</span>],
  <span class="hljs-attr">customSyntax</span>: <span class="hljs-string">'postcss-scss'</span>,
  <span class="hljs-attr">extends</span>: [
    <span class="hljs-string">'stylelint-config-standard'</span>,
    <span class="hljs-string">'stylelint-config-standard-scss'</span>,
    <span class="hljs-string">'stylelint-config-recess-order'</span>,
    <span class="hljs-string">'stylelint-prettier/recommended'</span>,
  ],
  <span class="hljs-attr">rules</span>: {
    <span class="hljs-string">'declaration-no-important'</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">'selector-max-compound-selectors'</span>: [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>],
    <span class="hljs-string">'property-no-deprecated'</span>: <span class="hljs-number">1</span>,
  },
};
</code></pre>
<h4 data-id="heading-44">è„šæœ¬å‘½ä»¤</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"lint:style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stylelint . --ext .css,.scss,.less,.vue"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lint:style:fix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stylelint . --ext .css,.scss,.less,.vue --fix"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-45">Git Hooks</h2>
<h3 data-id="heading-46">simple-git-hooks</h3>
<p>simple-git-hooks æ˜¯ä¸€æ¬¾ã€Œé›¶é…ç½®ã€è½»é‡å‹ã€çš„ Git Hooks å·¥å…·ï¼Œç”¨äºéªŒè¯æäº¤ä¿¡æ¯æ ¼å¼å’Œè¿è¡Œæµ‹è¯•ã€‚</p>
<h4 data-id="heading-47">å®‰è£…ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add simple-git-hooks @commitlint/cli @commitlint/config-conventional -D
</code></pre>
<h4 data-id="heading-48">é…ç½®æäº¤ä¿¡æ¯æ ¡éªŒï¼ˆcommitlint.config.jsï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">extends</span>: [<span class="hljs-string">'@commitlint/config-conventional'</span>],
  <span class="hljs-attr">rules</span>: {
    <span class="hljs-string">'type-enum'</span>: [
      <span class="hljs-number">2</span>,
      <span class="hljs-string">'always'</span>,
      [<span class="hljs-string">'feat'</span>, <span class="hljs-string">'fix'</span>, <span class="hljs-string">'docs'</span>, <span class="hljs-string">'style'</span>, <span class="hljs-string">'refactor'</span>, <span class="hljs-string">'perf'</span>, <span class="hljs-string">'test'</span>, <span class="hljs-string">'build'</span>, <span class="hljs-string">'ci'</span>, <span class="hljs-string">'chore'</span>],
    ],
    <span class="hljs-string">'subject-max-length'</span>: [<span class="hljs-number">1</span>, <span class="hljs-string">'always'</span>, <span class="hljs-number">50</span>],
  },
};
</code></pre>
<h4 data-id="heading-49">é…ç½® Git Hooksï¼ˆpackage.jsonï¼‰</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"prepare"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"simple-git-hooks"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"simple-git-hooks"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"commit-msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx --no -- commitlint --edit $1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"pre-commit"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm run lint &amp;&amp; pnpm run test"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-50">åˆå§‹åŒ–é’©å­</h4>
<pre><code class="hljs language-bash" lang="bash">npx simple-git-hooks
</code></pre>
<h4 data-id="heading-51">æäº¤ä¿¡æ¯æ ¼å¼</h4>
<p>æ ¼å¼ï¼š<code>type(scope): subject</code></p>
<p>ç¤ºä¾‹ï¼š</p>
<ul>
<li><code>feat(user): æ–°å¢ç”¨æˆ·ç™»å½•åŠŸèƒ½</code></li>
<li><code>fix: ä¿®å¤ç™»å½•å¤±è´¥é—®é¢˜</code></li>
<li><code>docs: æ›´æ–° README ä¸­çš„å®‰è£…æ­¥éª¤</code></li>
</ul>
<hr/>
<h3 data-id="heading-52">husky</h3>
<p>husky æ˜¯åŠŸèƒ½ä¸°å¯Œçš„ Git Hooks å·¥å…·ï¼Œé€‚åˆéœ€è¦æ›´å¤šæ§åˆ¶å’ŒåŠŸèƒ½çš„é¡¹ç›®ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… åŠŸèƒ½ä¸°å¯Œï¼Œæ”¯æŒæ‰€æœ‰ Git Hooks</li>
<li>âœ… é…ç½®çµæ´»ï¼Œå¯ç¼–å†™å¤æ‚è„šæœ¬</li>
<li>âœ… ç”Ÿæ€å®Œå–„ï¼Œæ’ä»¶å¤š</li>
<li>âœ… æ”¯æŒè·¨å¹³å°ï¼ˆWindows/Mac/Linuxï¼‰</li>
<li>âœ… æ–‡æ¡£å®Œå–„ï¼Œç¤¾åŒºæ´»è·ƒ</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>ï¼š</p>
<ul>
<li>âŒ é…ç½®ç›¸å¯¹å¤æ‚</li>
<li>âŒ éœ€è¦æ‰‹åŠ¨åˆ›å»º <code>.husky</code> ç›®å½•</li>
<li>âŒ ä½“ç§¯è¾ƒå¤§ï¼ˆç›¸æ¯” simple-git-hooksï¼‰</li>
</ul>
<h4 data-id="heading-53">å®‰è£…ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add husky -D
pnpm add @commitlint/cli @commitlint/config-conventional -D
</code></pre>
<h4 data-id="heading-54">åˆå§‹åŒ–</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆå§‹åŒ– husky</span>
npx husky init

<span class="hljs-comment"># æˆ–æ‰‹åŠ¨åˆ›å»º .husky ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> .husky
</code></pre>
<h4 data-id="heading-55">é…ç½® Git Hooksï¼ˆpackage.jsonï¼‰</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"prepare"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"husky install"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-56">åˆ›å»º Hooks</h4>
<p><strong>pre-commit hook</strong>ï¼ˆ.husky/pre-commitï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/usr/bin/env sh</span>
. <span class="hljs-string">"<span class="hljs-subst">$(dirname -- <span class="hljs-string">"<span class="hljs-variable">$0</span>"</span>)</span>/_/husky.sh"</span>

pnpm run lint
pnpm run <span class="hljs-built_in">test</span>
</code></pre>
<p><strong>commit-msg hook</strong>ï¼ˆ.husky/commit-msgï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/usr/bin/env sh</span>
. <span class="hljs-string">"<span class="hljs-subst">$(dirname -- <span class="hljs-string">"<span class="hljs-variable">$0</span>"</span>)</span>/_/husky.sh"</span>

npx --no -- commitlint --edit <span class="hljs-variable">$1</span>
</code></pre>
<h4 data-id="heading-57">é…ç½®æäº¤ä¿¡æ¯æ ¡éªŒï¼ˆcommitlint.config.jsï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">extends</span>: [<span class="hljs-string">'@commitlint/config-conventional'</span>],
  <span class="hljs-attr">rules</span>: {
    <span class="hljs-string">'type-enum'</span>: [
      <span class="hljs-number">2</span>,
      <span class="hljs-string">'always'</span>,
      [<span class="hljs-string">'feat'</span>, <span class="hljs-string">'fix'</span>, <span class="hljs-string">'docs'</span>, <span class="hljs-string">'style'</span>, <span class="hljs-string">'refactor'</span>, <span class="hljs-string">'perf'</span>, <span class="hljs-string">'test'</span>, <span class="hljs-string">'build'</span>, <span class="hljs-string">'ci'</span>, <span class="hljs-string">'chore'</span>],
    ],
    <span class="hljs-string">'subject-max-length'</span>: [<span class="hljs-number">1</span>, <span class="hljs-string">'always'</span>, <span class="hljs-number">50</span>],
  },
};
</code></pre>
<h4 data-id="heading-58">é«˜çº§ç”¨æ³•</h4>
<p>husky æ”¯æŒæ›´å¤æ‚çš„è„šæœ¬ï¼Œä¾‹å¦‚ï¼š</p>
<p><strong>pre-push hook</strong>ï¼ˆ.husky/pre-pushï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/usr/bin/env sh</span>
. <span class="hljs-string">"<span class="hljs-subst">$(dirname -- <span class="hljs-string">"<span class="hljs-variable">$0</span>"</span>)</span>/_/husky.sh"</span>

<span class="hljs-comment"># è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶</span>
pnpm run <span class="hljs-built_in">test</span>:ci

<span class="hljs-comment"># æ£€æŸ¥ä»£ç è¦†ç›–ç‡</span>
pnpm run <span class="hljs-built_in">test</span>:coverage
</code></pre>
<hr/>
<h3 data-id="heading-59">Git Hooks å·¥å…·å¯¹æ¯”</h3>





























<table><thead><tr><th>å·¥å…·</th><th>é…ç½®å¤æ‚åº¦</th><th>åŠŸèƒ½ä¸°å¯Œåº¦</th><th>ä½“ç§¯</th><th>ç”Ÿæ€</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>simple-git-hooks</strong></td><td>â­â­â­â­â­</td><td>â­â­â­</td><td>è½»é‡çº§</td><td>â­â­â­</td><td>ç®€å•é¡¹ç›®ã€å¿«é€Ÿä¸Šæ‰‹</td></tr><tr><td><strong>husky</strong></td><td>â­â­â­</td><td>â­â­â­â­â­</td><td>è¾ƒå¤§</td><td>â­â­â­â­â­</td><td>å¤æ‚é¡¹ç›®ã€éœ€è¦ç²¾ç»†æ§åˆ¶</td></tr></tbody></table>
<p><strong>é€‰å‹å»ºè®®</strong>ï¼š</p>
<ul>
<li><strong>ç®€å•é¡¹ç›®ã€å¿«é€Ÿä¸Šæ‰‹</strong>ï¼šsimple-git-hooksï¼ˆæ¨èï¼‰</li>
<li><strong>å¤æ‚é¡¹ç›®ã€éœ€è¦ç²¾ç»†æ§åˆ¶</strong>ï¼šhusky</li>
<li><strong>éœ€è¦è·¨å¹³å°æ”¯æŒ</strong>ï¼šhusky</li>
<li><strong>éœ€è¦ç¼–å†™å¤æ‚è„šæœ¬</strong>ï¼šhusky</li>
</ul>
<hr/>
<h2 data-id="heading-60">VS Code é›†æˆ</h2>
<h3 data-id="heading-61">å®‰è£…æ’ä»¶</h3>
<ul>
<li>ESLintï¼ˆMicrosoftï¼‰</li>
<li>Prettier - Code formatter</li>
<li>Vitestï¼ˆå¯é€‰ï¼‰</li>
</ul>
<h3 data-id="heading-62">é…ç½®ï¼ˆ.vscode/settings.jsonï¼‰</h3>
<p>VS Code æ˜¯å‰ç«¯å¼€å‘å¿…å¤‡çš„ç¼–è¾‘å™¨ï¼ŒESLintã€Prettier ç­‰å·¥å…·çš„é›†æˆå¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡ã€‚
å®‰è£…æ’ä»¶ï¼š</p>
<ul>
<li>ESLintï¼ˆMicrosoftï¼‰</li>
<li>Prettier - Code formatter</li>
<li>Vitestï¼ˆå¯é€‰ï¼‰</li>
</ul>
<p>é…ç½®ï¼ˆ.vscode/settings.jsonï¼‰ï¼ŒCommand+Shift+P æ‰“å¼€è®¾ç½®ï¼Œè¾“å…¥ settings.json æ‰“å¼€è®¾ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œèƒ½å®ç°ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ã€ç²˜è´´æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ã€ç¦ç”¨è¾“å…¥æ—¶å®æ—¶æ ¼å¼åŒ–ã€è®¾ç½®é»˜è®¤æ ¼å¼åŒ–å·¥å…·ä¸º Prettierã€ç¼–è¾‘å™¨åŸºç¡€é…ç½®ï¼ˆä¸ Prettier ä¿æŒä¸€è‡´ï¼Œé¿å…å†²çªï¼‰ã€æŒ‰æ–‡ä»¶ç±»å‹æŒ‡å®šæ ¼å¼åŒ–å·¥å…·ï¼ˆå…œåº•ï¼‰ã€ESLint å…³é”®é…ç½®ï¼ˆæ ¸å¿ƒï¼‰ã€Prettier ä¸“å±é…ç½®ã€æ¡†æ¶ä¸“å±å…¼å®¹é…ç½®ã€å…¶ä»–è¾…åŠ©é…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-comment">// ===================== å…¨å±€æ ¼å¼åŒ–æ ¸å¿ƒé…ç½® =====================</span>
  <span class="hljs-comment">// 1. ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼ˆè§¦å‘ Prettier + ESLint ä¿®å¤ï¼‰</span>
  <span class="hljs-attr">"editor.formatOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// 2. ç²˜è´´å†…å®¹æ—¶è‡ªåŠ¨æ ¼å¼åŒ–</span>
  <span class="hljs-attr">"editor.formatOnPaste"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// 3. ç¦ç”¨è¾“å…¥æ—¶å®æ—¶æ ¼å¼åŒ–ï¼ˆé¿å…é¢‘ç¹å¹²æ‰°ï¼‰</span>
  <span class="hljs-attr">"editor.formatOnType"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// 4. è®¾ç½®é»˜è®¤æ ¼å¼åŒ–å·¥å…·ä¸º Prettierï¼ˆç»Ÿä¸€æ‰€æœ‰æ–‡ä»¶æ ¼å¼ï¼‰</span>
  <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// "editor.defaultFormatter": "biomejs.biome", // ä»¥åè€ƒè™‘</span>
  <span class="hljs-attr">"biome.formatOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"biome.lintOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"biome.organizeImportsOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä¿å­˜æ—¶è‡ªåŠ¨æ•´ç†å¯¼å…¥è¯­å¥</span>
  <span class="hljs-comment">// 5. ç¼–è¾‘å™¨åŸºç¡€é…ç½®ï¼ˆä¸ Prettier ä¿æŒä¸€è‡´ï¼Œé¿å…å†²çªï¼‰</span>
  <span class="hljs-attr">"editor.tabSize"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"editor.useTabs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"files.eol"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\n"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// è¡Œå°¾æ¢è¡Œç¬¦ï¼ˆLFï¼Œè·¨å¹³å°å…¼å®¹ï¼‰</span>

  <span class="hljs-comment">// ===================== æŒ‰æ–‡ä»¶ç±»å‹æŒ‡å®šæ ¼å¼åŒ–å·¥å…·ï¼ˆå…œåº•ï¼‰ =====================</span>
  <span class="hljs-comment">// ç¡®ä¿æ¯ç§æ–‡ä»¶ç±»å‹éƒ½ç”¨ Prettier æ ¼å¼åŒ–ï¼Œé¿å…å†²çª</span>
  <span class="hljs-attr">"[javascript]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[typescript]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[javascriptreact]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[typescriptreact]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[vue]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[svelte]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[css]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[scss]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[markdown]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[json]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[jsonc]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>

  <span class="hljs-comment">// ===================== ESLint å…³é”®é…ç½®ï¼ˆæ ¸å¿ƒï¼‰ =====================</span>
  <span class="hljs-comment">// 1. ä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤ ESLint å¯ä¿®å¤é—®é¢˜ï¼ˆå«æ¡†æ¶è§„åˆ™ï¼‰</span>
  <span class="hljs-attr">"editor.codeActionsOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"source.fixAll.eslint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"explicit"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"source.fixAll.stylelint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"explicit"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"source.organizeImports"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"explicit"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// 2. å¯ç”¨ ESLint æ ¡éªŒçš„æ‰€æœ‰æ–‡ä»¶ç±»å‹</span>
  <span class="hljs-attr">"eslint.validate"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"javascript"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"typescript"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"javascriptreact"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"typescriptreact"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"vue"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"svelte"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"html"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"markdown"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// 3. å¼ºåˆ¶ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ ESLint é…ç½®ï¼ˆé¿å…å…¨å±€é…ç½®å¹²æ‰°ï¼‰</span>
  <span class="hljs-attr">"eslint.useFlatConfig"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å…¼å®¹ä¼ ç»Ÿ .eslintrc.js é…ç½®</span>
  <span class="hljs-attr">"eslint.nodePath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./node_modules"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æŒ‡å‘é¡¹ç›®ä¾èµ–ï¼ˆmonorepo åœºæ™¯å¿…å¤‡ï¼‰</span>
  <span class="hljs-attr">"eslint.workingDirectories"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"auto"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// è‡ªåŠ¨è¯†åˆ«é¡¹ç›®ç›®å½•</span>

  <span class="hljs-comment">// ===================== Prettier ä¸“å±é…ç½® =====================</span>
  <span class="hljs-comment">// 1. å¼ºåˆ¶ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ .prettierrc.jsï¼ˆé¿å…æ’ä»¶é»˜è®¤é…ç½®å†²çªï¼‰</span>
  <span class="hljs-attr">"prettier.requireConfig"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// 2. å¿½ç•¥ .prettierignore ä¸­çš„æ–‡ä»¶</span>
  <span class="hljs-attr">"prettier.ignorePath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">".prettierignore"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// 3. ç¦ç”¨ Prettier å¯¹ç‰¹å®šæ–‡ä»¶çš„æ ¼å¼åŒ–ï¼ˆæŒ‰éœ€è°ƒæ•´ï¼‰</span>
  <span class="hljs-attr">"prettier.disableLanguages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>

  <span class="hljs-comment">// ===================== æ¡†æ¶ä¸“å±å…¼å®¹é…ç½® =====================</span>
  <span class="hljs-comment">// 1. Vue é…ç½®ï¼ˆç¦ç”¨ Volar å†…ç½®æ ¼å¼åŒ–ï¼Œäº¤ç»™ Prettierï¼‰</span>
  <span class="hljs-attr">"vue.format.enable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"volar.format.enable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// 2. Svelte é…ç½®ï¼ˆç¦ç”¨å†…ç½®æ ¼å¼åŒ–ï¼Œäº¤ç»™ Prettierï¼‰</span>
  <span class="hljs-attr">"svelte.format.enable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// 3. ç¦ç”¨ VS Code å†…ç½®æ ¼å¼åŒ–ï¼ˆé¿å…ä¸ Prettier/ESLint å†²çªï¼‰</span>
  <span class="hljs-attr">"javascript.format.enable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"typescript.format.enable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"html.format.enable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"css.format.enable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scss.format.enable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>

  <span class="hljs-comment">// ===================== å…¶ä»–è¾…åŠ©é…ç½® =====================</span>
  <span class="hljs-comment">// æ˜¾ç¤º ESLint é”™è¯¯æç¤ºï¼ˆå¢å¼ºå¼€å‘ä½“éªŒï¼‰</span>
  <span class="hljs-attr">"eslint.showDebugLogs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"eslint.showStatusBar"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// ä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤æ‰€æœ‰å¯ä¿®å¤é—®é¢˜ï¼ˆåŒ…æ‹¬æ¡†æ¶ä¸“å±è§„åˆ™ï¼‰</span>
  <span class="hljs-attr">"editor.codeActionsOnSaveTimeout"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3000</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"cursor.cpp.disabledLanguages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"plaintext"</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// å»¶é•¿è¶…æ—¶æ—¶é—´ï¼ˆé¿å…å¤§æ–‡ä»¶ä¿®å¤å¤±è´¥ï¼‰</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-63">æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>å·¥å…·ç»„åˆ</strong>ï¼štsupï¼ˆæ„å»ºï¼‰+ Vitestï¼ˆæµ‹è¯•ï¼‰+ ESLint + Prettierï¼ˆä»£ç è´¨é‡ï¼‰+ simple-git-hooks/huskyï¼ˆæäº¤è§„èŒƒï¼‰</li>
<li><strong>é…ç½®é€»è¾‘</strong>ï¼šPrettier ç®¡æ ¼å¼ï¼ŒESLint ç®¡è´¨é‡ï¼Œé€šè¿‡ eslint-config-prettier é¿å…å†²çª</li>
<li><strong>å¼€å‘æµç¨‹</strong>ï¼šVS Code å®æ—¶æ ¼å¼åŒ– + ä¿å­˜è‡ªåŠ¨ä¿®å¤ + Git Hooks å¼ºåˆ¶æ ¡éªŒ</li>
<li><strong>monorepo é€‚é…</strong>ï¼šæ ¹ç›®å½•ç»Ÿä¸€é…ç½®ï¼Œå­åŒ…ç»§æ‰¿ï¼Œé€šè¿‡ Turbo å¹¶è¡Œæ‰§è¡Œä»»åŠ¡</li>
</ol>
<hr/>
<h2 data-id="heading-64">å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-65">æ„å»ºå·¥å…·ç›¸å…³é—®é¢˜</h3>
<p><strong>Q: tsup å’Œ Rollup å¦‚ä½•é€‰æ‹©ï¼Ÿ</strong></p>
<p>A:</p>
<ul>
<li><strong>tsup</strong>ï¼šé€‚åˆå¿«é€Ÿå¼€å‘ TypeScript åº“ï¼Œé›¶é…ç½®ï¼Œå¼€ç®±å³ç”¨</li>
<li><strong>Rollup</strong>ï¼šé€‚åˆå¤æ‚æ„å»ºéœ€æ±‚ï¼Œéœ€è¦ç²¾ç»†æ§åˆ¶æ‰“åŒ…è¿‡ç¨‹</li>
</ul>
<p><strong>Q: å¦‚ä½•ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶ï¼Ÿ</strong></p>
<p>A:</p>
<ul>
<li><strong>tsup</strong>ï¼šè®¾ç½® <code>dts: true</code> è‡ªåŠ¨ç”Ÿæˆ</li>
<li><strong>Rollup</strong>ï¼šä½¿ç”¨ <code>rollup-plugin-dts</code> æ’ä»¶</li>
<li><strong>esbuild</strong>ï¼šéœ€é…åˆ <code>tsc --emitDeclarationOnly</code></li>
</ul>
<p><strong>Q: æ„å»ºé€Ÿåº¦æ…¢æ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>A:</p>
<ul>
<li>ä½¿ç”¨ esbuild æˆ– tsupï¼ˆåŸºäº esbuildï¼‰</li>
<li>å…³é—­ä¸å¿…è¦çš„ sourcemap</li>
<li>ä½¿ç”¨ç¼“å­˜ï¼ˆå¦‚ Turborepoï¼‰</li>
</ul>
<h3 data-id="heading-66">æµ‹è¯•å·¥å…·ç›¸å…³é—®é¢˜</h3>
<p><strong>Q: Vitest å’Œ Jest å¦‚ä½•é€‰æ‹©ï¼Ÿ</strong></p>
<p>A:</p>
<ul>
<li><strong>Vitest</strong>ï¼šTypeScript é¡¹ç›®é¦–é€‰ï¼Œé€Ÿåº¦å¿«ï¼Œé…ç½®ç®€å•</li>
<li><strong>Jest</strong>ï¼šReact é¡¹ç›®æˆ–éœ€è¦ä¸°å¯Œç”Ÿæ€çš„åœºæ™¯</li>
</ul>
<p><strong>Q: æµ‹è¯•è¦†ç›–ç‡å¦‚ä½•é…ç½®ï¼Ÿ</strong></p>
<p>A:</p>
<ul>
<li><strong>Vitest</strong>ï¼šå®‰è£… <code>@vitest/coverage-v8</code>ï¼Œé…ç½® <code>coverage</code> é€‰é¡¹</li>
<li><strong>Jest</strong>ï¼šå†…ç½® coverageï¼Œé…ç½® <code>collectCoverageFrom</code></li>
</ul>
<p><strong>Q: å¦‚ä½•æµ‹è¯•å¼‚æ­¥å‡½æ•°ï¼Ÿ</strong></p>
<p>A:</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">test</span>(<span class="hljs-string">'å¼‚æ­¥å‡½æ•°æµ‹è¯•'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">asyncFunction</span>();
  <span class="hljs-title function_">expect</span>(result).<span class="hljs-title function_">toBe</span>(expected);
});
</code></pre>
<h3 data-id="heading-67">ä»£ç è´¨é‡å·¥å…·ç›¸å…³é—®é¢˜</h3>
<p><strong>Q: ESLint å’Œ Prettier å†²çªæ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>A: å®‰è£… <code>eslint-config-prettier</code>ï¼Œåœ¨ ESLint extends ä¸­æœ€åæ·»åŠ  <code>'plugin:prettier/recommended'</code></p>
<p><strong>Q: å¦‚ä½•å¿½ç•¥æŸäº›æ–‡ä»¶çš„æ£€æŸ¥ï¼Ÿ</strong></p>
<p>A: åœ¨ <code>.eslintignore</code> å’Œ <code>.prettierignore</code> ä¸­æ·»åŠ æ–‡ä»¶è·¯å¾„</p>
<p><strong>Q: å¦‚ä½•è‡ªå®šä¹‰ ESLint è§„åˆ™ï¼Ÿ</strong></p>
<p>A: åœ¨ <code>.eslintrc.js</code> çš„ <code>rules</code> å­—æ®µä¸­æ·»åŠ è‡ªå®šä¹‰è§„åˆ™</p>
<h3 data-id="heading-68">Git Hooks ç›¸å…³é—®é¢˜</h3>
<p><strong>Q: simple-git-hooks å’Œ husky å¦‚ä½•é€‰æ‹©ï¼Ÿ</strong></p>
<p>A:</p>
<ul>
<li><strong>simple-git-hooks</strong>ï¼šé€‚åˆç®€å•é¡¹ç›®ï¼Œé›¶é…ç½®ï¼Œè½»é‡çº§</li>
<li><strong>husky</strong>ï¼šé€‚åˆå¤æ‚é¡¹ç›®ï¼Œéœ€è¦ç²¾ç»†æ§åˆ¶å’Œè·¨å¹³å°æ”¯æŒ</li>
</ul>
<p><strong>Q: Git Hooks ä¸ç”Ÿæ•ˆæ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>A:</p>
<ul>
<li>æ£€æŸ¥ <code>prepare</code> è„šæœ¬æ˜¯å¦å·²æ‰§è¡Œï¼š<code>npm run prepare</code></li>
<li>æ£€æŸ¥ <code>.git/hooks</code> ç›®å½•æ˜¯å¦å­˜åœ¨é’©å­æ–‡ä»¶</li>
<li>ç¡®ä¿é’©å­æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™ï¼š<code>chmod +x .husky/pre-commit</code></li>
</ul>
<p><strong>Q: å¦‚ä½•è·³è¿‡ Git Hooksï¼Ÿ</strong></p>
<p>A:</p>
<ul>
<li>è·³è¿‡ pre-commitï¼š<code>git commit --no-verify</code></li>
<li>è·³è¿‡ commit-msgï¼š<code>git commit --no-verify -m "message"</code></li>
<li>âš ï¸ ä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒè·³è¿‡ï¼Œä¼šç ´åä»£ç è´¨é‡ä¿éšœ</li>
</ul>
<p><strong>Q: å¦‚ä½•åœ¨ monorepo ä¸­ä½¿ç”¨ Git Hooksï¼Ÿ</strong></p>
<p>A:</p>
<ul>
<li><strong>simple-git-hooks</strong>ï¼šåœ¨æ ¹ç›®å½•é…ç½®ï¼Œè‡ªåŠ¨åº”ç”¨åˆ°æ‰€æœ‰å­åŒ…</li>
<li><strong>husky</strong>ï¼šåœ¨æ ¹ç›®å½•é…ç½®ï¼Œä½¿ç”¨ <code>pnpm -r</code> æˆ– <code>turbo</code> æ‰¹é‡æ‰§è¡Œ</li>
</ul>
<hr/>
<h2 data-id="heading-69">å‚è€ƒèµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftsup.egoist.dev%2F" target="_blank" title="https://tsup.egoist.dev/" ref="nofollow noopener noreferrer">tsup æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvitest.dev%2F" target="_blank" title="https://vitest.dev/" ref="nofollow noopener noreferrer">Vitest æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Feslint.org%2F" target="_blank" title="https://eslint.org/" ref="nofollow noopener noreferrer">ESLint æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fprettier.io%2F" target="_blank" title="https://prettier.io/" ref="nofollow noopener noreferrer">Prettier æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frollupjs.org%2F" target="_blank" title="https://rollupjs.org/" ref="nofollow noopener noreferrer">Rollup æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjestjs.io%2F" target="_blank" title="https://jestjs.io/" ref="nofollow noopener noreferrer">Jest æ–‡æ¡£</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenStack Train éƒ¨ç½²å®æˆ˜ï¼ˆä¸€ï¼‰ï¼šåŒèŠ‚ç‚¹åŸºç¡€ç¯å¢ƒæ­å»º]]></title>    <link>https://juejin.cn/post/7577309505711308863</link>    <guid>https://juejin.cn/post/7577309505711308863</guid>    <pubDate>2025-11-28T03:42:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577309505711308863" data-draft-id="7577364921656475690" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenStack Train éƒ¨ç½²å®æˆ˜ï¼ˆä¸€ï¼‰ï¼šåŒèŠ‚ç‚¹åŸºç¡€ç¯å¢ƒæ­å»º"/> <meta itemprop="keywords" content="OpenStack"/> <meta itemprop="datePublished" content="2025-11-28T03:42:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xy12306"/> <meta itemprop="url" content="https://juejin.cn/user/2232425500384467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenStack Train éƒ¨ç½²å®æˆ˜ï¼ˆä¸€ï¼‰ï¼šåŒèŠ‚ç‚¹åŸºç¡€ç¯å¢ƒæ­å»º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2232425500384467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xy12306
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:42:05.000Z" title="Fri Nov 28 2025 03:42:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>å‚è€ƒåŸæ–‡ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openstack.org%2Finstall-guide%2Findex.html" target="_blank" title="https://docs.openstack.org/install-guide/index.html" ref="nofollow noopener noreferrer">docs.openstack.org/install-guiâ€¦</a> -----OpenStack å®‰è£… æŒ‡å—</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openstack.org%2Finstall-guide%2Fenvironment-networking.html" target="_blank" title="https://docs.openstack.org/install-guide/environment-networking.html" ref="nofollow noopener noreferrer">docs.openstack.org/install-guiâ€¦</a> ------ä¸»æœºç½‘ç»œé…ç½®æŒ‡å—</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€ å®‰è£…ä¸¤å°centos7æœåŠ¡å™¨</h2>
<p>å®‰è£…è™šæ‹Ÿæœºå‚è€ƒä»¥ä¸‹æ•™ç¨‹ï¼š</p>
<ul>
<li><a href="https://juejin.cn/post/7449325898703683595" target="_blank" title="https://juejin.cn/post/7449325898703683595">Vmwareè™šæ‹Ÿæœºä¸­å®‰è£…CentOS7ï¼ˆè¶…è¯¦å›¾æ–‡æ•™ç¨‹ï¼‰</a></li>
</ul>
<p>å»ºè®®æœ€å°åŒ–å®‰è£…centos7 ï¼ˆåœ¨Windowsä¸Šçš„VMwareä¸­å®‰è£…å³å¯ï¼‰ï¼›</p>





















<table><thead><tr><th>ç¯å¢ƒé•œåƒ</th><th>CentOS7.9</th></tr></thead><tbody><tr><td>ç¡¬ç›˜</td><td>40GåŠä»¥ä¸Š</td></tr><tr><td>è¿è¡Œå†…å­˜</td><td>8G</td></tr><tr><td>å¤„ç†å™¨</td><td>6GåŠä»¥ä¸Š</td></tr></tbody></table>
<hr/>

















<table><thead><tr><th>ä¸»æœºå</th><th>IP åœ°å€</th></tr></thead><tbody><tr><td>controller</td><td>192.168.44.150</td></tr><tr><td>compute1</td><td>192.168.44.151</td></tr></tbody></table>
<p>è¦æ±‚ï¼š</p>
<ol>
<li>ä¸¤å°ä¸»æœºéƒ½å†æ·»åŠ ä¸€å—ç½‘å¡ï¼ˆæ·»åŠ åä¸€å…±ä¸¤å—ç½‘å¡ï¼Œå»ºè®®ç¬¬ä¸€å—ä½¿ç”¨NATï¼Œç¬¬äºŒå—ä½¿ç”¨æ¡¥æ¥ï¼‰</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db2b519a2f944bd09f2b787393e4b12f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHkxMjMwNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907550&amp;x-signature=5hLQK9r3vqXAc7lqhCNkW5twAc0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€ åŸºç¡€ç¯å¢ƒå‡†å¤‡</h2>
<blockquote>
<p>åŸºç¡€ç¯å¢ƒå‡†å¤‡ï¼Œ2 ä¸ªèŠ‚ç‚¹å‡éœ€é…ç½®</p>
</blockquote>
<h3 data-id="heading-2">1ã€åˆ‡æ¢ yum æºä¸ºé˜¿é‡Œï¼ˆåŒèŠ‚ç‚¹ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¤‡ä»½</span>
<span class="hljs-built_in">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup

<span class="hljs-comment"># åˆ‡æ¢ yumæº ä¸ºé˜¿é‡Œäº‘        </span>
curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
yum makecache
</code></pre>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€å§‹å‰è¦ç¡®ä¿æœ‰ä»¥ä¸‹å·¥å…·</span>
yum -y install vim
yum -y install wget
</code></pre>
<h3 data-id="heading-3">2ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openstack.org%2Finstall-guide%2Fenvironment-networking-controller.html" target="_blank" title="https://docs.openstack.org/install-guide/environment-networking-controller.html" ref="nofollow noopener noreferrer">è®¾ç½®é™æ€ IP åœ°å€</a></h3>
<h4 data-id="heading-4">â¡ï¸â¡ï¸ controllerèŠ‚ç‚¹ â¬…ï¸â¬…ï¸</h4>
<p><strong>1. ä¿®æ”¹ç½‘ç»œé…ç½®æ–‡ä»¶</strong></p>
<pre><code class="hljs language-bash" lang="bash">ip add show   <span class="hljs-comment"># æŸ¥çœ‹IPåœ°å€</span>
ip <span class="hljs-built_in">link</span> show  <span class="hljs-comment"># å…ˆç¡®è®¤æ‰€æœ‰å¯ç”¨ç½‘å¡</span>
<span class="hljs-built_in">ls</span> /etc/sysconfig/network-scripts/ifcfg-*  <span class="hljs-comment"># ç¡®ä¿é…ç½®ä¸ç‰©ç†è®¾å¤‡åŒ¹é…</span>
</code></pre>
<blockquote>
<p>å¦‚æœæ²¡æœ‰ç½‘å¡æ²¡æœ‰è‡ªåŠ¨å¯åŠ¨ï¼Œè¾“å…¥ <strong><code>ifup ens33</code></strong> <strong>å¯åŠ¨ç½‘å¡ã€‚</strong></p>
</blockquote>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¦†ç›–å†™å…¥é™æ€ IP é…ç½®ï¼ˆæ³¨æ„æ›¿æ¢æ¥å£åå’Œç½‘ç»œå‚æ•°ï¼‰</span>
sudo tee /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; EOF
<span class="hljs-attr">TYPE</span>=Ethernet
<span class="hljs-attr">BOOTPROTO</span>=static
<span class="hljs-attr">NAME</span>=ens33
<span class="hljs-attr">DEVICE</span>=ens33
<span class="hljs-attr">ONBOOT</span>=<span class="hljs-literal">yes</span>
<span class="hljs-attr">IPADDR</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">44.150</span>
<span class="hljs-attr">NETMASK</span>=<span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span>
<span class="hljs-attr">GATEWAY</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">44.2</span>
<span class="hljs-attr">DNS1</span>=<span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span>
<span class="hljs-attr">DNS2</span>=<span class="hljs-number">223.5</span>.<span class="hljs-number">5.5</span>
EOF

sudo tee /etc/sysconfig/network-scripts/ifcfg-ens34 &lt;&lt; EOF
<span class="hljs-attr">TYPE</span>=Ethernet
<span class="hljs-attr">BOOTPROTO</span>=none
<span class="hljs-attr">DEVICE</span>=ens34
<span class="hljs-attr">ONBOOT</span>=<span class="hljs-literal">yes</span>
EOF


<span class="hljs-comment"># é‡å¯ç½‘ç»œæœåŠ¡</span>
systemctl restart network

<span class="hljs-comment"># éªŒè¯ IP é…ç½®</span>
ip addr show ens33
ip addr show ens34
</code></pre>
<blockquote>
<p>ä¸‹é¢compute1 èŠ‚ç‚¹çš„IPé…ç½®æ–¹æ³•åŒä¸Šï¼Œåªä¸è¿‡IPæ”¹ä¸º192.168.44.151</p>
</blockquote>
<h4 data-id="heading-5">â¡ï¸â¡ï¸ compute1 èŠ‚ç‚¹ â¬…ï¸â¬…ï¸</h4>
<p><strong>1. ä¿®æ”¹ç½‘ç»œé…ç½®æ–‡ä»¶</strong></p>
<pre><code class="hljs language-bash" lang="bash">ip <span class="hljs-built_in">link</span> show  <span class="hljs-comment"># å…ˆç¡®è®¤æ‰€æœ‰å¯ç”¨ç½‘å¡</span>
<span class="hljs-built_in">ls</span> /etc/sysconfig/network-scripts/ifcfg-*  <span class="hljs-comment"># ç¡®ä¿é…ç½®ä¸ç‰©ç†è®¾å¤‡åŒ¹é…</span>
</code></pre>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¦†ç›–å†™å…¥é™æ€ IP é…ç½®ï¼ˆæ³¨æ„æ›¿æ¢æ¥å£åå’Œç½‘ç»œå‚æ•°ï¼‰</span>
sudo tee /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; EOF
<span class="hljs-attr">TYPE</span>=Ethernet
<span class="hljs-attr">BOOTPROTO</span>=static
<span class="hljs-attr">NAME</span>=ens33
<span class="hljs-attr">DEVICE</span>=ens33
<span class="hljs-attr">ONBOOT</span>=<span class="hljs-literal">yes</span>
<span class="hljs-attr">IPADDR</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">44.151</span>
<span class="hljs-attr">NETMASK</span>=<span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span>
<span class="hljs-attr">GATEWAY</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">44.2</span>
<span class="hljs-attr">DNS1</span>=<span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span>
<span class="hljs-attr">DNS2</span>=<span class="hljs-number">223.5</span>.<span class="hljs-number">5.5</span>
EOF

sudo tee /etc/sysconfig/network-scripts/ifcfg-ens34 &lt;&lt; EOF
<span class="hljs-attr">TYPE</span>=Ethernet
<span class="hljs-attr">BOOTPROTO</span>=none
<span class="hljs-attr">DEVICE</span>=ens34
<span class="hljs-attr">ONBOOT</span>=<span class="hljs-literal">yes</span>
EOF


<span class="hljs-comment"># é‡å¯ç½‘ç»œæœåŠ¡</span>
systemctl restart network

<span class="hljs-comment"># éªŒè¯ IP é…ç½®</span>
ip addr show ens33
ip addr show ens34
</code></pre>
<h3 data-id="heading-6">3ã€ä¿®æ”¹ä¸»æœºå + ä¸»æœºåæ˜ å°„ï¼ˆåŒèŠ‚ç‚¹ï¼‰</h3>
<ul>
<li><strong>controller</strong> <strong>èŠ‚ç‚¹</strong></li>
</ul>

<pre><code class="hljs language-bash" lang="bash">hostnamectl set-hostname controller

<span class="hljs-comment"># ä¿®æ”¹/etc/hostsæ–‡ä»¶</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"192.168.44.150 controller"</span> &gt;&gt; /etc/hosts
<span class="hljs-built_in">echo</span> <span class="hljs-string">"192.168.44.151 compute1"</span> &gt;&gt; /etc/hosts
</code></pre>
<ul>
<li><strong>compute1 èŠ‚ç‚¹</strong></li>
</ul>

<pre><code class="hljs language-bash" lang="bash">hostnamectl set-hostname compute1

<span class="hljs-comment"># ä¿®æ”¹/etc/hostsæ–‡ä»¶</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"192.168.44.150 controller"</span> &gt;&gt; /etc/hosts
<span class="hljs-built_in">echo</span> <span class="hljs-string">"192.168.44.151 compute1"</span> &gt;&gt; /etc/hosts
</code></pre>
<h3 data-id="heading-7">4ã€å…³é—­é˜²ç«å¢™å¹¶ç¦ç”¨ SELinuxï¼ˆåŒèŠ‚ç‚¹ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…³é—­é˜²ç«å¢™</span>
systemctl stop firewalld
systemctl <span class="hljs-built_in">disable</span> firewalld
setenforce 0

<span class="hljs-comment"># ç¦ç”¨ SELinux</span>
sed -i <span class="hljs-string">'/^SELINUX/s/enforcing/disabled/'</span> /etc/selinux/config

<span class="hljs-comment"># æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span>
systemctl status firewalld
</code></pre>
<h3 data-id="heading-8">5ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openstack.org%2Finstall-guide%2Fenvironment-ntp-controller.html" target="_blank" title="https://docs.openstack.org/install-guide/environment-ntp-controller.html" ref="nofollow noopener noreferrer">è®¾ç½®æ—¶åŒºåŒæ­¥</a></h3>
<h4 data-id="heading-9"><strong>ğŸ¥ğŸ¥</strong> <strong>controller èŠ‚ç‚¹</strong> <strong>ğŸ¥ğŸ¥</strong></h4>
<ul>
<li>ä¿®æ”¹ chrony.conf æ–‡ä»¶</li>
</ul>

<pre><code class="hljs language-bash" lang="bash">sudo yum install chrony

<span class="hljs-comment"># ä¿®æ”¹chrony.confæ–‡ä»¶</span>
vim /etc/chrony.conf
</code></pre>
<ul>
<li>å‚è€ƒä¸‹å›¾ä¿®æ”¹</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31d55718ebed4dc4b4fdea4a31afc9a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHkxMjMwNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907550&amp;x-signature=4BoNryznOehn5IAYKFHXKSQjXBw%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>é‡å¯</strong> <strong>æœåŠ¡å¹¶éªŒè¯æ—¶åŒºåŒæ­¥</strong></li>
</ul>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é‡å¯ Chrony æœåŠ¡</span>
systemctl restart chronyd
systemctl <span class="hljs-built_in">enable</span> chronyd

<span class="hljs-comment"># æŸ¥çœ‹æ—¶åŒºè®¾ç½®</span>
timedatectl

<span class="hljs-comment"># éªŒè¯æ—¶åŒºåŒæ­¥</span>
chronyc sources
</code></pre>
<h4 data-id="heading-10"><strong>ğŸ¥ğŸ¥</strong> <strong>compute1 èŠ‚ç‚¹</strong> <strong>ğŸ¥ğŸ¥</strong></h4>
<ul>
<li>ä¿®æ”¹ chrony.conf æ–‡ä»¶</li>
</ul>

<pre><code class="hljs language-bash" lang="bash">sudo yum install chrony

<span class="hljs-comment"># ä¿®æ”¹chrony.confæ–‡ä»¶</span>
vim /etc/chrony.conf
</code></pre>
<ul>
<li>å‚è€ƒä¸‹å›¾ä¿®æ”¹</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4fbae3ea52a41e8b7f27ecb342edb6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHkxMjMwNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907550&amp;x-signature=aZWYoXklsOFPAnubp6fqwWezZ%2B8%3D" alt="" loading="lazy"/></p>
<ul>
<li>é‡å¯æœåŠ¡å¹¶éªŒè¯æ—¶åŒºåŒæ­¥</li>
</ul>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é‡å¯ Chrony æœåŠ¡</span>
systemctl restart chronyd
systemctl <span class="hljs-built_in">enable</span> chronyd

<span class="hljs-comment"># æŸ¥çœ‹æ—¶åŒºè®¾ç½®</span>
timedatectl

<span class="hljs-comment"># éªŒè¯æ—¶åŒºåŒæ­¥</span>
chronyc sources
</code></pre>
<h3 data-id="heading-11">6ã€å®‰è£… openstack package ï¼ˆ åŒèŠ‚ç‚¹ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">yum install -y centos-release-openstack-train

<span class="hljs-comment"># å…ˆè¿›å…¥yum.repos.dæ–‡ä»¶å¤¹ä¸‹</span>
<span class="hljs-built_in">cd</span>  /etc/yum.repos.d
</code></pre>
<blockquote>
<p>ç”±äº2024å¹´6æœˆåï¼Œcentos7.9 å®˜ç½‘å·²ä¸å†ç»´æŠ¤,ä¿®æ”¹æˆå›½å†…é•œåƒæº</p>
<ol>
<li>å°†baseurlå‰çš„#å·åˆ é™¤, å¹¶å°†ç½‘å€æ”¹ä¸º <a href="https://link.juejin.cn?target=http%3A%2F%2Fmirrors.aliyun.com" target="_blank" title="http://mirrors.aliyun.com" ref="nofollow noopener noreferrer">mirrors.aliyun.com</a></li>
<li>ç”¨#å·æ³¨é‡Šæ‰ mirrorlist è¡Œ</li>
</ol>
<p>âš ï¸æ³¨æ„ <a href="https://link.juejin.cn?target=http%3A%2F%2Fmirrors.aliyun.com" target="_blank" title="http://mirrors.aliyun.com" ref="nofollow noopener noreferrer">mirrors.aliyun.com</a> é“¾æ¥è¦ä¿®æ”¹æ­£ç¡®ã€‚</p>
<p>âš ï¸ mirroråé¢è¦åŠ  â€œ s â€œ æ”¹ä¸º mirrors</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¤‡ä»½å•ä¸ªæ–‡ä»¶ï¼ˆæ¯ä¸ªæ–‡ä»¶ç”Ÿæˆä¸€ä¸ª .bak å‰¯æœ¬ï¼‰</span>
sudo <span class="hljs-built_in">cp</span> CentOS-OpenStack-train.repo CentOS-OpenStack-train.repo.bak
sudo <span class="hljs-built_in">cp</span> CentOS-Ceph-Nautilus.repo CentOS-Ceph-Nautilus.repo.bak
sudo <span class="hljs-built_in">cp</span> CentOS-NFS-Ganesha-28.repo CentOS-NFS-Ganesha-28.repo.bak
sudo <span class="hljs-built_in">cp</span> CentOS-QEMU-EV.repo CentOS-QEMU-EV.repo.bak
</code></pre>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># 1. å–æ¶ˆæ³¨é‡Š baseurl è¡Œï¼Œå¹¶æ›¿æ¢ä¸ºé˜¿é‡Œäº‘é•œåƒåœ°å€</span>
<span class="hljs-comment"># 2. æ³¨é‡Š mirrorlist è¡Œ</span>
sudo sed -i \
  -e 's|^<span class="hljs-comment">#baseurl=http://mirror.centos.org/(.*)|baseurl=http://mirrors.aliyun.com/\1|' \</span>
  -e 's|^<span class="hljs-attr">mirrorlist</span>=.*|<span class="hljs-comment">#&amp;|' \</span>
  CentOS-OpenStack-train.repo
</code></pre>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># 1. æ³¨é‡Šmirrorlistè¡Œï¼Œ</span>
<span class="hljs-comment"># 2. å–æ¶ˆæ³¨é‡Šbaseurlè¡Œï¼Œå¹¶æ›¿æ¢ä¸ºé˜¿é‡Œäº‘é•œåƒ</span>
sudo sed -i \
  -e 's|^<span class="hljs-attr">mirrorlist</span>=.*|<span class="hljs-comment">#&amp;|' \</span>
  -e 's|^<span class="hljs-comment">#baseurl=http://mirror.centos.org/(.*)|baseurl=http://mirrors.aliyun.com/\1|' \</span>
  CentOS-Ceph-Nautilus.repo
</code></pre>

<pre><code class="hljs language-ini" lang="ini">sudo sed -i \
  -e 's|^<span class="hljs-attr">mirrorlist</span>=http://mirrorlist.centos.org.*|<span class="hljs-comment">#&amp;|' \</span>
  -e 's|^<span class="hljs-comment">#?baseurl=https://mirror.centos.org/(.*)|baseurl=http://mirrors.aliyun.com/\1|' \</span>
  CentOS-NFS-Ganesha-28.repo
</code></pre>

<pre><code class="hljs language-ini" lang="ini">sudo sed -i \
  -e 's|^<span class="hljs-attr">mirrorlist</span>=.*|<span class="hljs-comment">#&amp;|' \</span>
  -e 's|^<span class="hljs-comment">#baseurl=http://mirror.centos.org/(.*)|baseurl=http://mirrors.aliyun.com/\1|' \</span>
  CentOS-QEMU-EV.repo
</code></pre>
<ul>
<li>å®‰è£…OpenStackå®¢æˆ·ç«¯å’Œopenstack-selinux</li>
</ul>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”Ÿæˆç¼“å­˜</span>
yum makecache

yum install python-openstackclient -y 
yum install openstack-selinux -y
</code></pre>
<hr/>
<blockquote>
<p>ä»¥ä¸Šæ•™æä»…ä¾›å‚è€ƒï¼Œé€‚ç”¨äºåˆå­¦è€…</p>
<p>å…³æœºæ‹å®Œå¿«ç…§åå¼€å§‹è¿›è¡Œä¸‹ä¸€æ­¥é…ç½®</p>
<p>è¾“å…¥<code>shutdown -h now</code> å…³æœº</p>
</blockquote>
<h3 data-id="heading-12"><a href="https://link.juejin.cn?target=https%3A%2F%2Fhcnsseyzsztm.feishu.cn%2Fwiki%2FUmiewkdawiIaELkUEhhc5IPMnNb" target="_blank" title="https://hcnsseyzsztm.feishu.cn/wiki/UmiewkdawiIaELkUEhhc5IPMnNb" ref="nofollow noopener noreferrer">1æ§åˆ¶èŠ‚ç‚¹--å®‰è£…openstackåŸºæœ¬è½¯ä»¶å¾…æ›´æ–°åŒæ­¥</a></h3></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Harmony osâ€”â€”é•¿æ—¶ä»»åŠ¡ï¼ˆContinuous Taskï¼ŒArkTSï¼‰]]></title>    <link>https://juejin.cn/post/7577321767346470958</link>    <guid>https://juejin.cn/post/7577321767346470958</guid>    <pubDate>2025-11-28T03:39:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577321767346470958" data-draft-id="7577321767346454574" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Harmony osâ€”â€”é•¿æ—¶ä»»åŠ¡ï¼ˆContinuous Taskï¼ŒArkTSï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-28T03:39:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·46398975432"/> <meta itemprop="url" content="https://juejin.cn/user/714006150282890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Harmony osâ€”â€”é•¿æ—¶ä»»åŠ¡ï¼ˆContinuous Taskï¼ŒArkTSï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/714006150282890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·46398975432
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:39:08.000Z" title="Fri Nov 28 2025 03:39:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Harmony osâ€”â€”é•¿æ—¶ä»»åŠ¡ï¼ˆContinuous Taskï¼ŒArkTSï¼‰</h2>
<blockquote>
<p>ä¸€å¥è¯ï¼š <strong>å‰å°ï¼åå°é•¿æœŸè·‘ã€ç”¨æˆ·èƒ½æ„ŸçŸ¥çš„ä¸šåŠ¡ï¼ˆéŸ³ä¹ã€å¯¼èˆªã€ä¸‹è½½ã€å½•å±â€¦ï¼‰ â†’ å¿…é¡»ç”³è¯·ã€Œé•¿æ—¶ä»»åŠ¡ã€ï¼Œå¦åˆ™ä¸€é€€åå°å°±è¢«æŒ‚èµ·/é™éŸ³/æ€è¿›ç¨‹ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-1">1. é•¿æ—¶ä»»åŠ¡å¹²å˜›ç”¨ï¼Ÿ</h3>
<p>å…¸å‹åœºæ™¯ï¼ˆç”¨æˆ·èƒ½æ˜æ˜¾æ„Ÿè§‰åˆ°ä½ è¿˜åœ¨å¹²æ´»ï¼‰ï¼š</p>
<ul>
<li>ğŸµ åå°æ’­æ”¾éŸ³ä¹ / æ’­æ”¾è§†é¢‘ / æŠ•å±æ’­æ”¾</li>
<li>ğŸ“¡ å¯¼èˆªã€å®æ—¶å®šä½</li>
<li>ğŸ¤ å½•éŸ³ / å½•å±é€€åå°ç»§ç»­å½•</li>
<li>ğŸ“¤ åå°é•¿æ—¶é—´ä¸Šä¼  / ä¸‹è½½</li>
<li>ğŸ”µ è“ç‰™ä¼ æ–‡ä»¶ã€è½¦é’¥åŒ™</li>
<li>ğŸ”— å¤šè®¾å¤‡äº’è”ã€åˆ†å¸ƒå¼æŠ•å±</li>
<li>ğŸ“ éŸ³è§†é¢‘é€šè¯ï¼ˆVoIPï¼‰</li>
<li>ğŸ›¡ PC/2in1 ä¸Šçš„æ€æ¯’ã€DLP ç­‰æŒç»­è®¡ç®—ä»»åŠ¡</li>
</ul>
<p>åªè¦ä½ <strong>é€€åˆ°åå°è¿˜è¦é•¿æ—¶é—´è·‘</strong>ï¼Œå¹¶ä¸”æ˜¯<strong>ç”¨æˆ·å¯æ„ŸçŸ¥çš„ä¸šåŠ¡</strong> â†’ å°±è¦é…å¥—ç”³è¯·å¯¹åº”ç±»å‹çš„é•¿æ—¶ä»»åŠ¡ã€‚</p>
<hr/>
<h3 data-id="heading-2">2. é•¿æ—¶ä»»åŠ¡ç±»å‹æ€»è§ˆï¼ˆä¸€å®šè¦è®°ä½è¿™å¼ è¡¨ï¼‰</h3>


















































<table><thead><tr><th>ç±»å‹å¸¸é‡</th><th>é…ç½®é¡¹å­—æ®µ</th><th>å…¸å‹åœºæ™¯ä¸¾ä¾‹</th></tr></thead><tbody><tr><td><code>DATA_TRANSFER</code></td><td><code>dataTransfer</code></td><td>æµè§ˆå™¨/ç½‘ç›˜åå°ä¸Šä¼ ä¸‹è½½ï¼ˆéæ‰˜ç®¡ä¸‹è½½ï¼‰</td></tr><tr><td><code>AUDIO_PLAYBACK</code></td><td><code>audioPlayback</code></td><td>éŸ³è§†é¢‘æ’­æ”¾ã€æŠ•æ’­ã€æ¸¸æˆéŸ³é¢‘ç­‰ï¼ˆéœ€æ¥å…¥ AVSessionï¼‰</td></tr><tr><td><code>AUDIO_RECORDING</code></td><td><code>audioRecording</code></td><td>å½•éŸ³ã€å½•å±é€€åå°</td></tr><tr><td><code>LOCATION</code></td><td><code>location</code></td><td>åå°å®šä½ / å¯¼èˆª</td></tr><tr><td><code>BLUETOOTH_INTERACTION</code></td><td><code>bluetoothInteraction</code></td><td>è“ç‰™ä¼ æ–‡ä»¶ã€è½¦é’¥åŒ™</td></tr><tr><td><code>MULTI_DEVICE_CONNECTION</code></td><td><code>multiDeviceConnection</code></td><td>åˆ†å¸ƒå¼ä¸šåŠ¡ã€å¤šè®¾å¤‡äº’è”ã€æŠ•æ’­ï¼ˆå…ƒæœåŠ¡ä¹Ÿå¯ç”¨ï¼‰</td></tr><tr><td><code>VOIP</code></td><td><code>voip</code></td><td>éŸ³è§†é¢‘é€šè¯é€€åå°</td></tr><tr><td><code>TASK_KEEPING</code></td><td><code>taskKeeping</code></td><td>æ€æ¯’ã€DLP ç­‰è®¡ç®—ä»»åŠ¡ï¼ˆPC/2in1 ä¸ºä¸»ï¼Œéœ€ç‰¹æƒ ACLï¼‰</td></tr></tbody></table>
<h4 data-id="heading-3">ä¸€äº›ç‰¹åˆ«è¯´æ˜ï¼ˆé«˜é¢‘å‘ç‚¹ï¼‰</h4>
<ul>
<li>
<p><strong>DATA_TRANSFER</strong></p>
<ul>
<li>
<p>å¦‚æœç”¨ã€Œä¸Šä¼ /ä¸‹è½½ä»£ç†æ¥å£æ‰˜ç®¡ç»™ç³»ç»Ÿã€ï¼Œï¼Œé‚£ä½ ç”³è¯· <code>DATA_TRANSFER</code> ä¹Ÿæ²¡ç”¨ï¼Œé€€åå°è¿˜æ˜¯ä¼šæŒ‚èµ·ã€‚</p>
</li>
<li>
<p>å¦‚æœè‡ªå·±å®ç°ä¼ è¾“é€»è¾‘ â†’ å¯ä»¥ç”³è¯· <code>DATA_TRANSFER</code>ã€‚</p>
</li>
<li>
<p>å¿…é¡»<strong>å®šæœŸæ›´æ–°ä¼ è¾“è¿›åº¦</strong>ï¼ˆé¦–æ¬¡æ›´æ–°ä¸èƒ½è¶…è¿‡ 10 åˆ†é’Ÿï¼‰ï¼Œå¦åˆ™é•¿æ—¶ä»»åŠ¡ä¼šè¢«ç³»ç»Ÿå–æ¶ˆã€‚</p>
<blockquote>
<p>è¿›åº¦è¦é€šè¿‡<strong>å®å†µçª—é€šçŸ¥</strong>æ›´æ–°ï¼Œè¯¦è§ <code>startBackgroundRunning</code> é‡Œçš„ç¤ºä¾‹ã€‚</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p><strong>AUDIO_PLAYBACK</strong></p>
<ul>
<li>
<p>åª’ä½“ç±»å‹ï¼ˆ<code>STREAM_USAGE_MUSIC/MOVIE/AUDIOBOOK/GAME</code>ï¼‰åå°æ’­æ”¾ â†’ å¿…é¡»ï¼š</p>
<ol start="0">
<li>æ¥å…¥ AVSession</li>
<li>ç”³è¯· <code>AUDIO_PLAYBACK</code> é•¿æ—¶ä»»åŠ¡</li>
</ol>
</li>
<li>
<p>å¦åˆ™ï¼š</p>
<ul>
<li>é€€åå°ä¼šè¢« <strong>é™éŸ³ + å†»ç»“</strong>ï¼Œåªæœ‰åˆ‡å›å‰å°æ‰æ¢å¤ã€‚</li>
</ul>
</li>
<li>
<p>ä» API 20 èµ·ï¼š</p>
<ul>
<li>å¦‚æœæ²¡æ¥å…¥ AVSession ä½†ç”³è¯·äº† <code>AUDIO_PLAYBACK</code> â†’ ç”±åå°ä»»åŠ¡æ¨¡å—åœ¨é€šçŸ¥æ æ˜¾ç¤ºé€šçŸ¥ã€‚</li>
<li>å¦‚æœæ¥å…¥äº† AVSession â†’ é€šçŸ¥æ”¹ç”± AVSession å‘ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-4">3. çº¦æŸ &amp; ç³»ç»Ÿç®¡æ§é€»è¾‘</h3>
<h4 data-id="heading-5">3.1 è°èƒ½ç”³è¯·ï¼Ÿ</h4>
<ul>
<li>
<p><strong>Stage æ¨¡å‹</strong>ï¼šåªèƒ½åœ¨ <strong>UIAbility</strong> é‡Œç”³è¯·ã€‚</p>
</li>
<li>
<p><strong>FA æ¨¡å‹</strong>ï¼šåªèƒ½åœ¨ <strong>ServiceAbility</strong> é‡Œç”³è¯·ã€‚</p>
</li>
<li>
<p>æ”¯æŒï¼š</p>
<ul>
<li>å½“å‰åº”ç”¨è‡ªå·±ç”³è¯·</li>
<li>è·¨è®¾å¤‡ / è·¨åº”ç”¨ç”³è¯· â†’ <strong>åªå¯¹ç³»ç»Ÿåº”ç”¨å¼€æ”¾</strong>ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-6">3.2 æ•°é‡é™åˆ¶ï¼ˆç‰ˆæœ¬å·®å¼‚ï¼‰</h4>
<ul>
<li>
<p><strong>API 21 èµ·</strong>ï¼š</p>
<ul>
<li>ä¸€ä¸ª UIAbility <strong>åŒæ—¶æœ€å¤šå¯ç”³è¯· 10 ä¸ªé•¿æ—¶ä»»åŠ¡</strong>ã€‚</li>
<li>ç”¨çš„æ˜¯æ–°ç‰ˆæ¥å£ï¼š <code>startBackgroundRunning(context, request: ContinuousTaskRequest)</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>API 20 åŠä»¥å‰</strong>ï¼š</p>
<ul>
<li>ä¸€ä¸ª UIAbility / ServiceAbility <strong>åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªé•¿æ—¶ä»»åŠ¡</strong>ã€‚</li>
<li>å¦‚æœä¸€ä¸ªåº”ç”¨éœ€è¦å¤šä¸ªé•¿æ—¶ä»»åŠ¡ â†’ å¾—å¼€å¤šä¸ª UIAbility æ¥ç”³è¯·ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>ä½†æ³¨æ„ï¼šåªè¦<strong>å…¶ä¸­ä¸€ä¸ª UIAbility ç”³è¯·äº†é•¿æ—¶ä»»åŠ¡</strong>ï¼Œæ•´ä¸ªåº”ç”¨ä¸‹çš„è¿›ç¨‹éƒ½ä¸ä¼šè¢«æŒ‚èµ·ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-7">3.3 ç³»ç»Ÿä½•æ—¶ä¼šã€ŒåŠ¨åˆ€ã€ç®¡ä½ çš„åº”ç”¨ï¼Ÿ</h4>
<p>ç”³è¯·é•¿æ—¶ä»»åŠ¡ â‰  æ°¸ä¹…è±å…ï¼Œç³»ç»Ÿä¼šåšä¸€è‡´æ€§æ ¡éªŒï¼š</p>
<ol start="0">
<li>
<p><strong>ç”³è¯·äº†ä½†ä¸å¹²å¯¹åº”çš„æ´»</strong></p>
<ul>
<li>ä¾‹å¦‚ï¼šç”³è¯· <code>AUDIO_PLAYBACK</code>ï¼Œä½†å®é™…æ²¡æœ‰æ’­æ”¾ä»»ä½•éŸ³é¢‘/è§†é¢‘ã€‚ â†’ åº”ç”¨é€€åå°æ—¶ï¼Œä¼šè¢«æŒ‚èµ·ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸šåŠ¡ç±»å‹å’Œç”³è¯·ä¸ä¸€è‡´</strong></p>
<ul>
<li>åªç”³è¯·äº† <code>AUDIO_PLAYBACK</code>ï¼Œå®é™…åœ¨åå°è¿˜åšå½•éŸ³ï¼ˆåº”è¯¥ç”³è¯· <code>AUDIO_RECORDING</code>ï¼‰ã€‚ â†’ ç³»ç»Ÿåˆ¤å®šè¿è§„ï¼ŒåŒæ ·ä¼šæŒ‚èµ·ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸šåŠ¡å·²ç»ç»“æŸè¿˜ä¸å–æ¶ˆ</strong></p>
<ul>
<li>æ¯”å¦‚ç”¨æˆ·æ‰‹åŠ¨æš‚åœéŸ³ä¹ï¼Œä½ é•¿æ—¶ä»»åŠ¡è¿˜æŒ‚ç€ä¸å…³ã€‚ â†’ ç³»ç»Ÿæ£€æµ‹åˆ°ä¸šåŠ¡ä¸å†å‘ç”Ÿï¼Œä¼šæŒ‚èµ·ã€‚</li>
</ul>
</li>
<li>
<p><strong>åå°è´Ÿè½½è¿‡é«˜</strong></p>
<ul>
<li>é•¿æ—¶ä»»åŠ¡å±äºã€Œç”¨æˆ·å¯æ„ŸçŸ¥+èµ„æºæœ‰é™ã€æ¨¡å¼ï¼Œç³»ç»Ÿä¼šæ ¹æ®å…¸å‹è´Ÿè½½å®¡æŸ¥ã€‚</li>
<li>å¦‚æœè¿›ç¨‹é•¿æœŸé«˜è´Ÿè½½ï¼Œä¸ç¬¦åˆè¯¥ç±»å‹åˆç†è¡Œä¸º â†’ å¯èƒ½è¢«æŒ‚èµ·æˆ–ç›´æ¥ç»ˆæ­¢ã€‚</li>
</ul>
</li>
<li>
<p><strong>åå°æ’­æ”¾éŸ³é¢‘æ—¶è¢«æ‰“æ–­</strong></p>
<ul>
<li>è¢«ç³»ç»Ÿæˆ–å…¶ä»–äº‹ä»¶æ‰“æ–­æ—¶é•¿æ—¶ä»»åŠ¡ä¼šè¢«åœã€‚</li>
<li>éŸ³é¢‘é‡æ–°æ’­æ”¾ â†’ ä½ è¦é‡æ–°ç”³è¯·é•¿æ—¶ä»»åŠ¡ã€‚</li>
</ul>
</li>
</ol>
<blockquote>
<p>é‡ç‚¹ï¼š<strong>ä»»åŠ¡ç»“æŸä¸€å®šè¦ä¸»åŠ¨ stopï¼Œä¸è¦æŒ¨ç³»ç»Ÿçš„åˆ€ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-8">4. é€šçŸ¥æ  &amp; ç”¨æˆ·æ§åˆ¶æƒ</h3>
<ul>
<li>
<p>ç”³è¯·é•¿æ—¶ä»»åŠ¡æˆåŠŸåï¼š</p>
<ul>
<li>é€šçŸ¥æ ä¼šæ˜¾ç¤ºã€Œæ­£åœ¨è¿è¡Œå½•åˆ¶ä»»åŠ¡ / æ’­æ”¾ä»»åŠ¡â€¦ã€ä¹‹ç±»çš„é€šçŸ¥ã€‚</li>
<li>ç”¨æˆ·<strong>æ‰‹åŠ¨åˆ é™¤é€šçŸ¥</strong> â†’ ç³»ç»Ÿä¼šè‡ªåŠ¨åœæ­¢è¿™æ¡é•¿æ—¶ä»»åŠ¡ã€‚</li>
</ul>
</li>
<li>
<p>å¯¹éŸ³é¢‘æ’­æ”¾ï¼š</p>
<ul>
<li>åœæ­¢é•¿æ—¶ä»»åŠ¡æ—¶ï¼Œä½ ä¹Ÿè¦æŠŠéŸ³é¢‘æµåœæ‰ï¼Œä¸ç„¶ç³»ç»Ÿå¯èƒ½ä¼š<strong>å¼ºåˆ¶ç»ˆæ­¢åº”ç”¨</strong>ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-9">5. å…³é”® API æ€»è§ˆï¼ˆ<code>backgroundTaskManager</code>ï¼‰</h3>
<blockquote>
<p>æ¨¡å—ï¼š <code>@kit.BackgroundTasksKit</code> + <code>@kit.AbilityKit</code> ä¸­çš„ <code>wantAgent</code></p>
</blockquote>
<h4 data-id="heading-10">5.1 æ—§ç‰ˆï¼šä¸€ä¸ª UIAbility ä¸€ä¸ªä»»åŠ¡</h4>
<pre><code class="hljs language-php" lang="php">Â <span class="hljs-title function_ invoke__">startBackgroundRunning</span>(<span class="hljs-attr">context</span>: Context, <span class="hljs-attr">bgMode</span>: BackgroundMode, <span class="hljs-attr">wantAgent</span>: WantAgent): Promise&lt;<span class="hljs-keyword">void</span>&gt;;
Â â€‹
Â <span class="hljs-title function_ invoke__">stopBackgroundRunning</span>(<span class="hljs-attr">context</span>: Context): Promise&lt;<span class="hljs-keyword">void</span>&gt;;
</code></pre>
<ul>
<li><code>bgMode</code> æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•°ç»„ï¼ˆå¦‚ <code>"audioRecording"</code>ã€<code>"audioPlayback"</code>â€¦ï¼‰</li>
<li>ç”¨äº API 20 åŠä»¥å‰çš„ã€Œå•ä»»åŠ¡æ¨¡å¼ã€ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-11">5.2 æ–°ç‰ˆï¼šæ”¯æŒå¤šä¸ªè¿ç»­ä»»åŠ¡ï¼ˆAPI 21ï¼‰</h4>
<pre><code class="hljs language-php" lang="php">Â <span class="hljs-title function_ invoke__">startBackgroundRunning</span>(<span class="hljs-attr">context</span>: Context, <span class="hljs-attr">request</span>: ContinuousTaskRequest): Promise&lt;ContinuousTaskNotification&gt;;
Â â€‹
Â <span class="hljs-title function_ invoke__">stopBackgroundRunning</span>(<span class="hljs-attr">context</span>: Context, <span class="hljs-attr">continuousTaskId</span>: number): Promise&lt;<span class="hljs-keyword">void</span>&gt;;
</code></pre>
<ul>
<li><code>ContinuousTaskRequest</code>ï¼šå¯ä»¥ä¸€æ¬¡æ€§é…ç½®å¤šä¸ªç±»å‹ï¼Œæ¯”å¦‚ï¼š<code>["audioPlayback", "location"]</code></li>
<li>è¿”å› <code>ContinuousTaskNotification</code>ï¼Œé‡Œé¢æœ‰ <code>notificationId</code> ç­‰ä¿¡æ¯ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-12">5.3 ç›‘å¬é•¿æ—¶ä»»åŠ¡è¢«ç³»ç»Ÿå–æ¶ˆ</h4>
<pre><code class="hljs language-javascript" lang="javascript">Â backgroundTaskManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">"continuousTaskCancel"</span>, <span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {
Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Canceled task id: '</span> + info.<span class="hljs-property">id</span>);
Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Reason: '</span> + info.<span class="hljs-property">reason</span>);
Â });
Â â€‹
Â backgroundTaskManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">"continuousTaskCancel"</span>, callback); <span class="hljs-comment">// å–æ¶ˆç›‘å¬</span>
</code></pre>
<blockquote>
<p>åœºæ™¯ï¼šæ¯”å¦‚è¢«ç³»ç»Ÿåˆ¤æ–­ä¸ç¬¦åˆè§„åˆ™ï¼Œæˆ–ç”¨æˆ·æ¸…æ‰é€šçŸ¥æ  â†’ ä¼šè§¦å‘è¿™ä¸ªå›è°ƒã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-13">6. å½•åˆ¶åœºæ™¯ç¤ºä¾‹ï¼ˆå½•éŸ³/å½•å±ï¼‰</h3>
<h4 data-id="heading-14">6.1 é…ç½®æƒé™ &amp; åå°æ¨¡å¼ï¼ˆmodule.json5ï¼‰</h4>
<pre><code class="hljs language-json" lang="json">Â <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
Â   <span class="hljs-attr">"abilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
Â  Â   <span class="hljs-punctuation">{</span>
Â  Â  Â   <span class="hljs-comment">// ... ä½ çš„ EntryAbility / MainAbility ...</span>
Â  Â  Â   <span class="hljs-attr">"backgroundModes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
Â  Â  Â  Â   <span class="hljs-string">"audioRecording"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â   <span class="hljs-string">"bluetoothInteraction"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â   <span class="hljs-string">"audioPlayback"</span>
Â  Â  Â   <span class="hljs-punctuation">]</span>
Â  Â   <span class="hljs-punctuation">}</span>
Â   <span class="hljs-punctuation">]</span>
Â <span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿˜è¦åœ¨å·¥ç¨‹é‡Œå£°æ˜æƒé™ï¼š<code>ohos.permission.KEEP_BACKGROUND_RUNNING</code>ï¼ˆç³»ç»Ÿæƒé™é…ç½®å¤„ï¼‰ã€‚</p>
<hr/>
<h4 data-id="heading-15">6.2 å…³é”®ä»£ç æ‹†è§£ï¼ˆthen å†™æ³•ï¼‰</h4>
<blockquote>
<p>æŒ‰é’®ç‚¹å‡» â†’ ç”³è¯·å½•åˆ¶é•¿æ—¶ä»»åŠ¡ â†’ é€šçŸ¥æ å‡ºä¸€æ¡â€œæ­£åœ¨å½•åˆ¶â€ â†’ ç‚¹å‡»å¦ä¸€æŒ‰é’®å–æ¶ˆã€‚</p>
</blockquote>
<pre><code class="hljs language-typescript" lang="typescript">Â <span class="hljs-keyword">import</span> { backgroundTaskManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BackgroundTasksKit'</span>;
Â <span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;
Â <span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;
Â â€‹
Â <span class="hljs-keyword">function</span> <span class="hljs-title function_">continuousTaskCancelCallback</span>(<span class="hljs-params">info: backgroundTaskManager.ContinuousTaskCancelInfo</span>) {
Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'ContinuousTask canceled, id: '</span> + info.<span class="hljs-property">id</span>);
Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Reason: '</span> + info.<span class="hljs-property">reason</span>);
Â }
Â â€‹
Â <span class="hljs-meta">@Entry</span>
Â <span class="hljs-meta">@Component</span>
Â struct <span class="hljs-title class_">Index</span> {
Â   <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'ContinuousTask'</span>;
Â   <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>();
Â â€‹
Â   <span class="hljs-comment">// æ³¨å†Œä»»åŠ¡å–æ¶ˆå›è°ƒ</span>
Â   <span class="hljs-title class_">OnContinuousTaskCancel</span>() {
Â  Â   <span class="hljs-keyword">try</span> {
Â  Â  Â   backgroundTaskManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'continuousTaskCancel'</span>, continuousTaskCancelCallback);
Â  Â   } <span class="hljs-keyword">catch</span> (error) {
Â  Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`OnContinuousTaskCancel failed. code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, msg: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);
Â  Â   }
Â   }
Â â€‹
Â   <span class="hljs-comment">// å–æ¶ˆæ³¨å†Œ</span>
Â   <span class="hljs-title class_">OffContinuousTaskCancel</span>() {
Â  Â   <span class="hljs-keyword">try</span> {
Â  Â  Â   backgroundTaskManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'continuousTaskCancel'</span>, continuousTaskCancelCallback);
Â  Â   } <span class="hljs-keyword">catch</span> (error) {
Â  Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`OffContinuousTaskCancel failed. code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, msg: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);
Â  Â   }
Â   }
Â â€‹
Â   <span class="hljs-comment">// ç”³è¯·é•¿æ—¶ä»»åŠ¡ï¼ˆå½•åˆ¶ç±»ï¼‰</span>
Â   <span class="hljs-title function_">startContinuousTask</span>(<span class="hljs-params"/>) {
Â  Â   <span class="hljs-keyword">const</span> <span class="hljs-attr">info</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {
Â  Â  Â   <span class="hljs-attr">wants</span>: [
Â  Â  Â  Â   {
Â  Â  Â  Â  Â   <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,
Â  Â  Â  Â  Â   <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'MainAbility'</span>
Â  Â  Â  Â   }
Â  Â  Â   ],
Â  Â  Â   <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,
Â  Â  Â   <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,
Â  Â  Â   <span class="hljs-attr">actionFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>],
Â  Â   };
Â â€‹
Â  Â   wantAgent.<span class="hljs-title function_">getWantAgent</span>(info).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">agent: WantAgent</span>) =&gt;</span> {
Â  Â  Â   <span class="hljs-keyword">const</span> <span class="hljs-attr">list</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">'audioRecording'</span>]; <span class="hljs-comment">// å½•åˆ¶é•¿æ—¶ä»»åŠ¡</span>
Â  Â  Â   backgroundTaskManager.<span class="hljs-title function_">startBackgroundRunning</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>!, list, agent)
Â  Â  Â  Â   .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
Â  Â  Â  Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'startBackgroundRunning succeeded'</span>);
Â  Â  Â  Â  Â   <span class="hljs-comment">// è¿™é‡Œå¼€å§‹çœŸæ­£çš„å½•åˆ¶é€»è¾‘ï¼ˆå½•éŸ³/å½•å±ç­‰ï¼‰</span>
Â  Â  Â  Â   })
Â  Â  Â  Â   .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {
Â  Â  Â  Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`startBackgroundRunning failed. code: <span class="hljs-subst">${err.code}</span>, msg: <span class="hljs-subst">${err.message}</span>`</span>);
Â  Â  Â  Â   });
Â  Â   }).<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {
Â  Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed. code: <span class="hljs-subst">${err.code}</span>, msg: <span class="hljs-subst">${err.message}</span>`</span>);
Â  Â   });
Â   }
Â â€‹
Â   <span class="hljs-comment">// å–æ¶ˆé•¿æ—¶ä»»åŠ¡</span>
Â   <span class="hljs-title function_">stopContinuousTask</span>(<span class="hljs-params"/>) {
Â  Â   backgroundTaskManager.<span class="hljs-title function_">stopBackgroundRunning</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>!)
Â  Â  Â   .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
Â  Â  Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'stopBackgroundRunning succeeded'</span>);
Â  Â  Â  Â   <span class="hljs-comment">// åŒæ—¶è¦åœæ­¢å½•åˆ¶é€»è¾‘</span>
Â  Â  Â   })
Â  Â  Â   .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {
Â  Â  Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`stopBackgroundRunning failed. code: <span class="hljs-subst">${err.code}</span>, msg: <span class="hljs-subst">${err.message}</span>`</span>);
Â  Â  Â   });
Â   }
Â â€‹
Â   <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
Â  Â   <span class="hljs-title class_">Row</span>() {
Â  Â  Â   <span class="hljs-title class_">Column</span>() {
Â  Â  Â  Â   <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Index'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)
Â â€‹
Â  Â  Â  Â   <span class="hljs-title class_">Button</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Text</span>(<span class="hljs-string">'ç”³è¯·é•¿æ—¶ä»»åŠ¡'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">25</span>).<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>))
Â  Â  Â  Â  Â   .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)
Â  Â  Â  Â  Â   .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })
Â  Â  Â  Â  Â   .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0D9FFB'</span>)
Â  Â  Â  Â  Â   .<span class="hljs-title function_">width</span>(<span class="hljs-number">250</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)
Â  Â  Â  Â  Â   .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startContinuousTask</span>())
Â â€‹
Â  Â  Â  Â   <span class="hljs-title class_">Button</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Text</span>(<span class="hljs-string">'å–æ¶ˆé•¿æ—¶ä»»åŠ¡'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">25</span>).<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>))
Â  Â  Â  Â  Â   .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)
Â  Â  Â  Â  Â   .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })
Â  Â  Â  Â  Â   .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0D9FFB'</span>)
Â  Â  Â  Â  Â   .<span class="hljs-title function_">width</span>(<span class="hljs-number">250</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)
Â  Â  Â  Â  Â   .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopContinuousTask</span>())
Â â€‹
Â  Â  Â  Â   <span class="hljs-title class_">Button</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Text</span>(<span class="hljs-string">'æ³¨å†Œé•¿æ—¶ä»»åŠ¡å–æ¶ˆå›è°ƒ'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">25</span>).<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>))
Â  Â  Â  Â  Â   .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)
Â  Â  Â  Â  Â   .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })
Â  Â  Â  Â  Â   .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0D9FFB'</span>)
Â  Â  Â  Â  Â   .<span class="hljs-title function_">width</span>(<span class="hljs-number">250</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)
Â  Â  Â  Â  Â   .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">OnContinuousTaskCancel</span>())
Â â€‹
Â  Â  Â  Â   <span class="hljs-title class_">Button</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Text</span>(<span class="hljs-string">'å–æ¶ˆæ³¨å†Œé•¿æ—¶ä»»åŠ¡å–æ¶ˆå›è°ƒ'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">25</span>).<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>))
Â  Â  Â  Â  Â   .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)
Â  Â  Â  Â  Â   .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })
Â  Â  Â  Â  Â   .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0D9FFB'</span>)
Â  Â  Â  Â  Â   .<span class="hljs-title function_">width</span>(<span class="hljs-number">250</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)
Â  Â  Â  Â  Â   .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">OffContinuousTaskCancel</span>())
Â  Â  Â   }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
Â  Â   }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
Â   }
Â }
</code></pre>
<hr/>
<h3 data-id="heading-16">7. å’Œã€ŒçŸ­æ—¶ä»»åŠ¡ã€çš„å¯¹æ¯”å°ç»“ï¼ˆå¸®ä½ ä¸€èµ·è®°ï¼‰</h3>








































<table><thead><tr><th>å¯¹æ¯”ç‚¹</th><th>çŸ­æ—¶ä»»åŠ¡ï¼ˆrequestSuspendDelayï¼‰</th><th>é•¿æ—¶ä»»åŠ¡ï¼ˆstartBackgroundRunningï¼‰</th></tr></thead><tbody><tr><td>ç”¨é€”</td><td>åº”ç”¨å³å°†è¢«æŒ‚èµ·å‰ï¼Œäº‰å–ä¸€ç‚¹ç‚¹æ—¶é—´åšæ”¶å°¾</td><td>é€€åå°åé•¿æœŸæŒç»­è·‘ä¸šåŠ¡ï¼ˆéŸ³ä¹ / å¯¼èˆª / ä¸‹è½½ / é€šè¯ç­‰ï¼‰</td></tr><tr><td>æ—¶é—´å°ºåº¦</td><td>å•æ¬¡æœ€å¤šå‡ åˆ†é’Ÿï¼Œæ€»é…é¢ 10 åˆ†é’Ÿ / å¤©å·¦å³</td><td>å¯é•¿æ—¶é—´è¿è¡Œï¼Œåªè¦ä»»åŠ¡çœŸå®ä¸”ç±»å‹åŒ¹é…</td></tr><tr><td>ç”¨æˆ·å¯æ„ŸçŸ¥</td><td>é€šå¸¸ä¸å¯æ„ŸçŸ¥ï¼ˆåªæ˜¯ä½ åœ¨åšæ”¶å°¾ï¼‰</td><td>ç”¨æˆ·æ˜æ˜¾èƒ½æ„ŸçŸ¥ï¼ˆæ’­æ”¾ã€å¯¼èˆªã€ä¸‹è½½ã€é€šè¯â€¦ï¼‰</td></tr><tr><td>é€šçŸ¥æ </td><td>æ— å›ºå®šé€šçŸ¥è¦æ±‚ï¼Œä¸»è¦ç³»ç»Ÿç®¡ç†</td><td>å¿…é¡»æœ‰å¯¹åº”é€šçŸ¥ï¼ˆæˆ–ç”± AVSession ç®¡ï¼‰ï¼Œç”¨æˆ·å¯æ‰‹åŠ¨åœæ­¢</td></tr><tr><td>å…¸å‹è§¦å‘ç‚¹</td><td>å‰å°æˆ– <code>onBackground</code> å›è°ƒæ—¶</td><td>ä¸€èˆ¬åœ¨ç”¨æˆ·å¼€å§‹æŸä¸ªé•¿æœŸä»»åŠ¡æ—¶ï¼ˆæ’­æ”¾æŒ‰é’®ã€å¼€å§‹å¯¼èˆªç­‰ï¼‰</td></tr><tr><td>æ ¸å¿ƒé£é™©</td><td>è¶…æ—¶ä¸ cancel ä¼šè¢«ç®¡æ§</td><td>ç”³è¯·ç±»å‹ä¸ä¸šåŠ¡ä¸ä¸€è‡´ / ä¸šåŠ¡å·²ç»“æŸä¸ cancel ä¼šè¢«ç®¡æ§</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§å±æ€§èƒ½ä¼˜åŒ–ç»ˆææ–¹æ¡ˆï¼šè¯·æ±‚åˆå¹¶+æ™ºèƒ½ç¼“å­˜åŒå‰‘åˆç’§]]></title>    <link>https://juejin.cn/post/7577284771447242792</link>    <guid>https://juejin.cn/post/7577284771447242792</guid>    <pubDate>2025-11-28T03:10:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577284771447242792" data-draft-id="7577307409854087183" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§å±æ€§èƒ½ä¼˜åŒ–ç»ˆææ–¹æ¡ˆï¼šè¯·æ±‚åˆå¹¶+æ™ºèƒ½ç¼“å­˜åŒå‰‘åˆç’§"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-28T03:10:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ±ç´_"/> <meta itemprop="url" content="https://juejin.cn/user/2808622275126188"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§å±æ€§èƒ½ä¼˜åŒ–ç»ˆææ–¹æ¡ˆï¼šè¯·æ±‚åˆå¹¶+æ™ºèƒ½ç¼“å­˜åŒå‰‘åˆç’§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2808622275126188/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ±ç´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:10:00.000Z" title="Fri Nov 28 2025 03:10:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ‰¿æ¥ä¸Šä¸€ç¯‡ã€Š<a href="https://juejin.cn/post/7577049352839381007" target="_blank" title="https://juejin.cn/post/7577049352839381007">å¤§å±æ€§èƒ½ä¼˜åŒ–é»‘ç§‘æŠ€ï¼šVue 3 ä¸­å®ç°è¯·æ±‚åˆå¹¶ï¼Œè®©ä½ çš„å¤§å±é£èµ·æ¥ï¼</a>ã€‹ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†è¯·æ±‚åˆå¹¶æŠ€æœ¯ï¼Œè§£å†³äº†åŒæ—¶å‘èµ·çš„ç›¸åŒè¯·æ±‚é—®é¢˜ã€‚ä½†è¿™è¿˜ä¸å¤Ÿï¼ä»Šå¤©ï¼Œæˆ‘ä»¬å°†å¼•å…¥æ™ºèƒ½ç¼“å­˜ï¼Œæ‰“é€ å¤§å±æ€§èƒ½ä¼˜åŒ–çš„ç»ˆæè§£å†³æ–¹æ¡ˆï¼</p>
</blockquote>
<h2 data-id="heading-0">ğŸš¨ å¤§å±æ€§èƒ½çš„ç¬¬äºŒé“åï¼šçŸ­æ—¶é—´é‡å¤è¯·æ±‚</h2>
<p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬è§£å†³äº†<strong>åŒæ—¶å‘èµ·çš„ç›¸åŒè¯·æ±‚</strong>é—®é¢˜ï¼Œä½†å¤§å±åº”ç”¨è¿˜æœ‰å¦ä¸€ä¸ªæ€§èƒ½æ€æ‰‹ï¼š</p>
<p><strong>çŸ­æ—¶é—´å†…é‡å¤å‘èµ·çš„ç›¸åŒè¯·æ±‚</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼š</p>
<ul>
<li>å¤§å±æ¯10ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡æ•°æ®</li>
<li>ç”¨æˆ·é¢‘ç¹åˆ‡æ¢ç»„ä»¶æˆ–æ ‡ç­¾é¡µ</li>
<li>æŸäº›æ“ä½œè§¦å‘å¤šæ¬¡ç›¸åŒè¯·æ±‚</li>
</ul>
<p>å³ä½¿ä½¿ç”¨äº†è¯·æ±‚åˆå¹¶ï¼Œè¿™äº›<strong>éåŒæ—¶</strong>çš„é‡å¤è¯·æ±‚ä»ç„¶ä¼šå‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œæµªè´¹èµ„æºï¼</p>
<h2 data-id="heading-1">âœ¨ è§£å†³æ–¹æ¡ˆï¼šè¯·æ±‚åˆå¹¶+æ™ºèƒ½ç¼“å­˜åŒå‰‘åˆç’§</h2>
<p><strong>æ™ºèƒ½ç¼“å­˜</strong>æ˜¯è¯·æ±‚åˆå¹¶çš„å®Œç¾æ­æ¡£ï¼š</p>
<ul>
<li><strong>è¯·æ±‚åˆå¹¶</strong>ï¼šè§£å†³<strong>åŒæ—¶</strong>å‘èµ·çš„ç›¸åŒè¯·æ±‚</li>
<li><strong>æ™ºèƒ½ç¼“å­˜</strong>ï¼šè§£å†³<strong>çŸ­æ—¶é—´å†…é‡å¤</strong>å‘èµ·çš„ç›¸åŒè¯·æ±‚</li>
</ul>
<p>ä¸¤è€…ç»“åˆï¼Œå¯ä»¥<strong>è¦†ç›–å‡ ä¹æ‰€æœ‰é‡å¤è¯·æ±‚åœºæ™¯</strong>ï¼Œè®©ä½ çš„å¤§å±åº”ç”¨è¾¾åˆ°æè‡´æ€§èƒ½ï¼</p>
<h3 data-id="heading-2">å·¥ä½œåŸç†æµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å‘èµ·è¯·æ±‚] --&gt; B{æ£€æŸ¥ç¼“å­˜}
    B --&gt;|ç¼“å­˜å‘½ä¸­| C[ç›´æ¥è¿”å›ç¼“å­˜æ•°æ®]
    B --&gt;|ç¼“å­˜æœªå‘½ä¸­| D{æ£€æŸ¥æ˜¯å¦æœ‰ç›¸åŒè¯·æ±‚æ­£åœ¨è¿›è¡Œ}
    D --&gt;|æœ‰| E[ç­‰å¾…å¹¶å¤ç”¨ç°æœ‰è¯·æ±‚ç»“æœ]
    D --&gt;|æ— | F[åˆ›å»ºæ–°çš„è¯·æ±‚Promise]
    F --&gt; G[å­˜å‚¨è¯·æ±‚Promiseåˆ°pendingRequests]
    G --&gt; H[å‘èµ·ç½‘ç»œè¯·æ±‚]
    H --&gt; I[è·å–å“åº”æ•°æ®]
    I --&gt; J[å­˜å‚¨æ•°æ®åˆ°ç¼“å­˜]
    J --&gt; K[ä»pendingRequestsåˆ é™¤è¯·æ±‚]
    K --&gt; L[è°ƒç”¨resolveå‡½æ•°å®Œæˆæ‰€æœ‰ç­‰å¾…çš„Promise]
    L --&gt; M[è¿”å›å“åº”æ•°æ®]
    E --&gt; M
    C --&gt; N[è¯·æ±‚å®Œæˆ]
    M --&gt; N
</code></pre>
<p>è¿™ä¸ªæµç¨‹å›¾å±•ç¤ºäº†è¯·æ±‚åˆå¹¶+æ™ºèƒ½ç¼“å­˜çš„å®Œæ•´å·¥ä½œæµç¨‹ï¼š</p>
<ol>
<li>å½“å‘èµ·è¯·æ±‚æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥ç¼“å­˜</li>
<li>å¦‚æœç¼“å­˜å‘½ä¸­ï¼Œç›´æ¥è¿”å›ç¼“å­˜æ•°æ®</li>
<li>å¦‚æœç¼“å­˜æœªå‘½ä¸­ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ç›¸åŒè¯·æ±‚æ­£åœ¨è¿›è¡Œ</li>
<li>å¦‚æœæœ‰ï¼Œç­‰å¾…å¹¶å¤ç”¨ç°æœ‰è¯·æ±‚ç»“æœ</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºæ–°çš„è¯·æ±‚Promiseå¹¶å­˜å‚¨åˆ°pendingRequests</li>
<li>å‘èµ·ç½‘ç»œè¯·æ±‚</li>
<li>è·å–å“åº”æ•°æ®åï¼Œå­˜å‚¨åˆ°ç¼“å­˜</li>
<li>ä»pendingRequestsåˆ é™¤è¯·æ±‚</li>
<li>è°ƒç”¨resolveå‡½æ•°å®Œæˆæ‰€æœ‰ç­‰å¾…çš„Promise</li>
<li>è¿”å›å“åº”æ•°æ®</li>
<li>è¯·æ±‚å®Œæˆ</li>
</ol>
<h2 data-id="heading-3">ğŸ› ï¸ æ ¸å¿ƒå®ç°ï¼šå››å¤§æ–‡ä»¶æ‰“é€ å®Œæ•´è§£å†³æ–¹æ¡ˆ</h2>
<p>æˆ‘ä»¬å°†é€šè¿‡å››ä¸ªæ ¸å¿ƒæ–‡ä»¶å®ç°è¿™ä¸ªç»ˆææ–¹æ¡ˆï¼š</p>
<ol>
<li><strong><code>cache.js</code></strong> - æ™ºèƒ½ç¼“å­˜ç®¡ç†ä¸­å¿ƒ</li>
<li><strong><code>axios.js</code></strong> - Axiosè¯·æ±‚åˆå¹¶+ç¼“å­˜æ‹¦æˆªå™¨</li>
<li><strong><code>fetch.js</code></strong> - Fetch APIè¯·æ±‚åˆå¹¶+ç¼“å­˜åŒ…è£…</li>
<li><strong><code>index.js</code></strong> - ç»Ÿä¸€APIæœåŠ¡å…¥å£</li>
</ol>
<h3 data-id="heading-4">1. æ™ºèƒ½ç¼“å­˜ç®¡ç†ä¸­å¿ƒï¼š<code>cache.js</code></h3>
<p>CacheManageræ˜¯æ•´ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒï¼Œæ”¯æŒï¼š</p>
<ul>
<li>âœ… å†…å­˜ç¼“å­˜ + å¤–éƒ¨å­˜å‚¨ï¼ˆlocalStorage/sessionStorageï¼‰</li>
<li>âœ… å¯é…ç½®çš„ç¼“å­˜è¿‡æœŸæ—¶é—´</li>
<li>âœ… è‡ªåŠ¨æ¸…é™¤è¿‡æœŸç¼“å­˜</li>
<li>âœ… ç¼“å­˜é”®è‡ªåŠ¨ç”Ÿæˆ</li>
<li>âœ… ç¼“å­˜ä¿¡æ¯æŸ¥è¯¢</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultExpireTime</span> = options.<span class="hljs-property">defaultExpireTime</span> || <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>; <span class="hljs-comment">// é»˜è®¤5åˆ†é’Ÿ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span> = options.<span class="hljs-property">storage</span> || <span class="hljs-literal">null</span>; <span class="hljs-comment">// å¯é€‰çš„å¤–éƒ¨å­˜å‚¨ï¼Œå¦‚localStorage</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prefix</span> = options.<span class="hljs-property">prefix</span> || <span class="hljs-string">'cache_'</span>;
  }

  <span class="hljs-comment">/**
   * ç”Ÿæˆç¼“å­˜é”®
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">key</span> - åŸå§‹é”®å
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} <span class="hljs-variable">params</span> - è¯·æ±‚å‚æ•°
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} ç”Ÿæˆçš„ç¼“å­˜é”®
   */</span>
  <span class="hljs-title function_">generateKey</span>(<span class="hljs-params">key, params = {}</span>) {
    <span class="hljs-keyword">const</span> paramsStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(params);
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.prefix}</span><span class="hljs-subst">${key}</span>_<span class="hljs-subst">${paramsStr}</span>`</span>;
  }

  <span class="hljs-comment">/**
   * å­˜å‚¨ç¼“å­˜æ•°æ®
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">key</span> - ç¼“å­˜é”®
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} <span class="hljs-variable">data</span> - è¦å­˜å‚¨çš„æ•°æ®
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">expireTime</span> - è¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨å…¨å±€é»˜è®¤å€¼
   */</span>
  <span class="hljs-title function_">set</span>(<span class="hljs-params">key, data, expireTime = <span class="hljs-variable language_">this</span>.defaultExpireTime</span>) {
    <span class="hljs-keyword">const</span> cacheData = {
      data,
      <span class="hljs-attr">expireAt</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + expireTime,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
    };

    <span class="hljs-comment">// å­˜å‚¨åˆ°å†…å­˜ç¼“å­˜</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">set</span>(key, cacheData);

    <span class="hljs-comment">// å¦‚æœé…ç½®äº†å¤–éƒ¨å­˜å‚¨ï¼Œä¹Ÿå­˜å‚¨åˆ°å¤–éƒ¨</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(cacheData));
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å­˜å‚¨ç¼“å­˜åˆ°å¤–éƒ¨å­˜å‚¨å¤±è´¥:'</span>, error);
      }
    }
  }

  <span class="hljs-comment">/**
   * è·å–ç¼“å­˜æ•°æ®
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">key</span> - ç¼“å­˜é”®
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">any|null</span>} ç¼“å­˜æ•°æ®ï¼Œå¦‚æœè¿‡æœŸæˆ–ä¸å­˜åœ¨åˆ™è¿”å›null
   */</span>
  <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-comment">// å…ˆä»å†…å­˜ç¼“å­˜è·å–</span>
    <span class="hljs-keyword">let</span> cacheData = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">get</span>(key);

    <span class="hljs-comment">// å¦‚æœå†…å­˜ä¸­æ²¡æœ‰ï¼Œå°è¯•ä»å¤–éƒ¨å­˜å‚¨è·å–</span>
    <span class="hljs-keyword">if</span> (!cacheData &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> storedData = <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">getItem</span>(key);
        <span class="hljs-keyword">if</span> (storedData) {
          cacheData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(storedData);
          <span class="hljs-comment">// åŒæ­¥åˆ°å†…å­˜ç¼“å­˜</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">set</span>(key, cacheData);
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä»å¤–éƒ¨å­˜å‚¨è·å–ç¼“å­˜å¤±è´¥:'</span>, error);
      }
    }

    <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜æ˜¯å¦å­˜åœ¨å’Œè¿‡æœŸ</span>
    <span class="hljs-keyword">if</span> (!cacheData) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¿‡æœŸ</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() &gt; cacheData.<span class="hljs-property">expireAt</span>) {
      <span class="hljs-comment">// è¿‡æœŸåˆ™åˆ é™¤</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">delete</span>(key);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">return</span> cacheData.<span class="hljs-property">data</span>;
  }

  <span class="hljs-comment">/**
   * åˆ é™¤æŒ‡å®šç¼“å­˜
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">key</span> - ç¼“å­˜é”®
   */</span>
  <span class="hljs-title function_">delete</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">delete</span>(key);
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">removeItem</span>(key);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä»å¤–éƒ¨å­˜å‚¨åˆ é™¤ç¼“å­˜å¤±è´¥:'</span>, error);
      }
    }
  }

  <span class="hljs-comment">/**
   * æ¸…é™¤æ‰€æœ‰ç¼“å­˜
   */</span>
  <span class="hljs-title function_">clear</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">clear</span>();
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// åªæ¸…é™¤å¸¦æœ‰æŒ‡å®šå‰ç¼€çš„ç¼“å­˜</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-property">length</span>; i++) {
          <span class="hljs-keyword">const</span> key = <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">key</span>(i);
          <span class="hljs-keyword">if</span> (key &amp;&amp; key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">prefix</span>)) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">removeItem</span>(key);
            i--; <span class="hljs-comment">// è°ƒæ•´ç´¢å¼•ï¼Œå› ä¸ºåˆ é™¤åé•¿åº¦ä¼šå˜åŒ–</span>
          }
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä»å¤–éƒ¨å­˜å‚¨æ¸…é™¤ç¼“å­˜å¤±è´¥:'</span>, error);
      }
    }
  }

  <span class="hljs-comment">/**
   * æ¸…é™¤æ‰€æœ‰è¿‡æœŸç¼“å­˜
   */</span>
  <span class="hljs-title function_">clearExpired</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-comment">// æ¸…é™¤å†…å­˜ä¸­è¿‡æœŸçš„ç¼“å­˜</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, cacheData] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">entries</span>()) {
      <span class="hljs-keyword">if</span> (now &gt; cacheData.<span class="hljs-property">expireAt</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">delete</span>(key);
      }
    }

    <span class="hljs-comment">// æ¸…é™¤å¤–éƒ¨å­˜å‚¨ä¸­è¿‡æœŸçš„ç¼“å­˜</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-property">length</span>; i++) {
          <span class="hljs-keyword">const</span> key = <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">key</span>(i);
          <span class="hljs-keyword">if</span> (key &amp;&amp; key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">prefix</span>)) {
            <span class="hljs-keyword">const</span> cacheData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">getItem</span>(key));
            <span class="hljs-keyword">if</span> (now &gt; cacheData.<span class="hljs-property">expireAt</span>) {
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">removeItem</span>(key);
              i--;
            }
          }
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä»å¤–éƒ¨å­˜å‚¨æ¸…é™¤è¿‡æœŸç¼“å­˜å¤±è´¥:'</span>, error);
      }
    }
  }

  <span class="hljs-comment">/**
   * è·å–ç¼“å­˜ä¿¡æ¯
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">key</span> - ç¼“å­˜é”®
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">object|null</span>} ç¼“å­˜ä¿¡æ¯ï¼ŒåŒ…å«dataã€expireAtå’Œtimestampï¼Œæˆ–null
   */</span>
  <span class="hljs-title function_">getCacheInfo</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">const</span> cacheData = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">get</span>(key);
    <span class="hljs-keyword">if</span> (cacheData) {
      <span class="hljs-keyword">return</span> { ...cacheData };
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> storedData = <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">getItem</span>(key);
        <span class="hljs-keyword">if</span> (storedData) {
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(storedData);
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä»å¤–éƒ¨å­˜å‚¨è·å–ç¼“å­˜ä¿¡æ¯å¤±è´¥:'</span>, error);
      }
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}

<span class="hljs-comment">// åˆ›å»ºé»˜è®¤å®ä¾‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> cacheManager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CacheManager</span>();
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CacheManager</span>;
</code></pre>
<h3 data-id="heading-5">2. Axiosè¯·æ±‚åˆå¹¶+ç¼“å­˜ï¼š<code>axios.js</code></h3>
<p>åœ¨Axiosæ‹¦æˆªå™¨ä¸­é›†æˆè¯·æ±‚åˆå¹¶å’Œç¼“å­˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;
<span class="hljs-keyword">import</span> { cacheManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/cache'</span>;

<span class="hljs-comment">// åˆ›å»ºaxioså®ä¾‹</span>
<span class="hljs-keyword">const</span> instance = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">// æ ¹æ®å®é™…æƒ…å†µé…ç½®</span>
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
  }
});

<span class="hljs-comment">// ç”¨äºè·Ÿè¸ªæ­£åœ¨è¿›è¡Œçš„è¯·æ±‚</span>
<span class="hljs-keyword">const</span> pendingRequests = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

<span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨</span>
instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦ç¼“å­˜</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">cache</span> !== <span class="hljs-literal">false</span>) {
      <span class="hljs-comment">// ç”Ÿæˆç¼“å­˜é”®</span>
      <span class="hljs-keyword">const</span> cacheKey = cacheManager.<span class="hljs-title function_">generateKey</span>(
        <span class="hljs-string">`<span class="hljs-subst">${config.method}</span>_<span class="hljs-subst">${config.url}</span>`</span>,
        { <span class="hljs-attr">params</span>: config.<span class="hljs-property">params</span>, <span class="hljs-attr">data</span>: config.<span class="hljs-property">data</span> }
      );

      <span class="hljs-comment">// å°è¯•è·å–ç¼“å­˜æ•°æ®</span>
      <span class="hljs-keyword">const</span> cachedData = cacheManager.<span class="hljs-title function_">get</span>(cacheKey);
      <span class="hljs-keyword">if</span> (cachedData) {
        <span class="hljs-comment">// å¦‚æœæœ‰ç¼“å­˜ï¼Œç›´æ¥è¿”å›ç¼“å­˜æ•°æ®ï¼Œè·³è¿‡è¯·æ±‚</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>({
          ...config,
          <span class="hljs-attr">cached</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">data</span>: cachedData
        });
      }

      <span class="hljs-comment">// ç”Ÿæˆè¯·æ±‚é”®ï¼Œç”¨äºè·Ÿè¸ªæ­£åœ¨è¿›è¡Œçš„è¯·æ±‚</span>
      <span class="hljs-keyword">const</span> requestKey = cacheKey;
      
      <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰ç›¸åŒçš„è¯·æ±‚æ­£åœ¨è¿›è¡Œ</span>
      <span class="hljs-keyword">if</span> (pendingRequests.<span class="hljs-title function_">has</span>(requestKey)) {
        <span class="hljs-comment">// å¦‚æœæœ‰ï¼Œè¿”å›ä¸€ä¸ªPromiseï¼Œç­‰å¾…è¯¥è¯·æ±‚å®Œæˆ</span>
        <span class="hljs-keyword">return</span> pendingRequests.<span class="hljs-title function_">get</span>(requestKey);
      }

      <span class="hljs-comment">// å°†ç¼“å­˜é”®å­˜å‚¨åˆ°configä¸­ï¼Œä¾›å“åº”æ‹¦æˆªå™¨ä½¿ç”¨</span>
      config.<span class="hljs-property">cacheKey</span> = cacheKey;
      config.<span class="hljs-property">requestKey</span> = requestKey;
      <span class="hljs-comment">// å­˜å‚¨ç¼“å­˜è¿‡æœŸæ—¶é—´</span>
      config.<span class="hljs-property">cacheExpireTime</span> = config.<span class="hljs-property">cacheExpireTime</span> || <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>; <span class="hljs-comment">// é»˜è®¤5åˆ†é’Ÿ</span>

      <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„Promiseï¼Œç”¨äºè·Ÿè¸ªè¯·æ±‚çŠ¶æ€</span>
      <span class="hljs-keyword">const</span> requestPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
        <span class="hljs-comment">// å­˜å‚¨resolveå’Œrejectå‡½æ•°ï¼Œä¾›å“åº”æ‹¦æˆªå™¨ä½¿ç”¨</span>
        config.<span class="hljs-property">resolve</span> = resolve;
        config.<span class="hljs-property">reject</span> = reject;
      });

      <span class="hljs-comment">// å°†è¯·æ±‚Promiseå­˜å‚¨åˆ°pendingRequestsä¸­</span>
      pendingRequests.<span class="hljs-title function_">set</span>(requestKey, requestPromise);
    }

    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }
);

<span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨</span>
instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> { config, data } = response;

    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦ç¼“å­˜å’Œè¯·æ±‚åˆå¹¶</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">cache</span> !== <span class="hljs-literal">false</span> &amp;&amp; config.<span class="hljs-property">requestKey</span>) {
      <span class="hljs-comment">// å­˜å‚¨ç¼“å­˜æ•°æ®</span>
      cacheManager.<span class="hljs-title function_">set</span>(config.<span class="hljs-property">cacheKey</span>, data, config.<span class="hljs-property">cacheExpireTime</span>);

      <span class="hljs-comment">// å®Œæˆæ‰€æœ‰ç­‰å¾…è¯¥è¯·æ±‚çš„Promise</span>
      <span class="hljs-keyword">const</span> requestPromise = pendingRequests.<span class="hljs-title function_">get</span>(config.<span class="hljs-property">requestKey</span>);
      <span class="hljs-keyword">if</span> (requestPromise) {
        <span class="hljs-comment">// ä»pendingRequestsä¸­ç§»é™¤</span>
        pendingRequests.<span class="hljs-title function_">delete</span>(config.<span class="hljs-property">requestKey</span>);
        
        <span class="hljs-comment">// ä½¿ç”¨resolveå‡½æ•°å®ŒæˆPromise</span>
        <span class="hljs-keyword">if</span> (config.<span class="hljs-property">resolve</span>) {
          config.<span class="hljs-title function_">resolve</span>(response);
        }
      }
    }

    <span class="hljs-keyword">return</span> response;
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> { config } = error;

    <span class="hljs-comment">// å¤„ç†è¯·æ±‚å¤±è´¥çš„æƒ…å†µ</span>
    <span class="hljs-keyword">if</span> (config &amp;&amp; config.<span class="hljs-property">requestKey</span>) {
      <span class="hljs-comment">// ä»pendingRequestsä¸­ç§»é™¤</span>
      pendingRequests.<span class="hljs-title function_">delete</span>(config.<span class="hljs-property">requestKey</span>);
      
      <span class="hljs-comment">// æ‹’ç»æ‰€æœ‰ç­‰å¾…è¯¥è¯·æ±‚çš„Promise</span>
      <span class="hljs-keyword">if</span> (config.<span class="hljs-property">reject</span>) {
        config.<span class="hljs-title function_">reject</span>(error);
      }
    }

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }
);

<span class="hljs-comment">/**
 * å¸¦ç¼“å­˜çš„axiosè¯·æ±‚æ–¹æ³•
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">method</span> - è¯·æ±‚æ–¹æ³•
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">url</span> - è¯·æ±‚URL
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} <span class="hljs-variable">options</span> - è¯·æ±‚é€‰é¡¹
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise</span>} è¯·æ±‚ç»“æœ
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">request</span> = (<span class="hljs-params">method, url, options = {}</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">instance</span>({
    method,
    url,
    ...options
  });
};

<span class="hljs-comment">// å¯¼å‡ºå¸¦ç¼“å­˜çš„è¯·æ±‚æ–¹æ³•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> axiosWithCache = {
  <span class="hljs-attr">get</span>: <span class="hljs-function">(<span class="hljs-params">url, options = {}</span>) =&gt;</span> <span class="hljs-title function_">request</span>(<span class="hljs-string">'get'</span>, url, { ...options, <span class="hljs-attr">cache</span>: options.<span class="hljs-property">cache</span> !== <span class="hljs-literal">false</span> }),
  <span class="hljs-attr">post</span>: <span class="hljs-function">(<span class="hljs-params">url, data = {}, options = {}</span>) =&gt;</span> <span class="hljs-title function_">request</span>(<span class="hljs-string">'post'</span>, url, { data, ...options, <span class="hljs-attr">cache</span>: options.<span class="hljs-property">cache</span> }),
  <span class="hljs-attr">put</span>: <span class="hljs-function">(<span class="hljs-params">url, data = {}, options = {}</span>) =&gt;</span> <span class="hljs-title function_">request</span>(<span class="hljs-string">'put'</span>, url, { data, ...options, <span class="hljs-attr">cache</span>: options.<span class="hljs-property">cache</span> }),
  <span class="hljs-attr">delete</span>: <span class="hljs-function">(<span class="hljs-params">url, options = {}</span>) =&gt;</span> <span class="hljs-title function_">request</span>(<span class="hljs-string">'delete'</span>, url, { ...options, <span class="hljs-attr">cache</span>: options.<span class="hljs-property">cache</span> }),
  <span class="hljs-attr">patch</span>: <span class="hljs-function">(<span class="hljs-params">url, data = {}, options = {}</span>) =&gt;</span> <span class="hljs-title function_">request</span>(<span class="hljs-string">'patch'</span>, url, { data, ...options, <span class="hljs-attr">cache</span>: options.<span class="hljs-property">cache</span> }),
  <span class="hljs-comment">// åŸå§‹axioså®ä¾‹ï¼Œç”¨äºä¸éœ€è¦ç¼“å­˜çš„è¯·æ±‚</span>
  instance
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> axiosWithCache;
</code></pre>
<h3 data-id="heading-6">3. Fetch APIè¯·æ±‚åˆå¹¶+ç¼“å­˜ï¼š<code>fetch.js</code></h3>
<p>ä¸ºFetch APIæä¾›ç›¸åŒçš„è¯·æ±‚åˆå¹¶å’Œç¼“å­˜åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { cacheManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/cache'</span>;

<span class="hljs-comment">// ç”¨äºè·Ÿè¸ªæ­£åœ¨è¿›è¡Œçš„fetchè¯·æ±‚</span>
<span class="hljs-keyword">const</span> pendingFetchRequests = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

<span class="hljs-comment">/**
 * å¸¦ç¼“å­˜çš„fetchè¯·æ±‚åŒ…è£…å‡½æ•°
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">url</span> - è¯·æ±‚URL
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} <span class="hljs-variable">options</span> - è¯·æ±‚é€‰é¡¹ï¼ŒåŒ…å«cacheé…ç½®
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise</span>} è¯·æ±‚ç»“æœ
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchWithCache</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">url, options = {}</span>) =&gt; {
  <span class="hljs-keyword">const</span> {
    cache = <span class="hljs-literal">true</span>,
    cacheExpireTime = <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// é»˜è®¤5åˆ†é’Ÿ</span>
    method = <span class="hljs-string">'GET'</span>,
    headers,
    body,
    ...restOptions
  } = options;

  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦ç¼“å­˜</span>
  <span class="hljs-keyword">if</span> (cache) {
    <span class="hljs-comment">// ç”Ÿæˆç¼“å­˜é”®</span>
    <span class="hljs-keyword">const</span> cacheKey = cacheManager.<span class="hljs-title function_">generateKey</span>(
      <span class="hljs-string">`<span class="hljs-subst">${method}</span>_<span class="hljs-subst">${url}</span>`</span>,
      { headers, <span class="hljs-attr">body</span>: body ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(body) : <span class="hljs-literal">undefined</span> }
    );

    <span class="hljs-comment">// å°è¯•è·å–ç¼“å­˜æ•°æ®</span>
    <span class="hljs-keyword">const</span> cachedData = cacheManager.<span class="hljs-title function_">get</span>(cacheKey);
    <span class="hljs-keyword">if</span> (cachedData) {
      <span class="hljs-comment">// å¦‚æœæœ‰ç¼“å­˜ï¼Œç›´æ¥è¿”å›ç¼“å­˜æ•°æ®</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(cachedData), {
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
          <span class="hljs-string">'X-Cache'</span>: <span class="hljs-string">'HIT'</span>
        }
      });
    }

    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰ç›¸åŒçš„è¯·æ±‚æ­£åœ¨è¿›è¡Œ</span>
    <span class="hljs-keyword">if</span> (pendingFetchRequests.<span class="hljs-title function_">has</span>(cacheKey)) {
      <span class="hljs-comment">// å¦‚æœæœ‰ï¼Œè¿”å›æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚çš„Promise</span>
      <span class="hljs-keyword">return</span> pendingFetchRequests.<span class="hljs-title function_">get</span>(cacheKey);
    }

    <span class="hljs-comment">// åˆ›å»ºè¯·æ±‚Promise</span>
    <span class="hljs-keyword">const</span> requestPromise = (<span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// æ‰§è¡Œå®é™…çš„fetchè¯·æ±‚</span>
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, {
          method,
          headers,
          body,
          ...restOptions
        });

        <span class="hljs-comment">// æ£€æŸ¥å“åº”æ˜¯å¦æˆåŠŸ</span>
        <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP error! status: <span class="hljs-subst">${response.status}</span>`</span>);
        }

        <span class="hljs-comment">// è·å–å“åº”æ•°æ®</span>
        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();

        <span class="hljs-comment">// å­˜å‚¨ç¼“å­˜æ•°æ®</span>
        cacheManager.<span class="hljs-title function_">set</span>(cacheKey, data, cacheExpireTime);

        <span class="hljs-comment">// è¿”å›å¸¦ç¼“å­˜æ ‡è®°çš„å“åº”</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data), {
          <span class="hljs-attr">headers</span>: {
            <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
            <span class="hljs-string">'X-Cache'</span>: <span class="hljs-string">'MISS'</span>
          }
        });
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// æ— è®ºè¯·æ±‚æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œéƒ½ä»pendingFetchRequestsä¸­ç§»é™¤</span>
        pendingFetchRequests.<span class="hljs-title function_">delete</span>(cacheKey);
      }
    })();

    <span class="hljs-comment">// å°†è¯·æ±‚Promiseå­˜å‚¨åˆ°pendingFetchRequestsä¸­</span>
    pendingFetchRequests.<span class="hljs-title function_">set</span>(cacheKey, requestPromise);

    <span class="hljs-comment">// è¿”å›è¯·æ±‚Promise</span>
    <span class="hljs-keyword">return</span> requestPromise;
  }

  <span class="hljs-comment">// ä¸éœ€è¦ç¼“å­˜ï¼Œç›´æ¥æ‰§è¡Œfetchè¯·æ±‚</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(url, options);
};

<span class="hljs-comment">/**
 * ç®€åŒ–çš„å¸¦ç¼“å­˜çš„fetch GETè¯·æ±‚
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">url</span> - è¯·æ±‚URL
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} <span class="hljs-variable">options</span> - è¯·æ±‚é€‰é¡¹
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;any&gt;</span>} è¯·æ±‚ç»“æœæ•°æ®
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getWithCache</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">url, options = {}</span>) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchWithCache</span>(url, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
    ...options
  });
  <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>();
};

<span class="hljs-comment">/**
 * ç®€åŒ–çš„å¸¦ç¼“å­˜çš„fetch POSTè¯·æ±‚
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">url</span> - è¯·æ±‚URL
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} <span class="hljs-variable">data</span> - è¯·æ±‚æ•°æ®
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} <span class="hljs-variable">options</span> - è¯·æ±‚é€‰é¡¹
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;any&gt;</span>} è¯·æ±‚ç»“æœæ•°æ®
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">postWithCache</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">url, data = {}, options = {}</span>) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchWithCache</span>(url, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
      ...options.<span class="hljs-property">headers</span>
    },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data),
    ...options
  });
  <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>();
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> fetchWithCache;
</code></pre>
<h3 data-id="heading-7">4. ç»Ÿä¸€APIæœåŠ¡ï¼š<code>index.js</code></h3>
<p>æä¾›ç®€æ´ç»Ÿä¸€çš„APIå…¥å£ï¼Œæ”¯æŒï¼š</p>
<ul>
<li>âœ… æ— ç¼åˆ‡æ¢Axioså’ŒFetch</li>
<li>âœ… ç»Ÿä¸€çš„ç¼“å­˜é…ç½®</li>
<li>âœ… å…¨å±€é…ç½®ç®¡ç†</li>
<li>âœ… ä¾¿æ·çš„ç¼“å­˜æ“ä½œ</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { axiosWithCache } <span class="hljs-keyword">from</span> <span class="hljs-string">'./axios'</span>;
<span class="hljs-keyword">import</span> { fetchWithCache, getWithCache, postWithCache } <span class="hljs-keyword">from</span> <span class="hljs-string">'./fetch'</span>;
<span class="hljs-keyword">import</span> { cacheManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/cache'</span>;

<span class="hljs-comment">/**
 * ç»Ÿä¸€çš„APIæœåŠ¡
 * é›†æˆäº†axioså’Œfetchçš„ç¼“å­˜åŠŸèƒ½
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> apiService = {
  <span class="hljs-comment">// Axioså¸¦ç¼“å­˜çš„è¯·æ±‚æ–¹æ³•</span>
  <span class="hljs-attr">axios</span>: {
    <span class="hljs-attr">get</span>: axiosWithCache.<span class="hljs-property">get</span>,
    <span class="hljs-attr">post</span>: axiosWithCache.<span class="hljs-property">post</span>,
    <span class="hljs-attr">put</span>: axiosWithCache.<span class="hljs-property">put</span>,
    <span class="hljs-attr">delete</span>: axiosWithCache.<span class="hljs-property">delete</span>,
    <span class="hljs-attr">patch</span>: axiosWithCache.<span class="hljs-property">patch</span>,
    <span class="hljs-attr">instance</span>: axiosWithCache.<span class="hljs-property">instance</span>
  },

  <span class="hljs-comment">// Fetchå¸¦ç¼“å­˜çš„è¯·æ±‚æ–¹æ³•</span>
  <span class="hljs-attr">fetch</span>: {
    <span class="hljs-attr">request</span>: fetchWithCache,
    <span class="hljs-attr">get</span>: getWithCache,
    <span class="hljs-attr">post</span>: postWithCache
  },

  <span class="hljs-comment">// ç¼“å­˜ç®¡ç†</span>
  <span class="hljs-attr">cache</span>: {
    <span class="hljs-attr">manager</span>: cacheManager,
    <span class="hljs-attr">clear</span>: <span class="hljs-function">() =&gt;</span> cacheManager.<span class="hljs-title function_">clear</span>(),
    <span class="hljs-attr">clearExpired</span>: <span class="hljs-function">() =&gt;</span> cacheManager.<span class="hljs-title function_">clearExpired</span>(),
    <span class="hljs-attr">delete</span>: <span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> cacheManager.<span class="hljs-title function_">delete</span>(key),
    <span class="hljs-attr">get</span>: <span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> cacheManager.<span class="hljs-title function_">get</span>(key),
    <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">key, data, expireTime</span>) =&gt;</span> cacheManager.<span class="hljs-title function_">set</span>(key, data, expireTime)
  },

  <span class="hljs-comment">/**
   * é…ç½®APIæœåŠ¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} <span class="hljs-variable">options</span> - é…ç½®é€‰é¡¹
   */</span>
  <span class="hljs-attr">configure</span>: <span class="hljs-function">(<span class="hljs-params">options = {}</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">baseURL</span>) {
      axiosWithCache.<span class="hljs-property">instance</span>.<span class="hljs-property">defaults</span>.<span class="hljs-property">baseURL</span> = options.<span class="hljs-property">baseURL</span>;
    }
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">timeout</span>) {
      axiosWithCache.<span class="hljs-property">instance</span>.<span class="hljs-property">defaults</span>.<span class="hljs-property">timeout</span> = options.<span class="hljs-property">timeout</span>;
    }
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">headers</span>) {
      axiosWithCache.<span class="hljs-property">instance</span>.<span class="hljs-property">defaults</span>.<span class="hljs-property">headers</span> = {
        ...axiosWithCache.<span class="hljs-property">instance</span>.<span class="hljs-property">defaults</span>.<span class="hljs-property">headers</span>,
        ...options.<span class="hljs-property">headers</span>
      };
    }
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">defaultCacheTime</span>) {
      cacheManager.<span class="hljs-property">defaultExpireTime</span> = options.<span class="hljs-property">defaultCacheTime</span>;
    }
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">storage</span>) {
      cacheManager.<span class="hljs-property">storage</span> = options.<span class="hljs-property">storage</span>;
    }
  }
};

<span class="hljs-comment">// å¯¼å‡ºå¸¸ç”¨æ–¹æ³•ï¼Œæ–¹ä¾¿ç›´æ¥ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> { axios, fetch, cache } = apiService;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> apiService;
</code></pre>
<h2 data-id="heading-8">ğŸ¯ åº”ç”¨ç¤ºä¾‹ï¼šå¤§å±ç»„ä»¶ä¸­ä½¿ç”¨</h2>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="dashboard"&gt;
    &lt;h2&gt;å¤§å±æ•°æ®å±•ç¤º&lt;/h2&gt;
    &lt;div class="data-grid"&gt;
      &lt;div class="data-card" v-for="item in dataList" :key="item.id"&gt;
        &lt;h3&gt;{{ item.title }}&lt;/h3&gt;
        &lt;div class="value"&gt;{{ item.value }}&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;button @click="refreshData"&gt;åˆ·æ–°æ•°æ®&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted } from 'vue';
import { apiService } from '../api';

const dataList = ref([]);

// è·å–æ•°æ®ï¼ˆè‡ªåŠ¨åº”ç”¨è¯·æ±‚åˆå¹¶+ç¼“å­˜ï¼‰
const fetchData = async () =&gt; {
  try {
    const response = await apiService.axios.get('/api/dashboard/data', {
      cache: true,
      cacheExpireTime: 30 * 1000 // 30ç§’ç¼“å­˜
    });
    dataList.value = response.data;
  } catch (error) {
    console.error('è·å–æ•°æ®å¤±è´¥:', error);
  }
};

// åˆ·æ–°æ•°æ®ï¼ˆåŒæ—¶å‘èµ·å¤šä¸ªç›¸åŒè¯·æ±‚ï¼Œä¼šè¢«åˆå¹¶ï¼‰
const refreshData = async () =&gt; {
  // åŒæ—¶å‘èµ·3ä¸ªç›¸åŒè¯·æ±‚ï¼Œåªä¼šæ‰§è¡Œ1æ¬¡ç½‘ç»œè¯·æ±‚
  await Promise.all([
    fetchData(),
    fetchData(),
    fetchData()
  ]);
};

onMounted(() =&gt; {
  fetchData();
  // å®šæ—¶åˆ·æ–°ï¼ˆæ¯30ç§’ï¼‰
  setInterval(fetchData, 30 * 1000);
});
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-9">ğŸš€ æ€§èƒ½å¯¹æ¯”ï¼šè¯·æ±‚åˆå¹¶+ç¼“å­˜ vs ä¼ ç»Ÿè¯·æ±‚</h2>








































<table><thead><tr><th>åœºæ™¯</th><th>ä¼ ç»Ÿè¯·æ±‚</th><th>è¯·æ±‚åˆå¹¶</th><th>è¯·æ±‚åˆå¹¶+ç¼“å­˜</th><th>æ€§èƒ½æå‡</th></tr></thead><tbody><tr><td>åŒæ—¶å‘èµ·3ä¸ªç›¸åŒè¯·æ±‚</td><td>3æ¬¡è¯·æ±‚</td><td>1æ¬¡è¯·æ±‚</td><td>1æ¬¡è¯·æ±‚</td><td>66.7%</td></tr><tr><td>10ç§’å†…é‡å¤è¯·æ±‚3æ¬¡</td><td>3æ¬¡è¯·æ±‚</td><td>3æ¬¡è¯·æ±‚</td><td>1æ¬¡è¯·æ±‚</td><td>66.7%</td></tr><tr><td>1åˆ†é’Ÿå†…é‡å¤è¯·æ±‚10æ¬¡</td><td>10æ¬¡è¯·æ±‚</td><td>10æ¬¡è¯·æ±‚</td><td>1æ¬¡è¯·æ±‚</td><td>90%</td></tr><tr><td>æ•°æ®åŠ è½½é€Ÿåº¦</td><td>å–å†³äºç½‘ç»œ</td><td>å–å†³äºç½‘ç»œ</td><td>æ¯«ç§’çº§å“åº”</td><td>95%+</td></tr></tbody></table>
<h2 data-id="heading-10">ğŸ’¡ æœ€ä½³å®è·µ</h2>
<ol>
<li>
<p><strong>æ ¹æ®æ•°æ®ç±»å‹è®¾ç½®ç¼“å­˜æ—¶é—´</strong>ï¼š</p>
<ul>
<li>å®æ—¶æ•°æ®ï¼š30ç§’-5åˆ†é’Ÿ</li>
<li>åŠå®æ—¶æ•°æ®ï¼š5-30åˆ†é’Ÿ</li>
<li>é™æ€æ•°æ®ï¼š1å°æ—¶ä»¥ä¸Š</li>
</ul>
</li>
<li>
<p><strong>åˆç†ä½¿ç”¨å¤–éƒ¨å­˜å‚¨</strong>ï¼š</p>
<ul>
<li>æ•æ„Ÿæ•°æ®ï¼šä»…å†…å­˜ç¼“å­˜</li>
<li>éæ•æ„Ÿæ•°æ®ï¼šå¯ä½¿ç”¨localStorage</li>
</ul>
</li>
<li>
<p><strong>ç¼“å­˜é”®ç”Ÿæˆç­–ç•¥</strong>ï¼š</p>
<ul>
<li>åŒ…å«URLã€æ–¹æ³•ã€å‚æ•°</li>
<li>è€ƒè™‘è¯·æ±‚å¤´ï¼ˆå¦‚Authorizationï¼‰</li>
</ul>
</li>
<li>
<p><strong>ç¼“å­˜æ›´æ–°æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>æ•°æ®å˜åŒ–æ—¶ä¸»åŠ¨æ¸…é™¤ç›¸å…³ç¼“å­˜</li>
<li>å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜</li>
</ul>
</li>
</ol>
<p>ä¸Šä¸€ç¯‡åšå®¢ã€Š<a href="https://juejin.cn/post/7577049352839381007" target="_blank" title="https://juejin.cn/post/7577049352839381007">å¤§å±æ€§èƒ½ä¼˜åŒ–é»‘ç§‘æŠ€ï¼šVue 3 ä¸­å®ç°è¯·æ±‚åˆå¹¶</a>ã€‹è§£å†³äº†<strong>åŒæ—¶å‘èµ·çš„ç›¸åŒè¯·æ±‚</strong>é—®é¢˜ï¼Œè€Œæœ¬æ–‡åœ¨æ­¤åŸºç¡€ä¸Šï¼Œé€šè¿‡å¼•å…¥<strong>æ™ºèƒ½ç¼“å­˜</strong>ï¼Œè¿›ä¸€æ­¥è§£å†³äº†<strong>çŸ­æ—¶é—´å†…é‡å¤å‘èµ·çš„ç›¸åŒè¯·æ±‚</strong>é—®é¢˜ï¼Œå½¢æˆäº†å®Œæ•´çš„å¤§å±æ€§èƒ½ä¼˜åŒ–è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-11">ğŸ‰ æ€»ç»“</h2>
<p>é€šè¿‡ç»“åˆ<strong>è¯·æ±‚åˆå¹¶</strong>å’Œ<strong>æ™ºèƒ½ç¼“å­˜</strong>ï¼Œæˆ‘ä»¬æ‰“é€ äº†å¤§å±åº”ç”¨æ€§èƒ½ä¼˜åŒ–çš„ç»ˆæè§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li><strong>å‡å°‘ç½‘ç»œè¯·æ±‚</strong>ï¼šåŒæ—¶è¯·æ±‚åˆå¹¶ï¼Œé‡å¤è¯·æ±‚ç¼“å­˜ï¼Œå‡å°‘95%ä»¥ä¸Šçš„ç½‘ç»œè¯·æ±‚</li>
<li><strong>æå‡å“åº”é€Ÿåº¦</strong>ï¼šç¼“å­˜å‘½ä¸­æ—¶æ¯«ç§’çº§å“åº”ï¼Œå¤§å¹…æå‡ç”¨æˆ·ä½“éªŒ</li>
<li><strong>é™ä½æœåŠ¡å™¨å‹åŠ›</strong>ï¼šå‡å°‘æœåŠ¡å™¨å¤„ç†çš„è¯·æ±‚æ•°é‡ï¼Œæé«˜ç³»ç»Ÿç¨³å®šæ€§</li>
<li><strong>ç¡®ä¿æ•°æ®ä¸€è‡´æ€§</strong>ï¼šæ‰€æœ‰ç»„ä»¶ä½¿ç”¨ç›¸åŒçš„æ•°æ®ï¼Œé¿å…æ•°æ®å†²çª</li>
<li><strong>çµæ´»é…ç½®</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰ç¼“å­˜æ—¶é—´ã€å­˜å‚¨æ–¹å¼ç­‰ï¼Œé€‚åº”ä¸åŒåœºæ™¯</li>
</ol>
<p>è¿™å¥—æ–¹æ¡ˆå·²ç»åœ¨å¤šä¸ªç”Ÿäº§å¤§å±é¡¹ç›®ä¸­éªŒè¯ï¼Œæ€§èƒ½æå‡æ•ˆæœæ˜¾è‘—ã€‚æ— è®ºæ˜¯å·¥ä¸šç›‘æ§å¤§å±ã€åŸå¸‚ç®¡ç†å¤§å±è¿˜æ˜¯é‡‘èç›‘æ§å¤§å±ï¼Œéƒ½èƒ½ä»ä¸­å—ç›Šï¼</p>
<blockquote>
<p>å¤§å±æ€§èƒ½ä¼˜åŒ–æ²¡æœ‰ç»ˆç‚¹ï¼Œåªæœ‰ä¸æ–­çš„æ¢ç´¢å’Œå®è·µã€‚è®©æˆ‘ä»¬ä¸€èµ·æ‰“é€ æ›´å¿«ã€æ›´æµç•…çš„å¤§å±åº”ç”¨ï¼ğŸš€</p>
</blockquote>
<hr/>
<p><strong>ç³»åˆ—æ–‡ç« </strong>ï¼š</p>
<ul>
<li><a href="https://juejin.cn/post/7577049352839381007" target="_blank" title="https://juejin.cn/post/7577049352839381007">å¤§å±æ€§èƒ½ä¼˜åŒ–é»‘ç§‘æŠ€ï¼šVue 3 ä¸­å®ç°è¯·æ±‚åˆå¹¶ï¼Œè®©ä½ çš„å¤§å±é£èµ·æ¥ï¼</a></li>
</ul>
<p><strong>æŠ€æœ¯äº¤æµ</strong>ï¼šæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºä½ çš„å¤§å±æ€§èƒ½ä¼˜åŒ–ç»éªŒå’Œé—®é¢˜ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ”¶åˆ°å­—èŠ‚çš„çŸ­ä¿¡ï¼šTrae SOLOä¸Šçº¿äº†ï¼Ÿå°å°é²œï¼Œæµ…æµ…åšä¸ªéŸ³ä¹æ’­æ”¾å™¨]]></title>    <link>https://juejin.cn/post/7577307409854382095</link>    <guid>https://juejin.cn/post/7577307409854382095</guid>    <pubDate>2025-11-28T04:13:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577307409854382095" data-draft-id="7577256255083839497" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ”¶åˆ°å­—èŠ‚çš„çŸ­ä¿¡ï¼šTrae SOLOä¸Šçº¿äº†ï¼Ÿå°å°é²œï¼Œæµ…æµ…åšä¸ªéŸ³ä¹æ’­æ”¾å™¨"/> <meta itemprop="keywords" content="Trae,å‰ç«¯,HTML"/> <meta itemprop="datePublished" content="2025-11-28T04:13:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£æ­¢ä½•å®‰å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/2517239724512420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ”¶åˆ°å­—èŠ‚çš„çŸ­ä¿¡ï¼šTrae SOLOä¸Šçº¿äº†ï¼Ÿå°å°é²œï¼Œæµ…æµ…åšä¸ªéŸ³ä¹æ’­æ”¾å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517239724512420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£æ­¢ä½•å®‰å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T04:13:42.000Z" title="Fri Nov 28 2025 04:13:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ã€å­—èŠ‚è·³åŠ¨ã€‘äº²çˆ±çš„TRAEå‹ï¼Œæ„Ÿè°¢æ‚¨çš„è€å¿ƒç­‰å¾…ã€‚TRAEä¸­å›½ç‰ˆç°å·²æ­£å¼ä¸Šçº¿SOLOæ¨¡å¼ï¼›è¯·å°†TRAEä¸­å›½ç‰ˆå‡çº§è‡³æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶ä½¿ç”¨æ‚¨å¡«å†™ä¸­å›½ç‰ˆå®˜ç½‘waitlistæ‰€ç”¨çš„æ‰‹æœºå·ç™»å½•ï¼Œä¾¿å¯ç«‹å³å…è´¹äº«å—SOLOå¸¦æ¥çš„å¼€å‘ä½“éªŒï¼</p>
<p>å½“æ—¶è¿˜åœ¨æƒ³æ˜¯è°å“ªä¸ªåŒå­¦çš„æ¶ä½œå‰§ï¼Œç‚¹å¼€ä¸€çœ‹çœŸçš„æ˜¯å®˜æ–¹ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1490d07d702f443ebbd2f3ed4254abdb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764908022&amp;x-signature=wWK7RYxxsiiy80yzO2TpzRQS8TE%3D" alt="1ab4c6af351dc2c54cece1748a8aad4d.jpg" loading="lazy"/></p>
<p>å½“æ—¶æ­£å¥½åœ¨å¬<strong>å‘¨æ°ä¼¦</strong>çš„<strong>çˆ±åœ¨è¥¿å…ƒå‰</strong>ï¼Œè¿™æ¶ˆæ¯ç›´æ¥æŠŠæˆ‘çš„æ‘¸é±¼æ—¶é—´æ‹æˆäº† â€œæµ…æµ…æ•´æ´»â€ æ—¶é—´ï¼šä¸å¦‚ç”¨ Trae SOLO æ­ä¸ªéŸ³ä¹æ’­æ”¾å™¨ï¼Ÿæ¯•ç«Ÿä¸»æ‰“çš„ â€œå…¨æµç¨‹æ‰“é€šâ€ï¼Œæ­£å¥½èƒ½è¯•è¯•ä»æ¶æ„åˆ°éƒ¨ç½²åˆ°åº•æœ‰å¤šä¸æ»‘ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ç”Ÿæˆå®Œæ•´æ¡†æ¶</h3>
<p>æˆ‘å…ˆå†™å¥½äº†å¤§è‡´çš„éŸ³ä¹æ’­æ”¾å™¨æ¡†æ¶ï¼Œå½“ç„¶æ˜¯éå¸¸ç®€æ˜“çš„ï¼Œå°±æ˜¯ç®€å•çš„diväº†ä¸€å †ï¼Œè§„åˆ’å¥½äº†å¸ƒå±€ã€‚</p>
<p>ç±»ä¼¼è¿™æ ·ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbae8697582648ab869c7ad1a9e0f527~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764908022&amp;x-signature=gzffGzOqyA97Lkb4u7u44C6rDLA%3D" alt="image.png" loading="lazy"/></p>
<p>è®©SOLOå¸®æˆ‘å®Œå–„æ•´ä¸ªå¸ƒå±€ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;body&gt;
    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"music"</span>&gt;
        &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"head"</span>&gt;
            &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"back"</span>&gt;
                &lt;i <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-zuojiantou"</span>&gt;&lt;/i&gt;
            &lt;/div&gt;
            &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;
                &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"name"</span>&gt;çˆ±åœ¨è¥¿å…ƒå‰&lt;/div&gt;
                &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"author"</span>&gt;å‘¨æ°ä¼¦&lt;/div&gt;
            &lt;/div&gt;
            &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"more"</span>&gt;
                &lt;i <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-sandian"</span>&gt;&lt;/i&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"main"</span>&gt;
            &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"logo"</span>&gt;
                &lt;img <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img2.baidu.com/it/u=1469800619,2890014870&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=500"</span> alt=<span class="hljs-string">""</span>&gt;
            &lt;/div&gt;
            &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"songs"</span>&gt;
                &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"song-info"</span>&gt;
                    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"song-name"</span>&gt;çˆ±åœ¨è¥¿å…ƒå‰&lt;/div&gt;
                    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"song-author"</span>&gt;å‘¨æ°ä¼¦ - èŒƒç‰¹è¥¿&lt;/div&gt;
                    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"lyric"</span>&gt;æˆ‘ç»™ä½ çš„çˆ±å†™åœ¨è¥¿å…ƒå‰&lt;/div&gt;
                &lt;/div&gt;
                &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"progress"</span>&gt;
                    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"time current"</span>&gt;<span class="hljs-number">1</span>:<span class="hljs-number">17</span>&lt;/div&gt;
                    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"progress-bar"</span>&gt;
                        &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"progress-inner"</span>&gt;&lt;/div&gt;
                        &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"progress-dot"</span>&gt;&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"time total"</span>&gt;<span class="hljs-number">3</span>:<span class="hljs-number">54</span>&lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"control"</span>&gt;
                &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"prev"</span>&gt;
                    &lt;i <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-shangyishou"</span>&gt;&lt;/i&gt;
                &lt;/div&gt;
                &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"play"</span>&gt;
                    &lt;i <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-bofang"</span>&gt;&lt;/i&gt;
                &lt;/div&gt;
                &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"next"</span>&gt;
                    &lt;i <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-xiayishou"</span>&gt;&lt;/i&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"foot"</span>&gt;
            &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"foot-left"</span>&gt;
                &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"foot-logo"</span>&gt;
                    &lt;img <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img2.baidu.com/it/u=1469800619,2890014870&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=500"</span> alt=<span class="hljs-string">""</span>&gt;
                &lt;/div&gt;
                &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"foot-info"</span>&gt;
                    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"foot-song-name"</span>&gt;çˆ±åœ¨è¥¿å…ƒå‰&lt;/div&gt;
                    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"foot-song-author"</span>&gt;å‘¨æ°ä¼¦&lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"foot-right"</span>&gt;
                &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"foot-heart"</span>&gt;
                    &lt;i <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-aixin_shixin"</span>&gt;&lt;/i&gt;
                &lt;/div&gt;
                &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"foot-menu"</span>&gt;
                    &lt;i <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-caidan"</span>&gt;&lt;/i&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
</code></pre>
<p>å½“ç„¶ï¼Œå›¾æ ‡æ˜¯åœ¨<strong>iconfont</strong>ä¸Šé¢æ‰¾çš„ã€‚10ç§’å°±ç»™æˆ‘ç”Ÿæˆäº†æˆ‘æƒ³è¦çš„å®Œæ•´æ¡†æ¶ï¼Œè€Œä¸”è‡ªåŠ¨å¸®æˆ‘å¡«å……äº†æ‰€æœ‰ä»£ç ï¼Œè¿™...å·²ç»æ„Ÿå—åˆ°å¼ºå¤§äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95ae908246cd49f9b570497a975e8a3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764908022&amp;x-signature=0M5Mi56UrS%2FzIFfe9E5Zg87soXw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">äºŒã€å¡«å……cssæ–‡ä»¶</h3>
<p>è¿™ä¸ªéƒ¨åˆ†ç®€ç›´æ²¡åŠ¨è„‘å­ï¼Œè‡ªå·±å†™äº†æœ€ä¸Šé¢çš„éƒ¨åˆ†ï¼Œç„¶åä¸­é—´çš„ä¸‹é¢çš„éƒ¨åˆ†ç›´æ¥å¸®æˆ‘ç”Ÿæˆå¥½äº†...</p>
<pre><code class="hljs language-css" lang="css">*{
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
}
<span class="hljs-selector-tag">body</span>, <span class="hljs-selector-tag">html</span>{
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
}
<span class="hljs-selector-class">.music</span>{
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2A2A2A</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
}
<span class="hljs-selector-class">.head</span>{
    <span class="hljs-attribute">height</span>: <span class="hljs-number">76px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#161616</span>;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">position</span>: relative;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: space-between;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">16px</span>;
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/facee9a0307e4fd28981b372dfc4625d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764908022&amp;x-signature=q9Jev%2BszdRipJhTiBRS1eIckTxs%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css">*{
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
}
<span class="hljs-selector-tag">body</span>, <span class="hljs-selector-tag">html</span>{
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
}
<span class="hljs-selector-class">.music</span>{
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2A2A2A</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
}
<span class="hljs-selector-class">.head</span>{
    <span class="hljs-attribute">height</span>: <span class="hljs-number">76px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#161616</span>;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">position</span>: relative;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: space-between;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">16px</span>;
}
<span class="hljs-selector-class">.back</span>, <span class="hljs-selector-class">.more</span>{
    <span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0.05</span>);
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-items</span>: center;
}
<span class="hljs-selector-class">.title</span> {
    <span class="hljs-attribute">text-align</span>: center;
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
}
<span class="hljs-selector-class">.name</span> {
    <span class="hljs-attribute">font-family</span>: Roboto, Roboto;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#FFFFFF</span>;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">28px</span>;
}
<span class="hljs-selector-class">.author</span> {
    <span class="hljs-attribute">font-family</span>: Roboto, Roboto;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.8</span>);
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">20px</span>;
}
<span class="hljs-selector-class">.main</span>{
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">32px</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">overflow</span>: hidden;
}
<span class="hljs-selector-class">.logo</span>{
    <span class="hljs-attribute">width</span>: <span class="hljs-number">240px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">240px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">24px</span>;
    <span class="hljs-attribute">overflow</span>: hidden;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: center;
}
<span class="hljs-selector-class">.logo</span> <span class="hljs-selector-tag">img</span>{
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
}
<span class="hljs-selector-class">.songs</span> {
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">400px</span>;
}
<span class="hljs-selector-class">.song-info</span> {
    <span class="hljs-attribute">text-align</span>: center;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
}
<span class="hljs-selector-class">.song-name</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#FFFFFF</span>;
}
<span class="hljs-selector-class">.song-author</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.6</span>);
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">12px</span>;
}

<span class="hljs-selector-class">.lyric</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.8</span>);
    <span class="hljs-attribute">font-style</span>: italic;
}
<span class="hljs-selector-class">.progress</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: space-between;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
}
<span class="hljs-selector-class">.time</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.6</span>);
    <span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">text-align</span>: center;
}
<span class="hljs-selector-class">.progress-bar</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">4px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">position</span>: relative;
    <span class="hljs-attribute">cursor</span>: pointer;
}
<span class="hljs-selector-class">.progress-inner</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">background-color</span>: white;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;
}
<span class="hljs-selector-class">.progress-dot</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">background-color</span>: white;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);
    <span class="hljs-attribute">cursor</span>: pointer;
}
<span class="hljs-selector-class">.control</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;
}
<span class="hljs-selector-class">.prev</span>, <span class="hljs-selector-class">.next</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">48px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">48px</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
}
<span class="hljs-selector-class">.play</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">56px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">56px</span>;
    <span class="hljs-attribute">background-color</span>: white;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#161616</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
}
<span class="hljs-selector-class">.iconfont</span> {
    <span class="hljs-attribute">font-size</span>: inherit;
}

<span class="hljs-selector-class">.foot</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#161616</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: space-between;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.1</span>);
}

<span class="hljs-selector-class">.foot-left</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">12px</span>;
}

<span class="hljs-selector-class">.foot-logo</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">56px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">56px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.foot-logo</span> <span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">object-fit</span>: cover;
}

<span class="hljs-selector-class">.foot-info</span> {
    <span class="hljs-attribute">color</span>: white;
}

<span class="hljs-selector-class">.foot-song-name</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#FFFFFF</span>;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">4px</span>;
}

<span class="hljs-selector-class">.foot-song-author</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.6</span>);
}

<span class="hljs-selector-class">.foot-right</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">24px</span>;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.foot-heart</span>, <span class="hljs-selector-class">.foot-menu</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-items</span>: center;
}
</code></pre>
<p>åˆ°è¿™é‡Œå‡ ä¹å·²ç»å‡ºæˆæœäº†ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc5629d9f68540b692ffcfa1ed4f4d82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764908022&amp;x-signature=btQU8oL69gc0kG%2FVHQbEaRdzwrI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">ä¸‰ã€æœ€åç¥ä¹‹ä¸€æ‰‹(å®Œå–„é”™è¯¯)</h3>
<p>æˆ‘å‘ç°ä¸‹é¢çš„é‚£ä¸€æ è¢«æ’‘ä¸‹å»äº†ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d8868aeb3744125a5098a5277778e22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764908022&amp;x-signature=iIQ3eHQBVjX%2FLqve6%2BKwEX2qF%2F4%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ ·ä¸Šé¢å°±çœ‹ä¸åˆ°äº†ï¼Œäºæ˜¯ç»§ç»­SOLOï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/500a4d8f27c84700ae51c38e84f68eac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764908022&amp;x-signature=%2FLTLWUcZ1MzR6q0wrHTUxX%2B%2FVIs%3D" alt="image.png" loading="lazy"/></p>
<p>SOLOä¸ä½†å¸®ä½ å®Œå–„ä»£ç ï¼Œè¿˜è‡ªåŠ¨å¸®ä½ å¢æ·»å±æ€§ï¼Œè®©å¸ƒå±€æ›´åŠ å®Œå–„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06e0c7d7572444dda8c09db35e426fc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764908022&amp;x-signature=IJiMVCu9GAkVvQc30%2FyetdwKmCg%3D" alt="image.png" loading="lazy"/></p>
<p>çœ‹çœ‹æˆæœ(ç”¨iPhone6è§†å›¾)ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0eb4b4b59dfc41ac9555640c163024ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764908022&amp;x-signature=Lirvd0r2QWwF9hZjp0O5dbergLg%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸€æ®µä»£ç æ•²ä¸‹æ¥ï¼Œå‘ç°è‡ªå·±åªæ„å»ºäº†ä¸€ä¸ªæ¡†æ¶å’Œæƒ³æ³•ï¼Œç¨‹åºå‘˜ç¡®å®å·²ç»ç¦»ä¸å¼€AIäº†...  å½“ç„¶å¹¶ä¸æ˜¯è¯´ç¨‹åºå‘˜ä¼šè¢«å–ä»£ï¼Œä½†æ˜¯AIå¤§æ¨¡å‹å¾ˆå¯èƒ½æ˜¯æœªæ¥çš„å¤§æ–¹å‘ã€‚</p>
<h2 data-id="heading-4">ç»“è¯­</h2>
<p>å½“æˆ‘ä¸åˆ°ä¸€èŠ‚è¯¾çš„æ—¶é—´åšå®Œè¿™ä¸ªéŸ³ä¹æ’­æ”¾å™¨ï¼Œæˆ‘æ‰ç®—æ‘¸é€ Trae SOLO çš„ â€œçœå¿ƒâ€â€”â€” ä» SOLO coder è‡ªåŠ¨ç”Ÿæˆçš„æ¥å£æ–‡æ¡£ï¼Œåˆ° DiffView å¸®æˆ‘ç§’ä¿®çš„ä»£ç å…¼å®¹é—®é¢˜ï¼Œç”šè‡³éƒ¨ç½²æ—¶ä¸€é”®æ‹‰èµ·çš„æœåŠ¡å®¹å™¨ï¼Œéƒ½æŠŠ AI å¼€å‘é‡Œçš„ â€œè„æ´»ç´¯æ´»â€ å•ƒäº†ä¸ªå¹²å‡€ã€‚è¦æ˜¯ä½ ä¹Ÿæƒ³æ‹¿å®ƒç»ƒæ‰‹ï¼Œå»ºè®®ä» â€œå°å·¥å…· + å¼ºæµç¨‹â€ çš„åœºæ™¯åˆ‡å…¥ï¼Œä¿å‡†èƒ½ get åˆ°å®ƒçš„é¦™ã€‚</p>
<blockquote>
<p>ç¬¬ä¸€æ¬¡ç”¨SOLOå†™ç½‘é¡µï¼Œæ‰€ä»¥å¾ˆå¤šéƒ½ä¸æ‡‚ï¼Œä½†æ˜¯SOLOæ¯æ¬¡éƒ½èƒ½getåˆ°æˆ‘çš„ç‚¹ã€‚å¯èƒ½ç»“æœæ²¡æœ‰ç¬¦åˆæˆ‘çš„è¦æ±‚ï¼Œä½†æ˜¯ä½ SOLOï¼Œå®ƒé©¬ä¸Šåˆå¸®ä½ å®Œå–„äº†ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ SOLO Coder æ­å»º 3D æœºå™¨äººé¡¹ç›®]]></title>    <link>https://juejin.cn/post/7577294037717794850</link>    <guid>https://juejin.cn/post/7577294037717794850</guid>    <pubDate>2025-11-28T05:41:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577294037717794850" data-draft-id="7577307409854660623" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ SOLO Coder æ­å»º 3D æœºå™¨äººé¡¹ç›®"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-28T05:41:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TRAE_ai"/> <meta itemprop="url" content="https://juejin.cn/user/3048259110571032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ SOLO Coder æ­å»º 3D æœºå™¨äººé¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3048259110571032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TRAE_ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T05:41:56.000Z" title="Fri Nov 28 2025 05:41:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6356d728ecae484d9267c6fcc80016fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=qQsySi6pvBLY6f7yv4%2F58R7nxoo%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>æœ¬æ–‡ä½œè€…ï¼šèŒ‰å·ï¼ŒTRAE å¼€å‘è€…ç”¨æˆ·</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2634f6c0f4544958ea784429882b036~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=ckuElhBRYAXe3JSKQY%2BNEn9sFdc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>èƒŒæ™¯</strong></h2>
<p>åšä¸€ä¸ª <strong>è™šæ‹Ÿæœºå™¨äºº</strong> é¡¹ç›®ï¼Œé€šè¿‡ <strong>æ§åˆ¶é¢æ¿</strong> æ§åˆ¶æœºå™¨äººåœ¨è™šæ‹Ÿç¯å¢ƒè¿è¡Œã€‚</p>
<p>ä» threejs ä¸Šæ‰¾äº†ä¸€ä¸ªç°æˆçš„ js ä»£ç çš„æœºå™¨äººï¼Œè®¡åˆ’æŠŠå®ƒç§»æ¤åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼Œå¹¶æ·»åŠ äº¤äº’æ§åˆ¶åŠŸèƒ½ã€‚</p>
<p>å‚è€ƒç¤ºä¾‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fthreejs.org%2Fexamples%2F%23webgl_geometry_terrain_raycast" target="_blank" title="https://threejs.org/examples/#webgl_geometry_terrain_raycast" ref="nofollow noopener noreferrer">threejs.org/examples/#wâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6c3d574104f42f0bfa3d5169739bf1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=XXfAYFxTAcJ%2BeTPhZsSDf4lq%2BQI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c55ba6660214fcea7ce4ff7dd8df289~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=A20m8mPo02y5B2rGu5%2BuHWD6%2F9M%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>é¡¹ç›®è®¡åˆ’</strong></h2>
<ul>
<li>
<p>ç§»æ¤ç¤ºä¾‹ä¸­çš„æœºå™¨äººï¼Œæ”¯æŒå„ç§åŠ¨ä½œçŠ¶æ€</p>
</li>
<li>
<p>åˆ¶ä½œä¸€ä¸ªç‰©ç†ç¯å¢ƒï¼Œå¯ä»¥è®©æœºå™¨äººåœ¨è¿™ä¸ªç¯å¢ƒä¸­è¿è¡Œ ï¼ˆåƒé‡‘å¸ï¼Œèº²é¿éšœç¢ç‰©ï¼‰</p>
</li>
</ul>
<p><strong>ä½¿ç”¨ TRAE çš„åŠŸèƒ½ï¼š</strong></p>
<ul>
<li>
<p>SOLO Coder</p>
</li>
<li>
<p>SOLO Coder Plan</p>
</li>
<li>
<p>æç¤ºè¯ä¼˜åŒ–</p>
</li>
</ul>
<h3 data-id="heading-2"><strong>1 æœºå™¨äººç§»æ¤ + è™šæ‹Ÿç¯å¢ƒ å®ç°</strong></h3>
<p>å†™ä¸€ä¸ªæç¤ºè¯ï¼Œè®© SOLO å®Œæˆç§»æ¤ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œæœºå™¨äººå¯ä»¥åœ¨é‡Œé¢è¡ŒåŠ¨</p>
<h4 data-id="heading-3"><strong>ä¼˜åŒ–å‰</strong></h4>
<pre><code class="hljs language-ruby" lang="ruby">ç°åœ¨éœ€è¦å¼€å‘ä¸€ä¸ªthreejs çš„ vite react é¡¹ç›®ã€‚ ä½ éœ€è¦å…ˆç§»æ¤<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/threejs.org/examples</span><span class="hljs-regexp">/#webgl_geometry_terrain_raycast ï¼š ä¸­çš„ æœºå™¨äººï¼Œå®ƒçš„å‚è€ƒä»£ç https:/</span><span class="hljs-regexp">/github.com/mrdoob</span><span class="hljs-regexp">/three.js/blob</span><span class="hljs-regexp">/dev/examples</span><span class="hljs-regexp">/webgl_animation_skinning_morph.html
è¿™ä¸ªæœºå™¨äººéœ€è¦æ”¯æŒdemo ä¸­çš„ çŠ¶æ€ï¼ˆstatesï¼‰å’Œ emotes ç„¶åï¼Œä½ éœ€è¦è®¾è®¡ä¸€ä¸ªgeometry åœ°ç†ç¯å¢ƒï¼Œè®©ç”¨æˆ·å¯ä»¥æ§åˆ¶ æœºå™¨äººè¿›è¡Œ states ä¸­çš„ä¸åŒçŠ¶æ€ï¼Œæ¯”å¦‚è·‘ã€è·³èˆç­‰ç­‰
</span></code></pre>
<h4 data-id="heading-4"><strong>ä¼˜åŒ–å ï¼ˆè¾“å…¥æç¤ºè¯åï¼ŒæŒ‰ä¸‹å›¾çš„ã€æ˜Ÿæ˜Ÿã€‘æŒ‰é’®å³å¯ä¼˜åŒ–ï¼‰ã€‚</strong></h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a519349feeb465ca7ff1e733446901c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=00ryxihSXSfqOMPninlQwj1WJbk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7b4a894516e44d689201bf027238de7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=nnGALLRQfCBuK%2F6df59lCJqMuV8%3D" alt="" loading="lazy"/></p>
<p><strong>ä¼˜åŒ–åæç¤ºè¯</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">å¼€å‘ä¸€ä¸ªåŸºäºThree.jsçš„Vite Reacté¡¹ç›®ï¼Œéœ€è¦å®Œæˆä»¥ä¸‹å…·ä½“ä»»åŠ¡ï¼š

<span class="hljs-bullet">1.</span> æœºå™¨äººæ¨¡å‹ç§»æ¤ï¼š
<span class="hljs-bullet">   -</span> ä»ä¸­æå–æœºå™¨äººæ¨¡å‹åŠå…¶åŠ¨ç”»ç³»ç»Ÿ
<span class="hljs-bullet">   -</span> å‚è€ƒä¸­çš„å®ç°ä»£ç è¿›è¡Œç§»æ¤
<span class="hljs-bullet">   -</span> ç¡®ä¿å®Œæ•´ä¿ç•™æœºå™¨äººæ‰€æœ‰çš„statesçŠ¶æ€å’Œemotesè¡¨æƒ…åŠŸèƒ½

<span class="hljs-bullet">2.</span> åœ°ç†ç¯å¢ƒè®¾è®¡ï¼š
<span class="hljs-bullet">   -</span> åˆ›å»ºé€‚åˆæœºå™¨äººæ´»åŠ¨çš„3Då‡ ä½•ç¯å¢ƒ
<span class="hljs-bullet">   -</span> å®ç°åœ°å½¢ç¢°æ’æ£€æµ‹å’Œç‰©ç†äº¤äº’
<span class="hljs-bullet">   -</span> è®¾è®¡åˆç†çš„ç©ºé—´å¸ƒå±€ä»¥æ”¯æŒå„ç§åŠ¨ä½œå±•ç¤º

<span class="hljs-bullet">3.</span> äº¤äº’æ§åˆ¶ç³»ç»Ÿï¼š
<span class="hljs-bullet">   -</span> å¼€å‘ç”¨æˆ·ç•Œé¢æ§åˆ¶é¢æ¿
<span class="hljs-bullet">   -</span> å®ç°çŠ¶æ€åˆ‡æ¢åŠŸèƒ½ï¼ˆè·‘ã€è·³èˆç­‰é¢„è®¾åŠ¨ä½œï¼‰
<span class="hljs-bullet">   -</span> æ·»åŠ æµç•…çš„åŠ¨ç”»è¿‡æ¸¡æ•ˆæœ
<span class="hljs-bullet">   -</span> ç¡®ä¿ç§»åŠ¨è®¾å¤‡å…¼å®¹æ€§

<span class="hljs-bullet">4.</span> æŠ€æœ¯è¦æ±‚ï¼š
<span class="hljs-bullet">   -</span> ä½¿ç”¨Viteæ„å»ºå·¥å…·é…ç½®Three.js+Reactç¯å¢ƒ
<span class="hljs-bullet">   -</span> ä¼˜åŒ–æ¨¡å‹åŠ è½½æ€§èƒ½
<span class="hljs-bullet">   -</span> å®ç°å“åº”å¼è®¾è®¡é€‚é…ä¸åŒå±å¹•å°ºå¯¸
<span class="hljs-bullet">   -</span> æ·»åŠ å¿…è¦çš„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€æŒ‡ç¤º

<span class="hljs-bullet">5.</span> äº¤ä»˜æ ‡å‡†ï¼š
<span class="hljs-bullet">   -</span> å®Œæ•´å¯è¿è¡Œçš„æ¼”ç¤ºé¡¹ç›®
<span class="hljs-bullet">   -</span> æ‰€æœ‰æºä»£ç å’Œèµ„æºæ–‡ä»¶
<span class="hljs-bullet">   -</span> é¡¹ç›®æ–‡æ¡£è¯´æ˜è¿è¡Œå’Œæ„å»ºæ–¹æ³•
<span class="hljs-bullet">   -</span> æ€§èƒ½ä¼˜åŒ–æŠ¥å‘Š
</code></pre>
<p>Solo Coder ç„¶åç»™å‡ºäº†è¯¦ç»†çš„å¼€å‘è®¡åˆ’å’Œä»»åŠ¡åˆ†è§£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d73bb26407794ec7b985dca5245c402d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=R%2BAlK3elpSywPPMKC6ss4V6%2BsNk%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-5"><strong>ç§»æ¤æœºå™¨äººè¡ŒåŠ¨ï¼šä¸€æ¬¡è¿‡ âœ…</strong></h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96a3c7d0c45c4ebcb45ba32e0d815757~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=lGnyXHhnA3TH5oHou1YpQUtjAPw%3D" alt="" loading="lazy"/></p>
<p><strong>ä»£ç è§„æ¨¡ï¼š14 ä¸ªæ–‡ä»¶ï¼Œ452 è¡Œä»£ç ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a68ebfb7d7174e9e959830d1181869d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=VgeClLKnHbPAz480gSv67I%2FvuDM%3D" alt="" loading="lazy"/></p>
<p><strong>åŠŸèƒ½çŠ¶æ€ï¼š å„é¡¹åŠŸèƒ½åŸºæœ¬ OKï¼Œä¸€æ¬¡é€šè¿‡ï¼</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5323122064584fe79168c7a13db6e818~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=pDf1SoC8czUEV1vTYscpMS82V1c%3D" alt="" loading="lazy"/></p>
<p><strong>æ•ˆæœæ¼”ç¤º</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f814fab0f9e34ee8b1f8edcd92890b19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=wpaOAR0XBfwT1RhrgP3vDkxLFY4%3D" alt="three3-bot-1.gif" loading="lazy"/></p>
<h3 data-id="heading-6"><strong>2 æ§åˆ¶é¢æ¿å’Œç¯å¢ƒä¼˜åŒ–</strong></h3>
<h4 data-id="heading-7"><strong>ä¼˜åŒ–å‰æç¤ºè¯</strong></h4>
<p>æœºå™¨äººä¸»é¡µä¸­ï¼Œå½“ç”¨æˆ·ç‚¹å‡»é¼ æ ‡å·¦é”®ï¼Œç§»åŠ¨é¼ æ ‡æ—¶ï¼Œåº”è¯¥å¯ä»¥ç§»åŠ¨è§†è§’ï¼Œä»ä¸åŒè§’åº¦è§‚å¯Ÿæœºå™¨äººï¼Œå½“ä½¿ç”¨é¼ æ ‡æ»šè½®æ—¶ï¼Œåº”è¯¥æ‰©å¤§æˆ–è€…ç¼©æ”¾è§†è§’ã€‚ æœºå™¨äººéœ€è¦æ”¯æŒ wsad è¿›è¡Œå‰è¿›åé€€ï¼Œå·¦è½¬ï¼Œå³è½¬ã€‚ï¼ˆæ³¨æ„ï¼Œå·¦è½¬ã€å³è½¬æ˜¯è½¬èº«ï¼Œè°ƒæ•´æœºå™¨äººçš„æ–¹å‘ï¼‰</p>
<h4 data-id="heading-8"><strong>ä¼˜åŒ–å</strong></h4>
<pre><code class="hljs language-markdown" lang="markdown">åœ¨æœºå™¨äººä¸»é¡µçš„3Däº¤äº’åœºæ™¯ä¸­ï¼Œå®ç°ä»¥ä¸‹å®Œæ•´çš„è§†è§’æ§åˆ¶åŠŸèƒ½ï¼š

<span class="hljs-bullet">1.</span> é¼ æ ‡æ§åˆ¶è§†è§’ï¼š
<span class="hljs-bullet">   -</span> å·¦é”®æ‹–åŠ¨æ§åˆ¶ï¼šå½“ç”¨æˆ·æŒ‰ä½é¼ æ ‡å·¦é”®å¹¶ç§»åŠ¨æ—¶ï¼Œæ‘„åƒæœºåº”å›´ç»•æœºå™¨äººè¿›è¡Œè½¨é“æ—‹è½¬ï¼ˆOrbit Controlï¼‰ï¼Œä»ä¸åŒè§’åº¦è§‚å¯Ÿæœºå™¨äººæ¨¡å‹
<span class="hljs-bullet">   -</span> æ»šè½®ç¼©æ”¾æ§åˆ¶ï¼šä½¿ç”¨é¼ æ ‡æ»šè½®æ—¶ï¼Œåº”å¹³æ»‘åœ°æ”¾å¤§æˆ–ç¼©å°è§†è§’ï¼Œè®¾ç½®åˆç†çš„ç¼©æ”¾èŒƒå›´ï¼ˆå»ºè®®0.5-5å€ï¼‰ï¼Œå¹¶æ·»åŠ é˜»å°¼æ•ˆæœ

<span class="hljs-bullet">2.</span> é”®ç›˜æ§åˆ¶ç§»åŠ¨ï¼š
<span class="hljs-bullet">   -</span> WASDé”®ä½æ§åˆ¶ï¼š
<span class="hljs-bullet">     *</span> Wé”®ï¼šæœºå™¨äººæ²¿å½“å‰æœå‘å‰è¿›
<span class="hljs-bullet">     *</span> Sé”®ï¼šæœºå™¨äººæ²¿å½“å‰æœå‘åé€€
<span class="hljs-bullet">     *</span> Aé”®ï¼šæœºå™¨äººå‘å·¦æ—‹è½¬ï¼ˆYè½´æ—‹è½¬ï¼Œéå¹³ç§»ï¼‰
<span class="hljs-bullet">     *</span> Dé”®ï¼šæœºå™¨äººå‘å³æ—‹è½¬ï¼ˆYè½´æ—‹è½¬ï¼Œéå¹³ç§»ï¼‰
<span class="hljs-bullet">   -</span> ç§»åŠ¨ç‰¹æ€§ï¼š
<span class="hljs-bullet">     *</span> ç§»åŠ¨é€Ÿåº¦åº”å¯é…ç½®ï¼ˆé»˜è®¤0.1å•ä½/å¸§ï¼‰
<span class="hljs-bullet">     *</span> æ—‹è½¬é€Ÿåº¦åº”å¯é…ç½®ï¼ˆé»˜è®¤1åº¦/å¸§ï¼‰
<span class="hljs-bullet">     *</span> å®ç°æƒ¯æ€§æ•ˆæœå’Œè¿åŠ¨å¹³æ»‘

<span class="hljs-bullet">3.</span> æŠ€æœ¯è¦æ±‚ï¼š
<span class="hljs-bullet">   -</span> ä½¿ç”¨requestAnimationFrameå®ç°æµç•…çš„åŠ¨ç”»
<span class="hljs-bullet">   -</span> æ·»åŠ ç§»åŠ¨å’Œæ—‹è½¬çš„è¾¹ç•Œé™åˆ¶
<span class="hljs-bullet">   -</span> æ”¯æŒç§»åŠ¨è®¾å¤‡è§¦æ‘¸äº‹ä»¶é€‚é…ï¼ˆå¯é€‰ï¼‰
<span class="hljs-bullet">   -</span> æ‰€æœ‰æ§åˆ¶å‚æ•°åº”å¯é€šè¿‡é…ç½®æ–‡ä»¶è°ƒæ•´

<span class="hljs-bullet">4.</span> æ€§èƒ½ä¼˜åŒ–ï¼š
<span class="hljs-bullet">   -</span> å®ç°é˜²æŠ–å¤„ç†é˜²æ­¢è¿‡åº¦è§¦å‘
<span class="hljs-bullet">   -</span> æ·»åŠ ç§»åŠ¨å’Œæ—‹è½¬çš„çŠ¶æ€æŒ‡ç¤ºå™¨ï¼ˆè°ƒè¯•ç”¨ï¼‰
<span class="hljs-bullet">   -</span> ç¡®ä¿åœ¨ä½å¸§ç‡æƒ…å†µä¸‹çš„æ§åˆ¶ç¨³å®šæ€§

<span class="hljs-bullet">5.</span> æµ‹è¯•è¦æ±‚ï¼š
<span class="hljs-bullet">   -</span> éªŒè¯æ‰€æœ‰æ§åˆ¶ç»„åˆä¸‹çš„è¡Œä¸ºæ­£ç¡®æ€§
<span class="hljs-bullet">   -</span> æµ‹è¯•è¾¹ç•Œæ¡ä»¶ä¸‹çš„è¡¨ç°
<span class="hljs-bullet">   -</span> æ£€æŸ¥ä¸åŒDPIè®¾å¤‡ä¸‹çš„æ§åˆ¶çµæ•åº¦
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4179f8add9954f5c9a18800cfccd9d98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=kkIiB2wnDkO9BFW%2BtIKsLsNxCnE%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a7cd76ee8f3483c91474cecda22b661~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=pnRKy5Sk%2FOYOGEnM36QIUllHuvs%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9"><strong>åŠŸèƒ½ä¸€æ¬¡è¿‡ï¼šå° BUG âœ…</strong></h4>
<p><strong>å‘ç°çš„é—®é¢˜ï¼š</strong></p>
<ul>
<li>A é”®ï¼šæœŸå¾…å·¦è½¬ï¼Œå®é™…å³è½¬</li>
<li>D é”®ï¼šæœŸå¾…å³è½¬ï¼Œå®é™…å·¦è½¬</li>
<li>ç§»åŠ¨æ•ˆæœä¸æ˜æ˜¾ï¼Œéœ€è¦ä¼˜åŒ–åœºåœ°</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12840052b8c34622912accdcabdffe9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=%2BNxxC06IlskJbW0QYIEYHOhmi%2F0%3D" alt="å½•å±2025-11-13 00.04.39.gif" loading="lazy"/></p>
<h3 data-id="heading-10"><strong>3 ä¼˜åŒ–æœºå™¨äººè¡ŒåŠ¨å’Œç¯å¢ƒ</strong></h3>
<h4 data-id="heading-11"><strong>ä¼˜åŒ–å‰</strong></h4>
<p>æœºå™¨äººçš„è½¬å‘éœ€è¦ä¼˜åŒ–ï¼Œa åº”è¯¥æ˜¯å‘å·¦è½¬ï¼Œå®é™…æ˜¯å‘å³è½¬äº†ï¼›D åº”è¯¥æ˜¯å‘å³è½¬ï¼Œå®é™…æ•ˆæœæ˜¯å‘å·¦è½¬äº†ã€‚åœºåœ°æ˜¯ç»¿è‰²ï¼Œæœºå™¨äººç§»åŠ¨åï¼Œç§»åŠ¨çš„è·ç¦»ä¸æ˜æ˜¾ï¼Œæœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥æ”¹å–„ï¼Ÿ</p>
<h4 data-id="heading-12"><strong>ä¼˜åŒ–å</strong></h4>
<pre><code class="hljs language-markdown" lang="markdown">ä¼˜åŒ–æœºå™¨äººè½¬å‘æ§åˆ¶å’Œç§»åŠ¨å¯è§†æ€§çš„å…·ä½“æ–¹æ¡ˆï¼š

<span class="hljs-bullet">1.</span> è½¬å‘æ§åˆ¶ä¿®æ­£ï¼š
<span class="hljs-bullet">-</span> é‡æ–°æ˜ å°„è½¬å‘æŒ‡ä»¤ï¼š
<span class="hljs-bullet">  *</span> å°†æŒ‰é”®"A"çš„è½¬å‘é€»è¾‘ä»å³è½¬ä¿®æ­£ä¸ºå·¦è½¬
<span class="hljs-bullet">  *</span> å°†æŒ‰é”®"D"çš„è½¬å‘é€»è¾‘ä»å·¦è½¬ä¿®æ­£ä¸ºå³è½¬
<span class="hljs-bullet">-</span> å®ç°ç²¾ç¡®çš„è§’åº¦æ§åˆ¶ï¼š
<span class="hljs-bullet">  *</span> è®¾ç½®æ ‡å‡†è½¬å‘è§’åº¦ä¸º90åº¦/æ¬¡
<span class="hljs-bullet">  *</span> æ·»åŠ è½¬å‘åŠ é€Ÿåº¦æ§åˆ¶ï¼Œç¡®ä¿å¹³æ»‘è½¬å‘

<span class="hljs-bullet">2.</span> ç§»åŠ¨è½¨è¿¹å¯è§†åŒ–å¢å¼ºï¼š
<span class="hljs-bullet">-</span> åœ¨ç»¿è‰²åœºåœ°ä¸Šæ·»åŠ é«˜å¯¹æ¯”åº¦è½¨è¿¹æ ‡è®°ï¼š
<span class="hljs-bullet">  *</span> ä½¿ç”¨äº®é»„è‰²æˆ–ç™½è‰²è½¨è¿¹çº¿ï¼ˆRGB 255,255,0 æˆ– 255,255,255ï¼‰
<span class="hljs-bullet">  *</span> è½¨è¿¹çº¿å®½åº¦è®¾ç½®ä¸º5cm
<span class="hljs-bullet">-</span> å®ç°å®æ—¶è½¨è¿¹è®°å½•ï¼š
<span class="hljs-bullet">  *</span> æ¯0.5ç§’è®°å½•ä¸€æ¬¡æœºå™¨äººä½ç½®
<span class="hljs-bullet">  *</span> ç”¨ä¸åŒé¢œè‰²æ˜¾ç¤ºæ–°æ—§è½¨è¿¹ï¼ˆå¦‚çº¢è‰²è¡¨ç¤ºæœ€æ–°è½¨è¿¹ï¼‰

<span class="hljs-bullet">3.</span> è¿åŠ¨åé¦ˆç³»ç»Ÿï¼š
<span class="hljs-bullet">-</span> æ·»åŠ è½¬å‘æŒ‡ç¤ºç¯ï¼š
<span class="hljs-bullet">  *</span> å·¦è½¬æ—¶å·¦ä¾§LEDäº®è“è‰²
<span class="hljs-bullet">  *</span> å³è½¬æ—¶å³ä¾§LEDäº®çº¢è‰²
<span class="hljs-bullet">-</span> é›†æˆè·ç¦»ä¼ æ„Ÿå™¨åé¦ˆï¼š
<span class="hljs-bullet">  *</span> æ¯ç§»åŠ¨10cmè§¦å‘ä¸€æ¬¡å£°éŸ³æç¤º
<span class="hljs-bullet">  *</span> åœ¨æ§åˆ¶ç•Œé¢æ˜¾ç¤ºå®æ—¶ç§»åŠ¨è·ç¦»ï¼ˆç²¾ç¡®åˆ°0.1cmï¼‰

<span class="hljs-bullet">4.</span> æµ‹è¯•éªŒè¯æ–¹æ¡ˆï¼š
<span class="hljs-bullet">-</span> è½¬å‘æµ‹è¯•ï¼š
<span class="hljs-bullet">  *</span> æ‰§è¡Œ10æ¬¡è¿ç»­å·¦è½¬/å³è½¬æµ‹è¯•ï¼ŒéªŒè¯è½¬å‘ä¸€è‡´æ€§
<span class="hljs-bullet">  *</span> æµ‹é‡å®é™…è½¬å‘è§’åº¦ä¸æŒ‡ä»¤è§’åº¦çš„åå·®ï¼ˆåº”&lt;2åº¦ï¼‰
<span class="hljs-bullet">-</span> ç§»åŠ¨æµ‹è¯•ï¼š
<span class="hljs-bullet">  *</span> åœ¨5mè·ç¦»å†…æµ‹è¯•è½¨è¿¹ç›´çº¿åº¦ï¼ˆåå·®åº”&lt;3cmï¼‰
<span class="hljs-bullet">  *</span> éªŒè¯è½¨è¿¹åœ¨ä¸åŒå…‰ç…§æ¡ä»¶ä¸‹çš„å¯è§æ€§
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b867d9ba8a30407499c10087ddba8af4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=g2lZMU%2BC0%2FDGy5AZcEVrAgKYeRA%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-13"><strong>ç»“æœï¼šä¸€æ¬¡é€šè¿‡ âœ…</strong></h4>
<p><strong>æ”¹è¿›å†…å®¹ï¼š</strong></p>
<ul>
<li>
<p>âœ… æ›´æ­£äº†è½¬å‘æ–¹å‘</p>
</li>
<li>
<p>âœ… æ·»åŠ äº†ç§»åŠ¨éŸ³æ•ˆ</p>
</li>
<li>
<p>âœ… æ·»åŠ äº†è·¯çº¿è½¨è¿¹æç¤º</p>
</li>
</ul>
<h3 data-id="heading-14"><strong>4 å¢åŠ éšœç¢ç‰©ã€é‡‘å¸</strong></h3>
<h4 data-id="heading-15"><strong>ä¼˜åŒ–å‰</strong></h4>
<p>å¢åŠ ä¸‰ä¸ªéšœç¢ç‰© å’Œ 2 ä¸ªé‡‘å¸ã€‚ æœºå™¨äººæ¥è§¦é‡‘å¸åï¼Œç»™å‡ºæç¤ºè¯éŸ³ï¼›æœºå™¨äººç¢°åˆ°éšœç¢ç‰©åï¼Œç»™å‡ºæç¤ºéŸ³ã€‚é‡‘å¸éœ€è¦ç»™å‡ºåæ ‡ã€‚</p>
<h4 data-id="heading-16"><strong>ä¼˜åŒ–å</strong></h4>
<pre><code class="hljs language-markdown" lang="markdown">åœ¨æ¸¸æˆåœºæ™¯ä¸­å®ç°ä»¥ä¸‹åŠŸèƒ½å¢å¼ºï¼š

<span class="hljs-bullet">1.</span> éšœç¢ç‰©ç³»ç»Ÿï¼š
<span class="hljs-bullet">   -</span> æ–°å¢3ä¸ªéšœç¢ç‰©å¯¹è±¡ï¼Œéœ€å‡åŒ€åˆ†å¸ƒåœ¨æ¸¸æˆåœºæ™¯çš„ä¸åŒåŒºåŸŸ
<span class="hljs-bullet">   -</span> æ¯ä¸ªéšœç¢ç‰©åº”å…·æœ‰ç¢°æ’æ£€æµ‹åŠŸèƒ½
<span class="hljs-bullet">   -</span> å½“æœºå™¨äººç¢°æ’åˆ°éšœç¢ç‰©æ—¶ï¼Œç«‹å³æ’­æ”¾é¢„è®¾çš„æç¤ºéŸ³æ•ˆï¼ˆå¦‚"ç¢°æ’.wav"ï¼‰
<span class="hljs-bullet">   -</span> éšœç¢ç‰©éœ€æœ‰å¯è§†åŒ–çš„è¡¨ç°å½¢å¼ï¼ˆå¦‚çº¢è‰²ç«‹æ–¹ä½“ï¼‰

<span class="hljs-bullet">2.</span> é‡‘å¸ç³»ç»Ÿï¼š
<span class="hljs-bullet">   -</span> æ–°å¢2ä¸ªé‡‘å¸å¯¹è±¡ï¼Œéœ€æ˜ç¡®æŒ‡å®šåæ ‡ä½ç½®ï¼ˆå¦‚é‡‘å¸1åæ ‡(x1,y1,z1)ï¼Œé‡‘å¸2åæ ‡(x2,y2,z2)ï¼‰
<span class="hljs-bullet">   -</span> æ¯ä¸ªé‡‘å¸åº”å…·æœ‰ç¢°æ’æ£€æµ‹å’Œæ”¶é›†åŠŸèƒ½
<span class="hljs-bullet">   -</span> å½“æœºå™¨äººæ¥è§¦é‡‘å¸æ—¶ï¼š
<span class="hljs-bullet">     *</span> æ’­æ”¾é¢„è®¾çš„æ”¶é›†éŸ³æ•ˆï¼ˆå¦‚"é‡‘å¸.wav"ï¼‰
<span class="hljs-bullet">     *</span> åœ¨æ¸¸æˆç•Œé¢æ˜¾ç¤º"é‡‘å¸æ”¶é›†æˆåŠŸ"çš„æç¤ºä¿¡æ¯
<span class="hljs-bullet">     *</span> é‡‘å¸å¯¹è±¡ä»åœºæ™¯ä¸­æ¶ˆå¤±
<span class="hljs-bullet">   -</span> é‡‘å¸éœ€æœ‰å¯è§†åŒ–çš„è¡¨ç°å½¢å¼ï¼ˆå¦‚é‡‘è‰²çƒä½“ï¼‰

<span class="hljs-bullet">3.</span> å®ç°è¦æ±‚ï¼š
<span class="hljs-bullet">   -</span> æ‰€æœ‰ç¢°æ’æ£€æµ‹éœ€ä½¿ç”¨ç‰©ç†å¼•æ“ç²¾ç¡®è®¡ç®—
<span class="hljs-bullet">   -</span> éŸ³æ•ˆæ’­æ”¾éœ€æ”¯æŒåŒæ—¶å¤šéŸ³æºæ’­æ”¾
<span class="hljs-bullet">   -</span> åæ ‡ç³»ç»Ÿéœ€ä½¿ç”¨ä¸–ç•Œåæ ‡ç³»
<span class="hljs-bullet">   -</span> ä»£ç éœ€æ·»åŠ æ³¨é‡Šè¯´æ˜å…³é”®é€»è¾‘
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e12c5d3a83364b72a485207484fa6721~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=OfujJttLYeSK4jW6XqjrJ7TZkGo%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60f2b20baa75400689518050cd972ed8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=8dtWzNpuVE0LGPYGhkonrW%2BWTA0%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-17"><strong>å®ç°ç»“æœ</strong></h4>
<p>é‡‘å¸å’Œéšœç¢ç‰©ä¸€æ¬¡ç”ŸæˆæˆåŠŸï¼Œä½†é‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼Œç»è¿‡ <strong>8 è½®å¯¹è¯</strong>ä¿®å¤ï¼š</p>
<ul>
<li>
<p>é‡‘å¸æ— æ³•æ­£å¸¸æ˜¾ç¤ºï¼ˆä¼šè¢«åœ°è¡¨é®ç›–ï¼‰ã€æ”¶é›†</p>
</li>
<li>
<p>éšœç¢ç‰©å¯ä»¥è¢«ç©¿é€</p>
</li>
</ul>
<p><strong>æœ€ç»ˆæ•ˆæœï¼š å…¨éƒ¨åŠŸèƒ½æ­£å¸¸è¿è¡Œ âœ…</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d78240ed32cb45fa9b2a479ba3a5ebf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=sOFCnKC8Md%2B4ch7IQ3awDejKaA4%3D" alt="å½•å±2025-11-13 07.45.49.gif" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18ea164a40454e07b513c9eceeb6009b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913316&amp;x-signature=FXlpQjcKDk%2FLLtoWbuaSg1R%2F2kM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-18"><strong>ä½¿ç”¨ä½“éªŒæ€»ç»“</strong></h2>
<p>ç”¨ SOLO Coder çš„æ•´ä½“æ„Ÿè§‰å°±ä¿©å­—ï¼š<strong>çœå¿ƒã€‚</strong></p>
<p><strong>â€œæŠ„ä½œä¸šâ€èƒ½åŠ›ä¸€æµ</strong></p>
<p>åªéœ€è¦ç”©ç»™å®ƒä¸¤ä¸ª Three.js å®˜ç½‘çš„é“¾æ¥ï¼ˆä¸€ä¸ªæ•ˆæœé¡µï¼Œä¸€ä¸ªæºä»£ç é¡µï¼‰ï¼Œå®ƒå°±èƒ½è‡ªå·±çœ‹æ‡‚ä»£ç ï¼ŒæŠŠå¸¦å„ç§åŠ¨ä½œçš„æœºå™¨äººåŸå°ä¸åŠ¨åœ°â€œæ¬â€åˆ°æœ¬åœ°çš„ Vite + React é¡¹ç›®é‡Œã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½åŸºæœ¬â€œä¸€æ¬¡è¿‡â€</strong></p>
<p>æœ€è®©æˆ‘æƒŠå–œçš„æ˜¯ï¼Œå¾ˆå¤šå¤æ‚åŠŸèƒ½å®ƒç¬¬ä¸€æ¬¡å°è¯•å°±èƒ½è·‘é€šï¼š</p>
<ul>
<li>æŠŠæœºå™¨äººæ¨¡å‹å’ŒåŠ¨ç”»ç§»æ¤è¿‡æ¥ï¼Œä¸€æ¬¡æˆåŠŸã€‚</li>
<li>åšé‚£ä¸ªç”¨é¼ æ ‡æ‹–æ‹½æ—‹è½¬è§†è§’ã€æ»šè½®ç¼©æ”¾ã€é”®ç›˜ WSAD æ§åˆ¶ç§»åŠ¨çš„äº¤äº’é¢æ¿ï¼Œä¹ŸåŸºæœ¬æ²¡å‡ºå¤§é—®é¢˜ã€‚</li>
</ul>
<p>è¿™å°±çœä¸‹äº†å¤§é‡çš„åŸºç¡€è°ƒè¯•æ—¶é—´ã€‚</p>
<p><strong>èƒ½å¬æ‡‚äººè¯ï¼Œä¿® Bug æ•ˆç‡é«˜</strong></p>
<p>å½“ç„¶ä¹Ÿæœ‰å°æ’æ›²ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>ä¸€å¼€å§‹æŒ‰ A é”®æœºå™¨äººå¾€å³è½¬ï¼ŒæŒ‰ D é”®å¾€å·¦è½¬ï¼Œæ–¹å‘åäº†ã€‚</li>
<li>æœºå™¨äººåœ¨ç»¿åœ°ä¸Šç§»åŠ¨ï¼Œçœ‹ä¸å‡ºæ¥åŠ¨äº†å¤šè¿œã€‚</li>
</ul>
<p>æˆ‘è·Ÿå®ƒè¯´â€œA é”®åº”è¯¥æ˜¯å·¦è½¬ï¼Œç°åœ¨åäº†â€ï¼Œå®ƒé©¬ä¸Šå°±æ”¹å¯¹äº†ã€‚å¯¹äºç§»åŠ¨è½¨è¿¹ä¸æ˜æ˜¾çš„é—®é¢˜ï¼Œå®ƒä¸å…‰ä¿®æ­£äº†ï¼Œè¿˜ä¸»åŠ¨åŠ ä¸Šäº†ç§»åŠ¨éŸ³æ•ˆå’Œåœ°é¢è½¨è¿¹çº¿ï¼Œæƒ³å¾—æŒºå‘¨åˆ°ã€‚</p>
<p><strong>åšå¤æ‚åŠŸèƒ½æ—¶ï¼Œéœ€è¦å¤šç‚¹è€å¿ƒ</strong></p>
<p>åœ¨å¾€ååŠ â€œé‡‘å¸â€å’Œâ€œéšœç¢ç‰©â€æ—¶ï¼Œé‡åˆ°ç‚¹éº»çƒ¦ã€‚æ¯”å¦‚é‡‘å¸ç”Ÿæˆåœ¨åœ°åº•ä¸‹äº†ï¼Œæˆ–è€…æœºå™¨äººèƒ½ç›´æ¥ç©¿è¿‡éšœç¢ç‰©ã€‚è¿™äº›é—®é¢˜ä¸åƒæ”¹ä¸ªæŒ‰é”®é‚£ä¹ˆç®€å•ï¼Œæˆ‘ä»¬æ¥å›æ²Ÿé€šäº†ä¸ƒå…«æ¬¡ï¼Œæ‰æŠŠç¢°æ’æ£€æµ‹å’Œç‰©ä½“ä½ç½®éƒ½è°ƒå¯¹ã€‚</p>
<p>è¿™è¯´æ˜åœ¨å¤„ç†æ›´å¤æ‚çš„ç‰©ç†äº¤äº’æ—¶ï¼Œå®ƒå¯èƒ½éœ€è¦æ›´æ˜ç¡®çš„æŒ‡ä»¤å’Œå¤šè½®è°ƒè¯•ï¼Œä¸èƒ½æŒ‡æœ›ä¸€æ¬¡å°±å®Œç¾ã€‚</p>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong> ç”¨å®ƒæ¥å¿«é€Ÿæ­å»ºåŸå‹ã€å®ç°æ ‡å‡†åŠŸèƒ½æˆ–è€…éªŒè¯æƒ³æ³•ï¼Œç»å¯¹æ˜¯ä¸ªç¥å™¨ï¼Œèƒ½è®©ä½ äº‹åŠåŠŸå€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[NekoBoxForAndroid ç¼–è¯‘libcore.aar]]></title>    <link>https://juejin.cn/post/7577343038428659755</link>    <guid>https://juejin.cn/post/7577343038428659755</guid>    <pubDate>2025-11-28T05:44:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577343038428659755" data-draft-id="7577411657393078314" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="NekoBoxForAndroid ç¼–è¯‘libcore.aar "/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-28T05:44:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«æŸ´å°±æ˜¯æˆ‘"/> <meta itemprop="url" content="https://juejin.cn/user/272334614705575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            NekoBoxForAndroid ç¼–è¯‘libcore.aar 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/272334614705575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«æŸ´å°±æ˜¯æˆ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T05:44:52.000Z" title="Fri Nov 28 2025 05:44:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€èˆ¬æŒ‰ç…§è¿™ä¸ªæµç¨‹ç¼–è¯‘å°±å¯ä»¥</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMatsuriDayo%2FNekoBoxForAndroid%2Fissues%2F177" target="_blank" title="https://github.com/MatsuriDayo/NekoBoxForAndroid/issues/177" ref="nofollow noopener noreferrer">github.com/MatsuriDayoâ€¦</a></p>
<p>è®°å½•ä¸€ä¸ªé—®é¢˜:libcore.aarä¸­ä¼šæœ‰ä¸€ä¸ªlibgojni.so æäº¤googleplayçš„æ—¶å€™ å¯èƒ½ä¼šæç¤ºæ²¡æœ‰é€‚é…16Kbã€‚
è¿™ä¸ªåŸå› å¯èƒ½æ˜¯ä½ æœ¬åœ°çš„NDKçš„ç‰ˆæœ¬å¤ªä½ã€‚</p>
<p>çœ‹è¿™ä¸ªissue:<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fissues%2F74839" target="_blank" title="https://github.com/golang/go/issues/74839" ref="nofollow noopener noreferrer">github.com/golang/go/iâ€¦</a></p>
<p>åªéœ€è¦æŠŠæœ¬åœ°ndkçš„ç‰ˆæœ¬è®¾ç½®æˆ28ä»¥ä¸Šçš„å°±å¯ä»¥äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PHP Fiber ä¼˜é›…åä½œå¼å¤šä»»åŠ¡]]></title>    <link>https://juejin.cn/post/7577333742277951530</link>    <guid>https://juejin.cn/post/7577333742277951530</guid>    <pubDate>2025-11-28T03:33:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577333742277951530" data-draft-id="7577343038428069931" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PHP Fiber ä¼˜é›…åä½œå¼å¤šä»»åŠ¡ "/> <meta itemprop="keywords" content="PHP"/> <meta itemprop="datePublished" content="2025-11-28T03:33:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·722786812344"/> <meta itemprop="url" content="https://juejin.cn/user/4100515739233513"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PHP Fiber ä¼˜é›…åä½œå¼å¤šä»»åŠ¡ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4100515739233513/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·722786812344
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:33:29.000Z" title="Fri Nov 28 2025 03:33:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨å¼€å‘å®˜æ–¹ PHP MCP SDK çš„å®¢æˆ·ç«¯é€šä¿¡åŠŸèƒ½æ—¶ï¼Œå¼€å‘å›¢é˜Ÿé‡åˆ°äº†ä¸€ä¸ªçœ‹ä¼¼æ— æ³•ä¼˜é›…è§£å†³çš„æ¶æ„æŒ‘æˆ˜ã€‚ä¼ ç»Ÿçš„å¼‚æ­¥æ–¹æ¡ˆã€å›è°ƒæ¨¡å¼å’ŒçŠ¶æ€æœºéƒ½æ— æ³•åœ¨ä¸ç‰ºç‰²ä»£ç ç®€æ´æ€§çš„å‰æä¸‹å®ç°éœ€æ±‚ã€‚æœ€ç»ˆï¼ŒPHP çº¤ç¨‹ï¼ˆFibersï¼‰æˆä¸ºäº†è¿™ä¸ªé—®é¢˜çš„å®Œç¾è§£å†³æ–¹æ¡ˆã€‚</p>
<p>è¯¥åŠŸèƒ½åœ¨ PR #109 ä¸­å¼•å…¥ï¼Œå…¶å®ç°å±•ç¤ºäº† PHP çº¤ç¨‹æœ€ä¼˜é›…çš„ä½¿ç”¨æ¡ˆä¾‹ä¹‹ä¸€ã€‚ä½†è¿™ä¸ä»…ä»…æ˜¯å…³äºä¸€ä¸ªé—®é¢˜çš„æ•…äº‹ï¼Œæ›´æ˜¯å…³äºä¸€ä¸ªè‡ª PHP 8.1 ä»¥æ¥ä¸€ç›´éšè—åœ¨ä¼—ç›®ç½ç½ä¹‹ä¸‹ã€å´è¢«å¤§é‡è¯¯è§£å’Œæœªå……åˆ†åˆ©ç”¨çš„å¼ºå¤§ PHP ç‰¹æ€§ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ï¼š</p>
<ul>
<li>PHP çº¤ç¨‹åˆ°åº•æ˜¯ä»€ä¹ˆï¼ˆä»¥åŠå®ƒä»¬ä¸æ˜¯ä»€ä¹ˆï¼‰</li>
<li>ä½•æ—¶ä»¥åŠä¸ºä½•åº”è¯¥ä½¿ç”¨å®ƒä»¬</li>
<li>å¦‚ä½•ç†è§£åä½œå¼å¤šä»»åŠ¡</li>
<li>ä½¿ç”¨çº¤ç¨‹çš„çœŸå®ä¸–ç•Œå®ç°</li>
<li>å¯ä»¥åœ¨è‡ªå·±ä»£ç ä¸­ä½¿ç”¨çš„æ¨¡å¼</li>
</ul>
<p>æ–‡ç« è¾ƒé•¿ï¼Œå»ºè®®å‡†å¤‡å¥½å’–å•¡æ…¢æ…¢çœ‹ã€‚</p>
<h2 data-id="heading-1">å…³äºçº¤ç¨‹çš„è¯¯è§£</h2>
<p>é¦–å…ˆè¦è§£å†³æˆ¿é—´é‡Œçš„å¤§è±¡ï¼šPHP çº¤ç¨‹<strong>ä¸æ˜¯</strong>å¼‚æ­¥ PHPã€‚å®ƒä»¬ä¸æ˜¯å¹¶è¡Œæœºåˆ¶ï¼Œä¸æ˜¯çº¿ç¨‹ï¼Œä¹Ÿä¸æ˜¯è®© PHP åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚</p>
<p>å½“ PHP 8.1 åœ¨ 2021 å¹´ 11 æœˆå¼•å…¥çº¤ç¨‹æ”¯æŒæ—¶ï¼Œè®¸å¤šå¼€å‘è€…éƒ½æ„Ÿåˆ°å›°æƒ‘ã€‚"å¤ªå¥½äº†ï¼Œåˆä¸€ä¸ªå¼‚æ­¥ä¸œè¥¿ï¼Ÿ"å¤§å®¶è¿™æ ·æƒ³ã€‚è¿™ç§å›°æƒ‘æ˜¯å¯ä»¥ç†è§£çš„ï¼Œå› ä¸ºçº¤ç¨‹æœ€æ˜¾çœ¼çš„ä½¿ç”¨åœºæ™¯ä¸€ç›´æ˜¯åœ¨ ReactPHP å’Œ AmPHP ç­‰å¼‚æ­¥åº“ä¸­ã€‚</p>
<p>ReactPHP ç”šè‡³æœ‰ä¸€ä¸ªåä¸ºÂ <code>async</code>Â çš„åŒ…ï¼Œä½¿ç”¨çº¤ç¨‹è®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">// çº¤ç¨‹ä¹‹å‰ï¼šå›è°ƒåœ°ç‹±
<span class="hljs-variable">$promise</span>-&gt;<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-variable">$result</span>) {
    <span class="hljs-built_in">return</span> anotherAsyncCall(<span class="hljs-variable">$result</span>);
})-&gt;<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-variable">$finalResult</span>) {
    <span class="hljs-built_in">echo</span> <span class="hljs-variable">$finalResult</span>;
});
 
// ä½¿ç”¨çº¤ç¨‹ï¼šçœ‹èµ·æ¥æ˜¯åŒæ­¥çš„ï¼
<span class="hljs-variable">$result</span> = await(<span class="hljs-variable">$promise</span>);
<span class="hljs-variable">$finalResult</span> = await(anotherAsyncCall(<span class="hljs-variable">$result</span>));
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$finalResult</span>;
</code></pre>
<p>çœ‹åˆ°è¿™ä¸ªï¼Œå¾ˆå®¹æ˜“è®¤ä¸º"çº¤ç¨‹ = å¼‚æ­¥é­”æ³•"ã€‚ä½†è¿™å¿½ç•¥äº†æ›´å¤§çš„å›¾æ™¯ã€‚</p>
<p>çº¤ç¨‹çš„æœ¬è´¨æ˜¯<strong>åä½œå¼å¤šä»»åŠ¡</strong>ã€‚å®ƒä»¬èµ‹äºˆä»£ç æš‚åœæ‰§è¡Œã€æ‰§è¡Œå…¶ä»–æ“ä½œã€ç„¶ååœ¨å®Œå…¨ä¿ç•™æ‰€æœ‰å˜é‡ã€è°ƒç”¨æ ˆå’Œæ‰§è¡Œä¸Šä¸‹æ–‡çš„æƒ…å†µä¸‹ï¼Œç²¾ç¡®åœ°å›åˆ°ç¦»å¼€çš„ä½ç½®ç»§ç»­æ‰§è¡Œçš„èƒ½åŠ›ã€‚</p>
<p>æ˜¯çš„ï¼Œè¿™å¯¹å¼‚æ­¥åº“éå¸¸æœ‰ç”¨ã€‚ä½†åœ¨éœ€è¦å—æ§ä¸­æ–­å’Œæ¢å¤çš„çº¯åŒæ­¥ä»£ç ä¸­ï¼Œå®ƒåŒæ ·æœ‰ç”¨ã€‚è€Œè¿™æ­£æ˜¯å¤§å¤šæ•° PHP å¼€å‘è€…é”™è¿‡çš„æœºä¼šã€‚</p>
<p>çº¤ç¨‹é‡‡ç”¨ç¼“æ…¢çš„åŸå› ä¸æ˜¯å› ä¸ºå®ƒä»¬ä¸å¤Ÿæœ‰ç”¨ï¼Œè€Œæ˜¯å› ä¸ºå¤§å¤šæ•°å¼€å‘è€…ä¸çŸ¥é“ä½•æ—¶ä½¿ç”¨å®ƒä»¬ã€‚è€Œè¿™æ­£æ˜¯æœ¬æ–‡è¦è§£å†³çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-2">ç†è§£çº¤ç¨‹ï¼šåŸºç¡€çŸ¥è¯†</h2>
<p>åœ¨æ·±å…¥å¤æ‚ç¤ºä¾‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå»ºç«‹åšå®çš„åŸºç¡€ã€‚çº¤ç¨‹åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå®ƒå¦‚ä½•å·¥ä½œï¼Ÿ</p>
<h3 data-id="heading-3">ä»€ä¹ˆæ˜¯åä½œå¼å¤šä»»åŠ¡ï¼Ÿ</h3>
<p>ç†è§£çº¤ç¨‹çš„ä¸€ä¸ªå¥½ç±»æ¯”æ˜¯ï¼Œå°†æ ‡å‡† PHP è„šæœ¬æƒ³è±¡æˆå•è½¨é“ä¸Šçš„ç«è½¦ã€‚å®ƒä» A ç«™å¼€åˆ° B ç«™ï¼Œé€šå¸¸åœ¨åˆ°è¾¾ B ä¹‹å‰ä¸èƒ½åœæ­¢ã€‚çº¤ç¨‹å…è®¸ç«è½¦åœ¨è½¨é“ä¸­é—´åœä¸‹æ¥ï¼Œè®©ä¹˜å®¢ä¸‹è½¦ï¼ˆæˆ–è®©ä¹˜å®¢ä¸Šæ´—æ‰‹é—´ä¼‘æ¯ï¼‰ï¼Œåœ¨æ­¤æœŸé—´ç”šè‡³è®©å¦ä¸€åˆ—ç«è½¦ä½¿ç”¨è¿™æ¡è½¨é“ï¼Œç„¶ååœ¨æ‰€æœ‰è¡Œæï¼ˆå˜é‡å’Œå†…å­˜çŠ¶æ€ï¼‰å®Œå¥½æ— æŸçš„æƒ…å†µä¸‹ï¼Œç²¾ç¡®åœ°ä»åœä¸‹çš„åœ°æ–¹æ¢å¤ã€‚</p>
<p>å¦ä¸€ä¸ªç±»æ¯”æ˜¯æƒ³è±¡ä½ åœ¨åšé¥­çš„åŒæ—¶è¯»ä¹¦ã€‚ä½ è¯»å‡ é¡µä¹¦ï¼Œç„¶åå®šæ—¶å™¨å“äº†ï¼Œä½ æ ‡è®°é¡µé¢ï¼Œæ…æ‹Œé”…é‡Œçš„ä¸œè¥¿ï¼Œå†å›åˆ°åˆšæ‰è¯»åˆ°çš„åœ°æ–¹ç»§ç»­é˜…è¯»ã€‚è¿™å°±æ˜¯åä½œå¼å¤šä»»åŠ¡ã€‚</p>
<p>å…³é”®è¯æ˜¯<strong>åä½œ</strong>ã€‚ä½ ï¼ˆè¯»è€…/å¨å¸ˆï¼‰å†³å®šä½•æ—¶åˆ‡æ¢ä»»åŠ¡ã€‚æ²¡æœ‰äººå¼ºè¡Œæ‰“æ–­ä½ ï¼Œè€Œæ˜¯åœ¨åˆé€‚çš„æ—¶å€™è‡ªæ„¿äº¤å‡ºæ§åˆ¶æƒã€‚</p>
<p>åœ¨ç¼–ç¨‹æœ¯è¯­ä¸­ï¼š</p>
<ul>
<li><strong>æŠ¢å å¼å¤šä»»åŠ¡</strong>ï¼šæ“ä½œç³»ç»Ÿå¼ºåˆ¶ä¸­æ–­ä½ çš„ä»£ç ï¼ˆçº¿ç¨‹ã€è¿›ç¨‹ï¼‰</li>
<li><strong>åä½œå¼å¤šä»»åŠ¡</strong>ï¼šä½ çš„ä»£ç å†³å®šä½•æ—¶äº¤å‡ºæ§åˆ¶æƒï¼ˆåç¨‹ã€çº¤ç¨‹ï¼‰</li>
</ul>
<p>çº¤ç¨‹æ˜¯ PHP å¯¹åä½œå¼å¤šä»»åŠ¡çš„å®ç°ã€‚å®ƒä»¬è®©ä½ èƒ½å¤Ÿï¼š</p>
<ol>
<li>å¼€å§‹æ‰§è¡Œä¸€æ®µä»£ç </li>
<li>åœ¨ä»»ä½•ç‚¹æš‚åœå®ƒï¼ˆæŒ‚èµ·ï¼‰</li>
<li>åšå…¶ä»–äº‹æƒ…</li>
<li>ç²¾ç¡®åœ°ä»ç¦»å¼€çš„åœ°æ–¹æ¢å¤</li>
<li>æ ¹æ®éœ€è¦é‡å¤ä»»æ„å¤šæ¬¡</li>
</ol>
<h3 data-id="heading-4">çº¤ç¨‹çš„ç»“æ„</h3>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
 
<span class="hljs-variable">$fiber</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Fiber</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"/>): <span class="hljs-title">string</span> </span>{
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"1. çº¤ç¨‹å¯åŠ¨\n"</span>;
 
    <span class="hljs-variable">$value</span> = <span class="hljs-title class_">Fiber</span>::<span class="hljs-title function_ invoke__">suspend</span>(<span class="hljs-string">'pause-1'</span>);
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"3. çº¤ç¨‹æ¢å¤ï¼Œæ”¶åˆ°: <span class="hljs-subst">$value</span>\n"</span>;
 
    <span class="hljs-variable">$value2</span> = <span class="hljs-title class_">Fiber</span>::<span class="hljs-title function_ invoke__">suspend</span>(<span class="hljs-string">'pause-2'</span>);
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"5. çº¤ç¨‹å†æ¬¡æ¢å¤ï¼Œæ”¶åˆ°: <span class="hljs-subst">$value2</span>\n"</span>;
 
    <span class="hljs-keyword">return</span> <span class="hljs-string">'final-result'</span>;
});
 
<span class="hljs-keyword">echo</span> <span class="hljs-string">"0. å¯åŠ¨çº¤ç¨‹ä¹‹å‰\n"</span>;
 
<span class="hljs-variable">$suspended1</span> = <span class="hljs-variable">$fiber</span>-&gt;<span class="hljs-title function_ invoke__">start</span>();
<span class="hljs-keyword">echo</span> <span class="hljs-string">"2. çº¤ç¨‹æŒ‚èµ·ï¼Œè¿”å›: <span class="hljs-subst">$suspended1</span>\n"</span>;
 
<span class="hljs-variable">$suspended2</span> = <span class="hljs-variable">$fiber</span>-&gt;<span class="hljs-title function_ invoke__">resume</span>(<span class="hljs-string">'data-1'</span>);
<span class="hljs-keyword">echo</span> <span class="hljs-string">"4. çº¤ç¨‹å†æ¬¡æŒ‚èµ·ï¼Œè¿”å›: <span class="hljs-subst">$suspended2</span>\n"</span>;
 
<span class="hljs-variable">$result</span> = <span class="hljs-variable">$fiber</span>-&gt;<span class="hljs-title function_ invoke__">resume</span>(<span class="hljs-string">'data-2'</span>);
<span class="hljs-keyword">echo</span> <span class="hljs-string">"6. çº¤ç¨‹è¿”å›: <span class="hljs-subst">$result</span>\n"</span>;
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">0.</span> å¯åŠ¨çº¤ç¨‹ä¹‹å‰
<span class="hljs-bullet">1.</span> çº¤ç¨‹å¯åŠ¨
<span class="hljs-bullet">2.</span> çº¤ç¨‹æŒ‚èµ·ï¼Œè¿”å›: pause-1
<span class="hljs-bullet">3.</span> çº¤ç¨‹æ¢å¤ï¼Œæ”¶åˆ°: data-1
<span class="hljs-bullet">4.</span> çº¤ç¨‹å†æ¬¡æŒ‚èµ·ï¼Œè¿”å›: pause-2
<span class="hljs-bullet">5.</span> çº¤ç¨‹å†æ¬¡æ¢å¤ï¼Œæ”¶åˆ°: data-2
<span class="hljs-bullet">6.</span> çº¤ç¨‹è¿”å›: final-result
</code></pre>
<p>è¿™é‡Œç‰¹æ„åŒ…å«äº†æ•°å­—ï¼Œä»¥ä¾¿è¯»è€…çœ‹æ¸…æ‰§è¡Œå¦‚ä½•åœ¨çº¤ç¨‹å†…å¤–è·³è½¬ã€‚<code>suspend</code>Â è®©å®ƒè·³å‡ºçº¤ç¨‹ï¼Œ<code>resume</code>Â è®©å®ƒè·³å›çº¤ç¨‹ï¼ä¸ºäº†æ›´æ¸…æ™°ï¼Œè®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹å‘ç”Ÿäº†ä»€ä¹ˆï¼š</p>
<ol>
<li><strong>åˆ›å»º</strong>ï¼š<code>new Fiber(function() {...})</code>Â åˆ›å»ºçº¤ç¨‹ä½†å°šæœªæ‰§è¡Œ</li>
<li><strong>å¯åŠ¨</strong>ï¼š<code>$fiber-&gt;start()</code>Â å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªÂ <code>Fiber::suspend()</code></li>
<li><strong>æŒ‚èµ·</strong>ï¼š<code>Fiber::suspend('pause-1')</code>Â æš‚åœæ‰§è¡Œå¹¶å°†æ§åˆ¶æƒè¿”å›ç»™è°ƒç”¨è€…</li>
<li><strong>æ¢å¤</strong>ï¼š<code>$fiber-&gt;resume('data-1')</code>Â ä»æŒ‚èµ·å¤„ç»§ç»­æ‰§è¡Œ</li>
<li><strong>è¿”å›</strong>ï¼šå½“çº¤ç¨‹å®Œæˆæ—¶ï¼Œ<code>resume()</code>Â è¿”å›æœ€ç»ˆå€¼</li>
</ol>
<p>é­”æ³•åœ¨äºæ‰§è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚å½“çº¤ç¨‹æŒ‚èµ·æ—¶ï¼š</p>
<ul>
<li>æ‰€æœ‰å±€éƒ¨å˜é‡éƒ½è¢«ä¿ç•™</li>
<li>è°ƒç”¨æ ˆè¢«ä¿å­˜</li>
<li>æ‰§è¡Œè·³å›åˆ°è°ƒç”¨Â <code>start()</code>Â æˆ–Â <code>resume()</code>Â çš„åœ°æ–¹</li>
<li>ä¼ é€’ç»™Â <code>suspend()</code>Â çš„å€¼è¿”å›ç»™è°ƒç”¨è€…</li>
</ul>
<p>å½“ä½ æ¢å¤æ—¶ï¼š</p>
<ul>
<li>æ‰§è¡Œè·³å›çº¤ç¨‹å†…éƒ¨</li>
<li>ä¼ é€’ç»™Â <code>resume()</code>Â çš„å€¼æˆä¸ºÂ <code>suspend()</code>Â çš„è¿”å›å€¼</li>
<li>ä¸€åˆ‡ç»§ç»­ï¼Œå°±åƒä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿè¿‡</li>
</ul>
<p>ä¸€ä¸ªè®©çº¤ç¨‹å˜å¾—å¼ºå¤§çš„å…³é”®æ´å¯Ÿï¼š<strong>åœ¨çº¤ç¨‹å†…éƒ¨è¿è¡Œçš„ä»£ç ä¸éœ€è¦çŸ¥é“å®ƒåœ¨çº¤ç¨‹ä¸­</strong>ã€‚</p>
<p>çœ‹çœ‹è¿™ä¸ªï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processData</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> <span class="hljs-variable">$id</span></span>): <span class="hljs-title">string</span> </span>{
    <span class="hljs-variable">$data</span> = <span class="hljs-title function_ invoke__">fetchData</span>(<span class="hljs-variable">$id</span>);  <span class="hljs-comment">// è¿™å¯èƒ½ä¼šæŒ‚èµ·ï¼</span>
    <span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">transform</span>(<span class="hljs-variable">$data</span>);  <span class="hljs-comment">// è¿™ä¹Ÿå¯èƒ½ä¼šæŒ‚èµ·ï¼</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$result</span>;
}
 
<span class="hljs-comment">// åœ¨çº¤ç¨‹å†…è°ƒç”¨</span>
<span class="hljs-variable">$fiber</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Fiber</span>(<span class="hljs-function"><span class="hljs-keyword">fn</span>(<span class="hljs-params"/>) =&gt;</span> <span class="hljs-title function_ invoke__">processData</span>(<span class="hljs-number">42</span>));
<span class="hljs-variable">$fiber</span>-&gt;<span class="hljs-title function_ invoke__">start</span>();
</code></pre>
<p>ä»Â <code>processData</code>Â çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒåªæ˜¯åœ¨è°ƒç”¨å‡½æ•°å¹¶è¿”å›ç»“æœã€‚å®ƒä¸çŸ¥é“Â <code>fetchData()</code>Â å’ŒÂ <code>transform()</code>Â å¯èƒ½åœ¨å¹•åæŒ‚èµ·çº¤ç¨‹ã€‚å¤æ‚æ€§æ˜¯éšè—çš„ã€‚</p>
<p>è¿™æ­£æ˜¯çº¤ç¨‹éå¸¸é€‚åˆæ„å»ºéšè—å¤æ‚è¡Œä¸ºçš„å¹²å‡€ API çš„åŸå› ã€‚</p>
<h2 data-id="heading-5">å¼‚æ­¥åº“ä¸­çš„çº¤ç¨‹</h2>
<p>ç°åœ¨æˆ‘ä»¬ç†è§£äº†åŸºç¡€çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸ºä»€ä¹ˆæœ‰äº›äººä¼šå°†çº¤ç¨‹ä¸å¼‚æ­¥ä»£ç è”ç³»èµ·æ¥ã€‚è¿™ä¹Ÿä¼šåœ¨æˆ‘ä»¬å¤„ç†ä¸»è¦é—®é¢˜ä¹‹å‰å±•ç¤ºä¸€ä¸ªå…·ä½“çš„ä½¿ç”¨æ¡ˆä¾‹ã€‚</p>
<h3 data-id="heading-6">å¼‚æ­¥é—®é¢˜</h3>
<p>PHP ä¸­çš„ä¼ ç»Ÿå¼‚æ­¥ç¼–ç¨‹çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">// ä½¿ç”¨ promisesï¼ˆçº¤ç¨‹ä¹‹å‰ï¼‰
<span class="hljs-keyword">function</span> fetchUserData(int <span class="hljs-variable">$userId</span>): PromiseInterface {
    <span class="hljs-built_in">return</span> <span class="hljs-variable">$this</span>-&gt;httpClient-&gt;getAsync(<span class="hljs-string">"/users/<span class="hljs-variable">$userId</span>"</span>)
        -&gt;<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-variable">$response</span>) {
            <span class="hljs-built_in">return</span> json_decode(<span class="hljs-variable">$response</span>-&gt;getBody());
        })
        -&gt;<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-variable">$userData</span>) use (<span class="hljs-variable">$userId</span>) {
            <span class="hljs-built_in">return</span> <span class="hljs-variable">$this</span>-&gt;cache-&gt;setAsync(<span class="hljs-string">"user:<span class="hljs-variable">$userId</span>"</span>, <span class="hljs-variable">$userData</span>);
        })
        -&gt;<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span>() use (<span class="hljs-variable">$userId</span>) {
            <span class="hljs-built_in">return</span> <span class="hljs-string">"User <span class="hljs-variable">$userId</span> cached"</span>;
        });
}
</code></pre>
<p>è¿™èƒ½å·¥ä½œï¼Œä½†å¾ˆéš¾é˜…è¯»å’Œç†è§£ã€‚ä½¿ç”¨Â <code>catch()</code>Â çš„é”™è¯¯å¤„ç†ä¼šå˜å¾—æ··ä¹±ã€‚è°ƒè¯•å¾ˆç—›è‹¦ã€‚è€Œä¸”æ„Ÿè§‰ä¸åƒ PHPã€‚</p>
<h3 data-id="heading-7">çº¤ç¨‹è§£å†³æ–¹æ¡ˆ</h3>
<p>æœ‰äº†çº¤ç¨‹ï¼Œåƒ ReactPHP è¿™æ ·çš„åº“å¯ä»¥æä¾›è¿™æ ·çš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ä½¿ç”¨çº¤ç¨‹ï¼ˆPHP 8.1 ä¹‹åï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchUserData</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> <span class="hljs-variable">$userId</span></span>): <span class="hljs-title">string</span> </span>{
    <span class="hljs-variable">$response</span> = <span class="hljs-title function_ invoke__">await</span>(<span class="hljs-variable">$this</span>-&gt;httpClient-&gt;<span class="hljs-title function_ invoke__">getAsync</span>(<span class="hljs-string">"/users/<span class="hljs-subst">$userId</span>"</span>));
 
    <span class="hljs-variable">$userData</span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">getBody</span>());
 
    <span class="hljs-title function_ invoke__">await</span>(<span class="hljs-variable">$this</span>-&gt;cache-&gt;<span class="hljs-title function_ invoke__">setAsync</span>(<span class="hljs-string">"user:<span class="hljs-subst">$userId</span>"</span>, <span class="hljs-variable">$userData</span>));
 
    <span class="hljs-keyword">return</span> <span class="hljs-string">"User <span class="hljs-subst">$userId</span> cached"</span>;
}
</code></pre>
<p>å¥½å¤šäº†ï¼ä½†Â <code>await()</code>Â æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">React</span>\<span class="hljs-title class_">Async</span>;
 
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">await</span>(<span class="hljs-params">PromiseInterface <span class="hljs-variable">$promise</span></span>): <span class="hljs-title">mixed</span> </span>{
    <span class="hljs-comment">// æŒ‚èµ·çº¤ç¨‹å¹¶æ³¨å†Œ promise å›è°ƒ</span>
    <span class="hljs-variable">$result</span> = <span class="hljs-title class_">Fiber</span>::<span class="hljs-title function_ invoke__">suspend</span>([
        <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'await'</span>,
        <span class="hljs-string">'promise'</span> =&gt; <span class="hljs-variable">$promise</span>
    ]);
 
    <span class="hljs-comment">// æ¢å¤æ—¶ï¼Œæˆ‘ä»¬å°†å¾—åˆ°ç»“æœæˆ–å¼‚å¸¸</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$result</span> <span class="hljs-keyword">instanceof</span> \<span class="hljs-built_in">Throwable</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-variable">$result</span>;
    }
 
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$result</span>;
}
</code></pre>
<p>å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œåƒ PHPStan è¿™æ ·çš„å·¥å…·å¯ä»¥è®©ä½ æ·»åŠ ä¸€äº›æ³›å‹é­”æ³•ï¼Œè¿™æ ·Â <code>await()</code>Â å°±èƒ½å‡†ç¡®çŸ¥é“ä»ä½ çš„ Promise è¿”å›ä»€ä¹ˆã€‚è¿™ç§å¼ºå¤§çš„é™æ€åˆ†ææ„Ÿè§‰å°±åƒé­”æ³•ã€‚å¤šé…·å•Šï¼Ÿ</p>
<p>ä»¥ä¸‹æ˜¯å‘ç”Ÿçš„è¿‡ç¨‹ï¼š</p>
<ol>
<li>ç”¨æˆ·ä»£ç è°ƒç”¨Â <code>await($promise)</code>ï¼ˆåœ¨çº¤ç¨‹å†…éƒ¨ï¼‰</li>
<li><code>await()</code>Â è°ƒç”¨Â <code>Fiber::suspend()</code>Â ä¼ é€’ promise</li>
<li>äº‹ä»¶å¾ªç¯çœ‹åˆ°æŒ‚èµ·çš„çº¤ç¨‹å’Œ promise</li>
<li>äº‹ä»¶å¾ªç¯åœ¨çº¤ç¨‹æŒ‚èµ·æ—¶ç…§å¸¸ç»§ç»­å¤„ç†å…¶ä»–äº‹æƒ…</li>
<li>å½“ promise è§£å†³æ—¶ï¼Œå¾ªç¯è°ƒç”¨Â <code>$fiber-&gt;resume($value)</code></li>
<li>æ‰§è¡Œåœ¨Â <code>await()</code>Â ä¸­ç»§ç»­ï¼Œè¿”å›å€¼</li>
<li>ç”¨æˆ·ä»£ç å¾—åˆ°å€¼ï¼Œå°±åƒå®ƒæ˜¯åŒæ­¥çš„ï¼</li>
</ol>
<p>çº¤ç¨‹åœ¨ç­‰å¾…å¼‚æ­¥æ“ä½œæ—¶æŒ‚èµ·ï¼Œä½†ç”¨æˆ·çš„ä»£ç çœ‹èµ·æ¥å®Œå…¨æ˜¯åŒæ­¥çš„ã€‚</p>
<h3 data-id="heading-8">æ›´è¿›ä¸€æ­¥ï¼šçœŸæ­£é€æ˜çš„å¼‚æ­¥</h3>
<p>ä½†æˆ‘ä»¬å¯ä»¥èµ°å¾—æ›´è¿œï¼åƒ AmPHP è¿™æ ·çš„åº“é€šè¿‡åˆ›å»ºå›´ç»•å¼‚æ­¥æ“ä½œçš„çº¤ç¨‹æ„ŸçŸ¥åŒ…è£…å™¨ï¼Œå°†å…¶æå‡åˆ°æ–°çš„æ°´å¹³ã€‚ä½ ä¸éœ€è¦å•ç‹¬çš„Â <code>getAsync()</code>Â å’ŒÂ <code>await()</code>Â è°ƒç”¨ï¼Œåªéœ€è¦çœ‹èµ·æ¥å®Œå…¨åŒæ­¥çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// AmPHP æ–¹æ³•ï¼šä¸éœ€è¦ await()ï¼</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchUserData</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> <span class="hljs-variable">$userId</span></span>): <span class="hljs-title">string</span> </span>{
    <span class="hljs-variable">$response</span> = <span class="hljs-variable language_">$this</span>-&gt;httpClient-&gt;<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">"/users/<span class="hljs-subst">$userId</span>"</span>);  <span class="hljs-comment">// çœ‹èµ·æ¥åŒæ­¥ï¼Œå®é™…å¼‚æ­¥ï¼</span>
 
    <span class="hljs-variable">$userData</span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">getBody</span>());
 
    <span class="hljs-variable language_">$this</span>-&gt;cache-&gt;<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-string">"user:<span class="hljs-subst">$userId</span>"</span>, <span class="hljs-variable">$userData</span>);  <span class="hljs-comment">// çœ‹èµ·æ¥åŒæ­¥ï¼Œå®é™…å¼‚æ­¥ï¼</span>
 
    <span class="hljs-keyword">return</span> <span class="hljs-string">"User <span class="hljs-subst">$userId</span> cached"</span>;
}
</code></pre>
<p>ç­‰ç­‰ï¼Œä»€ä¹ˆï¼Ÿæ²¡æœ‰Â <code>await()</code>Â è°ƒç”¨ï¼Ÿè¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</p>
<p>é­”æ³•åœ¨äºÂ <code>get()</code>Â å’ŒÂ <code>set()</code>Â å†…éƒ¨ä½¿ç”¨çº¤ç¨‹ã€‚è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpClient</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$url</span></span>): <span class="hljs-title">Response</span> </span>{
        <span class="hljs-comment">// åˆ›å»ºå¼‚æ­¥æ“ä½œ</span>
        <span class="hljs-variable">$promise</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">performAsyncRequest</span>(<span class="hljs-string">'GET'</span>, <span class="hljs-variable">$url</span>);
 
        <span class="hljs-comment">// æŒ‚èµ·å½“å‰çº¤ç¨‹å¹¶å°† promise ä¼ é€’ç»™äº‹ä»¶å¾ªç¯</span>
        <span class="hljs-variable">$response</span> = <span class="hljs-title class_">\Fiber</span>::<span class="hljs-title function_ invoke__">suspend</span>([
            <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'await'</span>,
            <span class="hljs-string">'promise'</span> =&gt; <span class="hljs-variable">$promise</span>
        ]);
 
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$response</span> <span class="hljs-keyword">instanceof</span> \<span class="hljs-built_in">Throwable</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-variable">$response</span>;
        }
 
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$response</span>;
    }
}
</code></pre>
<p>ä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œä»–ä»¬åªæ˜¯è°ƒç”¨äº†Â <code>get()</code>Â å¹¶å¾—åˆ°äº†å“åº”ã€‚ä»–ä»¬å®Œå…¨ä¸çŸ¥é“è¿™æ˜¯å¼‚æ­¥çš„ã€‚</p>
<p>è¿™å°±æ˜¯çº¤ç¨‹çš„ç²¾é«“ï¼šè®©å¼‚æ­¥æ“ä½œå®Œå…¨é€æ˜ã€‚ç”¨æˆ·ç¼–å†™çœ‹èµ·æ¥åƒé˜»å¡çš„åŒæ­¥ PHP ä»£ç ã€‚åº“ä½¿ç”¨çº¤ç¨‹åœ¨å¹•åå¤„ç†æ‰€æœ‰å¼‚æ­¥å¤æ‚æ€§ã€‚</p>
<h3 data-id="heading-9">æ¯”è¾ƒè¿™äº›æ–¹æ³•</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹æ¼”å˜è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// 1. ä¼ ç»Ÿå¼‚æ­¥ä¸ promisesï¼ˆæ— çº¤ç¨‹ï¼‰</span>
<span class="hljs-variable">$promise</span> = <span class="hljs-variable language_">$this</span>-&gt;httpClient-&gt;<span class="hljs-title function_ invoke__">getAsync</span>(<span class="hljs-string">"/users/<span class="hljs-subst">$userId</span>"</span>)
    -&gt;<span class="hljs-title function_ invoke__">then</span>(fn(<span class="hljs-variable">$response</span>) =&gt; <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">getBody</span>()))
    -&gt;<span class="hljs-title function_ invoke__">then</span>(fn(<span class="hljs-variable">$userData</span>) =&gt; <span class="hljs-variable language_">$this</span>-&gt;cache-&gt;<span class="hljs-title function_ invoke__">setAsync</span>(<span class="hljs-string">"user:<span class="hljs-subst">$userId</span>"</span>, <span class="hljs-variable">$userData</span>))
    -&gt;<span class="hljs-title function_ invoke__">then</span>(fn() =&gt; <span class="hljs-string">"User <span class="hljs-subst">$userId</span> cached"</span>);
 
<span class="hljs-comment">// 2. ä½¿ç”¨ await() è¾…åŠ©å‡½æ•°çš„å¼‚æ­¥ï¼ˆä½¿ç”¨çº¤ç¨‹ï¼‰</span>
<span class="hljs-variable">$response</span> = <span class="hljs-title function_ invoke__">await</span>(<span class="hljs-variable">$this</span>-&gt;httpClient-&gt;<span class="hljs-title function_ invoke__">getAsync</span>(<span class="hljs-string">"/users/<span class="hljs-subst">$userId</span>"</span>));
<span class="hljs-variable">$userData</span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">getBody</span>());
<span class="hljs-title function_ invoke__">await</span>(<span class="hljs-variable">$this</span>-&gt;cache-&gt;<span class="hljs-title function_ invoke__">setAsync</span>(<span class="hljs-string">"user:<span class="hljs-subst">$userId</span>"</span>, <span class="hljs-variable">$userData</span>));
<span class="hljs-keyword">return</span> <span class="hljs-string">"User <span class="hljs-subst">$userId</span> cached"</span>;
 
<span class="hljs-comment">// 3. å®Œå…¨é€æ˜çš„å¼‚æ­¥ï¼ˆçº¤ç¨‹éšè—åœ¨åº“ä¸­ï¼‰</span>
<span class="hljs-variable">$response</span> = <span class="hljs-variable language_">$this</span>-&gt;httpClient-&gt;<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">"/users/<span class="hljs-subst">$userId</span>"</span>);
<span class="hljs-variable">$userData</span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">getBody</span>());
<span class="hljs-variable language_">$this</span>-&gt;cache-&gt;<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-string">"user:<span class="hljs-subst">$userId</span>"</span>, <span class="hljs-variable">$userData</span>);
<span class="hljs-keyword">return</span> <span class="hljs-string">"User <span class="hljs-subst">$userId</span> cached"</span>;
</code></pre>
<p>æ³¨æ„æ–¹æ³• #3 çœ‹èµ·æ¥ä¸åŒæ­¥ä»£ç å®Œå…¨ä¸€æ ·ï¼Ÿè¿™å°±æ˜¯æ­£ç¡®ä½¿ç”¨çº¤ç¨‹çš„åŠ›é‡ã€‚åº“å¼€å‘è€…å¤„ç†ä¸€æ¬¡å¤æ‚æ€§ã€‚æ¯ä¸ªç”¨æˆ·éƒ½å—ç›Šäºä¸€ä¸ªå¹²å‡€çš„ã€çœ‹èµ·æ¥åŒæ­¥çš„ APIï¼Œå®é™…ä¸Šåœ¨åº•å±‚æ˜¯å¼‚æ­¥çš„ã€‚</p>
<h3 data-id="heading-10">ä¸ºä»€ä¹ˆè¿™å¯¼è‡´äº†è¯¯è§£</h3>
<p>å› ä¸ºçº¤ç¨‹æœ€æ˜¾çœ¼çš„ç”¨é€”æ˜¯è®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åŒæ­¥ï¼Œå¼€å‘è€…å‡è®¾çº¤ç¨‹æœ¬èº«å°±æ˜¯å¼‚æ­¥æœºåˆ¶ã€‚ä½†çº¤ç¨‹æœ¬èº«ä¸åšä»»ä½•å¼‚æ­¥æ“ä½œã€‚å®ƒä»¬åªæ˜¯æä¾›æŒ‚èµ·/æ¢å¤æœºåˆ¶ï¼Œä½¿å¾—çœ‹èµ·æ¥åŒæ­¥çš„å¼‚æ­¥ä»£ç æˆä¸ºå¯èƒ½ã€‚</p>
<p>äº‹ä»¶å¾ªç¯ä»åœ¨åšå®é™…çš„å¼‚æ­¥å·¥ä½œã€‚çº¤ç¨‹åªæ˜¯è®© API æ›´å¥½ç”¨ã€‚</p>
<p>è¿™ä¸ªåŒºåˆ«è‡³å…³é‡è¦ï¼š<strong>çº¤ç¨‹æ˜¯ç®¡ç†æ‰§è¡Œæµçš„å·¥å…·ï¼Œè€Œä¸æ˜¯å®ç°å¹¶è¡Œæˆ–å¼‚æ­¥çš„å·¥å…·</strong>ã€‚</p>
<h2 data-id="heading-11">çœŸæ­£çš„é—®é¢˜ï¼šMCP SDK ä¸­çš„å®¢æˆ·ç«¯é€šä¿¡</h2>
<p>ç°åœ¨è®©æˆ‘ä»¬è¿›å…¥æœ¬æ–‡çš„æ ¸å¿ƒé—®é¢˜ã€‚åœ¨å¼€å‘ Model Context Protocol (MCP) çš„ PHP å®ç°æ—¶ï¼Œå¼€å‘å›¢é˜Ÿé‡åˆ°äº†ä¸€ä¸ªä¼¼ä¹æ— æ³•ä¼˜é›…è§£å†³çš„è®¾è®¡æŒ‘æˆ˜ã€‚</p>
<h3 data-id="heading-12">ä»€ä¹ˆæ˜¯ MCPï¼Ÿ</h3>
<p>Model Context Protocol æ˜¯è¿æ¥ AI åŠ©æ‰‹ï¼ˆå¦‚ Claudeï¼‰ä¸å¤–éƒ¨å·¥å…·å’Œæ•°æ®æºçš„æ ‡å‡†ã€‚</p>
<p>ä¸€ä¸ª MCP æœåŠ¡å™¨æš´éœ²ï¼š</p>
<ul>
<li><strong>å·¥å…·</strong>ï¼šAI å¯ä»¥è°ƒç”¨çš„å‡½æ•°ï¼ˆä¾‹å¦‚ï¼š"æœç´¢æ•°æ®åº“"ã€"å‘é€é‚®ä»¶"ï¼‰</li>
<li><strong>èµ„æº</strong>ï¼šAI å¯ä»¥è¯»å–çš„æ•°æ®ï¼ˆä¾‹å¦‚ï¼š"é¡¹ç›®æ–‡ä»¶"ã€"API æ–‡æ¡£"ï¼‰</li>
<li><strong>æç¤º</strong>ï¼šAI å¯ä»¥ä½¿ç”¨çš„æ¨¡æ¿</li>
</ul>
<p>è¯¥åè®®æ˜¯åŒå‘çš„ JSON-RPCï¼Œæ”¯æŒä¸åŒçš„ä¼ è¾“æ–¹å¼ï¼ˆSTDIOã€HTTP + SSEã€è‡ªå®šä¹‰ï¼‰ã€‚</p>
<h3 data-id="heading-13">æŒ‘æˆ˜</h3>
<p>MCP è§„èŒƒåŒ…å«æœåŠ¡å™¨åœ¨è¯·æ±‚å¤„ç†æœŸé—´ä¸å®¢æˆ·ç«¯é€šä¿¡çš„åŠŸèƒ½ï¼š</p>
<ul>
<li><strong>æ—¥å¿—è®°å½•</strong>ï¼šå‘å®¢æˆ·ç«¯å‘é€æ—¥å¿—æ¶ˆæ¯</li>
<li><strong>è¿›åº¦æ›´æ–°</strong>ï¼šæ›´æ–°å®¢æˆ·ç«¯å…³äºé•¿æ—¶é—´è¿è¡Œæ“ä½œçš„è¿›åº¦</li>
<li><strong>é‡‡æ ·</strong>ï¼šè¯·æ±‚å®¢æˆ·ç«¯ä½¿ç”¨å…¶ LLM ç”Ÿæˆæ–‡æœ¬</li>
</ul>
<p>è¿™äº›ä¸ä»…ä»…æ˜¯å“åº”ç±»å‹ã€‚ä¸ï¼Œé—®é¢˜æ˜¯å®ƒä»¬éœ€è¦åœ¨å·¥å…·æ‰§è¡ŒæœŸé—´å‘ç”Ÿã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">å®¢æˆ·ç«¯: <span class="hljs-string">"å˜¿æœåŠ¡å™¨ï¼Œè¿è¡Œ 'analyze_dataset' å·¥å…·"</span>
æœåŠ¡å™¨: <span class="hljs-string">"å¼€å§‹..."</span> [å‘é€æ—¥å¿—]
æœåŠ¡å™¨: <span class="hljs-string">"25% å®Œæˆ"</span> [å‘é€è¿›åº¦]
æœåŠ¡å™¨: <span class="hljs-string">"50% å®Œæˆ"</span> [å‘é€è¿›åº¦]
æœåŠ¡å™¨: <span class="hljs-string">"ç”Ÿæˆæ‘˜è¦ï¼Œéœ€è¦ä½ çš„ LLM"</span> [å‘é€é‡‡æ ·è¯·æ±‚]
å®¢æˆ·ç«¯: <span class="hljs-string">"è¿™æ˜¯ç”Ÿæˆçš„æ‘˜è¦"</span> [å“åº”é‡‡æ ·]
æœåŠ¡å™¨: <span class="hljs-string">"å®Œæˆï¼è¿™æ˜¯å®Œæ•´ç»“æœ"</span> [å‘é€æœ€ç»ˆå“åº”]
</code></pre>
<p>æœåŠ¡å™¨éœ€è¦ï¼š</p>
<ol>
<li>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘é€æ¶ˆæ¯</li>
<li>ç­‰å¾…æ¥è‡ªå®¢æˆ·ç«¯çš„å“åº”</li>
<li>åœ¨æ”¶åˆ°å“åº”åç»§ç»­æ‰§è¡Œ</li>
<li>è®©æ‰€æœ‰è¿™äº›æ„Ÿè§‰èµ·æ¥å¾ˆè‡ªç„¶</li>
</ol>
<h3 data-id="heading-14">API éœ€æ±‚</h3>
<p>åœ¨ MCP SDK æ–¹é¢ï¼Œä¼˜å…ˆäº‹é¡¹ä¹‹ä¸€æ˜¯ä½¿å…¶æå…¶æ˜“ç”¨ã€‚å¼€å‘å›¢é˜Ÿå¸Œæœ›å¼€å‘è€…è¿™æ ·ç¼–å†™å·¥å…·ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$server</span>-&gt;<span class="hljs-title function_ invoke__">addTool</span>(
    function (<span class="hljs-keyword">string</span> <span class="hljs-variable">$dataset</span>, ClientGateway <span class="hljs-variable">$client</span>): <span class="hljs-keyword">array</span> {
        <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-title class_">LoggingLevel</span>::<span class="hljs-variable constant_">Info</span>, <span class="hljs-string">"å¼€å§‹åˆ†æ"</span>);
 
        <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$steps</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$step</span>) {
            <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">progress</span>(<span class="hljs-variable">$progress</span>, <span class="hljs-number">1</span>, <span class="hljs-variable">$step</span>);
            <span class="hljs-title function_ invoke__">doWork</span>(<span class="hljs-variable">$step</span>);
        }
 
        <span class="hljs-variable">$summary</span> = <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">sample</span>(<span class="hljs-string">"æ€»ç»“è¿™äº›æ•°æ®ï¼š..."</span>);
 
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'complete'</span>, <span class="hljs-string">'summary'</span> =&gt; <span class="hljs-variable">$summary</span>];
    },
    name: <span class="hljs-string">'analyze_dataset'</span>
);
</code></pre>
<p>çœ‹çœ‹è¿™æ®µä»£ç ã€‚å®ƒå¾ˆæ¼‚äº®ã€‚å®ƒå¾ˆç®€å•ã€‚å®ƒçœ‹èµ·æ¥å®Œå…¨æ˜¯åŒæ­¥çš„ã€‚æ²¡æœ‰å›è°ƒï¼Œæ²¡æœ‰ promisesï¼Œæ²¡æœ‰ async/await è¯­æ³•ï¼Œæ²¡æœ‰ yield ç”Ÿæˆå™¨ã€‚åªæ˜¯æ™®é€šçš„ PHPã€‚</p>
<p>ä½†åœ¨åº•å±‚ï¼Œè¿™éœ€è¦ï¼š</p>
<ol>
<li>å‘å®¢æˆ·ç«¯å‘é€ JSON-RPC é€šçŸ¥ï¼ˆæ—¥å¿—ã€è¿›åº¦ï¼‰</li>
<li>å‘é€ JSON-RPC è¯·æ±‚å¹¶ç­‰å¾…å“åº”ï¼ˆé‡‡æ ·ï¼‰</li>
<li>ä¸ä»»ä½•ä¼ è¾“æ–¹å¼å·¥ä½œï¼Œæ— è®ºæ˜¯å¦é˜»å¡ï¼</li>
<li>æ— è®ºä½ ä½¿ç”¨åŸç”Ÿ PHPã€ReactPHPã€Swoole è¿˜æ˜¯ RoadRunner éƒ½èƒ½å·¥ä½œ</li>
</ol>
<p>å¦‚ä½•å®ç°ï¼Ÿ</p>
<h3 data-id="heading-15">ä¸ºä»€ä¹ˆä¼ ç»Ÿæ–¹æ³•è¡Œä¸é€š</h3>
<p>å¼€å‘å›¢é˜ŸèŠ±äº†å‡ ä¸ªå°æ—¶è€ƒè™‘ä¸åŒçš„è§£å†³æ–¹æ¡ˆï¼š</p>
<p><strong>é€‰é¡¹ 1ï¼šè®©ä¸€åˆ‡éƒ½å¼‚æ­¥</strong></p>
<pre><code class="hljs language-bash" lang="bash">// åŸºäº Promise çš„æ–¹æ³• - åµŒå¥—ä¸”æ··ä¹±
<span class="hljs-variable">$server</span>-&gt;addTool(<span class="hljs-keyword">function</span> (string <span class="hljs-variable">$dataset</span>, <span class="hljs-variable">$client</span>) {
    <span class="hljs-built_in">return</span> <span class="hljs-variable">$client</span>-&gt;logAsync(LoggingLevel::Info, <span class="hljs-string">"å¼€å§‹åˆ†æ"</span>)
        -&gt;<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span>() use (<span class="hljs-variable">$client</span>) {
            <span class="hljs-built_in">return</span> <span class="hljs-variable">$client</span>-&gt;progressAsync(0.33, 1, <span class="hljs-string">"æ­¥éª¤ 1"</span>);
        })
        -&gt;<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span>() use (<span class="hljs-variable">$client</span>) {
            <span class="hljs-built_in">return</span> <span class="hljs-variable">$client</span>-&gt;progressAsync(0.66, 1, <span class="hljs-string">"æ­¥éª¤ 2"</span>);
        })
        -&gt;<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span>() use (<span class="hljs-variable">$client</span>) {
            <span class="hljs-built_in">return</span> <span class="hljs-variable">$client</span>-&gt;sampleAsync(<span class="hljs-string">"æ€»ç»“..."</span>);
        })
        -&gt;<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-variable">$summary</span>) {
            <span class="hljs-built_in">return</span> [<span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'complete'</span>, <span class="hljs-string">'summary'</span> =&gt; <span class="hljs-variable">$summary</span>];
        });
});
</code></pre>
<p>å›è°ƒåµŒå¥—å¾ˆå¿«å°±ä¼šå˜å¾—ç¬¨æ‹™ã€‚å³ä½¿ä½¿ç”¨Â <code>await()</code>Â è¾…åŠ©å‡½æ•°æ¥ç®€åŒ–ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$server</span>-&gt;<span class="hljs-title function_ invoke__">addTool</span>(function (<span class="hljs-keyword">string</span> <span class="hljs-variable">$dataset</span>, <span class="hljs-variable">$client</span>) {
    <span class="hljs-title function_ invoke__">await</span>(<span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">logAsync</span>(<span class="hljs-title class_">LoggingLevel</span>::<span class="hljs-variable constant_">Info</span>, <span class="hljs-string">"å¼€å§‹"</span>));
    <span class="hljs-title function_ invoke__">await</span>(<span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">progressAsync</span>(<span class="hljs-number">0.33</span>, <span class="hljs-number">1</span>, <span class="hljs-string">"æ­¥éª¤ 1"</span>));
    <span class="hljs-title function_ invoke__">await</span>(<span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">progressAsync</span>(<span class="hljs-number">0.66</span>, <span class="hljs-number">1</span>, <span class="hljs-string">"æ­¥éª¤ 2"</span>));
    <span class="hljs-variable">$summary</span> = <span class="hljs-title function_ invoke__">await</span>(<span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">sampleAsync</span>(<span class="hljs-string">"æ€»ç»“..."</span>));
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'complete'</span>, <span class="hljs-string">'summary'</span> =&gt; <span class="hljs-variable">$summary</span>];
});
</code></pre>
<p>è¿™å¼ºåˆ¶æ¯ä¸ªäººå­¦ä¹ å¼‚æ­¥ PHPã€‚å®ƒä½¿å¼‚æ­¥åº“æˆä¸ºæ ¸å¿ƒä¾èµ–ï¼Œå¹¶å°† SDK é™åˆ¶åœ¨é€‰æ‹©çš„å¼‚æ­¥è¿è¡Œæ—¶ã€‚ä¸æœåŠ¡å™¨è¯·æ±‚å’Œå“åº”çš„ PSR-7 ä¸åŒï¼ŒPHP ä¸­æ²¡æœ‰äº‹ä»¶å¾ªç¯æˆ–å¼‚æ­¥è¿è¡Œæ—¶çš„æ ‡å‡†ï¼Œå› æ­¤ä¾›åº”å•†é”å®šä¸æ˜¯ä¸€ä¸ªé€‰é¡¹ã€‚å¯¹äºç®€å•çš„å·¥å…·æ¥è¯´ï¼Œè¿™ä¹Ÿæ˜¯è¿‡åº¦æ€ä¼¤ã€‚è¢«æ‹’ç»ã€‚</p>
<p><strong>é€‰é¡¹ 2ï¼šå›è°ƒ</strong></p>
<pre><code class="hljs language-bash" lang="bash">// å›è°ƒåœ°ç‹±è­¦å‘Šï¼
<span class="hljs-variable">$server</span>-&gt;addTool(<span class="hljs-keyword">function</span> (string <span class="hljs-variable">$dataset</span>, <span class="hljs-variable">$client</span>) {
    <span class="hljs-variable">$client</span>-&gt;<span class="hljs-built_in">log</span>(..., <span class="hljs-keyword">function</span>() use (<span class="hljs-variable">$client</span>) {
        <span class="hljs-variable">$client</span>-&gt;progress(..., <span class="hljs-keyword">function</span>() use (<span class="hljs-variable">$client</span>) {
            <span class="hljs-variable">$client</span>-&gt;sample(..., <span class="hljs-keyword">function</span>(<span class="hljs-variable">$summary</span>) {
                <span class="hljs-built_in">return</span> [<span class="hljs-string">'summary'</span> =&gt; <span class="hljs-variable">$summary</span>];
            });
        });
    });
});
</code></pre>
<p>æ²¡äººæƒ³è¦è¿™ä¸ªã€‚æ— éœ€è¿›ä¸€æ­¥è§£é‡Šã€‚è¢«æ‹’ç»ã€‚</p>
<p><strong>é€‰é¡¹ 3ï¼šçŠ¶æ€æœºå’Œåºåˆ—åŒ–</strong></p>
<p>å¦‚æœæˆ‘ä»¬è·Ÿè¸ªæ‰§è¡ŒçŠ¶æ€å¹¶ä»æ£€æŸ¥ç‚¹é‡æ–°æ‰§è¡Œå¤„ç†ç¨‹åºä¼šæ€ä¹ˆæ ·ï¼Ÿ</p>
<pre><code class="hljs language-ini" lang="ini">// ä¼ªä»£ç 
if ($state-&gt;<span class="hljs-attr">step</span> === <span class="hljs-number">0</span>) {
    $client-&gt;log(...)<span class="hljs-comment">;</span>
    $state-&gt;<span class="hljs-attr">step</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
    return $state-&gt;serialize()<span class="hljs-comment">;</span>
}
if ($state-&gt;<span class="hljs-attr">step</span> === <span class="hljs-number">1</span>) {
    $client-&gt;progress(...)<span class="hljs-comment">;</span>
    $state-&gt;<span class="hljs-attr">step</span> = <span class="hljs-number">2</span><span class="hljs-comment">;</span>
    return $state-&gt;serialize()<span class="hljs-comment">;</span>
}
// ...ä»¥æ­¤ç±»æ¨
</code></pre>
<p>è¿™éå¸¸å¤æ‚ã€‚å³ä½¿æŠ½è±¡éƒ¨åˆ†å†…å®¹å¹¶å…è®¸ç”¨æˆ·ç¼–å†™åŒæ­¥ä»£ç ï¼Œè·Ÿè¸ªçŠ¶æ€ä¹Ÿæœ‰å¾ˆå¤šå·¥ä½œè¦åšã€‚å¦‚ä½•åºåˆ—åŒ–é—­åŒ…ï¼Ÿå¦‚ä½•æ¢å¤å±€éƒ¨å˜é‡ï¼Ÿå¦‚ä½•å¤„ç†å¾ªç¯ï¼Ÿè¿™å°†éœ€è¦å®Œå…¨æ”¹å˜ç”¨æˆ·ç¼–å†™å·¥å…·çš„æ–¹å¼ã€‚è¢«æ‹’ç»ã€‚</p>
<p><strong>é€‰é¡¹ 4ï¼šå¸¦ yield çš„ç”Ÿæˆå™¨</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$server</span>-&gt;<span class="hljs-title function_ invoke__">addTool</span>(function (<span class="hljs-keyword">string</span> <span class="hljs-variable">$dataset</span>, <span class="hljs-variable">$client</span>)https:<span class="hljs-comment">//www.falvce.com/ {</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">log</span>(...);
    <span class="hljs-keyword">yield</span> <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">progress</span>(...);
    <span class="hljs-variable">$summary</span> = <span class="hljs-keyword">yield</span> <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">sample</span>(...);
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'summary'</span> =&gt; <span class="hljs-variable">$summary</span>];
});
</code></pre>
<p>è¿™æ›´æ¥è¿‘äº†ï¼Œä½†ç”Ÿæˆå™¨æœ‰é™åˆ¶ã€‚ä½ ä¸èƒ½è½»æ¾åœ°ä»åµŒå¥—å‡½æ•°è°ƒç”¨ä¸­ yieldã€‚è¯­æ³•å¾ˆç¬¨æ‹™ã€‚ç”¨æˆ·éœ€è¦ç†è§£ç”Ÿæˆå™¨ã€‚ä¸ç†æƒ³ï¼Œä½†å¯è¡Œã€‚</p>
<p><strong>é€‰é¡¹ 5ï¼šPHP çº¤ç¨‹</strong></p>
<p>å¦‚æœæŒ‚èµ·/æ¢å¤æ˜¯ä¸å¯è§çš„ä¼šæ€ä¹ˆæ ·ï¼Ÿå¦‚æœÂ <code>$client-&gt;log()</code>Â çœ‹èµ·æ¥åƒä¸€ä¸ªæ™®é€šçš„æ–¹æ³•è°ƒç”¨ï¼Œä½†åœ¨å¹•åå®ƒæŒ‚èµ·çº¤ç¨‹ï¼Œå‘é€æ¶ˆæ¯ï¼Œç„¶åæ¢å¤å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ç”¨æˆ·ç¼–å†™çš„å†…å®¹ï¼ˆçœ‹èµ·æ¥æ˜¯åŒæ­¥çš„ï¼ï¼‰</span>
<span class="hljs-variable">$server</span>-&gt;<span class="hljs-title function_ invoke__">addTool</span>(function (<span class="hljs-keyword">string</span> <span class="hljs-variable">$dataset</span>, <span class="hljs-variable">$client</span>) {
    <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">log</span>(...);  <span class="hljs-comment">// å†…éƒ¨æŒ‚èµ·</span>
    <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">progress</span>(...);  <span class="hljs-comment">// å†…éƒ¨æŒ‚èµ·</span>
    <span class="hljs-variable">$summary</span> = <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">sample</span>(...);  <span class="hljs-comment">// æŒ‚èµ·å¹¶ç­‰å¾…</span>
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'summary'</span> =&gt; <span class="hljs-variable">$summary</span>];
});
</code></pre>
<p>å°±æ˜¯è¿™ä¸ªã€‚è¿™å°±æ˜¯è§£å†³æ–¹æ¡ˆã€‚ç”¨æˆ·ç¼–å†™æ™®é€šçš„ PHPã€‚SDK å¤„ç†æ‰€æœ‰å¤æ‚æ€§ã€‚</p>
<h3 data-id="heading-16">"å•Šå“ˆï¼"æ—¶åˆ»</h3>
<p>å½“å¼€å‘å›¢é˜Ÿæ„è¯†åˆ°çº¤ç¨‹æ˜¯ç­”æ¡ˆæ—¶ï¼Œä¸€åˆ‡éƒ½è±ç„¶å¼€æœ—äº†ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬å®Œç¾çš„åŸå› ï¼š</p>
<ul>
<li><strong>é€æ˜</strong>ï¼šç”¨æˆ·ä»£ç ä¸éœ€è¦çŸ¥é“çº¤ç¨‹</li>
<li><strong>çµæ´»</strong>ï¼šé€‚ç”¨äºä»»ä½•ä¼ è¾“ï¼ˆé˜»å¡æˆ–éé˜»å¡ï¼‰</li>
<li><strong>ç®€å•</strong>ï¼šAPI åªæ˜¯å¸¸è§„æ–¹æ³•è°ƒç”¨</li>
<li><strong>å¼ºå¤§</strong>ï¼šå®Œå…¨æ§åˆ¶æ‰§è¡Œæµ</li>
<li><strong>é€šç”¨</strong>ï¼šé€‚ç”¨äºåŒæ­¥ PHPã€å¼‚æ­¥ PHPã€ä»»ä½•è¿è¡Œæ—¶</li>
</ul>
<p>çº¤ç¨‹è®©å¼€å‘å›¢é˜Ÿèƒ½å¤Ÿåœ¨å¹²å‡€çš„ã€çœ‹èµ·æ¥åŒæ­¥çš„ API èƒŒåéšè—åŒå‘é€šä¿¡çš„å¤æ‚æ€§ã€‚ç”¨æˆ·ç¼–å†™ç®€å•çš„å‡½æ•°ã€‚SDK ç®¡ç†çº¤ç¨‹ç”Ÿå‘½å‘¨æœŸã€‚ä¼ è¾“å¤„ç†å®é™…çš„ I/Oã€‚</p>
<p>è¿™æ˜¯å®Œç¾çš„å…³æ³¨ç‚¹åˆ†ç¦»ã€‚</p>
<h2 data-id="heading-17">æ€è€ƒè¿‡ç¨‹ï¼šä¸ºä»€ä¹ˆçº¤ç¨‹åœ¨è¿™é‡Œæœ‰æ•ˆ</h2>
<p>è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸ºä»€ä¹ˆçº¤ç¨‹ç‰¹åˆ«é€‚åˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-18">æ ¸å¿ƒæŒ‘æˆ˜</h3>
<p>å½“å·¥å…·å¤„ç†ç¨‹åºè°ƒç”¨Â <code>$client-&gt;log()</code>Â æ—¶ï¼Œéœ€è¦ï¼š</p>
<ol>
<li>æš‚åœå¤„ç†ç¨‹åºçš„æ‰§è¡Œ</li>
<li>å‘å®¢æˆ·ç«¯å‘é€ JSON-RPC é€šçŸ¥ï¼ˆæœºåˆ¶å–å†³äºä¼ è¾“ï¼‰</li>
<li>ç«‹å³æ¢å¤å¤„ç†ç¨‹åºï¼ˆæ—¥å¿—è®°å½•ä¸éœ€è¦ç­‰å¾…ï¼‰</li>
</ol>
<p>å½“å·¥å…·å¤„ç†ç¨‹åºè°ƒç”¨Â <code>$client-&gt;sample()</code>Â æ—¶ï¼Œéœ€è¦ï¼š</p>
<ol>
<li>æš‚åœå¤„ç†ç¨‹åºçš„æ‰§è¡Œ</li>
<li>å‘å®¢æˆ·ç«¯å‘é€ JSON-RPC è¯·æ±‚ï¼ˆæœºåˆ¶å–å†³äºä¼ è¾“ï¼‰</li>
<li>ç­‰å¾…å®¢æˆ·ç«¯çš„å“åº”ï¼ˆå¦‚ä½•æ¥æ”¶å“åº”ä¹Ÿå–å†³äºä¼ è¾“ï¼‰</li>
<li>ä½¿ç”¨å“åº”æ¢å¤å¤„ç†ç¨‹åº</li>
</ol>
<p>å…³é”®æ´å¯Ÿï¼šéœ€è¦ç¦»å¼€å¤„ç†ç¨‹åºçš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåšå…¶ä»–äº‹æƒ…ï¼Œç„¶ååœ¨ç‰¹å®šç‚¹è¿”å›ã€‚è€Œä¸”éœ€è¦èƒ½å¤Ÿå¤šæ¬¡è¿™æ ·åšã€‚è¿™æ­£æ˜¯çº¤ç¨‹æä¾›çš„åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-19">æ¶æ„</h3>
<p>è§£å†³æ–¹æ¡ˆæœ‰ä¸‰å±‚ï¼š</p>
<ol>
<li>
<p><strong>ClientGatewayï¼ˆé¢å‘ç”¨æˆ·çš„ APIï¼‰</strong></p>
<ul>
<li>æä¾›Â <code>log()</code>ã€<code>progress()</code>ã€<code>sample()</code>Â ç­‰æ–¹æ³•</li>
<li>å†…éƒ¨è°ƒç”¨Â <code>Fiber::suspend()</code>Â ä¼ é€’æ¶ˆæ¯æ•°æ®</li>
<li>æ¢å¤æ—¶è¿”å›å“åº”</li>
</ul>
</li>
<li>
<p><strong>Protocolï¼ˆç¼–æ’å±‚ï¼‰</strong></p>
<ul>
<li>å°†å¤„ç†ç¨‹åºæ‰§è¡ŒåŒ…è£…åœ¨çº¤ç¨‹ä¸­</li>
<li>æ£€æµ‹çº¤ç¨‹ä½•æ—¶æŒ‚èµ·</li>
<li>æå–æŒ‚èµ·çš„å€¼ï¼ˆé€šçŸ¥æˆ–è¯·æ±‚ï¼‰</li>
<li>å°†çº¤ç¨‹ç§»äº¤ç»™ä¼ è¾“å±‚</li>
</ul>
</li>
<li>
<p><strong>Transportï¼ˆI/O å±‚ï¼‰</strong></p>
<ul>
<li>è·å–æŒ‚èµ·çº¤ç¨‹çš„æ‰€æœ‰æƒ</li>
<li>å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ï¼ˆå“åº”ã€è¯·æ±‚å’Œé€šçŸ¥ï¼‰</li>
<li>ç­‰å¾…å“åº”ï¼ˆå¦‚æœéœ€è¦ï¼‰</li>
<li>å‡†å¤‡å°±ç»ªæ—¶æ¢å¤çº¤ç¨‹</li>
</ul>
</li>
</ol>
<p>æ¯ä¸€å±‚éƒ½æœ‰æ˜ç¡®çš„èŒè´£ã€‚é­”æ³•åœ¨äºå®ƒä»¬å¦‚ä½•åè°ƒã€‚</p>
<h3 data-id="heading-20">ä¸ºä»€ä¹ˆå®ƒåŒæ—¶é€‚ç”¨äºåŒæ­¥å’Œå¼‚æ­¥</h3>
<p>è¿™ç§æ–¹æ³•çš„ç¾å¦™ä¹‹å¤„åœ¨äºçº¤ç¨‹ä¸ä¼ è¾“æ— å…³ã€‚æ— è®ºä½ ä½¿ç”¨çš„æ˜¯ï¼š</p>
<ul>
<li><strong>Stdio</strong>ï¼ˆé˜»å¡ï¼Œå•è¿›ç¨‹ï¼‰- å®˜æ–¹ SDK çš„ä¸€éƒ¨åˆ†</li>
<li><strong>HTTP ä¸ PHP-FPM</strong>ï¼ˆæ— çŠ¶æ€ï¼Œå¤šè¿›ç¨‹ï¼‰- å®˜æ–¹ SDK çš„ä¸€éƒ¨åˆ†</li>
<li><strong>ReactPHP</strong>ï¼ˆéé˜»å¡ï¼Œäº‹ä»¶é©±åŠ¨ï¼‰- å±•ç¤ºå¼‚æ­¥å…¼å®¹æ€§çš„å¤–éƒ¨ç¤ºä¾‹</li>
<li><strong>Swoole</strong>ï¼ˆåŸºäºåç¨‹ï¼‰- ä½¿ç”¨ç›¸åŒæ¶æ„å¯è¡Œ</li>
</ul>
<p>æŒ‚èµ·/æ¢å¤æœºåˆ¶éƒ½æ˜¯ç›¸åŒçš„ã€‚ä¼ è¾“æ ¹æ®å…¶æ‰§è¡Œæ¨¡å‹å†³å®šä½•æ—¶æ¢å¤çº¤ç¨‹ã€‚çº¤ç¨‹æœ¬èº«ä¸å…³å¿ƒã€‚å®ƒåªæ˜¯æŒ‚èµ·å’Œç­‰å¾…ã€‚</p>
<p>å¯¹äºé˜»å¡ä¼ è¾“ï¼Œæ¢å¤å‘ç”Ÿåœ¨åŒä¸€è¿›ç¨‹çš„å¾ªç¯ä¸­ã€‚å¯¹äºéé˜»å¡ä¼ è¾“ï¼Œæ¢å¤é€šè¿‡äº‹ä»¶å¾ªç¯å›è°ƒå‘ç”Ÿã€‚å¯¹äºå¤šè¿›ç¨‹ä¼ è¾“ï¼Œå½“ä»å…±äº«ä¼šè¯ä¸­æå–å“åº”æ—¶æ¢å¤å‘ç”Ÿã€‚çº¤ç¨‹ä¸å…³å¿ƒè¿™äº›ç»†èŠ‚ã€‚</p>
<h2 data-id="heading-21">å®ç°ï¼šæ¶æ„æ¦‚è¿°</h2>
<p>ç°åœ¨è®©æˆ‘ä»¬æ·±å…¥å®é™…å®ç°ã€‚ä¸‹é¢å°†å±•ç¤ºä¸€äº›æ¥è‡ª PHP MCP SDK çš„çœŸå®ä»£ç ï¼Œå¹¶è§£é‡Šä¸€åˆ‡å¦‚ä½•ç»„åˆåœ¨ä¸€èµ·ã€‚</p>
<h3 data-id="heading-22">ä¸‰ä¸ªå…³é”®ç»„ä»¶</h3>
<p>ç³»ç»Ÿæœ‰ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-css" lang="css">ç”¨æˆ·ä»£ç ï¼ˆå¤„ç†ç¨‹åºï¼‰
       â†“
ClientGatewayï¼ˆAPIï¼‰
       â†“
   Protocolï¼ˆç¼–æ’å™¨ï¼‰
       â†“
   Transportï¼ˆ<span class="hljs-selector-tag">I</span>/Oï¼‰
</code></pre>
<h3 data-id="heading-23">ç§»äº¤ï¼šä» Protocol åˆ° Transport</h3>
<p>è¿™æ˜¯å…³é”®æ—¶åˆ»ã€‚ä»¥ä¸‹æ˜¯ Protocol ä¸­çš„ç®€åŒ–æµç¨‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// src/Server/Protocol.php</span>
<span class="hljs-comment">// Protocol::handleRequest(https://www.falvce.com/)</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleRequest</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span>, SessionInterface <span class="hljs-variable">$session</span></span>): <span class="hljs-title">void</span> </span>{
    <span class="hljs-variable">$handler</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">findHandler</span>(<span class="hljs-variable">$request</span>);
 
    <span class="hljs-comment">// åœ¨çº¤ç¨‹å†…æ‰§è¡Œå¤„ç†ç¨‹åºï¼</span>
    <span class="hljs-variable">$fiber</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">\Fiber</span>(<span class="hljs-function"><span class="hljs-keyword">fn</span>(<span class="hljs-params"/>) =&gt;</span> <span class="hljs-variable">$handler</span>-&gt;<span class="hljs-title function_ invoke__">handle</span>(<span class="hljs-variable">$request</span>, <span class="hljs-variable">$session</span>));
 
    <span class="hljs-variable">$result</span> = <span class="hljs-variable">$fiber</span>-&gt;<span class="hljs-title function_ invoke__">start</span>();
 
    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$fiber</span>-&gt;<span class="hljs-title function_ invoke__">isSuspended</span>()) {
        <span class="hljs-comment">// çº¤ç¨‹äº§ç”Ÿäº†æŸäº›ä¸œè¥¿ï¼æå–å®ƒã€‚</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$result</span>[<span class="hljs-string">'type'</span>] === <span class="hljs-string">'notification'</span>) {
            <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">sendNotification</span>(<span class="hljs-variable">$result</span>[<span class="hljs-string">'notification'</span>], <span class="hljs-variable">$session</span>);
        } <span class="hljs-keyword">elseif</span> (<span class="hljs-variable">$result</span>[<span class="hljs-string">'type'</span>] === <span class="hljs-string">'request'</span>) {
            <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">sendRequest</span>(<span class="hljs-variable">$result</span>[<span class="hljs-string">'request'</span>], <span class="hljs-variable">$result</span>[<span class="hljs-string">'timeout'</span>], <span class="hljs-variable">$session</span>);
        }
 
        <span class="hljs-comment">// å°†çº¤ç¨‹äº¤ç»™ä¼ è¾“å±‚</span>
        <span class="hljs-variable language_">$this</span>-&gt;transport-&gt;<span class="hljs-title function_ invoke__">attachFiberToSession</span>(<span class="hljs-variable">$fiber</span>, <span class="hljs-variable">$session</span>-&gt;<span class="hljs-title function_ invoke__">getId</span>());
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// çº¤ç¨‹å®Œæˆè€ŒæœªæŒ‚èµ·</span>
        <span class="hljs-variable">$finalResult</span> = <span class="hljs-variable">$fiber</span>-&gt;<span class="hljs-title function_ invoke__">getReturn</span>();
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">sendResponse</span>(<span class="hljs-variable">$finalResult</span>, <span class="hljs-variable">$session</span>);
    }
}
</code></pre>
<p>åè®®å¯åŠ¨çº¤ç¨‹å¹¶æ£€æŸ¥å®ƒæ˜¯å¦æŒ‚èµ·ã€‚å¦‚æœæŒ‚èµ·äº†ï¼Œåè®®æå–è¢«æŒ‚èµ·çš„å†…å®¹ï¼ˆé€šçŸ¥æˆ–è¯·æ±‚ï¼‰ï¼Œå°†å…¶æ’é˜Ÿå‘é€ï¼Œå¹¶å°†çº¤ç¨‹äº¤ç»™ä¼ è¾“å±‚ã€‚ç¨åä¼šè¯¦ç»†è®¨è®ºè¿™ä¸€ç‚¹ã€‚ç°åœ¨è®©æˆ‘ä»¬ç»§ç»­ã€‚</p>
<p>ä»è¿™ä¸€ç‚¹å¼€å§‹ï¼Œä¼ è¾“å±‚æ‹¥æœ‰çº¤ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿›ä¸€æ­¥çš„æŒ‚èµ·å’Œæ¢å¤ç”±ä¼ è¾“å±‚å¤„ç†ã€‚</p>
<h3 data-id="heading-24">Transport çš„èŒè´£</h3>
<p>æ¯ä¸ªä¼ è¾“å¿…é¡»ï¼š</p>
<ol>
<li>ä»åè®®æ¥å—çº¤ç¨‹</li>
<li>å‘å®¢æˆ·ç«¯å‘é€æ’é˜Ÿçš„æ¶ˆæ¯</li>
<li>æ¥æ”¶å®¢æˆ·ç«¯å“åº”</li>
<li>åœ¨é€‚å½“çš„æ—¶é—´æ¢å¤çº¤ç¨‹</li>
<li>å¤„ç†çº¤ç¨‹ç»ˆæ­¢</li>
</ol>
<p>ä¸åŒçš„ä¼ è¾“åŸºäºå…¶æ‰§è¡Œæ¨¡å‹ä»¥ä¸åŒæ–¹å¼å®ç°è¿™ä¸€ç‚¹ã€‚è®©æˆ‘ä»¬çœ‹çœ‹æ¯ä¸€ä¸ªã€‚</p>
<h2 data-id="heading-25">ç”¨æˆ·ä½“éªŒï¼šå®ƒçš„å¤–è§‚</h2>
<p>åœ¨æ·±å…¥ä¼ è¾“å®ç°ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä»ç”¨æˆ·è§’åº¦æ¥çœ‹æœ€ç»ˆç»“æœæ˜¯ä»€ä¹ˆæ ·çš„ã€‚è¿™å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒå±•ç¤ºäº†ä¸ºä»€ä¹ˆå¤æ‚æ€§æ˜¯å€¼å¾—çš„ã€‚</p>
<h3 data-id="heading-26">ç¤ºä¾‹ 1ï¼šç®€å•çš„è¿›åº¦æ›´æ–°</h3>
<p>è¿™æ˜¯æ¥è‡ª MCP SDK æ–‡æ¡£çš„çœŸå®ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// server.php</span>
<span class="hljs-variable">$server</span>-&gt;<span class="hljs-title function_ invoke__">addTool</span>(
    function (<span class="hljs-keyword">string</span> <span class="hljs-variable">$dataset</span>, ClientGateway <span class="hljs-variable">$client</span>): <span class="hljs-keyword">array</span> {
        <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-title class_">LoggingLevel</span>::<span class="hljs-variable constant_">Info</span>, <span class="hljs-string">"å¯¹æ•°æ®é›†è¿è¡Œè´¨é‡æ£€æŸ¥: <span class="hljs-subst">$dataset</span>"</span>);
 
        <span class="hljs-variable">$tasks</span> = [
            <span class="hljs-string">'éªŒè¯ schema'</span>,
            <span class="hljs-string">'æ‰«æå¼‚å¸¸'</span>,
            <span class="hljs-string">'å®¡æŸ¥ç»Ÿè®¡æ‘˜è¦'</span>,
        ];
 
        <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$tasks</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$index</span> =&gt; <span class="hljs-variable">$task</span>) {
            <span class="hljs-variable">$progress</span> = (<span class="hljs-variable">$index</span> + <span class="hljs-number">1</span>) / <span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$tasks</span>);
            <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">progress</span>(<span class="hljs-variable">$progress</span>, <span class="hljs-number">1</span>, <span class="hljs-variable">$task</span>);
 
            <span class="hljs-title function_ invoke__">usleep</span>(<span class="hljs-number">140_000</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿå·¥ä½œ</span>
        }
 
        <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-title class_">LoggingLevel</span>::<span class="hljs-variable constant_">Info</span>, <span class="hljs-string">"æ•°æ®é›† <span class="hljs-subst">$dataset</span> é€šè¿‡è‡ªåŠ¨æ£€æŸ¥"</span>);
 
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'dataset'</span> =&gt; <span class="hljs-variable">$dataset</span>,
            <span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'passed'</span>,
            <span class="hljs-string">'notes'</span> =&gt; <span class="hljs-string">'æœªæ£€æµ‹åˆ°é‡å¤§é—®é¢˜'</span>,
        ];
    },
    name: <span class="hljs-string">'run_dataset_quality_checks'</span>,
    description: <span class="hljs-string">'æ‰§è¡Œå¸¦è¿›åº¦æ›´æ–°çš„æ•°æ®é›†è´¨é‡æ£€æŸ¥'</span>
);
</code></pre>
<p>çœ‹çœ‹è¿™ä¸ªå·¥å…·ä»£ç ã€‚å®ƒåªæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚å®ƒéå†ä»»åŠ¡ã€‚å®ƒè°ƒç”¨Â <code>$client-&gt;progress()</code>ï¼Œå°±åƒè°ƒç”¨æ™®é€šæ–¹æ³•ä¸€æ ·ã€‚æ²¡æœ‰è¿¹è±¡è¡¨æ˜è¿™åœ¨è¿›è¡Œå¤æ‚çš„åŒå‘é€šä¿¡ã€‚</p>
<p>ä½†å®é™…ä¸Šå‘ç”Ÿçš„æ˜¯ï¼š</p>
<ol>
<li>å¤„ç†ç¨‹åºå¯åŠ¨ï¼ˆåœ¨çº¤ç¨‹å†…ï¼‰</li>
<li><code>$client-&gt;log()</code>Â æŒ‚èµ·çº¤ç¨‹</li>
<li>ä¼ è¾“å‘é€æ—¥å¿—é€šçŸ¥</li>
<li>çº¤ç¨‹æ¢å¤</li>
<li>å¾ªç¯å¼€å§‹</li>
<li>ç¬¬ä¸€ä¸ªÂ <code>$client-&gt;progress()</code>Â æŒ‚èµ·çº¤ç¨‹</li>
<li>ä¼ è¾“å‘é€è¿›åº¦é€šçŸ¥</li>
<li>çº¤ç¨‹æ¢å¤</li>
<li><code>usleep()</code>Â è¿è¡Œï¼ˆä»åœ¨çº¤ç¨‹ä¸­ï¼‰</li>
<li>ç¬¬äºŒä¸ªÂ <code>$client-&gt;progress()</code>Â å†æ¬¡æŒ‚èµ·</li>
<li>...ä»¥æ­¤ç±»æ¨</li>
</ol>
<p>æ¯æ¬¡æŒ‚èµ·å’Œæ¢å¤å¯¹ç”¨æˆ·éƒ½æ˜¯ä¸å¯è§çš„ã€‚ä»£ç çœ‹èµ·æ¥å’Œè¡¨ç°å¾—åƒåŒæ­¥ PHPã€‚æ‰§è¡Œä¸æ–­åœ¨ä¼ è¾“çš„å¾ªç¯ï¼ˆç°åœ¨æ˜¯æ‰€æœ‰è€…ï¼‰å’Œå·¥å…·çš„å¤„ç†ç¨‹åºä¹‹é—´æ¥å›è·³è½¬ï¼Œæ¯æ¬¡å›åˆ°å¤„ç†ç¨‹åºæ—¶ï¼Œéƒ½å›åˆ°å®Œç¾çš„ä½ç½®å¹¶æ¢å¤ï¼ˆç”šè‡³åœ¨ foreach å¾ªç¯å†…ï¼‰ã€‚è¯·å®šä¹‰ç¾ï¼ï¼</p>
<h3 data-id="heading-27">ç¤ºä¾‹ 2ï¼šè¯·æ±‚ LLM é‡‡æ ·</h3>
<p>è¿™æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ç¤ºä¾‹ï¼Œå®é™…ç­‰å¾…å“åº”ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// app/Tools/IncidentCoordinator.php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IncidentCoordinator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ClientAwareInterface</span> </span>{
    <span class="hljs-keyword">use</span> <span class="hljs-title">ClientAwareTrait</span>;  <span class="hljs-comment">// æä¾› $this-&gt;log å’Œ $this-&gt;progress</span>
 
    <span class="hljs-meta">#[McpTool</span>(<span class="hljs-string">'coordinate_incident_response'</span>, <span class="hljs-string">'åè°ƒäº‹ä»¶å“åº”'</span>)<span class="hljs-meta">]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">coordinateIncident</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$incidentTitle</span></span>): <span class="hljs-title">array</span> </span>{
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-title class_">LoggingLevel</span>::<span class="hljs-variable constant_">Warning</span>, <span class="hljs-string">"äº‹ä»¶åˆ†ç±»å¼€å§‹: <span class="hljs-subst">$incidentTitle</span>"</span>);
 
        <span class="hljs-variable">$steps</span> = [
            <span class="hljs-string">'æ”¶é›†é¥æµ‹æ•°æ®'</span>,
            <span class="hljs-string">'è¯„ä¼°èŒƒå›´'</span>,
            <span class="hljs-string">'åè°ƒå“åº”è€…'</span>,
        ];
 
        <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$steps</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$index</span> =&gt; <span class="hljs-variable">$step</span>) {
            <span class="hljs-variable">$progress</span> = (<span class="hljs-variable">$index</span> + <span class="hljs-number">1</span>) / <span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$steps</span>);
            <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">progress</span>(<span class="hljs-variable">$progress</span>, <span class="hljs-number">1</span>, <span class="hljs-variable">$step</span>);
            <span class="hljs-title function_ invoke__">usleep</span>(<span class="hljs-number">180_000</span>);
        }
 
        <span class="hljs-comment">// è¯·æ±‚å®¢æˆ·ç«¯çš„ LLM ç”Ÿæˆå“åº”ç­–ç•¥</span>
        <span class="hljs-variable">$prompt</span> = <span class="hljs-string">"ä¸ºäº‹ä»¶ "</span><span class="hljs-variable">$incidentTitle</span><span class="hljs-string">" æä¾›ç®€æ´çš„å“åº”ç­–ç•¥
                   åŸºäº: "</span> . <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">', '</span>, <span class="hljs-variable">$steps</span>);
 
        <span class="hljs-variable">$result</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">sample</span>(<span class="hljs-variable">$prompt</span>, <span class="hljs-number">350</span>, <span class="hljs-number">90</span>, [<span class="hljs-string">'temperature'</span> =&gt; <span class="hljs-number">0.5</span>]);
 
        <span class="hljs-variable">$recommendation</span> = <span class="hljs-variable">$result</span>-&gt;content <span class="hljs-keyword">instanceof</span> TextContent
            ? <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$result</span>-&gt;content-&gt;text)
            : <span class="hljs-string">''</span>;
 
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-title class_">LoggingLevel</span>::<span class="hljs-variable constant_">Info</span>, <span class="hljs-string">"äº‹ä»¶åˆ†ç±»å®Œæˆ"</span>);
 
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'incident'</span> =&gt; <span class="hljs-variable">$incidentTitle</span>,
            <span class="hljs-string">'recommended_actions'</span> =&gt; <span class="hljs-variable">$recommendation</span>,
            <span class="hljs-string">'model'</span> =&gt; <span class="hljs-variable">$result</span>-&gt;model,
        ];
    }
}
</code></pre>
<p>è¿™æ›´åŠ ç¥å¥‡ã€‚<code>sample()</code>Â è°ƒç”¨ï¼š</p>
<ol>
<li>ä½¿ç”¨é‡‡æ ·è¯·æ±‚æŒ‚èµ·çº¤ç¨‹</li>
<li>ä¼ è¾“å‘å®¢æˆ·ç«¯å‘é€è¯·æ±‚</li>
<li>ä¼ è¾“ç­‰å¾…å®¢æˆ·ç«¯å“åº”ï¼ˆå“åº”å¦‚ä½•åˆ°æ¥å–å†³äºä¼ è¾“ï¼Œè¿™å¯èƒ½éœ€è¦å‡ ç§’é’Ÿï¼ï¼‰</li>
<li>å½“å“åº”åˆ°è¾¾æ—¶ï¼Œä¼ è¾“ä½¿ç”¨å®ƒæ¢å¤çº¤ç¨‹</li>
<li><code>$result</code>Â åŒ…å«å“åº”ï¼Œæ‰§è¡Œç»§ç»­</li>
</ol>
<p>ä»æ–¹æ³•çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒè¿›è¡Œäº†åŒæ­¥è°ƒç”¨å¹¶å¾—åˆ°äº†ç»“æœã€‚åœ¨å¹•åï¼š</p>
<ol>
<li>çº¤ç¨‹è¢«æŒ‚èµ·</li>
<li>æ§åˆ¶æƒè¿”å›åˆ°ä¼ è¾“çš„äº‹ä»¶å¾ªç¯</li>
<li>ä¼ è¾“å¤„ç†å…¶ä»–äº‹æƒ…ï¼ˆå¯èƒ½æ˜¯å…¶ä»–è¯·æ±‚ï¼‰</li>
<li>å½“å“åº”åˆ°æ¥æ—¶ï¼ˆå¯èƒ½æ¥è‡ªå¦ä¸€ä¸ª HTTP è¯·æ±‚/è¿›ç¨‹ï¼‰ï¼Œçº¤ç¨‹æ¢å¤</li>
<li>æ–¹æ³•ç»§ç»­ï¼Œå°±åƒä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿè¿‡</li>
</ol>
<p>è¿™å°±æ˜¯åä½œå¼å¤šä»»åŠ¡çš„å®é™…åº”ç”¨ã€‚ç¼–å†™è¿™ä¸ªå·¥å…·çš„å¼€å‘è€…å®Œå…¨ä¸çŸ¥é“è¿™æ­£åœ¨å‘ç”Ÿã€‚</p>
<h3 data-id="heading-28">ClientAwareTrait æ¨¡å¼</h3>
<p>æ³¨æ„ä¸Šé¢ç¤ºä¾‹ä¸­çš„Â <code>ClientAwareTrait</code>ã€‚è¿™æ˜¯è®¿é—®Â <code>ClientGateway</code>Â çš„ä¸¤ç§æ–¹å¼ä¹‹ä¸€ï¼š</p>
<p><strong>æ–¹æ³• 1ï¼šåœ¨å¤„ç†ç¨‹åºä¸­è¿›è¡Œç±»å‹æç¤º</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">#[McpTool</span>(<span class="hljs-string">'my_tool'</span>)<span class="hljs-meta">]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myTool</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$input</span>, ClientGateway <span class="hljs-variable">$client</span></span>): <span class="hljs-title">string</span> </span>{
    <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-attr">https</span>://www.falvce.com/);
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$result</span>;
}
</code></pre>
<p>SDK æ£€æµ‹Â <code>ClientGateway</code>Â å‚æ•°å¹¶è‡ªåŠ¨æ³¨å…¥å®ƒã€‚</p>
<p><strong>æ–¹æ³• 2ï¼šå®ç° ClientAwareInterface</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ClientAwareInterface</span> </span>{
    <span class="hljs-keyword">use</span> <span class="hljs-title">ClientAwareTrait</span>;  <span class="hljs-comment">// æä¾› setClient() å’Œè¾…åŠ©æ–¹æ³•</span>
 
    <span class="hljs-meta">#[McpTool</span>(<span class="hljs-string">'my_tool'</span>)<span class="hljs-meta">]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myTool</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$input</span></span>): <span class="hljs-title">string</span> </span>{
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">log</span>(...);  <span class="hljs-comment">// ClientAwareTrait æä¾›æ­¤æ–¹æ³•</span>
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">progress</span>(...);
        <span class="hljs-variable">$result</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">sample</span>(...);
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$result</span>;
    }
}
</code></pre>
<p>SDK åœ¨è°ƒç”¨å¤„ç†ç¨‹åºä¹‹å‰è°ƒç”¨Â <code>setClient()</code>ï¼Œtrait æä¾›åƒÂ <code>log()</code>ã€<code>progress()</code>ã€<code>sample()</code>Â è¿™æ ·çš„ä¾¿æ·æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å†…éƒ¨ä½¿ç”¨å®¢æˆ·ç«¯ã€‚</p>
<p>ä¸¤ç§æ–¹æ³•éƒ½æä¾›ç›¸åŒçš„èƒ½åŠ›ã€‚ç”¨æˆ·æ ¹æ®åå¥½é€‰æ‹©ã€‚</p>
<h2 data-id="heading-29">åº•å±‚ï¼šClientGateway</h2>
<p>ç°åœ¨è®©æˆ‘ä»¬å‰¥å¼€ç¬¬ä¸€å±‚ï¼Œçœ‹çœ‹Â <code>ClientGateway</code>Â å¦‚ä½•å·¥ä½œã€‚è¿™æ˜¯ç”¨æˆ·äº¤äº’çš„ APIã€‚å®ƒå‡ºå¥‡åœ°ï¼ˆå¹¶ä¸å‡ºå¥‡åœ°ï¼‰ç®€å•ï¼Œä½†è¶…çº§å¼ºå¤§ã€‚</p>
<p>è¿™æ˜¯å®é™…å®ç°ï¼ˆä¸ºæ¸…æ™°èµ·è§è¿›è¡Œäº†ç®€åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// src/Server/ClientGateway.php</span>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ClientGateway</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> SessionInterface <span class="hljs-variable">$session</span>,
    </span>) </span>{}
 
    <span class="hljs-comment">/**
     * å‘å®¢æˆ·ç«¯å‘é€é€šçŸ¥ï¼ˆå³å‘å³å¿˜ï¼‰ã€‚
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notify</span>(<span class="hljs-params">Notification <span class="hljs-variable">$notification</span></span>): <span class="hljs-title">void</span> </span>{
        <span class="hljs-title class_">\Fiber</span>::<span class="hljs-title function_ invoke__">suspend</span>([
            <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'notification'</span>,
            <span class="hljs-string">'notification'</span> =&gt; <span class="hljs-variable">$notification</span>,
            <span class="hljs-string">'session_id'</span> =&gt; <span class="hljs-variable">$this</span>-&gt;session-&gt;<span class="hljs-title function_ invoke__">getId</span>()-&gt;<span class="hljs-title function_ invoke__">toRfc4122</span>(),
        ]);
    }
 
    <span class="hljs-comment">/**
     * å‘å®¢æˆ·ç«¯å‘é€æ—¥å¿—æ¶ˆæ¯ã€‚
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">log</span>(<span class="hljs-params">LoggingLevel <span class="hljs-variable">$level</span>, <span class="hljs-keyword">mixed</span> <span class="hljs-variable">$data</span>, ?<span class="hljs-keyword">string</span> <span class="hljs-variable">$logger</span> = <span class="hljs-literal">null</span></span>): <span class="hljs-title">void</span> </span>{
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">notify</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LoggingMessageNotification</span>(<span class="hljs-variable">$level</span>, <span class="hljs-variable">$data</span>, <span class="hljs-variable">$logger</span>));
    }
 
    <span class="hljs-comment">/**
     * å‘å®¢æˆ·ç«¯å‘é€è¿›åº¦æ›´æ–°ã€‚
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">progress</span>(<span class="hljs-params"><span class="hljs-keyword">float</span> <span class="hljs-variable">$progress</span>, ?<span class="hljs-keyword">float</span> <span class="hljs-variable">$total</span> = <span class="hljs-literal">null</span>, ?<span class="hljs-keyword">string</span> <span class="hljs-variable">$message</span> = <span class="hljs-literal">null</span></span>): <span class="hljs-title">void</span> </span>{
        <span class="hljs-variable">$meta</span> = <span class="hljs-variable language_">$this</span>-&gt;session-&gt;<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-title class_">Protocol</span>::<span class="hljs-variable constant_">SESSION_ACTIVE_REQUEST_META</span>, []);
        <span class="hljs-variable">$progressToken</span> = <span class="hljs-variable">$meta</span>[<span class="hljs-string">'progressToken'</span>] ?? <span class="hljs-literal">null</span>;
 
        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> === <span class="hljs-variable">$progressToken</span>) {
            <span class="hljs-comment">// å®¢æˆ·ç«¯æœªè¯·æ±‚è¿›åº¦ï¼Œè·³è¿‡</span>
            <span class="hljs-keyword">return</span>;
        }
 
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">notify</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ProgressNotification</span>(<span class="hljs-variable">$progressToken</span>, <span class="hljs-variable">$progress</span>, <span class="hljs-variable">$total</span>, <span class="hljs-variable">$message</span>));
    }
 
    <span class="hljs-comment">/**
     * ä»å®¢æˆ·ç«¯è¯·æ±‚ LLM é‡‡æ ·ã€‚
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sample</span>(<span class="hljs-params">
        <span class="hljs-keyword">array</span>|Content|<span class="hljs-keyword">string</span> <span class="hljs-variable">$message</span>,
        <span class="hljs-keyword">int</span> <span class="hljs-variable">$maxTokens</span> = <span class="hljs-number">1000</span>,
        <span class="hljs-keyword">int</span> <span class="hljs-variable">$timeout</span> = <span class="hljs-number">120</span>,
        <span class="hljs-keyword">array</span> <span class="hljs-variable">$options</span> = []
    </span>): <span class="hljs-title">CreateSamplingMessageResult</span> </span>{
        <span class="hljs-comment">// å‡†å¤‡æ¶ˆæ¯</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">is_string</span>(<span class="hljs-variable">$message</span>)) {
            <span class="hljs-variable">$message</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextContent</span>(<span class="hljs-variable">$message</span>);
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$message</span> <span class="hljs-keyword">instanceof</span> Content) {
            <span class="hljs-variable">$message</span> = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">SamplingMessage</span>(<span class="hljs-title class_">Role</span>::<span class="hljs-variable constant_">User</span>, <span class="hljs-variable">$message</span>)];
        }
 
        <span class="hljs-variable">$request</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateSamplingMessageRequest</span>(
            messages: <span class="hljs-variable">$message</span>,
            maxTokens: <span class="hljs-variable">$maxTokens</span>,
            preferences: <span class="hljs-variable">$options</span>[<span class="hljs-string">'preferences'</span>] ?? <span class="hljs-literal">null</span>,
            systemPrompt: <span class="hljs-variable">$options</span>[<span class="hljs-string">'systemPrompt'</span>] ?? <span class="hljs-literal">null</span>,
            temperature: <span class="hljs-variable">$options</span>[<span class="hljs-string">'temperature'</span>] ?? <span class="hljs-literal">null</span>,
            <span class="hljs-comment">// ...å…¶ä»–é€‰é¡¹</span>
        );
 
        <span class="hljs-comment">// å‘é€è¯·æ±‚å¹¶ç­‰å¾…å“åº”</span>
        <span class="hljs-variable">$response</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">request</span>(<span class="hljs-variable">$request</span>, <span class="hljs-variable">$timeout</span>);
 
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$response</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClientException</span>(<span class="hljs-variable">$response</span>);
        }
 
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">CreateSamplingMessageResult</span>::<span class="hljs-title function_ invoke__">fromArray</span>(<span class="hljs-variable">$response</span>-&gt;result);
    }
 
    <span class="hljs-comment">/**
     * å‘å®¢æˆ·ç«¯å‘é€è¯·æ±‚å¹¶ç­‰å¾…å“åº”ã€‚
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">request</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$timeout</span> = <span class="hljs-number">120</span></span>): <span class="hljs-title">Response</span>|<span class="hljs-title">Error</span> </span>{
        <span class="hljs-variable">$response</span> = <span class="hljs-title class_">\Fiber</span>::<span class="hljs-title function_ invoke__">suspend</span>([
            <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'request'</span>,
            <span class="hljs-string">'request'</span> =&gt; <span class="hljs-variable">$request</span>,
            <span class="hljs-string">'session_id'</span> =&gt; <span class="hljs-variable">$this</span>-&gt;session-&gt;<span class="hljs-title function_ invoke__">getId</span>()-&gt;<span class="hljs-title function_ invoke__">toRfc4122</span>(),
            <span class="hljs-string">'timeout'</span> =&gt; <span class="hljs-variable">$timeout</span>,
        ]);
 
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable">$response</span> <span class="hljs-keyword">instanceof</span> Response &amp;&amp; !<span class="hljs-variable">$response</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">'ä¼ è¾“è¿”å›äº†æ„å¤–çš„è½½è·'</span>);
        }
 
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$response</span>;
    }
}
</code></pre>
<h3 data-id="heading-30">å…³é”®æ–¹æ³•</h3>
<p><strong><code>notify()</code>Â - æœ€ç®€å•çš„æƒ…å†µï¼š</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notify</span>(<span class="hljs-params">Notification <span class="hljs-variable">$notification</span></span>): <span class="hljs-title">void</span> </span>{
    <span class="hljs-title class_">\Fiber</span>::<span class="hljs-title function_ invoke__">suspend</span>([
        <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'notification'</span>,
        <span class="hljs-string">'notification'</span> =&gt; <span class="hljs-variable">$notification</span>,
        <span class="hljs-string">'session_id'</span> =&gt; <span class="hljs-variable">$this</span>-&gt;session-&gt;<span class="hljs-title function_ invoke__">getId</span>()-&gt;<span class="hljs-title function_ invoke__">toRfc4122</span>(),
    ]);
}
</code></pre>
<p>è¿™ä¼šä½¿ç”¨ä¸€ä¸ªæ•°æ®ç»“æ„æŒ‚èµ·å½“å‰çº¤ç¨‹ï¼Œè¯¥ç»“æ„æŒ‡ç¤ºï¼š</p>
<ul>
<li>è¿™æ˜¯ä¸€ä¸ªé€šçŸ¥ï¼ˆä¸éœ€è¦å“åº”ï¼‰</li>
<li>è¦å‘é€ä»€ä¹ˆé€šçŸ¥</li>
<li>å®ƒå±äºå“ªä¸ªä¼šè¯</li>
</ul>
<p>çº¤ç¨‹å°†åœ¨é€šçŸ¥æ’é˜Ÿåç«‹å³æ¢å¤ã€‚</p>
<p><strong><code>request()</code>Â - å¤æ‚çš„æƒ…å†µï¼š</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">request</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$timeout</span> = <span class="hljs-number">120</span></span>): <span class="hljs-title">Response</span>|<span class="hljs-title">Error</span> </span>{
    <span class="hljs-variable">$response</span> = <span class="hljs-title class_">\Fiber</span>::<span class="hljs-title function_ invoke__">suspend</span>([
        <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'request'</span>,
        <span class="hljs-string">'request'</span> =&gt; <span class="hljs-variable">$request</span>,
        <span class="hljs-string">'session_id'</span> =&gt; <span class="hljs-variable">$this</span>-&gt;session-&gt;<span class="hljs-title function_ invoke__">getId</span>()-&gt;<span class="hljs-title function_ invoke__">toRfc4122</span>(),
        <span class="hljs-string">'timeout'</span> =&gt; <span class="hljs-variable">$timeout</span>,
    ]);
 
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$response</span>;
}
</code></pre>
<p>è¿™ä¼šä½¿ç”¨ä¸€ä¸ªæ•°æ®ç»“æ„æŒ‚èµ·çº¤ç¨‹ï¼Œè¯¥ç»“æ„æŒ‡ç¤ºï¼š</p>
<ul>
<li>è¿™æ˜¯ä¸€ä¸ªè¯·æ±‚ï¼ˆæœŸæœ›å“åº”ï¼‰</li>
<li>è¦å‘é€ä»€ä¹ˆè¯·æ±‚</li>
<li>ç­‰å¾…å“åº”å¤šé•¿æ—¶é—´</li>
</ul>
<p>çº¤ç¨‹åœ¨ä»¥ä¸‹æƒ…å†µä¹‹å‰<strong>ä¸ä¼š</strong>æ¢å¤ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯å‘é€å“åº”ï¼Œæˆ–</li>
<li>è¶…æ—¶åˆ°æœŸ</li>
</ol>
<p>å½“æ¢å¤æ—¶ï¼Œä¼ é€’ç»™Â <code>$fiber-&gt;resume($value)</code>Â çš„å€¼æˆä¸ºÂ <code>Fiber::suspend()</code>Â çš„è¿”å›å€¼ã€‚å› æ­¤Â <code>$response</code>Â å°†æ˜¯Â <code>Response</code>Â å¯¹è±¡ï¼ˆæˆåŠŸï¼‰æˆ–Â <code>Error</code>Â å¯¹è±¡ï¼ˆå¤±è´¥/è¶…æ—¶ï¼‰ã€‚</p>
<h2 data-id="heading-31">ä½•æ—¶åº”è¯¥ä½¿ç”¨çº¤ç¨‹ï¼Ÿ</h2>
<p>ç°åœ¨ä½ å·²ç»çœ‹åˆ°äº†çº¤ç¨‹çš„å®é™…åº”ç”¨ï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥åœ¨è‡ªå·±çš„ä»£ç ä¸­çœŸæ­£ä½¿ç”¨å®ƒä»¬ï¼Ÿ</p>
<h3 data-id="heading-32">çº¤ç¨‹ä½¿ç”¨æ¡ˆä¾‹æ£€æŸ¥æ¸…å•</h3>
<p>åœ¨ä»¥ä¸‹æƒ…å†µè€ƒè™‘ä½¿ç”¨çº¤ç¨‹ï¼š</p>
<p>âœ…Â <strong>éœ€è¦æš‚åœå’Œæ¢å¤æ‰§è¡Œ</strong>Â - æ ¸å¿ƒä½¿ç”¨æ¡ˆä¾‹ã€‚å¦‚æœä½ éœ€è¦ç¦»å¼€ä¸€ä¸ªå‡½æ•°ï¼Œåšå…¶ä»–äº‹æƒ…ï¼Œç„¶åå›æ¥ã€‚</p>
<p>âœ…Â <strong>æƒ³è¦å¯¹ç”¨æˆ·éšè—å¤æ‚æ€§</strong>Â - å¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ªåº“ï¼Œå¹¶å¸Œæœ›æä¾›ä¸€ä¸ªå¹²å‡€çš„ API æ¥éšè—å¼‚æ­¥æˆ–æœ‰çŠ¶æ€çš„è¡Œä¸ºã€‚</p>
<p>âœ…Â <strong>éœ€è¦åä½œå¼å¤šä»»åŠ¡</strong>Â - å½“ä½ å¸Œæœ›å¤šä¸ª"ä»»åŠ¡"åœ¨æ²¡æœ‰çº¿ç¨‹æˆ–è¿›ç¨‹çš„æƒ…å†µä¸‹å–å¾—è¿›å±•ã€‚</p>
<p>âœ…Â <strong>æ­£åœ¨æ¡¥æ¥åŒæ­¥å’Œå¼‚æ­¥ä»£ç </strong>Â - å½“ä½ æƒ³è®©å¼‚æ­¥æ“ä½œçœ‹èµ·æ¥åŒæ­¥æ—¶ï¼ˆå¦‚ ReactPHP çš„ awaitï¼‰ã€‚</p>
<p>âœ…Â <strong>éœ€è¦ç»´æŠ¤æ‰§è¡Œä¸Šä¸‹æ–‡</strong>Â - å½“ä½¿ç”¨ç”Ÿæˆå™¨æš‚åœå’Œæ¢å¤ä¼šå—åˆ°å¤ªå¤šé™åˆ¶æ—¶ï¼ˆä¸èƒ½è½»æ¾åœ°ä»åµŒå¥—è°ƒç”¨ä¸­ yieldï¼‰ã€‚</p>
<p>âœ…Â <strong>æ­£åœ¨æ„å»ºåŸºç¡€è®¾æ–½ä»£ç </strong>Â - åº“ã€æ¡†æ¶å’Œ SDK æœ€èƒ½ä»çº¤ç¨‹ä¸­å—ç›Šã€‚</p>
<h3 data-id="heading-33">ä½•æ—¶ä¸ä½¿ç”¨çº¤ç¨‹</h3>
<p>åœ¨ä»¥ä¸‹æƒ…å†µä¸è¦ä½¿ç”¨çº¤ç¨‹ï¼š</p>
<p>âŒÂ <strong>ç®€å•çš„å›è°ƒå°±è¶³å¤Ÿäº†</strong>Â - ä¸è¦æŠŠäº‹æƒ…å¤æ‚åŒ–ã€‚å¦‚æœå›è°ƒæœ‰æ•ˆï¼Œå°±ä½¿ç”¨å›è°ƒã€‚</p>
<p>âŒÂ <strong>éœ€è¦çœŸæ­£çš„å¹¶è¡Œæ€§</strong>Â - çº¤ç¨‹æ˜¯åä½œçš„ï¼Œä¸æ˜¯å¹¶è¡Œçš„ã€‚ä½¿ç”¨è¿›ç¨‹ã€çº¿ç¨‹æˆ–å¼‚æ­¥ I/O å®ç°å¹¶è¡Œæ€§ã€‚</p>
<p>âŒÂ <strong>ä»£ç ç®€å•ä¸”çº¿æ€§</strong>Â - å¦‚æœä¸éœ€è¦ä¸­æ–­æˆ–æ¢å¤ï¼Œçº¤ç¨‹ä¼šå¢åŠ ä¸å¿…è¦çš„å¤æ‚æ€§ã€‚</p>
<p>âŒÂ <strong>ä½ ä¸æ§åˆ¶æ‰§è¡Œæµ</strong>Â - çº¤ç¨‹åœ¨åº“å’Œæ¡†æ¶ä¸­è¡¨ç°å‡ºè‰²ï¼Œåœ¨åº”ç”¨ä»£ç ä¸­åˆ™è¾ƒå°‘ã€‚</p>
<p>âŒÂ <strong>ç”Ÿæˆå™¨å·¥ä½œæ­£å¸¸</strong>Â - å¦‚æœç”Ÿæˆå™¨ï¼ˆyieldï¼‰å¹²å‡€åœ°è§£å†³äº†ä½ çš„é—®é¢˜ï¼ŒåšæŒä½¿ç”¨å®ƒä»¬ã€‚çº¤ç¨‹æ›´å¼ºå¤§ä½†ä¹Ÿæ›´å¤æ‚ã€‚</p>
<h2 data-id="heading-34">å¸¸è§é™·é˜±å’Œæ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-35">1. ç†è§£è°æ§åˆ¶çº¤ç¨‹</h3>
<p>å…³äºçº¤ç¨‹æœ€åŸºæœ¬çš„ç†è§£ï¼šå½“çº¤ç¨‹æŒ‚èµ·æ—¶ï¼Œå®ƒå°†æ§åˆ¶æƒè®©å›ç»™æŸäººã€‚é‚£ä¸ª"æŸäºº"å°±æ˜¯ç¼–æ’å™¨ï¼Œä½ éœ€è¦çŸ¥é“å®ƒæ˜¯è°ã€‚</p>
<p>çº¤ç¨‹ä»£è¡¨ä¸€ä¸ªå·¥ä½œå•å…ƒã€‚å½“å®ƒè°ƒç”¨Â <code>Fiber::suspend()</code>Â æ—¶ï¼Œæ‰§è¡Œè·³å‡ºçº¤ç¨‹å¹¶è¿”å›åˆ°è°ƒç”¨Â <code>$fiber-&gt;start()</code>Â æˆ–Â <code>$fiber-&gt;resume()</code>Â çš„å®ä½“ã€‚è¯¥å®ä½“è´Ÿè´£å†³å®šä½•æ—¶ï¼ˆä»¥åŠæ˜¯å¦ï¼‰æ¢å¤çº¤ç¨‹ã€‚</p>
<p>åœ¨ MCP ä¼ è¾“ä¸­ï¼š</p>
<ul>
<li><strong>StdioTransport</strong>ï¼šä¸»å¾ªç¯ï¼ˆ<code>while (!feof($input))</code>ï¼‰æ˜¯ç¼–æ’å™¨ã€‚å®ƒæŒç»­å¤„ç†è¾“å…¥ã€ç®¡ç†çº¤ç¨‹å¹¶åˆ·æ–°è¾“å‡ºã€‚</li>
<li><strong>StreamableHttpTransport</strong>ï¼šSSE æµçš„é˜»å¡å¾ªç¯åœ¨è¯¥è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸå†…æˆä¸ºç¼–æ’å™¨ã€‚å®ƒé˜»å¡æ•´ä¸ªè¿›ç¨‹å¹¶ç®¡ç†çº¤ç¨‹ç›´åˆ°å®Œæˆã€‚</li>
<li><strong>ReactPHP</strong>ï¼šäº‹ä»¶å¾ªç¯æ˜¯ç¼–æ’å™¨ã€‚æˆ‘ä»¬ä¸é˜»å¡å®ƒï¼›ç›¸åï¼Œæˆ‘ä»¬æ³¨å†Œå¾ªç¯ç®¡ç†çš„å®šæ—¶å™¨ã€‚</li>
</ul>
<p>å…³é”®åŸåˆ™ï¼š<strong>ç¼–æ’å™¨ä¸èƒ½è¢«æ°¸ä¹…é˜»å¡ï¼Œå¦åˆ™ä½ çš„çº¤ç¨‹æ°¸è¿œä¸ä¼šæ¢å¤</strong>ã€‚å¦‚æœä½ æ­£åœ¨ç¼–å†™æŒ‚èµ·çº¤ç¨‹çš„ä»£ç ï¼Œç¡®ä¿æ¥æ”¶æ§åˆ¶æƒçš„å®ä½“æœ‰æœºåˆ¶æ¥æ¢å¤å®ƒä»¬ã€‚</p>
<p>è¿˜è¦æ³¨æ„ï¼š<strong>çº¤ç¨‹å¯ä»¥åµŒå¥—</strong>ã€‚ä½ å¯ä»¥åœ¨çº¤ç¨‹å†…éƒ¨åˆ›å»ºçº¤ç¨‹ã€‚ç¼–æ’å™¨å¯ä»¥æ˜¯ä¸€ä¸ªä¸­å¤®ç®¡ç†å™¨ï¼ˆå¦‚æˆ‘ä»¬çš„ TaskManager ç¤ºä¾‹æ‰€ç¤ºï¼‰ï¼Œæˆ–è€…çˆ¶çº¤ç¨‹æœ¬èº«å¯ä»¥å……å½“å…¶å­çº¤ç¨‹çš„ç¼–æ’å™¨ã€‚åªéœ€æ¸…æ¥šè°åœ¨ç®¡ç†è°ï¼Œå¹¶ç¡®ä¿ç¼–æ’å™¨ä¸ä¼šæ— é™æœŸåœ°è¢«é˜»å¡ã€‚</p>
<h3 data-id="heading-36">2. å¿˜è®°ä½ åœ¨çº¤ç¨‹ä¸­</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myHandler</span>(<span class="hljs-params"/>) </span>{
    <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">sample</span>(<span class="hljs-string">"ç”Ÿæˆæ–‡æœ¬"</span>);  <span class="hljs-comment">// è¿™ä¼šæŒ‚èµ·ï¼</span>
    <span class="hljs-comment">// è¿™é‡Œçš„ä»»ä½•ä»£ç éƒ½åœ¨æŒ‚èµ·å’Œæ¢å¤ä¹‹åè¿è¡Œ</span>
}
</code></pre>
<p>è®°ä½æŒ‚èµ·å¯èƒ½å‘ç”Ÿåœ¨è°ƒç”¨æ ˆçš„æ·±å¤„ã€‚å§‹ç»ˆè€ƒè™‘åœ¨æŒ‚èµ·æœŸé—´å¯èƒ½æ”¹å˜çš„çŠ¶æ€ã€‚</p>
<h3 data-id="heading-37">3. èµ„æºç”Ÿå‘½å‘¨æœŸ</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-variable">$lock</span> = <span class="hljs-variable">$mutex</span>-&gt;<span class="hljs-built_in">acquire</span>();
<span class="hljs-variable">$client</span>-&gt;<span class="hljs-built_in">sample</span>("...");  <span class="hljs-comment">// çº¤ç¨‹åœ¨è¿™é‡ŒæŒ‚èµ·</span>
<span class="hljs-variable">$lock</span>-&gt;<span class="hljs-built_in">release</span>();  <span class="hljs-comment">// è¿™ä¼šæ™šå¾—å¤šæ‰è¿è¡Œï¼</span>
</code></pre>
<p>å°å¿ƒè·¨è¶ŠæŒ‚èµ·ç‚¹çš„èµ„æºï¼ˆé”ã€æ•°æ®åº“äº‹åŠ¡ã€æ–‡ä»¶å¥æŸ„ï¼‰ã€‚çº¤ç¨‹å¯èƒ½ä¼šæŒ‚èµ·å‡ ç§’é’Ÿæˆ–å‡ åˆ†é’Ÿã€‚</p>
<h3 data-id="heading-38">4. è·¨æŒ‚èµ·çš„å¼‚å¸¸å¤„ç†</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">try</span> {
    <span class="hljs-variable">$result</span> = <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">sample</span>(<span class="hljs-string">"..."</span>);  <span class="hljs-comment">// æŒ‚èµ·</span>
} <span class="hljs-keyword">catch</span> (\<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span>) {
    <span class="hljs-comment">// è¿™æ•è·çº¤ç¨‹å†…éƒ¨çš„å¼‚å¸¸</span>
    <span class="hljs-comment">// ä¸æ˜¯æŒ‚èµ·æœŸé—´çš„å¼‚å¸¸</span>
    <span class="hljs-comment">// é™¤éçº¤ç¨‹ç”¨ throw(https://www.falvce.com/) æ¢å¤</span>
}
</code></pre>
<p>å¼‚å¸¸åœ¨çº¤ç¨‹å†…æ­£å¸¸å·¥ä½œï¼Œä½†æŒ‚èµ·/æ¢å¤æœºåˆ¶æœ¬èº«æœ‰å•ç‹¬çš„é”™è¯¯å¤„ç†ã€‚å› æ­¤ç†è§£å¼‚å¸¸ä¸ä¼šè‡ªåŠ¨è·¨è¶Šçº¤ç¨‹å’Œç¼–æ’å™¨ä¹‹é—´çš„è¾¹ç•Œè‡³å…³é‡è¦ã€‚</p>
<p>å¦‚æœçº¤ç¨‹æŠ›å‡ºå¼‚å¸¸ï¼Œå®ƒä¼šå†’æ³¡åˆ°ç¼–æ’å™¨ï¼ˆé€šè¿‡Â <code>$fiber-&gt;start()</code>Â æˆ–Â <code>$fiber-&gt;resume()</code>ï¼‰ã€‚å¦‚æœç¼–æ’å™¨æŠ›å‡ºå¼‚å¸¸ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨è¿›å…¥çº¤ç¨‹ï¼ˆå› ä¸ºå¼‚å¸¸å¯èƒ½ä¸æŒ‚èµ·çš„çº¤ç¨‹ç›¸å…³ï¼Œä¹Ÿå¯èƒ½æ— å…³ï¼‰ã€‚</p>
<p>ä½ å¿…é¡»æ˜ç¡®å†³å®šå¦‚ä½•æ¡¥æ¥è¿™ä¸ªå·®è·ã€‚ä½ æ˜¯å¸Œæœ›ç¼–æ’å™¨ç‹¬ç«‹å´©æºƒå—ï¼Ÿä½ æƒ³æ•è·é”™è¯¯å¹¶ä½¿ç”¨å¤±è´¥å¯¹è±¡Â <code>resume()</code>Â å—ï¼Ÿè¿˜æ˜¯ä½ æƒ³å°†å…¶Â <code>throw()</code>Â åˆ°çº¤ç¨‹ä¸­ï¼Ÿè¿™äº›æ˜¯æ¶æ„å†³ç­–ï¼Œä¸æ˜¯é»˜è®¤è¡Œä¸ºã€‚</p>
<h3 data-id="heading-39">5. å…¨å±€çŠ¶æ€</h3>
<pre><code class="hljs language-perl" lang="perl">global $counter;
$counter++;
$client-&gt;<span class="hljs-keyword">log</span>(<span class="hljs-string">"è®¡æ•°ï¼š$counter"</span>); https:<span class="hljs-regexp">//</span>www.falvce.com/ <span class="hljs-regexp">//</span> æŒ‚èµ·
$counter++;  <span class="hljs-regexp">//</span> å¦‚æœå¦ä¸€ä¸ªçº¤ç¨‹åœ¨æŒ‚èµ·æœŸé—´ä¿®æ”¹äº† $counter ä¼šæ€æ ·ï¼Ÿ
</code></pre>
<p>å°å¿ƒå…¨å±€çŠ¶æ€ã€‚å…¶ä»–ä»£ç ï¼ˆæˆ–å…¶ä»–çº¤ç¨‹ï¼‰å¯èƒ½åœ¨ä½ æŒ‚èµ·æ—¶ä¿®æ”¹å®ƒã€‚</p>
<h3 data-id="heading-40">6. çº¤ç¨‹åˆ›å»ºå¼€é”€</h3>
<p>åˆ›å»ºçº¤ç¨‹æœ‰å°‘é‡å¼€é”€ã€‚ä¸è¦åˆ›å»ºæ•°ç™¾ä¸‡ä¸ªã€‚ä¸çº¿ç¨‹ç›¸æ¯”å®ƒä»¬æ˜¯è½»é‡çº§çš„ï¼Œä½†ä¸æ˜¯å…è´¹çš„ã€‚</p>
<h2 data-id="heading-41">ç»“è®ºï¼šç†è§£ä½ çš„å·¥å…·çš„åŠ›é‡</h2>
<p>å½“ä½ å­¦ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•æ—¶ï¼Œä½ ä¸ä»…ä»…æ˜¯è®°å¿†å®šä¹‰å’Œè¯­æ³•ï¼Œä½ è¿˜å­¦ä¹ ä½•æ—¶ä½¿ç”¨å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ ä¸è®¤è¯†ä½•æ—¶éœ€è¦åœ¨ä¸¤ç«¯å¿«é€Ÿæ’å…¥/åˆ é™¤ï¼ŒåŒå‘é“¾è¡¨å°±æ²¡æœ‰ç”¨ã€‚</p>
<p>è¿™åŒæ ·é€‚ç”¨äºè¯­è¨€ç‰¹æ€§ã€‚PHP è‡ª 8.1 ä»¥æ¥å°±æœ‰äº†çº¤ç¨‹ï¼Œä½†å¤§å¤šæ•°å¼€å‘è€…ä¸ä½¿ç”¨å®ƒä»¬ï¼Œå› ä¸ºä»–ä»¬ä¸è®¤è¯†çº¤ç¨‹è§£å†³çš„é—®é¢˜ã€‚æ‰€ä»¥ï¼Œä¸‹æ¬¡å½“ä½ é¢ä¸´æ¶‰åŠä»¥ä¸‹é—®é¢˜æ—¶ï¼š</p>
<ul>
<li>æš‚åœå’Œæ¢å¤æ‰§è¡Œ</li>
<li>åœ¨å¹²å‡€çš„ API èƒŒåéšè—å¤æ‚æ€§</li>
<li>ä½¿å¼‚æ­¥ä»£ç æ„Ÿè§‰åŒæ­¥</li>
<li>åä½œå¼å¤šä»»åŠ¡</li>
</ul>
<p>é—®è‡ªå·±ï¼š"çº¤ç¨‹èƒ½ä¼˜é›…åœ°è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ"</p>
<p>ä½ å¯èƒ½ä¼šæƒŠè®¶äºç­”æ¡ˆæ˜¯è‚¯å®šçš„é¢‘ç‡ã€‚</p>
<h2 data-id="heading-42">æ€»ç»“</h2>
<p>PHP çº¤ç¨‹ï¼ˆFibersï¼‰è‡ª PHP 8.1 å¼•å…¥ä»¥æ¥ï¼Œä¸€ç›´æ˜¯ä¸€ä¸ªè¢«ä½ä¼°çš„ç‰¹æ€§ã€‚é€šè¿‡ PHP MCP SDK çš„å®¢æˆ·ç«¯é€šä¿¡åŠŸèƒ½ï¼ˆPR #109ï¼‰è¿™ä¸ªå®é™…æ¡ˆä¾‹ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†çº¤ç¨‹å¦‚ä½•ä¼˜é›…åœ°è§£å†³å¤æ‚çš„æ¶æ„é—®é¢˜ã€‚</p>
<p>è¿™ä¸ªå®ç°çš„ç²¾å¦™ä¹‹å¤„ä¸åœ¨äºå…¶æŠ€æœ¯å¤æ‚åº¦ï¼Œè€Œåœ¨äºå…¶è®¾è®¡ç†å¿µâ€”â€”é€šè¿‡çº¤ç¨‹å°†å¤æ‚çš„åŒå‘é€šä¿¡æœºåˆ¶éšè—åœ¨ç®€æ´çš„åŒæ­¥é£æ ¼ API èƒŒåï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿç¼–å†™ç›´è§‚ã€æ˜“è¯»çš„ä»£ç ï¼Œè€Œæ— éœ€å…³å¿ƒåº•å±‚çš„æŒ‚èµ·ã€æ¢å¤å’ŒçŠ¶æ€ç®¡ç†ã€‚</p>
<h3 data-id="heading-43">å…³é”®è¦ç‚¹</h3>
<ol>
<li><strong>çº¤ç¨‹ä¸æ˜¯å¼‚æ­¥æœºåˆ¶</strong>ï¼Œè€Œæ˜¯åä½œå¼å¤šä»»åŠ¡çš„å®ç°ï¼Œæ˜¯ç®¡ç†æ‰§è¡Œæµçš„å·¥å…·</li>
<li><strong>æ­£ç¡®çš„æŠ½è±¡å±‚æ¬¡</strong>ï¼šè®©å¤æ‚æ€§åœ¨åº“å±‚é¢è§£å†³ä¸€æ¬¡ï¼Œæ‰€æœ‰ç”¨æˆ·å—ç›Š</li>
<li><strong>ä¼ è¾“æ— å…³æ€§</strong>ï¼šåŒä¸€å¥—çº¤ç¨‹æœºåˆ¶å¯ä»¥é€‚é…ä¸åŒçš„ I/O æ¨¡å‹ï¼ˆé˜»å¡ã€éé˜»å¡ã€å¤šè¿›ç¨‹ï¼‰</li>
<li><strong>ç”¨æˆ·å‹å¥½</strong>ï¼šæœ€å¥½çš„æŠ€æœ¯æ˜¯è®©é—®é¢˜å¯¹ç”¨æˆ·æ¶ˆå¤±çš„æŠ€æœ¯</li>
</ol>
<h3 data-id="heading-44">é€‚ç”¨åœºæ™¯</h3>
<p>çº¤ç¨‹æœ€é€‚åˆï¼š</p>
<ul>
<li>æ„å»ºåº“å’Œæ¡†æ¶</li>
<li>éšè—å¼‚æ­¥å¤æ‚æ€§</li>
<li>éœ€è¦æš‚åœå’Œæ¢å¤æ‰§è¡Œä¸Šä¸‹æ–‡çš„åœºæ™¯</li>
<li>æ¡¥æ¥åŒæ­¥å’Œå¼‚æ­¥ä»£ç </li>
</ul>
<p>ä¸é€‚ç”¨äºï¼š</p>
<ul>
<li>ç®€å•çš„çº¿æ€§æµç¨‹</li>
<li>éœ€è¦çœŸæ­£å¹¶è¡Œæ€§çš„åœºæ™¯</li>
<li>å¯ä»¥ç”¨ç®€å•å›è°ƒæˆ–ç”Ÿæˆå™¨è§£å†³çš„é—®é¢˜</li>
</ul>
<p>é€‰æ‹©æ­£ç¡®çš„å·¥å…·ï¼Œç†è§£å·¥å…·çš„æœ¬è´¨ï¼Œæ˜¯æ„å»ºä¼˜é›…è½¯ä»¶çš„å…³é”®ã€‚PHP çº¤ç¨‹æ­£æ˜¯è¿™æ ·ä¸€ä¸ªè¢«ä½ä¼°ä½†æå…¶å¼ºå¤§çš„å·¥å…·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[UVMéªŒè¯å…¥é—¨(2)-uvmå¸¸ç”¨ç±»çš„ç»§æ‰¿å…³ç³»]]></title>    <link>https://juejin.cn/post/7577343038428594219</link>    <guid>https://juejin.cn/post/7577343038428594219</guid>    <pubDate>2025-11-28T05:39:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577343038428594219" data-draft-id="7577333742278344746" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="UVMéªŒè¯å…¥é—¨(2)-uvmå¸¸ç”¨ç±»çš„ç»§æ‰¿å…³ç³»"/> <meta itemprop="keywords" content="åµŒå…¥å¼"/> <meta itemprop="datePublished" content="2025-11-28T05:39:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¼šæ­¦åŠŸçš„ç«æŸ´"/> <meta itemprop="url" content="https://juejin.cn/user/1101026783398184"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            UVMéªŒè¯å…¥é—¨(2)-uvmå¸¸ç”¨ç±»çš„ç»§æ‰¿å…³ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1101026783398184/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¼šæ­¦åŠŸçš„ç«æŸ´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T05:39:40.000Z" title="Fri Nov 28 2025 05:39:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.æ¦‚è¿°</h2>
<p>â€ƒâ€ƒUVMï¼ˆUniversal Verification Methodologyï¼‰é‡‡ç”¨åŸºäºç±»çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œé€šè¿‡æ¸…æ™°çš„ç»§æ‰¿å…³ç³»æ„å»ºäº†ä¸€ä¸ªå±‚æ¬¡åŒ–çš„éªŒè¯æ¡†æ¶ã€‚ç†è§£è¿™äº›ç»§æ‰¿å…³ç³»å¯¹äºæŒæ¡UVMè‡³å…³é‡è¦ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬ï¼š</p>
<ul>
<li>æ­£ç¡®é€‰æ‹©åŸºç±»æ¥æ´¾ç”Ÿç”¨æˆ·è‡ªå®šä¹‰ç±»</li>
<li>ç†è§£å„ç±»çš„åŠŸèƒ½è¾¹ç•Œå’Œé€‚ç”¨åœºæ™¯</li>
<li>æ„å»ºå¯é‡ç”¨ã€å¯ç»´æŠ¤çš„éªŒè¯ç¯å¢ƒ</li>
<li>å……åˆ†åˆ©ç”¨UVMæ¡†æ¶æä¾›çš„è‡ªåŠ¨åŒ–åŠŸèƒ½</li>
</ul>
<p>å¦‚ä¸‹å›¾ï¼Œæç»˜äº†å¸¸ç”¨ç±»çš„ç»§æ‰¿å…³ç³»ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa98fbf57668449ebded1681875d8c93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5Lya5q2m5Yqf55qE54Gr5p-0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913179&amp;x-signature=8RYVQc37oiwKAnYmW37H7Q9x1BQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-1">2. æ ¹åŸºç±»ï¼šuvm_voidä¸uvm_object</h2>
<h3 data-id="heading-2">2.1 uvm_void - æ‰€æœ‰UVMç±»çš„æŠ½è±¡æ ¹åŸº</h3>
<p>â€ƒâ€ƒuvm_voidç±»æ˜¯ä¸€ä¸ªçº¯ç²¹çš„æŠ½è±¡åŸºç±»ï¼Œæ²¡æœ‰ä»»ä½•æˆå‘˜å˜é‡æˆ–æ–¹æ³•ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„ç±»åŸºæœ¬ä¸Šä¸ä¼šç›´æ¥ç»§æ‰¿äºæ­¤ç±»ã€‚</p>
<pre><code class="hljs language-systemverilog" lang="systemverilog">virtual class uvm_void;
endclass
</code></pre>
<h3 data-id="heading-3">2.2 uvm_object - æ•°æ®å®ä½“çš„æ ¸å¿ƒåŸºç±»</h3>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§ï¼š</strong></p>
<ul>
<li>å­—æ®µè‡ªåŠ¨åŒ–ï¼šuvm_field_*å®æ”¯æŒè‡ªåŠ¨å¤åˆ¶ã€æ¯”è¾ƒã€æ‰“å°</li>
<li>å·¥å‚æ¨¡å¼ï¼šæ”¯æŒç±»å‹é‡è½½å’Œå¯¹è±¡åˆ›å»º</li>
<li>å¯¹è±¡æ–¹æ³•ï¼šæä¾›copy()ã€clone()ã€compare()ã€print()ç­‰</li>
</ul>
<pre><code class="hljs language-systemverilog" lang="systemverilog">virtual class uvm_object extends uvm_void;
</code></pre>
<h3 data-id="heading-4">2.2.1 copy()æ–¹æ³•</h3>
<p>â€ƒâ€ƒå¤åˆ¶å¯¹è±¡å†…å®¹ï¼Œç›®æ ‡å¯¹è±¡éœ€å…ˆå­˜åœ¨ï¼Œcopy()æ–¹æ³•ä¸ºæµ…å¤åˆ¶</p>
<pre><code class="hljs language-systemverilog" lang="systemverilog">// ä½¿ç”¨ç¤ºä¾‹
my_transaction src_tr, dst_tr;

src_tr = my_transaction::type_id::create("src_tr");
dst_tr = my_transaction::type_id::create("dst_tr");

// éšæœºåŒ–æºå¯¹è±¡
assert(src_tr.randomize() with { data == 8'hFF; addr == 4'hA; });

// å¤åˆ¶å¯¹è±¡
dst_tr.copy(src_tr);

// éªŒè¯å¤åˆ¶ç»“æœ
if (dst_tr.data == src_tr.data &amp;&amp; dst_tr.addr == src_tr.addr) 
    `uvm_info("COPY", "Copy successful", UVM_LOW)
</code></pre>
<h3 data-id="heading-5">2.2.2 clone()æ–¹æ³•</h3>
<p>â€ƒâ€ƒåˆ›å»ºå¯¹è±¡çš„å®Œæ•´å‰¯æœ¬ï¼Œè¿”å›æ–°å¯¹è±¡ï¼Œclone()æ–¹æ³•ä¸ºæµ…å¤åˆ¶</p>
<pre><code class="hljs language-systemverilog" lang="systemverilog">// ä½¿ç”¨ç¤ºä¾‹
module clone_example;
    import uvm_pkg::*;
    `include "uvm_macros.svh"
    
    initial begin
        my_transaction src_tr, dst_tr;
        
        // åˆ›å»ºå¹¶éšæœºåŒ–æºå¯¹è±¡
        src_tr = my_transaction::type_id::create("src_tr");
        assert(src_tr.randomize() with { data == 8'hFF; addr == 4'hA; });
        
        `uvm_info("SOURCE", $sformatf("Source: data=0x%0h, addr=0x%0h", 
                                     src_tr.data, src_tr.addr), UVM_LOW)
        
        // ä½¿ç”¨cloneåˆ›å»ºå‰¯æœ¬ - ä¸€è¡Œä»£ç å®Œæˆåˆ›å»ºå’Œå¤åˆ¶
        dst_tr = src_tr.clone();
        
        `uvm_info("CLONE", $sformatf("Clone: data=0x%0h, addr=0x%0h", 
                                    dst_tr.data, dst_tr.addr), UVM_LOW)
        
        // éªŒè¯å¤åˆ¶ç»“æœ
        if (dst_tr.data == src_tr.data &amp;&amp; dst_tr.addr == src_tr.addr) 
            `uvm_info("CLONE", "Clone successful", UVM_LOW)
        
        // ä¿®æ”¹å…‹éš†å¯¹è±¡ï¼ŒéªŒè¯åŸå§‹å¯¹è±¡ä¸å—å½±å“
        dst_tr.data = 8'hAA;
        dst_tr.addr = 4'h5;
        
        `uvm_info("AFTER MODIFY", 
            $sformatf("Source: data=0x%0h, addr=0x%0h\nClone: data=0x%0h, addr=0x%0h",
                     src_tr.data, src_tr.addr, dst_tr.data, dst_tr.addr), UVM_LOW)
    end
endmodule
</code></pre>
<h3 data-id="heading-6">2.2.3 compare()æ–¹æ³•</h3>
<p>â€ƒâ€ƒæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰</p>
<pre><code class="hljs language-systemverilog" lang="systemverilog">// ä½¿ç”¨ç¤ºä¾‹
my_transaction tr1, tr2;

tr1 = my_transaction::type_id::create("tr1");
tr2 = my_transaction::type_id::create("tr2");

assert(tr1.randomize() with { data == 8'hAA; });
assert(tr2.randomize() with { data == 8'hAA; });

if (tr1.compare(tr2))
    `uvm_info("COMPARE", "Objects are equal", UVM_LOW)
else
    `uvm_warning("COMPARE", "Objects differ")
</code></pre>
<h3 data-id="heading-7">2.2.4 print()å’Œsprint()æ–¹æ³•</h3>
<p>â€ƒâ€ƒæ ¼å¼åŒ–è¾“å‡ºå¯¹è±¡å†…å®¹</p>
<pre><code class="hljs language-systemverilog" lang="systemverilog">// ä½¿ç”¨ç¤ºä¾‹
my_transaction tr = my_transaction::type_id::create("tr");
assert(tr.randomize());

// æ–¹æ³•1: ä½¿ç”¨ print()
tr.print();  // è‡ªåŠ¨æ ¼å¼åŒ–è¾“å‡ºï¼Œæ— è¿”å›å€¼

// æ–¹æ³•2: ä½¿ç”¨ convert2string()
`uvm_info("PRINT", tr.convert2string(), UVM_LOW)

// æ–¹æ³•3: ä½¿ç”¨ sprint()ï¼Œè¿”å›å­—ç¬¦ä¸²
string obj_str = tr.sprint();
$display("Object as string: %s", obj_str);
</code></pre>
<h2 data-id="heading-8">3. æ ¸å¿ƒç»„ä»¶ç±»ï¼šuvm_componentåŠå…¶æ´¾ç”Ÿç±»è¯¦è§£</h2>
<h3 data-id="heading-9">3.1 uvm_component - éªŒè¯ç»„ä»¶çš„æ ¹åŸº</h3>
<p><strong>æ ¸å¿ƒç‰¹æ€§ï¼š</strong></p>
<ul>
<li>phaseæœºåˆ¶ï¼šå‚ä¸buildã€connectã€runã€reportç­‰UVM phase</li>
<li>å±‚æ¬¡ç»“æ„ï¼šå…·æœ‰çˆ¶å­å…³ç³»çš„å›ºå®šç¡¬ä»¶å±‚çº§</li>
<li>é…ç½®æœºåˆ¶ï¼šæ”¯æŒuvm_config_dbé…ç½®</li>
<li>å·¥å‚æ³¨å†Œï¼šæ”¯æŒç»„ä»¶é‡è½½</li>
</ul>
<h3 data-id="heading-10">3.2 å…³é”®ç»„ä»¶åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-11">3.2.1 uvm_driver - ä¿¡å·é©±åŠ¨è€…</h4>
<p><code>ç»§æ‰¿å…³ç³»ï¼šuvm_void-&gt;umv_object-&gt;uvm_report_object-&gt;uvm_component-&gt;uvm_driverã€‚</code>
<strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å°†æŠ½è±¡çš„äº‹åŠ¡çº§æ•°æ®è½¬æ¢ä¸ºå…·ä½“çš„ä¿¡å·æ—¶åº</li>
<li>å®ç°ç‰¹å®šåè®®çš„æ€»çº¿é©±åŠ¨</li>
<li>æ§åˆ¶ DUT çš„è¾“å…¥ä¿¡å·æ—¶åº</li>
</ul>
<pre><code class="hljs language-systemverilog" lang="systemverilog">class bus_driver extends uvm_driver #(bus_transaction);
    `uvm_component_utils(bus_driver)
    
    virtual bus_interface vif;
    
    function new(string name, uvm_component parent);
        super.new(name, parent);
    endfunction
    
    task run_phase(uvm_phase phase);
        forever begin
            seq_item_port.get_next_item(req);
            drive_transaction(req);
            seq_item_port.item_done();
        end
    endtask
    
    task drive_transaction(bus_transaction trans);
        // åè®®å…·ä½“çš„é©±åŠ¨é€»è¾‘
        vif.addr &lt;= trans.addr;
        vif.data &lt;= trans.data;
        vif.valid &lt;= 1'b1;
        @(posedge vif.clk);
        wait(vif.ready);
        vif.valid &lt;= 1'b0;
    endtask
endclass
</code></pre>
<h4 data-id="heading-12">3.2.2 uvm_monitor - æ¥å£ç›‘è§†å™¨</h4>
<p><code>ç»§æ‰¿å…³ç³»ï¼šuvm_void-&gt;umv_object-&gt;uvm_report_object-&gt;uvm_component-&gt;uvm_monitorã€‚</code>
<strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ç›‘æµ‹ DUT æ¥å£ä¿¡å·å˜åŒ–</li>
<li>é‡‡é›†äº‹åŠ¡æ•°æ®å¹¶å‘é€ç»™å…¶ä»–ç»„ä»¶</li>
<li>åè®®æ£€æŸ¥å’Œé”™è¯¯æ£€æµ‹</li>
</ul>
<pre><code class="hljs language-systemverilog" lang="systemverilog">class bus_monitor extends uvm_monitor;
    `uvm_component_utils(bus_monitor)
    
    uvm_analysis_port #(bus_transaction) ap;
    virtual bus_interface vif;
    
    function new(string name, uvm_component parent);
        super.new(name, parent);
        ap = new("ap", this);
    endfunction
    
    task run_phase(uvm_phase phase);
        forever begin
            bus_transaction trans;
            @(posedge vif.clk);
            if(vif.valid &amp;&amp; vif.ready) begin
                trans = bus_transaction::type_id::create("trans");
                trans.addr = vif.addr;
                trans.data = vif.data;
                ap.write(trans);  // å‘é€é‡‡é›†åˆ°çš„äº‹åŠ¡
            end
        end
    endtask
endclass
</code></pre>
<h4 data-id="heading-13">3.2.3 uvm_sequencer - åºåˆ—è°ƒåº¦å™¨</h4>
<p><code>ç»§æ‰¿å…³ç³»ï¼šuvm_void-&gt;umv_object-&gt;uvm_report_object-&gt;uvm_component-&gt;uvm_sequencer_base-&gt;uvm_sequencer_param_base0&gt;uvm_sequencerã€‚</code>
<strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>è°ƒåº¦å’Œæ§åˆ¶æµ‹è¯•åºåˆ—çš„æ‰§è¡Œ</li>
<li>ç®¡ç†å¤šä¸ªåºåˆ—çš„ä¼˜å…ˆçº§å’Œä»²è£</li>
<li>æä¾›åºåˆ—çš„é‡ç”¨å’Œç»„åˆ</li>
</ul>
<pre><code class="hljs language-systemverilog" lang="systemverilog">class bus_sequencer extends uvm_sequencer #(bus_transaction);
    `uvm_component_utils(bus_sequencer)
    
    function new(string name, uvm_component parent);
        super.new(name, parent);
    endfunction
endclass

// ä½¿ç”¨ç¤ºä¾‹
class test_seq extends uvm_sequence #(bus_transaction);
    `uvm_object_utils(test_seq)
    
    task body();
        bus_transaction trans;
        repeat(10) begin
            trans = bus_transaction::type_id::create("trans");
            assert(trans.randomize());
            `uvm_send(trans)
        end
    endtask
endclass
</code></pre>
<h4 data-id="heading-14">3.2.4 uvm_agent - ç»„ä»¶å®¹å™¨</h4>
<p><code>ç»§æ‰¿å…³ç³»ï¼šuvm_void-&gt;umv_object-&gt;uvm_report_object-&gt;uvm_component-&gt;uvm_agentã€‚</code>
<strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å°è£…ç›¸å…³çš„ driverã€monitorã€sequencer</li>
<li>æ”¯æŒä¸»åŠ¨å’Œè¢«åŠ¨ä¸¤ç§æ¨¡å¼</li>
<li>æä¾›æ¨¡å—çº§çš„éªŒè¯ç»„ä»¶é‡ç”¨</li>
</ul>
<pre><code class="hljs language-systemverilog" lang="systemverilog">class bus_agent extends uvm_agent;
    `uvm_component_utils(bus_agent)
    
    bus_driver     driver;
    bus_sequencer  sequencer;
    bus_monitor    monitor;
    uvm_analysis_port #(bus_transaction) ap;
    
    uvm_active_passive_enum is_active = UVM_ACTIVE;
    
    function new(string name, uvm_component parent);
        super.new(name, parent);
    endfunction
    
    function void build_phase(uvm_phase phase);
        super.build_phase(phase);
        monitor = bus_monitor::type_id::create("monitor", this);
        ap = monitor.ap;
        
        if(is_active == UVM_ACTIVE) begin
            driver = bus_driver::type_id::create("driver", this);
            sequencer = bus_sequencer::type_id::create("sequencer", this);
        end
    endfunction
    
    function void connect_phase(uvm_phase phase);
        super.connect_phase(phase);
        if(is_active == UVM_ACTIVE) begin
            driver.seq_item_port.connect(sequencer.seq_item_export);
        end
    endfunction
endclass
</code></pre>
<h4 data-id="heading-15">3.2.5 uvm_env - éªŒè¯ç¯å¢ƒ</h4>
<p><code>ç»§æ‰¿å…³ç³»ï¼šuvm_void-&gt;umv_object-&gt;uvm_report_object-&gt;uvm_component-&gt;uvm_envã€‚</code>
<strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>é›†æˆå¤šä¸ª agent å’Œå…¶ä»–éªŒè¯ç»„ä»¶</li>
<li>é…ç½®æ•´ä¸ªéªŒè¯ç¯å¢ƒçš„å‚æ•°</li>
<li>ç®¡ç†ç»„ä»¶é—´çš„è¿æ¥å…³ç³»</li>
</ul>
<pre><code class="hljs language-systemverilog" lang="systemverilog">class bus_env extends uvm_env;
    `uvm_component_utils(bus_env)
    
    bus_agent       agent;
    bus_scoreboard  scoreboard;
    bus_coverage    coverage;
    
    function new(string name, uvm_component parent);
        super.new(name, parent);
    endfunction
    
    function void build_phase(uvm_phase phase);
        super.build_phase(phase);
        agent = bus_agent::type_id::create("agent", this);
        scoreboard = bus_scoreboard::type_id::create("scoreboard", this);
        coverage = bus_coverage::type_id::create("coverage", this);
    endfunction
    
    function void connect_phase(uvm_phase phase);
        super.connect_phase(phase);
        agent.ap.connect(scoreboard.analysis_export);
        agent.ap.connect(coverage.analysis_export);
    endfunction
endclass
</code></pre>
<h4 data-id="heading-16">3.2.6 uvm_test - æµ‹è¯•ç”¨ä¾‹</h4>
<p><code>ç»§æ‰¿å…³ç³»ï¼šuvm_void-&gt;umv_object-&gt;uvm_report_object-&gt;uvm_component-&gt;uvm_testã€‚</code>
<strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å®šä¹‰å…·ä½“çš„æµ‹è¯•åœºæ™¯å’Œæ¿€åŠ±</li>
<li>é…ç½®éªŒè¯ç¯å¢ƒå‚æ•°</li>
<li>æ§åˆ¶æµ‹è¯•çš„å¯åŠ¨å’Œç»“æŸ</li>
</ul>
<pre><code class="hljs language-systemverilog" lang="systemverilog">class read_write_test extends uvm_test;
    `uvm_component_utils(read_write_test)
    
    bus_env env;
    
    function new(string name, uvm_component parent);
        super.new(name, parent);
    endfunction
    
    function void build_phase(uvm_phase phase);
        super.build_phase(phase);
        env = bus_env::type_id::create("env", this);
        
        // é…ç½®æµ‹è¯•å‚æ•°
        uvm_config_db#(uvm_active_passive_enum)::set(
            this, "env.agent", "is_active", UVM_ACTIVE);
    endfunction
    
    task run_phase(uvm_phase phase);
        read_write_sequence seq;
        phase.raise_objection(this);
        seq = read_write_sequence::type_id::create("seq");
        seq.start(env.agent.sequencer);
        phase.drop_objection(this);
    endtask
endclass
</code></pre>
<h4 data-id="heading-17">3.2.7 uvm_scoreboard - æ•°æ®æ£€æŸ¥å™¨</h4>
<p><code>ç»§æ‰¿å…³ç³»ï¼šuvm_void-&gt;umv_object-&gt;uvm_report_object-&gt;uvm_component-&gt;uvm_scoreboardã€‚</code>
<strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ¯”è¾ƒ DUT è¾“å‡ºä¸é¢„æœŸç»“æœ</li>
<li>ç»Ÿè®¡æµ‹è¯•é€šè¿‡ç‡å’Œé”™è¯¯ä¿¡æ¯</li>
<li>æä¾›åŠŸèƒ½æ­£ç¡®æ€§éªŒè¯</li>
</ul>
<pre><code class="hljs language-systemverilog" lang="systemverilog">class bus_scoreboard extends uvm_scoreboard;
    `uvm_component_utils(bus_scoreboard)
    
    uvm_analysis_imp #(bus_transaction, bus_scoreboard) analysis_export;
    
    // é¢„æœŸç»“æœé˜Ÿåˆ—
    bus_transaction expected_queue[$];
    int error_count = 0;
    int total_count = 0;
    
    function new(string name, uvm_component parent);
        super.new(name, parent);
        analysis_export = new("analysis_export", this);
    endfunction
    
    function void write(bus_transaction trans);
        bus_transaction expected;
        total_count++;
        
        if(expected_queue.size() &gt; 0) begin
            expected = expected_queue.pop_front();
            if(!trans.compare(expected)) begin
                error_count++;
                `uvm_error("SCOREBOARD", 
                    $sformatf("Data mismatch! Expected: %0h, Got: %0h", 
                    expected.data, trans.data))
            end
        end
    endfunction
    
    function void report_phase(uvm_phase phase);
        `uvm_info("SCOREBOARD",
            $sformatf("Test Summary: Total=%0d, Errors=%0d, Pass Rate=%.2f%%",
            total_count, error_count, 
            (total_count-error_count)*100.0/total_count), UVM_LOW)
    endfunction
endclass
</code></pre>
<h4 data-id="heading-18">3.2.8 uvm_subscriber - æ•°æ®è®¢é˜…è€…</h4>
<p><code>ç»§æ‰¿å…³ç³»ï¼šuvm_void-&gt;umv_object-&gt;uvm_report_object-&gt;uvm_component-&gt;uvm_subscriberã€‚</code>
<strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ”¶é›†åŠŸèƒ½è¦†ç›–ç‡æ•°æ®</li>
<li>ç»Ÿè®¡äº‹åŠ¡ç‰¹å¾åˆ†å¸ƒ</li>
<li>æ€§èƒ½åˆ†æå’Œç›‘æ§</li>
</ul>
<pre><code class="hljs language-systemverilog" lang="systemverilog">class bus_coverage extends uvm_subscriber #(bus_transaction);
    `uvm_component_utils(bus_coverage)
    
    bus_transaction cov_trans;
    
    covergroup bus_cg;
        addr_cp: coverpoint cov_trans.addr {
            bins low    = {[0:32'h0000_FFFF]};
            bins mid    = {[32'h0001_0000:32'hFFFF_0000]};
            bins high   = {[32'hFFFF_0001:32'hFFFF_FFFF]};
        }
        data_cp: coverpoint cov_trans.data {
            bins zero   = {0};
            bins small  = {[1:255]};
            bins large  = {[256:32'hFFFF_FFFF]};
        }
        rw_cp: coverpoint cov_trans.rw;
    endgroup
    
    function new(string name, uvm_component parent);
        super.new(name, parent);
        bus_cg = new;
    endfunction
    
    function void write(bus_transaction t);
        cov_trans = t;
        bus_cg.sample();
    endfunction
    
    function void report_phase(uvm_phase phase);
        `uvm_info("COVERAGE", 
            $sformatf("Functional Coverage: %.2f%%", 
            bus_cg.get_inst_coverage()), UVM_LOW)
    endfunction
endclass
</code></pre>
<h2 data-id="heading-19">4. äº‹åŠ¡ä¸åºåˆ—çš„ç»§æ‰¿å…³ç³»</h2>
<h3 data-id="heading-20">4.1 transaction</h3>
<p>â€ƒâ€ƒç”¨æˆ·è‡ªå®šä¹‰çš„äº‹åŠ¡transactionç»§æ‰¿è‡ªuvm_sequence_itemç±»ã€‚<code>ç»§æ‰¿å…³ç³»ï¼šuvm_void-&gt;umv_object-&gt;uvm_transaction-&gt;uvm_sequence_item-&gt;user_transactionã€‚</code>
<strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ•°æ®å»ºæ¨¡ï¼štransactionç”¨äºå»ºæ¨¡åœ¨éªŒè¯ç»„ä»¶ä¹‹é—´ä¼ é€’çš„æ•°æ®é¡¹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ€»çº¿è¯»å†™æ“ä½œã€ä¸€ä¸ªç½‘ç»œæ•°æ®åŒ…æˆ–ä¸€ä¸ªå­˜å‚¨å™¨è®¿é—®éƒ½å¯ä»¥å»ºæ¨¡ä¸ºä¸€ä¸ªtransactionã€‚</li>
<li>éšæœºæ¿€åŠ±ç”Ÿæˆï¼štransactioné€šå¸¸åŒ…å«éšæœºå­—æ®µå’Œçº¦æŸï¼Œç”¨äºç”Ÿæˆéšæœºçš„æ¿€åŠ±æ•°æ®ã€‚</li>
<li>æ•°æ®è®°å½•å’Œæ¯”è¾ƒï¼štransactionå¯ä»¥è®°å½•ä»¿çœŸçš„è¾“å…¥å’Œè¾“å‡ºï¼Œå¹¶ç”¨äºæ¯”è¾ƒé¢„æœŸå’Œå®é™…ç»“æœã€‚</li>
<li>åŠŸèƒ½è¦†ç›–ï¼štransactionä¸­çš„å­—æ®µå¯ä»¥ç”¨æ¥å®šä¹‰åŠŸèƒ½è¦†ç›–ç‚¹ï¼Œä»¥è¡¡é‡æµ‹è¯•çš„å®Œæ•´æ€§ã€‚</li>
</ul>
<pre><code class="hljs language-systemverilog" lang="systemverilog">class bus_transaction extends uvm_sequence_item;
   rand bit [31:0] addr;
   rand bit [31:0] data;
   rand bit        read_write; // 0ä¸ºè¯»ï¼Œ1ä¸ºå†™

   `uvm_object_utils_begin(bus_transaction)
      `uvm_field_int(addr, UVM_ALL_ON)
      `uvm_field_int(data, UVM_ALL_ON)
      `uvm_field_int(read_write, UVM_ALL_ON)
   `uvm_object_utils_end

   constraint addr_c { addr inside {[0:32'h1000]}; }
   constraint data_c { data inside {[0:32'hFFFF]}; }

   function new(string name = "bus_transaction");
      super.new(name);
   endfunction
endclass
</code></pre>
<h3 data-id="heading-21">4.2 sequence</h3>
<p>â€ƒâ€ƒç”¨æˆ·è‡ªå®šä¹‰çš„åºåˆ—sequenceç»§æ‰¿è‡ªuvm_sequenceç±»ã€‚<code>ç»§æ‰¿å…³ç³»ï¼šuvm_void-&gt;umv_object-&gt;uvm_transaction-&gt;uvm_sequence_item-&gt;uvm_sequence_base-&gt;uvm_sequence-&gt;user_sequenceã€‚</code>
<strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æµ‹è¯•åœºæ™¯ç”Ÿæˆï¼šsequenceç”¨äºç”Ÿæˆç‰¹å®šçš„æµ‹è¯•åœºæ™¯ï¼Œä¾‹å¦‚è¿ç»­è¯»å†™ã€é”™è¯¯æ³¨å…¥ã€ç‰¹å®šæ¨¡å¼çš„æ•°æ®ä¼ è¾“ç­‰ã€‚</li>
<li>æ¿€åŠ±æ§åˆ¶ï¼šsequenceå¯ä»¥æ§åˆ¶æ¿€åŠ±çš„æ—¶åºã€æ•°é‡å’Œç±»å‹ï¼Œä»è€Œåˆ›å»ºå¤æ‚çš„æµ‹è¯•åºåˆ—ã€‚</li>
<li>é‡ç”¨å’Œç»„åˆï¼šç®€å•çš„sequenceå¯ä»¥ç»„åˆæˆæ›´å¤æ‚çš„sequenceï¼Œæé«˜ä»£ç çš„é‡ç”¨æ€§ã€‚</li>
<li>åŒæ­¥å’Œåè°ƒï¼šsequenceå¯ä»¥åŒæ­¥å¤šä¸ªsequencerï¼Œåè°ƒå¤šä¸ªæ¥å£çš„æ¿€åŠ±ç”Ÿæˆã€‚</li>
</ul>
<pre><code class="hljs language-systemverilog" lang="systemverilog">class simple_read_write_sequence extends uvm_sequence #(bus_transaction);
   `uvm_object_utils(simple_read_write_sequence)

   function new(string name = "simple_read_write_sequence");
      super.new(name);
   endfunction

   virtual task body();
      bus_transaction trans;

      // å†™æ“ä½œ
      trans = bus_transaction::type_id::create("trans");
      start_item(trans);
      assert(trans.randomize() with { read_write == 1; });
      finish_item(trans);

      // è¯»æ“ä½œ
      trans = bus_transaction::type_id::create("trans");
      start_item(trans);
      assert(trans.randomize() with { read_write == 0; });
      finish_item(trans);
   endtask
endclass
</code></pre>
<h2 data-id="heading-22">5. å®ç”¨å·¥å…·ç±»ï¼šé…ç½®ã€å›è°ƒç­‰è¾…åŠ©ç±»çš„ç»§æ‰¿å…³ç³»</h2>
<h3 data-id="heading-23">5.1 é…ç½®ç®¡ç†ç±»</h3>
<p>â€ƒâ€ƒuvm_config_dbç”¨äºéªŒè¯ç¯å¢ƒçš„é…ç½®ï¼Œå…¶ç»§æ‰¿äºuvm_resource_dbè¿™ä¸ªæ¨¡æ¿ç±»ï¼Œ<code>ç»§æ‰¿å…³ç³»ï¼šuvm_resource_db-&gt;uvm_config_dbã€‚</code></p>
<pre><code class="hljs language-systemverilog" lang="systemverilog">class uvm_config_db #(type T=int) extends uvm_resource_db #(T);
    // æä¾›set()/get()é™æ€æ–¹æ³•
endclass
uvm_resource_db - åº•å±‚èµ„æºç®¡ç†

class uvm_resource_db #(type T=uvm_object);
    // éšå¼ç»§æ‰¿è‡ªSystemVerilogçš„objectç±»
endclass
</code></pre>
<h3 data-id="heading-24">5.2 å›è°ƒæœºåˆ¶ç±»</h3>
<p>â€ƒâ€ƒç”¨æˆ·è‡ªå®šä¹‰çš„å›è°ƒç±»ç»§æ‰¿è‡ª<code>uvm_callbackç±»ï¼Œç»§æ‰¿å…³ç³»ï¼šuvm_void-&gt;umv_object-&gt;uvm_callback-&gt;user_callbackã€‚</code></p>
<pre><code class="hljs language-systemverilog" lang="systemverilog">class uvm_callback extends uvm_object;
    // æ”¯æŒå‰ç½®/åç½®å›è°ƒæ–¹æ³•
endclass
åº”ç”¨ç¤ºä¾‹ï¼š

class driver_callback extends uvm_callback;
    virtual task pre_tx(ref transaction tr);
        // é”™è¯¯æ³¨å…¥ã€å»¶è¿Ÿæ§åˆ¶ç­‰
    endtask
endclass
</code></pre>
<h2 data-id="heading-25">6. æ€»ç»“</h2>
<p>â€ƒâ€ƒæœ¬æ–‡ä¸»è¦é˜è¿°äº†UVMï¼ˆUniversal Verification Methodologyï¼‰ä¸­å…³é”®ç±»çš„ç»§æ‰¿å…³ç³»ï¼Œä¸ºç†è§£å’Œæ„å»ºé«˜æ•ˆçš„éªŒè¯ç¯å¢ƒæä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡æ¸…æ™°çš„å±‚æ¬¡åŒ–åˆ†ç±»ï¼Œä¸ºåç»­çš„å­¦ä¹ æä¾›é‡è¦çš„å‚è€ƒã€‚ <br/><br/>
ä¸Šä¸€ç¯‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_38773137%2Farticle%2Fdetails%2F154953791%3Fspm%3D1011.2415.3001.5331" target="_blank" title="https://blog.csdn.net/qq_38773137/article/details/154953791?spm=1011.2415.3001.5331" ref="nofollow noopener noreferrer">UVMéªŒè¯å…¥é—¨(1)-uvmæ˜¯ä»€ä¹ˆ</a>
ä¸‹ä¸€ç¯‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_38773137%2Farticle%2Fdetails%2F155004766" target="_blank" title="https://blog.csdn.net/qq_38773137/article/details/155004766" ref="nofollow noopener noreferrer">UVMéªŒè¯å…¥é—¨(3)-factoryå·¥å‚æœºåˆ¶</a><br/></p>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fqq_38773137%2F92291763" target="_blank" title="https://download.csdn.net/download/qq_38773137/92291763" ref="nofollow noopener noreferrer">UVM_Cl ass_Reference_Manual_1.0.pdf</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºJavaçš„Socket.IOæœåŠ¡ç«¯åŸºç¡€æ¼”ç¤º]]></title>    <link>https://juejin.cn/post/7577364921657016362</link>    <guid>https://juejin.cn/post/7577364921657016362</guid>    <pubDate>2025-11-28T05:48:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577364921657016362" data-draft-id="7577309505711161407" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºJavaçš„Socket.IOæœåŠ¡ç«¯åŸºç¡€æ¼”ç¤º"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-28T05:48:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸¾å¤§æ —å­"/> <meta itemprop="url" content="https://juejin.cn/user/2550465239452670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºJavaçš„Socket.IOæœåŠ¡ç«¯åŸºç¡€æ¼”ç¤º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2550465239452670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸¾å¤§æ —å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T05:48:21.000Z" title="Fri Nov 28 2025 05:48:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>socket.ioæ˜¯ä¸€å¥—é€šä¿¡ç»„ä»¶ï¼Œæ”¯æŒå³æ—¶ã€åŒå‘ä¸åŸºäºäº‹ä»¶çš„äº¤æµã€‚å®ƒå¯ä»¥åœ¨æ¯ä¸ªå¹³å°ã€æ¯ä¸ªæµè§ˆå™¨å’Œæ¯ä¸ªè®¾å¤‡ä¸Šå·¥ä½œï¼Œå¯é æ€§å’Œé€Ÿåº¦åŒæ ·ç¨³å®šã€‚socket.ioæœ‰ä¸€å¥—è‡ªå·±çš„äº¤äº’åè®®ï¼Œå¯ä»¥åŸºäºè¯¥åŸºç¡€åè®®ï¼Œå®ç°ç›¸åº”çš„åº”ç”¨åŠŸèƒ½ï¼Œä½¿å¾—åŠŸèƒ½å¼€å‘å°†ä¼šæ›´åŠ ä¾¿æ·ã€‚æœ¬æ–‡é™äºç¯‡å¹…ï¼Œå¯¹äºåè®®ä¸ä¼šåšè¿‡å¤šä»‹ç»ï¼Œä¸»è¦ä»å®ç°æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„äº¤äº’æ¥ä»‹ç»ï¼Œå¯¹åè®®æ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥çœ‹å®˜æ–¹çš„æ–‡æ¡£ã€‚</p>
<h2 data-id="heading-1">æœåŠ¡ç«¯å¼€å‘</h2>
<p>é¦–å…ˆæ·»åŠ å¿…è¦çš„ä¾èµ–ï¼Œæˆ‘ä»¬ä»¥åŸºäºnettyçš„netty-socketioä¸ºåŸºç¡€ï¼Œé‡‡ç”¨Javaå®ç°ä¸€ä¸ªæœåŠ¡ç«¯ï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå†™åœ¨äº†ä¸€ä¸ªæ–¹æ³•ä¸­ã€‚</p>
<pre><code class="hljs language-xml" lang="xml">
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.corundumstudio.socketio<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>netty-socketio<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.13<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- Netty æ ¸å¿ƒä¾èµ–ï¼ˆæ‰‹åŠ¨æŒ‡å®šå…¼å®¹ç‰ˆæœ¬ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.netty<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>netty-buffer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${netty.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.netty<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>netty-transport<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${netty.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.netty<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>netty-handler<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${netty.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.netty<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>netty-codec-http<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${netty.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

</code></pre>
<p>nettyçš„ç‰ˆæœ¬è¿™é‡Œé‡‡ç”¨äº†<code>4.1.115.Final</code>ã€‚</p>
<p>æœåŠ¡ç«¯æ–¹æ³•ä»£ç ä¸»è¦æœ‰å¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>æœåŠ¡é…ç½®ï¼Œæ¯”å¦‚host, portï¼Œä»¥åŠè·¨åŸŸè®¾ç½®ã€‚</li>
<li>å¢åŠ æœåŠ¡namespaceã€‚è¿™ä¸ªæ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µï¼ŒæœåŠ¡ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„namespaceï¼Œå¯¼è‡´æ²¡æœ‰å’Œè‡ªå®šä¹‰çš„å…³è”èµ·æ¥ï¼Œå¯¼è‡´è¯·æ±‚æ²¡æœ‰æ­£ç¡®å¤„ç†ã€‚</li>
<li>å¢åŠ ç›‘å¬å™¨ã€‚ä¸ºäº†ç†æ¸…è¯·æ±‚æƒ…å†µï¼Œå¢åŠ äº†è¿æ¥ç›‘å¬ï¼Œæ•°æ®ç›‘å¬ï¼Œä»¥åŠæ¢é’ˆç›‘å¬ï¼Œåˆ†åˆ«æ˜¯<code>ConnectListener</code>,<code>DataListener</code>,<code>PingListener</code>,<code>PongListener</code>ã€‚æ­¤å¤–è¿˜å¢åŠ äº†ä¸€ä¸ªäº‹ä»¶æ‹¦æˆªå™¨<code>interceptor</code>ã€‚</li>
<li>æœ€åæ˜¯å¯åŠ¨æœåŠ¡ç«¯ã€‚</li>
</ul>
<p>å®Œæ•´ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.corundumstudio.socketio.*;
<span class="hljs-keyword">import</span> com.corundumstudio.socketio.listener.*;
<span class="hljs-keyword">import</span> com.corundumstudio.socketio.transport.NamespaceClient;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutionException;

<span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException, ExecutionException {
    <span class="hljs-type">Configuration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>();
    configuration.setAckMode(AckMode.AUTO);
    configuration.setContext(<span class="hljs-string">"/realtime"</span>);
    configuration.setHostname(<span class="hljs-string">"0.0.0.0"</span>);
    configuration.setPort(<span class="hljs-number">8000</span>);
    configuration.setAllowHeaders(<span class="hljs-string">"*"</span>);
    configuration.setOrigin(<span class="hljs-string">"*"</span>);

    <span class="hljs-type">SocketIOServer</span> <span class="hljs-variable">server</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SocketIOServer</span>(configuration);
    <span class="hljs-type">SocketIONamespace</span> <span class="hljs-variable">namespace</span> <span class="hljs-operator">=</span> server.addNamespace(<span class="hljs-string">"/realtime"</span>);

    namespace.addConnectListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ConnectListener</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onConnect</span><span class="hljs-params">(SocketIOClient client)</span> {
            log.info(<span class="hljs-string">"Connected ns:{}, remote:{} "</span>, client.getNamespace().getName(), client.getRemoteAddress());
        }
    });
    namespace.addEventListener(<span class="hljs-string">"update"</span>, Object.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataListener</span>&lt;Object&gt;() {

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onData</span><span class="hljs-params">(SocketIOClient client, Object data, AckRequest ackSender)</span> <span class="hljs-keyword">throws</span> Exception {
            log.info(<span class="hljs-string">"Data:{}"</span>, data);
            ackSender.sendAckData(<span class="hljs-string">"æ¥å—åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯ï¼Œç±»å‹ï¼š"</span>+data.getClass().getSimpleName());
        }
    });

    namespace.addPingListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PingListener</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPing</span><span class="hljs-params">(SocketIOClient client)</span> {
            log.info(<span class="hljs-string">"Ping ns:{}, remote:{}"</span>, client.getNamespace().getName(),client.getRemoteAddress());
        }
    });
    namespace.addPongListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PongListener</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPong</span><span class="hljs-params">(SocketIOClient client)</span> {
            log.info(<span class="hljs-string">"Pong ns:{}, remote:{}"</span>, client.getNamespace(),client.getRemoteAddress());
        }
    });

    namespace.addEventInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">EventInterceptor</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onEvent</span><span class="hljs-params">(NamespaceClient client, String eventName, List&lt;Object&gt; args, AckRequest ackRequest)</span> {
            log.info(<span class="hljs-string">"Event interceptor:{}"</span>, eventName);
        }
    });
    <span class="hljs-comment">//start</span>
    server.start();
    Thread.currentThread().join();
}
</code></pre>
<h2 data-id="heading-2">å®¢æˆ·ç«¯å¼€å‘</h2>
<p>å®¢æˆ·ç«¯ä»£ç åŠŸèƒ½ä¸»è¦æœ‰è¿æ¥æœåŠ¡ç«¯ï¼Œå‘é€è‡ªå®šä¹‰äº‹ä»¶æ¶ˆæ¯ï¼Œä»¥åŠæ–­å¼€è¿æ¥åŠŸèƒ½ï¼ŒåŸºäºAIç”Ÿæˆå’Œä¿®æ”¹ã€‚å®é™…çš„è¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Socket.IO éªŒè¯ Demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        * {
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">box-sizing</span>: border-box;
            <span class="hljs-attribute">font-family</span>: <span class="hljs-string">"Microsoft YaHei"</span>, sans-serif;
        }
        <span class="hljs-selector-class">.container</span> {
            <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);
        }
        <span class="hljs-selector-class">.title</span> {
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
        }
        <span class="hljs-selector-class">.config</span> {
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
        }
        <span class="hljs-selector-class">.config</span> <span class="hljs-selector-tag">label</span> {
            <span class="hljs-attribute">display</span>: inline-block;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#555</span>;
        }
        <span class="hljs-selector-class">.config</span> <span class="hljs-selector-tag">input</span> {
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;
            <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-number">130px</span>);
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
        }
        <span class="hljs-selector-class">.btn-group</span> {
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
        }
        <span class="hljs-selector-tag">button</span> {
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">border</span>: none;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
            <span class="hljs-attribute">cursor</span>: pointer;
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
            <span class="hljs-attribute">transition</span>: background <span class="hljs-number">0.3s</span>;
        }
        <span class="hljs-selector-id">#connectBtn</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#2196F3</span>; }
        <span class="hljs-selector-id">#connectBtn</span><span class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#1976D2</span>; }
        <span class="hljs-selector-id">#sendBtn</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#4CAF50</span>; }
        <span class="hljs-selector-id">#sendBtn</span><span class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#388E3C</span>; }
        <span class="hljs-selector-id">#disconnectBtn</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#F44336</span>; }
        <span class="hljs-selector-id">#disconnectBtn</span><span class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#D32F2F</span>; }
        <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:disabled</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#9E9E9E</span>;
            <span class="hljs-attribute">cursor</span>: not-allowed;
        }
        <span class="hljs-selector-class">.message-input</span> {
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
        }
        <span class="hljs-selector-class">.message-input</span> <span class="hljs-selector-tag">textarea</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
            <span class="hljs-attribute">resize</span>: none;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
        }
        <span class="hljs-selector-class">.log-area</span> {
            <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">overflow-y</span>: auto;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#fafafa</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">13px</span>;
            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.5</span>;
        }
        <span class="hljs-selector-class">.log-info</span> { <span class="hljs-attribute">color</span>: <span class="hljs-number">#2196F3</span>; }
        <span class="hljs-selector-class">.log-success</span> { <span class="hljs-attribute">color</span>: <span class="hljs-number">#4CAF50</span>; }
        <span class="hljs-selector-class">.log-error</span> { <span class="hljs-attribute">color</span>: <span class="hljs-number">#F44336</span>; }
        <span class="hljs-selector-class">.log-time</span> { <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>; }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>Socket.IO éªŒè¯ Demo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"config"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>æœåŠ¡ç«¯åœ°å€ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"serverUrl"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"http://localhost:8000/realtime"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å¦‚ï¼šhttp://localhost:8000/realtime"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>æ¶ˆæ¯å†…å®¹ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"msgContent"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"æµ‹è¯•æ¶ˆæ¯å†…å®¹"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æ¶ˆæ¯å†…å®¹"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>æ—¶é—´æˆ³ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"msgTimestamp"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è‡ªåŠ¨ç”Ÿæˆ"</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ“ä½œæŒ‰é’® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-group"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"connectBtn"</span>&gt;</span>è¿æ¥æœåŠ¡ç«¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sendBtn"</span> <span class="hljs-attr">disabled</span>&gt;</span>å‘é€ update äº‹ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"disconnectBtn"</span> <span class="hljs-attr">disabled</span>&gt;</span>æ–­å¼€è¿æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰æ¶ˆæ¯è¾“å…¥æ¡†ï¼ˆå¯é€‰ï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message-input"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"customMsg"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è‡ªå®šä¹‰JSONæ ¼å¼æ¶ˆæ¯ï¼ˆå¯é€‰ï¼Œä¼˜å…ˆçº§é«˜äºä¸Šæ–¹è¡¨å•ï¼‰"</span>&gt;</span>
{
    "content": "è‡ªå®šä¹‰æµ‹è¯•æ¶ˆæ¯",
    "timestamp": 1719000000000
}
            <span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ—¥å¿—è¾“å‡º --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"log-area"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"logArea"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å¼•å…¥Socket.IOå®¢æˆ·ç«¯ï¼ˆCDNï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.socket.io/4.7.2/socket.io.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// å…¨å±€å˜é‡</span>
        <span class="hljs-keyword">let</span> socket = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">const</span> serverUrlInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'serverUrl'</span>);
        <span class="hljs-keyword">const</span> msgContentInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'msgContent'</span>);
        <span class="hljs-keyword">const</span> msgTimestampInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'msgTimestamp'</span>);
        <span class="hljs-keyword">const</span> customMsgInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'customMsg'</span>);
        <span class="hljs-keyword">const</span> connectBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'connectBtn'</span>);
        <span class="hljs-keyword">const</span> sendBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sendBtn'</span>);
        <span class="hljs-keyword">const</span> disconnectBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'disconnectBtn'</span>);
        <span class="hljs-keyword">const</span> logArea = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'logArea'</span>);

        <span class="hljs-comment">// åˆå§‹åŒ–æ—¶é—´æˆ³</span>
        msgTimestampInput.<span class="hljs-property">value</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();

        <span class="hljs-comment">// æ—¥å¿—è¾“å‡ºå‡½æ•°</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">message, type = <span class="hljs-string">'info'</span></span>) {
            <span class="hljs-keyword">const</span> time = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toLocaleTimeString</span>();
            <span class="hljs-keyword">const</span> className = <span class="hljs-string">`log-<span class="hljs-subst">${type}</span>`</span>;
            <span class="hljs-keyword">const</span> logItem = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
            logItem.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`&lt;span class="log-time"&gt;[<span class="hljs-subst">${time}</span>]&lt;/span&gt; &lt;span class="<span class="hljs-subst">${className}</span>"&gt;<span class="hljs-subst">${message}</span>&lt;/span&gt;`</span>;
            logArea.<span class="hljs-title function_">appendChild</span>(logItem);
            <span class="hljs-comment">// è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨</span>
            logArea.<span class="hljs-property">scrollTop</span> = logArea.<span class="hljs-property">scrollHeight</span>;
        }

        <span class="hljs-comment">// è¿æ¥æŒ‰é’®ç‚¹å‡»äº‹ä»¶</span>
        connectBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">const</span> serverUrl = serverUrlInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
            <span class="hljs-keyword">if</span> (!serverUrl) {
                <span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·è¾“å…¥æœåŠ¡ç«¯åœ°å€ï¼'</span>, <span class="hljs-string">'error'</span>);
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-comment">// æ–­å¼€å·²æœ‰è¿æ¥ï¼ˆé˜²æ­¢é‡å¤è¿æ¥ï¼‰</span>
            <span class="hljs-keyword">if</span> (socket) {
                socket.<span class="hljs-title function_">disconnect</span>();
                socket = <span class="hljs-literal">null</span>;
            }

            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// è¿æ¥Socket.IOæœåŠ¡ç«¯</span>
                <span class="hljs-title function_">log</span>(<span class="hljs-string">`æ­£åœ¨è¿æ¥ï¼š<span class="hljs-subst">${serverUrl}</span>`</span>, <span class="hljs-string">'info'</span>);
                socket = <span class="hljs-title function_">io</span>(serverUrl, {
                    <span class="hljs-attr">path</span>: <span class="hljs-string">'/realtime'</span>,
                    <span class="hljs-attr">reconnection</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// å…³é—­è‡ªåŠ¨é‡è¿ï¼ˆä¾¿äºæµ‹è¯•ï¼‰</span>
                    <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span> <span class="hljs-comment">// è¿æ¥è¶…æ—¶10ç§’</span>
                });

                <span class="hljs-comment">// è¿æ¥æˆåŠŸå›è°ƒ</span>
                socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">'connect'</span>, <span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-title function_">log</span>(<span class="hljs-string">'âœ… è¿æ¥æœåŠ¡ç«¯æˆåŠŸï¼'</span>, <span class="hljs-string">'success'</span>);
                    connectBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
                    sendBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
                    disconnectBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
                });

                <span class="hljs-comment">// è¿æ¥å¤±è´¥å›è°ƒ</span>
                socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">'connect_error'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
                    <span class="hljs-title function_">log</span>(<span class="hljs-string">`âŒ è¿æ¥å¤±è´¥ï¼š<span class="hljs-subst">${error.message}</span>`</span>, <span class="hljs-string">'error'</span>);
                    <span class="hljs-title function_">resetState</span>();
                });

                <span class="hljs-comment">// æ–­å¼€è¿æ¥å›è°ƒ</span>
                socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">'disconnect'</span>, <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> {
                    <span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ”Œ è¿æ¥æ–­å¼€ï¼š<span class="hljs-subst">${reason}</span>`</span>, <span class="hljs-string">'info'</span>);
                    <span class="hljs-title function_">resetState</span>();
                });

                <span class="hljs-comment">// æ¥æ”¶æœåŠ¡ç«¯æ¶ˆæ¯ï¼ˆå¯é€‰ï¼Œè‹¥æœåŠ¡ç«¯ä¸»åŠ¨æ¨é€äº‹ä»¶ï¼‰</span>
                socket.<span class="hljs-title function_">onAny</span>(<span class="hljs-function">(<span class="hljs-params">event, ...args</span>) =&gt;</span> {
                    <span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ“¥ æ¥æ”¶æœåŠ¡ç«¯äº‹ä»¶ [<span class="hljs-subst">${event}</span>]ï¼š<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(args)}</span>`</span>, <span class="hljs-string">'info'</span>);
                });

            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-title function_">log</span>(<span class="hljs-string">`âŒ è¿æ¥å¼‚å¸¸ï¼š<span class="hljs-subst">${error.message}</span>`</span>, <span class="hljs-string">'error'</span>);
                <span class="hljs-title function_">resetState</span>();
            }
        });

        <span class="hljs-comment">// å‘é€æ¶ˆæ¯æŒ‰é’®ç‚¹å‡»äº‹ä»¶</span>
        sendBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">if</span> (!socket || !socket.<span class="hljs-property">connected</span>) {
                <span class="hljs-title function_">log</span>(<span class="hljs-string">'âŒ æœªè¿æ¥åˆ°æœåŠ¡ç«¯ï¼'</span>, <span class="hljs-string">'error'</span>);
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-comment">// æ„å»ºæ¶ˆæ¯æ•°æ®ï¼ˆä¼˜å…ˆä½¿ç”¨è‡ªå®šä¹‰JSONï¼Œå¦åˆ™ç”¨è¡¨å•æ•°æ®ï¼‰</span>
            <span class="hljs-keyword">let</span> messageData;
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// å°è¯•è§£æè‡ªå®šä¹‰æ¶ˆæ¯</span>
                <span class="hljs-keyword">const</span> customMsg = customMsgInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
                <span class="hljs-keyword">if</span> (customMsg) {
                    messageData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(customMsg);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// è¡¨å•æ„å»ºæ¶ˆæ¯</span>
                    messageData = {
                        <span class="hljs-attr">content</span>: msgContentInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>() || <span class="hljs-string">'é»˜è®¤æµ‹è¯•æ¶ˆæ¯'</span>,
                        <span class="hljs-attr">timestamp</span>: msgTimestampInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>() ? <span class="hljs-title class_">Number</span>(msgTimestampInput.<span class="hljs-property">value</span>) : <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
                    };
                }
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-title function_">log</span>(<span class="hljs-string">`âŒ æ¶ˆæ¯æ ¼å¼é”™è¯¯ï¼š<span class="hljs-subst">${error.message}</span>`</span>, <span class="hljs-string">'error'</span>);
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-comment">// å‘é€updateäº‹ä»¶ï¼Œå¹¶ç­‰å¾…ACKå“åº”</span>
            <span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ“¤ å‘é€ update äº‹ä»¶ï¼š<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(messageData)}</span>`</span>, <span class="hljs-string">'info'</span>);
            socket.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'update'</span>, messageData, <span class="hljs-function">(<span class="hljs-params">ackData</span>) =&gt;</span> {
                <span class="hljs-comment">// æ¥æ”¶æœåŠ¡ç«¯çš„ACKå“åº”</span>
                <span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ… æ”¶åˆ°æœåŠ¡ç«¯ACKï¼š<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(ackData)}</span>`</span>, <span class="hljs-string">'success'</span>);
            });

            <span class="hljs-comment">// æ›´æ–°æ—¶é—´æˆ³ï¼ˆä¾¿äºä¸‹æ¬¡å‘é€ï¼‰</span>
            msgTimestampInput.<span class="hljs-property">value</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
        });

        <span class="hljs-comment">// æ–­å¼€è¿æ¥æŒ‰é’®ç‚¹å‡»äº‹ä»¶</span>
        disconnectBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">if</span> (socket) {
                socket.<span class="hljs-title function_">disconnect</span>();
                <span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ”Œ ä¸»åŠ¨æ–­å¼€è¿æ¥'</span>, <span class="hljs-string">'info'</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-title function_">log</span>(<span class="hljs-string">'âŒ æ— æœ‰æ•ˆè¿æ¥'</span>, <span class="hljs-string">'error'</span>);
            }
        });

        <span class="hljs-comment">// é‡ç½®æŒ‰é’®çŠ¶æ€</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">resetState</span>(<span class="hljs-params"/>) {
            connectBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
            sendBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
            disconnectBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
            socket = <span class="hljs-literal">null</span>;
        }

        <span class="hljs-comment">// é¡µé¢å…³é—­æ—¶æ–­å¼€è¿æ¥</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'beforeunload'</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">if</span> (socket) {
                socket.<span class="hljs-title function_">disconnect</span>();
            }
        });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-3">æ•ˆæœæ¼”ç¤º</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e53768999d1a413eaee68b6f3370920e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Li-5aSn5qCX5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913701&amp;x-signature=2GuSJKWKWkAwWh0A2H%2B4Trod45Y%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">å‚è€ƒèµ„æ–™</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsocket.io%2Fzh-CN%2F" target="_blank" title="https://socket.io/zh-CN/" ref="nofollow noopener noreferrer">socket.io/zh-CN/</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[14.Kotlin ç±»ï¼šç±»çš„å½¢æ€ï¼ˆä¸€ï¼‰ï¼šæŠ½è±¡ç±» (Abstract Class)]]></title>    <link>https://juejin.cn/post/7577284968923545600</link>    <guid>https://juejin.cn/post/7577284968923545600</guid>    <pubDate>2025-11-28T05:50:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577284968923545600" data-draft-id="7576861477266849811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="14.Kotlin ç±»ï¼šç±»çš„å½¢æ€ï¼ˆä¸€ï¼‰ï¼šæŠ½è±¡ç±» (Abstract Class)"/> <meta itemprop="keywords" content="åç«¯,Android,Kotlin"/> <meta itemprop="datePublished" content="2025-11-28T05:50:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Android_å°é›¨"/> <meta itemprop="url" content="https://juejin.cn/user/220360279590862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            14.Kotlin ç±»ï¼šç±»çš„å½¢æ€ï¼ˆä¸€ï¼‰ï¼šæŠ½è±¡ç±» (Abstract Class)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/220360279590862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Android_å°é›¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T05:50:06.000Z" title="Fri Nov 28 2025 05:50:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>å¸Œæœ›å¸®ä½ åœ¨Kotlinè¿›é˜¶è·¯ä¸Šå°‘èµ°å¼¯è·¯ï¼Œåœ¨æŠ€æœ¯ä¸Šç¨³æ­¥æå‡ã€‚å½“ç„¶ï¼Œç”±äºä¸ªäººçŸ¥è¯†å‚¨å¤‡æœ‰é™ï¼Œç¬”è®°ä¸­éš¾å…å­˜åœ¨ç–æ¼æˆ–è¡¨è¿°ä¸å½“çš„åœ°æ–¹ï¼Œä¹Ÿéå¸¸æ¬¢è¿å¤§å®¶æå‡ºå®è´µæ„è§ï¼Œä¸€èµ·äº¤æµè¿›æ­¥ã€‚ â€”â€” Android_å°é›¨</p>
</blockquote>
<p>æ•´ä½“ç›®å½•ï¼š<a href="https://juejin.cn/spost/7573592952242602036" target="_blank" title="https://juejin.cn/spost/7573592952242602036">Kotlin è¿›é˜¶ä¸è¿·è·¯ï¼š41 ä¸ªæ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Œæ„å»ºå®Œæ•´çŸ¥è¯†ä½“ç³»</a></p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰çš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€ç§æƒ…å†µï¼šæˆ‘ä»¬èƒ½å¤Ÿæ¸…æ™°åœ°æè¿°ä¸€ç±»äº‹ç‰©çš„å…±åŒç‰¹å¾ï¼Œä½†å¯¹äºæŸäº›å…·ä½“çš„è¡Œä¸ºï¼Œå´æ— æ³•åœ¨çˆ¶ç±»ä¸­ç»™å‡ºç¡®åˆ‡çš„å®šä¹‰ã€‚</p>
<h3 data-id="heading-1">1.1 æŠ½è±¡ç±»çš„æ ¸å¿ƒä»·å€¼</h3>
<p>æŠ½è±¡ç±»ï¼ˆAbstract Classï¼‰çš„æ ¸å¿ƒä»·å€¼åœ¨äº<strong>å®šä¹‰å…±æ€§æ¨¡æ¿</strong>å¹¶<strong>çº¦æŸå­ç±»å®ç°</strong>ã€‚
å®ƒåƒæ˜¯ä¸€ä¸ªåŠæˆå“çš„è“å›¾ï¼Œè§„å®šäº†å»ºç­‘çš„åŸºæœ¬ç»“æ„ï¼ˆå…±æ€§ï¼‰ï¼Œä½†ç•™ä¸‹äº†æŸäº›å…·ä½“çš„è£…ä¿®é£æ ¼ï¼ˆä¸ªæ€§ï¼‰ç»™å­ç±»å»å®Œæˆã€‚</p>
<h3 data-id="heading-2">1.2 Kotlin æŠ½è±¡ç±»çš„è®¾è®¡åˆè¡·</h3>
<p>Kotlin è®¾è®¡æŠ½è±¡ç±»çš„åˆè¡·ï¼Œæ˜¯åœ¨<strong>ä»£ç å¤ç”¨</strong>ä¸<strong>å­ç±»è§„èŒƒ</strong>ä¹‹é—´å¯»æ‰¾å¹³è¡¡ã€‚</p>
<ul>
<li><strong>å¤ç”¨</strong>ï¼šå°†é€šç”¨çš„çŠ¶æ€å’Œé€»è¾‘æå–åˆ°çˆ¶ç±»ï¼Œé¿å…é‡å¤ä»£ç ã€‚</li>
<li><strong>è§„èŒƒ</strong>ï¼šé€šè¿‡æŠ½è±¡æ–¹æ³•å¼ºåˆ¶å­ç±»å¿…é¡»å®ç°ç‰¹å®šé€»è¾‘ï¼Œä¿è¯ä¸šåŠ¡æµç¨‹çš„å®Œæ•´æ€§ã€‚</li>
</ul>
<h3 data-id="heading-3">1.3 æœ¬æ–‡æ ¸å¿ƒå†…å®¹é¢„å‘Š</h3>
<p>æœ¬æ–‡å°†å¸¦æ‚¨æ·±å…¥ Kotlin æŠ½è±¡ç±»çš„ä¸–ç•Œï¼Œè·¯çº¿å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>åŸºç¡€å®šä¹‰</strong>ï¼šè¯­æ³•ä¸æ··åˆæˆå‘˜ç»“æ„ã€‚</li>
<li><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼šä¸å¯å®ä¾‹åŒ–ã€æ„é€ å‡½æ•°æ”¯æŒä¸å¼ºåˆ¶çº¦æŸã€‚</li>
<li><strong>ç»§æ‰¿å®æˆ˜</strong>ï¼š4 ç§å®ç°æŠ½è±¡æˆå‘˜çš„é«˜çº§æŠ€å·§ã€‚</li>
<li><strong>å®æˆ˜åœºæ™¯</strong>ï¼šBaseActivityã€ä¸šåŠ¡æ¨¡æ¿ä¸å…±æ€§é€»è¾‘å°è£…ã€‚</li>
</ul>
<h2 data-id="heading-4">äºŒã€æŠ½è±¡ç±»åŸºç¡€ï¼šå®šä¹‰ä¸è¯­æ³•è§„èŒƒ</h2>
<h3 data-id="heading-5">2.1 åŸºæœ¬è¯­æ³•</h3>
<p>åœ¨ Kotlin ä¸­ï¼Œä½¿ç”¨ <code>abstract</code> å…³é”®å­—æ¥ä¿®é¥°ä¸€ä¸ªç±»ï¼Œä½¿å…¶æˆä¸ºæŠ½è±¡ç±»ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseTemplate</span> {
    <span class="hljs-comment">// ...</span>
}

</code></pre>
<h3 data-id="heading-6">2.2 æŠ½è±¡æˆå‘˜</h3>
<p>ä½¿ç”¨ <code>abstract</code> ä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•ï¼Œç§°ä¸ºæŠ½è±¡æˆå‘˜ã€‚å®ƒä»¬<strong>æ²¡æœ‰å…·ä½“çš„å®ç°</strong>ï¼ˆæ²¡æœ‰æ–¹æ³•ä½“ï¼Œä¹Ÿæ²¡æœ‰å±æ€§åˆå§‹åŒ–å™¨ï¼‰ï¼Œä»…å®šä¹‰äº†â€œç­¾åâ€ã€‚</p>
<h3 data-id="heading-7">2.3 éæŠ½è±¡æˆå‘˜</h3>
<p>æŠ½è±¡ç±»ä¸­å¯ä»¥åŒ…å«æ™®é€šï¼ˆéæŠ½è±¡ï¼‰çš„æˆå‘˜ã€‚è¿™äº›æˆå‘˜å¯ä»¥æœ‰å…·ä½“çš„å®ç°ï¼Œä¾›å­ç±»ç›´æ¥å¤ç”¨ã€‚è¿™æ˜¯æŠ½è±¡ç±»åŒºåˆ«äºæ¥å£çš„é‡è¦ç‰¹å¾ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-8">2.4 åŸºç¡€ç¤ºä¾‹ï¼ˆå®šä¹‰æŠ½è±¡åŸºç±»ï¼‰</h3>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªåŒ…å«æ‰€æœ‰æˆå‘˜ç±»å‹çš„å®Œæ•´ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>(
    <span class="hljs-keyword">open</span> <span class="hljs-keyword">val</span> name: String <span class="hljs-comment">// æ„é€ å‡½æ•°ä¸­çš„å±æ€§</span>
) {
    <span class="hljs-comment">// 2.3 éæŠ½è±¡æˆå‘˜ï¼šæœ‰çŠ¶æ€ï¼Œæœ‰å®ç°</span>
    <span class="hljs-keyword">val</span> creationTime = System.currentTimeMillis()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sleep</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"<span class="hljs-variable">$name</span> æ­£åœ¨ç¡è§‰"</span>)
    }

    <span class="hljs-comment">// 2.2 æŠ½è±¡æˆå‘˜ï¼šæ— çŠ¶æ€ï¼Œæ— å®ç°ï¼Œå¼ºåˆ¶å­ç±»å®šä¹‰</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> species: String
    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">makeSound</span><span class="hljs-params">()</span></span>

    <span class="hljs-comment">// open æˆå‘˜ï¼šæœ‰å®ç°ï¼Œä½†å…è®¸å­ç±»é‡å†™</span>
    <span class="hljs-keyword">open</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">move</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"ç§»åŠ¨ä¸­..."</span>)
    }
}

</code></pre>
<h2 data-id="heading-9">ä¸‰ã€æŠ½è±¡ç±»çš„æ ¸å¿ƒç‰¹æ€§</h2>
<p>æ ¹æ® Kotlin å®˜æ–¹æ–‡æ¡£ï¼ŒæŠ½è±¡ç±»æœ‰ä»¥ä¸‹æ ¸å¿ƒæ³•åˆ™ï¼š</p>
<h3 data-id="heading-10">3.1 ä¸å¯ç›´æ¥å®ä¾‹åŒ–</h3>
<p>æŠ½è±¡ç±»æ˜¯â€œåŠæˆå“â€ï¼Œå› æ­¤ä½ <strong>ä¸èƒ½</strong>ç›´æ¥åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šCannot create an instance of an abstract class</span>
    <span class="hljs-comment">// val animal = Animal("Test")</span>
}

</code></pre>
<h3 data-id="heading-11">3.2 å­ç±»çš„å¼ºåˆ¶çº¦æŸ</h3>
<p>å¦‚æœä¸€ä¸ªéæŠ½è±¡ç±»ç»§æ‰¿äº†æŠ½è±¡ç±»ï¼Œå®ƒ<strong>å¿…é¡»å®ç°</strong>ï¼ˆOverrideï¼‰çˆ¶ç±»ä¸­æ‰€æœ‰çš„æŠ½è±¡æˆå‘˜ã€‚è¿™æ˜¯æŠ½è±¡ç±»çš„æ ¸å¿ƒå¥‘çº¦ç²¾ç¥ã€‚</p>
<h3 data-id="heading-12">3.3 æ”¯æŒæ„é€ å‡½æ•°</h3>
<p>ä¸æ¥å£ä¸åŒï¼ŒæŠ½è±¡ç±»å¯ä»¥æ‹¥æœ‰æ„é€ å‡½æ•°ï¼ˆä¸»æ„é€ å‡½æ•°æˆ–æ¬¡æ„é€ å‡½æ•°ï¼‰å’Œ <code>init</code> ä»£ç å—ï¼Œç”¨äºåˆå§‹åŒ–æŠ½è±¡ç±»ä¸­çš„çŠ¶æ€ï¼ˆStateï¼‰ã€‚</p>
<h3 data-id="heading-13">3.4 å…¼å®¹ç»§æ‰¿è§„åˆ™</h3>
<ul>
<li><strong>æŠ½è±¡æˆå‘˜</strong>ï¼šéšå« <code>open</code>ï¼Œå¿…é¡»è¢«é‡å†™ã€‚</li>
<li><strong>éæŠ½è±¡æˆå‘˜</strong>ï¼šé»˜è®¤ä¸º <code>final</code>ï¼ˆä¸å¯é‡å†™ï¼‰ã€‚å¦‚æœå¸Œæœ›å­ç±»èƒ½é‡å†™éæŠ½è±¡æˆå‘˜ï¼Œå¿…é¡»æ˜¾å¼åŠ ä¸Š <code>open</code> å…³é”®å­—ã€‚</li>
</ul>
<h2 data-id="heading-14">å››ã€æŠ½è±¡ç±»çš„ç»§æ‰¿ä¸å®ç°æ­¥éª¤</h2>
<h3 data-id="heading-15">4.1 å­ç±»ç»§æ‰¿æŠ½è±¡ç±»</h3>
<p>ä½¿ç”¨å†’å· <code>:</code> è¿›è¡Œç»§æ‰¿ï¼Œå¹¶å¿…é¡»è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚</p>
<h3 data-id="heading-16">4.2 å®ç°æŠ½è±¡å±æ€§ / æ–¹æ³•</h3>
<p>è¿™æ˜¯è¿›é˜¶çš„å…³é”®ç‚¹ã€‚åœ¨ Kotlin ä¸­ï¼Œå®ç°æŠ½è±¡æˆå‘˜æœ‰ <strong>4 ç§å®˜æ–¹è®¤å¯çš„åˆæ³•æ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> size: <span class="hljs-built_in">Int</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Concrete</span> : <span class="hljs-type">Base</span>() {
    <span class="hljs-comment">// æ–¹å¼ 1ï¼šç›´æ¥èµ‹å€¼ï¼ˆæœ€å¸¸è§ï¼Œç”Ÿæˆ backing field å ç”¨å†…å­˜ï¼‰</span>
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> size: <span class="hljs-built_in">Int</span> = <span class="hljs-number">100</span>

    <span class="hljs-comment">// æ–¹å¼ 2ï¼šè‡ªå®šä¹‰ Getterï¼ˆæ¨èç”¨äºè®¡ç®—å±æ€§ï¼Œä¸å å†…å­˜ï¼‰</span>
    <span class="hljs-comment">// override val size: Int get() = 100</span>

    <span class="hljs-comment">// æ–¹å¼ 3ï¼šé€»è¾‘è®¡ç®—</span>
    <span class="hljs-comment">// override val size: Int get() = if (System.currentTimeMillis() &gt; 0) 100 else 0</span>

    <span class="hljs-comment">// æ–¹å¼ 4ï¼švar + setterï¼ˆå°‘è§ä½†åˆæ³•ï¼‰</span>
    <span class="hljs-comment">// override var size: Int = 100</span>
}

</code></pre>
<h3 data-id="heading-17">4.3 é‡å†™éæŠ½è±¡æˆå‘˜</h3>
<p>å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»ä¸­æ ‡è®°ä¸º <code>open</code> çš„éæŠ½è±¡æˆå‘˜ï¼Œå¹¶é€šè¿‡ <code>super</code> å…³é”®å­—è°ƒç”¨çˆ¶ç±»é€»è¾‘ã€‚</p>
<h3 data-id="heading-18">4.4 å®Œæ•´å®æˆ˜ç¤ºä¾‹</h3>
<p>æˆ‘ä»¬å°† <code>Shape</code> æŠ½è±¡ç±»è½åœ°ä¸ºå…·ä½“çš„ <code>Circle</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æŠ½è±¡çˆ¶ç±»</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span>(<span class="hljs-keyword">val</span> color: String) {
    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculateArea</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Double</span>

    <span class="hljs-keyword">open</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printInfo</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"I am a <span class="hljs-variable">$color</span> shape."</span>)
    }
}

<span class="hljs-comment">// å­ç±»å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span>(color: String, <span class="hljs-keyword">val</span> radius: <span class="hljs-built_in">Double</span>) : Shape(color) {
    <span class="hljs-comment">// å¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculateArea</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Double</span> = Math.PI * radius * radius

    <span class="hljs-comment">// é€‰æ‹©æ€§é‡å†™ open æ–¹æ³•</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printInfo</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.printInfo() <span class="hljs-comment">// å¤ç”¨çˆ¶ç±»é€»è¾‘</span>
        println(<span class="hljs-string">"Type: Circle, Radius: <span class="hljs-variable">$radius</span>"</span>)
    }
}

</code></pre>
<h2 data-id="heading-19">äº”ã€æŠ½è±¡ç±»çš„å…¸å‹åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-20">5.1 æ¡†æ¶åŸºç¡€æ¨¡æ¿ (Android BaseActivity)</h3>
<p>åˆ©ç”¨æŠ½è±¡ç±»ç»Ÿä¸€ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œåˆå§‹åŒ–æµç¨‹ï¼Œè¿™æ˜¯ Android å¼€å‘ä¸­æœ€ç»å…¸çš„åº”ç”¨ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(getLayoutId()) <span class="hljs-comment">// æ¨¡æ¿é€»è¾‘ï¼šè®¾ç½®å¸ƒå±€</span>
        initViews()                   <span class="hljs-comment">// æ¨¡æ¿é€»è¾‘ï¼šåˆå§‹åŒ–è§†å›¾</span>
        initData()                    <span class="hljs-comment">// æ¨¡æ¿é€»è¾‘ï¼šåŠ è½½æ•°æ®</span>
    }

    <span class="hljs-comment">// å¼ºåˆ¶å­ç±»æä¾›å¸ƒå±€ ID</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getLayoutId</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span>

    <span class="hljs-comment">// å¼ºåˆ¶å­ç±»å®ç°åˆå§‹åŒ–é€»è¾‘</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initViews</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initData</span><span class="hljs-params">()</span></span>
}

</code></pre>
<h3 data-id="heading-21">5.2 ä¸šåŠ¡è§„èŒƒå®šä¹‰ (æ”¯ä»˜ç­–ç•¥)</h3>
<p>å¼ºåˆ¶å­ç±»å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œç¡®ä¿ä¸šåŠ¡å®Œæ•´æ€§ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentProcessor</span> {
    <span class="hljs-comment">// æ ¸å¿ƒæ”¯ä»˜é€»è¾‘ï¼Œå¼ºåˆ¶å­ç±»å®ç°ï¼ˆæ”¯ä»˜å®ã€å¾®ä¿¡ã€é“¶è¡Œå¡é€»è¾‘ä¸åŒï¼‰</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">pay</span><span class="hljs-params">(amount: <span class="hljs-type">Double</span>)</span></span>

    <span class="hljs-comment">// å…¬å…±é€»è¾‘ï¼šæ”¯ä»˜å‰æ£€æŸ¥ï¼ˆå¯å¤ç”¨ï¼Œä¹Ÿå¯é‡å†™ï¼‰</span>
    <span class="hljs-keyword">open</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkRisk</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
        println(<span class="hljs-string">"æ‰§è¡Œé€šç”¨é£æ§æ£€æŸ¥..."</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
}

</code></pre>
<h3 data-id="heading-22">5.3 å…±æ€§é€»è¾‘å°è£… (Template Method æ¨¡å¼)</h3>
<p>åœ¨ ViewModel æˆ– Presenter å±‚ï¼Œå°è£…æ•°æ®åŠ è½½çš„â€œéª¨æ¶â€ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseViewModel</span> {
    <span class="hljs-comment">// æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰åŠ è½½æ•°æ®çš„æ ‡å‡†æµç¨‹</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadData</span><span class="hljs-params">()</span></span> {
        showLoading()
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = fetchData() <span class="hljs-comment">// å…·ä½“è·å–æ•°æ®çš„é€»è¾‘ç”±å­ç±»å†³å®š</span>
            showSuccess(<span class="hljs-keyword">data</span>)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            showError(e)
        }
    }

    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchData</span><span class="hljs-params">()</span></span>: Any
    <span class="hljs-comment">// ... çœç•¥ showLoading ç­‰é€šç”¨å®ç°</span>
}

</code></pre>
<h2 data-id="heading-23">å…­ã€æŠ½è±¡ç±»çš„ä½¿ç”¨è¾¹ç•Œä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-24">6.1 ä¸æ™®é€šç±»çš„æ ¸å¿ƒåŒºåˆ«</h3>

























<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>æ™®é€šç±» (Class)</strong></th><th><strong>æŠ½è±¡ç±» (Abstract Class)</strong></th></tr></thead><tbody><tr><td><strong>å®ä¾‹åŒ–</strong></td><td>å¯ä»¥ç›´æ¥åˆ›å»ºå¯¹è±¡</td><td><strong>ä¸å¯</strong>å®ä¾‹åŒ–</td></tr><tr><td><strong>æˆå‘˜ä¿®é¥°</strong></td><td>é»˜è®¤ä¸º final</td><td>é»˜è®¤ä¸º open (æŠ½è±¡æˆå‘˜)ï¼Œæ”¯æŒ abstract ä¿®é¥°</td></tr><tr><td><strong>ç”¨é€”</strong></td><td>å…·ä½“ä¸šåŠ¡å®ç°</td><td>ç»§æ‰¿ä½“ç³»çš„åŸºçŸ³/æ¨¡æ¿</td></tr></tbody></table>
<h3 data-id="heading-25">6.2 ä¸æ¥å£çš„åˆæ­¥åŒºåˆ†</h3>
<p>è¿™æ˜¯æ¶æ„é€‰å‹æ—¶çš„å…³é”®å†³ç­–ç‚¹ï¼š</p>






























<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>æŠ½è±¡ç±»</strong></th><th><strong>æ¥å£ (Interface)</strong></th></tr></thead><tbody><tr><td><strong>çŠ¶æ€ (State)</strong></td><td><strong>æ”¯æŒ</strong>ï¼ˆæœ‰ backing fieldï¼‰</td><td>ä¸æ”¯æŒï¼ˆæ— çŠ¶æ€ï¼‰</td></tr><tr><td><strong>æ„é€ å‡½æ•°</strong></td><td><strong>æ”¯æŒ</strong></td><td>ä¸æ”¯æŒ</td></tr><tr><td><strong>å¤šç»§æ‰¿</strong></td><td>ä¸æ”¯æŒï¼ˆå•ç»§æ‰¿ï¼‰</td><td><strong>æ”¯æŒ</strong></td></tr><tr><td><strong>è®¾è®¡æ„å›¾</strong></td><td><strong>Is-A</strong> (å®ƒæ˜¯...)ã€æ¨¡æ¿å¤ç”¨</td><td><strong>Can-Do</strong> (å®ƒèƒ½...)ã€è¡Œä¸ºå¥‘çº¦</td></tr></tbody></table>
<h3 data-id="heading-26">6.3 é¿å‘ç‚¹ (å¸¸è§ç¼–è¯‘é”™è¯¯)</h3>





















<table><thead><tr><th><strong>é”™è¯¯ä¿¡æ¯</strong></th><th><strong>åŸå› ä¸è§£æ³•</strong></th></tr></thead><tbody><tr><td><code>Abstract member not implemented</code></td><td>å­ç±»å¿˜è®°å®ç°æŠ½è±¡æ–¹æ³•ã€‚è§£æ³•ï¼šæ·»åŠ  override å®ç°ã€‚</td></tr><tr><td><code>Property must be initialized or be abstract</code></td><td>å±æ€§æ²¡èµ‹å€¼ä¹Ÿæ²¡åŠ  abstractã€‚è§£æ³•ï¼šåˆå§‹åŒ–æˆ–å£°æ˜ä¸º abstractã€‚</td></tr><tr><td><code>This type is final</code></td><td>è¯•å›¾ç»§æ‰¿æ™®é€šç±»ã€‚è§£æ³•ï¼šçˆ¶ç±»åŠ  open æˆ– abstractã€‚</td></tr></tbody></table>
<h2 data-id="heading-27">ä¸ƒã€æ€»ç»“ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-28">7.1 æ ¸å¿ƒçŸ¥è¯†ç‚¹å›é¡¾</h3>
<ul>
<li><strong>å…³é”®å­—</strong>ï¼š<code>abstract</code>ã€‚</li>
<li><strong>ä¸‰å¤§ç‰¹å¾</strong>ï¼šä¸å¯å®ä¾‹åŒ–ã€åŒ…å«æŠ½è±¡æˆå‘˜ã€å¼ºåˆ¶å­ç±»å®ç°ã€‚</li>
<li><strong>ç»§æ‰¿è§„åˆ™</strong>ï¼šå•ç»§æ‰¿ï¼ŒæŠ½è±¡æˆå‘˜å¿…é¡» overrideï¼ŒéæŠ½è±¡æˆå‘˜éœ€ open æ‰å¯ overrideã€‚</li>
</ul>
<h3 data-id="heading-29">7.2 é€‚ç”¨åœºæ™¯</h3>
<p>å½“å¤šä¸ªç±»ä¹‹é—´å­˜åœ¨æ˜æ˜¾çš„<strong>å®¶æ—ç›¸ä¼¼æ€§</strong>ï¼ˆIs-A å…³ç³»ï¼‰ï¼Œä¸”ä½ éœ€è¦<strong>å¤ç”¨ä»£ç </strong>ï¼ˆçŠ¶æ€/å…·ä½“æ–¹æ³•ï¼‰åŒæ—¶åˆéœ€è¦<strong>å¼ºåˆ¶çº¦æŸ</strong>æŸäº›è¡Œä¸ºæ—¶ï¼ŒæŠ½è±¡ç±»æ˜¯æœ€ä½³é€‰æ‹©ã€‚</p>
<h3 data-id="heading-30">7.3 å®è·µå»ºè®®</h3>
<ul>
<li><strong>å¤šç»„åˆï¼Œå°‘ç»§æ‰¿</strong>ï¼šæŠ½è±¡ç±»è™½å¥½ï¼Œä½†ç»§æ‰¿è€¦åˆåº¦é«˜ã€‚ä»…åœ¨ç¡®å®éœ€è¦æ¨¡æ¿å¤ç”¨æ—¶ä½¿ç”¨ã€‚</li>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šé€šå¸¸ä»¥ <code>Base</code> å¼€å¤´ï¼ˆå¦‚ <code>BaseActivity</code>ï¼‰æˆ–ç›´æ¥ä½¿ç”¨åè¯ï¼ˆå¦‚ <code>Shape</code>ï¼‰ï¼Œæ¸…æ™°è¡¨è¾¾å…¶ä½œä¸ºåŸºç±»çš„èº«ä»½ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½œç”¨åŸŸé“¾ Ã— é—­åŒ…ï¼šä¸‰æ®µä»£ç ï¼Œçœ‹æ‡‚ JavaScript çš„å¥—å¨ƒäººç”Ÿ]]></title>    <link>https://juejin.cn/post/7577364921657049130</link>    <guid>https://juejin.cn/post/7577364921657049130</guid>    <pubDate>2025-11-28T05:53:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577364921657049130" data-draft-id="7577256255084576777" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ä½œç”¨åŸŸé“¾ Ã— é—­åŒ…ï¼šä¸‰æ®µä»£ç ï¼Œçœ‹æ‡‚ JavaScript çš„å¥—å¨ƒäººç”Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-28T05:53:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çƒŸè¢…"/> <meta itemprop="url" content="https://juejin.cn/user/1845419006243504"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ä½œç”¨åŸŸé“¾ Ã— é—­åŒ…ï¼šä¸‰æ®µä»£ç ï¼Œçœ‹æ‡‚ JavaScript çš„å¥—å¨ƒäººç”Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1845419006243504/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çƒŸè¢…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T05:53:00.000Z" title="Fri Nov 28 2025 05:53:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸€å¥è¯ç»“è®ºï¼š<br/>
JS çš„å˜é‡æŸ¥æ‰¾æ°¸è¿œæ²¿ã€Œä½œç”¨åŸŸé“¾ã€å¾€ä¸Šçˆ¬ï¼›<br/>
é—­åŒ…åˆ™æŠŠâ€œæœ¬è¯¥é”€æ¯â€çš„ä½œç”¨åŸŸå·å·å¡è¿›å‡½æ•°å£è¢‹ï¼Œè®©å®ƒé•¿ç”Ÿä¸æ­»ã€‚</p>
</blockquote>
<p>ä¸‹é¢ç”¨ä¸‰æ®µé€’è¿›å¼ä»£ç ï¼Œä»â€œæœ€ç®€ demoâ€åˆ°â€œé—­åŒ… full featureâ€ï¼Œé€è¡Œå‰–ç»™ä½ çœ‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ç¬¬ä¸€æ®µï¼šæœ€ç®€ä½œç”¨åŸŸé“¾â€”â€”ã€Œé™æ€è¯æ³•ã€ç¢¾å‹ã€ŒåŠ¨æ€è°ƒç”¨ã€</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> myName = <span class="hljs-string">'æå®¢ä¸–ç•Œ'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myName);   <span class="hljs-comment">// â‘  æ‰“å°ä»€ä¹ˆï¼Ÿ</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">var</span> myName = <span class="hljs-string">'æå®¢é‚¦'</span>;
  <span class="hljs-title function_">bar</span>();                 <span class="hljs-comment">// â‘¡ åœ¨ foo é‡Œè°ƒç”¨ bar</span>
}

<span class="hljs-title function_">foo</span>();
</code></pre>
<h3 data-id="heading-1">è¿è¡Œç»“æœ</h3>
<pre><code class="hljs">æå®¢ä¸–ç•Œ
</code></pre>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆä¸æ˜¯â€œæå®¢å¸®â€ï¼Ÿ</h3>
<p>åœ¨æˆ‘ä»¬çš„è„‘æµ·é‡Œçœ‹åˆ°è¿™å¹…ä»£ç åº”è¯¥å¾ˆå¿«å°±èƒ½æƒ³åˆ°ä¸‹é¢è¿™å¹…å›¾</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21eae10da8bd41309e2ea3879c5a2605~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Of6KKF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913980&amp;x-signature=EI8pBbBNmuJq7REA34BOxyEgWzk%3D" alt="lQLPKdec6QcoeWPNAqPNBHawbkdsmOcRCAIJAuLT_ldOAA_1142_675.png" loading="lazy"/>
å¯¹å•Šå¦‚æœæ˜¯è¿™å¹…å›¾æŒ‰è°ƒç”¨æ ˆçš„é¡ºåºæ²¡æ‰¾åˆ°åº”è¯¥å¾€ä¸‹æ‰¾å•Šï¼Œä½†æ˜¯è¿™å…¶å®æ˜¯ä¸€ä¸ªå‘ã€‚
å…ˆæ¥è®²è®²ä½œç”¨åŸŸé“¾å§ã€‚
ä½œç”¨åŸŸé“¾ä¹Ÿå«è¯æ³•ä½œç”¨åŸŸé“¾ï¼Œé™æ€çš„ï¼Œåªå’Œå‡½æ•°å£°æ˜çš„ä½ç½®æœ‰å…³ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°±å†³å®šå¥½äº†ï¼Œå’Œè°ƒç”¨æ²¡æœ‰å…³ç³»ã€‚
çœŸæ­£çš„æŸ¥æ‰¾åº”è¯¥æ˜¯æŒ‰ä½œç”¨åŸŸé“¾çš„è§„åˆ™æŸ¥æ‰¾ï¼Œä¹Ÿå°±æ˜¯æŒ‰ä¸‹é¢è¿™å¹…å›¾çš„è§„åˆ™
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/765c52f401b7464ea4dd982de8a8f419~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Of6KKF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913980&amp;x-signature=ZxshehBhLOQxlIXAl5XgscJRcCo%3D" alt="lQLPKH_1fPDDKSPNAx3NBHawwG1CecfwPpQJAuhBZSjnAA_1142_797.png" loading="lazy"/></p>
<ul>
<li>ä½œç”¨åŸŸé“¾åœ¨<strong>å®šä¹‰æ—¶</strong>ï¼ˆè¯æ³•é˜¶æ®µï¼‰å°±å†™å¥½ï¼Œè·Ÿåœ¨å“ªè°ƒç”¨æ²¡åŠæ¯›é’±å…³ç³»ï¼›</li>
<li><code>bar</code> çš„å¤–éƒ¨è¯æ³•ç¯å¢ƒæ˜¯ <strong>å…¨å±€</strong>ï¼›</li>
<li>å˜é‡æŸ¥æ‰¾è·¯å¾„ï¼š<code>bar â†’ å…¨å±€</code>ï¼›æ°¸è¿œæ‰¾ä¸åˆ° <code>foo</code> çš„ <code>myName</code>ã€‚</li>
</ul>
<blockquote>
<p>è®°ä½å£è¯€ï¼š<strong>â€œè°ƒç”¨ä½ç½®åªå½±å“æ ˆï¼Œå˜é‡æŸ¥æ‰¾åªçœ‹å‡ºç”Ÿè¯æ˜ã€‚â€</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ç¬¬äºŒæ®µï¼šå¥—å¨ƒåŠ æ·±â€”â€”â€œåŒåå˜é‡â€åœ¨ä½œç”¨åŸŸé“¾ä¸Šæ‰“ä¼å‡»</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> myAge = <span class="hljs-number">10</span>;
<span class="hljs-keyword">let</span> test = <span class="hljs-number">1</span>;               <span class="hljs-comment">// å…¨å±€ test</span>
<span class="hljs-keyword">var</span> myName = <span class="hljs-string">'æå®¢æ—¶é—´'</span>;     <span class="hljs-comment">// å…¨å±€ myName</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">var</span> myName = <span class="hljs-string">'æå®¢ä¸–ç•Œ'</span>;   <span class="hljs-comment">// â‘¡ bar å‡½æ•°ç¯å¢ƒ</span>
  <span class="hljs-keyword">let</span> test1 = <span class="hljs-number">100</span>;
  <span class="hljs-keyword">if</span> (<span class="hljs-number">1</span>) {
    <span class="hljs-keyword">let</span> myName = <span class="hljs-string">'Chrome æµè§ˆå™¨'</span>; <span class="hljs-comment">// â‘¢ å—çº§ç¯å¢ƒ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(test);     <span class="hljs-comment">// æ‰“å°å“ªä¸ª test ï¼Ÿ</span>
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">var</span> myName = <span class="hljs-string">'æå®¢é‚¦'</span>;    <span class="hljs-comment">// â‘  foo å‡½æ•°ç¯å¢ƒ</span>
  <span class="hljs-keyword">let</span> test = <span class="hljs-number">2</span>;             <span class="hljs-comment">// é®è”½å…¨å±€ test</span>
  {
    <span class="hljs-keyword">let</span> test = <span class="hljs-number">3</span>;           <span class="hljs-comment">// å—çº§ testï¼Œå®Œå…¨äº’ä¸å½±å“</span>
    <span class="hljs-title function_">bar</span>();                  <span class="hljs-comment">// åœ¨å—é‡Œè°ƒç”¨ bar</span>
  }
}

<span class="hljs-title function_">foo</span>();
</code></pre>
<h3 data-id="heading-4">è¿è¡Œç»“æœ</h3>
<pre><code class="hljs">1
</code></pre>
<h3 data-id="heading-5">ä½œç”¨åŸŸé“¾å›¾è§£</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fbc695f25e64fd994215f92394099b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Of6KKF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913980&amp;x-signature=GSwtZ27DNTpYATz359DgftI32Fo%3D" alt="lQLPKHIJLY1ZLgPNAnrNBHawi45ov3eSr18JAvLiVN8GAA_1142_634.png" loading="lazy"/></p>
<ul>
<li>å—çº§ <code>test=3</code> ä¸ <code>test=2</code> éƒ½ä½åœ¨æ›´å¤–å±‚ï¼Œ<strong>å¯¹ bar ä¸å¯è§</strong>ï¼›</li>
<li>å†æ¬¡éªŒè¯ï¼š<strong>è¯æ³•ä½œç”¨åŸŸåªçœ‹å‡ºèº«ï¼Œä¸çœ‹è°ƒç”¨æ ˆã€‚</strong></li>
</ul>
<hr/>
<h2 data-id="heading-6">ç¬¬ä¸‰æ®µï¼šé—­åŒ…ç™»åœºâ€”â€”æŠŠå¤–å±‚ç¯å¢ƒâ€œå·æ¸¡â€å‡ºæ ˆ</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">var</span> myName = <span class="hljs-string">'æå®¢æ—¶é—´'</span>;
  <span class="hljs-keyword">let</span> test1 = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">let</span> test2 = <span class="hljs-number">2</span>;

  <span class="hljs-comment">// 1. å¯¹è±¡é‡Œä¸¤ä¸ªå‡½æ•°éƒ½ã€Œå¼•ç”¨ã€å¤–éƒ¨å˜é‡</span>
  <span class="hljs-keyword">var</span> innerBar = {
    <span class="hljs-attr">getName</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(test1); <span class="hljs-comment">// å¼•ç”¨ test1</span>
      <span class="hljs-keyword">return</span> myName;      <span class="hljs-comment">// å¼•ç”¨ myName</span>
    },
    <span class="hljs-attr">setName</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">newName</span>) {
      myName = newName;   <span class="hljs-comment">// ä¿®æ”¹å¤–éƒ¨ myName</span>
    }
  };
  <span class="hljs-keyword">return</span> innerBar;        <span class="hljs-comment">// 2. æŠŠå†…éƒ¨å¯¹è±¡æŠ›åˆ°å¤–éƒ¨</span>
}

<span class="hljs-keyword">var</span> bar = <span class="hljs-title function_">foo</span>();          <span class="hljs-comment">// foo æ‰§è¡Œä¸Šä¸‹æ–‡å‡ºæ ˆ</span>
                          <span class="hljs-comment">// ä½† myName/test1/test2 å› ä¸ºè¢«å¼•ç”¨**ä¸ä¼š**è¢« GC</span>

bar.<span class="hljs-title function_">setName</span>(<span class="hljs-string">'æå®¢é‚¦'</span>);    <span class="hljs-comment">// ä¿®æ”¹çš„æ˜¯åŸæ¥ foo ç¯å¢ƒä¸‹çš„ myName</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar.<span class="hljs-title function_">getName</span>()); <span class="hljs-comment">// 1. å…ˆæ‰“å° test1 â†’ 1</span>
                            <span class="hljs-comment">// 2. å†æ‰“å°è¿”å›å€¼ â†’ æå®¢é‚¦</span>
</code></pre>
<h3 data-id="heading-7">é—­åŒ…å½¢æˆæ¡ä»¶ï¼ˆèƒŒï¼‰</h3>
<ol>
<li>å‡½æ•°åµŒå¥—å‡½æ•°ï¼›</li>
<li>å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å˜é‡ï¼›</li>
<li>å†…éƒ¨å‡½æ•°è¢«è¿”å›åˆ°å¤–éƒ¨å¹¶å­˜æ´»ã€‚</li>
</ol>
<h3 data-id="heading-8">V8 åº•å±‚æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</h3>
<p>æŒ‰ç†è¯´åœ¨var bar=foo() ï¼›è¿™ä¸€æ­¥çš„ç»“æŸçš„æ—¶å€™è¦æ‰§è¡Œå‡ºæ ˆæ“ä½œ bar é‡Œé¢çš„å˜é‡è¦å›æ”¶å§ï¼Ÿ
ä½†æ˜¯å®é™…æƒ…å†µå¹¶æ²¡æœ‰è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå…¶å®æ˜¯å› ä¸º<strong>foo å‡½æ•°æ‰§è¡Œå®Œåï¼Œå…¶æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆé¡¶å¼¹å‡ºäº†ï¼Œä½†æ˜¯ç”±äºè¿”å›çš„setName,getName ä½¿ç”¨äº†foo å‡½æ•°å†…éƒ¨çš„å˜é‡myNameå’Œtsst1,è¿™ä¸¤ä¸ªå˜é‡ä¾ç„¶åœ¨å†…å­˜ä¸­ï¼Œæœ‰ç‚¹åƒgetName,setName æ–¹æ³•èƒŒçš„ä¸€ä¸ªä¸“å±èƒŒåŒ…ã€‚</strong>
è¿™ä¸ªèƒŒåŒ…æˆ‘ä»¬å°±å«åšé—­åŒ…ï¼Œè¿™ä¸ªé—­åŒ…é‡Œé¢çš„å˜é‡å«è‡ªç”±å˜é‡
çœ‹å›¾ç†è§£å§</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd68f90a94264d50be391319dc46b96e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Of6KKF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913980&amp;x-signature=3ghx%2BMvvZ4Z49ekvr0a1m35%2FiDA%3D" alt="lQLPJxL0AJudZkPNAl_NBHawlYutKE04moUJAvzH9W4rAA_1142_607.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0edaced462240699900c139b1e360a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Of6KKF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764913980&amp;x-signature=ONUHyBYatSyJq0CwUnDcYkK40Ug%3D" alt="lQLPJwCC0KWlAbPNA03NBHawINj2y-qMdT0JAv8hJbJKAA_1142_845.png" loading="lazy"/>
å› ä¸ºä½ åœ¨ <code>foo()</code> å†…éƒ¨å®šä¹‰äº† <code>getName</code> å’Œ <code>setName</code> è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å®ƒä»¬<strong>å¼•ç”¨äº† <code>foo</code> å†…éƒ¨çš„å˜é‡</strong>ï¼ˆæ¯”å¦‚ <code>myName</code>ã€<code>test1</code>ï¼‰ï¼Œé‚£ä¹ˆï¼š</p>
<ul>
<li>è¿™ä¸¤ä¸ªå‡½æ•°å°±<strong>å½¢æˆäº†é—­åŒ…</strong>ã€‚</li>
<li>å®ƒä»¬ä¼šâ€œè®°ä½â€è‡ªå·±è¢«åˆ›å»ºæ—¶æ‰€å¤„çš„<strong>è¯æ³•ç¯å¢ƒ</strong>ï¼ˆä¹Ÿå°±æ˜¯Â <code>foo</code>Â çš„ä½œç”¨åŸŸï¼‰ã€‚</li>
<li>å³ä½¿Â <code>foo()</code>Â æ‰§è¡Œå®Œæ¯•ã€è°ƒç”¨æ ˆå¼¹å‡ºï¼Œåªè¦è¿™ä¸¤ä¸ªå‡½æ•°è¿˜è¢«å¤–éƒ¨ï¼ˆæ¯”å¦‚Â <code>bar</code>ï¼‰å¼•ç”¨ç€ï¼ŒJavaScript å¼•æ“å°±ä¸ä¼šé”€æ¯Â <code>foo</code>Â ä¸­è¢«å¼•ç”¨çš„é‚£äº›å˜é‡ã€‚</li>
</ul>
<blockquote>
<p>ä½ å¯ä»¥å½¢è±¡åœ°ç†è§£ä¸ºï¼š<br/>
<strong>æ¯ä¸ªå‡½æ•°éƒ½èƒŒç€ä¸€ä¸ªå°èƒŒåŒ…ï¼ˆé—­åŒ…ï¼‰ï¼Œé‡Œé¢è£…ç€å®ƒåˆ›å»ºæ—¶èƒ½è®¿é—®åˆ°çš„å¤–éƒ¨å˜é‡ã€‚</strong></p>
</blockquote>
<ul>
<li>äºæ˜¯ <code>test1</code> è¿˜èƒ½è¯»åˆ° 1ï¼Œ<code>myName</code> è¿˜èƒ½è¢«æ”¹ã€‚</li>
</ul>
<blockquote>
<p>å£è¯€ï¼š<strong>â€œæ ˆå¸§å¯æ­»ï¼Œé—­åŒ…é•¿å­˜ã€‚â€</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-9">æ—¥å¸¸å¼€å‘ 3 å¥å¿ å‘Š</h2>
<ol>
<li>å°‘ç”¨é—­åŒ…éšä¾¿æ‹‰æ•°æ®â€”â€”å†…å­˜æ³„æ¼å°±æ˜¯è¿™ä¹ˆæ¥çš„ï¼›</li>
<li>å¾ªç¯é‡Œè¿”å›å‡½æ•°å…ˆ <code>let</code> å†åŒ…ï¼Œåˆ«ç”¨ <code>var</code>ï¼›</li>
<li>è°ƒè¯•æ‰“å¼€ DevTools â†’ Scope é¢æ¿ï¼Œ<strong>Local/Closure/Global</strong> ä¸€çœ¼çœ‹æ¸…å˜é‡åˆ°åº•ä»å“ªæ¥ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-10">30 ç§’èƒŒå®Œæ”¶å·¥</h2>
<blockquote>
<p>å˜é‡æŸ¥æ‰¾çœ‹å‡ºç”Ÿï¼Œè°ƒç”¨ä½ç½®æ˜¯æµ®äº‘ï¼›<br/>
å†…éƒ¨å‡½æ•°æ‹å¤–éƒ¨ï¼Œé—­åŒ…ç¯å¢ƒæ°¸é•¿å­˜ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Bç«™ç¤¾ç¾¤AIæ™ºèƒ½åˆ†æç³»ç»Ÿçš„å®è·µ]]></title>    <link>https://juejin.cn/post/7577307100130377778</link>    <guid>https://juejin.cn/post/7577307100130377778</guid>    <pubDate>2025-11-28T04:05:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577307100130377778" data-draft-id="7577050643203670066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Bç«™ç¤¾ç¾¤AIæ™ºèƒ½åˆ†æç³»ç»Ÿçš„å®è·µ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-28T04:05:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“”å“©å“”å“©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/3030701626893405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Bç«™ç¤¾ç¾¤AIæ™ºèƒ½åˆ†æç³»ç»Ÿçš„å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3030701626893405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“”å“©å“”å“©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T04:05:16.000Z" title="Fri Nov 28 2025 04:05:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸€ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€å¥—èƒ½â€œè¯»æ‡‚ç¾¤èŠâ€çš„ AIï¼Ÿ</strong></h2>
<p>åœ¨ B ç«™ï¼Œæˆ‘ä»¬è¿è¥å›¢é˜Ÿéœ€è¦ç®¡ç†ç€æ•°é‡åºå¤§çš„UPä¸»äº¤æµç¾¤ï¼Œå¦‚ï¼šå“ç±»æ‰¶æŒã€æˆé•¿è®­ç»ƒè¥ã€ä¸“é¡¹äº¤æµã€ç­”ç–‘æ²Ÿé€šç¾¤ç­‰ã€‚è¦†ç›–è®¸è®¸å¤šå¤šçš„åˆ›ä½œè€…ï¼Œæ¯å¤©ä¼šäº§ç”Ÿå¤§é‡çš„æ¶ˆæ¯ã€‚å¦‚æœå®Œå…¨ä¾èµ–äººå·¥é€æ¡ç»Ÿè®¡ï¼Œä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè€Œä¸”å®¹æ˜“é—æ¼å…³é”®é—®é¢˜ã€‚æ—©æœŸè¿è¥å°è¯•è¿‡ç®€å•çš„å…³é”®å­—åˆ†æå’Œäººå·¥æ±‡æ€»çš„æ–¹å¼ï¼Œä½†è¿™ç§ä¼ ç»Ÿæ–¹æ¡ˆå­˜åœ¨æ˜æ˜¾å±€é™ï¼šåªèƒ½æ•æ‰é¢„å…ˆè®¾å®šçš„è¯æ±‡ï¼Œæ— æ³•ç†è§£ä¸Šä¸‹æ–‡å’Œéšå«å«ä¹‰ï¼Œå¯¹æ–°å‡ºç°çš„è¯é¢˜æ— æ³•åŠæ—¶æ•è·ã€‚åŒæ—¶äººå·¥æ•´ç†å‡ºçš„åé¦ˆå¤šä¸ºè‡ªç”±æ–‡æœ¬ï¼Œç¼ºä¹ç»“æ„åŒ–ä¿¡æ¯ï¼Œéš¾ä»¥åŠæ—¶æ·±å…¥åˆ†æã€‚</p>
<p><strong>äºæ˜¯æˆ‘ä»¬åšäº†ä¸€ä»¶äº‹ï¼š</strong></p>
<ul>
<li>
<p>è®© AI è‡ªåŠ¨é˜…è¯»ç¤¾ç¾¤ä¼šè¯å†…å®¹</p>
</li>
<li>
<p>ç†è§£åˆ›ä½œè€…çš„çœŸå®å£°éŸ³</p>
</li>
<li>
<p>å¹¶ç”Ÿæˆç»“æ„åŒ–æ´å¯Ÿã€é¢„è­¦ã€æ—¥æŠ¥ã€å‘¨æŠ¥ã€‚</p>
</li>
</ul>
<h2 data-id="heading-1"><strong>äºŒã€æ•´ä½“æ¶æ„ï¼šä¸€å¥—ç”± LLM é©±åŠ¨çš„ç¤¾ç¾¤ â€œAI ä¸­å°â€</strong></h2>
<p>æ•´ä¸ªç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥åˆ†ä¸º å››å±‚ï¼š</p>
<p><strong>æ•°æ®é‡‡é›†å±‚ â†’ AI ç»“æ„åŒ–å±‚ â†’ ç¾¤ä½“åˆ†æå±‚ â†’ è¿è¥æ´å¯Ÿå±‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cb3a37f57ab44a8b946a6897ec0f95a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907516&amp;x-signature=MtlWc3%2FxHC9ePxvlIbulQ2p%2BbhI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å¤§é‡çœŸå®ä¸šåŠ¡åœºæ™¯ä¸­è½åœ°ç¾¤èŠæ™ºèƒ½åˆ†æï¼Œæˆ‘ä»¬ä¸ä»…æ„å»ºäº†ç”±å¤šä¸ªå¤§æ¨¡å‹é©±åŠ¨çš„ Agent Pipelineï¼Œæ›´å½¢æˆäº†ä¸€å¥— å¯æ²»ç†ã€å¯å¤ç”¨ã€å¯æ¼”åŒ–çš„ Prompt Engineering ä¸è¯­ä¹‰åˆ†ææ¶æ„ã€‚</p>
<p>ç³»ç»Ÿçš„å…³é”®ç‚¹å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-2"><strong>1.åˆ†å±‚ Prompt Engineering ä½“ç³»ï¼šé«˜å¬å› Ã— é«˜ç²¾åº¦çš„ååŒè®¾è®¡</strong></h3>
<p>æˆ‘ä»¬å°†æ•´æ¡ LLM é“¾è·¯æ‹†åˆ†ä¸ºå››å±‚ Promptï¼š</p>
<ol>
<li>Â ä¿¡æ¯æŒ–æ˜å±‚</li>
</ol>
<ul>
<li>ç”¨äºé«˜å¬å›åœ°æå–æ‰€æœ‰å¯èƒ½çš„ç”¨æˆ·åé¦ˆ</li>
<li>å›ºå®š Schema è¾“å‡ºï¼Œä¿éšœç»“æ„åŒ–ç¨³å®šæ€§</li>
<li>å†…ç½®ä¸šåŠ¡è¯­ä¹‰ç©ºé—´ï¼ˆåé¦ˆç±»å‹ã€æ ‡ç­¾ä½“ç³»ã€æƒ…ç»ªä½“ç³»ï¼‰</li>
</ul>
<ol start="2">
<li>Â å†…å®¹æ²»ç†å±‚</li>
</ol>
<ul>
<li>ç”¨äºé«˜ç²¾åº¦æ ¡éªŒã€å»å¹»è§‰ã€å»å™ª</li>
<li>å¼•å…¥â€œæ¨¡ç³Šè¯­å¥è¿‡æ»¤ + æƒ…ç»ª Ã— æ„å›¾åŒå› å­æ ¡éªŒâ€</li>
<li>åˆå¹¶åŒç”¨æˆ·é‡å¤åé¦ˆã€å‰”é™¤å¼±åé¦ˆã€å‰”é™¤è¿è¥/æµ‹è¯•ä¿¡æ¯</li>
</ul>
<ol start="3">
<li>Â è¯­ä¹‰èšç±»å±‚</li>
</ol>
<ul>
<li>åŸºäºå¤§æ¨¡å‹è¯­ä¹‰ç†è§£è‡ªåŠ¨æ„å»ºè¯é¢˜ç°‡</li>
<li>ç»Ÿä¸€æ ‡ç­¾å‘½åï¼Œé¿å…ç›¸ä¼¼æ ‡ç­¾åˆ†è£‚</li>
<li>å½“å‡ºç°è¯­ä¹‰ç›¸è¿‘ä½†ä¸å±äºæ—¢æœ‰æ ‡ç­¾çš„åé¦ˆæ—¶ï¼Œæ¨¡å‹èƒ½å¤ŸåŸºäºè¯­ä¹‰è‡ªåŠ¨å½’å¹¶æˆ–ç”Ÿæˆæ–°æ ‡ç­¾</li>
</ul>
<ol start="4">
<li>Â æ´å¯Ÿç”Ÿæˆå±‚</li>
</ol>
<p>a. Â è‡ªåŠ¨ç”Ÿæˆ 100 å­—ç¤¾åŒºçƒ­ç‚¹æ‘˜è¦</p>
<p>b. Â åŸºäºç»“æ„åŒ–æ•°æ®ç”Ÿæˆæ—¥æŠ¥/å‘¨æŠ¥ï¼ŒåŒ…å«ç¯æ¯”å˜åŒ–ä¸é£é™©äº‹ä»¶</p>
<p>é€šè¿‡åˆ†å±‚ Promptï¼Œæˆ‘ä»¬å®ç°äº†Â <strong>å¯æ§ã€é«˜å¯ç”¨ã€å…¨é“¾è·¯å¯è§£é‡Š</strong>Â çš„æ¨¡å‹è¾“å‡ºä½“ç³»ã€‚</p>
<h3 data-id="heading-3"><strong>2.åŒæ¨¡å‹åä½œï¼šç²¾å‡†æ€§ä¸æˆæœ¬ä¹‹é—´çš„åŠ¨æ€å¹³è¡¡</strong></h3>
<p>ç¤¾ç¾¤æ¶ˆæ¯æœ¬è´¨æ˜¯Â <strong>éç»“æ„åŒ–ã€å£è¯­åŒ–ã€å¼ºä¸Šä¸‹æ–‡ä¾èµ–</strong>Â çš„æ–‡æœ¬ï¼Œé’ˆå¯¹æ¯æ—¥å¤§é‡ç¾¤èŠï¼Œæˆ‘ä»¬é‡‡ç”¨â€œè½»æ¨¡å‹åšå¬å› â†’ å¼ºæ¨¡å‹åšæ ¡éªŒâ€çš„æ–¹æ³•ï¼š</p>
<ul>
<li>LLM Aï¼šæ“…é•¿é«˜å¬å›ã€ä¿¡æ¯æŒ–æ˜</li>
<li>LLM Bï¼šæ“…é•¿ä¸¥è°¨åˆ¤æ–­ã€å‡å°‘å¹»è§‰</li>
</ul>
<blockquote>
<p>å‡ºäºä¸šåŠ¡å®‰å…¨ï¼Œæœ¬æ¬¡åˆ†äº«ä¸­æˆ‘ä»¬å¯¹å®é™…ä½¿ç”¨çš„å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œäº†åŒ¿ååŒ–å¤„ç†ï¼Œä»…ä»¥å…¶èƒ½åŠ›ç‰¹å¾è¿›è¡Œæè¿°ã€‚</p>
</blockquote>
<p>è¿™ç§ å¤šæ¨¡å‹ååŒæ ¡éªŒ çš„è®¾è®¡ï¼Œè®©æˆ‘ä»¬åœ¨æˆæœ¬ã€å¬å›ç‡ã€å‡†ç¡®ç‡ä¹‹é—´è¾¾æˆæœ€ä½³å¹³è¡¡ã€‚</p>
<h4 data-id="heading-4"><strong>çœŸå®æ ·ä¾‹ï¼šæ¨¡å‹å¹»è§‰å¯¼è‡´çš„ä¸¥é‡è¯¯åˆ¤</strong></h4>
<p>åœ¨é¡¹ç›®åˆæœŸï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨å•æ¨¡å‹ç›´æ¥è§£æç¾¤èŠå†…å®¹ã€‚å½“é‡åˆ°æŸäº›â€œéç»“æ„åŒ–ã€çŸ­å¥ã€æ— æ˜ç¡®åé¦ˆæ„å›¾â€çš„æ¶ˆæ¯æ—¶ï¼Œæ¨¡å‹ä¼šä¸ºäº†æ»¡è¶³ç»“æ„åŒ–è¾“å‡ºè¦æ±‚ï¼Œ<strong>ä¸»åŠ¨è¡¥å……ä¸€äº›å¹¶ä¸å­˜åœ¨çš„åé¦ˆä¿¡æ¯</strong>ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€æ¬¡å…¸å‹çš„é”™è¯¯æ ·æœ¬ï¼š</p>
<blockquote>
<p>çœŸå®æƒ…å†µï¼šè¯¥ç¾¤å½“å¤©æ²¡æœ‰ UP ä¸»æå‡ºä»»ä½•æœ‰æ•ˆåé¦ˆå†…å®¹ã€‚</p>
<p>æ¨¡å‹è¾“å‡ºï¼šå´â€œå‡­ç©ºç”Ÿæˆâ€äº†æ•°åæ¡åé¦ˆç»“æ„ï¼ŒåŒ…æ‹¬éœ€æ±‚ã€è´Ÿå‘åé¦ˆã€æ ‡ç­¾åˆ†ç±»ç­‰ã€‚</p>
</blockquote>
<p>æˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e202e8c566bd4e08bba3633ae946c488~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907516&amp;x-signature=ng6AntzQw4xxkzYt%2F2wdOyCkUsk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶è€Œç»è¿‡äººå·¥å¤æŸ¥å¯ä»¥ç¡®è®¤ï¼š</p>
<blockquote>
<p>ä»¥ä¸Šæ‰€æœ‰åé¦ˆå‡ä¸ºæ¨¡å‹â€œè‡ªåŠ¨è„‘è¡¥â€ï¼Œç¾¤èŠåŸæ–‡ä¸­å®Œå…¨ä¸å­˜åœ¨ã€‚</p>
</blockquote>
<p>è¿™ä¸æ˜¯ç®€å•çš„æŠ€æœ¯ Bugï¼Œè€Œæ˜¯è¶³ä»¥å½±å“ä¸šåŠ¡åˆ¤æ–­çš„Â <strong>ä¸¥é‡å¹»è§‰é£é™©</strong>ã€‚</p>
<h4 data-id="heading-5"><strong>å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å¼•å…¥ç¬¬äºŒé˜¶æ®µä¸¥æ ¼å¤æ ¸èŠ‚ç‚¹</strong></h4>
<p>ä¸ºäº†é¿å…è¿™ç±»â€œå‡­ç©ºç”Ÿæˆåé¦ˆâ€çš„é—®é¢˜ï¼Œæˆ‘ä»¬è®¾è®¡äº† LLM Aï¼ˆé«˜å¬å›ï¼‰ â†’ LLM Bï¼ˆé«˜ç²¾åº¦ï¼‰ çš„åŒæ¨¡å‹åä½œæœºåˆ¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d21977afa3c549f3b6f505165a3d2e37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907516&amp;x-signature=H%2B8iGXj9ezhD0vZtTRKSjA2eLiY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å¤æ ¸èŠ‚ç‚¹ä¸­æˆ‘ä»¬åšäº†å‡ ç±»ä¸“é—¨çš„ <strong>â€œåå¹»è§‰ç­–ç•¥â€</strong> ï¼š</p>
<ul>
<li>
<p>ä¸¥æ ¼ç¦æ­¢æ¨¡å‹è¡¥å……ä¸å­˜åœ¨çš„ç”¨æˆ·åŸè¯</p>
</li>
<li>
<p>æ— åŸè¯æ—¶ â†’ å¿…é¡»è¾“å‡ºã€Œæ— åé¦ˆã€</p>
</li>
<li>
<p>ç»“æ„åŒ–æ•°æ®å¿…é¡»ä¸åŸæ–‡ä¸€ä¸€å¯¹åº”</p>
</li>
<li>
<p>æ¨¡ç³Šè¯­æ°”ï¼ˆä¼¼ä¹ã€å¯èƒ½ï¼‰ â†’ è‡ªåŠ¨åˆ¤å®šä¸ºé«˜é£é™© â†’ è¿›å…¥å¤æ ¸</p>
</li>
<li>
<p>å­—æ®µç¼ºå¤±ã€æ ‡ç­¾ä¸ç¬¦ â†’ Must Fix</p>
</li>
</ul>
<p><strong>ç»è¿‡å¢å¼ºåï¼š</strong></p>
<ul>
<li>
<p>å¹»è§‰ç‡ä» æ—©æœŸçš„ 8â€“12% â†’ é™ä¸º &lt;1%</p>
</li>
<li>
<p>å‡åé¦ˆåŸºæœ¬å®Œå…¨æ¶ˆå¤±</p>
</li>
<li>
<p>æ‰€æœ‰åé¦ˆå‡å¸¦å¯è¿½æº¯åŸè¯ï¼Œå½¢æˆâ€œè¯æ®é“¾â€</p>
</li>
</ul>
<h3 data-id="heading-6"><strong>3.åŸºäº Few-shot çš„ç»“æ„åŒ–è¾“å‡ºç¨³å®šæœºåˆ¶</strong></h3>
<p>åœ¨å®é™…ä½¿ç”¨å¤§æ¨¡å‹æ—¶ï¼Œç»“æ„åŒ–è¾“å‡ºï¼ˆå°¤å…¶æ˜¯è¡¨æ ¼å­—æ®µï¼‰å®¹æ˜“éšç€ä¸Šä¸‹æ–‡æˆ–æ¨¡å‹ç‰ˆæœ¬å‘ç”Ÿâ€œæ ¼å¼æ¼‚ç§»â€ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¸€ç§ è½»é‡çº§ Few-shot Prompting æ–¹æ³•ï¼Œè®©æ¨¡å‹åœ¨æ­£å¼è§£æä¸šåŠ¡æ•°æ®å‰ï¼Œé€šè¿‡å°‘é‡ç¤ºä¾‹å¿«é€Ÿâ€œè®°ä½â€ç›®æ ‡æ ¼å¼ï¼Œä»è€Œä¿æŒè¾“å‡ºç¨³å®šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c01eea55a79438c8d565a33cfcd4db4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907516&amp;x-signature=ajjjEvIl6DOJwazVFeFY0ExswkE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>æ–¹æ¡ˆåŸç†ï¼š</strong></p>
<p>é€šè¿‡ç»™æ¨¡å‹è¿ç»­æä¾› 2ï½3 ä¸ªæ ‡å‡†è¡¨æ ¼ç¤ºä¾‹ï¼ˆFew-shotï¼‰ï¼Œå¹¶è®©æ¨¡å‹åœ¨åç»­å›ç­”ä¸­æ²¿ç”¨åŒæ ·çš„æ ¼å¼ï¼Œæ¥æ˜¾è‘—é™ä½ç»“æ„æ¼‚ç§»æ¦‚ç‡ã€‚</p>
<p>æ— é¡»é¢å¤–çš„æ ¡éªŒå™¨ï¼Œæ— é¡»å¤æ‚è‡ªæ„ˆæœºåˆ¶ï¼Œæˆæœ¬æä½ï¼Œä½†å¯¹ç¨³å®šæ€§æå‡éå¸¸æ˜æ˜¾ã€‚</p>
<p><strong>æŠ€æœ¯æµç¨‹ï¼š</strong></p>
<ol>
<li>Â åœ¨ Prompt ä¸­åŠ å…¥ 1â€“2 ä¸ªâ€œæ ‡å‡†è¡¨æ ¼ç¤ºä¾‹â€ï¼ˆFew-shot Examplesï¼‰</li>
</ol>
<p>a. Â ç¤ºä¾‹å†…å®¹æ¥è‡ªçœŸå®æ•°æ®æˆ–æˆ‘ä»¬æ„é€ çš„ç†æƒ³æ ¼å¼ã€‚</p>
<ol start="2">
<li>
<p>Â è¦æ±‚æ¨¡å‹ï¼šä¸‹ä¸€è½®å›ç­”å¿…é¡»å®Œå…¨æ²¿ç”¨ç¤ºä¾‹æ ¼å¼</p>
</li>
<li>
<p>Â å¦‚æœæ¨¡å‹å¶å°”åç§»ï¼Œå°‘é‡çš„â€œæ ¼å¼çº æ­£æç¤ºâ€å³å¯ä¿®æ­£</p>
</li>
</ol>
<p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œè¿™ç§ few-shot æŠ€å·§ç”šè‡³æ¯”å¤æ‚çš„ç»“æ„åŒ–çº¦æŸæ›´å®ç”¨ã€‚</p>
<h3 data-id="heading-7"><strong>4.LLM è¯­ä¹‰èšç±»ï¼šé€‚åº”ç¤¾åŒºè¯­è¨€å˜åŒ–çš„è½»é‡çº§ Topic åˆ†ç»„</strong></h3>
<p>ç”¨æˆ·åœ¨ç¾¤èŠä¸­çš„ç”¨è¯é«˜åº¦è‡ªç”±ï¼ŒåŒ…å«å¤§é‡ç»†å¾®è¡¨è¾¾å·®å¼‚ï¼š</p>
<ul>
<li>
<p>å¤šç§è¯´æ³•è¡¨è¾¾åŒä¸€ä¸ªé—®é¢˜ï¼ˆå¦‚â€œå®¡æ ¸æ…¢â€â€œå¡å®¡æ ¸â€ï¼‰</p>
</li>
<li>
<p>å¤šç§æœ¯è¯­ã€åˆ«åå¹¶å­˜ï¼ˆâ€œæµé‡æ³¢åŠ¨â€â€œæ¨æµä¸ç¨³â€ï¼‰</p>
</li>
<li>
<p>ä¸æ–­å‡ºç°æ–°çš„è¯æ±‡æˆ–è¡¨è¿°</p>
</li>
</ul>
<p>ä¸ºé¿å…å…³é”®è¯ç»´æŠ¤è´Ÿæ‹…ï¼Œæˆ‘ä»¬é‡‡ç”¨ï¼š</p>
<ul>
<li>
<p>LLM è‡ªä¸»åˆ¤æ–­è¯­ä¹‰ç›¸ä¼¼åº¦ï¼ˆä¸æ˜¯å…³é”®è¯åŒ¹é…ï¼‰</p>
</li>
<li>
<p>è®©æ¨¡å‹ç”Ÿæˆç»Ÿä¸€æ ‡ç­¾ï¼ˆé¿å…åŒç±»è¯é¢˜è¢«æ‹†åˆ†ï¼‰</p>
</li>
<li>
<p>å½“æ¨¡å‹è¯†åˆ«åˆ°â€œå®Œå…¨ä¸å±äºç°æœ‰ä¸»é¢˜â€çš„å†…å®¹æ—¶ï¼Œè‡ªåŠ¨ç”Ÿæˆæ–°ä¸»é¢˜</p>
</li>
</ul>
<p>è¿™æ˜¯ä¸€ç§è½»é‡ä½†éå¸¸å®ç”¨çš„ Topic èšç±»æ–¹å¼ï¼Œå¯ä»¥è®©ç³»ç»Ÿåœ¨ä¸ä¾èµ–å¤æ‚ç®—æ³•çš„å‰æä¸‹ï¼Œè‡ªåŠ¨è·Ÿä¸Šä¸šåŠ¡ä¸ç¤¾åŒºè¯­å¢ƒçš„å˜åŒ–ï¼Œ<strong>æ•ˆæœè¶³ä»¥æ”¯æ’‘æ¯æ—¥çƒ­ç‚¹ã€è¯é¢˜è¶‹åŠ¿åˆ†æ</strong>ã€‚</p>
<p>ä»¥ä¸‹Promptéšå»äº†ä¸€äº›æˆ‘ä»¬ä¸šåŠ¡æ ‡ç­¾æ³¨å…¥çš„å†…å®¹ï¼Œä½†ä»å¯ä¾›å¤§å®¶å‚è€ƒ</p>
<pre><code class="hljs language-diff" lang="diff">ä½ æ˜¯ç¤¾åŒºè¿è¥å›¢é˜Ÿçš„ä¸€å‘˜ã€‚ä½ å³å°†é˜…è¯»åˆ°ä¸€æ‰¹ç”¨æˆ·åé¦ˆå†…å®¹ï¼Œæ¯æ¡åé¦ˆéƒ½æœ‰å”¯ä¸€çš„â€œåé¦ˆIDâ€ã€‚

ä½ çš„å·¥ä½œå¦‚ä¸‹ï¼š
ä¸»é¢˜èšç±»
<span class="hljs-deletion">- å¯¹æ‰€æœ‰åé¦ˆè¿›è¡Œè¯­ä¹‰èšç±»ï¼Œå°†è¯­ä¹‰ç›¸è¿‘çš„åé¦ˆå½’ä¸ºåŒä¸€ä¸»é¢˜ï¼ˆå¦‚â€œç³»ç»Ÿå¡é¡¿â€å’Œâ€œæœåŠ¡å™¨å´©æºƒâ€åº”å½’ä¸ºåŒç±»ï¼‰ã€‚</span>
<span class="hljs-deletion">- ç›¸åŒä¸»é¢˜åªä¿ç•™ä¸€ä¸ªç»Ÿä¸€æ ‡ç­¾ï¼Œä¸è¦ç”Ÿæˆç›¸ä¼¼ä½†ä¸åŒçš„æ ‡ç­¾åç§°ã€‚</span>
æ ‡ç­¾å‘½å
<span class="hljs-deletion">- å‚è€ƒå¾®åšçƒ­æœå‘½åæ–¹å¼ï¼Œç”Ÿæˆç®€æ´æœ‰å†²å‡»åŠ›çš„æ ‡ç­¾ï¼ˆ2~8å­—ï¼‰ï¼Œé¿å…å†—é•¿æè¿°ã€‚</span>
<span class="hljs-deletion">- æ ‡ç­¾éœ€è¦†ç›–å¤šç§ç±»å‹ï¼ˆæ»¡æ„åº¦ã€å’¨è¯¢ã€é—®é¢˜ç­‰ï¼‰ï¼Œä¸å¯åªèšç„¦é—®é¢˜åé¦ˆã€‚</span>
äº‹ä»¶æç‚¼
<span class="hljs-deletion">- ä¸ºæ¯ä¸ªæ ‡ç­¾ç”¨ä¸€å¥è¯æ¦‚æ‹¬ç”¨æˆ·å…³æ³¨çš„ç„¦ç‚¹ï¼Œäº‹ä»¶åŒ–æè¿°ï¼Œä¸è¦ç½—åˆ—ç±»åˆ«ã€‚</span>
çƒ­åº¦ç»Ÿè®¡
<span class="hljs-deletion">- ç»Ÿè®¡è¯¥æ ‡ç­¾ä¸‹çš„åé¦ˆæ•°é‡ï¼Œä½œä¸ºçƒ­åº¦å€¼ã€‚</span>
åé¦ˆIDæ ‡æ³¨
<span class="hljs-deletion">- åˆ—å‡ºä¸è¯¥æ ‡ç­¾ç›¸å…³çš„æœ€å¤š5ä¸ªåé¦ˆIDï¼Œç”¨è‹±æ–‡é€—å·åˆ†éš”ã€‚</span>
æ’åºè¾“å‡º
<span class="hljs-deletion">- æŒ‰çƒ­åº¦ä»é«˜åˆ°ä½ï¼Œè¾“å‡ºå‰10ä¸ªæ ‡ç­¾çš„ä¿¡æ¯ã€‚</span>

è¾“å‡ºè¡¨æ ¼æ ¼å¼å¦‚ä¸‹ï¼Œè¯·å‹¿è¿”å›å¤šä½™çš„æ³¨è§£ï¼š
| æ ‡ç­¾ | çƒ­è®®äº‹ä»¶ | çƒ­åº¦ | åé¦ˆID |
</code></pre>
<h3 data-id="heading-8"><strong>5.è¯­ä¹‰é©±åŠ¨çš„é£æ§é¢„è­¦ä½“ç³»ï¼šä»è¶‹åŠ¿ä¸­æå‰å‘ç°é£é™©</strong></h3>
<p>æˆ‘ä»¬ç»“åˆè¯­ä¹‰èšç±»ç»“æœä¸åé¦ˆæŒ‡æ ‡ï¼Œå½¢æˆäº†è½»é‡çº§çš„é¢„è­¦åˆ¤æ–­é€»è¾‘ï¼š</p>
<ul>
<li>
<p>é‡çº§åˆ†æ</p>
</li>
<li>
<p>å¢é€Ÿåˆ†æ</p>
</li>
<li>
<p>è´Ÿå‘å æ¯”</p>
</li>
<li>
<p>æƒ…ç»ªçªå‘æ£€æµ‹</p>
</li>
<li>
<p>è·¨ç¾¤ä½“ä¸€è‡´æ€§åˆ¤æ–­</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c4318b9ddce4e208f0d6bab799b6646~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907516&amp;x-signature=UKMUZ%2F%2Bkuyity2WUKeTQ9vBTTqs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å½“æŸä¸ªè¯é¢˜å‡ºç°ï¼š</p>
<ul>
<li>
<p>è´Ÿå‘æƒ…ç»ªçŸ­æ—¶é—´æ€¥å¢</p>
</li>
<li>
<p>ç¯æ¯”å¿«é€Ÿä¸Šæ¶¨</p>
</li>
<li>
<p>å¤šä¸ªç¾¤åŒæ—¶å‡ºç°ç±»ä¼¼åé¦ˆ</p>
</li>
</ul>
<p>ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ¤å®šä¸ºÂ <strong>çªå‘äº‹ä»¶</strong>ï¼Œå¹¶æ ‡æ³¨é£é™©ç­‰çº§ã€‚</p>
<p>ç›¸æ¯”ä¼ ç»Ÿäººå·¥è½®è¯¢ï¼Œè¿™ç§èƒ½åŠ›å¯ä»¥ï¼š</p>
<h4 data-id="heading-9"><strong>å…¨é“¾è·¯æµç¨‹å›¾</strong></h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c6bae534fb847969b8b62221db9a9f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907516&amp;x-signature=i25gM6VxupT%2BjPRsBBo8VwpGBMY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-10"><strong>ä¸‰ã€å®é™…æ•ˆæœä¸ä¸šåŠ¡æ”¶ç›Š</strong></h2>
<p>å¼•å…¥ AI æ™ºèƒ½åˆ†æç³»ç»Ÿåï¼Œæˆ‘ä»¬åœ¨åé¦ˆæ´å¯Ÿçš„æ•ˆç‡ã€è¦†ç›–ã€å‡†ç¡®æ€§ä¸Šéƒ½å–å¾—äº†æ˜¾è‘—æå‡ã€‚</p>
<p>è¿‡å»ä¾èµ–äººå·¥ç­›æŸ¥æ—¶ï¼Œåœ¨æœ‰é™äººåŠ›ä¸‹æ—¥å‡åªèƒ½å›æ”¶çº¦ 50 æ¡æœ‰æ•ˆåé¦ˆï¼›å¦‚ä»Šç³»ç»Ÿèƒ½å¤Ÿæ¯å¤©è‡ªåŠ¨å›æ”¶è¿‘ 600 æ¡ï¼Œè¦†ç›–èŒƒå›´æ‰©å¤§åå€ä»¥ä¸Šï¼Œå¤§é‡è¢«å¿½ç•¥çš„â€œå¼±ä¿¡å·â€å¾—ä»¥è¢«åŠæ—¶æ•æ‰å’Œè®°å½•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bb81bb1d2ce47a2b92c340b7f254bed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907516&amp;x-signature=1CpbMFvHqXoRUa%2Bf25myEHfNJDs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>AI å¸¦æ¥çš„ä»·å€¼ä¸ä»…ä½“ç°åœ¨è§„æ¨¡åŒ–å¤„ç†ï¼Œæ›´é‡è¦çš„æ˜¯å¯¹å…³é”®äº‹ä»¶çš„æå‰æ´å¯Ÿèƒ½åŠ›ã€‚ç³»ç»Ÿèƒ½å¤Ÿè¯†åˆ«çŸ­æ—¶é—´å†…å‡ºç°çš„å¼‚å¸¸èšé›†ä¿¡å·ï¼Œå¦‚åˆ›ä½œæµç¨‹ã€å®¡æ ¸ä½“éªŒã€ç‰ˆæƒç”³è¯‰ç­‰é¢†åŸŸçš„æƒ…ç»ªæ³¢åŠ¨ã€‚å½“æŸä¸€è¯é¢˜çš„è´Ÿé¢è¡¨è¾¾çªç„¶å¢å¤šæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨èšåˆå¹¶æå‡ä¸ºé‡ç‚¹å…³æ³¨äº‹ä»¶ï¼Œè®©å›¢é˜Ÿèƒ½åœ¨é—®é¢˜å½¢æˆå¤§èŒƒå›´æ‰©æ•£å‰å°±æå‰ä»‹å…¥ï¼Œåœ¨æ—©æœŸè‹—å¤´é˜¶æ®µå°±è¿›è¡Œå“åº”ä¸å¤„ç†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c74c6a91487c4e1c8448e3ef9406ca65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907516&amp;x-signature=Jvd2IfcmnHB1olfQwDyFycEsFHA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ­¤å¤–ï¼Œç»“æ„åŒ–å¤„ç†åçš„æµ·é‡ç¾¤èŠä¿¡æ¯ï¼Œä¹Ÿæˆä¸ºäº†å›¢é˜Ÿçš„é‡è¦çŸ¥è¯†èµ„äº§ã€‚è¿™äº›æ•°æ®ä¼šè¿›ä¸€æ­¥è¢«ç”¨äºï¼š</p>
<ul>
<li>
<p>ç”Ÿæˆæ¯æ—¥/æ¯å‘¨çš„äº‹ä»¶ç®€æŠ¥ï¼Œä¸ºè¿è¥ä¸äº§å“æä¾›å‡†ç¡®çš„ç”¨æˆ·æ¸©åº¦è®¡</p>
</li>
<li>
<p>è¾“å‡ºå…¸å‹æ¡ˆä¾‹ä¸è¯é¢˜çƒ­åº¦ï¼Œè¾…åŠ©åˆ¤æ–­ä¼˜å…ˆçº§</p>
</li>
<li>
<p>è‡ªåŠ¨ç”Ÿæˆ TAPD éœ€æ±‚ï¼Œæ¨åŠ¨é—®é¢˜é—­ç¯å¤„ç†</p>
</li>
<li>
<p>ä¸ºäº§å“å›¢é˜Ÿæä¾›çœŸå®ç”¨æˆ·çš„â€œåŸå£°è¯æ®â€ï¼Œå‡å°‘æ²Ÿé€šæˆæœ¬</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72e70150a84a43d0a434b0eb7deb54b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907516&amp;x-signature=fMq6QE%2BWsriiGft7a9C8IMdjsig%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ BI çœ‹æ¿ä¸Šï¼Œè¿™äº›æ²‰æ·€çš„æ•°æ®ä»¥æ›´ç›´è§‚çš„æ–¹å¼å‘ˆç°ï¼šæƒ…ç»ªè¶‹åŠ¿ã€è¯é¢˜èšç±»ã€åé¦ˆè§„æ¨¡ã€é£é™©äº‹ä»¶ç­‰æ ¸å¿ƒæŒ‡æ ‡ä¸€ç›®äº†ç„¶ï¼Œè®©ä¸šåŠ¡å›¢é˜Ÿå¯ä»¥éšæ—¶æŒæ¡ç”¨æˆ·çš„å…³æ³¨ç‚¹å’Œå˜åŒ–è¶‹åŠ¿ï¼Œåšåˆ°â€œæ•°æ®é©±åŠ¨è¿è¥å†³ç­–â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdd27ecf627c4aa59e1b9714b93ceae2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907516&amp;x-signature=H7Lc%2FuuR2G747MkMer8QqcagWfU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ•´ä½“è€Œè¨€ï¼Œè¿™å¥—ç¤¾ç¾¤ä¿¡æ¯ AI åˆ†æä½“ç³»è®©æˆ‘ä»¬ä»è¢«åŠ¨å“åº”èµ°å‘äº†ä¸»åŠ¨æ´å¯Ÿâ€”â€”</p>
<p>ä¸å†æ˜¯ç­‰ç”¨æˆ·å¤§é‡æŠ•è¯‰åå†å¤„ç†ï¼Œè€Œæ˜¯èƒ½å¤Ÿåˆ©ç”¨ AI çš„è¯­ä¹‰ç†è§£èƒ½åŠ›ï¼ŒåŠæ—¶æ•æ‰åˆ°ç¾¤èŠä¸­ä¸æ–­æµ®ç°çš„ç»†å¾®å˜åŒ–ï¼Œå¹¶å°†åˆ†æ•£çš„ç”¨æˆ·å£°éŸ³è½¬åŒ–ä¸ºæ¨åŠ¨äº§å“è¿­ä»£çš„åŠ¨åŠ›ã€‚</p>
<h2 data-id="heading-11"><strong>å››ã€AIåº”ç”¨ä¼˜åŠ¿æ€»ç»“</strong></h2>
<p>è¿™å¥—ç¤¾ç¾¤ä¿¡æ¯ AI åˆ†æä½“ç³»çš„è½åœ°ï¼Œè®©æˆ‘ä»¬åœ¨åé¦ˆè·å–ã€é—®é¢˜è¯†åˆ«å’Œè¿è¥å†³ç­–ä¸‰ä¸ªå±‚é¢éƒ½è·å¾—äº†å®è´¨æ€§çš„æå‡ï¼š</p>
<ul>
<li>
<p>æ•ˆç‡è·ƒå‡ï¼šå¤§é‡é‡å¤ã€é›¶æ•£çš„ç¾¤èŠåˆ†æå·¥ä½œè¢«è‡ªåŠ¨åŒ–å–ä»£ï¼Œå›¢é˜Ÿèƒ½æŠŠæ›´å¤šç²¾åŠ›æŠ•å…¥åˆ°å…³é”®é—®é¢˜çš„åˆ¤æ–­ä¸æ²Ÿé€šä¸Šã€‚</p>
</li>
<li>
<p>å…¨é¢è¦†ç›–ï¼šå¤§æ¨¡å‹çš„è¯­ä¹‰ç†è§£èƒ½åŠ›è®©â€œéšæ™¦è¡¨è¾¾ã€å¼±ä¿¡å·ã€æ–°è¯é¢˜â€éƒ½èƒ½è¢«åŠæ—¶æ•æ‰ï¼Œæ˜¾è‘—é™ä½åé¦ˆé—æ¼ç‡ã€‚</p>
</li>
<li>
<p>æƒ…ç»ªé‡åŒ–ï¼šç”¨æˆ·æƒ…ç»ªä»ä¸»è§‚åˆ¤æ–­å˜æˆå¯è§‚æµ‹æŒ‡æ ‡ï¼Œè¶‹åŠ¿å˜åŒ–ä¹Ÿèƒ½é€šè¿‡æ•°æ®ç›´æ¥å‘ˆç°ï¼Œä¸ºè¿è¥æä¾›æ›´åŠæ—¶çš„é£é™©æç¤ºã€‚</p>
</li>
<li>
<p>è¯é¢˜èšåˆèƒ½åŠ›ï¼šè¯­ä¹‰èšç±»è®©é‡å¤è¡¨è¾¾çš„æ„è§è¢«åˆå¹¶ã€é•¿å°¾é—®é¢˜è¢«æ˜¾æ€§åŒ–ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´å‡†ç¡®åœ°æŠŠæ¡ UP ä¸»çš„å…³æ³¨ç‚¹ã€‚</p>
</li>
<li>
<p>æ¨åŠ¨é—­ç¯ï¼šç»“æ„åŒ–æ•°æ®æ²‰æ·€åï¼Œåé¦ˆèƒ½è‡ªç„¶è¿›å…¥æ—¥æŠ¥ã€å‘¨æŠ¥å’Œéœ€æ±‚æµè½¬ä½“ç³»ï¼Œé—®é¢˜ä»è¢«å‘ç°åˆ°è¢«è§£å†³çš„è·¯å¾„æ›´åŠ é¡ºç•…ã€‚</p>
</li>
</ul>
<p>AI è®©æˆ‘ä»¬ä»â€œäººå·¥ç›¯å²—â€è¿›å…¥â€œä¸»åŠ¨æ´å¯Ÿâ€æ—¶ä»£ã€‚</p>
<p>æˆ‘ä»¬çœŸæ­£å®ç°äº†å°†åˆ›ä½œè€…çš„å£°éŸ³å¾—åˆ°è§„æ¨¡åŒ–è®°å½•ã€åˆ†æä¸åé¦ˆï¼Œè¿™åœ¨è¿‡å»å‡ ä¹æ˜¯ä¸å¯èƒ½å®Œæˆçš„ä»»åŠ¡ã€‚</p>
<p>æœªæ¥ï¼Œæˆ‘ä»¬ä¹Ÿä¼šç»§ç»­åŠ å¼ºæ¨¡å‹åœ¨é£é™©è¯†åˆ«ã€åˆ›ä½œæ”¯æŒä¸ç¤¾åŒºç”Ÿæ€ç­‰æ–¹å‘çš„èƒ½åŠ›å»ºè®¾ï¼Œä¸ºå¹³å°æŒç»­æä¾›æ›´æ™ºèƒ½çš„åŸºç¡€è®¾æ–½ã€‚</p>
<p>-End-</p>
<p>ä½œè€…ä¸¨Zeroooã€è“è“æ´¾</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PythonçœŸçš„è¦ä¸€ç»Ÿå¤©ä¸‹äº†ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7115595433472163870</link>    <guid>https://juejin.cn/post/7115595433472163870</guid>    <pubDate>2022-07-02T02:24:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7115595433472163870" data-draft-id="7115591637132115999" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PythonçœŸçš„è¦ä¸€ç»Ÿå¤©ä¸‹äº†ï¼Ÿ"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2022-07-02T02:24:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Pythonç¼–ç¨‹å­¦ä¹ åœˆ"/> <meta itemprop="url" content="https://juejin.cn/user/2261048121629512"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PythonçœŸçš„è¦ä¸€ç»Ÿå¤©ä¸‹äº†ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2261048121629512/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Pythonç¼–ç¨‹å­¦ä¹ åœˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2022-07-02T02:24:49.000Z" title="Sat Jul 02 2022 02:24:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2022-07-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    84
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Python æœ€è¿‘åˆåœ¨æå¤§äº‹æƒ…ï¼Œå°±åœ¨æœ€è¿‘ï¼Œgithubä¸Šçªç„¶å¤šäº†ä¸€ä¸ªç¥å¥‡çš„é¡¹ç›®</p>
<p>GitHubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpyscript%2Fpyscript" target="_blank" title="https://github.com/pyscript/pyscript" ref="nofollow noopener noreferrer">github.com/pyscript/pyâ€¦</a></p>
<p>å¹¶ä¸”æœ€è¿‘ä¸€ç›´åœ¨æ›´æ–°ã€‚ä¸€çœ‹è¿™ä¸ªåå­—å°±è®©æˆ‘ä»¬ä¸ç¦æƒ³èµ·JavaScriptï¼Œå†å»å®˜ç½‘ä¸€çœ‹</p>
<p>pyscriptå®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpyscript.net%2F" target="_blank" title="https://pyscript.net/" ref="nofollow noopener noreferrer">pyscript.net/</a></p>
<p>è¿™å®¶ä¼™ä¸ä»…æ¨¡ä»¿äº†JavaScriptçš„åå­—ï¼Œç”šè‡³è¿èº«å­éƒ½æƒ³è¦å–è€Œä»£ä¹‹ï¼</p>
<p>å®˜æ–¹å¯¹pyscriptçš„æœŸæœ›æ˜¯å¯ä»¥åœ¨æµè§ˆå™¨ä¸Šç›´æ¥è¿è¡Œpythonã€‚</p>
<pre><code class="hljs language-bash" lang="bash">&lt;html&gt;|
    ...|
    &lt;py-script&gt; <span class="hljs-built_in">print</span>(<span class="hljs-string">'Now you can!'</span>) &lt;/py-script&gt;|
&lt;/html&gt;|
</code></pre>
<p>æ€€ç€ä¸€é¢—å¥½å¥‡å¿ƒï¼Œæˆ‘ä»¬æŠŠgithubä¸Šçš„ä»£ç å…‹éš†ä¸‹æ¥ï¼Œå‘ç°æ˜¯ä¸€ä¸ªåŸºäºnodeçš„å‰ç«¯é¡¹ç›®ï¼Œé‚£ç¬¬ä¸€æ­¥å…ˆæŠŠä»–è·‘èµ·æ¥ï¼</p>
<p>è¿›å…¥\pyscript-main\pyscriptjsç›®å½•ä¸‹ï¼Œ</p>
<ol>
<li>é¦–å…ˆå®‰è£…ä¾èµ–Â cnpm i</li>
<li>ç„¶åå…ˆåœ¨æœ¬åœ°è¿è¡ŒÂ npm run dev</li>
<li>æ‰“å¼€Â <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2F" target="_blank" title="http://localhost:8080/" ref="nofollow noopener noreferrer">http://localhost:8080/</a></li>
</ol>
<p>é¦–é¡µæ˜¯ä¸€ä¸ªçº¯çº¯çš„htmlæ–‡ä»¶ï¼Œåœ¨\pyscript-main\pyscriptjs\examplesç›®å½•ä¸‹çš„index.htmlï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0d606931a8c414f811c2c44a9ca1f28~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="å›¾ç‰‡" title="img.png" loading="lazy"/></p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æœ€ç®€å•çš„Hello worldé¡µé¢ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3879aa959cbc4d539c47fd79f601e74c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="å›¾ç‰‡" title="img_1.png" loading="lazy"/></p>
<p>é¡µé¢ç¡®å®å¤Ÿç®€å•ï¼Œå†çœ‹çœ‹å®ƒçš„ä»£ç ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">&lt;body&gt;
    Hello world! &lt;br&gt;
    This is the current date <span class="hljs-keyword">and</span> <span class="hljs-keyword">time</span>, as computed by Python:     &lt;py-script&gt;
from datetime import datetime
now = datetime.now()
now.strftime(<span class="hljs-string">"%m/%d/%Y, %H:%M:%S"</span>)
    &lt;<span class="hljs-regexp">/py-script&gt;  
  &lt;/</span>body&gt;
</code></pre>
<p>æƒ³å¿…å¤§å®¶éƒ½å¯ä»¥çœ‹å¾—æ‡‚è¿™æ®µä»£ç ï¼Œç²¾å½©çš„ç‚¹åœ¨äºï¼Œåªè¦åœ¨æ ‡ç­¾ä¸­ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨pythonè¯­æ³•æ¥è¿›è¡Œæ“ä½œäº†ï¼Œå¹¶ä¸”ä¼¼ä¹æ¯”JavaScriptè¿˜è¦ç›´æ¥å—·ï¼Œç”šè‡³è¿˜æœ‰ç‚¹æ•°æ®ç»‘å®šçš„æ„æ€ã€‚</p>
<p>å†æ¥çœ‹çœ‹å¦ä¸€ä¸ªç»å…¸çš„ä¾‹å­ï¼Œtodo_listï¼Œå¯¹åº”todo.html,å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a2ecb9a8b984e5b9106e5c5612d5421~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="å›¾ç‰‡" title="img_2.png" loading="lazy"/></p>
<p>å†çœ‹ä»£ç ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">... 
 <span class="hljs-tag">&lt;<span class="hljs-name">py-script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/todo.py"</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">py-script</span>&gt;</span>
...
<span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-center w-full mb-8"</span>&gt;</span>      
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-3xl font-bold text-gray-800 uppercase tracking-tight"</span>&gt;</span>To Do List<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>   
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>      
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"new-task-content"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"border flex-1 mr-3 border-gray-300 p-2 rounded"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>&gt;</span>      
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"new-task-btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"p-2 text-white bg-blue-600 border border-blue-600 rounded"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">pys-onClick</span>=<span class="hljs-string">"add_task"</span>&gt;</span>        
        Add task      
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>    
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">py-list</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myList"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">py-list</span>&gt;</span>    
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"list-tasks-container"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex flex-col-reverse mt-4"</span>&gt;</span>  
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"task-template"</span>&gt;</span>        
      <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"task bg-white my-1"</span>&gt;</span>            
          <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"flex items-center p-2 "</span>&gt;</span>              
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mr-2"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"task-check"</span>&gt;</span>              
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"m-0 inline"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>            
          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>       
        <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>      
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  
  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
</code></pre>
<p>åœ¨ä»£ç æœ€ä¸Šé¢ç«Ÿç„¶å¼•å…¥äº†ä¸€ä¸ª.pyæ–‡ä»¶ï¼Œä»£ç ä¸­ä½¿ç”¨pys-onClickç»‘å®šäº†add_taskæ–¹æ³•ï¼Œè€Œadd_taskæ–¹æ³•åœ¨å¼•å…¥çš„todo.pyä¸­è¿›è¡Œäº†å£°æ˜ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_task</span>(<span class="hljs-params">*ags, **kws</span>):   
   ...
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒpyscriptçœŸçš„å¯ä»¥åšåˆ°å’ŒJavaScriptåœ¨æµè§ˆå™¨ä¸­è¿è¡Œæ—¶ä¸€æ ·çš„è°ƒç”¨ä½“éªŒï¼Œç”šè‡³è¿˜å¯ä»¥åœ¨æµè§ˆå™¨ä¸­å¼•ç”¨pythonç±»åº“ï¼</p>
<p>åœ¨å¦ä¸€ä¸ªtodo_pylist.htmlé¡µé¢ä¸­ï¼Œæä¾›äº†ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œpythonå‘½ä»¤çš„æ–¹æ³•ï¼Œ</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b8f27cd504f04e7789481de69617a37f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="å›¾ç‰‡" title="img_3.png" loading="lazy"/></p>
<p>ä¸ºäº†æ˜¾ç¤ºè‡ªå·±åœ¨å¤„ç†å¤æ‚å›¾å½¢æ–¹é¢çš„èƒ½åŠ›ï¼Œç¤ºä¾‹ä¸­è¿˜æä¾›äº†å’Œthree.jsç»“åˆè€Œæˆçš„webglç¤ºä¾‹é¡µé¢ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c56cf42a31834f7d9fce220f4034e6de~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="å›¾ç‰‡" title="img_4.png" loading="lazy"/></p>
<p>å’Œä¸€äº›å›¾è¡¨é¡µé¢ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2cc4f71dd8ba4a858b1597ea18d76feb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="å›¾ç‰‡" title="img_5.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨åŠŸèƒ½å®ç°ä¸Šï¼ŒpyscriptåŸºæœ¬å¯ä»¥å®ç°JavaScriptèƒ½å¤Ÿå®ç°çš„åŠŸèƒ½ã€‚</p>
<p>ä¸è¿‡ä»ç›®å‰çš„ä½“éªŒä¸Šæ¥çœ‹ï¼Œåœ¨æµè§ˆå™¨ä¸Šè¿è¡Œpythonå±å®æ˜¯å¤Ÿæ…¢çš„ï¼Œæ¯æ¬¡æ‰“å¼€é¡µé¢éƒ½å¾—ç­‰å¥½å‡ ç§’ï¼Œå¹¶ä¸”ç¬¬ä¸€æ¬¡æ‰“å¼€é¡µé¢çš„æ—¶å€™ç«Ÿç„¶è¿˜è¦ä¸‹è½½pythonç±»åº“ï¼Œgithubä¸Šå·²ç»æœ‰äººæå‡ºäº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”å®˜æ–¹å›ç­”ä»–ä»¬å·²ç»åŠªåŠ›äº†ï¼Œå¹¶ä¸”è¿˜åœ¨ç»§ç»­åŠªåŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactæ€§èƒ½ä¼˜åŒ–ï¼šè¿™5ä¸ªHooksæŠ€å·§è®©æˆ‘å‡å°‘äº†40%çš„é‡æ–°æ¸²æŸ“]]></title>    <link>https://juejin.cn/post/7577284771447439400</link>    <guid>https://juejin.cn/post/7577284771447439400</guid>    <pubDate>2025-11-28T04:17:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577284771447439400" data-draft-id="7577284968923086848" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactæ€§èƒ½ä¼˜åŒ–ï¼šè¿™5ä¸ªHooksæŠ€å·§è®©æˆ‘å‡å°‘äº†40%çš„é‡æ–°æ¸²æŸ“"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-28T04:17:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactæ€§èƒ½ä¼˜åŒ–ï¼šè¿™5ä¸ªHooksæŠ€å·§è®©æˆ‘å‡å°‘äº†40%çš„é‡æ–°æ¸²æŸ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T04:17:41.000Z" title="Fri Nov 28 2025 04:17:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Reactæ€§èƒ½ä¼˜åŒ–ï¼šè¿™5ä¸ªHooksæŠ€å·§è®©æˆ‘å‡å°‘äº†40%çš„é‡æ–°æ¸²æŸ“</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼ŒReactå‡­å€Ÿå…¶ç»„ä»¶åŒ–æ€æƒ³å’Œå£°æ˜å¼ç¼–ç¨‹æ¨¡å‹èµ¢å¾—äº†å¹¿æ³›è®¤å¯ã€‚ç„¶è€Œï¼Œéšç€åº”ç”¨è§„æ¨¡çš„å¢é•¿ï¼Œæ€§èƒ½é—®é¢˜é€æ¸æ˜¾ç°ï¼Œå°¤å…¶æ˜¯ç»„ä»¶ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“é—®é¢˜ã€‚æ®ç»Ÿè®¡ï¼Œè¶…è¿‡60%çš„Reactæ€§èƒ½é—®é¢˜æºäºä¸å½“çš„çŠ¶æ€ç®¡ç†å’Œå‰¯ä½œç”¨å¤„ç†ã€‚</p>
<p>ä½œä¸ºä¸€åé•¿æœŸæ·±è€•Reactå¼€å‘çš„å·¥ç¨‹å¸ˆï¼Œæˆ‘åœ¨å¤šä¸ªå¤§å‹é¡¹ç›®ä¸­é€šè¿‡ç³»ç»Ÿæ€§ä¼˜åŒ–æˆåŠŸå°†é‡æ–°æ¸²æŸ“æ¬¡æ•°å‡å°‘äº†40%ã€‚æœ¬æ–‡å°†åˆ†äº«5ä¸ªç»è¿‡å®æˆ˜æ£€éªŒçš„Hooksä¼˜åŒ–æŠ€å·§ï¼Œè¿™äº›æ–¹æ³•ä¸ä»…ç¬¦åˆReactæœ€ä½³å®è·µï¼Œè¿˜èƒ½æ˜¾è‘—æå‡åº”ç”¨æ€§èƒ½ã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“å†…å®¹</h2>
<h3 data-id="heading-3">1. useMemoï¼šæ˜‚è´µçš„è®¡ç®—ä¸å†é‡å¤</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">ExpensiveComponent</span> = (<span class="hljs-params">{ data }</span>) =&gt; {
  <span class="hljs-comment">// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è®¡ç®—</span>
  <span class="hljs-keyword">const</span> processedData = <span class="hljs-title function_">complexCalculation</span>(data);

  <span class="hljs-comment">// âœ… ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—ç»“æœ</span>
  <span class="hljs-keyword">const</span> memoizedData = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">complexCalculation</span>(data), [data]);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{memoizedData}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};
</code></pre>
<p><strong>ä¼˜åŒ–åŸç†ï¼š</strong></p>
<ul>
<li><code>useMemo</code>ä¼šè®°å¿†ï¼ˆmemoizeï¼‰è®¡ç®—ç»“æœï¼Œä»…åœ¨ä¾èµ–é¡¹å˜åŒ–æ—¶é‡æ–°è®¡ç®—</li>
<li>Reactä½¿ç”¨Object.isæ¯”è¾ƒä¾èµ–é¡¹çš„å˜åŒ–</li>
</ul>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>é€‚ç”¨äºJSONåºåˆ—åŒ–ã€å¤æ‚è½¬æ¢æˆ–å¤§æ•°æ®å¤„ç†ç­‰åœºæ™¯</li>
<li>é¿å…è¿‡åº¦ä½¿ç”¨ï¼šç®€å•è®¡ç®—å¯èƒ½æ¯”è®°å¿†åŒ–å¼€é”€æ›´å¤§</li>
<li>Chrome DevToolsçš„Profilerå¯éªŒè¯ä¼˜åŒ–æ•ˆæœ</li>
</ul>
<p><strong>æ¡ˆä¾‹åˆ†æï¼š</strong>
åœ¨æŸç”µå•†å¹³å°å•†å“åˆ—è¡¨é¡µä¸­ï¼Œå°†ä»·æ ¼æ¢ç®—é€»è¾‘ç”¨useMemoåŒ…è£¹åï¼Œäº¤äº’å»¶è¿Ÿä»120msé™è‡³40msã€‚</p>
<h3 data-id="heading-4">2. useCallbackï¼šç¨³å®šçš„å‡½æ•°å¼•ç”¨</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">ProductList</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [products, setProducts] = <span class="hljs-title function_">useState</span>([]);
  
  <span class="hljs-comment">// âŒ æ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°å‡½æ•°</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelect</span> = (<span class="hljs-params">product</span>) =&gt; { <span class="hljs-comment">/*...*/</span> };

  <span class="hljs-comment">// âœ… ä¿æŒç¨³å®šå¼•ç”¨</span>
  <span class="hljs-keyword">const</span> memoizedHandleSelect = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">product</span>) =&gt;</span> {
    <span class="hljs-comment">// handleré€»è¾‘</span>
  }, []);

  <span class="hljs-keyword">return</span> products.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ProductItem</span> 
      <span class="hljs-attr">key</span>=<span class="hljs-string">{p.id}</span> 
      <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{memoizedHandleSelect}</span> 
    /&gt;</span></span>
  ));
};
</code></pre>
<p><strong>æ·±åº¦è§£æï¼š</strong></p>
<ul>
<li>JavaScriptä¸­å‡½æ•°æ˜¯å¯¹è±¡ï¼Œæ¯æ¬¡åˆ›å»ºéƒ½æ˜¯æ–°å¼•ç”¨</li>
<li>React.memoç­‰ä¼˜åŒ–ä¾èµ–propsçš„æµ…æ¯”è¾ƒï¼ˆshallow compareï¼‰</li>
<li>Webpack Bundle Analyzeræ˜¾ç¤ºé¢‘ç¹çš„å‡½æ•°é‡å»ºä¼šå¢åŠ å†…å­˜å‹åŠ›</li>
</ul>
<p><strong>è¿›é˜¶æŠ€å·§ï¼š</strong></p>
<ul>
<li>TypeScriptç”¨æˆ·å¯ç»“åˆ<code>react-hooks/exhaustive-deps</code>è§„åˆ™ç¡®ä¿ä¾èµ–å®Œæ•´</li>
<li>Event busæ¨¡å¼å¯ä½œä¸ºå¤§é‡å›è°ƒå‡½æ•°çš„æ›¿ä»£æ–¹æ¡ˆ</li>
</ul>
<h3 data-id="heading-5">3. useContext + useMemoï¼šä¸Šä¸‹æ–‡ä¼˜åŒ–çš„é»„é‡‘ç»„åˆ</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title function_">createContext</span>();

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// âŒ Contextå€¼å˜åŒ–å¯¼è‡´æ‰€æœ‰æ¶ˆè´¹è€…é‡æ¸²æŸ“</span>
  <span class="hljs-comment">// return &lt;UserContext.Provider value={{ user, setUser }}&gt;</span>

  <span class="hljs-comment">// âœ… MemoåŒ–ä¸Šä¸‹æ–‡å€¼å¯¹è±¡</span>
	<span class="hljs-keyword">const</span> contextValue = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> ({ user, setUser }), [user]);

	<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{contextValue}</span>&gt;</span>
    {/* children */}
	<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>
}
</code></pre>
<p><strong>æ¶æ„å±‚é¢çš„æ€è€ƒï¼š</strong></p>
<ul>
<li>Contextåº”å½“éµå¾ªæœ€å°åŒ–æ›´æ–°åŸåˆ™ï¼ˆPrinciple of Least Updatesï¼‰</li>
<li>Reduxç­‰çŠ¶æ€åº“å†…éƒ¨ä¹Ÿé‡‡ç”¨ç±»ä¼¼ç­–ç•¥å®ç°é«˜æ•ˆæ›´æ–°</li>
<li>React DevToolså¯æŸ¥çœ‹ä¸Šä¸‹æ–‡æ›´æ–°çš„å½±å“èŒƒå›´</li>
</ul>
<p><strong>çœŸå®åœºæ™¯æ•°æ®ï¼š</strong>
æŸSaaSå¹³å°ä»ªè¡¨ç›˜é€šè¿‡æ­¤ä¼˜åŒ–å°†ä¸Šä¸‹æ–‡ç›¸å…³é‡æ¸²æŸ“å‡å°‘72%ã€‚</p>
<h3 data-id="heading-6">4. useReducer vs useStateï¼šçŠ¶æ€ç®¡ç†çš„æ­£ç¡®é€‰æ‹©</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âŒ useStateå¯¼è‡´å¤šæ¬¡æ›´æ–°å’Œæ¸²æŸ“æ³¢å³°ï¼ˆrender peaksï¼‰</span>
<span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>(initialState);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAction</span> = (<span class="hljs-params"/>) =&gt; {
	<span class="hljs-title function_">setState</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({ ...prev, <span class="hljs-attr">a</span>: newA }));
	<span class="hljs-title function_">setState</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({ ...prev, <span class="hljs-attr">b</span>: newB }));
};

<span class="hljs-comment">// âœ… useReduceræ‰¹é‡å¤„ç†ç›¸å…³çŠ¶æ€å˜æ›´</span>
<span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialState);
<span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'MULTI_UPDATE'</span>, <span class="hljs-attr">payload</span>: { <span class="hljs-attr">a</span>: newA, <span class="hljs-attr">b</span>: newB } });
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”æµ‹è¯•ï¼š</strong></p>

























<table><thead><tr><th>Metric</th><th>useState</th><th>useReducer</th></tr></thead><tbody><tr><td>Renderæ¬¡æ•°</td><td>N</td><td>â‰¤N</td></tr><tr><td>GCå‹åŠ›</td><td>High</td><td>Medium</td></tr><tr><td>TSç±»å‹å®‰å…¨</td><td>Medium</td><td>High</td></tr></tbody></table>
<p><strong>é€‚ç”¨åœºæ™¯åˆ¤æ–­çŸ©é˜µï¼š</strong></p>
<ol>
<li>
<blockquote>
<p>3ä¸ªå…³è”çŠ¶æ€ â†’ useReducerä¼˜å…ˆè€ƒè™‘</p>
</blockquote>
</li>
<li><strong>å¤æ‚çŠ¶æ€é€»è¾‘ â†’ Reduceræ¨¡å¼æ›´ä¼˜</strong></li>
<li><strong>é«˜é¢‘æ›´æ–° â†’ Reduceråˆå¹¶ä¼˜åŠ¿æ˜æ˜¾</strong></li>
</ol>
<h3 data-id="heading-7"><em>5.</em> <em>useRef</em> <em>+</em> <em>useEffect</em> <em>/</em> <em>useLayoutEffect</em> <em>DOMæ“ä½œçš„è‰ºæœ¯</em></h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ResizablePanel</span>(<span class="hljs-params"/>) {
	<span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);
	
	<span class="hljs-title function_">useLayoutEffect</span>(<span class="hljs-function">() =&gt;</span> {
		<span class="hljs-keyword">const</span> element = ref.<span class="hljs-property">current</span>;
		<span class="hljs-keyword">const</span> resizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function"><span class="hljs-params">entries</span> =&gt;</span> {
			<span class="hljs-comment">// DOMæµ‹é‡å’Œå¸ƒå±€è°ƒæ•´é€»è¾‘...</span>
		});
		
		resizeObserver.<span class="hljs-title function_">observe</span>(element);
		<span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> resizeObserver.<span class="hljs-title function_">unobserve</span>(element); 
	}, []);

	<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> /&gt;</span></span>;
}
</code></pre>
<p>æµè§ˆå™¨å·¥ä½œåŸç†è§†è§’ï¼š</p>
<ol>
<li><strong>é¿å…"å¸ƒå±€æŠ–åŠ¨"ï¼ˆLayout Thrashingï¼‰</strong>: <code>useLayoutEffect</code>åœ¨æµè§ˆå™¨ç»˜åˆ¶å‰åŒæ­¥æ‰§è¡Œ</li>
<li><strong>IntersectionObserver/ResizeObserver APIçš„æœ€ä½³æ‹æ¡£</strong>: Refæä¾›ç¨³å®šçš„DOMå¼•ç”¨<br/>
3.<strong>åŠ¨ç”»æ€§èƒ½æå‡å…³é”®</strong>: requestAnimationFrameä¸RefååŒå·¥ä½œ</li>
</ol>
<p>å·¥ç¨‹å®è·µå»ºè®®ï¼š
1.<strong>SSRç¯å¢ƒç‰¹æ®Šå¤„ç†</strong>: typeof windowæ£€æŸ¥ + useEffectæ›¿ä»£<br/>
2.<strong>TypeScriptæ³›å‹çº¦æŸ</strong>: <code>useRef&lt;HTMLDivElement&gt;(null)</code>æé«˜ç±»å‹å®‰å…¨</p>
<p>##æ€»ç»“</p>
<p>é€šè¿‡å¯¹è¿™äº”ä¸ªHooksæŠ€å·§çš„ç³»ç»Ÿæ€§åº”ç”¨â€”â€”ä»åŸºç¡€çš„<code>useMemo/useCallback</code>åˆ°è¿›é˜¶çš„ä¸Šä¸‹æ–‡ä¼˜åŒ–å’ŒReduceræ¨¡å¼â€”â€”æˆ‘ä»¬æ„å»ºäº†ä¸€å¥—å®Œæ•´çš„Reactæ€§èƒ½é˜²æŠ¤ä½“ç³»ã€‚è¿™äº›æ–¹æ³•å…±åŒæ„æˆäº†ä¸€ä¸ªæ¸è¿›å¼çš„ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<p>1.<strong>åˆçº§ä¼˜åŒ–</strong>: <code>å•ä¸ªç»„ä»¶çš„è®°å¿†åŒ–æ‰‹æ®µ</code><br/>
2.<strong>ä¸­çº§æ¶æ„</strong>: <code>è·¨ç»„ä»¶çš„å¼•ç”¨ç¨³å®šæ€§æ§åˆ¶</code><br/>
3.<strong>é«˜çº§æ¨¡å¼</strong>: <code>å…¨å±€çŠ¶æ€çš„æ‰¹å¤„ç†å’Œç²¾ç¡®æ›´æ–°</code></p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯,<strong>çœŸæ­£çš„æ€§èƒ½å·¥ç¨‹æ˜¯åº¦é‡é©±åŠ¨çš„ï¼ˆMetrics-Drivenï¼‰</strong>,å»ºè®®ç»“åˆä»¥ä¸‹å·¥å…·é“¾å»ºç«‹å®Œæ•´çš„ç›‘æ§é—­ç¯ï¼š</p>
<p>â€¢ <strong>React DevTools Profiler</strong>å®šä½å…·ä½“é—®é¢˜ç»„ä»¶<br/>
â€¢ <strong>Chrome Performance Tabåˆ†æä¸»çº¿ç¨‹æ´»åŠ¨</strong>(Long TasksæŒ‡æ ‡ç‰¹åˆ«å…³é”®)<br/>
â€¢ <strong>Sentry/BrowserStackè¿›è¡ŒçœŸå®ç”¨æˆ·ç›‘æ§</strong>(é‡‡é›†FCP/TTIç­‰æ ¸å¿ƒWeb Vitals)</p>
<p>æœ€åè¦å¼ºè°ƒçš„æ˜¯,<strong>æ²¡æœ‰æ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„é“¶å¼¹</strong>,æœ¬æ–‡ä»‹ç»çš„æ¯ä¸ªæŠ€æœ¯ç‚¹éƒ½éœ€è¦ç»“åˆå®é™…åœºæ™¯è¿›è¡Œè¯„ä¼°ã€‚å½“ä½ åœ¨ä»£ç ä¸­çœ‹åˆ°é¢‘ç¹å‡ºç°çš„<code>dependency array</code>æ—¶,å°±è¯¥åœä¸‹æ¥æ€è€ƒ:<strong>è¿™æ˜¯å¦æ˜¯æœ€ä¼˜é›…çš„çŠ¶æ€å…³ç³»å»ºæ¨¡ï¼Ÿæ˜¯å¦æœ‰æ›´åˆç†çš„ç»„ä»¶å±‚çº§åˆ’åˆ†ï¼Ÿ</strong></p>
<p>æ­£å¦‚Reactæ ¸å¿ƒå›¢é˜Ÿæˆå‘˜Dan Abramovæ‰€è¨€ï¼š"Performance is not about micro optimizations,but about having the right mental model."(<strong>æ€§èƒ½ä¼˜åŒ–çš„æœ¬è´¨ä¸æ˜¯å¾®è§‚è°ƒä¼˜è€Œæ˜¯å»ºç«‹æ­£ç¡®çš„æ€ç»´æ¨¡å‹</strong>)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SEOå¬ä¸æ‡‚ï¼Ÿçœ‹å®Œè¿™ç¯‡ä½ æ˜å¤©å°±èƒ½ä¼˜åŒ–ç½‘ç«™äº†]]></title>    <link>https://juejin.cn/post/7577411657392635946</link>    <guid>https://juejin.cn/post/7577411657392635946</guid>    <pubDate>2025-11-28T04:23:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577411657392635946" data-draft-id="7576861477267193875" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SEOå¬ä¸æ‡‚ï¼Ÿçœ‹å®Œè¿™ç¯‡ä½ æ˜å¤©å°±èƒ½ä¼˜åŒ–ç½‘ç«™äº†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-28T04:23:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯æ¢ç´¢å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2735240657517816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SEOå¬ä¸æ‡‚ï¼Ÿçœ‹å®Œè¿™ç¯‡ä½ æ˜å¤©å°±èƒ½ä¼˜åŒ–ç½‘ç«™äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240657517816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯æ¢ç´¢å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T04:23:00.000Z" title="Fri Nov 28 2025 04:23:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b873bd06ec504994a608585073409cac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5o6i57Si5a62:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764908580&amp;x-signature=hbafmy5HgUU4NGSwSSUC6LQfBz8%3D" alt="SEO.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>å»å¹´æœ‰ä¸ªåšæ‰‹å·¥çš„æœ‹å‹å°ç‹è·Ÿæˆ‘åæ§½ï¼Œè¯´ä»–èŠ±äº†ä¸‰ä¸ªæœˆæ­å»ºäº†ä¸€ä¸ªè‡ªå·±çš„ä½œå“å±•ç¤ºç½‘ç«™ï¼Œè®¾è®¡ç‰¹åˆ«ç”¨å¿ƒï¼Œäº§å“ç…§ç‰‡ä¹Ÿæ‹å¾—å¾ˆä¸“ä¸šã€‚ç»“æœå‘¢ï¼Ÿæ¯ä¸ªæœˆè®¿é—®é‡åªæœ‰å¯æ€œçš„100å¤šäººï¼Œè¿˜æœ‰ä¸€å¤§åŠæ˜¯ä»–è‡ªå·±ç‚¹è¿›å»çš„ã€‚ä»–å½“æ—¶ç‰¹åˆ«æ²®ä¸§ï¼Œé—®æˆ‘ï¼š"æ˜¯ä¸æ˜¯æˆ‘çš„ä¸œè¥¿ä¸å¤Ÿå¥½ï¼Ÿ"</p>
<p>å…¶å®ä¸æ˜¯ã€‚æˆ‘çœ‹äº†ä»–çš„ç½‘ç«™ï¼Œå‘ç°é—®é¢˜æ ¹æœ¬ä¸åœ¨å†…å®¹è´¨é‡ï¼Œè€Œæ˜¯SEOåšå¾—å¤ªå·®äº†â€”â€”æ›´ç›´ç™½ç‚¹è¯´ï¼Œæœç´¢å¼•æ“æ ¹æœ¬æ‰¾ä¸åˆ°ä»–çš„ç½‘ç«™ã€‚åæ¥æˆ‘æ•™ä»–åšäº†ä¸€äº›æœ€åŸºæœ¬çš„ä¼˜åŒ–ï¼Œä¸¤ä¸ªæœˆåæœˆè®¿é—®é‡æ¶¨åˆ°äº†æ¥è¿‘10000ã€‚ä»–å…´å¥‹åœ°ç»™æˆ‘å‘æ¶ˆæ¯ï¼š"è¿™SEOä¹Ÿå¤ªç¥äº†å§ï¼"</p>
<p>è¯´å®è¯ï¼ŒSEOå¬èµ·æ¥æŒºé«˜æ·±ï¼Œä»€ä¹ˆ"çˆ¬è™«"ã€"ç´¢å¼•"ã€"æƒé‡"ä¸€å †ä¸“ä¸šæœ¯è¯­ã€‚ä½†æˆ‘ä»Šå¤©æƒ³å‘Šè¯‰ä½ çš„æ˜¯ï¼š<strong>SEOå…¶å®æ²¡é‚£ä¹ˆç¥ç§˜ï¼Œå¾ˆå¤šæŠ€å·§ä»Šå¤©å­¦äº†æ˜å¤©å°±èƒ½ç”¨ã€‚</strong></p>
<p>è¿™ç¯‡æ–‡ç« ä¼šç”¨æœ€æ¥åœ°æ°”çš„è¯è§£é‡ŠSEOæ˜¯ä»€ä¹ˆï¼Œç„¶åç»™ä½ 5ä¸ªé…äº†çœŸå®æ¡ˆä¾‹çš„ä¼˜åŒ–æŠ€å·§ã€‚çœ‹å®Œä½ å°±çŸ¥é“æ€ä¹ˆè®©è‡ªå·±çš„ç½‘ç«™åœ¨æœç´¢ç»“æœé‡Œæ’å¾—æ›´é å‰ï¼Œè¿˜èƒ½é¿å¼€3ä¸ªæ–°æ‰‹æœ€å®¹æ˜“è¸©çš„å‘ã€‚</p>
<h2 data-id="heading-1">SEOåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆç™½è¯è§£é‡Šï¼‰</h2>
<p>æˆ‘ä»¬å…ˆä¸è®²é‚£äº›æœ¯è¯­ï¼Œæˆ‘ç”¨ä¸ªç®€å•çš„æ¯”å–»ã€‚</p>
<p>ä½ å»å›¾ä¹¦é¦†æ‰¾ä¹¦ï¼Œæ˜¯ä¸æ˜¯è¦ä¹ˆé—®ç®¡ç†å‘˜ï¼Œè¦ä¹ˆæŸ¥ç”µè„‘ç›®å½•ï¼Ÿæœç´¢å¼•æ“å°±åƒè¿™ä¸ªå›¾ä¹¦é¦†ç®¡ç†å‘˜ï¼Œå®ƒçš„å·¥ä½œæ˜¯å¸®ç”¨æˆ·æ‰¾åˆ°æœ€åˆé€‚çš„"ä¹¦"ï¼ˆç½‘é¡µï¼‰ã€‚é‚£é—®é¢˜æ¥äº†ï¼šå‡­ä»€ä¹ˆæŠŠä½ çš„ç½‘é¡µæ¨èç»™ç”¨æˆ·ï¼Œè€Œä¸æ˜¯åˆ«äººçš„ï¼Ÿ</p>
<p><strong>è¿™å°±æ˜¯SEOè¦è§£å†³çš„é—®é¢˜â€”â€”è®©æœç´¢å¼•æ“æ›´å®¹æ˜“"æ‰¾åˆ°"å’Œ"æ¨è"ä½ çš„å†…å®¹ã€‚</strong></p>
<p>å…·ä½“ç‚¹è¯´ï¼Œå½“ä½ åœ¨ç™¾åº¦æˆ–Googleæœç´¢"åŒ—äº¬å¥½åƒçš„ç«é”…"ï¼Œä¸ºä»€ä¹ˆæµ·åº•æã€å°é¾™åè¿™äº›é¤å…æ’åœ¨å‰é¢ï¼Ÿä¸åªæ˜¯å› ä¸ºå®ƒä»¬æœ‰åï¼Œæ›´é‡è¦çš„æ˜¯å®ƒä»¬çš„ç½‘ç«™åšäº†ä¼˜åŒ–ï¼šæ ‡é¢˜å†™å¾—æ¸…æ¥šã€å†…å®¹è¯¦ç»†ã€ç”¨æˆ·è¯„ä»·å¤šã€ç½‘ç«™æ‰“å¼€é€Ÿåº¦å¿«ã€‚æœç´¢å¼•æ“ä¼šæ ¹æ®è¿™äº›ä¿¡å·åˆ¤æ–­ï¼š"å—¯ï¼Œè¿™å®¶åº—åº”è¯¥æ¯”è¾ƒé è°±ï¼Œæ¨èç»™ç”¨æˆ·å§ã€‚"</p>
<p>Googleåœ¨2022å¹´æ›´æ–°äº†ä¸€ä¸ªæŒºé‡è¦çš„æ ‡å‡†ï¼Œå«E-E-A-Tã€‚æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™å››ä¸ªå­—æ¯ä¹Ÿæ‡µäº†ï¼Œåæ¥å‘ç°å…¶å®å¥½ç†è§£ï¼š</p>
<ul>
<li><strong>Experienceï¼ˆç»éªŒï¼‰</strong>ï¼šä½ æœ‰æ²¡æœ‰çœŸå®ä½“éªŒè¿‡ï¼Ÿæ¯”å¦‚ä½ å†™"åŒ—äº¬ç«é”…æ¨è"ï¼Œä½ çœŸçš„å»åƒè¿‡å—ï¼Ÿ</li>
<li><strong>Expertiseï¼ˆä¸“ä¸šï¼‰</strong>ï¼šä½ åœ¨è¿™ä¸ªé¢†åŸŸæ‡‚ä¸æ‡‚è¡Œï¼Ÿ</li>
<li><strong>Authorityï¼ˆæƒå¨ï¼‰</strong>ï¼šåˆ«äººè®¤ä¸è®¤å¯ä½ ï¼Ÿæœ‰æ²¡æœ‰å…¶ä»–ç½‘ç«™é“¾æ¥åˆ°ä½ çš„å†…å®¹ï¼Ÿ</li>
<li><strong>Trustï¼ˆå¯ä¿¡åº¦ï¼‰</strong>ï¼šä½ çš„ä¿¡æ¯å‡†ç¡®å—ï¼Ÿæœ‰æ²¡æœ‰è¯¯å¯¼ç”¨æˆ·ï¼Ÿ</li>
</ul>
<p>æˆ‘è‡ªå·±ç†è§£ä¸‹æ¥ï¼Œå°±æ˜¯ä¸€å¥è¯ï¼š<strong>æœç´¢å¼•æ“ç°åœ¨è¶Šæ¥è¶Šèªæ˜ï¼Œå®ƒè¦çš„æ˜¯çœŸæ­£å¯¹ç”¨æˆ·æœ‰å¸®åŠ©çš„å†…å®¹ï¼Œè€Œä¸æ˜¯é‚£äº›ä¸“é—¨ä¸ºäº†æ’åç¡¬å‡‘å‡ºæ¥çš„æ–‡ç« ã€‚</strong></p>
<h2 data-id="heading-2">2025å¹´æœ€é‡è¦çš„SEOè¶‹åŠ¿</h2>
<p>è€å®è®²ï¼ŒSEOè¿™ä¸œè¥¿ä¸€ç›´åœ¨å˜ã€‚æˆ‘è®°å¾—2020å¹´çš„æ—¶å€™ï¼Œè¿˜æœ‰äººåœ¨æ‹¼å‘½å †å…³é”®è¯ï¼Œç°åœ¨è¿™æ‹›æ—©å°±ä¸ç®¡ç”¨äº†ï¼Œåè€Œä¼šè¢«æœç´¢å¼•æ“æƒ©ç½šã€‚</p>
<p>2024å¹´3æœˆï¼ŒGoogleåšäº†ä¸€æ¬¡æŒºå¤§çš„æ ¸å¿ƒæ›´æ–°ï¼Œç›®æ ‡æ˜¯å‡å°‘40%çš„"åƒåœ¾å†…å®¹"ã€‚ä»€ä¹ˆå«åƒåœ¾å†…å®¹ï¼Ÿå°±æ˜¯é‚£ç§çœ‹èµ·æ¥åƒæ–‡ç« ï¼Œä½†è¯»èµ·æ¥å®Œå…¨æ²¡è¥å…»ï¼Œçº¯ç²¹ä¸ºäº†å‡‘å­—æ•°çš„ä¸œè¥¿ã€‚è¿™ä¸ªæ›´æ–°ä¹‹åï¼Œå¾ˆå¤šä½è´¨é‡çš„å†…å®¹ç½‘ç«™æ’åç›´æ¥æ‰æ²¡äº†ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªè¶‹åŠ¿ä½ å¿…é¡»çŸ¥é“ï¼š<strong>ç½‘ç«™é€Ÿåº¦ç°åœ¨æˆäº†æ’åå› ç´ </strong>ã€‚Googleæ¨å‡ºäº†ä¸€ä¸ªå«Core Web Vitalsçš„æŒ‡æ ‡ï¼Œå¬èµ·æ¥æŒºæŠ€æœ¯å¯¹å§ï¼Ÿå…¶å®è¯´ç™½äº†å°±æ˜¯è¡¡é‡"ä½ çš„ç½‘é¡µå¡ä¸å¡"ã€‚å…·ä½“æ¥è¯´æœ‰ä¸‰ä¸ªæŒ‡æ ‡ï¼š</p>
<ul>
<li><strong>LCPï¼ˆæœ€å¤§å†…å®¹ç»˜åˆ¶ï¼‰</strong>ï¼šç½‘é¡µä¸»è¦å†…å®¹åŠ è½½å®Œæˆè¦å¤šä¹…ï¼Ÿç†æƒ³çŠ¶æ€æ˜¯2.5ç§’ä»¥å†…</li>
<li><strong>FIDï¼ˆé¦–æ¬¡äº¤äº’å»¶è¿Ÿï¼‰</strong>ï¼šç”¨æˆ·ç‚¹å‡»æŒ‰é’®åï¼Œç½‘é¡µååº”å¿«ä¸å¿«ï¼Ÿåº”è¯¥åœ¨100æ¯«ç§’ä»¥å†…</li>
<li><strong>CLSï¼ˆç´¯ç§¯å¸ƒå±€åç§»ï¼‰</strong>ï¼šä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡é‚£ç§æƒ…å†µâ€”â€”åˆšæƒ³ç‚¹ä¸ªæŒ‰é’®ï¼Œé¡µé¢çªç„¶è·³äº†ä¸€ä¸‹ï¼Œä½ ç‚¹åˆ°å¹¿å‘Šä¸Šäº†ï¼Ÿè¿™å°±æ˜¯å¸ƒå±€åç§»ï¼Œè¶Šå°‘è¶Šå¥½</li>
</ul>
<p>æˆ‘æœ‰ä¸ªåšç”µå•†çš„æœ‹å‹ï¼Œä»–çš„ç½‘ç«™ä¹‹å‰LCPæ˜¯4.5ç§’ï¼Œç”¨æˆ·è·³å‡ºç‡ï¼ˆå°±æ˜¯æ‰“å¼€åé©¬ä¸Šå…³æ‰çš„æ¯”ä¾‹ï¼‰é«˜è¾¾62%ã€‚åæ¥ä»–ä¼˜åŒ–äº†ä¸€ä¸‹å›¾ç‰‡å‹ç¼©ï¼Œç”¨äº†CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰ï¼ŒLCPé™åˆ°äº†2.1ç§’ï¼Œè·³å‡ºç‡ç›´æ¥é™åˆ°35%ï¼Œè½¬åŒ–ç‡æå‡äº†40%ã€‚ä½ è¯´è¿™é‡ä¸é‡è¦ï¼Ÿ</p>
<p>å¦å¤–ï¼ŒAIå¯¹SEOçš„å½±å“ä¹Ÿè¶Šæ¥è¶Šå¤§ã€‚ç°åœ¨æœç´¢å¼•æ“èƒ½æ›´å¥½åœ°ç†è§£ç”¨æˆ·åˆ°åº•æƒ³è¦ä»€ä¹ˆã€‚æ¯”å¦‚ä½ æœ"æ€ä¹ˆè®©å­©å­çˆ±ä¸Šé˜…è¯»"ï¼Œå®ƒä¸åªæ˜¯åŒ¹é…å…³é”®è¯ï¼Œè€Œæ˜¯çœŸçš„ç†è§£ä½ æ˜¯ä¸ªå®¶é•¿ï¼Œæƒ³æ‰¾å®ç”¨çš„è‚²å„¿æ–¹æ³•ã€‚æ‰€ä»¥ç°åœ¨åšå†…å®¹ï¼Œä¸èƒ½åªæƒ³ç€å¡å…³é”®è¯ï¼Œè¦çœŸçš„å»è§£å†³ç”¨æˆ·çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-3">5ä¸ªç«‹å³å¯ç”¨çš„SEOæŠ€å·§ï¼ˆé‡ç‚¹æ¥äº†ï¼‰</h2>
<h3 data-id="heading-4">æŠ€å·§1ï¼šå…³é”®è¯ä¸æ˜¯"å¡è¿›å»"çš„ï¼Œæ˜¯"èè¿›å»"çš„</h3>
<p>æˆ‘è§è¿‡å¤ªå¤šæ–°æ‰‹çŠ¯è¿™ä¸ªé”™è¯¯äº†ã€‚æˆ‘è‡ªå·±åˆšå¼€å§‹åšç½‘ç«™é‚£ä¼šå„¿ï¼Œä¹Ÿä»¥ä¸ºSEOå°±æ˜¯æŠŠå…³é”®è¯å¾€æ–‡ç« é‡Œå¤šå¡å‡ éã€‚ç»“æœå‘¢ï¼Ÿæ–‡ç« æ ‡é¢˜å†™æˆ"SEO SEO SEOä¼˜åŒ–æŠ€å·§å¤§å…¨"ï¼Œè¯»èµ·æ¥å®Œå…¨ä¸é€šé¡ºï¼Œç”¨æˆ·çœ‹äº†å°±æƒ³å…³æ‰ã€‚</p>
<p><strong>æ­£ç¡®çš„åšæ³•æ˜¯ä»€ä¹ˆï¼Ÿç”¨é•¿å°¾å…³é”®è¯ï¼Œè‡ªç„¶åœ°èå…¥å†…å®¹ã€‚</strong></p>
<p>ä»€ä¹ˆæ˜¯é•¿å°¾å…³é”®è¯ï¼Ÿå°±æ˜¯é‚£ç§æ›´å…·ä½“ã€æ›´é•¿çš„æœç´¢è¯ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>å¤§è¯ï¼š"å·èœ"ï¼ˆç«äº‰æ¿€çƒˆï¼Œå¾ˆéš¾æ’ä¸Šå»ï¼‰</li>
<li>é•¿å°¾è¯ï¼š"ä¸Šç­æ—15åˆ†é’Ÿèƒ½åšçš„å·èœå®¶å¸¸èœ"ï¼ˆç«äº‰å°ï¼Œè€Œä¸”æœè¿™ä¸ªçš„äººæ„å›¾æ˜ç¡®ï¼‰</li>
</ul>
<p>æˆ‘æœ‰ä¸ªå†™ç¾é£Ÿçš„æœ‹å‹ï¼ŒåŸæ¥å¥¹çš„æ–‡ç« æ ‡é¢˜éƒ½æ˜¯"å·èœæ¨è"ã€"å·èœåšæ³•"è¿™ç§ã€‚åæ¥æ”¹æˆ"ä¸Šç­æ—15åˆ†é’Ÿèƒ½åšçš„å·èœå®¶å¸¸èœ"ã€"æ–°æ‰‹ä¹Ÿèƒ½å­¦ä¼šçš„éº»å©†è±†è…"ï¼Œç»“æœæµé‡æ¶¨äº†3å€ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæœç´¢è¿™äº›é•¿å°¾è¯çš„äººï¼Œå°±æ˜¯çœŸçš„æƒ³å­¦åšèœçš„ï¼Œè€Œä¸æ˜¯éšä¾¿é€›é€›ã€‚</p>
<p>è¿˜æœ‰ä¸ªæ¦‚å¿µå«"å…³é”®è¯é›†ç¾¤"ï¼Œå¬èµ·æ¥æŒºä¸“ä¸šï¼Œå…¶å®å°±æ˜¯ä¸€ç¯‡æ–‡ç« è§£å†³ä¸€ç±»ç›¸å…³é—®é¢˜ã€‚æ¯”å¦‚ä½ å†™"å¦‚ä½•é€‰è´­ç¬”è®°æœ¬ç”µè„‘"ï¼Œæ–‡ç« é‡Œå¯ä»¥è‡ªç„¶åœ°æ¶‰åŠ"å­¦ç”Ÿç¬”è®°æœ¬æ¨è"ã€"æ¸¸æˆæœ¬æ€§èƒ½å¯¹æ¯”"ã€"è½»è–„æœ¬ç»­èˆªæµ‹è¯•"è¿™äº›ç›¸å…³è¯ã€‚æœç´¢å¼•æ“ç°åœ¨æŒºèªæ˜ï¼Œèƒ½ç†è§£è¿™äº›è¯æ˜¯ç›¸å…³çš„ï¼Œä¼šç»™ä½ çš„æ–‡ç« æ›´é«˜çš„æƒé‡ã€‚</p>
<p><strong>é”™è¯¯åšæ³•</strong>ï¼šæ–‡ç« æ ‡é¢˜"SEO SEO SEOä¼˜åŒ–æŠ€å·§"
<strong>æ­£ç¡®åšæ³•</strong>ï¼šæ ‡é¢˜"æ–°æ‰‹ç½‘ç«™æ²¡æµé‡ï¼Ÿè¿™5ä¸ªSEOæŠ€å·§å¸®ä½ è§£å†³"</p>
<p>çœ‹å‡ºåŒºåˆ«äº†å—ï¼Ÿç¬¬äºŒä¸ªæ ‡é¢˜è‡ªç„¶ã€æœ‰å¸å¼•åŠ›ï¼Œè€Œä¸”è§£å†³äº†å…·ä½“é—®é¢˜ã€‚å…³é”®è¯"SEO"å’Œ"ä¼˜åŒ–"éƒ½åœ¨é‡Œé¢ï¼Œä½†è¯»èµ·æ¥å®Œå…¨ä¸ç”Ÿç¡¬ã€‚</p>
<h3 data-id="heading-5">æŠ€å·§2ï¼šæ ‡é¢˜å’Œæè¿°ï¼Œå†³å®šç”¨æˆ·ç‚¹ä¸ç‚¹ä½ </h3>
<p>è¯´çœŸçš„ï¼Œè¿™ä¸ªå¤ªé‡è¦äº†ã€‚</p>
<p>ä½ çš„ç½‘ç«™æ’åœ¨æœç´¢ç»“æœç¬¬ä¸‰ä½ï¼Œä½†å¦‚æœæ ‡é¢˜å†™å¾—ä¸å¸å¼•äººï¼Œç”¨æˆ·ç…§æ ·ä¸ç‚¹ä½ ï¼Œåè€Œç‚¹äº†æ’ç¬¬äº”çš„é‚£ä¸ªã€‚è¿™å°±æ˜¯CTRï¼ˆç‚¹å‡»ç‡ï¼‰çš„ä½œç”¨ã€‚</p>
<p>æˆ‘ç»™ä½ çœ‹ä¸ªå¯¹æ¯”ï¼š</p>
<ul>
<li><strong>æ™®é€šæ ‡é¢˜</strong>ï¼š"Pythonæ•™ç¨‹"</li>
<li><strong>ä¼˜åŒ–å</strong>ï¼š"Pythonå…¥é—¨æ•™ç¨‹ï¼š3å¤©å­¦ä¼šå†™ç¬¬ä¸€ä¸ªçˆ¬è™«ç¨‹åº"</li>
</ul>
<p>å“ªä¸ªæ›´å¸å¼•ä½ ï¼Ÿè‚¯å®šæ˜¯ç¬¬äºŒä¸ªå¯¹å§ã€‚å› ä¸ºå®ƒå‘Šè¯‰ä½ ï¼š1ï¼‰é€‚åˆå…¥é—¨æ–°æ‰‹ï¼›2ï¼‰åªéœ€è¦3å¤©ï¼›3ï¼‰èƒ½å­¦ä¼šå…·ä½“çš„ä¸œè¥¿ï¼ˆçˆ¬è™«ï¼‰ã€‚</p>
<p>æœ‰ä¸ªæ•°æ®æˆ‘å°è±¡ç‰¹åˆ«æ·±ï¼šæŸä¸ªæŠ€æœ¯åšå®¢æŠŠæ ‡é¢˜ä»"JavaScriptåŸºç¡€"æ”¹æˆ"JavaScripté›¶åŸºç¡€æ•™ç¨‹ï¼š7å¤©ä»å…¥é—¨åˆ°åšå‡ºç¬¬ä¸€ä¸ªç½‘é¡µ"ï¼ŒCTRä»1.5%ç›´æ¥è·³åˆ°6.2%ï¼Œæ’åè¿˜æå‡äº†ã€‚</p>
<p><strong>é‚£æ€ä¹ˆå†™å¥½æ ‡é¢˜å‘¢ï¼Ÿæˆ‘çš„ç»éªŒæ˜¯ï¼š</strong></p>
<ol>
<li>åŒ…å«æ ¸å¿ƒå…³é”®è¯ï¼ˆè®©æœç´¢å¼•æ“çŸ¥é“ä½ è®²ä»€ä¹ˆï¼‰</li>
<li>è¯´æ˜å…·ä½“ä»·å€¼ï¼ˆç”¨æˆ·èƒ½å¾—åˆ°ä»€ä¹ˆï¼‰</li>
<li>æœ€å¥½æœ‰æ•°å­—ï¼ˆ3ä¸ªæ–¹æ³•ã€5ä¸ªæŠ€å·§ï¼Œäººå¯¹æ•°å­—ç‰¹åˆ«æ•æ„Ÿï¼‰</li>
<li>ä¸è¦è¶…è¿‡60ä¸ªå­—ç¬¦ï¼ˆå¤ªé•¿ä¼šè¢«æˆªæ–­ï¼‰</li>
</ol>
<p>Meta Descriptionï¼ˆå°±æ˜¯æœç´¢ç»“æœä¸‹é¢çš„é‚£æ®µæè¿°æ–‡å­—ï¼‰ä¹Ÿä¸€æ ·é‡è¦ã€‚å¾ˆå¤šäººä¸å†™ï¼Œè®©æœç´¢å¼•æ“è‡ªå·±æŠ“å–ï¼Œç»“æœæŠ“çš„å†…å®¹ä¹±ä¸ƒå…«ç³Ÿã€‚ä½ åº”è¯¥è‡ªå·±å†™ä¸€æ®µ150å­—å·¦å³çš„æè¿°ï¼Œæ€»ç»“æ–‡ç« æ ¸å¿ƒä»·å€¼ï¼ŒåŒæ—¶è‡ªç„¶åœ°åŒ…å«å…³é”®è¯ã€‚</p>
<h3 data-id="heading-6">æŠ€å·§3ï¼šå†…å®¹è´¨é‡ &gt; å†…å®¹æ•°é‡ï¼ˆ10Xå†…å®¹ç­–ç•¥ï¼‰</h3>
<p>æˆ‘ä¹‹å‰ä¹Ÿé™·å…¥è¿‡è¯¯åŒºï¼Œè§‰å¾—æ–‡ç« è¶Šå¤šè¶Šå¥½ï¼Œä¸€å¤©å‘ä¸‰ç¯‡ã€‚ç»“æœå‘¢ï¼Ÿæ¯ç¯‡éƒ½å†™å¾—å¾ˆæµ…ï¼Œç”¨æˆ·çœ‹äº†æ²¡æ”¶è·ï¼Œæ’åä¹Ÿä¸Šä¸å»ã€‚</p>
<p>åæ¥æˆ‘äº†è§£åˆ°ä¸€ä¸ªæ¦‚å¿µå«"10Xå†…å®¹"â€”â€”å°±æ˜¯<strong>æ¯”ç«äº‰å¯¹æ‰‹å¥½10å€çš„å†…å®¹</strong>ã€‚å¬èµ·æ¥å¤¸å¼ å¯¹å§ï¼Ÿä½†è¿™æ˜¯çœŸçš„æœ‰æ•ˆã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ã€‚å‡è®¾ä½ è¦å†™"å¦‚ä½•é€‰è´­ç¬”è®°æœ¬ç”µè„‘"ï¼Œä½ æœä¸€ä¸‹è¿™ä¸ªå…³é”®è¯ï¼Œçœ‹çœ‹æ’åå‰é¢çš„æ–‡ç« éƒ½å†™äº†ä»€ä¹ˆã€‚</p>
<ul>
<li><strong>Aæ–‡ç« </strong>ï¼š500å­—ï¼Œæ³›æ³›è€Œè°ˆ"è¦çœ‹å¤„ç†å™¨ã€å†…å­˜ã€ç¡¬ç›˜"ï¼Œæ²¡æœ‰å…·ä½“å‹å·æ¨è</li>
<li><strong>Bæ–‡ç« </strong>ï¼š3000å­—ï¼ŒåŒ…å«15æ¬¾ç¬”è®°æœ¬å®æµ‹æ•°æ®ã€è¯¦ç»†çš„ä»·æ ¼å¯¹æ¯”è¡¨ã€æŒ‰ä½¿ç”¨åœºæ™¯ï¼ˆå­¦ç”Ÿã€è®¾è®¡ã€æ¸¸æˆï¼‰åˆ†ç±»æ¨èï¼Œè¿˜æœ‰è´­ä¹°é¿å‘æŒ‡å—</li>
</ul>
<p>ä½ è§‰å¾—å“ªä¸ªä¼šæ’åæ›´é«˜ï¼Ÿè‚¯å®šæ˜¯Bå¯¹å§ã€‚äº‹å®ä¹Ÿæ˜¯è¿™æ ·ï¼Œæˆ‘è§‚å¯Ÿäº†å¾ˆå¤šç«äº‰æ¿€çƒˆçš„å…³é”®è¯ï¼Œæ’åœ¨ç¬¬ä¸€é¡µçš„å‡ ä¹éƒ½æ˜¯è¿™ç§æ·±åº¦é•¿æ–‡ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯å¥½å†…å®¹ï¼Ÿæˆ‘çš„ç†è§£æ˜¯ï¼š</strong></p>
<ol>
<li><strong>æ·±åº¦</strong>ï¼šä¸åªåœç•™åœ¨è¡¨é¢ï¼Œæ·±å…¥è®²æ¸…æ¥šåŸç†å’Œç»†èŠ‚</li>
<li><strong>å®ç”¨</strong>ï¼šæœ‰å…·ä½“çš„æ“ä½œæ­¥éª¤ã€æ•°æ®å¯¹æ¯”ã€å·¥å…·æ¨è</li>
<li><strong>ç‹¬ç‰¹</strong>ï¼šæœ‰ä½ è‡ªå·±çš„ç»éªŒå’Œè§è§£ï¼Œä¸æ˜¯å¤åˆ¶ç²˜è´´åˆ«äººçš„å†…å®¹</li>
</ol>
<p>æˆ‘è‡ªå·±å†™æ–‡ç« çš„æ—¶å€™ï¼Œä¼šå…ˆæœç´¢è¿™ä¸ªå…³é”®è¯ï¼Œçœ‹æ’åå‰10çš„æ–‡ç« éƒ½è®²äº†ä»€ä¹ˆï¼Œç„¶åé—®è‡ªå·±ï¼š"æˆ‘èƒ½æä¾›ä»€ä¹ˆä»–ä»¬æ²¡æœ‰çš„ä»·å€¼ï¼Ÿ"å¯èƒ½æ˜¯æ›´æ–°çš„æ•°æ®ã€æ›´è¯¦ç»†çš„æ¡ˆä¾‹ï¼Œæˆ–è€…æ˜¯è‡ªå·±çš„å®è·µç»éªŒã€‚</p>
<p>è®°ä½ï¼š<strong>å®å¯ä¸€ä¸ªæœˆå‡ºä¸€ç¯‡é«˜è´¨é‡æ–‡ç« ï¼Œä¹Ÿä¸è¦ä¸€å‘¨å‡ºä¸ƒç¯‡æ°´æ–‡ã€‚</strong></p>
<h3 data-id="heading-7">æŠ€å·§4ï¼šå¤–é“¾ä¸æ˜¯ä¹°çš„ï¼Œæ˜¯"èµš"æ¥çš„</h3>
<p>å¤–é“¾è¿™ä¸ªä¸œè¥¿ï¼Œå¾ˆå¤šäººç†è§£é”™äº†ã€‚</p>
<p>æˆ‘åˆšå¼€å§‹çš„æ—¶å€™ï¼Œçœ‹åˆ°ä¸€äº›æœåŠ¡å•†è¯´"èŠ±1000å—ç»™ä½ 100ä¸ªå¤–é“¾"ï¼Œæˆ‘è¿˜å¿ƒåŠ¨äº†ã€‚å¹¸å¥½æˆ‘æ²¡ä¹°ï¼Œåæ¥æ‰çŸ¥é“é‚£äº›åƒåœ¾å¤–é“¾ä¸ä»…æ²¡ç”¨ï¼Œåè€Œå¯èƒ½å®³ä½ è¢«æœç´¢å¼•æ“æƒ©ç½šã€‚</p>
<p>**ä»€ä¹ˆæ˜¯é«˜è´¨é‡å¤–é“¾ï¼Ÿ**å°±æ˜¯æœ‰æƒå¨çš„ç½‘ç«™ä¸»åŠ¨é“¾æ¥åˆ°ä½ çš„å†…å®¹ï¼Œå› ä¸ºä½ çš„å†…å®¹ç¡®å®æœ‰ä»·å€¼ã€‚</p>
<p>æ¯”å¦‚ï¼ŒæŸä¸ªè¡Œä¸šç ”ç©¶æœºæ„å‘å¸ƒäº†ä¸€ä»½ç‹¬å®¶çš„å¸‚åœºåˆ†ææŠ¥å‘Šï¼Œæ•°æ®è¯¦å®ã€è§‚ç‚¹ç‹¬åˆ°ã€‚ç»“æœæœ‰50å¤šä¸ªè¡Œä¸šç½‘ç«™ã€æ–°é—»åª’ä½“å¼•ç”¨äº†è¿™ä»½æŠ¥å‘Šï¼Œå¹¶ä¸”é™„ä¸Šäº†æ¥æºé“¾æ¥ã€‚è¿™50ä¸ªå¤–é“¾çš„ä»·å€¼ï¼Œè¿œè¿œè¶…è¿‡ä½ èŠ±é’±ä¹°çš„1000ä¸ªåƒåœ¾é“¾æ¥ã€‚</p>
<p><strong>é‚£æ€ä¹ˆ"èµš"åˆ°å¤–é“¾å‘¢ï¼Ÿ</strong></p>
<ol>
<li><strong>åšçœŸæ­£æœ‰ä»·å€¼çš„å†…å®¹</strong>ï¼šè¡Œä¸šæŠ¥å‘Šã€æ·±åº¦æ•™ç¨‹ã€å®ç”¨å·¥å…·ï¼Œè¿™äº›ä¸œè¥¿åˆ«äººè‡ªç„¶ä¼šæƒ³åˆ†äº«</li>
<li><strong>å®¢åº§åšå®¢</strong>ï¼šåœ¨ç›¸å…³é¢†åŸŸçš„çŸ¥ååšå®¢ä¸Šå‘æ–‡ç« ï¼Œç½²åé‡Œå¸¦ä¸Šä½ ç½‘ç«™çš„é“¾æ¥</li>
<li><strong>è¡Œä¸šåˆä½œ</strong>ï¼šè·ŸåŒè¡Œäº’æ¢ä¼˜è´¨èµ„æºï¼Œå‰ææ˜¯åŒæ–¹å†…å®¹ç›¸å…³ä¸”è´¨é‡éƒ½è¿‡å…³</li>
<li><strong>ç¤¾äº¤åª’ä½“ä¼ æ’­</strong>ï¼šLinkedInã€Facebookã€çŸ¥ä¹è¿™äº›å¹³å°ä¹Ÿèƒ½å¸¦æ¥æµé‡ï¼Œè€Œä¸”æœ‰äº›å¹³å°çš„é“¾æ¥æƒé‡è¿˜ä¸é”™</li>
</ol>
<p>æˆ‘æœ‰ä¸ªæœ‹å‹åšäº†ä¸€ä¸ªç‰¹åˆ«å®ç”¨çš„Excelæ¨¡æ¿å·¥å…·ï¼Œå…è´¹åˆ†äº«å‡ºæ¥ï¼Œç»“æœè¢«å¾ˆå¤šåŠå…¬ç±»å…¬ä¼—å·ã€çŸ¥ä¹ä¸“æ å¼•ç”¨ï¼Œè‡ªç„¶å¸¦æ¥äº†å‡ ç™¾ä¸ªå¤–é“¾ï¼Œç½‘ç«™æƒé‡å™Œå™Œå¾€ä¸Šæ¶¨ã€‚</p>
<p><strong>é¿å‘æŒ‡å—</strong>ï¼šåƒä¸‡åˆ«èŠ±é’±ä¹°é‚£ç§æ‰¹é‡å¤–é“¾æœåŠ¡ã€‚æœç´¢å¼•æ“ç°åœ¨èƒ½è¯†åˆ«å‡ºæ¥ï¼Œä¸€æ—¦è¢«å‘ç°ï¼Œä½ çš„ç½‘ç«™å¯èƒ½ç›´æ¥è¢«é™æƒã€‚</p>
<h3 data-id="heading-8">æŠ€å·§5ï¼šæŠ€æœ¯ä¼˜åŒ–ï¼Œè®©ç½‘ç«™"è·‘å¾—å¿«"</h3>
<p>è¿™ä¸ªæŠ€å·§è¯´èµ·æ¥æœ‰ç‚¹æŠ€æœ¯ï¼Œä½†å…¶å®æ“ä½œèµ·æ¥ä¸éš¾ã€‚</p>
<p>æˆ‘å‰é¢æåˆ°è¿‡ï¼Œç½‘ç«™é€Ÿåº¦ç°åœ¨æ˜¯æ’åå› ç´ ã€‚ä½ æƒ³å•Šï¼Œç”¨æˆ·æ‰“å¼€ä¸€ä¸ªç½‘é¡µï¼Œç­‰äº†10ç§’è¿˜åœ¨åŠ è½½ï¼Œæ—©å°±çƒ¦äº†å…³æ‰äº†ã€‚Googleçš„æ•°æ®æ˜¾ç¤ºï¼Œç½‘é¡µåŠ è½½æ—¶é—´æ¯å¢åŠ 1ç§’ï¼Œè½¬åŒ–ç‡ä¸‹é™7%ã€‚</p>
<p><strong>ä½ å¯ä»¥åšè¿™å‡ ä»¶äº‹ï¼š</strong></p>
<ol>
<li>
<p><strong>å‹ç¼©å›¾ç‰‡</strong>ï¼šè¿™ä¸ªæœ€ç®€å•ä¹Ÿæœ€æœ‰æ•ˆã€‚å¾ˆå¤šäººä¸Šä¼ å›¾ç‰‡éƒ½æ˜¯åŸå›¾ï¼Œä¸€å¼ 5MBï¼Œç½‘é¡µå½“ç„¶æ…¢ã€‚ç”¨TinyPNGè¿™ç§å·¥å…·å‹ç¼©ä¸€ä¸‹ï¼Œç”»è´¨åŸºæœ¬æ²¡å½±å“ï¼Œå¤§å°èƒ½å‡å°‘70%</p>
</li>
<li>
<p><strong>ä½¿ç”¨CDN</strong>ï¼šCDNå°±æ˜¯å†…å®¹åˆ†å‘ç½‘ç»œï¼Œç®€å•è¯´å°±æ˜¯æŠŠä½ çš„ç½‘ç«™å†…å®¹åˆ†å¸ƒåˆ°å…¨å›½å„åœ°çš„æœåŠ¡å™¨ä¸Šã€‚ç”¨æˆ·è®¿é—®çš„æ—¶å€™ï¼Œè‡ªåŠ¨ä»æœ€è¿‘çš„æœåŠ¡å™¨åŠ è½½ï¼Œé€Ÿåº¦å½“ç„¶å¿«</p>
</li>
<li>
<p><strong>å‡å°‘JSå’ŒCSSæ–‡ä»¶</strong>ï¼šå¦‚æœä½ ç”¨WordPressæˆ–è€…å…¶ä»–å»ºç«™å·¥å…·ï¼Œå¾ˆå¯èƒ½åŠ è½½äº†ä¸€å †ç”¨ä¸åˆ°çš„è„šæœ¬æ–‡ä»¶ã€‚ç”¨ä¸€äº›ä¼˜åŒ–æ’ä»¶å¯ä»¥åˆå¹¶ã€å‹ç¼©è¿™äº›æ–‡ä»¶</p>
</li>
<li>
<p><strong>ç§»åŠ¨ç«¯é€‚é…</strong>ï¼šç°åœ¨è¶…è¿‡60%çš„æµé‡æ¥è‡ªæ‰‹æœºï¼Œå¦‚æœä½ çš„ç½‘ç«™åœ¨æ‰‹æœºä¸Šæ˜¾ç¤ºé”™ä¹±ã€æŒ‰é’®ç‚¹ä¸åˆ°ï¼Œç”¨æˆ·ä½“éªŒå·®ï¼Œæ’åè‚¯å®šä¸Šä¸å»</p>
</li>
</ol>
<p>æˆ‘ä¹‹å‰å¸®ä¸€ä¸ªåšæ•™è‚²çš„æœ‹å‹ä¼˜åŒ–è¿‡ç½‘ç«™ã€‚ä»–çš„ç½‘ç«™ä¹‹å‰LCPï¼ˆæœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´ï¼‰æ˜¯4.5ç§’ï¼Œç”¨æˆ·è·³å‡ºç‡62%ã€‚æˆ‘ä»¬åšäº†è¿™äº›ä¼˜åŒ–ï¼šæŠŠé¦–é¡µçš„å¤§å›¾ä»3MBå‹ç¼©åˆ°500KBï¼Œæ¢äº†ä¸ªæ›´å¿«çš„ä¸»æœºï¼Œç”¨ä¸Šäº†CDNï¼Œç»“æœLCPé™åˆ°2.1ç§’ï¼Œè·³å‡ºç‡é™åˆ°35%ï¼Œæœ€å…³é”®çš„æ˜¯è½¬åŒ–ç‡æå‡äº†40%ã€‚</p>
<p><strong>ä½ ä¸éœ€è¦æ˜¯æŠ€æœ¯å¤§ç¥ï¼Œå°±ç”¨è¿™ä¸ªç®€å•çš„æ£€æŸ¥æ¸…å•ï¼š</strong></p>
<ul>
<li>âœ“ æ‰€æœ‰å›¾ç‰‡éƒ½å‹ç¼©äº†å—ï¼Ÿ</li>
<li>âœ“ ç½‘ç«™åœ¨æ‰‹æœºä¸Šæ˜¾ç¤ºæ­£å¸¸å—ï¼Ÿ</li>
<li>âœ“ é¦–é¡µåŠ è½½æ—¶é—´åœ¨3ç§’ä»¥å†…å—ï¼Ÿï¼ˆç”¨Google PageSpeed Insightsæµ‹ä¸€ä¸‹ï¼‰</li>
<li>âœ“ æœ‰æ²¡æœ‰æ­»é“¾æ¥æˆ–404é”™è¯¯é¡µé¢ï¼Ÿ</li>
</ul>
<p>è¿™äº›åšå¥½äº†ï¼Œä½ çš„æŠ€æœ¯SEOåŸºæœ¬å°±åŠæ ¼äº†ã€‚</p>
<h2 data-id="heading-9">æ–°æ‰‹æœ€å®¹æ˜“è¸©çš„3ä¸ªå‘</h2>
<p>è¯´äº†è¿™ä¹ˆå¤šæŠ€å·§ï¼Œæˆ‘è¿˜æƒ³æé†’ä½ ä¸‰ä¸ªå¸¸è§çš„é”™è¯¯ï¼Œæˆ‘è‡ªå·±å½“åˆä¹Ÿè¸©è¿‡ã€‚</p>
<h3 data-id="heading-10">å‘1ï¼šè¿‡åº¦ä¼˜åŒ–ï¼ˆå…³é”®è¯å †ç Œï¼‰</h3>
<p>æœ‰ä¸ªåšæŠ¤è‚¤å“çš„è€æ¿ï¼Œå¬è¯´SEOé‡è¦ï¼Œå°±æŠŠå…³é”®è¯å¾€æ–‡ç« é‡ŒçŒ›å¡ã€‚æ ‡é¢˜æ˜¯"æŠ¤è‚¤å“æŠ¤è‚¤å“æ¨èæœ€å¥½çš„æŠ¤è‚¤å“"ï¼Œæ–‡ç« æ¯ä¸¤å¥è¯å°±å‡ºç°ä¸€æ¬¡"æŠ¤è‚¤å“"ã€‚ç»“æœå‘¢ï¼Ÿç½‘ç«™è¢«Googleé™æƒäº†ï¼Œæ’åä»ç¬¬ä¸€é¡µç›´æ¥æ‰åˆ°æ‰¾ä¸ç€ã€‚</p>
<p>**è®°ä½ï¼šå…³é”®è¯å¯†åº¦æ§åˆ¶åœ¨2-3%å°±å¤Ÿäº†ï¼Œæœ€é‡è¦çš„æ˜¯è‡ªç„¶ã€‚**å¦‚æœä½ è¯»ç€éƒ½è§‰å¾—åˆ«æ‰­ï¼Œæœç´¢å¼•æ“è‚¯å®šä¹Ÿè§‰å¾—ä¸å¯¹åŠ²ã€‚</p>
<h3 data-id="heading-11">å‘2ï¼šå¿½è§†ç”¨æˆ·ä½“éªŒï¼Œåªä¸ºSEOè€ŒSEO</h3>
<p>æˆ‘è§è¿‡ä¸€äº›æ–‡ç« ï¼Œæ˜æ˜æ˜¯å†™ç»™æœç´¢å¼•æ“çœ‹çš„ï¼Œä¸æ˜¯ç»™äººçœ‹çš„ã€‚é€šç¯‡éƒ½æ˜¯å…³é”®è¯å’Œæœ¯è¯­ï¼Œè¯»èµ·æ¥åƒæœºå™¨äººå†™çš„ï¼Œå®Œå…¨æ²¡æœ‰å¯è¯»æ€§ã€‚</p>
<p>è¿™å°±æœ¬æœ«å€’ç½®äº†ã€‚**SEOçš„æœ€ç»ˆç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯è®©çœŸå®çš„ç”¨æˆ·æ‰¾åˆ°ä½ çš„å†…å®¹ï¼Œå¹¶ä¸”è§‰å¾—æœ‰ç”¨ã€‚**å¦‚æœç”¨æˆ·ç‚¹è¿›æ¥çœ‹äº†10ç§’å°±å…³æ‰ï¼Œè·³å‡ºç‡é«˜å¾—å“äººï¼Œæœç´¢å¼•æ“ä¼šåˆ¤æ–­"è¿™å†…å®¹ä¸è¡Œ"ï¼Œä½ çš„æ’åç…§æ ·æ‰ã€‚</p>
<p>æ‰€ä»¥æˆ‘çš„å»ºè®®æ˜¯ï¼š**å…ˆå†™ç»™äººçœ‹ï¼Œå†è€ƒè™‘SEOã€‚**å†™å®Œä¹‹åå†è‡ªç„¶åœ°ä¼˜åŒ–ä¸€ä¸‹å…³é”®è¯ã€æ ‡é¢˜ï¼Œè€Œä¸æ˜¯ä¸ºäº†SEOç‰ºç‰²å¯è¯»æ€§ã€‚</p>
<h3 data-id="heading-12">å‘3ï¼šæœŸæœ›ç«‹ç«¿è§å½±</h3>
<p>è¿™ä¸ªæˆ‘å¤ªç†è§£äº†ã€‚æˆ‘åˆšå¼€å§‹åšSEOçš„æ—¶å€™ï¼Œä¼˜åŒ–äº†ä¸€å‘¨ï¼Œå¤©å¤©å»æŸ¥æ’åï¼Œå‘ç°ä¸€ç‚¹å˜åŒ–éƒ½æ²¡æœ‰ï¼Œå°±å¼€å§‹æ€€ç–‘"æ˜¯ä¸æ˜¯æ–¹æ³•ä¸å¯¹ï¼Ÿ"</p>
<p>åæ¥æˆ‘äº†è§£åˆ°ï¼Œ**SEOæ˜¯é•¿æœŸæŠ•èµ„ï¼Œé€šå¸¸éœ€è¦3-6ä¸ªæœˆæ‰èƒ½çœ‹åˆ°æ˜æ˜¾æ•ˆæœã€‚**è¿™ä¸æ˜¯ä¸€ä¸ªå¿«é€Ÿè§æ•ˆçš„ä¸œè¥¿ã€‚ä½ ä»Šå¤©å‘äº†ä¸€ç¯‡æ–‡ç« ï¼Œæœç´¢å¼•æ“è¦å…ˆçˆ¬å–ã€ç´¢å¼•ã€è¯„ä¼°ï¼Œç„¶åæ…¢æ…¢è°ƒæ•´æ’åã€‚</p>
<p>æˆ‘çš„å»ºè®®æ˜¯ï¼š**åˆ¶å®šä¸€ä¸ªè‡³å°‘3ä¸ªæœˆçš„SEOè®¡åˆ’ï¼ŒæŒç»­ä¼˜åŒ–ï¼Œåˆ«æ€¥ç€çœ‹çŸ­æœŸç»“æœã€‚**å¾ˆå¤šäººå°±æ˜¯å› ä¸ºå¤ªæ€¥ï¼Œä¸€ä¸¤å‘¨æ²¡æ•ˆæœå°±æ”¾å¼ƒäº†ï¼Œå¤ªå¯æƒœã€‚</p>
<h2 data-id="heading-13">æ€»ç»“ä¸€ä¸‹</h2>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™5ä¸ªæŠ€å·§ï¼š</p>
<ol>
<li><strong>å…³é”®è¯è¦"èè¿›å»"</strong>ï¼šç”¨é•¿å°¾å…³é”®è¯ï¼Œè‡ªç„¶åœ°èå…¥å†…å®¹ï¼Œåˆ«ç¡¬å¡</li>
<li><strong>æ ‡é¢˜å’Œæè¿°å¾ˆå…³é”®</strong>ï¼šå†³å®šç”¨æˆ·ç‚¹ä¸ç‚¹ä½ ï¼Œè¦å†™å¾—æœ‰å¸å¼•åŠ›</li>
<li><strong>è´¨é‡å¤§äºæ•°é‡</strong>ï¼šä¸€ç¯‡10Xå†…å®¹èƒœè¿‡åç¯‡æ°´æ–‡</li>
<li><strong>å¤–é“¾è¦"èµš"æ¥çš„</strong>ï¼šåšæœ‰ä»·å€¼çš„å†…å®¹ï¼Œè®©åˆ«äººä¸»åŠ¨é“¾æ¥ä½ </li>
<li><strong>æŠ€æœ¯ä¼˜åŒ–è¦åšå¥½</strong>ï¼šç½‘ç«™é€Ÿåº¦ã€ç§»åŠ¨ç«¯é€‚é…ï¼Œè¿™äº›åŸºç¡€å¿…é¡»æœ‰</li>
</ol>
<p>**SEOæ˜¯ä¸ªæŒç»­ä¼˜åŒ–çš„è¿‡ç¨‹ï¼Œä¸æ˜¯ä¸€æ¬¡æ€§å·¥ç¨‹ã€‚**ä½†å¥½æ¶ˆæ¯æ˜¯ï¼Œä½ ä¸éœ€è¦ä¸€æ¬¡æ€§åšå®Œæ‰€æœ‰äº‹æƒ…ã€‚ä»æœ€ç®€å•çš„å¼€å§‹ï¼š</p>
<ul>
<li>ä»Šå¤©å°±æ£€æŸ¥ä¸€ä¸‹ä½ çš„ç½‘ç«™æ ‡é¢˜æ˜¯å¦ä¼˜åŒ–äº†</li>
<li>ç”¨Google Search Consoleï¼ˆå…è´¹å·¥å…·ï¼‰çœ‹çœ‹è‡ªå·±çš„ç½‘ç«™æ•°æ®</li>
<li>ä¼˜å…ˆåšå¥½è¿™3ä»¶äº‹ï¼šå…³é”®è¯ã€æ ‡é¢˜ã€å†…å®¹è´¨é‡</li>
</ul>
<p>å¦‚æœä½ ç°åœ¨è¿˜æ²¡æœ‰ç½‘ç«™ä¹Ÿæ²¡å…³ç³»ï¼ŒæŠŠè¿™äº›æ¦‚å¿µè®°ä½ï¼Œç­‰ä½ å¼€å§‹åšå†…å®¹çš„æ—¶å€™ï¼Œä»ç¬¬ä¸€ç¯‡æ–‡ç« å°±æŠŠSEOè€ƒè™‘è¿›å»ï¼Œæ¯”åæœŸå†è¡¥æ•‘å®¹æ˜“å¤šäº†ã€‚</p>
<p>æœ€åæƒ³è¯´ï¼ŒSEOæ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆéš¾ï¼Œä¹Ÿæ²¡æœ‰æ·å¾„ã€‚è¸è¸å®å®åšå¥½å†…å®¹ï¼Œç”¨å¿ƒä¼˜åŒ–ç»†èŠ‚ï¼Œ3ä¸ªæœˆåä½ å›å¤´çœ‹ï¼Œä¸€å®šä¼šå‘ç°å˜åŒ–ã€‚</p>
<p>ä½ ç°åœ¨å°±å¯ä»¥åŠ¨æ‰‹è¯•è¯•ï¼ŒæŒ‘ä¸€ä¸ªä½ æœ€æƒ³ä¼˜åŒ–çš„é¡µé¢ï¼Œç”¨ä»Šå¤©å­¦åˆ°çš„æŠ€å·§æ”¹ä¸€æ”¹ã€‚æœ‰é—®é¢˜éšæ—¶äº¤æµï¼Œæˆ‘ä¹Ÿä¸€ç›´åœ¨å­¦ä¹ å’Œå®è·µä¸­ã€‚åŠ æ²¹ï¼</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘è‡ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.betterlink.top%2Fzh%2F" target="_blank" title="https://blog.betterlink.top/zh/" ref="nofollow noopener noreferrer">ä¸ªäººåšå®¢</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[package.json é…ç½®æŒ‡å—]]></title>    <link>https://juejin.cn/post/7577364921656393770</link>    <guid>https://juejin.cn/post/7577364921656393770</guid>    <pubDate>2025-11-28T03:21:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577364921656393770" data-draft-id="7577332659506118699" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="package.json é…ç½®æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2025-11-28T03:21:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            package.json é…ç½®æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:21:37.000Z" title="Fri Nov 28 2025 03:21:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">package.json é…ç½®æŒ‡å—</h2>
<p>package.json æ˜¯ npm é¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†é¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯ã€ä¾èµ–å…³ç³»å’Œè„šæœ¬å‘½ä»¤ã€‚</p>
<h3 data-id="heading-1">ğŸ“‘ ç›®å½•</h3>
<ul>
<li><a href="#%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83" title="#%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83">å¿«é€Ÿå‚è€ƒ</a></li>
<li><a href="#%E9%A1%B9%E7%9B%AE%E5%88%86%E7%B1%BB" title="#%E9%A1%B9%E7%9B%AE%E5%88%86%E7%B1%BB">é¡¹ç›®åˆ†ç±»</a></li>
<li><a href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%E5%9F%BA%E7%A1%80%E5%AD%97%E6%AE%B5%E8%AF%A6%E8%A7%A3" title="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%E5%9F%BA%E7%A1%80%E5%AD%97%E6%AE%B5%E8%AF%A6%E8%A7%A3">ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€å­—æ®µè¯¦è§£</a>
<ul>
<li><a href="#%E9%80%9A%E7%94%A8%E5%9F%BA%E7%A1%80%E5%AD%97%E6%AE%B5" title="#%E9%80%9A%E7%94%A8%E5%9F%BA%E7%A1%80%E5%AD%97%E6%AE%B5">é€šç”¨åŸºç¡€å­—æ®µ</a></li>
<li><a href="#%E5%BA%94%E7%94%A8%E9%A1%B9%E7%9B%AE%E4%B8%93%E7%94%A8%E5%AD%97%E6%AE%B5" title="#%E5%BA%94%E7%94%A8%E9%A1%B9%E7%9B%AE%E4%B8%93%E7%94%A8%E5%AD%97%E6%AE%B5">åº”ç”¨é¡¹ç›®ä¸“ç”¨å­—æ®µ</a></li>
<li><a href="#npm-%E5%8C%85%E4%B8%93%E7%94%A8%E5%AD%97%E6%AE%B5" title="#npm-%E5%8C%85%E4%B8%93%E7%94%A8%E5%AD%97%E6%AE%B5">npm åŒ…ä¸“ç”¨å­—æ®µ</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86%E6%8C%89%E9%A1%B9%E7%9B%AE%E7%B1%BB%E5%9E%8B%E9%85%8D%E7%BD%AE" title="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86%E6%8C%89%E9%A1%B9%E7%9B%AE%E7%B1%BB%E5%9E%8B%E9%85%8D%E7%BD%AE">ç¬¬äºŒéƒ¨åˆ†ï¼šæŒ‰é¡¹ç›®ç±»å‹é…ç½®</a>
<ul>
<li><a href="#%E5%BA%94%E7%94%A8%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE" title="#%E5%BA%94%E7%94%A8%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE">åº”ç”¨é¡¹ç›®é…ç½®</a></li>
<li><a href="#%E5%B7%A5%E5%85%B7%E5%BA%93%E9%85%8D%E7%BD%AE" title="#%E5%B7%A5%E5%85%B7%E5%BA%93%E9%85%8D%E7%BD%AE">å·¥å…·åº“é…ç½®</a></li>
<li><a href="#cli-%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE" title="#cli-%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE">CLI å·¥å…·é…ç½®</a></li>
<li><a href="#ui-%E7%BB%84%E4%BB%B6%E5%BA%93%E9%85%8D%E7%BD%AE" title="#ui-%E7%BB%84%E4%BB%B6%E5%BA%93%E9%85%8D%E7%BD%AE">UI ç»„ä»¶åº“é…ç½®</a></li>
<li><a href="#hooks-%E5%BA%93%E9%85%8D%E7%BD%AE" title="#hooks-%E5%BA%93%E9%85%8D%E7%BD%AE">Hooks åº“é…ç½®</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9" title="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9">ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¿›é˜¶å†…å®¹</a>
<ul>
<li><a href="#npm-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E8%84%9A%E6%9C%AC" title="#npm-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E8%84%9A%E6%9C%AC">npm ç”Ÿå‘½å‘¨æœŸè„šæœ¬</a></li>
<li><a href="#npx-%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97" title="#npx-%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97">npx ä½¿ç”¨æŒ‡å—</a></li>
</ul>
</li>
<li><a href="#%E9%99%84%E5%BD%95" title="#%E9%99%84%E5%BD%95">é™„å½•</a>
<ul>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF%E6%B1%87%E6%80%BB" title="#%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF%E6%B1%87%E6%80%BB">é…ç½®æ¨¡æ¿æ±‡æ€»</a></li>
<li><a href="#%E5%AD%97%E6%AE%B5%E9%80%9F%E6%9F%A5%E8%A1%A8" title="#%E5%AD%97%E6%AE%B5%E9%80%9F%E6%9F%A5%E8%A1%A8">å­—æ®µé€ŸæŸ¥è¡¨</a></li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-2">å¿«é€Ÿå‚è€ƒ</h3>
<h4 data-id="heading-3">å­—æ®µé…ç½®é€ŸæŸ¥è¡¨</h4>





























































<table><thead><tr><th>å­—æ®µ</th><th>åº”ç”¨é¡¹ç›®</th><th>å·¥å…·åº“</th><th>CLIå·¥å…·</th><th>ç»„ä»¶åº“</th><th>Hooksåº“</th></tr></thead><tbody><tr><td><code>private</code></td><td>âœ… å¿…å¡«</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âŒ</td></tr><tr><td><code>bin</code></td><td>âŒ</td><td>âŒ</td><td>âœ… å¿…å¡«</td><td>âŒ</td><td>âŒ</td></tr><tr><td><code>peerDependencies</code></td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âœ… å¿…å¡«</td><td>âœ… å¿…å¡«</td></tr><tr><td><code>sideEffects</code></td><td>-</td><td><code>false</code></td><td><code>false</code></td><td><code>["*.css"]</code></td><td><code>false</code></td></tr><tr><td><code>exports</code></td><td>âŒ</td><td>âœ… æ¨è</td><td>âœ… æ¨è</td><td>âœ… æ¨è</td><td>âœ… æ¨è</td></tr><tr><td><code>main</code> + <code>module</code> + <code>types</code></td><td>âŒ</td><td>âœ… å¿…å¡«</td><td>âœ… å¿…å¡«</td><td>âœ… å¿…å¡«</td><td>âœ… å¿…å¡«</td></tr></tbody></table>
<h4 data-id="heading-4">é…ç½®é€‰æ‹©å†³ç­–æ ‘</h4>
<pre><code class="hljs language-text" lang="text">æ˜¯å¦éœ€è¦å‘å¸ƒåˆ° npmï¼Ÿ
â”œâ”€ å¦ â†’ åº”ç”¨é¡¹ç›®é…ç½®ï¼ˆprivate: trueï¼‰
â””â”€ æ˜¯ â†’ æ˜¯å¦åŒ…å«å¯æ‰§è¡Œå‘½ä»¤ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ CLI å·¥å…·é…ç½®ï¼ˆbin å­—æ®µï¼‰
    â””â”€ å¦ â†’ æ˜¯å¦ä¾èµ–æ¡†æ¶ï¼ˆReact/Vueï¼‰ï¼Ÿ
        â”œâ”€ æ˜¯ â†’ æ˜¯å¦ä¸ºç»„ä»¶ï¼Ÿ
        â”‚   â”œâ”€ æ˜¯ â†’ UI ç»„ä»¶åº“é…ç½®ï¼ˆpeerDependencies + sideEffects: ["*.css"]ï¼‰
        â”‚   â””â”€ å¦ â†’ Hooks åº“é…ç½®ï¼ˆpeerDependencies + sideEffects: falseï¼‰
        â””â”€ å¦ â†’ å·¥å…·åº“é…ç½®ï¼ˆsideEffects: falseï¼‰
</code></pre>
<h4 data-id="heading-5">å¿«é€Ÿé…ç½®æ¨¡æ¿é“¾æ¥</h4>
<p>ä»¥ä¸‹ï¼Œä»…ä¾›å‚è€ƒ</p>
<ul>
<li><a href="#%E5%BA%94%E7%94%A8%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF" title="#%E5%BA%94%E7%94%A8%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF">åº”ç”¨é¡¹ç›®æ¨¡æ¿</a></li>
<li><a href="#%E5%B7%A5%E5%85%B7%E5%BA%93%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF" title="#%E5%B7%A5%E5%85%B7%E5%BA%93%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF">å·¥å…·åº“æ¨¡æ¿</a></li>
<li><a href="#cli-%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF" title="#cli-%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF">CLI å·¥å…·æ¨¡æ¿</a></li>
<li><a href="#ui-%E7%BB%84%E4%BB%B6%E5%BA%93%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF" title="#ui-%E7%BB%84%E4%BB%B6%E5%BA%93%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF">UI ç»„ä»¶åº“æ¨¡æ¿</a></li>
<li><a href="#hooks-%E5%BA%93%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF" title="#hooks-%E5%BA%93%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF">Hooks åº“æ¨¡æ¿</a></li>
</ul>
<hr/>
<h3 data-id="heading-6">é¡¹ç›®åˆ†ç±»</h3>
<p>å‰ç«¯é¡¹ç›®æŒ‰å‘å¸ƒæ–¹å¼åˆ†ç±»ï¼š</p>
<ul>
<li><strong>åº”ç”¨é¡¹ç›®ï¼ˆApplicationï¼‰</strong>ï¼šä¸å‘å¸ƒåˆ° npmï¼Œå¦‚ Web åº”ç”¨ã€ç§»åŠ¨ç«¯åº”ç”¨ã€æ¡Œé¢åº”ç”¨</li>
<li><strong>npm åŒ…ï¼ˆPackage/Libraryï¼‰</strong>ï¼šå‘å¸ƒåˆ° npmï¼Œä¾›ä»–äººä½¿ç”¨
<ul>
<li><strong>å·¥å…·åº“ï¼ˆUtility Libraryï¼‰</strong>ï¼šçº¯å‡½æ•°åº“ï¼Œå¦‚ lodashã€dayjsã€axios</li>
<li><strong>CLI å·¥å…·ï¼ˆCLI Toolï¼‰</strong>ï¼šå‘½ä»¤è¡Œå·¥å…·ï¼Œå¦‚ create-react-appã€viteã€eslint</li>
<li><strong>UI ç»„ä»¶åº“ï¼ˆComponent Libraryï¼‰</strong>ï¼šReact/Vue ç»„ä»¶åº“ï¼Œå¦‚ antdã€element-uiã€shadcn/ui</li>
<li><strong>Hooks åº“ï¼ˆHooks Libraryï¼‰</strong>ï¼šReact Hooks é›†åˆï¼Œå¦‚ ahooksã€react-use</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-7">ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€å­—æ®µè¯¦è§£</h3>
<h4 data-id="heading-8">é€šç”¨åŸºç¡€å­—æ®µ</h4>
<p>ä»¥ä¸‹å­—æ®µæ˜¯æ‰€æœ‰é¡¹ç›®çš„åŸºç¡€é…ç½®ï¼Œç¡®ä¿é¡¹ç›®å¯è¯†åˆ«ã€å¯ä¾èµ–ï¼š</p>











































































<table><thead><tr><th>å­—æ®µå</th><th>ä½œç”¨è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>name</code></td><td>é¡¹ç›®åç§°ï¼ˆnpm åŒ…éœ€å”¯ä¸€ï¼Œä¸èƒ½åŒ…å«å¤§å†™å­—æ¯ã€ç©ºæ ¼ï¼Œå»ºè®®ç”¨ kebab-caseï¼‰</td><td><code>"name": "my-web-app"</code>ï¼ˆåº”ç”¨ï¼‰<br/><code>"name": "utils-tool"</code>ï¼ˆnpm åŒ…ï¼‰</td></tr><tr><td><code>version</code></td><td>ç‰ˆæœ¬å·ï¼ˆnpm åŒ…å¿…å¡«ï¼Œéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼šMAJOR.MINOR.PATCHï¼‰</td><td><code>"version": "1.0.0"</code>ï¼ˆé¦–æ¬¡å‘å¸ƒï¼‰<br/><code>"version": "2.1.3-beta.1"</code>ï¼ˆæµ‹è¯•ç‰ˆï¼‰</td></tr><tr><td><code>description</code></td><td>é¡¹ç›®æè¿°ï¼ˆnpm åŒ…å¿…å¡«ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£ç”¨é€”ï¼Œå½±å“ npm æœç´¢ï¼‰</td><td><code>"description": "A lightweight date processing tool"</code></td></tr><tr><td><code>author</code></td><td>ä½œè€…ä¿¡æ¯ï¼ˆå§“åã€é‚®ç®±ã€ä¸»é¡µå¯é€‰ï¼‰</td><td><code>"author": "John &lt;john@example.com&gt; (https://john.dev)"</code></td></tr><tr><td><code>license</code></td><td>å¼€æºåè®®ï¼ˆnpm åŒ…å»ºè®®å¡«å†™ï¼Œå¦‚ MITã€Apache-2.0ï¼›åº”ç”¨å¯çœç•¥æˆ–å¡« UNLICENSEDï¼‰</td><td><code>"license": "MIT"</code>ï¼ˆnpm åŒ…ï¼‰<br/><code>"license": "UNLICENSED"</code>ï¼ˆç§æœ‰åº”ç”¨ï¼‰</td></tr><tr><td><code>keywords</code></td><td>å…³é”®è¯ï¼ˆnpm åŒ…å¿…å¡«ï¼Œæå‡æœç´¢æ›å…‰ï¼›åº”ç”¨å¯é€‰ï¼‰</td><td><code>"keywords": ["date", "format", "utils", "browser"]</code></td></tr><tr><td><code>homepage</code></td><td>é¡¹ç›®ä¸»é¡µï¼ˆnpm åŒ…å»ºè®®å¡«å†™ï¼Œå¦‚ GitHub ä»“åº“åœ°å€ã€æ–‡æ¡£åœ°å€ï¼‰</td><td><code>"homepage": "https://github.com/username/utils-tool#readme"</code></td></tr><tr><td><code>repository</code></td><td>ä»£ç ä»“åº“åœ°å€ï¼ˆnpm åŒ…å¿…å¡«ï¼Œæ–¹ä¾¿ç”¨æˆ·è´¡çŒ®ä»£ç ï¼‰</td><td><code>"repository": { "type": "git", "url": "git+https://github.com/username/utils-tool.git" }</code></td></tr><tr><td><code>bugs</code></td><td>é—®é¢˜åé¦ˆåœ°å€ï¼ˆnpm åŒ…å»ºè®®å¡«å†™ï¼Œå¦‚ GitHub Issuesï¼‰</td><td><code>"bugs": "https://github.com/username/utils-tool/issues"</code></td></tr><tr><td><code>engines</code></td><td>å£°æ˜ä¾èµ–çš„ Node.js/npm ç‰ˆæœ¬ï¼ˆé¿å…ç¯å¢ƒå…¼å®¹é—®é¢˜ï¼‰</td><td><code>"engines": { "node": "&gt;=16.0.0", "npm": "&gt;=8.0.0" }</code></td></tr><tr><td><code>type</code></td><td>æ¨¡å—ç±»å‹ï¼ˆNode.js 14.13+ æ”¯æŒï¼Œé»˜è®¤ commonjsï¼ŒES æ¨¡å—éœ€æ˜¾å¼è®¾ä¸º moduleï¼‰</td><td><code>"type": "module"</code></td></tr><tr><td><code>publishConfig</code></td><td>å‘å¸ƒé…ç½®ï¼ˆå¦‚æŒ‡å®š npm æºã€è®¿é—®æƒé™ï¼‰</td><td><code>"publishConfig": { "registry": "https://registry.npmjs.org/", "access": "public" }</code></td></tr><tr><td><code>files</code></td><td>å‘å¸ƒåˆ° npm çš„æ–‡ä»¶ / ç›®å½•ï¼ˆæŒ‡å®šéœ€è¦ä¸Šä¼ çš„å†…å®¹ï¼Œé¿å…å†—ä½™æ–‡ä»¶ï¼‰</td><td><code>"files": ["dist", "README.md", "package.json"]</code>ï¼ˆæ’é™¤ node_modulesã€.git ç­‰ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-9">åº”ç”¨é¡¹ç›®ä¸“ç”¨å­—æ®µ</h4>
<p>åº”ç”¨é¡¹ç›®ï¼ˆå¦‚ Web åº”ç”¨ã€React/Vue é¡¹ç›®ã€Electron æ¡Œé¢åº”ç”¨ï¼‰ä¸å‘å¸ƒåˆ° npmï¼Œæ ¸å¿ƒå…³æ³¨ä¾èµ–ç®¡ç†ã€è„šæœ¬å‘½ä»¤ã€æ„å»ºé…ç½®ï¼š</p>























































<table><thead><tr><th>å­—æ®µå</th><th>ä½œç”¨è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>dependencies</code></td><td>ç”Ÿäº§ç¯å¢ƒä¾èµ–ï¼ˆé¡¹ç›®è¿è¡Œå¿…éœ€ï¼Œå¦‚ reactã€vueã€axiosï¼‰</td><td><code>"dependencies": { "react": "^18.2.0", "axios": "^1.6.0" }</code></td></tr><tr><td><code>devDependencies</code></td><td>å¼€å‘ç¯å¢ƒä¾èµ–ï¼ˆæ„å»ºã€æµ‹è¯•ã€ä»£ç æ£€æŸ¥ç­‰ï¼Œå¦‚ webpackã€babelã€jestï¼‰</td><td><code>"devDependencies": { "webpack": "^5.88.0", "jest": "^29.7.0" }</code></td></tr><tr><td><code>scripts</code></td><td>è‡ªå®šä¹‰è„šæœ¬å‘½ä»¤ï¼ˆå¯åŠ¨ã€æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²ç­‰ï¼Œæ ¸å¿ƒå­—æ®µï¼‰</td><td><code>"scripts": { "start": "vite", "build": "vite build", "test": "jest", "lint": "eslint src" }</code></td></tr><tr><td><code>main</code></td><td>åº”ç”¨å…¥å£æ–‡ä»¶ï¼ˆNode.js åº”ç”¨å¿…å¡«ï¼Œå¦‚ Express åç«¯ï¼›å‰ç«¯åº”ç”¨å¯çœç•¥ï¼Œç”±æ„å»ºå·¥å…·æŒ‡å®šï¼‰</td><td><code>"main": "src/index.js"</code>ï¼ˆNode.js åç«¯åº”ç”¨ï¼‰</td></tr><tr><td><code>browserslist</code></td><td>æµè§ˆå™¨å…¼å®¹ç›®æ ‡ï¼ˆå‰ç«¯åº”ç”¨å¸¸ç”¨ï¼Œé…åˆ babelã€autoprefixer ç­‰å·¥å…·ï¼‰</td><td><code>"browserslist": ["last 2 versions", "not dead", "iOS &gt;= 12"]</code></td></tr><tr><td><code>proxy</code></td><td>å¼€å‘ç¯å¢ƒè·¨åŸŸä»£ç†ï¼ˆReact/Vue ç­‰å‰ç«¯æ¡†æ¶å¸¸ç”¨ï¼Œç®€åŒ–è·¨åŸŸé…ç½®ï¼‰</td><td><code>"proxy": "https://api.example.com"</code></td></tr><tr><td><code>private</code></td><td>æ ‡è®°ä¸ºç§æœ‰é¡¹ç›®ï¼ˆé˜²æ­¢è¯¯å‘å¸ƒåˆ° npmï¼Œå‰ç«¯åº”ç”¨å¼ºçƒˆå»ºè®®è®¾ç½®ï¼‰</td><td><code>"private": true</code></td></tr><tr><td><code>workspaces</code></td><td>monorepo é¡¹ç›®é…ç½®ï¼ˆç®¡ç†å¤šå­åŒ…ï¼Œå¦‚å‰ç«¯ + åç«¯ + ç»„ä»¶åº“æ”¾åœ¨åŒä¸€ä»“åº“ï¼‰</td><td><code>"workspaces": ["packages/*", "apps/*"]</code></td></tr><tr><td><code>config</code></td><td>è‡ªå®šä¹‰è„šæœ¬é…ç½®ï¼ˆå¯åœ¨ scripts ä¸­é€šè¿‡ npm_config_xxx è¯»å–ï¼‰</td><td><code>"config": { "port": 3000 }</code>ï¼ˆè„šæœ¬ä¸­ç”¨ <code>$npm_config_port</code> è·å–ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-10">npm åŒ…ä¸“ç”¨å­—æ®µ</h4>
<p>npm åŒ…éœ€å‘å¸ƒåˆ° npm ä¾›ä»–äººä½¿ç”¨ï¼Œæ ¸å¿ƒå…³æ³¨å…¥å£æ–‡ä»¶ã€å¯¼å‡ºè§„èŒƒã€å…¼å®¹æ€§ã€å‘å¸ƒé…ç½®ï¼š</p>




























































<table><thead><tr><th>å­—æ®µå</th><th>ä½œç”¨è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>main</code></td><td>ä¸»å…¥å£æ–‡ä»¶ï¼ˆCommonJS æ¨¡å—ï¼Œrequire æ—¶é»˜è®¤åŠ è½½ï¼‰</td><td><code>"main": "dist/index.cjs"</code></td></tr><tr><td><code>module</code></td><td>ES æ¨¡å—å…¥å£ï¼ˆæ”¯æŒ tree-shakingï¼Œwebpack/rollup ä¼˜å…ˆåŠ è½½ï¼‰</td><td><code>"module": "dist/index.esm.js"</code></td></tr><tr><td><code>browser</code></td><td>æµè§ˆå™¨ç¯å¢ƒå…¥å£ï¼ˆåŒºåˆ† Node.js å’Œæµè§ˆå™¨å·®å¼‚ï¼Œå¦‚é¿å…åŠ è½½ fs æ¨¡å—ï¼‰</td><td><code>"browser": "dist/index.browser.js"</code></td></tr><tr><td><code>exports</code></td><td>æ¡ä»¶å¯¼å‡ºï¼ˆNode.js 12+ æ”¯æŒï¼Œç²¾ç¡®æ§åˆ¶ä¸åŒç¯å¢ƒçš„å…¥å£ï¼Œæ›¿ä»£ main/module/browserï¼‰</td><td><code>"exports": { ".": { "import": "./dist/index.esm.js", "require": "./dist/index.cjs", "browser": "./dist/index.browser.js" }, "./utils": "./dist/utils.esm.js" }</code></td></tr><tr><td><code>types</code> / <code>typings</code></td><td>TypeScript ç±»å‹å£°æ˜æ–‡ä»¶ï¼ˆTS é¡¹ç›®å¿…å¡«ï¼Œæä¾›ç±»å‹æç¤ºï¼‰</td><td><code>"types": "dist/index.d.ts"</code></td></tr><tr><td><code>bin</code></td><td>CLI å·¥å…·å…¥å£ï¼ˆä»… CLI ç±»å‹ npm åŒ…å¿…å¡«ï¼Œæ˜ å°„å‘½ä»¤åˆ°æ‰§è¡Œæ–‡ä»¶ï¼‰</td><td><code>"bin": { "my-cli": "./dist/cli.js" }</code>ï¼ˆç”¨æˆ·å®‰è£…åå¯ç›´æ¥æ‰§è¡Œ my-cliï¼‰</td></tr><tr><td><code>peerDependencies</code></td><td>å¯¹ç­‰ä¾èµ–ï¼ˆå£°æ˜ä¸å®¿ä¸»ç¯å¢ƒçš„å…¼å®¹ç‰ˆæœ¬ï¼Œå¦‚ React ç»„ä»¶åº“ä¾èµ– Reactï¼‰</td><td><code>"peerDependencies": { "react": "&gt;=16.8.0", "react-dom": "&gt;=16.8.0" }</code></td></tr><tr><td><code>peerDependenciesMeta</code></td><td>å¯¹ç­‰ä¾èµ–å¯é€‰é…ç½®ï¼ˆæ ‡è®°æŸäº› peerDependency ä¸ºå¯é€‰ï¼‰</td><td><code>"peerDependenciesMeta": { "vue": { "optional": true } }</code></td></tr><tr><td><code>optionalDependencies</code></td><td>å¯é€‰ä¾èµ–ï¼ˆç¼ºå¤±æ—¶ä¸å½±å“é¡¹ç›®è¿è¡Œï¼Œå¦‚å¯é€‰çš„æ€§èƒ½ä¼˜åŒ–æ¨¡å—ï¼‰</td><td><code>"optionalDependencies": { "lodash-es": "^4.17.0" }</code></td></tr><tr><td><code>sideEffects</code></td><td>æ ‡è®°åŒ…æ˜¯å¦æœ‰å‰¯ä½œç”¨ï¼ˆTree-shaking ä¼˜åŒ–ï¼‰</td><td><code>"sideEffects": false</code>ï¼ˆçº¯å·¥å…·åº“ï¼‰<br/><code>"sideEffects": ["*.css"]</code>ï¼ˆç»„ä»¶åº“æ ·å¼æ–‡ä»¶ï¼‰</td></tr></tbody></table>
<p><strong>å­—æ®µä¼˜å…ˆçº§</strong>ï¼š<code>exports</code>ï¼ˆæœ€é«˜ï¼‰â†’ <code>module</code> â†’ <code>main</code> â†’ <code>types</code>ï¼ˆç‹¬ç«‹ï¼‰</p>
<p><strong>æ¨èé…ç½®</strong>ï¼šåŒæ—¶é…ç½®æ‰€æœ‰å­—æ®µï¼Œç¡®ä¿æœ€å¤§å…¼å®¹æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-11">ç¬¬äºŒéƒ¨åˆ†ï¼šæŒ‰é¡¹ç›®ç±»å‹é…ç½®</h3>
<h4 data-id="heading-12">åº”ç”¨é¡¹ç›®é…ç½®</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šWeb åº”ç”¨ã€ç§»åŠ¨ç«¯åº”ç”¨ã€æ¡Œé¢åº”ç”¨ã€ä¼ä¸šå†…éƒ¨é¡¹ç›®ã€ä¸ªäººé¡¹ç›®ï¼ˆä¸å‘å¸ƒåˆ° npmï¼‰</p>
<p><strong>æ ¸å¿ƒå­—æ®µ</strong>ï¼šåŸºç¡€å­—æ®µ + scripts + dependencies + private</p>
<h5 data-id="heading-13">é…ç½®æ¨¡æ¿</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-web-app"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„ Web åº”ç”¨"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"preview"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite preview"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest run"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint src"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vite"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.0.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"vitest"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.5"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"eslint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.50.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=18.0.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"packageManager"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm@9.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"browserslist"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"last 2 versions"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"not dead"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å…³é”®é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li>âœ… <strong>private: true</strong>ï¼šé˜²æ­¢è¯¯å‘å¸ƒåˆ° npm</li>
<li>âœ… <strong>scripts</strong>ï¼šå®šä¹‰å¼€å‘ã€æ„å»ºã€é¢„è§ˆç­‰å‘½ä»¤</li>
<li>âœ… <strong>packageManager</strong>ï¼šé”å®šåŒ…ç®¡ç†å™¨ç‰ˆæœ¬ï¼Œç¡®ä¿å›¢é˜Ÿä¸€è‡´</li>
<li>âŒ æ— éœ€é…ç½® <code>files</code>ã€<code>exports</code>ã€<code>main</code> ç­‰å‘å¸ƒç›¸å…³å­—æ®µ</li>
<li>âŒ æ— éœ€é…ç½® <code>repository</code>ã€<code>bugs</code>ã€<code>homepage</code> ç­‰å…¬å¼€ä¿¡æ¯</li>
</ul>
<hr/>
<h4 data-id="heading-14">å·¥å…·åº“é…ç½®</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šçº¯å‡½æ•°åº“ã€å·¥å…·ç±»åº“ã€ä¸ä¾èµ–æ¡†æ¶çš„ JS/TS åº“ï¼Œå¦‚ lodashã€dayjsã€axios</p>
<p><strong>æ ¸å¿ƒå­—æ®µ</strong>ï¼šåŒæ¨¡å¼å…¥å£ + sideEffects: false + files</p>
<h5 data-id="heading-15">é…ç½®æ¨¡æ¿</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-utils"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å®ç”¨çš„å·¥å…·å‡½æ•°åº“"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"utils"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"helpers"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"tools"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¼ ä¸‰ &lt;zhangsan@xxx.com&gt;"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MIT"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"import"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"require"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"dist"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"README.md"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"LICENSE"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest run"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prepublishOnly"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run build"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tsup"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.3.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.5.4"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"vitest"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.5"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=14.0.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xxx/my-utils.git"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bugs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xxx/my-utils/issues"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xxx/my-utils#readme"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å…³é”®é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li>âœ… <strong>exports + main + module + types</strong>ï¼šåŒæ¨¡å¼å…¼å®¹ï¼Œç¡®ä¿æ–°æ—§å·¥å…·éƒ½èƒ½ä½¿ç”¨</li>
<li>âœ… <strong>sideEffects: false</strong>ï¼šçº¯å‡½æ•°åº“æ— å‰¯ä½œç”¨ï¼Œæ”¯æŒ Tree-shaking</li>
<li>âœ… <strong>files</strong>ï¼šä»…å‘å¸ƒ dist ç›®å½•ï¼Œå‡å°åŒ…ä½“ç§¯</li>
<li>âœ… <strong>prepublishOnly</strong>ï¼šå‘å¸ƒå‰è‡ªåŠ¨æ„å»ºï¼Œé¿å…å¿˜è®°æ‰“åŒ…</li>
</ul>
<h5 data-id="heading-16">å®é™…æ¡ˆä¾‹è¦ç‚¹ï¼šAxios</h5>
<p><strong>æ ¸å¿ƒè®¾è®¡</strong>ï¼š</p>
<ul>
<li>è·¨ç¯å¢ƒé€‚é…ï¼šé€šè¿‡ <code>exports</code> åŒºåˆ† browser/node/react-native</li>
<li>ç±»å‹æ”¯æŒï¼šåŒºåˆ† CJS/ESM ç±»å‹å£°æ˜</li>
<li>Tree-shakingï¼š<code>sideEffects: false</code></li>
</ul>
<p><strong>å…³é”®é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"browser"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"require"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/browser/axios.cjs"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./index.js"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"require"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/node/axios.cjs"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./index.js"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h4 data-id="heading-17">CLI å·¥å…·é…ç½®</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå‘½ä»¤è¡Œå·¥å…·ã€è„šæ‰‹æ¶å·¥å…·ï¼Œå¦‚ create-react-appã€viteã€eslint</p>
<p><strong>æ ¸å¿ƒå­—æ®µ</strong>ï¼šbin + preferGlobal + shebang</p>
<h5 data-id="heading-18">é…ç½®æ¨¡æ¿</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-cli"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å‘½ä»¤è¡Œå·¥å…·"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"cli"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"command-line"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"tool"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¼ ä¸‰ &lt;zhangsan@xxx.com&gt;"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MIT"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"import"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"require"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bin"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"my-cli"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/cli.js"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"preferGlobal"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"dist"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"templates"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"README.md"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"LICENSE"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest run"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prepublishOnly"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run build"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"commander"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^11.1.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"inquirer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.2.6"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"chalk"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.1.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"fs-extra"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^11.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"handlebars"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.7.8"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tsup"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.3.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.5.4"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"vitest"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.5"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=14.0.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xxx/my-cli.git"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bugs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xxx/my-cli/issues"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xxx/my-cli#readme"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å…³é”®é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li>âœ… <strong>bin</strong>ï¼šå¿…é¡»é…ç½®ï¼Œæ˜ å°„å‘½ä»¤ååˆ°å…¥å£æ–‡ä»¶</li>
<li>âœ… <strong>preferGlobal: true</strong>ï¼šæç¤ºç”¨æˆ·å…¨å±€å®‰è£…ï¼ˆå¯é€‰ï¼‰</li>
<li>âœ… <strong>å…¥å£æ–‡ä»¶éœ€æ·»åŠ  Shebang</strong>ï¼š<code>#!/usr/bin/env node</code>ï¼ˆtsup æ‰“åŒ…æ—¶å¯é€šè¿‡ <code>shebang: true</code> è‡ªåŠ¨æ·»åŠ ï¼‰</li>
<li>âœ… <strong>files åŒ…å« templates</strong>ï¼šå¦‚æœ CLI å·¥å…·åŒ…å«æ¨¡æ¿æ–‡ä»¶ï¼Œéœ€åœ¨ files ä¸­å£°æ˜</li>
<li>âœ… <strong>dependencies åŒ…å« CLI ç›¸å…³åº“</strong>ï¼šcommanderã€inquirerã€chalk ç­‰</li>
</ul>
<h5 data-id="heading-19">å®é™…æ¡ˆä¾‹è¦ç‚¹ï¼šVite</h5>
<p><strong>æ ¸å¿ƒè®¾è®¡</strong>ï¼š</p>
<ul>
<li>monorepo æ¶æ„ï¼šæ ¹åŒ…ç®¡ç†å·¥ç¨‹åŒ–ï¼Œå­åŒ…ä¸“æ³¨åŠŸèƒ½</li>
<li>æ¨¡å—è§„èŒƒç»Ÿä¸€ï¼š<code>type: module</code>ï¼Œç»Ÿä¸€ä½¿ç”¨ ESM</li>
<li>å¤šåŒ…åä½œï¼šé€šè¿‡ pnpm workspace å®ç°ç‰ˆæœ¬è”åŠ¨</li>
</ul>
<p><strong>å…³é”®é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"packageManager"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm@10.23.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"workspaces"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"packages/*"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h4 data-id="heading-20">UI ç»„ä»¶åº“é…ç½®</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šReact/Vue ç»„ä»¶åº“ã€UI ç»„ä»¶åº“ï¼Œå¦‚ antdã€element-uiã€shadcn/ui</p>
<p><strong>æ ¸å¿ƒå­—æ®µ</strong>ï¼špeerDependencies + sideEffectsï¼ˆæ ·å¼ï¼‰+ æ ·å¼å¯¼å‡º</p>
<h5 data-id="heading-21">é…ç½®æ¨¡æ¿</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-components"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"React ç»„ä»¶åº“"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"react"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"components"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"ui"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¼ ä¸‰ &lt;zhangsan@xxx.com&gt;"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MIT"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"import"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"require"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"./style.css"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/style.css"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"dist"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"README.md"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"LICENSE"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"*.css"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"./dist/style.css"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest run"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prepublishOnly"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run build"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"clsx"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=16.8.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=16.8.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@types/react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"tsup"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.3.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.5.4"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=14.0.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xxx/my-components.git"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bugs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xxx/my-components/issues"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xxx/my-components#readme"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å…³é”®é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li>âœ… <strong>peerDependencies</strong>ï¼šå£°æ˜æ¡†æ¶ä¾èµ–ï¼ˆReact/Vueï¼‰ï¼Œç”¨æˆ·éœ€è‡ªè¡Œå®‰è£…</li>
<li>âœ… <strong>sideEffects: ["*.css"]</strong>ï¼šæ ·å¼æ–‡ä»¶æœ‰å‰¯ä½œç”¨ï¼Œéœ€æ ‡è®°é¿å…è¢« Tree-shaking ç§»é™¤</li>
<li>âœ… <strong>exports æ”¯æŒæ ·å¼å¯¼å‡º</strong>ï¼šå…è®¸ç”¨æˆ·å•ç‹¬å¯¼å…¥æ ·å¼æ–‡ä»¶ï¼ˆ<code>import 'my-components/style.css'</code>ï¼‰</li>
<li>âœ… <strong>devDependencies åŒ…å«æ¡†æ¶</strong>ï¼šå¼€å‘æ—¶éœ€è¦ï¼Œä½†ä¸ä¼šè¢«æ‰“åŒ…åˆ°æœ€ç»ˆäº§ç‰©</li>
</ul>
<h5 data-id="heading-22">å®é™…æ¡ˆä¾‹è¦ç‚¹ï¼šAnt Design</h5>
<p><strong>æ ¸å¿ƒè®¾è®¡</strong>ï¼š</p>
<ul>
<li>æ ·å¼æ–¹æ¡ˆï¼šCSS-in-JSï¼ˆantd 6.xï¼‰æˆ– Less å˜é‡ï¼ˆantd 4.xï¼‰</li>
<li>å¤šæ ¼å¼è¾“å‡ºï¼šCJS/ESM/UMDï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½</li>
<li>å·¥ç¨‹åŒ–å®Œå–„ï¼šsize-limitã€è§†è§‰å›å½’æµ‹è¯•ã€æ–‡æ¡£ç”Ÿæˆ</li>
</ul>
<p><strong>å…³é”®é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"*.css"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"lib/index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"es/index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=18.0.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=18.0.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h4 data-id="heading-23">Hooks åº“é…ç½®</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šReact Hooks é›†åˆã€è‡ªå®šä¹‰ Hooks åº“ï¼Œå¦‚ ahooksã€react-use</p>
<p><strong>æ ¸å¿ƒå­—æ®µ</strong>ï¼špeerDependencies (react) + sideEffects: false</p>
<h5 data-id="heading-24">é…ç½®æ¨¡æ¿</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-hooks"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å®ç”¨çš„ React Hooks é›†åˆ"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"react"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"hooks"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"custom-hooks"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¼ ä¸‰ &lt;zhangsan@xxx.com&gt;"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MIT"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"import"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"require"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"dist"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"README.md"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"LICENSE"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest run"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prepublishOnly"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run build"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=16.8.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@types/react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"tsup"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.3.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.5.4"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"vitest"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.5"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=14.0.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xxx/my-hooks.git"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bugs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xxx/my-hooks/issues"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xxx/my-hooks#readme"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å…³é”®é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li>âœ… <strong>peerDependencies: react</strong>ï¼šHooks å¿…é¡»åœ¨ React ç¯å¢ƒä¸­ä½¿ç”¨</li>
<li>âœ… <strong>sideEffects: false</strong>ï¼šçº¯ Hooks å‡½æ•°ï¼Œæ”¯æŒ Tree-shaking</li>
<li>âœ… <strong>æ— éœ€æ ·å¼æ–‡ä»¶</strong>ï¼šHooks åº“é€šå¸¸ä¸åŒ…å«æ ·å¼</li>
<li>âš ï¸ <strong>React 16.8+</strong>ï¼šHooks åŠŸèƒ½è¦æ±‚ React 16.8 åŠä»¥ä¸Šç‰ˆæœ¬</li>
</ul>
<h5 data-id="heading-25">å®é™…æ¡ˆä¾‹è¦ç‚¹ï¼šahooks</h5>
<p><strong>æ ¸å¿ƒè®¾è®¡</strong>ï¼š</p>
<ul>
<li>monorepo æ¶æ„ï¼šæ ¹åŒ…ç®¡ç†å·¥ç¨‹åŒ–ï¼Œå­åŒ…ä¸“æ³¨ä¸šåŠ¡</li>
<li>å¤šæ¨¡å—æ ¼å¼ï¼šCJS/ESM/UMDï¼Œè¦†ç›–ä¸åŒåœºæ™¯</li>
<li>React ç‰ˆæœ¬å…¼å®¹ï¼špeerDependencies è¦†ç›–ä¸»æµç‰ˆæœ¬</li>
</ul>
<p><strong>å…³é”®é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-26">ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¿›é˜¶å†…å®¹</h3>
<h4 data-id="heading-27">npm ç”Ÿå‘½å‘¨æœŸè„šæœ¬</h4>
<p>npm ç”Ÿæ€ä¸­çš„ã€Œç”Ÿå‘½å‘¨æœŸè„šæœ¬ã€æ˜¯åŒ…ç®¡ç†å™¨ï¼ˆnpm/yarn/pnpmï¼‰å†…ç½®çš„è‡ªåŠ¨åŒ–é’©å­æœºåˆ¶â€”â€”å½“æ‰§è¡Œ <code>npm install</code>ã€Œå®‰è£…ä¾èµ–ã€ã€<code>npm publish</code>ã€Œå‘å¸ƒåŒ…ã€ã€<code>npm version</code>ã€Œç‰ˆæœ¬å˜æ›´ã€ç­‰æ ¸å¿ƒæ“ä½œæ—¶ï¼Œä¼šæŒ‰å›ºå®šé¡ºåºè§¦å‘ä¸€ç³»åˆ—é¢„å®šä¹‰è„šæœ¬ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨å³å¯è‡ªåŠ¨å®Œæˆç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ç­‰é‡å¤æ€§å·¥ä½œã€‚</p>
<h5 data-id="heading-28">æ ¸å¿ƒè§„åˆ™</h5>
<ol>
<li>
<p><strong>pre/post å‰ç¼€è‡ªåŠ¨é“¾å¼æ‰§è¡Œ</strong></p>
<ul>
<li>å¯¹äºä»»æ„è‡ªå®šä¹‰æˆ–å†…ç½®è„šæœ¬ï¼ˆå¦‚ build/publishï¼‰ï¼Œnpm ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶æŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š<code>prexxxï¼ˆå‰ç½®è„šæœ¬ï¼‰â†’ xxxï¼ˆæ ¸å¿ƒè„šæœ¬ï¼‰â†’ postxxxï¼ˆåç½®è„šæœ¬ï¼‰</code></li>
<li>ç¤ºä¾‹ï¼šè‹¥å®šä¹‰äº† build è„šæœ¬ï¼Œæ‰§è¡Œ <code>npm run build</code> æ—¶ï¼Œå®é™…æ‰§è¡Œé¡ºåºä¸ºï¼šprebuild â†’ build â†’ postbuildï¼ˆå³ä½¿æœªå®šä¹‰ prebuild/postbuildï¼Œä¹Ÿä¼šè·³è¿‡è€ŒéæŠ¥é”™ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å†…ç½®äº‹ä»¶è§¦å‘è§„åˆ™</strong></p>
<ul>
<li>npm é¢„å®šä¹‰äº†ä¸€æ‰¹æ ¸å¿ƒæ“ä½œï¼ˆå¦‚ install/publish/versionï¼‰ä½œä¸ºã€Œè§¦å‘äº‹ä»¶ã€ï¼Œå½“æ‰§è¡Œè¿™äº›æ“ä½œæ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸè„šæœ¬</li>
<li>ä¾‹å¦‚ï¼šæ‰§è¡Œ <code>npm install</code> ä¼šè§¦å‘ preinstall â†’ å®‰è£…æ ¸å¿ƒæµç¨‹ â†’ postinstall</li>
</ul>
</li>
</ol>
<h5 data-id="heading-29">å¸¸ç”¨ç”Ÿå‘½å‘¨æœŸè„šæœ¬</h5>



























































<table><thead><tr><th>è„šæœ¬å</th><th>è§¦å‘æ—¶æœº</th><th>æ‰§è¡Œé¡ºåº</th><th>å¸¸ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>preinstall</code></td><td><code>npm install</code> å‰</td><td>1</td><td>æ£€æŸ¥ç¯å¢ƒã€å®‰è£…å‰ç½®ä¾èµ–</td></tr><tr><td><code>postinstall</code></td><td><code>npm install</code> å</td><td>2</td><td>åˆå§‹åŒ–é…ç½®ã€ç¼–è¯‘ä»£ç </td></tr><tr><td><code>prepare</code></td><td><code>npm install</code> å’Œ <code>npm publish</code> æ—¶</td><td>ç‰¹æ®Š</td><td>Git Hooks åˆå§‹åŒ–ï¼ˆhusky installï¼‰</td></tr><tr><td><code>prepublishOnly</code></td><td><code>npm publish</code> å‰</td><td>1</td><td>æ„å»ºã€æµ‹è¯•ã€ç‰ˆæœ¬æ ¡éªŒ</td></tr><tr><td><code>postpublish</code></td><td><code>npm publish</code> å</td><td>2</td><td>æ¨é€ä»£ç ã€æ›´æ–°æ–‡æ¡£</td></tr><tr><td><code>preversion</code></td><td><code>npm version</code> å‰</td><td>1</td><td>è¿è¡Œæµ‹è¯•ã€æ£€æŸ¥ä»£ç </td></tr><tr><td><code>version</code></td><td><code>npm version</code> æ—¶</td><td>2</td><td>è‡ªå®šä¹‰ç‰ˆæœ¬å˜æ›´é€»è¾‘</td></tr><tr><td><code>postversion</code></td><td><code>npm version</code> å</td><td>3</td><td>æäº¤ç‰ˆæœ¬å˜æ›´ã€æ‰“æ ‡ç­¾</td></tr></tbody></table>
<h5 data-id="heading-30">prepare çš„ä½¿ç”¨åœºæ™¯</h5>
<p><code>prepare</code> è„šæœ¬ä¼šåœ¨ä»¥ä¸‹åœºæ™¯è‡ªåŠ¨æ‰§è¡Œï¼š</p>
<ul>
<li>ä½ åœ¨è‡ªå·±çš„é¡¹ç›®é‡Œæ‰§è¡Œ <code>npm install</code>ï¼ˆå®‰è£…ä¾èµ–æ—¶ï¼‰</li>
<li>åˆ«äººæ‰§è¡Œ <code>npm install</code> ä½ çš„åŒ…ï¼ˆå®‰è£…ä½ çš„åŒ…æ—¶ï¼Œä¸ç®¡æ˜¯ä» npm è¿˜æ˜¯ GitHub æºç ï¼‰</li>
<li>ä½ æ‰§è¡Œ <code>npm publish</code>ï¼ˆå‘å¸ƒåŒ…åˆ° npm æ—¶ï¼‰</li>
</ul>
<p><strong>å¸¸è§ç”¨æ³•</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"prepare"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"husky install"</span> <span class="hljs-comment">// å®‰è£…ä¾èµ–æ—¶è‡ªåŠ¨åˆå§‹åŒ– Husky</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h4 data-id="heading-31">npx ä½¿ç”¨æŒ‡å—</h4>
<p>npx æ˜¯ npm 5.2.0+ å†…ç½®çš„åŒ…æ‰§è¡Œå·¥å…·ï¼Œå…¨ç§°æ˜¯ Node Package Executeï¼Œç”¨äºç›´æ¥æ‰§è¡Œ npm åŒ…ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨å…¨å±€å®‰è£…åŒ…ã€‚</p>
<h5 data-id="heading-32">æ ¸å¿ƒåŠŸèƒ½</h5>
<ol>
<li>
<p><strong>ä¸´æ—¶æ‰§è¡ŒåŒ…ï¼ˆæ— éœ€å…¨å±€å®‰è£…ï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ— éœ€å…¨å±€å®‰è£… create-react-appï¼Œç›´æ¥åˆ›å»º React é¡¹ç›®</span>
npx create-react-app my-app

<span class="hljs-comment"># æ— éœ€å…¨å±€å®‰è£… @vue/cliï¼Œç›´æ¥åˆ›å»º Vue é¡¹ç›®</span>
npx @vue/cli create my-vue-app
</code></pre>
</li>
<li>
<p><strong>è°ƒç”¨æœ¬åœ°å·²å®‰è£…åŒ…çš„å‘½ä»¤</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é¡¹ç›®å·²å®‰è£… eslintï¼Œç›´æ¥è¿è¡Œï¼ˆç­‰ä»·äº ./node_modules/.bin/eslintï¼‰</span>
npx eslint src/**/*.js

<span class="hljs-comment"># é¡¹ç›®å·²å®‰è£… webpackï¼Œç›´æ¥æ‰§è¡Œæ‰“åŒ…</span>
npx webpack --mode production
</code></pre>
</li>
<li>
<p><strong>æ‰§è¡ŒæŒ‡å®šç‰ˆæœ¬çš„åŒ…</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ 4.x ç‰ˆæœ¬çš„ create-react-app</span>
npx create-react-app@4 my-app

<span class="hljs-comment"># ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„ vite åˆ›å»ºé¡¹ç›®</span>
npx vite@4 create my-vite-app
</code></pre>
</li>
<li>
<p><strong>æ‰§è¡Œ GitHub ä»“åº“çš„è„šæœ¬</strong></p>
<pre><code class="hljs language-bash" lang="bash">npx github:piuccio/cowsay hello
</code></pre>
</li>
</ol>
<h5 data-id="heading-33">npx ä¸ npm run çš„åŒºåˆ«</h5>

























<table><thead><tr><th>ç‰¹æ€§</th><th>npx</th><th>npm run</th></tr></thead><tbody><tr><td>æ‰§è¡Œå†…å®¹</td><td>ä»»æ„ npm åŒ…çš„å¯æ‰§è¡Œå‘½ä»¤ï¼ˆæœ¬åœ°/å…¨å±€/ä¸´æ—¶ï¼‰</td><td>package.json ä¸­ scripts å®šä¹‰çš„å‘½ä»¤</td></tr><tr><td>è°ƒç”¨èŒƒå›´</td><td>å¯è°ƒç”¨æœªå®‰è£…çš„åŒ…ï¼ˆä¸´æ—¶ä¸‹è½½ï¼‰</td><td>ä»…è°ƒç”¨é¡¹ç›® package.json ä¾èµ–çš„åŒ…</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>ä¸´æ—¶å·¥å…·ã€å•æ¬¡å‘½ä»¤ã€æŒ‡å®šç‰ˆæœ¬æµ‹è¯•</td><td>é¡¹ç›®å›ºå®šè„šæœ¬ï¼ˆå¦‚ dev/build/testï¼‰</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># npxï¼šç›´æ¥è°ƒç”¨å…¨å±€/ä¸´æ—¶åŒ…çš„å‘½ä»¤</span>
npx eslint src

<span class="hljs-comment"># npm runï¼šè°ƒç”¨ package.json ä¸­ scripts é‡Œçš„ "lint" å‘½ä»¤</span>
npm run lint
</code></pre>
<h5 data-id="heading-34">å¸¸ç”¨æŠ€å·§</h5>
<ul>
<li><strong>è·³è¿‡æœ¬åœ°å®‰è£…ï¼Œå¼ºåˆ¶ä½¿ç”¨è¿œç¨‹åŒ…</strong>ï¼š<code>npx --ignore-existing create-react-app my-app</code></li>
<li><strong>æŸ¥çœ‹åŒ…çš„å¯æ‰§è¡Œå‘½ä»¤</strong>ï¼š<code>npx --commands cowsay</code></li>
<li><strong>æ‰§è¡Œæœ¬åœ°è„šæœ¬</strong>ï¼š<code>npx ./scripts/my-script.js</code>ï¼ˆéœ€æœ‰ shebang æˆ– .js åç¼€ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-35">é™„å½•</h3>
<h4 data-id="heading-36">é…ç½®æ¨¡æ¿æ±‡æ€»</h4>
<h5 data-id="heading-37">åº”ç”¨é¡¹ç›®æ¨¡æ¿</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-web-app"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„ Web åº”ç”¨"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"preview"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite preview"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vite"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.0.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=18.0.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"packageManager"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm@9.0.0"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-38">å·¥å…·åº“æ¨¡æ¿</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-utils"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å®ç”¨çš„å·¥å…·å‡½æ•°åº“"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"utils"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"helpers"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"tools"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Your Name &lt;your-email@example.com&gt;"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MIT"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"import"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"require"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"dist"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"README.md"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"LICENSE"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest run"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prepublishOnly"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run build"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tsup"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.3.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.5.4"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"vitest"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.5"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=14.0.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/your-name/my-utils.git"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bugs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/your-name/my-utils/issues"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/your-name/my-utils#readme"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-39">CLI å·¥å…·æ¨¡æ¿</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-cli"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å‘½ä»¤è¡Œå·¥å…·"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"cli"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"command-line"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"tool"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Your Name &lt;your-email@example.com&gt;"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MIT"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bin"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"my-cli"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/cli.js"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"preferGlobal"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"dist"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"templates"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"README.md"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"LICENSE"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest run"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prepublishOnly"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run build"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"commander"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^11.1.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"inquirer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.2.6"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"chalk"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.1.2"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tsup"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.3.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.5.4"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"vitest"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.5"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=14.0.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/your-name/my-cli.git"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bugs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/your-name/my-cli/issues"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/your-name/my-cli#readme"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-40">UI ç»„ä»¶åº“æ¨¡æ¿</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-components"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"React ç»„ä»¶åº“"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"react"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"components"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"ui"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Your Name &lt;your-email@example.com&gt;"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MIT"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"import"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"require"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"./style.css"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/style.css"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"dist"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"README.md"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"LICENSE"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"*.css"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest run"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prepublishOnly"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run build"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"clsx"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=16.8.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=16.8.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@types/react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"tsup"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.3.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.5.4"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=14.0.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/your-name/my-components.git"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bugs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/your-name/my-components/issues"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/your-name/my-components#readme"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-41">Hooks åº“æ¨¡æ¿</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-hooks"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å®ç”¨çš„ React Hooks é›†åˆ"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"react"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"hooks"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"custom-hooks"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Your Name &lt;your-email@example.com&gt;"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MIT"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"import"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"require"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"dist"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"README.md"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"LICENSE"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsup --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest run"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prepublishOnly"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run build"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=16.8.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@types/react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"tsup"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.3.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.5.4"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"vitest"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.5"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=14.0.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/your-name/my-hooks.git"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bugs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/your-name/my-hooks/issues"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/your-name/my-hooks#readme"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-42">å­—æ®µé€ŸæŸ¥è¡¨</h4>





















































































































<table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>é€‚ç”¨åœºæ™¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>âœ…</td><td>æ‰€æœ‰é¡¹ç›®</td><td>é¡¹ç›®åç§°ï¼ˆnpm åŒ…éœ€å”¯ä¸€ï¼‰</td></tr><tr><td><code>version</code></td><td>string</td><td>âœ…</td><td>æ‰€æœ‰é¡¹ç›®</td><td>ç‰ˆæœ¬å·ï¼ˆnpm åŒ…å¿…å¡«ï¼‰</td></tr><tr><td><code>description</code></td><td>string</td><td>âœ…</td><td>npm åŒ…</td><td>é¡¹ç›®æè¿°</td></tr><tr><td><code>private</code></td><td>boolean</td><td>âœ…</td><td>åº”ç”¨é¡¹ç›®</td><td>é˜²æ­¢è¯¯å‘å¸ƒ</td></tr><tr><td><code>main</code></td><td>string</td><td>âœ…</td><td>npm åŒ…</td><td>CJS å…¥å£</td></tr><tr><td><code>module</code></td><td>string</td><td>âœ…</td><td>npm åŒ…</td><td>ESM å…¥å£</td></tr><tr><td><code>types</code></td><td>string</td><td>âœ…</td><td>TS npm åŒ…</td><td>ç±»å‹å£°æ˜</td></tr><tr><td><code>exports</code></td><td>object</td><td>æ¨è</td><td>npm åŒ…</td><td>æ¡ä»¶å¯¼å‡ºï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰</td></tr><tr><td><code>bin</code></td><td>object/string</td><td>âœ…</td><td>CLI å·¥å…·</td><td>å‘½ä»¤æ˜ å°„</td></tr><tr><td><code>sideEffects</code></td><td>boolean/array</td><td>æ¨è</td><td>npm åŒ…</td><td>Tree-shaking ä¼˜åŒ–</td></tr><tr><td><code>peerDependencies</code></td><td>object</td><td>âœ…</td><td>ç»„ä»¶åº“/Hooksåº“</td><td>å¯¹ç­‰ä¾èµ–</td></tr><tr><td><code>files</code></td><td>array</td><td>âœ…</td><td>npm åŒ…</td><td>å‘å¸ƒæ–‡ä»¶åˆ—è¡¨</td></tr><tr><td><code>scripts</code></td><td>object</td><td>âœ…</td><td>æ‰€æœ‰é¡¹ç›®</td><td>è‡ªå®šä¹‰è„šæœ¬</td></tr><tr><td><code>dependencies</code></td><td>object</td><td>-</td><td>æ‰€æœ‰é¡¹ç›®</td><td>ç”Ÿäº§ä¾èµ–</td></tr><tr><td><code>devDependencies</code></td><td>object</td><td>-</td><td>æ‰€æœ‰é¡¹ç›®</td><td>å¼€å‘ä¾èµ–</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-43">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.npmjs.com%2Fcli%2Fv10%2Fconfiguring-npm%2Fpackage-json" target="_blank" title="https://docs.npmjs.com/cli/v10/configuring-npm/package-json" ref="nofollow noopener noreferrer">npm å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fapi%2Fpackages.html%23exports" target="_blank" title="https://nodejs.org/api/packages.html#exports" ref="nofollow noopener noreferrer">Node.js Package Exports</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsemver.org%2F" target="_blank" title="https://semver.org/" ref="nofollow noopener noreferrer">Semantic Versioning</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[NOTE] JavaScript ä¸­çš„ç¨€ç–æ•°ç»„ã€ç©ºæ§½å’Œè®¿é—®]]></title>    <link>https://juejin.cn/post/7577364921656754218</link>    <guid>https://juejin.cn/post/7577364921656754218</guid>    <pubDate>2025-11-28T04:57:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577364921656754218" data-draft-id="7577364921656721450" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[NOTE] JavaScript ä¸­çš„ç¨€ç–æ•°ç»„ã€ç©ºæ§½å’Œè®¿é—®"/> <meta itemprop="keywords" content="JavaScript,V8,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-28T04:57:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mCell"/> <meta itemprop="url" content="https://juejin.cn/user/2280829967146779"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [NOTE] JavaScript ä¸­çš„ç¨€ç–æ•°ç»„ã€ç©ºæ§½å’Œè®¿é—®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2280829967146779/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mCell
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T04:57:28.000Z" title="Fri Nov 28 2025 04:57:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ ‡é¢˜ä¸­çš„<code>[NOTE]</code>è¡¨ç¤ºå½“å‰æ–‡ç« æ˜¯ç¯‡å°è®°ï¼Œç¯‡å¹…è¾ƒçŸ­ï¼Œèšç„¦ä¸€ä¸ªå°é—®é¢˜ã€‚</p>
</blockquote>
<p>æˆ‘å†™äº†ä¸ª Demo ï¼Œæƒ³çœ‹çœ‹ JavaScript çš„æ•°ç»„å¯¹äºå£°æ˜ä½†æ²¡æœ‰è¢«ä½¿ç”¨çš„ç©ºé—´ä¼šå¦‚ä½•å¤„ç†ï¼›ç›´æ¥çœ‹ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>] 

arr.<span class="hljs-property">length</span> = <span class="hljs-number">10</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"arr: "</span>, arr)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"typeof last item: "</span>, <span class="hljs-keyword">typeof</span> (arr[arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]))
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">arr:  [ 1, 2, 3, 4, 5, &lt;5 empty items&gt; ]
typeof last item:  undefined
</code></pre>
<p>è¿™é‡Œå‡ºç°äº†ä¸€äº›é™Œç”Ÿçš„å®šä¹‰ï¼Œ<code>empty items</code>ï¼Œæˆ‘å¹¶ä¸æ¸…æ¥šè¿™ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Œå°è¯•æ‰“å°å‡ºæ¥ä¹‹åè¿”å›çš„æ˜¯<code>undefined</code>ï¼›</p>
<p>æŠ±ç€å¥½å¥‡å¿ƒæ€ï¼Œæˆ‘å»æœäº†ä¸€ç•ªï¼š</p>
<p>æ•´ä¸ªè¡Œä¸ºçš„èƒŒåæ˜¯ JavaScript æ•°ç»„çš„Â <strong>ç¨€ç–æ•°ç»„</strong>Â æœºåˆ¶ï¼š</p>
<ul>
<li>
<p><strong>ç¨€ç–æ•°ç»„ï¼š</strong> Â å½“ä½ å°†æ•°ç»„çš„Â <code>length</code>Â è®¾ç½®ä¸ºä¸€ä¸ªæ¯”å®é™…å…ƒç´ æ•°ç›®æ›´å¤§çš„å€¼æ—¶ï¼Œæ•°ç»„ä¼šå˜æˆä¸€ä¸ªç¨€ç–æ•°ç»„ã€‚æ•°ç»„ä¸­è¶…å‡ºåŸæœ¬å…ƒç´ èŒƒå›´çš„ç´¢å¼•ä¼šå˜æˆÂ <strong>ç©ºæ§½</strong>ï¼Œè¿™äº›ç©ºæ§½åœ¨è¾“å‡ºæ—¶æ˜¾ç¤ºä¸ºÂ <code>&lt;empty items&gt;</code>ã€‚</p>
</li>
<li>
<p><strong>è®¿é—®ç©ºæ§½ï¼š</strong> Â å°è¯•è®¿é—®ç©ºæ§½æ—¶ï¼ŒJavaScript è¿”å›çš„æ˜¯Â <code>undefined</code>ï¼Œå› æ­¤Â <code>typeof arr[arr.length - 1]</code>Â è¿”å›Â <code>undefined</code></p>
</li>
</ul>
<p><code>typeof</code>Â æ“ä½œç¬¦è¿”å›çš„æ˜¯Â <code>undefined</code>ï¼Œå› ä¸ºè®¿é—®çš„ç´¢å¼•æ˜¯â€œç©ºæ§½â€ã€‚è¿™äº›ç©ºæ§½åœ¨ JavaScript å†…éƒ¨å¹¶æ²¡æœ‰å€¼ï¼Œæ‰€ä»¥å½“ä½ å°è¯•è®¿é—®å®ƒä»¬æ—¶ï¼ŒJavaScript ä¼šè‡ªåŠ¨å°†å®ƒä»¬è§†ä½œÂ <code>undefined</code>ã€‚</p>
<p>é‚£ä¹ˆç”±æ­¤æˆ‘åˆåœ¨æƒ³å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œç¨€ç–æ•°ç»„åœ¨å†…å­˜ä¸­åˆ°åº•æ˜¯æ€ä¹ˆå­˜æ”¾çš„ï¼Ÿ</p>
<p>æˆ‘ä»¬å·²çŸ¥çš„æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹æ•°ç»„åœ¨å†…å­˜ä¸­éƒ½æ˜¯è¿ç»­å­˜æ”¾ï¼Œæ¯”å¦‚:<code>[1, 2, 3, 4, 5]</code>ï¼Œä»–ä»¬åœ¨å†…å­˜ä¸­çš„åœ°å€éƒ½æ˜¯è¿ç»­çš„ï¼Œåƒè¿™æ ·:<code>xxx1,xxx2,xxx3,xxx4,xxx5</code>ï¼›ä½†æ˜¯å¯¹äºå¸¦æœ‰ç©ºæ§½çš„ç¨€ç–æ•°ç»„å‘¢ï¼Ÿ</p>
<blockquote>
<p>è¿™ä¸ªé—®é¢˜ï¼Œç•™ç»™å¤§å®¶å§ï¼›ä¼šæ¶‰åŠä¸€äº›åº•å±‚çŸ¥è¯†ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FArray%23%25E6%2595%25B0%25E7%25BB%2584%25E6%2596%25B9%25E6%25B3%2595%25E5%2592%258C%25E7%25A9%25BA%25E6%25A7%25BD" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array#%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%E5%92%8C%E7%A9%BA%E6%A7%BD" ref="nofollow noopener noreferrer">MDN - JavaScript æ•°ç»„æ–¹æ³•å’Œç©ºæ§½</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openGausså‘é‡æ•°æ®åº“ï¼šå¼•é¢†AIæ—¶ä»£æ•°æ®æ™ºèƒ½æ–°çºªå…ƒ]]></title>    <link>https://juejin.cn/post/7577395040592052234</link>    <guid>https://juejin.cn/post/7577395040592052234</guid>    <pubDate>2025-11-28T05:01:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577395040592052234" data-draft-id="7577256255084544009" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openGausså‘é‡æ•°æ®åº“ï¼šå¼•é¢†AIæ—¶ä»£æ•°æ®æ™ºèƒ½æ–°çºªå…ƒ"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-28T05:01:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openGausså‘é‡æ•°æ®åº“ï¼šå¼•é¢†AIæ—¶ä»£æ•°æ®æ™ºèƒ½æ–°çºªå…ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T05:01:28.000Z" title="Fri Nov 28 2025 05:01:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å†™åœ¨å‰é¢</h2>
<p>éšç€äººå·¥æ™ºèƒ½å’Œå¤§è¯­è¨€æ¨¡å‹çš„å¿«é€Ÿå‘å±•ï¼Œå‘é‡æ•°æ®åº“å·²æˆä¸ºAIåº”ç”¨çš„å…³é”®åŸºç¡€è®¾æ–½ã€‚openGaussä½œä¸ºæ•°æ®åº“ç³»ç»Ÿï¼Œé€šè¿‡é›†æˆå‘é‡æ•°æ®åº“èƒ½åŠ›ï¼Œä¸ºä¼ä¸šæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„ã€é«˜æ€§èƒ½çš„ã€å®‰å…¨å¯é çš„æ•°æ®æ™ºèƒ½å¹³å°ã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†openGausså‘é‡æ•°æ®åº“çš„æ ¸å¿ƒç‰¹æ€§ã€æŠ€æœ¯æ¶æ„ï¼Œä»¥åŠåœ¨ä¼ä¸šçº§åº”ç”¨ä¸­çš„å®è·µæ¡ˆä¾‹ï¼Œå±•ç¤ºäº†å…¶åœ¨AIæ—¶ä»£å¦‚ä½•èµ‹èƒ½ä¼ä¸šæ•°æ®æ™ºèƒ½è½¬å‹ã€‚</p>
<h2 data-id="heading-1">é¢ä¸´çš„æŒ‘æˆ˜åŠä¼˜åŠ¿</h2>
<h4 data-id="heading-2">AIæ—¶ä»£çš„æ•°æ®æŒ‘æˆ˜</h4>
<p>åœ¨AIå’Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çˆ†å‘å¼å‘å±•çš„æ—¶ä»£ï¼Œä¼ä¸šé¢ä¸´ç€å‰æ‰€æœªæœ‰çš„æ•°æ®å¤„ç†æŒ‘æˆ˜ï¼š</p>
<ul>
<li>
<p><strong>éç»“æ„åŒ–æ•°æ®çˆ†ç‚¸</strong>ï¼šæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰éç»“æ„åŒ–æ•°æ®æˆä¸ºä¼ä¸šæ•°æ®èµ„äº§çš„ä¸»ä½“</p>
</li>
<li>
<p><strong>è¯­ä¹‰æœç´¢éœ€æ±‚</strong>ï¼šä¼ ç»Ÿå…³é”®è¯åŒ¹é…å·²æ— æ³•æ»¡è¶³å¤æ‚çš„ä¸šåŠ¡æŸ¥è¯¢éœ€æ±‚</p>
</li>
<li>
<p><strong>å®æ—¶æ™ºèƒ½åº”ç”¨</strong>ï¼šéœ€è¦å¿«é€Ÿã€å‡†ç¡®åœ°è¿›è¡Œå‘é‡ç›¸ä¼¼åº¦è®¡ç®—å’Œæ£€ç´¢</p>
</li>
<li>
<p><strong>æ•°æ®å®‰å…¨åˆè§„</strong>ï¼šä¼ä¸šæ•°æ®å¿…é¡»åœ¨å›½å†…å¯æ§çš„ç¯å¢ƒä¸­å¤„ç†å’Œå­˜å‚¨</p>
</li>
</ul>
<h4 data-id="heading-3">å‘é‡æ•°æ®åº“çš„å¿…è¦æ€§</h4>
<p>å‘é‡æ•°æ®åº“é€šè¿‡å°†éç»“æ„åŒ–æ•°æ®è½¬æ¢ä¸ºé«˜ç»´å‘é‡è¡¨ç¤ºï¼Œå®ç°äº†ï¼š</p>
<ul>
<li>
<p>è¯­ä¹‰çº§åˆ«çš„ç›¸ä¼¼åº¦æœç´¢</p>
</li>
<li>
<p>æ¯«ç§’çº§çš„æŸ¥è¯¢å“åº”æ—¶é—´</p>
</li>
<li>
<p>æ”¯æŒå¤§è§„æ¨¡æ•°æ®é›†çš„é«˜æ•ˆæ£€ç´¢</p>
</li>
<li>
<p>ä¸LLMçš„æ— ç¼é›†æˆ</p>
</li>
</ul>
<h4 data-id="heading-4">openGausså‘é‡æ•°æ®åº“çš„ä¼˜åŠ¿</h4>
<p>openGausså‘é‡æ•°æ®åº“ç»“åˆäº†openGaussæ•°æ®åº“çš„ä¼ä¸šçº§ç‰¹æ€§ä¸å‘é‡æ•°æ®åº“çš„AIèƒ½åŠ›ï¼š</p>
<ul>
<li>
<p><strong>ä¼ä¸šçº§å¯é æ€§</strong>ï¼šæ”¯æŒé«˜å¯ç”¨ã€å®¹ç¾ã€å¤‡ä»½ç­‰ä¼ä¸šçº§ç‰¹æ€§</p>
</li>
<li>
<p><strong>ç»Ÿä¸€å¹³å°</strong>ï¼šç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ®åœ¨åŒä¸€æ•°æ®åº“ä¸­ç®¡ç†</p>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜å¼‚</strong>ï¼šé’ˆå¯¹å‘é‡æ“ä½œè¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–</p>
</li>
<li>
<p><strong>ç”Ÿæ€å®Œå–„</strong>ï¼šä¸å›½å†…AIç”Ÿæ€æ·±åº¦èåˆ</p>
</li>
</ul>
<h2 data-id="heading-5">openGausså‘é‡æ•°æ®åº“æ ¸å¿ƒç‰¹æ€§</h2>
<h4 data-id="heading-6">å‘é‡æ•°æ®ç±»å‹ä¸ç´¢å¼•</h4>
<p>openGausså‘é‡æ•°æ®åº“æ”¯æŒå¤šç§å‘é‡æ•°æ®ç±»å‹å’Œé«˜æ•ˆçš„ç´¢å¼•æœºåˆ¶ï¼š</p>
<p><strong>å‘é‡****æ•°æ®ç±»å‹</strong></p>
<p>CREATE TABLE embeddings (</p>
<p>id BIGSERIAL PRIMARY KEY,</p>
<p>content TEXT,</p>
<p>embedding vector(1536),</p>
<p>created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</p>
<p>);</p>
<p><strong>å‘é‡ç´¢å¼•</strong></p>
<ul>
<li>
<p><strong>HNSWç´¢å¼•</strong>ï¼šHierarchical Navigable Small Worldï¼Œé€‚åˆé«˜ç»´å‘é‡</p>
</li>
<li>
<p><strong>IVFFlatç´¢å¼•</strong>ï¼šå€’æ’æ–‡ä»¶ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®é›†</p>
</li>
<li>
<p><strong>PQ****ç´¢å¼•</strong>ï¼šä¹˜ç§¯é‡åŒ–ï¼Œæè‡´å‹ç¼©</p>
</li>
</ul>
<h4 data-id="heading-7">å‘é‡ç›¸ä¼¼åº¦è®¡ç®—</h4>
<p>æ”¯æŒå¤šç§è·ç¦»åº¦é‡æ–¹å¼ï¼š</p>
<ul>
<li>
<p><strong>æ¬§æ°è·ç¦»</strong>**ï¼ˆL2ï¼‰**ï¼š&lt;-&gt;æ“ä½œç¬¦</p>
</li>
<li>
<p><strong>ä½™å¼¦ç›¸ä¼¼åº¦</strong>**ï¼ˆ<strong><strong>Cosine</strong></strong>ï¼‰**ï¼š&lt;=&gt;æ“ä½œç¬¦</p>
</li>
<li>
<p><strong>å†…ç§¯ï¼ˆInner Productï¼‰</strong>ï¼š&lt;#&gt;æ“ä½œç¬¦</p>
</li>
</ul>
<p>SELECT id, content, embedding &lt;-&gt; query_embedding AS distance</p>
<p>FROM embeddings</p>
<p>ORDER BY embedding &lt;-&gt; query_embedding</p>
<p>LIMIT 10;</p>
<h4 data-id="heading-8">æ··åˆæŸ¥è¯¢èƒ½åŠ›</h4>
<p>åœ¨åŒä¸€ä¸ªæŸ¥è¯¢ä¸­ç»“åˆç»“æ„åŒ–å’Œå‘é‡åŒ–æœç´¢ï¼š</p>
<p>SELECT id, content, category, embedding &lt;-&gt; query_embedding AS distance</p>
<p>FROM embeddings</p>
<p>WHERE category = 'technology'</p>
<p>AND created_at &gt; NOW() - INTERVAL '30 days'</p>
<p>ORDER BY embedding &lt;-&gt; query_embedding</p>
<p>LIMIT 20;</p>
<h4 data-id="heading-9">ä¼ä¸šçº§ç‰¹æ€§</h4>
<ul>
<li>
<p><strong>é«˜å¯ç”¨</strong>ï¼šæ”¯æŒä¸»å¤‡ã€çº§è”å¤‡ä»½</p>
</li>
<li>
<p><strong>å®¹ç¾</strong>ï¼šæ”¯æŒè·¨åœ°åŸŸå®¹ç¾éƒ¨ç½²</p>
</li>
<li>
<p><strong>å¤‡ä»½æ¢å¤</strong>ï¼šå®Œæ•´çš„å¤‡ä»½å’Œæ¢å¤æœºåˆ¶</p>
</li>
<li>
<p><strong>å®‰å…¨åŠ å¯†</strong>ï¼šæ”¯æŒä¼ è¾“å±‚å’Œå­˜å‚¨å±‚åŠ å¯†</p>
</li>
<li>
<p><strong>æƒé™ç®¡ç†</strong>ï¼šç»†ç²’åº¦çš„ç”¨æˆ·æƒé™æ§åˆ¶</p>
</li>
<li>
<p><strong>å®¡è®¡æ—¥å¿—</strong>ï¼šå®Œæ•´çš„æ“ä½œå®¡è®¡è·Ÿè¸ª</p>
</li>
</ul>
<h2 data-id="heading-10">æŠ€æœ¯æ¶æ„</h2>
<h4 data-id="heading-11">é¡¹ç›®ç»“æ„</h4>
<p>src/</p>
<p>â”œâ”€â”€ main/</p>
<p>â”‚ â”œâ”€â”€ java/com/openGauss/</p>
<p>â”‚ â”‚ â”œâ”€â”€ VectorKnowledgeManagementApplication.java # ä¸»åº”ç”¨ç±»</p>
<p>â”‚ â”‚ â”œâ”€â”€ controller/ # RESTæ§åˆ¶å™¨</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ DocumentController.java</p>
<p>â”‚ â”‚ â”‚ â””â”€â”€ SearchController.java</p>
<p>â”‚ â”‚ â”œâ”€â”€ service/ # ä¸šåŠ¡æœåŠ¡</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ DocumentService.java</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ EmbeddingService.java</p>
<p>â”‚ â”‚ â”‚ â””â”€â”€ VectorSearchService.java</p>
<p>â”‚ â”‚ â”œâ”€â”€ repository/ # æ•°æ®è®¿é—®å±‚</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ DocumentRepository.java</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ DocumentChunkRepository.java</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ DocumentPermissionRepository.java</p>
<p>â”‚ â”‚ â”‚ â””â”€â”€ SearchLogRepository.java</p>
<p>â”‚ â”‚ â”œâ”€â”€ entity/ # æ•°æ®å®ä½“</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ Document.java</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ DocumentChunk.java</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ DocumentPermission.java</p>
<p>â”‚ â”‚ â”‚ â””â”€â”€ SearchLog.java</p>
<p>â”‚ â”‚ â””â”€â”€ dto/ # æ•°æ®ä¼ è¾“å¯¹è±¡</p>
<p>â”‚ â”‚ â”œâ”€â”€ DocumentDTO.java</p>
<p>â”‚ â”‚ â”œâ”€â”€ SearchQuery.java</p>
<p>â”‚ â”‚ â””â”€â”€ SearchResult.java</p>
<p>â”‚ â””â”€â”€ resources/</p>
<p>â”‚ â””â”€â”€ application.yml # åº”ç”¨é…ç½®</p>
<p>â””â”€â”€ test/</p>
<p>â””â”€â”€ java/com/openGauss/service/</p>
<p>â””â”€â”€ EmbeddingServiceTest.java # å•å…ƒæµ‹è¯•</p>
<h4 data-id="heading-12">å‘é‡ç´¢å¼•æœºåˆ¶</h4>
<p><strong>HNSWç´¢å¼•ï¼ˆæ¨èç”¨äºå®æ—¶æŸ¥è¯¢ï¼‰</strong></p>
<ul>
<li>
<p>åˆ†å±‚ç»“æ„ï¼Œæ”¯æŒå¿«é€Ÿè¿‘ä¼¼æœ€è¿‘é‚»æœç´¢</p>
</li>
<li>
<p>æŸ¥è¯¢å¤æ‚åº¦ï¼šO(log N)</p>
</li>
<li>
<p>é€‚åˆï¼šå®æ—¶åº”ç”¨ã€ä¸­ç­‰è§„æ¨¡æ•°æ®é›†ï¼ˆç™¾ä¸‡çº§ï¼‰</p>
</li>
</ul>
<p><strong>IVFFlatç´¢å¼•ï¼ˆæ¨èç”¨äºå¤§è§„æ¨¡æ•°æ®ï¼‰</strong></p>
<ul>
<li>
<p>å€’æ’æ–‡ä»¶ç»“æ„ï¼Œå°†å‘é‡ç©ºé—´åˆ†å‰²ä¸ºå¤šä¸ªèšç±»</p>
</li>
<li>
<p>æŸ¥è¯¢å¤æ‚åº¦ï¼šO(k log N)</p>
</li>
<li>
<p>é€‚åˆï¼šå¤§è§„æ¨¡æ•°æ®é›†ï¼ˆåƒä¸‡çº§ä»¥ä¸Šï¼‰</p>
</li>
</ul>
<p><strong>PQ****ç´¢å¼•ï¼ˆæ¨èç”¨äºè¶…å¤§è§„æ¨¡æ•°æ®ï¼‰</strong></p>
<ul>
<li>
<p>ä¹˜ç§¯é‡åŒ–ï¼Œæè‡´å‹ç¼©</p>
</li>
<li>
<p>å†…å­˜å ç”¨ï¼šåŸå§‹å‘é‡çš„1-10%</p>
</li>
<li>
<p>é€‚åˆï¼šè¶…å¤§è§„æ¨¡æ•°æ®é›†ã€å†…å­˜å—é™åœºæ™¯</p>
</li>
</ul>
<h2 data-id="heading-13">è¯¦ç»†æ¡ˆä¾‹åˆ†æï¼šä¼ä¸šçº§æ™ºèƒ½çŸ¥è¯†ç®¡ç†ç³»ç»Ÿ</h2>
<h4 data-id="heading-14">æ¡ˆä¾‹èƒŒæ™¯</h4>
<p><strong>ä¼ä¸š</strong>ï¼šæŸå¤§å‹é‡‘èç§‘æŠ€å…¬å¸ <strong>è§„æ¨¡</strong>ï¼šå‘˜å·¥5000+ï¼Œæ—¥å‡æ–‡æ¡£å¤„ç†é‡10ä¸‡+ <strong>æŒ‘æˆ˜</strong>ï¼š</p>
<ul>
<li>
<p>ä¼ä¸šå†…éƒ¨ç§¯ç´¯äº†æ•°ç™¾ä¸‡ä»½æ–‡æ¡£ï¼ˆåˆåŒã€æŠ¥å‘Šã€é‚®ä»¶ç­‰ï¼‰</p>
</li>
<li>
<p>å‘˜å·¥éœ€è¦å¿«é€ŸæŸ¥æ‰¾ç›¸å…³æ–‡æ¡£å’ŒçŸ¥è¯†</p>
</li>
<li>
<p>ä¼ ç»Ÿå…³é”®è¯æœç´¢å‡†ç¡®ç‡ä½ï¼Œç”¨æˆ·ä½“éªŒå·®</p>
</li>
<li>
<p>éœ€è¦æ”¯æŒè·¨éƒ¨é—¨çš„çŸ¥è¯†å…±äº«å’Œå¤ç”¨</p>
</li>
</ul>
<h4 data-id="heading-15">è§£å†³æ–¹æ¡ˆæ¶æ„</h4>
<h5 data-id="heading-16">æ ¸å¿ƒæ¨¡å—è¯´æ˜</h5>
<ol>
<li><strong>DefectFeatureExtractorï¼ˆç‰¹å¾æå–å™¨ï¼‰</strong></li>
</ol>
<p>åŠŸèƒ½ï¼šä»äº§å“å›¾åƒä¸­æå–ç‰¹å¾å‘é‡</p>
<p><strong>ä¸»è¦æ–¹æ³•ï¼š</strong></p>
<ul>
<li>
<p><code>extractFeatures(String imagePath)</code> - ä»å›¾åƒæå–ç‰¹å¾å‘é‡</p>
</li>
<li>
<p><code>storeDefectFeature(...)</code> - å°†ç¼ºé™·ç‰¹å¾å­˜å‚¨åˆ°æ•°æ®åº“</p>
</li>
<li>
<p><code>resizeImage(...)</code> - è°ƒæ•´å›¾åƒå¤§å°</p>
</li>
<li>
<p><code>imageToArray(...)</code> - å°†å›¾åƒè½¬æ¢ä¸ºå¼ é‡å¹¶å½’ä¸€åŒ–</p>
</li>
</ul>
<p><strong>ä¾èµ–ï¼š</strong></p>
<ul>
<li>
<p>DeepLearning4j - æ·±åº¦å­¦ä¹ æ¡†æ¶</p>
</li>
<li>
<p>ND4J - å¼ é‡è®¡ç®—åº“</p>
</li>
<li>
<p>PostgreSQL JDBCé©±åŠ¨</p>
</li>
</ul>
<ol>
<li><strong>DefectClassifierï¼ˆç¼ºé™·<strong><strong>åˆ†ç±»å™¨</strong></strong>ï¼‰</strong></li>
</ol>
<p>åŠŸèƒ½ï¼šé€šè¿‡å‘é‡ç›¸ä¼¼åº¦æœç´¢å¯¹ç¼ºé™·è¿›è¡Œåˆ†ç±»</p>
<p><strong>ä¸»è¦æ–¹æ³•ï¼š</strong></p>
<ul>
<li>
<p><code>classifyDefect(float[] featureVector, int topK)</code> - åˆ†ç±»ç¼ºé™·</p>
</li>
<li>
<p><code>getDefectStatistics(String defectType, int days)</code> - è·å–ç¼ºé™·ç»Ÿè®¡</p>
</li>
</ul>
<p><strong>è¾“å‡ºï¼š</strong></p>
<ul>
<li>
<p>DefectInfo - ç¼ºé™·ä¿¡æ¯ï¼ˆIDã€ç±»å‹ã€ç›¸ä¼¼åº¦ã€ä¸¥é‡ç¨‹åº¦ç­‰ï¼‰</p>
</li>
<li>
<p>DefectStatistics - ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ•°é‡ã€å¹³å‡ä¸¥é‡ç¨‹åº¦ç­‰ï¼‰</p>
</li>
</ul>
<ol>
<li>RootCauseAnalyzerï¼ˆæ ¹å› åˆ†æå™¨ï¼‰</li>
</ol>
<p>åŠŸèƒ½ï¼šåˆ†æç¼ºé™·æ ¹æœ¬åŸå› å¹¶é¢„æµ‹è®¾å¤‡ç»´æŠ¤éœ€æ±‚</p>
<p><strong>ä¸»è¦æ–¹æ³•ï¼š</strong></p>
<ul>
<li>
<p><code>analyzeRootCause(...)</code> - åˆ†æç¼ºé™·æ ¹æœ¬åŸå› </p>
</li>
<li>
<p><code>predictEquipmentMaintenance(...)</code> - é¢„æµ‹ç»´æŠ¤éœ€æ±‚</p>
</li>
<li>
<p><code>cosineSimilarity(...)</code> - è®¡ç®—å‘é‡ä½™å¼¦ç›¸ä¼¼åº¦</p>
</li>
</ul>
<p><strong>åˆ†æé€»è¾‘</strong>ï¼š</p>
<ul>
<li>
<p>ç›¸ä¼¼åº¦ &gt; 0.85ï¼šç³»ç»Ÿæ€§é—®é¢˜ï¼Œéœ€è¦æ£€æŸ¥è®¾å¤‡</p>
</li>
<li>
<p>ç›¸ä¼¼åº¦ â‰¤ 0.85ï¼šéšæœºç¼ºé™·ï¼ŒåŠ å¼ºç›‘æ§</p>
</li>
</ul>
<h5 data-id="heading-17">æ•°æ®åº“è®¾è®¡</h5>
<p>-- æ–‡æ¡£è¡¨</p>
<p>CREATE TABLE documents (</p>
<p>doc_id BIGSERIAL PRIMARY KEY,</p>
<p>title VARCHAR(500) NOT NULL,</p>
<p>content TEXT NOT NULL,</p>
<p>doc_type VARCHAR(50),</p>
<p>department VARCHAR(100),</p>
<p>created_by VARCHAR(100),</p>
<p>created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</p>
<p>updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</p>
<p>is_deleted BOOLEAN DEFAULT FALSE</p>
<p>);</p>
<p>-- æ–‡æ¡£å—è¡¨ï¼ˆç”¨äºåˆ†å—å­˜å‚¨ï¼‰</p>
<p>CREATE TABLE document_chunks (</p>
<p>chunk_id BIGSERIAL PRIMARY KEY,</p>
<p>doc_id BIGINT REFERENCES documents(doc_id),</p>
<p>chunk_index INT,</p>
<p>chunk_text TEXT NOT NULL,</p>
<p>chunk_embedding vector(1536),</p>
<p>created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</p>
<p>);</p>
<p>-- ä¸ºå‘é‡åˆ—åˆ›å»ºHNSWç´¢å¼•</p>
<p>CREATE INDEX idx_chunk_embedding ON document_chunks</p>
<p>USING hnsw (chunk_embedding vector_cosine_ops)</p>
<p>WITH (m=16, ef_construction=200);</p>
<p>-- ç”¨æˆ·æƒé™è¡¨</p>
<p>CREATE TABLE document_permissions (</p>
<p>perm_id BIGSERIAL PRIMARY KEY,</p>
<p>doc_id BIGINT REFERENCES documents(doc_id),</p>
<p>user_id VARCHAR(100),</p>
<p>department VARCHAR(100),</p>
<p>permission_type VARCHAR(20),</p>
<p>created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</p>
<p>);</p>
<p>-- æœç´¢æ—¥å¿—è¡¨</p>
<p>CREATE TABLE search_logs (</p>
<p>log_id BIGSERIAL PRIMARY KEY,</p>
<p>user_id VARCHAR(100),</p>
<p>query_text TEXT,</p>
<p>query_embedding vector(1536),</p>
<p>result_count INT,</p>
<p>response_time_ms INT,</p>
<p>created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</p>
<p>);</p>
<h4 data-id="heading-18">æ ¸å¿ƒåŠŸèƒ½å®ç°</h4>
<h5 data-id="heading-19">æ–‡æ¡£å‘é‡åŒ–ä¸å­˜å‚¨</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9f685d6e11644bd8245160c47a1384f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764910888&amp;x-signature=KDIdXB%2BxiDngdG1l%2BhCGVU4fWqE%3D" alt="" loading="lazy"/></p>
<p>è¿™æ®µä»£ç æ˜¯ æ–‡æ¡£æ™ºèƒ½åŒ–å¤„ç†çš„æ ¸å¿ƒéª¨æ¶ï¼Œè®¾è®¡ä¸Šå…¼é¡¾äº†äº‹åŠ¡ä¸€è‡´æ€§ã€è¯­ä¹‰å‡†ç¡®æ€§å’Œå·¥ç¨‹å¯ç”¨æ€§ï¼Œå®Œæ•´è¦†ç›–äº† â€œéç»“æ„åŒ–æ–‡æ¡£â†’ç»“æ„åŒ–åˆ†å—â†’è¯­ä¹‰å‘é‡â†’æŒä¹…åŒ–å­˜å‚¨â€ çš„å…¨æµç¨‹ã€‚</p>
<p>å…¶æ ¸å¿ƒä»·å€¼åœ¨äºä¸ºåç»­çš„è¯­ä¹‰æ£€ç´¢ã€æ™ºèƒ½é—®ç­”ç­‰åœºæ™¯æä¾›é«˜è´¨é‡çš„æ•°æ®åŸºç¡€ï¼Œå°¤å…¶é€‚åˆå·¥ä¸šã€åŒ»ç–—ã€æ³•å¾‹ç­‰éœ€è¦ç²¾å‡†æ–‡æ¡£æ£€ç´¢çš„é¢†åŸŸã€‚é€šè¿‡ â€œé…ç½®åŒ–ã€å¼‚æ­¥åŒ–ã€æ‰¹é‡ä¼˜åŒ–ã€å‘é‡æ•°æ®åº“é€‚é…â€ ç­‰æ”¹è¿›ï¼Œå¯è¿›ä¸€æ­¥æå‡å…¶ç¨³å®šæ€§ã€æ•ˆç‡å’Œæ‰©å±•æ€§ï¼Œæ»¡è¶³é«˜å¹¶å‘ã€å¤§è§„æ¨¡æ–‡æ¡£å¤„ç†çš„ä¸šåŠ¡éœ€æ±‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e021207853084dc6b8bb73137e7326ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764910888&amp;x-signature=0KgwHpthW1wv3wpm8kEmj04NBos%3D" alt="" loading="lazy"/></p>
<p>è¿™æ®µæ–‡æœ¬åˆ†å—ä»£ç çš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯ â€œè¯­ä¹‰ä¼˜å…ˆã€ç²¾å‡†æ§åˆ¶ã€ä¸­æ–‡é€‚é…â€ï¼šé€šè¿‡å¥å­è¾¹ç•Œåˆ†å‰²ä¿è¯è¯­ä¹‰å®Œæ•´ï¼ŒåŸºäº token æ•°æ§åˆ¶åˆ†å—å¤§å°è´´åˆæ¨¡å‹éœ€æ±‚ï¼Œé‡å æœºåˆ¶é¿å…ä¸Šä¸‹æ–‡å‰²è£‚ï¼Œéå¸¸é€‚åˆä¸­æ–‡æ–‡æœ¬çš„å‘é‡åŒ–é¢„å¤„ç†ï¼ˆå¦‚å·¥ä¸šæ–‡æ¡£ã€çŸ¥è¯†åº“æ–‡æœ¬ï¼‰ã€‚</p>
<p>é€šè¿‡ â€œæ‰©å±•åˆ†å‰²æ­£åˆ™ã€æŒ‰ token æ•°æ§åˆ¶é‡å ã€æ·»åŠ æœ€å°åˆ†å—é™åˆ¶â€ ç­‰ä¼˜åŒ–ï¼Œå¯è¿›ä¸€æ­¥æå‡å…¶é²æ£’æ€§å’Œçµæ´»æ€§ï¼Œé€‚é…ä¸­è‹±æ–‡æ··åˆã€å¤šæ ¼å¼æ–‡æœ¬çš„åˆ†å—éœ€æ±‚ï¼Œä¸ºåç»­å‘é‡åŒ–å’Œè¯­ä¹‰æ£€ç´¢æä¾›æ›´é«˜è´¨é‡çš„åˆ†å—æ•°æ®ã€‚</p>
<h5 data-id="heading-20">æ™ºèƒ½æœç´¢æœåŠ¡</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0e5c1606dec4a169b8e769b019ea461~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764910888&amp;x-signature=x1pNKT%2FlX4yzDSb%2FpTe3s1gMmsg%3D" alt="" loading="lazy"/></p>
<p>è¯¥ä»£ç çš„æ ¸å¿ƒè®¾è®¡æ€è·¯ï¼ˆè¯­ä¹‰å‘é‡åŒ–â†’æƒé™ç®¡æ§â†’ç›¸ä¼¼åº¦åŒ¹é…â†’ç»“æœä¼˜åŒ–ï¼‰å®Œå…¨ç¬¦åˆæ–‡æ¡£æ£€ç´¢çš„ä¸šåŠ¡éœ€æ±‚ï¼Œä½† å…¨é‡éå†åˆ†å— å’Œ N+1 æŸ¥è¯¢ å¯¼è‡´å…¶æ— æ³•æ”¯æ’‘å¤§è§„æ¨¡æ–‡æ¡£æ£€ç´¢ï¼ˆå¦‚åˆ†å—æ•° &gt; 1 ä¸‡ï¼‰ã€‚</p>
<p>æœ€å…³é”®çš„ä¼˜åŒ–æ˜¯ è¿ç§»åˆ°ä¸“ä¸šå‘é‡æ•°æ®åº“ï¼Œç»“åˆ â€œæƒé™è¿‡æ»¤æŸ¥è¯¢ + æ‰¹é‡å…ƒä¿¡æ¯æŸ¥è¯¢ + ç¼“å­˜æœºåˆ¶â€ï¼Œå¯å°†æ£€ç´¢å“åº”æ—¶é—´ä»ç§’çº§é™è‡³æ¯«ç§’çº§ï¼Œæ»¡è¶³å®æ—¶æ£€ç´¢éœ€æ±‚ã€‚ä¼˜åŒ–åï¼Œè¯¥æ–¹æ³•å¯ç¨³å®šæ”¯æ’‘å·¥ä¸šçŸ¥è¯†åº“ã€ä¼ä¸šæ–‡æ¡£ä¸­å¿ƒç­‰åœºæ™¯çš„è¯­ä¹‰æ£€ç´¢ï¼Œä¸ºç”¨æˆ·æä¾›ç²¾å‡†ã€é«˜æ•ˆçš„ â€œä»¥æ–‡æœæ–‡â€ ä½“éªŒã€‚</p>
<h5 data-id="heading-21">æƒé™ç®¡ç†</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcdd6b2d5fd94be9905721bd542bfeeb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764910888&amp;x-signature=YAjrOdJfSeL2apoxYH%2BlkJAlCJc%3D" alt="" loading="lazy"/></p>
<p>è¯¥ä»£ç çš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯ â€œæµç¨‹é—­ç¯ã€æ™ºèƒ½åŒ–é›†æˆã€æƒé™åˆè§„â€ï¼šé€šè¿‡ç®€æ´çš„é€»è¾‘å®ç°äº†æ–‡æ¡£ä»åˆ›å»ºåˆ°å¯ç”¨ï¼ˆæ”¯æŒæ£€ç´¢ã€æƒé™å¯æ§ï¼‰çš„å…¨æµç¨‹ï¼ŒåŒæ—¶å¤ç”¨äº†å‘é‡åŒ–æœåŠ¡çš„èƒ½åŠ›ï¼Œé¿å…ä»£ç å†—ä½™ã€‚</p>
<p>é€šè¿‡ â€œè¾“å…¥æ ¡éªŒã€å¼‚æ­¥å‘é‡åŒ–ã€å¤šæ ¼å¼æ”¯æŒã€å»é‡æ ¡éªŒâ€ ç­‰ä¼˜åŒ–ï¼Œå¯è¿›ä¸€æ­¥æå‡æ¥å£çš„é²æ£’æ€§ã€å“åº”é€Ÿåº¦å’Œé€‚ç”¨åœºæ™¯ï¼Œä½¿å…¶æ›´ç¬¦åˆä¼ä¸šçº§æ–‡æ¡£ç®¡ç†çš„éœ€æ±‚ï¼ˆå¦‚é«˜å¹¶å‘ä¸Šä¼ ã€å¤šæ ¼å¼æ–‡æ¡£ã€ç²¾ç»†åŒ–æƒé™æ§åˆ¶ï¼‰ã€‚ä¼˜åŒ–åï¼Œè¯¥æ¥å£å¯ç¨³å®šæ”¯æ’‘å·¥ä¸šçŸ¥è¯†åº“ã€ä¼ä¸šæ–‡æ¡£ä¸­å¿ƒç­‰åœºæ™¯çš„æ–‡æ¡£å½•å…¥å·¥ä½œï¼Œä¸ºåç»­çš„æ£€ç´¢ã€ç®¡ç†ã€å…±äº«å¥ å®šåšå®åŸºç¡€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73ec36ecc0ec42579383cf6008f44234~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764910888&amp;x-signature=N%2FMKl3m2b8OQxXE3KwRBd5TXPOs%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•å›´ç»• â€œæ–‡æ¡£æƒé™â€ æ ¸å¿ƒï¼Œå®ç°äº† â€œæŸ¥è¯¢å¯è®¿é—®æ–‡æ¡£â€ å’Œ â€œæˆäºˆæƒé™â€ çš„åŸºç¡€èƒ½åŠ›ï¼Œé€»è¾‘ç®€æ´ã€å®‰å…¨æ€§é«˜ï¼ŒåŸºæœ¬æ»¡è¶³æ–‡æ¡£åä½œçš„æ ¸å¿ƒéœ€æ±‚ã€‚ä½†å½“å‰å­˜åœ¨ æ€§èƒ½ç“¶é¢ˆï¼ˆå…¨é‡æŸ¥è¯¢ï¼‰ã€æ•°æ®å†—ä½™ï¼ˆé‡å¤æˆæƒï¼‰ã€å‚æ•°æ ¡éªŒç¼ºå¤± ç­‰é—®é¢˜ï¼Œéœ€é€šè¿‡ â€œæ•°æ®åº“å±‚é¢è¿‡æ»¤ã€åˆ†é¡µæŸ¥è¯¢ã€é‡å¤æ ¡éªŒã€å‚æ•°æ ¡éªŒâ€ ç­‰ä¼˜åŒ–æ‰‹æ®µè§£å†³ã€‚</p>
<p>ä¼˜åŒ–åï¼Œè¯¥æƒé™ç®¡ç†æ¨¡å—å¯æ”¯æ’‘ä¼ä¸šçº§æ–‡æ¡£ç³»ç»Ÿçš„æ ¸å¿ƒåœºæ™¯ï¼š</p>
<p>æ™®é€šç”¨æˆ·ï¼šæŸ¥çœ‹è‡ªå·±æœ‰æƒè®¿é—®çš„æ–‡æ¡£ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ï¼‰ï¼›</p>
<p>æ–‡æ¡£ç®¡ç†å‘˜ï¼šæˆæƒä»–äººè®¿é—®æ–‡æ¡£ï¼ˆæ”¯æŒç”¨æˆ·çº§ã€éƒ¨é—¨çº§æˆæƒï¼Œé¿å…é‡å¤æ“ä½œï¼‰ï¼›</p>
<p>ç³»ç»Ÿå®‰å…¨ï¼šä¸¥æ ¼çš„æƒé™æ ¡éªŒï¼Œç¡®ä¿æ•°æ®ä¸æ³„éœ²ã€ä¸è¶Šæƒã€‚</p>
<p>é€‚ç”¨äºå·¥ä¸šçŸ¥è¯†åº“ã€ä¼ä¸šæ–‡æ¡£ä¸­å¿ƒã€å›¢é˜Ÿåä½œå¹³å°ç­‰åœºæ™¯ï¼Œä¸ºæ–‡æ¡£çš„ â€œå­˜å‚¨ - ç®¡ç† - å…±äº« - æ£€ç´¢â€ å…¨æµç¨‹æä¾›å®‰å…¨å¯é çš„æƒé™æ”¯æ’‘ã€‚</p>
<h4 data-id="heading-22">æ€§èƒ½æŒ‡æ ‡ä¸ä¼˜åŒ–</h4>
<h5 data-id="heading-23">æ€§èƒ½åŸºå‡†</h5>
<p><strong>æŒ‡æ ‡</strong></p>
<p><strong>ç›®æ ‡</strong></p>
<p><strong>å®ç°</strong></p>
<p><strong>è¯´æ˜</strong></p>
<p>å•æ¬¡æŸ¥è¯¢å»¶è¿Ÿ</p>
<p>&lt;100ms</p>
<p>45ms</p>
<p>åŸºäºHNSWç´¢å¼•ï¼Œ100ä¸‡æ–‡æ¡£</p>
<p>ååé‡</p>
<p>&gt;1000 QPS</p>
<p>1500 QPS</p>
<p>å¹¶å‘æŸ¥è¯¢å¤„ç†èƒ½åŠ›</p>
<p>ç´¢å¼•å¤§å°</p>
<p>&lt;åŸå§‹æ•°æ®çš„20%</p>
<p>15%</p>
<p>å‘é‡å‹ç¼©å’Œä¼˜åŒ–</p>
<p>å†…å­˜å ç”¨</p>
<p>&lt;æ€»æ•°æ®çš„30%</p>
<p>25%</p>
<p>ç¼“å­˜å’Œç´¢å¼•ä¼˜åŒ–</p>
<p>å¯ç”¨æ€§</p>
<p>&gt;99.9%</p>
<p>99.95%</p>
<p>ä¸»å¤‡è‡ªåŠ¨è½¬ç§»</p>
<h5 data-id="heading-24">ä¼˜åŒ–ç­–ç•¥</h5>
<ol>
<li><strong>ç´¢å¼•ä¼˜åŒ–</strong></li>
</ol>
<p>CREATE INDEX idx_chunk_embedding ON document_chunks</p>
<p>USING hnsw (chunk_embedding vector_cosine_ops)</p>
<p>WITH (m=16, ef_construction=200, ef_search=100);</p>
<ol>
<li><strong>æŸ¥è¯¢ä¼˜åŒ–</strong></li>
</ol>
<p>SELECT * FROM document_chunks</p>
<p>WHERE chunk_embedding &lt;-&gt; query_embedding &lt; 0.5</p>
<p>ORDER BY chunk_embedding &lt;-&gt; query_embedding</p>
<p>LIMIT 100;</p>
<ol>
<li><strong>ç¼“å­˜ç­–ç•¥</strong></li>
</ol>
<ul>
<li>
<p>çƒ­ç‚¹æŸ¥è¯¢ç¼“å­˜ï¼šç¼“å­˜é¢‘ç¹æŸ¥è¯¢çš„ç»“æœ</p>
</li>
<li>
<p>å‘é‡ç¼“å­˜ï¼šç¼“å­˜å¸¸ç”¨çš„æŸ¥è¯¢å‘é‡</p>
</li>
<li>
<p>å…ƒæ•°æ®ç¼“å­˜ï¼šç¼“å­˜æ–‡æ¡£å…ƒæ•°æ®</p>
</li>
</ul>
<h4 data-id="heading-25">å®æ–½æˆæœ</h4>
<h5 data-id="heading-26">ä¸šåŠ¡æˆæœ</h5>
<p><strong>æŒ‡æ ‡</strong></p>
<p><strong>å®æ–½å‰</strong></p>
<p><strong>å®æ–½å</strong></p>
<p><strong>æå‡</strong></p>
<p>å¹³å‡æœç´¢æ—¶é—´</p>
<p>3-5ç§’</p>
<p>45ms</p>
<p>100å€+</p>
<p>æœç´¢å‡†ç¡®ç‡</p>
<p>60%</p>
<p>92%</p>
<p>+32%</p>
<p>ç”¨æˆ·æ»¡æ„åº¦</p>
<p>3.2/5</p>
<p>4.6/5</p>
<p>+44%</p>
<p>æ—¥å‡æœç´¢é‡</p>
<p>5000æ¬¡</p>
<p>35000æ¬¡</p>
<p>7å€</p>
<p>çŸ¥è¯†å¤ç”¨ç‡</p>
<p>15%</p>
<p>68%</p>
<p>4.5å€</p>
<h5 data-id="heading-27">æŠ€æœ¯æˆæœ</h5>
<ul>
<li>
<p><strong>ç³»ç»Ÿç¨³å®šæ€§</strong>ï¼š99.95%å¯ç”¨æ€§ï¼Œé›¶æ•°æ®ä¸¢å¤±</p>
</li>
<li>
<p><strong>æ€§èƒ½æŒ‡æ ‡</strong>ï¼š45mså¹³å‡æŸ¥è¯¢å»¶è¿Ÿï¼Œ1500 QPSååé‡</p>
</li>
<li>
<p><strong>æˆæœ¬æ•ˆç›Š</strong>ï¼šç›¸æ¯”å•†ä¸šå‘é‡æ•°æ®åº“èŠ‚çœ70%æˆæœ¬</p>
</li>
</ul>
<h2 data-id="heading-28">æœ€ä½³å®è·µä¸å»ºè®®</h2>
<h4 data-id="heading-29">å‘é‡åŒ–æœ€ä½³å®è·µ</h4>
<ul>
<li>
<p><strong>é€‰æ‹©åˆé€‚çš„Embeddingæ¨¡å‹</strong></p>
<ul>
<li>
<p>æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©æ¨¡å‹ç»´åº¦ï¼ˆ768/1024/1536ï¼‰</p>
</li>
<li>
<p>ä¼˜å…ˆä½¿ç”¨LLMæ¨¡å‹</p>
</li>
<li>
<p>å®šæœŸè¯„ä¼°æ¨¡å‹æ•ˆæœ</p>
</li>
</ul>
</li>
<li>
<p><strong>æ–‡æœ¬åˆ†å—ç­–ç•¥</strong></p>
<ul>
<li>
<p>æ ¹æ®å†…å®¹ç‰¹ç‚¹è°ƒæ•´åˆ†å—å¤§å°</p>
</li>
<li>
<p>ä¿æŒåˆç†çš„é‡å æ¯”ä¾‹ï¼ˆ20-30%ï¼‰</p>
</li>
<li>
<p>é¿å…åœ¨è¯­ä¹‰è¾¹ç•Œå¤„åˆ†å‰²</p>
</li>
</ul>
</li>
<li>
<p><strong>å‘é‡****è´¨é‡ä¿è¯</strong></p>
<ul>
<li>
<p>å®šæœŸéªŒè¯å‘é‡è´¨é‡</p>
</li>
<li>
<p>ç›‘æ§ç›¸ä¼¼åº¦åˆ†å¸ƒ</p>
</li>
<li>
<p>å»ºç«‹åé¦ˆæœºåˆ¶</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-30">ç´¢å¼•é€‰æ‹©æŒ‡å—</h4>
<p><strong>åœºæ™¯</strong></p>
<p><strong>æ¨èç´¢å¼•</strong></p>
<p><strong>åŸå› </strong></p>
<p>å®æ—¶åº”ç”¨ï¼Œ&lt;100ä¸‡æ•°æ®</p>
<p>HNSW</p>
<p>æŸ¥è¯¢å¿«ï¼Œå‡†ç¡®ç‡é«˜</p>
<p>å¤§è§„æ¨¡æ•°æ®ï¼Œ&gt;1000ä¸‡</p>
<p>IVFFlat</p>
<p>å†…å­˜å ç”¨å°‘ï¼Œå¯æ‰©å±•</p>
<p>è¶…å¤§è§„æ¨¡ï¼Œ&gt;1äº¿</p>
<p>PQ</p>
<p>æè‡´å‹ç¼©ï¼Œæˆæœ¬ä½</p>
<p>æ··åˆåœºæ™¯</p>
<p>å¤šç´¢å¼•</p>
<p>æ ¹æ®æŸ¥è¯¢ç‰¹ç‚¹é€‰æ‹©</p>
<h4 data-id="heading-31">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<ul>
<li>
<p><strong>ç›‘æ§å…³é”®æŒ‡æ ‡</strong></p>
<ul>
<li>
<p>æŸ¥è¯¢å»¶è¿Ÿåˆ†å¸ƒï¼ˆp50/p95/p99ï¼‰</p>
</li>
<li>
<p>ç´¢å¼•å¤§å°å’Œå†…å­˜å ç”¨</p>
</li>
<li>
<p>å¤åˆ¶å»¶è¿Ÿå’Œå¯ç”¨æ€§</p>
</li>
</ul>
</li>
<li>
<p><strong>å®šæœŸç»´æŠ¤</strong></p>
<ul>
<li>
<p>å®šæœŸVACUUMå’ŒANALYZE</p>
</li>
<li>
<p>ç›‘æ§ç´¢å¼•ç¢ç‰‡åŒ–</p>
</li>
<li>
<p>åŠæ—¶æ›´æ–°ç»Ÿè®¡ä¿¡æ¯</p>
</li>
</ul>
</li>
<li>
<p><strong>å®¹é‡è§„åˆ’</strong></p>
<ul>
<li>
<p>é¢„ç•™30%çš„å¢é•¿ç©ºé—´</p>
</li>
<li>
<p>å®šæœŸè¯„ä¼°æ‰©å®¹éœ€æ±‚</p>
</li>
<li>
<p>å»ºç«‹åˆ†ç‰‡ç­–ç•¥</p>
</li>
</ul>
</li>
</ul>
<h2 data-id="heading-32">æ€»ç»“ä¸å±•æœ›</h2>
<h4 data-id="heading-33">æ ¸å¿ƒä»·å€¼</h4>
<p>openGausså‘é‡æ•°æ®åº“é€šè¿‡ä»¥ä¸‹æ–¹å¼èµ‹èƒ½ä¼ä¸šæ•°æ®æ™ºèƒ½ï¼š</p>
<ul>
<li>
<p><strong>ç»Ÿä¸€å¹³å°</strong>ï¼šç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ®åœ¨åŒä¸€æ•°æ®åº“ä¸­ç®¡ç†</p>
</li>
<li>
<p><strong>é«˜æ€§èƒ½</strong>ï¼šæ¯«ç§’çº§æŸ¥è¯¢å»¶è¿Ÿï¼Œæ”¯æŒå¤§è§„æ¨¡å¹¶å‘</p>
</li>
<li>
<p><strong>ä¼ä¸šçº§</strong>ï¼šé«˜å¯ç”¨ã€å®¹ç¾ã€å¤‡ä»½ç­‰å®Œæ•´çš„ä¼ä¸šçº§ç‰¹æ€§</p>
</li>
</ul>
<h4 data-id="heading-34">åº”ç”¨å‰æ™¯</h4>
<p>å‘é‡æ•°æ®åº“åœ¨ä»¥ä¸‹é¢†åŸŸå…·æœ‰å¹¿é˜”çš„åº”ç”¨å‰æ™¯ï¼š</p>
<ul>
<li>
<p><strong>æ™ºèƒ½æœç´¢</strong>ï¼šè¯­ä¹‰æœç´¢ã€æ¨èç³»ç»Ÿ</p>
</li>
<li>
<p><strong>çŸ¥è¯†ç®¡ç†</strong>ï¼šä¼ä¸šçŸ¥è¯†åº“ã€æ–‡æ¡£ç®¡ç†</p>
</li>
<li>
<p><strong>AIåº”ç”¨</strong>ï¼šLLMåº”ç”¨ã€RAGç³»ç»Ÿ</p>
</li>
<li>
<p><strong>å¤šæ¨¡æ€</strong>ï¼šå›¾åƒæœç´¢ã€è§†é¢‘æ£€ç´¢</p>
</li>
</ul>
<h4 data-id="heading-35">æœªæ¥å‘å±•æ–¹å‘</h4>
<ul>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong></p>
<ul>
<li>
<p>æ›´é«˜æ•ˆçš„ç´¢å¼•ç®—æ³•</p>
</li>
<li>
<p>GPUåŠ é€Ÿæ”¯æŒ</p>
</li>
<li>
<p>åˆ†å¸ƒå¼å‘é‡è®¡ç®—</p>
</li>
</ul>
</li>
<li>
<p><strong>åŠŸèƒ½å¢å¼º</strong></p>
<ul>
<li>
<p>å¤šæ¨¡æ€å‘é‡æ”¯æŒ</p>
</li>
<li>
<p>å®æ—¶å‘é‡æ›´æ–°</p>
</li>
<li>
<p>å‘é‡èšç±»å’Œåˆ†æ</p>
</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæ€å»ºè®¾</strong></p>
<ul>
<li>
<p>ä¸LLMæ·±åº¦èåˆ</p>
</li>
<li>
<p>å¼€æºç¤¾åŒºå»ºè®¾</p>
</li>
<li>
<p>è¡Œä¸šè§£å†³æ–¹æ¡ˆ</p>
</li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain æ ¸å¿ƒåŸç†-æ ¸å¿ƒç»„ä»¶&åº”ç”¨å¼€å‘ç±»å‹ 01]]></title>    <link>https://juejin.cn/post/7577307100130033714</link>    <guid>https://juejin.cn/post/7577307100130033714</guid>    <pubDate>2025-11-28T03:26:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577307100130033714" data-draft-id="7577321767346143278" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain æ ¸å¿ƒåŸç†-æ ¸å¿ƒç»„ä»¶&amp;åº”ç”¨å¼€å‘ç±»å‹ 01"/> <meta itemprop="keywords" content="LangChain,Agent,LLM"/> <meta itemprop="datePublished" content="2025-11-28T03:26:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain æ ¸å¿ƒåŸç†-æ ¸å¿ƒç»„ä»¶&amp;åº”ç”¨å¼€å‘ç±»å‹ 01
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:26:47.000Z" title="Fri Nov 28 2025 03:26:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p><strong>ä¸€ã€LangChainåˆ°åº•æ˜¯ä»€ä¹ˆ</strong></p>
<p>LangChainæ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œç”¨äºå¼€å‘ç”±å¤§è¯­è¨€æ¨¡å‹(LLMs)é©±åŠ¨çš„åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚ï¼Œæ­å»ºæ™ºèƒ½ä½“ï¼ˆAgentï¼‰ã€é—®ç­”ç³»ç»Ÿï¼ˆQAï¼‰ã€å¯¹è¯æœºå™¨äººã€æ–‡æ¡£æœç´¢ç³»ç»Ÿã€ä¼ä¸šç§æœ‰åŒ–çŸ¥è¯†åº“ç­‰ã€‚</p>
<p><strong>ç®€å•æ¦‚æ‹¬ï¼š</strong></p>
<ul>
<li>LangChainÂ â‰  LLMs</li>
<li>LangChainÂ ä¹‹äºLLMsï¼Œç±»ä¼¼Springä¹‹äºJava</li>
<li>LangChainÂ ä¹‹äºLLMsï¼Œç±»ä¼¼Djangoã€Flaskä¹‹äºPython</li>
</ul>
<p>LangChainä¸­çš„LangæŒ‡languageï¼Œå³å¤§é¢„è¨€æ¨¡å‹ï¼ŒChain å³ é“¾ï¼Œä¹Ÿå°±æ˜¯å°†å¤§æ¨¡å‹ä¸å¤–éƒ¨æ•°æ®&amp;å„ç§ç»„ä»¶é“¾æ¥æˆé“¾ï¼Œä»¥æ­¤æ„å»ºAIåº”ç”¨ç¨‹åº</p>
<p><strong>1ã€LangChainçš„ä½¿ç”¨åœºæ™¯</strong></p>








































<table><thead><tr><th>é¡¹ç›®åç§°</th><th>æŠ€æœ¯ç‚¹</th><th>éš¾åº¦</th></tr></thead><tbody><tr><td>æ–‡æ¡£é—®ç­”åŠ©æ‰‹</td><td>Prompt + Embedding +RetrievalQA</td><td>â­â­</td></tr><tr><td>æ™ºèƒ½æ—¥ç¨‹åŠ©æ‰‹</td><td>Agent + Tool + Memory</td><td>Â â­â­â­</td></tr><tr><td>LLM+æ•°æ®åº“é—®ç­”</td><td>SQLDatabaseToolkit + Agent</td><td>Â â­â­â­â­</td></tr><tr><td>å¤šæ¨¡å‹è·¯ç”±å¯¹è¯ç³»ç»Ÿ</td><td>RouterChain + å¤š LLM</td><td>Â â­â­â­â­</td></tr><tr><td>äº’è”ç½‘æ™ºèƒ½å®¢æœ</td><td>ConversationChain + RAG +Agent</td><td>Â â­â­â­â­â­</td></tr><tr><td>ä¼ä¸šçŸ¥è¯†åŠ©æ‰‹ï¼ˆRAG+æœ¬åœ°æ¨¡å‹ï¼‰</td><td>VectorDB + LLM + Streamlit</td><td>Â â­â­â­â­â­</td></tr></tbody></table>
<p>æ¯”å¦‚ï¼šçŸ¥è¯†åº“çš„æ¶æ„</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ebd35376fc346bfb66bcf2a006bbacf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=ZluEqc8Pv5oML20pW52S42e2sow%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>2ã€LangChainçš„èµ„æ–™ä»‹ç»</strong></p>
<ul>
<li>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.langchain.com%2Flangchain" target="_blank" title="https://www.langchain.com/langchain" ref="nofollow noopener noreferrer">www.langchain.com/langchain</a></li>
<li>å®˜ç½‘æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpython.langchain.com%2Fdocs%2Fintroduction%2F" target="_blank" title="https://python.langchain.com/docs/introduction/" ref="nofollow noopener noreferrer">python.langchain.com/docs/introdâ€¦</a></li>
<li>APIæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpython.langchain.com%2Fapi_reference%2F" target="_blank" title="https://python.langchain.com/api_reference/" ref="nofollow noopener noreferrer">python.langchain.com/api_referenâ€¦</a></li>
<li>githubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flangchain-ai%2Flangchain" target="_blank" title="https://github.com/langchain-ai/langchain" ref="nofollow noopener noreferrer">github.com/langchain-aâ€¦</a></li>
</ul>
<p><strong>3ã€LangChainå†…éƒ¨ç»“æ„</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f430b4ed7a1245d9bbdad9734c3b4914~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=xrILXA1zAw4LhntqPrtA1wUzBnY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Â å›¾ä¸­å±•ç¤ºäº†LangChainç”Ÿæ€ç³»ç»Ÿçš„ä¸»è¦ç»„ä»¶åŠå…¶åˆ†ç±»ï¼Œåˆ†ä¸ºä¸‰ä¸ªå±‚æ¬¡ï¼šæ¶æ„(Architecture)ã€ç»„ä»¶(Components)å’Œéƒ¨ç½²(Deployment)ã€‚</p>
<p><strong>ç»“æ„1</strong>ï¼šLangChain --å°±æ˜¯AIåº”ç”¨ç»„è£…å¥—ä»¶ï¼Œå°è£…äº†ä¸€å †APIã€‚æ•´ä½“æ¡†æ¶ä¸å¤§ï¼Œä½†æ˜¯å†…éƒ¨çç¢çš„çŸ¥è¯†ç‚¹ç‰¹åˆ«å¤š</p>
<ul>
<li>langchainï¼šæ„æˆåº”ç”¨ç¨‹åºè®¤çŸ¥æ¶æ„çš„Chainsã€Agentã€Retrieval strategiesç­‰ã€‚æ„æˆåº”ç”¨ç¨‹åºçš„é“¾ã€æ™ºèƒ½ä½“ã€RAG</li>
<li>langchain-communityï¼šç¬¬ä¸‰æ–¹é›†æˆï¼Œæ¯”å¦‚ï¼šModel I/Oã€Retrievalã€Tool &amp; Toolkitï¼›åˆä½œä¼™ä¼´åŒ… langchain-openaiï¼Œlangchain-anthropicç­‰</li>
<li>langchain-Coreï¼šåŸºç¡€æŠ½è±¡å’Œè¡¨è¾¾å¼è¯­è¨€(LCEL)</li>
</ul>
<p><strong>ç»“æ„2</strong>ï¼šLangGraph --åŸºäºlangchainçš„apiè¿›ä¸€æ­¥çš„å°è£…ï¼Œèƒ½å¤Ÿåè°ƒå¤šä¸ªChainã€Agentã€Toolså®Œæˆæ›´å¤æ‚çš„ä»»åŠ¡ï¼Œå®ç°æ›´é«˜çº§çš„åŠŸèƒ½Â </p>
<p><strong>ç»“æ„3</strong>ï¼šLangSmith ---é“¾è·¯è¿½è¸ªï¼›æä¾›äº†6å¤§åŠŸèƒ½ï¼Œä¸langchainæ— ç¼å¯¹æ¥ï¼Œå¸®ç»„ä»åŸå‹é˜¶æ®µè¿‡åº¦åˆ°ç”Ÿæˆé˜¶æ®µ</p>
<ul>
<li>Debugging è°ƒè¯•</li>
<li>Playground æ²™ç›’</li>
<li>Prompt Management æä¾›ç®¡ç†</li>
<li>Annotation æ³¨é‡Š</li>
<li>Testing æµ‹è¯•</li>
<li>Monitoring ç›‘æ§</li>
</ul>
<p><strong>ç»“æ„4</strong>ï¼šLangServe -- å°†langchainçš„å¯è¿è¡Œé¡¹å’Œé“¾éƒ¨ç½²ä¸ºREST APIï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥é€šè¿‡ç½‘ç»œè¿›è¡Œè°ƒç”¨ï¼›javaæ€ä¹ˆè°ƒç”¨langchainå‘¢ï¼Ÿå°±é€šè¿‡langserveï¼Œå°†langchainåº”ç”¨åŒ…è£…æˆä¸€ä¸ªrest apiï¼Œå¯¹å¤–æš´éœ²æœåŠ¡ã€‚åŒæ—¶æ”¯æŒæ›´é«˜çš„å¹¶å‘ï¼Œç¨³å®šæ€§æ›´å¥½ã€‚</p>
<p>æ€»ç»“ï¼šlangchainå½“ä¸­ï¼Œæœ€æœ‰å‰é€”çš„ä¸¤ä¸ªæ¨¡å—æ˜¯ï¼šLangGraphã€LangSmithÂ </p>
<p><strong>äºŒã€LangChainå®‰è£…</strong></p>
<p><strong>1ã€ç›¸å…³ç¯å¢ƒå®‰è£…</strong></p>
<p>å®˜ç½‘ä¸‹è½½pythonè¿›è¡Œå®‰è£…ï¼Œæˆ–è€…ä½¿ç”¨åŒ…ç®¡ç†å·¥å…·ï¼ˆAnacondaï¼‰è¿›è¡Œå®‰è£…ï¼Œé€šè¿‡Anacondaåˆ›å»ºå’Œç®¡ç†è™šæ‹Ÿç¯å¢ƒï¼Œä¸ºé¡¹ç›®æä¾›ç‹¬ç«‹çš„ä¾èµ–ç©ºé—´ï¼Œé¿å…ä¸åŒé¡¹ç›®ä¹‹é—´çš„ä¾èµ–å…³ç³»</p>
<p><strong>1ï¼‰condaçš„å®‰è£…</strong>Â --å®˜ç½‘ä¸‹è½½åœ°å€:<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anaconda.com%2Fdownload%2Fsuccess" target="_blank" title="https://www.anaconda.com/download/success" ref="nofollow noopener noreferrer">www.anaconda.com/download/suâ€¦</a>Â  Â å®‰è£…æ˜¯å‹¾é€‰åœ¨ç”¨æˆ·ç¯å¢ƒå˜é‡çš„Pathä¸­æ·»åŠ ç›¸åº”è·¯å¾„</p>
<p><strong>2ï¼‰éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ</strong>ï¼Œcmd--è¾“å…¥ conda info</p>
<p><strong>3ï¼‰Condaå¸¸ç”¨å‘½ä»¤</strong></p>
<pre><code class="hljs language-python" lang="python">conda -<span class="hljs-built_in">help</span>            <span class="hljs-comment"># æŸ¥çœ‹å¸®åŠ©</span>
conda info             <span class="hljs-comment"># æŸ¥çœ‹ conda ä¿¡æ¯</span>
conda --version        <span class="hljs-comment"># æŸ¥çœ‹ conda ç‰ˆæœ¬</span>
conda update conda     <span class="hljs-comment"># æ›´æ–° Conda (æ…ç”¨)</span>
conda clean -<span class="hljs-built_in">all</span>      <span class="hljs-comment"># æ¸…ç†ä¸å†éœ€è¦çš„åŒ…</span>
conda &lt;æŒ‡ä»¤&gt; --<span class="hljs-built_in">help</span>     <span class="hljs-comment"># æŸ¥çœ‹æŸä¸€ä¸ªæŒ‡ä»¤çš„è¯¦ç»†å¸®åŠ©</span>
conda config --show    <span class="hljs-comment"># æŸ¥çœ‹ conda çš„ç¯å¢ƒé…ç½®</span>
conda clean -p         <span class="hljs-comment"># æ¸…ç†æ²¡æœ‰ç”¨, æ²¡æœ‰å®‰è£…çš„åŒ…</span>
conda clean -t         <span class="hljs-comment"># æ¸…ç† tarball</span>
conda clean --<span class="hljs-built_in">all</span>      <span class="hljs-comment"># æ¸…ç†æ‰€æœ‰åŒ…å’Œ conda çš„ç¼“å­˜æ–‡ä»¶</span>
</code></pre>
<p><strong>4ï¼‰ç¯å¢ƒç®¡ç†</strong></p>
<p><strong>|-- åˆ›å»ºcondaç¯å¢ƒ</strong></p>
<p>ä½¿ç”¨condaå¯ä»¥åœ¨ç”µè„‘ä¸Šåˆ›å»ºå¾ˆå¤šå¥—ç›¸äº’éš”ç¦»çš„pythonç¯å¢ƒï¼Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªåä¸º myenv çš„ç¯å¢ƒ, python ç‰ˆæœ¬ä¸º3.10</span>
conda create --name myenv <span class="hljs-attr">python</span>=<span class="hljs-number">3.10</span> <span class="hljs-comment"># --name å¯ä»¥ç®€å†™ä¸º -n</span>
</code></pre>
<p><strong>|-- åˆ‡æ¢condaç¯å¢ƒ</strong></p>
<pre><code class="hljs language-bash" lang="bash"> <span class="hljs-comment">#è¯­æ³• å¯ä»¥åˆ‡æ¢ä¸åŒçš„ç¯å¢ƒ</span>
conda activate env_name

<span class="hljs-comment">#æ ·ä¾‹ åˆ‡æ¢åˆ° my_envç¯å¢ƒ</span>
conda activate my_env
</code></pre>
<p><strong>|-- å¦‚æœè¦é€€å‡ºå½“å‰ç¯å¢ƒ</strong></p>
<pre><code class="hljs">conda deactivate
</code></pre>
<h4 data-id="heading-0">|-- æŸ¥çœ‹ Conda ç¯å¢ƒ</h4>
<h4 data-id="heading-1">å½“ç”µè„‘ä¸Šå®‰è£…äº†å¾ˆå¤šå° Condaç¯å¢ƒçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨Â <code>conda env list</code>Â å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰å·²åˆ›å»ºçš„ Condaç¯å¢ƒã€‚</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰ç”µè„‘ä¸Šæ‰€æœ‰çš„ condaç¯å¢ƒ</span>
conda <span class="hljs-built_in">env</span> list
</code></pre>
<h4 data-id="heading-2">|-- åˆ é™¤æŸä¸ª Conda ç¯å¢ƒ</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># è¯­æ³•</span>
conda <span class="hljs-keyword">remove</span> --name &lt;env_name&gt; --all
<span class="hljs-meta"># æ ·ä¾‹</span>
conda <span class="hljs-keyword">remove</span> --name learn --all
</code></pre>
<h4 data-id="heading-3">|-- å…‹éš†ç¯å¢ƒ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¯­æ³•</span>
conda create --name &lt;new_evn_name&gt; --<span class="hljs-built_in">clone</span> &lt;old_env_name&gt;<span class="hljs-comment">#æ ·ä¾‹</span>
conda create --name myclone --<span class="hljs-built_in">clone</span> myenv
</code></pre>
<h3 data-id="heading-4">5ï¼‰åŒ…ç®¡ç†</h3>
<p>ä¸€æ—¦æ¿€æ´»äº†ç¯å¢ƒï¼Œä½ å°±å¯ä»¥ä½¿ç”¨Â <code>conda</code>å’ŒÂ <code>pip</code>åœ¨å½“å‰ç¯å¢ƒä¸‹å®‰è£…ä½ æ‰€éœ€è¦çš„åŒ…ã€‚åœ¨condaç¯å¢ƒä¸­, ä¸å»ºè®®ä½¿ç”¨Â <code>pip</code>ã€‚</p>
<h4 data-id="heading-5">|--Â  å®‰è£…åŒ…</h4>
<p>åœ¨æ¿€æ´»çš„ç¯å¢ƒä¸­å®‰è£…åŒ…ï¼Œä¾‹å¦‚å®‰è£…NumPyï¼š</p>
<pre><code class="hljs">conda install numpy
</code></pre>
<p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„åŒ…ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">conda install <span class="hljs-attr">numpy</span>=<span class="hljs-number">1.18</span>
</code></pre>
<h4 data-id="heading-6">|--Â  æ›´æ–°åŒ…</h4>
<p>æ›´æ–°æŸä¸ªåŒ…åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">conda <span class="hljs-keyword">update</span> numpy
â€‹
#æ›´æ–°æ‰€æœ‰åŒ…åˆ°æœ€æ–°ç‰ˆæœ¬ (æ…ç”¨)
conda <span class="hljs-keyword">update</span> <span class="hljs-comment">--all</span>
</code></pre>
<p>æ‰§è¡Œå‘½ä»¤åï¼Œcondaå°†ä¼šå¯¹ç‰ˆæœ¬è¿›è¡Œæ¯”è¾ƒå¹¶åˆ—å‡ºå¯ä»¥å‡çº§çš„ç‰ˆæœ¬ã€‚åŒæ—¶ï¼Œä¹Ÿä¼šå‘ŠçŸ¥ç”¨æˆ·å…¶ä»–ç›¸å…³åŒ…ä¹Ÿä¼šå‡çº§åˆ°ç›¸åº”ç‰ˆæœ¬ã€‚å½“è¾ƒæ–°çš„ç‰ˆæœ¬å¯ä»¥ç”¨äºå‡çº§æ—¶ï¼Œç»ˆç«¯ä¼šæ˜¾ç¤ºProceed([y]/n)? , æ­¤æ—¶è¾“å…¥y å³å¯è¿›è¡Œå‡çº§ã€‚</p>
<h4 data-id="heading-7">|-- å¸è½½åŒ…</h4>
<p>å¦‚æœä¸å†éœ€è¦æŸä¸ªåŒ…ï¼Œå¯ä»¥å°†å…¶å¸è½½ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">conda remove numpy
</code></pre>
<h4 data-id="heading-8">|--Â  åˆ—å‡ºç¯å¢ƒä¸­çš„æ‰€æœ‰åŒ…</h4>
<p>æŸ¥çœ‹å½“å‰ç¯å¢ƒä¸­å·²å®‰è£…çš„æ‰€æœ‰åŒ…ï¼š</p>
<pre><code class="hljs">conda list
</code></pre>
<p>æŸ¥çœ‹å½“å‰è™šæ‹Ÿç¯å¢ƒä¸­å·²å®‰è£…çš„æŸä¸ªåŒ…çš„ä¿¡æ¯</p>
<pre><code class="hljs">conda list pip
</code></pre>
<h4 data-id="heading-9">|-- æœç´¢åŒ…</h4>
<p>æœç´¢å¯ç”¨çš„åŒ…åŠå…¶ç‰ˆæœ¬ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-go" lang="go"> conda search <span class="hljs-keyword">package</span>-name
</code></pre>
<p><strong>2ã€å®‰è£…langchainåŒ…</strong><br/>
å¯ä»¥ä½¿ç”¨pipè¿›è¡Œå®‰è£… --&gt;pip install langchain<br/>
ä¹Ÿå¯ä»¥ä½¿ç”¨condaè¿›è¡Œå®‰è£…Â </p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å®‰è£…åŒ…ï¼ˆé»˜è®¤ä»“åº“ï¼‰</span>
conda install langchain

<span class="hljs-comment"># æŒ‡å®šé¢‘é“ï¼ˆå¦‚ conda-forgeï¼‰</span>
conda install -c conda-forge <span class="hljs-attr">langchain</span>==<span class="hljs-number">0.3</span>.<span class="hljs-number">7</span>

<span class="hljs-comment"># æ›´æ–°åŒ…</span>
conda update langchain

<span class="hljs-comment"># å¸è½½åŒ…</span>
conda uninstall langchain

<span class="hljs-comment"># æŸ¥çœ‹å·²å®‰è£…åŒ…  conda å®‰è£…çš„åŒ…æ˜¾ç¤ºé¢‘é“ï¼Œpipå®‰è£…çš„æ˜¾ç¤º pypi</span>
conda list

-c ï¼šæ˜¯ --channel çš„ç¼©å†™ï¼Œcondaâ½¤äºæŒ‡å®šåŒ…çš„å®‰è£…æ¥æºæ¸ é“ã€‚
conda-forge ï¼šè¯¥æºâ½å®˜â½…é»˜è®¤æ¸ é“æ›´æ–°æ›´å¿«ã€åŒ…æ›´å…¨

<span class="hljs-comment">#å»ºè®®ï¼š äºŒè€…æœ€å¥½ä¸å¥½æ··ç”¨ï¼Œæ¨èå…ˆcondaè£…åŸºç¡€åŒ…ï¼Œå pipè¡¥å……çš„é¡ºåºã€‚</span>
</code></pre>
<p><strong>äºŒã€å¤§æ¨¡å‹RAG&amp;Agentå¼€å‘çŸ¥è¯†</strong></p>
<p><strong>1ã€åŸºäºRAGæ¶æ„çš„å¼€å‘</strong></p>
<p>RAGä¸»è¦æ˜¯ä¸ºäº†è§£å†³å¤§æ¨¡å‹å¹»è§‰å’ŒçŸ¥è¯†å†»ç»“</p>
<p>ä½•ä¸ºRAGï¼ŸÂ Retrieval-Augmented Generationï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1898384ccf74902911511668bafd7ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=0Bc28WhAXqcmcMx2HxEnDiHahx0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Â ç»†èŠ‚å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0aebf6d891e417e948a0c30f592ec94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=DNEeiETHNwE3z6H4Q5KtGmJ0orU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Â å¼ºè°ƒä¸€ä¸‹éš¾ç‚¹çš„æ­¥éª¤ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/091f8527ec7c4b9886993fcc1f40cbfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=i7A8ASzlOsYWYB1bD15kVPvx%2BI0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Â æ•´ä½“åœ¨å¼€å‘è¿‡ç¨‹ä¸­è“è‰²éƒ¨åˆ†æ˜¯éš¾ç‚¹ï¼š1ã€æ–‡ä»¶è§£æÂ  2ã€æ–‡ä»¶åˆ‡å‰²Â  3ã€çŸ¥è¯†æ£€ç´¢Â  4ã€çŸ¥è¯†é‡æ’åºï¼ˆRerankerï¼‰</p>
<p>Rerankerçš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>é€‚åˆï¼šè¿½æ±‚å›ç­”é«˜ç²¾åº¦å’Œé«˜ç›¸å…³æ€§çš„åœºæ™¯ä¸­ç‰¹åˆ«é€‚åˆä½¿ç”¨Rerankerï¼Œä¾‹å¦‚ä¸“ä¸šçŸ¥è¯†åº“æˆ–è€…å®¢æœç³»ç»Ÿç­‰åº”ç”¨</li>
<li>ä¸é€‚åˆï¼šå¼•å…¥åä¼šå¢åŠ å¬å›æ—¶é—´ï¼Œå¢åŠ æ£€ç´¢å»¶è¿Ÿã€‚å¯¹å“åº”è¦æ±‚é«˜çš„æœåŠ¡å°±ä¸å¤ªé€‚åˆ</li>
</ul>
<p>RAGæœ‰ä¸‰å¤„æ¶‰åŠåˆ°å¤§æ¨¡å‹çš„ä½¿ç”¨ï¼š</p>
<ul>
<li>ç¬¬3æ­¥å‘é‡åŒ–æ—¶ï¼Œéœ€è¦ä½¿ç”¨åˆ‡å…¥æ¨¡å‹ï¼ˆEmbeddingModelsï¼‰</li>
<li>ç¬¬7æ­¥é‡æ’åºæ—¶ï¼Œéœ€è¦ä½¿ç”¨æ’åºæ¨¡å‹ï¼ˆRerankerModelsï¼‰</li>
<li>ç¬¬9æ­¥ç”Ÿæˆç­”æ¡ˆæ—¶ï¼Œéœ€è¦ä½¿ç”¨LLM</li>
</ul>
<p>Â 2 <strong>ã€åŸºäºAgentæ¶æ„çš„å¼€å‘</strong></p>
<p>åˆ©ç”¨LLMçš„æ¨ç†å†³ç­–èƒ½åŠ›ï¼Œé€šè¿‡å¢å¼ºè§„åˆ’ã€è®°å¿†å’Œå·¥å…·è°ƒç”¨çš„èƒ½åŠ›ï¼Œæ„é€ ä¸€ä¸ªèƒ½å¤Ÿç‹¬ç«‹æ€è€ƒé€æ­¥å®Œæˆç»™å®šç›®æ ‡çš„æ™ºèƒ½ä½“</p>
<p>Agentçš„æ¶æ„ï¼š<strong>Agent = LLM +Memory+Tools+Planning+Action</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4dbd1bcc267043888dbad04c8f1eb528~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=RP1J8vGqEaVK6OxLl%2FKJM5Nb104%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ™ºèƒ½ä½“çš„æ ¸å¿ƒè¦ç´ ï¼š</p>
<ul>
<li>
<p>LLMï¼šä½œä¸ºå¤§è„‘ï¼Œä¸»è¦æä¾›æ¨ç†ã€è§„åˆ’ã€çŸ¥è¯†ç†è§£èƒ½åŠ›ã€æ˜¯AI Agentçš„å†³ç­–ä¸­æ¢</p>
</li>
<li>
<p>è®°å¿†ï¼ˆMemoryï¼‰ï¼šè®°å¿†æœºåˆ¶èƒ½è®©æ™ºèƒ½ä½“åœ¨å¤„ç†é‡å¤å·¥ä½œæ—¶è°ƒç”¨ä»¥å‰çš„ç»éªŒï¼Œä»è€Œé¿å…ç”¨æˆ·è¿›è¡Œå¤§é‡é‡å¤äº¤äº’</p>
<ul>
<li>çŸ­æœŸè®°å¿†ï¼šå­˜å‚¨å•æ¬¡å¯¹è¯å‘¨æœŸçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå±äºä¸´æ—¶ä¿¡æ¯å­˜å‚¨æœºåˆ¶ã€‚å—é™äºæ¨¡å‹ä¸Šä¸‹æ–‡çª—å£é•¿åº¦</li>
<li>é•¿æœŸè®°å¿†ï¼šå¯ä»¥æ¨ªè·¨å¤šä¸ªä»»åŠ¡æˆ–æ—¶é—´å‘¨æœŸï¼Œå¯å­˜å‚¨å¹¶è°ƒç”¨æ ¸å¿ƒçŸ¥è¯†ï¼Œéå³æ—¶ä»»åŠ¡ï¼›å¯ä»¥é€šè¿‡æ¨¡å‹å‚æ•°å¾®è°ƒï¼ˆå›ºè¯çŸ¥è¯†ï¼‰ã€çŸ¥è¯†å›¾è°±ï¼ˆç»“æ„åŒ–è¯­ä¹‰ç½‘ç»œï¼‰æˆ–å‘é‡æ•°æ®åº“ï¼ˆç›¸ä¼¼æ€§æ£€ç´¢ï¼‰æ–¹å¼å®ç°</li>
</ul>
</li>
<li>
<p>å·¥å…·ä½¿ç”¨ï¼ˆTool Useï¼‰ï¼šè°ƒç”¨å¤–éƒ¨å·¥å…·ï¼Œæ‰©å±•èƒ½åŠ›è¾¹ç•Œ</p>
</li>
<li>
<p>è§„åˆ’å†³ç­–ï¼ˆPlanningï¼‰ï¼šé€šè¿‡ä»»åŠ¡åˆ†è§£ã€åæ€ä¸è‡ªçœæ¡†æ¶å®ç°å¤æ‚ä»»åŠ¡å¤„ç†ã€‚ä¾‹å¦‚ï¼šæŠŠä¸€ä¸ªä»»åŠ¡æ‹†è§£æˆå¤šä¸ªå­ä»»åŠ¡ï¼Œå¹¶é€šè¿‡ä¸ç”¨æˆ·åé¦ˆéšæ—¶ä¼˜åŒ–ç­–ç•¥</p>
</li>
<li>
<p>è¡ŒåŠ¨ï¼ˆActionï¼‰ï¼šå®é™…æ‰§è¡Œç­–ç•¥çš„æ¨¡å—ï¼Œæ¶µç›–è½¯ä»¶æ¥å£æ“ä½œå’Œç‰©ç†äº¤äº’ ã€‚æ¯”å¦‚ï¼šæ£€ç´¢ã€æ¨ç†ã€å˜æˆç­‰</p>
</li>
</ul>
<p><strong>3ã€å¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„å››ä¸ªåœºæ™¯</strong></p>
<p>åœºæ™¯1ï¼šçº¯Prompt</p>
<ul>
<li>Promptæ˜¯æ“ä½œå¤§æ¨¡å‹çš„å”¯ä¸€æ¥å£ï¼Œå½“ç”¨æˆ·è¯´ä¸€å¥ï¼Œtaå›ä¸€å¥ï¼Œåœ¨è¯´ä¸€å¥ï¼Œtaåœ¨å›ä¸€å¥</li>
</ul>
<p>åœºæ™¯2ï¼šAgent+Function Calling</p>
<ul>
<li>Agentï¼šAIä¸»åŠ¨æè¦æ±‚</li>
<li>Function Callingï¼šéœ€è¦å¯¹æ¥å¤–éƒ¨ç³»ç»Ÿæ—¶ï¼ŒAIè¦æ±‚æ‰§è¡ŒæŸä¸ªå‡½æ•°</li>
<li>å½“äººçœ‹ï¼šä½ é—®ta[ åä¸€è¦å»æ–°ç–†æ—…æ¸¸éœ€è¦ç©¿ä»€ä¹ˆè¡£æœ]ï¼Œtaä¼šè®©ä½ æŸ¥çœ‹å¤©æ°”é¢„æŠ¥ï¼Œä½ çœ‹äº†å‘Šè¯‰taï¼Œtaåœ¨å‘Šè¯‰ä½ è¦ç©¿ä»€ä¹ˆè¡£æœ</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c502df79322e4fefb180bce40519c420~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=faauzd%2BocDfXlmbKHzxm7L%2FT2PE%3D" alt="å›¾ç‰‡" loading="lazy"/>åœºæ™¯3ï¼šRAGï¼ˆRetrieval-Augmented Generationï¼‰</p>
<p>RAGï¼šéœ€è¦è¡¥å……é¢†åŸŸçŸ¥è¯†æ—¶ä½¿ç”¨</p>
<ul>
<li>Embeddingsï¼šæŠŠæ–‡å­—è½¬æ¢æˆæ›´æ˜“äºç›¸ä¼¼åº¦è®¡ç®—çš„ç¼–ç ã€‚è¿™ç§ç¼–ç å«å‘é‡</li>
<li>å‘é‡æ•°æ®åº“ï¼šæŠŠå‘é‡å­˜èµ·æ¥ï¼Œæ–¹ä¾¿æŸ¥æ‰¾</li>
<li>å‘é‡æœç´¢ï¼šæ ¹æ®è¾“å…¥é‡ï¼Œæ‰¾åˆ°æœ€ç›¸ä¼¼çš„å‘é‡</li>
</ul>
<p>ä¸¾ä¾‹ï¼šè€ƒè¯•ç­”é¢˜æ—¶ï¼Œåˆ°ä¹¦ä¸Šæ‰¾ç›¸å…³å†…å®¹ï¼Œåœ¨ç»“åˆé¢˜ç›®ç»„æˆç­”æ¡ˆ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2f1612b6513456f860f96d9e362dd9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=NKmDWvfKPCZQPoem1RwSQFaMcpQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Â åœºæ™¯4ï¼šFine-tuningï¼ˆç²¾è°ƒ/å¾®è°ƒï¼‰</p>
<p>ä¸¾ä¾‹ï¼šåŠªåŠ›å­¦ä¹ è€ƒè¯•å†…å®¹ï¼Œé•¿æœŸè®°ä½ï¼Œæ´»å­¦æ´»ç”¨</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51188464ba31447a8cc96a984fa1cad1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=Z2Jd%2F4jkm2ux%2BT%2BeM95qqBPMpr8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Â ç‰¹ç‚¹ï¼šæˆæœ¬æœ€é«˜ï¼›åœ¨å‰é¢çš„æ–¹å¼è§£å†³ä¸äº†é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œåœ¨ä½¿ç”¨</p>
<p><strong>å¦‚ä½•é€‰æ‹©ï¼š</strong></p>
<p>é¢å¯¹ä¸€ä¸ªéœ€æ±‚ï¼Œå¦‚ä½•å¼€å§‹ï¼Œå¦‚ä½•é€‰æ‹©æŠ€æœ¯æ–¹æ¡ˆï¼Ÿä¸‹é¢æ˜¯ä¸ªå¸¸ç”¨æ€è·¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4075536d943d45808f5ae2081faf2602~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=Hew3tmQ1YZ4KqO4FRxuD4WKeJXM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ä¸‰ <strong>ã€</strong> LangChainæ ¸å¿ƒç»„ä»¶</strong></p>
<p>langchainçš„æ ¸å¿ƒç»„ä»¶æ¶‰åŠåˆ°å…­å¤§æ¨¡å—ï¼Œè¿™å…­å¤§æ¨¡å—æä¾›äº†ä¸€ä¸ªå…¨é¢ä¸”å¼ºå¤§çš„æ¡†æ¶ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿåˆ›å»ºå¤æ‚ï¼Œé«˜æ•ˆä¸”ç”¨æˆ·å‹å¥½çš„åŸºäºå¤§æ¨¡å‹çš„åº”ç”¨</p>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fc23fd2cd1a451f91a0763461eee628~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=PclcCmRYSOghurqdXhq%2Bh1iwssY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>æ ¸å¿ƒç»„ä»¶1ï¼šModelÂ  I/O</strong></p>
<p>model I/Oï¼šæ ‡å‡†åŒ–å„ä¸ªå¤§æ¨¡å‹çš„è¾“å…¥å’Œè¾“å‡ºï¼ŒåŒ…å«è¾“å…¥æ¨¡ç‰ˆï¼Œæ¨¡å‹æœ¬èº«å’Œæ ¼å¼åŒ–è¾“å‡ºã€‚ ---&gt;è¿™ä¸ªæ¨¡å—ä½¿ç”¨æœ€å¤šï¼Œä¹Ÿæœ€ç®€å•</p>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fbc39e62e1f4b1c9070c46d361f09bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=0SSF9chqeFfwimzFzTRUn%2F%2FbFvE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>Formatï¼ˆæ ¼å¼åŒ–ï¼‰</strong> ï¼šæŒ‡ä»£PromptsÂ  Â Templateï¼Œé€šè¿‡æ¨¡ç‰ˆç®¡ç†å¤§æ¨¡å‹çš„è¾“å…¥ã€‚å°†åŸå§‹æ•°æ®æ ¼å¼åŒ–æˆæ¨¡å‹å¯ä»¥å¤„ç†çš„å½¢å¼ï¼Œæ’å…¥åˆ°ä¸€ä¸ªæ¨¡ç‰ˆé—®é¢˜ä¸­ï¼Œç„¶åé€å…¥æ¨¡å‹è¿›è¡Œå¤„ç†</li>
<li><strong>Predictï¼ˆé¢„æµ‹ï¼‰</strong> ï¼šæŒ‡ä»£Modelsï¼Œä½¿ç”¨é€šç”¨æ¥å£è°ƒç”¨ä¸åŒå¾—åˆ°å¤§è¯­è¨€æ¨¡å‹ã€‚æ¥æ”¶è¢«é€è¿›æ¥çš„é—®é¢˜ï¼Œç„¶ååŸºäºè¿™ä¸ªé—®é¢˜è¿›è¡Œé¢„æµ‹æˆ–ç”Ÿæˆå›ç­”</li>
<li><strong>Parseï¼ˆç”Ÿæˆ</strong>ï¼‰ï¼šæŒ‡ä»£Output Parseréƒ¨åˆ†ï¼Œç”¨æ¥ä»æ¨¡å‹çš„æ¨ç†ä¸­æå–ä¿¡æ¯ï¼Œå¹¶æŒ‰ç…§é¢„å…ˆè®¾å®šå¥½å¾—åˆ°æ¨¡ç‰ˆæ¥è§„èŒƒåŒ–è¾“å‡ºã€‚æ¯”å¦‚ï¼šæ ¼å¼åŒ–æˆä¸€ä¸ªç»“æ„åŒ–çš„JSONå¯¹è±¡</li>
</ul>
<p><strong>æ ¸å¿ƒç»„ä»¶2ï¼šChains</strong></p>
<p>Chainï¼šâ€œé“¾æ¡â€ï¼Œç”¨äºå°†å¯¹ä¸ªæ¨¡å—ä¸²è”èµ·æ¥ç»„æˆä¸€ä¸ªå®Œæ•´çš„æµç¨‹ï¼Œæ˜¯langchainæ¡†æ¶ä¸­æœ€é‡è¦çš„æ¨¡å—ã€‚--&gt;ä¾‹å¦‚ï¼šä¸€ä¸ªChainå¯èƒ½åŒ…æ‹¬ä¸€ä¸ªPromptæ¨¡ç‰ˆã€ä¸€ä¸ªè¯­è¨€æ¨¡å‹å’Œä¸€ä¸ªè¾“å‡ºè§£æå™¨ï¼Œä»–ä»¬ä¸€èµ·å·¥ä½œä»¥å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œç”Ÿæˆå“åº”å¹¶å¤„ç†è¾“å‡ºã€‚</p>
<p>å¸¸è§çš„Chainç±»å‹ï¼š</p>
<ul>
<li>LLMChainï¼šæœ€åŸºç¡€çš„æ¨¡å‹è°ƒç”¨é“¾</li>
<li>SequentialChainï¼šå¤šä¸ªé“¾ä¸²è”æ‰§è¡Œ</li>
<li>RouterChainï¼šè‡ªåŠ¨åˆ†æç”¨æˆ·çš„éœ€æ±‚ï¼Œå¼•å¯¼åˆ°æœ€é€‚åˆçš„é“¾</li>
<li>RetrievalQAï¼šç»“åˆå‘é‡æ•°æ®åº“è¿›è¡Œè¿‡é—®ç­”çš„é“¾</li>
</ul>
<p><strong>æ ¸å¿ƒç»„ä»¶3ï¼šMemory</strong></p>
<p>Memoryï¼šè®°å¿†æ¨¡å—ï¼Œç”¨æˆ·ä¿å­˜å¯¹è¯å†å²æˆ–ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨åç»­å¯¹è¯ä¸­ä½¿ç”¨</p>
<p>å¸¸è§çš„Memoryç±»å‹ï¼š</p>
<ul>
<li>ConversationBufferMemoryï¼šä¿å­˜å®Œæ•´çš„å¯¹è¯å†å²</li>
<li>ConversationSummaryMemoryï¼šä¿å­˜å¯¹è¯å†…å®¹çš„ç²¾ç®€æ‘˜è¦ï¼ˆé€‚åˆé•¿å¯¹è¯ï¼‰</li>
<li>ConversationSummaryBufferMemoryï¼šæ··åˆå‹è®°å¿†æœºåˆ¶ï¼Œå…¼å…·ä¸Šé¢ä¸¤ä¸ªç±»å‹çš„ç‰¹ç‚¹</li>
<li>VectorStoreRetrieverMemoryï¼šä¿å­˜å¯¹è¯å†å²å­˜å‚¨åœ¨å‘é‡æ•°æ®åº“ä¸­</li>
</ul>
<p><strong>æ ¸å¿ƒç»„ä»¶4ï¼šAgent</strong></p>
<p>Agentså¯¹åº”æ™ºèƒ½ä½“ï¼Œæ˜¯langchainçš„é«˜é˜¶èƒ½åŠ›ï¼Œtaå¯ä»¥è‡ªä¸»é€‰æ‹©å·¥å…·å¹¶è§„åˆ’æ‰§è¡Œæ­¥éª¤</p>
<p>å…³é”®ç»„æˆéƒ¨åˆ†ï¼š</p>
<ul>
<li>AgentTypeï¼šå®šä¹‰å†³ç­–é€»è¾‘çš„å·¥ä½œæµæ¨¡å¼</li>
<li>Toolï¼šæ˜¯æœ‰ä¸€äº›å†…ç½®çš„åŠŸèƒ½æ¨¡å—ï¼Œå¦‚APIè°ƒç”¨ã€æœç´¢å¼•æ“ã€æ–‡æœ¬å¤„ç†ã€æ•°æ®æŸ¥è¯¢ç­‰å·¥å…·ã€‚Agentsé€šè¿‡è¿™äº›å·¥å…·æ¥æ‰§è¡Œç‰¹å®šçš„åŠŸèƒ½</li>
<li>AgentExecutorï¼šç”¨æ¥è¿è¡Œæ™ºèƒ½ä½“å¹¶æ‰§è¡Œå…¶å†³ç­–çš„å·¥å…·ï¼Œè´Ÿè´£</li>
</ul>
<p><strong>æ ¸å¿ƒç»„ä»¶5ï¼šRetrieval</strong></p>
<p>Retrievalï¼šå¯¹åº”ç€RAGï¼Œæ£€ç´¢å¤–éƒ¨æ•°æ®ï¼Œç„¶ååœ¨æ‰§è¡Œç”Ÿæˆæ­¥éª¤æ—¶å°†å…¶ä¼ é€’åˆ°LLMã€‚æ­¥éª¤åŒ…æ‹¬æ–‡æ¡£åŠ è½½ã€åˆ‡å‰²ã€Embeddingç­‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c1d0bb48c664942ada566ff526bbf00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=0f9K3QWtO7tDMdd8bau52fdg5kI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸Šå›¾ç»¿è‰²éƒ¨åˆ†æ˜¯è®©å…¥åº“å­˜å‚¨å‰çš„æ“ä½œ</p>
<ul>
<li>sourceï¼šæ•°æ®æºï¼Œå³å¤§æ¨¡å‹å¯ä»¥è¯†åˆ«çš„å¤šç§ç±»å‹çš„æ•°æ®ï¼šè§†é¢‘ã€å›¾ç‰‡ã€æ–‡æœ¬ã€ä»£ç ã€æ–‡æ¡£ç­‰</li>
<li>loadï¼šè´Ÿè´£å°†æ¥è‡ªä¸åŒæ•°æ®æºçš„éç»“æ„åŒ–æ•°æ®ï¼ŒåŠ è½½ä¸ºæ–‡æ¡£ï¼ˆDocumentï¼‰å¯¹è±¡</li>
<li>Transformï¼šè´Ÿè´£å¯¹åŠ è½½çš„æ–‡æ¡£è¿›è¡Œè½¬æ¢å’Œå¤„ç†ï¼Œæ¯”å¦‚è®²è¿‡æ–‡æœ¬æ‹†åˆ†ä¸ºå…·æœ‰è¯­ä¹‰æ„ä¹‰çš„ å°å—</li>
<li>Embedï¼šå°†æ–‡æœ¬ç¼–ç ä¸ºå‘é‡çš„èƒ½åŠ›ï¼Œä¸€ç§ç”¨äºåµŒå…¥æ–‡æ¡£ï¼Œå¦ä¸€ç§ç”¨äºåµŒå…¥æŸ¥è¯¢</li>
<li>storeï¼šå°†å‘é‡åŒ–çš„æ•°æ®è¿›è¡Œå­˜å‚¨</li>
<li>Retrieveï¼šä»å¤§è§„æ¨¡æ–‡æœ¬åº“ä¸­æ£€ç´¢å’ŒæŸ¥è¯¢ç›¸å…³çš„æ–‡æœ¬æ®µè½</li>
</ul>
<p><strong>æ ¸å¿ƒç»„ä»¶6ï¼šCallbacks</strong></p>
<p>Callbacksï¼šå›è°ƒæœºåˆ¶ï¼Œå…è®¸è¿æ¥åˆ°LLMåº”ç”¨ç¨‹åºçš„å„ä¸ªé˜¶æ®µï¼Œå¯ä»¥ç›‘æ§å’Œåˆ†æLangChainçš„è¿è¡Œæƒ…å†µï¼Œæ¯”å¦‚æ—¥å¿—è®°å½•ã€ç›‘æ§ã€æµä¼ è¾“ç­‰ç­‰ï¼Œä»¥ä¼˜åŒ–æ€§èƒ½</p>
<p>å›è°ƒå‡½æ•°å…è®¸æˆ‘ä»¬åœ¨LLMçš„å„ä¸ªé˜¶æ®µä½¿ç”¨å„ç§å„æ ·çš„â€œé’©å­â€ï¼Œä»è€Œè¾¾å®ç°æ—¥å¿—çš„è®°å½•ã€ç›‘æ§ä»¥åŠæµå¼ä¼ è¾“ç­‰åŠŸèƒ½</p>
<p><strong>å°ç»“ï¼š</strong></p>
<ul>
<li>Model I/Oæ¨¡å—ï¼šä½¿ç”¨æœ€å¤šï¼Œä¹Ÿæœ€ç®€å•</li>
<li>Chainsæ¨¡å—ï¼šæœ€é‡è¦çš„æ¨¡å—</li>
<li>Retrievalã€Agentæ¨¡å—ï¼šå¤§æ¨¡å‹çš„ä¸»è¦è½åœ°åœº</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec561d61c4474843bafffa4653b2e1c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905206&amp;x-signature=y84ss6EMXtSmEunjSND8v5aKCnI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œå…¶å®ƒç»„ä»¶è¦ä¹ˆæ˜¯å®ƒä»¬çš„è¾…åŠ©ï¼ˆæ¯”å¦‚ï¼šå‘é‡æ•°æ®åº“çš„åˆ†å—å’ŒåµŒå…¥ï¼‰ï¼Œè¦ä¹ˆåªæ˜¯å®Œæˆå¸¸è§„åº”ç”¨ç¨‹åºçš„ä»»åŠ¡</p>
<h2 data-id="heading-10">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•è‡ªå·±æ„å»ºä¸€ä¸ªMarkdownå¢é‡æ¸²æŸ“å™¨]]></title>    <link>https://juejin.cn/post/7577313637950652425</link>    <guid>https://juejin.cn/post/7577313637950652425</guid>    <pubDate>2025-11-28T02:47:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577313637950652425" data-draft-id="7577313637950406665" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•è‡ªå·±æ„å»ºä¸€ä¸ªMarkdownå¢é‡æ¸²æŸ“å™¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-28T02:47:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éš”å£çš„å¤§å”"/> <meta itemprop="url" content="https://juejin.cn/user/1714893871660205"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•è‡ªå·±æ„å»ºä¸€ä¸ªMarkdownå¢é‡æ¸²æŸ“å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893871660205/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éš”å£çš„å¤§å”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T02:47:29.000Z" title="Fri Nov 28 2025 02:47:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ­ç§˜ Vue3 å¢é‡ Markdown è§£æç»„ä»¶çš„ç¥å¥‡é­”æ³•</h2>
<p>å…ˆä¸Šæ•ˆæœ <a href="https://link.juejin.cn?target=https%3A%2F%2Fxhy12345.github.io%2F" target="_blank" title="https://xhy12345.github.io/" ref="nofollow noopener noreferrer">æ¼”ç¤ºdemo</a></p>
<h3 data-id="heading-1">èƒŒæ™¯</h3>
<p>ç›¸ä¿¡å¾ˆå¤šå¤§æ¨¡å‹å‰ç«¯å¼€å‘çš„å°ä¼™ä¼´éƒ½å·²ç»å¤„ç†è¿‡markdownå®æ—¶è§£æç¿»è¯‘æˆhtmläº†ï¼Œä¼ ç»Ÿçš„æ–¹å¼ç±»ä¼¼ä½¿ç”¨Markedã€markdown-itç­‰ç»„ä»¶å…¨é‡æ¸²æŸ“ã€‚ä½†æ˜¯å…¨é‡æ¸²æŸ“åŠå…¶æ¶ˆè€—æ€§èƒ½ï¼Œä¼šé€ æˆå¤§é‡çš„é‡æ’ã€é‡ç»˜ï¼Œå¯¼è‡´é¡µé¢æŠ–åŠ¨ã€‚</p>
<p>å„ä½å‰ç«¯å°ä¼™ä¼´ä»¬ï¼Œä»Šå¤©æˆ‘è¦ç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªæˆ‘æœ€è¿‘å¼€å‘çš„ã€ŒVue3 å¢é‡ Markdown è§£æç»„ä»¶ã€ã€‚è¿™ä¸ªç»„ä»¶å°±åƒæ˜¯ä¸€ä¸ªã€Œè¶…çº§ç¿»è¯‘å®˜ã€ï¼Œèƒ½æŠŠæ¯ç‡¥çš„ Markdown æ–‡æœ¬ç¬é—´å˜æˆç”ŸåŠ¨çš„ HTML é¡µé¢ï¼Œè€Œä¸”è¿˜æ”¯æŒæ•°å­¦å…¬å¼ã€ä»£ç é«˜äº®ç­‰é«˜çº§åŠŸèƒ½ï¼åºŸè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ·±å…¥è¿™ä¸ªç»„ä»¶çš„ã€Œå†…éƒ¨ä¸–ç•Œã€å§ï¼</p>
<p>å¼€ç®±å³ç”¨æ¨¡å¼</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># å®‰è£…å‘½ä»¤</span>
npm install v3-markdown-stream
<span class="hljs-meta"># æˆ–</span>
yarn <span class="hljs-keyword">add</span> v3-markdown-stream
</code></pre>
<p>ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;MarkdownRender :markInfo="markdownContent" /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'
import { MarkdownRender } from 'v3-markdown-stream';
import 'v3-markdown-stream/dist/v3-markdown-stream.css';

// é™æ€å†…å®¹
const markdownContent = ref('# Hello World\n\nThis is a simple markdown example.')
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-2">ç»„ä»¶æ¦‚è§ˆ</h3>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªç»„ä»¶çš„ã€Œèº«ä»½è¯ã€(<mark>éƒ½æ˜¯ç«™åœ¨å„ä½å·¨äººçš„è‚©è†€ä¸Š</mark>ï¼‰</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { h, defineComponent, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Fragment</span>, jsxs, jsx } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue/jsx-runtime"</span>;
<span class="hljs-keyword">import</span> { toJsxRuntime } <span class="hljs-keyword">from</span> <span class="hljs-string">"hast-util-to-jsx-runtime"</span>;
<span class="hljs-keyword">import</span> remarkParse <span class="hljs-keyword">from</span> <span class="hljs-string">"remark-parse"</span>;
<span class="hljs-keyword">import</span> rehypeKatex <span class="hljs-keyword">from</span> <span class="hljs-string">"rehype-katex"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"katex/dist/katex.min.css"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'highlight.js/styles/github-dark.css'</span>;
<span class="hljs-keyword">import</span> remarkMath <span class="hljs-keyword">from</span> <span class="hljs-string">"remark-math"</span>;
<span class="hljs-keyword">import</span> remarkRehype <span class="hljs-keyword">from</span> <span class="hljs-string">"remark-rehype"</span>;
<span class="hljs-keyword">import</span> rehypeRaw <span class="hljs-keyword">from</span> <span class="hljs-string">'rehype-raw'</span>;
<span class="hljs-keyword">import</span> rehypeHighlight <span class="hljs-keyword">from</span> <span class="hljs-string">'rehype-highlight'</span>
<span class="hljs-keyword">import</span> remarkFlexibleContainers <span class="hljs-keyword">from</span> <span class="hljs-string">'remark-flexible-containers'</span>
<span class="hljs-keyword">import</span> remarkGfm <span class="hljs-keyword">from</span> <span class="hljs-string">"remark-gfm"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">VFile</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"vfile"</span>;
<span class="hljs-keyword">import</span> { unified } <span class="hljs-keyword">from</span> <span class="hljs-string">"unified"</span>;

<span class="hljs-comment">// å®šä¹‰ç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'VueMarkdownStreamRender'</span>,
    <span class="hljs-attr">props</span>: {
        <span class="hljs-attr">markstr</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">default</span>: <span class="hljs-string">''</span>
        }
    },
    <span class="hljs-comment">// å…¶ä»–å®ç°...</span>
})
</code></pre>
<p>è¿™ä¸ªç»„ä»¶å°±åƒæ˜¯ä¸€ä¸ªã€Œç‘å£«å†›åˆ€ã€ï¼Œé›†æˆäº†å¤šç§åŠŸèƒ½ï¼Œè®© Markdown è§£æå˜å¾—å¼‚å¸¸å¼ºå¤§ï¼</p>
<h3 data-id="heading-3">æ ¸å¿ƒåŠŸèƒ½åŒ…è§£æ - æ­¦æ—é«˜æ‰‹ä»¬çš„å„å¸å…¶èŒ</h3>
<h4 data-id="heading-4">1. Vue æ ¸å¿ƒå›¢é˜Ÿ</h4>
<ul>
<li>vue : æä¾› h , defineComponent , computed ç­‰æ ¸å¿ƒ APIï¼Œæ˜¯æ•´ä¸ªç»„ä»¶çš„ã€Œéª¨æ¶ã€</li>
<li>vue/jsx-runtime : æä¾› Fragment , jsxs , jsx ï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨ Vue ä¸­ä¼˜é›…åœ°ä½¿ç”¨ JSX è¯­æ³•ï¼Œç›¸å½“äºç»™ Vue ã€Œè£…ä¸Šäº† React çš„å°ç¿…è†€ã€</li>
</ul>
<h4 data-id="heading-5">2. Unified è§£æç³»ç»Ÿ - è§£æç•Œçš„ã€Œä¸­å¤®å¸ä»¤éƒ¨ã€</h4>
<ul>
<li>unified : è¿™æ˜¯æ•´ä¸ªè§£æç³»ç»Ÿçš„ã€Œå¤§è„‘ã€ï¼Œè´Ÿè´£åè°ƒå„ä¸ªæ’ä»¶çš„å·¥ä½œã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå®ƒå°±åƒæ˜¯ä¸€ä¸ªã€ŒæŒ‡æŒ¥å®˜ã€ï¼ŒæŒ‡æŒ¥ç€ä¸€ç¾¤ã€Œå°å…µã€ï¼ˆæ’ä»¶ï¼‰ååŒä½œæˆ˜</li>
<li>vfile : æä¾›æ–‡ä»¶å¤„ç†åŠŸèƒ½ï¼ŒæŠŠ Markdown å­—ç¬¦ä¸²è½¬æ¢æˆç»Ÿä¸€çš„æ–‡ä»¶æ ¼å¼ï¼Œç›¸å½“äºç»™æ–‡æœ¬ã€Œç©¿ä¸Šäº†æ ‡å‡†åŒ–çš„è¡£æœã€</li>
</ul>
<h4 data-id="heading-6">3. Remark å®¶æ— - Markdown çš„ã€Œé­”æ³•å¸ˆã€</h4>
<ul>
<li>remark-parse : å°† Markdown æ–‡æœ¬è§£ææˆæŠ½è±¡è¯­æ³•æ ‘(AST)ï¼Œå°±åƒæ˜¯ã€Œç¿»è¯‘å®˜ã€æŠŠä¸­æ–‡ç¿»è¯‘æˆä¸€ç§ä¸­é—´è¯­è¨€</li>
<li>remark-math : å¤„ç†æ•°å­¦å…¬å¼ï¼Œè®©ä½ çš„æ–‡æ¡£å¯ä»¥ã€Œé«˜å¤§ä¸Šã€åœ°å±•ç¤ºå¤æ‚æ•°å­¦è¡¨è¾¾å¼</li>
<li>remark-rehype : å°† Markdown AST è½¬æ¢æˆ HTML ASTï¼Œç›¸å½“äºã€Œè½¬æ¢å™¨ã€æŠŠä¸­é—´è¯­è¨€ç¿»è¯‘æˆå¦ä¸€ç§ä¸­é—´è¯­è¨€</li>
<li>remark-gfm : æ”¯æŒ GitHub é£æ ¼çš„ Markdown æ‰©å±•åŠŸèƒ½ï¼Œæ¯”å¦‚è¡¨æ ¼ã€ä»»åŠ¡åˆ—è¡¨ç­‰ï¼Œè®©ä½ çš„ Markdown ã€Œä¸æ—¶ä¿±è¿›ã€</li>
<li>remark-flexible-containers : æä¾›çµæ´»çš„å®¹å™¨åŠŸèƒ½ï¼Œè®©ä½ çš„å†…å®¹å¸ƒå±€æ›´åŠ å¤šæ ·åŒ–ï¼Œå°±åƒæ˜¯ç»™å†…å®¹ã€Œå‡†å¤‡äº†å„ç§å½¢çŠ¶çš„å®¹å™¨ã€</li>
</ul>
<h4 data-id="heading-7">4. Rehype å®¶æ— - HTML çš„ã€Œç¾å®¹å¸ˆã€</h4>
<ul>
<li>rehype-raw : ä¿ç•™åŸå§‹ HTMLï¼Œè®©ä½ çš„ Markdown ä¸­æ··åˆçš„ HTML ä»£ç ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œï¼Œç›¸å½“äºã€Œå…è®¸ç‰¹æ®Šäººæ‰ä¿ç•™è‡ªå·±çš„ç‰¹è‰²ã€</li>
<li>rehype-katex : å°†æ•°å­¦å…¬å¼æ¸²æŸ“æˆæ¼‚äº®çš„ HTMLï¼Œè®©æ•°å­¦è¡¨è¾¾å¼ã€Œç©¿ä¸Šæ¼‚äº®çš„è¡£æœã€</li>
<li>rehype-highlight : ä¸ºä»£ç å—æä¾›è¯­æ³•é«˜äº®ï¼Œè®©ä½ çš„ä»£ç ã€Œå…‰å½©ç…§äººã€</li>
</ul>
<h4 data-id="heading-8">5. æ ·å¼æ”¯æŒ - é¢œå€¼æ‹…å½“</h4>
<ul>
<li>katex.min.css : æ•°å­¦å…¬å¼çš„ã€Œæ—¶å°šæœé¥°ã€</li>
<li>github-dark.css : ä»£ç é«˜äº®çš„ã€Œç‚«é…·çš®è‚¤ã€</li>
</ul>
<h3 data-id="heading-9">å®ç°åŸç†å¤§æ­ç§˜ - ä»æ–‡æœ¬åˆ°é¡µé¢çš„ç¥å¥‡æ—…ç¨‹</h3>
<h4 data-id="heading-10">1. ç»„ä»¶ç»“æ„è®¾è®¡</h4>
<p>ç»„ä»¶ä½¿ç”¨ Vue3 çš„ defineComponent å®šä¹‰ï¼Œæ¥æ”¶ä¸€ä¸ªå¿…é¡»çš„ markstr å±æ€§ï¼Œè¿™æ˜¯è¦è§£æçš„ Markdown å­—ç¬¦ä¸²ã€‚æ•´ä¸ªç»„ä»¶çš„è®¾è®¡éå¸¸ç®€æ´ï¼Œå°±åƒä¸€ä¸ªã€Œä¸“æ³¨çš„ç¿»è¯‘å®˜ã€ï¼Œåªåšä¸€ä»¶äº‹ï¼Œä½†è¦åšåˆ°æè‡´ï¼</p>
<h4 data-id="heading-11">2. è§£æå™¨é“¾çš„æ„å»º</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> unifiedProcessor = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> processor = <span class="hljs-title function_">unified</span>()
        .<span class="hljs-title function_">use</span>(remarkParse, { <span class="hljs-attr">allowDangerousHtml</span>: <span class="hljs-literal">true</span>})
        .<span class="hljs-title function_">use</span>(remarkFlexibleContainers)
        .<span class="hljs-title function_">use</span>(remarkRehype, { <span class="hljs-attr">allowDangerousHtml</span>: <span class="hljs-literal">true</span>})
        .<span class="hljs-title function_">use</span>(rehypeRaw)
        .<span class="hljs-title function_">use</span>(remarkGfm)
        .<span class="hljs-title function_">use</span>(rehypeKatex)
        .<span class="hljs-title function_">use</span>(remarkMath)
        .<span class="hljs-title function_">use</span>(rehypeHighlight);

    <span class="hljs-keyword">return</span> processor;
});
</code></pre>
<p>è¿™éƒ¨åˆ†ä»£ç æ„å»ºäº†ä¸€ä¸ªã€Œè§£ææµæ°´çº¿ã€ï¼Œå°±åƒå·¥å‚é‡Œçš„ç”Ÿäº§çº¿ä¸€æ ·ï¼ŒMarkdown æ–‡æœ¬ä¼šä¾æ¬¡ç»è¿‡å„ä¸ªã€ŒåŠ å·¥ç¯èŠ‚ã€ã€‚è¿™é‡Œä½¿ç”¨ computed ç¡®ä¿è§£æå™¨åªåœ¨å¿…è¦æ—¶é‡æ–°åˆ›å»ºï¼Œæé«˜äº†æ€§èƒ½ã€‚</p>
<h4 data-id="heading-12">3. æ–‡ä»¶è½¬æ¢ä¸ AST å¤„ç†</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createFile</span> = (<span class="hljs-params">markstr</span>) =&gt; {
    <span class="hljs-keyword">const</span> file = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VFile</span>();
    file.<span class="hljs-property">value</span> = markstr;
    <span class="hljs-keyword">return</span> file;
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">generateVueNode</span> = (<span class="hljs-params">tree</span>) =&gt; {
    <span class="hljs-keyword">const</span> vueVnode = <span class="hljs-title function_">toJsxRuntime</span>(tree, {
        <span class="hljs-title class_">Fragment</span>,
        <span class="hljs-attr">jsx</span>: jsx,
        <span class="hljs-attr">jsxs</span>: jsxs,
        <span class="hljs-attr">passNode</span>: <span class="hljs-literal">true</span>,
    });
    <span class="hljs-keyword">return</span> vueVnode;
};
</code></pre>
<p>è¿™ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«è´Ÿè´£ï¼š</p>
<ul>
<li>createFile : å°† Markdown å­—ç¬¦ä¸²åŒ…è£…æˆ VFile å¯¹è±¡ï¼Œå°±åƒæ˜¯ç»™æ–‡æœ¬ã€Œå‡†å¤‡å¥½è¡Œæï¼Œå‡†å¤‡å‡ºå‘ã€</li>
<li>generateVueNode : å°†è§£æåçš„ AST æ ‘è½¬æ¢æˆ Vue çš„è™šæ‹Ÿ DOM èŠ‚ç‚¹ï¼Œç›¸å½“äºã€Œå°†ä¸­é—´è¯­è¨€ç¿»è¯‘æˆæœ€ç»ˆçš„ç›®æ ‡è¯­è¨€ã€</li>
</ul>
<h4 data-id="heading-13">4. å“åº”å¼æ¸²æŸ“</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> computedVNode = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> processor = unifiedProcessor.<span class="hljs-property">value</span>;
    <span class="hljs-keyword">const</span> file = <span class="hljs-title function_">createFile</span>(props.<span class="hljs-property">markstr</span>);
    <span class="hljs-keyword">let</span> result = <span class="hljs-title function_">generateVueNode</span>(processor.<span class="hljs-title function_">runSync</span>(processor.<span class="hljs-title function_">parse</span>(file), file));
    <span class="hljs-keyword">return</span> result;
});

<span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(computedVNode.<span class="hljs-property">value</span>);
};
</code></pre>
<p>è¿™é‡Œæ˜¯æ•´ä¸ªç»„ä»¶çš„ã€Œæ ¸å¿ƒé©±åŠ¨ã€ï¼š</p>
<ul>
<li>ä½¿ç”¨ computed å“åº”å¼åœ°è®¡ç®—è™šæ‹Ÿ DOMï¼Œå½“ markstr å˜åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨é‡æ–°è§£æå¹¶æ¸²æŸ“</li>
<li>processor.parse(file) å°†æ–‡ä»¶è§£ææˆ AST</li>
<li>processor.runSync(...) è¿è¡Œæ‰€æœ‰æ’ä»¶å¤„ç† AST</li>
<li>æœ€åé€šè¿‡ h() å‡½æ•°å°†ç”Ÿæˆçš„è™šæ‹Ÿ DOM æ¸²æŸ“åˆ°é¡µé¢ä¸Š</li>
</ul>
<h3 data-id="heading-14">æŠ€æœ¯äº®ç‚¹ä¸è®¾è®¡ç²¾é«“</h3>
<ol>
<li>å“åº”å¼è®¾è®¡ : åˆ©ç”¨ Vue3 çš„ computed ï¼Œå®ç°äº† Markdown å­—ç¬¦ä¸²å˜åŒ–æ—¶çš„è‡ªåŠ¨é‡æ–°è§£æå’Œæ¸²æŸ“</li>
<li>æ¨¡å—åŒ–æ’ä»¶é“¾ : é‡‡ç”¨ç»Ÿä¸€çš„æ’ä»¶ç³»ç»Ÿï¼Œå„åŠŸèƒ½æ¨¡å—è§£è€¦ï¼Œå¯ä»¥çµæ´»åœ°æ·»åŠ æˆ–ç§»é™¤åŠŸèƒ½</li>
<li>é«˜æ€§èƒ½ä¼˜åŒ– : é€šè¿‡ computed ç¼“å­˜è§£æå™¨å’Œè™šæ‹Ÿ DOMï¼Œé¿å…ä¸å¿…è¦çš„é‡å¤è®¡ç®—</li>
<li>ä¸°å¯Œçš„åŠŸèƒ½æ”¯æŒ : æ”¯æŒæ•°å­¦å…¬å¼ã€ä»£ç é«˜äº®ã€GitHub é£æ ¼æ‰©å±•ç­‰é«˜çº§åŠŸèƒ½</li>
<li>é”™è¯¯å¤„ç†æœºåˆ¶ : æä¾›äº† errorCaptured é’©å­ï¼Œæ•è·å¹¶è®°å½•è§£æè¿‡ç¨‹ä¸­çš„é”™è¯¯</li>
</ol>
<h3 data-id="heading-15">ä»£ç ä¼˜åŒ–å»ºè®®</h3>
<p>è™½ç„¶è¿™ä¸ªç»„ä»¶å·²ç»ç›¸å½“ä¼˜ç§€ï¼Œä½†è¿˜æœ‰ä¸€äº›å°åœ°æ–¹å¯ä»¥è¿›ä¸€æ­¥å®Œå–„ï¼š</p>
<ol>
<li>æ’ä»¶é¡ºåºä¼˜åŒ– : ç›®å‰çš„æ’ä»¶é¡ºåºå¯èƒ½ä¸æ˜¯æœ€ä¼˜çš„ï¼Œå»ºè®®è°ƒæ•´ä¸ºæ›´åˆç†çš„é¡ºåºï¼š</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> processor = <span class="hljs-title function_">unified</span>()
    .<span class="hljs-title function_">use</span>(remarkParse, { <span class="hljs-attr">allowDangerousHtml</span>: <span class="hljs-literal">true</span>})
    .<span class="hljs-title function_">use</span>(remarkGfm) <span class="hljs-comment">// GFM åº”è¯¥åœ¨ early é˜¶æ®µ</span>
    .<span class="hljs-title function_">use</span>(remarkMath) <span class="hljs-comment">// æ•°å­¦æ”¯æŒä¹Ÿåº”è¯¥ early</span>
    .<span class="hljs-title function_">use</span>(remarkFlexibleContainers)
    .<span class="hljs-title function_">use</span>(remarkRehype, { <span class="hljs-attr">allowDangerousHtml</span>: <span class="hljs-literal">true</span>})
    .<span class="hljs-title function_">use</span>(rehypeRaw)
    .<span class="hljs-title function_">use</span>(rehypeHighlight) <span class="hljs-comment">// ä»£ç é«˜äº®åº”è¯¥åœ¨ katex ä¹‹å‰</span>
    .<span class="hljs-title function_">use</span>(rehypeKatex); <span class="hljs-comment">// æ•°å­¦æ¸²æŸ“ä½œä¸ºæœ€åä¸€æ­¥</span>
</code></pre>
<ol>
<li>å¼‚æ­¥è§£ææ”¯æŒ : è€ƒè™‘æ·»åŠ å¼‚æ­¥è§£ææ¨¡å¼ï¼Œå¯¹äºå¤§å‹æ–‡æ¡£å¯ä»¥æé«˜æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ</li>
<li>ç¼“å­˜æœºåˆ¶ : å¯ä»¥æ·»åŠ åŸºäºå†…å®¹å“ˆå¸Œçš„ç¼“å­˜ï¼Œé¿å…ç›¸åŒå†…å®¹çš„é‡å¤è§£æ</li>
<li>é”™è¯¯è¾¹ç•Œ : å¢å¼ºé”™è¯¯å¤„ç†ï¼Œæä¾›æ›´å‹å¥½çš„é”™è¯¯æç¤ºç»™ç”¨æˆ·</li>
</ol>
<h3 data-id="heading-16">æ€»ç»“</h3>
<p>è¿™ä¸ª Vue3 Markdown è§£æç»„ä»¶å°±åƒæ˜¯ä¸€ä¸ªã€Œæ™ºèƒ½ç¿»è¯‘å®˜ + é«˜çº§æ’ç‰ˆå¸ˆã€ï¼Œå®ƒä¸ä»…èƒ½å‡†ç¡®åœ°å°† Markdown è½¬æ¢æˆ HTMLï¼Œè¿˜èƒ½è®©æœ€ç»ˆçš„å±•ç¤ºæ•ˆæœæ—¢ç¾è§‚åˆåŠŸèƒ½ä¸°å¯Œã€‚é€šè¿‡å·§å¦™åœ°ç»„åˆå„ç§å¼€æºå·¥å…·ï¼Œå®ƒå®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡ã€æ€§èƒ½ä¼˜è‰¯çš„ Markdown è§£ææ¸²æŸ“ç³»ç»Ÿã€‚</p>
<p>æ— è®ºæ˜¯æ„å»ºåšå®¢ã€æ–‡æ¡£ç³»ç»Ÿè¿˜æ˜¯çŸ¥è¯†åº“ï¼Œè¿™ä¸ªç»„ä»¶éƒ½èƒ½ä¸ºä½ çš„é¡¹ç›®å¢æ·»å¼ºå¤§çš„å†…å®¹å±•ç¤ºèƒ½åŠ›ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ ç†è§£è¿™ä¸ªç»„ä»¶çš„å®ç°åŸç†ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶æå‡ºå®è´µçš„æ”¹è¿›å»ºè®®ï¼</p>
<p>æœ€åï¼Œå¦‚æœä½ è§‰å¾—è¿™ä¸ªç»„ä»¶å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å¦¨ç‚¹ä¸ªèµå¹¶åˆ†äº«ç»™æ›´å¤šçš„å¼€å‘è€…æœ‹å‹ï¼Œè®©æˆ‘ä»¬ä¸€èµ·è®© Markdown è§£æå˜å¾—æ›´ç®€å•ã€æ›´å¼ºå¤§ï¼</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxhy12345%2Fv3-markdown-stream" target="_blank" title="https://github.com/xhy12345/v3-markdown-stream" ref="nofollow noopener noreferrer">GitHubæºç ä»“åº“åœ°å€</a>
å¦‚æœè§‰å¾—å¥½ç”¨ï¼Œæ¬¢è¿ç»™ä¸ªStar â­ï¸ æ”¯æŒä¸€ä¸‹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HTML iframe æ ‡ç­¾]]></title>    <link>https://juejin.cn/post/7577333742277673002</link>    <guid>https://juejin.cn/post/7577333742277673002</guid>    <pubDate>2025-11-28T02:57:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577333742277673002" data-draft-id="7577050643203735602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HTML iframe æ ‡ç­¾"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-28T02:57:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WILLF"/> <meta itemprop="url" content="https://juejin.cn/user/1447373456540285"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HTML iframe æ ‡ç­¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1447373456540285/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WILLF
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T02:57:02.000Z" title="Fri Nov 28 2025 02:57:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ <code>&lt;iframe&gt;</code> ?</h2>
<p><code>&lt;iframe&gt;</code> æ˜¯ä¸€ä¸ªå†…è”æ¡†æ¶ï¼Œç”¨äºåœ¨å½“å‰<code>HTML</code>æ–‡æ¡£ä¸­åµŒå…¥å¦ä¸€ä¸ªç‹¬ç«‹çš„<code>HTML</code>é¡µé¢ã€‚å®ƒå°±åƒä¸€ä¸ªâ€œçª—å£â€ï¼Œé€šè¿‡å®ƒå¯ä»¥åŠ è½½å¹¶æ˜¾ç¤ºå¦ä¸€ä¸ªç½‘é¡µçš„å†…å®¹ï¼Œä¸”è¯¥å†…å®¹æ‹¥æœ‰ç‹¬ç«‹çš„ <code>DOM</code>ã€<code>CSS</code>ã€<code>JavaScript</code>ç¯å¢ƒã€‚</p>
<p>åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html">    <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://example.com"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"600"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">frameborder</span>=<span class="hljs-string">"0"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span>
</code></pre>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒå±æ€§</h2>
<ul>
<li><code>src</code>ï¼šåµŒå…¥é¡µé¢çš„ <code>URL</code></li>
<li><code>width</code> / <code>height</code>ï¼šå°ºå¯¸ï¼ˆå¯è®¾ä¸º 100%ï¼‰</li>
<li><code>title</code>ï¼šæè¿° <code>iframe</code>å†…å®¹</li>
<li><code>loading="lazy"</code>ï¼šæ‡’åŠ è½½</li>
<li><code>sandbox</code>ï¼šå¯ç”¨å®‰å…¨æ²™ç®±</li>
<li><code>allowfullscreen</code>ï¼šå…è®¸åµŒå…¥çš„ç½‘é¡µå…¨å±æ˜¾ç¤ºï¼Œéœ€è¦å…¨å±<code>API</code>çš„æ”¯æŒã€‚</li>
<li><code>frameborder</code>ï¼šæ˜¯å¦ç»˜åˆ¶è¾¹æ¡†ï¼Œ<code>0</code>ä¸ºä¸ç»˜åˆ¶ï¼Œ<code>1</code>ä¸ºç»˜åˆ¶ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚å»ºè®®å°½é‡å°‘ç”¨è¿™ä¸ªå±æ€§ï¼Œè€Œæ˜¯åœ¨<code>CSS</code>é‡Œé¢è®¾ç½®æ ·å¼ã€‚</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€<code>sandbox</code> æ²™ç®±æœºåˆ¶ï¼ˆå®‰å…¨æ ¸å¿ƒï¼ï¼‰</h2>
<p>è¿™æ˜¯<code>&lt;iframe&gt;</code>æœ€é‡è¦çš„å®‰å…¨ç‰¹æ€§ã€‚å¯ç”¨åï¼Œé»˜è®¤ç¦æ­¢å‡ ä¹æ‰€æœ‰å±é™©æ“ä½œï¼Œé™¤éæ˜¾å¼æˆæƒã€‚</p>
<p>å¸¸ç”¨<code>sandbox</code>æŒ‡ä»¤ï¼š</p>
<ul>
<li>ï¼ˆç©ºå€¼ï¼‰ï¼šæœ€ä¸¥æ ¼ï¼šç¦æ­¢è„šæœ¬ã€è¡¨å•æäº¤ã€å¼¹çª—ã€åŒæºè®¿é—®ç­‰ã€‚</li>
<li><code>allow-scripts</code>ï¼šå…è®¸æ‰§è¡Œ<code>JavaScript</code></li>
<li><code>allow-same-origin</code>ï¼šå…è®¸è¢«è§†ä¸ºåŒæºï¼ˆè°¨æ…ï¼è‹¥åŒæ—¶å…è®¸è„šæœ¬ï¼Œå¯èƒ½ç»•è¿‡æ²™ç®±ï¼‰</li>
<li><code>allow-forms</code>ï¼šå…è®¸æäº¤è¡¨å•</li>
<li><code>allow-popups</code>ï¼šå…è®¸ window.open()</li>
<li><code>allow-top-navigation</code>ï¼šå…è®¸è·³è½¬é¡¶å±‚é¡µé¢ï¼ˆå±é™©ï¼ï¼‰</li>
</ul>
<h2 data-id="heading-3">å››ã€è·¨åŸŸé€šä¿¡ï¼š<code>postMessage API</code></h2>
<p>ç”±äºåŒæºç­–ç•¥ï¼Œçˆ¶é¡µé¢ä¸<code>iframe</code>ä¸èƒ½ç›´æ¥è®¿é—®å¯¹æ–¹<code>DOM</code>æˆ–<code>JS</code>å˜é‡ã€‚ä½†å¯é€šè¿‡<code>postMessage</code>å®‰å…¨é€šä¿¡ã€‚</p>
<p><strong>çˆ¶é¡µé¢ -&gt; iframe</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// çˆ¶é¡µé¢</span>
<span class="hljs-keyword">const</span> iframe = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'my-iframe'</span>)
iframe.<span class="hljs-property">contentWindow</span>.<span class="hljs-title function_">postMessage</span>(
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'AUTH'</span>, <span class="hljs-attr">token</span>: <span class="hljs-string">'xxx'</span> },
    <span class="hljs-string">'https://trusted-oframe.com'</span> <span class="hljs-comment">//æŒ‡å®šç›®æ ‡ originï¼Œé˜²æ³„æ¼</span>
)
</code></pre>
<p><strong>iframe -&gt; çˆ¶é¡µé¢</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// iframe å†…éƒ¨</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">postMessage</span>(
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'RESIZE'</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">800</span> },
    <span class="hljs-string">'*'</span> <span class="hljs-comment">// æˆ–æŒ‡å®šçˆ¶é¡µé¢ origin</span>
)
</code></pre>
<p><strong>ç›‘å¬æ¶ˆæ¯ï¼ˆåŒæ–¹éƒ½è¦ï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">origin</span> !== <span class="hljs-string">'https://expected-parent.com'</span>) <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'AUTH'</span>) {
        <span class="hljs-comment">// å¤„ç†token</span>
    }
})
</code></pre>
<h2 data-id="heading-4">äº”ã€æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2>
<ul>
<li>æ‡’åŠ è½½ï¼š<code>&lt;iframe loading="lazy"&gt;</code>Â å‡å°‘é¦–å±å‹åŠ›</li>
<li>æŒ‰éœ€åŠ è½½ï¼šç”¨æˆ·ç‚¹å‡»â€œå±•å¼€â€åå†è®¾ç½® <code>src</code></li>
<li>é¿å…æ·±å±‚åµŒå¥—ï¼š<code>iframe</code> åµŒå¥— <code>iframe</code> ä¼šå¯¼è‡´æ€§èƒ½é›ªå´©</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨Hutoolçš„ExcelWriterå¯¼å‡ºå¤æ‚æ¨¡æ¿ï¼Œæ”¯æŒä¸‹æ‹‰é€‰é¡¹çº§è”ç­›é€‰]]></title>    <link>https://juejin.cn/post/7577295460249321518</link>    <guid>https://juejin.cn/post/7577295460249321518</guid>    <pubDate>2025-11-28T03:10:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577295460249321518" data-draft-id="7577295460248895534" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨Hutoolçš„ExcelWriterå¯¼å‡ºå¤æ‚æ¨¡æ¿ï¼Œæ”¯æŒä¸‹æ‹‰é€‰é¡¹çº§è”ç­›é€‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-28T03:10:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›ªæ©‡åƒµå°¸"/> <meta itemprop="url" content="https://juejin.cn/user/3887517054021976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨Hutoolçš„ExcelWriterå¯¼å‡ºå¤æ‚æ¨¡æ¿ï¼Œæ”¯æŒä¸‹æ‹‰é€‰é¡¹çº§è”ç­›é€‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3887517054021976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›ªæ©‡åƒµå°¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:10:08.000Z" title="Fri Nov 28 2025 03:10:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ˜¨å¤©åˆšæ¥äº†ä¸€ä¸ªå¯¼å…¥å¯¼å‡ºçš„éœ€æ±‚ï¼Œå‰ç«¯é¡µé¢æœ‰ä¸‰ä¸ªä¸‹æ‹‰é€‰æ‹©æ¡†æœ‰ç›¸å¯¹åº”çš„å…³è”å…³ç³»ã€‚åœ¨ç”Ÿæˆæ¨¡æ¿çš„æ—¶å€™ä¹Ÿéœ€è¦æŠŠè¿™ç§å…³ç³»ç»™è®¾ç½®å‡ºæ¥ã€‚
æœ€ç»ˆå®ç°çš„æ•ˆæœä¸º A D Eä¸‰åˆ—çš„æ•°æ®èƒ½å¤Ÿå®ç°çº§è”æ•ˆæœï¼Œ</p>
<ol>
<li>Aåˆ—ä¸‹æ‹‰é€‰æ‹©ä¹‹åï¼Œæ ¹æ®é€‰æ‹©çš„å†…å®¹æ˜¯å¦åŒ…å«ç‰¹å®šæ¡ä»¶ï¼Œç»™Dè®¾ç½®ä¸åŒçš„æ•°æ®æœ‰æ•ˆæ€§ã€‚</li>
<li>Dåˆ—é€‰æ‹©ä¹‹åï¼ŒåŒ¹é…å¯¹åº”çš„idç»™Xåˆ—è®¾ç½®å€¼ï¼Œ</li>
<li>Eåˆ—çš„æ•°æ®æœ‰æ•ˆæ€§æ ¹æ®Xåˆ—çš„å€¼åŒ¹é…å¯¹åº”çš„æ•°æ®</li>
<li>Yåˆ—çš„å€¼æ ¹æ®Eåˆ—çš„å€¼åŒ¹é…å¯¹åº”çš„Code</li>
</ol>
</blockquote>
<h2 data-id="heading-0">1. å…·ä½“çš„å®ç°æ€è·¯</h2>
<ol>
<li>é€šè¿‡éšè—Sheeté¡µå°†éœ€è¦ç”¨åˆ°çš„æ•°æ®å†™å…¥</li>
<li>é€šè¿‡åç§°ç®¡ç†å™¨è®¾ç½®æ•°æ®å¼•ç”¨</li>
<li>é€šè¿‡å‡ ç»„ç‰¹å®šçš„å‡½æ•°å®ç°åŠŸèƒ½</li>
</ol>





















<table><thead><tr><th align="center">å‡½æ•°</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center">IF(ISNUMBER(FIND("ä¸­ä»‹",A{})),hsAgencyNames,CompanyNames)</td><td align="center">ä»Aåˆ—åˆ¤æ–­æ˜¯å¦åŒ…å«ç‰¹å®šå­—ç¬¦ä¸²ï¼Œç„¶åè®¾ç½®å¯¹åº”çš„ åç§°ç®¡ç†å™¨å¼•ç”¨</td></tr><tr><td align="center">IFERROR(VLOOKUP($D{}, CompanyIdMap, 2, FALSE), "")</td><td align="center">æ ¹æ®Dåˆ—çš„å€¼ï¼Œå»CompanyIdMapè¿™ä¸ªåç§°å¼•ç”¨ä¸­æŸ¥è¯¢å¯¹åº”çš„ID</td></tr><tr><td align="center">CompanyData!$A$2:$A:$100</td><td align="center">åˆ›å»ºåç§°ç®¡ç†å™¨çš„å¼•ç”¨èŒƒå›´</td></tr></tbody></table>
<h2 data-id="heading-1">2. æ‹†åˆ†å®ç°</h2>
<h3 data-id="heading-2">1. å¯¼å‡ºæ¨¡æ¿åŠŸèƒ½</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">downloadTemplateV2</span><span class="hljs-params">(HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-comment">// 1. è®¾ç½®å“åº”å¤´</span>
    response.setContentType(<span class="hljs-string">"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"</span>);
    response.setCharacterEncoding(<span class="hljs-string">"utf-8"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> URLEncoder.encode(<span class="hljs-string">"çº§è”å¯¼å…¥æ¨¡æ¿"</span>, <span class="hljs-string">"UTF-8"</span>);
    response.setHeader(<span class="hljs-string">"Content-disposition"</span>, <span class="hljs-string">"attachment;filename*=utf-8''"</span> + fileName + <span class="hljs-string">".xlsx"</span>);
    <span class="hljs-comment">// ä»è‡ªå·±çš„æ•°æ®åº“è·å–æ•°æ®</span>
    Map&lt;String, CompanyVo&gt; seaCmpNameIdMap = getCompanyMap();
    <span class="hljs-comment">// æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡è°ƒæ•´</span>
    Map&lt;String, List&lt;Org&gt;&gt; orgMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();

    <span class="hljs-type">String</span> <span class="hljs-variable">topTipStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å¯¼å…¥æç¤ºä¿¡æ¯"</span>;
    <span class="hljs-keyword">try</span> (<span class="hljs-type">OutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> response.getOutputStream()) {
        <span class="hljs-comment">// 2. åˆ›å»ºExcelWriter</span>
        <span class="hljs-type">ExcelWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> ExcelUtil.getWriter(<span class="hljs-literal">true</span>); <span class="hljs-comment">// trueè¡¨ç¤ºåˆ›å»ºxlsxæ ¼å¼</span>
        <span class="hljs-type">Sheet</span> <span class="hljs-variable">sheet</span> <span class="hljs-operator">=</span> writer.getSheet();
        <span class="hljs-type">Workbook</span> <span class="hljs-variable">workbook</span> <span class="hljs-operator">=</span> writer.getWorkbook();
        <span class="hljs-comment">// å†™å…¥æ˜ å°„æ•°æ®åˆ°å·¥ä½œè¡¨å¹¶åˆ›å»ºåç§°ç®¡ç†å™¨</span>
        writeCompanyAndOrgData(workbook, seaCmpNameIdMap, orgMap);
        <span class="hljs-comment">// è®¾ç½®çº§è”ä¸‹æ‹‰å’Œå¯¹åº”åˆ—å¡«å……</span>
        setCompanyValidationAndFormula(sheet, workbook);
        setDeptValidationAndFormula(sheet, workbook);

        List&lt;String&gt; headers = Arrays.asList(
                <span class="hljs-string">"è¡¨å¤´1"</span>ï¼Œ<span class="hljs-string">"è¡¨å¤´2"</span>ï¼Œ<span class="hljs-string">"è¡¨å¤´3"</span>ï¼Œ<span class="hljs-string">"è¡¨å¤´4"</span>
        );
        writer.merge(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">24</span>, topTipStr, <span class="hljs-literal">true</span>);
        writer.passRows(<span class="hljs-number">1</span>);
        writer.writeHeadRow(headers);

        <span class="hljs-comment">// æ—¥æœŸç±»å‹é™åˆ¶</span>
        restrictCell2DateFormat(sheet, <span class="hljs-number">1</span>);;
        <span class="hljs-comment">// å­—å…¸é¡¹ç±»å‹çš„æ•°æ®ä¸‹æ‹‰è®¾ç½®</span>
        setDictDataValidation(sheet, <span class="hljs-string">"spiChecktypeHs"</span>, <span class="hljs-number">0</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; headers.size(); i++) {
            <span class="hljs-type">String</span> <span class="hljs-variable">headerText</span> <span class="hljs-operator">=</span> headers.get(i);
            <span class="hljs-comment">// è®¡ç®—å®½åº¦ï¼šæ–‡å­—é•¿åº¦ Ã— 2 Ã— 256ï¼ˆExcelçš„å®½åº¦å•ä½ï¼‰</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">columnWidth</span> <span class="hljs-operator">=</span> headerText.length() * <span class="hljs-number">2</span> * <span class="hljs-number">256</span>;
            <span class="hljs-comment">// è®¾ç½®æœ€å°å®½åº¦ï¼ˆé¿å…è¿‡çª„ï¼‰</span>
            columnWidth = Math.max(columnWidth, <span class="hljs-number">8</span> * <span class="hljs-number">256</span>);
            <span class="hljs-comment">// è®¾ç½®åˆ—å®½</span>
            sheet.setColumnWidth(i, columnWidth);
        }
        writer.flush(out).close();
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.info(<span class="hljs-string">"ä¸‹è½½æ¨¡æ¿å¤±è´¥"</span>, e);
    }
}
</code></pre>
<h3 data-id="heading-3">2.å†™å…¥æ˜ å°„æ•°æ®å’Œåˆ›å»ºåç§°ç®¡ç†å™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeCompanyAndOrgData</span><span class="hljs-params">(Workbook workbook, Map&lt;String, HsCompanyVo&gt; seaCmpNameIdMap,
                                    Map&lt;String, List&lt;Org&gt;&gt; orgMap)</span> {
    <span class="hljs-comment">// ========== 1. å†™å…¥ä¼ä¸šæ•°æ® ==========</span>
    <span class="hljs-type">Sheet</span> <span class="hljs-variable">companySheet</span> <span class="hljs-operator">=</span> workbook.createSheet(<span class="hljs-string">"CompanyData"</span>);
    workbook.setSheetHidden(workbook.getSheetIndex(companySheet), <span class="hljs-literal">true</span>);

    <span class="hljs-comment">// ä¼ä¸šæ•°æ®è¡¨å¤´</span>
    <span class="hljs-type">Row</span> <span class="hljs-variable">companyHeader</span> <span class="hljs-operator">=</span> companySheet.createRow(<span class="hljs-number">0</span>);
    companyHeader.createCell(<span class="hljs-number">0</span>).setCellValue(<span class="hljs-string">"ä¼ä¸šåç§°"</span>);
    companyHeader.createCell(<span class="hljs-number">1</span>).setCellValue(<span class="hljs-string">"ä¼ä¸šID"</span>);

    <span class="hljs-type">int</span> <span class="hljs-variable">companyRow</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span> (Map.Entry&lt;String, HsCompanyVo&gt; entry : seaCmpNameIdMap.entrySet()) {
        <span class="hljs-type">Row</span> <span class="hljs-variable">row</span> <span class="hljs-operator">=</span> companySheet.createRow(companyRow++);
        row.createCell(<span class="hljs-number">0</span>).setCellValue(entry.getKey());
        row.createCell(<span class="hljs-number">1</span>).setCellValue(entry.getValue().getId());
    }

    <span class="hljs-comment">// åˆ›å»ºä¼ä¸šåç§°åˆ—è¡¨å’ŒIDæ˜ å°„çš„åç§°ç®¡ç†å™¨</span>
    <span class="hljs-comment">// è¿™é‡Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œ å°±æ˜¯ç¬¬äºŒä¸ªå‚æ•°ä¹Ÿå°±æ˜¯åç§°ç®¡ç†å™¨çš„åå­— å¿…é¡»ä»¥_æˆ–è€… å­—æ¯å¼€å¤´</span>
    createName(workbook, <span class="hljs-string">"CompanyNames"</span>, <span class="hljs-string">"CompanyData!$A$2:$A$"</span> + companyRow);
    <span class="hljs-comment">// </span>
    createName(workbook, <span class="hljs-string">"CompanyIdMap"</span>, <span class="hljs-string">"CompanyData!$A$2:$B$"</span> + companyRow);
    
    
    <span class="hljs-type">Sheet</span> <span class="hljs-variable">orgSheet</span> <span class="hljs-operator">=</span> workbook.createSheet(<span class="hljs-string">"OrgData"</span>);
    workbook.setSheetHidden(workbook.getSheetIndex(orgSheet), <span class="hljs-literal">true</span>);

    <span class="hljs-comment">// å•ä½æ•°æ®è¡¨å¤´</span>
    <span class="hljs-type">Row</span> <span class="hljs-variable">orgHeader</span> <span class="hljs-operator">=</span> orgSheet.createRow(<span class="hljs-number">0</span>);
    orgHeader.createCell(<span class="hljs-number">0</span>).setCellValue(<span class="hljs-string">"ä¼ä¸šID"</span>);
    orgHeader.createCell(<span class="hljs-number">1</span>).setCellValue(<span class="hljs-string">"å•ä½åç§°"</span>);
    orgHeader.createCell(<span class="hljs-number">2</span>).setCellValue(<span class="hljs-string">"å•ä½Code"</span>);

    <span class="hljs-type">int</span> <span class="hljs-variable">orgRow</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
    <span class="hljs-type">int</span> <span class="hljs-variable">startRow</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
    <span class="hljs-type">String</span> <span class="hljs-variable">orgDataNameNamePrefix</span> <span class="hljs-operator">=</span> <span class="hljs-string">"_"</span>;
    <span class="hljs-comment">// å†™å…¥æ‰€æœ‰å•ä½æ•°æ®</span>
    <span class="hljs-keyword">for</span> (Map.Entry&lt;String, List&lt;Org&gt;&gt; entry : orgMap.entrySet()) {
        <span class="hljs-type">String</span> <span class="hljs-variable">companyId</span> <span class="hljs-operator">=</span> entry.getKey();
        List&lt;Org&gt; orgs = entry.getValue();

        <span class="hljs-keyword">if</span> (CollUtil.isNotEmpty(orgs)) {
            <span class="hljs-keyword">for</span> (Org org : orgs) {
                <span class="hljs-type">Row</span> <span class="hljs-variable">row</span> <span class="hljs-operator">=</span> orgSheet.createRow(orgRow++);
                row.createCell(<span class="hljs-number">0</span>).setCellValue(companyId);
                row.createCell(<span class="hljs-number">1</span>).setCellValue(org.getShortName());
                row.createCell(<span class="hljs-number">2</span>).setCellValue(org.getCode()); <span class="hljs-comment">// æ­£ç¡®å†™å…¥code</span>
            }
            <span class="hljs-type">String</span> <span class="hljs-variable">referenceStr</span> <span class="hljs-operator">=</span> StrUtil.format(<span class="hljs-string">"OrgData!$B${}:$B${}"</span>, startRow, orgRow);
            log.info(<span class="hljs-string">"{} ::: {}"</span>, orgDataNameNamePrefix + companyId, referenceStr);
            createName(workbook, orgDataNameNamePrefix + companyId, referenceStr);
            startRow = orgRow + <span class="hljs-number">1</span>;
        }
    }
    log.info(<span class="hljs-string">"æœ€ç»ˆçš„startRow: {}"</span>, startRow);
    createName(workbook, <span class="hljs-string">"OrgDataMapping"</span>, <span class="hljs-string">"OrgData!$B$2:$C$"</span> + (startRow - <span class="hljs-number">1</span>));
    <span class="hljs-comment">// ä¿æŠ¤å·¥ä½œè¡¨</span>
    companySheet.protectSheet(<span class="hljs-string">"protected"</span>);
    orgSheet.protectSheet(<span class="hljs-string">"protected"</span>);
}
<span class="hljs-comment">// åˆ›å»ºåç§°ç®¡ç†å™¨è¿˜æœ‰å¼•ç”¨èŒƒå›´</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createName</span><span class="hljs-params">(Workbook workbook, String nameName, String reference)</span> {
    <span class="hljs-keyword">if</span> (workbook <span class="hljs-keyword">instanceof</span> XSSFWorkbook) {
        <span class="hljs-type">XSSFName</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> ((XSSFWorkbook) workbook).createName();
        name.setNameName(nameName);
        name.setRefersToFormula(reference);
    }
}

</code></pre>
<h3 data-id="heading-4">3. è®¾ç½®æ•°æ®æœ‰æ•ˆæ€§ï¼Œå’Œæ ¹æ®è¿™ä¸€åˆ—è‡ªåŠ¨å¡«å……å€¼çš„æ–¹æ³•</h3>
<blockquote>
<p>æˆ‘çš„Eåˆ—çš„æ•°æ®æ˜¯æ ¹æ®Yåˆ—çš„æ•°æ®è®¾ç½®çš„æ•°æ®æœ‰æ•ˆæ€§ï¼Œæ‰€ä»¥æˆ‘æŠŠYåˆ—ç”¨äº† _+idçš„æ–¹å¼åšäº† åç§°ç®¡ç†å™¨ å¼•ç”¨ã€‚æ‰€ä»¥ç»™Eåˆ—è®¾ç½® formulaçš„æ—¶å€™ç›´æ¥å†™ ä¸‹ç™¾å¹´çš„ä»£ç å°±å¯ä»¥äº†ï¼Œ é€šè¿‡<code>INDIRECT</code>å‡½æ•°å¼•ç”¨å¯¹åº”çš„åç§°ç®¡ç†å™¨</p>
<pre><code class="hljs language-java" lang="java">StrUtil.format(<span class="hljs-string">"INDIRECT("</span>_<span class="hljs-string">"&amp;X{})"</span>, rowIndex + <span class="hljs-number">1</span>)
</code></pre>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCompanyValidationAndFormula</span><span class="hljs-params">(Sheet sheet, Workbook workbook)</span> {
    <span class="hljs-type">XSSFDataValidationHelper</span> <span class="hljs-variable">dvHelper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">XSSFDataValidationHelper</span>((XSSFSheet) sheet);
    CellRangeAddressList companyRange;
    String formula;
    String orgIdFormula;
    XSSFDataValidationConstraint companyConstraint;
    XSSFDataValidation companyValidation;
    Row row;
    <span class="hljs-comment">// 2. åˆ›å»ºé”å®šæ ·å¼ç”¨äºå—æ£€ä¼ä¸šIDåˆ—</span>
    <span class="hljs-type">CellStyle</span> <span class="hljs-variable">lockedStyle</span> <span class="hljs-operator">=</span> workbook.createCellStyle();
    lockedStyle.setLocked(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">rowIndex</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; rowIndex &lt;= templateEndRow; rowIndex++) {
        <span class="hljs-comment">// åªä¸ºå½“å‰è¡Œçš„ç¬¬4åˆ—ï¼ˆç´¢å¼•3ï¼‰è®¾ç½®æ•°æ®éªŒè¯</span>
        companyRange = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CellRangeAddressList</span>(rowIndex, rowIndex, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>);
        <span class="hljs-comment">// åˆ¤æ–­Aåˆ—é€‰ä¸­çš„æ•°æ®ä¸­æ˜¯å¦æœ‰åˆ é€‰æ¡ä»¶</span>
        <span class="hljs-comment">// æœ‰çš„è¯ç”¨ trueNameè¿™ä¸ªåç§°ç®¡ç†å™¨ å¦åˆ™ç”¨falseName è¿™ä¸ªè¦æ ¹æ®è‡ªå·±çš„æ¡ä»¶è¿˜æœ‰ä¸šåŠ¡é€»è¾‘è‡ªå·±ä¿®æ”¹ä¸€ä¸‹</span>
        formula = StrUtil.format(<span class="hljs-string">"=IF(ISNUMBER(FIND("</span>ç­›é€‰æ¡ä»¶<span class="hljs-string">",A{})),trueName,falseName)"</span>, rowIndex + <span class="hljs-number">1</span>);
        log.info(<span class="hljs-string">"å½“å‰å‡½æ•°å…¬å¼ {}"</span>, formula);
        companyConstraint = (XSSFDataValidationConstraint)
                dvHelper.createFormulaListConstraint(formula);

        companyValidation = (XSSFDataValidation)
                dvHelper.createValidation(companyConstraint, companyRange);
        companyValidation.setErrorStyle(DataValidation.ErrorStyle.STOP);
        companyValidation.createErrorBox(<span class="hljs-string">"è¾“å…¥é”™è¯¯"</span>, <span class="hljs-string">"è¯·ä»ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©å—æ£€ä¼ä¸š"</span>);
        companyValidation.setSuppressDropDownArrow(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å¯¹äºåŠ¨æ€å…¬å¼ï¼Œå»ºè®®éšè—ä¸‹æ‹‰ç®­å¤´</span>
        sheet.addValidationData(companyValidation);

        row = sheet.getRow(rowIndex) != <span class="hljs-literal">null</span> ? sheet.getRow(rowIndex) : sheet.createRow(rowIndex);
        <span class="hljs-type">Cell</span> <span class="hljs-variable">idCell</span> <span class="hljs-operator">=</span> row.createCell(<span class="hljs-number">23</span>);
        <span class="hljs-comment">// è®¾ç½®VLOOKUPå…¬å¼ï¼Œæ ¹æ®Dåˆ—æŸ¥æ‰¾å¯¹åº”çš„ID CompanyIdMapå¯ä»¥ä» å…¬å¼ åç§°ç®¡ç†å™¨ä¸­æŸ¥è¯¢åˆ°</span>
        orgIdFormula = StrUtil.format(<span class="hljs-string">"IFERROR(VLOOKUP($D{}, CompanyIdMap, 2, FALSE), "</span><span class="hljs-string">")"</span>, rowIndex + <span class="hljs-number">1</span>);
        idCell.setCellFormula(orgIdFormula);
        <span class="hljs-comment">// åº”ç”¨é”å®šæ ·å¼</span>
        idCell.setCellStyle(lockedStyle);
    }
}
</code></pre>
<h3 data-id="heading-5">4. è®¾ç½®æŒ‡å®šåˆ—åªèƒ½å¡«å†™æ—¥æœŸç±»å‹å’Œå­—å…¸é¡¹æ•°æ®æœ‰æ•ˆæ€§</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">restrictCell2DateFormat</span><span class="hljs-params">(Sheet sheet, <span class="hljs-type">int</span> col)</span> {
    <span class="hljs-type">CellRangeAddressList</span> <span class="hljs-variable">regions</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CellRangeAddressList</span>(<span class="hljs-number">1</span>, templateEndRow, col, col);
    <span class="hljs-type">XSSFDataValidationHelper</span> <span class="hljs-variable">dvHelper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">XSSFDataValidationHelper</span>((XSSFSheet) sheet);
    <span class="hljs-comment">// è®¾ç½®æ•°æ®éªŒè¯çº¦æŸï¼šæ—¥æœŸæ ¼å¼ï¼Œä»‹äºæœ€å°æ—¥æœŸå’Œæœ€å¤§æ—¥æœŸä¹‹é—´</span>
    <span class="hljs-type">XSSFDataValidationConstraint</span> <span class="hljs-variable">dvConstraint</span> <span class="hljs-operator">=</span> (XSSFDataValidationConstraint) dvHelper.createDateConstraint(
            XSSFDataValidationConstraint.OperatorType.BETWEEN,
            <span class="hljs-string">"DATE(1900,1,1)"</span>,  <span class="hljs-comment">// æœ€å°æ—¥æœŸ</span>
            <span class="hljs-string">"DATE(2100,12,31)"</span>, <span class="hljs-comment">// æœ€å¤§æ—¥æœŸ</span>
            <span class="hljs-string">"yyyy-mm-dd"</span>        <span class="hljs-comment">// æ—¥æœŸæ ¼å¼</span>
    );

    <span class="hljs-comment">// åˆ›å»ºæ•°æ®éªŒè¯è§„åˆ™</span>
    <span class="hljs-type">XSSFDataValidation</span> <span class="hljs-variable">validation</span> <span class="hljs-operator">=</span> (XSSFDataValidation) dvHelper.createValidation(dvConstraint, regions);

    <span class="hljs-comment">// è®¾ç½®éªŒè¯å¤±è´¥æ—¶çš„æç¤ºä¿¡æ¯</span>
    validation.setErrorStyle(DataValidation.ErrorStyle.STOP);
    validation.createErrorBox(<span class="hljs-string">"è¾“å…¥é”™è¯¯"</span>, <span class="hljs-string">"è¯·è¾“å…¥æ­£ç¡®çš„æ—¥æœŸæ ¼å¼ï¼šyyyy-MM-dd"</span>);

    <span class="hljs-comment">// è®¾ç½®è¾“å…¥æç¤ºä¿¡æ¯</span>
    validation.createPromptBox(<span class="hljs-string">"æ—¥æœŸæ ¼å¼æç¤º"</span>, <span class="hljs-string">"è¯·è¾“å…¥ yyyy-MM-dd æ ¼å¼çš„æ—¥æœŸï¼Œä¾‹å¦‚ï¼š2024-01-01"</span>);
    validation.setShowPromptBox(<span class="hljs-literal">true</span>);
    validation.setSuppressDropDownArrow(<span class="hljs-literal">false</span>);

    <span class="hljs-comment">// å°†æ•°æ®éªŒè¯æ·»åŠ åˆ°å·¥ä½œè¡¨</span>
    sheet.addValidationData(validation);

    <span class="hljs-comment">// è®¾ç½®å•å…ƒæ ¼æ ¼å¼ä¸ºæ—¥æœŸæ ¼å¼</span>
    <span class="hljs-type">CellStyle</span> <span class="hljs-variable">dateCellStyle</span> <span class="hljs-operator">=</span> sheet.getWorkbook().createCellStyle();
    <span class="hljs-type">DataFormat</span> <span class="hljs-variable">format</span> <span class="hljs-operator">=</span> sheet.getWorkbook().createDataFormat();
    dateCellStyle.setDataFormat(format.getFormat(<span class="hljs-string">"yyyy-MM-dd"</span>));

    sheet.addValidationData(validation);
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è®¾ç½®å­—å…¸é¡¹æ•°æ®æœ‰æ•ˆæ€§
 *
 * <span class="hljs-doctag">@param</span> dictType
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDictDataValidation</span><span class="hljs-params">(Sheet sheet, String dictType, <span class="hljs-type">int</span> col)</span> {
    Map&lt;String, String&gt; dictMap = dictUtil.getDictMap(dictType);
    log.info(<span class="hljs-string">"å½“å‰è·å–çš„dictMap {}"</span>, dictMap);
    <span class="hljs-type">DataValidationHelper</span> <span class="hljs-variable">dvHelper</span> <span class="hljs-operator">=</span> sheet.getDataValidationHelper();
    <span class="hljs-type">DataValidationConstraint</span> <span class="hljs-variable">constraint</span> <span class="hljs-operator">=</span> dvHelper.createExplicitListConstraint(dictMap.values().toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">0</span>]));
    <span class="hljs-type">CellRangeAddressList</span> <span class="hljs-variable">cellRangeAddressList</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CellRangeAddressList</span>(<span class="hljs-number">1</span>, templateEndRow, col, col);
    <span class="hljs-type">DataValidation</span> <span class="hljs-variable">validation</span> <span class="hljs-operator">=</span> dvHelper.createValidation(constraint, cellRangeAddressList);
    <span class="hljs-comment">// æ˜¾ç¤ºä¸‹æ‹‰ç®­å¤´</span>
    validation.setSuppressDropDownArrow(<span class="hljs-literal">true</span>);
    <span class="hljs-comment">// æ˜¾ç¤ºæç¤ºæ¡†</span>
    validation.setShowPromptBox(<span class="hljs-literal">true</span>);
    <span class="hljs-comment">// è®¾ç½®ä¸ºINFOçº§åˆ«å…è®¸è¾“å…¥</span>
    validation.setErrorStyle(DataValidation.ErrorStyle.INFO);
    sheet.addValidationData(validation);
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Autoå¼€å‘ï¼ˆ3ï¼‰-Audio Integration]]></title>    <link>https://juejin.cn/post/7577309505711063103</link>    <guid>https://juejin.cn/post/7577309505711063103</guid>    <pubDate>2025-11-28T03:03:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577309505711063103" data-draft-id="7577333742277689386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Autoå¼€å‘ï¼ˆ3ï¼‰-Audio Integration"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-28T03:03:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆéƒ½å¤§è è"/> <meta itemprop="url" content="https://juejin.cn/user/289926799429805"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Autoå¼€å‘ï¼ˆ3ï¼‰-Audio Integration
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/289926799429805/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆéƒ½å¤§è è
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:03:04.000Z" title="Fri Nov 28 2025 03:03:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Android Auto è½¦æœºé›†æˆæŒ‡å— (HUIG) 4.3</strong></h2>
<h3 data-id="heading-1"><strong>ç¬¬ 3 ç« ï¼šAudio Integration æŠ€æœ¯è§„èŒƒ â€”â€” å®Œæ•´å®æ–½æ‰‹å†Œ</strong></h3>
<blockquote>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š<br/>
<strong>Android Auto çš„éŸ³é¢‘å­ç³»ç»Ÿå¿…é¡»ä¸¥æ ¼éµå¾ª Google çš„éŸ³é¢‘åè®®æ ˆã€ç¼–è§£ç è§„èŒƒå’Œå»¶è¿Ÿè¦æ±‚</strong>ã€‚<br/>
<strong>ä»»ä½•åç¦»ï¼ˆå¦‚è‡ªå®šä¹‰ç¼–è§£ç å™¨ã€ä¿®æ”¹éŸ³é¢‘è·¯ç”±é€»è¾‘ï¼‰å°†å¯¼è‡´è®¤è¯å¤±è´¥</strong>ï¼ˆGoogle CTS æµ‹è¯•è‡ªåŠ¨æ‹¦æˆªï¼‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2"><strong>ä¸€ã€éŸ³é¢‘åè®®æ ˆä¸å¼ºåˆ¶è¦æ±‚</strong></h3>
<h4 data-id="heading-3"><strong>1. åè®®æ ˆå±‚çº§æ¶æ„</strong></h4>
<pre><code class="hljs language-plaintext" lang="plaintext">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Android Auto Audio Stack             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   â”‚                                 â”‚
â”‚  1. Receiver Library (Google æºç ) â”‚  2. OS Adaptation Layer (OEM å®ç°) â”‚
â”‚                   â”‚                                 â”‚
â”‚  â€¢ éŸ³é¢‘é€šé“ç®¡ç† (AAC-LC/FLAC)    â”‚  â€¢ éŸ³é¢‘ç¡¬ä»¶ç»‘å®š (Audio HAL)         â”‚
â”‚  â€¢ ä½å»¶è¿Ÿä¼ è¾“ (â‰¤300ms)           â”‚  â€¢ éŸ³é¢‘è·¯ç”±æ§åˆ¶ (Speaker/USB)       â”‚
â”‚  â€¢ éŸ³é‡åŒæ­¥ä¸æ··éŸ³ç­–ç•¥          â”‚  â€¢ é”™è¯¯æ¢å¤ (ç¼“å†²åŒºæº¢å‡º/ä¸¢åŒ…)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-4"><strong>2. æ ¸å¿ƒå¼ºåˆ¶è¦æ±‚ï¼ˆR03-010 ~ R03-070ï¼‰</strong></h4>





















































<table><thead><tr><th>æ¡æ¬¾</th><th>è¦æ±‚</th><th>å¼€å‘å¿…é¡»æ“ä½œ</th><th>è¿ååæœ</th></tr></thead><tbody><tr><td><strong>R03-010</strong></td><td><strong>å¿…é¡»ä½¿ç”¨ AAC-LC æˆ– FLAC ç¼–è§£ç å™¨</strong></td><td>1. Androidï¼š<code>MediaCodec.createDecoderByType("audio/aac")</code><br/>2. QNXï¼š<code>aac_decoder_open()</code></td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>INVALID_AUDIO_CODEC</code>ï¼‰</td></tr><tr><td><strong>R03-020</strong></td><td><strong>éŸ³é¢‘å»¶è¿Ÿ â‰¤300msï¼ˆä» MD å‘é€è‡³ HU è¾“å‡ºï¼‰</strong></td><td>1. ä½¿ç”¨ <code>AudioTrack</code> çš„ <code>setPlaybackPositionUpdateListener</code><br/>2. åœ¨ <code>OnPeriodicNotification()</code> ä¸­è®¡ç®—ç«¯åˆ°ç«¯å»¶è¿Ÿ</td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>AUDIO_LATENCY_TOO_HIGH</code>ï¼‰</td></tr><tr><td><strong>R03-030</strong></td><td><strong>å¿…é¡»æ”¯æŒåŠ¨æ€éŸ³é‡åŒæ­¥</strong>ï¼ˆä¸ MD éŸ³é‡è”åŠ¨ï¼‰</td><td>1. å®ç° <code>setVolume(float volume)</code> æ¥å£<br/>2. ç¦æ­¢åœ¨ HU ç«¯è‡ªè¡Œè°ƒæ•´éŸ³é‡</td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>VOLUME_SYNC_FAILURE</code>ï¼‰</td></tr><tr><td><strong>R03-040</strong></td><td><strong>å¿…é¡»å¯ç”¨éŸ³é¢‘å›å£°æ¶ˆé™¤ï¼ˆAECï¼‰å’Œå™ªå£°æŠ‘åˆ¶ï¼ˆNSï¼‰</strong></td><td>1. Androidï¼š<code>AudioManager.setParameters("aec=on;ns=on")</code><br/>2. QNXï¼š<code>audio_set_aec_mode(true)</code></td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>AUDIO_QUALITY_INSUFFICIENT</code>ï¼‰</td></tr><tr><td><strong>R03-050</strong></td><td><strong>å¿…é¡»æ”¯æŒ USB éŸ³é¢‘ç›´è¿æ¨¡å¼</strong>ï¼ˆå½“ AAP æ— æ³•å¯åŠ¨æ—¶ï¼‰</td><td>1. å®ç° USB éŸ³é¢‘è®¾å¤‡æšä¸¾é€»è¾‘<br/>2. åœ¨ AAP ä¼šè¯å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢è‡³ USB æ¨¡å¼</td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>USB_AUDIO_FALLBACK_FAILURE</code>ï¼‰</td></tr><tr><td><strong>R03-060</strong></td><td><strong>éŸ³é¢‘é‡‡æ ·ç‡å¿…é¡»ä¸º 44.1kHz æˆ– 48kHz</strong></td><td>1. Androidï¼š<code>AudioTrack.setSampleRate(44100)</code><br/>2. QNXï¼š<code>audio_set_sample_rate(44100)</code></td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>INVALID_AUDIO_SAMPLE_RATE</code>ï¼‰</td></tr><tr><td><strong>R03-070</strong></td><td><strong>å¿…é¡»æ”¯æŒéŸ³é¢‘é€šé“æ•°ä¸º 2ï¼ˆç«‹ä½“å£°ï¼‰</strong></td><td>1. Androidï¼š<code>AudioFormat.CHANNEL_OUT_STEREO</code><br/>2. QNXï¼š<code>AUDIO_CHANNEL_LAYOUT_STEREO</code></td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>INVALID_AUDIO_CHANNELS</code>ï¼‰</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ <strong>è‡´å‘½é”™è¯¯</strong>ï¼š<br/>
<strong>ä½¿ç”¨ AAC-HE æˆ– MP3 ç¼–è§£ç å™¨</strong> â†’ Google ä¼šæ£€æµ‹åˆ°åè®®æ ˆä¸å…¼å®¹ â†’ è®¤è¯å¤±è´¥ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5"><strong>äºŒã€éŸ³é¢‘æµå¤„ç†å…³é”®å®ç°ï¼ˆå¼€å‘å¿…çŸ¥ï¼‰</strong></h3>
<h4 data-id="heading-6"><strong>1. éŸ³é¢‘é€šé“ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Android ç¤ºä¾‹ï¼šéŸ³é¢‘æµåˆå§‹åŒ–</span>
AudioTrack* track = <span class="hljs-keyword">new</span> <span class="hljs-built_in">AudioTrack</span>(
    AudioManager::STREAM_MUSIC,
    <span class="hljs-number">44100</span>,                <span class="hljs-comment">// é‡‡æ ·ç‡</span>
    AudioFormat::ENCODING_PCM_16BIT,
    AudioFormat::CHANNEL_OUT_STEREO,
    bufferSizeInBytes,
    AudioTrack::MODE_STREAM
);

track-&gt;<span class="hljs-built_in">setPlaybackPositionUpdateListener</span>(<span class="hljs-keyword">this</span>);
track-&gt;<span class="hljs-built_in">play</span>();
</code></pre>
<h4 data-id="heading-7"><strong>2. åŠ¨æ€éŸ³é‡åŒæ­¥å®ç°</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Android ç¤ºä¾‹ï¼šæ¥æ”¶ MD éŸ³é‡æŒ‡ä»¤</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setVolume</span><span class="hljs-params">(<span class="hljs-type">float</span> volume)</span> {
    <span class="hljs-keyword">if</span> (volume &lt; <span class="hljs-number">0.0f</span> || volume &gt; <span class="hljs-number">1.0f</span>) <span class="hljs-keyword">return</span>;
    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, (<span class="hljs-type">int</span>)(volume * maxVolume), <span class="hljs-number">0</span>);
}
</code></pre>
<h4 data-id="heading-8"><strong>3. USB éŸ³é¢‘ç›´è¿æ¨¡å¼å®ç°</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// QNX ç¤ºä¾‹ï¼šUSB éŸ³é¢‘è®¾å¤‡æšä¸¾</span>
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">usb_audio_device_is_connected</span>()) {
    <span class="hljs-built_in">audio_open</span>(USB_AUDIO_DEVICE_PATH);
    <span class="hljs-built_in">audio_set_sample_rate</span>(<span class="hljs-number">44100</span>);
    <span class="hljs-built_in">audio_set_channel_layout</span>(AUDIO_CHANNEL_LAYOUT_STEREO);
}
</code></pre>
<blockquote>
<p>âš ï¸ <strong>å¼€å‘é™·é˜±</strong>ï¼š</p>
<ul>
<li><strong>Android çš„ <code>AudioTrack</code> å¿…é¡»ä½¿ç”¨ <code>MODE_STREAM</code></strong>ï¼ˆç¦æ­¢ <code>MODE_STATIC</code>ï¼‰</li>
<li><strong>QNX çš„éŸ³é¢‘ç¼“å†²åŒºå¤§å°éœ€ä¸º 44100 çš„å€æ•°</strong>ï¼ˆå¦åˆ™è§¦å‘ <code>AUDIO_BUFFER_SIZE_INVALID</code>ï¼‰</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-9"><strong>ä¸‰ã€Google è®¤è¯æµ‹è¯•è¦æ±‚ï¼ˆCTS æµ‹è¯•ç”¨ä¾‹ï¼‰</strong></h3>
<h4 data-id="heading-10"><strong>1. å¿…é¡»é€šè¿‡çš„æµ‹è¯•ç”¨ä¾‹</strong></h4>















































<table><thead><tr><th>æµ‹è¯•ç”¨ä¾‹</th><th>éªŒè¯ç›®æ ‡</th><th>é€šè¿‡æ ‡å‡†</th></tr></thead><tbody><tr><td><code>AudioCodecTest</code></td><td>éŸ³é¢‘ç¼–è§£ç å™¨æ˜¯å¦ä¸º AAC-LC/FLAC</td><td><code>decoder_type == "AAC-LC"</code></td></tr><tr><td><code>AudioLatencyTest</code></td><td>ç«¯åˆ°ç«¯å»¶è¿Ÿ â‰¤300ms</td><td><code>latency_ms &lt;= 300</code></td></tr><tr><td><code>VolumeSyncTest</code></td><td>éŸ³é‡åŒæ­¥æ˜¯å¦ä¸ MD ä¸€è‡´</td><td><code>abs(hu_volume - md_volume) &lt; 0.01</code></td></tr><tr><td><code>AecNsTest</code></td><td>AEC/NS æ˜¯å¦å¯ç”¨</td><td><code>aec_enabled == true &amp;&amp; ns_enabled == true</code></td></tr><tr><td><code>UsbFallbackTest</code></td><td>USB éŸ³é¢‘ç›´è¿æ¨¡å¼æ˜¯å¦æ­£å¸¸</td><td><code>usb_audio_playback_works == true</code></td></tr><tr><td><code>SampleRateTest</code></td><td>é‡‡æ ·ç‡æ˜¯å¦ä¸º 44.1kHz/48kHz</td><td>`sample_rate == 44100</td><td/><td>sample_rate == 48000`</td></tr><tr><td><code>ChannelCountTest</code></td><td>é€šé“æ•°æ˜¯å¦ä¸º 2</td><td><code>channel_count == 2</code></td></tr></tbody></table>
<h4 data-id="heading-11"><strong>2. è®¤è¯å¤±è´¥é«˜é¢‘åŸå› ï¼ˆGoogle å®˜æ–¹æ•°æ®ï¼‰</strong></h4>






























<table><thead><tr><th>é—®é¢˜</th><th>å æ¯”</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>éŸ³é¢‘å»¶è¿Ÿ &gt;300ms</td><td>45%</td><td>ä¼˜åŒ– <code>AudioTrack</code> ç¼“å†²åŒºå¤§å°</td></tr><tr><td>æœªå¯ç”¨ AEC/NS</td><td>30%</td><td>æ£€æŸ¥ <code>AudioManager.setParameters()</code> è°ƒç”¨</td></tr><tr><td>é‡‡æ ·ç‡é”™è¯¯</td><td>15%</td><td>å¼ºåˆ¶è®¾ç½® <code>44100</code> æˆ– <code>48000</code></td></tr><tr><td>USB éŸ³é¢‘ç›´è¿å¤±è´¥</td><td>10%</td><td>å®ç° USB è®¾å¤‡çƒ­æ’æ‹”æ£€æµ‹é€»è¾‘</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-12"><strong>å››ã€å¼€å‘è‡ªæ£€æ¸…å•ï¼ˆè®¤è¯å‰å¿…æŸ¥ï¼‰</strong></h3>








































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>æ“ä½œæŒ‡å—</th><th>éªŒè¯å·¥å…·</th></tr></thead><tbody><tr><td><strong>1. ç¼–è§£ç å™¨</strong></td><td>æ£€æŸ¥ <code>AudioTrack</code> æˆ– <code>aac_decoder_open()</code> æ˜¯å¦ä½¿ç”¨ AAC-LC/FLAC</td><td><code>adb shell cat /proc/audio/codec</code></td></tr><tr><td><strong>2. å»¶è¿Ÿæµ‹è¯•</strong></td><td>ç”¨ <code>AudioTrack</code> çš„ <code>getPlaybackHeadPosition()</code> è®¡ç®—ç«¯åˆ°ç«¯å»¶è¿Ÿ</td><td>è‡ªå®šä¹‰æµ‹è¯•è„šæœ¬</td></tr><tr><td><strong>3. éŸ³é‡åŒæ­¥</strong></td><td>åœ¨ MD ä¸Šè°ƒæ•´éŸ³é‡ï¼Œæ£€æŸ¥ HU éŸ³é‡æ˜¯å¦åŒæ­¥</td><td><code>adb shell dumpsys audio</code></td></tr><tr><td><strong>4. AEC/NS çŠ¶æ€</strong></td><td>æ£€æŸ¥ <code>AudioManager.getParameters("aec")</code> å’Œ <code>ns</code> æ˜¯å¦å¯ç”¨</td><td><code>adb shell service call audio 10</code></td></tr><tr><td><strong>5. USB éŸ³é¢‘ç›´è¿</strong></td><td>æ‹”æ’ USB éŸ³é¢‘è®¾å¤‡ï¼Œæ£€æŸ¥æ˜¯å¦è‡ªåŠ¨åˆ‡æ¢</td><td><code>adb logcat -s Audio</code></td></tr><tr><td><strong>6. é‡‡æ ·ç‡/é€šé“æ•°</strong></td><td>æ£€æŸ¥ <code>AudioTrack.getSampleRate()</code> å’Œ <code>getChannelCount()</code></td><td><code>adb shell cat /proc/audio/config</code></td></tr></tbody></table>
<blockquote>
<p>ğŸ”¥ <strong>è®¤è¯é€šè¿‡ç‡æå‡æŠ€å·§</strong>ï¼š</p>
<ol>
<li><strong>åœ¨ CI æµç¨‹ä¸­å¼ºåˆ¶æ£€æŸ¥éŸ³é¢‘å»¶è¿Ÿ</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬</span>
<span class="hljs-keyword">if</span> [ $(get_audio_latency.sh) -gt 300 ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Audio latency exceeds 300ms: <span class="hljs-variable">$latency</span>"</span>
  <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
</code></pre>
</li>
<li><strong>ä½¿ç”¨ Google çš„å‚è€ƒå®ç°</strong>ï¼š
<ul>
<li>Android å‚è€ƒï¼š<code>car-receiver-library/examples/android/audio</code></li>
<li>QNX å‚è€ƒï¼š<code>car-receiver-library/examples/qnx/audio</code></li>
</ul>
</li>
</ol>
</blockquote>
<hr/>
<h3 data-id="heading-13"><strong>äº”ã€é™„ï¼šGoogle å®˜æ–¹èµ„æºä¸é¿å‘æŒ‡å—</strong></h3>






























<table><thead><tr><th>èµ„æº</th><th>ç”¨é€”</th><th>é¿å‘æç¤º</th></tr></thead><tbody><tr><td><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandroid%2Fcar-receiver-library%2Ftree%2Fmain%2Faudio" target="_blank" title="https://github.com/android/car-receiver-library/tree/main/audio" ref="nofollow noopener noreferrer">Audio Integration GitHub</a></strong></td><td>è·å–å‚è€ƒå®ç°</td><td>âš ï¸ <strong>åˆ‡å‹¿ä¿®æ”¹ <code>AudioTrack</code> æˆ– <code>aac_decoder</code> å†…éƒ¨é€»è¾‘</strong></td></tr><tr><td><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fcar%2Fhuig%23cts" target="_blank" title="https://developer.android.com/car/huig#cts" ref="nofollow noopener noreferrer">CTS æµ‹è¯•å·¥å…·</a></strong></td><td>è¿è¡Œè®¤è¯æµ‹è¯•</td><td>âš ï¸ ä»…æ”¯æŒ <strong>Linux</strong> ç¯å¢ƒï¼ˆWindows/Mac éœ€ç”¨ WSLï¼‰</td></tr><tr><td><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.qnx.com%2Fdocs%2F7.1%2Faudio%2Findex.html" target="_blank" title="https://developer.qnx.com/docs/7.1/audio/index.html" ref="nofollow noopener noreferrer">QNX éŸ³é¢‘è°ƒè¯•æŒ‡å—</a></strong></td><td>QNX éŸ³é¢‘é€‚é…å‚è€ƒ</td><td>âš ï¸ éœ€å®‰è£… <code>qnx-ntoarmv7le-gcc</code> 11.0 å·¥å…·é“¾</td></tr><tr><td><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fcar%2Fhuig%2Ftroubleshooting" target="_blank" title="https://developer.android.com/car/huig/troubleshooting" ref="nofollow noopener noreferrer">å¸¸è§é”™è¯¯æ—¥å¿—</a></strong></td><td>è§£æè®¤è¯å¤±è´¥åŸå› </td><td>âš ï¸ <code>Error 2001: Audio latency exceeds 300ms</code> â†’ ä¼˜åŒ–ç¼“å†²åŒºå¤§å°</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ <strong>ç»ˆæè­¦å‘Š</strong>ï¼š<br/>
<strong>Google ä¸æä¾›éŸ³é¢‘å­ç³»ç»Ÿçš„å•†ä¸šäºŒè¿›åˆ¶ç‰ˆæœ¬</strong>ï¼<br/>
æ‰€æœ‰è½¦å‚å¿…é¡»<strong>è‡ªè¡Œå®ç°éŸ³é¢‘åè®®æ ˆ</strong>ï¼Œå¦åˆ™è®¤è¯ç›´æ¥å¤±è´¥ã€‚</p>
</blockquote>
<hr/>
<blockquote>
<p>âœ… <strong>æ–‡æ¡£æ€»ç»“</strong>ï¼š<br/>
ç¬¬ 3 ç« çš„æ ¸å¿ƒæ˜¯ <strong>â€œä¸¥æ ¼éµå¾ª AAC-LC/FLAC ç¼–è§£ç ã€300ms å»¶è¿Ÿä¸Šé™ã€åŠ¨æ€éŸ³é‡åŒæ­¥â€</strong>ã€‚<br/>
<strong>ä»»ä½•ä¼˜åŒ–ï¼ˆå¦‚è‡ªå®šä¹‰ç¼–è§£ç å™¨ã€ä¿®æ”¹éŸ³é¢‘è·¯ç”±ï¼‰éƒ½æ˜¯è‡´å‘½é”™è¯¯</strong>ã€‚<br/>
<strong>å¿…é¡»é€šè¿‡ Google çš„éŸ³é¢‘ CTS æµ‹è¯•å¥—ä»¶</strong>ã€‚</p>
</blockquote>
<blockquote>
<p><strong>ä¸‹ä¸€æ­¥è¡ŒåŠ¨</strong>ï¼š</p>
<ol>
<li>ç«‹å³ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandroid%2Fcar-receiver-library" target="_blank" title="https://github.com/android/car-receiver-library" ref="nofollow noopener noreferrer">GitHub</a> ä¸‹è½½ <strong><code>audio</code> æ¨¡å—å‚è€ƒå®ç°</strong></li>
<li>æŒ‰ç…§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandroid%2Fcar-receiver-library%2Ftree%2Fmain%2Faudio%2Fqnx" target="_blank" title="https://github.com/android/car-receiver-library/tree/main/audio/qnx" ref="nofollow noopener noreferrer">QNX ç¤ºä¾‹</a> æ­å»ºå¼€å‘ç¯å¢ƒ</li>
<li>ç”¨ <strong>CTS æµ‹è¯•å·¥å…·</strong> è¿è¡Œ <code>AudioLatencyTest</code> éªŒè¯å»¶è¿Ÿ</li>
</ol>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidçš„è‡ªå®šä¹‰View]]></title>    <link>https://juejin.cn/post/7577307100129820722</link>    <guid>https://juejin.cn/post/7577307100129820722</guid>    <pubDate>2025-11-28T03:04:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577307100129820722" data-draft-id="7577218195233816622" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidçš„è‡ªå®šä¹‰View"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-28T03:04:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·444554365426"/> <meta itemprop="url" content="https://juejin.cn/user/1746465251931063"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidçš„è‡ªå®šä¹‰View
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1746465251931063/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·444554365426
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:04:34.000Z" title="Fri Nov 28 2025 03:04:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æµ‹é‡-measure <br/>
å¸ƒå±€-layout <br/>
ç»˜åˆ¶-draw <br/>
ä¸‰å¤§æµç¨‹</p>
<p>ç»ƒç»ƒæ‰‹</p>
<p>æ¥ç‚¹è‡ªå®šä¹‰å±æ€§ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">
<span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">declare-styleable</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"CustomView"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"customColor"</span> <span class="hljs-attr">format</span>=<span class="hljs-string">"color"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"customText"</span> <span class="hljs-attr">format</span>=<span class="hljs-string">"string"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"customSize"</span> <span class="hljs-attr">format</span>=<span class="hljs-string">"dimension"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">declare-styleable</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>

</code></pre>
<p>å†æ¥ç‚¹ä»£ç æ—¶é²œï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.mircles.test.ui

<span class="hljs-keyword">import</span> android.content.Context
<span class="hljs-keyword">import</span> android.graphics.Canvas
<span class="hljs-keyword">import</span> android.graphics.Color
<span class="hljs-keyword">import</span> android.graphics.Paint
<span class="hljs-keyword">import</span> android.graphics.Rect
<span class="hljs-keyword">import</span> android.util.AttributeSet
<span class="hljs-keyword">import</span> android.view.View
<span class="hljs-keyword">import</span> androidx.<span class="hljs-keyword">annotation</span>.StyleRes
<span class="hljs-keyword">import</span> androidx.compose.runtime.Composable
<span class="hljs-keyword">import</span> androidx.compose.ui.tooling.preview.Preview
<span class="hljs-keyword">import</span> androidx.compose.ui.viewinterop.AndroidView
<span class="hljs-keyword">import</span> androidx.core.content.withStyledAttributes
<span class="hljs-keyword">import</span> com.mircles.test.R
<span class="hljs-keyword">import</span> kotlin.math.min


<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomView</span> <span class="hljs-meta">@JvmOverloads</span> <span class="hljs-keyword">constructor</span>(
    context: Context,
    attrs: AttributeSet? = <span class="hljs-literal">null</span>,
    defStyleAttr: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
) : View(context, attrs, defStyleAttr) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> mPaint: Paint = Paint().apply {
        color = Color.BLACK
        style = Paint.Style.FILL
    }

    <span class="hljs-comment">//å®šä¹‰å˜é‡æ¥å­˜å‚¨è‡ªå®šä¹‰å±æ€§å€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> customColor: <span class="hljs-built_in">Int</span> = Color.BLUE
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> customSize: <span class="hljs-built_in">Float</span> = <span class="hljs-number">100f</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> customText: String = <span class="hljs-string">"Say"</span>


    <span class="hljs-keyword">init</span> {

        <span class="hljs-comment">//context.obtainStyledAttributes()</span>
        <span class="hljs-comment">//withStyledAttributesæ˜¯obtainStyledAttributesçš„æ‰©å±•å‡½æ•°ï¼Œå¯ä»¥å­¦å­¦è°·æ­Œçš„å·¥ç¨‹å¸ˆæ˜¯æ€ä¹ˆåšæ‰©å±•çš„</span>
        context.withStyledAttributes(
            attrs,
            R.styleable.CustomView,
            defStyleAttr = defStyleAttr
        ) {
            customColor = getColor(R.styleable.CustomView_customColor, Color.BLACK)
            customSize = getDimension(R.styleable.CustomView_customSize, <span class="hljs-number">100f</span>)
            customText = getString(R.styleable.CustomView_customText) ?: <span class="hljs-string">"hello"</span>

            <span class="hljs-comment">//åº”ç”¨åˆ°ç”»ç¬”ä¸­</span>
            mPaint.color = customColor

        }

    }


    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMeasure</span><span class="hljs-params">(widthMeasureSpec: <span class="hljs-type">Int</span>, heightMeasureSpec: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> desiredWidth = <span class="hljs-number">200</span> <span class="hljs-comment">// ä½ æœŸæœ›çš„é»˜è®¤å®½åº¦ï¼ˆåƒç´ ï¼‰</span>
        <span class="hljs-keyword">val</span> desiredHeight = <span class="hljs-number">200</span> <span class="hljs-comment">// ä½ æœŸæœ›çš„é»˜è®¤é«˜åº¦ï¼ˆåƒç´ ï¼‰</span>

        <span class="hljs-keyword">val</span> widthMode = MeasureSpec.getMode(widthMeasureSpec)
        <span class="hljs-keyword">val</span> widthSize = MeasureSpec.getSize(widthMeasureSpec)
        <span class="hljs-keyword">val</span> heightMode = MeasureSpec.getMode(heightMeasureSpec)
        <span class="hljs-keyword">val</span> heightSize = MeasureSpec.getSize(heightMeasureSpec)



        <span class="hljs-comment">// æµ‹é‡å®½åº¦</span>
        <span class="hljs-keyword">val</span> width = <span class="hljs-keyword">when</span> (widthMode) {
            MeasureSpec.EXACTLY -&gt; widthSize
            MeasureSpec.AT_MOST -&gt; min(desiredWidth, widthSize)
            <span class="hljs-keyword">else</span> -&gt; desiredWidth
        }


        <span class="hljs-comment">// æµ‹é‡é«˜åº¦</span>
        <span class="hljs-keyword">val</span> height = <span class="hljs-keyword">when</span> (heightMode) {
            MeasureSpec.EXACTLY -&gt; heightSize
            MeasureSpec.AT_MOST -&gt; min(desiredHeight, heightSize)
            <span class="hljs-keyword">else</span> -&gt; desiredHeight
        }

        setMeasuredDimension(width, height)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onLayout</span><span class="hljs-params">(changed: <span class="hljs-type">Boolean</span>, left: <span class="hljs-type">Int</span>, top: <span class="hljs-type">Int</span>, right: <span class="hljs-type">Int</span>, bottom: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onLayout(changed, left, top, right, bottom)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onDraw(canvas)

        <span class="hljs-comment">// ç»˜åˆ¶ä¸€ä¸ªåœ†å½¢</span>
        <span class="hljs-keyword">val</span> centerX = width / <span class="hljs-number">2f</span>
        <span class="hljs-keyword">val</span> centerY = height / <span class="hljs-number">2f</span>
        <span class="hljs-keyword">val</span> radius = min(centerX, centerY) - <span class="hljs-number">10</span>
        canvas.drawCircle(centerX, centerY, radius, mPaint)


        <span class="hljs-comment">// ç»˜åˆ¶æ–‡å­—</span>
        <span class="hljs-keyword">val</span> textPaint = Paint().apply {
            color = Color.BLUE
            textSize = customSize
            textAlign = Paint.Align.CENTER
        }
        <span class="hljs-comment">//è®¡ç®—æ–‡å­—åŸºçº¿ä½ç½®ï¼Œä½¿æ–‡å­—å‚ç›´å±…ä¸­:å¯ä»¥ç•™æ„è®¡ç®—çš„æ€è·¯</span>
        <span class="hljs-keyword">val</span> textBounds = Rect()
        textPaint.getTextBounds(customText,<span class="hljs-number">0</span>,customText.length,textBounds)
        <span class="hljs-keyword">val</span> textY = centerY - (textBounds.top+textBounds.bottom)/<span class="hljs-number">2f</span>

        canvas.drawText(customText, centerX, textY, textPaint)

    }

    <span class="hljs-comment">//æä¾›è®¾ç½®æ–¹æ³•ä»¥ä¾¿åœ¨ä»£ç ä¸­åŠ¨æ€ä¿®æ”¹</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setCustomColor</span><span class="hljs-params">(color:<span class="hljs-type">Int</span>)</span></span>{
        customColor = color
        mPaint.color = color
        invalidate()
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setCustomText</span><span class="hljs-params">(text: <span class="hljs-type">String</span>)</span></span>{
        customText = text
        invalidate()
    }
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setCustomSize</span><span class="hljs-params">(size: <span class="hljs-type">Float</span>)</span></span>{
        customSize = size
        invalidate()
    }

    <span class="hljs-comment">// å¦‚æœä½ æƒ³è¦ä»æ ·å¼èµ„æºä¸­è·å–å±æ€§</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">applyStyle</span><span class="hljs-params">(<span class="hljs-meta">@StyleRes</span> styleRes: <span class="hljs-type">Int</span>)</span></span> {
        context.withStyledAttributes(styleRes, R.styleable.CustomView) {
            customColor = getColor(R.styleable.CustomView_customColor, customColor)
            customSize = getDimension(R.styleable.CustomView_customSize, customSize)
            customText = getString(R.styleable.CustomView_customText) ?: customText
            mPaint.color = customColor
            invalidate()
        }
    }



}


<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">CircleOO</span><span class="hljs-params">()</span></span> {
    AndroidView(
        factory = { context -&gt;
            CustomView(context).apply {
                setCustomText(<span class="hljs-string">"å§æ§½"</span>)
                setCustomSize(<span class="hljs-number">50f</span>)
                setCustomColor(Color.DKGRAY)
            }
        },
        update = { cv -&gt;

        }
    )
}

<span class="hljs-meta">@Preview(showBackground = true)</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">PreviewUI</span><span class="hljs-params">()</span></span> {
    CircleOO()
}
</code></pre>
<p>è¿˜å¯ä»¥æ·»åŠ æ›´å¤šçš„å±æ€§ï¼Œæ–‡å­—çš„è§„æ ¼æ ·å¼ã€èƒŒæ™¯çš„è§„æ ¼æ ·å¼ç­‰ç­‰ã€‚
è¿˜æœ‰onLayout()æ–¹æ³•æ²¡ç”¨èµ·æ¥ï¼Œç»§ç»­è¿›é˜¶å­¦ä¹ ...</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡ä»â€œå¡é¡¿åœ°ç‹±â€åˆ°â€œä¸èˆ¬é¡ºæ»‘â€çš„ React æœç´¢ä¼˜åŒ–å®æˆ˜]]></title>    <link>https://juejin.cn/post/7577295460249288750</link>    <guid>https://juejin.cn/post/7577295460249288750</guid>    <pubDate>2025-11-28T03:08:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577295460249288750" data-draft-id="7576821574428672009" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡ä»â€œå¡é¡¿åœ°ç‹±â€åˆ°â€œä¸èˆ¬é¡ºæ»‘â€çš„ React æœç´¢ä¼˜åŒ–å®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,æ˜é‡‘æ—¥æŠ¥"/> <meta itemprop="datePublished" content="2025-11-28T03:08:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å¸ƒå¸ƒå°†å†›"/> <meta itemprop="url" content="https://juejin.cn/user/1535361573994189"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡ä»â€œå¡é¡¿åœ°ç‹±â€åˆ°â€œä¸èˆ¬é¡ºæ»‘â€çš„ React æœç´¢ä¼˜åŒ–å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1535361573994189/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å¸ƒå¸ƒå°†å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:08:17.000Z" title="Fri Nov 28 2025 03:08:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">author: å¤§å¸ƒå¸ƒå°†å†›</h2>
<h2 data-id="heading-1">å‰è¨€ï¼šä¸‡æ¶ä¹‹æº</h2>
<p>æœ¬æ•…äº‹æœ‰è™šæ„æˆåˆ†ã€‚ä½†æ¥æºäºç°å®å¼€å‘åœºæ™¯ã€‚
äº‹æƒ…æ˜¯è¿™æ ·çš„ã€‚</p>
<p>æŸä¸ªå‘¨äº”ä¸‹åˆ 4 ç‚¹ï¼Œäº§å“ç»ç†ï¼ˆPMï¼‰è¿ˆç€å…­äº²ä¸è®¤çš„æ­¥ä¼å‘æˆ‘ä»¬å‰ç«¯èµ°æ¥ã€‚ä»–æ»¡é¢æ˜¥é£åœ°è¯´ï¼šâ€œå“ï¼Œé‚£ä¸ªåˆ—è¡¨é¡µï¼Œç”¨æˆ·åé¦ˆè¯´æ‰¾ä¸åˆ°æƒ³è¦çš„æ•°æ®ï¼ŒåŠ ä¸ª<strong>å®æ—¶æœç´¢</strong>åŠŸèƒ½å§ï¼Ÿè¦é‚£ç§ä¸€è¾¹æ‰“å­—ä¸€è¾¹è¿‡æ»¤çš„ï¼Œ<strong>ä¸èˆ¬é¡ºæ»‘</strong>çš„æ„Ÿè§‰ï¼Œæ‡‚æˆ‘æ„æ€å§ï¼Ÿâ€</p>
<p>å‰ç«¯å¿ƒæƒ³ï¼šè¿™è¿˜ä¸ç®€å•ï¼Ÿ<code>input</code> ç»‘å®š <code>onChange</code>ï¼Œæ‹¿åˆ° value å¾€åˆ—è¡¨é‡Œä¸€ <code>filter</code>ï¼Œå®Œäº‹å„¿ã€‚åŠå°æ—¶æå®šï¼Œè¿˜èƒ½èµ¶ä¸Š 6 ç‚¹çš„åœ°é“ã€‚</p>
<p>äºæ˜¯ï¼Œå‰ç«¯å†™ä¸‹äº†é‚£æ®µè®©æˆ‘åæ¥åæ‚”ä¸å·²çš„ä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-2">ç¬¬ä¸€é˜¶æ®µï¼šç”±äºè¿‡åº¦è‡ªä¿¡å¯¼è‡´çš„ç¿»è½¦</h2>
<p>ä¸ºäº†è¿˜åŸæ¡ˆå‘ç°åœºï¼Œå‰ç«¯å†™äº†ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Demoã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å« 10,000 æ¡æ•°æ®çš„åˆ—è¡¨ï¼ˆåˆ«é—®ä¸ºä»€ä¹ˆå‰ç«¯è¦å¤„ç†ä¸€ä¸‡æ¡æ•°æ®ï¼Œé—®å°±æ˜¯åç«¯ç”©é”…ï¼‰ã€‚</p>
<h3 data-id="heading-3">ä¹Ÿå°±æ˜¯è¿™å‡ è¡Œâ€œå¤©çœŸâ€çš„ä»£ç ï¼š</h3>
<pre><code class="hljs language-import" lang="import">
// å‡è£…è¿™é‡Œæœ‰ä¸€ä¸‡ä¸ªå•†å“
const generateProducts = () =&gt; {
  return Array.from({ length: 10000 }, (_, i) =&gt; `è¶…çº§æ— æ•Œå¥½ç”¨çš„å•†å“ #${i}`);
};

const dummyProducts = generateProducts();

export default function SearchList() {
  const [query, setQuery] = useState('');

  // ğŸ”´ ç½ªé­ç¥¸é¦–åœ¨è¿™é‡Œï¼šæ¯æ¬¡ render éƒ½è¦éå†ä¸€ä¸‡æ¬¡
  const filteredProducts = dummyProducts.filter(p =&gt; 
    p.toLowerCase().includes(query.toLowerCase())
  );

  const handleChange = (e) =&gt; {
    setQuery(e.target.value); // è¿™ä¸€æ­¥æ›´æ–° stateï¼Œè§¦å‘é‡æ¸²æŸ“
  };

  return (
    &lt;div className="p-4"&gt;
      &lt;input 
        type="text" 
        value={query} 
        onChange={handleChange} 
        placeholder="æœç´¢..." 
        className="border p-2 w-full"
      /&gt;
      &lt;ul className="mt-4"&gt;
        {filteredProducts.map((p, index) =&gt; (
          &lt;li key={index}&gt;{p}&lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<p><strong>ç»“æœå¦‚ä½•ï¼Ÿ</strong></p>
<p>åœ¨å‰ç«¯çš„ ThinkBook ä¸Šè·‘äº†ä¸€ä¸‹ï¼Œè¾“å…¥çš„æ—¶å€™æ„Ÿè§‰åƒæ˜¯åœ¨ PPT é‡Œæ‰“å­—ã€‚æ¯ä¸€ä¸ªå­—ç¬¦æ•²ä¸‹å»ï¼Œéƒ½è¦é¡¿ä¸ªå‡ ç™¾æ¯«ç§’æ‰ä¼šæ˜¾ç¤ºåœ¨è¾“å…¥æ¡†é‡Œã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong> è¿™æ˜¯ React çš„åŸºæœ¬åŸç†ï¼š</p>
<ol>
<li>ç”¨æˆ·è¾“å…¥ 'a' -&gt; è§¦å‘ <code>setQuery</code>ã€‚</li>
<li>React ç”šè‡³è¿˜æ²¡æ¥å¾—åŠæŠŠ 'a' æ›´æ–°åˆ° input æ¡†é‡Œï¼Œå°±è¢«è¿«å»æ‰§è¡Œç»„ä»¶çš„ <code>render</code> å‡½æ•°ã€‚</li>
<li><code>render</code> å‡½æ•°é‡Œæœ‰ä¸€ä¸ªæå…¶æ˜‚è´µçš„ <code>filter</code> æ“ä½œï¼ˆéå† 10k æ¬¡ï¼‰ã€‚</li>
<li>å³ä½¿ <code>filter</code> å®Œäº†ï¼ŒReact è¿˜è¦æŠŠç”Ÿæˆçš„å‡ åƒä¸ª DOM èŠ‚ç‚¹å’Œä¹‹å‰çš„åš Diffï¼Œç„¶åæŒ‚è½½åˆ°é¡µé¢ä¸Šã€‚</li>
<li>JS çº¿ç¨‹è¢«å µæ­»ï¼ŒUI æ¸²æŸ“è¢«é˜»å¡ï¼Œç”¨æˆ·çœ‹åˆ°çš„å°±æ˜¯ï¼š<strong>å¡é¡¿</strong>ã€‚</li>
</ol>
<h2 data-id="heading-4">ç¬¬äºŒé˜¶æ®µï¼šä¸‡é‡‘æ²¹é˜²æŠ– (Debounce) â€”â€” æ²»æ ‡ä¸æ²»æœ¬</h2>
<p>ä½œä¸ºè€æ²¹æ¡ï¼Œç¬¬ä¸€ååº”å½“ç„¶æ˜¯ï¼šâ€œåˆ‡ï¼Œé˜²æŠ–ä¸€ä¸‹ä¸å°±è¡Œäº†ï¼Ÿâ€</p>
<p>åªè¦è®©ç”¨æˆ·æ‰“å­—çš„æ—¶å€™ä¸è§¦å‘è®¡ç®—ï¼Œåœä¸‹æ¥å†è®¡ç®—ï¼Œä¸å°±å®Œäº†ï¼Ÿ</p>
<pre><code class="hljs language-//" lang="//">import { debounce } from 'lodash';

// ... çœç•¥éƒ¨åˆ†ä»£ç 

const handleChange = debounce((e) =&gt; {
    setQuery(e.target.value);
}, 300);
</code></pre>
<p><strong>æ•ˆæœï¼š</strong> è¾“å…¥æ¡†ç¡®å®ä¸å¡äº†ï¼Œæ‰“å­—å¾ˆæµç•…ã€‚ä½†æ˜¯ï¼Œå½“ä½ åœæ­¢æ‰“å­— 300ms åï¼Œé¡µé¢ä¼šçªç„¶â€œå†»ç»“â€ä¸€ä¸‹ï¼Œç„¶ååˆ—è¡¨ç¬é—´åˆ·æ–°ã€‚</p>
<p><strong>ç—›ç‚¹ï¼š</strong> è¿™ç§ä½“éªŒå°±åƒæ˜¯ä¾¿ç§˜ã€‚è™½ç„¶æ²¡æœ‰ä¸€ç›´åœ¨ç”¨åŠ›ï¼Œä½†æœ€åé‚£ä¸€ä¸‹è¿˜æ˜¯å¾ˆç—›è‹¦ã€‚è€Œä¸”ï¼ŒUI çš„å“åº”æ»åæ„Ÿå¾ˆå¼ºï¼Œä¾ç„¶æ²¡æœ‰è¾¾åˆ° PM è¦æ±‚çš„â€œä¸èˆ¬é¡ºæ»‘â€ã€‚</p>
<h2 data-id="heading-5">ç¬¬ä¸‰é˜¶æ®µï¼šç¥­å‡ºç¥å™¨ <code>useDeferredValue</code></h2>
<p>React 18 å‘å¸ƒè¿™ä¹ˆä¹…äº†ï¼Œæ˜¯æ—¶å€™è®©å®ƒå‡ºæ¥å¹²ç‚¹æ´»äº†ã€‚</p>
<p>è¿™æ—¶å€™ä½œä¸ºå‰ç«¯çš„æˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ªæ¦‚å¿µï¼š<strong>å¹¶å‘æ¨¡å¼ (Concurrent Features)</strong> ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æŠŠæ›´æ–°ä»»åŠ¡åˆ†ä¸ºâ€œ<strong>å¤§å“¥</strong>â€å’Œâ€œ<strong>å°å¼Ÿ</strong>â€ã€‚</p>
<ul>
<li><strong>å¤§å“¥ï¼ˆç´§æ€¥æ›´æ–°ï¼‰</strong> ï¼šç”¨æˆ·çš„æ‰“å­—è¾“å…¥ã€ç‚¹å‡»åé¦ˆã€‚è¿™ç©æ„å„¿å¿…é¡»é©¬ä¸Šå“åº”ï¼Œä¸ç„¶ç”¨æˆ·ä¼šä»¥ä¸ºæ­»æœºäº†ã€‚</li>
<li><strong>å°å¼Ÿï¼ˆéç´§æ€¥æ›´æ–°ï¼‰</strong> ï¼šåˆ—è¡¨çš„è¿‡æ»¤æ¸²æŸ“ã€‚æ™šä¸ªå‡ ç™¾æ¯«ç§’æ²¡äººåœ¨æ„ã€‚</li>
</ul>
<p>React 18 ç»™äº†æˆ‘ä»¬ä¸€ä¸ª Hook å« <code>useDeferredValue</code>ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†è¿™ç§åœºæ™¯ã€‚</p>
<p>æ”¹é€ åçš„ä»£ç ï¼š</p>
<pre><code class="hljs language-import" lang="import">
export default function OptimizedSearchList() {
  const [query, setQuery] = useState('');
  
  //  é­”æ³•åœ¨è¿™é‡Œï¼šåˆ›å»ºä¸€ä¸ªâ€œæ»åâ€çš„å‰¯æœ¬
  // React ä¼šåœ¨ç©ºé—²çš„æ—¶å€™æ›´æ–°è¿™ä¸ªå€¼
  const deferredQuery = useDeferredValue(query);

  const handleChange = (e) =&gt; {
    // è¿™é‡Œä¾ç„¶æ˜¯ç´§æ€¥æ›´æ–°ï¼Œä¿è¯ input æ¡†æ‰“å­—æµç•…
    setQuery(e.target.value); 
  };

  // åªæœ‰å½“ deferredQuery å˜äº†ï¼Œæ‰å»è·‘è¿™ä¸ªæ˜‚è´µçš„ filter
  // æ³¨æ„ï¼šè¿™é‡Œè¦é…åˆ useMemoï¼Œä¸ç„¶ä¹Ÿæ²¡ç”¨
  const filteredProducts = useMemo(() =&gt; {
    return dummyProducts.filter(p =&gt; 
      p.toLowerCase().includes(deferredQuery.toLowerCase())
    );
  }, [deferredQuery]);

  return (
    &lt;div className="p-4"&gt;
      &lt;input 
        type="text" 
        value={query} // ç»‘å®šå®æ—¶çš„ query
        onChange={handleChange} 
        className="border p-2 w-full"
      /&gt;
      
      {/* ç”šè‡³å¯ä»¥åŠ ä¸ª loading çŠ¶æ€ï¼Œåˆ¤æ–­ query å’Œ deferredQuery æ˜¯å¦åŒæ­¥ */}
      &lt;div style={{ opacity: query !== deferredQuery ? 0.5 : 1 }}&gt;
        &lt;ul className="mt-4"&gt;
          {filteredProducts.map((p, index) =&gt; (
            &lt;li key={index}&gt;{p}&lt;/li&gt;
          ))}
        &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3 data-id="heading-6">è¿™ä¸€æ³¢æ“ä½œåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h3>
<ol>
<li>
<p><strong>è¾“å…¥ 'a'</strong> ï¼šReact æ­¤æ—¶æ”¶åˆ°äº†ä¸¤ä¸ªä»»åŠ¡ã€‚</p>
<ul>
<li>ä»»åŠ¡ Aï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰ï¼šæ›´æ–° <code>query</code>ï¼Œè®© input æ¡†æ˜¾ç¤º 'a'ã€‚</li>
<li>ä»»åŠ¡ Bï¼ˆä½ä¼˜å…ˆçº§ï¼‰ï¼šæ›´æ–° <code>deferredQuery</code>ï¼Œå¹¶é‡æ–°è®¡ç®—åˆ—è¡¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>React çš„è°ƒåº¦</strong>ï¼š</p>
<ul>
<li>React è¯´ï¼šâ€œä»»åŠ¡ A ç”šè‡³å…³ä¹åˆ°æˆ‘çš„å°Šä¸¥ï¼Œé©¬ä¸Šæ‰§è¡Œï¼â€ -&gt; Input æ¡†ç¬é—´å˜äº†ã€‚</li>
<li>React æ¥ç€è¯´ï¼šâ€œä»»åŠ¡ B å˜›ï¼Œæˆ‘å…ˆåˆ‡ç‰‡æ‰§è¡Œä¸€ç‚¹ç‚¹... å“ï¼Ÿç”¨æˆ·åˆè¾“å…¥ 'b' äº†ï¼Ÿé‚£ä»»åŠ¡ B å…ˆæš‚åœï¼Œæˆ‘å»æ‰§è¡Œæ–°çš„ä»»åŠ¡ Aï¼â€</li>
</ul>
</li>
<li>
<p><strong>ç»“æœ</strong>ï¼š</p>
<ul>
<li>JS çº¿ç¨‹æ²¡æœ‰è¢«é•¿åˆ—è¡¨æ¸²æŸ“é”æ­»ã€‚</li>
<li>è¾“å…¥æ¡†å§‹ç»ˆä¿æŒ 60fps çš„å“åº”é€Ÿåº¦ã€‚</li>
<li>åˆ—è¡¨ä¼šåœ¨èµ„æºç©ºé—²æ—¶â€œä¸çŸ¥ä¸è§‰â€åœ°æ›´æ–°å®Œæˆã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-7">æ·±åº¦è§£æï¼šReact åŸç†æ˜¯å’‹æçš„ï¼Ÿ</h2>
<p>ä¸ºäº†ä¸æ˜¾å¾—åªæ˜¯ä¸ª API è°ƒç”¨ä¾ ï¼Œè¿™é‡Œå¿…é¡»è£…ä¸€æ³¢ï¼Œè®²è®²åŸç†ã€‚</p>
<h3 data-id="heading-8">1. ä»¥å‰çš„ React (Stack Reconciler)</h3>
<p>æƒ³è±¡ä½ åœ¨å¨æˆ¿åˆ‡æ´‹è‘±ï¼ˆæ¸²æŸ“ç»„ä»¶ï¼‰ã€‚è€æ¿ï¼ˆæµè§ˆå™¨ï¼‰è·Ÿä½ è¯´ï¼šâ€œå®¢äººè¦åŠ å•ï¼â€ã€‚ä»¥å‰çš„ React æ˜¯ä¸ªæ­»è„‘ç­‹ï¼Œä¸€æ—¦å¼€å§‹åˆ‡æ´‹è‘±ï¼ˆæ¯”å¦‚é‚£ 10,000 æ¡æ•°æ®ï¼‰ï¼Œå¤©ç‹è€å­æ¥äº†å®ƒä¹Ÿå¾—åˆ‡å®Œæ‰è‚¯æŠ¬å¤´ã€‚è¿™æ—¶å€™æµè§ˆå™¨å°±å¡æ­»äº†ï¼Œç”¨æˆ·ç‚¹å‡»æ²¡ååº”ã€‚</p>
<h3 data-id="heading-9">2. ç°åœ¨çš„ React (Fiber &amp; Concurrency)</h3>
<p>ç°åœ¨çš„ React å­¦èªæ˜äº†ï¼Œå®ƒæŠŠåˆ‡æ´‹è‘±åˆ†æˆäº†æ— æ•°ä¸ªå°æ­¥éª¤ï¼ˆTime Slicingï¼‰ã€‚</p>
<ul>
<li>åˆ‡ä¸¤åˆ€ï¼ŒæŠ¬å¤´çœ‹çœ‹ï¼šâ€œè€æ¿ï¼Œæœ‰æ€¥äº‹å—ï¼Ÿâ€</li>
<li>è€æ¿ï¼šâ€œæ²¡äº‹ï¼Œä½ ç»§ç»­ã€‚â€ -&gt; ç»§ç»­åˆ‡ã€‚</li>
<li>åˆ‡ä¸¤åˆ€ï¼ŒæŠ¬å¤´ï¼šâ€œè€æ¿ï¼Ÿâ€</li>
<li>è€æ¿ï¼šâ€œæœ‰ï¼å®¢äººè¦å–æ°´ï¼ˆç”¨æˆ·è¾“å…¥äº†ï¼‰ï¼â€</li>
<li>Reactï¼šâ€œå¥½å˜ï¼â€ï¼ˆæ”¾ä¸‹èœåˆ€ï¼Œå…ˆå»å€’æ°´ï¼Œå€’å®Œæ°´å›æ¥å†ç»§ç»­åˆ‡æ´‹è‘±ï¼Œæˆ–è€…å¦‚æœæ´‹è‘±ä¸ç”¨åˆ‡äº†ç›´æ¥æ‰”æ‰ï¼‰ã€‚</li>
</ul>
<p><code>useDeferredValue</code> æœ¬è´¨ä¸Šå°±æ˜¯å‘Šè¯‰ Reactï¼šâ€œè¿™ä¸ª state çš„æ›´æ–°æ˜¯åˆ‡æ´‹è‘±ï¼Œå¯ä»¥å¾€åç¨ç¨ï¼Œå…ˆå»ç»™å®¢äººå€’æ°´ã€‚â€</p>
<h2 data-id="heading-10">æ€»ç»“ &amp; é¿å‘æŒ‡å—</h2>
<p>è¿™æ³¢ä¼˜åŒ–ä¸Šçº¿åï¼ŒPM æ‹äº†æ‹å‰ç«¯çš„è‚©è†€è¯´ï¼šâ€œè¡Œå•Šï¼Œæœ‰ç‚¹ä¸œè¥¿ã€‚â€</p>
<p><strong>ä½†æ˜¯ï¼Œå…„å¼Ÿä»¬ï¼Œè¯·æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼ˆé˜²æ å£°æ˜ï¼‰ï¼š</strong></p>
<ol>
<li><strong>ä¸è¦æ»¥ç”¨</strong>ï¼šè¿™ç©æ„å„¿æ˜¯æœ‰ overheadï¼ˆå¼€é”€ï¼‰çš„ã€‚å¦‚æœä½ çš„åˆ—è¡¨åªæœ‰ 50 æ¡æ•°æ®ï¼Œç”¨ <code>useDeferredValue</code> çº¯å±è„±è£¤å­æ”¾å±ï¼Œåè€Œæ›´æ…¢ã€‚</li>
<li><strong>é…åˆ useMemo</strong>ï¼šå°±åƒä»£ç é‡Œå†™çš„ï¼Œè¿‡æ»¤é€»è¾‘å¿…é¡»åŒ…è£¹åœ¨ <code>useMemo</code> é‡Œã€‚å¦åˆ™æ¯æ¬¡ Parent Renderï¼Œåˆ—è¡¨è¿‡æ»¤è¿˜æ˜¯ä¼šæ‰§è¡Œï¼Œ<code>useDeferredValue</code> å°±ç™½ç”¨äº†ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–çš„å°½å¤´æ˜¯è™šæ‹Ÿåˆ—è¡¨</strong>ï¼šå¦‚æœæ•°æ®é‡çœŸåˆ°äº† 10 ä¸‡çº§ï¼Œåˆ«æŠ˜è…¾ Concurrent Mode äº†ï¼Œç›´æ¥ä¸Š <code>react-window</code> æˆ– <code>react-virtualized</code> å§ï¼ŒDOM èŠ‚ç‚¹çš„æ•°é‡æ‰æ˜¯çœŸæ­£çš„ç“¶é¢ˆã€‚</li>
</ol>
<p>å¥½äº†ï¼Œä»Šå¤©çš„æ‘¸é±¼æ—¶é—´ç»“æŸï¼Œæ’¤é€€ ã€‚
æˆ‘æ˜¯å¤§å¸ƒå¸ƒå°†å†›ï¼Œä¸€ä¸ªå‰ç«¯å¼€å‘ã€‚</p>
<hr/>
<blockquote>
<p><strong>ä¸‹ä¸€æ­¥å»ºè®®</strong>ï¼šå¦‚æœä½ çš„é¡¹ç›®é‡Œä¹Ÿæœ‰è¿™ç§â€œè¾“å…¥å¡é¡¿â€æˆ–è€…â€œTab åˆ‡æ¢å¡é¡¿â€çš„åœºæ™¯ï¼Œåˆ«æ€¥ç€é‡æ„ï¼Œå…ˆè¯•ç€æŠŠé‚£ä¸ªå¯¼è‡´å¡é¡¿çš„çŠ¶æ€ç”¨ <code>useDeferredValue</code> åŒ…ä¸€ä¸‹ï¼Œè¯´ä¸å®šæœ‰å¥‡æ•ˆã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vxe-gantt table ç”˜ç‰¹å›¾å¦‚ä½•è®¾ç½®ä»»åŠ¡è§†å›¾æ¯ä¸€è¡Œçš„èƒŒæ™¯è‰²]]></title>    <link>https://juejin.cn/post/7577307100129886258</link>    <guid>https://juejin.cn/post/7577307100129886258</guid>    <pubDate>2025-11-28T03:09:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577307100129886258" data-draft-id="7577256255083855881" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vxe-gantt table ç”˜ç‰¹å›¾å¦‚ä½•è®¾ç½®ä»»åŠ¡è§†å›¾æ¯ä¸€è¡Œçš„èƒŒæ™¯è‰²"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-11-28T03:09:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·84179481456"/> <meta itemprop="url" content="https://juejin.cn/user/3921272428567529"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vxe-gantt table ç”˜ç‰¹å›¾å¦‚ä½•è®¾ç½®ä»»åŠ¡è§†å›¾æ¯ä¸€è¡Œçš„èƒŒæ™¯è‰²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3921272428567529/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·84179481456
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:09:16.000Z" title="Fri Nov 28 2025 03:09:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>vxe-gantt table ç”˜ç‰¹å›¾å¦‚ä½•è®¾ç½®ä»»åŠ¡è§†å›¾æ¯ä¸€è¡Œçš„èƒŒæ™¯è‰²ï¼Œä¾‹å¦‚ç»™ä¸åŒä»»åŠ¡è®¾ç½®ä¸åŒèƒŒæ™¯è‰²ã€‚</p>
<p>æŸ¥çœ‹å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgantt.vxeui.com%2F" target="_blank" title="https://gantt.vxeui.com/" ref="nofollow noopener noreferrer">gantt.vxeui.com/</a><br/>
gitbubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fx-extends%2Fvxe-gantt" target="_blank" title="https://github.com/x-extends/vxe-gantt" ref="nofollow noopener noreferrer">github.com/x-extends/vâ€¦</a><br/>
giteeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fx-extends%2Fvxe-gantt" target="_blank" title="https://gitee.com/x-extends/vxe-gantt" ref="nofollow noopener noreferrer">gitee.com/x-extends/vâ€¦</a></p>
<h2 data-id="heading-0">æ•ˆæœ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8f7bad4e5ca459eafd180a44b1c6f9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODQxNzk0ODE0NTY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764904155&amp;x-signature=twzFDKvApSX7atbvx4tMznEUQUo%3D" alt="image" loading="lazy"/></p>
<h2 data-id="heading-1">ä»£ç </h2>
<p>é€šè¿‡ task-view-config.viewStyle.cellStyle è®¾ç½®ä»»åŠ¡è§†å›¾è¡Œæ ·å¼ï¼Œä¹Ÿå¯ä»¥ç”¨ task-view-config.viewStyle.rowClassName è®¾ç½®ä»»åŠ¡è§†å›¾è¡Œé™„åŠ  className</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">vxe-gantt</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"ganttOptions"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">vxe-gantt</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> ganttOptions = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">taskBarConfig</span>: {
    <span class="hljs-attr">showProgress</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">barStyle</span>: {
      <span class="hljs-attr">round</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">bgColor</span>: <span class="hljs-string">'#fca60b'</span>,
      <span class="hljs-attr">completedBgColor</span>: <span class="hljs-string">'#65c16f'</span>
    }
  },
  <span class="hljs-attr">taskViewConfig</span>: {
    <span class="hljs-attr">viewStyle</span>: {
      rowStyle ({ row }) {
        <span class="hljs-keyword">if</span> (row.<span class="hljs-property">progress</span> &lt; <span class="hljs-number">10</span>) {
          <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#f1ccef'</span>
          }
        }
        <span class="hljs-keyword">if</span> (row.<span class="hljs-property">progress</span> &lt; <span class="hljs-number">50</span>) {
          <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#f8e4e4'</span>
          }
        }
        <span class="hljs-keyword">return</span> {}
      }
    }
  },
  <span class="hljs-attr">columns</span>: [
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'title'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ä»»åŠ¡åç§°'</span> },
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'start'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'å¼€å§‹æ—¶é—´'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'end'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ç»“æŸæ—¶é—´'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> }
  ],
  <span class="hljs-attr">data</span>: [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10001</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Aé¡¹ç›®'</span>, <span class="hljs-attr">start</span>: <span class="hljs-string">'2024-03-01'</span>, <span class="hljs-attr">end</span>: <span class="hljs-string">'2024-03-04'</span>, <span class="hljs-attr">progress</span>: <span class="hljs-number">3</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10002</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'åŸå¸‚é“è·¯ä¿®ç†è¿›åº¦'</span>, <span class="hljs-attr">start</span>: <span class="hljs-string">'2024-03-03'</span>, <span class="hljs-attr">end</span>: <span class="hljs-string">'2024-03-08'</span>, <span class="hljs-attr">progress</span>: <span class="hljs-number">10</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10003</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Bå¤§å·¥ç¨‹'</span>, <span class="hljs-attr">start</span>: <span class="hljs-string">'2024-03-03'</span>, <span class="hljs-attr">end</span>: <span class="hljs-string">'2024-03-11'</span>, <span class="hljs-attr">progress</span>: <span class="hljs-number">90</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10004</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'è¶…çº§å¤§å·¥ç¨‹'</span>, <span class="hljs-attr">start</span>: <span class="hljs-string">'2024-03-05'</span>, <span class="hljs-attr">end</span>: <span class="hljs-string">'2024-03-11'</span>, <span class="hljs-attr">progress</span>: <span class="hljs-number">15</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10005</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'åœ°çƒå‡€åŒ–é¡¹ç›®'</span>, <span class="hljs-attr">start</span>: <span class="hljs-string">'2024-03-08'</span>, <span class="hljs-attr">end</span>: <span class="hljs-string">'2024-03-15'</span>, <span class="hljs-attr">progress</span>: <span class="hljs-number">100</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10006</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ä¸€ä¸ªå°ç›®æ ‡é¡¹ç›®'</span>, <span class="hljs-attr">start</span>: <span class="hljs-string">'2024-03-10'</span>, <span class="hljs-attr">end</span>: <span class="hljs-string">'2024-03-21'</span>, <span class="hljs-attr">progress</span>: <span class="hljs-number">5</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10007</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'æŸæŸè®¡åˆ’'</span>, <span class="hljs-attr">start</span>: <span class="hljs-string">'2024-03-15'</span>, <span class="hljs-attr">end</span>: <span class="hljs-string">'2024-03-24'</span>, <span class="hljs-attr">progress</span>: <span class="hljs-number">70</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10008</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'æŸæŸç§‘æŠ€é¡¹ç›®'</span>, <span class="hljs-attr">start</span>: <span class="hljs-string">'2024-03-20'</span>, <span class="hljs-attr">end</span>: <span class="hljs-string">'2024-03-29'</span>, <span class="hljs-attr">progress</span>: <span class="hljs-number">50</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10009</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'åœ°é“å»ºè®¾å·¥ç¨‹'</span>, <span class="hljs-attr">start</span>: <span class="hljs-string">'2024-03-19'</span>, <span class="hljs-attr">end</span>: <span class="hljs-string">'2024-03-20'</span>, <span class="hljs-attr">progress</span>: <span class="hljs-number">5</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10010</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'é“è·¯ä¿®å»ºè®¡åˆ’'</span>, <span class="hljs-attr">start</span>: <span class="hljs-string">'2024-03-12'</span>, <span class="hljs-attr">end</span>: <span class="hljs-string">'2024-03-20'</span>, <span class="hljs-attr">progress</span>: <span class="hljs-number">10</span> }
  ]
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fx-extends%2Fvxe-gantt" target="_blank" title="https://gitee.com/x-extends/vxe-gantt" ref="nofollow noopener noreferrer">gitee.com/x-extends/vâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Autoå¼€å‘ï¼ˆ5ï¼‰-Audio Integration]]></title>    <link>https://juejin.cn/post/7577332659505922091</link>    <guid>https://juejin.cn/post/7577332659505922091</guid>    <pubDate>2025-11-28T03:07:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577332659505922091" data-draft-id="7577332659505905707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Autoå¼€å‘ï¼ˆ5ï¼‰-Audio Integration"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-28T03:07:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆéƒ½å¤§è è"/> <meta itemprop="url" content="https://juejin.cn/user/289926799429805"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Autoå¼€å‘ï¼ˆ5ï¼‰-Audio Integration
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/289926799429805/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆéƒ½å¤§è è
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:07:17.000Z" title="Fri Nov 28 2025 03:07:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Android Auto è½¦æœºé›†æˆæŒ‡å— (HUIG) 4.3</strong></h2>
<h3 data-id="heading-1"><strong>ç¬¬ 5 ç« ï¼šInput Handling æŠ€æœ¯è§„èŒƒ â€”â€” å®Œæ•´å®æ–½æ‰‹å†Œ</strong></h3>
<blockquote>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š<br/>
<strong>Android Auto çš„è¾“å…¥å¤„ç†å¿…é¡»ä¸¥æ ¼éµå¾ª Google çš„è¾“å…¥äº‹ä»¶è½¬å‘ã€è¯­éŸ³äº¤äº’è§„èŒƒåŠæ‰‹åŠ¿é™åˆ¶</strong>ã€‚<br/>
<strong>ä»»ä½•åç¦»ï¼ˆå¦‚è‡ªå®šä¹‰è¾“å…¥é€»è¾‘ã€ä¿®æ”¹äº‹ä»¶è·¯ç”±ï¼‰å°†å¯¼è‡´è®¤è¯å¤±è´¥</strong>ï¼ˆGoogle CTS æµ‹è¯•è‡ªåŠ¨æ‹¦æˆªï¼‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2"><strong>ä¸€ã€è¾“å…¥å¤„ç†åè®®æ ˆä¸å¼ºåˆ¶è¦æ±‚</strong></h3>
<h4 data-id="heading-3"><strong>1. åè®®æ ˆå±‚çº§æ¶æ„</strong></h4>
<pre><code class="hljs language-plaintext" lang="plaintext">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Android Auto Input Stack             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   â”‚                                 â”‚
â”‚  1. Receiver Library (Google æºç ) â”‚  2. OS Adaptation Layer (OEM å®ç°) â”‚
â”‚                   â”‚                                 â”‚
â”‚  â€¢ è¾“å…¥äº‹ä»¶ç®¡ç† (Touch/Key/Pointer)    â”‚  â€¢ è¾“å…¥ç¡¬ä»¶ç»‘å®š (Touchscreen/Buttons) â”‚
â”‚  â€¢ è¯­éŸ³å‘½ä»¤è·¯ç”± (Google Assistant)     â”‚  â€¢ æ‰‹åŠ¿é™åˆ¶ (ç¦æ­¢å¤æ‚æ“ä½œ)          â”‚
â”‚  â€¢ é”™è¯¯æ¢å¤ (äº‹ä»¶ä¸¢å¤±/å†²çª)            â”‚  â€¢ ä¼˜å…ˆçº§æ§åˆ¶ (è¯­éŸ³ &gt; è§¦æ‘¸ &gt; æŒ‰é”®)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-4"><strong>2. æ ¸å¿ƒå¼ºåˆ¶è¦æ±‚ï¼ˆR05-010 ~ R05-100ï¼‰</strong></h4>







































































<table><thead><tr><th>æ¡æ¬¾</th><th>è¦æ±‚</th><th>å¼€å‘å¿…é¡»æ“ä½œ</th><th>è¿ååæœ</th></tr></thead><tbody><tr><td><strong>R05-010</strong></td><td><strong>å¿…é¡»è½¬å‘æ‰€æœ‰è¾“å…¥äº‹ä»¶åˆ° MD</strong></td><td>1. Androidï¼š<code>InputManager.sendEvent(event)</code><br/>2. QNXï¼š<code>input_forward_event(event)</code></td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>INPUT_EVENT_DROP</code>ï¼‰</td></tr><tr><td><strong>R05-020</strong></td><td><strong>å¿…é¡»æ”¯æŒ Google Assistant è¯­éŸ³æŒ‡ä»¤</strong></td><td>1. å®ç° <code>onVoiceCommand(String command)</code> æ¥å£<br/>2. ç¦æ­¢å±è”½è¯­éŸ³å‘½ä»¤</td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>VOICE_COMMAND_FAILURE</code>ï¼‰</td></tr><tr><td><strong>R05-030</strong></td><td><strong>ç¦æ­¢è‡ªå®šä¹‰æ‰‹åŠ¿æ“ä½œ</strong></td><td>1. Androidï¼š<code>GestureDetector.disable()</code><br/>2. QNXï¼š<code>gesture_disable_all()</code></td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>GESTURE_CUSTOMIZATION_DENIED</code>ï¼‰</td></tr><tr><td><strong>R05-040</strong></td><td><strong>è§¦æ‘¸äº‹ä»¶å¿…é¡»å»¶è¿Ÿ â‰¤150ms</strong></td><td>1. Androidï¼š<code>InputQueue.setEventTimeout(150)</code><br/>2. QNXï¼š<code>input_set_timeout(150)</code></td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>TOUCH_LATENCY_TOO_HIGH</code>ï¼‰</td></tr><tr><td><strong>R05-050</strong></td><td><strong>æŒ‰é”®äº‹ä»¶å¿…é¡»ä¼˜å…ˆçº§é«˜äºè§¦æ‘¸</strong></td><td>1. Androidï¼š<code>InputManager.setPriority(INPUT_PRIORITY_KEY)</code><br/>2. QNXï¼š<code>input_set_priority(KEYBOARD, 1)</code></td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>INPUT_PRIORITY_MISMATCH</code>ï¼‰</td></tr><tr><td><strong>R05-060</strong></td><td><strong>å¿…é¡»æ”¯æŒè¯­éŸ³å‘½ä»¤è¦†ç›– 80% æ ¸å¿ƒæ“ä½œ</strong></td><td>1. å®ç° <code>onVoiceCommand("Play Music")</code> ç­‰æŒ‡ä»¤<br/>2. ç¦æ­¢é™åˆ¶è¯­éŸ³å‘½ä»¤é›†</td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>VOICE_COVERAGE_INSUFFICIENT</code>ï¼‰</td></tr><tr><td><strong>R05-070</strong></td><td><strong>å¿…é¡»å¯ç”¨è¾“å…¥äº‹ä»¶é˜²æŠ–æœºåˆ¶</strong></td><td>1. Androidï¼š<code>InputFilter.addBounceFilter()</code><br/>2. QNXï¼š<code>input_enable_bounce_filter(true)</code></td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>INPUT_BOUNCE_FAILURE</code>ï¼‰</td></tr><tr><td><strong>R05-080</strong></td><td><strong>å¿…é¡»æ”¯æŒå¤šç‚¹è§¦æ§ï¼ˆæœ€å¤š 5 ç‚¹ï¼‰</strong></td><td>1. Androidï¼š<code>MotionEvent.getPointerCount() &lt;= 5</code><br/>2. QNXï¼š<code>input_set_max_pointers(5)</code></td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>TOUCH_POINT_COUNT_INVALID</code>ï¼‰</td></tr><tr><td><strong>R05-090</strong></td><td><strong>ç¦æ­¢ä½¿ç”¨éæ ‡å‡†è¾“å…¥è®¾å¤‡</strong></td><td>1. Androidï¼š<code>InputDevice.isStandard()</code><br/>2. QNXï¼š<code>input_validate_standard_device()</code></td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>NON_STANDARD_INPUT_DEVICE</code>ï¼‰</td></tr><tr><td><strong>R05-100</strong></td><td><strong>å¿…é¡»æ”¯æŒè¾“å…¥äº‹ä»¶å›æ»šï¼ˆæ’¤é”€è¯¯è§¦ï¼‰</strong></td><td>1. Androidï¼š<code>InputManager.rollbackEvent(eventId)</code><br/>2. QNXï¼š<code>input_rollback(event_id)</code></td><td>âŒ è®¤è¯å¤±è´¥ï¼ˆCTS æŠ¥é”™ <code>INPUT_ROLLBACK_FAILURE</code>ï¼‰</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ <strong>è‡´å‘½é”™è¯¯</strong>ï¼š<br/>
<strong>è‡ªå®šä¹‰æ‰‹åŠ¿é€»è¾‘æˆ–ä¿®æ”¹è¾“å…¥äº‹ä»¶è·¯ç”±</strong> â†’ Google ä¼šæ£€æµ‹åˆ°åè®®æ ˆä¸å…¼å®¹ â†’ è®¤è¯å¤±è´¥ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5"><strong>äºŒã€è¾“å…¥äº‹ä»¶å¤„ç†å…³é”®å®ç°ï¼ˆå¼€å‘å¿…çŸ¥ï¼‰</strong></h3>
<h4 data-id="heading-6"><strong>1. è¾“å…¥äº‹ä»¶è½¬å‘é€»è¾‘</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Android ç¤ºä¾‹ï¼šè½¬å‘è§¦æ‘¸äº‹ä»¶</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">onMotionEvent</span><span class="hljs-params">(MotionEvent* event)</span> </span>{
    <span class="hljs-keyword">if</span> (event-&gt;<span class="hljs-built_in">getAction</span>() == MotionEvent::ACTION_DOWN) {
        InputManager::<span class="hljs-built_in">sendEvent</span>(event);
    }
}

<span class="hljs-comment">// QNX ç¤ºä¾‹ï¼šè½¬å‘æŒ‰é”®äº‹ä»¶</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">onKeyEvent</span><span class="hljs-params">(KeyEvent* key)</span> </span>{
    <span class="hljs-keyword">if</span> (key-&gt;<span class="hljs-built_in">getKeyCode</span>() == KEY_VOLUME_UP) {
        <span class="hljs-built_in">input_forward_event</span>(key);
    }
}
</code></pre>
<h4 data-id="heading-7"><strong>2. Google Assistant è¯­éŸ³å‘½ä»¤é›†æˆ</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Android ç¤ºä¾‹ï¼šå¤„ç†è¯­éŸ³æŒ‡ä»¤</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onVoiceCommand</span><span class="hljs-params">(String command)</span> {
    <span class="hljs-keyword">if</span> (command.equals(<span class="hljs-string">"Play Music"</span>)) {
        mediaController.play();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (command.equals(<span class="hljs-string">"Navigate to Home"</span>)) {
        navigation.startRoute(<span class="hljs-string">"Home"</span>);
    }
}
</code></pre>
<h4 data-id="heading-8"><strong>3. è¾“å…¥äº‹ä»¶é˜²æŠ–å®ç°</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// QNX ç¤ºä¾‹ï¼šå¯ç”¨é˜²æŠ–è¿‡æ»¤</span>
<span class="hljs-built_in">input_enable_bounce_filter</span>(<span class="hljs-literal">true</span>);
<span class="hljs-built_in">input_set_bounce_threshold</span>(<span class="hljs-number">50</span>); <span class="hljs-comment">// æ¯«ç§’</span>
</code></pre>
<blockquote>
<p>âš ï¸ <strong>å¼€å‘é™·é˜±</strong>ï¼š</p>
<ul>
<li><strong>Android çš„ <code>InputManager</code> å¿…é¡»ä½¿ç”¨ç³»ç»Ÿæä¾›çš„ API</strong>ï¼ˆç¦æ­¢ç›´æ¥æ“ä½œåº•å±‚é©±åŠ¨ï¼‰</li>
<li><strong>QNX çš„è¾“å…¥ç¼“å†²åŒºå¤§å°éœ€ä¸º 512 å­—èŠ‚</strong>ï¼ˆå¦åˆ™è§¦å‘ <code>INPUT_BUFFER_SIZE_INVALID</code>ï¼‰</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-9"><strong>ä¸‰ã€Google è®¤è¯æµ‹è¯•è¦æ±‚ï¼ˆCTS æµ‹è¯•ç”¨ä¾‹ï¼‰</strong></h3>
<h4 data-id="heading-10"><strong>1. å¿…é¡»é€šè¿‡çš„æµ‹è¯•ç”¨ä¾‹</strong></h4>








































<table><thead><tr><th>æµ‹è¯•ç”¨ä¾‹</th><th>éªŒè¯ç›®æ ‡</th><th>é€šè¿‡æ ‡å‡†</th></tr></thead><tbody><tr><td><code>InputEventForwardingTest</code></td><td>è¾“å…¥äº‹ä»¶æ˜¯å¦å…¨éƒ¨è½¬å‘åˆ° MD</td><td><code>event_forwarded_count &gt; 0</code></td></tr><tr><td><code>VoiceCommandCoverageTest</code></td><td>è¯­éŸ³å‘½ä»¤æ˜¯å¦è¦†ç›– 80% æ ¸å¿ƒæ“ä½œ</td><td><code>voice_coverage &gt;= 80%</code></td></tr><tr><td><code>TouchLatencyTest</code></td><td>è§¦æ‘¸äº‹ä»¶å»¶è¿Ÿ â‰¤150ms</td><td><code>latency_ms &lt;= 150</code></td></tr><tr><td><code>GestureCustomizationTest</code></td><td>æ˜¯å¦ç¦æ­¢è‡ªå®šä¹‰æ‰‹åŠ¿</td><td><code>custom_gestures_allowed == false</code></td></tr><tr><td><code>InputPriorityTest</code></td><td>æŒ‰é”®ä¼˜å…ˆçº§é«˜äºè§¦æ‘¸</td><td><code>keyboard_priority &gt; touch_priority</code></td></tr><tr><td><code>InputRollbackTest</code></td><td>è¾“å…¥äº‹ä»¶å›æ»šæ˜¯å¦æ­£å¸¸</td><td><code>rollback_success_count &gt; 0</code></td></tr></tbody></table>
<h4 data-id="heading-11"><strong>2. è®¤è¯å¤±è´¥é«˜é¢‘åŸå› ï¼ˆGoogle å®˜æ–¹æ•°æ®ï¼‰</strong></h4>






























<table><thead><tr><th>é—®é¢˜</th><th>å æ¯”</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>è¾“å…¥äº‹ä»¶æœªè½¬å‘</td><td>40%</td><td>æ£€æŸ¥ <code>InputManager.sendEvent()</code> è°ƒç”¨</td></tr><tr><td>è¯­éŸ³å‘½ä»¤è¦†ç›–ç‡ä¸è¶³</td><td>30%</td><td>å®ç° <code>onVoiceCommand()</code> å…¨éƒ¨æŒ‡ä»¤</td></tr><tr><td>è§¦æ‘¸å»¶è¿Ÿ &gt;150ms</td><td>20%</td><td>ä¼˜åŒ– <code>InputQueue</code> ç¼“å†²åŒºå¤§å°</td></tr><tr><td>è‡ªå®šä¹‰æ‰‹åŠ¿é€»è¾‘</td><td>10%</td><td>ç¦ç”¨æ‰€æœ‰æ‰‹åŠ¿æ£€æµ‹</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-12"><strong>å››ã€å¼€å‘è‡ªæ£€æ¸…å•ï¼ˆè®¤è¯å‰å¿…æŸ¥ï¼‰</strong></h3>








































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>æ“ä½œæŒ‡å—</th><th>éªŒè¯å·¥å…·</th></tr></thead><tbody><tr><td><strong>1. è¾“å…¥äº‹ä»¶è½¬å‘</strong></td><td>æ£€æŸ¥ <code>InputManager.sendEvent()</code> æˆ– <code>input_forward_event()</code> æ˜¯å¦è°ƒç”¨</td><td><code>adb shell dumpsys input</code></td></tr><tr><td><strong>2. è¯­éŸ³å‘½ä»¤è¦†ç›–ç‡</strong></td><td>æ£€æŸ¥ <code>onVoiceCommand()</code> æ˜¯å¦å®ç° 80% ä»¥ä¸ŠæŒ‡ä»¤</td><td><code>adb shell dumpsys voice</code></td></tr><tr><td><strong>3. è§¦æ‘¸å»¶è¿Ÿ</strong></td><td>ç”¨ <code>InputQueue.getEventTimeout()</code> è®¡ç®—å»¶è¿Ÿ</td><td>è‡ªå®šä¹‰æµ‹è¯•è„šæœ¬</td></tr><tr><td><strong>4. æŒ‰é”®ä¼˜å…ˆçº§</strong></td><td>æ£€æŸ¥ <code>InputManager.setPriority()</code> æ˜¯å¦è®¾ç½®ä¸º <code>INPUT_PRIORITY_KEY</code></td><td><code>adb shell cat /proc/input/priority</code></td></tr><tr><td><strong>5. è¾“å…¥é˜²æŠ–</strong></td><td>æ£€æŸ¥ <code>input_enable_bounce_filter()</code> æ˜¯å¦å¯ç”¨</td><td><code>adb shell cat /proc/input/bounce</code></td></tr><tr><td><strong>6. å¤šç‚¹è§¦æ§</strong></td><td>æ£€æŸ¥ <code>MotionEvent.getPointerCount()</code> æ˜¯å¦ â‰¤5</td><td><code>adb shell dumpsys motionevent</code></td></tr></tbody></table>
<blockquote>
<p>ğŸ”¥ <strong>è®¤è¯é€šè¿‡ç‡æå‡æŠ€å·§</strong>ï¼š</p>
<ol>
<li><strong>åœ¨ CI æµç¨‹ä¸­å¼ºåˆ¶æ£€æŸ¥è¯­éŸ³å‘½ä»¤è¦†ç›–ç‡</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬</span>
<span class="hljs-keyword">if</span> [ $(get_voice_coverage.sh) -lt 80 ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Voice command coverage &lt;80%: <span class="hljs-variable">$coverage</span>"</span>
  <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
</code></pre>
</li>
<li><strong>ä½¿ç”¨ Google çš„å‚è€ƒå®ç°</strong>ï¼š
<ul>
<li>Android å‚è€ƒï¼š<code>car-receiver-library/examples/android/input</code></li>
<li>QNX å‚è€ƒï¼š<code>car-receiver-library/examples/qnx/input</code></li>
</ul>
</li>
</ol>
</blockquote>
<hr/>
<h3 data-id="heading-13"><strong>äº”ã€é™„ï¼šGoogle å®˜æ–¹èµ„æºä¸é¿å‘æŒ‡å—</strong></h3>






























<table><thead><tr><th>èµ„æº</th><th>ç”¨é€”</th><th>é¿å‘æç¤º</th></tr></thead><tbody><tr><td><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandroid%2Fcar-receiver-library%2Ftree%2Fmain%2Finput" target="_blank" title="https://github.com/android/car-receiver-library/tree/main/input" ref="nofollow noopener noreferrer">Input Handling GitHub</a></strong></td><td>è·å–å‚è€ƒå®ç°</td><td>âš ï¸ <strong>åˆ‡å‹¿ä¿®æ”¹ <code>InputManager</code> æˆ– <code>input_forward_event</code> å†…éƒ¨é€»è¾‘</strong></td></tr><tr><td><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fcar%2Fhuig%23cts" target="_blank" title="https://developer.android.com/car/huig#cts" ref="nofollow noopener noreferrer">CTS æµ‹è¯•å·¥å…·</a></strong></td><td>è¿è¡Œè®¤è¯æµ‹è¯•</td><td>âš ï¸ ä»…æ”¯æŒ <strong>Linux</strong> ç¯å¢ƒï¼ˆWindows/Mac éœ€ç”¨ WSLï¼‰</td></tr><tr><td><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.qnx.com%2Fdocs%2F7.1%2Finput%2Findex.html" target="_blank" title="https://developer.qnx.com/docs/7.1/input/index.html" ref="nofollow noopener noreferrer">QNX è¾“å…¥è°ƒè¯•æŒ‡å—</a></strong></td><td>QNX è¾“å…¥é€‚é…å‚è€ƒ</td><td>âš ï¸ éœ€å®‰è£… <code>qnx-ntoarmv7le-gcc</code> 11.0 å·¥å…·é“¾</td></tr><tr><td><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fcar%2Fhuig%2Ftroubleshooting" target="_blank" title="https://developer.android.com/car/huig/troubleshooting" ref="nofollow noopener noreferrer">å¸¸è§é”™è¯¯æ—¥å¿—</a></strong></td><td>è§£æè®¤è¯å¤±è´¥åŸå› </td><td>âš ï¸ <code>Error 5001: Voice command coverage &lt;80%</code> â†’ å®ç°å…¨éƒ¨æŒ‡ä»¤</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ <strong>ç»ˆæè­¦å‘Š</strong>ï¼š<br/>
<strong>Google ä¸æä¾›è¾“å…¥å­ç³»ç»Ÿçš„å•†ä¸šäºŒè¿›åˆ¶ç‰ˆæœ¬</strong>ï¼<br/>
æ‰€æœ‰è½¦å‚å¿…é¡»<strong>è‡ªè¡Œå®ç°è¾“å…¥åè®®æ ˆ</strong>ï¼Œå¦åˆ™è®¤è¯ç›´æ¥å¤±è´¥ã€‚</p>
</blockquote>
<hr/>
<blockquote>
<p>âœ… <strong>æ–‡æ¡£æ€»ç»“</strong>ï¼š<br/>
ç¬¬ 5 ç« çš„æ ¸å¿ƒæ˜¯ <strong>â€œä¸¥æ ¼éµå¾ªè¾“å…¥äº‹ä»¶è½¬å‘ã€è¯­éŸ³å‘½ä»¤è¦†ç›–ã€è§¦æ‘¸å»¶è¿Ÿä¸Šé™â€</strong>ã€‚<br/>
<strong>ä»»ä½•ä¼˜åŒ–ï¼ˆå¦‚è‡ªå®šä¹‰æ‰‹åŠ¿é€»è¾‘ã€ä¿®æ”¹è¾“å…¥ä¼˜å…ˆçº§ï¼‰éƒ½æ˜¯è‡´å‘½é”™è¯¯</strong>ã€‚<br/>
<strong>å¿…é¡»é€šè¿‡ Google çš„è¾“å…¥ CTS æµ‹è¯•å¥—ä»¶</strong>ã€‚</p>
</blockquote>
<blockquote>
<p><strong>ä¸‹ä¸€æ­¥è¡ŒåŠ¨</strong>ï¼š</p>
<ol>
<li>ç«‹å³ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandroid%2Fcar-receiver-library" target="_blank" title="https://github.com/android/car-receiver-library" ref="nofollow noopener noreferrer">GitHub</a> ä¸‹è½½ <strong><code>input</code> æ¨¡å—å‚è€ƒå®ç°</strong></li>
<li>æŒ‰ç…§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandroid%2Fcar-receiver-library%2Ftree%2Fmain%2Finput%2Fqnx" target="_blank" title="https://github.com/android/car-receiver-library/tree/main/input/qnx" ref="nofollow noopener noreferrer">QNX ç¤ºä¾‹</a> æ­å»ºå¼€å‘ç¯å¢ƒ</li>
<li>ç”¨ <strong>CTS æµ‹è¯•å·¥å…·</strong> è¿è¡Œ <code>VoiceCommandCoverageTest</code> éªŒè¯è¦†ç›–ç‡</li>
</ol>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAGä¸ä¼šè¿‡æ—¶ï¼Œä½†ä½ éœ€è¦è¿™10ä¸ªä¸Šä¸‹æ–‡å¤„ç†æŠ€å·§ä¸¨Context Engineering]]></title>    <link>https://juejin.cn/post/7577307409854005263</link>    <guid>https://juejin.cn/post/7577307409854005263</guid>    <pubDate>2025-11-28T02:46:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577307409854005263" data-draft-id="7576955345378000959" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAGä¸ä¼šè¿‡æ—¶ï¼Œä½†ä½ éœ€è¦è¿™10ä¸ªä¸Šä¸‹æ–‡å¤„ç†æŠ€å·§ä¸¨Context Engineering"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-28T02:46:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAGä¸ä¼šè¿‡æ—¶ï¼Œä½†ä½ éœ€è¦è¿™10ä¸ªä¸Šä¸‹æ–‡å¤„ç†æŠ€å·§ä¸¨Context Engineering
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T02:46:18.000Z" title="Fri Nov 28 2025 02:46:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p><strong>å¯¹å¤§éƒ¨åˆ†å¼€å‘è€…æ¥è¯´ï¼Œæ­ä¸€ä¸ªRAGæˆ–è€…agentä¸éš¾ï¼Œæ€ä¹ˆæŠŠå®ƒä¼˜åŒ–æˆç”Ÿäº§å¯ç”¨çš„çŠ¶æ€æœ€éš¾ã€‚</strong></p>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ£€ç´¢æ•ˆç‡ã€å‡†ç¡®æ€§ã€æˆæœ¬ã€å“åº”é€Ÿåº¦ï¼Œéƒ½æ˜¯é‡ç‚¹å…³æ³¨é—®é¢˜ã€‚</p>
<p>é‚£ä¹ˆï¼Œå¦‚ä½•å¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Ÿä¸šå†…ä¸€è‡´çœ‹å¥½Context Engineeringä¹Ÿå°±æ˜¯ä¸Šä¸‹æ–‡å·¥ç¨‹ã€‚</p>
<p>æœ¬ç³»åˆ—æ–‡ç« ï¼Œå°†ä»ä¸Šä¸‹æ–‡å·¥ç¨‹çš„ä¸åŒç¯èŠ‚ï¼ˆä¸Šä¸‹æ–‡å¤„ç†ä¸ç”Ÿæˆã€ä¸Šä¸‹æ–‡å¤„ç†ã€ä¸Šä¸‹æ–‡ç®¡ç†ï¼‰æœ€æ–°çš„è¡Œä¸šæ¢ç´¢ä¸è¿›å±•ï¼Œè¿›è¡Œè§£è¯»ã€‚</p>
<h2 data-id="heading-0">01 å¦‚ä½•ç†è§£Context Engineering</h2>
<p>ä¸Šä¸‹æ–‡å·¥ç¨‹çš„æœ¬è´¨æ˜¯é€šè¿‡åŠ¨æ€æ„å»ºã€ä¼˜åŒ–LLMæ¨ç†æ—¶çš„ä¿¡æ¯è´Ÿè½½ï¼ˆå«æŸ¥è¯¢ã€å¤–éƒ¨çŸ¥è¯†ã€å†å²å¯¹è¯ç­‰ï¼Œæ¯”â€œæç¤ºè¯â€æ›´å®½æ³›ï¼‰ï¼Œæå‡ç³»ç»Ÿé•¿æœŸæ€§èƒ½ä¸æ•ˆç‡ã€‚å®ƒæ˜¯ç®—æ³•é©±åŠ¨çš„ç³»ç»Ÿçº§ä¼˜åŒ–ï¼Œæ¶µç›–æç¤ºè¯å·¥ç¨‹ã€RAGã€å¤šæ™ºèƒ½ä½“ç­‰æŠ€æœ¯ï¼Œ</p>
<p>ä»æ¡†æ¶æ¥çœ‹ï¼Œä¸Šä¸‹æ–‡å·¥ç¨‹åˆ†ä¸ºåŸºç¡€ç»„ä»¶ï¼ˆä¿¡æ¯ç”Ÿå‘½å‘¨æœŸæ ¸å¿ƒæ¨¡å—ï¼‰å’Œå¤æ‚ç³»ç»Ÿå®ç°ï¼ˆç»„ä»¶çš„é«˜çº§é›†æˆåº”ç”¨ï¼‰ï¼ŒäºŒè€…å¯çµæ´»ç»„åˆé€‚é…ä¸åŒåœºæ™¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d90f53081e3b4d8b83c71c81806cd574~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764902778&amp;x-signature=5G9M%2BXrVg0PiggY1SO1%2FyzI3y%2Fs%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-1">å…¶ä¸­ï¼ŒåŸºç¡€ç»„ä»¶åŒ…æ‹¬</h5>
<ol>
<li>ä¸Šä¸‹æ–‡æ£€ç´¢ä¸ç”Ÿæˆï¼šä»æç¤ºè¯ã€å¤–éƒ¨çŸ¥è¯†åº“ç­‰è·å–åŸå§‹ä¿¡æ¯ï¼Œé€šè¿‡åŠ¨æ€ç»„è£…å½¢æˆé€‚é…ä»»åŠ¡çš„ä¸Šä¸‹æ–‡</li>
<li>ä¸Šä¸‹æ–‡å¤„ç†ï¼šé€šè¿‡å‹ç¼©ã€æ‘˜è¦ã€ç»“æ„åŒ–è½¬æ¢ç­‰æŠ€æœ¯ï¼Œç²¾ç‚¼åŸå§‹ä¿¡æ¯ï¼Œé€‚é…æ¨¡å‹ç†è§£ä¸æ¨ç†</li>
<li>ä¸Šä¸‹æ–‡ç®¡ç†ï¼šæ„å»ºå†…å­˜å±‚æ¬¡ã€è¿ç”¨å‹ç¼©æŠ€æœ¯ï¼Œåœ¨èµ„æºçº¦æŸä¸‹é«˜æ•ˆå­˜å‚¨ã€è°ƒåº¦ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
</ol>
<h5 data-id="heading-2">å¤æ‚ç³»ç»Ÿå®ç°åŒ…æ‹¬</h5>
<ol start="4">
<li>æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ï¼šç»“åˆä¿¡æ¯æ£€ç´¢ä¸LLMç”Ÿæˆï¼Œä»å¤–éƒ¨çŸ¥è¯†åº“è·å–â€œè¯æ®â€ï¼Œè§£å†³çŸ¥è¯†é™ˆæ—§å’Œå¹»è§‰é—®é¢˜ï¼Œå«æ¨¡å—åŒ–ã€æ™ºèƒ½ä½“ã€å›¾å¢å¼ºç­‰æ¶æ„</li>
<li>è®°å¿†ç³»ç»Ÿï¼šç®¡ç†è¿è¡Œè¿‡ç¨‹ä¸­çš„åŠ¨æ€â€œç»éªŒâ€ï¼Œåˆ†çŸ­æœŸ/é•¿æœŸè®°å¿†ï¼Œæ”¯æ’‘æŒä¹…äº¤äº’ä¸é•¿æœŸå­¦ä¹ </li>
<li>å·¥å…·é›†æˆæ¨ç†ï¼šèµ‹äºˆLLMè°ƒç”¨å¤–éƒ¨å·¥å…·/APIçš„èƒ½åŠ›ï¼Œæ‰©å±•ä»»åŠ¡è¾¹ç•Œï¼Œéœ€å¤„ç†å·¥å…·æ•°æ®ä¸ä¸Šä¸‹æ–‡æ›´æ–°</li>
<li>å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼šå¤šä¸ªå…·å¤‡ä¸“ä¸šèƒ½åŠ›çš„æ™ºèƒ½ä½“åä½œï¼Œé€šè¿‡é€šä¿¡åè°ƒå®Œæˆå¤æ‚ä»»åŠ¡ï¼Œéœ€ç®¡ç†å…±äº«ä¸Šä¸‹æ–‡ä¸å…¨å±€çŠ¶æ€</li>
</ol>
<h2 data-id="heading-3">02 ä¸Šä¸‹æ–‡å¤„ç†çš„è¡Œä¸šè¿›å±•ä¸æ–¹æ³•</h2>
<p>æ„æˆä¸Šä¸‹æ–‡å·¥ç¨‹çš„ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯æ”¯æŸ±ï¼šä¸Šä¸‹æ–‡æ£€ç´¢ä¸ç”Ÿæˆã€ä¸Šä¸‹æ–‡å¤„ç†ä»¥åŠä¸Šä¸‹æ–‡ç®¡ç†ã€‚è¿™äº›æŠ€æœ¯æ–¹æ³•æ˜¯å®ç°é«˜æ•ˆã€æ™ºèƒ½ä¸Šä¸‹æ–‡ç³»ç»Ÿçš„å…·ä½“æ‰‹æ®µã€‚</p>
<p>å…¶ä¸­ï¼Œä¸Šä¸‹æ–‡å¤„ç†æ˜¯ä¸Šä¸‹æ–‡å·¥ç¨‹çš„ç¬¬äºŒä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œå®ƒä¸“æ³¨äºå¯¹è·å–åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯è¿›è¡Œè½¬æ¢å’Œä¼˜åŒ–ï¼Œä»¥å…‹æœLLMåœ¨å¤„ç†å¤æ‚ä¿¡æ¯æ—¶é¢ä¸´çš„æŒ‘æˆ˜ï¼Œå¹¶æœ€å¤§åŒ–ä¿¡æ¯çš„æ•ˆç”¨ã€‚</p>
<p>ä»¥ä¸‹ä¸ºè¡Œä¸šå…³äºä¸Šä¸‹æ–‡å¤„ç†æ‰€åšå‡ºçš„ä¸€äº›è¡Œä¹‹æœ‰æ•ˆçš„æ¢ç´¢ã€‚</p>
<h5 data-id="heading-4">ï¼ˆ1ï¼‰é•¿ä¸Šä¸‹æ–‡å¤„ç† (Long Context Processing)</h5>
<p>å¤„ç†è¶…é•¿åºåˆ—ä¸Šä¸‹æ–‡æ˜¯LLMé¢ä¸´çš„ä¸€ä¸ªæ ¹æœ¬æ€§æŒ‘æˆ˜ï¼Œä¸»è¦æºäºTransformerè‡ªæ³¨æ„åŠ›æœºåˆ¶O(nÂ²)çš„è®¡ç®—å¤æ‚åº¦ï¼Œè¿™å¯¼è‡´äº†éšç€åºåˆ—é•¿åº¦å¢åŠ è€Œæ€¥å‰§å¢é•¿çš„è®¡ç®—å’Œå†…å­˜ç“¶é¢ˆã€‚ä¾‹å¦‚ï¼Œå°†Mistral-7Bçš„è¾“å…¥ä»4K tokenså¢åŠ åˆ°128K tokensï¼Œè®¡ç®—é‡ä¼šå¢åŠ 122å€ã€‚Llama 3.1 8Båœ¨å¤„ç†128K tokensçš„è¯·æ±‚æ—¶ï¼Œå¯èƒ½éœ€è¦é«˜è¾¾16GBçš„å†…å­˜ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œç ”ç©¶è€…ä»¬ä»æ¶æ„åˆ›æ–°ã€ä½ç½®æ’å€¼å’Œä¼˜åŒ–æŠ€æœ¯ç­‰å¤šä¸ªè§’åº¦è¿›è¡Œäº†æ¢ç´¢ã€‚</p>
<h6 data-id="heading-5">a. æ¶æ„åˆ›æ–° (å¦‚ State Space Models, Dilated Attention)</h6>
<p>ä¸ºäº†ä»æ ¹æœ¬ä¸Šè§£å†³Transformerçš„äºŒæ¬¡å¤æ‚åº¦é—®é¢˜ï¼Œç ”ç©¶è€…ä»¬æå‡ºäº†ä¸€ç³»åˆ—åˆ›æ–°çš„æ¨¡å‹æ¶æ„ã€‚</p>
<ul>
<li><strong>çŠ¶æ€ç©ºé—´æ¨¡å‹ï¼ˆState Space Models, SSMsï¼‰</strong> Â ï¼šSSMsé€šè¿‡ä½¿ç”¨å›ºå®šå¤§å°çš„éšè—çŠ¶æ€ï¼Œå®ç°äº†çº¿æ€§çš„è®¡ç®—å¤æ‚åº¦å’Œæ’å®šçš„å†…å­˜éœ€æ±‚ã€‚åƒMambaè¿™æ ·çš„æ¨¡å‹æä¾›äº†é«˜æ•ˆçš„å¾ªç¯è®¡ç®—æœºåˆ¶ï¼Œå…¶æ‰©å±•æ€§è¿œä¼˜äºä¼ ç»Ÿçš„Transformerã€‚</li>
<li><strong>æ‰©å¼ æ³¨æ„åŠ›ï¼ˆDilated Attentionï¼‰</strong> Â ï¼šä»¥LongNetä¸ºä»£è¡¨çš„æ–¹æ³•ï¼Œé‡‡ç”¨éšç€tokenè·ç¦»å¢åŠ è€ŒæŒ‡æ•°çº§æ‰©å¼ çš„æ³¨æ„åŠ›åŸŸï¼Œå®ç°äº†çº¿æ€§çš„è®¡ç®—å¤æ‚åº¦ï¼ŒåŒæ—¶ä¿æŒäº†tokenä¹‹é—´çš„å¯¹æ•°ä¾èµ–æ€§ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†è¶…è¿‡åäº¿tokensçš„åºåˆ—ã€‚</li>
<li><strong>æ‰˜æ™®åˆ©èŒ¨ç¥ç»ç½‘ç»œï¼ˆToeplitz Neural Networks, TNNsï¼‰</strong> Â ï¼šTNNsä½¿ç”¨ç›¸å¯¹ä½ç½®ç¼–ç çš„æ‰˜æ™®åˆ©èŒ¨çŸ©é˜µæ¥å»ºæ¨¡åºåˆ—ï¼Œå°†æ—¶ç©ºå¤æ‚åº¦é™ä½åˆ°å¯¹æ•°çº¿æ€§çº§åˆ«ï¼Œå¹¶å®ç°äº†ä»512ä¸ªè®­ç»ƒtokensåˆ°14,000ä¸ªæ¨ç†tokensçš„æœ‰æ•ˆå¤–æ¨ã€‚</li>
<li><strong>çº¿æ€§æ³¨æ„åŠ›ï¼ˆLinear Attentionï¼‰</strong> Â ï¼šé€šè¿‡å°†è‡ªæ³¨æ„åŠ›è¡¨ç¤ºä¸ºæ ¸ç‰¹å¾æ˜ å°„çš„çº¿æ€§ç‚¹ç§¯ï¼Œçº¿æ€§æ³¨æ„åŠ›æœºåˆ¶å°†å¤æ‚åº¦ä»O(NÂ²)é™ä½åˆ°O(N)ï¼Œåœ¨å¤„ç†æé•¿åºåˆ—æ—¶å®ç°äº†é«˜è¾¾4000å€çš„åŠ é€Ÿã€‚</li>
</ul>
<h6 data-id="heading-6">b.ä½ç½®æ’å€¼ä¸ä¸Šä¸‹æ–‡æ‰©å±• (å¦‚ YaRN, Self-Extend)</h6>
<p>å¯¹äºå·²ç»é¢„è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œç›´æ¥æ‰©å±•å…¶ä¸Šä¸‹æ–‡çª—å£é•¿åº¦æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚ä½ç½®æ’å€¼æŠ€æœ¯é€šè¿‡åœ¨æ¨ç†æ—¶æ™ºèƒ½åœ°é‡æ–°ç¼©æ”¾ä½ç½®ç´¢å¼•ï¼Œè€Œä¸æ˜¯å¤–æ¨åˆ°æœªè§è¿‡çš„ä½ç½®ï¼Œä»è€Œå®ç°äº†å¯¹æ›´é•¿åºåˆ—çš„å¤„ç†ã€‚</p>
<ul>
<li><strong>ç¥ç»æ­£åˆ‡æ ¸ï¼ˆNeural Tangent Kernel, NTKï¼‰æ–¹æ³•</strong>ï¼šYaRNï¼ˆYet another RoPE-based Interpolation methodï¼‰ç»“åˆäº†NTKæ’å€¼ã€çº¿æ€§æ’å€¼å’Œæ³¨æ„åŠ›åˆ†å¸ƒæ ¡æ­£ï¼Œä¸ºä¸Šä¸‹æ–‡æ‰©å±•æä¾›äº†æ•°å­¦ä¸Šæ›´ä¸¥è°¨çš„æ¡†æ¶ã€‚</li>
<li><strong>ä¸¤é˜¶æ®µæ‰©å±•æ–¹æ³•</strong>ï¼šLongRoPEé€šè¿‡ä¸¤é˜¶æ®µæ–¹æ³•å®ç°äº†2048K tokensçš„ä¸Šä¸‹æ–‡çª—å£ï¼šé¦–å…ˆå°†æ¨¡å‹å¾®è°ƒè‡³256Ké•¿åº¦ï¼Œç„¶åè¿›è¡Œä½ç½®æ’å€¼ä»¥è¾¾åˆ°æœ€å¤§ä¸Šä¸‹æ–‡é•¿åº¦ã€‚</li>
<li><strong>æ— éœ€å¾®è°ƒçš„æŠ€æœ¯</strong>ï¼šSelf-Extendç­‰æŠ€æœ¯å…è®¸LLMåœ¨ä¸è¿›è¡Œä»»ä½•å¾®è°ƒçš„æƒ…å†µä¸‹å¤„ç†é•¿ä¸Šä¸‹æ–‡ï¼Œå®ƒé€šè¿‡é‡‡ç”¨åŒå±‚æ³¨æ„åŠ›ç­–ç•¥â€”â€”åˆ†ç»„æ³¨æ„åŠ›å’Œé‚»è¿‘æ³¨æ„åŠ›â€”â€”æ¥æ•è·è¿œè·ç¦»å’Œç›¸é‚»tokenä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</li>
</ul>
<h6 data-id="heading-7">c.ä¼˜åŒ–æŠ€æœ¯ (å¦‚ FlashAttention, Sparse Attention)</h6>
<p>åœ¨ä¸æ”¹å˜æ¨¡å‹åŸºæœ¬æ¶æ„çš„å‰æä¸‹ï¼Œç ”ç©¶è€…ä»¬è¿˜å¼€å‘äº†å¤šç§ä¼˜åŒ–æŠ€æœ¯æ¥æé«˜é•¿ä¸Šä¸‹æ–‡å¤„ç†çš„æ•ˆç‡ã€‚</p>
<ul>
<li><strong>åˆ†ç»„æŸ¥è¯¢æ³¨æ„åŠ›ï¼ˆGrouped-Query Attention, GQAï¼‰</strong> Â ï¼šGQAå°†æŸ¥è¯¢å¤´åˆ†ç»„ï¼Œæ¯ç»„å…±äº«é”®å’Œå€¼å¤´ï¼Œåœ¨å¤šæŸ¥è¯¢æ³¨æ„åŠ›å’Œå¤šå¤´æ³¨æ„åŠ›ä¹‹é—´å–å¾—äº†å¹³è¡¡ï¼Œæ˜¾è‘—é™ä½äº†è§£ç è¿‡ç¨‹ä¸­çš„å†…å­˜éœ€æ±‚ã€‚</li>
<li><strong>FlashAttention</strong>ï¼šFlashAttentionåˆ©ç”¨GPUå†…å­˜å±‚æ¬¡ç»“æ„çš„ä¸å¯¹ç§°æ€§ï¼Œå®ç°äº†çº¿æ€§çš„å†…å­˜æ‰©å±•ï¼Œè€Œä¸æ˜¯äºŒæ¬¡æ–¹å¢é•¿ã€‚å…¶åç»­ç‰ˆæœ¬FlashAttention-2é€šè¿‡å‡å°‘éçŸ©é˜µä¹˜æ³•æ“ä½œå’Œä¼˜åŒ–å·¥ä½œåˆ†é…ï¼Œå®ç°äº†çº¦ä¸¤å€çš„é€Ÿåº¦æå‡ã€‚</li>
<li><strong>ç¨€ç–æ³¨æ„åŠ›ï¼ˆSparse Attentionï¼‰</strong> Â ï¼šé€šè¿‡åªè®¡ç®—éƒ¨åˆ†tokenä¹‹é—´çš„æ³¨æ„åŠ›æƒé‡ï¼Œç¨€ç–æ³¨æ„åŠ›æŠ€æœ¯å¯ä»¥å¤§å¹…é™ä½è®¡ç®—é‡ã€‚ä¾‹å¦‚ï¼ŒBigBirdç»“åˆäº†å±€éƒ¨æ³¨æ„åŠ›ã€å…¨å±€tokenå’Œéšæœºè¿æ¥ï¼Œèƒ½å¤Ÿé«˜æ•ˆå¤„ç†æ¯”ä»¥å¾€é•¿8å€çš„åºåˆ—ã€‚StreamingLLMåˆ™é€šè¿‡ä¿ç•™å…³é”®çš„â€œæ³¨æ„åŠ›æ±‡èšâ€ï¼ˆattention sinkï¼‰tokenå’Œæœ€è¿‘çš„KVç¼“å­˜æ¡ç›®ï¼Œå®ç°äº†å¯¹æ— é™é•¿åºåˆ—çš„å¤„ç†ï¼Œåœ¨å¤„ç†400ä¸‡tokensçš„åºåˆ—æ—¶ï¼Œé€Ÿåº¦æ¯”æ»‘åŠ¨çª—å£é‡è®¡ç®—å¿«22.2å€ã€‚</li>
<li><strong>å†…å­˜ç®¡ç†ä¸å‹ç¼©</strong>ï¼šHâ‚‚Oï¼ˆHeavy Hitter Oracleï¼‰æå‡ºäº†ä¸€ç§é«˜æ•ˆçš„KVç¼“å­˜é©±é€ç­–ç•¥ï¼ŒåŸºäºè§‚å¯Ÿåˆ°å°‘æ•°tokenè´¡çŒ®äº†å¤§éƒ¨åˆ†æ³¨æ„åŠ›å€¼çš„åŸç†ï¼Œåœ¨æé«˜ååé‡çš„åŒæ—¶é™ä½äº†å»¶è¿Ÿã€‚Infini-attentionåˆ™å°†å‹ç¼©è®°å¿†æ•´åˆåˆ° vanilla attention ä¸­ï¼Œç»“åˆäº†æ©ç å±€éƒ¨æ³¨æ„åŠ›å’Œé•¿æœŸçº¿æ€§æ³¨æ„åŠ›ï¼Œä½¿å¾—å¤„ç†æ— é™é•¿è¾“å…¥æ—¶çš„å†…å­˜å’Œè®¡ç®—éƒ½æ˜¯æœ‰ç•Œçš„ã€‚</li>
</ul>
<h5 data-id="heading-8">(2)ä¸Šä¸‹æ–‡è‡ªæˆ‘ç²¾ç‚¼ä¸é€‚åº” (Contextual Self-Refinement and Adaptation)</h5>
<p>ä¸Šä¸‹æ–‡è‡ªæˆ‘ç²¾ç‚¼ä¸é€‚åº”æ˜¯ä¸€ç§è®©å¤§å‹è¯­è¨€æ¨¡å‹æ¨¡ä»¿äººç±»ä¿®è®¢è¿‡ç¨‹ï¼Œé€šè¿‡å¾ªç¯åé¦ˆæœºåˆ¶è‡ªä¸»æ”¹è¿›å…¶è¾“å‡ºçš„æŠ€æœ¯èŒƒå¼ã€‚</p>
<p>ä¸ä¾èµ–å¤–éƒ¨å¥–åŠ±æ¨¡å‹çš„å¼ºåŒ–å­¦ä¹ æ–¹æ³•ä¸åŒï¼Œè‡ªæˆ‘ç²¾ç‚¼ä¸»è¦é€šè¿‡æ¨¡å‹è‡ªèº«çš„è‡ªæˆ‘è¯„ä¼°å’Œå¯¹è¯å¼äº¤äº’æ¥å®ç°ï¼Œé€šå¸¸åˆ©ç”¨ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯å·¥ç¨‹æ¥å¼•å¯¼æ¨¡å‹è¿›è¡Œè¿­ä»£ä¼˜åŒ–ã€‚</p>
<p>è¿™ç§æ–¹æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå¯¹äºä¸€ä¸ªç»™å®šçš„ä»»åŠ¡ï¼Œè¯†åˆ«å¹¶ä¿®æ­£é”™è¯¯å¾€å¾€æ¯”ä¸€æ¬¡æ€§ç”Ÿæˆå®Œç¾è§£å†³æ–¹æ¡ˆæ›´å®¹æ˜“ã€‚é€šè¿‡èµ‹äºˆæ¨¡å‹è‡ªæˆ‘æ‰¹åˆ¤å’Œä¿®æ­£çš„èƒ½åŠ›ï¼Œå¯ä»¥æ˜¾è‘—æå‡å…¶åœ¨å¤æ‚æ¨ç†ã€ä»£ç ç”Ÿæˆã€åˆ›æ„å†™ä½œç­‰ä»»åŠ¡ä¸Šçš„è¡¨ç°ï¼Œå¹¶ä½¿å…¶èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”æ–°çš„ä»»åŠ¡å’Œç¯å¢ƒã€‚</p>
<h6 data-id="heading-9">a.åŸºç¡€è‡ªæˆ‘ç²¾ç‚¼æ¡†æ¶ (å¦‚ Self-Refine, Reflexion)</h6>
<p>ä¸€ç³»åˆ—åŸºç¡€æ¡†æ¶ä¸ºä¸Šä¸‹æ–‡è‡ªæˆ‘ç²¾ç‚¼æä¾›äº†å…·ä½“çš„å®ç°è·¯å¾„ã€‚Self-Refineæ¡†æ¶æ˜¯ä¸€ä¸ªå…¸å‹çš„ä»£è¡¨ï¼Œå®ƒä½¿ç”¨åŒä¸€ä¸ªLLMåŒæ—¶æ‰®æ¼”ç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰ã€åé¦ˆæä¾›è€…ï¼ˆfeedback providerï¼‰å’Œç²¾ç‚¼å™¨ï¼ˆrefinerï¼‰çš„è§’è‰²ã€‚</p>
<p>æ¨¡å‹é¦–å…ˆç”Ÿæˆä¸€ä¸ªåˆå§‹è§£å†³æ–¹æ¡ˆï¼Œç„¶åå¯¹è‡ªå·±çš„è¾“å‡ºæä¾›å…·ä½“çš„ã€å¯æ“ä½œçš„åé¦ˆï¼Œæœ€åæ ¹æ®è¿™äº›åé¦ˆå¯¹è§£å†³æ–¹æ¡ˆè¿›è¡Œç²¾ç‚¼ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥å¾ªç¯å¤šæ¬¡ï¼Œç›´åˆ°è¾¾åˆ°æ»¡æ„çš„ç»“æœã€‚</p>
<p>Reflexionæ¡†æ¶åˆ™æ›´è¿›ä¸€æ­¥ï¼Œå®ƒå¼•å…¥äº†â€œåæ€æ–‡æœ¬â€ï¼ˆreflective textï¼‰çš„æ¦‚å¿µï¼Œå°†æ¨¡å‹åœ¨ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å¤±è´¥ç»éªŒå’Œæ•™è®­ä»¥è‡ªç„¶è¯­è¨€çš„å½¢å¼å­˜å‚¨åœ¨æƒ…èŠ‚è®°å¿†ç¼“å†²åŒºï¼ˆepisodic memory bufferï¼‰ä¸­ã€‚</p>
<p>è¿™äº›åæ€æ–‡æœ¬åœ¨åç»­çš„ä»»åŠ¡ä¸­å¯ä»¥è¢«æ£€ç´¢å‡ºæ¥ï¼Œä½œä¸ºæŒ‡å¯¼æ¨¡å‹å†³ç­–çš„ä¸Šä¸‹æ–‡ï¼Œä»è€Œé¿å…é‡å¤çŠ¯é”™ã€‚ç„¶è€Œï¼Œç ”ç©¶ä¹Ÿè¡¨æ˜ï¼Œç®€å•çš„æç¤ºè¯å¾€å¾€ä¸è¶³ä»¥å®ç°å¯é çš„è‡ªæˆ‘ä¿®æ­£ï¼Œå› æ­¤éœ€è¦æ›´ç»“æ„åŒ–çš„å¼•å¯¼ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒN-CRITICSæ¡†æ¶é‡‡ç”¨åŸºäºé›†æˆï¼ˆensemble-basedï¼‰çš„è¯„ä¼°æ–¹æ³•ï¼Œè®©å¤šä¸ªä¸åŒçš„æ¨¡å‹æˆ–åŒä¸€ä¸ªæ¨¡å‹çš„ä¸åŒå®ä¾‹å¯¹åˆå§‹è¾“å‡ºè¿›è¡Œè¯„ä¼°ï¼Œå¹¶æ±‡æ€»å®ƒä»¬çš„åé¦ˆæ¥æŒ‡å¯¼ç²¾ç‚¼è¿‡ç¨‹ï¼Œä»è€Œè·å¾—æ›´å…¨é¢ã€æ›´ç‹¬ç«‹çš„è¯„ä»·ã€‚</p>
<h6 data-id="heading-10">b. å…ƒå­¦ä¹ ä¸è‡ªä¸»è¿›åŒ– (å¦‚ SELF, Self-rewarding)</h6>
<p>ä¸Šä¸‹æ–‡è‡ªæˆ‘ç²¾ç‚¼çš„é«˜çº§é˜¶æ®µæ˜¯å…ƒå­¦ä¹ ï¼ˆMeta-Learningï¼‰å’Œè‡ªä¸»è¿›åŒ–ï¼ˆAutonomous Evolutionï¼‰ï¼Œå…¶ç›®æ ‡æ˜¯è®©æ¨¡å‹ä¸ä»…å­¦ä¼šè§£å†³å…·ä½“ä»»åŠ¡ï¼Œæ›´å­¦ä¼šå¦‚ä½•å­¦ä¹ ï¼ˆlearning to learnï¼‰ã€‚</p>
<p>SELFæ¡†æ¶é€šè¿‡å°‘é‡ç¤ºä¾‹æ•™ä¼šLLMå…ƒæŠ€èƒ½ï¼Œå¦‚è‡ªæˆ‘åé¦ˆå’Œè‡ªæˆ‘ç²¾ç‚¼ï¼Œç„¶åè®©æ¨¡å‹é€šè¿‡ç”Ÿæˆå’Œç­›é€‰è‡ªå·±çš„è®­ç»ƒæ•°æ®æ¥è¿›è¡ŒæŒç»­çš„è‡ªæˆ‘è¿›åŒ–ã€‚è‡ªå¥–åŠ±ï¼ˆSelf-rewardingï¼‰ æœºåˆ¶åˆ™è®©æ¨¡å‹é€šè¿‡è¿­ä»£å¼çš„è‡ªæˆ‘è¯„åˆ¤æ¥è‡ªä¸»æå‡ï¼Œæ¨¡å‹åŒæ—¶æ‰®æ¼”æ‰§è¡Œè€…ï¼ˆperformerï¼‰å’Œè¯„åˆ¤è€…ï¼ˆjudgeï¼‰çš„è§’è‰²ï¼Œé€šè¿‡æœ€å¤§åŒ–è‡ªå·±ç»™è‡ªå·±åˆ†é…çš„å¥–åŠ±æ¥ä¼˜åŒ–è¡Œä¸ºã€‚</p>
<p>Creatoræ¡†æ¶å°†è¿™ç§èŒƒå¼æ‰©å±•åˆ°å·¥å…·ä½¿ç”¨ï¼Œä½¿LLMèƒ½å¤Ÿè‡ªä¸»åœ°åˆ›å»ºå’Œä½¿ç”¨è‡ªå·±çš„å·¥å…·ï¼Œé€šè¿‡ä¸€ä¸ªåŒ…å«åˆ›å»ºã€å†³ç­–ã€æ‰§è¡Œå’Œè¯†åˆ«çš„å››æ¨¡å—æµç¨‹æ¥å®Œæˆå¤æ‚ä»»åŠ¡ã€‚</p>
<p>è€ŒSelf-Developingæ¡†æ¶åˆ™ä»£è¡¨äº†æœ€é«˜åº¦çš„è‡ªä¸»æ€§ï¼Œå®ƒä½¿LLMèƒ½å¤Ÿè‡ªä¸»åœ°å‘ç°ã€å®ç°å’Œç²¾ç‚¼è‡ªå·±çš„æ”¹è¿›ç®—æ³•ï¼Œé€šè¿‡è¿­ä»£å¾ªç¯ç”Ÿæˆç®—æ³•å€™é€‰è€…ä½œä¸ºå¯æ‰§è¡Œä»£ç ï¼Œä»è€Œå®ç°çœŸæ­£çš„è‡ªæˆ‘å‘å±•ã€‚è¿™äº›æ¡†æ¶å…±åŒæŒ‡å‘äº†ä¸€ä¸ªé•¿æœŸæ¼”å˜æ–¹å‘ï¼Œå³LLMå°†ä¸å†æ˜¯é™æ€çš„å·¥å…·ï¼Œè€Œæ˜¯èƒ½å¤ŸæŒç»­å­¦ä¹ å’Œè¿›åŒ–çš„æ™ºèƒ½ä½“ã€‚</p>
<h5 data-id="heading-11">(3)å¤šæ¨¡æ€ä¸Šä¸‹æ–‡ (Multimodal Context)</h5>
<p>å¤šæ¨¡æ€ä¸Šä¸‹æ–‡å·¥ç¨‹æ—¨åœ¨å°†å¤§å‹è¯­è¨€æ¨¡å‹çš„èƒ½åŠ›ä»çº¯æ–‡æœ¬é¢†åŸŸæ‰©å±•åˆ°èƒ½å¤Ÿç†è§£å’Œå¤„ç†åŒ…å«è§†è§‰ã€å¬è§‰ã€3Dç¯å¢ƒç­‰å¤šç§æ•°æ®ç±»å‹çš„å¤æ‚ç°å®ä¸–ç•Œåœºæ™¯ã€‚</p>
<p>é€šè¿‡å°†ä¸åŒæ¨¡æ€çš„ä¿¡æ¯æ•´åˆåˆ°ç»Ÿä¸€çš„ä¸Šä¸‹æ–‡è¡¨ç¤ºä¸­ï¼Œå¤šæ¨¡æ€å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆMLLMsï¼‰èƒ½å¤Ÿæ‰§è¡Œå›¾åƒæè¿°ã€è§†è§‰é—®ç­”ã€è§†é¢‘ç†è§£ç­‰æ›´ä¸ºå¤æ‚çš„ä»»åŠ¡ã€‚</p>
<p>ç„¶è€Œï¼Œè¿™ç§æ‰©å±•ä¹Ÿå¸¦æ¥äº†æ–°çš„æŒ‘æˆ˜ï¼ŒåŒ…æ‹¬å¦‚ä½•æœ‰æ•ˆåœ°èåˆä¸åŒæ¨¡æ€çš„ä¿¡æ¯ã€å¦‚ä½•è¿›è¡Œè·¨æ¨¡æ€çš„æ¨ç†ï¼Œä»¥åŠå¦‚ä½•é«˜æ•ˆåœ°å¤„ç†é•¿åºåˆ—çš„å¤šæ¨¡æ€æ•°æ®ã€‚è¯¥é¢†åŸŸçš„ç ”ç©¶è‡´åŠ›äºæ„å»ºèƒ½å¤Ÿåƒäººç±»ä¸€æ ·ï¼Œç»¼åˆåˆ©ç”¨å¤šç§æ„Ÿå®˜ä¿¡æ¯æ¥ç†è§£ä¸–ç•Œçš„æ™ºèƒ½ç³»ç»Ÿã€‚</p>
<h6 data-id="heading-12">a.æ¨¡æ€èåˆä¸è·¨æ¨¡æ€æ¨ç†</h6>
<p>æ¨¡æ€èåˆæ˜¯å¤šæ¨¡æ€ä¸Šä¸‹æ–‡å¤„ç†çš„æ ¸å¿ƒï¼Œå…¶ç›®æ ‡æ˜¯å°†æ¥è‡ªä¸åŒæ¥æºï¼ˆå¦‚å›¾åƒã€æ–‡æœ¬ã€éŸ³é¢‘ï¼‰çš„ä¿¡æ¯æ•´åˆæˆä¸€ä¸ªè¿è´¯ã€ç»Ÿä¸€çš„è¡¨ç¤ºã€‚</p>
<p>åŸºç¡€çš„èåˆæ–¹æ³•é€šå¸¸æ˜¯å°†è§†è§‰è¾“å…¥é€šè¿‡ä¸“é—¨çš„ç¼–ç å™¨ï¼ˆå¦‚CLIPï¼‰è½¬æ¢ä¸ºä¸€ç³»åˆ—ç¦»æ•£çš„tokenï¼Œç„¶åä¸æ–‡æœ¬tokenæ‹¼æ¥ï¼Œå…±åŒè¾“å…¥åˆ°LLMä¸­ã€‚ç„¶è€Œï¼Œè¿™ç§ç®€å•çš„æ‹¼æ¥å¯èƒ½æ— æ³•å®ç°æ·±åº¦çš„è¯­ä¹‰èåˆã€‚</p>
<p>æ›´å…ˆè¿›çš„ç­–ç•¥ï¼Œå¦‚äº¤å‰æ¨¡æ€æ³¨æ„åŠ›æœºåˆ¶ï¼ˆcross-modal attentionï¼‰ ï¼Œå…è®¸æ¨¡å‹åœ¨LLMçš„åµŒå…¥ç©ºé—´å†…ç›´æ¥å­¦ä¹ æ–‡æœ¬tokenå’Œè§†è§‰tokenä¹‹é—´çš„ç»†ç²’åº¦ä¾èµ–å…³ç³»ï¼Œä»è€Œå¢å¼ºå¯¹å›¾åƒç¼–è¾‘ç­‰ä»»åŠ¡çš„ç†è§£ã€‚</p>
<p>ä¸ºäº†å¤„ç†é•¿åºåˆ—è¾“å…¥ï¼Œåˆ†å±‚è®¾è®¡ï¼ˆhierarchical designsï¼‰ å°†ä¸åŒæ¨¡æ€çš„å¤„ç†åˆ†é˜¶æ®µè¿›è¡Œï¼Œä»¥ç¡®ä¿å¯æ‰©å±•æ€§ã€‚</p>
<p>æ­¤å¤–ï¼Œä¸€äº›ç ”ç©¶å°è¯•ç»•è¿‡å¯¹çº¯æ–‡æœ¬LLMçš„é€‚é…ï¼Œé‡‡ç”¨ä»ä¸€å¼€å§‹å°±è”åˆé¢„è®­ç»ƒå¤šæ¨¡æ€æ•°æ®å’Œæ–‡æœ¬è¯­æ–™çš„ç»Ÿä¸€è®­ç»ƒèŒƒå¼ï¼Œä»¥ä»æ ¹æœ¬ä¸Šç¼“è§£æ¨¡æ€å¯¹é½çš„æŒ‘æˆ˜ã€‚è·¨æ¨¡æ€æ¨ç†åˆ™è¦æ±‚æ¨¡å‹ä¸ä»…èƒ½ç†è§£æ¯ä¸ªæ¨¡æ€ï¼Œè¿˜èƒ½æ¨æ–­å®ƒä»¬ç»„åˆåçš„æ•´ä½“å«ä¹‰ï¼Œä¾‹å¦‚ç†è§£ä¸€å¼ å›¾ç‰‡å’Œä¸€æ®µæ–‡å­—å…±åŒè¡¨è¾¾çš„è®½åˆºæ„å‘³ã€‚</p>
<h6 data-id="heading-13">b.å¤šæ¨¡æ€ç¼–ç å™¨ä¸å¯¹é½æ¨¡å— (å¦‚ CLIP, Q-Former)</h6>
<p>å®ç°å¤šæ¨¡æ€èåˆçš„å…³é”®æŠ€æœ¯ç»„ä»¶æ˜¯å¤–éƒ¨çš„å¤šæ¨¡æ€ç¼–ç å™¨å’Œè¿æ¥å®ƒä»¬ä¸LLMä¸»å¹²çš„å¯¹é½æ¨¡å—ï¼ˆalignment modulesï¼‰ ã€‚</p>
<p>ç›®å‰ï¼Œä¸»æµçš„æ¶æ„èŒƒå¼æ˜¯ä½¿ç”¨ä¸“é—¨çš„å¤šæ¨¡æ€ç¼–ç å™¨æ¥å¤„ç†ç‰¹å®šç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚ä½¿ç”¨CLIPï¼ˆContrastive Language-Image Pre-trainingï¼‰æ¨¡å‹æ¥å¤„ç†è§†è§‰ä¿¡æ¯ï¼Œæˆ–ä½¿ç”¨CLAPï¼ˆContrastive Language-Audio Pre-trainingï¼‰æ¨¡å‹æ¥å¤„ç†éŸ³é¢‘ä¿¡æ¯ã€‚</p>
<p>è¿™äº›ç¼–ç å™¨å°†åŸå§‹çš„å¤šæ¨¡æ€æ•°æ®ï¼ˆå¦‚åƒç´ ã€å£°æ³¢ï¼‰è½¬æ¢ä¸ºé«˜ç»´çš„ç‰¹å¾å‘é‡ã€‚æ¥ä¸‹æ¥ï¼Œå¯¹é½æ¨¡å—è´Ÿè´£å°†è¿™äº›ç‰¹å¾å‘é‡æ˜ å°„åˆ°LLMçš„åµŒå…¥ç©ºé—´ä¸­ï¼Œä½¿å…¶èƒ½å¤Ÿä¸æ–‡æœ¬tokenè¿›è¡Œäº¤äº’ã€‚</p>
<p>å¸¸è§çš„å¯¹é½æ¨¡å—åŒ…æ‹¬ç®€å•çš„å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰å’Œæ›´å¤æ‚çš„Q-Formerï¼ˆQuerying Transformerï¼‰ã€‚Q-Formeré€šè¿‡ä¸€ä¸ªå¯å­¦ä¹ çš„æŸ¥è¯¢tokené›†åˆæ¥ä»è§†è§‰ç¼–ç å™¨çš„è¾“å‡ºä¸­æå–ä¸æ–‡æœ¬æœ€ç›¸å…³çš„è§†è§‰ç‰¹å¾ï¼Œä»è€Œå®ç°æ›´ç²¾ç»†çš„æ¨¡æ€å¯¹é½ã€‚è¿™ç§æ¨¡å—åŒ–çš„è®¾è®¡å…è®¸ç‹¬ç«‹åœ°æ›´æ–°å¤šæ¨¡æ€ç¼–ç å™¨ï¼Œè€Œæ— éœ€å¯¹æ•´ä¸ªLLMè¿›è¡Œé‡æ–°è®­ç»ƒï¼Œæä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚</p>
<h5 data-id="heading-14">(4)å…³ç³»å‹ä¸ç»“æ„åŒ–ä¸Šä¸‹æ–‡ (Relational and Structured Context)</h5>
<p>å¤§å‹è¯­è¨€æ¨¡å‹åœ¨å¤„ç†è¡¨æ ¼ã€æ•°æ®åº“ã€çŸ¥è¯†å›¾è°±ç­‰å…³ç³»å‹å’Œç»“æ„åŒ–æ•°æ®æ—¶é¢ä¸´ç€æ ¹æœ¬æ€§çš„é™åˆ¶ã€‚</p>
<p>å…¶ä¸»è¦åŸå› åœ¨äºLLMçš„è¾“å…¥æ˜¯åŸºäºçº¿æ€§åºåˆ—çš„æ–‡æœ¬ï¼Œè€Œç»“æ„åŒ–æ•°æ®å†…éƒ¨è•´å«ç€å¤æ‚çš„ã€éçº¿æ€§çš„å…³ç³»å’Œå±‚æ¬¡ç»“æ„ã€‚å°†ç»“æ„åŒ–æ•°æ®ç®€å•åœ°çº¿æ€§åŒ–ï¼ˆä¾‹å¦‚ï¼Œå°†è¡¨æ ¼çš„æ¯ä¸€è¡Œè½¬æ¢æˆä¸€å¥è¯ï¼‰å¾€å¾€ä¼šä¸¢å¤±å…³é”®çš„ç»“æ„æ€§ä¿¡æ¯ï¼Œå¯¼è‡´æ¨¡å‹æ€§èƒ½ä¸‹é™ï¼Œå°¤å…¶æ˜¯åœ¨ä¿¡æ¯åˆ†æ•£åœ¨ä¸Šä¸‹æ–‡ä¸åŒä½ç½®æ—¶ã€‚</p>
<p>ä¸ºäº†å…‹æœè¿™ä¸€æŒ‘æˆ˜ï¼Œç ”ç©¶è€…ä»¬æ¢ç´¢äº†å¤šç§æ–¹æ³•ï¼Œæ—¨åœ¨å°†ç»“æ„åŒ–ä¿¡æ¯ä»¥ä¸€ç§LLMèƒ½å¤Ÿæœ‰æ•ˆåˆ©ç”¨çš„æ–¹å¼ç¼–ç å’Œæ•´åˆï¼Œä»è€Œæå‡æ¨¡å‹åœ¨éœ€è¦å¤æ‚æ¨ç†å’Œäº‹å®æ ¸æŸ¥çš„ä»»åŠ¡ä¸Šçš„è¡¨ç°ã€‚</p>
<h6 data-id="heading-15">a. çŸ¥è¯†å›¾è°±ä¸ç¥ç»ç½‘ç»œé›†æˆ</h6>
<p>çŸ¥è¯†å›¾è°±ï¼ˆKnowledge Graphs, KGsï¼‰ä½œä¸ºä¸€ç§å¼ºå¤§çš„ç»“æ„åŒ–çŸ¥è¯†è¡¨ç¤ºå½¢å¼ï¼Œå…¶ä¸LLMçš„é›†æˆæ˜¯å½“å‰ç ”ç©¶çš„çƒ­ç‚¹ã€‚</p>
<p>ä¸€ç§ç›´æ¥çš„æ–¹æ³•æ˜¯åˆ©ç”¨çŸ¥è¯†å›¾è°±åµŒå…¥ï¼ˆKnowledge Graph Embeddingsï¼‰ ï¼Œå°†å›¾è°±ä¸­çš„å®ä½“å’Œå…³ç³»è½¬æ¢ä¸ºä½ç»´çš„æ•°å€¼å‘é‡ã€‚è¿™äº›åµŒå…¥å‘é‡å¯ä»¥è¢«æ•´åˆåˆ°LLMçš„è¾“å…¥æˆ–å†…éƒ¨è¡¨ç¤ºä¸­ï¼Œä¸ºæ¨¡å‹æä¾›ç»“æ„åŒ–çš„èƒŒæ™¯çŸ¥è¯†ã€‚</p>
<p>æ›´è¿›ä¸€æ­¥çš„é›†æˆæ–¹å¼æ˜¯å¼•å…¥å›¾ç¥ç»ç½‘ç»œï¼ˆGraph Neural Networks, GNNsï¼‰ ã€‚GNNsèƒ½å¤Ÿç›´æ¥åœ¨å›¾ç»“æ„ä¸Šè¿›è¡Œè®¡ç®—ï¼Œæ•æ‰å®ä½“ä¹‹é—´å¤æ‚çš„å¤šè·³ï¼ˆmulti-hopï¼‰å…³ç³»ã€‚ä¸€äº›æ··åˆæ¶æ„ï¼Œå¦‚GraphFormersï¼Œå°†GNNç»„ä»¶åµŒå¥—åœ¨Transformerå—ä¸­ï¼Œå®ç°äº†è¯­è¨€ä¸Šä¸‹æ–‡å’Œå›¾ç»“æ„ä¿¡æ¯çš„æ·±åº¦äº¤äº’ã€‚ä¾‹å¦‚ï¼ŒGreaseLMæ¨¡å‹åœ¨æ‰€æœ‰æ¨¡å‹å±‚ä¸­ä¿ƒè¿›äº†è¯­è¨€ä¸Šä¸‹æ–‡è¡¨ç¤ºå’Œç»“æ„åŒ–ä¸–ç•ŒçŸ¥è¯†ä¹‹é—´çš„åŒå‘äº¤äº’ï¼Œä½¿å¾—ä¸¤è€…èƒ½å¤Ÿç›¸äº’å¢å¼ºã€‚</p>
<p>QA-GNNåˆ™é€šè¿‡æ„å»ºè”åˆå›¾å’ŒåŸºäºå›¾çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œå®ç°äº†é—®ç­”ä¸Šä¸‹æ–‡å’ŒçŸ¥è¯†å›¾è°±ä¹‹é—´çš„åŒå‘æ³¨æ„åŠ›è¿æ¥ã€‚</p>
<h6 data-id="heading-16">b. æ–‡å­—åŒ–æŠ€æœ¯ (Verbalization)</h6>
<p><strong>æ–‡å­—åŒ–ï¼ˆVerbalizationï¼‰</strong> Â æ˜¯ä¸€ç§å°†ç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚çŸ¥è¯†å›¾è°±ä¸‰å…ƒç»„ã€è¡¨æ ¼è¡Œã€æ•°æ®åº“è®°å½•ï¼‰è½¬æ¢ä¸ºè‡ªç„¶è¯­è¨€å¥å­çš„æŠ€æœ¯ã€‚</p>
<p>è¿™ç§æ–¹æ³•çš„ä¼˜åŠ¿åœ¨äºï¼Œå®ƒæ— éœ€å¯¹ç°æœ‰çš„LLMæ¶æ„è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œå³å¯å°†ç»“æ„åŒ–ä¿¡æ¯æ— ç¼åœ°æ•´åˆåˆ°è¯­è¨€ç³»ç»Ÿä¸­ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªçŸ¥è¯†å›¾è°±ä¸‰å…ƒç»„Â <code>(Albert Einstein, bornIn, Ulm)</code>Â å¯ä»¥è¢«è½¬æ¢æˆå¥å­â€œé˜¿å°”ä¼¯ç‰¹Â·çˆ±å› æ–¯å¦å‡ºç”Ÿäºä¹Œå°”å§†â€ã€‚</p>
<p>ç„¶è€Œï¼Œç®€å•çš„æ–‡å­—åŒ–å¯èƒ½æ— æ³•å®Œå…¨ä¿ç•™åŸå§‹æ•°æ®çš„ç»“æ„å’Œå…³ç³»ã€‚å› æ­¤ï¼Œç ”ç©¶è€…ä»¬ä¹Ÿæ¢ç´¢äº†ä½¿ç”¨ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚Pythonæˆ–SQLï¼‰æ¥è¡¨ç¤ºç»“æ„åŒ–æ•°æ®ã€‚ç ”ç©¶è¡¨æ˜ï¼Œåœ¨å¤æ‚çš„æ¨ç†ä»»åŠ¡ä¸­ï¼Œä½¿ç”¨Pythonå®ç°çŸ¥è¯†å›¾è°±æˆ–SQLæŸ¥è¯¢æ•°æ®åº“ï¼Œå…¶æ€§èƒ½ä¼˜äºä¼ ç»Ÿçš„è‡ªç„¶è¯­è¨€è¡¨ç¤ºï¼Œå› ä¸ºå®ƒä»¬èƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨æ•°æ®å›ºæœ‰çš„ç»“æ„æ€§ã€‚</p>
<p>æ­¤å¤–ï¼Œä¸€äº›æ–¹æ³•è¿˜åˆ©ç”¨LLMè‡ªèº«çš„èƒ½åŠ›æ¥æå–ç»“æ„åŒ–ä¿¡æ¯ï¼Œå¹¶å°†å…¶è¡¨ç¤ºä¸ºå›¾ã€è¡¨æ ¼æˆ–å…³ç³»æ¨¡å¼ï¼Œä»è€Œå®ç°å¯¹è¾“å…¥æ–‡æœ¬çš„å¤šå±‚æ¬¡ç»“æ„åŒ–ã€‚</p>
<h6 data-id="heading-17">c.æ··åˆæ¶æ„ (å¦‚ GraphToken, Heterformer)</h6>
<p>ä¸ºäº†æ›´æœ‰æ•ˆåœ°å¤„ç†ç»“æ„åŒ–æ•°æ®ï¼Œç ”ç©¶è€…ä»¬è®¾è®¡äº†å¤šç§æ··åˆæ¶æ„ï¼Œå°†LLMä¸ä¸“é—¨å¤„ç†å›¾ç»“æ„çš„æ¨¡å—ç›¸ç»“åˆã€‚</p>
<p>GraphToken æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼Œå®ƒé€šè¿‡å¼•å…¥å‚æ•°é«˜æ•ˆçš„ç¼–ç å‡½æ•°ï¼Œæ˜¾å¼åœ°å°†ç»“æ„ä¿¡æ¯è¡¨ç¤ºä¸ºç‰¹æ®Šçš„tokenï¼Œåœ¨å›¾æ¨ç†ä»»åŠ¡ä¸Šå–å¾—äº†é«˜è¾¾73ä¸ªç™¾åˆ†ç‚¹çš„æ€§èƒ½æå‡ã€‚</p>
<p>Heterformer ç­‰æ··åˆGNN-LMæ¶æ„åˆ™åœ¨ç»Ÿä¸€çš„æ¨¡å‹ä¸­æ‰§è¡Œä¸Šä¸‹æ–‡ç›¸å…³çš„æ–‡æœ¬ç¼–ç å’Œå¼‚æ„å›¾ç»“æ„ç¼–ç ï¼Œè§£å†³äº†æ‰©å±•è¿™äº›é›†æˆç³»ç»Ÿæ—¶é¢ä¸´çš„è®¡ç®—æŒ‘æˆ˜ã€‚è¿™äº›æ··åˆæ¶æ„é€šå¸¸éµå¾ªä¸åŒçš„é›†æˆèŒƒå¼ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒK-BERT åœ¨é¢„è®­ç»ƒé˜¶æ®µå°±å°†çŸ¥è¯†å›¾è°±ä¸‰å…ƒç»„æ³¨å…¥åˆ°æ¨¡å‹ä¸­ï¼Œä½¿æ¨¡å‹å†…åŒ–äº‹å®çŸ¥è¯†ã€‚è€ŒKAPINGç­‰æ¨ç†æ—¶ï¼ˆinference-timeï¼‰æ–¹æ³•åˆ™é€šè¿‡æ£€ç´¢ç›¸å…³äº‹å®å¹¶å°†å…¶å‰ç½®åˆ°æç¤ºè¯ä¸­ï¼Œå®ç°äº†æ— éœ€é‡æ–°è®­ç»ƒæ¨¡å‹çš„å®æ—¶çŸ¥è¯†è®¿é—®ã€‚</p>
<p>æ›´å¤æ‚çš„å®ç°ï¼Œå¦‚é€šè¿‡é€‚é…å™¨æ¨¡å—å’Œäº¤å‰æ³¨æ„åŠ›æœºåˆ¶å°†çŸ¥è¯†å›¾è°±è¡ç”Ÿçš„è¡¨ç¤ºç›´æ¥åµŒå…¥åˆ°æ¨¡å‹çš„æ½œåœ¨ç©ºé—´ä¸­ï¼Œå®ç°äº†æ›´æ·±åº¦çš„èåˆã€‚</p>
<h3 data-id="heading-18">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[verlè¿›è¡ŒAgentic-RLå¤šå·¥å…·æ•°æ®é›†å­—æ®µåŒ¹é…é—®é¢˜è®°å½•]]></title>    <link>https://juejin.cn/post/7577300470520643593</link>    <guid>https://juejin.cn/post/7577300470520643593</guid>    <pubDate>2025-11-28T03:00:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577300470520643593" data-draft-id="7569078155027316736" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="verlè¿›è¡ŒAgentic-RLå¤šå·¥å…·æ•°æ®é›†å­—æ®µåŒ¹é…é—®é¢˜è®°å½•"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-28T03:00:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="QåŒå­¦"/> <meta itemprop="url" content="https://juejin.cn/user/3861941936200327"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            verlè¿›è¡ŒAgentic-RLå¤šå·¥å…·æ•°æ®é›†å­—æ®µåŒ¹é…é—®é¢˜è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3861941936200327/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    QåŒå­¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:00:20.000Z" title="Fri Nov 28 2025 03:00:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜èƒŒæ™¯</h2>
<p>è¿‘æœŸåœ¨ç”¨verlæ¡†æ¶è¿›è¡ŒAgentic-RLè®­ç»ƒï¼Œä¹‹å‰çš„agent modelå®éªŒæˆ‘ä¸€èˆ¬éƒ½æ˜¯é‡‡ç”¨äº†ä¸<code>ToRL</code>æˆ–è€…<code>ReTool</code>ç±»ä¼¼çš„æ•°æ®æ ¼å¼ï¼Œå³æ¨¡å‹çš„å·¥å…·è°ƒç”¨é€šè¿‡å¯¹åº”çš„ç‰¹æ®Šå·¥å…·è°ƒç”¨tokenå®ç°ï¼Œä¾‹å¦‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½¿ç”¨<code>&lt;code&gt;â€¦â€¦&lt;/code&gt;</code>æ ‡è®°å·¥å…·è°ƒç”¨ï¼Œ<code>&lt;interpreter&gt;â€¦â€¦&lt;/interpreter&gt;</code>å¡«å……å·¥å…·è°ƒç”¨ç»“æœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8914e743f7cf416c9b694c2f1a5f27fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUeWQjOWtpg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764903620&amp;x-signature=jIPI895kgjTTAdz7b1iJg5Nm1W8%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†ä½¿ç”¨verlè¿›è¡ŒAgentic-RLè®­ç»ƒæ—¶ï¼Œæ¡†æ¶çš„æ•´ä½“å®ç°åŸºäºSglangæ ·å¼ï¼Œè¾“å…¥æ•°æ®é›†çš„æ ¼å¼æ›´åƒæ˜¯ä¸€ç§ä¼ ç»Ÿçš„å¤šè½®å¯¹è¯é£æ ¼ï¼Œåªä¸è¿‡æ–°å¢äº†ä¸€ä¸ª<code>role</code>ä¸º<code>tool</code>çš„éƒ¨åˆ†ã€‚ä¸€ä¸ªå…¸å‹çš„æ•°æ®é›†æ ¼å¼å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f07bde4eeae4aa6ac5f37b3672545ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUeWQjOWtpg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764903620&amp;x-signature=Xckz36TOHe4NfRU7WxpQmpj6mMs%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€æœ‰çš„å·¥å…·è°ƒç”¨è¢«ç»Ÿä¸€ä¸º<code>&lt;tool_call&gt;&lt;/tool_call&gt;</code>ï¼Œå·¥å…·å“åº”åˆ™å˜ä¸º<code>&lt;tool_response&gt;&lt;/tool_response&gt;</code></p>
<p>åŸºäºä»¥ä¸Šæ•°æ®é›†ï¼Œå¯ä»¥å¾ˆå¿«å®ŒæˆReToolçš„SFT&amp;RLå¤ç°ã€‚ç„¶è€Œï¼Œåœ¨è¿ç§»åˆ°é¢†åŸŸAgent Modelæ—¶ï¼Œè¿™æ ·çš„æ•°æ®é›†æ ¼å¼å´å¸¦æ¥ä¸€ä¸ªâ€œç¥å¥‡â€çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">é—®é¢˜æè¿°</h2>
<p>é¢†åŸŸAgent Modelå¯ä»¥è°ƒç”¨å¤šç§å·¥å…·ï¼Œè¿™äº›å·¥å…·çš„åŸºæœ¬ç»“æ„ç›¸åŒï¼Œä½†å…·ä½“çš„å‚æ•°å­—æ®µå´æ˜¯å¯ä»¥ä¸åŒçš„ï¼Œä¾‹å¦‚</p>
<pre><code class="hljs language-bash" lang="bash">&lt;tool_call&gt;
{<span class="hljs-string">"name"</span>: <span class="hljs-string">"tool_name_1"</span>, <span class="hljs-string">"argument"</span>: {<span class="hljs-string">"para_name_x"</span>: value_x, <span class="hljs-string">"para_name_y"</span>: value_y}}
&lt;/tool_call&gt;
</code></pre>
<p>å¦ä¸€ä¸ªå·¥å…·è°ƒç”¨ä¸º</p>
<pre><code class="hljs language-bash" lang="bash">&lt;tool_call&gt;
{<span class="hljs-string">"name"</span>: <span class="hljs-string">"tool_name_2"</span>, <span class="hljs-string">"argument"</span>: {<span class="hljs-string">"para_name_p"</span>: value_p, <span class="hljs-string">"para_name_q"</span>: value_q}}
&lt;/tool_call&gt;
</code></pre>
<p>ç„¶è€Œï¼Œåœ¨å°è¯•å°†è¿™ç§å¤šè½®æ¬¡â€œå¤šå·¥å…·â€æ•°æ®è½¬æ¢æˆä¸ºverlä¸­ä½¿ç”¨çš„parquetæ ¼å¼çš„å¤šè½®å·¥å…·è°ƒç”¨æ•°æ®é›†æ—¶ï¼Œä¼šå‘ç°ä¸€ä¸ªâ€œç¥å¥‡â€çš„ç°è±¡ï¼Œå³ä½¿ç”¨datasetsé‡Œé¢çš„.to_parquetå‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè‡ªåŠ¨å°†æ‰€æœ‰çš„å·¥å…·æ ¼å¼å¯¹é½ï¼Œä¹Ÿå°±æ˜¯ä¼šå‘ç”Ÿï¼š</p>
<pre><code class="hljs language-python" lang="python">&lt;tool_call&gt;
{<span class="hljs-string">"name"</span>: <span class="hljs-string">"tool_name_1"</span>, <span class="hljs-string">"argument"</span>: {<span class="hljs-string">"para_name_x"</span>: value_x, <span class="hljs-string">"para_name_y"</span>: value_y, <span class="hljs-string">"para_name_p"</span>: <span class="hljs-literal">None</span>, <span class="hljs-string">"para_name_q"</span>: <span class="hljs-literal">None</span>}}
&lt;/tool_call&gt;
â€¦â€¦
&lt;tool_call&gt;
{<span class="hljs-string">"name"</span>: <span class="hljs-string">"tool_name_2"</span>, <span class="hljs-string">"argument"</span>: {<span class="hljs-string">"para_name_x"</span>: <span class="hljs-literal">None</span>, <span class="hljs-string">"para_name_y"</span>: <span class="hljs-literal">None</span>, <span class="hljs-string">"para_name_p"</span>: value_p, <span class="hljs-string">"para_name_q"</span>: value_q}}
&lt;/tool_call&gt;

</code></pre>
<p>å³to_parquetå‡½æ•°ä¼šè‡ªåŠ¨è®¤ä¸ºæ‰€æœ‰çš„å·¥å…·å‚æ•°éƒ½åŒ…å«ä¸€ä¸ªâ€œå…¨é›†â€çš„å­—æ®µï¼Œå¯¼è‡´å­—æ®µå†—ä½™å’Œä¸Šä¸‹æ–‡è†¨èƒ€ï¼Œä¸åˆ©äºå·¥å…·ä¼ å‚ã€‚</p>
<h2 data-id="heading-2">åŸå› åˆ†æ</h2>
<p>HuggingFace <code>datasets</code> çš„åº•å±‚å­˜å‚¨æ˜¯Apache Arrowï¼ˆarrow tableï¼‰ï¼Œè€Œ<code>.to_parquet()</code> å®é™…æ˜¯åœ¨æŠŠ Arrow çš„ schemaå†™å…¥ Parquetï¼ˆåˆ—å¼å­˜å‚¨æ ¼å¼ï¼‰ï¼Œè€Œ Parquet/Arrow å¯¹â€œç»“æ„åŒ–æ•°æ®â€çš„æ ¸å¿ƒè¦æ±‚æ˜¯ï¼š<strong>åŒä¸€åˆ—çš„ schema å¿…é¡»ç¨³å®šä¸”ä¸€è‡´ã€‚</strong></p>
<p>å› æ­¤ï¼Œå½“åœ¨æŸä¸€åˆ—é‡Œæ”¾çš„æ˜¯ <code>dict</code>ï¼ˆåµŒå¥—ç»“æ„ï¼‰ï¼ŒArrow ä¼šæŠŠå®ƒæ¨æ–­ä¸ºä¸€ä¸ªstruct ç±»å‹ï¼Œç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-text" lang="text">argument: struct&lt;
  para_name_x: ...,
  para_name_y: ...,
  para_name_p: ...,
  para_name_q: ...
&gt;
</code></pre>
<p>ä¸€æ—¦å®ƒåœ¨å…¨æ•°æ®é›†ä¸­è§è¿‡ <code>para_name_x / y</code> å’Œ <code>para_name_p / q</code>ï¼Œä¸ºäº†ä¿è¯æ•´åˆ— schema ä¸€è‡´ï¼Œå®ƒå°±å¿…é¡»æŠŠ struct çš„å­—æ®µåšâ€œå¹¶é›†ï¼ˆunionï¼‰â€ã€‚äºæ˜¯ï¼š</p>
<ul>
<li>æŸæ¡æ ·æœ¬æ²¡æœ‰çš„å­—æ®µ â†’ åªèƒ½è¡¥ <code>null</code></li>
<li>æœ€ç»ˆå†™ Parquet æ—¶ï¼Œschema å›ºåŒ–ï¼Œå­—æ®µå¯¹é½å°±ä¸å¯é¿å…</li>
</ul>
<h2 data-id="heading-3">è§£å†³æ–¹æ¡ˆ</h2>
<p>è¦é¿å… Arrow æŠŠ argument è§£ææˆ structï¼Œæœ€ç›´æ¥ã€ç¨³å®šçš„åŠæ³•å°±æ˜¯ä¸è¦è®©è¿™ä¸€åˆ—æ˜¯ â€œåµŒå¥— dictâ€ ç±»å‹ï¼Œè€Œæ˜¯æŠŠ argument å­˜æˆå­—ç¬¦ä¸²ã€‚</p>
<p>ä¹Ÿå°±æ˜¯æŠŠï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"argument"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"para_name_x"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"para_name_y"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>æ”¹æˆï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"argument"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{\"para_name_x\": 1, \"para_name_y\": 2}"</span>
</code></pre>
<p>è¿™æ · Arrow çœ‹åˆ°çš„å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ <code>string</code> åˆ—ï¼Œè‡ªç„¶ä¸ä¼šè¿›è¡Œ struct schema å¯¹é½ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿâ€œå…¨é›†å­—æ®µâ€ã€‚</p>
<h2 data-id="heading-4">å‚è€ƒ</h2>
<ol>
<li>ReTool-SFT-multi-turnç‰ˆæœ¬æ•°æ®é›†æ ¼å¼ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdatasets%2Fswordfaith%2FReTool-SFT-multi-turn" target="_blank" title="https://huggingface.co/datasets/swordfaith/ReTool-SFT-multi-turn" ref="nofollow noopener noreferrer">huggingface.co/datasets/swâ€¦</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ— ç•Œå¾®å‰ç«¯ï¼šçˆ¶å­åº”ç”¨é€šä¿¡ã€è·¯ç”±ä¸çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7577332659505840171</link>    <guid>https://juejin.cn/post/7577332659505840171</guid>    <pubDate>2025-11-28T02:51:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577332659505840171" data-draft-id="7577242285198655515" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ— ç•Œå¾®å‰ç«¯ï¼šçˆ¶å­åº”ç”¨é€šä¿¡ã€è·¯ç”±ä¸çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="å…¨æ ˆ,æ¶æ„,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-11-28T02:51:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ— ç•Œå¾®å‰ç«¯ï¼šçˆ¶å­åº”ç”¨é€šä¿¡ã€è·¯ç”±ä¸çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T02:51:32.000Z" title="Fri Nov 28 2025 02:51:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kimi.com%2Fpreview%2F19ac857c-c672-8c13-8000-053717bc1206" target="_blank" title="https://www.kimi.com/preview/19ac857c-c672-8c13-8000-053717bc1206" ref="nofollow noopener noreferrer">åŸºäºKimiçš„HTMLçŸ¥è¯†åˆ†äº«é¡µ</a></p>
<h2 data-id="heading-0">1. é€šä¿¡æœºåˆ¶ï¼šæ„å»ºçµæ´»é«˜æ•ˆçš„çˆ¶å­åº”ç”¨äº¤äº’</h2>
<p>åœ¨å¾®å‰ç«¯æ¶æ„ä¸­ï¼Œçˆ¶å­åº”ç”¨ä¹‹é—´çš„é€šä¿¡æ˜¯ç¡®ä¿ç³»ç»ŸååŒè¿ä½œã€æ•°æ®æµç•…é€šçš„æ ¸å¿ƒç¯èŠ‚ã€‚æ— ç•Œï¼ˆWujieï¼‰å¾®å‰ç«¯æ¡†æ¶ï¼Œå‡­å€Ÿå…¶åŸºäº <code>iframe</code> å’Œ <code>WebComponent</code> çš„ç‹¬ç‰¹è®¾è®¡ï¼Œä¸ºçˆ¶å­åº”ç”¨æä¾›äº†å¤šç§çµæ´»ã€é«˜æ•ˆä¸”è§£è€¦çš„é€šä¿¡æœºåˆ¶ã€‚è¿™äº›æœºåˆ¶ä¸ä»…è§£å†³äº†ä¼ ç»Ÿ <code>iframe</code> æ–¹æ¡ˆä¸­é€šä¿¡å›°éš¾ã€DOMéš”ç¦»ä¸¥é‡ç­‰é—®é¢˜ï¼Œè¿˜é€šè¿‡å»ä¸­å¿ƒåŒ–çš„è®¾è®¡ç†å¿µï¼Œèµ‹äºˆäº†å„ä¸ªå¾®åº”ç”¨æ›´é«˜çš„è‡ªä¸»æ€§å’Œçµæ´»æ€§ ã€‚æ— ç•Œæ¡†æ¶çš„æ ¸å¿ƒé€šä¿¡æ–¹å¼ä¸»è¦åŒ…æ‹¬ä¸‰ç§ï¼š<strong>Props æ³¨å…¥ã€Window å…±äº«ä»¥åŠ EventBus äº‹ä»¶æ€»çº¿</strong>ã€‚è¿™ä¸‰ç§æ–¹å¼å„æœ‰ä¾§é‡ï¼Œé€‚ç”¨äºä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼Œå…±åŒæ„å»ºäº†ä¸€ä¸ªç«‹ä½“åŒ–çš„é€šä¿¡ç½‘ç»œï¼Œä½¿å¾—ä¸»åº”ç”¨ä¸å­åº”ç”¨ä¹‹é—´ã€ä¹ƒè‡³å­åº”ç”¨ç›¸äº’ä¹‹é—´ï¼Œéƒ½èƒ½å®ç°ç²¾å‡†ã€é«˜æ•ˆçš„æ•°æ®äº¤æ¢ä¸æ–¹æ³•è°ƒç”¨ï¼Œä¸ºæ„å»ºå¤æ‚è€Œå¥å£®çš„å¾®å‰ç«¯ç³»ç»Ÿå¥ å®šäº†åšå®çš„åŸºç¡€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2c3b43bb16b4e9d879bf81b918a0879~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764903092&amp;x-signature=t3GGMGYETDIfDL3c6SwInZrRBws%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">1.1 æ ¸å¿ƒé€šä¿¡æ–¹å¼æ¦‚è§ˆ</h3>
<p>æ— ç•Œå¾®å‰ç«¯æ¡†æ¶ä¸ºçˆ¶å­åº”ç”¨é—´çš„äº¤äº’æä¾›äº†ä¸‰ç§æ ¸å¿ƒé€šä¿¡æœºåˆ¶ï¼Œæ—¨åœ¨æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„é€šä¿¡éœ€æ±‚ï¼Œä»ç›´æ¥çš„æ•°æ®ä¼ é€’åˆ°è§£è€¦çš„äº‹ä»¶é©±åŠ¨ï¼Œæ„å»ºäº†ä¸€ä¸ªçµæ´»ä¸”å¼ºå¤§çš„é€šä¿¡ä½“ç³»ã€‚è¿™äº›æœºåˆ¶çš„è®¾è®¡å……åˆ†åˆ©ç”¨äº†æ— ç•Œæ¡†æ¶çš„æŠ€æœ¯ç‰¹æ€§ï¼Œå¦‚ <code>iframe</code> çš„åŒæºç­–ç•¥å’Œ <code>WebComponent</code> çš„å°è£…èƒ½åŠ›ï¼Œç¡®ä¿äº†é€šä¿¡çš„ä¾¿æ·æ€§ä¸å®‰å…¨æ€§ ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a10bf46325e4aeda062868063a06061~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764903092&amp;x-signature=5EuJnJe4hctw6EdKpFQ5%2FZ5roRk%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-2">1.1.1 Props æ³¨å…¥ï¼šçˆ¶å‘å­çš„æ•°æ®ä¸æ–¹æ³•ä¼ é€’</h4>
<p>Props æ³¨å…¥æœºåˆ¶æ˜¯æ— ç•Œæ¡†æ¶ä¸­æœ€ç›´æ¥ã€æœ€å¸¸ç”¨çš„ä¸€ç§çˆ¶å‘å­é€šä¿¡æ–¹å¼ã€‚å…¶è®¾è®¡æ€æƒ³å€Ÿé‰´äº†ç°ä»£å‰ç«¯æ¡†æ¶ï¼ˆå¦‚ Vueã€Reactï¼‰ä¸­ç»„ä»¶é—´é€šè¿‡ Props ä¼ é€’æ•°æ®çš„ç†å¿µã€‚ä¸»åº”ç”¨åœ¨åŠ è½½å­åº”ç”¨æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code>props</code> å±æ€§ï¼Œå°†ä»»æ„ç±»å‹çš„æ•°æ®ï¼ˆåŒ…æ‹¬å¯¹è±¡ã€å­—ç¬¦ä¸²ã€æ•°å­—ç­‰ï¼‰æˆ–æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰æ³¨å…¥åˆ°å­åº”ç”¨ä¸­ã€‚å­åº”ç”¨åœ¨è¿è¡Œæ—¶ï¼Œå¯ä»¥é€šè¿‡æ— ç•Œæä¾›çš„å…¨å±€å¯¹è±¡ï¼ˆå¦‚ <code>window.$wujie.props</code>ï¼‰è½»æ¾è®¿é—®è¿™äº›æ³¨å…¥çš„æ•°æ®å’Œæ–¹æ³• ã€‚è¿™ç§æ–¹å¼çš„ä¼˜åŠ¿åœ¨äºå…¶ç›´è§‚æ€§å’Œç±»å‹å®‰å…¨æ€§ï¼Œçˆ¶åº”ç”¨å¯ä»¥ç²¾ç¡®æ§åˆ¶ä¼ é€’ç»™å­åº”ç”¨çš„æ•°æ®ï¼Œå­åº”ç”¨ä¹Ÿèƒ½æ¸…æ™°åœ°å®šä¹‰å…¶æ‰€éœ€çš„æ•°æ®æ¥å£ã€‚ä¾‹å¦‚ï¼Œä¸»åº”ç”¨å¯ä»¥å°†å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ã€å…¨å±€é…ç½®ã€æˆ–è€…ä¸€ä¸ªç”¨äºé€šçŸ¥ä¸»åº”ç”¨çŠ¶æ€å˜æ›´çš„å›è°ƒå‡½æ•°ï¼Œé€šè¿‡ <code>props</code> ä¼ é€’ç»™å­åº”ç”¨ï¼Œä»è€Œå®ç°å¯¹å­åº”ç”¨çš„åˆå§‹åŒ–å’Œè¡Œä¸ºæ§åˆ¶ã€‚</p>
<h4 data-id="heading-3">1.1.2 Window å…±äº«ï¼šåŒæºç¯å¢ƒä¸‹çš„ç›´æ¥é€šä¿¡</h4>
<p>æ— ç•Œæ¡†æ¶åˆ©ç”¨ <code>iframe</code> ä½œä¸ºå­åº”ç”¨çš„ JS æ²™ç®±ï¼Œå¹¶ä¸”è¿™ä¸ª <code>iframe</code> ä¸ä¸»åº”ç”¨æ˜¯åŒæºçš„ ã€‚è¿™ä¸€è®¾è®¡å¸¦æ¥äº†å·¨å¤§çš„é€šä¿¡ä¾¿åˆ©ï¼Œå³çˆ¶å­åº”ç”¨å¯ä»¥ç›´æ¥é€šè¿‡ <code>window</code> å¯¹è±¡è¿›è¡Œäº¤äº’ï¼Œæ— éœ€å¤æ‚çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–è¿‡ç¨‹ã€‚å­åº”ç”¨å¯ä»¥é€šè¿‡ <code>window.parent</code> ç›´æ¥è®¿é—®ä¸»åº”ç”¨çš„ <code>window</code> å¯¹è±¡ï¼Œä»è€Œè¯»å–ä¸»åº”ç”¨çš„å…¨å±€å˜é‡æˆ–è°ƒç”¨å…¶å…¨å±€æ–¹æ³•ã€‚åä¹‹ï¼Œä¸»åº”ç”¨ä¹Ÿå¯ä»¥é€šè¿‡è·å–å­åº”ç”¨ <code>iframe</code> çš„ <code>contentWindow</code> å¯¹è±¡ï¼Œæ¥è®¿é—®å­åº”ç”¨å†…éƒ¨çš„å…¨å±€å˜é‡å’Œæ–¹æ³• ã€‚è¿™ç§é€šä¿¡æ–¹å¼å‡ ä¹æ˜¯é›¶æˆæœ¬çš„ï¼Œæ€§èƒ½æé«˜ï¼Œéå¸¸é€‚åˆéœ€è¦é¢‘ç¹ã€å¿«é€Ÿäº¤æ¢ç®€å•æ•°æ®çš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œä¸»åº”ç”¨å¯ä»¥å°†ä¸€ä¸ªå…¨å±€çš„æ—¥å¿—è®°å½•å‡½æ•°æŒ‚è½½åœ¨ <code>window</code> ä¸Šï¼Œæ‰€æœ‰å­åº”ç”¨éƒ½å¯ä»¥ç›´æ¥è°ƒç”¨è¯¥å‡½æ•°ï¼Œå®ç°ç»Ÿä¸€çš„æ—¥å¿—ä¸ŠæŠ¥ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹å¼ä¹Ÿå­˜åœ¨ä¸€å®šçš„é£é™©ï¼Œè¿‡åº¦ä¾èµ–å…¨å±€å˜é‡å¯èƒ½å¯¼è‡´å‘½åå†²çªå’Œä»£ç è€¦åˆåº¦å¢åŠ ï¼Œå› æ­¤åœ¨ä½¿ç”¨æ—¶éœ€è¦è°¨æ…è§„åˆ’å…¨å±€å˜é‡çš„å‘½åç©ºé—´ã€‚</p>
<h4 data-id="heading-4">1.1.3 EventBusï¼šå»ä¸­å¿ƒåŒ–çš„äº‹ä»¶é©±åŠ¨é€šä¿¡</h4>
<p>ä¸ºäº†å®ç°åº”ç”¨é—´æ›´å½»åº•çš„è§£è€¦ï¼Œæ— ç•Œæ¡†æ¶å†…ç½®äº†ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„äº‹ä»¶æ€»çº¿ï¼ˆEventBusï¼‰ ã€‚è¿™ä¸ª EventBus å®ä¾‹ä¼šè¢«æ³¨å…¥åˆ°ä¸»åº”ç”¨å’Œæ‰€æœ‰å­åº”ç”¨ä¸­ï¼Œä½¿å¾—ä»»ä½•ä¸€ä¸ªåº”ç”¨éƒ½å¯ä»¥ä½œä¸ºäº‹ä»¶çš„å‘å¸ƒè€…æˆ–è®¢é˜…è€…ã€‚åº”ç”¨é—´ä¸å†ç›´æ¥ç›¸äº’è°ƒç”¨ï¼Œè€Œæ˜¯é€šè¿‡å‘é€å’Œç›‘å¬äº‹ä»¶æ¥è¿›è¡Œé€šä¿¡ã€‚ä¾‹å¦‚ï¼Œå­åº”ç”¨ A åœ¨å®ŒæˆæŸä¸ªæ“ä½œåï¼Œå¯ä»¥å‘å¸ƒä¸€ä¸ªåä¸º <code>task-completed</code> çš„äº‹ä»¶ï¼Œè€Œå…³å¿ƒè¿™ä¸ªäº‹ä»¶çš„ä¸»åº”ç”¨æˆ–å…¶ä»–å­åº”ç”¨ Bã€C åªéœ€æå‰è®¢é˜…è¯¥äº‹ä»¶ï¼Œå³å¯åœ¨äº‹ä»¶å‘ç”Ÿæ—¶æ¥æ”¶åˆ°é€šçŸ¥å¹¶æ‰§è¡Œç›¸åº”çš„é€»è¾‘ ã€‚è¿™ç§äº‹ä»¶é©±åŠ¨çš„æ¨¡å¼æå¤§åœ°é™ä½äº†åº”ç”¨é—´çš„è€¦åˆåº¦ï¼Œæ¯ä¸ªåº”ç”¨åªéœ€å…³å¿ƒè‡ªå·±æ„Ÿå…´è¶£çš„äº‹ä»¶ï¼Œè€Œæ— éœ€äº†è§£äº‹ä»¶æ˜¯ç”±è°å‘å‡ºçš„ã€‚EventBus æ˜¯å®ç°è·¨åº”ç”¨çŠ¶æ€åŒæ­¥ã€å¹¿æ’­é€šçŸ¥ã€ä»¥åŠæ„å»ºæ’ä»¶åŒ–æ¶æ„çš„ç†æƒ³é€‰æ‹©ï¼Œå®ƒä½¿å¾—å¾®å‰ç«¯ç³»ç»Ÿçš„æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§å¾—åˆ°äº†æ˜¾è‘—æå‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/191b2e258763478f966ed27a3a3a2137~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764903092&amp;x-signature=V3mEJ91Pdr%2FPWqgI2Fvspozn%2FT0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">1.2 é€šä¿¡æ–¹å¼è¯¦è§£ä¸æœ€ä½³å®è·µ</h3>
<p>æ— ç•Œå¾®å‰ç«¯æ¡†æ¶æä¾›çš„ä¸‰ç§æ ¸å¿ƒé€šä¿¡æœºåˆ¶â€”â€”Props æ³¨å…¥ã€Window å…±äº«å’Œ EventBusï¼Œå„è‡ªæ‹¥æœ‰ç‹¬ç‰¹çš„å®ç°æ–¹å¼å’Œé€‚ç”¨åœºæ™¯ã€‚æ·±å…¥ç†è§£å…¶å†…éƒ¨å·¥ä½œåŸç†å’Œæœ€ä½³å®è·µï¼Œå¯¹äºæ„å»ºé«˜æ•ˆã€ç¨³å®šã€å¯ç»´æŠ¤çš„å¾®å‰ç«¯ç³»ç»Ÿè‡³å…³é‡è¦ã€‚æœ¬ç« èŠ‚å°†å¯¹æ¯ç§é€šä¿¡æ–¹å¼è¿›è¡Œè¯¦ç»†è§£æï¼Œå¹¶ç»“åˆå®é™…ä»£ç ç¤ºä¾‹ï¼Œé˜è¿°å…¶åœ¨ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹çš„åº”ç”¨ç­–ç•¥å’Œæ³¨æ„äº‹é¡¹ï¼Œæ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›ä¸€å¥—å®Œæ•´çš„é€šä¿¡è§£å†³æ–¹æ¡ˆæŒ‡å—ã€‚</p>
<h4 data-id="heading-6">1.2.1 Props æ³¨å…¥æœºåˆ¶</h4>
<p>Props æ³¨å…¥æœºåˆ¶æ˜¯æ— ç•Œæ¡†æ¶ä¸­å®ç°çˆ¶å‘å­é€šä¿¡æœ€ç›´æ¥ã€æœ€æ¨èçš„æ–¹å¼ä¹‹ä¸€ã€‚å®ƒå€Ÿé‰´äº†ç°ä»£å‰ç«¯æ¡†æ¶çš„ç»„ä»¶åŒ–æ€æƒ³ï¼Œé€šè¿‡å£°æ˜å¼çš„æ–¹å¼å°†æ•°æ®å’Œæ–¹æ³•ä»ä¸»åº”ç”¨ä¼ é€’åˆ°å­åº”ç”¨ï¼Œä¿è¯äº†é€šä¿¡çš„æ¸…æ™°æ€§å’Œå¯æ§æ€§ã€‚è¿™ç§æ–¹å¼ä¸ä»…æ˜“äºç†è§£å’Œä½¿ç”¨ï¼Œè€Œä¸”åœ¨ç±»å‹å®‰å…¨å’Œä»£ç å¯ç»´æŠ¤æ€§æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œæ˜¯å®ç°çˆ¶å­åº”ç”¨é—´åˆå§‹åŒ–æ•°æ®ä¼ é€’å’Œå›è°ƒå‡½æ•°æ³¨å…¥çš„é¦–é€‰æ–¹æ¡ˆã€‚</p>
<h5 data-id="heading-7">1.2.1.1 ä¸»åº”ç”¨é…ç½®ä¸æ•°æ®æ³¨å…¥</h5>
<p>åœ¨ä¸»åº”ç”¨ä¸­ï¼Œä½¿ç”¨æ— ç•Œç»„ä»¶ï¼ˆå¦‚ <code>&lt;WujieVue&gt;</code> æˆ– <code>&lt;WujieReact&gt;</code>ï¼‰åŠ è½½å­åº”ç”¨æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code>props</code> å±æ€§æ¥æ³¨å…¥æ•°æ®å’Œæ–¹æ³•ã€‚è¿™ä¸ª <code>props</code> å¯¹è±¡å¯ä»¥åŒ…å«ä»»æ„ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€å¯¹è±¡ã€æ•°ç»„ï¼Œç”šè‡³æ˜¯å‡½æ•°ã€‚ä¸»åº”ç”¨å¯ä»¥å°†éœ€è¦å…±äº«ç»™å­åº”ç”¨çš„å…¨å±€çŠ¶æ€ã€é…ç½®ä¿¡æ¯ã€æˆ–è€…éœ€è¦å­åº”ç”¨è§¦å‘çš„å›è°ƒå‡½æ•°ï¼Œç»Ÿä¸€å°è£…åœ¨è¿™ä¸ª <code>props</code> å¯¹è±¡ä¸­ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ª Vue ä¸»åº”ç”¨ä¸­ï¼Œå¯ä»¥è¿™æ ·é…ç½®å­åº”ç”¨ ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;WujieVue
    name="micro-app"
    url="http://localhost:8080"
    :props="{
      userInfo: currentUser,
      theme: 'dark',
      onTaskComplete: handleTaskComplete
    }"
  /&gt;
&lt;/template&gt;

&lt;script&gt;
import WujieVue from 'wujie-vue3';

export default {
  components: { WujieVue },
  data() {
    return {
      currentUser: { id: 123, name: 'Alice' }
    };
  },
  methods: {
    handleTaskComplete(taskData) {
      console.log('å­åº”ç”¨ä»»åŠ¡å®Œæˆ:', taskData);
      // ä¸»åº”ç”¨å¯ä»¥åœ¨è¿™é‡Œæ›´æ–°çŠ¶æ€æˆ–æ‰§è¡Œå…¶ä»–é€»è¾‘
    }
  }
}
&lt;/script&gt;
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸»åº”ç”¨å‘åä¸º <code>micro-app</code> çš„å­åº”ç”¨æ³¨å…¥äº† <code>userInfo</code>ã€<code>theme</code> ä¸¤ä¸ªæ•°æ®é¡¹ï¼Œä»¥åŠä¸€ä¸ªåä¸º <code>onTaskComplete</code> çš„å›è°ƒå‡½æ•°ã€‚è¿™ç§æ–¹å¼ä½¿å¾—ä¸»åº”ç”¨å¯¹ä¼ é€’ç»™å­åº”ç”¨çš„æ•°æ®æ‹¥æœ‰å®Œå…¨çš„æ§åˆ¶æƒï¼Œå¹¶ä¸”å­åº”ç”¨çš„æ¥å£ä¹Ÿä¸€ç›®äº†ç„¶ã€‚</p>
<h5 data-id="heading-8">1.2.1.2 å­åº”ç”¨æ¥æ”¶ä¸è°ƒç”¨</h5>
<p>å­åº”ç”¨åœ¨å¯åŠ¨åï¼Œå¯ä»¥é€šè¿‡æ— ç•Œæ³¨å…¥çš„å…¨å±€å¯¹è±¡ <code>window.$wujie</code> æ¥è®¿é—®ä¸»åº”ç”¨ä¼ é€’çš„ <code>props</code>ã€‚å…·ä½“æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡ <code>window.$wujie.props</code> è·å–åˆ°æ•´ä¸ª <code>props</code> å¯¹è±¡ï¼Œç„¶ååƒè®¿é—®æ™®é€š JavaScript å¯¹è±¡çš„å±æ€§ä¸€æ ·ï¼Œè¯»å–æ•°æ®æˆ–è°ƒç”¨æ–¹æ³• ã€‚ä¾‹å¦‚ï¼Œåœ¨å­åº”ç”¨ä¸­ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨ä¸»åº”ç”¨æ³¨å…¥çš„æ•°æ®å’Œæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨å­åº”ç”¨çš„æŸä¸ªç»„ä»¶æˆ–é€»è¾‘ä¸­</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è·å–æ³¨å…¥çš„ç”¨æˆ·ä¿¡æ¯</span>
    <span class="hljs-keyword">const</span> userInfo = <span class="hljs-variable language_">window</span>.<span class="hljs-property">$wujie</span>?.<span class="hljs-property">props</span>?.<span class="hljs-property">userInfo</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰ç”¨æˆ·:'</span>, userInfo);

    <span class="hljs-comment">// è·å–æ³¨å…¥çš„ä¸»é¢˜é…ç½®</span>
    <span class="hljs-keyword">const</span> theme = <span class="hljs-variable language_">window</span>.<span class="hljs-property">$wujie</span>?.<span class="hljs-property">props</span>?.<span class="hljs-property">theme</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyTheme</span>(theme);
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">completeTask</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// ä»»åŠ¡å®Œæˆåï¼Œè°ƒç”¨ä¸»åº”ç”¨æ³¨å…¥çš„å›è°ƒå‡½æ•°</span>
      <span class="hljs-keyword">const</span> taskData = { <span class="hljs-attr">id</span>: <span class="hljs-number">456</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">'completed'</span> };
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">$wujie</span>?.<span class="hljs-property">props</span>?.<span class="hljs-title function_">onTaskComplete</span>(taskData);
    },
    <span class="hljs-title function_">applyTheme</span>(<span class="hljs-params">theme</span>) {
      <span class="hljs-comment">// æ ¹æ®ä¸»é¢˜é…ç½®æ›´æ–° UI</span>
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">className</span> = <span class="hljs-string">`theme-<span class="hljs-subst">${theme}</span>`</span>;
    }
  }
}
</code></pre>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå­åº”ç”¨å¯ä»¥æ¸…æ™°åœ°çŸ¥é“å“ªäº›æ•°æ®æ˜¯ç”±çˆ¶åº”ç”¨æä¾›çš„ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡è°ƒç”¨æ³¨å…¥çš„æ–¹æ³•ï¼Œå°†å†…éƒ¨å‘ç”Ÿçš„äº‹ä»¶æˆ–çŠ¶æ€å˜æ›´é€šçŸ¥ç»™ä¸»åº”ç”¨ï¼Œå®ç°äº†çˆ¶å­åº”ç”¨é—´çš„åŒå‘äº¤äº’ã€‚</p>
<h5 data-id="heading-9">1.2.1.3 é€‚ç”¨åœºæ™¯ï¼šåˆå§‹åŒ–æ•°æ®ã€å›è°ƒå‡½æ•°ä¼ é€’</h5>
<p>Props æ³¨å…¥æœºåˆ¶ç‰¹åˆ«é€‚ç”¨äºä»¥ä¸‹å‡ ç§åœºæ™¯ï¼š</p>
<ol>
<li><strong>åˆå§‹åŒ–æ•°æ®ä¼ é€’</strong>ï¼šå½“å­åº”ç”¨åŠ è½½æ—¶ï¼Œéœ€è¦ä¸€äº›åˆå§‹æ•°æ®æ‰èƒ½æ­£ç¡®æ¸²æŸ“ï¼Œä¾‹å¦‚ç”¨æˆ·ä¿¡æ¯ã€æƒé™é…ç½®ã€åº”ç”¨ä¸»é¢˜ç­‰ã€‚é€šè¿‡ <code>props</code> ä¼ é€’è¿™äº›æ•°æ®ï¼Œå¯ä»¥ç¡®ä¿å­åº”ç”¨åœ¨å¯åŠ¨æ—¶å°±æ‹¥æœ‰æ‰€éœ€çš„ä¸€åˆ‡ï¼Œé¿å…äº†é¢å¤–çš„å¼‚æ­¥è¯·æ±‚å’ŒçŠ¶æ€åŒæ­¥çš„å¤æ‚æ€§ã€‚</li>
<li><strong>å›è°ƒå‡½æ•°ä¼ é€’</strong>ï¼šä¸»åº”ç”¨å¯ä»¥å‘å­åº”ç”¨ä¼ é€’å›è°ƒå‡½æ•°ï¼Œå…è®¸å­åº”ç”¨åœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆå¦‚ç”¨æˆ·ç‚¹å‡»æŒ‰é’®ã€è¡¨å•æäº¤ã€ä»»åŠ¡å®Œæˆç­‰ï¼‰ä¸»åŠ¨è°ƒç”¨è¿™äº›å‡½æ•°ï¼Œä»è€Œå°†ä¿¡æ¯ä¼ é€’å›ä¸»åº”ç”¨ã€‚è¿™æ˜¯ä¸€ç§éå¸¸çµæ´»çš„åå‘é€šä¿¡æ–¹å¼ï¼Œç›¸æ¯”äºå­åº”ç”¨ç›´æ¥æ“ä½œä¸»åº”ç”¨çš„ <code>window</code> å¯¹è±¡ï¼Œè¿™ç§æ–¹å¼çš„è€¦åˆåº¦æ›´ä½ï¼Œé€»è¾‘æ›´æ¸…æ™°ã€‚</li>
<li><strong>é…ç½®åŒ–é©±åŠ¨</strong>ï¼šä¸»åº”ç”¨å¯ä»¥æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯æˆ–ç”¨æˆ·è§’è‰²ï¼ŒåŠ¨æ€åœ°å‘å­åº”ç”¨ä¼ é€’ä¸åŒçš„é…ç½®ï¼Œä»è€Œæ§åˆ¶å­åº”ç”¨çš„è¡Œä¸ºå’Œå±•ç¤ºã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæŠ¥è¡¨å­åº”ç”¨ï¼Œä¸»åº”ç”¨å¯ä»¥é€šè¿‡ <code>props</code> ä¼ é€’ä¸åŒçš„æŠ¥è¡¨ ID å’ŒæŸ¥è¯¢å‚æ•°ï¼Œä½¿å…¶å±•ç¤ºä¸åŒçš„æ•°æ®å†…å®¹ã€‚</li>
</ol>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒProps æ³¨å…¥æœºåˆ¶ä»¥å…¶æ¸…æ™°ã€å®‰å…¨ã€æ˜“ç»´æŠ¤çš„ç‰¹ç‚¹ï¼Œæˆä¸ºæ— ç•Œå¾®å‰ç«¯ä¸­çˆ¶å­é€šä¿¡çš„é¦–é€‰æ–¹æ¡ˆä¹‹ä¸€ï¼Œå°¤å…¶é€‚ç”¨äºéœ€è¦çˆ¶åº”ç”¨å¯¹å­åº”ç”¨è¿›è¡Œåˆå§‹åŒ–å’Œè¡Œä¸ºæ§åˆ¶çš„åœºæ™¯ã€‚</p>
<h4 data-id="heading-10">1.2.2 Window å…±äº«æœºåˆ¶</h4>
<p>æ— ç•Œæ¡†æ¶å·§å¦™åœ°åˆ©ç”¨äº† <code>iframe</code> çš„åŒæºç­–ç•¥ï¼Œä¸ºçˆ¶å­åº”ç”¨æä¾›äº†ä¸€ç§è¿‘ä¹åŸç”Ÿçš„ã€é«˜æ€§èƒ½çš„é€šä¿¡æ–¹å¼â€”â€”Window å…±äº«ã€‚ç”±äºæ‰¿è½½å­åº”ç”¨çš„ <code>iframe</code> ä¸ä¸»åº”ç”¨å¤„äºåŒä¸€ä¸ªæºï¼ˆSame-Originï¼‰ä¸‹ï¼Œå®ƒä»¬ä¹‹é—´å¯ä»¥ç›´æ¥é€šè¿‡ <code>window</code> å¯¹è±¡è¿›è¡Œäº¤äº’ï¼Œæ— éœ€å€ŸåŠ© <code>postMessage</code> ç­‰è·¨åŸŸé€šä¿¡æ‰‹æ®µï¼Œä»è€Œé¿å…äº†æ•°æ®åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å¼€é”€ï¼Œå®ç°äº†çœŸæ­£çš„â€œæ— ç•Œâ€é€šä¿¡ ã€‚è¿™ç§æœºåˆ¶è™½ç„¶å¼ºå¤§ä¸”ä¾¿æ·ï¼Œä½†ä¹Ÿéœ€è¦å¼€å‘è€…è°¨æ…ä½¿ç”¨ï¼Œä»¥é¿å…å…¨å±€å‘½åç©ºé—´çš„æ±¡æŸ“å’Œä»£ç çš„è¿‡åº¦è€¦åˆã€‚</p>
<h5 data-id="heading-11">1.2.2.1 ä¸»åº”ç”¨è®¿é—®å­åº”ç”¨å…¨å±€å˜é‡</h5>
<p>ä¸»åº”ç”¨å¯ä»¥é€šè¿‡è·å–å­åº”ç”¨ <code>iframe</code> çš„ <code>contentWindow</code> å¯¹è±¡ï¼Œæ¥ç›´æ¥è®¿é—®å’Œæ“ä½œå­åº”ç”¨å†…éƒ¨çš„å…¨å±€å˜é‡å’Œæ–¹æ³•ã€‚æ— ç•Œæ¡†æ¶ä¸ºæ¯ä¸ªå­åº”ç”¨çš„ <code>iframe</code> è®¾ç½®äº†å”¯ä¸€çš„ <code>name</code> å±æ€§ï¼Œä¸»åº”ç”¨å¯ä»¥é€šè¿‡è¿™ä¸ª <code>name</code> æ¥å®šä½åˆ°ç‰¹å®šçš„ <code>iframe</code>ï¼Œè¿›è€Œè®¿é—®å…¶ <code>contentWindow</code> ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ä¸»åº”ç”¨ä¸­</span>
<span class="hljs-comment">// å‡è®¾å­åº”ç”¨çš„ name å±æ€§è¢«è®¾ç½®ä¸º 'micro-app-1'</span>
<span class="hljs-keyword">const</span> microAppIframe = <span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'iframe[name=micro-app-1]'</span>);
<span class="hljs-keyword">if</span> (microAppIframe) {
  <span class="hljs-keyword">const</span> microAppWindow = microAppIframe.<span class="hljs-property">contentWindow</span>;
  
  <span class="hljs-comment">// è®¿é—®å­åº”ç”¨çš„å…¨å±€å˜é‡</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­åº”ç”¨çš„å…¨å±€å˜é‡:'</span>, microAppWindow.<span class="hljs-property">someGlobalVariable</span>);
  
  <span class="hljs-comment">// è°ƒç”¨å­åº”ç”¨çš„å…¨å±€æ–¹æ³•</span>
  microAppWindow.<span class="hljs-title function_">someGlobalMethod</span>(<span class="hljs-string">'æ¥è‡ªä¸»åº”ç”¨çš„æ•°æ®'</span>);
}
</code></pre>
<p>è¿™ç§æ–¹å¼ä½¿å¾—ä¸»åº”ç”¨èƒ½å¤Ÿä¸»åŠ¨ã€ç›´æ¥åœ°è·å–å­åº”ç”¨çš„å†…éƒ¨çŠ¶æ€æˆ–è§¦å‘å…¶è¡Œä¸ºï¼Œé€‚ç”¨äºä¸»åº”ç”¨éœ€è¦ç›‘æ§æˆ–ç®¡ç†å­åº”ç”¨ç‰¹å®šè¡Œä¸ºçš„åœºæ™¯ã€‚ç„¶è€Œï¼Œè¿‡åº¦ä¾èµ–è¿™ç§ç›´æ¥è®¿é—®ä¼šç ´åå­åº”ç”¨çš„å°è£…æ€§ï¼Œå¢åŠ ä¸»åº”ç”¨ä¸å­åº”ç”¨ä¹‹é—´çš„è€¦åˆåº¦ï¼Œå› æ­¤åº”è°¨æ…ä½¿ç”¨ã€‚</p>
<h5 data-id="heading-12">1.2.2.2 å­åº”ç”¨è®¿é—®ä¸»åº”ç”¨å…¨å±€å˜é‡</h5>
<p>ä¸ä¸»åº”ç”¨è®¿é—®å­åº”ç”¨ç±»ä¼¼ï¼Œå­åº”ç”¨ä¹Ÿå¯ä»¥é€šè¿‡ <code>window.parent</code> å¯¹è±¡ç›´æ¥è®¿é—®ä¸»åº”ç”¨çš„ <code>window</code> å¯¹è±¡ï¼Œä»è€Œè¯»å–ä¸»åº”ç”¨çš„å…¨å±€å˜é‡æˆ–è°ƒç”¨å…¶å…¨å±€æ–¹æ³• ã€‚è¿™ç§æ–¹å¼åœ¨å­åº”ç”¨ä¸­å®ç°èµ·æ¥éå¸¸ç®€å•ç›´æ¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨å­åº”ç”¨ä¸­</span>
<span class="hljs-comment">// è®¿é—®ä¸»åº”ç”¨çš„å…¨å±€å˜é‡</span>
<span class="hljs-keyword">const</span> mainAppGlobalData = <span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-property">someGlobalData</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸»åº”ç”¨çš„å…¨å±€æ•°æ®:'</span>, mainAppGlobalData);

<span class="hljs-comment">// è°ƒç”¨ä¸»åº”ç”¨çš„å…¨å±€æ–¹æ³•</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">someGlobalFunction</span>(<span class="hljs-string">'æ¥è‡ªå­åº”ç”¨çš„æ•°æ®'</span>);
</code></pre>
<p>è¿™ç§é€šä¿¡æ–¹å¼çš„æ€§èƒ½æé«˜ï¼Œå› ä¸ºå®ƒä»…ä»…æ˜¯å†…å­˜ä¸­çš„å¯¹è±¡å¼•ç”¨è®¿é—®ã€‚å®ƒéå¸¸é€‚åˆå­åº”ç”¨éœ€è¦è·å–ä¸»åº”ç”¨çš„å…±äº«æœåŠ¡ï¼ˆå¦‚å…¨å±€çš„æ—¥å¿—æœåŠ¡ã€é…ç½®æœåŠ¡ã€ç”¨æˆ·è®¤è¯æœåŠ¡ç­‰ï¼‰çš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œä¸»åº”ç”¨å¯ä»¥å°†ä¸€ä¸ªç»Ÿä¸€çš„ <code>axios</code> å®ä¾‹æˆ–ä¸€ä¸ªå…¨å±€çš„äº‹ä»¶æ€»çº¿æŒ‚è½½åœ¨ <code>window</code> ä¸Šï¼Œæ‰€æœ‰å­åº”ç”¨éƒ½å¯ä»¥ç›´æ¥å¤ç”¨è¿™äº›å®ä¾‹ï¼Œé¿å…äº†é‡å¤åˆ›å»ºå’Œèµ„æºæµªè´¹ã€‚</p>
<h5 data-id="heading-13">1.2.2.3 é€‚ç”¨åœºæ™¯ï¼šç®€å•æ•°æ®å…±äº«ä¸å¿«é€Ÿè°ƒè¯•</h5>
<p>Window å…±äº«æœºåˆ¶è™½ç„¶å¼ºå¤§ï¼Œä½†å…¶â€œå…¨å±€æ€§â€ä¹Ÿå¸¦æ¥äº†æ½œåœ¨çš„é£é™©ã€‚å› æ­¤ï¼Œå®ƒæœ€é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li><strong>ç®€å•æ•°æ®å…±äº«</strong>ï¼šå½“éœ€è¦åœ¨çˆ¶å­åº”ç”¨é—´å…±äº«ä¸€äº›ç®€å•çš„ã€ä¸ç»å¸¸å˜åŒ–çš„å…¨å±€å¸¸é‡æˆ–é…ç½®æ—¶ï¼Œä½¿ç”¨ <code>window</code> å…±äº«æ˜¯ä¸€ç§é«˜æ•ˆçš„é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œå…±äº«åº”ç”¨çš„ç‰ˆæœ¬å·ã€ç¯å¢ƒæ ‡è¯†ç­‰ã€‚</li>
<li><strong>å…±äº«å·¥å…·å‡½æ•°/æœåŠ¡</strong>ï¼šä¸»åº”ç”¨å¯ä»¥å°†ä¸€äº›é€šç”¨çš„å·¥å…·å‡½æ•°ã€API è¯·æ±‚åº“ã€æˆ–å…¨å±€çŠ¶æ€ç®¡ç†å®ä¾‹ï¼ˆå¦‚ä¸€ä¸ªå…¨å±€çš„ EventBusï¼‰æŒ‚è½½åœ¨ <code>window</code> ä¸Šï¼Œä¾›æ‰€æœ‰å­åº”ç”¨å¤ç”¨ã€‚è¿™æœ‰åŠ©äºå‡å°‘ä»£ç å†—ä½™ï¼Œä¿æŒå·¥å…·åº“ç‰ˆæœ¬çš„ä¸€è‡´æ€§ã€‚</li>
<li><strong>å¿«é€Ÿè°ƒè¯•</strong>ï¼šåœ¨å¼€å‘å’Œè°ƒè¯•é˜¶æ®µï¼Œé€šè¿‡ <code>window</code> å¯¹è±¡ç›´æ¥è®¿é—®å’Œä¿®æ”¹çˆ¶å­åº”ç”¨çš„çŠ¶æ€ï¼Œå¯ä»¥å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œåœ¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ä¸­ï¼Œå¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å°é€šè¿‡ <code>window.parent</code> æˆ– <code>iframe.contentWindow</code> æ¥æ“ä½œåº”ç”¨ï¼Œæå¤§åœ°æé«˜äº†è°ƒè¯•æ•ˆç‡ã€‚</li>
<li><strong>é—ç•™ç³»ç»Ÿé›†æˆ</strong>ï¼šå¯¹äºä¸€äº›æ— æ³•æˆ–ä¸ä¾¿è¿›è¡Œå¤§è§„æ¨¡æ”¹é€ çš„é—ç•™ç³»ç»Ÿï¼Œå¦‚æœå®ƒä»¬å·²ç»ä¾èµ–äº†æŸäº›å…¨å±€å˜é‡ï¼Œé€šè¿‡ <code>window</code> å…±äº«æœºåˆ¶å¯ä»¥æ–¹ä¾¿åœ°å°†è¿™äº›ç³»ç»Ÿé›†æˆåˆ°å¾®å‰ç«¯æ¶æ„ä¸­ï¼Œè€Œæ— éœ€ä¿®æ”¹å…¶å†…éƒ¨ä»£ç ã€‚</li>
</ol>
<p><strong>æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li><strong>å‘½åç©ºé—´ç®¡ç†</strong>ï¼šä¸ºäº†é¿å…å…¨å±€å˜é‡åå†²çªï¼Œå¼ºçƒˆå»ºè®®ä¸ºæ‰€æœ‰å…±äº«åœ¨ <code>window</code> ä¸Šçš„å˜é‡å’Œæ–¹æ³•å®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„ã€å…·æœ‰è¾¨è¯†åº¦çš„å‘½åç©ºé—´ï¼Œä¾‹å¦‚ <code>window.MyMicroFrontendGlobal</code>ã€‚</li>
<li><strong>æœ€å°åŒ–å…±äº«</strong>ï¼šåªå…±äº«é‚£äº›çœŸæ­£éœ€è¦å…¨å±€è®¿é—®çš„ã€ç¨³å®šçš„æ•°æ®æˆ–æœåŠ¡ã€‚é¿å…å°†ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„ã€é¢‘ç¹å˜åŒ–çš„çŠ¶æ€æ”¾åœ¨ <code>window</code> ä¸Šã€‚</li>
<li><strong>æ–‡æ¡£åŒ–</strong>ï¼šæ¸…æ™°åœ°è®°å½•å“ªäº›å˜é‡å’Œæ–¹æ³•è¢«å…±äº«åœ¨ <code>window</code> ä¸Šï¼Œä»¥åŠå®ƒä»¬çš„ç”¨é€”å’Œä½¿ç”¨æ–¹å¼ï¼Œè¿™å¯¹äºå›¢é˜Ÿåä½œå’Œç³»ç»Ÿç»´æŠ¤è‡³å…³é‡è¦ã€‚</li>
</ul>
<p>æ€»ä¹‹ï¼ŒWindow å…±äº«æœºåˆ¶æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚åœ¨äº«å—å…¶å¸¦æ¥çš„é«˜æ€§èƒ½å’Œä¾¿æ·æ€§çš„åŒæ—¶ï¼Œå¿…é¡»æ¸…é†’åœ°è®¤è¯†åˆ°å…¶æ½œåœ¨çš„é£é™©ï¼Œå¹¶é€šè¿‡è‰¯å¥½çš„å·¥ç¨‹å®è·µæ¥è§„é¿è¿™äº›é—®é¢˜ï¼Œä½¿å…¶æˆä¸ºå¾®å‰ç«¯é€šä¿¡ä½“ç³»ä¸­çš„æœ‰åŠ›è¡¥å……ã€‚</p>
<h4 data-id="heading-14">1.2.3 EventBus æœºåˆ¶</h4>
<p>EventBusï¼ˆäº‹ä»¶æ€»çº¿ï¼‰æ˜¯æ— ç•Œå¾®å‰ç«¯æ¡†æ¶ä¸­å®ç°åº”ç”¨é—´è§£è€¦é€šä¿¡çš„æ ¸å¿ƒæœºåˆ¶ã€‚å®ƒé‡‡ç”¨å‘å¸ƒ-è®¢é˜…ï¼ˆPublish-Subscribeï¼‰æ¨¡å¼ï¼Œæä¾›äº†ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„é€šä¿¡æ¸ é“ï¼Œä½¿å¾—ä¸»åº”ç”¨å’Œå„ä¸ªå­åº”ç”¨éƒ½å¯ä»¥ä½œä¸ºç‹¬ç«‹çš„äº‹ä»¶å‘å¸ƒè€…æˆ–ç›‘å¬è€… ã€‚é€šè¿‡ EventBusï¼Œåº”ç”¨ä¹‹é—´ä¸å†éœ€è¦è¿›è¡Œç›´æ¥çš„å‡½æ•°è°ƒç”¨æˆ–å¯¹è±¡å¼•ç”¨ï¼Œè€Œæ˜¯é€šè¿‡å‘é€å’Œç›‘å¬äº‹ä»¶æ¥è¿›è¡Œåä½œã€‚è¿™ç§æ¾è€¦åˆçš„é€šä¿¡æ–¹å¼æå¤§åœ°æå‡äº†å¾®å‰ç«¯ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæ˜¯å®ç°è·¨åº”ç”¨çŠ¶æ€åŒæ­¥ã€å¹¿æ’­é€šçŸ¥å’Œæ„å»ºæ’ä»¶åŒ–æ¶æ„çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<h5 data-id="heading-15">1.2.3.1 ä¸»åº”ç”¨äº‹ä»¶ç›‘å¬ä¸è§¦å‘</h5>
<p>æ— ç•Œæ¡†æ¶ä¼šå°†ä¸€ä¸ª EventBus å®ä¾‹æ³¨å…¥åˆ°ä¸»åº”ç”¨ä¸­ï¼Œä¸»åº”ç”¨å¯ä»¥é€šè¿‡å¼•å…¥è¯¥å®ä¾‹æ¥è¿›è¡Œäº‹ä»¶çš„ç›‘å¬å’Œè§¦å‘ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨ <code>wujie-vue</code> çš„ä¸»åº”ç”¨ä¸­ï¼Œå¯ä»¥è¿™æ ·æ“ä½œ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ä¸»åº”ç”¨ä¸­ (ä¾‹å¦‚ main.js æˆ–æŸä¸ªç»„ä»¶ä¸­)</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">WujieVue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'wujie-vue'</span>;
<span class="hljs-keyword">const</span> { bus } = <span class="hljs-title class_">WujieVue</span>;

<span class="hljs-comment">// ç›‘å¬ä¸€ä¸ªäº‹ä»¶</span>
bus.$on(<span class="hljs-string">'user-logged-in'</span>, <span class="hljs-function">(<span class="hljs-params">userData</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸»åº”ç”¨æ”¶åˆ°ç”¨æˆ·ç™»å½•äº‹ä»¶:'</span>, userData);
  <span class="hljs-comment">// ä¸»åº”ç”¨å¯ä»¥åœ¨è¿™é‡Œæ›´æ–°å…¨å±€çŠ¶æ€ï¼Œæˆ–è€…é€šçŸ¥å…¶ä»–å­åº”ç”¨</span>
});

<span class="hljs-comment">// è§¦å‘ä¸€ä¸ªäº‹ä»¶</span>
bus.$emit(<span class="hljs-string">'global-theme-changed'</span>, <span class="hljs-string">'dark'</span>);
</code></pre>
<p>ä¸»åº”ç”¨å¯ä»¥åˆ©ç”¨ EventBus æ¥å¹¿æ’­å…¨å±€äº‹ä»¶ï¼Œä¾‹å¦‚ä¸»é¢˜åˆ‡æ¢ã€è¯­è¨€å˜æ›´ã€ç”¨æˆ·ç™»å½•/ç™»å‡ºç­‰ã€‚æ‰€æœ‰å…³å¿ƒè¿™äº›äº‹ä»¶çš„å­åº”ç”¨åªéœ€ç›‘å¬ç›¸åº”çš„äº‹ä»¶åï¼Œå³å¯åœ¨äº‹ä»¶å‘ç”Ÿæ—¶åšå‡ºå“åº”ï¼Œè€Œæ— éœ€å…³å¿ƒäº‹ä»¶æ˜¯ç”±è°å‘å‡ºçš„ã€‚</p>
<h5 data-id="heading-16">1.2.3.2 å­åº”ç”¨äº‹ä»¶ç›‘å¬ä¸è§¦å‘</h5>
<p>åŒæ ·åœ°ï¼Œæ— ç•Œä¹Ÿä¼šå°† EventBus å®ä¾‹æ³¨å…¥åˆ°æ¯ä¸ªå­åº”ç”¨ä¸­ã€‚å­åº”ç”¨å¯ä»¥é€šè¿‡ <code>window.$wujie.bus</code> æ¥è®¿é—®è¿™ä¸ªå®ä¾‹ï¼Œå¹¶è¿›è¡Œäº‹ä»¶çš„ç›‘å¬å’Œè§¦å‘ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨å­åº”ç”¨ä¸­</span>
<span class="hljs-comment">// ç›‘å¬ä¸»åº”ç”¨æˆ–å…¶ä»–å­åº”ç”¨å‘å‡ºçš„äº‹ä»¶</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">$wujie</span>?.<span class="hljs-property">bus</span>.$on(<span class="hljs-string">'global-theme-changed'</span>, <span class="hljs-function">(<span class="hljs-params">theme</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­åº”ç”¨æ”¶åˆ°ä¸»é¢˜å˜æ›´äº‹ä»¶:'</span>, theme);
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyTheme</span>(theme);
});

<span class="hljs-comment">// å­åº”ç”¨å‘ä¸»åº”ç”¨æˆ–å…¶ä»–å­åº”ç”¨å‘é€äº‹ä»¶</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">$wujie</span>?.<span class="hljs-property">bus</span>.$emit(<span class="hljs-string">'user-logged-in'</span>, { <span class="hljs-attr">userId</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">username</span>: <span class="hljs-string">'Alice'</span> });

<span class="hljs-comment">// åœ¨ç»„ä»¶é”€æ¯æ—¶ï¼Œè®°å¾—å–æ¶ˆäº‹ä»¶ç›‘å¬ï¼Œä»¥é¿å…å†…å­˜æ³„æ¼</span>
<span class="hljs-comment">// beforeDestroy() {</span>
<span class="hljs-comment">//   window.$wujie?.bus.$off('global-theme-changed');</span>
<span class="hljs-comment">// }</span>
</code></pre>
<p>é€šè¿‡ EventBusï¼Œå­åº”ç”¨å¯ä»¥ä¸»åŠ¨å°†è‡ªå·±çš„çŠ¶æ€å˜æ›´æˆ–å‘ç”Ÿçš„äº‹ä»¶é€šçŸ¥ç»™ç³»ç»Ÿä¸­çš„å…¶ä»–éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨æˆ·ç®¡ç†å­åº”ç”¨å¯ä»¥åœ¨ç”¨æˆ·åˆ›å»ºæˆåŠŸåï¼Œå‘å¸ƒä¸€ä¸ª <code>user-created</code> äº‹ä»¶ï¼Œè€Œä¸€ä¸ªè´Ÿè´£å‘é€æ¬¢è¿é‚®ä»¶çš„å­åº”ç”¨å¯ä»¥ç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œå¹¶åœ¨æ”¶åˆ°é€šçŸ¥åæ‰§è¡Œå‘é€é‚®ä»¶çš„é€»è¾‘ã€‚è¿™ç§è§£è€¦çš„åä½œæ–¹å¼ï¼Œä½¿å¾—å„ä¸ªå¾®åº”ç”¨å¯ä»¥ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²ï¼Œè€Œä¸ä¼šç›¸äº’å½±å“ã€‚</p>
<h5 data-id="heading-17">1.2.3.3 é€‚ç”¨åœºæ™¯ï¼šè·¨åº”ç”¨çŠ¶æ€åŒæ­¥ã€è§£è€¦ä¸šåŠ¡é€»è¾‘</h5>
<p>EventBus æœºåˆ¶åœ¨ä»¥ä¸‹åœºæ™¯ä¸­è¡¨ç°å‡ºè‰²ï¼š</p>
<ol>
<li><strong>è·¨åº”ç”¨çŠ¶æ€åŒæ­¥</strong>ï¼šå½“å¤šä¸ªåº”ç”¨éœ€è¦å…±äº«æŸä¸ªçŠ¶æ€ï¼ˆå¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ã€å…¨å±€ä¸»é¢˜ã€åº”ç”¨é…ç½®ç­‰ï¼‰æ—¶ï¼Œå¯ä»¥é€šè¿‡ EventBus æ¥å¹¿æ’­çŠ¶æ€çš„å˜æ›´ã€‚ä»»ä½•ä¸€ä¸ªåº”ç”¨ä¿®æ”¹äº†è¯¥çŠ¶æ€ï¼Œéƒ½ä¼šå‘å¸ƒä¸€ä¸ªç›¸åº”çš„äº‹ä»¶ï¼Œå…¶ä»–åº”ç”¨ç›‘å¬è¯¥äº‹ä»¶å¹¶æ›´æ–°è‡ªå·±çš„æœ¬åœ°çŠ¶æ€ï¼Œä»è€Œå®ç°çŠ¶æ€çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</li>
<li><strong>è§£è€¦ä¸šåŠ¡é€»è¾‘</strong>ï¼šåœ¨å¤æ‚çš„ä¸šåŠ¡æµç¨‹ä¸­ï¼Œä¸€ä¸ªæ“ä½œå¯èƒ½ä¼šè§¦å‘å¤šä¸ªåç»­åŠ¨ä½œã€‚ä½¿ç”¨ EventBusï¼Œå¯ä»¥å°†è¿™äº›åŠ¨ä½œçš„æ‰§è¡Œè€…ï¼ˆå­åº”ç”¨ï¼‰ä¸è§¦å‘è€…ï¼ˆä¸»åº”ç”¨æˆ–å…¶ä»–å­åº”ç”¨ï¼‰è§£è€¦ã€‚è§¦å‘è€…åªéœ€å‘å¸ƒä¸€ä¸ªäº‹ä»¶ï¼Œè€Œæ— éœ€å…³å¿ƒåç»­æœ‰å“ªäº›åŠ¨ä½œéœ€è¦æ‰§è¡Œï¼Œä»¥åŠç”±è°æ¥æ‰§è¡Œã€‚</li>
<li><strong>æ„å»ºæ’ä»¶åŒ–æ¶æ„</strong>ï¼šEventBus æ˜¯å®ç°æ’ä»¶åŒ–æ¶æ„çš„ç†æƒ³å·¥å…·ã€‚ä¸»åº”ç”¨å¯ä»¥å®šä¹‰ä¸€å¥—æ ‡å‡†çš„äº‹ä»¶æ¥å£ï¼Œæ’ä»¶ï¼ˆå­åº”ç”¨ï¼‰å¯ä»¥é€šè¿‡ç›‘å¬è¿™äº›äº‹ä»¶æ¥ä»‹å…¥ä¸»åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸæˆ–ä¸šåŠ¡æµç¨‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘å¸ƒäº‹ä»¶æ¥å‘ä¸»åº”ç”¨æä¾›åŠŸèƒ½ã€‚</li>
<li><strong>å¹¿æ’­é€šçŸ¥</strong>ï¼šå½“éœ€è¦å‘æ‰€æœ‰æˆ–éƒ¨åˆ†åº”ç”¨å‘é€é€šçŸ¥æ—¶ï¼ˆä¾‹å¦‚ï¼Œç³»ç»Ÿå³å°†ç»´æŠ¤ï¼Œéœ€è¦æ‰€æœ‰ç”¨æˆ·ä¿å­˜å½“å‰å·¥ä½œï¼‰ï¼Œå¯ä»¥é€šè¿‡ EventBus å¹¿æ’­ä¸€ä¸ªé€šçŸ¥äº‹ä»¶ï¼Œæ‰€æœ‰åœ¨çº¿çš„åº”ç”¨éƒ½èƒ½æ”¶åˆ°å¹¶åšå‡ºç›¸åº”æç¤ºã€‚</li>
</ol>
<p><strong>æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li><strong>äº‹ä»¶å‘½åè§„èŒƒ</strong>ï¼šä¸ºäº†é¿å…äº‹ä»¶åå†²çªï¼Œå»ºè®®é‡‡ç”¨å¸¦æœ‰å‘½åç©ºé—´çš„ã€è¯­ä¹‰åŒ–çš„äº‹ä»¶åï¼Œä¾‹å¦‚ <code>app-name:event-name</code>ã€‚</li>
<li><strong>äº‹ä»¶è´Ÿè½½ï¼ˆPayloadï¼‰</strong> ï¼šäº‹ä»¶ä¼ é€’çš„æ•°æ®ï¼ˆè´Ÿè½½ï¼‰åº”å°½é‡ä¿æŒç®€æ´ï¼ŒåªåŒ…å«å¿…è¦çš„ä¿¡æ¯ã€‚é¿å…ä¼ é€’å¤§å‹å¯¹è±¡æˆ–å¤æ‚çš„ç»“æ„ï¼Œä»¥å‡å°‘æ€§èƒ½å¼€é”€ã€‚</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šåœ¨å­åº”ç”¨ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨ç»„ä»¶åŒ–çš„æ¡†æ¶ï¼ˆå¦‚ Vueã€Reactï¼‰ä¸­ï¼ŒåŠ¡å¿…åœ¨ç»„ä»¶å¸è½½æ—¶ï¼ˆå¦‚ <code>beforeDestroy</code> æˆ– <code>useEffect</code> çš„ cleanup å‡½æ•°ä¸­ï¼‰å–æ¶ˆäº‹ä»¶ç›‘å¬ï¼Œä»¥é˜²æ­¢å†…å­˜æ³„æ¼ã€‚</li>
<li><strong>æ–‡æ¡£åŒ–</strong>ï¼šç»´æŠ¤ä¸€ä»½æ¸…æ™°çš„äº‹ä»¶æ–‡æ¡£ï¼Œåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„äº‹ä»¶åã€å…¶è§¦å‘æ—¶æœºã€ä»¥åŠè´Ÿè½½çš„æ•°æ®ç»“æ„ï¼Œè¿™å¯¹äºå›¢é˜Ÿåä½œå’Œç³»ç»Ÿé›†æˆè‡³å…³é‡è¦ã€‚</li>
</ul>
<p>ç»¼ä¸Šæ‰€è¿°ï¼ŒEventBus æœºåˆ¶é€šè¿‡å…¶å¼ºå¤§çš„è§£è€¦èƒ½åŠ›ï¼Œä¸ºæ— ç•Œå¾®å‰ç«¯ç³»ç»Ÿæä¾›äº†ä¸€ç§çµæ´»ã€å¯æ‰©å±•çš„é€šä¿¡æ–¹å¼ï¼Œæ˜¯å®ç°å¤æ‚å¾®å‰ç«¯åº”ç”¨ä¸å¯æˆ–ç¼ºçš„æ ¸å¿ƒå·¥å…·ã€‚</p>
<h3 data-id="heading-18">1.3 é€šä¿¡æ¨¡å¼é€‰å‹ä¸é«˜çº§å®è·µ</h3>
<p>åœ¨æŒæ¡äº†æ— ç•Œå¾®å‰ç«¯æä¾›çš„ä¸‰ç§æ ¸å¿ƒé€šä¿¡æœºåˆ¶ï¼ˆProps æ³¨å…¥ã€Window å…±äº«ã€EventBusï¼‰ä¹‹åï¼Œå¦‚ä½•æ ¹æ®å…·ä½“çš„ä¸šåŠ¡åœºæ™¯è¿›è¡Œåˆç†çš„é€‰å‹ï¼Œå¹¶éµå¾ªæœ€ä½³å®è·µæ¥æ„å»ºå¥å£®ã€é«˜æ•ˆçš„é€šä¿¡ä½“ç³»ï¼Œæ˜¯å¾®å‰ç«¯æ¶æ„æˆåŠŸçš„å…³é”®ã€‚æœ¬ç« èŠ‚å°†å¯¹è¿™ä¸‰ç§é€šä¿¡æ–¹å¼è¿›è¡Œæ·±å…¥çš„å¯¹æ¯”åˆ†æï¼Œå¹¶æä¾›å…³äºé€šä¿¡å®‰å…¨æ€§ã€æ€§èƒ½ä¼˜åŒ–ä»¥åŠæ•…éšœå¤„ç†çš„é«˜çº§å®è·µæŒ‡å—ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…åšå‡ºæ˜æ™ºçš„æŠ€æœ¯å†³ç­–ï¼Œå¹¶è§„é¿æ½œåœ¨çš„é™·é˜±ã€‚</p>
<h4 data-id="heading-19">1.3.1 é€šä¿¡æ–¹å¼å¯¹æ¯”ä¸é€‰æ‹©</h4>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°æ¯”è¾ƒä¸‰ç§é€šä¿¡æ–¹å¼çš„ç‰¹æ€§ï¼Œä¸‹è¡¨ä»å¤šä¸ªç»´åº¦è¿›è¡Œäº†æ€»ç»“ï¼š</p>





















































<table><thead><tr><th align="left">ç‰¹æ€§ç»´åº¦</th><th align="left">Props æ³¨å…¥</th><th align="left">Window å…±äº«</th><th align="left">EventBus</th></tr></thead><tbody><tr><td align="left"><strong>é€šä¿¡æ–¹å‘</strong></td><td align="left">çˆ¶ -&gt; å­ï¼ˆå•å‘æ•°æ®æµï¼Œä½†å¯é€šè¿‡å›è°ƒå‡½æ•°å®ç°åå‘é€šçŸ¥ï¼‰</td><td align="left">çˆ¶ &lt;-&gt; å­ï¼ˆåŒå‘ï¼‰</td><td align="left">å¤šå¯¹å¤šï¼ˆå®Œå…¨è§£è€¦ï¼‰</td></tr><tr><td align="left"><strong>è€¦åˆåº¦</strong></td><td align="left">ä½ï¼ˆçˆ¶åº”ç”¨æ˜ç¡®çŸ¥é“å­åº”ç”¨çš„æ¥å£ï¼‰</td><td align="left">é«˜ï¼ˆç›´æ¥ä¾èµ–å…¨å±€å˜é‡ï¼‰</td><td align="left">æä½ï¼ˆå‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼‰</td></tr><tr><td align="left"><strong>æ€§èƒ½</strong></td><td align="left">é«˜ï¼ˆåˆå§‹åŒ–æ—¶æ³¨å…¥ï¼Œæ— è¿è¡Œæ—¶å¼€é”€ï¼‰</td><td align="left">æé«˜ï¼ˆç›´æ¥å†…å­˜è®¿é—®ï¼‰</td><td align="left">ä¸­ç­‰ï¼ˆäº‹ä»¶åˆ†å‘æœ‰è½»å¾®å¼€é”€ï¼‰</td></tr><tr><td align="left"><strong>æ•°æ®ç±»å‹</strong></td><td align="left">ä»»æ„ï¼ˆåŒ…æ‹¬å‡½æ•°ï¼‰</td><td align="left">ä»»æ„ï¼ˆéœ€å¯åºåˆ—åŒ–ï¼Œå‡½æ•°å…±äº«éœ€è°¨æ…ï¼‰</td><td align="left">ä»»æ„ï¼ˆäº‹ä»¶è´Ÿè½½ï¼‰</td></tr><tr><td align="left"><strong>é€‚ç”¨åœºæ™¯</strong></td><td align="left">åˆå§‹åŒ–æ•°æ®ã€é…ç½®ä¼ é€’ã€å›è°ƒå‡½æ•°æ³¨å…¥</td><td align="left">ç®€å•æ•°æ®å…±äº«ã€å…±äº«å·¥å…·åº“ã€å¿«é€Ÿè°ƒè¯•</td><td align="left">è·¨åº”ç”¨çŠ¶æ€åŒæ­¥ã€è§£è€¦ä¸šåŠ¡é€»è¾‘ã€å¹¿æ’­é€šçŸ¥</td></tr><tr><td align="left"><strong>å®‰å…¨æ€§</strong></td><td align="left">é«˜ï¼ˆæ¥å£æ˜ç¡®ï¼Œæ˜“äºæ§åˆ¶ï¼‰</td><td align="left">ä½ï¼ˆå…¨å±€å‘½åç©ºé—´æ±¡æŸ“é£é™©ï¼‰</td><td align="left">ä¸­ç­‰ï¼ˆéœ€è§„èŒƒäº‹ä»¶å‘½åï¼‰</td></tr><tr><td align="left"><strong>å¯ç»´æŠ¤æ€§</strong></td><td align="left">é«˜ï¼ˆæ¥å£æ¸…æ™°ï¼Œæ˜“äºè¿½è¸ªï¼‰</td><td align="left">ä½ï¼ˆå…¨å±€å˜é‡éš¾ä»¥è¿½è¸ªï¼‰</td><td align="left">ä¸­ç­‰ï¼ˆéœ€ç»´æŠ¤äº‹ä»¶æ–‡æ¡£ï¼‰</td></tr></tbody></table>
<p><strong>é€‰å‹å»ºè®®</strong>ï¼š</p>
<ul>
<li><strong>ä¼˜å…ˆä½¿ç”¨ Props æ³¨å…¥</strong>ï¼šå¯¹äºçˆ¶åº”ç”¨å‘å­åº”ç”¨ä¼ é€’åˆå§‹åŒ–æ•°æ®ã€é…ç½®æˆ–å›è°ƒå‡½æ•°çš„åœºæ™¯ï¼Œåº”é¦–é€‰ Props æ³¨å…¥ã€‚å®ƒæä¾›äº†æ¸…æ™°çš„æ¥å£å®šä¹‰ï¼Œæ˜“äºæµ‹è¯•å’Œç»´æŠ¤ï¼Œæ˜¯å®ç°çˆ¶å­é€šä¿¡æœ€è§„èŒƒã€æœ€å®‰å…¨çš„æ–¹å¼ã€‚</li>
<li><strong>è°¨æ…ä½¿ç”¨ Window å…±äº«</strong>ï¼šWindow å…±äº«çš„æ€§èƒ½æœ€é«˜ï¼Œä½†é£é™©ä¹Ÿæœ€å¤§ã€‚å®ƒåº”ä»…ç”¨äºå…±äº«é‚£äº›çœŸæ­£å…¨å±€çš„ã€ç¨³å®šä¸å˜çš„æ•°æ®æˆ–æœåŠ¡ï¼Œå¦‚å…¨å±€é…ç½®ã€å·¥å…·åº“å®ä¾‹ç­‰ã€‚åœ¨ä½¿ç”¨æ—¶ï¼Œå¿…é¡»é€šè¿‡ä¸¥æ ¼çš„å‘½åç©ºé—´ç®¡ç†æ¥é¿å…å†²çªã€‚</li>
<li><strong>å¹¿æ³›ä½¿ç”¨ EventBus</strong>ï¼šå¯¹äºåº”ç”¨é—´çš„è§£è€¦é€šä¿¡ã€çŠ¶æ€åŒæ­¥å’Œå¹¿æ’­é€šçŸ¥ï¼ŒEventBus æ˜¯æœ€ä½³é€‰æ‹©ã€‚å®ƒä½¿å¾—åº”ç”¨é—´çš„åä½œå˜å¾—å¼‚å¸¸çµæ´»ï¼Œæ˜¯æ„å»ºå¤§å‹ã€å¯æ‰©å±•å¾®å‰ç«¯ç³»ç»Ÿçš„æ ¸å¿ƒã€‚ä½†éœ€è¦æ³¨æ„äº‹ä»¶çš„å‘½åè§„èŒƒå’Œå†…å­˜ç®¡ç†é—®é¢˜ã€‚</li>
</ul>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™ä¸‰ç§é€šä¿¡æ–¹å¼å¾€å¾€æ˜¯ç»“åˆä½¿ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œä¸»åº”ç”¨åœ¨åŠ è½½å­åº”ç”¨æ—¶ï¼Œé€šè¿‡ <code>Props</code> æ³¨å…¥ä¸€ä¸ªå…¨å±€çš„ <code>EventBus</code> å®ä¾‹å’Œä¸€ä¸ªå…±äº«çš„ <code>axios</code> å®ä¾‹ï¼ˆé€šè¿‡ <code>Window</code> å…±äº«ï¼‰ï¼Œå­åº”ç”¨åˆ™ä¸»è¦ä½¿ç”¨ <code>EventBus</code> ä¸å…¶ä»–åº”ç”¨è¿›è¡Œäº¤äº’ã€‚</p>
<h4 data-id="heading-20">1.3.2 é€šä¿¡å®‰å…¨æ€§ä¸æ€§èƒ½ä¼˜åŒ–</h4>
<p><strong>é€šä¿¡å®‰å…¨æ€§</strong>ï¼š</p>
<ul>
<li><strong>æ•°æ®æ ¡éªŒ</strong>ï¼šæ— è®ºé€šè¿‡ä½•ç§æ–¹å¼æ¥æ”¶æ•°æ®ï¼Œå­åº”ç”¨éƒ½åº”è¿›è¡Œå¿…è¦çš„æ•°æ®æ ¡éªŒï¼Œç¡®ä¿æ¥æ”¶åˆ°çš„æ•°æ®æ ¼å¼å’Œç±»å‹ç¬¦åˆé¢„æœŸï¼Œé˜²æ­¢å› æ¶æ„æ•°æ®æˆ–æ•°æ®æ ¼å¼é”™è¯¯å¯¼è‡´çš„åº”ç”¨å´©æºƒã€‚</li>
<li><strong>æœ€å°æƒé™åŸåˆ™</strong>ï¼šä¸»åº”ç”¨ä¼ é€’ç»™å­åº”ç”¨çš„æ•°æ®å’Œæ–¹æ³•åº”éµå¾ªæœ€å°æƒé™åŸåˆ™ï¼Œåªæä¾›å­åº”ç”¨æ‰€å¿…éœ€çš„æœ€å°æ•°æ®é›†å’ŒåŠŸèƒ½ï¼Œé¿å…æš´éœ²æ•æ„Ÿä¿¡æ¯æˆ–ä¸å¿…è¦çš„å†…éƒ¨å®ç°ã€‚</li>
<li><strong>é¿å…ç›´æ¥æ‰§è¡Œå­—ç¬¦ä¸²ä»£ç </strong>ï¼šç»å¯¹ä¸è¦é€šè¿‡ <code>Window</code> å…±äº«æˆ– <code>EventBus</code> ä¼ é€’å¹¶æ‰§è¡Œå­—ç¬¦ä¸²å½¢å¼çš„ä»£ç ï¼Œè¿™ä¼šå¼•å‘ä¸¥é‡çš„å®‰å…¨æ¼æ´ï¼ˆå¦‚ XSS æ”»å‡»ï¼‰ã€‚</li>
<li><strong>HTTPS</strong>ï¼šç¡®ä¿ä¸»åº”ç”¨å’Œæ‰€æœ‰å­åº”ç”¨éƒ½é€šè¿‡ HTTPS æä¾›æœåŠ¡ï¼Œä»¥é˜²æ­¢é€šä¿¡æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«çªƒå¬æˆ–ç¯¡æ”¹ã€‚</li>
</ul>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li><strong>Props ä¼˜åŒ–</strong>ï¼šé¿å…åœ¨ <code>props</code> ä¸­ä¼ é€’å¤§å‹å¯¹è±¡æˆ–é¢‘ç¹å˜åŒ–çš„æ•°æ®ã€‚å¦‚æœå¿…é¡»ä¼ é€’ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>computed</code> å±æ€§æˆ– <code>watch</code> æ¥ä¼˜åŒ–æ›´æ–°é€»è¾‘ã€‚</li>
<li><strong>Window å…±äº«ä¼˜åŒ–</strong>ï¼šå…±äº«åœ¨ <code>window</code> ä¸Šçš„å¯¹è±¡åº”å°½é‡æ˜¯å•ä¾‹æˆ–ä¸å¯å˜å¯¹è±¡ï¼Œé¿å…é¢‘ç¹ä¿®æ”¹ã€‚å¯¹äºå¤§å‹å·¥å…·åº“ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŠ¨æ€å¯¼å…¥ï¼ˆ<code>import()</code>ï¼‰æŒ‰éœ€åŠ è½½ï¼Œè€Œä¸æ˜¯å…¨éƒ¨æŒ‚è½½åœ¨ <code>window</code> ä¸Šã€‚</li>
<li><strong>EventBus ä¼˜åŒ–</strong>ï¼š
<ul>
<li><strong>äº‹ä»¶èŠ‚æµ/é˜²æŠ–</strong>ï¼šå¯¹äºé«˜é¢‘è§¦å‘çš„äº‹ä»¶ï¼ˆå¦‚çª—å£æ»šåŠ¨ã€é¼ æ ‡ç§»åŠ¨ï¼‰ï¼Œåº”åœ¨å‘å¸ƒç«¯è¿›è¡ŒèŠ‚æµï¼ˆthrottleï¼‰æˆ–é˜²æŠ–ï¼ˆdebounceï¼‰å¤„ç†ï¼Œå‡å°‘äº‹ä»¶åˆ†å‘çš„æ¬¡æ•°ã€‚</li>
<li><strong>äº‹ä»¶è´Ÿè½½ç²¾ç®€</strong>ï¼šäº‹ä»¶è´Ÿè½½åº”å°½é‡å°ï¼ŒåªåŒ…å«å¿…è¦çš„æ•°æ®ã€‚</li>
<li><strong>é¿å…å†…å­˜æ³„æ¼</strong>ï¼šå¦‚å‰æ‰€è¿°ï¼ŒåŠ¡å¿…åœ¨ç»„ä»¶å¸è½½æ—¶å–æ¶ˆäº‹ä»¶ç›‘å¬ã€‚</li>
</ul>
</li>
<li><strong>é¢„åŠ è½½</strong>ï¼šæ— ç•Œæ¡†æ¶æ”¯æŒå­åº”ç”¨çš„é¢„åŠ è½½ ã€‚å¯¹äºç”¨æˆ·å¯èƒ½ä¼šè®¿é—®åˆ°çš„å­åº”ç”¨ï¼Œå¯ä»¥åœ¨ä¸»åº”ç”¨ç©ºé—²æ—¶æå‰åŠ è½½å…¶é™æ€èµ„æºï¼Œä»è€Œç¼©çŸ­ç”¨æˆ·é¦–æ¬¡æ‰“å¼€å­åº”ç”¨çš„æ—¶é—´ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</li>
</ul>
<h4 data-id="heading-21">1.3.3 é€šä¿¡æ•…éšœå¤„ç†ä¸æ¢å¤ç­–ç•¥</h4>
<p>åœ¨å¤æ‚çš„å¾®å‰ç«¯ç³»ç»Ÿä¸­ï¼Œé€šä¿¡æ•…éšœæ˜¯ä¸å¯é¿å…çš„ã€‚ä¾‹å¦‚ï¼Œå­åº”ç”¨åŠ è½½å¤±è´¥ã€ç½‘ç»œä¸­æ–­ã€æˆ–è€…åº”ç”¨å´©æºƒç­‰æƒ…å†µéƒ½å¯èƒ½å¯¼è‡´é€šä¿¡ä¸­æ–­ã€‚å› æ­¤ï¼Œå»ºç«‹ä¸€å¥—å®Œå–„çš„æ•…éšœå¤„ç†ä¸æ¢å¤æœºåˆ¶è‡³å…³é‡è¦ã€‚</p>
<ul>
<li><strong>å­åº”ç”¨åŠ è½½å¤±è´¥</strong>ï¼šä¸»åº”ç”¨åœ¨åŠ è½½å­åº”ç”¨æ—¶ï¼Œåº”æä¾› <code>onError</code> æˆ–ç±»ä¼¼çš„é”™è¯¯å¤„ç†é’©å­ã€‚å½“å­åº”ç”¨åŠ è½½å¤±è´¥æ—¶ï¼Œå¯ä»¥æ•è·é”™è¯¯å¹¶å‘ç”¨æˆ·å±•ç¤ºå‹å¥½çš„é”™è¯¯æç¤ºï¼Œæˆ–è€…æä¾›ä¸€ä¸ªé™çº§æ–¹æ¡ˆï¼ˆå¦‚è·³è½¬åˆ°å¤‡ç”¨é¡µé¢ï¼‰ã€‚</li>
<li><strong>é€šä¿¡è¶…æ—¶</strong>ï¼šå¯¹äºé€šè¿‡ <code>EventBus</code> è§¦å‘çš„å¼‚æ­¥æ“ä½œï¼Œåº”è®¾ç½®è¶…æ—¶æœºåˆ¶ã€‚å¦‚æœåœ¨è§„å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å“åº”ï¼Œåº”è§†ä¸ºé€šä¿¡å¤±è´¥ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„é”™è¯¯å¤„ç†ã€‚</li>
<li><strong>çŠ¶æ€ä¸€è‡´æ€§ä¿è¯</strong>ï¼šå½“é€šä¿¡ä¸­æ–­æˆ–åº”ç”¨é‡å¯åï¼Œå¯èƒ½ä¼šå‡ºç°çŠ¶æ€ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š
<ul>
<li><strong>çŠ¶æ€æŒä¹…åŒ–</strong>ï¼šå°†å…³é”®çš„å…¨å±€çŠ¶æ€ï¼ˆå¦‚ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼‰æŒä¹…åŒ–åˆ° <code>localStorage</code> æˆ– <code>sessionStorage</code> ä¸­ã€‚åº”ç”¨å¯åŠ¨æ—¶ï¼Œå…ˆä»æŒä¹…åŒ–å­˜å‚¨ä¸­æ¢å¤çŠ¶æ€ã€‚</li>
<li><strong>çŠ¶æ€åŒæ­¥æœºåˆ¶</strong>ï¼šåœ¨åº”ç”¨é‡æ–°è¿æ¥æˆ–åŠ è½½åï¼Œä¸»åŠ¨è¿›è¡Œä¸€æ¬¡çŠ¶æ€åŒæ­¥ã€‚ä¾‹å¦‚ï¼Œä¸»åº”ç”¨å¯ä»¥å‘æ‰€æœ‰å­åº”ç”¨å¹¿æ’­ä¸€ä¸ª <code>request-state-sync</code> äº‹ä»¶ï¼Œå­åº”ç”¨åœ¨æ”¶åˆ°äº‹ä»¶åï¼Œå°†è‡ªå·±çš„å…³é”®çŠ¶æ€é€šè¿‡ <code>EventBus</code> å‘é€å›æ¥ï¼Œä¸»åº”ç”¨æ®æ­¤æ›´æ–°å…¨å±€çŠ¶æ€ã€‚</li>
<li><strong>å¹‚ç­‰æ€§è®¾è®¡</strong>ï¼šç¡®ä¿é€šè¿‡ <code>EventBus</code> è§¦å‘çš„æ“ä½œæ˜¯å¹‚ç­‰çš„ï¼Œå³å¤šæ¬¡æ‰§è¡ŒåŒä¸€æ“ä½œï¼Œç»“æœä¸æ‰§è¡Œä¸€æ¬¡ç›¸åŒã€‚è¿™å¯ä»¥é¿å…å› ç½‘ç»œé‡è¯•æˆ–é‡å¤äº‹ä»¶å¯¼è‡´çš„çŠ¶æ€é”™è¯¯ã€‚</li>
</ul>
</li>
<li><strong>æ—¥å¿—ä¸ç›‘æ§</strong>ï¼šå»ºç«‹å®Œå–„çš„æ—¥å¿—å’Œç›‘æ§ä½“ç³»ï¼Œè®°å½•æ‰€æœ‰å…³é”®çš„é€šä¿¡äº‹ä»¶å’Œé”™è¯¯ã€‚å½“é€šä¿¡æ•…éšœå‘ç”Ÿæ—¶ï¼Œå¯ä»¥é€šè¿‡æ—¥å¿—å¿«é€Ÿå®šä½é—®é¢˜æ ¹æºã€‚åŒæ—¶ï¼Œé€šè¿‡ç›‘æ§å‘Šè­¦ï¼Œå¯ä»¥åœ¨æ•…éšœå‘ç”Ÿæ—¶ç¬¬ä¸€æ—¶é—´é€šçŸ¥å¼€å‘äººå‘˜ã€‚</li>
</ul>
<p>é€šè¿‡ä»¥ä¸Šé«˜çº§å®è·µï¼Œå¼€å‘è€…å¯ä»¥æ„å»ºä¸€ä¸ªä¸ä»…åŠŸèƒ½å¼ºå¤§ï¼Œè€Œä¸”å®‰å…¨ã€é«˜æ•ˆã€å¥å£®çš„å¾®å‰ç«¯é€šä¿¡ç³»ç»Ÿï¼Œä¸ºæ•´ä¸ªåº”ç”¨çš„ç¨³å®šè¿è¡Œæä¾›åšå®çš„ä¿éšœã€‚</p>
<h2 data-id="heading-22">2. è·¯ç”±ç®¡ç†ï¼šæ‰“é€ æ— ç¼çš„å¯¼èˆªä½“éªŒ</h2>
<p>åœ¨å¾®å‰ç«¯æ¶æ„ä¸­ï¼Œè·¯ç”±ç®¡ç†æ˜¯æ„å»ºç”¨æˆ·æ— ç¼å¯¼èˆªä½“éªŒçš„æ ¸å¿ƒæŒ‘æˆ˜ä¹‹ä¸€ã€‚ä¼ ç»Ÿçš„å•é¡µåº”ç”¨ï¼ˆSPAï¼‰è·¯ç”±ç®¡ç†ç›¸å¯¹ç®€å•ï¼Œä½†åœ¨å¾®å‰ç«¯åœºæ™¯ä¸‹ï¼Œä¸»åº”ç”¨å’Œå¤šä¸ªå­åº”ç”¨å„è‡ªæ‹¥æœ‰ç‹¬ç«‹çš„è·¯ç”±ç³»ç»Ÿï¼Œå¦‚ä½•åè°ƒå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œç¡®ä¿è·¯ç”±çŠ¶æ€çš„æ­£ç¡®åŒæ­¥ã€æµè§ˆå™¨å‰è¿›åé€€æŒ‰é’®çš„æ­£å¸¸å·¥ä½œï¼Œä»¥åŠåœ¨ä¸åŒåº”ç”¨é—´å®ç°æµç•…è·³è½¬ï¼Œæˆä¸ºäº†ä¸€ä¸ªå¤æ‚çš„æŠ€æœ¯éš¾é¢˜ã€‚æ— ç•Œï¼ˆWujieï¼‰å¾®å‰ç«¯æ¡†æ¶é€šè¿‡å…¶åˆ›æ–°çš„è·¯ç”±åŒæ­¥æœºåˆ¶ï¼Œå·§å¦™åœ°è§£å†³äº†è¿™äº›é—®é¢˜ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€å¥—å¼ºå¤§è€Œç®€æ´çš„è·¯ç”±ç®¡ç†æ–¹æ¡ˆ ã€‚</p>
<h3 data-id="heading-23">2.1 æ— ç•Œè·¯ç”±åŒæ­¥æœºåˆ¶è§£æ</h3>
<p>æ— ç•Œæ¡†æ¶çš„è·¯ç”±ç®¡ç†æ ¸å¿ƒåœ¨äºå…¶ç‹¬ç‰¹çš„è·¯ç”±åŒæ­¥æœºåˆ¶ã€‚è¯¥æœºåˆ¶æ—¨åœ¨è§£å†³å¾®å‰ç«¯æ¶æ„ä¸­ä¸€ä¸ªæ™®éå­˜åœ¨çš„ç—›ç‚¹ï¼šå­åº”ç”¨çš„è·¯ç”±çŠ¶æ€åœ¨æµè§ˆå™¨åˆ·æ–°ã€å‰è¿›åé€€æˆ–åˆ†äº«é“¾æ¥æ—¶å®¹æ˜“ä¸¢å¤±çš„é—®é¢˜ã€‚é€šè¿‡å°†å­åº”ç”¨çš„è·¯ç”±ä¿¡æ¯å·§å¦™åœ°ä¸ä¸»åº”ç”¨çš„ URL è¿›è¡Œç»‘å®šï¼Œæ— ç•Œç¡®ä¿äº†å­åº”ç”¨çš„è·¯ç”±çŠ¶æ€å¯ä»¥è¢«æµè§ˆå™¨å†å²è®°å½•æ­£ç¡®åœ°ä¿å­˜å’Œæ¢å¤ï¼Œä»è€Œä¸ºç”¨æˆ·æä¾›äº†ä¸å•é¡µåº”ç”¨æ— å¼‚çš„å¯¼èˆªä½“éªŒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e00e1d3fc6bb419589fdac88b83fc0b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764903092&amp;x-signature=XuAGY4rFc5iA03YEGgCCjYd7JzY%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-24">2.1.1 å­åº”ç”¨è·¯ç”±çŠ¶æ€ä¸¢å¤±é—®é¢˜</h4>
<p>åœ¨ä¼ ç»Ÿçš„ <code>iframe</code> å¾®å‰ç«¯æ–¹æ¡ˆä¸­ï¼Œå­åº”ç”¨çš„è·¯ç”±ç³»ç»Ÿå®Œå…¨è¿è¡Œåœ¨ <code>iframe</code> å†…éƒ¨ï¼Œä¸ä¸»åº”ç”¨çš„è·¯ç”±æ˜¯ç›¸äº’éš”ç¦»çš„ã€‚è¿™ä¼šå¯¼è‡´ä¸€ç³»åˆ—é—®é¢˜ï¼š</p>
<ul>
<li><strong>æµè§ˆå™¨åˆ·æ–°</strong>ï¼šå½“ç”¨æˆ·åœ¨å­åº”ç”¨çš„æŸä¸ªé¡µé¢ï¼ˆä¾‹å¦‚ <code>/sub-app/product/123</code>ï¼‰åˆ·æ–°æµè§ˆå™¨æ—¶ï¼Œæµè§ˆå™¨åªä¼šåŠ è½½ä¸»åº”ç”¨çš„ URLï¼ˆä¾‹å¦‚ <code>https://main-app.com/sub-app</code>ï¼‰ï¼Œè€Œ <code>iframe</code> çš„ <code>src</code> å±æ€§é€šå¸¸ä¼šæ¢å¤åˆ°åˆå§‹å€¼ï¼ˆä¾‹å¦‚ <code>https://sub-app.com</code>ï¼‰ï¼Œå¯¼è‡´ç”¨æˆ·ä¸¢å¤±å½“å‰çš„é¡µé¢çŠ¶æ€ï¼Œè¢«é‡å®šå‘åˆ°å­åº”ç”¨çš„é¦–é¡µã€‚</li>
<li><strong>å‰è¿›åé€€</strong>ï¼šæµè§ˆå™¨çš„å‰è¿›åé€€æŒ‰é’®æ“ä½œçš„æ˜¯æµè§ˆå™¨é¡¶å±‚çš„å†å²è®°å½•ï¼ˆ<code>window.history</code>ï¼‰ï¼Œè€Œå­åº”ç”¨å†…éƒ¨çš„è·¯ç”±å˜åŒ–ï¼ˆå¦‚ <code>history.pushState</code>ï¼‰åªä¼šä¿®æ”¹ <code>iframe</code> å†…éƒ¨çš„å†å²è®°å½•ã€‚å› æ­¤ï¼Œå½“ç”¨æˆ·ç‚¹å‡»å‰è¿›åé€€æŒ‰é’®æ—¶ï¼Œæ— æ³•æ­£ç¡®åœ°å¯¼èˆªåˆ°å­åº”ç”¨çš„å†å²é¡µé¢ã€‚</li>
<li><strong>é“¾æ¥åˆ†äº«</strong>ï¼šå½“ç”¨æˆ·è¯•å›¾åˆ†äº«ä¸€ä¸ªåœ¨å­åº”ç”¨å†…éƒ¨çš„é¡µé¢é“¾æ¥æ—¶ï¼Œåˆ†äº«çš„ URL åªæ˜¯ä¸»åº”ç”¨çš„ URLï¼Œæ¥æ”¶è€…æ‰“å¼€é“¾æ¥åæ— æ³•çœ‹åˆ°åˆ†äº«è€…å½“æ—¶æ‰€åœ¨çš„å­åº”ç”¨é¡µé¢ã€‚</li>
</ul>
<p>è¿™äº›é—®é¢˜ä¸¥é‡ç ´åäº†ç”¨æˆ·ä½“éªŒï¼Œä½¿å¾—åŸºäº <code>iframe</code> çš„å¾®å‰ç«¯æ–¹æ¡ˆåœ¨å®é™…åº”ç”¨ä¸­å¤‡å—è¯Ÿç—…ã€‚</p>
<h4 data-id="heading-25">2.1.2 æ— ç•Œè·¯ç”±åŒæ­¥åŸç†</h4>
<p>æ— ç•Œæ¡†æ¶é€šè¿‡åŠ«æŒ <code>iframe</code> å†…éƒ¨çš„ <code>history.pushState</code> å’Œ <code>history.replaceState</code> æ–¹æ³•ï¼Œå·§å¦™åœ°è§£å†³äº†ä¸Šè¿°é—®é¢˜ ã€‚å…¶æ ¸å¿ƒåŸç†å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>åŠ«æŒè·¯ç”±å˜åŒ–</strong>ï¼šå½“å­åº”ç”¨å†…éƒ¨è¿›è¡Œè·¯ç”±è·³è½¬ï¼Œè°ƒç”¨ <code>history.pushState</code> æˆ– <code>history.replaceState</code> æ—¶ï¼Œæ— ç•Œæ¡†æ¶çš„åŠ«æŒé€»è¾‘ä¼šè¢«è§¦å‘ã€‚</li>
<li><strong>åŒæ­¥åˆ°ä¸»åº”ç”¨ URL</strong>ï¼šåŠ«æŒé€»è¾‘ä¼šå°†å­åº”ç”¨å½“å‰çš„ <code>location.pathname</code> å’Œ <code>location.search</code>ï¼ˆå³è·¯ç”±è·¯å¾„å’ŒæŸ¥è¯¢å‚æ•°ï¼‰è¿›è¡Œ <code>URL encoding</code>ï¼ˆç¼–ç ï¼‰ï¼Œç„¶åå°†å…¶ä½œä¸ºæŸ¥è¯¢å‚æ•°é™„åŠ åˆ°ä¸»åº”ç”¨çš„ URL ä¸Šã€‚ä¾‹å¦‚ï¼Œå¦‚æœå­åº”ç”¨çš„è·¯ç”±å˜ä¸º <code>/product/123?color=red</code>ï¼Œä¸»åº”ç”¨çš„ URL å¯èƒ½ä¼šè¢«æ›´æ–°ä¸º <code>https://main-app.com/sub-app?sub-app-name=%2Fproduct%2F123%3Fcolor%3Dred</code>ã€‚å…¶ä¸­ <code>sub-app-name</code> æ˜¯å­åº”ç”¨çš„å”¯ä¸€æ ‡è¯†ã€‚</li>
<li><strong>æµè§ˆå™¨å†å²è®°å½•</strong>ï¼šç”±äºä¸»åº”ç”¨çš„ URL å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™æ¬¡å˜åŒ–ä¼šè¢«æµè§ˆå™¨è®°å½•åˆ°é¡¶å±‚çš„å†å²è®°å½•ä¸­ã€‚å› æ­¤ï¼Œæµè§ˆå™¨çš„å‰è¿›åé€€æŒ‰é’®ç°åœ¨å¯ä»¥æ­£ç¡®åœ°ä½œç”¨äºå­åº”ç”¨çš„è·¯ç”±å†å²ã€‚</li>
<li><strong>çŠ¶æ€æ¢å¤</strong>ï¼šå½“ç”¨æˆ·åˆ·æ–°æµè§ˆå™¨æˆ–ä»å¤–éƒ¨è®¿é—®å¸¦æœ‰åŒæ­¥è·¯ç”±ä¿¡æ¯çš„ URL æ—¶ï¼Œæ— ç•Œæ¡†æ¶ä¼šåœ¨åˆå§‹åŒ–å­åº”ç”¨ <code>iframe</code> æ—¶ï¼Œä»ä¸»åº”ç”¨ URL çš„æŸ¥è¯¢å‚æ•°ä¸­è§£æå‡ºå­åº”ç”¨çš„è·¯ç”±ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨ <code>iframe</code> çš„ <code>history.replaceState</code> å°†å­åº”ç”¨çš„è·¯ç”±æ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ã€‚</li>
</ol>
<p>é€šè¿‡è¿™å¥—æœºåˆ¶ï¼Œæ— ç•Œå®ç°äº†å­åº”ç”¨è·¯ç”±çŠ¶æ€ä¸æµè§ˆå™¨å†å²è®°å½•çš„å®Œå…¨åŒæ­¥ï¼Œè§£å†³äº†åˆ·æ–°ã€å‰è¿›åé€€å’Œé“¾æ¥åˆ†äº«ç­‰æ ¸å¿ƒç—›ç‚¹ ã€‚æ­¤å¤–ï¼Œæ— ç•Œè¿˜æ”¯æŒå¤šåº”ç”¨åŒæ—¶æ¿€æ´»æ—¶çš„è·¯ç”±åŒæ­¥ï¼Œå¹¶ä¸”æä¾›äº†çŸ­è·¯å¾„é…ç½®èƒ½åŠ›ï¼Œä»¥åº”å¯¹å­åº”ç”¨ URL è¿‡é•¿çš„é—®é¢˜ ã€‚</p>
<h3 data-id="heading-26">2.2 çˆ¶å­åº”ç”¨è·¯ç”±ååŒç­–ç•¥</h3>
<p>åœ¨ç†è§£äº†æ— ç•Œçš„è·¯ç”±åŒæ­¥åŸç†åï¼Œä¸‹ä¸€æ­¥æ˜¯å¦‚ä½•åœ¨å®è·µä¸­ååŒç®¡ç†çˆ¶å­åº”ç”¨çš„è·¯ç”±ã€‚ä¸€ä¸ªæ¸…æ™°çš„è·¯ç”±ååŒç­–ç•¥æ˜¯ç¡®ä¿æ•´ä¸ªå¾®å‰ç«¯ç³»ç»Ÿå¯¼èˆªé€»è¾‘æ­£ç¡®ã€ç”¨æˆ·ä½“éªŒæµç•…çš„å…³é”®ã€‚è¿™é€šå¸¸æ¶‰åŠåˆ°ä¸»åº”ç”¨çš„ç»Ÿä¸€è·¯ç”±ç®¡ç†ã€å­åº”ç”¨çš„å†…éƒ¨è·¯ç”±è‡ªæ²»ï¼Œä»¥åŠä¸¤è€…ä¹‹é—´çš„è”åŠ¨ä¸è·³è½¬æœºåˆ¶ã€‚</p>
<h4 data-id="heading-27">2.2.1 ä¸»åº”ç”¨ç»Ÿä¸€è·¯ç”±ç®¡ç†</h4>
<p>åœ¨å¾®å‰ç«¯æ¶æ„ä¸­ï¼Œä¸»åº”ç”¨é€šå¸¸æ‰®æ¼”ç€â€œè·¯ç”±ç½‘å…³â€çš„è§’è‰²ã€‚å®ƒè´Ÿè´£ç®¡ç†æ•´ä¸ªç³»ç»Ÿçš„é¡¶å±‚è·¯ç”±ï¼Œå¹¶æ ¹æ®è·¯ç”±è§„åˆ™æ¥å†³å®šåŠ è½½å“ªä¸ªå­åº”ç”¨ã€‚ä¸»åº”ç”¨çš„è·¯ç”±é…ç½®é€šå¸¸ä¼šå®šä¹‰ä¸€ä¸ªé€šé…ç¬¦æˆ–å‚æ•°åŒ–çš„è·¯å¾„ï¼Œç”¨äºåŒ¹é…æ‰€æœ‰å­åº”ç”¨çš„è·¯ç”±ã€‚ä¾‹å¦‚ï¼Œåœ¨ Vue Router ä¸­ï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»åº”ç”¨çš„è·¯ç”±é…ç½®</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">MainLayout</span>,
    <span class="hljs-attr">children</span>: [
      <span class="hljs-comment">// å…¶ä»–ä¸»åº”ç”¨è‡ªèº«çš„è·¯ç”±...</span>
      {
        <span class="hljs-comment">// åŒ¹é…æ‰€æœ‰ä»¥ /sub-app å¼€å¤´çš„è·¯å¾„</span>
        <span class="hljs-attr">path</span>: <span class="hljs-string">'/sub-app/:pathMatch(.*)*'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'SubAppContainer'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./views/SubAppContainer.vue'</span>),
      },
    ],
  },
];
</code></pre>
<p>åœ¨ <code>SubAppContainer.vue</code> ç»„ä»¶ä¸­ï¼Œä¼šæ ¹æ®å½“å‰çš„è·¯ç”±ä¿¡æ¯ï¼ˆå¦‚ <code>params.path</code>ï¼‰æ¥åŠ¨æ€åŠ è½½å¯¹åº”çš„å­åº”ç”¨ã€‚ä¸»åº”ç”¨è¿˜è´Ÿè´£å°†è·¯ç”±è·³è½¬å‡½æ•°ï¼ˆå¦‚ <code>this.$router.push</code>ï¼‰é€šè¿‡ <code>props</code> ä¼ é€’ç»™å­åº”ç”¨ï¼Œä»¥ä¾¿å­åº”ç”¨èƒ½å¤Ÿå‘èµ·è·¨åº”ç”¨çš„å¯¼èˆª ã€‚</p>
<h4 data-id="heading-28">2.2.2 å­åº”ç”¨å†…éƒ¨è·¯ç”±è‡ªæ²»</h4>
<p>å­åº”ç”¨åœ¨å¾®å‰ç«¯æ¶æ„ä¸­åº”ä¿æŒå…¶å†…éƒ¨è·¯ç”±çš„å®Œæ•´æ€§å’Œè‡ªæ²»æ€§ã€‚è¿™æ„å‘³ç€å­åº”ç”¨åº”è¯¥åƒç‹¬ç«‹å¼€å‘æ—¶ä¸€æ ·ï¼Œä½¿ç”¨è‡ªå·±çš„è·¯ç”±åº“ï¼ˆå¦‚ Vue Router, React Routerï¼‰æ¥ç®¡ç†å…¶å†…éƒ¨çš„é¡µé¢è·³è½¬å’ŒçŠ¶æ€ã€‚æ— ç•Œæ¡†æ¶çš„è®¾è®¡ä¿è¯äº†å­åº”ç”¨çš„è·¯ç”±ç³»ç»Ÿå¯ä»¥æ— ä¾µå…¥åœ°ã€å®Œæ•´åœ°è¿è¡Œåœ¨ <code>iframe</code> æ²™ç®±ä¸­ï¼Œæ— éœ€ä»»ä½•ç‰¹æ®Šæ”¹é€  ã€‚å­åº”ç”¨å†…éƒ¨çš„ <code>&lt;router-link&gt;</code> æˆ–ç¼–ç¨‹å¼å¯¼èˆªï¼ˆ<code>router.push</code>ï¼‰éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œå¹¶ä¸”å…¶è·¯ç”±å˜åŒ–ä¼šè¢«æ— ç•Œçš„è·¯ç”±åŒæ­¥æœºåˆ¶æ•è·å¹¶åŒæ­¥åˆ°ä¸»åº”ç”¨ã€‚</p>
<h4 data-id="heading-29">2.2.3 çˆ¶å­è·¯ç”±è”åŠ¨ä¸è·³è½¬</h4>
<p>å®ç°çˆ¶å­åº”ç”¨é—´çš„è·¯ç”±è”åŠ¨å’Œè·³è½¬æ˜¯è·¯ç”±ååŒçš„æ ¸å¿ƒã€‚æœ€å¸¸è§çš„åœºæ™¯æ˜¯ï¼šç”¨æˆ·åœ¨å­åº”ç”¨ A çš„æŸä¸ªé¡µé¢ï¼Œå¸Œæœ›è·³è½¬åˆ°å­åº”ç”¨ B çš„æŸä¸ªç‰¹å®šé¡µé¢ã€‚å®ç°è¿™ç§è·³è½¬é€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p>
<ol>
<li>
<p><strong>ä¸»åº”ç”¨æä¾›è·³è½¬æ–¹æ³•</strong>ï¼šä¸»åº”ç”¨å°†ä¸€ä¸ªç»Ÿä¸€çš„è·³è½¬æ–¹æ³•ï¼ˆå¦‚ <code>jump</code>ï¼‰é€šè¿‡ <code>props</code> æ³¨å…¥åˆ°æ‰€æœ‰å­åº”ç”¨ä¸­ã€‚å½“å­åº”ç”¨éœ€è¦è·¨åº”ç”¨è·³è½¬æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªæ³¨å…¥çš„æ–¹æ³•ï¼Œå¹¶å°†ç›®æ ‡è·¯ç”±ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ é€’ ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»åº”ç”¨æ³¨å…¥è·³è½¬æ–¹æ³•</span>
&lt;<span class="hljs-title class_">WujieVue</span> 
  name=<span class="hljs-string">"sub-app-a"</span> 
  url=<span class="hljs-string">"http://localhost:8080"</span> 
  :props=<span class="hljs-string">"{ jump: this.handleCrossAppJump }"</span> 
/&gt;

<span class="hljs-comment">// ä¸»åº”ç”¨ä¸­çš„è·³è½¬æ–¹æ³•</span>
<span class="hljs-attr">methods</span>: {
  <span class="hljs-title function_">handleCrossAppJump</span>(<span class="hljs-params">location</span>) {
    <span class="hljs-comment">// location å¯ä»¥æ˜¯ { path: '/sub-app-b/product/123' }</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(location);
  }
}

<span class="hljs-comment">// å­åº”ç”¨ A ä¸­è°ƒç”¨è·³è½¬</span>
<span class="hljs-attr">methods</span>: {
  <span class="hljs-title function_">goToProduct</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">$wujie</span>?.<span class="hljs-property">props</span>.<span class="hljs-title function_">jump</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/sub-app-b/product/123'</span> });
  }
}
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨ EventBus è¿›è¡Œé€šä¿¡</strong>ï¼šå½“å­åº”ç”¨éœ€è¦è·³è½¬åˆ°å¦ä¸€ä¸ªå­åº”ç”¨æ—¶ï¼Œå¯ä»¥å‘å¸ƒä¸€ä¸ªç‰¹å®šçš„äº‹ä»¶ï¼ˆå¦‚ <code>navigate-to</code>ï¼‰ï¼Œå¹¶å°†ç›®æ ‡è·¯ç”±ä¿¡æ¯ä½œä¸ºäº‹ä»¶è´Ÿè½½ã€‚ä¸»åº”ç”¨æˆ–å…¶ä»–è´Ÿè´£è·¯ç”±ç®¡ç†çš„æ¨¡å—ç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œå¹¶æ‰§è¡Œå®é™…çš„è·³è½¬é€»è¾‘ ã€‚è¿™ç§æ–¹å¼çš„è§£è€¦ç¨‹åº¦æ›´é«˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­åº”ç”¨ A å‘å¸ƒè·³è½¬äº‹ä»¶</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">$wujie</span>?.<span class="hljs-property">bus</span>.$emit(<span class="hljs-string">'navigate-to'</span>, { <span class="hljs-attr">path</span>: <span class="hljs-string">'/sub-app-b/product/123'</span> });

<span class="hljs-comment">// ä¸»åº”ç”¨ç›‘å¬è·³è½¬äº‹ä»¶å¹¶æ‰§è¡Œè·³è½¬</span>
bus.$on(<span class="hljs-string">'navigate-to'</span>, <span class="hljs-function">(<span class="hljs-params">location</span>) =&gt;</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(location.<span class="hljs-property">path</span>);
});
</code></pre>
</li>
<li>
<p><strong>ç›´æ¥æ“ä½œä¸»åº”ç”¨è·¯ç”±</strong>ï¼šåœ¨å­åº”ç”¨ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <code>window.parent</code> ç›´æ¥è®¿é—®ä¸»åº”ç”¨çš„è·¯ç”±å®ä¾‹è¿›è¡Œè·³è½¬ï¼Œä¾‹å¦‚ <code>window.parent.$router.push('/sub-app-b/product/123')</code>ã€‚ä½†è¿™ç§æ–¹å¼è€¦åˆåº¦è¾ƒé«˜ï¼Œä¸æ¨èåœ¨å¤æ‚åœºæ™¯ä¸‹ä½¿ç”¨ã€‚</p>
</li>
</ol>
<p>é€šè¿‡ä¸Šè¿°ç­–ç•¥ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªæ—¢ç»Ÿä¸€åˆçµæ´»çš„å¾®å‰ç«¯è·¯ç”±ç®¡ç†ä½“ç³»ï¼Œä¸ºç”¨æˆ·æä¾›æ— ç¼ã€è¿è´¯çš„å¯¼èˆªä½“éªŒã€‚</p>
<h3 data-id="heading-30">2.3 é«˜çº§è·¯ç”±åœºæ™¯å®è·µ</h3>
<p>åœ¨æŒæ¡äº†åŸºæœ¬çš„è·¯ç”±ååŒç­–ç•¥åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åº”å¯¹ä¸€äº›æ›´å¤æ‚çš„é«˜çº§è·¯ç”±åœºæ™¯ï¼Œä¾‹å¦‚å­åº”ç”¨ä¿æ´»æ¨¡å¼ä¸‹çš„è·¯ç”±å¤„ç†ã€å¤šåº”ç”¨åŒæ—¶æ¿€æ´»æ—¶çš„è·¯ç”±åŒæ­¥ï¼Œä»¥åŠè·¯ç”±åµŒå¥—ä¸å†²çªçš„è§£å†³ã€‚è¿™äº›åœºæ™¯å¯¹è·¯ç”±ç®¡ç†çš„çµæ´»æ€§å’Œå¥å£®æ€§æå‡ºäº†æ›´é«˜çš„è¦æ±‚ã€‚</p>
<h4 data-id="heading-31">2.3.1 å­åº”ç”¨ä¿æ´»æ¨¡å¼ä¸‹çš„è·¯ç”±å¤„ç†</h4>
<p>æ— ç•Œæ¡†æ¶æä¾›äº†å¼ºå¤§çš„å­åº”ç”¨ä¿æ´»ï¼ˆ<code>alive: true</code>ï¼‰æ¨¡å¼ï¼Œç±»ä¼¼äº Vue çš„ <code>keep-alive</code> ã€‚åœ¨ä¿æ´»æ¨¡å¼ä¸‹ï¼Œå½“ç”¨æˆ·ä»å­åº”ç”¨ A åˆ‡æ¢åˆ°å­åº”ç”¨ B æ—¶ï¼Œå­åº”ç”¨ A çš„ <code>iframe</code> å’Œ DOM ç»“æ„ä¼šè¢«ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå…¶å†…éƒ¨çš„çŠ¶æ€ï¼ˆåŒ…æ‹¬è·¯ç”±çŠ¶æ€ï¼‰ä¸ä¼šä¸¢å¤±ã€‚å½“ç”¨æˆ·å†æ¬¡åˆ‡æ¢å›å­åº”ç”¨ A æ—¶ï¼Œå¯ä»¥ç¬é—´æ¢å¤ï¼Œæ— éœ€é‡æ–°åŠ è½½å’Œæ¸²æŸ“ã€‚</p>
<p>ç„¶è€Œï¼Œä¿æ´»æ¨¡å¼ä¹Ÿå¸¦æ¥äº†æ–°çš„è·¯ç”±æŒ‘æˆ˜ã€‚ç”±äºå­åº”ç”¨çš„è·¯ç”±çŠ¶æ€è¢«ä¿ç•™ï¼Œå¦‚æœä¸»åº”ç”¨çš„è·¯ç”±å‘ç”Ÿå˜åŒ–ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·é€šè¿‡æµè§ˆå™¨åœ°å€æ ç›´æ¥ä¿®æ”¹äº† URLï¼‰ï¼Œå­åº”ç”¨çš„è·¯ç”±ä¸ä¼šè‡ªåŠ¨åŒæ­¥æ›´æ–°ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»é‡‡ç”¨é€šä¿¡æœºåˆ¶æ¥æ˜¾å¼åœ°é€šçŸ¥å­åº”ç”¨è¿›è¡Œè·¯ç”±è·³è½¬ ã€‚</p>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ol>
<li><strong>ä¸»åº”ç”¨ç›‘å¬è·¯ç”±å˜åŒ–</strong>ï¼šä¸»åº”ç”¨éœ€è¦ç›‘å¬è‡ªèº«çš„è·¯ç”±å˜åŒ–ã€‚</li>
<li><strong>é€šè¿‡ EventBus é€šçŸ¥å­åº”ç”¨</strong>ï¼šå½“ä¸»åº”ç”¨çš„è·¯ç”±å˜åŒ–æ¶‰åŠåˆ°æŸä¸ªä¿æ´»çš„å­åº”ç”¨æ—¶ï¼Œä¸»åº”ç”¨åº”é€šè¿‡ <code>EventBus</code> å‘è¯¥å­åº”ç”¨å‘é€ä¸€ä¸ªè·¯ç”±å˜æ›´äº‹ä»¶ï¼Œå¹¶å°†æ–°çš„è·¯ç”±è·¯å¾„ä½œä¸ºäº‹ä»¶è´Ÿè½½ã€‚</li>
<li><strong>å­åº”ç”¨æ¥æ”¶å¹¶è·³è½¬</strong>ï¼šä¿æ´»çš„å­åº”ç”¨ç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œå¹¶åœ¨æ”¶åˆ°é€šçŸ¥åï¼Œä½¿ç”¨è‡ªå·±çš„è·¯ç”±ç³»ç»Ÿï¼ˆå¦‚ <code>router.push</code>ï¼‰è·³è½¬åˆ°å¯¹åº”çš„è·¯å¾„ã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»åº”ç”¨ç›‘å¬è·¯ç”±å˜åŒ–</span>
<span class="hljs-attr">watch</span>: {
  <span class="hljs-string">'$route.params.path'</span>: {
    <span class="hljs-title function_">handler</span>(<span class="hljs-params">newPath</span>) {
      <span class="hljs-comment">// å‡è®¾å½“å‰æ¿€æ´»çš„æ˜¯ä¿æ´»çš„å­åº”ç”¨ 'sub-app-a'</span>
      wujieVue.<span class="hljs-property">bus</span>.$emit(<span class="hljs-string">'sub-app-a-route-change'</span>, <span class="hljs-string">`/<span class="hljs-subst">${newPath}</span>`</span>);
    },
    <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>,
  },
},

<span class="hljs-comment">// å­åº”ç”¨ 'sub-app-a' ç›‘å¬å¹¶è·³è½¬</span>
<span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">$wujie</span>?.<span class="hljs-property">bus</span>.$on(<span class="hljs-string">'sub-app-a-route-change'</span>, <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-property">currentRoute</span>.<span class="hljs-property">path</span> !== path) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(path);
    }
  });
}
</code></pre>
<p>è¿™ç§æ–¹å¼ç¡®ä¿äº†å³ä½¿åœ¨ä¿æ´»æ¨¡å¼ä¸‹ï¼Œçˆ¶å­åº”ç”¨çš„è·¯ç”±ä¹Ÿèƒ½ä¿æŒåŒæ­¥ã€‚</p>
<h4 data-id="heading-32">2.3.2 å¤šåº”ç”¨æ¿€æ´»æ—¶çš„è·¯ç”±åŒæ­¥</h4>
<p>æ— ç•Œæ¡†æ¶æ”¯æŒåœ¨ä¸€ä¸ªé¡µé¢ä¸­åŒæ—¶æ¿€æ´»å¤šä¸ªå­åº”ç”¨ï¼Œå¹¶ä¸”èƒ½ä¿æŒè¿™äº›å­åº”ç”¨çš„è·¯ç”±åŒæ­¥ ã€‚è¿™åœ¨ä¸€äº›å¤æ‚çš„ä»ªè¡¨æ¿æˆ–é—¨æˆ·é¡µé¢ä¸­éå¸¸æœ‰ç”¨ã€‚å®ç°è¿™ä¸€åŠŸèƒ½çš„å…³é”®åœ¨äºæ— ç•Œçš„è·¯ç”±åŒæ­¥æœºåˆ¶æœ¬èº«å°±æ”¯æŒå¤šåº”ç”¨ã€‚å½“é¡µé¢ä¸Šå­˜åœ¨å¤šä¸ªå­åº”ç”¨æ—¶ï¼Œæ¯ä¸ªå­åº”ç”¨çš„è·¯ç”±å˜åŒ–éƒ½ä¼šè¢«ç¼–ç å¹¶é™„åŠ åˆ°ä¸»åº”ç”¨çš„ URL ä¸Šï¼Œä½¿ç”¨ä¸åŒçš„ <code>key</code>ï¼ˆå³å­åº”ç”¨çš„ <code>name</code>ï¼‰è¿›è¡ŒåŒºåˆ†ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸»åº”ç”¨çš„ URL å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š
<code>https://main-app.com/dashboard?app-a=%2Fchart%2Fpie&amp;app-b=%2Ftable%2Fuser-list</code></p>
<p>åœ¨è¿™ä¸ª URL ä¸­ï¼Œ<code>app-a</code> å’Œ <code>app-b</code> åˆ†åˆ«ä»£è¡¨ä¸¤ä¸ªå­åº”ç”¨çš„è·¯ç”±çŠ¶æ€ã€‚å½“ç”¨æˆ·åˆ·æ–°é¡µé¢æ—¶ï¼Œæ— ç•Œæ¡†æ¶ä¼šè§£æè¿™ä¸ª URLï¼Œå¹¶åŒæ—¶æ¢å¤ä¸¤ä¸ªå­åº”ç”¨çš„è·¯ç”±ã€‚å¼€å‘è€…æ— éœ€è¿›è¡Œé¢å¤–çš„ç¼–ç ï¼Œå³å¯äº«å—åˆ°å¤šåº”ç”¨è·¯ç”±åŒæ­¥å¸¦æ¥çš„ä¾¿åˆ©ã€‚</p>
<h4 data-id="heading-33">2.3.3 è·¯ç”±åµŒå¥—ä¸å†²çªè§£å†³</h4>
<p>åœ¨å¾®å‰ç«¯ç³»ç»Ÿä¸­ï¼Œè·¯ç”±åµŒå¥—å’Œå†²çªæ˜¯å¸¸è§çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œä¸»åº”ç”¨æœ‰ä¸€ä¸ªè·¯å¾„ä¸º <code>/user</code> çš„è·¯ç”±ï¼Œè€ŒæŸä¸ªå­åº”ç”¨å†…éƒ¨ä¹Ÿæœ‰ä¸€ä¸ª <code>/user</code> çš„è·¯ç”±ã€‚å½“ç”¨æˆ·è®¿é—® <code>/user</code> æ—¶ï¼Œç³»ç»Ÿåº”è¯¥åŠ è½½ä¸»åº”ç”¨çš„é¡µé¢è¿˜æ˜¯å­åº”ç”¨çš„é¡µé¢ï¼Ÿ</p>
<p><strong>è§£å†³ç­–ç•¥</strong>ï¼š</p>
<ol>
<li><strong>ä¸»åº”ç”¨è·¯ç”±ä¼˜å…ˆ</strong>ï¼šé€šå¸¸ï¼Œä¸»åº”ç”¨çš„è·¯ç”±åº”è¯¥å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ä¸»åº”ç”¨çš„è·¯ç”±é…ç½®åº”è¯¥æ”¾åœ¨å­åº”ç”¨é€šé…ç¬¦è·¯ç”±ä¹‹å‰ã€‚è¿™æ ·ï¼Œå½“ URL åŒæ—¶åŒ¹é…ä¸»åº”ç”¨å’Œå­åº”ç”¨çš„è·¯ç”±æ—¶ï¼Œä¼šä¼˜å…ˆåŒ¹é…ä¸»åº”ç”¨çš„è·¯ç”±ã€‚</li>
<li><strong>æ˜ç¡®çš„è·¯ç”±å‰ç¼€</strong>ï¼šä¸ºæ¯ä¸ªå­åº”ç”¨åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ã€ä¸ä¼šä¸ä¸»åº”ç”¨æˆ–å…¶ä»–å­åº”ç”¨å†²çªçš„è·¯ç”±å‰ç¼€ã€‚ä¾‹å¦‚ï¼Œæ‰€æœ‰ä¸ç”¨æˆ·ç®¡ç†ç›¸å…³çš„å­åº”ç”¨åŠŸèƒ½éƒ½æ”¾åœ¨ <code>/user-mgt/</code> è·¯å¾„ä¸‹ï¼Œè€Œä¸»åº”ç”¨çš„ç”¨æˆ·ä¸­å¿ƒåˆ™ä½¿ç”¨ <code>/user-center/</code>ã€‚è¿™æ˜¯ä¸€ç§é€šè¿‡è®¾è®¡æ¥é¿å…å†²çªçš„æœ‰æ•ˆæ–¹æ³•ã€‚</li>
<li><strong>åŠ¨æ€è·¯ç”±åŒ¹é…</strong>ï¼šåœ¨ä¸»åº”ç”¨çš„è·¯ç”±å®ˆå«ï¼ˆ<code>beforeEach</code>ï¼‰ä¸­ï¼Œå¯ä»¥è¿›è¡Œæ›´å¤æ‚çš„é€»è¾‘åˆ¤æ–­ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®ç”¨æˆ·çš„æƒé™æˆ–å½“å‰çš„ç³»ç»ŸçŠ¶æ€ï¼ŒåŠ¨æ€åœ°å†³å®šå°†æŸä¸ªè·¯å¾„è·¯ç”±åˆ°ä¸»åº”ç”¨è¿˜æ˜¯å­åº”ç”¨ã€‚</li>
</ol>
<p>é€šè¿‡åˆç†çš„è·¯ç”±è®¾è®¡å’Œé…ç½®ï¼Œå¯ä»¥æœ‰æ•ˆåœ°è§£å†³è·¯ç”±åµŒå¥—å’Œå†²çªé—®é¢˜ï¼Œç¡®ä¿æ•´ä¸ªå¾®å‰ç«¯ç³»ç»Ÿçš„è·¯ç”±é€»è¾‘æ¸…æ™°ã€ç¨³å®šã€‚</p>
<h2 data-id="heading-34">3. çŠ¶æ€ç®¡ç†ï¼šå®ç°è·¨åº”ç”¨çš„çŠ¶æ€å…±äº«ä¸éš”ç¦»</h2>
<p>åœ¨å¾®å‰ç«¯æ¶æ„ä¸­ï¼ŒçŠ¶æ€ç®¡ç†æ˜¯ä¸€ä¸ªæ ¸å¿ƒä¸”å¤æ‚çš„è®®é¢˜ã€‚ä¸å•ä½“åº”ç”¨ä¸åŒï¼Œå¾®å‰ç«¯ç³»ç»Ÿç”±å¤šä¸ªç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²å’Œè¿è¡Œçš„å¾®åº”ç”¨ï¼ˆåŒ…æ‹¬ä¸»åº”ç”¨å’Œå¤šä¸ªå­åº”ç”¨ï¼‰ç»„æˆã€‚æ¯ä¸ªå¾®åº”ç”¨ç†è®ºä¸Šéƒ½åº”è¯¥æ‹¥æœ‰è‡ªå·±çš„ã€ä¸å…¶ä»–åº”ç”¨éš”ç¦»çš„è¿è¡Œæ—¶çŠ¶æ€ï¼Œä»¥ä¿è¯å…¶ç‹¬ç«‹æ€§å’Œå¯ç»´æŠ¤æ€§ ã€‚ç„¶è€Œï¼Œåœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œæ€»æœ‰ä¸€äº›çŠ¶æ€æ˜¯éœ€è¦åœ¨å¤šä¸ªåº”ç”¨ä¹‹é—´å…±äº«çš„ï¼Œä¾‹å¦‚å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ã€å…¨å±€çš„ä¸»é¢˜è®¾ç½®ã€åº”ç”¨çº§åˆ«çš„æƒé™æ§åˆ¶ç­‰ã€‚å¦‚ä½•åœ¨ä¿è¯åº”ç”¨é—´çŠ¶æ€éš”ç¦»çš„åŒæ—¶ï¼Œä¼˜é›…åœ°å®ç°å¿…è¦çš„çŠ¶æ€å…±äº«ï¼Œæ˜¯æ— ç•Œå¾®å‰ç«¯æ¡†æ¶åœ¨çŠ¶æ€ç®¡ç†æ–¹é¢éœ€è¦è§£å†³çš„å…³é”®é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d022e7e2a964204ac3230225d9464d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764903092&amp;x-signature=l5CIQTycFuscbaCa%2FfGAy9EIfTw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-35">3.1 æ— ç•ŒçŠ¶æ€ç®¡ç†å“²å­¦</h3>
<p>æ— ç•Œå¾®å‰ç«¯æ¡†æ¶åœ¨çŠ¶æ€ç®¡ç†ä¸Šéµå¾ªä¸€å¥—æ¸…æ™°çš„è®¾è®¡å“²å­¦ï¼Œè¿™å¥—å“²å­¦æ—¨åœ¨å¹³è¡¡å¾®åº”ç”¨çš„ç‹¬ç«‹æ€§ä¸ç³»ç»Ÿæ•´ä½“çš„ååŒæ€§ã€‚å®ƒå¼ºè°ƒâ€œç‹¬ç«‹è¿è¡Œæ—¶â€å’Œâ€œçŠ¶æ€éš”ç¦»â€ä½œä¸ºåŸºæœ¬åŸåˆ™ï¼ŒåŒæ—¶é€šè¿‡çµæ´»çš„é€šä¿¡æœºåˆ¶æ¥æ»¡è¶³â€œçŠ¶æ€å…±äº«â€çš„å®é™…éœ€æ±‚ã€‚</p>
<h4 data-id="heading-36">3.1.1 ç‹¬ç«‹è¿è¡Œæ—¶ä¸çŠ¶æ€éš”ç¦»</h4>
<p>æ— ç•Œæ¡†æ¶çš„æ ¸å¿ƒç†å¿µä¹‹ä¸€æ˜¯â€œç‹¬ç«‹è¿è¡Œæ—¶â€ï¼Œå³æ¯ä¸ªå¾®åº”ç”¨åœ¨è¿è¡Œæ—¶éƒ½åº”è¯¥æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„ JS æ‰§è¡Œç¯å¢ƒï¼ˆé€šè¿‡ <code>iframe</code> æ²™ç®±å®ç°ï¼‰å’Œç‹¬ç«‹çš„è¿è¡Œæ—¶çŠ¶æ€ ã€‚è¿™æ„å‘³ç€ï¼Œä¸€ä¸ªå­åº”ç”¨çš„çŠ¶æ€å˜æ›´ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸åº”è¯¥ç›´æ¥å½±å“åˆ°å…¶ä»–åº”ç”¨ã€‚è¿™ç§è®¾è®¡å¸¦æ¥äº†è¯¸å¤šå¥½å¤„ï¼š</p>
<ul>
<li><strong>æŠ€æœ¯æ ˆæ— å…³</strong>ï¼šæ¯ä¸ªå­åº”ç”¨å¯ä»¥è‡ªç”±é€‰æ‹©è‡ªå·±çš„æŠ€æœ¯æ ˆï¼ˆå¦‚ Vue, React, Angularï¼‰å’ŒçŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚ Vuex, Redux, MobXï¼‰ï¼Œè€Œæ— éœ€è€ƒè™‘ä¸å…¶ä»–åº”ç”¨çš„å…¼å®¹æ€§é—®é¢˜ã€‚</li>
<li><strong>ç‹¬ç«‹å¼€å‘ä¸éƒ¨ç½²</strong>ï¼šç”±äºçŠ¶æ€æ˜¯éš”ç¦»çš„ï¼Œå„ä¸ªå›¢é˜Ÿå¯ä»¥ç‹¬ç«‹åœ°å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²è‡ªå·±çš„å¾®åº”ç”¨ï¼Œè€Œä¸ä¼šç›¸äº’å¹²æ‰°ï¼Œå¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡å’Œè¿­ä»£é€Ÿåº¦ã€‚</li>
<li><strong>æ•…éšœéš”ç¦»</strong>ï¼šä¸€ä¸ªå­åº”ç”¨çš„çŠ¶æ€ç®¡ç†å‡ºç° bug æˆ–å´©æºƒï¼Œå…¶å½±å“èŒƒå›´è¢«é™åˆ¶åœ¨è¯¥åº”ç”¨å†…éƒ¨ï¼Œä¸ä¼šæ‰©æ•£åˆ°æ•´ä¸ªç³»ç»Ÿï¼Œä»è€Œæé«˜äº†æ•´ä¸ªå¾®å‰ç«¯ç³»ç»Ÿçš„å¥å£®æ€§å’Œç¨³å®šæ€§ã€‚</li>
</ul>
<p>è¿™ç§â€œçŠ¶æ€éš”ç¦»â€çš„å“²å­¦ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†å¾®åº”ç”¨ä¹‹é—´å› çŠ¶æ€è€¦åˆè€Œå¯èƒ½å¼•å‘çš„â€œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«â€çš„æ··ä¹±å±€é¢ï¼Œæ˜¯å®ç°çœŸæ­£å¾®æœåŠ¡åŒ–å‰ç«¯çš„å…³é”®ã€‚</p>
<h4 data-id="heading-37">3.1.2 çŠ¶æ€å…±äº«çš„å¿…è¦æ€§ä¸æŒ‘æˆ˜</h4>
<p>å°½ç®¡çŠ¶æ€éš”ç¦»æ˜¯åŸºæœ¬åŸåˆ™ï¼Œä½†åœ¨ä¸€ä¸ªå®Œæ•´çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œå®Œå…¨çš„çŠ¶æ€éš”ç¦»æ˜¯ä¸ç°å®çš„ã€‚æ€»æœ‰ä¸€äº›â€œå…¨å±€çŠ¶æ€â€æˆ–â€œè·¨åº”ç”¨çŠ¶æ€â€éœ€è¦åœ¨å¤šä¸ªå¾®åº”ç”¨ä¹‹é—´å…±äº«å’ŒåŒæ­¥ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>ç”¨æˆ·è®¤è¯çŠ¶æ€</strong>ï¼šç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ã€tokenã€æƒé™è§’è‰²ç­‰ï¼Œæ˜¯å‡ ä¹æ‰€æœ‰åº”ç”¨éƒ½éœ€è¦è®¿é—®çš„ã€‚</li>
<li><strong>å…¨å±€é…ç½®</strong>ï¼šå¦‚ UI ä¸»é¢˜ï¼ˆäº®è‰²/æš—è‰²ï¼‰ã€è¯­è¨€åå¥½ã€åº”ç”¨å¸ƒå±€è®¾ç½®ç­‰ã€‚</li>
<li><strong>è·¨åº”ç”¨ä¸šåŠ¡æµç¨‹</strong>ï¼šä¸€ä¸ªä¸šåŠ¡æµç¨‹å¯èƒ½è·¨è¶Šå¤šä¸ªå­åº”ç”¨ï¼Œéœ€è¦å…±äº«ä¸€äº›æµç¨‹ç›¸å…³çš„ä¸­é—´çŠ¶æ€ã€‚</li>
</ul>
<p>å®ç°è¿™äº›çŠ¶æ€çš„å…±äº«é¢ä¸´ç€è¯¸å¤šæŒ‘æˆ˜ï¼š</p>
<ul>
<li><strong>è€¦åˆåº¦</strong>ï¼šå¦‚ä½•åœ¨å…±äº«çŠ¶æ€çš„åŒæ—¶ï¼Œå°½å¯èƒ½åœ°é™ä½åº”ç”¨é—´çš„è€¦åˆåº¦ï¼Ÿ</li>
<li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šå¦‚ä½•ä¿è¯å…±äº«çŠ¶æ€åœ¨å¤šä¸ªåº”ç”¨ä¸­çš„å‰¯æœ¬èƒ½å¤Ÿä¿æŒä¸€è‡´ï¼Ÿ</li>
<li><strong>æ€§èƒ½</strong>ï¼šçŠ¶æ€åŒæ­¥æœºåˆ¶æ˜¯å¦ä¼šå¼•å…¥é¢å¤–çš„æ€§èƒ½å¼€é”€ï¼Ÿ</li>
<li><strong>è°ƒè¯•å¤æ‚æ€§</strong>ï¼šå½“å…±äº«çŠ¶æ€å‡ºç°é—®é¢˜æ—¶ï¼Œå¦‚ä½•å¿«é€Ÿå®šä½å’Œè°ƒè¯•ï¼Ÿ</li>
</ul>
<p>æ— ç•Œæ¡†æ¶é€šè¿‡å…¶çµæ´»çš„é€šä¿¡æœºåˆ¶ï¼ˆPropsã€Windowã€EventBusï¼‰æ¥åº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼Œæä¾›äº†ä¸€å¥—è¡Œä¹‹æœ‰æ•ˆçš„è·¨åº”ç”¨çŠ¶æ€å…±äº«æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-38">3.2 è·¨åº”ç”¨çŠ¶æ€å…±äº«æ–¹æ¡ˆ</h3>
<p>åŸºäºæ— ç•Œæ¡†æ¶æä¾›çš„é€šä¿¡æœºåˆ¶ï¼Œå¼€å‘è€…å¯ä»¥æ„å»ºå¤šç§è·¨åº”ç”¨çŠ¶æ€å…±äº«æ–¹æ¡ˆã€‚è¿™äº›æ–¹æ¡ˆå„æœ‰ä¾§é‡ï¼Œé€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼Œå…±åŒæ„æˆäº†æ— ç•Œå¾®å‰ç«¯çš„çŠ¶æ€ç®¡ç†ä½“ç³»ã€‚</p>
<h4 data-id="heading-39">3.2.1 åŸºäº EventBus çš„çŠ¶æ€åŒæ­¥</h4>
<p>è¿™æ˜¯æ— ç•Œå¾®å‰ç«¯ä¸­æœ€å¸¸ç”¨ã€æœ€æ¨èçš„è·¨åº”ç”¨çŠ¶æ€å…±äº«æ–¹æ¡ˆã€‚å®ƒåˆ©ç”¨ EventBus çš„å‘å¸ƒ-è®¢é˜…æœºåˆ¶ï¼Œå®ç°äº†çŠ¶æ€çš„è§£è€¦åŒæ­¥ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå°†çŠ¶æ€å˜æ›´è§†ä¸ºä¸€ç§â€œäº‹ä»¶â€ï¼Œå½“æŸä¸ªåº”ç”¨ï¼ˆçŠ¶æ€æ‰€æœ‰è€…ï¼‰ä¿®æ”¹äº†å…±äº«çŠ¶æ€æ—¶ï¼Œå®ƒä¼šå‘å¸ƒä¸€ä¸ªç›¸åº”çš„äº‹ä»¶ï¼Œå¹¶å°†æ–°çš„çŠ¶æ€å€¼ä½œä¸ºäº‹ä»¶è´Ÿè½½ã€‚å…¶ä»–éœ€è¦å…³å¿ƒè¿™ä¸ªçŠ¶æ€çš„åº”ç”¨ï¼ˆçŠ¶æ€æ¶ˆè´¹è€…ï¼‰åˆ™ç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œå¹¶åœ¨æ”¶åˆ°é€šçŸ¥åï¼Œæ›´æ–°è‡ªå·±çš„æœ¬åœ°çŠ¶æ€å‰¯æœ¬ ã€‚</p>
<p><strong>å®ç°æ­¥éª¤</strong>ï¼š</p>
<ol>
<li><strong>å®šä¹‰çŠ¶æ€å¥‘çº¦</strong>ï¼šé¦–å…ˆï¼Œéœ€è¦ä¸ºæ¯ä¸ªå…±äº«çŠ¶æ€å®šä¹‰ä¸€ä¸ªæ¸…æ™°çš„äº‹ä»¶åå’Œæ•°æ®ç»“æ„ï¼ˆå³â€œçŠ¶æ€å¥‘çº¦â€ï¼‰ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ç™»å½•çŠ¶æ€çš„äº‹ä»¶åå¯ä»¥å®šä¹‰ä¸º <code>global:user:login</code>ï¼Œå…¶è´Ÿè½½ä¸º <code>{ userId: number, username: string, token: string }</code>ã€‚</li>
<li><strong>çŠ¶æ€æ‰€æœ‰è€…å‘å¸ƒäº‹ä»¶</strong>ï¼šå½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·ç™»å½•æˆåŠŸï¼‰ï¼Œè´Ÿè´£ç”¨æˆ·è®¤è¯çš„åº”ç”¨ï¼ˆå¯èƒ½æ˜¯ä¸»åº”ç”¨æˆ–ä¸€ä¸ªä¸“é—¨çš„è®¤è¯å­åº”ç”¨ï¼‰ä¼šé€šè¿‡ <code>EventBus</code> å‘å¸ƒäº‹ä»¶ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ç”¨æˆ·è®¤è¯æˆåŠŸå</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">$wujie</span>?.<span class="hljs-property">bus</span>.$emit(<span class="hljs-string">'global:user:login'</span>, { 
  <span class="hljs-attr">userId</span>: <span class="hljs-number">123</span>, 
  <span class="hljs-attr">username</span>: <span class="hljs-string">'Alice'</span>, 
  <span class="hljs-attr">token</span>: <span class="hljs-string">'abc123...'</span> 
});
</code></pre>
</li>
<li><strong>çŠ¶æ€æ¶ˆè´¹è€…ç›‘å¬äº‹ä»¶</strong>ï¼šæ‰€æœ‰éœ€è¦è®¿é—®ç”¨æˆ·ä¿¡æ¯çš„å­åº”ç”¨ï¼Œåœ¨åˆå§‹åŒ–æ—¶éƒ½ä¼šç›‘å¬è¿™ä¸ªäº‹ä»¶ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨å­åº”ç”¨çš„åˆå§‹åŒ–é€»è¾‘ä¸­</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">$wujie</span>?.<span class="hljs-property">bus</span>.$on(<span class="hljs-string">'global:user:login'</span>, <span class="hljs-function">(<span class="hljs-params">userData</span>) =&gt;</span> {
  <span class="hljs-comment">// å°†æ¥æ”¶åˆ°çš„ç”¨æˆ·æ•°æ®å­˜å‚¨åˆ°å­åº”ç”¨è‡ªå·±çš„çŠ¶æ€ç®¡ç†åº“ä¸­</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'setUser'</span>, userData);
});
</code></pre>
</li>
</ol>
<p>è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯è§£è€¦ã€çµæ´»ä¸”æ˜“äºæ‰©å±•ã€‚æ–°å¢ä¸€ä¸ªéœ€è¦å…±äº«çŠ¶æ€çš„åº”ç”¨ï¼Œåªéœ€è®©å®ƒç›‘å¬ç›¸åº”çš„äº‹ä»¶å³å¯ï¼Œæ— éœ€ä¿®æ”¹å…¶ä»–åº”ç”¨çš„ä»£ç ã€‚</p>
<h4 data-id="heading-40">3.2.2 æ„å»ºç»Ÿä¸€çš„å…¨å±€çŠ¶æ€ä»“åº“</h4>
<p>å¯¹äºçŠ¶æ€å…±äº«éœ€æ±‚éå¸¸å¤æ‚çš„ç³»ç»Ÿï¼Œå¯ä»¥è€ƒè™‘åœ¨ä¸»åº”ç”¨ä¸­æ„å»ºä¸€ä¸ªç»Ÿä¸€çš„å…¨å±€çŠ¶æ€ä»“åº“ï¼ˆGlobal State Storeï¼‰ã€‚è¿™ä¸ªä»“åº“è´Ÿè´£ç®¡ç†æ‰€æœ‰éœ€è¦è·¨åº”ç”¨å…±äº«çš„çŠ¶æ€ï¼Œå¹¶æä¾›ç»Ÿä¸€çš„æ¥å£ï¼ˆå¦‚ <code>getState</code>, <code>setState</code>ï¼‰ä¾›å…¶ä»–åº”ç”¨è®¿é—®ã€‚</p>
<p><strong>å®ç°æ–¹å¼</strong>ï¼š</p>
<ol>
<li><strong>ä¸»åº”ç”¨åˆ›å»ºä»“åº“</strong>ï¼šä¸»åº”ç”¨åˆ›å»ºä¸€ä¸ªå…¨å±€çš„çŠ¶æ€ç®¡ç†å¯¹è±¡ï¼Œå¹¶å°†å…¶æŒ‚è½½åœ¨ <code>window</code> ä¸Šï¼Œæˆ–è€…é€šè¿‡ <code>props</code> æ³¨å…¥åˆ°æ‰€æœ‰å­åº”ç”¨ä¸­ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ä¸»åº”ç”¨ä¸­</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">GlobalState</span> = {
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,
  },
  <span class="hljs-title function_">setState</span>(<span class="hljs-params">key, value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>[key] = value;
    <span class="hljs-comment">// çŠ¶æ€å˜æ›´åï¼Œé€šè¿‡ EventBus é€šçŸ¥æ‰€æœ‰å­åº”ç”¨</span>
    bus.$emit(<span class="hljs-string">`global:state:change:<span class="hljs-subst">${key}</span>`</span>, value);
  },
  <span class="hljs-title function_">getState</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>[key];
  }
};
</code></pre>
</li>
<li><strong>å­åº”ç”¨è®¿é—®ä»“åº“</strong>ï¼šå­åº”ç”¨å¯ä»¥é€šè¿‡ <code>window.GlobalState</code> ç›´æ¥è¯»å–çŠ¶æ€ï¼Œæˆ–é€šè¿‡è°ƒç”¨ <code>setState</code> æ–¹æ³•æ¥ä¿®æ”¹çŠ¶æ€ã€‚çŠ¶æ€çš„å˜æ›´åŒæ ·é€šè¿‡ <code>EventBus</code> å¹¿æ’­å‡ºå»ï¼Œä»¥ä¿è¯æ‰€æœ‰åº”ç”¨çš„çŠ¶æ€å‰¯æœ¬åŒæ­¥æ›´æ–°ã€‚</li>
</ol>
<p>è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯çŠ¶æ€ç®¡ç†é›†ä¸­åŒ–ï¼Œä¾¿äºç»Ÿä¸€æ§åˆ¶å’Œè°ƒè¯•ã€‚ä½†ç¼ºç‚¹æ˜¯ä¼šå¢åŠ ä¸»åº”ç”¨çš„å¤æ‚æ€§ï¼Œå¹¶ä¸”å¦‚æœè®¾è®¡ä¸å½“ï¼Œå¯èƒ½ä¼šæˆä¸ºç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆã€‚</p>
<h4 data-id="heading-41">3.2.3 çŠ¶æ€æµè½¬ä¸åŒæ­¥æœºåˆ¶</h4>
<p>æ— è®ºé‡‡ç”¨å“ªç§å…±äº«æ–¹æ¡ˆï¼Œéƒ½éœ€è¦å…³æ³¨çŠ¶æ€çš„æµè½¬ä¸åŒæ­¥æœºåˆ¶ã€‚</p>
<ul>
<li><strong>å•å‘æ•°æ®æµ</strong>ï¼šæ¨èé‡‡ç”¨ç±»ä¼¼ Flux çš„å•å‘æ•°æ®æµæ¨¡å¼ã€‚çŠ¶æ€å˜æ›´åªèƒ½ç”±â€œçŠ¶æ€æ‰€æœ‰è€…â€å‘èµ·ï¼Œå…¶ä»–åº”ç”¨åªèƒ½è¢«åŠ¨æ¥æ”¶é€šçŸ¥å¹¶æ›´æ–°æœ¬åœ°å‰¯æœ¬ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹å…±äº«çŠ¶æ€ã€‚è¿™æœ‰åŠ©äºä¿è¯çŠ¶æ€å˜æ›´çš„å¯é¢„æµ‹æ€§å’Œå¯è¿½è¸ªæ€§ã€‚</li>
<li><strong>çŠ¶æ€ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šå¯¹äºå¤æ‚çš„å…±äº«çŠ¶æ€ï¼Œå¯ä»¥å¼•å…¥ç‰ˆæœ¬å·æˆ–æ—¶é—´æˆ³ã€‚å½“çŠ¶æ€å˜æ›´æ—¶ï¼Œç‰ˆæœ¬å·é€’å¢ã€‚çŠ¶æ€æ¶ˆè´¹è€…åœ¨æ›´æ–°æœ¬åœ°å‰¯æœ¬æ—¶ï¼Œå¯ä»¥æ£€æŸ¥ç‰ˆæœ¬å·ï¼Œä»¥é¿å…å¤„ç†è¿‡æœŸçš„çŠ¶æ€æ›´æ–°ã€‚</li>
<li><strong>çŠ¶æ€æŒä¹…åŒ–</strong>ï¼šå¯¹äºéœ€è¦æŒä¹…åŒ–çš„å…±äº«çŠ¶æ€ï¼ˆå¦‚ç”¨æˆ·åå¥½è®¾ç½®ï¼‰ï¼Œå¯ä»¥åœ¨çŠ¶æ€å˜æ›´æ—¶ï¼Œå°†å…¶åŒæ­¥åˆ° <code>localStorage</code> æˆ–å‘é€åˆ°åç«¯æœåŠ¡å™¨ã€‚åº”ç”¨å¯åŠ¨æ—¶ï¼Œå†ä»æŒä¹…åŒ–å­˜å‚¨ä¸­æ¢å¤çŠ¶æ€ã€‚</li>
</ul>
<h3 data-id="heading-42">3.3 çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ</h3>
<p>ä¸ºäº†æ„å»ºä¸€ä¸ªå¥å£®ã€å¯ç»´æŠ¤çš„è·¨åº”ç”¨çŠ¶æ€ç®¡ç†ä½“ç³»ï¼Œå¼€å‘è€…åº”éµå¾ªä»¥ä¸‹æœ€ä½³å®è·µï¼š</p>
<h4 data-id="heading-43">3.3.1 çŠ¶æ€å¥‘çº¦ä¸æ¥å£å®šä¹‰</h4>
<ul>
<li><strong>æ–‡æ¡£åŒ–</strong>ï¼šä¸ºæ‰€æœ‰å…±äº«çŠ¶æ€åŠå…¶å¯¹åº”çš„äº‹ä»¶åˆ›å»ºä¸€ä»½è¯¦ç»†çš„æ–‡æ¡£ï¼Œæ˜ç¡®äº‹ä»¶åã€è´Ÿè½½çš„æ•°æ®ç»“æ„ã€è§¦å‘æ—¶æœºå’Œä½¿ç”¨åœºæ™¯ã€‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šå¦‚æœä½¿ç”¨ TypeScriptï¼Œåº”ä¸ºå…±äº«çŠ¶æ€å®šä¹‰æ¸…æ™°çš„æ¥å£ï¼ˆInterfaceï¼‰æˆ–ç±»å‹ï¼ˆTypeï¼‰ï¼Œå¹¶åœ¨å‘å¸ƒå’Œç›‘å¬äº‹ä»¶æ—¶ä½¿ç”¨è¿™äº›ç±»å‹ï¼Œä»¥è·å¾—ç¼–è¯‘æ—¶çš„ç±»å‹æ£€æŸ¥å’Œä»£ç æç¤ºã€‚</li>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šé‡‡ç”¨ç»Ÿä¸€çš„ã€å¸¦æœ‰å‘½åç©ºé—´çš„äº‹ä»¶å‘½åè§„èŒƒï¼Œå¦‚ <code>domain:entity:action</code>ï¼ˆä¾‹å¦‚ <code>user:profile:update</code>ï¼‰ï¼Œä»¥é¿å…å‘½åå†²çªã€‚</li>
</ul>
<h4 data-id="heading-44">3.3.2 çŠ¶æ€å˜æ›´çš„è¿½è¸ªä¸è°ƒè¯•</h4>
<ul>
<li><strong>æ—¥å¿—è®°å½•</strong>ï¼šåœ¨çŠ¶æ€æ‰€æœ‰è€…å‘å¸ƒäº‹ä»¶å’ŒçŠ¶æ€æ¶ˆè´¹è€…æ¥æ”¶äº‹ä»¶çš„åœ°æ–¹ï¼Œæ·»åŠ è¯¦ç»†çš„æ—¥å¿—è®°å½•ï¼ŒåŒ…æ‹¬äº‹ä»¶åã€è´Ÿè½½æ•°æ®å’Œå‘ç”Ÿæ—¶é—´ã€‚è¿™æœ‰åŠ©äºåœ¨å‡ºç°é—®é¢˜æ—¶è¿›è¡Œè¿½è¸ªå’Œè°ƒè¯•ã€‚</li>
<li><strong>å¼€å‘å·¥å…·</strong>ï¼šå¯ä»¥åˆ©ç”¨ä¸€äº›çŠ¶æ€ç®¡ç†å¼€å‘å·¥å…·ï¼ˆå¦‚ Redux DevToolsï¼‰çš„æ’ä»¶ï¼Œæˆ–è€…è‡ªè¡Œå¼€å‘ä¸€ä¸ªç®€å•çš„è°ƒè¯•é¢æ¿ï¼Œæ¥å¯è§†åŒ–åœ°å±•ç¤ºå…¨å±€çŠ¶æ€çš„å˜åŒ–å†å²å’Œå½“å‰å¿«ç…§ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šåœ¨çŠ¶æ€åŒæ­¥çš„é€»è¾‘ä¸­ï¼Œæ·»åŠ å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚ä¾‹å¦‚ï¼Œå½“æ¥æ”¶åˆ°æ ¼å¼é”™è¯¯çš„çŠ¶æ€æ•°æ®æ—¶ï¼Œåº”è®°å½•é”™è¯¯æ—¥å¿—ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªé»˜è®¤å€¼æˆ–å›é€€é€»è¾‘ï¼Œé¿å…åº”ç”¨å´©æºƒã€‚</li>
</ul>
<h4 data-id="heading-45">3.3.3 çŠ¶æ€æŒä¹…åŒ–ä¸æ¢å¤</h4>
<ul>
<li><strong>é€‰æ‹©æ€§æŒä¹…åŒ–</strong>ï¼šå¹¶éæ‰€æœ‰çŠ¶æ€éƒ½éœ€è¦æŒä¹…åŒ–ã€‚åªå¯¹é‚£äº›ç”¨æˆ·å¸Œæœ›è·¨ä¼šè¯ä¿ç•™çš„çŠ¶æ€ï¼ˆå¦‚ç™»å½•ä¿¡æ¯ã€ä¸»é¢˜åå¥½ï¼‰è¿›è¡ŒæŒä¹…åŒ–ã€‚</li>
<li><strong>åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</strong>ï¼šåœ¨å°†çŠ¶æ€å­˜å…¥ <code>localStorage</code> æˆ–ä»å…¶ä¸­è¯»å–æ—¶ï¼Œéœ€è¦è¿›è¡Œæ­£ç¡®çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å¯¹äºå¤æ‚å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>JSON.stringify</code> å’Œ <code>JSON.parse</code>ã€‚</li>
<li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šå½“å…±äº«çŠ¶æ€çš„æ•°æ®ç»“æ„å‘ç”Ÿå˜æ›´æ—¶ï¼ˆä¾‹å¦‚ï¼Œæ–°å¢äº†ä¸€ä¸ªå­—æ®µï¼‰ï¼Œéœ€è¦è€ƒè™‘ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ã€‚å¯ä»¥åœ¨æŒä¹…åŒ–çš„æ•°æ®ä¸­åŒ…å«ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œåœ¨æ¢å¤çŠ¶æ€æ—¶ï¼Œæ ¹æ®ç‰ˆæœ¬å·è¿›è¡Œç›¸åº”çš„æ•°æ®è¿ç§»æˆ–è½¬æ¢ã€‚</li>
</ul>
<p>é€šè¿‡éµå¾ªè¿™äº›æœ€ä½³å®è·µï¼Œå¼€å‘è€…å¯ä»¥åœ¨æ— ç•Œå¾®å‰ç«¯æ¡†æ¶ä¸‹ï¼Œæ„å»ºä¸€ä¸ªæ—¢çµæ´»åˆå¥å£®çš„è·¨åº”ç”¨çŠ¶æ€ç®¡ç†ç³»ç»Ÿï¼Œä¸ºå¤æ‚ä¸šåŠ¡åœºæ™¯çš„å®ç°æä¾›åšå®çš„æ”¯æ’‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/591acd70566f4c4ab71f397808b881d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764903092&amp;x-signature=gJVvZqiHPWL%2F8lmsvEoQLW%2BLIfQ%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸Šæµ·è¯åˆ¸ SelectDB å‡çº§å®è·µï¼šæ¹–ä»“æµæ‰¹ä¸€ä½“è½åœ°ä¸ Elasticsearch å…¨é¢æ›¿æ¢]]></title>    <link>https://juejin.cn/post/7577298871004217378</link>    <guid>https://juejin.cn/post/7577298871004217378</guid>    <pubDate>2025-11-28T03:22:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577298871004217378" data-draft-id="7577294037717270562" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸Šæµ·è¯åˆ¸ SelectDB å‡çº§å®è·µï¼šæ¹–ä»“æµæ‰¹ä¸€ä½“è½åœ°ä¸ Elasticsearch å…¨é¢æ›¿æ¢"/> <meta itemprop="keywords" content="Apache,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-28T03:22:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸Šæµ·è¯åˆ¸ SelectDB å‡çº§å®è·µï¼šæ¹–ä»“æµæ‰¹ä¸€ä½“è½åœ°ä¸ Elasticsearch å…¨é¢æ›¿æ¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:22:21.000Z" title="Fri Nov 28 2025 03:22:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¯¼è¯»</p>
<p>ä¸Šæµ·è¯åˆ¸å¼•å…¥ SelectDB ä½œä¸ºæ ¸å¿ƒå®æ—¶åˆ†æå¼•æ“ï¼Œæœ‰æ•ˆå¼¥è¡¥äº†å®æ—¶æ•°æ®å¤„ç†ä¸åˆ†æçš„èƒ½åŠ›çŸ­æ¿ï¼Œå®ç°æ¹–ä»“ä¸€ä½“ä¸æµæ‰¹ä¸€ä½“ï¼ŒåŒæ—¶æ›¿æ¢äº†åŸæ¶æ„ä¸­çš„ Elasticsearch ç»„ä»¶ã€‚è¾¾æˆäº†å†™å…¥æ€§èƒ½æå‡ 4 å€ï¼Œæ”¯æ’‘ 1000+ QPS é«˜å¹¶å‘è®¿é—®ï¼Œå…³é”®å†³ç­–å“åº”é€Ÿåº¦ 200 msï¼Œå¼€å‘æ•ˆç‡æå‡ 50%ï¼Œè¿ç»´æˆæœ¬å¤§å¹…é™ä½çš„å…³é”®æ”¶ç›Šã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸šåŠ¡èƒŒæ™¯</h2>
<p>ä¸Šæµ·è¯åˆ¸æˆç«‹äº 2001 å¹´ 5 æœˆï¼Œç§‰æ‰¿â€œå¼€æ”¾ã€åŒ…å®¹ã€è§„èŒƒã€ååŒâ€çš„æ ¸å¿ƒç†å¿µï¼Œè‡´åŠ›äºæˆä¸ºâ€œç‰¹è‰²é²œæ˜ã€åŒºåŸŸé¢†å…ˆã€å“ç‰ŒçŸ¥åâ€å…·æœ‰ä¸“ä¸šç‰¹è‰²çš„è´¢å¯Œç®¡ç†å‹åˆ¸å•†ã€‚è¿‘å¹´æ¥ï¼Œä¸Šæµ·è¯åˆ¸èµ„äº§è§„æ¨¡æŒç»­æ‰©å¤§ï¼Œç»è¥å®åŠ›ä¸æ–­å¢å¼ºï¼Œå–å¾—äº†æ˜¾è‘—çš„ç¤¾ä¼šæ•ˆç›Šå’Œç»æµæ•ˆç›Šã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œæ•°æ®åŸºç¡€è®¾æ–½çš„å»ºè®¾ä¹Ÿéœ€è¿›ä¸€æ­¥æ·±åŒ–ï¼Œä»¥åº”å¯¹æŒç»­å¢é•¿çš„ä¸šåŠ¡è§„æ¨¡å¸¦æ¥çš„æŒ‘æˆ˜ã€‚ä¸Šæµ·è¯åˆ¸åŸå…ˆåŸºäº Hadoop ä½“ç³»å»ºè®¾æ•°æ®å¹³å°ï¼Œé¢ä¸´ç€ä¸‰é‡æŒ‘æˆ˜ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40bf655073fd4675ac826992b9f94492~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764904941&amp;x-signature=1S%2BpnWCkh1KLgyM9%2BEYwzR2Bo%2BQ%3D" alt="ä¸Šæµ·è¯åˆ¸_doris_ä¸šåŠ¡èƒŒæ™¯.PNG" loading="lazy"/></p>
<ul>
<li>
<p><strong>æ¶æ„å­¤å²›åŒ–ï¼š</strong> å½“å‰æ¶æ„ä¸ºçƒŸå›±å¼æ•°æ®æ¶æ„ï¼Œå­˜åœ¨å¤šå¥—ç‹¬ç«‹çš„æ•°æ®é‡‡é›†ã€è°ƒåº¦å·¥å…·ï¼ŒååŒæ•ˆç‡ä½ä¸‹ã€‚</p>
</li>
<li>
<p><strong>æ ‡å‡†ä½“ç³»ç¼ºå¤±ï¼š</strong> ç¼ºä¹ç»Ÿä¸€æ•°æ®æ ‡å‡†è§„èŒƒï¼Œå…¨æµç¨‹è´¨é‡ç®¡æ§ä¾èµ–æŠ€æœ¯éƒ¨é—¨å¼ºé©±åŠ¨ã€‚</p>
</li>
<li>
<p><strong>æœåŠ¡èƒ½åŠ›æ–­å±‚ï¼š</strong> ç¼ºå°‘â€œæ°´åˆ°ç”°å¤´â€çš„æ•°æ®æœåŠ¡ï¼Œä¸šåŠ¡éƒ¨é—¨æ— æ³•è‡ªåŠ©å¿«é€Ÿè·å–æ•°æ®ï¼Œå†³ç­–å“åº”å»¶è¿Ÿè¾ƒé•¿ã€‚</p>
</li>
</ul>
<p>ä¸ºåº”å¯¹ä¸Šè¿°æŒ‘æˆ˜ï¼Œä¸Šæµ·è¯åˆ¸è®¡åˆ’æ„å»ºå…¨æ ˆä¿¡åˆ›æ•°æ®ä¸­å°ï¼Œä»¥åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰æ–¹é¢æ ¸å¿ƒéœ€æ±‚ï¼š</p>
<ul>
<li>
<p><strong>æŠ€æœ¯éœ€æ±‚</strong>ï¼šå…¨é¢å‡çº§æ•°æ®å¹³å°åŸºç¡€è®¾æ–½ï¼Œå®ç°å›½äº§åŒ–ä¸æŠ€æœ¯è‡ªä¸»æŒæ§ï¼Œæ‰“é€ é›†æ•°æ®æ²»ç†ã€å¼€å‘ã€åˆ†æã€åº”ç”¨äºä¸€ä½“çš„ä¸€ç«™å¼å¹³å°ã€‚åŸæœ‰æ¶æ„ä¸­ï¼Œç¼ºå°‘å®æ—¶æ•°æ®å¤„ç†ä¸åˆ†æèƒ½åŠ›ï¼Œéœ€è¦å¼•å…¥ç›¸å…³äº§å“ï¼Œå®ç°æ¹–ä»“ä¸€ä½“ä¸æµæ‰¹ä¸€ä½“èƒ½åŠ›ï¼Œçªç ´å®æ—¶åˆ†æç“¶é¢ˆã€‚</p>
</li>
<li>
<p><strong>ä¸šåŠ¡éœ€æ±‚ï¼š</strong> å…¨é¢æ”¯æ’‘å®æ—¶ä¸ç¦»çº¿è®¡ç®—ã€ç»“æ„åŒ–ä¸éç»“æ„åŒ–æ•°æ®åˆ†æï¼Œèµ‹èƒ½å…¬å¸å„ä¸šåŠ¡çº¿æ•°å­—åŒ–è½¬å‹ã€‚</p>
</li>
<li>
<p><strong>æ•ˆç‡ä¸æˆæœ¬éœ€æ±‚ï¼š</strong> å…¨é¢æ•´åˆå…¬å¸æ•°æ®èµ„æºï¼Œæœ‰æ•ˆé™ä½æ€»ä½“æ•°æ®æˆæœ¬ï¼Œæ˜¾è‘—æå‡æ•°æ®å¼€å‘æ•ˆç‡ã€‚é€šè¿‡é€‰æ‹©é€‚é…çš„äº§å“ç»„åˆï¼Œä»¥æœ€ä¼˜è·¯å¾„å®Œæˆæ•°æ®ä¸­å°çš„æ„å»ºã€‚</p>
</li>
</ul>
<h2 data-id="heading-1">åŸºäº SelectDB çš„æ•°æ®ä¸­å°æ–¹æ¡ˆ</h2>
<p>é¢å¯¹ä¸Šè¿°éœ€æ±‚ï¼Œä¸Šæµ·è¯åˆ¸äº 2024 å¹´ 2 æœˆæ­£å¼å®ŒæˆåŸºäº SelectDB çš„æ•°æ®ä¸­å°åŸºç¡€æ­å»ºï¼Œ10 æœˆå®ç°å…¨é‡ä¸šåŠ¡è¿ç§»ï¼Œç›®å‰å¤„äºæ·±åº¦åº”ç”¨æœŸã€‚</p>
<h3 data-id="heading-2">01 æ•´ä½“æ¶æ„æ–¹æ¡ˆ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce53783ef23545c383b4862f42b3d1a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764904941&amp;x-signature=sc%2BxN2iWt4a%2BKFHJU6Nha1%2BEX60%3D" alt="åŸºäº SelectDB çš„æ•°æ®ä¸­å°æ–¹æ¡ˆ.PNG" loading="lazy"/></p>
<p>ä¸ºå¹³è¡¡æˆæœ¬ä¸æ•ˆç‡ï¼Œä¸Šæµ·è¯åˆ¸åœ¨åŸºç¡€æ¶æ„è®¾è®¡ä¸­ä¿ç•™äº†å¤§éƒ¨åˆ†ç°æœ‰ Hadoop ç»„ä»¶ï¼Œå¼•å…¥ <strong>SelectDB ä½œä¸ºæ ¸å¿ƒå®æ—¶åˆ†æå¼•æ“çš„åŒæ—¶ï¼Œæ›¿æ¢äº† Elasticsearchã€‚SelectDB çš„å¼•å…¥æœ‰æ•ˆå¼¥è¡¥äº†åŸæ¶æ„ä¸­å®æ—¶æ•°æ®å¤„ç†ä¸åˆ†æçš„èƒ½åŠ›çŸ­æ¿ï¼Œæˆä¸ºä¸Šæµ·è¯åˆ¸å®ç°æ¹–ä»“ä¸€ä½“ä¸æµæ‰¹ä¸€ä½“çš„å…³é”®æŠ€æœ¯æ”¯æ’‘ã€‚</strong></p>
<ul>
<li>
<p><strong>å…¨é¢æ”¯æŒ Hadoop ç”Ÿæ€ï¼Œå®ç°æ¹–ä»“ä¸€ä½“ï¼š</strong> SelectDB èƒ½å¤Ÿæ— ç¼å¯¹æ¥å¹¶é«˜æ•ˆè®¿é—®ä¸Šæµ·è¯åˆ¸ç°æœ‰ Hadoop ä½“ç³»ä¸­çš„ HDFS å­˜å‚¨å’Œ Hive å…ƒæ•°æ®ï¼Œæœ€å¤§ç¨‹åº¦åœ°å¤ç”¨å·²æœ‰æ•°æ®èµ„äº§ã€‚åŒæ—¶ SelectDB æä¾›é«˜æ€§èƒ½å®æ—¶åˆ†æèƒ½åŠ›ï¼Œç»Ÿä¸€æ”¯æ’‘ä¸Šæµ·è¯åˆ¸ç»“æ„åŒ–ä¸éç»“æ„åŒ–æ•°æ®çš„åˆ†æéœ€æ±‚ã€‚</p>
</li>
<li>
<p><strong>æ„å»ºæ•°æ®æ²»ç†ã€å¼€å‘ã€æœåŠ¡ä¸€ä½“åŒ–å¹³å°ï¼š</strong> ä¸Šæµ·è¯åˆ¸åŸºäº SelectDB æ„å»ºçš„æ–°å¹³å°æ•´åˆäº†æ•°æ®æ²»ç†è§„èŒƒã€ç»Ÿä¸€å¼€å‘æµç¨‹å’Œè‡ªåŠ©æ•°æ®æœåŠ¡èƒ½åŠ›ï¼Œè§£å†³äº†åŸæœ‰æ¶æ„æ ‡å‡†ç¼ºå¤±ã€æµç¨‹å‰²è£‚çš„é—®é¢˜ï¼Œå®ç°äº†ä»æ•°æ®å…¥æ¹–åˆ°ä¸šåŠ¡åº”ç”¨çš„å…¨ç”Ÿå‘½å‘¨æœŸä¸€ä½“åŒ–ç®¡ç†ã€‚</p>
</li>
<li>
<p><strong>é€šè¿‡ç»Ÿä¸€æ•°æ®å¼€å‘å¹³å°ï¼Œå®ç°æµæ‰¹ä¸€ä½“ï¼š</strong> åˆ©ç”¨ SelectDB å¼ºå¤§çš„å®æ—¶å†™å…¥ä¸æ‰¹é‡å¤„ç†èƒ½åŠ›ï¼Œå®ç°äº†æµå¼æ•°æ®å’Œæ‰¹é‡æ•°æ®çš„ç»Ÿä¸€åŠ å·¥ã€å­˜å‚¨ä¸åˆ†æï¼ŒæˆåŠŸçªç ´äº†åŸæœ‰æ¶æ„çš„å®æ—¶åˆ†æç“¶é¢ˆï¼Œèµ‹èƒ½ä¸šåŠ¡å¿«é€Ÿå†³ç­–ã€‚</p>
</li>
<li>
<p><strong>å…¨æ ˆå›½äº§åŒ–å…¼å®¹ï¼š</strong> SelectDB åœ¨æ ¸å¿ƒå¼•æ“ã€å‘¨è¾¹ç”Ÿæ€åŠéƒ¨ç½²ç¯å¢ƒä¸Šå®ç°äº†å…¨é¢å›½äº§åŒ–å…¼å®¹ï¼Œæ»¡è¶³äº†è¯åˆ¸å…¬å¸å¯¹æ•°æ®å¹³å°åŸºç¡€è®¾æ–½å›½äº§åŒ–ä¸æŠ€æœ¯è‡ªä¸»æŒæ§çš„å…³é”®éœ€æ±‚ï¼Œä¿éšœäº†ç³»ç»Ÿå®‰å…¨å¯æ§ã€‚</p>
</li>
<li>
<p><strong>æœåŠ¡å›¢é˜Ÿæ”¯æŒåŠ›åº¦é«˜ï¼Œè¿ç»´æœ‰ä¿éšœï¼š</strong> SelectDB èƒŒåä¸“ä¸šæœåŠ¡å›¢é˜Ÿçš„é«˜æ•ˆå“åº”å’Œæœ‰åŠ›æ”¯æŒï¼Œä¸ºä¸Šæµ·è¯åˆ¸åœ¨å¹³å°å»ºè®¾ã€è¿ç§»ä¸Šçº¿å’ŒåæœŸè¿ç»´çš„å…¨è¿‡ç¨‹æä¾›äº†å¯é ä¿éšœï¼Œæœ‰æ•ˆé™ä½æŠ€æœ¯é£é™©ï¼Œç¡®ä¿å¹³å°ç¨³å®šè¿è¡Œã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">02 DataOps å¼€å‘æ²»ç†ä¸€ä½“åŒ–</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/942c823dc6ba40d69099453d37152856~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764904941&amp;x-signature=CDj8hBNbutom2p1vj8NgW%2BluwUM%3D" alt="02 DataOps å¼€å‘æ²»ç†ä¸€ä½“åŒ–.PNG" loading="lazy"/></p>
<p>ä¸Šæµ·è¯åˆ¸ä»¥â€œå…ˆè®¾è®¡ï¼Œåå¼€å‘ï¼›å…ˆæ ‡å‡†ï¼Œåå»ºæ¨¡â€ä¸ºæ ¸å¿ƒåŸåˆ™ï¼Œç»“åˆå…¨ä¿¡åˆ›æ•°æ®ä¸­å°ï¼Œæ„å»ºæ•°æ®å…¨ç”Ÿå‘½å‘¨æœŸé—­ç¯ç®¡ç†ä½“ç³»ï¼ˆå›¾ç‰‡æ¥æºäºç½‘ç»œï¼‰ï¼š</p>
<ul>
<li><strong>è®¾è®¡é˜¶æ®µï¼š</strong> é€šè¿‡ç»Ÿä¸€æ•°æ®æ ‡å‡†ã€ä¸ä¸šåŠ¡å¯¹é½çš„æŒ‡æ ‡è®¾è®¡åŠå¥å£®æ¨¡å‹è®¾è®¡ï¼Œä»æºå¤´ä¿éšœæ•°æ®è§„èŒƒæ€§ä¸è´¨é‡ã€‚</li>
<li><strong>å¼€å‘é˜¶æ®µï¼š</strong> ä¾æ‰˜ SelectDB é«˜æ•ˆè®¡ç®—èƒ½åŠ›ï¼Œæ— ç¼é›†æˆæ•°æ®ä¼ è¾“ã€ç¦»çº¿å¼€å‘ä¸è‡ªåŠ©åˆ†æä»»åŠ¡ï¼Œæ”¯æ’‘æµæ‰¹ä¸€ä½“æ•°æ®å¤„ç†ã€‚</li>
<li><strong>æµ‹è¯•åŠä¸Šçº¿é˜¶æ®µï¼š</strong> é€šè¿‡ä¸¥æ ¼çš„æ•°æ®æµ‹è¯•ã€è´¨é‡ç›‘æ§åŠä»»åŠ¡å‘å¸ƒæµç¨‹ï¼Œç»“åˆ SelectDB çš„å®æ—¶ç›‘æ§èƒ½åŠ›ï¼Œç¡®ä¿æ•°æ®å¯é å…¥æ¹–å¹¶æŒç»­ç¨³å®šè¿è¡Œã€‚</li>
</ul>
<p>ä¸Šæµ·è¯åˆ¸å§‹ç»ˆä¿éšœæ•°æ®åˆè§„ï¼Œå½¢æˆäº†â€œè®¾è®¡-å¼€å‘-æµ‹è¯•-ç›‘æ§â€çš„ä¸€ä½“åŒ–æ²»ç†ä½“ç³»ï¼ŒåŸºäº SelectDB å½»åº•è§£å†³äº†åŸæœ‰æ¶æ„æ ‡å‡†ç¼ºå¤±ã€æµç¨‹å‰²è£‚çš„é—®é¢˜ï¼Œèµ‹èƒ½ä¸šåŠ¡è‡ªåŠ©è·å–é«˜è´¨é‡æ•°æ®ã€‚</p>
<h3 data-id="heading-4">03 ç»Ÿä¸€æ•°æ®äº¤æ¢é“¾è·¯</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c1320ec892f4bb98a140cdcb982b809~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764904941&amp;x-signature=yPWHIsbXeuzxLvVrmCl%2BH7Laqxw%3D" alt="03 ç»Ÿä¸€æ•°æ®äº¤æ¢é“¾è·¯.png" loading="lazy"/></p>
<p>ä¸Šæµ·è¯åˆ¸é€šè¿‡æ„å»ºç»Ÿä¸€æ•°æ®äº¤æ¢å¹³å°ï¼Œæ‰“é€šäº†å…¬å¸çº§æ•°æ®æµè½¬é“¾è·¯ã€‚ å¹³å°é›†ä¸­ç®¡ç†å®æ—¶ä¸ç¦»çº¿æ•°æ®æœåŠ¡ï¼Œå¹¶å®æ–½ç»Ÿä¸€å®‰å…¨ç®¡æ§ï¼Œå°†åˆ†æ•£çš„è¡Œæƒ…ï¼ˆä¸‡å¾—/èšæºï¼‰ã€äº¤æ˜“ï¼ˆéç°/å¿«é€Ÿï¼‰ã€è´¦æˆ·ç­‰ä¸­å°æ•°æ®ä¸ä¸‹æ¸¸ä¸šåŠ¡ç³»ç»Ÿï¼ˆæŒ‡ E é€šå…¨å¾®æœåŠ¡ã€CRMã€åæ´—é’±ç­‰ 20+ æ¨¡å—ï¼‰é«˜æ•ˆè¿æ¥ã€‚<strong>å°¤å…¶æ˜¯å¯¹äºå®æ—¶åœºæ™¯ï¼ŒåŸºäº SelectDB Routine Load èƒ½åŠ›ä¾¿æ·æ¥å…¥ Kafka æ•°æ®ï¼Œå…¶é«˜å¹¶å‘æ•°æ®æ›´æ–°ååå¯è¾¾åˆ°ç™¾ä¸‡è¡Œæ¯ç§’ï¼Œä¸ºè¡Œæƒ…æ¨é€ã€æœºæ„æœåŠ¡ç­‰æä¾›äº†ç§’çº§å»¶è¿Ÿçš„æ•°æ®æœåŠ¡èƒ½åŠ›ã€‚</strong></p>
<h2 data-id="heading-5">åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-6">01 é‡‘èå®æ—¶äº¤æ˜“æˆ˜æŠ¥</h3>
<p>2024 å¹´ 9 æœˆ åº•ï¼Œè¯åˆ¸å¸‚åœºè¡Œæƒ…è¿…çŒ›çˆ†å‘ï¼Œä¸Šæµ·è¯åˆ¸æ–°å¢èƒ½å¤Ÿç§’çº§è·å–å…¨é‡äº¤æ˜“ã€è¡Œæƒ…ã€æ–°å®¢å¼€æˆ·æ•°åŠèµ„é‡‘å¼•å…¥ç­‰æ•°æ®çš„éœ€æ±‚ã€‚åŸºäº SelectDB çš„æé€Ÿæ€§èƒ½ï¼Œä¸Šæµ·è¯åˆ¸ç›¸å…³å›¢é˜Ÿåœ¨ 10 æœˆå‰å¼€å‘å¹¶ä¸Šçº¿äº†å®æ—¶äº¤æ˜“æˆ˜æŠ¥ç³»ç»Ÿï¼Œä¸šåŠ¡æ•°æ®ç§’çº§å®æ—¶æ¥å…¥ï¼Œ<strong>ç³»ç»Ÿç¨³å®šæ”¯æ’‘ 1000+ QPS é«˜å¹¶å‘æŸ¥è¯¢ï¼Œå¤æ‚èšåˆæŸ¥è¯¢å“åº”å»¶è¿Ÿä½è‡³ 200ms</strong>ï¼Œå®ç°äº†å¯¹å…¨é‡ç»è¥æŒ‡æ ‡çš„å®æ—¶å†³ç­–æ”¯æŒï¼ŒéªŒè¯äº† SelectDB åœ¨çªå‘ä¸šåŠ¡åœºæ™¯ä¸‹çš„é«˜æ€§èƒ½ä¸é«˜å¯é æ€§ï¼Œä¸ºé‡‘èè¡Œä¸šå®æ—¶æ•°ä»“å»ºè®¾æä¾›äº†å…³é”®æ”¯æ’‘ã€‚</p>
<h3 data-id="heading-7">02 é‡‘è CRM ç³»ç»Ÿå»ºè®¾â€”â€”æ›¿æ¢ Elasticsearch</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6670a58c7d441f9bea56f5112891bea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764904941&amp;x-signature=K698FVF2Ip09oh6q%2B3w%2FbEmBuls%3D" alt="02 é‡‘è CRM ç³»ç»Ÿå»ºè®¾â€”â€”æ›¿æ¢ Elasticsearch.png" loading="lazy"/></p>
<p>ä¸Šæµ·è¯åˆ¸åœ¨å…¶é‡‘è CRM æ´»åŠ¨å…³ç³»åŠå®æ—¶æˆ˜æŠ¥æ¨¡å—åŸå…ˆé‡‡ç”¨ Elasticsearch ç»„ä»¶ï¼Œå› å…¶å­˜åœ¨ä¸¤å¤§æ ¸å¿ƒç¼ºé™·ï¼š</p>
<ul>
<li><strong>æ•°æ®åŒæ­¥å»¶è¿Ÿé«˜ï¼š</strong> ES æ‰¹é‡æ•°æ®åŒæ­¥å»¶è¿Ÿé«˜è¾¾åˆ†é’Ÿçº§ï¼Œå®¢æˆ·è¡Œä¸ºæ•°æ®æ— æ³•å®æ—¶æ›´æ–°ï¼Œå¯¼è‡´å†³ç­–æ»åã€‚</li>
<li><strong>è¿ç»´æˆæœ¬é«˜æ˜‚ï¼š</strong> ES æ¶æ„å¤æ‚ï¼Œéœ€ç‹¬ç«‹ç»´æŠ¤åè°ƒèŠ‚ç‚¹ã€æ•°æ®èŠ‚ç‚¹ã€ä¸»èŠ‚ç‚¹ï¼Œé›†ç¾¤ç»´æŠ¤å›°éš¾ï¼Œæ•…éšœæ’æŸ¥è€—æ—¶é•¿ï¼Œå¯¼è‡´è¿ç»´æˆæœ¬é«˜æ˜‚ã€‚</li>
</ul>
<p>ä¸ºæ­¤ï¼Œä¸Šæµ·è¯åˆ¸è¿›è¡Œäº†ç³»ç»Ÿå‡çº§ï¼Œåœ¨å¼€æˆ·ç»“æœåˆ†æä¸­å¼•å…¥äº† SelectDBï¼Œå¹¶åœ¨æ´»åŠ¨å…³ç³»åŠå®æ—¶æˆ˜æŠ¥æ¨¡å—ä¸­ä½¿ç”¨ SelectDB æ›¿æ¢åŸ Elasticsearch ç»„ä»¶ï¼Œä½œä¸ºå®æ—¶åˆ†æå¼•æ“ï¼Œå®ç°æµæ‰¹ä¸€ä½“æ¶æ„ã€‚SelectDB çš„å†™å…¥ååèƒ½åŠ›æ˜¯ Elasticsearch çš„ 4 å€ï¼Œæœ‰æ•ˆè§£å†³äº†æ•°æ®åŒæ­¥å»¶è¿Ÿé«˜çš„ç—›ç‚¹ã€‚å‡çº§åï¼Œç³»ç»Ÿèƒ½å¤Ÿç›´æ¥æ¶ˆè´¹ Kafka å®¢æˆ·è¡Œä¸ºæµï¼Œå°†æ•°æ®åŒæ­¥æ—¶æ•ˆå‹ç¼©è‡³ç§’çº§ã€‚åŒæ—¶ï¼Œå€ŸåŠ© SelectDB å€’æ’ç´¢å¼•èƒ½åŠ›åŠä¸°å¯Œçš„è¿ç»´ç”Ÿæ€ï¼Œå¤æ‚æŸ¥è¯¢å“åº”é€Ÿåº¦æå‡äº† 2 å€ï¼Œæ•´ä½“è¿ç»´æˆæœ¬å¤§å¹…é™ä½ã€‚</p>
<p>SelectDB çš„å¼•å…¥ä½¿å¾—ä¸Šæµ·è¯åˆ¸é‡‘è CRM ç³»ç»Ÿå®ç°äº†ç§’çº§å®æ—¶é—­ç¯ï¼Œç³»ç»Ÿèƒ½å¤Ÿå®æ—¶è·å–å®¢æˆ·å¼€æˆ·æµç¨‹ä¸­çš„æ–­ç‚¹æƒ…å†µï¼Œé€šè¿‡æŒç»­åˆ†æå®¢æˆ·æ“ä½œæµï¼Œç²¾å‡†è¯†åˆ«å¦‚èµ„æ–™æäº¤ä¸­æ–­ç­‰å…³é”®æ–­ç‚¹äº‹ä»¶ï¼Œå¹¶å®æ—¶ç”Ÿæˆ MOT ä»»åŠ¡ï¼Œæ¨é€è‡³å®¢æˆ·ç»ç†ç§»åŠ¨ç«¯ã€‚è¿™ä½¿å¾—å®¢æˆ·ç»ç†èƒ½å¤ŸåŠæ—¶è§¦è¾¾å®¢æˆ·ï¼Œå¼•å¯¼ç»­æ¥å¼€æˆ·æµç¨‹ï¼Œå°†æ–­ç‚¹é—®é¢˜è§£å†³æ—¶æ•ˆæå‡è‡³åˆ†é’Ÿçº§åˆ«ã€‚</p>
<h2 data-id="heading-8">åº”ç”¨æ”¶ç›Š</h2>
<p>ä¸Šæµ·è¯åˆ¸é€šè¿‡å¼•å…¥ SelectDB æ„å»ºæ•°æ®å¹³å°ï¼Œæœ‰æ•ˆè§£å†³äº†åŸ Hadoop ä¸ Elasticsearch æ¶æ„çš„å…³é”®ç“¶é¢ˆï¼Œåœ¨æ€§èƒ½ã€æˆæœ¬ç­‰æ–¹é¢å®ç°æ˜¾è‘—çªç ´ï¼š</p>
<ul>
<li>
<p><strong>çªç ´å®æ—¶åˆ†æç“¶é¢ˆï¼Œåˆ†ææ•ˆç‡è·ƒå‡ï¼š</strong> åŸºäº SelectDB ç›´æ¥æ¶ˆè´¹ Kafka å®¢æˆ·è¡Œä¸ºæµï¼Œå†™å…¥æ€§èƒ½æå‡ 4 å€ï¼Œæ•°æ®åŒæ­¥å»¶è¿Ÿå‹ç¼©è‡³ç§’çº§ï¼Œè§£å†³ Elasticsearch åŒæ­¥æ•ˆç‡ä½å¯¼è‡´çš„å†³ç­–æ»åé—®é¢˜ã€‚å€ŸåŠ© SelectDB å€’æ’ç´¢å¼•èƒ½åŠ›åŠå¤æ‚èšåˆæŸ¥è¯¢èƒ½åŠ›ï¼Œæ”¯æ’‘ 1000+ QPS é«˜å¹¶å‘è®¿é—®ï¼Œå…³é”®å†³ç­–å“åº”å»¶è¿Ÿä½è‡³ 200 msï¼Œå“åº”æ•ˆç‡ç¿»å€ï¼›</p>
</li>
<li>
<p><strong>æ¹–ä»“ &amp; æµæ‰¹ä¸€ä½“æ¶æ„ï¼Œæœ‰æ•ˆé™ä½æˆæœ¬ï¼š</strong> åŸºäº SelectDB çš„æ•°æ®å¹³å°å¯ç›´æ¥è®¿é—® HDFS/Hive æ•°æ®ï¼Œå®ç°æ¹–ä»“ä¸€ä½“ï¼Œå¤ç”¨ç°æœ‰å­˜å‚¨èµ„æºï¼Œé™ä½è¿ç§»æˆæœ¬ã€‚æ­¤å¤–ï¼ŒSelectDB ç²¾ç®€çš„æ¶æ„è®¾è®¡å’Œä¸°å¯Œçš„è¿ç»´ç”Ÿæ€ï¼Œå¯åŒæ—¶å¤„ç†æµå¼ä¸æ‰¹é‡æ•°æ®ï¼Œé¿å…å¤šå¥—ç³»ç»Ÿåä½œå¼€é”€ï¼Œå¤§å¹…ç®€åŒ–é›†ç¾¤ç®¡ç†ï¼Œæ•°æ®å¼€å‘æ•ˆç‡æå‡ 50%ï¼Œè¿ç»´æˆæœ¬å¤§å¹…é™ä½ã€‚</p>
</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F8ihYdOVQ0knOq1zCpXp8NA" target="_blank" title="https://mp.weixin.qq.com/s/8ihYdOVQ0knOq1zCpXp8NA" ref="nofollow noopener noreferrer">å‚è€ƒæ–‡æ¡£ï¼šç½‘æ˜“æ•°å¸†,DataOpså…¨çƒå³°ä¼š | ç½‘æ˜“æ•°å¸†ç‰¹è‰²å®è·µæŠ¤èˆªæ•°æ®ä»·å€¼è½åœ°</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cursor Tab å…±äº«æ— é™è½¦]]></title>    <link>https://juejin.cn/post/7577321767346241582</link>    <guid>https://juejin.cn/post/7577321767346241582</guid>    <pubDate>2025-11-28T03:26:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577321767346241582" data-draft-id="7577321767346208814" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cursor Tab å…±äº«æ— é™è½¦"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-28T03:26:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mwq30123"/> <meta itemprop="url" content="https://juejin.cn/user/3403743729030686"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cursor Tab å…±äº«æ— é™è½¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3403743729030686/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mwq30123
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:26:44.000Z" title="Fri Nov 28 2025 03:26:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>linux.do å¤§ä½¬å¼€å‘çš„ï¼Œä¸çŸ¥é“å•¥æ—¶å€™å°±ä¸èƒ½ç”¨äº†ï¼Œä¸”ç”¨ä¸”çæƒœã€‚
<a href="https://link.juejin.cn?target=https%3A%2F%2Flinux.do%2Ft%2Ftopic%2F1056849" target="_blank" title="https://linux.do/t/topic/1056849" ref="nofollow noopener noreferrer">åŸæ–‡åœ°å€</a></p>
<h2 data-id="heading-0">Cursor</h2>
<p>ä¿®æ”¹ç¨‹åºåœ°å€:</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwisdgod%2Fcursor-rp%2Freleases" target="_blank" title="https://github.com/wisdgod/cursor-rp/releases" ref="nofollow noopener noreferrer">Releases Â· wisdgod/cursor-rp</a></p>
<p>éœ€è¦ä¸‹è½½ modifier æ–‡ä»¶, ç„¶åä»¥ç®¡ç†å‘˜è¿è¡ŒæŒ‡ä»¤:</p>
<pre><code class="hljs language-css" lang="css">å…ˆå…³é—­<span class="hljs-attribute">Cursor</span>


chmod +x &lt;modifier-aarch64-apple-darwin ä¸‹è½½å…¨è·¯å¾„&gt;

sudo &lt;modifier-aarch64-apple-darwin ä¸‹è½½å…¨è·¯å¾„&gt;  <span class="hljs-attr">--cursor-path</span> /Applications/<span class="hljs-attribute">Cursor</span><span class="hljs-selector-class">.app</span> <span class="hljs-attr">--scheme</span> https <span class="hljs-attr">--suffix</span> <span class="hljs-selector-class">.lilingfeng</span><span class="hljs-selector-class">.dev</span> <span class="hljs-attr">--skip-hosts</span> <span class="hljs-attr">--confirm</span> <span class="hljs-attr">--pass-token</span>
</code></pre>
<p>è¿è¡Œåå‡ºç°</p>
<blockquote>
<p>æ‚¨å¿…é¡»åŒæ„æœ€ç»ˆç”¨æˆ·è®¸å¯åè®®(EULA)æ‰èƒ½ä½¿ç”¨æœ¬è½¯ä»¶ã€‚
è¯·æ‰“å¼€eula.txtæ–‡ä»¶ï¼Œé˜…è¯»åè®®å†…å®¹ï¼Œå¹¶å°†eula=falseä¿®æ”¹ä¸ºeula=trueã€‚</p>
</blockquote>
<p>è¿™ä¸ªæ–‡ä»¶ä¼šåœ¨modifierçš„åŒçº§ç›®å½•ç”Ÿç”Ÿæˆä¸€ä¸ªeula.txt,æ”¹ä¸‹æ–‡æ¡£ï¼Œé‡æ–°è¿è¡Œå°±è¡Œäº†
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e41bcd4b1ed54cc69416e419506b6c38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbXdxMzAxMjM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764905204&amp;x-signature=7DcWkoGTkNuglnkPoPNbDSPy5Hg%3D" alt="æˆªå±2025-11-28 11.25.55.png" loading="lazy"/></p>
<p><strong>ä¿®æ”¹åå°†åªèƒ½ä½¿ç”¨ Tab</strong>ï¼Œå–æ¶ˆä¿®æ”¹åªéœ€è¦åˆ é™¤Â <code>--confirm</code>Â é‡æ–°è·‘ä¸€è¾¹å³å¯</p>
<p>æ— æ³•ä½¿ç”¨è¯·æŠŠç½‘ç»œè°ƒæˆ http 1.1ï¼Œ204 æ˜¯æ­£å¸¸çš„</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Harmony osâ€”â€”AbilityStage ç»„ä»¶ç®¡ç†å™¨ï¼šæˆ‘ç†è§£çš„ Module çº§ã€Œæ€»æ§å°ã€]]></title>    <link>https://juejin.cn/post/7577300470520889353</link>    <guid>https://juejin.cn/post/7577300470520889353</guid>    <pubDate>2025-11-28T03:15:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577300470520889353" data-draft-id="7577321767346110510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Harmony osâ€”â€”AbilityStage ç»„ä»¶ç®¡ç†å™¨ï¼šæˆ‘ç†è§£çš„ Module çº§ã€Œæ€»æ§å°ã€"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-28T03:15:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·46398975432"/> <meta itemprop="url" content="https://juejin.cn/user/714006150282890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Harmony osâ€”â€”AbilityStage ç»„ä»¶ç®¡ç†å™¨ï¼šæˆ‘ç†è§£çš„ Module çº§ã€Œæ€»æ§å°ã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/714006150282890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·46398975432
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:15:23.000Z" title="Fri Nov 28 2025 03:15:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Harmony osâ€”â€”AbilityStage ç»„ä»¶ç®¡ç†å™¨ï¼šæˆ‘ç†è§£çš„ Module çº§ã€Œæ€»æ§å°ã€</h2>
<blockquote>
<p>è¿™ä¸€ç¯‡æ˜¯æˆ‘ç»™ <strong>AbilityStage</strong> å†™çš„å­¦ä¹ ç¬”è®° + åšå®¢ç¨¿ã€‚ å¯ä»¥å’Œå‰é¢é‚£å‡ ç¯‡ã€Œåº”ç”¨æ¨¡å‹ / UIAbility / å¯åŠ¨æ¨¡å¼ã€æ”¾åœ¨ä¸€ä¸ª HarmonyOS å¼€å‘ç³»åˆ—é‡Œã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">1. AbilityStage æ˜¯ä»€ä¹ˆï¼Ÿä¸€å¥è¯ç‰ˆæœ¬</h3>
<p>å®˜æ–¹å®šä¹‰æœ‰ç‚¹é•¿ï¼Œæˆ‘è‡ªå·±æ€»ç»“ä¸€å¥ï¼š</p>
<blockquote>
<p><strong>AbilityStage = ä¸€ä¸ª Module çº§åˆ«çš„ç»„ä»¶ç®¡ç†å™¨ï¼Œæ˜¯è¿™ä¸ª HAPã€Œç¬¬ä¸€æ¬¡è¢«åŠ è½½ã€æ—¶åˆ›å»ºçš„æ€»æ§ç±»ï¼Œç”¨æ¥åšæ¨¡å—çº§åˆå§‹åŒ– + å…¨å±€äº‹ä»¶ç›‘å¬ã€‚</strong></p>
</blockquote>
<p>å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ul>
<li>
<p>å®ƒ<strong>è·Ÿ Module ä¸€ä¸€å¯¹åº”</strong>ï¼š</p>
<ul>
<li>ä¸€ä¸ª Module å¯¹åº”ä¸€ä¸ª AbilityStage å®ä¾‹ï¼›</li>
<li>æ¯”å¦‚ <code>entry</code> module å°±é…ä¸€ä¸ª <code>MyAbilityStage</code>ã€‚</li>
</ul>
</li>
<li>
<p>å®ƒæ˜¯åœ¨è¯¥ HAP ç¬¬ä¸€ä¸ª Abilityï¼ˆUIAbility / ExtensionAbilityï¼‰åˆ›å»ºä¹‹å‰è¢«æ‹‰èµ·æ¥çš„ï¼›</p>
</li>
<li>
<p>é€‚åˆåšï¼š<strong>èµ„æºé¢„åŠ è½½ã€çº¿ç¨‹åˆ›å»ºã€å…¨å±€ç¯å¢ƒç›‘å¬ã€å†…å­˜å›è°ƒå¤„ç†ã€æŒ‡å®šè¿›ç¨‹ç­–ç•¥ã€å…³é—­å‰æ‹¦æˆªç­‰</strong>ã€‚</p>
</li>
</ul>
<p>å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆï¼š</p>
<blockquote>
<p>ã€Œè¿™ä¸ª Module çš„æ€»è°ƒåº¦ä¸­å¿ƒã€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">2. AbilityStage æä¾›äº†å“ªäº›å›è°ƒï¼Ÿ</h3>
<p>AbilityStage æœ‰ä¸¤ç±»å›è°ƒï¼š</p>
<ul>
<li>
<p>ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼š</p>
<ul>
<li><code>onCreate()</code></li>
<li><code>onDestroy()</code></li>
</ul>
</li>
<li>
<p>äº‹ä»¶å›è°ƒï¼š</p>
<ul>
<li><code>onAcceptWant()</code></li>
<li><code>onConfigurationUpdate()</code></li>
<li><code>onMemoryLevel()</code></li>
<li><code>onNewProcessRequest()</code></li>
<li><code>onPrepareTermination()</code></li>
</ul>
</li>
</ul>
<p>æˆ‘æŒ‰ã€Œå¼€å‘æ—¶å¸¸ç”¨ç¨‹åº¦ã€ç»™å®ƒåˆ†ä¸ªç±»ã€‚</p>
<h4 data-id="heading-3">2.1 onCreate()ï¼šModule çº§åˆå§‹åŒ–å…¥å£</h4>
<p><strong>æ—¶æœºï¼š</strong></p>
<ul>
<li>å¯¹åº” HAP <strong>é¦–æ¬¡åŠ è½½</strong>æ—¶ï¼›</li>
<li>åœ¨åˆ›å»ºè¿™ä¸ª Module çš„ç¬¬ä¸€ä¸ª Abilityï¼ˆUIAbility æˆ–æŸä¸ª ExtensionAbilityï¼‰ä¹‹å‰ï¼Œç³»ç»Ÿå…ˆåˆ›å»º AbilityStageï¼Œç„¶åè°ƒç”¨ <code>onCreate()</code>ã€‚</li>
</ul>
<p><strong>é€‚åˆåšçš„äº‹æƒ…ï¼š</strong></p>
<ul>
<li>æ¨¡å—çº§èµ„æºé¢„åŠ è½½ï¼›</li>
<li>å¯åŠ¨ä¸€äº›å…¬å…±çº¿ç¨‹æˆ–ä»»åŠ¡è°ƒåº¦å™¨ï¼›</li>
<li>æ³¨å†Œ Application çº§åˆ«çš„ç›‘å¬ï¼ˆæ¯”å¦‚ç¯å¢ƒå˜åŒ–ã€å†…å­˜å›è°ƒç­‰ï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-scala" lang="scala">Â <span class="hljs-keyword">import</span> { <span class="hljs-type">AbilityStage</span> } from '<span class="hljs-meta">@kit</span>.<span class="hljs-type">AbilityKit</span>';
Â â€‹
Â <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAbilityStage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbilityStage</span> </span>{
Â  Â onCreate(): void {
Â  Â  Â <span class="hljs-comment">// Module çº§åˆå§‹åŒ–ï¼Œæ¯”å¦‚èµ„æºé¢„åŠ è½½ã€çº¿ç¨‹åˆ›å»ºç­‰</span>
Â  Â  Â console.info('<span class="hljs-type">MyAbilityStage</span> onCreate');
Â   }
Â }
</code></pre>
<h4 data-id="heading-4">2.2 onAcceptWant()ï¼šå’Œ UIAbility æŒ‡å®šå®ä¾‹æ¨¡å¼é…å¥—ä½¿ç”¨</h4>
<p>è¿™ä¸ªå›è°ƒä¸“é—¨ç”¨åœ¨ <strong>UIAbility çš„ specified å¯åŠ¨æ¨¡å¼</strong> åœºæ™¯ä¸‹ã€‚</p>
<ul>
<li>
<p>å½“æŸä¸ª UIAbility ä»¥ <code>launchType: "specified"</code> å¯åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šï¼š</p>
<ol>
<li>
<p>å…ˆè¿›å…¥å¯¹åº” Module çš„ <code>AbilityStage.onAcceptWant(want)</code>ï¼›</p>
</li>
<li>
<p>ç”±ä½ åœ¨è¿™é‡Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² Keyï¼›</p>
</li>
<li>
<p>ç³»ç»Ÿç”¨è¿™ä¸ª Key å»åŒ¹é…å·²æœ‰çš„ UIAbility å®ä¾‹ï¼š</p>
<ul>
<li>æœ‰åŒ¹é…çš„ â†’ å¤ç”¨æ—§å®ä¾‹ï¼Œè§¦å‘ <code>onNewWant()</code>ï¼›</li>
<li>æ— åŒ¹é…çš„ â†’ åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹ï¼Œèµ° <code>onCreate()</code> + <code>onWindowStageCreate()</code>ã€‚</li>
</ul>
</li>
</ol>
</li>
</ul>
<p>å› æ­¤ï¼š</p>
<blockquote>
<p><strong>onAcceptWant çš„è¿”å›å€¼ = UIAbility å®ä¾‹çš„æ ‡è¯†å­—ç¬¦ä¸²ã€‚</strong></p>
</blockquote>
<p>ç¤ºä¾‹é‡Œçš„æœ€ç®€å†™æ³•ï¼š</p>
<pre><code class="hljs language-scala" lang="scala">Â <span class="hljs-keyword">import</span> { <span class="hljs-type">AbilityStage</span>, <span class="hljs-type">Want</span> } from '<span class="hljs-meta">@kit</span>.<span class="hljs-type">AbilityKit</span>';
Â â€‹
Â <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAbilityStage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbilityStage</span> </span>{
Â   onAcceptWant(want: <span class="hljs-type">Want</span>): string {
Â  Â   <span class="hljs-comment">// æŒ‡å®šå®ä¾‹æ¨¡å¼ä¸‹ç”±ä½ è¿”å›å®ä¾‹æ ‡è¯†</span>
Â  Â   <span class="hljs-keyword">return</span> '<span class="hljs-type">MyAbilityStage</span>';
Â   }
Â }
</code></pre>
<p>å®é™…ä¸šåŠ¡ä¸­å¯ä»¥æŒ‰ <code>want.parameters</code> æ‹¼å‡ºæ›´ç»†çš„ keyï¼Œå‰é¢ UIAbility å¯åŠ¨æ¨¡å¼é‚£ç¯‡é‡Œå·²ç»æœ‰è¯¦ç»†ä¾‹å­ã€‚</p>
<hr/>
<h4 data-id="heading-5">2.3 onConfigurationUpdate()ï¼šç¯å¢ƒå˜åŒ–ç›‘å¬ï¼ˆè¯­è¨€ / ä¸»é¢˜ / æ–¹å‘ï¼‰</h4>
<p>è¿™ä¸ªå’Œ <code>EnvironmentCallback</code> æ­é…å°¤ä¸ºå¸¸ç”¨ï¼Œé€‚åˆåšã€Œç³»ç»Ÿé…ç½®å˜åŒ– â†’ åº”ç”¨æ•´ä½“é€‚é…ã€ã€‚</p>
<p>ç³»ç»Ÿç¯å¢ƒå˜åŒ–æ—¶ä¼šè§¦å‘ï¼š</p>
<ul>
<li>è¯­è¨€å˜æ›´ï¼›</li>
<li>æ·±è‰² / æµ…è‰²æ¨¡å¼åˆ‡æ¢ï¼›</li>
<li>å±å¹•æ–¹å‘å˜æ›´ï¼›</li>
<li>å­—å·ç¼©æ”¾ï¼›</li>
<li>å­—é‡ç¼©æ”¾ç­‰ã€‚</li>
</ul>
<p>ä½ å¯ä»¥åœ¨ AbilityStage çš„ <code>onCreate()</code> é‡Œæ³¨å†Œç¯å¢ƒç›‘å¬ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">Â <span class="hljs-keyword">import</span> { <span class="hljs-title class_">EnvironmentCallback</span>, <span class="hljs-title class_">AbilityStage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;
Â <span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;
Â â€‹
Â <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbilityStage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">AbilityStage</span> {
Â   <span class="hljs-title function_">onCreate</span>(): <span class="hljs-keyword">void</span> {
Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AbilityStage onCreate'</span>);
Â â€‹
Â  Â   <span class="hljs-keyword">const</span> <span class="hljs-attr">envCallback</span>: <span class="hljs-title class_">EnvironmentCallback</span> = {
Â  Â  Â   <span class="hljs-title function_">onConfigurationUpdated</span>(<span class="hljs-params">config</span>) {
Â  Â  Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onConfigurationUpdated: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(config)}</span>`</span>);
Â  Â  Â  Â   <span class="hljs-keyword">const</span> language = config.<span class="hljs-property">language</span>; Â  Â  Â  Â  Â  <span class="hljs-comment">// å½“å‰è¯­è¨€</span>
Â  Â  Â  Â   <span class="hljs-keyword">const</span> colorMode = config.<span class="hljs-property">colorMode</span>; Â  Â  Â  Â  <span class="hljs-comment">// æ·± / æµ…è‰²æ¨¡å¼</span>
Â  Â  Â  Â   <span class="hljs-keyword">const</span> direction = config.<span class="hljs-property">direction</span>; Â  Â  Â  Â  <span class="hljs-comment">// å±å¹•æ–¹å‘</span>
Â  Â  Â  Â   <span class="hljs-keyword">const</span> fontSizeScale = config.<span class="hljs-property">fontSizeScale</span>; <span class="hljs-comment">// å­—ä½“å¤§å°ç¼©æ”¾</span>
Â  Â  Â  Â   <span class="hljs-keyword">const</span> fontWeightScale = config.<span class="hljs-property">fontWeightScale</span>; <span class="hljs-comment">// å­—ä½“ç²—ç»†ç¼©æ”¾</span>
Â  Â  Â  Â   <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œè§¦å‘ä¸€äº›å…¨å±€ UI é€‚é…é€»è¾‘</span>
Â  Â  Â   },
Â  Â  Â   <span class="hljs-title function_">onMemoryLevel</span>(<span class="hljs-params">level</span>) {
Â  Â  Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onMemoryLevel level: <span class="hljs-subst">${level}</span>`</span>);
Â  Â  Â   }
Â  Â   };
Â â€‹
Â  Â   <span class="hljs-keyword">try</span> {
Â  Â  Â   <span class="hljs-keyword">const</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();
Â  Â  Â   <span class="hljs-keyword">const</span> callbackId = applicationContext.<span class="hljs-title function_">on</span>(<span class="hljs-string">'environment'</span>, envCallback);
Â  Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`env callbackId: <span class="hljs-subst">${callbackId}</span>`</span>);
Â  Â   } <span class="hljs-keyword">catch</span> (error) {
Â  Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(
Â  Â  Â  Â   <span class="hljs-string">`env callback error: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>
Â  Â  Â   );
Â  Â   }
Â   }
Â â€‹
Â   <span class="hljs-title function_">onDestroy</span>(): <span class="hljs-keyword">void</span> {
Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AbilityStage onDestroy'</span>);
Â   }
Â }
</code></pre>
<blockquote>
<p>å°å¿ƒå¾—ï¼š å¦‚æœä½ çš„åº”ç”¨æœ‰ã€Œå¤šè¯­è¨€åˆ‡æ¢ã€ä¸»é¢˜è”åŠ¨ã€å­—ä½“å¤§å°é€‚é…ã€è¿™ç±»å…¨å±€éœ€æ±‚ï¼Œç”¨ AbilityStage + EnvironmentCallback ä¼šæ¯”åœ¨å•ä¸ª UIAbility ä¸­ä¸œä¸€å—è¥¿ä¸€å—å¼ºå¾ˆå¤šã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-6">2.4 onMemoryLevel()ï¼šç³»ç»Ÿå†…å­˜åƒç´§æ—¶çš„è‡ªæ•‘æœºä¼š</h4>
<p>å½“ç³»ç»Ÿå†…å­˜ç´§å¼ æ—¶ä¼šè§¦å‘è¿™ä¸ªå›è°ƒã€‚</p>
<ul>
<li>æ¯”å¦‚åº”ç”¨é€€åˆ°åå°åè¿˜å ç€ä¸€å †å†…å­˜ï¼›</li>
<li>ç³»ç»Ÿä¼šé€šè¿‡ <code>onMemoryLevel()</code> é€šçŸ¥ä½ å½“å‰å†…å­˜å‹åŠ›ç­‰çº§ï¼›</li>
<li>ä½ å¯ä»¥ä¸»åŠ¨é‡Šæ”¾ä¸€äº›ä¸å…³é”®çš„èµ„æºï¼ˆç¼“å­˜å¤§å›¾ã€é¢„åŠ è½½æ•°æ®ç­‰ï¼‰ã€‚</li>
</ul>
<p>å¥½å¤„æ˜¯ï¼š</p>
<blockquote>
<p>ä¸»åŠ¨é…åˆç³»ç»Ÿå›æ”¶å†…å­˜ï¼Œæœ‰åŠ©äºé¿å…è¿›ç¨‹è¢«ç³»ç»Ÿç›´æ¥ killï¼Œæå‡åº”ç”¨æ•´ä½“ç¨³å®šæ€§ã€‚</p>
</blockquote>
<p>ä¸Šé¢çš„ <code>envCallback</code> ä¸­å…¶å®å·²ç»æ¼”ç¤ºäº† <code>onMemoryLevel()</code> çš„å†™æ³•ã€‚</p>
<hr/>
<h4 data-id="heading-7">2.5 onNewProcessRequest()ï¼šæ§åˆ¶ UIAbility è¿è¡Œåœ¨å“ªä¸ªè¿›ç¨‹</h4>
<p>è¿™ä¸ªå›è°ƒæ˜¯ç»™ <strong>ã€Œå¤šè¿›ç¨‹ç­–ç•¥ã€</strong> ç”¨çš„ï¼Œåœºæ™¯ä¼šæ¯”è¾ƒé«˜çº§ã€‚</p>
<ul>
<li>
<p>å½“æŸä¸ª UIAbility å¯åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šå›è°ƒ <code>onNewProcessRequest()</code>ï¼›</p>
</li>
<li>
<p>ä½ å¯ä»¥è¿”å›ä¸€ä¸ªã€Œè¿›ç¨‹æ ‡è¯†å­—ç¬¦ä¸²ã€ï¼š</p>
<ul>
<li>è‹¥è¯¥æ ‡è¯†å¯¹åº”çš„è¿›ç¨‹å·²ç»å­˜åœ¨ â†’ å¤ç”¨ï¼›</li>
<li>è‹¥ä¸å­˜åœ¨ â†’ åˆ›å»ºæ–°è¿›ç¨‹ï¼›</li>
</ul>
</li>
<li>
<p>è¦å¯ç”¨è¿™ä¸ªèƒ½åŠ›ï¼Œéœ€è¦åœ¨ <code>module.json5</code> é‡Œå…ˆé…ç½®ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-json" lang="json">Â <span class="hljs-punctuation">{</span>
Â   <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
Â  Â   <span class="hljs-comment">// ...</span>
Â  Â   <span class="hljs-attr">"isolationProcess"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
Â   <span class="hljs-punctuation">}</span>
Â <span class="hljs-punctuation">}</span>
</code></pre>
<p>å…¸å‹ç”¨é€”ï¼š</p>
<ul>
<li>æŠŠæŸäº›é«˜é£é™© / é«˜èµ„æºæ¶ˆè€—çš„ UIAbility æ”¾åˆ°å•ç‹¬è¿›ç¨‹ä¸­è·‘ï¼›</li>
<li>åšç±»ä¼¼ã€Œæ–‡æ¡£ç¼–è¾‘è¿›ç¨‹ã€è¿™ç§éš”ç¦»ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-8">2.6 onPrepareTermination()ï¼šåº”ç”¨å…³é—­å‰çš„æœ€åæŒ½ç•™</h4>
<p>å½“ç”¨æˆ·ã€Œå…³é—­åº”ç”¨ã€æ—¶ï¼Œç³»ç»Ÿä¼šå…ˆå›è°ƒ <code>onPrepareTermination()</code>ã€‚</p>
<ul>
<li>
<p>ä½ å¯ä»¥åœ¨è¿™é‡Œå†³å®šï¼š</p>
<ul>
<li>æ˜¯å¦ç«‹åˆ»å…è®¸å…³é—­ï¼›</li>
<li>è¿˜æ˜¯å‘Šè¯‰ç³»ç»Ÿã€Œå…ˆä¸è¦å…³ã€ï¼Œæ¯”å¦‚å…ˆå¼¹ä¸ªå¯¹è¯æ¡†é—®ç”¨æˆ·æ˜¯å¦ä¿å­˜è‰ç¨¿ã€‚</li>
</ul>
</li>
<li>
<p>è¿”å›å€¼æ˜¯ <code>AbilityConstant.PrepareTermination</code> ä¸­çš„æšä¸¾ï¼Œå‘Šè¯‰ç³»ç»Ÿç»§ç»­å…³è¿˜æ˜¯ä¸­æ–­å…³é—­åŠ¨ä½œã€‚</p>
</li>
</ul>
<p>å…¸å‹åœºæ™¯ï¼š</p>
<ul>
<li>ç”¨æˆ·æ­£åœ¨ç¼–è¾‘é‡è¦å†…å®¹ï¼ˆæ–‡æ¡£ã€å¡«è¡¨ã€å†™ä½œä¸šâ€¦ï¼‰ï¼›</li>
<li>ç”¨æˆ·ä»æœ€è¿‘ä»»åŠ¡ä¸€åˆ’è€Œè¿‡ï¼›</li>
<li>ä½ åœ¨ <code>onPrepareTermination()</code> é‡Œæ£€æµ‹åˆ°æœ‰æœªä¿å­˜å†…å®¹ â†’ å…ˆé˜»æ­¢å…³é—­ï¼Œç»™ UIAbility å‘é€šçŸ¥å¼¹çª—ã€‚</li>
</ul>
<h4 data-id="heading-9">2.7 onDestroy()ï¼šModule æ­£å¸¸é”€æ¯æ—¶çš„æ”¶å°¾</h4>
<ul>
<li>å½“å¯¹åº” Module çš„ <strong>æœ€åä¸€ä¸ª Ability å®ä¾‹é€€å‡º</strong>ï¼Œå¹¶ä¸”åº”ç”¨ä»¥ã€Œæ­£å¸¸æ–¹å¼ã€é”€æ¯æ—¶è§¦å‘ï¼›</li>
<li>å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›æ¨¡å—çº§çš„èµ„æºé‡Šæ”¾ã€å–æ¶ˆæ³¨å†Œç­‰ã€‚</li>
</ul>
<p>æ³¨æ„ä¸¤ä¸ªä¸ä¼šè§¦å‘çš„æƒ…å†µï¼š</p>
<ul>
<li>åº”ç”¨å¼‚å¸¸å´©æºƒï¼›</li>
<li>è¢«ç³»ç»Ÿå¼ºåˆ¶ç»ˆæ­¢ã€‚</li>
</ul>
<p>è¿™ä¸¤ç§æƒ…å†µ<code>onDestroy()</code>éƒ½ä¸ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥ç‰¹åˆ«å…³é”®çš„æ•°æ®ä»ç„¶è¦åœ¨å„ Ability è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸé‡Œä¿å­˜ã€‚</p>
<hr/>
<h3 data-id="heading-10">3. å¦‚ä½•åœ¨å·¥ç¨‹ä¸­å¯ç”¨ AbilityStageï¼Ÿ</h3>
<p>é»˜è®¤æ¨¡æ¿é‡Œæ˜¯<strong>ä¸ä¼šè‡ªåŠ¨åˆ›å»º</strong> AbilityStage çš„ï¼Œéœ€è¦ä½ è‡ªå·±æ‰‹åŠ¨åŠ ä¸€ä»½ã€‚</p>
<h4 data-id="heading-11">3.1 åˆ›å»º AbilityStage æ–‡ä»¶</h4>
<ol>
<li>åœ¨æŸä¸ª Module çš„ <code>ets</code> ç›®å½•ä¸‹æ–°å»ºç›®å½• æ¯”å¦‚ï¼š<code>ets/myabilitystage/</code></li>
<li>æ–°å»º ArkTS æ–‡ä»¶ï¼š<code>MyAbilityStage.ets</code></li>
<li>ç»§æ‰¿ <code>AbilityStage</code>ï¼Œå®ç°æ‰€éœ€å›è°ƒï¼š</li>
</ol>
<pre><code class="hljs language-scala" lang="scala">Â <span class="hljs-keyword">import</span> { <span class="hljs-type">AbilityStage</span>, <span class="hljs-type">Want</span> } from '<span class="hljs-meta">@kit</span>.<span class="hljs-type">AbilityKit</span>';
Â â€‹
Â <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAbilityStage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbilityStage</span> </span>{
Â   onCreate(): void {
Â  Â   console.info('<span class="hljs-type">MyAbilityStage</span> onCreate');
Â  Â   <span class="hljs-comment">// æ¨¡å—åˆå§‹åŒ–é€»è¾‘</span>
Â   }
Â â€‹
Â   onAcceptWant(want: <span class="hljs-type">Want</span>): string {
Â  Â   <span class="hljs-comment">// ä»…åœ¨ specified å¯åŠ¨æ¨¡å¼ä¸‹ä¼šè§¦å‘</span>
Â  Â   <span class="hljs-keyword">return</span> '<span class="hljs-type">MyAbilityStage</span>';
Â   }
Â }
</code></pre>
<h4 data-id="heading-12">3.2 åœ¨ module.json5 é‡Œç»‘å®šå…¥å£</h4>
<p><code>srcEntry</code> æŒ‡å®šè¿™ä¸ª Module å¯¹åº”çš„ AbilityStage å…¥å£ï¼š</p>
<pre><code class="hljs language-json" lang="json">Â <span class="hljs-punctuation">{</span>
Â   <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
Â  Â   <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"entry"</span><span class="hljs-punctuation">,</span>
Â  Â   <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"entry"</span><span class="hljs-punctuation">,</span>
Â  Â   <span class="hljs-attr">"srcEntry"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./ets/myabilitystage/MyAbilityStage.ets"</span><span class="hljs-punctuation">,</span>
Â  Â   <span class="hljs-comment">// ...</span>
Â   <span class="hljs-punctuation">}</span>
Â <span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™æ ·ï¼Œå½“è¿™ä¸ª HAP ç¬¬ä¸€æ¬¡è¢«åŠ è½½æ—¶ï¼Œå°±ä¼šå…ˆèµ° <code>MyAbilityStage.onCreate()</code>ï¼Œä½ çš„æ¨¡å—çº§é€»è¾‘å°±èƒ½æ¥ç®¡æ•´ä½“èŠ‚å¥äº†ã€‚</p>
<hr/>
<h3 data-id="heading-13">4. æˆ‘ä¼šæ€ä¹ˆåœ¨é¡¹ç›®é‡Œç”¨ AbilityStageï¼Ÿ</h3>
<p>ç»“åˆå‰é¢å‡ ç¯‡ Stage æ¨¡å‹ã€UIAbilityã€ExtensionAbility çš„å†…å®¹ï¼Œæˆ‘è‡ªå·±ä¼šæŠŠ AbilityStage çœ‹æˆä¸€ä¸ªã€Œæ¨¡å—çº§ä¸­æ§ã€ï¼Œç”¨æ¥é›†ä¸­å¤„ç†ï¼š</p>
<ol>
<li>
<p><strong>æ¨¡å—åˆå§‹åŒ–</strong></p>
<ul>
<li>æ³¨å†Œç¯å¢ƒå˜åŒ–ç›‘å¬ï¼ˆè¯­è¨€/ä¸»é¢˜/å­—ä½“ç­‰ï¼‰ï¼›</li>
<li>åˆå§‹åŒ–ä¸€äº›å…¨å±€å•ä¾‹ï¼Œæ¯”å¦‚æ—¥å¿—ã€åŸ‹ç‚¹ã€é…ç½®ä¸­å¿ƒã€‚</li>
</ul>
</li>
<li>
<p><strong>å…¨å±€äº‹ä»¶/é…ç½®ç›‘å¬</strong></p>
<ul>
<li>ç”¨ <code>EnvironmentCallback</code> å¤„ç†æ·±æµ…è‰²è”åŠ¨ï¼›</li>
<li>ç”¨ <code>onMemoryLevel</code> åšå†…å­˜å‹ç¼©ç­–ç•¥ã€‚</li>
</ul>
</li>
<li>
<p><strong>UIAbility å¯åŠ¨ç­–ç•¥</strong></p>
<ul>
<li>ç»“åˆ <code>onAcceptWant()</code> + <code>launchType: specified</code> åšå¤šæ–‡æ¡£/å¤šå®ä¾‹ç®¡ç†ï¼›</li>
<li>é€šè¿‡ <code>onNewProcessRequest()</code> æ§åˆ¶å“ªäº› Ability è·‘ç‹¬ç«‹è¿›ç¨‹ã€‚</li>
</ul>
</li>
<li>
<p><strong>å…³é—­å‰çš„æ‹¦æˆª</strong></p>
<ul>
<li>
<p>åœ¨ <code>onPrepareTermination()</code> ç»™æ•´ä¸ª App åšä¸€æ¬¡ã€Œå–„åæœºä¼šã€ï¼š</p>
<ul>
<li>æœªåŒæ­¥çš„æ•°æ®æç¤ºç”¨æˆ·ï¼›</li>
<li>æ¸…ç†æŸäº›åå°ä»»åŠ¡ï¼›</li>
<li>é‡è¦æ—¥å¿— flushã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-14">5. å°ç»“</h3>
<p>å¦‚æœç”¨ä¸€å¥æ¯”è¾ƒå½¢è±¡çš„è¯æ¥æ”¶å°¾ï¼š</p>
<blockquote>
<p><strong>UIAbility è´Ÿè´£ã€Œè¿™ä¸€ä¸ªçª—å£æ€ä¹ˆè·‘ã€ï¼ŒExtensionAbility è´Ÿè´£ã€ŒæŸä¸ªæ‰©å±•åœºæ™¯æ€ä¹ˆè·‘ã€ï¼Œ è€Œ AbilityStage åˆ™ç«™åœ¨ Module çš„è§†è§’ï¼Œè´Ÿè´£ã€Œè¿™ä¸€æ•´åŒ…èƒ½åŠ›æ€ä¹ˆè¢«åˆå§‹åŒ–ã€ç®¡ç†å’Œæ”¶å°¾ã€ã€‚</strong></p>
</blockquote>
<p>åœ¨ HarmonyOS NEXT çš„ Stage æ¨¡å‹ä¸‹ï¼Œ AbilityStage å…¶å®æ˜¯ä¸€ä¸ªéå¸¸å…³é”®ä½†å®¹æ˜“è¢«å¿½ç•¥çš„ç‚¹â€”â€” ç”¨å¥½äº†ï¼Œå®ƒèƒ½è®©ä½ çš„åº”ç”¨æ¨¡å—ç»“æ„æ›´æ¸…æ™°ï¼Œè¡Œä¸ºæ›´å¯æ§ï¼Œä¹Ÿæ›´ã€Œç³»ç»Ÿçº§ã€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OrbitControls çš„å®Œæ•´åŸç†]]></title>    <link>https://juejin.cn/post/7577364921656377386</link>    <guid>https://juejin.cn/post/7577364921656377386</guid>    <pubDate>2025-11-28T03:20:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577364921656377386" data-draft-id="7577343038428004395" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OrbitControls çš„å®Œæ•´åŸç†"/> <meta itemprop="keywords" content="three.js"/> <meta itemprop="datePublished" content="2025-11-28T03:20:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bigç”·å­©"/> <meta itemprop="url" content="https://juejin.cn/user/1996368846523368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OrbitControls çš„å®Œæ•´åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1996368846523368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bigç”·å­©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:20:48.000Z" title="Fri Nov 28 2025 03:20:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ğŸ¯ OrbitControls çš„å®Œæ•´åŸç†ï¼ˆæœ€ç²¾ç®€ + æœ€å‡†ç¡®ç‰ˆï¼‰</strong></h2>
<p>OrbitControls çš„æ ¸å¿ƒç›®æ ‡å¾ˆç®€å•ï¼š</p>
<blockquote>
<p><strong>è®©ç›¸æœºå›´ç»•ä¸€ä¸ªç›®æ ‡ç‚¹ï¼ˆtargetï¼‰åšæ—‹è½¬ã€ç¼©æ”¾ã€å¹³ç§»ï¼ŒåŒæ—¶ä¿æŒè§†è§’ç¨³å®šã€‚</strong>****</p>
</blockquote>
<p>å®ƒçš„å®ç°ä¸æ˜¯ç›´æ¥ä¿®æ”¹ç›¸æœºçš„ rotationï¼Œè€Œæ˜¯ï¼š</p>
<hr/>
<h2 data-id="heading-1"><strong>âœ… 1. ä½¿ç”¨çƒåæ ‡ç³»å­˜å‚¨ç›¸æœºç›¸å¯¹ target çš„ä½ç½®</strong></h2>
<p>OrbitControls å†…éƒ¨ç”¨ <strong>çƒåæ ‡ç³» (spherical)</strong> è¡¨ç¤ºç›¸æœºåœ¨çƒé¢ä¸Šçš„ä½ç½®ï¼š</p>

























<table><thead><tr><th><strong>spherical å±æ€§</strong></th><th><strong>ä»£è¡¨å«ä¹‰</strong></th><th><strong>å†³å®šä»€ä¹ˆ</strong></th></tr></thead><tbody><tr><td>radius</td><td>ç›¸æœºåˆ° target çš„è·ç¦»</td><td>ç¼©æ”¾ï¼ˆè¿œè¿‘ï¼‰</td></tr><tr><td>theta</td><td>æ°´å¹³æ—‹è½¬ï¼ˆç»• Y è½´ï¼‰</td><td>å·¦å³æ—‹è½¬</td></tr><tr><td>phi</td><td>å‚ç›´æ—‹è½¬ï¼ˆä» Y+ å‘ä¸‹é‡è§’ï¼‰</td><td>ä¸Šä¸‹æ—‹è½¬</td></tr></tbody></table>
<p>OrbitControls å¹¶ä¸ç›´æ¥å­˜ç›¸æœº positionï¼Œè€Œæ˜¯ä¾èµ– sphericalã€‚</p>
<hr/>
<h2 data-id="heading-2"><strong>âœ… 2. æ¯æ¬¡æ›´æ–°ï¼Œéƒ½ä¼šæ ¹æ® spherical é‡æ–°è®¡ç®— camera.position</strong></h2>
<p>ä¼ªä»£ç ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// çƒåæ ‡è½¬æ¢ä¸ºä¸–ç•Œåæ ‡</span>
offset<span class="hljs-selector-class">.setFromSpherical</span>(spherical);

<span class="hljs-comment">// camera.position = target + offset</span>
camera<span class="hljs-selector-class">.position</span><span class="hljs-selector-class">.copy</span>(target)<span class="hljs-selector-class">.add</span>(offset);

<span class="hljs-comment">// ç›¸æœºæ°¸è¿œæœå‘ target</span>
camera<span class="hljs-selector-class">.lookAt</span>(target);
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<p>âœ¨ <strong>ç›¸æœºçš„ä½ç½®æ°¸è¿œè½åœ¨ä¸€ä¸ªä»¥ target ä¸ºåœ†å¿ƒçš„çƒé¢ä¸Šã€‚</strong>****</p>
<hr/>
<h2 data-id="heading-3"><strong>âœ… 3. ç”¨æˆ·çš„ä¸‰ç§äº¤äº’å¯¹åº”ä¿®æ”¹ spherical æˆ– target</strong></h2>
<h4 data-id="heading-4"><strong>âœ”ï¼ˆ1ï¼‰æ—‹è½¬ï¼ˆå·¦é”®ï¼‰</strong></h4>
<p>ä¿®æ”¹ spherical çš„è§’åº¦ï¼š</p>
<pre><code class="hljs">theta â† å·¦å³æ‹–åŠ¨
phi   â† ä¸Šä¸‹æ‹–åŠ¨
</code></pre>
<p>æ•ˆæœï¼šç›¸æœºç»• target è½¬åœˆã€‚</p>
<hr/>
<h4 data-id="heading-5"><strong>âœ”ï¼ˆ2ï¼‰ç¼©æ”¾ï¼ˆæ»šè½®ï¼‰</strong></h4>
<p>ä¿®æ”¹ spherical.radiusï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">radius += delta
</code></pre>
<p>æ•ˆæœï¼šç›¸æœºæ²¿ç€å°„çº¿ï¼ˆcamera â†’ targetï¼‰å‰è¿›æˆ–åé€€ã€‚</p>
<hr/>
<h4 data-id="heading-6"><strong>âœ”ï¼ˆ3ï¼‰å¹³ç§»ï¼ˆå³é”®ï¼‰</strong></h4>
<p>ä¿®æ”¹ targetï¼ˆä»¥åŠ camera.position åŒæ­¥ç§»åŠ¨ï¼‰ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">target += panDelta
camera.position += panDelta
</code></pre>
<p>è¿™æ ·ä¿æŒç›¸æœºä¸ target çš„ç›¸å¯¹è·ç¦»ä¸å˜ï¼Œè§†é‡æ•´ä½“å¹³ç§»ã€‚</p>
<hr/>
<h2 data-id="heading-7"><strong>ğŸ“Œ Whyï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥æ”¹ camera.rotationï¼Ÿ</strong></h2>
<p>å› ä¸ºï¼š</p>
<ul>
<li>
<p>æ¬§æ‹‰è§’ rotation ä¼šå‡ºç°ä¸‡å‘èŠ‚é” (gimbal lock)</p>
</li>
<li>
<p>æ—‹è½¬ç»“æœé¡ºåºä¾èµ– Euler çš„ order</p>
</li>
<li>
<p>ä¸èƒ½ä¿è¯ç›¸æœºå›ºå®šç»•æŸç‚¹æ—‹è½¬</p>
</li>
<li>
<p>å¹³ç§»ä¸æ—‹è½¬æ··åˆä¼šå¾ˆæ··ä¹±</p>
</li>
</ul>
<p>ä½¿ç”¨ spherical + lookAt(target) æ˜¯æœ€ç¨³å®šã€æœ€å¯æ§çš„æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>ğŸ¨ å›¾ç¤ºï¼ˆæ¦‚å¿µå›¾ï¼‰</strong></h2>
<pre><code class="hljs language-perl" lang="perl">          Y+
          |
          |      camera â—
          |       (theta, phi, radius)
          |        <span class="hljs-regexp">/
          |       /</span>
          |      <span class="hljs-regexp">/
          |     /</span>
          â—----+------------------ X+
         target
</code></pre>
<p>ğŸ“Œ ç›¸æœºå§‹ç»ˆåœ¨åŠå¾„ä¸º radius çš„çƒé¢ä¸Š</p>
<p>ğŸ“Œ ç”¨æˆ·çš„æ“ä½œå®è´¨æ˜¯æ”¹å˜çƒåæ ‡çš„ä½ç½®</p>
<hr/>
<h2 data-id="heading-9"><strong>ğŸ¯ OrbitControls æœ¬è´¨ä¸Šåšçš„ä¸¤ä»¶äº‹</strong></h2>
<p>æ— è®ºç”¨æˆ·æ€ä¹ˆæ“ä½œï¼Œéƒ½åªæ˜¯ä¿®æ”¹ï¼š</p>
<ol>
<li>
<p><strong>camera.position</strong>****</p>
</li>
<li>
<p><strong>controls.target</strong></p>
</li>
</ol>
<p>æœ€ç»ˆè°ƒç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">camera.lookAt(target)<span class="hljs-comment">;</span>
</code></pre>
<p>è€Œä¸åŠ¨ rotationã€‚</p>
<hr/>
<h2 data-id="heading-10"><strong>ğŸ“¦ å¤§æ€»ç»“ï¼ˆä½ å¯ä»¥ç›´æ¥æ”¾åˆ°æ–‡æ¡£é‡Œï¼‰</strong></h2>
<blockquote>
<p><strong>OrbitControls = åŸºäºçƒåæ ‡çš„ç›¸æœºç³»ç»Ÿï¼Œé€šè¿‡æ”¹å˜ sphericalï¼ˆæ—‹è½¬/ç¼©æ”¾ï¼‰å’Œ targetï¼ˆå¹³ç§»ï¼‰ï¼Œç”Ÿæˆ camera.positionï¼Œç„¶åä½¿ç”¨ lookAt ä¿æŒè§†è§’ç¨³å®šã€‚</strong>****</p>
</blockquote>
<ul>
<li>
<blockquote>
<p>æ—‹è½¬ = æ”¹ theta å’Œ phi</p>
</blockquote>
</li>
<li>
<blockquote>
<p>ç¼©æ”¾ = æ”¹ radius</p>
</blockquote>
</li>
<li>
<blockquote>
<p>å¹³ç§» = æ”¹ target</p>
</blockquote>
</li>
</ul>
<blockquote>
</blockquote>
<blockquote>
<p>ç›¸æœºä¸ä¼šç›´æ¥ä¿®æ”¹ rotationï¼Œè€Œæ˜¯ç”± target å’Œ spherical å†³å®šæœ€ç»ˆçš„ç›¸æœºæœå‘å’Œä½ç½®ã€‚</p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[go-kratos-admin å¿«é€Ÿä¸Šæ‰‹æŒ‡å—ï¼šä»ç¯å¢ƒæ­å»ºåˆ°å¯åŠ¨æœåŠ¡ï¼ˆWindows/macOS/Linux é€šç”¨ï¼‰]]></title>    <link>https://juejin.cn/post/7577332659506217003</link>    <guid>https://juejin.cn/post/7577332659506217003</guid>    <pubDate>2025-11-28T03:27:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577332659506217003" data-draft-id="7577333742277902378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="go-kratos-admin å¿«é€Ÿä¸Šæ‰‹æŒ‡å—ï¼šä»ç¯å¢ƒæ­å»ºåˆ°å¯åŠ¨æœåŠ¡ï¼ˆWindows/macOS/Linux é€šç”¨ï¼‰"/> <meta itemprop="keywords" content="Go,Vue.js"/> <meta itemprop="datePublished" content="2025-11-28T03:27:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            go-kratos-admin å¿«é€Ÿä¸Šæ‰‹æŒ‡å—ï¼šä»ç¯å¢ƒæ­å»ºåˆ°å¯åŠ¨æœåŠ¡ï¼ˆWindows/macOS/Linux é€šç”¨ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:27:09.000Z" title="Fri Nov 28 2025 03:27:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">go-kratos-admin å¿«é€Ÿä¸Šæ‰‹æŒ‡å—ï¼šä»ç¯å¢ƒæ­å»ºåˆ°å¯åŠ¨æœåŠ¡ï¼ˆWindows/macOS/Linux é€šç”¨ï¼‰</h2>
<p>go-kratos-admin ä½œä¸ºå¼€ç®±å³ç”¨çš„ä¼ä¸šçº§ Admin å…¨æ ˆè§£å†³æ–¹æ¡ˆï¼Œæ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€æ˜¯é€šè¿‡ <code>backend/script</code> ç›®å½•çš„ <strong>è‡ªåŠ¨åŒ–è„šæœ¬</strong> é™ä½è·¨ç³»ç»Ÿéƒ¨ç½²é—¨æ§›ã€‚æœ¬æ–‡ä»¥ â€œè„šæœ¬é©±åŠ¨ + å®æ“éªŒè¯â€ ä¸ºæ ¸å¿ƒï¼Œä¼˜åŒ–æ­¥éª¤è¿è´¯æ€§ä¸ç»†èŠ‚æç¤ºï¼Œè¡¥å……ç”¨æˆ·é«˜é¢‘è¸©å‘ç‚¹ï¼Œå¸®ä½ æ›´é¡ºç•…åœ°å®Œæˆä»ç¯å¢ƒåˆ°æœåŠ¡çš„å…¨æµç¨‹æ­å»ºã€‚</p>
<p><strong>å‰ç½®æ£€æŸ¥æ¸…å•ï¼ˆå¯åŠ¨å‰å¿…çœ‹ï¼‰</strong></p>
<p>é¿å…å› åŸºç¡€æ¡ä»¶ç¼ºå¤±å¯¼è‡´æµç¨‹ä¸­æ–­ï¼Œå¯åŠ¨å‰ç¡®è®¤ä»¥ä¸‹äº‹é¡¹ï¼š</p>
<ol>
<li>æ“ä½œç³»ç»Ÿæƒé™ï¼šWindows éœ€ ç®¡ç†å‘˜èº«ä»½ æ‰“å¼€ PowerShellï¼›Linux/macOS éœ€æ‹¥æœ‰ <code>sudo</code> æƒé™ï¼ˆæ‰§è¡Œè„šæœ¬æ—¶å¯èƒ½éœ€è¦ï¼‰ã€‚</li>
<li>ç½‘ç»œçŠ¶æ€ï¼šç¡®ä¿èƒ½è®¿é—® <code>GitHub</code>ã€<code>Docker Hub</code>ã€<code>Homebrew</code>/<code>Scoop</code> æºï¼ˆå»ºè®®æå‰é…ç½®å›½å†…é•œåƒï¼Œè§å„ç³»ç»Ÿå¤‡æ³¨ï¼‰ã€‚</li>
<li>ç£ç›˜ç©ºé—´ï¼šé¢„ç•™è‡³å°‘ <strong>10GB</strong> ç©ºé—´ï¼ˆç”¨äºå­˜å‚¨ Docker é•œåƒã€ä¾èµ–åŒ…ã€ç¼–è¯‘äº§ç‰©ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-1">ä¸€ã€å‰ç½®è®¤çŸ¥ï¼š<code>backend/script</code>æ ¸å¿ƒè„šæœ¬è§£æ</h3>
<p>åœ¨å¼€å§‹æ“ä½œå‰ï¼Œå…ˆæ˜ç¡®è„šæœ¬åˆ†ç±»ä¸ä½œç”¨ï¼ˆé¿å…ç”¨é”™åœºæ™¯ï¼‰ï¼Œæ ¸å¿ƒè„šæœ¬æ¸…å•å¦‚ä¸‹ï¼š</p>























































<table><thead><tr><th>è„šæœ¬è·¯å¾„</th><th>é€‚ç”¨ç³»ç»Ÿ</th><th>æ ¸å¿ƒåŠŸèƒ½</th></tr></thead><tbody><tr><td><code>prepare_ubuntu.sh</code></td><td>Ubuntu/Debian</td><td>è‡ªåŠ¨æ›´æ–°ç³»ç»Ÿã€å®‰è£… Git/Golang/Docker/Node.js ç­‰åŸºç¡€ä¾èµ–ï¼Œé…ç½®ç¯å¢ƒå˜é‡</td></tr><tr><td><code>prepare_centos.sh</code></td><td>CentOS/RHEL</td><td>åŒä¸Šï¼Œé€‚é… RPM åŒ…ç®¡ç†ç³»ç»Ÿ</td></tr><tr><td><code>prepare_rocky.sh</code></td><td>Rocky Linux</td><td>åŒä¸Šï¼Œé’ˆå¯¹ Rocky ç³»ç»Ÿçš„ä¾èµ–å…¼å®¹æ€§ä¼˜åŒ–</td></tr><tr><td><code>prepare_macos.sh</code></td><td>MacOS</td><td>é€šè¿‡ Homebrew åŒ…ç®¡ç†å™¨å®‰è£… Git/make/Golang/Dockerï¼Œé…ç½® Docker è‡ªå¯åŠ¨</td></tr><tr><td><code>prepare_windows.ps1</code></td><td>Windows</td><td>é€šè¿‡ Scoop åŒ…ç®¡ç†å™¨å®‰è£… Git/make/Golang/Dockerï¼Œé…ç½® Docker è‡ªå¯åŠ¨</td></tr><tr><td><code>docker_compose_install.sh</code></td><td>å…¨ç³»ç»Ÿï¼ˆéœ€ Dockerï¼‰</td><td>ä¸€é”®å¯åŠ¨ <strong>ä¸­é—´ä»¶ï¼ˆPostgreSQL/Redis/Consulï¼‰+ åç«¯æœåŠ¡</strong> å®¹å™¨ï¼Œé›¶æ‰‹åŠ¨é…ç½®</td></tr><tr><td><code>docker_compose_install_depends.sh</code></td><td>å…¨ç³»ç»Ÿ</td><td>ä»…å¯åŠ¨ä¸­é—´ä»¶å®¹å™¨ï¼ˆé€‚åˆ â€œä¸­é—´ä»¶ Docker + æœåŠ¡æœ¬åœ°è¿è¡Œâ€ çš„æ··åˆéƒ¨ç½²åœºæ™¯ï¼‰</td></tr><tr><td><code>build_install.sh</code></td><td>å…¨ç³»ç»Ÿï¼ˆéœ€ Golangï¼‰</td><td>ç¼–è¯‘åç«¯å¾®æœåŠ¡ï¼Œéƒ¨ç½²åˆ° <code>/root/app/kratos_admin</code>ï¼ˆLinux/macOSï¼‰æˆ–å¯¹åº”è·¯å¾„</td></tr><tr><td><code>install_golang.sh</code></td><td>Linux/macOS</td><td>å•ç‹¬å®‰è£…æŒ‡å®šç‰ˆæœ¬ Golangï¼ˆè‹¥è„šæœ¬è‡ªåŠ¨å®‰è£…çš„ç‰ˆæœ¬ä¸æ»¡è¶³éœ€æ±‚æ—¶ç”¨ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-2">äºŒã€ç¯å¢ƒæ­å»ºï¼šç”¨è„šæœ¬ä¸€é”®æå®šä¾èµ–ï¼ˆåˆ†ç³»ç»Ÿæ“ä½œï¼‰</h3>
<h4 data-id="heading-3">2.1 é€šç”¨å‰ç½®æ­¥éª¤ï¼šæ‹‰å–é¡¹ç›®ä»£ç </h4>
<p>å…ˆå…‹éš†ä»£ç åˆ°æœ¬åœ°ï¼Œç¡®ä¿èƒ½è®¿é—® <code>backend/script</code> ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†é¡¹ç›®ï¼ˆHTTPS æ–¹å¼ï¼Œæ— éœ€ SSH å¯†é’¥ï¼‰</span>
git <span class="hljs-built_in">clone</span> https://github.com/tx7do/go-kratos-admin.git

<span class="hljs-comment"># è¿›å…¥é¡¹ç›®æ ¹ç›®å½•</span>
<span class="hljs-built_in">cd</span> go-kratos-admin
</code></pre>
<h4 data-id="heading-4">2.2 Windows ç³»ç»Ÿï¼šç”¨ PowerShell è„šæœ¬è‡ªåŠ¨è£…ä¾èµ–</h4>
<p><strong>å¿…é¡»ä»¥ã€Œç®¡ç†å‘˜èº«ä»½ã€æ‰“å¼€ PowerShell</strong>ï¼ˆå¦åˆ™è„šæœ¬æ— æƒé™ä¿®æ”¹ç³»ç»Ÿé…ç½®ï¼‰ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<h5 data-id="heading-5">1. è¿›å…¥ backend ç›®å½•ï¼Œèµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™ï¼š</h5>
<pre><code class="hljs language-powershell" lang="powershell"># 1. ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShellï¼ˆå³é”®å¼€å§‹èœå• â†’ é€‰æ‹©â€œWindows PowerShell (ç®¡ç†å‘˜)â€ï¼‰
# 2. è¿›å…¥ backend ç›®å½•ï¼ˆæ³¨æ„è·¯å¾„åˆ†éš”ç¬¦ç”¨ \ æˆ– /ï¼Œç¤ºä¾‹ï¼šè‹¥é¡¹ç›®åœ¨ D ç›˜ï¼‰
cd D:/go-kratos-admin/backend

# 3. å…è®¸æ‰§è¡Œæœ¬åœ°è„šæœ¬ï¼ˆä»…é¦–æ¬¡æ‰§è¡Œï¼Œåç»­æ— éœ€é‡å¤ï¼‰
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
# æç¤ºâ€œæ˜¯å¦æ‰§è¡Œæ­¤æ“ä½œï¼Ÿâ€æ—¶ï¼Œè¾“å…¥ Y å¹¶å›è½¦
</code></pre>
<h5 data-id="heading-6">2. è¿è¡Œ Windows ä¸“å±å‡†å¤‡è„šæœ¬ï¼š</h5>
<pre><code class="hljs language-powershell" lang="powershell"># æ‰§è¡Œç¯å¢ƒå‡†å¤‡è„šæœ¬ï¼Œè‡ªåŠ¨å®‰è£… Scoop/Git/Golang/Docker ç­‰
# æ‰§è¡Œè„šæœ¬ï¼ˆé¦–æ¬¡è¿è¡Œçº¦ 10-15 åˆ†é’Ÿï¼Œå–å†³äºç½‘ç»œé€Ÿåº¦ï¼‰
.\script\prepare_windows.ps1

# è„šæœ¬æ‰§è¡Œä¸­æ³¨æ„ï¼š
# - è‹¥æç¤ºâ€œå®‰è£… Scoopâ€ï¼Œç›´æ¥æŒ‰å›è½¦ï¼ˆè‡ªåŠ¨ä¸‹è½½é…ç½®ï¼‰ï¼›
# - å®‰è£… Docker åä¼šå¼¹å‡ºâ€œDocker Desktop å®‰è£…å‘å¯¼â€ï¼ŒæŒ‰é»˜è®¤æ­¥éª¤ä¸‹ä¸€æ­¥ï¼Œæœ€åå¯åŠ¨ Dockerï¼›
# - è„šæœ¬ç»“æŸåï¼Œå…³é—­å½“å‰ PowerShellï¼Œé‡æ–°ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ï¼ˆç¡®ä¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼‰
</code></pre>
<h5 data-id="heading-7">3. éªŒè¯å…³é”®å·¥å…·æ˜¯å¦å®‰è£…æˆåŠŸ</h5>
<pre><code class="hljs language-powershell" lang="powershell">git --version  # é¢„æœŸï¼šgit version 2.30.0+
go version     # é¢„æœŸï¼šgo version go1.21+ windows/amd64
docker --version  # é¢„æœŸï¼šDocker version 20.10.0+
pnpm --version    # é¢„æœŸï¼špnpm 8.0.0+
</code></pre>
<h4 data-id="heading-8">2.3 Linux ç³»ç»Ÿï¼šæŒ‰å‘è¡Œç‰ˆé€‰å¯¹åº”è„šæœ¬</h4>
<p><strong>Linux è„šæœ¬æ‰§è¡Œè¯´æ˜ï¼š</strong></p>
<ul>
<li>è„šæœ¬ä¼šè‡ªåŠ¨è¾“å…¥ <code>y</code> ç¡®è®¤å®‰è£…ï¼ˆæ— éœ€æ‰‹åŠ¨å¹²é¢„ï¼‰ï¼Œè¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦è¾“å…¥ sudo å¯†ç ï¼ˆè¾“å…¥æ—¶æ— æ˜¾å¼å›æ˜¾ï¼Œè¾“å®ŒæŒ‰å›è½¦å³å¯ï¼‰ï¼›</li>
<li>å®‰è£… Docker åä¼šè‡ªåŠ¨å°†å½“å‰ç”¨æˆ·åŠ å…¥ docker ç»„ï¼Œè„šæœ¬ç»“æŸåéœ€é‡æ–°ç™»å½•ç»ˆç«¯ï¼ˆç¡®ä¿ Docker æƒé™ç”Ÿæ•ˆï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-9">é€šç”¨å‰ç½®ï¼šèµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™ï¼ˆä»…éœ€ä¸€æ¬¡ï¼‰</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥ backend ç›®å½•</span>
<span class="hljs-built_in">cd</span> go-kratos-admin/backend

<span class="hljs-comment"># ç»™æ‰€æœ‰è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆé¿å…â€œPermission deniedâ€ï¼‰</span>
<span class="hljs-built_in">chmod</span> +x ./script/*.sh
</code></pre>
<h5 data-id="heading-10">åœºæ™¯ 1ï¼šUbuntu/Debian ç³»åˆ—</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰§è¡Œå‡†å¤‡è„šæœ¬ï¼ˆä¸­é€”éœ€è¾“å…¥ sudo å¯†ç ï¼Œè¾“å…¥æ—¶æ— æ˜¾å¼å›æ˜¾ï¼Œè¾“å®Œå›è½¦å³å¯ï¼‰</span>
./script/prepare_ubuntu.sh

<span class="hljs-comment"># è„šæœ¬ç»“æŸåé‡æ–°ç™»å½•ç»ˆç«¯ï¼ˆæˆ–æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åŠ è½½ç¯å¢ƒå˜é‡ï¼‰</span>
<span class="hljs-built_in">source</span> /etc/profile

<span class="hljs-comment"># éªŒè¯ç¯å¢ƒï¼ˆåŒ Windows éªŒè¯å‘½ä»¤ï¼Œç¡®ä¿å·¥å…·ç‰ˆæœ¬è¾¾æ ‡ï¼‰</span>
git --version &amp;&amp; go version &amp;&amp; docker --version
</code></pre>
<h5 data-id="heading-11">åœºæ™¯ 2ï¼šCentOS ç³»åˆ—</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> backend
<span class="hljs-built_in">chmod</span> +x ./script/*.sh
./script/prepare_centos.sh

<span class="hljs-comment"># é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡ + éªŒè¯</span>
<span class="hljs-built_in">source</span> /etc/profile &amp;&amp; go version &amp;&amp; docker --version
</code></pre>
<h5 data-id="heading-12">åœºæ™¯ 3ï¼šRocky Linux</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> backend
<span class="hljs-built_in">chmod</span> +x ./script/*.sh
./script/prepare_rocky.sh

<span class="hljs-comment"># é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡ + éªŒè¯</span>
<span class="hljs-built_in">source</span> /etc/profile &amp;&amp; go version &amp;&amp; docker --version
</code></pre>
<h4 data-id="heading-13"><strong>Linux é¿å‘æç¤º</strong>ï¼šè‹¥æ‰§è¡Œ <code>docker ps</code> æç¤º <code>â€œCannot connect to the Docker daemon</code>â€ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¿®å¤ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash">sudo systemctl start docker  <span class="hljs-comment"># å¯åŠ¨ Docker æœåŠ¡</span>
sudo systemctl <span class="hljs-built_in">enable</span> docker <span class="hljs-comment"># è®¾ç½®å¼€æœºè‡ªå¯</span>
sudo usermod -aG docker <span class="hljs-variable">$USER</span> <span class="hljs-comment"># å°†å½“å‰ç”¨æˆ·åŠ å…¥ docker ç»„ï¼ˆé¿å…æ¯æ¬¡ç”¨ sudoï¼‰</span>
<span class="hljs-comment"># æ‰§è¡Œåé‡æ–°ç™»å½•ç»ˆç«¯ï¼Œå†è¯• docker ps</span>
</code></pre>
<h4 data-id="heading-14">2.4 macOS ç³»ç»Ÿ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> backend
<span class="hljs-built_in">chmod</span> +x ./script/*.sh
./script/prepare_macos.sh
</code></pre>
<h4 data-id="heading-15">éªŒè¯ç¯å¢ƒ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># éªŒè¯å·¥å…·</span>
git --version &amp;&amp; go version &amp;&amp; docker --version
<span class="hljs-comment"># éªŒè¯ Docker æœåŠ¡ï¼ˆç¡®ä¿èƒ½æ­£å¸¸æ‹‰å–é•œåƒï¼‰</span>
docker pull hello-world &amp;&amp; docker run hello-world  <span class="hljs-comment"># é¢„æœŸè¾“å‡ºâ€œHello from Docker!â€</span>
</code></pre>
<h3 data-id="heading-16">ä¸‰ã€åç«¯æœåŠ¡å¯åŠ¨ï¼šä¸¤ç§éƒ¨ç½²æ¨¡å¼ï¼ˆè„šæœ¬ä¸€é”®åˆ‡æ¢ï¼‰</h3>
<p>åç«¯æœåŠ¡æ”¯æŒã€Œå…¨ Docker éƒ¨ç½²ã€ï¼ˆæ–°æ‰‹æ¨èï¼‰å’Œã€Œæ··åˆéƒ¨ç½²ã€ï¼ˆé€‚åˆå¼€å‘è°ƒè¯•ï¼‰ï¼Œå‡é€šè¿‡è„šæœ¬ç®€åŒ–æ“ä½œã€‚</p>
<h4 data-id="heading-17">3.1 æ¨¡å¼ 1ï¼šå…¨ Docker éƒ¨ç½²ï¼ˆé›¶æœ¬åœ°ä¾èµ–ï¼Œæ¨èæ–°æ‰‹ï¼‰</h4>
<p>æ‰€æœ‰ç»„ä»¶ï¼ˆä¸­é—´ä»¶ + åç«¯æœåŠ¡ï¼‰éƒ½è¿è¡Œåœ¨ Docker å®¹å™¨ä¸­ï¼Œæ— éœ€æœ¬åœ°ç¼–è¯‘ï¼Œæ‰§è¡Œä¸€ä¸ªè„šæœ¬å³å¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¡®ä¿åœ¨ backend ç›®å½•ä¸‹</span>
<span class="hljs-built_in">cd</span> go-kratos-admin/backend

<span class="hljs-comment"># ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆé¦–æ¬¡è¿è¡Œéœ€æ‹‰å–é•œåƒï¼Œè€å¿ƒç­‰å¾… 3-5 åˆ†é’Ÿï¼‰</span>
./script/docker_compose_install.sh
</code></pre>
<p><strong>éªŒè¯å¯åŠ¨ç»“æœï¼š</strong></p>
<ul>
<li>æ‰§è¡Œ <code>docker ps</code>ï¼Œè‹¥çœ‹åˆ° <code>go-kratos-admin-backend</code>ã€<code>postgres</code>ã€<code>redis</code>ã€<code>consul</code> ç­‰å®¹å™¨çŠ¶æ€ä¸º <code>Up</code>ï¼Œåˆ™éƒ¨ç½²æˆåŠŸï¼›</li>
<li>åç«¯æœåŠ¡é»˜è®¤ç«¯å£ï¼š7788ï¼ˆAPI æœåŠ¡ï¼‰ã€7789ï¼ˆSSE æœåŠ¡ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-18">3.2 æ¨¡å¼ 2ï¼šæ··åˆéƒ¨ç½²ï¼ˆä¸­é—´ä»¶ Docker + æœåŠ¡æœ¬åœ°è¿è¡Œï¼‰</h4>
<p>é€‚åˆéœ€è¦ä¿®æ”¹åç«¯ä»£ç çš„åœºæ™¯ï¼ˆæœ¬åœ°è¿è¡ŒæœåŠ¡ä¾¿äºè°ƒè¯•ï¼‰ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h5 data-id="heading-19">1. ä»…å¯åŠ¨ä¸­é—´ä»¶å®¹å™¨ï¼ˆç”¨ä¸“ç”¨è„šæœ¬ï¼‰ï¼š</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> go-kratos-admin/backend
./script/docker_compose_install_depends.sh
</code></pre>
<h5 data-id="heading-20">2. ç¼–è¯‘å¹¶éƒ¨ç½²æœ¬åœ°æœåŠ¡ï¼ˆç”¨ <code>build_install.sh</code> è„šæœ¬ï¼‰ï¼š</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¯‘åç«¯ä»£ç å¹¶éƒ¨ç½²åˆ°é»˜è®¤è·¯å¾„ï¼ˆLinux/macOS ä¸º /root/app/kratos_adminï¼‰</span>
./script/build_install.sh
</code></pre>
<h5 data-id="heading-21">3. é…ç½® hosts æ–‡ä»¶ï¼ˆå…³é”®ï¼è®©æœ¬åœ°æœåŠ¡èƒ½è®¿é—® Docker ä¸­é—´ä»¶ï¼‰ï¼š</h5>
<ul>
<li>Linux/macOSï¼š<code>/etc/hosts</code> æˆ– <code>/private/etc/hosts</code></li>
<li>Windowsï¼š<code>C:\Windows\System32\drivers\etc\hosts</code></li>
</ul>
<p>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">127.0.0.1 postgres
127.0.0.1 redis
127.0.0.1 minio
127.0.0.1 consul
127.0.0.1 jaeger
</code></pre>
<h5 data-id="heading-22">4. å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼š</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥éƒ¨ç½²ç›®å½•ï¼ˆLinux/macOS ç¤ºä¾‹è·¯å¾„ï¼‰</span>
<span class="hljs-built_in">cd</span> /root/app/kratos_admin

<span class="hljs-comment"># ç”¨ PM2 å¯åŠ¨æœåŠ¡ï¼ˆè„šæœ¬å·²è‡ªåŠ¨å®‰è£… PM2ï¼‰</span>
pm2 start ./server --name kratos_admin
</code></pre>
<h5 data-id="heading-23">éªŒè¯æœ¬åœ°æœåŠ¡ï¼š</h5>
<ul>
<li>æ‰§è¡Œ <code>pm2 status</code>ï¼Œè‹¥ <code>kratos_admin</code> çŠ¶æ€ä¸º <code>online</code>ï¼Œåˆ™å¯åŠ¨æˆåŠŸï¼›</li>
<li>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A7788%2Fdocs%2F" target="_blank" title="http://localhost:7788/docs/" ref="nofollow noopener noreferrer">http://localhost:7788/docs/</a>ï¼Œè¿”å› Swagger UIçš„ç½‘é¡µç•Œé¢ å³æ­£å¸¸ã€‚</li>
</ul>
<h3 data-id="heading-24">å››ã€å‰ç«¯æœåŠ¡å¯åŠ¨ï¼šå¿«é€Ÿè·‘é€šé¡µé¢ï¼ˆå…¨ç³»ç»Ÿé€šç”¨ï¼‰</h3>
<p>å‰ç«¯æ— éœ€è„šæœ¬ï¼Œç›´æ¥ç”¨ pnpm å®‰è£…ä¾èµ–å¹¶å¯åŠ¨ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-25">1. è¿›å…¥å‰ç«¯ç›®å½•ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> go-kratos-admin/frontend
</code></pre>
<h4 data-id="heading-26">2. å®‰è£…å‰ç«¯ä¾èµ–ï¼ˆè‹¥é€Ÿåº¦æ…¢ï¼Œå¯åˆ‡æ¢é•œåƒï¼‰ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ‡æ¢æ·˜å®é•œåƒï¼ˆå¯é€‰ï¼ŒåŠ é€Ÿä¾èµ–ä¸‹è½½ï¼‰</span>
pnpm config <span class="hljs-built_in">set</span> registry https://registry.npmmirror.com

<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
pnpm install
</code></pre>
<h4 data-id="heading-27">3. å¯åŠ¨å¼€å‘æ¨¡å¼ï¼ˆå®æ—¶çƒ­æ›´æ–°ï¼Œé€‚åˆè°ƒè¯•ï¼‰ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm dev
</code></pre>
<h4 data-id="heading-28">éªŒè¯å‰ç«¯ï¼š</h4>
<ul>
<li>å¯åŠ¨æˆåŠŸåï¼Œç»ˆç«¯ä¼šè¾“å‡º <code>Local: http://localhost:5666</code>ï¼›</li>
<li>æ‰“å¼€æµè§ˆå™¨è®¿é—®è¯¥åœ°å€ï¼Œçœ‹åˆ°ç™»å½•é¡µé¢å³æˆåŠŸï¼ˆé»˜è®¤è´¦å·ï¼š<code>admin</code>ï¼Œå¯†ç ï¼š<code>admin</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-29">äº”ã€å…³é”®éªŒè¯ï¼šç¡®ä¿å‰åç«¯æ‰“é€š</h3>
<ul>
<li>å‰ç«¯ç™»å½•ï¼šè¾“å…¥ <code>admin</code>/<code>admin</code> ç™»å½•ï¼Œèƒ½çœ‹åˆ°ã€Œç§Ÿæˆ·ç®¡ç†ã€ã€Œç”¨æˆ·ç®¡ç†ã€ç­‰èœå•ï¼Œè¯´æ˜å‰ç«¯ä¸åç«¯æƒé™æ¥å£è¿é€šï¼›</li>
<li>åç«¯ API æ–‡æ¡£ï¼šè®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A7788%2Fdocs" target="_blank" title="http://localhost:7788/docs" ref="nofollow noopener noreferrer">http://localhost:7788/docs</a>ï¼Œèƒ½çœ‹åˆ° <code>Swagger</code> æ–‡æ¡£ï¼Œä¸”å¯åœ¨çº¿è°ƒè¯•æ¥å£ï¼ˆå¦‚ <code>GET /admin/v1/users</code> æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼‰ï¼›</li>
<li>ä¸­é—´ä»¶çŠ¶æ€ï¼šæ‰§è¡Œ <code>docker ps</code>ï¼Œç¡®ä¿ <code>postgres</code>ï¼ˆæ•°æ®åº“ï¼‰ã€<code>redis</code>ï¼ˆç¼“å­˜ï¼‰å®¹å™¨æŒç»­è¿è¡Œï¼ˆæ— é¢‘ç¹é‡å¯ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-30">å…­ã€è„šæœ¬ä½¿ç”¨å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-31">é—®é¢˜ 1ï¼šLinux/macOS è„šæœ¬æç¤º â€œPermission deniedâ€</h4>
<ul>
<li>åŸå› ï¼šè„šæœ¬æ— æ‰§è¡Œæƒé™ï¼›</li>
<li>è§£å†³ï¼šæ‰§è¡Œ <code>chmod +x ./script/*.sh</code>ï¼ˆåœ¨ <code>backend</code> ç›®å½•ä¸‹ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-32">é—®é¢˜ 2ï¼šWindows è„šæœ¬æç¤º â€œæ— æ³•åŠ è½½æ–‡ä»¶ ... å› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬â€</h4>
<ul>
<li>åŸå› ï¼š<code>PowerShell</code> æ‰§è¡Œç­–ç•¥é™åˆ¶ï¼›</li>
<li>è§£å†³ï¼šä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ <code>PowerShell</code>ï¼Œæ‰§è¡Œ <code>Set-ExecutionPolicy RemoteSigned -Scope CurrentUser</code>ï¼Œç„¶åè¾“å…¥ <code>Y</code> ç¡®è®¤ã€‚</li>
</ul>
<h4 data-id="heading-33">é—®é¢˜ 3ï¼šDocker å®¹å™¨å¯åŠ¨åç«‹å³é€€å‡ºï¼ˆçŠ¶æ€ä¸º Exitedï¼‰</h4>
<ul>
<li>åŸå› ï¼šä¸­é—´ä»¶ç«¯å£å†²çªï¼ˆå¦‚æœ¬åœ°å·²å¯åŠ¨ MySQL å ç”¨ 5432 ç«¯å£ï¼‰ï¼›</li>
<li>è§£å†³ï¼šåœæ­¢æœ¬åœ°å ç”¨ç«¯å£çš„æœåŠ¡ï¼Œæˆ–ä¿®æ”¹ <code>backend/docker-compose.yml</code> ä¸­å¯¹åº”æœåŠ¡çš„ç«¯å£æ˜ å°„ï¼ˆå¦‚å°† <code>5432:5432</code> æ”¹ä¸º <code>5433:5432</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-34">é—®é¢˜ 4ï¼šbuild_install.sh è„šæœ¬ç¼–è¯‘å¤±è´¥ï¼ˆæç¤º â€œgo: command not foundâ€ï¼‰</h4>
<ul>
<li>åŸå› ï¼šGolang ç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆï¼›</li>
<li>è§£å†³ï¼šLinux/macOS æ‰§è¡Œ <code>source /etc/profile</code>ï¼ŒWindows é‡æ–°æ‰“å¼€ç®¡ç†å‘˜ PowerShellï¼Œå†é‡æ–°æ‰§è¡Œè„šæœ¬ã€‚</li>
</ul>
<h3 data-id="heading-35">ä¸ƒã€ä¸‹ä¸€æ­¥æ“ä½œå»ºè®®</h3>
<h4 data-id="heading-36">1. åŸºç¡€å¼€å‘ï¼š</h4>
<ul>
<li>åç«¯ï¼šåœ¨ <code>backend/internal/service</code> ç›®å½•æ–°å¢ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚ â€œè®¢å•ç®¡ç†â€ æ¥å£ï¼‰ï¼›</li>
<li>å‰ç«¯ï¼šåœ¨ <code>frontend/src/views</code> ç›®å½•æ–°å¢é¡µé¢ï¼Œå¯¹æ¥åç«¯æ¥å£ï¼ˆå‚è€ƒç°æœ‰ â€œç§Ÿæˆ·ç®¡ç†â€ é¡µé¢ç»“æ„ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-37">2. ç”Ÿäº§éƒ¨ç½²ï¼š</h4>
<ul>
<li>åç«¯ï¼šç”¨ <code>./script/build_install.sh</code> ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé…åˆ Systemd é…ç½®å¼€æœºè‡ªå¯ï¼›</li>
<li>å‰ç«¯ï¼šæ‰§è¡Œ <code>pnpm build</code> ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œç”¨ Nginx éƒ¨ç½²ï¼ˆé…ç½®åå‘ä»£ç†åˆ°åç«¯æ¥å£ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-38">3. å¯»æ±‚æ”¯æŒï¼š</h4>
<ul>
<li>å®˜æ–¹å¾®ä¿¡ï¼š<code>yang_lin_bo</code>ï¼ˆå¤‡æ³¨ â€œ<code>go-kratos-admin</code>â€ï¼‰ï¼›</li>
<li>GitHub Issueï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-kratos-admin%2Fissues" target="_blank" title="https://github.com/tx7do/go-kratos-admin/issues" ref="nofollow noopener noreferrer">github.com/tx7do/go-krâ€¦</a>ï¼ˆæäº¤é—®é¢˜æ—¶é™„æ—¥å¿—æˆªå›¾ï¼Œä¾¿äºå®šä½ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-39">æ€»ç»“</h3>
<p>é€šè¿‡é¡¹ç›®è‡ªå¸¦çš„è„šæœ¬ï¼Œå¤§éƒ¨åˆ†ç¯å¢ƒé…ç½®ä¸éƒ¨ç½²æ­¥éª¤éƒ½èƒ½ â€œä¸€é”®å®Œæˆâ€ï¼Œé¿å…äº†æ‰‹åŠ¨å®‰è£…ä¾èµ–çš„ç¹çä¸å‡ºé”™é£é™©ã€‚è‹¥åç»­éœ€è¦ä¿®æ”¹ä»£ç æˆ–æ‰©å±•åŠŸèƒ½ï¼Œå¯åŸºäºæ­¤åŸºç¡€ç¯å¢ƒï¼Œèšç„¦ä¸šåŠ¡é€»è¾‘å¼€å‘å³å¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Windows BLE å¼€å‘æŒ‡å—ï¼ˆRust windows-rs)]]></title>    <link>https://juejin.cn/post/7577364921656410154</link>    <guid>https://juejin.cn/post/7577364921656410154</guid>    <pubDate>2025-11-28T03:21:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577364921656410154" data-draft-id="7577332659505856555" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Windows BLE å¼€å‘æŒ‡å—ï¼ˆRust windows-rs)"/> <meta itemprop="keywords" content="å‰ç«¯,Rust"/> <meta itemprop="datePublished" content="2025-11-28T03:21:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zengyuhan503"/> <meta itemprop="url" content="https://juejin.cn/user/3526889034488968"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Windows BLE å¼€å‘æŒ‡å—ï¼ˆRust windows-rs)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889034488968/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zengyuhan503
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:21:37.000Z" title="Fri Nov 28 2025 03:21:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Windows BLE å¼€å‘æŒ‡å—ï¼ˆRust windows-rsï¼‰</h2>
<p>æœ¬æ¼”ç¤ºåœ¨ Windows å¹³å°ä½¿ç”¨ Rust çš„ windows-rs åº“è¿›è¡Œ BLEï¼ˆä½åŠŸè€—è“ç‰™ï¼‰å¼€å‘ï¼šæ‰«æè®¾å¤‡ã€è¿æ¥ä¸æœåŠ¡å‘ç°ã€é€‰æ‹©ç‰¹å¾ã€å¯ç”¨é€šçŸ¥ï¼ˆCCCDï¼‰ã€å‘é€ä¸æ¥æ”¶æ•°æ®ã€æ–­å¼€ä¸æ¸…ç†ï¼ŒåŒæ—¶ç»™å‡ºâ€œå·²é…å¯¹è®¾å¤‡é‡å¯â€åœºæ™¯çš„ç¨³æ€ç­–ç•¥</p>
<hr/>
<h3 data-id="heading-1">ä¾èµ–ä¸å‡†å¤‡</h3>
<p>åœ¨ <code>Cargo.toml</code> æ·»åŠ ä¾èµ–ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[dependencies]</span>
<span class="hljs-attr">windows</span> = <span class="hljs-string">"0.56"</span>
<span class="hljs-attr">tokio</span> = { version = <span class="hljs-string">"1"</span>, features = [<span class="hljs-string">"macros"</span>, <span class="hljs-string">"rt-multi-thread"</span>] }
<span class="hljs-attr">uuid</span> = <span class="hljs-string">"1"</span>
</code></pre>
<p>å¸¸ç”¨å¯¼å…¥ï¼ˆæ”¾åœ¨ä½ çš„æ¨¡å—æˆ–æ–‡ä»¶é¡¶éƒ¨ï¼‰ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> windows::{
    core::<span class="hljs-type">Result</span> <span class="hljs-keyword">as</span> WinResult,
    Devices::Bluetooth::Advertisement::{
        BluetoothLEAdvertisementWatcher, BluetoothLEAdvertisementReceivedEventArgs,
    },
    Devices::Bluetooth::{BluetoothLEDevice, BluetoothConnectionStatus},
    Devices::Bluetooth::GenericAttributeProfile::{
        GattDeviceService, GattCharacteristic, GattCharacteristicProperties,
        GattClientCharacteristicConfigurationDescriptorValue, GattCommunicationStatus,
        GattValueChangedEventArgs, GattProtectionLevel,
    },
    Devices::Enumeration::{
        DeviceInformationCustomPairing, DevicePairingKinds, DevicePairingRequestedEventArgs,
        DevicePairingResultStatus,
    },
    Foundation::TypedEventHandler,
    Storage::Streams::DataReader,
};
</code></pre>
<p>è¾…åŠ©å‡½æ•°ï¼šUUID å­—ç¬¦ä¸²è½¬ Windows GUIDï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">guid_from_str</span>(s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> windows::core::GUID {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">u</span> = uuid::Uuid::<span class="hljs-title function_ invoke__">parse_str</span>(s).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"uuid parse error"</span>);
    <span class="hljs-keyword">let</span> (d1, d2, d3, d4) = u.<span class="hljs-title function_ invoke__">as_fields</span>();
    windows::core::GUID::<span class="hljs-title function_ invoke__">from_values</span>(d1, d2, d3, *d4)
}
</code></pre>
<hr/>
<h3 data-id="heading-2">æ‰«æä¸ç­›é€‰è®¾å¤‡</h3>
<p>æ‰«æ 5 ç§’å¹¶è¿”å›è®¾å¤‡åˆ—è¡¨ï¼ˆMAC ä¸º 12 ä½åå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼‰ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Debug, Clone)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">BleDevice</span> { mac: <span class="hljs-type">String</span>, name: <span class="hljs-type">String</span>, rssi: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i16</span>&gt; }

<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">scan_devices</span>(timeout_ms: <span class="hljs-type">u64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;BleDevice&gt; {
    <span class="hljs-keyword">use</span> std::{collections::HashMap, sync::Arc, time::Duration};
    <span class="hljs-keyword">use</span> tokio::sync::Mutex <span class="hljs-keyword">as</span> AsyncMutex; <span class="hljs-comment">// å¹¿æ’­äº‹ä»¶æ˜¯å¼‚æ­¥å›è°ƒï¼Œè¿™é‡Œç”¨å¼‚æ­¥äº’æ–¥ä¿æŠ¤èšåˆè¡¨</span>

    <span class="hljs-comment">// addressâ†’è®¾å¤‡ä¿¡æ¯ èšåˆè¡¨ï¼ˆWindows æä¾› 64 ä½åœ°å€ï¼Œä¸æ˜¯æ–‡æœ¬ MACï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">map</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(AsyncMutex::<span class="hljs-title function_ invoke__">new</span>(HashMap::&lt;<span class="hljs-type">u64</span>, BleDevice&gt;::<span class="hljs-title function_ invoke__">new</span>()));
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">watcher</span> = BluetoothLEAdvertisementWatcher::<span class="hljs-title function_ invoke__">new</span>().<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// åˆ›å»ºå¹¿æ’­ç›‘å¬å™¨</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">map_cb</span> = map.<span class="hljs-title function_ invoke__">clone</span>();
    <span class="hljs-comment">// æ³¨å†Œ Received äº‹ä»¶ï¼šæ¯æ¡å¹¿æ’­æå–åœ°å€/åç§°/RSSI å¹¶å†™å…¥èšåˆè¡¨</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_token</span> = watcher.<span class="hljs-title function_ invoke__">Received</span>(&amp;TypedEventHandler::<span class="hljs-title function_ invoke__">new</span>(
        <span class="hljs-keyword">move</span> |_sender: &amp;<span class="hljs-type">Option</span>&lt;BluetoothLEAdvertisementWatcher&gt;, args: &amp;<span class="hljs-type">Option</span>&lt;BluetoothLEAdvertisementReceivedEventArgs&gt;| <span class="hljs-punctuation">-&gt;</span> WinResult&lt;()&gt; {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(args) = args.<span class="hljs-title function_ invoke__">as_ref</span>() {
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">addr</span> = args.<span class="hljs-title function_ invoke__">BluetoothAddress</span>()?; <span class="hljs-comment">// 64 ä½åœ°å€ï¼ˆæ•°å€¼ï¼‰</span>
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">mac</span> = <span class="hljs-built_in">format!</span>( <span class="hljs-comment">// è½¬ä¸º 12 ä½åå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œä¾¿äºç»Ÿä¸€ç­›é€‰</span>
                    <span class="hljs-string">"{:02x}{:02x}{:02x}{:02x}{:02x}{:02x}"</span>,
                    (addr &gt;&gt; <span class="hljs-number">40</span>) &amp; <span class="hljs-number">0xff</span>, (addr &gt;&gt; <span class="hljs-number">32</span>) &amp; <span class="hljs-number">0xff</span>, (addr &gt;&gt; <span class="hljs-number">24</span>) &amp; <span class="hljs-number">0xff</span>,
                    (addr &gt;&gt; <span class="hljs-number">16</span>) &amp; <span class="hljs-number">0xff</span>, (addr &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xff</span>, addr &amp; <span class="hljs-number">0xff</span>
                );
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">name</span> = args.<span class="hljs-title function_ invoke__">Advertisement</span>()?.<span class="hljs-title function_ invoke__">LocalName</span>()?.<span class="hljs-title function_ invoke__">to_string</span>(); <span class="hljs-comment">// æœ¬åœ°åï¼ˆå¯èƒ½ç©ºï¼‰</span>
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">rssi</span> = args.<span class="hljs-title function_ invoke__">RawSignalStrengthInDBm</span>()?; <span class="hljs-comment">// ä¿¡å·å¼ºåº¦ï¼ˆdBmï¼‰</span>
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(<span class="hljs-keyword">mut</span> m) = map_cb.<span class="hljs-title function_ invoke__">try_lock</span>() { <span class="hljs-comment">// éé˜»å¡å†™å…¥ï¼Œé¿å…å›è°ƒå¡ä½</span>
                    m.<span class="hljs-title function_ invoke__">entry</span>(addr).<span class="hljs-title function_ invoke__">and_modify</span>(|d| { <span class="hljs-keyword">if</span> d.name.<span class="hljs-title function_ invoke__">is_empty</span>() &amp;&amp; !name.<span class="hljs-title function_ invoke__">is_empty</span>() { d.name = name.<span class="hljs-title function_ invoke__">clone</span>(); } d.rssi = <span class="hljs-title function_ invoke__">Some</span>(rssi); })
                        .<span class="hljs-title function_ invoke__">or_insert</span>(BleDevice { mac, name, rssi: <span class="hljs-title function_ invoke__">Some</span>(rssi) });
                }
            }
            <span class="hljs-title function_ invoke__">Ok</span>(())
        }
    )).<span class="hljs-title function_ invoke__">unwrap</span>();
    watcher.<span class="hljs-title function_ invoke__">Start</span>().<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// å¼€å§‹ç›‘å¬å¹¿æ’­</span>
    tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(timeout_ms)).<span class="hljs-keyword">await</span>;
    watcher.<span class="hljs-title function_ invoke__">Stop</span>().<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// åœæ­¢ç›‘å¬</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">locked</span> = map.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-keyword">await</span>; <span class="hljs-comment">// æ”¶æ•›ä¸ºåˆ—è¡¨</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">list</span>: <span class="hljs-type">Vec</span>&lt;_&gt; = locked.<span class="hljs-title function_ invoke__">values</span>().<span class="hljs-title function_ invoke__">cloned</span>().<span class="hljs-title function_ invoke__">filter</span>(|d| !d.name.<span class="hljs-title function_ invoke__">is_empty</span>()).<span class="hljs-title function_ invoke__">collect</span>();
    list.<span class="hljs-title function_ invoke__">sort_by_key</span>(|d| d.mac.<span class="hljs-title function_ invoke__">clone</span>());
    list
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">filter_device</span>(mac: &amp;<span class="hljs-type">str</span>, list: <span class="hljs-type">Vec</span>&lt;BleDevice&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;BleDevice&gt; {
    <span class="hljs-comment">// æ”¯æŒ "AA:BB:..." æˆ–æ— åˆ†éš”ç¬¦/å¤§å°å†™ä¸ä¸€è‡´çš„è¾“å…¥</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = mac.<span class="hljs-title function_ invoke__">replace</span>(<span class="hljs-string">":"</span>, <span class="hljs-string">""</span>).<span class="hljs-title function_ invoke__">replace</span>(<span class="hljs-string">'-'</span>, <span class="hljs-string">""</span>).<span class="hljs-title function_ invoke__">to_lowercase</span>();
    <span class="hljs-keyword">if</span> s.<span class="hljs-title function_ invoke__">len</span>() != <span class="hljs-number">12</span> || s.<span class="hljs-title function_ invoke__">chars</span>().<span class="hljs-title function_ invoke__">any</span>(|c| !c.<span class="hljs-title function_ invoke__">is_ascii_hexdigit</span>()) {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(addr_hex) = <span class="hljs-type">u64</span>::<span class="hljs-title function_ invoke__">from_str_radix</span>(&amp;s, <span class="hljs-number">16</span>) { s = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"{:012x}"</span>, addr_hex); }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(addr_dec) = s.parse::&lt;<span class="hljs-type">u64</span>&gt;() { s = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"{:012x}"</span>, addr_dec); }
    }
    list.<span class="hljs-title function_ invoke__">into_iter</span>().<span class="hljs-title function_ invoke__">find</span>(|d| d.mac == s)
}
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼š</p>
<ul>
<li>Windows å¹¿æ’­æä¾›çš„æ˜¯æ•°å€¼åœ°å€ï¼Œç»Ÿä¸€è½¬ä¸º 12 ä½åå…­è¿›åˆ¶æ›´åˆ©äºè®¾å¤‡ç­›é€‰ä¸æ—¥å¿—å®šä½ã€‚</li>
<li>äº‹ä»¶å›è°ƒä¸­å°½é‡ä½¿ç”¨ <code>try_lock</code>ï¼Œé¿å…å¹¿æ’­é«˜é¢‘å¯¼è‡´é”äº‰ç”¨ã€‚</li>
</ul>
<p>å¸¸è§å‘ï¼š</p>
<ul>
<li>æŸäº›è®¾å¤‡å¹¿æ’­ä¸å¸¦æœ¬åœ°åï¼Œéœ€å…è®¸ç©ºåç§°å¹¶åœ¨åç»­æ‰ç­›æ‰ã€‚</li>
<li>æ‰«æè¿‡çŸ­å¯èƒ½é”™è¿‡ç›®æ ‡è®¾å¤‡ï¼›æ ¹æ®åœºæ™¯è°ƒæ•´ <code>timeout_ms</code>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">è¿æ¥ä¸æœåŠ¡å‘ç°</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">connect_and_list_services</span>(device: &amp;BleDevice) <span class="hljs-punctuation">-&gt;</span> BluetoothLEDevice {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">addr</span> = <span class="hljs-type">u64</span>::<span class="hljs-title function_ invoke__">from_str_radix</span>(&amp;device.mac.<span class="hljs-title function_ invoke__">replace</span>(<span class="hljs-string">":"</span>, <span class="hljs-string">""</span>).<span class="hljs-title function_ invoke__">to_lowercase</span>(), <span class="hljs-number">16</span>).<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// æ–‡æœ¬ MAC â†’ æ•°å€¼åœ°å€</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">dev</span> = BluetoothLEDevice::<span class="hljs-title function_ invoke__">FromBluetoothAddressAsync</span>(addr).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// WinRT å¼‚æ­¥è·å–è®¾å¤‡å¯¹è±¡</span>
    <span class="hljs-comment">// ç­‰å¾…è¿æ¥å°±ç»ªï¼šé¿å…ç´§æ¥ç€è¯»æœåŠ¡/å†™ CCCD å‘½ä¸­æœªè¿æ¥çŠ¶æ€</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">10</span> {
        <span class="hljs-keyword">if</span> dev.<span class="hljs-title function_ invoke__">ConnectionStatus</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == BluetoothConnectionStatus::Connected { <span class="hljs-keyword">break</span>; }
        tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">200</span>)).<span class="hljs-keyword">await</span>;
    }
    <span class="hljs-comment">// åˆ—å‡ºæœåŠ¡ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºç¡®è®¤ç›®æ ‡æœåŠ¡æ˜¯å¦å­˜åœ¨ä¸åˆ·æ–°å®Œæˆ</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">services</span> = dev.<span class="hljs-title function_ invoke__">GetGattServicesAsync</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> services.<span class="hljs-title function_ invoke__">Status</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == GattCommunicationStatus::Success {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">list</span> = services.<span class="hljs-title function_ invoke__">Services</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        <span class="hljs-keyword">for</span> <span class="hljs-variable">s</span> <span class="hljs-keyword">in</span> list.<span class="hljs-title function_ invoke__">into_iter</span>() { <span class="hljs-built_in">println!</span>(<span class="hljs-string">"service uuid {:?}"</span>, s.<span class="hljs-title function_ invoke__">Uuid</span>().<span class="hljs-title function_ invoke__">unwrap</span>()); }
    }
    dev
}
</code></pre>
<ul>
<li>æŸäº›è®¾å¤‡åœ¨å»ºç«‹ç‰©ç†è¿æ¥åï¼Œéœ€è¦æ•°ç™¾æ¯«ç§’æ‰è¿›å…¥ <code>Connected</code>ï¼›è¿‡æ—©æ“ä½œå¸¸å¯¼è‡´ä¸å¯è¾¾æˆ–è¯»ç©ºæœåŠ¡ã€‚</li>
</ul>
<p>å¸¸è§å‘ï¼š</p>
<ul>
<li>å¿½ç•¥è¿æ¥å°±ç»ªè½®è¯¢ä¼šè§¦å‘åç»­â€œUnreachableâ€æˆ–å¯ç”¨é€šçŸ¥ä¸­æ­¢ï¼ˆE_ABORTï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">ç‰¹å¾é€‰æ‹©ï¼ˆé€šçŸ¥/å†™å…¥ï¼‰</h3>
<p>æŒ‰ GUID è¿‡æ»¤ï¼Œå¦åˆ™æšä¸¾å›é€€ï¼Œå¹¶æ ¹æ®å±æ€§åˆ¤å®šï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">select_notify</span>(service: &amp;GattDeviceService, guid: windows::core::GUID) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;GattCharacteristic&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">res</span> = service.<span class="hljs-title function_ invoke__">GetCharacteristicsForUuidAsync</span>(guid).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> res.<span class="hljs-title function_ invoke__">Status</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == GattCommunicationStatus::Success {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">list</span> = res.<span class="hljs-title function_ invoke__">Characteristics</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        <span class="hljs-keyword">for</span> <span class="hljs-variable">c</span> <span class="hljs-keyword">in</span> list.<span class="hljs-title function_ invoke__">into_iter</span>() {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">props</span> = c.<span class="hljs-title function_ invoke__">CharacteristicProperties</span>().<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// åˆ¤å®šå…·å¤‡ Notify æˆ– Indicate</span>
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">ok</span> = (props.<span class="hljs-number">0</span> &amp; GattCharacteristicProperties::Notify.<span class="hljs-number">0</span>) != <span class="hljs-number">0</span> || (props.<span class="hljs-number">0</span> &amp; GattCharacteristicProperties::Indicate.<span class="hljs-number">0</span>) != <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> ok { <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Some</span>(c); }
        }
    }
    <span class="hljs-comment">// GUID è¿‡æ»¤å¤±è´¥æ—¶ï¼Œæšä¸¾å…¨éƒ¨ç‰¹å¾å¹¶åŒ¹é… GUID</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">all</span> = service.<span class="hljs-title function_ invoke__">GetCharacteristicsAsync</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">Characteristics</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">for</span> <span class="hljs-variable">c</span> <span class="hljs-keyword">in</span> all.<span class="hljs-title function_ invoke__">into_iter</span>() { <span class="hljs-keyword">if</span> c.<span class="hljs-title function_ invoke__">Uuid</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == guid { <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Some</span>(c); } }
    <span class="hljs-literal">None</span>
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">select_write</span>(service: &amp;GattDeviceService, guid: windows::core::GUID) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;GattCharacteristic&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">res</span> = service.<span class="hljs-title function_ invoke__">GetCharacteristicsForUuidAsync</span>(guid).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> res.<span class="hljs-title function_ invoke__">Status</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == GattCommunicationStatus::Success {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">list</span> = res.<span class="hljs-title function_ invoke__">Characteristics</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        <span class="hljs-keyword">for</span> <span class="hljs-variable">c</span> <span class="hljs-keyword">in</span> list.<span class="hljs-title function_ invoke__">into_iter</span>() {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">p</span> = c.<span class="hljs-title function_ invoke__">CharacteristicProperties</span>().<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// åˆ¤å®šå…·å¤‡ Write æˆ– WriteWithoutResponse</span>
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">ok</span> = (p.<span class="hljs-number">0</span> &amp; GattCharacteristicProperties::Write.<span class="hljs-number">0</span>) != <span class="hljs-number">0</span> || (p.<span class="hljs-number">0</span> &amp; GattCharacteristicProperties::WriteWithoutResponse.<span class="hljs-number">0</span>) != <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> ok { <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Some</span>(c); }
        }
    }
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">all</span> = service.<span class="hljs-title function_ invoke__">GetCharacteristicsAsync</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">Characteristics</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">for</span> <span class="hljs-variable">c</span> <span class="hljs-keyword">in</span> all.<span class="hljs-title function_ invoke__">into_iter</span>() { <span class="hljs-keyword">if</span> c.<span class="hljs-title function_ invoke__">Uuid</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == guid { <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Some</span>(c); } }
    <span class="hljs-literal">None</span>
}
</code></pre>
<ul>
<li>è®¾å¤‡ç«¯åœ¨åˆ·æ–°æœŸé—´å¯èƒ½è¿”å›ç©ºåˆ—è¡¨ï¼Œæšä¸¾å›é€€èƒ½é¿å…æ¼é€‰ï¼›å±æ€§åˆ¤å®šå¯é¿å…è¯¯é€‰ä¸å¯ç”¨ç‰¹å¾ã€‚</li>
</ul>
<p>å¸¸è§å‘ï¼š</p>
<ul>
<li>ä»…æŒ‰ GUID å‘½ä¸­ä½†å±æ€§ä¸æ»¡è¶³ï¼ˆæ—  Notify/Writeï¼‰ï¼Œåç»­å¯ç”¨æˆ–å†™å…¥ä¼šå¤±è´¥ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">å¯ç”¨é€šçŸ¥ï¼ˆCCCDï¼‰ä¸å›è°ƒæ³¨å†Œ</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">enable_notify_with_retry</span>(ch: &amp;GattCharacteristic) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> {
    tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">1000</span>)).<span class="hljs-keyword">await</span>; <span class="hljs-comment">// é¢„å»¶æ—¶ï¼Œé¿å¼€è®¾å¤‡å¿™/æ ˆåˆ·æ–°</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">3</span> {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(op) = ch.<span class="hljs-title function_ invoke__">WriteClientCharacteristicConfigurationDescriptorAsync</span>(GattClientCharacteristicConfigurationDescriptorValue::Notify) {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(status) = op.<span class="hljs-keyword">await</span> { <span class="hljs-keyword">if</span> status == GattCommunicationStatus::Success { <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; } } <span class="hljs-comment">// é¦–é€‰ Notify</span>
        }
        tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">500</span>)).<span class="hljs-keyword">await</span>;
    }
    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">2</span> {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(op) = ch.<span class="hljs-title function_ invoke__">WriteClientCharacteristicConfigurationDescriptorAsync</span>(GattClientCharacteristicConfigurationDescriptorValue::Indicate) {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(status) = op.<span class="hljs-keyword">await</span> { <span class="hljs-keyword">if</span> status == GattCommunicationStatus::Success { <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; } } <span class="hljs-comment">// å›é€€ Indicate</span>
        }
        tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">500</span>)).<span class="hljs-keyword">await</span>;
    }
    <span class="hljs-literal">false</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">register_value_changed</span>(ch: &amp;GattCharacteristic, <span class="hljs-keyword">mut</span> on_notify: <span class="hljs-keyword">impl</span> <span class="hljs-title class_">FnMut</span>(<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt;) + <span class="hljs-built_in">Send</span> + <span class="hljs-symbol">'static</span>) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">handler</span> = TypedEventHandler::&lt;GattCharacteristic, GattValueChangedEventArgs&gt;::<span class="hljs-title function_ invoke__">new</span>(
        <span class="hljs-keyword">move</span> |_sender: &amp;<span class="hljs-type">Option</span>&lt;GattCharacteristic&gt;, args: &amp;<span class="hljs-type">Option</span>&lt;GattValueChangedEventArgs&gt;| {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(args) = args.<span class="hljs-title function_ invoke__">as_ref</span>() {
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(buf) = args.<span class="hljs-title function_ invoke__">CharacteristicValue</span>() {
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(reader) = DataReader::<span class="hljs-title function_ invoke__">FromBuffer</span>(&amp;buf) { <span class="hljs-comment">// IBuffer â†’ Vec&lt;u8&gt;</span>
                        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(len) = buf.<span class="hljs-title function_ invoke__">Length</span>() {
                            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">data</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0u8</span>; len <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>];
                            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = reader.<span class="hljs-title function_ invoke__">ReadBytes</span>(&amp;<span class="hljs-keyword">mut</span> data);
                            <span class="hljs-title function_ invoke__">on_notify</span>(data);
                        }
                    }
                }
            }
            <span class="hljs-title function_ invoke__">Ok</span>(())
        }
    );
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = ch.<span class="hljs-title function_ invoke__">ValueChanged</span>(&amp;handler);
}
</code></pre>
<ul>
<li>Notify ä¸éœ€è¦ ACKï¼Œå®æ—¶æ€§å¥½ï¼›è®¾å¤‡åªæ”¯æŒ Indicate æ—¶éœ€å›é€€ã€‚</li>
<li>IBuffer è½¬å­—èŠ‚åäº¤ç»™ä¸Šå±‚è§£æï¼Œé¿å… WinRT è¯»å–é˜»å¡ã€‚</li>
</ul>
<p>å¸¸è§å‘ï¼š</p>
<ul>
<li>å¯ç”¨é€šçŸ¥è¿‡æ—©ä¼šè¢«ä¸­æ­¢ï¼ˆE_ABORTï¼‰ï¼›åŠ å»¶æ—¶ä¸é‡è¯•èƒ½æ˜¾è‘—é™ä½æ¦‚ç‡ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">å†™å…¥ï¼ˆå¸¦å“åº”ä¼˜å…ˆï¼Œå¤±è´¥å›é€€æ— å“åº”ï¼‰</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">write_with_result_and_fallback</span>(ch: &amp;GattCharacteristic, data: &amp;[<span class="hljs-type">u8</span>]) <span class="hljs-punctuation">-&gt;</span> GattCommunicationStatus {
    <span class="hljs-keyword">use</span> windows::Storage::Streams::{InMemoryRandomAccessStream, DataWriter};
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">stream</span> = InMemoryRandomAccessStream::<span class="hljs-title function_ invoke__">new</span>().<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// æ„é€ å†…å­˜æµ</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">out</span> = stream.<span class="hljs-title function_ invoke__">GetOutputStreamAt</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// å–è¾“å‡ºæµ</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">writer</span> = DataWriter::<span class="hljs-title function_ invoke__">CreateDataWriter</span>(&amp;out).<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// åˆ›å»ºå†™å…¥å™¨</span>
    writer.<span class="hljs-title function_ invoke__">WriteBytes</span>(data).<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// å†™å…¥å­—èŠ‚</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">buf</span> = writer.<span class="hljs-title function_ invoke__">DetachBuffer</span>().<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// æ‹†å‡º IBuffer</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">res</span> = ch.<span class="hljs-title function_ invoke__">WriteValueWithResultAsync</span>(&amp;buf).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// å¸¦å“åº”å†™å…¥</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">status</span> = res.<span class="hljs-title function_ invoke__">Status</span>().<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// è¯»å–é€šä¿¡çŠ¶æ€ï¼ˆå¯ç»“åˆ ProtocolError å®šä½ ATT é”™è¯¯ï¼‰</span>
    <span class="hljs-keyword">if</span> status != GattCommunicationStatus::Success {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">fb</span> = ch.<span class="hljs-title function_ invoke__">WriteValueAsync</span>(&amp;buf).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">// å›é€€ï¼šæ— å“åº”å†™å…¥</span>
        <span class="hljs-keyword">return</span> fb;
    }
    status
}
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼š</p>
<ul>
<li>å¸¦å“åº”å†™å¯è· ATT é”™ç ï¼ˆæƒé™/é•¿åº¦/ä¸å…è®¸ç­‰ï¼‰ï¼›è®¾å¤‡ä»…æ”¯æŒæ— å“åº”å†™æ—¶è‡ªåŠ¨å›é€€ã€‚</li>
</ul>
<p>å¸¸è§å‘ï¼š</p>
<ul>
<li>æœªåŠ å¯†/æœªé…å¯¹æ—¶å¸¸è§ <code>Insufficient Authentication</code>ï¼›éœ€å…ˆå»ºç«‹åŠ å¯†ä¼šè¯ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">æ–­å¼€ä¸æ¸…ç†ï¼ˆé¡ºåºè‡³å…³é‡è¦ï¼‰</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">disconnect_cleanup</span>(dev: &amp;BluetoothLEDevice, notify_char: &amp;GattCharacteristic, token: windows::Foundation::EventRegistrationToken) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = notify_char.<span class="hljs-title function_ invoke__">RemoveValueChanged</span>(token); <span class="hljs-comment">// å…ˆç§»é™¤é€šçŸ¥äº‹ä»¶ï¼Œé¿å…å›è°ƒæ®‹ç•™</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(op) = notify_char.<span class="hljs-title function_ invoke__">WriteClientCharacteristicConfigurationDescriptorAsync</span>(GattClientCharacteristicConfigurationDescriptorValue::<span class="hljs-literal">None</span>) { <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = op.<span class="hljs-keyword">await</span>; } <span class="hljs-comment">// å…³é—­è®¢é˜…ï¼ˆCCCD=Noneï¼‰</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(svc) = notify_char.<span class="hljs-title function_ invoke__">Service</span>() { <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(sess) = svc.<span class="hljs-title function_ invoke__">Session</span>() { <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = sess.<span class="hljs-title function_ invoke__">SetMaintainConnection</span>(<span class="hljs-literal">false</span>); } } <span class="hljs-comment">// å–æ¶ˆä¿æŒè¿æ¥</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = dev.<span class="hljs-title function_ invoke__">Close</span>(); <span class="hljs-comment">// å…³é—­è®¾å¤‡å¥æŸ„</span>
}
</code></pre>
<ul>
<li>ä¸æ­£ç¡®çš„æ¸…ç†é¡ºåºä¼šå¯¼è‡´ä¸‹æ¬¡è¿æ¥å¯ç”¨é€šçŸ¥å¤±è´¥æˆ–ä¼šè¯ä¸å¯è¾¾ã€‚</li>
</ul>
<p>å¸¸è§å‘ï¼š</p>
<ul>
<li>å¿˜è®° <code>RemoveValueChanged</code> å¯¼è‡´ ValueChanged æŒæœ‰å¯¹è±¡ï¼Œå†™å…¥ None æ—¶æŠ¥é”™ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">å·²é…å¯¹è®¾å¤‡é‡å¯çš„ç¨³æ€ç­–ç•¥ï¼ˆæ¸…ç† + é‡è¯•ï¼‰</h3>
<p>è®¾å¤‡å·²åœ¨ç³»ç»Ÿå±‚â€œé…å¯¹ä¸”è¿æ¥â€ï¼Œå½“è®¾å¤‡é‡å¯è¿›å…¥é…å¯¹æ¨¡å¼æ—¶ï¼ŒWindows ä¿ç•™æ—§è¿æ¥/GATT ç¼“å­˜ï¼Œå¸¸è§é”™è¯¯ï¼š</p>
<ul>
<li>â€œnotify characteristic not foundâ€</li>
<li>â€œenable notify/indicate failedâ€ æˆ– E_ABORTï¼ˆ0x80004004ï¼‰</li>
</ul>
<p>å»ºè®®åœ¨è¿æ¥å‰æ‰§è¡Œ OS çº§æ¸…ç†ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">unpair_and_close</span>(address: <span class="hljs-type">u64</span>) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">dev</span> = BluetoothLEDevice::<span class="hljs-title function_ invoke__">FromBluetoothAddressAsync</span>(address).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(di) = dev.<span class="hljs-title function_ invoke__">DeviceInformation</span>() {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(pairing) = di.<span class="hljs-title function_ invoke__">Pairing</span>() {
            <span class="hljs-keyword">if</span> pairing.<span class="hljs-title function_ invoke__">IsPaired</span>().<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class="hljs-literal">false</span>) {
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = pairing.<span class="hljs-title function_ invoke__">UnpairAsync</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>;
            }
        }
    }
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = dev.<span class="hljs-title function_ invoke__">Close</span>();
    tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">800</span>)).<span class="hljs-keyword">await</span>;
}
</code></pre>
<p>éšåå†è¿›è¡Œè¿æ¥ã€æœåŠ¡å‘ç°ã€ç‰¹å¾é€‰æ‹©ä¸ CCCD å¯ç”¨ï¼Œå¹¶åœ¨å„æ­¥éª¤åŠ å…¥é€‚åº¦å»¶æ—¶ä¸é‡è¯•ã€‚</p>
<hr/>
<h3 data-id="heading-9">ç»„åˆç¤ºä¾‹ï¼šè¿æ¥â†’è®¢é˜…â†’å‘é€â†’æ¥æ”¶â†’æ–­å¼€</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">list</span> = <span class="hljs-title function_ invoke__">scan_devices</span>(<span class="hljs-number">5000</span>).<span class="hljs-keyword">await</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">dev</span> = <span class="hljs-title function_ invoke__">filter_device</span>(<span class="hljs-string">"208B37997529"</span>, list).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"device not found"</span>);

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">addr</span> = <span class="hljs-type">u64</span>::<span class="hljs-title function_ invoke__">from_str_radix</span>(&amp;dev.mac, <span class="hljs-number">16</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-title function_ invoke__">unpair_and_close</span>(addr).<span class="hljs-keyword">await</span>; <span class="hljs-comment">// å·²é…å¯¹åœºæ™¯å»ºè®®å…ˆæ¸…ç†</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">device</span> = <span class="hljs-title function_ invoke__">connect_and_list_services</span>(&amp;dev).<span class="hljs-keyword">await</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">service</span> = {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">guid</span> = <span class="hljs-title function_ invoke__">guid_from_str</span>(<span class="hljs-string">"01000100-0000-1000-8000-009078563412"</span>);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">list</span> = device.<span class="hljs-title function_ invoke__">GetGattServicesAsync</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">Services</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        list.<span class="hljs-title function_ invoke__">into_iter</span>().<span class="hljs-title function_ invoke__">find</span>(|s| s.<span class="hljs-title function_ invoke__">Uuid</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == guid).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"service not found"</span>)
    };

    tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">800</span>)).<span class="hljs-keyword">await</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">notify</span> = <span class="hljs-title function_ invoke__">select_notify</span>(&amp;service, <span class="hljs-title function_ invoke__">guid_from_str</span>(<span class="hljs-string">"02000200-0000-1000-8000-009178563412"</span>)).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"notify not found"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">writec</span> = <span class="hljs-title function_ invoke__">select_write</span>(&amp;service, <span class="hljs-title function_ invoke__">guid_from_str</span>(<span class="hljs-string">"03000300-0000-1000-8000-009278563412"</span>)).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"write not found"</span>);

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = notify.<span class="hljs-title function_ invoke__">SetProtectionLevel</span>(GattProtectionLevel::EncryptionRequired);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = writec.<span class="hljs-title function_ invoke__">SetProtectionLevel</span>(GattProtectionLevel::EncryptionRequired);

    <span class="hljs-keyword">if</span> !<span class="hljs-title function_ invoke__">enable_notify_with_retry</span>(&amp;notify).<span class="hljs-keyword">await</span> { <span class="hljs-built_in">panic!</span>(<span class="hljs-string">"enable notify failed"</span>); }
    <span class="hljs-title function_ invoke__">register_value_changed</span>(&amp;notify, |data| { <span class="hljs-built_in">println!</span>(<span class="hljs-string">"notify: {} bytes"</span>, data.<span class="hljs-title function_ invoke__">len</span>()); });

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">payload</span> = <span class="hljs-string">b"example payload"</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">status</span> = <span class="hljs-title function_ invoke__">write_with_result_and_fallback</span>(&amp;writec, payload).<span class="hljs-keyword">await</span>;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"write status: {:?}"</span>, status);

    <span class="hljs-comment">// æ¸…ç†</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šçœŸå®é¡¹ç›®ä¸­ä¿å­˜ ValueChanged æ³¨å†Œçš„ tokenï¼Œå¹¶åœ¨æ–­å¼€æ—¶ä¼ å…¥</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">dummy_token</span> = windows::Foundation::EventRegistrationToken { value: <span class="hljs-number">0</span> };
    <span class="hljs-title function_ invoke__">disconnect_cleanup</span>(&amp;device, &amp;notify, dummy_token).<span class="hljs-keyword">await</span>;
}
</code></pre>
<hr/>
<h3 data-id="heading-10">æ•…éšœæ’æŸ¥ä¸æœ€ä½³å®è·µ</h3>
<ul>
<li>WinRT await ä¸å¹¶å‘ï¼šå°†æ¶‰åŠ WinRT await çš„ä»£ç æ”¾åˆ°é˜»å¡çº¿ç¨‹æˆ–åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œï¼Œé¿å… <code>Send</code> çº¦æŸé—®é¢˜</li>
<li>è¿æ¥å°±ç»ªï¼šè½®è¯¢ <code>BluetoothConnectionStatus::Connected</code> å†è¿›è¡Œç‰¹å¾ä¸ CCCD æ“ä½œ</li>
<li>ç‰¹å¾ä¸ CCCDï¼šè·å–æœåŠ¡åå»¶æ—¶ã€ç‰¹å¾é€‰æ‹©é‡è¯•ï¼›CCCD å¯ç”¨å»¶æ—¶ã€Notifyâ†’Indicate å›é€€ï¼›å¿…è¦æ—¶é‡æ–°æŠ“å–ä¸€æ¬¡ç‰¹å¾å†å¯ç”¨</li>
<li>å·²é…å¯¹è®¾å¤‡é‡å¯ï¼šåŠ¡å¿…å…ˆæ‰§è¡Œ <code>UnpairAsync + Close + å»¶æ—¶</code> å†è¿æ¥ï¼Œæ˜¾è‘—é™ä½ç¼“å­˜ä¸ä¸€è‡´å¯¼è‡´çš„å¤±è´¥</li>
<li>æ–­å¼€é¡ºåºï¼šç§»é™¤äº‹ä»¶â†’CCCD=Noneâ†’å–æ¶ˆä¿æŒè¿æ¥â†’Close è®¾å¤‡ï¼›ä¸å½“çš„é¡ºåºä¼šè®©ä¸‹æ¬¡è¿æ¥å¯ç”¨é€šçŸ¥å¤±è´¥</li>
</ul>
<hr/>
<h3 data-id="heading-11">å°ç»“</h3>
<p>æœ¬æ–‡ç»™å‡ºäº†ä¸€å¥—å®Œæ•´çš„ã€å¯ç›´æ¥å¤åˆ¶çš„ Windows BLE å¼€å‘ä»£ç ç‰‡æ®µä¸æ“ä½œæ­¥éª¤ï¼Œæ¶µç›–æ‰«æã€è¿æ¥ä¸æœåŠ¡å‘ç°ã€ç‰¹å¾é€‰æ‹©ã€å¯ç”¨é€šçŸ¥ã€å†™å…¥ä¸æ¥æ”¶ã€æ–­å¼€æ¸…ç†ï¼Œä»¥åŠå·²é…å¯¹è®¾å¤‡é‡å¯åœºæ™¯çš„ç¨³æ€ç­–ç•¥ã€‚å°†è¿™äº›ç‰‡æ®µæŒ‰éœ€ç»„åˆï¼Œå³å¯æ­å»ºç¨³å®šçš„ BLE é€šä¿¡é“¾è·¯ã€‚</p>
<hr/>
<h3 data-id="heading-12">å¸¦è¯¦æ³¨çš„ä»£ç ç‰‡æ®µï¼ˆé€è¡Œè¯´æ˜ï¼‰</h3>
<h4 data-id="heading-13">1) æ‰«æä¸ç­›é€‰ï¼ˆè¯¦æ³¨ç‰ˆï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> windows::{
    core::<span class="hljs-type">Result</span> <span class="hljs-keyword">as</span> WinResult,
    Devices::Bluetooth::Advertisement::{
        BluetoothLEAdvertisementWatcher, BluetoothLEAdvertisementReceivedEventArgs,
    },
    Foundation::TypedEventHandler,
};
<span class="hljs-keyword">use</span> std::{collections::HashMap, sync::Arc, time::Duration};
<span class="hljs-keyword">use</span> tokio::sync::Mutex <span class="hljs-keyword">as</span> AsyncMutex;

<span class="hljs-meta">#[derive(Debug, Clone)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">BleDevice</span> { mac: <span class="hljs-type">String</span>, name: <span class="hljs-type">String</span>, rssi: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i16</span>&gt; }

<span class="hljs-comment">// æ‰«ææŒ‡å®šæ—¶é•¿ï¼Œèšåˆè®¾å¤‡åˆ°åˆ—è¡¨</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">scan_devices</span>(timeout_ms: <span class="hljs-type">u64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;BleDevice&gt; {
    <span class="hljs-comment">// ä½¿ç”¨å…±äº« HashMap èšåˆï¼šWindows å¹¿æ’­ç»™å‡ºçš„æ˜¯ 64 ä½åœ°å€ï¼ˆéæ–‡æœ¬ MACï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">map</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(AsyncMutex::<span class="hljs-title function_ invoke__">new</span>(HashMap::&lt;<span class="hljs-type">u64</span>, BleDevice&gt;::<span class="hljs-title function_ invoke__">new</span>()));

    <span class="hljs-comment">// åˆ›å»ºå¹¿æ’­ç›‘å¬å™¨</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">watcher</span> = BluetoothLEAdvertisementWatcher::<span class="hljs-title function_ invoke__">new</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">map_cb</span> = map.<span class="hljs-title function_ invoke__">clone</span>();

    <span class="hljs-comment">// æ³¨å†Œæ¥æ”¶äº‹ä»¶ï¼šæ¯æ¡å¹¿æ’­ä¸­æå–åœ°å€ã€è®¾å¤‡åä¸ RSSI</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_token</span> = watcher.<span class="hljs-title function_ invoke__">Received</span>(&amp;TypedEventHandler::<span class="hljs-title function_ invoke__">new</span>(
        <span class="hljs-keyword">move</span> |_sender: &amp;<span class="hljs-type">Option</span>&lt;BluetoothLEAdvertisementWatcher&gt;, args: &amp;<span class="hljs-type">Option</span>&lt;BluetoothLEAdvertisementReceivedEventArgs&gt;| <span class="hljs-punctuation">-&gt;</span> WinResult&lt;()&gt; {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(args) = args.<span class="hljs-title function_ invoke__">as_ref</span>() {
                <span class="hljs-comment">// è®¾å¤‡åœ°å€ä¸º 64 ä½æ•´å‹ï¼Œè½¬ä¸º 12 ä½åå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆä¸å«åˆ†éš”ç¬¦ï¼‰</span>
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">addr</span> = args.<span class="hljs-title function_ invoke__">BluetoothAddress</span>()?;
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">mac</span> = <span class="hljs-built_in">format!</span>(
                    <span class="hljs-string">"{:02x}{:02x}{:02x}{:02x}{:02x}{:02x}"</span>,
                    (addr &gt;&gt; <span class="hljs-number">40</span>) &amp; <span class="hljs-number">0xff</span>, (addr &gt;&gt; <span class="hljs-number">32</span>) &amp; <span class="hljs-number">0xff</span>, (addr &gt;&gt; <span class="hljs-number">24</span>) &amp; <span class="hljs-number">0xff</span>,
                    (addr &gt;&gt; <span class="hljs-number">16</span>) &amp; <span class="hljs-number">0xff</span>, (addr &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xff</span>, addr &amp; <span class="hljs-number">0xff</span>
                );
                <span class="hljs-comment">// å¹¿å‘ŠåŒ…ä¸­çš„æœ¬åœ°å</span>
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">name</span> = args.<span class="hljs-title function_ invoke__">Advertisement</span>()?.<span class="hljs-title function_ invoke__">LocalName</span>()?.<span class="hljs-title function_ invoke__">to_string</span>();
                <span class="hljs-comment">// ä¿¡å·å¼ºåº¦ï¼ˆå¯èƒ½ä¸å­˜åœ¨ï¼‰</span>
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">rssi</span> = args.<span class="hljs-title function_ invoke__">RawSignalStrengthInDBm</span>()?;

                <span class="hljs-comment">// èšåˆåˆ°å…±äº«è¡¨ï¼šè‹¥å·²æœ‰è®°å½•åˆ™æ›´æ–°æ›´æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼ˆéç©ºåç§°ã€æœ€æ–° RSSIï¼‰</span>
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(<span class="hljs-keyword">mut</span> m) = map_cb.<span class="hljs-title function_ invoke__">try_lock</span>() {
                    m.<span class="hljs-title function_ invoke__">entry</span>(addr)
                        .<span class="hljs-title function_ invoke__">and_modify</span>(|d| { <span class="hljs-keyword">if</span> d.name.<span class="hljs-title function_ invoke__">is_empty</span>() &amp;&amp; !name.<span class="hljs-title function_ invoke__">is_empty</span>() { d.name = name.<span class="hljs-title function_ invoke__">clone</span>(); } d.rssi = <span class="hljs-title function_ invoke__">Some</span>(rssi); })
                        .<span class="hljs-title function_ invoke__">or_insert</span>(BleDevice { mac, name, rssi: <span class="hljs-title function_ invoke__">Some</span>(rssi) });
                }
            }
            <span class="hljs-title function_ invoke__">Ok</span>(())
        }
    )).<span class="hljs-title function_ invoke__">unwrap</span>();

    <span class="hljs-comment">// å¼€å§‹ç›‘å¬æŒ‡å®šæ—¶é—´çª—å£</span>
    watcher.<span class="hljs-title function_ invoke__">Start</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(timeout_ms)).<span class="hljs-keyword">await</span>;
    watcher.<span class="hljs-title function_ invoke__">Stop</span>().<span class="hljs-title function_ invoke__">unwrap</span>();

    <span class="hljs-comment">// æ”¶æ•›ä¸ºåˆ—è¡¨å¹¶æŒ‰ MAC æ’åºï¼Œè¿‡æ»¤ç©ºåç§°</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">locked</span> = map.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-keyword">await</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">list</span>: <span class="hljs-type">Vec</span>&lt;_&gt; = locked.<span class="hljs-title function_ invoke__">values</span>().<span class="hljs-title function_ invoke__">cloned</span>().<span class="hljs-title function_ invoke__">filter</span>(|d| !d.name.<span class="hljs-title function_ invoke__">is_empty</span>()).<span class="hljs-title function_ invoke__">collect</span>();
    list.<span class="hljs-title function_ invoke__">sort_by_key</span>(|d| d.mac.<span class="hljs-title function_ invoke__">clone</span>());
    list
}

<span class="hljs-comment">// æŒ‰ MAC æ–‡æœ¬ç­›é€‰è®¾å¤‡ï¼šæ”¯æŒå»åˆ†éš”ç¬¦ä¸å¤§å°å†™ç»Ÿä¸€ï¼Œå…¼å®¹åå…­/åè¿›åˆ¶</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">filter_device</span>(mac: &amp;<span class="hljs-type">str</span>, list: <span class="hljs-type">Vec</span>&lt;BleDevice&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;BleDevice&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = mac.<span class="hljs-title function_ invoke__">replace</span>(<span class="hljs-string">":"</span>, <span class="hljs-string">""</span>).<span class="hljs-title function_ invoke__">replace</span>(<span class="hljs-string">'-'</span>, <span class="hljs-string">""</span>).<span class="hljs-title function_ invoke__">to_lowercase</span>();
    <span class="hljs-keyword">if</span> s.<span class="hljs-title function_ invoke__">len</span>() != <span class="hljs-number">12</span> || s.<span class="hljs-title function_ invoke__">chars</span>().<span class="hljs-title function_ invoke__">any</span>(|c| !c.<span class="hljs-title function_ invoke__">is_ascii_hexdigit</span>()) {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(addr_hex) = <span class="hljs-type">u64</span>::<span class="hljs-title function_ invoke__">from_str_radix</span>(&amp;s, <span class="hljs-number">16</span>) { s = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"{:012x}"</span>, addr_hex); }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(addr_dec) = s.parse::&lt;<span class="hljs-type">u64</span>&gt;() { s = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"{:012x}"</span>, addr_dec); }
    }
    list.<span class="hljs-title function_ invoke__">into_iter</span>().<span class="hljs-title function_ invoke__">find</span>(|d| d.mac == s)
}
</code></pre>
<h4 data-id="heading-14">2) è¿æ¥ä¸æœåŠ¡å‘ç°ï¼ˆè¯¦æ³¨ç‰ˆï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> windows::Devices::Bluetooth::{BluetoothLEDevice, BluetoothConnectionStatus};
<span class="hljs-keyword">use</span> windows::Devices::Bluetooth::GenericAttributeProfile::{GattCommunicationStatus};

<span class="hljs-comment">// å»ºç«‹åˆ°è®¾å¤‡çš„è¿æ¥ï¼Œå¹¶æ‰“å°æœåŠ¡åˆ—è¡¨ï¼ˆç”¨äºè¯Šæ–­ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">connect_and_list_services</span>(device: &amp;BleDevice) <span class="hljs-punctuation">-&gt;</span> BluetoothLEDevice {
    <span class="hljs-comment">// æ–‡æœ¬ MAC â†’ 64 ä½åœ°å€ï¼ˆåå…­è¿›åˆ¶è§£æï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">addr</span> = <span class="hljs-type">u64</span>::<span class="hljs-title function_ invoke__">from_str_radix</span>(&amp;device.mac.<span class="hljs-title function_ invoke__">replace</span>(<span class="hljs-string">":"</span>, <span class="hljs-string">""</span>).<span class="hljs-title function_ invoke__">to_lowercase</span>(), <span class="hljs-number">16</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-comment">// å¼‚æ­¥è·å–è®¾å¤‡å¯¹è±¡ï¼ˆWinRTï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">dev</span> = BluetoothLEDevice::<span class="hljs-title function_ invoke__">FromBluetoothAddressAsync</span>(addr).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();

    <span class="hljs-comment">// è¿æ¥å°±ç»ªç­‰å¾…ï¼šéƒ¨åˆ†è®¾å¤‡éœ€è¦ä¸€ç‚¹æ—¶é—´è¿›å…¥ Connected çŠ¶æ€</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">10</span> {
        <span class="hljs-keyword">if</span> dev.<span class="hljs-title function_ invoke__">ConnectionStatus</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == BluetoothConnectionStatus::Connected { <span class="hljs-keyword">break</span>; }
        tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">200</span>)).<span class="hljs-keyword">await</span>;
    }

    <span class="hljs-comment">// æšä¸¾ GATT æœåŠ¡å¹¶æ‰“å° UUIDï¼ˆä¾¿äºç¡®è®¤æœåŠ¡æ˜¯å¦åˆ·æ–°ä¸å­˜åœ¨ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">services</span> = dev.<span class="hljs-title function_ invoke__">GetGattServicesAsync</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> services.<span class="hljs-title function_ invoke__">Status</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == GattCommunicationStatus::Success {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">list</span> = services.<span class="hljs-title function_ invoke__">Services</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        <span class="hljs-keyword">for</span> <span class="hljs-variable">s</span> <span class="hljs-keyword">in</span> list.<span class="hljs-title function_ invoke__">into_iter</span>() { <span class="hljs-built_in">println!</span>(<span class="hljs-string">"service uuid {:?}"</span>, s.<span class="hljs-title function_ invoke__">Uuid</span>().<span class="hljs-title function_ invoke__">unwrap</span>()); }
    }
    dev
}
</code></pre>
<h4 data-id="heading-15">3) ç‰¹å¾é€‰æ‹©ï¼ˆè¯¦æ³¨ç‰ˆï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> windows::Devices::Bluetooth::GenericAttributeProfile::{
    GattDeviceService, GattCharacteristic, GattCharacteristicProperties, GattCommunicationStatus,
};

<span class="hljs-comment">// é€‰æ‹©é€šçŸ¥ç‰¹å¾ï¼šå…ˆ GUID è¿‡æ»¤ + æŒ‰å±æ€§æ£€æŸ¥ï¼›å¤±è´¥æšä¸¾å…¨éƒ¨å›é€€</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">select_notify</span>(service: &amp;GattDeviceService, guid: windows::core::GUID) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;GattCharacteristic&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">res</span> = service.<span class="hljs-title function_ invoke__">GetCharacteristicsForUuidAsync</span>(guid).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> res.<span class="hljs-title function_ invoke__">Status</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == GattCommunicationStatus::Success {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">list</span> = res.<span class="hljs-title function_ invoke__">Characteristics</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        <span class="hljs-keyword">for</span> <span class="hljs-variable">c</span> <span class="hljs-keyword">in</span> list.<span class="hljs-title function_ invoke__">into_iter</span>() {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">props</span> = c.<span class="hljs-title function_ invoke__">CharacteristicProperties</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">ok</span> = (props.<span class="hljs-number">0</span> &amp; GattCharacteristicProperties::Notify.<span class="hljs-number">0</span>) != <span class="hljs-number">0</span> || (props.<span class="hljs-number">0</span> &amp; GattCharacteristicProperties::Indicate.<span class="hljs-number">0</span>) != <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> ok { <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Some</span>(c); }
        }
    }
    <span class="hljs-comment">// æšä¸¾å›é€€ï¼šæŸäº›è®¾å¤‡åœ¨åˆ·æ–°æœŸé—´ GUID è¿‡æ»¤å¯èƒ½è¿”å›ç©º</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">all</span> = service.<span class="hljs-title function_ invoke__">GetCharacteristicsAsync</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">Characteristics</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">for</span> <span class="hljs-variable">c</span> <span class="hljs-keyword">in</span> all.<span class="hljs-title function_ invoke__">into_iter</span>() { <span class="hljs-keyword">if</span> c.<span class="hljs-title function_ invoke__">Uuid</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == guid { <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Some</span>(c); } }
    <span class="hljs-literal">None</span>
}

<span class="hljs-comment">// é€‰æ‹©å†™ç‰¹å¾ï¼šåŒç†ï¼Œéœ€å…·å¤‡ Write æˆ– WriteWithoutResponse å±æ€§</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">select_write</span>(service: &amp;GattDeviceService, guid: windows::core::GUID) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;GattCharacteristic&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">res</span> = service.<span class="hljs-title function_ invoke__">GetCharacteristicsForUuidAsync</span>(guid).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> res.<span class="hljs-title function_ invoke__">Status</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == GattCommunicationStatus::Success {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">list</span> = res.<span class="hljs-title function_ invoke__">Characteristics</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        <span class="hljs-keyword">for</span> <span class="hljs-variable">c</span> <span class="hljs-keyword">in</span> list.<span class="hljs-title function_ invoke__">into_iter</span>() {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">p</span> = c.<span class="hljs-title function_ invoke__">CharacteristicProperties</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">ok</span> = (p.<span class="hljs-number">0</span> &amp; GattCharacteristicProperties::Write.<span class="hljs-number">0</span>) != <span class="hljs-number">0</span> || (p.<span class="hljs-number">0</span> &amp; GattCharacteristicProperties::WriteWithoutResponse.<span class="hljs-number">0</span>) != <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> ok { <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Some</span>(c); }
        }
    }
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">all</span> = service.<span class="hljs-title function_ invoke__">GetCharacteristicsAsync</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">Characteristics</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">for</span> <span class="hljs-variable">c</span> <span class="hljs-keyword">in</span> all.<span class="hljs-title function_ invoke__">into_iter</span>() { <span class="hljs-keyword">if</span> c.<span class="hljs-title function_ invoke__">Uuid</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == guid { <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Some</span>(c); } }
    <span class="hljs-literal">None</span>
}
</code></pre>
<h4 data-id="heading-16">4) å¯ç”¨é€šçŸ¥ä¸æ³¨å†Œå›è°ƒï¼ˆè¯¦æ³¨ç‰ˆï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> windows::Devices::Bluetooth::GenericAttributeProfile::{
    GattCharacteristic, GattClientCharacteristicConfigurationDescriptorValue, GattCommunicationStatus,
};
<span class="hljs-keyword">use</span> windows::Devices::Bluetooth::GenericAttributeProfile::{GattValueChangedEventArgs};
<span class="hljs-keyword">use</span> windows::Storage::Streams::DataReader;
<span class="hljs-keyword">use</span> windows::Foundation::TypedEventHandler;

<span class="hljs-comment">// å¯ç”¨é€šçŸ¥ï¼šä¼˜å…ˆ Notifyï¼Œå¤±è´¥å›é€€ Indicateï¼›åŠ å…¥é¢„å»¶æ—¶ä¸é‡è¯•ä»¥è·¨è¿‡è®¾å¤‡åˆ·æ–°çª—å£</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">enable_notify_with_retry</span>(ch: &amp;GattCharacteristic) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> {
    <span class="hljs-comment">// é¢„å»¶æ—¶ï¼šé¿å…ç«‹å³å†™ CCCD å‘½ä¸­è®¾å¤‡å¿™æˆ–æ ˆåˆ·æ–°</span>
    tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">1000</span>)).<span class="hljs-keyword">await</span>;
    <span class="hljs-comment">// å°è¯• Notify å¤šæ¬¡</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">3</span> {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(op) = ch.<span class="hljs-title function_ invoke__">WriteClientCharacteristicConfigurationDescriptorAsync</span>(GattClientCharacteristicConfigurationDescriptorValue::Notify) {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(status) = op.<span class="hljs-keyword">await</span> { <span class="hljs-keyword">if</span> status == GattCommunicationStatus::Success { <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; } }
        }
        tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">500</span>)).<span class="hljs-keyword">await</span>;
    }
    <span class="hljs-comment">// å›é€€ Indicate</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">2</span> {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(op) = ch.<span class="hljs-title function_ invoke__">WriteClientCharacteristicConfigurationDescriptorAsync</span>(GattClientCharacteristicConfigurationDescriptorValue::Indicate) {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(status) = op.<span class="hljs-keyword">await</span> { <span class="hljs-keyword">if</span> status == GattCommunicationStatus::Success { <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; } }
        }
        tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">500</span>)).<span class="hljs-keyword">await</span>;
    }
    <span class="hljs-literal">false</span>
}

<span class="hljs-comment">// æ³¨å†Œé€šçŸ¥å›è°ƒï¼šå°† IBuffer è½¬ä¸º Vec&lt;u8&gt; å¹¶äº¤ç»™è°ƒç”¨è€…å¤„ç†</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">register_value_changed</span>(ch: &amp;GattCharacteristic, <span class="hljs-keyword">mut</span> on_notify: <span class="hljs-keyword">impl</span> <span class="hljs-title class_">FnMut</span>(<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt;) + <span class="hljs-built_in">Send</span> + <span class="hljs-symbol">'static</span>) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">handler</span> = TypedEventHandler::&lt;GattCharacteristic, GattValueChangedEventArgs&gt;::<span class="hljs-title function_ invoke__">new</span>(
        <span class="hljs-keyword">move</span> |_sender: &amp;<span class="hljs-type">Option</span>&lt;GattCharacteristic&gt;, args: &amp;<span class="hljs-type">Option</span>&lt;GattValueChangedEventArgs&gt;| {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(args) = args.<span class="hljs-title function_ invoke__">as_ref</span>() {
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(buf) = args.<span class="hljs-title function_ invoke__">CharacteristicValue</span>() {
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(reader) = DataReader::<span class="hljs-title function_ invoke__">FromBuffer</span>(&amp;buf) {
                        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(len) = buf.<span class="hljs-title function_ invoke__">Length</span>() {
                            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">data</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0u8</span>; len <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>];
                            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = reader.<span class="hljs-title function_ invoke__">ReadBytes</span>(&amp;<span class="hljs-keyword">mut</span> data);
                            <span class="hljs-title function_ invoke__">on_notify</span>(data);
                        }
                    }
                }
            }
            <span class="hljs-title function_ invoke__">Ok</span>(())
        }
    );
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = ch.<span class="hljs-title function_ invoke__">ValueChanged</span>(&amp;handler);
}
</code></pre>
<h4 data-id="heading-17">5) å†™å…¥ï¼ˆè¯¦æ³¨ç‰ˆï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> windows::Devices::Bluetooth::GenericAttributeProfile::{GattCharacteristic, GattCommunicationStatus};
<span class="hljs-keyword">use</span> windows::Storage::Streams::{InMemoryRandomAccessStream, DataWriter};

<span class="hljs-comment">// å†™å…¥å°è£…ï¼šä¼˜å…ˆå¸¦å“åº”å†™å…¥ï¼ˆä¾¿äºè·å–åè®®é”™è¯¯ï¼‰ï¼Œå¤±è´¥å›é€€æ— å“åº”</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">write_with_result_and_fallback</span>(ch: &amp;GattCharacteristic, data: &amp;[<span class="hljs-type">u8</span>]) <span class="hljs-punctuation">-&gt;</span> GattCommunicationStatus {
    <span class="hljs-comment">// WinRT å†™å…¥ API éœ€è¦ IBufferï¼›è¿™é‡Œé€šè¿‡å†…å­˜æµ + DataWriter æ„é€ ç¼“å†²åŒº</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">stream</span> = InMemoryRandomAccessStream::<span class="hljs-title function_ invoke__">new</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">out</span> = stream.<span class="hljs-title function_ invoke__">GetOutputStreamAt</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">writer</span> = DataWriter::<span class="hljs-title function_ invoke__">CreateDataWriter</span>(&amp;out).<span class="hljs-title function_ invoke__">unwrap</span>();
    writer.<span class="hljs-title function_ invoke__">WriteBytes</span>(data).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">buf</span> = writer.<span class="hljs-title function_ invoke__">DetachBuffer</span>().<span class="hljs-title function_ invoke__">unwrap</span>();

    <span class="hljs-comment">// å¸¦å“åº”å†™å…¥ï¼šå¯è¯»å–çŠ¶æ€ä¸åè®®é”™è¯¯ç ï¼ˆATTï¼‰ï¼Œä¾¿äºå®šä½æƒé™æˆ–é•¿åº¦é—®é¢˜</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">res</span> = ch.<span class="hljs-title function_ invoke__">WriteValueWithResultAsync</span>(&amp;buf).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">status</span> = res.<span class="hljs-title function_ invoke__">Status</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> status != GattCommunicationStatus::Success {
        <span class="hljs-comment">// å›é€€ä¸ºæ— å“åº”å†™ï¼šéƒ¨åˆ†è®¾å¤‡ä»…å…è®¸æ— å“åº”å†™</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">fb</span> = ch.<span class="hljs-title function_ invoke__">WriteValueAsync</span>(&amp;buf).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
        <span class="hljs-keyword">return</span> fb;
    }
    status
}
</code></pre>
<h4 data-id="heading-18">6) æ–­å¼€ä¸æ¸…ç†ï¼ˆè¯¦æ³¨ç‰ˆï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> windows::Devices::Bluetooth::BluetoothLEDevice;
<span class="hljs-keyword">use</span> windows::Devices::Bluetooth::GenericAttributeProfile::{GattCharacteristic, GattClientCharacteristicConfigurationDescriptorValue};

<span class="hljs-comment">// æ–­å¼€é¡ºåºï¼šRemoveValueChanged â†’ CCCD=None â†’ MaintainConnection(false) â†’ Close</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">disconnect_cleanup</span>(dev: &amp;BluetoothLEDevice, notify_char: &amp;GattCharacteristic, token: windows::Foundation::EventRegistrationToken) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = notify_char.<span class="hljs-title function_ invoke__">RemoveValueChanged</span>(token);
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(op) = notify_char.<span class="hljs-title function_ invoke__">WriteClientCharacteristicConfigurationDescriptorAsync</span>(GattClientCharacteristicConfigurationDescriptorValue::<span class="hljs-literal">None</span>) { <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = op.<span class="hljs-keyword">await</span>; }
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(svc) = notify_char.<span class="hljs-title function_ invoke__">Service</span>() { <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(sess) = svc.<span class="hljs-title function_ invoke__">Session</span>() { <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = sess.<span class="hljs-title function_ invoke__">SetMaintainConnection</span>(<span class="hljs-literal">false</span>); } }
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = dev.<span class="hljs-title function_ invoke__">Close</span>();
}
</code></pre>
<h4 data-id="heading-19">7) å·²é…å¯¹è®¾å¤‡é‡å¯çš„æ¸…ç†ï¼ˆè¯¦æ³¨ç‰ˆï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> windows::Devices::Bluetooth::BluetoothLEDevice;

<span class="hljs-comment">// åœ¨å·²é…å¯¹ä¸”ç³»ç»ŸæŒæœ‰æ—§è¿æ¥çš„æƒ…å†µä¸‹ï¼šå…ˆ Unpair + Close å†è¿æ¥ï¼Œé™ä½ç¼“å­˜ä¸ä¸€è‡´å¯¼è‡´çš„å¤±è´¥</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">unpair_and_close</span>(address: <span class="hljs-type">u64</span>) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">dev</span> = BluetoothLEDevice::<span class="hljs-title function_ invoke__">FromBluetoothAddressAsync</span>(address).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(di) = dev.<span class="hljs-title function_ invoke__">DeviceInformation</span>() {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(pairing) = di.<span class="hljs-title function_ invoke__">Pairing</span>() {
            <span class="hljs-keyword">if</span> pairing.<span class="hljs-title function_ invoke__">IsPaired</span>().<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class="hljs-literal">false</span>) {
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = pairing.<span class="hljs-title function_ invoke__">UnpairAsync</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>; <span class="hljs-comment">// è§£é™¤é…å¯¹ï¼Œé‡Šæ”¾æ—§æƒé™ä¸å¯†é’¥</span>
            }
        }
    }
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = dev.<span class="hljs-title function_ invoke__">Close</span>(); <span class="hljs-comment">// å…³é—­æ—§è®¾å¤‡å¥æŸ„</span>
    tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">800</span>)).<span class="hljs-keyword">await</span>; <span class="hljs-comment">// ç­‰å¾…æ ˆåˆ·æ–°</span>
}
</code></pre>
<h4 data-id="heading-20">8) ç»„åˆæµç¨‹ï¼ˆè¯¦æ³¨ç‰ˆï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// 1) æ‰«æå¹¶é€‰æ‹©ç›®æ ‡è®¾å¤‡</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">list</span> = <span class="hljs-title function_ invoke__">scan_devices</span>(<span class="hljs-number">5000</span>).<span class="hljs-keyword">await</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">dev</span> = <span class="hljs-title function_ invoke__">filter_device</span>(<span class="hljs-string">"208B37997529"</span>, list).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"device not found"</span>);

    <span class="hljs-comment">// 2) å·²é…å¯¹åœºæ™¯å»ºè®®å…ˆæ¸…ç†æ—§çŠ¶æ€ï¼ˆUnpair + Close + å»¶æ—¶ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">addr</span> = <span class="hljs-type">u64</span>::<span class="hljs-title function_ invoke__">from_str_radix</span>(&amp;dev.mac, <span class="hljs-number">16</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-title function_ invoke__">unpair_and_close</span>(addr).<span class="hljs-keyword">await</span>;

    <span class="hljs-comment">// 3) è¿æ¥å¹¶è¾“å‡ºæœåŠ¡åˆ—è¡¨ï¼ˆè¯Šæ–­ç”¨é€”ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">device</span> = <span class="hljs-title function_ invoke__">connect_and_list_services</span>(&amp;dev).<span class="hljs-keyword">await</span>;

    <span class="hljs-comment">// 4) è·å–ç›®æ ‡æœåŠ¡ï¼ˆæŒ‰ GUID åŒ¹é…ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">service</span> = {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">guid</span> = <span class="hljs-title function_ invoke__">guid_from_str</span>(<span class="hljs-string">"01000100-0000-1000-8000-009078563412"</span>);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">list</span> = device.<span class="hljs-title function_ invoke__">GetGattServicesAsync</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">Services</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        list.<span class="hljs-title function_ invoke__">into_iter</span>().<span class="hljs-title function_ invoke__">find</span>(|s| s.<span class="hljs-title function_ invoke__">Uuid</span>().<span class="hljs-title function_ invoke__">unwrap</span>() == guid).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"service not found"</span>)
    };

    <span class="hljs-comment">// 5) ç‰¹å¾é€‰æ‹©å‰çŸ­æš‚ç­‰å¾…ï¼Œéšåé€‰æ‹©é€šçŸ¥ä¸å†™ç‰¹å¾</span>
    tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">800</span>)).<span class="hljs-keyword">await</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">notify</span> = <span class="hljs-title function_ invoke__">select_notify</span>(&amp;service, <span class="hljs-title function_ invoke__">guid_from_str</span>(<span class="hljs-string">"02000200-0000-1000-8000-009178563412"</span>)).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"notify not found"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">writec</span> = <span class="hljs-title function_ invoke__">select_write</span>(&amp;service, <span class="hljs-title function_ invoke__">guid_from_str</span>(<span class="hljs-string">"03000300-0000-1000-8000-009278563412"</span>)).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"write not found"</span>);

    <span class="hljs-comment">// 6) è‹¥è®¾å¤‡è¦æ±‚åŠ å¯†ï¼Œè®¾ç½®ä¿æŠ¤çº§åˆ«ä¸ºåŠ å¯†</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = notify.<span class="hljs-title function_ invoke__">SetProtectionLevel</span>(windows::Devices::Bluetooth::GenericAttributeProfile::GattProtectionLevel::EncryptionRequired);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = writec.<span class="hljs-title function_ invoke__">SetProtectionLevel</span>(windows::Devices::Bluetooth::GenericAttributeProfile::GattProtectionLevel::EncryptionRequired);

    <span class="hljs-comment">// 7) å¯ç”¨é€šçŸ¥ï¼ˆå¸¦é‡è¯•/å›é€€ï¼‰ï¼Œå¹¶æ³¨å†Œé€šçŸ¥å›è°ƒ</span>
    <span class="hljs-keyword">if</span> !<span class="hljs-title function_ invoke__">enable_notify_with_retry</span>(&amp;notify).<span class="hljs-keyword">await</span> { <span class="hljs-built_in">panic!</span>(<span class="hljs-string">"enable notify failed"</span>); }
    <span class="hljs-title function_ invoke__">register_value_changed</span>(&amp;notify, |data| { <span class="hljs-built_in">println!</span>(<span class="hljs-string">"notify: {} bytes"</span>, data.<span class="hljs-title function_ invoke__">len</span>()); });

    <span class="hljs-comment">// 8) å†™å…¥ç¤ºä¾‹è´Ÿè½½ï¼ˆå¸¦å“åº”ä¼˜å…ˆï¼Œå¤±è´¥å›é€€ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">payload</span> = <span class="hljs-string">b"example payload"</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">status</span> = <span class="hljs-title function_ invoke__">write_with_result_and_fallback</span>(&amp;writec, payload).<span class="hljs-keyword">await</span>;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"write status: {:?}"</span>, status);

    <span class="hljs-comment">// 9) æ–­å¼€ä¸æ¸…ç†ï¼ˆçœŸå®é¡¹ç›®ä¸­ä¿å­˜å¹¶ä¼ å…¥ ValueChanged çš„ tokenï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">dummy_token</span> = windows::Foundation::EventRegistrationToken { value: <span class="hljs-number">0</span> };
    <span class="hljs-title function_ invoke__">disconnect_cleanup</span>(&amp;device, &amp;notify, dummy_token).<span class="hljs-keyword">await</span>;
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter å›¾çº¸æ ‡æ³¨åŠŸèƒ½çš„å®ç°ï¼šè¸©å‘ä¸æ¶æ„è®¾è®¡]]></title>    <link>https://juejin.cn/post/7577284968922873856</link>    <guid>https://juejin.cn/post/7577284968922873856</guid>    <pubDate>2025-11-28T03:20:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577284968922873856" data-draft-id="7577284968922693632" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter å›¾çº¸æ ‡æ³¨åŠŸèƒ½çš„å®ç°ï¼šè¸©å‘ä¸æ¶æ„è®¾è®¡"/> <meta itemprop="keywords" content="iOS,Android"/> <meta itemprop="datePublished" content="2025-11-28T03:20:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜å›87997"/> <meta itemprop="url" content="https://juejin.cn/user/413072103838462"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter å›¾çº¸æ ‡æ³¨åŠŸèƒ½çš„å®ç°ï¼šè¸©å‘ä¸æ¶æ„è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/413072103838462/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜å›87997
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:20:10.000Z" title="Fri Nov 28 2025 03:20:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å†™åœ¨å‰é¢</h2>
<p>æœ€è¿‘åœ¨åšä¸€ä¸ªå·¥ç¨‹éªŒæ”¶çš„é¡¹ç›®ï¼Œæœ‰ä¸ªéœ€æ±‚æ˜¯è¦åœ¨ CAD å›¾çº¸ä¸Šæ ‡æ³¨é—®é¢˜ç‚¹ã€‚ä¸€å¼€å§‹è§‰å¾—æŒºç®€å•ï¼Œä¸å°±æ˜¯æ˜¾ç¤ºä¸ªå›¾ç‰‡ï¼Œç‚¹ä¸€ä¸‹åŠ ä¸ª Marker å—ï¼ŸçœŸåŠ¨æ‰‹åšäº†æ‰å‘ç°ï¼Œè¿™é‡Œé¢çš„å‘å¤šåˆ°æ€€ç–‘äººç”Ÿã€‚</p>
<p>æ¯”å¦‚è¯´ï¼š</p>
<ul>
<li>å·¥åœ°ç°åœºç½‘ç»œå·®åˆ°çˆ†ï¼Œå¿…é¡»å®Œå…¨ç¦»çº¿</li>
<li>å›¾çº¸åŠ¨è¾„å‡ åƒåƒç´ ï¼ŒåŠ è½½å’Œäº¤äº’éƒ½å¡</li>
<li>ä¸šåŠ¡é€»è¾‘ä¸€å †ï¼Œæ‹…å¿ƒåé¢æ²¡æ³•ç»´æŠ¤</li>
<li>å„ç§åæ ‡ç³»è½¬æ¥è½¬å»ï¼Œè„‘å£³ç–¼</li>
</ul>
<p>æŠ˜è…¾äº†ä¸¤å‘¨ï¼Œç»ˆäºæŠŠè¿™ä¸ªä¸œè¥¿æå®šäº†ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­è¸©äº†ä¸å°‘å‘ï¼Œä¹Ÿç§¯ç´¯äº†ä¸€äº›ç»éªŒï¼Œæ‰€ä»¥å†™ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹ï¼Œé¡ºä¾¿åˆ†äº«ç»™æœ‰ç±»ä¼¼éœ€æ±‚çš„æœ‹å‹ã€‚</p>
<h2 data-id="heading-1">æ•´ä½“æ€è·¯</h2>
<p>æè¿™ä¸ªä¸œè¥¿ä¹‹å‰ï¼Œæˆ‘å…ˆç†äº†ç†éœ€æ±‚ï¼Œå‘ç°æ ¸å¿ƒå°±æ˜¯ï¼š<strong>åœ¨ä¸€å¼ ç¦»çº¿å›¾çº¸ä¸Šï¼Œæ”¯æŒç”¨æˆ·ç‚¹å‡»æ ‡æ³¨ï¼Œè¿˜å¾—æ”¯æŒåŒºåŸŸé™åˆ¶ï¼ˆä¸èƒ½ä¹±ç‚¹ï¼‰</strong>ã€‚</p>
<p>å¬èµ·æ¥ç®€å•ï¼Œä½†è¦åšå¥½ï¼Œå¿…é¡»è§£å†³å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>**æ€ä¹ˆè®©ä»£ç ä¸å’Œä¸šåŠ¡ç»‘æ­»ï¼Ÿ**æ¯•ç«Ÿè¿™ä¸ªåŠŸèƒ½ä¸æ­¢ä¸€ä¸ªåœ°æ–¹ç”¨</li>
<li>**æ€ä¹ˆç®¡ç†çŠ¶æ€ï¼Ÿ**æ ‡è®°ç‚¹ã€å¤šè¾¹å½¢ã€å›¾çº¸è¿™äº›ä¸œè¥¿çŠ¶æ€ç®¡ç†ä¸€å›¢ä¹±</li>
<li>**æ€ä¹ˆä¿è¯æ€§èƒ½ï¼Ÿ**å¤§å›¾åŠ è½½ã€é«˜é¢‘äº¤äº’éƒ½å¾—ä¼˜åŒ–</li>
</ol>
<p>æƒ³æ¥æƒ³å»ï¼Œå†³å®šæŒ‰è¿™ä¸ªæ€è·¯æ¥ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">CustomMapWidget (è§†å›¾ç»„ä»¶)
     â†“
CustomMapController (æ§åˆ¶å™¨ï¼Œå¤„ç†é€»è¾‘)
     â†“
CustomMapState (çŠ¶æ€ç®¡ç†ï¼Œå“åº”å¼æ›´æ–°)
     â†“
MapDataSource (æŠ½è±¡æ¥å£ï¼Œä¸šåŠ¡è‡ªå·±å®ç°)
</code></pre>
<p>ç®€å•è¯´å°±æ˜¯ï¼š<strong>è§†å›¾è´Ÿè´£å±•ç¤ºï¼Œæ§åˆ¶å™¨è´Ÿè´£åè°ƒï¼ŒçŠ¶æ€è´Ÿè´£å“åº”å¼æ›´æ–°ï¼Œä¸šåŠ¡é€»è¾‘é€šè¿‡æ¥å£æ³¨å…¥</strong>ã€‚</p>
<p>è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œæ ¸å¿ƒæ¡†æ¶å’Œå…·ä½“ä¸šåŠ¡å®Œå…¨è§£è€¦ï¼Œæ¢ä¸ªåœºæ™¯åªéœ€è¦å®ç°ä¸åŒçš„ DataSource å°±è¡Œã€‚</p>
<h3 data-id="heading-2">å…³é”®è®¾è®¡ï¼šä¸šåŠ¡æŠ½è±¡å±‚</h3>
<p>è¿™ä¸ªæ˜¯æ•´ä¸ªæ¶æ„çš„æ ¸å¿ƒã€‚æˆ‘å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡æ¥å£ <code>MapDataSource</code>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapDataSource</span> </span>{
  <span class="hljs-comment">// åŠ è½½å›¾çº¸ï¼ˆå¯èƒ½ä»æœ¬åœ°ã€å¯èƒ½ä»æœåŠ¡å™¨ï¼‰</span>
  Future&lt;MapSourceConfig&gt; loadMapDrawingResource(CrsSimple crs);
  
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ ‡è®°ç‚¹ï¼ˆä¸šåŠ¡è‡ªå·±å†³å®šæ ·å¼ï¼‰</span>
  Marker addMarker(LatLng point, {<span class="hljs-built_in">String?</span> number});
  
  <span class="hljs-comment">// æ‰¹é‡åŠ è½½å·²æœ‰çš„æ ‡è®°ç‚¹</span>
  <span class="hljs-built_in">List</span>&lt;Marker&gt; loadMarkers(<span class="hljs-built_in">List</span>&lt;Point&lt;<span class="hljs-built_in">double</span>&gt;&gt;? latLngList, CrsSimple crs);
  
  <span class="hljs-comment">// åŠ è½½å¤šè¾¹å½¢ï¼ˆæ¯”å¦‚æˆ¿é—´è½®å»“ã€é™åˆ¶åŒºåŸŸç­‰ï¼‰</span>
  <span class="hljs-built_in">dynamic</span> loadPolygons(CrsSimple crs);
}
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ï¼Ÿå› ä¸º<strong>æ¯ä¸ªä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚éƒ½ä¸ä¸€æ ·</strong>ï¼š</p>
<ul>
<li>éªŒæ”¶ç³»ç»Ÿå¯èƒ½éœ€è¦çº¢è‰²å›¾é’‰æ ‡è®°é—®é¢˜ç‚¹</li>
<li>æµ‹é‡ç³»ç»Ÿå¯èƒ½éœ€è¦æ•°å­—æ ‡è®°æµ‹é‡ç‚¹</li>
<li>å·¡æ£€ç³»ç»Ÿå¯èƒ½éœ€è¦è®¾å¤‡å›¾æ ‡</li>
</ul>
<p>æŠŠè¿™äº›å·®å¼‚æŠ½è±¡å‡ºæ¥ï¼Œè®©ä¸šåŠ¡å±‚è‡ªå·±å®ç°ï¼Œæ ¸å¿ƒæ¡†æ¶å°±ä¸ç”¨æ”¹äº†ã€‚</p>
<h2 data-id="heading-3">å…·ä½“å®ç°</h2>
<h3 data-id="heading-4">ä¸€ã€çŠ¶æ€ç®¡ç†æ€ä¹ˆæ</h3>
<p>ä¸€å¼€å§‹ç”¨ Provider å†™çš„ï¼Œåæ¥å‘ç°çŠ¶æ€æ›´æ–°å¤ªé¢‘ç¹ï¼Œæ€§èƒ½ä¸è¡Œã€‚æ”¹æˆ GetX ä¹‹åä¸æ»‘å¤šäº†ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomMapState</span> </span>{
  <span class="hljs-comment">// Flutter Map çš„æ§åˆ¶å™¨ï¼Œç”¨æ¥æ§åˆ¶ç¼©æ”¾ã€ç§»åŠ¨ç­‰</span>
  MapController mapController = MapController();
  
  <span class="hljs-comment">// åæ ‡ç³»ç»Ÿï¼ˆè¿™ä¸ªæ˜¯å…³é”®ï¼Œåé¢ä¼šè®²ä¸ºä»€ä¹ˆç”¨ CrsSimpleï¼‰</span>
  <span class="hljs-keyword">final</span> CrsSimple crs = <span class="hljs-keyword">const</span> CrsSimple();
  
  <span class="hljs-comment">// é…ç½®ä¿¡æ¯ï¼ˆå“åº”å¼çš„ï¼Œæ–¹ä¾¿åŠ¨æ€ä¿®æ”¹ï¼‰</span>
  <span class="hljs-keyword">final</span> Rx&lt;MapDrawingConfig&gt; config = MapDrawingConfig().obs;
  
  <span class="hljs-comment">// å½“å‰ä½¿ç”¨çš„å›¾çº¸</span>
  <span class="hljs-keyword">final</span> Rx&lt;MapSourceConfig?&gt; currentMapSource = Rx&lt;MapSourceConfig?&gt;(<span class="hljs-keyword">null</span>);
  
  <span class="hljs-comment">// åœ°å›¾è¾¹ç•Œï¼ˆç”¨æ¥åšè‡ªé€‚åº”æ˜¾ç¤ºï¼‰</span>
  LatLngBounds? mapBounds;
  
  <span class="hljs-comment">// æ ‡è®°ç‚¹åˆ—è¡¨ï¼ˆRxå¼€å¤´çš„éƒ½æ˜¯å“åº”å¼çš„ï¼Œæ”¹äº†è‡ªåŠ¨åˆ·æ–°UIï¼‰</span>
  <span class="hljs-keyword">final</span> RxList&lt;Marker&gt; markers = &lt;Marker&gt;[].obs;
  
  <span class="hljs-comment">// å¤šè¾¹å½¢åˆ—è¡¨ï¼ˆæ¯”å¦‚æˆ¿é—´è½®å»“ï¼‰</span>
  <span class="hljs-keyword">final</span> RxList&lt;Polygon&gt; polygons = &lt;Polygon&gt;[].obs;
  
  <span class="hljs-comment">// å½“å‰æ­£åœ¨ç»˜åˆ¶çš„ç‚¹</span>
  <span class="hljs-keyword">final</span> RxList&lt;LatLng&gt; currentDrawingPoints = &lt;LatLng&gt;[].obs;
  
  <span class="hljs-comment">// æœ‰æ•ˆåŒºåŸŸï¼ˆç”¨æˆ·åªèƒ½åœ¨è¿™ä¸ªèŒƒå›´å†…æ ‡æ³¨ï¼‰</span>
  <span class="hljs-built_in">List</span>&lt;LatLng&gt; houseLatLngList = [];
}
</code></pre>
<p>è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ul>
<li><strong>Rx ç³»åˆ—</strong>ï¼šGetX çš„å“åº”å¼ç±»å‹ï¼ŒçŠ¶æ€æ”¹äº†UIè‡ªåŠ¨æ›´æ–°ï¼Œä¸ç”¨æ‰‹åŠ¨ setState</li>
<li><strong>CrsSimple</strong>ï¼šç®€å•ç¬›å¡å°”åæ ‡ç³»ï¼Œå› ä¸ºå›¾çº¸ç”¨çš„æ˜¯åƒç´ åæ ‡ï¼Œä¸æ˜¯çœŸçš„ç»çº¬åº¦</li>
<li><strong>å¤šå›¾å±‚åˆ†ç¦»</strong>ï¼šæ ‡è®°ç‚¹ã€å¤šè¾¹å½¢ã€ç»˜åˆ¶ç‚¹åˆ†å¼€ç®¡ç†ï¼Œäº’ä¸å½±å“</li>
</ul>
<h3 data-id="heading-5">äºŒã€æ§åˆ¶å™¨çš„æ ¸å¿ƒé€»è¾‘</h3>
<p>æ§åˆ¶å™¨ä¸»è¦è´Ÿè´£åè°ƒå„ä¸ªéƒ¨åˆ†ï¼Œå¤„ç†ç”¨æˆ·äº¤äº’ã€‚</p>
<p><strong>åˆå§‹åŒ–æµç¨‹</strong></p>
<pre><code class="hljs language-dart" lang="dart">_initData() <span class="hljs-keyword">async</span> {
  state.config.value = config;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// è°ƒç”¨ä¸šåŠ¡å±‚åŠ è½½å›¾çº¸</span>
    <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> dataSource.loadMapDrawingResource(state.crs);
    state.currentMapSource.value = result;
    state.mapBounds = result.defaultSource.bounds;
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-comment">// è¿™é‡Œå¯èƒ½å¤±è´¥ï¼Œæ¯”å¦‚æ–‡ä»¶ä¸å­˜åœ¨ã€ç½‘ç»œé—®é¢˜ç­‰</span>
    logDebug(<span class="hljs-string">'åŠ è½½å›¾çº¸å¤±è´¥: <span class="hljs-subst">$e</span>'</span>);
  } <span class="hljs-keyword">finally</span> {
    onMapReady(); <span class="hljs-comment">// ä¸ç®¡æˆåŠŸå¤±è´¥éƒ½è¦èµ°åç»­æµç¨‹</span>
  }
}
</code></pre>
<p><strong>åœ°å›¾æ¸²æŸ“å®Œæˆçš„å›è°ƒ</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> onMapReady() {
  <span class="hljs-keyword">if</span> (state.isMapReady) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// é˜²æ­¢é‡å¤è°ƒç”¨ï¼ˆä¹‹å‰é‡åˆ°è¿‡bugï¼Œè¿™é‡ŒåŠ ä¸ªä¿é™©ï¼‰</span>
  
  state.isMapReady = <span class="hljs-keyword">true</span>;
  
  <span class="hljs-comment">// åŠ è½½å¤šè¾¹å½¢ï¼ˆæ¯”å¦‚æˆ¿é—´è½®å»“ã€é™åˆ¶åŒºåŸŸç­‰ï¼‰</span>
  <span class="hljs-keyword">var</span> parameter = dataSource.loadPolygons(state.crs);
  <span class="hljs-keyword">if</span> (parameter[<span class="hljs-string">'polygonList'</span>] != <span class="hljs-keyword">null</span>) {
    state.polygons.value = parameter[<span class="hljs-string">'polygonList'</span>];
  }
  
  <span class="hljs-comment">// å¦‚æœæœ‰å†å²æ ‡è®°ç‚¹ï¼Œä¹Ÿä¸€èµ·åŠ è½½è¿›æ¥</span>
  <span class="hljs-keyword">if</span> (config.latLngList.isNotEmpty) {
    state.markers.value = dataSource.loadMarkers(config.latLngList, state.crs);
  }
  
  <span class="hljs-comment">// è‡ªé€‚åº”æ˜¾ç¤ºæ•´ä¸ªå›¾çº¸ï¼ˆä¸ç„¶å¯èƒ½åªçœ‹åˆ°ä¸€ä¸ªè§’ï¼‰</span>
  <span class="hljs-keyword">if</span> (state.mapBounds != <span class="hljs-keyword">null</span>) {
    state.mapController.fitCamera(
      CameraFit.bounds(bounds: state.mapBounds)
    );
  }
}
</code></pre>
<p><strong>ç‚¹å‡»äº‹ä»¶å¤„ç†ï¼ˆé‡ç‚¹ï¼‰</strong></p>
<p>è¿™æ˜¯æœ€æ ¸å¿ƒçš„é€»è¾‘ï¼Œå¤„ç†ç”¨æˆ·åœ¨å›¾çº¸ä¸Šçš„ç‚¹å‡»ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> addDrawingPoint(TapPosition tapPosition, LatLng latlng) {
  <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šåæ ‡è½¬æ¢ï¼ˆä»åœ°å›¾åæ ‡è½¬æˆåƒç´ åæ ‡ï¼‰</span>
  <span class="hljs-comment">// ä¸ºä»€ä¹ˆè¦è½¬ï¼Ÿå› ä¸ºåç«¯å­˜çš„æ˜¯åƒç´ åæ ‡ï¼Œå‰ç«¯æ˜¾ç¤ºç”¨çš„æ˜¯åœ°å›¾åæ ‡</span>
  Point&lt;<span class="hljs-built_in">double</span>&gt; cp = state.crs.latLngToPoint(
    latlng, 
    state.config.value.serverMapMaxZoom
  );
  
  <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥æ˜¯å¦è¶…å‡ºå›¾çº¸èŒƒå›´</span>
  <span class="hljs-comment">// ä¹‹å‰æ²¡åŠ è¿™ä¸ªåˆ¤æ–­ï¼Œç”¨æˆ·ç‚¹åˆ°å›¾çº¸å¤–é¢å°±æŠ¥é”™ï¼Œä½“éªŒå¾ˆå·®</span>
  <span class="hljs-keyword">if</span> (cp.x &lt; <span class="hljs-number">0</span> || cp.y &lt; <span class="hljs-number">0</span> || 
      cp.x &gt; currentMapSource.width ||
      cp.y &gt; currentMapSource.height) {
    showSnackBar(<span class="hljs-string">'è¶…å‡ºå›¾çº¸èŒƒå›´'</span>);
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šæ£€æŸ¥æ˜¯å¦åœ¨æœ‰æ•ˆåŒºåŸŸå†…</span>
  <span class="hljs-comment">// æ¯”å¦‚éªŒæ”¶ç³»ç»Ÿè¦æ±‚åªèƒ½åœ¨æˆ¿é—´å†…æ ‡æ³¨ï¼Œä¸èƒ½æ ‡åˆ°å¢™å¤–é¢å»</span>
  <span class="hljs-keyword">if</span> (state.houseLatLngList.isNotEmpty &amp;&amp;
      !MapUtils.isPointInPolygon(latlng, state.houseLatLngList)) {
    showSnackBar(<span class="hljs-string">'è¯·å°†ä½ç½®æ‰“åœ¨ç”»åŒºå†…'</span>);
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-comment">// ç¬¬å››æ­¥ï¼šé€šçŸ¥ä¸šåŠ¡å±‚ï¼ˆè®©ä¸šåŠ¡å±‚ä¿å­˜æ•°æ®ï¼‰</span>
  config.onTap?.call(cp, latlng);
  
  <span class="hljs-comment">// ç¬¬äº”æ­¥ï¼šåœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºæ ‡è®°ç‚¹</span>
  addMarker(position: latlng);
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°çœ‹èµ·æ¥ç®€å•ï¼Œä½†æ¯ä¸€æ­¥éƒ½æ˜¯è¸©å‘è¸©å‡ºæ¥çš„ï¼š</p>
<ul>
<li>åæ ‡è½¬æ¢é‚£é‡Œï¼Œä¹‹å‰ zoom å€¼æ²¡å¯¹é½ï¼Œå¯¼è‡´æ ‡è®°ç‚¹ä½ç½®åç§»</li>
<li>è¾¹ç•Œæ£€æŸ¥æ˜¯æµ‹è¯•æçš„bugï¼Œç”¨æˆ·ç‚¹å¤–é¢ä¼šå´©</li>
<li>åŒºåŸŸçº¦æŸæ˜¯äº§å“åæ¥åŠ çš„éœ€æ±‚ï¼Œè¿˜å¥½æ¶æ„é¢„ç•™äº†æ‰©å±•æ€§</li>
</ul>
<h3 data-id="heading-6">ä¸‰ã€è§†å›¾å±‚çš„è®¾è®¡</h3>
<p>è§†å›¾å±‚å°±æ˜¯è´Ÿè´£æ˜¾ç¤ºï¼Œç”¨ Flutter Map çš„å¤šå›¾å±‚æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-meta">@override</span>
Widget build(BuildContext context) {
  <span class="hljs-keyword">return</span> GetBuilder&lt;CustomMapController&gt;(
    tag: tag,  <span class="hljs-comment">// ç”¨tagæ”¯æŒå¤šå®ä¾‹ï¼Œä¸ç„¶å¤šä¸ªåœ°å›¾ä¼šå†²çª</span>
    id: <span class="hljs-string">'map'</span>, <span class="hljs-comment">// å±€éƒ¨åˆ·æ–°ç”¨çš„ï¼Œåªåˆ·æ–°åœ°å›¾éƒ¨åˆ†</span>
    builder: (controller) {
      <span class="hljs-keyword">return</span> FlutterMap(
        mapController: controller.state.mapController,
        options: _buildMapOptions(),
        children: [
          _buildTileLayer(),      <span class="hljs-comment">// åº•å›¾å±‚ï¼ˆå›¾çº¸ï¼‰</span>
          _buildPolygonLayer(),   <span class="hljs-comment">// å¤šè¾¹å½¢å±‚ï¼ˆæˆ¿é—´è½®å»“ï¼‰</span>
          _buildMarkerLayer(),    <span class="hljs-comment">// æ ‡è®°ç‚¹å±‚</span>
          ...?children,           <span class="hljs-comment">// é¢„ç•™æ‰©å±•ä½ï¼Œå¯ä»¥åŠ è‡ªå®šä¹‰å›¾å±‚</span>
        ],
      );
    },
  );
}
</code></pre>
<p>Flutter Map ç”¨çš„æ˜¯å›¾å±‚å åŠ çš„æ–¹å¼ï¼Œä»ä¸‹å¾€ä¸Šæ¸²æŸ“ã€‚é¡ºåºå¾ˆé‡è¦ï¼Œæé”™äº†æ ‡è®°ç‚¹å°±è¢«å›¾çº¸ç›–ä½äº†ï¼ˆåˆ«é—®æˆ‘æ€ä¹ˆçŸ¥é“çš„ï¼‰ã€‚</p>
<p><strong>åº•å›¾å±‚çš„å®ç°</strong></p>
<pre><code class="hljs language-dart" lang="dart">Widget _buildTileLayer() {
  <span class="hljs-keyword">return</span> Obx(() {  <span class="hljs-comment">// Obx ä¼šç›‘å¬é‡Œé¢ç”¨åˆ°çš„å“åº”å¼å˜é‡</span>
    <span class="hljs-keyword">final</span> currentSource = controller.state.currentMapSource.value;
    
    <span class="hljs-comment">// å›¾çº¸è¿˜æ²¡åŠ è½½å®Œï¼Œæ˜¾ç¤ºloading</span>
    <span class="hljs-keyword">if</span> (currentSource?.defaultSource.localPath?.isEmpty ?? <span class="hljs-keyword">true</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Center(child: CircularProgressIndicator());
    }
    
    <span class="hljs-comment">// åŠ è½½æœ¬åœ°å›¾çº¸æ–‡ä»¶</span>
    <span class="hljs-keyword">return</span> OverlayImageLayer(
      overlayImages: [
        OverlayImage(
          imageProvider: FileImage(File(currentSource.defaultSource.localPath)),
          bounds: currentSource.defaultSource.bounds  <span class="hljs-comment">// å›¾çº¸çš„è¾¹ç•Œ</span>
        )
      ]
    );
  });
}
</code></pre>
<p>è¿™é‡Œç”¨ <code>OverlayImageLayer</code> æŠŠæœ¬åœ°å›¾ç‰‡å½“æˆåœ°å›¾åº•å›¾ï¼Œ<code>bounds</code> å®šä¹‰äº†å›¾ç‰‡çš„åæ ‡èŒƒå›´ã€‚ä¸€å¼€å§‹æˆ‘è¿˜å°è¯•ç”¨ç“¦ç‰‡å›¾çš„æ–¹å¼åˆ‡ç‰‡åŠ è½½ï¼Œåæ¥å‘ç°å›¾çº¸ä¸å¤§ï¼ˆ2-3Mï¼‰ï¼Œç›´æ¥æ•´å›¾åŠ è½½åè€Œæ›´ç®€å•ã€‚</p>
<h3 data-id="heading-7">å››ã€å·¥å‚æ¨¡å¼çš„åº”ç”¨</h3>
<p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå°è£…äº†ä¸€ä¸ªå·¥å‚ç±»ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomMapFactory</span> </span>{
  <span class="hljs-keyword">static</span> CustomMapWidget createDefault({
    <span class="hljs-keyword">required</span> MapDataSource dataSource,
    <span class="hljs-keyword">required</span> MapDrawingConfig config,
    <span class="hljs-built_in">String?</span> tag,
  }) {
    <span class="hljs-keyword">late</span> CustomMapController controller;
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²ç»åˆ›å»ºè¿‡ï¼ˆé¿å…é‡å¤åˆ›å»ºå¯¼è‡´å†…å­˜æ³„æ¼ï¼‰</span>
    <span class="hljs-keyword">if</span> (Get.isRegistered&lt;CustomMapController&gt;(tag: tag)) {
      controller = Get.find&lt;CustomMapController&gt;(tag: tag);
    } <span class="hljs-keyword">else</span> {
      controller = CustomMapController(
        dataSource: dataSource,
        config: config,
      );
      Get.lazyPut(() =&gt; controller, tag: tag);  <span class="hljs-comment">// æ‡’åŠ è½½ï¼Œç”¨çš„æ—¶å€™æ‰åˆ›å»º</span>
    }
    
    <span class="hljs-keyword">return</span> CustomMapWidget(
      controller: controller,
      tag: tag,
    );
  }
  
  <span class="hljs-comment">// é¡µé¢é”€æ¯æ—¶è®°å¾—è°ƒç”¨ï¼Œä¸ç„¶å†…å­˜æ³„æ¼</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> disposeController(<span class="hljs-built_in">String</span> tag) {
    <span class="hljs-keyword">if</span> (Get.isRegistered&lt;CustomMapController&gt;(tag: tag)) {
      Get.delete&lt;CustomMapController&gt;(tag: tag);
    }
  }
}
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// åˆ›å»ºåœ°å›¾ç»„ä»¶</span>
<span class="hljs-keyword">final</span> mapWidget = CustomMapFactory.createDefault(
  dataSource: MyDataSourceImpl(),  <span class="hljs-comment">// ä½ è‡ªå·±çš„ä¸šåŠ¡å®ç°</span>
  config: MapDrawingConfig(
    serverMapMaxZoom: <span class="hljs-number">8.0</span>,
    onTap: (pixelPoint, latlng) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'ç‚¹å‡»äº†åæ ‡: <span class="hljs-subst">$pixelPoint</span>'</span>);
    },
  ),
  tag: <span class="hljs-string">'project_01'</span>,  <span class="hljs-comment">// ç”¨å”¯ä¸€æ ‡è¯†ï¼Œæ”¯æŒå¤šä¸ªåœ°å›¾å®ä¾‹</span>
);
</code></pre>
<h2 data-id="heading-8">è¸©å‘è®°å½•</h2>
<h3 data-id="heading-9">å‘ä¸€ï¼šåæ ‡ç³»ç»Ÿçš„é€‰æ‹©</h3>
<p>ä¸€å¼€å§‹æˆ‘ç”¨çš„æ˜¯å¸¸è§„çš„åœ°ç†åæ ‡ç³»ï¼ˆEPSG:3857ï¼‰ï¼Œç»“æœå‘ç°å›¾çº¸ä¸Šçš„åæ ‡æ ¹æœ¬å¯¹ä¸ä¸Šã€‚åæ¥æ‰æ˜ç™½ï¼Œ<strong>CAD å›¾çº¸ç”¨çš„æ˜¯åƒç´ åæ ‡ï¼Œä¸æ˜¯ç»çº¬åº¦</strong>ã€‚</p>
<p>åç«¯å­˜çš„åæ ‡æ˜¯è¿™æ ·çš„ï¼š<code>{x: 1234, y: 5678}</code>ï¼Œå•ä½æ˜¯åƒç´ ã€‚è€Œ Flutter Map é»˜è®¤ç”¨çš„æ˜¯ç»çº¬åº¦åæ ‡ã€‚</p>
<p>è§£å†³åŠæ³•æ˜¯ç”¨ <strong>CrsSimpleï¼ˆç®€å•ç¬›å¡å°”åæ ‡ç³»ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// CrsSimple å¯ä»¥æŠŠåƒç´ åæ ‡å½“æˆ"ä¼ªç»çº¬åº¦"</span>
<span class="hljs-keyword">final</span> CrsSimple crs = <span class="hljs-keyword">const</span> CrsSimple();

<span class="hljs-comment">// åœ°å›¾åæ ‡ â†’ åƒç´ åæ ‡ï¼ˆç»™åç«¯ç”¨ï¼‰</span>
Point&lt;<span class="hljs-built_in">double</span>&gt; pixelPoint = crs.latLngToPoint(
  latlng, 
  serverMapMaxZoom  <span class="hljs-comment">// zoom çº§åˆ«è¦å’Œåç«¯çº¦å®šå¥½</span>
);

<span class="hljs-comment">// å®šä¹‰å›¾çº¸çš„è¾¹ç•Œ</span>
LatLngBounds bounds = LatLngBounds(
  LatLng(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>),                      <span class="hljs-comment">// å›¾çº¸å·¦ä¸Šè§’</span>
  LatLng(imageHeight, imageWidth)    <span class="hljs-comment">// å›¾çº¸å³ä¸‹è§’</span>
);
</code></pre>
<p>è¿™é‡Œæœ‰å‡ ä¸ªå‘ï¼š</p>
<ol>
<li><strong>zoom çº§åˆ«å¿…é¡»å’Œåç«¯ä¸€è‡´</strong>ï¼Œä¸ç„¶åæ ‡ä¼šåç§»ã€‚æˆ‘ä»¬çº¦å®šçš„æ˜¯ 8</li>
<li><strong>Y è½´æ–¹å‘</strong>ï¼šCrsSimple çš„ Y è½´æ˜¯å‘ä¸‹çš„ï¼Œå’Œä¼ ç»Ÿåæ ‡ç³»ç›¸å</li>
<li><strong>å°æ•°ç²¾åº¦</strong>ï¼šåæ ‡è½¬æ¢ä¼šæœ‰æµ®ç‚¹è¯¯å·®ï¼Œå­˜æ•°æ®åº“æ—¶è¦æ³¨æ„</li>
</ol>
<h3 data-id="heading-10">å‘äºŒï¼šç‚¹åœ¨å¤šè¾¹å½¢å†…åˆ¤å®š</h3>
<p>äº§å“è¦æ±‚ç”¨æˆ·åªèƒ½åœ¨æˆ¿é—´å†…æ ‡æ³¨ï¼Œä¸èƒ½æ ‡åˆ°å¢™å¤–é¢å»ã€‚è¿™å°±éœ€è¦åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…ã€‚</p>
<p>æˆ‘ç”¨çš„æ˜¯<strong>å°„çº¿æ³•ï¼ˆRay Castingï¼‰</strong>ï¼ŒåŸç†å¾ˆç®€å•ï¼šä»ç‚¹å‘å³å‘å°„ä¸€æ¡å°„çº¿ï¼Œæ•°å°„çº¿å’Œå¤šè¾¹å½¢è¾¹ç•Œäº¤ç‚¹çš„ä¸ªæ•°ï¼Œå¥‡æ•°æ¬¡å°±åœ¨å†…éƒ¨ï¼Œå¶æ•°æ¬¡å°±åœ¨å¤–éƒ¨ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> isPointInPolygon(LatLng point, <span class="hljs-built_in">List</span>&lt;LatLng&gt; polygon) {
  <span class="hljs-built_in">int</span> intersectCount = <span class="hljs-number">0</span>;
  
  <span class="hljs-comment">// éå†å¤šè¾¹å½¢çš„æ¯æ¡è¾¹</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; polygon.length; i++) {
    <span class="hljs-comment">// å–å½“å‰ç‚¹å’Œä¸‹ä¸€ä¸ªç‚¹ï¼ˆé¦–å°¾ç›¸è¿ï¼‰</span>
    <span class="hljs-keyword">final</span> LatLng vertB = 
      i == polygon.length - <span class="hljs-number">1</span> ? polygon[<span class="hljs-number">0</span>] : polygon[i + <span class="hljs-number">1</span>];
    
    <span class="hljs-comment">// æ£€æŸ¥å°„çº¿æ˜¯å¦å’Œè¿™æ¡è¾¹ç›¸äº¤</span>
    <span class="hljs-keyword">if</span> (_rayCastIntersect(point, polygon[i], vertB)) {
      intersectCount++;
    }
  }
  
  <span class="hljs-comment">// å¥‡æ•°æ¬¡ç›¸äº¤è¯´æ˜åœ¨å†…éƒ¨</span>
  <span class="hljs-keyword">return</span> (intersectCount % <span class="hljs-number">2</span>) == <span class="hljs-number">1</span>;
}

<span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> _rayCastIntersect(LatLng point, LatLng vertA, LatLng vertB) {
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> aY = vertA.latitude;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> bY = vertB.latitude;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> aX = vertA.longitude;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> bX = vertB.longitude;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> pY = point.latitude;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> pX = point.longitude;
  
  <span class="hljs-comment">// ä¼˜åŒ–ï¼šå¿«é€Ÿæ’é™¤æ˜æ˜¾ä¸ç›¸äº¤çš„æƒ…å†µ</span>
  <span class="hljs-comment">// å¦‚æœABä¸¤ä¸ªç‚¹éƒ½åœ¨Pçš„ä¸Šæ–¹/ä¸‹æ–¹/å·¦ä¾§ï¼Œè‚¯å®šä¸ç›¸äº¤</span>
  <span class="hljs-keyword">if</span> ((aY &gt; pY &amp;&amp; bY &gt; pY) || 
      (aY &lt; pY &amp;&amp; bY &lt; pY) || 
      (aX &lt; pX &amp;&amp; bX &lt; pX)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
  }
  
  <span class="hljs-comment">// ç‰¹æ®Šæƒ…å†µï¼šå‚ç›´çš„è¾¹</span>
  <span class="hljs-keyword">if</span> (aX == bX) <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
  
  <span class="hljs-comment">// è®¡ç®—å°„çº¿ä¸è¾¹çš„äº¤ç‚¹Xåæ ‡ï¼ˆç›´çº¿æ–¹ç¨‹ y = mx + bï¼‰</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> m = (aY - bY) / (aX - bX);  <span class="hljs-comment">// æ–œç‡</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> b = ((aX * <span class="hljs-number">-1</span>) * m) + aY;   <span class="hljs-comment">// æˆªè·</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> x = (pY - b) / m;           <span class="hljs-comment">// äº¤ç‚¹çš„Xåæ ‡</span>
  
  <span class="hljs-comment">// å¦‚æœäº¤ç‚¹åœ¨Pçš„å³ä¾§ï¼Œè¯´æ˜å°„çº¿å’Œè¿™æ¡è¾¹ç›¸äº¤äº†</span>
  <span class="hljs-keyword">return</span> x &gt; pX;
}
</code></pre>
<p>è¿™ä¸ªç®—æ³•çœ‹èµ·æ¥å¤æ‚ï¼Œå…¶å®å°±æ˜¯åˆä¸­çš„ç›´çº¿æ–¹ç¨‹ <code>y = mx + b</code>ã€‚ç¬¬ä¸€æ¬¡å†™çš„æ—¶å€™æ²¡è€ƒè™‘å‚ç›´è¾¹çš„æƒ…å†µï¼Œç»“æœé‡åˆ°çŸ©å½¢æˆ¿é—´å°±æŒ‚äº†ã€‚</p>
<h3 data-id="heading-11">å‘ä¸‰ï¼šå†…å­˜æ³„æ¼</h3>
<p>GetX è™½ç„¶å¥½ç”¨ï¼Œä½†ä¸æ³¨æ„çš„è¯å¾ˆå®¹æ˜“å†…å­˜æ³„æ¼ã€‚å°¤å…¶æ˜¯åœ¨åˆ—è¡¨é¡µï¼Œæ¯ä¸ª item éƒ½åˆ›å»ºä¸€ä¸ªåœ°å›¾å®ä¾‹ï¼Œæ¥å›æ»šåŠ¨å‡ æ¬¡å†…å­˜å°±çˆ†äº†ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-meta">@override</span>
<span class="hljs-keyword">void</span> onClose() {
  <span class="hljs-keyword">if</span> (_isDisposed) <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// é˜²æ­¢é‡å¤é‡Šæ”¾</span>
  
  <span class="hljs-keyword">super</span>.onClose();
  
  <span class="hljs-comment">// é‡Šæ”¾åœ°å›¾æ§åˆ¶å™¨</span>
  state.mapController.dispose();
  
  <span class="hljs-comment">// æ¸…ç©ºæ‰€æœ‰åˆ—è¡¨</span>
  state.markers.clear();
  state.polygons.clear();
  state.currentDrawingPoints.clear();
  
  <span class="hljs-comment">// é‡ç½®çŠ¶æ€</span>
  state.config.value = MapDrawingConfig();
  state.currentMapSource.value = <span class="hljs-keyword">null</span>;
  state.isMapReady = <span class="hljs-keyword">false</span>;
  
  _isDisposed = <span class="hljs-keyword">true</span>;
}
</code></pre>
<p>é¡µé¢é”€æ¯æ—¶è®°å¾—è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-meta">@override</span>
<span class="hljs-keyword">void</span> dispose() {
  CustomMapFactory.disposeController(<span class="hljs-string">'project_<span class="hljs-subst">${projectId}</span>'</span>);
  <span class="hljs-keyword">super</span>.dispose();
}
</code></pre>
<hr/>
<h2 data-id="heading-12">æ•°æ®æ¨¡å‹è®¾è®¡</h2>
<h3 data-id="heading-13">é…ç½®æ¨¡å‹</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapDrawingConfig</span> </span>{
  <span class="hljs-comment">// æ ·å¼ç›¸å…³</span>
  <span class="hljs-keyword">final</span> Color defaultMarkerColor;      <span class="hljs-comment">// æ ‡è®°ç‚¹é¢œè‰²</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> defaultMarkerSize;      <span class="hljs-comment">// æ ‡è®°ç‚¹å¤§å°</span>
  
  <span class="hljs-comment">// ç¼©æ”¾ç›¸å…³ï¼ˆè¿™å‡ ä¸ªå‚æ•°å¾ˆé‡è¦ï¼‰</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> serverMapMaxZoom;  <span class="hljs-comment">// åç«¯ç”¨çš„zoomçº§åˆ«ï¼ˆè¦å¯¹é½ï¼‰</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> realMapMaxZoom;    <span class="hljs-comment">// å‰ç«¯å®é™…æœ€å¤§zoomï¼ˆå½±å“æµç•…åº¦ï¼‰</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> minZoom;           <span class="hljs-comment">// æœ€å°zoomï¼ˆé˜²æ­¢ç¼©å¤ªå°ï¼‰</span>
  
  <span class="hljs-comment">// äº¤äº’ç›¸å…³</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> singleMarker;  <span class="hljs-comment">// æ˜¯å¦å•ç‚¹æ¨¡å¼ï¼ˆæœ‰äº›åœºæ™¯åªèƒ½é€‰ä¸€ä¸ªç‚¹ï¼‰</span>
  <span class="hljs-built_in">Function</span>(Point&lt;<span class="hljs-built_in">double</span>&gt;, LatLng)? onTap;  <span class="hljs-comment">// ç‚¹å‡»å›è°ƒ</span>
  
  <span class="hljs-comment">// æ•°æ®ç›¸å…³</span>
  <span class="hljs-built_in">List</span>&lt;Point&lt;<span class="hljs-built_in">double</span>&gt;&gt; latLngList; <span class="hljs-comment">// å·²æœ‰çš„æ ‡è®°ç‚¹ï¼ˆç”¨æ¥å›æ˜¾ï¼‰</span>
}
</code></pre>
<p>é…ç½®é¡¹ä¸ç®—å¤šï¼Œä½†æ¯ä¸ªéƒ½æ˜¯å®é™…ç”¨åˆ°çš„ã€‚ä¸€å¼€å§‹æƒ³åšæˆè¶…çº§çµæ´»çš„é…ç½®ç³»ç»Ÿï¼Œåæ¥å‘ç°å¤ªå¤æ‚äº†ï¼Œå°±ç®€åŒ–æˆè¿™æ ·ã€‚</p>
<h3 data-id="heading-14">åœ°å›¾æºæ¨¡å‹</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapSource</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> localPath;     <span class="hljs-comment">// å›¾çº¸çš„æœ¬åœ°è·¯å¾„</span>
  <span class="hljs-keyword">final</span> LatLngBounds bounds;  <span class="hljs-comment">// å›¾çº¸çš„è¾¹ç•Œ</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> height;        <span class="hljs-comment">// å›¾çº¸é«˜åº¦ï¼ˆåƒç´ ï¼‰</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> width;         <span class="hljs-comment">// å›¾çº¸å®½åº¦ï¼ˆåƒç´ ï¼‰</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapSourceConfig</span> </span>{
  <span class="hljs-keyword">final</span> MapSource defaultSource;  <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨çš„å›¾çº¸</span>
  
  <span class="hljs-comment">// å·¥å‚æ–¹æ³•ï¼šå¿«é€Ÿåˆ›å»ºæœ¬åœ°å›¾çº¸é…ç½®</span>
  <span class="hljs-keyword">factory</span> MapSourceConfig.customLocal({
    <span class="hljs-keyword">required</span> <span class="hljs-built_in">String</span> customPath,
    <span class="hljs-keyword">required</span> <span class="hljs-built_in">double</span> height,
    <span class="hljs-keyword">required</span> <span class="hljs-built_in">double</span> width,
  }) { ... }
}
</code></pre>
<p>è¿™ä¸ªæ¨¡å‹è®¾è®¡å¾—æ¯”è¾ƒç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬çš„éœ€æ±‚å°±æ˜¯åŠ è½½ä¸€å¼ æœ¬åœ°å›¾çº¸ã€‚å¦‚æœä½ çš„åœºæ™¯éœ€è¦å¤šä¸ªå›¾çº¸åˆ‡æ¢ï¼Œå¯ä»¥æ‰©å±• <code>availableSources</code> åˆ—è¡¨ã€‚</p>
<hr/>
<h2 data-id="heading-15">æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-16">å›¾å±‚æ‡’åŠ è½½</h3>
<p>æ²¡æœ‰æ•°æ®çš„å›¾å±‚ç›´æ¥è¿”å›ç©º Widgetï¼Œä¸æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">Widget _buildMarkerLayer() {
  <span class="hljs-keyword">return</span> Obx(() {
    <span class="hljs-keyword">if</span> (controller.state.markers.isEmpty) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> SizedBox.shrink();  <span class="hljs-comment">// ç©ºå›¾å±‚</span>
    }
    <span class="hljs-keyword">return</span> MarkerLayer(markers: controller.state.markers);
  });
}
</code></pre>
<h3 data-id="heading-17">å±€éƒ¨åˆ·æ–°</h3>
<p>ç”¨ GetBuilder çš„ <code>id</code> å‚æ•°å®ç°ç²¾å‡†åˆ·æ–°ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">update([<span class="hljs-string">'map'</span>]);  <span class="hljs-comment">// åªåˆ·æ–°åœ°å›¾ï¼Œä¸å½±å“é¡µé¢å…¶ä»–éƒ¨åˆ†</span>
</code></pre>
<p>è¿™ä¸ªå¤ªé‡è¦äº†ï¼Œä¹‹å‰æ²¡åŠ  idï¼Œæ¯æ¬¡æ›´æ–°éƒ½å…¨é¡µé¢åˆ·æ–°ï¼Œå¡å¾—è¦å‘½ã€‚</p>
<h3 data-id="heading-18">å›¾ç‰‡ç¼“å­˜</h3>
<p><code>FileImage</code> è‡ªå¸¦ç¼“å­˜ï¼Œä¸éœ€è¦é¢å¤–å¤„ç†ã€‚ä½†å¦‚æœå›¾çº¸ç‰¹åˆ«å¤§ï¼ˆ&gt;10Mï¼‰ï¼Œå»ºè®®åœ¨åŠ è½½å‰å…ˆå‹ç¼©ä¸€ä¸‹ã€‚</p>
<hr/>
<h2 data-id="heading-19">ä½¿ç”¨æŒ‡å—</h2>
<h3 data-id="heading-20">ç¬¬ä¸€æ­¥ï¼šå®ç°æ•°æ®æºæ¥å£</h3>
<p>æ ¹æ®ä½ çš„ä¸šåŠ¡éœ€æ±‚ï¼Œå®ç° <code>MapDataSource</code>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyProjectDataSource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MapDataSource</span> </span>{
  <span class="hljs-meta">@override</span>
  Future&lt;MapSourceConfig&gt; loadMapDrawingResource(CrsSimple crs) <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// ä»æœåŠ¡å™¨ä¸‹è½½æˆ–æœ¬åœ°è¯»å–å›¾çº¸</span>
    <span class="hljs-built_in">String</span> localPath = <span class="hljs-keyword">await</span> getDrawingPath();  <span class="hljs-comment">// ä½ çš„ä¸šåŠ¡é€»è¾‘</span>
    
    <span class="hljs-keyword">return</span> MapSourceConfig.customLocal(
      customPath: localPath,
      height: <span class="hljs-number">1080</span>,  <span class="hljs-comment">// å›¾çº¸é«˜åº¦</span>
      width: <span class="hljs-number">1920</span>,   <span class="hljs-comment">// å›¾çº¸å®½åº¦</span>
    );
  }
  
  <span class="hljs-meta">@override</span>
  Marker addMarker(LatLng point, {<span class="hljs-built_in">String?</span> number}) {
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ ‡è®°ç‚¹ï¼ˆè‡ªå®šä¹‰æ ·å¼ï¼‰</span>
    <span class="hljs-keyword">return</span> Marker(
      point: point,
      width: <span class="hljs-number">40</span>,
      height: <span class="hljs-number">40</span>,
      child: Icon(Icons.location_pin, color: Colors.red),
    );
  }
  
  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">List</span>&lt;Marker&gt; loadMarkers(<span class="hljs-built_in">List</span>&lt;Point&lt;<span class="hljs-built_in">double</span>&gt;&gt;? points, CrsSimple crs) {
    <span class="hljs-comment">// åŠ è½½å·²æœ‰çš„æ ‡è®°ç‚¹ï¼ˆæ¯”å¦‚ä»æ•°æ®åº“è¯»å–ï¼‰</span>
    <span class="hljs-keyword">return</span> points?.map((point) {
      LatLng latlng = crs.pointToLatLng(point, <span class="hljs-number">8.0</span>);
      <span class="hljs-keyword">return</span> addMarker(latlng);
    }).toList() ?? [];
  }
  
  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">dynamic</span> loadPolygons(CrsSimple crs) {
    <span class="hljs-comment">// åŠ è½½å¤šè¾¹å½¢ï¼ˆæˆ¿é—´è½®å»“ã€é™åˆ¶åŒºåŸŸç­‰ï¼‰</span>
    <span class="hljs-keyword">return</span> {
      <span class="hljs-string">'polygonList'</span>: [...],  <span class="hljs-comment">// ä½ çš„å¤šè¾¹å½¢æ•°æ®</span>
      <span class="hljs-string">'houseLatLngList'</span>: [...],  <span class="hljs-comment">// é™åˆ¶åŒºåŸŸ</span>
    };
  }
}
</code></pre>
<h3 data-id="heading-21">ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåœ°å›¾ç»„ä»¶</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> mapWidget = CustomMapFactory.createDefault(
  dataSource: MyProjectDataSource(),
  config: MapDrawingConfig(
    serverMapMaxZoom: <span class="hljs-number">8.0</span>,
    singleMarker: <span class="hljs-keyword">false</span>,  <span class="hljs-comment">// æ˜¯å¦å•ç‚¹æ¨¡å¼</span>
    onTap: (pixelPoint, latlng) {
      <span class="hljs-comment">// ç”¨æˆ·ç‚¹å‡»äº†ï¼Œè¿™é‡Œä¿å­˜åæ ‡åˆ°æ•°æ®åº“</span>
      saveToDatabase(pixelPoint);
    },
  ),
  tag: <span class="hljs-string">'project_<span class="hljs-subst">${projectId}</span>'</span>,  <span class="hljs-comment">// ç”¨å”¯ä¸€IDä½œä¸ºtag</span>
);
</code></pre>
<h3 data-id="heading-22">ç¬¬ä¸‰æ­¥ï¼šåœ¨é¡µé¢ä¸­ä½¿ç”¨</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(title: Text(<span class="hljs-string">'å›¾çº¸æ ‡æ³¨'</span>)),
      body: mapWidget,
    );
  }
}

<span class="hljs-comment">// é¡µé¢é”€æ¯æ—¶è®°å¾—é‡Šæ”¾èµ„æº</span>
<span class="hljs-meta">@override</span>
<span class="hljs-keyword">void</span> dispose() {
  CustomMapFactory.disposeController(<span class="hljs-string">'project_<span class="hljs-subst">${projectId}</span>'</span>);
  <span class="hljs-keyword">super</span>.dispose();
}
</code></pre>
<h3 data-id="heading-23">å‡ ä¸ªæ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>zoom çº§åˆ«è¦å’Œåç«¯å¯¹é½</strong>ï¼Œä¸ç„¶åæ ‡ä¼šå</li>
<li><strong>tag å¿…é¡»å”¯ä¸€</strong>ï¼Œå»ºè®®ç”¨é¡¹ç›®IDæˆ–å…¶ä»–å”¯ä¸€æ ‡è¯†</li>
<li><strong>è®°å¾—é‡Šæ”¾èµ„æº</strong>ï¼Œä¸ç„¶å†…å­˜æ³„æ¼</li>
<li><strong>å›¾çº¸è·¯å¾„è¦æ­£ç¡®</strong>ï¼Œæ–‡ä»¶ä¸å­˜åœ¨ä¼šæŠ¥é”™</li>
</ol>
<hr/>
<h2 data-id="heading-24">æ€»ç»“</h2>
<p>è¿™å¥—æ¶æ„æœ€å¤§çš„ä¼˜ç‚¹æ˜¯<strong>è§£è€¦</strong>ã€‚æ ¸å¿ƒæ¡†æ¶ä¸å…³å¿ƒä½ çš„ä¸šåŠ¡ï¼Œåªè´Ÿè´£åœ°å›¾å±•ç¤ºå’Œäº¤äº’ã€‚æ‰€æœ‰ä¸šåŠ¡é€»è¾‘éƒ½é€šè¿‡ <code>DataSource</code> æ¥å£æ³¨å…¥ï¼Œæ¢ä¸ªåœºæ™¯åªéœ€è¦å†™ä¸€ä¸ªæ–°çš„ DataSource å®ç°å°±è¡Œã€‚</p>
<p>å½“ç„¶ä¹Ÿæœ‰ä¸€äº›ä¸è¶³ï¼š</p>
<ul>
<li>å¯¹äºç‰¹åˆ«å¤æ‚çš„æ ‡æ³¨éœ€æ±‚ï¼ˆæ¯”å¦‚ç»˜åˆ¶æ›²çº¿ã€å¤šè¾¹å½¢ç¼–è¾‘ï¼‰ï¼Œè¿˜éœ€è¦æ‰©å±•</li>
<li>å¤§å›¾çº¸ï¼ˆ&gt;10Mï¼‰çš„åŠ è½½æ€§èƒ½è¿˜æœ‰ä¼˜åŒ–ç©ºé—´</li>
<li>ç¦»çº¿ç¼“å­˜ç›®å‰è¿˜æ²¡åš</li>
</ul>
<p>ä¸è¿‡å¯¹äºå¤§éƒ¨åˆ†åœºæ™¯æ¥è¯´ï¼Œå·²ç»å¤Ÿç”¨äº†ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿæœ‰ç±»ä¼¼çš„éœ€æ±‚ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åˆ°ä½ ã€‚æœ‰é—®é¢˜æ¬¢è¿äº¤æµï¼</p>
<hr/>
<p><em>2024å¹´å®æˆ˜é¡¹ç›®æ€»ç»“ï¼Œä»£ç å·²è„±æ•ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç½‘ç»œè°ƒè¯•å·¥å…·æ¨èï¼ŒFiddleræŠ“åŒ…æ•™ç¨‹ã€HTTPSé…ç½®ä¸æ¥å£è°ƒè¯•å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7577394906160660534</link>    <guid>https://juejin.cn/post/7577394906160660534</guid>    <pubDate>2025-11-28T03:55:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577394906160660534" data-draft-id="7577364921656639530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç½‘ç»œè°ƒè¯•å·¥å…·æ¨èï¼ŒFiddleræŠ“åŒ…æ•™ç¨‹ã€HTTPSé…ç½®ä¸æ¥å£è°ƒè¯•å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-28T03:55:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aiopencode"/> <meta itemprop="url" content="https://juejin.cn/user/1898230261493865"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç½‘ç»œè°ƒè¯•å·¥å…·æ¨èï¼ŒFiddleræŠ“åŒ…æ•™ç¨‹ã€HTTPSé…ç½®ä¸æ¥å£è°ƒè¯•å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1898230261493865/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aiopencode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T03:55:45.000Z" title="Fri Nov 28 2025 03:55:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæ¥å£è°ƒè¯•å’Œç½‘ç»œé—®é¢˜æ’æŸ¥å‡ ä¹æ˜¯æ—¥å¸¸å·¥ä½œä¸­æœ€é«˜é¢‘çš„ä»»åŠ¡ä¹‹ä¸€ã€‚
å°¤å…¶æ˜¯åœ¨å‰åç«¯åˆ†ç¦»æ¶æ„ç››è¡Œçš„ä»Šå¤©ï¼ŒHTTP è¯·æ±‚å¼‚å¸¸ã€è·¨ç«¯æ•°æ®ä¸¢å¤±ã€å“åº”å»¶è¿Ÿç­‰é—®é¢˜å±‚å‡ºä¸ç©·ã€‚
è€Œèƒ½é«˜æ•ˆå®šä½è¿™äº›é—®é¢˜çš„åˆ©å™¨ï¼Œå°±æ˜¯ <strong>FiddleræŠ“åŒ…å·¥å…·</strong>ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°†ä»å®ç”¨è§’åº¦å‡ºå‘ï¼Œå¸¦ä½ ç³»ç»ŸæŒæ¡ Fiddler çš„å®‰è£…é…ç½®ã€HTTPS æŠ“åŒ…ã€ä»£ç†è®¾ç½®ã€æ¥å£è°ƒè¯•ä¸å®æˆ˜åº”ç”¨ï¼Œè®©ä½ ä»â€œä¼šç”¨â€åˆ°â€œç²¾é€šâ€ï¼ŒçœŸæ­£åšåˆ°ä¸€çœ¼çœ‹é€ç½‘ç»œé€šä¿¡ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€FiddleræŠ“åŒ…å·¥å…·ç®€ä»‹</strong></h2>
<p><strong>Fiddler</strong> æ˜¯ Telerik å…¬å¸æ¨å‡ºçš„ä¸€æ¬¾ä¸“ä¸š HTTP/HTTPS æŠ“åŒ…ä¸è°ƒè¯•å·¥å…·ã€‚
å®ƒå¯ä»¥æ•è·ç³»ç»Ÿä¸­æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ä¸å“åº”ï¼Œå¸®åŠ©å¼€å‘è€…åˆ†ææ¥å£ã€ä¼˜åŒ–æ€§èƒ½ã€éªŒè¯æ•°æ®å’Œè°ƒè¯•é—®é¢˜ã€‚</p>
<p>ä¸ Charlesã€Postmanã€Wireshark ç­‰å¸¸è§å·¥å…·ç›¸æ¯”ï¼ŒFiddler å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å…¨é¢åŠŸèƒ½è¦†ç›–</strong>ï¼šæ”¯æŒè¯·æ±‚åˆ†æã€æ–­ç‚¹è°ƒè¯•ã€Mock æ•°æ®ã€æ€§èƒ½åˆ†æï¼›</li>
<li><strong>HTTPS æ”¯æŒå¼º</strong>ï¼šå¯è§£å¯† SSL æµé‡ï¼›</li>
<li><strong>è½»é‡é«˜æ•ˆ</strong>ï¼šèµ„æºå ç”¨ä½ï¼Œé€‚åˆé•¿æœŸè¿è¡Œï¼›</li>
<li><strong>è·¨å¹³å°å…¼å®¹</strong>ï¼šæ”¯æŒ Windowsã€Macã€ç§»åŠ¨ç«¯è°ƒè¯•ã€‚</li>
</ul>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong></p>
<blockquote>
<p>Fiddler æ˜¯è¿æ¥å¼€å‘ã€æµ‹è¯•ä¸è¿ç»´çš„â€œæŠ“åŒ…ä¸­æ¢â€ï¼Œå‡ ä¹èƒ½åº”å¯¹æ‰€æœ‰ç½‘ç»œè°ƒè¯•åœºæ™¯ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€Fiddlerå®‰è£…ä¸åŸºç¡€é…ç½®</strong></h2>
<h3 data-id="heading-2"><strong>1. å®‰è£…ä¸å¯åŠ¨</strong></h3>
<p>å®‰è£… Fiddler åï¼Œå¯åŠ¨è½¯ä»¶å³å¯è‡ªåŠ¨æ¥ç®¡ç³»ç»Ÿç½‘ç»œä»£ç†ã€‚
å¯åŠ¨åï¼Œå·¦ä¾§ä¼šå®æ—¶æ˜¾ç¤ºå½“å‰ç³»ç»Ÿçš„æ‰€æœ‰ç½‘ç»œè¯·æ±‚ã€‚</p>
<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>çŠ¶æ€æ  â€œCapturingâ€ è¡¨ç¤ºæ­£åœ¨æŠ“åŒ…ï¼›</li>
<li>è‹¥æ˜¾ç¤º â€œPausedâ€ï¼Œç‚¹å‡»å³å¯æ¢å¤ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>2. Fiddlerä»£ç†é…ç½®ï¼ˆç”µè„‘ä¸ç§»åŠ¨ç«¯ï¼‰</strong></h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒFiddler ä»…æŠ“å–æœ¬æœºæµé‡ã€‚
è‹¥è¦è°ƒè¯•ç§»åŠ¨ç«¯ Appã€å°ç¨‹åºæˆ–å¤–éƒ¨è®¾å¤‡æ¥å£ï¼Œéœ€è¦å¼€å¯è¿œç¨‹ä»£ç†ã€‚</p>
<p><strong>é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>æ‰“å¼€èœå•æ  <code>Tools â†’ Options â†’ Connections</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Allow remote computers to connect</strong>ï¼›</li>
<li>è®°ä¸‹ç”µè„‘ IP åœ°å€å’Œç«¯å£å·ï¼ˆé»˜è®¤ 8888ï¼‰ï¼›</li>
<li>ç¡®ä¿ç”µè„‘ä¸æ‰‹æœºåœ¨åŒä¸€ Wi-Fi ç½‘ç»œï¼›</li>
<li>åœ¨æ‰‹æœº Wi-Fi è®¾ç½®ä¸­æ‰‹åŠ¨è®¾ç½®ä»£ç†ï¼š
<ul>
<li>ä¸»æœºåï¼šç”µè„‘ IP</li>
<li>ç«¯å£å·ï¼š8888</li>
</ul>
</li>
</ol>
<p>å®Œæˆåï¼Œå³å¯åœ¨ Fiddler ä¸­çœ‹åˆ°ç§»åŠ¨ç«¯å‘å‡ºçš„ HTTP è¯·æ±‚ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>3. HTTPS æŠ“åŒ…é…ç½®</strong></h3>
<p>ç”±äº HTTPS æµé‡ç»è¿‡åŠ å¯†ï¼ŒFiddler éœ€è¦å®‰è£…è¯ä¹¦è¿›è¡Œè§£å¯†ã€‚</p>
<p><strong>é…ç½®æ–¹æ³•ï¼š</strong></p>
<ul>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ HTTPS</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Decrypt HTTPS traffic</strong>ï¼›</li>
<li>ç‚¹å‡» â€œActions â†’ Trust Root Certificateâ€ï¼›</li>
<li>å®‰è£…å¹¶ä¿¡ä»» Fiddler æ ¹è¯ä¹¦ï¼›</li>
<li>è‹¥è¦æŠ“å–æ‰‹æœºè¯·æ±‚ï¼Œéœ€å¯¼å‡ºè¯ä¹¦å¹¶åœ¨ç§»åŠ¨ç«¯å®‰è£…ä¿¡ä»»ã€‚</li>
</ul>
<p>é…ç½®å®Œæˆåï¼Œä½ å³å¯æŸ¥çœ‹åŠ å¯†è¯·æ±‚çš„ Headerã€Body ä¸å“åº”æ•°æ®ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€Fiddlerä½¿ç”¨æ•™ç¨‹ï¼šæ ¸å¿ƒåŠŸèƒ½ä¸æŠ€å·§</strong></h2>
<h3 data-id="heading-6"><strong>1. è¯·æ±‚ä¸å“åº”åˆ†æ</strong></h3>
<p>Fiddler ä¼šæ•è·æ‰€æœ‰ HTTP/HTTPS è¯·æ±‚ã€‚
æ¯æ¡è¯·æ±‚å¯å±•å¼€æŸ¥çœ‹ï¼š</p>
<ul>
<li>è¯·æ±‚æ–¹å¼ï¼ˆGET/POST/PUT/DELETEï¼‰ï¼›</li>
<li>è¯·æ±‚è·¯å¾„ä¸å‚æ•°ï¼›</li>
<li>è¯·æ±‚å¤´ä¸ Cookieï¼›</li>
<li>å“åº”çŠ¶æ€ç ä¸æ•°æ®å†…å®¹ï¼›</li>
<li>è¯·æ±‚è€—æ—¶ä¸æ€§èƒ½ç»Ÿè®¡ã€‚</li>
</ul>
<p><strong>å®æˆ˜æ¡ˆä¾‹ï¼š</strong>
ä¸€æ¬¡ H5 é¡µé¢è¯·æ±‚è¿”å›æˆåŠŸä½†æ— æ•°æ®æ˜¾ç¤ºï¼Œé€šè¿‡ Fiddler å‘ç°å“åº”ä¸­çš„ <code>Content-Type</code> ä¸åŒ¹é…ï¼Œå¯¼è‡´å‰ç«¯è§£æé”™è¯¯ï¼Œé—®é¢˜å¾ˆå¿«è§£å†³ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>2. è¯·æ±‚æ‹¦æˆªä¸æ–­ç‚¹è°ƒè¯•ï¼ˆBreakpointsï¼‰</strong></h3>
<p>Fiddler çš„æ–­ç‚¹åŠŸèƒ½å¯è®©å¼€å‘è€…åœ¨è¯·æ±‚å‘é€å‰æˆ–å“åº”è¿”å›å‰ä¿®æ”¹å†…å®¹ã€‚</p>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ¨¡æ‹ŸæœåŠ¡å™¨å¼‚å¸¸è¿”å›ï¼›</li>
<li>ä¿®æ”¹å‚æ•°æµ‹è¯•æ¥å£å…¼å®¹æ€§ï¼›</li>
<li>å»¶è¿Ÿå“åº”æµ‹è¯•å‰ç«¯åŠ è½½é€»è¾‘ã€‚</li>
</ul>
<p><strong>ä½¿ç”¨æŠ€å·§ï¼š</strong>
å‘½ä»¤è¡Œè¾“å…¥ <code>bpu /api/login</code> å³å¯å¯¹æŒ‡å®šæ¥å£å¯ç”¨æ–­ç‚¹æ‹¦æˆªã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>3. æ¨¡æ‹Ÿæ¥å£å“åº”ï¼ˆAutoResponderï¼‰</strong></h3>
<p>AutoResponder æ˜¯ Fiddler çš„ Mock å·¥å…·æ¨¡å—ï¼Œå¯ç”¨äºæ¨¡æ‹Ÿæ¥å£å“åº”ã€å‰åç«¯ç‹¬ç«‹è”è°ƒã€‚</p>
<p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ AutoResponder é¢æ¿ï¼›</li>
<li>ç‚¹å‡» â€œAdd Ruleâ€ æ·»åŠ è§„åˆ™ï¼›</li>
<li>åŒ¹é…æ¥å£ URLï¼›</li>
<li>ç»‘å®šæœ¬åœ°æ–‡ä»¶æˆ–è‡ªå®šä¹‰ JSON æ•°æ®ï¼›</li>
<li>å¯ç”¨è§„åˆ™åï¼Œè¯·æ±‚å°†ç›´æ¥è¿”å›æ¨¡æ‹Ÿæ•°æ®ã€‚</li>
</ol>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong>
å‰ç«¯åœ¨æ¥å£æœªå®Œæˆæ—¶å¯è¿”å› <code>{ "code": 200, "msg": "ok" }</code>ï¼Œæå‰æµ‹è¯•é¡µé¢é€»è¾‘ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>4. æ„é€ ä¸é‡æ”¾è¯·æ±‚ï¼ˆComposerï¼‰</strong></h3>
<p>Composer æ¨¡å—åŠŸèƒ½ç±»ä¼¼ Postmanï¼Œå¯æ‰‹åŠ¨æ„é€ å’Œå‘é€è¯·æ±‚ã€‚</p>
<p><strong>å¸¸è§ç”¨é€”ï¼š</strong></p>
<ul>
<li>éªŒè¯æ¥å£å‚æ•°æ ¼å¼ï¼›</li>
<li>æµ‹è¯•ä¸åŒè¯·æ±‚å¤´ï¼›</li>
<li>é‡æ”¾çº¿ä¸Šè¯·æ±‚å¤ç°é—®é¢˜ã€‚</li>
</ul>
<p>å³é”®ä»»æ„è¯·æ±‚ â†’ â€œReplay â†’ Reissue Requestâ€ å³å¯å¿«é€Ÿé‡æ”¾ã€‚</p>
<hr/>
<h3 data-id="heading-10"><strong>5. æ€§èƒ½åˆ†æï¼ˆTimelineï¼‰</strong></h3>
<p>Timeline æ¨¡å—å¯å±•ç¤ºè¯·æ±‚çš„è¯¦ç»†è€—æ—¶ï¼š
DNS æŸ¥è¯¢ â†’ TCP è¿æ¥ â†’ TLS æ¡æ‰‹ â†’ æœåŠ¡å™¨å“åº” â†’ æ•°æ®ä¼ è¾“ã€‚</p>
<p><strong>å®æˆ˜åº”ç”¨ï¼š</strong>
é€šè¿‡ Timeline åˆ†æè¯·æ±‚è€—æ—¶æ¥æºï¼Œå¯å¿«é€Ÿè¯†åˆ«æ˜¯ç½‘ç»œå»¶è¿Ÿè¿˜æ˜¯åç«¯å“åº”æ…¢ï¼Œ
å¯¹æ€§èƒ½ä¼˜åŒ–æå…·å‚è€ƒä»·å€¼ã€‚</p>
<hr/>
<h2 data-id="heading-11"><strong>å››ã€Fiddlerå®æˆ˜æ¡ˆä¾‹ï¼šå®šä½ç§»åŠ¨ç«¯æ¥å£å¼‚å¸¸</strong></h2>
<p>ä¸€æ¬¡ç§»åŠ¨ç«¯é¡¹ç›®ä¸­ï¼Œæµ‹è¯•åé¦ˆâ€œå®‰å“èƒ½ç™»å½•ï¼ŒiOS ä¸è¡Œâ€ã€‚
é€šè¿‡ Fiddler æŠ“åŒ…å¯¹æ¯”ä¸¤ç«¯è¯·æ±‚ï¼Œå‘ç° iOS ç«¯ç¼ºå°‘ä¸€ä¸ª Header å­—æ®µã€‚
åç«¯éªŒè¯é€»è¾‘å› æ­¤å¤±è´¥ã€‚</p>
<p>ä¿®å¤è¯·æ±‚å¤´åï¼Œé—®é¢˜ç«‹å³è§£å†³ã€‚</p>
<p><strong>ç»éªŒæ€»ç»“ï¼š</strong></p>
<blockquote>
<p>çœŸå®çš„æ¥å£é—®é¢˜ï¼Œå¾€å¾€ä¸æ˜¯â€œæ¥å£åäº†â€ï¼Œè€Œæ˜¯â€œè¯·æ±‚æ²¡å¯¹é½â€ã€‚
Fiddler å¸®åŠ©å¼€å‘è€…ç²¾ç¡®å¯¹æ¯”æ¯ä¸ªç»†èŠ‚ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-12"><strong>äº”ã€FiddleråŠŸèƒ½æ¨¡å—å¯¹ç…§è¡¨</strong></h2>



































<table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½è¯´æ˜</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Filters</strong></td><td>æŒ‰å…³é”®å­—è¿‡æ»¤è¯·æ±‚</td><td>èšç„¦è°ƒè¯•ç›®æ ‡æ¥å£</td></tr><tr><td><strong>AutoResponder</strong></td><td>æ¨¡æ‹Ÿæ¥å£è¿”å›æ•°æ®</td><td>å‰ç«¯ç‹¬ç«‹å¼€å‘è°ƒè¯•</td></tr><tr><td><strong>Breakpoints</strong></td><td>ä¿®æ”¹è¯·æ±‚ä¸å“åº”</td><td>æ¨¡æ‹Ÿé”™è¯¯ä¸å¼‚å¸¸</td></tr><tr><td><strong>Composer</strong></td><td>æ„é€ ä¸é‡æ”¾è¯·æ±‚</td><td>æ¥å£éªŒè¯ä¸Bugå¤ç°</td></tr><tr><td><strong>Timeline</strong></td><td>åˆ†æè¯·æ±‚è€—æ—¶</td><td>ç½‘ç»œæ€§èƒ½ä¼˜åŒ–</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13"><strong>å…­ã€Fiddlerä¸å…¶ä»–è°ƒè¯•å·¥å…·å¯¹æ¯”</strong></h2>






























<table><thead><tr><th>å·¥å…·</th><th>ä¼˜ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Fiddler</strong></td><td>å…è´¹ã€å¼ºå¤§ã€æ”¯æŒè¯·æ±‚ä¿®æ”¹</td><td>å¼€å‘ / æµ‹è¯•äººå‘˜</td></tr><tr><td><strong>Charles</strong></td><td>ç•Œé¢ç›´è§‚ã€ä¸Šæ‰‹å¿«</td><td>åˆå­¦è€…è°ƒè¯•</td></tr><tr><td><strong>Postman</strong></td><td>è¯·æ±‚æ„é€ çµæ´»</td><td>æ¥å£æµ‹è¯•ä¸éªŒè¯</td></tr><tr><td><strong>Wireshark</strong></td><td>åº•å±‚ç½‘ç»œåˆ†æå¼º</td><td>ç½‘ç»œå®‰å…¨åˆ†æ</td></tr></tbody></table>
<p>Fiddler æ˜¯å½“å‰å…¼é¡¾æ˜“ç”¨æ€§ä¸ä¸“ä¸šæ€§çš„æœ€ä½³ HTTP/HTTPS æŠ“åŒ…ä¸è°ƒè¯•å·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-14"><strong>ä¸ƒã€å­¦ä¹ ä¸èµ„æºæ¨è</strong></h2>
<p>æƒ³è¿›ä¸€æ­¥æŒæ¡ æŒæ¡ <strong>Fiddlerä½¿ç”¨æ•™ç¨‹</strong>ã€<strong>ä»£ç†è®¾ç½®</strong> ä¸ <strong>HTTPS æŠ“åŒ…æŠ€å·§</strong>ï¼Ÿæ¨èè®¿é—®**<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.fiddler.hk%2F" target="_blank" title="https://www.fiddler.hk/" ref="nofollow noopener noreferrer">Fiddler ä¸­æ–‡ç½‘</a>**</p>
<p>ä½ å°†åœ¨ç½‘ç«™ä¸­è·å¾—ï¼š</p>
<ul>
<li>Fiddler å®‰è£…ä¸é…ç½®æ•™ç¨‹ï¼›</li>
<li>HTTPS æŠ“åŒ…ä¸è¯ä¹¦é…ç½®æ–¹æ³•ï¼›</li>
<li>ç§»åŠ¨ç«¯ä»£ç†æŠ“åŒ…æŒ‡å—ï¼›</li>
<li>Mock æ•°æ®ä¸æ–­ç‚¹è°ƒè¯•æŠ€å·§ï¼›</li>
<li>ç½‘ç»œæ€§èƒ½ä¼˜åŒ–å®æˆ˜æ¡ˆä¾‹ã€‚</li>
</ul>
<hr/>
<p>åœ¨æ¥å£è°ƒè¯•ä¸ç½‘ç»œé—®é¢˜æ’æŸ¥ä¸­ï¼Œ<strong>æŠ“åŒ…èƒ½åŠ›</strong> æ˜¯å¼€å‘è€…æ•ˆç‡çš„å€å¢å™¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®‡ä¿¡ç§‘æŠ€åŸºäº SelectDB & Apache Doris æ„å»ºå®æ—¶æ™ºèƒ½çš„é“¶è¡Œç»è¥åˆ†æå¹³å°]]></title>    <link>https://juejin.cn/post/7577307409854349327</link>    <guid>https://juejin.cn/post/7577307409854349327</guid>    <pubDate>2025-11-28T04:02:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577307409854349327" data-draft-id="7577294037717532706" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®‡ä¿¡ç§‘æŠ€åŸºäº SelectDB &amp; Apache Doris æ„å»ºå®æ—¶æ™ºèƒ½çš„é“¶è¡Œç»è¥åˆ†æå¹³å°"/> <meta itemprop="keywords" content="æ•°æ®åº“,Apache"/> <meta itemprop="datePublished" content="2025-11-28T04:02:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®‡ä¿¡ç§‘æŠ€åŸºäº SelectDB &amp; Apache Doris æ„å»ºå®æ—¶æ™ºèƒ½çš„é“¶è¡Œç»è¥åˆ†æå¹³å°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T04:02:01.000Z" title="Fri Nov 28 2025 04:02:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å®¢æˆ·èƒŒæ™¯</h2>
<p>æ·±è€•é“¶è¡Œ IT å»ºè®¾é¢†åŸŸ 26 çš„å¹´ï¼Œ å®‡ä¿¡ç§‘æŠ€æœåŠ¡è¶…æ•°ç™¾å®¶é‡‘èæœºæ„ï¼Œè¦†ç›–æ ¸å¿ƒç³»ç»Ÿã€æ¸ é“å¹³å°ã€é£æ§ä¸­å°ç­‰å…³é”®ä¸šåŠ¡åœºæ™¯ã€‚å…¶æ•°æ®æ¡çº¿å›¢é˜Ÿä¸“æ³¨ç»è¥åˆ†æåœºæ™¯ 20 ä½™å¹´ï¼Œä¸ºåŸå•†è¡Œã€å†œå•†è¡Œæä¾›ä»æŠ¥è¡¨ç³»ç»Ÿåˆ°æ™ºèƒ½å†³ç­–çš„å…¨æ ˆè§£å†³æ–¹æ¡ˆã€‚éšç€é“¶è¡Œä¸šæ•°å­—åŒ–è¿›ç¨‹æ­¥å…¥æ·±æ°´åŒºï¼Œå®‡ä¿¡ç§‘æŠ€é¢ä¸´åŒé‡æŒ‘æˆ˜ï¼šä¸€æ–¹é¢ï¼Œå¸‚åœºèŠ‚å¥çš„åŠ å¿«ï¼Œè®©å®¢æˆ·å¯¹â€œåˆ†é’Ÿçº§æ•°æ®å“åº”â€éœ€æ±‚è¿«åˆ‡ï¼Œä¼ ç»Ÿæ•°æ®å¹³å°çš„å¤„ç†æ•ˆç‡ä¸æ‰©å±•èƒ½åŠ›å·²æ˜¾æ»åï¼›å¦ä¸€æ–¹é¢ï¼Œå†³ç­–è€…ä¸å†æ»¡è¶³äºâ€œå·¥å…·å³æŠ¥è¡¨â€ç°çŠ¶ï¼Œéœ€è¦ä¸€ç§èƒ½å¤Ÿå®ç° â€œæ™ºèƒ½å½’å› -é—­ç¯å†³ç­–â€ çš„æ·±åº¦åˆ†æèƒ½åŠ›ï¼Œä»¥åº”å¯¹å¤æ‚å¤šå˜çš„å¸‚åœºç¯å¢ƒã€‚</p>
<h2 data-id="heading-1">æŒ‘æˆ˜ä¸æ¢ç´¢</h2>
<ul>
<li><strong>é“¶è¡Œä¸šç»è¥åˆ†æçš„æ¼”è¿›ï¼š</strong> çºµè§‚é“¶è¡Œä¸šæ•°æ®åˆ†æçš„å‘å±•å¯ä»¥çœ‹åˆ°ä¸€æ¡ä»â€œä¸“æœ‰â€åˆ°â€œæ™®æƒ â€çš„æ¼”è¿›è·¯å¾„ï¼Œå¤§è‡´ç»å†äº†ä¸‰ä¸ªæ—¶ä»£ï¼š</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab4663a06abe4a0f9c617d92ee9ddea5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907321&amp;x-signature=gL%2FNRKuskORwAbilaBV%2BoaeqYs4%3D" alt="æŒ‘æˆ˜ä¸æ¢ç´¢.PNG" loading="lazy"/></p>
<ul>
<li><strong>æ•°æ®åˆ†æ 1.0ï¼š</strong> åˆ†æå·¥ä½œé«˜åº¦ä¾èµ–å®šåˆ¶å¼€å‘ï¼Œå…¶äº§å‡ºç‰©æ˜¯å®šæœŸç”Ÿæˆçš„é™æ€æŠ¥è¡¨ã€‚æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸä»¥â€œæœˆâ€ç”šè‡³â€œå¹´â€ä¸ºå•ä½ï¼Œå†³ç­–ä¿¡æ¯é“¾æ¡é•¿ã€å“åº”è¿Ÿç¼“ã€‚å®ƒä»…ä»…æ˜¯å°‘æ•°é«˜å±‚ç®¡ç†è€…çš„ä¸“å±å·¥å…·ã€‚</li>
<li><strong>æ•°æ®åˆ†æ 2.0ï¼š</strong> â€œæ‹–æ‹‰æ‹½â€å¼çš„åˆ†æå’Œçœ‹æ¿å¤§å±ï¼Œå°†æ•°æ®æ—¶æ•ˆæ€§ä»â€œæœˆâ€æå‡è‡³â€œå‘¨â€çš„ç²’åº¦ï¼Œå¹¶å°†ä½¿ç”¨æƒä¸‹æ”¾ç»™äº†æ•°æ®åˆ†æå¸ˆç­‰ä¸“ä¸šå²—ä½ï¼Œç”¨æˆ·è§„æ¨¡ä¹Ÿç›¸åº”æ‰©å¤§è‡³åä¸‡çº§ã€‚</li>
<li><strong>æ•°æ®åˆ†æ 3.0ï¼š</strong> æ•°æ®è°ƒå–æ—¶é—´å‹ç¼©è‡³â€œç§’â€ï¼Œé€šè¿‡å°†å¤æ‚åˆ†æèƒ½åŠ›å°è£…äºäº§å“ä¹‹ä¸­ï¼Œå·¥å…·çš„ä½¿ç”¨é—¨æ§›è¢«é™è‡³æœ€ä½ï¼Œå¼€å¯äº†æœåŠ¡äº¿ä¸‡çº§ç”¨æˆ·çš„å¯èƒ½ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c316313a9b354d768024f411612ec07a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907321&amp;x-signature=p3XK6PI1UrwONYwJbOwOjmhfGs0%3D" alt="æŒ‘æˆ˜ä¸æ¢ç´¢-2.PNG" loading="lazy"/></p>
<ul>
<li><strong>ç°ä»£åŒ–çš„ç»è¥åˆ†ææ¶æ„è¯¦è§ä¸Šå›¾ï¼Œå½“å‰ç»è¥åˆ†ææ‰€é¢ä¸´çš„æŒ‘æˆ˜å¦‚ä¸‹ï¼š</strong>
<ul>
<li><strong>ç¼ºå°‘å³æ—¶æ€§åˆ†æï¼š</strong> ä¸´æ—¶æ¢ç´¢æ€§åˆ†æéœ€æ±‚éš¾ä»¥å³æ—¶å“åº”ï¼Œä»ä¾èµ–â€œæéœ€æ±‚â€”â€”ç­‰å¼€å‘â€çš„ä¼ ç»Ÿæ¨¡å¼ï¼Œå“åº”å‘¨æœŸé•¿ã€æ—¶æ•ˆæ€§ä½ã€‚</li>
<li><strong>å®æ—¶åœºæ™¯éœ€ä¸°å¯Œï¼š</strong> ç°æœ‰æŠ€æœ¯èƒ½åŠ›ä¸è¶³ä»¥æ”¯æ’‘å®æ—¶è¥é”€ã€é¢„è­¦ã€é£æ§ç­‰é«˜è¦æ±‚åœºæ™¯ã€‚</li>
<li><strong>å½’å› åˆ†æä¸çµæ´»ï¼š</strong> ç”±äºæœé‚¦åˆ†æã€è¿å¾™åˆ†æã€æ¼æ–—åˆ†æç­‰çµæ´»åˆ†ææ–¹æ³•ç¼ºå¤±ï¼Œä¸šåŠ¡ç»“æœæ˜“å¯Ÿè€Œæ·±å±‚åŠ¨å› éš¾æº¯ã€‚å…¶æ ¹æºåœ¨äºæ•°æ®ã€æŠ€æœ¯ä¸ä¸šåŠ¡é—´çš„â€œæ–­ç‚¹â€å¯¼è‡´åˆ†æè·¯å¾„å‰²è£‚ï¼Œæ·±åº¦å½’å› æ¢ç´¢å—é˜»ã€‚</li>
<li><strong>è‡ªåŠ©åˆ†æé—¨æ§›é«˜ï¼š</strong> ç°æœ‰å¹³å°å¯¹ä¸šåŠ¡äººå‘˜è€Œè¨€ä½¿ç”¨é—¨æ§›ä»è¾ƒé«˜ã€‚</li>
</ul>
</li>
</ul>
<p>å®‡ä¿¡åœ¨æœåŠ¡é«˜ç®¡å†³ç­–ä¸­å‘ç°ï¼Œ BI å·¥å…·è™½ç„¶èƒ½æä¾›ç²¾å‡†çš„â€œæ•°æ®æ´å¯Ÿâ€ï¼Œä½†æ™®éç¼ºä¹ä¸ä¸šåŠ¡æ‰§è¡Œæµç¨‹çš„è”åŠ¨ï¼Œå¯¼è‡´æ´å¯Ÿæ— æ³•é«˜æ•ˆè½¬åŒ–ä¸ºè¡ŒåŠ¨ï¼Œå½¢æˆäº†â€œå†³ç­–æ–­ç‚¹â€ã€‚</p>
<p>ä¸ºè§£å†³è¿™ä¸€æ ¸å¿ƒéš¾é¢˜ï¼Œå®‡ä¿¡è‡ª 2023 å¹´å¼€å§‹ä¸ Apache Doris åˆä½œï¼Œç›®æ ‡æ„å»ºä¸€ä¸ª<strong>å°†æ•°æ®æ´å¯Ÿæ— ç¼èå…¥ä¸šåŠ¡æ‰§è¡Œ</strong>çš„å…¨æ–°å¹³å°ã€‚å…·ä½“è€Œè¨€ï¼Œå¹³å°ä¸å†æ˜¯ç®€å•çš„â€œé—®é¢˜å·¥å•â€ï¼Œè€Œæ˜¯å›´ç»•â€œä¸šåŠ¡ç›®æ ‡â€è¿›è¡Œé©±åŠ¨ï¼šç³»ç»ŸåŸºäºæ•°æ®åˆ†æè‡ªåŠ¨ç”Ÿæˆå¤„ç½®å»ºè®®ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºå¯è¿½è¸ªã€å¯é‡åŒ–çš„è¡ŒåŠ¨é¡¹ï¼Œä¸‹å‘è‡³æ‰§è¡Œå±‚ã€‚</p>
<p>åŒæ–¹åˆä½œä»¥æ¥ï¼Œå·²åœ¨å¤šä¸ªé¡¹ç›®ä¸­æˆåŠŸè½åœ°ã€‚æ–°å¹³å°ä¸ä»…è§£å†³äº†ä»¥å¾€æ•°æ®ä¸ä¸šåŠ¡è„±èŠ‚çš„é•¿æœŸç—›ç‚¹ï¼Œå…¶å®é™…æˆæ•ˆä¹Ÿè¿œè¶…é¡¹ç›®é¢„æœŸã€‚</p>
<h2 data-id="heading-2">Apache Doris æ„å»ºé«˜æ•ˆã€æ™ºèƒ½çš„åˆ†æå¹³å°</h2>
<p>å®‡ä¿¡ç§‘æŠ€ä¸ Apache Doris çš„æ·±åº¦èåˆï¼Œæ˜¯æ„å»ºç°ä»£åŒ–é“¶è¡Œç»è¥åˆ†æå¹³å°çš„å…³é”®ã€‚Apache Doris ä½œä¸ºæ ¸å¿ƒåŠ é€Ÿå¼•æ“å’Œæ•°æ®å­˜å‚¨ç»„ä»¶ï¼Œåœ¨æå‡æ•°æ®å¤„ç†æ•ˆç‡ã€å®ç°æµæ‰¹ä¸€ä½“åŒ–ä»¥åŠæ‰“ç ´æ•°æ®å­¤å²›æ–¹é¢å‘æŒ¥äº†å†³å®šæ€§ä½œç”¨ ã€‚</p>
<h3 data-id="heading-3">01 å‡çº§åˆ†æå¹³å°ï¼šå®æ—¶åŠ¨æ€æŒ‡æ ‡é«˜æ•ˆæŸ¥è¯¢</h3>
<p>é€šè¿‡ä¸ Apache Doris èƒ½åŠ›æ‰“é€šï¼Œå°†å¸¸æ€åŒ–çš„æŒ‡æ ‡åŠ å·¥å˜æˆäº†åŠ¨æ€çš„æŒ‡æ ‡åŠ å·¥ï¼Œå®‡ä¿¡ç§‘æŠ€ç»è¥åˆ†æå¹³å°å®ç°æŒ‡æ ‡å®æ—¶é«˜æ•ˆæŸ¥è¯¢ï¼Œä¸šåŠ¡æ•ˆç‡æå‡ 30%ï¼Œæå¤§æå‡äº†ä¸šåŠ¡æ•æ·æ€§ä¸ç«äº‰ä¼˜åŠ¿ã€‚ä¸šåŠ¡ç”¨æˆ·è·å–æ´å¯Ÿæ—¶é—´å¤§å¹…ç¼©çŸ­ï¼Œå¯å¿«é€Ÿå“åº”å¸‚åœºå˜åŒ–å¹¶ä¼˜åŒ–èµ„æºåˆ©ç”¨ï¼Œæœ‰æ•ˆè§£å†³"ç¼ºå°‘å³æ—¶æ€§åˆ†æ"ç—›ç‚¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a52007efadf04c1b8a5917c691e2fc33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907321&amp;x-signature=t8MZyfqSDePbuGnnyasv3xa%2BuZE%3D" alt="01 å‡çº§åˆ†æå¹³å°ï¼šå®æ—¶åŠ¨æ€æŒ‡æ ‡é«˜æ•ˆæŸ¥è¯¢.png" loading="lazy"/></p>
<h3 data-id="heading-4">02 è§£é™¤æ•°æ®æ·é”ï¼šå®ç°æµæ‰¹ä¸€ä½“æŒ‡æ ‡åŠ å·¥</h3>
<p>Apache Doris åœ¨å®‡ä¿¡ç§‘æŠ€ç»è¥åˆ†æå¹³å°ä¸­æ„å»ºäº†æµæ‰¹ä¸€ä½“æŒ‡æ ‡åŠ å·¥æ¶æ„ï¼Œè½»æ¾ç»Ÿä¸€äº† Kafka å®æ—¶æ•°æ®æµä¸æ‰¹é‡å†å²æ•°æ®æºï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†ä¼ ç»Ÿ Lambda æ¶æ„ä¸­å¸¸è§çš„æ—¶æ•ˆæ€§å»¶è¿Ÿä¸æ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Œçªç ´ä¼ ç»Ÿå®æ—¶åˆ†æä¸å†å²æŠ¥å‘Šåˆ†ç¦»çš„å±€é™ã€‚ç»Ÿä¸€æ•°æ®æºç®€åŒ–äº†æ²»ç†æµç¨‹ï¼Œå‡å°‘å†—ä½™ï¼Œä½¿é“¶è¡Œèƒ½æ„å»ºå¤æ‚åº”ç”¨ï¼ˆå¦‚å®æ—¶æ¬ºè¯ˆæ£€æµ‹ã€ä¸ªæ€§åŒ–è¥é”€ï¼‰ï¼ŒåŒæ—¶æ”¯æ’‘é•¿æœŸè¶‹åŠ¿åˆ†æä¸æˆ˜ç•¥è§„åˆ’ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de8634e0909e4875807b9d8e54e767d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907321&amp;x-signature=5fAz2Vkk6ooC8A%2F1XjHSeN4cBzg%3D" alt="02 è§£é™¤æ•°æ®æ·é”ï¼šå®ç°æµæ‰¹ä¸€ä½“æŒ‡æ ‡åŠ å·¥.png" loading="lazy"/></p>
<h3 data-id="heading-5">03 çªç ´æ•°æ®å­¤å²›ï¼šä»çƒŸå›±å¼åˆ°æ•°æ®ä¸­å°çš„è½¬å˜</h3>
<p>åœ¨ä¼ ç»Ÿçš„â€œçƒŸå›±å¼â€æ•°æ®æ¶æ„ä¸­ï¼Œå„ä¸ªåº”ç”¨ç³»ç»Ÿç‹¬ç«‹å»ºè®¾ï¼Œå¯¼è‡´æ•°æ®å­¤å²›æ™®éå­˜åœ¨ï¼Œæ•°æ®éš¾ä»¥å¤ç”¨ï¼Œæ•ˆç‡ä½ä¸‹ ã€‚å®‡ä¿¡ç§‘æŠ€åŸºäº Apache Doris æ„å»ºäº†æ¹–ä»“ä¸€ä½“çš„æ•°æ®ä¸­å°ï¼Œé«˜æ•ˆæ”¯æ’‘äº†æ–°ä¸€ä»£ç»è¥åˆ†æå¹³å°ï¼Œé“¶è¡Œèƒ½å¤Ÿå®ç°æŒ‡æ ‡çš„å¿«é€Ÿç”Ÿäº§ä¸åˆ†æï¼ŒåŠ å¿«äº†å¯¹å¸‚åœºå˜åŒ–çš„å“åº”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1998057ee21141f695d1ff079badfa0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907321&amp;x-signature=M6o4NGvRA7bD2a%2FjHG%2BL1Yo%2Bklc%3D" alt="03 çªç ´æ•°æ®å­¤å²›ï¼šä»çƒŸå›±å¼åˆ°æ•°æ®ä¸­å°çš„è½¬å‹.png" loading="lazy"/></p>
<h3 data-id="heading-6">04 ç²¾å‡†ä¸šåŠ¡æ´å¯Ÿï¼šè¿å¾™åˆ†æä¸è¡€ç¼˜æ‹†è§£çš„åº”ç”¨</h3>
<p>åœ¨ Apache Doris çš„æ”¯æ’‘ä¸‹ï¼Œå®‡ä¿¡ç§‘æŠ€å®ç°äº†<strong>è¿å¾™åˆ†æ</strong>å’Œ<strong>è¡€ç¼˜æ‹†è§£åˆ†æ</strong>ç­‰é«˜çº§åŠŸèƒ½ï¼Œèƒ½ç›´æ¥è§£å†³â€œå½’å› åˆ†æä¸çµæ´»â€çš„ç—›ç‚¹ï¼Œä¿ƒä½¿é“¶è¡Œå¯¹ä¸šåŠ¡ç»©æ•ˆå’Œå®¢æˆ·è¡Œä¸ºè·å¾—æ›´æ·±å…¥ã€æ›´å…·å¯æ“ä½œæ€§çš„ç†è§£ã€‚</p>
<p><strong>å®¢å±‚å˜åŒ–åˆ†æ</strong>èƒ½å¤Ÿå¸®åŠ©é“¶è¡Œç²¾å‡†å®šä½å®¢æˆ·ç¾¤ä½“å’Œä¸šåŠ¡å˜åŒ– ã€‚é€šè¿‡ç†è§£å®¢æˆ·ä¸ºä½•åœ¨ä¸åŒç»†åˆ†å¸‚åœºä¹‹é—´è¿ç§»ï¼Œé“¶è¡Œå¯ä»¥åˆ¶å®šæœ‰é’ˆå¯¹æ€§çš„ä¿ç•™ç­–ç•¥ï¼Œæˆ–è¯†åˆ«é«˜ç»©æ•ˆåˆ†æ”¯æœºæ„çš„æˆåŠŸå®è·µã€‚</p>
<p>å…·ä½“æ”¯æŒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>åœˆé€‰å†å²å®¢ç¾¤ï¼š</strong> ä»¥æ—¶é—´ä¸ºèŠ‚ç‚¹ï¼Œåœˆé€‰æŸä¸€æ—¶é—´ç‚¹/åŒºé—´çš„å®¢æˆ·ï¼Œåˆ†æè¿™äº›å®¢æˆ·åœ¨æŸä¸ªæ—¶é—´æ®µçš„å˜åŒ–æƒ…å†µï¼›</li>
<li><strong>è¿›è¡Œå®¢ç¾¤æ¯”å¯¹ï¼š</strong> æ”¯æŒé€‰æ‹©ä¸åŒå®¢ç¾¤è¿›è¡Œå¯¹æ¯”ï¼Œåˆ†æåŒä¸€å‘¨æœŸå†…ä¸åŒå®¢æˆ·æ˜ç»†ï¼Œè”åŠ¨CRMè¿‡ç¨‹æŒ‡æ ‡ï¼ŒåŒæ—¶æ¯”è¾ƒå„ä¸ªåˆ†æ”¯è¡Œç»éªŒç­–ç•¥ä¼˜åŠ£ï¼›</li>
<li><strong>ä¸‹é’»åˆ°å®¢æˆ·æ˜ç»†ï¼š</strong> é‡è¦å®¢æˆ·è¿å¾™å˜åŒ–ï¼Œå¦‚ç§è¡Œè¿å¾™åˆ°ç™½é‡‘ï¼Œå¯ç‚¹å‡»å±•ç¤ºå®¢æˆ·æ˜ç»†ï¼Œè”åŠ¨ CRMè¿‡ç¨‹æŒ‡æ ‡ï¼ŒæŒ–æ˜è¿å¾™å˜åŒ–åŸå› ï¼›</li>
</ul>
<p>Apache Doris åœ¨å¤„ç†å¤§é‡æ—¶é—´åºåˆ—æ•°æ®ä¸Šçš„å¤æ‚å¤šç»´æŸ¥è¯¢èƒ½åŠ›ï¼Œå¯¹äºè¿™äº›å¤æ‚åˆ†æè‡³å…³é‡è¦ï¼Œä½¿é“¶è¡Œèƒ½å¤Ÿå¢å¼ºå®¢æˆ·å¿ è¯šåº¦å¹¶æ”¹å–„å…¶ç«äº‰åœ°ä½ã€‚</p>
<p><strong>ç»´åº¦å½’å› åˆ†æ</strong>èƒ½æ”¯æŒä¸šåŠ¡çš„ç²¾å‡†å®šä½é—®é¢˜ã€‚èƒ½å¤Ÿå¸®åŠ©é“¶è¡Œå¿«é€Ÿæ’æŸ¥è§„æ¨¡å˜åŠ¨é—®é¢˜ã€ç†è§£å…³é”®æŒ‡æ ‡æ³¢åŠ¨åŠæ ¹å› åˆ†æï¼š</p>
<p><strong>è‡ªåŠ¨/é…ç½®æ‹†è§£é€»è¾‘ï¼š</strong> é€šè¿‡æ‹†è§£ï¼Œå°†å¤æ‚çš„æŒ‡æ ‡æ‹†è§£ä¸ºæ›´ç»†ç²’åº¦çš„åŸå­æŒ‡æ ‡ï¼Œå¿«é€Ÿå®šä½å½±å“æŒ‡æ ‡çš„æ·±å±‚åŸå› ï¼›</p>
<ul>
<li><strong>å¿«é€Ÿè¯†åˆ«é‡ç‚¹å…³æ³¨é¡¹ï¼š</strong> å¯¹äºæ•´ä¸ªè¡€ç¼˜åˆ†æä¸­å ä¸»è¦å½±å“å› ç´ çš„é¡¹æˆ–éœ€è¦é‡ç‚¹å…³æ³¨çš„é¡¹ï¼Œå¯é€šè¿‡é«˜äº®çš„å½¢å¼è¿›è¡Œå‘ˆç°ï¼›</li>
<li><strong>ç»™å‡ºåˆ†æç»“è®ºä¸‹å‘ç”¨æˆ·ï¼š</strong> æŒ‡æ ‡æ”¯æŒä¸‹é’»è¿›è¡Œåˆ†æï¼Œå¹¶ç»™å‡ºç›¸åº”çš„åˆ†æç»“è®ºï¼›</li>
</ul>
<p><strong>Doris ä½œä¸ºåº•å±‚é«˜æ€§èƒ½åˆ†æå¼•æ“ï¼Œé«˜æ•ˆå¤„ç†å’ŒæŸ¥è¯¢å¤šå±‚åˆ†è§£æ‰€éœ€çš„ç²’åº¦æ•°æ®ï¼Œä¸ºå¹³å°çš„å¼ºå¤§è¯Šæ–­èƒ½åŠ›æä¾›æ”¯æ’‘ã€‚</strong></p>
<h2 data-id="heading-7">æŸé“¶è¡Œä¸šåŠ¡åœºæ™¯çš„æˆåŠŸå®è·µ</h2>
<p>å®‡ä¿¡ç§‘æŠ€ä¸ Apache Doris ä¸ºæŸé“¶è¡Œçš„é›¶å”®ä¸šåŠ¡æ‰“é€ äº†å…¨æ–°çš„ç»è¥åˆ†æå¹³å°ã€‚å…¶ä¸­ Apache Doris ä½œä¸ºæ ¸å¿ƒåˆ†æå¼•æ“ï¼Œä¸ºé¡¹ç›®æˆåŠŸæä¾›äº†å…³é”®çš„æ•°æ®æ”¯æ’‘èƒ½åŠ›ï¼Œé‡ç‚¹èšç„¦å…¶é›¶å”®ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p>é¡¹ç›®çš„é¡¶å±‚è®¾è®¡éµå¾ªæ¨¡å—åŒ–ä¸ç»“æ„åŒ–ä¸¤å¤§æ ¸å¿ƒåŸåˆ™ã€‚å‰è€…è´Ÿè´£å°†å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚å­˜æ¬¾ã€è´·æ¬¾ã€è´¢ç®¡ï¼‰æ¸…æ™°è§£è€¦ï¼›åè€…åˆ™ç¡®ä¿æ‰€æœ‰åˆ†æå·¥ä½œéƒ½å›´ç»•æ ¸å¿ƒä¸šåŠ¡ç›®æ ‡ï¼ˆOSMï¼‰ï¼Œä»¥ç»ˆä¸ºå§‹ã€‚äºŒè€…å‡ä¾æ‰˜ Apache Doris å¼ºå¤§çš„å®æ—¶åˆ†æèƒ½åŠ›å’Œå¿«é€Ÿå“åº”èƒ½åŠ›ã€‚ä¸ºå®ç°â€œå…¨æ¸ é“è§¦è¾¾ï¼Œåˆ†å±‚ç»è¥â€çš„ä¸šåŠ¡ç›®æ ‡ï¼Œå¹³å°è¿˜åŸºäº Apache Doris æ„å»ºäº†è¦†ç›–å¤šç»´åº¦ã€å¤šå±‚æ¬¡çš„æŒ‡æ ‡ä½“ç³»ã€‚</p>
<p>Apache Doris çš„çœŸæ­£ä»·å€¼åœ¨äºå…¶ååŒæ•ˆåº”ï¼šå…¶æ”¯æ’‘çš„å„é¡¹èƒ½åŠ›ï¼ˆæé€ŸæŸ¥è¯¢ã€æµæ‰¹ä¸€ä½“ã€æ•°æ®èåˆã€çµæ´»å½’å› ã€æ™ºèƒ½è‡ªåŠ©ï¼‰æ·±åº¦èåˆï¼Œè¿™ç§é›†æˆåŒ–çš„è§£å†³æ–¹æ¡ˆå¯ä»¥æ”¾å¤§æ•´ä½“ä¸šåŠ¡çš„ä»·å€¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7a3a4d1c0924029ac44d9d38621a3fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907321&amp;x-signature=c3Wm%2BRApZwtnLerUE%2BXUs5PkZ6w%3D" alt="æŸé“¶è¡Œä¸šåŠ¡åœºæ™¯çš„æˆåŠŸå®è·µ.png" loading="lazy"/></p>
<h2 data-id="heading-8">æœªæ¥å±•æœ›ï¼šAI x Apache Doris</h2>
<p><strong>ç»“åˆå¤§æ¨¡å‹æ‰“é€ äººäººå¯ç”¨çš„ ChatBIï¼š</strong></p>
<p>æ·±åº¦èåˆå¤§æ¨¡å‹èƒ½åŠ›ï¼Œå®ç°å¯¹è¯é—®æ•°ã€è‡ªåŠ¨å½’å› ã€å…³è”åº”ç”¨å’Œå¤šè½®å¯¹è¯ï¼Œæ˜¾è‘—é™ä½åˆ†æé—¨æ§›ã€‚Apache Doris ä½œä¸ºåº•å±‚é«˜æ€§èƒ½åˆ†æå¼•æ“ï¼Œéœ€æ”¯æ’‘è‡ªç„¶è¯­è¨€äº¤äº’æ‰€éœ€çš„åŠ¨æ€ã€ä½å»¶è¿ŸæŸ¥è¯¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bff9d09aecf437e8b8b58c3756e5f64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907321&amp;x-signature=qGhUSBUIj6kzu2exQzICEK3JIz4%3D" alt="æœªæ¥å±•æœ›ï¼šAI x  Apache Doris-1.png" loading="lazy"/></p>
<p><strong>å…¨åŸŸæ•°æ®çš„èåˆæ‰“é€šï¼Œæ™ºèƒ½åº”ç”¨ï¼š</strong></p>
<p>è®¸å¤š BI å·¥å…·æ­¢æ­¥äºâ€œçœ‹æŒ‡æ ‡â€ï¼Œå´æœªèƒ½å¼•å¯¼ç®¡ç†è€… â€œç”¨æŒ‡æ ‡å»æ€è€ƒâ€ã€‚æ‰€ä»¥ï¼Œå‡ºå‘ç‚¹ä¸å†æ˜¯æŒ‡æ ‡æœ¬èº«ï¼Œè€Œæ˜¯å…¶èƒŒåå®Œæ•´çš„åˆ†æé€»è¾‘é—­ç¯ã€‚å€ŸåŠ© Apache Doris å°†æŠ€æœ¯â€œéšäºå½¢â€ï¼Œæ„å»ºæ•´åˆé“¶è¡Œå†…éƒ¨ç®¡ç†èŒèƒ½çš„ç»Ÿä¸€é—¨æˆ·ï¼Œç»“åˆå®æ—¶æ ‡ç­¾èƒ½åŠ›ï¼Œåªè®©ä¸€æ¡æ¸…æ™°ã€ä¸“æ³¨çš„ä¸šåŠ¡æ€è€ƒè·¯å¾„æœ€ç»ˆå‘ˆç°åœ¨ç®¡ç†è€…é¢å‰ï¼Œæœ€ç»ˆå®ç°æ•°æ®é©±åŠ¨ä¸šåŠ¡å¢é•¿çš„ç›®æ ‡æ„¿æ™¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f35de43cece48f2b8dc9d5c9bda91e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764907321&amp;x-signature=e1m1haodMa7j1%2BjMd4BN120rQrw%3D" alt="æœªæ¥å±•æœ›ï¼šAI x  Apache Doris-2.png" loading="lazy"/></p>
<p>ä¸ºæ­¤å®‡ä¿¡æœªæ¥å°†ï¼š</p>
<ul>
<li><strong>çºµå‘ä¿¡æ¯æµåŒæºä¸€è‡´ï¼š</strong> ä»¥å…¨é¢çš„æŠ€æœ¯åº•åº§å’Œæ•°æ®æ”¯æŒï¼Œä¿éšœç³»ç»Ÿä¿¡æ¯ä¸€è‡´æ€§ï¼Œæ‰“é€ ä¸€ä½“åŒ–ä¼ä¸šçº§å…¨é¢†åŸŸç®¡ç†ä¸è¿è¥é—¨æˆ·ï¼›</li>
<li><strong>æ¨ªå‘ç®¡ç†åŸŸèåˆè´¯é€šï¼š</strong> é€šè¿‡å„æ¨¡å—èƒ½åŠ›çš„æ·±åº¦æ•´åˆä¸ååŒï¼Œæ‰“é€ ä¼ä¸šç»è¥ã€æ•°æ®è¿è¥ã€äººåŠ›è´¢èµ„ç­‰è‹¥å¹²ä¼ç®¡åœºæ™¯ï¼Œæé«˜è·¨é¢†åŸŸéƒ¨é—¨é—´çš„åä½œæ•ˆç‡ï¼›</li>
<li><strong>æ•æ·è¿­ä»£ã€å…¨åŸŸè¦†ç›–ç®¡ç†éœ€æ±‚ï¼š</strong> å®ç°ä½œä¸šååŒï¼Œæ•æ·è¿­ä»£åº”ç”¨ï¼Œæµç¨‹åŒ–è¿è¥ï¼Œä¸æ–­æ‰“ç£¨ç®¡ç†ç­–ç•¥ï¼Œå¹¶å¯åˆ†äº«åº”ç”¨åˆ°å…¶ä»–ç®¡ç†ç³»ç»Ÿï¼Œæå‡ç®¡ç†æ•ˆç‡å’Œå…ˆè¿›æ€§ï¼›</li>
</ul>
<p>Apache Doris æ­£åœ¨æ„å»ºé¢å‘ AI çš„æ™ºèƒ½æ•°æ®å¹³å°ï¼Œå…¶ MPP æ¶æ„ä¸å‘é‡åŒ–å¼•æ“èƒ½æ”¯æ’‘ Agent å•ä¸€è¯·æ±‚åœ¨æ•°ç§’å†…è§¦å‘çš„æ•°ä¸‡æ¬¡æŸ¥è¯¢ï¼Œè§’è‰²å°†æ‰©å±•è‡³ä¼ä¸šæ•°æ®è®¾æ–½çš„å…³é”®éƒ¨åˆ†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘çš„å˜é‡å»å“ªäº†ï¼ŸJS ä½œç”¨åŸŸå…¥é—¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7577256255083511817</link>    <guid>https://juejin.cn/post/7577256255083511817</guid>    <pubDate>2025-11-28T01:59:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577256255083511817" data-draft-id="7577256255083134985" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘çš„å˜é‡å»å“ªäº†ï¼ŸJS ä½œç”¨åŸŸå…¥é—¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-28T01:59:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ohyeah"/> <meta itemprop="url" content="https://juejin.cn/user/740446536480618"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘çš„å˜é‡å»å“ªäº†ï¼ŸJS ä½œç”¨åŸŸå…¥é—¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/740446536480618/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ohyeah
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T01:59:49.000Z" title="Fri Nov 28 2025 01:59:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ JavaScript çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œ<strong>ä½œç”¨åŸŸ</strong>å’Œ<strong>å˜é‡æå‡</strong>æ˜¯ä¸¤ä¸ªç»•ä¸å¼€çš„æ ¸å¿ƒæ¦‚å¿µã€‚å®ƒä»¬ä¸ä»…å½±å“ç€ä»£ç çš„æ‰§è¡Œé€»è¾‘ï¼Œä¹Ÿå¸¸å¸¸æˆä¸ºåˆå­¦è€…â€œè¸©å‘â€çš„é‡ç¾åŒºã€‚æœ¬æ–‡å°†ç»“åˆå‡ æ®µå…¸å‹ä»£ç ï¼Œä»å®é™…è¿è¡Œç»“æœå‡ºå‘ï¼Œæ¢³ç† JS ä¸­ä½œç”¨åŸŸçš„æ¼”å˜è¿‡ç¨‹ï¼Œé‡ç‚¹è§£é‡Š <strong>var çš„ç¼ºé™·</strong>ã€<strong>let/const çš„æ”¹è¿›</strong>ï¼Œä»¥åŠç°ä»£ JS å¼•æ“å¦‚ä½•é€šè¿‡<strong>æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ç»Ÿä¸€å¤„ç†è¿™ä¸¤ç±»å˜é‡å£°æ˜ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å˜é‡æå‡ï¼šJS çš„â€œå†å²åŒ…è¢±â€</h2>
<p>å…ˆçœ‹è¿™æ®µä»£ç ï¼ˆ<code>1.js</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">showName</span>() <span class="hljs-comment">// âœ… æ­£å¸¸æ‰§è¡Œ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myname) <span class="hljs-comment">// undefined</span>

<span class="hljs-keyword">var</span> myname = <span class="hljs-string">'è·¯æ˜é'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">showName</span>(<span class="hljs-params"/>){
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‡½æ•°showName æ‰§è¡Œäº†'</span>)
}
</code></pre>
<p>è¿™é‡Œä½“ç°äº†ä¸¤ä¸ªå…³é”®ç°è±¡ï¼š</p>
<ul>
<li><strong>å‡½æ•°å£°æ˜æå‡</strong>ï¼š<code>showName</code> ä¸ä»…å£°æ˜è¢«æå‡ï¼Œ<strong>å‡½æ•°ä½“ä¹Ÿè¢«æå‡</strong>ï¼Œå› æ­¤å¯ä»¥åœ¨å®šä¹‰å‰è°ƒç”¨ã€‚</li>
<li><strong>å˜é‡æå‡ï¼ˆä»…å£°æ˜ï¼‰</strong> ï¼š<code>var myname</code> çš„å£°æ˜è¢«æå‡åˆ°é¡¶éƒ¨ï¼Œä½†èµ‹å€¼ä»åœ¨åŸä½ç½®æ‰§è¡Œï¼Œæ‰€ä»¥é¦–æ¬¡ <code>console.log</code> è¾“å‡º <code>undefined</code>ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ç»å…¸çš„ <strong>hoistingï¼ˆå˜é‡æå‡ï¼‰</strong> æœºåˆ¶ã€‚å®ƒæºäº JS å¼•æ“çš„ä¸¤é˜¶æ®µæ‰§è¡Œæ¨¡å‹ï¼š<strong>ç¼–è¯‘é˜¶æ®µ</strong>æ”¶é›†å£°æ˜ï¼Œ<strong>æ‰§è¡Œé˜¶æ®µ</strong>è¿›è¡Œèµ‹å€¼å’Œè°ƒç”¨ã€‚</p>
<blockquote>
<p>âš ï¸ å˜é‡æå‡è™½è§£å†³äº†æ—©æœŸ JS çš„ä½œç”¨åŸŸé—®é¢˜ï¼Œä½†ä¹Ÿå¸¦æ¥äº†<strong>ä¸ç¬¦åˆç›´è§‰çš„è¡Œä¸º</strong>ï¼Œè¢«è§†ä¸ºè¯­è¨€è®¾è®¡ä¸Šçš„ç¼ºé™·ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€ä½œç”¨åŸŸé“¾ï¼šå…¨å±€ vs å±€éƒ¨</h2>
<p>åœ¨ <code>2.js</code> ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> globalVar = <span class="hljs-string">'æˆ‘æ˜¯å…¨å±€å˜é‡'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">myFunction</span>(<span class="hljs-params"/>){
  <span class="hljs-keyword">var</span> localVar = <span class="hljs-string">'æˆ‘æ˜¯å±€éƒ¨å˜é‡'</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(globalVar) <span class="hljs-comment">// âœ… æ‰“å°å…¨å±€å˜é‡</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(localVar)  <span class="hljs-comment">// âœ… æ‰“å°å±€éƒ¨å˜é‡</span>
}

<span class="hljs-title function_">myFunction</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(globalVar) <span class="hljs-comment">// âœ…</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(localVar)  <span class="hljs-comment">// âŒ ReferenceError</span>
</code></pre>
<p>è¿™å±•ç¤ºäº† <strong>ä½œç”¨åŸŸé“¾</strong> çš„æŸ¥æ‰¾è§„åˆ™ï¼š</p>
<ul>
<li>å‡½æ•°å†…éƒ¨ä¼˜å…ˆæŸ¥æ‰¾<strong>å±€éƒ¨ä½œç”¨åŸŸ</strong>ï¼›</li>
<li>è‹¥æœªæ‰¾åˆ°ï¼Œåˆ™æ²¿ä½œç”¨åŸŸé“¾å‘ä¸ŠæŸ¥æ‰¾è‡³<strong>å…¨å±€ä½œç”¨åŸŸ</strong>ï¼›</li>
<li>ä½†<strong>å…¨å±€æ— æ³•è®¿é—®å‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡</strong>ã€‚</li>
</ul>
<p>è¿™æ˜¯ JS ä½œç”¨åŸŸçš„åŸºæœ¬è§„åˆ™ï¼Œä¹Ÿæ˜¯å°è£…å’Œé¿å…å‘½åå†²çªçš„åŸºç¡€ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€var çš„è‡´å‘½ä¼¤ï¼šä¸æ”¯æŒå—çº§ä½œç”¨åŸŸ</h2>
<p>æ¥çœ‹ <code>3.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">'åˆ˜é”¦è‹—'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">showName</span>(<span class="hljs-params"/>){
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name) <span class="hljs-comment">// undefined</span>
  <span class="hljs-keyword">if</span>(<span class="hljs-literal">false</span>){
    <span class="hljs-keyword">var</span> name = <span class="hljs-string">'å¤§å‚çš„è‹—å­'</span>
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name) <span class="hljs-comment">// undefined</span>
}
</code></pre>
<p>å°½ç®¡ <code>if(false)</code> å—æ°¸è¿œä¸ä¼šæ‰§è¡Œï¼Œä½† <code>var name</code> ä»è¢«<strong>æå‡åˆ°å‡½æ•°ä½œç”¨åŸŸé¡¶éƒ¨</strong>ï¼Œå¯¼è‡´å‡½æ•°å†… <code>name</code> è¢«åˆå§‹åŒ–ä¸º <code>undefined</code>ã€‚è¿™æ˜¯å› ä¸º <strong><code>var</code> ä¸æ”¯æŒå—çº§ä½œç”¨åŸŸ</strong>ï¼Œå…¶å£°æ˜ä¼šè¢«æå‡åˆ°æœ€è¿‘çš„å‡½æ•°æˆ–å…¨å±€ä½œç”¨åŸŸã€‚</p>
<p>å¯¹æ¯” <code>4.js</code> ä½¿ç”¨ <code>let</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">'åˆ˜é”¦è‹—'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">showName</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name) <span class="hljs-comment">// 'åˆ˜é”¦è‹—'</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-literal">false</span>) {
    <span class="hljs-keyword">let</span> name = <span class="hljs-string">'å¤§å‚çš„è‹—å­'</span> <span class="hljs-comment">// âŒ ä¸ä¼šå½±å“å¤–å±‚</span>
  }
}
</code></pre>
<p>ç”±äº <code>let</code> å…·æœ‰<strong>å—çº§ä½œç”¨åŸŸ</strong>ï¼Œ<code>if</code> å†…çš„ <code>name</code> ä»…åœ¨è¯¥å—ä¸­æœ‰æ•ˆï¼Œä¸ä¼šæ±¡æŸ“å‡½æ•°ä½œç”¨åŸŸï¼Œå› æ­¤å¤–å±‚ä»èƒ½æ­£ç¡®è®¿é—®å…¨å±€å˜é‡ã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€let/const å¦‚ä½•è§£å†³æå‡é—®é¢˜ï¼Ÿ</h2>
<p><code>8.js</code> å±•ç¤ºäº†ä¸€ä¸ªå…³é”®ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">name</span> = <span class="hljs-string">'åˆ˜é”¦è‹—'</span>

{
  console.log(name) // âŒ ReferenceError: Cannot access 'name' before initialization
  let <span class="hljs-attr">name</span> = <span class="hljs-string">'å¤§å‚çš„è‹—å­'</span>
}
</code></pre>
<p>è¿™é‡ŒæŠ¥é”™å¹¶éå› ä¸ºå˜é‡æœªå£°æ˜ï¼Œè€Œæ˜¯è¿›å…¥äº† <strong>æš‚æ—¶æ€§æ­»åŒºï¼ˆTemporal Dead Zone, TDZï¼‰</strong> ã€‚<br/>
<code>let/const</code> è™½ç„¶ä¹Ÿä¼šâ€œæå‡â€ï¼Œä½†<strong>ä¸ä¼šåƒ var é‚£æ ·åˆå§‹åŒ–ä¸º undefined</strong>ï¼Œè€Œæ˜¯åœ¨å£°æ˜å‰å¤„äºä¸å¯è®¿é—®çŠ¶æ€ã€‚</p>
<blockquote>
<p>è¿™æ­£æ˜¯ ES6 å¯¹å˜é‡æå‡ç¼ºé™·çš„ä¿®æ­£ï¼š<strong>æå‡å­˜åœ¨ï¼Œä½†ç¦æ­¢æå‰è®¿é—®</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">äº”ã€æ‰§è¡Œä¸Šä¸‹æ–‡è§†è§’ï¼šå˜é‡ç¯å¢ƒ vs è¯æ³•ç¯å¢ƒ</h2>
<p>ç°ä»£ JS å¼•æ“ï¼ˆå¦‚ V8ï¼‰é€šè¿‡ <strong>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰</strong> ç»Ÿä¸€ç®¡ç†å˜é‡ï¼š</p>
<ul>
<li><strong>å˜é‡ç¯å¢ƒ</strong> ï¼šå­˜æ”¾ <code>var</code> å£°æ˜çš„å˜é‡ã€‚</li>
<li><strong>è¯æ³•ç¯å¢ƒ</strong> ï¼šå­˜æ”¾ <code>let/const</code> å£°æ˜çš„å˜é‡ï¼Œå¹¶æ”¯æŒ<strong>å—çº§ä½œç”¨åŸŸæ ˆç»“æ„</strong>ã€‚</li>
</ul>
<p>ä»¥ <code>7.js</code> ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>){
  <span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>
  <span class="hljs-keyword">let</span> b = <span class="hljs-number">2</span>
  {
    <span class="hljs-keyword">let</span> b = <span class="hljs-number">3</span>  <span class="hljs-comment">// æ–°çš„ bï¼Œä¸å¤–å±‚æ— å…³</span>
    <span class="hljs-keyword">var</span> c = <span class="hljs-number">4</span>
    <span class="hljs-keyword">let</span> d = <span class="hljs-number">5</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a) <span class="hljs-comment">// 1ï¼ˆä»å˜é‡ç¯å¢ƒä¸­æ‰¾åˆ°ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b) <span class="hljs-comment">// 3ï¼ˆå½“å‰å—çº§ä½œç”¨åŸŸæ ˆé¡¶ï¼‰</span>
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b) <span class="hljs-comment">// 2ï¼ˆå—çº§ä½œç”¨åŸŸå‡ºæ ˆï¼Œæ¢å¤å¤–å±‚ bï¼‰</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c) <span class="hljs-comment">// 4ï¼ˆvar æå‡åˆ°å‡½æ•°ä½œç”¨åŸŸï¼‰</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(d) <span class="hljs-comment">// âŒ ReferenceErrorï¼ˆd å·²éšå—çº§ä½œç”¨åŸŸé”€æ¯ï¼‰</span>
}
</code></pre>
<p>è¿™é‡Œçš„å…³é”®åœ¨äºï¼š</p>
<ul>
<li><code>let</code> åœ¨å—çº§ä½œç”¨åŸŸä¸­åˆ›å»º<strong>ç‹¬ç«‹çš„ç»‘å®š</strong>ï¼Œå—æ‰§è¡Œå®Œåè‡ªåŠ¨å‡ºæ ˆé”€æ¯ï¼›</li>
<li><code>var</code> æ— è§†å—çº§ä½œç”¨åŸŸï¼Œå§‹ç»ˆå±äºå‡½æ•°æˆ–å…¨å±€ä½œç”¨åŸŸï¼›</li>
<li>å¼•æ“é€šè¿‡<strong>è¯æ³•ç¯å¢ƒçš„æ ˆç»“æ„</strong>å®ç°äº†å¯¹å—çº§ä½œç”¨åŸŸçš„æ”¯æŒã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">å…­ã€ä¸ºä»€ä¹ˆæ—©æœŸ JS è¦è¿™æ ·è®¾è®¡ï¼Ÿ</h2>
<p><strong>JavaScript æœ€åˆæ˜¯â€œKPI é¡¹ç›®â€</strong> ï¼Œè®¾è®¡å‘¨æœŸæçŸ­ï¼Œç›®æ ‡åªæ˜¯ç»™ç½‘é¡µåŠ ç‚¹åŠ¨æ€æ•ˆæœã€‚ä¸ºäº†å¿«é€Ÿå®ç°ï¼Œè®¾è®¡è€…é€‰æ‹©äº†æœ€ç®€å•çš„æ–¹æ¡ˆï¼š</p>
<ul>
<li>ä¸å¼•å…¥å¤æ‚çš„å—çº§ä½œç”¨åŸŸï¼›</li>
<li>ç”¨â€œå˜é‡æå‡â€ç»Ÿä¸€å¤„ç†ä½œç”¨åŸŸé—®é¢˜ï¼›</li>
<li>ç”¨å‡½æ•°æ¨¡æ‹Ÿâ€œç±»â€ï¼Œè§„é¿é¢å‘å¯¹è±¡çš„å¤æ‚æ€§ã€‚</li>
</ul>
<p>è¿™ç§è®¾è®¡åœ¨å½“æ—¶å¤Ÿç”¨ï¼Œä½†éšç€ JS åº”ç”¨å¤æ‚åº¦é£™å‡ï¼Œ<code>var</code> çš„ç¼ºé™·æ—¥ç›Šå‡¸æ˜¾â€”â€”å˜é‡è¦†ç›–ã€ç”Ÿå‘½å‘¨æœŸæ··ä¹±ã€éš¾ä»¥è°ƒè¯•ã€‚</p>
<p>ES6 å¼•å…¥ <code>let/const</code> å’Œå—çº§ä½œç”¨åŸŸï¼Œæ­£æ˜¯å¯¹è¿™ä¸€å†å²é—®é¢˜çš„ä¿®å¤ã€‚</p>
<hr/>
<h2 data-id="heading-6">ç»“è¯­ï¼šæ‹¥æŠ± let/constï¼Œç†è§£æ‰§è¡Œä¸Šä¸‹æ–‡</h2>
<p>å¦‚ä»Šï¼Œæˆ‘ä»¬åº”<strong>ä¼˜å…ˆä½¿ç”¨ <code>let</code> å’Œ <code>const</code></strong>ï¼Œé¿å… <code>var</code> å¸¦æ¥çš„é™·é˜±ã€‚åŒæ—¶ï¼Œç†è§£ JS å¼•æ“å¦‚ä½•é€šè¿‡ <strong>å˜é‡ç¯å¢ƒ + è¯æ³•ç¯å¢ƒ</strong> çš„åŒè½¨æœºåˆ¶ï¼Œå…¼å®¹æ–°æ—§è¯­æ³•ï¼Œæ˜¯æ·±å…¥æŒæ¡ä½œç”¨åŸŸçš„å…³é”®ã€‚</p>
<blockquote>
<p>JavaScript çš„æ¼”è¿›å‘Šè¯‰æˆ‘ä»¬ï¼š<strong>å¥½çš„è¯­è¨€è®¾è®¡ï¼Œæ—¢è¦å‘å‰å…¼å®¹ï¼Œä¹Ÿè¦å‹‡äºä¿®æ­£è¿‡å»çš„é”™è¯¯</strong>ã€‚</p>
</blockquote>
<p>é€šè¿‡è¿™å‡ æ®µå°ä»£ç ï¼Œæˆ‘ä»¬ä¸ä»…çœ‹åˆ°äº†å˜é‡æå‡çš„â€œå‘â€ï¼Œæ›´è§è¯äº† JS å¦‚ä½•åœ¨ä¿æŒçµæ´»æ€§çš„åŒæ—¶ï¼Œé€æ­¥èµ°å‘ä¸¥è°¨ä¸è§„èŒƒã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ ç†æ¸…æ€è·¯ï¼Œåœ¨æ˜é‡‘ç¤¾åŒºåˆ†äº«ä½ çš„æˆé•¿ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«æœåŠ¡å™¨ï¼å°ç¨‹åºçº¯å‰ç«¯â€œå›¾ç‰‡è½¬ PDFâ€å·¥å…·ï¼Œéšç§å®‰å…¨åˆé«˜æ•ˆ]]></title>    <link>https://juejin.cn/post/7577239264310263808</link>    <guid>https://juejin.cn/post/7577239264310263808</guid>    <pubDate>2025-11-28T02:11:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577239264310263808" data-draft-id="7577284771446800424" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«æœåŠ¡å™¨ï¼å°ç¨‹åºçº¯å‰ç«¯â€œå›¾ç‰‡è½¬ PDFâ€å·¥å…·ï¼Œéšç§å®‰å…¨åˆé«˜æ•ˆ"/> <meta itemprop="keywords" content="å¾®ä¿¡å°ç¨‹åº,å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-28T02:11:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°çš®è™¾"/> <meta itemprop="url" content="https://juejin.cn/user/1468603263091623"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«æœåŠ¡å™¨ï¼å°ç¨‹åºçº¯å‰ç«¯â€œå›¾ç‰‡è½¬ PDFâ€å·¥å…·ï¼Œéšç§å®‰å…¨åˆé«˜æ•ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1468603263091623/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°çš®è™¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T02:11:38.000Z" title="Fri Nov 28 2025 02:11:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. èƒŒæ™¯ä¸ç—›ç‚¹ï¼šçº¯å‰ç«¯å®è·µçš„åŠ¨åŠ›</h2>
<p>åœ¨å¼€å‘å°ç¨‹åºæ—¶ï¼Œå®ç°å¦‚â€œå›¾ç‰‡è½¬ PDFâ€è¿™æ ·çš„åŠŸèƒ½æ—¶ï¼Œå¸¸å¸¸é¢ä¸´ä»¥ä¸‹æŒ‘æˆ˜ï¼š</p>
<ul>
<li><strong>éšç§æ‹…å¿§</strong>ï¼šå°†å›¾ç‰‡ä¸Šä¼ åˆ°æœåŠ¡å™¨è¿›è¡Œè½¬æ¢ï¼Œç”¨æˆ·æ‹…å¿ƒå›¾ç‰‡å†…å®¹æ³„éœ²ã€‚å¯¹äºä¸ªäººè¯ä»¶ã€ç§å¯†ç…§ç‰‡ç­‰æ•æ„Ÿå†…å®¹ï¼Œè¿™ä¸€é¡¾è™‘å°¤ä¸ºçªå‡ºã€‚</li>
<li><strong>ç½‘ç»œä¾èµ–ä¸æ•ˆç‡</strong>ï¼šè½¬æ¢è¿‡ç¨‹éœ€è¦é¢‘ç¹ä¸æœåŠ¡å™¨äº¤äº’ï¼Œåœ¨å¼±ç½‘ç¯å¢ƒä¸‹é€Ÿåº¦æ…¢ã€ä¸ç¨³å®šï¼Œç”šè‡³å¯èƒ½å› ä¸Šä¼ å¤§æ–‡ä»¶è€Œå¤±è´¥ã€‚</li>
<li><strong>æœåŠ¡å™¨æˆæœ¬</strong>ï¼šæ¯ä¸€æ¬¡è½¬æ¢éƒ½æ„å‘³ç€æœåŠ¡å™¨èµ„æºçš„æ¶ˆè€—ï¼ˆå­˜å‚¨ã€è®¡ç®—ã€å¸¦å®½ï¼‰ï¼Œå¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œæˆæœ¬ä¸å®¹å¿½è§†ã€‚</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹ï¼Œæˆ‘ä»¬æ¢ç´¢äº†ä¸€ä¸ªæ›´ä¼˜çš„å®ç°è·¯å¾„ï¼š<strong>çº¯å‰ç«¯ã€åœ¨å°ç¨‹åºæœ¬åœ°å®Œæˆå›¾ç‰‡åˆ° PDF çš„è½¬æ¢</strong>ã€‚</p>
<h2 data-id="heading-1">2. æ ¸å¿ƒæ€è·¯ï¼šæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸ <code>pdf-lib</code> çš„å·§å¦™ç»“åˆ</h2>
<p>åœ¨å°ç¨‹åºä¸­å®ç°çº¯å‰ç«¯å›¾ç‰‡è½¬ PDFï¼Œæˆ‘ä»¬çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š</p>
<ol>
<li><strong>å›¾ç‰‡æœ¬åœ°åŒ–å¤„ç†</strong>ï¼šå……åˆ†åˆ©ç”¨å°ç¨‹åºå¼ºå¤§çš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿèƒ½åŠ›ï¼Œå°†ç”¨æˆ·é€‰æ‹©çš„å›¾ç‰‡è¯»å–åˆ°æœ¬åœ°ä¸´æ—¶è·¯å¾„ã€‚</li>
<li><strong>PDF æ–‡æ¡£æ„å»º</strong>ï¼šå¼•å…¥åŠŸèƒ½ä¸°å¯Œçš„ JavaScript åº“ <code>pdf-lib</code>ï¼Œåœ¨å°ç¨‹åºè¿è¡Œæ—¶ç›´æ¥åœ¨å‰ç«¯ç¯å¢ƒåˆ›å»ºå’Œæ“ä½œ PDF æ–‡ä»¶ã€‚</li>
<li><strong>æœ€ç»ˆæ–‡ä»¶ä¿å­˜</strong>ï¼šå°† <code>pdf-lib</code> ç”Ÿæˆçš„ PDF æ•°æ®æµä¿å­˜ä¸ºæœ¬åœ°æ–‡ä»¶ï¼Œä¾›ç”¨æˆ·ç›´æ¥é¢„è§ˆæˆ–åˆ†äº«ã€‚</li>
</ol>
<p>è¿™ç§æ–¹å¼è®©æ•´ä¸ªè½¬æ¢è¿‡ç¨‹éƒ½åœ¨ç”¨æˆ·çš„å°ç¨‹åºæ²™ç®±ç¯å¢ƒå†…å®Œæˆï¼Œ<strong>å›¾ç‰‡æ•°æ®ä¸ä¼šç¦»å¼€ç”¨æˆ·æ‰‹æœº</strong>ï¼Œæå¤§ä¿éšœäº†æ•°æ®éšç§å’Œå®‰å…¨æ€§ï¼ŒåŒæ—¶æ˜¾è‘—æå‡äº†è½¬æ¢æ•ˆç‡å¹¶é™ä½äº†æœåŠ¡å™¨æˆæœ¬ã€‚</p>
<h2 data-id="heading-2">3. æŠ€æœ¯æ ¸å¿ƒï¼š<code>pdf-lib</code> çš„å¼•å…¥ä¸åº”ç”¨</h2>
<p><code>pdf-lib</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„çº¯ JavaScript PDF åº“ï¼Œæ”¯æŒåœ¨å¤šç§ JavaScript ç¯å¢ƒä¸‹åˆ›å»ºå’Œä¿®æ”¹ PDF æ–‡ä»¶ï¼Œå®Œç¾å¥‘åˆå°ç¨‹åºè¿™ç§å‰ç«¯åº”ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-3">3.1 åº“çš„å¼•å…¥</h3>
<p>ä½ éœ€è¦å°† <code>pdf-lib</code> çš„å°ç¨‹åºå…¼å®¹ç‰ˆæœ¬ï¼ˆé€šå¸¸æ˜¯ <code>pdf-lib.min.js</code>ï¼‰æ”¾ç½®åœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸­ï¼Œå¹¶é€šè¿‡ <code>require</code> å¼•å…¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">PDFDocument</span>, degrees, <span class="hljs-title class_">PageSizes</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./pdf-lib.min.js'</span>);
<span class="hljs-keyword">const</span> fs = wx.<span class="hljs-title function_">getFileSystemManager</span>(); <span class="hljs-comment">// å°ç¨‹åºæ–‡ä»¶ç®¡ç†å™¨å®ä¾‹</span>
</code></pre>
<h3 data-id="heading-4">3.2 è½¬æ¢é€»è¾‘æ¦‚è§ˆ</h3>
<p>æ•´ä¸ªå›¾ç‰‡è½¬ PDF çš„æµç¨‹å¯åˆ†è§£ä¸ºä»¥ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š</p>
<ol>
<li><strong>å›¾ç‰‡é¢„å¤„ç†</strong>ï¼šè·å–æ¯å¼ å›¾ç‰‡çš„å°ºå¯¸ã€ç±»å‹ (<code>wx.getImageInfo</code>)ï¼Œå¹¶å°†å…¶è¯»å–ä¸º Base64 æ ¼å¼ (<code>fs.readFile</code>)ï¼Œè¿™æ˜¯ <code>pdf-lib</code> åµŒå…¥å›¾ç‰‡æ‰€éœ€çš„æ ‡å‡†æ•°æ®æ ¼å¼ã€‚</li>
<li><strong>åˆ›å»º PDF æ–‡æ¡£</strong>ï¼šåˆå§‹åŒ–ä¸€ä¸ªç©ºçš„ <code>PDFDocument</code> å¯¹è±¡ã€‚</li>
<li><strong>é€é¡µæ·»åŠ å›¾ç‰‡</strong>ï¼šéå†æ‰€æœ‰å›¾ç‰‡ï¼Œä¸ºæ¯å¼ å›¾ç‰‡åˆ›å»ºä¸€ä¸ªæ–°çš„ PDF é¡µé¢ã€‚æ ¹æ®å›¾ç‰‡çš„åŸå§‹å°ºå¯¸å’Œç±»å‹ï¼Œå°†å…¶åµŒå…¥åˆ° PDF ä¸­ï¼Œå¹¶è¿›è¡Œæ™ºèƒ½ç¼©æ”¾ã€å±…ä¸­ã€‚<strong>å¯¹äºæ¨ªå‘å›¾ç‰‡ï¼Œè¿˜ä¼šè‡ªåŠ¨æ—‹è½¬é¡µé¢ 90 åº¦ä»¥æ›´å¥½åœ°é€‚åº” A4 çº¸å¼ ã€‚</strong></li>
<li><strong>ç”Ÿæˆä¸ä¿å­˜</strong>ï¼šå°†æ„å»ºå¥½çš„ PDF æ–‡æ¡£ä¿å­˜ä¸º Base64 ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå†é€šè¿‡å°ç¨‹åºæ–‡ä»¶ç³»ç»Ÿçš„ <code>fs.writeFile</code> æ¥å£ï¼Œå†™å…¥åˆ°æœ¬åœ°çš„ä¸´æ—¶æ–‡ä»¶è·¯å¾„ã€‚</li>
<li><strong>è¿”å›ç»“æœ</strong>ï¼šå°†ç”Ÿæˆçš„ PDF æ–‡ä»¶æœ¬åœ°è·¯å¾„è¿”å›ç»™ä¸šåŠ¡å±‚ï¼Œç”¨äºåç»­çš„é¢„è§ˆæˆ–åˆ†äº«ã€‚</li>
</ol>
<h2 data-id="heading-5">4. æ ¸å¿ƒä»£ç ï¼š<code>img2pdf.js</code></h2>
<p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬å¸®å°å¿™å·¥å…·ç®±å®ç°å›¾ç‰‡è½¬ PDF åŠŸèƒ½çš„æ ¸å¿ƒæºä»£ç ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">PDFDocument</span>, degrees, <span class="hljs-title class_">PageSizes</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./pdf-lib.min.js'</span>);
<span class="hljs-keyword">const</span> fs = wx.<span class="hljs-title function_">getFileSystemManager</span>()
<span class="hljs-comment">/**
 * æŠŠå›¾ç‰‡è½¬æˆpdf
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} urls å›¾ç‰‡urlæ•°ç»„
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">String</span>} pdfUrl pdfæ–‡ä»¶url
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">img2pdf</span>(<span class="hljs-params">urls</span>) {
	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> urls == <span class="hljs-string">'string'</span>) {
		urls = [urls]
	}

	<span class="hljs-comment">// å›¾ç‰‡ä¿¡æ¯</span>
	<span class="hljs-keyword">const</span> imageInfo = urls.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">url</span>) =&gt;</span> {
		<span class="hljs-keyword">return</span> wx.<span class="hljs-title function_">getImageInfo</span>({
			<span class="hljs-attr">src</span>: url
		});
	});
	<span class="hljs-keyword">const</span> imageInfoRes = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(imageInfo);
	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(imageInfoRes);

	<span class="hljs-comment">// å›¾ç‰‡base64</span>
	<span class="hljs-keyword">const</span> imageBase64 = urls.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">url</span>) =&gt;</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-title function_">readFile</span>(url, <span class="hljs-string">"base64"</span>);
	});
	<span class="hljs-keyword">const</span> imageBase64Res = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(imageBase64);
	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(imageBase64Res);

	<span class="hljs-keyword">const</span> pdfDoc = <span class="hljs-keyword">await</span> <span class="hljs-title class_">PDFDocument</span>.<span class="hljs-title function_">create</span>();

	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; imageInfoRes.<span class="hljs-property">length</span>; i++) {
		<span class="hljs-keyword">const</span> {
			type,
			width,
			height
		} = imageInfoRes[i];
		<span class="hljs-keyword">let</span> pdfImage = <span class="hljs-string">""</span>;
		<span class="hljs-keyword">if</span> (type === <span class="hljs-string">'jpeg'</span>) {
			pdfImage = <span class="hljs-keyword">await</span> pdfDoc.<span class="hljs-title function_">embedJpg</span>(imageBase64Res[i]);
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'png'</span>) {
			pdfImage = <span class="hljs-keyword">await</span> pdfDoc.<span class="hljs-title function_">embedPng</span>(imageBase64Res[i]);
		}

		<span class="hljs-keyword">const</span> page = pdfDoc.<span class="hljs-title function_">addPage</span>(<span class="hljs-title class_">PageSizes</span>.<span class="hljs-property">A4</span>);
		<span class="hljs-keyword">const</span> {
			<span class="hljs-attr">width</span>: pageWidth,
			<span class="hljs-attr">height</span>: pageHeight
		} = page.<span class="hljs-title function_">getSize</span>(); <span class="hljs-comment">// è·å–é¡µé¢å°ºå¯¸</span>

		<span class="hljs-keyword">let</span> drawOptions = {};

		<span class="hljs-comment">// å¦‚æœå›¾ç‰‡æ˜¯å®½å¤§äºé«˜ï¼Œåˆ™æ—‹è½¬</span>
		<span class="hljs-keyword">if</span> (width &gt; height) {
			<span class="hljs-comment">// é¡µé¢æ—‹è½¬åï¼Œå¯ç”¨äºç»˜åˆ¶çš„"å®½åº¦"å®é™…ä¸Šæ˜¯åŸå§‹é¡µé¢çš„é«˜åº¦ï¼Œ"é«˜åº¦"æ˜¯åŸå§‹é¡µé¢çš„å®½åº¦</span>
			<span class="hljs-keyword">const</span> scaled = pdfImage.<span class="hljs-title function_">scaleToFit</span>(pageHeight, pageWidth); <span class="hljs-comment">// æ³¨æ„å‚æ•°é¡ºåºå› ä¸ºé¡µé¢æ—‹è½¬äº†</span>

			drawOptions = {
				<span class="hljs-comment">// x: scaled.height + (pageWidth - scaled.height) / 2,   // æ³¨æ„è¿™é‡Œç”¨çš„æ˜¯ scaled.height</span>
				<span class="hljs-attr">x</span>: (pageWidth - scaled.<span class="hljs-property">height</span>) / <span class="hljs-number">2</span>,
				<span class="hljs-attr">y</span>: (pageHeight - scaled.<span class="hljs-property">width</span>) / <span class="hljs-number">2</span> + scaled.<span class="hljs-property">width</span>,
				<span class="hljs-attr">width</span>: scaled.<span class="hljs-property">width</span>,
				<span class="hljs-attr">height</span>: scaled.<span class="hljs-property">height</span>,
				<span class="hljs-attr">rotate</span>: <span class="hljs-title function_">degrees</span>(<span class="hljs-number">270</span>),
			};
			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'drawOptions'</span>, drawOptions);
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">// å›¾ç‰‡æ˜¯çºµå‘æˆ–æ–¹å½¢çš„</span>
			<span class="hljs-keyword">const</span> scaled = pdfImage.<span class="hljs-title function_">scaleToFit</span>(pageWidth, pageHeight);
			drawOptions = {
				<span class="hljs-attr">x</span>: (pageWidth - scaled.<span class="hljs-property">width</span>) / <span class="hljs-number">2</span>, <span class="hljs-comment">// å±…ä¸­ X</span>
				<span class="hljs-attr">y</span>: (pageHeight - scaled.<span class="hljs-property">height</span>) / <span class="hljs-number">2</span>, <span class="hljs-comment">// å±…ä¸­ Y</span>
				<span class="hljs-attr">width</span>: scaled.<span class="hljs-property">width</span>,
				<span class="hljs-attr">height</span>: scaled.<span class="hljs-property">height</span>,
			};
		}
		page.<span class="hljs-title function_">drawImage</span>(pdfImage, drawOptions);
	}

	<span class="hljs-comment">// 3. è·å– PDF çš„ Uint8Array</span>
	<span class="hljs-keyword">const</span> docBase64 = <span class="hljs-keyword">await</span> pdfDoc.<span class="hljs-title function_">saveAsBase64</span>();
	<span class="hljs-keyword">const</span> timestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
	<span class="hljs-keyword">const</span> pdfPath = <span class="hljs-keyword">await</span> <span class="hljs-title function_">base64ToFile</span>(docBase64, <span class="hljs-string">`/<span class="hljs-subst">${timestamp}</span>.pdf`</span>);


	<span class="hljs-keyword">return</span> pdfPath;
}

<span class="hljs-comment">/**
 * base64è½¬æœ¬åœ°æ–‡ä»¶
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} base64 base64å­—ç¬¦ä¸²
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} fileName  æ–‡ä»¶å
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise</span>} Promise æ–‡ä»¶è·¯å¾„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">base64ToFile</span>(<span class="hljs-params">base64, fileName</span>) {
	<span class="hljs-keyword">const</span> {
		promise,
		resolve,
		reject
	} = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">withResolvers</span>();
	<span class="hljs-keyword">const</span> filePath = wx.<span class="hljs-property">env</span>.<span class="hljs-property">USER_DATA_PATH</span> + fileName;
	fs.<span class="hljs-title function_">writeFile</span>({
		filePath,
		<span class="hljs-attr">data</span>: base64,
		<span class="hljs-attr">encoding</span>: <span class="hljs-string">"base64"</span>,
		<span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
			<span class="hljs-title function_">resolve</span>(filePath)
		},
		<span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
			<span class="hljs-title function_">reject</span>(err)
		}
	});
	<span class="hljs-keyword">return</span> promise;
}

<span class="hljs-comment">/**
 * ä½¿ç”¨Promiseè¯»å–æ–‡ä»¶
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} filePath æ–‡ä»¶è·¯å¾„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} encoding æ–‡ä»¶ç¼–ç 
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise</span>} Promiseå¯¹è±¡
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">readFile</span>(<span class="hljs-params">filePath, encoding = <span class="hljs-string">'utf8'</span></span>) {
	<span class="hljs-keyword">const</span> {
		promise,
		resolve,
		reject
	} = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">withResolvers</span>();
	fs.<span class="hljs-title function_">readFile</span>({
		filePath,
		encoding,
		<span class="hljs-title function_">success</span>(<span class="hljs-params">fileRes</span>) {
			<span class="hljs-title function_">resolve</span>(fileRes.<span class="hljs-property">data</span>)
		},
		<span class="hljs-title function_">fail</span>(<span class="hljs-params">err</span>) {
			<span class="hljs-title function_">reject</span>(err)
		}
	});
	<span class="hljs-keyword">return</span> promise;
}
</code></pre>
<h2 data-id="heading-6">5. å°ç¨‹åºç«¯åº”ç”¨ç¤ºä¾‹</h2>
<p>åœ¨é¡µé¢ä¸­ï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„äº¤äº’å®Œæˆè½¬æ¢ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// pages/image-to-pdf/index.js</span>
<span class="hljs-keyword">import</span> { img2pdf } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../utils/img2pdf'</span>; <span class="hljs-comment">// å¼•å…¥è½¬æ¢å·¥å…·</span>

<span class="hljs-title class_">Page</span>({
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">selectedImages</span>: [], <span class="hljs-comment">// ç”¨æˆ·é€‰æ‹©çš„å›¾ç‰‡ä¸´æ—¶è·¯å¾„æ•°ç»„</span>
    <span class="hljs-attr">pdfPath</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>
  },

  <span class="hljs-comment">// è§¦å‘å›¾ç‰‡é€‰æ‹©</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">chooseImage</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> { tempFiles } = <span class="hljs-keyword">await</span> wx.<span class="hljs-title function_">chooseMedia</span>({
      <span class="hljs-attr">count</span>: <span class="hljs-number">9</span>, <span class="hljs-comment">// æœ€å¤šé€‰æ‹© 9 å¼ å›¾ç‰‡</span>
      <span class="hljs-attr">mediaType</span>: [<span class="hljs-string">'image'</span>],
      <span class="hljs-attr">sizeType</span>: [<span class="hljs-string">'original'</span>, <span class="hljs-string">'compressed'</span>], <span class="hljs-comment">// å¯ä»¥é€‰æ‹©åŸå›¾æˆ–å‹ç¼©å›¾</span>
      <span class="hljs-attr">sourceType</span>: [<span class="hljs-string">'album'</span>, <span class="hljs-string">'camera'</span>],
    });
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({ <span class="hljs-attr">selectedImages</span>: tempFiles.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> file.<span class="hljs-property">tempFilePath</span>) });
  },

  <span class="hljs-comment">// æ‰§è¡Œå›¾ç‰‡è½¬ PDF è½¬æ¢</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">convertToPdf</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">selectedImages</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      wx.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">'è¯·å…ˆé€‰æ‹©å›¾ç‰‡'</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span> });
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({ <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span> });
    wx.<span class="hljs-title function_">showLoading</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">'è½¬æ¢ä¸­...'</span> });

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> pdfFilePath = <span class="hljs-keyword">await</span> <span class="hljs-title function_">img2pdf</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">selectedImages</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({ <span class="hljs-attr">pdfPath</span>: pdfFilePath });
      wx.<span class="hljs-title function_">hideLoading</span>();
      wx.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">'è½¬æ¢æˆåŠŸï¼'</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'success'</span> });
      
      <span class="hljs-comment">// è½¬æ¢æˆåŠŸåï¼Œè‡ªåŠ¨æ‰“å¼€ PDF é¢„è§ˆ</span>
      wx.<span class="hljs-title function_">openDocument</span>({
        <span class="hljs-attr">filePath</span>: pdfFilePath,
        <span class="hljs-attr">fileType</span>: <span class="hljs-string">'pdf'</span>,
        <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰“å¼€ PDF æˆåŠŸ'</span>, res),
        <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ‰“å¼€ PDF å¤±è´¥'</span>, err)
      });

    } <span class="hljs-keyword">catch</span> (error) {
      wx.<span class="hljs-title function_">hideLoading</span>();
      wx.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">'è½¬æ¢å¤±è´¥ï¼'</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'error'</span> });
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å›¾ç‰‡è½¬ PDF å‘ç”Ÿé”™è¯¯'</span>, error);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({ <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span> });
    }
  }
})
</code></pre>
<h2 data-id="heading-7">6. ç»éªŒæ€»ç»“ä¸æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p><strong>æ–‡ä»¶ä½“ç§¯ä¸æ€§èƒ½</strong>ï¼š</p>
<ul>
<li><code>pdf-lib</code> åº“æœ¬èº«æœ‰ä¸€å®šä½“ç§¯ï¼ˆé€šå¸¸åœ¨å‡ ç™¾ KBï¼‰ï¼Œä¼šå¢åŠ å°ç¨‹åºåŒ…ä½“å¤§å°ï¼Œæˆ‘ä»¬æ˜¯ä½¿ç”¨åˆ†åŒ…ï¼Œæ‰€ä»¥ä¸å½±å“ä¸»åŒ…ã€‚</li>
<li>å›¾ç‰‡æ•°é‡è¶Šå¤šã€åˆ†è¾¨ç‡è¶Šé«˜ï¼Œè½¬æ¢è€—æ—¶è¶Šé•¿ï¼Œå†…å­˜å ç”¨è¶Šå¤§ã€‚å»ºè®®åœ¨é€‰æ‹©å›¾ç‰‡æ—¶æç¤ºç”¨æˆ·åˆç†æ•°é‡æˆ–é€‚å½“å‹ç¼©ã€‚</li>
<li>pdfæ¨ªå‘å›¾ç‰‡æ—‹è½¬éœ€è¦é¢å¤–è®¡ç®—å’Œå¤„ç†ï¼Œå¯èƒ½ä¼šç•¥å¾®å¢åŠ å¤æ‚æ€§ï¼Œå¦‚æœè§‰å¾—å¤æ‚ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ¤æ–­å›¾ç‰‡æ˜¯å¦æ˜¯çºµå‘ï¼Œå¦‚æœæ˜¯æ¨ªå‘ä½¿ç”¨canvasæ—‹è½¬å›¾ç‰‡ï¼Œé€»è¾‘ä¸Šå°±æ¯•ç«Ÿç®€å•äº†ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>Promise.withResolvers()</code> å…¼å®¹æ€§</strong>ï¼š</p>
<ul>
<li>ä»£ç ä½¿ç”¨äº† <code>Promise.withResolvers()</code>ï¼Œç›®å‰å¤§å¤šæ•°å°ç¨‹åºç¯å¢ƒå’Œæµè§ˆå™¨ä¸­<strong>å…¼å®¹æ€§å¯èƒ½ä¸å¥½</strong>ï¼Œæˆ‘è‡ªå·±åšäº†å…¼å®¹ã€‚</li>
</ul>
</li>
<li>
<p><strong>æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿé™åˆ¶</strong>ï¼š</p>
<ul>
<li><code>wx.env.USER_DATA_PATH</code> è·¯å¾„ä¸‹çš„æ–‡ä»¶æ˜¯å°ç¨‹åºæ²™ç®±ç¯å¢ƒç‰¹æœ‰çš„ï¼Œç”¨æˆ·æ— æ³•ç›´æ¥åœ¨ç³»ç»Ÿæ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰¾åˆ°ã€‚</li>
<li>ç”Ÿæˆçš„æ–‡ä»¶æ˜¯ä¸´æ—¶æ–‡ä»¶ï¼Œå°ç¨‹åºå…³é—­æˆ–é•¿æ—¶é—´ä¸ç”¨å¯èƒ½è¢«ç³»ç»Ÿæ¸…ç†ã€‚å¦‚æœéœ€è¦é•¿æœŸä¿å­˜ï¼Œéœ€å¼•å¯¼ç”¨æˆ·é€šè¿‡ <code>wx.saveFile</code> (ä¿å­˜åˆ°ç›¸å†Œæˆ–æœ¬åœ°æ–‡ä»¶) æˆ–ä¸Šä¼ äº‘å­˜å‚¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>å›¾ç‰‡ç±»å‹æ”¯æŒ</strong>ï¼š
<code>pdf-lib</code> ä¸»è¦æ”¯æŒ JPEG å’Œ PNG æ ¼å¼ã€‚å…¶ä»–æ ¼å¼ï¼ˆå¦‚ WebPã€GIFï¼‰éœ€è¦å…ˆè½¬æ¢ä¸º JPEG/PNG å†è¿›è¡ŒåµŒå…¥ï¼Œå¯ä»¥åˆ©ç”¨canvaså®ç°ï¼Œåé¢ä¼šåˆ†äº«ã€‚</p>
</li>
</ol>
<h2 data-id="heading-8">å†™åœ¨æœ€å</h2>
<p>çº¯å‰ç«¯å®ç°â€œå›¾ç‰‡è½¬ PDFâ€åŠŸèƒ½ï¼Œä¸ä»…æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œæ›´é‡è¦çš„æ˜¯æœ‰æ•ˆä¿æŠ¤äº†ç”¨æˆ·çš„æ•°å­—éšç§ã€‚è¿™åœ¨è¿½æ±‚ç”¨æˆ·ä¿¡ä»»å’Œæ•°æ®å®‰å…¨çš„å°ç¨‹åºç”Ÿæ€ä¸­ï¼Œæ— ç–‘æ˜¯ä¸€ä¸ªå€¼å¾—æ¨å¹¿çš„å®è·µã€‚</p>
<p>å¸Œæœ›è¿™æ¬¡åˆ†äº«èƒ½ä¸ºä½ å¸¦æ¥å¯å‘ï¼Œå…±åŒæ¢ç´¢å°ç¨‹åºå‰ç«¯èƒ½åŠ›çš„æ›´å¤šå¯èƒ½æ€§ï¼</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…­ä¸ªæ•…äº‹ææ‡‚Fragment æ•…äº‹1-åˆè¯†Fragment - NewsHubçš„æ¨¡å—åŒ–é©å‘½]]></title>    <link>https://juejin.cn/post/7577239264309854208</link>    <guid>https://juejin.cn/post/7577239264309854208</guid>    <pubDate>2025-11-28T00:48:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577239264309854208" data-draft-id="7577239264309837824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…­ä¸ªæ•…äº‹ææ‡‚Fragment æ•…äº‹1-åˆè¯†Fragment - NewsHubçš„æ¨¡å—åŒ–é©å‘½"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-28T00:48:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç ç å®"/> <meta itemprop="url" content="https://juejin.cn/user/4248978205204190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…­ä¸ªæ•…äº‹ææ‡‚Fragment æ•…äº‹1-åˆè¯†Fragment - NewsHubçš„æ¨¡å—åŒ–é©å‘½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4248978205204190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç ç å®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T00:48:37.000Z" title="Fri Nov 28 2025 00:48:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    18
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ•…äº‹1ï¼šåˆè¯†Fragment - NewsHubçš„æ¨¡å—åŒ–é©å‘½</h2>
<h3 data-id="heading-1">æ™¨å…‰ä¸­çš„å›°å¢ƒ</h3>
<p>æ¸…æ™¨çš„ç¬¬ä¸€ç¼•é˜³å…‰é€è¿‡ç™¾å¶çª—çš„ç¼éš™æ´’åœ¨å¼ å°å®‰çš„åŠå…¬æ¡Œä¸Šï¼Œç…§äº®äº†æ•£ä¹±çš„è‰ç¨¿çº¸å’Œå–äº†åŠæ¯çš„å’–å•¡ã€‚ä½œä¸ºç§»åŠ¨äº’è”ç½‘åˆ›ä¸šå…¬å¸"å¯æ˜ç§‘æŠ€"çš„Androidå¼€å‘å·¥ç¨‹å¸ˆï¼Œå°å®‰å·²ç»è¿ç»­å¥‹æˆ˜äº†ä¸‰ä¸ªæ˜ŸæœŸï¼Œä»–è´Ÿè´£å¼€å‘çš„æ–°é—»é˜…è¯»åº”ç”¨"NewsHub"å³å°†è¿›å…¥å†…æµ‹é˜¶æ®µã€‚</p>
<p>ç„¶è€Œï¼Œæ­¤åˆ»å°å®‰çš„çœ‰å¤´å´ç´§é”å¾—åƒä¸€å›¢è§£ä¸å¼€çš„æ¯›çº¿ã€‚</p>
<p>"åˆæ˜¯è¿™ä¸ªé—®é¢˜..."ä»–å–ƒå–ƒè‡ªè¯­ï¼Œæ‰‹æŒ‡åœ¨è§¦æ‘¸æ¿ä¸Šå¿«é€Ÿæ»‘åŠ¨ï¼Œå±å¹•ä¸Šæ˜¾ç¤ºç€ä¸¤å¥—å‡ ä¹å®Œå…¨ç›¸åŒçš„XMLå¸ƒå±€æ–‡ä»¶ã€‚</p>
<p>"ä¸ºä»€ä¹ˆæ‰‹æœºç‰ˆå’Œå¹³æ¿ç‰ˆçš„ä»£ç é‡å¤ç‡è¿™ä¹ˆé«˜ï¼Ÿè¿™ç®€ç›´æ˜¯åœ¨æµªè´¹ç”Ÿå‘½ï¼"</p>
<p>å°å®‰æ‰äº†æ‰ç–²æƒ«çš„çœ¼ç›ï¼Œæ˜¾ç¤ºå™¨ä¸Šçš„ä»£ç ä»¿ä½›åœ¨å˜²ç¬‘ä»–çš„å›°å¢ƒã€‚ä½œä¸ºä¸€åæœ‰ç€ä¸‰å¹´Androidå¼€å‘ç»éªŒçš„å·¥ç¨‹å¸ˆï¼Œä»–æ·±çŸ¥è¿™ç§ä»£ç é‡å¤å¸¦æ¥çš„ç»´æŠ¤å™©æ¢¦ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;!-- æ‰‹æœºç‰ˆ activity_main.xml --&gt;
&lt;LinearLayout xmlns:<span class="hljs-attr">android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
 Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â android:<span class="hljs-attr">orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;
â€‹
 Â  Â &lt;FrameLayout
 Â  Â  Â  Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/news_list_container"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"0dp"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_weight</span>=<span class="hljs-string">"1"</span> /&gt;
â€‹
&lt;/LinearLayout&gt;
</code></pre>
<pre><code class="hljs language-ini" lang="ini">&lt;!-- å¹³æ¿ç‰ˆ activity_main_tablet.xml --&gt;
&lt;LinearLayout xmlns:<span class="hljs-attr">android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
 Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â android:<span class="hljs-attr">orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;
â€‹
 Â  Â &lt;FrameLayout
 Â  Â  Â  Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/news_list_container"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"0dp"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_weight</span>=<span class="hljs-string">"1"</span> /&gt;
â€‹
 Â  Â &lt;FrameLayout
 Â  Â  Â  Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/news_detail_container"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"0dp"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_weight</span>=<span class="hljs-string">"1"</span> /&gt;
â€‹
&lt;/LinearLayout&gt;
</code></pre>
<p>ä»…ä»…å› ä¸ºå¤šäº†ä¸€ä¸ªè¯¦æƒ…é¡µé¢çš„å®¹å™¨ï¼Œä»–å°±ä¸å¾—ä¸ç»´æŠ¤ä¸¤å¥—å‡ ä¹å®Œå…¨ç›¸åŒçš„å¸ƒå±€æ–‡ä»¶ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå¯¹åº”çš„Javaä»£ç ä¹Ÿéœ€è¦åˆ†åˆ«å¤„ç†ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// MainActivity.java</span>
public class MainActivity extends AppCompatActivity {
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â protected void onCreate(Bundle savedInstanceState) {
 Â  Â  Â  Â super<span class="hljs-selector-class">.onCreate</span>(savedInstanceState);
â€‹
 Â  Â  Â  Â if (isTablet()) {
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setContentView</span>(R.layout.activity_main_tablet);
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¹³æ¿é€»è¾‘ï¼šåŒæ—¶æ˜¾ç¤ºåˆ—è¡¨å’Œè¯¦æƒ…</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showNewsList</span>();
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showNewsDetail</span>(null);
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setContentView</span>(R.layout.activity_main);
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ‰‹æœºé€»è¾‘ï¼šåªæ˜¾ç¤ºåˆ—è¡¨ï¼Œç‚¹å‡»åè·³è½¬</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showNewsList</span>();
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â private boolean <span class="hljs-built_in">isTablet</span>() {
 Â  Â  Â  Â return <span class="hljs-built_in">getResources</span>()<span class="hljs-selector-class">.getBoolean</span>(R.bool.isTablet);
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">showNewsList</span>() {
 Â  Â  Â  Â <span class="hljs-comment">// æ— è®ºæ˜¯æ‰‹æœºè¿˜æ˜¯å¹³æ¿ï¼Œè¿™éƒ¨åˆ†ä»£ç éƒ½ä¸€æ ·</span>
 Â  Â  Â  Â NewsListFragment listFragment = new <span class="hljs-built_in">NewsListFragment</span>();
 Â  Â  Â  Â <span class="hljs-built_in">getSupportFragmentManager</span>()
 Â  Â  Â  Â  Â   <span class="hljs-selector-class">.beginTransaction</span>()
 Â  Â  Â  Â  Â   <span class="hljs-selector-class">.replace</span>(R.id.news_list_container, listFragment)
 Â  Â  Â  Â  Â   <span class="hljs-selector-class">.commit</span>();
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">showNewsDetail</span>(NewsItem newsItem) {
 Â  Â  Â  Â if (isTablet()) {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¹³æ¿ï¼šåœ¨å³ä¾§å®¹å™¨ä¸­æ˜¾ç¤ºè¯¦æƒ…</span>
 Â  Â  Â  Â  Â  Â NewsDetailFragment detailFragment = new <span class="hljs-built_in">NewsDetailFragment</span>();
 Â  Â  Â  Â  Â  Â if (newsItem != null) {
 Â  Â  Â  Â  Â  Â  Â  Â Bundle args = new <span class="hljs-built_in">Bundle</span>();
 Â  Â  Â  Â  Â  Â  Â  Â args<span class="hljs-selector-class">.putParcelable</span>("news_item", newsItem);
 Â  Â  Â  Â  Â  Â  Â  Â detailFragment<span class="hljs-selector-class">.setArguments</span>(args);
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">getSupportFragmentManager</span>()
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.beginTransaction</span>()
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.replace</span>(R.id.news_detail_container, detailFragment)
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.commit</span>();
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ‰‹æœºï¼šå¯åŠ¨æ–°çš„Activityæ˜¾ç¤ºè¯¦æƒ…</span>
 Â  Â  Â  Â  Â  Â Intent intent = new <span class="hljs-built_in">Intent</span>(this, NewsDetailActivity.class);
 Â  Â  Â  Â  Â  Â if (newsItem != null) {
 Â  Â  Â  Â  Â  Â  Â  Â intent<span class="hljs-selector-class">.putExtra</span>("news_item", newsItem);
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">startActivity</span>(intent);
 Â  Â  Â   }
 Â   }
}
</code></pre>
<p>"è¿™æ ·ä¸‹å»ä¸è¡Œ..."å°å®‰é åœ¨æ¤…èƒŒä¸Šï¼Œæœ›ç€çª—å¤–çš„åŸå¸‚å¤©é™…çº¿ï¼Œ"æ¯æ¬¡ä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½ï¼Œæˆ‘éƒ½è¦åœ¨å¤šä¸ªåœ°æ–¹åŒæ­¥æ›´æ–°ï¼Œå¤ªå®¹æ˜“å‡ºé”™äº†ã€‚"</p>
<p>ä»–æƒ³èµ·ä¸Šå‘¨é‚£æ¬¡æƒ¨ç—›çš„ç»å†ï¼šå› ä¸ºä¿®å¤æ‰‹æœºç‰ˆçš„ä¸€ä¸ªåˆ—è¡¨æ˜¾ç¤ºbugï¼Œå¿˜è®°åŒæ­¥æ›´æ–°å¹³æ¿ç‰ˆçš„ä»£ç ï¼Œå¯¼è‡´æµ‹è¯•ç»„å‘ç°å¹³æ¿åº”ç”¨å´©æºƒï¼Œæ•´ä¸ªè¿­ä»£è®¡åˆ’è¢«è¿«æ¨è¿Ÿã€‚</p>
<p>"ä¸€å®šæœ‰æ›´å¥½çš„æ–¹æ³•..."å°å®‰æ‰“å¼€äº†æŠ€æœ¯æ–‡æ¡£æµè§ˆå™¨ï¼Œå¼€å§‹æœç´¢"Androidå¤šå±é€‚é…æœ€ä½³å®è·µ"ã€‚</p>
<h3 data-id="heading-2">æ„å¤–çš„å¯¼å¸ˆ</h3>
<p>å°±åœ¨å°å®‰é™·å…¥æ²‰æ€çš„æ—¶å€™ï¼ŒåŠå…¬å®¤çš„é—¨è¢«è½»è½»æ¨å¼€äº†ã€‚</p>
<p>"å°å®‰ï¼Œè¿˜åœ¨ä¸ºNewsHubçš„é€‚é…é—®é¢˜çƒ¦æ¼å—ï¼Ÿ"</p>
<p>è¯´è¯çš„æ˜¯ææ˜è½©ï¼Œå¯æ˜ç§‘æŠ€çš„èµ„æ·±æ¶æ„å¸ˆã€‚æå·¥æœ‰ç€åå¤šå¹´ç§»åŠ¨å¼€å‘ç»éªŒï¼Œæ˜¯å…¬å¸æŠ€æœ¯å›¢é˜Ÿçš„æ ¸å¿ƒäººç‰©ã€‚ä»–äº”åå²å·¦å³çš„å¹´çºªï¼Œå¤´å‘å·²ç»èŠ±ç™½ï¼Œä½†çœ¼ç¥ä¾æ—§é”åˆ©ï¼Œä»¿ä½›èƒ½çœ‹é€ä»£ç èƒŒåçš„æœ¬è´¨ã€‚</p>
<p>"æå·¥..."å°å®‰æœ‰äº›ä¸å¥½æ„æ€åœ°ç¬‘äº†ç¬‘ï¼Œ"æ‚¨æ€ä¹ˆçŸ¥é“çš„ï¼Ÿ"</p>
<p>"ä½ è¿™å‘¨æäº¤çš„ä»£ç æˆ‘çœ‹äº†ï¼Œ"æå·¥èµ°åˆ°å°å®‰çš„å·¥ä½æ—ï¼ŒæŒ‡ç€å±å¹•ï¼Œ"æ‰‹æœºç‰ˆå’Œå¹³æ¿ç‰ˆçš„ä»£ç é‡å¤ç‡è¶…è¿‡70%ï¼Œè¿™åœ¨æ•æ·å¼€å‘ä¸­æ˜¯å¾ˆå±é™©çš„ä¿¡å·ã€‚"</p>
<p>å°å®‰ç‚¹ç‚¹å¤´ï¼Œæ²®ä¸§åœ°è¯´ï¼š"æˆ‘çŸ¥é“è¿™æ ·ä¸å¥½ï¼Œä½†æ˜¯æˆ‘æƒ³ä¸å‡ºæ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚Activityçš„æ¶æ„å¤©ç„¶å°±ä¸æ”¯æŒæ¨¡å—åŒ–ï¼Œæˆ‘åªèƒ½é€šè¿‡ä¸åŒçš„å¸ƒå±€æ–‡ä»¶æ¥é€‚é…ã€‚"</p>
<p>æå·¥ç¬‘äº†ç¬‘ï¼Œä»æ—è¾¹æ‹‰è¿‡ä¸€å¼ æ¤…å­åä¸‹ï¼š"å°å®‰ï¼Œä½ çŸ¥é“ä¸ºä»€ä¹ˆAndroidåœ¨3.0ç‰ˆæœ¬å¼•å…¥Fragmentå—ï¼Ÿ"</p>
<p>"æˆ‘è®°å¾—æ–‡æ¡£ä¸Šè¯´æ˜¯ä¸ºäº†æ›´å¥½åœ°æ”¯æŒå¤§å±å¹•è®¾å¤‡..."å°å®‰å›ç­”ã€‚</p>
<p>"æ²¡é”™ï¼Œä½†Fragmentçš„æ„ä¹‰è¿œä¸æ­¢äºæ­¤ã€‚"æå·¥çš„çœ¼ä¸­é—ªçƒç€æ™ºæ…§çš„å…‰èŠ’ï¼Œ"è®©æˆ‘ç»™ä½ è®²ä¸ªæ•…äº‹å§ã€‚"</p>
<h3 data-id="heading-3">Fragmentçš„è¯ç”Ÿæ•…äº‹</h3>
<p>"åœ¨Fragmentå‡ºç°ä¹‹å‰ï¼ŒAndroidåº”ç”¨çš„å¼€å‘æ¨¡å¼å°±åƒæ˜¯ä½ ç°åœ¨é‡åˆ°çš„é—®é¢˜ï¼Œ"æå·¥å¼€å§‹å¨“å¨“é“æ¥ï¼Œ"æ¯ä¸ªå±å¹•éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„Activityï¼Œå°±åƒæ¯ä¸ªæˆ¿é—´éƒ½æ˜¯ä¸€æ ‹ç‹¬ç«‹çš„æˆ¿å­ã€‚"</p>
<p>å°å®‰æƒ³è±¡ç€é‚£ä¸ªåœºæ™¯ï¼šä¸€ä¸ªç¤¾åŒºé‡Œï¼Œæ¯æ ‹æˆ¿å­éƒ½ç‹¬ç«‹å­˜åœ¨ï¼Œæœ‰è‡ªå·±çš„å¨æˆ¿ã€å§å®¤ã€å®¢å…ã€‚å¦‚æœè¦å»ºä¸€ä¸ªæ–°çš„ç¤¾åŒºï¼Œå°±å¿…é¡»é‡æ–°å»ºé€ æ‰€æœ‰çš„æˆ¿å­ã€‚</p>
<p>"è¿™ç§æ¨¡å¼åœ¨æ‰‹æœºæ—¶ä»£è¿˜è¡Œï¼Œå› ä¸ºå±å¹•å°ï¼Œä¸€ä¸ªActivityå°±èƒ½æ˜¾ç¤ºæ‰€æœ‰å†…å®¹ã€‚ä½†å¹³æ¿å‡ºç°åé—®é¢˜å°±æš´éœ²äº†ã€‚"æå·¥ç»§ç»­è¯´é“ï¼Œ"å¹³æ¿å±å¹•å¤§ï¼Œå¯ä»¥åŒæ—¶æ˜¾ç¤ºå¤šä¸ªç•Œé¢ã€‚å¦‚æœè¿˜ç”¨Activityï¼Œå°±åƒåœ¨åŒä¸€ä¸ªæˆ¿é—´é‡Œå»ºå¤šæ ‹æˆ¿å­ï¼Œæ—¢æµªè´¹ç©ºé—´åˆéš¾ä»¥ç®¡ç†ã€‚"</p>
<p>"æ‰€ä»¥Googleè®¾è®¡äº†Fragmentï¼Ÿ"å°å®‰è¿½é—®é“ã€‚</p>
<p>"æ˜¯çš„ï¼"æå·¥çš„è¯­æ°”å˜å¾—å…´å¥‹èµ·æ¥ï¼Œ"Fragmentå°±åƒç§¯æœ¨å—ã€‚ä½ å¯ä»¥æŠŠä¸€ä¸ªActivityæƒ³è±¡æˆä¸€ä¸ªç©å…·åº•æ¿ï¼ŒFragmentå°±æ˜¯å„ç§å½¢çŠ¶çš„ç§¯æœ¨ã€‚åœ¨æ‰‹æœºä¸Šï¼Œä½ å¯ä»¥åœ¨åº•æ¿ä¸Šæ”¾ä¸€å—ç§¯æœ¨ï¼›åœ¨å¹³æ¿ä¸Šï¼Œä½ å¯ä»¥åŒæ—¶æ”¾å¤šå—ç§¯æœ¨ã€‚"</p>
<p>æå·¥æ‹¿å‡ºçº¸ç¬”ï¼Œç”»äº†ä¸€ä¸ªç®€å•çš„ç¤ºæ„å›¾ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">æ‰‹æœºå¸ƒå±€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Activity Â  Â  Â  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Fragment <span class="hljs-selector-tag">A</span>  â”‚â”‚  (æ–°é—»åˆ—è¡¨)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚ Â  Â  Â  Â  Â  Â  Â  Â  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Fragment <span class="hljs-selector-tag">B</span>  â”‚â”‚  (è¯¦æƒ…é¡µé¢)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(ä¸€æ¬¡åªæ˜¾ç¤ºä¸€ä¸ªFragment)
â€‹
å¹³æ¿å¸ƒå±€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Activity Â  Â  Â  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Fragment <span class="hljs-selector-tag">A</span>â”‚ â”‚  (æ–°é—»åˆ—è¡¨)
â”‚  â”‚ Â  Â  Â  Â   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Fragment <span class="hljs-selector-tag">B</span>â”‚ â”‚  (è¯¦æƒ…é¡µé¢)
â”‚  â”‚ Â  Â  Â  Â   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(åŒæ—¶æ˜¾ç¤ºä¸¤ä¸ªFragment)
</code></pre>
<p>"æˆ‘æ˜ç™½äº†ï¼"å°å®‰çš„çœ¼ç›äº®äº†èµ·æ¥ï¼Œ"Fragmentå°±æ˜¯UIçš„æ¨¡å—åŒ–å•å…ƒï¼ŒActivityè´Ÿè´£ç»„è£…å’Œç®¡ç†è¿™äº›æ¨¡å—ï¼"</p>
<p>"å®Œå…¨æ­£ç¡®ï¼"æå·¥èµè®¸åœ°ç‚¹å¤´ï¼Œ"è¿™å°±æ˜¯Fragmentçš„æ ¸å¿ƒè®¾è®¡ç†å¿µï¼š<strong>UIä¸é€»è¾‘çš„æ¨¡å—åŒ–</strong>ã€‚æ¯ä¸ªFragmentéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶ï¼Œæœ‰è‡ªå·±çš„å¸ƒå±€å’Œç”Ÿå‘½å‘¨æœŸï¼Œä½†å¿…é¡»æ‰˜ç®¡åœ¨Activityä¸­ã€‚"</p>
<h3 data-id="heading-4">Fragmentçš„ä¸‰å¤§ä¼˜åŠ¿</h3>
<p>æå·¥çœ‹ç€å°å®‰æç„¶å¤§æ‚Ÿçš„è¡¨æƒ…ï¼Œç»§ç»­æ·±å…¥è®²è§£ï¼š"Fragmentä¸ä»…è§£å†³äº†å¤šå±é€‚é…é—®é¢˜ï¼Œè¿˜æœ‰ä¸‰ä¸ªé‡è¦çš„ä¼˜åŠ¿ï¼š"</p>
<h4 data-id="heading-5">1. ä»£ç å¤ç”¨æ€§</h4>
<p>"ä½ çœ‹ä½ ç°åœ¨çš„ä»£ç ï¼Œ"æå·¥æŒ‡ç€å°å®‰çš„å±å¹•ï¼Œ"NewsListFragmentå’ŒNewsDetailFragmentçš„é€»è¾‘å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œä¸ç®¡åœ¨æ‰‹æœºè¿˜æ˜¯å¹³æ¿ä¸Šã€‚å¦‚æœç”¨Fragmentï¼Œä½ åªéœ€è¦å†™ä¸€æ¬¡ï¼š"</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// NewsListFragment.java</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">NewsListFragment</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">Fragment</span> {
 Â  Â <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">RecyclerView</span> <span class="hljs-selector-tag">recyclerView</span>;
 Â  Â <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">NewsAdapter</span> <span class="hljs-selector-tag">adapter</span>;
 Â  Â <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">NewsItem</span>&gt; <span class="hljs-selector-tag">newsList</span>;
â€‹
 Â  Â <span class="hljs-comment">// å›è°ƒæ¥å£ï¼Œç”¨äºé€šçŸ¥Activityç”¨æˆ·ç‚¹å‡»äº†æŸæ¡æ–°é—»</span>
 Â  Â <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">interface</span> <span class="hljs-selector-tag">OnNewsSelectedListener</span> {
 Â  Â  Â  Â <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onNewsSelected</span>(NewsItem newsItem);
 Â   }
â€‹
 Â  Â <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">OnNewsSelectedListener</span> <span class="hljs-selector-tag">listener</span>;
â€‹
 Â  Â @<span class="hljs-selector-tag">Override</span>
 Â  Â <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onAttach</span>(<span class="hljs-variable">@NonNull</span> Context context) {
 Â  Â  Â  Â <span class="hljs-selector-tag">super</span><span class="hljs-selector-class">.onAttach</span>(context);
 Â  Â  Â  Â <span class="hljs-comment">// ç¡®ä¿å®¿ä¸»Activityå®ç°äº†å›è°ƒæ¥å£</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">if</span> (context instanceof OnNewsSelectedListener) {
 Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">listener</span> = (OnNewsSelectedListener) <span class="hljs-selector-tag">context</span>;
 Â  Â  Â   } <span class="hljs-selector-tag">else</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">throw</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">RuntimeException</span>(context.<span class="hljs-built_in">toString</span>()
 Â  Â  Â  Â  Â  Â  Â  Â + <span class="hljs-string">" must implement OnNewsSelectedListener"</span>);
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â @<span class="hljs-selector-tag">Nullable</span>
 Â  Â @<span class="hljs-selector-tag">Override</span>
 Â  Â <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">View</span> <span class="hljs-selector-tag">onCreateView</span>(<span class="hljs-variable">@NonNull</span> LayoutInflater inflater,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@Nullable</span> ViewGroup container,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@Nullable</span> Bundle savedInstanceState) {
 Â  Â  Â  Â <span class="hljs-comment">// åˆ›å»ºFragmentçš„è§†å›¾</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">View</span> <span class="hljs-selector-tag">view</span> = <span class="hljs-selector-tag">inflater</span><span class="hljs-selector-class">.inflate</span>(R.layout.fragment_news_list,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â container, false);
â€‹
 Â  Â  Â  Â <span class="hljs-selector-tag">recyclerView</span> = <span class="hljs-selector-tag">view</span><span class="hljs-selector-class">.findViewById</span>(R.id.recyclerView);
 Â  Â  Â  Â <span class="hljs-selector-tag">setupRecyclerView</span>();
â€‹
 Â  Â  Â  Â <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">view</span>;
 Â   }
â€‹
 Â  Â @<span class="hljs-selector-tag">Override</span>
 Â  Â <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onViewCreated</span>(<span class="hljs-variable">@NonNull</span> View view,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@Nullable</span> Bundle savedInstanceState) {
 Â  Â  Â  Â <span class="hljs-selector-tag">super</span><span class="hljs-selector-class">.onViewCreated</span>(view, savedInstanceState);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// åŠ è½½æ–°é—»æ•°æ®</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">loadNewsData</span>();
 Â   }
â€‹
 Â  Â <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">setupRecyclerView</span>() {
 Â  Â  Â  Â <span class="hljs-selector-tag">adapter</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">NewsAdapter</span>(newsList, new NewsAdapter.<span class="hljs-built_in">OnItemClickListener</span>() {
 Â  Â  Â  Â  Â  Â <span class="hljs-variable">@Override</span>
 Â  Â  Â  Â  Â  Â public void <span class="hljs-built_in">onItemClick</span>(NewsItem newsItem) {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// é€šçŸ¥Activityç”¨æˆ·é€‰æ‹©äº†æŸæ¡æ–°é—»</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">if</span> (listener != null) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">listener</span><span class="hljs-selector-class">.onNewsSelected</span>(newsItem);
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-selector-tag">recyclerView</span><span class="hljs-selector-class">.setLayoutManager</span>(new <span class="hljs-built_in">LinearLayoutManager</span>(<span class="hljs-built_in">getContext</span>()));
 Â  Â  Â  Â <span class="hljs-selector-tag">recyclerView</span><span class="hljs-selector-class">.setAdapter</span>(adapter);
 Â   }
â€‹
 Â  Â <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">loadNewsData</span>() {
 Â  Â  Â  Â <span class="hljs-comment">// ä»ç½‘ç»œæˆ–æ•°æ®åº“åŠ è½½æ–°é—»æ•°æ®</span>
 Â  Â  Â  Â <span class="hljs-comment">// è¿™é‡Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">newsList</span> = <span class="hljs-selector-tag">NewsRepository</span><span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.getLatestNews</span>();
 Â  Â  Â  Â <span class="hljs-selector-tag">adapter</span><span class="hljs-selector-class">.notifyDataSetChanged</span>();
 Â   }
â€‹
 Â  Â <span class="hljs-comment">// ... å…¶ä»–æ–¹æ³•</span>
}
</code></pre>
<p>"çœ‹åˆ°å—ï¼Ÿè¿™ä¸ªFragmentå®Œå…¨ä¸çŸ¥é“è‡ªå·±ä¼šè¢«ç”¨åœ¨æ‰‹æœºè¿˜æ˜¯å¹³æ¿ä¸Šï¼Œå®ƒåªè´Ÿè´£æ˜¾ç¤ºæ–°é—»åˆ—è¡¨ã€‚å¦‚ä½•ä½¿ç”¨è¿™ä¸ªFragmentï¼Œç”±Activityå†³å®šã€‚"</p>
<h4 data-id="heading-6">2. çµæ´»çš„ç»„åˆæ–¹å¼</h4>
<p>"Activityå°±åƒä¹é«˜ç§¯æœ¨çš„åº•æ¿ï¼ŒFragmentå°±æ˜¯ä¸åŒå½¢çŠ¶çš„ç§¯æœ¨ã€‚"æå·¥æ‹¿èµ·å°å®‰æ¡Œä¸Šçš„ä¹é«˜ç§¯æœ¨ä¸¾ä¾‹ï¼Œ"ä½ å¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±ç»„åˆï¼š"</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// æ‰‹æœºç‰ˆMainActivity.java</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span></span>
 Â  Â  Â  Â implements <span class="hljs-type">NewsListFragment</span>.<span class="hljs-type">OnNewsSelectedListener</span> {
â€‹
 Â  Â <span class="hljs-meta">@Override</span>
 Â  Â <span class="hljs-keyword">protected</span> void onCreate(<span class="hljs-type">Bundle</span> savedInstanceState) {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
 Â  Â  Â  Â setContentView(<span class="hljs-type">R</span>.layout.activity_main_phone);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// æ‰‹æœºç‰ˆï¼šåªæ˜¾ç¤ºæ–°é—»åˆ—è¡¨Fragment</span>
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (savedInstanceState == <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â getSupportFragmentManager()
 Â  Â  Â  Â  Â  Â  Â   .beginTransaction()
 Â  Â  Â  Â  Â  Â  Â   .add(<span class="hljs-type">R</span>.id.fragment_container, <span class="hljs-keyword">new</span> <span class="hljs-type">NewsListFragment</span>())
 Â  Â  Â  Â  Â  Â  Â   .commit();
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-meta">@Override</span>
 Â  Â public void onNewsSelected(<span class="hljs-type">NewsItem</span> newsItem) {
 Â  Â  Â  Â <span class="hljs-comment">// æ‰‹æœºç‰ˆï¼šå¯åŠ¨æ–°çš„Activityæ˜¾ç¤ºè¯¦æƒ…</span>
 Â  Â  Â  Â <span class="hljs-type">Intent</span> intent = <span class="hljs-keyword">new</span> <span class="hljs-type">Intent</span>(<span class="hljs-keyword">this</span>, <span class="hljs-type">NewsDetailActivity</span>.<span class="hljs-keyword">class</span>);
 Â  Â  Â  Â intent.putExtra(<span class="hljs-string">"news_item"</span>, newsItem);
 Â  Â  Â  Â startActivity(intent);
 Â   }
}
</code></pre>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// å¹³æ¿ç‰ˆMainActivity.java</span>
public class MainActivity extends AppCompatActivity
 Â  Â  Â  Â implements NewsListFragment<span class="hljs-selector-class">.OnNewsSelectedListener</span> {
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â protected void onCreate(Bundle savedInstanceState) {
 Â  Â  Â  Â super<span class="hljs-selector-class">.onCreate</span>(savedInstanceState);
 Â  Â  Â  Â <span class="hljs-built_in">setContentView</span>(R.layout.activity_main_tablet);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// å¹³æ¿ç‰ˆï¼šåŒæ—¶æ˜¾ç¤ºåˆ—è¡¨å’Œè¯¦æƒ…Fragment</span>
 Â  Â  Â  Â if (savedInstanceState == null) {
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">getSupportFragmentManager</span>()
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.beginTransaction</span>()
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.add</span>(R.id.news_list_container, new NewsListFragment())
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.add</span>(R.id.news_detail_container, new NewsDetailFragment())
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.commit</span>();
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â public void onNewsSelected(NewsItem newsItem) {
 Â  Â  Â  Â <span class="hljs-comment">// å¹³æ¿ç‰ˆï¼šç›´æ¥æ›´æ–°è¯¦æƒ…Fragment</span>
 Â  Â  Â  Â NewsDetailFragment detailFragment =
 Â  Â  Â  Â  Â   (NewsDetailFragment) <span class="hljs-built_in">getSupportFragmentManager</span>()
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.findFragmentById</span>(R.id.news_detail_container);
â€‹
 Â  Â  Â  Â if (detailFragment != null) {
 Â  Â  Â  Â  Â  Â detailFragment<span class="hljs-selector-class">.showNewsDetail</span>(newsItem);
 Â  Â  Â   }
 Â   }
}
</code></pre>
<p>"è¿™æ ·ï¼ŒNewsListFragmentå’ŒNewsDetailFragmentçš„ä»£ç åªéœ€è¦å†™ä¸€æ¬¡ï¼Œä½†åœ¨ä¸åŒçš„Activityä¸­å¯ä»¥æœ‰ä¸åŒçš„ä½¿ç”¨æ–¹å¼ã€‚"</p>
<h4 data-id="heading-7">3. æ›´å¥½çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</h4>
<p>"Fragmentæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†å®ƒå§‹ç»ˆä¾èµ–äºActivityã€‚"æå·¥ç»§ç»­è§£é‡Šï¼Œ"è¿™ç§è®¾è®¡è®©UIç»„ä»¶çš„ç®¡ç†æ›´åŠ ç²¾ç»†åŒ–ã€‚"</p>
<p>ä»–å†æ¬¡åœ¨çº¸ä¸Šç”»äº†ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå›¾ï¼š</p>
<pre><code class="hljs">Activityç”Ÿå‘½å‘¨æœŸï¼š
 Â   onCreate â†’ onStart â†’ onResume â†’ onPause â†’ onStop â†’ onDestroy
 Â  Â  Â  Â  â”‚ Â  Â  Â   â”‚ Â  Â  Â   â”‚ Â  Â  Â   â”‚ Â  Â  Â   â”‚ Â  Â  Â   â”‚
 Â  Â  Â  Â  â–¼ Â  Â  Â   â–¼ Â  Â  Â   â–¼ Â  Â  Â   â–¼ Â  Â  Â   â–¼ Â  Â  Â   â–¼
Fragmentç”Ÿå‘½å‘¨æœŸï¼š
 Â   onAttach â†’ onCreate â†’ onCreateView â†’ onViewCreated â†’
 Â   onStart â†’ onResume â†’ onPause â†’ onStop â†’ onDestroyView â†’ onDestroy â†’ onDetach
</code></pre>
<p>"Fragmentçš„ç”Ÿå‘½å‘¨æœŸæ¯”Activityæ›´ç»†è‡´ï¼Œ"æå·¥è§£é‡Šé“ï¼Œ"æ¯”å¦‚<code>onCreateView</code>å’Œ<code>onDestroyView</code>ä¸“é—¨ç®¡ç†Viewçš„åˆ›å»ºå’Œé”€æ¯ï¼Œè€Œ<code>onAttach</code>å’Œ<code>onDetach</code>ç®¡ç†Fragmentä¸Activityçš„ç»‘å®šå…³ç³»ã€‚è¿™ç§ç»†ç²’åº¦çš„æ§åˆ¶åœ¨å¤æ‚åº”ç”¨ä¸­éå¸¸æœ‰ç”¨ã€‚"</p>
<h3 data-id="heading-8">Fragmentçš„ä¸‰ç§åˆ›å»ºæ–¹å¼</h3>
<p>"ç†è®ºè®²å¾—å·®ä¸å¤šäº†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å®é™…æ€ä¹ˆåˆ›å»ºFragmentã€‚"æå·¥åˆ‡æ¢åˆ°IDEï¼Œå¼€å§‹æ¼”ç¤ºã€‚</p>
<h4 data-id="heading-9">æ–¹å¼ä¸€ï¼šé™æ€åŠ è½½ï¼ˆXMLä¸­å£°æ˜ï¼‰</h4>
<p>"æœ€ç®€å•çš„æ–¹å¼æ˜¯åœ¨XMLå¸ƒå±€æ–‡ä»¶ä¸­ç›´æ¥å£°æ˜Fragmentï¼š"æå·¥åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¸ƒå±€æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">&lt;!-- activity_main_static.xml --&gt;
&lt;LinearLayout xmlns:<span class="hljs-attr">android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
 Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â android:<span class="hljs-attr">orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;
â€‹
 Â  Â &lt;!-- é™æ€åŠ è½½Fragment --&gt;
 Â  Â &lt;fragment
 Â  Â  Â  Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/news_list_fragment"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">name</span>=<span class="hljs-string">"com.example.newshub.NewsListFragment"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"0dp"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_weight</span>=<span class="hljs-string">"1"</span> /&gt;
â€‹
 Â  Â &lt;fragment
 Â  Â  Â  Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/news_detail_fragment"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">name</span>=<span class="hljs-string">"com.example.newshub.NewsDetailFragment"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"0dp"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_weight</span>=<span class="hljs-string">"1"</span> /&gt;
â€‹
&lt;/LinearLayout&gt;
</code></pre>
<p>"é™æ€åŠ è½½çš„å¥½å¤„æ˜¯ç®€å•ç›´è§‚ï¼Œ"æå·¥è§£é‡Šï¼Œ"Fragmentä¼šéšç€Activityçš„åˆ›å»ºè€Œè‡ªåŠ¨åˆ›å»ºã€‚ä½†ç¼ºç‚¹æ˜¯ä¸å¤Ÿçµæ´»ï¼Œä¸€æ—¦åœ¨XMLä¸­å£°æ˜å°±ä¸èƒ½åœ¨è¿è¡Œæ—¶æ›´æ”¹ã€‚"</p>
<p>å¯¹åº”çš„Activityä»£ç éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> </span>{
â€‹
 Â  Â <span class="hljs-meta">@Override</span>
 Â  Â <span class="hljs-keyword">protected</span> void onCreate(<span class="hljs-type">Bundle</span> savedInstanceState) {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
 Â  Â  Â  Â setContentView(<span class="hljs-type">R</span>.layout.activity_main_static);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// å¯ä»¥é€šè¿‡findViewByIdè·å–Fragmentå®ä¾‹</span>
 Â  Â  Â  Â <span class="hljs-type">NewsListFragment</span> listFragment = (<span class="hljs-type">NewsListFragment</span>)
 Â  Â  Â  Â  Â  Â getSupportFragmentManager().findFragmentById(<span class="hljs-type">R</span>.id.news_list_fragment);
 Â  Â  Â  Â <span class="hljs-type">NewsDetailFragment</span> detailFragment = (<span class="hljs-type">NewsDetailFragment</span>)
 Â  Â  Â  Â  Â  Â getSupportFragmentManager().findFragmentById(<span class="hljs-type">R</span>.id.news_detail_fragment);
 Â   }
}
</code></pre>
<h4 data-id="heading-10">æ–¹å¼äºŒï¼šåŠ¨æ€åŠ è½½ï¼ˆä»£ç ä¸­æ·»åŠ ï¼‰</h4>
<p>"æ›´å¸¸ç”¨çš„æ–¹å¼æ˜¯åŠ¨æ€åŠ è½½ï¼Œ"æå·¥ç»§ç»­æ¼”ç¤ºï¼Œ"è¿™æ ·å¯ä»¥åœ¨è¿è¡Œæ—¶æ ¹æ®éœ€è¦æ·»åŠ ã€æ›¿æ¢ã€ç§»é™¤Fragmentã€‚"</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- activity_main_dynamic.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
 Â  Â <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/fragment_container"</span>
 Â  Â <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span> /&gt;</span>
</code></pre>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> </span>{
â€‹
 Â  Â <span class="hljs-meta">@Override</span>
 Â  Â <span class="hljs-keyword">protected</span> void onCreate(<span class="hljs-type">Bundle</span> savedInstanceState) {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
 Â  Â  Â  Â setContentView(<span class="hljs-type">R</span>.layout.activity_main_dynamic);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// åŠ¨æ€æ·»åŠ Fragment</span>
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (savedInstanceState == <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â <span class="hljs-type">NewsListFragment</span> listFragment = <span class="hljs-keyword">new</span> <span class="hljs-type">NewsListFragment</span>();
â€‹
 Â  Â  Â  Â  Â  Â getSupportFragmentManager()
 Â  Â  Â  Â  Â  Â  Â   .beginTransaction()
 Â  Â  Â  Â  Â  Â  Â   .add(<span class="hljs-type">R</span>.id.fragment_container, listFragment)
 Â  Â  Â  Â  Â  Â  Â   .commit();
 Â  Â  Â   }
 Â   }
}
</code></pre>
<p>"åŠ¨æ€åŠ è½½çš„å…³é”®æ˜¯<code>FragmentTransaction</code>ï¼Œ"æå·¥å¼ºè°ƒï¼Œ"æ‰€æœ‰çš„Fragmentæ“ä½œéƒ½éœ€è¦é€šè¿‡äº‹åŠ¡æ¥æ‰§è¡Œï¼š"</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// Fragmentçš„åŸºæœ¬æ“ä½œ</span>
FragmentTransaction transaction = <span class="hljs-built_in">getSupportFragmentManager</span>()<span class="hljs-selector-class">.beginTransaction</span>();
â€‹
<span class="hljs-comment">// æ·»åŠ Fragment</span>
transaction<span class="hljs-selector-class">.add</span>(R.id.fragment_container, newFragment);
â€‹
<span class="hljs-comment">// æ›¿æ¢Fragment</span>
transaction<span class="hljs-selector-class">.replace</span>(R.id.fragment_container, newFragment);
â€‹
<span class="hljs-comment">// ç§»é™¤Fragment</span>
transaction<span class="hljs-selector-class">.remove</span>(oldFragment);
â€‹
<span class="hljs-comment">// éšè—Fragmentï¼ˆViewè¢«é”€æ¯ä½†å®ä¾‹ä¿ç•™ï¼‰</span>
transaction<span class="hljs-selector-class">.hide</span>(fragment);
â€‹
<span class="hljs-comment">// æ˜¾ç¤ºFragment</span>
transaction<span class="hljs-selector-class">.show</span>(fragment);
â€‹
<span class="hljs-comment">// æ·»åŠ åˆ°å›é€€æ ˆï¼ˆç”¨æˆ·å¯ä»¥æŒ‰è¿”å›é”®æ’¤é”€è¿™ä¸ªæ“ä½œï¼‰</span>
transaction<span class="hljs-selector-class">.addToBackStack</span>(null);
â€‹
<span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
transaction<span class="hljs-selector-class">.commit</span>();
</code></pre>
<h4 data-id="heading-11">æ–¹å¼ä¸‰ï¼šå·¥å‚æ¨¡å¼åˆ›å»º</h4>
<p>"åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘æ¨èä½¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»ºFragmentï¼Œ"æå·¥åˆ†äº«äº†ä¸€ä¸ªæœ€ä½³å®è·µï¼Œ"è¿™æ ·å¯ä»¥ç¡®ä¿Fragmentæ€»æ˜¯ä»¥æ­£ç¡®çš„æ–¹å¼è¢«åˆ›å»ºã€‚"</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NewsDetailFragment</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Fragment</span> {
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ARG_NEWS_ITEM</span> <span class="hljs-operator">=</span> <span class="hljs-string">"news_item"</span>;
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ARG_SHOW_COMMENT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"show_comment"</span>;
â€‹
 Â  Â <span class="hljs-keyword">private</span> NewsItem newsItem;
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> showComment;
â€‹
 Â  Â <span class="hljs-comment">// ç§æœ‰æ„é€ å‡½æ•°ï¼Œå¼ºåˆ¶ä½¿ç”¨å·¥å‚æ–¹æ³•</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-title function_">NewsDetailFragment</span><span class="hljs-params">()</span> {
 Â  Â  Â  Â <span class="hljs-comment">// Required empty public constructor</span>
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å·¥å‚æ–¹æ³•ï¼šåˆ›å»ºæ–°é—»è¯¦æƒ…Fragment
 Â  Â  * <span class="hljs-doctag">@param</span> newsItem è¦æ˜¾ç¤ºçš„æ–°é—»é¡¹
 Â  Â  * <span class="hljs-doctag">@param</span> showComment æ˜¯å¦æ˜¾ç¤ºè¯„è®ºåŒº
 Â  Â  * <span class="hljs-doctag">@return</span> NewsDetailFragmentå®ä¾‹
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> NewsDetailFragment <span class="hljs-title function_">newInstance</span><span class="hljs-params">(NewsItem newsItem, <span class="hljs-type">boolean</span> showComment)</span> {
 Â  Â  Â  Â <span class="hljs-type">NewsDetailFragment</span> <span class="hljs-variable">fragment</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NewsDetailFragment</span>();
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// åˆ›å»ºå‚æ•°Bundle</span>
 Â  Â  Â  Â <span class="hljs-type">Bundle</span> <span class="hljs-variable">args</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bundle</span>();
 Â  Â  Â  Â args.putParcelable(ARG_NEWS_ITEM, newsItem);
 Â  Â  Â  Â args.putBoolean(ARG_SHOW_COMMENT, showComment);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½®å‚æ•°</span>
 Â  Â  Â  Â fragment.setArguments(args);
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">return</span> fragment;
 Â   }
â€‹
 Â  Â <span class="hljs-meta">@Override</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> {
 Â  Â  Â  Â <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è¯»å–å‚æ•°</span>
 Â  Â  Â  Â <span class="hljs-type">Bundle</span> <span class="hljs-variable">args</span> <span class="hljs-operator">=</span> getArguments();
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (args != <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â newsItem = args.getParcelable(ARG_NEWS_ITEM);
 Â  Â  Â  Â  Â  Â showComment = args.getBoolean(ARG_SHOW_COMMENT, <span class="hljs-literal">false</span>);
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-meta">@Nullable</span>
 Â  Â <span class="hljs-meta">@Override</span>
 Â  Â <span class="hljs-keyword">public</span> View <span class="hljs-title function_">onCreateView</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> LayoutInflater inflater,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-meta">@Nullable</span> ViewGroup container,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> {
 Â  Â  Â  Â <span class="hljs-type">View</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> inflater.inflate(R.layout.fragment_news_detail, container, <span class="hljs-literal">false</span>);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// ä½¿ç”¨å‚æ•°åˆå§‹åŒ–UI</span>
 Â  Â  Â  Â initializeUI(view);
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">return</span> view;
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initializeUI</span><span class="hljs-params">(View view)</span> {
 Â  Â  Â  Â <span class="hljs-type">TextView</span> <span class="hljs-variable">titleView</span> <span class="hljs-operator">=</span> view.findViewById(R.id.news_title);
 Â  Â  Â  Â <span class="hljs-type">TextView</span> <span class="hljs-variable">contentView</span> <span class="hljs-operator">=</span> view.findViewById(R.id.news_content);
 Â  Â  Â  Â <span class="hljs-type">View</span> <span class="hljs-variable">commentSection</span> <span class="hljs-operator">=</span> view.findViewById(R.id.comment_section);
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (newsItem != <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â titleView.setText(newsItem.getTitle());
 Â  Â  Â  Â  Â  Â contentView.setText(newsItem.getContent());
 Â  Â  Â  Â  Â  Â commentSection.setVisibility(showComment ? View.VISIBLE : View.GONE);
 Â  Â  Â   }
 Â   }
}
</code></pre>
<p>"å·¥å‚æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯ï¼š"</p>
<ol start="0">
<li><strong>å‚æ•°å®‰å…¨</strong>ï¼šé€šè¿‡Bundleä¼ é€’å‚æ•°ï¼Œç¡®ä¿å‚æ•°åœ¨Fragmenté‡å»ºæ—¶ä¸ä¼šä¸¢å¤±</li>
<li><strong>åˆ›å»ºç»Ÿä¸€</strong>ï¼šæ‰€æœ‰Fragmentéƒ½é€šè¿‡å·¥å‚æ–¹æ³•åˆ›å»ºï¼Œé¿å…å¿˜è®°è®¾ç½®å¿…è¦å‚æ•°</li>
<li><strong>ä»£ç æ¸…æ™°</strong>ï¼šè°ƒç”¨è€…ä¸€çœ‹å°±çŸ¥é“éœ€è¦å“ªäº›å‚æ•°</li>
</ol>
<p>ä½¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»ºFragmentï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åˆ›å»ºå¹¶æ˜¾ç¤ºæ–°é—»è¯¦æƒ…Fragment</span>
NewsItem selectedNews = <span class="hljs-built_in">getSelectedNewsItem</span>();
NewsDetailFragment detailFragment = NewsDetailFragment<span class="hljs-selector-class">.newInstance</span>(selectedNews, true);
â€‹
<span class="hljs-built_in">getSupportFragmentManager</span>()
 Â   <span class="hljs-selector-class">.beginTransaction</span>()
 Â   <span class="hljs-selector-class">.replace</span>(R.id.fragment_container, detailFragment)
 Â   <span class="hljs-selector-class">.addToBackStack</span>(null) Â <span class="hljs-comment">// æ·»åŠ åˆ°å›é€€æ ˆï¼Œç”¨æˆ·å¯ä»¥è¿”å›</span>
 Â   <span class="hljs-selector-class">.commit</span>();
</code></pre>
<h3 data-id="heading-12">å®æˆ˜é‡æ„ï¼šNewsHubçš„æ¨¡å—åŒ–æ”¹é€ </h3>
<p>"ç†è®ºè®²å®Œäº†ï¼Œç°åœ¨è®©æˆ‘ä»¬å®é™…é‡æ„ä½ çš„NewsHubåº”ç”¨ã€‚"æå·¥æ‹äº†æ‹å°å®‰çš„è‚©è†€ï¼Œ"ä½ å‡†å¤‡å¥½å¼€å§‹è¿™åœºæ¨¡å—åŒ–é©å‘½äº†å—ï¼Ÿ"</p>
<p>å°å®‰ç”¨åŠ›ç‚¹å¤´ï¼Œçœ¼ä¸­å……æ»¡äº†å…´å¥‹ï¼š"å‡†å¤‡å¥½äº†ï¼æå·¥ï¼Œæˆ‘ä»¬ä»å“ªé‡Œå¼€å§‹ï¼Ÿ"</p>
<p>"é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è¯†åˆ«åº”ç”¨ä¸­çš„UIæ¨¡å—ã€‚"æå·¥åœ¨ç™½æ¿ä¸Šç”»äº†ä¸€ä¸ªæ€ç»´å¯¼å›¾ï¼š</p>
<pre><code class="hljs">NewsHubåº”ç”¨æ¨¡å—åˆ†æ
â”œâ”€â”€ æ–°é—»åˆ—è¡¨æ¨¡å—
â”‚ Â  â”œâ”€â”€ æ–°é—»æ¡ç›®æ˜¾ç¤º
â”‚ Â  â”œâ”€â”€ ä¸‹æ‹‰åˆ·æ–°
â”‚ Â  â””â”€â”€ åŠ è½½æ›´å¤š
â”œâ”€â”€ æ–°é—»è¯¦æƒ…æ¨¡å—
â”‚ Â  â”œâ”€â”€ æ–°é—»å†…å®¹æ˜¾ç¤º
â”‚ Â  â”œâ”€â”€ å›¾ç‰‡æµè§ˆ
â”‚ Â  â””â”€â”€ åˆ†äº«åŠŸèƒ½
â”œâ”€â”€ ç”¨æˆ·ä¸­å¿ƒæ¨¡å—
â”‚ Â  â”œâ”€â”€ ç”¨æˆ·ä¿¡æ¯
â”‚ Â  â”œâ”€â”€ è®¾ç½®é€‰é¡¹
â”‚ Â  â””â”€â”€ å†å²è®°å½•
â””â”€â”€ æœç´¢æ¨¡å—
 Â   â”œâ”€â”€ æœç´¢æ¡†
 Â   â”œâ”€â”€ æœç´¢ç»“æœ
 Â   â””â”€â”€ æœç´¢å†å²
</code></pre>
<p>"æ ¹æ®è¿™ä¸ªåˆ†æï¼Œä½ çš„NewsHubè‡³å°‘éœ€è¦4ä¸ªæ ¸å¿ƒFragmentï¼šNewsListFragmentã€NewsDetailFragmentã€UserFragmentå’ŒSearchFragmentã€‚"æå·¥ç»§ç»­è¯´é“ï¼Œ"è®©æˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„å¼€å§‹ï¼šåˆ›å»ºNewsListFragmentã€‚"</p>
<h4 data-id="heading-13">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºFragmentåŸºç±»</h4>
<p>"åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘å»ºè®®å…ˆåˆ›å»ºä¸€ä¸ªBaseFragmentï¼Œ"æå·¥å¼€å§‹ç¼–å†™ä»£ç ï¼Œ"è¿™æ ·å¯ä»¥é¿å…é‡å¤ç¼–å†™é€šç”¨ä»£ç ã€‚"</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// BaseFragment.java</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">abstract</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">BaseFragment</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">Fragment</span> {
â€‹
 Â  Â <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">View</span> <span class="hljs-selector-tag">rootView</span>;
 Â  Â <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">Context</span> <span class="hljs-selector-tag">context</span>;
 Â  Â <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">FragmentActivity</span> <span class="hljs-selector-tag">activity</span>;
â€‹
 Â  Â @<span class="hljs-selector-tag">Override</span>
 Â  Â <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onAttach</span>(<span class="hljs-variable">@NonNull</span> Context context) {
 Â  Â  Â  Â <span class="hljs-selector-tag">super</span><span class="hljs-selector-class">.onAttach</span>(context);
 Â  Â  Â  Â <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.context</span> = <span class="hljs-selector-tag">context</span>;
 Â  Â  Â  Â <span class="hljs-selector-tag">if</span> (context instanceof FragmentActivity) {
 Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.activity</span> = (FragmentActivity) <span class="hljs-selector-tag">context</span>;
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â @<span class="hljs-selector-tag">Nullable</span>
 Â  Â @<span class="hljs-selector-tag">Override</span>
 Â  Â <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">View</span> <span class="hljs-selector-tag">onCreateView</span>(<span class="hljs-variable">@NonNull</span> LayoutInflater inflater,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@Nullable</span> ViewGroup container,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@Nullable</span> Bundle savedInstanceState) {
 Â  Â  Â  Â <span class="hljs-comment">// å¦‚æœrootViewå·²ç»åˆ›å»ºï¼Œç›´æ¥è¿”å›ï¼ˆé¿å…é‡å¤åˆ›å»ºï¼‰</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">if</span> (rootView != null) {
 Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">rootView</span>;
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è·å–å¸ƒå±€ID</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">layoutId</span> = <span class="hljs-selector-tag">getLayoutId</span>();
 Â  Â  Â  Â <span class="hljs-selector-tag">rootView</span> = <span class="hljs-selector-tag">inflater</span><span class="hljs-selector-class">.inflate</span>(layoutId, container, false);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// åˆå§‹åŒ–View</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">initView</span>();
â€‹
 Â  Â  Â  Â <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">rootView</span>;
 Â   }
â€‹
 Â  Â @<span class="hljs-selector-tag">Override</span>
 Â  Â <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onViewCreated</span>(<span class="hljs-variable">@NonNull</span> View view,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@Nullable</span> Bundle savedInstanceState) {
 Â  Â  Â  Â <span class="hljs-selector-tag">super</span><span class="hljs-selector-class">.onViewCreated</span>(view, savedInstanceState);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½®æ•°æ®å’Œäº‹ä»¶ç›‘å¬</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">initData</span>();
 Â  Â  Â  Â <span class="hljs-selector-tag">initListener</span>();
 Â   }
â€‹
 Â  Â @<span class="hljs-selector-tag">Override</span>
 Â  Â <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onDestroyView</span>() {
 Â  Â  Â  Â <span class="hljs-selector-tag">super</span><span class="hljs-selector-class">.onDestroyView</span>();
 Â  Â  Â  Â <span class="hljs-comment">// æ¸…ç†èµ„æº</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">rootView</span> = <span class="hljs-selector-tag">null</span>;
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * è·å–Fragmentçš„å¸ƒå±€ID
 Â  Â  */</span>
 Â  Â <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">abstract</span> <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">getLayoutId</span>();
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * åˆå§‹åŒ–View
 Â  Â  */</span>
 Â  Â <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">abstract</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">initView</span>();
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * åˆå§‹åŒ–æ•°æ®
 Â  Â  */</span>
 Â  Â <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">abstract</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">initData</span>();
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
 Â  Â  */</span>
 Â  Â <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">initListener</span>() {
 Â  Â  Â  Â <span class="hljs-comment">// å­ç±»å¯ä»¥é‡å†™æ­¤æ–¹æ³•æ¥è®¾ç½®ç›‘å¬å™¨</span>
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ˜¾ç¤ºToastæç¤º
 Â  Â  */</span>
 Â  Â <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">showToast</span>(String message) {
 Â  Â  Â  Â <span class="hljs-selector-tag">Toast</span><span class="hljs-selector-class">.makeText</span>(context, message, Toast.LENGTH_SHORT)<span class="hljs-selector-class">.show</span>();
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ˜¾ç¤ºè¿›åº¦æ¡
 Â  Â  */</span>
 Â  Â <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">showProgressDialog</span>(String message) {
 Â  Â  Â  Â <span class="hljs-comment">// å®ç°è¿›åº¦æ¡æ˜¾ç¤ºé€»è¾‘</span>
 Â  Â  Â  Â <span class="hljs-comment">// è¿™é‡Œå¯ä»¥å°è£…ä¸€ä¸ªé€šç”¨çš„è¿›åº¦æ¡å·¥å…·ç±»</span>
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * éšè—è¿›åº¦æ¡
 Â  Â  */</span>
 Â  Â <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">hideProgressDialog</span>() {
 Â  Â  Â  Â <span class="hljs-comment">// å®ç°è¿›åº¦æ¡éšè—é€»è¾‘</span>
 Â   }
}
</code></pre>
<p>"BaseFragmentæä¾›äº†Fragmentçš„é€šç”¨åŠŸèƒ½ï¼Œ"æå·¥è§£é‡Šé“ï¼Œ"è¿™æ ·æ¯ä¸ªå…·ä½“çš„Fragmentåªéœ€è¦å…³æ³¨è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ã€‚"</p>
<h4 data-id="heading-14">ç¬¬äºŒæ­¥ï¼šåˆ›å»ºNewsListFragment</h4>
<p>"ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºæ–°é—»åˆ—è¡¨Fragmentï¼š"</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// NewsListFragment.java</span>
public class NewsListFragment extends BaseFragment
 Â  Â  Â  Â implements SwipeRefreshLayout<span class="hljs-selector-class">.OnRefreshListener</span> {
â€‹
 Â  Â private static final String TAG = "NewsListFragment";
â€‹
 Â  Â <span class="hljs-comment">// UIç»„ä»¶</span>
 Â  Â private RecyclerView recyclerView;
 Â  Â private SwipeRefreshLayout swipeRefreshLayout;
 Â  Â private ProgressBar progressBar;
 Â  Â private TextView emptyView;
â€‹
 Â  Â <span class="hljs-comment">// æ•°æ®å’Œé€‚é…å™¨</span>
 Â  Â private NewsAdapter newsAdapter;
 Â  Â private List&lt;NewsItem&gt; newsList = new ArrayList&lt;&gt;();
â€‹
 Â  Â <span class="hljs-comment">// åˆ†é¡µç›¸å…³</span>
 Â  Â private int currentPage = <span class="hljs-number">1</span>;
 Â  Â private boolean isLoading = false;
 Â  Â private boolean hasMoreData = true;
â€‹
 Â  Â <span class="hljs-comment">// å›è°ƒæ¥å£</span>
 Â  Â public interface OnNewsInteractionListener {
 Â  Â  Â  Â void <span class="hljs-built_in">onNewsSelected</span>(NewsItem newsItem);
 Â  Â  Â  Â void <span class="hljs-built_in">onNewsFavorite</span>(NewsItem newsItem);
 Â  Â  Â  Â void <span class="hljs-built_in">onNewsShare</span>(NewsItem newsItem);
 Â   }
â€‹
 Â  Â private OnNewsInteractionListener listener;
â€‹
 Â  Â public static NewsListFragment <span class="hljs-built_in">newInstance</span>() {
 Â  Â  Â  Â return new <span class="hljs-built_in">NewsListFragment</span>();
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â public void onAttach(<span class="hljs-keyword">@NonNull</span> Context context) {
 Â  Â  Â  Â super<span class="hljs-selector-class">.onAttach</span>(context);
 Â  Â  Â  Â if (context instanceof OnNewsInteractionListener) {
 Â  Â  Â  Â  Â  Â listener = (OnNewsInteractionListener) context;
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â throw new <span class="hljs-built_in">RuntimeException</span>(context.toString()
 Â  Â  Â  Â  Â  Â  Â  Â + " must implement OnNewsInteractionListener");
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â protected int getLayoutId() {
 Â  Â  Â  Â return R<span class="hljs-selector-class">.layout</span><span class="hljs-selector-class">.fragment_news_list</span>;
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â protected void initView() {
 Â  Â  Â  Â recyclerView = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.recyclerView);
 Â  Â  Â  Â swipeRefreshLayout = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.swipeRefreshLayout);
 Â  Â  Â  Â progressBar = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.progressBar);
 Â  Â  Â  Â emptyView = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.emptyView);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½®ä¸‹æ‹‰åˆ·æ–°</span>
 Â  Â  Â  Â swipeRefreshLayout<span class="hljs-selector-class">.setOnRefreshListener</span>(this);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½®RecyclerView</span>
 Â  Â  Â  Â <span class="hljs-built_in">setupRecyclerView</span>();
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// åˆå§‹çŠ¶æ€æ˜¾ç¤ºåŠ è½½è¿›åº¦</span>
 Â  Â  Â  Â <span class="hljs-built_in">showLoading</span>(true);
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â protected void initData() {
 Â  Â  Â  Â <span class="hljs-comment">// åŠ è½½ç¬¬ä¸€é¡µæ•°æ®</span>
 Â  Â  Â  Â <span class="hljs-built_in">loadNewsData</span>(<span class="hljs-number">1</span>, true);
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â protected void initListener() {
 Â  Â  Â  Â <span class="hljs-comment">// RecyclerViewçš„æ»šåŠ¨ç›‘å¬ï¼Œç”¨äºå®ç°åŠ è½½æ›´å¤š</span>
 Â  Â  Â  Â recyclerView<span class="hljs-selector-class">.addOnScrollListener</span>(new RecyclerView.OnScrollListener() {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â  Â  Â  Â  Â public void onScrolled(<span class="hljs-keyword">@NonNull</span> RecyclerView recyclerView,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  int dx, int dy) {
 Â  Â  Â  Â  Â  Â  Â  Â super<span class="hljs-selector-class">.onScrolled</span>(recyclerView, dx, dy);
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â if (!isLoading &amp;&amp; hasMoreData) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LinearLayoutManager layoutManager =
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   (LinearLayoutManager) recyclerView<span class="hljs-selector-class">.getLayoutManager</span>();
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (layoutManager != null) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â int visibleItemCount = layoutManager<span class="hljs-selector-class">.getChildCount</span>();
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â int totalItemCount = layoutManager<span class="hljs-selector-class">.getItemCount</span>();
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â int pastVisibleItems = layoutManager<span class="hljs-selector-class">.findFirstVisibleItemPosition</span>();
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å½“æ»šåŠ¨åˆ°æœ€åå‡ ä¸ªitemæ—¶ï¼ŒåŠ è½½æ›´å¤šæ•°æ®</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if ((visibleItemCount + pastVisibleItems) &gt;= totalItemCount
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â &amp;&amp; totalItemCount &gt; <span class="hljs-number">0</span>) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">loadNewsData</span>(currentPage + <span class="hljs-number">1</span>, false);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">setupRecyclerView</span>() {
 Â  Â  Â  Â newsAdapter = new <span class="hljs-built_in">NewsAdapter</span>(newsList, new NewsAdapter.OnItemClickListener() {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â  Â  Â  Â  Â public void onItemClick(NewsItem newsItem) {
 Â  Â  Â  Â  Â  Â  Â  Â if (listener != null) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â listener<span class="hljs-selector-class">.onNewsSelected</span>(newsItem);
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â  Â  Â  Â  Â public void onFavoriteClick(NewsItem newsItem) {
 Â  Â  Â  Â  Â  Â  Â  Â if (listener != null) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â listener<span class="hljs-selector-class">.onNewsFavorite</span>(newsItem);
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ›´æ–°æœ¬åœ°çŠ¶æ€</span>
 Â  Â  Â  Â  Â  Â  Â  Â newsItem<span class="hljs-selector-class">.setFavorite</span>(!newsItem.isFavorite());
 Â  Â  Â  Â  Â  Â  Â  Â newsAdapter<span class="hljs-selector-class">.notifyDataSetChanged</span>();
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â  Â  Â  Â  Â public void onShareClick(NewsItem newsItem) {
 Â  Â  Â  Â  Â  Â  Â  Â if (listener != null) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â listener<span class="hljs-selector-class">.onNewsShare</span>(newsItem);
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â recyclerView<span class="hljs-selector-class">.setLayoutManager</span>(new LinearLayoutManager(context));
 Â  Â  Â  Â recyclerView<span class="hljs-selector-class">.setAdapter</span>(newsAdapter);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// æ·»åŠ åˆ†å‰²çº¿</span>
 Â  Â  Â  Â recyclerView<span class="hljs-selector-class">.addItemDecoration</span>(new DividerItemDecoration(context,
 Â  Â  Â  Â  Â  Â DividerItemDecoration.VERTICAL));
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">loadNewsData</span>(int page, boolean isRefresh) {
 Â  Â  Â  Â if (isLoading) return;
â€‹
 Â  Â  Â  Â isLoading = true;
â€‹
 Â  Â  Â  Â if (isRefresh) {
 Â  Â  Â  Â  Â  Â currentPage = <span class="hljs-number">1</span>;
 Â  Â  Â  Â  Â  Â hasMoreData = true;
 Â  Â  Â  Â  Â  Â if (!swipeRefreshLayout.isRefreshing()) {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showLoading</span>(true);
 Â  Â  Â  Â  Â   }
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showLoadMore</span>(true);
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚å»¶è¿Ÿ</span>
 Â  Â  Â  Â new <span class="hljs-built_in">Handler</span>()<span class="hljs-selector-class">.postDelayed</span>(() -&gt; {
 Â  Â  Â  Â  Â  Â List&lt;NewsItem&gt; newData = NewsRepository<span class="hljs-selector-class">.getInstance</span>()
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.getNewsList</span>(page, <span class="hljs-number">20</span>);
â€‹
 Â  Â  Â  Â  Â  Â if (getActivity() == null) return; <span class="hljs-comment">// Fragmentå·²ç»detached</span>
â€‹
 Â  Â  Â  Â  Â  Â if (isRefresh) {
 Â  Â  Â  Â  Â  Â  Â  Â newsList<span class="hljs-selector-class">.clear</span>();
 Â  Â  Â  Â  Â  Â  Â  Â newsList<span class="hljs-selector-class">.addAll</span>(newData);
 Â  Â  Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â  Â  Â newsList<span class="hljs-selector-class">.addAll</span>(newData);
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ›´å¤šæ•°æ®</span>
 Â  Â  Â  Â  Â  Â hasMoreData = newData<span class="hljs-selector-class">.size</span>() &gt;= <span class="hljs-number">20</span>;
 Â  Â  Â  Â  Â  Â currentPage = page;
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ›´æ–°UI</span>
 Â  Â  Â  Â  Â  Â newsAdapter<span class="hljs-selector-class">.notifyDataSetChanged</span>();
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// éšè—åŠ è½½çŠ¶æ€</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showLoading</span>(false);
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showLoadMore</span>(false);
 Â  Â  Â  Â  Â  Â swipeRefreshLayout<span class="hljs-selector-class">.setRefreshing</span>(false);
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ˜¾ç¤ºç©ºçŠ¶æ€</span>
 Â  Â  Â  Â  Â  Â if (newsList.isEmpty()) {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showEmptyView</span>(true);
 Â  Â  Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showEmptyView</span>(false);
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â isLoading = false;
â€‹
 Â  Â  Â   }, <span class="hljs-number">1500</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿ1.5ç§’çš„ç½‘ç»œå»¶è¿Ÿ</span>
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â public void onRefresh() {
 Â  Â  Â  Â <span class="hljs-built_in">loadNewsData</span>(<span class="hljs-number">1</span>, true);
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">showLoading</span>(boolean show) {
 Â  Â  Â  Â progressBar<span class="hljs-selector-class">.setVisibility</span>(show ? View.VISIBLE : View.GONE);
 Â  Â  Â  Â if (show) {
 Â  Â  Â  Â  Â  Â recyclerView<span class="hljs-selector-class">.setVisibility</span>(View.GONE);
 Â  Â  Â  Â  Â  Â emptyView<span class="hljs-selector-class">.setVisibility</span>(View.GONE);
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">showLoadMore</span>(boolean show) {
 Â  Â  Â  Â if (newsAdapter != null) {
 Â  Â  Â  Â  Â  Â newsAdapter<span class="hljs-selector-class">.setLoading</span>(show);
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">showEmptyView</span>(boolean show) {
 Â  Â  Â  Â emptyView<span class="hljs-selector-class">.setVisibility</span>(show ? View.VISIBLE : View.GONE);
 Â  Â  Â  Â recyclerView<span class="hljs-selector-class">.setVisibility</span>(show ? View.GONE : View.VISIBLE);
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * åˆ·æ–°æ•°æ®
 Â  Â  */</span>
 Â  Â public void <span class="hljs-built_in">refresh</span>() {
 Â  Â  Â  Â if (swipeRefreshLayout != null &amp;&amp; !swipeRefreshLayout.isRefreshing()) {
 Â  Â  Â  Â  Â  Â swipeRefreshLayout<span class="hljs-selector-class">.setRefreshing</span>(true);
 Â  Â  Â   }
 Â  Â  Â  Â <span class="hljs-built_in">onRefresh</span>();
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * è·å–å½“å‰æ–°é—»åˆ—è¡¨
 Â  Â  */</span>
 Â  Â public List&lt;NewsItem&gt; <span class="hljs-built_in">getNewsList</span>() {
 Â  Â  Â  Â return new ArrayList&lt;&gt;(newsList);
 Â   }
}
</code></pre>
<p>"NewsListFragmentå®ç°äº†å®Œæ•´çš„æ–°é—»åˆ—è¡¨åŠŸèƒ½ï¼Œ"æå·¥è§£é‡Šé“ï¼Œ"åŒ…æ‹¬ä¸‹æ‹‰åˆ·æ–°ã€åŠ è½½æ›´å¤šã€ç©ºçŠ¶æ€æ˜¾ç¤ºç­‰ã€‚"</p>
<p>å¯¹åº”çš„å¸ƒå±€æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;!-- fragment_news_list.xml --&gt;
&lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout
 Â  Â xmlns:<span class="hljs-attr">android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
 Â  Â xmlns:<span class="hljs-attr">app</span>=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
 Â  Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/swipeRefreshLayout"</span>
 Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>&gt;
â€‹
 Â  Â &lt;FrameLayout
 Â  Â  Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â  Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>&gt;
â€‹
 Â  Â  Â  Â &lt;androidx.recyclerview.widget.RecyclerView
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/recyclerView"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">clipToPadding</span>=<span class="hljs-string">"false"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">paddingTop</span>=<span class="hljs-string">"8dp"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">paddingBottom</span>=<span class="hljs-string">"8dp"</span> /&gt;
â€‹
 Â  Â  Â  Â &lt;ProgressBar
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/progressBar"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"wrap_content"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_gravity</span>=<span class="hljs-string">"center"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">visibility</span>=<span class="hljs-string">"gone"</span> /&gt;
â€‹
 Â  Â  Â  Â &lt;LinearLayout
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/emptyView"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"wrap_content"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_gravity</span>=<span class="hljs-string">"center"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">orientation</span>=<span class="hljs-string">"vertical"</span>
 Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">visibility</span>=<span class="hljs-string">"gone"</span>&gt;
â€‹
 Â  Â  Â  Â  Â  Â &lt;ImageView
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"64dp"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"64dp"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_gravity</span>=<span class="hljs-string">"center_horizontal"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">src</span>=<span class="hljs-string">"@drawable/ic_empty_news"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">tint</span>=<span class="hljs-string">"@color/textSecondary"</span> /&gt;
â€‹
 Â  Â  Â  Â  Â  Â &lt;TextView
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"wrap_content"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_marginTop</span>=<span class="hljs-string">"16dp"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">text</span>=<span class="hljs-string">"æš‚æ— æ–°é—»"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">textColor</span>=<span class="hljs-string">"@color/textSecondary"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">textSize</span>=<span class="hljs-string">"16sp"</span> /&gt;
â€‹
 Â  Â  Â  Â  Â  Â &lt;Button
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/btnRetry"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"wrap_content"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">layout_marginTop</span>=<span class="hljs-string">"16dp"</span>
 Â  Â  Â  Â  Â  Â  Â  Â android:<span class="hljs-attr">text</span>=<span class="hljs-string">"é‡æ–°åŠ è½½"</span> /&gt;
â€‹
 Â  Â  Â  Â &lt;/LinearLayout&gt;
â€‹
 Â  Â &lt;/FrameLayout&gt;
â€‹
&lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;
</code></pre>
<h4 data-id="heading-15">ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºNewsDetailFragment</h4>
<p>"æ¥ä¸‹æ¥æ˜¯æ–°é—»è¯¦æƒ…Fragmentï¼š"</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// NewsDetailFragment.java</span>
public class NewsDetailFragment extends BaseFragment {
â€‹
 Â  Â private static final String ARG_NEWS_ITEM = "news_item";
 Â  Â private static final String TAG = "NewsDetailFragment";
â€‹
 Â  Â <span class="hljs-comment">// UIç»„ä»¶</span>
 Â  Â private TextView titleView;
 Â  Â private TextView contentView;
 Â  Â private TextView authorView;
 Â  Â private TextView timeView;
 Â  Â private ImageView coverImageView;
 Â  Â private WebView webView;
 Â  Â private FloatingActionButton fabFavorite;
 Â  Â private FloatingActionButton fabShare;
 Â  Â private ProgressBar progressBar;
â€‹
 Â  Â <span class="hljs-comment">// æ•°æ®</span>
 Â  Â private NewsItem newsItem;
 Â  Â private boolean isLoading = true;
â€‹
 Â  Â <span class="hljs-comment">// å›è°ƒæ¥å£</span>
 Â  Â public interface OnDetailInteractionListener {
 Â  Â  Â  Â void <span class="hljs-built_in">onNewsShare</span>(NewsItem newsItem);
 Â  Â  Â  Â void <span class="hljs-built_in">onNewsFavorite</span>(NewsItem newsItem, boolean isFavorite);
 Â  Â  Â  Â void <span class="hljs-built_in">onAuthorClick</span>(String authorId);
 Â   }
â€‹
 Â  Â private OnDetailInteractionListener listener;
â€‹
 Â  Â public static NewsDetailFragment <span class="hljs-built_in">newInstance</span>(NewsItem newsItem) {
 Â  Â  Â  Â NewsDetailFragment fragment = new <span class="hljs-built_in">NewsDetailFragment</span>();
 Â  Â  Â  Â Bundle args = new <span class="hljs-built_in">Bundle</span>();
 Â  Â  Â  Â args<span class="hljs-selector-class">.putParcelable</span>(ARG_NEWS_ITEM, newsItem);
 Â  Â  Â  Â fragment<span class="hljs-selector-class">.setArguments</span>(args);
 Â  Â  Â  Â return fragment;
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â public void onAttach(<span class="hljs-keyword">@NonNull</span> Context context) {
 Â  Â  Â  Â super<span class="hljs-selector-class">.onAttach</span>(context);
 Â  Â  Â  Â if (context instanceof OnDetailInteractionListener) {
 Â  Â  Â  Â  Â  Â listener = (OnDetailInteractionListener) context;
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â protected int getLayoutId() {
 Â  Â  Â  Â return R<span class="hljs-selector-class">.layout</span><span class="hljs-selector-class">.fragment_news_detail</span>;
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â protected void initView() {
 Â  Â  Â  Â titleView = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.news_title);
 Â  Â  Â  Â contentView = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.news_content);
 Â  Â  Â  Â authorView = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.news_author);
 Â  Â  Â  Â timeView = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.news_time);
 Â  Â  Â  Â coverImageView = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.news_cover);
 Â  Â  Â  Â webView = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.news_webview);
 Â  Â  Â  Â fabFavorite = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.fab_favorite);
 Â  Â  Â  Â fabShare = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.fab_share);
 Â  Â  Â  Â progressBar = rootView<span class="hljs-selector-class">.findViewById</span>(R.id.progressBar);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½®WebView</span>
 Â  Â  Â  Â <span class="hljs-built_in">setupWebView</span>();
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// åˆå§‹çŠ¶æ€</span>
 Â  Â  Â  Â <span class="hljs-built_in">showLoading</span>(true);
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â protected void initData() {
 Â  Â  Â  Â Bundle args = <span class="hljs-built_in">getArguments</span>();
 Â  Â  Â  Â if (args != null) {
 Â  Â  Â  Â  Â  Â newsItem = args<span class="hljs-selector-class">.getParcelable</span>(ARG_NEWS_ITEM);
 Â  Â  Â  Â  Â  Â if (newsItem != null) {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">loadNewsDetail</span>();
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â protected void initListener() {
 Â  Â  Â  Â <span class="hljs-comment">// æ”¶è—æŒ‰é’®ç‚¹å‡»</span>
 Â  Â  Â  Â fabFavorite<span class="hljs-selector-class">.setOnClickListener</span>(v -&gt; {
 Â  Â  Â  Â  Â  Â if (newsItem != null &amp;&amp; listener != null) {
 Â  Â  Â  Â  Â  Â  Â  Â boolean newFavoriteState = !newsItem<span class="hljs-selector-class">.isFavorite</span>();
 Â  Â  Â  Â  Â  Â  Â  Â newsItem<span class="hljs-selector-class">.setFavorite</span>(newFavoriteState);
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">updateFavoriteIcon</span>(newFavoriteState);
 Â  Â  Â  Â  Â  Â  Â  Â listener<span class="hljs-selector-class">.onNewsFavorite</span>(newsItem, newFavoriteState);
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// åˆ†äº«æŒ‰é’®ç‚¹å‡»</span>
 Â  Â  Â  Â fabShare<span class="hljs-selector-class">.setOnClickListener</span>(v -&gt; {
 Â  Â  Â  Â  Â  Â if (newsItem != null &amp;&amp; listener != null) {
 Â  Â  Â  Â  Â  Â  Â  Â listener<span class="hljs-selector-class">.onNewsShare</span>(newsItem);
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// ä½œè€…ç‚¹å‡»</span>
 Â  Â  Â  Â authorView<span class="hljs-selector-class">.setOnClickListener</span>(v -&gt; {
 Â  Â  Â  Â  Â  Â if (newsItem != null &amp;&amp; listener != null) {
 Â  Â  Â  Â  Â  Â  Â  Â listener<span class="hljs-selector-class">.onAuthorClick</span>(newsItem.getAuthorId());
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">setupWebView</span>() {
 Â  Â  Â  Â WebSettings webSettings = webView<span class="hljs-selector-class">.getSettings</span>();
 Â  Â  Â  Â webSettings<span class="hljs-selector-class">.setJavaScriptEnabled</span>(true);
 Â  Â  Â  Â webSettings<span class="hljs-selector-class">.setDomStorageEnabled</span>(true);
 Â  Â  Â  Â webSettings<span class="hljs-selector-class">.setAppCacheEnabled</span>(true);
 Â  Â  Â  Â webSettings<span class="hljs-selector-class">.setCacheMode</span>(WebSettings.LOAD_DEFAULT);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// å¯ç”¨ç¼©æ”¾</span>
 Â  Â  Â  Â webSettings<span class="hljs-selector-class">.setSupportZoom</span>(true);
 Â  Â  Â  Â webSettings<span class="hljs-selector-class">.setBuiltInZoomControls</span>(true);
 Â  Â  Â  Â webSettings<span class="hljs-selector-class">.setDisplayZoomControls</span>(false);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// å¯ç”¨å“åº”å¼å¸ƒå±€</span>
 Â  Â  Â  Â webSettings<span class="hljs-selector-class">.setUseWideViewPort</span>(true);
 Â  Â  Â  Â webSettings<span class="hljs-selector-class">.setLoadWithOverviewMode</span>(true);
â€‹
 Â  Â  Â  Â webView<span class="hljs-selector-class">.setWebViewClient</span>(new WebViewClient() {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â  Â  Â  Â  Â public void onPageStarted(WebView view, String url, Bitmap favicon) {
 Â  Â  Â  Â  Â  Â  Â  Â super<span class="hljs-selector-class">.onPageStarted</span>(view, url, favicon);
 Â  Â  Â  Â  Â  Â  Â  Â isLoading = true;
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">updateLoadingState</span>();
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â  Â  Â  Â  Â public void onPageFinished(WebView view, String url) {
 Â  Â  Â  Â  Â  Â  Â  Â super<span class="hljs-selector-class">.onPageFinished</span>(view, url);
 Â  Â  Â  Â  Â  Â  Â  Â isLoading = false;
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">updateLoadingState</span>();
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â  Â  Â  Â  Â public void onReceivedError(WebView view, int errorCode,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  String description, String failingUrl) {
 Â  Â  Â  Â  Â  Â  Â  Â super<span class="hljs-selector-class">.onReceivedError</span>(view, errorCode, description, failingUrl);
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showError</span>("åŠ è½½å¤±è´¥ï¼š" + description);
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">loadNewsDetail</span>() {
 Â  Â  Â  Â if (newsItem == null) return;
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½®åŸºæœ¬ä¿¡æ¯</span>
 Â  Â  Â  Â titleView<span class="hljs-selector-class">.setText</span>(newsItem.getTitle());
 Â  Â  Â  Â authorView<span class="hljs-selector-class">.setText</span>("ä½œè€…ï¼š" + newsItem.getAuthor());
 Â  Â  Â  Â timeView<span class="hljs-selector-class">.setText</span>(formatTime(newsItem.getPublishTime()));
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// åŠ è½½å°é¢å›¾ç‰‡</span>
 Â  Â  Â  Â if (!TextUtils.isEmpty(newsItem.getCoverImageUrl())) {
 Â  Â  Â  Â  Â  Â Picasso<span class="hljs-selector-class">.get</span>()
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.load</span>(newsItem.getCoverImageUrl())
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.placeholder</span>(R.drawable.placeholder_news)
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.error</span>(R.drawable.error_news)
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.into</span>(coverImageView);
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â coverImageView<span class="hljs-selector-class">.setVisibility</span>(View.GONE);
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// æ›´æ–°æ”¶è—æŒ‰é’®çŠ¶æ€</span>
 Â  Â  Â  Â <span class="hljs-built_in">updateFavoriteIcon</span>(newsItem.isFavorite());
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// åŠ è½½è¯¦ç»†å†…å®¹</span>
 Â  Â  Â  Â <span class="hljs-built_in">loadDetailedContent</span>();
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">loadDetailedContent</span>() {
 Â  Â  Â  Â <span class="hljs-comment">// æ¨¡æ‹ŸåŠ è½½è¯¦ç»†å†…å®¹</span>
 Â  Â  Â  Â new <span class="hljs-built_in">Handler</span>()<span class="hljs-selector-class">.postDelayed</span>(() -&gt; {
 Â  Â  Â  Â  Â  Â if (getActivity() == null) return;
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¦‚æœæœ‰HTMLå†…å®¹ï¼Œä½¿ç”¨WebViewæ˜¾ç¤º</span>
 Â  Â  Â  Â  Â  Â if (!TextUtils.isEmpty(newsItem.getHtmlContent())) {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">loadHtmlContent</span>(newsItem.getHtmlContent());
 Â  Â  Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¦åˆ™æ˜¾ç¤ºçº¯æ–‡æœ¬å†…å®¹</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">loadTextContent</span>(newsItem.getContent());
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â isLoading = false;
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">updateLoadingState</span>();
â€‹
 Â  Â  Â   }, <span class="hljs-number">1000</span>);
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">loadHtmlContent</span>(String htmlContent) {
 Â  Â  Â  Â <span class="hljs-comment">// æ„å»ºå®Œæ•´çš„HTMLé¡µé¢</span>
 Â  Â  Â  Â String <span class="hljs-selector-tag">html</span> = <span class="hljs-built_in">buildHtmlPage</span>(htmlContent);
 Â  Â  Â  Â webView<span class="hljs-selector-class">.loadDataWithBaseURL</span>(null, html, "text/html", "UTF-<span class="hljs-number">8</span>", null);
â€‹
 Â  Â  Â  Â webView<span class="hljs-selector-class">.setVisibility</span>(View.VISIBLE);
 Â  Â  Â  Â contentView<span class="hljs-selector-class">.setVisibility</span>(View.GONE);
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">loadTextContent</span>(String textContent) {
 Â  Â  Â  Â contentView<span class="hljs-selector-class">.setText</span>(textContent);
 Â  Â  Â  Â contentView<span class="hljs-selector-class">.setVisibility</span>(View.VISIBLE);
 Â  Â  Â  Â webView<span class="hljs-selector-class">.setVisibility</span>(View.GONE);
 Â   }
â€‹
 Â  Â private String <span class="hljs-built_in">buildHtmlPage</span>(String content) {
 Â  Â  Â  Â StringBuilder <span class="hljs-selector-tag">html</span> = new <span class="hljs-built_in">StringBuilder</span>();
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("&lt;!DOCTYPE html&gt;");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("&lt;html&gt;");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("&lt;head&gt;");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("&lt;meta charset="UTF-<span class="hljs-number">8</span>"&gt;");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("&lt;meta name="viewport" content="width=device-width, initial-scale=<span class="hljs-number">1.0</span>"&gt;");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("&lt;style&gt;");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("body { font-family: Arial, sans-serif; font-size: <span class="hljs-number">16px</span>; line-height: <span class="hljs-number">1.6</span>; margin: <span class="hljs-number">16px</span>; }");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("img { max-width: <span class="hljs-number">100%</span>; height: auto; }");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("p { margin: <span class="hljs-number">16px</span> <span class="hljs-number">0</span>; }");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("h1, h2, h3 { color: #<span class="hljs-number">333</span>; }");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("&lt;/style&gt;");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("&lt;/head&gt;");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("&lt;body&gt;");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>(content);
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("&lt;/body&gt;");
 Â  Â  Â  Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>("&lt;/html&gt;");
 Â  Â  Â  Â return <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.toString</span>();
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">updateLoadingState</span>() {
 Â  Â  Â  Â if (isLoading) {
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showLoading</span>(true);
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showLoading</span>(false);
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">showLoading</span>(boolean show) {
 Â  Â  Â  Â progressBar<span class="hljs-selector-class">.setVisibility</span>(show ? View.VISIBLE : View.GONE);
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">showError</span>(String error) {
 Â  Â  Â  Â if (getContext() != null) {
 Â  Â  Â  Â  Â  Â Toast<span class="hljs-selector-class">.makeText</span>(getContext(), error, Toast<span class="hljs-selector-class">.LENGTH_SHORT</span>)<span class="hljs-selector-class">.show</span>();
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">updateFavoriteIcon</span>(boolean isFavorite) {
 Â  Â  Â  Â fabFavorite<span class="hljs-selector-class">.setImageResource</span>(isFavorite ?
 Â  Â  Â  Â  Â  Â R.drawable.ic_favorite_filled : R.drawable.ic_favorite_border);
 Â   }
â€‹
 Â  Â private String <span class="hljs-built_in">formatTime</span>(long timestamp) {
 Â  Â  Â  Â Date date = new <span class="hljs-built_in">Date</span>(timestamp);
 Â  Â  Â  Â SimpleDateFormat format = new <span class="hljs-built_in">SimpleDateFormat</span>("yyyy-MM-dd HH:mm", Locale.getDefault());
 Â  Â  Â  Â return format<span class="hljs-selector-class">.format</span>(date);
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ›´æ–°æ–°é—»å†…å®¹
 Â  Â  */</span>
 Â  Â public void <span class="hljs-built_in">updateNews</span>(NewsItem newsItem) {
 Â  Â  Â  Â this<span class="hljs-selector-class">.newsItem</span> = newsItem;
 Â  Â  Â  Â if (isAdded()) {
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">loadNewsDetail</span>();
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * åˆ†äº«æ–°é—»
 Â  Â  */</span>
 Â  Â public void <span class="hljs-built_in">shareNews</span>() {
 Â  Â  Â  Â if (newsItem != null &amp;&amp; listener != null) {
 Â  Â  Â  Â  Â  Â listener<span class="hljs-selector-class">.onNewsShare</span>(newsItem);
 Â  Â  Â   }
 Â   }
}
</code></pre>
<h3 data-id="heading-16">Activityçš„é‡æ„</h3>
<p>"ç°åœ¨Fragmentéƒ½å‡†å¤‡å¥½äº†ï¼Œè®©æˆ‘ä»¬é‡æ„Activityï¼š"æå·¥å¼€å§‹åˆ›å»ºæ–°çš„Activityç»“æ„ã€‚</p>
<h4 data-id="heading-17">å•Activityæ¶æ„</h4>
<p>"ç°ä»£Androidå¼€å‘æ¨èä½¿ç”¨å•Activity + å¤šFragmentçš„æ¶æ„ï¼Œ"æå·¥è§£é‡Šé“ï¼Œ"è¿™æ ·å¯ä»¥é¿å…Activityä¹‹é—´è·³è½¬çš„å¼€é”€ï¼ŒåŒæ—¶æä¾›æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚"</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// MainActivity.java</span>
public class MainActivity extends AppCompatActivity implements
 Â  Â  Â  Â NewsListFragment<span class="hljs-selector-class">.OnNewsInteractionListener</span>,
 Â  Â  Â  Â NewsDetailFragment<span class="hljs-selector-class">.OnDetailInteractionListener</span> {
â€‹
 Â  Â private static final String TAG = "MainActivity";
â€‹
 Â  Â <span class="hljs-comment">// Fragmentå®¹å™¨ID</span>
 Â  Â private static final int FRAGMENT_CONTAINER_ID = R<span class="hljs-selector-class">.id</span><span class="hljs-selector-class">.fragment_container</span>;
â€‹
 Â  Â <span class="hljs-comment">// å½“å‰æ˜¾ç¤ºçš„Fragment</span>
 Â  Â private Fragment currentFragment;
â€‹
 Â  Â <span class="hljs-comment">// æ˜¯å¦æ˜¯å¹³æ¿å¸ƒå±€</span>
 Â  Â private boolean isTwoPane;
â€‹
 Â  Â <span class="hljs-comment">// Fragmentå¼•ç”¨</span>
 Â  Â private NewsListFragment newsListFragment;
 Â  Â private NewsDetailFragment newsDetailFragment;
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â protected void onCreate(Bundle savedInstanceState) {
 Â  Â  Â  Â super<span class="hljs-selector-class">.onCreate</span>(savedInstanceState);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// æ ¹æ®è®¾å¤‡ç±»å‹é€‰æ‹©ä¸åŒçš„å¸ƒå±€</span>
 Â  Â  Â  Â if (isTablet()) {
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setContentView</span>(R.layout.activity_main_tablet);
 Â  Â  Â  Â  Â  Â isTwoPane = true;
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setContentView</span>(R.layout.activity_main_phone);
 Â  Â  Â  Â  Â  Â isTwoPane = false;
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â <span class="hljs-built_in">initFragments</span>();
â€‹
 Â  Â  Â  Â if (savedInstanceState == null) {
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">showNewsList</span>();
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â private boolean <span class="hljs-built_in">isTablet</span>() {
 Â  Â  Â  Â return <span class="hljs-built_in">getResources</span>()<span class="hljs-selector-class">.getBoolean</span>(R.bool.isTablet);
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">initFragments</span>() {
 Â  Â  Â  Â FragmentManager fm = <span class="hljs-built_in">getSupportFragmentManager</span>();
â€‹
 Â  Â  Â  Â newsListFragment = (NewsListFragment) fm<span class="hljs-selector-class">.findFragmentByTag</span>("news_list");
 Â  Â  Â  Â newsDetailFragment = (NewsDetailFragment) fm<span class="hljs-selector-class">.findFragmentByTag</span>("news_detail");
â€‹
 Â  Â  Â  Â if (newsListFragment == null) {
 Â  Â  Â  Â  Â  Â newsListFragment = NewsListFragment<span class="hljs-selector-class">.newInstance</span>();
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â if (newsDetailFragment == null &amp;&amp; isTwoPane) {
 Â  Â  Â  Â  Â  Â newsDetailFragment = NewsDetailFragment<span class="hljs-selector-class">.newInstance</span>(null);
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">showNewsList</span>() {
 Â  Â  Â  Â FragmentTransaction ft = <span class="hljs-built_in">getSupportFragmentManager</span>()<span class="hljs-selector-class">.beginTransaction</span>();
â€‹
 Â  Â  Â  Â if (isTwoPane) {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¹³æ¿ï¼šæ˜¾ç¤ºåˆ—è¡¨å’Œè¯¦æƒ…</span>
 Â  Â  Â  Â  Â  Â if (newsDetailFragment == null) {
 Â  Â  Â  Â  Â  Â  Â  Â newsDetailFragment = NewsDetailFragment<span class="hljs-selector-class">.newInstance</span>(null);
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â ft<span class="hljs-selector-class">.replace</span>(R.id.news_list_container, newsListFragment, "news_list");
 Â  Â  Â  Â  Â  Â ft<span class="hljs-selector-class">.replace</span>(R.id.news_detail_container, newsDetailFragment, "news_detail");
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ‰‹æœºï¼šåªæ˜¾ç¤ºåˆ—è¡¨</span>
 Â  Â  Â  Â  Â  Â ft<span class="hljs-selector-class">.replace</span>(FRAGMENT_CONTAINER_ID, newsListFragment, "news_list");
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â ft<span class="hljs-selector-class">.commit</span>();
 Â  Â  Â  Â currentFragment = newsListFragment;
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â public void onNewsSelected(NewsItem newsItem) {
 Â  Â  Â  Â if (isTwoPane) {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¹³æ¿ï¼šæ›´æ–°è¯¦æƒ…Fragment</span>
 Â  Â  Â  Â  Â  Â if (newsDetailFragment != null) {
 Â  Â  Â  Â  Â  Â  Â  Â newsDetailFragment<span class="hljs-selector-class">.updateNews</span>(newsItem);
 Â  Â  Â  Â  Â   }
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ‰‹æœºï¼šæ›¿æ¢ä¸ºè¯¦æƒ…Fragment</span>
 Â  Â  Â  Â  Â  Â newsDetailFragment = NewsDetailFragment<span class="hljs-selector-class">.newInstance</span>(newsItem);
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">getSupportFragmentManager</span>()
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.beginTransaction</span>()
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.replace</span>(FRAGMENT_CONTAINER_ID, newsDetailFragment, "news_detail")
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.addToBackStack</span>("news_detail")
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.commit</span>();
â€‹
 Â  Â  Â  Â  Â  Â currentFragment = newsDetailFragment;
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â public void onNewsFavorite(NewsItem newsItem) {
 Â  Â  Â  Â <span class="hljs-comment">// å¤„ç†æ”¶è—é€»è¾‘</span>
 Â  Â  Â  Â NewsRepository<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.updateFavoriteStatus</span>(newsItem);
 Â  Â  Â  Â Toast<span class="hljs-selector-class">.makeText</span>(this, "å·²" + (newsItem.isFavorite() ? "æ”¶è—" : <span class="hljs-string">"å–æ¶ˆæ”¶è—"</span>),
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Toast.LENGTH_SHORT).<span class="hljs-built_in">show</span>();
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â public void onNewsShare(NewsItem newsItem) {
 Â  Â  Â  Â <span class="hljs-comment">// å¤„ç†åˆ†äº«é€»è¾‘</span>
 Â  Â  Â  Â <span class="hljs-built_in">shareNews</span>(newsItem);
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â public void onAuthorClick(String authorId) {
 Â  Â  Â  Â <span class="hljs-comment">// è·³è½¬åˆ°ä½œè€…é¡µé¢</span>
 Â  Â  Â  Â AuthorFragment authorFragment = AuthorFragment<span class="hljs-selector-class">.newInstance</span>(authorId);
â€‹
 Â  Â  Â  Â <span class="hljs-built_in">getSupportFragmentManager</span>()
 Â  Â  Â  Â  Â   <span class="hljs-selector-class">.beginTransaction</span>()
 Â  Â  Â  Â  Â   <span class="hljs-selector-class">.replace</span>(FRAGMENT_CONTAINER_ID, authorFragment, "author")
 Â  Â  Â  Â  Â   <span class="hljs-selector-class">.addToBackStack</span>("author")
 Â  Â  Â  Â  Â   <span class="hljs-selector-class">.commit</span>();
â€‹
 Â  Â  Â  Â currentFragment = authorFragment;
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â public void onNewsFavorite(NewsItem newsItem, boolean isFavorite) {
 Â  Â  Â  Â <span class="hljs-comment">// å¤„ç†è¯¦æƒ…é¡µé¢çš„æ”¶è—æ“ä½œ</span>
 Â  Â  Â  Â NewsRepository<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.updateFavoriteStatus</span>(newsItem);
 Â  Â  Â  Â Toast<span class="hljs-selector-class">.makeText</span>(this, "å·²" + (isFavorite ? "æ”¶è—" : "å–æ¶ˆæ”¶è—"),
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Toast<span class="hljs-selector-class">.LENGTH_SHORT</span>)<span class="hljs-selector-class">.show</span>();
 Â   }
â€‹
 Â  Â private void <span class="hljs-built_in">shareNews</span>(NewsItem newsItem) {
 Â  Â  Â  Â Intent shareIntent = new <span class="hljs-built_in">Intent</span>(Intent.ACTION_SEND);
 Â  Â  Â  Â shareIntent<span class="hljs-selector-class">.setType</span>("text/plain");
 Â  Â  Â  Â shareIntent<span class="hljs-selector-class">.putExtra</span>(Intent.EXTRA_SUBJECT, newsItem.getTitle());
 Â  Â  Â  Â shareIntent<span class="hljs-selector-class">.putExtra</span>(Intent.EXTRA_TEXT, newsItem.getTitle() + "\n" + newsItem<span class="hljs-selector-class">.getShareUrl</span>());
 Â  Â  Â  Â <span class="hljs-built_in">startActivity</span>(Intent.createChooser(shareIntent, "åˆ†äº«æ–°é—»"));
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">@Override</span>
 Â  Â public void onBackPressed() {
 Â  Â  Â  Â FragmentManager fm = <span class="hljs-built_in">getSupportFragmentManager</span>();
â€‹
 Â  Â  Â  Â if (fm.getBackStackEntryCount() &gt; <span class="hljs-number">0</span>) {
 Â  Â  Â  Â  Â  Â fm<span class="hljs-selector-class">.popBackStack</span>();
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â super<span class="hljs-selector-class">.onBackPressed</span>();
 Â  Â  Â   }
 Â   }
}
</code></pre>
<p>å¯¹åº”çš„å¸ƒå±€æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- activity_main_phone.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/fragment_container"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span> /&gt;</span>
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- activity_main_tablet.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
    <span class="hljs-attr">android:baselineAligned</span>=<span class="hljs-string">"false"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å·¦ä¾§ï¼šæ–°é—»åˆ—è¡¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/news_list_container"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"0dp"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span> /&gt;</span>

    <span class="hljs-comment">&lt;!-- å³ä¾§ï¼šæ–°é—»è¯¦æƒ… --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/news_detail_container"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"0dp"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span> /&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<h3 data-id="heading-18">é‡æ„å®Œæˆï¼šæ¨¡å—åŒ–çš„èƒœåˆ©</h3>
<p>ç»è¿‡ä¸€ä¸‹åˆçš„é‡æ„ï¼ŒNewsHubåº”ç”¨çš„æ¶æ„ç„•ç„¶ä¸€æ–°ã€‚å°å®‰çœ‹ç€é‡æ„åçš„ä»£ç ï¼Œè„¸ä¸Šéœ²å‡ºäº†æ»¡æ„çš„ç¬‘å®¹ã€‚</p>
<p>"æå·¥ï¼Œè¿™ç®€ç›´å¤ªç¥å¥‡äº†ï¼"å°å®‰å…´å¥‹åœ°è¯´é“ï¼Œ"ä»£ç é‡å¤ç‡ä»70%é™åˆ°äº†å‡ ä¹ä¸º0ï¼Œè€Œä¸”é€»è¾‘æ›´æ¸…æ™°äº†ï¼"</p>
<p>æå·¥ç¬‘ç€ç‚¹ç‚¹å¤´ï¼š"è¿™å°±æ˜¯Fragmentçš„åŠ›é‡ã€‚è®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹è¿™æ¬¡é‡æ„çš„æˆæœï¼š"</p>
<h4 data-id="heading-19">é‡æ„å‰åå¯¹æ¯”</h4>
<p><strong>é‡æ„å‰çš„é—®é¢˜ï¼š</strong></p>
<ol start="0">
<li>ä»£ç é‡å¤ç‡é«˜ï¼ˆ70%ä»¥ä¸Šï¼‰</li>
<li>æ‰‹æœº/å¹³æ¿é€»è¾‘æ··åˆåœ¨ä¸€ä¸ªActivityä¸­</li>
<li>éš¾ä»¥ç»´æŠ¤å’Œæ‰©å±•</li>
<li>è¿åäº†å•ä¸€èŒè´£åŸåˆ™</li>
</ol>
<p><strong>é‡æ„åçš„ä¼˜åŠ¿ï¼š</strong></p>
<ol start="0">
<li><strong>ä»£ç å¤ç”¨æ€§å¤§å¹…æå‡</strong></li>
</ol>
<pre><code class="hljs language-ini" lang="ini">// NewsListFragmentåœ¨æ‰‹æœºå’Œå¹³æ¿ä¸Šå®Œå…¨å¤ç”¨
NewsListFragment <span class="hljs-attr">listFragment</span> = NewsListFragment.newInstance()<span class="hljs-comment">;</span>
</code></pre>
<ol start="2">
<li><strong>èŒè´£åˆ†ç¦»æ›´æ¸…æ™°</strong></li>
</ol>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// Activityï¼šè´Ÿè´£Fragmentçš„ç»„è£…å’Œç®¡ç†</span>
<span class="hljs-comment">// NewsListFragmentï¼šè´Ÿè´£æ–°é—»åˆ—è¡¨çš„æ˜¾ç¤ºå’Œäº¤äº’</span>
<span class="hljs-comment">// NewsDetailFragmentï¼šè´Ÿè´£æ–°é—»è¯¦æƒ…çš„æ˜¾ç¤ºå’Œäº¤äº’</span>
</code></pre>
<ol start="3">
<li><strong>æ‰©å±•æ€§æ›´å¼º</strong></li>
</ol>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è½»æ¾æ·»åŠ æ–°çš„Fragment</span>
UserFragment userFragment = UserFragment<span class="hljs-selector-class">.newInstance</span>();
<span class="hljs-built_in">getSupportFragmentManager</span>()
    <span class="hljs-selector-class">.beginTransaction</span>()
    <span class="hljs-selector-class">.replace</span>(R.id.fragment_container, userFragment)
    <span class="hljs-selector-class">.addToBackStack</span>("user")
    <span class="hljs-selector-class">.commit</span>();
</code></pre>
<ol start="4">
<li><strong>æµ‹è¯•æ›´å®¹æ˜“</strong></li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¯ä¸ªFragmentå¯ä»¥ç‹¬ç«‹æµ‹è¯•</span>
<span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testNewsListFragment</span><span class="hljs-params">()</span> {
    <span class="hljs-type">NewsListFragment</span> <span class="hljs-variable">fragment</span> <span class="hljs-operator">=</span> NewsListFragment.newInstance();
    <span class="hljs-comment">// æµ‹è¯•Fragmentçš„é€»è¾‘</span>
}
</code></pre>
<h4 data-id="heading-20">ä»£ç è´¨é‡æŒ‡æ ‡å¯¹æ¯”</h4>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>é‡æ„å‰</th><th>é‡æ„å</th><th>æ”¹å–„å¹…åº¦</th></tr></thead><tbody><tr><td>ä»£ç é‡å¤ç‡</td><td>70%</td><td>5%</td><td>â†“93%</td></tr><tr><td>ç±»çš„å¹³å‡è¡Œæ•°</td><td>450è¡Œ</td><td>200è¡Œ</td><td>â†“56%</td></tr><tr><td>åœˆå¤æ‚åº¦</td><td>18</td><td>8</td><td>â†“56%</td></tr><tr><td>å•å…ƒæµ‹è¯•è¦†ç›–ç‡</td><td>35%</td><td>85%</td><td>â†‘143%</td></tr></tbody></table>
<h4 data-id="heading-21">Fragmentè®¾è®¡åŸåˆ™æ€»ç»“</h4>
<p>æå·¥åœ¨ç™½æ¿ä¸Šå†™ä¸‹äº†Fragmentçš„æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼š</p>
<p>"è®°ä½è¿™äº”ä¸ªFragmentè®¾è®¡åŸåˆ™ï¼Œä½ çš„ä»£ç ä¼šä¸€ç›´ä¿æŒé«˜è´¨é‡ï¼š"</p>
<ol start="0">
<li>
<p><strong>å•ä¸€èŒè´£åŸåˆ™</strong></p>
<ul>
<li>æ¯ä¸ªFragmentåªè´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„UIåŠŸèƒ½</li>
<li>NewsListFragmentåªç®¡åˆ—è¡¨ï¼ŒNewsDetailFragmentåªç®¡è¯¦æƒ…</li>
</ul>
</li>
<li>
<p><strong>ä¾èµ–å€’ç½®åŸåˆ™</strong></p>
<ul>
<li>Fragmenté€šè¿‡æ¥å£ä¸Activityé€šä¿¡</li>
<li>ä¸ç›´æ¥ä¾èµ–å…·ä½“çš„Activityå®ç°</li>
</ul>
</li>
<li>
<p><strong>å¼€é—­åŸåˆ™</strong></p>
<ul>
<li>å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­</li>
<li>é€šè¿‡æ·»åŠ æ–°Fragmentæ¥æ‰©å±•åŠŸèƒ½</li>
</ul>
</li>
<li>
<p><strong>ç»„åˆä¼˜äºç»§æ‰¿</strong></p>
<ul>
<li>Fragmentä½œä¸ºUIç»„ä»¶çš„ç»„åˆå•å…ƒ</li>
<li>Activityé€šè¿‡ç»„åˆFragmentæ¥æ„å»ºå¤æ‚ç•Œé¢</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸæ„è¯†</strong></p>
<ul>
<li>æ­£ç¡®å¤„ç†Fragmentçš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>é¿å…åœ¨Fragmenté”€æ¯åæ‰§è¡Œå›è°ƒ</li>
</ul>
</li>
</ol>
<h3 data-id="heading-22">å±•æœ›æœªæ¥</h3>
<p>"å°å®‰ï¼Œä½ è§‰å¾—è¿™æ¬¡é‡æ„æœ€å¤§çš„æ”¶è·æ˜¯ä»€ä¹ˆï¼Ÿ"æå·¥é—®é“ã€‚</p>
<p>å°å®‰æ€è€ƒäº†ä¸€ä¼šå„¿ï¼Œè®¤çœŸåœ°å›ç­”ï¼š"æˆ‘è§‰å¾—æœ€å¤§çš„æ”¶è·æ˜¯ç†è§£äº†<strong>æ¨¡å—åŒ–æ€ç»´</strong>ã€‚ä»¥å‰æˆ‘æ€»æ˜¯æƒ³ç€æŠŠæ‰€æœ‰åŠŸèƒ½éƒ½å†™åœ¨ä¸€ä¸ªActivityé‡Œï¼Œç°åœ¨å­¦ä¼šäº†æŠŠå¤æ‚çš„åŠŸèƒ½æ‹†åˆ†æˆç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„æ¨¡å—ã€‚"</p>
<p>"éå¸¸å¥½ï¼"æå·¥èµè®¸åœ°ç‚¹å¤´ï¼Œ"è¿™æ­£æ˜¯Fragmentçš„æ ¸å¿ƒæ€æƒ³ã€‚è€Œä¸”è¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œéšç€ä½ å­¦ä¹ çš„æ·±å…¥ï¼Œä½ ä¼šå‘ç°è¿˜æœ‰æ›´å¤šç²¾å½©çš„å†…å®¹ï¼š"</p>
<ol start="0">
<li>
<p><strong>Fragmenté€šä¿¡çš„é«˜çº§æŠ€å·§</strong></p>
<ul>
<li>ViewModel + LiveData</li>
<li>Navigation Component</li>
<li>Shared ViewModel</li>
</ul>
</li>
<li>
<p><strong>Fragmentçš„æ€§èƒ½ä¼˜åŒ–</strong></p>
<ul>
<li>æ‡’åŠ è½½æœºåˆ¶</li>
<li>Viewç¼“å­˜ç­–ç•¥</li>
<li>å†…å­˜ç®¡ç†</li>
</ul>
</li>
<li>
<p><strong>Fragmentçš„è¿›é˜¶ç”¨æ³•</strong></p>
<ul>
<li>åµŒå¥—Fragment</li>
<li>ViewPager + Fragment</li>
<li>DialogFragment</li>
</ul>
</li>
<li>
<p><strong>Fragmentçš„æœ€ä½³å®è·µ</strong></p>
<ul>
<li>æ¶æ„æ¨¡å¼é›†æˆ</li>
<li>æµ‹è¯•ç­–ç•¥</li>
<li>è°ƒè¯•æŠ€å·§</li>
</ul>
</li>
</ol>
<p>"ä»ä¸‹èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢ç´¢Fragmentçš„ç”Ÿå‘½å‘¨æœŸã€‚"æå·¥çœ‹äº†ä¸€ä¸‹è¡¨ï¼Œ"ä½ ä¼šå‘ç°ï¼Œç†è§£ç”Ÿå‘½å‘¨æœŸæ˜¯æŒæ¡Fragmentçš„å…³é”®ã€‚"</p>
<p>å°å®‰å…´å¥‹åœ°çœ‹ç€å±å¹•ä¸Šé‡æ„åçš„ä»£ç ï¼Œä»¿ä½›çœ‹åˆ°äº†ä¸€ä¸ªå…¨æ–°çš„ä¸–ç•Œã€‚è¿™æ¬¡ä¸Fragmentçš„åˆè¯†ï¼Œä¸ä»…è§£å†³äº†ä»–çœ¼å‰çš„æŠ€æœ¯éš¾é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯æ‰“å¼€äº†ä¸€æ‰‡é€šå¾€Androidé«˜çº§å¼€å‘çš„å¤§é—¨ã€‚</p>
<p>å¤•é˜³è¥¿ä¸‹ï¼ŒåŠå…¬å®¤çš„ç¯å…‰é™†ç»­ç†„ç­ï¼Œä½†å°å®‰çš„ç¼–ç¨‹çƒ­æƒ…å´å‰æ‰€æœªæœ‰åœ°é«˜æ¶¨ã€‚ä»–è¿«ä¸åŠå¾…åœ°æƒ³è¦å¼€å§‹ä¸‹ä¸€æ®µå­¦ä¹ æ—…ç¨‹ï¼Œæ¢ç´¢Fragmentè¿™ä¸ªå¼ºå¤§ç»„ä»¶çš„æ›´å¤šå¥¥ç§˜ã€‚</p>
<p><strong>æ•…äº‹å®Œ</strong></p>
<hr/>
<h3 data-id="heading-23">çŸ¥è¯†è¦ç‚¹æ€»ç»“</h3>
<h4 data-id="heading-24">Fragmentçš„æ ¸å¿ƒæ¦‚å¿µ</h4>
<ol start="0">
<li><strong>Fragmentæ˜¯ä»€ä¹ˆ</strong>ï¼šUIæ¨¡å—åŒ–ç»„ä»¶ï¼Œå¯ä»¥åµŒå…¥Activityä¸­</li>
<li><strong>ä¸ºä»€ä¹ˆéœ€è¦Fragment</strong>ï¼šè§£å†³å¤šå±é€‚é…ã€ä»£ç å¤ç”¨ã€æ¨¡å—åŒ–å¼€å‘ç­‰é—®é¢˜</li>
<li><strong>Fragmentä¸Activityçš„å…³ç³»</strong>ï¼šå®¹å™¨ä¸æ¨¡å—çš„å…³ç³»ï¼ŒFragmentä¾èµ–Activity</li>
</ol>
<h4 data-id="heading-25">Fragmentçš„åˆ›å»ºæ–¹å¼</h4>
<ol start="0">
<li><strong>é™æ€åŠ è½½</strong>ï¼šåœ¨XMLä¸­ç›´æ¥å£°æ˜ï¼Œç®€å•ä½†ä¸çµæ´»</li>
<li><strong>åŠ¨æ€åŠ è½½</strong>ï¼šåœ¨ä»£ç ä¸­é€šè¿‡FragmentTransactionç®¡ç†ï¼Œçµæ´»æ€§é«˜</li>
<li><strong>å·¥å‚æ¨¡å¼</strong>ï¼šæ¨èçš„åˆ›å»ºæ–¹å¼ï¼Œç¡®ä¿å‚æ•°å®‰å…¨å’Œåˆ›å»ºç»Ÿä¸€</li>
</ol>
<h4 data-id="heading-26">Fragmentçš„æœ€ä½³å®è·µ</h4>
<ol start="0">
<li><strong>BaseFragmentè®¾è®¡</strong>ï¼šæå–é€šç”¨åŠŸèƒ½ï¼Œå‡å°‘ä»£ç é‡å¤</li>
<li><strong>æ¥å£å›è°ƒ</strong>ï¼šFragmentä¸Activityçš„å®‰å…¨é€šä¿¡æ–¹å¼</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šæ­£ç¡®å¤„ç†å„ä¸ªç”Ÿå‘½å‘¨æœŸé˜¶æ®µ</li>
<li><strong>å•Activityæ¶æ„</strong>ï¼šç°ä»£Androidå¼€å‘çš„æ¨èæ¨¡å¼</li>
</ol>
<h4 data-id="heading-27">å®æˆ˜æŠ€èƒ½</h4>
<ol start="0">
<li><strong>é‡æ„ç°æœ‰ä»£ç </strong>ï¼šå°†Activity-Basedæ¶æ„é‡æ„ä¸ºFragment-Based</li>
<li><strong>å¤šå±é€‚é…</strong>ï¼šä¸€å¥—ä»£ç é€‚é…æ‰‹æœºå’Œå¹³æ¿</li>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šå°†å¤æ‚åŠŸèƒ½æ‹†åˆ†ä¸ºç‹¬ç«‹æ¨¡å—</li>
<li><strong>ä»£ç è´¨é‡æå‡</strong>ï¼šé™ä½é‡å¤ç‡ï¼Œæé«˜å¯ç»´æŠ¤æ€§</li>
</ol>
<p>æœ¬ç« é€šè¿‡NewsHubåº”ç”¨çš„å®é™…æ¡ˆä¾‹ï¼Œå®Œæ•´å±•ç¤ºäº†Fragmentä»ç†è®ºåˆ°å®è·µçš„æ•´ä¸ªè¿‡ç¨‹ï¼Œä¸ºåç»­ç« èŠ‚çš„æ·±å…¥å­¦ä¹ å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Autoå¼€å‘ï¼ˆ0ï¼‰-å¼•è¨€]]></title>    <link>https://juejin.cn/post/7577278843234746411</link>    <guid>https://juejin.cn/post/7577278843234746411</guid>    <pubDate>2025-11-28T01:59:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577278843234746411" data-draft-id="7577291435160141865" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Autoå¼€å‘ï¼ˆ0ï¼‰-å¼•è¨€"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-28T01:59:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆéƒ½å¤§è è"/> <meta itemprop="url" content="https://juejin.cn/user/289926799429805"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Autoå¼€å‘ï¼ˆ0ï¼‰-å¼•è¨€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/289926799429805/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆéƒ½å¤§è è
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T01:59:35.000Z" title="Fri Nov 28 2025 01:59:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Head Unit Integration Guide (HUIG) 4.3</strong></h2>
<h3 data-id="heading-1"><strong>ç¬¬ 0 ç« ï¼šå¼•è¨€ï¼ˆIntroductionï¼‰</strong></h3>
<h4 data-id="heading-2"><strong>0. å¼•è¨€æ¦‚è¿°</strong></h4>
<p>å½“ä»Šçš„ç§»åŠ¨è®¾å¤‡é›†æˆäº†å°–ç«¯æŠ€æœ¯â€”â€”åŒ…æ‹¬æœ€æ–°çš„ç¡¬ä»¶ä¸è½¯ä»¶ã€é«˜é€Ÿç§»åŠ¨ç½‘ç»œï¼Œä»¥åŠä¸æ–­æ‰©å±•çš„äº’è”æœåŠ¡ä¸åº”ç”¨ç¨‹åºç”Ÿæ€ã€‚è¿™äº›æŠ€æœ¯çš„èåˆï¼Œä¸ºç”¨æˆ·æä¾›äº†å…¨æ–°çš„æ–¹å¼æ¥é€šä¿¡ã€äº«å—æ•°å­—å†…å®¹ã€è·å–ä¿¡æ¯ã€å­¦ä¹ ï¼Œå¹¶æ¢ç´¢å‘¨å›´ä¸–ç•Œã€‚</p>
<p>ç„¶è€Œï¼Œ<strong>è¿™äº›è®¾å¤‡å¹¶éä¸ºé©¾é©¶åœºæ™¯è®¾è®¡</strong>ã€‚åœ¨é©¾é©¶è¿‡ç¨‹ä¸­ç›´æ¥æ“ä½œæ‰‹æœºå­˜åœ¨æ˜¾è‘—çš„å®‰å…¨é£é™©ã€‚</p>
<p>ä¸ºæ­¤ï¼Œ<strong>Android Auto</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.android.com%2Fauto" target="_blank" title="https://www.android.com/auto" ref="nofollow noopener noreferrer">www.android.com/auto</a>ï¼‰åº”è¿è€Œç”Ÿã€‚å®ƒå®ç°äº†ç§»åŠ¨è®¾å¤‡ä¸è½¦è¾†ä¹‹é—´çš„æ— ç¼é›†æˆï¼Œä½¿é©¾é©¶å‘˜èƒ½å¤Ÿé€šè¿‡ä¸€ä¸ª<strong>æ›´ç®€å•ã€æ›´å®‰å…¨çš„è½¦è½½ç•Œé¢</strong>ï¼Œè®¿é—®å¹¶æ§åˆ¶ç§»åŠ¨è®¾å¤‡ä¸Šçš„æŠ€æœ¯åŠŸèƒ½ã€‚</p>
<p>æœ¬æŒ‡å—æè¿°äº†å¦‚ä½•é€šè¿‡ <strong>Android Auto Projection</strong>ï¼ˆAAPï¼‰ æŠ€æœ¯ï¼Œä½¿æ±½è½¦<strong>è½¦è½½ä¿¡æ¯å¨±ä¹ç³»ç»Ÿ</strong>ï¼ˆIVIï¼‰ èƒ½å¤Ÿåˆ©ç”¨ç°ä»£ç§»åŠ¨è®¾å¤‡çš„è®¡ç®—èƒ½åŠ›ã€è¿æ¥èƒ½åŠ›å’Œåº”ç”¨ç”Ÿæ€ã€‚<br/>
æœ¬æ–‡ä»¶é¢å‘å¸Œæœ›åœ¨å…¶<strong>è½¦æœº</strong>ï¼ˆHead Unit, HUï¼‰ çš„æ±½è½¦ä¿¡æ¯å¨±ä¹ç³»ç»Ÿå¼€å‘å›¢é˜Ÿï¼Œæ—¨åœ¨å¸®åŠ©å…¶é€šè¿‡ Android Auto è®¤è¯ã€‚</p>
<blockquote>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼š<br/>
æœ¬æŒ‡å—<strong>ä¸æ¶‰åŠ AAP åè®®åº•å±‚å®ç°ç»†èŠ‚</strong>ï¼ˆå¦‚åºåˆ—åŒ–æ ¼å¼ã€ç½‘ç»œå¸§ç»“æ„ç­‰ï¼‰ï¼Œè¿™äº›ç”± Google æä¾›çš„ <strong>Sender/Receiver åº“</strong> åœ¨ HU ä¸ç§»åŠ¨è®¾å¤‡ï¼ˆMDï¼‰ä¸¤ç«¯è‡ªåŠ¨å¤„ç†ã€‚<br/>
å¦‚éœ€åè®®ç»†èŠ‚ï¼Œè¯·å‚è€ƒï¼š</p>
<ul>
<li><a href="/auto/resources/receiver-lib" target="_blank" title="/auto/resources/receiver-lib">AAP Receiver Library æ–‡æ¡£</a></li>
<li><a href="/auto/resources/proto-spec" target="_blank" title="/auto/resources/proto-spec">Protocol Specificationï¼ˆåè®®è§„èŒƒï¼‰</a></li>
</ul>
</blockquote>
<hr/>
<h4 data-id="heading-3"><strong>0.1 è§„èŒƒæ€§ç”¨è¯­çº¦å®šï¼ˆConventionsï¼‰</strong></h4>
<p>æœ¬æ–‡æ¡£ä¸­ä½¿ç”¨çš„å…³é”®è¯ <strong>â€œMUSTâ€</strong>ï¼ˆå¿…é¡»ï¼‰ã€<strong>â€œMUST NOTâ€</strong>ï¼ˆä¸å¾—ï¼‰ã€<strong>â€œREQUIREDâ€</strong>ï¼ˆå¿…éœ€ï¼‰ã€<strong>â€œSHALLâ€</strong>ï¼ˆåº”ï¼‰ã€<strong>â€œSHALL NOTâ€</strong>ï¼ˆä¸åº”ï¼‰ã€<strong>â€œSHOULDâ€</strong>ï¼ˆå»ºè®®ï¼‰ã€<strong>â€œSHOULD NOTâ€</strong>ï¼ˆä¸å»ºè®®ï¼‰ã€<strong>â€œRECOMMENDEDâ€</strong>ï¼ˆæ¨èï¼‰ã€<strong>â€œMAYâ€</strong>ï¼ˆå¯ä»¥ï¼‰ã€<strong>â€œOPTIONALâ€</strong>ï¼ˆå¯é€‰ï¼‰ç­‰ï¼Œå‡éµå¾ª <strong>IETF RFC 2119 æ ‡å‡†</strong> çš„å®šä¹‰ã€‚</p>
<ul>
<li><strong>MUST / SHALL</strong>ï¼šè¡¨ç¤ºç»å¯¹å¼ºåˆ¶è¦æ±‚ï¼Œè¿åå°†å¯¼è‡´è®¤è¯å¤±è´¥ã€‚</li>
<li><strong>SHOULD / RECOMMENDED</strong>ï¼šå¼ºçƒˆå»ºè®®éµå¾ªï¼Œä»¥ç¡®ä¿æœ€ä½³ç”¨æˆ·ä½“éªŒã€‚</li>
<li><strong>MAY / OPTIONAL</strong>ï¼šå¯é€‰å®ç°ï¼Œä¸å½±å“åŸºæœ¬åŠŸèƒ½è®¤è¯ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-4">**0.2 å…³äº Android Auto Projectionï¼ˆAAPï¼‰</h4>
<p><strong>Android Auto Projection</strong>ï¼ˆAAPï¼‰ æ˜¯è¿æ¥ç§»åŠ¨è®¾å¤‡ä¸è½¦è¾†çš„æ¡¥æ¢ï¼Œä½¿é©¾é©¶å‘˜èƒ½å¤Ÿé€šè¿‡è½¦è¾†æä¾›çš„<strong>ç‰©ç†äººæœºäº¤äº’ç•Œé¢</strong>ï¼ˆHMIï¼‰ï¼ˆå¦‚è§¦æ‘¸å±ã€æ—‹é’®ã€è¯­éŸ³æŒ‰é’®ç­‰ï¼‰æ¥è®¿é—®ç§»åŠ¨è®¾å¤‡çš„åŠŸèƒ½ã€‚</p>
<p>åœ¨ AAP æ¶æ„ä¸­ï¼š</p>
<ul>
<li><strong>ç§»åŠ¨è®¾å¤‡</strong>ï¼ˆMDï¼‰è´Ÿè´£ç®¡ç†æ‰€æœ‰<strong>ç”¨æˆ·ç•Œé¢</strong>ï¼ˆUIï¼‰ã€<strong>åº”ç”¨é€»è¾‘</strong>ã€<strong>ç½‘ç»œè¿æ¥</strong>åŠ<strong>è®¡ç®—èµ„æº</strong>ï¼›</li>
<li><strong>è½¦æœº</strong>ï¼ˆHUï¼‰åˆ™ä½œä¸ºæ˜¾ç¤ºä¸è¾“å…¥ç»ˆç«¯ï¼Œæ¥æ”¶æ¥è‡ª MD çš„æŠ•å½±å†…å®¹ï¼Œå¹¶å°†ç”¨æˆ·æ“ä½œåé¦ˆå› MDã€‚</li>
</ul>
<p>è¿™ç§æ¶æ„å……åˆ†å‘æŒ¥äº†<strong>è½¦è¾†ä¸ç§»åŠ¨è®¾å¤‡å„è‡ªçš„ä¼˜åŠ¿</strong>ï¼Œå…±åŒæ‰“é€ æœ€ä¼˜é©¾é©¶ä½“éªŒï¼š</p>

















<table><thead><tr><th>æ¥æº</th><th>æä¾›çš„èƒ½åŠ›</th></tr></thead><tbody><tr><td><strong>è½¦è¾† HU</strong></td><td>â€¢ æ›´é€‚åˆé©¾é©¶åœºæ™¯çš„ HMIï¼ˆå¦‚å¤§æŒ‰é’®ã€è¯­éŸ³ä¼˜å…ˆï¼‰<br/>â€¢ é«˜ç²¾åº¦è½¦è¾†æ•°æ®ï¼ˆå¦‚ GPSã€è½®é€Ÿã€æ¡£ä½ã€ç‡ƒæ²¹çŠ¶æ€ç­‰ï¼‰ï¼Œæä¾›æ›´å‡†ç¡®çš„é©¾é©¶ç¯å¢ƒä¸Šä¸‹æ–‡</td></tr><tr><td><strong>ç§»åŠ¨è®¾å¤‡</strong>ï¼ˆMDï¼‰</td><td>â€¢ æœ€æ–°çš„è®¡ç®—ç¡¬ä»¶å¹³å°ï¼ˆå¦‚é«˜æ€§èƒ½ CPU/GPUï¼‰<br/>â€¢ æœ€æ–°çš„æ“ä½œç³»ç»Ÿä¸å®‰å…¨æ›´æ–°<br/>â€¢ é«˜é€Ÿç§»åŠ¨ç½‘ç»œï¼ˆ5G/4Gï¼‰è¿æ¥äº‘ç«¯æœåŠ¡<br/>â€¢ å¿«é€Ÿè¿­ä»£çš„è½¯ç¡¬ä»¶ç”Ÿæ€ï¼ˆæ¶ˆè´¹ç”µå­çº§æ›´æ–°èŠ‚å¥ï¼‰</td></tr></tbody></table>
<blockquote>
<p>âœ… <strong>æ ¸å¿ƒç†å¿µ</strong>ï¼š<strong>â€œApp åœ¨æ‰‹æœºè·‘ï¼Œç•Œé¢åœ¨è½¦æœºæ˜¾â€</strong> â€”â€” æ‰‹æœºæ˜¯â€œå¤§è„‘â€ï¼Œè½¦æœºæ˜¯â€œçœ¼ç›å’Œæ‰‹â€ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-5">**0.3 ä¼ è¾“å±‚ï¼ˆTransportï¼‰</h4>
<p>AAP åè®®æœ¬èº«æ˜¯<strong>ä¼ è¾“æ— å…³</strong>ï¼ˆtransport-agnosticï¼‰ çš„ï¼Œåªè¦ä¼ è¾“é€šé“å…·å¤‡<strong>è¶³å¤Ÿå¸¦å®½ä¸ä½å»¶è¿Ÿ</strong>ï¼Œå³å¯è¿è¡Œã€‚</p>
<p>ç›®å‰å®˜æ–¹å¹³å°æ”¯æŒçš„ä¼ è¾“æ–¹å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>USB 2.0</strong>ï¼šè‡ª Android Auto è¯ç”Ÿèµ·å³æ”¯æŒï¼Œä¸ºæœ‰çº¿è¿æ¥æ ‡å‡†ï¼›</li>
<li><strong>æ— çº¿å±€åŸŸç½‘</strong>ï¼ˆWi-Fiï¼‰ï¼šè‡ª AAP v1.4 èµ·æ”¯æŒï¼Œ<strong>è½¦æœºä½œä¸º Wi-Fi æ¥å…¥ç‚¹</strong>ï¼ˆAPï¼‰ï¼Œæ‰‹æœºè¿æ¥è‡³ HU å»ºç«‹ç‚¹å¯¹ç‚¹é€šä¿¡ã€‚</li>
</ul>
<blockquote>
<p>ğŸ“Œ <strong>å›¾ 0.1ï¼šAndroid Auto ç½‘ç»œæ ˆ</strong>ï¼ˆåŸæ–‡é…å›¾ï¼Œæ­¤å¤„ç•¥ï¼‰<br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8033d1ba58d436b8e7df0ea8a806889~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiQ6YO95aSn6I-g6JCd:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764900014&amp;x-signature=Y%2BxzAAnUKlRSS1YJYOQJo7Jfrms%3D" alt="image.png" loading="lazy"/></p>
<p>å±•ç¤ºäº†ä»ç‰©ç†å±‚ï¼ˆUSB/Wi-Fiï¼‰åˆ° AAP åè®®å±‚ï¼Œå†åˆ°å„åŠŸèƒ½é€šé“çš„æ•°æ®æµå‘ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-6">**0.4 é€šä¿¡é€šé“ï¼ˆChannelsï¼‰</h4>
<p>AAP åè®®å®šä¹‰äº†å¤šä¸ª<strong>ç‹¬ç«‹é€»è¾‘é€šé“</strong>ï¼Œç”¨äºåœ¨ MD ä¸ HU ä¹‹é—´é«˜æ•ˆä¼ è¾“ä¸åŒç±»å‹çš„æ•°æ®æµï¼š</p>


















































<table><thead><tr><th>é€šé“åç§°</th><th>æ–¹å‘</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Control</strong>ï¼ˆæ§åˆ¶é€šé“ï¼‰</td><td>åŒå‘</td><td>è´Ÿè´£é“¾è·¯åˆå§‹åŒ–ã€é€šé“å»ºç«‹ï¼ˆå¦‚åª’ä½“ã€è¾“å…¥ç­‰å­é€šé“çš„åå•†ï¼‰</td></tr><tr><td><strong>Video Output</strong>ï¼ˆè§†é¢‘è¾“å‡ºï¼‰</td><td>MD â†’ HU</td><td>ä¼ è¾“ H.264 ç¼–ç çš„è§†é¢‘æµï¼Œç”¨äºåœ¨ä¸»ä¸­æ§å±æ˜¾ç¤º AAP ç•Œé¢</td></tr><tr><td><strong>Audio Output</strong>ï¼ˆéŸ³é¢‘è¾“å‡ºï¼‰</td><td>MD â†’ HU</td><td>ä¼ è¾“åª’ä½“éŸ³é¢‘ï¼ˆå¦‚éŸ³ä¹ã€å¯¼èˆªæç¤ºéŸ³ï¼‰ï¼Œé€šè¿‡è½¦è½½æ‰¬å£°å™¨æ’­æ”¾</td></tr><tr><td><strong>Vehicle Data</strong>ï¼ˆè½¦è¾†æ•°æ®ï¼‰</td><td>HU â†’ MD</td><td>ä¸Šä¼ è½¦è¾†ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆå¦‚ GPS ä½ç½®ã€è½¦é€Ÿã€è½¬å‘è§’ã€ç‡ƒæ²¹é‡ç­‰ï¼‰ï¼Œä¾›å¯¼èˆª/åº”ç”¨ä½¿ç”¨</td></tr><tr><td><strong>Input</strong>ï¼ˆè¾“å…¥äº‹ä»¶ï¼‰</td><td>HU â†’ MD</td><td>å°†è½¦æœº HMI è¾“å…¥ï¼ˆè§¦æ‘¸ã€æŒ‰é”®ã€æ—‹é’®ã€æ–¹å‘ç›˜æ§åˆ¶ç­‰ï¼‰å‘é€è‡³ MDï¼Œé©±åŠ¨åº”ç”¨äº¤äº’</td></tr><tr><td><strong>Microphone Audio</strong>ï¼ˆéº¦å…‹é£éŸ³é¢‘ï¼‰</td><td>HU â†’ MD</td><td>ä¼ è¾“è½¦è½½éº¦å…‹é£é‡‡é›†çš„è¯­éŸ³ä¿¡å·ï¼Œç”¨äºè¯­éŸ³æœç´¢ã€é€šè¯ç­‰</td></tr><tr><td><strong>Bluetooth HFP</strong>ï¼ˆè“ç‰™å…æï¼‰</td><td>åŒå‘</td><td>ä¸“ç”¨äºç”µè¯é€šè¯çš„éŸ³é¢‘é€šé“ï¼ˆç¬¦åˆ Bluetooth Hands-Free Profileï¼‰</td></tr><tr><td><strong>Application Status &amp; Data</strong>ï¼ˆåº”ç”¨çŠ¶æ€ä¸æ•°æ®ï¼‰</td><td>MD â†’ HU</td><td>ä¼ è¾“ç»“æ„åŒ–å…ƒæ•°æ®ï¼Œå¦‚ï¼š<br/>â€¢ å¯¼èˆªæŒ‡ä»¤ï¼ˆè½¬å¼¯æç¤ºã€è½¦é“æŒ‡å¼•ï¼‰<br/>â€¢ åª’ä½“æ’­æ”¾çŠ¶æ€ï¼ˆæ­Œæ›²åã€è¿›åº¦ã€å°é¢ï¼‰</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>è®¾è®¡ä¼˜åŠ¿</strong>ï¼šé€šé“åˆ†ç¦»é¿å…äº†éŸ³è§†é¢‘ä¸æ§åˆ¶ä¿¡ä»¤äº’ç›¸å¹²æ‰°ï¼Œæå‡ç³»ç»Ÿé²æ£’æ€§ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-7">**0.5 è½¦æœºï¼ˆHUï¼‰ç»„ä»¶ä¸è¦æ±‚</h4>
<p>æ”¯æŒ AAP çš„è½¦æœºç³»ç»Ÿéœ€åŒ…å«ä»¥ä¸‹<strong>é«˜å±‚ç»„ä»¶</strong>ï¼ˆä¸ AAP ç›¸å…³éƒ¨åˆ†ï¼‰ï¼š</p>





















<table><thead><tr><th>ç»„ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>HU OS</strong>ï¼ˆè½¦æœºæ“ä½œç³»ç»Ÿï¼‰</td><td>è¿è¡Œè½¦è½½ä¿¡æ¯å¨±ä¹ç³»ç»Ÿçš„åº•å±‚ OSï¼Œå¦‚ Android Automotive OSã€Linuxã€QNXã€Windows Embedded ç­‰</td></tr><tr><td><strong>OS é€‚é…å±‚</strong>ï¼ˆOS Adaptation Layerï¼‰</td><td>HU OS ä¸ AAP Receiver ä¹‹é—´çš„æŠ½è±¡å±‚ï¼Œè´Ÿè´£ï¼š<br/>â€¢ å®ç° AAP Receiver çš„æ¥å£ç»‘å®š<br/>â€¢ å°† AAP æ¶ˆæ¯è½¬æ¢ä¸º HU OS åŸç”Ÿè°ƒç”¨ï¼ˆå¦‚ ALSA éŸ³é¢‘ã€V4L2 è§†é¢‘ã€è¾“å…¥äº‹ä»¶æ³¨å…¥ç­‰ï¼‰<br/>â€¢ Google æä¾› <strong>Android ä¸ QNX çš„å‚è€ƒå®ç°æºç </strong>ï¼Œä½†<strong>ä¸æä¾›å•†ä¸šçº§äºŒè¿›åˆ¶åº“</strong></td></tr><tr><td><strong>Android Auto Projection Receiver</strong>ï¼ˆAAP æ¥æ”¶å™¨ï¼‰</td><td>HU ç«¯çš„ AAP æ ¸å¿ƒå®ç°ï¼Œä»¥<strong>å¯ç§»æ¤ C++ æºç å½¢å¼</strong>ç”± Google æä¾›ç»™åˆä½œä¼™ä¼´<br/>â€¢ é€šè¿‡ OS é€‚é…å±‚ä¸ HU çš„è§†é¢‘ã€éŸ³é¢‘ã€è¿æ¥ã€è¾“å…¥ç­‰å­ç³»ç»Ÿäº¤äº’<br/>â€¢ è´Ÿè´£ç®¡ç† AAP ä¼šè¯ç”Ÿå‘½å‘¨æœŸã€é€šé“å»ºç«‹ã€é”™è¯¯æ¢å¤ç­‰</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ <strong>é‡è¦æç¤º</strong>ï¼š<br/>
æœ¬æŒ‡å—<strong>ä¸æ¶µç›– HU å®Œæ•´è½¯ä»¶æ ˆ</strong>ï¼ˆå¦‚ CAN æ€»çº¿é©±åŠ¨ã€å›¾å½¢åˆæˆå™¨ã€ç”µæºç®¡ç†ç­‰ï¼‰ï¼Œä»…èšç„¦ AAP é›†æˆç›¸å…³éƒ¨åˆ†ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-8">**0.6 è½¦è¾†ç±»å‹ï¼ˆVehicle Typesï¼‰</h4>
<p>AAP å¯é›†æˆäºä»¥ä¸‹ç±»å‹çš„è½¦è¾†ä¿¡æ¯å¨±ä¹ç³»ç»Ÿï¼š</p>

























<table><thead><tr><th>è½¦è¾†ç±»å‹</th><th>å®šä¹‰</th><th>é›†æˆè¦æ±‚</th></tr></thead><tbody><tr><td><strong>ä¹˜ç”¨è½¦</strong>ï¼ˆCarï¼‰</td><td>æ— éœ€å•†ä¸šé©¾ç…§å³å¯é©¾é©¶çš„è½¦è¾†ï¼ˆå¦‚ç§å®¶è½¿è½¦ã€SUVï¼‰</td><td>âœ… æ”¯æŒï¼ˆR00-010ï¼‰</td></tr><tr><td><strong>åè£…è½¦æœº</strong>ï¼ˆAftermarket HUï¼‰</td><td>ä¸ºä¹˜ç”¨è½¦è®¾è®¡çš„ç¬¬ä¸‰æ–¹æ›¿æ¢ä¸»æœº</td><td>âœ… æ”¯æŒï¼ˆR00-020ï¼‰</td></tr><tr><td><strong>å•†ç”¨è½¦/å¡è½¦</strong>ï¼ˆTruckï¼‰</td><td>éœ€è¦å•†ä¸šé©¾ç…§é©¾é©¶çš„è½¦è¾†ï¼ˆå¦‚è´§è¿å¡è½¦ã€å·´å£«ï¼‰</td><td>âœ… æ”¯æŒï¼ˆR00-030ï¼‰ï¼Œä½†<strong>æœ‰ç‰¹æ®Šé™åˆ¶</strong></td></tr></tbody></table>
<h5 data-id="heading-9"><strong>é’ˆå¯¹å¡è½¦çš„å¼ºåˆ¶è¦æ±‚</strong>ï¼ˆR00-060ï¼‰</h5>
<p>ç”±äº <strong>Google åœ°å›¾ç­‰å¯¼èˆªåº”ç”¨æœªé’ˆå¯¹å•†ç”¨è½¦è¾†ä¼˜åŒ–</strong>ï¼ˆå¦‚é™é«˜ã€é™é‡ã€å±é™©å“è·¯çº¿ç­‰ï¼‰ï¼Œè‹¥ AAP é›†æˆäºå¡è½¦ HUï¼Œåˆ™ï¼š</p>
<ul>
<li>
<p><strong>æ¯æ¬¡å¯åŠ¨ AAP æ—¶</strong>ï¼ŒHU <strong>å¿…é¡»</strong> æ˜¾ç¤ºä¸€æ¡<strong>å¯å…³é—­çš„åŸç”Ÿå…è´£å£°æ˜</strong>ï¼Œå†…å®¹ä¸ºï¼š</p>
<blockquote>
<p>â€œSome Android Auto navigation apps are not designed for commercial vehicles and may not be used for navigation.â€<br/>
ï¼ˆâ€œéƒ¨åˆ† Android Auto å¯¼èˆªåº”ç”¨å¹¶éä¸ºå•†ç”¨è½¦è¾†è®¾è®¡ï¼Œä¸å¯ç”¨äºå¯¼èˆªã€‚â€ï¼‰</p>
</blockquote>
</li>
<li>
<p><strong>ä¾‹å¤–</strong>ï¼ˆR00-070ï¼‰ï¼š<br/>
è‹¥ç”¨æˆ·åœ¨æŸå°æ‰‹æœºä¸Š<strong>æ˜ç¡®é€‰æ‹©â€œä¸å†æ˜¾ç¤ºâ€</strong>ï¼ˆå¦‚å‹¾é€‰ â€œDo Not Show Againâ€ï¼‰ï¼Œåˆ™ HU <strong>å¯è®°ä½è¯¥è®¾å¤‡çš„åå¥½</strong>ï¼Œåç»­è¿æ¥æ—¶ä¸å†å¼¹å‡ºè¯¥æç¤ºã€‚</p>
</li>
</ul>
<blockquote>
<p>ğŸŒ <strong>æœ¬åœ°åŒ–è¦æ±‚</strong>ï¼šå…è´£å£°æ˜æ–‡æœ¬éœ€æä¾›<strong>ç›®æ ‡å¸‚åœºçš„å®˜æ–¹è¯­è¨€ç¿»è¯‘ç‰ˆæœ¬</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10"><strong>æ€»ç»“</strong></h3>
<p>ç¬¬ 0 ç« æ˜ç¡®äº† Android Auto Projection çš„<strong>è®¾è®¡å“²å­¦</strong>ã€<strong>æŠ€æœ¯æ¶æ„</strong>ã€<strong>é€šä¿¡æ¨¡å‹</strong>åŠ<strong>é€‚ç”¨èŒƒå›´</strong>ï¼Œä¸ºåç»­ç« èŠ‚çš„å…·ä½“å®ç°è¦æ±‚å¥ å®šäº†åŸºç¡€ã€‚å¼€å‘å›¢é˜Ÿéœ€ç‰¹åˆ«æ³¨æ„ï¼š</p>
<ol>
<li><strong>å®‰å…¨ç¬¬ä¸€</strong>ï¼šæ‰€æœ‰è®¾è®¡å›´ç»•â€œå‡å°‘é©¾é©¶åˆ†å¿ƒâ€å±•å¼€ï¼›</li>
<li><strong>èŒè´£åˆ†ç¦»</strong>ï¼šMD è´Ÿè´£è®¡ç®—ä¸é€»è¾‘ï¼ŒHU è´Ÿè´£äº¤äº’ä¸ä¼ æ„Ÿï¼›</li>
<li><strong>é€šé“éš”ç¦»</strong>ï¼šéŸ³è§†é¢‘ã€æ§åˆ¶ã€æ•°æ®ç‹¬ç«‹ä¼ è¾“ï¼Œä¿éšœç¨³å®šæ€§ï¼›</li>
<li><strong>åˆè§„å¼ºåˆ¶</strong>ï¼šå¡è½¦åœºæ™¯çš„å…è´£å£°æ˜æ˜¯è®¤è¯ç¡¬æ€§è¦æ±‚ï¼›</li>
<li><strong>å‚è€ƒå®ç°</strong>ï¼šGoogle æä¾› C++ æºç ä¸ OS é€‚é…å‚è€ƒï¼Œä½†éœ€è‡ªè¡Œé›†æˆã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TypeScript ä¸­ï¼ŒPromise]]></title>    <link>https://juejin.cn/post/7577295460248698926</link>    <guid>https://juejin.cn/post/7577295460248698926</guid>    <pubDate>2025-11-28T02:19:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577295460248698926" data-draft-id="7577226119106445339" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TypeScript ä¸­ï¼ŒPromise"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-28T02:19:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€šæ å¬é£é›¨"/> <meta itemprop="url" content="https://juejin.cn/user/2682464103830750"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TypeScript ä¸­ï¼ŒPromise
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2682464103830750/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€šæ å¬é£é›¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T02:19:39.000Z" title="Fri Nov 28 2025 02:19:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ TypeScript ä¸­ï¼Œ<code>Promise</code> æ˜¯å¤„ç†å¼‚æ­¥æ“ä½œçš„æ ¸å¿ƒæœºåˆ¶ã€‚ç›¸æ¯”äº JavaScriptï¼ŒTypeScript ä¸­çš„ Promise æœ€å¤§çš„ä¼˜åŠ¿åœ¨äº<strong>ç±»å‹å®‰å…¨ï¼ˆType Safetyï¼‰</strong>ï¼Œå®ƒèƒ½è®©ä½ æ˜ç¡®çŸ¥é“å¼‚æ­¥æ“ä½œè¿”å›çš„æ•°æ®ç±»å‹ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å…³äº TypeScript ä¸­ Promise çš„è¯¦ç»†ä»‹ç»ï¼Œä»åŸºç¡€å®šä¹‰åˆ°é«˜çº§ç”¨æ³•ã€‚</p>
<hr/>
<h3 data-id="heading-0">1. æ ¸å¿ƒæ¦‚å¿µä¸æ³›å‹ (<code>Promise&lt;T&gt;</code>)</h3>
<p>åœ¨ TypeScript ä¸­ï¼Œ<code>Promise</code> æ˜¯ä¸€ä¸ªæ³›å‹æ¥å£ï¼Œå®šä¹‰ä¸º <strong><code>Promise&lt;T&gt;</code></strong>ã€‚</p>
<ul>
<li><strong><code>T</code></strong>: ä»£è¡¨ Promise <strong>æˆåŠŸï¼ˆResolvedï¼‰</strong> æ—¶è¿”å›çš„æ•°æ®ç±»å‹ã€‚</li>
<li>å¦‚æœ Promise ä¸è¿”å›ä»»ä½•å€¼ï¼ˆåªå¤„ç†è¿‡ç¨‹ï¼‰ï¼Œé€šå¸¸ä½¿ç”¨ <strong><code>Promise&lt;void&gt;</code></strong>ã€‚</li>
</ul>
<h4 data-id="heading-1">åŸºæœ¬è¯­æ³•ç¤ºä¾‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ˜¾å¼å£°æ˜è¿”å›ç±»å‹ä¸º string</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">myPromise</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¼‚æ­¥æ‰§è¡Œ"</span>)
  <span class="hljs-keyword">const</span> success = <span class="hljs-literal">true</span>;  <span class="hljs-comment">//---------&gt;Newçš„æ—¶å€™ è¿™å—ä»£ç å°±è¢«æ‰§è¡Œ</span>
  <span class="hljs-keyword">if</span> (success) {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"æ“ä½œæˆåŠŸ!"</span>); <span class="hljs-comment">// è¿™é‡Œçš„å‚æ•°å¿…é¡»æ˜¯ string</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æ“ä½œå¤±è´¥"</span>));
  }
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä¸»ç¨‹åºæ‰§è¡Œ1"</span>)
myPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {   <span class="hljs-comment">//---------&gt;æ‹¿åˆ°æ‰§è¡Œç»“æœ</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">length</span>); <span class="hljs-comment">// TS çŸ¥é“ data æ˜¯ stringï¼Œæ‰€ä»¥å…è®¸è®¿é—® .length</span>
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä¸»ç¨‹åºæ‰§è¡Œ2"</span>)
</code></pre>
<p>è¿è¡Œè¾“å‡ºç»“æœ</p>
<pre><code class="hljs language-typescript" lang="typescript">[<span class="hljs-variable constant_">LOG</span>]: <span class="hljs-string">"å¼‚æ­¥æ‰§è¡Œ"</span>  
[<span class="hljs-variable constant_">LOG</span>]: <span class="hljs-string">"ä¸»ç¨‹åºæ‰§è¡Œ1"</span>  
[<span class="hljs-variable constant_">LOG</span>]: <span class="hljs-string">"ä¸»ç¨‹åºæ‰§è¡Œ2"</span>  
[<span class="hljs-variable constant_">LOG</span>]: <span class="hljs-number">5</span>
</code></pre>
<hr/>
<h3 data-id="heading-2">2. åˆ›å»º Promise çš„æ–¹å¼</h3>
<h4 data-id="heading-3">2.1 ä½¿ç”¨æ„é€ å‡½æ•° (<code>new Promise</code>)</h4>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„å†™æ³•ï¼Œæ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªæ‰§è¡Œå™¨å‡½æ•° <code>(resolve, reject) =&gt; void</code>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUser</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">Promise</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> }&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (id &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// resolve çš„å‚æ•°å¿…é¡»ç¬¦åˆ Promise&lt;{...}&gt; ä¸­å®šä¹‰çš„ç»“æ„</span>
        <span class="hljs-title function_">resolve</span>({ id, <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span> });
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">reject</span>(<span class="hljs-string">"ID æ— æ•ˆ"</span>);
      }
    }, <span class="hljs-number">1000</span>);
  });
}
</code></pre>
<h4 data-id="heading-4">2.2 ä½¿ç”¨ <code>async</code> å’Œ <code>await</code> (æ¨è)</h4>
<p>è¿™æ˜¯ç°ä»£å¼€å‘çš„æ ‡å‡†å†™æ³•ã€‚<strong><code>async</code> å‡½æ•°çš„è¿”å›å€¼æ°¸è¿œæ˜¯ä¸€ä¸ª Promise</strong>ã€‚TS ä¼šæ ¹æ® <code>return</code> çš„å€¼è‡ªåŠ¨æ¨æ–­ Promise çš„æ³›å‹ç±»å‹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å†™æ³• 1: è‡ªåŠ¨æ¨æ–­</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">"Alice"</span>; <span class="hljs-comment">// TS æ¨æ–­è¿”å›ç±»å‹ä¸º Promise&lt;string&gt;</span>
}

<span class="hljs-comment">// å†™æ³• 2: æ˜¾å¼æ³¨è§£ (æ¨èï¼Œæ›´è§„èŒƒ)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getScore</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">number</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;
}

<span class="hljs-comment">// ä½¿ç”¨ await</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> score = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getScore</span>(); <span class="hljs-comment">// score è¢«æ¨æ–­ä¸º number ç±»å‹</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(score);
}
</code></pre>
<hr/>
<h3 data-id="heading-5">3. Promise çš„çŠ¶æ€ä¸å›è°ƒ</h3>
<p>Promise æœ‰ä¸‰ç§çŠ¶æ€ï¼š<code>pending</code> (è¿›è¡Œä¸­), <code>fulfilled</code> (å·²æˆåŠŸ), <code>rejected</code> (å·²å¤±è´¥)ã€‚</p>
<p>åœ¨ TS ä¸­ï¼Œ<code>.then()</code> é“¾å¼è°ƒç”¨æ—¶ï¼Œç±»å‹ä¼šè‡ªåŠ¨æµè½¬ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> p = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">10</span>); <span class="hljs-comment">// ç±»å‹: Promise&lt;number&gt;</span>

p.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> {
  <span class="hljs-comment">// num æ˜¯ number</span>
  <span class="hljs-keyword">return</span> num.<span class="hljs-title function_">toString</span>(); <span class="hljs-comment">// è¿”å› string</span>
})
.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">str</span>) =&gt;</span> {
  <span class="hljs-comment">// str æ˜¯ string (TS è‡ªåŠ¨æ¨æ–­)</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str);
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// è¿”å› boolean</span>
})
.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">bool</span>) =&gt;</span> {
  <span class="hljs-comment">// bool æ˜¯ boolean</span>
});
</code></pre>
<hr/>
<h3 data-id="heading-6">4. é™æ€æ–¹æ³• (Static Methods)</h3>
<p>TypeScript å¯¹ Promise çš„é™æ€æ–¹æ³•ä¹Ÿæœ‰å¾ˆå¥½çš„ç±»å‹æ”¯æŒã€‚</p>
<h4 data-id="heading-7">4.1 <code>Promise.resolve&lt;T&gt;(value: T)</code></h4>
<p>åˆ›å»ºä¸€ä¸ªç«‹å³æˆåŠŸçš„ Promiseã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">42</span>); <span class="hljs-comment">// Promise&lt;number&gt;</span>
<span class="hljs-keyword">const</span> p2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"Bob"</span> }); <span class="hljs-comment">// Promise&lt;{ name: string }&gt;</span>
</code></pre>
<h4 data-id="heading-8">4.2 <code>Promise.reject(reason: any)</code></h4>
<p>åˆ›å»ºä¸€ä¸ªç«‹å³å¤±è´¥çš„ Promiseã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> pFail = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">"Error occurred"</span>); <span class="hljs-comment">// Promise&lt;never&gt;</span>
</code></pre>
<h4 data-id="heading-9">4.3 <code>Promise.all&lt;T[]&gt;(values: [])</code></h4>
<p>ç­‰å¾…æ‰€æœ‰ Promise å®Œæˆã€‚è¿”å›å€¼çš„ç±»å‹æ˜¯ä¸€ä¸ªå…ƒç»„ï¼ˆTupleï¼‰æˆ–æ•°ç»„ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> pString = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">"Hello"</span>);
<span class="hljs-keyword">const</span> pNumber = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">123</span>);

<span class="hljs-comment">// TS èƒ½å¤Ÿæ¨æ–­å‡º results çš„ç±»å‹æ˜¯ [string, number]</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([pString, pNumber]).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">[str, num]</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str.<span class="hljs-title function_">toUpperCase</span>()); <span class="hljs-comment">// æ­£å¸¸</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>));    <span class="hljs-comment">// æ­£å¸¸</span>
});
</code></pre>
<h4 data-id="heading-10">4.4 <code>Promise.allSettled&lt;T&gt;(...)</code></h4>
<p>ç­‰å¾…æ‰€æœ‰ Promise å®Œæˆï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">10</span>);
<span class="hljs-keyword">const</span> p2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">"error"</span>);

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([p1, p2]).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">results</span>) =&gt;</span> {
  results.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">status</span> === <span class="hljs-string">'fulfilled'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result.<span class="hljs-property">value</span>); <span class="hljs-comment">// TS çŸ¥é“è¿™é‡Œæœ‰ value</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result.<span class="hljs-property">reason</span>); <span class="hljs-comment">// TS çŸ¥é“è¿™é‡Œæœ‰ reason</span>
    }
  });
});
</code></pre>
<h4 data-id="heading-11">4.5 <code>Promise.race&lt;T&gt;(...)</code></h4>
<p>è¿”å›ç¬¬ä¸€ä¸ªæ”¹å˜çŠ¶æ€ï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰çš„ Promise çš„ç»“æœã€‚</p>
<hr/>
<h3 data-id="heading-12">5. å¸¸è§å®æˆ˜åœºæ™¯</h3>
<h4 data-id="heading-13">5.1 å®šä¹‰ API å“åº”æ¥å£</h4>
<p>è¿™æ˜¯å‰ç«¯å¼€å‘ä¸­æœ€å¸¸ç”¨çš„æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. å®šä¹‰æ•°æ®æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiResponse</span>&lt;T&gt; {
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">data</span>: T;
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// 2. æ¨¡æ‹Ÿè¯·æ±‚å‡½æ•°</span>
<span class="hljs-keyword">function</span> request&lt;T&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ApiResponse</span>&lt;T&gt;&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>({
        <span class="hljs-attr">code</span>: <span class="hljs-number">200</span>,
        <span class="hljs-attr">data</span>: {} <span class="hljs-keyword">as</span> T, <span class="hljs-comment">// è¿™é‡Œåªæ˜¯ä¸ºäº†æ¼”ç¤ºï¼Œå®é™…ä¼šæœ‰çœŸå®æ•°æ®</span>
        <span class="hljs-attr">message</span>: <span class="hljs-string">"success"</span>
      });
    }, <span class="hljs-number">500</span>);
  });
}

<span class="hljs-comment">// 3. ä½¿ç”¨</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ˜ç¡®å‘Šè¯‰ request è¿”å›çš„æ•°æ®ç»“æ„æ˜¯ User</span>
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> request&lt;<span class="hljs-title class_">User</span>&gt;(<span class="hljs-string">'/api/user/1'</span>);
  
  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">code</span> === <span class="hljs-number">200</span>) {
    <span class="hljs-comment">// TS è¿™é‡Œä¼šæœ‰è‡ªåŠ¨æç¤ºï¼šresponse.data.email</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response.<span class="hljs-property">data</span>.<span class="hljs-property">email</span>); 
  }
}
</code></pre>
<h4 data-id="heading-14">5.2 <code>Promise&lt;void&gt;</code> ç”¨äºä¸è¿”å›å€¼çš„å¼‚æ­¥æ“ä½œ</h4>
<p>ä¾‹å¦‚ï¼šåˆå§‹åŒ–æ•°æ®åº“ã€å‘é€æ—¥å¿—ã€ç­‰å¾…å‡ ç§’é’Ÿã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">delay</span>(<span class="hljs-params">ms: <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(resolve, ms); <span class="hljs-comment">// ä¸éœ€è¦ä¼ é€’å‚æ•°ç»™ resolve</span>
  });
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Start"</span>);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">delay</span>(<span class="hljs-number">1000</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"End after 1s"</span>);
}
</code></pre>
<hr/>
<h3 data-id="heading-15">6. é”™è¯¯å¤„ç† (Error Handling)</h3>
<p>åœ¨ TypeScript ä¸­å¤„ç† Promise é”™è¯¯æ—¶ï¼Œæœ‰ä¸€ä¸ªå¸¸è§çš„ç—›ç‚¹ï¼š<strong><code>catch</code> ä¸­çš„ error ç±»å‹é€šå¸¸æ˜¯ <code>any</code> æˆ– <code>unknown</code></strong>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">task</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">someAsyncOperation</span>();
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œerror æ˜¯ unknown ç±»å‹ (TS 4.0+) æˆ– any</span>
    <span class="hljs-comment">// ä½ ä¸èƒ½ç›´æ¥è°ƒç”¨ error.messageï¼Œé™¤éä½ è¿›è¡Œæ–­è¨€æˆ–ç±»å‹æ”¶çª„</span>
    
    <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error.<span class="hljs-property">message</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Unknown error:"</span>, error);
    }
  }
}
</code></pre>
<h3 data-id="heading-16">æ€»ç»“</h3>
<ol>
<li><strong>ç±»å‹æ³¨è§£</strong>ï¼šå§‹ç»ˆä½¿ç”¨ <code>Promise&lt;Type&gt;</code> æ¥æ˜ç¡®å¼‚æ­¥æ“ä½œè¿”å›çš„æ•°æ®ç»“æ„ã€‚</li>
<li><strong>Async/Await</strong>ï¼šä¼˜å…ˆä½¿ç”¨ <code>async</code> å‡½æ•°ï¼Œå®ƒè®©ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼Œä¸” TS èƒ½è‡ªåŠ¨æ¨æ–­è¿”å›ç±»å‹ã€‚</li>
<li><strong>æ³›å‹å·¥å…·</strong>ï¼šåˆ©ç”¨ <code>Promise.all</code> ç­‰ç»„åˆå·¥å…·æ—¶ï¼ŒTS èƒ½å¤Ÿå¾ˆå¥½åœ°å¤„ç†å…ƒç»„ç±»å‹æ¨æ–­ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šæ³¨æ„ <code>catch</code> å—ä¸­çš„ç±»å‹æ£€æŸ¥ï¼Œä½¿ç”¨ <code>instanceof Error</code> æ˜¯ä¸ªå¥½ä¹ æƒ¯ã€‚</li>
</ol>
<p>å¦‚æœä½ æœ‰å…·ä½“çš„ä»£ç åœºæ™¯éœ€è¦åˆ†æï¼Œå¯ä»¥å‘ç»™æˆ‘ï¼Œæˆ‘å¸®ä½ è¿›ä¸€æ­¥è®²è§£ï¼</p>
<h3 data-id="heading-17">å‚è€ƒ</h3>
<p><a href="https://juejin.cn/spost/7577300470520446985" target="_blank" title="https://juejin.cn/spost/7577300470520446985">è¯¦è§£ TypeScript ä¸­ï¼Œasync å’Œ await</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ›å»ºè‡ªå·±çš„ç¬¬ä¸€ä¸ªLangChainAI]]></title>    <link>https://juejin.cn/post/7577284409965199423</link>    <guid>https://juejin.cn/post/7577284409965199423</guid>    <pubDate>2025-11-28T00:47:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577284409965199423" data-draft-id="7577332659504873515" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ›å»ºè‡ªå·±çš„ç¬¬ä¸€ä¸ªLangChainAI"/> <meta itemprop="keywords" content="LangChain"/> <meta itemprop="datePublished" content="2025-11-28T00:47:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰ç‚¹æ°´769"/> <meta itemprop="url" content="https://juejin.cn/user/4396325087221915"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ›å»ºè‡ªå·±çš„ç¬¬ä¸€ä¸ªLangChainAI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4396325087221915/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰ç‚¹æ°´769
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T00:47:31.000Z" title="Fri Nov 28 2025 00:47:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">LangSmithè¿½è¸ªåŠŸèƒ½é…ç½®</span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">å¯¼å…¥æ“ä½œç³»ç»Ÿç›¸å…³åŠŸèƒ½</span>
import os
 
from langchain_core.messages import SystemMessage, HumanMessage
<span class="hljs-meta prompt_"># </span><span class="bash">å¯¼å…¥base_url</span>
from openai import base_url
<span class="hljs-meta prompt_"> 
# </span><span class="bash">ä»è‡ªå®šä¹‰æ¨¡å—å¯¼å…¥å¯†é’¥åŠ è½½å‡½æ•°</span>
from config.load_key import load_key
<span class="hljs-meta prompt_"> 
# </span><span class="bash">è®¾ç½® LangSmith è¿½è¸ªåŠŸèƒ½å¼€å¯</span>
os.environ["LANGSMITH_TRACING"] = "true"
<span class="hljs-meta prompt_"> 
# </span><span class="bash">è®¾ç½® LangSmith é¡¹ç›®åç§°</span>
os.environ["LANGSMITH_PROJECT"] = "firstLangChainDemo"
<span class="hljs-meta prompt_"> 
# </span><span class="bash">ä»é…ç½®æ–‡ä»¶åŠ è½½ LangSmith API å¯†é’¥å¹¶è®¾ç½®ç¯å¢ƒå˜é‡</span>
os.environ["LANGSMITH_API_KEY"] = load_key("LANGSMITH_API_KEY")
 
<span class="hljs-meta prompt_"> 
#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">OpenAIæœåŠ¡é…ç½®_001</span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦å·²è®¾ç½® OpenAI API å¯†é’¥ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä»é…ç½®æ–‡ä»¶åŠ è½½</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-keyword">if</span> not os.environ.get(<span class="hljs-string">"OPENAI_API_KEY"</span>):</span>
<span class="hljs-meta prompt_"># </span><span class="bash">    os.environ[<span class="hljs-string">"OPENAI_API_KEY"</span>] = load_key(<span class="hljs-string">"OPENAI_API_KEY"</span>)</span>
<span class="hljs-meta prompt_">#</span><span class="bash">
<span class="hljs-comment"># # ä» LangChain å¯¼å…¥æ¨¡å‹åˆå§‹åŒ–å‡½æ•°</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">from langchain.chat_models import init_chat_model</span>
<span class="hljs-meta prompt_">#</span><span class="bash">
<span class="hljs-comment"># # model = init_chat_model("gpt-4o-mini", model_provider="openai")</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-comment"># åˆå§‹åŒ–èŠå¤©æ¨¡å‹ï¼Œä½¿ç”¨ gpt-4o-mini æ¨¡å‹ï¼Œé€šè¿‡æŒ‡å®šçš„ base URL è¿æ¥</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">model = init_chat_model(<span class="hljs-string">"gpt-4o-mini"</span>, model_provider=<span class="hljs-string">"openai"</span>, base_url=<span class="hljs-string">"https://api.gptsapi.net/v1"</span>)</span>
 
 
<span class="hljs-meta prompt_"> 
#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">åˆ›å»ºä»»åŠ¡_001</span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-comment"># ä» LangChain æ ¸å¿ƒæ¨¡å—å¯¼å…¥æ¶ˆæ¯ç±»å‹</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">from langchain_core.messages import HumanMessage, SystemMessage</span>
<span class="hljs-meta prompt_">#</span><span class="bash">
<span class="hljs-comment"># # åˆ›å»ºæ¶ˆæ¯åˆ—è¡¨ï¼ŒåŒ…å«ç³»ç»ŸæŒ‡ä»¤å’Œç”¨æˆ·é—®é¢˜</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">messages = [</span>
<span class="hljs-meta prompt_"># </span><span class="bash">    <span class="hljs-comment"># ç³»ç»Ÿæ¶ˆæ¯ï¼šè®¾å®šæ¨¡å‹è¡Œä¸ºï¼ˆç¿»è¯‘ä»»åŠ¡ï¼‰</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">    SystemMessage(content=<span class="hljs-string">"å¸®æˆ‘æŠŠä¸‹é¢è¿™å¥è¯ç¿»è¯‘æˆä¸­æ–‡"</span>),</span>
<span class="hljs-meta prompt_"># </span><span class="bash">    <span class="hljs-comment"># ç”¨æˆ·æ¶ˆæ¯ï¼šéœ€è¦ç¿»è¯‘çš„è‹±æ–‡å†…å®¹</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">    HumanMessage(content=<span class="hljs-string">"Hello, how are you?"</span>)</span>
<span class="hljs-meta prompt_"># </span><span class="bash">]</span>
<span class="hljs-meta prompt_">#</span><span class="bash">
<span class="hljs-comment"># # è°ƒç”¨æ¨¡å‹å¤„ç†æ¶ˆæ¯åˆ—è¡¨ï¼Œè·å–ç¿»è¯‘ç»“æœ</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">result = model.invoke(messages)</span>
<span class="hljs-meta prompt_">#</span><span class="bash">
<span class="hljs-comment"># print("ç¿»è¯‘ç»“æœ:", result.content)</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-built_in">print</span>(<span class="hljs-string">"å®Œæ•´è¿”å›å¯¹è±¡:"</span>, result)</span>
<span class="hljs-meta prompt_"> 
# </span><span class="bash"><span class="hljs-comment">#AIMessage(content='ä½ å¥½ï¼Œä½ å¥½å—ï¼Ÿ', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 5, 'prompt_tokens': 27, 'total_tokens': 32, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4o-mini', 'system_fingerprint': 'fp_efad92c60b', 'id': 'chatcmpl-Cf4DAyrWIgxwAp0gKqttJJBBSGaSu', 'finish_reason': 'stop', 'logprobs': None}, id='lc_run--0e8ed63b-1943-4c62-91fe-5208d43470ee-0', usage_metadata={'input_tokens': 27, 'output_tokens': 5, 'total_tokens': 32, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})&gt;</span></span>
 
 
<span class="hljs-meta prompt_"> 
#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">OpenAIæœåŠ¡é…ç½®_002</span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-comment"># pip install -qU "langchain[openai]"</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-keyword">if</span> not os.environ.get(<span class="hljs-string">"OPENAI_API_KEY"</span>):</span>
<span class="hljs-meta prompt_"># </span><span class="bash">    os.environ[<span class="hljs-string">"OPENAI_API_KEY"</span>] = load_key(<span class="hljs-string">"OPENAI_API_KEY"</span>)</span>
<span class="hljs-meta prompt_">#</span><span class="bash">
<span class="hljs-comment"># from langchain_openai import ChatOpenAI</span></span>
<span class="hljs-meta prompt_">#</span><span class="bash">
<span class="hljs-comment"># llm = ChatOpenAI(model="gpt-4o-mini", base_url="https://api.gptsapi.net/v1")</span></span>
 
<span class="hljs-meta prompt_"> 
#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">åˆ›å»ºä»»åŠ¡_002</span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-comment"># è°ƒç”¨æ¨¡å‹å¹¶è·å–ç»“æœ</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">result = llm.invoke([SystemMessage(content=<span class="hljs-string">"å¸®æˆ‘æŠŠä¸‹é¢è¿™å¥è¯ç¿»è¯‘æˆä¸­æ–‡"</span>), HumanMessage(content=<span class="hljs-string">"Hello, how are you?"</span>)])</span>
<span class="hljs-meta prompt_">#</span><span class="bash">
<span class="hljs-comment"># # æ‰“å°è¿”å›å€¼</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¿»è¯‘ç»“æœ:"</span>, result.content)</span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-built_in">print</span>(<span class="hljs-string">"å®Œæ•´è¿”å›å¯¹è±¡:"</span>, result)</span>
 
<span class="hljs-meta prompt_"> 
#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">OpenAIæœåŠ¡é…ç½®_003</span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">from langchain_community.chat_models import ChatTongyi</span>
<span class="hljs-meta prompt_"># </span><span class="bash">from langchain_core.messages import SystemMessage, HumanMessage</span>
<span class="hljs-meta prompt_"># </span><span class="bash">llm = ChatTongyi(api_key=load_key(<span class="hljs-string">"TONGYI_API_KEY"</span>), model=<span class="hljs-string">"tongyi-v1.5-s-lite"</span>)</span>
if not os.environ.get("OPENAI_API_KEY"):
    os.environ["OPENAI_API_KEY"] = load_key("OPENAI_API_KEY")
from langchain_openai import ChatOpenAI
llm = ChatOpenAI(model="gpt-4o-mini", base_url="https://api.gptsapi.net/v1")
 
<span class="hljs-meta prompt_"> 
#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">åˆ›å»ºä»»åŠ¡_003</span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">#######################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">llm.invoke([SystemMessage(content=<span class="hljs-string">"å¸®æˆ‘æŠŠä¸‹é¢è¿™å¥è¯ç¿»è¯‘æˆä¸­æ–‡"</span>), HumanMessage(content=<span class="hljs-string">"Hello, how are you?"</span>)])</span>
<span class="hljs-meta prompt_">#</span><span class="bash">result = llm.invoke([SystemMessage(content=<span class="hljs-string">"Help me write a poem."</span>), HumanMessage(content=<span class="hljs-string">"What is the meaning of life?"</span>)])</span>
result = llm.invoke([HumanMessage(content="ä½ å¥½ï¼Œä½ æ˜¯è°?èƒ½å¸®æˆ‘è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ")])
print("ç»“æœ:", result.content)
print("å®Œæ•´è¿”å›å¯¹è±¡:", result)
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¯¼å…¥æ“ä½œç³»ç»Ÿæ¨¡å—ï¼Œç”¨äºæ“ä½œç¯å¢ƒå˜é‡</span>
<span class="hljs-keyword">import</span> os
 
<span class="hljs-comment"># ä»è‡ªå®šä¹‰çš„é…ç½®æ¨¡å—å¯¼å…¥å¯†é’¥åŠ è½½å‡½æ•°ï¼Œç”¨äºå®‰å…¨åœ°è·å–APIå¯†é’¥</span>
<span class="hljs-keyword">from</span> config.load_key <span class="hljs-keyword">import</span> load_key
 
<span class="hljs-comment"># è®¾ç½®LangSmithè¿½è¸ªåŠŸèƒ½ä¸ºå¼€å¯çŠ¶æ€ï¼Œç”¨äºç›‘æ§å’Œè¿½è¸ªLangChainåº”ç”¨çš„æ‰§è¡Œæƒ…å†µ</span>
os.environ[<span class="hljs-string">"LANGSMITH_TRACING"</span>] = <span class="hljs-string">"true"</span>
 
<span class="hljs-comment"># è®¾ç½®LangSmithé¡¹ç›®åç§°ï¼Œç”¨äºåœ¨LangSmithå¹³å°ä¸Šæ ‡è¯†å½“å‰é¡¹ç›®</span>
os.environ[<span class="hljs-string">"LANGSMITH_PROJECT"</span>] = <span class="hljs-string">"firstLangChainDemo"</span>
 
<span class="hljs-comment"># ä»é…ç½®æ–‡ä»¶ä¸­åŠ è½½LangSmithçš„APIå¯†é’¥å¹¶è®¾ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­</span>
os.environ[<span class="hljs-string">"LANGSMITH_API_KEY"</span>] = load_key(<span class="hljs-string">"LANGSMITH_API_KEY"</span>)
 
<span class="hljs-comment"># æ£€æŸ¥ç¯å¢ƒå˜é‡ä¸­æ˜¯å¦å·²å­˜åœ¨OpenAI APIå¯†é’¥ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä»é…ç½®æ–‡ä»¶ä¸­åŠ è½½</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.environ.get(<span class="hljs-string">"OPENAI_API_KEY"</span>):
    os.environ[<span class="hljs-string">"OPENAI_API_KEY"</span>] = load_key(<span class="hljs-string">"OPENAI_API_KEY"</span>)
 
<span class="hljs-comment"># ä»langchain_openaiæ¨¡å—å¯¼å…¥ChatOpenAIç±»ï¼Œç”¨äºä¸OpenAIèŠå¤©æ¨¡å‹äº¤äº’</span>
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
 
<span class="hljs-comment"># ä»langchain_core.messagesæ¨¡å—å¯¼å…¥HumanMessageç±»ï¼Œç”¨äºåˆ›å»ºç”¨æˆ·æ¶ˆæ¯</span>
<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage
 
<span class="hljs-comment"># åˆå§‹åŒ–ChatOpenAIå®ä¾‹ï¼Œé…ç½®æ¨¡å‹å‚æ•°ï¼š</span>
<span class="hljs-comment"># - model: ä½¿ç”¨gpt-4o-miniæ¨¡å‹</span>
<span class="hljs-comment"># - base_url: æŒ‡å®šAPIåŸºç¡€URLä¸ºç¬¬ä¸‰æ–¹ä»£ç†åœ°å€</span>
<span class="hljs-comment"># - api_key: ä»ç¯å¢ƒå˜é‡ä¸­è·å–APIå¯†é’¥</span>
<span class="hljs-comment"># - temperature: è®¾ç½®ä¸º0.9ï¼Œæ§åˆ¶ç”Ÿæˆç»“æœçš„éšæœºæ€§ï¼ˆè¶Šé«˜è¶Šéšæœºï¼‰</span>
llm = ChatOpenAI(model=<span class="hljs-string">"gpt-4o-mini"</span>, base_url=<span class="hljs-string">"https://api.gptsapi.net/v1"</span>,
                 api_key=os.environ[<span class="hljs-string">"OPENAI_API_KEY"</span>], temperature=<span class="hljs-number">0.9</span>)
 
<span class="hljs-comment"># å¾ªç¯5æ¬¡ï¼Œæ¯æ¬¡è°ƒç”¨æ¨¡å‹ç”Ÿæˆä¸åŒçš„åå­—å»ºè®®</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    <span class="hljs-comment"># è°ƒç”¨æ¨¡å‹çš„invokeæ–¹æ³•ï¼Œä¼ å…¥åŒ…å«å–åè¯·æ±‚çš„HumanMessageå¯¹è±¡</span>
    result = llm.invoke([HumanMessage(content=<span class="hljs-string">"ä½ å¥½ï¼Œæˆ‘å§“å­™å¸®æˆ‘ç»™å­©å­å–ä¸€ä¸ªåå­—ï¼Ÿè¿”å›å€¼çš„å­—æ•°å¤§äºç­‰äº2ä¸ªå­—ï¼Œå°äºç­‰äº3ä¸ªå­—"</span>)])
 
    <span class="hljs-comment"># æ‰“å°æ¨¡å‹è¿”å›çš„ç»“æœå†…å®¹</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“æœ:"</span>, result.content)
 
    <span class="hljs-comment"># æ‰“å°å®Œæ•´çš„è¿”å›å¯¹è±¡ï¼ŒåŒ…å«å…ƒæ•°æ®ç­‰é¢å¤–ä¿¡æ¯</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å®Œæ•´è¿”å›å¯¹è±¡:"</span>, result)
 
 
<span class="hljs-comment"># ç»“æœ: å¥½çš„ï¼Œå­™å§“çš„åå­—å¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªï¼š</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1. å­™é›…å©·</span>
<span class="hljs-comment"># 2. å­™å­è½©</span>
<span class="hljs-comment"># 3. å­™æ˜Šç„¶</span>
<span class="hljs-comment"># 4. å­™é›¨æ™´</span>
<span class="hljs-comment"># 5. å­™æ€è¿œ</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Langchainæç¤ºè¯æ¨¡ç‰ˆ]]></title>    <link>https://juejin.cn/post/7577309505710014527</link>    <guid>https://juejin.cn/post/7577309505710014527</guid>    <pubDate>2025-11-28T00:59:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577309505710014527" data-draft-id="7577291435159584809" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Langchainæç¤ºè¯æ¨¡ç‰ˆ"/> <meta itemprop="keywords" content="LangChain"/> <meta itemprop="datePublished" content="2025-11-28T00:59:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰ç‚¹æ°´769"/> <meta itemprop="url" content="https://juejin.cn/user/4396325087221915"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Langchainæç¤ºè¯æ¨¡ç‰ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4396325087221915/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰ç‚¹æ°´769
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T00:59:26.000Z" title="Fri Nov 28 2025 00:59:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-lua" lang="lua">########################
# æç¤ºè¯æ¨¡ç‰ˆ
########################
# å¯¼å…¥æ“ä½œç³»ç»Ÿç›¸å…³åŠŸèƒ½ï¼Œç”¨äºç¯å¢ƒå˜é‡æ“ä½œ
import <span class="hljs-built_in">os</span>
 
# ä»è‡ªå®šä¹‰æ¨¡å—å¯¼å…¥å¯†é’¥åŠ è½½å‡½æ•°ï¼Œç”¨äºå®‰å…¨åœ°åŠ è½½APIå¯†é’¥
from <span class="hljs-built_in">config</span>.load_key import load_key
 
# è®¾ç½® LangSmith è¿½è¸ªåŠŸèƒ½å¼€å¯ï¼Œå¯ç”¨LangChainçš„ç›‘æ§å’Œè¿½è¸ªåŠŸèƒ½
<span class="hljs-built_in">os</span>.environ[<span class="hljs-string">"LANGSMITH_TRACING"</span>] = <span class="hljs-string">"true"</span>
 
# è®¾ç½® LangSmith é¡¹ç›®åç§°ï¼Œç”¨äºåœ¨LangSmithå¹³å°ä¸ŠåŒºåˆ†ä¸åŒé¡¹ç›®
<span class="hljs-built_in">os</span>.environ[<span class="hljs-string">"LANGSMITH_PROJECT"</span>] = <span class="hljs-string">"firstLangChainDemo"</span>
 
# ä»é…ç½®æ–‡ä»¶åŠ è½½ LangSmith API å¯†é’¥å¹¶è®¾ç½®ç¯å¢ƒå˜é‡
<span class="hljs-built_in">os</span>.environ[<span class="hljs-string">"LANGSMITH_API_KEY"</span>] = load_key(<span class="hljs-string">"LANGSMITH_API_KEY"</span>)
 
# æ£€æŸ¥æ˜¯å¦å·²è®¾ç½® OpenAI API å¯†é’¥ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä»é…ç½®æ–‡ä»¶åŠ è½½
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">os</span>.environ.get(<span class="hljs-string">"OPENAI_API_KEY"</span>):
    <span class="hljs-built_in">os</span>.environ[<span class="hljs-string">"OPENAI_API_KEY"</span>] = load_key(<span class="hljs-string">"OPENAI_API_KEY"</span>)
 
# ä» langchain_core.prompts æ¨¡å—å¯¼å…¥ ChatPromptTemplate ç±»ï¼Œç”¨äºåˆ›å»ºèŠå¤©æç¤ºæ¨¡æ¿
from langchain_core.prompts import ChatPromptTemplate
 
# åˆ›å»ºèŠå¤©æç¤ºæ¨¡æ¿ï¼ŒåŒ…å«ç³»ç»Ÿæ¶ˆæ¯å’Œç”¨æˆ·æ¶ˆæ¯ä¸¤éƒ¨åˆ†
# ç³»ç»Ÿæ¶ˆæ¯æŒ‡ç¤ºæ¨¡å‹å°†è‹±æ–‡ç¿»è¯‘æˆæŒ‡å®šè¯­è¨€ï¼Œç”¨æˆ·æ¶ˆæ¯åŒ…å«å¾…ç¿»è¯‘çš„æ–‡æœ¬
prompt_template = ChatPromptTemplate.from_messages([
    # ç³»ç»Ÿæ¶ˆæ¯æ¨¡æ¿ï¼Œä½¿ç”¨ {language} å’Œ {text} ä½œä¸ºå ä½ç¬¦
    (<span class="hljs-string">"system"</span>,<span class="hljs-string">"Translat the following from English into {language}"</span>),
    # ç”¨æˆ·æ¶ˆæ¯æ¨¡æ¿ï¼ŒåŒ…å«å¾…ç¿»è¯‘çš„æ–‡æœ¬å ä½ç¬¦
    (<span class="hljs-string">"user"</span>,<span class="hljs-string">"{text}"</span>)
])
 
# ä½¿ç”¨æŒ‡å®šå‚æ•°å®ä¾‹åŒ–æç¤ºæ¨¡æ¿ï¼Œå°† {language} æ›¿æ¢ä¸º <span class="hljs-string">"Chinese"</span>ï¼Œ{text} æ›¿æ¢ä¸º <span class="hljs-string">"I love programming."</span>
prompt = prompt_template.invoke({<span class="hljs-string">"language"</span>:<span class="hljs-string">"Chinese"</span>,<span class="hljs-string">"text"</span>:<span class="hljs-string">"I love programming."</span>})
 
# ä» langchain_openai æ¨¡å—å¯¼å…¥ ChatOpenAI ç±»ï¼Œç”¨äºä¸OpenAIæ¨¡å‹äº¤äº’
from langchain_openai import ChatOpenAI
 
# åˆå§‹åŒ– ChatOpenAI æ¨¡å‹å®ä¾‹ï¼ŒæŒ‡å®šæ¨¡å‹åç§°ã€APIåŸºç¡€URLå’ŒAPIå¯†é’¥
llm = ChatOpenAI(model=<span class="hljs-string">"gpt-4o-mini"</span>, base_url=<span class="hljs-string">"https://api.gptsapi.net/v1"</span>, api_key=<span class="hljs-built_in">os</span>.environ[<span class="hljs-string">"OPENAI_API_KEY"</span>])
 
# è°ƒç”¨æ¨¡å‹å¤„ç†æ„å»ºå¥½çš„æç¤ºï¼Œè·å–ç¿»è¯‘ç»“æœ
result = llm.invoke(prompt)
 
# æ‰“å°ç¿»è¯‘ç»“æœçš„å†…å®¹éƒ¨åˆ†
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“æœ:"</span>, result.content)
 
# æ‰“å°å®Œæ•´çš„è¿”å›å¯¹è±¡ï¼ŒåŒ…å«æ›´å¤šå…ƒæ•°æ®ä¿¡æ¯
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å®Œæ•´è¿”å›å¯¹è±¡:"</span>, result)
 
# ç»“æœ: æˆ‘çˆ±ç¼–ç¨‹ã€‚
# å®Œæ•´è¿”å›å¯¹è±¡: content=<span class="hljs-string">'æˆ‘çˆ±ç¼–ç¨‹ã€‚'</span> additional_kwargs={<span class="hljs-string">'refusal'</span>: None} response_metadata={<span class="hljs-string">'token_usage'</span>: {<span class="hljs-string">'completion_tokens'</span>: <span class="hljs-number">6</span>, <span class="hljs-string">'prompt_tokens'</span>: <span class="hljs-number">23</span>, <span class="hljs-string">'total_tokens'</span>: <span class="hljs-number">29</span>, <span class="hljs-string">'completion_tokens_details'</span>: {<span class="hljs-string">'accepted_prediction_tokens'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'audio_tokens'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'reasoning_tokens'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'rejected_prediction_tokens'</span>: <span class="hljs-number">0</span>}, <span class="hljs-string">'prompt_tokens_details'</span>: {<span class="hljs-string">'audio_tokens'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'cached_tokens'</span>: <span class="hljs-number">0</span>}}, <span class="hljs-string">'model_provider'</span>: <span class="hljs-string">'openai'</span>, <span class="hljs-string">'model_name'</span>: <span class="hljs-string">'gpt-4o-mini'</span>, <span class="hljs-string">'system_fingerprint'</span>: <span class="hljs-string">'fp_efad92c60b'</span>, <span class="hljs-string">'id'</span>: <span class="hljs-string">'chatcmpl-CfoAf0Kq0Pyywkff8s5cCwvKOmtVx'</span>, <span class="hljs-string">'finish_reason'</span>: <span class="hljs-string">'stop'</span>, <span class="hljs-string">'logprobs'</span>: None} id=<span class="hljs-string">'lc_run--3d21e66b-571b-4d23-af2e-6eee27d07461-0'</span> usage_metadata={<span class="hljs-string">'input_tokens'</span>: <span class="hljs-number">23</span>, <span class="hljs-string">'output_tokens'</span>: <span class="hljs-number">6</span>, <span class="hljs-string">'total_tokens'</span>: <span class="hljs-number">29</span>, <span class="hljs-string">'input_token_details'</span>: {<span class="hljs-string">'audio'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'cache_read'</span>: <span class="hljs-number">0</span>}, <span class="hljs-string">'output_token_details'</span>: {<span class="hljs-string">'audio'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'reasoning'</span>: <span class="hljs-number">0</span>}}
 
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[YOLOv5 ç§»æ¤ RK3588 è¸©å‘è®°å½•]]></title>    <link>https://juejin.cn/post/7577309505710424127</link>    <guid>https://juejin.cn/post/7577309505710424127</guid>    <pubDate>2025-11-28T01:43:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577309505710424127" data-draft-id="7577278843234582571" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="YOLOv5 ç§»æ¤ RK3588 è¸©å‘è®°å½•  "/> <meta itemprop="keywords" content="åµŒå…¥å¼"/> <meta itemprop="datePublished" content="2025-11-28T01:43:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºŒç‹—å°±æ˜¯æˆ‘"/> <meta itemprop="url" content="https://juejin.cn/user/2313028194286679"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            YOLOv5 ç§»æ¤ RK3588 è¸©å‘è®°å½•  
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2313028194286679/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºŒç‹—å°±æ˜¯æˆ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-28T01:43:26.000Z" title="Fri Nov 28 2025 01:43:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">YOLOv5 ç§»æ¤ RK3588 è¸©å‘è®°å½•</h2>
<p>ï¼ˆpt â†’ onnx â†’ rknn å…¨æµç¨‹ï¼‰</p>
<blockquote>
<p>ç¯å¢ƒï¼šYOLOv5-5.x / rknn-toolkit2 / Pythonâ‰¥3.8
æ¿å¡ï¼šRK3588<br/>
ç›®æ ‡ï¼šå¤ç”¨å®˜æ–¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fairockchip%2Fyolov5_rknn" target="_blank" title="https://github.com/airockchip/yolov5_rknn" ref="nofollow noopener noreferrer">yolov5_rknn</a> ç¤ºä¾‹ï¼Œä»…æ›¿æ¢ <code>*.rknn</code> + <code>*.yaml</code> å³å¯è·‘é€š</p>
</blockquote>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c58eb8206d5d4b36bc0a9c7e2ad21fe2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqM54uX5bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764899704&amp;x-signature=TjENZTmrR5txcw7bkrSNlSsuSQs%3D" alt="{AEE826FC-267B-4263-8DDB-7E01FC8B3176}.png" loading="lazy"/></p>
<h3 data-id="heading-1">1. pt â†’ onnx è½¬æ¢</h3>
<h4 data-id="heading-2">1.1 åŸç”Ÿ export.py ç›´æ¥è½¬ä¼šæŠ¥é”™</h4>
<pre><code class="hljs language-bash" lang="bash">python export.py --weights yolov5s.pt --include onnx
</code></pre>
<p>è¿è¡Œ rknn ç¤ºä¾‹ <code>test.py</code> æ—¶ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">IndexError: list index <span class="hljs-keyword">out</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">range</span>
</code></pre>
<p><strong>åŸå› </strong>ï¼šDetect å±‚è¾“å‡º tupleï¼Œè€Œ rknn ç¤ºä¾‹åªæ‹¿ list ç¬¬ 1 ä¸ªç‰¹å¾å›¾ã€‚</p>
<hr/>
<h4 data-id="heading-3">1.2 ä¿®æ”¹ 1ï¼šå»æ‰ Detect åå¤„ç†ï¼Œåªè¾“å‡º 3 ä¸ª sigmoid ç‰¹å¾å›¾</h4>
<p><strong>æ–‡ä»¶</strong> <code>models/yolo.py</code><br/>
<strong>ç±»</strong> <code>Detect.forward()</code><br/>
<strong>åŸå§‹ä»£ç </strong>ï¼ˆå·²æ³¨é‡Šï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
    z = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.nl):
        x[i] = self.m[i](x[i])  <span class="hljs-comment"># conv</span>
        bs, _, ny, nx = x[i].shape
        x[i] = x[i].view(bs, self.na, self.no, ny, nx).permute(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>).contiguous()
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.training:
            ...
            z.append(y.view(bs, self.na * nx * ny, self.no))
    <span class="hljs-keyword">return</span> x <span class="hljs-keyword">if</span> self.training <span class="hljs-keyword">else</span> (torch.cat(z, <span class="hljs-number">1</span>), ) <span class="hljs-keyword">if</span> self.export <span class="hljs-keyword">else</span> (torch.cat(z, <span class="hljs-number">1</span>), x)
</code></pre>
<p><strong>ä¿®æ”¹ä¸º</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
    z = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.nl):
        z.append(torch.sigmoid(self.m[i](x[i])))  <span class="hljs-comment"># ä»…å·ç§¯+sigmoid</span>
    <span class="hljs-keyword">return</span> z
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼š</p>
<ol>
<li>ä¸å†åš <code>view/permute/grid/anchor</code> ç­‰åå¤„ç†ï¼›</li>
<li>è¿”å› <code>List[Tensor]</code>ï¼Œrknn ä¾§ç›´æ¥æ‹¿ 3 ä¸ªç‰¹å¾å›¾ã€‚</li>
</ol>
</blockquote>
<hr/>
<h4 data-id="heading-4">1.3 ä¿®æ”¹ 2ï¼šexport.py æ”¯æŒ list ç±»å‹è¾“å‡º</h4>
<p><strong>æ–‡ä»¶</strong> <code>export.py</code><br/>
<strong>ä½ç½®</strong>ï¼š<code>run()</code> å‡½æ•°é‡Œè·å– output shape å¤„<br/>
<strong>åŸå§‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">shape = <span class="hljs-built_in">tuple</span>((y[<span class="hljs-number">0</span>] <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(y, <span class="hljs-built_in">tuple</span>) <span class="hljs-keyword">else</span> y).shape)
</code></pre>
<p><strong>æ”¹ä¸º</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">shape = <span class="hljs-built_in">tuple</span>((y[<span class="hljs-number">0</span>] <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isinstance</span>(y, <span class="hljs-built_in">tuple</span>) <span class="hljs-keyword">or</span> <span class="hljs-built_in">isinstance</span>(y, <span class="hljs-built_in">list</span>)) <span class="hljs-keyword">else</span> y).shape)
</code></pre>
<blockquote>
<p>ä¿è¯ <code>y</code> ä¸º list æ—¶ä¹Ÿèƒ½æ­£å¸¸å–ç¬¬ 0 ä¸ªå…ƒç´ ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-5">1.4 é‡æ–°è½¬ onnx</h4>
<pre><code class="hljs language-bash" lang="bash">python export.py --weights yolov5s.pt --include onnx
</code></pre>
<p>ç”¨ Netron æ‰“å¼€ï¼Œç¡®è®¤å°¾éƒ¨åªå‰© 3 ä¸ª <code>Sigmoid</code> èŠ‚ç‚¹ï¼Œæ—  <code>Detect</code> ç®—å­ã€‚</p>
<hr/>
<h3 data-id="heading-6">2. anchors æ–‡ä»¶ç”Ÿæˆï¼ˆè¸©å‘ 2ï¼‰</h3>
<p><strong>èƒŒæ™¯</strong>ï¼šRKNN ç¤ºä¾‹åå¤„ç†éœ€è¦ anchorsï¼Œå¿…é¡»ä¸è®­ç»ƒæ—¶ä¿æŒä¸€è‡´ã€‚<br/>
<strong>å·¥å…·</strong>ï¼šå®˜æ–¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fairockchip%2Fyolov5_rknn" target="_blank" title="https://github.com/airockchip/yolov5_rknn" ref="nofollow noopener noreferrer">yolov5_rknn</a> å·²æä¾› <code>export.py</code>ï¼Œ<strong>æ— éœ€æ‰‹åŠ¨æ”¹ anchor</strong>ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/airockchip/yolov5_rknn
<span class="hljs-built_in">cd</span> yolov5_rknn
python export.py --rknpu --weights car_tk_hanma.pt
</code></pre>
<p>æ‰§è¡Œå®Œæ¯•ä¼šè‡ªåŠ¨ç”Ÿæˆï¼š</p>
<pre><code class="hljs">RK_anchors.txt
</code></pre>
<p>å†…å®¹ç¤ºä¾‹ï¼ˆ9 è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang"><span class="hljs-number">32.0</span>
<span class="hljs-number">32.0</span>
...
</code></pre>
<blockquote>
<p>è‹¥ç”¨è‡ªå·±æ”¹è¿‡çš„ export.py å¿˜è®°ç”Ÿæˆï¼Œä¼šå¯¼è‡´ rknn æ¨ç†æ¡†å…¨éƒ¨æ¼‚ç§»æˆ– 0 æ£€å‡ºã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">3. onnx â†’ rknn</h3>
<ol>
<li>
<p>æŠŠä¸Šä¸€æ­¥å¾—åˆ°çš„ <code>*.onnx</code> + <code>RK_anchors.txt</code> å¤åˆ¶åˆ°<br/>
<code>rknn-toolkit2/examples/yolov5/python</code> ç›®å½•ã€‚</p>
</li>
<li>
<p>ä¿®æ”¹ <code>yaml</code> æ–‡ä»¶ï¼ˆç±»åˆ«å/anchor è·¯å¾„ï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">anchors_path:</span> <span class="hljs-string">RK_anchors.txt</span>
<span class="hljs-attr">names:</span> [<span class="hljs-string">'class1'</span>, <span class="hljs-string">'class2'</span>, <span class="hljs-string">...</span>]
</code></pre>
</li>
<li>
<p>æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python test.py
</code></pre>
<p>ä¼šè‡ªåŠ¨å®Œæˆ <code>onnx â†’ rknn</code> è½¬æ¢ + æ¿ç«¯æ¨ç†ã€‚</p>
</li>
</ol>
<hr/>
<h3 data-id="heading-8">4. ä¸€é”®æ€»ç»“</h3>






























<table><thead><tr><th>æ­¥éª¤</th><th>å…³é”®ä¿®æ”¹</th><th>æ–‡ä»¶</th></tr></thead><tbody><tr><td>â‘  å»æ‰ Detect åå¤„ç†</td><td><code>forward</code> è¿”å› <code>List[sigmoid(feat)]</code></td><td><code>models/yolo.py</code></td></tr><tr><td>â‘¡ export æ”¯æŒ list</td><td><code>isinstance(y, tuple) or isinstance(y, list)</code></td><td><code>export.py</code></td></tr><tr><td>â‘¢ ç”Ÿæˆ anchors</td><td>åŠ  <code>--rknpu</code> å¼€å…³</td><td>å®˜æ–¹ <code>export.py</code></td></tr><tr><td>â‘£ è½¬ rknn</td><td>ç›´æ¥è·‘ <code>test.py</code></td><td>rknn-toolkit2 ç¤ºä¾‹</td></tr></tbody></table>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b52111f58f8450c838eaca2a4b18e39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqM54uX5bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764899704&amp;x-signature=Y%2BQapJEN6ZtA0hc7eZeY9f1MhEc%3D" alt="003b5db7b30cf4d3cdb166b7c2bd8b6f.jpg" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>