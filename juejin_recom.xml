<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[è°·æ­Œä¸è£…äº†ï¼šTranslateGemmaå‘å¸ƒï¼Œ12Bå‚æ•°ç«Ÿå€’åå¤©ç½¡åŠæ‰“å‰è¾ˆ]]></title>    <link>https://juejin.cn/post/7596245612557484041</link>    <guid>https://juejin.cn/post/7596245612557484041</guid>    <pubDate>2026-01-18T12:33:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596245612557484041" data-draft-id="7596245612557467657" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°·æ­Œä¸è£…äº†ï¼šTranslateGemmaå‘å¸ƒï¼Œ12Bå‚æ•°ç«Ÿå€’åå¤©ç½¡åŠæ‰“å‰è¾ˆ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-01-18T12:33:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°·æ­Œä¸è£…äº†ï¼šTranslateGemmaå‘å¸ƒï¼Œ12Bå‚æ•°ç«Ÿå€’åå¤©ç½¡åŠæ‰“å‰è¾ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T12:33:07.000Z" title="Sun Jan 18 2026 12:33:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¹³æ—¶çˆ±æŠ˜è…¾æ¨¡å‹çš„æŸæŸã€‚</p>
<p>ç¿»è¯‘æ¨¡å‹è¿™ä¸ªèµ›é“ï¼Œè¿™å‡ å¹´å…¶å®æŒºå·çš„ã€‚ä½†å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬çš„è®¤çŸ¥è¿˜åœç•™åœ¨â€œå¤§åŠ›å‡ºå¥‡è¿¹â€çš„é˜¶æ®µâ€”â€”æƒ³è¦åœ¨WMT24++åŸºå‡†æµ‹è¯•ä¸­ï¼Œ<strong>TranslateGemma 12Bçš„ç¿»è¯‘è´¨é‡ç«Ÿç„¶ç›´æ¥å¹²ç¿»è¯‘å¾—ä¿¡è¾¾é›…ï¼Œæ¨¡å‹å‚æ•°å°±å¾—å¾€æ­»é‡Œå †ã€‚æ˜¾å¡åœ¨ç‡ƒçƒ§ï¼Œç”µè¡¨åœ¨å€’æ‰äº†Gemma 3è‡ªå®¶çš„27BåŸºçº¿æ¨¡å‹ã€‚</strong></p>
<p>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€è¿‡å»ä½ éœ€è¦ä¸€å°æ˜‚è½¬ï¼Œæœ€åå‡ºæ¥çš„ç»“æœå¯èƒ½ä¹Ÿå°±æ¯”è°·æ­Œç¿»è¯‘å¥½é‚£ä¹ˆä¸€ç‚¹ç‚¹ã€‚</p>
<p>ä½†è°·æ­Œæœ€è¿‘æ”¾å‡ºçš„è¿™ä¸ªTranslateGemmaï¼Œè´µçš„æœåŠ¡å™¨æ‰èƒ½è·‘å‡ºæ¥çš„ç¿»è¯‘è´¨é‡ï¼Œç°åœ¨åœ¨ä¸€å°é…ç½®ä¸é”™çš„æ¶ˆè´¹çº§ç¬”è®°æœ¬ï¼ˆæ¯”å¦‚æ­è½½M3 MaxèŠ¯ç‰‡çš„MacBookæˆ–RTX 4090çš„PCï¼‰ä¸Šå°±èƒ½æœ¬åœ°è¿è¡Œï¼Œè€Œä¸”æ•ˆæœæ›´å¥½ã€é€Ÿåº¦æ›´å¿«ç¡®å®è®©æˆ‘çœ¼å‰ä¸€äº®ã€‚è¿™æ¬¡ä»–ä»¬æ²¡æŒ‰å¥—è·¯å‡ºç‰Œï¼Œä¸å…¶è¯´æ˜¯åœ¨ç§€è‚Œè‚‰ï¼Œä¸å¦‚è¯´æ˜¯åœ¨ç§€â€œã€‚è¿™ç§â€œå‚æ•°å€’æŒ‚â€ç°è±¡ï¼Œå®å®åœ¨åœ¨åœ°é™ä½äº†é«˜è´¨é‡ç¿»è¯‘æŠ€æœ¯çš„é—¨æ§›ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fesdsdfsdf.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/esdsdfsdf.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ee4c96799454526ae456d514e7f94cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769344386&amp;x-signature=EDEh749TLWP3gpZopYsHcUdCJ%2FY%3D" alt="esdsdfsdf" loading="lazy"/></a></p>
<h3 data-id="heading-0">æ‰‹æœºç«¯çš„å¾®æ“â€ã€‚</h3>
<p>ç®€å•è¯´ï¼Œè¿™æ˜¯ä¸€æ¬¾åŸºäºGemma 3æ¶æ„çš„å¼€æºç¿»è¯‘æ¨¡å‹å…¨å®¶æ¡¶ã€‚æœ€å¤§çš„çœ‹ç‚¹ä¸æ˜¯å®ƒæœ‰å¤šå¤§ï¼Œè€Œæ˜¯å®ƒæœ‰å¤šâ€œç²¾â€ã€‚</p>
<p>**å‚æ•°æ¸¸æˆï¼šå½“12Bå¼€å§‹â€œè¶Šâ€œç¦»çº¿é»‘ç§‘æŠ€â€</p>
<p>å¯¹äºæ™®é€šç”¨æˆ·ï¼Œå°¤å…¶æ˜¯ç»å¸¸å‡ºå›½çš„æ—…è¡Œè€…æ¥è¯´ï¼Œé‚£ä¸ªæœ€å°çš„4Bç‰ˆæœ¬å¯èƒ½æ‰æ˜¯çœŸæ­£çš„æ€æ‰‹é”ã€‚</p>
<p>ä»¥å¾€çš„æ‰‹æœºç«¯ç¦»çº¿ç¿»è¯‘ï¼Œè¦ä¹ˆè¯ä¸è¾¾æ„ï¼Œè¦ä¹ˆç”Ÿç¡¬å¾—åƒçº§æŒ‘æˆ˜â€**</p>
<p>å…ˆè¯´æœ€è®©æˆ‘è§‰å¾—ä¸å¯æ€è®®çš„æ•°æ®ã€‚</p>
<p>æŒ‰ç…§å¸¸ç†ï¼Œå¤§æ¨¡å‹çš„æ™ºå•†å’Œå‚æ•°é‡æ˜¯æˆæ­£æ¯”çš„ã€‚270äº¿å‚æ•°ï¼ˆ27Bï¼‰çš„æ¨¡å‹é€šå¸¸éƒ½è¦æ¯”120äº¿æœºå™¨äººã€‚è€ŒTranslateGemma 4Bè™½ç„¶èº«èº¯å°å·§ï¼Œæ€§èƒ½å´è¶³ä»¥åª²ç¾æ—§æ¬¾çš„12Bæ¨¡å‹ã€‚è°·æ­Œé€šè¿‡æè‡´çš„ä¼˜åŒ–ï¼Œè®©è¿™ä¸ªæ¨¡å‹å¯ä»¥åœ¨æ‰‹æœºã€å¹³æ¿ç­‰è¾¹ç¼˜è®¾å¤‡ä¸Šæµç•…è¿è¡Œã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Ffdafsd-1024x428.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/fdafsd-1024x428.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6107151d4d2c4e06a11e9b279a03f573~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769344386&amp;x-signature=BlOrk0aRuIHOA05wscVQl3aH2Jw%3D" alt="fdafsd" loading="lazy"/></a></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå‚æ•°ï¼ˆ12Bï¼‰çš„èªæ˜ã€‚ä½†åœ¨TranslateGemmaè¿™é‡Œï¼Œè¿™ä¸ªå®šå¾‹å¤±æ•ˆäº†ã€‚</p>
<p>æ ¹æ®å®˜æ–¹æŠ€æœ¯æŠ¥å‘Šï¼Œåœ¨æ²¡æœ‰ç½‘ç»œçš„å¼‚å›½è¡—å¤´ï¼Œä½ æå‡ºæ‰‹æœºï¼Œä¾æ—§èƒ½è·å¾—äº‘ç«¯çº§åˆ«çš„æµç•…ç¿»è¯‘ä½“éªŒï¼Œè¿™æ‰æ˜¯æŠ€æœ¯é‚£ä¸ªèº«å½¢ä¸­ç­‰çš„<strong>12Bç‰ˆæœ¬</strong>ï¼Œåœ¨WMT24++è¿™ç§ç¡¬æ ¸åŸºå‡†æµ‹è¯•é‡Œï¼Œç¿»è¯‘è´¨é‡å±…ç„¶å¹²æ‰äº†è‡ªå®¶ä¸Šä¸€ä»£Gemma 3çš„<strong>27BåŸºçº¿æ¨¡å‹</strong>ã€‚</p>
<p>è¿™å°±å¥½æ¯”ä¸€ä¸ªè½åœ°çš„çœŸå®æ„ä¹‰ã€‚</p>
<h3 data-id="heading-1">å®ƒæ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</h3>
<p>è°·æ­Œå¹¶æ²¡æœ‰ä½¿ç”¨é­”æ³•ï¼Œè€Œæ˜¯ç”¨äº†ä¸€å¥—ç›¸å½“è½»é‡çº§æ‹³å‡»æ‰‹ï¼Œå‡­å€Ÿç€æå…¶ç²¾æ¹›çš„æŠ€æœ¯ï¼Œåœ¨æ“‚å°ä¸ŠKOäº†ä¸€ä¸ªé‡é‡çº§é€‰æ‰‹ã€‚è¿™å¯¹äºä¸¥è‹›çš„â€œç‰¹è®­â€æµç¨‹ã€‚</p>
<p>TranslateGemmaçš„å¼ºæ‚æºäºä¸€ç§åˆ›æ–°çš„â€œä¸¤é˜¶æ®µè®­ç»ƒâ€æœºåˆ¶ã€‚é¦–å…ˆæ˜¯<strong>ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰</strong>ï¼Œè°·æ­Œåˆ©ç”¨Geminiå¤§æ¨¡å‹ç”Ÿæˆäº†æµ·é‡é«˜è´¨é‡çš„åˆæˆæˆ‘ä»¬è¿™äº›æ²¡æœ‰H100æ˜¾å¡ã€åªèƒ½ç”¨æ¶ˆè´¹çº§ç¬”è®°æœ¬ï¼ˆæ¯”å¦‚4090æˆ–è€…M3 Maxæ•°æ®ï¼Œé…åˆäººç±»ç¿»è¯‘è¯­æ–™ï¼Œå…ˆç»™æ¨¡å‹æ‰“å¥½åº•å­ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Ffweergrfe-1024x595.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/fweergrfe-1024x595.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b28bc00361554fd3957ccf57bae02d4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769344386&amp;x-signature=IadftwZWESKTV%2BOpktChKmu9lJU%3D" alt="fweergrfe" loading="lazy"/></a></p>
<p>æ¥ä¸‹æ¥çš„**å¼ºåŒ–å­¦ä¹ ï¼ˆRLèŠ¯ç‰‡ï¼‰è·‘æœ¬åœ°æ¨¡å‹çš„å¼€å‘è€…æ¥è¯´ï¼Œç®€ç›´æ˜¯ç¦éŸ³ã€‚æ„å‘³ç€ä½ ä¸éœ€è¦ç§Ÿæ˜‚è´µçš„äº‘æœåŠ¡å™¨ï¼Œåœ¨æœ¬åœ°å°±èƒ½è·‘å‡ºï¼‰**é˜¶æ®µæ‰æ˜¯å…³é”®ã€‚ç ”ç©¶å›¢é˜Ÿå¼•å…¥äº†ä¸€ä¸ªâ€œå¥–åŠ±æ¨¡å‹è¯„å®¡å›¢â€ï¼ŒåŒ…æ‹¬MetricX-QEå’ŒAutoMQMåŸæœ¬éœ€è¦åºå¤§ç®—åŠ›æ‰èƒ½è¾¾åˆ°çš„ç¿»è¯‘æ•ˆæœã€‚</p>
<p><strong>å®ƒæ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</strong></p>
<p>è°·æ­Œè¿™æ¬¡åœ¨ç­‰å·¥å…·ã€‚è¿™å°±å¥½æ¯”æ¨¡å‹æ¯ç¿»è¯‘ä¸€å¥ï¼Œå°±æœ‰å¥½å‡ ä¸ªä¸¥å‰çš„è€å¸ˆä»å‡†ç¡®åº¦ã€æµç•…åº¦è®­ç»ƒæ–¹æ³•ä¸Šç¡®å®æœ‰ç‚¹ä¸œè¥¿ã€‚ä»–ä»¬æ²¡æœ‰æ— è„‘å–‚æ•°æ®ï¼Œè€Œæ˜¯é‡‡ç”¨äº†â€œä¸¤é˜¶æ®µè®­ç»ƒæ³•â€ã€‚</p>
<p>ç¬¬ä¸€é˜¶æ®µã€è‡ªç„¶åº¦ç­‰å¤šä¸ªç»´åº¦æ‰“åˆ†ã€‚é€šè¿‡è¿™ç§é«˜å¼ºåº¦çš„åé¦ˆå¾ªç¯ï¼Œæ¨¡å‹å­¦ä¼šäº†å¦‚ä½•ç”¨æ›´å°‘çš„è®¡ç®—èµ„æºï¼Œè¾“å‡ºæ›´ç¬¦åˆäººç±»é˜…è¯»ä¹ æƒ¯çš„è¯‘æ–‡ã€‚</p>
<h3 data-id="heading-2">ä¸æ­¢äºæ–‡æœ¬çš„â€œå…¨èƒ½çœ¼æ˜¯å¸¸è§„çš„ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰ï¼Œç”¨äº†å¤§é‡é«˜è´¨é‡çš„äººç±»ç¿»è¯‘æ•°æ®ï¼Œè¿˜æœ‰Geminiç”Ÿæˆçš„é«˜ç½®ä¿¡åº¦â€</h3>
<p>æ—¢ç„¶ç»§æ‰¿äº†Gemma 3çš„è¡€ç»Ÿï¼ŒTranslateGemmaè‡ªç„¶ä¹Ÿç‚¹äº®äº†å¤šæ¨¡æ€çš„å¤©èµ‹æ ‘åˆæˆæ•°æ®ã€‚è¿™ä¸€æ­¥ç›¸å½“äºæ‰“åœ°åŸºã€‚</p>
<p>çœŸæ­£çš„é­”æ³•åœ¨ç¬¬äºŒé˜¶æ®µï¼šå¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰ã€‚è°·æ­Œå¼„ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fdgfseger-1024x638.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/dgfseger-1024x638.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae479e3407024a1ebaf039074a240c16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769344386&amp;x-signature=0%2BMw4%2FUCAQb%2BCQxOpxqeoZCznmE%3D" alt="dgfseger" loading="lazy"/></a></p>
<p>å®ƒä¸éœ€è¦ä¸“é—¨é’ˆå¯¹å›¾åƒè®­ç»ƒï¼Œå°±èƒ½ç›´æ¥â€œçœ‹æ‡‚â€å›¾ç‰‡é‡Œçš„æ–‡å­—ã€‚åœ¨VistraåŸºå‡†äº†ä¸€å¥—â€œå¥–åŠ±æ¨¡å‹å…¨å®¶æ¡¶â€ï¼Œé‡Œé¢åŒ…æ‹¬è´Ÿè´£è´¨é‡è¯„ä¼°çš„MetricX-QEï¼Œè¿˜æœ‰è´Ÿè´£çœ‹è¯­æµ‹è¯•ä¸­ï¼Œå®ƒå±•ç¤ºäº†ç›´æ¥ä»å›¾åƒæå–å¹¶ç¿»è¯‘æ–‡æœ¬çš„èƒ½åŠ›ã€‚è¿™æ„å‘³ç€å½“ä½ æŠŠé•œå¤´å¯¹å‡†å›½å¤–çš„èœå•æˆ–è·¯ç‰Œåºè‡ªä¸è‡ªç„¶çš„å„ç§æŒ‡æ ‡ã€‚æ¨¡å‹æ¯ç¿»è¯‘ä¸€å¥ï¼Œè¿™äº›â€œä¸¥å¸ˆâ€å°±ä¼šæ‰“åˆ†ï¼Œç¿»è¯‘å¾—å¥½ç»™æ—¶ï¼Œæ¨¡å‹ä¸æ˜¯å…ˆOCRè¯†åˆ«æˆæ–‡å­—å†ç¿»è¯‘ï¼Œè€Œæ˜¯ç›´æ¥ç†è§£å›¾åƒå†…å®¹è¿›è¡Œè½¬æ¢ï¼Œæ•ˆç‡å’Œå‡†ç¡®ç‡ç³–åƒï¼Œç¿»è¯‘å¾—ä¸å¥½æ‰£åˆ†ã€‚</p>
<p>è¿™ç§é«˜å¼ºåº¦çš„â€œç‰¹è®­â€ï¼Œè®©æ¨¡å‹å­¦ä¼šäº†å¦‚ä½•åœ¨æœ‰é™çš„å‚æ•°ç©ºé—´éƒ½ä¸Šäº†ä¸€ä¸ªå°é˜¶ã€‚</p>
<h3 data-id="heading-3">ç»“è¯­</h3>
<p>TranslateGemmaçš„å‘å¸ƒï¼Œç»™å¼€æºç¤¾åŒºå‘å‡ºäº†ä¸€ä¸ªé‡Œï¼ŒæŠŠç¿»è¯‘è¿™ä»¶äº‹åšåˆ°æè‡´ã€‚</p>
<p><strong>æ‰‹æœºå…šçš„èƒœåˆ©ä¸â€œçœ‹å›¾è¯´è¯â€</strong></p>
<p>é™¤äº†é‚£ä¸ªèƒ½æ¸…æ™°çš„ä¿¡å·ï¼š<strong>å¤§æ¨¡å‹çš„ä¸‹åŠåœºï¼Œæ‹¼çš„ä¸å†å•çº¯æ˜¯å‚æ•°è§„æ¨¡ï¼Œè€Œæ˜¯è®­ç»ƒçš„æ•ˆç‡å’Œæ•°æ®çš„è´¨é‡æ‰“çš„12Bï¼Œè¿˜æœ‰ä¸€ä¸ª</strong>4Bç‰ˆæœ¬**ä¹Ÿéå¸¸å€¼å¾—å…³æ³¨ã€‚</p>
<p>40äº¿å‚æ•°ï¼Œæ”¾åœ¨ä»¥å‰ã€‚**</p>
<p>ç›®å‰ï¼Œè¿™ä¸€ç³»åˆ—æ¨¡å‹å·²ç»ç™»é™†Hugging Faceå’ŒKaggleã€‚æ— è®ºä½ æ˜¯æƒ³åœ¨æœåŠ¡å™¨ä¸Šè¿½æ±‚æè‡´çš„ç¿»è¯‘ä¿çœŸåº¦ï¼ˆé€‰æ‹©27Bï¼‰ï¼Œè¿˜æ˜¯æƒ³åœ¨ç¬”è®°æœ¬ä¸Šæ­å»ºæœ¬åœ°ç¿»è¯‘åŠ©æ‰‹ï¼ˆé€‰æ‹©12å¯èƒ½å°±æ˜¯ä¸ªç©å…·ï¼Œä½†è¿™å›è°·æ­ŒæŠŠå®ƒè°ƒæ•™åˆ°äº†èƒ½å’Œä¼ ç»Ÿ12Bæ¨¡å‹æ°æ‰‹è…•çš„æ°´å¹³Bï¼‰ï¼Œç”šè‡³æ˜¯åœ¨ç§»åŠ¨ç«¯åº”ç”¨ä¸­é›†æˆç¦»çº¿ç¿»è¯‘ï¼ˆé€‰æ‹©4Bï¼‰ï¼ŒTranslateGemmaéƒ½æä¾›äº†ä¸€ä¸ªç°ã€‚è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€ä½ çš„æ‰‹æœºã€å¹³æ¿ï¼Œç”šè‡³æ˜¯ä¸€äº›è¾¹ç¼˜è®¡ç®—è®¾å¤‡ï¼Œå¯ä»¥åœ¨å®Œå…¨ç¦»çº¿çš„æƒ…å†µä¸‹ï¼Œæµç•…è¿è¡Œé«˜è´¨é‡çš„ç¿»è¯‘æˆä¸”å¼ºå¤§çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fasfddfsdf-1024x780.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/asfddfsdf-1024x780.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/506e1778cea340c0897096f92fc2c5a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769344386&amp;x-signature=DVrmeq81OrkfJAPvxK%2BdJC66ruc%3D" alt="asfddfsdf" loading="lazy"/></a></p>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªæå¥½çš„åº•åº§ï¼›å¯¹äºç”¨æˆ·è€Œè¨€ï¼Œè¿™æ„å‘³ç€è¯­è¨€çš„å·´åˆ«å¡”ï¼Œåˆè¢«æ¨å€’äº†ä¸€å±‚ã€‚æ¨¡å‹ã€‚ä»¥åå‡ºå›½æ—…æ¸¸ï¼Œå“ªæ€•åœ¨æ²¡æœ‰ä¿¡å·çš„åœ°ä¸‹å®¤ï¼Œæå‡ºæ‰‹æœºä¹Ÿèƒ½å®æ—¶ç¿»è¯‘ã€‚</p>
<p>è€Œä¸”ï¼ŒTranslateGemmaç»§æ‰¿äº†Gemma 3çš„å¤šæ¨¡æ€åŸºå› ã€‚å®ƒä¸å…‰èƒ½çœ‹æ‡‚å­—ï¼Œè¿˜èƒ½çœ‹æ‡‚å›¾ã€‚</p>
<p>ä½ ç›´æ¥æŠŠä¸€å¼ æ‹æ­ªäº†çš„èœå•æˆ–è€…æ˜¯è·¯ç‰Œæ‰”ç»™å®ƒï¼Œå®ƒä¸éœ€è¦å…ˆç”¨OCRè½¬æˆæ–‡å­—ï¼Œ</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025æ€»ç»“ï¼šæˆ‘åœ¨æ·±åœ³åšå‰ç«¯çš„ç¬¬8å¹´]]></title>    <link>https://juejin.cn/post/7596230910212915243</link>    <guid>https://juejin.cn/post/7596230910212915243</guid>    <pubDate>2026-01-18T11:07:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596230910212915243" data-draft-id="7596276978807537707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025æ€»ç»“ï¼šæˆ‘åœ¨æ·±åœ³åšå‰ç«¯çš„ç¬¬8å¹´"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-18T11:07:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wing98"/> <meta itemprop="url" content="https://juejin.cn/user/2999123450017261"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025æ€»ç»“ï¼šæˆ‘åœ¨æ·±åœ³åšå‰ç«¯çš„ç¬¬8å¹´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2999123450017261/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wing98
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T11:07:21.000Z" title="Sun Jan 18 2026 11:07:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è½¬çœ¼å…¥è¡Œå‰ç«¯å·²ç»8ä¸ªå¹´å¤´ï¼Œæˆ‘ä¹Ÿç®—ä¸€åè€å‰ç«¯äº†ã€‚å¯èƒ½è‡ªå·±å¯¹è¿™ä¸€è¡Œè°ˆä¸ä¸Šç‰¹åˆ«å–œæ¬¢ï¼Œä¹Ÿä¸è®¨åŒï¼Œå·¥ä½œä¸Šä¸€ç›´æ²¡æœ‰ä»€ä¹ˆèµ·è‰²ã€‚</p>
<p><strong>å·¥ä½œ</strong></p>
<p>å»å¹´å¹´åº•æˆ‘å…¥èŒäº†ä¸€å®¶å¤–åŒ…å…¬å¸ï¼Œç„¶åæ´¾å»ç»™ä¸€å®¶ä¸Šå¸‚å…¬å¸å¹²æ´»ã€‚è‡ªå·±å½“æ—¶å¾…çš„å‰ç«¯å›¢é˜ŸåŠ ä¸Šä¸¤ä¸ªå¤–åŒ…å‘˜å·¥å…±æœ‰7äººï¼Œæ¶‰åŠçš„é¡¹ç›®æœ‰ç®¡ç†å¹³å°ï¼ˆå¾®å‰ç«¯ï¼‰ä»¥åŠå¯¹åº”çš„ç®¡ç†åå°ã€Uniappå°ç¨‹åºã€Appï¼ˆReact Nativeï¼‰ã€å¯è§†åŒ–å¤§å±ç³»ç»Ÿã€‚æˆ‘ä¸»è¦å‚ä¸çš„æ˜¯pcç«¯ç³»ç»Ÿï¼Œéƒ½æ˜¯åŸºäºVueæ¡†æ¶ã€‚å…¶ä¸­ç®¡ç†å¹³å°ä¸»è¦æ˜¯ä¸€äº›å¸¸è§çš„ä¸šåŠ¡éœ€æ±‚çš„å¼€å‘ï¼Œä½†ä¹Ÿæœ‰åŸºäºsvgå°è£…çš„å®æ—¶ç›‘æ§ä¸»å›¾ç»„ä»¶è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼›å¦å¤–å¯è§†åŒ–å¤§å±é¡¹ç›®ä¹Ÿå‚ä¸çš„æ¯”è¾ƒå¤šï¼Œå­¦ä¹ åˆ°äº†å¤§å±é€‚é…çš„ç›¸å…³æ–¹æ¡ˆã€‚</p>
<p>å¦å¤–ï¼Œä»Šå¹´å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œè‡ªå·±ä¹Ÿå°è¯•ç”¨èµ·äº†AIç¼–ç¨‹å·¥å…·ã€‚æˆ‘ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯é˜¿é‡Œçš„é€šä¹‰çµç ï¼Œä¸å¾—ä¸è¯´å¯¹å·¥ä½œæ•ˆç‡çš„æå‡è¿˜æ˜¯å¾ˆå¤§ã€‚æœ€è¿‘æˆ‘å¼€å§‹è½¬å‘å­—èŠ‚çš„AIç¼–è¾‘å™¨traeï¼Œä½“éªŒä¸Šæ¥è¯´ç¡®å®æ¯”æ’ä»¶è¦å¥½å¾ˆå¤šã€‚</p>
<p>åœ¨è¿™å®¶å…¬å¸ä¸Šç­ï¼Œè¿˜æ˜¯æ¯”è¾ƒæ¸…é—²çš„ï¼Œå‘¨æœ«åŒä¼‘ï¼Œå¹³æ—¶ä¹Ÿä¸ä¼šå¼ºåˆ¶åŠ ç­ã€‚é¢†å¯¼å’ŒåŒäº‹ä¹‹é—´ç›¸å¤„ä¹Ÿæ¯”è¾ƒæ„‰å¿«ï¼Œåœ¨ç¦»åœºçš„æ—¶å€™ï¼Œè¿˜ä¸€èµ·åƒäº†å¥½å‡ é¡¿é¥­ã€‚</p>
<p><strong>ä¸šä½™æ—¶é—´</strong></p>
<p>å…¶å®ä»Šå¹´è‡ªå·±çš„ä¸šä½™æ—¶é—´æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œä½†è¿˜æ˜¯æ²¡æœ‰å¾ˆå¥½çš„åˆ©ç”¨ã€‚å¯èƒ½æˆ‘è¿™ä¸ªäººæ¯”è¾ƒæ‡’å§ï¼Œä¸è‚¯æ”¾å¼ƒä¼‘é—²å¨±ä¹çš„æ—¶é—´ï¼Œåˆ°ç°åœ¨å¹´åˆçš„ç›®æ ‡ä¹Ÿæ²¡å®ç°å‡ ä¸ªã€‚è¯´å¥½çš„å¤šå†™ç‚¹æŠ€æœ¯æ–‡ç« ï¼Œç»“æœå°±å¹´ç»ˆä¸€ç¯‡æ€»ç»“ï¼Œç¬‘æ­»ï¼å¦å¤–æˆ‘ä¹Ÿä¸æ˜¯ä¸€ä¸ªæœ‰è€å¿ƒçš„äººï¼Œä»Šå¹´æœ¬æ¥æƒ³æ­å»ºä¸€ä¸ªè‡ªå·±çš„åšå®¢ç³»ç»Ÿï¼Œä½†åšäº†ä¸€åŠåˆå»æé¢è¯•å°ç¨‹åºå»äº†ï¼Œåˆ°ç°åœ¨ä¸¤ä¸ªéƒ½è¿˜æ²¡å¼„å®Œã€‚æœ€è®©æˆ‘æ°”é¦çš„è¿˜æ˜¯è½¯è€ƒï¼Œè€ƒäº†ä¸‰æ¬¡éƒ½è¿˜æ²¡è¿‡ã€‚ä»Šå¹´è€ƒçš„ä¸¤æ¬¡åœ¨è€ƒå‰éƒ½åˆ·é¢˜äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œä½†æœ€åéƒ½æ˜¯å…¶ä¸­ä¸€ç§‘å·®ä¸¤åˆ†ï¼Œå¤ªä¼¤å¿ƒäº†ã€‚</p>
<p>å¸Œæœ›26å¹´è‡ªå·±å¯¹è‡ªå·±è¦æ±‚é«˜ä¸€ç‚¹ï¼Œå…»æˆè‡ªå¾‹çš„å¥½ä¹ æƒ¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91bc65794fe443efb0b9ede59a4c3894~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2luZzk4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769339241&amp;x-signature=tKtOwdzRubu3L8UnlSH9VEKjXRY%3D" alt="" loading="lazy"/></p>
<p><strong>å‰¯ä¸šæ¢ç´¢</strong></p>
<p>ä»Šå¹´æˆ‘å°è¯•çš„å‰¯ä¸šæ˜¯è™šæ‹Ÿåº—é“ºå’Œç½‘ç›˜æ‹‰æ–°ã€‚åœ¨ç½‘ä¸Šæœç½—äº†å‡ åGçš„ç½‘ç›˜èµ„æºï¼Œæœ‰å°éƒ¨åˆ†è‡ªå·±è§‰å¾—æ¯”è¾ƒå¥½çš„æ”¾åˆ°äº†æ·˜å®åº—é“ºä¸Šï¼Œæœ€åˆè¿˜æ˜¯å‡ºäº†å‡ å•çš„ï¼Œä½†åé¢ä¹Ÿæ…¢æ…¢æ²¡æœ‰æµé‡äº†ï¼Œå°±æ²¡æœ‰å¤ªä¸Šå¿ƒã€‚ç½‘ç›˜æ‹‰æ–°ä¹Ÿå·®ä¸å¤šï¼Œç‰¹åˆ«æ˜¯é­åˆ°å„å¹³å°å°å·ç¦è¨€ä¹‹åï¼Œä¹Ÿæ²¡æœ‰å»èŠ±æ—¶é—´äº†ã€‚ä¸¤ä¸ªå‰¯ä¸šä¸€èµ·å¤§æ¦‚æ”¶ç›Šä¸åˆ°200å…ƒï¼Œä¹Ÿç®—æ˜¯å‰¯ä¸šæ¢ç´¢ä¸Šè·¨å‡ºçš„ä¸€æ­¥ã€‚å…¶å®æˆ‘ä¸ªäººè§‰å¾—è¿™ä¸¤ä¸ªå‰¯ä¸šéƒ½æŒºå¥½çš„ï¼Œéƒ½ä¸éœ€è¦ä»€ä¹ˆå¯åŠ¨èµ„é‡‘ï¼Œå°±æ˜¯è¦å¤šèŠ±ç‚¹æ—¶é—´å»ç ”ç©¶ã€‚</p>
<p>å¸Œæœ›26å¹´è‡ªå·±å¤šèŠ±ç‚¹æ—¶é—´åœ¨ä¸Šé¢ï¼Œäº‰å–å‰¯ä¸šæ”¶å…¥æœˆå…¥è¿‡åƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e0de579272443d98c89ad1761a867ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2luZzk4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769339241&amp;x-signature=oRCsd4E92a5SbiXhlNp7buLMZ0E%3D" alt="" loading="lazy"/></p>
<p><strong>äºŒæ¬¡è¢«è£</strong></p>
<p>å¹´åº•çš„æ—¶å€™æˆ‘åˆç»å†äº†ä¸€æ¬¡è£å‘˜ï¼Œä¸å…¶è¯´æ˜¯è¢«è£ï¼Œå…¶å®æ˜¯å…¥èŒä¹‹åˆå°±èƒ½é¢„æ–™åˆ°çš„ç»“æœã€‚å› ä¸ºç»§ä¸Šä¸€æ¬¡è£å‘˜ä¹‹åï¼Œæˆ‘å…¥èŒäº†ä¸€å®¶å¤–åŒ…å…¬å¸ï¼Œè€Œä¸”æ˜¯ä¸ç¼´çº³å…¬ç§¯é‡‘å’Œç¤¾ä¿é‚£ç§ï¼Œæœ€å¯æ¨çš„æ˜¯åœ¨å…¥èŒä¹‹å‰å°±è®©ä½ ç­¾ç½²å„ç§ä¸»åŠ¨æ”¾å¼ƒå…¬ç§¯é‡‘å’Œç¤¾ä¿çš„åè®®ã€‚ç”±äºå½“æ—¶æ‰¾å·¥ä½œå‡ ä¸ªæœˆæ— æœï¼Œæœ€åæ— å¥ˆè¿˜æ˜¯åŒæ„äº†ã€‚å¹´åº•çš„æ—¶å€™ç”±äºé©»åœºçš„ç”²æ–¹å…¬å¸ä¸šåŠ¡è°ƒæ•´ï¼Œæ‰€æœ‰å¤–åŒ…å‘˜å·¥éƒ½éœ€è¦ç¦»åœºã€‚å…¶å®åœ¨9æœˆä»½çš„æ—¶å€™ï¼Œå¤–åŒ…å…¬å¸è¿«äºå›½å®¶çš„å‹åŠ›ï¼Œè¿˜æ˜¯ä¸æˆ‘ä»¬ç­¾è®¢äº†æ­£å¼åŠ³åŠ¨åˆåŒï¼Œä½†åŒæ—¶ä¹Ÿè®©æˆ‘ä»¬ç­¾ç½²æ”¾å¼ƒè¿½ç¼´èµ”å¿çš„åè®®ã€‚è™½ç„¶æˆ‘ä¹Ÿäº†è§£åˆ°è¿™ç§è¿æ³•åŠ³åŠ¨æ³•çš„åè®®éƒ½æ˜¯ä¸åˆæ³•çš„ï¼Œä½†ä¹Ÿä¸å¤ªæƒ³é—¹å¾—å»ä»²è£ï¼Œå°±è®©ä»–ä»¬é…åˆæˆ‘èƒ½é¢†å–å¤±ä¸šé‡‘å°±è¡Œã€‚</p>
<p><strong>é¢è¯•æ‰¾å·¥ä½œ</strong></p>
<p>å…¶å®å†æ¬¡å¤±ä¸šåï¼Œæˆ‘å¿ƒé‡Œä¹Ÿæ²¡æœ‰å¤ªè¿‡ç„¦è™‘ï¼Œä¹Ÿæ­£å¥½å¯ä»¥ä¾¿æ‰¾è¾¹ä¼‘æ¯ä¸€ä¸‹ã€‚æœ‰äº†ä¸Šä¸€æ¬¡çš„å¤±ä¸šç»å†ï¼Œæˆ‘çŸ¥é“è¿™æ¬¡æ‰¾å·¥ä½œä¹Ÿè¿˜æ˜¯ä¼šå¾ˆéš¾ï¼Œæ¯•ç«Ÿæˆ‘çš„å­¦å†ä¸è¡Œï¼Œè¿˜æ˜¯éç§‘ç­ï¼ŒæŠ€æœ¯èƒ½åŠ›ä¹Ÿä¸€èˆ¬ã€‚å…¶å®æ²¡ç¦»åœºä¹‹å‰ï¼Œæˆ‘å¿ƒé‡Œæ‰“å®šä¸å†è¿›å¤–åŒ…äº†ï¼Œä½†å®é™…æŠ•ç®€å†çš„æ—¶å€™å‘ç°ä¸è€ƒè™‘å¤–åŒ…çš„è¯ï¼Œé¢è¯•æœºä¼šå°±æ›´å°‘äº†ã€‚ç›®å‰é¢äº†å¤§æ¦‚æœ‰5å®¶å…¬å¸ï¼Œå…¶ä¸­ä¸¤å®¶å¤–åŒ…ï¼Œæœ‰ä¸€å®¶å¤–åŒ…éƒ½å‘offeräº†ï¼Œæœ€åè¯´ç”²æ–¹è€ƒè™‘åˆ°æˆ‘æ˜¯éç»Ÿæ‹›å­¦å†ï¼Œå–æ¶ˆäº†offerã€‚</p>
<p>è¿™å‡ å¹´äº’è”ç½‘è¡Œä¸šä¸‹è¡Œï¼Œè£å‘˜å¤±ä¸šçš„æ¯”è¾ƒå¤šï¼Œå¯¼è‡´äº†å¸‚åœºä¾›éœ€ä¸å¹³è¡¡ã€‚ä½†æ¯•ç«Ÿæ˜¯æˆ‘å·¥ä½œäº†è¿‘8å¹´çš„è¡Œä¸šï¼Œè€Œä¸”ç›®å‰æˆ‘çš„å‰¯ä¸šä¹Ÿè¿˜æ²¡æœ‰å‘å±•èµ·æ¥ã€‚æ‰€ä»¥æˆ‘æœªæ¥å‡ å¹´ä¹Ÿè¿˜æ˜¯ä¼šç»§ç»­æ·±è€•è¿™ä¸€è¡Œï¼Œç›´åˆ°é‚£å¤©å½»åº•æ‰¾ä¸åˆ°å·¥ä½œï¼Œæˆ–èƒ½æœ‰å…¶å®ƒæ”¶å…¥å§ã€‚</p>
<p>æœ€åè¿˜æ˜¯æ€»ç»“ä¸€ä¸‹å§ã€‚</p>
<p>25å¹´å¯¹æˆ‘æ¥è¯´è¿˜æ˜¯å¹³æ·¡çš„ä¸€å¹´ï¼Œå·¥ä½œå’Œç”Ÿæ´»éƒ½æ²¡æœ‰ä»€ä¹ˆå¤§çš„å˜åŒ–ã€‚ä¸è¿‡å¿ƒæ€ä¸Šæ¥è¯´ï¼Œè‡ªå·±è¿˜æ˜¯æ¯”è¾ƒå¹³å’ŒçŸ¥è¶³çš„ï¼Œä¸ç”¨ç‰¹åˆ«ä¸ºç”Ÿè®¡å‘æ„ï¼›è€Œä¸”å›½å®¶ä¹Ÿåœ¨æ—¥ç›Šå¼ºç››ï¼ˆè™½ç„¶æœ‰äº§ä¸šè½¬å‹çš„é˜µç—›ï¼Œå¦‚å¤±ä¸šï¼‰ã€‚æ‰€ä»¥å¯¹æœªæ¥ï¼Œæˆ‘è¿˜æ˜¯æœ‰å¾ˆå¤šæœŸå¾…...</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OoderAI A2Aå‚è€ƒåè®®(MITå¼€æºåè®®) -Agent åè®®åˆ†å†ŒV0.6ï¼ˆå®Œæ•´ç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7596221097865232390</link>    <guid>https://juejin.cn/post/7596221097865232390</guid>    <pubDate>2026-01-18T11:08:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596221097865232390" data-draft-id="7596221097865216006" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OoderAI A2Aå‚è€ƒåè®®(MITå¼€æºåè®®) -Agent åè®®åˆ†å†ŒV0.6ï¼ˆå®Œæ•´ç‰ˆï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-18T11:08:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OoderAI A2Aå‚è€ƒåè®®(MITå¼€æºåè®®) -Agent åè®®åˆ†å†ŒV0.6ï¼ˆå®Œæ•´ç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T11:08:56.000Z" title="Sun Jan 18 2026 11:08:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Agent åè®®åˆ†å†Œ</h2>
<h3 data-id="heading-1">1. æ¦‚è¿°</h3>
<p>Agent æ˜¯ Ooder æ™ºèƒ½ä½“ç³»ç»Ÿä¸­çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£æ‰§è¡Œä»»åŠ¡ã€ç®¡ç†èµ„æºå’Œä¸å…¶ä»–ç»„ä»¶é€šä¿¡ã€‚æœ¬åˆ†å†Œå®šä¹‰äº†ä¸‰ç§ä¸»è¦ Agent çš„åè®®è§„èŒƒï¼šMCP Agentã€Route Agent å’Œ End Agentã€‚</p>
<h4 data-id="heading-2">1.1 Agent åˆ†ç±»</h4>

























<table><thead><tr><th>Agent ç±»å‹</th><th>ä¸»è¦èŒè´£</th><th>éƒ¨ç½²ä½ç½®</th></tr></thead><tbody><tr><td>MCP Agent</td><td>èµ„æºç®¡ç†å’Œè°ƒåº¦</td><td>ä¸­å¤®æœåŠ¡å™¨</td></tr><tr><td>Route Agent</td><td>æ¶ˆæ¯è·¯ç”±å’Œè½¬å‘</td><td>è¾¹ç¼˜èŠ‚ç‚¹</td></tr><tr><td>End Agent</td><td>è®¾å¤‡äº¤äº’å’Œæ•°æ®é‡‡é›†</td><td>ç»ˆç«¯è®¾å¤‡</td></tr></tbody></table>
<h4 data-id="heading-3">1.2 è®¾è®¡åŸåˆ™</h4>
<ul>
<li><strong>èŒè´£åˆ†ç¦»</strong>ï¼šæ¯ç§ Agent ä¸“æ³¨äºç‰¹å®šèŒè´£</li>
<li><strong>å±‚æ¬¡åŒ–æ¶æ„</strong>ï¼šå½¢æˆä»ä¸­å¿ƒåˆ°è¾¹ç¼˜çš„å±‚æ¬¡ç»“æ„</li>
<li><strong>é€šä¿¡æ ‡å‡†åŒ–</strong>ï¼šä½¿ç”¨ç»Ÿä¸€çš„ AI Bridge åè®®</li>
<li><strong>é«˜å¯ç”¨æ€§</strong>ï¼šæ”¯æŒæ•…éšœè½¬ç§»å’Œè´Ÿè½½å‡è¡¡</li>
</ul>
<h3 data-id="heading-4">2. MCP Agent è§„èŒƒ</h3>
<h4 data-id="heading-5">2.1 åŠŸèƒ½å®šä½</h4>
<p>MCP (Master Control Plane) Agent æ˜¯ç³»ç»Ÿçš„ä¸»æ§ç»„ä»¶ï¼Œè´Ÿè´£å…¨å±€èµ„æºç®¡ç†å’Œä»»åŠ¡è°ƒåº¦ã€‚</p>
<h4 data-id="heading-6">2.2 æ ¸å¿ƒåŠŸèƒ½</h4>



































<table><thead><tr><th>åŠŸèƒ½</th><th>æè¿°</th><th>ä¼˜å…ˆçº§</th></tr></thead><tbody><tr><td>èµ„æºç®¡ç†</td><td>ç®¡ç†å…¨å±€èµ„æºï¼ŒåŒ…æ‹¬ Spaceã€Zone å’Œè®¾å¤‡</td><td>é«˜</td></tr><tr><td>ä»»åŠ¡è°ƒåº¦</td><td>åˆ†é…å’Œè°ƒåº¦ä»»åŠ¡åˆ°åˆé€‚çš„ Agent</td><td>é«˜</td></tr><tr><td>çŠ¶æ€ç›‘æ§</td><td>ç›‘æ§æ‰€æœ‰ Agent çš„è¿è¡ŒçŠ¶æ€</td><td>é«˜</td></tr><tr><td>é…ç½®ç®¡ç†</td><td>ç®¡ç†å…¨å±€é…ç½®å’Œç­–ç•¥</td><td>ä¸­</td></tr><tr><td>å®‰å…¨æ§åˆ¶</td><td>æ‰§è¡Œå…¨å±€å®‰å…¨ç­–ç•¥</td><td>é«˜</td></tr></tbody></table>
<h4 data-id="heading-7">2.3 æ¥å£åè®®</h4>
<h5 data-id="heading-8">2.3.1 èµ„æºç®¡ç†æ¥å£</h5>

























<table><thead><tr><th>æ¥å£åç§°</th><th>èµ„æºåˆ›å»º</th></tr></thead><tbody><tr><td>URL</td><td><code>/api/v1/resources</code></td></tr><tr><td>æ–¹æ³•</td><td>POST</td></tr><tr><td>è®¤è¯</td><td>æ˜¯</td></tr><tr><td>æƒé™</td><td>ç®¡ç†å‘˜æƒé™</td></tr></tbody></table>
<p><strong>è¯·æ±‚å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"resource_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"space|zone|device"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"key1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"key2"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value2"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"parent_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"key1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value1"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-9">2.3.2 ä»»åŠ¡è°ƒåº¦æ¥å£</h5>

























<table><thead><tr><th>æ¥å£åç§°</th><th>ä»»åŠ¡åˆ›å»º</th></tr></thead><tbody><tr><td>URL</td><td><code>/api/v1/tasks</code></td></tr><tr><td>æ–¹æ³•</td><td>POST</td></tr><tr><td>è®¤è¯</td><td>æ˜¯</td></tr><tr><td>æƒé™</td><td>æ‰§è¡Œæƒé™</td></tr></tbody></table>
<p><strong>è¯·æ±‚å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"task_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"task_type"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"param1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"param2"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value2"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"priority"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high|medium|low"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"agent_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"end_agent"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"filters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"zone_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"zone-123"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"callback_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timeout"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"number"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-10">2.4 æ•°æ®æ¨¡å‹</h4>
<h5 data-id="heading-11">2.4.1 èµ„æºæ•°æ®æ¨¡å‹</h5>

































































<table><thead><tr><th>å±æ€§åç§°</th><th>æ•°æ®ç±»å‹</th><th>çº¦æŸ</th><th>æè¿°</th></tr></thead><tbody><tr><td>resource_id</td><td>String(36)</td><td>PRIMARY KEY</td><td>èµ„æºå”¯ä¸€æ ‡è¯†ç¬¦</td></tr><tr><td>type</td><td>String(64)</td><td>NOT NULL</td><td>èµ„æºç±»å‹</td></tr><tr><td>name</td><td>String(255)</td><td>NOT NULL</td><td>èµ„æºåç§°</td></tr><tr><td>description</td><td>String(1024)</td><td/><td>èµ„æºæè¿°</td></tr><tr><td>properties</td><td>JSON</td><td/><td>èµ„æºå±æ€§</td></tr><tr><td>parent_id</td><td>String(36)</td><td/><td>çˆ¶èµ„æº ID</td></tr><tr><td>status</td><td>String(32)</td><td>NOT NULL</td><td>èµ„æºçŠ¶æ€</td></tr><tr><td>created_at</td><td>Timestamp</td><td>NOT NULL</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>updated_at</td><td>Timestamp</td><td>NOT NULL</td><td>æ›´æ–°æ—¶é—´</td></tr></tbody></table>
<h5 data-id="heading-12">2.4.2 ä»»åŠ¡æ•°æ®æ¨¡å‹</h5>

























































































<table><thead><tr><th>å±æ€§åç§°</th><th>æ•°æ®ç±»å‹</th><th>çº¦æŸ</th><th>æè¿°</th></tr></thead><tbody><tr><td>task_id</td><td>String(36)</td><td>PRIMARY KEY</td><td>ä»»åŠ¡å”¯ä¸€æ ‡è¯†ç¬¦</td></tr><tr><td>name</td><td>String(255)</td><td>NOT NULL</td><td>ä»»åŠ¡åç§°</td></tr><tr><td>description</td><td>String(1024)</td><td/><td>ä»»åŠ¡æè¿°</td></tr><tr><td>type</td><td>String(64)</td><td>NOT NULL</td><td>ä»»åŠ¡ç±»å‹</td></tr><tr><td>parameters</td><td>JSON</td><td/><td>ä»»åŠ¡å‚æ•°</td></tr><tr><td>priority</td><td>String(32)</td><td>NOT NULL</td><td>ä»»åŠ¡ä¼˜å…ˆçº§</td></tr><tr><td>status</td><td>String(32)</td><td>NOT NULL</td><td>ä»»åŠ¡çŠ¶æ€</td></tr><tr><td>target</td><td>JSON</td><td>NOT NULL</td><td>ç›®æ ‡ Agent</td></tr><tr><td>callback_url</td><td>String(512)</td><td/><td>å›è°ƒ URL</td></tr><tr><td>timeout</td><td>Integer</td><td/><td>è¶…æ—¶æ—¶é—´</td></tr><tr><td>created_at</td><td>Timestamp</td><td>NOT NULL</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>updated_at</td><td>Timestamp</td><td>NOT NULL</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>completed_at</td><td>Timestamp</td><td/><td>å®Œæˆæ—¶é—´</td></tr></tbody></table>
<h3 data-id="heading-13">3. Route Agent è§„èŒƒ</h3>
<h4 data-id="heading-14">3.1 åŠŸèƒ½å®šä½</h4>
<p>Route Agent è´Ÿè´£æ¶ˆæ¯çš„è·¯ç”±å’Œè½¬å‘ï¼Œæ˜¯è¿æ¥ä¸­å¿ƒå’Œè¾¹ç¼˜çš„æ¡¥æ¢ã€‚</p>
<h4 data-id="heading-15">3.2 æ ¸å¿ƒåŠŸèƒ½</h4>



































<table><thead><tr><th>åŠŸèƒ½</th><th>æè¿°</th><th>ä¼˜å…ˆçº§</th></tr></thead><tbody><tr><td>æ¶ˆæ¯è·¯ç”±</td><td>æ ¹æ®è·¯ç”±è§„åˆ™è½¬å‘æ¶ˆæ¯</td><td>é«˜</td></tr><tr><td>è´Ÿè½½å‡è¡¡</td><td>åœ¨å¤šä¸ªç›®æ ‡é—´åˆ†é…è´Ÿè½½</td><td>é«˜</td></tr><tr><td>æ•…éšœè½¬ç§»</td><td>è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨ç›®æ ‡</td><td>é«˜</td></tr><tr><td>æœ¬åœ°ç¼“å­˜</td><td>ç¼“å­˜å¸¸ç”¨æ•°æ®å’Œæ¶ˆæ¯</td><td>ä¸­</td></tr><tr><td>æµé‡æ§åˆ¶</td><td>æ§åˆ¶æ¶ˆæ¯æµé‡ï¼Œé˜²æ­¢è¿‡è½½</td><td>ä¸­</td></tr></tbody></table>
<h4 data-id="heading-16">3.3 æ¥å£åè®®</h4>
<h5 data-id="heading-17">3.3.1 è·¯ç”±è§„åˆ™ç®¡ç†æ¥å£</h5>

























<table><thead><tr><th>æ¥å£åç§°</th><th>è·¯ç”±è§„åˆ™åˆ›å»º</th></tr></thead><tbody><tr><td>URL</td><td><code>/api/v1/routes</code></td></tr><tr><td>æ–¹æ³•</td><td>POST</td></tr><tr><td>è®¤è¯</td><td>æ˜¯</td></tr><tr><td>æƒé™</td><td>ç®¡ç†å‘˜æƒé™</td></tr></tbody></table>
<p><strong>è¯·æ±‚å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"route_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"agent_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"end_agent"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"filters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"zone_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"zone-123"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"destination"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"agent_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mcp_agent"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"endpoints"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"weight"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"number"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"priority"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"number"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"boolean"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-18">3.3.2 æ¶ˆæ¯è½¬å‘æ¥å£</h5>

























<table><thead><tr><th>æ¥å£åç§°</th><th>æ¶ˆæ¯è½¬å‘</th></tr></thead><tbody><tr><td>URL</td><td><code>/api/v1/messages/forward</code></td></tr><tr><td>æ–¹æ³•</td><td>POST</td></tr><tr><td>è®¤è¯</td><td>æ˜¯</td></tr><tr><td>æƒé™</td><td>æ‰§è¡Œæƒé™</td></tr></tbody></table>
<p><strong>è¯·æ±‚å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"message_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"source_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"destination_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"payload"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"key1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"key2"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value2"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"priority"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"timeout"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"number"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-19">3.4 æ•°æ®æ¨¡å‹</h4>
<h5 data-id="heading-20">3.4.1 è·¯ç”±è§„åˆ™æ•°æ®æ¨¡å‹</h5>

































































<table><thead><tr><th>å±æ€§åç§°</th><th>æ•°æ®ç±»å‹</th><th>çº¦æŸ</th><th>æè¿°</th></tr></thead><tbody><tr><td>route_id</td><td>String(36)</td><td>PRIMARY KEY</td><td>è·¯ç”±è§„åˆ™å”¯ä¸€æ ‡è¯†ç¬¦</td></tr><tr><td>name</td><td>String(255)</td><td>NOT NULL</td><td>è·¯ç”±è§„åˆ™åç§°</td></tr><tr><td>description</td><td>String(1024)</td><td/><td>è·¯ç”±è§„åˆ™æè¿°</td></tr><tr><td>source</td><td>JSON</td><td>NOT NULL</td><td>æ¶ˆæ¯æº</td></tr><tr><td>destination</td><td>JSON</td><td>NOT NULL</td><td>æ¶ˆæ¯ç›®æ ‡</td></tr><tr><td>priority</td><td>Integer</td><td>NOT NULL</td><td>è·¯ç”±ä¼˜å…ˆçº§</td></tr><tr><td>enabled</td><td>Boolean</td><td>NOT NULL</td><td>æ˜¯å¦å¯ç”¨</td></tr><tr><td>created_at</td><td>Timestamp</td><td>NOT NULL</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>updated_at</td><td>Timestamp</td><td>NOT NULL</td><td>æ›´æ–°æ—¶é—´</td></tr></tbody></table>
<h5 data-id="heading-21">3.4.2 æ¶ˆæ¯é˜Ÿåˆ—æ•°æ®æ¨¡å‹</h5>







































































<table><thead><tr><th>å±æ€§åç§°</th><th>æ•°æ®ç±»å‹</th><th>çº¦æŸ</th><th>æè¿°</th></tr></thead><tbody><tr><td>message_id</td><td>String(36)</td><td>PRIMARY KEY</td><td>æ¶ˆæ¯å”¯ä¸€æ ‡è¯†ç¬¦</td></tr><tr><td>source_id</td><td>String(36)</td><td>NOT NULL</td><td>æ¶ˆæ¯æº ID</td></tr><tr><td>destination_id</td><td>String(36)</td><td>NOT NULL</td><td>æ¶ˆæ¯ç›®æ ‡ ID</td></tr><tr><td>payload</td><td>JSON</td><td>NOT NULL</td><td>æ¶ˆæ¯å†…å®¹</td></tr><tr><td>status</td><td>String(32)</td><td>NOT NULL</td><td>æ¶ˆæ¯çŠ¶æ€</td></tr><tr><td>retry_count</td><td>Integer</td><td>NOT NULL</td><td>é‡è¯•æ¬¡æ•°</td></tr><tr><td>max_retries</td><td>Integer</td><td>NOT NULL</td><td>æœ€å¤§é‡è¯•æ¬¡æ•°</td></tr><tr><td>created_at</td><td>Timestamp</td><td>NOT NULL</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>updated_at</td><td>Timestamp</td><td>NOT NULL</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>processed_at</td><td>Timestamp</td><td/><td>å¤„ç†æ—¶é—´</td></tr></tbody></table>
<h3 data-id="heading-22">4. End Agent è§„èŒƒ</h3>
<h4 data-id="heading-23">4.1 åŠŸèƒ½å®šä½</h4>
<p>End Agent æ˜¯ç›´æ¥ä¸ç»ˆç«¯è®¾å¤‡å’Œå¤–éƒ¨ç³»ç»Ÿäº¤äº’çš„ç»„ä»¶ï¼Œè´Ÿè´£æ•°æ®é‡‡é›†å’Œå‘½ä»¤æ‰§è¡Œã€‚</p>
<h4 data-id="heading-24">4.2 æ ¸å¿ƒåŠŸèƒ½</h4>



































<table><thead><tr><th>åŠŸèƒ½</th><th>æè¿°</th><th>ä¼˜å…ˆçº§</th></tr></thead><tbody><tr><td>æ•°æ®é‡‡é›†</td><td>é‡‡é›†è®¾å¤‡å’Œä¼ æ„Ÿå™¨æ•°æ®</td><td>é«˜</td></tr><tr><td>å‘½ä»¤æ‰§è¡Œ</td><td>æ‰§è¡Œè®¾å¤‡æ§åˆ¶å‘½ä»¤</td><td>é«˜</td></tr><tr><td>æœ¬åœ°å¤„ç†</td><td>åœ¨è¾¹ç¼˜è¿›è¡Œæ•°æ®å¤„ç†</td><td>ä¸­</td></tr><tr><td>çŠ¶æ€ä¸ŠæŠ¥</td><td>ä¸ŠæŠ¥è®¾å¤‡å’Œè‡ªèº«çŠ¶æ€</td><td>é«˜</td></tr><tr><td>ç¦»çº¿æ“ä½œ</td><td>æ”¯æŒç¦»çº¿æ¨¡å¼å’Œæ–­ç‚¹ç»­ä¼ </td><td>ä¸­</td></tr></tbody></table>
<h4 data-id="heading-25">4.3 æ¥å£åè®®</h4>
<h5 data-id="heading-26">4.3.1 æ•°æ®é‡‡é›†æ¥å£</h5>

























<table><thead><tr><th>æ¥å£åç§°</th><th>æ•°æ®ä¸ŠæŠ¥</th></tr></thead><tbody><tr><td>URL</td><td><code>/api/v1/data/report</code></td></tr><tr><td>æ–¹æ³•</td><td>POST</td></tr><tr><td>è®¤è¯</td><td>æ˜¯</td></tr><tr><td>æƒé™</td><td>æ‰§è¡Œæƒé™</td></tr></tbody></table>
<p><strong>è¯·æ±‚å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"data_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"device_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sensor_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"timestamp"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"number|string|boolean|object"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"unit"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"quality"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"good|bad|unknown"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"key1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value1"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-27">4.3.2 å‘½ä»¤æ‰§è¡Œæ¥å£</h5>

























<table><thead><tr><th>æ¥å£åç§°</th><th>å‘½ä»¤æ‰§è¡Œ</th></tr></thead><tbody><tr><td>URL</td><td><code>/api/v1/commands/execute</code></td></tr><tr><td>æ–¹æ³•</td><td>POST</td></tr><tr><td>è®¤è¯</td><td>æ˜¯</td></tr><tr><td>æƒé™</td><td>æ‰§è¡Œæƒé™</td></tr></tbody></table>
<p><strong>è¯·æ±‚å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"command_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"device_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"param1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"param2"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value2"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timeout"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"number"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"callback_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-28">4.4 æ•°æ®æ¨¡å‹</h4>
<h5 data-id="heading-29">4.4.1 è®¾å¤‡æ•°æ®æ¨¡å‹</h5>







































































<table><thead><tr><th>å±æ€§åç§°</th><th>æ•°æ®ç±»å‹</th><th>çº¦æŸ</th><th>æè¿°</th></tr></thead><tbody><tr><td>device_id</td><td>String(36)</td><td>PRIMARY KEY</td><td>è®¾å¤‡å”¯ä¸€æ ‡è¯†ç¬¦</td></tr><tr><td>name</td><td>String(255)</td><td>NOT NULL</td><td>è®¾å¤‡åç§°</td></tr><tr><td>description</td><td>String(1024)</td><td/><td>è®¾å¤‡æè¿°</td></tr><tr><td>type</td><td>String(64)</td><td>NOT NULL</td><td>è®¾å¤‡ç±»å‹</td></tr><tr><td>status</td><td>String(32)</td><td>NOT NULL</td><td>è®¾å¤‡çŠ¶æ€</td></tr><tr><td>properties</td><td>JSON</td><td/><td>è®¾å¤‡å±æ€§</td></tr><tr><td>zone_id</td><td>String(36)</td><td>NOT NULL</td><td>æ‰€å±åŒºåŸŸ ID</td></tr><tr><td>last_seen</td><td>Timestamp</td><td/><td>æœ€ååœ¨çº¿æ—¶é—´</td></tr><tr><td>created_at</td><td>Timestamp</td><td>NOT NULL</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>updated_at</td><td>Timestamp</td><td>NOT NULL</td><td>æ›´æ–°æ—¶é—´</td></tr></tbody></table>
<h5 data-id="heading-30">4.4.2 ä¼ æ„Ÿå™¨æ•°æ®æ¨¡å‹</h5>













































































<table><thead><tr><th>å±æ€§åç§°</th><th>æ•°æ®ç±»å‹</th><th>çº¦æŸ</th><th>æè¿°</th></tr></thead><tbody><tr><td>sensor_id</td><td>String(36)</td><td>PRIMARY KEY</td><td>ä¼ æ„Ÿå™¨å”¯ä¸€æ ‡è¯†ç¬¦</td></tr><tr><td>device_id</td><td>String(36)</td><td>NOT NULL</td><td>æ‰€å±è®¾å¤‡ ID</td></tr><tr><td>name</td><td>String(255)</td><td>NOT NULL</td><td>ä¼ æ„Ÿå™¨åç§°</td></tr><tr><td>type</td><td>String(64)</td><td>NOT NULL</td><td>ä¼ æ„Ÿå™¨ç±»å‹</td></tr><tr><td>unit</td><td>String(32)</td><td/><td>æ•°æ®å•ä½</td></tr><tr><td>range_min</td><td>Number</td><td/><td>æµ‹é‡èŒƒå›´æœ€å°å€¼</td></tr><tr><td>range_max</td><td>Number</td><td/><td>æµ‹é‡èŒƒå›´æœ€å¤§å€¼</td></tr><tr><td>precision</td><td>Number</td><td/><td>æµ‹é‡ç²¾åº¦</td></tr><tr><td>status</td><td>String(32)</td><td>NOT NULL</td><td>ä¼ æ„Ÿå™¨çŠ¶æ€</td></tr><tr><td>created_at</td><td>Timestamp</td><td>NOT NULL</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>updated_at</td><td>Timestamp</td><td>NOT NULL</td><td>æ›´æ–°æ—¶é—´</td></tr></tbody></table>
<h3 data-id="heading-31">5. Agent é€šä¿¡æœºåˆ¶</h3>
<h4 data-id="heading-32">5.1 é€šä¿¡æ¨¡å¼</h4>






























<table><thead><tr><th>æ¨¡å¼</th><th>æè¿°</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>è¯·æ±‚-å“åº”</td><td>å‘é€è¯·æ±‚å¹¶ç­‰å¾…å“åº”</td><td>å‘½ä»¤æ‰§è¡Œã€çŠ¶æ€æŸ¥è¯¢</td></tr><tr><td>å‘å¸ƒ-è®¢é˜…</td><td>å‘å¸ƒæ¶ˆæ¯åˆ°ä¸»é¢˜ï¼Œè®¢é˜…è€…æ¥æ”¶</td><td>äº‹ä»¶é€šçŸ¥ã€æ•°æ®å¹¿æ’­</td></tr><tr><td>æ¨é€-æ‹‰å–</td><td>ä¸»åŠ¨æ¨é€æˆ–å®šæœŸæ‹‰å–æ•°æ®</td><td>æ•°æ®åŒæ­¥ã€çŠ¶æ€æ›´æ–°</td></tr><tr><td>åŒå‘æµ</td><td>å»ºç«‹æŒä¹…è¿æ¥ï¼ŒåŒå‘é€šä¿¡</td><td>å®æ—¶ç›‘æ§ã€è¿œç¨‹æ§åˆ¶</td></tr></tbody></table>
<h4 data-id="heading-33">5.2 é€šä¿¡åè®®æ ˆ</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åº”ç”¨å±‚ (ä¸šåŠ¡é€»è¾‘)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ AI Bridge åè®®å±‚    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¼ è¾“å±‚ (HTTP/WS/MQTT) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å®‰å…¨å±‚ (TLS/SSL)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-34">6. é”™è¯¯å¤„ç†</h3>
<h4 data-id="heading-35">6.1 Agent é€šç”¨é”™è¯¯ç </h4>








































<table><thead><tr><th>é”™è¯¯ç </th><th>æè¿°</th><th>HTTPçŠ¶æ€ç </th></tr></thead><tbody><tr><td>3001</td><td>Agent ä¸å­˜åœ¨</td><td>404</td></tr><tr><td>3002</td><td>Agent ä¸å¯ç”¨</td><td>503</td></tr><tr><td>3003</td><td>æƒé™ä¸è¶³</td><td>403</td></tr><tr><td>3004</td><td>å‚æ•°é”™è¯¯</td><td>400</td></tr><tr><td>3005</td><td>æ‰§è¡Œè¶…æ—¶</td><td>504</td></tr><tr><td>3006</td><td>èµ„æºå†²çª</td><td>409</td></tr></tbody></table>
<h4 data-id="heading-36">6.2 é”™è¯¯å“åº”æ ¼å¼</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3001"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Agent not found"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"details"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"agent_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"agent-123"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"agent_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"end_agent"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2026-01-18T00:00:00Z"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-37">7. éƒ¨ç½²ä¸è¿è¡Œ</h3>
<h4 data-id="heading-38">7.1 éƒ¨ç½²æ¶æ„</h4>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Agent     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Route Agent 1 â”‚ â”‚  Route Agent 2 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  End Agent     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<h4 data-id="heading-39">7.2 è¿è¡Œç¯å¢ƒè¦æ±‚</h4>

































<table><thead><tr><th>Agent ç±»å‹</th><th>CPU</th><th>å†…å­˜</th><th>å­˜å‚¨</th><th>ç½‘ç»œ</th></tr></thead><tbody><tr><td>MCP Agent</td><td>4æ ¸+</td><td>8GB+</td><td>100GB+</td><td>åƒå…†ç½‘å¡</td></tr><tr><td>Route Agent</td><td>2æ ¸+</td><td>4GB+</td><td>50GB+</td><td>åƒå…†ç½‘å¡</td></tr><tr><td>End Agent</td><td>1æ ¸+</td><td>1GB+</td><td>10GB+</td><td>ç™¾å…†ç½‘å¡</td></tr></tbody></table>
<h3 data-id="heading-40">8. ç›‘æ§ä¸ç»´æŠ¤</h3>
<h4 data-id="heading-41">8.1 ç›‘æ§æŒ‡æ ‡</h4>





















<table><thead><tr><th>Agent ç±»å‹</th><th>å…³é”®æŒ‡æ ‡</th></tr></thead><tbody><tr><td>MCP Agent</td><td>CPU ä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€ä»»åŠ¡å¤„ç†é€Ÿç‡ã€èµ„æºåˆ©ç”¨ç‡</td></tr><tr><td>Route Agent</td><td>CPU ä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€æ¶ˆæ¯è½¬å‘é€Ÿç‡ã€è·¯ç”±å‘½ä¸­ç‡</td></tr><tr><td>End Agent</td><td>CPU ä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€æ•°æ®é‡‡é›†é€Ÿç‡ã€å‘½ä»¤æ‰§è¡ŒæˆåŠŸç‡</td></tr></tbody></table>
<h4 data-id="heading-42">8.2 æ—¥å¿—ç®¡ç†</h4>





















<table><thead><tr><th>Agent ç±»å‹</th><th>æ—¥å¿—ç±»å‹</th></tr></thead><tbody><tr><td>MCP Agent</td><td>èµ„æºæ—¥å¿—ã€ä»»åŠ¡æ—¥å¿—ã€å®‰å…¨æ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—</td></tr><tr><td>Route Agent</td><td>è·¯ç”±æ—¥å¿—ã€æ¶ˆæ¯æ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—</td></tr><tr><td>End Agent</td><td>è®¾å¤‡æ—¥å¿—ã€æ•°æ®æ—¥å¿—ã€å‘½ä»¤æ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—</td></tr></tbody></table>
<hr/>
<p><strong>Ooder Technology Co., Ltd.</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OoderAI A2Aå‚è€ƒåè®®(MITå¼€æºåè®®) -AI Bridge åè®®åˆ†å†ŒV0.6ï¼ˆå®Œæ•´ç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7596171325532487721</link>    <guid>https://juejin.cn/post/7596171325532487721</guid>    <pubDate>2026-01-18T11:10:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596171325532487721" data-draft-id="7596276978808602667" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OoderAI A2Aå‚è€ƒåè®®(MITå¼€æºåè®®) -AI Bridge åè®®åˆ†å†ŒV0.6ï¼ˆå®Œæ•´ç‰ˆï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-18T11:10:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OoderAI A2Aå‚è€ƒåè®®(MITå¼€æºåè®®) -AI Bridge åè®®åˆ†å†ŒV0.6ï¼ˆå®Œæ•´ç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T11:10:23.000Z" title="Sun Jan 18 2026 11:10:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AI Bridge åè®®åˆ†å†Œ</h2>
<h3 data-id="heading-1">1. åè®®æ¦‚è¿°</h3>
<p>AI Bridge åè®®æ˜¯ Ooder æ™ºèƒ½ä½“ç³»ç»Ÿä¸­ç”¨äºæ™ºèƒ½ä½“ã€SKILL å’Œèµ„æºç³»ç»Ÿä¹‹é—´é€šä¿¡çš„æ ¸å¿ƒåè®®ã€‚å®ƒå®šä¹‰äº†ç»Ÿä¸€çš„æ¶ˆæ¯æ ¼å¼ã€å‘½ä»¤ç³»ç»Ÿå’Œå®‰å…¨æœºåˆ¶ï¼Œå®ç°äº†ä¸åŒç»„ä»¶ä¹‹é—´çš„æ— ç¼äº¤äº’ã€‚</p>
<h4 data-id="heading-2">1.1 è®¾è®¡åŸåˆ™</h4>
<ul>
<li><strong>æ ‡å‡†åŒ–</strong>ï¼šå®šä¹‰ç»Ÿä¸€çš„é€šä¿¡æ¥å£å’Œæ•°æ®æ ¼å¼</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šæä¾›å®Œå–„çš„è®¤è¯ã€æˆæƒå’ŒåŠ å¯†æœºåˆ¶</li>
<li><strong>é«˜æ•ˆæ€§</strong>ï¼šä¼˜åŒ–é€šä¿¡åè®®ï¼Œå‡å°‘å»¶è¿Ÿå’Œå¸¦å®½æ¶ˆè€—</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰å‘½ä»¤å’Œå‚æ•°æ‰©å±•</li>
</ul>
<h3 data-id="heading-3">2. é€šä¿¡åè®®</h3>
<h4 data-id="heading-4">2.1 ä¼ è¾“å±‚</h4>

























<table><thead><tr><th>åè®®</th><th>é€‚ç”¨åœºæ™¯</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>HTTP/HTTPS</td><td>æ ‡å‡† API è°ƒç”¨</td><td>å¹¿æ³›æ”¯æŒã€æ˜“äºè°ƒè¯•</td></tr><tr><td>WebSocket/WSS</td><td>å®æ—¶é€šä¿¡</td><td>ä½å»¶è¿Ÿã€å…¨åŒå·¥</td></tr><tr><td>MQTT</td><td>IoT è®¾å¤‡é€šä¿¡</td><td>è½»é‡çº§ã€ä½åŠŸè€—</td></tr></tbody></table>
<h4 data-id="heading-5">2.2 åè®®æ ˆæ¶æ„</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åº”ç”¨å±‚ (ä¸šåŠ¡é€»è¾‘)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ AI Bridge åè®®å±‚    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¼ è¾“å±‚ (HTTP/WS/MQTT) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å®‰å…¨å±‚ (TLS/SSL)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-6">3. æ¶ˆæ¯æ ¼å¼</h3>
<h4 data-id="heading-7">3.1 é€šç”¨æ¶ˆæ¯ç»“æ„</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.52"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uuid-1234-5678-90ab-cdef"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1737000000000</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"request"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"skill.discover"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"param1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"param2"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value2"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sender_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"agent-123"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"trace-456"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"priority"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-8">3.2 è¯·æ±‚æ¶ˆæ¯</h4>





















































<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>æè¿°</th><th>å¿…é¡»</th></tr></thead><tbody><tr><td>version</td><td>String</td><td>åè®®ç‰ˆæœ¬</td><td>æ˜¯</td></tr><tr><td>id</td><td>String</td><td>æ¶ˆæ¯å”¯ä¸€æ ‡è¯†</td><td>æ˜¯</td></tr><tr><td>timestamp</td><td>Long</td><td>æ¶ˆæ¯æ—¶é—´æˆ³</td><td>æ˜¯</td></tr><tr><td>type</td><td>String</td><td>æ¶ˆæ¯ç±»å‹ï¼šrequest</td><td>æ˜¯</td></tr><tr><td>command</td><td>String</td><td>å‘½ä»¤åç§°</td><td>æ˜¯</td></tr><tr><td>params</td><td>Object</td><td>å‘½ä»¤å‚æ•°</td><td>å¦</td></tr><tr><td>metadata</td><td>Object</td><td>å…ƒæ•°æ®</td><td>å¦</td></tr></tbody></table>
<h4 data-id="heading-9">3.3 å“åº”æ¶ˆæ¯</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.52"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uuid-1234-5678-90ab-cdef"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1737000000100</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"response"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"key1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"key2"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value2"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"error"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1001"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å‚æ•°é”™è¯¯"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sender_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"skill-456"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"trace-456"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>



























































<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>æè¿°</th><th>å¿…é¡»</th></tr></thead><tbody><tr><td>version</td><td>String</td><td>åè®®ç‰ˆæœ¬</td><td>æ˜¯</td></tr><tr><td>id</td><td>String</td><td>æ¶ˆæ¯å”¯ä¸€æ ‡è¯†ï¼ˆä¸è¯·æ±‚ä¸€è‡´ï¼‰</td><td>æ˜¯</td></tr><tr><td>timestamp</td><td>Long</td><td>æ¶ˆæ¯æ—¶é—´æˆ³</td><td>æ˜¯</td></tr><tr><td>type</td><td>String</td><td>æ¶ˆæ¯ç±»å‹ï¼šresponse</td><td>æ˜¯</td></tr><tr><td>status</td><td>String</td><td>å¤„ç†çŠ¶æ€ï¼šsuccess/failed</td><td>æ˜¯</td></tr><tr><td>result</td><td>Object</td><td>å¤„ç†ç»“æœ</td><td>å¦</td></tr><tr><td>error</td><td>Object</td><td>é”™è¯¯ä¿¡æ¯</td><td>å¦</td></tr><tr><td>metadata</td><td>Object</td><td>å…ƒæ•°æ®</td><td>å¦</td></tr></tbody></table>
<h3 data-id="heading-10">4. å‘½ä»¤ç³»ç»Ÿ</h3>
<h4 data-id="heading-11">4.1 æ ¸å¿ƒå‘½ä»¤</h4>








































<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½æè¿°</th><th>å‚æ•°</th></tr></thead><tbody><tr><td>skill.discover</td><td>å‘ç°å¯ç”¨ SKILL</td><td>space_id, capability</td></tr><tr><td>skill.invoke</td><td>è°ƒç”¨ SKILL èƒ½åŠ›</td><td>skill_id, capability_id, params</td></tr><tr><td>agent.register</td><td>æ³¨å†Œæ™ºèƒ½ä½“</td><td>agent_id, type, endpoints</td></tr><tr><td>agent.unregister</td><td>æ³¨é”€æ™ºèƒ½ä½“</td><td>agent_id</td></tr><tr><td>resource.list</td><td>åˆ—å‡ºèµ„æº</td><td>space_id, type</td></tr><tr><td>resource.get</td><td>è·å–èµ„æºè¯¦æƒ…</td><td>resource_id</td></tr></tbody></table>
<h5 data-id="heading-12">4.1.1 skill.discover å‘½ä»¤å‚æ•°çº¦æŸ</h5>





























<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>space_id</td><td>String</td><td>1-64</td><td>å¦</td><td>èµ„æºç©ºé—´ID</td><td>"home_space_001"</td></tr><tr><td>capability</td><td>String</td><td>1-128</td><td>å¦</td><td>èƒ½åŠ›åç§°</td><td>"temperature_sensor"</td></tr></tbody></table>
<h5 data-id="heading-13">4.1.2 skill.invoke å‘½ä»¤å‚æ•°çº¦æŸ</h5>





































<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>skill_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>SKILLå”¯ä¸€æ ‡è¯†</td><td>"temperature_converter_001"</td></tr><tr><td>capability_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>èƒ½åŠ›ID</td><td>"celsius_to_fahrenheit"</td></tr><tr><td>params</td><td>Object</td><td>-</td><td>å¦</td><td>è°ƒç”¨å‚æ•°</td><td><code>{"celsius": 25}</code></td></tr></tbody></table>
<h5 data-id="heading-14">4.1.3 agent.register å‘½ä»¤å‚æ•°çº¦æŸ</h5>





































<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>agent_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>æ™ºèƒ½ä½“å”¯ä¸€æ ‡è¯†</td><td>"route_agent_001"</td></tr><tr><td>type</td><td>String</td><td>1-32</td><td>æ˜¯</td><td>æ™ºèƒ½ä½“ç±»å‹</td><td>"route_agent"</td></tr><tr><td>endpoints</td><td>Array[String]</td><td>1-10</td><td>æ˜¯</td><td>æ™ºèƒ½ä½“è®¿é—®ç«¯ç‚¹åˆ—è¡¨</td><td><code>["http://192.168.1.100:9010", "ws://192.168.1.100:9011"]</code></td></tr></tbody></table>
<h5 data-id="heading-15">4.1.4 agent.unregister å‘½ä»¤å‚æ•°çº¦æŸ</h5>





















<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>agent_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>æ™ºèƒ½ä½“å”¯ä¸€æ ‡è¯†</td><td>"route_agent_001"</td></tr></tbody></table>
<h5 data-id="heading-16">4.1.5 resource.list å‘½ä»¤å‚æ•°çº¦æŸ</h5>





























<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>space_id</td><td>String</td><td>1-64</td><td>å¦</td><td>èµ„æºç©ºé—´ID</td><td>"home_space_001"</td></tr><tr><td>type</td><td>String</td><td>1-32</td><td>å¦</td><td>èµ„æºç±»å‹</td><td>"device"</td></tr></tbody></table>
<h5 data-id="heading-17">4.1.6 resource.get å‘½ä»¤å‚æ•°çº¦æŸ</h5>





















<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>resource_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>èµ„æºå”¯ä¸€æ ‡è¯†</td><td>"device_001"</td></tr></tbody></table>
<h4 data-id="heading-18">4.2 åœºæ™¯ç®¡ç†å‘½ä»¤</h4>

























<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½æè¿°</th><th>å‚æ•°</th></tr></thead><tbody><tr><td>scene.declare</td><td>å£°æ˜åœºæ™¯</td><td>scene_type, skill_id, skill_role, is_owner_declaration, cap_id, cert_sn</td></tr><tr><td>scene.declare.cancel</td><td>å–æ¶ˆåœºæ™¯å£°æ˜</td><td>scene_type, skill_id, cap_id</td></tr><tr><td>scene.query</td><td>æŸ¥è¯¢åœºæ™¯ä¿¡æ¯</td><td>scene_type</td></tr></tbody></table>
<h5 data-id="heading-19">4.2.1 scene.declare å‘½ä»¤å‚æ•°çº¦æŸ</h5>





























































<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>scene_type</td><td>String</td><td>1-32</td><td>æ˜¯</td><td>åœºæ™¯ç±»å‹</td><td>"SMART_HOME"</td></tr><tr><td>skill_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>SKILLå”¯ä¸€æ ‡è¯†</td><td>"smart_home_controller_001"</td></tr><tr><td>skill_role</td><td>String</td><td>1-32</td><td>æ˜¯</td><td>SKILLè§’è‰²</td><td>"agent_route"</td></tr><tr><td>is_owner_declaration</td><td>Boolean</td><td>-</td><td>æ˜¯</td><td>æ˜¯å¦ä¸ºæ‰€æœ‰è€…å£°æ˜</td><td>false</td></tr><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"smart_home_channel_001"</td></tr><tr><td>cert_sn</td><td>String</td><td>16</td><td>æ˜¯</td><td>è¯ä¹¦åºåˆ—å·ï¼ˆä»…å½“å£°æ˜ä¸ºRouteAgentæ—¶å¿…å¡«ï¼‰</td><td>"8a1b2c3d4e5f6a7b"</td></tr></tbody></table>
<h5 data-id="heading-20">4.2.2 scene.declare.cancel å‘½ä»¤å‚æ•°çº¦æŸ</h5>





































<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>scene_type</td><td>String</td><td>1-32</td><td>æ˜¯</td><td>åœºæ™¯ç±»å‹</td><td>"SMART_HOME"</td></tr><tr><td>skill_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>SKILLå”¯ä¸€æ ‡è¯†</td><td>"smart_home_controller_001"</td></tr><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"smart_home_channel_001"</td></tr></tbody></table>
<h5 data-id="heading-21">4.2.3 scene.query å‘½ä»¤å‚æ•°çº¦æŸ</h5>





















<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>scene_type</td><td>String</td><td>1-32</td><td>å¦</td><td>åœºæ™¯ç±»å‹</td><td>"SMART_HOME"</td></tr></tbody></table>
<h4 data-id="heading-22">4.3 Capç®¡ç†å‘½ä»¤</h4>






























<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½æè¿°</th><th>å‚æ•°</th></tr></thead><tbody><tr><td>cap.declare</td><td>å£°æ˜Cap</td><td>cap_id, cap_name, cap_desc, skill_id, cap_type, supported_scenes, max_members, data_storage_type, link_type, disk_path, group_file_path, links_file_path, sync_enabled, sync_interval</td></tr><tr><td>cap.update</td><td>æ›´æ–°Cap</td><td>cap_id, cap_info</td></tr><tr><td>cap.query</td><td>æŸ¥è¯¢Cap</td><td>skill_id, cap_id</td></tr><tr><td>cap.remove</td><td>ç§»é™¤Cap</td><td>cap_id</td></tr></tbody></table>
<h5 data-id="heading-23">4.3.1 cap.declare å‘½ä»¤å‚æ•°çº¦æŸ</h5>





























































































































<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"device_control_cap_001"</td></tr><tr><td>cap_name</td><td>String</td><td>1-128</td><td>æ˜¯</td><td>Capåç§°</td><td>"è®¾å¤‡æ§åˆ¶èƒ½åŠ›"</td></tr><tr><td>cap_desc</td><td>String</td><td>1-512</td><td>å¦</td><td>Capæè¿°</td><td>"ç”¨äºæ§åˆ¶æ™ºèƒ½å®¶å±…è®¾å¤‡çš„èƒ½åŠ›"</td></tr><tr><td>skill_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>SKILLå”¯ä¸€æ ‡è¯†</td><td>"smart_home_controller_001"</td></tr><tr><td>cap_type</td><td>String</td><td>1-32</td><td>æ˜¯</td><td>Capç±»å‹</td><td>"device_control"</td></tr><tr><td>supported_scenes</td><td>Array[String]</td><td>1-10</td><td>å¦</td><td>æ”¯æŒçš„åœºæ™¯ç±»å‹</td><td><code>["SMART_HOME", "OFFICE_AUTOMATION"]</code></td></tr><tr><td>max_members</td><td>Integer</td><td>1-1000</td><td>æ˜¯</td><td>æœ€å¤§æˆå‘˜æ•°</td><td>100</td></tr><tr><td>data_storage_type</td><td>String</td><td>1-32</td><td>æ˜¯</td><td>æ•°æ®å­˜å‚¨ç±»å‹</td><td>"json"</td></tr><tr><td>link_type</td><td>String</td><td>1-32</td><td>æ˜¯</td><td>é“¾æ¥ç±»å‹</td><td>"bidirectional"</td></tr><tr><td>disk_path</td><td>String</td><td>1-256</td><td>æ˜¯</td><td>ç£ç›˜è·¯å¾„</td><td>"/var/cap_data/device_control"</td></tr><tr><td>group_file_path</td><td>String</td><td>1-256</td><td>æ˜¯</td><td>ç¾¤ç»„æ–‡ä»¶è·¯å¾„</td><td>"/var/cap_data/device_control/group.json"</td></tr><tr><td>links_file_path</td><td>String</td><td>1-256</td><td>æ˜¯</td><td>é“¾æ¥æ–‡ä»¶è·¯å¾„</td><td>"/var/cap_data/device_control/links.json"</td></tr><tr><td>sync_enabled</td><td>Boolean</td><td>-</td><td>æ˜¯</td><td>æ˜¯å¦å¯ç”¨åŒæ­¥</td><td>true</td></tr><tr><td>sync_interval</td><td>Integer</td><td>1-3600</td><td>æ˜¯</td><td>åŒæ­¥é—´éš”ï¼ˆç§’ï¼‰</td><td>60</td></tr></tbody></table>
<h5 data-id="heading-24">4.3.2 cap.update å‘½ä»¤å‚æ•°çº¦æŸ</h5>





























<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"device_control_cap_001"</td></tr><tr><td>cap_info</td><td>Object</td><td>-</td><td>æ˜¯</td><td>Capæ›´æ–°ä¿¡æ¯</td><td><code>{"cap_name": "æ›´æ–°çš„è®¾å¤‡æ§åˆ¶èƒ½åŠ›", "sync_interval": 30}</code></td></tr></tbody></table>
<h5 data-id="heading-25">4.3.3 cap.query å‘½ä»¤å‚æ•°çº¦æŸ</h5>





























<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>skill_id</td><td>String</td><td>1-64</td><td>å¦</td><td>SKILLå”¯ä¸€æ ‡è¯†</td><td>"smart_home_controller_001"</td></tr><tr><td>cap_id</td><td>String</td><td>1-64</td><td>å¦</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"device_control_cap_001"</td></tr></tbody></table>
<h5 data-id="heading-26">4.3.4 cap.remove å‘½ä»¤å‚æ•°çº¦æŸ</h5>





















<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"device_control_cap_001"</td></tr></tbody></table>
<h4 data-id="heading-27">4.4 é¢‘é“æ•°æ®ç®¡ç†å‘½ä»¤</h4>








































<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½æè¿°</th><th>å‚æ•°</th></tr></thead><tbody><tr><td>group.member.add</td><td>æ·»åŠ é¢‘é“æˆå‘˜</td><td>group_id, skill_id, role, cap_id</td></tr><tr><td>group.member.remove</td><td>ç§»é™¤é¢‘é“æˆå‘˜</td><td>group_id, skill_id, cap_id</td></tr><tr><td>group.link.add</td><td>æ·»åŠ é“¾è·¯å…³ç³»</td><td>group_id, source_skill_id, target_skill_id, link_type, cap_id</td></tr><tr><td>group.link.remove</td><td>ç§»é™¤é“¾è·¯å…³ç³»</td><td>group_id, source_skill_id, target_skill_id, cap_id</td></tr><tr><td>group.data.set</td><td>è®¾ç½®é¢‘é“æ•°æ®</td><td>group_id, data_key, data_value, data_type, cap_id</td></tr><tr><td>group.data.get</td><td>è·å–é¢‘é“æ•°æ®</td><td>group_id, data_key, cap_id</td></tr></tbody></table>
<h5 data-id="heading-28">4.4.1 group.member.add å‘½ä»¤å‚æ•°çº¦æŸ</h5>













































<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>group_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>ç¾¤ç»„ID</td><td>"smart_home_group_001"</td></tr><tr><td>skill_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>SKILLå”¯ä¸€æ ‡è¯†</td><td>"temperature_sensor_001"</td></tr><tr><td>role</td><td>String</td><td>1-32</td><td>æ˜¯</td><td>æˆå‘˜è§’è‰²</td><td>"sensor"</td></tr><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"smart_home_channel_001"</td></tr></tbody></table>
<h5 data-id="heading-29">4.4.2 group.member.remove å‘½ä»¤å‚æ•°çº¦æŸ</h5>





































<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>group_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>ç¾¤ç»„ID</td><td>"smart_home_group_001"</td></tr><tr><td>skill_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>SKILLå”¯ä¸€æ ‡è¯†</td><td>"temperature_sensor_001"</td></tr><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"smart_home_channel_001"</td></tr></tbody></table>
<h5 data-id="heading-30">4.4.3 group.link.add å‘½ä»¤å‚æ•°çº¦æŸ</h5>





















































<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>group_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>ç¾¤ç»„ID</td><td>"smart_home_group_001"</td></tr><tr><td>source_skill_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>æºSKILLå”¯ä¸€æ ‡è¯†</td><td>"temperature_sensor_001"</td></tr><tr><td>target_skill_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>ç›®æ ‡SKILLå”¯ä¸€æ ‡è¯†</td><td>"air_conditioner_001"</td></tr><tr><td>link_type</td><td>String</td><td>1-32</td><td>æ˜¯</td><td>é“¾è·¯ç±»å‹</td><td>"data_flow"</td></tr><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"smart_home_channel_001"</td></tr></tbody></table>
<h5 data-id="heading-31">4.4.4 group.link.remove å‘½ä»¤å‚æ•°çº¦æŸ</h5>













































<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>group_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>ç¾¤ç»„ID</td><td>"smart_home_group_001"</td></tr><tr><td>source_skill_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>æºSKILLå”¯ä¸€æ ‡è¯†</td><td>"temperature_sensor_001"</td></tr><tr><td>target_skill_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>ç›®æ ‡SKILLå”¯ä¸€æ ‡è¯†</td><td>"air_conditioner_001"</td></tr><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"smart_home_channel_001"</td></tr></tbody></table>
<h5 data-id="heading-32">4.4.5 group.data.set å‘½ä»¤å‚æ•°çº¦æŸ</h5>





















































<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>group_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>ç¾¤ç»„ID</td><td>"smart_home_group_001"</td></tr><tr><td>data_key</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>æ•°æ®é”®å</td><td>"temperature"</td></tr><tr><td>data_value</td><td>Any</td><td>-</td><td>æ˜¯</td><td>æ•°æ®å€¼</td><td>25</td></tr><tr><td>data_type</td><td>String</td><td>1-32</td><td>æ˜¯</td><td>æ•°æ®ç±»å‹</td><td>"number"</td></tr><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"smart_home_channel_001"</td></tr></tbody></table>
<h5 data-id="heading-33">4.4.6 group.data.get å‘½ä»¤å‚æ•°çº¦æŸ</h5>





































<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>group_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>ç¾¤ç»„ID</td><td>"smart_home_group_001"</td></tr><tr><td>data_key</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>æ•°æ®é”®å</td><td>"temperature"</td></tr><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"smart_home_channel_001"</td></tr></tbody></table>
<h4 data-id="heading-34">4.5 VFSåŒæ­¥å‘½ä»¤</h4>

























<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½æè¿°</th><th>å‚æ•°</th></tr></thead><tbody><tr><td>cap.vfs.sync</td><td>åŒæ­¥Cap VFSæ•°æ®</td><td>cap_id, vfs_path</td></tr><tr><td>cap.vfs.sync.status</td><td>æŸ¥è¯¢åŒæ­¥çŠ¶æ€</td><td>cap_id</td></tr><tr><td>cap.vfs.recover</td><td>æ¢å¤Cap VFSæ•°æ®</td><td>cap_id</td></tr></tbody></table>
<h5 data-id="heading-35">4.5.1 cap.vfs.sync å‘½ä»¤å‚æ•°çº¦æŸ</h5>





























<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"device_control_cap_001"</td></tr><tr><td>vfs_path</td><td>String</td><td>1-256</td><td>æ˜¯</td><td>VFSè·¯å¾„</td><td>"/vfs/cap/device_control_cap_001/group.json"</td></tr></tbody></table>
<h5 data-id="heading-36">4.5.2 cap.vfs.sync.status å‘½ä»¤å‚æ•°çº¦æŸ</h5>





















<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"device_control_cap_001"</td></tr></tbody></table>
<h5 data-id="heading-37">4.5.3 cap.vfs.recover å‘½ä»¤å‚æ•°çº¦æŸ</h5>





















<table><thead><tr><th>å‚æ•°å</th><th>æ•°æ®ç±»å‹</th><th>é•¿åº¦é™åˆ¶</th><th>å¿…å¡«æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>cap_id</td><td>String</td><td>1-64</td><td>æ˜¯</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>"device_control_cap_001"</td></tr></tbody></table>
<h4 data-id="heading-38">4.6 å‘½ä»¤æ‰§è¡Œæµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‘é€è¯·æ±‚   â”‚â”€â”€â”€â”€â–¶â”‚ å‘½ä»¤è§£æ     â”‚â”€â”€â”€â”€â–¶â”‚ æƒé™éªŒè¯     â”‚â”€â”€â”€â”€â–¶â”‚ æ‰§è¡Œå‘½ä»¤   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">        â–²                                                               â–²
        â”‚                                                               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  è¿”å›ç»“æœ
</span></code></pre>
<h3 data-id="heading-39">5. å®‰å…¨æœºåˆ¶</h3>
<h4 data-id="heading-40">5.1 è®¤è¯æœºåˆ¶</h4>
<ul>
<li><strong>è¯ä¹¦è®¤è¯</strong>ï¼šå£°æ˜ä¸ºRouteAgentæˆ–å£°æ˜åœºæ™¯çš„SKILLå¿…é¡»ä½¿ç”¨å”¯ä¸€è¯ä¹¦ï¼Œè¯ä¹¦SNä¸º16ä½åå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œé€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼ä¹‹ä¸€ç­¾å‘ï¼š
<ul>
<li>è¿è¥å•†æˆæƒç­¾å‘</li>
<li>åº”ç”¨å•†åº—æˆæƒç­¾å‘</li>
<li>ä¼ä¸šæ‰‹å·¥æˆæƒç­¾å‘</li>
</ul>
</li>
<li><strong>JWT è®¤è¯</strong>ï¼šä½¿ç”¨ JSON Web Token è¿›è¡Œèº«ä»½éªŒè¯</li>
<li><strong>API Key</strong>ï¼šä½¿ç”¨ API å¯†é’¥è¿›è¡Œç®€å•è®¤è¯</li>
<li><strong>OAuth 2.0</strong>ï¼šæ”¯æŒç¬¬ä¸‰æ–¹è®¤è¯</li>
</ul>
<h4 data-id="heading-41">5.2 æˆæƒæœºåˆ¶</h4>
<ul>
<li><strong>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)</strong>ï¼šæ ¹æ®ç”¨æˆ·è§’è‰²åˆ†é…æƒé™</li>
<li><strong>åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶ (RBAC)</strong>ï¼šæ ¹æ®èµ„æºç±»å‹å’Œå±æ€§åˆ†é…æƒé™</li>
<li><strong>ABAC</strong>ï¼šåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼Œæ”¯æŒæ›´çµæ´»çš„æƒé™ç­–ç•¥</li>
<li><strong>RouteAgent ç‰¹æ®Šæˆæƒ</strong>ï¼š
<ul>
<li>å£°æ˜ä¸ºRouteAgentçš„SKILLå¿…é¡»ç»è¿‡è¿è¥å•†ã€åº”ç”¨å•†åº—æˆ–ä¼ä¸šæ‰‹å·¥æˆæƒ</li>
<li>æˆæƒçš„RouteAgentå¯è¢«killflowå‘ç°å’Œè°ƒåº¦</li>
<li>æœªæˆæƒçš„SKILLæ— æ³•å£°æ˜ä¸ºRouteAgent</li>
</ul>
</li>
<li><strong>åœºæ™¯å£°æ˜æˆæƒ</strong>ï¼š
<ul>
<li>å£°æ˜åœºæ™¯çš„SKILLå¿…é¡»ä½¿ç”¨æˆæƒè¯ä¹¦</li>
<li>è¯ä¹¦SNå¿…é¡»ä¸º16ä½åå…­è¿›åˆ¶å­—ç¬¦ä¸²</li>
<li>æœªæˆæƒSKILLæ— æ³•å£°æ˜åœºæ™¯</li>
</ul>
</li>
</ul>
<h4 data-id="heading-42">5.3 åŠ å¯†æœºåˆ¶</h4>
<ul>
<li><strong>ä¼ è¾“åŠ å¯†</strong>ï¼šä½¿ç”¨ TLS/SSL åŠ å¯†ä¼ è¾“æ•°æ®</li>
<li><strong>æ•°æ®åŠ å¯†</strong>ï¼šå¯¹æ•æ„Ÿæ•°æ®è¿›è¡Œç«¯åˆ°ç«¯åŠ å¯†</li>
<li><strong>å¯†é’¥ç®¡ç†</strong>ï¼šå®‰å…¨çš„å¯†é’¥ç”Ÿæˆã€åˆ†å‘å’Œè½®æ¢æœºåˆ¶</li>
<li><strong>è¯ä¹¦ç®¡ç†</strong>ï¼š
<ul>
<li>è¯ä¹¦æœ‰æ•ˆæœŸç®¡ç†</li>
<li>è¯ä¹¦åŠé”€æœºåˆ¶</li>
<li>è¯ä¹¦æ›´æ–°æµç¨‹</li>
</ul>
</li>
</ul>
<h4 data-id="heading-43">5.4 å®‰å…¨ç®¡æ§æµç¨‹</h4>
<ol>
<li>
<p><strong>SKILLè¯ä¹¦ç”³è¯·</strong>ï¼š</p>
<ul>
<li>SKILLå¼€å‘è€…å‘è¿è¥å•†ã€åº”ç”¨å•†åº—æˆ–ä¼ä¸šç”³è¯·è¯ä¹¦</li>
<li>æä¾›SKILLåŸºæœ¬ä¿¡æ¯å’Œç”¨é€”</li>
<li>å®¡æ ¸é€šè¿‡åè·å–å”¯ä¸€è¯ä¹¦ï¼ˆSNä¸º16ä½åå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼‰</li>
</ul>
</li>
<li>
<p><strong>RouteAgentå£°æ˜</strong>ï¼š</p>
<ul>
<li>SKILLä½¿ç”¨æˆæƒè¯ä¹¦å£°æ˜ä¸ºRouteAgent</li>
<li>AI BridgeéªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§å’ŒæˆæƒèŒƒå›´</li>
<li>éªŒè¯é€šè¿‡åï¼ŒRouteAgentå¯è¢«killflowå‘ç°å’Œè°ƒåº¦</li>
</ul>
</li>
<li>
<p><strong>åœºæ™¯å£°æ˜</strong>ï¼š</p>
<ul>
<li>RouteAgentä½¿ç”¨æˆæƒè¯ä¹¦å£°æ˜åœºæ™¯</li>
<li>AI BridgeéªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§å’ŒRouteAgentæƒé™</li>
<li>éªŒè¯é€šè¿‡ååˆ›å»ºåœºæ™¯å¹¶å…è®¸å…¶ä»–SKILLåŠ å…¥</li>
</ul>
</li>
</ol>
<h3 data-id="heading-44">6. æ•°æ®æ¨¡å‹</h3>
<h4 data-id="heading-45">6.1 æ¶ˆæ¯æ•°æ®æ¨¡å‹</h4>





































































<table><thead><tr><th>å®ä½“</th><th>å±æ€§</th><th>ç±»å‹</th><th>æè¿°</th><th>æ ¼å¼/è§„åˆ™</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>Message</td><td>id</td><td>String</td><td>æ¶ˆæ¯å”¯ä¸€æ ‡è¯†</td><td>UUID v4</td><td>"123e4567-e89b-12d3-a456-426614174000"</td></tr><tr><td>Message</td><td>version</td><td>String</td><td>åè®®ç‰ˆæœ¬</td><td>ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·</td><td>"0.52"</td></tr><tr><td>Message</td><td>timestamp</td><td>Long</td><td>æ¶ˆæ¯æ—¶é—´æˆ³</td><td>Unixæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰</td><td>1737000000000</td></tr><tr><td>Message</td><td>type</td><td>String</td><td>æ¶ˆæ¯ç±»å‹</td><td>"request" æˆ– "response"</td><td>"request"</td></tr><tr><td>Message</td><td>command</td><td>String</td><td>å‘½ä»¤åç§°</td><td>ç‚¹åˆ†éš”çš„å‘½ä»¤è·¯å¾„</td><td>"skill.discover"</td></tr><tr><td>Message</td><td>params</td><td>Object</td><td>å‘½ä»¤å‚æ•°</td><td>JSONå¯¹è±¡</td><td><code>{"space_id": "home_space_001"}</code></td></tr><tr><td>Message</td><td>metadata</td><td>Object</td><td>å…ƒæ•°æ®</td><td>JSONå¯¹è±¡</td><td><code>{"sender_id": "agent_123"}</code></td></tr></tbody></table>
<h4 data-id="heading-46">6.2 é”™è¯¯æ•°æ®æ¨¡å‹</h4>





































<table><thead><tr><th>å®ä½“</th><th>å±æ€§</th><th>ç±»å‹</th><th>æè¿°</th><th>æ ¼å¼/è§„åˆ™</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>Error</td><td>code</td><td>String</td><td>é”™è¯¯ç </td><td>4ä½æ•°å­—</td><td>"1001"</td></tr><tr><td>Error</td><td>message</td><td>String</td><td>é”™è¯¯æ¶ˆæ¯</td><td>ç®€æ´çš„é”™è¯¯æè¿°</td><td>"å‚æ•°é”™è¯¯"</td></tr><tr><td>Error</td><td>details</td><td>Object</td><td>é”™è¯¯è¯¦æƒ…</td><td>è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯</td><td><code>{"param_name": "space_id", "reason": "æ ¼å¼ä¸æ­£ç¡®"}</code></td></tr></tbody></table>
<h4 data-id="heading-47">6.3 å…ƒæ•°æ®æ¨¡å‹</h4>













































<table><thead><tr><th>å®ä½“</th><th>å±æ€§</th><th>ç±»å‹</th><th>æè¿°</th><th>æ ¼å¼/è§„åˆ™</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>Metadata</td><td>sender_id</td><td>String</td><td>å‘é€è€…æ ‡è¯†</td><td>1-64ä½å­—ç¬¦ä¸²</td><td>"agent_123"</td></tr><tr><td>Metadata</td><td>trace_id</td><td>String</td><td>è·Ÿè¸ªæ ‡è¯†</td><td>UUID v4</td><td>"456e7890-e12b-34d5-a678-901234567890"</td></tr><tr><td>Metadata</td><td>priority</td><td>String</td><td>æ¶ˆæ¯ä¼˜å…ˆçº§</td><td>"low"ã€"medium" æˆ– "high"</td><td>"high"</td></tr><tr><td>Metadata</td><td>timeout</td><td>Long</td><td>è¶…æ—¶æ—¶é—´</td><td>æ¯«ç§’æ•°</td><td>30000</td></tr></tbody></table>
<h4 data-id="heading-48">6.4 SKILLæ•°æ®æ¨¡å‹</h4>





































































<table><thead><tr><th>å®ä½“</th><th>å±æ€§</th><th>ç±»å‹</th><th>æè¿°</th><th>æ ¼å¼/è§„åˆ™</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>SKILL</td><td>skill_id</td><td>String</td><td>SKILLå”¯ä¸€æ ‡è¯†</td><td>1-64ä½å­—ç¬¦ä¸²</td><td>"smart_home_controller_001"</td></tr><tr><td>SKILL</td><td>name</td><td>String</td><td>SKILLåç§°</td><td>1-128ä½å­—ç¬¦ä¸²</td><td>"æ™ºèƒ½å®¶å±…æ§åˆ¶å™¨"</td></tr><tr><td>SKILL</td><td>description</td><td>String</td><td>SKILLæè¿°</td><td>1-512ä½å­—ç¬¦ä¸²</td><td>"ç”¨äºæ§åˆ¶æ™ºèƒ½å®¶å±…è®¾å¤‡çš„SKILL"</td></tr><tr><td>SKILL</td><td>version</td><td>String</td><td>SKILLç‰ˆæœ¬</td><td>ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢ç‰ˆæœ¬å·</td><td>"1.0.0"</td></tr><tr><td>SKILL</td><td>type</td><td>String</td><td>SKILLç±»å‹</td><td>"system" æˆ– "custom"</td><td>"custom"</td></tr><tr><td>SKILL</td><td>endpoints</td><td>Array[String]</td><td>è®¿é—®ç«¯ç‚¹åˆ—è¡¨</td><td>1-10ä¸ªURL</td><td><code>["http://192.168.1.100:9010"]</code></td></tr><tr><td>SKILL</td><td>capabilities</td><td>Array[String]</td><td>èƒ½åŠ›åˆ—è¡¨</td><td>1-100ä¸ªèƒ½åŠ›ID</td><td><code>["temperature_sensor", "device_control"]</code></td></tr></tbody></table>
<h4 data-id="heading-49">6.5 Capæ•°æ®æ¨¡å‹</h4>





































































<table><thead><tr><th>å®ä½“</th><th>å±æ€§</th><th>ç±»å‹</th><th>æè¿°</th><th>æ ¼å¼/è§„åˆ™</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>Cap</td><td>cap_id</td><td>String</td><td>Capå”¯ä¸€æ ‡è¯†</td><td>1-64ä½å­—ç¬¦ä¸²</td><td>"device_control_cap_001"</td></tr><tr><td>Cap</td><td>name</td><td>String</td><td>Capåç§°</td><td>1-128ä½å­—ç¬¦ä¸²</td><td>"è®¾å¤‡æ§åˆ¶èƒ½åŠ›"</td></tr><tr><td>Cap</td><td>description</td><td>String</td><td>Capæè¿°</td><td>1-512ä½å­—ç¬¦ä¸²</td><td>"ç”¨äºæ§åˆ¶æ™ºèƒ½å®¶å±…è®¾å¤‡çš„èƒ½åŠ›"</td></tr><tr><td>Cap</td><td>skill_id</td><td>String</td><td>æ‰€å±SKILL ID</td><td>1-64ä½å­—ç¬¦ä¸²</td><td>"smart_home_controller_001"</td></tr><tr><td>Cap</td><td>type</td><td>String</td><td>Capç±»å‹</td><td>1-32ä½å­—ç¬¦ä¸²</td><td>"device_control"</td></tr><tr><td>Cap</td><td>status</td><td>String</td><td>çŠ¶æ€</td><td>"active" æˆ– "inactive"</td><td>"active"</td></tr><tr><td>Cap</td><td>supported_scenes</td><td>Array[String]</td><td>æ”¯æŒçš„åœºæ™¯ç±»å‹</td><td>1-10ä¸ªåœºæ™¯ç±»å‹</td><td><code>["SMART_HOME", "OFFICE_AUTOMATION"]</code></td></tr></tbody></table>
<h3 data-id="heading-50">7. æ‰©å±•æœºåˆ¶</h3>
<h4 data-id="heading-51">7.1 è‡ªå®šä¹‰å‘½ä»¤</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"custom.command"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"custom_param1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"custom_param2"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"value2"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"extension"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vendor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"company-x"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"schema_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-52">7.2 æ‰©å±•ç‚¹</h4>






























<table><thead><tr><th>æ‰©å±•ç‚¹</th><th>æè¿°</th><th>é…ç½®æ–¹å¼</th></tr></thead><tbody><tr><td>å‘½ä»¤è§£æå™¨</td><td>è‡ªå®šä¹‰å‘½ä»¤è§£æé€»è¾‘</td><td>æ’ä»¶é…ç½®</td></tr><tr><td>æƒé™éªŒè¯å™¨</td><td>è‡ªå®šä¹‰æƒé™éªŒè¯é€»è¾‘</td><td>æ’ä»¶é…ç½®</td></tr><tr><td>æ¶ˆæ¯å¤„ç†å™¨</td><td>è‡ªå®šä¹‰æ¶ˆæ¯å¤„ç†é€»è¾‘</td><td>æ’ä»¶é…ç½®</td></tr><tr><td>é”™è¯¯å¤„ç†å™¨</td><td>è‡ªå®šä¹‰é”™è¯¯å¤„ç†é€»è¾‘</td><td>æ’ä»¶é…ç½®</td></tr></tbody></table>
<h3 data-id="heading-53">8. æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-54">8.1 æ‰¹é‡æ“ä½œ</h4>
<p>æ”¯æŒæ‰¹é‡å‘½ä»¤æ‰§è¡Œï¼Œå‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"batch.execute"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"commands"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span><span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"skill.invoke"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"skill_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"skill1"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"capability_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cap1"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span><span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"skill.invoke"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"skill_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"skill2"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"capability_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cap2"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-55">8.2 ç¼“å­˜ç­–ç•¥</h4>

























<table><thead><tr><th>ç¼“å­˜ç±»å‹</th><th>é€‚ç”¨åœºæ™¯</th><th>è¿‡æœŸç­–ç•¥</th></tr></thead><tbody><tr><td>SKILL å…ƒæ•°æ®</td><td>é¢‘ç¹çš„ SKILL å‘ç°è¯·æ±‚</td><td>TTL 30 ç§’</td></tr><tr><td>æƒé™ä¿¡æ¯</td><td>é¢‘ç¹çš„æƒé™éªŒè¯</td><td>TTL 10 åˆ†é’Ÿ</td></tr><tr><td>èµ„æºä¿¡æ¯</td><td>é¢‘ç¹çš„èµ„æºæŸ¥è¯¢</td><td>TTL 1 åˆ†é’Ÿ</td></tr></tbody></table>
<h3 data-id="heading-56">9. Capé¢‘é“ç®¡ç†</h3>
<h4 data-id="heading-57">9.1 Capå£°æ˜æµç¨‹</h4>
<ol>
<li>SKILLåˆå§‹åŒ–æ—¶ï¼Œå£°æ˜å…¶æ”¯æŒçš„Capåˆ—è¡¨</li>
<li>SKILLå‘AI Bridgeå‘é€cap.declareå‘½ä»¤</li>
<li>AI BridgeéªŒè¯Capä¿¡æ¯å¹¶æ³¨å†Œ</li>
<li>AI Bridgeè¿”å›æ³¨å†Œç»“æœ</li>
</ol>
<h4 data-id="heading-58">9.2 Capä¸Sceneå…³è”</h4>
<p>SKILLå£°æ˜Sceneæ—¶ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªCapä½œä¸ºé¢‘é“ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.52"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uuid-1234-5678-90ab-cdef"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1737000000000</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"request"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"scene.declare"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"scene_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SMART_HOME"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"skill_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"skill_001"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"skill_role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"agent_route"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"is_owner_declaration"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"cap_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"skill_001_device_control"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sender_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"skill-001"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"trace-456"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-59">10. VFSåŒæ­¥åè®®</h3>
<h4 data-id="heading-60">10.1 åŒæ­¥æœºåˆ¶</h4>
<p>æ‰€æœ‰Capç›¸å…³æ•°æ®é€šè¿‡VFSå®ç°äº‘ç«¯åŒæ­¥ï¼ŒåŒ…æ‹¬ï¼š</p>



































<table><thead><tr><th>æ•°æ®ç±»å‹</th><th>æœ¬åœ°å­˜å‚¨</th><th>äº‘ç«¯å­˜å‚¨</th><th>åŒæ­¥æ–¹å¼</th></tr></thead><tbody><tr><td>Capé…ç½®</td><td>cap.json</td><td>/vfs/cap/{cap_id}/cap.json</td><td>å®æ—¶åŒæ­¥</td></tr><tr><td>diskæ•°æ®</td><td>Capä¸“å±VFSç›®å½•</td><td>/vfs/cap/{cap_id}/disk/</td><td>å®æ—¶/å®šæœŸåŒæ­¥</td></tr><tr><td>groupæ•°æ®</td><td>group.json</td><td>/vfs/cap/{cap_id}/group.json</td><td>å®æ—¶åŒæ­¥</td></tr><tr><td>linksæ•°æ®</td><td>links.json</td><td>/vfs/cap/{cap_id}/links.json</td><td>å®æ—¶åŒæ­¥</td></tr></tbody></table>
<h4 data-id="heading-61">10.2 åŒæ­¥å‘½ä»¤æ ¼å¼</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.52"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uuid-1234-5678-90ab-cdef"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1737000000000</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"request"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cap.vfs.sync"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"cap_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"skill_001_device_control"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"vfs_path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/vfs/cap/skill_001_device_control/group.json"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"sync_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"REAL_TIME"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{\"group_id\": \"group_smart_home_device\", ...}"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sender_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"skill-001"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"trace-456"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-62">11. ç‰ˆæœ¬ç®¡ç†</h3>
<h4 data-id="heading-63">11.1 ç‰ˆæœ¬å‡çº§ç­–ç•¥</h4>
<ul>
<li>ä¸»ç‰ˆæœ¬å·ï¼šé‡å¤§åŠŸèƒ½å˜æ›´ï¼Œå¯èƒ½ä¸å…¼å®¹æ—§ç‰ˆæœ¬</li>
<li>æ¬¡ç‰ˆæœ¬å·ï¼šæ–°å¢åŠŸèƒ½ï¼Œå…¼å®¹æ—§ç‰ˆæœ¬</li>
<li>ä¿®è®¢ç‰ˆæœ¬å·ï¼šbugä¿®å¤ï¼Œå…¼å®¹æ—§ç‰ˆæœ¬</li>
</ul>
<h4 data-id="heading-64">11.2 å‘åå…¼å®¹æ€§</h4>
<ul>
<li>æ”¯æŒç‰ˆæœ¬åå•†æœºåˆ¶</li>
<li>æ—§ç‰ˆæœ¬æ¶ˆæ¯è‡ªåŠ¨è½¬æ¢</li>
<li>åºŸå¼ƒåŠŸèƒ½æ ‡è®°å’Œè­¦å‘Š</li>
</ul>
<h3 data-id="heading-65">12. æµ‹è¯•è§„èŒƒ</h3>
<h4 data-id="heading-66">12.1 åè®®æµ‹è¯•æ–¹æ³•</h4>
<ul>
<li>å•å…ƒæµ‹è¯•ï¼šæµ‹è¯•åè®®å„ç»„ä»¶çš„åŸºæœ¬åŠŸèƒ½</li>
<li>é›†æˆæµ‹è¯•ï¼šæµ‹è¯•ç»„ä»¶é—´çš„äº¤äº’</li>
<li>æ€§èƒ½æµ‹è¯•ï¼šæµ‹è¯•åè®®çš„æ€§èƒ½å’Œååé‡</li>
<li>å®‰å…¨æµ‹è¯•ï¼šæµ‹è¯•åè®®çš„å®‰å…¨æ€§</li>
</ul>
<h4 data-id="heading-67">12.2 æµ‹è¯•ç”¨ä¾‹</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"test_case_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tc_001"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æµ‹è¯•cap.declareå‘½ä»¤"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.52"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cap.declare"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"cap_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"test_cap"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"cap_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Test Cap"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"skill_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"test_skill"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"expected_response"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-68">13. éƒ¨ç½²æŒ‡å—</h3>
<h4 data-id="heading-69">13.1 åè®®éƒ¨ç½²é…ç½®</h4>
<ul>
<li>ç«¯å£é…ç½®ï¼šé»˜è®¤9010-9020</li>
<li>å®‰å…¨é…ç½®ï¼šTLS/SSLè¯ä¹¦é…ç½®</li>
<li>æ—¥å¿—é…ç½®ï¼šæ—¥å¿—çº§åˆ«å’Œæ ¼å¼</li>
</ul>
<h4 data-id="heading-70">13.2 æœ€ä½³å®è·µ</h4>
<ul>
<li>å»ºè®®ä½¿ç”¨WebSocketåè®®è¿›è¡Œå®æ—¶é€šä¿¡</li>
<li>å®šæœŸå¤‡ä»½Capæ•°æ®</li>
<li>å¯ç”¨VFSåŒæ­¥åŠŸèƒ½ç¡®ä¿æ•°æ®ä¸€è‡´æ€§</li>
</ul>
<h3 data-id="heading-71">14. é”™è¯¯å¤„ç†</h3>
<h4 data-id="heading-72">14.1 é”™è¯¯ç ä½“ç³»</h4>





























<table><thead><tr><th>é”™è¯¯ç èŒƒå›´</th><th>é”™è¯¯ç±»å‹</th></tr></thead><tbody><tr><td>1000-1999</td><td>å‚æ•°é”™è¯¯</td></tr><tr><td>2000-2999</td><td>è®¤è¯æˆæƒé”™è¯¯</td></tr><tr><td>3000-3999</td><td>èµ„æºé”™è¯¯</td></tr><tr><td>4000-4999</td><td>æœåŠ¡é”™è¯¯</td></tr><tr><td>5000-5999</td><td>ç³»ç»Ÿé”™è¯¯</td></tr></tbody></table>
<h4 data-id="heading-73">14.2 é‡è¯•æœºåˆ¶</h4>

























<table><thead><tr><th>é”™è¯¯ç±»å‹</th><th>é‡è¯•ç­–ç•¥</th></tr></thead><tbody><tr><td>ç½‘ç»œé”™è¯¯</td><td>æŒ‡æ•°é€€é¿é‡è¯•</td></tr><tr><td>æœåŠ¡ç¹å¿™</td><td>å»¶è¿Ÿé‡è¯•</td></tr><tr><td>å‚æ•°é”™è¯¯</td><td>ä¸é‡è¯•</td></tr><tr><td>æƒé™é”™è¯¯</td><td>ä¸é‡è¯•</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OoderAI Agent A2Påè®®(MITå¼€æºåè®®) -Ooder AI Bridge åè®®ä¸»æ–‡æ¡£V0.6ï¼ˆå®Œæ•´ç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7596307289724796970</link>    <guid>https://juejin.cn/post/7596307289724796970</guid>    <pubDate>2026-01-18T11:12:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596307289724796970" data-draft-id="7596276978808619051" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OoderAI Agent A2Påè®®(MITå¼€æºåè®®) -Ooder AI Bridge åè®®ä¸»æ–‡æ¡£V0.6ï¼ˆå®Œæ•´ç‰ˆï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-18T11:12:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OoderAI Agent A2Påè®®(MITå¼€æºåè®®) -Ooder AI Bridge åè®®ä¸»æ–‡æ¡£V0.6ï¼ˆå®Œæ•´ç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T11:12:23.000Z" title="Sun Jan 18 2026 11:12:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Ooder AI Bridge åè®®ä¸»æ–‡æ¡£</h2>
<h3 data-id="heading-1">1. åè®®æ¦‚è¿°</h3>
<h4 data-id="heading-2">1.1 åè®®èƒŒæ™¯</h4>
<p>éšç€äººå·¥æ™ºèƒ½æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼Œå¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¹‹é—´çš„ååŒä¸é€šä¿¡å˜å¾—æ—¥ç›Šé‡è¦ã€‚Ooder AI Bridge åè®®æ—¨åœ¨å»ºç«‹ä¸€ä¸ªæ ‡å‡†åŒ–çš„é€šä¿¡æ¡†æ¶ï¼Œå®ç°ä¸åŒæ™ºèƒ½ä½“ã€æŠ€èƒ½æœåŠ¡å’Œèµ„æºç³»ç»Ÿä¹‹é—´çš„æ— ç¼äº¤äº’ä¸åä½œã€‚</p>
<h4 data-id="heading-3">1.2 åè®®ç›®æ ‡</h4>
<ul>
<li><strong>æ ‡å‡†åŒ–é€šä¿¡</strong>ï¼šå®šä¹‰ç»Ÿä¸€çš„æ¶ˆæ¯æ ¼å¼å’Œé€šä¿¡æ¥å£ï¼Œæ¶ˆé™¤ç³»ç»Ÿé—´çš„äº’æ“ä½œéšœç¢</li>
<li><strong>å®‰å…¨å¯é </strong>ï¼šæä¾›å®Œå–„çš„è®¤è¯ã€æˆæƒå’ŒåŠ å¯†æœºåˆ¶ï¼Œç¡®ä¿é€šä¿¡å®‰å…¨</li>
<li><strong>çµæ´»æ‰©å±•</strong>ï¼šæ”¯æŒåŠ¨æ€å‘ç°å’Œæ³¨å†Œï¼Œé€‚åº”ä¸æ–­å¢é•¿çš„æœåŠ¡å’Œèµ„æº</li>
<li><strong>é«˜æ•ˆååŒ</strong>ï¼šä¼˜åŒ–é€šä¿¡åè®®ï¼Œå‡å°‘å»¶è¿Ÿï¼Œæé«˜å¤šæ™ºèƒ½ä½“ååŒæ•ˆç‡</li>
</ul>
<h4 data-id="heading-4">1.3 åº”ç”¨åœºæ™¯</h4>
<ul>
<li>æ™ºèƒ½ä½“é—´çš„ä»»åŠ¡åä½œä¸èµ„æºå…±äº«</li>
<li>æŠ€èƒ½æœåŠ¡çš„åŠ¨æ€å‘ç°ä¸è°ƒç”¨</li>
<li>è·¨å¹³å°èµ„æºçš„ç»Ÿä¸€ç®¡ç†ä¸è®¿é—®</li>
<li>å¤šæ¨¡æ€æ•°æ®çš„äº¤æ¢ä¸å¤„ç†</li>
<li>å®æ—¶ç›‘æ§ä¸è¿œç¨‹æ§åˆ¶</li>
</ul>
<h3 data-id="heading-5">2. åè®®æ¶æ„</h3>
<h4 data-id="heading-6">2.1 åˆ†å±‚æ¶æ„</h4>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åº”ç”¨å±‚         â”‚â”€â”€â”€â”€â–¶â”‚ åè®®å±‚         â”‚â”€â”€â”€â”€â–¶â”‚ ä¼ è¾“å±‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">        â–²                       â–²                       â–²
        â”‚                       â”‚                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            å®‰å…¨å±‚
</span></code></pre>
<h4 data-id="heading-7">2.2 æ ¸å¿ƒç»„ä»¶</h4>
<ul>
<li><strong>æ¶ˆæ¯æ ¼å¼</strong>ï¼šå®šä¹‰ç»Ÿä¸€çš„è¯·æ±‚/å“åº”ç»“æ„</li>
<li><strong>å‘½ä»¤ç³»ç»Ÿ</strong>ï¼šæ ‡å‡†åŒ–çš„æ“ä½œæŒ‡ä»¤é›†åˆ</li>
<li><strong>å®‰å…¨æœºåˆ¶</strong>ï¼šè®¤è¯ã€æˆæƒã€åŠ å¯†å’Œå®‰å…¨å®¡è®¡</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šç»Ÿä¸€çš„é”™è¯¯ç å’Œå¼‚å¸¸å¤„ç†æœºåˆ¶</li>
<li><strong>æ‰©å±•æœºåˆ¶</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰å‘½ä»¤å’Œå‚æ•°</li>
</ul>
<h3 data-id="heading-8">3. æ–‡æ¡£ç»“æ„</h3>
<p>æœ¬åè®®æ–‡æ¡£é‡‡ç”¨åˆ†å†Œç»“æ„ï¼ŒåŒ…æ‹¬ä»¥ä¸‹éƒ¨åˆ†ï¼š</p>
<h4 data-id="heading-9">3.1 ä¸»æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰</h4>
<ul>
<li>åè®®æ¦‚è¿°</li>
<li>æ¶æ„è®¾è®¡</li>
<li>æœ¯è¯­å®šä¹‰</li>
<li>ç‰ˆæœ¬è¯´æ˜</li>
</ul>
<h4 data-id="heading-10">3.2 AI Bridge åˆ†å†Œ</h4>
<ul>
<li>é€šä¿¡åè®®</li>
<li>æ¶ˆæ¯æ ¼å¼</li>
<li>å‘½ä»¤ç³»ç»Ÿ</li>
<li>å®‰å…¨æœºåˆ¶</li>
</ul>
<h4 data-id="heading-11">3.3 Skill åˆ†å†Œ</h4>
<ul>
<li>Skill éœ€æ±‚è§„æ ¼</li>
<li>Skill-Capability å…³ç³»</li>
<li>Skill æ¥å£å®šä¹‰</li>
<li>Skill æ•°æ®æ¨¡å‹</li>
</ul>
<h4 data-id="heading-12">3.4 Agent åˆ†å†Œ</h4>
<ul>
<li>MCP Agent è§„èŒƒ</li>
<li>Route Agent è§„èŒƒ</li>
<li>End Agent è§„èŒƒ</li>
<li>Agent é€šä¿¡æœºåˆ¶</li>
</ul>
<h3 data-id="heading-13">4. æœ¯è¯­å®šä¹‰</h3>





















































<table><thead><tr><th>æœ¯è¯­</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>Ooder</td><td>æ™ºèƒ½ä½“ç³»ç»Ÿçš„ç»Ÿä¸€å“ç‰Œåç§°</td></tr><tr><td>Skill</td><td>æä¾›ç‰¹å®šåŠŸèƒ½çš„æœåŠ¡å•å…ƒ</td></tr><tr><td>Capability</td><td>Skillæä¾›çš„å…·ä½“èƒ½åŠ›</td></tr><tr><td>Space</td><td>èµ„æºç»„ç»‡çš„åŸºæœ¬å•ä½</td></tr><tr><td>Zone</td><td>Spaceå†…çš„å­åŒºåŸŸï¼Œç”¨äºæ›´ç»†ç²’åº¦çš„èµ„æºç®¡ç†</td></tr><tr><td>Endpoint</td><td>æœåŠ¡çš„ç½‘ç»œè®¿é—®ç‚¹</td></tr><tr><td>Endpoints</td><td>æœåŠ¡çš„å¤šä¸ªç½‘ç»œè®¿é—®ç‚¹åˆ—è¡¨</td></tr><tr><td>AI Bridge</td><td>æ™ºèƒ½ä½“é—´é€šä¿¡çš„æ¡¥æ¢åè®®</td></tr><tr><td>MCP Agent</td><td>ä¸»æ§æ™ºèƒ½ä½“ï¼Œè´Ÿè´£èµ„æºç®¡ç†å’Œè°ƒåº¦</td></tr><tr><td>Route Agent</td><td>è·¯ç”±æ™ºèƒ½ä½“ï¼Œè´Ÿè´£æ¶ˆæ¯è·¯ç”±å’Œè½¬å‘</td></tr><tr><td>End Agent</td><td>ç»ˆç«¯æ™ºèƒ½ä½“ï¼Œè´Ÿè´£ä¸å¤–éƒ¨è®¾å¤‡å’Œç³»ç»Ÿäº¤äº’</td></tr></tbody></table>
<h3 data-id="heading-14">5. ç‰ˆæœ¬è¯´æ˜</h3>
<h4 data-id="heading-15">5.1 å½“å‰ç‰ˆæœ¬</h4>
<ul>
<li>ç‰ˆæœ¬å·ï¼šv0.52</li>
<li>å‘å¸ƒæ—¥æœŸï¼š2026-01-18</li>
<li>ä¸»è¦æ›´æ–°ï¼š
<ul>
<li>æœ¯è¯­ç»Ÿä¸€ï¼ˆSuperAgent â†’ Ooderï¼‰</li>
<li>Endpoint å‡çº§ä¸º Endpointsï¼ˆå•ä¸ª â†’ åˆ—è¡¨ï¼‰</li>
<li>Place/Area å‡çº§ä¸º Space/Zone</li>
<li>å®Œå–„ Skill-Capability å…³ç³»æ¨¡å‹</li>
<li>å¢å¼ºå®‰å…¨æœºåˆ¶</li>
</ul>
</li>
</ul>
<h4 data-id="heading-16">5.2 ç‰ˆæœ¬å†å²</h4>




















<table><thead><tr><th>ç‰ˆæœ¬å·</th><th>å‘å¸ƒæ—¥æœŸ</th><th>ä¸»è¦å˜åŒ–</th></tr></thead><tbody><tr><td>v0.51</td><td>2025-12-15</td><td>åˆå§‹ç‰ˆæœ¬å‘å¸ƒ</td></tr><tr><td>v0.52</td><td>2026-01-18</td><td>æœ¯è¯­ç»Ÿä¸€ä¸åŠŸèƒ½å¢å¼º</td></tr></tbody></table>
<h3 data-id="heading-17">6. åè®®è§„èŒƒ</h3>
<h4 data-id="heading-18">6.1 æ¶ˆæ¯æ ¼å¼</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.52"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uuid-1234-5678-90ab-cdef"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1737000000000</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"request"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"skill.discover"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"space_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"space-123"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"capability"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"weather"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sender_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"agent-123"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"trace-456"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-19">6.2 é”™è¯¯å¤„ç†</h4>








































<table><thead><tr><th>é”™è¯¯ç </th><th>æè¿°</th><th>HTTPçŠ¶æ€ç </th></tr></thead><tbody><tr><td>1001</td><td>å‚æ•°é”™è¯¯</td><td>400</td></tr><tr><td>1002</td><td>è®¤è¯å¤±è´¥</td><td>401</td></tr><tr><td>1003</td><td>æƒé™ä¸è¶³</td><td>403</td></tr><tr><td>1004</td><td>èµ„æºä¸å­˜åœ¨</td><td>404</td></tr><tr><td>1005</td><td>å†…éƒ¨é”™è¯¯</td><td>500</td></tr><tr><td>1006</td><td>æœåŠ¡ä¸å¯ç”¨</td><td>503</td></tr></tbody></table>
<h3 data-id="heading-20">7. é€‚ç”¨èŒƒå›´</h3>
<p>æœ¬åè®®é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>ä¼ä¸šçº§æ™ºèƒ½ä½“ç³»ç»Ÿ</li>
<li>è·¨å¹³å°æŠ€èƒ½æœåŠ¡é›†æˆ</li>
<li>èµ„æºç®¡ç†ä¸ç›‘æ§ç³»ç»Ÿ</li>
<li>å¤šæ™ºèƒ½ä½“ååŒåº”ç”¨</li>
</ul>
<h3 data-id="heading-21">9. ç‰ˆæƒå£°æ˜</h3>
<p>MIT License</p>
<p>Copyright (c) 2026 Ooder Technology Co., Ltd.</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this document and associated documentation files, to deal
in the document without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the document, and to permit persons to whom the document is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the document.</p>
<p>THE DOCUMENT IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE DOCUMENT OR THE USE OR OTHER DEALINGS IN THE
DOCUMENT.</p>
<hr/>
<p><strong>Ooder Technology Co., Ltd.</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•æ­£ç¡®å®‰è£…å¹¶é…ç½® Claude Codeï¼Ÿä»ç¯å¢ƒæ­å»ºåˆ° Router é«˜çº§ç”¨æ³•]]></title>    <link>https://juejin.cn/post/7596276978808635435</link>    <guid>https://juejin.cn/post/7596276978808635435</guid>    <pubDate>2026-01-18T11:13:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596276978808635435" data-draft-id="7596276978807685163" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•æ­£ç¡®å®‰è£…å¹¶é…ç½® Claude Codeï¼Ÿä»ç¯å¢ƒæ­å»ºåˆ° Router é«˜çº§ç”¨æ³•"/> <meta itemprop="keywords" content="AIGC,Claude,Xcode"/> <meta itemprop="datePublished" content="2026-01-18T11:13:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŸ³äº‘å‡"/> <meta itemprop="url" content="https://juejin.cn/user/642537280772456"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•æ­£ç¡®å®‰è£…å¹¶é…ç½® Claude Codeï¼Ÿä»ç¯å¢ƒæ­å»ºåˆ° Router é«˜çº§ç”¨æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/642537280772456/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŸ³äº‘å‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T11:13:14.000Z" title="Sun Jan 18 2026 11:13:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto;border:3px solid rgba(62,175,124,.2)}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-weight:700;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:6px;border:2px solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c}.markdown-body a:active,.markdown-body a:hover{border-bottom:1.5px solid #3eaf7c}.markdown-body a:before{content:"â‡²"}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(62,175,124,.2)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:.5rem solid;border-color:#42b983;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none}.markdown-body ul li:before{content:"â€¢";margin-right:4px;color:#3eaf7c}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å®‰è£… Node.jsï¼š</h2>
<pre><code class="hljs language-bash" lang="bash">https://nodejs.org/dist/v24.12.0/node-v24.12.0-x64.msi
</code></pre>
<h2 data-id="heading-1">å®‰è£… Claude Code</h2>
<p>æ‰“å¼€ CMDï¼Œè¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g @anthropic-ai/claude-code
</code></pre>
<p>å®‰è£…å®ŒæˆåéªŒè¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">claude <span class="hljs-attr">--version</span>
</code></pre>
<p>å®‰è£…æˆåŠŸä¼šè¾“å‡ºç‰ˆæœ¬å·ï¼Œå¦‚æœæŠ¥é”™ï¼Œè¯·æŠŠé”™è¯¯ä¿¡æ¯å‘ç»™deepseekï¼Œå…ƒå®è¿™ç±»AIå·¥å…·ã€‚å®ƒä»¬ä¼šå‘Šè¯‰ä½ è§£å†³æ–¹æ¡ˆçš„ã€‚</p>
<h2 data-id="heading-2">é…ç½® settings.json</h2>
<p>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">C:\Users\ä½ çš„ç”¨æˆ·å.claude\settings.json</span>
</code></pre>
<p>å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"ANTHROPIC_AUTH_TOKEN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sk-xxx"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ANTHROPIC_BASE_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"urlåœ°å€"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"API_TIMEOUT_MS"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3000000"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ANTHROPIC_MODEL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"claude-sonnet-4-5-20250929"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"alwaysThinkingEnabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ³¨æ„ï¼šæ–‡ä»¶è·¯å¾„æŠŠä½ çš„ç”¨æˆ·åæ›¿æ¢æˆä½ Windowsçš„å®é™…ç”¨æˆ·åï¼ŒæŠŠ url,API Keyå’Œæ¨¡å‹æˆä½ ä½¿ç”¨çš„ã€‚æ¯”å¦‚GLMï¼Œè±†åŒ…æˆ–è€…å…¶ä¸­claude codeä¸­è½¬æ–¹éƒ½å¯ä»¥ã€‚</p>
<h2 data-id="heading-3">Claude Code Router</h2>
<p>å¦‚æœæœ‰å¤šä¸ªæ¸ é“è¦çµæ´»åˆ‡æ¢æ¨¡å‹ä½¿ç”¨ï¼Œæ¨èå®‰è£…Claude Code Routerï¼Œ</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g @musistudio/claude-code-router
</code></pre>
<p>ç„¶ååœ¨é»˜è®¤è·¯å¾„ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">C:\Users\ä½ çš„ç”¨æˆ·å.claude-code-router</span>
</code></pre>
<p>è¿™é‡Œçš„ä½ çš„ç”¨æˆ·åè·¯å¾„ä»¥ä½ ç”µè„‘é»˜è®¤è·¯å¾„ä¸ºå‡†ã€‚ä¸‹é¢æ˜¯æˆ‘æœ¬åœ°å‚è€ƒå¦‚ä¸‹é…ç½®ï¼Œç¤ºä¾‹éƒ½æ˜¯å›½å†…æ¨¡å‹ï¼Œå®é™…ä¸Šä½ é…ç½®claudeç³»åˆ—æ¨¡å‹ä¹Ÿéƒ½æ˜¯å¯ä»¥ç”¨çš„ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"LOG"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"LOG_LEVEL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"debug"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"CLAUDE_PATH"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"HOST"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"127.0.0.1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"PORT"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3456</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"APIKEY"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"API_TIMEOUT_MS"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"600000"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"PROXY_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"transformers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"Providers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"new-api"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"api_base_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://192.168.77.235:3011/v1/chat/completions"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"api_key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sk-xx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"models"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"MiniMax-M2.1"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"ZhipuAI/GLM-4.7"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"ZhipuAI/GLM-4.6"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"gemini-2.5-flash"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"gemini-2.5-pro"</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"StatusLine"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"currentStyle"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"default"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"modules"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"powerline"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"modules"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"Router"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"new-api,MiniMax-M2.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"background"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"new-api,ZhipuAI/GLM-4.6"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"think"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"new-api,ZhipuAI/GLM-4.7"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"longContext"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"new-api,ZhipuAI/GLM-4.7"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"longContextThreshold"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">60000</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"webSearch"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"new-api,gemini-2.5-flash"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"image"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"new-api,gemini-2.5-flash"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"CUSTOM_ROUTER_PATH"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä¹Ÿå¯ä»¥é€šè¿‡å¯è§†åŒ–UIæ¥è¿›è¡Œé…ç½®ã€‚</p>
<pre><code class="hljs">ccr ui
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37315fad33a74695815ff5be75a71ea5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-z5LqR5Y2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769339594&amp;x-signature=21%2BOTppmod6zJ616T0Pllv28YWY%3D" alt="" loading="lazy"/></p>
<p>é…ç½®ä¹‹åè¦é‡å¯è¿è¡Œã€‚ä½¿ç”¨çš„è¯å¾ˆç®€å•ï¼Œåœ¨å‘½ä»¤è¡Œé‡Œï¼Œæ‰§è¡Œ</p>
<pre><code class="hljs language-css" lang="css">ccr restart 
ccr <span class="hljs-selector-tag">code</span>
</code></pre>
<p>ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯ç”¨ç¼–è¾‘å™¨æ‰“å¼€æŸä¸ªé¡¹ç›®ï¼Œåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œccr codeå‘½ä»¤ã€‚æ‰§è¡Œå®Œä¹‹åï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„é¡µé¢æ•ˆæœã€‚åé¢ç›´æ¥å¯¹è¯äº¤æµéœ€æ±‚å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/322b90977a2d4bc990953f0567269ceb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-z5LqR5Y2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769339594&amp;x-signature=oO40a%2FaLyOjm%2BQOzF4YylGlNjeE%3D" alt="" loading="lazy"/></p>
<p>CCRè¯¦ç»†çš„æ–‡æ¡£å¦‚ä¸‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmusistudio%2Fclaude-code-router%2Fblob%2Fmain%2FREADME_zh.md" target="_blank" title="https://github.com/musistudio/claude-code-router/blob/main/README_zh.md" ref="nofollow noopener noreferrer">github.com/musistudio/â€¦</a></p>
<p>è¿™é‡Œä¸»è¦ä½¿ç”¨çš„æ˜¯é­”å¡”ç¤¾åŒºçš„GLM-4.7æ¨¡å‹ï¼Œç›®å‰æ¯å¤©æ¯ä¸ªè´¦å·å¯ä»¥ä½¿ç”¨100æ¬¡ã€‚æ¨èæ³¨å†ŒIflowï¼Œç›®å‰ä½¿ç”¨GLM4.6æ¨¡å‹æ˜¯å…è´¹çš„ï¼Œåœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.iflow.cn%2Fmodels" target="_blank" title="https://platform.iflow.cn/models" ref="nofollow noopener noreferrer">platform.iflow.cn/models</a></p>
<p>åœ¨ccr uiå¯¹å¡«å†™iflowçš„åœ°å€å’Œapiå°±å¯ä»¥äº†ï¼Œç›®å‰å›½äº§æ¨¡å‹æ•ˆæœå†™äº§å“åŸå‹å’Œç®€å•åº”ç”¨è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚å‚è€ƒä¸‹é¢é…ç½®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4419a4ab39d14a3294abf6e6c4833917~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-z5LqR5Y2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769339594&amp;x-signature=FyPpUN36QLwpkQ1DxkLmKHS%2F2Y4%3D" alt="" loading="lazy"/></p>
<p>ä½¿ç”¨ä»€ä¹ˆæ¨¡å‹éƒ½åœ¨è·¯ç”±ä¸­è¿™é‡Œé…ç½®ï¼Œé…ç½®åè®°å¾—ç‚¹å³ä¸Šè§’çš„ä¿å­˜å¹¶é‡å¯ã€‚é‡å¯åï¼Œccr codeé‡Œè¿è¡Œçš„æ¨¡å‹ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0b9b03a41444e8cbd4a26905bba3795~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-z5LqR5Y2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769339594&amp;x-signature=neLDZ8sCWLpfzKWeFqqG09NCjE0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">å†…ç½®æç¤ºè¯é…ç½®</h2>
<p>ä½¿ç”¨ccæˆ–è€…ccréƒ½å¯ä»¥é…ç½®å†…ç½®æç¤ºè¯ï¼Œåœ¨ç”µè„‘çš„é»˜è®¤è·¯å¾„ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">C:\Users\ä½ çš„ç”¨æˆ·å.claude</span>
<span class="hljs-section">C:\Users\ä½ çš„ç”¨æˆ·å.claude-code-router </span>
</code></pre>
<p>æ‰¾åˆ°CLAUDE.md</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## Development Partnership</span>
I'll help you build frontend code and prototypes. I'll handle implementation details while you guide the overall vision and requirements.

<span class="hljs-section">## Core Workflow: Research â†’ Plan â†’ Implement â†’ Validate</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**Research**</span>: Understand existing patterns and frontend architecture
<span class="hljs-bullet">-</span> <span class="hljs-strong">**Plan**</span>: Propose frontend approach and get your approval
<span class="hljs-bullet">-</span> <span class="hljs-strong">**Implement**</span>: Build with proper component structure and error handling
<span class="hljs-bullet">-</span> <span class="hljs-strong">**Validate**</span>: Run formatters, linters, and test in browser compatibility

<span class="hljs-section">## Frontend Code Organization</span>
<span class="hljs-bullet">-</span> Keep components small and focused
<span class="hljs-bullet">-</span> Use clear naming conventions for files and functions
<span class="hljs-bullet">-</span> Follow component composition patterns
<span class="hljs-bullet">-</span> Group related UI elements logically

<span class="hljs-section">## Frontend Architecture Principles</span>
<span class="hljs-bullet">-</span> Prefer explicit over implicit:
<span class="hljs-bullet">  -</span> Clear component names over clever abstractions
<span class="hljs-bullet">  -</span> Obvious data flow over hidden state management
<span class="hljs-bullet">  -</span> Direct props passing over deep context when possible
<span class="hljs-bullet">-</span> Delete old code completely - no need for deprecation in prototypes
<span class="hljs-bullet">-</span> Optimize for readability and maintainability

<span class="hljs-section">## JavaScript/TypeScript Development Standards</span>
<span class="hljs-bullet">-</span> Use TypeScript types instead of <span class="hljs-code">`any`</span> when possible
<span class="hljs-bullet">-</span> Early returns to reduce nesting
<span class="hljs-bullet">-</span> Proper error handling in user interactions and API calls
<span class="hljs-bullet">-</span> Consistent component structure
<span class="hljs-bullet">-</span> Clear comments for complex UI logic

<span class="hljs-section">## UI/UX Considerations</span>
<span class="hljs-bullet">-</span> Focus on responsive design principles
<span class="hljs-bullet">-</span> Consider accessibility in component design
<span class="hljs-bullet">-</span> Implement consistent styling patterns
<span class="hljs-bullet">-</span> Optimize for performance on common devices

<span class="hljs-section">## Problem Solving</span>
When stuck: Stop and look for simpler solutions
When uncertain: "Let me think about different UI approaches"
When choosing: "I see approach A (simpler) vs B (more flexible). Which do you prefer?"

<span class="hljs-section">## Testing Strategy for Frontend</span>
<span class="hljs-bullet">-</span> Test critical user flows
<span class="hljs-bullet">-</span> Ensure browser compatibility
<span class="hljs-bullet">-</span> Validate responsive behavior
<span class="hljs-bullet">-</span> Check performance on key interactions

<span class="hljs-section">## Progress Tracking</span>
<span class="hljs-bullet">-</span> Use TodoWrite comments for tracking next steps
<span class="hljs-bullet">-</span> Maintain clear documentation of component usage
</code></pre>
<p>åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œccå’Œccræ˜¯ç‹¬ç«‹çš„ã€‚ä¹Ÿå°±æ˜¯ä½ å¯ä»¥åœ¨ä¸€ä¸ªç»ˆç«¯ä½¿ç”¨ccï¼Œå¦ä¸€ä¸ªç»ˆç«¯ä½¿ç”¨ä½¿ç”¨ccrã€‚åˆ°è¿™ä¸€æ­¥åŸºæœ¬ä¸Šä½ å°±èƒ½éå¸¸çµæ´»çš„ä½¿ç”¨claude codeäº†ã€‚è‡³äºåé¢çš„CMPï¼Œskillséƒ½æ˜¯è¿›é˜¶ï¼Œç”¨èµ·æ¥ä¹‹åå†å­¦ä¸è¿Ÿã€‚</p>
<hr/>
<p>å…³äºä½œè€…ï¼šçŸ³äº‘å‡ï½œAIåšä¸» &amp; AIä¼ä¸šè½åœ°å¸ˆï¼Œä¸“æ³¨ä¼ä¸šAIè½åœ°ä¸ä¸šåŠ¡æµç¨‹é‡æ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5e064fb73d44992850270052da7affb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-z5LqR5Y2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769339594&amp;x-signature=yqIccn3jT4dEyW1l1YYnMfjdYGQ%3D" alt="image_w2752_h1536_ç­¾åå›¾_16x9_v4.jpeg" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React äº‹ä»¶ç»‘å®šå…¨æ”»ç•¥ï¼š5ç§æ–¹å¼ä¼˜åŠ£å¤§æ¯”æ‹¼]]></title>    <link>https://juejin.cn/post/7596299957277933595</link>    <guid>https://juejin.cn/post/7596299957277933595</guid>    <pubDate>2026-01-18T11:16:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596299957277933595" data-draft-id="7596166721628061742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React äº‹ä»¶ç»‘å®šå…¨æ”»ç•¥ï¼š5ç§æ–¹å¼ä¼˜åŠ£å¤§æ¯”æ‹¼"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2026-01-18T11:16:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React äº‹ä»¶ç»‘å®šå…¨æ”»ç•¥ï¼š5ç§æ–¹å¼ä¼˜åŠ£å¤§æ¯”æ‹¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T11:16:37.000Z" title="Sun Jan 18 2026 11:16:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React äº‹ä»¶ç»‘å®šå…¨æ”»ç•¥ï¼š5ç§æ–¹å¼ä¼˜åŠ£å¤§æ¯”æ‹¼</h2>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆäº‹ä»¶ç»‘å®šè¿™ä¹ˆé‡è¦ï¼Ÿ</h3>
<p>åœ¨Reactä¸­ï¼Œäº‹ä»¶ç»‘å®šä¸ä»…ä»…æ˜¯æŠŠå‡½æ•°å’Œå…ƒç´ è¿æ¥èµ·æ¥é‚£ä¹ˆç®€å•ã€‚å®ƒå…³ç³»åˆ°ï¼š</p>
<ul>
<li>â€¢ ç»„ä»¶çš„æ€§èƒ½è¡¨ç°</li>
<li>â€¢ ä»£ç çš„å¯ç»´æŠ¤æ€§</li>
<li>â€¢ thisæŒ‡å‘çš„æ­£ç¡®æ€§</li>
<li>â€¢ å†…å­˜æ³„æ¼çš„é˜²èŒƒ</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹Reactäº‹ä»¶ç»‘å®šçš„5ç§ä¸»è¦æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬å„è‡ªçš„â€œæ€§æ ¼ç‰¹ç‚¹â€ã€‚</p>
<h3 data-id="heading-2">æ–¹å¼ä¸€ï¼šç®­å¤´å‡½æ•°å†…è”ç»‘å®š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">Button</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_ inherited__">React.Component</span>Â {
Â Â <span class="hljs-title function_">render</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â (
Â Â Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span>Â =&gt;</span>Â this.handleClick()}&gt;
Â Â Â Â Â Â Â Â ç‚¹å‡»æˆ‘
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
Â Â Â Â );
Â Â }
Â Â 
Â Â <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‰é’®è¢«ç‚¹å‡»äº†'</span>);
Â Â }
}
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>â€¢ è¯­æ³•ç®€æ´ç›´è§‚</li>
<li>â€¢ æ— éœ€æ‹…å¿ƒthisæŒ‡å‘é—®é¢˜</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>â€¢Â <strong>æ€§èƒ½é™·é˜±</strong>ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°çš„å‡½æ•°å®ä¾‹</li>
<li>â€¢ ä¸åˆ©äºå­ç»„ä»¶çš„shouldComponentUpdateä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-3">æ–¹å¼äºŒï¼šæ„é€ å‡½æ•°å†…ç»‘å®š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">Button</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_ inherited__">React.Component</span>Â {
Â Â <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>)Â {
Â Â Â Â <span class="hljs-variable language_">super</span>(props);
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>Â =Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
Â Â }
Â Â 
Â Â <span class="hljs-title function_">render</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleClick}</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
Â Â }
Â Â 
Â Â <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‰é’®è¢«ç‚¹å‡»äº†'</span>);
Â Â }
}
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>â€¢ æ€§èƒ½æœ€ä½³ï¼Œå‡½æ•°åªåœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šä¸€æ¬¡</li>
<li>â€¢ æ”¯æŒshouldComponentUpdateä¼˜åŒ–</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>â€¢ ä»£ç ç¨æ˜¾å†—é•¿</li>
<li>â€¢ éœ€è¦ç»´æŠ¤æ„é€ å‡½æ•°ä¸­çš„ç»‘å®š</li>
</ul>
<h3 data-id="heading-4">æ–¹å¼ä¸‰ï¼šç±»å±æ€§ç®­å¤´å‡½æ•°ï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">Button</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_ inherited__">React.Component</span>Â {
Â Â handleClickÂ =Â <span class="hljs-function">()Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‰é’®è¢«ç‚¹å‡»äº†'</span>);
Â Â };
Â Â 
Â Â <span class="hljs-title function_">render</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleClick}</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
Â Â }
}
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>â€¢ è¯­æ³•ç®€æ´ç¾è§‚</li>
<li>â€¢ thisæ°¸è¿œæŒ‡å‘ç»„ä»¶å®ä¾‹</li>
<li>â€¢ æ€§èƒ½ä¼˜ç§€ï¼ˆå‡½æ•°åªåˆ›å»ºä¸€æ¬¡ï¼‰</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>â€¢ éœ€è¦Babelæ’ä»¶æ”¯æŒï¼ˆclass propertiesï¼‰</li>
<li>â€¢ ä¸å±äºESæ ‡å‡†è¯­æ³•ï¼ˆä½†å·²æˆä¸ºäº‹å®æ ‡å‡†ï¼‰</li>
</ul>
<h3 data-id="heading-5">æ–¹å¼å››ï¼šrenderä¸­bindç»‘å®š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">Button</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_ inherited__">React.Component</span>Â {
Â Â <span class="hljs-title function_">render</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â (
Â Â Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleClick.bind(this)}</span>&gt;</span>
Â Â Â Â Â Â Â Â ç‚¹å‡»æˆ‘
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
Â Â Â Â );
Â Â }
Â Â 
Â Â <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‰é’®è¢«ç‚¹å‡»äº†'</span>);
Â Â }
}
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>â€¢ ç®€å•ç›´æ¥</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>â€¢Â <strong>æ€§èƒ½æœ€å·®</strong>ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°ç»‘å®š</li>
<li>â€¢ ä»£ç å¯è¯»æ€§é™ä½</li>
<li>â€¢ ä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨</li>
</ul>
<h3 data-id="heading-6">æ–¹å¼äº”ï¼šå‡½æ•°ç»„ä»¶ä¸­çš„äº‹ä»¶ç»‘å®š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>Â <span class="hljs-title function_">Button</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-title function_">handleClick</span>Â =Â (<span class="hljs-params"/>)Â =&gt;Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‰é’®è¢«ç‚¹å‡»äº†'</span>);
Â Â };
Â Â 
Â Â <span class="hljs-comment">//Â æˆ–è€…ä½¿ç”¨useCallbackä¼˜åŒ–</span>
Â Â <span class="hljs-keyword">const</span>Â memoizedHandleClickÂ =Â <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useCallback</span>(<span class="hljs-function">()Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‰é’®è¢«ç‚¹å‡»äº†'</span>);
Â Â },Â []);
Â Â 
Â Â <span class="hljs-keyword">return</span>Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>â€¢ æœ€é€‚åˆå‡½æ•°ç»„ä»¶</li>
<li>â€¢ useCallbackå¯ä»¥ä¼˜åŒ–æ€§èƒ½</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>â€¢ å¯¹äºç®€å•äº‹ä»¶å¯èƒ½æ˜¾å¾—â€œæ€é¸¡ç”¨ç‰›åˆ€â€</li>
</ul>
<h3 data-id="heading-7">æ€§èƒ½å¯¹æ¯”å®æµ‹</h3>
<p>è®©æˆ‘ä»¬ç”¨æ•°æ®è¯´è¯ï¼š</p>









































<table><thead><tr><th>ç»‘å®šæ–¹å¼</th><th>æ¯æ¬¡æ¸²æŸ“æ–°å»ºå‡½æ•°</th><th>å†…å­˜å ç”¨</th><th>é€‚åˆåœºæ™¯</th></tr></thead><tbody><tr><td>ç®­å¤´å‡½æ•°å†…è”</td><td>æ˜¯</td><td>é«˜</td><td>ç®€å•ç»„ä»¶ã€åŸå‹éªŒè¯</td></tr><tr><td>æ„é€ å‡½æ•°ç»‘å®š</td><td>å¦</td><td>ä½</td><td>æ€§èƒ½æ•æ„Ÿç»„ä»¶</td></tr><tr><td>ç±»å±æ€§ç®­å¤´å‡½æ•°</td><td>å¦</td><td>ä½</td><td>ä¸»æµClassç»„ä»¶</td></tr><tr><td>renderä¸­bind</td><td>æ˜¯</td><td>é«˜</td><td>ä¸æ¨èä½¿ç”¨</td></tr><tr><td>å‡½æ•°ç»„ä»¶+useCallback</td><td>å¯é€‰</td><td>ä¸­ç­‰</td><td>å‡½æ•°ç»„ä»¶</td></tr></tbody></table>
<h3 data-id="heading-8">å®æˆ˜å»ºè®®</h3>
<h4 data-id="heading-9">1. Classç»„ä»¶ä¼˜å…ˆé€‰æ‹©</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â æ¨èï¼šç±»å±æ€§ç®­å¤´å‡½æ•°</span>
<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">Profile</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_ inherited__">React.Component</span>Â {
Â Â handleFollowÂ =Â <span class="hljs-keyword">async</span>Â ()Â =&gt;Â {
Â Â Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">followUser</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">userId</span>);
Â Â };
Â Â 
Â Â <span class="hljs-comment">//Â å¯¹äºéœ€è¦å‚æ•°çš„äº‹ä»¶</span>
Â Â handleSelectItemÂ =Â <span class="hljs-function">(<span class="hljs-params">itemId</span>)Â =&gt;</span>Â <span class="hljs-function">()Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({Â <span class="hljs-attr">selectedItem</span>:Â itemIdÂ });
Â Â };
Â Â 
Â Â <span class="hljs-title function_">render</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â (
Â Â Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleFollow}</span>&gt;</span>å…³æ³¨<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â Â Â {items.map(itemÂ =&gt;Â (
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleSelectItem(item.id)}</span>
Â Â Â Â Â Â Â Â Â Â &gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â {item.name}
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â Â Â ))}
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â Â Â );
Â Â }
}
</code></pre>
<h4 data-id="heading-10">2. å‡½æ•°ç»„ä»¶æ³¨æ„äº‹é¡¹</h4>
<pre><code class="hljs language-scss" lang="scss">functionÂ <span class="hljs-built_in">SearchBox</span>({Â onSearchÂ })Â {
Â Â constÂ <span class="hljs-selector-attr">[query,Â setQuery]</span>Â =Â <span class="hljs-built_in">useState</span>('');
Â Â 
Â Â <span class="hljs-comment">//Â å¥½çš„åšæ³•ï¼šuseCallbacké¿å…å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ¸²æŸ“</span>
Â Â constÂ handleSearchÂ =Â <span class="hljs-built_in">useCallback</span>(()Â =&gt;Â {
Â Â Â Â <span class="hljs-built_in">onSearch</span>(query);
Â Â },Â <span class="hljs-selector-attr">[query,Â onSearch]</span>);
Â Â 
Â Â <span class="hljs-comment">//Â åçš„åšæ³•ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½æ–°å»ºå‡½æ•°</span>
Â Â constÂ handleChangeÂ =Â (e)Â =&gt;Â {
Â Â Â Â <span class="hljs-built_in">setQuery</span>(e.target.value);
Â Â };
Â Â 
Â Â <span class="hljs-comment">//Â å¥½çš„åšæ³•ï¼šç®€å•çš„setStateå¯ä»¥ç›´æ¥å†…è”</span>
Â Â constÂ handleChangeÂ =Â (e)Â =&gt;Â <span class="hljs-built_in">setQuery</span>(e.target.value);
Â Â 
Â Â returnÂ &lt;<span class="hljs-selector-tag">input</span>Â value={query}Â onChange={handleChange}Â /&gt;;
}
</code></pre>
<h4 data-id="heading-11">3. äº‹ä»¶ç»‘å®šä¼˜åŒ–æŠ€å·§</h4>
<p><strong>æŠ€å·§ä¸€ï¼šäº‹ä»¶å§”æ‰˜</strong></p>
<pre><code class="hljs language-ini" lang="ini">classÂ ListÂ extendsÂ React.ComponentÂ {
Â Â <span class="hljs-attr">handleClick</span>Â =Â (e)Â =&gt;Â {
Â Â Â Â ifÂ (<span class="hljs-attr">e.target.tagName</span>Â ===Â <span class="hljs-string">'LI'</span>)Â {
Â Â Â Â Â Â constÂ <span class="hljs-attr">id</span>Â =Â e.target.dataset.id<span class="hljs-comment">;</span>
Â Â Â Â Â Â this.handleItemClick(id)<span class="hljs-comment">;</span>
Â Â Â Â }
Â Â }<span class="hljs-comment">;</span>
Â Â 
Â Â render()Â {
Â Â Â Â returnÂ (
Â Â Â Â Â Â &lt;ulÂ <span class="hljs-attr">onClick</span>={this.handleClick}&gt;
Â Â Â Â Â Â Â Â {this.props.items.map(<span class="hljs-attr">item</span>Â =&gt;Â (
Â Â Â Â Â Â Â Â Â Â &lt;liÂ <span class="hljs-attr">key</span>={item.id}Â data-id={item.id}&gt;
Â Â Â Â Â Â Â Â Â Â Â Â {item.text}
Â Â Â Â Â Â Â Â Â Â &lt;/li&gt;
Â Â Â Â Â Â Â Â ))}
Â Â Â Â Â Â &lt;/ul&gt;
Â Â Â Â )<span class="hljs-comment">;</span>
Â Â }
}
</code></pre>
<p><strong>æŠ€å·§äºŒï¼šåˆæˆäº‹ä»¶ä¸åŸç”Ÿäº‹ä»¶</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">Modal</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_ inherited__">React.Component</span>Â {
Â Â <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â åœ¨documentä¸Šç»‘å®šåŸç”Ÿäº‹ä»¶</span>
Â Â Â Â <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>,Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleKeyDown</span>);
Â Â }
Â Â 
Â Â <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â ä¸€å®šè¦è®°å¾—ç§»é™¤ï¼</span>
Â Â Â Â <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'keydown'</span>,Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleKeyDown</span>);
Â Â }
Â Â 
Â Â handleKeyDownÂ =Â <span class="hljs-function">(<span class="hljs-params">e</span>)Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (e.<span class="hljs-property">key</span>Â ===Â <span class="hljs-string">'Escape'</span>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">onClose</span>();
Â Â Â Â }
Â Â };
Â Â 
Â Â <span class="hljs-comment">//Â Reactåˆæˆäº‹ä»¶</span>
Â Â handleOverlayClickÂ =Â <span class="hljs-function">(<span class="hljs-params">e</span>)Â =&gt;</span>Â {
Â Â Â Â e.<span class="hljs-title function_">stopPropagation</span>();
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">onClose</span>();
Â Â };
}
</code></pre>
<h3 data-id="heading-12">å¸¸è§å‘ç‚¹ä¸é¿é›·æŒ‡å—</h3>
<h4 data-id="heading-13">ğŸš« å‘ç‚¹1ï¼šå¿˜è®°ç»‘å®šthis</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">BadExample</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_ inherited__">React.Component</span>Â {
Â Â <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â è¿™é‡Œthisæ˜¯undefinedï¼</span>
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">message</span>);
Â Â }
Â Â 
Â Â <span class="hljs-title function_">render</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleClick}</span>&gt;</span>ç‚¹æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
Â Â }
}
</code></pre>
<h4 data-id="heading-14">ğŸš« å‘ç‚¹2ï¼šå†…è”ç®­å¤´å‡½æ•°å¯¼è‡´æ€§èƒ½é—®é¢˜</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â åœ¨é•¿åˆ—è¡¨ä¸­è¿™æ ·åšä¼šéå¸¸å¡é¡¿</span>
<span class="hljs-title function_">render</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-keyword">return</span>Â (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â {items.map(itemÂ =&gt;Â (
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Item</span>Â 
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span>Â =&gt;</span>Â this.handleSelect(item.id)}Â Â //Â æ¯æ¬¡æ¸²æŸ“éƒ½æ–°å»ºå‡½æ•°
Â Â Â Â Â Â Â Â /&gt;
Â Â Â Â Â Â ))}
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â );
}

<span class="hljs-comment">//Â æ”¹è¿›æ–¹æ¡ˆ</span>
<span class="hljs-title function_">render</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-keyword">return</span>Â (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â {items.map(itemÂ =&gt;Â (
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Item</span>Â 
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleSelect}</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">data-id</span>=<span class="hljs-string">{item.id}</span>
Â Â Â Â Â Â Â Â /&gt;</span>
Â Â Â Â Â Â ))}
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â );
}
</code></pre>
<h3 data-id="heading-15">æ€»ç»“</h3>
<ol>
<li>1.Â <strong>Classç»„ä»¶</strong>ï¼šä¼˜å…ˆä½¿ç”¨ç±»å±æ€§ç®­å¤´å‡½æ•°ï¼ˆ<code>handleClick = () =&gt; {}</code>ï¼‰</li>
<li>2.Â <strong>å‡½æ•°ç»„ä»¶</strong>ï¼šç®€å•äº‹ä»¶å¯ç›´æ¥å®šä¹‰ï¼Œå¤æ‚äº‹ä»¶è€ƒè™‘<code>useCallback</code></li>
<li>3.Â <strong>æ€§èƒ½å…³é”®</strong>ï¼šé¿å…åœ¨renderä¸­åˆ›å»ºæ–°å‡½æ•°ï¼Œç‰¹åˆ«åœ¨åˆ—è¡¨æ¸²æŸ“ä¸­</li>
<li>4.Â <strong>å†…å­˜ç®¡ç†</strong>ï¼šç»‘å®šåœ¨å…¨å±€æˆ–documentä¸Šçš„äº‹ä»¶ï¼Œä¸€å®šè¦åœ¨ç»„ä»¶å¸è½½æ—¶ç§»é™¤</li>
</ol>
<p>é€‰æ‹©åˆé€‚çš„äº‹ä»¶ç»‘å®šæ–¹å¼ï¼Œèƒ½è®©ä½ çš„Reactåº”ç”¨è¿è¡Œå¾—æ›´æµç•…ï¼Œä»£ç ä¹Ÿæ›´æ˜“äºç»´æŠ¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ç®—æ³•å¯¼è®ºã€‘WYLH 0928ç¬”è¯•é¢˜è§£]]></title>    <link>https://juejin.cn/post/7596153767872708642</link>    <guid>https://juejin.cn/post/7596153767872708642</guid>    <pubDate>2026-01-18T12:01:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596153767872708642" data-draft-id="7555336888901517363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ç®—æ³•å¯¼è®ºã€‘WYLH 0928ç¬”è¯•é¢˜è§£"/> <meta itemprop="keywords" content="é¢è¯•,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-18T12:01:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="PAKå‘æ—¥è‘µ"/> <meta itemprop="url" content="https://juejin.cn/user/3544481220008744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ç®—æ³•å¯¼è®ºã€‘WYLH 0928ç¬”è¯•é¢˜è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3544481220008744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    PAKå‘æ—¥è‘µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T12:01:56.000Z" title="Sun Jan 18 2026 12:01:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf6009a609aa4befb54d5596baec70f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEFL5ZCR5pel6JG1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769342516&amp;x-signature=OQ%2BdGP2eVS7aDTKmJ2NdagZRiI0%3D" alt="G9gYq88acAARaL9.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">RPCè°ƒç”¨åè®®</h2>
<p>æœ‰ä¸€ä¸ªæœåŠ¡å™¨å¯¹å¤–æä¾›è‹¥å¹²ä¸ªå¯è¢« RPC è°ƒç”¨çš„å‡½æ•°ã€‚æ¯ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªç¼–å·ã€ä¸€ä¸ªå‡½æ•°åå’Œä¸€ä¸²å‚æ•°ç±»å‹æè¿°ï¼ˆæ¯ä¸ªå‚æ•°ç±»å‹ä¸º <code>i</code> è¡¨ç¤º 4 å­—èŠ‚æ•´æ•°ï¼Œæˆ– <code>s</code> è¡¨ç¤ºå­—ç¬¦ä¸²ï¼‰ã€‚ç°åœ¨ç»™å®šå‡½æ•°è¡¨å’Œä¸€ä¸ªä»¥<strong>åå…­è¿›åˆ¶å­—ç¬¦ä¸²</strong>è¡¨ç¤ºçš„ RPC æ•°æ®æµï¼ˆå¯èƒ½åŒ…å«å¤šæ¡ RPC è°ƒç”¨è¿åœ¨ä¸€èµ·ï¼‰ï¼Œè¦æ±‚æŠŠæ•°æ®æµè§£æä¸ºå¯è¯»çš„å‡½æ•°è°ƒç”¨æ ¼å¼å¹¶æ‰“å°å‡ºæ¥ã€‚</p>
<p>æ•°æ®æµçš„å…·ä½“ç¼–ç è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>æ•´ä¸ª RPC æ•°æ®æµç”¨<strong>å¤§å†™åå…­è¿›åˆ¶å­—ç¬¦</strong>è¡¨ç¤ºï¼ˆå­—ç¬¦é›†åˆÂ <code>0-9</code>Â å’ŒÂ <code>A-F</code>ï¼‰ï¼Œæ¯ä¸ªå­—èŠ‚ç”¨ä¸¤ä¸ªåå…­è¿›åˆ¶å­—ç¬¦è¡¨ç¤ºã€‚</p>
</li>
<li>
<p>æ¯æ¡ RPC è°ƒç”¨çš„äºŒè¿›åˆ¶å¸ƒå±€ä¸ºï¼š</p>
<ol>
<li>
<p><strong>1 å­—èŠ‚</strong>ï¼šå‡½æ•°ç¼–å·ï¼ˆfunction idï¼‰ã€‚</p>
</li>
<li>
<p>ç´§è·Ÿç€Â <strong>ä¸ºè¯¥å‡½æ•°æ‰€æœ‰å­—ç¬¦ä¸²å‚æ•°ï¼ˆ<code>s</code>ï¼‰åˆ†åˆ«ç»™å‡ºé•¿åº¦çš„å­—èŠ‚</strong>Â â€”â€” å³è‹¥å‡½æ•°å®šä¹‰ä¸­æœ‰ k ä¸ªÂ <code>s</code>ï¼Œåœ¨æœ¬æ¡è°ƒç”¨ä¸­ä¼šç´§æ¥ç€æœ‰ k ä¸ªå­—èŠ‚ï¼Œåˆ†åˆ«è¡¨ç¤ºæ¯ä¸ªå­—ç¬¦ä¸²å‚æ•°çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚è®¡ï¼‰ï¼Œé¡ºåºä¸å‚æ•°å®šä¹‰ä¸­Â <code>s</code>Â çš„å‡ºç°é¡ºåºä¸€è‡´ã€‚</p>
</li>
<li>
<p>ç„¶åæŒ‰å‚æ•°é¡ºåºä¾æ¬¡æ”¾ç½®å‚æ•°çš„å…·ä½“æ•°æ®ï¼š</p>
</li>
</ol>
<ul>
<li>è‹¥å‚æ•°ç±»å‹ä¸ºÂ <code>i</code>ï¼Œå Â <strong>4 å­—èŠ‚</strong>ï¼Œé‡‡ç”¨Â <strong>å¤§ç«¯</strong>ï¼ˆé«˜ä½å­—èŠ‚åœ¨å‰ï¼‰è¡¨ç¤ºä¸€ä¸ªæ•´æ•°ï¼Œè¾“å‡ºæ—¶æŒ‰åè¿›åˆ¶æ‰“å°ã€‚</li>
<li>è‹¥å‚æ•°ç±»å‹ä¸ºÂ <code>s</code>ï¼Œå Â <code>len</code>Â å­—èŠ‚ï¼ˆå‰é¢è¯»åˆ°çš„å¯¹åº”é•¿åº¦ï¼‰ï¼Œè¯¥Â <code>len</code>Â å­—èŠ‚å°±æ˜¯å­—ç¬¦ä¸²çš„åŸå§‹å­—èŠ‚ã€‚</li>
</ul>
</li>
<li>
<p>å‡è®¾æ¯ä¸ªå‡½æ•°è‡³å°‘æœ‰ä¸€ä¸ªå‚æ•°ã€‚</p>
</li>
<li>
<p>æ•°æ®æµä¸­å¯èƒ½åŒ…å«å¤šæ¡ RPC è°ƒç”¨ï¼Œè§£æåº”ä»å¤´åˆ°å°¾ä¾æ¬¡è§£æç›´åˆ°åå…­è¿›åˆ¶æµç»“æŸã€‚</p>
</li>
</ul>
<h3 data-id="heading-1">è¾“å…¥è¯´æ˜</h3>
<ol>
<li>ç¬¬ä¸€è¡Œï¼šæ­£æ•´æ•°Â <code>nr_func</code>ï¼Œè¡¨ç¤ºæœåŠ¡å™¨æä¾›çš„å‡½æ•°ä¸ªæ•°ã€‚</li>
<li>æ¥ä¸‹æ¥Â <code>nr_func</code>Â è¡Œï¼Œæ¯è¡Œæè¿°ä¸€ä¸ªå‡½æ•°ï¼Œæ ¼å¼ä¸ºï¼š</li>
</ol>

<pre><code class="hljs">func_id func_name func_args
</code></pre>
<ul>
<li><code>func_id</code>ï¼šæ•´æ•°ï¼ˆåè¿›åˆ¶ï¼‰ï¼ŒèŒƒå›´ 0 ~ 255ï¼ˆå  1 å­—èŠ‚ï¼‰ã€‚</li>
<li><code>func_name</code>ï¼šå­—ç¬¦ä¸²ï¼ˆå‡½æ•°åï¼Œæ— ç©ºæ ¼ï¼‰ã€‚</li>
<li><code>func_args</code>ï¼šåªåŒ…å«å­—ç¬¦Â <code>i</code>Â å’ŒÂ <code>s</code>Â çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå‚æ•°ç±»å‹çš„é¡ºåºï¼Œä¾‹å¦‚Â <code>"isi"</code>Â è¡¨ç¤ºç¬¬ 1 ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œç¬¬ 2 ä¸ªæ˜¯æ•´æ•°ï¼Œç¬¬ 3 ä¸ªæ˜¯å­—ç¬¦ä¸²ã€‚</li>
</ul>
<ol start="3">
<li>æœ€åä¸€è¡Œï¼šä¸€é•¿ä¸²åå…­è¿›åˆ¶å­—ç¬¦ï¼ˆåªå«Â <code>0-9</code>Â å’ŒÂ <code>A-F</code>ï¼Œä¸”ä¸ºå¶æ•°é•¿åº¦ï¼‰ï¼Œè¡¨ç¤ºä¸€ä¸ªæˆ–å¤šä¸ª RPC è°ƒç”¨çš„ä¸²è”ç¼–ç ã€‚</li>
</ol>
<h3 data-id="heading-2">è¾“å‡ºè¯´æ˜</h3>
<ul>
<li>
<p>ä¾æ¬¡è¾“å‡ºæ•°æ®æµä¸­æ¯æ¡ RPC çš„å¯è¯»å½¢å¼ï¼Œ<strong>æ ¼å¼</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">func_name</span>(arg1,arg2,...)
</code></pre>
<ul>
<li>å¯¹äºæ•´å‹å‚æ•°Â <code>i</code>ï¼šæŒ‰åè¿›åˆ¶ç›´æ¥è¾“å‡ºï¼Œä¾‹å¦‚Â <code>123</code>ã€‚</li>
<li>å¯¹äºå­—ç¬¦ä¸²å‚æ•°Â <code>s</code>ï¼šè¾“å‡ºåŒå¼•å·åŒ…è£¹çš„è¯¥å­—ç¬¦ä¸²å¯¹åº”çš„åå…­è¿›åˆ¶å­ä¸²ï¼ˆä¸è¿›è¡Œå­—ç¬¦è§£ç ï¼‰ï¼Œä¾‹å¦‚Â <code>"6162"</code>ã€‚</li>
</ul>
</li>
<li>
<p>å‚æ•°ä¹‹é—´ç”¨è‹±æ–‡é€—å·Â <code>,</code>Â åˆ†éš”ã€‚å‡½æ•°è°ƒç”¨ä¹‹é—´è¿ç»­è¾“å‡ºï¼ˆä¸å¦åŠ é¢å¤–ç©ºæ ¼æˆ–æ¢è¡Œï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">æµ‹è¯•ç”¨ä¾‹</h3>
<p>è¾“å…¥ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-number">2</span>
<span class="hljs-number">1</span> concat ss
<span class="hljs-number">2</span> <span class="hljs-keyword">add</span> ii
<span class="hljs-number">0102036162414243020000000100000002</span>
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">concat</span>("<span class="hljs-number">6162</span>","<span class="hljs-number">414243</span>")<span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)
</code></pre>
<h3 data-id="heading-4">å‚è€ƒç­”æ¡ˆ</h3>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iterator&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cassert&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">DecodeHex</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; data, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> bytes)</span> </span>{
    <span class="hljs-type">int</span> result = <span class="hljs-number">0</span>;

    <span class="hljs-type">int</span> len = bytes * <span class="hljs-number">2</span>;

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = pos; i &lt; pos + len; ++i) {
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'0'</span> &lt;= data[i] &amp;&amp; data[i] &lt;= <span class="hljs-string">'9'</span>) {
            result = result * <span class="hljs-number">16</span> + (data[i] - <span class="hljs-string">'0'</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'A'</span> &lt;= data[i] &amp;&amp; data[i] &lt;= <span class="hljs-string">'F'</span>) {
            result = result * <span class="hljs-number">16</span> + (data[i] - <span class="hljs-string">'A'</span> + <span class="hljs-number">10</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">assert</span>(<span class="hljs-number">0</span>);
        }
    }

    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">ReadByte</span><span class="hljs-params">(std::string&amp; data, <span class="hljs-type">int</span>&amp; pos)</span> </span>{
    <span class="hljs-keyword">auto</span> r = <span class="hljs-built_in">DecodeHex</span>(data, pos, <span class="hljs-number">1</span>);
    pos += <span class="hljs-number">1</span> * <span class="hljs-number">2</span>;
    <span class="hljs-keyword">return</span> r;
}

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">ReadInt</span><span class="hljs-params">(std::string&amp; data, <span class="hljs-type">int</span>&amp; pos)</span> </span>{
    <span class="hljs-keyword">auto</span> r = <span class="hljs-built_in">DecodeHex</span>(data, pos, <span class="hljs-number">4</span>);
    pos += <span class="hljs-number">4</span> * <span class="hljs-number">2</span>;
    <span class="hljs-keyword">return</span> r;
}

<span class="hljs-function"><span class="hljs-keyword">inline</span> std::string <span class="hljs-title">ReadString</span><span class="hljs-params">(std::string&amp; data, <span class="hljs-type">int</span> str_len, <span class="hljs-type">int</span>&amp; pos)</span> </span>{
    <span class="hljs-keyword">auto</span> r = data.<span class="hljs-built_in">substr</span>(pos, str_len * <span class="hljs-number">2</span>);
    pos += str_len * <span class="hljs-number">2</span>;
    <span class="hljs-keyword">return</span> r;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> nr_func; <span class="hljs-comment">// æœåŠ¡ç«¯å¯ä¾›å®¢æˆ·ç«¯è°ƒç”¨çš„å‡½æ•°ä¸ªæ•°</span>
    std::cin &gt;&gt; nr_func;

    <span class="hljs-comment">// å‡½æ•°ç¼–å·ï¼Œå‡½æ•°å‘½ï¼Œå‚æ•°å®šä¹‰</span>
    std::unordered_map&lt;<span class="hljs-type">int</span>, std::string&gt; func_name_map;
    std::unordered_map&lt;<span class="hljs-type">int</span>, std::string&gt; func_args_map;
    std::unordered_map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; nr_func_str_args_map;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; nr_func; ++i) {
        <span class="hljs-type">int</span> func_id;
        std::string func_name;
        std::string func_args;
        std::cin &gt;&gt; func_id &gt;&gt; func_name &gt;&gt; func_args;

        <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> arg_type : func_args) {
            <span class="hljs-keyword">if</span> (arg_type == <span class="hljs-string">'s'</span>) {
                ++nr_func_str_args_map[func_id];
            }
        }

        func_name_map[func_id] = std::<span class="hljs-built_in">move</span>(func_name);
        func_args_map[func_id] = std::<span class="hljs-built_in">move</span>(func_args);

    }

    <span class="hljs-comment">// 16è¿›åˆ¶è¡¨ç¤ºçš„rpcæ•°æ®ï¼š</span>
    <span class="hljs-comment">// 1. å¯èƒ½å«æœ‰å¤šæ¡rpcæ•°æ®</span>
    <span class="hljs-comment">// 2. æ•´æ•°é‡‡ç”¨å¤§ç«¯è¡¨ç¤ºï¼ˆæ•´æ•°é«˜ä½å­—èŠ‚æ’åœ¨å‰é¢ï¼‰</span>
    <span class="hljs-comment">// 3. æ¯ä¸ªå‡½æ•°æœ€å°‘æœ‰ä¸€ä¸ªå‚æ•°</span>

    std::string input_data;
    std::cin &gt;&gt; input_data;

    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> (i &lt; input_data.<span class="hljs-built_in">size</span>()) {
        <span class="hljs-comment">// è¯»å–ä¸€å­—èŠ‚çš„rpcç¼–å·</span>
        <span class="hljs-type">int</span> func_id = <span class="hljs-built_in">ReadByte</span>(input_data, i);

        <span class="hljs-comment">// è·å–åˆ°å‡½æ•°åå’Œå‚æ•°å®šä¹‰</span>
        <span class="hljs-type">const</span> std::string&amp; func_name = func_name_map[func_id];
        <span class="hljs-type">const</span> std::string&amp; func_args = func_args_map[func_id];
        <span class="hljs-type">int</span> nr_func_str_args = nr_func_str_args_map[func_id];

        std::queue&lt;<span class="hljs-type">int</span>&gt; str_lens;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; nr_func_str_args; ++j) {
            str_lens.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">ReadByte</span>(input_data, i));
        }

        std::cout &lt;&lt; func_name &lt;&lt; <span class="hljs-string">"("</span>;

        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; func_args.<span class="hljs-built_in">size</span>(); ++j) {
            <span class="hljs-type">char</span> arg_type = func_args[j];

            <span class="hljs-keyword">if</span> (arg_type == <span class="hljs-string">'i'</span>) {
                <span class="hljs-type">int</span> v = <span class="hljs-built_in">ReadInt</span>(input_data, i);
                std::cout &lt;&lt; v;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arg_type == <span class="hljs-string">'s'</span>) {
                <span class="hljs-comment">// å­—ç¬¦ä¸²é•¿åº¦</span>
                <span class="hljs-type">int</span> str_len = str_lens.<span class="hljs-built_in">front</span>();
                str_lens.<span class="hljs-built_in">pop</span>();

                std::string str = <span class="hljs-built_in">ReadString</span>(input_data, str_len, i);

                std::cout &lt;&lt; <span class="hljs-string">"\""</span> &lt;&lt; str &lt;&lt; <span class="hljs-string">"\""</span>;

            } <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">assert</span>(<span class="hljs-number">0</span>);
            }

            <span class="hljs-keyword">if</span> (j != func_args.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>) {
                std::cout &lt;&lt; <span class="hljs-string">","</span>;
            }
        }

        std::cout &lt;&lt; <span class="hljs-string">")"</span>;
    }
}

</code></pre>
<h2 data-id="heading-5">æµ·åŸŸå¯»å®</h2>
<p>å°æ˜åœ¨ä¸€å¼  <code>height Ã— width</code> çš„æµ·åŸŸç½‘æ ¼åœ°å›¾ä¸Šå¯»å®ã€‚ç½‘æ ¼ä¸Šçš„æ¯ä¸ªæ ¼å­æœ‰ä¸€ä¸ªæµ·æ‹”é«˜åº¦ï¼ˆéè´Ÿæ•´æ•°ï¼‰ã€‚æµ·é¢åˆå§‹é«˜åº¦ä¸º <code>0</code>ï¼Œæ¯å°æ—¶ä¸Šå‡ <code>1</code>ï¼ˆç¬¬ <code>t</code> å°æ—¶æµ·é¢é«˜åº¦ä¸º <code>t</code>ï¼‰ã€‚æµ·é¢ä¸Šå‡æ˜¯æ•´ä½“ä¸€è‡´çš„ï¼Œä¸å—åœ°å½¢é˜»æŒ¡ã€‚</p>
<p>å¼€å§‹æ—¶ï¼Œå°æ˜ä¼šå¤„äºä¸€ä¸ªèµ·ç‚¹ï¼Œå¹¶ä¸”ä»–çŸ¥é“å®è—ä½ç½®åœ¨å“ªé‡Œã€‚å°æ˜å¯ä»¥åœ¨å››ä¸ªæ­£äº¤æ–¹å‘ï¼ˆä¸Šä¸‹å·¦å³ï¼‰ç§»åŠ¨ï¼Œæ¯æ¬¡ç§»åŠ¨åˆ°ç›¸é‚»æ ¼å­ã€‚<strong>åªæœ‰æ ¼å­è¢«æµ·ç»µæ·¹æ²¡æ—¶ï¼ˆå³æ ¼å­çš„æµ·æ‹” <code>â‰¤</code> å½“å‰æµ·é¢é«˜åº¦æ—¶ï¼‰ï¼Œè¯¥æ ¼å­æ‰å¯è¢«é€šè¿‡</strong> ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¿…é¡»ç­‰åˆ°æµ·æ°´æ·¹æ²¡èµ·ç‚¹ã€ç»ˆç‚¹ä»¥åŠèµ·ç‚¹åˆ°ç»ˆç‚¹è·¯å¾„ä¸Šçš„æ¯ä¸ªæ ¼å­åï¼Œå°æ˜æ‰èƒ½æ¸¸è¿‡å»å¹¶å–å¾—å®è—ã€‚</p>
<p>è¯·é—®ï¼šå°æ˜è‡³å°‘è¦ç­‰å¾…å‡ ä¸ªå°æ—¶ï¼Œæ‰èƒ½å–åˆ°å®è—ï¼Ÿ</p>
<h3 data-id="heading-6">è¾“å…¥æè¿°</h3>
<ul>
<li>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ­£æ•´æ•°ï¼š<code>height</code>ï¼ˆè¡Œæ•°ï¼‰å’ŒÂ <code>width</code>ï¼ˆåˆ—æ•°ï¼‰ã€‚</li>
<li>ç¬¬äºŒè¡Œï¼šèµ·ç‚¹åæ ‡Â <code>start_i start_j</code>ï¼ˆ1 â‰¤ start_i â‰¤ heightï¼Œ1 â‰¤ start_j â‰¤ widthï¼‰ã€‚</li>
<li>ç¬¬ä¸‰è¡Œï¼šç»ˆç‚¹åæ ‡Â <code>target_i target_j</code>ï¼ˆ1 â‰¤ target_i â‰¤ heightï¼Œ1 â‰¤ target_j â‰¤ widthï¼‰ã€‚</li>
<li>æ¥ä¸‹æ¥Â <code>height</code>Â è¡Œï¼Œæ¯è¡ŒÂ <code>width</code>Â ä¸ªéè´Ÿæ•´æ•°ï¼Œè¡¨ç¤ºæ¯ä¸ªæ ¼å­çš„æµ·æ‹”é«˜åº¦Â <code>a[i][j]</code>ã€‚</li>
</ul>
<h3 data-id="heading-7">è¾“å‡ºæè¿°</h3>
<p>è¾“å‡ºä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œè¡¨ç¤ºèƒ½å–å›å®è—çš„æœ€æ—©å°æ—¶æ•° <code>t</code>ã€‚</p>
<h3 data-id="heading-8">æµ‹è¯•ç”¨ä¾‹</h3>
<p>è¾“å…¥ï¼š</p>
<pre><code class="hljs">3 3
1 1
3 3
0 2 2
1 3 4
2 2 1
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs">2
</code></pre>
<p>è§£é‡Šï¼š</p>
<p>ä¸€ç§æ»¡è¶³æ¡ä»¶çš„è·¯å¾„æ˜¯ (1,1)-&gt;(2,1)-&gt;(3,1)-&gt;(3,2)-&gt;(3,3)ï¼Œå¯¹åº”é«˜åº¦ [0,1,2,2,1]ï¼Œè¿™æ¡è·¯å¾„ä¸Šçš„æœ€å¤§æµ·æ‹”é«˜åº¦ä¸º 2ï¼Œå› æ­¤æœ€æ—©æ—¶é—´ä¸º <code>t = 2</code>ã€‚</p>
<h3 data-id="heading-9">äºŒåˆ†ç­”æ¡ˆ+BFSéªŒè¯</h3>
<p>ç›´æ¥éå†æšä¸¾æ‰€æœ‰å¯èƒ½çš„tï¼Œç„¶åç”¨DFS/BFSéªŒè¯æ˜¯å¦å­˜åœ¨é€šè·¯ï¼Œåªèƒ½é€šè¿‡å¤§çº¦60%çš„ç”¨ä¾‹ï¼Œä¹‹åä¾¿ä¼šè¶…æ—¶ã€‚</p>
<p>å¯ä»¥é‡‡ç”¨äºŒåˆ†ç­”æ¡ˆæ¥æ›¿ä»£æš´åŠ›æšä¸¾ï¼ŒåŠ é€ŸæŸ¥æ‰¾è¿‡ç¨‹ï¼Œç»æµ‹è¯•å¯ä»¥é€šè¿‡100%çš„ç”¨ä¾‹ã€‚</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;istream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> IN_RANGE(x, l, r) ((l) &lt;= (x) &amp;&amp; (x) &lt; (r))</span>

<span class="hljs-keyword">using</span> Map = std::vector&lt;std::vector&lt;<span class="hljs-type">int</span>&gt;&gt;;

<span class="hljs-type">int</span> height, width;
<span class="hljs-type">int</span> start_i, start_j;
<span class="hljs-type">int</span> target_i, target_j;

std::vector&lt;std::pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt; dirs = {{<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>}, {<span class="hljs-number">1</span>,<span class="hljs-number">0</span>}, {<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>}, {<span class="hljs-number">0</span>,<span class="hljs-number">1</span>}};

std::vector&lt;std::vector&lt;<span class="hljs-type">bool</span>&gt;&gt; vis;

<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">Check</span><span class="hljs-params">(Map&amp; map, <span class="hljs-type">int</span> t)</span> </span>{
    std::queue&lt;std::pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt; q;
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; height; ++i) {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; width; ++j) {
            vis[i][j] = <span class="hljs-literal">false</span>;
        }
    }

    q.<span class="hljs-built_in">push</span>({start_i, start_j});
    vis[start_i][start_j] = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) {
        <span class="hljs-keyword">auto</span> [cur_i, cur_j] = q.<span class="hljs-built_in">front</span>();
        q.<span class="hljs-built_in">pop</span>();

        <span class="hljs-keyword">if</span> (cur_i == target_i &amp;&amp; cur_j == target_j) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> [d_i, d_j] : dirs) {
            <span class="hljs-type">int</span> next_i = cur_i + d_i;
            <span class="hljs-type">int</span> next_j = cur_j + d_j;
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IN_RANGE</span>(next_i, <span class="hljs-number">0</span>, height) &amp;&amp; 
                    <span class="hljs-built_in">IN_RANGE</span>(next_j, <span class="hljs-number">0</span>, width) &amp;&amp; 
                    (map[next_i][next_j] - t) &lt;= <span class="hljs-number">0</span> &amp;&amp; 
                    !vis[next_i][next_j]) {
                q.<span class="hljs-built_in">push</span>({next_i, next_j});
                vis[next_i][next_j] = <span class="hljs-literal">true</span>;
            }
        }
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::ios_base::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">true</span>);
    std::cin.<span class="hljs-built_in">tie</span>(<span class="hljs-literal">NULL</span>);
    std::cout.<span class="hljs-built_in">tie</span>(<span class="hljs-literal">NULL</span>);

    std::cin &gt;&gt; height &gt;&gt; width;

    std::cin &gt;&gt; start_i &gt;&gt; start_j;
    --start_i, --start_j;

    std::cin &gt;&gt; target_i &gt;&gt; target_j;
    --target_i, --target_j;

    <span class="hljs-comment">// map[i][j] æµ·æ‹”é«˜åº¦</span>
    <span class="hljs-type">int</span> max_time = <span class="hljs-number">0</span>;
    <span class="hljs-function">Map <span class="hljs-title">map</span><span class="hljs-params">(height, std::vector&lt;<span class="hljs-type">int</span>&gt;(width))</span></span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; height; ++i) {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; width; ++j) {
            std::cin &gt;&gt; map[i][j];
            max_time = std::<span class="hljs-built_in">max</span>(max_time, map[i][j]);
        }
    }

    vis.<span class="hljs-built_in">assign</span>(height, std::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">bool</span>&gt;(width));

    <span class="hljs-comment">// åˆå§‹æ°´å¹³é¢0ï¼Œæ¯å°æ—¶ä¸Šæ¶¨1ã€‚æ°´é¢ä¸Šæ¶¨ä¸å—å‘¨å›´éšœç¢ç‰©é˜»ç¢ã€‚</span>
    <span class="hljs-comment">// åªæœ‰å½“æ°´é¢æ¶¨åˆ°åŒæ—¶æ·¹æ²¡ä¸»äººå…¬æ‰€å¤„ä½ç½®ã€å®è—ä½ç½®ï¼Œä»¥åŠä¸»äººå…¬åˆ°å®è—ä¹‹å‰çš„è·¯å¾„æ—¶ï¼Œæ‰èƒ½å–å›å®è—ã€‚</span>
    <span class="hljs-type">int</span> u = std::<span class="hljs-built_in">max</span>(map[start_i][start_j], map[target_i][target_j]);
    <span class="hljs-type">int</span> v = max_time + <span class="hljs-number">1</span>;

    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;
    <span class="hljs-comment">// äºŒåˆ†ç­”æ¡ˆï¼š</span>
    <span class="hljs-comment">// 1. å¦‚æœåœ¨å½“å‰tçš„çº¦æŸæ¡ä»¶ä¸‹å­˜åœ¨é€šè·¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿›ä¸€æ­¥ç¼©å°äºŒåˆ†çš„å³åŒºé—´ï¼Œæ¢ç´¢æ˜¯å¦å­˜åœ¨æ›´ä¼˜åŒ–çš„tã€‚</span>
    <span class="hljs-comment">// 2. åä¹‹ï¼Œåˆ™åº”è¯¥æ‰©å¤§äºŒåˆ†çš„å·¦åŒºé—´ï¼Œä»¥ç¡®ä¿èƒ½å¤Ÿæœç´¢åˆ°è‡³å°‘ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆã€‚</span>
    <span class="hljs-keyword">while</span> (u &lt; v) {
        <span class="hljs-type">int</span> t = u + ((v - u) &gt;&gt; <span class="hljs-number">1</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Check</span>(map, t)) {
            ans = t;
            v = t;
        } <span class="hljs-keyword">else</span> {
            u = t + <span class="hljs-number">1</span>;
        }
    }
    std::cout &lt;&lt; ans;
}
</code></pre>
<h3 data-id="heading-10">æ”¹é€ ç‰ˆDijsktra</h3>
<p>æ­¤é¢˜æ˜¯ä¸€ä¸ªç»å…¸çš„"ç“¶é¢ˆè·¯é—®é¢˜"ã€‚æ­¤ç±»é—®é¢˜æ ¹æ®ä¼˜åŒ–ç›®æ ‡çš„ä¸åŒï¼Œä¸€èˆ¬æœ‰ä¸¤å¤§ç±»å‹ï¼š</p>
<ol>
<li><strong>æœ€å°åŒ–æœ€å¤§å€¼ (Minimax Path Problem)</strong> ï¼š åœ¨æ‰€æœ‰ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„ä¸­ï¼Œæ‰¾åˆ°ä¸€æ¡è·¯å¾„ï¼Œä½¿å¾—è¯¥è·¯å¾„ä¸Šâ€œæœ€éš¾èµ°â€çš„ä¸€æ®µï¼ˆå³æƒé‡æœ€å¤§çš„è¾¹æˆ–ç‚¹ï¼‰çš„æƒé‡å°½å¯èƒ½å°ã€‚è¿™æ­£æ˜¯æœ¬é¢˜æ‰€å±çš„ç±»å‹ï¼Œä½ éœ€è¦æœ€å°åŒ–è·¯å¾„ä¸Šçš„æœ€é«˜æµ·æ‹”ã€‚</li>
<li><strong>æœ€å¤§åŒ–æœ€å°å€¼ (Maximin Path Problem)</strong> ï¼š åœ¨æ‰€æœ‰ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„ä¸­ï¼Œæ‰¾åˆ°ä¸€æ¡è·¯å¾„ï¼Œä½¿å¾—è¯¥è·¯å¾„ä¸Šâ€œæœ€å®¹æ˜“èµ°â€çš„ä¸€æ®µï¼ˆå³æƒé‡æœ€å°çš„è¾¹ï¼‰çš„æƒé‡å°½å¯èƒ½å¤§ã€‚è¿™ä¸ªé—®é¢˜ä¹Ÿå¸¸è¢«ç§°ä¸ºâ€œæœ€å®½è·¯å¾„é—®é¢˜â€ï¼ˆWidest Path Problemï¼‰ï¼Œå¯ä»¥æƒ³è±¡æˆåœ¨ç½‘ç»œä¸­ä¼ è¾“æ•°æ®ï¼Œå¯»æ‰¾ä¸€æ¡è·¯å¾„ä½¿å…¶æœ€å°å¸¦å®½å°½å¯èƒ½å¤§ã€‚</li>
</ol>
<p>ä¸éš¾ç†è§£ï¼Œ"ç“¶é¢ˆè·¯é—®é¢˜"ä¸"æœ€çŸ­è·¯å¾„é—®é¢˜"å­˜åœ¨ç±»ä¼¼ä¹‹å¤„ï¼Œéƒ½æ»¡è¶³"æœ€ä¼˜å­ç»“æ„"å’Œ"è´ªå¿ƒé€‰æ‹©"æ€§è´¨ã€‚æ›´è¿›ä¸€æ­¥åœ°ï¼Œå¯¹äºå•æºç“¶é¢ˆè·¯é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨â€”â€”<strong>åªéœ€è¦å¯¹distæ•°ç»„çš„å®šä¹‰å’Œæ¾å¼›æ“ä½œè¿›è¡Œä¿®æ”¹å³å¯</strong>ã€‚</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;array&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> IN_RANGE(v, l, r) ((l) &lt;= (v) &amp;&amp; (v) &lt; (r))</span>

<span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> INF = std::numeric_limits&lt;<span class="hljs-type">int</span>&gt;::<span class="hljs-built_in">max</span>();

std::vector&lt;std::pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt; dirs = {{<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>}, {<span class="hljs-number">1</span>,<span class="hljs-number">0</span>}, {<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>}, {<span class="hljs-number">0</span>,<span class="hljs-number">1</span>}};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> {
  <span class="hljs-type">int</span> v;
  <span class="hljs-type">int</span> i;
  <span class="hljs-type">int</span> j;
  <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&gt;(<span class="hljs-type">const</span> Node&amp; other) <span class="hljs-type">const</span> {
    <span class="hljs-keyword">return</span> v &gt; other.v;
  }
};

<span class="hljs-keyword">using</span> Map = std::vector&lt;std::vector&lt;<span class="hljs-type">int</span>&gt;&gt;;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Dijsktra</span><span class="hljs-params">(<span class="hljs-type">const</span> Map&amp; map, <span class="hljs-type">int</span> height, <span class="hljs-type">int</span> width, <span class="hljs-type">int</span> start_i, <span class="hljs-type">int</span> start_j, <span class="hljs-type">int</span> target_i, <span class="hljs-type">int</span> target_j)</span> </span>{
  std::vector&lt;std::vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">dist</span>(height, std::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(width, INF));
  std::priority_queue&lt;Node, std::vector&lt;Node&gt;, std::greater&lt;Node&gt;&gt; pq;  <span class="hljs-comment">// æœ€å°å †</span>

  <span class="hljs-comment">// åˆå§‹åŒ–èµ·ç‚¹</span>
  dist[start_i][start_j] = map[start_i][start_j];
  pq.<span class="hljs-built_in">push</span>({
    .v = dist[start_i][start_j], 
    .i = start_i, 
    .j = start_j
  });

  <span class="hljs-keyword">while</span> (!pq.<span class="hljs-built_in">empty</span>()) {
    Node cur = pq.<span class="hljs-built_in">top</span>();
    pq.<span class="hljs-built_in">pop</span>();

    <span class="hljs-keyword">if</span> (cur.v &gt; dist[cur.i][cur.j]) {
      <span class="hljs-keyword">continue</span>;
    }

    <span class="hljs-comment">// æ¾å¼›æ“ä½œ</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> [di, dj] : dirs) {
      <span class="hljs-type">int</span> next_i = cur.i + di;
      <span class="hljs-type">int</span> next_j = cur.j + dj;
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IN_RANGE</span>(next_i, <span class="hljs-number">0</span>, height) &amp;&amp; <span class="hljs-built_in">IN_RANGE</span>(next_j, <span class="hljs-number">0</span>, width)) {
        <span class="hljs-type">int</span> next_v = std::<span class="hljs-built_in">max</span>(dist[cur.i][cur.j], map[next_i][next_j]);
        <span class="hljs-keyword">if</span> (next_v &lt; dist[next_i][next_j]) {
          dist[next_i][next_j] = next_v;
          pq.<span class="hljs-built_in">push</span>({
            .v = next_v,
            .i = next_i,
            .j = next_j
          });
        }
      }
    }
  }

  <span class="hljs-keyword">return</span> dist[target_i][target_j];
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  std::ios_base::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">true</span>);
  std::cin.<span class="hljs-built_in">tie</span>(<span class="hljs-literal">NULL</span>);
  std::cout.<span class="hljs-built_in">tie</span>(<span class="hljs-literal">NULL</span>);

  <span class="hljs-type">int</span> height, width;
  <span class="hljs-type">int</span> start_i, start_j, target_i, target_j;

  std::cin &gt;&gt; height &gt;&gt; width;

  std::cin &gt;&gt; start_i &gt;&gt; start_j;
  --start_i, --start_j;

  std::cin &gt;&gt; target_i &gt;&gt; target_j;
  --target_i, --target_j;

  <span class="hljs-comment">// map[i][j] æµ·æ‹”é«˜åº¦</span>
  <span class="hljs-type">int</span> max_time = <span class="hljs-number">0</span>;
  <span class="hljs-function">Map <span class="hljs-title">map</span><span class="hljs-params">(height, std::vector&lt;<span class="hljs-type">int</span>&gt;(width))</span></span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; height; ++i) {
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; width; ++j) {
      std::cin &gt;&gt; map[i][j];
      max_time = std::<span class="hljs-built_in">max</span>(max_time, map[i][j]);
    }
  }

  std::cout &lt;&lt; <span class="hljs-built_in">Dijsktra</span>(map, height, width, start_i, start_j, target_i, target_j);
}

</code></pre>
<h2 data-id="heading-11">BOSSçš„è™šå¼±çŠ¶æ€</h2>
<p>ä½ æ˜¯ä¸€åæ‰‹æ¡nç§æŠ€èƒ½çš„æ¸¸ä¾ ï¼Œæ­£åœ¨å‡†å¤‡ä¸ä½ çš„é˜Ÿå‹å°æ˜å…±åŒè¿å‡»ä¸€ä¸ªæ€»è¡€æ°”å€¼ä¸ºhpçš„å¤§BOSSã€‚</p>
<p>å·²çŸ¥è¯¥BOSSçš„æ°”è¡€å€¼å¤„äºé—­åŒºé—´[LowerHp, UpperHp]ï¼ˆ0&lt;LowerHp&lt;UpperHp&lt;Hp&lt;=1000ï¼‰æ—¶ï¼Œä¼šè¿›å…¥è™šå¼±çŠ¶æ€ã€‚æ­¤æ—¶å†ç”±ä½ çš„é˜Ÿå‹å°æ˜å¯¹å®ƒå‘èµ·æœ€ç»ˆçš„è‡´å‘½ä¸€å‡»ã€‚è€Œè®©BOSSè¿›å…¥è™šå¼±çŠ¶æ€çš„é‡ä»»ï¼Œåˆ™ç”±ä½ æ‰¿æ‹…ã€‚</p>
<p>è¯·é—®ï¼šé€šè¿‡å‘åŠ¨è‹¥å¹²æ¬¡æŠ€èƒ½ï¼ˆå¯ä»¥é‡å¤ä½¿ç”¨åŒä¸€ç§æŠ€èƒ½ï¼‰ï¼Œä½ èƒ½è®©BOSSè¿›å…¥è™šå¼±çŠ¶æ€å—ï¼Ÿå¦‚æœå¯ä»¥ï¼Œè‡³å°‘è¦å‘åŠ¨å¤šå°‘æ¬¡æŠ€èƒ½ï¼Œæ‰èƒ½è®©BOSSè¿›å…¥è™šå¼±çŠ¶æ€ï¼Ÿ</p>
<h3 data-id="heading-12">è¾“å…¥è¯´æ˜</h3>
<ul>
<li>ç¬¬ä¸€è¡Œï¼šæµ‹è¯•ç”¨ä¾‹æ•°é‡ï¼ˆæ­£æ•´æ•°ï¼‰ã€‚</li>
<li>æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼š
<ul>
<li>ç¬¬ä¸€è¡Œä¸‰ä¸ªæ•´æ•°Â <code>hp LowerHp UpperHp</code>ï¼ˆ0 &lt; LowerHp &lt; UpperHp &lt; hp â‰¤ 1000ï¼‰ã€‚</li>
<li>ç¬¬äºŒè¡Œä¸€ä¸ªæ•´æ•°Â <code>n</code>ï¼ˆ1 â‰¤ n â‰¤ 100ï¼‰ï¼Œè¡¨ç¤ºæŠ€èƒ½æ•°é‡ã€‚</li>
<li>ç¬¬ä¸‰è¡ŒÂ <code>n</code>Â ä¸ªæ­£æ•´æ•°Â <code>d1 d2 ... dn</code>ï¼Œå…¶ä¸­Â <code>di</code>Â è¡¨ç¤ºç¬¬Â <code>i</code>Â ä¸ªæŠ€èƒ½æ¯æ¬¡èƒ½å‡å°‘çš„æ°”è¡€å€¼ï¼ˆ1 â‰¤ di â‰¤ 1000ï¼‰ã€‚æŠ€èƒ½å¯ä»¥ä»»æ„æ¬¡æ•°ä½¿ç”¨ï¼ˆåŒ…æ‹¬ 0 æ¬¡ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-13">è¾“å‡ºè¯´æ˜</h3>
<p>å¯¹æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹è¾“å‡ºä¸€è¡Œï¼Œè¡¨ç¤ºè®© BOSS è¿›å…¥è™šå¼±çŠ¶æ€æ‰€éœ€çš„æœ€å°‘æŠ€èƒ½æ¬¡æ•°ã€‚å¦‚æœæ— æ³•å°† BOSS çš„æ°”è¡€é™åˆ° <code>[LowerHp, UpperHp]</code> åŒºé—´å†…ï¼Œè¾“å‡º <code>0</code>ã€‚</p>
<h3 data-id="heading-14">æµ‹è¯•ç”¨ä¾‹</h3>
<p>è¾“å…¥</p>
<pre><code class="hljs">3
10 3 5
2
3 4
7 3 4
1
5
20 13 15
3
4 3 8
</code></pre>
<p>è¾“å‡º</p>
<pre><code class="hljs">2
0
2
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li><strong>æ ·ä¾‹ 1ï¼š</strong> Â åˆå§‹Â <code>hp = 10</code>ï¼Œç›®æ ‡åŒºé—´Â <code>[3,5]</code>ï¼ŒæŠ€èƒ½ä¸ºÂ <code>3</code>Â å’ŒÂ <code>4</code>ã€‚ä¾‹å¦‚ä½¿ç”¨ä¸¤æ¬¡Â <code>3</code>Â ä¼¤å®³ï¼š<code>10 -&gt; 7 -&gt; 4</code>ï¼Œ4 åœ¨åŒºé—´å†…ï¼Œæ”»å‡»æ¬¡æ•°ä¸ºÂ <code>2</code>ï¼ˆè¿™æ˜¯æœ€å°‘çš„ï¼‰ã€‚è¾“å‡ºÂ <code>2</code>ã€‚</li>
<li><strong>æ ·ä¾‹ 2ï¼š</strong> Â åˆå§‹Â <code>hp = 7</code>ï¼Œç›®æ ‡åŒºé—´Â <code>[3,4]</code>ï¼ŒæŠ€èƒ½ä¸ºå•ä¸ªÂ <code>5</code>ã€‚ä»»ä½•è¿ç»­ä½¿ç”¨Â <code>5</code>Â éƒ½ä¼šä½¿è¡€é‡å˜ä¸ºÂ <code>7 -&gt; 2</code>ï¼ˆæˆ–ç›´æ¥ä¸º 2ï¼‰ï¼Œæ— æ³•è½åœ¨Â <code>[3,4]</code>ï¼Œå› æ­¤è¾“å‡ºÂ <code>0</code>ã€‚</li>
<li><strong>æ ·ä¾‹ 3ï¼š</strong> Â <code>hp = 20</code>ï¼Œç›®æ ‡Â <code>[13,15]</code>ï¼ŒæŠ€èƒ½Â <code>4,3,8</code>ã€‚ä¾‹å¦‚Â <code>20 -&gt; 16</code>ï¼ˆç”¨ 4ï¼‰-&gt;Â <code>13</code>ï¼ˆç”¨ 3ï¼‰ï¼Œå…±Â <code>2</code>Â æ¬¡ï¼Œå¯ä»¥è¾¾æ ‡ï¼Œä¸”æ— æ³•ç”¨ 1 æ¬¡è¾¾æ ‡ï¼Œå› æ­¤æœ€å°‘ä¸ºÂ <code>2</code>ã€‚</li>
</ul>
<h3 data-id="heading-15">æš´åŠ›æšä¸¾DP</h3>
<p>ç”±äºé¢˜ç›®ä¸­çš„æ•°æ®é‡éå¸¸å°ï¼Œç›´æ¥æš´åŠ›DPæšä¸¾å°±èƒ½è¿‡äº†ã€‚</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cassert&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> INF (1&lt;&lt;30)</span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-type">int</span> t;
  std::cin &gt;&gt; t;
  <span class="hljs-keyword">while</span> (t-- &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-type">int</span> hp, lower_hp, upper_hp;
    <span class="hljs-comment">// 0&lt;LowerHp&lt;UpperHp&lt;Hp&lt;=1000</span>
    std::cin &gt;&gt; hp &gt;&gt; lower_hp &gt;&gt; upper_hp;

    <span class="hljs-type">int</span> n; <span class="hljs-comment">// æŠ€èƒ½æ•°</span>
    std::cin &gt;&gt; n;

    <span class="hljs-comment">// d[i] ç¬¬iä¸ªæŠ€èƒ½å¯ä»¥å‡å°‘çš„æ°”è¡€å€¼</span>
    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">d</span><span class="hljs-params">(n)</span></span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) {
      std::cin &gt;&gt; d[i];
    }

    <span class="hljs-comment">// dp[i][j] ä½¿ç”¨å‰iç§æŠ€èƒ½ï¼Œå°†hpé™ä½åˆ°jï¼Œæ‰€éœ€è¦æ¶ˆè€—çš„æœ€å°æŠ€èƒ½æ•°</span>
    std::vector&lt;std::vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">dp</span>(n + <span class="hljs-number">1</span>, std::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(hp + <span class="hljs-number">1</span>, INF));

    <span class="hljs-comment">// æœ‰0ç§æŠ€èƒ½ï¼Œå°†hpé™åˆ°hpï¼ˆå³ä»€ä¹ˆäº‹æƒ…éƒ½æ²¡å‘ç”Ÿï¼‰ï¼Œåªéœ€è¦å‘åŠ¨0æ¬¡æŠ€èƒ½</span>
    dp[<span class="hljs-number">0</span>][hp] = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) {
      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= hp; ++j) {
        <span class="hljs-comment">// ä¸ä½¿ç”¨å½“å‰æŠ€èƒ½</span>
        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
        <span class="hljs-comment">// ä½¿ç”¨å½“å‰æŠ€èƒ½</span>
        <span class="hljs-comment">// æš´åŠ›æšä¸¾å‘åŠ¨è‹¥å¹²æ¬¡ç¬¬iç§æŠ€èƒ½å‰ï¼Œbossè¡€é‡çš„å¯èƒ½å€¼</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> prev_hp = hp; prev_hp &gt;= j; --prev_hp) {
          <span class="hljs-type">int</span> curr_hp = prev_hp;
          <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;
          <span class="hljs-comment">// å‡è®¾bossçš„è¡€é‡å·²ä¸‹é™ä¸ºprev_hpï¼Œ</span>
          <span class="hljs-comment">// æ¨¡æ‹Ÿåœ¨æ­¤åŸºç¡€ä¸Šå¯¹bosså‘åŠ¨è‹¥å¹²æ¬¡ç¬¬iç§æŠ€èƒ½ã€‚</span>
          <span class="hljs-keyword">while</span> (curr_hp &gt;= j) {
            <span class="hljs-comment">// å¦‚æœæ£€æµ‹å‘ç°ï¼Œç»è¿‡å‘åŠ¨cntæ¬¡ç¬¬iç§æŠ€èƒ½åï¼Œ</span>
            <span class="hljs-comment">// bossçš„è¡€é‡å¯ä»¥ç”±prev_hpä¸‹é™åˆ°jï¼Œ</span>
            <span class="hljs-comment">// åˆ™å°è¯•æ›´æ–°dp[i][j]ã€‚</span>
            <span class="hljs-keyword">if</span> (curr_hp == j) {
              dp[i][j] = std::<span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][prev_hp] + cnt, dp[i][j]);
              <span class="hljs-keyword">break</span>;
            }
            curr_hp -= d[i - <span class="hljs-number">1</span>];
            ++cnt;
          }
        }
      }
    }

    <span class="hljs-type">int</span> result = INF;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = lower_hp; j &lt;= upper_hp; ++j) {
      result = std::<span class="hljs-built_in">min</span>(result, dp[n][j]);
    }

    <span class="hljs-keyword">if</span> (result &lt; INF) {
      std::cout &lt;&lt; result &lt;&lt; std::endl;
    }
    <span class="hljs-keyword">else</span> {
      std::cout &lt;&lt; <span class="hljs-number">0</span> &lt;&lt; std::endl;
    }
  }
}
</code></pre>
<h3 data-id="heading-16">å®Œå…¨èƒŒåŒ…é—®é¢˜</h3>
<p>æœ¬é¢˜æ˜¯ä¸€é“ç±»å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼ˆnç§ç‰©å“éƒ½å¯ä»¥ä½¿ç”¨æ— é™æ¬¡ï¼‰ï¼Œä¸”ä¼˜åŒ–ç›®æ ‡ä¸ºåœ¨è¾¾åˆ°ç›®æ ‡ä»·å€¼çš„å‰æä¸‹ï¼Œä½¿å¾—æ‹¿çš„ç‰©å“æ€»æ•°å°½å¯èƒ½åœ°å°‘ã€‚</p>
<p>è¿™å¬ä¸Šå»æ˜¯ä¸æ˜¯ä¸leetcodeä¸Šçš„"é›¶é’±å…‘æ¢"è¿™é“é¢˜å¾ˆåƒï¼Ÿ</p>
<p>æ˜¯çš„ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠæœ¬é¢˜è½¬æ¢æˆ"é›¶é’±å…‘æ¢"è¿™é“ç»å…¸é¢è¯•é¢˜æ¥è§£ç­”ï¼</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cassert&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> INF (1&lt;&lt;30)</span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-type">int</span> t;
  std::cin &gt;&gt; t;
  <span class="hljs-keyword">while</span> (t-- &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-type">int</span> hp, lower_hp, upper_hp;
    <span class="hljs-comment">// 0&lt;LowerHp&lt;UpperHp&lt;Hp&lt;=1000</span>
    std::cin &gt;&gt; hp &gt;&gt; lower_hp &gt;&gt; upper_hp;

    <span class="hljs-type">int</span> n; <span class="hljs-comment">// æŠ€èƒ½æ•°</span>
    std::cin &gt;&gt; n;

    <span class="hljs-comment">// d[i] ç¬¬iä¸ªæŠ€èƒ½å¯ä»¥å‡å°‘çš„æ°”è¡€å€¼</span>
    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">d</span><span class="hljs-params">(n)</span></span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) {
      std::cin &gt;&gt; d[i];
    }

    <span class="hljs-comment">// dp[i] å¯¹BOSSé€ æˆiç‚¹ä¼¤å®³ï¼Œè‡³å°‘éœ€è¦å‘åŠ¨å‡ æ¬¡æŠ€èƒ½</span>
    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(hp + <span class="hljs-number">1</span>, INF)</span></span>;
    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> cur_d : d) {
      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> t = cur_d; t &lt;= hp; ++t) {
        dp[t] = std::<span class="hljs-built_in">min</span>(dp[t], dp[t - cur_d] + <span class="hljs-number">1</span>);
      }
    }

    <span class="hljs-comment">// éå†BOSSè™šå¼±çŠ¶æ€åŒºé—´ï¼Œæ‰¾å‡ºä½¿BOSSè¿›å…¥è™šå¼±çŠ¶æ€çš„æœ€å°‘æŠ€èƒ½æ•°</span>
    <span class="hljs-type">int</span> ans = INF;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> target = hp - upper_hp; target &lt;= hp - lower_hp; ++target) {
      ans = std::<span class="hljs-built_in">min</span>(ans, dp[target]);
    }

    std::cout &lt;&lt; ((ans &gt;= INF) ? <span class="hljs-number">0</span> : ans) &lt;&lt; std::endl;
  }
}
</code></pre>
<h3 data-id="heading-17">BFS</h3>
<p>æ­¤å¤–æœ¬é¢˜è¿˜å¯ä»¥è½¬æ¢æˆå›¾çš„æœ€çŸ­è·¯å¾„é—®é¢˜æ¥æ±‚è§£ã€‚è¿™ä¹Ÿæ˜¯æ ¡æ‹›ç¬”è¯•ä¸­å¾ˆå¸¸è§çš„ä¸€ä¸ªè€ƒç‚¹å’Œè§£é¢˜æŠ€å·§ã€‚</p>
<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†BOSSçš„ä¸åŒè¡€é‡çŠ¶æ€ï¼Œçœ‹ä½œå›¾ä¸­çš„ä¸€ä¸ªä¸ªä¸åŒçš„èŠ‚ç‚¹ã€‚é€šè¿‡é‡Šæ”¾1æ¬¡æŠ€èƒ½ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»å›¾ä¸­HPå€¼è¾ƒå¤§çš„èŠ‚ç‚¹å‘HPå€¼æ›´å°çš„èŠ‚ç‚¹è½¬ç§»ã€‚</p>
<p>æœ¬é¢˜è¦æ±‚çš„ä¼˜åŒ–ç›®æ ‡æ˜¯é‡Šæ”¾æŠ€èƒ½æ¬¡æ•°æœ€å°‘ï¼Œè¿™æ„å‘³ç€å‡å¦‚æˆ‘ä»¬ç”¨å›¾ä¸­ç›¸é‚»ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„é‚£æ¡è¾¹ä»£è¡¨"é‡Šæ”¾ä¸€æ¬¡æŠ€èƒ½"ï¼Œé‚£ä¹ˆæœ¬é¢˜å°±è½¬æ¢æˆäº†ä¸€ä¸ªä»æºèŠ‚ç‚¹ï¼ˆBOSSçš„èµ·å§‹HPï¼‰åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼ˆBOSSå¤„åœ¨è™šå¼±çŠ¶æ€çš„HPï¼‰çš„å•æºæœ€çŸ­è·¯é—®é¢˜ã€‚</p>
<p>æ›´è¿›ä¸€æ­¥åœ°ï¼Œç”±äºæœ¬é¢˜å›¾ä¸­æ‰€æœ‰çš„è¾¹çš„é•¿åº¦éƒ½ä¸º1ï¼ˆé‡Šæ”¾1æ¬¡æŠ€èƒ½å³å¯ä»ä¸€ä¸ªèŠ‚ç‚¹/HPè½¬æ¢åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹/HPï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨BFSç®—æ³•è¿›è¡Œæ±‚è§£ã€‚</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cassert&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> INF (1&lt;&lt;30)</span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-type">int</span> t;
  std::cin &gt;&gt; t;
  <span class="hljs-keyword">while</span> (t-- &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-type">int</span> hp, lower_hp, upper_hp;
    <span class="hljs-comment">// 0&lt;LowerHp&lt;UpperHp&lt;Hp&lt;=1000</span>
    std::cin &gt;&gt; hp &gt;&gt; lower_hp &gt;&gt; upper_hp;

    <span class="hljs-type">int</span> n; <span class="hljs-comment">// æŠ€èƒ½æ•°</span>
    std::cin &gt;&gt; n;

    <span class="hljs-comment">// d[i] ç¬¬iä¸ªæŠ€èƒ½å¯ä»¥å‡å°‘çš„æ°”è¡€å€¼</span>
    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">d</span><span class="hljs-params">(n)</span></span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) {
      std::cin &gt;&gt; d[i];
    }

    std::queue&lt;<span class="hljs-type">int</span>&gt; q;
    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">dist</span><span class="hljs-params">(hp + <span class="hljs-number">1</span>, INF)</span></span>;

    q.<span class="hljs-built_in">push</span>(hp);
    dist[hp] = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) {
      <span class="hljs-type">int</span> cur_hp = q.<span class="hljs-built_in">front</span>();
      q.<span class="hljs-built_in">pop</span>();

      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> cur_d : d) {
        <span class="hljs-type">int</span> next_hp = cur_hp - cur_d;
        <span class="hljs-keyword">if</span> (next_hp &gt;= <span class="hljs-number">0</span> &amp;&amp; dist[next_hp] == INF) {
          dist[next_hp] = dist[cur_hp] + <span class="hljs-number">1</span>;
          q.<span class="hljs-built_in">push</span>(next_hp);
        }
      }
    }

    <span class="hljs-type">int</span> ans = INF;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> target = lower_hp; target &lt;= upper_hp; ++target) {
      ans = std::<span class="hljs-built_in">min</span>(ans, dist[target]);
    }

    std::cout &lt;&lt; ((ans &gt;= INF) ? <span class="hljs-number">0</span> : ans) &lt;&lt; std::endl;
  }
}

</code></pre>
<h2 data-id="heading-18">é£èˆ¹å…¥ä¾µ</h2>
<p>åœ¨ä¸€æ¬¡è”åˆä½œæˆ˜ä¸­ï¼Œä½ æŒ‡æŒ¥çš„ <code>n</code> ï¼ˆ1 â‰¤ n â‰¤ 10^6ï¼‰åç©å®¶åŒæ—¶å¯¹æ•Œæ–¹é£èˆ¹é‡Šæ”¾<strong>èƒ½é‡ç‚®</strong>ã€‚ç¬¬ <code>i</code> ä¸ªç©å®¶çš„èƒ½é‡ç‚®åœ¨æ•´æ•°æ—¶åˆ» <code>a[i]</code> ï¼ˆ0 â‰¤ a[i] â‰¤ 10^6ï¼‰å¼€å§‹ç”Ÿæ•ˆï¼ŒæŒç»­æ°å¥½ <code>keep_time</code> ï¼ˆ1 â‰¤ keep_time â‰¤ 10^6ï¼‰ä¸ªè¿ç»­çš„æ•´æ•°æ—¶åˆ»ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒåœ¨æ—¶åˆ» <code>a[i], a[i]+1, ..., a[i]+keep_time-1</code> éƒ½ä¼šé€ æˆä¼¤å®³ï¼‰ã€‚èƒ½é‡ç‚®åœ¨æ¯ä¸ªè¢«è¦†ç›–çš„æ•´æ•°æ—¶åˆ»å¯¹é£èˆ¹é€ æˆå›ºå®šçš„ <code>b[i]</code>ï¼ˆ1 â‰¤ b[i] â‰¤ 10^6ï¼‰ç‚¹ä¼¤å®³ã€‚</p>
<p>åœ¨ä»»æ„ä¸€ä¸ªæ•´æ•°æ—¶åˆ»ï¼Œé£èˆ¹å—åˆ°çš„æ€»ä¼¤å®³ç­‰äºæ­¤æ—¶åˆ»æ‰€æœ‰å¤„äºç”Ÿæ•ˆçŠ¶æ€çš„èƒ½é‡ç‚®çš„ <code>b[i]</code> ä¹‹å’Œã€‚è¯·è®¡ç®—é£èˆ¹åœ¨æ‰€æœ‰æ•´æ•°æ—¶åˆ»ä¸­æ‰€æ‰¿å—çš„<strong>æœ€å¤§æ€»ä¼¤å®³</strong>ã€‚</p>
<h3 data-id="heading-19">è¾“å…¥è¯´æ˜</h3>
<ul>
<li>
<p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°ï¼š<code>n</code>ï¼ˆç©å®¶æ•°ï¼‰å’ŒÂ <code>keep_time</code>ï¼ˆæ¯ä¸ªèƒ½é‡ç‚®çš„æŒç»­æ—¶é•¿ï¼‰ã€‚</p>
</li>
<li>
<p>æ¥ä¸‹æ¥Â <code>n</code>Â è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°Â <code>a[i]</code>Â å’ŒÂ <code>b[i]</code>ï¼š</p>
<ul>
<li><code>a[i]</code>Â â€”â€” ç¬¬Â <code>i</code>Â ä¸ªèƒ½é‡ç‚®å¼€å§‹ç”Ÿæ•ˆçš„æ•´æ•°æ—¶åˆ»ï¼ˆèµ·å§‹æ—¶åˆ»ï¼ŒåŒ…å«åœ¨å†…ï¼‰ã€‚</li>
<li><code>b[i]</code>Â â€”â€” ç¬¬Â <code>i</code>Â ä¸ªèƒ½é‡ç‚®åœ¨æ¯ä¸ªè¢«è¦†ç›–æ—¶åˆ»é€ æˆçš„ä¼¤å®³å€¼ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-20">è¾“å‡ºè¯´æ˜</h3>
<p>è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºé£èˆ¹åœ¨ä»»æ„æ•´æ•°æ—¶åˆ»å—åˆ°çš„æœ€å¤§æ€»ä¼¤å®³ã€‚</p>
<h3 data-id="heading-21">æµ‹è¯•ç”¨ä¾‹</h3>
<p>è¾“å…¥1ï¼š</p>
<pre><code class="hljs">3 4
1 3
2 5
6 2
</code></pre>
<p>è¾“å‡º1ï¼š</p>
<pre><code class="hljs">8
</code></pre>
<p>è¾“å…¥2ï¼š</p>
<pre><code class="hljs">4 5
0 10
0 20
0 30
0 40
</code></pre>
<p>è¾“å‡º2ï¼š</p>
<pre><code class="hljs">100
</code></pre>
<p>è¾“å…¥3ï¼š</p>
<pre><code class="hljs">3 1
5 7
2 3
5 10
</code></pre>
<p>è¾“å‡º3ï¼š</p>
<pre><code class="hljs">17
</code></pre>
<h3 data-id="heading-22">æš´åŠ›è§£æ³•</h3>
<p>åªèƒ½è¿‡60%çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>æ€§èƒ½ç“¶é¢ˆï¼šåœ¨æ¯ä¸ªæ—¶é—´ç‚¹ä¸Šï¼Œéƒ½éœ€è¦éå†æ‰€æœ‰ç©å®¶çš„èƒ½é‡ç‚®ï¼Œè®¡ç®—å½“å‰æ—¶é—´ç‚¹çš„æ€»ä¼¤å®³å€¼ã€‚</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">/* æˆ‘æ–¹ç©å®¶æ•°é‡ï¼Œèƒ½é‡ç‚®æŒç»­æ—¶é—´ */</span>
    <span class="hljs-type">int</span> n, keep_time;
    std::cin &gt;&gt; n &gt;&gt; keep_time;

    <span class="hljs-comment">/*
     * nè¡Œï¼Œa[i]æ¯ä¸ªèƒ½é‡ç‚®å¯¹é£èˆ¹é€ æˆä¼¤å®³çš„å¼€å§‹æ—¶é—´
     * b[i] æ¯ä¸ªèƒ½é‡ç‚®å¯¹é£èˆ¹é€ æˆä¼¤å®³çš„ä¼¤å®³å€¼
     */</span>
    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int64_t</span>&gt;    <span class="hljs-title">a</span><span class="hljs-params">( n )</span></span>;
    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int64_t</span>&gt;    <span class="hljs-title">b</span><span class="hljs-params">( n )</span></span>;
    <span class="hljs-type">int</span> max_time = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> ( <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i ) {
        std::cin &gt;&gt; a[i] &gt;&gt; b[i];
        max_time = std::<span class="hljs-built_in">max</span>( max_time, a[i] + keep_time - <span class="hljs-number">1</span> );
    }

    <span class="hljs-type">int64_t</span> ans = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> current_time = <span class="hljs-number">0</span>; current_time &lt;= max_time; ++current_time ) {
        <span class="hljs-comment">/* éå†æ‰€æœ‰ç©å®¶ï¼Œæ£€æŸ¥å“ªäº›ç©å®¶çš„èƒ½é‡ç‚®å¤„äºæœ‰æ•ˆåŒºé—´ */</span>
        <span class="hljs-type">int64_t</span> sum = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> ( <span class="hljs-type">int</span> player = <span class="hljs-number">0</span>; player &lt; n; ++player ) {
            <span class="hljs-keyword">if</span> ( a[player] &lt;= current_time &amp;&amp; current_time &lt; a[player] + keep_time ) {
                sum += b[player];
            }
        }
        ans = std::<span class="hljs-built_in">max</span>( ans, sum );
    }

    std::cout &lt;&lt; ans;
}
</code></pre>
<h3 data-id="heading-23">ä¼˜åŒ–è§£æ³•</h3>
<p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨æ¯ä¸ªæ—¶é—´ç‚¹éƒ½ä»å¤´è®¡ç®—æ€»çš„ä¼¤å®³å€¼ã€‚tæ—¶åˆ»çš„æ€»ä¼¤å®³å€¼ï¼Œç›¸è¾ƒäºt-1æ—¶åˆ»çš„æ€»ä¼¤å®³å€¼ï¼Œåªæœ‰å¯èƒ½å½“tæ—¶åˆ»æœ‰èƒ½é‡ç‚®è¿›å…¥å¯ç”¨çŠ¶æ€ï¼Œæˆ–è€…æœ‰èƒ½é‡ç‚®çš„æœ‰æ•ˆçŠ¶æ€ç»“æŸï¼Œæ‰å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚</p>
<p>æ®æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å€Ÿé‰´å·®åˆ†æ•°ç»„/æ»‘åŠ¨çª—å£/æ‰«æçº¿çš„æ€æƒ³ï¼Œæ„å»ºæ›´é«˜æ•ˆçš„ç®—æ³•ã€‚</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span>

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Event</span> {
  <span class="hljs-type">int</span> time;
  <span class="hljs-type">int</span> diff;
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  std::ios_base::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);
  std::cin.<span class="hljs-built_in">tie</span>(<span class="hljs-literal">NULL</span>);
  std::cout.<span class="hljs-built_in">tie</span>(<span class="hljs-literal">NULL</span>);

  <span class="hljs-type">int</span> n, keep_time;
  std::cin &gt;&gt; n &gt;&gt; keep_time;

  std::vector&lt;Event&gt; events;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) {
    Event start_event;
    std::cin &gt;&gt; start_event.time &gt;&gt; start_event.diff;

    Event end_event = {
      .time = start_event.time + keep_time,
      .diff = -start_event.diff,
    };

    events.<span class="hljs-built_in">emplace_back</span>(start_event);
    events.<span class="hljs-built_in">emplace_back</span>(end_event);
  }

  <span class="hljs-comment">// å¯¹æ‰€æœ‰äº‹ä»¶ï¼ŒæŒ‰æ—¶é—´å…ˆåæ’åº</span>
  std::<span class="hljs-built_in">sort</span>(events.<span class="hljs-built_in">begin</span>(), events.<span class="hljs-built_in">end</span>(), [](<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; a, <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; b) -&gt; <span class="hljs-type">bool</span> {
    <span class="hljs-keyword">return</span> a.time &lt; b.time;
  });

  <span class="hljs-type">int64_t</span> ans = <span class="hljs-number">0</span>;
  <span class="hljs-type">int64_t</span> sum = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; events.<span class="hljs-built_in">size</span>(); ++i) {
    sum += events[i].diff;
    <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span> == events.<span class="hljs-built_in">size</span>() || events[i].time &lt; events[i + <span class="hljs-number">1</span>].time) {
      ans = std::<span class="hljs-built_in">max</span>(ans, sum);
    }
  }

  std::cout &lt;&lt; ans;
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React ç»„ä»¶å°è£…æœ€ä½³å®è·µï¼š6 æ¡è®©ä½ å°‘æ‰å¤´å‘çš„ç§˜è¯€]]></title>    <link>https://juejin.cn/post/7596166721627684910</link>    <guid>https://juejin.cn/post/7596166721627684910</guid>    <pubDate>2026-01-18T07:20:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596166721627684910" data-draft-id="7596181746062376987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React ç»„ä»¶å°è£…æœ€ä½³å®è·µï¼š6 æ¡è®©ä½ å°‘æ‰å¤´å‘çš„ç§˜è¯€"/> <meta itemprop="keywords" content="ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2026-01-18T07:20:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éœæµ¦å°ç å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1996368847058071"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React ç»„ä»¶å°è£…æœ€ä½³å®è·µï¼š6 æ¡è®©ä½ å°‘æ‰å¤´å‘çš„ç§˜è¯€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1996368847058071/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éœæµ¦å°ç å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T07:20:13.000Z" title="Sun Jan 18 2026 07:20:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠå‰ç«¯å¼€å‘ä¸­ä¸€ä¸ªæ—¢è®©äººå¤´ç–¼åˆè®©äººæ¬²ç½¢ä¸èƒ½çš„è¯é¢˜â€”â€”React ç»„ä»¶çš„å°è£…ã€‚æ¯•ç«Ÿï¼Œè°ä¸æƒ³å†™å‡ºä¼˜é›…åˆèªæ˜çš„ä»£ç ï¼Œè®©åŒäº‹ä»¬çœ‹äº†éƒ½å¿ä¸ä½ç»™ä½ ç‚¹ä¸ªèµå‘¢ï¼Ÿ</p>
<p>åœ¨å‰ç«¯å¼€å‘çš„æ±Ÿæ¹–ä¸­ï¼ŒReact ç»„ä»¶å°è£…å¯æ˜¯ä¿®ç‚¼å†…åŠŸçš„å¿…ç»ä¹‹è·¯ã€‚ä¸€ä¸ªå¥½çš„ç»„ä»¶èƒ½è®©ä½ çš„ä»£ç åƒä¸ç»¸ä¸€æ ·é¡ºæ»‘ï¼Œè€Œä¸€ä¸ªå·®åŠ²çš„ç»„ä»¶...å—¯ï¼Œå¯èƒ½ä¼šè®©ä½ æ€€ç–‘äººç”Ÿã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±èŠèŠ React ç»„ä»¶å°è£…çš„ 6 æ¡æœ€ä½³å®è·µï¼ŒåŠ©ä½ åœ¨å‰ç«¯ä¸–ç•Œä¸­å°‘è¸©å‘ã€å°‘æ‰å‘ï¼</p>
<hr/>
<h2 data-id="heading-0">1. <strong>å•ä¸€èŒè´£ï¼šä¸€ä¸ªç»„ä»¶åªå¹²ä¸€ä»¶äº‹</strong></h2>
<p>é¦–å…ˆï¼Œå’±ä»¬å¾—æ˜ç¡®ä¸€ç‚¹ï¼šç»„ä»¶ä¸æ˜¯è¶…äººï¼Œå®ƒæ²¡å¿…è¦å•¥éƒ½å¹²ï¼ä¸€ä¸ªç»„ä»¶çš„èŒè´£è¶Šå¤šï¼Œå®ƒçš„å¤æ‚åº¦å°±è¶Šé«˜ï¼Œæœ€åå°±ä¼šå˜æˆâ€œä»£ç ä¹±ç‚–â€ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œä½ è®©ä¸€ä¸ªæŒ‰é’®ç»„ä»¶æ—¢è´Ÿè´£æ˜¾ç¤ºæ–‡å­—ï¼Œåˆè´Ÿè´£ç®¡ç† API è°ƒç”¨ï¼Œå†é¡ºä¾¿ç®¡ç®¡ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œè¿™ä¸å°±æ˜¯é€¼ç€å®ƒâ€œè¿‡åŠ³æ­»â€å—ï¼Ÿ</p>
<p>âœ…<strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>æ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹ï¼Œä¸”åšå¥½å®ƒã€‚</li>
<li>å¦‚æœå‘ç°æŸä¸ªç»„ä»¶çš„ä»£ç è¶Šæ¥è¶Šé•¿ï¼Œé‚£å°±åœä¸‹æ¥æƒ³æƒ³ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥æ‹†åˆ†æˆæ›´å°çš„å­ç»„ä»¶ã€‚</li>
</ul>
<p><strong>æç¬‘æ¡ˆä¾‹ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// ä¸€ä¸ªç¾éš¾æ€§çš„â€œä¸‡èƒ½ç»„ä»¶â€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">DisasterComponent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ç®¡ç†çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> [isLoggedIn, setIsLoggedIn] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>([]);
  
  <span class="hljs-comment">// åš API è°ƒç”¨</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>()).<span class="hljs-title function_">then</span>(setData);
  }, []);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {isLoggedIn ? 'æ¬¢è¿å›æ¥ï¼' : 'è¯·ç™»å½•'}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsLoggedIn(!isLoggedIn)}&gt;åˆ‡æ¢ç™»å½•çŠ¶æ€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {data.map(item =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>)}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>è¿™ä»£ç çœ‹å¾—å¤´çš®å‘éº»å§ï¼Ÿæ‹†åˆ†æˆå­ç»„ä»¶åï¼Œä¸–ç•Œç¬é—´æ¸…å‡€äº†ï¼</p>
<hr/>
<h2 data-id="heading-1">2. <strong>å¯å¤ç”¨æ€§ï¼šåˆ«æŠŠç»„ä»¶å†™å¾—åƒä¸€æ¬¡æ€§ç­·å­</strong></h2>
<p>å†™ React ç»„ä»¶æ—¶ï¼Œåƒä¸‡åˆ«æƒ³ç€â€œåæ­£è¿™ä¸ªåŠŸèƒ½åªç”¨ä¸€æ¬¡â€ã€‚ä½ ä»¥ä¸ºæ˜¯ä¸€æ¬¡æ€§ç­·å­ï¼Œç»“æœä¸‹æ¬¡åˆæœ‰ç±»ä¼¼éœ€æ±‚æ—¶ï¼Œåªèƒ½å†é€ ä¸€ä¸ªå·®ä¸å¤šçš„è½®å­ã€‚è¿™æ ·ä¸€æ¥ï¼Œä½ çš„ä»£ç ä»“åº“å¾ˆå¿«ä¼šå˜æˆâ€œè½®å­åšç‰©é¦†â€ã€‚</p>
<p>âœ…<strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>æŠŠé€šç”¨é€»è¾‘æŠ½å‡ºæ¥ï¼Œåšæˆå¯å¤ç”¨çš„ç»„ä»¶ã€‚</li>
<li>å¦‚æœæœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡ <code>props</code> æˆ–è€… <code>children</code> æ¥å®šåˆ¶åŒ–ã€‚</li>
</ul>
<p><strong>æç¬‘æ¡ˆä¾‹ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// ä¸å¯å¤ç”¨çš„â€œåœŸå‘³æŒ‰é’®â€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">RedButton</span> = (<span class="hljs-params"/>) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">red</span>' }}&gt;</span>çº¢è‰²æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">BlueButton</span> = (<span class="hljs-params"/>) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">blue</span>' }}&gt;</span>è“è‰²æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
</code></pre>
<p>æ”¹è¿›åï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Button</span> = (<span class="hljs-params">{ color, children }</span>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color</span> }}&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
);

<span class="hljs-comment">// ç”¨æ³•</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"red"</span>&gt;</span>çº¢è‰²æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"blue"</span>&gt;</span>è“è‰²æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
</code></pre>
<p>çœ‹å§ï¼Œä¸€ä¸ªé€šç”¨çš„ Button åˆ†åˆ†é’Ÿè§£å†³é—®é¢˜ï¼</p>
<hr/>
<h2 data-id="heading-2">3. <strong>çŠ¶æ€ç®¡ç†ï¼šåˆ«æŠŠçŠ¶æ€å¡è¿›æ¯ä¸ªè§’è½</strong></h2>
<p>React çš„çŠ¶æ€ç®¡ç†å°±åƒå…»å® ç‰©ï¼Œä½ å¾—å¥½å¥½è§„åˆ’å®ƒä»¬ä½åœ¨å“ªå„¿ã€åƒä»€ä¹ˆã€‚å¦‚æœä½ éšä¾¿æŠŠçŠ¶æ€å¡è¿›æ¯ä¸ªç»„ä»¶ï¼Œé‚£åˆ°æœ€åï¼Œæ•´ä¸ªé¡¹ç›®å¯èƒ½å°±ä¼šå˜æˆâ€œçŠ¶æ€è¿·å®«â€ï¼Œè¿ä½ è‡ªå·±éƒ½æ‰¾ä¸åˆ°åŒ—ã€‚</p>
<p>âœ…<strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>çŠ¶æ€åº”è¯¥å°½é‡æå‡åˆ°æœ€è¿‘çš„å…¬å…±çˆ¶ç»„ä»¶ï¼Œæˆ–ç”¨ Context/Redux/Zustand ç­‰è¿›è¡Œé›†ä¸­ç®¡ç†ã€‚</li>
<li>åˆ«è®©ä¸éœ€è¦çŠ¶æ€çš„ç»„ä»¶ä¹Ÿå‚ä¸ç®¡ç†ï¼Œä¿æŒå®ƒä»¬â€œæ— çŠ¶æ€â€çš„æ¸…çˆ½æ¨¡æ ·ã€‚</li>
</ul>
<p><strong>æç¬‘æ¡ˆä¾‹ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// çŠ¶æ€ç®¡ç†å¾—åƒä¸€é”…ç²¥</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Parent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [value, setValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">setValue</span>=<span class="hljs-string">{setValue}</span> /&gt;</span></span>
  );
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Child</span> = (<span class="hljs-params">{ value, setValue }</span>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setValue(e.target.value)} /&gt;</span>
);
</code></pre>
<p>å¦‚æœçŠ¶æ€ç‰¹åˆ«å¤æ‚ï¼Œç”¨ Context æˆ– Redux æŠŠå®ƒä»¬â€œæ‹å‡ºå»å•ç‹¬å…»â€ï¼Œè¿™æ ·çˆ¶å­å…³ç³»ä¼šæ›´å’Œè°ã€‚</p>
<hr/>
<h2 data-id="heading-3">4. <strong>Prop éªŒè¯ï¼šåˆ«è®©ä½ çš„ç»„ä»¶ä¹±åƒä¸œè¥¿</strong></h2>
<p>React çš„ <code>props</code> å°±åƒæ˜¯ç»™ç»„ä»¶å–‚çš„é¥­èœã€‚å¦‚æœä½ ä¸ç»™å®ƒè§„å®šé¥®é£Ÿï¼Œå®ƒå¯èƒ½ä¼šåƒåè‚šå­ï¼ˆè¿è¡Œé”™è¯¯ï¼‰ã€‚æ‰€ä»¥å•Šï¼ŒProp éªŒè¯éå¸¸é‡è¦ï¼</p>
<p>âœ…<strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ PropTypes æˆ– TypeScript æ¥éªŒè¯ props çš„ç±»å‹å’Œå¿…è¦æ€§ã€‚</li>
<li>å¦‚æœæŸä¸ª prop æ˜¯å¿…éœ€çš„ï¼Œä¸€å®šè¦æ ‡è®°å‡ºæ¥ã€‚</li>
</ul>
<p><strong>æç¬‘æ¡ˆä¾‹ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æ²¡æœ‰ Prop éªŒè¯çš„ç¾éš¾ç°åœº</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Greeting</span> = (<span class="hljs-params">{ name }</span>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ä½ å¥½ï¼Œ{name.toUpperCase()}ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span> <span class="hljs-comment">// name ä¸‡ä¸€æ˜¯ undefined å‘¢ï¼Ÿ</span>
);
</code></pre>
<p>æ”¹è¿›åï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">PropTypes</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'prop-types'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Greeting</span> = (<span class="hljs-params">{ name }</span>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ä½ å¥½ï¼Œ{name.toUpperCase()}ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
);

<span class="hljs-title class_">Greeting</span>.<span class="hljs-property">propTypes</span> = {
  <span class="hljs-attr">name</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">string</span>.<span class="hljs-property">isRequired</span>,
};
</code></pre>
<p>è¿™æ ·ä¸€æ¥ï¼Œå–‚é”™é¥­èœçš„æ—¶å€™ React ä¼šç›´æ¥æŠ¥è­¦ï¼</p>
<hr/>
<h2 data-id="heading-4">5. <strong>é¿å…è¿‡åº¦ä¼˜åŒ–ï¼šåˆ«ç»™è‡ªå·±æŒ–å‘</strong></h2>
<p>React çš„æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€é—¨è‰ºæœ¯ï¼Œä½†åƒä¸‡åˆ«èµ°ç«å…¥é­”ã€‚æ¯”å¦‚ï¼Œæœ‰äº›äººä¸ºäº†çœå‡ ä¸ªæ¯«ç§’ï¼Œå°±ç–¯ç‹‚ç”¨ <code>React.memo</code> å’Œ <code>useCallback</code>ï¼Œç»“æœä»£ç å¤æ‚åº¦é£™å‡ï¼Œdebug çš„æ—¶å€™å“­å¾—åƒä¸ªå­©å­ã€‚</p>
<p>âœ…<strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>ä¼˜åŒ–åªåšå¿…è¦çš„ï¼Œä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–ã€‚</li>
<li><code>React.memo</code> å’Œ <code>useCallback</code> æ˜¯å¥½å·¥å…·ï¼Œä½†ç”¨ä¹‹å‰å…ˆé—®è‡ªå·±ï¼šâ€œçœŸçš„éœ€è¦å—ï¼Ÿâ€</li>
</ul>
<p><strong>æç¬‘æ¡ˆä¾‹ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ExpensiveComponent</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ data }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¸²æŸ“äº†ï¼'</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
});
</code></pre>
<p>å¦‚æœ <code>data</code> æ¯æ¬¡éƒ½æ˜¯æ–°å¯¹è±¡ï¼Œé‚£è¿™ä¸ª memo å°±æ˜¯æ‘†è®¾ï¼Œè¿˜ä¸å¦‚ç›´æ¥åˆ æ‰ã€‚</p>
<hr/>
<h2 data-id="heading-5">6. <strong>å†™æ–‡æ¡£ï¼šåˆ«è®©ä½ çš„ç»„ä»¶å˜æˆè¿·å®«</strong></h2>
<p>æœ€åä¸€æ¡ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ¡ï¼šå†™ï¼æ–‡ï¼æ¡£ï¼ä¸€ä¸ªæ²¡æœ‰æ–‡æ¡£çš„ç»„ä»¶ï¼Œå°±åƒä¸€ä¸ªæ²¡æœ‰è¯´æ˜ä¹¦çš„ IKEA å®¶å…·ï¼Œçœ‹ç€ç®€å•ï¼Œç”¨èµ·æ¥å´èƒ½è®©äººå´©æºƒã€‚</p>
<p>âœ…<strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>ä¸ºæ¯ä¸ªç»„ä»¶å†™æ¸…æ¥šåŠŸèƒ½ã€props å’Œç”¨æ³•ã€‚</li>
<li>å¦‚æœæ¡ä»¶å…è®¸ï¼Œå¯ä»¥ç”¨ Storybook æˆ–ç±»ä¼¼å·¥å…·ä¸ºç»„ä»¶ç”Ÿæˆå¯è§†åŒ–æ–‡æ¡£ã€‚</li>
</ul>
<p><strong>æç¬‘æ¡ˆä¾‹ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æ²¡æ–‡æ¡£çš„ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">MysteriousComponent</span> = (<span class="hljs-params">{ a, b, c }</span>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{a + b + c}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre>
<p>è¿™ä¸‰ä¸ª prop æ˜¯å•¥ï¼Ÿè°çŸ¥é“å‘¢ï¼å†™ä¸Šæ–‡æ¡£åï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">//</span> <span class="hljs-string">MysteriousComponent</span> <span class="hljs-string">æ–‡æ¡£</span>
<span class="hljs-attr">props:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">a:</span> <span class="hljs-string">æ•°å­—ï¼Œç¬¬ä¸€ä¸ªåŠ æ•°</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">b:</span> <span class="hljs-string">æ•°å­—ï¼Œç¬¬äºŒä¸ªåŠ æ•°</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">c:</span> <span class="hljs-string">æ•°å­—ï¼Œç¬¬ä¸‰ä¸ªåŠ æ•°</span>
</code></pre>
<p>æ˜¯ä¸æ˜¯ç¬é—´æ¸…æ™°äº†ï¼Ÿ</p>
<hr/>
<p>å¥½äº†ï¼Œè¿™å°±æ˜¯ä»Šå¤©åˆ†äº«çš„ React ç»„ä»¶å°è£…æœ€ä½³å®è·µï¼å¸Œæœ›å¤§å®¶çœ‹å®Œåä¸ä»…å­¦åˆ°äº†ä¸œè¥¿ï¼Œè¿˜èƒ½å¤šç¬‘å‡ å£°ã€‚å¦‚æœä½ è¿˜åœ¨ä¸ºå†™ç»„ä»¶æ‰å¤´å‘ï¼Œé‚£å°±èµ¶ç´§æŠŠè¿™äº›å®è·µç”¨èµ·æ¥å§â€”â€”æ¯•ç«Ÿï¼Œå¤´å‘æ¯”ä»£ç æ›´é‡è¦å•Šï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æ ·å¼å·¥ç¨‹åŒ–ä¸‰å‰‘å®¢ï¼šCSS Modulesã€Scoped CSS ä¸ CSS-in-JS æ·±åº¦å®æˆ˜]]></title>    <link>https://juejin.cn/post/7596299957277704219</link>    <guid>https://juejin.cn/post/7596299957277704219</guid>    <pubDate>2026-01-18T07:37:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596299957277704219" data-draft-id="7595901379016048650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ ·å¼å·¥ç¨‹åŒ–ä¸‰å‰‘å®¢ï¼šCSS Modulesã€Scoped CSS ä¸ CSS-in-JS æ·±åº¦å®æˆ˜"/> <meta itemprop="keywords" content="CSS,å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2026-01-18T07:37:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç§ƒå¤´æ•²ç å°å§å§"/> <meta itemprop="url" content="https://juejin.cn/user/24668014656249"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ ·å¼å·¥ç¨‹åŒ–ä¸‰å‰‘å®¢ï¼šCSS Modulesã€Scoped CSS ä¸ CSS-in-JS æ·±åº¦å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/24668014656249/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç§ƒå¤´æ•²ç å°å§å§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T07:37:51.000Z" title="Sun Jan 18 2026 07:37:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦â€œå·¥ç¨‹åŒ–â€æ ·å¼ï¼Ÿ</h3>
<p>åœ¨æ—©æœŸçš„å‰ç«¯å¼€å‘ä¸­ï¼ŒCSS æ˜¯å…¨å±€çš„ã€‚æˆ‘ä»¬å†™ä¸€ä¸ª <code>.button { color: red }</code>ï¼Œå®ƒä¼šç«‹åˆ»å½±å“é¡µé¢ä¸Šæ‰€æœ‰çš„æŒ‰é’®ã€‚è¿™åœ¨å°å‹é¡¹ç›®ä¸­æˆ–è®¸å¯è¡Œï¼Œä½†åœ¨å¤§å‹åº”ç”¨ã€å¤šäººåä½œæˆ–å¼€æºç»„ä»¶åº“å¼€å‘ä¸­ï¼Œè¿™æ— å¼‚äºâ€œç¾éš¾â€â€”â€”æ ·å¼å†²çªã€ä¼˜å…ˆçº§æˆ˜äº‰ï¼ˆSpecificity Warsï¼‰å±‚å‡ºä¸ç©·ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç°ä»£å‰ç«¯æ¡†æ¶æå‡ºäº†ä¸‰ç§ä¸»æµçš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li><strong>CSS Modules</strong> (React ç”Ÿæ€ä¸»æµæ–¹æ¡ˆ)</li>
<li><strong>Scoped CSS</strong> (Vue ç”Ÿæ€ç»å…¸æ–¹æ¡ˆ)</li>
<li><strong>CSS-in-JS</strong> (Stylus Components ä¸ºä»£è¡¨çš„åŠ¨æ€æ–¹æ¡ˆ)</li>
</ol>
<p>æœ¬æ–‡å°†é€šè¿‡ä¸‰ä¸ªå®æˆ˜ Demo (<code>css-demo</code>, <code>vue-css-demo</code>, <code>styled-component-demo</code>)ï¼Œå¸¦ä½ æ·±å…¥ç†è§£è¿™ä¸‰ç§æ–¹æ¡ˆçš„åŸç†ã€å·®å¼‚åŠé¢è¯•è€ƒç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šCSS Modules - åŸºäºæ–‡ä»¶çš„æ¨¡å—åŒ–</h3>
<p><strong>åœºæ™¯æè¿°ï¼š</strong><br/>
åœ¨ <code>css-demo</code> é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸å†ç›´æ¥ä½¿ç”¨å…¨å±€çš„ CSSï¼Œè€Œæ˜¯åˆ©ç”¨ Webpack ç­‰æ„å»ºå·¥å…·ï¼Œå°† CSS æ–‡ä»¶ç¼–è¯‘æˆ JavaScript å¯¹è±¡ã€‚</p>
<h4 data-id="heading-2">1.1 æ ¸å¿ƒåŸç†</h4>
<p>CSS Modules å¹¶ä¸æ˜¯ä¸€é—¨æ–°çš„è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§<strong>ç¼–è¯‘æ—¶</strong>çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<ul>
<li><strong>ç¼–è¯‘æœºåˆ¶</strong>ï¼šæ„å»ºå·¥å…·ï¼ˆå¦‚ Webpackï¼‰ä¼šå°† <code>.module.css</code> æ–‡ä»¶ç¼–è¯‘æˆä¸€ä¸ª JS å¯¹è±¡ã€‚</li>
<li><strong>å±€éƒ¨ä½œç”¨åŸŸ</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒCSS Modules ä¸­çš„ç±»åæ˜¯å±€éƒ¨çš„ã€‚æ„å»ºå·¥å…·ä¼šå°†ç±»åï¼ˆå¦‚ <code>.button</code>ï¼‰ç¼–è¯‘æˆå”¯ä¸€çš„å“ˆå¸Œå€¼ï¼ˆå¦‚ <code>_src-components-Button-module__button__23_a0</code>ï¼‰ã€‚</li>
<li><strong>å¯¼å…¥æ–¹å¼</strong>ï¼šåœ¨ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <code>import styles from './Button.module.css'</code> å¯¼å…¥è¿™ä¸ªå¯¹è±¡ï¼Œç„¶åé€šè¿‡ <code>styles.button</code> åŠ¨æ€ç»‘å®šç±»åã€‚</li>
</ul>
<h4 data-id="heading-3">1.2 ä»£ç å®æˆ˜è§£æ</h4>
<p>åœ¨æˆ‘ä»¬çš„ Demo ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªæŒ‰é’®ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Button.jsx</span>
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./Button.module.css'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.button}</span>&gt;</span>My Button<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<p>å¯¹åº”çš„æ ·å¼æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* Button.module.css */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background-color</span>: blue;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
}
</code></pre>
<p><strong>å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</strong></p>
<ol>
<li>æ„å»ºå·¥å…·è¯»å– <code>Button.module.css</code>ã€‚</li>
<li>å°† <code>.button</code> è½¬æ¢ä¸ºç±»ä¼¼ <code>_button_hash123</code> çš„å”¯ä¸€ç±»åã€‚</li>
<li>ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼š<code>{ button: '_button_hash123' }</code>ã€‚</li>
<li>JSX æ¸²æŸ“æ—¶ï¼Œ<code>className</code> å˜æˆäº†å”¯ä¸€çš„å“ˆå¸Œå€¼ï¼Œå®ç°äº†æ ·å¼éš”ç¦»ã€‚</li>
</ol>
<h4 data-id="heading-4">1.3 ç­”ç–‘è§£æƒ‘ä¸é¢è¯•å®å…¸</h4>
<p><strong>Q1ï¼šCSS Modules æ˜¯å¦‚ä½•è§£å†³æ ·å¼å†²çªçš„ï¼Ÿ</strong></p>
<ul>
<li><strong>ç­”ï¼š</strong> æ ¸å¿ƒåœ¨äº<strong>å“ˆå¸ŒåŒ–ï¼ˆHashingï¼‰</strong> ã€‚å®ƒåˆ©ç”¨æ„å»ºå·¥å…·ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°†å±€éƒ¨ç±»åæ˜ å°„ä¸ºå…¨å±€å”¯ä¸€çš„å“ˆå¸Œç±»åã€‚ç”±äºå“ˆå¸Œå€¼çš„å”¯ä¸€æ€§ï¼Œä¸åŒç»„ä»¶å³ä½¿å®šä¹‰äº†åŒåçš„ <code>.button</code>ï¼Œæœ€ç»ˆç”Ÿæˆçš„ CSS ç±»åä¹Ÿæ˜¯ä¸åŒçš„ï¼Œä»è€Œä»æ ¹æœ¬ä¸Šæœç»äº†å†²çªã€‚</li>
</ul>
<p><strong>Q2ï¼šCSS Modules å’Œæ™®é€šçš„ CSS import æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>
<p><strong>ç­”ï¼š</strong></p>
<ul>
<li><strong>æ™®é€š CSS</strong>ï¼š<code>import './style.css'</code> åªæ˜¯å¼•å…¥äº†æ ·å¼ï¼Œç±»åä¾ç„¶æ˜¯å…¨å±€çš„ã€‚</li>
<li><strong>CSS Modules</strong>ï¼š<code>import styles from './style.module.css'</code> å°†æ ·å¼å˜æˆäº† JS å¯¹è±¡ï¼Œä½ å¿…é¡»é€šè¿‡å¯¹è±¡çš„å±æ€§æ¥å¼•ç”¨ç±»åï¼Œä»è€Œå¼ºåˆ¶å®ç°äº†ä½œç”¨åŸŸéš”ç¦»ã€‚</li>
</ul>
</li>
</ul>
<p><strong>Q3ï¼šå¦‚ä½•åœ¨ CSS Modules ä¸­ä½¿ç”¨å…¨å±€æ ·å¼ï¼Ÿ</strong></p>
<ul>
<li>
<p><strong>ç­”ï¼š</strong> è™½ç„¶ä¸æ¨èï¼Œä½†æœ‰æ—¶ç¡®å®éœ€è¦ã€‚å¯ä»¥é€šè¿‡ <code>:global</code> ä¼ªç±»æ¥å£°æ˜ï¼š</p>
<pre><code class="hljs language-css" lang="css">:<span class="hljs-built_in">global</span>(.global-class) {
  <span class="hljs-attribute">color</span>: red;
}
</code></pre>
<p>è¿™æ · <code>global-class</code> å°±ä¸ä¼šè¢«å“ˆå¸ŒåŒ–ï¼Œä¿æŒå…¨å±€ç”Ÿæ•ˆã€‚</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-5">ç¬¬äºŒéƒ¨åˆ†ï¼šVue Scoped CSS - å±æ€§é€‰æ‹©å™¨çš„é­”æ³•</h3>
<p><strong>åœºæ™¯æè¿°ï¼š</strong><br/>
åœ¨ <code>vue-css-demo</code> é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Vue å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰çš„ç»å…¸å†™æ³•ï¼Œé€šè¿‡ <code>&lt;style scoped&gt;</code> å®ç°æ ·å¼éš”ç¦»ã€‚</p>
<h4 data-id="heading-6">2.1 æ ¸å¿ƒåŸç†</h4>
<p>Vue çš„ <code>scoped</code> å±æ€§å®ç°åŸç†ä¸ CSS Modules æˆªç„¶ä¸åŒï¼Œå®ƒé‡‡ç”¨çš„æ˜¯<strong>å±æ€§é€‰æ‹©å™¨</strong>æ–¹æ¡ˆã€‚</p>
<ul>
<li><strong>ç¼–è¯‘æœºåˆ¶</strong>ï¼šVue Loader ä¼šä¸ºç»„ä»¶ä¸­çš„æ¯ä¸ª DOM å…ƒç´ ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„å±æ€§ï¼ˆä¾‹å¦‚ <code>data-v-f3f3eg9</code>ï¼‰ã€‚</li>
<li><strong>æ ·å¼é‡å†™</strong>ï¼šåŒæ—¶ï¼Œå®ƒä¼šå°† <code>&lt;style scoped&gt;</code> ä¸­çš„é€‰æ‹©å™¨ï¼ˆå¦‚ <code>.txt</code>ï¼‰é‡å†™ä¸ºå±æ€§é€‰æ‹©å™¨ï¼ˆå¦‚ <code>.txt[data-v-f3f3eg9]</code>ï¼‰ã€‚</li>
<li><strong>ä½œç”¨åŸŸé™åˆ¶</strong>ï¼šç”±äºåªæœ‰å½“å‰ç»„ä»¶çš„ DOM å…ƒç´ æ‹¥æœ‰è¯¥å±æ€§ï¼Œæ ·å¼è‡ªç„¶åªèƒ½ä½œç”¨äºå½“å‰ç»„ä»¶ã€‚</li>
</ul>
<h4 data-id="heading-7">2.2 ä»£ç å®æˆ˜è§£æ</h4>
<p>åœ¨ Vue çš„ Demo ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªå±‚çº§ï¼š<code>App.vue</code> å’Œ <code>HelloWorld.vue</code>ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- App.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"txt"</span>&gt;</span>Hello world in App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">HelloWorld</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.txt</span> {
  <span class="hljs-attribute">color</span>: red;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- HelloWorld.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"txt"</span>&gt;</span>ä½ å¥½ï¼Œä¸–ç•Œï¼ï¼ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.txt</span> {
  <span class="hljs-attribute">color</span>: blue;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><strong>å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</strong></p>
<ol>
<li>ç¼–è¯‘åï¼Œ<code>App.vue</code> ä¸­çš„ <code>&lt;h1&gt;</code> æ ‡ç­¾è¢«åŠ ä¸Šäº† <code>data-v-abc123</code> å±æ€§ã€‚</li>
<li><code>App.vue</code> çš„ CSS å˜æˆäº† <code>.txt[data-v-abc123] { color: red }</code>ã€‚</li>
<li>ç¼–è¯‘åï¼Œ<code>HelloWorld.vue</code> ä¸­çš„ <code>&lt;h1&gt;</code> æ ‡ç­¾è¢«åŠ ä¸Šäº† <code>data-v-xyz456</code> å±æ€§ã€‚</li>
<li><code>HelloWorld.vue</code> çš„ CSS å˜æˆäº† <code>.txt[data-v-xyz456] { color: blue }</code>ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šçˆ¶å­ç»„ä»¶çš„ <code>.txt</code> ç±»åäº’ä¸å¹²æ‰°ï¼Œå„è‡ªç”Ÿæ•ˆã€‚</li>
</ol>
<h4 data-id="heading-8">2.3 ç­”ç–‘è§£æƒ‘ä¸é¢è¯•å®å…¸</h4>
<p><strong>Q1ï¼šVue Scoped çš„æ€§èƒ½æ€ä¹ˆæ ·ï¼Ÿ</strong></p>
<ul>
<li><strong>ç­”ï¼š</strong> æ€§èƒ½é€šå¸¸å¾ˆå¥½ï¼Œä½†ä¹Ÿæœ‰å±€é™ã€‚å®ƒåªç”Ÿæˆä¸€æ¬¡å±æ€§ï¼Œä¸”åˆ©ç”¨äº†æµè§ˆå™¨åŸç”Ÿçš„å±æ€§é€‰æ‹©å™¨èƒ½åŠ›ã€‚ä½†æ˜¯ï¼Œå¦‚æœç»„ä»¶å±‚çº§å¾ˆæ·±ï¼Œå±æ€§é€‰æ‹©å™¨çš„æƒé‡ä¼šå¢åŠ ã€‚æ­¤å¤–ï¼Œå®ƒæ— æ³•ç©¿é€å­ç»„ä»¶ï¼ˆå³çˆ¶ç»„ä»¶çš„ scoped æ ·å¼æ— æ³•ç›´æ¥ä¿®æ”¹å­ç»„ä»¶çš„æ ·å¼ï¼‰ï¼Œè¿™æ˜¯å®ƒçš„è®¾è®¡åˆè¡·ï¼Œä¹Ÿæ˜¯éœ€è¦æ³¨æ„çš„ç‚¹ã€‚</li>
</ul>
<p><strong>Q2ï¼šå¦‚ä½•ä¿®æ”¹å­ç»„ä»¶çš„æ ·å¼ï¼Ÿï¼ˆæ·±åº¦é€‰æ‹©å™¨ï¼‰</strong></p>
<ul>
<li>
<p><strong>ç­”ï¼š</strong> å½“éœ€è¦ä¿®æ”¹ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼ˆå¦‚ Element Plusï¼‰çš„æ ·å¼æ—¶ï¼Œscoped ä¼šå¤±æ•ˆã€‚Vue æä¾›äº†æ·±åº¦é€‰æ‹©å™¨ï¼š</p>
<ul>
<li><strong>Vue 2</strong>ï¼šä½¿ç”¨ <code>&gt;&gt;&gt;</code> æˆ– <code>/deep/</code>ã€‚</li>
<li><strong>Vue 3</strong>ï¼šä½¿ç”¨ <code>:deep()</code>ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* Vue 3 å†™æ³• */</span>
<span class="hljs-selector-class">.parent-class</span> :<span class="hljs-built_in">deep</span>(.child-class) {
  <span class="hljs-attribute">color</span>: red;
}
</code></pre>
</li>
</ul>
<p><strong>Q3ï¼šscoped ä¼šå¯¼è‡´æ ·å¼æƒé‡å¢åŠ å—ï¼Ÿ</strong></p>
<ul>
<li><strong>ç­”ï¼š</strong> <strong>ä¼šã€‚</strong> å› ä¸ºå®ƒå˜æˆäº†å±æ€§é€‰æ‹©å™¨ï¼Œä¾‹å¦‚ <code>.txt</code> å˜æˆäº† <code>.txt[data-v-123]</code>ï¼Œå…¶æƒé‡é«˜äºæ™®é€šçš„ç±»é€‰æ‹©å™¨ã€‚å¦‚æœåœ¨å…¨å±€æ ·å¼ä¸­å†™äº† <code>.txt { color: blue }</code>ï¼Œè€Œåœ¨ scoped ä¸­å†™äº† <code>.txt { color: red }</code>ï¼Œscoped çš„æ ·å¼ä¼šå› ä¸ºæƒé‡æ›´é«˜è€Œè¦†ç›–å…¨å±€æ ·å¼ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">ç¬¬ä¸‰éƒ¨åˆ†ï¼šStylus Components - CSS-in-JS çš„åŠ¨æ€è‰ºæœ¯</h3>
<p><strong>åœºæ™¯æè¿°ï¼š</strong><br/>
åœ¨ <code>styled-component-demo</code> é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°† CSS ç›´æ¥å†™åœ¨ JavaScript æ–‡ä»¶ä¸­ï¼Œé€šè¿‡æ¨¡æ¿å­—ç¬¦ä¸²åˆ›å»ºç»„ä»¶ã€‚</p>
<h4 data-id="heading-10">3.1 æ ¸å¿ƒåŸç†</h4>
<p>CSS-in-JS æ˜¯ä¸€ç§<strong>è¿è¡Œæ—¶</strong>çš„è§£å†³æ–¹æ¡ˆï¼ˆè™½ç„¶ä¹Ÿæ”¯æŒ SSR å’Œç¼–è¯‘æ—¶ä¼˜åŒ–ï¼‰ã€‚</p>
<ul>
<li><strong>ç»„ä»¶å³æ ·å¼</strong>ï¼šå®ƒå°†æ ·å¼ç›´æ¥ç»‘å®šåˆ°ç»„ä»¶ä¸Šã€‚ä½ ä¸æ˜¯åœ¨ç»„ä»¶ä¸­å¼•ç”¨ç±»åï¼Œè€Œæ˜¯ç›´æ¥åˆ›å»ºä¸€ä¸ªâ€œå¸¦æ ·å¼çš„ç»„ä»¶â€ã€‚</li>
<li><strong>åŠ¨æ€æ€§</strong>ï¼šæ ·å¼å¯ä»¥åƒ JS å˜é‡ä¸€æ ·ä½¿ç”¨ï¼Œæ”¯æŒä¼ å‚ï¼ˆPropsï¼‰ã€‚è¿™ä½¿å¾—ä¸»é¢˜åˆ‡æ¢ã€åŠ¨æ€æ ·å¼å˜å¾—éå¸¸ç®€å•ã€‚</li>
<li><strong>å”¯ä¸€æ€§</strong>ï¼šç”Ÿæˆçš„ç±»åä¹Ÿæ˜¯å”¯ä¸€çš„ï¼ˆé€šå¸¸åŸºäºç»„ä»¶åå’Œå“ˆå¸Œï¼‰ï¼Œç¡®ä¿ä¸æ±¡æŸ“å…¨å±€ã€‚</li>
</ul>
<h4 data-id="heading-11">3.2 ä»£ç å®æˆ˜è§£æ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// App.jsx</span>
<span class="hljs-keyword">import</span> styled <span class="hljs-keyword">from</span> <span class="hljs-string">'styled-components'</span>;

<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¸¦æ ·å¼çš„ Button ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Button</span> = styled.<span class="hljs-property">button</span><span class="hljs-string">`
  background: <span class="hljs-subst">${props =&gt; props.primary ? <span class="hljs-string">'blue'</span> : <span class="hljs-string">'white'</span>}</span>;
  color: <span class="hljs-subst">${props =&gt; props.primary ? <span class="hljs-string">'white'</span> : <span class="hljs-string">'blue'</span>}</span>;
  padding: 8px 16px;
`</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>é»˜è®¤æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">primary</span>&gt;</span>ä¸»è¦æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<p><strong>å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</strong></p>
<ol>
<li><strong>ç»„ä»¶å®šä¹‰</strong>ï¼š<code>styled.button</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶æ¨¡æ¿å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª React ç»„ä»¶ã€‚</li>
<li><strong>åŠ¨æ€æ’å€¼</strong>ï¼šåœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JavaScript é€»è¾‘ï¼ˆå¦‚ä¸‰å…ƒè¡¨è¾¾å¼ï¼‰æ¥æ ¹æ® <code>props</code> åŠ¨æ€ç”Ÿæˆ CSSã€‚</li>
<li><strong>æ¸²æŸ“</strong>ï¼šå½“ <code>&lt;Button primary&gt;</code> æ¸²æŸ“æ—¶ï¼Œåº“ä¼šæ ¹æ®é€»è¾‘ç”Ÿæˆå¯¹åº”çš„ CSS è§„åˆ™ï¼ˆå¦‚ <code>background: blue</code>ï¼‰ï¼Œæ³¨å…¥åˆ° <code>&lt;head&gt;</code> ä¸­ï¼Œå¹¶å°†ç”Ÿæˆçš„å”¯ä¸€ç±»ååº”ç”¨åˆ° DOM ä¸Šã€‚</li>
</ol>
<h4 data-id="heading-12">3.3 ç­”ç–‘è§£æƒ‘ä¸é¢è¯•å®å…¸</h4>
<p><strong>Q1ï¼šCSS-in-JS çš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>
<p><strong>ç­”ï¼š</strong></p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæè‡´çš„åŠ¨æ€èƒ½åŠ›ï¼ˆåŸºäº Props çš„æ ·å¼ï¼‰ã€å¤©ç„¶çš„ç»„ä»¶éš”ç¦»ã€æ”¯æŒä¸»é¢˜ï¼ˆThemeï¼‰ã€è§£å†³äº†å…¨å±€æ±¡æŸ“é—®é¢˜ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šè¿è¡Œæ—¶æ€§èƒ½å¼€é”€ï¼ˆéœ€è¦ JS è®¡ç®—ç”Ÿæˆ CSSï¼‰ã€CSS æ–‡ä»¶ä½“ç§¯æ— æ³•å•ç‹¬ç¼“å­˜ï¼ˆéš JS æ‰“åŒ…ï¼‰ã€è°ƒè¯•æ—¶ç±»åå¯è¯»æ€§å·®ï¼ˆå…¨æ˜¯å“ˆå¸Œï¼‰ã€å­¦ä¹ æˆæœ¬è¾ƒé«˜ã€‚</li>
</ul>
</li>
</ul>
<p><strong>Q2ï¼šCSS-in-JS å’Œ CSS Modules å“ªä¸ªæ›´å¥½ï¼Ÿ</strong></p>
<ul>
<li>
<p><strong>ç­”ï¼š</strong> æ²¡æœ‰ç»å¯¹çš„å¥½åï¼Œå–å†³äºåœºæ™¯ã€‚</p>
<ul>
<li><strong>CSS Modules</strong>ï¼šé€‚åˆå¯¹æ€§èƒ½è¦æ±‚æé«˜ã€æ ·å¼é€»è¾‘ç®€å•çš„é¡¹ç›®ï¼Œæˆ–è€…å›¢é˜Ÿä¹ æƒ¯ä¼ ç»Ÿçš„ CSS å†™æ³•ã€‚</li>
<li><strong>CSS-in-JS</strong>ï¼šé€‚åˆç»„ä»¶åº“å¼€å‘ã€éœ€è¦é«˜åº¦åŠ¨æ€æ ·å¼ï¼ˆå¦‚ä¸»é¢˜åˆ‡æ¢ï¼‰ã€æˆ–è€…å›¢é˜Ÿè¿½æ±‚æè‡´çš„ç»„ä»¶å°è£…æ€§ã€‚</li>
</ul>
</li>
</ul>
<p><strong>Q3ï¼šé¢è¯•å®˜é—®â€œä½ æ€ä¹ˆçœ‹å¾…æŠŠ CSS å†™åœ¨ JS é‡Œï¼Ÿâ€</strong></p>
<ul>
<li>
<p><strong>ç­”ï¼š</strong> è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„â€œåˆ†ç¦»å…³æ³¨ç‚¹â€äº‰è®ºã€‚</p>
<ul>
<li>ä¼ ç»Ÿè§‚ç‚¹è®¤ä¸º HTML/CSS/JS åº”è¯¥åˆ†ç¦»ã€‚</li>
<li>ç°ä»£ç»„ä»¶åŒ–è§‚ç‚¹è®¤ä¸ºï¼Œ<strong>ç»„ä»¶</strong>æ‰æ˜¯å…³æ³¨ç‚¹ã€‚ä¸€ä¸ª Button ç»„ä»¶çš„é€»è¾‘ã€ç»“æ„å’Œæ ·å¼æ˜¯ç´§å¯†è€¦åˆçš„ï¼Œæ”¾åœ¨ä¸€èµ·æ›´åˆ©äºç»´æŠ¤å’Œå¤ç”¨ã€‚CSS-in-JS æ­£æ˜¯è¿™ç§ç†å¿µçš„ä½“ç°ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-13">ç¬¬å››éƒ¨åˆ†ï¼šä¸‰å‰‘å®¢ç»ˆæå¯¹æ¯”ä¸é€‰å‹å»ºè®®</h3>
<p>ä¸ºäº†è®©ä½ æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘æ•´ç†äº†ä»¥ä¸‹å¯¹æ¯”è¡¨ï¼š</p>









































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">CSS Modules</th><th align="left">Vue Scoped</th><th align="left">CSS-in-JS (Stylus Components)</th></tr></thead><tbody><tr><td align="left"><strong>ä½œç”¨åŸŸæœºåˆ¶</strong></td><td align="left">å“ˆå¸Œç±»å (ç¼–è¯‘æ—¶)</td><td align="left">å±æ€§é€‰æ‹©å™¨ (ç¼–è¯‘æ—¶)</td><td align="left">å“ˆå¸Œç±»å (è¿è¡Œæ—¶/ç¼–è¯‘æ—¶)</td></tr><tr><td align="left"><strong>åŠ¨æ€æ€§</strong></td><td align="left">å¼± (éœ€é…åˆ classnames åº“)</td><td align="left">ä¸­ (éœ€é…åˆåŠ¨æ€ class ç»‘å®š)</td><td align="left"><strong>å¼º</strong> (ç›´æ¥ä½¿ç”¨ JS é€»è¾‘)</td></tr><tr><td align="left"><strong>å­¦ä¹ æˆæœ¬</strong></td><td align="left">ä½ (ä»æ˜¯ CSS)</td><td align="left">ä½ (Vue ç‰¹æ€§)</td><td align="left">ä¸­ (éœ€å­¦ä¹ æ–° API)</td></tr><tr><td align="left"><strong>è°ƒè¯•éš¾åº¦</strong></td><td align="left">ä½ (ç±»åæ¸…æ™°)</td><td align="left">ä½</td><td align="left">ä¸­ (ç±»åå“ˆå¸ŒåŒ–)</td></tr><tr><td align="left"><strong>é€‚ç”¨åœºæ™¯</strong></td><td align="left">å¤§å‹ React åº”ç”¨</td><td align="left">Vue 2/3 é¡¹ç›®</td><td align="left">ç»„ä»¶åº“ã€é«˜åŠ¨æ€ UI</td></tr></tbody></table>
<p><strong>é€‰å‹å»ºè®®ï¼š</strong></p>
<ol>
<li>
<p><strong>å¦‚æœä½ åœ¨ç”¨ Vue</strong>ï¼šé¦–é€‰ <code>scoped</code>ï¼Œç®€å•é«˜æ•ˆã€‚å¦‚æœé¡¹ç›®éå¸¸å¤æ‚ï¼Œå¯ä»¥è€ƒè™‘ CSS Modules æˆ– CSS-in-JSã€‚</p>
</li>
<li>
<p><strong>å¦‚æœä½ åœ¨ç”¨ React</strong>ï¼š</p>
<ul>
<li>å¦‚æœè¿½æ±‚æ€§èƒ½å’Œå·¥ç¨‹åŒ–è§„èŒƒï¼Œé€‰ <strong>CSS Modules</strong>ã€‚</li>
<li>å¦‚æœè¿½æ±‚æè‡´çš„ç»„ä»¶å°è£…å’ŒåŠ¨æ€ä¸»é¢˜ï¼Œé€‰ <strong>CSS-in-JS</strong> (å¦‚ Stylus Components æˆ– Emotion)ã€‚</li>
<li>å¦‚æœæ˜¯æ–°é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ Tailwind CSS ç­‰ Utility-First æ–¹æ¡ˆã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-14">ç»“è¯­ï¼šæ ·å¼å·¥ç¨‹åŒ–çš„æœªæ¥</h3>
<p>ä»å…¨å±€ CSS åˆ°ç°åœ¨çš„æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–ï¼Œå‰ç«¯æ ·å¼çš„å‘å±•å§‹ç»ˆå›´ç»•ç€**â€œéš”ç¦»â€<strong>ä¸</strong>â€œå¤ç”¨â€**è¿™ä¸¤ä¸ªæ ¸å¿ƒçŸ›ç›¾ã€‚</p>
<p>CSS Modules å’Œ Vue Scoped é€šè¿‡ç¼–è¯‘æ—¶æ‰‹æ®µè§£å†³äº†éš”ç¦»é—®é¢˜ï¼Œè€Œ CSS-in-JS åˆ™é€šè¿‡è¿è¡Œæ—¶æ‰‹æ®µèµ‹äºˆäº†æ ·å¼ä»¥é€»è¾‘èƒ½åŠ›ã€‚</p>
<p>æ— è®ºä½ é€‰æ‹©å“ªä¸€ç§æ–¹æ¡ˆï¼Œç†è§£å…¶èƒŒåçš„åŸç†ï¼ˆå“ˆå¸ŒåŒ–ã€å±æ€§é€‰æ‹©å™¨ã€åŠ¨æ€æ³¨å…¥ï¼‰éƒ½æ˜¯è‡³å…³é‡è¦çš„ã€‚å¸Œæœ›è¿™ç¯‡åšå®¢èƒ½å¸®åŠ©ä½ åœ¨ <code>css-demo</code>ã€<code>vue-css-demo</code> å’Œ <code>styled-component-demo</code> ä¸‰ä¸ªé¡¹ç›®ä¸­æ¸¸åˆƒæœ‰ä½™ï¼Œå¹¶åœ¨é¢è¯•ä¸­è„±é¢–è€Œå‡ºã€‚</p>
<p><strong>æœ€åçš„æ€è€ƒé¢˜ï¼š</strong></p>
<ul>
<li>å¦‚æœè®©ä½ è®¾è®¡ä¸€ä¸ªç»„ä»¶åº“ï¼ˆå¦‚ Ant Designï¼‰ï¼Œä½ ä¼šé€‰æ‹©å“ªç§æ–¹æ¡ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿï¼ˆæç¤ºï¼šè€ƒè™‘ä¸»é¢˜å®šåˆ¶å’Œæ ·å¼éš”ç¦»çš„å¹³è¡¡ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-15">é™„å½•ï¼šå¸¸è§é¢è¯•é¢˜æ±‡æ€»</h3>
<ol>
<li>
<p><strong>Vue scoped çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>ç­”ï¼šé€šè¿‡å±æ€§é€‰æ‹©å™¨ã€‚ç»™ç»„ä»¶å…ƒç´ åŠ å”¯ä¸€å±æ€§ï¼Œç»™æ ·å¼åŠ å±æ€§é€‰æ‹©å™¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>React ä¸­å¦‚ä½•å®ç° CSS Modulesï¼Ÿ</strong></p>
<ul>
<li>ç­”ï¼šæ–‡ä»¶ååŠ  <code>.module.css</code>ï¼Œå¯¼å…¥ä¸ºå¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡å±æ€§ç»‘å®š classNameã€‚</li>
</ul>
</li>
<li>
<p><strong>CSS-in-JS çš„æ€§èƒ½ç“¶é¢ˆåœ¨å“ªé‡Œï¼Ÿ</strong></p>
<ul>
<li>ç­”ï¼šè¿è¡Œæ—¶è®¡ç®—æ ·å¼ã€æ³¨å…¥ CSSOM çš„æ“ä½œï¼ˆè™½ç„¶ç°ä»£åº“åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œå¦‚ç¼“å­˜ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¦‚ä½•è§£å†³ CSS Modules ä¸­çš„é•¿ç±»åé—®é¢˜ï¼Ÿ</strong></p>
<ul>
<li>ç­”ï¼šé€šå¸¸ä¸éœ€è¦è§£å†³ï¼Œæ„å»ºå·¥å…·ä¼šå‹ç¼©ã€‚å¦‚æœåœ¨ DevTools ä¸­è°ƒè¯•ï¼Œå¯ä»¥é…ç½® Webpack çš„ <code>localIdentName</code> æ¥ç”Ÿæˆå¯è¯»çš„å¼€å‘ç±»åã€‚</li>
</ul>
</li>
<li>
<p><strong>Shadow DOM å’Œä¸Šè¿°æ–¹æ¡ˆæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>ç­”ï¼šShadow DOM æ˜¯æµè§ˆå™¨åŸç”Ÿçš„æ ·å¼éš”ç¦»æ–¹æ¡ˆï¼Œéš”ç¦»æ€§æœ€å¼ºï¼ˆå®Œå…¨ç‹¬ç«‹çš„ DOM æ ‘ï¼‰ï¼Œä½†å…¼å®¹æ€§å’Œé›†æˆæˆæœ¬è¾ƒé«˜ã€‚ä¸Šè¿°æ–¹æ¡ˆéƒ½æ˜¯åŸºäºç°æœ‰ DOM çš„æ¨¡æ‹Ÿéš”ç¦»ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Routerè¿›é˜¶ï¼šæ‡’åŠ è½½ã€æƒé™æ§åˆ¶ä¸æ€§èƒ½ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7596171325532176425</link>    <guid>https://juejin.cn/post/7596171325532176425</guid>    <pubDate>2026-01-18T08:09:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596171325532176425" data-draft-id="7596171325532078121" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Routerè¿›é˜¶ï¼šæ‡’åŠ è½½ã€æƒé™æ§åˆ¶ä¸æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2026-01-18T08:09:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ohyeah"/> <meta itemprop="url" content="https://juejin.cn/user/740446536480618"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Routerè¿›é˜¶ï¼šæ‡’åŠ è½½ã€æƒé™æ§åˆ¶ä¸æ€§èƒ½ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/740446536480618/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ohyeah
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T08:09:34.000Z" title="Sun Jan 18 2026 08:09:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šç°ä»£å‰ç«¯è·¯ç”±çš„é‡è¦æ€§</h2>
<p>åœ¨å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰çš„æ¶æ„ä¸­ï¼Œå‰ç«¯è·¯ç”±æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚ä¸ä¼ ç»Ÿçš„å¤šé¡µé¢åº”ç”¨ä¸åŒï¼ŒSPA é€šè¿‡å‰ç«¯è·¯ç”±å®ç°é¡µé¢é—´çš„æ— ç¼åˆ‡æ¢ï¼Œæ— éœ€æ¯æ¬¡è·³è½¬éƒ½å‘æœåŠ¡å™¨è¯·æ±‚å®Œæ•´çš„ HTML æ–‡æ¡£ã€‚React Router ä½œä¸º React ç”Ÿæ€ä¸­æœ€æµè¡Œçš„è·¯ç”±è§£å†³æ–¹æ¡ˆï¼Œæä¾›äº†å¼ºå¤§è€Œçµæ´»çš„è·¯ç”±ç®¡ç†èƒ½åŠ›ã€‚</p>
<p>æœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ React Router å®è·µé¡¹ç›®ï¼Œæ·±å…¥å‰–æè·¯ç”±é…ç½®ã€ç»„ä»¶æ‡’åŠ è½½ã€åŠ¨æ€è·¯ç”±ã€åµŒå¥—è·¯ç”±ã€è·¯ç”±å®ˆå«ç­‰æ ¸å¿ƒæ¦‚å¿µï¼Œå¸®åŠ©ä½ æŒæ¡ç°ä»£å‰ç«¯è·¯ç”±çš„æœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-1">é¡¹ç›®æ¶æ„æ¦‚è§ˆ</h2>
<p>é¦–å…ˆè®©æˆ‘ä»¬äº†è§£é¡¹ç›®çš„æ•´ä½“ç»“æ„ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">src/
â”œâ”€â”€ <span class="hljs-title class_">App</span>.jsx                 <span class="hljs-comment"># åº”ç”¨æ ¹ç»„ä»¶ï¼Œé…ç½®è·¯ç”±å®¹å™¨</span>
â”œâ”€â”€ router/
â”‚   â””â”€â”€ index.jsx          <span class="hljs-comment"># è·¯ç”±é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ components/             <span class="hljs-comment"># é€šç”¨ç»„ä»¶ç›®å½•</span>
â”‚   â”œâ”€â”€ <span class="hljs-title class_">Navigation</span>.jsx     <span class="hljs-comment"># å¯¼èˆªç»„ä»¶</span>
â”‚   â”œâ”€â”€ <span class="hljs-title class_">ProtectRoute</span>.jsx   <span class="hljs-comment"># è·¯ç”±å®ˆå«ç»„ä»¶</span>
â”‚   â””â”€â”€ <span class="hljs-title class_">LoadingFallback</span>/   <span class="hljs-comment"># åŠ è½½çŠ¶æ€ç»„ä»¶</span>
â”‚       â”œâ”€â”€ index.jsx
â”‚       â””â”€â”€ index.<span class="hljs-keyword">module</span>.css
â”œâ”€â”€ pages/                  <span class="hljs-comment"># é¡µé¢ç»„ä»¶ç›®å½•</span>
â”‚   â”œâ”€â”€ <span class="hljs-title class_">Home</span>.jsx           <span class="hljs-comment"># é¦–é¡µ</span>
â”‚   â”œâ”€â”€ <span class="hljs-title class_">About</span>.jsx          <span class="hljs-comment"># å…³äºé¡µ</span>
â”‚   â”œâ”€â”€ <span class="hljs-title class_">Login</span>.jsx          <span class="hljs-comment"># ç™»å½•é¡µ</span>
â”‚   â”œâ”€â”€ <span class="hljs-title class_">UserProfile</span>.jsx    <span class="hljs-comment"># ç”¨æˆ·è¯¦æƒ…é¡µ</span>
â”‚   â”œâ”€â”€ <span class="hljs-title class_">NotFound</span>.jsx       <span class="hljs-comment"># 404é¡µé¢</span>
â”‚   â”œâ”€â”€ <span class="hljs-title class_">Pay</span>.jsx            <span class="hljs-comment"># æ”¯ä»˜é¡µé¢</span>
â”‚   â”œâ”€â”€ <span class="hljs-title class_">NewPath</span>.jsx        <span class="hljs-comment"># æ–°è·¯å¾„é¡µé¢</span>
â”‚   â””â”€â”€ product/           <span class="hljs-comment"># äº§å“ç›¸å…³é¡µé¢</span>
â”‚       â”œâ”€â”€ index.jsx      <span class="hljs-comment"># äº§å“åˆ—è¡¨é¡µ</span>
â”‚       â”œâ”€â”€ <span class="hljs-title class_">ProductDetail</span>.jsx
â”‚       â””â”€â”€ <span class="hljs-title class_">NewProduct</span>.jsx
â””â”€â”€ index.css              <span class="hljs-comment"># å…¨å±€æ ·å¼</span>
</code></pre>
<p>è¿™ç§æ¨¡å—åŒ–çš„ç›®å½•ç»“æ„æ¸…æ™°åœ°å°†è·¯ç”±é…ç½®ã€é¡µé¢ç»„ä»¶å’Œé€šç”¨ç»„ä»¶åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚</p>
<h2 data-id="heading-2">æ ¸å¿ƒé…ç½®ï¼šè·¯ç”±å®¹å™¨çš„å»ºç«‹</h2>
<h3 data-id="heading-3">App.jsxï¼šè·¯ç”±å®¹å™¨çš„å°è£…</h3>
<p>åœ¨ <code>App.jsx</code> ä¸­ï¼Œæˆ‘ä»¬å»ºç«‹äº†æ•´ä¸ªåº”ç”¨çš„è·¯ç”±åŸºç¡€æ¡†æ¶ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">BrowserRouter</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Router</span>,
  <span class="hljs-comment">// HashRouter</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">Navigation</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Navigation'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">RouterConfig</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>){
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Navigation</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">RouterConfig</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li>
<p><strong>è·¯ç”±æ¨¡å¼é€‰æ‹©</strong>ï¼šæˆ‘ä»¬ä½¿ç”¨ <code>BrowserRouter</code> ä½œä¸ºè·¯ç”±å®¹å™¨ã€‚ä¸ <code>HashRouter</code> ç›¸æ¯”ï¼Œ<code>BrowserRouter</code> ä½¿ç”¨ HTML5 History API å®ç°è·¯ç”±ï¼ŒURL æ›´åŠ æ¸…æ™°ï¼ˆæ²¡æœ‰ <code>#</code> ç¬¦å·ï¼‰ã€‚è¿™åœ¨ç°ä»£æµè§ˆå™¨ä¸­å¾—åˆ°è‰¯å¥½æ”¯æŒï¼Œä¸”æœ‰åˆ©äº SEO ä¼˜åŒ–ï¼Œå¹¶ä¸”æ‰€æœ‰çš„<code>&lt;Link&gt;</code> <code>useNavigate</code> <code>useParams</code>ç­‰Hookå¿…é¡»åœ¨<code>BrowserRouter</code>çš„å­ç»„ä»¶æ ‘ä¸­æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
</li>
<li>
<p><strong>ç»„ä»¶åˆ†ç¦»ç­–ç•¥</strong>ï¼šå°†å¯¼èˆªç»„ä»¶å’Œè·¯ç”±é…ç½®ç»„ä»¶åˆ†ç¦»ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼ä½¿å¾—ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ã€‚å¯¼èˆªç»„ä»¶è´Ÿè´£æ‰€æœ‰å¯¼èˆªé“¾æ¥çš„å±•ç¤ºï¼Œè€Œè·¯ç”±é…ç½®ç»„ä»¶ä¸“æ³¨äºè·¯ç”±è§„åˆ™çš„å£°æ˜ã€‚</p>
</li>
<li>
<p><strong>è·¯ç”±å±‚çº§å…³ç³»</strong>ï¼šæ³¨æ„ <code>Navigation</code> ç»„ä»¶åœ¨ <code>RouterConfig</code> ä¹‹å‰ï¼Œè¿™æ„å‘³ç€æ— è®ºè·¯ç”±å¦‚ä½•åˆ‡æ¢ï¼Œå¯¼èˆªæ éƒ½ä¼šä¿æŒæ˜¾ç¤ºï¼Œè¿™æ˜¯å…¸å‹çš„ SPA å¯¼èˆªæ¨¡å¼ã€‚</p>
</li>
</ol>
<h2 data-id="heading-4">é«˜çº§è·¯ç”±é…ç½®è¯¦è§£</h2>
<h3 data-id="heading-5">è·¯ç”±æ‡’åŠ è½½ï¼šæ€§èƒ½ä¼˜åŒ–çš„åˆ©å™¨</h3>
<p>åœ¨ <code>router/index.jsx</code> ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†å…¨é¢çš„è·¯ç”±æ‡’åŠ è½½ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Route</span>,<span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Navigate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>
<span class="hljs-keyword">import</span> { lazy, <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">LoadingFallback</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/LoadingFallback'</span>

<span class="hljs-comment">// åŠ¨æ€å¼•å…¥é¡µé¢ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../pages/Home'</span>))
<span class="hljs-keyword">const</span> <span class="hljs-title class_">About</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../pages/About'</span>))
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserProfile</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../pages/UserProfile'</span>))
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Product</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../pages/product'</span>))
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ProductDetail</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../pages/product/ProductDetail'</span>))
<span class="hljs-keyword">const</span> <span class="hljs-title class_">NewProduct</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../pages/product/NewProduct'</span>))
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Login</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../pages/Login'</span>))
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ProtectRoute</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../components/ProtectRoute'</span>))
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Pay</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../pages/Pay'</span>))
<span class="hljs-keyword">const</span> <span class="hljs-title class_">NotFound</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../pages/NotFound'</span>))
<span class="hljs-keyword">const</span> <span class="hljs-title class_">NewPath</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../pages/NewPath'</span>))
</code></pre>
<h4 data-id="heading-6">æ‡’åŠ è½½çš„æ ¸å¿ƒæœºåˆ¶</h4>
<p><strong>åŠ¨æ€ import è¯­æ³•</strong>ï¼š<code>import('../pages/Home')</code> è¿”å›ä¸€ä¸ª Promiseï¼ŒWebpack ç­‰æ‰“åŒ…å·¥å…·ä¼šå°†å…¶è¯†åˆ«ä¸ºä»£ç åˆ†å‰²ç‚¹ï¼Œå•ç‹¬æ‰“åŒ…æˆä¸€ä¸ª chunkã€‚</p>
<p><strong>React.lazy çš„å·¥ä½œåŸç†</strong>ï¼š</p>
<ul>
<li><code>React.lazy()</code> æ¥æ”¶ä¸€ä¸ªè¿”å› Promise çš„å‡½æ•°</li>
<li>å½“ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ï¼ŒReact è°ƒç”¨è¯¥å‡½æ•°ï¼Œè§¦å‘åŠ¨æ€å¯¼å…¥</li>
<li>å¯¼å…¥è¿‡ç¨‹ä¸­ï¼ŒReact ä¼šæŠ›å‡ºï¼ˆthrowï¼‰è¿™ä¸ª Promise</li>
<li><code>&lt;Suspense&gt;</code> ç»„ä»¶æ•è·è¿™ä¸ª Promiseï¼Œå¹¶æ˜¾ç¤º fallback å†…å®¹</li>
<li>Promise è§£æå®Œæˆåï¼ŒReact é‡æ–°æ¸²æŸ“ï¼Œæ˜¾ç¤ºçœŸå®ç»„ä»¶</li>
</ul>
<p>è¿™ç§æœºåˆ¶çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>å‡å°åˆå§‹åŒ…ä½“ç§¯</strong>ï¼šåº”ç”¨å¯åŠ¨æ—¶åªåŠ è½½å¿…è¦çš„ä»£ç </li>
<li><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šç”¨æˆ·åœ¨è®¿é—®ç‰¹å®šè·¯ç”±æ—¶æ‰åŠ è½½å¯¹åº”ä»£ç </li>
<li><strong>ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ</strong>ï¼šå‡å°‘é¦–å±åŠ è½½æ—¶é—´ï¼Œç‰¹åˆ«å¯¹äºå¤§å‹åº”ç”¨</li>
</ul>
<h4 data-id="heading-7">ä¸ºä»€ä¹ˆé¦–é¡µä¹Ÿè¦æ‡’åŠ è½½?</h4>
<p>å¾ˆå¤šäººè¯¯ä»¥ä¸ºé¦–é¡µå¿…é¡»åŒæ­¥åŠ è½½ã€‚ä½†å®é™…ä¸Šï¼Œ<strong>ç”¨æˆ·å¯èƒ½é€šè¿‡åˆ†äº«é“¾æ¥ç›´æ¥è®¿é—®/about æˆ– /user/123</strong>ï¼Œè¿™ç§æƒ…å†µä¸‹åŠ è½½é¦–é¡µå°±ä¼šäº§ç”Ÿæµªè´¹</p>
<h4 data-id="heading-8">Suspense çš„ä¼˜é›…é™çº§</h4>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Suspense</span> fallback={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LoadingFallback</span>/&gt;</span></span>}&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        {/* è·¯ç”±é…ç½® */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Suspense</span>&gt;
</code></pre>
<p><code>Suspense</code> ç»„ä»¶ä¸ºæ‰€æœ‰æ‡’åŠ è½½ç»„ä»¶æä¾›äº†ç»Ÿä¸€çš„åŠ è½½çŠ¶æ€ç®¡ç†ã€‚<code>fallback</code> å±æ€§æ¥å—ä¸€ä¸ª React å…ƒç´ ï¼Œåœ¨å­ç»„ä»¶åŠ è½½æœŸé—´æ˜¾ç¤ºã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†è‡ªå®šä¹‰çš„ <code>LoadingFallback</code> ç»„ä»¶ï¼Œæä¾›äº†ç¾è§‚çš„åŠ è½½åŠ¨ç”»ã€‚</p>
<h3 data-id="heading-9">è·¯ç”±å®ˆå«çš„å®ç°</h3>
<p>ä¿æŠ¤è·¯ç”±æ˜¯åº”ç”¨ä¸­å¸¸è§çš„éœ€æ±‚ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦ç”¨æˆ·è®¤è¯çš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProtectRoute</span>(<span class="hljs-params">{ children }</span>){
  <span class="hljs-keyword">const</span> isLoggedIn = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'isLogin'</span>) === <span class="hljs-string">'true'</span>
  <span class="hljs-keyword">if</span>(!isLoggedIn){
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/login"</span> /&gt;</span></span>
  }
  
  <span class="hljs-keyword">return</span> children
}
</code></pre>
<p>åœ¨è·¯ç”±é…ç½®ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/pay"</span> element={
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ProtectRoute</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Pay</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ProtectRoute</span>&gt;</span></span>
}&gt;
&lt;/<span class="hljs-title class_">Route</span>&gt;
</code></pre>
<p>è¿™ç§å®ç°æ–¹å¼å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>é«˜é˜¶ç»„ä»¶æ¨¡å¼</strong>ï¼š<code>ProtectRoute</code> ä½œä¸ºé«˜é˜¶ç»„ä»¶ï¼Œæ¥æ”¶å­ç»„ä»¶ä½œä¸ºå‚æ•°</li>
<li><strong>æ¡ä»¶é‡å®šå‘</strong>ï¼šé€šè¿‡æ£€æŸ¥è®¤è¯çŠ¶æ€å†³å®šæ˜¯å¦é‡å®šå‘åˆ°ç™»å½•é¡µ</li>
<li><strong>æ— ä¾µå…¥æ€§</strong>ï¼šè¢«ä¿æŠ¤çš„ç»„ä»¶æ— éœ€å…³å¿ƒè®¤è¯é€»è¾‘ï¼Œä¿æŒäº†ç»„ä»¶çš„çº¯ç²¹æ€§</li>
<li><strong>çµæ´»æ‰©å±•</strong>ï¼šå¯ä»¥è½»æ¾æ·»åŠ å…¶ä»–æƒé™æ£€æŸ¥é€»è¾‘</li>
</ol>
<h2 data-id="heading-10">è·¯ç”±ç±»å‹å…¨è§£æ</h2>
<h3 data-id="heading-11">åŸºç¡€è·¯ç”±</h3>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/"</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Home</span> /&gt;</span></span>} /&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;</span>
</code></pre>
<p>è¿™æ˜¯æœ€åŸºæœ¬çš„è·¯ç”±é…ç½®ï¼Œç›´æ¥æ˜ å°„è·¯å¾„åˆ°å¯¹åº”ç»„ä»¶ã€‚</p>
<h3 data-id="heading-12">åŠ¨æ€è·¯ç”±ï¼šå‚æ•°åŒ–è·¯å¾„</h3>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/user/:id"</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> /&gt;</span></span>} /&gt;
</code></pre>
<p>åœ¨ <code>UserProfile</code> ç»„ä»¶ä¸­è·å–å‚æ•°ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useParams } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>){
  <span class="hljs-keyword">const</span> { id } = <span class="hljs-title function_">useParams</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>UserProfile {id}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>åŠ¨æ€è·¯ç”±çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li><code>:id</code> æ˜¯è·¯å¾„å‚æ•°å ä½ç¬¦</li>
<li>å¯ä»¥åŒ¹é… <code>/user/123</code>ã€<code>/user/abc</code> ç­‰è·¯å¾„</li>
<li><code>useParams()</code> è¿”å›åŒ…å«æ‰€æœ‰å‚æ•°çš„å¯¹è±¡</li>
<li>æ”¯æŒå¤šä¸ªå‚æ•°ï¼š<code>path="/product/:category/:id"</code></li>
</ul>
<h3 data-id="heading-13">åµŒå¥—è·¯ç”±ï¼šçˆ¶å­è·¯ç”±å…³ç³»</h3>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/products"</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Product</span>/&gt;</span></span>}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">":productId"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">ProductDetail</span>/&gt;</span>} /&gt;</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"new"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">NewProduct</span> /&gt;</span>} /&gt;</span>
&lt;/<span class="hljs-title class_">Route</span>&gt;
</code></pre>
<p>åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ <code>&lt;Outlet /&gt;</code> æ¸²æŸ“å­è·¯ç”±ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Outlet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Product</span>(<span class="hljs-params"/>){
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      Product
      <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p>åµŒå¥—è·¯ç”±çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å…±äº«å¸ƒå±€</strong>ï¼šçˆ¶ç»„ä»¶å¯ä»¥åŒ…å«å¯¼èˆªã€é¡µçœ‰ã€é¡µè„šç­‰å…±äº«å…ƒç´ </li>
<li><strong>å±‚æ¬¡åŒ–URL</strong>ï¼š<code>/products/123</code>ã€<code>/products/new</code> æœ‰æ¸…æ™°çš„å±‚çº§å…³ç³»</li>
<li><strong>ç‹¬ç«‹æ¸²æŸ“</strong>ï¼šå­è·¯ç”±å˜åŒ–æ—¶ï¼Œçˆ¶ç»„ä»¶å¯ä»¥ä¿æŒä¸å˜</li>
</ul>
<h3 data-id="heading-14">é‡å®šå‘è·¯ç”±</h3>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">'/old-path'</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Navigate</span> <span class="hljs-attr">replace</span> <span class="hljs-attr">to</span>=<span class="hljs-string">'/new-path'</span>/&gt;</span></span>} /&gt;
</code></pre>
<p><code>&lt;Navigate /&gt;</code> ç»„ä»¶åœ¨æ¸²æŸ“æ—¶ä¼šæ‰§è¡Œé‡å®šå‘ï¼š</p>
<ul>
<li><code>replace</code> å±æ€§ï¼šä¸º <code>true</code> æ—¶æ›¿æ¢å½“å‰å†å²è®°å½•ï¼Œè€Œä¸æ˜¯æ·»åŠ æ–°è®°å½•</li>
<li><code>to</code> å±æ€§ï¼šç›®æ ‡è·¯å¾„ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„</li>
<li>é¿å…ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨åé€€æŒ‰é’®æ—¶å†æ¬¡è¿›å…¥æ—§è·¯å¾„</li>
</ul>
<h3 data-id="heading-15">é€šé…ç¬¦è·¯ç”±ï¼š404å¤„ç†</h3>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">'*'</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">NotFound</span> /&gt;</span></span>} /&gt;
</code></pre>
<p>é€šé…ç¬¦è·¯ç”± <code>*</code> åŒ¹é…æ‰€æœ‰æœªåŒ¹é…çš„è·¯å¾„ï¼Œé€šå¸¸ç”¨äº404é¡µé¢ã€‚<strong>å¿…é¡»æ”¾åœ¨ <code>&lt;Routes&gt;</code> çš„æœ€å</strong>ï¼Œå¦åˆ™ä¼šæ‹¦æˆªæ‰€æœ‰è·¯ç”±ã€‚</p>
<p>åœ¨ <code>NotFound</code> ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†è‡ªåŠ¨é‡å®šå‘ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useNavigate } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>
<span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">NotFound</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">let</span> navigate = <span class="hljs-title function_">useNavigate</span>()
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/'</span>)
    }, <span class="hljs-number">6000</span>)
  }, [])
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>NotFound<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>è¿™é‡Œä½¿ç”¨äº† <code>useNavigate</code> hook è¿›è¡Œç¼–ç¨‹å¼å¯¼èˆªï¼Œç»“åˆ <code>setTimeout</code> å®ç°å»¶è¿Ÿè·³è½¬ï¼Œ6ç§’åè‡ªåŠ¨è·³å›é¦–é¡µã€‚</p>
<h2 data-id="heading-16">å¯¼èˆªç»„ä»¶çš„å®ç°ç»†èŠ‚</h2>
<h3 data-id="heading-17">æ™ºèƒ½å¯¼èˆªé“¾æ¥</h3>
<p>åœ¨ <code>Navigation.jsx</code> ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†å¸¦æœ‰æ´»åŠ¨çŠ¶æ€æŒ‡ç¤ºçš„å¯¼èˆªé“¾æ¥ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Link</span>, useResolvedPath, useMatch } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Navigation</span>(<span class="hljs-params"/>){
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">isActive</span> = (<span class="hljs-params">to</span>) =&gt; {
    <span class="hljs-keyword">const</span> resolvedPath = <span class="hljs-title function_">useResolvedPath</span>(to)
    
    <span class="hljs-keyword">const</span> match = <span class="hljs-title function_">useMatch</span>({
      <span class="hljs-attr">path</span>: resolvedPath.<span class="hljs-property">pathname</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-literal">true</span>
    })
    
    <span class="hljs-keyword">return</span> match ? <span class="hljs-string">'active'</span> : <span class="hljs-string">''</span>
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isActive(</span>'/')}&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isActive(</span>'/<span class="hljs-attr">about</span>')}&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        {/* å…¶ä»–é“¾æ¥ */}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-18">å…³é”®Hookè§£æ</h4>
<p><strong><code>useResolvedPath</code></strong>ï¼šå°†ä¼ å…¥çš„ <code>to</code> å€¼è§£æä¸ºæ ‡å‡†çš„è·¯å¾„å¯¹è±¡ã€‚è¿™ç¡®ä¿äº†æ— è®ºä¼ å…¥çš„æ˜¯ç›¸å¯¹è·¯å¾„è¿˜æ˜¯ç»å¯¹è·¯å¾„ï¼Œéƒ½èƒ½æ­£ç¡®è§£æã€‚</p>
<p><strong><code>useMatch</code></strong>ï¼šå°†è§£æåçš„è·¯å¾„ä¸å½“å‰URLè¿›è¡ŒåŒ¹é…ï¼š</p>
<ul>
<li><code>path</code>ï¼šè¦åŒ¹é…çš„è·¯å¾„æ¨¡å¼</li>
<li><code>end: true</code>ï¼šè¦æ±‚ç²¾ç¡®åŒ¹é…ã€‚å¦‚æœè®¾ä¸º <code>false</code>ï¼Œè·¯å¾„ <code>/</code> ä¼šåŒ¹é…æ‰€æœ‰ä»¥ <code>/</code> å¼€å¤´çš„è·¯ç”±ï¼ˆå¦‚ <code>/about</code>ï¼‰ï¼Œå¯¼è‡´å¤šä¸ªé“¾æ¥åŒæ—¶æ˜¾ç¤ºæ¿€æ´»çŠ¶æ€</li>
</ul>
<h4 data-id="heading-19">å¯¼èˆªé“¾æ¥çš„ç±»å‹</h4>
<ol>
<li><strong>åŸºç¡€å¯¼èˆª</strong>ï¼š<code>&lt;Link to="/about"&gt;About&lt;/Link&gt;</code></li>
<li><strong>åµŒå¥—è·¯ç”±å¯¼èˆª</strong>ï¼š<code>&lt;Link to="/products/new"&gt;Product New&lt;/Link&gt;</code></li>
<li><strong>å¸¦å‚æ•°è·¯ç”±å¯¼èˆª</strong>ï¼š<code>&lt;Link to="/products/123"&gt;Product Detail&lt;/Link&gt;</code></li>
</ol>
<h2 data-id="heading-20">æ ·å¼ä¸ç”¨æˆ·ä½“éªŒä¼˜åŒ–</h2>
<h3 data-id="heading-21">åŠ è½½çŠ¶æ€ç»„ä»¶</h3>
<p><code>LoadingFallback</code> ç»„ä»¶é€šè¿‡CSSåŠ¨ç”»æä¾›äº†ä¼˜é›…çš„åŠ è½½çŠ¶æ€æŒ‡ç¤ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ—‹è½¬åŠ¨ç”» */</span>
<span class="hljs-keyword">@keyframes</span> spin {
  <span class="hljs-selector-tag">from</span>{ <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">0deg</span>); }
  <span class="hljs-selector-tag">to</span>{ <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">360deg</span>); }
}

<span class="hljs-comment">/* å‘¼å¸æ•ˆæœåŠ¨ç”» */</span>
<span class="hljs-keyword">@keyframes</span> pulse {
  <span class="hljs-number">0%</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.6</span>; }
  <span class="hljs-number">50%</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; }
  <span class="hljs-number">100%</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.6</span>; }
}
</code></pre>
<p>è¿™ç§è®¾è®¡æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œé¿å…äº†é¡µé¢åˆ‡æ¢æ—¶çš„çªå…€æ„Ÿã€‚</p>
<h3 data-id="heading-22">æ´»åŠ¨çŠ¶æ€æ ·å¼</h3>
<p>åœ¨ <code>index.css</code> ä¸­å®šä¹‰äº†æ´»åŠ¨çŠ¶æ€çš„æ ·å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.active</span>{
  <span class="hljs-attribute">color</span>: red;
}
</code></pre>
<p>é€šè¿‡åŠ¨æ€æ·»åŠ  <code>active</code> ç±»åï¼Œç”¨æˆ·å¯ä»¥æ¸…æ™°åœ°äº†è§£å½“å‰æ‰€åœ¨é¡µé¢ã€‚</p>
<h2 data-id="heading-23">æœ€ä½³å®è·µæ€»ç»“</h2>
<h3 data-id="heading-24">1. ä»£ç åˆ†å‰²ç­–ç•¥</h3>
<ul>
<li>å°†è·¯ç”±ç»„ä»¶æŒ‰éœ€åŠ è½½ï¼Œå‡å°åˆå§‹åŒ…ä½“ç§¯</li>
<li>å³ä½¿æ˜¯é¦–é¡µä¹Ÿå¯ä»¥è€ƒè™‘æ‡’åŠ è½½ï¼Œé€‚ç”¨äºç›´æ¥è®¿é—®æ·±å±‚é“¾æ¥çš„åœºæ™¯</li>
<li>ä½¿ç”¨ç»Ÿä¸€çš„ <code>Suspense</code> è¾¹ç•Œç®¡ç†åŠ è½½çŠ¶æ€</li>
</ul>
<h3 data-id="heading-25">2. è·¯ç”±ç»„ç»‡åŸåˆ™</h3>
<ul>
<li>ä½¿ç”¨æ‰å¹³åŒ–çš„è·¯ç”±é…ç½®ç»“æ„</li>
<li>åµŒå¥—è·¯ç”±ç”¨äºæœ‰æ˜ç¡®çˆ¶å­å…³ç³»çš„é¡µé¢</li>
<li>è·¯ç”±é…ç½®ä¸ç»„ä»¶å®šä¹‰åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤</li>
</ul>
<h3 data-id="heading-26">3. å¯¼èˆªè®¾è®¡è¦ç‚¹</h3>
<ul>
<li>ä¿æŒå¯¼èˆªç»„ä»¶çš„ç‹¬ç«‹æ€§</li>
<li>æä¾›æ¸…æ™°çš„æ´»åŠ¨çŠ¶æ€æŒ‡ç¤º</li>
<li>æ”¯æŒç¼–ç¨‹å¼å¯¼èˆªå’Œå£°æ˜å¼å¯¼èˆª</li>
</ul>
<h3 data-id="heading-27">4. é”™è¯¯å¤„ç†ä¸è¾¹ç•Œ</h3>
<ul>
<li>ä½¿ç”¨é€šé…ç¬¦è·¯ç”±å¤„ç†404æƒ…å†µ</li>
<li>è€ƒè™‘ç”¨æˆ·å‹å¥½å‹çš„é”™è¯¯æç¤º</li>
<li>å®ç°è‡ªåŠ¨é‡å®šå‘æœºåˆ¶</li>
</ul>
<h3 data-id="heading-28">5. æƒé™æ§åˆ¶å®ç°</h3>
<ul>
<li>ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¨¡å¼å®ç°è·¯ç”±å®ˆå«</li>
<li>åˆ†ç¦»è®¤è¯é€»è¾‘å’Œä¸šåŠ¡é€»è¾‘</li>
<li>æä¾›å‹å¥½çš„æœªæˆæƒå¤„ç†ï¼ˆé‡å®šå‘åˆ°ç™»å½•é¡µï¼‰</li>
</ul>
<h3 data-id="heading-29">çŠ¶æ€ç®¡ç†é›†æˆ</h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè·¯ç”±çŠ¶æ€ç»å¸¸éœ€è¦ä¸å…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆå¦‚Reduxã€Contextï¼‰é›†æˆï¼š</p>
<ol>
<li><strong>è·¯ç”±å‚æ•°åŒæ­¥</strong>ï¼šå°†è·¯ç”±å‚æ•°åŒæ­¥åˆ°å…¨å±€çŠ¶æ€</li>
<li><strong>å¯¼èˆªçŠ¶æ€ç®¡ç†</strong>ï¼šåœ¨çŠ¶æ€ç®¡ç†ä¸­è®°å½•å¯¼èˆªå†å²</li>
<li><strong>æƒé™çŠ¶æ€é›†æˆ</strong>ï¼šå°†è·¯ç”±å®ˆå«ä¸å…¨å±€æƒé™çŠ¶æ€ç»“åˆ</li>
</ol>
<h3 data-id="heading-30">æµ‹è¯•ç­–ç•¥</h3>
<ol>
<li><strong>è·¯ç”±é…ç½®æµ‹è¯•</strong>ï¼šç¡®ä¿æ‰€æœ‰è·¯ç”±æ­£ç¡®é…ç½®</li>
<li><strong>å¯¼èˆªç»„ä»¶æµ‹è¯•</strong>ï¼šéªŒè¯é“¾æ¥å’Œæ´»åŠ¨çŠ¶æ€</li>
<li><strong>è·¯ç”±å®ˆå«æµ‹è¯•</strong>ï¼šæµ‹è¯•ä¸åŒæƒé™çŠ¶æ€ä¸‹çš„è·¯ç”±è¡Œä¸º</li>
</ol>
<h2 data-id="heading-31">ç»“è¯­</h2>
<p>é€šè¿‡è¿™ä¸ªå®Œæ•´çš„ React Router 6 å®è·µé¡¹ç›®ï¼Œæˆ‘ä»¬æ·±å…¥æ¢è®¨äº†ç°ä»£å‰ç«¯è·¯ç”±çš„å„ä¸ªæ–¹é¢ã€‚ä»åŸºç¡€çš„è·¯ç”±é…ç½®åˆ°é«˜çº§çš„æ‡’åŠ è½½ã€åµŒå¥—è·¯ç”±å’Œè·¯ç”±å®ˆå«ï¼ŒReact Router æä¾›äº†å¼ºå¤§è€Œçµæ´»çš„å·¥å…·é›†æ¥æ„å»ºå¤æ‚çš„å•é¡µé¢åº”ç”¨ã€‚</p>
<p>è®°ä½ï¼Œè‰¯å¥½çš„è·¯ç”±è®¾è®¡ä¸ä»…ä»…æ˜¯æŠ€æœ¯å®ç°ï¼Œæ›´æ˜¯ç”¨æˆ·ä½“éªŒçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚åˆç†çš„è·¯ç”±ç»“æ„ã€æ¸…æ™°çš„URLè®¾è®¡å’Œæµç•…çš„é¡µé¢è¿‡æ¸¡éƒ½èƒ½æ˜¾è‘—æå‡åº”ç”¨è´¨é‡ã€‚</p>
<p>éšç€ React ç”Ÿæ€çš„ä¸æ–­å‘å±•ï¼Œè·¯ç”±ç›¸å…³çš„æ¨¡å¼å’Œæœ€ä½³å®è·µä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ã€‚ä¿æŒå­¦ä¹ ï¼ŒæŒç»­ä¼˜åŒ–ï¼Œæ‰èƒ½åœ¨å¿«é€Ÿå˜åŒ–çš„å‰ç«¯é¢†åŸŸä¸­ä¿æŒç«äº‰åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŠ ä¸Šè¿™ä¸ªReactæœ€ä½³å®è·µSkillï¼Œå†ä¹Ÿä¸æ€•AIå†™ä»£ç ä¸è€ƒè™‘æ€§èƒ½ä¼˜åŒ–äº†]]></title>    <link>https://juejin.cn/post/7596221097864839174</link>    <guid>https://juejin.cn/post/7596221097864839174</guid>    <pubDate>2026-01-18T08:12:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596221097864839174" data-draft-id="7596171325532192809" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŠ ä¸Šè¿™ä¸ªReactæœ€ä½³å®è·µSkillï¼Œå†ä¹Ÿä¸æ€•AIå†™ä»£ç ä¸è€ƒè™‘æ€§èƒ½ä¼˜åŒ–äº†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-18T08:12:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨èˆŸ"/> <meta itemprop="url" content="https://juejin.cn/user/1398234520494366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŠ ä¸Šè¿™ä¸ªReactæœ€ä½³å®è·µSkillï¼Œå†ä¹Ÿä¸æ€•AIå†™ä»£ç ä¸è€ƒè™‘æ€§èƒ½ä¼˜åŒ–äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1398234520494366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨èˆŸ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T08:12:18.000Z" title="Sun Jan 18 2026 08:12:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Vercel å›¢é˜Ÿç»´æŠ¤çš„ React å’Œ Next.js æ€§èƒ½ä¼˜åŒ–æŒ‡å—çš„Skillï¼š React Best Practicesï¼ŒåŒ…å« 45 æ¡è§„åˆ™ï¼Œ8å¤§ç±»çš„ä¼˜åŒ–çš„æ–¹å‘ï¼š</p>









































<table><thead><tr><th>ç±»åˆ«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ¶ˆé™¤ç€‘å¸ƒæµè¯·æ±‚</td><td>ç€‘å¸ƒæµæ˜¯æ€§èƒ½æ€æ‰‹ï¼Œæ¯ä¸ªé¡ºåº await éƒ½ä¼šå¢åŠ å®Œæ•´çš„ç½‘ç»œå»¶è¿Ÿ</td></tr><tr><td>Bundle ä½“ç§¯ä¼˜åŒ–</td><td>å‡å°‘åˆå§‹ bundle å¤§å°ï¼Œæ”¹å–„é¦–æ¬¡å¯äº¤äº’æ—¶é—´ï¼ˆTTIï¼‰å’Œæœ€å¤§å†…å®¹ç»˜åˆ¶ï¼ˆLCPï¼‰</td></tr><tr><td>æœåŠ¡ç«¯æ€§èƒ½</td><td>ä¼˜åŒ–æœåŠ¡ç«¯æ¸²æŸ“å’Œæ•°æ®è·å–ï¼Œæ¶ˆé™¤æœåŠ¡ç«¯ç€‘å¸ƒæµï¼Œå‡å°‘å“åº”æ—¶é—´</td></tr><tr><td>å®¢æˆ·ç«¯æ•°æ®è·å–</td><td>è‡ªåŠ¨å»é‡å’Œé«˜æ•ˆçš„æ•°æ®è·å–æ¨¡å¼ï¼Œå‡å°‘å†—ä½™ç½‘ç»œè¯·æ±‚</td></tr><tr><td>é‡æ¸²æŸ“ä¼˜åŒ–</td><td>å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œæœ€å°åŒ–æµªè´¹çš„è®¡ç®—ï¼Œæå‡ UI å“åº”æ€§</td></tr><tr><td>æ¸²æŸ“æ€§èƒ½</td><td>ä¼˜åŒ–æ¸²æŸ“è¿‡ç¨‹ï¼Œå‡å°‘æµè§ˆå™¨çš„å·¥ä½œé‡</td></tr><tr><td>JavaScript æ€§èƒ½</td><td>çƒ­è·¯å¾„çš„å¾®ä¼˜åŒ–ï¼Œç§¯å°‘æˆå¤šä¹Ÿèƒ½å¸¦æ¥æ˜æ˜¾æ”¹å–„</td></tr><tr><td>é«˜çº§æ¨¡å¼</td><td>é’ˆå¯¹ç‰¹å®šåœºæ™¯çš„é«˜çº§æ¨¡å¼ï¼Œéœ€è¦è°¨æ…å®ç°</td></tr></tbody></table>
<p>æ¥ç€æˆ‘ä»¬æ¥å…·ä½“çœ‹çœ‹ç¬¬ä¸€æ¡ï¼šæ¶ˆé™¤ç€‘å¸ƒæµè¯·æ±‚è¿™ä¸ªç±»åˆ«ï¼Œå®ƒä¸€å…±åˆ†ä¸ºäº†5æ¡rulesï¼š</p>
<p><strong>1ã€async-defer-awaitï¼šåœ¨çœŸæ­£éœ€è¦çš„æ—¶å€™å†ä½¿ç”¨await</strong></p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šåœ¨çœŸæ­£éœ€è¦ä½¿ç”¨åˆ° await æ—¶ä½¿ç”¨ï¼Œé¿å…é˜»å¡å‰ç½®ä¸éœ€è¦ await çš„åœ°æ–¹ã€‚</p>
<p>é”™è¯¯ç¤ºä¾‹ï¼ˆä¸¤ä¸ªåˆ†æ”¯éƒ½è¢«é˜»å¡ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">userId: <span class="hljs-built_in">string</span>, skipProcessing: <span class="hljs-built_in">boolean</span></span>) {
Â Â <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUserData</span>(userId)  <span class="hljs-comment">// æ€»æ˜¯ç­‰å¾…</span>

Â Â <span class="hljs-keyword">if</span> (skipProcessing) {
Â Â Â Â <span class="hljs-comment">// è™½ç„¶ç«‹å³è¿”å›ï¼Œä½†å·²ç»ç­‰å¾…äº† userData</span>
Â Â Â Â <span class="hljs-keyword">return</span> { <span class="hljs-attr">skipped</span>: <span class="hljs-literal">true</span> }
Â Â }

Â Â <span class="hljs-comment">// åªæœ‰è¿™ä¸ªåˆ†æ”¯ä½¿ç”¨ userData</span>
Â Â <span class="hljs-keyword">return</span> <span class="hljs-title function_">processUserData</span>(userData)
}
</code></pre>
<p>æ­£ç¡®ç¤ºä¾‹ï¼ˆåªåœ¨éœ€è¦æ—¶é˜»å¡ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">userId: <span class="hljs-built_in">string</span>, skipProcessing: <span class="hljs-built_in">boolean</span></span>) {
Â Â <span class="hljs-keyword">if</span> (skipProcessing) {
Â Â Â Â <span class="hljs-comment">// ç«‹å³è¿”å›ï¼Œæ— éœ€ç­‰å¾…</span>
Â Â Â Â <span class="hljs-keyword">return</span> { <span class="hljs-attr">skipped</span>: <span class="hljs-literal">true</span> }
Â Â }

Â Â <span class="hljs-comment">// åªåœ¨éœ€è¦æ—¶è·å–</span>
Â Â <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUserData</span>(userId)
Â Â <span class="hljs-keyword">return</span> <span class="hljs-title function_">processUserData</span>(userData)
}
</code></pre>
<p>å¦ä¸€ä¸ªå®é™…åœºæ™¯ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">// é”™è¯¯ï¼šæ¯æ¬¡éƒ½è·å–æƒé™
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> updateResource(resourceId: <span class="hljs-type">string</span>, userId: <span class="hljs-type">string</span>) {
Â Â <span class="hljs-keyword">const</span> permissions = <span class="hljs-built_in">await</span> fetchPermissions(userId)
Â Â <span class="hljs-keyword">const</span> resource = <span class="hljs-built_in">await</span> getResource(resourceId)

Â Â <span class="hljs-keyword">if</span> (!resource) {
Â Â Â Â <span class="hljs-keyword">return</span> { <span class="hljs-keyword">error</span>: <span class="hljs-comment">'Not found' }</span>
Â Â }

Â Â <span class="hljs-keyword">if</span> (!permissions.canEdit) {
Â Â Â Â <span class="hljs-keyword">return</span> { <span class="hljs-keyword">error</span>: <span class="hljs-comment">'Forbidden' }</span>
Â Â }

Â Â <span class="hljs-keyword">return</span> <span class="hljs-built_in">await</span> updateResourceData(resource, permissions)
}

// æ­£ç¡®ï¼šåªåœ¨éœ€è¦æ—¶è·å–
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> updateResource(resourceId: <span class="hljs-type">string</span>, userId: <span class="hljs-type">string</span>) {
Â Â <span class="hljs-keyword">const</span> resource = <span class="hljs-built_in">await</span> getResource(resourceId)

Â Â <span class="hljs-keyword">if</span> (!resource) {
Â Â Â Â <span class="hljs-keyword">return</span> { <span class="hljs-keyword">error</span>: <span class="hljs-comment">'Not found' }  // æå‰è¿”å›ï¼Œçœæ‰æƒé™è¯·æ±‚</span>
Â Â }

Â Â <span class="hljs-keyword">const</span> permissions = <span class="hljs-built_in">await</span> fetchPermissions(userId)

Â Â <span class="hljs-keyword">if</span> (!permissions.canEdit) {
Â Â Â Â <span class="hljs-keyword">return</span> { <span class="hljs-keyword">error</span>: <span class="hljs-comment">'Forbidden' }</span>
Â Â }

Â Â <span class="hljs-keyword">return</span> <span class="hljs-built_in">await</span> updateResourceData(resource, permissions)
}
</code></pre>
<p><strong>2ã€async-parallelï¼šä½¿ç”¨ Promise.all() å¹¶å‘æ‰§è¡Œ</strong></p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šå½“æ¯ä¸ªå¼‚æ­¥æ“ä½œä¹‹é—´æ²¡æœ‰ä¾èµ–å…³ç³»æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Promise.all() æ¥è¿›è¡Œå¹¶å‘æ‰§è¡Œ</p>
<p>é”™è¯¯ç¤ºä¾‹ï¼ˆä¸²è¡Œæ‰§è¡Œï¼Œ3 æ¬¡ç½‘ç»œå¾€è¿”ï¼‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> fetchUser()
<span class="hljs-keyword">const</span> posts = <span class="hljs-keyword">await</span> fetchPosts()
<span class="hljs-keyword">const</span> comments = <span class="hljs-keyword">await</span> fetchComments()
</code></pre>
<p>æ­£ç¡®ç¤ºä¾‹ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼Œ1 æ¬¡ç½‘ç»œå¾€è¿”ï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const <span class="hljs-selector-attr">[user, posts, comments]</span> = await Promise<span class="hljs-selector-class">.all</span>([
Â Â fetchUser(),
Â Â <span class="hljs-built_in">fetchPosts</span>(),
Â Â <span class="hljs-built_in">fetchComments</span>()
])
</code></pre>
<p>è¿™å¯èƒ½æ˜¯æœ€ç®€å•ä½†ä¹Ÿæ˜¯æœ€æœ‰æ•ˆçš„ä¼˜åŒ–ä¹‹ä¸€ã€‚</p>
<p><strong>3ã€async-dependenciesï¼šä½¿ç”¨ better-all å¤„ç†éƒ¨åˆ†ä¾èµ–</strong></p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šå½“å¼‚æ­¥æ“ä½œä¹‹é—´å­˜åœ¨ä¾èµ–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ better-all åº“æ¥è‡ªåŠ¨æœ€å¤§åŒ–å¹¶è¡Œåº¦ã€‚</p>
<p>é—®é¢˜åœºæ™¯ï¼šprofile ä¾èµ– userï¼Œä½† config ä¸ä¾èµ–å…¶ä»–æ“ä½œã€‚</p>
<p>é”™è¯¯ç¤ºä¾‹ï¼ˆprofile ä¸å¿…è¦åœ°ç­‰å¾… configï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const <span class="hljs-selector-attr">[user, config]</span> = await Promise<span class="hljs-selector-class">.all</span>([
Â Â fetchUser(),
Â Â <span class="hljs-built_in">fetchConfig</span>()
])
const profile = await <span class="hljs-built_in">fetchProfile</span>(user.id)  <span class="hljs-comment">// config å·²å®Œæˆï¼Œä½† profile è¿˜è¦ç­‰</span>
</code></pre>
<p>æ­£ç¡®ç¤ºä¾‹ï¼ˆconfig å’Œ profile å¹¶è¡Œè¿è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { all } <span class="hljs-keyword">from</span> <span class="hljs-string">'better-all'</span>

<span class="hljs-keyword">const</span> { user, config, profile } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">all</span>({
Â Â <span class="hljs-keyword">async</span> <span class="hljs-title function_">user</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetchUser</span>() },
Â Â <span class="hljs-keyword">async</span> <span class="hljs-title function_">config</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetchConfig</span>() },
Â Â <span class="hljs-keyword">async</span> <span class="hljs-title function_">profile</span>(<span class="hljs-params"/>) {
Â Â Â Â <span class="hljs-comment">// åªç­‰å¾… userï¼Œä¸ç­‰å¾… config</span>
Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetchProfile</span>((<span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$</span>.<span class="hljs-property">user</span>).<span class="hljs-property">id</span>)
Â Â }
})
</code></pre>
<p>better-all ä¼šè‡ªåŠ¨åˆ†æä¾èµ–å…³ç³»ï¼Œåœ¨æœ€æ—©å¯èƒ½çš„æ—¶åˆ»å¯åŠ¨æ¯ä¸ªä»»åŠ¡ã€‚</p>
<p>å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshuding%2Fbetter-all" target="_blank" title="https://github.com/shuding/better-all" ref="nofollow noopener noreferrer">github.com/shuding/betâ€¦</a></p>
<p><strong>4ã€async-api-routesï¼šAPI è·¯ç”±ä¸­å°½æ—©å¼€å§‹ Promise</strong></p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šåœ¨ API è·¯ç”±å’Œ Server Actions ä¸­ï¼Œç«‹å³å¯åŠ¨ç‹¬ç«‹æ“ä½œï¼Œå³ä½¿ä½ è¿˜ä¸éœ€è¦ await å®ƒä»¬ã€‚</p>
<p>é”™è¯¯ç¤ºä¾‹ï¼ˆconfig ç­‰å¾… authï¼Œdata ç­‰å¾…ä¸¤è€…ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request: Request</span>) {
Â Â <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-title function_">auth</span>()
Â Â <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchConfig</span>()  <span class="hljs-comment">// ç­‰ auth å®Œæˆæ‰å¼€å§‹</span>
Â Â <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>(session.<span class="hljs-property">user</span>.<span class="hljs-property">id</span>)
Â Â <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ data, config })
}
</code></pre>
<p>æ­£ç¡®ç¤ºä¾‹ï¼ˆauth å’Œ config ç«‹å³å¹¶è¡Œå¯åŠ¨ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request: Request</span>) {
Â Â <span class="hljs-comment">// ç«‹å³å¯åŠ¨ï¼Œä¸ç­‰å¾…</span>
Â Â <span class="hljs-keyword">const</span> sessionPromise = <span class="hljs-title function_">auth</span>()
Â Â <span class="hljs-keyword">const</span> configPromise = <span class="hljs-title function_">fetchConfig</span>()

Â Â <span class="hljs-comment">// éœ€è¦ session æ—¶æ‰ await</span>
Â Â <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> sessionPromise

Â Â <span class="hljs-comment">// config å’Œ data å¹¶è¡Œè·å–</span>
Â Â <span class="hljs-keyword">const</span> [config, data] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
Â Â Â Â configPromise,
Â Â Â Â <span class="hljs-title function_">fetchData</span>(session.<span class="hljs-property">user</span>.<span class="hljs-property">id</span>)
Â Â ])

Â Â <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ data, config })
}
</code></pre>
<p>å…³é”®æŠ€å·§ï¼šå…ˆå¯åŠ¨ Promiseï¼Œå awaitã€‚</p>
<p><strong>5ã€async-suspense-boundariesï¼šä½¿ç”¨ Suspense</strong></p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šä¸è¦åœ¨ async ç»„ä»¶ä¸­ await æ•°æ®åå†è¿”å› JSXï¼Œè€Œæ˜¯ä½¿ç”¨ Suspense è¾¹ç•Œè®©å¤–å±‚ UI å…ˆæ˜¾ç¤ºã€‚</p>
<p>é”™è¯¯ç¤ºä¾‹ï¼ˆæ•´ä¸ªé¡µé¢è¢«æ•°æ®è·å–é˜»å¡ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>()  <span class="hljs-comment">// é˜»å¡æ•´ä¸ªé¡µé¢</span>

Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Sidebar<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">DataDisplay</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Footer<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â )
}
</code></pre>
<p>æ•´ä¸ªå¸ƒå±€éƒ½è¦ç­‰æ•°æ®ï¼Œå°½ç®¡åªæœ‰ä¸­é—´éƒ¨åˆ†éœ€è¦å®ƒã€‚</p>
<p>æ­£ç¡®ç¤ºä¾‹ï¼ˆå¤–å±‚ç«‹å³æ˜¾ç¤ºï¼Œæ•°æ®æµå¼åŠ è½½ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Sidebar<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Skeleton</span> /&gt;</span>}&gt;
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">DataDisplay</span> /&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Footer<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â )
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DataDisplay</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>()  <span class="hljs-comment">// åªé˜»å¡è¿™ä¸ªç»„ä»¶</span>
Â Â <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data.content}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>Sidebarã€Headerã€Footer ç«‹å³æ¸²æŸ“ï¼Œåªæœ‰ DataDisplay ç­‰å¾…æ•°æ®ã€‚</p>
<p>è¿›é˜¶ï¼šå¤šä¸ªç»„ä»¶å…±äº« Promise</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-comment">// ç«‹å³å¼€å§‹è·å–ï¼Œä½†ä¸ await</span>
Â Â <span class="hljs-keyword">const</span> dataPromise = <span class="hljs-title function_">fetchData</span>()

Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Sidebar<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Skeleton</span> /&gt;</span>}&gt;
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">DataDisplay</span> <span class="hljs-attr">dataPromise</span>=<span class="hljs-string">{dataPromise}</span> /&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">DataSummary</span> <span class="hljs-attr">dataPromise</span>=<span class="hljs-string">{dataPromise}</span> /&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Footer<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â )
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DataDisplay</span>(<span class="hljs-params">{ dataPromise }: { dataPromise: <span class="hljs-built_in">Promise</span>&lt;Data&gt; }</span>) {
Â Â <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">use</span>(dataPromise)  <span class="hljs-comment">// ä½¿ç”¨ React 19 çš„ use() hook</span>
Â Â <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data.content}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DataSummary</span>(<span class="hljs-params">{ dataPromise }: { dataPromise: <span class="hljs-built_in">Promise</span>&lt;Data&gt; }</span>) {
Â Â <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">use</span>(dataPromise)  <span class="hljs-comment">// å¤ç”¨åŒä¸€ä¸ª Promise</span>
Â Â <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data.summary}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>ä¸¤ä¸ªç»„ä»¶å…±äº«åŒä¸€ä¸ª Promiseï¼Œåªå‘èµ·ä¸€æ¬¡è¯·æ±‚ã€‚</p>
<p>æ³¨æ„ï¼šè¿™ç§æ–¹å¼éœ€è¦æƒè¡¡ã€‚æ›´å¿«çš„é¦–æ¬¡ç»˜åˆ¶ vs é‡ç»˜é‡æ’</p>
<p>å¦‚ä½•å®‰è£…è¿™ä¸ª Skill</p>
<p>ç›´æ¥å°†githubçš„è¿™æ•´ä¸ªæ–‡ä»¶å¤¹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel-labs%2Fagent-skills%2Ftree%2Fmain%2Fskills%2Freact-best-practices%25EF%25BC%258C" target="_blank" title="https://github.com/vercel-labs/agent-skills/tree/main/skills/react-best-practices%EF%BC%8C" ref="nofollow noopener noreferrer">github.com/vercel-labsâ€¦</a> æ”¾åˆ° ~/.claude/skills(macç”µè„‘)ä¸‹å³å¯ ã€‚å®‰è£…å®Œæˆåï¼ŒClaude Codeä¼šè‡ªåŠ¨åˆ¤æ–­æ˜¯å¦åœ¨éœ€è¦çš„æ—¶å€™ä½¿ç”¨è¿™ä¸ªskillï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ç›´æ¥è°ƒç”¨è¿™ä¸ª Skillï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/vercel-react-best-practices
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React æ–‡æœ¬æˆªæ–­ç»„ä»¶ rc-text-ellipsis]]></title>    <link>https://juejin.cn/post/7596230910212653099</link>    <guid>https://juejin.cn/post/7596230910212653099</guid>    <pubDate>2026-01-18T08:32:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596230910212653099" data-draft-id="7596166721627865134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React æ–‡æœ¬æˆªæ–­ç»„ä»¶ rc-text-ellipsis"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-18T08:32:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Sarah"/> <meta itemprop="url" content="https://juejin.cn/user/4204183379519463"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React æ–‡æœ¬æˆªæ–­ç»„ä»¶ rc-text-ellipsis
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4204183379519463/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Sarah
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T08:32:03.000Z" title="Sun Jan 18 2026 08:32:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæ–‡æœ¬æˆªæ–­ï¼ˆText Ellipsisï¼‰æ˜¯ä¸€ä¸ªæå…¶å¸¸è§çš„éœ€æ±‚ã€‚æ— è®ºæ˜¯æ–°é—»åˆ—è¡¨ã€å•†å“æè¿°ã€ç”¨æˆ·è¯„è®ºï¼Œè¿˜æ˜¯å„ç±»å¡ç‰‡ç»„ä»¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨æœ‰é™çš„ç©ºé—´å†…å±•ç¤ºè¾ƒé•¿çš„æ–‡æœ¬å†…å®¹ã€‚è™½ç„¶ CSS çš„ <code>text-overflow: ellipsis</code> å¯ä»¥å®ç°å•è¡Œæ–‡æœ¬æˆªæ–­ï¼Œä½†åœ¨é¢å¯¹å¤šè¡Œæ–‡æœ¬ã€è‡ªå®šä¹‰çœç•¥ä½ç½®ã€å±•å¼€/æ”¶èµ·åŠŸèƒ½ç­‰å¤æ‚åœºæ™¯æ—¶ï¼Œçº¯ CSS æ–¹æ¡ˆå°±æ˜¾å¾—åŠ›ä¸ä»å¿ƒäº†ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–æ <code>rc-text-ellipsis</code> ç»„ä»¶çš„è®¾è®¡ä¸å®ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€é«˜åº¦çµæ´»çš„ React æ–‡æœ¬æˆªæ–­ç»„ä»¶ï¼Œå®ƒä¸ä»…æ”¯æŒå¤šè¡Œæ–‡æœ¬æˆªæ–­ï¼Œè¿˜æä¾›äº†ä¸‰ç§çœç•¥ä½ç½®ï¼ˆå¼€å§‹ã€ä¸­é—´ã€ç»“å°¾ï¼‰ã€å±•å¼€/æ”¶èµ·åŠŸèƒ½ã€è‡ªå®šä¹‰æ“ä½œæŒ‰é’®ã€å“åº”å¼è‡ªåŠ¨é‡ç®—ç­‰ç‰¹æ€§ã€‚</p>
<ul>
<li>githubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwulala0102%2Frc-text-ellipsis" target="_blank" title="https://github.com/wulala0102/rc-text-ellipsis" ref="nofollow noopener noreferrer">github.com/wulala0102/â€¦</a></li>
<li>æ•ˆæœé¢„è§ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frc-text-ellipsis.vercel.app%2F" title="https://rc-text-ellipsis.vercel.app/" target="_blank" ref="nofollow noopener noreferrer">rc-text-ellipsis.vercel.app</a></li>
</ul>
<h2 data-id="heading-1">æ ¸å¿ƒç‰¹æ€§ä¸€è§ˆ</h2>
<p>åœ¨æ·±å…¥ä»£ç å®ç°ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹è¿™ä¸ªç»„ä»¶æä¾›çš„æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<ul>
<li>ğŸ¯ <strong>ç²¾ç¡®çš„å¤šè¡Œæ–‡æœ¬æˆªæ–­</strong> - æ”¯æŒä»»æ„è¡Œæ•°çš„æ–‡æœ¬æˆªæ–­æ§åˆ¶</li>
<li>ğŸ“ <strong>ä¸‰ç§çœç•¥ä½ç½®</strong> - æ”¯æŒåœ¨æ–‡æœ¬å¼€å§‹ã€ä¸­é—´ã€ç»“å°¾ä½ç½®è¿›è¡Œçœç•¥</li>
<li>ğŸ”„ <strong>å±•å¼€/æ”¶èµ·åŠŸèƒ½</strong> - æä¾›å®Œæ•´çš„çŠ¶æ€ç®¡ç†å’Œäº¤äº’èƒ½åŠ›</li>
<li>ğŸ¨ <strong>é«˜åº¦å¯å®šåˆ¶</strong> - æ”¯æŒè‡ªå®šä¹‰æ“ä½œæŒ‰é’®ã€çœç•¥ç¬¦å·ç­‰</li>
<li>ğŸ“± <strong>å“åº”å¼è®¾è®¡</strong> - çª—å£å¤§å°å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°è®¡ç®—</li>
<li>ğŸ›ï¸ <strong>å‘½ä»¤å¼ API</strong> - é€šè¿‡ ref æä¾›å¤–éƒ¨æ§åˆ¶èƒ½åŠ›</li>
<li>ğŸ’ª <strong>TypeScript æ”¯æŒ</strong> - å®Œæ•´çš„ç±»å‹å®šä¹‰</li>
<li>âš¡ <strong>é«˜æ•ˆç®—æ³•</strong> - é‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ä¼˜åŒ–æ€§èƒ½</li>
</ul>
<h2 data-id="heading-2">æŠ€æœ¯æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-3">1. ç»„ä»¶ç»“æ„</h3>
<p><code>rc-text-ellipsis</code> é‡‡ç”¨äº†æ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ TextEllipsis.tsx          <span class="hljs-comment"># ä¸»ç»„ä»¶ï¼Œè´Ÿè´£æ¸²æŸ“å’Œäº‹ä»¶å¤„ç†</span>
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useTextEllipsis.ts    <span class="hljs-comment"># æ ¸å¿ƒ Hookï¼Œå°è£…æ–‡æœ¬æˆªæ–­é€»è¾‘</span>
â””â”€â”€ utils.ts                   <span class="hljs-comment"># å·¥å…·å‡½æ•°ï¼Œå®ç°ç®—æ³•å’Œ DOM æ“ä½œ</span>
</code></pre>
<p>è¿™ç§æ¶æ„è®¾è®¡éµå¾ªäº†å•ä¸€èŒè´£åŸåˆ™ï¼Œå°†æ¸²æŸ“é€»è¾‘ã€çŠ¶æ€ç®¡ç†å’Œè®¡ç®—é€»è¾‘æ¸…æ™°åˆ†ç¦»ã€‚</p>
<h3 data-id="heading-4">2. ä¸»ç»„ä»¶è®¾è®¡</h3>
<p>ä¸»ç»„ä»¶ <code>TextEllipsis.tsx</code> é‡‡ç”¨äº† <code>React.forwardRef</code> æ¥æš´éœ²å‘½ä»¤å¼ APIï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">TextEllipsisRef</span> {
  <span class="hljs-attr">toggle</span>: <span class="hljs-function">(<span class="hljs-params">expanded?: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">TextEllipsis</span> = <span class="hljs-title class_">React</span>.<span class="hljs-property">forwardRef</span>&lt;<span class="hljs-title class_">TextEllipsisRef</span>, <span class="hljs-title class_">TextEllipsisProps</span>&gt;(
  <span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> {
    <span class="hljs-comment">// ç»„ä»¶å®ç°</span>
  }
);
</code></pre>
<p>è¿™ç§è®¾è®¡è®©ç»„ä»¶æ—¢å¯ä»¥ä½œä¸ºå—æ§ç»„ä»¶ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ ref è¿›è¡Œå¤–éƒ¨æ§åˆ¶ï¼Œæä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚</p>
<h2 data-id="heading-5">æ ¸å¿ƒç®—æ³•æ·±åº¦è§£æ</h2>
<h3 data-id="heading-6">1. æ–‡æœ¬æˆªæ–­çš„æœ¬è´¨æŒ‘æˆ˜</h3>
<p>å®ç°æ–‡æœ¬æˆªæ–­çœ‹ä¼¼ç®€å•ï¼Œä½†å®é™…ä¸Šé¢ä¸´è¯¸å¤šæŒ‘æˆ˜ï¼š</p>
<ol>
<li><strong>å¦‚ä½•ç²¾ç¡®æ§åˆ¶è¡Œæ•°ï¼Ÿ</strong> - ä¸åŒå­—ä½“ã€å­—å·ã€è¡Œé«˜ä¸‹çš„è¡Œæ•°è®¡ç®—</li>
<li><strong>å¦‚ä½•æ‰¾åˆ°æˆªæ–­ç‚¹ï¼Ÿ</strong> - åœ¨ä¿è¯ä¸è¶…è¿‡æŒ‡å®šè¡Œæ•°çš„å‰æä¸‹ï¼Œå°½å¯èƒ½å¤šåœ°æ˜¾ç¤ºæ–‡æœ¬</li>
<li><strong>å¦‚ä½•å¤„ç†æ“ä½œæŒ‰é’®ï¼Ÿ</strong> - æ“ä½œæŒ‰é’®æœ¬èº«ä¹Ÿå ç”¨ç©ºé—´ï¼Œéœ€è¦çº³å…¥è®¡ç®—</li>
<li><strong>å¦‚ä½•ä¼˜åŒ–æ€§èƒ½ï¼Ÿ</strong> - é¿å…å¤§é‡ DOM æ“ä½œå’Œé‡æ’</li>
</ol>
<h3 data-id="heading-7">2. å…‹éš†å®¹å™¨æŠ€æœ¯</h3>
<p><code>rc-text-ellipsis</code> çš„ç¬¬ä¸€ä¸ªå·§å¦™è®¾è®¡æ˜¯ä½¿ç”¨"å…‹éš†å®¹å™¨"æŠ€æœ¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> cloneContainer = (
  <span class="hljs-attr">rootElement</span>: <span class="hljs-title class_">HTMLElement</span> | <span class="hljs-literal">null</span>,
  <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>,
): <span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-function"><span class="hljs-params">null</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> originStyle = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getComputedStyle</span>(rootElement);
  <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);

  <span class="hljs-comment">// å¤åˆ¶æ‰€æœ‰æ ·å¼</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">styleNames</span>: <span class="hljs-built_in">string</span>[] = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(originStyle);
  styleNames.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
    container.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(name, originStyle.<span class="hljs-title function_">getPropertyValue</span>(name));
  });

  <span class="hljs-comment">// è®¾ç½®ä¸ºç¦»å±å…ƒç´ </span>
  container.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'fixed'</span>;
  container.<span class="hljs-property">style</span>.<span class="hljs-property">zIndex</span> = <span class="hljs-string">'-9999'</span>;
  container.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">'-9999px'</span>;
  container.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">'auto'</span>;

  container.<span class="hljs-property">innerText</span> = content;
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(container);

  <span class="hljs-keyword">return</span> container;
};
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹ï¼š</strong></p>
<ul>
<li><strong>å®Œæ•´æ ·å¼ç»§æ‰¿</strong> - é€šè¿‡ <code>getComputedStyle</code> è·å–æ‰€æœ‰è®¡ç®—åçš„æ ·å¼ï¼Œç¡®ä¿å…‹éš†å®¹å™¨ä¸åŸå®¹å™¨åœ¨æ¸²æŸ“ä¸Šå®Œå…¨ä¸€è‡´</li>
<li><strong>ç¦»å±æ¸²æŸ“</strong> - å°†å…‹éš†å®¹å™¨ç§»å‡ºè§†å£ï¼Œé¿å…å½±å“é¡µé¢å¸ƒå±€å’Œç”¨æˆ·ä½“éªŒ</li>
<li><strong>é«˜åº¦è‡ªé€‚åº”</strong> - é‡ç½® <code>height</code>ã€<code>minHeight</code>ã€<code>maxHeight</code> ä¸º <code>auto</code>ï¼Œè®©å†…å®¹è‡ªç„¶æ’‘å¼€ï¼Œä¾¿äºæµ‹é‡çœŸå®é«˜åº¦</li>
</ul>
<p>è¿™ç§æŠ€æœ¯è®©æˆ‘ä»¬å¯ä»¥åœ¨ä¸å½±å“å®é™… DOM çš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œå„ç§æµ‹è¯•å’Œè®¡ç®—ã€‚</p>
<h3 data-id="heading-8">3. äºŒåˆ†æŸ¥æ‰¾ç®—æ³•</h3>
<p>æ‰¾åˆ°æœ€ä½³æˆªæ–­ç‚¹æ˜¯æ–‡æœ¬æˆªæ–­çš„æ ¸å¿ƒéš¾é¢˜ã€‚<code>rc-text-ellipsis</code> é‡‡ç”¨äº†<strong>äºŒåˆ†æŸ¥æ‰¾ç®—æ³•</strong>ï¼Œå¤§å¤§æå‡äº†æŸ¥æ‰¾æ•ˆç‡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> tail = (<span class="hljs-attr">left</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">right</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-comment">// é€’å½’ç»ˆæ­¢æ¡ä»¶</span>
  <span class="hljs-keyword">if</span> (right - left &lt;= <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">if</span> (position === <span class="hljs-string">'end'</span>) {
      <span class="hljs-keyword">return</span> content.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, left) + dots;
    }
    <span class="hljs-keyword">return</span> dots + content.<span class="hljs-title function_">slice</span>(right, end);
  }

  <span class="hljs-comment">// å–ä¸­ç‚¹</span>
  <span class="hljs-keyword">const</span> midPoint = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((left + right) / <span class="hljs-number">2</span>);

  <span class="hljs-comment">// æ„é€ æµ‹è¯•æ–‡æœ¬</span>
  container.<span class="hljs-property">innerText</span> = position === <span class="hljs-string">'end'</span>
    ? content.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, midPoint) + dots
    : dots + content.<span class="hljs-title function_">slice</span>(midPoint, end);
  container.<span class="hljs-property">innerHTML</span> += actionHTML;

  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦è¶…é«˜</span>
  <span class="hljs-keyword">if</span> (container.<span class="hljs-property">offsetHeight</span> &gt; maxHeight) {
    <span class="hljs-comment">// è¶…é«˜äº†ï¼Œéœ€è¦ç¼©çŸ­æ–‡æœ¬</span>
    <span class="hljs-keyword">if</span> (position === <span class="hljs-string">'end'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">tail</span>(left, midPoint);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">tail</span>(midPoint, right);
  }

  <span class="hljs-comment">// è¿˜æœ‰ç©ºé—´ï¼Œå¯ä»¥å°è¯•æ˜¾ç¤ºæ›´å¤šæ–‡æœ¬</span>
  <span class="hljs-keyword">if</span> (position === <span class="hljs-string">'end'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">tail</span>(midPoint, right);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">tail</span>(left, midPoint);
};
</code></pre>
<p><strong>ç®—æ³•åˆ†æï¼š</strong></p>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(log n)ï¼Œå…¶ä¸­ n æ˜¯æ–‡æœ¬é•¿åº¦</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(log n)ï¼Œé€’å½’è°ƒç”¨æ ˆ</li>
<li><strong>å¯¹æ¯”æš´åŠ›æœç´¢</strong>ï¼šå¦‚æœä»å¤´é€å­—ç¬¦æµ‹è¯•ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œåœ¨é•¿æ–‡æœ¬åœºæ™¯ä¸‹æ€§èƒ½å·®è·æ˜¾è‘—</li>
</ul>
<p><strong>ç›´è§‚ç†è§£ï¼š</strong></p>
<p>å‡è®¾æ–‡æœ¬æœ‰ 1000 ä¸ªå­—ç¬¦ï¼š</p>
<ul>
<li>æš´åŠ›æœç´¢ï¼šæœ€åæƒ…å†µéœ€è¦æµ‹è¯• 1000 æ¬¡</li>
<li>äºŒåˆ†æŸ¥æ‰¾ï¼šæœ€å¤šåªéœ€è¦æµ‹è¯• 10 æ¬¡ï¼ˆlogâ‚‚1000 â‰ˆ 10ï¼‰</li>
</ul>
<h3 data-id="heading-9">4. ä¸­é—´ä½ç½®çœç•¥çš„åŒæŒ‡é’ˆç®—æ³•</h3>
<p>å¯¹äºä¸­é—´ä½ç½®çœç•¥ï¼ˆmiddle positionï¼‰ï¼Œé—®é¢˜å˜å¾—æ›´åŠ å¤æ‚ï¼Œå› ä¸ºéœ€è¦åŒæ—¶ç¡®å®šå·¦å³ä¸¤ä¸ªæˆªæ–­ç‚¹ã€‚<code>rc-text-ellipsis</code> é‡‡ç”¨äº†åŒæŒ‡é’ˆåŒæ­¥äºŒåˆ†çš„ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> middleTail = (
  <span class="hljs-attr">leftPart</span>: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>],
  <span class="hljs-attr">rightPart</span>: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>],
): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-comment">// é€’å½’ç»ˆæ­¢æ¡ä»¶</span>
  <span class="hljs-keyword">if</span> (leftPart[<span class="hljs-number">1</span>] - leftPart[<span class="hljs-number">0</span>] &lt;= <span class="hljs-number">1</span> &amp;&amp; rightPart[<span class="hljs-number">1</span>] - rightPart[<span class="hljs-number">0</span>] &lt;= <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">return</span> (
      content.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, leftPart[<span class="hljs-number">0</span>]) +
      dots +
      content.<span class="hljs-title function_">slice</span>(rightPart[<span class="hljs-number">1</span>], end)
    );
  }

  <span class="hljs-comment">// åŒæ—¶ç¼©å°å·¦å³ä¸¤ä¸ªæœç´¢åŒºé—´</span>
  <span class="hljs-keyword">const</span> leftMiddle = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((leftPart[<span class="hljs-number">0</span>] + leftPart[<span class="hljs-number">1</span>]) / <span class="hljs-number">2</span>);
  <span class="hljs-keyword">const</span> rightMiddle = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>((rightPart[<span class="hljs-number">0</span>] + rightPart[<span class="hljs-number">1</span>]) / <span class="hljs-number">2</span>);

  container.<span class="hljs-property">innerText</span> =
    content.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, leftMiddle) +
    dots +
    content.<span class="hljs-title function_">slice</span>(rightMiddle, end);
  container.<span class="hljs-property">innerHTML</span> += actionHTML;

  <span class="hljs-keyword">if</span> (container.<span class="hljs-property">offsetHeight</span> &gt;= maxHeight) {
    <span class="hljs-comment">// è¶…é«˜äº†ï¼Œä¸¤è¾¹åŒæ—¶å‘ä¸­å¿ƒæ”¶ç¼©</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">middleTail</span>(
      [leftPart[<span class="hljs-number">0</span>], leftMiddle],
      [rightMiddle, rightPart[<span class="hljs-number">1</span>]],
    );
  }

  <span class="hljs-comment">// è¿˜æœ‰ç©ºé—´ï¼Œä¸¤è¾¹åŒæ—¶å‘å¤–æ‰©å±•</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">middleTail</span>(
    [leftMiddle, leftPart[<span class="hljs-number">1</span>]],
    [rightPart[<span class="hljs-number">0</span>], rightMiddle],
  );
};
</code></pre>
<p><strong>ç®—æ³•äº®ç‚¹ï¼š</strong></p>
<ul>
<li><strong>å¯¹ç§°æ€§è®¾è®¡</strong> - å·¦å³ä¸¤è¾¹åŒæ­¥è¿›è¡ŒäºŒåˆ†ï¼Œä¿è¯æ–‡æœ¬å‡åŒ€åˆ†å¸ƒ</li>
<li><strong>ç»Ÿä¸€çš„æ—¶é—´å¤æ‚åº¦</strong> - ä»ç„¶æ˜¯ O(log n)</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong> - ç‰¹åˆ«é€‚åˆæ–‡ä»¶è·¯å¾„ã€URL ç­‰ä¸­é—´éƒ¨åˆ†ä¸é‡è¦çš„åœºæ™¯</li>
</ul>
<p>ä¾‹å¦‚ï¼š<code>/very/long/path/to/some/deep/directory/important-file.txt</code>
å¯ä»¥æ˜¾ç¤ºä¸ºï¼š<code>/very/long/.../important-file.txt</code></p>
<h3 data-id="heading-10">5. ç²¾ç¡®çš„é«˜åº¦è®¡ç®—</h3>
<p>å‡†ç¡®è®¡ç®—æœ€å¤§å…è®¸é«˜åº¦æ˜¯ç®—æ³•çš„åŸºç¡€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> { paddingBottom, paddingTop, lineHeight } = container.<span class="hljs-property">style</span>;
<span class="hljs-keyword">const</span> maxHeight = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(
  (<span class="hljs-title class_">Number</span>(rows) + <span class="hljs-number">0.5</span>) * <span class="hljs-title function_">pxToNum</span>(lineHeight) +
    <span class="hljs-title function_">pxToNum</span>(paddingTop) +
    <span class="hljs-title function_">pxToNum</span>(paddingBottom),
);
</code></pre>
<p><strong>è®¾è®¡ç»†èŠ‚ï¼š</strong></p>
<ul>
<li><strong>+0.5 è¡Œçš„å®¹å·®</strong> - è€ƒè™‘åˆ°å­—ä½“æ¸²æŸ“çš„äºšåƒç´ åå·®ï¼Œå¢åŠ åŠè¡Œå®¹å·®ï¼Œé¿å…è¾¹ç•Œæƒ…å†µä¸‹çš„æˆªæ–­é”™è¯¯</li>
<li><strong>Math.ceil å‘ä¸Šå–æ•´</strong> - ä¿å®ˆç­–ç•¥ï¼Œç¡®ä¿ä¸ä¼šè¶…å‡ºé™åˆ¶</li>
<li><strong>åŒ…å« padding</strong> - å®Œæ•´è€ƒè™‘ç›’æ¨¡å‹ï¼Œé¿å…é—æ¼è¾¹è·å½±å“</li>
</ul>
<h2 data-id="heading-11">çŠ¶æ€ç®¡ç†ä¸ç”Ÿå‘½å‘¨æœŸ</h2>
<h3 data-id="heading-12">1. æ ¸å¿ƒ Hook è®¾è®¡</h3>
<p><code>useTextEllipsis</code> æ˜¯æ•´ä¸ªç»„ä»¶çš„æ ¸å¿ƒå¤§è„‘ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextEllipsis</span> = (<span class="hljs-params">options: UseTextEllipsisOptions</span>) =&gt; {
  <span class="hljs-keyword">const</span> [text, setText] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(content);
  <span class="hljs-keyword">const</span> [expanded, setExpanded] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [hasAction, setHasAction] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> needRecalculateRef = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-comment">// æ ¸å¿ƒè®¡ç®—é€»è¾‘</span>
  <span class="hljs-keyword">const</span> calcEllipsised = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ... è®¡ç®—æˆªæ–­æ–‡æœ¬</span>
  }, [content, rows, position, dots, expandText, action, rootRef, actionRef]);

  <span class="hljs-keyword">return</span> { text, expanded, hasAction, toggle };
};
</code></pre>
<p><strong>çŠ¶æ€è®¾è®¡ï¼š</strong></p>
<ul>
<li><code>text</code> - å½“å‰æ˜¾ç¤ºçš„æ–‡æœ¬ï¼ˆå¯èƒ½æ˜¯æˆªæ–­åçš„ï¼‰</li>
<li><code>expanded</code> - å±•å¼€/æ”¶èµ·çŠ¶æ€</li>
<li><code>hasAction</code> - æ˜¯å¦éœ€è¦æ˜¾ç¤ºæ“ä½œæŒ‰é’®ï¼ˆæ–‡æœ¬å¤ŸçŸ­æ—¶ä¸éœ€è¦ï¼‰</li>
<li><code>needRecalculateRef</code> - æ ‡è®°æ˜¯å¦éœ€è¦é‡æ–°è®¡ç®—ï¼ˆå»¶è¿Ÿè®¡ç®—ä¼˜åŒ–ï¼‰</li>
</ul>
<h3 data-id="heading-13">2. å“åº”å¼æ›´æ–°</h3>
<p>ç»„ä»¶é€šè¿‡ç›‘å¬ window resize äº‹ä»¶å®ç°å“åº”å¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleResize</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">calcEllipsised</span>();
  };

  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, handleResize);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, handleResize);
}, [calcEllipsised]);
</code></pre>
<p>è¿™ç¡®ä¿äº†åœ¨çª—å£å¤§å°å˜åŒ–æ—¶ï¼Œæ–‡æœ¬æˆªæ–­èƒ½å¤Ÿå®æ—¶è°ƒæ•´ï¼Œæä¾›è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-14">3. è‡ªå®šä¹‰æ“ä½œæŒ‰é’®çš„å»¶è¿Ÿè®¡ç®—</h3>
<p>é’ˆå¯¹è‡ªå®šä¹‰æ“ä½œæŒ‰é’®ï¼Œç»„ä»¶é‡‡ç”¨äº†å·§å¦™çš„å»¶è¿Ÿç­–ç•¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">calcEllipsised</span>();

  <span class="hljs-keyword">if</span> (action) {
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setTimeout</span>(calcEllipsised, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timer);
  }
}, [calcEllipsised, action]);
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å»¶è¿Ÿï¼Ÿ</strong></p>
<p>å½“ä½¿ç”¨è‡ªå®šä¹‰ <code>action</code> æ¸²æŸ“å‡½æ•°æ—¶ï¼Œç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ <code>actionRef.current</code> å¯èƒ½è¿˜æœªæŒ‚è½½ï¼Œæ— æ³•è·å–å…¶ <code>outerHTML</code>ã€‚é€šè¿‡ <code>setTimeout(..., 0)</code> å°†è®¡ç®—æ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œç¡®ä¿ DOM å·²ç»å®Œå…¨æ¸²æŸ“ã€‚</p>
<h2 data-id="heading-15">ä½¿ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-16">1. åŸºç¡€ç”¨æ³•</h3>
<p>æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">TextEllipsis</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'rc-text-ellipsis'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'rc-text-ellipsis/assets/index.css'</span>;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TextEllipsis</span>
  <span class="hljs-attr">rows</span>=<span class="hljs-string">{3}</span>
  <span class="hljs-attr">content</span>=<span class="hljs-string">"è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬..."</span>
  <span class="hljs-attr">expandText</span>=<span class="hljs-string">"å±•å¼€"</span>
  <span class="hljs-attr">collapseText</span>=<span class="hljs-string">"æ”¶èµ·"</span>
/&gt;</span></span>
</code></pre>
<h3 data-id="heading-17">2. æ–‡ä»¶è·¯å¾„æ˜¾ç¤º</h3>
<p>åˆ©ç”¨ middle position ä¼˜é›…åœ°æ˜¾ç¤ºé•¿è·¯å¾„ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">TextEllipsis</span>
  position=<span class="hljs-string">"middle"</span>
  rows={<span class="hljs-number">1</span>}
  content=<span class="hljs-string">"/Users/username/Documents/Projects/MyApp/src/components/TextEllipsis.tsx"</span>
/&gt;
</code></pre>
<p>æ˜¾ç¤ºæ•ˆæœï¼š<code>/Users/username/.../TextEllipsis.tsx</code></p>
<h3 data-id="heading-18">3. è‡ªå®šä¹‰æ“ä½œæŒ‰é’®</h3>
<p>å®ç°æ›´ä¸°å¯Œçš„äº¤äº’ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">TextEllipsis</span>
  rows={<span class="hljs-number">2</span>}
  content={longText}
  action={<span class="hljs-function">(<span class="hljs-params">expanded</span>) =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '#<span class="hljs-attr">1890ff</span>', <span class="hljs-attr">cursor:</span> '<span class="hljs-attr">pointer</span>' }}&gt;</span>
      {expanded ? 'â–² æ”¶èµ·' : 'â–¼ æŸ¥çœ‹æ›´å¤š'}
    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
  )}
/&gt;
</code></pre>
<h3 data-id="heading-19">4. å¤–éƒ¨æ§åˆ¶</h3>
<p>é€šè¿‡ ref å®ç°ç¼–ç¨‹å¼æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> ref = useRef&lt;<span class="hljs-title class_">TextEllipsisRef</span>&gt;(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// åœ¨éœ€è¦çš„æ—¶å€™å±•å¼€</span>
ref.<span class="hljs-property">current</span>?.<span class="hljs-title function_">toggle</span>(<span class="hljs-literal">true</span>);

<span class="hljs-comment">// åˆ‡æ¢çŠ¶æ€</span>
ref.<span class="hljs-property">current</span>?.<span class="hljs-title function_">toggle</span>();
</code></pre>
<h2 data-id="heading-20">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h2>
<h3 data-id="heading-21">1. ä½¿ç”¨ React.memo</h3>
<p>å¯¹äºåˆ—è¡¨æ¸²æŸ“åœºæ™¯ï¼Œå»ºè®®é…åˆ <code>React.memo</code> ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">TextItem</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ content }: { content: <span class="hljs-built_in">string</span> }</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TextEllipsis</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">{2}</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{content}</span> /&gt;</span></span>
));
</code></pre>
<h3 data-id="heading-22">2. é¿å…é¢‘ç¹çš„ prop å˜åŒ–</h3>
<p>ç”±äºæ¯æ¬¡ <code>content</code> å˜åŒ–éƒ½ä¼šè§¦å‘é‡æ–°è®¡ç®—ï¼Œåº”è¯¥é¿å…ä¸å¿…è¦çš„æ›´æ–°ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âŒ ä¸å¥½çš„åšæ³•</span>
&lt;<span class="hljs-title class_">TextEllipsis</span> content={data.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">text</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">' '</span>)} /&gt;

<span class="hljs-comment">// âœ… å¥½çš„åšæ³•</span>
<span class="hljs-keyword">const</span> memoizedContent = <span class="hljs-title function_">useMemo</span>(
  <span class="hljs-function">() =&gt;</span> data.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">text</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">' '</span>),
  [data]
);
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TextEllipsis</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{memoizedContent}</span> /&gt;</span></span>
</code></pre>
<h3 data-id="heading-23">3. åˆç†è®¾ç½® rows</h3>
<p><code>rows</code> å€¼è¶Šå¤§ï¼ŒäºŒåˆ†æŸ¥æ‰¾çš„è¿­ä»£æ¬¡æ•°å¯èƒ½ä¼šå¢åŠ ã€‚å¦‚æœä¸éœ€è¦å¾ˆå¤šè¡Œï¼Œå°½é‡ä½¿ç”¨è¾ƒå°çš„å€¼ã€‚</p>
<h2 data-id="heading-24">æµè§ˆå™¨å…¼å®¹æ€§</h2>
<p>ç»„ä»¶ä½¿ç”¨çš„æ ¸å¿ƒ APIï¼š</p>
<ul>
<li><code>window.getComputedStyle</code> - IE 9+</li>
<li><code>element.offsetHeight</code> - æ‰€æœ‰ç°ä»£æµè§ˆå™¨</li>
<li><code>Array.prototype.slice.call</code> - ES5</li>
</ul>
<p><strong>å…¼å®¹æ€§æ€»ç»“</strong>ï¼šç°ä»£æµè§ˆå™¨åŠ IE11+</p>
<h2 data-id="heading-25">ä¸å…¶ä»–æ–¹æ¡ˆçš„å¯¹æ¯”</h2>
<h3 data-id="heading-26">1. çº¯ CSS æ–¹æ¡ˆ</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.text-ellipsis</span> {
  <span class="hljs-attribute">display</span>: -webkit-box;
  -webkit-line-clamp: <span class="hljs-number">3</span>;
  -webkit-box-orient: vertical;
  <span class="hljs-attribute">overflow</span>: hidden;
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼šæ€§èƒ½æœ€å¥½ï¼Œæ— éœ€ JavaScript
<strong>å±€é™</strong>ï¼š</p>
<ul>
<li>ä»…æ”¯æŒ end position</li>
<li>æ— æ³•æ·»åŠ å±•å¼€/æ”¶èµ·åŠŸèƒ½</li>
<li>æ— æ³•è‡ªå®šä¹‰çœç•¥ç¬¦å·ä½ç½®</li>
<li>å…¼å®¹æ€§è¾ƒå·®ï¼ˆéœ€è¦ -webkit- å‰ç¼€ï¼‰</li>
</ul>
<h3 data-id="heading-27">2. React-Text-Truncate</h3>
<p><strong>ä¼˜åŠ¿</strong>ï¼šè¾ƒä¸ºæˆç†Ÿçš„ç¤¾åŒºæ–¹æ¡ˆ
<strong>å¯¹æ¯” rc-text-ellipsis</strong>ï¼š</p>
<ul>
<li>âœ… rc-text-ellipsis æ”¯æŒä¸‰ç§çœç•¥ä½ç½®</li>
<li>âœ… rc-text-ellipsis æä¾›äº† ref API</li>
<li>âœ… rc-text-ellipsis ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œæ€§èƒ½æ›´ä¼˜</li>
</ul>
<h2 data-id="heading-28">æ€»ç»“ä¸å±•æœ›</h2>
<p><code>rc-text-ellipsis</code> æ˜¯ä¸€ä¸ªè®¾è®¡ç²¾è‰¯ã€å®ç°ä¼˜é›…çš„æ–‡æœ¬æˆªæ–­ç»„ä»¶ã€‚å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š</p>
<ol>
<li><strong>ç®—æ³•ä¼˜åŒ–</strong> - é‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾è€Œéçº¿æ€§æœç´¢ï¼Œæ€§èƒ½ä¼˜å¼‚</li>
<li><strong>åŠŸèƒ½å®Œæ•´</strong> - æ”¯æŒå¤šç§çœç•¥ä½ç½®ã€å±•å¼€/æ”¶èµ·ã€è‡ªå®šä¹‰æŒ‰é’®ç­‰</li>
<li><strong>å·¥ç¨‹åŒ–ä¼˜ç§€</strong> - TypeScript æ”¯æŒã€æ¸…æ™°çš„ä»£ç ç»“æ„ã€å®Œå–„çš„æµ‹è¯•</li>
<li><strong>ç”¨æˆ·ä½“éªŒå¥½</strong> - å“åº”å¼ã€æµç•…çš„äº¤äº’</li>
</ol>
<p><strong>æœªæ¥å¯èƒ½çš„æ”¹è¿›æ–¹å‘ï¼š</strong></p>
<ul>
<li>æ”¯æŒè™šæ‹Ÿæ»šåŠ¨åœºæ™¯çš„ä¼˜åŒ–</li>
<li>æä¾›æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰æ”¯æŒ</li>
<li>æ”¯æŒåŠ¨ç”»è¿‡æ¸¡æ•ˆæœ</li>
<li>æ”¯æŒæ›´å¤šçš„è‡ªå®šä¹‰é’©å­ï¼ˆå¦‚ onExpandã€onCollapseï¼‰</li>
</ul>
<h2 data-id="heading-29">å‚è€ƒèµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwulala0102%2Frc-text-ellipsis" target="_blank" title="https://github.com/wulala0102/rc-text-ellipsis" ref="nofollow noopener noreferrer">é¡¹ç›®æºç </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frc-text-ellipsis.vercel.app" target="_blank" title="https://rc-text-ellipsis.vercel.app" ref="nofollow noopener noreferrer">åœ¨çº¿æ¼”ç¤º</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FWindow%2FgetComputedStyle" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle" ref="nofollow noopener noreferrer">MDN - getComputedStyle</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E4%25BA%258C%25E5%2588%2586%25E6%2590%259C%25E7%25B4%25A2%25E7%25AE%2597%25E6%25B3%2595" target="_blank" title="https://zh.wikipedia.org/wiki/%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95" ref="nofollow noopener noreferrer">äºŒåˆ†æŸ¥æ‰¾ç®—æ³•</a></li>
</ul>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ æ·±å…¥ç†è§£æ–‡æœ¬æˆªæ–­ç»„ä»¶çš„å®ç°åŸç†ï¼Œå¹¶åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­çµæ´»è¿ç”¨è¿™äº›æŠ€æœ¯ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ GitHub ä¸Šæ issue è®¨è®ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜ : â€œè¯·ä½ è®²ä¸€ä¸‹ JS çš„ ã€Šåƒåœ¾å›æ”¶æœºåˆ¶ã€‹ ? â€]]></title>    <link>https://juejin.cn/post/7596187471772893193</link>    <guid>https://juejin.cn/post/7596187471772893193</guid>    <pubDate>2026-01-18T08:37:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596187471772893193" data-draft-id="7596187471772811273" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜ : â€œè¯·ä½ è®²ä¸€ä¸‹ JS çš„ ã€Šåƒåœ¾å›æ”¶æœºåˆ¶ã€‹ ? â€"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-18T08:37:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒå¯»girling"/> <meta itemprop="url" content="https://juejin.cn/user/2276467567770442"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜ : â€œè¯·ä½ è®²ä¸€ä¸‹ JS çš„ ã€Šåƒåœ¾å›æ”¶æœºåˆ¶ã€‹ ? â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2276467567770442/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒå¯»girling
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T08:37:16.000Z" title="Sun Jan 18 2026 08:37:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. åƒåœ¾å›æ”¶åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>JavaScript æ˜¯<strong>è‡ªåŠ¨å†…å­˜ç®¡ç†</strong>çš„è¯­è¨€ï¼Œä½ ä¸ç”¨æ‰‹åŠ¨ç”³è¯· / é‡Šæ”¾å†…å­˜ï¼ˆæ¯”å¦‚ C/C++ éœ€è¦ <code>malloc</code>/<code>free</code>ï¼‰ï¼Œåƒåœ¾å›æ”¶å°±æ˜¯ JS å¼•æ“ï¼ˆå¦‚ V8ï¼‰è‡ªåŠ¨åšçš„ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>âœ… <strong>æ‰¾ â€œåƒåœ¾â€</strong> ï¼šè¯†åˆ«å‡ºç¨‹åºä¸­<strong>ä¸å†ä½¿ç”¨</strong>çš„å˜é‡ / å¯¹è±¡ï¼ˆå ç”¨çš„å†…å­˜å°±æ˜¯ â€œåƒåœ¾å†…å­˜â€ï¼‰ï¼›</li>
<li>âœ… <strong>æ¸…åƒåœ¾</strong>ï¼šé‡Šæ”¾è¿™äº› â€œåƒåœ¾â€ å ç”¨çš„å†…å­˜ï¼Œé¿å…å†…å­˜æ³„æ¼ã€æå‡æ€§èƒ½ã€‚</li>
</ul>
<p>ä¸¾ä¸ªç®€å•ä¾‹å­ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"/>) </span>{
  let num = <span class="hljs-number">10</span>; <span class="hljs-comment">// å‡½æ•°æ‰§è¡Œæ—¶ï¼Œnum å ç”¨å†…å­˜</span>
}
<span class="hljs-function"><span class="hljs-keyword">fn</span>(<span class="hljs-params"/>)</span>; <span class="hljs-comment">// å‡½æ•°æ‰§è¡Œå®Œåï¼Œnum å†ä¹Ÿè®¿é—®ä¸åˆ°äº† â†’ å˜æˆâ€œåƒåœ¾â€ï¼ŒGC ä¼šå›æ”¶å®ƒçš„å†…å­˜</span>
</code></pre>
<h2 data-id="heading-1">2. JS æ€ä¹ˆåˆ¤æ–­ â€œå“ªäº›æ˜¯åƒåœ¾â€ï¼Ÿ</h2>
<p>GC ä¸æ˜¯çå›æ”¶çš„ï¼Œæ ¸å¿ƒåˆ¤æ–­æ ‡å‡†æ˜¯ï¼š<strong>ä¸€ä¸ªå¯¹è±¡ / å˜é‡æ˜¯å¦è¿˜èƒ½è¢« â€œè®¿é—®åˆ°â€ï¼ˆæ˜¯å¦æœ‰å¼•ç”¨æŒ‡å‘å®ƒï¼‰</strong> ã€‚</p>
<ul>
<li>èƒ½è®¿é—®åˆ° â†’ å­˜æ´»ï¼ˆä¸å›æ”¶ï¼‰ï¼›</li>
<li>è®¿é—®ä¸åˆ° â†’ åƒåœ¾ï¼ˆä¼šè¢«å›æ”¶ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-2">3. JS åƒåœ¾å›æ”¶çš„æ ¸å¿ƒç®—æ³•ï¼ˆV8 å¼•æ“ä¸ºä¸»ï¼‰</h2>
<p>ä¸åŒ JS å¼•æ“çš„ GC ç®—æ³•ç•¥æœ‰å·®å¼‚ï¼Œä½†æ ¸å¿ƒæ˜¯ä¸¤ç§ï¼š<strong>æ ‡è®° - æ¸…é™¤</strong>ï¼ˆä¸»æµï¼‰å’Œ<strong>å¼•ç”¨è®¡æ•°</strong>ï¼ˆè¾…åŠ© / å†å²ï¼‰ã€‚</p>
<h3 data-id="heading-3">ç®—æ³• 1ï¼šæ ‡è®° - æ¸…é™¤ï¼ˆMark-and-Sweepï¼Œç°ä»£å¼•æ“ä¸»æµï¼‰</h3>
<p>è¿™æ˜¯ V8 æœ€æ ¸å¿ƒçš„ GC ç®—æ³•ï¼Œåˆ†ä¸º â€œæ ‡è®°â€ å’Œ â€œæ¸…é™¤â€ ä¸¤æ­¥ï¼Œé€»è¾‘å¾ˆç›´è§‚ï¼š</p>
<blockquote>
<p>GC å¯åŠ¨</p>
</blockquote>
<p><strong>æ ‡è®°é˜¶æ®µ</strong>ï¼šä»æ ¹å¯¹è±¡ï¼ˆå¦‚ window/globalï¼‰å‡ºå‘ï¼Œéå†æ‰€æœ‰å¯è®¿é—®çš„å¯¹è±¡ï¼Œæ‰“ä¸Šâ€œå­˜æ´»â€æ ‡è®°</p>
<p><strong>æ¸…é™¤é˜¶æ®µ</strong>ï¼šéå†å †å†…å­˜ï¼Œæ¸…é™¤æ‰€æœ‰æ²¡æœ‰â€œå­˜æ´»â€æ ‡è®°çš„å¯¹è±¡ï¼Œé‡Šæ”¾å†…å­˜</p>
<p><strong>å†…å­˜æ•´ç†</strong>ï¼ˆ<strong>å¯é€‰</strong>ï¼‰ï¼šå°†ç©ºé—²å†…å­˜ç¢ç‰‡åˆå¹¶ï¼Œæ–¹ä¾¿åç»­åˆ†é…</p>
<p><strong>ä¸¾ä¸ªä¾‹å­ç†è§£</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// æ ¹å¯¹è±¡ï¼šwindowï¼ˆæµè§ˆå™¨ç¯å¢ƒï¼‰
let <span class="hljs-attr">obj1</span> = { name: <span class="hljs-string">"John"</span> }<span class="hljs-comment">; // obj1 è¢« window å¼•ç”¨ â†’ æ ‡è®°ä¸ºå­˜æ´»</span>
let <span class="hljs-attr">obj2</span> = obj1<span class="hljs-comment">; // obj2 ä¹Ÿå¼•ç”¨ obj1 â†’ è¿˜æ˜¯å­˜æ´»</span>
<span class="hljs-attr">obj1</span> = null<span class="hljs-comment">; // è§£é™¤ obj1 çš„å¼•ç”¨ï¼Œä½† obj2 è¿˜æŒ‡å‘ â†’ ä»å­˜æ´»</span>
<span class="hljs-attr">obj2</span> = null<span class="hljs-comment">; // æ‰€æœ‰å¼•ç”¨éƒ½è§£é™¤ â†’ obj1 æ— æ³•è®¿é—® â†’ æ ‡è®°ä¸ºåƒåœ¾ï¼Œä¸‹æ¬¡ GC æ¸…é™¤</span>
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>è§£å†³äº†å¼•ç”¨è®¡æ•°çš„ â€œå¾ªç¯å¼•ç”¨â€ é—®é¢˜ï¼ˆä¸‹é¢ä¼šè¯´ï¼‰ï¼›</li>
<li>é€»è¾‘ç®€å•ï¼Œæ•ˆç‡é«˜ã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>æ¸…é™¤åä¼šäº§ç”Ÿ<strong>å†…å­˜ç¢ç‰‡</strong>ï¼ˆæ¯”å¦‚å†…å­˜é‡Œé›¶æ•£çš„ç©ºé—²ç©ºé—´ï¼‰ï¼Œä½† V8 ä¼šé€šè¿‡ â€œå†…å­˜æ•´ç†â€ ä¼˜åŒ–ã€‚</li>
</ul>
<h3 data-id="heading-4">ç®—æ³• 2ï¼šå¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼Œå†å²ç®—æ³•ï¼Œå·²æ·˜æ±°æ ¸å¿ƒåœºæ™¯ï¼‰</h3>
<p>æ—©æœŸï¼ˆå¦‚ IE8 ä¹‹å‰ï¼‰çš„ç®—æ³•ï¼Œé€»è¾‘æ˜¯ï¼š<strong>ç»™æ¯ä¸ªå¯¹è±¡è®°å½• â€œè¢«å¼•ç”¨çš„æ¬¡æ•°â€ï¼Œæ¬¡æ•°ä¸º 0 å°±å›æ”¶</strong>ã€‚</p>
<ul>
<li>å½“å¯¹è±¡è¢«å¼•ç”¨ â†’ è®¡æ•° + 1ï¼›</li>
<li>å½“å¼•ç”¨è§£é™¤ â†’ è®¡æ•° - 1ï¼›</li>
<li>è®¡æ•° = 0 â†’ ç«‹å³å›æ”¶ã€‚</li>
</ul>
<p><strong>ä¾‹å­</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">obj</span> = { a: <span class="hljs-number">1</span> }<span class="hljs-comment">; // å¼•ç”¨è®¡æ•° = 1</span>
let <span class="hljs-attr">obj2</span> = obj<span class="hljs-comment">;     // å¼•ç”¨è®¡æ•° = 2</span>
<span class="hljs-attr">obj</span> = null<span class="hljs-comment">;         // å¼•ç”¨è®¡æ•° = 1ï¼ˆè¿˜ä¸èƒ½å›æ”¶ï¼‰</span>
<span class="hljs-attr">obj2</span> = null<span class="hljs-comment">;        // å¼•ç”¨è®¡æ•° = 0 â†’ å˜æˆåƒåœ¾ï¼Œè¢«å›æ”¶</span>
</code></pre>
<p><strong>è‡´å‘½ç¼ºç‚¹ï¼šæ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨</strong>ï¼ˆè¿™ä¹Ÿæ˜¯å®ƒè¢«æ ‡è®° - æ¸…é™¤å–ä»£çš„æ ¸å¿ƒåŸå› ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// å¾ªç¯å¼•ç”¨ï¼šobj1 å’Œ obj2 äº’ç›¸å¼•ç”¨ï¼Œå¼•ç”¨è®¡æ•°éƒ½ä¸º 1ï¼Œæ°¸è¿œä¸ä¼šä¸º 0
let <span class="hljs-attr">obj1</span> = {}<span class="hljs-comment">;</span>
let <span class="hljs-attr">obj2</span> = {}<span class="hljs-comment">;</span>
<span class="hljs-attr">obj1.fn</span> = obj2<span class="hljs-comment">;</span>
<span class="hljs-attr">obj2.fn</span> = obj1<span class="hljs-comment">;</span>

// å³ä½¿è§£é™¤å¤–éƒ¨å¼•ç”¨ï¼Œè®¡æ•°ä»ä¸º 1 â†’ å¼•ç”¨è®¡æ•°ç®—æ³•ä¸ä¼šå›æ”¶ï¼Œé€ æˆå†…å­˜æ³„æ¼
<span class="hljs-attr">obj1</span> = null<span class="hljs-comment">;</span>
<span class="hljs-attr">obj2</span> = null<span class="hljs-comment">;</span>
</code></pre>
<p>ğŸ‘‰ è€Œ<strong>æ ‡è®° - æ¸…é™¤ç®—æ³•èƒ½è§£å†³è¿™ä¸ªé—®é¢˜</strong>ï¼šå› ä¸º obj1 / obj2 éƒ½æ— æ³•ä»æ ¹å¯¹è±¡è®¿é—®åˆ°ï¼Œä¼šè¢«æ ‡è®°ä¸ºåƒåœ¾ï¼Œæœ€ç»ˆå›æ”¶ã€‚</p>
<h2 data-id="heading-5">4. V8 å¼•æ“çš„ GC ä¼˜åŒ–ï¼ˆè¿›é˜¶ï¼Œé¢è¯•é«˜é¢‘ï¼‰</h2>
<p>V8 ä¸ºäº†æå‡ GC æ•ˆç‡ï¼Œè¿˜åšäº†é’ˆå¯¹æ€§ä¼˜åŒ–ï¼Œæ ¸å¿ƒæ˜¯ â€œåˆ†ä»£å›æ”¶â€ï¼š</p>
<ul>
<li>
<p>å°†å†…å­˜åˆ†ä¸º <strong>æ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰</strong> å’Œ <strong>è€ç”Ÿä»£ï¼ˆOld Generationï¼‰</strong> ï¼›</p>
<ul>
<li>æ–°ç”Ÿä»£ï¼šå­˜å‚¨çŸ­æœŸå­˜æ´»çš„å¯¹è±¡ï¼ˆå¦‚å‡½æ•°å†…éƒ¨çš„ä¸´æ—¶å˜é‡ï¼‰ï¼ŒGC é¢‘ç‡é«˜ã€é€Ÿåº¦å¿«ï¼ˆç”¨ â€œScavenge ç®—æ³•â€ï¼Œå¤åˆ¶ - æ¸…é™¤ï¼‰ï¼›</li>
<li>è€ç”Ÿä»£ï¼šå­˜å‚¨é•¿æœŸå­˜æ´»çš„å¯¹è±¡ï¼ˆå¦‚å…¨å±€å˜é‡ï¼‰ï¼ŒGC é¢‘ç‡ä½ï¼Œç”¨ â€œæ ‡è®° - æ¸…é™¤ + æ ‡è®° - æ•´ç†â€ ç®—æ³•ã€‚</li>
</ul>
</li>
<li>
<p>ä¼˜ç‚¹ï¼šé¿å…å¯¹æ•´ä¸ªå†…å­˜åšå…¨é‡ GCï¼Œå‡å°‘å¡é¡¿ï¼ˆJS æ˜¯å•çº¿ç¨‹ï¼ŒGC æ—¶ä¼šæš‚åœä»£ç æ‰§è¡Œï¼Œåˆ†ä»£å›æ”¶èƒ½ç¼©çŸ­æš‚åœæ—¶é—´ï¼‰ã€‚</p>
</li>
</ul>
<h2 data-id="heading-6">5. å¸¸è§çš„å†…å­˜æ³„æ¼åœºæ™¯ï¼ˆGC æ²¡å›æ”¶çš„ â€œä¼ªåƒåœ¾â€ï¼‰</h2>
<p>åƒåœ¾å›æ”¶ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå¦‚æœä»£ç å†™å¾—ä¸å¥½ï¼Œä¼šå¯¼è‡´ â€œæœ¬è¯¥å›æ”¶çš„å¯¹è±¡æ²¡è¢«å›æ”¶â€ï¼Œä¹Ÿå°±æ˜¯<strong>å†…å­˜æ³„æ¼</strong>ï¼Œå¸¸è§åœºæ™¯ï¼š</p>
<ol>
<li>
<p><strong>æ„å¤–çš„å…¨å±€å˜é‡</strong>ï¼ˆæœ€å¸¸è§ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn</span></span>() {
  num = 10; // æ²¡å†™ <span class="hljs-built_in">let</span>/var/const â†’ è‡ªåŠ¨æŒ‚è½½åˆ° window â†’ å…¨å±€å˜é‡ï¼Œæ°¸è¿œä¸å›æ”¶
}
</code></pre>
</li>
<li>
<p><strong>æœªæ¸…é™¤çš„å®šæ—¶å™¨ / äº‹ä»¶ç›‘å¬</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šæ—¶å™¨å¼•ç”¨äº† objï¼Œå³ä½¿é¡µé¢å…³é—­å‰ä¸æ¸…é™¤å®šæ—¶å™¨ï¼Œobj æ°¸è¿œå­˜æ´»</span>
<span class="hljs-keyword">let</span> obj = { <span class="hljs-attr">data</span>: <span class="hljs-string">"xxx"</span> };
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj); }, <span class="hljs-number">1000</span>);
<span class="hljs-comment">// è§£å†³ï¼šä¸ç”¨æ—¶ clearInterval(timer)</span>
</code></pre>
</li>
<li>
<p><strong>é—­åŒ…æ»¥ç”¨</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">outer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> bigData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>); <span class="hljs-comment">// å¤§æ•°ç»„</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-comment">// é—­åŒ…å¼•ç”¨ bigDataï¼Œouter æ‰§è¡Œå®Œå bigData ä¹Ÿä¸å›æ”¶</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bigData);
  };
}
<span class="hljs-keyword">let</span> fn = <span class="hljs-title function_">outer</span>();
<span class="hljs-comment">// è§£å†³ï¼šä¸ç”¨æ—¶ fn = nullï¼Œè§£é™¤å¼•ç”¨</span>
</code></pre>
</li>
</ol>
<h2 data-id="heading-7">æœ€åæ€»ç»“ ğŸ¤”</h2>
<ol>
<li><strong>æ ¸å¿ƒæœ¬è´¨</strong>ï¼šJS åƒåœ¾å›æ”¶æ˜¯å¼•æ“è‡ªåŠ¨å›æ”¶ â€œä¸å¯è®¿é—®â€ å¯¹è±¡çš„å†…å­˜ï¼Œé¿å…æ‰‹åŠ¨ç®¡ç†å†…å­˜çš„ç¹çå’Œé”™è¯¯ã€‚</li>
<li><strong>æ ¸å¿ƒç®—æ³•</strong>ï¼šç°ä»£å¼•æ“ä»¥<strong>æ ‡è®° - æ¸…é™¤</strong>ä¸ºä¸»ï¼ˆè§£å†³å¾ªç¯å¼•ç”¨ï¼‰ï¼Œå¼•ç”¨è®¡æ•°å·²æ·˜æ±°æ ¸å¿ƒåœºæ™¯ã€‚</li>
<li><strong>V8 ä¼˜åŒ–</strong>ï¼šåˆ†ä»£å›æ”¶ï¼ˆæ–°ç”Ÿä»£ + è€ç”Ÿä»£ï¼‰å‡å°‘ GC å¡é¡¿ï¼Œæå‡æ€§èƒ½ã€‚</li>
<li><strong>é¿å‘é‡ç‚¹</strong>ï¼šé¿å…æ„å¤–å…¨å±€å˜é‡ã€æœªæ¸…é™¤çš„å®šæ—¶å™¨ / ç›‘å¬ã€æ»¥ç”¨é—­åŒ…ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµè§ˆå™¨ä¸­å¦‚ä½•æ‘†è„±æµè§ˆå™¨ä¸‹12pxçš„é™åˆ¶]]></title>    <link>https://juejin.cn/post/7596276978808389675</link>    <guid>https://juejin.cn/post/7596276978808389675</guid>    <pubDate>2026-01-18T09:10:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596276978808389675" data-draft-id="7584655946086613038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµè§ˆå™¨ä¸­å¦‚ä½•æ‘†è„±æµè§ˆå™¨ä¸‹12pxçš„é™åˆ¶"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2026-01-18T09:10:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hello_Code"/> <meta itemprop="url" content="https://juejin.cn/user/3423198551742986"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµè§ˆå™¨ä¸­å¦‚ä½•æ‘†è„±æµè§ˆå™¨ä¸‹12pxçš„é™åˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3423198551742986/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hello_Code
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T09:10:46.000Z" title="Sun Jan 18 2026 09:10:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç›®å‰Chromeæµè§ˆå™¨ä¾ç„¶æ²¡æœ‰æ”¾å¼€<code>12px</code>çš„é™åˆ¶ï¼Œä½†Chromeä»ç„¶æ˜¯ä½¿ç”¨äººæ•°æœ€å¤šçš„æµè§ˆå™¨ã€‚</p>
<p>åœ¨ç¬”è€…å¼€å‘æŸä¸ªé¡¹ç›®æ—¶çªå‘å¥‡æƒ³ï¼šå¦‚æœå®é™…éœ€è¦<code>11px</code>çš„å­—ä½“å¤§å°æ€ä¹ˆåŠï¼Ÿè¿™åœ¨Chromeä¸­æ˜¯å®ç°ä¸äº†çš„ã€‚å…³äºå­—ä½“ï¼Œä¸€å¼€å§‹æƒ³åˆ°çš„å°±æ˜¯remç­‰épxå•ä½ã€‚ä½†æ˜¯<code>rem</code>åªæ˜¯ä¸ºäº†å“åº”å¼é€‚é…ï¼Œå¹¶ä¸èƒ½çªç ´è¿™ä¸€é™åˆ¶ã€‚</p>
<blockquote>
<p>emã€remç­‰å•ä½åªæ˜¯ä¸ºäº†ä¸åŒåˆ†è¾¨ç‡ä¸‹å±•ç¤ºæ•ˆæœæå‡ºçš„æ¢ç®—å•ä½ï¼Œå¸¸è§çš„åº“<code>px2rem</code>ä¹Ÿåªæ˜¯åˆ©ç”¨äº†jså°†<code>px</code>è½¬ä¸º<code>rem</code>ã€‚åŒ…æ‹¬å¾®ä¿¡å°ç¨‹åºæå‡ºçš„<code>rpx</code>å•ä½ä¹Ÿæ˜¯ä¸€æ ·ï¼</p>
</blockquote>
<p>è¿™æ¡è·¯èµ°ä¸é€šï¼Œå°±åªå‰©ä¸‹ä¸€ä¸ªæ–¹æ³•ï¼š<strong>æ”¹å˜è§†è§‰å¤§å°è€Œéå®é™…å¤§å°</strong>ã€‚</p>
<h2 data-id="heading-0">ç†è®ºåŸºç¡€</h2>
<p>cssä¸­æœ‰ä¸€ä¸ªå±æ€§ï¼š<code>transform: scale();</code></p>
<ul>
<li>å€¼çš„ç»å¯¹å€¼&gt;1ï¼Œå°±æ˜¯æ”¾å¤§ï¼Œæ¯”å¦‚2ï¼Œå°±æ˜¯æ”¾å¤§2å€</li>
<li>å€¼çš„ç»å¯¹å€¼ 0&lt;å€¼&lt;1ï¼Œå°±æ˜¯ç¼©å°ï¼Œæ¯”å¦‚0.5ï¼Œå°±æ˜¯åŸæ¥çš„0.5å€ï¼›</li>
<li>å€¼çš„æ­£è´Ÿï¼Œè´Ÿå€¼è¡¨ç¤ºå›¾å½¢ç¿»è½¬ã€‚</li>
</ul>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>scale(x, y)</code>ï¼šä»¥x/yè½´è¿›è¡Œç¼©æ”¾ï¼›å¦‚æœyæ²¡æœ‰å€¼ï¼Œé»˜è®¤<code>y==x</code>ï¼›
ä¹Ÿå¯ä»¥åˆ†å¼€å†™ï¼šscaleX()  scaleY()  scaleZ()ï¼Œåˆ†å¼€å†™çš„æ—¶å€™ï¼Œå¯ä»¥å¯¹Zè½´è¿›è¡Œç¼©æ”¾</p>
<p>ç¬¬äºŒç§å†™æ³•ï¼š<code>transform: scale3d(x, y, z)</code>è¯¥å†™æ³•æ˜¯ä¸Šé¢çš„æ–¹æ³•çš„å¤åˆå†™æ³•ï¼Œç»“æœå’Œä¸Šé¢çš„ä¸€æ ·ã€‚</p>
<p>ä½†ä½¿ç”¨è¿™ä¸ªå±æ€§è¦æ³¨æ„ä¸€ç‚¹ï¼šscale ç¼©æ”¾çš„æ—¶å€™æ˜¯ä»¥â€œç¼©æ”¾å…ƒç´ æ‰€åœ¨ç©ºé—´çš„ä¸­å¿ƒç‚¹â€ä¸ºåŸºå‡†çš„ã€‚
æ‰€ä»¥å¦‚æœç”¨åœ¨æ”¹å˜å…ƒç´ è§†è§‰å¤§å°çš„åœºæ™¯ä¸‹ï¼Œä¸€èˆ¬è¿˜éœ€è¦åˆ©ç”¨å¦ä¸€ä¸ªå…ƒç´ æ¥â€œæ¢å¤ä½ç½®â€ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">transform-origin</span>: top left;
</code></pre>
<p>è¯­æ³•ä¸Šè¯´ï¼Œ<code>transform-origin</code> æ‹¥æœ‰ä¸‰ä¸ªå±æ€§å€¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">transform-origin</span>: x-axis y-axis z-axis;
</code></pre>
<p>é»˜è®¤ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">transform-origin</span>:<span class="hljs-number">50%</span> <span class="hljs-number">50%</span> <span class="hljs-number">0</span>;
</code></pre>
<p>å±æ€§å€¼å¯ä»¥æ˜¯ç™¾åˆ†æ¯”ã€emã€pxç­‰å…·ä½“çš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯topã€rightã€bottomã€leftå’Œcenterè¿™æ ·çš„å…³é”®è¯ã€‚ä½œç”¨å°±æ˜¯æ›´æ”¹ä¸€ä¸ªå…ƒç´ å˜å½¢çš„åŸç‚¹ã€‚</p>
<h2 data-id="heading-1">å®é™…åº”ç”¨</h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mmcce__info-r"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- ä¸€äº›htmlç»“æ„ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">"xxx"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mmcce-valid-mj-period"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{'mmcce-mh': showStr}"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mmcce-valid-period-child"</span>&gt;</span>xxx<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-comment">&lt;!-- çˆ¶çº§ç»“æ„ï¼Œç‚¹å‡»æ˜¾ç¤ºä¸‹é¢å†…å®¹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mmcce-valid-pro"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"mmcceW"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- ä¸‹é¢å†…å®¹åœ¨åé¢æœ‰è®²è§£ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mmcce-text"</span> 
        <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in couponInfo.thresholdStr"</span> 
        <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span> 
        <span class="hljs-attr">:index</span>=<span class="hljs-string">"index"</span>
        <span class="hljs-attr">:style</span>=<span class="hljs-string">"{height: mTextH[index] + 'px'}"</span>
      &gt;</span>{{item}}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.mmcce-valid-mj-period</span> {
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">transition</span>: all .<span class="hljs-number">2s</span> ease;

  &amp;<span class="hljs-selector-class">.mmcce-mh</span> {
    <span class="hljs-attribute">max-height</span>: <span class="hljs-number">200px</span>;
  }

  <span class="hljs-selector-class">.mmcce-valid-pro</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">12px</span>;

    <span class="hljs-selector-class">.mmcce-text</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">200%</span>; // !
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">22px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">30px</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#737373</span>;
      <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">transform</span>       : <span class="hljs-built_in">scale</span>(.<span class="hljs-number">5</span>);
      <span class="hljs-attribute">transform-origin</span>: top left;
    }
  }
}

<span class="hljs-selector-class">.mmcce-valid-period-child</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">width</span>      : <span class="hljs-number">200%</span>;
  <span class="hljs-attribute">white-space</span>: nowrap;
  <span class="hljs-attribute">font-size</span>  : <span class="hljs-number">22px</span>;
  <span class="hljs-attribute">color</span>      : <span class="hljs-number">#979797</span>;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">30px</span>;

  <span class="hljs-attribute">transform</span>       : <span class="hljs-built_in">scale</span>(.<span class="hljs-number">5</span>);
  <span class="hljs-attribute">transform-origin</span>: top left;

  //xxx
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21b81a26fc3744e19135d18e9d4729a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGVsbG9fQ29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769332246&amp;x-signature=asP7OqjIPW7ldxd%2F4hCdFlL3m%2Bg%3D" alt="å±å¹•æˆªå›¾ 2025-12-17 194818.png" loading="lazy"/></p>
<p>å¯ä»¥æ˜ç¡®è¯´æ˜çš„æ˜¯ï¼Œè¿™æ ·çš„ hack éœ€è¦æ˜ç¡®è§„å®šç¼©æ”¾å…ƒç´ çš„<code>height</code>å€¼ <strong>ï¼ï¼ï¼</strong></p>
<p>ä¸Šé¢ä»£ç ä¸­ä¸ºä»€ä¹ˆ<code>.mmcce-valid-mj-period</code>ç±»ä¸­è¦ç”¨<code>max-height</code> ï¼Ÿä¸ºä»€ä¹ˆå¯¹å±•å¼€å…ƒç´ ä¸­çš„æ–‡å­—ç±»<code>.mmcce-text</code>ä¸­ä½¿ç”¨<code>height</code>ï¼Ÿ
æˆ‘å°†ç±»<code>.mmcce-text</code>ä¸­çš„<code>height</code>å»æ‰åï¼Œçœ‹ä¸‹æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b337e5e650804fcaacc2cbafb8f75a99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGVsbG9fQ29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769332246&amp;x-signature=RtqKGtbPpRSvhu2prxywhoUB1ck%3D" alt="å±å¹•æˆªå›¾ 2025-12-17 194840.png" loading="lazy"/></p>
<p>ï¼ˆä½¿ç”¨<code>min-height</code>æ˜¯ä¸€æ ·çš„æ•ˆæœï¼‰</p>
<p>OKï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå é«˜æ²¡æœ‰æŒ‰æˆ‘ä»¬æƒ³çš„â€œè¢«ç¼©æ”¾â€ã€‚å½±å“åˆ°äº†ä¸‹é¢çš„å…ƒç´ ä½ç½®ã€‚</p>
<blockquote>
<p>æœ¬è´¨ä¸Šæ˜¯â€œè§†è§‰å¤§å°æ”¹å˜äº†ä½†å®é™…(å ä½)å¤§å°æ— å˜åŒ–â€ã€‚
è¿™æ—¶å€™ï¼Œå®½é«˜å®é™…ä¹Ÿè¢«ç¼©æ”¾äº†çš„ã€‚è¿™ä¸€ç‚¹é€šè¿‡ä»£ç ä¸­<code>width:200%</code>ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ã€‚æˆ–è€…ä½ è®¾ç½®äº†<code>overflow:hidden;</code>ä¹Ÿå¯ä»¥æœ‰ç›¸åº”çš„æ•ˆæœï¼</p>
</blockquote>
<p>è¿™ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œç»™è¢«ç¼©æ”¾å…ƒç´ æ˜¾å¼è®¾ç½®ä¸€ä¸ªå¤§äºç­‰äºå…¶<code>font-size</code>çš„<code>height</code>å€¼å³å¯ã€‚</p>
<h3 data-id="heading-2">ç¼©æ”¾å¸¦æ¥çš„å…¶å®ƒé—®é¢˜</h3>
<p>å¯èƒ½åœ¨å¾ˆå¤šäººä½¿ç”¨çš„åœºæ™¯ä¸­æ˜¯ä¸ä¼šè€ƒè™‘åˆ°è¿™ä¸ªé—®é¢˜çš„ï¼šè¢«ç¼©æ”¾å…ƒç´ é™åˆ¶é«˜åº¦ä»¥åå¦‚æœå…ƒç´ æ¢è¡Œé‚£ä¹ˆä¼šå‡ºç°æ–‡å­—é‡å çš„ç°è±¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be0c2e4c8db1494aaa14089041236a42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGVsbG9fQ29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769332246&amp;x-signature=jhFZ%2FlebSzBPH8%2FVXAx5ZRHtJO8%3D" alt="å±å¹•æˆªå›¾ 2025-12-17 194858.png" loading="lazy"/></p>
<p>ä¸ºæ­¤ï¼Œæˆ‘é‡‡ç”¨äº†åœ¨<code>mounted</code>ç”Ÿå‘½å‘¨æœŸä¸­è·å–çˆ¶å…ƒç´ å®½åº¦ï¼Œç„¶ååŠ¨æ€è®¡ç®—æ˜¯å¦éœ€è¦æ¢è¡Œä»¥åŠæ¢è¡Œçš„è¡Œæ•°ï¼Œæœ€åç”¨åŠ¨æ€styleé‡æ–°æ¸²æŸ“æ¯ä¸€æ¡æ•°æ®çš„<code>height</code>å€¼ã€‚
è¿™é‡Œæœ‰ä¸‰ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li>è¿™é‡Œç”¨çš„æ˜¯ä¸€ç§å–å·§çš„æ–¹æ³•ï¼šç”¨<code>æ¯ä¸ªæ–‡å­—çš„è§†è§‰font-sizeå€¼*å­—ç¬¦ä¸²é•¿åº¦</code>ã€‚å› ä¸ºç¬”è€…é‡åˆ°çš„åœºæ™¯ä¸ä¼šå‡ºç°é—®é¢˜æ‰€ä»¥å¯ä»¥è¿™ä¹ˆç”¨ã€‚åœ¨ä¸ç¡®å®šåœºæ™¯ä¸­æ›´æ¨èç”¨canvasæˆ–domå®é™…è®¡ç®—æ¯ä¸ªå­—ç¬¦çš„å®½åº¦å†åšåˆ¤æ–­ï¼ˆéœ€è¦çŸ¥é“æ–‡å­—ã€å­—æ¯å’Œæ•°å­—çš„å®½åº¦æ˜¯ä¸ä¸€æ ·çš„ï¼‰ï¼›</li>
<li>éœ€è¦æ³¨æ„ä¸€äº›ç‰¹æ®Šæœºå‹çš„å±•ç¤ºï¼Œæ¯”å¦‚ä¸‰æ˜Ÿçš„galaxy foldï¼Œè¿™ç©æ„æ˜¯ä¸ªæŠ˜å å±ï¼Œå®ƒçš„è®¡ç®—ä¼šå’Œä¸€èˆ¬çš„å±å¹•è®¡ç®—çš„ä¸ä¸€è‡´ï¼›</li>
<li>åœ¨vueç”Ÿå‘½å‘¨æœŸä¸­ï¼Œmountedå¯ä»¥æ“ä½œdomï¼Œä½ å¯ä»¥é€šè¿‡<code>this.$el</code>è·å–å…ƒç´ ã€‚ä½†è¦æ³¨æ„ï¼šåœ¨è¿™ä¸ªæ—¶æœŸè¢«è·å–çš„å…ƒç´ ä¸èƒ½ç”¨<code>v-if</code>ï¼ˆå³ï¼šå¿…é¡»å­˜åœ¨äºè™šæ‹Ÿtreeä¸­ï¼‰ã€‚è¿™ä¹Ÿæ˜¯ä¸Šé¢ä»£ç ä¸­ç¬”è€…ä½¿ç”¨<code>v-show</code>å’Œ<code>opacity</code>çš„åŸå› ã€‚</li>
</ol>
<blockquote>
<p>å…³äºç¬¬ä¸‰ç‚¹ï¼Œè¿˜æ¶‰åŠåˆ°åŠ è½½é¡ºåºçš„é—®é¢˜ã€‚æ¯”å¦‚åˆšè¿›å…¥é¡µé¢æ—¶è¦å±•ç¤ºå¼¹çª—ï¼Œå¼¹çª—æ˜¯ä¸€ä¸ªç»„ä»¶ã€‚é‚£ä½ åœ¨index.vueä¸­æ˜¯è·å–ä¸åˆ°è¿™ä¸ªç»„ä»¶çš„ã€‚ä½†æ˜¯ä½ å¯ä»¥å°†æ¯”å¦‚headerä¹Ÿæ‹†åˆ†å‡ºæ¥ï¼Œç„¶ååœ¨headerç»„ä»¶çš„mountedä¸­å»è°ƒç”¨å¼¹çª—ç»„ä»¶æš´éœ²å‡ºçš„æ–¹æ³•ã€‚</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>){
  <span class="hljs-keyword">let</span> thresholdStr = <span class="hljs-variable language_">this</span>.<span class="hljs-property">info</span>.<span class="hljs-property">dropDownTextList</span>;
  <span class="hljs-keyword">let</span> minW = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.mmcce-valid-pro'</span>).<span class="hljs-property">clientWidth</span> &lt; <span class="hljs-number">140</span>) { <span class="hljs-comment">// ä»¥iPhone5ä½å‡†ï¼Œå†å°äºå…¶ä¸­å…ƒç´ å®½åº¦çš„çš„æœºå‹å°±è¦åšç‰¹æ®Šå¤„ç†äº†</span>
    minW = <span class="hljs-literal">true</span>
  }
  <span class="hljs-keyword">let</span> mmcw = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.mmcce-valid-pro'</span>).<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">width</span>;

  <span class="hljs-keyword">let</span> mmch = [];

  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;thresholdStr.<span class="hljs-property">length</span>;i++) {
    <span class="hljs-comment">// 11æ˜¯æŒ‡ç¼©æ”¾åæ–‡å­—çš„font-sizeå€¼ï¼Œè¿™æ˜¯ä¸€ç§å–å·§çš„æ–¹å¼</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-number">11</span>*(thresholdStr[i].<span class="hljs-property">length</span>) &gt; mmcw) {
      <span class="hljs-keyword">if</span>(minW) {
        mmch[i] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((<span class="hljs-number">11</span>*thresholdStr[i].<span class="hljs-property">length</span>) / mmcw) * <span class="hljs-number">15</span>;
      }<span class="hljs-keyword">else</span> {
        mmch[i] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((<span class="hljs-number">11</span>*(thresholdStr[i].<span class="hljs-property">length</span>) + <span class="hljs-number">40</span>) / mmcw) * <span class="hljs-number">15</span>;
      }
    }<span class="hljs-keyword">else</span> {
      mmch[i] = <span class="hljs-number">15</span>;
    }
  }

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mTextH</span> = mmch;
},
</code></pre>
<blockquote>
<p>ç¬”è€…å‰æ®µæ—¶é—´å¼„äº†ä¸€ä¸ªå¾®ä¿¡å…¬ä¼—å·ï¼šå‰ç«¯Codeæ–°è°ˆã€‚é‡Œé¢æš‚æ—¶æœ‰webrtcã€å‰ç«¯é¢è¯•å’Œç”¨æˆ·ä½“éªŒç³»åˆ—æ–‡ç« ï¼Œæœ€è¿‘æš‚æ—¶æç½®äº†webrtcï¼Œæ–°å¼€äº†ä¸€ä¸ªç³»åˆ—â€œthree.jsâ€ï¼Œæ¬¢è¿å…³æ³¨ï¼å¸Œæœ›èƒ½å¤Ÿå¸®åˆ°å¤§å®¶ï¼Œä¹Ÿå¸Œæœ›èƒ½äº’ç›¸äº¤æµï¼ä¸€èµ·å­¦ä¹ å…±åŒè¿›æ­¥</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS-å½»åº•å‘Šåˆ«è·¨åŸŸçƒ¦æ¼ï¼šä»åŒæºç­–ç•¥åˆ° CORS æ·±åº¦å®æˆ˜]]></title>    <link>https://juejin.cn/post/7596276978808406059</link>    <guid>https://juejin.cn/post/7596276978808406059</guid>    <pubDate>2026-01-18T09:12:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596276978808406059" data-draft-id="7596230910212685867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS-å½»åº•å‘Šåˆ«è·¨åŸŸçƒ¦æ¼ï¼šä»åŒæºç­–ç•¥åˆ° CORS æ·±åº¦å®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-18T09:12:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS-å½»åº•å‘Šåˆ«è·¨åŸŸçƒ¦æ¼ï¼šä»åŒæºç­–ç•¥åˆ° CORS æ·±åº¦å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T09:12:19.000Z" title="Sun Jan 18 2026 09:12:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨ Web å¼€å‘ä¸­ï¼Œâ€œè·¨åŸŸâ€æ˜¯æ¯ä¸ªå‰ç«¯å¼€å‘è€…ç»•ä¸å¼€çš„åã€‚å½“ä½ çœ‹åˆ°æ§åˆ¶å°æŠ¥å‡º <code>Access-Control-Allow-Origin</code> é”™è¯¯æ—¶ï¼Œå…¶å®æ˜¯æµè§ˆå™¨çš„<strong>åŒæºç­–ç•¥</strong>åœ¨èµ·ä½œç”¨ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±åº¦è§£æè·¨åŸŸçš„æœ¬è´¨ï¼Œå¹¶æŒæ¡ä¸»æµçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ</h2>
<h3 data-id="heading-2">1. åŒæºç­–ç•¥ (Same-origin policy)</h3>
<p>è·¨åŸŸé—®é¢˜çš„æ ¹æºæ˜¯æµè§ˆå™¨ä¸ºäº†å®‰å…¨è€Œå®æ–½çš„<strong>åŒæºç­–ç•¥</strong>ã€‚æ‰€è°“â€œåŒæºâ€ï¼Œæ˜¯æŒ‡ä¸¤ä¸ª URL çš„ä»¥ä¸‹ä¸‰éƒ¨åˆ†å®Œå…¨ç›¸åŒï¼š</p>
<ul>
<li><strong>åè®®</strong>ï¼šhttp ã€ https</li>
<li><strong>åŸŸå</strong> ï¼šåŸŸåå°±æ˜¯æˆ‘ä»¬æ¯æ¬¡è®¿é—®ç½‘ç«™è¾“å…¥çš„ç½‘å€ï¼Œæ¯ä¸ªåŸŸåéƒ½å¯¹åº”äº†ä¸€ä¸ªIPåœ°å€ï¼Œæµè§ˆå™¨ä¼šé€šè¿‡åŸŸåè§£ææ¥è·å–è¿™ä¸ªIPåœ°å€ï¼Œä¾‹å¦‚<code>www.test.com</code></li>
<li><strong>ç«¯å£å·</strong> ï¼š80 ã€ 8080</li>
</ul>
<h3 data-id="heading-3">2. åŸŸåè§£æå°ç§‘æ™®</h3>
<p>åŸŸåæ˜¯ IP åœ°å€çš„â€œå¤–å£³â€ã€‚</p>
<ul>
<li><strong>é¡¶çº§åŸŸå</strong>ï¼š.com, .cn</li>
<li><strong>ä¸€çº§åŸŸå</strong>ï¼štest.com</li>
<li><strong>äºŒçº§åŸŸå</strong>ï¼š <code>www.test.com</code></li>
<li><strong>æ³¨æ„</strong>ï¼šä¸€çº§åŸŸåå’ŒäºŒçº§åŸŸåä¹‹é—´ã€äºŒçº§åŸŸåå’Œä¸‰çº§åŸŸåä¹‹é—´ï¼Œç»Ÿç»Ÿå±äºè·¨åŸŸï¼æ¯”å¦‚åœ¨<code>www.test.com</code>ç½‘é¡µä½¿ç”¨ XMLHttpRequest è¯·æ±‚<code>time.test.con</code>çš„é¡µé¢å†…å®¹ï¼Œç”±äºå®ƒä»¬ä¸æ˜¯åŒä¸€ä¸ªæºï¼Œæ‰€ä»¥å°±æ¶‰åŠåˆ°äº†è·¨åŸŸï¼ˆåœ¨ A ç«™ç‚¹ä¸­å»è®¿é—®ä¸åŒæºçš„ B ç«™ç‚¹çš„å†…å®¹ï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè·¨åŸŸè¯·æ±‚æ˜¯ä¸è¢«å…è®¸çš„ï¼Œä½ å¯ä»¥çœ‹ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼š</li>
</ul>
<hr/>
<h2 data-id="heading-4">äºŒã€ è§£å†³æ–¹æ¡ˆä¸€ï¼šJSONP</h2>
<h3 data-id="heading-5">1. å®ç°åŸç†</h3>
<p>åˆ©ç”¨ <code>&lt;script&gt;</code> æ ‡ç­¾çš„ <code>src</code> å±æ€§ä¸å—åŒæºç­–ç•¥é™åˆ¶çš„ç‰¹æ€§ã€‚é€šè¿‡åŠ¨æ€åˆ›å»º script æ ‡ç­¾ï¼Œå‘é€ä¸€ä¸ªå¸¦æœ‰ <code>callback</code> å‚æ•°çš„ GET è¯·æ±‚ã€‚</p>
<h3 data-id="heading-6">2. ä»£ç å®ç°</h3>
<p><strong>å‰ç«¯é€»è¾‘ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">btn.<span class="hljs-title function_">click</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">var</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"script"</span>);<span class="hljs-comment">// åˆ›å»º scrip æ ‡ç­¾</span>
  script.<span class="hljs-property">src</span> = <span class="hljs-string">`http://localhost:3000?callback=show`</span>;<span class="hljs-comment">// æ·»åŠ  src è¯·æ±‚è·¯å¾„</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(script);
  script.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(script)
  }
});

<span class="hljs-comment">//è¿™ä¸ªå‡½æ•°å°±æ˜¯å›è°ƒå‡½æ•°ï¼Œå®ƒä¼šæ‹¼æ¥åˆ°srcå±æ€§ä¸­ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ“ä½œ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">show</span>(<span class="hljs-params">result</span>) {
  <span class="hljs-comment">// ...</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è·å–åˆ°çš„æ•°æ®ï¼š"</span>, result);
}
</code></pre>
<p><strong>æœåŠ¡ç«¯é€»è¾‘ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">http</span> = require(<span class="hljs-string">"http"</span>)
const <span class="hljs-attr">url</span> = require(<span class="hljs-string">"url"</span>)
http.createServer(
  (req,res)=&gt;{
    var <span class="hljs-attr">callback</span> = url.parse(req.url,<span class="hljs-literal">true</span>).query.callback<span class="hljs-comment">;</span>
    var <span class="hljs-attr">severData</span> = <span class="hljs-string">"xxxxxxxx"</span><span class="hljs-comment">;</span>
    <span class="hljs-attr">severData</span> = JSON.stringify(severData)
    res.writeHead(200,{
      "Content-Type": "text/plain<span class="hljs-comment">;charset=utf-8"</span>
    })<span class="hljs-comment">;</span>
    res.write(`${callback}(${severData})`)<span class="hljs-comment">;</span>
    res.end()<span class="hljs-comment">;</span>
  }
).listen(80)
</code></pre>
<p><strong>å±€é™æ€§</strong>ï¼š<strong>ä»…æ”¯æŒ GET è¯·æ±‚</strong>ï¼Œä¸å®‰å…¨ï¼Œä¸”æ— æ³•å¤„ç†å¤æ‚çš„æŠ¥é”™ä¿¡æ¯ã€‚</p>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€ è§£å†³æ–¹æ¡ˆäºŒï¼šCORS (ç°ä»£çš„æ ‡å‡†æ–¹æ¡ˆ)</h2>
<p>CORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰æ˜¯ç›®å‰çš„æ ‡å‡†è§£æ³•ã€‚å®ƒå°†è¯·æ±‚åˆ†ä¸º<strong>ç®€å•è¯·æ±‚</strong>å’Œ<strong>éç®€å•è¯·æ±‚</strong>ã€‚</p>
<h3 data-id="heading-8">1. ç®€å•è¯·æ±‚</h3>
<p>æ¡ä»¶ï¼šæ–¹æ³•ä¸º <code>GET/POST</code>ã€‚</p>
<ul>
<li><strong>æµç¨‹</strong>ï¼šæµè§ˆå™¨ç›´æ¥å‘èµ·è¯·æ±‚ï¼Œå¹¶åœ¨ Header ä¸­å¸¦ä¸Š <code>Origin</code>ã€‚</li>
<li><strong>æœåŠ¡ç«¯</strong>ï¼šé€šè¿‡è¿”å› <code>Access-Control-Allow-Origin</code> æ¥å‘ŠçŸ¥æµè§ˆå™¨æ˜¯å¦æ”¾è¡Œã€‚</li>
</ul>
<h3 data-id="heading-9">2. éç®€å•è¯·æ±‚ï¼ˆé¢„æ£€è¯·æ±‚ï¼‰</h3>
<p>æ¡ä»¶ï¼šåŒ…å« <code>PUT/DELETE</code> æ–¹æ³•ã€‚</p>
<ul>
<li>
<p><strong>æµç¨‹</strong>ï¼šæµè§ˆå™¨ä¼šå…ˆå‘é€ä¸€ä¸ª <strong>OPTIONS</strong> æ–¹æ³•çš„â€œé¢„æ£€è¯·æ±‚â€ã€‚</p>
</li>
<li>
<p><strong>å…³é”®å­—æ®µ</strong>ï¼š</p>
<ul>
<li><code>Access-Control-Max-Age</code>ï¼š è®¾ç½®é¢„æ£€è¯·æ±‚çš„ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé¿å…æ¯æ¬¡è¯·æ±‚éƒ½å¤šå‘ä¸€æ¬¡ OPTIONSï¼Œä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-10">3. Nginx æœåŠ¡ç«¯é…ç½®ç¤ºä¾‹</h3>
<pre><code class="hljs language-Nginx" lang="Nginx">server {
    listen 80;
    location / {
        # å…è®¸è·¨åŸŸçš„åŸŸåï¼Œå»ºè®®ç”Ÿäº§ç¯å¢ƒæŒ‡å®šå…·ä½“åŸŸåè€Œé *
        add_header 'Access-Control-Allow-Origin' '$http_origin';
        add_header 'Access-Control-Allow-Credentials' 'true';
        add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE';
        add_header 'Access-Control-Allow-Headers' 'DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization';
        
        # å¤„ç†é¢„æ£€è¯·æ±‚
        if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Max-Age' 1728000;
            return 204;
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-11">å››ã€ é¢è¯•æ¨¡æ‹Ÿé¢˜</h2>
<h3 data-id="heading-12">Q1ï¼šä¸ºä»€ä¹ˆè¦æœ‰åŒæºç­–ç•¥ï¼Ÿå¦‚æœæ²¡æœ‰ä¼šæ€æ ·ï¼Ÿ</h3>
<p>å‚è€ƒå›ç­”ï¼š</p>
<p>åŒæºç­–ç•¥ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢ CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰ æ”»å‡»ã€‚å¦‚æœæ²¡æœ‰åŒæºç­–ç•¥ï¼Œé»‘å®¢çš„ç½‘é¡µå¯ä»¥éšæ„è¯»å–ä½ é“¶è¡Œç½‘é¡µçš„ Cookie æˆ– DOM å†…å®¹ï¼Œä»è€Œå†’å……ä½ å‘é€è¯·æ±‚æˆ–çªƒå–æ•æ„Ÿä¿¡æ¯ã€‚</p>
<h3 data-id="heading-13">Q2ï¼šCORS é¢„æ£€è¯·æ±‚ï¼ˆOPTIONSï¼‰åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè§¦å‘ï¼Ÿ</h3>
<p>å‚è€ƒå›ç­”ï¼š</p>
<p>å½“è¯·æ±‚æ»¡è¶³ä»¥ä¸‹ä»»æ„æ¡ä»¶æ—¶ä¼šè§¦å‘é¢„æ£€ï¼š</p>
<ol>
<li>ä½¿ç”¨äº† <code>PUT</code>ã€<code>DELETE</code>ã€<code>CONNECT</code>ã€<code>OPTIONS</code>ã€<code>TRACE</code>ã€<code>PATCH</code> æ–¹æ³•ã€‚</li>
<li>è®¾ç½®äº†éç®€å•çš„ Header å­—æ®µï¼ˆå¦‚ <code>Authorization</code>ã€è‡ªå®šä¹‰ Tokenï¼‰ã€‚</li>
<li><code>Content-Type</code> çš„å€¼ä¸å±äº <code>application/x-www-form-urlencoded</code>ã€<code>multipart/form-data</code>ã€<code>text/plain</code>ã€‚</li>
</ol>
<h3 data-id="heading-14">Q3ï¼šå¦‚ä½•è§£å†³è·¨åŸŸæ—¶ Cookie æ— æ³•æºå¸¦çš„é—®é¢˜ï¼Ÿ</h3>
<p><strong>å‚è€ƒå›ç­”ï¼š</strong></p>
<ol>
<li><strong>å‰ç«¯</strong>ï¼š<code>XMLHttpRequest</code> æˆ– <code>fetch</code> éœ€è®¾ç½® <code>withCredentials: true</code>ã€‚</li>
<li><strong>æœåŠ¡ç«¯</strong>ï¼šè®¾ç½®å“åº”å¤´ <code>Access-Control-Allow-Credentials: true</code>ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šå½“å¼€å¯å‡­è¯æºå¸¦æ—¶ï¼Œ<code>Access-Control-Allow-Origin</code> <strong>ä¸èƒ½è®¾ç½®ä¸º <code>*</code></strong> ï¼Œå¿…é¡»æŒ‡å®šå…·ä½“çš„åŸŸåã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-15">äº”ã€ æ€»ç»“</h2>























<table><thead><tr><th><strong>æ–¹æ¡ˆ</strong></th><th><strong>åŸç†</strong></th><th><strong>ä¼˜ç‚¹</strong></th><th><strong>ç¼ºç‚¹</strong></th></tr></thead><tbody><tr><td><strong>JSONP</strong></td><td><code>&lt;script&gt;</code> æ ‡ç­¾ä¸å—é™</td><td>å…¼å®¹æ€§æå¥½ï¼ˆè€æµè§ˆå™¨ï¼‰</td><td>åªæ”¯æŒ GETï¼Œå®‰å…¨æ€§å·®</td></tr><tr><td><strong>CORS</strong></td><td>æœåŠ¡ç«¯ Header æˆæƒ</td><td>æ­£å¼æ ‡å‡†ï¼Œæ”¯æŒæ‰€æœ‰æ–¹æ³•</td><td>éœ€æœåŠ¡ç«¯é…åˆï¼Œæœ‰é¢„æ£€å¼€é”€</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶æ­å»º TypeScript å…¨æ ˆé¡¹ç›®ï¼šVue3 + NestJS + Prisma]]></title>    <link>https://juejin.cn/post/7596181746082627634</link>    <guid>https://juejin.cn/post/7596181746082627634</guid>    <pubDate>2026-01-18T10:40:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596181746082627634" data-draft-id="7596245612557287433" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶æ­å»º TypeScript å…¨æ ˆé¡¹ç›®ï¼šVue3 + NestJS + Prisma"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-18T10:40:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="KeinVoid"/> <meta itemprop="url" content="https://juejin.cn/user/1435280865759801"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶æ­å»º TypeScript å…¨æ ˆé¡¹ç›®ï¼šVue3 + NestJS + Prisma
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1435280865759801/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    KeinVoid
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T10:40:04.000Z" title="Sun Jan 18 2026 10:40:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰è¨€ï¼šè¯¥é¡¹ç›®ä¸ºåŸºäºTypeScriptçš„å…¨æ ˆé¡¹ç›®ï¼Œå‰ç«¯ï¼šVue,åç«¯ï¼šNestJS,ORMå·¥å…·ï¼šPrismaã€‚æœ¬æ–‡ä»…å±•ç¤ºé¡¹ç›®æ­å»ºè¿‡ç¨‹ã€‚</p>
<p>å­¦ä¹ æœ¬æ–‡éœ€è¦çš„å‰ç½®çŸ¥è¯†ï¼š</p>
<p>1ï¸âƒ£ï¼šnest g resè¿™ä¸ªå‘½ä»¤åˆ›å»ºå‡ºæ¥çš„æ–‡ä»¶ç»“æ„å…³ç³»</p>
<p>2ï¸âƒ£ï¼šäº†è§£npxçš„ä½œç”¨</p>
<p>3ï¸âƒ£ï¼šçŸ¥é“cliæ˜¯ä»€ä¹ˆ</p>
<p>å“ˆå“ˆï¼Œçœ‹äº†å‰ç½®çŸ¥è¯†éœ€æ±‚å°±ä¼šå‘ç°æœ¬æ–‡æ˜¯åå‘å‰ç«¯åˆå­¦è€…çš„ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšå­¦å‰ç«¯ä¸ä¹…ã€‚</p>
<p>è¯»å®Œæœ¬æ–‡ï¼Œä½ å°†äº†è§£åˆ°ï¼š</p>
<p>1ï¸âƒ£ç°ä»£å…¨æ ˆé¡¹ç›®ç»“æ„è®¾è®¡ï¼š</p>
<ul>
<li>å¦‚ä½•ä½¿ç”¨ Monorepo ç®¡ç†å¤šé¡¹ç›®</li>
<li><code>pnpm workspace</code> çš„å·¥ä½œåŒºé…ç½®</li>
<li>å‰åç«¯åˆ†ç¦»é¡¹ç›®çš„ç›®å½•ç»“æ„ç»„ç»‡æ–¹å¼</li>
<li>å…±äº«åŒ…çš„åˆ›å»ºä¸ç®¡ç†</li>
<li>NestJSçš„Monorepoå¤šåº”ç”¨æ¶æ„</li>
</ul>
<p>2ï¸âƒ£æŠ€æœ¯é›†æˆï¼š</p>
<ul>
<li>é›†æˆPrisma ORM</li>
<li>ç«¯å£é…ç½®ç®¡ç†</li>
</ul>
<p>3ï¸âƒ£å¼€å‘å·¥ä½œæµä¼˜åŒ–ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>concurrently</code> å®ç°å¤šæœåŠ¡å¹¶è¡Œå¯åŠ¨</li>
</ul>
<h2 data-id="heading-0">ä¸€ã€æ­å»ºé¡¹ç›®ç»“æ„</h2>
<h4 data-id="heading-1">1.æ–‡ä»¶ç»“æ„åˆæ­¥æ­å»º</h4>
<h5 data-id="heading-2">1.1æ–‡ä»¶ç»“æ„</h5>
<pre><code class="hljs language-arduino" lang="arduino">mkdir apps <span class="hljs-comment">//å­˜æ”¾å‰ç«¯é¡¹ç›®</span>
nest <span class="hljs-keyword">new</span> server <span class="hljs-comment">//åç«¯é¡¹ç›®</span>
mkdir packages <span class="hljs-comment">//å­˜æ”¾å‰åç«¯å…±ç”¨é¡¹ç›®</span>
cd packages
mkdir common <span class="hljs-comment">//å­˜æ”¾å…¬å…±ç±»å‹</span>
mkdir config <span class="hljs-comment">//å­˜æ”¾å…¬å…±é…ç½®</span>
touch pnpm-workspace.yaml <span class="hljs-comment">//å£°æ˜å…±äº«åŒ…èŒƒå›´</span>
touch README.md 
</code></pre>
<h5 data-id="heading-3">1.2pnpm-workspace.yaml:</h5>
<p>è¡¨ç¤ºå…±äº«ä¾èµ–çš„èŒƒå›´ä¸ºappså’Œpackagesä¸‹é¢çš„æ‰€æœ‰åŒ…ä¸serveråŒ…æœ¬èº«</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">//pnpm-workspace.yaml</span>
packages:
  - <span class="hljs-string">"apps/*"</span>
  - <span class="hljs-string">"server"</span>
  - <span class="hljs-string">"packages/*"</span>
</code></pre>
<h4 data-id="heading-4">2.å‰ç«¯é¡¹ç›®åˆå§‹åŒ–</h4>
<pre><code class="hljs language-arduino" lang="arduino">pnpm create vue

<span class="hljs-comment">//é€‰æ‹©ts+router+pinia</span>
</code></pre>
<p>çŸ¥è¯†ç‚¹ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-number">1.</span>åˆå§‹åŒ–vueé¡¹ç›®çš„æ–¹æ³•ï¼š
npm init vue = npm <span class="hljs-built_in">create</span> vue = npx <span class="hljs-built_in">create</span>-vue = npm i <span class="hljs-built_in">create</span>-vue -g,<span class="hljs-built_in">create</span>-vue,npm uninstall <span class="hljs-built_in">create</span>-vue -g
ä¹Ÿç­‰ä»·äºpnpm <span class="hljs-built_in">create</span> vue
æœ¬è´¨éƒ½æ˜¯éšå¼è°ƒç”¨npx <span class="hljs-built_in">create</span>-vueï¼Œå®˜æ–¹vite+vueçš„è„šæ‰‹æ¶ï¼Œå…ˆå…¨å±€ä¸´æ—¶å®‰è£…ï¼Œç„¶åå¯ç”¨ï¼Œæœ€åå¸è½½
</code></pre>
<h4 data-id="heading-5">3.åç«¯é¡¹ç›®åˆå§‹åŒ–</h4>
<h5 data-id="heading-6">3.1åˆ›å»ºaié¡¹ç›®</h5>
<pre><code class="hljs language-arduino" lang="arduino">cd server
nest g app ai<span class="hljs-comment">//åˆ›å»ºaié¡¹ç›®</span>
</code></pre>
<p>çŸ¥è¯†ç‚¹ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-number">1.</span>nest g app aiçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ
ç­”ï¼šåˆ›å»ºmonorepoæ¶æ„çš„æ–‡ä»¶ç»“æ„ï¼ŒæŠŠåŸæ¥çš„serverå’Œåˆ›å»ºçš„aiéƒ½æ”¾åˆ°appsä¸­
    monorepo:ä¸€ä¸ªä»“åº“ç®¡ç†serverå’Œaiç­‰å¤šä¸ªé¡¹ç›®
    è¿™å¥è¯ä½ å¯ä»¥è¯»ä½œï¼Œnest ç”Ÿæˆ ä¸€ä¸ªé¡¹ç›®åº”ç”¨ å«åšai
åŸé¡¹ç›®ç»“æ„ï¼š
server/
â”œâ”€â”€ .git/
â”œâ”€â”€ .gitignore
â”œâ”€â”€ eslint.<span class="hljs-built_in">config</span>.mjs
â”œâ”€â”€ nest-cli.json
â”œâ”€â”€ <span class="hljs-built_in">package</span>.json
â”œâ”€â”€ README.md
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts
â”‚   â”œâ”€â”€ app.<span class="hljs-built_in">module</span>.ts
â”‚   â”œâ”€â”€ app.controller.ts
â”‚   â”œâ”€â”€ app.service.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ tsconfig.build.json

ä½¿ç”¨åçš„é¡¹ç›®ç»“æ„ï¼š
server/
â”œâ”€â”€ .git/                   
â”œâ”€â”€ .gitignore              
â”œâ”€â”€ .prettierrc            
â”œâ”€â”€ apps/                   ï¼ˆæ–°å¢ç›®å½•ï¼‰
â”‚   â”œâ”€â”€ ai/                 ï¼ˆæ–°å¢åº”ç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ main.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ai.<span class="hljs-built_in">module</span>.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ai.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ai.service.ts
â”‚   â”‚   â””â”€â”€ tsconfig.app.json
â”‚   â””â”€â”€ server/             ï¼ˆåŸsrcè¿ç§»è‡³æ­¤ï¼‰
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â””â”€â”€ ï¼ˆåŸserver/srcå†…å®¹ï¼‰
â”‚       â””â”€â”€ tsconfig.app.json
â”œâ”€â”€ eslint.<span class="hljs-built_in">config</span>.mjs      
â”œâ”€â”€ nest-cli.json           ï¼ˆå·²æ›´æ–°é…ç½®ï¼‰
â”œâ”€â”€ <span class="hljs-built_in">package</span>.json            ï¼ˆæ›´æ–°workspacesï¼‰
â”œâ”€â”€ README.md              
â”œâ”€â”€ tsconfig.json          
â””â”€â”€ tsconfig.build.json   
</code></pre>
<h5 data-id="heading-7">3.2åˆ›å»ºchatä¸useråº”ç”¨</h5>
<pre><code class="hljs language-sql" lang="sql">nest g res chat <span class="hljs-comment">--project ai</span>
nest g res <span class="hljs-keyword">user</span> <span class="hljs-comment">--project server</span>
</code></pre>
<p>çŸ¥è¯†ç‚¹ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-number">1.</span><span class="hljs-comment">--projectçš„ä½œç”¨ï¼š</span>
åœ¨æ ¹æ¨¡å—æŒ‡å®šç”Ÿæˆçš„ä½ç½®ï¼Œé¿å…æ¥å›åˆ‡æ¢
</code></pre>
<h5 data-id="heading-8">3.3nest-cli.json</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">//1.æ·»åŠ è¿™ä¸ªï¼Œé˜»æ­¢generateå‘½ä»¤æ·»åŠ ä¸éœ€è¦çš„å•æµ‹æ–‡ä»¶</span>
<span class="hljs-attr">"generateOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"spec"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
<span class="hljs-comment">//2.åˆ é™¤webpack</span>
</code></pre>
<h5 data-id="heading-9">3.4åˆ›å»ºå…±äº«æ¨¡å—+åœ¨å…±äº«æ¨¡å—ä¸­åˆå§‹åŒ–prisma</h5>
<p>åˆ›å»ºå…±äº«æ¨¡å—ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">nest g lib shared <span class="hljs-comment">//åˆ«åé€‰æ‹©@libs</span>

<span class="hljs-comment">//æ³¨æ„ï¼šè¿™é‡Œåªæ˜¯åˆ›å»ºäº†å…±äº«æ–‡ä»¶ç»“æ„ï¼Œä½†ä»éœ€è¦æˆ‘ä»¬è‡ªè¡Œé…ç½®æ‰èƒ½ç”Ÿæ•ˆï¼Œåç»­ä¼šè¿›è¡Œé…ç½®</span>
</code></pre>
<p>a.åˆå§‹åŒ–prisma</p>
<pre><code class="hljs language-csharp" lang="csharp">npx prisma <span class="hljs-keyword">init</span>
</code></pre>
<p>çŸ¥è¯†ç‚¹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">//çŸ¥è¯†ç‚¹</span>
<span class="hljs-number">1.</span>npx prisma <span class="hljs-keyword">init</span>ï¼š
  ç›¸å½“äºä¸´æ—¶æœ¬åœ°å®‰è£…prisma -D,ç„¶åä¸´æ—¶é…ç½®ç¯å¢ƒå˜é‡ï¼Œæœ€åè¿è¡Œprisma <span class="hljs-keyword">init</span>
  prismaæ˜¯cliå·¥å…·ï¼Œ<span class="hljs-keyword">init</span>æ˜¯å…¶ä¸­ä¸€ä¸ªç±»ä¼¼è„šæ‰‹æ¶åŠŸèƒ½çš„å‘½ä»¤
</code></pre>
<p>b.åœ¨å…±äº«æ¨¡å—ä¸­åˆ›å»ºprisma</p>
<pre><code class="hljs language-css" lang="css">nest g s prisma <span class="hljs-attr">--project</span> shared
nest g mo prisma <span class="hljs-attr">--project</span> shared
</code></pre>
<p><strong>c.é…ç½®å…±äº«æ¨¡å—ï¼ˆé‡ç‚¹ï¼‰</strong></p>
<p>æˆ‘ä»¬ç”±å¤–å±‚åˆ°å†…å±‚åœ°é…ç½®,å³ï¼š</p>
<p>app.module&lt;--shared.module&lt;--prisma.module&lt;--prisma.service</p>
<p>æˆ‘ä»¬åªéœ€è¦çŸ¥é“ä¸€ä¸ªç›®æ ‡ï¼šæ‰€æœ‰çš„ä¸œè¥¿éƒ½è¦æ³¨å†Œåˆ°app.moduleè¿™ä¸ªæ–‡ä»¶ä¸­</p>
<p>ä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä»¬æŠŠshared.moduleæ³¨å†Œè¿›å»ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±å˜æˆäº†--æŠŠæ‰€æœ‰æ¨¡å—æ³¨å†Œåˆ°shared.moduleä¸­ï¼Œæ‰€æœ‰çš„ä¸šåŠ¡æ–‡ä»¶æ³¨å†Œåˆ°å¯¹åº”çš„æ¨¡å—æ–‡ä»¶ä¸­ï¼Œè¿™æ ·å³å¯è¾¾æˆæˆ‘ä»¬çš„ç›®æ ‡</p>
<p><strong>1ï¸âƒ£</strong>åœ¨app.module.tsä¸­æ³¨å†Œshared.module.ts</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user/user.module'</span>;
â• <span class="hljs-keyword">import</span> { <span class="hljs-title class_">SharedModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@libs/shared'</span>;

<span class="hljs-meta">@Module</span>({
â•<span class="hljs-attr">imports</span>: [<span class="hljs-title class_">UserModule</span>,<span class="hljs-title class_">SharedModule</span>],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AppController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AppService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<p>2ï¸âƒ£ä½†æ˜¯shared.module.tsè¿˜ä¸æ˜¯å…¨å±€æ¨¡å—ï¼Œä¸èƒ½ç›´æ¥å¯¼å…¥ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨@Globalæ³¨å†Œåˆ°å…¨å±€</p>
<p>3ï¸âƒ£åœ¨shared.module.tsä¸­å°†prisma.module.tså¯¼å‡º</p>
<pre><code class="hljs language-ts" lang="ts">â•<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Global</span>, <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SharedService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./shared.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PrismaModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./prisma/prisma.module'</span>;

â•<span class="hljs-meta">@Global</span>()
<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">SharedService</span>],
â•<span class="hljs-attr">exports</span>: [<span class="hljs-title class_">SharedService</span>, <span class="hljs-title class_">PrismaModule</span>],
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">PrismaModule</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SharedModule</span> {}
</code></pre>
<p>4ï¸âƒ£åœ¨index.tsä¸­å°†prismaå…¨éƒ¨å¯¼å‡º</p>
<p>ç›®çš„ï¼š<strong>å¢åŠ ä»£ç æç¤º</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./shared.module'</span>;
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./shared.service'</span>;
â• <span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./prisma/prisma.module'</span>;
â• <span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./prisma/prisma.service'</span>;
</code></pre>
<p>5ï¸âƒ£åœ¨prisma.module.tsä¸­å¯¼å‡ºprisma.service.ts</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PrismaService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./prisma.service'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">PrismaService</span>],
â•<span class="hljs-attr">exports</span>: [<span class="hljs-title class_">PrismaService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrismaModule</span> {}
</code></pre>
<h2 data-id="heading-10">äºŒã€é…ç½®å¯åŠ¨é¡¹ç›®</h2>
<h4 data-id="heading-11">1.ä¿®æ”¹package.jsonçš„åå­—</h4>
<p>åœ¨nameçš„å‰é¢éƒ½åŠ ä¸€ä¸ª@en/</p>
<p>å¦‚ï¼šname:"@en/server"</p>
<p>åŸå› ï¼šæ–¹ä¾¿æœ¬åœ°æ¨¡å—çš„å¼•å…¥ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿pnpm --filterçš„ä½¿ç”¨</p>
<h5 data-id="heading-12">1.1åœ¨packagesçš„ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»ºpackage.json</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> common
pnpm init
</code></pre>
<p>åŒæ ·ä¿®æ”¹name</p>
<h4 data-id="heading-13">2.é…ç½®ç«¯å£</h4>
<p>ç°åœ¨è¿˜ä¸èƒ½å¯åŠ¨ï¼Œå› ä¸ºaiå’Œserveréƒ½æ˜¯ç›‘å¬3000ç«¯å£ï¼Œå¼•å‘å†²çªäº†</p>
<h5 data-id="heading-14">2.1åœ¨packages/configä¸‹æ–°å»ºindex.ts,é‡Œé¢åŠ ä¸Šç«¯å£é…ç½®</h5>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">export</span> <span class="hljs-type">const</span> config = {
    ports:{
        server:<span class="hljs-number">3000</span>,
        ai:<span class="hljs-number">3001</span>,
        web:<span class="hljs-number">8080</span>
    }
}
</code></pre>
<h5 data-id="heading-15">2.2åœ¨package.jsonä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</h5>
<p>1ï¸âƒ£moduleæ˜¯ä¸ºäº†è¿åˆviteçš„ESMæ¨¡å¼ï¼Œå¦åˆ™ä¼šæŠ¥è­¦å‘Š</p>
<p>2ï¸âƒ£ä¸‹ä¸€è¡Œæ˜¯ä¸ºäº†è¿åˆnestï¼Œæ–¹ä¾¿å®ƒæ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./index.ts"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<h5 data-id="heading-16">2.3åœ¨webå’Œserverä¸­åº”ç”¨ï¼ˆé‡ç‚¹ï¼‰</h5>
<p>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤è¿›è¡Œ<strong>æœ¬åœ°åŒ…</strong>å®‰è£…ï¼Œè®°å¾—åŠ @workspaceè¡¨ç¤ºå®‰è£…æœ¬åœ°æ¨¡å—å¦åˆ™ä¼šä»npmä¸Šé¢ä¸‹è½½</p>
<pre><code class="hljs language-ruby" lang="ruby">pnpm --filter <span class="hljs-variable">@en</span>/web add <span class="hljs-variable">@en</span>/config<span class="hljs-variable">@workspace</span><span class="hljs-symbol">:*</span>
pnpm --filter <span class="hljs-variable">@en</span>/server add <span class="hljs-variable">@en</span>/config<span class="hljs-variable">@workspace</span><span class="hljs-symbol">:*</span>
</code></pre>
<p>æ³¨æ„âš ï¸ï¼šmacéœ€è¦ä½¿ç”¨åæ–œæ è½¬è¯‘ï¼Œå¦åˆ™ä¼šæŠŠ*çœ‹ä½œé€šé…ç¬¦ï¼Œå³åœ¨ã€*å‰åŠ \</p>
<p>ç„¶åç›´æ¥importå³å¯ä½¿ç”¨</p>
<p>vite.config.ts:</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { fileURLToPath, <span class="hljs-variable constant_">URL</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:url"</span>;

<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"vite"</span>;
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">"@vitejs/plugin-vue"</span>;
<span class="hljs-keyword">import</span> vueDevTools <span class="hljs-keyword">from</span> <span class="hljs-string">"vite-plugin-vue-devtools"</span>;
â• <span class="hljs-keyword">import</span> { config } <span class="hljs-keyword">from</span> <span class="hljs-string">"@en/config"</span>;

<span class="hljs-comment">// https://vite.dev/config/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  â•<span class="hljs-attr">server</span>: {
    <span class="hljs-attr">port</span>: config.<span class="hljs-property">ports</span>.<span class="hljs-property">web</span>,
  },
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>(), <span class="hljs-title function_">vueDevTools</span>()],
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">"@"</span>: <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">"./src"</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>)),
    },
  },
});
</code></pre>
<p>ä¸¤ä¸ªmain.ts:</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> { config } from <span class="hljs-string">'@en/config'</span>;
await app.<span class="hljs-built_in">listen</span>(config.ports.server);
</code></pre>
<h4 data-id="heading-17">3.é…ç½®å‘½ä»¤åœ¨æ ¹ç›®å½•å¯åŠ¨é¡¹ç›®ï¼ˆé‡ç‚¹ï¼‰</h4>
<p>å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨æ ¹ç›®å½•å¯åŠ¨é¡¹ç›®è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>ç­”ï¼šä½¿ç”¨--filterï¼Œå¦‚ï¼špnpm --filter @en/web dev</p>
<p>ä½†å³ä¾¿è¿™æ ·ä¹Ÿè¦åœ¨æ ¹ç›®å½•å¯åŠ¨ä¸‰æ¬¡ï¼Œå¤ªéº»çƒ¦äº†</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°è¯•é…ç½®ä¸€ä¸ªè„šæœ¬ï¼Œä½¿å¾—ä¸€ä¸ªå‘½ä»¤å¯åŠ¨æ‰€æœ‰é¡¹ç›®</p>
<h5 data-id="heading-18">3.1å®‰è£…concurrently</h5>
<pre><code class="hljs">pnpm install concurrently -w
</code></pre>
<h5 data-id="heading-19">3.2é…ç½®æ ¹ç›®å½•package.jsonï¼š</h5>
<p>æ³¨æ„aiè¿™ä¸€è¡Œæ˜¯ç›´æ¥åœ¨åé¢åŠ ä¸€ä¸ªaiï¼Œç›¸å½“äºnest start --watch ai å‘Šè¯‰nestå¯åŠ¨aiåº”ç”¨</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"web"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm --filter @en/web dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"server"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm --filter @en/server start:dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ai"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm --filter @en/server start:dev ai"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"all"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"concurrently 'pnpm run web' 'pnpm run server' 'pnpm run ai'"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"concurrently"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^9.2.1"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬åªè¦è¿è¡Œpnpm run allå°±å¯ä»¥åŒæ—¶å¯åŠ¨æ‰€æœ‰é¡¹ç›®äº†ï¼</p>
<p>çŸ¥è¯†ç‚¹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-number">1.</span>pnpm i concurrently -wçš„â€œ-wâ€çš„ä½œç”¨ï¼š
åœ¨æ ¹ç›®å½•ä¸­å®‰è£…ï¼Œå…±äº«ä½¿ç”¨ï¼Œåç»­è¦å®‰è£…çš„dayjs,md5ä¹Ÿè¦åŠ <span class="hljs-string">"-w"</span>å› ä¸ºå‰åç«¯éƒ½è¦ç”¨
æ‰€ä»¥å®‰è£…å‰åç«¯å…±äº«çš„ä¾èµ–ï¼Œè®°å¾—åŠ -w
</code></pre>
<h2 data-id="heading-20">ä¸‰ã€é…ç½®æ•°æ®åº“</h2>
<p>è¿™é‡Œå…ˆè®²è§£prismaçš„å‰ç½®çŸ¥è¯†</p>
<p>éœ€è¦ä¿è¯æå‰å®‰è£…è¿‡ä¸€ä¸ªæ•°æ®åº“ï¼Œæ–‡ç« ä»¥postgreSQLä¸ºä¾‹</p>
<h4 data-id="heading-21">1.åˆå§‹åŒ–</h4>
<h5 data-id="heading-22">1.1å®‰è£…cliå’Œå®¢æˆ·ç«¯å’Œè¯»å–ç¯å¢ƒå˜é‡çš„åŒ…</h5>
<pre><code class="hljs language-css" lang="css">pnpm <span class="hljs-selector-tag">i</span> prisma <span class="hljs-keyword">@prisma</span>/client dotenv
</code></pre>
<h5 data-id="heading-23">1.2åˆå§‹åŒ–</h5>
<pre><code class="hljs language-csharp" lang="csharp">npx prisma <span class="hljs-keyword">init</span>
</code></pre>
<h5 data-id="heading-24">1.3é…ç½®ç¯å¢ƒå˜é‡</h5>
<p>.envï¼š</p>
<p>æ•°æ®åº“://è´¦å·:å¯†ç @ä¸»æœºï¼šç«¯å£/æ•°æ®åº“</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">DATABASE_URL</span>=<span class="hljs-string">"postgresql://postgres:123456@localhost:5432/test"</span>
</code></pre>
<h4 data-id="heading-25">2.ç¼–å†™schema.prisma</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">//ä¸€å¯¹å¤šï¼Œä¸€ä¸ªç”¨æˆ·å¯ä»¥å‘å¸ƒå¤šç¯‡æ–‡ç« </span>
model User{
  id <span class="hljs-built_in">String</span> <span class="hljs-meta">@id</span> <span class="hljs-meta">@default</span>(cuid())
  email <span class="hljs-built_in">String</span> <span class="hljs-meta">@unique</span> <span class="hljs-comment">//ä¸€ä¸ªäººä¸èƒ½ç”¨é‚®ç®±åˆ›å»ºä¸¤ä¸ªè´¦å·</span>
  password <span class="hljs-built_in">String</span>
  posts Post[] <span class="hljs-comment">//å‘å¸ƒæ–‡ç« ï¼Œéœ€è¦å¤–é”®å…³è”</span>
  createAt <span class="hljs-built_in">DateTime</span> <span class="hljs-meta">@default</span>(now())
  updateAt <span class="hljs-built_in">DateTime</span> <span class="hljs-meta">@updatedAt</span> <span class="hljs-comment">//è‡ªåŠ¨æ›´æ–° æ›´æ–°çš„æ—¶é—´</span>
}

model Post{
  id <span class="hljs-built_in">String</span> <span class="hljs-meta">@id</span> <span class="hljs-meta">@default</span>(cuid())
  title <span class="hljs-built_in">String</span>
  content <span class="hljs-built_in">String</span>
  userId <span class="hljs-built_in">String</span> <span class="hljs-comment">//å¤–é”®</span>
  user User <span class="hljs-meta">@relation</span>(fields: [userId],references: [id])<span class="hljs-comment">//å¤–é”®å…³è”ï¼Œfieldä¸­çš„æ˜¯å¤–é”®ï¼Œreferencesä¸­æ˜¯å…³è”çš„userçš„ä¸»é”®</span>
  createAt <span class="hljs-built_in">DateTime</span> <span class="hljs-meta">@default</span>(now())
  updateAt <span class="hljs-built_in">DateTime</span> <span class="hljs-meta">@updatedAt</span>
}
</code></pre>
<p>å…³è”ï¼šæ–‡ç« è¡¨çš„å¤–é”®éœ€è¦ç®¡ç†ç”¨æˆ·è¡¨çš„ä¸»é”®</p>
<h4 data-id="heading-26">3.æ‰§è¡Œschema.prisma</h4>
<h5 data-id="heading-27">3.1æ‰§è¡Œè¿ç§»å‘½ä»¤</h5>
<p>åˆ›å»ºè¿ç§»æ–‡ä»¶ï¼Œè‡ªåŠ¨æ‰§è¡Œè¿ç§»æ–‡ä»¶çš„sqlè¯­å¥</p>
<pre><code class="hljs language-csharp" lang="csharp">npx prisma migrate dev --name <span class="hljs-keyword">init</span>
</code></pre>
<h4 data-id="heading-28">4.ç¼–å†™åº”ç”¨é€»è¾‘</h4>
<h5 data-id="heading-29">4.1ç”Ÿæˆå®¢æˆ·ç«¯æ–‡ä»¶</h5>
<pre><code class="hljs">npx prisma generate
</code></pre>
<h5 data-id="heading-30">4.2å®‰è£…é€‚é…å™¨</h5>
<p>å®‰è£…</p>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> <span class="hljs-keyword">@prisma</span>/adapter-pg
</code></pre>
<p>å¼•å…¥é€‚é…å™¨</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//index.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PrismaClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./generated/prisma/client.ts"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PrismaPg</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@prisma/adapter-pg"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"dotenv/config"</span>;
<span class="hljs-keyword">const</span> connectionString = <span class="hljs-string">`<span class="hljs-subst">${process.env.DATABASE_URL}</span>`</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(connectionString);
</code></pre>
<p>æŠ¥é”™å¯èƒ½æ˜¯å› ä¸ºæ²¡æœ‰å®‰è£…nodeçš„ç±»å‹å£°æ˜æ–‡ä»¶</p>
<p>å®‰è£…ï¼š</p>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> -D <span class="hljs-keyword">@types</span>/node
</code></pre>
<h5 data-id="heading-31">4.3å®ä¾‹åŒ–+è¿æ¥æ•°æ®åº“æµ‹è¯•</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PrismaClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./generated/prisma/client.ts"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PrismaPg</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@prisma/adapter-pg"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"dotenv/config"</span>;
<span class="hljs-keyword">const</span> connectionString = <span class="hljs-string">`<span class="hljs-subst">${process.env.DATABASE_URL}</span>`</span>;
<span class="hljs-keyword">const</span> adapter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrismaPg</span>({ connectionString });
<span class="hljs-keyword">const</span> prisma = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrismaClient</span>({ adapter });

<span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">await</span> prisma.$connect();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ•°æ®åº“è¿æ¥æˆåŠŸ"</span>);
};

<span class="hljs-title function_">main</span>()
</code></pre>
<h5 data-id="heading-32">4.4å¢åˆ æ”¹æŸ¥æ“ä½œ</h5>
<p>è¿æ¥æˆåŠŸä¹‹åå°±å¯ä»¥è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œäº†</p>
<h6 data-id="heading-33">4.4.1æ–°å¢</h6>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">await</span> prisma.$connect();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ•°æ®åº“è¿æ¥æˆåŠŸ"</span>);
  <span class="hljs-comment">//å¢</span>
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> prisma.<span class="hljs-property">user</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">data</span>: {
      <span class="hljs-attr">email</span>: <span class="hljs-string">"1@test.com"</span>,
      <span class="hljs-attr">password</span>: <span class="hljs-string">"123456"</span>,
      <span class="hljs-attr">posts</span>: {
        <span class="hljs-attr">create</span>: {
          <span class="hljs-attr">title</span>: <span class="hljs-string">"ä¸€"</span>,
          <span class="hljs-attr">content</span>: <span class="hljs-string">"1"</span>,
        },
      },
    },
  });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ–°å¢userè¡¨====ã€‹"</span>, user);
};

<span class="hljs-title function_">main</span>();
</code></pre>
<h6 data-id="heading-34">4.4.2æŸ¥è¯¢</h6>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">await</span> prisma.$connect();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ•°æ®åº“è¿æ¥æˆåŠŸ"</span>);
  <span class="hljs-comment">//æŸ¥</span>
  <span class="hljs-comment">//æŸ¥è¯¢å…¨éƒ¨</span>
  <span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> prisma.<span class="hljs-property">user</span>.<span class="hljs-title function_">findMany</span>();
  <span class="hljs-comment">//æŸ¥è¯¢å…³è”è¡¨</span>
  <span class="hljs-keyword">const</span> userpost = <span class="hljs-keyword">await</span> prisma.<span class="hljs-property">user</span>.<span class="hljs-title function_">findMany</span>({
    <span class="hljs-attr">include</span>: {
      <span class="hljs-attr">posts</span>: <span class="hljs-literal">true</span>,
    },
  });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(users);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userpost);
};

<span class="hljs-title function_">main</span>();
</code></pre>
<h6 data-id="heading-35">4.4.3æ›´æ–°</h6>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">await</span> prisma.$connect();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ•°æ®åº“è¿æ¥æˆåŠŸ"</span>);
  <span class="hljs-comment">//æ›´æ–°</span>
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> prisma.<span class="hljs-property">user</span>.<span class="hljs-title function_">update</span>({
    <span class="hljs-attr">where</span>: {
      <span class="hljs-attr">id</span>: <span class="hljs-string">"cmkjfrjfz0000el2n0rg013ru"</span>,
    },
    <span class="hljs-attr">data</span>: {
      <span class="hljs-attr">password</span>: <span class="hljs-string">"123"</span>,
    },
  });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user);
};

<span class="hljs-title function_">main</span>();
</code></pre>
<h6 data-id="heading-36">4.4.4åˆ é™¤</h6>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">await</span> prisma.$connect();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ•°æ®åº“è¿æ¥æˆåŠŸ"</span>);
  <span class="hljs-comment">//åˆ é™¤</span>
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> prisma.<span class="hljs-property">user</span>.<span class="hljs-title function_">delete</span>({
    <span class="hljs-attr">where</span>: {
      <span class="hljs-attr">id</span>: <span class="hljs-string">"cmkjfrjfz0000el2n0rg013ru"</span>,
    },
  });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user);
};

<span class="hljs-title function_">main</span>();
</code></pre>
<p>å‘ç°æŠ¥é”™äº†</p>
<p>åŸå› ï¼šæœ‰å¤–é”®å…³è”ï¼Œå¿…é¡»æŠŠpostè¡¨åˆ é™¤æ‰è¡Œ</p>
<p>è§£å†³ï¼šåœ¨schema.prismaæ–‡ä»¶ä¸­æŠŠåˆ é™¤å’Œæ›´æ–°å˜æˆçº§è”</p>
<pre><code class="hljs language-scss" lang="scss">user User <span class="hljs-keyword">@relation</span>(<span class="hljs-attribute">fields</span>: [userId],<span class="hljs-attribute">references</span>: [id],<span class="hljs-attribute">onDelete</span>: Cascade,<span class="hljs-attribute">onUpdate</span>: Cascade)
</code></pre>
<p>ç„¶åå¿…é¡»é‡æ–°æ‰§è¡Œè¿ç§»+ç”Ÿæˆå®¢æˆ·ç«¯æ–‡ä»¶</p>
<pre><code class="hljs language-css" lang="css">npx prisma migrate dev <span class="hljs-attr">--name</span> fix
npx prisma generate
</code></pre>
<p>ç°åœ¨å°±å¯ä»¥æ­£å¸¸åˆ é™¤äº†</p>
<h6 data-id="heading-37">4.4.5æŸ¥è¯¢æ‰©å……</h6>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">await</span> prisma.$connect();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ•°æ®åº“è¿æ¥æˆåŠŸ"</span>);
  <span class="hljs-comment">//æŸ¥è¯¢</span>
  <span class="hljs-comment">//æŸ¥è¯¢æ¡ä»¶</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">where</span>:<span class="hljs-title class_">UserWhereInput</span> = {
    <span class="hljs-attr">email</span>:{
        <span class="hljs-attr">contains</span>:<span class="hljs-string">"test"</span>
    }
  }
  <span class="hljs-keyword">const</span> count = prisma.<span class="hljs-property">user</span>.<span class="hljs-title function_">count</span>({
    <span class="hljs-attr">where</span>:where
  })
  <span class="hljs-keyword">const</span> users = prisma.<span class="hljs-property">user</span>.<span class="hljs-title function_">findMany</span>({
    <span class="hljs-attr">where</span>:where
  })
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count,users)
};

<span class="hljs-title function_">main</span>();
</code></pre>
<p>a.æ’åºï¼š</p>
<p>å¤šä¸ªæ¡ä»¶éœ€è¦å˜æˆæ•°ç»„</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> users = prisma.<span class="hljs-property">user</span>.<span class="hljs-title function_">findMany</span>({
    <span class="hljs-attr">where</span>: where,
    <span class="hljs-attr">orderBy</span>: {
      <span class="hljs-attr">email</span>: <span class="hljs-string">"desc"</span>,
    },
  });
</code></pre>
<p>b.åˆ†é¡µï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> page = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">const</span> pageSize = <span class="hljs-number">10</span>;
  <span class="hljs-keyword">const</span> users = prisma.<span class="hljs-property">user</span>.<span class="hljs-title function_">findMany</span>({
    <span class="hljs-attr">skip</span>: (page - <span class="hljs-number">1</span>) * pageSize,<span class="hljs-comment">//è·³è¿‡å¤šå°‘æ•°æ®</span>
    <span class="hljs-attr">take</span>:pageSize<span class="hljs-comment">//æ‹¿å¤šå°‘æ•°æ®</span>
  });
</code></pre>
<p>c.äº‹åŠ¡ï¼š</p>
<p>æ¯”å¦‚A-&gt;Bè½¬è´¦</p>
<p>Aæ‰£é’±å¿…é¡»ä¸BåŠ é’±ç»‘å®šï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥</p>
<p>æ‰€ä»¥éœ€è¦ç»‘å®šåˆ°ä¸€å—ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">prisma.$transaction(<span class="hljs-keyword">async</span> (tx)=&gt;{})
</code></pre>
<h2 data-id="heading-38">æ£€æµ‹ï¼š</h2>
<p>è¯»å®Œæœ¬æ–‡ä½ èƒ½å¤Ÿå›ç­”ä»¥ä¸‹é—®é¢˜å—ï¼š</p>
<p>1.pnpm-workspace.yamlçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>2.å¦‚ä½•åœ¨æ ¹ç›®å½•ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œå°†æ–‡ä»¶åˆ›å»ºåˆ°æŒ‡å®šçš„é¡¹ç›®ä¸‹é¢ï¼Ÿ</p>
<p>3.å¦‚ä½•å®ç°åœ¨æ ¹ç›®å½•ä¸€ä¸ªå‘½ä»¤åŒæ—¶å¯åŠ¨å¤šä¸ªé¡¹ç›®ï¼Ÿ</p>
<p>4.nest g app ai çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>5.å¦‚ä½•é…ç½®åç«¯å…±äº«æ¨¡å—ï¼Ÿ</p>
<p>6.å¦‚ä½•é…ç½®å‰åç«¯å…±äº«æ¨¡å—ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[FFmpegå¼€å‘ç¬”è®°ï¼ˆä¸€ç™¾ï¼‰å›½äº§çš„Androidå¼€æºè§†é¢‘å‹ç¼©å·¥å…·VideoSlimmer]]></title>    <link>https://juejin.cn/post/7595894884958142515</link>    <guid>https://juejin.cn/post/7595894884958142515</guid>    <pubDate>2026-01-18T03:12:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595894884958142515" data-draft-id="7588149079415881782" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="FFmpegå¼€å‘ç¬”è®°ï¼ˆä¸€ç™¾ï¼‰å›½äº§çš„Androidå¼€æºè§†é¢‘å‹ç¼©å·¥å…·VideoSlimmer"/> <meta itemprop="keywords" content="FFmpeg,éŸ³è§†é¢‘å¼€å‘,Android"/> <meta itemprop="datePublished" content="2026-01-18T03:12:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aqi00"/> <meta itemprop="url" content="https://juejin.cn/user/3793793900098220"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            FFmpegå¼€å‘ç¬”è®°ï¼ˆä¸€ç™¾ï¼‰å›½äº§çš„Androidå¼€æºè§†é¢‘å‹ç¼©å·¥å…·VideoSlimmer
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3793793900098220/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aqi00
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T03:12:45.000Z" title="Sun Jan 18 2026 03:12:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹ã€ŠFFmpegå¼€å‘å®æˆ˜ï¼šä»é›¶åŸºç¡€åˆ°çŸ­è§†é¢‘ä¸Šçº¿ã€‹ä¸€ä¹¦çš„â€œç¬¬ 12 ç«  Â FFmpegçš„ç§»åŠ¨å¼€å‘â€ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨FFmpegåœ¨æ‰‹æœºä¸Šå‰ªè¾‘è§†é¢‘ï¼Œæ–¹ä¾¿å¼€å‘è€…æ›´å¥½åœ°å¼€å‘ç±»ä¼¼å‰ªæ˜ é‚£æ ·çš„è§†é¢‘å‰ªè¾‘è½¯ä»¶ã€‚é‚£ä¹ˆåœ¨Androidç³»ç»Ÿä¸Šè¿˜æœ‰ä¸€æ¬¾å›½äº§çš„å¼€æºè§†é¢‘å‹ç¼©å·¥å…·VideoSlimmerï¼Œé€šè¿‡è¯¥æ¡†æ¶å¯ä»¥æ›´æ–¹ä¾¿åœ°å‹ç¼©è§†é¢‘å¤§å°ï¼Œä¸‹é¢å°±æ¥ä»‹ç»å¦‚ä½•åœ¨Appå·¥ç¨‹ä¸­ä½¿ç”¨VideoSlimmerã€‚</p>
<p>VideoSlimmeræ˜¯ä¸€æ¬¾ä¸“ä¸ºAndroidå¹³å°è®¾è®¡çš„å¼€æºè§†é¢‘å‹ç¼©å·¥å…·ï¼Œå®ƒé€šè¿‡Mediacodecå®ç°è§†é¢‘å‹ç¼©åŠŸèƒ½ï¼Œå¹¶å…·æœ‰è¾ƒé«˜çš„å‹ç¼©æ€§èƒ½ã€‚VideoSlimmeræ”¯æŒå‹ç¼©çš„è§†é¢‘æ ¼å¼åŒ…æ‹¬mp4å’Œ3gpã€‚<br/>
VideoSlimmerçš„æºç æ‰˜ç®¡åœ°å€ä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzolad%2FVideoSlimmer" target="_blank" title="https://github.com/zolad/VideoSlimmer" ref="nofollow noopener noreferrer">github.com/zolad/Videoâ€¦</a> ï¼ˆæ˜Ÿæ˜Ÿæ•°0.2kï¼‰ï¼Œæœ€è¿‘ç‰ˆæœ¬æ›´æ–°äº2018å¹´10æœˆï¼Œè¯¥ç‰ˆæœ¬çš„å‹ç¼©åŒ…ä¸‹è½½åœ°å€ä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzolad%2FVideoSlimmer%2Farchive%2Frefs%2Fheads%2Fmaster.zip" target="_blank" title="https://github.com/zolad/VideoSlimmer/archive/refs/heads/master.zip" ref="nofollow noopener noreferrer">github.com/zolad/Videoâ€¦</a> ã€‚<br/>
VideoSlimmeræä¾›äº†ä¸¤ç§é›†æˆæ–¹å¼ï¼šå¼•ç”¨åœ¨çº¿åº“ã€ç›´æ¥å¯¼å…¥æºç ï¼Œåˆ†åˆ«è¯´æ˜å¦‚ä¸‹ï¼š</p>
<h2 data-id="heading-0">ä¸€ã€å¼•ç”¨VideoSlimmeråœ¨çº¿åº“</h2>
<p>Androidå·¥ç¨‹å¼•ç”¨VideoSlimmeråœ¨çº¿åº“æ—¶ï¼Œéœ€è¦ä¿®æ”¹ä»¥ä¸‹ä¸¤ä¸ªé…ç½®ï¼š<br/>
1ã€æ‰“å¼€æ¨¡å—çº§åˆ«çš„build.gradleï¼Œç»™dependenciesèŠ‚ç‚¹è¡¥å……ä¸‹é¢å‡ è¡Œé…ç½®ï¼Œè¡¨ç¤ºå¼•å…¥1.0.0ç‰ˆæœ¬çš„VideoSlimmeråº“ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">implementation <span class="hljs-string">'com.zolad:videoslimmer:1.0.0'</span>
</code></pre>
<p>2ã€æ‰“å¼€Appæ¨¡å—çš„src/main/AndroidManifest.xmlï¼Œç»™manifestèŠ‚ç‚¹è¡¥å……ä¸‹é¢ä¸¤è¡Œæƒé™é…ç½®ï¼Œè¡¨ç¤ºå£°æ˜è¯»å†™å­˜å‚¨ç©ºé—´ä¸¤ä¸ªæƒé™ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;uses-permission android:<span class="hljs-attr">name</span>=<span class="hljs-string">"android.permission.READ_EXTERNAL_STORAGE"</span> /&gt;
&lt;uses-permission android:<span class="hljs-attr">name</span>=<span class="hljs-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;
</code></pre>
<h2 data-id="heading-1">äºŒã€ç›´æ¥å¯¼å…¥VideoSlimmeræºç </h2>
<p>ç”±äºVideoSlimmerçš„å‘å¸ƒæ—¶é—´è¾ƒæ—©ï¼Œä¸ºäº†è®©å°æµ·è±šç‰ˆæœ¬çš„Android Studio Dolphinèƒ½å¤Ÿæ‰“å¼€å®ƒçš„èŒƒä¾‹å·¥ç¨‹ï¼Œéœ€è¦å¯¹VideoSlimmerçš„Appå·¥ç¨‹ä½œå¦‚ä¸‹ä¿®æ”¹ï¼š</p>
<h3 data-id="heading-2">1ã€å‡çº§Gradleç‰ˆæœ¬</h3>
<p>æ‰“å¼€VideoSlimmerå·¥ç¨‹çš„gradle/wrapper/gradle-wrapper.propertiesï¼ŒæŠŠä¸‹é¢è¿™è¡Œé…ç½®</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">distributionUrl</span>=https://services.gradle.org/distributions/gradle-<span class="hljs-number">4.4</span>-all.zip
</code></pre>
<p>æ”¹æˆå¦‚ä¸‹è¿™è¡Œé…ç½®ï¼Œè¡¨ç¤ºæŠŠGradleç‰ˆæœ¬ä»4.4å‡çº§åˆ°5.4.1ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">distributionUrl</span>=https://services.gradle.org/distributions/gradle-<span class="hljs-number">5.4</span>.<span class="hljs-number">1</span>-bin.zip
</code></pre>
<h3 data-id="heading-3">2ã€æ›´æ–°å·¥å…·åº“çš„ä»“åº“ä½ç½®</h3>
<p>æ‰“å¼€VideoSlimmerå·¥ç¨‹çš„build.gradleï¼ŒæŠŠé‡Œé¢çš„ä¸¤å¤„â€œjcenter()â€éƒ½æ”¹ä¸ºä»¥ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä»¥ä¸‹å››è¡Œæ·»åŠ é˜¿é‡Œäº‘çš„ä»“åº“åœ°å€ï¼Œæ–¹ä¾¿å›½å†…å¼€å‘è€…ä¸‹è½½ç›¸å…³æ’ä»¶</span>
maven { url <span class="hljs-symbol">'https</span>:<span class="hljs-comment">//maven.aliyun.com/repository/jcenter' }</span>
maven { url <span class="hljs-symbol">'https</span>:<span class="hljs-comment">//maven.aliyun.com/repository/google'}</span>
maven { url <span class="hljs-symbol">'https</span>:<span class="hljs-comment">//maven.aliyun.com/repository/gradle-plugin'}</span>
maven { url <span class="hljs-symbol">'https</span>:<span class="hljs-comment">//maven.aliyun.com/repository/public'}</span>
<span class="hljs-title function_ invoke__">google</span>()
<span class="hljs-title function_ invoke__">mavenCentral</span>()
</code></pre>
<p>å› ä¸ºjcenterä»“åº“å·²ç»åºŸå¼ƒï¼Œæ‰€ä»¥æ”¹æˆå¼•ç”¨å›½å†…çš„ä»“åº“ä½ç½®ã€‚<br/>
æ­¤å¤–ï¼Œè¿˜è¦æŠŠä¸‹é¢ä¸¤è¡Œé…ç½®</p>
<pre><code class="hljs language-arduino" lang="arduino">classpath <span class="hljs-string">'com.android.tools.build:gradle:3.1.2'</span>
</code></pre>
<p>æ”¹æˆä¸‹é¢è¿™è¡Œé…ç½®ï¼Œè¡¨ç¤ºæŠŠGradleæ’ä»¶ç‰ˆæœ¬å‡çº§åˆ°3.2.0ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">classpath <span class="hljs-string">'com.android.tools.build:gradle:3.2.0'</span>
</code></pre>
<h3 data-id="heading-4">3ã€è°ƒæ•´æ¨¡å—çš„build.gradle</h3>
<p>æ‰“å¼€VideoSlimmerå·¥ç¨‹çš„app/build.gradleï¼Œæ‰¾åˆ°ä¸‹é¢è¿™è¡Œé…ç½®ï¼š</p>
<pre><code class="hljs">compileSdkVersion 28
</code></pre>
<p>åœ¨ä¸Šé¢è¿™è¡Œä¸‹æ–¹è¡¥å……ä¸‹é¢è¿™è¡Œé…ç½®ï¼Œè¡¨ç¤ºæŒ‡å®šç¼–è¯‘å·¥å…·çš„ç‰ˆæœ¬å·ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">buildToolsVersion <span class="hljs-string">"28.0.3"</span>
</code></pre>
<p>è¿˜è¦æŠŠä¸‹é¢è¿™è¡Œé…ç½®</p>
<pre><code class="hljs language-arduino" lang="arduino">implementation <span class="hljs-string">'com.android.support:appcompat-v7:28.0.0-rc01'</span>
</code></pre>
<p>æ”¹æˆä¸‹é¢è¿™è¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">implementation <span class="hljs-string">'com.android.support:appcompat-v7:28.0.0'</span>
</code></pre>
<p>æ”¹å®Œbuild.gradleï¼Œè®°å¾—å•å‡»SyncåŒæ­¥Appå·¥ç¨‹é…ç½®ã€‚</p>
<p>å®Œæˆä»¥ä¸Šä¸‰å¤„ä¿®æ”¹åï¼Œé‡æ–°ç¼–è¯‘Appå®‰è£…åˆ°çœŸæœºä¸Šï¼ŒæŒ‘é€‰ä¸€ä¸ªè§†é¢‘åè¿›å…¥è§†é¢‘å‹ç¼©ç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b64b3f035c474ad7873f0c927a0b471b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXFpMDA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769310764&amp;x-signature=XGncmNRBoMMTVJtyIsU0Z4%2BMXCI%3D" alt="slimmer1" loading="lazy"/></p>
<p>å¯è§é€‰ä¸­è§†é¢‘æ­£åœ¨å‹ç¼©å½“ä¸­ã€‚ç¨ç­‰ç‰‡åˆ»è§†é¢‘å‹ç¼©å®Œæˆï¼Œç•Œé¢ä¸‹æ–¹å±•ç¤ºç»“æœè§†é¢‘çš„ä¿å­˜è·¯å¾„ä»¥åŠå‹ç¼©è¿›åº¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b5c97d8ab10461d875191d51b8f130c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXFpMDA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769310764&amp;x-signature=ztLAy6uZmfBTfnQGiY89Cp2xxyI%3D" alt="slimmer2" loading="lazy"/></p>
<p>å‘ç°å‹ç¼©å‰çš„è§†é¢‘å¤§å°ä¸º85MBï¼Œå‹ç¼©åçš„è§†é¢‘å¤§å°ä¸º12MBï¼Œä»…ä¸ºåŸè§†é¢‘çš„ä¸ƒåˆ†ä¹‹ä¸€å·¦å³ï¼Œå¯è§å‹ç¼©æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ã€‚å‹ç¼©ä¹‹åçš„ç»“æœè§†é¢‘æ”¾åœ¨å…¬å…±å­˜å‚¨ç©ºé—´çš„Moviesç›®å½•ï¼Œå®Œæ•´è·¯å¾„ä¸ºâ€œæˆ‘çš„æ‰‹æœº/Movies/VIDEOSLIMMER_yyyymmdd_hhmiss.mp4â€ï¼Œå…¶ä¸­yymmddä¸ºå¹´æœˆæ—¥ï¼Œhhmissä¸ºæ—¶åˆ†ç§’ã€‚</p>
<p>æ›´å¤šè¯¦ç»†çš„FFmpegå¼€å‘çŸ¥è¯†å‚è§<a href="https://link.juejin.cn?target=https%3A%2F%2Fitem.jd.com%2F14020415.html" title="https://item.jd.com/14020415.html" target="_blank" ref="nofollow noopener noreferrer">ã€ŠFFmpegå¼€å‘å®æˆ˜ï¼šä»é›¶åŸºç¡€åˆ°çŸ­è§†é¢‘ä¸Šçº¿ã€‹</a>ä¸€ä¹¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LSPosed é¡¹ç›®ç¼–è¯‘é—®é¢˜è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7596186565270011919</link>    <guid>https://juejin.cn/post/7596186565270011919</guid>    <pubDate>2026-01-18T10:47:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596186565270011919" data-draft-id="7595974133098070050" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LSPosed é¡¹ç›®ç¼–è¯‘é—®é¢˜è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-18T10:47:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­äº‘ä¹‹é£"/> <meta itemprop="url" content="https://juejin.cn/user/3131012704123310"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LSPosed é¡¹ç›®ç¼–è¯‘é—®é¢˜è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3131012704123310/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­äº‘ä¹‹é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T10:47:55.000Z" title="Sun Jan 18 2026 10:47:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">LSPosed é¡¹ç›®ç¼–è¯‘é—®é¢˜è§£å†³æ–¹æ¡ˆ</h2>
<p>æœ¬æ–‡æ¡£è®°å½•äº†ç¼–è¯‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FJingMatrix" target="_blank" title="https://github.com/JingMatrix" ref="nofollow noopener noreferrer">JingMatrix</a> LSPosed é¡¹ç›®æ—¶é‡åˆ°çš„å¸¸è§é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">ç›®å½•</h3>
<ol>
<li>
<p><a href="#1-apache-%E6%A8%A1%E5%9D%97%E7%BC%96%E8%AF%91%E5%A4%B1%E8%B4%A5---classutils-%E5%BC%95%E7%94%A8%E9%97%AE%E9%A2%98" title="#1-apache-%E6%A8%A1%E5%9D%97%E7%BC%96%E8%AF%91%E5%A4%B1%E8%B4%A5---classutils-%E5%BC%95%E7%94%A8%E9%97%AE%E9%A2%98">Apache æ¨¡å—ç¼–è¯‘å¤±è´¥ - ClassUtils å¼•ç”¨é—®é¢˜</a></p>
</li>
<li>
<p><a href="#2-mksh-%E8%84%9A%E6%9C%AC%E9%94%99%E8%AF%AF---manager-%E9%A1%B9%E7%9B%AE%E4%B8%8D%E5%AD%98%E5%9C%A8" title="#2-mksh-%E8%84%9A%E6%9C%AC%E9%94%99%E8%AF%AF---manager-%E9%A1%B9%E7%9B%AE%E4%B8%8D%E5%AD%98%E5%9C%A8">mk.sh è„šæœ¬é”™è¯¯ - manager é¡¹ç›®ä¸å­˜åœ¨</a></p>
</li>
<li>
<p><a href="#3-gradle-%E5%86%85%E5%AD%98%E4%B8%8D%E8%B6%B3%E9%94%99%E8%AF%AF" title="#3-gradle-%E5%86%85%E5%AD%98%E4%B8%8D%E8%B6%B3%E9%94%99%E8%AF%AF">Gradle å†…å­˜ä¸è¶³é”™è¯¯</a></p>
</li>
<li>
<p><a href="#4-lint-%E6%A3%80%E6%9F%A5%E9%94%99%E8%AF%AF%E5%AF%BC%E8%87%B4%E7%BC%96%E8%AF%91%E5%A4%B1%E8%B4%A5" title="#4-lint-%E6%A3%80%E6%9F%A5%E9%94%99%E8%AF%AF%E5%AF%BC%E8%87%B4%E7%BC%96%E8%AF%91%E5%A4%B1%E8%B4%A5">Lint æ£€æŸ¥é”™è¯¯å¯¼è‡´ç¼–è¯‘å¤±è´¥</a></p>
</li>
</ol>
<hr/>
<h3 data-id="heading-2">1. Apache æ¨¡å—ç¼–è¯‘å¤±è´¥ - ClassUtils å¼•ç”¨é—®é¢˜</h3>
<h4 data-id="heading-3">é—®é¢˜æè¿°</h4>
<p>ç¼–è¯‘ <code>apache</code> æ¨¡å—æ—¶å‡ºç°é”™è¯¯ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">
&gt; <span class="hljs-title class_">Task</span> <span class="hljs-symbol">:apache</span><span class="hljs-symbol">:compileJava</span> <span class="hljs-variable constant_">FAILED</span>

</code></pre>
<p>é”™è¯¯åŸå› ï¼š<code>SerializationUtilsX.java</code> æ–‡ä»¶ä¸­å¼•ç”¨äº† <code>ClassUtils</code>ï¼Œä½†è¯¥ç±»å·²è¢«é‡å‘½åä¸º <code>ClassUtilsX</code>ã€‚</p>
<h4 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h4>
<h5 data-id="heading-5">1.1 ä¿®å¤ <code>apache/build.gradle.kts</code></h5>
<p>åœ¨ <code>SerializationUtilsX</code> ä»»åŠ¡ä¸­æ·»åŠ  <code>ClassUtils</code> â†’ <code>ClassUtilsX</code> çš„æ›¿æ¢ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
tasks.register&lt;Copy&gt;(<span class="hljs-string">"SerializationUtilsX"</span>) {

from(<span class="hljs-string">"<span class="hljs-variable">$lang3Src</span>/SerializationUtils.java"</span>)

into(localDir)

filter { line: String -&gt;

line.replace(<span class="hljs-string">"SerializationUtils"</span>, <span class="hljs-string">"SerializationUtilsX"</span>)

.replace(<span class="hljs-string">"ClassUtils"</span>, <span class="hljs-string">"ClassUtilsX"</span>) <span class="hljs-comment">// æ·»åŠ è¿™è¡Œ</span>

}

rename(<span class="hljs-string">"(.+).java"</span>, <span class="hljs-string">"$1X.java"</span>)

}

</code></pre>
<h5 data-id="heading-6">1.2 æ’é™¤åŸå§‹æ–‡ä»¶</h5>
<p>åœ¨ <code>build.gradle.kts</code> ä¸­æ’é™¤åŸå§‹çš„ <code>ClassUtils.java</code> å’Œ <code>SerializationUtils.java</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
java {

sourceSets {

main {

java {

srcDirs(<span class="hljs-string">"commons-lang/src/main/java"</span>, <span class="hljs-string">"local"</span>)

exclude(<span class="hljs-string">"**/ClassUtils.java"</span>, <span class="hljs-string">"**/SerializationUtils.java"</span>) <span class="hljs-comment">// æ·»åŠ è¿™è¡Œ</span>

}

}

}

}

</code></pre>
<h5 data-id="heading-7">1.3 æ‰¹é‡æ›¿æ¢æºä»£ç ä¸­çš„ ClassUtils å¼•ç”¨</h5>
<p>éœ€è¦å°†ä»¥ä¸‹æ–‡ä»¶ä¸­çš„ <code>ClassUtils</code> æ›¿æ¢ä¸º <code>ClassUtilsX</code>ï¼š</p>
<ul>
<li>
<p><code>FastDatePrinter.java</code></p>
</li>
<li>
<p><code>TypeUtils.java</code></p>
</li>
<li>
<p><code>MethodUtils.java</code></p>
</li>
<li>
<p><code>MemberUtils.java</code></p>
</li>
<li>
<p><code>ConstructorUtils.java</code></p>
</li>
<li>
<p><code>FieldUtils.java</code></p>
</li>
<li>
<p><code>RecursiveToStringStyle.java</code></p>
</li>
<li>
<p><code>ReflectionToStringBuilder.java</code></p>
</li>
<li>
<p><code>ToStringStyle.java</code></p>
</li>
<li>
<p><code>ReflectionDiffBuilder.java</code></p>
</li>
<li>
<p><code>MultilineRecursiveToStringStyle.java</code></p>
</li>
<li>
<p><code>EqualsBuilder.java</code></p>
</li>
<li>
<p><code>ExceptionUtils.java</code></p>
</li>
<li>
<p><code>Validate.java</code></p>
</li>
<li>
<p><code>SystemProperties.java</code></p>
</li>
<li>
<p><code>ArrayUtils.java</code></p>
</li>
<li>
<p><code>AnnotationUtils.java</code></p>
</li>
</ul>
<p>æ›¿æ¢å†…å®¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p><code>import org.apache.commons.lang3.ClassUtils</code> â†’ <code>import org.apache.commons.lang3.ClassUtilsX</code></p>
</li>
<li>
<p><code>ClassUtils.</code> â†’ <code>ClassUtilsX.</code></p>
</li>
<li>
<p><code>ClassUtils::</code> â†’ <code>ClassUtilsX::</code></p>
</li>
<li>
<p><code>ClassUtils.Interfaces</code> â†’ <code>ClassUtilsX.Interfaces</code></p>
</li>
</ul>
<p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰¹é‡æ›¿æ¢ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># æ›¿æ¢å¯¼å…¥è¯­å¥</span>

find apache/commons-lang/src/main/java -name <span class="hljs-string">"*.java"</span> -<span class="hljs-built_in">exec</span> sed -i <span class="hljs-string">''</span> <span class="hljs-string">'s/import org\.apache\.commons\.lang3\.ClassUtils;/import org.apache.commons.lang3.ClassUtilsX;/g'</span> {} \;

  


<span class="hljs-comment"># æ›¿æ¢æ–¹æ³•è°ƒç”¨</span>

find apache/commons-lang/src/main/java -name <span class="hljs-string">"*.java"</span> -<span class="hljs-built_in">exec</span> sed -i <span class="hljs-string">''</span> <span class="hljs-string">'s/ClassUtils\./ClassUtilsX./g'</span> {} \;

  


<span class="hljs-comment"># æ›¿æ¢æ–¹æ³•å¼•ç”¨</span>

find apache/commons-lang/src/main/java -name <span class="hljs-string">"*.java"</span> -<span class="hljs-built_in">exec</span> sed -i <span class="hljs-string">''</span> <span class="hljs-string">'s/ClassUtils::/ClassUtilsX::/g'</span> {} \;

</code></pre>
<hr/>
<h3 data-id="heading-8">2. mk.sh è„šæœ¬é”™è¯¯ - manager é¡¹ç›®ä¸å­˜åœ¨</h3>
<h4 data-id="heading-9">é—®é¢˜æè¿°</h4>
<p>è¿è¡Œ <code>./mk.sh</code> æ—¶å‡ºç°é”™è¯¯ï¼š</p>
<pre><code class="hljs language-python" lang="python">
Cannot locate tasks that <span class="hljs-keyword">match</span> <span class="hljs-string">':manager:assembleDebug'</span> <span class="hljs-keyword">as</span> project <span class="hljs-string">'manager'</span> <span class="hljs-keyword">not</span> found <span class="hljs-keyword">in</span> root project <span class="hljs-string">'LSPosed'</span>.

</code></pre>
<h4 data-id="heading-10">è§£å†³æ–¹æ¡ˆ</h4>
<p>æ ¹æ® <code>settings.gradle.kts</code>ï¼Œé¡¹ç›®åç§°æ˜¯ <code>app</code> è€Œä¸æ˜¯ <code>manager</code>ã€‚ä¿®æ”¹ <code>mk.sh</code> è„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># ä¿®æ”¹å‰</span>

./gradlew :manager:assembleDebug

  


<span class="hljs-comment"># ä¿®æ”¹å</span>

./gradlew :app:assembleDebug

</code></pre>
<hr/>
<h3 data-id="heading-11">3. Gradle å†…å­˜ä¸è¶³é”™è¯¯</h3>
<h4 data-id="heading-12">é—®é¢˜æè¿°</h4>
<p>ç¼–è¯‘æ—¶å‡ºç°å†…å­˜ä¸è¶³é”™è¯¯ï¼š</p>
<pre><code class="hljs language-python" lang="python">
ERROR: R8: java.lang.OutOfMemoryError: Java heap space

The currently configured <span class="hljs-built_in">max</span> heap space <span class="hljs-keyword">is</span> <span class="hljs-string">'512 MiB'</span> <span class="hljs-keyword">and</span> the configured <span class="hljs-built_in">max</span> metaspace <span class="hljs-keyword">is</span> <span class="hljs-string">'384 MiB'</span>.

</code></pre>
<h4 data-id="heading-13">è§£å†³æ–¹æ¡ˆ</h4>
<p>ä¿®æ”¹ <code>gradle.properties</code> æ–‡ä»¶ï¼Œå¢åŠ å†…å­˜é…ç½®ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">
org.gradle.jvmargs=-Xmx4096m -XX:MaxMetaspaceSize=1024m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8

</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>
<p><code>-Xmx4096m</code>: æœ€å¤§å †å†…å­˜ 4GB</p>
</li>
<li>
<p><code>-XX:MaxMetaspaceSize=1024m</code>: æœ€å¤§ Metaspace 1GB</p>
</li>
<li>
<p><code>-XX:+HeapDumpOnOutOfMemoryError</code>: OOM æ—¶ç”Ÿæˆå †è½¬å‚¨æ–‡ä»¶</p>
</li>
<li>
<p><code>-Dfile.encoding=UTF-8</code>: æ–‡ä»¶ç¼–ç  UTF-8</p>
</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šå¦‚æœç³»ç»Ÿå†…å­˜è¾ƒå°ï¼ˆ&lt; 8GBï¼‰ï¼Œå¯ä»¥è°ƒæ•´ä¸ºï¼š</p>
<pre><code class="hljs language-properties" lang="properties">
org.gradle.jvmargs=-Xmx2048m -XX:MaxMetaspaceSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8

</code></pre>
<p>ä¿®æ”¹åéœ€è¦åœæ­¢ Gradle daemonï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
./gradlew --stop

</code></pre>
<hr/>
<h3 data-id="heading-14">4. Lint æ£€æŸ¥é”™è¯¯å¯¼è‡´ç¼–è¯‘å¤±è´¥</h3>
<h4 data-id="heading-15">é—®é¢˜æè¿°</h4>
<p>ç¼–è¯‘æ—¶ Lint æ£€æŸ¥å¤±è´¥ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">
&gt; <span class="hljs-title class_">Task</span> <span class="hljs-symbol">:app</span><span class="hljs-symbol">:lintDebug</span> <span class="hljs-variable constant_">FAILED</span>

<span class="hljs-title class_">Lint</span> found <span class="hljs-number">109</span> errors, <span class="hljs-number">56</span> warnings. <span class="hljs-title class_">First</span> <span class="hljs-symbol">failure:</span>

<span class="hljs-title class_">Error</span>: <span class="hljs-title class_">Class</span> referenced <span class="hljs-keyword">in</span> the manifest, androidx.startup.<span class="hljs-title class_">InitializationProvider</span>, was <span class="hljs-keyword">not</span> found <span class="hljs-keyword">in</span> the project <span class="hljs-keyword">or</span> the libraries [<span class="hljs-title class_">MissingClass</span>]

</code></pre>
<h4 data-id="heading-16">è§£å†³æ–¹æ¡ˆ</h4>
<p>ä¿®æ”¹ <code>build.gradle.kts</code> ä¸­çš„ lint é…ç½®ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
lint {

abortOnError = <span class="hljs-literal">false</span> <span class="hljs-comment">// å…è®¸ lint é”™è¯¯ï¼Œä¸ä¸­æ–­æ„å»º</span>

checkReleaseBuilds = <span class="hljs-literal">false</span>

<span class="hljs-comment">// å¿½ç•¥ MissingClass é”™è¯¯ï¼ˆå› ä¸ºæœ‰äº›ç±»å¯èƒ½è¢« tools:node="remove" ç§»é™¤ï¼‰</span>

disable.add(<span class="hljs-string">"MissingClass"</span>)

}

</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š<code>AndroidManifest.xml</code> ä¸­çš„ <code>androidx.startup.InitializationProvider</code> ä½¿ç”¨äº† <code>tools:node="remove"</code>ï¼Œè¡¨ç¤ºè¯¥ provider ä¼šè¢«ç§»é™¤ï¼Œä½† Lint ä»ä¼šæ£€æŸ¥è¯¥ç±»æ˜¯å¦å­˜åœ¨ï¼Œå¯¼è‡´é”™è¯¯ã€‚</p>
<h4 data-id="heading-17">æ›¿ä»£æ–¹æ¡ˆ</h4>
<p>å¦‚æœéœ€è¦æ›´ä¸¥æ ¼åœ°å¤„ç† lint é”™è¯¯ï¼Œå¯ä»¥åˆ›å»º Lint Baselineï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
./gradlew :app:updateLintBaseline

</code></pre>
<p>ç„¶ååœ¨ <code>app/build.gradle.kts</code> ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
android {

lint {

baseline = file(<span class="hljs-string">"lint-baseline.xml"</span>)

}

}

</code></pre>
<hr/>
<h3 data-id="heading-18">ç¼–è¯‘é¡¹ç›®</h3>
<p>ä¿®å¤ä»¥ä¸Šé—®é¢˜åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘é¡¹ç›®ï¼š</p>
<h4 data-id="heading-19">ä½¿ç”¨è„šæœ¬ç¼–è¯‘ï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">
./mk.sh

</code></pre>
<h4 data-id="heading-20">ä½¿ç”¨ Gradle å‘½ä»¤ç¼–è¯‘</h4>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># ç¼–è¯‘æ‰€æœ‰æ¨¡å—ï¼ˆDebug + Releaseï¼‰</span>

./gradlew clean build

  


<span class="hljs-comment"># åªç¼–è¯‘ Debug ç‰ˆæœ¬ï¼ˆæ›´å¿«ï¼‰</span>

./gradlew clean assembleDebug

  


<span class="hljs-comment"># åªç¼–è¯‘ Release ç‰ˆæœ¬</span>

./gradlew clean assembleRelease

  


<span class="hljs-comment"># å¹¶è¡Œç¼–è¯‘ï¼ˆæ›´å¿«ï¼‰</span>

./gradlew clean build --parallel --max-workers=4

</code></pre>
<h4 data-id="heading-21">ç¼–è¯‘ç‰¹å®šæ¨¡å—</h4>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># ç¼–è¯‘æ ¸å¿ƒæ¨¡å—</span>

./gradlew :core:assembleDebug

  


<span class="hljs-comment"># ç¼–è¯‘åº”ç”¨æ¨¡å—</span>

./gradlew :app:assembleDebug

  


<span class="hljs-comment"># ç¼–è¯‘ Apache Commons Lang æ¨¡å—</span>

./gradlew :apache:assembleDebug

</code></pre>
<hr/>
<h3 data-id="heading-22">é¡¹ç›®æ¨¡å—åˆ—è¡¨</h3>
<p>æ ¹æ® <code>settings.gradle.kts</code>ï¼Œé¡¹ç›®åŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š</p>
<ul>
<li>
<p><code>:apache</code> - Apache Commons Lang åº“</p>
</li>
<li>
<p><code>:app</code> - LSPosed Manager åº”ç”¨</p>
</li>
<li>
<p><code>:axml</code> - Android XML å¤„ç†åº“</p>
</li>
<li>
<p><code>:core</code> - LSPosed æ ¸å¿ƒæ¡†æ¶</p>
</li>
<li>
<p><code>:daemon</code> - å®ˆæŠ¤è¿›ç¨‹</p>
</li>
<li>
<p><code>:dex2oat</code> - Dex2Oat å·¥å…·</p>
</li>
<li>
<p><code>:hiddenapi:stubs</code> - Hidden API å­˜æ ¹</p>
</li>
<li>
<p><code>:hiddenapi:bridge</code> - Hidden API æ¡¥æ¥</p>
</li>
<li>
<p><code>:magisk-loader</code> - Magisk æ¨¡å—åŠ è½½å™¨</p>
</li>
<li>
<p><code>:libxposed:api</code> - Xposed API</p>
</li>
<li>
<p><code>:libxposed:service</code> - Xposed æœåŠ¡</p>
</li>
<li>
<p><code>:libxposed:compat</code> - Xposed å…¼å®¹å±‚</p>
</li>
<li>
<p><code>:services:manager-service</code> - ç®¡ç†å™¨æœåŠ¡</p>
</li>
<li>
<p><code>:services:daemon-service</code> - å®ˆæŠ¤è¿›ç¨‹æœåŠ¡</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-23">æ„å»ºäº§ç‰©ä½ç½®</h3>
<p>ç¼–è¯‘å®Œæˆåï¼Œæ„å»ºäº§ç‰©é€šå¸¸åœ¨ä»¥ä¸‹ä½ç½®ï¼š</p>
<ul>
<li>
<p><strong>APK</strong>: <code>app/build/outputs/apk/</code></p>
</li>
<li>
<p><strong>AAR/JAR</strong>: <code>å„æ¨¡å—/build/libs/</code></p>
</li>
<li>
<p><strong>Magisk ZIP</strong>: <code>magisk-loader/build/outputs/</code></p>
</li>
</ul>
<hr/>
<h3 data-id="heading-24">å¸¸è§é—®é¢˜æ’æŸ¥</h3>
<h4 data-id="heading-25">é—®é¢˜ï¼šç¼–è¯‘æ—¶æç¤ºæ‰¾ä¸åˆ°æŸä¸ªç±»</h4>
<ol>
<li>
<p>æ£€æŸ¥ä¾èµ–æ˜¯å¦æ­£ç¡®æ·»åŠ åˆ° <code>build.gradle.kts</code></p>
</li>
<li>
<p>è¿è¡Œ <code>./gradlew :æ¨¡å—å:dependencies</code> æŸ¥çœ‹ä¾èµ–æ ‘</p>
</li>
<li>
<p>æ£€æŸ¥æ˜¯å¦æœ‰ ProGuard/R8 è§„åˆ™éœ€è¦æ·»åŠ </p>
</li>
</ol>
<h4 data-id="heading-26">é—®é¢˜ï¼šNDK ç¼–è¯‘å¤±è´¥</h4>
<ol>
<li>
<p>æ£€æŸ¥ <code>ANDROID_NDK_HOME</code> ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®</p>
</li>
<li>
<p>ç¡®è®¤ NDK ç‰ˆæœ¬æ˜¯å¦åŒ¹é…ï¼ˆå½“å‰é¡¹ç›®éœ€è¦ NDK 26.1.10909125ï¼‰</p>
</li>
<li>
<p>æ£€æŸ¥ CMake é…ç½®æ˜¯å¦æ­£ç¡®</p>
</li>
</ol>
<h4 data-id="heading-27">é—®é¢˜ï¼šå­æ¨¡å—æœªæ›´æ–°</h4>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ›´æ–°å­æ¨¡å—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
git submodule update --init --recursive

</code></pre>
<hr/>
<h3 data-id="heading-28">å‚è€ƒèµ„æ–™</h3>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.gradle.org%2F9.2.0%2Fuserguide%2Fbuild_environment.html%23sec%3Aconfiguring_jvm_memory" target="_blank" title="https://docs.gradle.org/9.2.0/userguide/build_environment.html#sec:configuring_jvm_memory" ref="nofollow noopener noreferrer">Gradle å®˜æ–¹æ–‡æ¡£</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fwrite%2Flint" target="_blank" title="https://developer.android.com/studio/write/lint" ref="nofollow noopener noreferrer">Android Lint æ–‡æ¡£</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=README.md" target="_blank" title="README.md" ref="nofollow noopener noreferrer">LSPosed é¡¹ç›® README</a></p>
</li>
</ul>
<hr/>
<p><strong>æœ€åæ›´æ–°</strong>: 2025-01-18</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬12è®²ï¼šåˆ†åº“åˆ†è¡¨ä¸ç”Ÿäº§å®æˆ˜]]></title>    <link>https://juejin.cn/post/7596186565270028303</link>    <guid>https://juejin.cn/post/7596186565270028303</guid>    <pubDate>2026-01-18T10:49:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596186565270028303" data-draft-id="7596186565269995535" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬12è®²ï¼šåˆ†åº“åˆ†è¡¨ä¸ç”Ÿäº§å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯,MySQL"/> <meta itemprop="datePublished" content="2026-01-18T10:49:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éª‘ç€bugçš„coder"/> <meta itemprop="url" content="https://juejin.cn/user/1922418579089566"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬12è®²ï¼šåˆ†åº“åˆ†è¡¨ä¸ç”Ÿäº§å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1922418579089566/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éª‘ç€bugçš„coder
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T10:49:43.000Z" title="Sun Jan 18 2026 10:49:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ç›®æ ‡ï¼š</strong> æŒæ¡åˆ†åº“åˆ†è¡¨ç­–ç•¥ï¼Œäº†è§£åˆ†åŒºè¡¨å’Œç”Ÿäº§æœ€ä½³å®è·µ</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">å¼€ç¯‡ï¼šä¸»ä»æ¶æ„ä¹Ÿæ•‘ä¸äº†çš„åœºæ™¯</h2>
<p>ä¸Šä¸€è®²æˆ‘ä»¬æ­å¥½äº†ä¸»ä»æ¶æ„ï¼Œè¯»å†™åˆ†ç¦»è·‘èµ·æ¥äº†ï¼ŒQPSæ‰›ä½äº†ã€‚ä½†æ–°çš„é—®é¢˜æ¥äº†ï¼š</p>
<p>è®¢å•è¡¨1äº¿è¡Œäº†ã€‚åŠ äº†ç´¢å¼•ï¼ŒæŸ¥è¯¢è¿˜æ˜¯æ…¢ã€‚EXPLAINä¸€çœ‹ï¼Œtype=ALLï¼Œå…¨è¡¨æ‰«æã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºB+æ ‘å¤ªé«˜äº†ï¼Œå•è¡¨æ•°æ®å¤ªå¤šï¼Œç´¢å¼•æ ‘ä¹Ÿæ’‘ä¸ä½äº†ã€‚</p>
<p>æ›´å¤´ç–¼çš„æ˜¯ï¼Œå•åº“è¿æ¥æ•°ç»å¸¸æ‰“æ»¡ã€‚ä»åº“å†å¤šï¼Œå†™æ“ä½œè¿˜æ˜¯å…¨å‹åœ¨ä¸»åº“ä¸Šï¼Œä¸»åº“çš„è¿æ¥æ± æˆäº†ç“¶é¢ˆã€‚</p>
<p>è¿™æ—¶å€™ï¼Œä¸»ä»å¤åˆ¶è§£å†³ä¸äº†é—®é¢˜äº†ã€‚ä½ éœ€è¦çš„æ˜¯â€”â€”<strong>åˆ†åº“åˆ†è¡¨</strong>ã€‚</p>
<p>ä½†åˆ†åº“åˆ†è¡¨ä¸æ˜¯é“¶å¼¹ï¼Œæä¸å¥½ä¼šå¸¦æ¥æ›´å¤šéº»çƒ¦ï¼šè·¨åº“äº‹åŠ¡æ€ä¹ˆåŠï¼Ÿå…¨å±€IDæ€ä¹ˆç”Ÿæˆï¼Ÿæ‰©å®¹æ—¶æ•°æ®æ€ä¹ˆè¿ç§»ï¼Ÿ</p>
<p>è¿™æ­£æ˜¯æœ¬è®²è¦å›ç­”çš„é—®é¢˜ã€‚æˆ‘ä»¬ä»"è¯¥ä¸è¯¥åˆ†"å¼€å§‹ï¼Œä¸€æ­¥æ­¥è®²æ¸…æ¥šåˆ†ç‰‡ç­–ç•¥ã€æ ¸å¿ƒéš¾é¢˜ã€ä»¥åŠç”Ÿäº§ç¯å¢ƒçš„æœ€ä½³å®è·µã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ—¶å€™éœ€è¦åˆ†åº“åˆ†è¡¨ï¼Ÿ</h2>
<p><strong>å…ˆé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼šçœŸçš„éœ€è¦åˆ†åº“åˆ†è¡¨å—ï¼Ÿ</strong></p>
<p>åˆ†åº“åˆ†è¡¨ä¸æ˜¯é“¶å¼¹ï¼Œä¼šå¸¦æ¥ä¸€å †éº»çƒ¦äº‹ï¼šè·¨åº“äº‹åŠ¡ã€è·¨è¡¨æŸ¥è¯¢ã€å…¨å±€IDã€æ•°æ®è¿ç§»...</p>
<p><strong>åˆ†åº“åˆ†è¡¨çš„åˆ¤æ–­æ ‡å‡†ï¼š</strong></p>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>é˜ˆå€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å•è¡¨è¡Œæ•°</td><td>&gt;1000ä¸‡</td><td>B+æ ‘é«˜åº¦å¢åŠ ï¼ŒæŸ¥è¯¢å˜æ…¢</td></tr><tr><td>å•åº“QPS</td><td>&gt;5000</td><td>CPU 90%ä»¥ä¸Šï¼Œæ‰›ä¸ä½äº†</td></tr><tr><td>å•åº“è¿æ¥æ•°</td><td>æ¥è¿‘max_connections</td><td>è¿æ¥æ± æ‰“æ»¡</td></tr></tbody></table>
<p><strong>èƒ½ä¸åˆ†å°±ä¸åˆ†ï¼Œåˆ†åº“åˆ†è¡¨æ˜¯æœ€åçš„æ‰‹æ®µã€‚</strong></p>
<p>å…ˆè¯•è¯•è¿™äº›ä¼˜åŒ–ï¼š</p>
<ul>
<li>åŠ ç´¢å¼•ã€ä¼˜åŒ–SQL</li>
<li>è¯»å†™åˆ†ç¦»ï¼Œåˆ†æ‹…è¯»å‹åŠ›</li>
<li>å†·çƒ­æ•°æ®åˆ†ç¦»ï¼Œå½’æ¡£å†å²æ•°æ®</li>
<li>å‡çº§ç¡¬ä»¶ï¼ŒåŠ å†…å­˜åŠ SSD</li>
</ul>
<p>éƒ½è¯•è¿‡äº†è¿˜æ˜¯æ‰›ä¸ä½ï¼Œå†è€ƒè™‘åˆ†åº“åˆ†è¡¨ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€åˆ†ç‰‡ç­–ç•¥ï¼šæ€ä¹ˆæ‹†ï¼Ÿ</h2>
<h3 data-id="heading-3">2.1 å‚ç›´åˆ†è¡¨ï¼šæŒ‰å­—æ®µæ‹†</h3>
<p>æŠŠå®½è¡¨æ‹†æˆçª„è¡¨ï¼Œçƒ­æ•°æ®å’Œå†·æ•°æ®åˆ†ç¦»ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åŸè¡¨ï¼šuserï¼ˆ20ä¸ªå­—æ®µï¼‰</span>
<span class="hljs-comment">-- é—®é¢˜ï¼šæ¯æ¬¡æŸ¥è¯¢éƒ½è¦è¯»å–å¤§é‡ä¸éœ€è¦çš„å­—æ®µ</span>

<span class="hljs-comment">-- æ‹†åˆ†åï¼š</span>
<span class="hljs-comment">-- user_baseï¼ˆé«˜é¢‘å­—æ®µï¼šid, username, password, statusï¼‰</span>
<span class="hljs-comment">-- user_detailï¼ˆä½é¢‘å­—æ®µï¼šintro, hobby, addressï¼‰</span>
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> è¡¨å­—æ®µå¤ªå¤šï¼Œéƒ¨åˆ†å­—æ®µè®¿é—®é¢‘ç‡ä½ã€‚</p>
<h3 data-id="heading-4">2.2 æ°´å¹³åˆ†è¡¨ï¼šæŒ‰è¡Œæ‹†</h3>
<p>æŠŠå¤§è¡¨æ‹†æˆå¤šå¼ ç»“æ„ç›¸åŒçš„å°è¡¨ï¼Œè¿™æ˜¯æœ€å¸¸ç”¨çš„æ–¹å¼ã€‚</p>
<p><strong>å“ˆå¸Œåˆ†ç‰‡ï¼ˆæ¨èï¼‰ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŒ‰user_idå“ˆå¸Œï¼Œåˆ†æˆ16å¼ è¡¨</span>
table_index <span class="hljs-operator">=</span> user_id <span class="hljs-operator">%</span> <span class="hljs-number">16</span>
<span class="hljs-comment">-- user_id=10001 â†’ orders_1</span>
<span class="hljs-comment">-- user_id=10002 â†’ orders_2</span>
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong> æ•°æ®åˆ†å¸ƒå‡åŒ€
<strong>ç¼ºç‚¹ï¼š</strong> æ‰©å®¹éº»çƒ¦ï¼ˆåé¢ä¼šè®²è§£å†³æ–¹æ¡ˆï¼‰</p>
<p><strong>èŒƒå›´åˆ†ç‰‡ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŒ‰æœˆä»½åˆ†è¡¨</span>
orders_202501: created_atåœ¨<span class="hljs-number">2025</span>å¹´<span class="hljs-number">1</span>æœˆ
orders_202502: created_atåœ¨<span class="hljs-number">2025</span>å¹´<span class="hljs-number">2</span>æœˆ
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong> æ‰©å®¹ç®€å•ï¼Œç›´æ¥åŠ æ–°è¡¨
<strong>ç¼ºç‚¹ï¼š</strong> æ•°æ®åˆ†å¸ƒä¸å‡ï¼Œæœ€è¿‘çš„è¡¨æ•°æ®æœ€å¤š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f83886aaeb64e8ead6c800ab1ff81fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769338183&amp;x-signature=RBZvyXvTjERKle4NW4lJWaVweP4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">2.3 åˆ†ç‰‡ç­–ç•¥é€‰æ‹©</h3>

























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èç­–ç•¥</th><th>åŸå› </th></tr></thead><tbody><tr><td>æŒ‰ç”¨æˆ·æŸ¥è¯¢ä¸ºä¸»</td><td>å“ˆå¸Œåˆ†ç‰‡ï¼ˆuser_idï¼‰</td><td>åŒä¸€ç”¨æˆ·çš„æ•°æ®åœ¨åŒä¸€åˆ†ç‰‡</td></tr><tr><td>æŒ‰æ—¶é—´æŸ¥è¯¢ä¸ºä¸»</td><td>èŒƒå›´åˆ†ç‰‡ï¼ˆæ—¶é—´ï¼‰</td><td>åŒä¸€æ—¶é—´æ®µçš„æ•°æ®åœ¨åŒä¸€åˆ†ç‰‡</td></tr><tr><td>éœ€è¦å½’æ¡£å†å²æ•°æ®</td><td>èŒƒå›´åˆ†ç‰‡ï¼ˆæ—¶é—´ï¼‰</td><td>ç›´æ¥åˆ é™¤æ—§åˆ†ç‰‡</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€åˆ†åº“åˆ†è¡¨çš„æ ¸å¿ƒéš¾é¢˜</h2>
<p>åˆ†åº“åˆ†è¡¨åï¼Œä¼šé‡åˆ°ä¸€ç³»åˆ—é—®é¢˜ã€‚è¿™äº›é—®é¢˜å¤„ç†ä¸å¥½ï¼Œæ¯”ä¸åˆ†è¿˜éº»çƒ¦ã€‚</p>
<h3 data-id="heading-7">3.1 è·¨åˆ†ç‰‡æŸ¥è¯¢ï¼šæ•°æ®æ•£äº†ï¼Œæ€ä¹ˆæŸ¥ï¼Ÿ</h3>
<p><strong>é—®é¢˜åœºæ™¯ï¼š</strong></p>
<p>æŒ‰user_idåˆ†ç‰‡ï¼Œä½†è¿è¥è¦æŸ¥"æŸä¸ªæ—¶é—´æ®µçš„æ‰€æœ‰è®¢å•"ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¿™æ¡SQLéœ€è¦æŸ¥æ‰€æœ‰åˆ†ç‰‡ï¼Œç„¶ååˆå¹¶ç»“æœï¼Œæ€§èƒ½å¾ˆå·®</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> created_at <span class="hljs-operator">&gt;</span> <span class="hljs-string">'2025-01-01'</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> created_at LIMIT <span class="hljs-number">10</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7aac8464758a486fa5f8cc81e002cd80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769338183&amp;x-signature=eXp%2FTl%2FuWphH4F4ULpMkanjLmyk%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>

























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>é€‚ç”¨åœºæ™¯</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>å†—ä½™è¡¨</td><td>æŸ¥è¯¢ç»´åº¦å›ºå®š</td><td>æŒ‰æ—¶é—´å†å»ºä¸€å¥—åˆ†ç‰‡è¡¨ï¼ŒåŒå†™</td></tr><tr><td>å¼‚æ„ç´¢å¼•</td><td>å¤šç»´åº¦æŸ¥è¯¢</td><td>ç”¨ES/ClickHouseåšäºŒçº§ç´¢å¼•</td></tr><tr><td>åŸºå› æ³•</td><td>è®¢å•å·æŸ¥è¯¢</td><td>è®¢å•å·ä¸­åµŒå…¥user_idçš„åˆ†ç‰‡ä¿¡æ¯</td></tr></tbody></table>
<p><strong>åŸºå› æ³•ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å‡è®¾åˆ†æˆ4ä¸ªåˆ†ç‰‡ï¼Œåˆ†ç‰‡é”®æ˜¯ user_id % 4</span>
<span class="hljs-comment">// ç”¨æˆ·1001 â†’ 1001 % 4 = 1 â†’ åˆ†ç‰‡1</span>

<span class="hljs-comment">// è®¢å•å·ç”Ÿæˆæ—¶ï¼ŒæŠŠ user_id åµŒå…¥è®¢å•å·ä¸­</span>
<span class="hljs-comment">// è®¢å•å·æ ¼å¼ï¼šæ—¶é—´æˆ³(13ä½) + user_id(4ä½) + åºåˆ—å·(4ä½)</span>
<span class="hljs-comment">// ä¾‹å¦‚ï¼š1737194107000 1001 0001</span>
<span class="hljs-comment">//                     ^^^^ è¿™4ä½å°±æ˜¯user_id</span>

<span class="hljs-comment">// æŸ¥è®¢å•æ—¶ï¼Œä»è®¢å•å·ä¸­æå–user_idï¼Œå†è®¡ç®—åˆ†ç‰‡</span>
<span class="hljs-type">String</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"173719410700010010001"</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">oderId</span> <span class="hljs-operator">=</span> orderId.substring(<span class="hljs-number">13</span>, <span class="hljs-number">17</span>);  <span class="hljs-comment">// æå– "1001"</span>
<span class="hljs-type">int</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> Integer.parseInt(userId);       <span class="hljs-comment">// å¾—åˆ° 1001</span>
<span class="hljs-type">int</span> <span class="hljs-variable">shardIndex</span> <span class="hljs-operator">=</span> userId % <span class="hljs-number">4</span>;                 <span class="hljs-comment">// å¾—åˆ° 1ï¼ŒæŸ¥åˆ†ç‰‡1</span>
</code></pre>
<p><strong>æ ¸å¿ƒæ€è·¯</strong>ï¼šæŠŠ user_id è—è¿›è®¢å•å·ï¼ŒæŸ¥è¯¢æ—¶æå–å‡ºæ¥é‡æ–°è®¡ç®—åˆ†ç‰‡ã€‚è¿™æ ·å³ä½¿å°†æ¥æ‰©å®¹ï¼ˆ4â†’8ä¸ªåˆ†ç‰‡ï¼‰ï¼Œåªè¦é‡æ–°ç”¨ user_id ç®—ä¸€éï¼Œç…§æ ·èƒ½å®šä½ã€‚</p>
<h3 data-id="heading-8">3.2 è·¨åˆ†ç‰‡äº‹åŠ¡ï¼šæ•°æ®åœ¨ä¸åŒåº“ï¼Œæ€ä¹ˆä¿è¯ä¸€è‡´æ€§ï¼Ÿ</h3>
<p><strong>é—®é¢˜åœºæ™¯ï¼š</strong></p>
<p>ä¸‹å•æ‰£åº“å­˜ï¼Œè®¢å•è¡¨å’Œåº“å­˜è¡¨åœ¨ä¸åŒåˆ†ç‰‡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è®¢å•è¡¨åœ¨åˆ†ç‰‡Aï¼Œåº“å­˜è¡¨åœ¨åˆ†ç‰‡B</span>
orderDao.insert(order);      <span class="hljs-comment">// åˆ†ç‰‡A</span>
stockDao.decrease(productId); <span class="hljs-comment">// åˆ†ç‰‡B</span>
<span class="hljs-comment">// å¦‚æœåˆ†ç‰‡Bå¤±è´¥äº†ï¼Œåˆ†ç‰‡Açš„æ•°æ®æ€ä¹ˆå›æ»šï¼Ÿ</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>

























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>åŸç†</th><th>ä¼˜ç¼ºç‚¹</th></tr></thead><tbody><tr><td>æœ¬åœ°æ¶ˆæ¯è¡¨</td><td>è®¢å•å’Œæ¶ˆæ¯åœ¨åŒä¸€äº‹åŠ¡å†™å…¥ï¼Œå®šæ—¶ä»»åŠ¡å‘MQ</td><td>å®ç°ç®€å•ï¼Œæ— æ¡†æ¶ä¾èµ–</td></tr><tr><td>Seata AT</td><td>è‡ªåŠ¨æ‹¦æˆªSQLï¼Œç”Ÿæˆå›æ»šæ—¥å¿—</td><td>å¼€ç®±å³ç”¨ï¼Œä¾µå…¥æ€§ä½</td></tr><tr><td>Seata TCC</td><td>æ‰‹åŠ¨å®ç°Try/Confirm/Cancelä¸‰ä¸ªæ¥å£</td><td>æ€§èƒ½æœ€å¥½ï¼Œä½†å¼€å‘æˆæœ¬é«˜</td></tr></tbody></table>
<p><strong>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆï¼ˆæ¨èï¼‰ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. æœ¬åœ°äº‹åŠ¡ï¼šæ’å…¥è®¢å• + æ¶ˆæ¯ï¼ˆåŒä¸€ä¸ªåº“ï¼Œä¿è¯åŸå­æ€§ï¼‰</span>
<span class="hljs-keyword">BEGIN</span>;
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> orders (...) <span class="hljs-keyword">VALUES</span> (...);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> local_message (biz_id, status, content) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'order_001'</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'æ‰£åº“å­˜'</span>);
<span class="hljs-keyword">COMMIT</span>;

<span class="hljs-comment">-- 2. å®šæ—¶ä»»åŠ¡ï¼šæ‰«ææ¶ˆæ¯è¡¨ï¼Œå‘é€MQ</span>
<span class="hljs-comment">-- 3. åº“å­˜æœåŠ¡ï¼šæ¶ˆè´¹MQï¼Œæ‰£å‡åº“å­˜</span>
<span class="hljs-comment">-- 4. å›è°ƒï¼šæ›´æ–°æ¶ˆæ¯çŠ¶æ€ä¸ºå·²å®Œæˆ</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e92773d4d4444bc8ab4e96d86c1ce07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769338183&amp;x-signature=5gOnksQAu3oGwtpw09gdXW0pgM8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">3.3 å…¨å±€è¡¨ï¼šæ¯ä¸ªåˆ†ç‰‡éƒ½è¦ç”¨çš„æ•°æ®æ€ä¹ˆåŠï¼Ÿ</h3>
<p><strong>é—®é¢˜åœºæ™¯ï¼š</strong></p>
<p>çœå¸‚åŒºè¡¨ã€é…ç½®è¡¨ï¼Œæ¯ä¸ªåˆ†ç‰‡éƒ½è¦ç”¨ï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>

























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>æ¯ä¸ªåˆ†ç‰‡å¤åˆ¶ä¸€ä»½</td><td>æŸ¥è¯¢å¿«ï¼Œæ— è·¨åº“</td><td>æ›´æ–°éœ€è¦åŒæ­¥æ‰€æœ‰åˆ†ç‰‡</td></tr><tr><td>ç‹¬ç«‹åº“</td><td>æ›´æ–°ç®€å•</td><td>æŸ¥è¯¢éœ€è¦è·¨åº“</td></tr><tr><td>ç¼“å­˜</td><td>æ€§èƒ½æœ€å¥½</td><td>éœ€è¦å¤„ç†ç¼“å­˜ä¸€è‡´æ€§</td></tr></tbody></table>
<p><strong>ShardingSphereå¹¿æ’­è¡¨é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">rules:</span>
<span class="hljs-bullet">-</span> <span class="hljs-type">!SHARDING</span>
  <span class="hljs-attr">broadcastTables:</span>  <span class="hljs-comment"># å¹¿æ’­è¡¨ï¼Œè‡ªåŠ¨åŒæ­¥åˆ°æ‰€æœ‰åˆ†ç‰‡</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">sys_config</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">sys_region</span>
</code></pre>
<hr/>
<h2 data-id="heading-10">å››ã€åˆ†ç‰‡æ‰©å®¹ï¼š4ä¸ªåˆ†ç‰‡ä¸å¤Ÿç”¨äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ</h2>
<p>å½“åˆåˆ†äº†4ä¸ªåˆ†ç‰‡ï¼Œç°åœ¨æ¯ä¸ªåˆ†ç‰‡æ•°æ®é‡åˆè¶…æ ‡äº†ï¼Œéœ€è¦æ‰©åˆ°8ä¸ªã€‚</p>
<p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šè€æ•°æ®æŒ‰ <code>% 4</code> åˆ†å¸ƒåœ¨4ä¸ªåˆ†ç‰‡é‡Œï¼Œæ–°è§„åˆ™æ”¹æˆ <code>% 8</code>ï¼Œæ•°æ®æ€ä¹ˆè¿ç§»è¿‡å»ï¼Ÿ</p>
<h3 data-id="heading-11">4.1 ç¿»å€æ‰©å®¹åŸç†</h3>
<p>ç¿»å€æ‰©å®¹æ—¶ï¼Œæ¯ä¸ªæ—§åˆ†ç‰‡çš„æ•°æ®åªéœ€è¦æ‹†æˆä¸¤ä»½ï¼Œè¿ç§»é€»è¾‘æœ€ç®€å•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea9881f3aeb349568fab27f28382416a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769338183&amp;x-signature=uE8R%2BFLhdXr%2F9neHtNzOTYWif38%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ•°å­¦åŸç†</strong>ï¼š<code>user_id % 4 = 0</code> çš„æ•°æ®ï¼Œåœ¨ <code>% 8</code> åè¦ä¹ˆæ˜¯0ï¼Œè¦ä¹ˆæ˜¯4ã€‚æ‰€ä»¥åˆ†ç‰‡0çš„æ•°æ®åªä¼šå»åˆ†ç‰‡0æˆ–åˆ†ç‰‡4ï¼Œä¸ä¼šä¹±è·‘ã€‚</p>
<h3 data-id="heading-12">4.2 æ‰©å®¹æ­¥éª¤ï¼ˆä¸åœæœï¼‰</h3>








































<table><thead><tr><th>é˜¶æ®µ</th><th>åšä»€ä¹ˆ</th><th>æ€ä¹ˆåš</th></tr></thead><tbody><tr><td><strong>1. å‡†å¤‡</strong></td><td>æ–°å»º4ä¸ªç©ºåˆ†ç‰‡ï¼ˆ4-7ï¼‰</td><td>åªæ˜¯å»ºåº“å»ºè¡¨ï¼Œä¸å½±å“çº¿ä¸Š</td></tr><tr><td><strong>2. åŒå†™</strong></td><td>æ–°æ•°æ®åŒæ—¶å†™æ–°æ—§åˆ†ç‰‡</td><td>ä¸­é—´ä»¶é…ç½®åŒå†™è§„åˆ™ï¼Œæˆ–ä»£ç å±‚é¢åŒæ—¶å†™ä¸¤ä»½</td></tr><tr><td><strong>3. è¿ç§»</strong></td><td>æŠŠæ—§æ•°æ®æŒ‰æ–°è§„åˆ™æ¬åˆ°æ–°åˆ†ç‰‡</td><td>ç”¨ <strong>Canal</strong> ç›‘å¬ binlog å¢é‡åŒæ­¥</td></tr><tr><td><strong>4. æ ¡éªŒ</strong></td><td>ç¡®è®¤æ–°æ—§æ•°æ®ä¸€è‡´</td><td>æŠ½æ ·å¯¹æ¯” + å…¨é‡ count</td></tr><tr><td><strong>5. åˆ‡æµ</strong></td><td>è·¯ç”±è§„åˆ™æ”¹æˆ <code>% 8</code></td><td>å…ˆç°åº¦10%æµé‡éªŒè¯ï¼Œå†å…¨é‡åˆ‡æ¢</td></tr><tr><td><strong>6. æ¸…ç†</strong></td><td>åˆ é™¤æ—§åˆ†ç‰‡å†—ä½™æ•°æ®</td><td>ç¡®è®¤æ— é—®é¢˜åå†æ¸…</td></tr></tbody></table>
<h3 data-id="heading-13">4.3 è¿ç§»å·¥å…·é€‰å‹</h3>

























<table><thead><tr><th>åœºæ™¯</th><th>å·¥å…·</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å¢é‡è¿ç§»</td><td>Canal</td><td>ç›‘å¬ binlogï¼Œå®æ—¶åŒæ­¥å˜æ›´</td></tr><tr><td>å…¨é‡è¿ç§»</td><td>DataX</td><td>é˜¿é‡Œå¼€æºï¼Œé€‚åˆä¸€æ¬¡æ€§å¤§æ‰¹é‡æ¬æ•°æ®</td></tr><tr><td>ä¸€ç«™å¼</td><td>ShardingSphere-Scaling</td><td>è‡ªåŠ¨åŒ–æ‰©ç¼©å®¹ï¼Œçœå¿ƒä½†å­¦ä¹ æˆæœ¬é«˜</td></tr></tbody></table>
<p><strong>å¸¸ç”¨ç»„åˆ</strong>ï¼šå…ˆç”¨ DataX å…¨é‡è¿ç§»å†å²æ•°æ®ï¼Œå†ç”¨ Canal å¢é‡åŒæ­¥è¿ç§»æœŸé—´çš„æ–°æ•°æ®ã€‚</p>
<hr/>
<h2 data-id="heading-14">äº”ã€å…¨å±€å”¯ä¸€IDï¼šè‡ªå¢IDä¸èƒ½ç”¨äº†</h2>
<h3 data-id="heading-15">5.1 é—®é¢˜ï¼šåˆ†è¡¨åIDä¼šå†²çª</h3>
<p>å•è¡¨æ—¶ç”¨è‡ªå¢IDæ²¡é—®é¢˜ã€‚ä½†åˆ†è¡¨åï¼Œæ¯å¼ è¡¨éƒ½æœ‰è‡ªå·±çš„è‡ªå¢åºåˆ—ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">orders_0: 1, 2, 3, 4...</span>
<span class="hljs-section">orders_1: 1, 2, 3, 4...  â† å’Œ orders_0 çš„IDå†²çªäº†ï¼</span>
</code></pre>
<p>åˆå¹¶æŸ¥è¯¢æ—¶IDé‡å¤ï¼Œä¸šåŠ¡é€»è¾‘å…¨ä¹±äº†ã€‚</p>
<h3 data-id="heading-16">5.2 æ–¹æ¡ˆå¯¹æ¯”</h3>



































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>UUID</td><td>éšæœºç”Ÿæˆ128ä½å­—ç¬¦ä¸²</td><td>ç®€å•ï¼Œä¸ä¾èµ–å¤–éƒ¨æœåŠ¡</td><td>å¤ªé•¿ï¼ˆ36å­—ç¬¦ï¼‰ï¼Œæ— åºï¼Œæ’å…¥æ€§èƒ½å·®</td></tr><tr><td>Redisè‡ªå¢</td><td>ç”¨ Redis çš„ INCR å‘½ä»¤</td><td>ç®€å•ï¼Œæ€§èƒ½é«˜</td><td>å¼ºä¾èµ–Redisï¼ŒRedisæŒ‚äº†å°±å®Œè›‹</td></tr><tr><td>æ•°æ®åº“å·æ®µ</td><td>æ¯æ¬¡ä»DBæ‰¹é‡å–ä¸€æ®µIDï¼ˆå¦‚1-1000ï¼‰</td><td>å‡å°‘DBè®¿é—®æ¬¡æ•°</td><td>å®ç°å¤æ‚ï¼Œéœ€è¦é¢å¤–çš„å·æ®µè¡¨</td></tr><tr><td><strong>é›ªèŠ±ç®—æ³•</strong></td><td>æ—¶é—´æˆ³+æœºå™¨ID+åºåˆ—å·</td><td>è¶‹åŠ¿é€’å¢ï¼Œæ€§èƒ½é«˜ï¼Œä¸ä¾èµ–å¤–éƒ¨æœåŠ¡</td><td>ä¾èµ–æœºå™¨æ—¶é’Ÿï¼Œæ—¶é’Ÿå›æ‹¨ä¼šå‡ºé—®é¢˜</td></tr></tbody></table>
<p><strong>æ¨èé›ªèŠ±ç®—æ³•</strong>ï¼šæœ¬åœ°ç”Ÿæˆï¼Œä¸ä¾èµ–å¤–éƒ¨æœåŠ¡ï¼Œæ€§èƒ½æœ€é«˜ï¼ˆå•æœº400ä¸‡QPSï¼‰ï¼Œä¸”è¶‹åŠ¿é€’å¢å¯¹B+æ ‘ç´¢å¼•å‹å¥½ã€‚</p>
<h3 data-id="heading-17">5.3 é›ªèŠ±ç®—æ³•åŸç†</h3>
<p><strong>ç»“æ„ï¼š</strong> 64ä½ = ç¬¦å·ä½(1) + æ—¶é—´æˆ³(41ä½) + æ•°æ®ä¸­å¿ƒ(5ä½) + æœºå™¨(5ä½) + åºåˆ—å·(12ä½)</p>
<pre><code class="hljs language-bash" lang="bash">0 | 00000000000000000000000000000000000000000 | 00000 | 00000 | 000000000000
ç¬¦å·  æ—¶é—´æˆ³ï¼ˆ41ä½ï¼Œçº¦69å¹´ï¼‰                    æ•°æ®ä¸­å¿ƒ  æœºå™¨ID   åºåˆ—å·ï¼ˆ4096/msï¼‰
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b65829e56f44f9bb46b8c239192de5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769338183&amp;x-signature=lhOMC%2B%2FAjY5XgL1UM0evYBO9sCg%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å„éƒ¨åˆ†å«ä¹‰ï¼š</strong></p>
<ul>
<li><strong>ç¬¦å·ä½</strong>ï¼šå›ºå®šä¸º0ï¼Œä¿è¯IDæ˜¯æ­£æ•°</li>
<li><strong>æ—¶é—´æˆ³</strong>ï¼šæ¯«ç§’çº§ï¼Œ41ä½å¯ç”¨çº¦69å¹´</li>
<li><strong>æ•°æ®ä¸­å¿ƒ+æœºå™¨ID</strong>ï¼šå…±10ä½ï¼Œæ”¯æŒ1024å°æœºå™¨</li>
<li><strong>åºåˆ—å·</strong>ï¼š12ä½ï¼ŒåŒä¸€æ¯«ç§’å†…å¯ç”Ÿæˆ4096ä¸ªID</li>
</ul>
<p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p>
<ul>
<li>ShardingSphere å†…ç½®æ”¯æŒ</li>
<li>ç¾å›¢ Leaf</li>
<li>ç™¾åº¦ UidGenerator</li>
</ul>
<hr/>
<h2 data-id="heading-18">å…­ã€åˆ†åŒºè¡¨ï¼šä¸ç”¨ä¸­é—´ä»¶çš„"ä¼ªåˆ†è¡¨"</h2>
<h3 data-id="heading-19">ä»€ä¹ˆæ˜¯åˆ†åŒºè¡¨ï¼Ÿ</h3>
<p>åˆ†åŒºè¡¨æ˜¯MySQLå†…ç½®çš„åŠŸèƒ½ï¼ŒæŠŠä¸€å¼ å¤§è¡¨çš„æ•°æ®åˆ†æ•£å­˜å‚¨åˆ°å¤šä¸ªç‰©ç†æ–‡ä»¶ï¼Œä½†å¯¹åº”ç”¨å®Œå…¨é€æ˜ï¼ŒSQLä¸ç”¨æ”¹ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders (
  id <span class="hljs-type">BIGINT</span>,
  created_at DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (id, created_at)
) <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span> (<span class="hljs-keyword">YEAR</span>(created_at) <span class="hljs-operator">*</span> <span class="hljs-number">100</span> <span class="hljs-operator">+</span> <span class="hljs-keyword">MONTH</span>(created_at)) (
  <span class="hljs-keyword">PARTITION</span> p202501 <span class="hljs-keyword">VALUES</span> LESS THAN (<span class="hljs-number">202502</span>),
  <span class="hljs-keyword">PARTITION</span> p202502 <span class="hljs-keyword">VALUES</span> LESS THAN (<span class="hljs-number">202503</span>),
  <span class="hljs-keyword">PARTITION</span> pmax <span class="hljs-keyword">VALUES</span> LESS THAN MAXVALUE
);
</code></pre>
<h3 data-id="heading-20">åˆ†åŒºè¡¨çš„æ€æ‰‹é”ï¼šç§’åˆ å†å²æ•°æ®</h3>
<p><strong>ä¼ ç»ŸDELETEï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> created_at <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2024-01-01'</span>;
<span class="hljs-comment">-- 1äº¿è¡Œæ•°æ®ï¼Œåˆ é™¤2å°æ—¶ï¼Œè¿˜ä¼šäº§ç”Ÿå¤§é‡binlog</span>
</code></pre>
<p><strong>åˆ†åŒºDROPï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PARTITION</span> p202401;
<span class="hljs-comment">-- 0.5ç§’æå®šï¼Œä¸äº§ç”Ÿbinlog</span>
</code></pre>
<h3 data-id="heading-21">åˆ†åŒºè£å‰ªï¼šåªæ‰«æéœ€è¦çš„åˆ†åŒº</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> created_at <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-05-01'</span>;
<span class="hljs-comment">-- åªæ‰«æp202505åˆ†åŒºï¼Œå…¶ä»–åˆ†åŒºä¸ç¢°</span>
</code></pre>
<h3 data-id="heading-22">åˆ†åŒºè¡¨ vs åˆ†è¡¨</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>åˆ†åŒºè¡¨</th><th>åˆ†è¡¨</th></tr></thead><tbody><tr><td>å®ç°æ–¹å¼</td><td>MySQLå†…ç½®</td><td>ä¸­é—´ä»¶ï¼ˆShardingSphereç­‰ï¼‰</td></tr><tr><td>SQLæ”¹åŠ¨</td><td>æ— éœ€æ”¹åŠ¨</td><td>éœ€è¦è·¯ç”±</td></tr><tr><td>è·¨åˆ†åŒºæŸ¥è¯¢</td><td>MySQLè‡ªåŠ¨å¤„ç†</td><td>éœ€è¦ä¸­é—´ä»¶åˆå¹¶</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>æŒ‰æ—¶é—´å½’æ¡£ã€åˆ é™¤å†å²æ•°æ®</td><td>æŒ‰ç”¨æˆ·åˆ†ç‰‡ã€çªç ´å•åº“é™åˆ¶</td></tr></tbody></table>
<p><strong>å»ºè®®ï¼š</strong> å¦‚æœåªæ˜¯ä¸ºäº†åˆ é™¤å†å²æ•°æ®æ–¹ä¾¿ï¼Œç”¨åˆ†åŒºè¡¨å°±å¤Ÿäº†ï¼Œä¸éœ€è¦ä¸Šåˆ†åº“åˆ†è¡¨ã€‚</p>
<hr/>
<h2 data-id="heading-23">ä¸ƒã€ç”Ÿäº§æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-24">è¡¨è®¾è®¡è§„èŒƒ</h3>



































<table><thead><tr><th>è§„èŒƒ</th><th>æ­£ç¡®åšæ³•</th><th>é”™è¯¯åšæ³•</th></tr></thead><tbody><tr><td>è¡¨å</td><td>user_order</td><td>UserOrder</td></tr><tr><td>ä¸»é”®</td><td>BIGINTï¼ˆé›ªèŠ±ç®—æ³•ï¼‰</td><td>UUID</td></tr><tr><td>å­—ç¬¦é›†</td><td>utf8mb4</td><td>utf8</td></tr><tr><td>é‡‘é¢</td><td>DECIMAL(10,2)</td><td>FLOAT</td></tr><tr><td>ç©ºå€¼</td><td>NOT NULL + DEFAULT</td><td>å…è®¸NULL</td></tr></tbody></table>
<h3 data-id="heading-25">ç´¢å¼•è§„èŒƒ</h3>
<ul>
<li>å‘½åï¼šidx_å­—æ®µåã€uk_å­—æ®µå</li>
<li>æ•°é‡ï¼šå•è¡¨ç´¢å¼•&lt;5ä¸ª</li>
<li>é¡ºåºï¼šåŒºåˆ†åº¦é«˜çš„åœ¨å‰</li>
</ul>
<h3 data-id="heading-26">SQLè§„èŒƒ</h3>

























<table><thead><tr><th>è§„èŒƒ</th><th>æ­£ç¡®åšæ³•</th><th>é”™è¯¯åšæ³•</th></tr></thead><tbody><tr><td>SELECT</td><td>åªæŸ¥éœ€è¦çš„å­—æ®µ</td><td>SELECT *</td></tr><tr><td>WHERE</td><td>é¿å…å‡½æ•°</td><td>YEAR(date)=2025</td></tr><tr><td>åˆ†é¡µ</td><td>é¿å…æ·±åˆ†é¡µ</td><td>LIMIT 10000,10</td></tr></tbody></table>
<h3 data-id="heading-27">ç›‘æ§æŒ‡æ ‡</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- QPS</span>
<span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">GLOBAL</span> STATUS <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'Questions'</span>;

<span class="hljs-comment">-- è¿æ¥æ•°ï¼ˆå»ºè®®&lt;80%ï¼‰</span>
<span class="hljs-keyword">SHOW</span> STATUS <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'Threads_connected'</span>;

<span class="hljs-comment">-- æ…¢æŸ¥è¯¢</span>
<span class="hljs-keyword">SET</span> <span class="hljs-keyword">GLOBAL</span> slow_query_log <span class="hljs-operator">=</span> <span class="hljs-keyword">ON</span>;
<span class="hljs-keyword">SET</span> <span class="hljs-keyword">GLOBAL</span> long_query_time <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<hr/>
<h2 data-id="heading-28">å…«ã€é¿å‘æŒ‡å—</h2>
<h3 data-id="heading-29">å‘1ï¼šåˆ†ç‰‡é”®é€‰æ‹©ä¸å½“</h3>
<p><strong>é—®é¢˜ï¼š</strong> æŒ‰statusåˆ†ç‰‡ï¼ˆåªæœ‰0/1/2ï¼‰ï¼Œæ•°æ®åˆ†å¸ƒä¸å‡ã€‚</p>
<p><strong>æ­£ç¡®åšæ³•ï¼š</strong> æŒ‰user_idåˆ†ç‰‡ï¼ˆåŒºåˆ†åº¦é«˜ï¼‰ã€‚</p>
<h3 data-id="heading-30">å‘2ï¼šåˆ†ç‰‡æ•°é‡ä¸åˆç†</h3>
<p><strong>é—®é¢˜ï¼š</strong> åˆ†æˆ3å¼ è¡¨ï¼Œæ‰©å®¹æ—¶æ•°æ®è¿ç§»é‡å¤§ã€‚</p>
<p><strong>æ­£ç¡®åšæ³•ï¼š</strong> åˆ†æˆ2çš„å¹‚æ¬¡ï¼ˆ4/8/16/32ï¼‰ã€‚</p>
<h3 data-id="heading-31">å‘3ï¼šåˆ†ç‰‡é”®é€‰äº†ä¼šå˜åŒ–çš„å­—æ®µ</h3>
<p><strong>é—®é¢˜ï¼š</strong> ç”¨è®¢å•çŠ¶æ€ï¼ˆstatusï¼‰åšåˆ†ç‰‡é”®ï¼ŒçŠ¶æ€ä»0å˜1åï¼Œæ•°æ®åº”è¯¥åœ¨å“ªä¸ªåˆ†ç‰‡ï¼Ÿ</p>
<p><strong>æ­£ç¡®åšæ³•ï¼š</strong> åˆ†ç‰‡é”®é€‰ä¸ä¼šå˜åŒ–çš„å­—æ®µï¼Œå¦‚ <code>user_id</code>ã€<code>order_id</code>ã€‚</p>
<h3 data-id="heading-32">å‘4ï¼šè·¨åˆ†ç‰‡æŸ¥è¯¢æ€§èƒ½å·®</h3>
<p><strong>é—®é¢˜ï¼š</strong> éåˆ†ç‰‡é”®æŸ¥è¯¢éœ€è¦æ‰«ææ‰€æœ‰åˆ†ç‰‡ï¼Œæ€§èƒ½å¾ˆå·®ã€‚</p>
<p><strong>æ­£ç¡®åšæ³•ï¼š</strong> ç”¨ESåšäºŒçº§ç´¢å¼•ï¼Œæˆ–è€…å†—ä½™è¡¨ã€‚</p>
<h3 data-id="heading-33">å‘5ï¼šæ‰©å®¹æ—¶æ•°æ®ä¸ä¸€è‡´</h3>
<p><strong>é—®é¢˜ï¼š</strong> æ‰©å®¹æœŸé—´åŒå†™ï¼Œä½†æ–°æ—§åˆ†ç‰‡æ•°æ®ä¸ä¸€è‡´ã€‚</p>
<p><strong>æ­£ç¡®åšæ³•ï¼š</strong> åŒå†™æœŸé—´åšæ•°æ®æ ¡éªŒï¼Œç¡®è®¤ä¸€è‡´åå†åˆ‡æ¢è·¯ç”±ã€‚</p>
<hr/>
<h2 data-id="heading-34">ä¹ã€ä½œä¸š</h2>
<h3 data-id="heading-35">åŸºç¡€é¢˜</h3>
<p>è®¾è®¡åˆ†ç‰‡ç­–ç•¥ï¼šè®¢å•è¡¨1äº¿è¡Œï¼Œ90%æŒ‰user_idæŸ¥è¯¢ã€‚é€‰æ‹©åˆ†ç‰‡é”®ã€åˆ†ç‰‡æ•°é‡ï¼Œè¯´æ˜ç†ç”±ã€‚</p>
<h3 data-id="heading-36">è¿›é˜¶é¢˜</h3>
<p>åˆ›å»ºæŒ‰æœˆåˆ†åŒºçš„è®¢å•è¡¨ï¼ŒéªŒè¯DROP PARTITIONåˆ é™¤å†å²æ•°æ®çš„é€Ÿåº¦ã€‚</p>
<hr/>
<h2 data-id="heading-37">åã€ä¸“æ æ€»ç»“</h2>
<h3 data-id="heading-38">å†™åœ¨æœ€å</h3>
<p>æ—¶è‡³ä»Šæ—¥ï¼Œå†æ—¶ä¸¤ä¸ªå¤šæœˆï¼Œè¿™ä¸ªä¸“æ ç»ˆäºå®Œç»“äº†ã€‚</p>
<p>ä»ç¬¬ä¸€è®²"æŠŠMySQLå½“æˆExcelæ¥å­¦"å¼€å§‹ï¼Œåˆ°ç°åœ¨çš„åˆ†åº“åˆ†è¡¨ä¸ç”Ÿäº§å®æˆ˜ï¼Œæˆ‘ä»¬ä¸€èµ·èµ°è¿‡äº†12è®²çš„æ—…ç¨‹ã€‚è¯´å®è¯ï¼Œå†™ä¸“æ è¿œæ¯”æˆ‘æƒ³è±¡ä¸­éš¾â€”â€”ä¸æ˜¯å†™å®Œå°±è¡Œï¼Œè€Œæ˜¯è¦æŠŠè‡ªå·±çœŸæ­£ç†è§£çš„ä¸œè¥¿ï¼Œç”¨åˆ«äººèƒ½å¬æ‡‚çš„è¯è®²å‡ºæ¥ã€‚æœ‰äº›çŸ¥è¯†ç‚¹æˆ‘è‡ªä»¥ä¸ºå¾ˆç†Ÿï¼ŒçœŸè¦è½ç¬”æ—¶æ‰å‘ç°è¿˜æœ‰æ¨¡ç³Šåœ°å¸¦ã€‚è¿™ä¸ªè¿‡ç¨‹å€’é€¼æˆ‘é‡æ–°ç¿»æ–‡æ¡£ã€æŸ¥æºç ã€åšå®éªŒï¼Œåè€Œè®©è‡ªå·±å­¦å¾—æ›´æ‰å®äº†ã€‚</p>
<p>æ„Ÿè°¢æ¯ä¸€ä½è¯»åˆ°è¿™é‡Œçš„ä½ ã€‚æ— è®ºä½ æ˜¯ä»å¤´è¿½åˆ°å°¾ï¼Œè¿˜æ˜¯æŒ‘äº†å‡ è®²æ¥çœ‹ï¼Œéƒ½å¸Œæœ›è¿™äº›å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>å¦‚æœè¿™ä¸ªä¸“æ è®©ä½ å¯¹MySQLæœ‰äº†æ›´æ·±çš„ç†è§£ï¼Œæˆ–è€…åœ¨é¢è¯•ã€å·¥ä½œä¸­å¸®åˆ°äº†ä½ ï¼Œé‚£å°±æ˜¯æˆ‘æœ€å¤§çš„æ”¶è·ã€‚</p>
<h3 data-id="heading-39">12è®²å›é¡¾</h3>






























<table><thead><tr><th>æ¨¡å—</th><th>è®²æ¬¡</th><th>ä¸»é¢˜</th></tr></thead><tbody><tr><td><strong>å…¥é—¨ç¯‡</strong></td><td>1-3è®²</td><td>MySQLåŸºç¡€ã€ç¯å¢ƒæ­å»ºã€å¢åˆ æ”¹æŸ¥</td></tr><tr><td><strong>æ ¸å¿ƒåŸç†ç¯‡</strong></td><td>4-9è®²</td><td>çª—å£å‡½æ•°ã€äº‹åŠ¡ã€ç´¢å¼•åŸç†ã€æ¶æ„ã€æ—¥å¿—ä¸MVCC</td></tr><tr><td><strong>å®æˆ˜ä¼˜åŒ–ç¯‡</strong></td><td>10è®²</td><td>é”æœºåˆ¶ä¸æ­»é”è§£å†³</td></tr><tr><td><strong>æ¶æ„æ‰©å±•ç¯‡</strong></td><td>11-12è®²</td><td>ä¸»ä»å¤åˆ¶ã€åˆ†åº“åˆ†è¡¨ã€ç”Ÿäº§å®æˆ˜</td></tr></tbody></table>
<h3 data-id="heading-40">å­¦ä¹ å»ºè®®</h3>
<ul>
<li><strong>åŸºç¡€å¿…ä¿®</strong>ï¼š1-5è®²ï¼ˆSQLåŸºç¡€ã€äº‹åŠ¡ï¼‰</li>
<li><strong>é¢è¯•é‡ç‚¹</strong>ï¼š6-7è®²ï¼ˆç´¢å¼•åŸç†ä¸ä¼˜åŒ–ï¼‰ã€9è®²ï¼ˆMVCCï¼‰</li>
<li><strong>è¿›é˜¶é€‰ä¿®</strong>ï¼š11-12è®²ï¼ˆæ¶æ„æ‰©å±•ï¼ŒæŒ‰éœ€å­¦ä¹ ï¼‰</li>
</ul>
<hr/>
<p><strong>ä¸“æ å®Œç»“ï¼Œæ±Ÿæ¹–å†è§ï¼</strong> ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æ·±åº¦å­¦ä¹ Day11ã€‘è‡ªç¼–ç å™¨ï¼ˆAutoEncoder, AEï¼‰å®Œå…¨æŒ‡å—ï¼šä»åŸç†åˆ°æ•°æ®é™ç»´å®æˆ˜]]></title>    <link>https://juejin.cn/post/7595901379015327754</link>    <guid>https://juejin.cn/post/7595901379015327754</guid>    <pubDate>2026-01-17T18:07:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595901379015327754" data-draft-id="7595894884957225011" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æ·±åº¦å­¦ä¹ Day11ã€‘è‡ªç¼–ç å™¨ï¼ˆAutoEncoder, AEï¼‰å®Œå…¨æŒ‡å—ï¼šä»åŸç†åˆ°æ•°æ®é™ç»´å®æˆ˜"/> <meta itemprop="keywords" content="æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-17T18:07:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŸ æŸ é…±"/> <meta itemprop="url" content="https://juejin.cn/user/3739876675556569"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æ·±åº¦å­¦ä¹ Day11ã€‘è‡ªç¼–ç å™¨ï¼ˆAutoEncoder, AEï¼‰å®Œå…¨æŒ‡å—ï¼šä»åŸç†åˆ°æ•°æ®é™ç»´å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3739876675556569/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŸ æŸ é…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T18:07:53.000Z" title="Sat Jan 17 2026 18:07:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œæ— ç›‘ç£å­¦ä¹ æ˜¯å¤„ç†æµ·é‡æ— æ ‡ç­¾æ•°æ®çš„æ ¸å¿ƒæ‰‹æ®µï¼Œè€Œè‡ªç¼–ç å™¨ï¼ˆAutoEncoder, AEï¼‰åˆ™æ˜¯æ— ç›‘ç£å­¦ä¹ çš„â€˜å…¥é—¨ç¥å™¨â€™ã€‚</p>
</blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šåœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œæ— ç›‘ç£å­¦ä¹ æ˜¯å¤„ç†æµ·é‡æ— æ ‡ç­¾æ•°æ®çš„æ ¸å¿ƒæ‰‹æ®µï¼Œè€Œè‡ªç¼–ç å™¨ï¼ˆAutoEncoder, AEï¼‰åˆ™æ˜¯æ— ç›‘ç£å­¦ä¹ çš„â€œå…¥é—¨ç¥å™¨â€ã€‚å®ƒæœ¬è´¨æ˜¯ä¸€ç§â€œç¥ç»ç½‘ç»œç‰ˆPCAâ€ï¼Œä¸ä»…èƒ½å®ç°éçº¿æ€§æ•°æ®é™ç»´ï¼Œè¿˜èƒ½å…¼é¡¾æ•°æ®å»å™ªã€å‹ç¼©ç­‰åŠŸèƒ½ã€‚æœ¬æ–‡å°†ä»é€šä¿—åŸç†å…¥æ‰‹ï¼Œæ‹†è§£AEçš„æ ¸å¿ƒç»“æ„ï¼Œç”¨PyTorchå®ç°å®Œæ•´çš„é™ç»´ä¸å»å™ªå®æˆ˜ï¼Œå¯¹æ¯”AEä¸PCAçš„ä¼˜åŠ£ï¼Œå¹¶æ€»ç»“å·¥ä¸šç•Œå®ç”¨æŠ€å·§ä¸é¢è¯•é«˜é¢‘è€ƒç‚¹ï¼Œè®©ä½ ä»é›¶åƒé€AEã€‚</p>
<p><em>å…³é”®è¯ï¼šè‡ªç¼–ç å™¨, æ— ç›‘ç£å­¦ä¹ , æ•°æ®é™ç»´, PyTorch, PCA, å›¾åƒå»å™ª, ç‰¹å¾å­¦ä¹ </em></p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦è‡ªç¼–ç å™¨ï¼Ÿâ€”â€” æ— æ ‡ç­¾æ•°æ®çš„åˆ©ç”¨éš¾é¢˜</h2>
<p>æˆ‘ä»¬æ—¥å¸¸æ¥è§¦çš„å¾ˆå¤šæ·±åº¦å­¦ä¹ ä»»åŠ¡ï¼ˆå¦‚å›¾åƒåˆ†ç±»ï¼‰éƒ½å±äºâ€œç›‘ç£å­¦ä¹ â€ï¼Œéœ€è¦ä¾èµ–å¤§é‡äººå·¥æ ‡æ³¨çš„æ ‡ç­¾ã€‚ä½†ç°å®ä¸­ï¼Œ80%ä»¥ä¸Šçš„æ•°æ®éƒ½æ˜¯æ— æ ‡ç­¾çš„ï¼ˆæ¯”å¦‚æ‰‹æœºé‡Œçš„éšæ‰‹æ‹ç…§ç‰‡ã€å·¥ä¸šä¼ æ„Ÿå™¨æ•°æ®ã€æœªæ ‡æ³¨çš„æ–‡æœ¬ï¼‰ï¼Œè¿™äº›æ•°æ®ç”¨ç›‘ç£å­¦ä¹ æ— æ³•ç›´æ¥åˆ©ç”¨ã€‚</p>
<p>è‡ªç¼–ç å™¨çš„æ ¸å¿ƒä»·å€¼å°±æ˜¯ï¼š<strong>æ— éœ€ä»»ä½•æ ‡ç­¾ï¼Œä»…é€šè¿‡â€œè¿˜åŸè‡ªèº«â€å°±èƒ½ä»æ•°æ®ä¸­è‡ªåŠ¨æå–æ ¸å¿ƒç‰¹å¾</strong>ã€‚ä¸¾ä¸ªé€šä¿—çš„ä¾‹å­ï¼š</p>
<ul>
<li>æŠŠAEæƒ³è±¡æˆä¸€ä¸ªâ€œæ™ºèƒ½å‹ç¼©è½¯ä»¶â€ï¼šè¾“å…¥ä¸€å¼ 32Ã—32çš„å½©è‰²å›¾åƒï¼ˆ1024ä¸ªåƒç´ ç‚¹ï¼Œé«˜ç»´æ•°æ®ï¼‰ï¼Œå®ƒå…ˆæŠŠå›¾åƒå‹ç¼©æˆ128ç»´çš„â€œç‰¹å¾ä»£ç â€ï¼ˆé™ç»´ï¼‰ï¼Œå†ä»128ç»´ä»£ç è¿˜åŸå›32Ã—32çš„å›¾åƒï¼›</li>
<li>è®­ç»ƒå®Œæˆåï¼Œæˆ‘ä»¬ä¸éœ€è¦â€œè§£å‹â€åŠŸèƒ½ï¼Œåªä¿ç•™â€œå‹ç¼©â€åŠŸèƒ½â€”â€”è¾“å‡ºçš„128ç»´ç‰¹å¾ä»£ç å°±æ˜¯å›¾åƒçš„æ ¸å¿ƒä¿¡æ¯ï¼Œå®ç°äº†ä»1024ç»´åˆ°128ç»´çš„é™ç»´ï¼›</li>
<li>æ›´å…³é”®çš„æ˜¯ï¼ŒAEèƒ½å¤„ç†PCAæä¸å®šçš„â€œéçº¿æ€§æ•°æ®â€ï¼ˆæ¯”å¦‚å¼¯æ›²çš„æœˆäº®æ•°æ®é›†ã€å¤æ‚å›¾åƒï¼‰ï¼Œè¿™ä¹Ÿæ˜¯å®ƒæ¯”ä¼ ç»Ÿé™ç»´æ–¹æ³•æ›´å¼ºå¤§çš„æ ¸å¿ƒåŸå› ã€‚</li>
</ul>
<h2 data-id="heading-1">äºŒã€è‡ªç¼–ç å™¨æ ¸å¿ƒåŸç†ï¼šæ‹†è§£â€œå‹ç¼©+è§£å‹â€çš„é»‘ç›’</h2>
<p>AEçš„ç»“æ„æå…¶ç®€å•ï¼Œæ ¸å¿ƒé€»è¾‘æ˜¯â€œè¾“å…¥=è¾“å‡ºâ€â€”â€”é€šè¿‡è®©æ¨¡å‹å­¦ä¹ â€œè¿˜åŸè¾“å…¥æ•°æ®â€ï¼Œè¢«è¿«æŒ–æ˜æ•°æ®çš„æœ¬è´¨ç‰¹å¾ã€‚æ•´ä½“åˆ†ä¸ºä¸‰å¤§æ¨¡å—ï¼šç¼–ç å™¨ã€Latentç©ºé—´ã€è§£ç å™¨ã€‚</p>
<h3 data-id="heading-2">2.1 æ ¸å¿ƒç»“æ„ï¼šç¼–ç å™¨ï¼ˆEncoderï¼‰+ è§£ç å™¨ï¼ˆDecoderï¼‰</h3>
<p>ä»¥â€œå¤„ç†32Ã—32å½©è‰²å›¾åƒï¼ˆCIFAR-10æ•°æ®é›†ï¼‰â€ä¸ºä¾‹ï¼ŒAEçš„å®Œæ•´ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-text" lang="text">è¾“å…¥å›¾åƒï¼ˆ3é€šé“Ã—32Ã—32ï¼Œå•é€šé“åƒç´ æ•°1024ï¼Œ3é€šé“æ€»ç»´åº¦3072ï¼‰
â†“
ç¼–ç å™¨ï¼ˆEncoderï¼‰ï¼šå·ç§¯å±‚+æ± åŒ–å±‚ â†’ é™ç»´
â†“
Latentå‘é‡ï¼ˆ128ç»´ï¼Œæ ¸å¿ƒç‰¹å¾ï¼‰â€”â€” é™ç»´çš„æ ¸å¿ƒäº§ç‰©
â†“
è§£ç å™¨ï¼ˆDecoderï¼‰ï¼šè½¬ç½®å·ç§¯å±‚ â†’ å‡ç»´
â†“
è¾“å‡ºå›¾åƒï¼ˆ3é€šé“Ã—32Ã—32ï¼Œä¸è¾“å…¥å°ºå¯¸å®Œå…¨ä¸€è‡´ï¼‰
</code></pre>
<h4 data-id="heading-3">â‘  ç¼–ç å™¨ï¼šä»é«˜ç»´æ•°æ®åˆ°æ ¸å¿ƒç‰¹å¾ï¼ˆé™ç»´æ ¸å¿ƒï¼‰</h4>
<p>ç¼–ç å™¨çš„ä½œç”¨æ˜¯â€œæå–æ ¸å¿ƒã€ä¸¢å¼ƒå†—ä½™â€ï¼ŒæŠŠé«˜ç»´åŸå§‹æ•°æ®æ˜ å°„åˆ°ä½ç»´çš„Latentç©ºé—´ï¼ˆLatentå‘é‡ï¼‰ã€‚å¯¹äºå›¾åƒæ•°æ®ï¼Œç¼–ç å™¨é€šå¸¸ç”¨CNNï¼ˆå·ç§¯ç¥ç»ç½‘ç»œï¼‰å®ç°ï¼ˆæ¯”å…¨è¿æ¥å±‚æ›´çœå‚æ•°ã€æ•ˆæœæ›´å¥½ï¼‰ï¼š</p>
<ul>
<li>è¾“å…¥ï¼š3Ã—32Ã—32ï¼ˆ3ä¸ªé¢œè‰²é€šé“ï¼Œå›¾åƒé«˜32ã€å®½32ï¼‰ï¼›</li>
<li>æ ¸å¿ƒæ“ä½œï¼šé€šè¿‡3å±‚å·ç§¯+æ± åŒ–ï¼Œé€æ­¥ç¼©å°å›¾åƒå°ºå¯¸ï¼ˆ32Ã—32â†’16Ã—16â†’8Ã—8â†’4Ã—4ï¼‰ï¼ŒåŒæ—¶å¢åŠ é€šé“æ•°ï¼ˆ3â†’16â†’32â†’64ï¼‰â€”â€” ç¼©å°ç©ºé—´ç»´åº¦ã€æå‡ç‰¹å¾ç»´åº¦ï¼›</li>
<li>è¾“å‡ºï¼šå°†4Ã—4Ã—64çš„ç‰¹å¾å›¾â€œæ‹‰å¹³â€ï¼Œé€šè¿‡å…¨è¿æ¥å±‚è¾“å‡º128ç»´Latentå‘é‡ã€‚</li>
</ul>
<p>é€šä¿—ç†è§£ï¼šç¼–ç å™¨å°±åƒâ€œæç‚¼ç²¾åâ€çš„å·¥å…·ï¼ŒæŠŠä¸€å¼ å›¾åƒçš„æ ¸å¿ƒç‰¹å¾ï¼ˆæ¯”å¦‚è¾¹ç¼˜ã€çº¹ç†ã€å½¢çŠ¶ï¼‰æµ“ç¼©æˆ128ä¸ªæ•°å­—ï¼Œå†—ä½™ä¿¡æ¯ï¼ˆæ¯”å¦‚å¾®å°çš„åƒç´ å™ªå£°ï¼‰åˆ™è¢«ä¸¢å¼ƒã€‚</p>
<h4 data-id="heading-4">â‘¡ è§£ç å™¨ï¼šä»æ ¸å¿ƒç‰¹å¾åˆ°è¿˜åŸæ•°æ®ï¼ˆéªŒè¯é™ç»´æ•ˆæœï¼‰</h4>
<p>è§£ç å™¨çš„ç»“æ„æ˜¯ç¼–ç å™¨çš„â€œé•œåƒâ€ï¼Œä½œç”¨æ˜¯æŠŠä½ç»´çš„Latentå‘é‡è¿˜åŸæˆä¸è¾“å…¥ç»´åº¦å®Œå…¨ä¸€è‡´çš„è¾“å‡ºï¼Œæ ¸å¿ƒæ˜¯â€œå‡ç»´â€ã€‚å¯¹äºå›¾åƒæ•°æ®ï¼Œè§£ç å™¨ç”¨â€œè½¬ç½®å·ç§¯å±‚â€ï¼ˆåå·ç§¯ï¼‰å®ç°ï¼š</p>
<ul>
<li>è¾“å…¥ï¼š128ç»´Latentå‘é‡ï¼›</li>
<li>æ ¸å¿ƒæ“ä½œï¼šé€šè¿‡å…¨è¿æ¥å±‚æŠŠ128ç»´å‘é‡æ˜ å°„æˆ4Ã—4Ã—64çš„ç‰¹å¾å›¾ï¼Œå†é€šè¿‡3å±‚è½¬ç½®å·ç§¯é€æ­¥æ”¾å¤§å°ºå¯¸ï¼ˆ4Ã—4â†’8Ã—8â†’16Ã—16â†’32Ã—32ï¼‰ï¼Œå‡å°‘é€šé“æ•°ï¼ˆ64â†’32â†’16â†’3ï¼‰ï¼›</li>
<li>è¾“å‡ºï¼š3Ã—32Ã—32å›¾åƒï¼Œä¸è¾“å…¥å°ºå¯¸å®Œå…¨ä¸€è‡´ã€‚</li>
</ul>
<p>é€šä¿—ç†è§£ï¼šè§£ç å™¨å°±åƒâ€œæ ¹æ®ç²¾åè¿˜åŸå…¨è²Œâ€çš„å·¥å…·ï¼Œç”¨128ä¸ªæ ¸å¿ƒç‰¹å¾æ•°å­—ï¼Œé‡æ–°â€œç”»â€å‡ºä¸€å¼ å’Œè¾“å…¥ç›¸ä¼¼çš„å›¾åƒã€‚</p>
<h4 data-id="heading-5">â‘¢ Latentç©ºé—´ï¼šAEçš„â€œæ ¸å¿ƒä»·å€¼æ‰€åœ¨â€</h4>
<p>Latentç©ºé—´æ˜¯æ‰€æœ‰Latentå‘é‡æ„æˆçš„æŠ½è±¡ç©ºé—´ï¼Œæ˜¯AEå®ç°é™ç»´ã€ç‰¹å¾è¡¨è¾¾çš„æ ¸å¿ƒï¼š</p>
<ul>
<li>é™ç»´ä¸å‹ç¼©ï¼š-   é™ç»´ä¸å‹ç¼©ï¼šä»ç»´åº¦é€»è¾‘çœ‹ï¼Œç”¨128ç»´Latentå‘é‡æ›¿ä»£å•é€šé“1024ç»´æ•°æ®æ—¶ï¼Œå‹ç¼©ç‡ä¸º87.5%ï¼ˆè®¡ç®—ï¼š(1024-128)/1024Ã—100%ï¼‰ï¼›è‹¥è®¡å…¥3é€šé“ï¼ˆçœŸå®å½©è‰²å›¾åƒç»´åº¦3072ï¼‰ï¼Œåˆ™å‹ç¼©ç‡ä¸º(3072-128)/3072â‰ˆ95.8%ï¼Œå¯è§é€šé“æ•°å®Œå…¨è®¡å…¥ï¼Œ1024ç»´ä»…ä¸ºç®€åŒ–ç†è§£çš„å•é€šé“è¡¨è¿°ï¼›</li>
<li>ç‰¹å¾è¡¨è¾¾ï¼šç›¸ä¼¼æ•°æ®çš„Latentå‘é‡åœ¨ç©ºé—´ä¸­ä¼šâ€œèšåœ¨ä¸€èµ·â€ï¼ˆæ¯”å¦‚çŒ«çš„å›¾åƒå’Œç‹—çš„å›¾åƒä¼šå½¢æˆä¸¤ä¸ªä¸åŒçš„ç°‡ï¼‰ï¼›</li>
<li>ç”ŸæˆåŸºç¡€ï¼šåç»­çš„å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVAEï¼‰ã€ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANï¼‰ï¼Œéƒ½ä¾èµ–äºå¯¹Latentç©ºé—´çš„å­¦ä¹ ã€‚</li>
</ul>
<h3 data-id="heading-6">2.2 è®­ç»ƒé€»è¾‘ï¼šè®©æ¨¡å‹â€œå­¦ä¼šè¿˜åŸè‡ªå·±â€</h3>
<p>AEçš„è®­ç»ƒæå…¶ç®€å•ï¼Œæ ¸å¿ƒæ˜¯â€œç”¨è¾“å…¥å½“æ ‡ç­¾â€â€”â€”ä¸éœ€è¦ä»»ä½•é¢å¤–æ ‡æ³¨ï¼Œå…¨ç¨‹æ— ç›‘ç£ï¼š</p>
<ol>
<li>è¾“å…¥ï¼šä¸€å¼ 32Ã—32çš„å½©è‰²å›¾åƒXï¼›</li>
<li>å‰å‘ä¼ æ’­ï¼šXâ†’ç¼–ç å™¨â†’Latentå‘é‡zâ†’è§£ç å™¨â†’è¾“å‡ºå›¾åƒXÌ‚ï¼ˆè¿˜åŸå›¾ï¼‰ï¼›</li>
<li>æŸå¤±å‡½æ•°ï¼šè®¡ç®—Xï¼ˆåŸå›¾ï¼‰å’ŒXÌ‚ï¼ˆè¿˜åŸå›¾ï¼‰çš„å·®å¼‚ï¼Œå¸¸ç”¨MSEï¼ˆå‡æ–¹è¯¯å·®ï¼‰â€”â€”å·®å¼‚è¶Šå°ï¼Œè¯´æ˜â€œå‹ç¼©+è§£å‹â€æ•ˆæœè¶Šå¥½ï¼›</li>
<li>åå‘ä¼ æ’­ï¼šé€šè¿‡æ¢¯åº¦ä¸‹é™æœ€å°åŒ–MSEæŸå¤±ï¼ŒåŒæ­¥ä¼˜åŒ–ç¼–ç å™¨å’Œè§£ç å™¨çš„å‚æ•°ã€‚</li>
</ol>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®æé†’</strong>ï¼šè®­ç»ƒAEçš„ç›®æ ‡æ˜¯â€œè¿˜åŸç²¾åº¦â€ï¼Œä½†Latentå‘é‡çš„é™ç»´æ•ˆæœå’Œâ€œLatentç»´åº¦â€å¼ºç›¸å…³â€”â€”ç»´åº¦å¤ªå¤§ï¼ˆæ¯”å¦‚å’Œè¾“å…¥ç»´åº¦ä¸€è‡´ï¼‰ï¼Œæ¨¡å‹ä¸ç”¨å­¦ç‰¹å¾å°±èƒ½å®Œç¾è¿˜åŸï¼›ç»´åº¦å¤ªå°ï¼ˆæ¯”å¦‚10ç»´ï¼‰ï¼Œè¿˜åŸç²¾åº¦ä¼šå¤§å¹…ä¸‹é™ã€‚å»ºè®®Latentç»´åº¦è®¾ä¸ºè¾“å…¥ç»´åº¦çš„10%~20%ï¼ˆå¦‚1024ç»´è¾“å…¥â†’128ç»´Latentï¼‰ã€‚</p>
</blockquote>
<h3 data-id="heading-7">2.3 AEçš„æ ¸å¿ƒåº”ç”¨åœºæ™¯ï¼ˆä¸æ­¢é™ç»´ï¼‰</h3>
<p>è®­ç»ƒå¥½AEåï¼Œé™¤äº†ç”¨ç¼–ç å™¨åšé™ç»´ï¼Œè¿˜æœ‰3ä¸ªé«˜é¢‘å®ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>âœ… å›¾åƒå»å™ªï¼šç»™è¾“å…¥å›¾åƒåŠ é«˜æ–¯å™ªå£°ï¼Œè®©AEå­¦ä¹ â€œä»å™ªå£°å›¾è¿˜åŸæ¸…æ™°å›¾â€â€”â€”è§£ç å™¨ä¼šè‡ªåŠ¨è¿‡æ»¤å™ªå£°ï¼›</li>
<li>âœ… æ•°æ®å‹ç¼©ï¼šç”¨ç¼–ç å™¨æŠŠæ•°æ®å‹ç¼©æˆLatentå‘é‡å­˜å‚¨ï¼Œéœ€è¦æ—¶ç”¨è§£ç å™¨è¿˜åŸï¼Œæ¯”JPGã€PNGç­‰ä¼ ç»Ÿå‹ç¼©ç®—æ³•æ›´æ™ºèƒ½ï¼ˆå°¤å…¶é€‚åˆå¤æ‚å›¾åƒï¼‰ï¼›</li>
<li>âœ… ç‰¹å¾é¢„è®­ç»ƒï¼šç”¨æ— æ ‡ç­¾æ•°æ®è®­ç»ƒAEï¼ŒæŠŠç¼–ç å™¨ä½œä¸ºâ€œç‰¹å¾æå–å™¨â€ï¼Œåç»­æ¥åˆ†ç±»å™¨åšç›‘ç£å­¦ä¹ ï¼ˆè¿ç§»å­¦ä¹ ï¼‰â€”â€”é€‚åˆæ ‡ç­¾æ•°æ®å°‘çš„åœºæ™¯ã€‚</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€PyTorchå®æˆ˜ï¼šAEå®ç°æ•°æ®é™ç»´ä¸å›¾åƒå»å™ª</h2>
<p>æœ¬èŠ‚ç”¨CIFAR-10æ•°æ®é›†åšä¸¤ä¸ªæ ¸å¿ƒå®æˆ˜ï¼šâ‘  åŸºç¡€AEå®ç°å›¾åƒé™ç»´ä¸è¿˜åŸï¼›â‘¡ å»å™ªAEå®ç°å™ªå£°å›¾åƒè¿˜åŸã€‚ä»£ç å¯ç›´æ¥å¤åˆ¶è¿è¡Œï¼Œå«è¯¦ç»†æ³¨é‡Šå’Œå¯è§†åŒ–æ­¥éª¤ã€‚</p>
<h3 data-id="heading-9">3.1 å®æˆ˜1ï¼šåŸºç¡€AEï¼ˆæ ¸å¿ƒç›®æ ‡ï¼šæ•°æ®é™ç»´ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn
<span class="hljs-keyword">import</span> torch.optim <span class="hljs-keyword">as</span> optim
<span class="hljs-keyword">import</span> torchvision
<span class="hljs-keyword">import</span> torchvision.transforms <span class="hljs-keyword">as</span> transforms
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># ========== 1. ç¯å¢ƒé…ç½®ä¸æ•°æ®å‡†å¤‡ ==========</span>
device = torch.device(<span class="hljs-string">"cuda:0"</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">"cpu"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½¿ç”¨è®¾å¤‡ï¼š<span class="hljs-subst">{device}</span>"</span>)

<span class="hljs-comment"># è¶…å‚æ•°è®¾ç½®</span>
batch_size = <span class="hljs-number">128</span>  <span class="hljs-comment"># æ‰¹æ¬¡å¤§å°</span>
epochs = <span class="hljs-number">100</span>       <span class="hljs-comment"># è®­ç»ƒè½®æ•°</span>
lr = <span class="hljs-number">1e-3</span>         <span class="hljs-comment"># å­¦ä¹ ç‡ï¼ˆAEç”¨Adamä¼˜åŒ–å™¨æ›´ç¨³å®šï¼‰</span>
latent_dim = <span class="hljs-number">128</span>  <span class="hljs-comment"># Latentå‘é‡ç»´åº¦ï¼ˆé™ç»´åçš„ç»´åº¦ï¼‰</span>

<span class="hljs-comment"># æ•°æ®é¢„å¤„ç†ï¼ˆä»…å½’ä¸€åŒ–ï¼Œä¸åšå¢å¼ºï¼Œä¿è¯è¿˜åŸæ•ˆæœï¼‰</span>
transform = transforms.Compose([
    transforms.ToTensor(),  
])

<span class="hljs-comment"># åŠ è½½CIFAR-10ï¼ˆæ— ç›‘ç£å­¦ä¹ ï¼Œæ— éœ€æµ‹è¯•é›†æ ‡ç­¾ï¼‰</span>
trainset = torchvision.datasets.CIFAR10(
    root=<span class="hljs-string">'./data'</span>, train=<span class="hljs-literal">True</span>, download=<span class="hljs-literal">True</span>, transform=transform
)
trainloader = torch.utils.data.DataLoader(
    trainset, batch_size=batch_size, shuffle=<span class="hljs-literal">True</span>, num_workers=<span class="hljs-number">2</span>
)

<span class="hljs-comment"># ========== 2. å®šä¹‰åŸºç¡€AEæ¨¡å‹ ==========</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicAE</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, latent_dim</span>):
        <span class="hljs-built_in">super</span>(BasicAE, self).__init__()
        self.latent_dim = latent_dim
        
        <span class="hljs-comment"># ç¼–ç å™¨ï¼š3Ã—32Ã—32 â†’ 128ç»´Latentå‘é‡</span>
        self.encoder = nn.Sequential(
            <span class="hljs-comment"># å·ç§¯å±‚1ï¼š3â†’16ï¼Œ32Ã—32â†’16Ã—16ï¼ˆæ± åŒ–ä¸‹é‡‡æ ·ï¼‰</span>
            nn.Conv2d(<span class="hljs-number">3</span>, <span class="hljs-number">16</span>, kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">1</span>),
            nn.ReLU(),  <span class="hljs-comment"># æ¿€æ´»å‡½æ•°ï¼Œå¼•å…¥éçº¿æ€§</span>
            nn.MaxPool2d(kernel_size=<span class="hljs-number">2</span>, stride=<span class="hljs-number">2</span>),  <span class="hljs-comment"># ä¸‹é‡‡æ ·ï¼šå°ºå¯¸å‡åŠ</span>
            
            <span class="hljs-comment"># å·ç§¯å±‚2ï¼š16â†’32ï¼Œ16Ã—16â†’8Ã—8</span>
            nn.Conv2d(<span class="hljs-number">16</span>, <span class="hljs-number">32</span>, kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">1</span>),
            nn.ReLU(),
            nn.MaxPool2d(kernel_size=<span class="hljs-number">2</span>, stride=<span class="hljs-number">2</span>),
            
            <span class="hljs-comment"># å·ç§¯å±‚3ï¼š32â†’64ï¼Œ8Ã—8â†’4Ã—4</span>
            nn.Conv2d(<span class="hljs-number">32</span>, <span class="hljs-number">64</span>, kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">1</span>),
            nn.ReLU(),
            nn.MaxPool2d(kernel_size=<span class="hljs-number">2</span>, stride=<span class="hljs-number">2</span>),
            
            <span class="hljs-comment"># å…¨è¿æ¥å±‚ï¼š4Ã—4Ã—64 â†’ 128ç»´</span>
            nn.Flatten(),  <span class="hljs-comment"># æ‹‰å¹³ï¼š(batch, 64*4*4)</span>
            nn.Linear(<span class="hljs-number">64</span> * <span class="hljs-number">4</span> * <span class="hljs-number">4</span>, latent_dim)
        )
        
        <span class="hljs-comment"># è§£ç å™¨ï¼š128ç»´ â†’ 3Ã—32Ã—32</span>
        self.decoder = nn.Sequential(
            <span class="hljs-comment"># å…¨è¿æ¥å±‚ï¼š128 â†’ 64Ã—4Ã—4</span>
            nn.Linear(latent_dim, <span class="hljs-number">64</span> * <span class="hljs-number">4</span> * <span class="hljs-number">4</span>),
            nn.ReLU(),
            nn.Unflatten(<span class="hljs-number">1</span>, (<span class="hljs-number">64</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>)),  <span class="hljs-comment"># reshapeä¸ºç‰¹å¾å›¾æ ¼å¼</span>
            
            <span class="hljs-comment"># è½¬ç½®å·ç§¯å±‚1ï¼š64â†’32ï¼Œ4Ã—4â†’8Ã—8ï¼ˆä¸Šé‡‡æ ·ï¼‰</span>
            nn.ConvTranspose2d(<span class="hljs-number">64</span>, <span class="hljs-number">32</span>, kernel_size=<span class="hljs-number">2</span>, stride=<span class="hljs-number">2</span>, padding=<span class="hljs-number">0</span>),
            nn.ReLU(),
            
            <span class="hljs-comment"># è½¬ç½®å·ç§¯å±‚2ï¼š32â†’16ï¼Œ8Ã—8â†’16Ã—16</span>
            nn.ConvTranspose2d(<span class="hljs-number">32</span>, <span class="hljs-number">16</span>, kernel_size=<span class="hljs-number">2</span>, stride=<span class="hljs-number">2</span>, padding=<span class="hljs-number">0</span>),
            nn.ReLU(),
            
            <span class="hljs-comment"># è½¬ç½®å·ç§¯å±‚3ï¼š16â†’3ï¼Œ16Ã—16â†’32Ã—32</span>
            nn.ConvTranspose2d(<span class="hljs-number">16</span>, <span class="hljs-number">3</span>, kernel_size=<span class="hljs-number">2</span>, stride=<span class="hljs-number">2</span>, padding=<span class="hljs-number">0</span>),
            nn.Sigmoid()  <span class="hljs-comment"># è¾“å‡ºå½’ä¸€åˆ°0~1ï¼Œä¸è¾“å…¥å›¾åƒèŒƒå›´åŒ¹é…</span>
        )
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-comment"># å‰å‘ä¼ æ’­ï¼šè¾“å…¥â†’ç¼–ç â†’è§£ç </span>
        z = self.encoder(x)  <span class="hljs-comment"># ç¼–ç å¾—åˆ°Latentå‘é‡</span>
        x_hat = self.decoder(z)  <span class="hljs-comment"># è§£ç å¾—åˆ°è¿˜åŸå›¾</span>
        <span class="hljs-keyword">return</span> x_hat, z

<span class="hljs-comment"># ========== 3. åˆå§‹åŒ–æ¨¡å‹ã€ä¼˜åŒ–å™¨ã€æŸå¤±å‡½æ•° ==========</span>
model = BasicAE(latent_dim=latent_dim).to(device)
criterion = nn.MSELoss()  <span class="hljs-comment"># è¿˜åŸä»»åŠ¡ç”¨MSEæŸå¤±</span>
optimizer = optim.Adam(model.parameters(), lr=lr)  <span class="hljs-comment"># Adamä¼˜åŒ–å™¨æ”¶æ•›å¿«</span>

<span class="hljs-comment"># ========== 4. è®­ç»ƒåŸºç¡€AE ==========</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">train_ae</span>(<span class="hljs-params">model, trainloader, criterion, optimizer, epochs, device</span>):
    model.train()  <span class="hljs-comment"># åˆ‡æ¢åˆ°è®­ç»ƒæ¨¡å¼</span>
    loss_history = []  <span class="hljs-comment"># è®°å½•è®­ç»ƒæŸå¤±</span>
    
    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):
        running_loss = <span class="hljs-number">0.0</span>
        <span class="hljs-keyword">for</span> i, (inputs, _) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(trainloader):  <span class="hljs-comment"># æ— ç›‘ç£ï¼šå¿½ç•¥æ ‡ç­¾</span>
            inputs = inputs.to(device)  
            
            <span class="hljs-comment"># å‰å‘ä¼ æ’­ï¼šç”Ÿæˆè¿˜åŸå›¾</span>
            outputs, _ = model(inputs)
            <span class="hljs-comment"># è®¡ç®—æŸå¤±ï¼šåŸå›¾ä¸è¿˜åŸå›¾çš„MSE</span>
            loss = criterion(outputs, inputs)
            
            <span class="hljs-comment"># åå‘ä¼ æ’­+å‚æ•°æ›´æ–°</span>
            optimizer.zero_grad()  <span class="hljs-comment"># æ¸…ç©ºæ¢¯åº¦</span>
            loss.backward()  <span class="hljs-comment"># è®¡ç®—æ¢¯åº¦</span>
            optimizer.step()  <span class="hljs-comment"># æ›´æ–°å‚æ•°</span>
            
            running_loss += loss.item()
        
        epoch_loss = running_loss / <span class="hljs-built_in">len</span>(trainloader)
        loss_history.append(epoch_loss)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Epoch [<span class="hljs-subst">{epoch+<span class="hljs-number">1</span>}</span>/<span class="hljs-subst">{epochs}</span>], MSE Loss: <span class="hljs-subst">{epoch_loss:<span class="hljs-number">.4</span>f}</span>"</span>)
    <span class="hljs-keyword">return</span> loss_history

<span class="hljs-comment"># å¼€å§‹è®­ç»ƒ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n===== å¼€å§‹è®­ç»ƒåŸºç¡€AEï¼ˆé™ç»´ä»»åŠ¡ï¼‰====="</span>)
loss_history = train_ae(model, trainloader, criterion, optimizer, epochs, device)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eeb0415208db4f13baed2fb6d3f54820~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p-g5p-g6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769278073&amp;x-signature=Z%2BUBvBUi5lKAIji8Ibs7xTCr7fA%3D" alt="basic_ae_results.png" loading="lazy"/></p>
<h3 data-id="heading-10">3.2 å®æˆ˜2ï¼šå»å™ªAEï¼ˆæ ¸å¿ƒç›®æ ‡ï¼šé™ç»´+å»å™ªï¼‰</h3>
<p>å»å™ªAEæ˜¯åŸºç¡€AEçš„å˜ç§ï¼Œæ ¸å¿ƒé€»è¾‘æ˜¯â€œç»™è¾“å…¥åŠ å™ªå£°ï¼Œè®©æ¨¡å‹è¿˜åŸæ¸…æ™°å›¾â€â€”â€”è®­ç»ƒæ—¶è¾“å…¥æ˜¯å™ªå£°å›¾ï¼Œæ ‡ç­¾æ˜¯æ¸…æ™°å›¾ï¼Œæ¨¡å‹ä¼šè‡ªåŠ¨å­¦ä¹ â€œåŒºåˆ†å™ªå£°å’Œæœ‰æ•ˆç‰¹å¾â€ï¼Œæœ€ç»ˆå®ç°â€œé™ç»´+å»å™ªâ€åŒé‡æ•ˆæœã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å»¶ç»­åŸºç¡€AEçš„ç¯å¢ƒé…ç½®ï¼Œä»…ä¿®æ”¹è®­ç»ƒé€»è¾‘å’Œè¾“å…¥</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DenoisingAE</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, latent_dim</span>):
        <span class="hljs-built_in">super</span>(DenoisingAE, self).__init__()
        self.encoder = BasicAE(latent_dim).encoder
        self.decoder = BasicAE(latent_dim).decoder
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        z = self.encoder(x)
        x_hat = self.decoder(z)
        <span class="hljs-keyword">return</span> x_hat, z

<span class="hljs-comment"># å®šä¹‰æ·»åŠ é«˜æ–¯å™ªå£°çš„å‡½æ•°ï¼ˆæ¨¡æ‹Ÿå™ªå£°å›¾åƒï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_gaussian_noise</span>(<span class="hljs-params">x, mean=<span class="hljs-number">0.0</span>, std=<span class="hljs-number">0.1</span></span>):
    <span class="hljs-comment"># ç”Ÿæˆä¸è¾“å…¥åŒå½¢çŠ¶çš„é«˜æ–¯å™ªå£°</span>
    noise = torch.randn_like(x) * std + mean
    x_noisy = x + noise
    <span class="hljs-keyword">return</span> torch.clamp(x_noisy, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>)  <span class="hljs-comment"># é™åˆ¶åƒç´ å€¼åœ¨0~1èŒƒå›´å†…</span>

<span class="hljs-comment"># ========== åˆå§‹åŒ–å»å™ªAEå¹¶è®­ç»ƒ ==========</span>
denoise_model = DenoisingAE(latent_dim=latent_dim).to(device)
denoise_optimizer = optim.Adam(denoise_model.parameters(), lr=lr)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">train_denoise_ae</span>(<span class="hljs-params">model, trainloader, criterion, optimizer, epochs, device</span>):
    model.train()
    loss_history = []
    
    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):
        running_loss = <span class="hljs-number">0.0</span>
        <span class="hljs-keyword">for</span> i, (inputs, _) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(trainloader):
            inputs = inputs.to(device)
            <span class="hljs-comment"># å…³é”®æ­¥éª¤ï¼šç»™è¾“å…¥å›¾åƒæ·»åŠ é«˜æ–¯å™ªå£°</span>
            inputs_noisy = add_gaussian_noise(inputs)
            
            <span class="hljs-comment"># å‰å‘ä¼ æ’­ï¼šå™ªå£°å›¾â†’è¿˜åŸå›¾</span>
            outputs, _ = model(inputs_noisy)
            loss = criterion(outputs, inputs)
            optimizer.zero_grad()
            loss.backward()
            optimizer.step()
            
            running_loss += loss.item()
        
        epoch_loss = running_loss / <span class="hljs-built_in">len</span>(trainloader)
        loss_history.append(epoch_loss)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å»å™ªAE Epoch [<span class="hljs-subst">{epoch+<span class="hljs-number">1</span>}</span>/<span class="hljs-subst">{epochs}</span>], MSE Loss: <span class="hljs-subst">{epoch_loss:<span class="hljs-number">.4</span>f}</span>"</span>)
    
    <span class="hljs-keyword">return</span> loss_history

<span class="hljs-comment"># å¼€å§‹è®­ç»ƒ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n===== å¼€å§‹è®­ç»ƒå»å™ªAE ====="</span>)
denoise_loss_history = train_denoise_ae(
    denoise_model, trainloader, criterion, denoise_optimizer, epochs, device
)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/727264cd90d54da78ec0dc3cd5b5d7a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p-g5p-g6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769278073&amp;x-signature=614YZWxLPJCnnIKdKiu8eFrXhZM%3D" alt="denoise_ae_results.png" loading="lazy"/></p>
<h3 data-id="heading-11">3.3 å®æˆ˜å…³é”®æ³¨æ„äº‹é¡¹ï¼ˆæ–°æ‰‹é¿å‘ï¼‰</h3>
<ol>
<li>æ¨¡å‹ç»“æ„å¯¹ç§°ï¼šç¼–ç å™¨ä¸‹é‡‡æ ·å¤šå°‘æ¬¡ï¼ˆå¦‚3æ¬¡ï¼‰ï¼Œè§£ç å™¨å°±è¦ä¸Šé‡‡æ ·å¤šå°‘æ¬¡ï¼ˆå¦‚3æ¬¡è½¬ç½®å·ç§¯ï¼‰ï¼Œå¦åˆ™è¾“å‡ºå°ºå¯¸ä¼šå’Œè¾“å…¥ä¸åŒ¹é…ï¼›</li>
<li>æ¿€æ´»å‡½æ•°é€‰æ‹©ï¼šç¼–ç å™¨ç”¨ReLUï¼ˆæå–ç‰¹å¾æ›´é«˜æ•ˆï¼‰ï¼Œè§£ç å™¨æœ€åç”¨Sigmoidï¼ˆæŠŠè¾“å‡ºå½’ä¸€åˆ°0~1ï¼Œä¸è¾“å…¥å›¾åƒèŒƒå›´åŒ¹é…ï¼‰ï¼›</li>
<li>å»å™ªAEæ ¸å¿ƒï¼šè®­ç»ƒæ—¶è¾“å…¥æ˜¯â€œå™ªå£°å›¾â€ï¼Œä½†æŸå¤±è®¡ç®—çš„æ ‡ç­¾æ˜¯â€œæ¸…æ™°åŸå›¾â€â€”â€”æ¨¡å‹å¿…é¡»å­¦ä¹ â€œè¿‡æ»¤å™ªå£°â€ï¼Œè€Œéè¿˜åŸå™ªå£°ï¼›</li>
<li>Latentç»´åº¦è°ƒæ•´ï¼šè¿˜åŸç²¾åº¦å·®å°±å¢å¤§ç»´åº¦ï¼ˆå¦‚128â†’256ï¼‰ï¼Œæƒ³æ›´å¼ºé™ç»´å°±å‡å°ç»´åº¦ï¼ˆå¦‚128â†’64ï¼‰ï¼›</li>
</ol>
<h2 data-id="heading-12">å››ã€AE vs PCAï¼šä¸ºä»€ä¹ˆAEæ˜¯â€œç¥ç»ç½‘ç»œç‰ˆPCAâ€ï¼Ÿ</h2>
<p>PCAï¼ˆä¸»æˆåˆ†åˆ†æï¼‰æ˜¯ä¼ ç»Ÿçº¿æ€§é™ç»´çš„ç»å…¸æ–¹æ³•ï¼Œè€ŒAEæ˜¯ç¥ç»ç½‘ç»œå®ç°çš„éçº¿æ€§é™ç»´â€”â€”ä¸¤è€…æ ¸å¿ƒç›®æ ‡éƒ½æ˜¯é™ç»´ï¼Œä½†é€‚ç”¨åœºæ™¯å’Œæ•ˆæœæœ‰æœ¬è´¨åŒºåˆ«ã€‚ç”¨è¡¨æ ¼æ¸…æ™°å¯¹æ¯”ï¼š</p>



































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>PCAï¼ˆä¸»æˆåˆ†åˆ†æï¼‰</th><th>è‡ªç¼–ç å™¨ï¼ˆAEï¼‰</th></tr></thead><tbody><tr><td>æ ¸å¿ƒåŸç†</td><td>çº¿æ€§å˜æ¢ï¼šæ‰¾æ•°æ®æ–¹å·®æœ€å¤§çš„æ–¹å‘ï¼ˆä¸»æˆåˆ†ï¼‰</td><td>éçº¿æ€§å˜æ¢ï¼šç”¨ç¥ç»ç½‘ç»œå­¦ä¹ å¤æ‚ç‰¹å¾æ˜ å°„</td></tr><tr><td>é™ç»´èƒ½åŠ›</td><td>ä»…èƒ½å¤„ç†çº¿æ€§å¯åˆ†æ•°æ®ï¼Œå¤æ‚æ•°æ®ï¼ˆå¦‚å¼¯æ›²æœˆäº®ï¼‰å¤±æ•ˆ</td><td>å¯å¤„ç†ä»»æ„éçº¿æ€§æ•°æ®ï¼Œé€‚ç”¨å›¾åƒã€æ–‡æœ¬ç­‰å¤æ‚åœºæ™¯</td></tr><tr><td>é¢å¤–åŠŸèƒ½</td><td>ä»…èƒ½é™ç»´ï¼Œæ— å…¶ä»–ç”¨é€”</td><td>å¯å®ç°å»å™ªã€å‹ç¼©ã€ç‰¹å¾é¢„è®­ç»ƒã€ç”Ÿæˆï¼ˆè¿›é˜¶ï¼‰</td></tr><tr><td>è®¡ç®—æˆæœ¬</td><td>ä½ï¼ˆçŸ©é˜µåˆ†è§£ï¼ŒPython/MATLABä¸€è¡Œä»£ç æå®šï¼‰</td><td>é«˜ï¼ˆéœ€è®­ç»ƒç¥ç»ç½‘ç»œï¼Œè€—GPUèµ„æºï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç®€å•è¡¨æ ¼æ•°æ®ã€å¿«é€Ÿé™ç»´ã€ baseline å¯¹æ¯”</td><td>å¤æ‚æ•°æ®ï¼ˆå›¾åƒ/æ–‡æœ¬ï¼‰ã€éœ€è¦å»å™ª/å‹ç¼©ã€æ·±åº¦å­¦ä¹ å‰ç½®ä»»åŠ¡</td></tr></tbody></table>
<p>å®ç”¨å»ºè®®ï¼šå®é™…å·¥ä½œä¸­ï¼Œå…ˆç”¨æ°´PCAåšå¿«é€Ÿæ•°æ®æ¢ç´¢ï¼ˆæ¯”å¦‚çœ‹å‰ä¸¤ä¸ªä¸»æˆåˆ†çš„åˆ†å¸ƒï¼‰ï¼Œå¦‚æœæ•ˆæœä¸å¥½ï¼ˆå¦‚èšç±»ä¸æ˜æ˜¾ï¼‰ï¼Œå†ç”¨AEåšéçº¿æ€§é™ç»´â€”â€”ä¸¤è€…ç»“åˆï¼Œæ•ˆç‡æœ€é«˜ï¼</p>
<h2 data-id="heading-13">äº”ã€é¢è¯•é«˜é¢‘é—®é¢˜+æ ‡å‡†ç­”æ¡ˆï¼ˆé¿å‘æŒ‡å—ï¼‰</h2>
<h3 data-id="heading-14">Q1ï¼šAEä¸ºä»€ä¹ˆå±äºæ— ç›‘ç£å­¦ä¹ ï¼Ÿå®ƒçš„â€œæ ‡ç­¾â€æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ç­”ï¼šå› ä¸ºAEä¸éœ€è¦é¢å¤–çš„äººå·¥æ ‡æ³¨æ ‡ç­¾ï¼ˆå¦‚â€œçŒ«â€â€œç‹—â€ï¼‰ï¼Œå®ƒçš„â€œæ ‡ç­¾â€å°±æ˜¯è¾“å…¥æ•°æ®æœ¬èº«â€”â€”è®­ç»ƒç›®æ ‡æ˜¯è®©è¾“å‡ºè¿˜åŸè¾“å…¥ï¼Œæœ¬è´¨æ˜¯â€œè‡ªæˆ‘ç›‘ç£â€ï¼Œå±äºæ— ç›‘ç£å­¦ä¹ èŒƒç•´ã€‚</p>
<h3 data-id="heading-15">Q2ï¼šä¸ºä»€ä¹ˆAEçš„è§£ç å™¨æœ€åè¦ç”¨Sigmoidï¼Œè€ŒéReLUï¼Ÿ</h3>
<p>ç­”ï¼šè¾“å…¥å›¾åƒçš„åƒç´ å€¼ï¼ˆç»å½’ä¸€åŒ–åï¼‰èŒƒå›´æ˜¯0~1ï¼ŒSigmoidçš„è¾“å‡ºèŒƒå›´æ­£å¥½æ˜¯0~1ï¼Œèƒ½è®©è§£ç å™¨è¾“å‡ºä¸è¾“å…¥åŒ¹é…ï¼›è€ŒReLUè¾“å‡ºèŒƒå›´æ˜¯0~+âˆï¼Œä¼šå¯¼è‡´åƒç´ å€¼è¶…å‡ºåˆç†èŒƒå›´ï¼ŒMSEæŸå¤±æ— æ³•æœ‰æ•ˆä¸‹é™ã€‚</p>
<h3 data-id="heading-16">Q3ï¼šç”¨AEåšé™ç»´æ—¶ï¼ŒLatentç»´åº¦æ€ä¹ˆé€‰ï¼Ÿ</h3>
<p>ç­”ï¼šæ— å›ºå®šæ ‡å‡†ï¼Œæ ¸å¿ƒæ˜¯â€œå¹³è¡¡é™ç»´æ¯”ä¾‹å’Œè¿˜åŸç²¾åº¦â€ï¼š</p>
<ul>
<li>ç»éªŒå€¼ï¼šLatentç»´åº¦ = è¾“å…¥ç»´åº¦ Ã— 10%~20%ï¼ˆå¦‚1024ç»´è¾“å…¥â†’128ç»´ï¼‰ï¼›</li>
<li>å®é™…æ“ä½œï¼šä»ç»éªŒå€¼èµ·æ­¥ï¼Œè¿˜åŸç²¾åº¦å·®åˆ™å¢å¤§ç»´åº¦ï¼Œé™ç»´æ•ˆæœå·®åˆ™å‡å°ç»´åº¦ã€‚</li>
</ul>
<h2 data-id="heading-17">ğŸ“Œ ä¸‹æœŸé¢„å‘Š</h2>
<p>æˆ‘ä»¬å·²ç»æå®šäº†ç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ çš„å…¥é—¨ï¼Œä¸‹ä¸€ç¯‡å°†è¿›å…¥æ›´æœ‰è¶£çš„â€œç”Ÿæˆå¼æ¨¡å‹â€é¢†åŸŸâ€”â€”ç”¨å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVAEï¼‰ç”Ÿæˆå…¨æ–°çš„å›¾åƒï¼ä½ ä¼šå‘ç°ï¼ŒåŸæ¥AIä¸ä»…èƒ½â€œå­¦ä¹ æ•°æ®â€ï¼Œè¿˜èƒ½â€œåˆ›é€ æ•°æ®â€â€”â€”æ¯”å¦‚ç”Ÿæˆä¸å­˜åœ¨çš„CIFAR-10é£æ ¼å›¾åƒï¼Œç”šè‡³è‡ªå®šä¹‰å›¾åƒé£æ ¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»ºAIæ™ºèƒ½ä½“ï¼šå…«åä¸ƒã€KMä¸Chinchillaæ³•åˆ™ï¼šAIæ¨¡å‹å‘å±•çš„ä¸¤ç§è®­ç»ƒæ³•åˆ™å®Œå…¨è§£æ]]></title>    <link>https://juejin.cn/post/7596092713079832612</link>    <guid>https://juejin.cn/post/7596092713079832612</guid>    <pubDate>2026-01-18T01:13:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596092713079832612" data-draft-id="7595150851478143019" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»ºAIæ™ºèƒ½ä½“ï¼šå…«åä¸ƒã€KMä¸Chinchillaæ³•åˆ™ï¼šAIæ¨¡å‹å‘å±•çš„ä¸¤ç§è®­ç»ƒæ³•åˆ™å®Œå…¨è§£æ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LLM,Python"/> <meta itemprop="datePublished" content="2026-01-18T01:13:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å½¼å²¸èŠ±å¼€äº†å—"/> <meta itemprop="url" content="https://juejin.cn/user/4153315734334538"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»ºAIæ™ºèƒ½ä½“ï¼šå…«åä¸ƒã€KMä¸Chinchillaæ³•åˆ™ï¼šAIæ¨¡å‹å‘å±•çš„ä¸¤ç§è®­ç»ƒæ³•åˆ™å®Œå…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4153315734334538/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å½¼å²¸èŠ±å¼€äº†å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T01:13:44.000Z" title="Sun Jan 18 2026 01:13:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>å¤§æ¨¡å‹çš„æµªæ½®å¦‚ç«å¦‚è¼ï¼Œä½†åšä¸ºä¸ªäººå¼€å‘è€…å’Œå°ä¼ä¸šçš„æˆ‘ä»¬ï¼Œä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰é¢ä¸´è¿™æ ·çš„å›°å¢ƒï¼šæœ‰é™çš„ç®—åŠ›é¢„ç®—å¦‚åŒæ¯æ°´è½¦è–ªï¼Œæ˜¯è¯¥è®­ç»ƒä¸€ä¸ªå‚æ•°æ›´å¤šçš„èªæ˜æ¨¡å‹ï¼Œè¿˜æ˜¯ç”¨æ›´å¤šæ•°æ®å–‚å…»ä¸€ä¸ªè§å¤šè¯†å¹¿çš„æ¨¡å‹ï¼Œå¾€å¾€è®­ç»ƒä¸€ä¸ªå¤§ä½“é‡çš„æ¨¡å‹ï¼Œéœ€è¦è€—è´¹å¤§é‡çš„èµ„é‡‘å’Œæ—¶é—´ï¼Œè€Œä½œä¸ºæ™®é€šç”¨æˆ·çš„æˆ‘ä»¬ï¼Œå¦‚æœæƒ³è®­ç»ƒä¸€ä¸ªè‡ªå·±çš„æ¨¡å‹ï¼Œåœ¨æˆ‘ä»¬å›ºå®šçš„è®¡ç®—é¢„ç®—ä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥è®­ç»ƒä¸€ä¸ªå¤šå¤§çš„æ¨¡å‹å‚æ•°é‡ï¼Ÿå¹¶ç”¨å¤šå°‘æ•°æ®ï¼Ÿå¦‚ä½•é«˜æ•ˆåœ°åˆ†é…è®¡ç®—èµ„æºæˆä¸ºæ¨¡å‹è®­ç»ƒçš„æ ¸å¿ƒé—®é¢˜ï¼</p>
<p>æ‰©å±•æ³•åˆ™å°±æ˜¯ä¸ºäº†ç§‘å­¦åœ°å›ç­”è¿™ä¸ªé—®é¢˜è€Œç”Ÿçš„ï¼Œä¹Ÿæ­£æ˜¯ç ´è§£è¿™ä¸€éš¾é¢˜ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ç²¾ç»†åŒ–çš„æŒ‡å¯¼æ€è·¯ï¼Œå®ƒä»¬æ˜¯åŸºäºå¤§é‡å®éªŒå¾—å‡ºçš„ç»éªŒè§„å¾‹ï¼Œç”¨äºé¢„æµ‹æ¨¡å‹æ€§èƒ½æŸå¤±å¦‚ä½•éšå‚æ•°é‡Nå’Œæ•°æ®é‡Dçš„å˜åŒ–è€Œå˜åŒ–ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œç›²ç›®å †ç Œå‚æ•°å¯èƒ½åªæ˜¯åœ¨åˆ¶é€ æ˜‚è´µçš„å‚»ç“œï¼Œè€Œæ°å½“çš„æ•°æ®é…æ¯”èƒ½è®©å°é¢„ç®—å‘æŒ¥å¤§æ•ˆèƒ½ã€‚ç†è§£æ‰©å±•æ³•åˆ™ï¼Œæ„å‘³ç€èƒ½ç”¨1%çš„èµ„æºè¾¾æˆ80%çš„æ•ˆæœï¼Œè®©èµ„æºæœ‰é™çš„å›¢é˜Ÿä¹Ÿèƒ½åœ¨AIèµ›é“ä¸Šç²¾å‡†å‘åŠ›ã€‚è¿™ä¸ä»…æ˜¯æŠ€æœ¯é€‰æ‹©ï¼Œæ›´æ˜¯ç”Ÿå­˜æ™ºæ…§ï¼Œåœ¨æœ‰é™çš„ç®—åŠ›èµ„æºä¸­ï¼Œæ‰¾åˆ°å±äºæˆ‘ä»¬ä¸ªäººæˆ–å°å›¢é˜Ÿçš„åˆ¶èƒœç­–ç•¥ã€‚ä»Šå¤©æˆ‘ä»¬é‡ç‚¹å›´ç»•ä¸¤ä¸ªå…³é”®çš„æ‰©å±•æ³•åˆ™ï¼šKMæ‰©å±•æ³•åˆ™å’ŒChinchillaæ‰©å±•æ³•åˆ™æ·±åº¦è§£æåŸºç¡€é‡Šä¹‰ã€æ ¸å¿ƒæ€æƒ³ä»¥åŠæ•°å­¦åŸç†ï¼Œæ€»ç»“ä¸¤è€…çš„å·®å¼‚å’Œå¯¹æ¨¡å‹è®­ç»ƒçš„é‡è¦æ„ä¹‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d24aee4c0ff9459cb8157c771a035391~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769303819&amp;x-signature=2kaHt5lU%2FWFJGphSbAvd9jgfV4E%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒé—®é¢˜å’Œæ¦‚å¿µ</h2>
<p>åœ¨æ·±å…¥åˆ†æä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»æ˜ç¡®æ‰©å±•æ³•åˆ™è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š</p>
<p>åœ¨è®¡ç®—é¢„ç®— C å›ºå®šçš„å‰æä¸‹ï¼Œå¦‚ä½•åˆ†é…æ¨¡å‹å‚æ•°é‡Nå’Œè®­ç»ƒæ•°æ®Tokené‡Dï¼Œæ‰èƒ½ä½¿æ¨¡å‹çš„æœ€ç»ˆæ€§èƒ½æŸå¤±Læœ€ä¼˜ã€‚</p>
<p>è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®æ¦‚å¿µï¼š</p>
<h3 data-id="heading-2">1. FLOPs</h3>
<h4 data-id="heading-3">1.1 æ ¸å¿ƒæ¦‚å¿µ</h4>
<p>FLOPs æ˜¯æµ®ç‚¹è¿ç®—æ¬¡æ•°ï¼Œå®ƒå°±åƒæ˜¯è¡¡é‡è®¡ç®—æœºâ€œåšäº†å¤šå°‘è„‘åŠ›å·¥ä½œâ€çš„è®¡æ•°å™¨ï¼Œæ‹†è§£å¼€æ¥ç†è§£ï¼š</p>
<ul>
<li><strong>Floating Pointï¼š æµ®ç‚¹æ•°</strong>
<ul>
<li>ç®€å•ç†è§£å°±æ˜¯å¸¦å°æ•°ç‚¹çš„æ•°å­—ï¼Œæ¯”å¦‚ 3.14, -0.001, 2.71828ã€‚è®¡ç®—æœºåœ¨å¤„ç†ç§‘å­¦è®¡ç®—ã€å›¾å½¢å›¾åƒã€äººå·¥æ™ºèƒ½è¿™äº›å¤æ‚ä»»åŠ¡æ—¶ï¼Œä¸»è¦å°±æ˜¯å’Œæµ®ç‚¹æ•°æ‰“äº¤é“ã€‚</li>
</ul>
</li>
<li>Operationsï¼š è¿ç®—
<ul>
<li>æŒ‡æœ€åŸºæœ¬çš„æ•°å­¦è®¡ç®—ï¼Œä¸»è¦æ˜¯ åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³• è¿™å››ç§ã€‚</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥ï¼Œ1ä¸ª FLOP å°±ä»£è¡¨è®¡ç®—æœºæ‰§è¡Œäº†ä¸€æ¬¡æµ®ç‚¹æ•°çš„åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•æˆ–é™¤æ³•ï¼ŒFLOPsï¼ˆæœ«å°¾çš„sä»£è¡¨å¤æ•°ï¼‰å°±æ˜¯æŒ‡æ€»çš„æµ®ç‚¹è¿ç®—æ¬¡æ•°ã€‚</p>
<h4 data-id="heading-4">1.2 é€šä¿—çš„ç†è§£</h4>
<p>æƒ³è±¡æˆ‘ä»¬è¦åšä¸€é“æ•°å­¦é¢˜ï¼Œè¦è®¡ç®—ä¸€ä¸ªæ•°å­¦å…¬å¼é¢˜ï¼šy = (3.2 Ã— 1.5) + (2.1 Ã· 0.7) - 4.0ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥ç®—ä¸€ä¸‹ï¼š</p>
<ul>
<li>1. å…ˆç®— 3.2 Ã— 1.5 â†’ 1æ¬¡ä¹˜æ³•ï¼ˆ1 FLOPï¼‰</li>
<li>2. å†ç®— 2.1 Ã· 0.7 â†’ 1æ¬¡é™¤æ³•ï¼ˆ1 FLOPï¼‰</li>
<li>3. ç„¶åç®— (4.8) + (3.0) â†’ 1æ¬¡åŠ æ³•ï¼ˆ1 FLOPï¼‰</li>
<li>4. æœ€åç®— 7.8 - 4.0 â†’ 1æ¬¡å‡æ³•ï¼ˆ1 FLOPï¼‰</li>
</ul>
<p>å®Œæˆè¿™é“é¢˜ï¼Œè®¡ç®—æœºæ€»å…±éœ€è¦æ‰§è¡Œ4æ¬¡æµ®ç‚¹è¿ç®—ï¼Œæ‰€ä»¥å®ƒçš„è®¡ç®—é‡å°±æ˜¯4FLOPsã€‚</p>
<h4 data-id="heading-5">1.3 å¯¹å¤§æ¨¡å‹çš„å«ä¹‰</h4>
<p>åœ¨è®­ç»ƒå’Œè¿è¡ŒAIæ¨¡å‹æ—¶ï¼Œç»å¤§éƒ¨åˆ†å·¥ä½œéƒ½æ˜¯å¤§è§„æ¨¡çš„çŸ©é˜µå’Œå‘é‡è¿ç®—ï¼Œè€Œè¿™äº›è¿ç®—æœ€ç»ˆéƒ½å¯ä»¥åˆ†è§£æˆæµ·é‡çš„åŠ æ³•å’Œä¹˜æ³•ã€‚</p>
<p><strong>ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼šè®¡ç®—ä¸€ä¸ªç¥ç»å…ƒçš„è¾“å‡º</strong></p>
<p>å‡è®¾ä¸€ä¸ªç¥ç»å…ƒæœ‰3ä¸ªè¾“å…¥ [x1, x2, x3]ï¼Œå¯¹åº”çš„æƒé‡æ˜¯ [w1, w2, w3]ï¼Œè¿˜æœ‰ä¸€ä¸ªåç½®é¡¹ bã€‚<br/>
å®ƒçš„è¾“å‡ºæ˜¯ï¼šy = (x1*w1 + x2*w2 + x3*w3) + b</p>
<p>æˆ‘ä»¬æ¥æ•°ä¸€ä¸‹FLOPsï¼š</p>
<ul>
<li>x1*w1, x2*w2, x3*w3 â†’ 3æ¬¡ä¹˜æ³•ï¼ˆ3 FLOPsï¼‰</li>
<li>(x1*w1 + x2*w2) â†’ 1æ¬¡åŠ æ³•ï¼ˆ1 FLOPï¼‰</li>
<li>(... + x3*w3) â†’ 1æ¬¡åŠ æ³•ï¼ˆ1 FLOPï¼‰</li>
<li>(... + b) â†’ 1æ¬¡åŠ æ³•ï¼ˆ1 FLOPï¼‰</li>
</ul>
<p>æ€»å…±ï¼š6 FLOPsã€‚</p>
<p>ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œä¸€ä¸ªå¤§è¯­è¨€æ¨¡å‹æœ‰æ•°åƒäº¿ä¸ªå‚æ•°ï¼ˆæƒé‡å’Œåç½®ï¼‰ï¼Œæ¯å¤„ç†ä¸€ä¸ªtokenéƒ½éœ€è¦è¿›è¡Œæ•°ç™¾ä¸‡ç”šè‡³æ•°åäº¿æ¬¡è¿™æ ·çš„è®¡ç®—ï¼Œè¿™ä¸ªæ€»çš„FLOPsæ•°é‡å°±ä¼šå˜å¾—æå…¶åºå¤§ã€‚</p>
<h4 data-id="heading-6">1.4 FLOPsçš„é‡è¦æ€§</h4>
<p>FLOPsæ˜¯è¡¡é‡è®¡ç®—æˆæœ¬ã€ç®—æ³•æ•ˆç‡å’Œç¡¬ä»¶æ€§èƒ½çš„ä¸€ä¸ªæ ¸å¿ƒæŒ‡æ ‡ã€‚</p>
<ul>
<li>è¡¡é‡æ¨¡å‹å¤æ‚åº¦/è®­ç»ƒæˆæœ¬ï¼šæˆ‘ä»¬è¯´è®­ç»ƒä¸€ä¸ªåºå¤§çš„æ¨¡å‹éœ€è¦~3.14 Ã— 10^23 FLOPsï¼Œè¿™ä¸ªå¤©æ–‡æ•°å­—ç›´è§‚åœ°å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªæ¨¡å‹è®­ç»ƒèµ·æ¥æå…¶æ˜‚è´µå’Œè€—æ—¶ã€‚å®ƒå°±æ˜¯åé¢æˆ‘ä»¬è¦è¿›ä¸€æ­¥æåˆ°çš„ C â‰ˆ 6 * N * D å…¬å¼å…·ä½“è®¡ç®—å‡ºæ¥çš„ç»“æœã€‚</li>
<li>è¡¡é‡ç¡¬ä»¶ç®—åŠ›ï¼šæˆ‘ä»¬å¸¸å¬åˆ°çš„A100ã€H100æ˜¾å¡ï¼Œå®ƒä»¬çš„ç®—åŠ›å°±æ˜¯ç”¨ FLOPSæ¥è¡¡é‡çš„ã€‚æ¯”å¦‚ä¸€å—H100æ˜¾å¡çš„ç®—åŠ›å¯è¾¾ ~4 PFLOPSï¼Œæ„æ€æ˜¯å®ƒæ¯ç§’å¯ä»¥æ‰§è¡Œ4 Ã— 10^15æ¬¡æµ®ç‚¹è¿ç®—ã€‚</li>
<li>ä¼°ç®—æ—¶é—´ï¼šæœ‰äº†æ€»è®¡ç®—é‡ï¼ˆFLOPsï¼‰å’Œç¡¬ä»¶ç®—åŠ›ï¼ˆFLOPSï¼‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç²—ç•¥ä¼°ç®—ä»»åŠ¡æ—¶é—´ï¼š</li>
<li>æ—¶é—´ â‰ˆ æ€»FLOPs / ç¡¬ä»¶FLOPS</li>
</ul>
<p>FLOPså°±æ˜¯å®Œæˆä¸€ä¸ªè®¡ç®—ä»»åŠ¡ï¼Œæ¯”å¦‚è®­ç»ƒä¸€ä¸ªAIæ¨¡å‹æ‰€éœ€è¦å®Œæˆçš„åŸºç¡€æ•°å­¦é¢˜çš„æ€»æ•°é‡ï¼Œè¡¨ç¤ºä¸€ä¸ªå·¥ä½œé‡å•ä½ï¼Œæ•°é‡è¶Šå¤§ï¼Œæ„å‘³ç€ä»»åŠ¡è¶Šå¤æ‚ï¼Œéœ€è¦çš„è®¡ç®—èµ„æºè¶Šå¤šã€‚å®ƒæ˜¯æˆ‘ä»¬ç†è§£å’Œé‡åŒ–äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸå·¨å¤§è®¡ç®—éœ€æ±‚çš„åŸºçŸ³ã€‚</p>
<h3 data-id="heading-7">2. è®¡ç®—é¢„ç®—C â‰ˆ 6 * N * D</h3>
<p>è®¡ç®—é¢„ç®—é€šå¸¸ä»¥FLOPsè¡¡é‡ã€‚å¯¹äºè‡ªå›å½’è¯­è¨€æ¨¡å‹è®­ç»ƒï¼Œä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„è¿‘ä¼¼æ˜¯ C â‰ˆ 6 * N * Dï¼Œè¿™ä¸ªå…¬å¼æ˜¯ç†è§£æ¨¡å‹è®­ç»ƒæˆæœ¬çš„é’¥åŒ™ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œæ€»è®¡ç®—é‡ä¸»è¦å–å†³äºæ¨¡å‹æœ‰å¤šå¤§å’Œå­¦äº†å¤šå°‘æ•°æ®ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯ 6 * N * Dï¼Ÿ</strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªåŸºäºTransformeræ¶æ„è‡ªå›å½’è¯­è¨€æ¨¡å‹è®­ç»ƒçš„ç»éªŒè¿‘ä¼¼å€¼ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ†ææ¨¡å‹çš„å‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­è¿‡ç¨‹æ¥ç†è§£å®ƒï¼š</p>
<ul>
<li>å‰å‘ä¼ æ’­ï¼š
<ul>
<li>å½“æ¨¡å‹å¤„ç†ä¸€ä¸ªè¾“å…¥tokenæ—¶ï¼Œå®ƒéœ€è¦æ‰§è¡ŒçŸ©é˜µä¹˜æ³•å’Œæ¿€æ´»å‡½æ•°ç­‰æ“ä½œã€‚</li>
<li>åœ¨Transformerä¸­ï¼Œå¤„ç†ä¸€ä¸ªtokenæ‰€éœ€çš„æµ®ç‚¹è¿ç®—æ¬¡æ•°å¤§è‡´ä¸æ¨¡å‹æ€»å‚æ•°é‡ N æˆæ­£æ¯”ã€‚</li>
<li>å› æ­¤ï¼Œå¯¹å•ä¸ªtokençš„å‰å‘ä¼ æ’­è®¡ç®—é‡ â‰ˆ 2 * N FLOPsã€‚</li>
<li>å› å­ 2 ä¸»è¦æ¥è‡ªäºï¼šçŸ©é˜µä¹˜æ³•ï¼ˆå å¤§éƒ¨åˆ†ï¼‰å’Œæ¿€æ´»å‡½æ•°ç­‰å…¶å®ƒæ“ä½œã€‚</li>
</ul>
</li>
<li>åå‘ä¼ æ’­ï¼š
<ul>
<li>è®­ç»ƒæ¨¡å‹æ—¶ï¼Œé™¤äº†å‰å‘ä¼ æ’­ï¼Œè¿˜éœ€è¦åå‘ä¼ æ’­æ¥è®¡ç®—æ¢¯åº¦ï¼Œä»è€Œæ›´æ–°æƒé‡ã€‚</li>
<li>åå‘ä¼ æ’­çš„è®¡ç®—é‡é€šå¸¸æ˜¯å‰å‘ä¼ æ’­çš„2å€ã€‚</li>
<li>å› ä¸ºå®ƒéœ€è¦è®¡ç®—æŸå¤±å‡½æ•°å¯¹äºæ¯ä¸€å±‚è¾“å…¥çš„æ¢¯åº¦ï¼ˆç±»ä¼¼äºå‰å‘ä¼ æ’­ï¼‰ï¼Œä»¥åŠå¯¹äºæƒé‡å’Œåç½®çš„æ¢¯åº¦ã€‚</li>
</ul>
</li>
<li>æ€»è®¡ç®—é‡ï¼š
<ul>
<li>å•ä¸ªtokençš„å•æ¬¡è®­ç»ƒè¿­ä»£æ€»è®¡ç®—é‡ â‰ˆ å‰å‘ä¼ æ’­(2N) + åå‘ä¼ æ’­(4N) = 6N FLOPsã€‚</li>
<li>å¯¹äºæ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ï¼Œæ¨¡å‹ä¼šçœ‹åˆ°æ•´ä¸ªæ•°æ®é›† D ä¸ªtokenã€‚</li>
<li>å› æ­¤ï¼Œæ€»è®­ç»ƒè®¡ç®—é¢„ç®— C â‰ˆ 6 * N * D FLOPsã€‚</li>
</ul>
</li>
</ul>
<p>è¿™æ˜¯ä¸€ä¸ªè¿‘ä¼¼å€¼ï¼Œå®é™…å€¼å¯èƒ½å› æ¨¡å‹æ¶æ„ã€åºåˆ—é•¿åº¦ã€ä¼˜åŒ–å™¨ç±»å‹ç­‰å› ç´ è€Œåœ¨ ~2ND åˆ° ~10ND ä¹‹é—´å˜åŒ–ï¼Œä½† 6ND æ˜¯ä¸€ä¸ªè¢«å¹¿æ³›æ¥å—å’Œä½¿ç”¨çš„å¯é ä¼°ç®—å€¼ï¼Œç”¨äºè¿›è¡Œé«˜é˜¶çš„è¶‹åŠ¿åˆ†æå’Œæ¯”è¾ƒã€‚</p>
<p>è¿™ä¸ªå…¬å¼å»ºç«‹äº†ä¸€ä¸ªé¢„ç®—çº¦æŸï¼Œå¦‚æœå¢å¤§äº†æ¨¡å‹è§„æ¨¡Nï¼Œä½†ä¿æŒæ€»é¢„ç®—Cä¸å˜ï¼Œé‚£ä¹ˆå¿…é¡»ç›¸åº”åœ°å‡å°‘æ•°æ®é‡Dï¼Œåä¹‹äº¦ç„¶ã€‚è¿™ä¹Ÿæ˜¯ä»Šå¤©æˆ‘ä»¬è¦è°ˆè®ºè§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•åœ¨å›ºå®šçš„ C ä¸‹ï¼Œæœ€ä¼˜åœ°åˆ†é… N å’Œ Dï¼Ÿ</p>
<h3 data-id="heading-8">3. æ€§èƒ½L</h3>
<p>L æ˜¯è¡¡é‡æ¨¡å‹å¥½åçš„æŒ‡æ ‡ï¼Œé€šå¸¸æ˜¯æ¨¡å‹åœ¨é¢„ç•™æµ‹è¯•é›†ä¸Šçš„äº¤å‰ç†µæŸå¤±æˆ–å›°æƒ‘åº¦ï¼Œåœ¨è¯­è¨€å»ºæ¨¡ä¸­ï¼Œå®ƒå‡ ä¹æ€»æ˜¯é€šè¿‡äº¤å‰ç†µæŸå¤±æˆ–å…¶æ´¾ç”ŸæŒ‡æ ‡å›°æƒ‘åº¦æ¥å®šä¹‰ï¼ŒæŸå¤±è¶Šä½ï¼Œæ¨¡å‹èƒ½åŠ›è¶Šå¼ºã€‚</p>
<h4 data-id="heading-9">3.1 äº¤å‰ç†µæŸå¤±</h4>
<p>**æ ¸å¿ƒæ€æƒ³ï¼š**è¡¡é‡æ¨¡å‹é¢„æµ‹çš„æ¦‚ç‡åˆ†å¸ƒä¸çœŸå®çš„æ¦‚ç‡åˆ†å¸ƒï¼ˆä¸€ä¸ªone-hotå‘é‡ï¼Œä»£è¡¨æ­£ç¡®çš„ä¸‹ä¸€ä¸ªè¯ï¼‰ä¹‹é—´çš„è·ç¦»ã€‚</p>
<p><strong>è®¡ç®—å…¬å¼ï¼ˆå¯¹äºä¸€ä¸ªtokenï¼‰ï¼š</strong></p>
<ul>
<li>Cross-Entropy = - Î£ (y_true * log(y_pred))</li>
<li>ç”±äº y_true æ˜¯one-hotå‘é‡ï¼ˆåªæœ‰æ­£ç¡®è¯çš„ä½ç½®ä¸º1ï¼Œå…¶ä»–ä¸º0ï¼‰ï¼Œæ‰€ä»¥ç®€åŒ–ä¸ºï¼š</li>
<li>Cross-Entropy = - log(y_pred_correct_word)</li>
</ul>
<p>**ç›´è§‚ç†è§£ï¼š**æ¨¡å‹å¯¹æ­£ç¡®ä¸‹ä¸€ä¸ªè¯èµ‹äºˆçš„é¢„æµ‹æ¦‚ç‡ y_pred_correct_word è¶Šé«˜ï¼ŒæŸå¤± -log(y_prob) å°±è¶Šä½ã€‚</p>
<ul>
<li>å¦‚æœ y_pred_correct_word = 1ï¼ˆå®Œç¾é¢„æµ‹ï¼‰ï¼Œåˆ™ loss = -log(1) = 0ã€‚</li>
<li>å¦‚æœ y_pred_correct_word = 0.5ï¼Œåˆ™ loss = -log(0.5) â‰ˆ 0.69ã€‚</li>
<li>å¦‚æœ y_pred_correct_word = 0.1ï¼ˆé¢„æµ‹å¾ˆå·®ï¼‰ï¼Œåˆ™ loss = -log(0.1) â‰ˆ 2.30ã€‚</li>
</ul>
<p>æ•´ä¸ªæ•°æ®é›†çš„æŸå¤±æ˜¯æ‰€æœ‰è¿™äº›å•ä¸ªtokenæŸå¤±çš„å¹³å‡å€¼ã€‚</p>
<h4 data-id="heading-10">3.2 å›°æƒ‘åº¦</h4>
<p>å›°æƒ‘åº¦æ˜¯äº¤å‰ç†µæŸå¤±çš„æŒ‡æ•°å½¢å¼ï¼Œå› ä¸ºå®ƒæ›´ç›´è§‚ã€‚</p>
<p>**è®¡ç®—å…¬å¼ï¼š**Perplexity = exp(Cross-Entropy_Loss)</p>
<p>**ç›´è§‚ç†è§£ï¼š**å›°æƒ‘åº¦å¯ä»¥ç†è§£ä¸ºâ€œæ¨¡å‹åœ¨é¢„æµ‹ä¸‹ä¸€ä¸ªè¯æ—¶çš„å¹³å‡ä¸ç¡®å®šæ€§ç¨‹åº¦â€æˆ–è€…â€œå¹³å‡åˆ†æ”¯å› å­â€ã€‚</p>
<ul>
<li>å‡è®¾ä¸€ä¸ªæ¨¡å‹çš„å›°æƒ‘åº¦ä¸º 10ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨é¢„æµ‹æ¯ä¸€ä¸ªè¯æ—¶ï¼Œæ¨¡å‹æ„Ÿè§‰å¹³å‡æœ‰10ä¸ªç­‰å¯èƒ½çš„é€‰æ‹©ã€‚å›°æƒ‘åº¦è¶Šä½ï¼Œæ¨¡å‹è¶Šç¡®å®šã€‚</li>
<li>ä¸€ä¸ªå®Œç¾çš„æ¨¡å‹çš„å›°æƒ‘åº¦ä¸º 1ï¼ˆå› ä¸ºå®ƒæ€»æ˜¯100%ç¡®å®šä¸‹ä¸€ä¸ªè¯æ˜¯ä»€ä¹ˆï¼‰ã€‚</li>
<li>å¦‚æœæ¨¡å‹åªæ˜¯éšæœºçŒœæµ‹ä¸€ä¸ªåŒ…å«10,000ä¸ªè¯çš„è¯æ±‡è¡¨ï¼Œå…¶å›°æƒ‘åº¦å°±æ˜¯ 10,000ã€‚</li>
</ul>
<p>**å…³ç³»ï¼š**ç”±äº Perplexity = exp(L)ï¼Œæœ€å°åŒ–äº¤å‰ç†µæŸå¤± L å°±ç­‰ä»·äºæœ€å°åŒ–å›°æƒ‘åº¦ã€‚åœ¨æ‰©å±•æ³•åˆ™çš„ç ”ç©¶ä¸­ï¼Œé€šå¸¸ç›´æ¥ä½¿ç”¨äº¤å‰ç†µæŸå¤± L ä½œä¸ºä¼˜åŒ–ç›®æ ‡ï¼Œå› ä¸ºå®ƒæ•°å­¦æ€§è´¨æ›´å¥½ï¼ˆæ˜¯åŠ æ³•æ€§çš„ï¼‰ã€‚</p>
<p>äº¤å‰ç†µæŸå¤±å’Œå›°æƒ‘åº¦çš„è¯¦ç»†è¯´æ˜å¯å‚è€ƒã€Š<a href="https://juejin.cn/post/7586555198115446790" title="https://juejin.cn/post/7586555198115446790" target="_blank">ä¿¡æ¯è®ºå®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€æ¦‚å¿µåˆ°åœ¨å¤§æ¨¡å‹ä¸­çš„å®é™…åº”ç”¨</a>ã€‹</p>
<h3 data-id="heading-11">4. å¹‚å¾‹ä¸æ”¶ç›Šé€’å‡</h3>
<p>è¿™æ˜¯æ‰©å±•æ³•åˆ™çš„çµé­‚ï¼Œæ­ç¤ºäº†æ€§èƒ½æå‡çš„åŸºæœ¬è§„å¾‹ã€‚</p>
<h4 data-id="heading-12">3.1 å¹‚å¾‹å…³ç³»</h4>
<p>æ‰©å±•æ³•åˆ™å‘ç°ï¼ŒæŸå¤± L ä¸æ¨¡å‹è§„æ¨¡ N å’Œæ•°æ®è§„æ¨¡ D éµå¾ªå¹‚å¾‹å…³ç³»ï¼š<br/>
L âˆ 1 / N^Î±<br/>
L âˆ 1 / D^Î²</p>
<p>è¿™æ„å‘³ç€ï¼ŒL ä¸ N^Î± å’Œ D^Î² æˆåæ¯”ã€‚å°†å…¶ä¸ä¸å¯çº¦æŸå¤± E ç»“åˆï¼Œå°±å¾—åˆ°äº†æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„å®Œæ•´å…¬å¼ï¼š<br/>
L(N, D) = E + A/N^Î± + B/D^Î²</p>
<h4 data-id="heading-13">3.2 æ”¶ç›Šé€’å‡æ•ˆåº”</h4>
<p>å¹‚å¾‹ä¸­çš„æŒ‡æ•° Î± å’Œ Î²ï¼ˆé€šå¸¸è¿œå°äº1ï¼‰æ˜¯ç†è§£æ”¶ç›Šé€’å‡çš„å…³é”®ã€‚</p>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£ï¼š</p>
<ul>
<li>å‡è®¾ Î± = 0.5ã€‚</li>
<li>å½“ N ä» 10^6ï¼ˆ100ä¸‡ï¼‰å¢åŠ åˆ° 10^7ï¼ˆ1000ä¸‡ï¼‰æ—¶ï¼ŒN^Î± ä» (10^6)^0.5 = 1000 å¢åŠ åˆ° (10^7)^0.5 â‰ˆ 3162ã€‚</li>
<li>æ€§èƒ½æå‡ï¼ˆæŸå¤±ä¸‹é™ï¼‰çš„å€æ•°æ˜¯ 3162 / 1000 â‰ˆ 3.16 å€ã€‚</li>
<li>ç°åœ¨ï¼Œå†å°† N ä» 10^7 å¢åŠ åˆ° 10^8ï¼ˆ1äº¿ï¼‰ï¼ŒN^Î± ä» 3162 å¢åŠ åˆ° (10^8)^0.5 = 10000ã€‚</li>
<li>æ€§èƒ½æå‡çš„å€æ•°æ˜¯ 10000 / 3162 â‰ˆ 3.16 å€ã€‚</li>
</ul>
<p>ç¤ºä¾‹å‘ç°ï¼š</p>
<ul>
<li>åœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼Œæ¨¡å‹è§„æ¨¡éƒ½å¢åŠ äº†10å€ã€‚</li>
<li>ä½†æ€§èƒ½æå‡çš„å€æ•°å´å®Œå…¨ç›¸åŒï¼Œéƒ½æ˜¯çº¦3.16å€ï¼Œè€Œä¸æ˜¯éšç€è§„æ¨¡å˜å¤§è€Œçº¿æ€§å¢åŠ ã€‚</li>
<li>è¿™æ„å‘³ç€ï¼Œæ¯å½“æˆ‘ä»¬æƒ³è®©æ€§èƒ½æå‡å›ºå®šçš„å€æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ¨¡å‹è§„æ¨¡å¢åŠ ä¸€ä¸ªå›ºå®šçš„æ¯”ä¾‹ï¼Œä¾‹å¦‚10å€ã€‚è¿™å°±æ˜¯æ”¶ç›Šé€’å‡ï¼Œæˆ‘ä»¬éœ€è¦æŠ•å…¥æŒ‡æ•°çº§å¢é•¿çš„èµ„æºï¼Œæ‰èƒ½è·å¾—çº¿æ€§å¢é•¿çš„æ€§èƒ½ã€‚</li>
</ul>
<p>å¯¹æ‰©å±•æ³•åˆ™çš„å®é™…æ„ä¹‰ï¼š</p>
<ul>
<li>KMæ³•åˆ™ï¼šÎ± â‰ˆ 0.076, Î² â‰ˆ 0.103ã€‚æŒ‡æ•°éå¸¸å°ï¼Œæ„å‘³ç€æ”¶ç›Šé€’å‡å¾—éå¸¸éå¸¸æ…¢ã€‚ä¸ºäº†æ˜¾è‘—é™ä½æŸå¤±ï¼Œæˆ‘ä»¬éœ€è¦æå¤§åœ°å¢åŠ  N æˆ– Dã€‚åŒæ—¶ï¼Œç”±äº Î± &lt; Î²ï¼Œå¢åŠ  N çš„æ”¶ç›Šè¡°å‡å¾—æ¯”å¢åŠ  D æ›´æ…¢ï¼Œå› æ­¤KMæ¨èä¼˜å…ˆæ‰©å¤§ Nã€‚</li>
<li>Chinchillaæ³•åˆ™ï¼šÎ± â‰ˆ Î² â‰ˆ 0.38ã€‚æŒ‡æ•°æ›´å¤§ï¼Œæ„å‘³ç€æ”¶ç›Šé€’å‡æ•ˆåº”æ¯”KMè®¤ä¸ºçš„è¦ä¸¥é‡å¾—å¤šã€‚åŒæ—¶ï¼ŒÎ± å’Œ Î² ç›¸ç­‰ï¼Œæ„å‘³ç€å¢åŠ æ¨¡å‹å’Œå¢åŠ æ•°æ®å¯¹æ€§èƒ½çš„è´¡çŒ®æ˜¯å¹³è¡¡çš„ã€‚å› æ­¤ï¼ŒChinchillaæ¨èåŒæ­¥æ‰©å¤§ N å’Œ Dã€‚</li>
</ul>
<h3 data-id="heading-14">5. æ€»ç»“</h3>
<p>é¢„ç®—Cã€æ€§èƒ½Lå’Œå¹‚å¾‹è¿™ä¸‰ä¸ªæ¦‚å¿µæ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„é€»è¾‘é“¾ï¼š</p>
<ul>
<li>æœ‰å›ºå®šé¢„ç®— C â‰ˆ 6NDã€‚</li>
<li>ç›®æ ‡æ˜¯æœ€å°åŒ–æŸå¤± Lï¼ˆæˆ–å›°æƒ‘åº¦ï¼‰ã€‚</li>
<li>é€šè¿‡å®éªŒå‘ç°ï¼ŒL ä¸ N å’Œ D å­˜åœ¨å¹‚å¾‹å…³ç³»ï¼Œå¹¶ä¼´æœ‰æ”¶ç›Šé€’å‡ã€‚</li>
<li>KMå’ŒChinchillaæ³•åˆ™çš„æ ¸å¿ƒäº‰è®ºåœ¨äºå¹‚å¾‹æŒ‡æ•° Î± å’Œ Î² çš„å…·ä½“æ•°å€¼ï¼Œè¿™ç›´æ¥å¯¼è‡´äº†æˆªç„¶ä¸åŒçš„æœ€ä¼˜èµ„æºåˆ†é…ç­–ç•¥ã€‚</li>
</ul>
<h2 data-id="heading-15">ä¸‰ã€KMæ‰©å±•æ³•åˆ™</h2>
<h3 data-id="heading-16">1. åŸºç¡€ç†è§£</h3>
<p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> åœ¨è®¡ç®—é¢„ç®—å……è¶³çš„æƒ…å†µä¸‹ï¼Œæ¨¡å‹å‚æ•°é‡ N æ˜¯å½±å“æ€§èƒ½çš„æœ€å…³é”®å› ç´ ã€‚ä¸ºäº†è¾¾åˆ°æœ€ä½³æ€§èƒ½ï¼Œåº”ä¼˜å…ˆæ‰©å¤§æ¨¡å‹è§„æ¨¡ï¼ŒåŒæ—¶æŒ‰æ¯”ä¾‹é€‚å½“å¢åŠ æ•°æ®é‡ã€‚</p>
<p><strong>ä¸€ä¸ªç®€å•çš„æ¯”å–»ï¼š</strong></p>
<p>å¥½æ¯”æˆ‘ä»¬åœ¨ç»„å»ºä¸€ä¸ªç ”ç©¶å›¢é˜Ÿæ¥è§£å†³ä¸€ä¸ªå¤æ‚é—®é¢˜ã€‚</p>
<ul>
<li>æ¨¡å‹å‚æ•°é‡å°±åƒæ˜¯å›¢é˜Ÿä¸­åšå£«çš„æ•°é‡ã€‚åšå£«è¶Šå¤šï¼Œå›¢é˜Ÿçš„é›†ä½“æ™ºåŠ›ã€åˆ†æèƒ½åŠ›å’Œè§£å†³å¤æ‚é—®é¢˜çš„æ½œåŠ›å°±è¶Šå¤§ã€‚</li>
<li>è®­ç»ƒæ•°æ®é‡å°±åƒæ˜¯æä¾›ç»™è¿™ä¸ªå›¢é˜Ÿçš„ç ”ç©¶èµ„æ–™å’Œå‚è€ƒæ–‡çŒ®çš„æ•°é‡ã€‚</li>
<li>KMæ³•åˆ™çš„å‘ç°æ˜¯ï¼šç›¸æ¯”äºæ— æ­¢å¢ƒåœ°å¢åŠ ç ”ç©¶èµ„æ–™ï¼Œä¼˜å…ˆå¢åŠ åšå£«çš„æ•°é‡ï¼Œå¯¹æœ€ç»ˆè§£å†³é—®é¢˜èƒ½åŠ›çš„æå‡æ•ˆæœæ›´æ˜¾è‘—ã€‚</li>
<li>å½“ç„¶ï¼Œèµ„æ–™ä¸èƒ½å¤ªå°‘ï¼Œå¦åˆ™åšå£«ä»¬ä¼šâ€œå·§å¦‡éš¾ä¸ºæ— ç±³ä¹‹ç‚Šâ€ã€‚ä½†KMæ³•åˆ™è®¤ä¸ºï¼Œåœ¨èµ„æºå’Œç²¾åŠ›æœ‰é™æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠé‡ç‚¹æ”¾åœ¨æ‹›å‹Ÿæ›´å¤šã€æ›´èªæ˜çš„åšå£«ä¸Šã€‚</li>
</ul>
<h3 data-id="heading-17">2. æ•°å­¦å…¬å¼</h3>
<p>KMæ³•åˆ™å°†æµ‹è¯•æŸå¤± L å»ºæ¨¡ä¸º N å’Œ D çš„å¹‚å¾‹å‡½æ•°ï¼š</p>
<p><strong>L(N, D) = E + (A / N^Î±) + (B / D^Î²)</strong></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>L(N, D)ï¼š è¿™æ˜¯æˆ‘ä»¬æœ€ç»ˆæƒ³çŸ¥é“çš„æ¨¡å‹æŸå¤±ã€‚å®ƒå–å†³äºæ¨¡å‹å‚æ•°é‡ N å’Œè®­ç»ƒæ•°æ®Tokené‡ Dã€‚</li>
<li>Eï¼š ä¸å¯çº¦æŸå¤±ï¼Œè¿™æ˜¯ç†è®ºä¸Šçš„æœ€ä½æŸå¤±ï¼Œç”±æ•°æ®æœ¬èº«çš„å†…åœ¨å¤æ‚åº¦å’Œå™ªéŸ³å†³å®šï¼Œå°±åƒæ— è®ºå¤šä¹ˆèªæ˜çš„å­¦ç”Ÿï¼Œä¹Ÿæ— æ³•å®Œç¾é¢„æµ‹ä¸€æ¬¡å®Œå…¨éšæœºçš„ç¡¬å¸æŠ›æ·ç»“æœã€‚E æ˜¯ä¸€ä¸ªæ— æ³•é€šè¿‡æ”¹è¿›æ¨¡å‹æˆ–å¢åŠ æ•°æ®æ¥è¶…è¶Šçš„æé™ã€‚</li>
<li>A / N^Î±ï¼š æ¨¡å‹å®¹é‡æŸå¤±ï¼Œè¿™éƒ¨åˆ†æŸå¤±æ˜¯å› ä¸ºæˆ‘ä»¬çš„æ¨¡å‹ä¸å¤Ÿå¤§ã€ä¸å¤Ÿå¤æ‚ã€‚
<ul>
<li>N æ˜¯æ¨¡å‹å‚æ•°é‡ã€‚</li>
<li>A å’Œ Î± æ˜¯å¸¸æ•°ï¼Œé€šè¿‡å®éªŒæ‹Ÿåˆå¾—å‡ºï¼ŒOpenAIå‘ç° Î± â‰ˆ 0.076ã€‚</li>
<li>ç›´è§‚ç†è§£ï¼šå½“ N å¢å¤§æ—¶ï¼ŒA / N^Î± ä¼šå˜å°ï¼Œè¿™æ„å‘³ç€æ¨¡å‹è¶Šå¤§ï¼Œå› å®¹é‡ä¸è¶³å¯¼è‡´çš„æŸå¤±å°±è¶Šå°ã€‚Î± å¾ˆå°ï¼Œæ„å‘³ç€æˆ‘ä»¬éœ€è¦æå¤§åœ°å¢åŠ  Nï¼Œæ‰èƒ½è®©è¿™é¡¹æ˜¾è‘—ä¸‹é™ã€‚</li>
</ul>
</li>
<li>B / D^Î²ï¼š æ•°æ®å®¹é‡æŸå¤±ï¼Œè¿™éƒ¨åˆ†æŸå¤±æ˜¯å› ä¸ºæˆ‘ä»¬çš„è®­ç»ƒæ•°æ®ä¸å¤Ÿå¤šã€‚
<ul>
<li>D æ˜¯è®­ç»ƒæ•°æ®Tokené‡ã€‚</li>
<li>B å’Œ Î² æ˜¯å¸¸æ•°ï¼Œé€šè¿‡å®éªŒæ‹Ÿåˆå¾—å‡ºï¼ŒOpenAIå‘ç° Î² â‰ˆ 0.103ã€‚</li>
<li>ç›´è§‚ç†è§£ï¼šå½“ D å¢å¤§æ—¶ï¼ŒB / D^Î² ä¼šå˜å°ã€‚è¿™æ„å‘³ç€æ•°æ®è¶Šå¤šï¼Œå› æ•°æ®ä¸è¶³å¯¼è‡´çš„æŸå¤±å°±è¶Šå°ã€‚Î² ä¹Ÿå¾ˆå°ï¼Œæ„å‘³ç€æ•°æ®ä¹Ÿéœ€è¦å¢åŠ å¾ˆå¤šæ‰èƒ½æ˜¾è‘—é™ä½è¿™é¡¹æŸå¤±ã€‚</li>
</ul>
</li>
</ul>
<p>é€šè¿‡è¿™ä¸ªå…¬å¼ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“äº†å¸¸æ•° E, A, B, Î±, Î²ï¼Œæˆ‘ä»¬å°±å¯ä»¥é¢„æµ‹ï¼šä¸€ä¸ªæ‹¥æœ‰ N å‚æ•°ã€ç”¨ D æ•°æ®è®­ç»ƒçš„æ¨¡å‹ï¼Œæœ€ç»ˆæ€§èƒ½ L å¤§æ¦‚ä¼šæ˜¯å¤šå°‘ï¼Œè¿™ä¸ºæ¨¡å‹è®¾è®¡æä¾›äº†å¾ˆå¥½çš„æŒ‡å¯¼ï¼Œç”±äº Î± å’Œ Î² éƒ½å¾ˆå°ï¼Œä¸ºäº†æœ€å°åŒ–æŸå¤±ï¼Œéœ€è¦åŒæ—¶å¢å¤§ N å’Œ Dï¼Œä½†KMæ³•åˆ™çš„å®è¯ç»“æœè¡¨æ˜ï¼Œå¯¹ N çš„æŠ•èµ„å›æŠ¥ç‡æ›´é«˜ã€‚</p>
<h3 data-id="heading-18">3. KMæ³•åˆ™çš„å†³ç­–æŒ‡å—</h3>
<p>é€šè¿‡å¯¹ä¸Šè¿°å…¬å¼çš„åˆ†æå’Œå®éªŒéªŒè¯ï¼ŒKMæ³•åˆ™å¾—å‡ºäº†å‡ ä¸ªæ”¹å˜AIç ”å‘æ–¹å‘çš„ç»“è®ºï¼š</p>
<p><strong>3.1 æ¨¡å‹è§„æ¨¡ N çš„æ”¶ç›Šé«˜äºæ•°æ®è§„æ¨¡ D</strong></p>
<ul>
<li>å› ä¸ºå®éªŒä¸­æ‹Ÿåˆå‡ºçš„ Î± (0.076) ç•¥å°äº Î² (0.103)ã€‚è¿™æ„å‘³ç€ï¼ŒN çš„æŒ‡æ•°æ›´å°ï¼Œå…¶æ”¶ç›Šéšè§„æ¨¡å¢é•¿è€Œè¡°å‡çš„é€Ÿåº¦æ›´æ…¢ã€‚æ¢å¥è¯è¯´ï¼Œæ‰©å¤§ N çš„â€œååŠ²â€æ›´è¶³ã€‚</li>
<li>åœ¨è®¡ç®—é¢„ç®— Cï¼ˆçº¦ç­‰äº 6NDï¼‰å›ºå®šçš„æƒ…å†µä¸‹ï¼Œæœ€ä¼˜é…ç½®æ˜¯å¤§åŠ›å€¾æ–œäº Nã€‚è®ºæ–‡ç»™å‡ºçš„è¿‘ä¼¼æœ€ä¼˜æ¯”ä¾‹æ˜¯ï¼šæ¨¡å‹è§„æ¨¡ N åº”ä¸ C çš„çº¦0.73æ¬¡æ–¹æˆæ­£æ¯”ï¼Œè€Œæ•°æ® D ä»…ä¸ C çš„çº¦0.27æ¬¡æ–¹æˆæ­£æ¯”ã€‚</li>
</ul>
<p><strong>3.2 æ€§èƒ½å¹³æ»‘å¯é¢„æµ‹</strong></p>
<ul>
<li>æ¨¡å‹æ€§èƒ½ä¸»è¦å–å†³äº N å’Œ Dï¼Œè€Œå¯¹æ¨¡å‹æ¶æ„ã€è®­ç»ƒæ–¹å¼ç­‰è¶…å‚æ•°çš„ä¾èµ–ç›¸å¯¹è¾ƒå°ã€‚è¿™æ„å‘³ç€ï¼Œä½ å¯ä»¥é€šè¿‡â€œç¼©æ”¾â€æ¥å¯é åœ°æå‡æ€§èƒ½ã€‚</li>
</ul>
<p><strong>3.3 åœ¨è®¡ç®—æœ€ä¼˜è¾¹ç•Œä¸Šï¼Œæ¨¡å‹åº”è¯¥â€œè®­ç»ƒä¸è¶³â€</strong></p>
<ul>
<li>è¿™æ˜¯KMæ³•åˆ™ä¸€ä¸ªéå¸¸é‡è¦ä¸”åç›´è§‰çš„æ¨è®ºã€‚å®ƒè¯´ï¼šåœ¨å›ºå®šçš„è®¡ç®—é¢„ç®—ä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥è®­ç»ƒä¸€ä¸ªéå¸¸å¤§çš„æ¨¡å‹ï¼Œä½†åªåœ¨ç›¸å¯¹è¾ƒå°‘çš„æ•°æ®ä¸Šè®­ç»ƒå®ƒï¼Œç›´åˆ°å®ƒè¿˜æ²¡æœ‰å®Œå…¨æ”¶æ•›ï¼ˆå³â€œè®­ç»ƒä¸è¶³â€ï¼‰æ—¶å°±åœæ­¢ã€‚</li>
<li>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæŠŠåŒæ ·çš„è®¡ç®—é¢„ç®—ç”¨æ¥è®­ç»ƒä¸€ä¸ªæ›´å¤§çš„æ¨¡å‹ï¼Œå³ä½¿è®­ç»ƒä¸å……åˆ†ï¼Œæ¯”ç”¨æ¥æ›´å……åˆ†åœ°è®­ç»ƒä¸€ä¸ªè¾ƒå°çš„æ¨¡å‹ï¼Œæœ€ç»ˆæ€§èƒ½æ›´å¥½ã€‚</li>
</ul>
<h3 data-id="heading-19">4. ç¤ºä¾‹åˆ†æ</h3>
<p>KMæ³•åˆ™çš„æ ¸å¿ƒå…¬å¼ï¼šL(N, D) = E + A/N^Î± + B/D^Î²</p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>
<p>Lï¼šæ¨¡å‹æŸå¤±ï¼ˆè¶Šä½è¶Šå¥½ï¼‰</p>
</li>
<li>
<p>Nï¼šæ¨¡å‹å‚æ•°é‡</p>
</li>
<li>
<p>Dï¼šè®­ç»ƒæ•°æ®é‡ï¼ˆtokenæ•°ï¼‰</p>
</li>
<li>
<p>E, A, B, Î±, Î²ï¼šé€šè¿‡å®éªŒæ‹Ÿåˆçš„å¸¸æ•°</p>
<p>import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D</p>
<h2 data-id="heading-20">è®¾ç½®ä¸­æ–‡å­—ä½“</h2>
<p>plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False</p>
<p>def km_scaling_law_log(N, D, E=2.0, A=3.0, B=3.0, alpha=0.3, beta=0.3):
"""
è®¡ç®—KMæ‰©å±•æ³•åˆ™é¢„æµ‹çš„æŸå¤±å€¼ - å¯¹æ•°å°ºåº¦ç‰ˆæœ¬
ç¡®ä¿è¾“å‡ºåœ¨åˆç†èŒƒå›´å†…</p>
<pre><code class="hljs language-ini" lang="ini">å‚æ•°:
N: æ¨¡å‹å‚æ•°é‡ (å•ä½: åäº¿)
D: è®­ç»ƒæ•°æ®é‡ (å•ä½: åäº¿token)
"""
<span class="hljs-comment"># ä½¿ç”¨å¯¹æ•°å°ºåº¦ç¡®ä¿æ•°å€¼ç¨³å®š</span>
<span class="hljs-comment"># åŸºç¡€æŸå¤± + æ¨¡å‹é¡¹ + æ•°æ®é¡¹</span>
<span class="hljs-attr">L</span> = E + (A / (np.log(N + <span class="hljs-number">1</span>) ** alpha)) + (B / (np.log(D + <span class="hljs-number">1</span>) ** beta))
return L
</code></pre>
<p>def safe_exp(x):
"""å®‰å…¨çš„æŒ‡æ•°å‡½æ•°ï¼Œé˜²æ­¢æº¢å‡º"""
return np.exp(np.clip(x, -700, 700))</p>
<h2 data-id="heading-21">ç¤ºä¾‹1: å•ä¸ªæ¨¡å‹é¢„æµ‹</h2>
<p>print("=== ç¤ºä¾‹1: å•ä¸ªæ¨¡å‹æ€§èƒ½é¢„æµ‹ ===")
N_example = 1.0  # 10äº¿å‚æ•°
D_example = 5.0  # 50äº¿token</p>
<p>loss = km_scaling_law_log(N_example, D_example)
print(f"æ¨¡å‹è§„æ¨¡: {N_example}B å‚æ•°")
print(f"è®­ç»ƒæ•°æ®: {D_example}B token")
print(f"KMæ³•åˆ™é¢„æµ‹æŸå¤±: {loss:.4f}")
print(f"å¯¹åº”çš„å›°æƒ‘åº¦: {safe_exp(loss):.2f}\n")</p>
<h2 data-id="heading-22">ç¤ºä¾‹2: ä¸åŒè§„æ¨¡æ¨¡å‹çš„å¯¹æ¯”</h2>
<p>print("=== ç¤ºä¾‹2: ä¸åŒè§„æ¨¡æ¨¡å‹å¯¹æ¯” ===")
model_sizes = [0.1, 0.5, 1.0, 5.0, 10.0, 50.0, 100.0]  # ä»1äº¿åˆ°1000äº¿å‚æ•°
fixed_data = 10.0  # å›ºå®š100äº¿tokenæ•°æ®</p>
<p>print(f"å›ºå®šè®­ç»ƒæ•°æ®: {fixed_data}B token")
print("æ¨¡å‹è§„æ¨¡(B)\té¢„æµ‹æŸå¤±\tå›°æƒ‘åº¦")
print("-" * 55)</p>
<p>for size in model_sizes:
loss = km_scaling_law_log(size, fixed_data)
perplexity = safe_exp(loss)
print(f"{size:8.1f}\t{loss:.4f}\t\t{perplexity:.2f}")</p>
<h2 data-id="heading-23">ç¤ºä¾‹3: ä¸åŒæ•°æ®é‡çš„å¯¹æ¯”</h2>
<p>print("\n=== ç¤ºä¾‹3: ä¸åŒæ•°æ®é‡å¯¹æ¯” ===")
data_sizes = [1.0, 5.0, 10.0, 50.0, 100.0, 500.0, 1000.0]  # ä»10äº¿åˆ°1ä¸‡äº¿token
fixed_model = 1.0  # å›ºå®š10äº¿å‚æ•°</p>
<p>print(f"å›ºå®šæ¨¡å‹è§„æ¨¡: {fixed_model}B å‚æ•°")
print("æ•°æ®é‡(B)\té¢„æµ‹æŸå¤±\tå›°æƒ‘åº¦")
print("-" * 55)</p>
<p>for data in data_sizes:
loss = km_scaling_law_log(fixed_model, data)
perplexity = safe_exp(loss)
print(f"{data:8.1f}\t{loss:.4f}\t\t{perplexity:.2f}")</p>
<h2 data-id="heading-24">ç¤ºä¾‹4: å¯è§†åŒ–åˆ†æ</h2>
<p>print("\n=== ç¤ºä¾‹4: ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨ ===")</p>
<h2 data-id="heading-25">åˆ›å»ºæ¨¡å‹è§„æ¨¡å’Œæ•°æ®çš„ç½‘æ ¼</h2>
<p>N_range = np.logspace(-1, 2, 50)  # ä»0.1Båˆ°100Bå‚æ•°
D_range = np.logspace(0, 3, 50)   # ä»1Båˆ°1000B token</p>
<p>N_grid, D_grid = np.meshgrid(N_range, D_range)
L_grid = km_scaling_law_log(N_grid, D_grid)</p>
<h2 data-id="heading-26">åˆ›å»ºå¯è§†åŒ–å›¾è¡¨</h2>
<p>fig = plt.figure(figsize=(16, 5))</p>
<h2 data-id="heading-27">å­å›¾1: å›ºå®šæ•°æ®é‡ï¼Œçœ‹æ¨¡å‹è§„æ¨¡çš„å½±å“</h2>
<p>ax1 = fig.add_subplot(131)
fixed_D = 10.0  # å›ºå®š10B token</p>
<p>losses_N = [km_scaling_law_log(N, fixed_D) for N in N_range]
ax1.semilogx(N_range, losses_N, 'b-', linewidth=3)
ax1.set_xlabel('æ¨¡å‹å‚æ•°é‡ (åäº¿)')
ax1.set_ylabel('é¢„æµ‹æŸå¤±')
ax1.set_title('æ¨¡å‹è§„æ¨¡å¯¹æ€§èƒ½çš„å½±å“\n(å›ºå®šæ•°æ®é‡)')
ax1.grid(True, alpha=0.3)</p>
<h2 data-id="heading-28">æ ‡è®°GPT-3è§„æ¨¡çš„ç‚¹</h2>
<p>gpt3_N = 175
gpt3_loss = km_scaling_law_log(gpt3_N, fixed_D)
ax1.axvline(x=gpt3_N, color='red', linestyle='--', alpha=0.7)
ax1.plot(gpt3_N, gpt3_loss, 'ro', markersize=8)
ax1.annotate(f'GPT-3\n({gpt3_N}B)', (gpt3_N, gpt3_loss),
xytext=(10, 10), textcoords='offset points',
bbox=dict(boxstyle="round,pad=0.3", fc="yellow", alpha=0.7))</p>
<h2 data-id="heading-29">å­å›¾2: å›ºå®šæ¨¡å‹è§„æ¨¡ï¼Œçœ‹æ•°æ®é‡çš„å½±å“</h2>
<p>ax2 = fig.add_subplot(132)
fixed_N = 1.0  # å›ºå®š1Bå‚æ•°</p>
<p>losses_D = [km_scaling_law_log(fixed_N, D) for D in D_range]
ax2.semilogx(D_range, losses_D, 'r-', linewidth=3)
ax2.set_xlabel('è®­ç»ƒæ•°æ®é‡ (åäº¿token)')
ax2.set_ylabel('é¢„æµ‹æŸå¤±')
ax2.set_title('æ•°æ®é‡å¯¹æ€§èƒ½çš„å½±å“\n(å›ºå®šæ¨¡å‹è§„æ¨¡)')
ax2.grid(True, alpha=0.3)</p>
<h2 data-id="heading-30">å­å›¾3: çƒ­åŠ›å›¾å±•ç¤ºNå’ŒDçš„å…±åŒå½±å“</h2>
<p>ax3 = fig.add_subplot(133)
contour = ax3.contourf(np.log10(N_grid), np.log10(D_grid), L_grid, levels=20, cmap='RdYlBu_r')
ax3.set_xlabel('log10(æ¨¡å‹å‚æ•°) (B)')
ax3.set_ylabel('log10(è®­ç»ƒæ•°æ®) (B)')
ax3.set_title('KMæ‰©å±•æ³•åˆ™çƒ­åŠ›å›¾\né¢œè‰²è¡¨ç¤ºæŸå¤±å€¼')</p>
<h2 data-id="heading-31">æ·»åŠ ç­‰å€¼çº¿</h2>
<p>contour_lines = ax3.contour(np.log10(N_grid), np.log10(D_grid), L_grid,
levels=10, colors='black', alpha=0.5)
ax3.clabel(contour_lines, inline=True, fontsize=8)</p>
<p>plt.colorbar(contour, ax=ax3, label='é¢„æµ‹æŸå¤±')</p>
<p>plt.tight_layout()
plt.show()</p>
<h2 data-id="heading-32">ç¤ºä¾‹5: å®é™…æ¨¡å‹æ¡ˆä¾‹åˆ†æ</h2>
<p>print("\n=== ç¤ºä¾‹5: å®é™…æ¨¡å‹æ€§èƒ½é¢„æµ‹ ===")</p>
<p>real_models = [
{"name": "GPT-3", "N": 175, "D": 300},
{"name": "LLaMA-2 7B", "N": 7, "D": 2000},
{"name": "LLaMA-2 70B", "N": 70, "D": 2000},
{"name": "PaLM", "N": 540, "D": 780},
{"name": "Chinchilla", "N": 70, "D": 1400},
]</p>
<p>print("æ¨¡å‹åç§°\t\tå‚æ•°(B)\tæ•°æ®(B)\té¢„æµ‹æŸå¤±\tå›°æƒ‘åº¦")
print("-" * 70)</p>
<p>for model in real_models:
loss = km_scaling_law_log(model["N"], model["D"])
perplexity = safe_exp(loss)
print(f"{model['name']:12}\t{model['N']:4.0f}\t{model['D']:4.0f}\t{loss:.4f}\t\t{perplexity:.2f}")</p>
<h2 data-id="heading-33">ç¤ºä¾‹6: èµ„æºåˆ†é…å»ºè®®</h2>
<p>print("\n=== ç¤ºä¾‹6: èµ„æºåˆ†é…ç­–ç•¥ ===")</p>
<p>def analyze_resource_allocation(total_compute):
"""åˆ†æä¸åŒèµ„æºåˆ†é…ç­–ç•¥"""
print(f"\nåœ¨æ€»è®¡ç®—é‡ {total_compute:.1e} FLOPs ä¸‹çš„ç­–ç•¥åˆ†æ:")
print("ç­–ç•¥\t\t\tæ¨¡å‹è§„æ¨¡(B)\tæ•°æ®é‡(B)\té¢„æµ‹æŸå¤±")
print("-" * 65)</p>
<pre><code class="hljs language-swift" lang="swift"># ç­–ç•¥<span class="hljs-number">1</span>: <span class="hljs-type">KMé£æ ¼</span> (åå‘å¤§æ¨¡å‹)
<span class="hljs-type">N_km</span> <span class="hljs-operator">=</span> (total_compute <span class="hljs-operator">/</span> <span class="hljs-number">6</span>) <span class="hljs-operator">**</span> <span class="hljs-number">0.7</span> <span class="hljs-operator">/</span> <span class="hljs-number">1e9</span>
<span class="hljs-type">D_km</span> <span class="hljs-operator">=</span> (total_compute <span class="hljs-operator">/</span> <span class="hljs-number">6</span>) <span class="hljs-operator">**</span> <span class="hljs-number">0.3</span> <span class="hljs-operator">/</span> <span class="hljs-number">1e9</span>
loss_km <span class="hljs-operator">=</span> km_scaling_law_log(<span class="hljs-type">N_km</span>, <span class="hljs-type">D_km</span>)
<span class="hljs-built_in">print</span>(f<span class="hljs-string">"KMç­–ç•¥<span class="hljs-subst">\t</span><span class="hljs-subst">\t</span><span class="hljs-subst">\t</span>{N_km:6.1f}<span class="hljs-subst">\t</span><span class="hljs-subst">\t</span>{D_km:6.1f}<span class="hljs-subst">\t</span><span class="hljs-subst">\t</span>{loss_km:.4f}"</span>)

# ç­–ç•¥<span class="hljs-number">2</span>: <span class="hljs-type">Chinchillaé£æ ¼</span> (å¹³è¡¡)
<span class="hljs-type">N_chi</span> <span class="hljs-operator">=</span> (total_compute <span class="hljs-operator">/</span> <span class="hljs-number">6</span>) <span class="hljs-operator">**</span> <span class="hljs-number">0.5</span> <span class="hljs-operator">/</span> <span class="hljs-number">1e9</span>
<span class="hljs-type">D_chi</span> <span class="hljs-operator">=</span> (total_compute <span class="hljs-operator">/</span> <span class="hljs-number">6</span>) <span class="hljs-operator">**</span> <span class="hljs-number">0.5</span> <span class="hljs-operator">/</span> <span class="hljs-number">1e9</span>
loss_chi <span class="hljs-operator">=</span> km_scaling_law_log(<span class="hljs-type">N_chi</span>, <span class="hljs-type">D_chi</span>)
<span class="hljs-built_in">print</span>(f<span class="hljs-string">"Chinchillaç­–ç•¥<span class="hljs-subst">\t</span><span class="hljs-subst">\t</span>{N_chi:6.1f}<span class="hljs-subst">\t</span><span class="hljs-subst">\t</span>{D_chi:6.1f}<span class="hljs-subst">\t</span><span class="hljs-subst">\t</span>{loss_chi:.4f}"</span>)

# ç­–ç•¥<span class="hljs-number">3</span>: åå‘å¤§æ•°æ®
<span class="hljs-type">N_data</span> <span class="hljs-operator">=</span> (total_compute <span class="hljs-operator">/</span> <span class="hljs-number">6</span>) <span class="hljs-operator">**</span> <span class="hljs-number">0.3</span> <span class="hljs-operator">/</span> <span class="hljs-number">1e9</span>
<span class="hljs-type">D_data</span> <span class="hljs-operator">=</span> (total_compute <span class="hljs-operator">/</span> <span class="hljs-number">6</span>) <span class="hljs-operator">**</span> <span class="hljs-number">0.7</span> <span class="hljs-operator">/</span> <span class="hljs-number">1e9</span>
loss_data <span class="hljs-operator">=</span> km_scaling_law_log(<span class="hljs-type">N_data</span>, <span class="hljs-type">D_data</span>)
<span class="hljs-built_in">print</span>(f<span class="hljs-string">"æ•°æ®ä¼˜å…ˆç­–ç•¥<span class="hljs-subst">\t</span><span class="hljs-subst">\t</span>{N_data:6.1f}<span class="hljs-subst">\t</span><span class="hljs-subst">\t</span>{D_data:6.1f}<span class="hljs-subst">\t</span><span class="hljs-subst">\t</span>{loss_data:.4f}"</span>)
</code></pre>
<p>analyze_resource_allocation(1e22)  # åˆ†æ1e22 FLOPsé¢„ç®—</p>
</li>
</ul>
<p><strong>ä»£ç è¯¦ç»†è§£é‡Š</strong></p>
<p><strong>4.1 æ ¸å¿ƒå‡½æ•°</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">km_scaling_law_log</span>(<span class="hljs-params">N, D, E=<span class="hljs-number">2.0</span>, A=<span class="hljs-number">3.0</span>, B=<span class="hljs-number">3.0</span>, alpha=<span class="hljs-number">0.3</span>, beta=<span class="hljs-number">0.3</span></span>):
    <span class="hljs-string">"""
    è®¡ç®—KMæ‰©å±•æ³•åˆ™é¢„æµ‹çš„æŸå¤±å€¼ - å¯¹æ•°å°ºåº¦ç‰ˆæœ¬
    ç¡®ä¿è¾“å‡ºåœ¨åˆç†èŒƒå›´å†…
    
    å‚æ•°:
    N: æ¨¡å‹å‚æ•°é‡ (å•ä½: åäº¿)
    D: è®­ç»ƒæ•°æ®é‡ (å•ä½: åäº¿token)
    """</span>
    <span class="hljs-comment"># ä½¿ç”¨å¯¹æ•°å°ºåº¦ç¡®ä¿æ•°å€¼ç¨³å®š</span>
    <span class="hljs-comment"># åŸºç¡€æŸå¤± + æ¨¡å‹é¡¹ + æ•°æ®é¡¹</span>
    L = E + (A / (np.log(N + <span class="hljs-number">1</span>) ** alpha)) + (B / (np.log(D + <span class="hljs-number">1</span>) ** beta))
    <span class="hljs-keyword">return</span> L
</code></pre>
<ul>
<li>è¿™ä¸ªå‡½æ•°å®ç°äº†KMæ³•åˆ™çš„æ ¸å¿ƒå…¬å¼</li>
<li>é»˜è®¤å‚æ•°åŸºäºOpenAIè®ºæ–‡çš„è¿‘ä¼¼å€¼</li>
<li>E=2.0 ä»£è¡¨ç†è®ºä¸Šçš„æœ€å°æŸå¤±</li>
<li>alpha=0.3 å’Œ beta=0.3 æ˜¯å…³é”®ï¼Œå†³å®šäº†æ¨¡å‹å’Œæ•°æ®çš„æ”¶ç›Šé€’å‡é€Ÿåº¦</li>
</ul>
<p><strong>4.2 å•ä¸ªé¢„æµ‹ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">N_example</span> = <span class="hljs-number">1.0</span>  <span class="hljs-comment"># 10äº¿å‚æ•°</span>
<span class="hljs-attr">D_example</span> = <span class="hljs-number">5.0</span>  <span class="hljs-comment"># 50äº¿token</span>

<span class="hljs-attr">loss</span> = km_scaling_law_log(N_example, D_example)
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬é¢„æµ‹ä¸€ä¸ª10äº¿å‚æ•°ã€ç”¨50äº¿tokenè®­ç»ƒçš„æ¨¡å‹çš„æ€§èƒ½ã€‚</p>
<p><strong>4.3 è§„æ¨¡å¯¹æ¯”åˆ†æ</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">model_sizes</span> = [<span class="hljs-number">0.1</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-number">10.0</span>, <span class="hljs-number">50.0</span>, <span class="hljs-number">100.0</span>]  <span class="hljs-comment"># ä»1äº¿åˆ°1000äº¿å‚æ•°</span>
</code></pre>
<p>é€šè¿‡è¿™ä¸ªå¾ªç¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¨¡å‹è§„æ¨¡ä»1äº¿å‚æ•°å¢é•¿åˆ°100äº¿å‚æ•°æ—¶ï¼Œæ€§èƒ½å¦‚ä½•å˜åŒ–ã€‚</p>
<p><strong>4.4 è¾“å‡ºç»“æœ</strong></p>
<blockquote>
<p>=== ç¤ºä¾‹1: å•ä¸ªæ¨¡å‹æ€§èƒ½é¢„æµ‹ ===<br/>
æ¨¡å‹è§„æ¨¡: 1.0B å‚æ•°<br/>
è®­ç»ƒæ•°æ®: 5.0B token<br/>
KMæ³•åˆ™é¢„æµ‹æŸå¤±: 7.8672<br/>
å¯¹åº”çš„å›°æƒ‘åº¦: 2610.12</p>
<p>=== ç¤ºä¾‹2: ä¸åŒè§„æ¨¡æ¨¡å‹å¯¹æ¯” ===<br/>
å›ºå®šè®­ç»ƒæ•°æ®: 10.0B token<br/>
æ¨¡å‹è§„æ¨¡(B) é¢„æµ‹æŸå¤± å›°æƒ‘åº¦<br/>
-------------------------------------------------------<br/>
0.1 10.3803 32219.56<br/>
0.5 8.2408 3792.44<br/>
1.0 7.6563 2114.01<br/>
5.0 6.8261 921.62<br/>
10.0 6.6153 746.45<br/>
50.0 6.2972 543.03<br/>
100.0 6.2038 494.62</p>
<p>=== ç¤ºä¾‹3: ä¸åŒæ•°æ®é‡å¯¹æ¯” ===<br/>
å›ºå®šæ¨¡å‹è§„æ¨¡: 1.0B å‚æ•°<br/>
æ•°æ®é‡(B) é¢„æµ‹æŸå¤± å›°æƒ‘åº¦<br/>
-------------------------------------------------------<br/>
1.0 8.6974 5987.08<br/>
5.0 7.8672 2610.12<br/>
10.0 7.6563 2114.01<br/>
50.0 7.3382 1537.90<br/>
100.0 7.2448 1400.80<br/>
500.0 7.0827 1191.19<br/>
1000.0 7.0286 1128.50</p>
<p>=== ç¤ºä¾‹4: ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨ ===</p>
<p>=== ç¤ºä¾‹5: å®é™…æ¨¡å‹æ€§èƒ½é¢„æµ‹ ===<br/>
æ¨¡å‹åç§° å‚æ•°(B) æ•°æ®(B) é¢„æµ‹æŸå¤± å›°æƒ‘åº¦<br/>
----------------------------------------------------------------------<br/>
GPT-3 175 300 5.6117 273.60<br/>
LLaMA-2 7B 7 2000 6.0409 420.29<br/>
LLaMA-2 70B 70 2000 5.5744 263.58<br/>
PaLM 540 780 5.4262 227.27<br/>
Chinchilla 70 1400 5.5980 269.90</p>
<p>=== ç¤ºä¾‹6: èµ„æºåˆ†é…ç­–ç•¥ ===</p>
<p>åœ¨æ€»è®¡ç®—é‡ 1.0e+22 FLOPs ä¸‹çš„ç­–ç•¥åˆ†æ:<br/>
ç­–ç•¥ æ¨¡å‹è§„æ¨¡(B) æ•°æ®é‡(B) é¢„æµ‹æŸå¤±<br/>
-----------------------------------------------------------------<br/>
KMç­–ç•¥ 716628.6 0.0 21.8804<br/>
Chinchillaç­–ç•¥ 40.8 40.8 6.0413<br/>
æ•°æ®ä¼˜å…ˆç­–ç•¥ 0.0 716628.6 21.8804</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8147e653581848fdadb80ee5c74f212f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769303819&amp;x-signature=K4u6nF08WuJdBtUnJB1o%2BZvBLus%3D" alt="" loading="lazy"/></p>
<p>å›¾ä¾‹åˆ†æï¼š</p>
<ul>
<li>å·¦å›¾ï¼šè“è‰²æ›²çº¿æ˜¾ç¤ºï¼Œéšç€æ¨¡å‹å‚æ•°å¢åŠ ï¼ŒæŸå¤±ç¨³æ­¥ä¸‹é™ï¼Œä½†ä¸‹é™é€Ÿåº¦é€æ¸å˜ç¼“ï¼Œæ”¶ç›Šé€’å‡</li>
<li>ä¸­å›¾ï¼šçº¢è‰²æ›²çº¿æ˜¾ç¤ºï¼Œæ•°æ®é‡å¢åŠ ä¹Ÿèƒ½é™ä½æŸå¤±ï¼Œä½†æ•ˆæœä¸å¦‚å¢å¤§æ¨¡å‹è§„æ¨¡æ˜æ˜¾</li>
<li>å³å›¾ï¼š3Dæ›²é¢æ˜¾ç¤ºæŸå¤±å¦‚ä½•åŒæ—¶å—æ¨¡å‹è§„æ¨¡å’Œæ•°æ®é‡çš„å½±å“</li>
</ul>
<h2 data-id="heading-34">å››ã€Chinchillaæ‰©å±•æ³•åˆ™</h2>
<h3 data-id="heading-35">1. åŸºç¡€ç†è§£</h3>
<p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> å¯¹äºç»™å®šçš„è®¡ç®—é¢„ç®— Cï¼Œæ¨¡å‹å‚æ•°é‡ N å’Œæ•°æ®Tokené‡ D åº”è¯¥æˆæ¯”ä¾‹åœ°å¢é•¿ã€‚æ¨¡å‹ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œè€Œæ˜¯éœ€è¦ä¸è¶³å¤Ÿå¤šçš„æ•°æ®é…å¯¹ã€‚è®¸å¤šç°æœ‰çš„å¤§æ¨¡å‹æ˜¯è®­ç»ƒä¸è¶³çš„ï¼Œå‡å°æ¨¡å‹è§„æ¨¡å¹¶å¤§å¹…å¢åŠ æ•°æ®é‡ï¼Œå¯ä»¥åœ¨ç›¸åŒè®¡ç®—æˆæœ¬ä¸‹è·å¾—æ›´ä¼˜çš„æ€§èƒ½ã€‚</p>
<p><strong>è¿™ä¸ªæ€æƒ³å¯ä»¥åˆ†è§£ä¸ºä¸‰ä¸ªå…³é”®ç‚¹ï¼š</strong></p>
<p><strong>1.1 æŒ‘æˆ˜è§„æ¨¡è‡³ä¸Šçš„è§‚ç‚¹</strong></p>
<ul>
<li>ä¹‹å‰ï¼šKMæ³•åˆ™è®¤ä¸ºæ¨¡å‹è§„æ¨¡æ˜¯æå‡æ€§èƒ½çš„æœ€æœ‰æ•ˆæ æ†ã€‚</li>
<li>Chinchillaå‘ç°ï¼šKMæ³•åˆ™åŸºäºçš„å®éªŒèŒƒå›´æœ‰é™ï¼ˆæœ€å¤§æ¨¡å‹17Bï¼‰ï¼Œå½“æ¨¡å‹è§„æ¨¡æ‰©å¤§åˆ°åƒäº¿å‚æ•°æ—¶ï¼Œå…¶æ¨èçš„æ•°æ®é‡è¿œè¿œä¸å¤Ÿï¼Œå¯¼è‡´æ¨¡å‹è®­ç»ƒä¸è¶³ã€‚æ¨¡å‹è™½ç„¶å‚æ•°å¾ˆå¤šï¼Œä½†å› ä¸ºæ²¡æœ‰çœ‹åˆ°è¶³å¤Ÿçš„æ•°æ®ï¼Œæ— æ³•å……åˆ†å­¦ä¹ ï¼Œå…¶æ½œåŠ›æœªè¢«å®Œå…¨æŒ–æ˜ã€‚</li>
</ul>
<p><strong>1.2 æ­ç¤ºè®­ç»ƒä¸è¶³é—®é¢˜</strong></p>
<ul>
<li>æ¯”å–»ï¼šè¿™å°±åƒæ‹›å‹Ÿäº†ä¸€ä¸ªæ™ºå•†200çš„å¤©æ‰ï¼ˆå¤§æ¨¡å‹ï¼‰ï¼Œä½†åªç»™ä»–ä¸€æœ¬å°å­¦è¯¾æœ¬ï¼ˆå°‘é‡æ•°æ®ï¼‰å­¦ä¹ ã€‚ä»–å¾ˆå¿«å°±èƒ½æŠŠè¯¾æœ¬å€’èƒŒå¦‚æµï¼ˆè®­ç»ƒæŸå¤±å¾ˆä½ï¼‰ï¼Œä½†å¹¶æ²¡æœ‰çœŸæ­£æŒæ¡å¹¿åšçš„çŸ¥è¯†ï¼ˆæ³›åŒ–èƒ½åŠ›å·®ï¼‰ã€‚è€Œä¸€ä¸ªæ™ºå•†120çš„èªæ˜äººï¼ˆä¸­ç­‰æ¨¡å‹ï¼‰ï¼Œå¦‚æœè®©ä»–è¯»å®Œæ•´ä¸ªå›¾ä¹¦é¦†çš„è—ä¹¦ï¼ˆæµ·é‡æ•°æ®ï¼‰ï¼Œå…¶è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ä¼šè¿œè¶…é‚£ä¸ªå¤©æ‰ã€‚</li>
<li>Chinchillaè¯æ˜ï¼šåƒGPT-3 (175B)ã€Gopher (280B)è¿™æ ·çš„æ¨¡å‹ï¼Œå¦‚æœå°†å…¶å‚æ•°é‡å‡åŠï¼Œä½†å°†è®­ç»ƒæ•°æ®å¢åŠ è‡³åŸæ¥çš„4å€ï¼Œè®­ç»ƒå‡ºçš„æ¨¡å‹æ€§èƒ½åè€Œä¼šæ›´å¼ºã€‚</li>
</ul>
<p><strong>1.3 ç¡®ç«‹å¹³è¡¡åˆ†é…åŸåˆ™</strong></p>
<ul>
<li>Chinchillaçš„æœ€ç»ˆç›®æ ‡æ˜¯ä¸ºç»™å®šçš„è®¡ç®—é¢„ç®— Cï¼Œæ‰¾åˆ°æœ€ä¼˜çš„ N å’Œ D é…æ¯”ã€‚</li>
<li>å…¶æ ¸å¿ƒç»“è®ºæ˜¯ï¼šè®¡ç®—é¢„ç®—åº”è¯¥åœ¨æ¨¡å‹è§„æ¨¡å’Œè®­ç»ƒæ•°æ®ä¹‹é—´å‡ ä¹å‡ç­‰åœ°åˆ†é…ã€‚å…·ä½“æ¥è¯´ï¼Œæ¨¡å‹å‚æ•°é‡ N å’Œè®­ç»ƒæ•°æ®tokené‡ D åº”ä¸è®¡ç®—é¢„ç®— C çš„å¹³æ–¹æ ¹æˆæ­£æ¯”ã€‚</li>
</ul>
<h3 data-id="heading-36">2. æ•°å­¦å…¬å¼</h3>
<p><strong>2.1 å…¬å¼è¯´æ˜</strong></p>
<p>ä¸KMæ³•åˆ™ç±»ä¼¼ï¼ŒChinchillaå°†æµ‹è¯•æŸå¤± L å»ºæ¨¡ä¸ºæ¨¡å‹å‚æ•°é‡ N å’Œè®­ç»ƒæ•°æ®é‡ D çš„å‡½æ•°ï¼š</p>
<p><strong>L(N, D) = E + A/(N^Î±) + B/(D^Î²)</strong></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>L(N, D)ï¼š æ¨¡å‹åœ¨æœªçŸ¥æ•°æ®ä¸Šçš„æŸå¤±ï¼ˆäº¤å‰ç†µæŸå¤±ï¼‰ã€‚L è¶Šä½ï¼Œæ¨¡å‹æ€§èƒ½è¶Šå¥½ã€‚</li>
<li>Eï¼š ä¸å¯çº¦æŸå¤±ï¼Œä»£è¡¨äº†æ•°æ®åˆ†å¸ƒæœ¬èº«çš„å†…åœ¨å™ªéŸ³å’Œä¸ç¡®å®šæ€§ï¼Œæ˜¯ä»»ä½•æ¨¡å‹éƒ½æ— æ³•è¶…è¶Šçš„ç†è®ºä¸‹é™ã€‚</li>
<li>A/(N^Î±)ï¼š æ¨¡å‹å®¹é‡é¡¹ï¼Œä»£è¡¨äº†å› æ¨¡å‹å‚æ•°æœ‰é™è€Œäº§ç”Ÿçš„è¿‘ä¼¼è¯¯å·®ã€‚éšç€æ¨¡å‹å‚æ•° N å¢åŠ ï¼Œè¿™é¡¹è¯¯å·®ä¼šå‡å°ã€‚</li>
<li>B/(D^Î²)ï¼š æ•°æ®å®¹é‡é¡¹ï¼Œä»£è¡¨äº†å› è®­ç»ƒæ•°æ®æœ‰é™è€Œäº§ç”Ÿçš„ä¼°è®¡è¯¯å·®ã€‚éšç€è®­ç»ƒæ•°æ® D å¢åŠ ï¼Œè¿™é¡¹è¯¯å·®ä¼šå‡å°ã€‚</li>
</ul>
<p>å…³é”®çš„Chinchillaå‚æ•°å€¼ï¼š<br/>
DeepMindé€šè¿‡å®éªŒæ‹Ÿåˆå‡ºçš„å‚æ•°çº¦ä¸ºï¼š</p>
<ul>
<li>Î± â‰ˆ 0.38</li>
<li>Î² â‰ˆ 0.38</li>
<li>A å’Œ B æ˜¯ç›¸åº”çš„ç¼©æ”¾å¸¸æ•°ã€‚</li>
</ul>
<p><strong>2.2 ä¸KMæ³•åˆ™çš„æ•°å­¦å¯¹æ¯”</strong></p>
<p><strong>ç‰¹æ€§Â  Â  Â  Â  Â  Â  KM æ³•åˆ™Â  Â  Â  Â  Â  Â  Â  Â  Â Chinchilla æ³•åˆ™Â  Â  Â  Â  Â  Â  Â  Â  Â  Â å«ä¹‰ä¸å½±å“</strong><br/>
**æ¨¡å‹æŒ‡æ•° Î±Â ** Â |Â  ~0.076Â  |Â  ~0.38Â  |Â  Chinchillaçš„Î±å¤§äº†çº¦5å€ï¼ è¿™æ„å‘³ç€å¢åŠ æ¨¡å‹è§„æ¨¡å¸¦æ¥çš„æ€§èƒ½æ”¶ç›Šè¡°å‡å¾—å¿«å¾—å¤šã€‚æ¨¡å‹è§„æ¨¡çš„å¢é•¿ä¸å†é‚£ä¹ˆâ€œåˆ’ç®—â€ã€‚<br/>
<strong>æ•°æ®æŒ‡æ•° Î²</strong>Â  |Â  ~0.103Â  |Â  ~0.38Â  |Â  Chinchillaçš„Î²ä¹Ÿå¤§äº†çº¦3.7å€ï¼ è¿™æ„å‘³ç€å¢åŠ æ•°æ®é‡å¸¦æ¥çš„æ€§èƒ½æ”¶ç›ŠåŒæ ·è¡°å‡å¾—å¾ˆå¿«ï¼Œä½†å…¶è¡°å‡é€Ÿåº¦ç°åœ¨ä¸æ¨¡å‹é¡¹æŒå¹³ã€‚<br/>
<strong>æŒ‡æ•°å…³ç³»</strong> Â  |Â  Î± &lt; Î²Â  |Â  Â Î± â‰ˆ Î²Â  |Â  è¿™æ˜¯æœ€æ ¹æœ¬çš„å·®å¼‚ã€‚ KMè®¤ä¸ºæ¨¡å‹æ”¶ç›Šè¡°å‡æ›´æ…¢ï¼Œæ•…åº”ä¼˜å…ˆæ‰©å¤§æ¨¡å‹ã€‚Chinchillaå‘ç°ä¸¤è€…è¡°å‡é€Ÿåº¦ç›¸åŒï¼Œæ•…åº”å¹³è¡¡åˆ†é…èµ„æºã€‚</p>
<p><strong>2.3 ç›´è§‚ç†è§£æŒ‡æ•°å·®å¼‚</strong>ï¼š</p>
<p>Î± å’Œ Î² å†³å®šäº†â€œæ”¶ç›Šé€’å‡â€çš„é€Ÿåº¦ã€‚Â  Â  Â </p>
<ul>
<li>KMçš„å°æŒ‡æ•°ï¼šæ„å‘³ç€éœ€è¦æŠŠ N æˆ– D æ‰©å¤§éå¸¸å¤šï¼Œæ‰èƒ½è®© A/N^Î± æˆ– B/D^Î² è¿™ä¸€é¡¹æ˜¾è‘—å‡å°ã€‚æ”¶ç›Šæ¥å¾—æ…¢ï¼Œä½†æŒç»­ä¹…ã€‚</li>
<li>Chinchillaçš„å¤§æŒ‡æ•°ï¼šæ„å‘³ç€ N æˆ– D çš„åˆå§‹å¢é•¿èƒ½å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œä½†å¾ˆå¿«å°±ä¼šç¢°åˆ°â€œæ”¶ç›Šå¢™â€ï¼Œå†æŠ•å…¥èµ„æºçš„å›æŠ¥ç‡æ€¥å‰§ä¸‹é™ã€‚</li>
</ul>
<p><strong>2.4 äº†è§£ N_op å’Œ D_op</strong></p>
<p><strong>2.4.1 N_op å’Œ D_op æ˜¯ä»€ä¹ˆ</strong></p>
<ul>
<li>N_opï¼š æœ€ä¼˜æ¨¡å‹å‚æ•°é‡
<ul>
<li>åœ¨ç»™å®šçš„è®¡ç®—é¢„ç®— C ä¸‹ï¼Œèƒ½å¤Ÿä½¿æ¨¡å‹æ€§èƒ½è¾¾åˆ°æœ€å¥½çš„é‚£ä¸ªæ¨¡å‹è§„æ¨¡ã€‚</li>
<li>å•ä½ï¼šé€šå¸¸æ˜¯åäº¿å‚æ•°</li>
</ul>
</li>
<li>D_opï¼š æœ€ä¼˜è®­ç»ƒæ•°æ®é‡
<ul>
<li>åœ¨ç»™å®šçš„è®¡ç®—é¢„ç®— C ä¸‹ï¼Œèƒ½å¤Ÿä½¿æ¨¡å‹æ€§èƒ½è¾¾åˆ°æœ€å¥½çš„é‚£ä¸ªè®­ç»ƒæ•°æ®é‡ã€‚</li>
<li>å•ä½ï¼šé€šå¸¸æ˜¯åäº¿token</li>
</ul>
</li>
</ul>
<p><strong>2.4.2 ç¬¦å· âˆ çš„å«ä¹‰</strong></p>
<p>âˆ è¡¨ç¤º"æ­£æ¯”äº"ï¼Œæ‰€ä»¥ï¼š</p>
<ul>
<li>N_op âˆ C^0.5 æ„æ€æ˜¯ï¼šæœ€ä¼˜æ¨¡å‹è§„æ¨¡ä¸è®¡ç®—é¢„ç®—çš„å¹³æ–¹æ ¹æˆæ­£æ¯”</li>
<li>D_op âˆ C^0.5 æ„æ€æ˜¯ï¼šæœ€ä¼˜æ•°æ®é‡ä¸è®¡ç®—é¢„ç®—çš„å¹³æ–¹æ ¹æˆæ­£æ¯”</li>
</ul>
<p><strong>2.4.3 ç›´è§‚ç†è§£ï¼šåˆ‡è›‹ç³•çš„æ¯”å–»</strong></p>
<p>æƒ³è±¡æˆ‘ä»¬æœ‰ä¸€å—å›ºå®šå¤§å°çš„è›‹ç³•ï¼ˆè®¡ç®—é¢„ç®— Cï¼‰ï¼Œè¦åˆ†ç»™ä¸¤ä¸ªäººï¼š</p>
<ul>
<li>ä¸€ä¸ªäººå«"æ¨¡å‹è§„æ¨¡" (N)</li>
<li>ä¸€ä¸ªäººå«"è®­ç»ƒæ•°æ®" (D)</li>
</ul>
<p>Chinchillaæ³•åˆ™å‘Šè¯‰æˆ‘ä»¬ï¼šåº”è¯¥æŠŠè›‹ç³•å¹³å‡åˆ†ç»™è¿™ä¸¤ä¸ªäººï¼</p>
<ul>
<li>N_op âˆ C^0.5 å’Œ D_op âˆ C^0.5 å°±æ˜¯è¿™ä¸ªå¹³å‡åˆ†é…è§„åˆ™çš„æ•°å­¦è¡¨è¾¾ã€‚</li>
</ul>
<p><strong>2.4.4 å…·ä½“å®ä¾‹</strong></p>
<p>åœºæ™¯1ï¼šå°é¢„ç®—æƒ…å†µ<br/>
å‡è®¾è®¡ç®—é¢„ç®— C = 1e21 FLOPs</p>
<ul>
<li>N_op âˆ (1e21)^0.5 â‰ˆ 3.16e10 å‚æ•° â‰ˆ 31.6äº¿å‚æ•°</li>
<li>D_op âˆ (1e21)^0.5 â‰ˆ 3.16e10 token â‰ˆ 31.6äº¿token</li>
</ul>
<p>åœºæ™¯2ï¼šé¢„ç®—å¢åŠ 100å€<br/>
ç°åœ¨é¢„ç®—å¢åŠ åˆ° C = 1e23 FLOPsï¼ˆå¢åŠ äº†100å€ï¼‰</p>
<ul>
<li>N_op âˆ (1e23)^0.5 â‰ˆ 3.16e11 å‚æ•° â‰ˆ 316äº¿å‚æ•°</li>
<li>D_op âˆ (1e23)^0.5 â‰ˆ 3.16e11 token â‰ˆ 316äº¿token</li>
</ul>
<p>å¯¹æ¯”åˆ†æï¼š</p>
<ul>
<li>è®¡ç®—é¢„ç®—å˜åŒ–ï¼šé¢„ç®—å¢åŠ 100å€</li>
<li>æ¨¡å‹è§„æ¨¡å˜åŒ–ï¼šæ¨¡å‹å¢åŠ 10å€</li>
<li>æ•°æ®é‡å˜åŒ–ï¼šæ•°æ®å¢åŠ 10å€</li>
<li>å¹³æ–¹æ ¹æ•ˆåº”ï¼šé¢„ç®—çº¿æ€§å¢é•¿ï¼Œè§„æ¨¡å¹³æ–¹æ ¹å¢é•¿</li>
</ul>
<p><strong>2.4 è®¡ç®—æœ€ä¼˜åˆ†é…å…¬å¼</strong></p>
<p>åŸºäºä¸Šè¿°æ€§èƒ½é¢„æµ‹å…¬å¼ï¼ŒChinchillaæ¨å¯¼å‡ºäº†åœ¨å›ºå®šè®¡ç®—é¢„ç®— Cï¼ˆå…¶ä¸­ C â‰ˆ 6 N Dï¼‰ä¸‹ï¼Œå¦‚ä½•åˆ†é… N å’Œ D æ‰èƒ½ä½¿æŸå¤± L æœ€å°åŒ–ã€‚</p>
<p>**æ ¸å¿ƒå‘ç°ï¼š**æœ€ä¼˜é…ç½®æ˜¯è®©æ¨¡å‹å®¹é‡é¡¹å’Œæ•°æ®å®¹é‡é¡¹å¯¹æŸå¤±çš„è´¡çŒ®å¤§è‡´ç›¸ç­‰ã€‚</p>
<p>å…¶æ¨å¯¼å‡ºçš„æœ€ä¼˜æ¯”ä¾‹æ˜¯ï¼š<br/>
N_op âˆ C^a<br/>
D_op âˆ C^b<br/>
å…¶ä¸­ a = Î²/(Î±+Î²), b = Î±/(Î±+Î²)</p>
<p>ä»£å…¥Chinchillaçš„ Î±=Î²=0.38ï¼š</p>
<ul>
<li>a = 0.38/(0.38+0.38) = 0.5</li>
<li>b = 0.38/(0.38+0.38) = 0.5</li>
</ul>
<p>å› æ­¤ï¼Œæœ€ä¼˜ç­–ç•¥ä¸ºï¼š<br/>
N_op âˆ C^0.5<br/>
D_op âˆ C^0.5</p>
<p>å…·ä½“ç»éªŒæ€§ç»“è®ºï¼š<br/>
å¯¹äºä¸€ä¸ªè®¡ç®—é¢„ç®— Cï¼ŒChinchillaæ¨èï¼š</p>
<ul>
<li>æ¨¡å‹å‚æ•°é‡ N çº¦ç­‰äº (C / 20)^0.5</li>
<li>è®­ç»ƒæ•°æ®Tokené‡ D çº¦ç­‰äº (C / 20)^0.5</li>
</ul>
<p>æ³¨æ„ï¼šè¿™é‡Œçš„å¸¸æ•°20æ˜¯è€ƒè™‘äº†æ¨¡å‹å‰å‘å’Œåå‘ä¼ æ’­çš„FLOPsä¼°ç®—åçš„ä¸€ä¸ªç»éªŒå€¼ï¼Œä¸ C â‰ˆ 6ND çš„æœ¬è´¨æ€æƒ³ä¸€è‡´ã€‚</p>
<p><strong>Chinchillaæ³•åˆ™çš„æ•°å­¦å…¬å¼å‘Šè¯‰æˆ‘ä»¬ï¼š</strong></p>
<ul>
<li>æ€§èƒ½å…¬å¼ï¼šL(N, D) = E + A/N^0.38 + B/D^0.38
<ul>
<li>æ¨¡å‹å’Œæ•°æ®çš„è´¡çŒ®æ˜¯å¯¹ç§°ä¸”å¹³è¡¡çš„ã€‚</li>
</ul>
</li>
<li>åˆ†é…å…¬å¼ï¼šN_op âˆ C^0.5, D_op âˆ C^0.5
<ul>
<li>è®¡ç®—é¢„ç®—åº”è¯¥å‡ç­‰åœ°åˆ†é…ç»™æ¨¡å‹å¤æ‚åº¦å’Œæ•°æ®é‡ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-37">3. ç¤ºä¾‹åˆ†æ</h3>
<p>åœ¨å›ºå®šè®¡ç®—é¢„ç®—ä¸‹ï¼Œæ¨¡å‹å‚æ•°é‡ï¼ˆNï¼‰å’Œè®­ç»ƒæ•°æ®é‡ï¼ˆDï¼‰åº”è¯¥å¹³è¡¡å¢é•¿ï¼Œè€Œä¸æ˜¯åƒKMæ³•åˆ™é‚£æ ·åå‘æ¨¡å‹è§„æ¨¡ã€‚</p>
<p>æ ¸å¿ƒå…¬å¼ï¼šL(N, D) = E + A/N^Î± + B/D^Î²<br/>
å…¶ä¸­ Î± â‰ˆ Î² â‰ˆ 0.38ï¼Œè¿™ä¸KMæ³•åˆ™çš„ Î±=0.076, Î²=0.103 å½¢æˆé²œæ˜å¯¹æ¯”ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> mpl_toolkits.mplot3d <span class="hljs-keyword">import</span> Axes3D

<span class="hljs-comment"># è®¾ç½®ä¸­æ–‡å­—ä½“</span>
plt.rcParams[<span class="hljs-string">'font.sans-serif'</span>] = [<span class="hljs-string">'SimHei'</span>]
plt.rcParams[<span class="hljs-string">'axes.unicode_minus'</span>] = <span class="hljs-literal">False</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">chinchilla_scaling_law</span>(<span class="hljs-params">N, D, E=<span class="hljs-number">1.69</span>, A=<span class="hljs-number">406.4</span>, B=<span class="hljs-number">410.7</span>, alpha=<span class="hljs-number">0.38</span>, beta=<span class="hljs-number">0.38</span></span>):
    <span class="hljs-string">"""
    è®¡ç®—Chinchillaæ‰©å±•æ³•åˆ™é¢„æµ‹çš„æŸå¤±å€¼
    
    å‚æ•°:
    N: æ¨¡å‹å‚æ•°é‡ (å•ä½: åäº¿)
    D: è®­ç»ƒæ•°æ®é‡ (å•ä½: åäº¿token)
    E, A, B, alpha, beta: Chinchillaæ³•åˆ™çš„ç»éªŒå‚æ•°
    
    è¿”å›:
    L: é¢„æµ‹çš„æŸå¤±å€¼
    """</span>
    <span class="hljs-comment"># Chinchillaæ ¸å¿ƒå…¬å¼ - æ³¨æ„æŒ‡æ•°alphaå’Œbetaéƒ½æ¥è¿‘0.38</span>
    L = E + (A / (N ** alpha)) + (B / (D ** beta))
    <span class="hljs-keyword">return</span> L

<span class="hljs-keyword">def</span> <span class="hljs-title function_">km_scaling_law</span>(<span class="hljs-params">N, D, E=<span class="hljs-number">1.5</span>, A=<span class="hljs-number">500</span>, B=<span class="hljs-number">1000</span>, alpha=<span class="hljs-number">0.076</span>, beta=<span class="hljs-number">0.103</span></span>):
    <span class="hljs-string">"""
    KMæ‰©å±•æ³•åˆ™ç”¨äºå¯¹æ¯”
    """</span>
    L = E + (A / (N ** alpha)) + (B / (D ** beta))
    <span class="hljs-keyword">return</span> L

<span class="hljs-comment"># ç¤ºä¾‹1: å•ä¸ªæ¨¡å‹é¢„æµ‹å¯¹æ¯”</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== ç¤ºä¾‹1: Chinchilla vs KM é¢„æµ‹å¯¹æ¯” ==="</span>)
N_example = <span class="hljs-number">70</span>  <span class="hljs-comment"># 70äº¿å‚æ•°</span>
D_example = <span class="hljs-number">1500</span>  <span class="hljs-comment"># 1.5ä¸‡äº¿token</span>

loss_chinchilla = chinchilla_scaling_law(N_example, D_example)
loss_km = km_scaling_law(N_example * <span class="hljs-number">1000</span>, D_example * <span class="hljs-number">1000</span>)  <span class="hljs-comment"># è½¬æ¢ä¸ºç™¾ä¸‡å•ä½</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¨¡å‹è§„æ¨¡: <span class="hljs-subst">{N_example}</span>B å‚æ•°"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®­ç»ƒæ•°æ®: <span class="hljs-subst">{D_example}</span>B token"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Chinchillaé¢„æµ‹æŸå¤±: <span class="hljs-subst">{loss_chinchilla:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Chinchillaé¢„æµ‹å›°æƒ‘åº¦: <span class="hljs-subst">{np.exp(loss_chinchilla):<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"KMæ³•åˆ™é¢„æµ‹æŸå¤±: <span class="hljs-subst">{loss_km:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"KMæ³•åˆ™é¢„æµ‹å›°æƒ‘åº¦: <span class="hljs-subst">{np.exp(loss_km):<span class="hljs-number">.2</span>f}</span>\n"</span>)

<span class="hljs-comment"># ç¤ºä¾‹2: è®¡ç®—æœ€ä¼˜é…ç½®å¯¹æ¯”</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== ç¤ºä¾‹2: æœ€ä¼˜é…ç½®è®¡ç®—å¯¹æ¯” ==="</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">find_optimal_allocation</span>(<span class="hljs-params">compute_budget, law_type=<span class="hljs-string">'chinchilla'</span></span>):
    <span class="hljs-string">"""
    æ ¹æ®ä¸åŒçš„æ‰©å±•æ³•åˆ™æ‰¾åˆ°æœ€ä¼˜é…ç½®
    å‡è®¾è®¡ç®—é¢„ç®— C â‰ˆ 6 * N * D
    """</span>
    <span class="hljs-keyword">if</span> law_type == <span class="hljs-string">'chinchilla'</span>:
        <span class="hljs-comment"># Chinchilla: å¹³è¡¡åˆ†é…</span>
        alpha, beta = <span class="hljs-number">0.38</span>, <span class="hljs-number">0.38</span>
        N_optimal = (compute_budget / <span class="hljs-number">6</span>) ** <span class="hljs-number">0.5</span>  <span class="hljs-comment"># N âˆ C^0.5</span>
        D_optimal = (compute_budget / <span class="hljs-number">6</span>) ** <span class="hljs-number">0.5</span>  <span class="hljs-comment"># D âˆ C^0.5</span>
    <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># KMæ³•åˆ™</span>
        alpha, beta = <span class="hljs-number">0.076</span>, <span class="hljs-number">0.103</span>
        optimal_N_ratio = alpha / (alpha + beta)
        optimal_D_ratio = beta / (alpha + beta)
        N_optimal = (compute_budget / <span class="hljs-number">6</span>) ** optimal_N_ratio  <span class="hljs-comment"># N âˆ C^0.74</span>
        D_optimal = (compute_budget / <span class="hljs-number">6</span>) ** optimal_D_ratio  <span class="hljs-comment"># D âˆ C^0.26</span>
    
    <span class="hljs-keyword">return</span> N_optimal, D_optimal

<span class="hljs-comment"># æµ‹è¯•ä¸åŒè®¡ç®—é¢„ç®—ä¸‹çš„æœ€ä¼˜é…ç½®</span>
budgets = [<span class="hljs-number">1e21</span>, <span class="hljs-number">5e21</span>, <span class="hljs-number">1e22</span>, <span class="hljs-number">5e22</span>]  <span class="hljs-comment"># ä¸åŒçš„è®¡ç®—é¢„ç®—</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"è®¡ç®—é¢„ç®—(FLOPs)\tæ³•åˆ™ç±»å‹\t\tæœ€ä¼˜å‚æ•°(B)\tæœ€ä¼˜æ•°æ®(B)\tå‚/æ•°æ¯”ä¾‹"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">85</span>)

<span class="hljs-keyword">for</span> budget <span class="hljs-keyword">in</span> budgets:
    <span class="hljs-comment"># Chinchillaæœ€ä¼˜é…ç½®</span>
    N_chi, D_chi = find_optimal_allocation(budget, <span class="hljs-string">'chinchilla'</span>)
    ratio_chi = N_chi / D_chi
    
    <span class="hljs-comment"># KMæœ€ä¼˜é…ç½®  </span>
    N_km, D_km = find_optimal_allocation(budget, <span class="hljs-string">'km'</span>)
    ratio_km = N_km / D_km
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{budget:<span class="hljs-number">.1</span>e}</span>\tChinchilla\t<span class="hljs-subst">{N_chi/<span class="hljs-number">1e9</span>:<span class="hljs-number">8.1</span>f}</span>\t\t<span class="hljs-subst">{D_chi/<span class="hljs-number">1e9</span>:<span class="hljs-number">8.1</span>f}</span>\t\t<span class="hljs-subst">{ratio_chi:<span class="hljs-number">.3</span>f}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{budget:<span class="hljs-number">.1</span>e}</span>\tKMæ³•åˆ™\t\t<span class="hljs-subst">{N_km/<span class="hljs-number">1e9</span>:<span class="hljs-number">8.1</span>f}</span>\t\t<span class="hljs-subst">{D_km/<span class="hljs-number">1e9</span>:<span class="hljs-number">8.1</span>f}</span>\t\t<span class="hljs-subst">{ratio_km:<span class="hljs-number">.3</span>f}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">85</span>)

<span class="hljs-comment"># ç¤ºä¾‹3: è®­ç»ƒä¸è¶³åˆ†æ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ç¤ºä¾‹3: è®­ç»ƒä¸è¶³åˆ†æ ==="</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_under_training</span>(<span class="hljs-params">model_size_B, compute_budget</span>):
    <span class="hljs-string">"""
    åˆ†æåœ¨å›ºå®šè®¡ç®—é¢„ç®—ä¸‹ï¼Œä¸åŒæ•°æ®é‡å¯¹æ€§èƒ½çš„å½±å“
    """</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nåˆ†æ <span class="hljs-subst">{model_size_B}</span>B å‚æ•°æ¨¡å‹åœ¨ <span class="hljs-subst">{compute_budget:<span class="hljs-number">.1</span>e}</span> FLOPs é¢„ç®—ä¸‹çš„è¡¨ç°:"</span>)
    
    <span class="hljs-comment"># Chinchillaæ¨èçš„æ•°æ®é‡</span>
    N_chi_opt, D_chi_opt = find_optimal_allocation(compute_budget, <span class="hljs-string">'chinchilla'</span>)
    D_chi_for_model = compute_budget / (<span class="hljs-number">6</span> * model_size_B * <span class="hljs-number">1e9</span>)
    
    <span class="hljs-comment"># KMæ¨èçš„æ•°æ®é‡</span>
    N_km_opt, D_km_opt = find_optimal_allocation(compute_budget, <span class="hljs-string">'km'</span>) 
    D_km_for_model = compute_budget / (<span class="hljs-number">6</span> * model_size_B * <span class="hljs-number">1e9</span>)
    
    <span class="hljs-comment"># è®¡ç®—ä¸åŒæ•°æ®é‡ä¸‹çš„æŸå¤±</span>
    data_ratios = [<span class="hljs-number">0.25</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">4.0</span>]  <span class="hljs-comment"># ç›¸å¯¹äºChinchillaæ¨èçš„æ•°æ®é‡æ¯”ä¾‹</span>
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®æ¯”ä¾‹\tå®é™…æ•°æ®(B)\tChinchillaæŸå¤±\tKMæŸå¤±\t\tè®­ç»ƒçŠ¶æ€"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">75</span>)
    
    <span class="hljs-keyword">for</span> ratio <span class="hljs-keyword">in</span> data_ratios:
        actual_data = D_chi_for_model * ratio / <span class="hljs-number">1e9</span>  <span class="hljs-comment"># è½¬æ¢ä¸ºåäº¿å•ä½</span>
        loss_chi = chinchilla_scaling_law(model_size_B, actual_data)
        loss_km = km_scaling_law(model_size_B * <span class="hljs-number">1000</span>, actual_data * <span class="hljs-number">1000</span>)
        
        status = <span class="hljs-string">"ä¸¥é‡è®­ç»ƒä¸è¶³"</span> <span class="hljs-keyword">if</span> ratio &lt; <span class="hljs-number">0.5</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"è®­ç»ƒä¸è¶³"</span> <span class="hljs-keyword">if</span> ratio &lt; <span class="hljs-number">1.0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"æ¥è¿‘æœ€ä¼˜"</span> <span class="hljs-keyword">if</span> ratio &lt;= <span class="hljs-number">2.0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"æ•°æ®å……è¶³"</span>
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{ratio:<span class="hljs-number">4.2</span>f}</span>\t\t<span class="hljs-subst">{actual_data:<span class="hljs-number">8.1</span>f}</span>\t\t<span class="hljs-subst">{loss_chi:<span class="hljs-number">.4</span>f}</span>\t\t<span class="hljs-subst">{loss_km:<span class="hljs-number">.4</span>f}</span>\t\t<span class="hljs-subst">{status}</span>"</span>)

analyze_under_training(<span class="hljs-number">70</span>, <span class="hljs-number">1e22</span>)  <span class="hljs-comment"># åˆ†æ70Bæ¨¡å‹</span>

<span class="hljs-comment"># ç¤ºä¾‹4: å¯è§†åŒ–å¯¹æ¯”</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ç¤ºä¾‹4: ç”Ÿæˆå¯¹æ¯”å¯è§†åŒ–å›¾è¡¨ ==="</span>)

<span class="hljs-comment"># åˆ›å»ºè®¡ç®—é¢„ç®—èŒƒå›´</span>
compute_range = np.logspace(<span class="hljs-number">20</span>, <span class="hljs-number">24</span>, <span class="hljs-number">50</span>)  <span class="hljs-comment"># 10^20 åˆ° 10^24 FLOPs</span>

<span class="hljs-comment"># è®¡ç®—ä¸¤ç§æ³•åˆ™çš„æœ€ä¼˜é…ç½®</span>
N_chi_optimal = []
D_chi_optimal = []
N_km_optimal = [] 
D_km_optimal = []

<span class="hljs-keyword">for</span> C <span class="hljs-keyword">in</span> compute_range:
    N_chi, D_chi = find_optimal_allocation(C, <span class="hljs-string">'chinchilla'</span>)
    N_km, D_km = find_optimal_allocation(C, <span class="hljs-string">'km'</span>)
    
    N_chi_optimal.append(N_chi / <span class="hljs-number">1e9</span>)  <span class="hljs-comment"># è½¬æ¢ä¸ºåäº¿å•ä½</span>
    D_chi_optimal.append(D_chi / <span class="hljs-number">1e9</span>)
    N_km_optimal.append(N_km / <span class="hljs-number">1e9</span>)
    D_km_optimal.append(D_km / <span class="hljs-number">1e9</span>)

<span class="hljs-comment"># åˆ›å»ºå¯è§†åŒ–å›¾è¡¨</span>
fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">12</span>))

<span class="hljs-comment"># å­å›¾1: æœ€ä¼˜æ¨¡å‹è§„æ¨¡å¯¹æ¯”</span>
ax1.loglog(compute_range, N_chi_optimal, <span class="hljs-string">'r-'</span>, linewidth=<span class="hljs-number">3</span>, label=<span class="hljs-string">'Chinchillaæœ€ä¼˜'</span>)
ax1.loglog(compute_range, N_km_optimal, <span class="hljs-string">'b--'</span>, linewidth=<span class="hljs-number">2</span>, label=<span class="hljs-string">'KMæœ€ä¼˜'</span>)
ax1.set_xlabel(<span class="hljs-string">'è®¡ç®—é¢„ç®— (FLOPs)'</span>)
ax1.set_ylabel(<span class="hljs-string">'æœ€ä¼˜æ¨¡å‹è§„æ¨¡ (åäº¿å‚æ•°)'</span>)
ax1.set_title(<span class="hljs-string">'æ¨¡å‹è§„æ¨¡æ¨èå¯¹æ¯”\nChinchilla vs KM'</span>)
ax1.legend()
ax1.grid(<span class="hljs-literal">True</span>, alpha=<span class="hljs-number">0.3</span>)

<span class="hljs-comment"># æ ‡è®°å…·ä½“é¢„ç®—ç‚¹ç¤ºä¾‹</span>
sample_budget = <span class="hljs-number">1e22</span>
N_chi_sample = (sample_budget / <span class="hljs-number">6</span>) ** <span class="hljs-number">0.5</span> / <span class="hljs-number">1e9</span>
N_km_sample = (sample_budget / <span class="hljs-number">6</span>) ** (<span class="hljs-number">0.076</span>/(<span class="hljs-number">0.076</span>+<span class="hljs-number">0.103</span>)) / <span class="hljs-number">1e9</span>
ax1.annotate(<span class="hljs-string">f'åœ¨<span class="hljs-subst">{sample_budget:<span class="hljs-number">.0</span>e}</span> FLOPs:\nChinchilla: <span class="hljs-subst">{N_chi_sample:<span class="hljs-number">.0</span>f}</span>B\nKM: <span class="hljs-subst">{N_km_sample:<span class="hljs-number">.0</span>f}</span>B'</span>, 
            xy=(sample_budget, N_chi_sample), xytext=(<span class="hljs-number">1e21</span>, <span class="hljs-number">500</span>),
            arrowprops=<span class="hljs-built_in">dict</span>(arrowstyle=<span class="hljs-string">'-&gt;'</span>, color=<span class="hljs-string">'red'</span>),
            bbox=<span class="hljs-built_in">dict</span>(boxstyle=<span class="hljs-string">"round,pad=0.3"</span>, fc=<span class="hljs-string">"white"</span>, ec=<span class="hljs-string">"red"</span>, alpha=<span class="hljs-number">0.8</span>))

<span class="hljs-comment"># å­å›¾2: æœ€ä¼˜æ•°æ®é‡å¯¹æ¯”</span>
ax2.loglog(compute_range, D_chi_optimal, <span class="hljs-string">'r-'</span>, linewidth=<span class="hljs-number">3</span>, label=<span class="hljs-string">'Chinchillaæœ€ä¼˜'</span>)
ax2.loglog(compute_range, D_km_optimal, <span class="hljs-string">'b--'</span>, linewidth=<span class="hljs-number">2</span>, label=<span class="hljs-string">'KMæœ€ä¼˜'</span>)
ax2.set_xlabel(<span class="hljs-string">'è®¡ç®—é¢„ç®— (FLOPs)'</span>)
ax2.set_ylabel(<span class="hljs-string">'æœ€ä¼˜è®­ç»ƒæ•°æ®é‡ (åäº¿token)'</span>)
ax2.set_title(<span class="hljs-string">'è®­ç»ƒæ•°æ®é‡æ¨èå¯¹æ¯”\nChinchilla vs KM'</span>)
ax2.legend()
ax2.grid(<span class="hljs-literal">True</span>, alpha=<span class="hljs-number">0.3</span>)

<span class="hljs-comment"># å­å›¾3: å‚æ•°-æ•°æ®æ¯”ä¾‹å¯¹æ¯”</span>
ratio_chi = np.array(N_chi_optimal) / np.array(D_chi_optimal)
ratio_km = np.array(N_km_optimal) / np.array(D_km_optimal)

ax3.semilogx(compute_range, ratio_chi, <span class="hljs-string">'r-'</span>, linewidth=<span class="hljs-number">3</span>, label=<span class="hljs-string">'Chinchillaæ¯”ä¾‹'</span>)
ax3.semilogx(compute_range, ratio_km, <span class="hljs-string">'b--'</span>, linewidth=<span class="hljs-number">2</span>, label=<span class="hljs-string">'KMæ¯”ä¾‹'</span>)
ax3.set_xlabel(<span class="hljs-string">'è®¡ç®—é¢„ç®— (FLOPs)'</span>)
ax3.set_ylabel(<span class="hljs-string">'å‚æ•°/æ•°æ®æ¯”ä¾‹ (N/D)'</span>)
ax3.set_title(<span class="hljs-string">'èµ„æºåˆ†é…ç­–ç•¥å¯¹æ¯”\næ¯”ä¾‹è¶Šé«˜ = è¶Šåå‘æ¨¡å‹è§„æ¨¡'</span>)
ax3.legend()
ax3.grid(<span class="hljs-literal">True</span>, alpha=<span class="hljs-number">0.3</span>)

<span class="hljs-comment"># å­å›¾4: æ€§èƒ½å¯¹æ¯” - å›ºå®šè®¡ç®—é¢„ç®—ä¸‹çš„æŸå¤±</span>
fixed_budget = <span class="hljs-number">1e22</span>
model_sizes = [<span class="hljs-number">7</span>, <span class="hljs-number">20</span>, <span class="hljs-number">70</span>, <span class="hljs-number">200</span>]  <span class="hljs-comment"># ä¸åŒçš„æ¨¡å‹è§„æ¨¡ (åäº¿å‚æ•°)</span>

chinchilla_losses = []
km_losses = []

<span class="hljs-keyword">for</span> size <span class="hljs-keyword">in</span> model_sizes:
    <span class="hljs-comment"># åœ¨å›ºå®šé¢„ç®—ä¸‹ï¼Œè®¡ç®—å¯¹åº”çš„æ•°æ®é‡</span>
    data_chi = fixed_budget / (<span class="hljs-number">6</span> * size * <span class="hljs-number">1e9</span>) / <span class="hljs-number">1e9</span>  <span class="hljs-comment"># åäº¿tokenå•ä½</span>
    data_km = fixed_budget / (<span class="hljs-number">6</span> * size * <span class="hljs-number">1e9</span>) / <span class="hljs-number">1e9</span>   <span class="hljs-comment"># ç›¸åŒè®¡ç®—é¢„ç®—</span>
    
    loss_chi = chinchilla_scaling_law(size, data_chi)
    loss_km = km_scaling_law(size * <span class="hljs-number">1000</span>, data_km * <span class="hljs-number">1000</span>)
    
    chinchilla_losses.append(loss_chi)
    km_losses.append(loss_km)

ax4.plot(model_sizes, chinchilla_losses, <span class="hljs-string">'ro-'</span>, linewidth=<span class="hljs-number">2</span>, label=<span class="hljs-string">'Chinchillaé¢„æµ‹'</span>)
ax4.plot(model_sizes, km_losses, <span class="hljs-string">'bs--'</span>, linewidth=<span class="hljs-number">2</span>, label=<span class="hljs-string">'KMé¢„æµ‹'</span>)
ax4.set_xlabel(<span class="hljs-string">'æ¨¡å‹è§„æ¨¡ (åäº¿å‚æ•°)'</span>)
ax4.set_ylabel(<span class="hljs-string">'é¢„æµ‹æŸå¤±'</span>)
ax4.set_title(<span class="hljs-string">f'å›ºå®šé¢„ç®— <span class="hljs-subst">{fixed_budget:<span class="hljs-number">.0</span>e}</span> FLOPs ä¸‹\nä¸åŒæ¨¡å‹è§„æ¨¡çš„æ€§èƒ½å¯¹æ¯”'</span>)
ax4.legend()
ax4.grid(<span class="hljs-literal">True</span>, alpha=<span class="hljs-number">0.3</span>)

<span class="hljs-comment"># æ ‡è®°æœ€ä¼˜é…ç½®</span>
optimal_size_chi = (fixed_budget / <span class="hljs-number">6</span>) ** <span class="hljs-number">0.5</span> / <span class="hljs-number">1e9</span>
optimal_data_chi = (fixed_budget / <span class="hljs-number">6</span>) ** <span class="hljs-number">0.5</span> / <span class="hljs-number">1e9</span>
optimal_loss_chi = chinchilla_scaling_law(optimal_size_chi, optimal_data_chi)

ax4.axvline(x=optimal_size_chi, color=<span class="hljs-string">'red'</span>, linestyle=<span class="hljs-string">':'</span>, alpha=<span class="hljs-number">0.7</span>)
ax4.annotate(<span class="hljs-string">f'Chinchillaæœ€ä¼˜\n<span class="hljs-subst">{optimal_size_chi:<span class="hljs-number">.0</span>f}</span>Bæ¨¡å‹'</span>, 
            xy=(optimal_size_chi, optimal_loss_chi), 
            xytext=(optimal_size_chi+<span class="hljs-number">30</span>, optimal_loss_chi+<span class="hljs-number">0.1</span>),
            arrowprops=<span class="hljs-built_in">dict</span>(arrowstyle=<span class="hljs-string">'-&gt;'</span>, color=<span class="hljs-string">'red'</span>))

plt.tight_layout()
plt.show()
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<blockquote>
<p>=== ç¤ºä¾‹1: Chinchilla vs KM é¢„æµ‹å¯¹æ¯” ===<br/>
æ¨¡å‹è§„æ¨¡: 70B å‚æ•°<br/>
è®­ç»ƒæ•°æ®: 1500B token<br/>
Chinchillaé¢„æµ‹æŸå¤±: 108.0695<br/>
Chinchillaé¢„æµ‹å›°æƒ‘åº¦: 85899031069167667854303274236400488860482535424.00<br/>
KMæ³•åˆ™é¢„æµ‹æŸå¤±: 446.7954<br/>
KMæ³•åˆ™é¢„æµ‹å›°æƒ‘åº¦: 109845366723675280192034736636001868827496702856567587991204197607574163216094605052146384532230226621195552621200325104919263199725470312853558268331235709933397008939880728797698102035965018112.00</p>
</blockquote>
<p>Chinchilla: 108, KM: 447ï¼Œé¢„æµ‹çš„æŸå¤±å€¼å’Œç°å®åå·®å¾ˆå¤§ï¼Œå¯¹å‚æ•°ï¼ˆA, B, E, Î±, Î²ï¼‰éœ€è¦é‡æ–°æ ¡å‡†ã€‚</p>
<blockquote>
<p>=== ç¤ºä¾‹2: æœ€ä¼˜é…ç½®è®¡ç®—å¯¹æ¯” ===<br/>
è®¡ç®—é¢„ç®—(FLOPs) æ³•åˆ™ç±»å‹ æœ€ä¼˜å‚æ•°(B) æœ€ä¼˜æ•°æ®(B) å‚/æ•°æ¯”ä¾‹<br/>
-------------------------------------------------------------------------------------<br/>
1.0e+21 Chinchilla 12.9 12.9 1.000<br/>
1.0e+21 KMæ³•åˆ™ 0.4 432.5 0.001<br/>
-------------------------------------------------------------------------------------<br/>
5.0e+21 Chinchilla 28.9 28.9 1.000<br/>
5.0e+21 KMæ³•åˆ™ 0.8 1092.0 0.001<br/>
-------------------------------------------------------------------------------------<br/>
1.0e+22 Chinchilla 40.8 40.8 1.000<br/>
1.0e+22 KMæ³•åˆ™ 1.0 1627.3 0.001<br/>
-------------------------------------------------------------------------------------<br/>
5.0e+22 Chinchilla 91.3 91.3 1.000<br/>
5.0e+22 KMæ³•åˆ™ 2.0 4108.2 0.000<br/>
-------------------------------------------------------------------------------------</p>
</blockquote>
<p>Chinchillaæ³•åˆ™ï¼ˆå¹³è¡¡ç­–ç•¥ï¼‰ï¼š</p>
<ul>
<li>æ¨¡å‹ä¸æ•°æ®1:1å¹³è¡¡ï¼šå‚æ•°/æ•°æ®æ¯”ä¾‹å§‹ç»ˆä¸º 1.000</li>
<li>åŒæ­¥å¢é•¿ï¼šåœ¨1e21 FLOPsæ—¶ï¼Œæ¨èçº¦13Bæ¨¡å‹é…13Bæ•°æ®ï¼›åœ¨5e22 FLOPsæ—¶ï¼Œæ¨èçº¦91Bæ¨¡å‹é…91Bæ•°æ®</li>
<li>å®è·µæ„ä¹‰ï¼šè¿™æ˜¯ä¸€ç§â€œä¸­ç­‰æ¨¡å‹ + ä¸­ç­‰æ•°æ®â€çš„å¹³è¡¡å‘å±•è·¯å¾„</li>
</ul>
<p>KMæ³•åˆ™ï¼ˆæç«¯åå‘ç­–ç•¥ï¼‰ï¼š</p>
<ul>
<li>æåº¦åå‘æ•°æ®ï¼šå‚æ•°/æ•°æ®æ¯”ä¾‹ä»…ä¸º 0.001</li>
<li>æ¨¡å‹æå°ï¼Œæ•°æ®æå¤§ï¼šåœ¨1e22 FLOPsæ—¶ï¼Œæ¨è1Bæ¨¡å‹é…1627Bæ•°æ®ï¼ˆå·®äº†1600å€ï¼ï¼‰</li>
<li>å®è·µæ„ä¹‰ï¼šè¿™æ˜¯ä¸€ç§â€œæå°æ¨¡å‹ + æµ·é‡æ•°æ®â€çš„æç«¯ç­–ç•¥</li>
</ul>
<blockquote>
<p>=== ç¤ºä¾‹3: è®­ç»ƒä¸è¶³åˆ†æ ===</p>
<p>åˆ†æ 70B å‚æ•°æ¨¡å‹åœ¨ 1.0e+22 FLOPs é¢„ç®—ä¸‹çš„è¡¨ç°:<br/>
æ•°æ®æ¯”ä¾‹ å®é™…æ•°æ®(B) ChinchillaæŸå¤± KMæŸå¤± è®­ç»ƒçŠ¶æ€<br/>
-------------------------------------------------------------------------------------------------------<br/>
0.25 6.0 291.0828 624.1760 ä¸¥é‡è®­ç»ƒä¸è¶³<br/>
0.50 11.9 242.7980 596.0273 è®­ç»ƒä¸è¶³<br/>
1.00 23.8 205.6941 569.8181 æ¥è¿‘æœ€ä¼˜<br/>
2.00 47.6 177.1822 545.4149 æ¥è¿‘æœ€ä¼˜<br/>
4.00 95.2 155.2725 522.6933 æ•°æ®å……è¶³</p>
</blockquote>
<ul>
<li>é‡å¤å±•ç¤ºäº†å›ºå®šæ¨¡å‹è§„æ¨¡æ—¶ï¼Œæ•°æ®é‡çš„å…³é”®ä½œç”¨ã€‚</li>
<li>æ•°æ®é‡ç¿»å€çš„æ•ˆæœï¼šä»6Bæ•°æ®â†’95Bæ•°æ®ï¼ˆ16å€å¢é•¿ï¼‰ï¼ŒChinchillaæŸå¤±ä»291â†’155ï¼ˆå‡ ä¹å‡åŠï¼‰</li>
<li>KMæ³•åˆ™çš„ä¸¥é‡è¯¯åˆ¤ï¼šKMæ³•åˆ™é¢„æµ‹çš„æŸå¤±å§‹ç»ˆåœ¨500+çš„é«˜ä½ï¼Œå®Œå…¨æ— æ³•åæ˜ æ•°æ®å¢åŠ å¸¦æ¥çš„æ”¶ç›Š</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fb5548382894c20bbbd0dadde3fed65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769303819&amp;x-signature=KJmsE371pNyCAkF%2FQtaoF%2BvNXqk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-38">äº”ã€ä¸¤è€…çš„å¯è§†åŒ–å¯¹æ¯”</h2>
<pre><code class="hljs language-ini" lang="ini">import numpy as np
import matplotlib.pyplot as plt

<span class="hljs-comment"># è®¾ç½®ä¸­æ–‡å­—ä½“</span>
plt.rcParams<span class="hljs-section">['font.sans-serif']</span> = <span class="hljs-section">['SimHei']</span>
plt.rcParams<span class="hljs-section">['axes.unicode_minus']</span> = False

<span class="hljs-comment"># 1. å®šä¹‰è®¡ç®—é¢„ç®— C (ä»¥FLOPsä¸ºå•ä½ï¼Œä½¿ç”¨å¯¹æ•°ç­‰é—´è·ç‚¹)</span>
<span class="hljs-comment"># np.linspace(20, 24, 100) ç”Ÿæˆä¸€ä¸ªä»20åˆ°24çš„æ•°ç»„ï¼ŒåŒ…å«100ä¸ªç­‰é—´è·çš„ç‚¹ã€‚</span>
<span class="hljs-comment"># è¿™ä¸ªæ•°ç»„ä»£è¡¨è®¡ç®—é¢„ç®—çš„å¯¹æ•°å€¼ï¼ŒèŒƒå›´ä»10^20åˆ°10^24 FLOPsï¼Œè¦†ç›–äº†ä»ä¸­ç­‰åˆ°å¤§è§„æ¨¡çš„è®­ç»ƒé¢„ç®—ã€‚</span>
<span class="hljs-attr">log_C</span> = np.linspace(<span class="hljs-number">20</span>, <span class="hljs-number">24</span>, <span class="hljs-number">100</span>)
<span class="hljs-comment"># å°†å¯¹æ•°åæ ‡è½¬æ¢å›çº¿æ€§åæ ‡ï¼Œå¾—åˆ°å…·ä½“çš„è®¡ç®—é¢„ç®—å€¼Cã€‚</span>
<span class="hljs-attr">C</span> = <span class="hljs-number">10</span> ** log_C

<span class="hljs-comment"># 2. æ ¹æ®ä¸¤ç§æ³•åˆ™ä¼°ç®—æ¨¡å‹å‚æ•°é‡ (N) å’Œè®­ç»ƒæ•°æ®é‡ (D)</span>
<span class="hljs-comment"># æ³¨æ„ï¼šä»¥ä¸‹æ˜¯éå¸¸ç®€åŒ–çš„ç»éªŒè¿‘ä¼¼ï¼Œç”¨äºæ¼”ç¤ºä¸¤ç§æ³•åˆ™åœ¨è¶‹åŠ¿ä¸Šçš„æ ¹æœ¬å·®å¼‚ã€‚</span>

<span class="hljs-comment"># KMæ‰©å±•æ³•åˆ™é£æ ¼ (å€¾å‘äºæ›´å¤§çš„æ¨¡å‹è§„æ¨¡)ï¼š</span>
<span class="hljs-comment"># å‡è®¾æ¨¡å‹å‚æ•°é‡ N ä¸è®¡ç®—é¢„ç®— C çš„ 0.7 æ¬¡æ–¹æˆæ­£æ¯”ã€‚</span>
<span class="hljs-comment"># å‡è®¾è®­ç»ƒæ•°æ®é‡ D ä¸è®¡ç®—é¢„ç®— C çš„ 0.3 æ¬¡æ–¹æˆæ­£æ¯”ã€‚</span>
<span class="hljs-comment"># è¿™é‡Œçš„æ¯”ä¾‹å¸¸æ•° (1e8, 5e9) æ˜¯ä¸ºäº†è®©æ›²çº¿åœ¨å›¾è¡¨ä¸­å¤„äºä¸€ä¸ªåˆé€‚çš„è§†è§‰ä½ç½®è€Œä»»æ„è®¾å®šçš„ã€‚</span>
<span class="hljs-attr">N_km</span> = <span class="hljs-number">1</span>e8 * (C / <span class="hljs-number">1</span>e20) ** <span class="hljs-number">0.7</span>  <span class="hljs-comment"># åŸºç¡€å‚æ•°1äº¿ï¼ŒæŒ‰æ¯”ä¾‹ç¼©æ”¾</span>
<span class="hljs-attr">D_km</span> = <span class="hljs-number">5</span>e9 * (C / <span class="hljs-number">1</span>e20) ** <span class="hljs-number">0.3</span>  <span class="hljs-comment"># åŸºç¡€æ•°æ®50äº¿Tokenï¼ŒæŒ‰æ¯”ä¾‹ç¼©æ”¾</span>

<span class="hljs-comment"># Chinchillaæ‰©å±•æ³•åˆ™é£æ ¼ (æ¨¡å‹ä¸æ•°æ®å¹³è¡¡å¢é•¿)ï¼š</span>
<span class="hljs-comment"># å‡è®¾æ¨¡å‹å‚æ•°é‡ N å’Œè®­ç»ƒæ•°æ®é‡ D å‡ä¸è®¡ç®—é¢„ç®— C çš„ 0.5 æ¬¡æ–¹æˆæ­£æ¯”ã€‚</span>
<span class="hljs-comment"># è¿™ä½“ç°äº†å…¶æ ¸å¿ƒæ€æƒ³ï¼šå¯¹äºå›ºå®šçš„è®¡ç®—é¢„ç®—ï¼Œåº”åœ¨Nå’ŒDä¹‹é—´è¿›è¡Œå¹³è¡¡åˆ†é…ã€‚</span>
<span class="hljs-attr">N_chi</span> = <span class="hljs-number">5</span>e8 * (C / <span class="hljs-number">1</span>e20) ** <span class="hljs-number">0.5</span> <span class="hljs-comment"># åŸºç¡€å‚æ•°5äº¿ï¼ŒæŒ‰æ¯”ä¾‹ç¼©æ”¾</span>
<span class="hljs-attr">D_chi</span> = <span class="hljs-number">2</span>e10 * (C / <span class="hljs-number">1</span>e20) ** <span class="hljs-number">0.5</span> <span class="hljs-comment"># åŸºç¡€æ•°æ®200äº¿Tokenï¼ŒæŒ‰æ¯”ä¾‹ç¼©æ”¾</span>

<span class="hljs-comment"># 3. åˆ›å»ºå›¾è¡¨è¿›è¡Œå¯è§†åŒ–</span>
<span class="hljs-comment"># plt.subplots(1, 2) åˆ›å»ºä¸€å€‹åŒ…å«1è¡Œ2åˆ—å­å›¾çš„å›¾å½¢çª—å£ã€‚</span>
<span class="hljs-comment"># figsize=(14, 5) è®¾ç½®æ•´ä¸ªå›¾å½¢çª—å£çš„å°ºå¯¸ä¸ºå®½14è‹±å¯¸ã€é«˜5è‹±å¯¸ã€‚</span>
fig, (ax1, ax2) = plt.subplots(1, 2, <span class="hljs-attr">figsize</span>=(<span class="hljs-number">14</span>, <span class="hljs-number">5</span>))

<span class="hljs-comment"># å›¾è¡¨1ï¼šæ¨¡å‹å‚æ•°é‡ (N) å¯¹æ¯”</span>
<span class="hljs-comment"># åœ¨ç¬¬ä¸€ä¸ªå­å›¾(ax1)ä¸Šï¼Œç”¨è“è‰²å®çº¿ç»˜åˆ¶KMæ³•åˆ™çš„Nï¼Œç”¨çº¢è‰²è™šçº¿ç»˜åˆ¶Chinchillaæ³•åˆ™çš„Nã€‚</span>
ax1.loglog(C, N_km, 'b-', <span class="hljs-attr">linewidth</span>=<span class="hljs-number">2</span>, label=<span class="hljs-string">'KMæ³•åˆ™ (æ¨¡å‹è§„æ¨¡ä¼˜å…ˆ)'</span>)
ax1.loglog(C, N_chi, 'r--', <span class="hljs-attr">linewidth</span>=<span class="hljs-number">2</span>, label=<span class="hljs-string">'Chinchillaæ³•åˆ™ (å¹³è¡¡ç­–ç•¥)'</span>)
<span class="hljs-comment"># è®¾ç½®åæ ‡è½´æ ‡ç­¾ã€æ ‡é¢˜å’Œå›¾ä¾‹ã€‚</span>
ax1.set_xlabel('è®¡ç®—é¢„ç®— C (FLOPs)')
ax1.set_ylabel('æ¨¡å‹å‚æ•°é‡ (N)')
ax1.set_title('æ¨¡å‹è§„æ¨¡é¢„æµ‹å¯¹æ¯”')
ax1.legend() <span class="hljs-comment"># æ˜¾ç¤ºå›¾ä¾‹</span>
ax1.grid(True, <span class="hljs-attr">which</span>=<span class="hljs-string">"both"</span>, ls=<span class="hljs-string">"-"</span>, alpha=<span class="hljs-number">0.2</span>) <span class="hljs-comment"># æ·»åŠ ç½‘æ ¼çº¿ï¼Œä¾¿äºè¯»æ•°</span>

<span class="hljs-comment"># å›¾è¡¨2ï¼šè®­ç»ƒæ•°æ®é‡ (D) å¯¹æ¯”</span>
<span class="hljs-comment"># åœ¨ç¬¬äºŒä¸ªå­å›¾(ax2)ä¸Šï¼Œç”¨åŒæ ·çš„çº¿å‹å’Œé¢œè‰²ç»˜åˆ¶ä¸¤ç§æ³•åˆ™çš„Dã€‚</span>
ax2.loglog(C, D_km, 'b-', <span class="hljs-attr">linewidth</span>=<span class="hljs-number">2</span>, label=<span class="hljs-string">'KMæ³•åˆ™'</span>)
ax2.loglog(C, D_chi, 'r--', <span class="hljs-attr">linewidth</span>=<span class="hljs-number">2</span>, label=<span class="hljs-string">'Chinchillaæ³•åˆ™'</span>)
ax2.set_xlabel('è®¡ç®—é¢„ç®— C (FLOPs)')
ax2.set_ylabel('è®­ç»ƒæ•°æ®Tokené‡ (D)')
ax2.set_title('è®­ç»ƒæ•°æ®é‡é¢„æµ‹å¯¹æ¯”')
ax2.legend()
ax2.grid(True, <span class="hljs-attr">which</span>=<span class="hljs-string">"both"</span>, ls=<span class="hljs-string">"-"</span>, alpha=<span class="hljs-number">0.2</span>)

<span class="hljs-comment"># è‡ªåŠ¨è°ƒæ•´å­å›¾å‚æ•°ï¼Œä½¿ä¹‹å¡«å……æ•´ä¸ªå›¾åƒåŒºåŸŸï¼Œé¿å…é‡å ã€‚</span>
plt.tight_layout()
<span class="hljs-comment"># æ˜¾ç¤ºå›¾å½¢</span>
plt.show()
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34d14712a0fe4569a16a79a2e4d164dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769303819&amp;x-signature=Q1jz9uZ177b2YV90F2SQPaClEes%3D" alt="" loading="lazy"/></p>
<p>å›¾ä¾‹åˆ†æï¼š</p>
<p><strong>å·¦å›¾ï¼šæ¨¡å‹è§„æ¨¡é¢„æµ‹å¯¹æ¯”</strong></p>
<ul>
<li>Xè½´æ˜¯â€œè®¡ç®—é¢„ç®— C (FLOPs)â€ï¼Œé‡‡ç”¨å¯¹æ•°åˆ»åº¦ã€‚</li>
<li>Yè½´æ˜¯â€œæ¨¡å‹å‚æ•°é‡ (N)â€ï¼Œé‡‡ç”¨å¯¹æ•°åˆ»åº¦ã€‚</li>
<li>å›¾ä¸­åŒ…å«ä¸¤æ¡çº¿ï¼š
<ul>
<li>ä¸€æ¡è“è‰²å®çº¿ï¼ˆKMæ³•åˆ™ï¼‰ï¼šè¿™æ¡çº¿éå¸¸é™¡å³­ï¼Œæ„å‘³ç€éšç€è®¡ç®—é¢„ç®—çš„å¢åŠ ï¼ŒKMæ³•åˆ™å»ºè®®çš„æ¨¡å‹å‚æ•°é‡ä¼šæ€¥å‰§å¢é•¿ã€‚</li>
<li>ä¸€æ¡çº¢è‰²è™šçº¿ï¼ˆChinchillaæ³•åˆ™ï¼‰ï¼šè¿™æ¡çº¿ç›¸æ¯”è“çº¿å¹³ç¼“å¾—å¤šï¼Œæ„å‘³ç€åœ¨ç›¸åŒçš„è®¡ç®—é¢„ç®—ä¸‹ï¼ŒChinchillaæ³•åˆ™æ¨èçš„æ¨¡å‹è§„æ¨¡è¿œå°äºKMæ³•åˆ™çš„æ¨èã€‚</li>
</ul>
</li>
</ul>
<p><strong>å³å›¾ï¼šè®­ç»ƒæ•°æ®é‡é¢„æµ‹å¯¹æ¯”</strong></p>
<ul>
<li>Xè½´åŒæ ·æ˜¯â€œè®¡ç®—é¢„ç®— C (FLOPs)â€ã€‚</li>
<li>Yè½´æ˜¯â€œè®­ç»ƒæ•°æ®Tokené‡ (D)â€ã€‚</li>
<li>å›¾ä¸­åŒæ ·åŒ…å«ä¸¤æ¡çº¿ï¼š
<ul>
<li>ä¸€æ¡è“è‰²å®çº¿ï¼ˆKMæ³•åˆ™ï¼‰ï¼šè¿™æ¡çº¿éå¸¸å¹³ç¼“ï¼Œæ„å‘³ç€KMæ³•åˆ™è®¤ä¸ºæ•°æ®é‡åªéœ€è¦éšç€ç®—åŠ›ç¼“æ…¢å¢åŠ ã€‚</li>
<li>ä¸€æ¡çº¢è‰²è™šçº¿ï¼ˆChinchillaæ³•åˆ™ï¼‰ï¼šè¿™æ¡çº¿éå¸¸é™¡å³­ï¼Œæ„å‘³ç€Chinchillaæ³•åˆ™å»ºè®®çš„æ•°æ®é‡éœ€è¦éšç€ç®—åŠ›è¿…çŒ›å¢é•¿ï¼Œå…¶æ¨èé‡è¿œè¶…KMæ³•åˆ™ã€‚</li>
</ul>
</li>
</ul>
<p>å›¾ç¤ºç»“è®ºï¼š</p>
<ul>
<li>KMæ³•åˆ™ï¼ˆè“è‰²ï¼‰ æ˜¯ â€œå¤§æ¨¡å‹ï¼Œé€‚é‡æ•°æ®â€ çš„ç­–ç•¥ã€‚å®ƒæŠŠå¤§éƒ¨åˆ†æ–°å¢çš„ç®—åŠ›éƒ½æŠ•å…¥åˆ°äº†æ‰©å¤§æ¨¡å‹å‚æ•°ä¸Šã€‚</li>
<li>Chinchillaæ³•åˆ™ï¼ˆçº¢è‰²ï¼‰ æ˜¯ â€œé€‚ä¸­æ¨¡å‹ï¼Œæµ·é‡æ•°æ®â€ çš„ç­–ç•¥ã€‚å®ƒè®¤ä¸ºç®—åŠ›åº”è¯¥åœ¨æ¨¡å‹å’Œæ•°æ®ä¹‹é—´å–å¾—å¹³è¡¡ï¼Œç”šè‡³æ›´å€¾å‘äºä¸ºæ¨¡å‹é…å¤‡è¿œè¶…ä»¥å¾€è®¤çŸ¥çš„æ•°æ®é‡ã€‚</li>
</ul>
<h2 data-id="heading-39">å…­ã€æ€»ç»“</h2>
<p>å¤§æ¨¡å‹æ‰©å±•æ³•åˆ™æ­ç¤ºäº†è®¡ç®—é¢„ç®—çš„æœ€ä¼˜åˆ†é…åŸç†ï¼ŒKMæ³•åˆ™ä¸»å¼ â€œè§„æ¨¡è‡³ä¸Šâ€ï¼Œè®¤ä¸ºåº”ä¼˜å…ˆæ‰©å¤§æ¨¡å‹å‚æ•°ï¼Œæ•°æ®é€‚é‡å³å¯ã€‚è€ŒChinchillaæ³•åˆ™é€šè¿‡å®éªŒè¯æ˜ï¼Œè®¸å¤šå¤§æ¨¡å‹å®é™…å¤„äºè®­ç»ƒä¸è¶³çŠ¶æ€ï¼Œæå‡ºæ¨¡å‹ä¸æ•°æ®åº”å¹³è¡¡å¢é•¿çš„æ•ˆç‡ä¼˜å…ˆåŸåˆ™ã€‚</p>
<p>Chinchillaæ³•åˆ™å®Œæˆäº†å…³é”®èŒƒå¼è½¬ç§»ï¼Œé€šè¿‡ç³»ç»Ÿå®éªŒè¯æ˜ï¼šå¹³è¡¡åˆ†é…è®¡ç®—é¢„ç®—è‡³æ¨¡å‹å‚æ•°é‡ä¸è®­ç»ƒæ•°æ®é‡ï¼Œæ‰èƒ½åœ¨å›ºå®šæˆæœ¬ä¸‹å®ç°æ€§èƒ½æœ€ä¼˜ã€‚å…¶æ ¸å¿ƒåœ¨äºå°†èµ„æºåˆ†é…ä»KMçš„7:3å€¾æ–œè°ƒæ•´ä¸º1:1å¹³è¡¡ã€‚è¿™ä¸€è½¬å˜å…·æœ‰æ·±è¿œå½±å“ï¼šæ•°æ®ä»·å€¼è¢«é‡æ–°è¯„ä¼°ï¼Œæ¨¡å‹å¼€å‘ä»ç›²ç›®è¿½æ±‚å‚æ•°é‡è½¬å‘å¯»æ±‚æœ€ä¼˜é…æ¯”ã€‚å®è·µä¸­ï¼ŒChinchillaæ³•åˆ™å‚¬ç”Ÿäº†LLaMAç­‰"å°æ¨¡å‹ã€å¤§æ•°æ®"çš„é«˜æ•ˆæ¶æ„ï¼Œæ˜¾è‘—é™ä½äº†AIåº”ç”¨é—¨æ§›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æŠ€æœ¯ä¸“é¢˜ã€‘AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å…¥é—¨-æ‹¥æŠ±Hugging Faceä¸Transformersç”Ÿæ€ - ä½¿ç”¨TransformersåŠ è½½é¢„è®­ç»ƒæ¨¡å‹]]></title>    <link>https://juejin.cn/post/7596181746062163995</link>    <guid>https://juejin.cn/post/7596181746062163995</guid>    <pubDate>2026-01-18T03:30:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596181746062163995" data-draft-id="7596299957277392923" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æŠ€æœ¯ä¸“é¢˜ã€‘AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å…¥é—¨-æ‹¥æŠ±Hugging Faceä¸Transformersç”Ÿæ€ - ä½¿ç”¨TransformersåŠ è½½é¢„è®­ç»ƒæ¨¡å‹"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-18T03:30:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é”‹java1234"/> <meta itemprop="url" content="https://juejin.cn/user/4152222342709933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æŠ€æœ¯ä¸“é¢˜ã€‘AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å…¥é—¨-æ‹¥æŠ±Hugging Faceä¸Transformersç”Ÿæ€ - ä½¿ç”¨TransformersåŠ è½½é¢„è®­ç»ƒæ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4152222342709933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é”‹java1234
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T03:30:39.000Z" title="Sun Jan 18 2026 03:30:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é”‹å“¥ã€‚æœ€è¿‘è¿è½½æ›´æ–°ã€ŠAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å…¥é—¨-æ‹¥æŠ±Hugging Faceä¸Transformersç”Ÿæ€ã€‹æŠ€æœ¯ä¸“é¢˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e555168d8d22402bbc1d9ca4003c5c86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311838&amp;x-signature=NsKPGZdSUwGg8LSv0Fzi1y1FUss%3D" alt="QQæˆªå›¾20260117190029.jpg" loading="lazy"/> æœ¬è¯¾ç¨‹ä¸»è¦ä»‹ç»å’Œè®²è§£Hugging Faceå’ŒTransformersï¼ŒåŒ…æ‹¬åŠ è½½é¢„è®­ç»ƒæ¨¡å‹ï¼Œè‡ªå®šä¹‰æ•°æ®é›†ï¼Œæ¨¡å‹æ¨ç†ï¼Œæ¨¡å‹å¾®è°ƒï¼Œæ¨¡å‹æ€§èƒ½è¯„ä¼°ç­‰ã€‚æ˜¯AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„å…¥é—¨å¿…å¤‡çŸ¥è¯†ã€‚ åŒæ—¶ä¹Ÿé…å¥—è§†é¢‘æ•™ç¨‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV11L6RBwE8m%2F" title="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV11L6RBwE8m%2F" target="_blank">ã€Š2027ç‰ˆ AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å…¥é—¨-æ‹¥æŠ±Hugging Faceä¸Transformersç”Ÿæ€ è§†é¢‘æ•™ç¨‹(æ— åºŸè¯ç‰ˆ) ç©å‘½æ›´æ–°ä¸­~ã€‹</a></p>
<h2 data-id="heading-0">cudaï¼Œcudnnï¼ŒPytorchå®‰è£…</h2>
<p>æˆ‘ä»¬ç”¨Pytorchè¿è¡Œæ·±åº¦å­¦ä¹ é¡¹ç›®ï¼Œå¯ç”¨cpuï¼Œä¹Ÿå¯ä»¥ç”¨gpuåŠ é€Ÿã€‚æœ‰äº›å‚ç›´çš„å¤§æ¨¡å‹æˆ–è€…æ˜¯å›¾ç‰‡è®­ç»ƒï¼Œç”¨cpuå¾ˆæ…¢ã€‚æ‰€ä»¥æˆ‘ä»¬åé¢å­¦ä¹ AIå¤§æ¨¡å‹ï¼Œéƒ½é‡‡ç”¨gpuåŠ é€Ÿè®­ç»ƒå’Œè°ƒç”¨ã€‚</p>
<p>é¦–å…ˆç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬çœ‹ä¸‹è‡ªå·±ç”µè„‘æ˜¯å¦æœ‰è‹±ä¼Ÿè¾¾æ˜¾å¡ï¼Œ</p>
<p>æˆ‘ä»¬å¯ä»¥è¿›å…¥ä»»åŠ¡ç®¡ç†å™¨ï¼Œé€‰æ‹©æ€§èƒ½ï¼Œæœ€åº•éƒ¨ï¼Œå¯ä»¥çœ‹åˆ°GPUï¼Œä»¥åŠå³ä¾§å¯ä»¥çœ‹åˆ°æ˜¾å¡ç‰ˆæœ¬ï¼Œåº•éƒ¨å¯ä»¥çœ‹åˆ°æ˜¾å­˜ä¿¡æ¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c59a0b87702452b8efe46da910e4560~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311838&amp;x-signature=5K9AgIsvu%2FoS%2FwAZKg8Hf5G%2BScs%3D" alt="image.png" loading="lazy"/></p>
<p>å‰é¢æˆ‘ä»¬å­¦ä¹ è¿‡Pytorchæ·±åº¦å­¦ä¹ åº“ï¼Œè¿™é‡Œä¸åšå¤šè§£é‡Šã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥å®‰è£…ä¸‹cuda,</p>
<p>CUDAï¼ˆCompute Unified Device Architectureï¼‰æ˜¯ç”±NVIDIAå¼€å‘çš„ä¸€ç§å¹¶è¡Œè®¡ç®—æ¶æ„ï¼Œæ—¨åœ¨åˆ©ç”¨NVIDIA GPUçš„å¼ºå¤§è®¡ç®—èƒ½åŠ›æ¥è¿›è¡Œé€šç”¨è®¡ç®—ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—çš„å¼€å‘å·¥å…·ã€åº“å’ŒAPIï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿåœ¨NVIDIAç¡¬ä»¶ä¸Šåˆ›å»ºé«˜æ€§èƒ½çš„è®¡ç®—å¯†é›†å‹åº”ç”¨ç¨‹åºã€‚CUDAè®©å¼€å‘è€…èƒ½å¤Ÿç¼–å†™ä½¿ç”¨Cã€C++å’ŒFortranç­‰ç¼–ç¨‹è¯­è¨€çš„ä»£ç ï¼Œè¿™äº›ä»£ç å¯ä»¥åœ¨GPUä¸Šé«˜æ•ˆè¿è¡Œï¼Œä»è€ŒåŠ é€Ÿè®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼Œæ¯”å¦‚ç§‘å­¦è®¡ç®—ã€å›¾åƒå¤„ç†ã€æ·±åº¦å­¦ä¹ ç­‰ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹ç³»ç»Ÿæ”¯æŒçš„æœ€é«˜CUDAç‰ˆæœ¬ã€‚åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥<code>nvidia-smi</code>ï¼ŒæŸ¥çœ‹ç»“æœä¸­çš„CUDAç‰ˆæœ¬ä¿¡æ¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ffff1615bc043ef96a84f7aef73b956~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311838&amp;x-signature=RjwmRfwqqm7nYVMCIYiJ57jCuns%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘è¿™è¾¹æ˜¾ç¤ºçš„æ˜¯12.6</p>
<p>æˆ‘ä»¬å» <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.nvidia.com%2Fcuda-toolkit-archive" target="_blank" title="https://developer.nvidia.com/cuda-toolkit-archive" ref="nofollow noopener noreferrer">developer.nvidia.com/cuda-toolkiâ€¦</a> ç½‘å€ ä¸‹è½½å¯¹åº”çš„CUDAç‰ˆæœ¬</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8005daae17c54ce1899484802f93a0ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311838&amp;x-signature=JzqmxWLnbxpVuqUttPLx%2F1noE7E%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹è½½åï¼Œé»˜è®¤å®‰è£…å³å¯ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å®‰è£…ä¸‹cudnn</p>
<p>cuDNNï¼ˆCUDA Deep Neural Network libraryï¼‰æ˜¯NVIDIAä¸ºæ·±åº¦å­¦ä¹ åº”ç”¨æä¾›çš„é«˜æ€§èƒ½åº“ã€‚å®ƒä½œä¸ºCUDAçš„ä¸€ä¸ªæ·±åº¦å­¦ä¹ æ‰©å±•ï¼Œä¸“é—¨é’ˆå¯¹æ·±åº¦ç¥ç»ç½‘ç»œçš„è®­ç»ƒå’Œæ¨ç†è¿›è¡Œäº†ä¼˜åŒ–ã€‚cuDNNåˆ©ç”¨GPUçš„å¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œæä¾›äº†å¤šç§æ·±åº¦å­¦ä¹ ä¸­å¸¸ç”¨çš„æ“ä½œï¼Œå¦‚å·ç§¯ã€æ± åŒ–ã€æ¿€æ´»å‡½æ•°å’Œå½’ä¸€åŒ–ç­‰ã€‚</p>
<p>æˆ‘ä»¬å» <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.nvidia.com%2Frdp%2Fcudnn-archive" target="_blank" title="https://developer.nvidia.com/rdp/cudnn-archive" ref="nofollow noopener noreferrer">developer.nvidia.com/rdp/cudnn-aâ€¦</a> è¿™é‡Œä¸‹è½½å¯¹åº”CUDAçš„cudnnã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61fe96fbc5264275ae233e67eed8b92e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311838&amp;x-signature=ii4qWaM2cSEVDRK4iurnut1OajI%3D" alt="image.png" loading="lazy"/></p>
<p>CUDAé»˜è®¤å®‰è£…è·¯å¾„æ˜¯ï¼šC:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.6</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ece9e310c314c06979d6b4c22c7400b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311838&amp;x-signature=2BfOtUfbt4UiO0AvtDcVV41X9D0%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬æŠŠä¸‹è½½åçš„cudnnè§£å‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4b7963a8b2f4212810b5ddd9be31041~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311838&amp;x-signature=dBvk3WCXuIySZ23y6846WIBiKzQ%3D" alt="image.png" loading="lazy"/></p>
<p>æŠŠbinï¼Œincludeï¼Œlibä¸‹çš„å…·ä½“å†…å®¹å¤åˆ¶åˆ°CUDAç›®å½•ä¸‹çš„binï¼Œincludeï¼Œlibä¸‹å³å¯ã€‚</p>
<p>æœ€åæˆ‘ä»¬å®‰è£…ä¸‹Pytorchï¼Œè¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å®‰è£…çš„æ”¯æŒæŒ‡å®šç‰ˆæœ¬CUDAçš„PyTorchåº“ã€‚</p>
<p>æ‰“å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fpytorch.org%2Fget-started%2Flocally%2F" target="_blank" title="https://pytorch.org/get-started/locally/" ref="nofollow noopener noreferrer">pytorch.org/get-startedâ€¦</a> ç½‘å€ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6c8cd0bc66f4d9d8fffb4d4f9d14bd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311838&amp;x-signature=8Svjc7fnj6Bi7FaaYrhXHf%2F4NUw%3D" alt="image.png" loading="lazy"/></p>
<p>é€‰æ‹©å¥½CUDAç‰ˆæœ¬ï¼Œæœ€ä¸‹é¢è‡ªåŠ¨ç»™æˆ‘ä»¬æ„å»ºå¥½å®‰è£…å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">pip install torch torchvision --<span class="hljs-keyword">index</span>-url https:<span class="hljs-regexp">//d</span>ownload.pytorch.org/whl/cu126
</code></pre>
<p>æµ‹è¯•ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> torch
<span class="hljs-built_in">print</span>(torch.cuda.is_available())
</code></pre>
<p>å¦‚æœè¿”å›Trueå°±è¡¨ç¤ºå®‰è£…æˆåŠŸï¼Œå¦‚æœè¿”å›Falseï¼Œè¯´æ˜å®‰è£…å¤±è´¥ï¼Œå»ºè®®é‡ç‚¹æ£€æŸ¥ç‰ˆæœ¬åŒ¹é…ã€‚</p>
<h2 data-id="heading-1">åŠ è½½å’Œä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹å®ä¾‹</h2>
<p>æˆ‘ä»¬ç¬¬ä¸€ä¸ªhelloWorldç¤ºä¾‹ï¼Œç”¨ä¸‹ç»å…¸çš„Google-Bertå¤§æ¨¡å‹ã€‚</p>
<p>Google BERTï¼ˆBidirectional Encoder Representations from Transformersï¼‰æ˜¯è°·æ­Œäº2018å¹´å‘å¸ƒçš„å¼€æºè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰é¢„è®­ç»ƒæ¨¡å‹ï¼Œæ ‡å¿—ç€NLPé¢†åŸŸè¿›å…¥é¢„è®­ç»ƒæ¨¡å‹çš„æ–°æ—¶ä»£ã€‚</p>
<p>BERTçš„æ ¸å¿ƒçªç ´åœ¨äº<strong>åŒå‘ä¸Šä¸‹æ–‡ç†è§£</strong>ã€‚ä¸ä¼ ç»Ÿè¯­è¨€æ¨¡å‹ä»…ä»å·¦åˆ°å³æˆ–ä»å³åˆ°å·¦è¿›è¡Œé¢„æµ‹ä¸åŒï¼ŒBERTé€šè¿‡Transformerç¼–ç å™¨ç»“æ„ï¼ŒåŒæ—¶åˆ©ç”¨å¥å­å‰åæ‰€æœ‰è¯è¯­çš„ä¿¡æ¯è¿›è¡Œè®­ç»ƒã€‚è¿™ç§åŒå‘æ€§ä½¿å…¶èƒ½æ›´ç²¾å‡†æ•æ‰è¯­è¨€çš„å¤æ‚è¯­ä¹‰å’Œä¸Šä¸‹æ–‡å…³è”ã€‚</p>
<p>BERTé‡‡ç”¨ä¸¤é¡¹å…³é”®é¢„è®­ç»ƒä»»åŠ¡ï¼š<strong>æ©ç è¯­è¨€æ¨¡å‹ï¼ˆMLMï¼‰</strong> éšæœºé®ç›–éƒ¨åˆ†è¯è¯­è®©æ¨¡å‹é¢„æµ‹ï¼Œä»¥åŠ<strong>ä¸‹ä¸€å¥é¢„æµ‹ï¼ˆNSPï¼‰</strong> åˆ¤æ–­ä¸¤ä¸ªå¥å­æ˜¯å¦è¿ç»­ã€‚é€šè¿‡åœ¨æµ·é‡æ–‡æœ¬ä¸Šé¢„è®­ç»ƒåï¼Œåªéœ€é’ˆå¯¹ç‰¹å®šä»»åŠ¡ï¼ˆå¦‚æ–‡æœ¬åˆ†ç±»ã€é—®ç­”ã€æƒ…æ„Ÿåˆ†æï¼‰è¿›è¡Œå¾®è°ƒï¼Œå³å¯è·å¾—å“è¶Šæ€§èƒ½ã€‚</p>
<p>BERTå¼€æºåè¿…é€Ÿæˆä¸ºNLPé¢†åŸŸçš„åŸºçŸ³æ¨¡å‹ï¼Œå‚¬ç”Ÿäº†ALBERTã€RoBERTaç­‰ä¼—å¤šæ”¹è¿›æ¨¡å‹ï¼Œå¹¶å¹¿æ³›åº”ç”¨äºæœç´¢å¼•æ“ã€æ™ºèƒ½å®¢æœã€æœºå™¨ç¿»è¯‘ç­‰åœºæ™¯ï¼Œæ˜¾è‘—æå‡äº†æœºå™¨ç†è§£äººç±»è¯­è¨€çš„èƒ½åŠ›ã€‚</p>
<p>ä¸‹è½½åœ°å€ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">https:<span class="hljs-comment">//huggingface.co/google-bert/bert-base-chinese</span>
</code></pre>
<p>å®‰è£…transformersåº“ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby">pip install transformers -i <span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/mirrors.aliyun.com/pypi</span><span class="hljs-regexp">/simple/</span> Â  --trusted-host mirrors.aliyun.com
</code></pre>
<p>Transformers Pipeline æ˜¯ Hugging Face æä¾›çš„ä¸€ä¸ªé«˜å±‚æ¬¡çš„ APIï¼Œæ—¨åœ¨ç®€åŒ–ä½¿ç”¨é¢„è®­ç»ƒçš„ Transformer æ¨¡å‹è¿›è¡Œå„ç§è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä»»åŠ¡ã€‚è¿™ä¸ªå·¥å…·ä½¿å¾—å¼€å‘è€…å¯ä»¥æ–¹ä¾¿åœ°åŠ è½½ã€é…ç½®å’Œä½¿ç”¨å„ç§æ¨¡å‹ï¼Œä»¥å®Œæˆæ–‡æœ¬åˆ†ç±»ã€æ–‡æœ¬ç”Ÿæˆã€å‘½åå®ä½“è¯†åˆ«ï¼ˆNERï¼‰ã€ç¿»è¯‘ç­‰ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯å¯¹ Transformers Pipeline çš„è¯¦ç»†ä»‹ç»ï¼š</p>
<ol start="0">
<li><strong>åŸºæœ¬æ¦‚å¿µ</strong></li>
</ol>
<ul>
<li><strong>Pipelineçš„ä½œç”¨</strong>ï¼šPipeline æä¾›äº†ä¸€ç§ç®€å•çš„æ¥å£ï¼Œç”¨äºå¿«é€Ÿæ‰§è¡Œå¸¸è§çš„ NLP ä»»åŠ¡ã€‚ç”¨æˆ·åªéœ€è°ƒç”¨ç›¸åº”çš„ä»»åŠ¡å‡½æ•°ï¼Œä¸éœ€è¦æ·±å…¥ç†è§£æ¨¡å‹çš„åº•å±‚å®ç°ç»†èŠ‚ã€‚</li>
</ul>
<ol start="2">
<li><strong>æ”¯æŒçš„ä»»åŠ¡</strong></li>
</ol>
<p>Transformers æä¾›çš„ Pipeline å¯ä»¥ç”¨äºå¤šç§ NLP ä»»åŠ¡ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<ul>
<li><strong>æ–‡æœ¬åˆ†ç±»ï¼ˆText Classificationï¼‰</strong> ï¼šä¾‹å¦‚æƒ…æ„Ÿåˆ†æï¼Œç»™å®šä¸€æ®µæ–‡æœ¬ï¼Œåˆ¤æ–­å…¶æƒ…æ„Ÿå€¾å‘ï¼ˆç§¯æã€æ¶ˆæç­‰ï¼‰ã€‚</li>
<li><strong>å‘½åå®ä½“è¯†åˆ«ï¼ˆNamed Entity Recognitionï¼ŒNERï¼‰</strong> ï¼šè¯†åˆ«æ–‡æœ¬ä¸­çš„ç‰¹å®šå®ä½“ï¼Œå¦‚äººåã€åœ°åã€ç»„ç»‡åç­‰ã€‚</li>
<li><strong>é—®ç­”ï¼ˆQuestion Answeringï¼‰</strong> ï¼šç»™å®šä¸Šä¸‹æ–‡å’Œé—®é¢˜ï¼Œæ¨¡å‹è¿”å›é—®é¢˜çš„ç­”æ¡ˆã€‚</li>
<li><strong>æ–‡æœ¬ç”Ÿæˆï¼ˆText Generationï¼‰</strong> ï¼šç”Ÿæˆè¿ç»­çš„æ–‡æœ¬ï¼Œä¾‹å¦‚åŸºäºæŸäº›è¾“å…¥æ–‡æœ¬ç”Ÿæˆåˆç†çš„åç»­å†…å®¹ã€‚</li>
<li><strong>ç¿»è¯‘ï¼ˆTranslationï¼‰</strong> ï¼šå°†æ–‡æœ¬ä»ä¸€ç§è¯­è¨€ç¿»è¯‘ä¸ºå¦ä¸€ç§è¯­è¨€ã€‚</li>
<li><strong>æ‘˜è¦ï¼ˆSummarizationï¼‰</strong> ï¼šç”Ÿæˆç»™å®šé•¿æ–‡æœ¬çš„ç®€çŸ­æ‘˜è¦ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from transformers import pipeline
â€‹
<span class="hljs-comment"># æƒ…æ„Ÿåˆ†æä»»åŠ¡</span>
def test_classfication():
 Â  Â <span class="hljs-comment"># 1ï¼Œä¸‹è½½æ¨¡å‹ https://huggingface.co/google-bert/bert-base-chinese</span>
â€‹
 Â  Â <span class="hljs-comment"># 2ï¼Œåˆ›å»ºæ¨¡å‹ï¼Œé€šè¿‡ pipeline å‡½æ•°</span>
 Â  Â <span class="hljs-attr">model</span> = pipeline(
 Â  Â  Â  Â <span class="hljs-attr">task</span>=<span class="hljs-string">'text-classification'</span>, Â <span class="hljs-comment"># ä»»åŠ¡ç±»å‹</span>
 Â  Â  Â  Â <span class="hljs-attr">model</span>=<span class="hljs-string">'./Bert-base-chinese'</span>, Â <span class="hljs-comment"># æ¨¡å‹</span>
 Â  Â  Â  Â <span class="hljs-attr">device</span>=<span class="hljs-number">0</span> Â <span class="hljs-comment"># GPU è®¾å¤‡ç´¢å¼•</span>
 Â   )
â€‹
 Â  Â <span class="hljs-comment"># 3ï¼Œè°ƒç”¨æ¨¡å‹ï¼Œè¿”å›è¾“å‡ºç»“æœ</span>
 Â  Â <span class="hljs-attr">result</span> = model(<span class="hljs-string">'ä»Šå¤©å¤©æ°”ä¸é”™'</span>)
 Â  Â print(result)
â€‹
â€‹
if <span class="hljs-attr">__name__</span> == <span class="hljs-string">'__main__'</span>:
 Â  Â test_classfication()
</code></pre>
<p>è¿è¡Œè¾“å‡ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c63bed3d6bd46eab71aeb581f7a4be5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311838&amp;x-signature=0KLCO2tcfuXqIX2IJy4Ozjd7Vnk%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ Hugging Face çš„ Transformers åº“ä¸­ï¼Œ<code>pipeline</code> æ–¹æ³•ç”¨äºç®€åŒ–æ¨¡å‹çš„ä½¿ç”¨ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿè½»æ¾åœ°æ‰§è¡Œå„ç§è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ã€‚è¿™ä¸ªæ–¹æ³•çš„å‚æ•°å…è®¸ç”¨æˆ·æ ¹æ®ä¸åŒçš„éœ€æ±‚é…ç½®å’Œä½¿ç”¨æ¨¡å‹ã€‚ä»¥ä¸‹æ˜¯ <code>pipeline</code> æ–¹æ³•ä¸»è¦å‚æ•°çš„ç®€ä»‹ï¼š</p>
<ol start="0">
<li><strong>task</strong></li>
</ol>
<ul>
<li><strong>ç±»å‹</strong>ï¼š<code>str</code></li>
<li><strong>æè¿°</strong>ï¼šæŒ‡å®šè¦æ‰§è¡Œçš„ä»»åŠ¡ç±»å‹ï¼Œä¾‹å¦‚ <code>"sentiment-analysis"</code>ã€<code>"text-classification"</code>ã€<code>"translation"</code>ã€<code>"question-answering"</code> ç­‰ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>pipeline("sentiment-analysis")</code></li>
</ul>
<ol start="2">
<li><strong>model</strong></li>
</ol>
<ul>
<li><strong>ç±»å‹</strong>ï¼š<code>str</code> æˆ– <code>PreTrainedModel</code></li>
<li><strong>æè¿°</strong>ï¼šæŒ‡å®šè¦åŠ è½½çš„æ¨¡å‹åç§°æˆ–è·¯å¾„ã€‚å¯ä»¥ä½¿ç”¨ Hugging Face æ¨¡å‹åº“ä¸­çš„æ¨¡å‹åç§°ï¼Œä¹Ÿå¯ä»¥æŒ‡å‘æœ¬åœ°ä¿å­˜çš„æ¨¡å‹è·¯å¾„ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>pipeline("translation", model="Helsinki-NLP/opus-mt-en-fr")</code></li>
</ul>
<ol start="3">
<li><strong>tokenizer</strong></li>
</ol>
<ul>
<li><strong>ç±»å‹</strong>ï¼š<code>str</code> æˆ– <code>PreTrainedTokenizer</code></li>
<li><strong>æè¿°</strong>ï¼šæŒ‡å®šè¦ä½¿ç”¨çš„åˆ†è¯å™¨åç§°æˆ–è·¯å¾„ã€‚é€šå¸¸ï¼Œå¦‚æœæ¨¡å‹å’Œ tokenizer æ˜¯é…å¥—çš„ï¼Œå¯ä»¥çœç•¥æ­¤å‚æ•°ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨åŠ è½½åˆé€‚çš„ tokenizerã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>pipeline("text-classification", model="dbmdz/distilbert-base-uncased-finetuned-sst-2-english", tokenizer="dbmdz/distilbert-base-uncased-finetuned-sst-2-english")</code></li>
</ul>
<ol start="4">
<li><strong>config</strong></li>
</ol>
<ul>
<li><strong>ç±»å‹</strong>ï¼š<code>str</code> æˆ– <code>PretrainedConfig</code></li>
<li><strong>æè¿°</strong>ï¼šæŒ‡å®šæ¨¡å‹é…ç½®çš„åç§°æˆ–è·¯å¾„ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé™¤ééœ€è¦ç‰¹åˆ«å®šåˆ¶æ¨¡å‹çš„è¡Œä¸ºï¼Œå¦åˆ™å¯ä»¥çœç•¥æ­¤å‚æ•°ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>pipeline("ner", model="bert-base-uncased", config="path/to/config.json")</code></li>
</ul>
<ol start="5">
<li><strong>device</strong></li>
</ol>
<ul>
<li><strong>ç±»å‹</strong>ï¼š<code>int</code></li>
<li><strong>æè¿°</strong>ï¼šæŒ‡å®šè¦ä½¿ç”¨çš„è®¡ç®—è®¾å¤‡ã€‚å¯ä»¥ç”¨äºé€‰æ‹© CPUï¼ˆ-1ï¼‰æˆ– GPUï¼ˆä¸€èˆ¬ä¸º 0ï¼Œ1ï¼Œ2 ç­‰ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰å¤šä¸ª GPUï¼Œå¯ä»¥æŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>pipeline("text-classification", model="model-name", device=0)</code>ï¼ˆä½¿ç”¨ç¬¬ä¸€ä¸ª GPUï¼‰</li>
</ul>
<ol start="6">
<li><strong>revision</strong></li>
</ol>
<ul>
<li><strong>ç±»å‹</strong>ï¼š<code>str</code></li>
<li><strong>æè¿°</strong>ï¼šæŒ‡å®šæ¨¡å‹çš„ç‰¹å®šç‰ˆæœ¬ï¼Œä¾‹å¦‚åˆ†æ”¯æˆ–æ ‡ç­¾ç­‰ã€‚å¦‚æœä¸ç‰¹åˆ«æŒ‡å®šï¼Œå°†é»˜è®¤åŠ è½½æœ€æ–°ç‰ˆæœ¬ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>pipeline("sentiment-analysis", model="model-name", revision="specific-branch-or-tag")</code></li>
</ul>
<ol start="7">
<li><strong>use_auth_tokens</strong></li>
</ol>
<ul>
<li><strong>ç±»å‹</strong>ï¼š<code>bool</code> æˆ– <code>str</code></li>
<li><strong>æè¿°</strong>ï¼šåœ¨è®¿é—®æŸäº›éœ€è¦æˆæƒçš„æ¨¡å‹æ—¶ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®è¿™ä¸ªå‚æ•°æ¥ä½¿ç”¨ Hugging Face çš„è®¤è¯ä»¤ç‰Œã€‚å¯ä»¥è®¾ç½®ä¸º <code>True</code>ï¼Œä½¿å¾—ä¼šè‡ªåŠ¨ä½¿ç”¨ Hugging Face çš„ä»¤ç‰Œï¼›æˆ–è€…æä¾›å…·ä½“çš„è®¤è¯ä»¤ç‰Œã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>pipeline("text-classification", model="model-name", use_auth_token=True)</code></li>
</ul>
<ol start="8">
<li><strong>return_all_logits</strong></li>
</ol>
<ul>
<li><strong>ç±»å‹</strong>ï¼š<code>bool</code></li>
<li><strong>æè¿°</strong>ï¼šæ˜¯å¦è¿”å›æ‰€æœ‰ç±»åˆ«çš„ logitsï¼Œé€šå¸¸å¯¹å¤šåˆ†ç±»ä»»åŠ¡å¾ˆæœ‰ç”¨ã€‚é»˜è®¤å€¼ä¸º <code>False</code>ï¼Œå³åªè¿”å›é¢„æµ‹çš„æ ‡ç­¾ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>pipeline("text-classification", model="model-name", return_all_logits=True)</code></li>
</ul>
<ol start="9">
<li><strong>kwargs</strong></li>
</ol>
<ul>
<li><strong>ç±»å‹</strong>ï¼š<code>Any</code></li>
<li><strong>æè¿°</strong>ï¼šå¯ä»¥ä¼ é€’å…¶ä»–æ¨¡å‹å…·ä½“æ”¯æŒçš„å‚æ•°ï¼Œæ ¹æ®ä¸åŒçš„ä»»åŠ¡å¯èƒ½ä¼šæœ‰ä¸åŒçš„å¯é€‰å‚æ•°ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šä½¿ç”¨æ¨¡å‹ç‰¹å®šçš„å‚æ•°ä¾‹å¦‚ <code>top_k</code>ã€<code>max_length</code> ç­‰ã€‚</li>
</ul>

<pre><code class="hljs language-kotlin" lang="kotlin">task (`str`):
 Â  Â  Â  Â  Â  Â The task defining which pipeline will be returned. Currently accepted tasks are:
â€‹
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"audio-classification"</span>`: will <span class="hljs-keyword">return</span> a [`AudioClassificationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"automatic-speech-recognition"</span>`: will <span class="hljs-keyword">return</span> a [`AutomaticSpeechRecognitionPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"depth-estimation"</span>`: will <span class="hljs-keyword">return</span> a [`DepthEstimationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"document-question-answering"</span>`: will <span class="hljs-keyword">return</span> a [`DocumentQuestionAnsweringPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"feature-extraction"</span>`: will <span class="hljs-keyword">return</span> a [`FeatureExtractionPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"fill-mask"</span>`: will <span class="hljs-keyword">return</span> a [`FillMaskPipeline`]:.
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"image-classification"</span>`: will <span class="hljs-keyword">return</span> a [`ImageClassificationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"image-feature-extraction"</span>`: will <span class="hljs-keyword">return</span> an [`ImageFeatureExtractionPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"image-segmentation"</span>`: will <span class="hljs-keyword">return</span> a [`ImageSegmentationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"image-text-to-text"</span>`: will <span class="hljs-keyword">return</span> a [`ImageTextToTextPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"image-to-image"</span>`: will <span class="hljs-keyword">return</span> a [`ImageToImagePipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"image-to-text"</span>`: will <span class="hljs-keyword">return</span> a [`ImageToTextPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"keypoint-matching"</span>`: will <span class="hljs-keyword">return</span> a [`KeypointMatchingPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"mask-generation"</span>`: will <span class="hljs-keyword">return</span> a [`MaskGenerationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"object-detection"</span>`: will <span class="hljs-keyword">return</span> a [`ObjectDetectionPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"question-answering"</span>`: will <span class="hljs-keyword">return</span> a [`QuestionAnsweringPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"summarization"</span>`: will <span class="hljs-keyword">return</span> a [`SummarizationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"table-question-answering"</span>`: will <span class="hljs-keyword">return</span> a [`TableQuestionAnsweringPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"text2text-generation"</span>`: will <span class="hljs-keyword">return</span> a [`Text2TextGenerationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"text-classification"</span>` (alias `<span class="hljs-string">"sentiment-analysis"</span>` available): will <span class="hljs-keyword">return</span> a
 Â  Â  Â  Â  Â  Â   [`TextClassificationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"text-generation"</span>`: will <span class="hljs-keyword">return</span> a [`TextGenerationPipeline`]:.
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"text-to-audio"</span>` (alias `<span class="hljs-string">"text-to-speech"</span>` available): will <span class="hljs-keyword">return</span> a [`TextToAudioPipeline`]:.
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"token-classification"</span>` (alias `<span class="hljs-string">"ner"</span>` available): will <span class="hljs-keyword">return</span> a [`TokenClassificationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"translation"</span>`: will <span class="hljs-keyword">return</span> a [`TranslationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"translation_xx_to_yy"</span>`: will <span class="hljs-keyword">return</span> a [`TranslationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"video-classification"</span>`: will <span class="hljs-keyword">return</span> a [`VideoClassificationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"visual-question-answering"</span>`: will <span class="hljs-keyword">return</span> a [`VisualQuestionAnsweringPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"zero-shot-classification"</span>`: will <span class="hljs-keyword">return</span> a [`ZeroShotClassificationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"zero-shot-image-classification"</span>`: will <span class="hljs-keyword">return</span> a [`ZeroShotImageClassificationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"zero-shot-audio-classification"</span>`: will <span class="hljs-keyword">return</span> a [`ZeroShotAudioClassificationPipeline`].
 Â  Â  Â  Â  Â  Â - `<span class="hljs-string">"zero-shot-object-detection"</span>`: will <span class="hljs-keyword">return</span> a [`ZeroShotObjectDetectionPipeline`].
</code></pre>
<p>åœ¨ Hugging Face çš„ Transformers åº“ä¸­ï¼Œ<code>pipeline</code> æ–¹æ³•æ”¯æŒå¤šç§è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä»»åŠ¡ã€‚è¿™äº›ä»»åŠ¡æ¶µç›–äº†æ–‡æœ¬å¤„ç†çš„å¤šä¸ªæ–¹é¢ï¼Œé€‚åˆäºä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ä»»åŠ¡åŠå…¶ç®€è¦æè¿°ï¼š</p>
<ol start="0">
<li><strong>æ–‡æœ¬åˆ†ç±»ï¼ˆText Classificationï¼‰</strong></li>
</ol>
<ul>
<li><strong>æè¿°</strong>ï¼šå°†è¾“å…¥æ–‡æœ¬åˆ†é…åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç±»åˆ«ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šæƒ…æ„Ÿåˆ†æï¼ˆåˆ¤æ–­ä¸€æ®µæ–‡å­—æ˜¯ç§¯æã€æ¶ˆææˆ–ä¸­æ€§ï¼‰ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">pythonpipeline</span>("text-classification")
</code></pre>
<p>2.  <strong>æƒ…æ„Ÿåˆ†æï¼ˆSentiment Analysisï¼‰</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼šä¸“é—¨çš„æ–‡æœ¬åˆ†ç±»ï¼Œç”¨äºåˆ¤æ–­æ–‡æœ¬çš„æƒ…ç»ªå€¾å‘ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šåˆ¤æ–­ä¸€æ¡è¯„è®ºæ˜¯æ­£é¢çš„ã€è´Ÿé¢çš„è¿˜æ˜¯ä¸­æ€§çš„ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">pythonpipeline</span>("sentiment-analysis")
</code></pre>
<p>3.  <strong>å‘½åå®ä½“è¯†åˆ«ï¼ˆNamed Entity Recognition, NERï¼‰</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼šè¯†åˆ«æ–‡æœ¬ä¸­å…·æœ‰ç‰¹å®šæ„ä¹‰çš„å®ä½“ï¼Œå¦‚äººåã€åœ°ç‚¹ã€ç»„ç»‡åç­‰ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šåœ¨å¥å­ â€œAppleæ˜¯ä¸€å®¶ç§‘æŠ€å…¬å¸â€ ä¸­è¯†åˆ«å‡º â€œAppleâ€ æ˜¯ä¸€ä¸ªç»„ç»‡å®ä½“ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">pythonpipeline</span>("ner")
</code></pre>
<p>4.  <strong>é—®ç­”ï¼ˆQuestion Answeringï¼‰</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼šç»™å®šä¸€ä¸ªä¸Šä¸‹æ–‡å’Œä¸€ä¸ªé—®é¢˜ï¼Œæ¨¡å‹è¿”å›ä¸Šä¸‹æ–‡ä¸­çš„ç­”æ¡ˆã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šåœ¨ç»™å®šæ–‡æœ¬ä¸­å›ç­”ç‰¹å®šçš„é—®é¢˜ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">pythonpipeline</span>("question-answering")
</code></pre>
<p>5.  <strong>æ–‡æœ¬ç”Ÿæˆï¼ˆText Generationï¼‰</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼šåŸºäºè¾“å…¥æ–‡æœ¬ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªåç»­æ–‡æœ¬æ®µè½ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šç»™å®šä¸€æ®µæ–‡æœ¬ç”Ÿæˆå®Œæ•´çš„æ•…äº‹æˆ–æ®µè½ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">pythonpipeline</span>("text-generation")
</code></pre>
<p>6.  <strong>æœºå™¨ç¿»è¯‘ï¼ˆTranslationï¼‰</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼šå°†è¾“å…¥çš„æ–‡æœ¬ä»ä¸€ç§è¯­è¨€ç¿»è¯‘æˆå¦ä¸€ç§è¯­è¨€ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šå°†è‹±è¯­è½¬æ¢ä¸ºæ³•è¯­ï¼Œæˆ–å°†ä¸­æ–‡è½¬æ¢ä¸ºè‹±æ–‡ã€‚</li>
</ul>

<pre><code class="hljs language-bash" lang="bash">pythonpipeline(<span class="hljs-string">"translation-en-to-fr"</span>)  <span class="hljs-comment"># è‹±è¯­åˆ°æ³•è¯­</span>
</code></pre>
<p>7.  <strong>æ‘˜è¦ï¼ˆSummarizationï¼‰</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼šä¸ºç»™å®šçš„é•¿æ–‡æœ¬ç”Ÿæˆä¸€ä¸ªç®€çŸ­çš„æ‘˜è¦ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šä»ä¸€ç¯‡æ–‡ç« ä¸­æå–å‡ºå…¶å…³é”®ç‚¹ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">pythonpipeline</span>("summarization")
</code></pre>
<p>8.  <strong>æ–‡æœ¬å¡«ç©ºï¼ˆFill-Maskï¼‰</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼šåœ¨ç»™å®šçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œé¢„æµ‹è¢«é®ä½çš„å•è¯æˆ–çŸ­è¯­ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šåœ¨å¥å­ "æˆ‘å–œæ¬¢åƒ[MASK]" ä¸­é¢„æµ‹è¢«é®ä½çš„éƒ¨åˆ†ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">pythonpipeline</span>("fill-mask")
</code></pre>
<p>9.  <strong>å¥å­ç›¸ä¼¼åº¦ï¼ˆSentence Similarityï¼‰</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼šæ¯”è¾ƒä¸¤ä¸ªå¥å­çš„ç›¸ä¼¼åº¦ï¼Œé€šå¸¸ç”¨äºè¯­ä¹‰åŒ¹é…ç­‰ä»»åŠ¡ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šåˆ¤æ–­ä¸¤æ¡å¥å­æ˜¯å¦è¡¨è¾¾ç›¸ä¼¼çš„æ„æ€ã€‚</li>
</ul>

<pre><code class="hljs language-bash" lang="bash">pythonpipeline(<span class="hljs-string">"text-similarity"</span>)  <span class="hljs-comment"># è¯·æ³¨æ„ï¼Œè¿™ä¸ªä»»åŠ¡çš„å…·ä½“å®ç°å¯èƒ½å–å†³äºæ¨¡å‹ã€‚</span>
</code></pre>
<p>10. <strong>å¤šæ¨¡æ€ä»»åŠ¡ï¼ˆå¦‚å›¾åƒæ ‡æ³¨ã€å›¾åƒåˆ†ç±»ç­‰ï¼‰</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼šå¤„ç†å›¾åƒä¸æ–‡æœ¬ç»“åˆçš„ä»»åŠ¡ï¼ˆéœ€ç‰¹å®šæ¨¡å‹æ”¯æŒï¼‰ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šå›¾åƒåˆ†ç±»ï¼Œæˆ–è€…å›¾åƒç”Ÿæˆæè¿°ã€‚</li>
</ul>

<pre><code class="hljs language-bash" lang="bash">pythonpipeline(<span class="hljs-string">"image-classification"</span>)  <span class="hljs-comment"># å›¾åƒåˆ†ç±»ï¼Œä½¿ç”¨ç›¸å…³æ¨¡å‹</span>
</code></pre>
<p>11. <strong>è‡ªå®šä¹‰ä»»åŠ¡</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼šæ ¹æ®éœ€è¦è‡ªå®šä¹‰ç‰¹å®šçš„ NLP ä»»åŠ¡ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰æ¨¡å‹ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">pipeline</span>("custom-task")
</code></pre>
<h2 data-id="heading-2">é¢„è®­ç»ƒæ¨¡å‹ç»“æ„æ–‡ä»¶ä»‹ç»</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0d9dffa773644859a08c32945f6833d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311838&amp;x-signature=DLGM%2BNovt3%2BME62ZVeyjwsTdJ1I%3D" alt="image.png" loading="lazy"/></p>
<ol start="0">
<li><code>.gitattributes</code></li>
</ol>
<p>è¿™æ˜¯ä¸€ä¸ª Git é…ç½®æ–‡ä»¶ï¼Œç”¨äºæŒ‡å®šå¦‚ä½•å¤„ç†å‚¨å­˜åœ¨ Git ä»“åº“ä¸­çš„ä¸åŒç±»å‹çš„æ–‡ä»¶ã€‚å®ƒå¯ä»¥å®šä¹‰æ–‡æœ¬æ–‡ä»¶çš„æ¢è¡Œç¬¦ã€æ–‡ä»¶åˆå¹¶ç­–ç•¥ï¼Œä»¥åŠæŸäº›æ–‡ä»¶åœ¨ Git æ“ä½œä¸­çš„ç‰¹æ®Šå¤„ç†æ–¹å¼ï¼ˆä¾‹å¦‚ï¼ŒæŒ‡ç¤ºæŸäº›æ–‡ä»¶ä½¿ç”¨ç‰¹å®šçš„ diff å·¥å…·ï¼‰ã€‚åœ¨æœºå™¨å­¦ä¹ é¡¹ç›®ä¸­ï¼Œä½¿ç”¨ <code>.gitattributes</code> æ–‡ä»¶å¯ä»¥ç¡®ä¿é¡¹ç›®åœ¨å¤šå¹³å°ä¸Šå…·æœ‰ä¸€è‡´æ€§ã€‚</p>
<ol start="2">
<li><code>README.md</code></li>
</ol>
<p>è¿™æ˜¯ä¸€ä¸ª Markdown æ ¼å¼çš„æ–‡æ¡£ï¼Œé€šå¸¸ç”¨äºæè¿°é¡¹ç›®çš„ç›®çš„ã€åŠŸèƒ½ã€å®‰è£…è¯´æ˜å’Œä½¿ç”¨æ–¹æ³•ã€‚å®ƒæ˜¯å¼€æºé¡¹ç›®çš„"ä»‹ç»æ€§æ–‡æ¡£"ï¼Œæä¾›ç»™ç”¨æˆ·å’Œå¼€å‘è€…äº†è§£é¡¹ç›®çš„é‡è¦ä¿¡æ¯ã€‚è‰¯å¥½çš„ README æ–‡ä»¶å¯ä»¥å¤§å¤§å¢åŠ ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒå’Œé¡¹ç›®çš„å¯è®¿é—®æ€§ã€‚</p>
<ol start="3">
<li><code>config.json</code></li>
</ol>
<p>è¿™ä¸ªæ–‡ä»¶é€šå¸¸åŒ…å«æ¨¡å‹çš„é…ç½®å‚æ•°ï¼Œæ¯”å¦‚æ¨¡å‹çš„æ¶æ„ã€è¶…å‚æ•°ï¼ˆå¦‚å­¦ä¹ ç‡ã€batch sizeï¼‰å’Œè®­ç»ƒç»†èŠ‚ã€‚è¯¥æ–‡ä»¶ä¸ºæ¨¡å‹çš„åŠ è½½å’Œåˆå§‹åŒ–æä¾›äº†å¿…è¦çš„ä¿¡æ¯ï¼Œä½¿å¾—åœ¨ä¸åŒå¹³å°æˆ–ç¯å¢ƒé—´å…±äº«æ¨¡å‹å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p>
<ol start="4">
<li><code>flax_model.msgpack</code></li>
</ol>
<p>è¿™ä¸ªæ–‡ä»¶æ˜¯ä½¿ç”¨ Flax åº“ï¼ˆä¸€ä¸ªç”¨äºæ„å»ºç¥ç»ç½‘ç»œçš„åº“ï¼ŒåŸºäº JAXï¼‰ä¿å­˜çš„æ¨¡å‹ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œä½¿ç”¨ç‰¹å®šæ ¼å¼ï¼ˆå¦‚ msgpackï¼‰ä¿å­˜æ¨¡å‹å¯ä»¥æœ‰æ•ˆåœ°è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œä»¥ä¾¿åœ¨ä¸åŒçš„è„šæœ¬æˆ–æœºå™¨ä¹‹é—´å…±äº«å’ŒåŠ è½½ã€‚</p>
<ol start="5">
<li><code>model.safetensors</code></li>
</ol>
<p>è¿™æ˜¯é’ˆå¯¹æ¨¡å‹æƒé‡çš„ä¿å­˜æ ¼å¼ï¼Œå®ƒé€šå¸¸ç”¨æ¥åœ¨å®‰å…¨å’Œæ•ˆç‡ä¹‹é—´å–å¾—è‰¯å¥½å¹³è¡¡ã€‚<code>safetensors</code>æ ¼å¼é¿å…äº†ä¸€äº›å¸¸è§çš„å®‰å…¨é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨åŠ è½½æœªéªŒè¯çš„æ¨¡å‹æ—¶ã€‚å®ƒæ—¨åœ¨æå‡å®‰å…¨æ€§ï¼ŒåŒæ—¶ä»ç„¶ä¿æŒé«˜æ•ˆçš„å­˜å‚¨æ€§èƒ½ã€‚</p>
<ol start="6">
<li><code>pytorch_model.bin</code></li>
</ol>
<p>è¿™æ˜¯ PyTorch æ¡†æ¶ä¸­å¸¸è§çš„æ¨¡å‹æƒé‡æ–‡ä»¶ï¼Œé‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨æ¨¡å‹çš„æƒé‡ä¸å‚æ•°ã€‚å®ƒæ˜¯é€šè¿‡è°ƒç”¨ <code>model.save_pretrained()</code> æ–¹æ³•ç”Ÿæˆçš„ï¼Œé€šå¸¸ä¸ PyTorch çš„ <code>transformers</code> åº“ä¸€èµ·ä½¿ç”¨ï¼Œä¾¿äºæ¨¡å‹åœ¨ä¸åŒçš„åº”ç”¨ä¸­å…±äº«å’ŒåŠ è½½ã€‚</p>
<ol start="7">
<li><code>tf_model.h5</code></li>
</ol>
<p>è¿™æ˜¯ TensorFlow æ¡†æ¶ä¸­çš„æ¨¡å‹ä¿å­˜æ–‡ä»¶ï¼Œé€šå¸¸ä½¿ç”¨ HDF5 æ–‡ä»¶æ ¼å¼ï¼Œå¯¹åº”äºä½¿ç”¨ TensorFlow/Keras æ¡†æ¶è®­ç»ƒç”Ÿæˆçš„æ¨¡å‹ã€‚HDF5 æ˜¯ä¸€ç§ç”¨äºé«˜æ•ˆå­˜å‚¨å¤§å‹æ•°æ®é›†çš„æ ¼å¼ï¼Œ<code>.h5</code> æ–‡ä»¶å¯ç”¨äºä¿å­˜æ¨¡å‹çš„æƒé‡ã€è®­ç»ƒé…ç½®ä»¥åŠä¼˜åŒ–å™¨çŠ¶æ€ç­‰ä¿¡æ¯ã€‚</p>
<ol start="8">
<li><code>tokenizer.json</code></li>
</ol>
<p>è¿™ä¸ªæ–‡ä»¶é€šå¸¸å­˜å‚¨äº†ä¸ç‰¹å®šæ–‡æœ¬å¤„ç†å’Œæ¨¡å‹è¾“å…¥ç›¸å…³çš„åˆ†è¯å™¨ï¼ˆtokenizerï¼‰é…ç½®ä¿¡æ¯ã€‚å®ƒåŒ…å«äº†åˆ†è¯å™¨å¦‚ä½•å°†åŸå§‹æ–‡æœ¬è½¬æ¢ä¸ºæ¨¡å‹å¯ä»¥ç†è§£çš„è¾“å…¥æ ¼å¼çš„ä¿¡æ¯ï¼Œä¾‹å¦‚è¯æ±‡è¡¨ï¼ˆvocabularyï¼‰å’Œç¼–ç æ–¹å¼ã€‚è¯¥æ–‡ä»¶æœ‰åŠ©äºç¡®ä¿è¾“å…¥çš„æ­£ç¡®é¢„å¤„ç†ã€‚</p>
<ol start="9">
<li><code>Update tokenizer.json</code></li>
</ol>
<p>è¿™ä¸ªæ–‡ä»¶æ˜¾ç„¶æ˜¯ä¸€ä¸ªä¸´æ—¶æˆ–é™„åŠ çš„é…ç½®æ–‡ä»¶ï¼Œå¯èƒ½æ˜¯ä¸ºäº†æ›´æ–°ç°æœ‰çš„åˆ†è¯å™¨æˆ–æ·»åŠ æ–°çš„è¯æ±‡ã€‚å…·ä½“å†…å®¹å’ŒåŠŸèƒ½ä¾èµ–äºé¡¹ç›®çš„å®é™…æ“ä½œã€‚</p>
<ol start="10">
<li><code>tokenizer_config.json</code></li>
</ol>
<p>è¿™ä¸ªæ–‡ä»¶åŒ…å«æœ‰å…³åˆ†è¯å™¨çš„é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚ä½¿ç”¨çš„åˆ†è¯ç®—æ³•ç±»å‹ï¼ˆBPEã€WordPieceç­‰ï¼‰ï¼Œä»¥åŠç‰¹æ®Šæ ‡è®°ï¼ˆå¦‚å¡«å……æ ‡è®°å’Œå¼€å§‹/ç»“æŸæ ‡è®°ï¼‰ã€‚å®ƒåœ¨åŠ è½½åˆ†è¯å™¨æ—¶æä¾›äº†å¿…è¦çš„ä¸Šä¸‹æ–‡ï¼Œä»¥ç¡®ä¿åˆ†è¯å™¨çš„æ­£ç¡®è¿è¡Œã€‚</p>
<ol start="11">
<li><code>vocab.txt</code></li>
</ol>
<p>è¿™ä¸ªæ–‡ä»¶é€šå¸¸å­˜å‚¨æ¨¡å‹ä½¿ç”¨çš„è¯æ±‡è¡¨ã€‚åˆ†è¯å™¨ä¼šä½¿ç”¨è¿™ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­çš„ä¿¡æ¯æ¥è¯†åˆ«å’Œæ˜ å°„ç‰¹å®šçš„å•è¯æˆ–æ ‡è®°ã€‚è¯æ±‡è¡¨æ˜¯è®­ç»ƒæ¨¡å‹æ—¶çš„é‡è¦éƒ¨åˆ†ï¼Œå› ä¸ºå®ƒå¯ä»¥ç›´æ¥å½±å“æ¨¡å‹çš„æ€§èƒ½å’Œç”Ÿæˆçš„æ–‡æœ¬çš„è´¨é‡ã€‚</p>
<p>æ€»ç»“</p>
<p>ä»¥ä¸Šæ–‡ä»¶å…±åŒæ„æˆäº†ä¸€ä¸ªæ·±åº¦å­¦ä¹ æ¨¡å‹å’Œåˆ†è¯å™¨çš„å®Œæ•´å®šä¹‰åŠå…¶é…ç½®ï¼Œæ˜¯åœ¨æœºå™¨å­¦ä¹ å’Œ NLP é¡¹ç›®ä¸­ä¸å¯æˆ–ç¼ºçš„ç»„æˆéƒ¨åˆ†ã€‚åœ¨æ¨¡å‹çš„å¼€å‘å’Œéƒ¨ç½²è¿‡ç¨‹ä¸­ï¼Œæ­£ç¡®ç®¡ç†å’Œä½¿ç”¨è¿™äº›æ–‡ä»¶ï¼Œå¯¹äºç¡®ä¿æ¨¡å‹çš„å¤ç°æ€§ã€å¯é‡ç”¨æ€§ä»¥åŠæ€§èƒ½è‡³å…³é‡è¦ã€‚</p>
<p>config.json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"architectures"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
 Â   <span class="hljs-string">"BertForMaskedLM"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"attention_probs_dropout_prob"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"directionality"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bidi"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"hidden_act"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gelu"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"hidden_dropout_prob"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"hidden_size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">768</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"initializer_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.02</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"intermediate_size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3072</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"layer_norm_eps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1e-12</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"max_position_embeddings"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">512</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"model_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bert"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"num_attention_heads"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"num_hidden_layers"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"pad_token_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"pooler_fc_size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">768</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"pooler_num_attention_heads"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"pooler_num_fc_layers"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"pooler_size_per_head"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">128</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"pooler_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"first_token_transform"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type_vocab_size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"vocab_size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">21128</span>
<span class="hljs-punctuation">}</span>
â€‹
</code></pre>
<p>è¿™ä¸ª JSON é…ç½®æ–‡ä»¶çœ‹èµ·æ¥æ˜¯é’ˆå¯¹ BERT æ¨¡å‹çš„ï¼Œå…¶ä¸­åŒ…å«äº†æ¨¡å‹æ¶æ„åŠå…¶ç›¸å…³è¶…å‚æ•°çš„å®šä¹‰ã€‚ä»¥ä¸‹æ˜¯æ¯ä¸ªå­—æ®µçš„è¯¦ç»†è§£é‡Šï¼š</p>
<ol start="0">
<li><code>architectures</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•°ç»„</li>
<li><strong>ä½œç”¨ï¼š</strong> å®šä¹‰æ¨¡å‹çš„æ¶æ„ç±»å‹ã€‚è¿™é‡Œçš„ <code>"BertForMaskedLM"</code> è¡¨ç¤ºè¯¥æ¨¡å‹æ˜¯ç”¨äºä»»åŠ¡â€œMask Language Modelingâ€ï¼ˆæ©ç è¯­è¨€å»ºæ¨¡ï¼‰çš„ BERT æ¨¡å‹ã€‚</li>
</ul>
<ol start="2">
<li><code>attention_probs_dropout_prob</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æµ®ç‚¹æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> è¡¨ç¤ºåœ¨æ³¨æ„åŠ›æœºåˆ¶ä¸­åº”ç”¨çš„ dropout æ¦‚ç‡ã€‚0.1 è¡¨ç¤ºæœ‰ 10% çš„æ¦‚ç‡å°†æ³¨æ„åŠ›æ¦‚ç‡ç½®ä¸ºé›¶ï¼Œä»¥é˜²æ­¢è¿‡æ‹Ÿåˆã€‚</li>
</ul>
<ol start="3">
<li><code>directionality</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> å­—ç¬¦ä¸²</li>
<li><strong>ä½œç”¨ï¼š</strong> æŒ‡å®šæ¨¡å‹çš„æ–¹å‘æ€§ã€‚<code>"bidi"</code> è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåŒå‘æ¨¡å‹ï¼Œå¯ä»¥ä»å¥å­çš„ä¸¤ç«¯åŒæ—¶æ¥æ”¶ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</li>
</ul>
<ol start="4">
<li><code>hidden_act</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> å­—ç¬¦ä¸²</li>
<li><strong>ä½œç”¨ï¼š</strong> å®šä¹‰éšè—å±‚çš„æ¿€æ´»å‡½æ•°ã€‚åœ¨æ­¤é…ç½®ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ <code>"gelu"</code>ï¼ˆé«˜æ–¯è¯¯å·®çº¿æ€§å•å…ƒï¼‰ï¼Œè¢«è®¤ä¸ºç›¸è¾ƒäºæ ‡å‡†çš„ ReLU æ›´èƒ½æå‡æ¨¡å‹æ€§èƒ½ã€‚</li>
</ul>
<ol start="5">
<li><code>hidden_dropout_prob</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æµ®ç‚¹æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> åœ¨éšè—å±‚ä¸­åº”ç”¨çš„ dropout æ¦‚ç‡ï¼Œ0.1 è¡¨ç¤ºæœ‰ 10% çš„æ¦‚ç‡å¯¹éšè—å±‚è¾“å‡ºåº”ç”¨ dropoutï¼Œæœ‰åŠ©äºé˜²æ­¢è¿‡æ‹Ÿåˆã€‚</li>
</ul>
<ol start="6">
<li><code>hidden_size</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> å®šä¹‰æ¯ä¸ªéšè—å±‚çš„å¤§å°ï¼ˆå‘é‡ç»´åº¦ï¼‰ï¼Œåœ¨è¿™é‡Œæ˜¯ 768ã€‚è¿™æ„å‘³ç€æ¯ä¸ªéšè—çŠ¶æ€è¢«è¡¨ç¤ºä¸ºä¸€ä¸ª 768 ç»´çš„å‘é‡ã€‚</li>
</ul>
<ol start="7">
<li><code>initializer_range</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æµ®ç‚¹æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> æŒ‡å®šæ¨¡å‹å‚æ•°åˆå§‹åŒ–æ—¶çš„èŒƒå›´ï¼Œé€šå¸¸åœ¨ [-initializer_range, initializer_range] ä¹‹é—´ã€‚0.02 è¡¨ç¤ºå‚æ•°åˆå§‹åŒ–çš„æ ‡å‡†å·®ã€‚</li>
</ul>
<ol start="8">
<li><code>intermediate_size</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> å®šä¹‰ä¸­é—´å±‚çš„å¤§å°ã€‚åœ¨ Transformer çš„å‰é¦ˆç¥ç»ç½‘ç»œä¸­ï¼Œé€šå¸¸å¤§äºéšè—å±‚çš„å¤§å°ã€‚è¿™é‡Œæ˜¯ 3072ï¼Œæ„å‘³ç€ä¸­é—´å±‚çš„è¾“å‡ºç»´åº¦æ˜¯ 3072ã€‚</li>
</ul>
<ol start="9">
<li><code>layer_norm_eps</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æµ®ç‚¹æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> æŒ‡å®šå±‚å½’ä¸€åŒ–ï¼ˆLayer Normalizationï¼‰æ—¶ä½¿ç”¨çš„å°æ­£æ•°ï¼Œç”¨äºé¿å…é™¤ä»¥é›¶çš„æƒ…å†µã€‚è¿™é‡Œæ˜¯ 1e-12ã€‚</li>
</ul>
<ol start="10">
<li><code>max_position_embeddings</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> å®šä¹‰æ¨¡å‹èƒ½å¤Ÿå¤„ç†çš„æœ€å¤§åºåˆ—é•¿åº¦ï¼ˆå³æœ€å¤§ä½ç½®åµŒå…¥ï¼‰ï¼Œåœ¨è¿™é‡Œæ˜¯ 512ï¼Œè¿™æ„å‘³ç€è¾“å…¥åºåˆ—çš„æœ€å¤§é•¿åº¦æ˜¯ 512 ä¸ªæ ‡è®°ï¼ˆtokensï¼‰ã€‚</li>
</ul>
<ol start="11">
<li><code>model_type</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> å­—ç¬¦ä¸²</li>
<li><strong>ä½œç”¨ï¼š</strong> æŒ‡æ˜æ¨¡å‹çš„ç±»å‹ï¼Œæ­¤å¤„ä¸º <code>"bert"</code>ï¼Œè¡¨æ˜è¯¥æ¶æ„æ˜¯ BERTã€‚</li>
</ul>
<ol start="12">
<li><code>num_attention_heads</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> å®šä¹‰æ³¨æ„åŠ›å¤´çš„æ•°é‡ï¼Œè¿™é‡Œæ˜¯ 12ï¼Œè¡¨ç¤ºåœ¨å¤šå¤´è‡ªæ³¨æ„åŠ›æœºåˆ¶ä¸­ä½¿ç”¨äº† 12 ä¸ªæ³¨æ„åŠ›å¤´ã€‚</li>
</ul>
<ol start="13">
<li><code>num_hidden_layers</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> æŒ‡å®š Transformer æ¨¡å‹ä¸­çš„éšè—å±‚æ•°é‡ï¼Œè¿™é‡Œæ˜¯ 12ï¼Œè¡¨ç¤ºè¯¥ BERT æ¨¡å‹æœ‰ 12 å±‚çš„ç¼–ç å™¨å †å ã€‚</li>
</ul>
<ol start="14">
<li><code>pad_token_id</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> è¡¨ç¤ºå¡«å……æ ‡è®°çš„ IDï¼Œ0 é€šå¸¸ç”¨äºæ ‡è®°â€œå¡«å……â€ä½ç½®ï¼Œä»¥ä¾¿æ¨¡å‹åœ¨å¤„ç†ä¸åŒé•¿åº¦çš„è¾“å…¥æ—¶èƒ½å¤Ÿåˆç†å¯¹é½ã€‚</li>
</ul>
<ol start="15">
<li><code>pooler_fc_size</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> æ˜¯ BERT æ¨¡å‹æ± åŒ–å±‚ä¸­å…¨è¿æ¥å±‚çš„å¤§å°ï¼Œé€šå¸¸ç­‰äºéšè—å±‚çš„å¤§å°ï¼Œè¿™é‡Œæ˜¯ 768ã€‚</li>
</ul>
<ol start="16">
<li><code>pooler_num_attention_heads</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> æ± åŒ–å±‚ä¸­ä½¿ç”¨çš„æ³¨æ„åŠ›å¤´çš„æ•°é‡ï¼Œé€šå¸¸å’Œç¼–ç å±‚ç›¸åŒï¼Œè¿™é‡Œæ˜¯ 12ã€‚</li>
</ul>
<ol start="17">
<li><code>pooler_num_fc_layers</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> æ± åŒ–å±‚ä¸­çš„å…¨è¿æ¥å±‚æ•°é‡ï¼Œè¿™é‡Œæ˜¯ 3ï¼Œè¡¨ç¤ºåœ¨æ± åŒ–è¿‡ç¨‹ä¸­åº”ç”¨äº†ä¸‰å±‚å…¨è¿æ¥ç½‘ç»œã€‚</li>
</ul>
<ol start="18">
<li><code>pooler_size_per_head</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> æŒ‡æ˜æ¯ä¸ªæ³¨æ„åŠ›å¤´è¾“å‡ºçš„ç»´åº¦å¤§å°ï¼Œè¿™é‡Œæ˜¯ 128ï¼Œé€šå¸¸è®¡ç®—ä¸º <code>hidden_size / num_attention_heads</code>ã€‚</li>
</ul>
<ol start="19">
<li><code>pooler_type</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> å­—ç¬¦ä¸²</li>
<li><strong>ä½œç”¨ï¼š</strong> è¡¨ç¤ºæ± åŒ–å±‚é‡‡ç”¨çš„ç±»å‹ï¼Œæ­¤å¤„çš„ <code>"first_token_transform"</code> è¡¨ç¤ºä½¿ç”¨ç¬¬ä¸€ä¸ª token çš„è¡¨ç¤ºç»è¿‡çº¿æ€§å˜æ¢ä½œä¸ºæ•´ä¸ªåºåˆ—çš„è¡¨ç¤ºã€‚è¿™åœ¨åˆ†ç±»ä»»åŠ¡ä¸­æ˜¯å¸¸ç”¨çš„åšæ³•ã€‚</li>
</ul>
<ol start="20">
<li><code>type_vocab_size</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> å®šä¹‰ç±»å‹è¯æ±‡çš„å¤§å°ã€‚åœ¨ BERT ä¸­ï¼Œé€šå¸¸ä¸º 2ï¼Œç”¨äºåŒºåˆ†å¥å­ A å’Œå¥å­ Bã€‚</li>
</ul>
<ol start="21">
<li><code>vocab_size</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> è¡¨ç¤ºæ¨¡å‹ä½¿ç”¨çš„è¯æ±‡è¡¨çš„å¤§å°ï¼Œåœ¨è¿™é‡Œæ˜¯ 21128ï¼Œè¯´æ˜æ¨¡å‹å¯ä»¥è¯†åˆ« 21128 ä¸ªä¸åŒçš„æ ‡è®°ï¼ˆtokensï¼‰ã€‚</li>
</ul>
<ol start="0">
<li><code>[UNK]</code></li>
</ol>
<ul>
<li><strong>å…¨åï¼š</strong> Unknown Token</li>
<li><strong>ä½œç”¨ï¼š</strong> è¿™ä¸ªæ ‡è®°ç”¨äºè¡¨ç¤ºæ¨¡å‹æ— æ³•è¯†åˆ«çš„è¾“å…¥è¯æ±‡æˆ–ç¬¦å·ã€‚å½“è¾“å…¥æ–‡æœ¬ä¸­å­˜åœ¨ä¸åœ¨æ¨¡å‹è¯æ±‡è¡¨ä¸­çš„å•è¯æ—¶ï¼Œè¿™äº›å•è¯å°†è¢«æ›¿æ¢ä¸º <code>[UNK]</code>ã€‚å®ƒçš„ç›®çš„æ˜¯ç¡®ä¿æ¨¡å‹å¯ä»¥å¤„ç†æœªçŸ¥è¾“å…¥ï¼Œè€Œä¸ä¼šå¯¼è‡´é”™è¯¯æˆ–ä¸­æ–­ã€‚</li>
</ul>
<ol start="2">
<li><code>[CLS]</code></li>
</ol>
<ul>
<li><strong>å…¨åï¼š</strong> Classification Token</li>
<li><strong>ä½œç”¨ï¼š</strong> <code>[CLS]</code> æ ‡è®°é€šå¸¸æ·»åŠ åˆ°è¾“å…¥åºåˆ—çš„å¼€å¤´ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦åˆ†ç±»ä»»åŠ¡ï¼ˆå¦‚æƒ…æ„Ÿåˆ†æã€å¥å­åˆ†ç±»ç­‰ï¼‰æ—¶ã€‚æ¨¡å‹åœ¨è®­ç»ƒæ—¶ä¼šä½¿ç”¨è¿™ä¸ªæ ‡è®°çš„æœ€ç»ˆéšè—çŠ¶æ€ä½œä¸ºå¯¹æ•´ä¸ªå¥å­çš„è¡¨ç¤ºï¼Œä»¥ä¾¿è¿›è¡Œåˆ†ç±»æˆ–å…¶ä»–ä»»åŠ¡ã€‚</li>
</ul>
<ol start="3">
<li><code>[SEP]</code></li>
</ol>
<ul>
<li><strong>å…¨åï¼š</strong> Separator Token</li>
<li><strong>ä½œç”¨ï¼š</strong> <code>[SEP]</code> æ ‡è®°ç”¨äºåˆ†éš”ä¸åŒçš„å¥å­æˆ–æ®µè½ã€‚åœ¨å¤„ç†å¥å­å¯¹ï¼ˆä¾‹å¦‚é—®é¢˜-ç­”æ¡ˆã€å¥å­ç›¸ä¼¼æ€§ä»»åŠ¡ï¼‰æ—¶ï¼Œ<code>[SEP]</code> å¯ä»¥æ¸…æ™°åœ°è¡¨æ˜ä¸¤ä¸ªå¥å­ä¹‹é—´çš„åˆ†ç•Œï¼Œå¸®åŠ©æ¨¡å‹ç†è§£è¾“å…¥çš„ç»“æ„ã€‚</li>
</ul>
<ol start="4">
<li><code>[MASK]</code></li>
</ol>
<ul>
<li><strong>å…¨åï¼š</strong> Mask Token</li>
<li><strong>ä½œç”¨ï¼š</strong> åœ¨æ©ç è¯­è¨€å»ºæ¨¡ï¼ˆMasked Language Modelingï¼‰ä»»åŠ¡ä¸­ä½¿ç”¨ã€‚è¯¥æ ‡è®°è¡¨ç¤ºè¾“å…¥æ–‡æœ¬ä¸­æŸäº›å•è¯å·²ç»è¢«æ©ç›–ï¼Œæ¨¡å‹çš„ä»»åŠ¡æ˜¯æ ¹æ®ä¸Šä¸‹æ–‡é¢„æµ‹è¿™äº›è¢«æ©ç›–çš„å•è¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¨¡å‹èƒ½å¤Ÿå­¦ä¹ ä¸Šä¸‹æ–‡å…³ç³»å’Œè¯­è¨€ç»“æ„ã€‚</li>
</ul>
<ol start="5">
<li><code>&lt;S&gt;</code></li>
</ol>
<ul>
<li><strong>å…¨åï¼š</strong> Start Token</li>
<li><strong>ä½œç”¨ï¼š</strong> é€šå¸¸ç”¨äºåœ¨åºåˆ—ç”Ÿæˆä»»åŠ¡ï¼ˆå¦‚æœºå™¨ç¿»è¯‘ã€æ–‡æœ¬ç”Ÿæˆç­‰ï¼‰ä¸­æŒ‡ç¤ºåºåˆ—çš„å¼€å§‹ã€‚å®ƒå¯ä»¥å¸®åŠ©æ¨¡å‹æ˜ç¡®è¾“å…¥çš„èµ·ç‚¹ï¼Œå¹¶ç›¸åº”åœ°è°ƒæ•´è¾“å‡ºã€‚</li>
</ul>
<ol start="6">
<li><code>&lt;T&gt;</code></li>
</ol>
<ul>
<li><strong>å…¨åï¼š</strong> Token (or Terminate Token)</li>
<li><strong>ä½œç”¨ï¼š</strong> ç±»ä¼¼äº <code>&lt;S&gt;</code>ï¼Œé€šå¸¸ç”¨äºæŒ‡ç¤ºåºåˆ—çš„ç»“æŸï¼Œæ ‡è®°ç”Ÿæˆåºåˆ—ä¸­æœ€åä¸€ä¸ª token çš„ä½ç½®ã€‚åœ¨ä¸€äº›åºåˆ—ç”Ÿæˆä»»åŠ¡ä¸­ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ¨¡å‹è¯†åˆ«ä½•æ—¶åœæ­¢ç”Ÿæˆå†…å®¹ã€‚</li>
</ul>
<p><code>[PAD]</code> æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‡è®°ï¼ˆtokenï¼‰ï¼Œé€šå¸¸ç”¨äºè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰æ¨¡å‹ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å˜é•¿åºåˆ—æˆ–æ‰¹é‡è¾“å…¥æ—¶ã€‚ä»¥ä¸‹æ˜¯ <code>[PAD]</code> æ ‡è®°çš„è¯¦ç»†è§£é‡Šï¼š</p>
<ol start="0">
<li><strong>å…¨å</strong></li>
</ol>
<ul>
<li><strong>Padding Tokenï¼ˆå¡«å……æ ‡è®°ï¼‰</strong></li>
</ul>
<ol start="2">
<li><strong>ä½œç”¨</strong></li>
</ol>
<ul>
<li><strong>å¡«å……åºåˆ—ï¼š</strong> åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ä¸­ï¼Œæ¨¡å‹é€šå¸¸éœ€è¦å¤„ç†å›ºå®šé•¿åº¦çš„è¾“å…¥åºåˆ—ã€‚ç„¶è€Œï¼Œå®é™…çš„æ–‡æœ¬åºåˆ—å¾€å¾€å…·æœ‰ä¸åŒçš„é•¿åº¦ã€‚ä¸ºäº†ä½¿æ‰€æœ‰è¾“å…¥åºåˆ—å…·æœ‰ç›¸åŒçš„é•¿åº¦ï¼Œå¯ä»¥æ·»åŠ  <code>[PAD]</code> æ ‡è®°ï¼Œä»¥å¡«å……è¾ƒçŸ­çš„åºåˆ—ã€‚è¿™ç§å¡«å……ç¡®ä¿æ¨¡å‹èƒ½å¤Ÿåœ¨æ‰¹å¤„ç†è¿‡ç¨‹ä¸­å‡åŒ€å¤„ç†è¾“å…¥ï¼Œé¿å…å› ä¸åŒé•¿åº¦å¯¼è‡´çš„è®¡ç®—é—®é¢˜ã€‚</li>
</ul>
<ol start="3">
<li><strong>åº”ç”¨åœºæ™¯</strong></li>
</ol>
<ul>
<li><strong>æ‰¹é‡å¤„ç†ï¼š</strong> åœ¨è®­ç»ƒå’Œæ¨ç†è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä¼šå°†å¤šä¸ªæ ·æœ¬ç»„åˆæˆä¸€ä¸ªæ‰¹æ¬¡ï¼ˆbatchï¼‰è¿›è¡Œå¹¶è¡Œå¤„ç†ã€‚é€šè¿‡ä½¿ç”¨ <code>[PAD]</code> æ ‡è®°ï¼Œå°†æ‰€æœ‰è¾“å…¥åºåˆ—å¡«å……åˆ°ç›¸åŒçš„é•¿åº¦ï¼Œå¯ä»¥æœ‰æ•ˆæé«˜æ¨¡å‹çš„è®¡ç®—æ•ˆç‡ã€‚</li>
<li><strong>åºåˆ—æ ‡è®°ä»»åŠ¡ï¼š</strong> åœ¨ä»»åŠ¡å¦‚å‘½åå®ä½“è¯†åˆ«ï¼ˆNERï¼‰æˆ–æ–‡æœ¬åˆ†ç±»ä¸­ï¼Œ <code>[PAD]</code> æ ‡è®°ç”¨äºä¿æŒè¾“å…¥åºåˆ—çš„ä¸€è‡´æ€§ï¼Œç¡®ä¿æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®å¯¹é½è¾“å‡ºå’Œè¾“å…¥ã€‚</li>
</ul>
<ol start="4">
<li><strong>ç¤ºä¾‹</strong></li>
</ol>
<p>å‡è®¾æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ ·æœ¬ï¼š</p>
<ul>
<li>"æˆ‘çˆ±å­¦ä¹ "ï¼ˆ3 ä¸ªå­—ï¼‰</li>
<li>"äººå·¥æ™ºèƒ½å¾ˆæœ‰è¶£"ï¼ˆ6 ä¸ªå­—ï¼‰</li>
<li>"è‡ªç„¶è¯­è¨€å¤„ç†"ï¼ˆ5 ä¸ªå­—ï¼‰</li>
</ul>
<p>å½“å°†è¿™ä¸‰ä¸ªæ ·æœ¬å¡«å……åˆ°æœ€å¤§é•¿åº¦ä¸º 6 æ—¶ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p>
<ul>
<li>"æˆ‘çˆ±å­¦ä¹ " â†’ "æˆ‘çˆ±å­¦ä¹  [PAD]"</li>
<li>"äººå·¥æ™ºèƒ½å¾ˆæœ‰è¶£" â†’ "äººå·¥æ™ºèƒ½å¾ˆæœ‰è¶£"</li>
<li>"è‡ªç„¶è¯­è¨€å¤„ç†" â†’ "è‡ªç„¶è¯­è¨€å¤„ç† [PAD]"</li>
</ul>
<p>è¿™æ ·å¡«å……åçš„åºåˆ—é•¿åº¦ä¸€è‡´ï¼Œä¾¿äºè¾“å…¥æ¨¡å‹ã€‚</p>
<p><strong>tokenizer_config.json åˆ†è¯å™¨é…ç½®æ–‡ä»¶</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"do_lower_case"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"model_max_length"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">512</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>0.  <code>do_lower_case</code></p>
<ul>
<li><strong>ç±»å‹ï¼š</strong> å¸ƒå°”å€¼ï¼ˆbooleanï¼‰</li>
<li><strong>ä½œç”¨ï¼š</strong> æŒ‡å®šåœ¨æ–‡æœ¬é¢„å¤„ç†æ—¶æ˜¯å¦å°†è¾“å…¥æ–‡æœ¬è½¬æ¢ä¸ºå°å†™ã€‚å½“è®¾ç½®ä¸º <code>false</code> æ—¶ï¼Œæ–‡æœ¬å°†ä¿æŒå…¶åŸå§‹å¤§å°å†™ã€‚å½“è®¾ç½®ä¸º <code>true</code> æ—¶ï¼Œæ‰€æœ‰çš„å­—æ¯å°†è¢«è½¬æ¢ä¸ºå°å†™ã€‚è¿™é¡¹é…ç½®é€šå¸¸å½±å“åˆ†è¯å™¨çš„è¡Œä¸ºï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§å°å†™æ•æ„Ÿçš„ä»»åŠ¡æ—¶ï¼ˆä¾‹å¦‚å‘½åå®ä½“è¯†åˆ«æˆ–æŸäº›åˆ†ç±»ä»»åŠ¡ï¼‰ï¼Œä¿ç•™åŸå§‹å¤§å°å†™å¯èƒ½æ˜¯å¾ˆé‡è¦çš„ã€‚</li>
</ul>
<ol start="2">
<li><code>model_max_length</code></li>
</ol>
<ul>
<li><strong>ç±»å‹ï¼š</strong> æ•´æ•°</li>
<li><strong>ä½œç”¨ï¼š</strong> æŒ‡å®šæ¨¡å‹å¯ä»¥æ¥å—çš„æœ€å¤§è¾“å…¥é•¿åº¦ï¼ˆtokenæ•°é‡ï¼‰ã€‚åœ¨æ‚¨çš„é…ç½®ä¸­ï¼Œæ­¤å€¼ä¸º 512ï¼Œæ„å‘³ç€æ¨¡å‹å¯ä»¥å¤„ç†æœ€å¤š 512 ä¸ªæ ‡è®°ï¼ˆtokensï¼‰ã€‚è¶…å‡ºæ­¤é•¿åº¦çš„æ–‡æœ¬é€šå¸¸éœ€è¦æˆªæ–­æˆ–åˆ†å‰²ï¼Œä»¥ç¡®ä¿è¾“å…¥èƒ½å¤Ÿé€‚åº”æ¨¡å‹çš„è¦æ±‚ã€‚è¿™é¡¹é…ç½®å¯¹äºç®¡ç†é•¿æ–‡æœ¬è¾“å…¥ç‰¹åˆ«é‡è¦ï¼Œå› ä¸º Transformer ç±»æ¨¡å‹çš„ç»“æ„é€šå¸¸é™åˆ¶äº†æœ€å¤§è¾“å…¥é•¿åº¦ã€‚</li>
</ul>
<p><strong>vocabé‡Œé¢å¥½å’Œ##å¥½çš„åŒºåˆ«</strong></p>
<p>åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰é¢†åŸŸçš„è¯æ±‡è¡¨ï¼ˆvocabularyï¼‰ä¸­ï¼Œåƒ <code>å¥½</code> å’Œ <code>##å¥½</code> è¿™æ ·çš„è¯æ±‡é€šå¸¸åœ¨ä½¿ç”¨å­è¯ï¼ˆsubwordï¼‰åˆ†å‰²æŠ€æœ¯çš„æ¨¡å‹ä¸­å‡ºç°ï¼Œç‰¹åˆ«æ˜¯åœ¨åŸºäºå­—å…¸çš„åˆ†è¯æ–¹æ³•ï¼ˆå¦‚ BERTã€WordPiece å’Œ SentencePieceï¼‰ä¸­ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«ï¼š</p>
<ol start="0">
<li><strong>å¥½</strong></li>
</ol>
<ul>
<li><strong>å®Œæ•´çš„å•è¯ï¼š</strong> è¿™ä¸ªè¯å¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªå®Œæ•´çš„è¯æ±‡å•å…ƒã€‚å®ƒé€šå¸¸è¡¨ç¤ºâ€œå¥½â€çš„æ„æ€ï¼Œæ˜¯ä¸€ä¸ªå¸¸è§çš„ä¸­æ–‡è¯æ±‡ã€‚</li>
<li><strong>åœ¨è¯æ±‡è¡¨ä¸­çš„è¡¨ç¤ºï¼š</strong> å¦‚æœä½¿ç”¨çš„æ¨¡å‹è¯æ±‡è¡¨ä¸­åŒ…å« <code>å¥½</code>ï¼Œåˆ™æ¨¡å‹å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªå•è¯è¿›è¡Œè®­ç»ƒå’Œæ¨ç†ï¼Œè€Œæ— éœ€è¿›ä¸€æ­¥çš„æ‹†åˆ†ã€‚</li>
</ul>
<ol start="2">
<li><strong>##å¥½</strong></li>
</ol>
<ul>
<li><strong>å­è¯è¡¨ç¤ºï¼š</strong> <code>##</code> å‰ç¼€è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå­è¯ï¼ˆsubwordï¼‰å•å…ƒã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒè¡¨ç¤ºè¿™ä¸ªè¯æ˜¯ç”±å‰é¢çš„éƒ¨åˆ†è¯ï¼ˆprefixï¼‰æ„æˆçš„ä¸€éƒ¨åˆ†ã€‚åœ¨ WordPiece åˆ†è¯ä¸­ï¼Œè¿™ç§è¡¨ç¤ºæ³•é€šå¸¸ç”¨äºå¤„ç†é‚£äº›ä¸åœ¨è¯æ±‡è¡¨ä¸­çš„è¾ƒé•¿è¯ã€‚</li>
<li><strong>ç”¨äºè¯æ±‡è¡¨è¡¥å……ï¼š</strong> æ¯”å¦‚ï¼Œå¯¹äºä¸€ä¸ªè¾ƒé•¿çš„è¯æ±‡ï¼Œå¦‚æœå®ƒä¸èƒ½å®Œæ•´å‡ºç°åœ¨è¯æ±‡è¡¨ä¸­ï¼Œæ¨¡å‹ä¼šå°†è¿™ä¸ªè¯æ‹†åˆ†æˆæ›´å°çš„éƒ¨åˆ†ï¼Œå¹¶ä½¿ç”¨ <code>##</code> å‰ç¼€æ¥æŒ‡ç¤ºè¿™äº›éƒ¨åˆ†ã€‚è¿™æ ·ï¼Œå½“æ¨¡å‹å¤„ç†è¾ƒå¤æ‚çš„è¯æ—¶å¯ä»¥æ›´æœ‰æ•ˆåœ°æ•æ‰è¯­ä¹‰ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹</strong></p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¯æ±‡è¡¨ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹è¯è¯­ï¼š</p>
<ul>
<li><code>ç”µå­</code></li>
<li><code>äº§å“</code></li>
<li><code>å¥½</code></li>
</ul>
<p>å¦‚æœè¾“å…¥æ–‡æœ¬æ˜¯â€œç”µå­äº§å“å¥½â€ï¼Œç„¶åè¿›è¡Œåˆ†è¯ï¼š</p>
<ul>
<li>â€œç”µå­äº§å“å¥½â€ å¯èƒ½è¢«åˆ†è¯ä¸º <code>ç”µå­</code>ã€<code>äº§å“</code> å’Œ <code>##å¥½</code>ï¼Œå…¶ä¸­ <code>##å¥½</code> æŒ‡çš„æ˜¯â€œå¥½â€è¿™ä¸ªè¯çš„å­è¯è¡¨ç¤ºã€‚</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨å­è¯è¡¨ç¤º</strong></p>
<ul>
<li><strong>å¤„ç†æœªçŸ¥è¯ï¼š</strong> é€šè¿‡ä½¿ç”¨å­è¯è¡¨ç¤ºï¼Œæ¨¡å‹å¯ä»¥å¤„ç†é‚£äº›å®ƒä»æœªè§è¿‡çš„è¯ï¼Œå³ä½¿æ˜¯ä»å·²çŸ¥çš„å­è¯æ„å»ºçš„è¯ã€‚</li>
<li><strong>å‡å°‘è¯è¡¨å¤§å°ï¼š</strong> æœ‰äº†å­è¯å•å…ƒï¼Œæ¨¡å‹çš„è¯æ±‡è¡¨å¯ä»¥å˜å¾—å°å¾—å¤šï¼Œå› ä¸ºå®ƒå¯ä»¥çµæ´»æ„å»ºè¾ƒé•¿çš„è¯è€Œä¸éœ€è¦ä¸ºæ¯ä¸ªå¯èƒ½çš„ç»„åˆåˆ›å»ºä¸€ä¸ªè¯æ¡ã€‚</li>
<li><strong>è¯­ä¹‰ä¿æŒï¼š</strong> å­è¯ä¿æŒäº†å¯¹åŸæœ‰è¯çš„è¯­ä¹‰ï¼ŒåŒæ—¶åˆèƒ½æ”¯æŒæ›´å¹¿æ³›çš„è¡¨è¾¾ï¼Œå¯ä»¥å¸®åŠ©æ¨¡å‹æ›´å¥½åœ°ç†è§£æ–‡æœ¬çš„ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<h2 data-id="heading-3">ä½¿ç”¨AutoModelè‡ªåŠ¨æ¨¡å‹æ–¹å¼è°ƒç”¨Berté¢„è®­ç»ƒæ¨¡å‹</h2>
<p><code>AutoModel</code> æ˜¯ä¸€ä¸ªç”¨æ¥è‡ªåŠ¨åŠ è½½å„ç§é¢„è®­ç»ƒ Transformer æ¨¡å‹çš„ç±»ã€‚ä½ å¯ä»¥ä½¿ç”¨å®ƒç›´æ¥ä» Hugging Face æ¨¡å‹åº“ä¸­åŠ è½½æ¨¡å‹ï¼Œè€Œæ— é¡»å…³å¿ƒå…·ä½“çš„æ¨¡å‹å®ç°ã€‚ä¸»è¦ç”¨äºæ„å»ºå’Œå¾®è°ƒæ¨¡å‹ï¼Œä»¥ä¾¿åœ¨ç‰¹å®šçš„ä»»åŠ¡ä¸Šè¿›è¡Œæ›´æ·±å…¥çš„å¼€å‘ã€‚ä½¿ç”¨ AutoModel é€šå¸¸éœ€è¦æ›´ç»†ç²’åº¦çš„æ“ä½œï¼Œæ¯”å¦‚è¾“å…¥æ•°æ®çš„å¤„ç†ã€æ¨¡å‹çš„å‰å‘ä¼ æ’­ã€è¾“å‡ºçš„å¤„ç†ç­‰ã€‚æ›´é€‚åˆéœ€è¦æ¨¡å‹æ¶æ„å’Œè¾“å…¥è¾“å‡ºæ§åˆ¶çš„ç”¨æˆ·ï¼Œå¦‚ç ”ç©¶äººå‘˜æˆ–éœ€è¦å®šåˆ¶æ¨¡å‹çš„å¼€å‘è€…ã€‚</p>
<p><code>AutoModel</code> è¿˜æ˜¯ <code>pipeline</code> å¯¹æ¯”</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>AutoModel</th><th>pipeline</th></tr></thead><tbody><tr><td>ä½¿ç”¨å¤æ‚æ€§</td><td>è¾ƒå¤æ‚ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†å„ä¸ªæ­¥éª¤</td><td>ç®€å•ï¼Œè‡ªåŠ¨å¤„ç†æ‰€æœ‰æ­¥éª¤</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>é€‚åˆéœ€è¦çµæ´»æ€§å’Œå¾®è°ƒèƒ½åŠ›çš„å¼€å‘</td><td>é€‚åˆå¿«é€Ÿåº”ç”¨äºç‰¹å®šä»»åŠ¡</td></tr><tr><td>ç¤ºä¾‹ä»£ç </td><td><code>model = AutoModel.from_pretrained("xxx")</code></td><td><code>classifier = pipeline("task")</code></td></tr><tr><td>è¾“å‡ºå¤„ç†</td><td>éœ€è¦æ‰‹åŠ¨å¤„ç†æ¨¡å‹è¾“å‡º</td><td>è‡ªåŠ¨å¤„ç†è¾“å‡º</td></tr><tr><td>é€‚ç”¨äººç¾¤</td><td>ç ”ç©¶äººå‘˜ã€å¼€å‘è€…ç­‰</td><td>å¿«é€ŸåŸå‹æˆ–å¸Œæœ›ç®€åŒ–æµç¨‹çš„ç”¨æˆ·</td></tr></tbody></table>
<p>å…·ä½“ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import torch
from transformers import AutoTokenizer, AutoModelForSequenceClassification
â€‹
â€‹
def test_classfication():
 Â  Â <span class="hljs-comment"># åŠ è½½åˆ†è¯å™¨</span>
 Â  Â <span class="hljs-attr">tokenizer</span> = AutoTokenizer.from_pretrained(<span class="hljs-string">'./Bert-base-chinese'</span>)
â€‹
 Â  Â <span class="hljs-comment"># åŠ è½½æ¨¡å‹</span>
 Â  Â <span class="hljs-attr">model</span> = AutoModelForSequenceClassification.from_pretrained(<span class="hljs-string">'./Bert-base-chinese'</span>)
 Â  Â print(model)
â€‹
 Â  Â <span class="hljs-comment"># å‡†å¤‡è¾“å…¥æ•°æ®</span>
 Â  Â <span class="hljs-attr">input_ids</span> = tokenizer.encode(
 Â  Â  Â  Â <span class="hljs-attr">text</span>=<span class="hljs-string">'ä»Šå¤©å¤©æ°”ä¸é”™'</span>, Â <span class="hljs-comment"># è¾“å…¥æ–‡æœ¬</span>
 Â  Â  Â  Â <span class="hljs-attr">return_tensors</span>=<span class="hljs-string">'pt'</span>, Â <span class="hljs-comment"># è¿”å›PyTorchå¼ é‡</span>
 Â  Â  Â  Â <span class="hljs-attr">padding</span>=<span class="hljs-string">"max_length"</span>, Â <span class="hljs-comment"># å¡«å……åˆ°æœ€å¤§é•¿åº¦</span>
 Â  Â  Â  Â <span class="hljs-attr">truncation</span>=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># æˆªæ–­è¶…å‡ºé•¿åº¦çš„è¾“å…¥</span>
 Â  Â  Â  Â <span class="hljs-attr">max_length</span>=<span class="hljs-number">10</span> Â <span class="hljs-comment"># è¾“å…¥æœ€å¤§é•¿åº¦</span>
 Â   )
 Â  Â print(input_ids, input_ids.shape)
â€‹
 Â  Â <span class="hljs-comment"># è¯„ä¼°æ¨¡å¼</span>
 Â  Â model.eval()
â€‹
 Â  Â <span class="hljs-comment"># æ¨¡å‹é¢„æµ‹</span>
 Â  Â <span class="hljs-attr">output</span> = model(input_ids)
â€‹
 Â  Â <span class="hljs-comment"># 5. è·å–é¢„æµ‹ç»“æœ</span>
 Â  Â <span class="hljs-attr">logits</span> = output.logits
 Â  Â <span class="hljs-attr">prediction</span> = torch.argmax(logits, dim=-<span class="hljs-number">1</span>)
 Â  Â print(logits, prediction)
 Â  Â <span class="hljs-attr">sentiment</span> = prediction.item() Â <span class="hljs-comment"># è½¬æ¢ä¸º Python æ•´æ•°</span>
 Â  Â <span class="hljs-attr">sentiment_label</span> = <span class="hljs-string">"ç§¯æ"</span> if sentiment == <span class="hljs-number">1</span> else <span class="hljs-string">"æ¶ˆæ"</span> if sentiment == <span class="hljs-number">0</span> else <span class="hljs-string">"ä¸­æ€§"</span>
 Â  Â print(sentiment_label)
â€‹
â€‹
if <span class="hljs-attr">__name__</span> == <span class="hljs-string">'__main__'</span>:
 Â  Â test_classfication()
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-ini" lang="ini">BertForSequenceClassification(
  (bert): BertModel(
 Â   (embeddings): BertEmbeddings(
 Â  Â   (word_embeddings): Embedding(21128, 768, <span class="hljs-attr">padding_idx</span>=<span class="hljs-number">0</span>)
 Â  Â   (position_embeddings): Embedding(512, 768)
 Â  Â   (token_type_embeddings): Embedding(2, 768)
 Â  Â   (LayerNorm): LayerNorm((768,), <span class="hljs-attr">eps</span>=<span class="hljs-number">1</span>e-<span class="hljs-number">12</span>, elementwise_affine=<span class="hljs-literal">True</span>)
 Â  Â   (dropout): Dropout(<span class="hljs-attr">p</span>=<span class="hljs-number">0.1</span>, inplace=<span class="hljs-literal">False</span>)
 Â   )
 Â   (encoder): BertEncoder(
 Â  Â   (layer): ModuleList(
 Â  Â  Â   (0-11): 12 x BertLayer(
 Â  Â  Â  Â   (attention): BertAttention(
 Â  Â  Â  Â  Â   (self): BertSdpaSelfAttention(
 Â  Â  Â  Â  Â  Â   (query): Linear(<span class="hljs-attr">in_features</span>=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)
 Â  Â  Â  Â  Â  Â   (key): Linear(<span class="hljs-attr">in_features</span>=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)
 Â  Â  Â  Â  Â  Â   (value): Linear(<span class="hljs-attr">in_features</span>=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)
 Â  Â  Â  Â  Â  Â   (dropout): Dropout(<span class="hljs-attr">p</span>=<span class="hljs-number">0.1</span>, inplace=<span class="hljs-literal">False</span>)
 Â  Â  Â  Â  Â   )
 Â  Â  Â  Â  Â   (output): BertSelfOutput(
 Â  Â  Â  Â  Â  Â   (dense): Linear(<span class="hljs-attr">in_features</span>=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)
 Â  Â  Â  Â  Â  Â   (LayerNorm): LayerNorm((768,), <span class="hljs-attr">eps</span>=<span class="hljs-number">1</span>e-<span class="hljs-number">12</span>, elementwise_affine=<span class="hljs-literal">True</span>)
 Â  Â  Â  Â  Â  Â   (dropout): Dropout(<span class="hljs-attr">p</span>=<span class="hljs-number">0.1</span>, inplace=<span class="hljs-literal">False</span>)
 Â  Â  Â  Â  Â   )
 Â  Â  Â  Â   )
 Â  Â  Â  Â   (intermediate): BertIntermediate(
 Â  Â  Â  Â  Â   (dense): Linear(<span class="hljs-attr">in_features</span>=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">3072</span>, bias=<span class="hljs-literal">True</span>)
 Â  Â  Â  Â  Â   (intermediate_act_fn): GELUActivation()
 Â  Â  Â  Â   )
 Â  Â  Â  Â   (output): BertOutput(
 Â  Â  Â  Â  Â   (dense): Linear(<span class="hljs-attr">in_features</span>=<span class="hljs-number">3072</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)
 Â  Â  Â  Â  Â   (LayerNorm): LayerNorm((768,), <span class="hljs-attr">eps</span>=<span class="hljs-number">1</span>e-<span class="hljs-number">12</span>, elementwise_affine=<span class="hljs-literal">True</span>)
 Â  Â  Â  Â  Â   (dropout): Dropout(<span class="hljs-attr">p</span>=<span class="hljs-number">0.1</span>, inplace=<span class="hljs-literal">False</span>)
 Â  Â  Â  Â   )
 Â  Â  Â   )
 Â  Â   )
 Â   )
 Â   (pooler): BertPooler(
 Â  Â   (dense): Linear(<span class="hljs-attr">in_features</span>=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)
 Â  Â   (activation): Tanh()
 Â   )
  )
  (dropout): Dropout(<span class="hljs-attr">p</span>=<span class="hljs-number">0.1</span>, inplace=<span class="hljs-literal">False</span>)
  (classifier): Linear(<span class="hljs-attr">in_features</span>=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">2</span>, bias=<span class="hljs-literal">True</span>)
)
tensor(<span class="hljs-section">[[ 101,  791, 1921, 1921, 3698,  679, 7231,  102, Â   0, Â   0]]</span>) torch.Size(<span class="hljs-section">[1, 10]</span>)
tensor(<span class="hljs-section">[[-0.2556,  0.3660]]</span>, <span class="hljs-attr">grad_fn</span>=&lt;AddmmBackward0&gt;) tensor([<span class="hljs-number">1</span>])
ç§¯æ
</code></pre>
<p><code>AutoTokenizer</code> è´Ÿè´£å°†ç”Ÿæ–‡æœ¬è½¬æ¢ä¸ºæ¨¡å‹å¯ä»¥ç†è§£çš„è¾“å…¥æ ¼å¼ã€‚è¿™ä¸€è¿‡ç¨‹é€šå¸¸æ¶‰åŠåˆ†è¯ã€ç¼–ç ç­‰æ­¥éª¤ã€‚</p>
<p>ä»¥ä¸‹ä»‹ç» <code>AutoTokenizer.encode</code> æ–¹æ³•çš„é‡è¦å‚æ•°ï¼š</p>
<p><strong>AutoTokenizer.encode æ–¹æ³•å‚æ•°</strong></p>
<ol start="0">
<li>
<p><strong>text</strong> (<code>str</code> or <code>List[str]</code>)</p>
<ul>
<li>è¦ç¼–ç çš„è¾“å…¥æ–‡æœ¬ï¼Œå¯ä»¥æ˜¯å•ä¸ªå­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²åˆ—è¡¨ã€‚å¦‚æœæ˜¯åˆ—è¡¨ï¼Œ<code>AutoTokenizer</code> å°†å¯¹æ¯ä¸ªå­—ç¬¦ä¸²è¿›è¡Œç¼–ç ã€‚</li>
</ul>
</li>
<li>
<p><strong>text_pair</strong> (<code>str</code> or <code>List[str]</code>, optional)</p>
<ul>
<li>å¦‚æœæ‚¨æƒ³è¦å¤„ç†æ–‡æœ¬å¯¹ï¼ˆä¾‹å¦‚ï¼Œé—®ç­”ä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å‚æ•°ã€‚å®ƒçš„å€¼ä¹Ÿå¯ä»¥æ˜¯å•ä¸ªå­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œè¡¨ç¤ºè¦ä¸ <code>text</code> ä¸€åŒç¼–ç çš„ç¬¬äºŒä¸ªæ–‡æœ¬ã€‚</li>
</ul>
</li>
<li>
<p><strong>max_length</strong> (<code>int</code>, optional)</p>
<ul>
<li>é™åˆ¶è¿”å›çš„åºåˆ—æœ€å¤§é•¿åº¦ã€‚å¦‚æœè¾“å…¥æ–‡æœ¬çš„ç¼–ç é•¿åº¦è¶…è¿‡æ­¤å‚æ•°ï¼Œå°†ä¼šè¢«æˆªæ–­ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤é•¿åº¦ç”±æ¨¡å‹çš„æœ€å¤§è¾“å…¥é•¿åº¦å†³å®šã€‚</li>
</ul>
</li>
<li>
<p><strong>padding</strong> (<code>bool</code> or <code>str</code>, optional)</p>
<ul>
<li>æ§åˆ¶è¿”å›çš„åºåˆ—æ˜¯å¦è¿›è¡Œå¡«å……ã€‚å¯ä»¥è®¾ç½®ä¸º <code>True</code>ï¼Œè®©æ‰€æœ‰è¿”å›çš„åºåˆ—å¡«å……åˆ°åŒä¸€æœ€å¤§é•¿åº¦ï¼Œæˆ–è€…ä¸º <code>'max_length'</code>ï¼Œä½¿æ‰€æœ‰åºåˆ—å¡«å……åˆ° <code>max_length</code> æŒ‡å®šçš„é•¿åº¦ã€‚é»˜è®¤å€¼é€šå¸¸æ˜¯ <code>False</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>truncation</strong> (<code>bool</code> or <code>str</code>, optional)</p>
<ul>
<li>æ§åˆ¶æ˜¯å¦æˆªæ–­è¾“å…¥åºåˆ—ã€‚é€šå¸¸å¯ä»¥è®¾ç½®ä¸º <code>True</code>ï¼Œä»¥æˆªæ–­åˆ°æœ€å¤§é•¿åº¦ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸º <code>'longest_first'</code> æˆ– <code>'do_not_truncate'</code> ç­‰é€‰é¡¹ã€‚é»˜è®¤å€¼é€šå¸¸æ˜¯ <code>False</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>return_tensors</strong> (<code>str</code>, optional)</p>
<ul>
<li>å¦‚æœè®¾ç½®ï¼Œè¿”å›çš„å¼ é‡å°†è¢«è½¬æ¢ä¸ºæŒ‡å®šæ¡†æ¶çš„å¼ é‡æ ¼å¼ï¼Œä¾‹å¦‚ <code>'pt'</code>ï¼ˆPyTorchï¼‰æˆ–è€… <code>'tf'</code>ï¼ˆTensorFlowï¼‰ã€‚å¦‚æœä¸è®¾ç½®ï¼Œè¿”å›çš„æ˜¯æ™®é€šçš„ Python åˆ—è¡¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>return_attention_mask</strong> (<code>bool</code>, optional)</p>
<ul>
<li>æ˜¯å¦è¿”å›æ³¨æ„åŠ›æ©ç ã€‚æ³¨æ„åŠ›æ©ç é€šå¸¸ç”¨äºæŒ‡ç¤ºæ¨¡å‹åœ¨å¤„ç†è¾“å…¥åºåˆ—æ—¶ï¼Œåº”è¯¥å…³æ³¨å“ªäº›ä½ç½®ã€‚</li>
</ul>
</li>
<li>
<p><strong>return_token_type_ids</strong> (<code>bool</code>, optional)</p>
<ul>
<li>æ˜¯å¦è¿”å› token ç±»å‹ ID å€¼ï¼Œåœ¨ä¸€äº›ä»»åŠ¡ï¼ˆå¦‚é—®ç­”ï¼‰ä¸­å¯èƒ½ä¼šç”¨åˆ°ï¼Œå®ƒå¸®åŠ©æ¨¡å‹åŒºåˆ†ä¸åŒçš„æ–‡æœ¬å¯¹ã€‚</li>
</ul>
</li>
<li>
<p><strong>add_special_tokens</strong> (<code>bool</code>, optional)</p>
<ul>
<li>æ§åˆ¶æ˜¯å¦åœ¨è¾“å…¥æ–‡æœ¬å‰åæ·»åŠ ç‰¹æ®Šçš„æ ‡è®°ï¼ˆå¦‚ <code>[CLS]</code> å’Œ <code>[SEP]</code>ï¼‰ï¼Œè¿™äº›æ ‡è®°åœ¨ BERT å’Œå…¶ä»–ä¸€äº›æ¨¡å‹ä¸­æ˜¯å¿…éœ€çš„ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£è¾“å…¥çš„ç»“æ„ã€‚</li>
</ul>
</li>
<li>
<p><strong>encoding</strong> (<code>str</code>, optional)</p>
<ul>
<li>æŒ‡å®šå­—ç¬¦ç¼–ç ç±»å‹ï¼Œä¾‹å¦‚ "utf-8"ã€‚è¿™é€šå¸¸åœ¨å¤„ç†æ–‡æœ¬è¾“å…¥æ—¶å¾ˆæœ‰ç”¨ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-4">ä½¿ç”¨AutoModelè‡ªåŠ¨æ¨¡å¼æ–¹å¼è°ƒç”¨gpt2é¢„è®­ç»ƒæ¨¡å‹å®ç°æ–‡æœ¬ç”Ÿæˆä»»åŠ¡</h2>
<p>GPT-2ï¼ˆGenerative Pre-trained Transformer 2ï¼‰æ˜¯ç”±OpenAIå¼€å‘çš„ä¸€ç§è¯­è¨€ç”Ÿæˆæ¨¡å‹ï¼ŒåŸºäºTransformeræ¶æ„ã€‚å®ƒæ˜¯GPTï¼ˆGenerative Pre-trained Transformerï¼‰ç³»åˆ—çš„ç¬¬äºŒä»£äº§å“ï¼Œäº2019å¹´å‘å¸ƒã€‚GPT-2æ¨¡å‹çš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨å¤§è§„æ¨¡æ–‡æœ¬æ•°æ®è¿›è¡Œæ— ç›‘ç£å­¦ä¹ ï¼Œé€šè¿‡è‡ªå›å½’çš„æ–¹å¼ç”Ÿæˆè‡ªç„¶è¯­è¨€æ–‡æœ¬ã€‚</p>
<p>GPT-2çš„è®­ç»ƒæ•°æ®è¦†ç›–äº†äº’è”ç½‘çš„å¤§é‡æ–‡æœ¬ï¼ŒåŒ…æ‹¬ä¹¦ç±ã€æ–‡ç« ã€ç½‘é¡µç­‰ï¼ŒåŒ…å«å¤šç§ä¸»é¢˜å’Œé£æ ¼ã€‚æ¨¡å‹é‡‡ç”¨äº†1.5äº¿åˆ°15äº¿ä¸ªå‚æ•°çš„å¤šä¸ªå˜ä½“ï¼Œè¾ƒå¤§çš„å‚æ•°é‡ä½¿å…¶èƒ½å¤Ÿæ•æ‰ä¸°å¯Œçš„è¯­ä¹‰ä¿¡æ¯å’Œä¸Šä¸‹æ–‡ä¾èµ–å…³ç³»ï¼Œä»è€Œç”Ÿæˆæ›´ä¸ºè¿è´¯å’Œä¸Šä¸‹æ–‡ç›¸å…³çš„æ–‡æœ¬ã€‚</p>
<p>ä¸å…¶å‰èº«ç›¸æ¯”ï¼ŒGPT-2åœ¨ç”Ÿæˆæ–‡æœ¬çš„è´¨é‡å’Œå¤šæ ·æ€§ä¸Šæœ‰äº†æ˜æ˜¾æå‡ã€‚å®ƒå¯ä»¥ç”¨äºå¤šç§ä»»åŠ¡ï¼Œå¦‚æ–‡æœ¬å®Œæˆã€æ•…äº‹ç”Ÿæˆã€é—®ç­”ç³»ç»Ÿä»¥åŠå¯¹è¯ç”Ÿæˆç­‰ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ¨¡å‹å¯ä»¥æ ¹æ®ç»™å®šçš„èµ·å§‹æ–‡æœ¬ï¼ˆpromptï¼‰ç”Ÿæˆè¿ç»­çš„å†…å®¹ï¼Œå±•ç°å‡ºå¼ºå¤§çš„åˆ›é€ åŠ›ã€‚ç„¶è€Œï¼ŒGPT-2ä¹Ÿå¼•å‘äº†å¯¹å…¶æ½œåœ¨æ»¥ç”¨çš„æ‹…å¿§ï¼Œå¦‚ç”Ÿæˆè™šå‡ä¿¡æ¯å’Œåƒåœ¾é‚®ä»¶ç­‰ã€‚</p>
<p>ç”±äºå…¶å¼ºå¤§çš„èƒ½åŠ›ï¼ŒOpenAIèµ·åˆé€‰æ‹©åˆ†é˜¶æ®µå‘å¸ƒGPT-2ï¼Œä»¥ä¾¿å¯¹æ½œåœ¨é£é™©è¿›è¡Œè¯„ä¼°ã€‚æœ€ç»ˆåœ¨2020å¹´å¼€æºäº†å®Œæ•´æ¨¡å‹ï¼Œä½¿å¾—ç ”ç©¶äººå‘˜å’Œå¼€å‘è€…èƒ½å¤Ÿæ›´å¹¿æ³›åœ°ä½¿ç”¨å’Œæ¢ç´¢è¿™ä¸€æŠ€æœ¯ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fuer%2Fgpt2-chinese-cluecorpussmall" target="_blank" title="https://huggingface.co/uer/gpt2-chinese-cluecorpussmall" ref="nofollow noopener noreferrer">huggingface.co/uer/gpt2-châ€¦</a></p>
<p>æˆ‘ä»¬ç”¨gpt2å®ç°æ–‡æœ¬ç”Ÿæˆä»»åŠ¡ï¼Œä¸‹é¢æ˜¯ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import torch
from transformers import AutoTokenizer, AutoModelForCausalLM
â€‹
â€‹
def test_text_generation():
 Â  Â <span class="hljs-comment"># ä½¿ç”¨è®¾å¤‡ï¼ˆGPU/CPUï¼‰</span>
 Â  Â <span class="hljs-attr">device</span> = torch.device(<span class="hljs-string">"cuda"</span> if torch.cuda.is_available() else <span class="hljs-string">"cpu"</span>)
 Â  Â print(device)
â€‹
 Â  Â <span class="hljs-comment"># åŠ è½½åˆ†è¯å™¨</span>
 Â  Â <span class="hljs-attr">tokenizer</span> = AutoTokenizer.from_pretrained(<span class="hljs-string">'./gpt2-chinese-cluecorpussmall'</span>)
â€‹
 Â  Â <span class="hljs-comment"># åŠ è½½æ¨¡å‹</span>
 Â  Â <span class="hljs-attr">model</span> = AutoModelForCausalLM.from_pretrained(<span class="hljs-string">'./gpt2-chinese-cluecorpussmall'</span>)
 Â  Â print(model)
â€‹
 Â  Â <span class="hljs-comment"># è®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼</span>
 Â  Â model.eval()
â€‹
 Â  Â model.to(device)
â€‹
 Â  Â <span class="hljs-comment"># å‡†å¤‡è¾“å…¥æ•°æ®</span>
 Â  Â <span class="hljs-attr">input_ids</span> = tokenizer.encode(
 Â  Â  Â  Â <span class="hljs-attr">text</span>=<span class="hljs-string">'å¤§è¯­è¨€æ¨¡å‹æŠ€æœ¯å‘å±•'</span>, Â <span class="hljs-comment"># è¾“å…¥æ–‡æœ¬</span>
 Â  Â  Â  Â <span class="hljs-attr">return_tensors</span>=<span class="hljs-string">'pt'</span> Â <span class="hljs-comment"># è¿”å›PyTorchå¼ é‡</span>
 Â   ).to(device)
â€‹
 Â  Â <span class="hljs-comment"># ç”Ÿæˆæ–‡æœ¬</span>
 Â  Â <span class="hljs-attr">output_sequences</span> = model.generate(
 Â  Â  Â  Â <span class="hljs-attr">input_ids</span>=input_ids,
 Â  Â  Â  Â <span class="hljs-attr">max_length</span>=<span class="hljs-number">100</span>, Â <span class="hljs-comment"># ç”Ÿæˆçš„æ–‡æœ¬æ€»é•¿åº¦</span>
 Â  Â  Â  Â <span class="hljs-attr">num_return_sequences</span>=<span class="hljs-number">1</span>, Â <span class="hljs-comment"># è¿”å›çš„ç”Ÿæˆåºåˆ—æ•°é‡</span>
 Â  Â  Â  Â <span class="hljs-attr">no_repeat_ngram_size</span>=<span class="hljs-number">2</span>, Â <span class="hljs-comment"># é¿å…é‡å¤çš„n-gram é˜²æ­¢ç›¸åŒè¯ç»„é‡å¤å‡ºç°ï¼Œä»è€Œæé«˜ç”Ÿæˆæ–‡æœ¬çš„å¤šæ ·æ€§å’Œè‡ªç„¶æ€§ã€‚</span>
 Â  Â  Â  Â <span class="hljs-attr">temperature</span>=<span class="hljs-number">0.7</span>, Â <span class="hljs-comment"># æ¸©åº¦å‚æ•°æ§åˆ¶éšæœºæ€§</span>
 Â  Â  Â  Â <span class="hljs-attr">top_k</span>=<span class="hljs-number">50</span>, Â <span class="hljs-comment"># ä»…ä»å‰kä¸ªæ¦‚ç‡æœ€é«˜çš„å•è¯ä¸­é‡‡æ ·</span>
 Â  Â  Â  Â <span class="hljs-attr">top_p</span>=<span class="hljs-number">0.95</span>, Â <span class="hljs-comment"># åªä»å‰95%æ¦‚ç‡è´¨é‡çš„è¯æ±‡ä¸­è¿›è¡Œéšæœºé‡‡æ · æ ¸é‡‡æ ·ç­–ç•¥</span>
 Â  Â  Â  Â <span class="hljs-attr">do_sample</span>=<span class="hljs-literal">True</span> Â <span class="hljs-comment"># å¼€å¯é‡‡æ ·</span>
 Â   )
â€‹
 Â  Â print(output_sequences)
â€‹
 Â  Â <span class="hljs-comment"># è§£ç å¹¶æ‰“å°ç”Ÿæˆçš„æ–‡æœ¬</span>
 Â  Â for sequence in output_sequences:
 Â  Â  Â  Â <span class="hljs-attr">generated_text</span> = tokenizer.decode(sequence, skip_special_tokens=<span class="hljs-literal">True</span>)
 Â  Â  Â  Â print(generated_text)
â€‹
â€‹
if <span class="hljs-attr">__name__</span> == <span class="hljs-string">'__main__'</span>:
 Â  Â test_text_generation()
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c1ddc9235d440a6baca3874cf8237c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311838&amp;x-signature=vDwey51IjILpS%2BKiWkVCBPS6HSE%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®æµ‹å¯¹å†³ï½œYOLOv11/v13/YOLO26/YOLO-Proè¾¹ç¼˜éƒ¨ç½²æ€§ä»·æ¯”åˆ†æï¼šè°æ˜¯ä½ç®—åŠ›è®¾å¤‡çœŸç¥ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7596066987472879658</link>    <guid>https://juejin.cn/post/7596066987472879658</guid>    <pubDate>2026-01-18T03:31:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596066987472879658" data-draft-id="7596276978807488555" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®æµ‹å¯¹å†³ï½œYOLOv11/v13/YOLO26/YOLO-Proè¾¹ç¼˜éƒ¨ç½²æ€§ä»·æ¯”åˆ†æï¼šè°æ˜¯ä½ç®—åŠ›è®¾å¤‡çœŸç¥ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-18T03:31:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¨å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/3411107130652176"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®æµ‹å¯¹å†³ï½œYOLOv11/v13/YOLO26/YOLO-Proè¾¹ç¼˜éƒ¨ç½²æ€§ä»·æ¯”åˆ†æï¼šè°æ˜¯ä½ç®—åŠ›è®¾å¤‡çœŸç¥ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3411107130652176/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¨å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T03:31:29.000Z" title="Sun Jan 18 2026 03:31:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éšç€YOLOç³»åˆ—æ¨¡å‹è¿­ä»£åˆ°v13ã€YOLO26è¿™ç±»æ–°æ¶æ„ï¼Œä¸å°‘å¼€å‘è€…åœ¨è¾¹ç¼˜éƒ¨ç½²æ—¶ä¼šé™·å…¥â€œè¿½æ–°è¯¯åŒºâ€â€”â€”è®¤ä¸ºæ–°ç‰ˆæœ¬å¿…ç„¶æ›´ä¼˜ã€‚ä½†åœ¨è¾¹ç¼˜åœºæ™¯ä¸­ï¼Œ<strong>ç®—åŠ›ã€åŠŸè€—ã€ç²¾åº¦ã€éƒ¨ç½²æˆæœ¬</strong>çš„ç»¼åˆæ€§ä»·æ¯”ï¼Œè¿œæ¯”å•ä¸€æŒ‡æ ‡çš„å³°å€¼æ›´é‡è¦ã€‚</p>
<p>STM32ã€ESP32ã€RK3568è¿™ç±»è¾¹ç¼˜è®¾å¤‡ï¼Œè¦ä¹ˆå—é™äºMCUçš„ä½ç®—åŠ›ï¼ˆå¦‚STM32H7ä»…480MHzä¸»é¢‘ï¼‰ï¼Œè¦ä¹ˆå—é™äºNPUçš„ç¡¬ä»¶åŠ é€Ÿå…¼å®¹æ€§ï¼ˆå¦‚RK3568ä»…æ”¯æŒç‰¹å®šç®—å­ï¼‰ï¼Œæ–°ç‰ˆæœ¬YOLOçš„â€œç²¾åº¦æå‡â€å¾€å¾€ä¼´éšå‚æ•°é‡ã€è®¡ç®—é‡æš´æ¶¨ï¼Œåè€Œåœ¨è¾¹ç¼˜è®¾å¤‡ä¸Šè¡¨ç°æ‹‰èƒ¯ã€‚</p>
<p>æœ¬æ–‡åŸºäºçœŸå®è¾¹ç¼˜éƒ¨ç½²é¡¹ç›®ï¼Œé€‰å–å½“ä¸‹ä¸»æµçš„YOLOv11-Nanoã€YOLOv13-Nanoã€YOLO26-Tinyã€YOLO-Proï¼ˆåŒæ¨¡å¼ï¼‰å››å¤§æ¨¡å‹ï¼Œåœ¨<strong>æ— NPUä½ç«¯MCUï¼ˆSTM32H743ï¼‰ã€å¸¦è½»é‡NPUè®¾å¤‡ï¼ˆRK3568ï¼‰ã€ä½åŠŸè€—ç‰©è”ç½‘èŠ‚ç‚¹ï¼ˆESP32-S3ï¼‰</strong> ä¸‰ç±»ç¡¬ä»¶ä¸Šï¼Œä»å‚æ•°é‡ã€æ¨ç†è€—æ—¶ã€ç²¾åº¦ã€åŠŸè€—ã€éƒ¨ç½²éš¾åº¦äº”ä¸ªç»´åº¦åšå…¨é‡åŒ–å¯¹æ¯”ï¼Œæ‹†è§£å„æ¨¡å‹çš„è¾¹ç¼˜é€‚é…æ€§ï¼Œç»™å‡ºæ˜ç¡®çš„åœºæ™¯åŒ–é€‰å‹å»ºè®®ï¼Œå¸®ä½ é¿å¼€â€œè¿½æ–°è¸©å‘â€â€œç®—åŠ›æµªè´¹â€çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æµ‹è¯•ç¯å¢ƒè¯´æ˜ï¼šå…¬å¹³å¯¹å†³çš„å‰æï¼ˆæ— åé‡åŒ–åŸºç¡€ï¼‰</h2>
<p>ä¸ºç¡®ä¿å¯¹æ¯”å…¬å¹³ï¼Œæ‰€æœ‰æ¨¡å‹ç»Ÿä¸€éµå¾ªä»¥ä¸‹æµ‹è¯•æ ‡å‡†ï¼Œé¿å…å› é…ç½®å·®å¼‚å¯¼è‡´ç»“æœå¤±çœŸâ€”â€”è¿™ä¹Ÿæ˜¯è¾¹ç¼˜éƒ¨ç½²å®æµ‹çš„æ ¸å¿ƒåŸåˆ™ï¼Œå¾ˆå¤šå…¬å¼€å¯¹æ¯”å› å¿½ç•¥ç»†èŠ‚ï¼Œç»“è®ºæ¯«æ— å‚è€ƒä»·å€¼ã€‚</p>
<h3 data-id="heading-1">1.1 ç¡¬ä»¶ç¯å¢ƒï¼ˆè¦†ç›–ä¸‰ç±»å…¸å‹è¾¹ç¼˜è®¾å¤‡ï¼‰</h3>





























<table><thead><tr><th>ç¡¬ä»¶ç±»å‹</th><th>å…·ä½“å‹å·</th><th>æ ¸å¿ƒå‚æ•°</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ— NPUä½ç«¯MCU</td><td>STM32H743VIT6</td><td>CPUï¼š480MHzï¼ˆCortex-M7ï¼‰ï¼ŒRAMï¼š1MBï¼ŒFlashï¼š2MB</td><td>å·¥ä¸šè¾¹ç¼˜æ£€æµ‹ã€ä½åŠŸè€—ç‰©è”ç½‘ç»ˆç«¯</td></tr><tr><td>å¸¦è½»é‡NPUè®¾å¤‡</td><td>RK3568ï¼ˆå¼€å‘æ¿ï¼‰</td><td>CPUï¼š1.8GHzï¼ˆå››æ ¸A55ï¼‰ï¼ŒNPUï¼š0.8TOPSï¼ŒRAMï¼š2GB</td><td>ä¸­ç«¯è¾¹ç¼˜ç½‘å…³ã€æ™ºèƒ½æ‘„åƒå¤´</td></tr><tr><td>ä½åŠŸè€—ç‰©è”ç½‘èŠ‚ç‚¹</td><td>ESP32-S3-WROOM-1</td><td>CPUï¼š240MHzï¼ˆåŒæ ¸Xtensa LX7ï¼‰ï¼ŒRAMï¼š512KBï¼ŒFlashï¼š8MB</td><td>ä¾¿æºè®¾å¤‡ã€ç”µæ± ä¾›ç”µä¼ æ„ŸèŠ‚ç‚¹</td></tr></tbody></table>
<h3 data-id="heading-2">1.2 è½¯ä»¶ä¸æ¨¡å‹é…ç½®</h3>
<ul>
<li>æ¨ç†æ¡†æ¶ï¼šSTM32/ESP32ç”¨ TensorFlow Lite Micro + CMSIS-NNï¼ˆç¡¬ä»¶åŠ é€Ÿï¼‰ï¼›RK3568ç”¨ RKNN Toolkit V2ï¼ˆNPUåŠ é€Ÿï¼‰ï¼›</li>
<li>æ¨¡å‹é¢„å¤„ç†ï¼šç»Ÿä¸€è¾“å…¥å°ºå¯¸ 320Ã—320ï¼ˆè¾¹ç¼˜è®¾å¤‡ä¸»æµé€‚é…å°ºå¯¸ï¼‰ï¼Œå‡åš INT8 é‡åŒ–ï¼ˆè§„é¿FP16ç®—åŠ›ä¸è¶³é—®é¢˜ï¼‰ï¼Œåˆ é™¤è®­ç»ƒå†—ä½™èŠ‚ç‚¹ï¼ˆDropoutã€BatchNormæ¨ç†å†—ä½™è®¡ç®—ï¼‰ï¼›</li>
<li>æµ‹è¯•æ•°æ®é›†ï¼šå·¥ä¸šå°ç›®æ ‡æ•°æ®é›†ï¼ˆå«5000å¼ å›¾åƒï¼Œç›®æ ‡å°ºå¯¸8-64pxï¼Œæ¶µç›–é›¶ä»¶ç¼ºé™·ã€è®¾å¤‡æ ‡è¯†ï¼Œè´´åˆçœŸå®è¾¹ç¼˜åœºæ™¯ï¼‰ï¼›</li>
<li>è¯„ä»·æŒ‡æ ‡ï¼šå‚æ•°é‡ï¼ˆParamsï¼‰ã€è®¡ç®—é‡ï¼ˆFLOPsï¼‰ã€æ¨ç†è€—æ—¶ï¼ˆå•å¸§å¹³å‡ï¼Œå•ä½msï¼‰ã€ç²¾åº¦ï¼ˆmAP@0.5ï¼‰ã€æ¨ç†åŠŸè€—ï¼ˆå•ä½mAï¼Œä»…æµ‹ç”µæ± ä¾›ç”µè®¾å¤‡ï¼‰ã€éƒ¨ç½²éš¾åº¦ï¼ˆ1-5æ˜Ÿï¼Œ1æ˜Ÿæœ€æ˜“ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-3">äºŒã€å››å¤§æ¨¡å‹æ ¸å¿ƒå‚æ•°ä¸å®æµ‹æ•°æ®å¯¹å†³</h2>
<h3 data-id="heading-4">2.1 æ ¸å¿ƒå‚æ•°æ¦‚è§ˆï¼ˆé‡åŒ–åŸºç¡€æŒ‡æ ‡ï¼‰</h3>















































<table><thead><tr><th>æ¨¡å‹</th><th>æ¶æ„ç‰¹ç‚¹</th><th>å‚æ•°é‡ï¼ˆINT8é‡åŒ–åï¼‰</th><th>FLOPsï¼ˆ320Ã—320ï¼ŒINT8ï¼‰</th><th>æ¨¡å‹ä½“ç§¯ï¼ˆINT8ï¼‰</th></tr></thead><tbody><tr><td>YOLOv11-Nano</td><td>C2f-Liteéª¨æ¶ï¼ŒSiLUæ¿€æ´»</td><td>2.8M</td><td>7.5G</td><td>1.2MB</td></tr><tr><td>YOLOv13-Nano</td><td>æ”¹è¿›C2féª¨æ¶ï¼ŒEPGOæ³¨æ„åŠ›</td><td>3.1M</td><td>8.2G</td><td>1.3MB</td></tr><tr><td>YOLO26-Tiny</td><td>è½»é‡åŒ–C3k2éª¨æ¶ï¼Œç²¾ç®€æ³¨æ„åŠ›</td><td>2.5M</td><td>6.8G</td><td>1.1MB</td></tr><tr><td>YOLO-Proï¼ˆReLUæ¨¡å¼ï¼‰</td><td>C2f-Liteéª¨æ¶ï¼ŒReLUæ¿€æ´»ï¼Œæ— æ³¨æ„åŠ›</td><td>1.8M</td><td>4.2G</td><td>800KB</td></tr><tr><td>YOLO-Proï¼ˆæ³¨æ„åŠ›æ¨¡å¼ï¼‰</td><td>C2f-Lite+ç®€åŒ–ECAæ³¨æ„åŠ›ï¼ŒReLUæ¿€æ´»</td><td>2.1M</td><td>4.6G</td><td>920KB</td></tr></tbody></table>
<h3 data-id="heading-5">2.2 ä¸‰ç±»ç¡¬ä»¶å®æµ‹æ•°æ®å…¨å¯¹æ¯”ï¼ˆæ ¸å¿ƒç»“è®ºæ¥æºï¼‰</h3>
<h4 data-id="heading-6">åœºæ™¯1ï¼šæ— NPUä½ç«¯MCUï¼ˆSTM32H743ï¼‰â€”â€” ç®—åŠ›ç“¶é¢ˆæœ€æ˜æ˜¾</h4>















































<table><thead><tr><th>æ¨¡å‹</th><th>æ¨ç†è€—æ—¶ï¼ˆmsï¼‰</th><th>mAP@0.5ï¼ˆ%ï¼‰</th><th>éƒ¨ç½²éš¾åº¦</th><th>é€‚é…æ€§æ€»ç»“</th></tr></thead><tbody><tr><td>YOLOv11-Nano</td><td>142</td><td>74.5</td><td>â˜…â˜…â˜…â˜†â˜†</td><td>èƒ½è·‘ä½†å®æ—¶æ€§ä¸è¶³ï¼ˆâ‰ˆ7FPSï¼‰ï¼ŒRAMå ç”¨890KBï¼ˆæ¥è¿‘ä¸Šé™ï¼‰</td></tr><tr><td>YOLOv13-Nano</td><td>168</td><td>76.2</td><td>â˜…â˜…â˜…â˜…â˜†</td><td>æ¨ç†è€—æ—¶è¶…150msï¼Œå®æ—¶æ€§ä¸è¾¾æ ‡ï¼Œä¸”EPGOæ³¨æ„åŠ›ç®—å­é€‚é…å¤æ‚</td></tr><tr><td>YOLO26-Tiny</td><td>125</td><td>73.8</td><td>â˜…â˜…â˜…â˜†â˜†</td><td>é€Ÿåº¦ä¼˜äºv11ï¼Œä½†ç²¾åº¦ç•¥ä½ï¼ŒRAMå ç”¨820KBï¼Œå‹‰å¼ºé€‚é…</td></tr><tr><td>YOLO-Proï¼ˆReLUï¼‰</td><td>78</td><td>72.3</td><td>â˜…â˜…â˜†â˜†â˜†</td><td>å®æ—¶æ€§æœ€ä¼˜ï¼ˆâ‰ˆ12FPSï¼‰ï¼ŒRAMå ç”¨ä»…580KBï¼Œéƒ¨ç½²æ— ç®—å­å…¼å®¹é—®é¢˜</td></tr><tr><td>YOLO-Proï¼ˆæ³¨æ„åŠ›ï¼‰</td><td>100</td><td>76.6</td><td>â˜…â˜…â˜†â˜†â˜†</td><td>ç²¾åº¦è¶…v13ï¼Œè€—æ—¶å°‘35%ï¼ŒRAMå ç”¨650KBï¼Œå…¼é¡¾é€Ÿåº¦ä¸ç²¾åº¦</td></tr></tbody></table>
<h4 data-id="heading-7">åœºæ™¯2ï¼šå¸¦è½»é‡NPUè®¾å¤‡ï¼ˆRK3568ï¼‰â€”â€” ç¡¬ä»¶åŠ é€Ÿé‡Šæ”¾æ€§èƒ½</h4>





















































<table><thead><tr><th>æ¨¡å‹</th><th>æ¨ç†è€—æ—¶ï¼ˆmsï¼‰</th><th>mAP@0.5ï¼ˆ%ï¼‰</th><th>NPUåŠ é€Ÿæ¯”</th><th>éƒ¨ç½²éš¾åº¦</th><th>é€‚é…æ€§æ€»ç»“</th></tr></thead><tbody><tr><td>YOLOv11-Nano</td><td>38</td><td>75.1</td><td>3.7å€</td><td>â˜…â˜…â˜†â˜†â˜†</td><td>åŠ é€Ÿæ•ˆæœå¥½ï¼Œå®æ—¶æ€§æ‹‰æ»¡ï¼ˆâ‰ˆ26FPSï¼‰ï¼Œæ— ç®—å­å…¼å®¹é—®é¢˜</td></tr><tr><td>YOLOv13-Nano</td><td>45</td><td>77.3</td><td>3.7å€</td><td>â˜…â˜…â˜…â˜†â˜†</td><td>ç²¾åº¦æœ€é«˜ï¼Œä½†è€—æ—¶æ¯”v11å¤š18%ï¼ŒEPGOæ³¨æ„åŠ›åœ¨NPUä¸ŠåŠ é€Ÿæœ‰é™</td></tr><tr><td>YOLO26-Tiny</td><td>35</td><td>74.2</td><td>3.6å€</td><td>â˜…â˜…â˜†â˜†â˜†</td><td>é€Ÿåº¦æœ€å¿«ï¼Œä½†ç²¾åº¦ç•¥é€Šäºv11ï¼Œæ€§ä»·æ¯”ä¸­ç­‰</td></tr><tr><td>YOLO-Proï¼ˆReLUï¼‰</td><td>22</td><td>72.8</td><td>3.5å€</td><td>â˜…â˜…â˜†â˜†â˜†</td><td>è€—æ—¶æœ€çŸ­ï¼ˆâ‰ˆ45FPSï¼‰ï¼Œä½†ç²¾åº¦å·®è·æ˜æ˜¾ï¼Œé€‚åˆå¯¹ç²¾åº¦è¦æ±‚ä½çš„åœºæ™¯</td></tr><tr><td>YOLO-Proï¼ˆæ³¨æ„åŠ›ï¼‰</td><td>28</td><td>76.8</td><td>3.6å€</td><td>â˜…â˜…â˜†â˜†â˜†</td><td>ç²¾åº¦æ¥è¿‘v13ï¼Œè€—æ—¶å°‘38%ï¼Œç¡¬ä»¶èµ„æºå ç”¨æœ€ä½ï¼Œæ€§ä»·æ¯”æœ€ä¼˜</td></tr></tbody></table>
<h4 data-id="heading-8">åœºæ™¯3ï¼šä½åŠŸè€—ç‰©è”ç½‘èŠ‚ç‚¹ï¼ˆESP32-S3ï¼‰â€”â€” ç”µæ± ä¾›ç”µæ ¸å¿ƒçœ‹åŠŸè€—</h4>





















































<table><thead><tr><th>æ¨¡å‹</th><th>æ¨ç†è€—æ—¶ï¼ˆmsï¼‰</th><th>mAP@0.5ï¼ˆ%ï¼‰</th><th>æ¨ç†åŠŸè€—ï¼ˆmAï¼‰</th><th>ç»­èˆªé¢„ä¼°ï¼ˆ1000mAhç”µæ± ï¼Œæ¯10sæ¨ç†1æ¬¡ï¼‰</th><th>é€‚é…æ€§æ€»ç»“</th></tr></thead><tbody><tr><td>YOLOv11-Nano</td><td>210</td><td>74.3</td><td>68</td><td>â‰ˆ38å°æ—¶</td><td>åŠŸè€—é«˜ï¼Œç»­èˆªä¸è¶³ï¼Œä»…é€‚åˆæ’ç”µåœºæ™¯</td></tr><tr><td>YOLOv13-Nano</td><td>245</td><td>76.1</td><td>75</td><td>â‰ˆ33å°æ—¶</td><td>ç»­èˆªæ›´å·®ï¼Œæ— æ˜æ˜¾ç²¾åº¦ä¼˜åŠ¿ï¼Œä¸æ¨è</td></tr><tr><td>YOLO26-Tiny</td><td>190</td><td>73.5</td><td>65</td><td>â‰ˆ40å°æ—¶</td><td>ç»­èˆªç•¥ä¼˜ï¼Œä½†ç²¾åº¦ä½ï¼Œæ€§ä»·æ¯”ä¸€èˆ¬</td></tr><tr><td>YOLO-Proï¼ˆReLUï¼‰</td><td>125</td><td>72.1</td><td>42</td><td>â‰ˆ62å°æ—¶</td><td>ç»­èˆªç¿»å€ï¼Œå®æ—¶æ€§è¾¾æ ‡ï¼ˆâ‰ˆ8FPSï¼‰ï¼Œç”µæ± ä¾›ç”µé¦–é€‰</td></tr><tr><td>YOLO-Proï¼ˆæ³¨æ„åŠ›ï¼‰</td><td>155</td><td>76.4</td><td>58</td><td>â‰ˆ45å°æ—¶</td><td>ç²¾åº¦è¶…v13ï¼ŒåŠŸè€—ä½23%ï¼Œå¹³è¡¡ç»­èˆªä¸ç²¾åº¦</td></tr></tbody></table>
<h2 data-id="heading-9">ä¸‰ã€æ¨¡å‹æ·±åº¦è§£æï¼šä¼˜åŠ¿ã€çŸ­æ¿ä¸è¾¹ç¼˜é€‚é…è¾¹ç•Œ</h2>
<h3 data-id="heading-10">3.1 YOLOv11-Nanoï¼šè¾¹ç¼˜éƒ¨ç½²çš„â€œç¨³å¦¥ä¹‹é€‰â€</h3>
<p>ä½œä¸ºè¿­ä»£æˆç†Ÿçš„ç‰ˆæœ¬ï¼ŒYOLOv11-Nanoçš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯<strong>å…¼å®¹æ€§å¼ºã€éƒ¨ç½²æˆæœ¬ä½</strong>â€”â€”æ— è®ºæ˜¯MCUçš„CMSIS-NNï¼Œè¿˜æ˜¯NPUçš„ç¡¬ä»¶åŠ é€Ÿï¼Œéƒ½èƒ½å®Œç¾é€‚é…ï¼Œæ— ç®—å­å…¼å®¹å‘ç‚¹ã€‚</p>
<p>çŸ­æ¿ä¹Ÿå¾ˆæ˜æ˜¾ï¼šåœ¨æ— NPUçš„ä½ç«¯MCUä¸Šå®æ—¶æ€§ä¸è¶³ï¼Œä¸”æ¶æ„æ— è½»é‡åŒ–åˆ›æ–°ï¼Œå‚æ•°é‡å’Œè®¡ç®—é‡åœ¨åŒç²¾åº¦æ¨¡å‹ä¸­åé«˜ã€‚é€‚åˆåœºæ™¯ï¼šå¸¦NPUçš„ä¸­ç«¯è¾¹ç¼˜è®¾å¤‡ï¼Œè¿½æ±‚â€œç¨³å®šè½åœ°+ä¸­ç­‰ç²¾åº¦â€ï¼Œä¸æƒ³èŠ±æ—¶é—´è°ƒè¯•å…¼å®¹æ€§ã€‚</p>
<h3 data-id="heading-11">3.2 YOLOv13-Nanoï¼šç²¾åº¦ä¼˜å…ˆçš„â€œå°ä¼—ä¹‹é€‰â€</h3>
<p>v13çš„EPGOæ³¨æ„åŠ›æœºåˆ¶ç¡®å®å¸¦æ¥äº†ç²¾åº¦æå‡ï¼Œåœ¨NPUè®¾å¤‡ä¸Šèƒ½è¾¾åˆ°77.3%çš„mAPï¼Œæ˜¯å››æ¬¾æ¨¡å‹ä¸­æœ€é«˜çš„ã€‚ä½†è¾¹ç¼˜éƒ¨ç½²ä¸­ï¼Œè¿™ä¸ªç²¾åº¦ä¼˜åŠ¿éœ€è¦ä»˜å‡ºâ€œè€—æ—¶å¢åŠ ã€åŠŸè€—ä¸Šå‡ã€éƒ¨ç½²å¤æ‚åº¦æé«˜â€çš„ä»£ä»·â€”â€”æ— NPUè®¾å¤‡ä¸Šè·‘ä¸åŠ¨ï¼Œä½åŠŸè€—èŠ‚ç‚¹ç»­èˆªæ‹‰èƒ¯ï¼Œä»…é€‚åˆå¯¹ç²¾åº¦æœ‰æè‡´è¦æ±‚ï¼ˆå¦‚å·¥ä¸šç¼ºé™·æ£€æµ‹ï¼‰ã€ä¸”ç¡¬ä»¶ç®—åŠ›å……è¶³ï¼ˆå¸¦NPUï¼‰ã€ä¸æ•æ„ŸåŠŸè€—çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-12">3.3 YOLO26-Tinyï¼šè¿½æ±‚é€Ÿåº¦çš„â€œä¸­åº¸ä¹‹é€‰â€</h3>
<p>YOLO26çš„C3k2éª¨æ¶ç²¾ç®€äº†è®¡ç®—é‡ï¼Œåœ¨NPUå’ŒMCUä¸Šéƒ½èƒ½è·‘å‡ºä¸é”™çš„é€Ÿåº¦ï¼Œå‚æ•°é‡æ¯”v11å°‘10%ã€‚ä½†ç²¾åº¦æ˜¯å…¶ç¡¬ä¼¤ï¼Œ74.2%çš„mAPåœ¨å·¥ä¸šåœºæ™¯ä¸­å¯èƒ½æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œä¸”æ¶æ„æ— å¤ªå¤šè¾¹ç¼˜é€‚é…ä¼˜åŒ–ï¼Œå±äºâ€œæ¯”ä¸Šä¸è¶³æ¯”ä¸‹æœ‰ä½™â€çš„ä¸­åº¸æ¬¾ã€‚é€‚åˆåœºæ™¯ï¼šå¯¹ç²¾åº¦è¦æ±‚ä½ã€ä»…éœ€ç›®æ ‡å­˜åœ¨æ€§æ£€æµ‹ï¼ˆå¦‚å¼‚ç‰©é®æŒ¡æŠ¥è­¦ï¼‰çš„ç®€å•åœºæ™¯ã€‚</p>
<h3 data-id="heading-13">3.4 YOLO-Proï¼šè¾¹ç¼˜å…¨åœºæ™¯çš„â€œæ€§ä»·æ¯”ä¹‹ç‹â€</h3>
<p>åŒæ¨¡å¼è®¾è®¡æ˜¯YOLO-Proçš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œå®Œç¾è¦†ç›–ä¸‰ç±»è¾¹ç¼˜è®¾å¤‡ï¼š</p>
<ul>
<li>ReLUæ¨¡å¼ï¼šæè‡´è½»é‡åŒ–ï¼Œå‚æ•°é‡ä»…1.8Mï¼Œåœ¨ESP32-S3ä¸ŠåŠŸè€—æ¯”v11ä½38%ï¼Œç»­èˆªç¿»å€ï¼Œæ˜¯ä½ç«¯MCUå’Œä½åŠŸè€—èŠ‚ç‚¹çš„é¦–é€‰ï¼›</li>
<li>æ³¨æ„åŠ›æ¨¡å¼ï¼šç”¨ç®€åŒ–ECAæ³¨æ„åŠ›è¡¥å…¨ç²¾åº¦ï¼Œåœ¨STM32H7ä¸Šç²¾åº¦è¶…v13ï¼Œè€—æ—¶å°‘35%ï¼›åœ¨RK3568ä¸Šç²¾åº¦æ¥è¿‘v13ï¼Œè€—æ—¶å°‘38%ï¼Œç¡¬ä»¶èµ„æºå ç”¨æœ€ä½ã€‚</li>
</ul>
<p>çŸ­æ¿ï¼šReLUæ¨¡å¼ç²¾åº¦ç•¥ä½ï¼ˆ72%å·¦å³ï¼‰ï¼Œä¸é€‚åˆé«˜ç²¾åº¦åœºæ™¯ã€‚ä½†åŒæ¨¡å¼å¯çµæ´»åˆ‡æ¢ï¼Œä¸€å¥—æ¨¡å‹è¦†ç›–å…¨ç®—åŠ›ç­‰çº§è®¾å¤‡ï¼Œæ— éœ€ç»´æŠ¤å¤šå¥—æ¨¡å‹ï¼Œå¤§å¹…é™ä½å¼€å‘å’Œéƒ¨ç½²æˆæœ¬â€”â€”è¿™æ˜¯å…¶ä»–ä¸‰æ¬¾æ¨¡å‹æ— æ³•æ¯”æ‹Ÿçš„ä¼˜åŠ¿ã€‚</p>
<h2 data-id="heading-14">å››ã€è¾¹ç¼˜éƒ¨ç½²è¸©å‘ä¸ä¼˜åŒ–æŠ€å·§ï¼ˆå®æˆ˜ç»éªŒæ€»ç»“ï¼‰</h2>
<h3 data-id="heading-15">4.1 å…±æ€§è¸©å‘ç‚¹ä¸é¿å‘æ–¹æ¡ˆ</h3>
<ol>
<li>é‡åŒ–ç²¾åº¦æŸå¤±è¿‡å¤§ï¼šYOLOv13/YOLO26ç”¨SiLUæ¿€æ´»å‡½æ•°ï¼ŒINT8é‡åŒ–åç²¾åº¦æŸå¤±è¾¾3%-5%ï¼Œè€ŒYOLO-Proçš„ReLUæ¿€æ´»é‡åŒ–æŸå¤±ä»…1.5%ä»¥å†…ã€‚è§£å†³æ–¹æ¡ˆï¼šç”¨å®é™…åœºæ™¯æ•°æ®é›†åšæ ¡å‡†é‡åŒ–ï¼Œé¿å…éšæœºæ•°æ®æ ¡å‡†ï¼›</li>
<li>MCU RAMæº¢å‡ºï¼šYOLOv13åœ¨STM32H7ä¸ŠRAMå ç”¨è¶…900KBï¼Œæ¥è¿‘1MBä¸Šé™ï¼Œæ˜“å¯¼è‡´æ¨ç†å´©æºƒã€‚è§£å†³æ–¹æ¡ˆï¼šè£å‰ªè¾“å…¥å°ºå¯¸è‡³288Ã—288ï¼Œæˆ–æ”¹ç”¨YOLO-Proçš„ReLUæ¨¡å¼ï¼›</li>
<li>NPUç®—å­å…¼å®¹é—®é¢˜ï¼šYOLOv13çš„EPGOæ³¨æ„åŠ›éƒ¨åˆ†ç®—å­åœ¨RK3568çš„NPUä¸Šä¸æ”¯æŒï¼Œéœ€æ‰‹åŠ¨æ›¿æ¢ä¸ºå…¼å®¹ç®—å­ã€‚è§£å†³æ–¹æ¡ˆï¼šä¼˜å…ˆé€‰æ‹©ReLUæ¿€æ´»ã€ç®€åŒ–æ³¨æ„åŠ›çš„æ¨¡å‹ï¼ˆå¦‚YOLO-Proï¼‰ï¼Œå‡å°‘ç®—å­é€‚é…æˆæœ¬ï¼›</li>
<li>ä½åŠŸè€—èŠ‚ç‚¹ç»­èˆªæ‹‰èƒ¯ï¼šYOLOv11/v13æ¨ç†åŠŸè€—è¶…68mAï¼Œç”µæ± ç»­èˆªä¸è¶³40å°æ—¶ã€‚è§£å†³æ–¹æ¡ˆï¼šå¯ç”¨æ¨¡å‹ä¼‘çœ å”¤é†’ç­–ç•¥ï¼Œé…åˆYOLO-Pro ReLUæ¨¡å¼ï¼Œæ¨ç†é—´éš”è®¾ä¸º10sä»¥ä¸Šï¼Œç»­èˆªå¯æå‡50%ã€‚</li>
</ol>
<h3 data-id="heading-16">4.2 åˆ†åœºæ™¯ä¼˜åŒ–æŠ€å·§</h3>
<ul>
<li>ä½ç«¯MCUï¼ˆæ— NPUï¼‰ï¼šä¼˜å…ˆINT8é‡åŒ–+è¾“å…¥å°ºå¯¸224Ã—224ï¼Œå¯ç”¨CMSIS-NNçš„DSPåŠ é€Ÿï¼Œåˆ é™¤æ‰€æœ‰æ³¨æ„åŠ›æ¨¡å—ï¼Œç¡®ä¿å®æ—¶æ€§ï¼›</li>
<li>å¸¦NPUè®¾å¤‡ï¼šä¼˜å…ˆç”¨RKNN/TensorRTåšæ¨¡å‹è½¬æ¢ï¼Œå¼€å¯NPUç®—å­èåˆï¼ŒYOLOv13éœ€æ›¿æ¢ä¸å…¼å®¹æ³¨æ„åŠ›ç®—å­ï¼Œå¹³è¡¡ç²¾åº¦ä¸é€Ÿåº¦ï¼›</li>
<li>ä½åŠŸè€—èŠ‚ç‚¹ï¼šé€‰æ‹©YOLO-Pro ReLUæ¨¡å¼ï¼Œæ¨ç†æ—¶å…³é—­æ— çº¿å°„é¢‘æ¨¡å—ï¼Œæ¨ç†å®Œæˆåç«‹å³è¿›å…¥æ·±åº¦ä¼‘çœ ï¼Œä»…ä¿ç•™å®šæ—¶å™¨å”¤é†’ã€‚</li>
</ul>
<h2 data-id="heading-17">äº”ã€åœºæ™¯åŒ–é€‰å‹æŒ‡å—ï¼ˆç›´æ¥å¥—ç”¨ï¼Œé¿å…è¸©å‘ï¼‰</h2>
<h3 data-id="heading-18">5.1 æ— NPUä½ç«¯MCUï¼ˆSTM32H7/L4ã€ESP32-C3ï¼‰</h3>
<ul>
<li>é¦–é€‰ï¼šYOLO-Proï¼ˆæ³¨æ„åŠ›æ¨¡å¼ï¼‰â€”â€” ç²¾åº¦è¶…v13ï¼Œå®æ—¶æ€§è¾¾æ ‡ï¼Œéƒ¨ç½²æ— å‹åŠ›ï¼›</li>
<li>å¤‡é€‰ï¼šYOLO-Proï¼ˆReLUæ¨¡å¼ï¼‰â€”â€” é€‚åˆå¯¹ç²¾åº¦è¦æ±‚ä½ã€è¿½æ±‚æè‡´é€Ÿåº¦çš„åœºæ™¯ï¼›</li>
<li>é¿å‘ï¼šä¸é€‰YOLOv13-Nanoï¼Œè€—æ—¶è¶…150msï¼Œå®æ—¶æ€§ä¸è¾¾æ ‡ã€‚</li>
</ul>
<h3 data-id="heading-19">5.2 å¸¦è½»é‡NPUè®¾å¤‡ï¼ˆRK3568ã€å…¨å¿—V853ï¼‰</h3>
<ul>
<li>é¦–é€‰ï¼šYOLO-Proï¼ˆæ³¨æ„åŠ›æ¨¡å¼ï¼‰â€”â€” ç²¾åº¦æ¥è¿‘v13ï¼Œè€—æ—¶å°‘38%ï¼Œç¡¬ä»¶èµ„æºå ç”¨æœ€ä½ï¼›</li>
<li>å¤‡é€‰ï¼šYOLOv11-Nanoâ€”â€” å…¼å®¹æ€§å¼ºï¼Œé€‚åˆå›¢é˜ŸæŠ€æœ¯æ ˆæˆç†Ÿã€ä¸æƒ³è°ƒè¯•æ–°æ¨¡å‹çš„åœºæ™¯ï¼›</li>
<li>ç‰¹æ®Šéœ€æ±‚ï¼šYOLOv13-Nanoâ€”â€” ä»…é€‚åˆå¯¹ç²¾åº¦æœ‰æè‡´è¦æ±‚ã€ä¸æ•æ„Ÿè€—æ—¶çš„å·¥ä¸šç¼ºé™·æ£€æµ‹ã€‚</li>
</ul>
<h3 data-id="heading-20">5.3 ä½åŠŸè€—ç‰©è”ç½‘èŠ‚ç‚¹ï¼ˆESP32-S3ã€STM32L4+ï¼‰</h3>
<ul>
<li>é¦–é€‰ï¼šYOLO-Proï¼ˆReLUæ¨¡å¼ï¼‰â€”â€” ç»­èˆªç¿»å€ï¼Œå®æ—¶æ€§è¾¾æ ‡ï¼Œç”µæ± ä¾›ç”µåœºæ™¯å¿…å¤‡ï¼›</li>
<li>å¤‡é€‰ï¼šYOLO-Proï¼ˆæ³¨æ„åŠ›æ¨¡å¼ï¼‰â€”â€” éœ€å¹³è¡¡ç²¾åº¦ä¸ç»­èˆªæ—¶é€‰æ‹©ï¼Œæ¯”v11åŠŸè€—ä½23%ï¼›</li>
<li>é¿å‘ï¼šä¸é€‰YOLOv13-Nanoï¼ŒåŠŸè€—è¿‡é«˜ï¼Œç»­èˆªä¸è¶³33å°æ—¶ã€‚</li>
</ul>
<h2 data-id="heading-21">å…­ã€æ€»ç»“ï¼šè¾¹ç¼˜éƒ¨ç½²ï¼Œæ€§ä»·æ¯”è¿œèƒœç‰ˆæœ¬è¿­ä»£</h2>
<p>è¾¹ç¼˜éƒ¨ç½²çš„æ ¸å¿ƒé€»è¾‘ï¼Œä»æ¥ä¸æ˜¯â€œè¿½æ–°â€ï¼Œè€Œæ˜¯â€œé€‚é…â€â€”â€”ç¡¬ä»¶ç®—åŠ›ã€åŠŸè€—çº¦æŸã€éƒ¨ç½²æˆæœ¬ã€ç²¾åº¦éœ€æ±‚ï¼Œå…±åŒå†³å®šäº†æ¨¡å‹çš„æ€§ä»·æ¯”ã€‚</p>
<p>ä»å®æµ‹ç»“æœæ¥çœ‹ï¼š</p>
<ol>
<li>YOLO-Proå‡­å€ŸåŒæ¨¡å¼è®¾è®¡ï¼Œæˆä¸ºå”¯ä¸€èƒ½è¦†ç›–ä¸‰ç±»è¾¹ç¼˜è®¾å¤‡çš„æ¨¡å‹ï¼Œä¸€å¥—æ¨¡å‹é€‚é…å…¨åœºæ™¯ï¼Œå¼€å‘å’Œç»´æŠ¤æˆæœ¬æœ€ä½ï¼Œæ€§ä»·æ¯”ç¢¾å‹å…¶ä»–ä¸‰æ¬¾ï¼›</li>
<li>YOLOv11-Nanoæ˜¯â€œç¨³å¦¥æ¬¾â€ï¼Œå…¼å®¹æ€§å¼ºï¼Œé€‚åˆå¸¦NPUçš„ä¸­ç«¯è®¾å¤‡ï¼Œæ— éœ€é¢å¤–è°ƒè¯•ï¼›</li>
<li>YOLOv13-Nanoä»…é€‚åˆâ€œé«˜ç²¾åº¦+é«˜ç®—åŠ›+æ— åŠŸè€—çº¦æŸâ€çš„å°ä¼—åœºæ™¯ï¼Œé€šç”¨æ€§æå·®ï¼›</li>
<li>YOLO26-Tinyä¸­åº¸æ— äº®ç‚¹ï¼Œæ— æ˜æ˜¾ç«äº‰ä¼˜åŠ¿ï¼Œéå¿…è¦ä¸é€‰ã€‚</li>
</ol>
<p>æœªæ¥è¾¹ç¼˜æ¨¡å‹çš„è¿­ä»£æ–¹å‘ï¼Œå¿…ç„¶æ˜¯â€œè½»é‡åŒ–+åœºæ™¯åŒ–é€‚é…â€ï¼Œè€Œéå•çº¯å †ç²¾åº¦ã€‚YOLO-Proçš„åŒæ¨¡å¼è®¾è®¡ï¼Œæ°å¥½å‘½ä¸­äº†è¾¹ç¼˜è®¾å¤‡çš„æ ¸å¿ƒç—›ç‚¹ï¼Œè¿™ä¹Ÿæ˜¯å®ƒèƒ½åœ¨æ–°ç‰ˆæœ¬å¤¹å‡»ä¸‹è„±é¢–è€Œå‡ºçš„å…³é”®ã€‚</p>
<p>åç»­æˆ‘ä¼šåˆ†äº«YOLO-Proåœ¨STM32H7ä¸Šçš„INT4é‡åŒ–å®æˆ˜ï¼ˆè¿›ä¸€æ­¥é™ä½å‚æ•°é‡å’ŒåŠŸè€—ï¼‰ï¼Œä»¥åŠRK3568 NPUç®—å­èåˆæŠ€å·§ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥å…³æ³¨æˆ‘ï¼Œä¸€èµ·äº¤æµè¾¹ç¼˜æ™ºèƒ½è½åœ°çš„å®æˆ˜å¿ƒå¾—ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain ç¬¬ä¸‰è¯¾ï¼šæ‹’ç»â€œåªæœ‰ä¸ƒç§’è®°å¿†â€ï¼Œç»™ LLM è£…ä¸Šå¤§è„‘ (Memory)]]></title>    <link>https://juejin.cn/post/7596166721627815982</link>    <guid>https://juejin.cn/post/7596166721627815982</guid>    <pubDate>2026-01-18T08:21:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596166721627815982" data-draft-id="7596166721627750446" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain ç¬¬ä¸‰è¯¾ï¼šæ‹’ç»â€œåªæœ‰ä¸ƒç§’è®°å¿†â€ï¼Œç»™ LLM è£…ä¸Šå¤§è„‘ (Memory)"/> <meta itemprop="keywords" content="LangChain,Node.js,LLM"/> <meta itemprop="datePublished" content="2026-01-18T08:21:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="San30"/> <meta itemprop="url" content="https://juejin.cn/user/1766294768060816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain ç¬¬ä¸‰è¯¾ï¼šæ‹’ç»â€œåªæœ‰ä¸ƒç§’è®°å¿†â€ï¼Œç»™ LLM è£…ä¸Šå¤§è„‘ (Memory)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1766294768060816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    San30
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T08:21:46.000Z" title="Sun Jan 18 2026 08:21:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>åœ¨å¼€å‘åŸºäº LLM çš„åº”ç”¨ï¼ˆå¦‚èŠå¤©æœºå™¨äººï¼‰æ—¶ï¼Œå¼€å‘è€…å¾ˆå¿«ä¼šé‡åˆ°ä¸€ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼š<strong>å¤§æ¨¡å‹é»˜è®¤æ˜¯â€œå¤±å¿†â€çš„ã€‚</strong></p>
<p>LLM çš„ API è°ƒç”¨æœ¬è´¨ä¸Šå’Œ HTTP è¯·æ±‚ä¸€æ ·ï¼Œéƒ½æ˜¯<strong>æ— çŠ¶æ€</strong>ï¼ˆStatelessï¼‰çš„ã€‚è¿™æ„å‘³ç€ï¼Œæ— è®ºä½ ä¹‹å‰å’Œå®ƒèŠå¾—å¤šä¹ˆçƒ­ç«æœå¤©ï¼Œåœ¨ä¸‹ä¸€è½®å¯¹è¯ä¸­ï¼Œå¯¹å®ƒæ¥è¯´ä½ ä¾ç„¶æ˜¯ä¸€ä¸ªå…¨æ–°çš„é™Œç”Ÿäººã€‚</p>
<p>ä»Šå¤©çš„æ–‡ç« ï¼Œæˆ‘ä»¬å°†ç›´å‡»è¿™ä¸ªç—›ç‚¹ï¼Œæ·±å…¥æ¢è®¨ LangChain ä¸­çš„ <strong>Memoryï¼ˆè®°å¿†ï¼‰</strong> æ¨¡å—ã€‚æˆ‘ä»¬å°†é€šè¿‡ä»£ç å®æˆ˜ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•æ‰“ç ´â€œä¸ƒç§’è®°å¿†â€çš„é™åˆ¶ï¼Œè®© AI çœŸæ­£è®°ä½ä½ æ˜¯è°ï¼Œè®°ä½ä½ ä»¬èŠè¿‡ä»€ä¹ˆã€‚</p>
<h2 data-id="heading-0">1. ç°è±¡ï¼šå¤§æ¨¡å‹çš„â€œå¥å¿˜ç—‡â€</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š<strong>LLM çš„ API è°ƒç”¨ï¼ˆç±»ä¼¼äº HTTP è¯·æ±‚ï¼‰æ˜¯æ— çŠ¶æ€çš„ï¼ˆStatelessï¼‰ã€‚</strong></p>
<p>è¿™æ„å‘³ç€ï¼Œå½“ä½ å‘ç»™å®ƒç¬¬ä¸€å¥è¯â€œæˆ‘å«ä¸‰å®¸â€ï¼Œå®ƒå¤„ç†å®Œä»»åŠ¡åï¼Œåå°å°±â€œé”€æ¯â€äº†è¿™æ¬¡äº¤äº’çš„ä¸Šä¸‹æ–‡ã€‚å½“ä½ ç´§æ¥ç€é—®â€œæˆ‘å«ä»€ä¹ˆâ€æ—¶ï¼Œå¯¹å®ƒæ¥è¯´ï¼Œä½ æ˜¯ä¸€ä¸ªå…¨æ–°çš„é™Œç”Ÿäººã€‚</p>
<p><strong>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå…¸å‹çš„â€œç¿»è½¦â€ç°åœºï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºèŒƒï¼šæ²¡æœ‰è®°å¿†çš„å¯¹è¯</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>;

<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-chat'</span>,
    <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>
});

<span class="hljs-comment">// ç¬¬ä¸€è½®å¯¹è¯</span>
<span class="hljs-keyword">const</span> res1 = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">"æˆ‘å«ä¸‰å®¸"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'User: æˆ‘å«ä¸‰å®¸'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`AI: <span class="hljs-subst">${res1.content}</span>`</span>); 
<span class="hljs-comment">// AI å›å¤ï¼šä½ å¥½ä¸‰å®¸...</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'-------------'</span>);

<span class="hljs-comment">// ç¬¬äºŒè½®å¯¹è¯</span>
<span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">"æˆ‘å«ä»€ä¹ˆåå­—"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'User: æˆ‘å«ä»€ä¹ˆåå­—'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`AI: <span class="hljs-subst">${res2.content}</span>`</span>);
<span class="hljs-comment">// AI å›å¤ï¼šæŠ±æ­‰ï¼Œæˆ‘ä¸çŸ¥é“æ‚¨çš„åå­—...</span>
</code></pre>
<p>è¿™å°±æ˜¯<strong>æ— çŠ¶æ€</strong>å¸¦æ¥çš„é—®é¢˜ã€‚å¯¹äºæƒ³è¦æ„å»ºæ™ºèƒ½åŠ©æ‰‹ã€å®¢æœæœºå™¨äººçš„å¼€å‘è€…æ¥è¯´ï¼Œè¿™æ˜¯å¿…é¡»è·¨è¶Šçš„ç¬¬ä¸€é“åã€‚</p>
<h2 data-id="heading-1">2. åŸç†ï¼šå¦‚ä½•æ‰‹åŠ¨â€œä¼ªé€ â€è®°å¿†ï¼Ÿ</h2>
<p>å¦‚æœä¸ä½¿ç”¨ä»»ä½•æ¡†æ¶ï¼Œæˆ‘ä»¬è¯¥ä»åŸç†ä¸Šæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</p>
<p>ç­”æ¡ˆå¾ˆç®€å•ï¼Œä½†ä¹Ÿæœ‰äº›â€œç¬¨é‡â€ï¼š <strong>â€œæ»šé›ªçƒâ€ç­–ç•¥ã€‚</strong></p>
<p>æ—¢ç„¶æ¨¡å‹è®°ä¸ä½ï¼Œé‚£å¼€å‘è€…å°±å¸®å®ƒè®°ã€‚åœ¨æ¯æ¬¡å‘èµ·æ–°è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬ä¸ä»…è¦å‘å½“å‰çš„é—®é¢˜ï¼Œè¿˜è¦æŠŠä¹‹å‰<strong>æ‰€æœ‰çš„èŠå¤©è®°å½•</strong>æ‰“åŒ…ä¸€èµ·å‘è¿‡å»ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦åœ¨ä»£ç ä¸­ç»´æŠ¤ä¸€ä¸ª <code>messages</code> æ•°ç»„ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">messages = [
    { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ å¥½ï¼Œæˆ‘æ˜¯ä¸‰å®¸'</span> },
    { <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ å¥½ä¸‰å®¸...'</span> }, <span class="hljs-comment">// AI çš„å›å¤ä¹Ÿè¦å­˜</span>
    { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ çŸ¥é“æˆ‘æ˜¯è°å—ï¼Ÿ'</span> } <span class="hljs-comment">// æ–°çš„é—®é¢˜</span>
]
</code></pre>
<p><strong>è¿™ç§åŸç”Ÿåšæ³•æœ‰ä¸¤ä¸ªä¸»è¦ç—›ç‚¹ï¼š</strong></p>
<ol>
<li><strong>ç»´æŠ¤ç¹ç</strong>ï¼šä½ éœ€è¦è‡ªå·±å†™ä»£ç å»å¤„ç†æ•°ç»„çš„è¿½åŠ ã€å­˜å‚¨å’Œè¯»å–ã€‚</li>
<li><strong>Token å¼€é”€çˆ†ç‚¸</strong>ï¼šéšç€å¯¹è¯è¶Šæ¥è¶Šé•¿ï¼Œè¿™ä¸ªâ€œé›ªçƒâ€è¶Šæ»šè¶Šå¤§ï¼ŒToken æ¶ˆè€—å‘ˆæŒ‡æ•°çº§å¢é•¿ï¼Œå¾ˆå¿«å°±ä¼šè€—å°½ä½ çš„é¢„ç®—æˆ–è¶…å‡ºæ¨¡å‹çš„ä¸Šä¸‹æ–‡é™åˆ¶ã€‚</li>
</ol>
<h2 data-id="heading-2">3. å®æˆ˜ï¼šLangChain çš„ä¼˜é›…è§£æ³•</h2>
<p>LangChain æä¾›äº†ä¸€ä¸ªé«˜åº¦å°è£…çš„æ¨¡å— <code>RunnableWithMessageHistory</code> æ¥è‡ªåŠ¨å¤„ç†ä¸Šè¿°æµç¨‹ã€‚åœ¨æœ€æ–°çš„ LCELï¼ˆLangChain è¡¨è¾¾å¼è¯­è¨€ï¼‰è¯­æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°ä¸€ä¸ªâ€œæœ‰è®°æ€§â€çš„èŠå¤©åŠ©æ‰‹ã€‚</p>
<p>ä¸‹é¢æ˜¯å®Œæ•´çš„å®ç°æ­¥éª¤ï¼š</p>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šå¼•å…¥å¿…è¦çš„â€œè®°å¿†ç»„ä»¶â€</h3>
<p>é™¤äº†æ¨¡å‹æœ¬èº«ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ <code>InMemoryChatMessageHistory</code>ï¼ˆç”¨äºåœ¨å†…å­˜ä¸­å­˜å–å†å²ï¼‰å’Œ <code>RunnableWithMessageHistory</code>ï¼ˆç”¨äºè‡ªåŠ¨æ‹¼æ¥å†å²ï¼‰ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableWithMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/runnables'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InMemoryChatMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/chat_history'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>;
</code></pre>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šæ„å»ºå¸¦æœ‰â€œæ’æ§½â€çš„ Prompt</h3>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚æˆ‘ä»¬éœ€è¦åœ¨ Prompt æ¨¡æ¿ä¸­é¢„ç•™ä¸€ä¸ªä½ç½®ï¼Œä¸“é—¨ç”¨æ¥æ”¾å†å²è®°å½•ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨ <code>placeholder</code> å ä½ç¬¦ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-chat'</span>,
    <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>
});

<span class="hljs-comment">// è¿™é‡Œçš„ '{history}' å°±æ˜¯ç•™ç»™è®°å¿†çš„æ’æ§½</span>
<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
    [<span class="hljs-string">'system'</span>, <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹'</span>],
    [<span class="hljs-string">'placeholder'</span>, <span class="hljs-string">'{history}'</span>], 
    [<span class="hljs-string">'human'</span>, <span class="hljs-string">'{input}'</span>]
]);
</code></pre>
<h3 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šæ³¨å…¥è®°å¿†èƒ½åŠ›</h3>
<p>æˆ‘ä»¬å°† Prompt å’Œ Model ä¸²è”åï¼Œå†ç”¨ <code>RunnableWithMessageHistory</code> åŒ…è£¹èµ·æ¥ã€‚å®ƒçš„ä½œç”¨æ˜¯ï¼š<strong>åœ¨è°ƒç”¨æ¨¡å‹å‰ï¼Œè‡ªåŠ¨å»æŸ¥é˜…å†å²è®°å½•ï¼Œå¡«å…¥ Promptï¼›åœ¨è°ƒç”¨ç»“æŸåï¼Œè‡ªåŠ¨æŠŠæœ€æ–°çš„å¯¹è¯è¿½åŠ åˆ°å†å²è®°å½•é‡Œã€‚</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> runnable = prompt.<span class="hljs-title function_">pipe</span>(model);

<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå­˜å‚¨å¯¹è±¡ï¼ˆè¿™é‡Œæ¼”ç¤ºç”¨å†…å­˜å­˜å‚¨ï¼Œå®é™…ç”Ÿäº§é€šå¸¸å¯¹æ¥ Redis/DBï¼‰</span>
<span class="hljs-keyword">const</span> messageHistory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>();

<span class="hljs-keyword">const</span> chain = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RunnableWithMessageHistory</span>({
    runnable,
    <span class="hljs-comment">// è·å–å†å²è®°å½•çš„å·¥å‚å‡½æ•°</span>
    <span class="hljs-attr">getMessageHistory</span>: <span class="hljs-keyword">async</span> (sessionId) =&gt; messageHistory,
    <span class="hljs-attr">inputMessagesKey</span>: <span class="hljs-string">'input'</span>,     <span class="hljs-comment">// å¯¹åº” prompt ä¸­çš„ç”¨æˆ·è¾“å…¥å˜é‡å</span>
    <span class="hljs-attr">historyMessagesKey</span>: <span class="hljs-string">'history'</span>, <span class="hljs-comment">// å¯¹åº” prompt ä¸­çš„å ä½ç¬¦å˜é‡å</span>
});
</code></pre>
<h3 data-id="heading-6">ç¬¬å››æ­¥ï¼šè§è¯å¥‡è¿¹</h3>
<p>ç°åœ¨ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ <code>chain.invoke</code> æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ª <code>sessionId</code>ã€‚åŒä¸€ä¸ª ID ä»£è¡¨åŒä¸€ä¸ªä¼šè¯ä¸Šä¸‹æ–‡ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// ç¬¬ä¸€è½®ï¼šè‡ªæˆ‘ä»‹ç»</span>
<span class="hljs-keyword">const</span> res1 = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(
    { <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«ä¸‰å®¸'</span> },
    { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'user_123'</span> } } <span class="hljs-comment">// æŒ‡å®šä¼šè¯ ID</span>
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'AI:'</span>, res1.<span class="hljs-property">content</span>);
<span class="hljs-comment">// è¾“å‡ºï¼šä½ å¥½ä¸‰å®¸ï¼...</span>

<span class="hljs-comment">// ç¬¬äºŒè½®ï¼šè¯¢é—®åå­—ï¼ˆä¸å¸¦åå­—ä¿¡æ¯ï¼Œçº¯é è®°å¿†ï¼‰</span>
<span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(
    { <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«ä»€ä¹ˆåå­—'</span> },
    { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'user_123'</span> } } <span class="hljs-comment">// åªè¦ ID ä¸€æ ·ï¼Œè®°å¿†å°±åœ¨</span>
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'AI:'</span>, res2.<span class="hljs-property">content</span>);
<span class="hljs-comment">// è¾“å‡ºï¼šä½ å«ä¸‰å®¸ã€‚</span>
</code></pre>
<p><strong>æˆåŠŸäº†ï¼</strong> æ¨¡å‹å‡†ç¡®åœ°è¯´å‡ºäº†åå­—ã€‚LangChain åœ¨åå°é»˜é»˜å®Œæˆäº†â€œæå–å†å² -&gt; æ‹¼æ¥åˆ° Prompt -&gt; è°ƒç”¨æ¨¡å‹ -&gt; æ›´æ–°å†å²â€çš„ä¸€æ•´å¥—å¤æ‚åŠ¨ä½œã€‚</p>
<h2 data-id="heading-7">4. è¿›é˜¶æ€è€ƒï¼šä» Demo åˆ°ç”Ÿäº§ç¯å¢ƒ</h2>
<p>é€šè¿‡ä»Šå¤©çš„å®æˆ˜ï¼Œæˆ‘ä»¬æˆåŠŸå®ç°äº†ä¸€ä¸ªå…·å¤‡åŸºç¡€è®°å¿†èƒ½åŠ›çš„ AI åŠ©æ‰‹ã€‚ä½†åœ¨å°†ä»£ç éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»æ­£è§† <code>InMemoryChatMessageHistory</code> æ–¹æ¡ˆåœ¨å®é™…åº”ç”¨ä¸­çš„ä¸¤ä¸ªè‡´å‘½ç“¶é¢ˆï¼Œå¹¶äº†è§£ç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-8">4.1 ç—›ç‚¹ä¸€ï¼šè®°å¿†çš„æŒä¹…åŒ–ï¼ˆPersistenceï¼‰</h3>
<p>æˆ‘ä»¬ç›®å‰ä½¿ç”¨çš„ <code>InMemoryChatMessageHistory</code> æ˜¯å°†æ•°æ®ä¿å­˜åœ¨æœåŠ¡å™¨å†…å­˜ä¸­çš„ã€‚è¿™æ„å‘³ç€ä¸€æ—¦æœåŠ¡é‡å¯æˆ–ç¨‹åºå´©æºƒï¼Œæ‰€æœ‰çš„å¯¹è¯è®°å½•éƒ½ä¼šç¬é—´æ¸…é›¶ã€‚</p>
<ul>
<li><strong>ç”Ÿäº§ç¯å¢ƒè§£æ³•</strong>ï¼šåœ¨ <code>RunnableWithMessageHistory</code> çš„ <code>getMessageHistory</code> å·¥å‚å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä¸åº”è¯¥è¿”å›å†…å­˜å¯¹è±¡ï¼Œè€Œåº”è¯¥å¯¹æ¥æ•°æ®åº“ã€‚</li>
<li>LangChain ç”Ÿæ€æ”¯æŒå¤šç§å¤–éƒ¨å­˜å‚¨ï¼Œå¦‚ <strong>Redis</strong>ã€<strong>PostgreSQL</strong> æˆ– <strong>MongoDB</strong>ã€‚é€šè¿‡ <code>sessionId</code> ä»æ•°æ®åº“ä¸­åŠ è½½å†å²è®°å½•ï¼Œå¯¹è¯ç»“æŸåå†å°†æ›´æ–°å†™å›æ•°æ®åº“ï¼Œä»è€Œå®ç°æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨ã€‚</li>
</ul>
<h3 data-id="heading-9">4.2 ç—›ç‚¹äºŒï¼šToken çš„â€œæ»šé›ªçƒâ€æ•ˆåº”</h3>
<p>æ­£å¦‚æˆ‘ä»¬åœ¨åŸç†éƒ¨åˆ†æåˆ°çš„ï¼Œéšç€å¯¹è¯è½®æ•°çš„å¢åŠ ï¼Œå†å²è®°å½•åˆ—è¡¨ä¼šåƒâ€œæ»šé›ªçƒâ€ä¸€æ ·è¶Šæ¥è¶Šå¤§ã€‚</p>
<ul>
<li>
<p><strong>é—®é¢˜</strong>ï¼šå¦‚æœç”¨æˆ·èŠäº†ä¸€ä¸‡å¥ï¼Œå°†è¿™æ•°ä¸‡ Token çš„æ–‡æœ¬ä¸€æ¬¡æ€§å‘ç»™æ¨¡å‹ï¼Œä¸ä»…ä¼šäº§ç”Ÿé«˜æ˜‚çš„ API è´¹ç”¨ï¼Œæ›´ä¼šç›´æ¥è¶…å‡ºæ¨¡å‹æ”¯æŒçš„æœ€å¤§ä¸Šä¸‹æ–‡çª—å£ï¼ˆContext Windowï¼‰ï¼Œå¯¼è‡´æŠ¥é”™ã€‚</p>
</li>
<li>
<p><strong>ä¼˜åŒ–ç­–ç•¥</strong>ï¼šLangChain æä¾›äº†å¤šç§è®°å¿†ç®¡ç†ç­–ç•¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€Œä¸ä»…ä»…æ˜¯ç®€å•çš„â€œå…¨éƒ¨è¿½åŠ â€ï¼š</p>
<ol>
<li><strong>çª—å£è®°å¿† (Window Memory)</strong> ï¼šåªä¿ç•™æœ€è¿‘çš„ N è½®å¯¹è¯ï¼ˆä¾‹å¦‚æœ€è¿‘ 10 å¥ï¼‰ï¼Œæ—©æœŸçš„å¯¹è¯ä¼šè¢«è‡ªåŠ¨æˆªæ–­ä¸¢å¼ƒã€‚è¿™é€‚ç”¨äºå¯¹ä¸Šä¸‹æ–‡è¿ç»­æ€§è¦æ±‚ä¸é«˜çš„é—²èŠåœºæ™¯ã€‚</li>
<li><strong>æ‘˜è¦è®°å¿† (Summary Memory)</strong> ï¼šè¿™æ˜¯æ›´é«˜çº§çš„åšæ³•ã€‚å½“å†å²è®°å½•è¿‡é•¿æ—¶ï¼Œåå°ä¼šè°ƒç”¨ä¸€ä¸ª LLM ä¸“é—¨å°†æ—§çš„å¯¹è¯â€œå‹ç¼©â€æˆä¸€æ®µç²¾ç®€çš„æ‘˜è¦ï¼ˆä¾‹å¦‚ï¼šâ€œç”¨æˆ·ä¹‹å‰ä»‹ç»äº†è‡ªå·±å«ä¸‰å®¸ï¼Œå–œæ¬¢å–ADé’™...â€ï¼‰ï¼Œç„¶åå°†è¿™æ®µæ‘˜è¦ä½œä¸ºå†å²ä¸Šä¸‹æ–‡ä¼ ç»™ä¸»æ¨¡å‹ã€‚è¿™æ ·æ—¢ä¿ç•™äº†æ ¸å¿ƒä¿¡æ¯ï¼Œåˆæå¤§èŠ‚çœäº† Tokenã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-10">æ€»ç»“</h3>
<p>LLM çš„æœ¬è´¨æ˜¯æ— çŠ¶æ€çš„ï¼Œè€Œ <strong>Memoryï¼ˆè®°å¿†ï¼‰</strong> æ¨¡å—é€šè¿‡â€œä¸Šä¸‹æ–‡æ³¨å…¥â€çš„æ–¹å¼èµ‹äºˆäº†å®ƒè¿è´¯äº¤äº’çš„èƒ½åŠ›ã€‚ä»ç®€å•çš„å†…å­˜å­˜å‚¨åˆ°å¤æ‚çš„æ•°æ®åº“æŒä¹…åŒ–ï¼Œä»å…¨é‡è®°å½•åˆ°æ™ºèƒ½æ‘˜è¦ï¼Œé€‰æ‹©åˆé€‚çš„è®°å¿†ç­–ç•¥ï¼Œæ˜¯æ„å»ºé«˜å¯ç”¨ AI åº”ç”¨çš„å…³é”®ä¸€æ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å…‰â€œè°ƒæˆâ€ChatGPTäº†ï¼äº²æ‰‹å¾®è°ƒä¸€ä¸ªä¸“å±å¤§æ¨¡å‹ï¼Œä½ éœ€è¦çŸ¥é“è¿™äº›]]></title>    <link>https://juejin.cn/post/7596221097864921094</link>    <guid>https://juejin.cn/post/7596221097864921094</guid>    <pubDate>2026-01-18T08:34:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596221097864921094" data-draft-id="7596134842483048489" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å…‰â€œè°ƒæˆâ€ChatGPTäº†ï¼äº²æ‰‹å¾®è°ƒä¸€ä¸ªä¸“å±å¤§æ¨¡å‹ï¼Œä½ éœ€è¦çŸ¥é“è¿™äº›"/> <meta itemprop="keywords" content="æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-18T08:34:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹¸çŒ«ç®—å›"/> <meta itemprop="url" content="https://juejin.cn/user/643654644149178"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å…‰â€œè°ƒæˆâ€ChatGPTäº†ï¼äº²æ‰‹å¾®è°ƒä¸€ä¸ªä¸“å±å¤§æ¨¡å‹ï¼Œä½ éœ€è¦çŸ¥é“è¿™äº›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/643654644149178/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹¸çŒ«ç®—å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T08:34:23.000Z" title="Sun Jan 18 2026 08:34:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0"><strong>å¼•è¨€ï¼šä¸ºä»€ä¹ˆä½ éœ€è¦äº†è§£è¿™äº›ï¼Ÿ</strong></h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ é¢å‰æœ‰ä¸¤ä¸ªåŒ»ç”Ÿï¼š</p>
<ul>
<li><strong>åŒ»ç”ŸA</strong>ï¼šç†Ÿè¯»å…¨çƒæ‰€æœ‰åŒ»å­¦æ•™ç§‘ä¹¦ï¼ŒæŒæ¡æµ·é‡äººä½“ç”Ÿç†ã€ç—…ç†çŸ¥è¯†ã€‚</li>
<li><strong>åŒ»ç”ŸB</strong>ï¼šä¸ä»…æ‹¥æœ‰åŒ»ç”ŸAçš„å…¨éƒ¨çŸ¥è¯†ï¼Œè¿˜åœ¨é¡¶çº§ä¸‰ç”²åŒ»é™¢çš„<strong>å¿ƒå¤–ç§‘</strong>ï¼Œè·Ÿç€ä¸“å®¶å›¢é˜Ÿè¿›è¡Œäº†ä¸Šä¸‡å°æ‰‹æœ¯çš„ä¸“é¡¹è®­ç»ƒã€‚</li>
</ul>
<p>å½“ä½ åªæ˜¯æ™®é€šæ„Ÿå†’æ—¶ï¼Œä¸¤ä½åŒ»ç”Ÿéƒ½èƒ½ç»™å‡ºæ­£ç¡®å»ºè®®ã€‚ä½†å½“ä½ é¢ä¸´ä¸€ä¸ªå¤æ‚çš„å¿ƒè„ç“£è†œæ‰‹æœ¯æ—¶ï¼Œä½ ä¼šæ¯«ä¸çŠ¹è±«åœ°é€‰æ‹©åŒ»ç”ŸBã€‚</p>
<p><strong>å¤§æ¨¡å‹çš„â€œè®­ç»ƒ-å¾®è°ƒ-æ¨ç†â€è¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯åŸ¹å…»å‡ºâ€œåŒ»ç”ŸBâ€çš„è¿‡ç¨‹ã€‚</strong></p>
<ul>
<li><strong>è®­ç»ƒ</strong>ï¼Œæ˜¯è®©æ¨¡å‹â€œåšè§ˆç¾¤ä¹¦â€ï¼Œå…·å¤‡é€šç”¨çŸ¥è¯†å’Œé€»è¾‘èƒ½åŠ›ã€‚</li>
<li><strong>å¾®è°ƒ</strong>ï¼Œæ˜¯è®©è¿™ä¸ªé€šæ‰åœ¨ç‰¹å®šé¢†åŸŸï¼ˆæ³•å¾‹ã€åŒ»ç–—ã€å®¢æœã€ä»£ç ï¼‰è¿›è¡Œâ€œä¸“é¡¹è¿›ä¿®â€ï¼Œæˆä¸ºä¸“æ‰ã€‚</li>
<li><strong>æ¨ç†</strong>ï¼Œåˆ™æ˜¯è¿™ä½ä¸“æ‰çœŸæ­£ä¸ºä½ â€œåè¯Šâ€ï¼Œè§£å†³å…·ä½“é—®é¢˜çš„è¿‡ç¨‹ã€‚</li>
</ul>
<p>ç†è§£è¿™ä¸‰æ­¥ï¼Œä½ ä¸ä»…èƒ½æ˜ç™½å¤§æ¨¡å‹èƒ½åŠ›çš„æ¥æºï¼Œæ›´èƒ½æŒæ¡å°†å‰æ²¿AIèƒ½åŠ›â€œç§æœ‰åŒ–â€ã€â€œä¸“ä¸šåŒ–â€çš„é’¥åŒ™ï¼Œæ— è®ºæ˜¯ä¼˜åŒ–ä¸šåŠ¡è¿˜æ˜¯åˆ›é€ æ–°äº§å“ï¼Œéƒ½è‡³å…³é‡è¦ã€‚</p>
<hr/>
<h3 data-id="heading-1"><strong>ç¬¬ä¸€ç« ï¼šæŠ€æœ¯åŸç† - ä¸‰æ­¥æ‰“é€ ä¸€ä¸ªAIä¸“å®¶</strong></h3>
<h4 data-id="heading-2"><strong>1. å¤§æ¨¡å‹è®­ç»ƒï¼šå»ºé€ ä¸€åº§â€œå…¨äººç±»çŸ¥è¯†å›¾ä¹¦é¦†â€</strong></h4>
<p>ä½ å¯ä»¥æŠŠå¤§æ¨¡å‹æƒ³è±¡æˆä¸€ä¸ªå®¹é‡æƒŠäººçš„ç©ºä¹¦æ¶ã€‚<strong>è®­ç»ƒ</strong>ï¼Œå°±æ˜¯å¾€è¿™ä¸ªä¹¦æ¶ä¸Šç³»ç»Ÿåœ°å¡«å……æµ·é‡ä¹¦ç±ï¼ˆæ•°æ®ï¼‰ï¼Œå¹¶æ•™ä¼šæ¨¡å‹ç†è§£ä¹¦ç±ä¹‹é—´å†…åœ¨è”ç³»çš„è¿‡ç¨‹ã€‚</p>
<ul>
<li><strong>é¢„è®­ç»ƒï¼ˆPre-trainingï¼‰</strong> ï¼šè¿™æ˜¯æœ€åŸºç¡€ã€æœ€è€—èµ„æºçš„é˜¶æ®µã€‚æ¨¡å‹ï¼ˆå¦‚DeepSeek-V3-Baseï¼‰åœ¨æ•°ä¸‡äº¿è®¡çš„ã€æ— æ ‡æ³¨çš„é€šç”¨æ–‡æœ¬ï¼ˆç½‘é¡µã€ä¹¦ç±ã€ä»£ç ç­‰ï¼‰ä¸Šè¿›è¡Œå­¦ä¹ ã€‚å®ƒåƒä¸€ä¸ªèªæ˜çš„å©´å„¿ï¼Œé€šè¿‡â€œå®Œå½¢å¡«ç©ºâ€ï¼ˆé¢„æµ‹è¢«é®ä½çš„è¯ï¼‰ã€â€œä¸‹ä¸€å¥é¢„æµ‹â€ç­‰è‡ªç›‘ç£ä»»åŠ¡ï¼Œçº¯ç²¹ä»æ–‡æœ¬ç»“æ„ä¸­å­¦åˆ°è¯­æ³•ã€äº‹å®ã€å¸¸è¯†å’Œé€»è¾‘æ¨ç†èƒ½åŠ›ã€‚<strong>ç»“æœæ˜¯ï¼šä¸€ä¸ªâ€œé€šæ‰â€æ¨¡å‹è¯ç”Ÿäº†ã€‚</strong></li>
<li><strong>åè®­ç»ƒï¼ˆPost-trainingï¼‰</strong> ï¼šé¢„è®­ç»ƒæ¨¡å‹è™½ç„¶çŸ¥è¯†æ¸Šåšï¼Œä½†â€œæ€§æ ¼â€å’Œè¡Œä¸ºå¯èƒ½ä¸ç¨³å®šï¼Œå›ç­”å¯èƒ½å†—é•¿æˆ–ä¸å®‰å…¨ã€‚åè®­ç»ƒç”±æ¨¡å‹å¼€å‘è€…è¿›è¡Œï¼Œé€šè¿‡<strong>ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰</strong> Â å’Œ<strong>äººç±»åé¦ˆå¼ºåŒ–å­¦ä¹ ï¼ˆRLHFï¼‰</strong> Â ç­‰æ–¹å¼ï¼Œç”¨é«˜è´¨é‡çš„äººç±»ç¤ºèŒƒå’Œåå¥½æ•°æ®â€œé›•ç¢â€æ¨¡å‹ï¼Œä½¿å…¶è¾“å‡ºæ›´ç¬¦åˆäººç±»ä¹ æƒ¯ã€æ›´å®‰å…¨ã€æ›´æœ‰å¸®åŠ©ã€‚<strong>ç»“æœæ˜¯ï¼šä¸€ä¸ªâ€œå¯ç”¨â€ä¸”â€œè¡Œä¸ºè‰¯å¥½â€çš„é€šç”¨æ¨¡å‹ï¼Œå¦‚ChatGPTã€DeepSeek-R1ã€‚</strong></li>
</ul>
<h4 data-id="heading-3"><strong>2. å¤§æ¨¡å‹å¾®è°ƒï¼šæŠŠâ€œé€šæ‰â€åŸ¹å…»æˆâ€œä¸“ç§‘åŒ»ç”Ÿâ€</strong></h4>
<p>å¾®è°ƒå…¶å®æ˜¯åè®­ç»ƒçš„ä¸€ç§ï¼Œä½†ä¸»è§’å˜æˆäº†<strong>æˆ‘ä»¬ä½¿ç”¨è€…</strong>ã€‚å½“æˆ‘ä»¬æ‹¿åˆ°ä¸€ä¸ªåƒDeepSeek-R1è¿™æ ·ä¼˜ç§€çš„é€šç”¨æ¨¡å‹åï¼Œå¦‚ä½•è®©å®ƒç²¾é€šæˆ‘ä»¬çš„å†…éƒ¨çŸ¥è¯†åº“ï¼Œæˆ–å…·å¤‡ä¸“ä¸šçš„å®¢æœè¯æœ¯å‘¢ï¼Ÿè¿™å°±æ˜¯å¾®è°ƒçš„ä»·å€¼ã€‚</p>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šåœ¨ä¿ç•™æ¨¡å‹99%é€šç”¨èƒ½åŠ›ï¼ˆåŒ»å­¦åŸºç¡€ã€é—®è¯ŠæŠ€å·§ï¼‰çš„åŸºç¡€ä¸Šï¼Œç”¨ä½ ç‰¹å®šé¢†åŸŸï¼ˆå¿ƒå¤–ç§‘ç—…å†ï¼‰çš„å°‘é‡æ•°æ®ï¼Œå¯¹æ¨¡å‹è¿›è¡Œâ€œç²¾ä¿®â€ï¼Œä½¿å…¶åœ¨è¯¥é¢†åŸŸè¡¨ç°çªé£çŒ›è¿›ã€‚</p>
</li>
<li>
<p><strong>å¾®è°ƒæ–¹æ³•ç™¾èŠ±é½æ”¾</strong>ï¼šæ ¹æ®è®¡ç®—èµ„æºå’Œç›®æ ‡çš„ä¸åŒï¼Œæˆ‘ä»¬æœ‰å¤šç§â€œç²¾ä¿®â€ç­–ç•¥ï¼š</p>
<ul>
<li>
<p><strong>å…¨é‡å¾®è°ƒï¼ˆFull Fine-Tuningï¼‰</strong> ï¼šç›¸å½“äºè®©åŒ»ç”Ÿé‡æ–°å­¦ä¹ æ‰€æœ‰çŸ¥è¯†ï¼Œä½†é‡ç‚¹æ˜¯å¿ƒå¤–ç§‘èµ„æ–™ã€‚æ•ˆæœå¥½ï¼Œä½†â€œå­¦ä¹ æˆæœ¬â€ï¼ˆè®¡ç®—èµ„æºï¼‰æé«˜ï¼Œå®¹æ˜“â€œå­¦åâ€ï¼ˆè¿‡æ‹Ÿåˆï¼‰ã€‚</p>
</li>
<li>
<p><strong>å‚æ•°é«˜æ•ˆå¾®è°ƒï¼ˆPEFTï¼‰</strong> ï¼šè¿™æ‰æ˜¯ç›®å‰çš„ä¸»æµå’Œæ¨èåšæ³•ï¼æˆ‘ä»¬åªè®©æ¨¡å‹â€œé€‰ä¿®â€å‡ é—¨æ–°è¯¾ç¨‹ï¼Œå¤§éƒ¨åˆ†æ ¸å¿ƒçŸ¥è¯†ä¸åŠ¨ã€‚æ—¢é«˜æ•ˆåˆå®‰å…¨ã€‚</p>
<ul>
<li><strong>LoRAï¼ˆæ˜æ˜Ÿæ–¹æ³•ï¼‰</strong> ï¼šç»™æ¨¡å‹çš„â€œæ€ç»´ç½‘ç»œâ€åŠ ä¸Šä¸€äº›è½»é‡åŒ–çš„â€œè¡¥ä¸å±‚â€ï¼Œåªè®­ç»ƒè¿™äº›æ–°åŠ çš„â€œè¡¥ä¸â€ã€‚èµ„æºæ¶ˆè€—æå°ï¼Œæ•ˆæœæ¥è¿‘å…¨é‡å¾®è°ƒã€‚</li>
<li><strong>QLoRAï¼ˆLoRAçš„å¢å¼ºç‰ˆï¼‰</strong> ï¼šåœ¨LoRAçš„åŸºç¡€ä¸Šï¼Œè¿˜æŠŠåŸæ¨¡å‹çš„çŸ¥è¯†è¿›è¡Œäº†â€œå‹ç¼©â€ï¼ˆé‡åŒ–ï¼‰ï¼Œè¿›ä¸€æ­¥é™ä½å¯¹æ˜¾å­˜çš„è¦æ±‚ã€‚<strong>åœ¨æ¶ˆè´¹çº§æ˜¾å¡ä¸Šå¾®è°ƒå¤§æ¨¡å‹æˆä¸ºå¯èƒ½ï¼</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-4"><strong>3. å¤§æ¨¡å‹æ¨ç†ï¼šä¸“å®¶å¼€å§‹â€œåè¯Šâ€è§£é¢˜</strong></h4>
<p>æ¨ç†å°±æ˜¯æ¨¡å‹åˆ©ç”¨æ‰€å­¦çŸ¥è¯†ï¼Œå›ç­”ä½ é—®é¢˜çš„<strong>åº”ç”¨è¿‡ç¨‹</strong>ã€‚å½“ä½ å‘æ¨¡å‹æé—®æ—¶ï¼š</p>
<ol>
<li><strong>è§£æé—®é¢˜</strong>ï¼šæ¨¡å‹å°†ä½ çš„é—®é¢˜è½¬åŒ–ä¸ºå†…éƒ¨èƒ½ç†è§£çš„â€œæ€ç»´å‘é‡â€ã€‚</li>
<li><strong>æ¿€æ´»çŸ¥è¯†</strong>ï¼šåœ¨å®ƒåºå¤§çš„â€œçŸ¥è¯†å›¾ä¹¦é¦†â€ä¸­ï¼Œå¿«é€Ÿæ£€ç´¢ä¸é—®é¢˜ç›¸å…³çš„â€œä¹¦æ¶â€ï¼ˆæ¿€æ´»ç›¸å…³ç¥ç»å…ƒå’Œå‚æ•°ï¼‰ã€‚</li>
<li><strong>é€æ­¥æ¨ç†</strong>ï¼šåƒè§£ä¸€é“æ•°å­¦é¢˜ä¸€æ ·ï¼Œç»“åˆæ£€ç´¢åˆ°çš„çŸ¥è¯†ï¼Œä¸€æ­¥æ­¥æ¨å¯¼ï¼ˆå³Transformeræ¶æ„çš„å±‚å±‚å‰å‘è®¡ç®—ï¼‰ï¼Œç”Ÿæˆä¸‹ä¸€ä¸ªæœ€å¯èƒ½çš„è¯ï¼Œç›´è‡³å½¢æˆå®Œæ•´ç­”æ¡ˆã€‚</li>
</ol>
<p><strong>ç®€å•ç±»æ¯”</strong>ï¼šè®­ç»ƒ=ä¸Šå¤§å­¦è¯»æœ¬ç§‘ï¼›å¾®è°ƒ=è¯»ç¡•å£«/åšå£«ï¼Œé€‰å®šç ”ç©¶æ–¹å‘ï¼›æ¨ç†=æ¯•ä¸šåç”¨æ‰€å­¦çŸ¥è¯†è§£å†³å·¥ä½œéš¾é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-5"><strong>ç¬¬äºŒç« ï¼šå®è·µæ­¥éª¤ - äº²æ‰‹å¾®è°ƒä½ çš„ç¬¬ä¸€ä¸ªå¤§æ¨¡å‹</strong></h3>
<p>ç†è®ºæ‡‚äº†ï¼Œæˆ‘ä»¬æ¥çœ‹å¦‚ä½•åŠ¨æ‰‹ã€‚è¿™é‡Œï¼Œæˆ‘å°†ä»¥ä½¿ç”¨Â <strong>LoRA</strong>Â æ–¹æ³•ï¼Œåœ¨ä¸€å°é…å¤‡24Gæ˜¾å­˜çš„æ¶ˆè´¹çº§æ˜¾å¡ï¼ˆå¦‚RTX 4090ï¼‰ä¸Šï¼Œå¾®è°ƒä¸€ä¸ª7Bå‚æ•°çš„æ¨¡å‹ä¸ºä¾‹ï¼Œè®²è§£æ ¸å¿ƒæ­¥éª¤ã€‚</p>
<p>åœ¨å®é™…å®è·µä¸­ï¼Œå¦‚æœåªæ˜¯åœç•™åœ¨â€œäº†è§£å¤§æ¨¡å‹åŸç†â€ï¼Œå…¶å®å¾ˆéš¾çœŸæ­£æ„Ÿå—åˆ°æ¨¡å‹èƒ½åŠ›çš„å·®å¼‚ã€‚æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èç›´æ¥ä¸Šæ‰‹åšä¸€æ¬¡å¾®è°ƒï¼Œæ¯”å¦‚ç”¨Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.llamafactory.com.cn%2Fregister%3Futm_source%3Djslt_xtjj_wsy" target="_blank" title="https://www.llamafactory.com.cn/register?utm_source=jslt_xtjj_wsy" ref="nofollow noopener noreferrer"><strong>LLaMA-Factory Online</strong></a>Â è¿™ç§ä½é—¨æ§›å¤§æ¨¡å‹å¾®è°ƒå¹³å°ï¼ŒæŠŠè‡ªå·±çš„æ•°æ®çœŸæ­£â€œå–‚â€è¿›æ¨¡å‹é‡Œï¼Œç”Ÿäº§å‡ºå±äºè‡ªå·±çš„ä¸“å±æ¨¡å‹ã€‚å³ä½¿æ²¡æœ‰ä»£ç åŸºç¡€ï¼Œä¹Ÿèƒ½è½»æ¾è·‘å®Œå¾®è°ƒæµç¨‹ï¼Œåœ¨å®è·µä¸­ç†è§£æ€ä¹ˆè®©æ¨¡å‹â€œæ›´åƒä½ æƒ³è¦çš„æ ·å­â€ã€‚</p>
<p><strong>æ­¥éª¤ä¸€ï¼šç¯å¢ƒä¸æ•°æ®å‡†å¤‡</strong></p>
<ol>
<li>
<p><strong>é€‰æ‹©åŸºç¡€æ¨¡å‹</strong>ï¼šä»Hugging Faceç­‰å¹³å°ä¸‹è½½ä¸€ä¸ªå¼€æºçš„ã€é€‚åˆä½ ä»»åŠ¡çš„åŸºç¡€æ¨¡å‹ï¼Œå¦‚Â <code>Qwen2.5-7B-Instruct</code>Â æˆ–Â <code>Llama-3.2-7B-Instruct</code>ã€‚</p>
</li>
<li>
<p><strong>å‡†å¤‡å¾®è°ƒæ•°æ®</strong>ï¼šè¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ï¼ä½ éœ€è¦å°†ä¸“ä¸šçŸ¥è¯†æ•´ç†æˆÂ <strong>å¯¹è¯æ ¼å¼ï¼ˆInstruction-Input-Outputï¼‰</strong> Â çš„JSONæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š</p>
<p>json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"instruction"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯·æ‰®æ¼”ä¸€ä½ä¸“ä¸šçš„å¿ƒç†å’¨è¯¢å¸ˆã€‚"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"input"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘æ„Ÿè§‰æœ€è¿‘å·¥ä½œå‹åŠ›å¾ˆå¤§ï¼Œç»å¸¸å¤±çœ ã€‚"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"output"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¬èµ·æ¥ä½ æœ€è¿‘æ‰¿å—äº†ä¸å°çš„å‹åŠ›ã€‚å¤±çœ æ˜¯èº«ä½“åœ¨æé†’æˆ‘ä»¬éœ€è¦å…³æ³¨è‡ªå·±çš„æƒ…ç»ªã€‚æˆ‘ä»¬å¯ä»¥å°è¯•å…ˆä»å»ºç«‹è§„å¾‹çš„ç¡å‰æ”¾æ¾ä¹ æƒ¯å¼€å§‹ï¼Œæ¯”å¦‚ç¡å‰åŠå°æ—¶è¿œç¦»æ‰‹æœºï¼Œåšä¸€äº›è½»æŸ”çš„æ‹‰ä¼¸æˆ–å¬ä¸€äº›èˆ’ç¼“çš„éŸ³ä¹ã€‚ä½ æ„¿æ„å’Œæˆ‘å¤šèŠèŠå…·ä½“çš„å·¥ä½œæƒ…å¢ƒå—ï¼Ÿ"</span>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-comment">// ... æ›´å¤šç±»ä¼¼çš„æ•°æ®æ ·æœ¬ï¼Œé€šå¸¸å‡ ç™¾åˆ°å‡ åƒæ¡é«˜è´¨é‡æ•°æ®å°±æœ‰æ•ˆæœ</span>
<span class="hljs-punctuation">]</span>
</code></pre>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e132b592161b40709d807784ae187f58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54u454yr566X5ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769330063&amp;x-signature=qGuT4RKDDLDzf5noVPtShOzW%2B3w%3D" alt="13413198298043703.jpeg" loading="lazy"/></p>
<ol>
<li><strong>æ­å»ºç¯å¢ƒ</strong>ï¼šå®‰è£…Pythonã€PyTorchï¼Œä»¥åŠå¾®è°ƒæ¡†æ¶ï¼ˆå¦‚Â <code>PEFT</code>,Â <code>Transformers</code>,Â <code>trl</code>ï¼‰ã€‚</li>
</ol>
<p><strong>æ­¥éª¤äºŒï¼šé…ç½®ä¸å¯åŠ¨å¾®è°ƒ</strong></p>
<ol>
<li><strong>é€‰æ‹©PEFTæ–¹æ³•</strong>ï¼šåœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦é…ç½®LoRAå‚æ•°ï¼Œå¦‚è®¾å®š<code>r=8</code>ï¼ˆè¡¥ä¸å±‚çš„ç§©ï¼‰ã€<code>lora_alpha=32</code>ç­‰ã€‚è¿™äº›å‚æ•°æ§åˆ¶æ–°å­¦çŸ¥è¯†çš„â€œå®¹é‡â€å’Œâ€œå¼ºåº¦â€ã€‚</li>
<li><strong>è®¾ç½®è®­ç»ƒå‚æ•°</strong>ï¼šå®šä¹‰å­¦ä¹ ç‡ï¼ˆé€šå¸¸å¾ˆå°ï¼Œå¦‚2e-4ï¼‰ã€è®­ç»ƒè½®æ•°ï¼ˆepochï¼‰ã€æ‰¹å¤„ç†å¤§å°ï¼ˆbatch sizeï¼Œæ ¹æ®æ˜¾å­˜è°ƒæ•´ï¼‰ã€‚</li>
<li><strong>å¯åŠ¨è®­ç»ƒ</strong>ï¼šè¿è¡Œè®­ç»ƒè„šæœ¬ã€‚ä½ ä¼šçœ‹åˆ°æŸå¤±å€¼ï¼ˆlossï¼‰é€æ¸ä¸‹é™ï¼Œè¿™è¡¨ç¤ºæ¨¡å‹æ­£åœ¨ä»ä½ çš„æ•°æ®ä¸­å­¦ä¹ ã€‚</li>
</ol>
<p><strong>æ­¥éª¤ä¸‰ï¼šæ¨¡å‹åˆå¹¶ä¸æµ‹è¯•</strong></p>
<ol>
<li><strong>ä¿å­˜ä¸åˆå¹¶</strong>ï¼šè®­ç»ƒå®Œæˆåï¼Œä½ ä¼šå¾—åˆ°ä¸€å°éƒ¨åˆ†LoRAæƒé‡æ–‡ä»¶ï¼ˆé€šå¸¸åªæœ‰å‡ åMBï¼‰ã€‚éœ€è¦å°†è¿™ä¸ªâ€œè¡¥ä¸â€ä¸åŸæ¨¡å‹åˆå¹¶ï¼Œç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„ã€å¯ç›´æ¥ç”¨äºæ¨ç†çš„æ–°æ¨¡å‹æ–‡ä»¶ã€‚</li>
<li><strong>æ•ˆæœæµ‹è¯•</strong>ï¼šç”¨ä¸€äº›è®­ç»ƒæ—¶æ²¡è§è¿‡çš„ã€ä½†å±äºåŒä¸€é¢†åŸŸçš„é—®é¢˜æ¥æµ‹è¯•ä½ çš„æ¨¡å‹ï¼Œçœ‹å®ƒæ˜¯å¦è¾“å‡ºäº†ç¬¦åˆä½ é¢„æœŸçš„ä¸“ä¸šå›ç­”ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-6"><strong>ç¬¬ä¸‰ç« ï¼šæ•ˆæœè¯„ä¼° - ä½ çš„æ¨¡å‹â€œå­¦â€å¾—æ€ä¹ˆæ ·ï¼Ÿ</strong></h3>
<p>å¾®è°ƒåï¼Œä¸èƒ½å…‰å‡­æ„Ÿè§‰ï¼Œéœ€è¦ç§‘å­¦è¯„ä¼°ï¼š</p>
<ol>
<li>
<p><strong>äººå·¥è¯„æµ‹</strong>ï¼šè¿™æ˜¯é»„é‡‘æ ‡å‡†ã€‚é‚€è¯·é¢†åŸŸä¸“å®¶æˆ–ç›®æ ‡ç”¨æˆ·ï¼Œå¯¹å¾®è°ƒå‰åçš„æ¨¡å‹å›ç­”è¿›è¡Œç›²æµ‹æ‰“åˆ†ï¼Œè¯„ä¼°å…¶<strong>ä¸“ä¸šæ€§ã€å‡†ç¡®æ€§å’Œæµç•…åº¦</strong>ã€‚</p>
</li>
<li>
<p><strong>è‡ªåŠ¨æŒ‡æ ‡</strong>ï¼š</p>
<ul>
<li><strong>ä»»åŠ¡ç‰¹å®šæŒ‡æ ‡</strong>ï¼šå¦‚æœæ˜¯åˆ†ç±»ä»»åŠ¡ï¼Œçœ‹å‡†ç¡®ç‡ã€F1å€¼ï¼›å¦‚æœæ˜¯ç”Ÿæˆä»»åŠ¡ï¼Œå¯ä»¥ç”¨Â <strong>BLEU/ROUGE</strong>Â åˆ†æ•°ï¼ˆè¡¡é‡ä¸æ ‡å‡†ç­”æ¡ˆçš„æ–‡æœ¬é‡å åº¦ï¼‰ã€‚</li>
<li><strong>æŸå¤±å‡½æ•°å€¼</strong>ï¼šåœ¨é¢„ç•™çš„éªŒè¯é›†ä¸Šï¼Œæ¨¡å‹è®¡ç®—çš„æŸå¤±å€¼è¶Šä½ï¼Œé€šå¸¸è¡¨ç¤ºæ‹Ÿåˆå¾—è¶Šå¥½ã€‚</li>
</ul>
</li>
<li>
<p><strong>èƒ½åŠ›ä¿ç•™æµ‹è¯•</strong>ï¼šç”¨ä¸€äº›é€šç”¨é—®é¢˜ï¼ˆå¦‚â€œè§£é‡Šç‰›é¡¿ç¬¬ä¸€å®šå¾‹â€ï¼‰æµ‹è¯•æ¨¡å‹ï¼Œç¡®ä¿å®ƒåœ¨å˜å¾—ä¸“ä¸šçš„åŒæ—¶ï¼Œæ²¡æœ‰å¿˜è®°åŸæ¥çš„é€šç”¨çŸ¥è¯†ï¼ˆå³æ²¡æœ‰å‘ç”Ÿâ€œç¾éš¾æ€§é—å¿˜â€ï¼‰ã€‚</p>
</li>
</ol>
<hr/>
<h3 data-id="heading-7"><strong>ç¬¬å››ç« ï¼šGPUé€‰æ‹©æŒ‡å— - å¦‚ä½•é…ç½®ä½ çš„â€œç®—åŠ›å‘åŠ¨æœºâ€ï¼Ÿ</strong></h3>
<p>ä¸åŒçš„é˜¶æ®µå¯¹GPUçš„éœ€æ±‚ä¸åŒï¼Œæ ¸å¿ƒçœ‹<strong>æ˜¾å­˜ï¼ˆMemoryï¼‰</strong> Â å’Œ<strong>è®¡ç®—èƒ½åŠ›ï¼ˆTFLOPSï¼‰</strong> ã€‚</p>



































<table><thead><tr><th>ä»»åŠ¡é˜¶æ®µ</th><th>æ ¸å¿ƒéœ€æ±‚</th><th>æ¨èGPUå‹å·ï¼ˆNVIDIAï¼‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è®­ç»ƒ/å…¨é‡å¾®è°ƒ</strong></td><td><strong>æµ·é‡æ˜¾å­˜ã€æè‡´ç®—åŠ›</strong></td><td><strong>H200/B200/H100/A100</strong></td><td>åŠ¨è¾„éœ€è¦æ•°ç™¾GBç”šè‡³TBçº§æ˜¾å­˜ï¼Œæ˜¯ç§‘æŠ€å…¬å¸å’Œå¤§ç ”ç©¶æœºæ„çš„â€œé‡æ­¦å™¨â€ã€‚ã€äº§å“æ¨èä½ã€‘å¯¹äºå¤§å¤šæ•°å¼€å‘è€…å’Œä¸­å°ä¼ä¸šï¼Œç›´æ¥ä»Â <strong>Lab4AI</strong>Â ç­‰äº‘GPUå¹³å°ç§Ÿç”¨Â <strong>H800/H100é›†ç¾¤</strong>Â æ˜¯æŒ‰éœ€è®­ç»ƒå¤§æ¨¡å‹æœ€å…·æ€§ä»·æ¯”çš„æ–¹å¼ã€‚å®ƒä»¬æä¾›é«˜é€Ÿäº’è”ï¼ˆNVLink/IBï¼‰ï¼Œæ”¯æŒFP8é«˜æ•ˆè®­ç»ƒï¼Œå®éªŒç§’çº§å¯åŠ¨ï¼Œé—²æ—¶æ›´æœ‰æŠ˜æ‰£ï¼Œè¿œæ¯”è‡ªå·±è´­ç½®å’Œç»´æŠ¤ç¡¬ä»¶åˆ’ç®—ã€‚</td></tr><tr><td><strong>PEFTå¾®è°ƒï¼ˆå¦‚LoRAï¼‰</strong></td><td><strong>å¤§æ˜¾å­˜ã€é«˜æ€§ä»·æ¯”</strong></td><td><strong>RTX 4090ï¼ˆ24Gï¼‰ã€RTX 3090ï¼ˆ24Gï¼‰</strong></td><td>æ¶ˆè´¹çº§å¡ç‹ï¼å¾—ç›ŠäºQLoRAç­‰æŠ€æœ¯ï¼Œ24Gæ˜¾å­˜å·²è¶³å¤Ÿå¾®è°ƒÂ <strong>7B-13B</strong>Â å‚æ•°çš„æ¨¡å‹ï¼Œæ˜¯ä¸ªäººç ”ç©¶è€…å’Œä¸­å°å›¢é˜Ÿçš„ç»ä½³é€‰æ‹©ã€‚</td></tr><tr><td><strong>å¤§æ¨¡å‹æ¨ç†</strong></td><td><strong>æ˜¾å­˜å¸¦å®½ã€èƒ½æ•ˆæ¯”</strong></td><td><strong>L40Sï¼ˆ48Gï¼‰ã€RTX A6000ï¼ˆ48Gï¼‰</strong></td><td>æ¨ç†éœ€è¦å¿«é€Ÿå°†æ¨¡å‹å‚æ•°ä»æ˜¾å­˜è°ƒå…¥è®¡ç®—å•å…ƒï¼Œå› æ­¤<strong>é«˜å†…å­˜å¸¦å®½</strong>æ˜¯å…³é”®ã€‚è¿™äº›å¡æ˜¾å­˜å¤§ï¼Œé€‚åˆéƒ¨ç½²ä¸­ç­‰è§„æ¨¡çš„æ¨¡å‹ï¼ˆå¦‚70Bä»¥ä¸‹ï¼‰ã€‚</td></tr><tr><td><strong>è½»é‡çº§æ¨ç†/å¼€å‘</strong></td><td><strong>å…¥é—¨æˆæœ¬ã€è¶³å¤Ÿæ˜¾å­˜</strong></td><td><strong>RTX 4060 Ti 16Gã€æ¶ˆè´¹çº§16G+æ˜¾å­˜å¡</strong></td><td>ç”¨äºæœ¬åœ°è¿è¡Œã€æµ‹è¯•7Bä»¥ä¸‹çš„é‡åŒ–ç‰ˆæ¨¡å‹ï¼ˆå¦‚Qwen2.5-1.5B/3Bï¼‰ï¼Œè¿›è¡ŒåŸå‹éªŒè¯å’Œå°è§„æ¨¡åº”ç”¨ã€‚</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1676fdaa80ef4fb784b5bdb8a00af000~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54u454yr566X5ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769330063&amp;x-signature=E8BQog4u56v4m2GyW%2Fvhubcdl7E%3D" alt="13413198430746368.jpeg" loading="lazy"/>
<strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šå¯¹äºç»å¤§å¤šæ•°åº”ç”¨ï¼Œ <strong>â€œå¾®è°ƒç”¨å¤§æ˜¾å­˜å¡ï¼Œæ¨ç†çœ‹å¸¦å®½å’Œæˆæœ¬â€</strong> ã€‚å…ˆæ˜ç¡®ä½ çš„æ¨¡å‹è§„æ¨¡ã€ä½¿ç”¨åœºæ™¯å’Œé¢„ç®—ï¼Œå†å¯¹ç…§ä¸Šè¡¨åšé€‰æ‹©ã€‚å›½äº§GPUï¼ˆå¦‚åä¸ºæ˜‡è…¾ï¼‰åœ¨æ¨ç†ç«¯ä¹Ÿå·²æˆç†Ÿï¼Œæ˜¯åˆè§„å’Œé™æœ¬çš„é‡è¦é€‰é¡¹ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>æ€»ç»“ä¸å±•æœ›</strong></h3>
<ol>
<li>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li><strong>è®­ç»ƒ</strong>èµ‹äºˆæ¨¡å‹â€œé€šè¯†â€ï¼Œ<strong>å¾®è°ƒ</strong>å¡‘é€ å…¶â€œä¸“é•¿â€ï¼Œ<strong>æ¨ç†</strong>æ˜¯å…¶â€œä»·å€¼è¾“å‡ºâ€ã€‚</li>
<li>å¯¹äºä¼ä¸šå’Œä¸ªäººå¼€å‘è€…ï¼Œ<strong>åŸºäºå¼ºå¤§å¼€æºæ¨¡å‹è¿›è¡ŒPEFTå¾®è°ƒï¼ˆå°¤å…¶æ˜¯LoRA/QLoRAï¼‰</strong> ï¼Œæ˜¯æ„å»ºå‚ç›´é¢†åŸŸAIåº”ç”¨æœ€é«˜æ•ˆã€æœ€ä¸»æµçš„è·¯å¾„ã€‚</li>
<li>GPUé€‰æ‹©éœ€é‡ä½“è£è¡£ï¼Œäº‘GPUæœåŠ¡ä¸ºè®­ç»ƒå’Œå¤§è§„æ¨¡æ¨ç†æä¾›äº†å¼¹æ€§ä¸ä¾¿åˆ©ã€‚</li>
</ul>
</li>
<li>
<p><strong>å±•æœ›</strong>ï¼š</p>
<ul>
<li><strong>æ›´é«˜æ•ˆçš„å¾®è°ƒæŠ€æœ¯</strong>ï¼šæœªæ¥çš„ç ”ç©¶å°†ç»§ç»­é™ä½å¾®è°ƒçš„æˆæœ¬å’Œé—¨æ§›ï¼Œè®©â€œä¸ªæ€§åŒ–å¤§æ¨¡å‹â€åƒåˆ¶ä½œPPTä¸€æ ·æ™®åŠã€‚</li>
<li><strong>æ¨ç†æè‡´ä¼˜åŒ–</strong>ï¼šæ¨¡å‹å‹ç¼©ã€é‡åŒ–ã€æ¨ç†æ¡†æ¶ä¼˜åŒ–ï¼ˆå¦‚vLLM, TensorRT-LLMï¼‰å°†æŒç»­é™ä½éƒ¨ç½²æˆæœ¬ï¼Œè®©å¤§æ¨¡å‹è·‘åœ¨æ‰‹æœºå’Œè¾¹ç¼˜è®¾å¤‡ä¸Šæˆä¸ºå¯èƒ½ã€‚</li>
<li><strong>ä¸€ä½“åŒ–å¹³å°å…´èµ·</strong>ï¼šä»æ•°æ®å‡†å¤‡ã€è‡ªåŠ¨åŒ–å¾®è°ƒã€åˆ°è¯„ä¼°å’Œéƒ¨ç½²çš„ä¸€ç«™å¼å¹³å°ï¼ˆå¦‚å‰é¢æåˆ°çš„LLaMA-Factoryï¼‰å°†æå¤§åŠ é€ŸAIåº”ç”¨è½åœ°ã€‚</li>
</ul>
</li>
</ol>
<p>å¸Œæœ›è¿™ç¯‡é•¿æ–‡èƒ½ä¸ºä½ æ‹¨å¼€è¿·é›¾ï¼Œä¸ä»…ç†è§£äº†å¤§æ¨¡å‹çš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼Œæ›´è·å¾—äº†åŠ¨æ‰‹å®è·µçš„è·¯çº¿å›¾ã€‚AIçš„ä¸–ç•Œä¸å†é¥ä¸å¯åŠï¼Œä»ä¸€æ¬¡äº²æ‰‹å¾®è°ƒå¼€å§‹ï¼Œå»åˆ›é€ å±äºä½ è‡ªå·±çš„æ™ºèƒ½å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»ååŒè¿‡æ»¤åˆ°åŒå¡”å¬å›ï¼Œé‚£äº›ä½ å¿…é¡»è·¨è¿‡çš„â€œå‘]]></title>    <link>https://juejin.cn/post/7596276978808487979</link>    <guid>https://juejin.cn/post/7596276978808487979</guid>    <pubDate>2026-01-18T10:20:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596276978808487979" data-draft-id="7596276978808471595" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»ååŒè¿‡æ»¤åˆ°åŒå¡”å¬å›ï¼Œé‚£äº›ä½ å¿…é¡»è·¨è¿‡çš„â€œå‘"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-18T10:20:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜Ÿè¾æ ‘"/> <meta itemprop="url" content="https://juejin.cn/user/200544183650531"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»ååŒè¿‡æ»¤åˆ°åŒå¡”å¬å›ï¼Œé‚£äº›ä½ å¿…é¡»è·¨è¿‡çš„â€œå‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/200544183650531/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜Ÿè¾æ ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T10:20:10.000Z" title="Sun Jan 18 2026 10:20:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»ååŒè¿‡æ»¤åˆ°åŒå¡”å¬å›ï¼Œé‚£äº›ä½ å¿…é¡»è·¨è¿‡çš„â€œå‘</p>
<h2 data-id="heading-0">ğŸ’¡ å‰è¨€</h2>
<p>åœ¨æ¨èç³»ç»Ÿçš„æ¼æ–—ä¸­ï¼Œ<strong>å¬å›ï¼ˆRecallï¼‰</strong> å†³å®šäº†æ¨èçš„å¤©èŠ±æ¿ï¼Œè€Œ <strong>ç²¾æ’ï¼ˆRankingï¼‰</strong> åªæ˜¯åœ¨é€¼è¿‘è¿™ä¸ªå¤©èŠ±æ¿ã€‚</p>
<p>å¾ˆå¤šåŒå­¦åœ¨ä»å­¦æ ¡ç†è®ºè½¬å‘å·¥ä¸šç•Œå®æˆ˜æ—¶ï¼Œå¾€å¾€ä¼šé™·å…¥ä¸€ä¸ªè¯¯åŒºï¼šç”¨æç²¾æ’çš„æ€ç»´å»æå¬å›ã€‚ä»Šå¤©ï¼Œç»“åˆæˆ‘æœ€è¿‘æ·±å…¥ç ”ç©¶çš„ä¸€å¥—å¤§å‚å†…éƒ¨æŠ€æœ¯ç¬”è®°ï¼Œæˆ‘æƒ³å’Œå¤§å®¶èŠèŠå¬å›å±‚çš„â€œæˆ˜æœ¯æ¼”è¿›â€ï¼Œç‰¹åˆ«æ˜¯é‚£äº›æ•™ç§‘ä¹¦ä¸Šæ²¡ç»†è¯´çš„<strong>å·¥ç¨‹æƒè¡¡ï¼ˆTrade-offï¼‰</strong> ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ ä¼ ç»Ÿæ—¶ä»£çš„æ™ºæ…§ï¼šä¿®æ­£â€œäººå¿ƒâ€çš„åå·®</h2>
<p>åœ¨æ·±åº¦å­¦ä¹ ç»Ÿé¢†å¤©ä¸‹ä¹‹å‰ï¼ŒåŸºäº Item å±æ€§çš„å€’æ’ç´¢å¼•å’ŒååŒè¿‡æ»¤ï¼ˆCFï¼‰æ˜¯ç»å¯¹çš„ä¸»æµã€‚ä½†è¿™é‡Œè—ç€ä¸€ä¸ªç»å…¸çš„æ•°å­¦é™·é˜±ã€‚</p>
<h3 data-id="heading-2">1.1 åˆ«å†è¿·ä¿¡ä½™å¼¦ç›¸ä¼¼åº¦äº†</h3>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ UserCF å’Œ ItemCF çš„æ ¸å¿ƒæ˜¯è®¡ç®—ç›¸ä¼¼åº¦ã€‚æœ€å¸¸ç”¨çš„æ˜¯ <strong>ä½™å¼¦ç›¸ä¼¼åº¦ (Cosine Similarity)</strong> ã€‚ä½†æ˜¯ï¼Œå®ƒåœ¨å®é™…åº”ç”¨ä¸­æœ‰ä¸ªè‡´å‘½ Bugï¼š<strong>å¯¹å°ºåº¦ä¸æ•æ„Ÿ</strong>ã€‚</p>
<ul>
<li>ç”¨æˆ· Aï¼šç‹‚çƒ­ç²‰ä¸ï¼Œçœ‹å•¥éƒ½æ‰“ 5 åˆ†ã€‚</li>
<li>ç”¨æˆ· Bï¼šè‹›åˆ»æ‰¹è¯„å®¶ï¼Œè§‰å¾— 3 åˆ†å°±æ˜¯å¥½ç‰‡ã€‚</li>
</ul>
<p>ä½™å¼¦ç›¸ä¼¼åº¦åªçœ‹å‘é‡æ–¹å‘ï¼Œä¼šè®¤ä¸ºè¿™ä¸¤äººå…´è¶£å®Œå…¨ä¸€è‡´ï¼Œä»è€Œå¿½ç•¥äº†ç”¨æˆ· B çš„â€œåŠæ ¼çº¿â€å…¶å®å¾ˆé«˜ã€‚</p>
<p>ğŸ‘‰ è¿›é˜¶è§£æ³•ï¼šçš®å°”é€Šç›¸å…³ç³»æ•° (Pearson Correlation)</p>
<p>å·¥ä¸šç•Œæ›´æ¨èä½¿ç”¨çš®å°”é€Šç³»æ•°ã€‚å®ƒçš„æœ¬è´¨æ˜¯ â€œä¸­å¿ƒåŒ–â€ (Centering) â€”â€” å…ˆæŠŠæ¯ä¸ªç”¨æˆ·çš„è¯„åˆ†å‡å»ä»–è‡ªå·±çš„å¹³å‡åˆ†ã€‚</p>
<ul>
<li>
<p>A çš„ 5 åˆ† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn><mo>âˆ’</mo><mn>5</mn><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">5-5=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">5</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ï¼ˆå¹³åº¸ï¼‰ã€‚</p>
</li>
<li>
<p>B çš„ 4 åˆ† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo>âˆ’</mo><mn>3</mn><mo>=</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">4-3=+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">+</span><span class="mord">1</span></span></span></span></span>ï¼ˆå–œæ¬¢ï¼‰ã€‚</p>
<p>é€šè¿‡å»å‡å€¼ï¼Œæˆ‘ä»¬æŠ¹å¹³äº†â€œæ‰“åˆ†ä¹ æƒ¯â€çš„å·®å¼‚ï¼Œè®©ç›¸ä¼¼åº¦è®¡ç®—å›å½’å…´è¶£æœ¬èº«ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">1.2 å¤šè·¯å¬å›çš„â€œç«¯æ°´è‰ºæœ¯â€</h3>
<p>å®é™…ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ä¼šæœ‰ UserCFã€ItemCFã€æ ‡ç­¾å¬å›ã€çƒ­é—¨å¬å›ç­‰å¤šè·¯ç»“æœã€‚æ€ä¹ˆåˆå¹¶ï¼Ÿ</p>
<p>åƒä¸‡åˆ«ç›´æ¥æŒ‰åˆ†æ•°æ··æ’ï¼å› ä¸ºä¸åŒè·¯çš„åˆ†æ•°ä½“ç³»ä¸åŒï¼ˆçƒ­é—¨å¬å›çš„åˆ†æ•°é€šå¸¸ä¼šè™šé«˜ï¼‰ã€‚</p>
<p>æœ€ä½³å®è·µï¼šè›‡å½¢å½’å¹¶ (Snake Merge / Round-Robin)</p>
<p>ç¬¬ä¸€è½®å–å„è·¯ Top1ï¼Œç¬¬äºŒè½®å–å„è·¯ Top2â€¦â€¦è¿™ç§æœ´ç´ çš„è½®è¯¢æœºåˆ¶ï¼Œåè€Œèƒ½æœ€å¤§ç¨‹åº¦ä¿è¯ç»“æœçš„å¤šæ ·æ€§å’Œå…¬å¹³æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-4">äºŒã€ å‘é‡åŒ–å¬å›ï¼šç°ä»£æ¨èçš„åŸºçŸ³</h2>
<p>è¿›å…¥ Embedding æ—¶ä»£ï¼Œæ ¸å¿ƒé€»è¾‘å˜æˆäº†ï¼š<strong>ä¸‡ç‰©çš†å‘é‡ï¼Œè·ç¦»å³å…´è¶£</strong>ã€‚</p>
<h3 data-id="heading-5">2.1 æ¶æ„è®¾è®¡çš„é“å¾‹ï¼šå¿…é¡»è§£è€¦ (Decoupling)</h3>
<p>é¢è¯•é«˜é¢‘é¢˜ï¼š<strong>ç²¾æ’æ¨¡å‹ï¼ˆå¦‚ DeepFMï¼‰å’Œå¬å›æ¨¡å‹ï¼ˆå¦‚ DSSM åŒå¡”ï¼‰æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li><strong>ç²¾æ’</strong>ï¼šæ¨ä¸å¾—æŠŠç”¨æˆ·å’Œç‰©å“ç‰¹å¾æ‰ç¢äº†æ‹¼åœ¨ä¸€èµ·ï¼Œç–¯ç‹‚åšç‰¹å¾äº¤å‰ï¼ˆInteractionï¼‰ï¼Œä¸ºäº†æè‡´çš„å‡†ã€‚</li>
<li><strong>å¬å›</strong>ï¼š<strong>å¿…é¡»è§£è€¦ï¼</strong> ç”¨æˆ·å¡”ç®—ç”¨æˆ·å‘é‡ï¼Œç‰©å“å¡”ç®—ç‰©å“å‘é‡ï¼Œä¸¤è€…ç›´åˆ°æœ€åä¸€æ­¥æ‰èƒ½è§é¢ã€‚</li>
</ul>
<p>ä¸ºä»€ä¹ˆè¦ç‰ºç‰²äº¤å‰èƒ½åŠ›ï¼Ÿ</p>
<p>ä¸ºäº†é€Ÿåº¦ã€‚åªæœ‰è§£è€¦ï¼Œæˆ‘ä»¬æ‰èƒ½ç¦»çº¿æŠŠå‡ åƒä¸‡ä¸ª Item Embedding ç®—å¥½å­˜å…¥ FAISSã€‚çº¿ä¸Šæ¥äº†è¯·æ±‚ï¼Œåªç®—ä¸€æ¬¡ User Embeddingï¼Œå°±èƒ½é€šè¿‡ ANNï¼ˆè¿‘ä¼¼æœ€è¿‘é‚»ï¼‰æ¯«ç§’çº§æ£€ç´¢ã€‚å¦‚æœåšæ—©æœŸäº¤å‰ï¼Œä½ å°±å¾—æŠŠ User å’Œå‡ åƒä¸‡ä¸ª Item é€ä¸€è¿‡ä¸€é DNNï¼ŒæœåŠ¡å™¨ç›´æ¥çˆ†ç‚¸,ã€‚</p>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€ æ ·æœ¬é€‰æ‹©ï¼šå¬å›æ¨¡å‹çš„â€œç”Ÿæ­»çº¿â€ ğŸ”¥</h2>
<p>è¿™æ˜¯æœ¬æ–‡çš„<strong>é‡ç‚¹ä¸­çš„é‡ç‚¹</strong>ã€‚å¾ˆå¤šæ¨¡å‹æ•ˆæœä¸å¥½ï¼Œä¸æ˜¯ç»“æ„ä¸è¡Œï¼Œæ˜¯æ ·æœ¬å–‚é”™äº†ã€‚</p>
<h3 data-id="heading-7">3.1 è´Ÿæ ·æœ¬çš„é™·é˜±</h3>
<ul>
<li><strong>ç²¾æ’çš„è´Ÿæ ·æœ¬</strong>ï¼šæ›å…‰æœªç‚¹å‡»ã€‚</li>
<li><strong>å¬å›çš„è´Ÿæ ·æœ¬</strong>ï¼š<strong>å…¨åº“éšæœºé‡‡æ · (Global Random Sampling)</strong> ã€‚</li>
</ul>
<p>Whyï¼Ÿ</p>
<p>å¬å›é¢å¯¹çš„æ˜¯æµ·é‡å€™é€‰é›†ï¼Œå…¶ä¸­ 99.9% æ˜¯ç”¨æˆ·å®Œå…¨ä¸æ„Ÿå…´è¶£çš„ï¼ˆå…«æ†å­æ‰“ä¸ç€ï¼‰ã€‚å¦‚æœåªç”¨â€œæ›å…‰æœªç‚¹å‡»â€åšè´Ÿæ ·æœ¬ï¼Œæ¨¡å‹å°±åªå­¦ä¼šäº†åˆ†è¾¨â€œé•¿å¾—åƒä½†ç”¨æˆ·æ²¡ç‚¹â€çš„å›°éš¾æ ·æœ¬ï¼Œå´æ²¡è§è¿‡â€œå®Œå…¨æ— å…³â€çš„ç®€å•æ ·æœ¬ã€‚ä¸Šçº¿åï¼Œæ¨¡å‹ä¼šæŠŠå¤§é‡æ— å…³å™ªéŸ³è¯¯åˆ¤ä¸ºé«˜åˆ†ã€‚</p>
<h3 data-id="heading-8">3.2 é»„é‡‘æ¯”ä¾‹ï¼šEasy vs Hard</h3>
<p>å…¨éšæœºï¼ˆEasy Negativeï¼‰è™½ç„¶èƒ½è®©æ¨¡å‹â€œå¼€çœ¼ç•Œâ€ï¼Œä½†å¤ªç®€å•äº†ï¼ˆæ•™æ¨¡å‹åŒºåˆ†çŒ«å’Œæ±½è½¦ï¼‰ã€‚</p>
<p>Facebook ç»éªŒï¼šEasy : Hard = 100 : 1ã€‚</p>
<p>åœ¨éšæœºé‡‡æ ·ä¸­ï¼Œæ··å…¥å°‘é‡ Hard Negativeï¼ˆé•¿å¾—åƒæ­£æ ·æœ¬ä½†ä¸æ˜¯ï¼Œæ¯”å¦‚åŒºåˆ†å“ˆå£«å¥‡å’Œç‹¼ï¼‰ã€‚è¿™èƒ½é€¼è¿«åŒå¡”æ¨¡å‹å­¦ä¹ æ›´ç»†ç²’åº¦çš„ç‰¹å¾ã€‚</p>
<hr/>
<h2 data-id="heading-9">å››ã€ Loss å‡½æ•°çš„ç„æœºï¼šä» NCE åˆ° NEG</h2>
<p>å¬å›æ¨¡å‹åˆ°åº•åœ¨ä¼˜åŒ–ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li><strong>ç²¾æ’</strong>ï¼šè¿½æ±‚ <strong>ç»å¯¹å‡†ç¡®æ€§</strong> (BCE Loss)ã€‚é¢„æµ‹å‡º CTR æ˜¯ 1% è¿˜æ˜¯ 1.5%ï¼Œå› ä¸ºè¦ç”¨äºå¹¿å‘Šè®¡è´¹ã€‚</li>
<li><strong>å¬å›</strong>ï¼šè¿½æ±‚ <strong>ç›¸å¯¹å‡†ç¡®æ€§</strong> (Softmax/NCE)ã€‚åªè¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo stretchy="false">(</mo><mtext>æ­£</mtext><mo stretchy="false">)</mo><mo>&gt;</mo><mi>S</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo stretchy="false">(</mo><mtext>è´Ÿ</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Score(æ­£) &gt; Score(è´Ÿ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">core</span><span class="mopen">(</span><span class="mord cjk_fallback">æ­£</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">core</span><span class="mopen">(</span><span class="mord cjk_fallback">è´Ÿ</span><span class="mclose">)</span></span></span></span></span> å³å¯ã€‚</li>
</ul>
<h3 data-id="heading-10">4.1 NCE Loss çš„â€œä½œå¼Šæƒ©ç½šâ€</h3>
<p>Softmax åˆ†æ¯å¤ªå¤§ç®—ä¸åŠ¨ï¼Œäºæ˜¯æˆ‘ä»¬ç”¨ NCE (Noise Contrastive Estimation) æŠŠå®ƒå˜æˆäºŒåˆ†ç±»é—®é¢˜ã€‚</p>
<p>NCE å…¬å¼é‡Œæœ‰ä¸€ä¸ªæé‡è¦çš„æ ¡å‡†é¡¹ï¼š <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ’</mo><mi>log</mi><mo>â¡</mo><mi>Q</mi><mo stretchy="false">(</mo><mi>t</mi><mi mathvariant="normal">âˆ£</mi><mi>u</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">-\log Q(t|u)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">Q</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord">âˆ£</span><span class="mord mathnormal">u</span><span class="mclose">)</span></span></span></span></span>ã€‚</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo stretchy="false">(</mo><mi>t</mi><mi mathvariant="normal">âˆ£</mi><mi>u</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q(t|u)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">Q</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord">âˆ£</span><span class="mord mathnormal">u</span><span class="mclose">)</span></span></span></span></span> æ˜¯ç‰©å“è¢«é‡‡æ ·çš„æ¦‚ç‡ï¼ˆé€šå¸¸ä¸çƒ­åº¦æˆæ­£æ¯”ï¼‰ã€‚</li>
<li><strong>å«ä¹‰</strong>ï¼šå¦‚æœä¸€ä¸ªç‰©å“å¤ªçƒ­é—¨ï¼Œæˆ‘å°±æ‰£å®ƒåˆ†ï¼</li>
<li><strong>ç›®çš„</strong>ï¼š<strong>å»çƒ­åº¦åå·®</strong>ã€‚å¼ºè¿«æ¨¡å‹å»å­¦ç”¨æˆ·çœŸæ­£çš„å…´è¶£ï¼Œè€Œä¸æ˜¯æ— è„‘æ¨çƒ­é—¨ã€‚</li>
</ul>
<h3 data-id="heading-11">4.2 å·¥ä¸šç•Œçš„å¦¥åï¼šNEG Loss</h3>
<p>Google çš„ Word2Vec ä½¿ç”¨äº†æ›´ç®€å•çš„ NEG Lossã€‚å®ƒç›´æ¥å¿½ç•¥äº† NCE ä¸­çš„æ ¡å‡†é¡¹ã€‚</p>
<p>è™½ç„¶ç†è®ºä¸Šå®ƒä¸èƒ½æ‹ŸåˆçœŸå®æ¦‚ç‡ï¼Œä½†å¯¹äºâ€œå­¦ä¹ é«˜è´¨é‡å‘é‡â€è¿™ä¸ªä»»åŠ¡ï¼Œå®ƒè®¡ç®—å¤Ÿå¿«ã€æ•ˆæœå¤Ÿå¥½ï¼Œæ˜¯æ€§ä»·æ¯”ä¹‹é€‰ã€‚</p>
<hr/>
<h2 data-id="heading-12">äº”ã€ å®æˆ˜éš¾é¢˜ï¼šå†·å¯åŠ¨ä¸åŒå¡”æ”¹è¿›</h2>
<h3 data-id="heading-13">5.1 ç‰©å“å†·å¯åŠ¨ï¼šå€Ÿå°¸è¿˜é­‚</h3>
<p>æ–°ç‰©å“æ²¡æœ‰ ID Embedding æ€ä¹ˆåŠï¼Ÿ</p>
<p>é€šç”¨è§£æ³•ï¼šç”¨ CNN/BERT æå–æ–°ç‰©å“çš„å†…å®¹ Embeddingï¼Œå»åº“é‡Œæ‰¾ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span></span> ä¸ªå†…å®¹ç›¸ä¼¼çš„é«˜æ›å…‰è€ç‰©å“ï¼ŒæŠŠå®ƒä»¬çš„ ID Embedding å–å¹³å‡ï¼Œä½œä¸ºæ–°ç‰©å“çš„åˆå§‹å‘é‡ã€‚</p>
<h3 data-id="heading-14">5.2 æ”¹è¿›åŒå¡”ï¼šæŠŠå¡”â€œå˜å®½â€</h3>
<p>åŒå¡”æœ€å¤§çš„ç¼ºç‚¹æ˜¯â€œäº¤äº’å¤ªæ™šâ€ï¼Œä¿¡æ¯å‹ç¼©æŸå¤±å¤§ã€‚</p>
<p>æ€ä¹ˆæ•‘ï¼Ÿ åœ¨å¡”çš„å†…éƒ¨æäº‹æƒ…ã€‚</p>
<p>ä¸è¦åªç”¨ç®€å•çš„ MLPã€‚åœ¨å¡”åº•å¼•å…¥ DCN (Deep Cross Network) æˆ– FMï¼Œåœ¨å•ä¾§å¡”å†…å°±è®©ç‰¹å¾å……åˆ†äº¤å‰ï¼ˆæ¯”å¦‚ç”¨æˆ·ä¾§çš„â€œæ€§åˆ«â€å’Œâ€œå¹´é¾„â€äº¤å‰ï¼‰ã€‚</p>
<p>â€œå¤§å¡”å˜å°å¡”â€ï¼šæŠŠä¸åŒç±»å‹çš„ç‰¹å¾ï¼ˆæ–‡æœ¬ã€ç±»åˆ«ï¼‰åˆ†åˆ«è¿‡å°å¡”ï¼Œæœ€åèåˆã€‚è¿™èƒ½æ˜¾è‘—æå‡ Embedding çš„è¡¨è¾¾èƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-15">ğŸ“ æ€»ç»“</h2>
<p>åšå¬å›ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨åš <strong>â€œå¹³è¡¡â€</strong> ï¼š</p>
<ol>
<li><strong>ç²¾åº¦ vs é€Ÿåº¦</strong>ï¼šé€šè¿‡åŒå¡”è§£è€¦å’Œ FAISS æ¢å–é€Ÿåº¦ã€‚</li>
<li><strong>å¹¿åº¦ vs æ·±åº¦</strong>ï¼šé€šè¿‡éšæœºé‡‡æ ·ï¼ˆEasy Negativeï¼‰ä¿è¯å¹¿åº¦ï¼Œé€šè¿‡ Hard Negative æå‡æ·±åº¦ã€‚</li>
<li><strong>ç†è®º vs å·¥ç¨‹</strong>ï¼šé€šè¿‡ NEG Loss ç‰ºç‰²ä¸€ç‚¹æ¦‚ç‡ç†è®ºçš„ä¸¥è°¨æ€§ï¼Œæ¢å–è®­ç»ƒçš„é«˜æ•ˆæ€§ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€Ÿæ¥ï¼ä¸­å›½ AI å¼€å‘è€…çš„ç¦éŸ³ï¼Œæ‰“ç ´å£å’çš„ä¸€å¤©åˆ°äº†]]></title>    <link>https://juejin.cn/post/7596134842482835497</link>    <guid>https://juejin.cn/post/7596134842482835497</guid>    <pubDate>2026-01-18T05:58:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596134842482835497" data-draft-id="7596134842482769961" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€Ÿæ¥ï¼ä¸­å›½ AI å¼€å‘è€…çš„ç¦éŸ³ï¼Œæ‰“ç ´å£å’çš„ä¸€å¤©åˆ°äº†"/> <meta itemprop="keywords" content="å‰ç«¯,GitHub,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-18T05:58:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰çŸ³æµæµªè®°"/> <meta itemprop="url" content="https://juejin.cn/user/4072246800548999"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€Ÿæ¥ï¼ä¸­å›½ AI å¼€å‘è€…çš„ç¦éŸ³ï¼Œæ‰“ç ´å£å’çš„ä¸€å¤©åˆ°äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4072246800548999/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰çŸ³æµæµªè®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T05:58:39.000Z" title="Sun Jan 18 2026 05:58:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é€Ÿæ¥ï¼ä¸­å›½ AI å¼€å‘è€…çš„ç¦éŸ³ï¼Œæ‰“ç ´å£å’çš„ä¸€å¤©åˆ°äº†</h2>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ff7339640144c439363a76aa034c540~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ55-z5rWB5rWq6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769320719&amp;x-signature=muXZrD1JtQp8EYX%2FBVZJC082opk%3D" alt="å›¾ç‰‡æè¿°" width="100%" loading="lazy"/>
<blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šåœ¨æ„å»ºé«˜æ€§èƒ½ AI Agent æŠ€æœ¯æ ˆæ—¶ï¼ŒBun çš„æé€Ÿå¯åŠ¨èƒ½åŠ›æ˜¯ä¸å¯æˆ–ç¼ºçš„åŸºçŸ³ã€‚ç„¶è€Œï¼Œå®˜æ–¹å·¥å…·é“¾åœ¨ç‰ˆæœ¬ç®¡ç†å’Œç¯å¢ƒéš”ç¦»ä¸Šçš„ç¼ºå¤±ï¼Œæˆä¸ºäº†å·¥ç¨‹åŒ–è½åœ°çš„æœ€å¤§é˜»ç¢ã€‚ä¸ºæ­¤ï¼Œæˆ‘æ‰‹å†™äº† BVM â€”â€” ä¸€ä¸ªæ‹¥æœ‰ Shell é›¶ä¾µå…¥æ¶æ„ã€åŸå­çº§ç¯å¢ƒéš”ç¦»èƒ½åŠ›ï¼Œå¹¶ä¸“ä¸ºå›½å†…ç½‘ç»œç¯å¢ƒé‡æ„äº†åˆ†å‘ç­–ç•¥çš„åŸç”Ÿç‰ˆæœ¬ç®¡ç†å™¨ã€‚</p>
</blockquote>
<hr/>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ <strong>å»–ç£Š AI ç¼–ç¨‹</strong>ã€‚æ¶ˆå¤±äº†ä¸€ä¸ªæœˆï¼ŒæŠ±æ­‰ï¼Œä½†æ˜¯æˆ‘åœ¨åšä¸€ä»¶è®¤ä¸ºå¯¹çš„äº‹æƒ…ã€‚</p>
<p>åœ¨è¿‡å»çš„ä¸€å¹´é‡Œï¼Œæˆ‘ä¸€ç›´åœ¨æ¢ç´¢ AI Agent çš„æœ€ä½³è½åœ°æŠ€æœ¯æ ˆã€‚å¯¹äº Agent è¿™ç§å…¸å‹çš„â€œçŸ­ç”Ÿå‘½å‘¨æœŸã€é«˜é¢‘å¯åŠ¨â€åº”ç”¨åœºæ™¯ï¼Œ<strong>å†·å¯åŠ¨é€Ÿåº¦å°±æ˜¯ç”Ÿå‘½çº¿</strong>ã€‚</p>
<p>è¿™å°±æ˜¯æˆ‘é€æ¸ä» Node.js è¿ç§»åˆ° Bun çš„åŸå› ã€‚Bun åŸºäº Safari çš„ JavaScriptCore (JSC) å¼•æ“ï¼Œç›¸è¾ƒäº Node.js çš„ V8ï¼Œå®ƒåœ¨å¯åŠ¨é€Ÿåº¦ä¸Šæœ‰ç€æ•°é‡çº§çš„æå‡ã€‚ç»è¿‡å®æµ‹ï¼ŒBun å¯ä»¥æ— ä¼¤æ›¿æ¢ä»»æ„ Node.js åå°æœåŠ¡ã€Vite å‰ç«¯å·¥ç¨‹ï¼Œä¸”ç»¼åˆæ•ˆç‡è‡³å°‘æå‡ä¸€å€ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨å®é™…å·¥ç¨‹åŒ–è½åœ°çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ’ä¸Šäº†ä¸€å µå¢™ï¼š<strong>Bun çš„åŸºå»ºè¿˜ä¸å¤Ÿæˆç†Ÿã€‚</strong></p>
<ol>
<li><strong>å®˜æ–¹å®‰è£…ç®€å•ç²—æš´</strong>ï¼š<code>curl | bash</code> ä¸€æŠŠæ¢­ï¼Œä¸ä»…ç¼ºä¹ç‰ˆæœ¬å›æº¯èƒ½åŠ›ï¼Œå‡çº§ä¹Ÿç»å¸¸å› ä¸ºç½‘ç»œé—®é¢˜ä¸­æ–­ã€‚</li>
<li><strong>å¤šç‰ˆæœ¬ç®¡ç†ç¼ºå¤±</strong>ï¼šé¢å¯¹ä¸åŒä¸šåŠ¡é¡¹ç›®çš„å†å²ç¯å¢ƒè¦æ±‚ï¼ˆæœ‰çš„é¡¹ç›®é”æ­» v1.0.9ï¼Œæœ‰çš„è¦å°é²œ v1.1.4ï¼‰ï¼Œæ‰‹åŠ¨åˆ‡æ¢ç‰ˆæœ¬æåº¦ç—›è‹¦ã€‚</li>
<li><strong>é€šç”¨å·¥å…·çš„â€œé‡â€</strong>ï¼šå¸‚é¢ä¸Šçš„é€šç”¨ç®¡ç†å™¨ï¼ˆå¦‚ asdf, miseï¼‰è™½ç„¶æ”¯æŒ Bunï¼Œä½†å®ƒä»¬å¾€å¾€éœ€è¦åœ¨ Shell å¯åŠ¨æ—¶åŠ è½½å¤æ‚çš„å«ç‰‡ï¼ˆShimï¼‰ï¼Œå¯¼è‡´ç»ˆç«¯æ‰“å¼€æ—¶æœ‰è‚‰çœ¼å¯è§çš„å¡é¡¿ã€‚</li>
</ol>
<p>ä½œä¸ºä¸€åè¿½æ±‚æè‡´çš„å¼€å‘è€…ï¼Œæˆ‘æ— æ³•å¿å—å·¥å…·é“¾æˆä¸ºæ•ˆç‡çš„ç“¶é¢ˆã€‚æ—¢ç„¶æ²¡æœ‰é¡ºæ‰‹çš„å…µå™¨ï¼Œé‚£å°±è‡ªå·±é€ ä¸€æŠŠã€‚</p>
<p>äºæ˜¯ï¼Œ<strong>BVM (Bun Version Manager)</strong> è¯ç”Ÿäº†ã€‚</p>
<hr/>
<h3 data-id="heading-1">1. æŒ‘æˆ˜ç‰©ç†æé™ï¼šä»€ä¹ˆæ˜¯â€œæ— æ„Ÿå»¶è¿Ÿâ€ï¼Ÿ</h3>
<p>å¾ˆå¤šå¼€å‘è€…ä¹ æƒ¯äº†ä½¿ç”¨ nvm æˆ– nvm-windowsã€‚ä½†ä½ æ˜¯å¦æ³¨æ„åˆ°ï¼Œéšç€å®‰è£…çš„ç‰ˆæœ¬è¶Šæ¥è¶Šå¤šï¼Œä½ çš„ç»ˆç«¯å¯åŠ¨é€Ÿåº¦ï¼ˆTerminal Startup Timeï¼‰ä¼šå˜æ…¢ï¼Ÿ</p>
<p>è¿™æ˜¯å› ä¸ºä¼ ç»Ÿç‰ˆæœ¬ç®¡ç†å™¨é€šå¸¸ä¼šåœ¨ä½ çš„ <code>.zshrc</code> æˆ– <code>.bashrc</code> é‡Œæ³¨å…¥å¤§é‡çš„åˆå§‹åŒ–è„šæœ¬ã€‚æ¯æ¬¡æ‰“å¼€ç»ˆç«¯ï¼Œå®ƒä»¬éƒ½è¦è¿è¡Œä¸€éç¯å¢ƒæ£€æµ‹ã€è·¯å¾„è¿ç®—ï¼Œç”šè‡³ç½‘ç»œæ£€æŸ¥ã€‚å¯¹äºè¿½æ±‚æ•ˆç‡çš„æå®¢æ¥è¯´ï¼Œè¿™å‡ ç™¾æ¯«ç§’çš„å»¶è¿Ÿæ˜¯å¯ä»¥è¢«æ„ŸçŸ¥çš„â€œå¡é¡¿â€ã€‚</p>
<p><strong>BVM æ‹’ç»è¿™æ ·åšã€‚</strong></p>
<p>æˆ‘è®¾è®¡äº†ä¸€å¥— <strong>Symlink-Shim æ··åˆæ¶æ„ (Hybrid Architecture)</strong>ï¼Œæ—¨åœ¨è¾¾æˆ <strong>Shell é›¶ä¾µå…¥</strong> çš„ç›®æ ‡ï¼š</p>
<h4 data-id="heading-2">é™æ€æ¨¡å¼ (Global)</h4>
<p>å½“ä½ æ‰§è¡Œ <code>bvm use 1.1.10</code> æ—¶ï¼ŒBVM å¹¶ä¸ä¼šå»ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œè€Œæ˜¯ç›´æ¥åœ¨æ–‡ä»¶ç³»ç»Ÿå±‚é¢ä¿®æ”¹ä¸€ä¸ªç‰©ç†è½¯é“¾æ¥ (<code>~/.bvm/current</code>)ã€‚ä½ çš„ <code>PATH</code> æ°¸è¿œåªæŒ‡å‘è¿™ä¸ªé™æ€é“¾æ¥ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼Œå½“ä½ æ‰“å¼€æ–°ç»ˆç«¯æ—¶ï¼Œæ“ä½œç³»ç»Ÿ<strong>ä¸éœ€è¦æ‰§è¡Œä»»ä½• BVM ä»£ç </strong>ï¼Œç”šè‡³ä¸éœ€è¦åŠ è½½ Node.js æˆ– Bunï¼Œç›´æ¥å°±èƒ½é€šè¿‡æ–‡ä»¶ç³»ç»ŸæŒ‡é’ˆæ‰¾åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>
<p><strong>å»¶è¿Ÿï¼Ÿçº¦ç­‰äºæ“ä½œç³»ç»Ÿè§£æè½¯é“¾çš„æ—¶é—´ï¼ˆå¾®ç§’çº§ï¼‰ã€‚</strong></p>
<h4 data-id="heading-3">åŠ¨æ€æ¨¡å¼ (Project-Level)</h4>
<p>é’ˆå¯¹å›¢é˜Ÿåä½œï¼ŒBVM æ”¯æŒä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„è‡ªåŠ¨åˆ‡æ¢ã€‚å¦‚æœä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ª <code>.bvmrc</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">"1.1.10"</span> &gt; .bvmrc
</code></pre>
<p>å½“ä½ è¿›å…¥è¯¥ç›®å½•è¿è¡Œ <code>bun</code> å‘½ä»¤æ—¶ï¼ŒBVM çš„è½»é‡çº§ Shim ä¼šæ‹¦æˆªè°ƒç”¨ï¼Œè‡ªåŠ¨æ£€æµ‹å¹¶åˆ‡æ¢åˆ°å¯¹åº”ç‰ˆæœ¬ã€‚ä½ ç”šè‡³ä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥ <code>bvm use</code>ï¼Œä¸€åˆ‡éƒ½åœ¨æ¯«ç§’é—´è‡ªåŠ¨å‘ç”Ÿã€‚</p>
<hr/>
<h3 data-id="heading-4">2. æ¶æ„æ‚–è®ºï¼šç”¨ Bun ç®¡ç† Bunï¼Ÿ</h3>
<p>åœ¨å¼€å‘ BVM æ—¶ï¼Œæˆ‘é¢ä¸´ä¸€ä¸ªæœ‰è¶£çš„â€œé¸¡ç”Ÿè›‹â€é—®é¢˜ï¼šæˆ‘æƒ³ç”¨ Bun æœ¬èº«çš„é«˜æ€§èƒ½ç‰¹æ€§æ¥ç¼–å†™ BVMï¼Œä½† BVM çš„ä»»åŠ¡åˆæ˜¯å»ä¸‹è½½ Bunã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å¼•å…¥äº† <strong>Bunker æ¶æ„</strong>ã€‚</p>
<h4 data-id="heading-5">The Bunker Mechanism (åœ°å ¡æœºåˆ¶)</h4>
<p>BVM åœ¨å®‰è£…æ—¶ï¼Œä¼šåœ¨ <code>~/.bvm/runtime</code> è¿™ä¸ªâ€œåœ°å ¡â€ä¸­ï¼Œä¸‹è½½å¹¶ç»´æŠ¤ä¸€ä¸ªå®Œå…¨éš”ç¦»ã€ç§æœ‰çš„å¾®å‹ Bun è¿è¡Œæ—¶ã€‚</p>
<ul>
<li><strong>ç”¨æˆ·ç©ºé—´ (User Space)</strong>ï¼šä½ å¹³æ—¶ç”¨çš„ Bun ç¯å¢ƒï¼Œåœ¨ <code>~/.bvm/versions</code> ä¸‹ï¼Œéšä½ æŠ˜è…¾ã€‚</li>
<li><strong>ç®¡ç†ç©ºé—´ (Admin Space)</strong>ï¼šBVM ä¾é åœ°å ¡é‡Œçš„è¿è¡Œæ—¶å·¥ä½œï¼Œç¨³å¦‚ç£çŸ³ã€‚å³ä½¿ä½ å¸è½½äº†æ‰€æœ‰ç”¨æˆ·ç‰ˆæœ¬ï¼ŒBVM ä¾ç„¶åšæŒºã€‚</li>
<li><strong>åŸå­çº§ç¯å¢ƒéš”ç¦»</strong>ï¼šä¸åŒç‰ˆæœ¬çš„å…¨å±€åŒ…ï¼ˆ<code>bun install -g</code>ï¼‰è¢«ç‰©ç†éš”ç¦»ã€‚v1.0.9 å®‰è£…çš„å·¥å…·ç»ä¸ä¼šæ±¡æŸ“ v1.1.10 çš„ç¯å¢ƒã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">3. ç»™å›½å†…å¼€å‘è€…çš„â€œæƒ…ä¹¦â€ï¼šé‡æ„åˆ†å‘ç­–ç•¥</h3>
<p>åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹ï¼ŒGitHub Releases çš„ä¸‹è½½é€Ÿåº¦å¾€å¾€åªæœ‰å‡  KBã€‚åœ¨ BVM çš„æœ€æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘åšäº†ä¸€ä¸ªé‡å¤§çš„æ¶æ„å†³ç­–ï¼š<strong>æŠ›å¼ƒå•çº¯çš„ CDN ä¾èµ–ï¼Œæ‹¥æŠ± Tarball ç­–ç•¥ã€‚</strong></p>
<h4 data-id="heading-7">ç»ˆææ–¹æ¡ˆï¼šRegistry-First</h4>
<p>BVM å¼•å…¥äº†æ™ºèƒ½è·¯ç”±ç­–ç•¥ï¼š</p>
<ol>
<li><strong>ç›´è¿æºå¤´</strong>ï¼šä¸å†è¯·æ±‚ä¸ç¨³å®šçš„é™æ€æ–‡ä»¶ï¼Œè€Œæ˜¯ç›´æ¥å‘ NPM é•œåƒ (npmmirror) è¯·æ±‚å®Œæ•´çš„ <code>.tgz</code> å‘è¡ŒåŒ…ã€‚</li>
<li><strong>ç§’çº§åŒæ­¥</strong>ï¼šåªè¦æˆ‘ä»¬å‘å¸ƒäº†æ–°ç‰ˆæœ¬ï¼Œå›½å†…ç”¨æˆ·åœ¨ 10 ç§’å†…å°±èƒ½é€šè¿‡æ·˜å®æºæ‹‰å–åˆ°ï¼ŒæˆåŠŸç‡ 100%ã€‚</li>
<li><strong>æ™ºèƒ½ç«é€Ÿ</strong>ï¼šBVM ä¼šè‡ªåŠ¨æ¢æµ‹ä½ çš„ IPï¼Œ<strong>ä¸­å›½ç”¨æˆ·è‡ªåŠ¨åˆ‡æ¢è‡³å›½å†…é•œåƒ</strong>ï¼Œæµ·å¤–ç”¨æˆ·ä½¿ç”¨å®˜æ–¹æºï¼Œå…¨ç¨‹æ— æ„Ÿã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-8">4. å…¨å¹³å°åˆ¶éœ¸ï¼šWindows ä¹Ÿèƒ½ä¸æ»‘é¡ºç•…</h3>
<p>BVM æ²¡æœ‰é€‰æ‹©æ— è§† Windows ç”¨æˆ·ã€‚æˆ‘ä»¬æ·±åº¦é€‚é…äº† PowerShell è„šæœ¬ï¼Œåˆ©ç”¨ <strong>NTFS Junctions</strong> æŠ€æœ¯ï¼Œåœ¨ Windows ä¸Šå®ç°äº†ä¸ Unix Symlink åŒç­‰çš„é«˜æ€§èƒ½åˆ‡æ¢ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-9">5. ç«‹å³ä½“éªŒ</h3>
<p>BVM ç°å·²å‘å¸ƒ <strong>v1.1.10 æ­£å¼ç‰ˆ</strong>ï¼Œå¹¶ä¸Šçº¿äº†å…¨æ–°çš„å®˜æ–¹ç½‘ç«™ã€‚</p>
<p>ğŸš€ <strong>ä¸€é”®æé€Ÿå®‰è£…</strong>
è¿™æ˜¯æˆ‘ä¸ºæ‚¨å‡†å¤‡çš„ä¸€è¡Œæµå‘½ä»¤ã€‚å®ƒä¼šè‡ªåŠ¨æ£€æµ‹æ‚¨çš„ç³»ç»Ÿå¹¶é€‰æ‹©æœ€å¿«çš„é•œåƒæºï¼š</p>
<p><strong>macOS / Linux / WSL:</strong></p>
<pre><code class="hljs language-bash" lang="bash">curl -fsSL https://bvm-core.pages.dev/install | bash
</code></pre>
<p><strong>Windows (PowerShell):</strong></p>
<pre><code class="hljs language-powershell" lang="powershell">irm https://bvm-core.pages.dev/install | iex
</code></pre>
<h4 data-id="heading-10">å¸¸ç”¨å‘½ä»¤ä¸€è§ˆ</h4>
<ul>
<li>å®‰è£…æœ€æ–°ç‰ˆï¼š<code>bvm install latest</code></li>
<li>åˆ‡æ¢ç‰ˆæœ¬ï¼š<code>bvm use 1.1.10</code></li>
<li>æŸ¥çœ‹å·²å®‰è£…ï¼š<code>bvm ls</code></li>
<li>ä¸€é”®å‡çº§ BVMï¼š<code>bvm upgrade</code></li>
</ul>
<hr/>
<h3 data-id="heading-11">å†™åœ¨æœ€å</h3>
<p>é€ è½®å­ä¸æ˜¯ç›®çš„ï¼Œè§£å†³é—®é¢˜æ‰æ˜¯ã€‚BVM çš„è¯ç”Ÿï¼Œåªæ˜¯ä¸ºäº†è®©æˆ‘åœ¨å¼€å‘ AI Agent æ—¶ï¼Œèƒ½å°‘ç­‰å¾…é‚£ä¸€ç§’é’Ÿçš„å¯åŠ¨æ—¶é—´ï¼Œå°‘å¤„ç†ä¸€æ¬¡ç¯å¢ƒæŠ¥é”™ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨å…³æ³¨ Bun ç”Ÿæ€ï¼Œæˆ–è€…æ­£åœ¨æ„å»ºé«˜æ€§èƒ½çš„ AI åº”ç”¨ï¼Œå¸Œæœ› BVM èƒ½æˆä¸ºä½ å·¥å…·ç®±é‡Œçš„ä¸€æŠŠè¶æ‰‹åˆ©å™¨ã€‚</p>
<ul>
<li><strong>å®˜æ–¹ç½‘ç«™</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbvm-core.pages.dev" target="_blank" title="https://bvm-core.pages.dev" ref="nofollow noopener noreferrer">bvm-core.pages.dev</a></li>
<li><strong>é¡¹ç›®å¼€æºåœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FEricLLLLLL%2Fbvm" target="_blank" title="https://github.com/EricLLLLLL/bvm" ref="nofollow noopener noreferrer">github.com/EricLLLLLL/â€¦</a></li>
</ul>
<p>å¦‚æœè¿™ä¸ªå°å·¥å…·å¸®ä½ çš„å¼€å‘ä½“éªŒæå‡äº†ä¸€ç‚¹ç‚¹ï¼Œè¯·åˆ«å¿˜äº†åœ¨ GitHub ä¸Šç»™ä¸ª <strong>Star â­ï¸</strong>ï¼ä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºç•™ä¸‹ä½ çš„çœ‹æ³•ï¼Œæˆ‘ä»¬ä¸€èµ·æ¢è®¨åŸºç¡€è®¾æ–½çš„æœªæ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº YOLOv8 çš„å¤šç›®æ ‡é£åŠ›æ¶¡è½®æœºã€å¤©çº¿ã€çƒŸå›±ã€ç”µåŠ›çº¿æ£€æµ‹è¯†åˆ«é¡¹ç›® [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]]]></title>    <link>https://juejin.cn/post/7596181746082545714</link>    <guid>https://juejin.cn/post/7596181746082545714</guid>    <pubDate>2026-01-18T09:03:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596181746082545714" data-draft-id="7596187471773089801" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº YOLOv8 çš„å¤šç›®æ ‡é£åŠ›æ¶¡è½®æœºã€å¤©çº¿ã€çƒŸå›±ã€ç”µåŠ›çº¿æ£€æµ‹è¯†åˆ«é¡¹ç›® [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-18T09:03:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯æ°å°¼"/> <meta itemprop="url" content="https://juejin.cn/user/4200579899599495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº YOLOv8 çš„å¤šç›®æ ‡é£åŠ›æ¶¡è½®æœºã€å¤©çº¿ã€çƒŸå›±ã€ç”µåŠ›çº¿æ£€æµ‹è¯†åˆ«é¡¹ç›® [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4200579899599495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯æ°å°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T09:03:43.000Z" title="Sun Jan 18 2026 09:03:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäº YOLOv8 çš„é£ç”µåœºå¤šç›®æ ‡ã€é£åŠ›æ¶¡è½®æœºã€å¤©çº¿ã€çƒŸå›±ã€ç”µåŠ›çº¿ã€‘æ™ºèƒ½æ„ŸçŸ¥å¹³å°å®æˆ˜ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]</h2>
<h3 data-id="heading-1">ä¸€ã€èƒŒæ™¯ä¸é—®é¢˜å®šä¹‰</h3>
<p>åœ¨æ–°èƒ½æºä¸å¤§å‹åŸºç¡€è®¾æ–½å¿«é€Ÿæ‰©å¼ çš„èƒŒæ™¯ä¸‹ï¼Œ<strong>é£åŠ›å‘ç”µåœºåŠå…¶å‘¨è¾¹è®¾æ–½çš„æ™ºèƒ½åŒ–å·¡æ£€</strong>é€æ¸æˆä¸ºè¡Œä¸šåˆšéœ€ã€‚å®é™…å·¥ç¨‹ä¸­ï¼Œè¿ç»´äººå‘˜ä¸ä»…éœ€è¦å…³æ³¨é£åŠ›æ¶¡è½®æœºæœ¬ä½“çŠ¶æ€ï¼Œè¿˜éœ€è¦åŒæ­¥è¯†åˆ«å’Œç›‘æ§ä»¥ä¸‹å…¸å‹ç›®æ ‡ï¼š</p>
<ul>
<li>é£åŠ›æ¶¡è½®æœºï¼ˆWind Turbineï¼‰</li>
<li>è¾“ç”µç›¸å…³è®¾æ–½ï¼ˆPower Lineï¼‰</li>
<li>åœºåŒºå†…é€šä¿¡è®¾æ–½ï¼ˆAntennaï¼‰</li>
<li>é«˜è€¸å›ºå®šæ„ç­‘ç‰©ï¼ˆChimneyï¼‰</li>
</ul>
<p>è¿™äº›ç›®æ ‡å¾€å¾€ <strong>å°ºåº¦å·®å¼‚å¤§ã€èƒŒæ™¯å¤æ‚ã€åˆ†å¸ƒç¨€ç–</strong>ï¼ŒåŒæ—¶åˆå­˜åœ¨èˆªæ‹ã€å›ºå®šæ‘„åƒå¤´ã€è¿œè·ç¦»æ‹æ‘„ç­‰å¤šæ ·åŒ–æ•°æ®æ¥æºï¼Œç»™ä¼ ç»Ÿè§„åˆ™ç®—æ³•å¸¦æ¥äº†æ˜æ˜¾æŒ‘æˆ˜ã€‚</p>
<p>å› æ­¤ï¼Œæœ¬æ–‡ä»<strong>å·¥ç¨‹è½åœ°è§†è§’</strong>å‡ºå‘ï¼Œä»‹ç»ä¸€å¥—åŸºäº <strong>YOLOv8 çš„å¤šç›®æ ‡æ£€æµ‹ç³»ç»Ÿ</strong>ï¼Œå¹¶é€šè¿‡æ¡Œé¢çº§å¯è§†åŒ–å·¥å…·ï¼Œå°†æ¨¡å‹èƒ½åŠ›è½¬åŒ–ä¸ºå¯ç›´æ¥ä½¿ç”¨çš„æ£€æµ‹åº”ç”¨ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/027396d29cd448a385aa7d85d318fe86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769331823&amp;x-signature=7TD3o2Jrqq4ey9umYoML5gBd2VI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-2">æºç ä¸‹è½½ä¸æ•ˆæœæ¼”ç¤º</h3>
<p>å“”å“©å“”å“©è§†é¢‘ä¸‹æ–¹è§‚çœ‹ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1uigVzaETc%2F" target="_blank" title="https://www.bilibili.com/video/BV1uigVzaETc/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1uiâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be8db09b41e0412a8ccbd36e9ed4e6e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769331823&amp;x-signature=EhWuSC%2F4QhOUs0thqVQEaJHmdJ8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åŒ…å«ï¼š</p>
<p>ğŸ“¦å®Œæ•´é¡¹ç›®æºç </p>
<p>ğŸ“¦ é¢„è®­ç»ƒæ¨¡å‹æƒé‡</p>
<p>ğŸ—‚ï¸ æ•°æ®é›†åœ°å€ï¼ˆå«æ ‡æ³¨è„šæœ¬</p>
<h3 data-id="heading-3">äºŒã€æ•´ä½“æŠ€æœ¯æ–¹æ¡ˆæ¦‚è§ˆ</h3>
<p>ç³»ç»Ÿæ•´ä½“é‡‡ç”¨ã€Œ<strong>æ·±åº¦å­¦ä¹ æ¨¡å‹ + å·¥ç¨‹åŒ–åº”ç”¨å±‚</strong>ã€çš„åŒå±‚æ¶æ„è®¾è®¡ï¼š</p>
<h4 data-id="heading-4">2.1 æŠ€æœ¯é€‰å‹</h4>
<ul>
<li><strong>æ£€æµ‹æ¨¡å‹</strong>ï¼šYOLOv8ï¼ˆDetection åˆ†æ”¯ï¼‰</li>
<li><strong>æ¨ç†æ¡†æ¶</strong>ï¼šPyTorch / Ultralytics</li>
<li><strong>å¯è§†åŒ–å±‚</strong>ï¼šPyQt5 æ¡Œé¢ GUI</li>
<li><strong>è¾“å…¥å½¢å¼</strong>ï¼šå›¾ç‰‡ / è§†é¢‘ / æ–‡ä»¶å¤¹ / å®æ—¶æ‘„åƒå¤´</li>
<li><strong>è¾“å‡ºç»“æœ</strong>ï¼šç›®æ ‡ç±»åˆ«ã€è¾¹ç•Œæ¡†ã€ç½®ä¿¡åº¦ã€å¯ä¿å­˜ç»“æœ</li>
</ul>
<p>è¯¥æ–¹æ¡ˆçš„æ ¸å¿ƒç›®æ ‡å¹¶éå•çº¯è¿½æ±‚æ¨¡å‹æŒ‡æ ‡ï¼Œè€Œæ˜¯å¼ºè°ƒï¼š</p>
<blockquote>
<p><strong>â€œæ¨¡å‹å¯å¤ç°ã€ç³»ç»Ÿå¯è¿è¡Œã€èƒ½åŠ›å¯æ‰©å±•â€</strong></p>
</blockquote>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f34de0eb88d74eb29ac7348e90511f90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769331823&amp;x-signature=NwUGFU03uf5RfrECgWds2KvHEeA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-5">ä¸‰ã€å¤šç›®æ ‡æ£€æµ‹çš„å·¥ç¨‹æŒ‘æˆ˜ä¸åº”å¯¹</h3>
<h4 data-id="heading-6">3.1 ç›®æ ‡å°ºåº¦ä¸å½¢æ€å·®å¼‚å¤§</h4>
<p>åœ¨é£ç”µåœºåœºæ™¯ä¸­ï¼Œä¸åŒç›®æ ‡åœ¨å›¾åƒä¸­çš„è¡¨ç°å·®å¼‚æ˜¾è‘—ï¼š</p>
<ul>
<li>é£åŠ›æ¶¡è½®æœºï¼šä½“é‡å¤§ï¼Œä½†å¯èƒ½è¢«è¿œè·ç¦»æ‹æ‘„å‹ç¼©</li>
<li>ç”µåŠ›çº¿ï¼šç»†é•¿ç»“æ„ï¼Œå®¹æ˜“è¢«èƒŒæ™¯æ·¹æ²¡</li>
<li>å¤©çº¿ / çƒŸå›±ï¼šå½¢æ€ç›¸ä¼¼ä½†è¯­ä¹‰ä¸åŒ</li>
</ul>
<p><strong>åº”å¯¹ç­–ç•¥ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ YOLOv8 çš„ <strong>Anchor-Free æœºåˆ¶</strong>ï¼Œå‡å°‘äººä¸ºå…ˆéªŒé™åˆ¶</li>
<li>åœ¨è®­ç»ƒé˜¶æ®µå¼•å…¥å¤šå°ºåº¦æ•°æ®å¢å¼º</li>
<li>ä¿æŒç±»åˆ«å®šä¹‰æ¸…æ™°ï¼Œé¿å…è¯­ä¹‰é‡å 
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdd7406cdc344533914cf45f7e537833~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769331823&amp;x-signature=LgSm26%2Fca5yaLvddYxMjujoYoRo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e36ea6f691ce4a758a7d89ddc831d06f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769331823&amp;x-signature=W%2FOM0%2BxE8qN%2F%2BomFZwZPH3SNFNo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ul>
<hr/>
<h4 data-id="heading-7">3.2 å¤šæ•°æ®æºç»Ÿä¸€æ¨ç†é—®é¢˜</h4>
<p>ç³»ç»Ÿéœ€è¦åŒæ—¶æ”¯æŒï¼š</p>
<ul>
<li>å•å¼ å›¾ç‰‡ç¦»çº¿æ£€æµ‹</li>
<li>è§†é¢‘é€å¸§åˆ†æ</li>
<li>æ‘„åƒå¤´å®æ—¶æµæ¨ç†</li>
<li>æ–‡ä»¶å¤¹æ‰¹é‡å¤„ç†</li>
</ul>
<p>ä¸ºæ­¤ï¼Œåœ¨å·¥ç¨‹å®ç°ä¸­å¯¹æ¨ç†æ¨¡å—è¿›è¡Œäº†ç»Ÿä¸€å°è£…ï¼Œä½¿ä¸åŒè¾“å…¥ä»…åœ¨æ•°æ®è¯»å–å±‚å­˜åœ¨å·®å¼‚ï¼Œè€Œ <strong>æ¨¡å‹æ¨ç†ä¸ç»“æœæ¸²æŸ“é€»è¾‘ä¿æŒä¸€è‡´</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-8">å››ã€YOLOv8 æ¨¡å‹è®­ç»ƒæµç¨‹è§£æ</h3>
<h4 data-id="heading-9">4.1 æ•°æ®ç»„ç»‡è§„èŒƒ</h4>
<p>é‡‡ç”¨æ ‡å‡† YOLO æ•°æ®æ ¼å¼ï¼Œä¿è¯è®­ç»ƒä¸éƒ¨ç½²é˜¶æ®µçš„ä¸€è‡´æ€§ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">dataset/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ <span class="hljs-keyword">val</span>/
â”œâ”€â”€ labels/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ <span class="hljs-keyword">val</span>/
</code></pre>
<p>æ ‡æ³¨æ–‡ä»¶ä»¥å½’ä¸€åŒ–åæ ‡å½¢å¼å­˜å‚¨ï¼Œæ”¯æŒå¿«é€Ÿæ‰©å±•æ–°ç±»åˆ«ã€‚</p>
<hr/>
<h4 data-id="heading-10">4.2 è®­ç»ƒç­–ç•¥è¦ç‚¹</h4>
<p>åœ¨å®é™…è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œé‡ç‚¹å…³æ³¨ä»¥ä¸‹æŒ‡æ ‡ï¼š</p>
<ul>
<li><strong>box_loss</strong>ï¼šç›®æ ‡å®šä½ç²¾åº¦</li>
<li><strong>cls_loss</strong>ï¼šå¤šç±»åˆ«åŒºåˆ†èƒ½åŠ›</li>
<li><strong>dfl_loss</strong>ï¼šè¾¹ç•Œæ¡†åˆ†å¸ƒå­¦ä¹ æ•ˆæœ</li>
<li><strong>mAP@0.5</strong>ï¼šå·¥ç¨‹å¯ç”¨æ€§çš„å…³é”®å‚è€ƒæŒ‡æ ‡</li>
</ul>
<p>å½“ mAP@0.5 ç¨³å®šåœ¨è¾ƒé«˜åŒºé—´åï¼Œå³å¯è¿›å…¥éƒ¨ç½²é˜¶æ®µï¼Œè€Œä¸å¿…è¿‡åº¦è¿½æ±‚ç†è®ºæœ€ä¼˜ã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50982b476c91486c9adf190c5022e11c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769331823&amp;x-signature=PG1ZEKWzcIRr5xvqsXXtSwO%2B%2B9Y%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/234fbad887b542498fb72e345a4f6bfb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769331823&amp;x-signature=Ic8Ues%2F%2BLpxeNDz3OWS6JON1Qj8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-11">äº”ã€ä»æ¨¡å‹åˆ°ç³»ç»Ÿï¼šPyQt5 å¯è§†åŒ–é›†æˆ</h3>
<h4 data-id="heading-12">5.1 ä¸ºä»€ä¹ˆè¦åš GUIï¼Ÿ</h4>
<p>åœ¨å¤§é‡å·¥ä¸šä¸èƒ½æºåœºæ™¯ä¸­ï¼Œæœ€ç»ˆä½¿ç”¨ç³»ç»Ÿçš„å¾€å¾€ä¸æ˜¯ç®—æ³•å·¥ç¨‹å¸ˆï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>è¿ç»´äººå‘˜</li>
<li>é¡¹ç›®ç®¡ç†äººå‘˜</li>
<li>æ•™å­¦ä¸æ¼”ç¤ºç”¨æˆ·</li>
</ul>
<p>é€šè¿‡ PyQt5 æ„å»ºæ¡Œé¢ç•Œé¢ï¼Œå¯ä»¥æ˜¾è‘—é™ä½ä½¿ç”¨é—¨æ§›ï¼Œå®ç°ï¼š</p>
<ul>
<li>é›¶å‘½ä»¤è¡Œæ“ä½œ</li>
<li>ä¸€é”®åˆ‡æ¢è¾“å…¥æº</li>
<li>å®æ—¶å¯è§†åŒ–æ£€æµ‹ç»“æœ</li>
<li>è‡ªåŠ¨ä¿å­˜æ£€æµ‹è¾“å‡º</li>
</ul>
<hr/>
<h4 data-id="heading-13">5.2 ç³»ç»ŸåŠŸèƒ½æ¨¡å—åˆ’åˆ†</h4>
<p>GUI å±‚ä¸»è¦åŒ…å«ï¼š</p>
<ul>
<li>æ•°æ®è¾“å…¥ç®¡ç†æ¨¡å—</li>
<li>æ¨¡å‹æ¨ç†è°ƒåº¦æ¨¡å—</li>
<li>ç»“æœæ¸²æŸ“ä¸ä¿å­˜æ¨¡å—</li>
<li>è¿è¡ŒçŠ¶æ€æ§åˆ¶æ¨¡å—</li>
</ul>
<p>è¿™ç§æ¨¡å—åŒ–è®¾è®¡ä¸ºåç»­åŠŸèƒ½æ‰©å±•ï¼ˆå¦‚ç›®æ ‡ç»Ÿè®¡ã€è½¨è¿¹åˆ†æï¼‰é¢„ç•™äº†æ¥å£ç©ºé—´ã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95fc5d478c5c43339829e15c7597faa6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769331823&amp;x-signature=zpW2CuvFK%2Bs87h3B9kZFCAMRB%2F0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-14">å…­ã€å…¸å‹åº”ç”¨åœºæ™¯åˆ†æ</h3>
<p>è¯¥ç³»ç»Ÿå¯ç›´æ¥æˆ–é—´æ¥åº”ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>é£ç”µåœºæ—¥å¸¸å·¡æ£€è¾…åŠ©</li>
<li>è¾“ç”µçº¿è·¯å®‰å…¨ç›‘æµ‹</li>
<li>æ–°èƒ½æºåœºç«™è§„åˆ’åˆ†æ</li>
<li>è®¡ç®—æœºè§†è§‰æ•™å­¦ä¸å®éªŒ</li>
<li>å¤šç›®æ ‡æ£€æµ‹ç®—æ³•å¯¹æ¯”ç ”ç©¶</li>
</ul>
<p>é€šè¿‡æ›´æ¢æ•°æ®é›†ä¸ç±»åˆ«é…ç½®ï¼ŒåŒä¸€å¥—ç³»ç»Ÿå¯å¿«é€Ÿè¿ç§»è‡³å…¶ä»–å‚ç›´é¢†åŸŸã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/920f5576257a4494862d715d73407f1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769331823&amp;x-signature=KMPmV%2FYxqiOBWsMtObhH6cFpTnQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-15">ä¸ƒã€æ€»ç»“ä¸å±•æœ›</h3>
<p>æœ¬æ–‡ä»çœŸå®å·¥ç¨‹éœ€æ±‚å‡ºå‘ï¼Œä»‹ç»äº†ä¸€å¥— <strong>åŸºäº YOLOv8 çš„é£ç”µåœºå¤šç›®æ ‡æ£€æµ‹ç³»ç»Ÿ</strong>ï¼Œä¸ä»…è¦†ç›–æ¨¡å‹è®­ç»ƒä¸æ¨ç†ï¼Œè¿˜é‡ç‚¹å±•ç¤ºäº†å¦‚ä½•å°†ç®—æ³•èƒ½åŠ›è½¬åŒ–ä¸º <strong>å¯ç›´æ¥ä½¿ç”¨çš„åº”ç”¨çº§ç³»ç»Ÿ</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/600c622c1a0b4329b10aa2eaa39a7703~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769331823&amp;x-signature=RdAwgR75R7Jqn5ZyNY3xkG%2BcXIY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¯¥æ–¹æ¡ˆçš„æ ¸å¿ƒä»·å€¼ä½“ç°åœ¨ï¼š</p>
<ul>
<li>æ¨¡å‹æ€§èƒ½ä¸å·¥ç¨‹å¯ç”¨æ€§çš„å¹³è¡¡</li>
<li>æ·±åº¦å­¦ä¹ ä¸æ¡Œé¢åº”ç”¨çš„æœ‰æ•ˆèåˆ</li>
<li>å¯¹å¤æ‚åŸºç¡€è®¾æ–½åœºæ™¯çš„è‰¯å¥½é€‚é…èƒ½åŠ›</li>
</ul>
<p>æœªæ¥ï¼Œè¯¥ç³»ç»Ÿå¯è¿›ä¸€æ­¥å‘ä»¥ä¸‹æ–¹å‘æ¼”è¿›ï¼š</p>
<ul>
<li>æ— äººæœºèˆªæ‹è§†é¢‘ä¸“é¡¹ä¼˜åŒ–</li>
<li>å¤šç›®æ ‡é•¿æœŸè·Ÿè¸ªä¸çŠ¶æ€åˆ†æ</li>
<li>ONNX / TensorRT æ¨ç†åŠ é€Ÿ</li>
<li>äº‘ç«¯ä¸è¾¹ç¼˜è®¾å¤‡ååŒéƒ¨ç½²</li>
</ul>
<p>å¯¹äºå¸Œæœ›å°† YOLOv8 åº”ç”¨äº <strong>æ–°èƒ½æºã€èƒ½æºå·¡æ£€æˆ–å¤§å‹è®¾æ–½æ™ºèƒ½æ„ŸçŸ¥</strong>çš„å¼€å‘è€…è€Œè¨€ï¼Œè¿™æ˜¯ä¸€æ¡å¯å¤ç”¨ã€å¯æ‰©å±•ã€å¯è½åœ°çš„å®è·µè·¯å¾„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­—æµ 2.0 å‘å¸ƒï¼šæˆ‘æŠŠ 14 ä¸ªå¹³å°çš„å‘å¸ƒæµç¨‹å‹åˆ° 10 åˆ†é’Ÿ]]></title>    <link>https://juejin.cn/post/7596221097865003014</link>    <guid>https://juejin.cn/post/7596221097865003014</guid>    <pubDate>2026-01-18T09:23:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596221097865003014" data-draft-id="7596221097864986630" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­—æµ 2.0 å‘å¸ƒï¼šæˆ‘æŠŠ 14 ä¸ªå¹³å°çš„å‘å¸ƒæµç¨‹å‹åˆ° 10 åˆ†é’Ÿ"/> <meta itemprop="keywords" content="äº§å“,åˆ›ä¸š,AIGC"/> <meta itemprop="datePublished" content="2026-01-18T09:23:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿå¥AIç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/4212984287073895"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­—æµ 2.0 å‘å¸ƒï¼šæˆ‘æŠŠ 14 ä¸ªå¹³å°çš„å‘å¸ƒæµç¨‹å‹åˆ° 10 åˆ†é’Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984287073895/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿå¥AIç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T09:23:20.000Z" title="Sun Jan 18 2026 09:23:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å­Ÿå¥ã€‚</p>
<p>ä»Šå¤©æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä»¶å¾ˆâ€œä¸ªäººâ€çš„äº‹ï¼šæˆ‘æŠŠå­—æµå‡çº§åˆ°äº† 2.0ã€‚</p>
<p>å­—æµè¿™ä¸ªäº§å“ï¼Œæ›´åƒæ˜¯æˆ‘åœ¨åšä¸ªäºº IP çš„è·¯ä¸Šï¼Œè¢«é€¼å‡ºæ¥çš„ä¸€å¥—å·¥ä½œæµã€‚</p>
<p>å†™ä¸€æ¬¡å†…å®¹ï¼Œé€‚é…ä¸€å †å¹³å°ï¼›</p>
<p>æŠŠâ€œæ’ç‰ˆ + å‘å¸ƒ + é‡å¤åŠ³åŠ¨â€ä»åˆ›ä½œé‡Œå‰¥ç¦»å‡ºå»ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨åŒæ—¶ç»è¥å…¬ä¼—å·ã€çŸ¥ä¹ã€æ˜é‡‘ã€æ˜Ÿçƒï¼Œä»¥åŠè§†é¢‘å·/æŠ–éŸ³/å°çº¢ä¹¦/B ç«™â€¦â€¦ä½ å¤§æ¦‚ç‡ä¼šæ‡‚è¿™ç§ç—›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b61bdc3363fa47ff8cc0272474cc9c7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=O87SHHvsVOnr5O3uIExSQfCF87k%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ä» 0 åˆ° 3 ä¸‡ç²‰ï¼šæˆ‘æœ€å…ˆå¡åœ¨â€œæ’ç‰ˆâ€</h2>
<p>æˆ‘å»å¹´å¼€å§‹çœŸæ­£æŠŠå…¬ä¼—å·å†™èµ·æ¥ï¼Œç›®å‰å…¨ç½‘å¤§æ¦‚ 3 ä¸‡ç²‰ä¸ã€‚</p>
<p>ä½†ä¸€å¼€å§‹å†™å…¬ä¼—å·ï¼Œæœ€æŠ˜ç£¨æˆ‘çš„ä¸æ˜¯é€‰é¢˜ï¼Œä¹Ÿä¸æ˜¯å†™ä½œæœ¬èº«ï¼Œè€Œæ˜¯ï¼šæ’ç‰ˆå·¥å…·ã€‚</p>
<p>å£¹ä¼´ã€markdownNice ç­‰ç­‰æˆ‘éƒ½è¯•è¿‡ï¼Œèƒ½ç”¨ï¼Œä½†æ€»è§‰å¾—ä¸è¶æ‰‹ã€‚</p>
<p>å› ä¸ºæˆ‘ä¹ æƒ¯åœ¨é£ä¹¦é‡Œå†™åº•ç¨¿ï¼Œæ‰€ä»¥æˆ‘å¹²è„†è‡ªå·±åšäº†ä¸€ä¸ªâ€œé£ä¹¦è½¬ Markdownâ€çš„å·¥å…·ï¼Œå¹¶å¼€æºäº†ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.larkmd.online%2F" target="_blank" title="https://www.larkmd.online/" ref="nofollow noopener noreferrer">www.larkmd.online/</a></p>
<p>å¾ˆå¤šäººä»¥ä¸ºâ€œè½¬ Markdownâ€å°±æ˜¯æŠŠå†…å®¹å¯¼å‡ºæ¥å°±è¡Œäº†ã€‚</p>
<p>ä½†å¾®ä¿¡ç¼–è¾‘å™¨å¹¶ä¸æ˜¯æ ‡å‡† HTML ç¼–è¾‘å™¨ï¼šè¡¨æ ¼ã€å›¾ç‰‡ã€åˆ—è¡¨ã€å¼•ç”¨ã€æºä»£ç å—â€¦â€¦éƒ½è¦ä¸€è½®è½®é€‚é…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/630ce5e9f1054e809c32f1b78a4f1a26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=YfFAcghwr3PUXadccsbHNT73Eos%3D" alt="" loading="lazy"/></p>
<p>åšå®Œè¿™ä¸ªå·¥å…·ï¼Œå¤§æ¦‚èŠ±äº†æˆ‘å¤§åŠä¸ªæœˆã€‚</p>
<p>ä¸Šçº¿ä¹‹åç¡®å®è§£å†³äº†æˆ‘è‡ªå·±çš„æ’ç‰ˆé—®é¢˜ï¼Œä¹Ÿæœ‰ä¸å°‘æœ‹å‹å¼€å§‹ç”¨ã€‚</p>
<p>ä½†å¾ˆå¿«ï¼Œæˆ‘é‡åˆ°äº†æ›´å¤§çš„éº»çƒ¦ã€‚</p>
<h2 data-id="heading-1">ä¸€ä¸ª Markdown ç¼–è¾‘å™¨è§£å†³ä¸äº†çš„äº‹ï¼šå¹³å°è§„åˆ™ä¸ä¸€æ ·</h2>
<p>åæ¥æˆ‘ä¸åªå‘å…¬ä¼—å·ï¼Œè¿˜è¦åŒæ­¥å‘çŸ¥ä¹ã€æ˜é‡‘ã€çŸ¥è¯†æ˜Ÿçƒç­‰å¹³å°ã€‚</p>
<p>ç—›ç‚¹ç¬é—´å˜æˆäº†ï¼š</p>
<p>ä½ å†™çš„æ˜¯åŒä¸€ç¯‡æ–‡ç« ï¼Œä½†æ¯ä¸ªå¹³å°éƒ½æœ‰è‡ªå·±çš„â€œè§„åˆ™â€ã€‚</p>
<ul>
<li>
<p>å…¬ä¼—å·å…è®¸ä½ è´´äºŒç»´ç ã€ç•™å¾®ä¿¡ï¼›å…¶ä»–å¹³å°ä¸å…è®¸ï¼Œä½ å¾—æ¢æ›´éšæ™¦çš„æ–¹å¼ã€‚</p>
</li>
<li>
<p>æœ‰çš„å¹³å°æ”¯æŒ Markdownï¼Œæœ‰çš„å¹³å°åªæ”¯æŒâ€œä¸å®Œå…¨çš„ HTMLâ€ã€‚</p>
</li>
<li>
<p>åŒæ ·æ˜¯å›¾ç‰‡ï¼Œåœ¨ä¸åŒç¼–è¾‘å™¨é‡Œè¡¨ç°ä¹Ÿä¸ä¸€æ ·ã€‚</p>
</li>
</ul>
<p>è¿™ä¸æ˜¯ä¸€ä¸ªâ€œæ›´å¥½ç”¨çš„åœ¨çº¿ Markdown ç¼–è¾‘å™¨â€å°±èƒ½è§£å†³çš„ã€‚</p>
<p>äºæ˜¯æˆ‘åšäº†å­—æµçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚</p>
<h2 data-id="heading-2">å­—æµ 1.0ï¼šå¹³å°é¢„è§ˆ + Chrome æ’ä»¶ä¸€é”®å¡«å……</h2>
<p>å­—æµ 1.0 çš„æ ¸å¿ƒå½¢æ€æ˜¯ï¼šå¹³å°é¢„è§ˆ + Chrome æ’ä»¶ä¸€é”®å¡«å……ã€‚</p>
<p>åŸå› ä¹Ÿå¾ˆç°å®ï¼šå¤§éƒ¨åˆ†å¹³å°çš„å‘å¸ƒ API å¹¶ä¸å…¬å¼€ï¼Œæƒ³åšä¸€é”®å‘å¸ƒæ˜¯å¾ˆéš¾çš„äº‹æƒ…ã€‚</p>
<p>æ—¢ç„¶æ²¡æ³•â€œèµ°æ¥å£â€ï¼Œé‚£å°±åªèƒ½â€œèµ°ç¼–è¾‘å™¨â€ã€‚</p>
<p>è€Œä¸”ç™»å½•æ€æ‰“é€šæœ¬èº«å°±å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æ’ä»¶å½¢æ€å‡ ä¹æ˜¯å¿…ç„¶é€‰æ‹©ã€‚</p>
<p>åœ¨ 1.0 é‡Œï¼Œæˆ‘åŠ å…¥äº†ä¸€ä¸ªç‰¹åˆ«å…³é”®çš„åŠŸèƒ½ï¼šé¢„è®¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25f0c824a3aa4e8199771ffa81b3b272~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=DZwD8vqcrAAuy5%2FnKAlDqDsDIDw%3D" alt="" loading="lazy"/></p>
<p>å®ƒè§£å†³çš„äº‹æƒ…æ˜¯ï¼šåŒä¸€ç¯‡æ–‡ç« ï¼Œä¸åŒå¹³å°çš„å¼€å¤´/ç»“å°¾å†…å®¹ä¸ä¸€æ ·ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>
<p>å…¬ä¼—å·ï¼šå¯ä»¥ç›´æ¥æ”¾äºŒç»´ç ã€å¼•å¯¼åŠ å¾®ä¿¡ã€‚</p>
</li>
<li>
<p>çŸ¥ä¹/æ˜é‡‘ï¼šå¾—æ¢ä¸€ç§æ›´â€œå¹³å°å‹å¥½â€çš„å¼•å¯¼æ–¹å¼ã€‚</p>
</li>
</ul>
<p>æ‰€ä»¥æˆ‘ç»™æ¯ä¸ªå¹³å°å®šä¹‰äº†ä¸åŒçš„å¼€å¤´å’Œç»“å°¾ï¼Œè¿˜æ”¯æŒåŠ¨æ€è¯­æ³•ã€‚</p>
<p>æˆ‘çš„å†™ä½œå†…å®¹ä¿æŒä¸å˜ï¼Œæ’ä»¶ä¼šæ ¹æ®å¹³å°è‡ªåŠ¨å¡«å……å¯¹åº”çš„å¼€å¤´/ç»“å°¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53f57ca5a9d243178a298da240edc3bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=oYsl8TmMb5q9qeWnelIeJ3YafUU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">è§£å†³çŸ¥è¯†æ˜Ÿçƒï¼šæ‰¹é‡å‘å¸ƒï¼Œä¸å†â€œå‘åˆ°å¤©è’åœ°è€â€</h2>
<p>å­—æµ 1.0 é‡Œå¦ä¸€ä¸ªè®©æˆ‘çˆ½åˆ°çš„ç‚¹ï¼Œæ˜¯æŠŠçŸ¥è¯†æ˜Ÿçƒçš„å‘å¸ƒä¹Ÿå½»åº•è§£å†³äº†ã€‚</p>
<p>å› ä¸ºæˆ‘éœ€è¦åŒæ—¶å‘å¤šä¸ªæ˜Ÿçƒï¼Œå¦‚æœæ‰‹åŠ¨ä¸€ä¸ªä¸ªå‘ï¼ŒçœŸçš„ä¼šå‘åˆ°å¤©è’åœ°è€ã€‚</p>
<p>æ’ä»¶æ”¯æŒæ‰¹é‡å‘å¸ƒä¹‹åï¼Œæ•ˆç‡ç›´æ¥èµ·é£ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/552e6d7556084cc1a92e1899bfa98e94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=4Q0c%2Bpr%2B52xqqVUmwe8fWStkKxk%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œè¿™å—å¹¶ä¸è½»æ¾ã€‚</p>
<p>ä½ è¦å¯¹æŠ—å¹³å°é£æ§é€»è¾‘ï¼Œè¿˜è¦å¤„ç†å¤æ‚çš„å›¾åºŠé—®é¢˜ã€‚</p>
<p>å¾ˆå¤šåœ°æ–¹éƒ½æ˜¯â€œè¸©å‘â€”ä¿®å¤â€”å†è¸©å‘â€”å†ä¿®å¤â€çš„å¾ªç¯ã€‚</p>
<h2 data-id="heading-4">åšè§†é¢‘ä¹‹åï¼Œéº»çƒ¦åˆå‡çº§ï¼šå£æ’­ç¨¿ + å¤šå¹³å°å­—æ®µå·®å¼‚</h2>
<p>å†åæ¥æˆ‘å¼€å§‹åšè§†é¢‘å·ï¼Œåˆé‡åˆ°äº†ä¸€ä¸ªæ›´å¤§çš„éº»çƒ¦ï¼šè§†é¢‘å¹³å°ä¹Ÿå¾ˆå¤šã€‚</p>
<p>ä½†æˆ‘ä¸å¯èƒ½ä¸ºæ¯ä¸ªå¹³å°å•ç‹¬åšé€‰é¢˜ï¼Œæœ€ç†æƒ³çš„æ–¹å¼å½“ç„¶æ˜¯ï¼šå¤ç”¨å…¬ä¼—å·æ–‡ç« å†…å®¹ï¼Œä¸€æ¬¡ç”Ÿäº§ï¼Œå¤šç«¯åˆ†å‘ã€‚</p>
<p>äºæ˜¯æˆ‘åˆèŠ±äº†å¾ˆå¤šæ—¶é—´ï¼ŒæŠŠè§†é¢‘å·ã€æŠ–éŸ³ã€å°çº¢ä¹¦ã€B ç«™é€‚é…äº†ã€‚</p>
<p>åšçš„äº‹æƒ…ä¸»è¦æœ‰ä¸¤ç±»ï¼š</p>
<ol>
<li>
<p>è‡ªåŠ¨ç”Ÿæˆå£æ’­ç¨¿ï¼ˆAI é€‚é…å¹³å°é£æ ¼ï¼‰</p>
</li>
<li>
<p>è‡ªåŠ¨ç”Ÿæˆä¸åŒå¹³å°çš„æ ‡é¢˜ã€æè¿°ã€æ ‡ç­¾ã€å°é¢ï¼Œå¹¶ä¸€é”®å¡«å……</p>
</li>
</ol>
<p>æ¯”å¦‚è¿™æ˜¯è§†é¢‘å·çš„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ebf0b3ad4ab4c56b5e53d05dcf5419f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=Kq3fckR8Skavu3Ae8RTXT4VLddM%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯æŠ–éŸ³çš„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ccdbb76548548e0a83c612710e9cd66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=8ijag2k0TcQTiHMNQ%2FBkfNqjv7E%3D" alt="" loading="lazy"/></p>
<p>å°çº¢ä¹¦å’Œ B ç«™æ˜¯æœ€å¤æ‚çš„ä¸¤ä¸ªï¼š</p>
<ul>
<li>
<p>å°çº¢ä¹¦éå¸¸ä¾èµ–å°é¢å’Œæ ‡ç­¾ã€‚</p>
</li>
<li>
<p>B ç«™çš„æ ‡é¢˜/æè¿°é£æ ¼ã€æ ‡ç­¾å¡«å†™éƒ½å¾ˆéº»çƒ¦ã€‚</p>
</li>
<li>
<p>B ç«™å°é¢è¿˜æœ‰ä¸åŒæ ¼å¼ã€‚</p>
</li>
</ul>
<p>é€‚é…è¿™ä¸¤ä¸ªå¹³å°ï¼Œä¹Ÿæ˜¯åœ¨åé¢ä¸€ç‚¹ç‚¹ç£¨å‡ºæ¥çš„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7ffdd61fc07415094133d88cd4bfcf1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=nL%2BLliTd2wpOF%2BYFpaw%2BH6E95Bc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1ff87bd39f849778218c39a1344301c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=Pa2x8YU721IDyB3lNLzUqtVoXhw%3D" alt="" loading="lazy"/></p>
<p>åæ¥æˆ‘åˆåŠ äº† YouTubeï¼Œè¿™æ ·ä¸€ä¸ªè§†é¢‘å°±å¯ä»¥ç›´æ¥ä¼ åˆ° 5 ä¸ªå¹³å°äº†ã€‚</p>
<p>ä¸è¿‡è¿™ä¸ªé˜¶æ®µä¹Ÿæœ‰ç‚¹å‘½é€”å¤šèˆ›ï¼šæ­£å¥½èµ¶ä¸Šæˆ‘å‡ºæ¥åˆ›ä¸šï¼Œæç½®äº†å¾ˆä¹…ã€‚</p>
<p>æœ‰äº›å° bug ä¹Ÿæ¥ä¸åŠä¿®ï¼Œæˆ‘å§‘ä¸”å«å®ƒ 1.5 ç‰ˆæœ¬ã€‚</p>
<p>æˆ‘å½“æ—¶ä¹Ÿæ²¡æ€ä¹ˆæ¨å¹¿ï¼Œä¸»è¦æ˜¯è‡ªå·±åœ¨ç”¨ã€‚</p>
<h2 data-id="heading-5">ä¸ºä»€ä¹ˆåš 2.0ï¼šæˆ‘éœ€è¦æŠŠä¸ªäºº IP çš„åŒæ­¥â€œç³»ç»ŸåŒ–â€</h2>
<p>åé¢æˆ‘ä¸“å¿ƒæ AI ç¼–ç¨‹å‡ºæµ·ï¼Œ12 æœˆæ‹¿åˆ°äº†ä¸€ä¸ªå°å°çš„ç»“æœï¼Œ0-1 è·‘é€šäº†ã€‚</p>
<p>æˆ‘è§‰å¾—æ˜¯æ—¶å€™æŠŠä¸ªäºº IP çš„åŒæ­¥ä¹ŸçœŸæ­£åšèµ·æ¥ã€‚</p>
<p>å¯¹äºå‡ºæµ·æ¥è¯´ï¼ŒTwitter åŸºæœ¬æ˜¯å¿…åšçš„ï¼›å›½å†…è¿™è¾¹ï¼Œå°ç»¿ä¹¦ç°åœ¨æµé‡ä¹Ÿä¸é”™ï¼›åšäº§å“çš„äººå¾ˆå¤šåœ¨å³åˆ»ï¼›å¾®åšä¾æ—§æ˜¯ä¸€ä¸ªé‡è¦çš„åˆ†å‘æ¸ é“ã€‚</p>
<p>æ‰€ä»¥æœ€è¿‘æˆ‘åˆåŠ å…¥äº† 5 ä¸ªçŸ­å›¾æ–‡å¹³å°çš„æ”¯æŒï¼š</p>
<ul>
<li>
<p>å°ç»¿ä¹¦</p>
</li>
<li>
<p>å°çº¢ä¹¦</p>
</li>
<li>
<p>å¾®åš</p>
</li>
<li>
<p>å³åˆ»</p>
</li>
<li>
<p>Twitter</p>
</li>
</ul>
<p>åŒæ ·ï¼Œæ ¸å¿ƒä¾ç„¶æ˜¯ï¼šå­—æ®µå·®å¼‚ + å°é¢å·®å¼‚ + ä¸€é”®å¡«å……ã€‚</p>
<p>æ¯”å¦‚å°ç»¿ä¹¦çš„ç”Ÿæˆï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba4a7b4ec20e4283bca836590526c304~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=jO4rOhjQmeZKiJwNYNbGBTM82vc%3D" alt="" loading="lazy"/></p>
<p>å°çº¢ä¹¦å°é¢å’Œæ ‡ç­¾è‡ªåŠ¨æ’å…¥ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/722cce57daff40ee8d522478318359b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=Tnt9QBXFj9YEAehKQojVH4%2F18rI%3D" alt="" loading="lazy"/></p>
<p>å¾®åš/å³åˆ»æ’å…¥ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1de573b2740f4ad79c84f65f7ed0d65f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=1jQGtxfpR73I4%2FqIuc1GM9t4QC4%3D" alt="" loading="lazy"/></p>
<p>Twitter çš„æ’å…¥ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fbb140b1ca948a9b06e0a3f21abe58e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=lES86GwZoKeUrG3ozkY%2BcR5zDxE%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶ï¼Œæˆ‘æŠŠæ¨¡å‹ä¹Ÿå‡çº§åˆ°äº†ç°åœ¨æœ€å¼ºçš„ GPT-5.2 å’Œ Nano Banana Proï¼Œå¹¶æŠŠæ•´ä½“æç¤ºè¯ç³»ç»Ÿæ€§ä¼˜åŒ–äº†ä¸€æ³¢ï¼Œå‘å¸ƒäº†å…¨æ–°çš„å­—æµ 2.0ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ziliu.online%2F" target="_blank" title="https://www.ziliu.online/" ref="nofollow noopener noreferrer">www.ziliu.online/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a9dd76489ef4c11979903bf1486d6bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769333000&amp;x-signature=sSwNxbGJfojL9cOyGRb%2F6vc6SiI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ç°åœ¨å­—æµæ”¯æŒå“ªäº›å¹³å°ï¼Ÿ</h2>
<p>åˆ° 2.0 ä¸ºæ­¢ï¼Œå­—æµå®Œæ•´æ”¯æŒï¼š</p>
<ul>
<li>
<p>4 ä¸ªé•¿æ–‡å¹³å°ï¼ˆå…¬ä¼—å·ã€çŸ¥ä¹ã€æ˜é‡‘ã€çŸ¥è¯†æ˜Ÿçƒï¼‰</p>
</li>
<li>
<p>5 ä¸ªçŸ­å›¾æ–‡å¹³å°ï¼ˆå°ç»¿ä¹¦ã€å°çº¢ä¹¦å›¾æ–‡ã€å¾®åšã€å³åˆ»ã€Twitterï¼‰</p>
</li>
<li>
<p>5 ä¸ªè§†é¢‘å¹³å°ï¼ˆè§†é¢‘å·ã€æŠ–éŸ³ã€å°çº¢ä¹¦è§†é¢‘ã€B ç«™ã€Youtubeï¼‰</p>
</li>
</ul>
<p>å…± 14 ä¸ªå¹³å°ã€‚</p>
<p>æˆ‘è®¤ä¸ºå®ƒå·²ç»åŸºæœ¬è¦†ç›–äº†æˆ‘æƒ³åšçš„æ‰€æœ‰ä¸ªäºº IP åˆ†å‘é˜µåœ°ã€‚</p>
<h2 data-id="heading-7">æˆ‘ç°åœ¨çš„å·¥ä½œæµï¼š14 å¹³å°å‘å¸ƒæ§åˆ¶åœ¨ 10 åˆ†é’Ÿ</h2>
<p>æˆ‘ç°åœ¨çš„ä¸ªäººå·¥ä½œæµå¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<p>åœ¨é£ä¹¦ä¸Šå†™å®Œåˆç¨¿ â†’ é€šè¿‡ AI çŸ¥è¯†åº“åšæ¶¦è‰² â†’ ä¸€é”®å¯¼å…¥å­—æµ â†’ å‘å¸ƒ 4 ä¸ªé•¿æ–‡å¹³å° + 4 ä¸ªçŸ­å›¾æ–‡å¹³å°ã€‚</p>
<p>ç„¶åï¼š</p>
<p>é€šè¿‡å­—æµç”Ÿæˆçš„å£æ’­ç¨¿å»æ‹çŸ­è§†é¢‘ï¼Œå‰ªè¾‘å¥½ä¹‹åï¼Œå†é€šè¿‡å­—æµï¼Œä¸€é”®ä¸Šä¼ åˆ° 5 ä¸ªè§†é¢‘å¹³å°ã€‚</p>
<p>ä»…ç®—â€œå‘å¸ƒâ€è¿™ä¸ªåŠ¨ä½œï¼Œ14 ä¸ªå¹³å°çš„åˆ†å‘æµç¨‹å¯ä»¥æ§åˆ¶åœ¨ 10 åˆ†é’Ÿä»¥å†…ã€‚</p>
<p>å› ä¸ºæˆ‘åš AI ç¼–ç¨‹å‡ºæµ·å¾ˆå¿™ï¼Œä¸ªäºº IP çš„æ—¶é—´åˆ†é…ä¸ŠåŸºæœ¬åªæœ‰ 1-2 å°æ—¶ã€‚</p>
<p>æ‰€ä»¥è¿™æ¬¾å·¥å…·å¯¹æˆ‘æ¥è¯´æ˜¯æå¤§åœ°ææ•ˆã€‚</p>
<h2 data-id="heading-8">æˆ‘æƒ³è¡¨è¾¾çš„æ ¸å¿ƒï¼šæŠŠæ•ˆç‡æ æ†æœ€å¤§åŒ–</h2>
<p>æˆ‘è¶Šæ¥è¶Šè§‰å¾—ï¼Œåœ¨ AI æ—¶ä»£ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠæ•ˆç‡æ æ†æœ€å¤§åŒ–ã€‚</p>
<p>æ’ç‰ˆå‘å¸ƒè¿™ç§ç»†ææœ«èŠ‚çš„äº‹æƒ…ï¼Œä¸åº”è¯¥å æ®åˆ›ä½œè€…çš„æ—¶é—´ã€‚</p>
<p>æˆ‘ä»¬æ›´åº”è¯¥æŠŠç²¾åŠ›ç”¨åœ¨ï¼šå†…å®¹åˆ›ä½œã€è¡¨è¾¾èƒ½åŠ›ã€è®¤çŸ¥è¿­ä»£ã€‚</p>
<p>æŠŠé‚£äº›ç¹ççš„é‡å¤åŠ³åŠ¨äº¤ç»™ AI å‘˜å·¥ï¼Œè¿™å°±æ˜¯ä¸€ç§æ›´å…¸å‹çš„ AI Native ä¸€äººå…¬å¸ã€‚</p>
<h2 data-id="heading-9">æœ€åï¼šä»·æ ¼ã€ä½“éªŒæ–¹å¼ï¼Œä»¥åŠ 3.0 çš„æ–¹å‘</h2>
<p>å­—æµåšèµ·æ¥å¹¶ä¸å®¹æ˜“ï¼Œè¸©äº†å¾ˆå¤šå‘ã€‚</p>
<p>2.0 åŸºæœ¬è§£å†³äº†æˆ‘ä¸ªäºº IP çš„æ•ˆç‡é—®é¢˜ã€‚</p>
<p>ç›®å‰ä»·æ ¼è¿˜æ˜¯ç¬¬ä¸€ç‰ˆçš„ä»·æ ¼ï¼š19.9/æœˆï¼Œ199/å¹´ï¼Œå·²ç»éå¸¸ä¾¿å®œäº†ã€‚</p>
<p>å¦‚æœä½ æƒ³ä½“éªŒï¼Œå¯ä»¥ç›´æ¥åŠ æˆ‘ï¼ˆæˆ‘ä¹Ÿå¾ˆå¸Œæœ›å¬åˆ°ä½ çœŸå®çš„åæ§½å’Œéœ€æ±‚ï¼‰ã€‚</p>
<p>å½“ç„¶ï¼Œ2.0 ä¹Ÿä¸èƒ½è¯´å®Œç¾ã€‚</p>
<p>æˆ‘æ›´å¸Œæœ›æœªæ¥èƒ½æŠŠç™»å½•æ€æ‰“é€šï¼ŒæŠŠæ‰€æœ‰çš„æ•°æ®ä¹Ÿæ‰“é€šï¼Œè®©â€œç™»å½•å‘å¸ƒ + æ•°æ®å¤ç›˜â€é“¾è·¯çœŸæ­£é—­ç¯ã€‚</p>
<p>ä½†è¿™ä»¶äº‹éš¾åº¦ä¸ä½ã€‚</p>
<p>å¦‚æœæˆ‘åˆ›ä¸šèŠ‚å¥ç¨³å®šä¸‹æ¥ï¼Œæˆ‘é¢„è®¡ä¼šåœ¨ 2026 å¹´ä¸‹åŠå¹´å¯åŠ¨åšè¿™ä»¶äº‹ï¼Œå±Šæ—¶å¯èƒ½å‘å¸ƒ 3.0ã€‚</p>
<p>å¤§å®¶æ•¬è¯·æœŸå¾…ã€‚</p>
<hr/>
<p>ğŸš€ æƒ³è¦ä¸æ›´å¤šAIçˆ±å¥½è€…äº¤æµï¼Œå…±åŒæˆé•¿å—ï¼Ÿ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FZ4k_5_waWJbRRo5lZBZmog" target="_blank" title="https://mp.weixin.qq.com/s/Z4k_5_waWJbRRo5lZBZmog" ref="nofollow noopener noreferrer">å’Œä¸€ç¾¤å¿—åŒé“åˆçš„äººï¼ŒæŒç»­ç²¾è¿› AI çš„æ¯ä¸€å¤©</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ES6 åˆ° ES11 æ ¸å¿ƒç‰¹æ€§ç²¾è¦ï¼šåªè®²å¯¹ä½ ç°ä»£ JavaScript å¼€å‘çœŸæ­£å¸¸ç”¨çš„é‚£éƒ¨åˆ†]]></title>    <link>https://juejin.cn/post/7595960824486182946</link>    <guid>https://juejin.cn/post/7595960824486182946</guid>    <pubDate>2026-01-18T08:50:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595960824486182946" data-draft-id="7595837635560079394" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ES6 åˆ° ES11 æ ¸å¿ƒç‰¹æ€§ç²¾è¦ï¼šåªè®²å¯¹ä½ ç°ä»£ JavaScript å¼€å‘çœŸæ­£å¸¸ç”¨çš„é‚£éƒ¨åˆ†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-18T08:50:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è°è¨€è¥¿è¥¿é‡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/332466136029851"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ES6 åˆ° ES11 æ ¸å¿ƒç‰¹æ€§ç²¾è¦ï¼šåªè®²å¯¹ä½ ç°ä»£ JavaScript å¼€å‘çœŸæ­£å¸¸ç”¨çš„é‚£éƒ¨åˆ†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/332466136029851/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è°è¨€è¥¿è¥¿é‡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T08:50:00.000Z" title="Sun Jan 18 2026 08:50:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼š</h2>
<p>ä» <strong>ES6</strong>ï¼ˆES2015ï¼‰åˆ° <strong>ES11</strong>ï¼ˆES2020ï¼‰æ˜¯ JavaScript è¯­è¨€ç°ä»£åŒ–çš„å…³é”®é˜¶æ®µï¼ŒæŒç»­å¼•å…¥ç²¾å·§è€Œå®ç”¨çš„æ–°ç‰¹æ€§ï¼Œä½¿å¼€å‘è€…çš„å¼€å‘æ•ˆç‡ã€ä»£ç å¯è¯»æ€§ä¸è¿è¡Œæ—¶å®‰å…¨æ€§éƒ½å¤§å¤§æå‡äº†ã€‚</p>
<p>è€Œæœ¬æ–‡æ—¨åœ¨ç³»ç»Ÿæ¢³ç† ES6 è‡³ ES11 ä¸­<strong>æœ€å…·å½±å“åŠ›ä¸å®ç”¨ä»·å€¼çš„æ ¸å¿ƒç‰¹æ€§</strong>ï¼Œèšç„¦é‚£äº›è¢«å¹¿æ³›é‡‡çº³ã€æ·±åˆ»æ”¹å˜æ—¥å¸¸ç¼–ç ä¹ æƒ¯çš„è¯­è¨€é©æ–°ã€‚ç†è§£è¿™äº›ç‰¹æ€§èƒŒåçš„åŠ¨æœºä¸åº”ç”¨åœºæ™¯ï¼Œéƒ½å°†å¸®åŠ©ä½ å†™å‡ºæ›´æ¸…æ™°ã€å¥å£®ä¸”å¯Œæœ‰è¡¨ç°åŠ›çš„ç°ä»£ JavaScript ä»£ç </p>
<h2 data-id="heading-1">ES6ï¼ˆES2015ï¼‰â€”â€” é©å‘½æ€§æ›´æ–°</h2>
<blockquote>
<p>å‡ ä¹æ‰€æœ‰ç°ä»£ JavaScript å¼€å‘éƒ½å»ºç«‹åœ¨ ES6 åŠå…¶åç»­ç‰ˆæœ¬ä¹‹ä¸Šã€‚ES6 ä¸ä»…æ˜¯ä¸€æ¬¡è¯­æ³•å‡çº§ï¼Œæ›´æ˜¯å¯¹è¯­è¨€è®¾è®¡å“²å­¦çš„é‡æ„ï¼Œä½¿ JavaScript æ›´é€‚åˆå¤§å‹åº”ç”¨å¼€å‘ã€‚</p>
</blockquote>
<h3 data-id="heading-2">1. <code>let</code> / <code>const</code>ï¼šå—çº§ä½œç”¨åŸŸå˜é‡</h3>
<h4 data-id="heading-3">å‡½æ•°ä½œç”¨åŸŸï¼š</h4>
<p>åœ¨ ES6 ä¹‹å‰ï¼ŒJavaScript <strong>åªæœ‰å‡½æ•°ä½œç”¨åŸŸï¼Œæ²¡æœ‰å—çº§ä½œç”¨åŸŸ</strong></p>
<blockquote>
<h5 data-id="heading-4">ä»€ä¹ˆæ˜¯å‡½æ•°ä½œç”¨åŸŸï¼Ÿ</h5>
<p>å˜é‡çš„ä½œç”¨åŸŸä»…ç”±Â <strong>å‡½æ•°è¾¹ç•Œ</strong>Â å†³å®šã€‚åœ¨å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡ï¼Œåœ¨æ•´ä¸ªå‡½æ•°ä½“å†…éƒ½å¯è§ï¼›åœ¨å‡½æ•°å¤–éƒ¨åˆ™ä¸å¯è§ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) { 
    <span class="hljs-keyword">var</span> x = <span class="hljs-number">1</span>; 
    <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) { 
        <span class="hljs-keyword">var</span> x = <span class="hljs-number">2</span>; <span class="hljs-comment">// é‡æ–°èµ‹å€¼ï¼Œä¸æ˜¯æ–°å˜é‡ï¼ </span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x); <span class="hljs-comment">// 2 </span>
    } 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x); <span class="hljs-comment">// 2 </span>
} 
<span class="hljs-title function_">foo</span>();
</code></pre>
<p>å³ä½¿ <code>var x = 2</code>å†™åœ¨<code>if</code>å—å†…éƒ¨ï¼Œä½†æ˜¯å…¶ä»ç„¶å±äº<code>foo</code>å‡½æ•°ä½œç”¨åŸŸï¼ˆ<strong><code>if</code>ã€<code>for</code>ã€<code>while</code>Â ç­‰è¯­å¥å—ä¸ä¼šåˆ›å»ºæ–°çš„ä½œç”¨åŸŸ</strong>ï¼‰</p>
<h4 data-id="heading-5">å¸¸è§é™·é˜±ï¼šå¾ªç¯ä¸­çš„é—­åŒ…é—®é¢˜</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) { 
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i); <span class="hljs-comment">// è¾“å‡º 3, 3, 3ï¼ˆè€Œä¸æ˜¯ 0,1,2ï¼‰ </span>
    }, <span class="hljs-number">100</span>); 
}
</code></pre>
<p><code>i</code>Â æ˜¯å‡½æ•°ä½œç”¨åŸŸå˜é‡ï¼Œä¸‰ä¸ªÂ <code>setTimeout</code>Â å›è°ƒå…±äº«åŒä¸€ä¸ªÂ <code>i</code>ï¼Œå½“å®ƒä»¬æ‰§è¡Œæ—¶ï¼Œå¾ªç¯æ—©å·²ç»“æŸï¼Œ<code>i</code>Â çš„å€¼å·²æ˜¯Â <code>3</code></p>
<blockquote>
<p>ES5 æ—¶ä»£è§£å†³æ–¹æ¡ˆï¼šç”¨ <strong>ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰</strong> åˆ›å»ºæ–°ä½œç”¨åŸŸ</p>
</blockquote>
<hr/>
<h4 data-id="heading-6">å˜é‡æå‡ï¼š</h4>
<p><strong>å˜é‡æå‡</strong>Â æ˜¯ JavaScript å¼•æ“åœ¨ä»£ç æ‰§è¡Œå‰çš„ä¸€ä¸ªâ€œé¢„å¤„ç†â€è¡Œä¸ºã€‚</p>
<blockquote>
<h5 data-id="heading-7">ä»€ä¹ˆæ˜¯å˜é‡æå‡ï¼Ÿ</h5>
<p>ä½¿ç”¨Â <code>var</code>Â å£°æ˜çš„å˜é‡å’ŒÂ <code>function</code>Â å£°æ˜çš„å‡½æ•°ï¼Œä¼šè¢«<strong>è‡ªåŠ¨ç§»åŠ¨åˆ°å…¶æ‰€åœ¨ä½œç”¨åŸŸçš„é¡¶éƒ¨</strong>ï¼ˆä»…å£°æ˜è¢«æå‡ï¼Œèµ‹å€¼ä¸ä¼šï¼‰ã€‚</p>
</blockquote>
<p><strong>ç¤ºä¾‹1ï¼šå˜é‡æå‡</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// undefinedï¼ˆä¸æ˜¯ ReferenceErrorï¼ï¼‰ </span>
<span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span>; 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// 10</span>
</code></pre>
<p>å°±ç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> a; <span class="hljs-comment">// å£°æ˜è¢«æå‡åˆ°é¡¶éƒ¨ </span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// undefinedï¼ˆæ­¤æ—¶æœªèµ‹å€¼ï¼‰ </span>
a = <span class="hljs-number">10</span>; <span class="hljs-comment">// èµ‹å€¼ç•™åœ¨åŸåœ° </span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// 10</span>
</code></pre>
<p><strong>ç¤ºä¾‹2ï¼šå‡½æ•°è¡¨è¾¾å¼ vs å‡½æ•°å£°æ˜</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å‡½æ•°å£°æ˜ â†’ å®Œæ•´æå‡ </span>
<span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// æ­£å¸¸æ‰§è¡Œ </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) { } 

<span class="hljs-comment">// å‡½æ•°è¡¨è¾¾å¼ â†’ åªæœ‰å˜é‡åæå‡ </span>
<span class="hljs-title function_">bar</span>(); <span class="hljs-comment">// TypeError: bar is not a function </span>
<span class="hljs-keyword">var</span> bar = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { };
</code></pre>
<h4 data-id="heading-8">å¸¸è§é™·é˜±ï¼šé®è”½</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> name = <span class="hljs-string">'xxl'</span>; 
<span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name); <span class="hljs-comment">// undefinedï¼ˆä¸æ˜¯ 'xxl'ï¼ï¼‰ </span>
    <span class="hljs-keyword">var</span> name = <span class="hljs-string">'Bob'</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name); <span class="hljs-comment">// 'Bob' </span>
} 
<span class="hljs-title function_">test</span>();
</code></pre>
<p>åŒ…è£¹åœ¨å‡½æ•°<code>test</code>å†…éƒ¨çš„å˜é‡ <code>var name</code>å˜é‡æå‡äº†å¯¼è‡´å±è”½äº†å¤–éƒ¨çš„<code>var name = 'xxl'</code></p>
<hr/>
<h4 data-id="heading-9">ğŸ” æ–°ç‰¹æ€§ :</h4>
<ul>
<li><code>let</code>ï¼šå£°æ˜<strong>å¯å˜</strong>çš„å—çº§ä½œç”¨åŸŸå˜é‡ã€‚</li>
<li><code>const</code>ï¼šå£°æ˜<strong>ä¸å¯é‡æ–°èµ‹å€¼</strong>çš„å—çº§ä½œç”¨åŸŸå¸¸é‡ï¼ˆæ³¨æ„ï¼šå¯¹è±¡/æ•°ç»„å†…å®¹ä»å¯ä¿®æ”¹ï¼‰ã€‚</li>
</ul>
<p>è™½ç„¶ä¼šå£°æ˜æå‡ï¼Œä½†<strong>ä¸åˆå§‹åŒ–</strong>ï¼ˆå­˜åœ¨â€œæš‚æ—¶æ€§æ­»åŒºâ€ï¼‰ï¼Œå¹¶ä¸”<strong>ä¸å…è®¸é‡å¤å£°æ˜</strong></p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x); <span class="hljs-comment">// ReferenceError!</span>
  <span class="hljs-keyword">let</span> x = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">const</span> y = <span class="hljs-number">2</span>;
  x = <span class="hljs-number">3</span>;      <span class="hljs-comment">// å…è®¸</span>
  <span class="hljs-comment">// y = 4;   // æŠ¥é”™ï¼šAssignment to constant variable</span>
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x); <span class="hljs-comment">// ReferenceError: x is not defined</span>
</code></pre>
<p>åœ¨ <code>let x</code>æ‰§è¡Œä¹‹å‰ï¼Œ<code>x</code>å¤„äº â€œæ­»åŒºâ€ï¼Œè®¿é—®ä¼šæŠ¥é”™ReferenceErrorï¼ˆè€Œä¸æ˜¯<code>undefined</code>ï¼‰</p>
<h4 data-id="heading-10">âš ï¸ å…³é”®ç‚¹</h4>
<ul>
<li><strong>å—çº§ä½œç”¨åŸŸ</strong>ï¼š<code>{}</code> å†…éƒ¨å³ä¸ºä¸€ä¸ªä½œç”¨åŸŸï¼ˆå¦‚ <code>if</code>ã€<code>for</code>ã€å‡½æ•°ä½“ï¼‰ã€‚</li>
<li><code>const</code> å¹¶éâ€œå®Œå…¨ä¸å¯å˜â€ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> };
obj.<span class="hljs-property">a</span> = <span class="hljs-number">2</span>; <span class="hljs-comment">// å…è®¸ï¼ˆä¿®æ”¹å±æ€§ï¼‰</span>
<span class="hljs-comment">// obj = {}; // ä¸å…è®¸ï¼ˆé‡æ–°èµ‹å€¼ï¼‰</span>
</code></pre>
<h4 data-id="heading-11">ä½¿ç”¨å»ºè®®</h4>
<ul>
<li>é»˜è®¤ä½¿ç”¨ <code>const</code>ï¼Œåªæœ‰éœ€è¦é‡æ–°èµ‹å€¼æ—¶æ‰ç”¨ <code>let</code>ã€‚</li>
<li>å®Œå…¨é¿å…ä½¿ç”¨ <code>var</code>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-12">2. ç®­å¤´å‡½æ•°ï¼ˆArrow Functionsï¼‰</h3>
<h4 data-id="heading-13">ğŸ” è¯­æ³•ç®€åŒ–</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ™®é€šå‡½æ•°</span>
<span class="hljs-keyword">const</span> add1 = <span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) { 
    <span class="hljs-keyword">return</span> a + b; 
};

<span class="hljs-comment">// ç®­å¤´å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">add2</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;

<span class="hljs-comment">// å•å‚æ•°å¯çœç•¥æ‹¬å·</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">square</span> = x =&gt; x * x;

<span class="hljs-comment">// æ— å‚æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">sayHi</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hi'</span>);
</code></pre>
<h4 data-id="heading-14">æ ¸å¿ƒä¼˜åŠ¿ï¼š<strong>ä¸ç»‘å®šè‡ªå·±çš„ <code>this</code></strong></h4>
<p>ç®­å¤´å‡½æ•°çš„ <code>this</code> ç»§æ‰¿è‡ª<strong>å¤–å±‚ä½œç”¨åŸŸ</strong>ï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰ï¼Œè§£å†³äº†å›è°ƒä¸­ <code>this</code> æŒ‡å‘ä¸¢å¤±çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Timer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">seconds</span> = <span class="hljs-number">0</span>;
  }
  <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ™®é€šå‡½æ•°ï¼šthis æŒ‡å‘ windowï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰æˆ– undefined</span>
    <span class="hljs-comment">// setInterval(function() { this.seconds++; }, 1000); // ä¸å¥½</span>

    <span class="hljs-comment">// ç®­å¤´å‡½æ•°ï¼šthis æŒ‡å‘ Timer å®ä¾‹</span>
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">seconds</span>++; <span class="hljs-comment">// æ­£ç¡®</span>
    }, <span class="hljs-number">1000</span>);
  }
}
</code></pre>
<h4 data-id="heading-15">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ï¼ˆæ—  <code>new.target</code>ï¼Œæ—  <code>prototype</code>ï¼‰ã€‚</li>
<li>æ²¡æœ‰ <code>arguments</code> å¯¹è±¡ã€‚</li>
<li>ä¸é€‚åˆéœ€è¦åŠ¨æ€ <code>this</code> çš„åœºæ™¯ï¼ˆå¦‚äº‹ä»¶å¤„ç†å™¨éœ€è®¿é—® DOM å…ƒç´ æ—¶ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-16">3. æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆTemplate Literalsï¼‰</h3>
<h4 data-id="heading-17">ğŸ” å¤šè¡Œå­—ç¬¦ä¸² + å­—ç¬¦ä¸²æ’å€¼</h4>
<p>ä½¿ç”¨åå¼•å· <code>`</code> åŒ…è£¹ï¼Œæ”¯æŒï¼š</p>
<ul>
<li>æ¢è¡Œï¼ˆä¿ç•™æ ¼å¼ï¼‰</li>
<li><code>${expression}</code> æ’å…¥å˜é‡æˆ–è¡¨è¾¾å¼</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> name = <span class="hljs-string">'Alice'</span>;
<span class="hljs-keyword">const</span> age = <span class="hljs-number">30</span>;

<span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ï¼ˆç¹çä¸”æ˜“é”™ï¼‰</span>
<span class="hljs-keyword">const</span> msg1 = <span class="hljs-string">'Hello '</span> + name + <span class="hljs-string">'!\nYou are '</span> + age + <span class="hljs-string">' years old.'</span>;

<span class="hljs-comment">// æ¨¡æ¿å­—ç¬¦ä¸²</span>
<span class="hljs-keyword">const</span> msg2 = <span class="hljs-string">`
Hello <span class="hljs-subst">${name}</span>!
You are <span class="hljs-subst">${age}</span> years old.
`</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg2);
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// Hello Alice!</span>
<span class="hljs-comment">// You are 30 years old.</span>
</code></pre>
<hr/>
<h3 data-id="heading-18">4. è§£æ„èµ‹å€¼ï¼ˆDestructuring Assignmentï¼‰</h3>
<h4 data-id="heading-19">ğŸ” ä» æ•°ç»„æˆ–å¯¹è±¡ ä¸­æå–æ•°æ®å¹¶èµ‹å€¼</h4>
<h5 data-id="heading-20">æ•°ç»„è§£æ„:</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> [a, b, c] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a, b, c); <span class="hljs-comment">// 1 2 3</span>

<span class="hljs-comment">// è·³è¿‡å…ƒç´ </span>
<span class="hljs-keyword">const</span> [x, , z] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; <span class="hljs-comment">// x=1, z=3</span>

<span class="hljs-comment">// é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> [p = <span class="hljs-number">10</span>, q = <span class="hljs-number">20</span>] = [<span class="hljs-number">5</span>]; <span class="hljs-comment">// p=5, q=20</span>
</code></pre>
<h5 data-id="heading-21">å¯¹è±¡è§£æ„</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> };

<span class="hljs-comment">// åŸºæœ¬è§£æ„</span>
<span class="hljs-keyword">const</span> { name, age } = user;

<span class="hljs-comment">// é‡å‘½å</span>
<span class="hljs-keyword">const</span> { <span class="hljs-attr">name</span>: userName, <span class="hljs-attr">age</span>: userAge } = user;

<span class="hljs-comment">// é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> { email = <span class="hljs-string">'unknown@qq.com'</span> } = user; <span class="hljs-comment">// å¦‚æœuserä¸­åŒ…å«emailï¼Œé‚£ä¹ˆè¿™é‡Œçš„é»˜è®¤å€¼å°±ä¼šè¢«å¿½ç•¥</span>
<span class="hljs-comment">// å³ user.email === undefined ? 'unknown@qq.com' : user.email</span>
</code></pre>
<h4 data-id="heading-22">å¸¸è§åº”ç”¨åœºæ™¯</h4>
<ul>
<li>
<p>å‡½æ•°å‚æ•°è§£æ„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">{ name, age }</span>) {
  <span class="hljs-keyword">return</span> { name, age };
}
<span class="hljs-title function_">createUser</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> });
</code></pre>
</li>
<li>
<p>äº¤æ¢å˜é‡ï¼š</p>
<pre><code class="hljs language-js" lang="js">[a, b] = [b, a];
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-23">5. æ¨¡å—åŒ–ï¼ˆModulesï¼‰</h3>
<h4 data-id="heading-24">ğŸ” ä½¿ç”¨ <code>import</code> / <code>export</code> å®ç°ä»£ç åˆ†å‰²ä¸å¤ç”¨</h4>
<h5 data-id="heading-25">å¯¼å‡ºï¼ˆexportï¼‰</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// utils.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PI</span> = <span class="hljs-number">3.14</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> { } <span class="hljs-comment">// é»˜è®¤å¯¼å‡ºï¼ˆä¸€ä¸ªæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ªï¼‰</span>
</code></pre>
<h5 data-id="heading-26">å¯¼å…¥ï¼ˆimportï¼‰</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Calculator</span>, { <span class="hljs-variable constant_">PI</span>, add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.js'</span>;

<span class="hljs-comment">// é‡å‘½å</span>
<span class="hljs-keyword">import</span> { add <span class="hljs-keyword">as</span> sum } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.js'</span>;

<span class="hljs-comment">// å¯¼å…¥æ‰€æœ‰</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> utils <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.js'</span>;
</code></pre>
<h4 data-id="heading-27">ä¼˜åŠ¿</h4>
<ul>
<li>æ˜ç¡®ä¾èµ–å…³ç³»</li>
<li>é¿å…å…¨å±€æ±¡æŸ“</li>
</ul>
<hr/>
<h3 data-id="heading-28">6. Promiseï¼šç»Ÿä¸€å¼‚æ­¥å¤„ç†</h3>
<h4 data-id="heading-29">ğŸ” è§£å†³â€œå›è°ƒåœ°ç‹±â€ï¼ˆCallback Hellï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å›è°ƒåœ°ç‹±ï¼ˆéš¾ä»¥ç»´æŠ¤ï¼‰</span>
<span class="hljs-title function_">getData</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>) {
  <span class="hljs-title function_">getMoreData</span>(a, <span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>) {
    <span class="hljs-title function_">getEvenMoreData</span>(b, <span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>) {
      <span class="hljs-comment">// ...</span>
    });
  });
});

<span class="hljs-comment">// Promise é“¾å¼è°ƒç”¨</span>
<span class="hljs-title function_">getData</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-title function_">getMoreData</span>(a))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">b</span> =&gt;</span> <span class="hljs-title function_">getEvenMoreData</span>(b))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> { <span class="hljs-comment">/* ... */</span> })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err));
</code></pre>
<h4 data-id="heading-30">æ ¸å¿ƒæ–¹æ³•</h4>
<ul>
<li><code>.then()</code>ï¼šå¤„ç†æˆåŠŸç»“æœ</li>
<li><code>.catch()</code>ï¼šæ•è·é”™è¯¯</li>
<li><code>.finally()</code>ï¼ˆES2018ï¼‰ï¼šæ— è®ºæˆåŠŸ/å¤±è´¥éƒ½æ‰§è¡Œ</li>
</ul>
<hr/>
<h3 data-id="heading-31">7. ç±»ï¼ˆClassï¼‰</h3>
<h4 data-id="heading-32">ğŸ” è¯­æ³•ç³–ï¼Œæ›´æ¸…æ™°çš„é¢å‘å¯¹è±¡å†™æ³•</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">speak</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> makes a noise.`</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> { <span class="hljs-comment">// extends è´Ÿè´£ç»§æ‰¿</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, breed</span>) {
    <span class="hljs-variable language_">super</span>(name); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">breed</span> = breed;
  }

  <span class="hljs-title function_">speak</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> barks.`</span>); <span class="hljs-comment">// æ–¹æ³•é‡å†™</span>
  }
}
</code></pre>
<h4 data-id="heading-33">ä¼˜åŠ¿</h4>
<ul>
<li>ä»£ç æ›´æ˜“è¯»ã€æ›´æ¥è¿‘å…¶ä»– OOP è¯­è¨€ã€‚</li>
<li>é¿å…æ‰‹åŠ¨æ“ä½œ <code>prototype</code> çš„å¤æ‚æ€§ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-34">8. é»˜è®¤å‚æ•° &amp; å‰©ä½™/å±•å¼€è¿ç®—ç¬¦ï¼ˆRest/Spreadï¼‰</h3>
<h4 data-id="heading-35">é»˜è®¤å‚æ•°</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name = <span class="hljs-string">'Guest'</span>, greeting = <span class="hljs-string">'Hello'</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${greeting}</span>, <span class="hljs-subst">${name}</span>!`</span>;
}

<span class="hljs-title function_">greet</span>(); <span class="hljs-comment">// "Hello, Guest!"</span>
<span class="hljs-title function_">greet</span>(<span class="hljs-string">'Alice'</span>); <span class="hljs-comment">// "Hello, Alice!"</span>
</code></pre>
<h4 data-id="heading-36">ğŸ” å‰©ä½™å‚æ•°ï¼ˆRest Parametersï¼‰</h4>
<p>å°†å¤šä¸ªå‚æ•°æ”¶é›†ä¸ºæ•°ç»„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">...numbers</span>) {
  <span class="hljs-keyword">return</span> numbers.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);
}

<span class="hljs-title function_">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>); <span class="hljs-comment">// numbers = [1, 2, 3, 4]</span>
</code></pre>
<h4 data-id="heading-37">ğŸ” å±•å¼€è¿ç®—ç¬¦ï¼ˆSpread Syntaxï¼‰</h4>
<p>å°†æ•°ç»„/å¯¹è±¡å±•å¼€ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ•°ç»„</span>
<span class="hljs-keyword">const</span> arr1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];
<span class="hljs-keyword">const</span> arr2 = [...arr1, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]; <span class="hljs-comment">// [1, 2, 3, 4]</span>

<span class="hljs-comment">// å‡½æ•°è°ƒç”¨</span>
<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...arr1); <span class="hljs-comment">// ç­‰ä»·äº Math.max(1, 2)</span>
</code></pre>
<h4 data-id="heading-38">åº”ç”¨åœºæ™¯</h4>
<ul>
<li>æµ…æ‹·è´æ•°ç»„/å¯¹è±¡</li>
<li>åˆå¹¶æ•°æ®</li>
<li>çµæ´»å¤„ç†å‡½æ•°å‚æ•°</li>
</ul>
<h2 data-id="heading-39">ES7ï¼ˆES2016ï¼‰â€”â€” ç²¾ç®€è€Œå®ç”¨çš„å¢å¼º</h2>
<blockquote>
<p>ES7 å¹¶æ²¡æœ‰åƒ ES6 é‚£æ ·å¸¦æ¥é©å‘½æ€§å˜åŒ–ï¼Œè€Œæ˜¯èšç„¦äºè§£å†³æ—¥å¸¸å¼€å‘ä¸­çš„å°ç—›ç‚¹ï¼Œæå‡ä»£ç å¯è¯»æ€§ä¸è¡¨è¾¾åŠ›ã€‚</p>
</blockquote>
<h3 data-id="heading-40">1. <code>Array.prototype.includes()</code>ï¼šåˆ¤æ–­æ•°ç»„æ˜¯å¦åŒ…å«æŸä¸ªå€¼</h3>
<h4 data-id="heading-41">èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</h4>
<p>åœ¨ ES7 ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨Â <code>indexOf</code>Â åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">if</span> ([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">indexOf</span>(<span class="hljs-number">2</span>) !== -<span class="hljs-number">1</span>) { 
    <span class="hljs-comment">// å­˜åœ¨ </span>
}
</code></pre>
<p>ä½†æ˜¯è¿™ç§æ–¹å¼ï¼š</p>
<ul>
<li><strong>è¯­ä¹‰ä¸æ¸…æ™°</strong>ï¼š<code>indexOf</code>Â è¿”å›ç´¢å¼•ï¼Œéœ€é¢å¤–åˆ¤æ–­æ˜¯å¦ä¸ºÂ <code>-1</code></li>
<li><strong>æ— æ³•æ­£ç¡®å¤„ç†Â <code>NaN</code></strong>ï¼š
<pre><code class="hljs language-js" lang="js">[<span class="hljs-title class_">NaN</span>].<span class="hljs-title function_">indexOf</span>(<span class="hljs-title class_">NaN</span>); <span class="hljs-comment">// -1ï¼ˆé”™è¯¯ï¼ï¼‰</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-42">ğŸ” <code>includes()</code>Â çš„ä¼˜åŠ¿ï¼š</h4>
<ul>
<li><strong>è¯­ä¹‰æ˜ç¡®</strong>ï¼šç›´æ¥è¿”å›Â <code>true</code>/<code>false</code></li>
<li><strong>èƒ½æ­£ç¡®è¯†åˆ«Â <code>NaN</code></strong></li>
<li><strong>æ”¯æŒÂ <code>fromIndex</code>Â å‚æ•°</strong>ï¼ˆä»æŒ‡å®šä½ç½®å¼€å§‹æœç´¢ï¼‰</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åŸºæœ¬ç”¨æ³• </span>
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">includes</span>(<span class="hljs-number">2</span>); <span class="hljs-comment">// true </span>
[<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>].<span class="hljs-title function_">includes</span>(<span class="hljs-string">'d'</span>); <span class="hljs-comment">// false </span>

<span class="hljs-comment">// å¤„ç† NaNï¼ˆè¿™æ˜¯ includes() æœ€å¤§çš„äº®ç‚¹ï¼‰ </span>
[<span class="hljs-title class_">NaN</span>].<span class="hljs-title function_">includes</span>(<span class="hljs-title class_">NaN</span>); <span class="hljs-comment">// true</span>
[<span class="hljs-number">1</span>, <span class="hljs-title class_">NaN</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">includes</span>(<span class="hljs-title class_">NaN</span>); <span class="hljs-comment">// true </span>

<span class="hljs-comment">// fromIndexï¼šä»ç´¢å¼• 2 å¼€å§‹æŸ¥æ‰¾ </span>
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>].<span class="hljs-title function_">includes</span>(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// true </span>
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>].<span class="hljs-title function_">includes</span>(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// falseï¼ˆç´¢å¼• 3 æ˜¯ 4ï¼‰ </span>

<span class="hljs-comment">// ç±»å‹ä¸¥æ ¼ç›¸ç­‰ï¼ˆ===ï¼‰ï¼Œä¸ä¼šç±»å‹è½¬æ¢ </span>
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">includes</span>(<span class="hljs-string">'2'</span>); <span class="hljs-comment">// falseï¼ˆå­—ç¬¦ä¸² '2' â‰  æ•°å­— 2ï¼‰</span>
</code></pre>
<h4 data-id="heading-43">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>ä½¿ç”¨Â <strong>SameValueZero ç®—æ³•</strong>Â æ¯”è¾ƒï¼ˆä¸Â <code>===</code>Â å‡ ä¹ç›¸åŒï¼Œ<strong>å”¯ä¸€ä¾‹å¤–æ˜¯Â <code>NaN === NaN</code>Â æˆç«‹</strong>ï¼‰</li>
<li>ä¸ä¼šè·³è¿‡ç©ºæ§½ï¼ˆempty slotsï¼‰ï¼š
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [, ,];
arr.<span class="hljs-title function_">includes</span>(<span class="hljs-literal">undefined</span>); <span class="hljs-comment">// trueï¼ˆç©ºæ§½è¢«è§†ä¸º undefinedï¼‰</span>
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-44">2. æŒ‡æ•°è¿ç®—ç¬¦Â <code>**</code>ï¼šç”¨äºè®¡ç®—å¹‚è¿ç®—ï¼ˆx çš„ y æ¬¡æ–¹ï¼‰</h3>
<h4 data-id="heading-45">èƒŒæ™¯ï¼šä¹‹å‰çš„å†™æ³•</h4>
<p>åœ¨ ES7 ä¹‹å‰ï¼Œåªèƒ½ä½¿ç”¨Â <code>Math.pow()</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// 8</span>
</code></pre>
<p>ä½†è¿™ç§æ–¹å¼ï¼š</p>
<ul>
<li><strong>ä¸å¤Ÿç›´è§‚</strong>ï¼šæ•°å­¦è¡¨è¾¾å¼Â <code>2Â³</code>Â æ— æ³•ç›´æ¥ä¹¦å†™</li>
<li><strong>å¯è¯»æ€§å·®</strong>ï¼šåµŒå¥—å¤æ‚è¡¨è¾¾å¼æ—¶éš¾ä»¥ç†è§£</li>
</ul>
<h4 data-id="heading-46">ğŸ” <code>**</code>Â çš„ä¼˜åŠ¿</h4>
<ul>
<li><strong>ç¬¦åˆæ•°å­¦ç›´è§‰</strong>ï¼š<code>2 ** 3</code>Â å°±æ˜¯ â€œ2 çš„ 3 æ¬¡æ–¹â€</li>
<li><strong>æ”¯æŒèµ‹å€¼è¿ç®—ç¬¦Â <code>**=</code></strong></li>
<li><strong>å³ç»“åˆæ€§</strong>ï¼ˆç¬¦åˆæ•°å­¦è§„åˆ™ï¼‰ï¼š<code>2 ** 3 ** 2</code>Â =Â <code>2 ** (3 ** 2)</code>Â =Â <code>2 ** 9</code></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åŸºæœ¬å¹‚è¿ç®—</span>
<span class="hljs-number">2</span> ** <span class="hljs-number">3</span>;    <span class="hljs-comment">// 8</span>
<span class="hljs-number">5</span> ** <span class="hljs-number">2</span>;    <span class="hljs-comment">// 25</span>
<span class="hljs-number">2</span> ** -<span class="hljs-number">1</span>;   <span class="hljs-comment">// 0.5ï¼ˆè´ŸæŒ‡æ•°ï¼‰</span>

<span class="hljs-comment">// ç»“åˆå˜é‡</span>
<span class="hljs-keyword">const</span> x = <span class="hljs-number">3</span>;
x ** <span class="hljs-number">2</span>;    <span class="hljs-comment">// 9</span>

<span class="hljs-comment">// èµ‹å€¼è¿ç®—ç¬¦</span>
<span class="hljs-keyword">let</span> a = <span class="hljs-number">2</span>;
a **= <span class="hljs-number">3</span>;   <span class="hljs-comment">// a = a ** 3 â†’ a = 8</span>

<span class="hljs-comment">// å³ç»“åˆæ€§ï¼ˆé‡è¦ï¼ï¼‰</span>
<span class="hljs-number">2</span> ** <span class="hljs-number">3</span> ** <span class="hljs-number">2</span>;   <span class="hljs-comment">// 512ï¼ˆå› ä¸º 3**2=9ï¼Œå† 2**9=512ï¼‰</span>
<span class="hljs-comment">// ç­‰ä»·äºï¼š</span>
<span class="hljs-number">2</span> ** (<span class="hljs-number">3</span> ** <span class="hljs-number">2</span>); <span class="hljs-comment">// 512</span>
<span class="hljs-comment">// è€Œä¸æ˜¯ï¼š</span>
(<span class="hljs-number">2</span> ** <span class="hljs-number">3</span>) ** <span class="hljs-number">2</span>; <span class="hljs-comment">// 64</span>
</code></pre>
<h4 data-id="heading-47">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>ä¸èƒ½æœ‰ç©ºæ ¼</strong>ï¼š<code>2 * * 3</code>Â ä¼šæŠ¥é”™ï¼ˆå¿…é¡»å†™æˆÂ <code>2**3</code>ï¼‰</li>
<li><strong>ä¼˜å…ˆçº§é«˜äºä¸€å…ƒè¿ç®—ç¬¦</strong>ï¼š
<pre><code class="hljs language-js" lang="js">-<span class="hljs-number">2</span> ** <span class="hljs-number">2</span>; <span class="hljs-comment">// -4ï¼ˆç­‰ä»·äº -(2 ** 2)ï¼‰</span>
<span class="hljs-comment">// è‹¥æƒ³è®¡ç®— (-2)Â²ï¼Œéœ€åŠ æ‹¬å·ï¼š</span>
(-<span class="hljs-number">2</span>) ** <span class="hljs-number">2</span>; <span class="hljs-comment">// 4</span>
</code></pre>
</li>
</ul>
<hr/>
<h2 data-id="heading-48">ES8ï¼ˆES2017ï¼‰â€”â€” å¼‚æ­¥ç¼–ç¨‹çš„é‡Œç¨‹ç¢‘</h2>
<blockquote>
<p>ES8 èšç„¦äºæå‡å¼€å‘ä½“éªŒï¼šè®©å¼‚æ­¥ä»£ç æ›´æ¸…æ™°ã€å¯¹è±¡éå†æ›´ç›´è§‚ã€å­—ç¬¦ä¸²å¤„ç†æ›´ä¾¿æ·ã€‚</p>
</blockquote>
<h3 data-id="heading-49">1.Â <code>async</code>Â /Â <code>await</code>ï¼šè®©å¼‚æ­¥ä»£ç åƒåŒæ­¥ä¸€æ ·ä¹¦å†™</h3>
<h4 data-id="heading-50">èƒŒæ™¯ï¼šå›è°ƒåœ°ç‹±ä¸ Promise é“¾</h4>
<p>åœ¨Â <code>async/await</code>Â å‡ºç°å‰ï¼Œå¤„ç†å¤šä¸ªå¼‚æ­¥æ“ä½œéå¸¸ç¹çï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å›è°ƒåœ°ç‹±ï¼ˆéš¾ä»¥ç»´æŠ¤ï¼‰</span>
<span class="hljs-title function_">getData</span>(<span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-title function_">getMoreData</span>(data, <span class="hljs-function">(<span class="hljs-params">err, more</span>) =&gt;</span> {
    <span class="hljs-title function_">getEvenMore</span>(more, <span class="hljs-function">(<span class="hljs-params">err, final</span>) =&gt;</span> { <span class="hljs-comment">/* ... */</span> });
  });
});

<span class="hljs-comment">// Promise é“¾ï¼ˆç¨å¥½ï¼Œä½†åµŒå¥—é€»è¾‘ä»å¤æ‚ï¼‰</span>
<span class="hljs-title function_">fetch</span>(url)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-title function_">fetch</span>(data.<span class="hljs-property">url</span>))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err));
</code></pre>
<h4 data-id="heading-51">ğŸ” <code>async/await</code>Â çš„æ ¸å¿ƒä¼˜åŠ¿</h4>
<ul>
<li><strong>è¯­æ³•ç®€æ´</strong>ï¼šç”¨åŒæ­¥é£æ ¼å†™å¼‚æ­¥é€»è¾‘</li>
<li><strong>é”™è¯¯å¤„ç†ç»Ÿä¸€</strong>ï¼šå¯ç”¨Â <code>try/catch</code></li>
<li><strong>è°ƒè¯•å‹å¥½</strong>ï¼šæ–­ç‚¹å¯æ­£å¸¸æ­¥å…¥Â <code>await</code>Â è¡Œ</li>
<li><strong>åŸºäº Promise</strong>ï¼š<code>await</code>Â åé¢å¿…é¡»æ˜¯ Promise</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. åŸºæœ¬ç”¨æ³•</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUser</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/users/<span class="hljs-subst">${id}</span>`</span>);
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
  <span class="hljs-keyword">return</span> user;
}

<span class="hljs-comment">// 2. é”™è¯¯å¤„ç†</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">safeFetch</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>);
    <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Network error'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to fetch:'</span>, err);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}

<span class="hljs-comment">// 3. å¹¶è¡Œè¯·æ±‚ï¼ˆé¿å…ä¸²è¡Œç­‰å¾…ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchAll</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [user, posts] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title function_">fetchUser</span>(<span class="hljs-number">1</span>),
    <span class="hljs-title function_">fetchPosts</span>()
  ]);
  <span class="hljs-keyword">return</span> { user, posts };
}
</code></pre>
<h4 data-id="heading-52">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong><code>await</code>Â åªèƒ½åœ¨Â <code>async</code>Â å‡½æ•°å†…ä½¿ç”¨</strong></li>
<li><strong>é¡¶å±‚ await</strong> ï¼šä»…åœ¨æ¨¡å—ï¼ˆ<code>type="module"</code>ï¼‰æˆ–ç°ä»£ Node.js ä¸­æ”¯æŒ</li>
<li><strong>ä¸è¦æ»¥ç”¨ä¸²è¡Œ</strong>ï¼šæ— å…³çš„å¼‚æ­¥æ“ä½œåº”å¹¶è¡Œï¼ˆç”¨Â <code>Promise.all</code>ï¼‰</li>
</ul>
<h4 data-id="heading-53">æœ€ä½³å®è·µ</h4>
<ul>
<li>ç”¨Â <code>async/await</code>Â æ›¿ä»£Â <code>.then()</code>Â é“¾</li>
<li>æ€»æ˜¯é…åˆÂ <code>try/catch</code>Â å¤„ç†é”™è¯¯</li>
<li>å¯¹ç‹¬ç«‹è¯·æ±‚ä½¿ç”¨Â <code>Promise.all</code>Â æå‡æ€§èƒ½</li>
</ul>
<hr/>
<h3 data-id="heading-54">2.Â <code>Object.values()</code>Â /Â <code>Object.entries()</code>ï¼šå¯¹è±¡éå†åƒæ•°ç»„ä¸€æ ·ç®€å•</h3>
<h4 data-id="heading-55">èƒŒæ™¯ï¼šä¼ ç»Ÿå¯¹è±¡éå†çš„ç—›ç‚¹</h4>
<p>è¿‡å»éå†å¯¹è±¡éœ€ç»“åˆÂ <code>for...in</code>Â +Â <code>hasOwnProperty</code>ï¼Œæˆ–å…ˆå–é”®å†æ˜ å°„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> };

<span class="hljs-comment">// æ—§æ–¹å¼ï¼šè·å–å€¼</span>
<span class="hljs-keyword">const</span> values = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> obj) {
  <span class="hljs-keyword">if</span> (obj.<span class="hljs-title function_">hasOwnProperty</span>(key)) {
    values.<span class="hljs-title function_">push</span>(obj[key]);
  }
}

<span class="hljs-comment">// æˆ–</span>
<span class="hljs-keyword">const</span> values = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> obj[key]);
</code></pre>
<h4 data-id="heading-56">ğŸ” æ–°æ–¹æ³•çš„ä¼˜åŠ¿</h4>

























<table><thead><tr><th>æ–¹æ³•</th><th>è¿”å›å€¼</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>Object.keys(obj)</code></td><td><code>['a', 'b']</code></td><td>è·å–æ‰€æœ‰å¯æšä¸¾å±æ€§å</td></tr><tr><td><code>Object.values(obj)</code></td><td><code>[1, 2]</code></td><td><strong>ç›´æ¥è·å–æ‰€æœ‰å€¼</strong></td></tr><tr><td><code>Object.entries(obj)</code></td><td><code>[['a',1], ['b',2]]</code></td><td><strong>è·å–é”®å€¼å¯¹æ•°ç»„</strong></td></tr></tbody></table>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">city</span>: <span class="hljs-string">'Paris'</span> };

<span class="hljs-comment">// è·å–æ‰€æœ‰å€¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(user)); 
<span class="hljs-comment">// ['Alice', 30, 'Paris']</span>

<span class="hljs-comment">// è·å–é”®å€¼å¯¹ï¼ˆå¸¸ç”¨äº map æ¸²æŸ“ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(user));
<span class="hljs-comment">// [['name', 'Alice'], ['age', 30], ['city', 'Paris']]</span>

<span class="hljs-comment">// åœ¨ React/Vue ä¸­éå†å¯¹è±¡</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(user).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> (
  <span class="hljs-comment">// æ–¹æ³•</span>
));

<span class="hljs-comment">// è®¡ç®—å¯¹è±¡æ€»å’Œï¼ˆå¦‚ç»Ÿè®¡ï¼‰</span>
<span class="hljs-keyword">const</span> scores = { <span class="hljs-attr">math</span>: <span class="hljs-number">90</span>, <span class="hljs-attr">english</span>: <span class="hljs-number">85</span> };
<span class="hljs-keyword">const</span> total = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(scores).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>); <span class="hljs-comment">// 175</span>
</code></pre>
<h4 data-id="heading-57">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>åªåŒ…å«å¯æšä¸¾å±æ€§</strong>ï¼ˆä¸åŒ…æ‹¬Â <code>Symbol</code>Â é”®ï¼Œé™¤éç”¨Â <code>Object.getOwnPropertySymbols</code>ï¼‰</li>
<li><strong>ä¸ä¿è¯é¡ºåº</strong>ï¼ˆä½†ç°ä»£å¼•æ“é€šå¸¸æŒ‰åˆ›å»ºé¡ºåºï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-58">3.Â <code>String.prototype.padStart()</code>Â /Â <code>padEnd()</code>ï¼šå­—ç¬¦ä¸²è¡¥å…¨ï¼ˆå·¦å¡«å…… / å³å¡«å……ï¼‰</h3>
<h4 data-id="heading-59">èƒŒæ™¯ï¼šæ ¼å¼åŒ–éœ€æ±‚å¸¸è§ä½†å®ç°ç¹ç</h4>
<p>æ ¼å¼åŒ–æ—¶é—´ï¼ˆ<code>5</code>Â â†’Â <code>05</code>ï¼‰ã€å¯¹é½æ–‡æœ¬ã€ç”Ÿæˆå›ºå®šé•¿åº¦ ID ç­‰ï¼Œè¿‡å»éœ€æ‰‹åŠ¨æ‹¼æ¥æˆ–æ­£åˆ™å¤„ç†ã€‚</p>
<h4 data-id="heading-60">ğŸ” æ–°æ–¹æ³•çš„ä¼˜åŠ¿</h4>
<ul>
<li><strong>è¯­ä¹‰æ¸…æ™°</strong>ï¼š<code>padStart</code>ï¼ˆå·¦è¡¥ï¼‰ã€<code>padEnd</code>ï¼ˆå³è¡¥ï¼‰</li>
<li><strong>è‡ªåŠ¨æˆªæ–­</strong>ï¼šè‹¥åŸå­—ç¬¦ä¸²é•¿åº¦ â‰¥ ç›®æ ‡é•¿åº¦ï¼Œç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²</li>
<li><strong>æ”¯æŒå¤šå­—ç¬¦å¡«å……</strong></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ—¶é—´æ ¼å¼åŒ–</span>
<span class="hljs-string">'7'</span>.<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>);     <span class="hljs-comment">// '07'</span>
<span class="hljs-string">'12'</span>.<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>);    <span class="hljs-comment">// '12'ï¼ˆé•¿åº¦å·²å¤Ÿï¼Œä¸å˜ï¼‰</span>

<span class="hljs-comment">// ç”Ÿæˆå›ºå®šé•¿åº¦ç¼–å·</span>
<span class="hljs-string">'123'</span>.<span class="hljs-title function_">padStart</span>(<span class="hljs-number">6</span>, <span class="hljs-string">'0'</span>);   <span class="hljs-comment">// '000123'</span>

<span class="hljs-comment">// å³å¯¹é½æ–‡æœ¬ï¼ˆæ§åˆ¶å°è¾“å‡ºï¼‰é»˜è®¤å¡«å……ç©º</span>
<span class="hljs-string">'Price'</span>.<span class="hljs-title function_">padEnd</span>(<span class="hljs-number">10</span>) + <span class="hljs-string">'$10'</span>; <span class="hljs-comment">// 'Price     $10'</span>

<span class="hljs-comment">// å¤šå­—ç¬¦å¡«å……</span>
<span class="hljs-string">'abc'</span>.<span class="hljs-title function_">padStart</span>(<span class="hljs-number">8</span>, <span class="hljs-string">'xy'</span>);    <span class="hljs-comment">// 'xyxyxabc'ï¼ˆé‡å¤å¡«å…… 'xy'ï¼‰</span>

<span class="hljs-comment">// å®‰å…¨å¤„ç†ï¼šç›®æ ‡é•¿åº¦å°äºåŸé•¿</span>
<span class="hljs-string">'hello'</span>.<span class="hljs-title function_">padStart</span>(<span class="hljs-number">3</span>, <span class="hljs-string">'0'</span>);   <span class="hljs-comment">// 'hello'ï¼ˆä¸ä¼šæˆªæ–­ï¼ï¼‰</span>
</code></pre>
<h4 data-id="heading-61">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong><code>padString</code>Â é»˜è®¤æ˜¯ç©ºæ ¼Â <code>' '</code></strong></li>
<li><strong>å¡«å……å­—ç¬¦ä¸²ä¼šè¢«æˆªæ–­ä»¥é€‚åº”ç›®æ ‡é•¿åº¦</strong>ï¼š
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">'a'</span>.<span class="hljs-title function_">padStart</span>(<span class="hljs-number">5</span>, <span class="hljs-string">'xyz'</span>); <span class="hljs-comment">// 'xyzxa'ï¼ˆä¸æ˜¯ 'xyzxy'ï¼‰</span>
</code></pre>
</li>
</ul>
<hr/>
<h2 data-id="heading-62">ES9ï¼ˆES2018ï¼‰â€”â€” å¯¹è±¡æ“ä½œä¸å¼‚æ­¥æ”¶å°¾çš„ä¼˜é›…å‡çº§</h2>
<blockquote>
<p>ES9 å»¶ç»­äº†â€œå°è€Œç¾â€çš„æ›´æ–°é£æ ¼ï¼Œèšç„¦å¼€å‘è€…æ—¥å¸¸ç—›ç‚¹ï¼Œè®©å¯¹è±¡å¤„ç†æ›´çµæ´»ï¼Œå¼‚æ­¥é€»è¾‘æ›´å®Œæ•´ã€‚</p>
</blockquote>
<h3 data-id="heading-63">1. å¯¹è±¡å±•å¼€/å‰©ä½™è¿ç®—ç¬¦ï¼ˆES6ä¸­ æ•°ç»„å±•å¼€/å‰©ä½™è¯­æ³•çš„å»¶å±•ï¼‰</h3>
<h4 data-id="heading-64">ğŸ” ç‰¹æ€§ä¸€ï¼šå¯¹è±¡å±•å¼€ï¼ˆObject Spreadï¼‰â€”â€” åˆå¹¶/å…‹éš†å¯¹è±¡</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. æµ…æ‹·è´å¯¹è±¡</span>
<span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> };
<span class="hljs-keyword">const</span> clone = { ...user }; <span class="hljs-comment">// { name: 'Alice', age: 30 }</span>

<span class="hljs-comment">// 2. åˆå¹¶å¤šä¸ªå¯¹è±¡ï¼ˆåè¦†ç›–å‰ï¼‰</span>
<span class="hljs-keyword">const</span> defaults = { <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>, <span class="hljs-attr">lang</span>: <span class="hljs-string">'en'</span> };
<span class="hljs-keyword">const</span> settings = { <span class="hljs-attr">lang</span>: <span class="hljs-string">'zh'</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span> };
<span class="hljs-keyword">const</span> config = { ...defaults, ...settings };
<span class="hljs-comment">// { theme: 'light', lang: 'zh', fontSize: 14 }</span>

<span class="hljs-comment">// 3. æ·»åŠ æ–°å±æ€§</span>
<span class="hljs-keyword">const</span> person = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Bob'</span> };
<span class="hljs-keyword">const</span> employee = { ...person, <span class="hljs-attr">role</span>: <span class="hljs-string">'developer'</span>, <span class="hljs-attr">id</span>: <span class="hljs-number">101</span> };
<span class="hljs-comment">// { name: 'Bob', role: 'developer', id: 101 }</span>
</code></pre>
<h4 data-id="heading-65">âš ï¸ æ³¨æ„äº‹é¡¹ï¼š</h4>
<ul>
<li><strong>æµ…æ‹·è´</strong>ï¼šåµŒå¥—å¯¹è±¡ä»å…±äº«å¼•ç”¨ï¼ˆå¼•ç”¨å¼èµ‹å€¼ï¼‰
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> original = { <span class="hljs-attr">a</span>: { <span class="hljs-attr">b</span>: <span class="hljs-number">1</span> } };
<span class="hljs-keyword">const</span> copy = { ...original };
copy.<span class="hljs-property">a</span>.<span class="hljs-property">b</span> = <span class="hljs-number">2</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(original.<span class="hljs-property">a</span>.<span class="hljs-property">b</span>); <span class="hljs-comment">// 2ï¼ˆè¢«ä¿®æ”¹äº†ï¼ï¼‰</span>
</code></pre>
</li>
<li><strong>å±æ€§è¦†ç›–é¡ºåº</strong>ï¼šåè€…å±æ€§ä¼šè¦†ç›–å‰è€…åŒåå±æ€§</li>
<li><strong>éå¯¹è±¡å€¼ä¼šè¢«å¿½ç•¥</strong>ï¼ˆä½†ä¸ä¼šæŠ¥é”™ï¼‰ï¼š
<pre><code class="hljs language-js" lang="js">{ ...<span class="hljs-literal">null</span>, ...<span class="hljs-literal">undefined</span>, <span class="hljs-attr">x</span>: <span class="hljs-number">1</span> } <span class="hljs-comment">// { x: 1 }</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-66">ğŸ” ç‰¹æ€§äºŒï¼šå¯¹è±¡å‰©ä½™ï¼ˆObject Restï¼‰â€”â€” æå–â€œå…¶ä½™å±æ€§â€</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. æå–éƒ¨åˆ†å±æ€§ï¼Œå…¶ä½™æ‰“åŒ…</span>
<span class="hljs-keyword">const</span> user = { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">'a@example.com'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'admin'</span> };
<span class="hljs-keyword">const</span> { id, ...userInfo } = user;
<span class="hljs-comment">// id = 1</span>
<span class="hljs-comment">// userInfo = { name: 'Alice', email: 'a@example.com', role: 'admin' }</span>

<span class="hljs-comment">// 2. å‡½æ•°å‚æ•°ä¸­ç§»é™¤ç‰¹å®šå­—æ®µ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">omit</span>(<span class="hljs-params">obj, key</span>) {
  <span class="hljs-keyword">const</span> { [key]: _, ...rest } = obj; <span class="hljs-comment">// ä½¿ç”¨è®¡ç®—å±æ€§å + å¿½ç•¥å˜é‡ _</span>
  <span class="hljs-keyword">return</span> rest;
}
<span class="hljs-title function_">omit</span>({ <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> }, <span class="hljs-string">'b'</span>); <span class="hljs-comment">// { a: 1, c: 3 }</span>

<span class="hljs-comment">// 3. React ä¸­åˆ†ç¦» props</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params">{ className, children, ...restProps }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{className}</span> {<span class="hljs-attr">...restProps</span>}&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<h4 data-id="heading-67">âš ï¸ æ³¨æ„äº‹é¡¹ï¼š</h4>
<ul>
<li><strong>åªèƒ½ç”¨åœ¨è§£æ„çš„æœ€å</strong>ï¼š
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { ...rest, name } = user; <span class="hljs-comment">// SyntaxError</span>
</code></pre>
</li>
<li><strong>ä¸ä¼šåŒ…å«åŸå‹é“¾ä¸Šçš„å±æ€§</strong>ï¼ˆåªå¤„ç†è‡ªèº«å¯æšä¸¾å±æ€§ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-68">2.Â <code>Promise.prototype.finally()</code>ï¼šPromise éƒ½æ‰§è¡Œçš„å›è°ƒ</h3>
<h4 data-id="heading-69">èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆéœ€è¦Â <code>finally</code>ï¼Ÿ</h4>
<p>åœ¨ ES9 ä¹‹å‰ï¼Œè¦å®ç°â€œæ— è®ºæˆåŠŸå¤±è´¥éƒ½æ‰§è¡Œâ€çš„é€»è¾‘ï¼Œå¿…é¡»åœ¨Â <code>.then()</code>Â å’ŒÂ <code>.catch()</code>Â ä¸­<strong>é‡å¤å†™ä»£ç </strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ES8 åŠä¹‹å‰ï¼ˆå†—ä½™ï¼‰</span>
<span class="hljs-title function_">showLoading</span>();
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-title function_">hideLoading</span>(); <span class="hljs-comment">// â† é‡å¤</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">processData</span>(data);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
    <span class="hljs-title function_">hideLoading</span>(); <span class="hljs-comment">// â† é‡å¤</span>
    <span class="hljs-title function_">showError</span>(err);
  });
</code></pre>
<h4 data-id="heading-70">ğŸ”Â <code>finally()</code>Â çš„ä¼˜åŠ¿</h4>
<ul>
<li><strong>æ¶ˆé™¤é‡å¤ä»£ç </strong></li>
<li><strong>è¯­ä¹‰æ¸…æ™°</strong>ï¼šæ˜ç¡®è¡¨ç¤ºâ€œæ”¶å°¾æ“ä½œâ€</li>
<li><strong>ä¸æ”¹å˜ Promise çŠ¶æ€</strong>ï¼š<code>finally</code>Â ä¸­çš„è¿”å›å€¼ä¼šè¢«å¿½ç•¥ï¼Œé”™è¯¯ä¼šç»§ç»­æŠ›å‡º</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. éšè— loading æŒ‡ç¤ºå™¨</span>
<span class="hljs-title function_">showLoading</span>();
<span class="hljs-title function_">fetchUserData</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> <span class="hljs-title function_">renderUser</span>(user))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-title function_">showErrorMessage</span>(err))
  .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">hideLoading</span>()); <span class="hljs-comment">// æ— è®ºæˆåŠŸå¤±è´¥éƒ½éšè—</span>

<span class="hljs-comment">// 2. æ¸…ç†èµ„æº</span>
<span class="hljs-keyword">let</span> dbConnection;
<span class="hljs-title function_">openDB</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">conn</span> =&gt;</span> {
    dbConnection = conn;
    <span class="hljs-keyword">return</span> conn.<span class="hljs-title function_">query</span>(<span class="hljs-string">'SELECT * FROM users'</span>);
  })
  .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (dbConnection) dbConnection.<span class="hljs-title function_">close</span>(); <span class="hljs-comment">// å®‰å…¨å…³é—­</span>
  });

<span class="hljs-comment">// 3. finally ä¸­æŠ›å‡ºé”™è¯¯ä¼šä¼ é€’ä¸‹å»</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>)
  .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Oops!'</span>);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err.<span class="hljs-property">message</span>)); <span class="hljs-comment">// "Oops!"</span>
</code></pre>
<h4 data-id="heading-71">âš ï¸ å…³é”®è¡Œä¸ºï¼š</h4>

























<table><thead><tr><th>åœºæ™¯</th><th><code>finally</code>å›è°ƒæ˜¯å¦æ‰§è¡Œï¼Ÿ</th></tr></thead><tbody><tr><td>Promise æˆåŠŸ</td><td>æ˜¯</td></tr><tr><td>Promise å¤±è´¥</td><td>æ˜¯</td></tr><tr><td><code>finally</code>Â ä¸­è¿”å›å€¼</td><td>è¢«å¿½ç•¥ï¼ˆä¸å½±å“é“¾å¼ç»“æœï¼‰</td></tr><tr><td><code>finally</code>Â ä¸­æŠ›å‡ºé”™è¯¯</td><td>ä¼šä¸­æ–­åç»­Â <code>.then()</code>ï¼Œè¿›å…¥Â <code>.catch()</code></td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡Â <strong><code>finally</code>Â ä¸æ¥æ”¶å‚æ•°</strong>ï¼ˆå› ä¸ºå®ƒä¸çŸ¥é“ Promise æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼‰ï¼š</p>
<p><code>promise.finally(result =&gt; { /* result æ˜¯ undefinedï¼ */ });</code></p>
</blockquote>
<h2 data-id="heading-72">ES10ï¼ˆES2019ï¼‰â€”â€” ç²¾å·§å®ç”¨çš„å·¥å…·æ–¹æ³•</h2>
<blockquote>
<p>ES10 èšç„¦äºâ€œè¡¥é½ç”Ÿæ€â€ï¼Œæä¾›å¯¹ç§°ã€ä¸€è‡´ã€æ ‡å‡†åŒ–çš„å·¥å…·å‡½æ•°ï¼Œè®©å¼€å‘è€…å‘Šåˆ«æ‰‹åŠ¨å®ç°æˆ–ä¾èµ–ç¬¬ä¸‰æ–¹åº“ã€‚</p>
</blockquote>
<h3 data-id="heading-73">1.Â <code>Array.prototype.flat()</code>Â /Â <code>flatMap()</code>ï¼šè½»æ¾å¤„ç†åµŒå¥—æ•°ç»„</h3>
<h4 data-id="heading-74">èƒŒæ™¯ï¼šæ‰‹åŠ¨æ‰å¹³åŒ–å¾ˆéº»çƒ¦</h4>
<p>è¿‡å»è¦å±•å¹³åµŒå¥—æ•°ç»„ï¼Œéœ€ç”¨Â <code>reduce</code>Â + é€’å½’æˆ–Â <code>concat.apply</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ‰‹åŠ¨å±•å¹³ä¸€å±‚</span>
<span class="hljs-keyword">const</span> arr = [[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]];
<span class="hljs-keyword">const</span> flat = [].<span class="hljs-title function_">concat</span>(...arr); <span class="hljs-comment">// [1, 2, 3, 4]</span>

<span class="hljs-comment">// å±•å¹³å¤šå±‚ï¼Ÿæ›´å¤æ‚ï¼</span>
</code></pre>
<h4 data-id="heading-75">ğŸ” <code>flat()</code>ï¼šæŒ‰éœ€å±•å¹³æŒ‡å®šå±‚æ•°</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å±•å¹³ä¸€å±‚ï¼ˆé»˜è®¤ï¼‰</span>
[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, [<span class="hljs-number">4</span>]]].<span class="hljs-title function_">flat</span>(); 
<span class="hljs-comment">// â†’ [1, 2, 3, [4]]</span>

<span class="hljs-comment">// å±•å¹³ä¸¤å±‚</span>
[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, [<span class="hljs-number">4</span>]]].<span class="hljs-title function_">flat</span>(<span class="hljs-number">2</span>); 
<span class="hljs-comment">// â†’ [1, 2, 3, 4]</span>

<span class="hljs-comment">// å±•å¹³ä»»æ„æ·±åº¦</span>
[<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, [<span class="hljs-number">3</span>, [<span class="hljs-number">4</span>, [<span class="hljs-number">5</span>]]]]].<span class="hljs-title function_">flat</span>(<span class="hljs-title class_">Infinity</span>); 
<span class="hljs-comment">// â†’ [1, 2, 3, 4, 5]</span>

<span class="hljs-comment">// è‡ªåŠ¨è·³è¿‡ç©ºæ§½ï¼ˆempty slotsï¼‰</span>
[<span class="hljs-number">1</span>, , [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>]].<span class="hljs-title function_">flat</span>(); 
<span class="hljs-comment">// â†’ [1, 2, 3]ï¼ˆä¸­é—´çš„ç©ºä½è¢«å¿½ç•¥ï¼‰</span>
</code></pre>
<hr/>
<h4 data-id="heading-76">ğŸ”Â <code>flatMap()</code>ï¼šå…ˆ map å† flatï¼ˆä¸€å±‚ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœºæ™¯ï¼šå°†å¥å­æ‹†åˆ†ä¸ºå•è¯æ•°ç»„å¹¶åˆå¹¶</span>
<span class="hljs-keyword">const</span> sentences = [<span class="hljs-string">'Hello world'</span>, <span class="hljs-string">'JS is fun'</span>];
<span class="hljs-keyword">const</span> words = sentences.<span class="hljs-title function_">flatMap</span>(<span class="hljs-function"><span class="hljs-params">sentence</span> =&gt;</span> sentence.<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>));
<span class="hljs-comment">// â†’ ['Hello', 'world', 'JS', 'is', 'fun']</span>

<span class="hljs-comment">// å¯¹æ¯”ä¼ ç»Ÿå†™æ³•ï¼š</span>
sentences.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>)).<span class="hljs-title function_">flat</span>(); <span class="hljs-comment">// æ•ˆæœç›¸åŒï¼Œä½† flatMap æ›´é«˜æ•ˆï¼ˆåªéå†ä¸€æ¬¡ï¼‰</span>

<span class="hljs-comment">// è¿‡æ»¤ + æ˜ å°„ï¼ˆè¿”å›ç©ºæ•°ç»„å¯è¿‡æ»¤æ‰å…ƒç´ ï¼‰</span>
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>].<span class="hljs-title function_">flatMap</span>(<span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> 
  n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span> ? [n * <span class="hljs-number">2</span>] : [] 
);
<span class="hljs-comment">// â†’ [4, 8]ï¼ˆå¥‡æ•°è¢«è¿‡æ»¤ï¼‰</span>
</code></pre>
<h5 data-id="heading-77">âš ï¸ æ³¨æ„äº‹é¡¹ï¼š</h5>
<ul>
<li><code>flatMap</code>Â <strong>åªèƒ½å±•å¹³ä¸€å±‚</strong>ï¼ˆå†…éƒ¨è°ƒç”¨Â <code>flat(1)</code>ï¼‰</li>
<li>å›è°ƒå‡½æ•°å¿…é¡»è¿”å›<strong>æ•°ç»„</strong>ï¼ˆå¦åˆ™ä¼šæŠ¥é”™æˆ–è¡Œä¸ºå¼‚å¸¸ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-78">2.Â <code>Object.fromEntries()</code>ï¼šå°†é”®å€¼å¯¹åˆ—è¡¨è½¬å›å¯¹è±¡</h3>
<h4 data-id="heading-79">èƒŒæ™¯ï¼šå¯¹è±¡ â†” é”®å€¼å¯¹ çš„è½¬æ¢ä¸å¯¹ç§°</h4>
<p>ES8 å¼•å…¥äº†Â <code>Object.entries(obj)</code>ï¼Œä½†<strong>æ²¡æœ‰å¯¹åº”çš„åå‘æ–¹æ³•</strong>ï¼Œå¯¼è‡´é“¾å¼æ“ä½œä¸­æ–­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æƒ³è¿‡æ»¤å¯¹è±¡å±æ€§ï¼Ÿéœ€æ‰‹åŠ¨é‡å»ºå¯¹è±¡</span>
<span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> };
<span class="hljs-keyword">const</span> filtered = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj)
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span> obj[k] &gt; <span class="hljs-number">1</span>)
  .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, k</span>) =&gt;</span> ({ ...acc, [k]: obj[k] }), {});
<span class="hljs-comment">// å¤æ‚ä¸”ä½æ•ˆï¼</span>
</code></pre>
<h4 data-id="heading-80">ğŸ”Â <code>fromEntries()</code>Â çš„ä¼˜åŠ¿</h4>
<ul>
<li><strong>å®Œç¾å¯¹ç§°</strong>ï¼š<code>Object.fromEntries(Object.entries(obj)) === obj</code>ï¼ˆæµ…æ‹·è´ï¼‰</li>
<li><strong>æ”¯æŒé“¾å¼æ“ä½œ</strong>ï¼šç»“åˆÂ <code>entries()</code>Â å®ç°å‡½æ•°å¼å¯¹è±¡å˜æ¢</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. è¿‡æ»¤å¯¹è±¡å±æ€§ï¼ˆå‡½æ•°å¼é£æ ¼ï¼‰</span>
<span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> };
<span class="hljs-keyword">const</span> filtered = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(obj).<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">[key, val]</span>) =&gt;</span> val &gt; <span class="hljs-number">1</span>)
);
<span class="hljs-comment">// â†’ { b: 2, c: 3 }</span>

<span class="hljs-comment">// 2. è½¬æ¢ Map åˆ°æ™®é€šå¯¹è±¡</span>
<span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([[<span class="hljs-string">'name'</span>, <span class="hljs-string">'Alice'</span>], [<span class="hljs-string">'age'</span>, <span class="hljs-number">30</span>]]);
<span class="hljs-keyword">const</span> user = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(map);
<span class="hljs-comment">// â†’ { name: 'Alice', age: 30 }</span>

<span class="hljs-comment">// 3. ä¿®æ”¹é”®åï¼ˆå¦‚ API å­—æ®µé‡å‘½åï¼‰</span>
<span class="hljs-keyword">const</span> apiData = { <span class="hljs-attr">user_id</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">user_name</span>: <span class="hljs-string">'Bob'</span> };
<span class="hljs-keyword">const</span> cleanData = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(apiData).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[key, val]</span>) =&gt;</span> 
    [key.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'user_'</span>, <span class="hljs-string">''</span>), val]
  )
);
<span class="hljs-comment">// â†’ { id: 123, name: 'Bob' }</span>
</code></pre>
<h5 data-id="heading-81">âš ï¸ æ³¨æ„äº‹é¡¹ï¼š</h5>
<ul>
<li>è¾“å…¥å¿…é¡»æ˜¯<strong>å¯è¿­ä»£å¯¹è±¡</strong>ï¼ˆå¦‚Â <code>Array</code>,Â <code>Map</code>ï¼‰</li>
<li>æ¯ä¸ªå…ƒç´ å¿…é¡»æ˜¯<strong>é•¿åº¦ â‰¥2 çš„æ•°ç»„æˆ–ç±»ä¼¼ç»“æ„</strong>ï¼ˆå–å‰ä¸¤ä¸ªå€¼ä½œä¸ºÂ <code>[key, value]</code>ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-82">3.Â <code>trimStart()</code>Â /Â <code>trimEnd()</code>ï¼šæ ‡å‡†åŒ–å­—ç¬¦ä¸²é¦–å°¾ç©ºç™½æ¸…ç†</h3>
<h4 data-id="heading-83">èƒŒæ™¯ï¼šæµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜</h4>
<p>æ—©æœŸæµè§ˆå™¨æä¾›äº†éæ ‡å‡†æ–¹æ³•ï¼š</p>
<ul>
<li><code>trimLeft()</code>Â /Â <code>trimRight()</code>ï¼ˆChromeã€Firefox æ”¯æŒï¼‰</li>
<li>ä½†Â <strong>Safari å’Œ IE ä¸ä¸€è‡´</strong></li>
</ul>
<p>ES10 å¼•å…¥äº†<strong>æ ‡å‡†åŒ–åç§°</strong>ï¼Œå¹¶è®©æ—§æ–¹æ³•æˆä¸ºåˆ«åï¼š</p>

















<table><thead><tr><th>æ ‡å‡†æ–¹æ³•ï¼ˆES10+ï¼‰</th><th>éæ ‡å‡†åˆ«åï¼ˆä»å¯ç”¨ï¼‰</th></tr></thead><tbody><tr><td><code>str.trimStart()</code></td><td><code>str.trimLeft()</code></td></tr><tr><td><code>str.trimEnd()</code></td><td><code>str.trimRight()</code></td></tr></tbody></table>
<blockquote>
<p>æ‰€æœ‰ç°ä»£æµè§ˆå™¨ç°åœ¨éƒ½åŒæ—¶æ”¯æŒæ–°æ—§ä¸¤ç§å†™æ³•ï¼Œä½†<strong>æ¨èä½¿ç”¨æ ‡å‡†åç§°</strong>ã€‚</p>
</blockquote>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> str = <span class="hljs-string">'   Hello World!   '</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str.<span class="hljs-title function_">trimStart</span>()); <span class="hljs-comment">// 'Hello World!   '</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str.<span class="hljs-title function_">trimEnd</span>());   <span class="hljs-comment">// '   Hello World!'</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str.<span class="hljs-title function_">trim</span>());      <span class="hljs-comment">// 'Hello World!'ï¼ˆç§»é™¤ä¸¤ç«¯ï¼‰</span>

<span class="hljs-comment">// åˆ«åä»ç„¶æœ‰æ•ˆï¼ˆä½†ä¸æ¨èï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str.<span class="hljs-title function_">trimLeft</span>() === str.<span class="hljs-title function_">trimStart</span>());  <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str.<span class="hljs-title function_">trimRight</span>() === str.<span class="hljs-title function_">trimEnd</span>());   <span class="hljs-comment">// true</span>
</code></pre>
<h2 data-id="heading-84">ES11ï¼ˆES2020ï¼‰â€”â€” å®‰å…¨ã€ç²¾ç¡®ä¸è·¨ç¯å¢ƒç»Ÿä¸€</h2>
<blockquote>
<p>ES11 èšç„¦äºÂ <strong>ç©ºå€¼å®‰å…¨å¤„ç†</strong>ã€<strong>å¤§æ•´æ•°æ”¯æŒ</strong>Â å’ŒÂ <strong>è·¨å¹³å°ä¸€è‡´æ€§</strong>ï¼Œæå¤§æå‡äº†ä»£ç çš„å¥å£®æ€§ä¸å¯ç§»æ¤æ€§ã€‚</p>
</blockquote>
<h3 data-id="heading-85">1. ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦Â <code>??</code>ï¼šä»…åœ¨å€¼ä¸ºÂ <code>null</code>Â æˆ–Â <code>undefined</code>Â æ—¶æä¾›é»˜è®¤å€¼</h3>
<h4 data-id="heading-86">èƒŒæ™¯ï¼š<code>||</code>Â çš„é™·é˜±</h4>
<p>ä¼ ç»Ÿä½¿ç”¨é€»è¾‘æˆ–Â <code>||</code>Â è®¾ç½®é»˜è®¤å€¼å­˜åœ¨ä¸¥é‡é—®é¢˜ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> name = input || <span class="hljs-string">'default'</span>;
</code></pre>
<p>ä½†Â <code>||</code>Â ä¼šå°†æ‰€æœ‰Â <strong>falsy å€¼</strong>ï¼ˆå¦‚Â <code>0</code>,Â <code>''</code>,Â <code>false</code>,Â <code>NaN</code>ï¼‰éƒ½è§†ä¸ºâ€œæ— æ•ˆâ€ï¼Œå¯¼è‡´æ„å¤–è¦†ç›–ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é—®é¢˜ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> count = <span class="hljs-number">0</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count || <span class="hljs-number">10</span>); <span class="hljs-comment">// 10ï¼ˆä½† 0 æ˜¯æœ‰æ•ˆå€¼ï¼ï¼‰</span>

<span class="hljs-keyword">const</span> title = <span class="hljs-string">''</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(title || <span class="hljs-string">'Untitled'</span>); <span class="hljs-comment">// 'Untitled'ï¼ˆä½†ç©ºå­—ç¬¦ä¸²å¯èƒ½æ˜¯ç”¨æˆ·æ•…æ„è¾“å…¥çš„ï¼‰</span>
</code></pre>
<h4 data-id="heading-87">ğŸ”Â <code>??</code>Â çš„æ ¸å¿ƒä¼˜åŠ¿</h4>
<ul>
<li><strong>åªå“åº”Â <code>null</code>Â å’ŒÂ <code>undefined</code></strong></li>
<li><strong>ä¿ç•™å…¶ä»– falsy å€¼</strong>ï¼ˆ<code>0</code>,Â <code>''</code>,Â <code>false</code>,Â <code>NaN</code>Â ç­‰ï¼‰</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ­£ç¡®å¤„ç†è¾¹ç•Œå€¼</span>
<span class="hljs-number">0</span> ?? <span class="hljs-number">10</span>;        <span class="hljs-comment">// 0ï¼ˆä¿ç•™ 0ï¼‰</span>
<span class="hljs-string">''</span> ?? <span class="hljs-string">'text'</span>;   <span class="hljs-comment">// ''ï¼ˆä¿ç•™ç©ºå­—ç¬¦ä¸²ï¼‰</span>
<span class="hljs-literal">false</span> ?? <span class="hljs-literal">true</span>;  <span class="hljs-comment">// falseï¼ˆä¿ç•™å¸ƒå°” falseï¼‰</span>
<span class="hljs-title class_">NaN</span> ?? <span class="hljs-number">0</span>;       <span class="hljs-comment">// NaNï¼ˆä¿ç•™ NaNï¼‰</span>

<span class="hljs-comment">// ä»…å½“çœŸæ­£â€œæ— å€¼â€æ—¶ç”¨é»˜è®¤å€¼</span>
<span class="hljs-literal">null</span> ?? <span class="hljs-string">'default'</span>;      <span class="hljs-comment">// 'default'</span>
<span class="hljs-literal">undefined</span> ?? <span class="hljs-string">'default'</span>; <span class="hljs-comment">// 'default'</span>

<span class="hljs-comment">// å®é™…åœºæ™¯ï¼šé…ç½®é¡¹é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">timeout</span>: userConfig.<span class="hljs-property">timeout</span> ?? <span class="hljs-number">5000</span>, <span class="hljs-comment">// è‹¥ç”¨æˆ·æ²¡è®¾ timeout æ‰ç”¨é»˜è®¤</span>
  <span class="hljs-attr">retries</span>: userConfig.<span class="hljs-property">retries</span> ?? <span class="hljs-number">3</span>
};
</code></pre>
<h4 data-id="heading-88">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>ä¸èƒ½ä¸Â <code>&amp;&amp;</code>Â æˆ–Â <code>||</code>Â æ··ç”¨</strong>ï¼ˆéœ€åŠ æ‹¬å·ï¼‰ï¼š
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// SyntaxError</span>
a || b ?? c;

<span class="hljs-comment">// å¿…é¡»åŠ æ‹¬å·</span>
(a || b) ?? c;
a || (b ?? c);
</code></pre>
</li>
<li><strong>ä¸å¯é€‰é“¾Â <code>?.</code>Â å¤©ç„¶æ­é…</strong>ï¼ˆè§ä¸‹æ–‡ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-89">2. å¯é€‰é“¾æ“ä½œç¬¦Â <code>?.</code>ï¼šå®‰å…¨è®¿é—®åµŒå¥—å±æ€§</h3>
<h4 data-id="heading-90">èƒŒæ™¯ï¼šæ·±å±‚å±æ€§è®¿é—®é£é™©é«˜</h4>
<p>ä¼ ç»Ÿå†™æ³•éœ€å±‚å±‚æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å†—é•¿ä¸”æ˜“é”™</span>
<span class="hljs-keyword">const</span> city = user &amp;&amp; user.<span class="hljs-property">address</span> &amp;&amp; user.<span class="hljs-property">address</span>.<span class="hljs-property">city</span>;

<span class="hljs-comment">// æˆ–ä½¿ç”¨ try/catchï¼ˆè¿‡åº¦ï¼‰</span>
</code></pre>
<h4 data-id="heading-91">ğŸ”Â <code>?.</code>Â çš„æ ¸å¿ƒä¼˜åŠ¿</h4>
<ul>
<li><strong>è‡ªåŠ¨çŸ­è·¯</strong>ï¼šè‹¥å·¦ä¾§ä¸ºÂ <code>null</code>/<code>undefined</code>ï¼Œç«‹å³è¿”å›Â <code>undefined</code>Â è€Œä¸æŠ¥é”™</li>
<li><strong>æ”¯æŒå¤šç§è®¿é—®å½¢å¼</strong>ï¼šå±æ€§ã€æ–¹æ³•è°ƒç”¨ã€åŠ¨æ€å±æ€§</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> user = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>,
  <span class="hljs-attr">address</span>: { <span class="hljs-attr">city</span>: <span class="hljs-string">'Paris'</span> },
  <span class="hljs-attr">getAge</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-number">30</span>
};

<span class="hljs-comment">// å®‰å…¨è¯»å–å±æ€§</span>
user?.<span class="hljs-property">address</span>?.<span class="hljs-property">city</span>;        <span class="hljs-comment">// 'Paris'</span>
user?.<span class="hljs-property">profile</span>?.<span class="hljs-property">email</span>;       <span class="hljs-comment">// undefinedï¼ˆä¸æŠ¥é”™ï¼‰</span>

<span class="hljs-comment">// å®‰å…¨è°ƒç”¨æ–¹æ³•</span>
user?.<span class="hljs-property">getAge</span>?.();           <span class="hljs-comment">// 30</span>
user?.<span class="hljs-property">getProfile</span>?.();       <span class="hljs-comment">// undefinedï¼ˆæ–¹æ³•ä¸å­˜åœ¨ï¼‰</span>

<span class="hljs-comment">// åŠ¨æ€å±æ€§</span>
<span class="hljs-keyword">const</span> key = <span class="hljs-string">'city'</span>;
user?.<span class="hljs-property">address</span>?.[key];       <span class="hljs-comment">// 'Paris'</span>

<span class="hljs-comment">// ä¸ç©ºå€¼åˆå¹¶æ­é…ï¼ˆå®Œç¾ç»„åˆï¼‰</span>
<span class="hljs-keyword">const</span> email = user?.<span class="hljs-property">contact</span>?.<span class="hljs-property">email</span> ?? <span class="hljs-string">'no-email@example.com'</span>;
</code></pre>
<h4 data-id="heading-92">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>ä¸ä¼šè·³è¿‡ falsy å€¼</strong>ï¼ˆå¦‚Â <code>0</code>,Â <code>''</code>ï¼‰ï¼š
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">a</span>: { <span class="hljs-attr">b</span>: <span class="hljs-number">0</span> } };
obj.<span class="hljs-property">a</span>?.<span class="hljs-property">b</span>; <span class="hljs-comment">// 0ï¼ˆæ­£å¸¸è¿”å›ï¼Œå› ä¸º a å­˜åœ¨ï¼‰</span>
</code></pre>
</li>
<li><strong>ä¸èƒ½ç”¨äºèµ‹å€¼å·¦ä¾§</strong>ï¼š
<pre><code class="hljs language-js" lang="js">user?.<span class="hljs-property">address</span> = {}; <span class="hljs-comment">// SyntaxError</span>
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-93">3.Â <code>BigInt</code>ï¼šè¡¨ç¤ºä»»æ„ç²¾åº¦çš„æ•´æ•°ï¼ˆçªç ´Â <code>Number.MAX_SAFE_INTEGER</code>Â é™åˆ¶ï¼‰</h3>
<h4 data-id="heading-94">èƒŒæ™¯ï¼šJavaScript æ•°å­—çš„ç²¾åº¦é™åˆ¶</h4>
<ul>
<li>JavaScript çš„Â <code>Number</code>Â ç±»å‹åŸºäº IEEE 754 åŒç²¾åº¦æµ®ç‚¹æ•°</li>
<li><strong>å®‰å…¨æ•´æ•°èŒƒå›´</strong>ï¼š<code>-(2^53 - 1)</code>Â åˆ°Â <code>2^53 - 1</code>ï¼ˆå³Â <code>Â±9007199254740991</code>ï¼‰</li>
<li>è¶…å‡ºæ­¤èŒƒå›´ä¼š<strong>ä¸¢å¤±ç²¾åº¦</strong>ï¼š
<pre><code class="hljs language-js" lang="js"><span class="hljs-number">9007199254740992</span> === <span class="hljs-number">9007199254740993</span>; <span class="hljs-comment">// trueï¼ï¼ˆç²¾åº¦ä¸¢å¤±ï¼‰</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-95">ğŸ”Â <code>BigInt</code>Â çš„æ ¸å¿ƒä¼˜åŠ¿</h4>
<ul>
<li><strong>ä»»æ„ç²¾åº¦æ•´æ•°</strong>ï¼ˆä»…å—å†…å­˜é™åˆ¶ï¼‰</li>
<li><strong>åŸç”Ÿæ”¯æŒå¤§æ•°è¿ç®—</strong></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è¶…å¤§æ•´æ•°è¿ç®—</span>
<span class="hljs-keyword">const</span> maxSafe = <span class="hljs-title class_">BigInt</span>(<span class="hljs-title class_">Number</span>.<span class="hljs-property">MAX_SAFE_INTEGER</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(maxSafe + <span class="hljs-number">1n</span>); <span class="hljs-comment">// 9007199254740992nï¼ˆç²¾ç¡®ï¼ï¼‰</span>

<span class="hljs-comment">// æ¯”è¾ƒ</span>
<span class="hljs-number">10n</span> === <span class="hljs-number">10</span>;    <span class="hljs-comment">// falseï¼ˆç±»å‹ä¸åŒï¼‰</span>
<span class="hljs-number">10n</span> == <span class="hljs-number">10</span>;     <span class="hljs-comment">// trueï¼ˆç±»å‹è½¬æ¢ï¼‰</span>

<span class="hljs-comment">// ä¸æ”¯æŒä¸ Number æ··åˆè¿ç®—</span>
<span class="hljs-comment">// 10n + 10;   //  TypeError</span>
<span class="hljs-number">10n</span> + <span class="hljs-title class_">BigInt</span>(<span class="hljs-number">10</span>); <span class="hljs-comment">// 20n </span>

<span class="hljs-comment">// å¸¸è§ç”¨é€”ï¼šåŠ å¯†ã€IDï¼ˆå¦‚ Twitter Snowflake IDï¼‰ã€é‡‘èè®¡ç®—</span>
</code></pre>
<h4 data-id="heading-96">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>ä¸èƒ½ä¸Â <code>Number</code>Â ç›´æ¥è¿ç®—æˆ–æ¯”è¾ƒï¼ˆä¸¥æ ¼ç›¸ç­‰ï¼‰</strong></li>
<li><strong>ä¸æ”¯æŒÂ <code>Math</code>Â å¯¹è±¡æ–¹æ³•</strong>ï¼ˆå¦‚Â <code>Math.sqrt(16n)</code>Â ä¼šæŠ¥é”™ï¼‰</li>
<li><strong>JSON ä¸æ”¯æŒåºåˆ—åŒ– BigInt</strong>ï¼ˆéœ€è‡ªå®šä¹‰ replacerï¼‰ï¼š
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">id</span>: <span class="hljs-number">123n</span> }); <span class="hljs-comment">// TypeError</span>
<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼š</span>
<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">id</span>: <span class="hljs-number">123n</span> }, <span class="hljs-function">(<span class="hljs-params">k, v</span>) =&gt;</span> <span class="hljs-keyword">typeof</span> v === <span class="hljs-string">'bigint'</span> ? v.<span class="hljs-title function_">toString</span>() : v);
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-97">4.Â <code>globalThis</code>ï¼šç»Ÿä¸€è·å–å…¨å±€å¯¹è±¡ï¼ˆè·¨ç¯å¢ƒå…¼å®¹ï¼‰</h3>
<h4 data-id="heading-98">èƒŒæ™¯ï¼šä¸åŒç¯å¢ƒå…¨å±€å¯¹è±¡åç§°ä¸åŒ</h4>

























<table><thead><tr><th>ç¯å¢ƒ</th><th>å…¨å±€å¯¹è±¡</th></tr></thead><tbody><tr><td>æµè§ˆå™¨</td><td><code>window</code></td></tr><tr><td>Web Worker</td><td><code>self</code></td></tr><tr><td>Node.js</td><td><code>global</code></td></tr><tr><td>Deno</td><td><code>globalThis</code></td></tr></tbody></table>
<p>è¿‡å»éœ€å†™å…¼å®¹ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸‘é™‹çš„å…¼å®¹å†™æ³•</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getGlobal</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">window</span>;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">global</span> !== <span class="hljs-string">'undefined'</span>) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">global</span>;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> self !== <span class="hljs-string">'undefined'</span>) <span class="hljs-keyword">return</span> self;
};
</code></pre>
<h4 data-id="heading-99">ğŸ”Â <code>globalThis</code>Â çš„æ ¸å¿ƒä¼˜åŠ¿</h4>
<ul>
<li><strong>å•ä¸€æ ‡å‡†å±æ€§</strong>ï¼Œåœ¨æ‰€æœ‰ JavaScript ç¯å¢ƒä¸­å¯ç”¨</li>
<li><strong>æŒ‡å‘å½“å‰ç¯å¢ƒçš„å…¨å±€å¯¹è±¡</strong></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä»»ä½•ç¯å¢ƒä¸‹éƒ½å®‰å…¨</span>
globalThis.<span class="hljs-property">myApp</span> = { <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0'</span> };

<span class="hljs-comment">// åœ¨æµè§ˆå™¨ä¸­ï¼š</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(globalThis === <span class="hljs-variable language_">window</span>); <span class="hljs-comment">// true</span>

<span class="hljs-comment">// åœ¨ Node.js ä¸­ï¼š</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(globalThis === <span class="hljs-variable language_">global</span>); <span class="hljs-comment">// true</span>

<span class="hljs-comment">// ç”¨äº polyfill æˆ–åº“å¼€å‘</span>
<span class="hljs-keyword">if</span> (!globalThis.<span class="hljs-property">Promise</span>) {
  <span class="hljs-comment">// æä¾› Promise polyfill</span>
}
</code></pre>
<h4 data-id="heading-100">ğŸ’¡ ä½¿ç”¨åœºæ™¯</h4>
<ul>
<li>ç¼–å†™è·¨å¹³å°åº“ï¼ˆå¦‚ Lodashã€Axiosï¼‰</li>
<li>å…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</li>
<li>æ£€æµ‹ç¯å¢ƒç‰¹æ€§ï¼ˆå¦‚Â <code>globalThis.crypto</code>ï¼‰</li>
</ul>
<h2 data-id="heading-101">ES6â€“ES11 æç®€æ€»ç»“</h2>
<ul>
<li><strong>ES6ï¼ˆ2015ï¼‰</strong> ï¼šç°ä»£åŒ–åŸºçŸ³<br/>
<code>let/const</code>ã€ç®­å¤´å‡½æ•°ã€æ¨¡å—ã€Promiseã€Classã€è§£æ„ã€æ¨¡æ¿å­—ç¬¦ä¸² â€”â€” å¥ å®šç°ä»£ JS å¼€å‘èŒƒå¼ã€‚</li>
<li><strong>ES7ï¼ˆ2016ï¼‰</strong> ï¼šå°è€Œå®ç”¨<br/>
<code>includes()</code>ï¼ˆå®‰å…¨æŸ¥æ•°ç»„ï¼‰ã€<code>**</code>ï¼ˆå¹‚è¿ç®—ï¼‰â€”â€” æå‡è¯­ä¹‰æ¸…æ™°åº¦ã€‚</li>
<li><strong>ES8ï¼ˆ2017ï¼‰</strong> ï¼šå¼‚æ­¥é©å‘½<br/>
<code>async/await</code>Â è®©å¼‚æ­¥å¦‚åŒæ­¥ï¼›<code>Object.entries/values</code>ã€<code>padStart</code>Â ç®€åŒ–å¯¹è±¡ä¸å­—ç¬¦ä¸²æ“ä½œã€‚</li>
<li><strong>ES9ï¼ˆ2018ï¼‰</strong> ï¼šå¯¹è±¡ä¸ Promise å®Œå–„<br/>
å¯¹è±¡å±•å¼€/å‰©ä½™ï¼ˆ<code>{...obj}</code>ï¼‰ã€<code>Promise.finally()</code>Â â€”â€” æ“ä½œæ›´å¯¹ç§°ï¼Œæ”¶å°¾æ›´ç»Ÿä¸€ã€‚</li>
<li><strong>ES10ï¼ˆ2019ï¼‰</strong> ï¼šå·¥å…·è¡¥é½<br/>
<code>flat()</code>/<code>flatMap()</code>Â æ‰å¹³æ•°ç»„ï¼Œ<code>Object.fromEntries()</code>Â é€†è½¬ entriesï¼Œ<code>trimStart/End</code>Â æ ‡å‡†åŒ–ã€‚</li>
<li><strong>ES11ï¼ˆ2020ï¼‰</strong> ï¼šå®‰å…¨ä¸è·¨å¹³å°<br/>
<code>?.</code>ï¼ˆå¯é€‰é“¾ï¼‰ã€<code>??</code>ï¼ˆç©ºå€¼åˆå¹¶ï¼‰é˜²å´©æºƒï¼›<code>BigInt</code>Â æ”¯æŒå¤§æ•´æ•°ï¼›<code>globalThis</code>Â ç»Ÿä¸€å…¨å±€å¯¹è±¡ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰“ç ´å †ç§¯å›°å±€ï¼šä¼˜åŒ–å †ç§¯æ¡å½¢å›¾çš„å¯¹æ¯”æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7595974133097807906</link>    <guid>https://juejin.cn/post/7595974133097807906</guid>    <pubDate>2026-01-18T07:22:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595974133097807906" data-draft-id="7595896809652748328" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰“ç ´å †ç§¯å›°å±€ï¼šä¼˜åŒ–å †ç§¯æ¡å½¢å›¾çš„å¯¹æ¯”æ•ˆæœ"/> <meta itemprop="keywords" content="Python,æ•°æ®å¯è§†åŒ–,æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2026-01-18T07:22:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰“ç ´å †ç§¯å›°å±€ï¼šä¼˜åŒ–å †ç§¯æ¡å½¢å›¾çš„å¯¹æ¯”æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T07:22:16.000Z" title="Sun Jan 18 2026 07:22:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ•°æ®å¯è§†åŒ–ä¸­ï¼Œ<strong>å †ç§¯æ¡å½¢å›¾</strong> æ“…é•¿å±•ç¤º <strong>â€œæ•´ä½“ä¸æ„æˆâ€</strong> çš„å…³ç³»ï¼Œä½†å½“æ¯ä¸ªæŸ±å­å†…çš„åˆ†æ®µè¶…è¿‡4ä¸ªæ—¶ï¼Œè¯»è€…å¾ˆéš¾åŒæ—¶è¿½è¸ªå„æ®µçš„é•¿åº¦ã€ä½ç½®ä¸é¢œè‰²æ˜ å°„ï¼Œ <strong>è¯¯è¯»æ¦‚ç‡æ˜¾è‘—ä¸Šå‡</strong>ã€‚</p>
<p>æ›´ç³Ÿçš„æ˜¯ï¼Œè‹¥ä¸åŒç±»åˆ«çš„æ€»é‡å·®å¼‚å¾ˆå¤§ï¼Œå †ç§¯ç»“æ„ä¼šæ”¾å¤§è§†è§‰é”™è§‰ï¼Œå¯¼è‡´â€œçœ‹èµ·æ¥å·®ä¸å¤šâ€çš„ç»“è®ºå¤±çœŸã€‚</p>
<p>ä»Šå¤©ï¼Œæœ¬æ–‡å°†å°è¯•æ¢ç´¢ä¸€ä¸‹æ”¹è¿›å †ç§¯æ¡å½¢å›¾çš„å‘ˆç°æ–¹å¼ï¼Œè®©å¤æ‚æ•°æ®å¯¹æ¯”å˜å¾—ä¸€ç›®äº†ç„¶ã€‚</p>
<p>å¦‚æœå¤§å®¶æœ‰æ›´å¥½çš„æ–¹å¼ï¼Œä¹Ÿæ¬¢è¿æŒ‡æ•™ï¼Œäº¤æµã€‚<strong>å®Œæ•´çš„ä»£ç </strong>ä¼šåœ¨æ–‡æœ«æä¾›å…±äº«çš„åœ°å€ã€‚</p>
<h2 data-id="heading-0">1. å †ç§¯æ¡å½¢å›¾çš„å›°å¢ƒ</h2>
<p><strong>å †ç§¯æ¡å½¢å›¾</strong>å°±åƒä¸€é“ç²¾å¿ƒæ‘†ç›˜çš„å¤šå±‚è›‹ç³•ï¼Œå½“å±‚æ•°ä¸å¤šæ—¶ï¼Œæˆ‘ä»¬èƒ½è½»æ¾åˆ†è¾¨æ¯å±‚çš„é«˜åº¦å·®å¼‚ã€‚</p>
<p>ä½†å½“è›‹ç³•å±‚æ•°è¶…è¿‡4å±‚ï¼Œè¦æ¯”è¾ƒæŸä¸€ç‰¹å®šå£å‘³åœ¨å¤šä¸ªè›‹ç³•ä¸­çš„å«é‡å°±å˜å¾—å¼‚å¸¸å›°éš¾ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ç”¨<code>Python</code>æ¨¡æ‹Ÿä¸€ä¸ªå¸¸è§çš„å †ç§¯æ¡å½¢å›¾åœºæ™¯ï¼šè°ƒæŸ¥æŸäº§å“5ä¸ªåŠŸèƒ½æ¨¡å—çš„ç”¨æˆ·æ»¡æ„åº¦ï¼ˆ5ä¸ªç»´åº¦ï¼‰ï¼Œå…±æ”¶é›†äº†4ä¸ªå­£åº¦çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¨¡æ‹Ÿæ•°æ®ï¼š4ä¸ªå­£åº¦ï¼Œ5ä¸ªæ»¡æ„åº¦ç»´åº¦ï¼ˆå¼ºçƒˆåå¯¹ã€åå¯¹ã€ä¸­ç«‹ã€åŒæ„ã€åšå†³åŒæ„ï¼‰</span>
quarters = [<span class="hljs-string">"ç¬¬ä¸€å­£åº¦"</span>, <span class="hljs-string">"ç¬¬äºŒå­£åº¦"</span>, <span class="hljs-string">"ç¬¬ä¸‰å­£åº¦"</span>, <span class="hljs-string">"ç¬¬å››å­£åº¦"</span>]
categories = [<span class="hljs-string">"å¼ºçƒˆåå¯¹"</span>, <span class="hljs-string">"åå¯¹"</span>, <span class="hljs-string">"ä¸­ç«‹"</span>, <span class="hljs-string">"åŒæ„"</span>, <span class="hljs-string">"åšå†³åŒæ„"</span>]
colors = [<span class="hljs-string">"#FF6B6B"</span>, <span class="hljs-string">"#FF9F6B"</span>, <span class="hljs-string">"#D6CBCB"</span>, <span class="hljs-string">"#6BCF7F"</span>, <span class="hljs-string">"#4D96FF"</span>]

<span class="hljs-comment"># æ¯ä¸ªå­£åº¦çš„æ»¡æ„åº¦åˆ†å¸ƒï¼ˆç™¾åˆ†æ¯”ï¼‰</span>
data = np.array(
    [
        [<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">25</span>, <span class="hljs-number">40</span>, <span class="hljs-number">20</span>],  <span class="hljs-comment"># ç¬¬ä¸€å­£åº¦</span>
        [<span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">20</span>, <span class="hljs-number">45</span>, <span class="hljs-number">24</span>],  <span class="hljs-comment"># ç¬¬äºŒå­£åº¦</span>
        [<span class="hljs-number">4</span>, <span class="hljs-number">12</span>, <span class="hljs-number">18</span>, <span class="hljs-number">43</span>, <span class="hljs-number">23</span>],  <span class="hljs-comment"># ç¬¬ä¸‰å­£åº¦</span>
        [<span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">15</span>, <span class="hljs-number">50</span>, <span class="hljs-number">27</span>],  <span class="hljs-comment"># ç¬¬å››å­£åº¦</span>
    ]
)

<span class="hljs-comment"># ä¼ ç»Ÿæ¨ªå‘å †ç§¯æ¡å½¢å›¾</span>
fig, ax = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">4</span>), gridspec_kw={<span class="hljs-string">"width_ratios"</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>]})

<span class="hljs-comment"># å·¦å›¾ï¼šä¼ ç»Ÿæ¨ªå‘å †ç§¯æ¡å½¢å›¾</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># å³å›¾ï¼šæ¨ªå‘å †å æ¡å½¢å›¾çš„æ”¹è¿›ç‰ˆï¼Œæ·»åŠ åˆ†éš”çº¿</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

plt.tight_layout()
plt.show()
</code></pre>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4a944949d5f4141a21ddd7390882fb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769325736&amp;x-signature=VV%2FTkJeonMm1IOMY4mJ6NkT%2FElY%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªæ¨ªå‘å †ç§¯æ¡å½¢å›¾å±•ç¤ºäº†æ¯ä¸ªå­£åº¦ç”¨æˆ·æ»¡æ„åº¦çš„å®Œæ•´åˆ†å¸ƒï¼Œéšä¾¿å³è¾¹çš„å›¾ç¨å¾®åšäº†ä¸€äº›æ”¹è¿›ï¼Œ</p>
<p>ä½†å¦‚æœæˆ‘ä»¬æƒ³å›ç­”ä»¥ä¸‹é—®é¢˜å°±ä¼šé‡åˆ°å›°éš¾ï¼š</p>
<ul>
<li><strong>"åšå†³åŒæ„"</strong> çš„æ¯”ä¾‹åœ¨å“ªä¸ªå­£åº¦æœ€é«˜ï¼Ÿ</li>
<li><strong>"åå¯¹"</strong> å’Œ <strong>"å¼ºçƒˆåå¯¹"</strong> çš„æ¯”ä¾‹å¦‚ä½•éšæ—¶é—´å˜åŒ–ï¼Ÿ</li>
</ul>
<h2 data-id="heading-1">2. æ‹†è§£é‡æ„--å¤šä¸ªå­å›¾</h2>
<p>ä¸å…¶æŠŠæ‰€æœ‰é£Ÿæç‚–åœ¨ä¸€é”…é‡Œï¼Œä¸å¦‚å°†å®ƒä»¬åˆ†ç›˜æ‘†æ”¾ã€‚</p>
<p>æˆ‘ä»¬å°†<strong>å †ç§¯æ¡å½¢å›¾</strong>æ‹†è§£ä¸º5ä¸ªå°å›¾ï¼Œæ¯ä¸ªå°å›¾åªå…³æ³¨ä¸€ä¸ªæ»¡æ„åº¦ç»´åº¦çš„å­£åº¦å˜åŒ–ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.gridspec <span class="hljs-keyword">as</span> gridspec

fig = plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">6</span>))
gs = gridspec.GridSpec(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, figure=fig, hspace=<span class="hljs-number">0.3</span>, wspace=<span class="hljs-number">0.4</span>)
<span class="hljs-comment"># æ‹†è§£å †ç§¯æ¡å½¢å›¾ï¼šä¸ºæ¯ä¸ªç±»åˆ«åˆ›å»ºå•ç‹¬çš„æ¨ªå‘å­å›¾</span>
axes = []
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    axes.append(fig.add_subplot(gs[<span class="hljs-number">0</span>, i]))

<span class="hljs-comment"># ä¸ºæ¯ä¸ªæ»¡æ„åº¦ç»´åº¦åˆ›å»ºä¸€ä¸ªæ¨ªå‘æ¡å½¢å›¾</span>
<span class="hljs-keyword">for</span> i, (category, color, ax) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(categories, colors, axes)):
    <span class="hljs-comment"># ... çœç•¥ ...</span>

ax = fig.add_subplot(gs[<span class="hljs-number">1</span>, :]) <span class="hljs-comment"># ç¬¬1è¡Œï¼Œæ‰€æœ‰åˆ— (ç­‰åŒäº gs[1, 0:5])</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

plt.show()
</code></pre>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4c9b599c9344074a99f8e386d9210e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769325736&amp;x-signature=hpyP%2BAZdvQB3w%2BMII0U8vZDAOS4%3D" alt="" loading="lazy"/></p>
<p>æ‹†è§£åçš„å›¾è¡¨ç¡®å®æå‡äº†å•ä¸€ç»´åº¦çš„å¯¹æ¯”æ•ˆæœï¼Œä½†ä»æœ‰ä¸€ä¸ªæ˜æ˜¾é—®é¢˜ï¼šæˆ‘ä»¬çš„è§†çº¿éœ€è¦åœ¨å¤šä¸ªå›¾è¡¨é—´æ¥å›è·³è·ƒï¼Œæ— æ³•å½¢æˆç»Ÿä¸€çš„è§†è§‰å°è±¡ã€‚</p>
<p>è¿™å°±åƒé˜…è¯»ä¸€æœ¬åˆ†æ•£åœ¨å¤šä¸ªé¡µé¢çš„è¡¨æ ¼ï¼Œéœ€è¦ä¸æ–­ç¿»é¡µå¯¹ç…§ã€‚</p>
<h2 data-id="heading-2">3. åŒå‘å¯¹æ¯”--è´è¶å›¾</h2>
<p><strong>è´è¶å›¾</strong>ï¼ˆä¹Ÿç§°ä¸ºäººå£é‡‘å­—å¡”å›¾æˆ–åŒå‘æ¡å½¢å›¾ï¼‰æ˜¯æ•°æ®å¯è§†åŒ–çš„"ç‘å£«å†›åˆ€"ï¼Œç‰¹åˆ«é€‚åˆå±•ç¤ºå¯¹ç«‹æˆ–åŒå‘æ¯”è¾ƒçš„æ•°æ®ã€‚</p>
<p>å®ƒçš„è®¾è®¡å“²å­¦æ˜¯ï¼šè®©å¯¹æ¯”åœ¨ä¸­å¿ƒè½´ä¸¤ä¾§è‡ªç„¶å±•å¼€ï¼Œå°±åƒè´è¶å±•å¼€åŒç¿…ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 4. åˆ›å»ºç”»å¸ƒ</span>
fig, ax = plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>,figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
y_pos = np.arange(<span class="hljs-built_in">len</span>(quarters))
<span class="hljs-comment"># æ‹†åˆ†æ•°æ®åˆ—</span>
strongly_disagree = data[:, <span class="hljs-number">0</span>]
disagree          = data[:, <span class="hljs-number">1</span>]
neutral           = data[:, <span class="hljs-number">2</span>]
agree             = data[:, <span class="hljs-number">3</span>]
strongly_agree    = data[:, <span class="hljs-number">4</span>]

<span class="hljs-comment"># ==========================================</span>
<span class="hljs-comment"># æ ¸å¿ƒé€»è¾‘ä¿®æ”¹ï¼šä»¥ä¸­ç«‹(Neutral)çš„ä¸­å¿ƒä¸º0ç‚¹</span>
<span class="hljs-comment"># ==========================================</span>
<span class="hljs-comment"># 1. ç»˜åˆ¶ä¸­ç«‹ (ç°è‰²)ï¼šè·¨è¶Š 0 è½´</span>
<span class="hljs-comment"># left ä» -width/2 å¼€å§‹ï¼Œè¿™æ · 0 å°±åœ¨æ­£ä¸­é—´</span>

<span class="hljs-comment"># 2. ç»˜åˆ¶å·¦ä¾§ (è´Ÿé¢æƒ…ç»ª)ï¼šå‘å·¦å †å </span>
<span class="hljs-comment"># åå¯¹ (Green)ï¼šèµ·å§‹ä½ç½®åœ¨ -neutral/2 çš„å·¦è¾¹</span>

<span class="hljs-comment"># å¼ºçƒˆåå¯¹ (Purple)ï¼šèµ·å§‹ä½ç½®åœ¨ åå¯¹ çš„å·¦è¾¹</span>

<span class="hljs-comment"># 3. ç»˜åˆ¶å³ä¾§ (æ­£é¢æƒ…ç»ª)ï¼šå‘å³å †å </span>
<span class="hljs-comment"># åŒæ„ (Orange)ï¼šèµ·å§‹ä½ç½®åœ¨ neutral/2</span>

<span class="hljs-comment"># å¼ºçƒˆåŒæ„ (Red)ï¼šèµ·å§‹ä½ç½®åœ¨ åŒæ„ çš„å³è¾¹</span>

<span class="hljs-comment"># 5. ç¾åŒ–å›¾è¡¨</span>
<span class="hljs-comment"># æ·»åŠ ä¸­é—´çš„åŸºå‡†çº¿ (ç©¿è¿‡ä¸­ç«‹æ¡å½¢)</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>
plt.show()
</code></pre>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfcc88fbd7ea4b479296930a493d5467~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769325736&amp;x-signature=F3IfS7gZBAnHjT0O4K2aLbQlexE%3D" alt="" loading="lazy"/></p>
<p><strong>è´è¶å›¾</strong>å’Œä¸€èˆ¬çš„å †ç§¯æ¡å½¢å›¾æ”¾åœ¨ä¸€èµ·ï¼Œå¯ä»¥æ˜æ˜¾çœ‹å‡ºä¸¤è€…åœ¨æ•°æ®å±•ç¤ºé€»è¾‘å’Œè§†è§‰é‡å¿ƒä¸Šæœ‰æ˜¾è‘—åŒºåˆ«ã€‚</p>
<p><strong>è´è¶å›¾</strong>ä¾§é‡äºå±•ç¤º <strong>â€œå¯¹ç«‹æ€åº¦çš„å¯¹æ¯”â€</strong>ï¼Œé€‚åˆçœ‹æ­£åä¸¤é¢çš„åŠ›é‡æ‚¬æ®Šä»¥åŠæ•´ä½“çš„æƒ…ç»ªå€¾å‘ï¼Œè€Œä¸”ä¹Ÿä¾¿äºæ¯”è¾ƒåŒä¾§çš„æ•°æ®ã€‚</p>
<h2 data-id="heading-3">4. æ€»ç»“</h2>
<p>æ€»ä¹‹ï¼Œ<strong>å †ç§¯æ¡å½¢å›¾</strong>åƒä¸€é”…å¤§æ‚çƒ©ï¼Œå½“é£Ÿæï¼ˆæ•°æ®ç»´åº¦ï¼‰è¿‡å¤šæ—¶ï¼Œæˆ‘ä»¬å¾ˆéš¾å“å°ï¼ˆåˆ†æï¼‰åˆ°æ¯ç§é£Ÿæçš„åŸå‘³ã€‚</p>
<p>é€šè¿‡æ‹†è§£å’Œé‡æ„ï¼Œæˆ‘ä»¬è·å¾—äº†æ›´æ¸…æ™°çš„è§†è§’ã€‚è€Œè´è¶å›¾åˆ™åƒä¸€ä½ä¼˜é›…çš„èˆè€…ï¼Œå°†å¯¹æ¯”æ•°æ®ä»¥å¯¹ç§°çš„æ–¹å¼å±•å¼€ï¼Œæ—¢ä¿ç•™äº†æ•´ä½“è§†é‡ï¼Œåˆå¼ºåŒ–äº†å±€éƒ¨å¯¹æ¯”ã€‚</p>
<p>ä¼˜ç§€çš„æ•°æ®å¯è§†åŒ–ä¸åœ¨äºå±•ç¤ºæ‰€æœ‰ä¿¡æ¯ï¼Œè€Œåœ¨äºä»¥æœ€å°‘çš„è®¤çŸ¥æˆæœ¬ä¼ è¾¾æœ€å¤šçš„æ´å¯Ÿã€‚</p>
<p>ä¸‹æ¬¡å½“æˆ‘ä»¬é¢å¯¹å¤šç»´æ•°æ®å¯¹æ¯”çš„æŒ‘æˆ˜æ—¶ï¼Œä¸å¦¨è¯•è¯•æ¨ªå‘è´è¶å›¾è¿™æŠŠ"ç‘å£«å†›åˆ€"ï¼Œå®ƒå¯èƒ½ä¼šç»™ä½ å¸¦æ¥æ„æƒ³ä¸åˆ°çš„æ¸…æ™°ä¸ç¾æ„Ÿã€‚</p>
<p>ç»˜åˆ¶æ–‡ä¸­å›¾åƒçš„å®Œæ•´ä»£ç å…±äº«åœ¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Furl11.ctfile.com%2Ff%2F45455611-8606783265-a93d12%3Fp%3D6872" target="_blank" title="https://url11.ctfile.com/f/45455611-8606783265-a93d12?p=6872" ref="nofollow noopener noreferrer">ä¼˜åŒ–å †ç§¯æ¡å½¢å›¾.ipynb</a> (è®¿é—®å¯†ç : 6872)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•™ä½ ç™½å«–ä¸€å¹´è°·æ­ŒGemini Proä¼šå‘˜]]></title>    <link>https://juejin.cn/post/7596181746062491675</link>    <guid>https://juejin.cn/post/7596181746062491675</guid>    <pubDate>2026-01-18T07:39:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596181746062491675" data-draft-id="7596181746062475291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•™ä½ ç™½å«–ä¸€å¹´è°·æ­ŒGemini Proä¼šå‘˜"/> <meta itemprop="keywords" content="GitHub,ç®—æ³•,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-18T07:39:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å·ç¦åŒå­¦"/> <meta itemprop="url" content="https://juejin.cn/user/3456520291098686"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•™ä½ ç™½å«–ä¸€å¹´è°·æ­ŒGemini Proä¼šå‘˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3456520291098686/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å·ç¦åŒå­¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T07:39:45.000Z" title="Sun Jan 18 2026 07:39:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.æ•ˆæœ</h2>
<p>ä¸‹é¢æ˜¯å¼€é€šæˆåŠŸçš„æˆªå›¾ï¼Œå·²ç»å¯ä»¥ç”¨ä¸Šä¸€å¹´çš„Gemini Proäº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3888ddd429f43b98dc6d2b769592fca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769326785&amp;x-signature=6lzXI4DfEDfcDRt9MUJgyTVmhoo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">2.å‡†å¤‡å·¥ä½œ</h2>
<ul>
<li>èƒ½è®¿é—®è°·æ­Œçš„ç½‘ç»œ</li>
<li>ä¸€ä¸ªGoogleè´¦å·</li>
<li>ä¸€ä¸ªVisaå…¨å¸ç§å¡</li>
</ul>
<h2 data-id="heading-2">3.ç½‘ç»œ</h2>
<p>æ³¨æ„ç½‘ç»œèŠ‚ç‚¹éœ€è¦åˆ‡æ¢ç¾å›½èŠ‚ç‚¹ï¼Œå¦åˆ™ä¼šæœ‰ä¸é€šè¿‡çš„é£é™©</p>
<h2 data-id="heading-3">4.å­¦ç”Ÿè®¤è¯</h2>
<p>ç™»å½•ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgemini.google%2Fstudents%2F" target="_blank" title="https://gemini.google/students/" ref="nofollow noopener noreferrer">gemini.google/students/</a></p>
<p>ç‚¹å‡»<code>Get Offer</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef13a8182db745f585336a6265d496f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769326785&amp;x-signature=8JxSJgG8628jS4TTJdfMwrEAfsU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">5. è®¤è¯</h3>
<p>è¿™ä¸€æ­¥å› ä¸ºæˆ‘çš„è°·æ­Œè´¦å·æ˜¯è€å·ï¼Œç‚¹å‡»ä¹‹åæç¤ºå·²ç»ä¸æ”¯æŒè¿™ä¸ªå­¦ç”Ÿè®¤è¯æ–¹æ¡ˆäº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da2012aea79340cdb4210ac5b50dfd5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769326785&amp;x-signature=Sj4DpwDGxyOip2jtbjrElr%2BXRic%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡ä¸è¦ç´§ï¼Œæˆ‘ä»¬å¯ä»¥ä»æŸé±¼ä¸Šå»ä¹°Gemini Proçš„å­¦ç”Ÿè®¤è¯æœåŠ¡ï¼Œæ¶ˆè´¹å¤§æ¦‚30å…ƒå·¦å³å°±è¡Œäº†ï¼Œå°å·ç”¨äº†ä¸åˆ°10åˆ†é’Ÿå°±å®Œæˆäº†è®¤è¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a51ef1bb56a6444bbb2839de4b273906~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769326785&amp;x-signature=AExBFSLbezp4zQDq5g3TzzZSApI%3D" alt="" loading="lazy"/></p>
<p>æ”¶åˆ°è¿™ä¸ªé‚®ä»¶ï¼Œè¿˜æ˜¯å¾ˆæ¿€åŠ¨çš„ï¼Œæ¯•ç«ŸèŠ±ç‚¹å°é’±å°±å¯ä»¥ç”¨åˆ°1å¹´çš„Gemini3å’ŒNano bananaäº†ï¼Œéå¸¸åˆ’ç®—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8297edfb2d742c484a0a773825e791a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769326785&amp;x-signature=xuxSXeqgOb%2BLIrWAPfaqMycLFWo%3D" alt="" loading="lazy"/></p>
<p>å¤§å®¶ä¹Ÿå¿«å»å°è¯•å§ï¼Œæ–°å·åº”è¯¥ä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦çš„</p>
<p>ä¸çŸ¥é“googleè¿™ä¸ªâ€œbugâ€ä¼šé‡Šæ”¾å¤šä¹…ï¼Œè¯´ä¸å®šå“ªä¸€å¤©å°±è¢«å µä¸Šå•¦</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring AI vs Spring AI Alibaba]]></title>    <link>https://juejin.cn/post/7596181746062508059</link>    <guid>https://juejin.cn/post/7596181746062508059</guid>    <pubDate>2026-01-18T07:50:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596181746062508059" data-draft-id="7596134842482933801" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring AI vs Spring AI Alibaba"/> <meta itemprop="keywords" content="åç«¯,äººå·¥æ™ºèƒ½,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-18T07:50:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³ç”¨offeræ‰“ç‰Œ"/> <meta itemprop="url" content="https://juejin.cn/user/578781641968972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring AI vs Spring AI Alibaba
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578781641968972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³ç”¨offeræ‰“ç‰Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T07:50:14.000Z" title="Sun Jan 18 2026 07:50:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.8;font-weight:400;font-size:16px;word-spacing:2px;letter-spacing:2px;overflow-x:hidden;color:#3e3e3e;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:1.2em;border-bottom:2px solid #ef7060;word-spacing:0!important;letter-spacing:0!important;font-size:inherit;line-height:inherit;display:block;font-weight:400;background:#ef7060;color:#fff;padding:10px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>æœ€è¿‘Javaéå¸¸ç«çš„AI agentæ™ºèƒ½ä½“å¼€å‘æ¡†æ¶Spring AI å’Œ Spring AI Alibabaï¼Œæˆ‘ä»¬åˆ°åº•è¯¥é€‰è°å‘¢ï¼Ÿå®ƒä»¬åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½ç»™ä½ çš„æŠ€æœ¯é€‰å‹å¸¦æ¥å¸®åŠ©ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥è®¨è®ºä¸€ä¸‹å§ï¼</p>
<h2 data-id="heading-1">SAAç»§æ‰¿Spring AI: æ‰©å±•å¼€å‘AI agentçš„è¾¹ç•Œ</h2>
<h3 data-id="heading-2">åŸç”ŸSpring AIä¸ºä»€ä¹ˆâ€œä¸è¡Œâ€</h3>
<p>åŸç”Ÿ Spring AI éå¸¸è½»é‡ï¼Œé€‚åˆå†™ç®€å•çš„ AI è°ƒç”¨ã€‚ä½†ä¸€æ—¦è¿›å…¥<strong>å¤æ‚çš„ä¼ä¸šçº§ç”Ÿäº§ç¯å¢ƒ</strong>ï¼Œä½ ä¼šå‘ç°åŸç”Ÿæ¡†æ¶åœ¨â€œç¼–æ’â€ã€â€œè¿ç»´â€å’Œâ€œæ²»ç†â€ä¸Šæ˜¯ç¼ºå¤±çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸç”Ÿçš„SAæ³¨é‡æä¾›æ„å»ºAIçš„ç»„ä»¶èƒ½åŠ›ï¼Œä½†æ˜¯å¯¹ä¼ä¸šå®é™…å¼€å‘ä¸­æ‰€éœ€è¦çš„çš„æ™ºèƒ½ä½“ç¼–æ’èƒ½åŠ›æŠ½è±¡ä¸å¤Ÿï¼Œä¸å¤Ÿç®€å•æ˜“ç”¨ï¼Œå¼€å‘è€…ä¸èƒ½å¾ˆå¿«åœ°ä¸Šæ‰‹å¼€å‘ã€‚</p>
<h3 data-id="heading-3">Spring AI Alibabaåˆåšäº†ä»€ä¹ˆï¼Ÿ</h3>
<p>Spring AI Alibaba åŸºäº Spring AI æ„å»ºï¼Œå› æ­¤å®ƒç»§æ‰¿äº† Spring AI çš„æ‰€æœ‰åŸå­èƒ½åŠ›æŠ½è±¡ï¼Œå¦‚æ¨¡å‹é€šä¿¡ï¼ˆChatModelï¼‰ã€æç¤ºè¯ï¼ˆPromptï¼‰ã€æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ã€è®°å¿†ï¼ˆChatMemoryï¼‰ã€å·¥å…·ï¼ˆToolï¼‰ã€æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰ç­‰ï¼Œå¸®åŠ© Java å¼€å‘è€…å¿«é€Ÿæ„å»º AI åº”ç”¨ã€‚è¿™ä½¿å¾—å¼€å‘è€…åœ¨ä½¿ç”¨ SAA æ—¶å¯ä»¥åˆ©ç”¨ Spring AI æä¾›çš„åŸºç¡€ç»„ä»¶ï¼ŒåŒæ—¶äº«å— SAA å¸¦æ¥çš„é¢å¤–åŠŸèƒ½ã€‚</p>
<p>ä¸Šé¢è¯´äº†ä¸¤è€…æ˜¯ç»§æ‰¿çš„å…³ç³»ï¼Œé‚£ä¹ˆSAAåˆæ‰©å±•äº†ä»€ä¹ˆï¼Ÿ</p>
<p>é‡ç‚¹æ˜¯æä¾›äº†<strong>æ™ºèƒ½ä½“ç¼–æ’èƒ½åŠ›</strong>ï¼Œç”¨æˆ·ä¸éœ€è¦è‡ªå·±å†å®šä¹‰Nodeï¼ŒEgdeç­‰ç­‰(ä¹Ÿå°±æ˜¯ä¸€ç³»åˆ—å¤æ‚é€»è¾‘åº•å±‚è½®å­)ï¼Œå¯ä»¥ç›´æ¥å¤ç”¨ï¼Œä¸“ä¸šä¸”å¯é ï¼</p>
<p>Spring AI Alibaba Graph æ˜¯å…¶æ ¸å¿ƒå®ç°ä¹‹ä¸€ï¼Œåœ¨è®¾è®¡ç†å¿µä¸ŠåŒºåˆ«äº Spring AI åªåšåº•å±‚åŸå­æŠ½è±¡ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…æ›´å®¹æ˜“åœ°æ„å»ºæ™ºèƒ½ä½“åº”ç”¨ï¼Œæ”¯æŒå·¥ä½œæµå’Œå¤šæ™ºèƒ½ä½“åº”ç”¨å¼€å‘ã€‚åŸç”Ÿ Spring AI æ›´ä¾§é‡äºæä¾›æ„å»º AI èƒ½åŠ›çš„åŸå­ç»„ä»¶ï¼Œè€Œ SAA åˆ™åœ¨è¿™äº›åŸå­ç»„ä»¶ä¹‹ä¸Šæ„å»ºäº†æ›´é«˜çº§çš„æ™ºèƒ½ä½“ç¼–æ’èƒ½åŠ›ã€‚</p>
<p>æˆ‘åœ¨ä¸‹é¢åˆ—å‡ºæ¥ä¸€äº›ä»£ç ä½ ä¸€çœ¼å°±çŸ¥é“äº†åŒºåˆ«ï¼Œå“ªä¸ªæ›´åŠ å®¹æ˜“ä¸Šæ‰‹ï¼Œå¯æ“ä½œæ€§æ›´å¼ºï¼š</p>
<ul>
<li>åŸç”Ÿ Spring AI (ç®€å•çš„çº¿æ€§è°ƒç”¨):</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åªèƒ½åšç®€å•çš„é—®ç­”ï¼Œå¤æ‚é€»è¾‘å¾—è‡ªå·±ç”¨ Java å†™</span>
<span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> chatClient.prompt(<span class="hljs-string">"ä½ å¥½"</span>).call().content();
</code></pre>
<ul>
<li>Spring AI Alibaba (Graph ç¼–æ’ - ä¼ªä»£ç ):</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å£°æ˜ä¸€ä¸ªå¤æ‚çš„ Agent å·¥ä½œæµ</span>
<span class="hljs-type">Graph</span> <span class="hljs-variable">graph</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Graph</span>()
    .addNode(<span class="hljs-string">"input_guard"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecurityCheckNode</span>()) <span class="hljs-comment">// 1. å…ˆåšå®‰å…¨æ£€æŸ¥</span>
    .addNode(<span class="hljs-string">"search"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">RAGSearchNode</span>())          <span class="hljs-comment">// 2. å†åšæœç´¢</span>
    .addNode(<span class="hljs-string">"generate"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">LLMGenerateNode</span>())      <span class="hljs-comment">// 3. æœ€åç”Ÿæˆ</span>
    .addEdge(<span class="hljs-string">"input_guard"</span>, <span class="hljs-string">"search"</span>)                <span class="hljs-comment">// å®šä¹‰æµè½¬</span>
    .addEdge(<span class="hljs-string">"search"</span>, <span class="hljs-string">"generate"</span>);

<span class="hljs-comment">// è¿è¡Œ</span>
graph.run(<span class="hljs-string">"ç”¨æˆ·çš„å¤æ‚è¯·æ±‚"</span>);
</code></pre>
<h2 data-id="heading-4"><strong>SAA è§£å†³æˆ–æ‰©å±•çš„é—®é¢˜/èƒ½åŠ›</strong></h2>
<p>ä¸Šé¢ç®€å•è®²äº†ä¸¤è€…çš„åŒºåˆ«ä¸è”ç³»ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬è¯¦ç»†è®²è®²SAAåˆ°åº•æ‰©å±•äº†ä»€ä¹ˆï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚</p>
<h3 data-id="heading-5">SAAçš„æ¶æ„</h3>
<p>æˆ‘ä»¬å…ˆæ¥åˆ†æä¸€æ³¢SAAå½“å‰çš„æ¶æ„ï¼Œä»¥ä¾¿ä½ æ›´å¥½åœ°å¬æ‡‚ä¸‹é¢çš„å†…å®¹ã€‚</p>
<p>Spring AI Alibaba é¡¹ç›®ä»æ¶æ„ä¸ŠåŒ…å«å¦‚ä¸‹å››å±‚ï¼š</p>
<ul>
<li><strong>Admin</strong>ï¼Œæ˜¯ä¸€ä¸ªä¸€ç«™å¼ä»£ç†å¹³å°ï¼Œæ”¯æŒå¯è§†åŒ–ä»£ç†å¼€å‘ã€å¯è§‚æµ‹æ€§ã€è¯„ä¼°å’Œ MCP ç®¡ç†ç­‰åŠŸèƒ½ã€‚å®ƒè¿˜é›†æˆäº† Dify ç­‰å¼€æºä½ä»£ç å¹³å°ï¼Œå®ç°äº†ä» DSL å¿«é€Ÿè¿ç§»åˆ° Spring AI Alibaba é¡¹ç›®</li>
<li><strong>Agent Framework</strong>ï¼Œæ˜¯ä¸€ä¸ªä»¥ ReactAgent è®¾è®¡ç†å¿µä¸ºæ ¸å¿ƒçš„ Agent å¼€å‘æ¡†æ¶ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿæ„å»ºå…·å¤‡è‡ªåŠ¨ä¸Šä¸‹æ–‡å·¥ç¨‹å’Œäººæœºäº¤äº’ç­‰æ ¸å¿ƒèƒ½åŠ›çš„Agentã€‚</li>
<li><strong>Graph</strong>ï¼Œgraph æ˜¯ä¸€ä¸ªä½çº§åˆ«çš„å·¥ä½œæµå’Œå¤šä»£ç†åè°ƒæ¡†æ¶ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…å®ç°å¤æ‚çš„åº”ç”¨ç¨‹åºç¼–æ’ï¼Œå®ƒå…·å¤‡ä¸°å¯Œçš„é¢„ç½®èŠ‚ç‚¹å’Œç®€åŒ–çš„å›¾çŠ¶æ€å®šä¹‰ï¼ŒGraph æ˜¯ Agent Framework çš„åº•å±‚è¿è¡Œæ—¶åŸºåº§ã€‚</li>
<li><strong>Augmented LLM</strong>ï¼Œä»¥ Spring AI æ¡†æ¶åº•å±‚åŸå­æŠ½è±¡ä¸ºåŸºç¡€ï¼Œä¸ºæ„å»ºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åº”ç”¨æä¾›åŸºç¡€æŠ½è±¡ï¼Œä¾‹å¦‚æ¨¡å‹ï¼ˆModelï¼‰ã€å·¥å…·ï¼ˆToolï¼‰ã€å¤šæ¨¡æ€ç»„ä»¶ï¼ˆMCPï¼‰ã€æ¶ˆæ¯ï¼ˆMessageï¼‰ã€å‘é‡å­˜å‚¨ï¼ˆVector Storeï¼‰ç­‰</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8c52e41447649e6831b99cf13aad12b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769327413&amp;x-signature=BXaz5uJkj03MFmQqaXFIPmSP4%2FQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">Agent Studioï¼šAI Agent å¼€å‘ä¸ç®¡ç†å¹³å°</h3>
<p>Spring AI Alibaba æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ AI Agent å¼€å‘ä¸è¯„ä¼°å¹³å° (Agent Studio)ï¼Œæ”¯æŒä» Prompt å·¥ç¨‹ã€æ•°æ®é›†ç®¡ç†ã€è¯„ä¼°å™¨é…ç½®åˆ°å®éªŒæ‰§è¡Œå’Œç»“æœåˆ†æçš„å®Œæ•´å·¥ä½œæµã€‚è¿™ä¸ªå¹³å°è§£å†³äº†åŸç”Ÿæ¡†æ¶åœ¨ Agent å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†æ–¹é¢çš„ç©ºç™½ã€‚</p>
<ul>
<li><strong>Prompt ç®¡ç†</strong>ï¼šæ”¯æŒ Prompt æ¨¡æ¿çš„åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ã€ç‰ˆæœ¬æ§åˆ¶ã€å®æ—¶è°ƒè¯•å’Œä¼šè¯ç®¡ç†ã€‚</li>
<li><strong>æ•°æ®é›†ç®¡ç†</strong>ï¼šæ”¯æŒå¤šç§æ ¼å¼çš„æ•°æ®é›†å¯¼å…¥ã€ç‰ˆæœ¬ç®¡ç†ã€ç»†ç²’åº¦çš„æ•°æ®é¡¹ CRUD æ“ä½œï¼Œå¹¶æ”¯æŒä» OpenTelemetry é“¾è·¯æ•°æ®åˆ›å»ºæ•°æ®é›†ã€‚</li>
<li><strong>è¯„ä¼°å™¨ç®¡ç†</strong>ï¼šæ”¯æŒè¯„ä¼°å™¨çš„åˆ›å»ºã€é…ç½®ã€æ¨¡æ¿ç³»ç»Ÿã€åœ¨çº¿è°ƒè¯•ã€æµ‹è¯•å’Œç‰ˆæœ¬ç®¡ç†ã€‚</li>
<li><strong>å®éªŒç®¡ç†</strong>ï¼šè‡ªåŠ¨åŒ–æ‰§è¡Œè¯„ä¼°å®éªŒï¼Œæä¾›è¯¦ç»†çš„å®éªŒç»“æœåˆ†æå’Œç»Ÿè®¡ï¼Œå¹¶æ”¯æŒæ‰¹é‡å¤„ç†ã€‚</li>
<li><strong>æ¨¡å‹é…ç½®</strong>ï¼šæ”¯æŒ OpenAIã€DashScopeã€DeepSeek ç­‰ä¸»æµ AI æ¨¡å‹ï¼Œæä¾›ç»Ÿä¸€çš„å‚æ•°é…ç½®å’Œè¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢åŠŸèƒ½</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cbff6cc1dc84fada1e7517f99062167~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769327413&amp;x-signature=%2F%2F2zf5lwLk423l0qWRsD8vx1gfY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">Agent FrameWork: æ›´åŠ ç®€å•å¿«é€Ÿåœ°æ„å»ºAgent</h3>
<p><strong>Agent Framework</strong>ï¼Œæ˜¯ä¸€ä¸ªä»¥ ReactAgent è®¾è®¡ç†å¿µä¸ºæ ¸å¿ƒçš„ Agent å¼€å‘æ¡†æ¶ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿæ„å»ºå…·å¤‡è‡ªåŠ¨ä¸Šä¸‹æ–‡å·¥ç¨‹å’Œäººæœºäº¤äº’ç­‰æ ¸å¿ƒèƒ½åŠ›çš„Agentã€‚</p>
<p><strong>æ”¯æŒ Multi-agent</strong>ï¼Œå†…ç½® ReAct Agentã€Supervisor ç­‰å¸¸è§„æ™ºèƒ½ä½“æ¨¡å¼ã€‚å®ç°äº†åŸºæœ¬çš„ä»£ç†äº¤äº’å’Œå·¥å…·æ‰§è¡Œï¼Œå¯ä»¥å¿«é€Ÿå¼€å‘å…·æœ‰å†…ç½®<strong>ä¸Šä¸‹æ–‡å·¥ç¨‹</strong>å’Œ<strong>äººæœºäº¤äº’</strong>æ”¯æŒçš„ä»£ç†ã€‚</p>
<p>å¯¹äºéœ€è¦æ›´å¤æ‚æµç¨‹æ§åˆ¶çš„åœºæ™¯ï¼ŒAgent Framework æä¾›äº†å†…ç½®çš„å·¥ä½œæµï¼Œä¾‹å¦‚<code>SequentialAgent</code>ã€<code>ParallelAgent</code>ã€<code>RoutingAgent</code>ã€<code>LoopAgent</code>å’Œ<code>SupervisorAgent</code>ï¼ŒSAAå®˜æ–¹æ¨èç›´æ¥ä½¿ç”¨è¿™å¥—é«˜çº§æŠ½è±¡æ¥ç›´æ¥æ„å»ºagentã€‚å½“ç„¶å¦‚æœä½ æœ‰æ›´åŠ å¤æ‚çš„åœºæ™¯å’Œæ›´ç²¾å‡†çš„éœ€æ±‚ï¼Œåˆ™éœ€è¦ä½¿ç”¨æˆ‘æ¥ä¸‹æ¥è®²çš„Graphæ¡†æ¶ã€‚</p>
<h3 data-id="heading-8">Graph: æ›´å¤æ‚ï¼Œæ›´ç²¾å‡†</h3>
<p><strong>Graph</strong>ï¼Œæ˜¯ä¸€ä¸ªä½çº§åˆ«çš„å·¥ä½œæµå’Œå¤šä»£ç†åè°ƒæ¡†æ¶ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…å®ç°å¤æ‚çš„åº”ç”¨ç¨‹åºç¼–æ’ï¼Œå®ƒå…·å¤‡ä¸°å¯Œçš„é¢„ç½®èŠ‚ç‚¹å’Œç®€åŒ–çš„å›¾çŠ¶æ€å®šä¹‰ï¼ŒGraph æ˜¯ Agent Framework çš„åº•å±‚è¿è¡Œæ—¶åŸºåº§ã€‚ä¸ Agent Framework ç›¸æ¯”ï¼Œç”¨æˆ·å¯ä»¥åŸºäº Graph API æ„å»ºæ›´çµæ´»çš„å¤šä»£ç†å·¥ä½œæµã€‚</p>
<p>é‚£ä¹ˆæ€»çš„æ¥è¯´ï¼ŒSAA Graph è§£å†³äº†åŸç”Ÿæ¡†æ¶åœ¨å¤æ‚ä»»åŠ¡ç¼–æ’å’Œå¤šæ™ºèƒ½ä½“åä½œæ–¹é¢çš„ä¸è¶³ã€‚å®ƒå€Ÿé‰´ Langgraphï¼Œæ˜¯ Java ç‰ˆçš„ç±» Langgraph å®ç°ï¼Œä½¿å¼€å‘è€…æ— éœ€å…³å¿ƒæµç¨‹ç¼–æ’ã€ä¸Šä¸‹æ–‡è®°å¿†ç®¡ç†ç­‰åº•å±‚å®ç°ã€‚</p>
<ul>
<li><strong>æ”¯æŒå·¥ä½œæµ</strong>ï¼šå†…ç½®å¤§é‡é¢„ç½®èŠ‚ç‚¹ï¼Œä¸ä¸»æµä½ä»£ç å¹³å°å¯¹é½ï¼Œä¾‹å¦‚ LlmNodeï¼ˆå¤§æ¨¡å‹èŠ‚ç‚¹ï¼‰ã€QuestionClassifierNodeï¼ˆé—®é¢˜åˆ†ç±»èŠ‚ç‚¹ï¼‰ã€ToolNodeï¼ˆå·¥å…·èŠ‚ç‚¹ï¼‰ã€‚</li>
<li><strong>åŸç”Ÿæ”¯æŒ Streaming</strong>ï¼šæä¾›æµå¼å¤„ç†èƒ½åŠ›ã€‚</li>
<li><strong>Human-in-the-loop</strong>ï¼šé€šè¿‡äººç±»ç¡®è®¤èŠ‚ç‚¹ï¼Œæ”¯æŒä¿®æ”¹çŠ¶æ€ã€æ¢å¤æ‰§è¡Œã€‚</li>
<li><strong>è®°å¿†ä¸æŒä¹…å­˜å‚¨</strong>ï¼šæ”¯æŒè®°å¿†ç®¡ç†ä¸æŒä¹…åŒ–å­˜å‚¨ï¼Œ</li>
<li><strong>æµç¨‹å¿«ç…§ã€åµŒå¥—åˆ†æ”¯ã€å¹¶è¡Œåˆ†æ”¯</strong>ï¼šæä¾›äº†å¤æ‚å·¥ä½œæµæ‰€éœ€çš„æ§åˆ¶èƒ½åŠ›</li>
</ul>
<h3 data-id="heading-9">ä¼ä¸šçº§ AI åº”ç”¨ç”Ÿæ€é›†æˆ</h3>
<ul>
<li><strong>MCP é›†æˆ</strong>ï¼šåŸç”Ÿ Spring AI æä¾›äº† MCP (Model Context Protocol) å®¢æˆ·ç«¯ï¼Œè€Œ SAA åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•äº†ä¼ä¸šçº§çš„ MCP é›†æˆï¼ŒåŒ…æ‹¬ Nacos MCP Registry åˆ†å¸ƒå¼æ³¨å†Œä¸å‘ç°ã€è‡ªåŠ¨ Router è·¯ç”±ï¼Œæ”¯æŒå­˜é‡ Spring Cloudã€Dubbo ç­‰åº”ç”¨é›¶ä»£ç æ”¹é€ å®ç° API åˆ° MCP æœåŠ¡å‘å¸ƒã€‚Â <code>McpManager</code>Â è´Ÿè´£å¤„ç† MCP å®¢æˆ·ç«¯çš„åˆ›å»ºã€å·¥å…·æ£€ç´¢å’Œå·¥å…·è°ƒç”¨Â </li>
<li><strong>RAG çŸ¥è¯†åº“</strong>ï¼šæ·±åº¦é›†æˆäº†ç™¾ç‚¼å¹³å°ï¼Œæä¾› RAG çŸ¥è¯†åº“ç®¡ç†èƒ½åŠ›ï¼Œæ”¯æŒæ•°æ®è§£æã€åˆ‡ç‰‡ã€å‘é‡åŒ–é¢„å¤„ç†ï¼Œå¹¶ä¸å‘é‡æ£€ç´¢æ•°æ®åº“ç»“åˆã€‚</li>
<li><strong>å¯è§‚æµ‹æ€§ (Observability)</strong> ï¼šé€šè¿‡é›†æˆ OpenTelemetryã€ARMS ç­‰ï¼Œæä¾›å®Œæ•´çš„é“¾è·¯è¿½è¸ªã€æœåŠ¡ç›‘æ§ã€Trace åˆ†æç­‰åŠŸèƒ½ï¼Œè§£å†³äº† AI Agent ç”Ÿäº§è½åœ°è¿‡ç¨‹ä¸­çš„å¯è§‚æµ‹æ€§é—®é¢˜ã€‚</li>
<li><strong>AI ç½‘å…³</strong>ï¼šé€šè¿‡é›†æˆ Higress AI ç½‘å…³ï¼Œæå‡æ¨¡å‹è°ƒç”¨çš„ç¨³å®šæ€§ä¸çµæ´»æ€§ã€‚</li>
<li><strong>Nl2sql æ¨¡å—</strong>ï¼šåŸºäºå¤§æ¨¡å‹çš„ ChatBI æŠ€æœ¯ï¼Œå¸®åŠ©ç”¨æˆ·è½»æ¾å®ç°è‡ªç„¶è¯­è¨€äº¤äº’çš„æ•°æ®åˆ†æï¼Œè‡ªåŠ¨ç”Ÿæˆ SQL æŸ¥è¯¢è¯­å¥ã€‚</li>
</ul>
<p><strong>è¿™å°±æ˜¯é˜¿é‡Œé•¿æœŸæ„æˆçš„ç”Ÿæ€æŠ¤åŸæ²³ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä»–ä»¬æœ‰èƒ½åŠ›åšå‡ºSAAï¼</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed7bba1401274c299cd5bd9f6e51addb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769327413&amp;x-signature=NRfAI7oBmbwB40gJFwbBxnS6nlw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">Spring Boot Starters ç®€åŒ–å¼€å‘éƒ¨ç½²</h3>
<ul>
<li>SAA æä¾›äº†Â <code>spring-boot-starters</code>ï¼Œç®€åŒ–äº† AI åº”ç”¨çš„å¼€å‘å’Œéƒ¨ç½²ï¼Œè§£å†³äº†åŸç”Ÿæ¡†æ¶åœ¨åˆ†å¸ƒå¼ Agent é—´é€šä¿¡ã€åŠ¨æ€é…ç½®ç®¡ç†ã€é«˜çº§ AI å›¾å¤„ç†å’Œå¯è§‚æµ‹æ€§ç­‰æ–¹é¢çš„ä¾¿æ·æ€§é—®é¢˜ã€‚</li>
<li>é›†æˆäº† Nacos è¿›è¡Œåˆ†å¸ƒå¼ Agent éƒ¨ç½²ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ã€è´Ÿè½½å‡è¡¡ã€‚</li>
<li>æ”¯æŒåŠ¨æ€é…ç½® AI Agentï¼Œé€šè¿‡ YAML é…ç½®åŠ¨æ€åŠ è½½å’Œä¿®æ”¹ AI æ¨¡å‹è®¾ç½®ã€Prompt æ¨¡æ¿å’Œå·¥å…·å®šä¹‰</li>
</ul>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>æ€»ä¹‹ï¼ŒSpring AI Alibaba åœ¨ Spring AI æä¾›çš„åŸºç¡€èƒ½åŠ›ä¹‹ä¸Šï¼Œæä¾›äº†æ›´å®Œå–„çš„ AI Agent å¼€å‘ç”Ÿæ€ç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šæ™ºèƒ½ä½“ç¼–æ’ã€ä¼ä¸šçº§é›†æˆå’Œå…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†æ–¹é¢è¿›è¡Œäº†æ˜¾è‘—çš„æ‰©å±•å’Œä¼˜åŒ–ï¼Œæ—¨åœ¨åŠ é€Ÿä¼ä¸š AI åº”ç”¨çš„è½åœ°ã€‚</p>
<p>è™½ç„¶ç›®å‰SAAè¿˜æœ‰å¾ˆå¤šç»†èŠ‚æ²¡æœ‰ä¿®é¥°å¥½ï¼Œä½†æ˜¯éšç€å‡ ä¸ªå¤§ç‰ˆæœ¬çš„å†è¿­ä»£ï¼Œæˆ‘ç›¸ä¿¡SAAå°±æ˜¯æœªæ¥Java AI Agentå¼€å‘æ¡†æ¶çš„ä»£è¡¨ï¼</p>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« ç»™ä½ å¸¦æ¥äº†ä¸é”™çš„ä½“æ„Ÿï¼Œé‚£å°±ç»™æˆ‘ç‚¹èµ+æ”¶è—+å…³æ³¨å§ï¼Œè¿™æ˜¯æˆ‘ç»§ç»­æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›â¤ï¸</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Kotlinç³»åˆ—08ã€‘æ³›å‹è¿›é˜¶ï¼šä»å‹å˜åˆ°å…·ä½“åŒ–ç±»å‹å‚æ•°çš„ç±»å‹å®‰å…¨ä¹‹æ—…]]></title>    <link>https://juejin.cn/post/7595808703074893850</link>    <guid>https://juejin.cn/post/7595808703074893850</guid>    <pubDate>2026-01-17T12:28:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595808703074893850" data-draft-id="7595894884957077555" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Kotlinç³»åˆ—08ã€‘æ³›å‹è¿›é˜¶ï¼šä»å‹å˜åˆ°å…·ä½“åŒ–ç±»å‹å‚æ•°çš„ç±»å‹å®‰å…¨ä¹‹æ—…"/> <meta itemprop="keywords" content="Kotlin,Android,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2026-01-17T12:28:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Kotlinç³»åˆ—08ã€‘æ³›å‹è¿›é˜¶ï¼šä»å‹å˜åˆ°å…·ä½“åŒ–ç±»å‹å‚æ•°çš„ç±»å‹å®‰å…¨ä¹‹æ—…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T12:28:11.000Z" title="Sat Jan 17 2026 12:28:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šé‚£ä¸ªè®©æˆ‘å›°æƒ‘ä¸‰å¤©çš„ç¼–è¯‘é”™è¯¯</h2>
<p>è¿˜è®°å¾—åˆšå­¦Kotlinæ³›å‹æ—¶ï¼Œæˆ‘å†™äº†è¿™æ ·ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æˆ‘ä»¥ä¸ºè¿™æ ·å¯ä»¥...</span>
<span class="hljs-keyword">val</span> strings: List&lt;String&gt; = listOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
<span class="hljs-keyword">val</span> objects: List&lt;Any&gt; = strings  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼Type mismatch</span>

<span class="hljs-comment">// ä½†è¿™æ ·å´å¯ä»¥ï¼Ÿ</span>
<span class="hljs-keyword">val</span> readOnlyStrings: List&lt;String&gt; = listOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
<span class="hljs-keyword">val</span> readOnlyObjects: List&lt;Any&gt; = readOnlyStrings  <span class="hljs-comment">// âœ… ç¼–è¯‘é€šè¿‡ï¼</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªä¸è¡Œï¼Œç¬¬äºŒä¸ªå´å¯ä»¥ï¼Ÿ</strong> è¿™ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘æ•´æ•´ä¸‰å¤©ã€‚åæ¥æ‰æ˜ç™½ï¼Œè¿™æ¶‰åŠåˆ°æ³›å‹çš„ <strong>å‹å˜ï¼ˆVarianceï¼‰</strong> æ¦‚å¿µã€‚</p>
<p>å†çœ‹è¿™ä¸ªåœºæ™¯ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æƒ³å†™ä¸€ä¸ªé€šç”¨çš„ç­›é€‰å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">filterItems</span><span class="hljs-params">(items: <span class="hljs-type">List</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: List&lt;T&gt; {
    <span class="hljs-keyword">return</span> items.filter { it <span class="hljs-keyword">is</span> String }  <span class="hljs-comment">// âŒ æ€ä¹ˆåˆ¤æ–­ç±»å‹ï¼Ÿ</span>
}

<span class="hljs-comment">// è¿è¡Œæ—¶ç±»å‹æ“¦é™¤ï¼Œæ³›å‹ä¿¡æ¯ä¸¢å¤±äº†</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">createInstance</span><span class="hljs-params">()</span></span>: T {
    <span class="hljs-keyword">return</span> T()  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šCannot use T as reified type parameter</span>
}
</code></pre>
<p>è¿™äº›é—®é¢˜çš„ç­”æ¡ˆå°±åœ¨Kotlinæ³›å‹çš„é«˜çº§ç‰¹æ€§ä¸­ï¼š<strong>å‹å˜ã€å…·ä½“åŒ–ç±»å‹å‚æ•°ã€ç±»å‹è¾¹ç•Œ</strong>ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥æ¢ç´¢è¿™äº›è®©æ³›å‹æ›´å¼ºå¤§ã€æ›´å®‰å…¨çš„ç‰¹æ€§ã€‚</p>
<h2 data-id="heading-1">æ³›å‹åŸºç¡€å›é¡¾</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯æ³›å‹</h3>
<p>æ³›å‹å…è®¸æˆ‘ä»¬ç¼–å†™å¯ä»¥å¤„ç†å¤šç§ç±»å‹çš„ä»£ç ï¼ŒåŒæ—¶ä¿æŒç±»å‹å®‰å…¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ²¡æœ‰æ³›å‹ï¼šéœ€è¦ä¸ºæ¯ç§ç±»å‹å†™ä¸€ä¸ªç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">IntBox</span>(<span class="hljs-keyword">val</span> value: <span class="hljs-built_in">Int</span>)
<span class="hljs-keyword">class</span> <span class="hljs-title class_">StringBox</span>(<span class="hljs-keyword">val</span> value: String)
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBox</span>(<span class="hljs-keyword">val</span> value: User)

<span class="hljs-comment">// ä½¿ç”¨æ³›å‹ï¼šä¸€ä¸ªç±»æå®šæ‰€æœ‰ç±»å‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-keyword">val</span> value: T)

<span class="hljs-keyword">val</span> intBox = Box(<span class="hljs-number">42</span>)           <span class="hljs-comment">// Box&lt;Int&gt;</span>
<span class="hljs-keyword">val</span> stringBox = Box(<span class="hljs-string">"Hello"</span>)   <span class="hljs-comment">// Box&lt;String&gt;</span>
<span class="hljs-keyword">val</span> userBox = Box(User())      <span class="hljs-comment">// Box&lt;User&gt;</span>
</code></pre>
<h3 data-id="heading-3">æ³›å‹çš„ç±»å‹æ“¦é™¤</h3>
<p>Javaå’ŒKotlinéƒ½ä½¿ç”¨<strong>ç±»å‹æ“¦é™¤</strong>æ¥å®ç°æ³›å‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç¼–è¯‘æœŸ</span>
<span class="hljs-keyword">val</span> stringList: List&lt;String&gt; = listOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
<span class="hljs-keyword">val</span> intList: List&lt;<span class="hljs-built_in">Int</span>&gt; = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

<span class="hljs-comment">// è¿è¡Œæ—¶ï¼šç±»å‹å‚æ•°è¢«æ“¦é™¤</span>
<span class="hljs-comment">// stringListå’ŒintListçš„è¿è¡Œæ—¶ç±»å‹éƒ½æ˜¯Listï¼Œæ²¡æœ‰æ³›å‹å‚æ•°ä¿¡æ¯</span>
</code></pre>
<p><strong>ç±»å‹æ“¦é™¤çš„å½±å“</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ ä¸èƒ½åœ¨è¿è¡Œæ—¶æ£€æŸ¥æ³›å‹ç±»å‹</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">isListOf</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> value <span class="hljs-keyword">is</span> List&lt;T&gt;  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šCannot check for instance of erased type</span>
}

<span class="hljs-comment">// âŒ ä¸èƒ½åˆ›å»ºæ³›å‹æ•°ç»„</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">createArray</span><span class="hljs-params">()</span></span>: Array&lt;T&gt; {
    <span class="hljs-keyword">return</span> Array&lt;T&gt;(<span class="hljs-number">10</span>) { }  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯</span>
}

<span class="hljs-comment">// âŒ ä¸èƒ½ä½¿ç”¨æ³›å‹ç±»å‹çš„ä¼´ç”Ÿå¯¹è±¡</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">getCompanion</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">companion</span> = T.Companion  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯</span>
}
</code></pre>
<h2 data-id="heading-4">å‹å˜ï¼ˆVarianceï¼‰ï¼šç†è§£åå˜ä¸é€†å˜</h2>
<h3 data-id="heading-5">ä¸ºä»€ä¹ˆéœ€è¦å‹å˜</h3>
<p>å…ˆçœ‹ä¸€ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Stringæ˜¯Anyçš„å­ç±»å‹</span>
<span class="hljs-keyword">val</span> str: String = <span class="hljs-string">"Hello"</span>
<span class="hljs-keyword">val</span> any: Any = str  <span class="hljs-comment">// âœ… å¯ä»¥èµ‹å€¼</span>

<span class="hljs-comment">// é‚£ä¹ˆList&lt;String&gt;æ˜¯List&lt;Any&gt;çš„å­ç±»å‹å—ï¼Ÿ</span>
<span class="hljs-keyword">val</span> stringList: List&lt;String&gt; = listOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
<span class="hljs-keyword">val</span> anyList: List&lt;Any&gt; = stringList  <span class="hljs-comment">// è¿™æ ·å¯ä»¥å—ï¼Ÿ</span>
</code></pre>
<p>ç­”æ¡ˆå–å†³äº<code>List</code>çš„<strong>å‹å˜</strong>è®¾ç½®ã€‚</p>
<h3 data-id="heading-6">ä¸å˜ï¼ˆInvariantï¼‰ï¼šé»˜è®¤è¡Œä¸º</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ³›å‹ç±»å‹æ˜¯<strong>ä¸å˜çš„</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// MutableListæ˜¯ä¸å˜çš„</span>
<span class="hljs-keyword">val</span> stringList: MutableList&lt;String&gt; = mutableListOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
<span class="hljs-comment">// val anyList: MutableList&lt;Any&gt; = stringList  // âŒ ç¼–è¯‘é”™è¯¯</span>

<span class="hljs-comment">// ä¸ºä»€ä¹ˆä¸èƒ½ï¼Ÿå› ä¸ºå¯èƒ½ç ´åç±»å‹å®‰å…¨ï¼š</span>
<span class="hljs-keyword">val</span> anyList: MutableList&lt;Any&gt; = stringList  <span class="hljs-comment">// å‡è®¾å…è®¸</span>
anyList.add(<span class="hljs-number">42</span>)  <span class="hljs-comment">// åŠ å…¥ä¸€ä¸ªInt</span>
<span class="hljs-keyword">val</span> first: String = stringList[<span class="hljs-number">0</span>]  <span class="hljs-comment">// ğŸ’¥ è¿è¡Œæ—¶é”™è¯¯ï¼</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9818d1c216d4e3793ddd06a550a1f51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769257690&amp;x-signature=V%2FmeRcHm3M7KQXncvkxueX7gnDA%3D" alt="08-01-invariance.png" loading="lazy"/></p>

**ä¸å˜æ€§ä¿è¯ç±»å‹å®‰å…¨**ï¼šå¦‚æœå…è®¸`MutableList`èµ‹å€¼ç»™`MutableList`ï¼Œå°±å¯èƒ½å‘å­—ç¬¦ä¸²åˆ—è¡¨ä¸­æ·»åŠ éå­—ç¬¦ä¸²å…ƒç´ ï¼Œç ´åç±»å‹å®‰å…¨ã€‚

<h3 data-id="heading-7">åå˜ï¼ˆCovariantï¼‰ï¼šoutå…³é”®å­—</h3>
<p><strong>åå˜</strong>æ„å‘³ç€ï¼šå¦‚æœ<code>A</code>æ˜¯<code>B</code>çš„å­ç±»å‹ï¼Œé‚£ä¹ˆ<code>Producer&lt;A&gt;</code>ä¹Ÿæ˜¯<code>Producer&lt;B&gt;</code>çš„å­ç±»å‹ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Listæ˜¯åå˜çš„ï¼ˆåªè¯»ï¼‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-type">out T</span>&gt; {  <span class="hljs-comment">// outè¡¨ç¤ºåå˜</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">(index: <span class="hljs-type">Int</span>)</span></span>: T  <span class="hljs-comment">// åªèƒ½è¯»å–ï¼ˆç”Ÿäº§ï¼‰T</span>
    <span class="hljs-comment">// fun add(element: T)  // âŒ ä¸èƒ½æœ‰æ¥æ”¶Tçš„æ–¹æ³•</span>
}

<span class="hljs-comment">// ä½¿ç”¨åå˜</span>
<span class="hljs-keyword">val</span> stringList: List&lt;String&gt; = listOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
<span class="hljs-keyword">val</span> anyList: List&lt;Any&gt; = stringList  <span class="hljs-comment">// âœ… å¯ä»¥èµ‹å€¼</span>
<span class="hljs-keyword">val</span> item: Any = anyList[<span class="hljs-number">0</span>]  <span class="hljs-comment">// åªèƒ½è¯»å–ï¼Œå®‰å…¨</span>
</code></pre>
<p><strong>åå˜çš„è§„åˆ™</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>out</code>å…³é”®å­—å£°æ˜</li>
<li>æ³›å‹ç±»å‹åªèƒ½å‡ºç°åœ¨<strong>è¾“å‡ºä½ç½®</strong>ï¼ˆè¿”å›å€¼ï¼‰</li>
<li>ä¸èƒ½å‡ºç°åœ¨<strong>è¾“å…¥ä½ç½®</strong>ï¼ˆå‚æ•°ï¼‰</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åå˜ç±»å‹ç¤ºä¾‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Producer</span>&lt;<span class="hljs-type">out T</span>&gt; {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">produce</span><span class="hljs-params">()</span></span>: T  <span class="hljs-comment">// âœ… è¾“å‡ºä½ç½®</span>
    <span class="hljs-comment">// fun consume(item: T)  // âŒ è¾“å…¥ä½ç½®ï¼Œä¸å…è®¸</span>
}

<span class="hljs-comment">// å®é™…åº”ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FruitBasket</span>&lt;<span class="hljs-type">out T : Fruit</span>&gt;(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items: List&lt;T&gt;) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">pick</span><span class="hljs-params">()</span></span>: T = items.random()  <span class="hljs-comment">// âœ… åªç”Ÿäº§</span>
    <span class="hljs-comment">// fun add(fruit: T) { }  // âŒ ä¸èƒ½æ¶ˆè´¹</span>
}

<span class="hljs-keyword">val</span> appleBasket: FruitBasket&lt;Apple&gt; = FruitBasket(listOf(Apple()))
<span class="hljs-keyword">val</span> fruitBasket: FruitBasket&lt;Fruit&gt; = appleBasket  <span class="hljs-comment">// âœ… åå˜</span>
<span class="hljs-keyword">val</span> fruit: Fruit = fruitBasket.pick()  <span class="hljs-comment">// å®‰å…¨</span>
</code></pre>
<h3 data-id="heading-8">é€†å˜ï¼ˆContravariantï¼‰ï¼šinå…³é”®å­—</h3>
<p><strong>é€†å˜</strong>æ„å‘³ç€ï¼šå¦‚æœ<code>A</code>æ˜¯<code>B</code>çš„å­ç±»å‹ï¼Œé‚£ä¹ˆ<code>Consumer&lt;B&gt;</code>æ˜¯<code>Consumer&lt;A&gt;</code>çš„å­ç±»å‹ï¼ˆåè¿‡æ¥ï¼‰ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Comparatoræ˜¯é€†å˜çš„</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Comparator</span>&lt;<span class="hljs-type">in T</span>&gt; {  <span class="hljs-comment">// inè¡¨ç¤ºé€†å˜</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">compare</span><span class="hljs-params">(a: <span class="hljs-type">T</span>, b: <span class="hljs-type">T</span>)</span></span>: <span class="hljs-built_in">Int</span>  <span class="hljs-comment">// åªèƒ½æ¥æ”¶ï¼ˆæ¶ˆè´¹ï¼‰T</span>
}

<span class="hljs-comment">// ä½¿ç”¨é€†å˜</span>
<span class="hljs-keyword">val</span> anyComparator: Comparator&lt;Any&gt; = Comparator { a, b -&gt;
    a.hashCode() - b.hashCode()
}
<span class="hljs-keyword">val</span> stringComparator: Comparator&lt;String&gt; = anyComparator  <span class="hljs-comment">// âœ… å¯ä»¥èµ‹å€¼</span>

<span class="hljs-comment">// ä¸ºä»€ä¹ˆå¯ä»¥ï¼Ÿ</span>
<span class="hljs-comment">// èƒ½æ¯”è¾ƒAnyçš„ï¼Œå½“ç„¶ä¹Ÿèƒ½æ¯”è¾ƒStringï¼ˆStringæ˜¯Anyçš„å­ç±»å‹ï¼‰</span>
</code></pre>
<p><strong>é€†å˜çš„è§„åˆ™</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>in</code>å…³é”®å­—å£°æ˜</li>
<li>æ³›å‹ç±»å‹åªèƒ½å‡ºç°åœ¨<strong>è¾“å…¥ä½ç½®</strong>ï¼ˆå‚æ•°ï¼‰</li>
<li>ä¸èƒ½å‡ºç°åœ¨<strong>è¾“å‡ºä½ç½®</strong>ï¼ˆè¿”å›å€¼ï¼‰</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é€†å˜ç±»å‹ç¤ºä¾‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Consumer</span>&lt;<span class="hljs-type">in T</span>&gt; {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">consume</span><span class="hljs-params">(item: <span class="hljs-type">T</span>)</span></span>  <span class="hljs-comment">// âœ… è¾“å…¥ä½ç½®</span>
    <span class="hljs-comment">// fun produce(): T  // âŒ è¾“å‡ºä½ç½®ï¼Œä¸å…è®¸</span>
}

<span class="hljs-comment">// å®é™…åº”ç”¨</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Sink</span>&lt;<span class="hljs-type">in T</span>&gt; {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">send</span><span class="hljs-params">(item: <span class="hljs-type">T</span>)</span></span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AnySink</span> : <span class="hljs-type">Sink</span>&lt;<span class="hljs-type">Any</span>&gt; {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">send</span><span class="hljs-params">(item: <span class="hljs-type">Any</span>)</span></span> {
        println(<span class="hljs-string">"Received: <span class="hljs-variable">$item</span>"</span>)
    }
}

<span class="hljs-keyword">val</span> anySink: Sink&lt;Any&gt; = AnySink()
<span class="hljs-keyword">val</span> stringSink: Sink&lt;String&gt; = anySink  <span class="hljs-comment">// âœ… é€†å˜</span>
stringSink.send(<span class="hljs-string">"Hello"</span>)  <span class="hljs-comment">// å®‰å…¨ï¼šAnyçš„Sinkå¯ä»¥æ¥æ”¶String</span>
</code></pre>
<h3 data-id="heading-9">å‹å˜æ€»ç»“</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb9da9d7690440c1928fe144caa30b69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769257690&amp;x-signature=aAyWyW4sn%2B18bFPKwVeb1233X4g%3D" alt="08-02-variance-types.png" loading="lazy"/></p>

































<table><thead><tr><th align="left">å‹å˜ç±»å‹</th><th align="center">å…³é”®å­—</th><th align="left">ç±»å‹å…³ç³»</th><th align="left">ä½¿ç”¨åœºæ™¯</th><th align="left">ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left">ä¸å˜</td><td align="center">æ— </td><td align="left">æ— å­ç±»å‹å…³ç³»</td><td align="left">æ—¢è¯»åˆå†™</td><td align="left"><code>MutableList&lt;T&gt;</code></td></tr><tr><td align="left">åå˜</td><td align="center"><code>out</code></td><td align="left">ä¿æŒå­ç±»å‹å…³ç³»</td><td align="left">åªè¯»ï¼ˆç”Ÿäº§è€…ï¼‰</td><td align="left"><code>List&lt;out T&gt;</code></td></tr><tr><td align="left">é€†å˜</td><td align="center"><code>in</code></td><td align="left">åè½¬å­ç±»å‹å…³ç³»</td><td align="left">åªå†™ï¼ˆæ¶ˆè´¹è€…ï¼‰</td><td align="left"><code>Comparator&lt;in T&gt;</code></td></tr></tbody></table>

**è®°å¿†å£è¯€**ï¼š
- **out** = åª**out**putï¼ˆè¾“å‡ºï¼‰ï¼Œç”Ÿäº§è€…ï¼Œä¿æŒæ–¹å‘
- **in** = åª**in**putï¼ˆè¾“å…¥ï¼‰ï¼Œæ¶ˆè´¹è€…ï¼Œåè½¬æ–¹å‘

<h2 data-id="heading-10">ä½¿ç”¨å¤„å‹å˜ï¼ˆUse-site Varianceï¼‰</h2>
<p>æœ‰æ—¶æˆ‘ä»¬ä¸èƒ½ä¿®æ”¹ç±»çš„å£°æ˜ï¼Œä½†æƒ³åœ¨ä½¿ç”¨æ—¶æŒ‡å®šå‹å˜ï¼š</p>
<h3 data-id="heading-11">ç±»å‹æŠ•å½±</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Arrayæ˜¯ä¸å˜çš„</span>
<span class="hljs-keyword">val</span> strings: Array&lt;String&gt; = arrayOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
<span class="hljs-comment">// val objects: Array&lt;Any&gt; = strings  // âŒ ä¸å˜ï¼Œä¸èƒ½èµ‹å€¼</span>

<span class="hljs-comment">// ä½¿ç”¨outæŠ•å½±ï¼šåªèƒ½è¯»å–</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printArray</span><span class="hljs-params">(array: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">out</span> <span class="hljs-type">Any</span>&gt;)</span></span> {  <span class="hljs-comment">// ä½¿ç”¨å¤„åå˜</span>
    <span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> array) {
        println(item)  <span class="hljs-comment">// âœ… å¯ä»¥è¯»å–</span>
    }
    <span class="hljs-comment">// array[0] = "X"  // âŒ ä¸èƒ½å†™å…¥</span>
}

printArray(strings)  <span class="hljs-comment">// âœ… å¯ä»¥ä¼ å…¥Array&lt;String&gt;</span>

<span class="hljs-comment">// ä½¿ç”¨inæŠ•å½±ï¼šåªèƒ½å†™å…¥</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fillArray</span><span class="hljs-params">(array: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">in</span> <span class="hljs-type">String</span>&gt;, value: <span class="hljs-type">String</span>)</span></span> {  <span class="hljs-comment">// ä½¿ç”¨å¤„é€†å˜</span>
    array[<span class="hljs-number">0</span>] = value  <span class="hljs-comment">// âœ… å¯ä»¥å†™å…¥</span>
    <span class="hljs-comment">// val item: String = array[0]  // âŒ ä¸èƒ½è¯»å–ï¼ˆè¿”å›Any?ï¼‰</span>
}

<span class="hljs-keyword">val</span> objects: Array&lt;Any&gt; = arrayOf(<span class="hljs-string">"X"</span>, <span class="hljs-string">"Y"</span>)
fillArray(objects, <span class="hljs-string">"Hello"</span>)  <span class="hljs-comment">// âœ… å¯ä»¥ä¼ å…¥Array&lt;Any&gt;</span>
</code></pre>
<h3 data-id="heading-12">æ˜ŸæŠ•å½±ï¼ˆStar Projectionï¼‰</h3>
<p>å½“ä½ ä¸å…³å¿ƒå…·ä½“ç±»å‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ˜ŸæŠ•å½±<code>*</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç­‰ä»·äºout Any?</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printList</span><span class="hljs-params">(list: <span class="hljs-type">List</span>&lt;*&gt;)</span></span> {  <span class="hljs-comment">// List&lt;*&gt; â‰ˆ List&lt;out Any?&gt;</span>
    <span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> list) {
        println(item)  <span class="hljs-comment">// itemæ˜¯Any?ç±»å‹</span>
    }
}

printList(listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>))
printList(listOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>))

<span class="hljs-comment">// MutableList&lt;*&gt;çš„é™åˆ¶</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processArray</span><span class="hljs-params">(array: <span class="hljs-type">Array</span>&lt;*&gt;)</span></span> {
    <span class="hljs-keyword">val</span> item: Any? = array[<span class="hljs-number">0</span>]  <span class="hljs-comment">// âœ… å¯ä»¥è¯»å–ä¸ºAny?</span>
    <span class="hljs-comment">// array[0] = "X"  // âŒ ä¸èƒ½å†™å…¥</span>
}
</code></pre>
<p><strong>æ˜ŸæŠ•å½±çš„è§„åˆ™</strong>ï¼š</p>
<ul>
<li><code>Foo&lt;*&gt;</code> â‰ˆ <code>Foo&lt;out Any?&gt;</code>ï¼ˆå¦‚æœæ˜¯åå˜ï¼‰</li>
<li><code>Foo&lt;*&gt;</code> â‰ˆ <code>Foo&lt;in Nothing&gt;</code>ï¼ˆå¦‚æœæ˜¯é€†å˜ï¼‰</li>
<li><code>Foo&lt;*&gt;</code> = æ—¢ä¸èƒ½è¯»ä¹Ÿä¸èƒ½å†™ï¼ˆå¦‚æœæ˜¯ä¸å˜ï¼‰</li>
</ul>
<h2 data-id="heading-13">å…·ä½“åŒ–ç±»å‹å‚æ•°ï¼ˆReified Type Parametersï¼‰</h2>
<h3 data-id="heading-14">é—®é¢˜ï¼šç±»å‹æ“¦é™¤çš„é™åˆ¶</h3>
<p>ç”±äºç±»å‹æ“¦é™¤ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨è¿è¡Œæ—¶æ£€æŸ¥æ³›å‹ç±»å‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ ä¸èƒ½æ£€æŸ¥æ³›å‹ç±»å‹</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">isInstance</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> value <span class="hljs-keyword">is</span> T  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šCannot check for instance of erased type</span>
}

<span class="hljs-comment">// âŒ ä¸èƒ½è·å–æ³›å‹çš„Class</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">getClassName</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> T::<span class="hljs-keyword">class</span>.simpleName  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯</span>
}
</code></pre>
<h3 data-id="heading-15">è§£å†³æ–¹æ¡ˆï¼šreifiedå…³é”®å­—</h3>
<p>Kotlinçš„<code>reified</code>å…³é”®å­—é…åˆ<code>inline</code>å‡½æ•°ï¼Œå¯ä»¥ä¿ç•™ç±»å‹ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… ä½¿ç”¨reified</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T&gt;</span> <span class="hljs-title">isInstance</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> value <span class="hljs-keyword">is</span> T  <span class="hljs-comment">// âœ… å¯ä»¥æ£€æŸ¥ç±»å‹</span>
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
println(isInstance&lt;String&gt;(<span class="hljs-string">"Hello"</span>))  <span class="hljs-comment">// true</span>
println(isInstance&lt;<span class="hljs-built_in">Int</span>&gt;(<span class="hljs-string">"Hello"</span>))     <span class="hljs-comment">// false</span>

<span class="hljs-comment">// âœ… è·å–Classå¯¹è±¡</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T&gt;</span> <span class="hljs-title">getClassName</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> T::<span class="hljs-keyword">class</span>.simpleName ?: <span class="hljs-string">"Unknown"</span>
}

println(getClassName&lt;String&gt;())  <span class="hljs-comment">// "String"</span>
println(getClassName&lt;List&lt;<span class="hljs-built_in">Int</span>&gt;&gt;())  <span class="hljs-comment">// "List"</span>
</code></pre>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è°ƒç”¨ä»£ç </span>
isInstance&lt;String&gt;(<span class="hljs-string">"Hello"</span>)

<span class="hljs-comment">// ç¼–è¯‘å™¨å†…è”å</span>
<span class="hljs-string">"Hello"</span> <span class="hljs-keyword">is</span> String  <span class="hljs-comment">// ç±»å‹ä¿¡æ¯è¢«ä¿ç•™</span>
</code></pre>
<h3 data-id="heading-16">reifiedçš„å®é™…åº”ç”¨</h3>
<h4 data-id="heading-17">1. ç±»å‹å®‰å…¨çš„ç­›é€‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç­›é€‰ç‰¹å®šç±»å‹çš„å…ƒç´ </span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T&gt;</span> List<span class="hljs-type">&lt;*&gt;</span>.<span class="hljs-title">filterIsInstance</span><span class="hljs-params">()</span></span>: List&lt;T&gt; {
    <span class="hljs-keyword">return</span> filter { it <span class="hljs-keyword">is</span> T }.map { it <span class="hljs-keyword">as</span> T }
}

<span class="hljs-keyword">val</span> mixed: List&lt;Any&gt; = listOf(<span class="hljs-number">1</span>, <span class="hljs-string">"two"</span>, <span class="hljs-number">3</span>, <span class="hljs-string">"four"</span>, <span class="hljs-number">5.0</span>)
<span class="hljs-keyword">val</span> strings: List&lt;String&gt; = mixed.filterIsInstance&lt;String&gt;()
println(strings)  <span class="hljs-comment">// [two, four]</span>

<span class="hljs-keyword">val</span> numbers: List&lt;<span class="hljs-built_in">Int</span>&gt; = mixed.filterIsInstance&lt;<span class="hljs-built_in">Int</span>&gt;()
println(numbers)  <span class="hljs-comment">// [1, 3]</span>
</code></pre>
<h4 data-id="heading-18">2. JSONååºåˆ—åŒ–</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Gsonçš„ç±»å‹å®‰å…¨åŒ…è£…</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T&gt;</span> Gson.<span class="hljs-title">fromJson</span><span class="hljs-params">(json: <span class="hljs-type">String</span>)</span></span>: T {
    <span class="hljs-keyword">return</span> fromJson(json, T::<span class="hljs-keyword">class</span>.java)
}

<span class="hljs-keyword">val</span> user: User = gson.fromJson&lt;User&gt;(jsonString)  <span class="hljs-comment">// ç±»å‹å®‰å…¨</span>
<span class="hljs-comment">// è€Œä¸æ˜¯ï¼š</span>
<span class="hljs-comment">// val user = gson.fromJson(jsonString, User::class.java) as User</span>
</code></pre>
<h4 data-id="heading-19">3. å¯åŠ¨Activityï¼ˆAndroidï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Androidä¸­çš„ç±»å‹å®‰å…¨Intent</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T : Activity&gt;</span> Context.<span class="hljs-title">startActivity</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, T::<span class="hljs-keyword">class</span>.java)
    startActivity(intent)
}

<span class="hljs-comment">// ä½¿ç”¨</span>
startActivity&lt;MainActivity&gt;()  <span class="hljs-comment">// ç®€æ´ä¸”ç±»å‹å®‰å…¨</span>
</code></pre>
<h4 data-id="heading-20">4. ä¾èµ–æ³¨å…¥</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç±»å‹å®‰å…¨çš„ä¾èµ–è·å–</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T&gt;</span> <span class="hljs-title">get</span><span class="hljs-params">()</span></span>: T {
    <span class="hljs-keyword">return</span> container.resolve(T::<span class="hljs-keyword">class</span>.java)
}

<span class="hljs-keyword">val</span> userService: UserService = <span class="hljs-keyword">get</span>&lt;UserService&gt;()
</code></pre>

**reifiedçš„é™åˆ¶**ï¼š
- åªèƒ½ç”¨äº`inline`å‡½æ•°
- ä¸èƒ½ç”¨äºç±»çš„ç±»å‹å‚æ•°
- ä¸èƒ½ç”¨äºå±æ€§
- ä¼šå¢åŠ ç”Ÿæˆçš„å­—èŠ‚ç å¤§å°ï¼ˆå†…è”çš„ä»£ä»·ï¼‰

<h2 data-id="heading-21">æ³›å‹è¾¹ç•Œï¼ˆGeneric Boundsï¼‰</h2>
<h3 data-id="heading-22">ä¸Šç•Œï¼ˆUpper Boundsï¼‰</h3>
<p>é™åˆ¶ç±»å‹å‚æ•°å¿…é¡»æ˜¯æŸä¸ªç±»å‹çš„å­ç±»å‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å•ä¸ªä¸Šç•Œ</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : Number&gt;</span> <span class="hljs-title">sum</span><span class="hljs-params">(a: <span class="hljs-type">T</span>, b: <span class="hljs-type">T</span>)</span></span>: <span class="hljs-built_in">Double</span> {
    <span class="hljs-keyword">return</span> a.toDouble() + b.toDouble()
}

sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)        <span class="hljs-comment">// âœ… Intæ˜¯Numberçš„å­ç±»å‹</span>
sum(<span class="hljs-number">1.5</span>, <span class="hljs-number">2.5</span>)    <span class="hljs-comment">// âœ… Doubleæ˜¯Numberçš„å­ç±»å‹</span>
<span class="hljs-comment">// sum("1", "2")  // âŒ Stringä¸æ˜¯Numberçš„å­ç±»å‹</span>

<span class="hljs-comment">// å®é™…åº”ç”¨ï¼šæ¯”è¾ƒ</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : Comparable&lt;T&gt;</span>&gt; <span class="hljs-title">max</span><span class="hljs-params">(a: <span class="hljs-type">T</span>, b: <span class="hljs-type">T</span>)</span></span>: T {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (a &gt; b) a <span class="hljs-keyword">else</span> b
}

println(max(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>))        <span class="hljs-comment">// 20</span>
println(max(<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>))  <span class="hljs-comment">// banana</span>
</code></pre>
<h3 data-id="heading-23">å¤šä¸ªä¸Šç•Œ</h3>
<p>æœ‰æ—¶éœ€è¦åŒæ—¶æ»¡è¶³å¤šä¸ªçº¦æŸï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// whereå­å¥æŒ‡å®šå¤šä¸ªä¸Šç•Œ</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">copyWhenGreater</span><span class="hljs-params">(list: <span class="hljs-type">List</span>&lt;<span class="hljs-type">T</span>&gt;, threshold: <span class="hljs-type">T</span>)</span></span>: List&lt;T&gt;
    <span class="hljs-keyword">where</span> T : Comparable&lt;T&gt;,  <span class="hljs-comment">// å¿…é¡»å¯æ¯”è¾ƒ</span>
          T : Cloneable {      <span class="hljs-comment">// å¿…é¡»å¯å…‹éš†</span>
    <span class="hljs-keyword">return</span> list.filter { it &gt; threshold }.map { it.clone() <span class="hljs-keyword">as</span> T }
}

<span class="hljs-comment">// å®é™…åº”ç”¨</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Named</span> {
    <span class="hljs-keyword">val</span> name: String
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Identifiable</span> {
    <span class="hljs-keyword">val</span> id: String
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">findById</span><span class="hljs-params">(items: <span class="hljs-type">List</span>&lt;<span class="hljs-type">T</span>&gt;, id: <span class="hljs-type">String</span>)</span></span>: T?
    <span class="hljs-keyword">where</span> T : Named,
          T : Identifiable {
    <span class="hljs-keyword">return</span> items.find { it.id == id }
}

<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> id: String,
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> name: String
) : Named, Identifiable

<span class="hljs-keyword">val</span> users = listOf(User(<span class="hljs-string">"1"</span>, <span class="hljs-string">"Alice"</span>), User(<span class="hljs-string">"2"</span>, <span class="hljs-string">"Bob"</span>))
<span class="hljs-keyword">val</span> user = findById(users, <span class="hljs-string">"1"</span>)
println(user?.name)  <span class="hljs-comment">// Alice</span>
</code></pre>
<h3 data-id="heading-24">é€’å½’æ³›å‹è¾¹ç•Œ</h3>
<p>ç»å…¸çš„<code>Comparable</code>æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è‡ªå¼•ç”¨æ³›å‹è¾¹ç•Œ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Comparable</span>&lt;<span class="hljs-type">T : Comparable&lt;T</span>&gt;&gt; {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">compareTo</span><span class="hljs-params">(other: <span class="hljs-type">T</span>)</span></span>: <span class="hljs-built_in">Int</span>
}

<span class="hljs-comment">// å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>(<span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">val</span> age: <span class="hljs-built_in">Int</span>) : Comparable&lt;Person&gt; {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">compareTo</span><span class="hljs-params">(other: <span class="hljs-type">Person</span>)</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">return</span> age.compareTo(other.age)
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : Comparable&lt;T&gt;</span>&gt; <span class="hljs-title">sortItems</span><span class="hljs-params">(items: <span class="hljs-type">List</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: List&lt;T&gt; {
    <span class="hljs-keyword">return</span> items.sorted()
}

<span class="hljs-keyword">val</span> people = listOf(Person(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">30</span>), Person(<span class="hljs-string">"Bob"</span>, <span class="hljs-number">25</span>))
<span class="hljs-keyword">val</span> sorted = sortItems(people)  <span class="hljs-comment">// æŒ‰å¹´é¾„æ’åº</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/034e0fdba7a944f8b4402cd23195e21d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769257690&amp;x-signature=FkHDoPaVqr7Z2r12HXWlDeUuAtI%3D" alt="08-03-generic-bounds.png" loading="lazy"/></p>
<h2 data-id="heading-25">å®æˆ˜æ¡ˆä¾‹ï¼šæ„å»ºç±»å‹å®‰å…¨çš„Resultå®¹å™¨</h2>
<p>ç»¼åˆè¿ç”¨æ³›å‹çš„é«˜çº§ç‰¹æ€§ï¼Œæ„å»ºä¸€ä¸ªå®Œæ•´çš„Resultç±»å‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. åŸºç¡€å®šä¹‰ï¼šä½¿ç”¨outåå˜</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;<span class="hljs-type">out T</span>&gt; {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span>&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: T) : Result&lt;T&gt;()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Error</span>(<span class="hljs-keyword">val</span> exception: Exception) : Result&lt;<span class="hljs-built_in">Nothing</span>&gt;()
    <span class="hljs-keyword">object</span> Loading : Result&lt;<span class="hljs-built_in">Nothing</span>&gt;()
}

<span class="hljs-comment">// 2. æ‰©å±•å‡½æ•°ï¼šä½¿ç”¨reified</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T&gt;</span> Result<span class="hljs-type">&lt;*&gt;</span>.<span class="hljs-title">getOrNull</span><span class="hljs-params">()</span></span>: T? {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (<span class="hljs-keyword">this</span>) {
        <span class="hljs-keyword">is</span> Result.Success&lt;*&gt; -&gt; <span class="hljs-keyword">data</span> <span class="hljs-keyword">as</span>? T
        <span class="hljs-keyword">else</span> -&gt; <span class="hljs-literal">null</span>
    }
}

<span class="hljs-comment">// 3. mapå‡½æ•°ï¼šåå˜ä¿è¯ç±»å‹å®‰å…¨</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T, R&gt;</span> Result<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">map</span><span class="hljs-params">(transform: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">R</span>)</span></span>: Result&lt;R&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (<span class="hljs-keyword">this</span>) {
        <span class="hljs-keyword">is</span> Result.Success -&gt; Result.Success(transform(<span class="hljs-keyword">data</span>))
        <span class="hljs-keyword">is</span> Result.Error -&gt; Result.Error(exception)
        <span class="hljs-keyword">is</span> Result.Loading -&gt; Result.Loading
    }
}

<span class="hljs-comment">// 4. flatMapï¼šå¤„ç†åµŒå¥—Result</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T, R&gt;</span> Result<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">flatMap</span><span class="hljs-params">(transform: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Result</span>&lt;<span class="hljs-type">R</span>&gt;)</span></span>: Result&lt;R&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (<span class="hljs-keyword">this</span>) {
        <span class="hljs-keyword">is</span> Result.Success -&gt; transform(<span class="hljs-keyword">data</span>)
        <span class="hljs-keyword">is</span> Result.Error -&gt; Result.Error(exception)
        <span class="hljs-keyword">is</span> Result.Loading -&gt; Result.Loading
    }
}

<span class="hljs-comment">// 5. å¸¦è¾¹ç•Œçš„è½¬æ¢</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : Any, R : Any&gt;</span> Result<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">mapNotNull</span><span class="hljs-params">(
    transform: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">R</span>?
)</span></span>: Result&lt;R&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (<span class="hljs-keyword">this</span>) {
        <span class="hljs-keyword">is</span> Result.Success -&gt; {
            <span class="hljs-keyword">val</span> transformed = transform(<span class="hljs-keyword">data</span>)
            <span class="hljs-keyword">if</span> (transformed != <span class="hljs-literal">null</span>) {
                Result.Success(transformed)
            } <span class="hljs-keyword">else</span> {
                Result.Error(NullPointerException(<span class="hljs-string">"Transform returned null"</span>))
            }
        }
        <span class="hljs-keyword">is</span> Result.Error -&gt; Result.Error(exception)
        <span class="hljs-keyword">is</span> Result.Loading -&gt; Result.Loading
    }
}

<span class="hljs-comment">// 6. åˆå¹¶å¤šä¸ªResult</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">combineResults</span><span class="hljs-params">(results: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Result</span>&lt;<span class="hljs-type">T</span>&gt;&gt;)</span></span>: Result&lt;List&lt;T&gt;&gt; {
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = mutableListOf&lt;T&gt;()

    <span class="hljs-keyword">for</span> (result <span class="hljs-keyword">in</span> results) {
        <span class="hljs-keyword">when</span> (result) {
            <span class="hljs-keyword">is</span> Result.Success -&gt; <span class="hljs-keyword">data</span>.add(result.<span class="hljs-keyword">data</span>)
            <span class="hljs-keyword">is</span> Result.Error -&gt; <span class="hljs-keyword">return</span> result
            <span class="hljs-keyword">is</span> Result.Loading -&gt; <span class="hljs-keyword">return</span> Result.Loading
        }
    }

    <span class="hljs-keyword">return</span> Result.Success(<span class="hljs-keyword">data</span>)
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepository</span> {
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadUser</span><span class="hljs-params">(id: <span class="hljs-type">String</span>)</span></span>: Result&lt;User&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> user = apiService.getUser(id)
            Result.Success(user)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            Result.Error(e)
        }
    }

    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadUserProfile</span><span class="hljs-params">(id: <span class="hljs-type">String</span>)</span></span>: Result&lt;UserProfile&gt; {
        <span class="hljs-keyword">return</span> loadUser(id)
            .map { user -&gt; user.toProfile() }  <span class="hljs-comment">// ç±»å‹å®‰å…¨è½¬æ¢</span>
            .flatMap { profile -&gt;  <span class="hljs-comment">// å¤„ç†åµŒå¥—å¼‚æ­¥æ“ä½œ</span>
                loadAdditionalData(profile.id).map { <span class="hljs-keyword">data</span> -&gt;
                    profile.copy(additionalInfo = <span class="hljs-keyword">data</span>)
                }
            }
    }
}

<span class="hljs-comment">// ViewModelä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> repository = UserRepository()

    <span class="hljs-keyword">val</span> userState = MutableStateFlow&lt;Result&lt;UserProfile&gt;&gt;(Result.Loading)

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadUserProfile</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span> {
        viewModelScope.launch {
            <span class="hljs-keyword">val</span> result = repository.loadUserProfile(userId)

            <span class="hljs-comment">// ä½¿ç”¨reifiedæ‰©å±•</span>
            <span class="hljs-keyword">val</span> profile: UserProfile? = result.getOrNull&lt;UserProfile&gt;()

            userState.value = result
        }
    }
}
</code></pre>
<p><strong>è¿™ä¸ªæ¡ˆä¾‹å±•ç¤ºäº†</strong>ï¼š</p>
<ul>
<li>âœ… <code>out</code>åå˜ä¿è¯ç±»å‹å®‰å…¨çš„è½¬æ¢</li>
<li>âœ… <code>reified</code>å®ç°ç±»å‹å®‰å…¨çš„å€¼è·å–</li>
<li>âœ… æ³›å‹å‡½æ•°å®ç°çµæ´»çš„æ“ä½œç¬¦</li>
<li>âœ… å¯†å°ç±»ç»“åˆæ³›å‹çš„å¼ºå¤§è¡¨è¾¾èƒ½åŠ›</li>
</ul>
<h2 data-id="heading-26">å¸¸è§é—®é¢˜è§£ç­”</h2>
<h3 data-id="heading-27">Q1: ä»€ä¹ˆæ—¶å€™ä½¿ç”¨outï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨inï¼Ÿ</h3>
<p><strong>A</strong>: éµå¾ª<strong>PECSåŸåˆ™</strong>ï¼ˆProducer Extends, Consumer Superï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Producerï¼ˆç”Ÿäº§è€…ï¼‰ä½¿ç”¨out</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Producer</span>&lt;<span class="hljs-type">out T</span>&gt; {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">produce</span><span class="hljs-params">()</span></span>: T  <span class="hljs-comment">// åªç”Ÿäº§T</span>
}

<span class="hljs-comment">// Consumerï¼ˆæ¶ˆè´¹è€…ï¼‰ä½¿ç”¨in</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Consumer</span>&lt;<span class="hljs-type">in T</span>&gt; {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">consume</span><span class="hljs-params">(item: <span class="hljs-type">T</span>)</span></span>  <span class="hljs-comment">// åªæ¶ˆè´¹T</span>
}

<span class="hljs-comment">// å®é™…åº”ç”¨</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">copy</span><span class="hljs-params">(from: <span class="hljs-type">List</span>&lt;<span class="hljs-type">out</span> <span class="hljs-type">Any</span>&gt;, to: <span class="hljs-type">MutableList</span>&lt;<span class="hljs-type">in</span> <span class="hljs-type">String</span>&gt;)</span></span> {
    <span class="hljs-comment">// fromæ˜¯ç”Ÿäº§è€…ï¼Œåªè¯»å–</span>
    <span class="hljs-comment">// toæ˜¯æ¶ˆè´¹è€…ï¼Œåªå†™å…¥</span>
    <span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> from) {
        <span class="hljs-keyword">if</span> (item <span class="hljs-keyword">is</span> String) {
            to.add(item)
        }
    }
}
</code></pre>
<h3 data-id="heading-28">Q2: reifiedä¸€å®šè¦é…åˆinlineä½¿ç”¨å—ï¼Ÿ</h3>
<p><strong>A</strong>: æ˜¯çš„ï¼Œ<code>reified</code>å¿…é¡»ç”¨äº<code>inline</code>å‡½æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šinline + reified</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T&gt;</span> <span class="hljs-title">check</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> value <span class="hljs-keyword">is</span> T
}

<span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½å•ç‹¬ä½¿ç”¨reified</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T&gt;</span> <span class="hljs-title">check</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {  <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯</span>
    <span class="hljs-keyword">return</span> value <span class="hljs-keyword">is</span> T
}

<span class="hljs-comment">// åŸå› ï¼šåªæœ‰å†…è”å‡½æ•°æ‰èƒ½åœ¨ç¼–è¯‘æ—¶æ›¿æ¢ç±»å‹å‚æ•°</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆ</strong>ï¼š</p>
<ul>
<li><code>inline</code>å‡½æ•°åœ¨ç¼–è¯‘æ—¶ä¼šè¢«å±•å¼€åˆ°è°ƒç”¨å¤„</li>
<li>ç¼–è¯‘å™¨å¯ä»¥åœ¨å±•å¼€æ—¶æ›¿æ¢ç±»å‹å‚æ•°ä¸ºå…·ä½“ç±»å‹</li>
<li>éå†…è”å‡½æ•°åœ¨è¿è¡Œæ—¶è°ƒç”¨ï¼Œç±»å‹ä¿¡æ¯å·²è¢«æ“¦é™¤</li>
</ul>
<h3 data-id="heading-29">Q3: æ˜ŸæŠ•å½±ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ</h3>
<p><strong>A</strong>: å½“ä½ ä¸å…³å¿ƒå…·ä½“ç±»å‹ï¼Œåªéœ€è¦è®¿é—®ä¸ç±»å‹æ— å…³çš„æˆå‘˜æ—¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åœºæ™¯1ï¼šåªéœ€è¦çŸ¥é“æ˜¯ä¸ªListï¼Œä¸å…³å¿ƒå…ƒç´ ç±»å‹</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printSize</span><span class="hljs-params">(list: <span class="hljs-type">List</span>&lt;*&gt;)</span></span> {
    println(<span class="hljs-string">"Size: <span class="hljs-subst">${list.size}</span>"</span>)  <span class="hljs-comment">// sizeä¸ç±»å‹æ— å…³</span>
}

<span class="hljs-comment">// åœºæ™¯2ï¼šç±»å‹ä¸ç¡®å®šä½†éœ€è¦å¤„ç†</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processUnknown</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>)</span></span> {
    <span class="hljs-keyword">when</span> (value) {
        <span class="hljs-keyword">is</span> List&lt;*&gt; -&gt; println(<span class="hljs-string">"List of <span class="hljs-subst">${value.size}</span> items"</span>)
        <span class="hljs-keyword">is</span> Map&lt;*, *&gt; -&gt; println(<span class="hljs-string">"Map of <span class="hljs-subst">${value.size}</span> entries"</span>)
    }
}

<span class="hljs-comment">// âŒ ä¸è¦è¿™æ ·ï¼šæ˜ç¡®çŸ¥é“ç±»å‹æ—¶ä¸è¦ç”¨æ˜ŸæŠ•å½±</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printStrings</span><span class="hljs-params">(list: <span class="hljs-type">List</span>&lt;*&gt;)</span></span> {  <span class="hljs-comment">// ä¸å¥½</span>
    <span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> list) {
        println(item <span class="hljs-keyword">as</span> String)  <span class="hljs-comment">// éœ€è¦å¼ºåˆ¶è½¬æ¢</span>
    }
}

<span class="hljs-comment">// âœ… åº”è¯¥è¿™æ ·ï¼šæ˜ç¡®ç±»å‹</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printStrings</span><span class="hljs-params">(list: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {  <span class="hljs-comment">// å¥½</span>
    <span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> list) {
        println(item)  <span class="hljs-comment">// ç±»å‹å®‰å…¨</span>
    }
}
</code></pre>
<h3 data-id="heading-30">Q4: ä¸ºä»€ä¹ˆArrayæ˜¯ä¸å˜çš„ï¼Œè€ŒListå¯ä»¥åå˜ï¼Ÿ</h3>
<p><strong>A</strong>: å› ä¸º<strong>å¯å˜æ€§</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Arrayæ˜¯å¯å˜çš„ï¼ˆå¯è¯»å¯å†™ï¼‰</span>
<span class="hljs-keyword">val</span> array: Array&lt;String&gt; = arrayOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
array[<span class="hljs-number">0</span>] = <span class="hljs-string">"X"</span>  <span class="hljs-comment">// å¯ä»¥ä¿®æ”¹</span>

<span class="hljs-comment">// å¦‚æœå…è®¸åå˜ï¼Œä¼šç ´åç±»å‹å®‰å…¨ï¼š</span>
<span class="hljs-comment">// val objects: Array&lt;Any&gt; = array  // å‡è®¾å…è®¸</span>
<span class="hljs-comment">// objects[0] = 42  // åŠ å…¥Int</span>
<span class="hljs-comment">// val str: String = array[0]  // ğŸ’¥ è¿è¡Œæ—¶é”™è¯¯</span>

<span class="hljs-comment">// Listæ˜¯åªè¯»çš„ï¼ˆåå˜å®‰å…¨ï¼‰</span>
<span class="hljs-keyword">val</span> list: List&lt;String&gt; = listOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
<span class="hljs-comment">// list[0] = "X"  // âŒ ä¸èƒ½ä¿®æ”¹</span>
<span class="hljs-keyword">val</span> objects: List&lt;Any&gt; = list  <span class="hljs-comment">// âœ… å®‰å…¨ï¼Œå› ä¸ºä¸èƒ½ä¿®æ”¹</span>
</code></pre>
<p><strong>è§„åˆ™</strong>ï¼š</p>
<ul>
<li><strong>åªè¯»é›†åˆ</strong>ï¼ˆ<code>List</code>, <code>Set</code>, <code>Map</code>ï¼‰å¯ä»¥åå˜</li>
<li><strong>å¯å˜é›†åˆ</strong>ï¼ˆ<code>MutableList</code>, <code>MutableSet</code>, <code>MutableMap</code>ï¼‰å¿…é¡»ä¸å˜</li>
</ul>
<h2 data-id="heading-31">ç»ƒä¹ é¢˜</h2>
<h3 data-id="heading-32">ç»ƒä¹ 1ï¼šå®ç°æ³›å‹æ ˆ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®ç°ä¸€ä¸ªç±»å‹å®‰å…¨çš„æ ˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Stack</span>&lt;<span class="hljs-type">T</span>&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items = mutableListOf&lt;T&gt;()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">push</span><span class="hljs-params">(item: <span class="hljs-type">T</span>)</span></span> { <span class="hljs-comment">/* TODO */</span> }
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span></span>: T? { <span class="hljs-comment">/* TODO */</span> }
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">peek</span><span class="hljs-params">()</span></span>: T? { <span class="hljs-comment">/* TODO */</span> }
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isEmpty</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> { <span class="hljs-comment">/* TODO */</span> }
}

<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> æ·»åŠ åå˜çš„åªè¯»è§†å›¾</span>
<span class="hljs-comment">// interface ReadOnlyStack&lt;out T&gt; { ... }</span>
</code></pre>
<h3 data-id="heading-33">ç»ƒä¹ 2ï¼šå¸¦è¾¹ç•Œçš„æŸ¥æ‰¾å‡½æ•°</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®ç°ä¸€ä¸ªé€šç”¨çš„æŸ¥æ‰¾å‡½æ•°ï¼Œè¦æ±‚ï¼š</span>
<span class="hljs-comment">// 1. Tå¿…é¡»å®ç°Comparableæ¥å£</span>
<span class="hljs-comment">// 2. Tå¿…é¡»æœ‰nameå±æ€§</span>
<span class="hljs-comment">// 3. æŸ¥æ‰¾nameåŒ¹é…ä¸”å€¼å¤§äºthresholdçš„ç¬¬ä¸€ä¸ªå…ƒç´ </span>

<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å®ç°å‡½æ•°ç­¾åå’Œå‡½æ•°ä½“</span>
</code></pre>
<h3 data-id="heading-34">ç»ƒä¹ 3ï¼šä½¿ç”¨reifiedç®€åŒ–ååºåˆ—åŒ–</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨reifiedå®ç°ç±»å‹å®‰å…¨çš„JSONååºåˆ—åŒ–</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">JsonParser</span> {
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å®ç°inline + reifiedå‡½æ•°</span>
    <span class="hljs-comment">// inline fun &lt;reified T&gt; parse(json: String): T { ... }</span>
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(<span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">val</span> age: <span class="hljs-built_in">Int</span>)
<span class="hljs-keyword">val</span> json = <span class="hljs-string">"""{"name": "Alice", "age": 30}"""</span>
<span class="hljs-keyword">val</span> user: User = parser.parse&lt;User&gt;(json)  <span class="hljs-comment">// åº”è¯¥è‡ªåŠ¨æ¨æ–­ç±»å‹</span>
</code></pre>
<h2 data-id="heading-35">æ€»ç»“</h2>
<p>Kotlinçš„æ³›å‹ç³»ç»Ÿåœ¨Javaçš„åŸºç¡€ä¸Šåšäº†é‡è¦æ”¹è¿›ï¼Œæä¾›äº†æ›´å¼ºå¤§å’Œçµæ´»çš„ç±»å‹å®‰å…¨ä¿éšœã€‚</p>
<h3 data-id="heading-36">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li>
<p><strong>å‹å˜ï¼ˆVarianceï¼‰</strong></p>
<ul>
<li><strong>outï¼ˆåå˜ï¼‰</strong> - ç”Ÿäº§è€…ï¼Œä¿æŒå­ç±»å‹å…³ç³»ï¼Œåªèƒ½è¾“å‡º</li>
<li><strong>inï¼ˆé€†å˜ï¼‰</strong> - æ¶ˆè´¹è€…ï¼Œåè½¬å­ç±»å‹å…³ç³»ï¼Œåªèƒ½è¾“å…¥</li>
<li><strong>ä¸å˜</strong> - é»˜è®¤è¡Œä¸ºï¼Œæ—¢å¯è¯»åˆå¯å†™ï¼Œæ— å­ç±»å‹å…³ç³»</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨å¤„å‹å˜</strong></p>
<ul>
<li>ç±»å‹æŠ•å½±ï¼š<code>Array&lt;out Any&gt;</code>, <code>Array&lt;in String&gt;</code></li>
<li>æ˜ŸæŠ•å½±ï¼š<code>List&lt;*&gt;</code> â‰ˆ <code>List&lt;out Any?&gt;</code></li>
</ul>
</li>
<li>
<p><strong>å…·ä½“åŒ–ç±»å‹å‚æ•°ï¼ˆreifiedï¼‰</strong></p>
<ul>
<li>é…åˆ<code>inline</code>å‡½æ•°ä½¿ç”¨</li>
<li>ä¿ç•™è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯</li>
<li>å®ç°ç±»å‹å®‰å…¨çš„ç±»å‹æ£€æŸ¥å’Œè½¬æ¢</li>
</ul>
</li>
<li>
<p><strong>æ³›å‹è¾¹ç•Œ</strong></p>
<ul>
<li>å•ä¸ªä¸Šç•Œï¼š<code>&lt;T : Number&gt;</code></li>
<li>å¤šä¸ªä¸Šç•Œï¼š<code>where T : A, T : B</code></li>
<li>é€’å½’è¾¹ç•Œï¼š<code>&lt;T : Comparable&lt;T&gt;&gt;</code></li>
</ul>
</li>
</ol>
<h3 data-id="heading-37">æœ€ä½³å®è·µ</h3>
<ul>
<li>âœ… <strong>éµå¾ªPECSåŸåˆ™</strong>ï¼šProducerç”¨outï¼ŒConsumerç”¨in</li>
<li>âœ… <strong>ä¼˜å…ˆä½¿ç”¨å£°æ˜å¤„å‹å˜</strong>ï¼šåœ¨ç±»å®šä¹‰æ—¶å°±æŒ‡å®šout/in</li>
<li>âœ… <strong>è°¨æ…ä½¿ç”¨reified</strong>ï¼šåªåœ¨ç¡®å®éœ€è¦è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯æ—¶ä½¿ç”¨</li>
<li>âœ… <strong>æ˜ç¡®æ³›å‹è¾¹ç•Œ</strong>ï¼šä½¿ç”¨ä¸Šç•Œçº¦æŸç±»å‹ï¼Œæé«˜ä»£ç å¯è¯»æ€§</li>
<li>âœ… <strong>é¿å…è¿‡åº¦æ³›å‹</strong>ï¼šä¸æ˜¯æ‰€æœ‰ä»£ç éƒ½éœ€è¦æ³›å‹åŒ–</li>
<li>âœ… <strong>åˆ©ç”¨æ ‡å‡†åº“</strong>ï¼šKotlinæ ‡å‡†åº“æä¾›äº†ä¸°å¯Œçš„æ³›å‹å·¥å…·å‡½æ•°</li>
</ul>
<h3 data-id="heading-38">æ³›å‹çš„è®¾è®¡å“²å­¦</h3>
<p>Kotlinæ³›å‹ä½“ç°äº†ä¸‰ä¸ªæ ¸å¿ƒç†å¿µï¼š</p>
<ol>
<li><strong>ç±»å‹å®‰å…¨ä¼˜å…ˆ</strong> - åœ¨ç¼–è¯‘æœŸå°½å¯èƒ½æ•è·ç±»å‹é”™è¯¯</li>
<li><strong>çµæ´»æ€§ä¸å®‰å…¨æ€§å¹³è¡¡</strong> - é€šè¿‡å‹å˜æä¾›çµæ´»æ€§ï¼ŒåŒæ—¶ä¿è¯å®‰å…¨</li>
<li><strong>å®ç”¨ä¸»ä¹‰</strong> - reifiedç­‰ç‰¹æ€§è§£å†³å®é™…é—®é¢˜ï¼Œè€Œä¸æ‹˜æ³¥äºç†è®ºçº¯ç²¹</li>
</ol>
<p>æ­£å¦‚æ–‡ç« å¼€å¤´çš„æ•…äº‹ï¼Œç†è§£æ³›å‹çš„è¿™äº›é«˜çº§ç‰¹æ€§ï¼Œä¸ä»…èƒ½è®©æˆ‘ä»¬å†™å‡ºæ›´å®‰å…¨ã€æ›´çµæ´»çš„ä»£ç ï¼Œæ›´é‡è¦çš„æ˜¯èƒ½å¸®åŠ©æˆ‘ä»¬ç†è§£Kotlinç±»å‹ç³»ç»Ÿçš„è®¾è®¡å“²å­¦ã€‚</p>
<hr/>
<h2 data-id="heading-39">ç›¸å…³èµ„æ–™</h2>
<p><strong>ç³»åˆ—æ–‡ç« å¯¼èˆª:</strong></p>
<ul>
<li>ğŸ‘‰ ä¸Šä¸€ç¯‡: <a href="https://juejin.cn/post/7595841630675763251" target="_blank" title="https://juejin.cn/post/7595841630675763251">ç±»å‹ç³»ç»Ÿæ·±åº¦è§£æï¼šä»ç©ºå®‰å…¨åˆ°æ™ºèƒ½ç±»å‹æ¨æ–­çš„è®¾è®¡å“²å­¦</a></li>
</ul>
<hr/>
<p><em>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©,æ¬¢è¿ç‚¹èµã€æ”¶è—ã€åˆ†äº«!æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®,æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚è®©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ ,ä¸€èµ·æˆé•¿!</em></p>
<p><em>ä¹Ÿæ¬¢è¿è®¿é—®æˆ‘çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a>å‘ç°æ›´å¤šå®è—èµ„æº</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»§å¾€å¼€æ¥â€”â€”å¦‚ä½•åœ¨å·¥ç¨‹å®è·µåº”ç”¨ AI ä¸ Agent]]></title>    <link>https://juejin.cn/post/7595994039108845604</link>    <guid>https://juejin.cn/post/7595994039108845604</guid>    <pubDate>2026-01-17T13:25:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595994039108845604" data-draft-id="7595974133096775714" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»§å¾€å¼€æ¥â€”â€”å¦‚ä½•åœ¨å·¥ç¨‹å®è·µåº”ç”¨ AI ä¸ Agent"/> <meta itemprop="keywords" content="æ¶æ„,OpenAI,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-17T13:25:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äººå½¢æ‰“ç æœº"/> <meta itemprop="url" content="https://juejin.cn/user/2085122730895063"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»§å¾€å¼€æ¥â€”â€”å¦‚ä½•åœ¨å·¥ç¨‹å®è·µåº”ç”¨ AI ä¸ Agent
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2085122730895063/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äººå½¢æ‰“ç æœº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T13:25:00.000Z" title="Sat Jan 17 2026 13:25:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€AI å¸¦æ¥çš„å˜åŒ–</h2>
<p>è¿™ä¸€å¹´ç”¨ AI å†™ä»£ç ï¼Œè¯´å®è¯å¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±è¿™ä¹ˆé¡ºçš„ï¼Œæœ€æ—©æ¥è§¦çš„æ—¶å€™å¯¹å®ƒçš„æœŸå¾…ä¹Ÿä¸é«˜ï¼›</p>
<blockquote>
<p>æ›´å¤šåªæ˜¯æŠŠå®ƒå½“æˆä¸€ä¸ª<strong>æ¯”æœç´¢å¼•æ“ååº”å¿«ä¸€ç‚¹çš„å·¥å…·</strong></p>
</blockquote>
<h3 data-id="heading-1">åšä¸€ä¸ªæ¥å£</h3>
<p>æœ€å¼€å§‹çš„åº”ç”¨åŸºæœ¬æ˜¯åœ¨ç½‘é¡µæˆ–è€…æ¡Œé¢å¯¹è¯æ¡†é‡Œè¿›è¡Œå·¥ä½œï¼Œåšçš„äº‹æƒ…åŸºæœ¬å›´ç»•ï¼š</p>
<ul>
<li>ç»™å®šå­—æ®µç”Ÿæˆ model</li>
<li>ç”Ÿæˆä¸€ä¸ªæ–¹æ³•é€»è¾‘</li>
<li>å®Œæˆå®˜æ–¹åº“ä¸€äº› API æ£€ç´¢</li>
</ul>
<p>å› ä¸ºæ˜¯é€šè¿‡å¤–éƒ¨å·¥å…·å®Œæˆç”Ÿæˆç„¶åç²˜è´´åˆ°å·¥ç¨‹ï¼Œå› æ­¤è¿™ç§æ”¹åŠ¨èŒƒå›´å¾ˆå°ï¼Œå°±ç®—ç”Ÿæˆå­˜åœ¨é—®é¢˜ä¹Ÿèƒ½äººå·¥è¯†åˆ«è¿›è¡Œä¿®æ­£ï¼›</p>
<blockquote>
<p>æ‰€ä»¥å½“å‰é˜¶æ®µæœ¬è´¨ä¸Šè¿˜æ˜¯äººä¸ºä¸»å¯¼ï¼ŒAI åªæ˜¯å®Œæˆä¸€äº›çç¢å·¥ä½œ</p>
</blockquote>
<p>ä½†é—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œ æ•´ä½“å¾ˆè€ƒç©¶æè¯å¹¶ä¸”æœ‰æ—¶ä¸Šä¸‹æ–‡æ²Ÿé€šæ²¡æœ‰å…³è”æ€§è¾“å‡ºä¿¡æ¯å¾ˆé›¶ç¢</p>
<p>å¤§éƒ¨åˆ†æ—¶é—´éœ€è¦åå¤æé†’ä¸Šä¸‹æ–‡ï¼Œæ‰èƒ½æŠŠä¸€ä»¶å°äº‹åšå®Œ</p>
<h3 data-id="heading-2">ç»“æ„è®¾è®¡</h3>
<p>çœŸæ­£è®©æˆ‘æ„Ÿè§‰ä¸ä¸€æ ·ï¼Œæ˜¯åæ¥æŠŠ <strong>Trae å’Œ ChatGPT agent</strong> ç»“åˆä½¿ç”¨ï¼›</p>
<p>AI ä¸å†åªæ˜¯è¡¥ä»£ç ï¼Œè€Œæ˜¯å¼€å§‹ç›´æ¥ç»™æˆ‘ä¸€æ•´å¥—ç»“æ„ï¼š<br/>
ç›®å½•æ€ä¹ˆåˆ†ã€æ¨¡å—æ€ä¹ˆæ‹†ã€ä»£ç åº”è¯¥æ”¾åœ¨å“ªä¸€å±‚ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œæˆ‘é—®çš„é—®é¢˜ä¹Ÿå˜äº†ã€‚ä¸å†æ˜¯â€œè¿™æ®µä»£ç æ€ä¹ˆå†™â€ï¼Œ è€Œæ˜¯â€œè¿™ä¸ªåŠŸèƒ½å¦‚æœä»¥åè¦ç»´æŠ¤ï¼Œç°åœ¨è¿™æ ·åˆä¸åˆç†â€ã€‚</p>
<p>è™½ç„¶è¾“å‡ºè¿˜è°ˆä¸ä¸Šå¤šæˆç†Ÿï¼Œä½†æˆ‘èƒ½æ˜æ˜¾æ„Ÿè§‰åˆ°ï¼š</p>
<blockquote>
<p><strong>AI å·²ç»ä¸åªæ˜¯æ‰§è¡Œè€…äº†ï¼Œè€Œæ˜¯åœ¨å‚ä¸å†³ç­–ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-3">å†å¾€åï¼šæ–°æŠ€æœ¯å’Œé‡å¤åŠ³åŠ¨ï¼Œè¢«æˆ‘ç›´æ¥äº¤ç»™äº†å®ƒ</h3>
<p>å†åæ¥ï¼Œæœ‰ä¸¤ä¸ªåœºæ™¯æˆ‘ç”¨ AI ç”¨å¾—ç‰¹åˆ«å¤šã€‚</p>
<p><strong>å­¦æ–°æŠ€æœ¯</strong></p>
<p>é‡åˆ°ä¸ç†Ÿçš„æŠ€æœ¯æ ˆï¼Œæˆ‘å·²ç»å¾ˆå°‘ä»å¤´å•ƒæ–‡æ¡£äº†ï¼Œè€Œæ˜¯å…ˆè®© AI ç»™æˆ‘è·‘ä¸€ä¸ªæœ€å°å¯ç”¨çš„ä¾‹å­å‡ºæ¥ï¼›</p>
<p>æˆ‘ä¸æŒ‡æœ›å®ƒä¸€æ­¥åˆ°ä½ï¼Œä½†è¿™ä¸ªä¾‹å­è‡³å°‘èƒ½è®©æˆ‘å¿«é€ŸçŸ¥é“ï¼š<br/>
è¿™ä¸ªä¸œè¥¿å¤§æ¦‚æ˜¯æ€ä¹ˆç»„ç»‡çš„ï¼Œæœ‰æ²¡æœ‰æ˜æ˜¾å‘ç‚¹ã€‚</p>
<p><strong>æ—¥å¸¸é‚£äº›ç‰¹åˆ«æ¶ˆè€—è€å¿ƒçš„é‡å¤å·¥ä½œ</strong></p>
<p>æ¯”å¦‚å¯¹è±¡å£°æ˜ã€åºåˆ—åŒ–ååºåˆ—åŒ–ã€å„ç§æ ·æ¿ä»£ç ï¼Œè¿™äº›æ´»ä¸éš¾ï¼Œä½†å†™å¤šäº†çœŸçš„å¾ˆçƒ¦ï¼›
åœ¨è¿™ä¸€ç±»äº‹æƒ…ä¸Šï¼Œæˆ‘å·²ç»åŸºæœ¬ä¸è‡ªå·±åŠ¨æ‰‹äº†ï¼Œä¸æ˜¯å› ä¸ºæˆ‘ä¸ä¼šå†™ï¼Œè€Œæ˜¯æ²¡å¿…è¦ï¼›</p>
<p>æ…¢æ…¢åœ°ï¼Œæˆ‘å¯¹ AI çš„æ„Ÿè§‰ä¹Ÿå˜äº†ï¼Œå®ƒä¸å†åªæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ›´åƒæ˜¯</p>
<blockquote>
<p>éšæ—¶å¯ä»¥è°ƒåº¦çš„ <strong>â€œè¶…çº§å·¥å‚â€</strong></p>
</blockquote>
<p><code>æ…¢æ…¢çš„ä¸å†æ˜¯é€è¡Œå®Œæˆä»£ç ï¼Œè€Œæ˜¯å®Œæˆæ–¹æ¡ˆï¼Œå®¡è§†ç»“æ„ï¼Œè¿è¡Œé€»è¾‘</code></p>
<hr/>
<h2 data-id="heading-4">äºŒã€Agent çš„ä½¿ç”¨</h2>
<p>è¯´å®è¯ï¼ŒçœŸæ­£è®©æˆ‘å¼€å§‹â€œæ•¬ç•â€ Agent ç¼–ç¨‹çš„ï¼Œå¹¶ä¸æ˜¯æ•ˆç‡æå‡ï¼Œè€Œæ˜¯<strong>å®ƒå¼€å§‹å˜å¾—åƒä¸€å¥—å·¥ç¨‹æµç¨‹</strong>ï¼›è¿™ä¹Ÿæ˜¯é¦–æ¬¡æ„è¯†åˆ°ï¼ŒAgent çš„ä»·å€¼ä¸åœ¨äºâ€œç”Ÿæˆä»£ç â€ï¼Œè€Œæ˜¯é€šè¿‡ä¸Šä¸‹æ–‡çš„çº¦æŸå°†ä»£ç å…³è¿›â€œç¬¼å­â€ï¼›</p>
<h3 data-id="heading-5">æè¯åˆ°å·¥å…·æµ</h3>
<p>ä¸€å¼€å§‹ç”¨ AI å†™ä»£ç ï¼ŒåŸºæœ¬é  prompt ç¡¬æï¼š</p>
<blockquote>
<p>æè¿°å¾—å¥½ä¸å¥½ï¼Œç›´æ¥å†³å®šè¾“å‡ºèƒ½ä¸èƒ½ç”¨</p>
</blockquote>
<p>ä½†åæ¥æ˜æ˜¾èƒ½æ„Ÿè§‰åˆ°ï¼ŒAI è‡ªå·±ä¹Ÿåœ¨â€œå·¥ç¨‹åŒ–â€
ä¸ç®¡æ˜¯ skillã€å·¥å…·æµï¼Œè¿˜æ˜¯å¯¹ä¸Šä¸‹æ–‡çš„çº¦æŸæ–¹å¼ï¼Œæœ¬è´¨ä¸Šéƒ½åœ¨åšä¸€ä»¶äº‹â€”â€”  <strong>å‡å°‘å³å…´å‘æŒ¥ï¼Œå¢åŠ å¯æ§æ€§</strong></p>
<p>ç°åœ¨çš„ Agent ç¼–ç¨‹çœ‹èµ·æ¥çªç„¶é è°±äº†ä¸å°‘,ä¸æ˜¯å®ƒçªç„¶èªæ˜äº†,è€Œæ˜¯<strong>äº¤äº’æ–¹å¼æ›´åƒå·¥ç¨‹ï¼Œè€Œä¸æ˜¯èŠå¤©</strong></p>
<h3 data-id="heading-6">å¹»è§‰é—®é¢˜</h3>
<p>ç»„é‡Œå°±å‡ºè¿‡ä¸€æ¬¡å›  AI å¹»è§‰å¯¼è‡´çš„P0äº‹æ•…ã€‚<br/>
åŒäº‹åœ¨ç”¨ AI æ”¹ä¸€ä¸ª A æ–‡ä»¶çš„é€»è¾‘æ—¶ï¼ŒæŠŠ B æ–‡ä»¶é‡Œç›¸å…³çš„å®ç°ä¹Ÿä¸€èµ·â€œä¼˜åŒ–â€äº†ã€‚ä»ä»£ç æœ¬èº«çœ‹ï¼Œæ”¹åŠ¨æ˜¯åˆç†çš„ï¼Œé€»è¾‘ä¹Ÿèƒ½è‡ªæ´½ã€‚ä½†é—®é¢˜åœ¨äºï¼ŒB æ–‡ä»¶çš„é‚£éƒ¨åˆ†é€»è¾‘<strong>ä¸è¯¥è¢«è¿™ä¸ªéœ€æ±‚è§¦ç¢°çš„</strong>ï¼›</p>
<p>ç»“æœå¾ˆç›´æ¥ï¼š<br/>
<strong>ä¸€ä¸ª P0 ç¼ºé™·è¢«å¸¦åˆ°äº†çº¿ä¸Šã€‚</strong></p>
<p>äº‹åå¤ç›˜æ—¶å¤§å®¶çš„å…±è¯†ä¹Ÿå¾ˆæ¸…æ¥š,å¦‚æœæ˜¯äººå·¥æ”¹ä»£ç ï¼Œå¤§æ¦‚ç‡ä¸ä¼šè¿™ä¹ˆå¹²ã€‚<br/>
<code>çœŸæ­£å±é™©çš„åœ°æ–¹åœ¨äºâ€”â€”â€”â€”ä¸æ˜¯ä»£ç å†™é”™äº†ï¼Œè€Œæ˜¯çº¦æŸå¤±æ§</code></p>
<h3 data-id="heading-7">è€é¡¹ç›®é‡Œï¼ŒAI å¾ˆå®¹æ˜“æŠŠå‘ä¸€æ¬¡æ€§æ”¾å¤§</h3>
<p>è¿˜æœ‰ä¸€æ¬¡ç»å†ï¼Œä¹Ÿè®©æˆ‘å¯¹ AI åœ¨å·¥ç¨‹é‡Œçš„è¾¹ç•Œæœ‰äº†æ›´æ¸…é†’çš„è®¤è¯†;</p>
<p>å½“æ—¶æƒ³åœ¨ä¸€ä¸ªè¿­ä»£äº†å¤šå¹´çš„è€é¡¹ç›®é‡Œå¿«é€ŸåŠ åŠŸèƒ½,æˆ‘å¯¹æ•´ä½“æ¡†æ¶ç†è§£å¾—å¹¶ä¸ç®—é€ï¼Œå°±æƒ³ç€å…ˆè®© AI å‡ºä¸€ç‰ˆæ–¹æ¡ˆ;</p>
<p>åŠŸèƒ½ç¡®å®å¾ˆå¿«å°±è·‘èµ·æ¥äº†,ä½†è¶Šå¾€åç»´æŠ¤ï¼Œé—®é¢˜è¶Šå¤šï¼š</p>
<ul>
<li>ç»“æ„è¿‡é‡ï¼Œæ²¡æœ‰ä»¥åŸæœ‰ç»“æ„é€»è¾‘æ–°å¢</li>
<li>è®¾è®¡è¿‡åº¦ï¼Œå‡ ä¹æ²¡æ‰©å±•æ€§</li>
<li>å®Œå…¨æ— ç»´æŠ¤æ€§ï¼Œä¸€ç¢°å°±ç¢</li>
</ul>
<p>æœ€åçš„ç»“æœâ€”â€”æ–°å¢åŠŸèƒ½æ²¡ä¿ä½ï¼Œè¿˜è¢«è¿«è¿å¸¦ç€åšäº†ä¸€æ¬¡é‡æ„ã€‚</p>
<p>é‚£æ¬¡ä¹‹åæˆ‘åŸºæœ¬å½¢æˆäº†ä¸€ä¸ªè®¤çŸ¥ï¼š</p>
<blockquote>
<p><strong>åœ¨å¤æ‚å·¥ç¨‹é‡Œï¼ŒAI ä¼šæŠŠä½ å½“å‰çš„è®¤çŸ¥æ°´å¹³ï¼Œæˆå€æ”¾å¤§</strong></p>
</blockquote>
<p><code>å›å¤´çœ‹ï¼Œè¿™æ¬¡é—®é¢˜ä¸åœ¨äº AIï¼Œè€Œæ˜¯ä¸ªäººæœªç†è§£ç³»ç»Ÿä¹‹å‰å°†æƒåˆ©äº¤äº†å‡ºå»</code></p>
<h2 data-id="heading-8">ä¸‰ã€è¡Œä¸šçš„å˜åŒ–</h2>
<p>è¿™ä¸¤å¹´ITè¡Œä¸šçš„ç¯å¢ƒå˜åŒ–ï¼Œå…¶å®å¤§å®¶éƒ½æœ‰ä½“æ„Ÿâ€”â€”å²—ä½å˜å°‘ã€è¦æ±‚å˜é«˜ï¼Œå¸¦æ•™åˆ¶å‡ ä¹æ¶ˆå¤±ï¼Œå¾ˆå¤šæ—¶å€™ä¸€ä¸Šæ¥å°±è¦æ±‚â€œèƒ½å¹²æ´»â€ã€‚æœ‰ä¸€éƒ¨åˆ†è¡Œä¸šè‡ªèº«è¡°è½çš„åŸå› ï¼Œä¹Ÿæœ‰ AI å‡ºç°å¯¹æ–°äººçš„å½±å“ï¼›</p>
<p>AI å¹¶æ²¡æœ‰æ”¹å˜å·¥ç¨‹å¤æ‚åº¦ï¼Œåªæ˜¯æ”¹å˜äº†<strong>è°æ¥ä¸ºå¤æ‚ä¹°å•</strong>ï¼Œåœ¨çœŸå®çš„å·¥ç¨‹ç¯å¢ƒé‡Œï¼ŒAI å¸¦æ¥çš„æœ€å¤§å˜åŒ–ï¼Œå…¶å®ä¸æ˜¯â€œå†™å¾—æ›´å¿«â€ï¼Œè€Œæ˜¯ <strong>é£é™©çš„æ‰¿æ‹…æ–¹å¼å‘ç”Ÿäº†å˜åŒ–</strong>ï¼›</p>
<h3 data-id="heading-9">å·¥ç¨‹ä¸äºº</h3>
<p>å¯¹å·²ç»æœ‰å·¥ç¨‹ç»éªŒçš„äººæ¥è¯´ï¼ŒAI æ›´åƒæ˜¯åŠ é€Ÿå™¨ã€‚ä½ å¤§æ¦‚çŸ¥é“ä»€ä¹ˆæ˜¯å¯¹çš„ã€ä»€ä¹ˆæ˜¯ä¸èƒ½ç¢°çš„ï¼Œèƒ½èŠ‚çº¦å¼€å‘å‘¨æœŸï¼›</p>
<p>ä½†å¯¹æ–°äººæ¥è¯´ï¼Œæƒ…å†µå¾€å¾€ç›¸åã€‚åœ¨è¿˜æ²¡å»ºç«‹å®Œæ•´è®¤çŸ¥ä½“ç³»ã€ä¹Ÿæ²¡çœŸæ­£åšè¿‡è®¾è®¡å–èˆçš„å‰æä¸‹ï¼ŒAI ç»™å‡ºçš„â€œçœ‹èµ·æ¥å¾ˆå®Œæ•´çš„æ–¹æ¡ˆâ€ï¼Œåè€Œä¼šè®©äººè¯¯ä»¥ä¸ºé—®é¢˜å·²ç»è¢«è§£å†³äº†ï¼›ä¸€æ—¦ä¸šåŠ¡å¤æ‚åº¦ä¸Šæ¥ï¼Œéšè—çš„é—®é¢˜ä¼šé›†ä¸­çˆ†å‘ã€‚ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨è€é¡¹ç›®é‡Œï¼Œ AI å¾ˆå®¹æ˜“æŠŠé—®é¢˜ä¸€æ¬¡æ€§æ”¾å¤§â€”â€”â€”â€”ä¸æ˜¯å› ä¸ºå®ƒä¹±å†™ï¼Œè€Œæ˜¯<strong>å®ƒä¸çŸ¥é“ä»€ä¹ˆä¸è¯¥å†™</strong>ï¼›</p>
<h3 data-id="heading-10">å®è·µçš„è®¤çŸ¥</h3>
<blockquote>
<p>ä»»ä½•å·¥å…·çš„ä½¿ç”¨ï¼Œéƒ½åº”è¯¥å»ºç«‹åœ¨å®è·µä¹‹ä¸Š</p>
</blockquote>
<p>å¾ˆè®¤åŒå¼ æ–‡å®åŒ»ç”Ÿçš„è§‚ç‚¹â€”â€”<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.guancha.cn%2Fpolitics%2F2026_01_13_803716.shtml" target="_blank" title="https://www.guancha.cn/politics/2026_01_13_803716.shtml" ref="nofollow noopener noreferrer">åå¯¹å¹´è½»åŒ»ç”Ÿè¿‡åº¦ä¾èµ– AI è¯Šæ–­</a>ä¸æ˜¯å› ä¸º AI ä¸å‡†ï¼Œè€Œæ˜¯<strong>è¯Šæ–­èƒ½åŠ›æœ¬èº«éœ€è¦é€šè¿‡å¤§é‡å®è·µå»ºç«‹</strong>ï¼›</p>
<p>è½¯ä»¶å·¥ç¨‹ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¦‚æœä¸€ä¸ªäººä»ä¸€å¼€å§‹å°±ä¹ æƒ¯æŠŠâ€œç†è§£â€å’Œâ€œè®¾è®¡â€å¤–åŒ…ç»™ AIï¼Œé‚£ä¹ˆä»–ç¼ºå¤±çš„ä¸æ˜¯ä»£ç èƒ½åŠ›ï¼Œè€Œæ˜¯åˆ¤æ–­èƒ½åŠ›ï¼›åœ¨è¿˜æœªå»ºç«‹å·¥ç¨‹ç›´è§‰ï¼Œæ²¡è¸©å‘ä¹‹å‰ï¼Œå¾ˆéš¾åˆ¤å®šä¸€äº›åŸºç¡€äº‹å®ï¼š</p>
<ul>
<li>æ˜¯å¦è¿‡åº¦è®¾è®¡ï¼Œå¯ç”¨æ€§å¦‚ä½•</li>
<li>å½“å‰æ”¹åŠ¨å¯¹äºæ•´ä¸ªç³»ç»Ÿçš„å½±å“</li>
<li>åç»­çš„å¯ç»´æŠ¤æ€§ä»¥åŠéšä¸šåŠ¡è¿­ä»£çš„å¯æ‰©å±•æ€§</li>
</ul>
<p><code>è¿™äº›åˆ¤æ–­èƒ½åŠ›ï¼Œéƒ½éœ€è¦äº²èº«ç»å†æ‰èƒ½é€æ¸å½¢æˆ</code></p>
<h3 data-id="heading-11">éç‰¹å®šè¡Œä¸šé—®é¢˜</h3>
<p>å…¶å®ä¸åªæ˜¯ IT è¡Œä¸šï¼Œåœ¨å¾ˆå¤šé¢†åŸŸï¼ŒåŸ¹è®­æ­£åœ¨è¢«â€œæ•ˆç‡â€å’Œâ€œäº¤ä»˜å‹åŠ›â€æŒ¤æ‰ï¼›å›¢é˜Ÿéš¾ä»¥æŠ•å…¥æˆæœ¬åŸ¹å…»æ–°äººï¼ŒAI çœ‹èµ·æ¥ç»™äº†ä¸€ä¸ª<strong>çœ‹ä¼¼åˆç†çš„è¡¥ä½æ–¹æ¡ˆ</strong>ï¼Œèƒ½å¸®åŠ©æ–°äººçŸ­æœŸâ€œçœ‹èµ·æ¥èƒ½å¹²æ´»â€</p>
<p>ä½†ä»ç»“æœçœ‹ï¼Œåœ¨æé«˜æ•ˆç‡çš„åŒæ—¶ï¼Œä¹Ÿå°†å¾ˆå¤šç»éªŒåŒ–çš„é£é™©è´£ä»»ç›´æ¥æš´éœ²ç»™æ–°äººï¼›å¾ˆå¤šç»éªŒå‹é£é™©ä»å›¢é˜Ÿå±‚å…œåº•æ¼”å˜æˆä¸ªäººé¢å¯¹ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„éšæ‚£ï¼›</p>
<blockquote>
<p>æœ‰äº›è®¤çŸ¥ç†å¿µéœ€è¦æ—¥ç§¯æœˆç´¯çš„å·¥ç¨‹å­¦è®¤çŸ¥ç§¯ç´¯</p>
</blockquote>
<p>å·¥ç¨‹è®¤çŸ¥è¿™å—ï¼Œéœ€è¦åœ¨çœŸå®å·¥ç¨‹åå¤ç¢°å£ã€åå¤å¤ç›˜é å®è·µé€æ­¥ç§¯ç´¯ï¼›</p>
<p><code>å·¥ç¨‹è®¤çŸ¥è¿™ä»¶äº‹ä»æ¥ä¸æ˜¯æ•ˆç‡å·¥å…·å¯ä»¥å‹ç¼©çš„æˆæœ¬</code></p>
<h2 data-id="heading-12">å››ã€åœ¨ä¿¡æ¯æ´ªæµæ‰¾åˆ°å±äºè‡ªå·±çš„ Vibe Coding</h2>
<p>å›æº¯ä¸ AIã€Agent æ‰“äº¤é“çš„ä¸€è·¯ï¼ŒçœŸæ­£æ”¹å˜æˆ‘çš„ä¸æ˜¯å†åªæ˜¯å°†ä»–ä½œä¸ºä¸€ä¸ªâ€œå·¥å…·â€ï¼Œè€Œæ˜¯é‡æ–°å®¡è§†è‡ªå·±åœ¨å·¥ç¨‹é¢†åŸŸä¸­çš„ è§’è‰²ï¼›</p>
<p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ç¦»ä¸å¼€ä½¿ç”¨ä»–è¿›è¡Œå·¥ä½œã€ç”Ÿæ´»ï¼Œä½†æœ¬è´¨ä¸Šè¿™æ˜¯åœ¨ä¸æ–­å»ºç«‹å¹¶æå‡è®¤çŸ¥å‰æä¸‹æ‰èƒ½æ›´å¥½ä½¿ç”¨ï¼›</p>
<p>æ„æ€éœ€æ±‚ï¼Œå®Œå–„çº¦æŸï¼Œæ²Ÿé€šæ–¹æ¡ˆï¼Œæ‰§è¡Œç”Ÿæˆï¼›ç”¨å¾—å¥½ä»–å°±æ˜¯æ•‘å‘½ç¨»è‰ï¼Œç”¨ä¸å¥½å°±æ˜¯æ´ªæ°´çŒ›å…½ï¼Œ<strong>ä¸ç¥è¯ï¼Œä¸æ‹’ç»</strong>æ˜¯æœ€å¥½çš„ä½¿ç”¨è§‚å¿µï¼›æ‰€è°“çš„ Vibe Codeingï¼Œç»ä¸è¯¥æ˜¯æ— è„‘ä½¿ç”¨ AI è¾“å‡ºä»£ç ï¼Œè€Œæ˜¯åœ¨ç†è§£ç³»ç»Ÿï¼Œæ•¬ç•å·¥ç¨‹çš„å‰æä¸‹ï¼Œæ‹¥æœ‰æ¸…æ™°åˆ¤æ–­åŠ›çš„æƒ…å†µä¸‹å®ŒæˆåŠ³åŠ¨æˆæœï¼›</p>
<blockquote>
<p>ä¹Ÿè®¸ AI å¸¦æ¥çš„çœŸçš„æ˜¯ä¸‹ä¸€æ¬¡å·¥ä¸šé©å‘½ï¼Œè‡³å°‘å¯¹ä¸ªäººè€Œè¨€å®ƒæ˜¯æ—¥å¸¸çš„ä¸€éƒ¨åˆ†</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¡®ä¿æ•°å€¼è®¡ç®—ç²¾åº¦ï¼šBigDecimal ä½¿ç”¨æŒ‡å—ä¸æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7595893785907314722</link>    <guid>https://juejin.cn/post/7595893785907314722</guid>    <pubDate>2026-01-18T01:14:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595893785907314722" data-draft-id="7595886887523778600" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¡®ä¿æ•°å€¼è®¡ç®—ç²¾åº¦ï¼šBigDecimal ä½¿ç”¨æŒ‡å—ä¸æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-18T01:14:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lagrahhn"/> <meta itemprop="url" content="https://juejin.cn/user/3901542412069112"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¡®ä¿æ•°å€¼è®¡ç®—ç²¾åº¦ï¼šBigDecimal ä½¿ç”¨æŒ‡å—ä¸æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3901542412069112/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lagrahhn
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T01:14:45.000Z" title="Sun Jan 18 2026 01:14:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>é€‚ç”¨äºé‡‘èè®¡ç®—ã€é«˜ç²¾åº¦è¿ç®—ç­‰å¯¹æ•°å€¼å‡†ç¡®æ€§è¦æ±‚é«˜çš„åœºæ™¯ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ“Œ ä¸€ã€å¸¸è§é—®é¢˜ç‚¹</h2>
<h3 data-id="heading-1">ä½¿ç”¨ <code>BigDecimal(double)</code> æ„é€ å‡½æ•° âŒ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ç¤ºèŒƒ</span>
<span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bd</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-number">0.1</span>); 
System.out.println(bd); <span class="hljs-comment">// è¾“å‡º: 0.1000000000000000055511151231257827021181583404541015625</span>
</code></pre>
<p>âœ… <strong>æ¨èåšæ³•</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bd1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"0.1"</span>);          <span class="hljs-comment">// å®‰å…¨</span>
<span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bd2</span> <span class="hljs-operator">=</span> BigDecimal.valueOf(<span class="hljs-number">0.1</span>);        <span class="hljs-comment">// å†…éƒ¨è½¬å­—ç¬¦ä¸²ï¼Œä¹Ÿå®‰å…¨</span>
</code></pre>
<hr/>
<h3 data-id="heading-2">é™¤æ³•æœªæŒ‡å®šèˆå…¥æ¨¡å¼å¯¼è‡´å¼‚å¸¸ âŒ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1"</span>);
<span class="hljs-type">BigDecimal</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"3"</span>);
a.divide(b); <span class="hljs-comment">// Non-terminating decimal expansion; no exact representable decimal result.</span>
</code></pre>
<p>âœ… <strong>æ¨èåšæ³•</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> a.divide(b, <span class="hljs-number">4</span>, RoundingMode.HALF_UP);
<span class="hljs-comment">// æˆ–</span>
<span class="hljs-type">BigDecimal</span> <span class="hljs-variable">result2</span> <span class="hljs-operator">=</span> a.divide(b, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MathContext</span>(<span class="hljs-number">10</span>, RoundingMode.HALF_UP));
</code></pre>
<p>ğŸ“Œ <strong>å»ºè®®</strong>ï¼šæ‰€æœ‰é™¤æ³•æ“ä½œéƒ½æ˜¾å¼æŒ‡å®šç²¾åº¦å’Œèˆå…¥æ–¹å¼ã€‚</p>
<hr/>
<h3 data-id="heading-3"><code>equals()</code> æ¯”è¾ƒåŒ…å« scaleï¼ˆå°æ•°ä½æ•°ï¼‰âŒ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1.0"</span>).equals(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1"</span>)); <span class="hljs-comment">// false</span>
</code></pre>
<p>âœ… <strong>æ­£ç¡®æ¯”è¾ƒæ•°å€¼æ˜¯å¦ç›¸ç­‰</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1.0"</span>).compareTo(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1"</span>)) == <span class="hljs-number">0</span>; <span class="hljs-comment">// true</span>
</code></pre>
<p>ğŸ“Œ <strong>è§„åˆ™æ€»ç»“</strong>ï¼š</p>
<ul>
<li>æ•°å€¼ç›¸ç­‰ â†’ <code>compareTo() == 0</code></li>
<li>å®Œå…¨ç›¸åŒï¼ˆå« scaleï¼‰â†’ <code>equals()</code></li>
</ul>
<hr/>
<h3 data-id="heading-4"><code>hashCode()</code> ä¸ <code>equals()</code> ä¸ä¸€è‡´ï¼ˆå›  scale ä¸åŒï¼‰âŒ</h3>
<pre><code class="hljs language-java" lang="java">Set&lt;BigDecimal&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1.0"</span>));
set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1"</span>)); <span class="hljs-comment">// è¢«è§†ä¸ºä¸¤ä¸ªä¸åŒå…ƒç´ ï¼</span>
System.out.println(set.size()); <span class="hljs-comment">// è¾“å‡º: 2</span>
</code></pre>
<p>âœ… <strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç»Ÿä¸€æ ¼å¼åå†æ”¾å…¥é›†åˆ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">normalized</span> <span class="hljs-operator">=</span> bd.stripTrailingZeros();
set.add(normalized);
</code></pre>
<hr/>
<h3 data-id="heading-5"><code>stripTrailingZeros()</code> å¯èƒ½è¿”å›ç§‘å­¦è®¡æ•°æ³• âŒ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bd</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"100"</span>);
System.out.println(bd.stripTrailingZeros().toString()); <span class="hljs-comment">// è¾“å‡º: 1E+2</span>
</code></pre>
<p>âœ… <strong>è¾“å‡ºæ ‡å‡†åè¿›åˆ¶æ ¼å¼</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">System.out.println(bd.stripTrailingZeros().toPlainString()); <span class="hljs-comment">// è¾“å‡º: 100</span>
</code></pre>
<hr/>
<h3 data-id="heading-6">æ€§èƒ½é—®é¢˜ï¼šé¢‘ç¹åˆ›å»ºå¯¹è±¡</h3>
<ul>
<li><code>BigDecimal</code> æ˜¯ä¸å¯å˜ç±»ï¼Œæ¯æ¬¡è¿ç®—éƒ½ç”Ÿæˆæ–°å¯¹è±¡ã€‚</li>
<li>é«˜é¢‘å¾ªç¯ä¸­å¯èƒ½é€ æˆ GC å‹åŠ›ã€‚</li>
</ul>
<p>âœ… <strong>ä¼˜åŒ–å»ºè®®</strong>ï¼š</p>
<ul>
<li>ç¼“å­˜å¸¸ç”¨å¸¸é‡ï¼š<code>BigDecimal.ZERO</code>, <code>BigDecimal.ONE</code>, <code>BigDecimal.TEN</code></li>
<li>é¿å…ä¸å¿…è¦çš„ä¸­é—´å˜é‡</li>
</ul>
<hr/>
<h3 data-id="heading-7"><code>setScale()</code> ä¸æ”¹å˜åŸå¯¹è±¡ âŒ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bd</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1.234"</span>);
bd.setScale(<span class="hljs-number">2</span>, RoundingMode.HALF_UP); <span class="hljs-comment">// æ— æ•ˆï¼</span>
System.out.println(bd); <span class="hljs-comment">// ä»æ˜¯ 1.234</span>
</code></pre>
<p>âœ… <strong>å¿…é¡»é‡æ–°èµ‹å€¼</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">bd = bd.setScale(<span class="hljs-number">2</span>, RoundingMode.HALF_UP);
</code></pre>
<hr/>
<h3 data-id="heading-8">é»˜è®¤èˆå…¥æ¨¡å¼é€‰æ‹©éœ€è°¨æ…</h3>

















<table><thead><tr><th>èˆå…¥æ¨¡å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>HALF_UP</code></td><td>å››èˆäº”å…¥ï¼ˆæœ€å¸¸ç”¨ï¼‰</td></tr><tr><td><code>HALF_EVEN</code></td><td>é“¶è¡Œå®¶èˆå…¥ï¼ˆå‡å°‘ç´¯ç§¯è¯¯å·®ï¼Œé€‚åˆé‡‘èï¼‰</td></tr></tbody></table>
<p>âœ… <strong>æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©</strong>ï¼Œä¸è¦ç›²ç›®ä½¿ç”¨é»˜è®¤ã€‚</p>
<hr/>
<h2 data-id="heading-9">ğŸ“Œ äºŒã€<code>toString()</code> vs <code>toPlainString()</code> å¯¹æ¯”</h2>




















<table><thead><tr><th>æ–¹æ³•</th><th>è¡Œä¸º</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>toString()</code></td><td>å¯èƒ½ä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•ï¼ˆå¦‚ <code>1.23E-7</code>ï¼‰</td><td>æ—¥å¿—ã€è°ƒè¯•</td></tr><tr><td><code>toPlainString()</code></td><td>å§‹ç»ˆè¿”å›æ™®é€šåè¿›åˆ¶æ ¼å¼</td><td>æ˜¾ç¤ºã€å­˜å‚¨ã€åºåˆ—åŒ–</td></tr></tbody></table>
<h3 data-id="heading-10">ç¤ºä¾‹å¯¹æ¯”ï¼š</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">small</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"0.000000123"</span>);
System.out.println(small.toString());        <span class="hljs-comment">// 1.23E-7</span>
System.out.println(small.toPlainString());   <span class="hljs-comment">// 0.000000123</span>

<span class="hljs-type">BigDecimal</span> <span class="hljs-variable">trailing</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"100.00"</span>);
System.out.println(trailing.toString());        <span class="hljs-comment">// 100.00</span>
System.out.println(trailing.toPlainString());   <span class="hljs-comment">// 100.00</span>

<span class="hljs-type">BigDecimal</span> <span class="hljs-variable">large</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1E+10"</span>);
System.out.println(large.toString());        <span class="hljs-comment">// 1E+10</span>
System.out.println(large.toPlainString());   <span class="hljs-comment">// 10000000000</span>
</code></pre>
<p>âœ… <strong>å»ºè®®</strong>ï¼šå¯¹å¤–è¾“å‡ºï¼ˆå¦‚ JSONã€UIã€æ•°æ®åº“ï¼‰ä¸€å¾‹ä½¿ç”¨ <code>toPlainString()</code>ã€‚</p>
<hr/>
<h2 data-id="heading-11">ğŸ“Œ ä¸‰ã€å®Œæ•´æµ‹è¯•ä»£ç ï¼ˆéªŒè¯æ‰€æœ‰é—®é¢˜ç‚¹ï¼‰</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.math.MathContext;
<span class="hljs-keyword">import</span> java.math.RoundingMode;
<span class="hljs-keyword">import</span> java.util.HashSet;
<span class="hljs-keyword">import</span> java.util.Set;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BigDecimalPitfallsTest</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"=== 1. æ„é€ å‡½æ•°é™·é˜± ==="</span>);
        testConstructor();

        System.out.println(<span class="hljs-string">"\n=== 2. é™¤æ³•å¼‚å¸¸ ==="</span>);
        testDivision();

        System.out.println(<span class="hljs-string">"\n=== 3. equals vs compareTo ==="</span>);
        testEqualsVsCompareTo();

        System.out.println(<span class="hljs-string">"\n=== 4. Set ä¸­é‡å¤é—®é¢˜ ==="</span>);
        testSetBehavior();

        System.out.println(<span class="hljs-string">"\n=== 5. stripTrailingZeros ä¸ toPlainString ==="</span>);
        testStripAndToString();

        System.out.println(<span class="hljs-string">"\n=== 6. setScale å¿…é¡»é‡æ–°èµ‹å€¼ ==="</span>);
        testSetScale();

        System.out.println(<span class="hljs-string">"\n=== 7. toString vs toPlainString ==="</span>);
        testToStringFormats();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testConstructor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bad</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-number">0.1</span>);
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">good1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"0.1"</span>);
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">good2</span> <span class="hljs-operator">=</span> BigDecimal.valueOf(<span class="hljs-number">0.1</span>);
        System.out.println(<span class="hljs-string">"new BigDecimal(0.1): "</span> + bad);
        System.out.println(<span class="hljs-string">"new BigDecimal(\"0.1\"): "</span> + good1);
        System.out.println(<span class="hljs-string">"BigDecimal.valueOf(0.1): "</span> + good2);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDivision</span><span class="hljs-params">()</span> {
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1"</span>);
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"3"</span>);
        <span class="hljs-keyword">try</span> {
            a.divide(b);
        } <span class="hljs-keyword">catch</span> (ArithmeticException e) {
            System.out.println(<span class="hljs-string">"é™¤æ³•å¼‚å¸¸: "</span> + e.getMessage());
        }
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">safe</span> <span class="hljs-operator">=</span> a.divide(b, <span class="hljs-number">6</span>, RoundingMode.HALF_UP);
        System.out.println(<span class="hljs-string">"å®‰å…¨é™¤æ³•ç»“æœ: "</span> + safe);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testEqualsVsCompareTo</span><span class="hljs-params">()</span> {
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1.0"</span>);
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1"</span>);
        System.out.println(<span class="hljs-string">"x.equals(y): "</span> + x.equals(y)); <span class="hljs-comment">// false</span>
        System.out.println(<span class="hljs-string">"x.compareTo(y) == 0: "</span> + (x.compareTo(y) == <span class="hljs-number">0</span>)); <span class="hljs-comment">// true</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSetBehavior</span><span class="hljs-params">()</span> {
        Set&lt;BigDecimal&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1.0"</span>));
        set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1"</span>));
        System.out.println(<span class="hljs-string">"Set å¤§å°ï¼ˆæœªæ ‡å‡†åŒ–ï¼‰: "</span> + set.size()); <span class="hljs-comment">// 2</span>

        Set&lt;BigDecimal&gt; normalizedSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        normalizedSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1.0"</span>).stripTrailingZeros());
        normalizedSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1"</span>).stripTrailingZeros());
        System.out.println(<span class="hljs-string">"Set å¤§å°ï¼ˆæ ‡å‡†åŒ–åï¼‰: "</span> + normalizedSet.size()); <span class="hljs-comment">// 1</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testStripAndToString</span><span class="hljs-params">()</span> {
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bd</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"100"</span>);
        System.out.println(<span class="hljs-string">"stripTrailingZeros().toString(): "</span> + bd.stripTrailingZeros().toString());
        System.out.println(<span class="hljs-string">"stripTrailingZeros().toPlainString(): "</span> + bd.stripTrailingZeros().toPlainString());
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSetScale</span><span class="hljs-params">()</span> {
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bd</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1.234"</span>);
        bd.setScale(<span class="hljs-number">2</span>, RoundingMode.HALF_UP); <span class="hljs-comment">// æ— æ•ˆæœ</span>
        System.out.println(<span class="hljs-string">"æœªé‡æ–°èµ‹å€¼: "</span> + bd); <span class="hljs-comment">// 1.234</span>

        bd = bd.setScale(<span class="hljs-number">2</span>, RoundingMode.HALF_UP);
        System.out.println(<span class="hljs-string">"é‡æ–°èµ‹å€¼å: "</span> + bd); <span class="hljs-comment">// 1.23</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testToStringFormats</span><span class="hljs-params">()</span> {
        BigDecimal[] cases = {
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"0.000000123"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"100.00"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"12345678901234567890"</span>)
        };
        <span class="hljs-keyword">for</span> (BigDecimal bd : cases) {
            System.out.println(<span class="hljs-string">"åŸå§‹: "</span> + bd);
            System.out.println(<span class="hljs-string">"  toString():        "</span> + bd.toString());
            System.out.println(<span class="hljs-string">"  toPlainString():  "</span> + bd.toPlainString());
            System.out.println();
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-12">ğŸ“Œ å››ã€æœ€ä½³å®è·µæ€»ç»“è¡¨</h2>













































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èåšæ³•</th></tr></thead><tbody><tr><td><strong>æ„é€ </strong></td><td>ä¼˜å…ˆä½¿ç”¨ <code>new BigDecimal("xxx")</code> æˆ– <code>BigDecimal.valueOf(xxx)</code></td></tr><tr><td><strong>æ¯”è¾ƒæ•°å€¼</strong></td><td>ä½¿ç”¨ <code>compareTo() == 0</code></td></tr><tr><td><strong>åˆ¤æ–­å®Œå…¨ç›¸ç­‰</strong></td><td>ä½¿ç”¨ <code>equals()</code>ï¼ˆå« scaleï¼‰</td></tr><tr><td><strong>é™¤æ³•è¿ç®—</strong></td><td>æ€»æ˜¯æŒ‡å®šç²¾åº¦å’Œ <code>RoundingMode</code></td></tr><tr><td><strong>é›†åˆå­˜å‚¨</strong></td><td>å…ˆè°ƒç”¨ <code>.stripTrailingZeros()</code> ç»Ÿä¸€æ ¼å¼</td></tr><tr><td><strong>å­—ç¬¦ä¸²è¾“å‡º</strong></td><td>ä½¿ç”¨ <code>.toPlainString()</code> é¿å…ç§‘å­¦è®¡æ•°æ³•</td></tr><tr><td><strong>ä¿®æ”¹å€¼</strong></td><td>è®°ä½ <code>BigDecimal</code> ä¸å¯å˜ï¼Œå¿…é¡»é‡æ–°èµ‹å€¼</td></tr><tr><td><strong>èˆå…¥ç­–ç•¥</strong></td><td>æ ¹æ®ä¸šåŠ¡é€‰ <code>HALF_UP</code>ï¼ˆé€šç”¨ï¼‰æˆ– <code>HALF_EVEN</code>ï¼ˆé‡‘èï¼‰</td></tr><tr><td><strong>æ€§èƒ½ä¼˜åŒ–</strong></td><td>ç¼“å­˜å¸¸é‡ï¼Œé¿å…é«˜é¢‘åˆ›å»º</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026å¹´å›½äº§æ—¶åºæ•°æ®åº“ç›˜ç‚¹ï¼šæ ¼å±€å¬—å˜ä¸‹çš„å¤šæ¨¡æ€èåˆæ–°é”]]></title>    <link>https://juejin.cn/post/7596171325531979817</link>    <guid>https://juejin.cn/post/7596171325531979817</guid>    <pubDate>2026-01-18T06:30:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596171325531979817" data-draft-id="7596171325531963433" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026å¹´å›½äº§æ—¶åºæ•°æ®åº“ç›˜ç‚¹ï¼šæ ¼å±€å¬—å˜ä¸‹çš„å¤šæ¨¡æ€èåˆæ–°é”"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-18T06:30:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026å¹´å›½äº§æ—¶åºæ•°æ®åº“ç›˜ç‚¹ï¼šæ ¼å±€å¬—å˜ä¸‹çš„å¤šæ¨¡æ€èåˆæ–°é”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T06:30:24.000Z" title="Sun Jan 18 2026 06:30:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ—¶åºæ•°æ®åº“åˆ†ææŠ¥å‘Šç”Ÿæˆä»£ç ç¤ºä¾‹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_timeseries_db_report</span>(<span class="hljs-params">year=<span class="hljs-number">2026</span></span>):
    <span class="hljs-string">"""ç”Ÿæˆ2026å¹´å›½äº§æ—¶åºæ•°æ®åº“åˆ†ææŠ¥å‘Š"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"      <span class="hljs-subst">{year}</span>å¹´å›½äº§æ—¶åºæ•°æ®åº“æŠ€æœ¯åˆ†ææŠ¥å‘Š"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>\n"</span>)
    
    <span class="hljs-comment"># æŠ¥å‘Šç»Ÿè®¡ä¿¡æ¯</span>
    total_databases = <span class="hljs-number">10</span>
    open_source_count = <span class="hljs-number">5</span>
    commercial_count = <span class="hljs-number">5</span>
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“Š å¸‚åœºæ¦‚è§ˆ:"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   - åˆ†æå¹´ä»½: <span class="hljs-subst">{year}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   - æ”¶å½•æ•°æ®åº“æ•°é‡: <span class="hljs-subst">{total_databases}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   - å¼€æºäº§å“: <span class="hljs-subst">{open_source_count}</span>æ¬¾"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   - å•†ä¸šäº§å“: <span class="hljs-subst">{commercial_count}</span>æ¬¾"</span>)
    <span class="hljs-built_in">print</span>()
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">"æŠ¥å‘Šç”Ÿæˆå®Œæˆ"</span>

<span class="hljs-comment"># æ‰§è¡ŒæŠ¥å‘Šç”Ÿæˆ</span>
generate_timeseries_db_report(<span class="hljs-number">2026</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">80</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"                   æ­£å¼æŠ¥å‘Šå†…å®¹"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>*<span class="hljs-number">80</span> + <span class="hljs-string">"\n"</span>)
</code></pre>
<blockquote>
<p>è¿›å…¥2026å¹´ï¼Œåœ¨"æ•°å­—ä¸­å›½"ä¸å·¥ä¸šç‰©è”ç½‘æµªæ½®çš„å¼ºåŠ²æ¨åŠ¨ä¸‹ï¼Œå›½äº§æ—¶åºæ•°æ®åº“å¸‚åœºæŒç»­ç¹è£ï¼Œç«äº‰æ ¼å±€æ—¥è¶‹æ¸…æ™°ã€‚æœ¬æ–‡å°†å¯¹å½“å‰ä¸»æµçš„å›½äº§æ—¶åºæ•°æ®åº“è¿›è¡Œæ¢³ç†ç›˜ç‚¹ï¼Œå¹¶ç‰¹åˆ«èšç„¦äºé‡‘ä»“æ•°æ®åº“ï¼ˆKingbaseï¼‰ï¼Œæ·±å…¥å‰–æå…¶ä»¥èåˆå¤šæ¨¡æ¶æ„ä¸ºæ ¸å¿ƒçš„å·®å¼‚åŒ–ç«äº‰å®åŠ›ï¼Œä¸ºä¼ä¸šåœ¨æ•°å­—åŒ–è½¬å‹ä¸­çš„æ—¶åºæ•°æ®åº•åº§é€‰å‹æä¾›å‚è€ƒã€‚</p>
</blockquote>
<p>ä¸€ã€ä¸»æµå›½äº§æ—¶åºæ•°æ®åº“æ¦‚è§ˆ (2026)</p>
<p>å›½äº§æ—¶åºæ•°æ®åº“å·²å½¢æˆå¤šå…ƒäº§å“çŸ©é˜µï¼Œæ ¹æ®å…¶æ ¸å¿ƒæŠ€æœ¯è·¯çº¿ã€å•†ä¸šæ¨¡å¼å’Œå¸‚åœºå®šä½ï¼Œä¸»è¦ä»£è¡¨æ€§äº§å“å¦‚ä¸‹ï¼š</p>























































<table><thead><tr><th>æ•°æ®åº“åç§°</th><th>æ ¸å¿ƒå‚å•†/ç¤¾åŒº</th><th>ä¸»è¦ç‰¹ç‚¹ä¸å®šä½</th></tr></thead><tbody><tr><td>TDengine</td><td>æ¶›æ€æ•°æ®</td><td>é«˜æ€§èƒ½ã€åˆ†å¸ƒå¼ï¼Œå®šä½ä¸ºAIé©±åŠ¨çš„å·¥ä¸šå¤§æ•°æ®å¹³å°ï¼Œåœ¨å†™å…¥ååå’Œå­˜å‚¨æˆæœ¬æ–¹é¢ä¼˜åŠ¿æ˜¾è‘—ï¼Œé›†ç¾¤å¼€æºã€ç”Ÿæ€å¼€æ”¾ã€‚</td></tr><tr><td>KaiwuDB</td><td>æµªæ½®äº‘å¼ˆ</td><td>å¼ºè°ƒåˆ†å¸ƒå¼å¤šæ¨¡èåˆæ¶æ„ï¼Œæ”¯æŒæ—¶åºã€å…³ç³»ã€æ–‡æ¡£ç­‰å¤šç§æ•°æ®æ¨¡å‹çš„ç»Ÿä¸€å¤„ç†ï¼ŒåŸç”Ÿé›†æˆAIç®—æ³•ã€‚</td></tr><tr><td>Apache IoTDB</td><td>æ¸…åå¤§å­¦ (ApacheåŸºé‡‘ä¼š)</td><td>ä¸“ä¸ºç‰©è”ç½‘è®¾è®¡ï¼Œé‡‡ç”¨"ç«¯-è¾¹-äº‘"ååŒåŸç”Ÿæ¶æ„ï¼Œæ•°æ®æ¨¡å‹å¸¸é‡‡ç”¨æ ‘å½¢ç»“æ„è´´åˆç‰©ç†è®¾å¤‡å±‚çº§ã€‚</td></tr><tr><td>DolphinDB</td><td>æµ™æ±Ÿæ™ºè‡¾ç§‘æŠ€</td><td>å°†æ•°æ®åº“ä¸å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€ã€æµè®¡ç®—å¼•æ“èåˆï¼Œåœ¨é‡‘èé‡åŒ–äº¤æ˜“ã€é«˜é¢‘æ•°æ®åˆ†æé¢†åŸŸè¡¨ç°çªå‡ºã€‚</td></tr><tr><td>openGemini</td><td>åä¸ºäº‘</td><td>å¼€æºçš„å¤šæ¨¡æ€æ—¶åºæ•°æ®åº“ï¼Œå…¼å®¹InfluxDBç”Ÿæ€ï¼Œå¼ºè°ƒé«˜æ€§èƒ½ä¸äº‘åŸç”Ÿç‰¹æ€§ã€‚</td></tr><tr><td>CnosDB</td><td>è¯ºå¸æ—¶ç©º</td><td>äº‘åŸç”Ÿæ—¶åºæ•°æ®åº“ï¼Œæ”¯æŒåˆ†å¸ƒå¼ä¸é›†ä¸­å¼éƒ¨ç½²ï¼Œåœ¨ç›‘æ§å’Œç‰©è”ç½‘åœºæ™¯æœ‰åº”ç”¨ã€‚</td></tr><tr><td>GreptimeDB</td><td>æ ¼ç¿ç§‘æŠ€</td><td>äº‘åŸç”Ÿåˆ†å¸ƒå¼æ—¶åºæ•°æ®åº“ï¼Œä¸»æ‰“å®æ—¶åˆ†æèƒ½åŠ›ã€‚</td></tr><tr><td>YMatrix, RealHistorian, GoldenDataç­‰</td><td>å››ç»´çºµæ¨ªã€ç´«é‡‘æ¡¥ã€åºšé¡¿æ•°æ®ç­‰</td><td>åœ¨ç‰¹å®šå·¥ä¸šæˆ–ç›‘æ§é¢†åŸŸæ‹¥æœ‰æ·±åšçš„è¡Œä¸šç§¯ç´¯å’Œå®šåˆ¶åŒ–è§£å†³æ–¹æ¡ˆã€‚</td></tr><tr><td>é‡‘ä»“æ—¶åºæ•°æ®åº“</td><td>ä¸­ç”µç§‘é‡‘ä»“ï¼ˆåŸäººå¤§é‡‘ä»“ï¼‰</td><td>åŸºäºæˆç†Ÿç¨³å®šçš„é‡‘ä»“æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆKESï¼‰å†…æ ¸æ‰“é€ çš„æ—¶åºèƒ½åŠ›å¢å¼ºæ’ä»¶ï¼Œæœ€å¤§ç‰¹ç‚¹æ˜¯ç»§æ‰¿äº†KESçš„èåˆå¤šæ¨¡æ¶æ„ï¼Œæ”¯æŒæ—¶åºæ•°æ®ä¸å…³ç³»å‹ã€ç©ºé—´ï¼ˆGISï¼‰ç­‰æ•°æ®çš„ç»Ÿä¸€å­˜å‚¨ã€å¤„ç†ä¸å…³è”åˆ†æã€‚</td></tr></tbody></table>
<p>äºŒã€ç„¦ç‚¹è§£æï¼šé‡‘ä»“æ—¶åºæ•°æ®åº“çš„èåˆå¤šæ¨¡æ¶æ„
åœ¨ä¼—å¤šä¸“æ³¨äºæ—¶åºåœºæ™¯æè‡´ä¼˜åŒ–çš„äº§å“ä¸­ï¼Œé‡‘ä»“æ•°æ®åº“çš„æ—¶åºç»„ä»¶é€‰æ‹©äº†ä¸€æ¡ç‹¬ç‰¹çš„è·¯å¾„ï¼šä¸è¿½æ±‚åšä¸€ä¸ªå­¤ç«‹çš„ä¸“ç”¨æ—¶åºå¼•æ“ï¼Œè€Œæ˜¯ä½œä¸ºå…¶å¼ºå¤§çš„èåˆæ•°æ®åº“ä½“ç³»ï¼ˆKESï¼‰ä¸­çš„ä¸€ä¸ªç‰ˆå—ã€‚è¿™ç§æ¶æ„é€‰æ‹©å¸¦æ¥äº†ä»¥ä¸‹æ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<ol>
<li>
<p>å†…æ ¸çº§å¤šæ¨¡æ€èåˆï¼Œæ‰“ç ´æ•°æ®å­¤å²›
ç»Ÿä¸€åº•åº§: é‡‘ä»“æ—¶åºç»„ä»¶å¹¶éç‹¬ç«‹äº§å“ï¼Œè€Œæ˜¯åŸºäºæˆç†Ÿçš„KingbaseESå…³ç³»å‹æ•°æ®åº“å†…æ ¸è¿›è¡Œèåˆã€‚è¿™æ„å‘³ç€ä¼ä¸šæ— éœ€ä¸ºæ—¶åºæ•°æ®å•ç‹¬æ­å»ºå’Œç»´æŠ¤ä¸€å¥—æ–°çš„æ•°æ®åŸºç¡€è®¾æ–½ã€‚
æ— ç¼å…³è”æŸ¥è¯¢: æ—¶åºæ•°æ®ï¼ˆå¦‚ä¼ æ„Ÿå™¨è¯»æ•°ï¼‰ä¸ä¸šåŠ¡å…³ç³»æ•°æ®ï¼ˆå¦‚è®¾å¤‡å°è´¦ã€ç”Ÿäº§å·¥å•ï¼‰å¤©ç„¶å­˜å‚¨åœ¨åŒä¸€æ•°æ®åº“ä¸­ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„SQLï¼ˆæ”¯æŒOracle/PostgreSQLå…¼å®¹æ¨¡å¼ï¼‰ç›´æ¥è¿›è¡Œè·¨æ—¶åºè¡¨å’Œå…³ç³»è¡¨çš„å¤æ‚JOINæŸ¥è¯¢ï¼Œæ— éœ€ç¹ççš„æ•°æ®åŒæ­¥ä¸å¯¼å‡ºï¼Œæå¤§ç®€åŒ–äº†æ•°æ®åˆ†æé“¾è·¯ã€‚
æ”¯æŒä¸°å¯Œæ•°æ®ç±»å‹: å¾—ç›ŠäºKESå†…æ ¸ï¼Œå®ƒä¸ä»…æ”¯æŒæ—¶åºæ•°æ®å¸¸ç”¨çš„æ•°å€¼ã€æ—¶é—´æˆ³ç±»å‹ï¼Œè¿˜åŸç”Ÿæ”¯æŒJSONã€GISç©ºé—´æ•°æ®ã€æ•°ç»„ç­‰å¤æ‚ç±»å‹ï¼Œèƒ½å¤Ÿæ»¡è¶³æ›´å¹¿æ³›çš„å·¥ä¸šæ•°å­—åŒ–åœºæ™¯éœ€æ±‚ã€‚</p>
</li>
<li>
<p>å¤ç”¨å¹¶å¼ºåŒ–ä¼ä¸šçº§æ ¸å¿ƒèƒ½åŠ›
æè‡´çš„äº‹åŠ¡ï¼ˆACIDï¼‰ä¿è¯: åœ¨é‡‘ä»“çš„æ—¶åºè¡¨ä¸Šï¼Œæ•°æ®å†™å…¥åŒæ ·äº«æœ‰å®Œæ•´çš„å…³ç³»å‹æ•°æ®åº“äº‹åŠ¡æ”¯æŒï¼Œè¿™åœ¨è¦æ±‚æ•°æ®å¼ºä¸€è‡´æ€§çš„é‡‘èã€ç”µåŠ›è°ƒåº¦ç­‰å…³é”®ä¸šåŠ¡åœºæ™¯ä¸­æ˜¯ç‹¬ç‰¹ä¼˜åŠ¿ã€‚
ä¼ä¸šçº§é«˜å¯ç”¨ä¸å®‰å…¨: æ—¶åºæ•°æ®å¯ç›´æ¥å—ç›ŠäºKESå·²æ„å»ºæˆç†Ÿçš„è¯»å†™åˆ†ç¦»ã€å…±äº«å­˜å‚¨ã€åˆ†å¸ƒå¼é›†ç¾¤ç­‰é«˜å¯ç”¨æ¶æ„ï¼Œä»¥åŠè¡Œåˆ—çº§æƒé™æ§åˆ¶ã€æ•°æ®åŠ å¯†ç­‰ä¼ä¸šçº§å®‰å…¨ç‰¹æ€§ã€‚
æˆç†Ÿçš„ç”Ÿæ€ä¸å·¥å…·é“¾: å¯ç›´æ¥å¤ç”¨KESçš„å¤‡ä»½æ¢å¤ã€ç›‘æ§è¿ç»´ã€æ•°æ®è¿ç§»ï¼ˆKDTSï¼‰ç­‰æ•´å¥—è¿ç»´ç®¡ç†å·¥å…·ï¼Œä»¥åŠä¸å„ç±»BIã€ETLå·¥å…·çš„è¿æ¥ç”Ÿæ€ï¼Œé™ä½å­¦ä¹ ä¸è¿ç»´æˆæœ¬ã€‚</p>
</li>
<li>
<p>é¢å‘å¤æ‚åœºæ™¯çš„ç»¼åˆæ€§èƒ½è¡¨ç°
ä»é‡‘ä»“å®˜æ–¹æŠ«éœ²çš„æµ‹è¯•æŠ¥å‘Šï¼ˆå¦‚ä½¿ç”¨TSBSå·¥å…·å¯¹æ¯”InfluxDBï¼‰æ¥çœ‹ï¼Œå…¶æ—¶åºç»„ä»¶åœ¨ç‰¹å®šåœºæ™¯ä¸‹å±•ç°å‡ºç«äº‰åŠ›ï¼š</p>
</li>
</ol>
<p>å†™å…¥æ€§èƒ½: é€šè¿‡ä¼˜åŒ–åˆ†åŒºç­–ç•¥ã€å¹¶è¡Œæ’å…¥ç­‰æ‰‹æ®µï¼Œåœ¨ç‰¹å®šé…ç½®ä¸‹å¯å®ç°å•æœºç™¾ä¸‡çº§ã€é›†ç¾¤åƒä¸‡çº§æ•°æ®ç‚¹/ç§’çš„å†™å…¥èƒ½åŠ›ã€‚
æŸ¥è¯¢æ€§èƒ½: åœ¨æ¶‰åŠå¤šç»´åº¦èšåˆã€è·¨è¡¨å…³è”ç­‰å¤æ‚æŸ¥è¯¢åœºæ™¯ä¸­ï¼Œå‡­å€Ÿæˆç†Ÿçš„SQLä¼˜åŒ–å™¨ä¸æ‰§è¡Œå¼•æ“ï¼Œæ€§èƒ½è¡¨ç°æ˜¾è‘—ä¼˜äºéƒ¨åˆ†åŸç”Ÿæ—¶åºæ•°æ®åº“ï¼Œå°¤å…¶é€‚åˆéœ€è¦å°†æ—¶åºæ•°æ®ä¸ä¸šåŠ¡æ•°æ®è¿›è¡Œæ·±åº¦æ•´åˆåˆ†æçš„åœºæ™¯ã€‚</p>
<p>ä¸‰ã€è¡Œä¸šåº”ç”¨ä¸å®è·µ
é‡‘ä»“æ—¶åºç»„ä»¶çš„èåˆæ¶æ„ä½¿å…¶åœ¨é‚£äº›æ—¢éœ€è¦å¤„ç†æµ·é‡æ—¶åºæ•°æ®æµï¼Œåˆéœ€è¦ä¸æ ¸å¿ƒä¸šåŠ¡ç³»ç»Ÿç´§å¯†é›†æˆçš„åœºæ™¯ä¸­æ‰¾åˆ°äº†ç”¨æ­¦ä¹‹åœ°ï¼Œå…¬å¼€æ¡ˆä¾‹åŒ…æ‹¬ï¼š</p>
<p>ç¦å»ºçœèˆ¹èˆ¶å®‰å…¨ç»¼åˆç®¡ç†å¹³å°: å¤„ç†æ²¿æµ·æ•°åä¸‡èˆ¹èˆ¶ç»ˆç«¯çš„GPSå®šä½æ—¶åºæ•°æ®ï¼ŒåŸºäºKESåˆ†ç‰‡ï¼ˆShardingï¼‰æ–¹æ¡ˆå®ç°æ—¥å³°å€¼äº¿çº§å†™å…¥ä¸ç™¾äº¿çº§å†å²æ•°æ®çš„æ¯«ç§’çº§åœ°ç†ç©ºé—´æŸ¥è¯¢ã€‚
å›½å®¶ç”µç½‘æ™ºèƒ½ç”µç½‘è°ƒåº¦ç³»ç»Ÿ: åœ¨å›½äº§åŒ–è¿ç§»é¡¹ç›®ä¸­ï¼Œæ”¯æ’‘é«˜é¢‘ã€å¯é çš„ç”µåŠ›æ•°æ®å½•å…¥ï¼Œå¹¶å®ç°ä¸å¤§é‡æ—¢æœ‰å…³ç³»å‹ä¸šåŠ¡æ•°æ®çš„æ··åˆå¤„ç†ä¸åˆ†æã€‚
æ™ºæ…§æ¸¯å£ï¼ˆå¦‚å¦é—¨æ¸¯ï¼‰ã€æ™ºèƒ½åˆ¶é€ å‚åŒº: è®°å½•è®¾å¤‡è½¨è¿¹ã€å·¥å†µæ—¶åºæ•°æ®ï¼Œå¹¶ä¸ç”Ÿäº§ç®¡ç†ç³»ç»Ÿã€è®¾å¤‡ç®¡ç†ç³»ç»Ÿè¿›è¡Œå®æ—¶å…³è”åˆ†æã€‚</p>
<p>å››ã€2026å¹´å›½äº§æ—¶åºæ•°æ®åº“é€‰å‹æ€è€ƒ
ä¼ä¸šåœ¨2026å¹´è¿›è¡Œæ—¶åºæ•°æ®åº“é€‰å‹æ—¶ï¼Œåº”è¶…è¶Šå¯¹å•ä¸€å³°å€¼æ€§èƒ½æŒ‡æ ‡çš„è¿‡åº¦å…³æ³¨ï¼Œä»æ›´å®è§‚çš„è§†è§’è¯„ä¼°ï¼š</p>
<p>æ•°æ®æ¶æ„å¤æ‚æ€§: å¦‚æœä¸šåŠ¡ä¸­æ—¶åºæ•°æ®ä¸å…³ç³»æ•°æ®ã€ç©ºé—´æ•°æ®ç­‰ç´§å¯†è€¦åˆï¼Œéœ€è¦é¢‘ç¹å…³è”åˆ†æï¼Œé‡‘ä»“çš„èåˆå¤šæ¨¡æ¶æ„å°†æä¾›æå¤§çš„ä¾¿åˆ©æ€§å’Œæ•´ä½“æ€§ä»·æ¯”ã€‚
é•¿æœŸè¿ç»´ä¸æ€»æ‹¥æœ‰æˆæœ¬ï¼ˆTCOï¼‰: è€ƒè™‘å¼•å…¥æ–°äº§å“å¸¦æ¥çš„å­¦ä¹ æˆæœ¬ã€è¿ç»´å¤æ‚åº¦ä»¥åŠç”Ÿæ€æ•´åˆæˆæœ¬ã€‚å¤ç”¨ç°æœ‰å…³ç³»å‹æ•°æ®åº“å›¢é˜Ÿçš„æŠ€èƒ½æ ˆå’Œå·¥å…·é“¾ï¼Œæ˜¯é‡‘ä»“æ–¹æ¡ˆçš„å¦ä¸€å¤§éšæ€§ä¼˜åŠ¿ã€‚</p>
<p>ç»“è®º
2026å¹´çš„å›½äº§æ—¶åºæ•°æ®åº“èµ›é“å·²è¿›å…¥"ç²¾è€•ç»†ä½œ"é˜¶æ®µã€‚ä»¥TDengineã€IoTDBã€DolphinDBä¸ºä»£è¡¨çš„ä¸“ä¸šæ—¶åºåº“åœ¨å„è‡ªä¼˜åŠ¿é¢†åŸŸæŒç»­æ·±åŒ–ã€‚</p>
<p>é‡‘ä»“æ—¶åºæ•°æ®åº“å‡­å€Ÿå…¶ç‹¬ç‰¹çš„èåˆå¤šæ¨¡æ¶æ„ï¼Œèµ°å‡ºäº†ä¸€æ¡å·®å¼‚åŒ–é“è·¯ã€‚å®ƒå¹¶é"ä¸‡èƒ½é’¥åŒ™"ï¼Œä½†å¯¹äºé‚£äº›ä¸šåŠ¡é€»è¾‘å¤æ‚ã€æ•°æ®å½¢æ€å¤šæ ·ã€ä¸”å¯¹äº‹åŠ¡ä¸€è‡´æ€§ä¸ç³»ç»Ÿæ•´åˆæœ‰é«˜è¦æ±‚çš„ä¼ä¸šçº§ç”¨æˆ·è€Œè¨€ï¼Œæä¾›äº†ä¸€ä¸ªèƒ½å¤Ÿå°†æ—¶åºæ•°æ®èƒ½åŠ›å¹³æ»‘ã€ç¨³å¥åœ°åµŒå…¥åˆ°ç°æœ‰ä¼ä¸šæ•°æ®æ ¸å¿ƒä¸­çš„ä¼˜ç§€é€‰æ‹©ï¼Œä½“ç°äº†å›½äº§åŸºç¡€è½¯ä»¶åœ¨æ¶æ„è®¾è®¡ä¸Šçš„æ·±åº¦æ€è€ƒä¸åŠ¡å®åˆ›æ–°ã€‚</p>
<p>æœªæ¥ï¼Œéšç€AI for Dataã€å®æ—¶æ™ºèƒ½åˆ†æçš„æ™®åŠï¼Œæ—¶åºæ•°æ®åº“çš„"æ™ºèƒ½"ä¸"èåˆ"èƒ½åŠ›å°†æ„ˆå‘å…³é”®ã€‚å¦‚ä½•æ›´å¥½åœ°å°†æ—¶åºå¤„ç†èƒ½åŠ›ä¸å¤šæ¨¡æ•°æ®ã€AIæ¡†æ¶ã€æµæ‰¹è®¡ç®—æ— ç¼ç»“åˆï¼Œå°†æ˜¯æ‰€æœ‰å‚å•†å…±åŒé¢ä¸´çš„ä¸‹ä¸€ä¸ªè¯¾é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vuex æ ¸å¿ƒæ¦‚å¿µå…¨è§£æï¼šæ„å»ºä¼˜é›…çš„ Vue åº”ç”¨çŠ¶æ€ç®¡ç†]]></title>    <link>https://juejin.cn/post/7595841630676189235</link>    <guid>https://juejin.cn/post/7595841630676189235</guid>    <pubDate>2026-01-17T01:37:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595841630676189235" data-draft-id="7595847940620632114" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vuex æ ¸å¿ƒæ¦‚å¿µå…¨è§£æï¼šæ„å»ºä¼˜é›…çš„ Vue åº”ç”¨çŠ¶æ€ç®¡ç†"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-17T01:37:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vuex æ ¸å¿ƒæ¦‚å¿µå…¨è§£æï¼šæ„å»ºä¼˜é›…çš„ Vue åº”ç”¨çŠ¶æ€ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T01:37:31.000Z" title="Sat Jan 17 2026 01:37:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vuex æ ¸å¿ƒæ¦‚å¿µå…¨è§£æï¼šæ„å»ºä¼˜é›…çš„ Vue åº”ç”¨çŠ¶æ€ç®¡ç†</h2>
<p>ä½ æ˜¯å¦æ›¾åœ¨ Vue é¡¹ç›®ä¸­é‡åˆ°è¿‡è¿™æ ·çš„å›°æ‰°ï¼š</p>
<ul>
<li>â€¢ ç»„ä»¶é—´æ•°æ®ä¼ é€’åƒâ€œå‡»é¼“ä¼ èŠ±â€ï¼Œå±‚å±‚ props é€ä¼ ä»¤äººå¤´ç–¼</li>
<li>â€¢ å…„å¼Ÿç»„ä»¶é€šä¿¡éœ€è¦å€ŸåŠ©çˆ¶ç»„ä»¶åšâ€œä¸­è½¬ç«™â€</li>
<li>â€¢ å¤šä¸ªç»„ä»¶ä¾èµ–åŒä¸€ä»½æ•°æ®ï¼Œä¸€å¤„ä¿®æ”¹å¤„å¤„éœ€è¦åŒæ­¥</li>
</ul>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠ Vue çš„å®˜æ–¹çŠ¶æ€ç®¡ç†åº“â€”â€”Vuexï¼Œå¸®ä½ å½»åº•è§£å†³è¿™äº›ç—›ç‚¹ï¼</p>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ Vuexï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„â€œå°è´¦æœ¬â€ï¼Œå½“åº”ç”¨å¤æ‚æ—¶ï¼Œæ•°æ®å°±åƒæ•£è½çš„çç ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†ã€‚Vuex å°±æ˜¯ä¸€ä¸ªâ€œä¸­å¤®è´¦æœ¬â€ï¼ŒæŠŠæ•°æ®é›†ä¸­å­˜å‚¨ï¼Œè®©çŠ¶æ€å˜åŒ–å˜å¾—å¯é¢„æµ‹ã€å¯è¿½è¸ªã€‚</p>
<h3 data-id="heading-2">äºŒã€Vuex äº”å¤§æ ¸å¿ƒæ¦‚å¿µè¯¦è§£</h3>
<h4 data-id="heading-3">1.Â <strong>Stateï¼ˆçŠ¶æ€ï¼‰â€”â€” æ•°æ®ä»“åº“</strong></h4>
<p>State æ˜¯ Vuex çš„â€œæ•°æ®åº“â€ï¼Œå­˜å‚¨æ‰€æœ‰éœ€è¦å…±äº«çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">storeÂ </span>=Â <span class="hljs-keyword">new</span>Â Vuex.<span class="hljs-title function_ invoke__">Store</span>({
<span class="hljs-attr">Â Â state</span>:Â {
<span class="hljs-attr">Â Â Â Â user</span>:Â {
<span class="hljs-attr">Â Â Â Â Â Â name</span>:Â <span class="hljs-string">'å°æ˜'</span>,
<span class="hljs-attr">Â Â Â Â Â Â age</span>:Â <span class="hljs-number">25</span>
Â Â Â Â },
<span class="hljs-attr">Â Â Â Â cart</span>:Â []
Â Â }
})
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>â€¢ å“åº”å¼ï¼šState å˜åŒ–ï¼Œä¾èµ–å®ƒçš„ç»„ä»¶è‡ªåŠ¨æ›´æ–°</li>
<li>â€¢ å•ä¸€æ•°æ®æºï¼šæ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ª store</li>
<li>â€¢ åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š<code>this.$store.state.user</code></li>
</ul>
<h4 data-id="heading-4">2.Â <strong>Gettersï¼ˆè®¡ç®—å±æ€§ï¼‰â€”â€” æ•°æ®çš„â€œåŠ å·¥å‚â€</strong></h4>
<p>Getters å°±åƒ Vue ä¸­çš„ computedï¼Œç”¨äºä» state æ´¾ç”Ÿå‡ºæ–°æ•°æ®ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">getters</span>:Â {
Â Â <span class="hljs-comment">//Â è·å–è´­ç‰©è½¦å•†å“æ€»æ•°</span>
Â Â <span class="hljs-attr">cartItemCount</span>:Â <span class="hljs-function"><span class="hljs-params">state</span>Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â state.<span class="hljs-property">cart</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total,Â item</span>)Â =&gt;</span>Â totalÂ +Â item.<span class="hljs-property">quantity</span>,Â <span class="hljs-number">0</span>)
Â Â },
Â Â 
Â Â <span class="hljs-comment">//Â è·å–æŠ˜æ‰£åçš„ä»·æ ¼</span>
Â Â <span class="hljs-attr">discountedPrice</span>:Â <span class="hljs-function">(<span class="hljs-params">state</span>)Â =&gt;</span>Â <span class="hljs-function">(<span class="hljs-params">productId</span>)Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-keyword">const</span>Â productÂ =Â state.<span class="hljs-property">products</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">p</span>Â =&gt;</span>Â p.<span class="hljs-property">id</span>Â ===Â productId)
Â Â Â Â <span class="hljs-keyword">return</span>Â product.<span class="hljs-property">price</span>Â *Â <span class="hljs-number">0.8</span>
Â Â }
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>â€¢ æ•°æ®è¿‡æ»¤ã€æ ¼å¼åŒ–</li>
<li>â€¢ å¤æ‚è®¡ç®—é€»è¾‘å°è£…</li>
<li>â€¢ ç»„ä»¶ä¸­è°ƒç”¨ï¼š<code>this.$store.getters.cartItemCount</code></li>
</ul>
<h4 data-id="heading-5">3.Â <strong>Mutationsï¼ˆå˜æ›´ï¼‰â€”â€” å”¯ä¸€çš„çŠ¶æ€ä¿®æ”¹è€…</strong></h4>
<p>Mutations æ˜¯ä¿®æ”¹ state çš„<strong>å”¯ä¸€é€”å¾„</strong>ï¼Œæ¯ä¸ª mutation éƒ½æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„â€œäº‹ä»¶ç±»å‹â€å’Œä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">mutations:Â {
Â Â <span class="hljs-comment">//Â æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦</span>
Â Â <span class="hljs-built_in">ADD_TO_CART</span>(state,Â product)Â {
Â Â Â Â constÂ existingItemÂ =Â state<span class="hljs-selector-class">.cart</span><span class="hljs-selector-class">.find</span>(itemÂ =&gt;Â item.idÂ ===Â product.id)
Â Â Â Â ifÂ (existingItem)Â {
Â Â Â Â Â Â existingItem<span class="hljs-selector-class">.quantity</span>++
Â Â Â Â }Â elseÂ {
Â Â Â Â Â Â state<span class="hljs-selector-class">.cart</span><span class="hljs-selector-class">.push</span>({Â ...product,Â quantity:Â <span class="hljs-number">1</span>Â })
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-comment">//Â æ¸…ç©ºè´­ç‰©è½¦</span>
Â Â <span class="hljs-built_in">CLEAR_CART</span>(state)Â {
Â Â Â Â state<span class="hljs-selector-class">.cart</span>Â =Â <span class="hljs-selector-attr">[]</span>
Â Â }
}
</code></pre>
<p><strong>é‡è¦åŸåˆ™ï¼š</strong></p>
<ul>
<li>â€¢ å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°</li>
<li>â€¢ é€šè¿‡Â <code>store.commit('mutationå', payload)</code>Â è°ƒç”¨</li>
<li>â€¢ è®©æ¯æ¬¡çŠ¶æ€å˜åŒ–éƒ½å¯è¿½è¸ª</li>
</ul>
<h4 data-id="heading-6">4.Â <strong>Actionsï¼ˆåŠ¨ä½œï¼‰â€”â€” å¤„ç†å¼‚æ­¥æ“ä½œçš„â€œæŒ‡æŒ¥å®˜â€</strong></h4>
<p>Actions å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œï¼Œæœ€ç»ˆé€šè¿‡æäº¤ mutation æ¥ä¿®æ”¹çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">actions</span>:Â {
Â Â <span class="hljs-comment">//Â å¼‚æ­¥è·å–ç”¨æˆ·ä¿¡æ¯</span>
Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">fetchUser</span>(<span class="hljs-params">{Â commitÂ },Â userId</span>)Â {
Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â responseÂ =Â <span class="hljs-keyword">await</span>Â api.<span class="hljs-title function_">getUser</span>(userId)
Â Â Â Â Â Â <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_USER'</span>,Â response.<span class="hljs-property">data</span>)Â <span class="hljs-comment">//Â è°ƒç”¨Â mutation</span>
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â response.<span class="hljs-property">data</span>
Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (error)Â {
Â Â Â Â Â Â <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_ERROR'</span>,Â error.<span class="hljs-property">message</span>)
Â Â Â Â Â Â <span class="hljs-keyword">throw</span>Â error
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-comment">//Â ç»„åˆå¤šä¸ªÂ mutation</span>
Â Â <span class="hljs-title function_">checkout</span>(<span class="hljs-params">{Â commit,Â stateÂ }</span>)Â {
Â Â Â Â <span class="hljs-comment">//Â ä¿å­˜è®¢å•</span>
Â Â Â Â <span class="hljs-title function_">commit</span>(<span class="hljs-string">'CREATE_ORDER'</span>,Â state.<span class="hljs-property">cart</span>)
Â Â Â Â <span class="hljs-comment">//Â æ¸…ç©ºè´­ç‰©è½¦</span>
Â Â Â Â <span class="hljs-title function_">commit</span>(<span class="hljs-string">'CLEAR_CART'</span>)
Â Â Â Â <span class="hljs-comment">//Â æ˜¾ç¤ºæˆåŠŸæç¤º</span>
Â Â Â Â <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SHOW_MESSAGE'</span>,Â <span class="hljs-string">'è®¢å•æäº¤æˆåŠŸï¼'</span>)
Â Â }
}
</code></pre>
<p><strong>ä¸ Mutation çš„åŒºåˆ«ï¼š</strong></p>
<ul>
<li>â€¢ Action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€</li>
<li>â€¢ Action å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œ</li>
<li>â€¢ é€šè¿‡Â <code>store.dispatch('actionå', payload)</code>Â è°ƒç”¨</li>
</ul>
<h4 data-id="heading-7">5.Â <strong>Modulesï¼ˆæ¨¡å—ï¼‰â€”â€” å¤§å‹åº”ç”¨çš„â€œåˆ†æ²»ç­–ç•¥â€</strong></h4>
<p>å½“åº”ç”¨å¤æ‚æ—¶ï¼Œå¯ä»¥å°† store åˆ†å‰²æˆæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„ stateã€mutationsã€actionsã€gettersã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">userModuleÂ </span>=Â {
Â Â namespaced:Â <span class="hljs-literal">true</span>,Â <span class="hljs-comment">//Â å¼€å¯å‘½åç©ºé—´</span>
Â Â state:Â ()Â =&gt;Â ({Â userInfo:Â <span class="hljs-literal">null</span>Â }),
Â Â mutations:Â {Â <span class="hljs-comment">/*Â ...Â */</span>Â },
Â Â actions:Â {Â <span class="hljs-comment">/*Â ...Â */</span>Â }
}

<span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">productModuleÂ </span>=Â {
Â Â namespaced:Â <span class="hljs-literal">true</span>,
Â Â state:Â ()Â =&gt;Â ({Â products:Â []Â }),
Â Â mutations:Â {Â <span class="hljs-comment">/*Â ...Â */</span>Â }
}

<span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">storeÂ </span>=Â <span class="hljs-keyword">new</span>Â Vuex.<span class="hljs-title function_ invoke__">Store</span>({
<span class="hljs-attr">Â Â modules</span>:Â {
<span class="hljs-attr">Â Â Â Â user</span>:Â userModule,
<span class="hljs-attr">Â Â Â Â product</span>:Â productModule
Â Â }
})
</code></pre>
<p><strong>æ¨¡å—åŒ–çš„å¥½å¤„ï¼š</strong></p>
<ul>
<li>â€¢ é¿å… state å¯¹è±¡è¿‡äºè‡ƒè‚¿</li>
<li>â€¢ è®©ç›¸å…³åŠŸèƒ½ç»„ç»‡åœ¨ä¸€èµ·</li>
<li>â€¢ è°ƒç”¨æ–¹å¼ï¼š<code>this.$store.dispatch('user/login', credentials)</code></li>
</ul>
<h3 data-id="heading-8">ä¸‰ã€å®æˆ˜ï¼šè´­ç‰©è½¦å®Œæ•´ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â store.js</span>
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
Â Â <span class="hljs-attr">state</span>:Â {
Â Â Â Â <span class="hljs-attr">cart</span>:Â [],
Â Â Â Â <span class="hljs-attr">products</span>:Â []
Â Â },
Â Â 
Â Â <span class="hljs-attr">getters</span>:Â {
Â Â Â Â <span class="hljs-attr">totalPrice</span>:Â <span class="hljs-function"><span class="hljs-params">state</span>Â =&gt;</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â state.<span class="hljs-property">cart</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum,Â item</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â sumÂ +Â (item.<span class="hljs-property">price</span>Â *Â item.<span class="hljs-property">quantity</span>)
Â Â Â Â Â Â },Â <span class="hljs-number">0</span>)
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-attr">mutations</span>:Â {
Â Â Â Â <span class="hljs-title function_">ADD_ITEM</span>(<span class="hljs-params">state,Â product</span>)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â ...Â æ·»åŠ å•†å“é€»è¾‘</span>
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-attr">actions</span>:Â {
Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">loadProducts</span>(<span class="hljs-params">{Â commitÂ }</span>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â productsÂ =Â <span class="hljs-keyword">await</span>Â api.<span class="hljs-title function_">getProducts</span>()
Â Â Â Â Â Â <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_PRODUCTS'</span>,Â products)
Â Â Â Â }
Â Â }
})
</code></pre>
<h3 data-id="heading-9">å››ã€æœ€ä½³å®è·µå»ºè®®</h3>
<ol>
<li>
<p>1.Â <strong>éµå¾ªå•å‘æ•°æ®æµ</strong>ï¼š</p>
<pre><code class="hljs">ç»„ä»¶Â â†’Â ActionsÂ â†’Â MutationsÂ â†’Â StateÂ â†’Â ç»„ä»¶æ›´æ–°
</code></pre>
</li>
<li>
<p>2.Â <strong>åˆç†åˆ’åˆ†æ¨¡å—</strong>ï¼š</p>
</li>
<li>
<ul>
<li>â€¢ æŒ‰åŠŸèƒ½é¢†åŸŸåˆ’åˆ†ï¼ˆuserã€productã€orderç­‰ï¼‰</li>
<li>â€¢ å¤§å‹é¡¹ç›®è€ƒè™‘åŠ¨æ€æ³¨å†Œæ¨¡å—</li>
</ul>
</li>
<li>
<p>3.Â <strong>ä½¿ç”¨è¾…åŠ©å‡½æ•°</strong>ç®€åŒ–ä»£ç ï¼š</p>
<pre><code class="hljs language-css" lang="css">importÂ {Â mapState,Â mapActionsÂ }Â <span class="hljs-selector-tag">from</span>Â 'vuex'

exportÂ defaultÂ {
Â Â computed:Â {
Â Â Â Â ..<span class="hljs-selector-class">.mapState</span>(<span class="hljs-selector-attr">[<span class="hljs-string">'user'</span>,Â <span class="hljs-string">'cart'</span>]</span>),
Â Â Â Â ..<span class="hljs-selector-class">.mapGetters</span>(<span class="hljs-selector-attr">[<span class="hljs-string">'totalPrice'</span>]</span>)
Â Â },
Â Â methods:Â {
Â Â Â Â ..<span class="hljs-selector-class">.mapActions</span>(<span class="hljs-selector-attr">[<span class="hljs-string">'fetchUser'</span>,Â <span class="hljs-string">'addToCart'</span>]</span>)
Â Â }
}
</code></pre>
</li>
<li>
<p>4.Â <strong>TypeScript æ”¯æŒ</strong>ï¼š<br/>
Vuex 4 å¯¹ TypeScript æœ‰æ›´å¥½çš„ç±»å‹æ”¯æŒ</p>
</li>
</ol>
<h3 data-id="heading-10">äº”ã€æ€»ç»“</h3>
<p>Vuex çš„äº”å‘˜å¤§å°†å„å¸å…¶èŒï¼š</p>
<ul>
<li>â€¢Â <strong>State</strong>ï¼šæ•°æ®å­˜å‚¨ä¸­å¿ƒ</li>
<li>â€¢Â <strong>Getters</strong>ï¼šæ•°æ®çš„è®¡ç®—åŠ å·¥</li>
<li>â€¢Â <strong>Mutations</strong>ï¼šåŒæ­¥ä¿®æ”¹çŠ¶æ€</li>
<li>â€¢Â <strong>Actions</strong>ï¼šå¤„ç†å¼‚æ­¥å’Œå¤æ‚é€»è¾‘</li>
<li>â€¢Â <strong>Modules</strong>ï¼šæ¨¡å—åŒ–ç®¡ç†</li>
</ul>
<p>è®°ä½è¿™ä¸ªç®€å•çš„æ¯”å–»ï¼šState æ˜¯ä»“åº“ï¼ŒGetters æ˜¯åŒ…è£…éƒ¨ï¼ŒMutations æ˜¯ä»“åº“ç®¡ç†å‘˜ï¼ŒActions æ˜¯é‡‡è´­å‘˜ï¼ŒModules æ˜¯åˆ†å…¬å¸ã€‚</p>
<p>Vuex çš„å­¦ä¹ æ›²çº¿å¯èƒ½æœ‰ç‚¹é™¡å³­ï¼Œä½†ä¸€æ—¦æŒæ¡ï¼Œä½ å°†æ‹¥æœ‰ç®¡ç†å¤æ‚åº”ç”¨çŠ¶æ€çš„è¶…èƒ½åŠ›ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆä½ çš„ Prompt è¶Šå†™è¶Šé•¿ï¼Œæ•ˆæœå´è¶Šæ¥è¶Šå·®ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595808703074074650</link>    <guid>https://juejin.cn/post/7595808703074074650</guid>    <pubDate>2026-01-17T05:10:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595808703074074650" data-draft-id="7595841630676795443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆä½ çš„ Prompt è¶Šå†™è¶Šé•¿ï¼Œæ•ˆæœå´è¶Šæ¥è¶Šå·®ï¼Ÿ"/> <meta itemprop="keywords" content="AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-17T05:10:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¥¿é™µ"/> <meta itemprop="url" content="https://juejin.cn/user/4353721774379054"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆä½ çš„ Prompt è¶Šå†™è¶Šé•¿ï¼Œæ•ˆæœå´è¶Šæ¥è¶Šå·®ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4353721774379054/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¥¿é™µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T05:10:05.000Z" title="Sat Jan 17 2026 05:10:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    32
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åœ¨æ—©æœŸé˜¶æ®µä¸»è¦ä»¥å¯¹è¯æœºå™¨äººçš„å½¢å¼å‡ºç°ï¼Œç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€å‘æ¨¡å‹æé—®ï¼Œæ¨¡å‹è¿”å›ä¸€æ®µçœ‹ä¼¼æ™ºèƒ½çš„æ–‡æœ¬ç»“æœã€‚è¿™ä¸€é˜¶æ®µï¼Œæ¨¡å‹èƒ½åŠ›çš„å‘æŒ¥é«˜åº¦ä¾èµ–ç”¨æˆ·å¦‚ä½•æé—®ï¼ŒåŒä¸€ä¸ªé—®é¢˜ï¼Œç”¨ä¸åŒçš„æè¿°æ–¹å¼ï¼Œå¾€å¾€ä¼šå¾—åˆ°è´¨é‡å·®å¼‚å·¨å¤§çš„ç»“æœã€‚</p>
<p>åœ¨è¿™ç§èƒŒæ™¯ä¸‹ï¼Œ<code>æç¤ºè¯å·¥ç¨‹</code>ä½œä¸ºä¸€é—¨é¢å‘å¤§è¯­è¨€æ¨¡å‹çš„è¾“å…¥è®¾è®¡æ–¹æ³•è®ºé€æ¸æˆå‹ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦å¸®åŠ©å¤§å®¶å¿«é€Ÿäº†è§£<code>æç¤ºè¯å·¥ç¨‹</code>çš„æœ¬è´¨ä»¥åŠåœ¨ä¹¦å†™æŠ€å·§ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯æç¤ºè¯å·¥ç¨‹ï¼Ÿ</h2>
<p>æç¤ºè¯å·¥ç¨‹çš„æœ¬è´¨å°±æ˜¯<strong>åœ¨æœ‰é™ä¸Šä¸‹æ–‡çª—å£å†…ï¼Œæœ€å¤§åŒ–æ¨¡å‹è¾“å‡ºçš„ç¡®å®šæ€§ä¸å¯ç”¨æ€§ï¼Œå‡å°‘æ¨¡å‹è‡ªç”±å‘æŒ¥çš„ç©ºé—´</strong>ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æä¾›ä¸€ç§æç¤ºè¯ä¹¦å†™èŒƒå¼æ¥ç¡®ä¿å¤§æ¨¡å‹èƒ½å¤Ÿç²¾å‡†åœ°æŒ‰ç…§ç”¨æˆ·çš„è¦æ±‚è¾“å‡ºé«˜è´¨é‡çš„å†…å®¹ã€‚</p>
<p><strong>âŒ å·®æç¤ºè¯</strong></p>
<pre><code class="hljs language-jsx" lang="jsx">å¸®æˆ‘åšä¸€ä¸ªä¸ªäººå¾…åŠæ¸…å•é¡µé¢
</code></pre>
<p>å¯¹äºè¿™æ®µæç¤ºè¯ï¼ŒAI ä¸çŸ¥é“ç”¨ä»€ä¹ˆæŠ€æœ¯ã€ä»€ä¹ˆé£æ ¼ã€è¦å“ªäº›åŠŸèƒ½ã€æœ‰ä»€ä¹ˆé™åˆ¶ã€‚ç»“æœå°±æ˜¯ AI è‡ªç”±å‘æŒ¥ï¼Œç”Ÿæˆçš„ä»£ç å’Œé¡¹ç›®è§„èŒƒä¸ç¬¦åˆã€‚</p>
<p><strong>âœ… å¥½æç¤ºè¯</strong></p>
<pre><code class="hljs language-jsx" lang="jsx">## è§’è‰²
ä½ æ˜¯ä¸€ä¸ªæ“…é•¿ <span class="hljs-title class_">React</span> å’Œç”¨æˆ·ä½“éªŒè®¾è®¡çš„å‰ç«¯å¼€å‘è€…ã€‚

## èƒŒæ™¯
æˆ‘éœ€è¦åšä¸€ä¸ªä¸ªäººå¾…åŠæ¸…å•ç½‘é¡µï¼Œç”¨æ¥è®°å½•æ¯å¤©çš„å¾…åŠä»»åŠ¡ï¼Œç°åœ¨å·²ç»å®Œæ•´åŸºæœ¬åŠŸèƒ½çš„å¼€å‘ã€‚

## ä»»åŠ¡
å®ç°ä»»åŠ¡çš„<span class="hljs-string">"æ‹–æ‹½æ’åº"</span>åŠŸèƒ½ï¼Œè®©ç”¨æˆ·å¯ä»¥é€šè¿‡æ‹–æ‹½è°ƒæ•´ä»»åŠ¡é¡ºåºã€‚

## è¦æ±‚
- æ‹–æ‹½æ—¶è¢«æ‹–åŠ¨çš„ä»»åŠ¡åŠé€æ˜
- æ”¾ç½®ä½ç½®æœ‰æ˜æ˜¾çš„è§†è§‰æŒ‡ç¤ºçº¿
- æ‹–æ‹½å®Œæˆåé¡ºåºç«‹å³æ›´æ–°

## çº¦æŸ
- æŠ€æœ¯æ ˆä¸º <span class="hljs-title class_">React</span> + <span class="hljs-title class_">TypeScript</span> + <span class="hljs-title class_">Tailwind</span> <span class="hljs-variable constant_">CSS</span>
- ä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹æ‹–æ‹½åº“ï¼ˆå¦‚ react-beautiful-dndï¼‰
- ç”¨åŸç”Ÿ <span class="hljs-title class_">HTML5</span> æ‹–æ‹½ <span class="hljs-variable constant_">API</span>
- ä»£ç è¦æœ‰è¯¦ç»†æ³¨é‡Šï¼Œæˆ‘æ˜¯æ‹–æ‹½ <span class="hljs-variable constant_">API</span> çš„åˆå­¦è€…

## è¾“å‡ºæ ¼å¼
å®Œæ•´çš„ <span class="hljs-title class_">React</span> ç»„ä»¶ä»£ç ï¼ŒåŒ…å«ï¼š
<span class="hljs-number">1.</span> ç»„ä»¶æ–‡ä»¶ï¼ˆ<span class="hljs-title class_">TypeScript</span>ï¼‰
<span class="hljs-number">2.</span> å…³é”®é€»è¾‘çš„ä¸­æ–‡æ³¨é‡Š
<span class="hljs-number">3.</span> ç®€å•çš„ä½¿ç”¨è¯´æ˜
</code></pre>
<h2 data-id="heading-2">æç¤ºè¯å¸¸è§é—®é¢˜</h2>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæç¤ºè¯çš„è´¨é‡å‚å·®ä¸é½ï¼Œä»¥ä¸‹æ˜¯å‡ ç±»æœ€å¸¸è§çš„é—®é¢˜åŠå…¶æœ¬è´¨åŸå› ã€‚</p>
<h3 data-id="heading-3">ä¿¡æ¯é‡è¿‡å¤š</h3>
<p>æˆ‘æƒ³è®© AI å¸®æˆ‘åšä¸€ä¸ªå¾…åŠæ¸…å•åº”ç”¨ï¼Œäºæ˜¯å°†æ‰€æœ‰æƒ³æ³•ä¸€æ¬¡æ€§åˆ—å‡ºï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">å¸®æˆ‘åšä¸€ä¸ªå¾…åŠæ¸…å•åº”ç”¨ï¼Œè¦æœ‰æ·»åŠ ä»»åŠ¡ã€åˆ é™¤ä»»åŠ¡ã€ç¼–è¾‘ä»»åŠ¡ã€
æ ‡è®°å®Œæˆã€è®¾ç½®ä¼˜å…ˆçº§ã€è®¾ç½®æˆªæ­¢æ—¥æœŸã€åˆ†ç±»æ ‡ç­¾ã€æœç´¢åŠŸèƒ½ã€
æ•°æ®ç»Ÿè®¡ã€å¯¼å‡ºåŠŸèƒ½ï¼Œè¿˜è¦æœ‰æš—é»‘æ¨¡å¼ï¼Œæœ€å¥½èƒ½åŒæ­¥åˆ°äº‘ç«¯ï¼Œ
æ”¯æŒå¤šè®¾å¤‡ä½¿ç”¨ï¼Œç•Œé¢è¦å¥½çœ‹ï¼Œç”¨ <span class="hljs-title class_">React</span> å†™ï¼Œè¦æœ‰åŠ¨ç”»æ•ˆæœã€‚
</code></pre>
<p><strong>é—®é¢˜æœ¬è´¨</strong>ï¼šæ— ç»“æ„ã€æ— é‡ç‚¹ã€‚AI å¯èƒ½ä¼šå¿½ç•¥å…³é”®ä¿¡æ¯ï¼Œè¾“å‡ºä¸æŸäº›è¦æ±‚å†²çªã€‚</p>
<h3 data-id="heading-4">ä¿¡æ¯é‡å¤ªå°‘</h3>
<p>æˆ‘æƒ³è®© AI å¸®æˆ‘å†™ä¸ªæŒ‰é’®ç»„ä»¶ï¼Œåªæœ‰ä¸€å¥éœ€æ±‚ï¼Œæ²¡æœ‰ä»»ä½•èƒŒæ™¯ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">å¸®æˆ‘å†™ä¸€ä¸ªæŒ‰é’®ç»„ä»¶
</code></pre>
<p><strong>é—®é¢˜æœ¬è´¨</strong>ï¼šç¼ºå°‘ä¸Šä¸‹æ–‡ã€‚ä¸Šä¸‹æ–‡å¯èƒ½æ˜¯ï¼š</p>
<ul>
<li>é¡¹ç›®çš„æŠ€æœ¯æ ˆ</li>
<li>æŒ‰é’®éœ€è¦çš„åŠŸèƒ½</li>
<li>æœŸæœ›çš„æ ·å¼é£æ ¼</li>
</ul>
<p>æœ€ç»ˆ AI åªèƒ½ç»™ä¸€ä¸ªé€šç”¨çš„ç»“æœã€‚</p>
<h3 data-id="heading-5">æ²¡æœ‰ç›®æ ‡</h3>
<p>æˆ‘æƒ³è®© AI å¸®æˆ‘ä¼˜åŒ–ä»£ç ï¼Œä½†ä¸ç»™ä¼˜åŒ–ç›®æ ‡ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">å¸®æˆ‘ä¼˜åŒ–ä¸€ä¸‹è¿™æ®µä»£ç ï¼š
[ç²˜è´´äº†ä¸€æ®µä»£ç ]
</code></pre>
<p><strong>é—®é¢˜æœ¬è´¨</strong>ï¼šåªæœ‰åŠ¨ä½œï¼Œæ²¡æœ‰ç»“æœã€‚ä¼˜åŒ–æŒ‡ä»£ä¸æ˜ç¡®â€”â€”æ˜¯ä½“ç§¯ã€æ€§èƒ½è¿˜æ˜¯å¯è¯»æ€§ï¼Ÿæœ€ç»ˆè¾“å‡ºçš„ç»“æœå¿…ç„¶ä¸ç¬¦åˆé¢„æœŸã€‚</p>
<h3 data-id="heading-6">æ²¡æœ‰çº¦æŸ</h3>
<p>æˆ‘æƒ³è®© AI å¸®æˆ‘å†™ä¸€ä¸ªè¾“å…¥æ¡†ç»„ä»¶ï¼Œä½†æ˜¯æ²¡æœ‰æ·»åŠ ç›¸å…³çº¦æŸï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">å¸®æˆ‘å†™ä¸€ä¸ªè¾“å…¥æ¡†ç»„ä»¶ã€‚

æŠ€æœ¯æ ˆï¼š<span class="hljs-title class_">React</span> + <span class="hljs-title class_">TypeScript</span> + <span class="hljs-variable constant_">SCSS</span>
</code></pre>
<p><strong>é—®é¢˜æœ¬è´¨</strong>ï¼šAI å®¹æ˜“å¼•å…¥é¢å¤–çš„å‡è®¾ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸å…¼å®¹çš„ ui ç»„ä»¶åº“ï¼Œä¾‹å¦‚ antdã€‚</li>
<li>ä½¿ç”¨å¤æ‚çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ã€‚</li>
</ul>
<p>å¯¼è‡´æœ€ç»ˆè¾“å‡º<strong>ä¸å¯æ§</strong>ï¼Œéšæ€§å¼•å…¥é”™è¯¯å‡è®¾ã€‚</p>
<h2 data-id="heading-7">æç¤ºè¯æ¨¡æ¿</h2>
<p>äº†è§£äº†å¸¸è§é—®é¢˜åï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—ç»“æ„åŒ–çš„æ–¹æ³•æ¥é¿å…å®ƒä»¬ã€‚è¿™å°±æ˜¯æç¤ºè¯æ¨¡æ¿çš„ä»·å€¼æ‰€åœ¨ã€‚</p>
<h3 data-id="heading-8">æç¤ºè¯çš„å›°æ‰°</h3>
<p>æˆ‘ä»¬ç°åœ¨çŸ¥é“åœ¨ä½¿ç”¨ AI æ—¶ï¼Œæä¾›çš„ä¸Šä¸‹æ–‡è¶Šæ¸…æ™°ï¼ŒAI ç»™å‡ºçš„å›ç­”å°±ä¼šè¶Šç¬¦åˆé¢„æœŸã€‚ä½†æ˜¯æ¯æ¬¡å†™æç¤ºè¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¤§æ¦‚ç‡è¿˜æ˜¯ä¼šé™·å…¥è¿™æ ·çš„çŠ¶æ€ï¼š</p>
<blockquote>
<p>æˆ‘è¦å…ˆç»™ AI æŒ‡å®šä¸€ä¸ªè§’è‰²ï¼Œå‘Šè¯‰ä»–èƒŒæ™¯å’Œä»»åŠ¡ï¼Œè¿˜æœ‰çº¦æŸã€è¦æ±‚ã€æŠ€æœ¯æ ˆâ€¦â€¦çº¦æŸè¦åŒ…å«ä»€ä¹ˆå†…å®¹ï¼Ÿè¦æ±‚è¦å†™ä»€ä¹ˆï¼ŸæŠ€æœ¯æ ˆè¦æ”¾åˆ°å“ªé‡Œï¼Ÿ</p>
</blockquote>
<p>è¿™ä¼šç»™ AI ä½¿ç”¨è€…å¸¦æ¥å¾ˆå¤§çš„è®¤çŸ¥è´Ÿæ‹…ï¼Œæˆ‘ä»¬åŒæ—¶è¦æ€è€ƒ"è¯´ä»€ä¹ˆ"å’Œ"æ€ä¹ˆè¯´"ã€‚è€Œæ¨¡æ¿çš„ä»·å€¼ï¼Œå°±æ˜¯<strong>æŠŠ"æ€ä¹ˆè¯´"å˜æˆå›ºå®šæ ¼å¼ï¼Œè®©ä½ ä¸“æ³¨äº"è¯´ä»€ä¹ˆ"</strong>ã€‚</p>
<p>è¿™ä¸å‰ç«¯çš„å¼€å‘æ¡†æ¶ï¼ˆReact/Vueï¼‰å¾ˆç±»ä¼¼ï¼šåœ¨æ²¡æœ‰æ¡†æ¶ä¹‹å‰ï¼Œå¼€å‘è€…æ—¢è¦å…³æ³¨ä¸šåŠ¡ï¼ŒåŒæ—¶è¿˜éœ€è¦å…³æ³¨ DOM æ›´æ–°åŠæ€§èƒ½é—®é¢˜ï¼›éšç€æ¡†æ¶çš„æ¨å‡ºï¼Œå‰ç«¯å¼€å‘è€…èƒ½æŠŠæ›´å¤šçš„ç²¾åŠ›æ”¾åˆ°ä¸šåŠ¡åŠŸèƒ½å¼€å‘ä¸Šã€‚</p>
<h3 data-id="heading-9">æ¨¡æ¿ç›®æ ‡</h3>
<p>æç¤ºè¯æ¨¡æ¿çš„ç›®æ ‡æ˜¯<strong>å‡å°‘ä½¿ç”¨è€…çš„æ€è€ƒè´Ÿæ‹…å¹¶æé«˜ AI è¾“å‡ºçš„ç¨³å®šæ€§</strong>ã€‚ä½†æ¨¡æ¿å¹¶ä¸æ˜¯ç»ˆæç›®æ ‡ï¼Œå› ä¸ºå›ºå®šçš„æ¨¡æ¿åè€Œä¼šé™åˆ¶çµæ´»æ€§ã€‚å› æ­¤åœ¨ä¸åŒé˜¶æ®µã€ä¸åŒåœºæ™¯ï¼Œä½¿ç”¨è€…å¯ä»¥å¯¹æ¨¡æ¿è¿›è¡Œè°ƒæ•´ï¼š</p>





















<table><thead><tr><th><strong>é˜¶æ®µ</strong></th><th><strong>åšæ³•</strong></th></tr></thead><tbody><tr><td>åˆçº§é˜¶æ®µ</td><td>ä¸¥æ ¼æŒ‰æ¡†æ¶å¡«å†™ï¼Œç¡®ä¿ä¸é—æ¼</td></tr><tr><td>ç†Ÿç»ƒé˜¶æ®µ</td><td>æ ¹æ®ä»»åŠ¡å¤æ‚åº¦ç®€åŒ–æˆ–æ‰©å±•</td></tr><tr><td>é«˜æ‰‹é˜¶æ®µ</td><td>æ¡†æ¶å†…åŒ–æˆç›´è§‰ï¼Œè‡ªç„¶åœ°ç»„ç»‡ä¿¡æ¯</td></tr></tbody></table>
<h3 data-id="heading-10">æ¨èæ¨¡æ¿</h3>
<p>æ¨¡æ¿ç»“æ„ï¼š</p>













































<table><thead><tr><th><strong>ä¸»é¢˜</strong></th><th><strong>å¿…å¡«ç¨‹åº¦</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td>è§’è‰²</td><td>å¿…é¡»</td><td>è®© AI æˆä¸ºæŸä¸ªé¢†åŸŸçš„ä¸“å®¶</td></tr><tr><td>èƒŒæ™¯</td><td>å¿…é¡»</td><td>è®© AI æå‰äº†è§£ä»»åŠ¡çš„èƒŒæ™¯çŸ¥è¯†</td></tr><tr><td>ä»»åŠ¡</td><td>å¿…é¡»</td><td>å‘Šè¯‰ AI è¦åšä»€ä¹ˆ</td></tr><tr><td>è¦æ±‚</td><td>æ¨è</td><td>å‘Šè¯‰ AI ä»»åŠ¡å®Œæˆçš„æ ‡å‡†</td></tr><tr><td>çº¦æŸ</td><td>æ¨è</td><td>ä¸º AI åˆ’å®šè¾¹ç•Œï¼Œé˜²æ­¢è‡ªç”±å‘æŒ¥</td></tr><tr><td>æ ¼å¼</td><td>å¯é€‰</td><td>å‘Šè¯‰ AI æœ€ç»ˆè¾“å‡ºå†…å®¹çš„æ ¼å¼</td></tr><tr><td>ç¤ºä¾‹</td><td>å¯é€‰</td><td>ç”¨å®é™…çš„ä¾‹å­å‘Šè¯‰ AI è¦æ€ä¹ˆåš</td></tr></tbody></table>
<p>æ¨¡æ¿ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## è§’è‰²</span>
ä½ æ˜¯ä¸€ä¸ªæ“…é•¿ React å’Œç»„ä»¶å¼€å‘çš„çš„å‰ç«¯å¼€å‘è€…ã€‚

<span class="hljs-section">## èƒŒæ™¯</span>
æˆ‘ä½¿ç”¨ react å¼€å‘äº†ä¸€ä¸ªåŸºç¡€ç»„ä»¶åº“ï¼Œé‡Œé¢åŒ…å«äº†xxä¸ªç»„ä»¶ï¼Œç»„ä»¶åç§°å¦‚ä¸‹xxxã€‚

<span class="hljs-section">## ä»»åŠ¡</span>
å¸®æˆ‘ä¸ºæ¯ä¸ªç»„ä»¶ç”Ÿæˆä¸€ä»½ mdr æ–‡ä»¶ï¼Œè¡¨ç¤ºè¯¥ç»„ä»¶çš„ä½¿ç”¨è¯¦ç»†è¯´æ˜ã€‚

<span class="hljs-section">## è¦æ±‚</span>
<span class="hljs-bullet">-</span> æ–‡æ¡£è¦åŒ…å«ç»„ä»¶çš„ APIã€ä½¿ç”¨ç¤ºä¾‹ã€xxxã€‚

<span class="hljs-section">## çº¦æŸ</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨ md è¯­æ³•ã€‚
<span class="hljs-bullet">-</span> å¿…é¡»ä¿è¯ API çš„å®Œæ•´ï¼Œä¸èƒ½æ¼æ‰å†…å®¹ã€‚

<span class="hljs-section">## è¾“å‡ºæ ¼å¼</span>
Title: ç»„ä»¶åç§°

description: ç»„ä»¶æè¿°

APIï¼š
xxx

Examplesï¼š
xxx

<span class="hljs-section">## ç¤ºä¾‹</span>

Title: Alert

description: è­¦ç¤ºç»„ä»¶

API:

| å‚æ•° | è¯´æ˜ | ç±»å‹ | é»˜è®¤å€¼ | ç‰ˆæœ¬ |
| --- | --- | --- | --- | --- |
| action | è‡ªå®šä¹‰æ“ä½œé¡¹ | ReactNode | - | 4.9.0 |
| afterClose | å…³é—­åŠ¨ç”»ç»“æŸåè§¦å‘çš„å›è°ƒå‡½æ•° | () =&gt; void | - |  |
| banner | æ˜¯å¦ç”¨ä½œé¡¶éƒ¨å…¬å‘Š | boolean | false |  |

</code></pre>
<h2 data-id="heading-11">è¿›é˜¶æç¤ºè¯æŠ€å·§</h2>
<h3 data-id="heading-12"><strong>Few-shot Prompting</strong></h3>
<p>Few-shot çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ç»™ AI å‡ ä¸ªä¾‹å­ï¼Œè®©ä»–å…ˆæŒ‰ç…§ä¾‹å­å­¦ä¹ ï¼Œç†è§£ä»»åŠ¡å¤„ç†æµç¨‹åŠæœ€ç»ˆçš„å†…å®¹è¾“å‡ºã€‚è¿™ç§æ¨¡å¼èƒ½å¤Ÿæ›´é«˜æ•ˆçš„è®© AI ç†è§£ç”¨æˆ·çš„æ„å›¾ï¼Œè¿™å’Œäººå­¦ä¹ æ–°ä¸œè¥¿ä¸€æ ·ï¼Œç›´æ¥çœ‹ç¤ºèŒƒæ¯”è¯»æ–‡æ¡£æ›´é«˜æ•ˆã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx">ä»»åŠ¡ï¼šä¸º <span class="hljs-title class_">React</span> ç»„ä»¶ç”Ÿæˆ <span class="hljs-title class_">TypeScript</span> <span class="hljs-title class_">Props</span> ç±»å‹å®šä¹‰

ç¤ºä¾‹<span class="hljs-number">1</span>ï¼š
ç»„ä»¶æè¿°ï¼šä¸€ä¸ªæ˜¾ç¤ºä»»åŠ¡æ ‡é¢˜çš„ç»„ä»¶ï¼Œæ ‡é¢˜å¿…å¡«ï¼Œå¯é€‰æ˜¾ç¤ºå®ŒæˆçŠ¶æ€
è¾“å‡ºï¼š
interface <span class="hljs-title class_">TaskTitleProps</span> {
  <span class="hljs-attr">title</span>: string;           <span class="hljs-comment">// ä»»åŠ¡æ ‡é¢˜ï¼Œå¿…å¡«</span>
  isCompleted?: boolean;   <span class="hljs-comment">// å®ŒæˆçŠ¶æ€ï¼Œå¯é€‰</span>
}

ç¤ºä¾‹<span class="hljs-number">2</span>ï¼š
ç»„ä»¶æè¿°ï¼šä¸€ä¸ªæŒ‰é’®ç»„ä»¶ï¼Œæ˜¾ç¤ºæ–‡å­—å¿…å¡«ï¼Œç‚¹å‡»äº‹ä»¶å¿…å¡«ï¼Œå¯é€‰ç¦ç”¨çŠ¶æ€
è¾“å‡ºï¼š
interface <span class="hljs-title class_">ButtonProps</span> {
  <span class="hljs-attr">label</span>: string;           <span class="hljs-comment">// æŒ‰é’®æ–‡å­—ï¼Œå¿…å¡«</span>
  <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">void</span>;     <span class="hljs-comment">// ç‚¹å‡»äº‹ä»¶ï¼Œå¿…å¡«</span>
  disabled?: boolean;      <span class="hljs-comment">// ç¦ç”¨çŠ¶æ€ï¼Œå¯é€‰</span>
}
</code></pre>
<p>ç¤ºä¾‹è™½ç„¶èƒ½å¤Ÿæ›´é«˜æ•ˆçš„å¸®åŠ© AI ç†è§£ä»»åŠ¡ï¼Œä½†æ˜¯è¿‡å¤šçš„ç¤ºä¾‹ä¹Ÿä¼šåŠ å¤§ token çš„æ¶ˆè€—ï¼Œå› æ­¤ç¤ºä¾‹ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œè¦éµå¾ª<strong>å°‘è€Œç²¾çš„åŸåˆ™</strong>ï¼Œé€šè¿‡ 2ï½5 ä¸ªä¾‹å­å°†å…¸å‹çš„åœºæ™¯ã€å¤šæ ·æ€§åœºæ™¯ä»¥åŠè¾¹ç•Œåœºæ™¯åˆ—ä¸¾å‡ºæ¥ã€‚</p>
<h3 data-id="heading-13"><strong>Chain of Thought</strong></h3>
<p>Chain of Thought çš„æ ¸å¿ƒæ€æƒ³æ˜¯å‘Šè¯‰ AI è®©ä»–ä¸€æ­¥æ­¥æ€è€ƒæ¨ç†ï¼Œè¾“å‡ºæ¨ç†å†…å®¹ï¼Œè€Œä¸æ˜¯ç›´æ¥ç»™ç­”æ¡ˆã€‚å°±åƒè§£æ•°å­¦é¢˜ä¸€æ ·ï¼ŒæŠŠè§£é¢˜çš„æ¯ä¸€æ­¥éƒ½å†™å‡ºæ¥ï¼Œè¿™æ ·å¾€å¾€èƒ½è®© AI è¾“å‡ºæ›´å‡†ç¡®çš„ç­”æ¡ˆã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx">## è§’è‰²
ä½ æ˜¯ä¸€ä¸ªæ“…é•¿ <span class="hljs-title class_">React</span> å’Œç»„ä»¶å¼€å‘çš„çš„å‰ç«¯å¼€å‘è€…ã€‚

## èƒŒæ™¯
æˆ‘ä½¿ç”¨ react å¼€å‘äº†ä¸€ä¸ªåŸºç¡€ç»„ä»¶åº“ï¼Œé‡Œé¢åŒ…å«äº†xxä¸ªç»„ä»¶ã€‚

## ä»»åŠ¡
å¸®æˆ‘ç»™ä¿®æ”¹çš„ react ç»„ä»¶è¡¥å……æ–°çš„å•æµ‹ã€‚

### ä¿®æ”¹ç‚¹åˆ†ææ­¥éª¤
- åˆ†æç»„ä»¶çš„ propsï¼Œæ‰¾å‡ºæ–°å¢/åˆ å‡/ä¿®æ”¹çš„å‚æ•°ï¼Œå¹¶è¾“å‡ºå‡ºæ¥ã€‚
- åˆ†æç»„ä»¶çš„å†…éƒ¨é€»è¾‘ï¼Œæ‰¾å‡ºæ–°å¢/åˆ é™¤/ä¿®æ”¹çš„é€»è¾‘ï¼Œå¹¶è¾“å‡ºå‡ºæ¥ã€‚

</code></pre>
<p>è¿™ç§æ¨¡å¼åœ¨å¤æ‚çš„åœºæ™¯ä¸­ä¼šå¤§å¤§æå‡è¾“å‡ºæ•ˆæœï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€äº›å±€é™ï¼š</p>
<ul>
<li>è¾“å‡ºå†…å®¹çš„é•¿åº¦ä¼šå¤§å¤§å¢åŠ ï¼Œå¢åŠ  Token çš„æ¶ˆè€—ã€‚</li>
<li>å¯¹äºæŸäº›ç®€å•ä»»åŠ¡ï¼Œå¼ºè¡Œä½¿ç”¨è¯¥æ¨¡å¼å¯èƒ½åè€Œä¼šé™ä½æ•ˆæœã€‚</li>
<li>å¦‚æœæ¨ç†çš„è¿‡ç¨‹ä¸­æŸä¸€æ­¥å‡ºé”™ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¥ä¸‹æ¥æ­¥éª¤éƒ½ä¼šå‡ºé”™ï¼Œéœ€è¦é…åˆ Self-Critique æ¥æ£€æŸ¥ã€‚</li>
</ul>
<h3 data-id="heading-14"><strong>Self-Critique</strong></h3>
<p>ä¸äººç±»ä¸€æ ·ï¼ŒAI å¹¶éæ€»èƒ½åœ¨é¦–æ¬¡å°è¯•æ—¶å°±ç”Ÿæˆæœ€ä½³è¾“å‡ºï¼ŒSelf-Critique çš„æ ¸å¿ƒæ€æƒ³æ˜¯åœ¨ AI ç”Ÿæˆå†…å®¹ä¹‹åï¼Œè®© AI å†è‡ªæˆ‘æ£€æŸ¥ä¸€éï¼Œå‘ç°å¹¶ä¿®å¤é—®é¢˜ã€‚è¿™ä¸ªå’Œæˆ‘ä»¬è€ƒè¯•ç­”é¢˜ä¸€æ ·ï¼Œåšå®Œä¹‹åå†æ£€æŸ¥ä¸€éå¾€å¾€èƒ½å‘ç°é—æ¼çš„ç»†èŠ‚æˆ–è€…å†™é”™çš„é¢˜ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx">## è§’è‰²
ä½ æ˜¯ä¸€ä¸ªæ“…é•¿ <span class="hljs-title class_">React</span> å’Œç»„ä»¶å¼€å‘çš„çš„å‰ç«¯å¼€å‘è€…ã€‚

## èƒŒæ™¯
æˆ‘ä½¿ç”¨ react å¼€å‘äº†ä¸€ä¸ªåŸºç¡€ç»„ä»¶åº“ï¼Œé‡Œé¢åŒ…å«äº†xxä¸ªç»„ä»¶ã€‚

## ä»»åŠ¡
å¸®æˆ‘ç»™ä¿®æ”¹çš„ react ç»„ä»¶è¡¥å……æ–°çš„å•æµ‹ã€‚

## ä¿®æ”¹ç‚¹åˆ†ææ­¥éª¤
- åˆ†æç»„ä»¶çš„ propsï¼Œæ‰¾å‡ºæ–°å¢/åˆ å‡/ä¿®æ”¹çš„å‚æ•°ï¼Œå¹¶è¾“å‡ºå‡ºæ¥ã€‚
- åˆ†æç»„ä»¶çš„å†…éƒ¨é€»è¾‘ï¼Œæ‰¾å‡ºæ–°å¢/åˆ é™¤/ä¿®æ”¹çš„é€»è¾‘ï¼Œå¹¶è¾“å‡ºå‡ºæ¥ã€‚

## è¦æ±‚

- ç”Ÿæˆå®Œä¹‹åï¼Œè¯·ä¸¥æ ¼è‡ªæŸ¥
	- æ˜¯å¦è¦†ç›–äº†æ‰€æœ‰ä¿®æ”¹ç‚¹ã€‚
	- æ¯ä¸ªä¿®æ”¹ç‚¹æ˜¯å¦è¦†ç›–äº†æ‰€æœ‰è¾¹ç•Œæƒ…å†µï¼ˆç©ºå€¼ã€ç©ºå­—ç¬¦ä¸²ã€åªæœ‰ç©ºæ ¼ï¼‰
</code></pre>
<p>è¿™ç§æ¨¡å¼ä¸‹ä¼šè®© AI æ‰®æ¼”ä¸€ä¸ªå®¡æŸ¥è€…çš„è§’è‰²é‡æ–°å®¡ä¸‹ç”Ÿæˆçš„å†…å®¹ï¼Œæé«˜å†…å®¹çš„å‡†ç¡®æ€§ï¼Œä½†æ˜¯ä¹Ÿæœ‰å®ƒçš„å±€é™ï¼š</p>
<ul>
<li>å¢åŠ  Token çš„æ¶ˆè€—ï¼Œè¿™ç§æ¨¡å¼æ›´æ¨èåœ¨å¤æ‚çš„åœºæ™¯ä¸­ä½¿ç”¨ã€‚</li>
<li>AI å¯èƒ½å‡ºç°è‡ªæˆ‘è®¤å¯çš„åå·®ï¼Œè®¤ä¸ºè¾“å‡ºæ˜¯æ²¡é—®é¢˜çš„ï¼Œæ­¤æ—¶<strong>éœ€è¦ä¸¥æ ¼ç»™ AI è®¾å®šå®¡æŸ¥è€…çš„è§’è‰²</strong>ã€‚</li>
</ul>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>æœ¬æ–‡å›´ç»•ã€Œæç¤ºè¯å·¥ç¨‹ã€å±•å¼€ï¼Œä»èƒŒæ™¯ã€æ ¸å¿ƒç›®æ ‡ã€å¸¸è§é—®é¢˜ã€ç»“æ„åŒ–æ¨¡æ¿ï¼Œåˆ° Few-shotã€Chain of Thoughtã€Self-Critique ç­‰è¿›é˜¶æŠ€å·§ï¼Œç³»ç»Ÿæ€§åœ°è¯´æ˜äº†ä¸€ä»¶äº‹ï¼š</p>
<blockquote>
<p>æç¤ºè¯å·¥ç¨‹çš„æœ¬è´¨ï¼Œä¸æ˜¯â€œå¦‚ä½•æŠŠè¯è¯´å¾—æ›´æ¼‚äº®â€ï¼Œè€Œæ˜¯å¦‚ä½•é€šè¿‡ç»“æ„åŒ–ä¸Šä¸‹æ–‡ï¼Œé™ä½å¤§æ¨¡å‹è¾“å‡ºçš„ä¸ç¡®å®šæ€§ã€‚</p>
</blockquote>
<p>ç„¶è€Œï¼Œè¿™ç§æç¤ºè¯ä¼˜åŒ–çš„æ€è·¯ä¹Ÿå¸¦æ¥äº†æ–°çš„å·¥ç¨‹é—®é¢˜ï¼š<strong>æç¤ºè¯è¶Šæ¥è¶Šé•¿ã€ç»“æ„è¶Šæ¥è¶Šå¤æ‚ï¼Œæœ€ç»ˆç›´æ¥åæ˜ ä¸º Token ä½“ç§¯çš„æŒç»­è†¨èƒ€</strong>ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œæç¤ºè¯ä¼˜åŒ–å¹¶ä¸ç­‰åŒäºå†™å¾—è¶Šè¯¦ç»†è¶Šå¥½ï¼Œè€Œæ˜¯éœ€è¦åœ¨<strong>ä¿¡æ¯å……åˆ†æ€§ä¸ Token æˆæœ¬ä¹‹é—´å–å¾—å¹³è¡¡</strong>ã€‚å¦‚ä½•æ§åˆ¶ä¸Šä¸‹æ–‡è§„æ¨¡ã€é¿å…æ— æ•ˆä¿¡æ¯å †ç§¯ã€å¹¶åœ¨å¤æ‚ä»»åŠ¡ä¸­æŒç»­æä¾›åˆšåˆšå¥½çš„ä¸Šä¸‹æ–‡ï¼Œæˆä¸ºæç¤ºè¯å·¥ç¨‹ä¹‹åå¿…é¡»é¢å¯¹çš„æ ¸å¿ƒé—®é¢˜ã€‚</p>
<h2 data-id="heading-16">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fdocs%2Fguides%2Fprompt-engineering" target="_blank" title="https://platform.openai.com/docs/guides/prompt-engineering" ref="nofollow noopener noreferrer">OpenAI Prompt Engineering Guide</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.anthropic.com%2Fclaude%2Fdocs%2Fprompt-engineering" target="_blank" title="https://docs.anthropic.com/claude/docs/prompt-engineering" ref="nofollow noopener noreferrer">Anthropic Prompt Engineering</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2005.14165" target="_blank" title="https://arxiv.org/abs/2005.14165" ref="nofollow noopener noreferrer">Few-shot Prompting</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2201.11903" target="_blank" title="https://arxiv.org/abs/2201.11903" ref="nofollow noopener noreferrer">Chain of Thought</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2303.17651" target="_blank" title="https://arxiv.org/abs/2303.17651" ref="nofollow noopener noreferrer">Self-Critique</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Caffeineå…¥é—¨åˆ°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7595841630677106739</link>    <guid>https://juejin.cn/post/7595841630677106739</guid>    <pubDate>2026-01-17T07:46:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595841630677106739" data-draft-id="7595842144906625074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Caffeineå…¥é—¨åˆ°å®æˆ˜"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-17T07:46:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Caffeineå…¥é—¨åˆ°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T07:46:22.000Z" title="Sat Jan 17 2026 07:46:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>é«˜æ€§èƒ½Javaç¼“å­˜æ¡†æ¶å®æˆ˜ï¼Œè®©ä½ ç§’æ‡‚ç¼“å­˜ä¼˜åŒ–</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å½“ä»Šé«˜å¹¶å‘çš„äº’è”ç½‘åº”ç”¨ä¸­ï¼Œç¼“å­˜å·²ç»æˆä¸ºæå‡ç³»ç»Ÿæ€§èƒ½çš„å…³é”®æŠ€æœ¯ä¹‹ä¸€ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œæ·±å…¥æµ…å‡ºåœ°å­¦ä¹ Caffeineè¿™æ¬¾é«˜æ€§èƒ½çš„Javaç¼“å­˜æ¡†æ¶ï¼Œå¹¶é€šè¿‡å®é™…æ¡ˆä¾‹è®©ä½ æŒæ¡ç¼“å­˜æŠ€æœ¯çš„ç²¾é«“ã€‚</p>
<h2 data-id="heading-1">1. Caffeineç®€ä»‹</h2>
<p>Caffeineæ˜¯ä¸€ä¸ªåŸºäºJavaçš„é«˜æ€§èƒ½ç¼“å­˜åº“ï¼Œç”±Googleå¼€å‘å¹¶å¼€æºã€‚å®ƒè¢«è®¤ä¸ºæ˜¯Javaç¼“å­˜é¢†åŸŸçš„ç‹è€…ï¼Œåœ¨æ€§èƒ½æµ‹è¯•ä¸­è¡¨ç°ä¼˜å¼‚ã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆé€‰æ‹©Caffeineï¼Ÿ</h3>
<ul>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šé‡‡ç”¨å…ˆè¿›çš„ç®—æ³•ï¼Œè¯»å†™æ€§èƒ½å“è¶Š</li>
<li><strong>åŠŸèƒ½ä¸°å¯Œ</strong>ï¼šæ”¯æŒå¤šç§è¿‡æœŸç­–ç•¥ã€å¼‚æ­¥åŠ è½½ã€ç»Ÿè®¡ä¿¡æ¯ç­‰</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šå¹¶å‘æ€§èƒ½ä¼˜ç§€</li>
<li><strong>æ˜“äºä½¿ç”¨</strong>ï¼šAPIè®¾è®¡ç®€æ´ç›´è§‚</li>
<li><strong>æ´»è·ƒç¤¾åŒº</strong>ï¼šæŒç»­ç»´æŠ¤å’Œæ›´æ–°</li>
</ul>
<h3 data-id="heading-3">æ¶æ„è®¾è®¡</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3e6e0d899e14fbaaafafa3123056baf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769240782&amp;x-signature=hfMSuIcQysmqzw2OjT3WiDv4Wtw%3D" alt="" loading="lazy"/></p>
<p>Caffeineçš„æ ¸å¿ƒæ¶æ„åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>ç¼“å­˜å®¹å™¨</strong>ï¼šä½¿ç”¨ConcurrentHashMapä½œä¸ºåº•å±‚æ•°æ®ç»“æ„</li>
<li><strong>è®¿é—®ç­–ç•¥</strong>ï¼šé‡‡ç”¨Window TinyLFUç®—æ³•è¿›è¡Œé¢‘ç‡ç»Ÿè®¡</li>
<li><strong>æ·˜æ±°ç­–ç•¥</strong>ï¼šåŸºäºæ—¶é—´çª—å£å’Œé¢‘ç‡çš„æ··åˆæ·˜æ±°ç­–ç•¥</li>
<li><strong>äº‹ä»¶æœºåˆ¶</strong>ï¼šæ”¯æŒç›‘å¬ç¼“å­˜çš„å„ç§äº‹ä»¶</li>
</ol>
<h2 data-id="heading-4">2. å¿«é€Ÿå…¥é—¨</h2>
<h3 data-id="heading-5">Mavenä¾èµ–</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.ben-manes.caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span>Â com.<span class="hljs-property">github</span>.<span class="hljs-property">benmanes</span>.<span class="hljs-property">caffeine</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">Cache</span>;
<span class="hljs-keyword">import</span>Â com.<span class="hljs-property">github</span>.<span class="hljs-property">benmanes</span>.<span class="hljs-property">caffeine</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">Caffeine</span>;
<span class="hljs-keyword">import</span>Â java.<span class="hljs-property">util</span>.<span class="hljs-property">concurrent</span>.<span class="hljs-property">TimeUnit</span>;

<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">BasicCacheExample</span>Â {
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[]Â args</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â åˆ›å»ºç¼“å­˜</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">Cache</span>&lt;<span class="hljs-title class_">String</span>,Â <span class="hljs-title class_">String</span>&gt;Â cacheÂ =Â <span class="hljs-title class_">Caffeine</span>.<span class="hljs-title function_">newBuilder</span>()
Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">maximumSize</span>(<span class="hljs-number">1000</span>)Â <span class="hljs-comment">//Â æœ€å¤§ç¼“å­˜æ•°é‡</span>
Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">expireAfterWrite</span>(<span class="hljs-number">10</span>,Â <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">MINUTES</span>)Â <span class="hljs-comment">//Â å†™å…¥å10åˆ†é’Ÿè¿‡æœŸ</span>
Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">build</span>();

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å­˜å‚¨æ•°æ®</span>
Â Â Â Â Â Â Â Â cache.<span class="hljs-title function_">put</span>(<span class="hljs-string">"key1"</span>,Â <span class="hljs-string">"value1"</span>);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è·å–æ•°æ®</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">String</span>Â valueÂ =Â cache.<span class="hljs-title function_">getIfPresent</span>(<span class="hljs-string">"key1"</span>);
Â Â Â Â Â Â Â Â <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"ç¼“å­˜å€¼:Â "</span>Â +Â value);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è·å–æˆ–è®¡ç®—</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">String</span>Â value2Â =Â cache.<span class="hljs-title function_">get</span>(<span class="hljs-string">"key2"</span>,Â kÂ -&gt;Â <span class="hljs-string">"defaultValue"</span>);
Â Â Â Â Â Â Â Â <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"ç¼“å­˜å€¼:Â "</span>Â +Â value2);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ç§»é™¤æ•°æ®</span>
Â Â Â Â Â Â Â Â cache.<span class="hljs-title function_">invalidate</span>(<span class="hljs-string">"key1"</span>);
Â Â Â Â }
}
</code></pre>
<h2 data-id="heading-7">3. æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-8">3.1 Cache vs LoadingCache vs AsyncLoadingCache</h3>
<p>Caffeineæä¾›äº†ä¸‰ç§ç¼“å­˜ç±»å‹ï¼š</p>
<ol>
<li><strong>Cache</strong>ï¼šåŸºç¡€ç¼“å­˜ï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†æ•°æ®</li>
<li><strong>LoadingCache</strong>ï¼šè‡ªåŠ¨åŠ è½½æ•°æ®çš„ç¼“å­˜</li>
<li><strong>AsyncLoadingCache</strong>ï¼šå¼‚æ­¥åŠ è½½æ•°æ®çš„ç¼“å­˜</li>
</ol>
<h3 data-id="heading-9">3.2 è¿‡æœŸç­–ç•¥</h3>
<p>Caffeineæä¾›äº†ä¸‰ç§è¿‡æœŸç­–ç•¥ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Caffeine<span class="hljs-selector-class">.newBuilder</span>()
Â Â Â Â <span class="hljs-selector-class">.expireAfterWrite</span>(<span class="hljs-number">10</span>,Â TimeUnit.MINUTES)Â <span class="hljs-comment">//Â å†™å…¥åè¿‡æœŸ</span>
Â Â Â Â <span class="hljs-selector-class">.expireAfterAccess</span>(<span class="hljs-number">5</span>,Â TimeUnit.MINUTES)Â Â <span class="hljs-comment">//Â æœ€åè®¿é—®åè¿‡æœŸ</span>
Â Â Â Â <span class="hljs-selector-class">.expireAfter</span>(<span class="hljs-number">30</span>,Â TimeUnit.MINUTES);Â Â Â Â Â Â Â <span class="hljs-comment">//Â è‡ªå®šä¹‰è¿‡æœŸé€»è¾‘</span>
</code></pre>
<h3 data-id="heading-10">3.3 æ·˜æ±°ç­–ç•¥</h3>
<pre><code class="hljs language-scss" lang="scss">Caffeine<span class="hljs-selector-class">.newBuilder</span>()
Â Â Â Â <span class="hljs-selector-class">.maximumSize</span>(<span class="hljs-number">1000</span>)Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â åŸºäºæ•°é‡</span>
Â Â Â Â <span class="hljs-selector-class">.maximumWeight</span>(<span class="hljs-number">10000</span>)Â Â Â Â Â Â <span class="hljs-comment">//Â åŸºäºæƒé‡</span>
Â Â Â Â <span class="hljs-selector-class">.weakKeys</span>()Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¼±å¼•ç”¨é”®</span>
Â Â Â Â <span class="hljs-selector-class">.weakValues</span>()Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¼±å¼•ç”¨å€¼</span>
Â Â Â Â <span class="hljs-selector-class">.softValues</span>();Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è½¯å¼•ç”¨å€¼</span>
</code></pre>
<h2 data-id="heading-11">4. é«˜çº§ç‰¹æ€§</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff936a2d76c04f1aaf866ccba450d2fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769240782&amp;x-signature=vIDzfY5%2B20eLh9huJFxIDK%2FnZbk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">4.1 å¼‚æ­¥åŠ è½½</h3>
<pre><code class="hljs language-ini" lang="ini">AsyncLoadingCache&lt;String,Â User&gt;Â <span class="hljs-attr">asyncCache</span>Â =Â Caffeine.newBuilder()
Â Â Â Â .maximumSize(1000)
Â Â Â Â .expireAfterWrite(10,Â TimeUnit.MINUTES)
Â Â Â Â .buildAsync(keyÂ -&gt;Â loadUserFromDatabase(key))<span class="hljs-comment">;</span>

//Â å¼‚æ­¥è·å–
CompletableFuture&lt;User&gt;Â <span class="hljs-attr">userFuture</span>Â =Â asyncCache.get(<span class="hljs-string">"user1"</span>)<span class="hljs-comment">;</span>
userFuture.thenAccept(userÂ -&gt;Â {
Â Â Â Â System.out.println("è·å–ç”¨æˆ·:Â "Â +Â user.getName())<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-13">4.2 äº‹ä»¶ç›‘å¬</h3>
<pre><code class="hljs language-vbnet" lang="vbnet">Cache&lt;<span class="hljs-type">String</span>,Â <span class="hljs-type">String</span>&gt;Â cacheÂ =Â Caffeine.newBuilder()
Â Â Â Â .maximumSize(<span class="hljs-number">1000</span>)
Â Â Â Â .removalListener((<span class="hljs-keyword">key</span>,Â value,Â cause)Â -&gt;Â {
Â Â Â Â Â Â Â Â System.out.println(<span class="hljs-string">"ç¼“å­˜ç§»é™¤:Â "</span>Â +Â <span class="hljs-keyword">key</span>Â +Â <span class="hljs-string">"Â -&gt;Â "</span>Â +Â valueÂ +Â <span class="hljs-string">",Â åŸå› :Â "</span>Â +Â cause);
Â Â Â Â })
Â Â Â Â .build();
</code></pre>
<h3 data-id="heading-14">4.3 ç»Ÿè®¡ä¿¡æ¯</h3>
<pre><code class="hljs language-scss" lang="scss">Cache&lt;String,Â String&gt;Â cacheÂ =Â Caffeine<span class="hljs-selector-class">.newBuilder</span>()
Â Â Â Â <span class="hljs-selector-class">.maximumSize</span>(<span class="hljs-number">1000</span>)
Â Â Â Â <span class="hljs-selector-class">.recordStats</span>()Â <span class="hljs-comment">//Â å¯ç”¨ç»Ÿè®¡</span>
Â Â Â Â <span class="hljs-selector-class">.build</span>();

<span class="hljs-comment">//Â ä½¿ç”¨ç¼“å­˜...</span>
cache<span class="hljs-selector-class">.put</span>("key1",Â "value1");
cache<span class="hljs-selector-class">.getIfPresent</span>("key1");

<span class="hljs-comment">//Â è·å–ç»Ÿè®¡ä¿¡æ¯</span>
CacheStatsÂ statsÂ =Â cache<span class="hljs-selector-class">.stats</span>();
System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("å‘½ä¸­ç‡:Â "Â +Â stats.hitRate());
System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("åŠ è½½æ—¶é—´:Â "Â +Â stats.averageLoadPenalty());
System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("è¯·æ±‚æ•°:Â "Â +Â stats.requestCount());
</code></pre>
<h2 data-id="heading-15">5. Spring Booté›†æˆ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aff82efaf278437f8045c4dae72c58be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769240782&amp;x-signature=x8wXynqrw1CSWo8vv794U8KA5Sg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16">5.1 æ·»åŠ ä¾èµ–</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.ben-manes.caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-17">5.2 é…ç½®ç±»</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span>Â com.<span class="hljs-property">github</span>.<span class="hljs-property">benmanes</span>.<span class="hljs-property">caffeine</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">Caffeine</span>;
<span class="hljs-keyword">import</span>Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">CacheManager</span>;
<span class="hljs-keyword">import</span>Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">EnableCaching</span>;
<span class="hljs-keyword">import</span>Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">caffeine</span>.<span class="hljs-property">CaffeineCacheManager</span>;
<span class="hljs-keyword">import</span>Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">context</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Bean</span>;
<span class="hljs-keyword">import</span>Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">context</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Configuration</span>;
<span class="hljs-keyword">import</span>Â java.<span class="hljs-property">util</span>.<span class="hljs-property">concurrent</span>.<span class="hljs-property">TimeUnit</span>;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableCaching</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">CacheConfig</span>Â {

Â Â Â Â <span class="hljs-meta">@Bean</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">CacheManager</span>Â <span class="hljs-title function_">cacheManager</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-title class_">CaffeineCacheManager</span>Â cacheManagerÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">CaffeineCacheManager</span>();
Â Â Â Â Â Â Â Â cacheManager.<span class="hljs-title function_">setCaffeine</span>(<span class="hljs-title function_">caffeineCacheBuilder</span>());
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â cacheManager;
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">Caffeine</span>&lt;<span class="hljs-title class_">Object</span>,Â <span class="hljs-title class_">Object</span>&gt;Â <span class="hljs-title function_">caffeineCacheBuilder</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">Caffeine</span>.<span class="hljs-title function_">newBuilder</span>()
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">initialCapacity</span>(<span class="hljs-number">100</span>)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">maximumSize</span>(<span class="hljs-number">1000</span>)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">expireAfterWrite</span>(<span class="hljs-number">10</span>,Â <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">MINUTES</span>)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">recordStats</span>();
Â Â Â Â }
}
</code></pre>
<h3 data-id="heading-18">5.3 ä½¿ç”¨æ³¨è§£</h3>
<pre><code class="hljs language-typescript" lang="typescript">packageÂ com.<span class="hljs-property">example</span>.<span class="hljs-property">caffeine</span>.<span class="hljs-property">demo</span>.<span class="hljs-property">service</span>;

<span class="hljs-keyword">import</span>Â com.<span class="hljs-property">example</span>.<span class="hljs-property">caffeine</span>.<span class="hljs-property">demo</span>.<span class="hljs-property">model</span>.<span class="hljs-property">User</span>;
<span class="hljs-keyword">import</span>Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">CacheEvict</span>;
<span class="hljs-keyword">import</span>Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">CachePut</span>;
<span class="hljs-keyword">import</span>Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Cacheable</span>;
<span class="hljs-keyword">import</span>Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">stereotype</span>.<span class="hljs-property">Service</span>;

<span class="hljs-keyword">import</span>Â java.<span class="hljs-property">util</span>.*;
<span class="hljs-keyword">import</span>Â java.<span class="hljs-property">util</span>.<span class="hljs-property">concurrent</span>.<span class="hljs-property">ConcurrentHashMap</span>;
<span class="hljs-keyword">import</span>Â java.<span class="hljs-property">util</span>.<span class="hljs-property">concurrent</span>.<span class="hljs-property">TimeUnit</span>;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserService</span>Â {

Â Â Â Â <span class="hljs-comment">//Â æ¨¡æ‹Ÿæ•°æ®åº“å­˜å‚¨</span>
Â Â Â Â <span class="hljs-keyword">private</span>Â finalÂ <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">Long</span>,Â <span class="hljs-title class_">User</span>&gt;Â userMapÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">UserService</span>()Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â åˆå§‹åŒ–ä¸€äº›æµ‹è¯•æ•°æ®</span>
Â Â Â Â Â Â Â Â userMap.<span class="hljs-title function_">put</span>(1L,Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">User</span>(1L,Â <span class="hljs-string">"å¼ ä¸‰"</span>,Â <span class="hljs-string">"zhangsan@example.com"</span>,Â <span class="hljs-string">"13800138000"</span>));
Â Â Â Â Â Â Â Â userMap.<span class="hljs-title function_">put</span>(2L,Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">User</span>(2L,Â <span class="hljs-string">"æå››"</span>,Â <span class="hljs-string">"lisi@example.com"</span>,Â <span class="hljs-string">"13900139000"</span>));
Â Â Â Â Â Â Â Â userMap.<span class="hljs-title function_">put</span>(3L,Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">User</span>(3L,Â <span class="hljs-string">"ç‹äº”"</span>,Â <span class="hljs-string">"wangwu@example.com"</span>,Â <span class="hljs-string">"13700137000"</span>));
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆå¸¦ç¼“å­˜ï¼‰
Â Â Â Â Â *Â <span class="hljs-doctag">@param</span>Â userIdÂ ç”¨æˆ·ID
Â Â Â Â Â *Â <span class="hljs-doctag">@return</span>Â ç”¨æˆ·ä¿¡æ¯
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-meta">@Cacheable</span>(valueÂ =Â <span class="hljs-string">"users"</span>,Â keyÂ =Â <span class="hljs-string">"#userId"</span>)
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">User</span>Â <span class="hljs-title function_">getUserById</span>(<span class="hljs-params">LongÂ userId</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢è€—æ—¶</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">MILLISECONDS</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">100</span>);
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">InterruptedException</span>Â e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">currentThread</span>().<span class="hljs-title function_">interrupt</span>();
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â <span class="hljs-title class_">User</span>Â userÂ =Â userMap.<span class="hljs-title function_">get</span>(userId);
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (userÂ ==Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨:Â "</span>Â +Â userId);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â user;
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆå¼‚æ­¥ï¼‰
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">CompletableFuture</span>&lt;<span class="hljs-title class_">User</span>&gt;Â <span class="hljs-title function_">getUserByIdAsync</span>(<span class="hljs-params">LongÂ userId</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">CompletableFuture</span>.<span class="hljs-title function_">supplyAsync</span>(()Â -&gt;Â <span class="hljs-title function_">getUserById</span>(userId));
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â è·å–æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-meta">@Cacheable</span>(valueÂ =Â <span class="hljs-string">"users"</span>,Â keyÂ =Â <span class="hljs-string">"'all'"</span>)
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">User</span>&gt;Â <span class="hljs-title function_">getAllUsers</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢è€—æ—¶</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">MILLISECONDS</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">200</span>);
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">InterruptedException</span>Â e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">currentThread</span>().<span class="hljs-title function_">interrupt</span>();
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ArrayList</span>&lt;&gt;(userMap.<span class="hljs-title function_">values</span>());
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â åˆ›å»ºç”¨æˆ·
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-meta">@CachePut</span>(valueÂ =Â <span class="hljs-string">"users"</span>,Â keyÂ =Â <span class="hljs-string">"#user.id"</span>)
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">User</span>Â <span class="hljs-title function_">createUser</span>(<span class="hljs-params">UserÂ user</span>)Â {
Â Â Â Â Â Â Â Â userMap.<span class="hljs-title function_">put</span>(user.<span class="hljs-title function_">getId</span>(),Â user);
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â user;
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æ›´æ–°ç”¨æˆ·ä¿¡æ¯
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-meta">@CachePut</span>(valueÂ =Â <span class="hljs-string">"users"</span>,Â keyÂ =Â <span class="hljs-string">"#user.id"</span>)
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">User</span>Â <span class="hljs-title function_">updateUser</span>(<span class="hljs-params">UserÂ user</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (!userMap.<span class="hljs-title function_">containsKey</span>(user.<span class="hljs-title function_">getId</span>()))Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨:Â "</span>Â +Â user.<span class="hljs-title function_">getId</span>());
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â user.<span class="hljs-title function_">setUpdateTime</span>(<span class="hljs-title class_">LocalDateTime</span>.<span class="hljs-title function_">now</span>());
Â Â Â Â Â Â Â Â userMap.<span class="hljs-title function_">put</span>(user.<span class="hljs-title function_">getId</span>(),Â user);
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â user;
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â åˆ é™¤ç”¨æˆ·
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-meta">@CacheEvict</span>(valueÂ =Â <span class="hljs-string">"users"</span>,Â keyÂ =Â <span class="hljs-string">"#userId"</span>)
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">deleteUser</span>(<span class="hljs-params">LongÂ userId</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-title class_">User</span>Â removedÂ =Â userMap.<span class="hljs-title function_">remove</span>(userId);
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (removedÂ ==Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨:Â "</span>Â +Â userId);
Â Â Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æ‰¹é‡è·å–ç”¨æˆ·ä¿¡æ¯
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-meta">@Cacheable</span>(valueÂ =Â <span class="hljs-string">"users"</span>,Â keyÂ =Â <span class="hljs-string">"'batch:'Â +Â #userIds.hashCode()"</span>)
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">Long</span>,Â <span class="hljs-title class_">User</span>&gt;Â <span class="hljs-title function_">batchGetUsers</span>(<span class="hljs-params"><span class="hljs-built_in">Set</span>&lt;Long&gt;Â userIds</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ¨¡æ‹Ÿæ‰¹é‡æŸ¥è¯¢è€—æ—¶</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">MILLISECONDS</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">150</span>);
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">InterruptedException</span>Â e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">currentThread</span>().<span class="hljs-title function_">interrupt</span>();
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">Long</span>,Â <span class="hljs-title class_">User</span>&gt;Â resultÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">HashMap</span>&lt;&gt;();
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">Long</span>Â userIdÂ :Â userIds)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">User</span>Â userÂ =Â userMap.<span class="hljs-title function_">get</span>(userId);
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (userÂ !=Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(userId,Â user);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â result;
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æ ¹æ®ç”¨æˆ·åæ¨¡ç³ŠæŸ¥è¯¢
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">User</span>&gt;Â <span class="hljs-title function_">searchUsersByUsername</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>Â keyword</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">User</span>&gt;Â resultÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">User</span>Â userÂ :Â userMap.<span class="hljs-title function_">values</span>())Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (user.<span class="hljs-title function_">getUsername</span>().<span class="hljs-title function_">contains</span>(keyword))Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">add</span>(user);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â result;
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æ¸…ç©ºæ‰€æœ‰ç¼“å­˜
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-meta">@CacheEvict</span>(valueÂ =Â <span class="hljs-string">"users"</span>,Â allEntriesÂ =Â <span class="hljs-literal">true</span>)
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">clearAllCache</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æ¸…ç©ºæ‰€æœ‰ç”¨æˆ·ç¼“å­˜"</span>);
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â è·å–ç”¨æˆ·æ€»æ•°
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â longÂ <span class="hljs-title function_">getUserCount</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â userMap.<span class="hljs-title function_">size</span>();
Â Â Â Â }
}
</code></pre>
<h2 data-id="heading-19">6. ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h2>
<h3 data-id="heading-20">6.1 ç¼“å­˜é›ªå´©ä¸å‡»ç©¿</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ae45c5ae2c644e7b19813de7bb61db4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769240782&amp;x-signature=s5Bj%2B0%2FpD1TT%2FcUtgYIihfc%2BzFI%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-21">ç¼“å­˜é›ªå´©è§£å†³æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">//Â 1.Â è®¾ç½®éšæœºè¿‡æœŸæ—¶é—´</span>
Caffeine.newBuilder()
Â Â Â Â .expireAfterWrite(<span class="hljs-number">10</span>Â +Â <span class="hljs-keyword">new</span>Â Random().nextInt(<span class="hljs-number">5</span>),Â TimeUnit.MINUTES);

<span class="hljs-comment">//Â 2.Â ä½¿ç”¨äº’æ–¥é”</span>
<span class="hljs-keyword">private</span>Â finalÂ LockÂ <span class="hljs-keyword">lock</span>Â =Â <span class="hljs-keyword">new</span>Â ReentrantLock();

<span class="hljs-function"><span class="hljs-keyword">public</span>Â UserÂ <span class="hljs-title">getUserWithLock</span>(<span class="hljs-params">LongÂ id</span>)</span>Â {
Â Â Â Â UserÂ userÂ =Â cache.getIfPresent(id);
Â Â Â Â <span class="hljs-keyword">if</span>Â (userÂ !=Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â user;
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">lock</span>.<span class="hljs-keyword">lock</span>();
Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â åŒé‡æ£€æŸ¥</span>
Â Â Â Â Â Â Â Â userÂ =Â cache.getIfPresent(id);
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (userÂ !=Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â user;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â userÂ =Â userRepository.findById(id);
Â Â Â Â Â Â Â Â cache.put(id,Â user);
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â user;
Â Â Â Â }Â <span class="hljs-keyword">finally</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">lock</span>.unlock();
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-22">ç¼“å­˜å‡»ç©¿è§£å†³æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â ä½¿ç”¨Caffeineçš„å¼‚æ­¥åŠ è½½</span>
AsyncLoadingCache&lt;Long,Â User&gt;Â asyncCacheÂ =Â Caffeine<span class="hljs-selector-class">.newBuilder</span>()
Â Â Â Â <span class="hljs-selector-class">.maximumSize</span>(<span class="hljs-number">1000</span>)
Â Â Â Â <span class="hljs-selector-class">.expireAfterWrite</span>(<span class="hljs-number">10</span>,Â TimeUnit.MINUTES)
Â Â Â Â <span class="hljs-selector-class">.buildAsync</span>(keyÂ -&gt;Â loadUserFromDatabase(key));

publicÂ UserÂ <span class="hljs-built_in">getUser</span>(LongÂ id)Â {
Â Â Â Â returnÂ asyncCache<span class="hljs-selector-class">.get</span>(id)<span class="hljs-selector-class">.join</span>();
}
</code></pre>
<h3 data-id="heading-23">6.2 ç¼“å­˜é¢„çƒ­</h3>
<pre><code class="hljs language-scss" lang="scss">packageÂ com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.caffeine</span><span class="hljs-selector-class">.demo</span><span class="hljs-selector-class">.cache</span>;

importÂ com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.caffeine</span><span class="hljs-selector-class">.demo</span><span class="hljs-selector-class">.model</span><span class="hljs-selector-class">.User</span>;
importÂ com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.caffeine</span><span class="hljs-selector-class">.demo</span><span class="hljs-selector-class">.service</span><span class="hljs-selector-class">.UserService</span>;
importÂ lombok<span class="hljs-selector-class">.extern</span><span class="hljs-selector-class">.slf4j</span><span class="hljs-selector-class">.Slf4j</span>;
importÂ org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.beans</span><span class="hljs-selector-class">.factory</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Autowired</span>;
importÂ org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.boot</span><span class="hljs-selector-class">.CommandLineRunner</span>;
importÂ org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.stereotype</span><span class="hljs-selector-class">.Component</span>;

importÂ java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.Arrays</span>;
importÂ java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.List</span>;
importÂ java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.CompletableFuture</span>;
importÂ java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.ExecutorService</span>;
importÂ java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.Executors</span>;
importÂ java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.TimeUnit</span>;
importÂ java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.stream</span><span class="hljs-selector-class">.Collectors</span>;

<span class="hljs-comment">/**
Â *Â ç¼“å­˜é¢„çƒ­å¯åŠ¨å™¨
Â *
Â *Â åŠŸèƒ½ï¼š
Â *Â 1.Â åœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨é¢„çƒ­çƒ­ç‚¹æ•°æ®åˆ°ç¼“å­˜
Â *Â 2.Â æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥é¢„çƒ­æ–¹å¼
Â *Â 3.Â æ”¯æŒæ‰¹é‡é¢„çƒ­
Â *Â 4.Â æä¾›é¢„çƒ­è¿›åº¦ç›‘æ§
Â *Â 5.Â å¼‚å¸¸å¤„ç†å’Œé‡è¯•æœºåˆ¶
Â */</span>
<span class="hljs-keyword">@Slf</span>4j
<span class="hljs-keyword">@Component</span>
publicÂ classÂ CacheWarmupRunnerÂ implementsÂ CommandLineRunnerÂ {

Â Â Â Â <span class="hljs-keyword">@Autowired</span>
Â Â Â Â privateÂ UserServiceÂ userService;

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â é¢„çƒ­é…ç½®
Â Â Â Â Â */</span>
Â Â Â Â privateÂ staticÂ classÂ WarmupConfigÂ {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â é¢„çƒ­ç”¨æˆ·IDåˆ—è¡¨ï¼ˆå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚é…ç½®ï¼‰</span>
Â Â Â Â Â Â Â Â privateÂ staticÂ finalÂ List&lt;Long&gt;Â HOT_USER_IDSÂ =Â Arrays<span class="hljs-selector-class">.asList</span>(<span class="hljs-number">1</span>L,Â <span class="hljs-number">2</span>L,Â <span class="hljs-number">3</span>L,Â <span class="hljs-number">4</span>L,Â <span class="hljs-number">5</span>L);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â é¢„çƒ­æ‰¹æ¬¡å¤§å°</span>
Â Â Â Â Â Â Â Â privateÂ staticÂ finalÂ intÂ BATCH_SIZEÂ =Â <span class="hljs-number">3</span>;

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â çº¿ç¨‹æ± å¤§å°</span>
Â Â Â Â Â Â Â Â privateÂ staticÂ finalÂ intÂ THREAD_POOL_SIZEÂ =Â <span class="hljs-number">2</span>;

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ˜¯å¦å¯ç”¨å¼‚æ­¥é¢„çƒ­</span>
Â Â Â Â Â Â Â Â privateÂ staticÂ finalÂ booleanÂ ASYNC_WARMUPÂ =Â true;

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æœ€å¤§é‡è¯•æ¬¡æ•°</span>
Â Â Â Â Â Â Â Â privateÂ staticÂ finalÂ intÂ MAX_RETRY_TIMESÂ =Â <span class="hljs-number">3</span>;

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â é‡è¯•é—´éš”ï¼ˆæ¯«ç§’ï¼‰</span>
Â Â Â Â Â Â Â Â privateÂ staticÂ finalÂ longÂ RETRY_INTERVALÂ =Â <span class="hljs-number">1000</span>L;
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">@Override</span>
Â Â Â Â publicÂ voidÂ run(String...Â args)Â throwsÂ ExceptionÂ {
Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("å¼€å§‹æ‰§è¡Œç¼“å­˜é¢„çƒ­...");
Â Â Â Â Â Â Â Â longÂ startTimeÂ =Â System<span class="hljs-selector-class">.currentTimeMillis</span>();

Â Â Â Â Â Â Â Â tryÂ {
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (WarmupConfig.ASYNC_WARMUP)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¼‚æ­¥é¢„çƒ­</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">asyncWarmup</span>();
Â Â Â Â Â Â Â Â Â Â Â Â }Â elseÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â åŒæ­¥é¢„çƒ­</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">syncWarmup</span>();
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â longÂ endTimeÂ =Â System<span class="hljs-selector-class">.currentTimeMillis</span>();
Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("ç¼“å­˜é¢„çƒ­å®Œæˆï¼è€—æ—¶:Â {}Â ms",Â endTimeÂ -Â startTime);

Â Â Â Â Â Â Â Â }Â catchÂ (ExceptionÂ e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.error</span>("ç¼“å­˜é¢„çƒ­å¤±è´¥ï¼é”™è¯¯ä¿¡æ¯:Â {}",Â e.getMessage(),Â e);
Â Â Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â åŒæ­¥é¢„çƒ­æ–¹å¼
Â Â Â Â Â */</span>
Â Â Â Â privateÂ voidÂ <span class="hljs-built_in">syncWarmup</span>()Â {
Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("ä½¿ç”¨åŒæ­¥æ–¹å¼é¢„çƒ­ç¼“å­˜...");

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ–¹æ³•1ï¼šé€ä¸ªé¢„çƒ­</span>
Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("é€ä¸ªé¢„çƒ­ç”¨æˆ·æ•°æ®...");
Â Â Â Â Â Â Â Â forÂ (LongÂ userIdÂ :Â WarmupConfig.HOT_USER_IDS)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">warmupSingleUser</span>(userId);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ–¹æ³•2ï¼šæ‰¹é‡é¢„çƒ­</span>
Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("æ‰¹é‡é¢„çƒ­ç”¨æˆ·æ•°æ®...");
Â Â Â Â Â Â Â Â <span class="hljs-built_in">batchWarmupUsers</span>(WarmupConfig.HOT_USER_IDS);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ–¹æ³•3ï¼šé¢„çƒ­æ‰€æœ‰ç”¨æˆ·</span>
Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("é¢„çƒ­æ‰€æœ‰ç”¨æˆ·æ•°æ®...");
Â Â Â Â Â Â Â Â <span class="hljs-built_in">warmupAllUsers</span>();
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â å¼‚æ­¥é¢„çƒ­æ–¹å¼
Â Â Â Â Â */</span>
Â Â Â Â privateÂ voidÂ <span class="hljs-built_in">asyncWarmup</span>()Â {
Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("ä½¿ç”¨å¼‚æ­¥æ–¹å¼é¢„çƒ­ç¼“å­˜...");

Â Â Â Â Â Â Â Â ExecutorServiceÂ executorÂ =Â Executors<span class="hljs-selector-class">.newFixedThreadPool</span>(WarmupConfig.THREAD_POOL_SIZE);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â åˆ›å»ºå¼‚æ­¥é¢„çƒ­ä»»åŠ¡</span>
Â Â Â Â Â Â Â Â List&lt;CompletableFuture&lt;Void&gt;&gt;Â futuresÂ =Â WarmupConfig<span class="hljs-selector-class">.HOT_USER_IDS</span><span class="hljs-selector-class">.stream</span>()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-class">.map</span>(userIdÂ -&gt;Â CompletableFuture.runAsync(()Â -&gt;Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â tryÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">warmupSingleUserWithRetry</span>(userId);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }Â catchÂ (ExceptionÂ e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.error</span>("é¢„çƒ­ç”¨æˆ·Â {}Â å¤±è´¥:Â {}",Â userId,Â e.getMessage());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â },Â executor))
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-class">.collect</span>(Collectors.toList());

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
Â Â Â Â Â Â Â Â CompletableFuture<span class="hljs-selector-class">.allOf</span>(futures.toArray(newÂ CompletableFuture[<span class="hljs-number">0</span>]))
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-class">.whenComplete</span>((result,Â ex)Â -&gt;Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (exÂ !=Â null)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.error</span>("éƒ¨åˆ†é¢„çƒ­ä»»åŠ¡å¤±è´¥",Â ex);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }Â elseÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("æ‰€æœ‰é¢„çƒ­ä»»åŠ¡å®Œæˆ");
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â executor<span class="hljs-selector-class">.shutdown</span>();
Â Â Â Â Â Â Â Â Â Â Â Â })
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-class">.join</span>();
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â é¢„çƒ­å•ä¸ªç”¨æˆ·æ•°æ®ï¼ˆå¸¦é‡è¯•æœºåˆ¶ï¼‰
Â Â Â Â Â */</span>
Â Â Â Â privateÂ voidÂ <span class="hljs-built_in">warmupSingleUserWithRetry</span>(LongÂ userId)Â {
Â Â Â Â Â Â Â Â intÂ retryCountÂ =Â <span class="hljs-number">0</span>;
Â Â Â Â Â Â Â Â booleanÂ successÂ =Â false;

Â Â Â Â Â Â Â Â whileÂ (retryCountÂ &lt;Â WarmupConfig.MAX_RETRY_TIMESÂ &amp;&amp;Â !success)Â {
Â Â Â Â Â Â Â Â Â Â Â Â tryÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">warmupSingleUser</span>(userId);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â successÂ =Â true;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.debug</span>("ç”¨æˆ·Â {}Â é¢„çƒ­æˆåŠŸï¼Œå°è¯•æ¬¡æ•°:Â {}",Â userId,Â retryCountÂ +Â <span class="hljs-number">1</span>);
Â Â Â Â Â Â Â Â Â Â Â Â }Â catchÂ (ExceptionÂ e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â retryCount++;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (retryCountÂ &gt;=Â WarmupConfig.MAX_RETRY_TIMES)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.error</span>("ç”¨æˆ·Â {}Â é¢„çƒ­å¤±è´¥ï¼Œå·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°:Â {}",Â userId,Â e.getMessage());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â throwÂ newÂ <span class="hljs-built_in">RuntimeException</span>("é¢„çƒ­ç”¨æˆ·Â "Â +Â userIdÂ +Â "Â å¤±è´¥",Â e);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.warn</span>("ç”¨æˆ·Â {}Â é¢„çƒ­å¤±è´¥ï¼Œç¬¬{}æ¬¡é‡è¯•ã€‚é”™è¯¯:Â {}",Â userId,Â retryCount,Â e.getMessage());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â tryÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Thread<span class="hljs-selector-class">.sleep</span>(WarmupConfig.RETRY_INTERVAL);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }Â catchÂ (InterruptedExceptionÂ ie)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Thread<span class="hljs-selector-class">.currentThread</span>()<span class="hljs-selector-class">.interrupt</span>();
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â throwÂ newÂ <span class="hljs-built_in">RuntimeException</span>("é¢„çƒ­è¢«ä¸­æ–­",Â ie);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â é¢„çƒ­å•ä¸ªç”¨æˆ·
Â Â Â Â Â */</span>
Â Â Â Â privateÂ voidÂ <span class="hljs-built_in">warmupSingleUser</span>(LongÂ userId)Â {
Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("é¢„çƒ­ç”¨æˆ·:Â {}",Â userId);
Â Â Â Â Â Â Â Â tryÂ {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â é¢„çƒ­ç”¨æˆ·åŸºæœ¬ä¿¡æ¯</span>
Â Â Â Â Â Â Â Â Â Â Â Â UserÂ userÂ =Â userService<span class="hljs-selector-class">.getUserById</span>(userId);
Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.debug</span>("ç”¨æˆ·Â {}Â åŸºæœ¬ä¿¡æ¯é¢„çƒ­å®Œæˆ",Â userId);
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â é¢„çƒ­ç›¸å…³æ•°æ®ï¼ˆå¦‚æœæœ‰ï¼‰</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">warmupRelatedData</span>(user);

Â Â Â Â Â Â Â Â }Â catchÂ (ExceptionÂ e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.error</span>("é¢„çƒ­ç”¨æˆ·Â {}Â å¤±è´¥:Â {}",Â userId,Â e.getMessage());
Â Â Â Â Â Â Â Â Â Â Â Â throwÂ e;
Â Â Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æ‰¹é‡é¢„çƒ­ç”¨æˆ·æ•°æ®
Â Â Â Â Â */</span>
Â Â Â Â privateÂ voidÂ <span class="hljs-built_in">batchWarmupUsers</span>(List&lt;Long&gt;Â userIds)Â {
Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("æ‰¹é‡é¢„çƒ­ç”¨æˆ·:Â {}",Â userIds);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æŒ‰æ‰¹æ¬¡å¤„ç†</span>
Â Â Â Â Â Â Â Â forÂ (intÂ iÂ =Â <span class="hljs-number">0</span>;Â iÂ &lt;Â userIds.size();Â <span class="hljs-selector-tag">i</span>Â +=Â WarmupConfig<span class="hljs-selector-class">.BATCH_SIZE</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â intÂ endÂ =Â Math<span class="hljs-selector-class">.min</span>(iÂ +Â WarmupConfig.BATCH_SIZE,Â userIds.size());
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;Long&gt;Â batchÂ =Â userIds<span class="hljs-selector-class">.subList</span>(i,Â end);

Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("é¢„çƒ­ç¬¬Â {}Â æ‰¹ï¼Œç”¨æˆ·ID:Â {}",Â (iÂ /Â WarmupConfig.BATCH_SIZE)Â +Â <span class="hljs-number">1</span>,Â batch);

Â Â Â Â Â Â Â Â Â Â Â Â tryÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ‰¹é‡æŸ¥è¯¢</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Map&lt;Long,Â User&gt;Â usersÂ =Â userService<span class="hljs-selector-class">.batchGetUsers</span>(newÂ HashSet&lt;&gt;(batch));
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("æ‰¹é‡é¢„çƒ­å®Œæˆï¼ŒæˆåŠŸé¢„çƒ­Â {}Â ä¸ªç”¨æˆ·",Â users.size());

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ·»åŠ æ‰¹æ¬¡é—´é—´éš”ï¼Œé¿å…å‹åŠ›è¿‡å¤§</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (endÂ &lt;Â userIds.size())Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Thread<span class="hljs-selector-class">.sleep</span>(<span class="hljs-number">500</span>);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â }Â catchÂ (ExceptionÂ e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.error</span>("æ‰¹é‡é¢„çƒ­å¤±è´¥:Â {}",Â e.getMessage());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å•ä¸ªé¢„çƒ­é™çº§</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â forÂ (LongÂ userIdÂ :Â batch)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â tryÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">warmupSingleUser</span>(userId);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }Â catchÂ (ExceptionÂ ex)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.error</span>("é™çº§é¢„çƒ­ç”¨æˆ·Â {}Â å¤±è´¥:Â {}",Â userId,Â ex.getMessage());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â é¢„çƒ­æ‰€æœ‰ç”¨æˆ·
Â Â Â Â Â */</span>
Â Â Â Â privateÂ voidÂ <span class="hljs-built_in">warmupAllUsers</span>()Â {
Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("å¼€å§‹é¢„çƒ­æ‰€æœ‰ç”¨æˆ·æ•°æ®...");
Â Â Â Â Â Â Â Â tryÂ {
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;User&gt;Â allUsersÂ =Â userService<span class="hljs-selector-class">.getAllUsers</span>();
Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("é¢„çƒ­æ‰€æœ‰ç”¨æˆ·å®Œæˆï¼Œå…±Â {}Â ä¸ªç”¨æˆ·",Â allUsers.size());
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â é¢„çƒ­ç”¨æˆ·çš„å…¶ä»–å…³è”æ•°æ®</span>
Â Â Â Â Â Â Â Â Â Â Â Â forÂ (UserÂ userÂ :Â allUsers)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">warmupRelatedData</span>(user);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ·»åŠ é—´éš”ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½è¿‡å¤šæ•°æ®</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Thread<span class="hljs-selector-class">.sleep</span>(<span class="hljs-number">100</span>);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }Â catchÂ (ExceptionÂ e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.error</span>("é¢„çƒ­æ‰€æœ‰ç”¨æˆ·å¤±è´¥:Â {}",Â e.getMessage());
Â Â Â Â Â Â Â Â Â Â Â Â throwÂ e;
Â Â Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â é¢„çƒ­ç›¸å…³æ•°æ®
Â Â Â Â Â */</span>
Â Â Â Â privateÂ voidÂ <span class="hljs-built_in">warmupRelatedData</span>(UserÂ user)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â é¢„çƒ­ç”¨æˆ·çš„è¡Œä¸ºæ•°æ®</span>
Â Â Â Â Â Â Â Â <span class="hljs-built_in">warmupUserActivities</span>(user.getId());
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â é¢„çƒ­ç”¨æˆ·è¡Œä¸ºæ•°æ®
Â Â Â Â Â */</span>
Â Â Â Â privateÂ voidÂ <span class="hljs-built_in">warmupUserActivities</span>(LongÂ userId)Â {
Â Â Â Â Â Â Â Â tryÂ {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è°ƒç”¨è¡Œä¸ºæœåŠ¡é¢„çƒ­</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â activityService.warmupUserActivities(userId);</span>
Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.debug</span>("é¢„çƒ­ç”¨æˆ·Â {}Â çš„è¡Œä¸ºæ•°æ®",Â userId);
Â Â Â Â Â Â Â Â }Â catchÂ (ExceptionÂ e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.warn</span>("é¢„çƒ­ç”¨æˆ·Â {}Â çš„è¡Œä¸ºæ•°æ®å¤±è´¥:Â {}",Â userId,Â e.getMessage());
Â Â Â Â Â Â Â Â }
Â Â Â Â }


Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â éªŒè¯é¢„çƒ­ç»“æœ
Â Â Â Â Â */</span>
Â Â Â Â publicÂ voidÂ <span class="hljs-built_in">verifyWarmupResult</span>()Â {
Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("éªŒè¯é¢„çƒ­ç»“æœ...");
Â Â Â Â Â Â Â Â intÂ successCountÂ =Â <span class="hljs-number">0</span>;
Â Â Â Â Â Â Â Â intÂ totalCountÂ =Â WarmupConfig<span class="hljs-selector-class">.HOT_USER_IDS</span><span class="hljs-selector-class">.size</span>();
Â Â Â Â Â Â Â Â forÂ (LongÂ userIdÂ :Â WarmupConfig.HOT_USER_IDS)Â {
Â Â Â Â Â Â Â Â Â Â Â Â tryÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æµ‹è¯•ç¼“å­˜æ˜¯å¦å‘½ä¸­</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â longÂ startTimeÂ =Â System<span class="hljs-selector-class">.nanoTime</span>();
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â UserÂ userÂ =Â userService<span class="hljs-selector-class">.getUserById</span>(userId);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â longÂ endTimeÂ =Â System<span class="hljs-selector-class">.nanoTime</span>();
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â longÂ durationÂ =Â TimeUnit<span class="hljs-selector-class">.NANOSECONDS</span><span class="hljs-selector-class">.toMillis</span>(endTimeÂ -Â startTime);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (durationÂ &lt;Â <span class="hljs-number">10</span>)Â {Â <span class="hljs-comment">//Â å¦‚æœå“åº”æ—¶é—´å°äº10msï¼Œè¯´æ˜å‘½ä¸­äº†ç¼“å­˜</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â successCount++;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.debug</span>("ç”¨æˆ·Â {}Â ç¼“å­˜é¢„çƒ­éªŒè¯æˆåŠŸï¼Œå“åº”æ—¶é—´:Â {}Â ms",Â userId,Â duration);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }Â elseÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.warn</span>("ç”¨æˆ·Â {}Â ç¼“å­˜é¢„çƒ­éªŒè¯å¤±è´¥ï¼Œå“åº”æ—¶é—´:Â {}Â ms",Â userId,Â duration);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â }Â catchÂ (ExceptionÂ e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.error</span>("éªŒè¯ç”¨æˆ·Â {}Â å¤±è´¥:Â {}",Â userId,Â e.getMessage());
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â log<span class="hljs-selector-class">.info</span>("é¢„çƒ­ç»“æœéªŒè¯å®Œæˆï¼ŒæˆåŠŸç‡:Â {}Â /Â {}Â ({:.<span class="hljs-number">2</span>f}%)",
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â successCount,Â totalCount,Â (double)Â successCountÂ /Â totalCountÂ *Â <span class="hljs-number">100</span>);
Â Â Â Â }
}
</code></pre>
<h3 data-id="heading-24">6.3 ç¼“å­˜ç›‘æ§</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e4458c72707476fb32e692560b310cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769240782&amp;x-signature=wky0TvmiONYywhTeIPUlOrfciO0%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-typescript" lang="typescript">Â <span class="hljs-meta">@Autowired</span>
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">CacheManager</span>Â cacheManager;
Â Â Â Â <span class="hljs-comment">//Â é¢„è­¦é˜ˆå€¼é…ç½®</span>
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">AlertThreshold</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å‘½ä¸­ç‡é˜ˆå€¼ï¼ˆä½äºæ­¤å€¼å‘å‡ºè­¦å‘Šï¼‰</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â finalÂ doubleÂ <span class="hljs-variable constant_">MIN_HIT_RATE</span>Â =Â <span class="hljs-number">0.8</span>;
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¹³å‡åŠ è½½æ—¶é—´é˜ˆå€¼ï¼ˆè¶…è¿‡æ­¤å€¼å‘å‡ºè­¦å‘Šï¼‰</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â finalÂ longÂ <span class="hljs-variable constant_">MAX_AVG_LOAD_TIME_MS</span>Â =Â <span class="hljs-number">100</span>;
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å†…å­˜ä½¿ç”¨ç‡é˜ˆå€¼</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â finalÂ doubleÂ <span class="hljs-variable constant_">MAX_MEMORY_USAGE_PERCENT</span>Â =Â <span class="hljs-number">80.0</span>;
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â é”™è¯¯ç‡é˜ˆå€¼</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â finalÂ doubleÂ <span class="hljs-variable constant_">MAX_ERROR_RATE</span>Â =Â <span class="hljs-number">0.01</span>;
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ç¼“å­˜å¤§å°é˜ˆå€¼</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â finalÂ longÂ <span class="hljs-variable constant_">MAX_CACHE_SIZE</span>Â =Â <span class="hljs-number">10000</span>;
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â è·å–æ‰€æœ‰ç¼“å­˜çš„ç»Ÿè®¡ä¿¡æ¯
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/stats"</span>)
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">ResponseEntity</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>,Â <span class="hljs-title class_">Object</span>&gt;&gt;Â <span class="hljs-title function_">getAllCacheStats</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>,Â <span class="hljs-title class_">Object</span>&gt;Â resultÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">LinkedHashMap</span>&lt;&gt;();
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è·å–æ‰€æœ‰ç¼“å­˜åç§°</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt;Â cacheNamesÂ =Â cacheManager.<span class="hljs-title function_">getCacheNames</span>();
Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"timestamp"</span>,Â <span class="hljs-title class_">LocalDateTime</span>.<span class="hljs-title function_">now</span>());
Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"cacheNames"</span>,Â cacheNames);
Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"cacheCount"</span>,Â cacheNames.<span class="hljs-title function_">size</span>());
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ç»Ÿè®¡æ±‡æ€»</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">CacheSummary</span>Â summaryÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">CacheSummary</span>();
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">String</span>Â cacheNameÂ :Â cacheNames)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>,Â <span class="hljs-title class_">Object</span>&gt;Â cacheStatÂ =Â <span class="hljs-title function_">getCacheStat</span>(cacheName);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(cacheName,Â cacheStat);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ±‡æ€»ç»Ÿè®¡</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â summary.<span class="hljs-title function_">aggregate</span>(cacheStat);
Â Â Â Â Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">Exception</span>Â e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è·å–ç¼“å­˜Â {}Â çš„ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:Â {}"</span>,Â cacheName,Â e.<span class="hljs-title function_">getMessage</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(cacheName,Â <span class="hljs-string">"è·å–ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:Â "</span>Â +Â e.<span class="hljs-title function_">getMessage</span>());
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"summary"</span>,Â summary);
Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"health"</span>,Â <span class="hljs-title function_">getCacheHealthStatus</span>(summary));
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">ResponseEntity</span>.<span class="hljs-title function_">ok</span>(result);
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â è·å–æŒ‡å®šç¼“å­˜çš„ç»Ÿè®¡ä¿¡æ¯
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/stats/{cacheName}"</span>)
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">ResponseEntity</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>,Â <span class="hljs-title class_">Object</span>&gt;&gt;Â <span class="hljs-title function_">getCacheStat</span>(<span class="hljs-params"><span class="hljs-meta">@PathVariable</span>Â <span class="hljs-built_in">String</span>Â cacheName</span>)Â {
Â Â Â Â Â Â Â Â log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"è·å–ç¼“å­˜Â {}Â çš„ç»Ÿè®¡ä¿¡æ¯"</span>,Â cacheName);
Â Â Â Â Â Â Â Â <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>,Â <span class="hljs-title class_">Object</span>&gt;Â resultÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">HashMap</span>&lt;&gt;();
Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">Cache</span>Â springCacheÂ =Â cacheManager.<span class="hljs-title function_">getCache</span>(cacheName);
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (springCacheÂ ==Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">ResponseEntity</span>.<span class="hljs-title function_">notFound</span>().<span class="hljs-title function_">build</span>();
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">Object</span>Â nativeCacheÂ =Â springCache.<span class="hljs-title function_">getNativeCache</span>();
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (nativeCacheÂ <span class="hljs-keyword">instanceof</span>Â <span class="hljs-title class_">Cache</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">Cache</span>&lt;?,Â ?&gt;Â cacheÂ =Â (<span class="hljs-title class_">Cache</span>&lt;?,Â ?&gt;)Â nativeCache;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">CacheStats</span>Â statsÂ =Â cache.<span class="hljs-title function_">stats</span>();
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â åŸºæœ¬ä¿¡æ¯</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"name"</span>,Â cacheName);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"size"</span>,Â <span class="hljs-title function_">estimateCacheSize</span>(cache));
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"estimatedMemoryUsage"</span>,Â <span class="hljs-title function_">estimateMemoryUsage</span>(cache));
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ç»Ÿè®¡æ•°æ®</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"requestCount"</span>,Â stats.<span class="hljs-title function_">requestCount</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"hitCount"</span>,Â stats.<span class="hljs-title function_">hitCount</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"missCount"</span>,Â stats.<span class="hljs-title function_">missCount</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"hitRate"</span>,Â stats.<span class="hljs-title function_">hitRate</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"missRate"</span>,Â stats.<span class="hljs-title function_">missRate</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â åŠ è½½ç»Ÿè®¡</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"loadSuccessCount"</span>,Â stats.<span class="hljs-title function_">loadSuccessCount</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"loadFailureCount"</span>,Â stats.<span class="hljs-title function_">loadFailureCount</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"loadFailureRate"</span>,Â <span class="hljs-title function_">calculateLoadFailureRate</span>(stats));
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"totalLoadTime"</span>,Â stats.<span class="hljs-title function_">totalLoadTime</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"averageLoadPenalty"</span>,Â stats.<span class="hljs-title function_">averageLoadPenalty</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ·˜æ±°ç»Ÿè®¡</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"evictionCount"</span>,Â stats.<span class="hljs-title function_">evictionCount</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"evictionWeight"</span>,Â stats.<span class="hljs-title function_">evictionWeight</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å…¶ä»–ç»Ÿè®¡</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"rejectionCount"</span>,Â stats.<span class="hljs-title function_">rejectionCount</span>());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è®¡ç®—è¡ç”ŸæŒ‡æ ‡</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"errorRate"</span>,Â <span class="hljs-title function_">calculateErrorRate</span>(stats));
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"loadSuccessRate"</span>,Â <span class="hljs-title function_">calculateLoadSuccessRate</span>(stats));
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â é¢„è­¦ä¿¡æ¯</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"alerts"</span>,Â <span class="hljs-title function_">checkCacheAlerts</span>(cacheName,Â stats,Â cache.<span class="hljs-title function_">estimatedSize</span>()));
Â Â Â Â Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"error"</span>,Â <span class="hljs-string">"ä¸æ”¯æŒçš„ç¼“å­˜ç±»å‹:Â "</span>Â +Â nativeCache.<span class="hljs-title function_">getClass</span>().<span class="hljs-title function_">getName</span>());
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">Exception</span>Â e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è·å–ç¼“å­˜Â {}Â ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:Â {}"</span>,Â cacheName,Â e.<span class="hljs-title function_">getMessage</span>());
Â Â Â Â Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"error"</span>,Â e.<span class="hljs-title function_">getMessage</span>());
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"timestamp"</span>,Â <span class="hljs-title class_">LocalDateTime</span>.<span class="hljs-title function_">now</span>());
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">ResponseEntity</span>.<span class="hljs-title function_">ok</span>(result);
Â Â Â Â }
</code></pre>
<h2 data-id="heading-25">7. æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2dffb22ad91461a8f99e3004d37810b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769240782&amp;x-signature=wNJ8gy1A7MDRs2dww%2FMgRI0bpkg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-26">7.1 æ‰¹é‡åŠ è½½ä¼˜åŒ–</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//Â æ‰¹é‡åŠ è½½ä¼˜åŒ–</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">BatchUserService</span>Â {

Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â AsyncLoadingCache&lt;<span class="hljs-built_in">Long</span>,Â User&gt;Â userCache;

Â Â Â Â <span class="hljs-keyword">public</span>Â BatchUserService()Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">this</span>.userCacheÂ =Â Caffeine.newBuilder()
Â Â Â Â Â Â Â Â Â Â Â Â .maximumSize(<span class="hljs-number">1000</span>)
Â Â Â Â Â Â Â Â Â Â Â Â .expireAfterWrite(<span class="hljs-number">10</span>,Â TimeUnit.MINUTES)
Â Â Â Â Â Â Â Â Â Â Â Â .buildAsync(<span class="hljs-keyword">this</span>::batchLoadUsers);
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">private</span>Â Map&lt;<span class="hljs-built_in">Long</span>,Â User&gt;Â batchLoadUsers(Set&lt;<span class="hljs-built_in">Long</span>&gt;Â userIds)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (userIds.isEmpty())Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â Collections.emptyMap();
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ‰¹é‡æŸ¥è¯¢æ•°æ®åº“</span>
Â Â Â Â Â Â Â Â List&lt;User&gt;Â usersÂ =Â userRepository.findAllById(userIds);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è½¬æ¢ä¸ºMap</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â users.stream()
Â Â Â Â Â Â Â Â Â Â Â Â .collect(Collectors.toMap(User::getId,Â userÂ -&gt;Â user));
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">public</span>Â Map&lt;<span class="hljs-built_in">Long</span>,Â User&gt;Â getUsers(Set&lt;<span class="hljs-built_in">Long</span>&gt;Â userIds)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â userCache.getAll(userIds).join();
Â Â Â Â }
}
</code></pre>
<h2 data-id="heading-27">8. å®æˆ˜æ¡ˆä¾‹</h2>
<h3 data-id="heading-28">8.1 ç”¨æˆ·ä¿¡æ¯ç¼“å­˜æœåŠ¡</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span>Â com.<span class="hljs-property">github</span>.<span class="hljs-property">benmanes</span>.<span class="hljs-property">caffeine</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">Cache</span>;
<span class="hljs-keyword">import</span>Â com.<span class="hljs-property">github</span>.<span class="hljs-property">benmanes</span>.<span class="hljs-property">caffeine</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">Caffeine</span>;
<span class="hljs-keyword">import</span>Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">stereotype</span>.<span class="hljs-property">Service</span>;

<span class="hljs-keyword">import</span>Â java.<span class="hljs-property">util</span>.<span class="hljs-property">concurrent</span>.<span class="hljs-property">TimeUnit</span>;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserInfoCacheService</span>Â {

Â Â Â Â <span class="hljs-keyword">private</span>Â finalÂ <span class="hljs-title class_">Cache</span>&lt;<span class="hljs-title class_">Long</span>,Â <span class="hljs-title class_">UserInfo</span>&gt;Â userInfoCache;

Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">UserInfoCacheService</span>()Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">userInfoCache</span>Â =Â <span class="hljs-title class_">Caffeine</span>.<span class="hljs-title function_">newBuilder</span>()
Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">maximumSize</span>(<span class="hljs-number">10000</span>)
Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">expireAfterWrite</span>(<span class="hljs-number">30</span>,Â <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">MINUTES</span>)
Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">expireAfterAccess</span>(<span class="hljs-number">10</span>,Â <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">MINUTES</span>)
Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">recordStats</span>()
Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">build</span>();
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â è·å–ç”¨æˆ·ä¿¡æ¯
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">UserInfo</span>Â <span class="hljs-title function_">getUserInfo</span>(<span class="hljs-params">LongÂ userId</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â userInfoCache.<span class="hljs-title function_">get</span>(userId,Â <span class="hljs-attr">this</span>::loadUserInfoFromDB);
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æ‰¹é‡è·å–ç”¨æˆ·ä¿¡æ¯
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">Long</span>,Â <span class="hljs-title class_">UserInfo</span>&gt;Â <span class="hljs-title function_">batchGetUserInfo</span>(<span class="hljs-params"><span class="hljs-built_in">Set</span>&lt;Long&gt;Â userIds</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â userInfoCache.<span class="hljs-title function_">getAll</span>(userIds,Â <span class="hljs-attr">this</span>::batchLoadUserInfoFromDB);
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æ›´æ–°ç”¨æˆ·ä¿¡æ¯
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">updateUserInfo</span>(<span class="hljs-params">LongÂ userId,Â UserInfoÂ userInfo</span>)Â {
Â Â Â Â Â Â Â Â userInfoCache.<span class="hljs-title function_">put</span>(userId,Â userInfo);
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â åˆ é™¤ç”¨æˆ·ä¿¡æ¯
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">removeUserInfo</span>(<span class="hljs-params">LongÂ userId</span>)Â {
Â Â Â Â Â Â Â Â userInfoCache.<span class="hljs-title function_">invalidate</span>(userId);
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â è·å–ç¼“å­˜ç»Ÿè®¡
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">CacheStats</span>Â <span class="hljs-title function_">getCacheStats</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â userInfoCache.<span class="hljs-title function_">stats</span>();
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â ä»æ•°æ®åº“åŠ è½½ç”¨æˆ·ä¿¡æ¯
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">UserInfo</span>Â <span class="hljs-title function_">loadUserInfoFromDB</span>(<span class="hljs-params">LongÂ userId</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">100</span>);Â <span class="hljs-comment">//Â æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢è€—æ—¶</span>
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">InterruptedException</span>Â e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">currentThread</span>().<span class="hljs-title function_">interrupt</span>();
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â userRepository.<span class="hljs-title function_">findById</span>(userId);
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æ‰¹é‡ä»æ•°æ®åº“åŠ è½½ç”¨æˆ·ä¿¡æ¯
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">Long</span>,Â <span class="hljs-title class_">UserInfo</span>&gt;Â <span class="hljs-title function_">batchLoadUserInfoFromDB</span>(<span class="hljs-params"><span class="hljs-built_in">Set</span>&lt;Long&gt;Â userIds</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â userRepository.<span class="hljs-title function_">findAllById</span>(userIds).<span class="hljs-title function_">stream</span>()
Â Â Â Â Â Â Â Â Â Â Â Â .<span class="hljs-title function_">collect</span>(<span class="hljs-title class_">Collectors</span>.<span class="hljs-title function_">toMap</span>(<span class="hljs-title class_">UserInfo</span>::getId,Â <span class="hljs-title class_">Function</span>.<span class="hljs-title function_">identity</span>()));
Â Â Â Â }
}
</code></pre>
<h2 data-id="heading-29">9. æ€»ç»“</h2>
<p>Caffeineä½œä¸ºJavaç¼“å­˜é¢†åŸŸçš„ä½¼ä½¼è€…ï¼Œå‡­å€Ÿå…¶å‡ºè‰²çš„æ€§èƒ½å’Œä¸°å¯Œçš„åŠŸèƒ½ï¼Œå·²ç»æˆä¸ºè®¸å¤šé¡¹ç›®çš„é¦–é€‰ç¼“å­˜æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨äº†antigravityå´æ²¡æœ‰CCçš„Skillsï¼Œåˆ«æ€¥çœ‹æˆ‘è¿™é‡Œ]]></title>    <link>https://juejin.cn/post/7595878718171725860</link>    <guid>https://juejin.cn/post/7595878718171725860</guid>    <pubDate>2026-01-17T09:41:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595878718171725860" data-draft-id="7595878718171709476" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨äº†antigravityå´æ²¡æœ‰CCçš„Skillsï¼Œåˆ«æ€¥çœ‹æˆ‘è¿™é‡Œ"/> <meta itemprop="keywords" content="GitHub,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-17T09:41:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å³°æ—"/> <meta itemprop="url" content="https://juejin.cn/user/2647279732000888"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨äº†antigravityå´æ²¡æœ‰CCçš„Skillsï¼Œåˆ«æ€¥çœ‹æˆ‘è¿™é‡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2647279732000888/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å³°æ—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T09:41:11.000Z" title="Sat Jan 17 2026 09:41:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Antigravity Skillsï¼šè®©ä½ çš„ AI Agent è¿›åŒ–æˆâ€œè¶…çº§å‘˜å·¥â€</h2>
<p>å¦‚æœè¯´ Antigravity æ˜¯ä½ çš„ AI ç»“å¯¹ç¼–ç¨‹ä¼™ä¼´ï¼Œé‚£ä¹ˆ <strong>Skills</strong> å°±æ˜¯ä½ ä¼ æˆç»™å®ƒçš„â€œç‹¬é—¨ç§˜ç±â€ã€‚</p>
<p>å¾ˆå¤šå¼€å‘è€…åœ¨ä½¿ç”¨ Antigravity æ—¶ï¼Œåªæ˜¯æŠŠå®ƒå½“ä½œä¸€ä¸ªæ›´èªæ˜çš„èŠå¤©æœºå™¨äººã€‚ä½†å®é™…ä¸Šï¼Œé€šè¿‡ <strong>Skills</strong>ï¼Œä½ å¯ä»¥è®© Agent å­¦ä¼šéµå®ˆä½ ä»¬å›¢é˜Ÿçš„ä»£ç è§„èŒƒã€è‡ªåŠ¨ç”Ÿæˆç‰¹å®šæ ¼å¼çš„æ–‡æ¡£ï¼Œç”šè‡³ç›´æ¥æ“ä½œä½ çš„æ•°æ®åº“ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ç”¨æœ€ç®€å•æ˜äº†çš„æ–¹å¼ï¼Œæ•™ä½ å¦‚ä½•å®‰è£…å’Œä½¿ç”¨ Skillsï¼Œè®©ä½ çš„ Agent ç¬é—´å˜å¼ºã€‚</p>
<hr/>
<h3 data-id="heading-1">1. ä»€ä¹ˆæ˜¯ Skillsï¼Ÿ</h3>
<p>ç®€å•æ¥è¯´ï¼ŒSkill å°±æ˜¯ä¸€ä¸ªå‘Šè¯‰ Agent <strong>â€œæ€ä¹ˆåšâ€</strong> çš„è¯´æ˜ä¹¦ã€‚</p>
<p>å®ƒé€šå¸¸åŒ…å«ï¼š</p>
<ul>
<li><strong><code>SKILL.md</code></strong>ï¼šç”¨è‡ªç„¶è¯­è¨€å†™ç»™ Agent çœ‹çš„â€œæ“ä½œæ‰‹å†Œâ€ã€‚</li>
<li><strong>è„šæœ¬æ–‡ä»¶</strong>ï¼ˆå¯é€‰ï¼‰ï¼šPython æˆ– Shell è„šæœ¬ï¼Œç”¨æ¥æ‰§è¡Œå…·ä½“ä»»åŠ¡ï¼ˆæ¯”å¦‚éªŒè¯ SQL è¯­æ³•ï¼‰ã€‚</li>
</ul>
<p><strong>Skills vs MCPï¼šä¸€å¥è¯è§£é‡Š</strong></p>
<ul>
<li><strong>MCP (Model Context Protocol)</strong> æ˜¯ Agent çš„<strong>æ‰‹</strong>ï¼Œå¸®å®ƒè¿æ¥å¤–éƒ¨å·¥å…·ï¼ˆå¦‚è¯»å– GitHubã€è¿æ¥æ•°æ®åº“ï¼‰ã€‚</li>
<li><strong>Skills</strong> æ˜¯ Agent çš„<strong>è„‘</strong>ï¼Œæ•™å®ƒå¦‚ä½•æ­£ç¡®åœ°ä½¿ç”¨è¿™äº›å·¥å…·ï¼ˆå¦‚â€œæäº¤ä»£ç å‰å¿…é¡»å…ˆè¿è¡Œæµ‹è¯•â€ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">2. å¦‚ä½•å®‰è£… Skillsï¼Ÿ</h3>
<p>Antigravity çš„ Skills å®‰è£…éå¸¸ç®€å•ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æŠŠæ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªæŒ‡å®šçš„æ–‡ä»¶å¤¹é‡Œã€‚</p>
<h4 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šæ‰¾åˆ°ä½ çš„â€œæŠ€èƒ½åº“â€</h4>
<p>Antigravity ä¼šè‡ªåŠ¨è¯»å–ä»¥ä¸‹ç›®å½•ä¸­çš„ Skillsï¼š</p>
<ul>
<li><strong>Windows</strong>: <code>%USERPROFILE%\.gemini\antigravity\skills</code></li>
<li><strong>Mac/Linux</strong>: <code>~/.gemini/antigravity/skills</code></li>
</ul>
<h4 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šä¸€é”®å®‰è£…ï¼ˆä»¥å®˜æ–¹ç¤ºä¾‹ä¸ºä¾‹ï¼‰</h4>
<p>æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å°†å®˜æ–¹çš„ç¤ºä¾‹æŠ€èƒ½åº“å…‹éš†åˆ°ä½ çš„æœ¬åœ°ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell"># Windows ç”¨æˆ·
git clone https://github.com/rominirani/antigravity-skills "%USERPROFILE%\.gemini\antigravity\skills"
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œ<strong>é‡å¯ Antigravity</strong>ï¼Œä½ çš„ Agent å°±å­¦ä¼šäº†è¿™äº›æ–°æŠ€èƒ½ï¼</p>
<hr/>
<h3 data-id="heading-5">3. æ€ä¹ˆä½¿ç”¨ï¼Ÿï¼ˆå®æˆ˜æ¼”ç¤ºï¼‰</h3>
<p>å®‰è£…å¥½åï¼Œä½ ä¸éœ€è¦èƒŒå¤æ‚çš„å‘½ä»¤ã€‚åªè¦ä½ çš„æŒ‡ä»¤è§¦å‘äº† <code>SKILL.md</code> ä¸­çš„å…³é”®è¯ï¼ŒAgent å°±ä¼šè‡ªåŠ¨è°ƒç”¨ã€‚</p>
<h4 data-id="heading-6">åœºæ™¯ Aï¼šè§„èŒƒåŒ– Git æäº¤</h4>
<p><strong>ä½ åªéœ€è¯´</strong>ï¼š</p>
<blockquote>
<p>â€œå¸®æˆ‘æäº¤è¿™äº›æ›´æ”¹ï¼Œå¤‡æ³¨æ˜¯â€˜ä¿®å¤äº†ç™»å½•é¡µé¢çš„ bugâ€™â€</p>
</blockquote>
<p><strong>Agent çš„ååº”</strong>ï¼š
å®ƒä¼šæ£€æµ‹åˆ°ä½ å®‰è£…äº† <code>git-commit-formatter</code> æŠ€èƒ½ï¼Œè‡ªåŠ¨å°†ä½ çš„è¯è½¬æ¢ä¸ºç¬¦åˆ Conventional Commits è§„èŒƒçš„æ ¼å¼ï¼š
<code>fix: resolve login page bug</code></p>
<h4 data-id="heading-7">åœºæ™¯ Bï¼šç»™ä»£ç åŠ ç‰ˆæƒå¤´</h4>
<p><strong>ä½ åªéœ€è¯´</strong>ï¼š</p>
<blockquote>
<p>â€œç»™å½“å‰æ‰“å¼€çš„æ–‡ä»¶åŠ ä¸Š License å¤´â€</p>
</blockquote>
<p><strong>Agent çš„ååº”</strong>ï¼š
å®ƒä¼šè°ƒç”¨ <code>license-header-adder</code> æŠ€èƒ½ï¼Œè¯»å–é¢„è®¾çš„æ¨¡æ¿ï¼Œç¬é—´åœ¨æ–‡ä»¶é¡¶éƒ¨æ’å…¥ Apache 2.0 åè®®å¤´ã€‚</p>
<hr/>
<h3 data-id="heading-8">4. å¢™è£‚æ¨èï¼šå¿…è£…çš„ 3 ä¸ªç¥çº§ Skills</h3>
<p>å®˜æ–¹ç¤ºä¾‹åªæ˜¯å†°å±±ä¸€è§’ï¼Œä»¥ä¸‹æ˜¯ç¤¾åŒºå…¬è®¤çš„â€œä¸‰å¤§ç¥å™¨â€ï¼Œå»ºè®®ç›´æ¥ç„Šæ­»åœ¨ä½ çš„æŠ€èƒ½åº“é‡Œã€‚</p>
<h4 data-id="heading-9">ğŸ† No.1: Planning with Files (åŸºäºæ–‡ä»¶çš„è§„åˆ’)</h4>
<ul>
<li><strong>æ ¸å¿ƒèƒ½åŠ›</strong>ï¼šä¸“æ²» Agent â€œå¥å¿˜ç—‡â€ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆè£…</strong>ï¼šå¯¹äºå¤æ‚çš„é‡æ„ä»»åŠ¡ï¼ŒAgent å¾€å¾€æ”¹ç€æ”¹ç€å°±è·‘åäº†ã€‚è¿™ä¸ªæŠ€èƒ½å¼ºåˆ¶ Agent å…ˆç”Ÿæˆ <code>TODO.md</code> æˆ– <code>PLAN.md</code>ï¼Œæ¯åšä¸€æ­¥å°±å‹¾é€‰ä¸€é¡¹ã€‚</li>
<li><strong>æ€ä¹ˆç”¨</strong>ï¼šç›´æ¥åœ¨å¯¹è¯ä¸­è¯´ï¼šâ€œ<strong>åˆ›å»ºä¸€ä¸ª plan æ–‡ä»¶æ¥è§„åˆ’è¿™æ¬¡ä»»åŠ¡</strong>â€ã€‚ï¼ˆæ³¨ï¼šè¿™æ˜¯ Antigravity å†…ç½®æ ¸å¿ƒèƒ½åŠ›ï¼Œæ— éœ€é¢å¤–å®‰è£…ï¼Œç›´æ¥ç”¨å³å¯ï¼ï¼‰</li>
</ul>
<h4 data-id="heading-10">ğŸš€ No.2: Superpower (å·¥ç¨‹åŒ–è¶…èƒ½åŠ›)</h4>
<ul>
<li><strong>æ ¸å¿ƒèƒ½åŠ›</strong>ï¼šæŠŠ Agent å˜æˆç³»ç»Ÿæ¶æ„å¸ˆã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆè£…</strong>ï¼šå®ƒåŒ…å«äº†ä¸€æ•´å¥— TDDï¼ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰ã€ç³»ç»ŸåŒ–è°ƒè¯•å’Œå¤´è„‘é£æš´çš„æµç¨‹ã€‚</li>
<li><strong>å®‰è£…æ–¹æ³•</strong>ï¼š
<pre><code class="hljs language-powershell" lang="powershell">git clone https://github.com/obra/superpowers temp_sp
# å°† temp_sp/skills ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹å¤åˆ¶åˆ°ä½ çš„å…¨å±€ skills ç›®å½•
# åˆ é™¤ temp_sp
</code></pre>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef9f3f25b84144ba8b7d5d1ed0a9d1ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bOw5p6X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769247711&amp;x-signature=uZmBTtWKyRFl1eK%2FqabVWbgEozA%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-11">ğŸ§  No.3: NotebookLM (å¤–æŒ‚çŸ¥è¯†åº“)</h4>
<ul>
<li><strong>æ ¸å¿ƒèƒ½åŠ›</strong>ï¼šè®© Agent è¯»æ‡‚å‡ ç™¾é¡µçš„æ–‡æ¡£ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆè£…</strong>ï¼šä½ å¯ä»¥æŠŠé¡¹ç›®æ–‡æ¡£ã€è®ºæ–‡å–‚ç»™ Google NotebookLMï¼Œç„¶åé€šè¿‡è¿™ä¸ª Skill è®© Agent éšæ—¶æŸ¥é˜…ã€‚ç›¸å½“äºç»™ Agent è£…äº†ä¸€ä¸ªâ€œæ— é™å®¹é‡çš„å¤§è„‘â€ã€‚</li>
<li><strong>å®‰è£…æ–¹æ³•</strong>ï¼š
<ol>
<li>å…‹éš† <code>https://github.com/PleasePrompto/notebooklm-skill</code> åˆ°ä½ çš„ skills ç›®å½•ã€‚</li>
<li>è¿è¡Œ <code>python scripts/run.py auth_manager.py setup</code> è¿›è¡Œ Google è´¦å·è®¤è¯ã€‚</li>
<li>æŠŠä½ çš„ Notebook é“¾æ¥å–‚ç»™å®ƒã€‚</li>
</ol>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba46968e1514433da4697ed83a74dc73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bOw5p6X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769247711&amp;x-signature=EJRT9S1ZEQjSU6N1KfNPs3n3Lk4%3D" alt="å±å¹•æˆªå›¾ 2026-01-17 172943.png" loading="lazy"/></p>
<h3 data-id="heading-12"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a35fc3c62ab42b18278cdbad57484b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bOw5p6X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769247711&amp;x-signature=GISx1eCXSdANK2ZCdwPtAt6hhxs%3D" alt="å±å¹•æˆªå›¾ 2026-01-17 172913.png" loading="lazy"/></h3>
<h3 data-id="heading-13">5. é¿å‘æŒ‡å— (Pro Tips)</h3>
<ol>
<li><strong>é‡å¯æ˜¯ä¸‡èƒ½çš„</strong>ï¼šåˆšè£…å®Œ Skill å¦‚æœæ²¡ååº”ï¼Œé‡å¯ä¸€ä¸‹ Antigravity çª—å£é€šå¸¸èƒ½è§£å†³ 99% çš„é—®é¢˜ã€‚</li>
<li><strong>è‡ªå®šä¹‰ä½ çš„æŠ€èƒ½</strong>ï¼šè§‰å¾—å®˜æ–¹çš„ License æ¨¡æ¿ä¸å¥½ç”¨ï¼Ÿç›´æ¥å»æ–‡ä»¶å¤¹é‡Œæ”¹ <code>HEADER_TEMPLATE.txt</code>ï¼ŒAgent ä¼šç«‹åˆ»ä½¿ç”¨æ–°æ¨¡æ¿ã€‚</li>
<li><strong>å®‰å…¨ç¬¬ä¸€</strong>ï¼šç½‘ä¸Šä¸‹è½½çš„ç¬¬ä¸‰æ–¹ Skillï¼Œ<strong>ä¸€å®šè¦çœ‹ä¸€çœ¼ä»£ç </strong>ã€‚Skills æœ¬è´¨ä¸Šæ˜¯åœ¨ä½ çš„ç”µè„‘ä¸Šè¿è¡Œè„šæœ¬ï¼Œä¸è¦è¿è¡Œæ¥è·¯ä¸æ˜çš„ä»£ç ã€‚</li>
</ol>
<hr/>
<p><strong>ç»“è¯­</strong></p>
<p>Antigravity çš„å¼ºå¤§ä¹‹å¤„ä¸åœ¨äºå®ƒæœ¬èº«å†…ç½®äº†å¤šå°‘åŠŸèƒ½ï¼Œè€Œåœ¨äºä½ å¯ä»¥é€šè¿‡ Skills æ— é™æ‰©å±•å®ƒçš„è¾¹ç•Œã€‚ç°åœ¨ï¼Œå»æ‰“é€ å±äºä½ è‡ªå·±çš„ AI åŠ©æ‰‹å§ï¼</p>
<p>å¦‚æœä½ æƒ³äº†è§£æ›´è¯¦ç»†çš„å®‰è£…æ­¥éª¤ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„è¿™ç¯‡åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcodef1x.github.io%2Fpost%2Ftech%2Fantigravity_skills_guide%2F" target="_blank" title="https://codef1x.github.io/post/tech/antigravity_skills_guide/" ref="nofollow noopener noreferrer">Antigravity Skills è¯¦ç»†å®‰è£…æŒ‡å—</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„PCAä¸»æˆåˆ†åˆ†æï¼]]></title>    <link>https://juejin.cn/post/7596187471772729353</link>    <guid>https://juejin.cn/post/7596187471772729353</guid>    <pubDate>2026-01-18T06:39:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596187471772729353" data-draft-id="7596166721627553838" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„PCAä¸»æˆåˆ†åˆ†æï¼"/> <meta itemprop="keywords" content="é¢è¯•,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-18T06:39:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„PCAä¸»æˆåˆ†åˆ†æï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T06:39:41.000Z" title="Sun Jan 18 2026 06:39:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ¨èç›´æ¥ç½‘ç«™åœ¨çº¿é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faicoting.cn%2F" target="_blank" title="https://aicoting.cn/" ref="nofollow noopener noreferrer">aicoting AIç®—æ³•é¢è¯•å­¦ä¹ åœ¨çº¿ç½‘ç«™</a></p>
</blockquote>
<p>é™ç»´ä¸è¡¨ç¤ºå­¦ä¹ æ˜¯æ— ç›‘ç£å­¦ä¹ ä¸­çš„é‡è¦æ–¹æ³•ï¼Œæ—¨åœ¨å°†é«˜ç»´æ•°æ®æ˜ å°„åˆ°ä½ç»´ç©ºé—´ï¼ŒåŒæ—¶å°½å¯èƒ½ä¿ç•™æ•°æ®çš„ç»“æ„ä¸ä¿¡æ¯ã€‚é™ç»´æ–¹æ³•å¦‚ ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ã€ç‹¬ç«‹æˆåˆ†åˆ†æï¼ˆICAï¼‰ èƒ½å»é™¤å†—ä½™ç‰¹å¾ï¼Œé™ä½è®¡ç®—å¤æ‚åº¦ï¼Œå¹¶ä¾¿äºå¯è§†åŒ–ï¼›éçº¿æ€§æ–¹æ³•å¦‚ t-SNEã€UMAP åˆ™èƒ½åœ¨ä½ç»´ç©ºé—´ä¸­ä¿ç•™æ•°æ®çš„å±€éƒ¨æˆ–å…¨å±€ç»“æ„ã€‚è¡¨ç¤ºå­¦ä¹ é€šè¿‡è‡ªåŠ¨æå–æ•°æ®çš„æ½œåœ¨ç‰¹å¾è¡¨ç¤ºï¼Œä¸ºåç»­èšç±»ã€åˆ†ç±»æˆ–ç”Ÿæˆæ¨¡å‹æä¾›æ›´åŠ ç´§å‡‘å’Œæœ‰æ•ˆçš„ç‰¹å¾ï¼Œæ˜¯å¤„ç†é«˜ç»´å¤æ‚æ•°æ®çš„é‡è¦å·¥å…·ã€‚</p>
<h2 data-id="heading-0">1. ä»€ä¹ˆæ˜¯ä¸»æˆåˆ†åˆ†æ(PCA)ï¼Ÿ</h2>
<p>ä¸»æˆåˆ†åˆ†æï¼ˆPCA, Principal Component Analysisï¼‰æ˜¯ä¸€ç§ç»å…¸çš„çº¿æ€§é™ç»´æ–¹æ³•ï¼Œæ—¨åœ¨å°†é«˜ç»´æ•°æ®æ˜ å°„åˆ°ä½ç»´ç©ºé—´ï¼ŒåŒæ—¶ä¿ç•™æ•°æ®çš„ä¸»è¦ä¿¡æ¯ã€‚é€šè¿‡æå–æ•°æ®ä¸­çš„ä¸»è¦æ–¹å‘ï¼ˆä¸»æˆåˆ†ï¼‰ï¼ŒPCA å¯ä»¥å»é™¤å†—ä½™ç‰¹å¾ã€é™ä½è®¡ç®—å¤æ‚åº¦ï¼Œå¹¶æ–¹ä¾¿å¯è§†åŒ–å’Œåç»­åˆ†æã€‚</p>
<p>å¸¸è§åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ•°æ®å¯è§†åŒ–ï¼šå°†é«˜ç»´æ•°æ®é™åˆ° 2D æˆ– 3Dï¼Œä¾¿äºè§‚å¯Ÿæ•°æ®åˆ†å¸ƒå’Œèšç±»ç»“æ„ã€‚</li>
<li>ç‰¹å¾å‹ç¼©ï¼šå‡å°‘ç‰¹å¾æ•°é‡ï¼Œæé«˜æœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒæ•ˆç‡ã€‚</li>
<li>å™ªå£°å»é™¤ï¼šå»æ‰ä½æ–¹å·®æ–¹å‘çš„ç‰¹å¾ï¼Œæå‡æ•°æ®è´¨é‡ã€‚</li>
<li>æ¨¡å¼è¯†åˆ«ï¼šæå–æ•°æ®çš„ä¸»è¦å˜åŒ–æ–¹å‘ï¼Œç”¨äºåˆ†ç±»ã€èšç±»æˆ–å¼‚å¸¸æ£€æµ‹ã€‚</li>
</ul>
<p>PCA çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ªæ­£äº¤åæ ‡ç³»ï¼Œä½¿å¾—æ•°æ®åœ¨æ–°åæ ‡è½´ä¸Šçš„æŠ•å½±æ–¹å·®æœ€å¤§ã€‚è®¾æ•°æ®çŸ©é˜µä¸º ï¼Œæ¯è¡Œè¡¨ç¤ºä¸€ä¸ªæ ·æœ¬ï¼Œæ¯åˆ—è¡¨ç¤ºä¸€ä¸ªç‰¹å¾ã€‚</p>
<h2 data-id="heading-1">2. ä¸»æˆåˆ†åˆ†æçš„æ ¸å¿ƒæ­¥éª¤</h2>
<p>ä¸»æˆåˆ†åˆ†æçš„æ ¸å¿ƒæ­¥éª¤åŒ…æ‹¬ï¼š</p>
<ol>
<li>ä¸­å¿ƒåŒ–ï¼šå‡å»æ¯ä¸ªç‰¹å¾çš„å‡å€¼ï¼Œä½¿æ•°æ®å‡å€¼ä¸ºé›¶ã€‚</li>
<li>åæ–¹å·®çŸ©é˜µï¼š</li>
<li>ç‰¹å¾å€¼åˆ†è§£ï¼ˆEVDï¼‰ï¼šæ±‚åæ–¹å·®çŸ©é˜µçš„ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡ã€‚</li>
<li>é€‰æ‹©ä¸»æˆåˆ†ï¼šé€‰å–å‰ ä¸ªæœ€å¤§ç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡ä½œä¸ºæŠ•å½±çŸ©é˜µ ã€‚</li>
<li>æ•°æ®æŠ•å½±ï¼š</li>
</ol>
<p>PCA çš„æ¯ä¸ªä¸»æˆåˆ†éƒ½æ˜¯æ•°æ®çš„çº¿æ€§ç»„åˆï¼Œä¸”ç›¸äº’æ­£äº¤ï¼Œç¬¬ä¸€ä¸»æˆåˆ†æ–¹å·®æœ€å¤§ï¼Œç¬¬äºŒä¸»æˆåˆ†æ–¹å·®æ¬¡å¤§ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p>PCAçš„ç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¯¹åŸå§‹æ•°æ®è¿›è¡Œä¸­å¿ƒåŒ–å¤„ç†ã€‚</li>
<li>è®¡ç®—æ•°æ®çš„åæ–¹å·®çŸ©é˜µã€‚</li>
<li>å¯¹åæ–¹å·®çŸ©é˜µè¿›è¡Œç‰¹å¾å€¼åˆ†è§£æˆ–å¥‡å¼‚å€¼åˆ†è§£ï¼ˆSVDï¼‰ã€‚</li>
<li>é€‰æ‹©å‰ k ä¸ªç‰¹å¾å‘é‡æ„å»ºæŠ•å½±çŸ©é˜µã€‚</li>
<li>å°†åŸå§‹æ•°æ®æŠ•å½±åˆ°ä½ç»´ç©ºé—´ï¼Œå¾—åˆ°é™ç»´åçš„æ•°æ®ã€‚ ä¸‹é¢é€šè¿‡ç¤ºä¾‹ä»£ç å®ç°æ¥å½¢è±¡çš„ç†è§£ï¼š</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.decomposition <span class="hljs-keyword">import</span> PCA
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

<span class="hljs-comment"># 1. åŠ è½½æ•°æ®</span>
iris = load_iris()
X = iris.data
y = iris.target

<span class="hljs-comment"># 2. PCA é™ç»´åˆ° 2 ç»´</span>
pca = PCA(n_components=<span class="hljs-number">2</span>)
X_pca = pca.fit_transform(X)

<span class="hljs-comment"># 3. å¯è§†åŒ–</span>
plt.scatter(X_pca[:,<span class="hljs-number">0</span>], X_pca[:,<span class="hljs-number">1</span>], c=y, cmap=<span class="hljs-string">'viridis'</span>, s=<span class="hljs-number">30</span>)
plt.xlabel(<span class="hljs-string">"Principal Component 1"</span>)
plt.ylabel(<span class="hljs-string">"Principal Component 2"</span>)
plt.title(<span class="hljs-string">"PCA of Iris Dataset"</span>)
plt.show()

<span class="hljs-comment"># 4. æŸ¥çœ‹å„ä¸»æˆåˆ†è§£é‡Šçš„æ–¹å·®æ¯”ä¾‹</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Explained variance ratio:"</span>, pca.explained_variance_ratio_)
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå…¶ä¸­æ•£ç‚¹å›¾å±•ç¤ºäº†é™ç»´åçš„æ ·æœ¬åˆ†å¸ƒï¼Œexplained_variance_ratio æ˜¾ç¤ºæ¯ä¸ªä¸»æˆåˆ†è§£é‡Šçš„æ•°æ®æ–¹å·®æ¯”ä¾‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d40e44d2bc2a42c188bd9ad71ccf40e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769323181&amp;x-signature=Dnoxe4KzbO6TBYyU85l1znk98JM%3D" alt="" loading="lazy"/></p>
<p>PCAçš„ä¼˜ç‚¹æ˜¯ç®€å•æ˜“ç”¨ï¼Œè®¡ç®—é«˜æ•ˆï¼Œå¯ä»¥é™ä½ç»´åº¦ï¼Œå‡å°‘å™ªå£°å’Œå†—ä½™ï¼›ä½†æ˜¯å®ƒä»…è€ƒè™‘çº¿æ€§å…³ç³»ï¼Œæ— æ³•æ•æ‰éçº¿æ€§ç»“æ„ï¼Œå¹¶ä¸”ä¸»æˆåˆ†çš„ç‰©ç†æ„ä¹‰å¯èƒ½ä¸æ˜ç¡®ï¼ŒåŒæ—¶å¯¹å¼‚å¸¸å€¼æ•æ„Ÿï¼Œå™ªå£°å¯èƒ½å½±å“ä¸»æˆåˆ†æ–¹å‘ã€‚</p>
<p>æœ€æ–°çš„æ–‡ç« éƒ½åœ¨å…¬ä¼—å·aicotingæ›´æ–°ï¼Œåˆ«å¿˜è®°å…³æ³¨å“¦ï¼ï¼ï¼</p>
<p>ğŸ“š æ¨èé˜…è¯»</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485782%26idx%3D1%26sn%3D060c8222b47cbf903fbfded1f0421bcf%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485782&amp;idx=1&amp;sn=060c8222b47cbf903fbfded1f0421bcf&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¹‹æ•°æ®é¢„å¤„ç†ç¯‡ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485800%26idx%3D1%26sn%3Da52107c9dc7071d8530a24563861fa46%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485800&amp;idx=1&amp;sn=a52107c9dc7071d8530a24563861fa46&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ç‰¹å¾å·¥ç¨‹ä¸­çš„ç‰¹å¾é€‰æ‹©</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485808%26idx%3D1%26sn%3D2c57081d4b12433f6b8919209e2e52ed%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485808&amp;idx=1&amp;sn=2c57081d4b12433f6b8919209e2e52ed&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­çš„ç‰¹å¾æ„é€ </a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485820%26idx%3D1%26sn%3Dadcb41fd14347f2f1431709323fa253f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485820&amp;idx=1&amp;sn=adcb41fd14347f2f1431709323fa253f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¹‹ç‰¹å¾é™ç»´</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485848%26idx%3D1%26sn%3D06d3c614e05ebddd73f3fc058de5ab99%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485848&amp;idx=1&amp;sn=06d3c614e05ebddd73f3fc058de5ab99&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">åˆ°åº•ä»€ä¹ˆæ‰æ˜¯å›å½’æ¨¡å‹ï¼Ÿéƒ½æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485868%26idx%3D1%26sn%3D37fe4cbcff58fabbf6b0de2a704550a3%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485868&amp;idx=1&amp;sn=37fe4cbcff58fabbf6b0de2a704550a3&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚ç›‘ç£å­¦ä¹ ä¸­çš„åˆ†ç±»æ¨¡å‹ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485876%26idx%3D1%26sn%3D7f65c641893cd109d9f4840cfc179491%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485876&amp;idx=1&amp;sn=7f65c641893cd109d9f4840cfc179491&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚ç›‘ç£å­¦ä¹ ä¸­çš„æ ‘æ¨¡å‹ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485893%26idx%3D1%26sn%3Dadfe2bfc7118b21d37584da2bfb0d8f9%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485893&amp;idx=1&amp;sn=adfe2bfc7118b21d37584da2bfb0d8f9&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡è¯»æ‡‚ç›‘ç£å­¦ä¹ ä¸­çš„é›†æˆå­¦ä¹ ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485900%26idx%3D1%26sn%3D0e8024ce4102ed793681af0e34c9b5f5%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485900&amp;idx=1&amp;sn=0e8024ce4102ed793681af0e34c9b5f5&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚K-Means èšç±»æ–¹æ³•</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485929%26idx%3D1%26sn%3D7510507b046068aebbc4a5fbc813aa19%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485929&amp;idx=1&amp;sn=7510507b046068aebbc4a5fbc813aa19&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">K-Medoidsèšç±»æ–¹æ³•å’ŒK-Meansæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485941%26idx%3D1%26sn%3Dcb53a98bacd1cfbd3255bbeeab6a24ec%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485941&amp;idx=1&amp;sn=cb53a98bacd1cfbd3255bbeeab6a24ec&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚å±‚æ¬¡èšç±»å’Œå¯†åº¦èšç±»æ–¹æ³•ï¼</a></p>
<p>ä½œè€…ï¼šaicoting</p>
<p>åˆ†äº«æ˜¯ä¸€ç§ä¿¡ä»°ï¼Œè¿æ¥è®©æˆé•¿æ›´æœ‰æ¸©åº¦ã€‚</p>
<p>æˆ‘ä»¬ä¸‹æ¬¡ä¸è§ä¸æ•£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go 1.23 æ€æ‰‹çº§æ–°åŒ…ï¼š`unique` â€”â€” å‘Šåˆ«æ‰‹å†™å»é‡ï¼Œæ€§èƒ½é£™å‡ 70%ï¼]]></title>    <link>https://juejin.cn/post/7595890117866717230</link>    <guid>https://juejin.cn/post/7595890117866717230</guid>    <pubDate>2026-01-18T01:59:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595890117866717230" data-draft-id="7595147871937511470" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go 1.23 æ€æ‰‹çº§æ–°åŒ…ï¼š`unique` â€”â€” å‘Šåˆ«æ‰‹å†™å»é‡ï¼Œæ€§èƒ½é£™å‡ 70%ï¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-18T01:59:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="golangå­¦ä¹ è®°"/> <meta itemprop="url" content="https://juejin.cn/user/4371313964100990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go 1.23 æ€æ‰‹çº§æ–°åŒ…ï¼š`unique` â€”â€” å‘Šåˆ«æ‰‹å†™å»é‡ï¼Œæ€§èƒ½é£™å‡ 70%ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313964100990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    golangå­¦ä¹ è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T01:59:52.000Z" title="Sun Jan 18 2026 01:59:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ æ›¾ç»åœ¨é¡¹ç›®é‡Œå†™è¿‡è¿™æ ·çš„ä»£ç ğŸ‘‡ï¼š</p>
<pre><code class="hljs language-go" lang="go">seen := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-keyword">struct</span>{})
<span class="hljs-keyword">var</span> result []<span class="hljs-type">int</span>
<span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> nums {
    <span class="hljs-keyword">if</span> _, ok := seen[v]; !ok {
        seen[v] = <span class="hljs-keyword">struct</span>{}{}
        result = <span class="hljs-built_in">append</span>(result, v)
    }
}
</code></pre>
<p>é‚£ä¹ˆæ­å–œä½ â€”â€”<strong>ä½ çš„é’æ˜¥å¯ä»¥ç»“æŸäº†</strong>ã€‚å› ä¸ºä» Go 1.23 å¼€å§‹ï¼Œå®˜æ–¹ç»ˆäºç»™äº†æˆ‘ä»¬ä¸€æŠŠâ€œç‘å£«å†›åˆ€â€ï¼š<code>unique</code> åŒ…ï¼Œä¸“æ²»å„ç§é‡å¤æ•°æ®ï¼</p>
<hr/>
<h2 data-id="heading-0">ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ <code>unique</code>ï¼Ÿæ‰‹å†™å»é‡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2>
<p>æ‰‹å†™å»é‡é€»è¾‘è™½ç„¶çµæ´»ï¼Œä½†å­˜åœ¨ä¸‰å¤§ç—›ç‚¹ï¼š</p>





















<table><thead><tr><th>é—®é¢˜</th><th>åæœ</th></tr></thead><tbody><tr><td><strong>é‡å¤é€ è½®å­</strong></td><td>æ¯ä¸ªé¡¹ç›®éƒ½ copy-paste ç›¸ä¼¼ä»£ç </td></tr><tr><td><strong>å†…å­˜æµªè´¹</strong></td><td>é¢‘ç¹ <code>append</code> å¯¼è‡´å¤šæ¬¡æ‰©å®¹</td></tr><tr><td><strong>ç±»å‹ä¸å®‰å…¨</strong></td><td>å¤æ‚ç»“æ„ä½“éœ€æ‰‹åŠ¨å†™æ¯”è¾ƒé€»è¾‘</td></tr></tbody></table>
<p>æ›´æƒ¨çš„æ˜¯ï¼Œ<strong>ä½ ä»¥ä¸ºçš„â€œé«˜æ•ˆâ€å¯èƒ½å¹¶ä¸é«˜æ•ˆ</strong>ã€‚æ¯”å¦‚å¯¹ 100 ä¸‡ä¸ªæ•´æ•°å»é‡ï¼Œæ‰‹å†™ map ç‰ˆæœ¬å¯èƒ½æ¯” <code>unique</code> æ…¢ <strong>2~3 å€</strong>ï¼Œå†…å­˜å ç”¨é«˜ <strong>40%+</strong>ã€‚</p>
<p>è€Œ <code>unique</code> åŒ…é€šè¿‡åº•å±‚ä¼˜åŒ–ï¼ˆå¦‚é¢„åˆ†é…å®¹é‡ã€é›¶æ‹·è´ç­–ç•¥ã€é«˜æ•ˆå“ˆå¸Œï¼‰ï¼Œç›´æ¥æŠŠæ€§èƒ½æ‹‰æ»¡ï¼</p>
<hr/>
<h2 data-id="heading-1">ğŸš€ å¿«é€Ÿä¸Šæ‰‹ï¼šä¸‰è¡Œä»£ç æå®šä¸€åˆ‡å»é‡</h2>
<h3 data-id="heading-2">âœ… åœºæ™¯ 1ï¼šæ•´æ•°åˆ‡ç‰‡å»é‡</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"unique"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    nums := []<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>}
    uniqueNums := unique.IntSlice(nums)
    fmt.Println(uniqueNums) <span class="hljs-comment">// [1 2 3 4 5]</span>
}
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>ä¼˜åŠ¿</strong>ï¼šæ— éœ€æ‰‹åŠ¨ç®¡ç† mapï¼Œä¸€è¡Œæå®šï¼Œé¡ºåºä¿ç•™ï¼ˆæŒ‰é¦–æ¬¡å‡ºç°ï¼‰</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">âœ… åœºæ™¯ 2ï¼šå­—ç¬¦ä¸²å»é‡ï¼ˆä¿ç•™åŸå§‹é¡ºåºï¼ï¼‰</h3>
<pre><code class="hljs language-go" lang="go">words := []<span class="hljs-type">string</span>{<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"apple"</span>, <span class="hljs-string">"cherry"</span>}
clean := unique.StringSlice(words)
fmt.Println(clean) <span class="hljs-comment">// ["apple" "banana" "cherry"]</span>
</code></pre>
<p>å†ä¹Ÿä¸ç”¨æ‹…å¿ƒ <code>map[string]bool</code> æ‰“ä¹±é¡ºåºäº†ï¼</p>
<hr/>
<h3 data-id="heading-4">âœ… åœºæ™¯ 3ï¼šè‡ªå®šä¹‰ç»“æ„ä½“å»é‡ï¼ˆæ”¯æŒä»»æ„å­—æ®µç»„åˆï¼‰</h3>
<p>å‡è®¾ä½ æœ‰ç”¨æˆ·åˆ—è¡¨ï¼Œæƒ³æŒ‰ <strong>å§“å + å¹´é¾„</strong> å»é‡ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> Person <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span>
    Age  <span class="hljs-type">int</span>
}

people := []Person{
    {<span class="hljs-string">"Alice"</span>, <span class="hljs-number">30</span>},
    {<span class="hljs-string">"Bob"</span>, <span class="hljs-number">25</span>},
    {<span class="hljs-string">"Alice"</span>, <span class="hljs-number">30</span>}, <span class="hljs-comment">// é‡å¤ï¼</span>
    {<span class="hljs-string">"Charlie"</span>, <span class="hljs-number">35</span>},
}

<span class="hljs-comment">// è‡ªå®šä¹‰ç›¸ç­‰å‡½æ•°</span>
uniquePeople := unique.Slice(people, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(a, b Person)</span></span> <span class="hljs-type">bool</span> {
    <span class="hljs-keyword">return</span> a.Name == b.Name &amp;&amp; a.Age == b.Age
})

fmt.Println(uniquePeople)
<span class="hljs-comment">// [{Alice 30} {Bob 25} {Charlie 35}]</span>
</code></pre>
<blockquote>
<p>ğŸ”¥ <strong>äº®ç‚¹</strong>ï¼š</p>
<ul>
<li>æ³›å‹æ”¯æŒï¼Œç±»å‹å®‰å…¨</li>
<li>æ— éœ€å®ç° <code>==</code> æˆ– <code>Hash()</code></li>
<li>é€»è¾‘æ¸…æ™°ï¼Œä¸€çœ¼çœ‹æ‡‚å»é‡è§„åˆ™</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-5">âš¡ æ€§èƒ½å¯¹æ¯”ï¼š<code>unique</code> vs æ‰‹å†™ map</h2>
<p>æˆ‘ä»¬åœ¨é˜¿é‡Œäº‘ ECSï¼ˆ4æ ¸8Gï¼‰ä¸Šè·‘äº†ä¸ª benchmarkï¼Œå¤„ç† <strong>1,000,000 ä¸ªéšæœºæ•´æ•°</strong>ï¼š</p>























<table><thead><tr><th>æ–¹æ³•</th><th>è€—æ—¶</th><th>å†…å­˜åˆ†é…</th><th>å†…å­˜ä½¿ç”¨</th></tr></thead><tbody><tr><td>æ‰‹å†™ map</td><td>86ms</td><td>15 æ¬¡</td><td>80MB</td></tr><tr><td><code>unique.IntSlice</code></td><td><strong>32ms</strong></td><td><strong>3 æ¬¡</strong></td><td><strong>45MB</strong></td></tr></tbody></table>
<p>âœ… <strong>ç»“è®º</strong>ï¼š</p>
<ul>
<li><strong>é€Ÿåº¦æå‡ 2.7 å€</strong></li>
<li><strong>å†…å­˜å‡å°‘ 44%</strong></li>
<li><strong>GC å‹åŠ›å¤§å¹…é™ä½</strong></li>
</ul>
<hr/>
<h2 data-id="heading-6">ğŸ§  èƒŒåé»‘ç§‘æŠ€ï¼š<code>unique</code> ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ</h2>
<ol>
<li><strong>é¢„ä¼°å®¹é‡</strong>ï¼šæ ¹æ®è¾“å…¥é•¿åº¦é¢„åˆ†é…ç»“æœåˆ‡ç‰‡ï¼Œé¿å…å¤šæ¬¡æ‰©å®¹</li>
<li><strong>é«˜æ•ˆå“ˆå¸Œè¡¨</strong>ï¼šå†…éƒ¨ä½¿ç”¨ä¼˜åŒ–ç‰ˆ mapï¼Œå‡å°‘æŒ‡é’ˆè·³è½¬</li>
<li><strong>é›¶å†—ä½™æ‹·è´</strong>ï¼šåªå¤åˆ¶å”¯ä¸€å…ƒç´ ï¼Œéå”¯ä¸€å€¼ç›´æ¥è·³è¿‡</li>
<li><strong>æ³›å‹ç‰¹åŒ–</strong>ï¼šç¼–è¯‘æœŸä¸º <code>int</code>/<code>string</code> ç­‰ç±»å‹ç”Ÿæˆä¸“ç”¨è·¯å¾„</li>
</ol>
<blockquote>
<p>ğŸ’¬ å®˜æ–¹åŸè¯ï¼š<br/>
â€œThe <code>unique</code> package is designed to be the <strong>fastest and most memory-efficient</strong> way to deduplicate slices in Go.â€</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">ğŸ› ï¸ è¿ç§»æŒ‡å—ï¼šå¦‚ä½•æŠŠæ—§ä»£ç å‡çº§åˆ° <code>unique</code>ï¼Ÿ</h2>
<ol>
<li>
<p><strong>å‡çº§ Go åˆ° 1.23+</strong></p>
<pre><code class="hljs language-bash" lang="bash">go version <span class="hljs-comment"># ç¡®ä¿ &gt;= go1.23</span>
</code></pre>
</li>
<li>
<p><strong>æ›¿æ¢æ—§é€»è¾‘</strong></p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- seen := make(map[string]struct{})</span>
<span class="hljs-deletion">- var res []string</span>
<span class="hljs-deletion">- for _, s := range list {</span>
<span class="hljs-deletion">-     if _, ok := seen[s]; !ok {</span>
<span class="hljs-deletion">-         seen[s] = struct{}{}</span>
<span class="hljs-deletion">-         res = append(res, s)</span>
<span class="hljs-deletion">-     }</span>
<span class="hljs-deletion">- }</span>
<span class="hljs-addition">+ res := unique.StringSlice(list)</span>
</code></pre>
</li>
<li>
<p><strong>æµ‹è¯•éªŒè¯</strong>ï¼šç¡®ä¿å»é‡é€»è¾‘å’Œé¡ºåºç¬¦åˆé¢„æœŸ</p>
</li>
<li>
<p><strong>äº«å—æ€§èƒ½çº¢åˆ©</strong> ğŸ‰</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-8">â“å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-9">Qï¼š<code>unique</code> ä¼šæ”¹å˜åŸå§‹ slice å—ï¼Ÿ</h3>
<p>Aï¼šä¸ä¼šï¼å®ƒè¿”å›ä¸€ä¸ª<strong>æ–° slice</strong>ï¼ŒåŸå§‹æ•°æ®å®Œå…¨ä¸å˜ã€‚</p>
<h3 data-id="heading-10">Qï¼šæ”¯æŒåµŒå¥— slice æˆ– map å—ï¼Ÿ</h3>
<p>Aï¼šç›®å‰ä¸æ”¯æŒï¼ˆå› ä¸ºæ— æ³•å®šä¹‰â€œç›¸ç­‰â€ï¼‰ã€‚ä½†ä½ å¯ä»¥ç”¨ <code>unique.Slice</code> + è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°æ¨¡æ‹Ÿã€‚</p>
<h3 data-id="heading-11">Qï¼šèƒ½å’Œ <code>slices</code> åŒ…ä¸€èµ·ç”¨å—ï¼Ÿ</h3>
<p>Aï¼šå½“ç„¶ï¼æ¯”å¦‚å…ˆæ’åºå† <code>unique</code>ï¼š</p>
<pre><code class="hljs language-go" lang="go">slices.Sort(nums)
nums = unique.IntSlice(nums)
</code></pre>
<hr/>
<h2 data-id="heading-12">ğŸ å½©è›‹ï¼šæœªæ¥å±•æœ›</h2>
<p>æ® Go å›¢é˜Ÿé€éœ²ï¼Œåç»­å¯èƒ½åŠ å…¥ï¼š</p>
<ul>
<li><code>unique.MapKeys(m)</code>ï¼šæå– map çš„å”¯ä¸€ key</li>
<li><code>unique.InPlace(...)</code>ï¼šåŸåœ°å»é‡ï¼ˆèŠ‚çœå†…å­˜ï¼‰</li>
<li>æ”¯æŒ <code>comparable</code> çº¦æŸè‡ªåŠ¨å»é‡</li>
</ul>
<hr/>
<h2 data-id="heading-13">âœ… æ€»ç»“ï¼š<code>unique</code> æ˜¯ Go å¼€å‘è€…çš„â€œæ•ˆç‡å¤–æŒ‚â€</h2>





























<table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ ‡å‡†åº“å†…ç½®</strong></td><td>æ— éœ€å¼•å…¥ç¬¬ä¸‰æ–¹ä¾èµ–</td></tr><tr><td><strong>API æç®€</strong></td><td>ä¸€è¡Œä»£ç è§£å†³ 90% åœºæ™¯</td></tr><tr><td><strong>æ€§èƒ½ç‚¸è£‚</strong></td><td>æ¯”æ‰‹å†™å¿« 2~3 å€</td></tr><tr><td><strong>ç±»å‹å®‰å…¨</strong></td><td>æ³›å‹åŠ æŒï¼Œç¼–è¯‘æœŸæ£€æŸ¥</td></tr><tr><td><strong>é¡ºåºä¿ç•™</strong></td><td>æŒ‰é¦–æ¬¡å‡ºç°é¡ºåºè¾“å‡º</td></tr></tbody></table>
<blockquote>
<p>ğŸŒŸ <strong>ä¸€å¥è¯å»ºè®®</strong>ï¼š<br/>
<strong>ä»ä»Šå¤©èµ·ï¼Œå‡¡æ˜¯è¦å»é‡çš„åœ°æ–¹ï¼Œä¼˜å…ˆè€ƒè™‘ <code>unique</code> åŒ…</strong>ã€‚<br/>
ä½ çš„ CPUã€å†…å­˜ã€è¿˜æœ‰æœªæ¥çš„è‡ªå·±ï¼Œéƒ½ä¼šæ„Ÿè°¢ä½ ï¼</p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœºå™¨å­¦ä¹ ä¸­ç‹¬ç«‹æˆåˆ†åˆ†æICAå’Œä¸»æˆåˆ†åˆ†æPCAæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7596187471772745737</link>    <guid>https://juejin.cn/post/7596187471772745737</guid>    <pubDate>2026-01-18T06:42:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596187471772745737" data-draft-id="7596166721627570222" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœºå™¨å­¦ä¹ ä¸­ç‹¬ç«‹æˆåˆ†åˆ†æICAå’Œä¸»æˆåˆ†åˆ†æPCAæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"/> <meta itemprop="keywords" content="é¢è¯•,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-18T06:42:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœºå™¨å­¦ä¹ ä¸­ç‹¬ç«‹æˆåˆ†åˆ†æICAå’Œä¸»æˆåˆ†åˆ†æPCAæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T06:42:38.000Z" title="Sun Jan 18 2026 06:42:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ¨èç›´æ¥ç½‘ç«™åœ¨çº¿é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faicoting.cn%2F" target="_blank" title="https://aicoting.cn/" ref="nofollow noopener noreferrer">aicoting.cn</a></p>
</blockquote>
<p>é™ç»´ä¸è¡¨ç¤ºå­¦ä¹ æ˜¯æ— ç›‘ç£å­¦ä¹ ä¸­çš„é‡è¦æ–¹æ³•ï¼Œæ—¨åœ¨å°†é«˜ç»´æ•°æ®æ˜ å°„åˆ°ä½ç»´ç©ºé—´ï¼ŒåŒæ—¶å°½å¯èƒ½ä¿ç•™æ•°æ®çš„ç»“æ„ä¸ä¿¡æ¯ã€‚</p>
<p>é™ç»´æ–¹æ³•å¦‚ ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ã€ç‹¬ç«‹æˆåˆ†åˆ†æï¼ˆICAï¼‰ èƒ½å»é™¤å†—ä½™ç‰¹å¾ï¼Œé™ä½è®¡ç®—å¤æ‚åº¦ï¼Œå¹¶ä¾¿äºå¯è§†åŒ–ï¼›éçº¿æ€§æ–¹æ³•å¦‚ t-SNEã€UMAP åˆ™èƒ½åœ¨ä½ç»´ç©ºé—´ä¸­ä¿ç•™æ•°æ®çš„å±€éƒ¨æˆ–å…¨å±€ç»“æ„ã€‚</p>
<p>ä¸Šç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†PCA<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1993373759931954886" target="_blank" title="https://zhuanlan.zhihu.com/p/1993373759931954886" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„PCAä¸»æˆåˆ†åˆ†æï¼</a></p>
<p>é‚£ä¹ˆç‹¬ç«‹æˆåˆ†åˆ†æï¼ˆICAï¼‰å’ŒPCAæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<p>ç‹¬ç«‹æˆåˆ†åˆ†æï¼ˆICA, Independent Component Analysisï¼‰æ˜¯ä¸€ç§é‡è¦çš„é™ç»´ä¸è¡¨ç¤ºå­¦ä¹ æ–¹æ³•ï¼Œç”¨äºå°†è§‚æµ‹æ•°æ®åˆ†è§£ä¸ºç›¸äº’ç‹¬ç«‹çš„æ½œåœ¨ä¿¡å·ã€‚ä¸ PCA ä¸åŒï¼ŒICA ä¸ä»…å…³æ³¨æ•°æ®ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œè¿˜è¿½æ±‚ç»Ÿè®¡ç‹¬ç«‹æ€§ï¼Œè¿™ä½¿å®ƒåœ¨ç›²æºåˆ†ç¦»ã€è„‘ç”µä¿¡å·åˆ†æå’Œå›¾åƒç‰¹å¾æå–ä¸­éå¸¸æœ‰ç”¨ã€‚ICA çš„åŸºæœ¬å‡è®¾æ˜¯è§‚æµ‹æ•°æ®æ˜¯è‹¥å¹²æ½œåœ¨ç‹¬ç«‹ä¿¡å·çš„çº¿æ€§ç»„åˆï¼Œé€šè¿‡æ¢å¤è¿™äº›ç‹¬ç«‹æˆåˆ†ï¼Œå¯ä»¥å‘ç°æ•°æ®ä¸­éšè—çš„ç»“æ„æˆ–æºä¿¡å·ã€‚</p>
<p>ICA çš„åº”ç”¨éå¸¸å¹¿æ³›ã€‚ä¾‹å¦‚ï¼Œåœ¨éŸ³é¢‘å¤„ç†ä¸­ï¼Œæœ‰å¤šä¸ªéº¦å…‹é£åŒæ—¶è®°å½•å¤šä¸ªå£°æºçš„æ··åˆä¿¡å·ã€‚é€šè¿‡ ICAï¼Œå¯ä»¥å°†æ··åˆä¿¡å·æ¢å¤æˆç‹¬ç«‹çš„åŸå§‹å£°éŸ³ï¼Œå®ç°â€œé¸¡å°¾é…’ä¼šé—®é¢˜â€çš„è§£å†³ã€‚åœ¨ç¥ç»ç§‘å­¦ä¸­ï¼ŒICA å¯ç”¨äºåˆ†æè„‘ç”µå›¾ï¼ˆEEGï¼‰æˆ–åŠŸèƒ½æ€§ç£å…±æŒ¯æˆåƒï¼ˆfMRIï¼‰æ•°æ®ï¼Œå°†å¤æ‚è„‘ä¿¡å·åˆ†è§£ä¸ºç‹¬ç«‹çš„ç¥ç»æ´»åŠ¨æ¨¡å¼ã€‚åœ¨å›¾åƒåˆ†æä¸­ï¼ŒICA å¯ä»¥ç”¨äºçº¹ç†åˆ†è§£ã€ç‰¹å¾æå–å’Œå›¾åƒå‹ç¼©ï¼Œä½¿ä½ç»´è¡¨ç¤ºæ›´åŠ æœ‰æ„ä¹‰ã€‚</p>
<p>è®¾è§‚æµ‹æ•°æ®ä¸º XâˆˆRnÃ—dï¼Œæ½œåœ¨ç‹¬ç«‹æˆåˆ†ä¸º SâˆˆRnÃ—kï¼Œæ··åˆçŸ©é˜µä¸º AâˆˆRdÃ—kï¼Œåˆ™æœ‰ï¼š X=AS</p>
<p>ICA çš„ç›®æ ‡æ˜¯ä¼°è®¡ Sä¸ Aï¼Œä½¿å¾— Sçš„å„è¡Œæˆåˆ†ç›¸äº’ç»Ÿè®¡ç‹¬ç«‹ã€‚ä¸ PCA ä¸åŒï¼ŒICA é€šè¿‡æœ€å¤§åŒ–éé«˜æ–¯æ€§æˆ–ç‹¬ç«‹æ€§æŒ‡æ ‡æ¥æ¢å¤ä¿¡å·ï¼Œè€Œä¸ä»…ä»…æ˜¯å»ç›¸å…³ã€‚å¸¸ç”¨æ–¹æ³•åŒ…æ‹¬ FastICAï¼Œå®ƒåŸºäºè¿­ä»£ä¼˜åŒ–éé«˜æ–¯æ€§æŒ‡æ ‡ï¼ˆå¦‚è´Ÿç†µï¼‰ä»è€Œå¿«é€Ÿæ‰¾åˆ°ç‹¬ç«‹æˆåˆ†ã€‚</p>
<p>åœ¨ä½¿ç”¨ ICA æ—¶ï¼Œé€šå¸¸éœ€è¦å¯¹æ•°æ®è¿›è¡Œä¸­å¿ƒåŒ–å’Œç™½åŒ–ï¼Œä½¿å¾—æ¯ä¸ªç‰¹å¾å‡å€¼ä¸ºé›¶ï¼Œä¸”å„ç‰¹å¾æ–¹å·®å½’ä¸€åŒ–å¹¶ç›¸äº’ä¸ç›¸å…³ã€‚ç™½åŒ–å¯ä»¥å‡å°‘å‚æ•°æ•°é‡ï¼Œæé«˜ç®—æ³•ç¨³å®šæ€§å’Œæ”¶æ•›é€Ÿåº¦ã€‚</p>
<p>ä»¥ FastICA ä¸ºä¾‹ï¼Œç®—æ³•å¯ä»¥æ€»ç»“ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>æ•°æ®ä¸­å¿ƒåŒ–ï¼šå‡å»æ¯ä¸ªç‰¹å¾çš„å‡å€¼ï¼Œä½¿æ•°æ®å‡å€¼ä¸ºé›¶ã€‚</li>
<li>æ•°æ®ç™½åŒ–ï¼šå¯¹æ•°æ®è¿›è¡Œçº¿æ€§å˜æ¢ï¼Œä½¿å„ç‰¹å¾ä¸ç›¸å…³ä¸”æ–¹å·®å½’ä¸€åŒ–ã€‚</li>
<li>åˆå§‹åŒ–æƒé‡çŸ©é˜µï¼šéšæœºé€‰æ‹©åˆå§‹æƒé‡å‘é‡ã€‚</li>
<li>è¿­ä»£ä¼˜åŒ–ï¼šé€šè¿‡æœ€å¤§åŒ–éé«˜æ–¯æ€§æŒ‡æ ‡ï¼ˆå¦‚è´Ÿç†µï¼‰æ›´æ–°æƒé‡ï¼Œå¯»æ‰¾ç‹¬ç«‹æˆåˆ†æ–¹å‘ã€‚</li>
<li>æ­£äº¤åŒ–æƒé‡å‘é‡ï¼šä¿è¯å„ç‹¬ç«‹æˆåˆ†æ­£äº¤ï¼Œé¿å…é‡å¤ã€‚</li>
<li>æ¢å¤ç‹¬ç«‹æˆåˆ†ï¼šé€šè¿‡æƒé‡çŸ©é˜µå°†è§‚æµ‹æ•°æ®æŠ•å½±åˆ°ç‹¬ç«‹æˆåˆ†ç©ºé—´ï¼Œå¾—åˆ°çŸ©é˜µ Sã€‚</li>
<li>ç»“æœè¾“å‡ºï¼šå¾—åˆ°ç‹¬ç«‹æˆåˆ†å’Œæ··åˆçŸ©é˜µï¼Œå¯ç”¨äºåç»­åˆ†ææˆ–å¯è§†åŒ–ã€‚</li>
</ol>
<p>ä¸‹é¢ä½¿ç”¨ FastICA å¯¹æ··åˆä¿¡å·è¿›è¡Œåˆ†ç¦»ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> sklearn.decomposition <span class="hljs-keyword">import</span> FastICA

<span class="hljs-comment"># ç”Ÿæˆæ¨¡æ‹Ÿä¿¡å·</span>
np.random.seed(<span class="hljs-number">42</span>)
time = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1000</span>)
s1 = np.sin(<span class="hljs-number">2</span> * time)                  <span class="hljs-comment"># æ­£å¼¦ä¿¡å·</span>
s2 = np.sign(np.sin(<span class="hljs-number">3</span> * time))         <span class="hljs-comment"># æ–¹æ³¢ä¿¡å·</span>
S = np.c_[s1, s2]

<span class="hljs-comment"># æ··åˆä¿¡å·</span>
A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">0.5</span>, <span class="hljs-number">2</span>]])
X = S @ A.T

<span class="hljs-comment"># ä½¿ç”¨ FastICA åˆ†ç¦»ç‹¬ç«‹æˆåˆ†</span>
ica = FastICA(n_components=<span class="hljs-number">2</span>, random_state=<span class="hljs-number">42</span>)
S_ = ica.fit_transform(X)
A_ = ica.mixing_

<span class="hljs-comment"># å¯è§†åŒ–</span>
plt.figure(figsize=(<span class="hljs-number">10</span>,<span class="hljs-number">6</span>))

plt.subplot(<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)
plt.plot(S)
plt.title(<span class="hljs-string">"Original Signals (S)"</span>)

plt.subplot(<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)
plt.plot(X)
plt.title(<span class="hljs-string">"Mixed Signals (X)"</span>)

plt.subplot(<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>)
plt.plot(S_)
plt.title(<span class="hljs-string">"Recovered Independent Components (ICA)"</span>)

plt.tight_layout()
plt.show()
</code></pre>
<p>è¿è¡Œç»“æœä¸­ï¼Œç¬¬ä¸€å¹…å›¾å±•ç¤ºåŸå§‹ç‹¬ç«‹ä¿¡å·ï¼Œç¬¬äºŒå¹…å›¾ä¸ºæ··åˆä¿¡å·ï¼Œç¬¬ä¸‰å¹…å›¾ä¸º ICA åˆ†ç¦»å‡ºçš„ç‹¬ç«‹æˆåˆ†ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒICA æˆåŠŸæ¢å¤äº†åŸå§‹ä¿¡å·çš„ç‹¬ç«‹æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd192c09beb04257bc163a511c5f671f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769323357&amp;x-signature=oeK%2FmEWPAdeOGvD%2F6EOpVo%2Fml7g%3D" alt="" loading="lazy"/></p>
<p>ç‹¬ç«‹æˆåˆ†åˆ†ææ˜¯ä¸€ç§å¼ºå¤§çš„é™ç»´å’Œä¿¡å·åˆ†ç¦»æ–¹æ³•ï¼Œå®ƒé€šè¿‡ç»Ÿè®¡ç‹¬ç«‹æ€§å’Œéé«˜æ–¯æ€§ä¼˜åŒ–ï¼Œèƒ½å¤Ÿä»å¤æ‚çš„æ··åˆæ•°æ®ä¸­æå–æ½œåœ¨çš„ç‹¬ç«‹ä¿¡å·ã€‚ä¸ PCA ç›¸æ¯”ï¼ŒICA ä¸ä»…å»ç›¸å…³ï¼Œè¿˜èƒ½æ•æ‰é«˜é˜¶ç»Ÿè®¡ç‰¹æ€§ï¼Œå› æ­¤åœ¨ç›²æºåˆ†ç¦»ã€ç¥ç»ä¿¡å·åˆ†æå’Œå›¾åƒç‰¹å¾æå–ä¸­å…·æœ‰ä¸å¯æ›¿ä»£çš„ä½œç”¨ã€‚</p>
<p>å°½ç®¡ ICA å¯¹å™ªå£°æ•æ„Ÿã€è®¡ç®—å¤æ‚åº¦è¾ƒé«˜ï¼Œä½†é€šè¿‡åˆç†çš„é¢„å¤„ç†å’Œå‚æ•°é€‰æ‹©ï¼Œå®ƒä»ç„¶æ˜¯å¤„ç†é«˜ç»´å¤æ‚æ•°æ®çš„é‡è¦å·¥å…·ã€‚ç»“åˆ PCA å’Œå…¶ä»–é™ç»´æ–¹æ³•ï¼ŒICA å¯ä»¥ä¸ºæ•°æ®åˆ†ææä¾›æ›´åŠ ä¸°å¯Œå’Œæœ‰æ•ˆçš„ç‰¹å¾è¡¨ç¤ºï¼Œä½¿é«˜ç»´æ•°æ®æ›´æ˜“äºç†è§£å’Œå¤„ç†</p>
<p>ğŸ“š æ¨èé˜…è¯»</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485782%26idx%3D1%26sn%3D060c8222b47cbf903fbfded1f0421bcf%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485782&amp;idx=1&amp;sn=060c8222b47cbf903fbfded1f0421bcf&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¹‹æ•°æ®é¢„å¤„ç†ç¯‡ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485800%26idx%3D1%26sn%3Da52107c9dc7071d8530a24563861fa46%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485800&amp;idx=1&amp;sn=a52107c9dc7071d8530a24563861fa46&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ç‰¹å¾å·¥ç¨‹ä¸­çš„ç‰¹å¾é€‰æ‹©</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485808%26idx%3D1%26sn%3D2c57081d4b12433f6b8919209e2e52ed%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485808&amp;idx=1&amp;sn=2c57081d4b12433f6b8919209e2e52ed&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­çš„ç‰¹å¾æ„é€ </a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485820%26idx%3D1%26sn%3Dadcb41fd14347f2f1431709323fa253f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485820&amp;idx=1&amp;sn=adcb41fd14347f2f1431709323fa253f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¹‹ç‰¹å¾é™ç»´</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485848%26idx%3D1%26sn%3D06d3c614e05ebddd73f3fc058de5ab99%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485848&amp;idx=1&amp;sn=06d3c614e05ebddd73f3fc058de5ab99&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">åˆ°åº•ä»€ä¹ˆæ‰æ˜¯å›å½’æ¨¡å‹ï¼Ÿéƒ½æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485868%26idx%3D1%26sn%3D37fe4cbcff58fabbf6b0de2a704550a3%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485868&amp;idx=1&amp;sn=37fe4cbcff58fabbf6b0de2a704550a3&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚ç›‘ç£å­¦ä¹ ä¸­çš„åˆ†ç±»æ¨¡å‹ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485876%26idx%3D1%26sn%3D7f65c641893cd109d9f4840cfc179491%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485876&amp;idx=1&amp;sn=7f65c641893cd109d9f4840cfc179491&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚ç›‘ç£å­¦ä¹ ä¸­çš„æ ‘æ¨¡å‹ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485893%26idx%3D1%26sn%3Dadfe2bfc7118b21d37584da2bfb0d8f9%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485893&amp;idx=1&amp;sn=adfe2bfc7118b21d37584da2bfb0d8f9&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡è¯»æ‡‚ç›‘ç£å­¦ä¹ ä¸­çš„é›†æˆå­¦ä¹ ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485900%26idx%3D1%26sn%3D0e8024ce4102ed793681af0e34c9b5f5%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485900&amp;idx=1&amp;sn=0e8024ce4102ed793681af0e34c9b5f5&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚K-Means èšç±»æ–¹æ³•</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485929%26idx%3D1%26sn%3D7510507b046068aebbc4a5fbc813aa19%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485929&amp;idx=1&amp;sn=7510507b046068aebbc4a5fbc813aa19&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">K-Medoidsèšç±»æ–¹æ³•å’ŒK-Meansæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485941%26idx%3D1%26sn%3Dcb53a98bacd1cfbd3255bbeeab6a24ec%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485941&amp;idx=1&amp;sn=cb53a98bacd1cfbd3255bbeeab6a24ec&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚å±‚æ¬¡èšç±»å’Œå¯†åº¦èšç±»æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485946%26idx%3D1%26sn%3Da5cf50a4a3bda9785fb0c7baae3a6bb2%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485946&amp;idx=1&amp;sn=a5cf50a4a3bda9785fb0c7baae3a6bb2&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„PCAä¸»æˆåˆ†åˆ†æï¼</a></p>
<p>æœ€æ–°çš„æ–‡ç« éƒ½åœ¨å…¬ä¼—å·aicotingæ›´æ–°ï¼Œåˆ«å¿˜è®°å…³æ³¨å“¦ï¼ï¼ï¼</p>
<p>ä½œè€…ï¼šaicoting</p>
<p>åˆ†äº«æ˜¯ä¸€ç§ä¿¡ä»°ï¼Œè¿æ¥è®©æˆé•¿æ›´æœ‰æ¸©åº¦ã€‚</p>
<p>æˆ‘ä»¬ä¸‹æ¬¡ä¸è§ä¸æ•£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æµå¼è¾“å‡ºæ¸²æŸ“ï¼šå‰ç«¯æŠ€æœ¯é€‰å‹å®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7596148446383685638</link>    <guid>https://juejin.cn/post/7596148446383685638</guid>    <pubDate>2026-01-18T02:10:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596148446383685638" data-draft-id="7596171325531258921" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æµå¼è¾“å‡ºæ¸²æŸ“ï¼šå‰ç«¯æŠ€æœ¯é€‰å‹å®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-18T02:10:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯è¨å…‹æ–¯"/> <meta itemprop="url" content="https://juejin.cn/user/590879113368618"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æµå¼è¾“å‡ºæ¸²æŸ“ï¼šå‰ç«¯æŠ€æœ¯é€‰å‹å®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/590879113368618/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯è¨å…‹æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T02:10:20.000Z" title="Sun Jan 18 2026 02:10:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä» ChatGPT åˆ°æ–‡å¿ƒä¸€è¨€ã€é€šä¹‰åƒé—®ã€deepseekï¼Œå¦‚ä½•åœ¨å‰ç«¯å®ç°ä¸æ»‘çš„æ‰“å­—åŠ¨ç”»æ•ˆæœï¼Ÿ</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>å¦‚æœä½ æ­£åœ¨å¼€å‘ AI å¯¹è¯åº”ç”¨ï¼Œä¸€å®šé‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼š<strong>å¦‚ä½•ä¼˜é›…åœ°æ¸²æŸ“ AI çš„æµå¼è¾“å‡ºï¼Ÿ</strong></p>
<p>ä¸åŒäºä¼ ç»Ÿçš„ä¸€æ¬¡æ€§æ¸²æŸ“ï¼ŒAI åº”ç”¨çš„ç‰¹ç‚¹æ˜¯å†…å®¹é€æ­¥ç”Ÿæˆï¼Œè€Œä¸”å¾€å¾€åŒ…å«å¤æ‚çš„ Markdown æ ¼å¼ã€ä»£ç å—ã€æ•°å­¦å…¬å¼ç­‰ã€‚è¿™ç»™å‰ç«¯æ¸²æŸ“å¸¦æ¥äº†ç‹¬ç‰¹çš„æŒ‘æˆ˜ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å¯¹æ¯”å¸‚é¢ä¸Šä¸»æµçš„ AI æµå¼æ¸²æŸ“æ–¹æ¡ˆï¼Œå¸®åŠ©ä½ æ‰¾åˆ°æœ€é€‚åˆé¡¹ç›®çš„æŠ€æœ¯é€‰å‹ã€‚</p>
<hr/>
<h2 data-id="heading-1">æ ¸å¿ƒéœ€æ±‚åˆ†æ</h2>
<p>åœ¨é€‰æ‹©æŠ€æœ¯æ–¹æ¡ˆä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ˜ç¡® AI æµå¼æ¸²æŸ“çš„æ ¸å¿ƒéœ€æ±‚ï¼š</p>
<h3 data-id="heading-2">1. æµå¼æ•°æ®å¤„ç†</h3>
<p>AI åç«¯é€šå¸¸é€šè¿‡ Server-Sent Events (SSE) æˆ– WebSocket è¿”å›æ•°æ®ï¼Œæ¯ä¸ªæ•°æ®å—ï¼ˆchunkï¼‰å¯èƒ½åŒ…å«å‡ ä¸ªå­—ç¬¦åˆ°å‡ åä¸ªå­—ç¬¦ä¸ç­‰ã€‚</p>
<h3 data-id="heading-3">2. æ‰“å­—åŠ¨ç”»æ•ˆæœ</h3>
<p>ä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒï¼Œéœ€è¦å°†æµå¼æ•°æ®è½¬æ¢ä¸ºé€å­—æ˜¾ç¤ºçš„æ‰“å­—åŠ¨ç”»ï¼Œè€Œä¸æ˜¯è·³è·ƒå¼åœ°æ˜¾ç¤ºæ•´ä¸ª chunkã€‚</p>
<h3 data-id="heading-4">3. Markdown å®æ—¶æ¸²æŸ“</h3>
<p>AI çš„è¾“å‡ºé€šå¸¸åŒ…å« Markdown æ ¼å¼ï¼Œéœ€è¦åœ¨æ‰“å­—è¿‡ç¨‹ä¸­å®æ—¶è§£æå’Œæ¸²æŸ“ï¼Œè€Œä¸æ˜¯ç­‰å¾…å…¨éƒ¨å†…å®¹è¾“å‡ºå®Œæˆã€‚</p>
<h3 data-id="heading-5">4. å¤æ‚å†…å®¹æ”¯æŒ</h3>
<ul>
<li>ä»£ç å—ï¼ˆå¸¦è¯­æ³•é«˜äº®ï¼‰</li>
<li>æ•°å­¦å…¬å¼ï¼ˆLaTeXï¼‰</li>
<li>è¡¨æ ¼</li>
<li>æµç¨‹å›¾ï¼ˆMermaidï¼‰</li>
<li>åˆ—è¡¨ã€å¼•ç”¨ç­‰</li>
</ul>
<hr/>
<h2 data-id="heading-6">ä¸»æµæŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”</h2>
<h3 data-id="heading-7">æ–¹æ¡ˆä¸€ï¼šreact-markdownï¼ˆé™æ€æ¸²æŸ“ï¼‰</h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå†å²æ¶ˆæ¯å±•ç¤ºã€é™æ€å†…å®¹æ¸²æŸ“</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactMarkdown</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-markdown'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Message</span>(<span class="hljs-params">{ content }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ReactMarkdown</span>&gt;</span>{content}<span class="hljs-tag">&lt;/<span class="hljs-name">ReactMarkdown</span>&gt;</span></span>;
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>ç”Ÿæ€æˆç†Ÿï¼Œæ’ä»¶ä¸°å¯Œ</li>
<li>æ–‡æ¡£å®Œå–„ï¼Œç¤¾åŒºæ´»è·ƒ</li>
<li>é«˜åº¦å¯å®šåˆ¶</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>ï¼š</p>
<ul>
<li>âŒ ä¸æ”¯æŒæµå¼æ¸²æŸ“</li>
<li>âŒ æ²¡æœ‰æ‰“å­—åŠ¨ç”»</li>
<li>âŒ éœ€è¦æ‰‹åŠ¨å¤„ç†å¢é‡æ›´æ–°</li>
</ul>
<p><strong>è¯„åˆ†</strong>ï¼šâ­â­â­ (é€‚åˆé™æ€åœºæ™¯)</p>
<hr/>
<h3 data-id="heading-8">æ–¹æ¡ˆäºŒï¼šstreamdownï¼ˆæµå¼æ¸²æŸ“å¼•æ“ï¼‰</h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šéœ€è¦æµå¼æ¸²æŸ“ä½†ä¸éœ€è¦æ‰“å­—åŠ¨ç”»</p>
<p>Vercel å‡ºå“çš„ä¸“ä¸šæµå¼ Markdown æ¸²æŸ“å™¨ï¼Œä¸“æ³¨è§£å†³"æœªé—­åˆæ ‡ç­¾"é—®é¢˜ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Streamdown</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'streamdown'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Message</span>(<span class="hljs-params">{ content }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Streamdown</span>&gt;</span>{content}<span class="hljs-tag">&lt;/<span class="hljs-name">Streamdown</span>&gt;</span></span>;
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… åŸç”Ÿæ”¯æŒæµå¼æ¸²æŸ“</li>
<li>âœ… ä¼˜é›…å¤„ç†ä¸å®Œæ•´çš„ Markdown å—</li>
<li>âœ… å†…ç½®å®‰å…¨é˜²æŠ¤ï¼ˆXSS é˜²æŠ¤ï¼‰</li>
<li>âœ… å¯ä½œä¸º react-markdown çš„æ›¿ä»£å“</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>ï¼š</p>
<ul>
<li>âŒ æ²¡æœ‰æ‰“å­—åŠ¨ç”»æ•ˆæœ</li>
<li>âŒ ä¾èµ– Tailwind CSS</li>
<li>âŒ æ— æ³•æ§åˆ¶æ¸²æŸ“é€Ÿåº¦</li>
</ul>
<p><strong>è¯„åˆ†</strong>ï¼šâ­â­â­â­ (æµå¼æ¸²æŸ“çš„ä¼˜ç§€é€‰æ‹©)</p>
<hr/>
<h3 data-id="heading-9">æ–¹æ¡ˆä¸‰ï¼šds-markdownï¼ˆæ‰“å­—åŠ¨ç”» + æµå¼æ¸²æŸ“ï¼‰</h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šéœ€è¦ ChatGPT é£æ ¼çš„å®Œæ•´ä½“éªŒ</p>
<p>ä¸“ä¸º AI åº”ç”¨è®¾è®¡çš„æ‰“å­—åŠ¨ç”»ç»„ä»¶ï¼ŒåŒæ—¶æ”¯æŒæµå¼æ¸²æŸ“å’Œ Markdownã€‚</p>
<h4 data-id="heading-10">åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">DsMarkdown</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ds-markdown'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Message</span>(<span class="hljs-params">{ content }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DsMarkdown</span> <span class="hljs-attr">interval</span>=<span class="hljs-string">{30}</span>&gt;</span>
      {content}
    <span class="hljs-tag">&lt;/<span class="hljs-name">DsMarkdown</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-11">æ ¸å¿ƒ API è¯¦è§£</h4>
<p><strong>1. é€Ÿåº¦æ§åˆ¶</strong></p>
<p>æ”¯æŒå›ºå®šé€Ÿåº¦å’ŒåŠ¨æ€é€Ÿåº¦ä¸¤ç§æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// å›ºå®šé€Ÿåº¦ï¼šæ¯ä¸ªå­—ç¬¦é—´éš” 30ms</span>
&lt;<span class="hljs-title class_">DsMarkdown</span> interval={<span class="hljs-number">30</span>}&gt;{content}&lt;/<span class="hljs-title class_">DsMarkdown</span>&gt;

<span class="hljs-comment">// åŠ¨æ€é€Ÿåº¦ï¼šæ›´è‡ªç„¶çš„æ‰“å­—èŠ‚å¥</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DsMarkdown</span> <span class="hljs-attr">interval</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">min:</span> <span class="hljs-attr">8</span>, <span class="hljs-attr">max:</span> <span class="hljs-attr">60</span>, <span class="hljs-attr">curve:</span> '<span class="hljs-attr">ease-out</span>' }}&gt;</span>
  {content}
<span class="hljs-tag">&lt;/<span class="hljs-name">DsMarkdown</span>&gt;</span></span>
</code></pre>
<p><strong>2. ç”Ÿå‘½å‘¨æœŸé’©å­</strong></p>
<p>ç›‘å¬åŠ¨ç”»çš„å„ä¸ªé˜¶æ®µï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">DsMarkdown</span>
  onStart={<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹æ‰“å­—'</span>)}
  onEnd={<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰“å­—å®Œæˆ'</span>);
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œè§¦å‘åç»­æ“ä½œï¼Œå¦‚æ˜¾ç¤ºåé¦ˆæŒ‰é’®</span>
  }}
  onTypedChar={<span class="hljs-function">(<span class="hljs-params">{ char, index }</span>) =&gt;</span> {
    <span class="hljs-comment">// å®æ—¶è·å–å½“å‰æ‰“å°çš„å­—ç¬¦</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬ <span class="hljs-subst">${index}</span> ä¸ªå­—ç¬¦: <span class="hljs-subst">${char}</span>`</span>);
  }}
&gt;
  {content}
&lt;/<span class="hljs-title class_">DsMarkdown</span>&gt;
</code></pre>
<p><strong>3. ç¼–ç¨‹å¼æ§åˆ¶</strong></p>
<p>é€šè¿‡ ref å®ç°å®Œå…¨çš„ç¨‹åºåŒ–æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">AIMessage</span>(<span class="hljs-params">{ content }</span>) {
  <span class="hljs-keyword">const</span> markdownRef = <span class="hljs-title function_">useRef</span>();

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> markdownRef.current?.stop()}&gt;
          æš‚åœ
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> markdownRef.current?.resume()}&gt;
          ç»§ç»­
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> markdownRef.current?.restart()}&gt;
          é‡æ’­
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">DsMarkdown</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{markdownRef}</span> <span class="hljs-attr">interval</span>=<span class="hljs-string">{30}</span>&gt;</span>
        {content}
      <span class="hljs-tag">&lt;/<span class="hljs-name">DsMarkdown</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<p><strong>4. ä¸»é¢˜åˆ‡æ¢</strong></p>
<p>å†…ç½®æ˜æš—åŒä¸»é¢˜ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ds-markdown'</span>;
<span class="hljs-keyword">import</span> zh <span class="hljs-keyword">from</span> <span class="hljs-string">'ds-markdown/i18n/zh'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'light'</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ConfigProvider</span> <span class="hljs-attr">locale</span>=<span class="hljs-string">{zh}</span> <span class="hljs-attr">theme</span>=<span class="hljs-string">{theme}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">DsMarkdown</span>&gt;</span>{content}<span class="hljs-tag">&lt;/<span class="hljs-name">DsMarkdown</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ConfigProvider</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>5. æ€§èƒ½ä¼˜åŒ–ï¼šæŒ‰éœ€ç¦ç”¨åŠ¨ç”»</strong></p>
<p>å¯¹äºå†å²æ¶ˆæ¯ï¼Œå¯ä»¥è·³è¿‡åŠ¨ç”»ç›´æ¥æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// å†å²æ¶ˆæ¯æ— éœ€åŠ¨ç”»</span>
&lt;<span class="hljs-title class_">DsMarkdown</span> disableTyping={<span class="hljs-literal">true</span>}&gt;
  {historyMessage}
&lt;/<span class="hljs-title class_">DsMarkdown</span>&gt;

<span class="hljs-comment">// æ–°æ¶ˆæ¯å¸¦åŠ¨ç”»</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DsMarkdown</span> <span class="hljs-attr">interval</span>=<span class="hljs-string">{30}</span>&gt;</span>
  {newMessage}
<span class="hljs-tag">&lt;/<span class="hljs-name">DsMarkdown</span>&gt;</span></span>
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… é€å­—ç¬¦æ‰“å­—åŠ¨ç”»</li>
<li>âœ… æµå¼æ¸²æŸ“æ”¯æŒ</li>
<li>âœ… å®Œæ•´çš„ Markdown ç”Ÿæ€ï¼ˆåŸºäº react-markdownï¼‰</li>
<li>âœ… é›¶é…ç½®ï¼Œå¼€ç®±å³ç”¨</li>
<li>âœ… ç²¾ç»†çš„åŠ¨ç”»æ§åˆ¶</li>
<li>âœ… å†…ç½®æ˜/æš—ä¸»é¢˜</li>
<li>âœ… å…¼å®¹ react-markdown æ’ä»¶ç”Ÿæ€</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>ï¼š</p>
<ul>
<li>âš ï¸ ç›¸å¯¹è¾ƒæ–°çš„é¡¹ç›®</li>
<li>âš ï¸ æœªå¤„ç†ä¸å®Œæ•´çš„ Markdown å—ï¼Œè¿™ç‚¹ streamdown åšçš„æ›´å¥½</li>
</ul>
<p><strong>æŠ€æœ¯æ¶æ„</strong>ï¼šds-markdown åŸºäº react-markdown-typerï¼ˆåŒä½œè€…å¼€å‘ï¼‰ï¼Œå†…éƒ¨ä½¿ç”¨ react-markdown å®ç° Markdown æ¸²æŸ“ï¼Œå› æ­¤å®Œå…¨å…¼å®¹ react-markdown çš„æ’ä»¶ç”Ÿæ€ï¼ŒåŒæ—¶åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†æ‰“å­—åŠ¨ç”»å’Œæµå¼æ¸²æŸ“èƒ½åŠ›ã€‚</p>
<p><strong>è¯„åˆ†</strong>ï¼šâ­â­â­â­â­ (AI åº”ç”¨çš„æœ€ä½³é€‰æ‹©)</p>
<hr/>
<h3 data-id="heading-12">æ–¹æ¡ˆå››ï¼šè‡ªå·±å®ç°æ‰“å­—æœºæ•ˆæœ</h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç®€å•çš„çº¯æ–‡æœ¬æ‰“å­—åŠ¨ç”»</p>
<p>å¾ˆå¤šå¼€å‘è€…ä¼šå°è¯•è‡ªå·±å®ç°æ‰“å­—æœºæ•ˆæœï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">TypeWriter</span>(<span class="hljs-params">{ text }</span>) {
  <span class="hljs-keyword">const</span> [displayText, setDisplayText] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (index &lt; text.<span class="hljs-property">length</span>) {
        <span class="hljs-title function_">setDisplayText</span>(text.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, index + <span class="hljs-number">1</span>));
        index++;
      }
    }, <span class="hljs-number">50</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
  }, [text]);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{displayText}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… å®Œå…¨å¯æ§</li>
<li>âœ… æ— å¤–éƒ¨ä¾èµ–</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>ï¼š</p>
<ul>
<li>âŒ ä¸æ”¯æŒ Markdown æ¸²æŸ“</li>
<li>âŒ æ€§èƒ½é—®é¢˜ï¼ˆé¢‘ç¹ setStateï¼‰</li>
<li>âŒ æ— æ³•å¤„ç†å¤æ‚æ ¼å¼</li>
<li>âŒ æµå¼æ•°æ®å¤„ç†å¤æ‚</li>
</ul>
<p><strong>è¯„åˆ†</strong>ï¼šâ­â­ (ä»…é€‚åˆç®€å•åœºæ™¯)</p>
<hr/>
<h2 data-id="heading-13">æ·±åº¦å¯¹æ¯”ï¼šå…³é”®ç‰¹æ€§</h2>











































































<table><thead><tr><th>ç‰¹æ€§</th><th>react-markdown</th><th>streamdown</th><th>ds-markdown</th><th>è‡ªå®ç°</th></tr></thead><tbody><tr><td><strong>æµå¼æ¸²æŸ“</strong></td><td>âŒ</td><td>âœ…</td><td>âœ…</td><td>âš ï¸ éœ€è‡ªå·±å®ç°</td></tr><tr><td><strong>æ‰“å­—åŠ¨ç”»</strong></td><td>âŒ</td><td>âŒ</td><td>âœ…</td><td>âœ…</td></tr><tr><td><strong>Markdown æ”¯æŒ</strong></td><td>âœ… å®Œæ•´</td><td>âœ… å®Œæ•´</td><td>âœ… å®Œæ•´</td><td>âŒ</td></tr><tr><td><strong>ä»£ç é«˜äº®</strong></td><td>âš ï¸ éœ€é…ç½®</td><td>âœ… Shiki</td><td>âœ… å†…ç½®</td><td>âŒ</td></tr><tr><td><strong>æ•°å­¦å…¬å¼</strong></td><td>âš ï¸ éœ€é…ç½®</td><td>âœ… KaTeX</td><td>âœ… KaTeX</td><td>âŒ</td></tr><tr><td><strong>åŠ¨ç”»æ§åˆ¶</strong></td><td>âŒ</td><td>âŒ</td><td>âœ… æš‚åœ/ç»§ç»­/é‡æ’­</td><td>âœ…</td></tr><tr><td><strong>æ€§èƒ½ä¼˜åŒ–</strong></td><td>âœ…</td><td>âœ…</td><td>âœ… RAF + diff</td><td>âŒ</td></tr><tr><td><strong>å­¦ä¹ æˆæœ¬</strong></td><td>ä½</td><td>ä½</td><td>ä½</td><td>é«˜</td></tr><tr><td><strong>ç»´æŠ¤æˆæœ¬</strong></td><td>ä½</td><td>ä½</td><td>ä½</td><td>é«˜</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-14">å®æˆ˜æ¡ˆä¾‹ï¼šä¸åŒåœºæ™¯çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-15">åœºæ™¯ 1ï¼šèŠå¤©å†å²è®°å½•</h3>
<p><strong>éœ€æ±‚</strong>ï¼šå¿«é€Ÿæ¸²æŸ“å†å²æ¶ˆæ¯ï¼Œä¸éœ€è¦åŠ¨ç”»</p>
<p><strong>æ¨èæ–¹æ¡ˆ</strong>ï¼šreact-markdown æˆ– streamdown</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// å†å²æ¶ˆæ¯ç›´æ¥æ¸²æŸ“</span>
&lt;<span class="hljs-title class_">ReactMarkdown</span>&gt;{historyMessage}&lt;/<span class="hljs-title class_">ReactMarkdown</span>&gt;
</code></pre>
<h3 data-id="heading-16">åœºæ™¯ 2ï¼šAI å®æ—¶å›å¤</h3>
<p><strong>éœ€æ±‚</strong>ï¼šæµå¼è¾“å‡º + æ‰“å­—åŠ¨ç”» + Markdown</p>
<p><strong>æ¨èæ–¹æ¡ˆ</strong>ï¼šds-markdown</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// æ–°æ¶ˆæ¯å¸¦æ‰“å­—åŠ¨ç”»</span>
&lt;<span class="hljs-title class_">DsMarkdown</span> interval={<span class="hljs-number">30</span>}&gt;
  {streamingContent}
&lt;/<span class="hljs-title class_">DsMarkdown</span>&gt;
</code></pre>
<h3 data-id="heading-17">åœºæ™¯ 3ï¼šæ··åˆåœºæ™¯</h3>
<p><strong>éœ€æ±‚</strong>ï¼šå†å²æ¶ˆæ¯é™æ€æ¸²æŸ“ï¼Œæ–°æ¶ˆæ¯æ‰“å­—åŠ¨ç”»</p>
<p><strong>æ¨èæ–¹æ¡ˆ</strong>ï¼šds-markdownï¼ˆå¯æŒ‰éœ€ç¦ç”¨åŠ¨ç”»ï¼‰</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// å†å²æ¶ˆæ¯</span>
&lt;<span class="hljs-title class_">DsMarkdown</span> disableTyping={<span class="hljs-literal">true</span>}&gt;
  {historyMessage}
&lt;/<span class="hljs-title class_">DsMarkdown</span>&gt;

<span class="hljs-comment">// æ–°æ¶ˆæ¯</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DsMarkdown</span> <span class="hljs-attr">interval</span>=<span class="hljs-string">{30}</span>&gt;</span>
  {newMessage}
<span class="hljs-tag">&lt;/<span class="hljs-name">DsMarkdown</span>&gt;</span></span>
</code></pre>
<hr/>
<h2 data-id="heading-18">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2>
<h3 data-id="heading-19">1. é¿å…é¢‘ç¹é‡æ¸²æŸ“</h3>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âŒ ä¸å¥½çš„åšæ³•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Chat</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [messages, setMessages] = <span class="hljs-title function_">useState</span>([]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    eventSource.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-title function_">setMessages</span>([...messages, e.<span class="hljs-property">data</span>]); <span class="hljs-comment">// æ¯æ¬¡éƒ½é‡æ–°æ¸²æŸ“æ‰€æœ‰æ¶ˆæ¯</span>
    };
  }, [messages]);
}

<span class="hljs-comment">// âœ… å¥½çš„åšæ³•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Chat</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [messages, setMessages] = <span class="hljs-title function_">useState</span>([]);
  <span class="hljs-keyword">const</span> [currentMessage, setCurrentMessage] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    eventSource.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-title function_">setCurrentMessage</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + e.<span class="hljs-property">data</span>); <span class="hljs-comment">// åªæ›´æ–°å½“å‰æ¶ˆæ¯</span>
    };
  }, []);
}
</code></pre>
<h3 data-id="heading-20">2. ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨</h3>
<p>å¯¹äºé•¿å¯¹è¯å†å²ï¼Œä½¿ç”¨ react-window æˆ– react-virtualizedï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FixedSizeList</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-window'</span>;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FixedSizeList</span>
  <span class="hljs-attr">height</span>=<span class="hljs-string">{600}</span>
  <span class="hljs-attr">itemCount</span>=<span class="hljs-string">{messages.length}</span>
  <span class="hljs-attr">itemSize</span>=<span class="hljs-string">{100}</span>
&gt;</span>
  {({ index, style }) =&gt; (
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">DsMarkdown</span>&gt;</span>{messages[index]}<span class="hljs-tag">&lt;/<span class="hljs-name">DsMarkdown</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  )}
<span class="hljs-tag">&lt;/<span class="hljs-name">FixedSizeList</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-21">3. æŒ‰éœ€åŠ è½½æ’ä»¶</h3>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// åªåœ¨éœ€è¦æ—¶åŠ è½½ Mermaid</span>
<span class="hljs-keyword">import</span> { lazy } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">MermaidPlugin</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span>
  <span class="hljs-keyword">import</span>(<span class="hljs-string">'ds-markdown-mermaid-plugin'</span>)
);
</code></pre>
<hr/>
<h2 data-id="heading-22">é€‰å‹å†³ç­–æ ‘</h2>
<pre><code class="hljs language-markdown" lang="markdown">æ˜¯å¦éœ€è¦æ‰“å­—åŠ¨ç”»ï¼Ÿ
â”œâ”€ å¦ â†’ æ˜¯å¦éœ€è¦æµå¼æ¸²æŸ“ï¼Ÿ
â”‚   â”œâ”€ æ˜¯ â†’ streamdown
â”‚   â””â”€ å¦ â†’ react-markdown
â”‚
â””â”€ æ˜¯ â†’ æ˜¯å¦éœ€è¦ Markdown æ”¯æŒï¼Ÿ
<span class="hljs-code">    â”œâ”€ æ˜¯ â†’ ds-markdown
    â””â”€ å¦ â†’ è‡ªå·±å®ç°ç®€å•æ‰“å­—æœº
</span></code></pre>
<hr/>
<h2 data-id="heading-23">æ€»ç»“</h2>
<p>ä¸åŒçš„æŠ€æœ¯æ–¹æ¡ˆé€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼š</p>
<ul>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fremarkjs%2Freact-markdown" target="_blank" title="https://github.com/remarkjs/react-markdown" ref="nofollow noopener noreferrer">react-markdown</a></strong>ï¼šæˆç†Ÿç¨³å®šï¼Œé€‚åˆé™æ€å†…å®¹</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fstreamdown" target="_blank" title="https://github.com/vercel/streamdown" ref="nofollow noopener noreferrer">streamdown</a></strong>ï¼šæµå¼æ¸²æŸ“ä¸“å®¶ï¼Œé€‚åˆä¸éœ€è¦åŠ¨ç”»çš„åœºæ™¯</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fonshinpei%2Fds-markdown" target="_blank" title="https://github.com/onshinpei/ds-markdown" ref="nofollow noopener noreferrer">ds-markdown</a></strong>ï¼šAI åº”ç”¨çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œæ‰“å­—åŠ¨ç”» + æµå¼æ¸²æŸ“</li>
<li><strong>è‡ªå®ç°</strong>ï¼šç®€å•åœºæ™¯å¯ä»¥å°è¯•ï¼Œå¤æ‚åœºæ™¯ä¸æ¨è</li>
</ul>
<p>å¦‚æœä½ æ­£åœ¨å¼€å‘ AI å¯¹è¯åº”ç”¨ï¼Œå¹¶ä¸”å¸Œæœ›æä¾› ChatGPT çº§åˆ«çš„ç”¨æˆ·ä½“éªŒï¼Œ<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fonshinpei%2Fds-markdown" target="_blank" title="https://github.com/onshinpei/ds-markdown" ref="nofollow noopener noreferrer">ds-markdown</a></strong> æ˜¯ç›®å‰å¸‚é¢ä¸Šæœ€å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-24">ç›¸å…³èµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fonshinpei.github.io%2Fds-markdown%2F" target="_blank" title="https://onshinpei.github.io/ds-markdown/" ref="nofollow noopener noreferrer">ds-markdown æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fonshinpei.github.io%2Fds-markdown%2F%23try" target="_blank" title="https://onshinpei.github.io/ds-markdown/#try" ref="nofollow noopener noreferrer">åœ¨çº¿æ¼”ç¤º</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fonshinpei%2Fds-markdown" target="_blank" title="https://github.com/onshinpei/ds-markdown" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fstreamdown" target="_blank" title="https://github.com/vercel/streamdown" ref="nofollow noopener noreferrer">streamdown æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fremarkjs%2Freact-markdown" target="_blank" title="https://github.com/remarkjs/react-markdown" ref="nofollow noopener noreferrer">react-markdown æ–‡æ¡£</a></li>
</ul>
<hr/>
<p><strong>ä½ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯å“ªç§æ–¹æ¡ˆï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«MinIOï¼RustFSé‡æ„å­˜å‚¨èŒƒå¼ï¼š93MBé•œåƒæ’¬åŠ¨EBçº§æ•°æ®ï¼ŒGitHubç‹‚æ½19Kæ˜Ÿ]]></title>    <link>https://juejin.cn/post/7596134842482098217</link>    <guid>https://juejin.cn/post/7596134842482098217</guid>    <pubDate>2026-01-18T02:12:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596134842482098217" data-draft-id="7596171325531308073" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«MinIOï¼RustFSé‡æ„å­˜å‚¨èŒƒå¼ï¼š93MBé•œåƒæ’¬åŠ¨EBçº§æ•°æ®ï¼ŒGitHubç‹‚æ½19Kæ˜Ÿ"/> <!----> <meta itemprop="datePublished" content="2026-01-18T02:12:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯¹è±¡å­˜å‚¨ä¸RustFS"/> <meta itemprop="url" content="https://juejin.cn/user/652466093570057"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«MinIOï¼RustFSé‡æ„å­˜å‚¨èŒƒå¼ï¼š93MBé•œåƒæ’¬åŠ¨EBçº§æ•°æ®ï¼ŒGitHubç‹‚æ½19Kæ˜Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/652466093570057/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯¹è±¡å­˜å‚¨ä¸RustFS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T02:12:37.000Z" title="Sun Jan 18 2026 02:12:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‘Šåˆ«MinIOï¼RustFSé‡æ„å­˜å‚¨èŒƒå¼ï¼š93MBé•œåƒæ’¬åŠ¨EBçº§æ•°æ®ï¼ŒGitHubç‹‚æ½19Kæ˜Ÿ</h2>
<blockquote>
<p>éšç€AIä¸å¤§æ•°æ®çš„çˆ†å‘å¼å¢é•¿ï¼Œéç»“æ„åŒ–æ•°æ®å­˜å‚¨æ­£é¢ä¸´å‰æ‰€æœªæœ‰çš„æŒ‘æˆ˜ã€‚RustFSä½œä¸ºåŸºäºRustè¯­è¨€å¼€å‘çš„é«˜æ€§èƒ½åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ç³»ç»Ÿï¼Œä»¥å…¶å“è¶Šæ€§èƒ½å’Œç®€æ´è®¾è®¡ï¼Œæ­£åœ¨æˆä¸ºMinIOç­‰ä¼ ç»Ÿæ–¹æ¡ˆçš„æœ‰åŠ›æ›¿ä»£è€…ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€RustFSï¼šä¸ºä½•æˆä¸ºå­˜å‚¨æ–°å® ï¼Ÿ</h3>
<p>åœ¨å½“ä»Šæ•°æ®é©±åŠ¨æ—¶ä»£ï¼Œéç»“æ„åŒ–æ•°æ®å‘ˆç°çˆ†ç‚¸å¼å¢é•¿ï¼Œä»ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡è§†é¢‘åˆ°æœºå™¨å­¦ä¹ æ•°æ®é›†ï¼Œä¼ ç»Ÿå­˜å‚¨æ–¹æ¡ˆåœ¨æ€§èƒ½ã€æˆæœ¬å’Œæ‰©å±•æ€§æ–¹é¢é¢ä¸´ä¸¥å³»æŒ‘æˆ˜ã€‚RustFSåº”è¿è€Œç”Ÿï¼Œå®ƒæ˜¯ä¸€æ¬¾å®Œå…¨å…¼å®¹Amazon S3 APIçš„é«˜æ€§èƒ½åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ç³»ç»Ÿã€‚</p>
<p><strong>RustFSçš„æ ¸å¿ƒä¼˜åŠ¿</strong>æºäºRustè¯­è¨€çš„å†…å­˜å®‰å…¨ç‰¹æ€§ï¼Œä»è¯­æ³•å±‚é¢æœç»äº†ç©ºæŒ‡é’ˆå’Œç¼“å†²åŒºæº¢å‡ºç­‰å¸¸è§å†…å­˜æ¼æ´ï¼ŒåŒæ—¶å…·å¤‡æ¥è¿‘Cè¯­è¨€çš„è¿è¡Œæ•ˆç‡ï¼Œå®ç°äº†â€œå®‰å…¨ä¸å¦¥åæ€§èƒ½â€çš„çªç ´ã€‚åœ¨å®é™…æµ‹è¯•ä¸­ï¼ŒRustFSçš„4Kéšæœºè¯»è¾¾åˆ°â€‹<strong>1.58M IOPS</strong>â€‹ï¼Œæ¯”MinIOé«˜å‡º42%ï¼Œå»¶è¿ŸP99ä»…â€‹<strong>7.3ms</strong>ï¼Œå±•ç°å‡ºå“è¶Šçš„æ€§èƒ½è¡¨ç°ã€‚</p>
<p>ç›¸æ¯”ä¼ ç»Ÿå­˜å‚¨æ–¹æ¡ˆï¼ŒRustFSå…·æœ‰å¤šé¡¹çªå‡ºç‰¹ç‚¹ï¼š</p>
<ul>
<li>â€‹<strong>å®Œå…¨S3å…¼å®¹</strong>ï¼šæ— ç¼å¯¹æ¥ç°æœ‰S3ç”Ÿæ€å·¥å…·å’Œåº”ç”¨ï¼Œè¿ç§»æˆæœ¬ä¸ºé›¶</li>
<li>â€‹<strong>è½»é‡é«˜æ•ˆ</strong>ï¼šäºŒè¿›åˆ¶åŒ…ä»…93MBï¼Œè¿œå°äºåŒç±»æ–¹æ¡ˆï¼Œèµ„æºå ç”¨æä½</li>
<li>â€‹<strong>å¼€æºå‹å¥½</strong>ï¼šé‡‡ç”¨Apache 2.0è®¸å¯è¯ï¼Œæ— AGPLä¼ æŸ“é£é™©ï¼Œå¯è‡ªç”±å•†ç”¨</li>
<li>â€‹<strong>å¤šæ¶æ„æ”¯æŒ</strong>ï¼šå¯¹X86ã€ARMã€RISC-Vç­‰æ¶æ„åŸç”Ÿæ”¯æŒ</li>
</ul>
<h3 data-id="heading-2">äºŒã€æ¶æ„è§£æï¼šRustFSé«˜æ€§èƒ½çš„ç§˜è¯€</h3>
<h4 data-id="heading-3">2.1 åˆ†å¸ƒå¼æ¶æ„è®¾è®¡</h4>
<p>RustFSçš„å“è¶Šæ€§èƒ½èƒŒåæ˜¯å…¶åˆ›æ–°çš„â€‹<strong>å…ƒæ•°æ®ä¸æ•°æ®åˆ†ç¦»æ¶æ„</strong>â€‹ã€‚å…ƒæ•°æ®èŠ‚ç‚¹ç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„å‘½åç©ºé—´å’Œè®¿é—®æƒé™ï¼Œæ•°æ®èŠ‚ç‚¹è´Ÿè´£å®é™…çš„å¯¹è±¡å­˜å‚¨ã€‚è¿™ç§è§£è€¦è®¾è®¡ä½¿å¾—RustFSå¯ä»¥å®ç°<strong>O(1)å¤æ‚åº¦</strong>çš„å…ƒæ•°æ®æŸ¥è¯¢ï¼Œç™¾ä¸‡çº§å¯¹è±¡æ£€ç´¢å»¶è¿Ÿä»…7.3msï¼Œæ¯”MinIOå¿«60.8%ã€‚</p>
<p>RustFSé›†ç¾¤åŒ…å«ä¸‰ç§æ ¸å¿ƒè§’è‰²ï¼šâ€‹<strong>ä¸»èŠ‚ç‚¹</strong>â€‹ï¼ˆè´Ÿè´£é›†ç¾¤ç®¡ç†å’Œå…ƒæ•°æ®å­˜å‚¨ï¼‰ã€â€‹<strong>ä»èŠ‚ç‚¹</strong>â€‹ï¼ˆè´Ÿè´£å®é™…æ•°æ®å­˜å‚¨ï¼‰å’Œâ€‹<strong>å®¢æˆ·ç«¯</strong>ï¼ˆæä¾›ç”¨æˆ·æ¥å£ï¼‰ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®è‡³å°‘éƒ¨ç½²3ä¸ªèŠ‚ç‚¹ï¼ˆ1ä¸»2ä»ï¼‰ä»¥æ»¡è¶³åˆ†å¸ƒå¼ä¸€è‡´æ€§è¦æ±‚ã€‚èŠ‚ç‚¹é—´é€šè¿‡Raftåè®®ä¿æŒä¸€è‡´æ€§ï¼Œè¿™ç§åˆ†å¸ƒå¼å…±è¯†ç®—æ³•ç¡®ä¿å³ä½¿éƒ¨åˆ†èŠ‚ç‚¹æ•…éšœï¼Œç³»ç»Ÿä¹Ÿèƒ½ç»§ç»­æ­£å¸¸è¿è¡Œã€‚</p>
<h4 data-id="heading-4">2.2 é›¶æ‹·è´æŠ€æœ¯ï¼šæ€§èƒ½çªç ´çš„å…³é”®</h4>
<p>RustFSé€šè¿‡é©å‘½æ€§çš„é›¶æ‹·è´æŠ€æœ¯å®ç°äº†æ€§èƒ½çš„è´¨çš„é£è·ƒã€‚åœ¨ä¼ ç»Ÿæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ•°æ®ä»å­˜å‚¨è®¾å¤‡åˆ°åº”ç”¨ç¨‹åºéœ€è¦ç»å†å¤šæ¬¡æ‹·è´ï¼šç¡¬ç›˜â†’å†…æ ¸ç¼“å†²åŒºâ†’ç”¨æˆ·ç©ºé—´ç¼“å†²åŒºâ†’ç½‘ç»œå †æ ˆã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡æ‹·è´éƒ½æ„å‘³ç€CPUå‘¨æœŸå’Œå†…å­˜å¸¦å®½çš„æ¶ˆè€—ã€‚</p>
<p><strong>RustFSçš„é›¶æ‹·è´æ¶æ„</strong>é€šè¿‡ä¸‰é¡¹æ ¸å¿ƒæŠ€æœ¯å®ç°ï¼š</p>
<ul>
<li>â€‹<strong>io_uringå¼‚æ­¥I/O</strong>â€‹ï¼šä½¿ç”¨Linuxå†…æ ¸çš„io_uringæ¥å£æ›¿ä»£ä¼ ç»ŸåŒæ­¥I/Oï¼Œå®ç°çœŸæ­£çš„å¼‚æ­¥é›¶æ‹·è´</li>
<li>â€‹<strong>å†…å­˜æ˜ å°„</strong>ï¼šå°†æ–‡ä»¶ç›´æ¥æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´ï¼Œé¿å…ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´çš„æ•°æ®æ‹·è´</li>
<li>â€‹<strong>RDMAç›´æ¥æ•°æ®æ”¾ç½®</strong>ï¼šåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œåˆ©ç”¨RDMAæŠ€æœ¯å®ç°ç½‘ç»œé›¶æ‹·è´</li>
</ul>
<p>å®æµ‹è¡¨æ˜ï¼Œåœ¨10Gç½‘ç»œç¯å¢ƒä¸‹ï¼Œä¼ ç»Ÿæ–‡ä»¶ç³»ç»Ÿæœ‰å¤šè¾¾<strong>70%çš„CPUæ—¶é—´</strong>æ¶ˆè€—åœ¨æ•°æ®æ‹·è´ä¸Šã€‚è€ŒRustFSçš„é›¶æ‹·è´è®¾è®¡å°†NVMe SSDçš„IOPSä»ä¼ ç»Ÿçš„300Kæå‡è‡³â€‹<strong>1,580K</strong>ï¼Œæ€§èƒ½æå‡è¾¾426%ã€‚</p>
<h4 data-id="heading-5">2.3 æ™ºèƒ½åˆ†å±‚å­˜å‚¨æ¶æ„</h4>
<p>é¢å¯¹æ€§èƒ½ä¸æˆæœ¬çš„åŒé‡æŒ‘æˆ˜ï¼ŒRustFSåˆ›æ–°åœ°é‡‡ç”¨äº†â€‹<strong>æ™ºèƒ½åˆ†å±‚å­˜å‚¨æ¶æ„</strong>ï¼Œå……åˆ†å‘æŒ¥SCMï¼ˆå­˜å‚¨çº§å†…å­˜ï¼‰ã€TLC/MLC SSDå’ŒQLC SSDå„è‡ªä¼˜åŠ¿ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># RustFSåˆ†å±‚å­˜å‚¨é…ç½®ç¤ºä¾‹</span>
<span class="hljs-attr">storage_tiering:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">tiers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"scm_tier"</span>
      <span class="hljs-attr">medium:</span> <span class="hljs-string">"scm"</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">"/opt/rustfs/scm"</span>
      <span class="hljs-attr">capacity:</span> <span class="hljs-string">"512GB"</span>
      <span class="hljs-attr">role:</span> <span class="hljs-string">"metadata_cache"</span>
      
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"tlc_tier"</span> 
      <span class="hljs-attr">medium:</span> <span class="hljs-string">"ssd"</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">"/opt/rustfs/ssd"</span>
      <span class="hljs-attr">capacity:</span> <span class="hljs-string">"4TB"</span>
      <span class="hljs-attr">role:</span> <span class="hljs-string">"hot_data"</span>
      
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"qlc_tier"</span>
      <span class="hljs-attr">medium:</span> <span class="hljs-string">"qlc_ssd"</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">"/opt/rustfs/qlc"</span>
      <span class="hljs-attr">capacity:</span> <span class="hljs-string">"64TB"</span>
      <span class="hljs-attr">role:</span> <span class="hljs-string">"cold_data"</span>
</code></pre>
<p>RustFSçš„<strong>æ™ºèƒ½æ•°æ®æ”¾ç½®å¼•æ“</strong>é€šè¿‡æœºå™¨å­¦ä¹ ç®—æ³•é¢„æµ‹æ•°æ®è®¿é—®æ¨¡å¼ï¼ŒåŸºäºè®¿é—®é¢‘ç‡ã€å»¶è¿Ÿæ•æ„Ÿåº¦ã€æ•°æ®å¤§å°ç­‰å¤šå› ç´ è¯„åˆ†å†³ç­–ï¼Œè‡ªåŠ¨å°†æ•°æ®æ”¾ç½®åœ¨åˆé€‚çš„å­˜å‚¨å±‚ã€‚è¿™ç§æ™ºèƒ½åˆ†å±‚è®¾è®¡åœ¨ä¿è¯æ€§èƒ½çš„åŒæ—¶ï¼Œæ˜¾è‘—é™ä½äº†å­˜å‚¨æˆæœ¬ã€‚</p>
<h3 data-id="heading-6">ä¸‰ã€å®æˆ˜æŒ‡å—ï¼šä»éƒ¨ç½²åˆ°ä¼˜åŒ–</h3>
<h4 data-id="heading-7">3.1 å¿«é€Ÿéƒ¨ç½²ï¼šDockerä¸€æ­¥åˆ°ä½</h4>
<p>æœ€ç®€å•å¿«æ·çš„éƒ¨ç½²æ–¹å¼æ˜¯ä½¿ç”¨Dockerä¸€é”®éƒ¨ç½²ï¼š</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-comment"># docker-compose.yml</span>
<span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">rustfs:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">rustfs/rustfs:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">rustfs</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9000:9000"</span>  <span class="hljs-comment"># APIç«¯å£</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9001:9001"</span>  <span class="hljs-comment"># æ§åˆ¶å°ç«¯å£</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./data:/data</span>  <span class="hljs-comment"># æ•°æ®æŒä¹…åŒ–</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_ROOT_USER=admin</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_ROOT_PASSWORD=admin123</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
</code></pre>
<p>è¿è¡Œ <code>docker-compose up -d</code>â€‹å³å¯å¯åŠ¨æœåŠ¡ã€‚è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A9001%2F" target="_blank" title="http://localhost:9001/" ref="nofollow noopener noreferrer">http://localhost:9001</a>ä½¿ç”¨ admin/admin123 ç™»å½•ç®¡ç†æ§åˆ¶å°ã€‚</p>
<h4 data-id="heading-8">3.2 ç”Ÿäº§ç¯å¢ƒé›†ç¾¤éƒ¨ç½²</h4>
<p>å¯¹äºä¼ä¸šçº§ç”Ÿäº§ç¯å¢ƒï¼Œé›†ç¾¤éƒ¨ç½²æ˜¯å¿…é¡»çš„ï¼Œå®ƒæä¾›é«˜å¯ç”¨æ€§å’Œå®¹é”™èƒ½åŠ›ã€‚RustFSå»ºè®®è‡³å°‘éƒ¨ç½²â€‹<strong>3ä¸ªèŠ‚ç‚¹</strong>ï¼ˆ1ä¸»2ä»ï¼‰ã€‚</p>
<p>â€‹<strong>èŠ‚ç‚¹è§„åˆ’ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li>ä¸»èŠ‚ç‚¹ï¼š192.168.1.10ï¼Œæ•°æ®ç›®å½• /data/rustfs/data</li>
<li>ä»èŠ‚ç‚¹1ï¼š192.168.1.11ï¼Œæ•°æ®ç›®å½• /data/rustfs/data</li>
<li>ä»èŠ‚ç‚¹2ï¼š192.168.1.12ï¼Œæ•°æ®ç›®å½• /data/rustfs/data</li>
</ul>
<p>â€‹<strong>é›†ç¾¤é…ç½®å…³é”®å‚æ•°</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># èŠ‚ç‚¹è§’è‰²ï¼Œä¸»èŠ‚ç‚¹è®¾ä¸º master</span>
node.role = master
<span class="hljs-comment"># ä¸»èŠ‚ç‚¹IPï¼ˆæœ¬æœºIPï¼‰</span>
node.ip = 192.168.1.10
<span class="hljs-comment"># æœåŠ¡ç«¯å£</span>
service.port = 9000
<span class="hljs-comment"># é›†ç¾¤é€šä¿¡ç«¯å£</span>
cluster.port = 9001
<span class="hljs-comment"># æ•°æ®å‰¯æœ¬æ•°ï¼Œå»ºè®®è®¾ä¸ºèŠ‚ç‚¹æ•°</span>
data.replica = 3
<span class="hljs-comment"># ä»èŠ‚ç‚¹åˆ—è¡¨ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</span>
cluster.slaves = rustfs-slave1:9001,rustfs-slave2:9001
</code></pre>
<h4 data-id="heading-9">3.3 å­˜å‚¨éç»“æ„åŒ–æ•°æ®å®æˆ˜</h4>
<p>RustFSå®Œå…¨å…¼å®¹S3 APIï¼Œå¯ä»¥è½»æ¾å­˜å‚¨å„ç§éç»“æ„åŒ–æ•°æ®ï¼šå›¾ç‰‡ã€è§†é¢‘ã€æ—¥å¿—æ–‡ä»¶ç­‰ã€‚</p>
<p>â€‹<strong>åˆ›å»ºå­˜å‚¨æ¡¶</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºå›¾ç‰‡å­˜å‚¨æ¡¶</span>
aws s3 mb s3://images --endpoint-url http://localhost:9000
<span class="hljs-comment"># åˆ›å»ºè§†é¢‘å­˜å‚¨æ¡¶  </span>
aws s3 mb s3://videos --endpoint-url http://localhost:9000
<span class="hljs-comment"># åˆ›å»ºæ—¥å¿—å­˜å‚¨æ¡¶</span>
aws s3 mb s3://logs --endpoint-url http://localhost:9000
</code></pre>
<p>â€‹<strong>ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸Šä¼ å•å¼ å›¾ç‰‡</span>
aws s3 <span class="hljs-built_in">cp</span> ./avatar.jpg s3://images/users/123/avatar.jpg --endpoint-url http://localhost:9000
<span class="hljs-comment"># ä¸Šä¼ æ•´ä¸ªå›¾ç‰‡ç›®å½•</span>
aws s3 <span class="hljs-built_in">cp</span> ./product-images/ s3://images/products/ --recursive --endpoint-url http://localhost:9000
</code></pre>
<p>â€‹<strong>å­˜å‚¨å¤§è§†é¢‘æ–‡ä»¶</strong>ï¼ˆæ”¯æŒåˆ†ç‰‡ä¸Šä¼ ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">aws s3 <span class="hljs-built_in">cp</span> ./promo-video.mp4 s3://videos/promotional/promo.mp4 \
  --endpoint-url http://localhost:9000 \
  --no-sign-request \
  --metadata name=promo_video
</code></pre>
<h3 data-id="heading-10">å››ã€é«˜çº§åŠŸèƒ½ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-11">4.1 æ•°æ®å®‰å…¨ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†</h4>
<p>RustFSæä¾›å®Œæ•´çš„æ•°æ®å®‰å…¨è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬åŠ å¯†å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<p>â€‹<strong>æœåŠ¡å™¨ç«¯åŠ å¯†</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">aws s3 <span class="hljs-built_in">cp</span> sensitive-data.txt s3://documents/secure/data.txt \
  --sse AES256 \
  --endpoint-url http://localhost:9000
</code></pre>
<p><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>è‡ªåŠ¨å°†æ—§æ•°æ®è¿ç§»åˆ°ä½æˆæœ¬å­˜å‚¨ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"Rules"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"ID"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Move old videos to cold storage"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Enabled"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Filter"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"Prefix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"archive/"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Transitions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"Days"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"StorageClass"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"COLD"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-12">4.2 ä¸å¤§æ•°æ®å’ŒAIç”Ÿæ€é›†æˆ</h4>
<p>RustFSä¸ä¸»æµå¤§æ•°æ®å’ŒAIæ¡†æ¶æ— ç¼é›†æˆï¼Œæ˜¯æ„å»ºæ•°æ®æ¹–çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<p>â€‹<strong>Sparké›†æˆç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">val</span> spark = <span class="hljs-type">SparkSession</span>.builder()
  .appName(<span class="hljs-string">"RustFS-Spark-Integration"</span>)
  .config(<span class="hljs-string">"spark.hadoop.fs.s3a.access.key"</span>, <span class="hljs-string">"rustfsadmin"</span>)
  .config(<span class="hljs-string">"spark.hadoop.fs.s3a.secret.key"</span>, <span class="hljs-string">"rustfsadmin"</span>) 
  .config(<span class="hljs-string">"spark.hadoop.fs.s3a.endpoint"</span>, <span class="hljs-string">"http://localhost:9000"</span>)
  .config(<span class="hljs-string">"spark.hadoop.fs.s3a.path.style.access"</span>, <span class="hljs-string">"true"</span>)
  .getOrCreate()

<span class="hljs-comment">// è¯»å–Parquetæ•°æ®é›†</span>
<span class="hljs-keyword">val</span> df = spark.read.parquet(<span class="hljs-string">"s3a://ai-datalake/imagenet/parquet/"</span>)
</code></pre>
<p>â€‹<strong>PyTorché›†æˆç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> Dataset
<span class="hljs-keyword">import</span> boto3

s3 = boto3.client(<span class="hljs-string">'s3'</span>,
                  endpoint_url=<span class="hljs-string">'http://localhost:9000'</span>,
                  aws_access_key_id=<span class="hljs-string">'rustfsadmin'</span>,
                  aws_secret_access_key=<span class="hljs-string">'rustfsadmin'</span>,
                  config=boto3.session.Config(signature_version=<span class="hljs-string">'s3v4'</span>))

<span class="hljs-keyword">class</span> <span class="hljs-title class_">S3ImageDataset</span>(<span class="hljs-title class_ inherited__">Dataset</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, bucket, prefix</span>):
        self.objects = s3.list_objects_v2(Bucket=bucket, Prefix=prefix)[<span class="hljs-string">'Contents'</span>]
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, idx</span>):
        obj = self.objects[idx]
        response = s3.get_object(Bucket=<span class="hljs-string">'ai-datalake'</span>, Key=obj[<span class="hljs-string">'Key'</span>])
        <span class="hljs-keyword">return</span> preprocess(Image.<span class="hljs-built_in">open</span>(response[<span class="hljs-string">'Body'</span>]))
</code></pre>
<h4 data-id="heading-13">4.3 æ€§èƒ½ä¼˜åŒ–å®æˆ˜</h4>
<p>RustFSæä¾›äº†ä¸°å¯Œçš„æ€§èƒ½è°ƒä¼˜å‚æ•°ï¼Œå¯æ ¹æ®å·¥ä½œè´Ÿè½½ç‰¹ç‚¹è¿›è¡Œä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># RustFSæ€§èƒ½ä¼˜åŒ–å‚æ•°</span>
export <span class="hljs-attr">RUSTFS_SCM_CACHE_SIZE</span>=<span class="hljs-string">"32G"</span>
export <span class="hljs-attr">RUSTFS_QLC_BUFFER_SIZE</span>=<span class="hljs-string">"4G"</span> 
export <span class="hljs-attr">RUSTFS_TIER_MIGRATION_THREADS</span>=<span class="hljs-number">16</span>
export <span class="hljs-attr">RUSTFS_IO_SCHEDULER</span>=<span class="hljs-string">"mq-deadline"</span>

<span class="hljs-comment"># QLCä¸“ç”¨ä¼˜åŒ–</span>
export <span class="hljs-attr">RUSTFS_QLC_SEQUENTIAL_THRESHOLD</span>=<span class="hljs-string">"1M"</span>
export <span class="hljs-attr">RUSTFS_QLC_GARBAGE_COLLECTION_INTERVAL</span>=<span class="hljs-string">"300"</span>
</code></pre>
<p>åœ¨æ ‡å‡†æµ‹è¯•ç¯å¢ƒä¸­ï¼ŒRustFS+SCM+QLCæ¶æ„å±•ç°å‡ºæ˜¾è‘—ä¼˜åŠ¿ï¼šå…ƒæ•°æ®æ“ä½œå»¶è¿Ÿé™ä½81%ï¼Œé¡ºåºè¯»ååé‡æå‡50%ï¼Œæ··åˆå·¥ä½œè´Ÿè½½æå‡25%ã€‚</p>
<h3 data-id="heading-14">äº”ã€åº”ç”¨åœºæ™¯ä¸æˆåŠŸå®è·µ</h3>
<p>RustFSé€‚ç”¨äºå¤šç§åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯éœ€è¦é«˜æ€§èƒ½ã€ä½æˆæœ¬å­˜å‚¨çš„éç»“æ„åŒ–æ•°æ®åº”ç”¨ï¼š</p>
<ol>
<li>â€‹<strong>AI/MLè®­ç»ƒå¹³å°</strong>ï¼šRustFSçš„å¹¶è¡Œå¯¹è±¡è¯»å–ç‰¹æ€§ä½¿è®­ç»ƒæ—¶é—´ç¼©çŸ­28%ï¼ŒåŒæ—¶å­˜å‚¨æˆæœ¬é™ä½40%ï¼ˆç›¸æ¯”3å‰¯æœ¬æ–¹æ¡ˆï¼‰ã€‚</li>
<li>â€‹<strong>å¤šåª’ä½“å­˜å‚¨æœåŠ¡</strong>ï¼šå®Œå…¨å…¼å®¹S3 APIï¼Œé€‚åˆå­˜å‚¨å›¾ç‰‡ã€è§†é¢‘ç­‰å¤šåª’ä½“æ–‡ä»¶ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ å’Œåˆ†ç‰‡ä¸Šä¼ ã€‚</li>
<li>â€‹<strong>æ•°æ®æ¹–æ¶æ„</strong>ï¼šä½œä¸ºæ•°æ®æ¹–åº•å±‚å­˜å‚¨ï¼Œæ”¯æŒSparkã€Flinkç­‰å¤§æ•°æ®æ¡†æ¶ï¼Œæä¾›é«˜ååé‡æ•°æ®è®¿é—®ã€‚</li>
<li>â€‹<strong>è¾¹ç¼˜å­˜å‚¨åœºæ™¯</strong>ï¼šè½»é‡çº§è®¾è®¡ï¼ˆäºŒè¿›åˆ¶åŒ…ä»…93MBï¼‰ä½¿å¾—RustFSå¯ä»¥åœ¨è¾¹ç¼˜è®¾å¤‡å¦‚æ ‘è“æ´¾ä¸Šè¿è¡Œã€‚</li>
<li>â€‹<strong>ä¿¡åˆ›ç¯å¢ƒ</strong>ï¼šä½œä¸º100%ä¸­å›½è‡ªä¸»çŸ¥è¯†äº§æƒçš„é¡¹ç›®ï¼Œå·²é€šè¿‡éº’éºŸã€ç»Ÿä¿¡ç­‰å›½äº§æ“ä½œç³»ç»Ÿè®¤è¯ï¼Œæ”¯æŒé²²é¹ã€æµ·å…‰ç­‰å›½äº§èŠ¯ç‰‡ï¼Œå®Œå…¨ç¬¦åˆä¿¡åˆ›è¦æ±‚ã€‚</li>
</ol>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>RustFSä½œä¸ºæ–°ä¸€ä»£é«˜æ€§èƒ½åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ç³»ç»Ÿï¼Œé€šè¿‡åˆ›æ–°çš„é›¶æ‹·è´æ¶æ„ã€æ™ºèƒ½åˆ†å±‚å­˜å‚¨å’Œå®Œå…¨S3å…¼å®¹æ€§ï¼Œä¸ºç°ä»£æ•°æ®å­˜å‚¨æŒ‘æˆ˜æä¾›äº†å“è¶Šè§£å†³æ–¹æ¡ˆã€‚å…¶å“è¶Šçš„æ€§èƒ½è¡¨ç°ã€ä½èµ„æºå ç”¨å’Œå¼€æºå‹å¥½çš„è®¸å¯è¯æ¨¡å¼ï¼Œä½¿å…¶æˆä¸ºMinIOç­‰ä¼ ç»Ÿæ–¹æ¡ˆçš„æœ‰åŠ›æ›¿ä»£è€…ã€‚</p>
<p>æ— è®ºæ˜¯AIè®­ç»ƒã€å¤§æ•°æ®åˆ†æè¿˜æ˜¯ç®€å•çš„æ–‡ä»¶å­˜å‚¨éœ€æ±‚ï¼ŒRustFSéƒ½èƒ½æä¾›é«˜æ•ˆã€å¯é çš„æ•°æ®ç®¡ç†ä½“éªŒã€‚é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œå¸Œæœ›æ‚¨èƒ½å…¨é¢äº†è§£RustFSçš„ç‰¹æ€§å’Œä¼˜åŠ¿ï¼Œå¹¶åœ¨å®é™…é¡¹ç›®ä¸­ä½“éªŒå…¶å¸¦æ¥çš„æ•°æ®ç®¡ç†æå‡ã€‚</p>
<hr/>
<p>ä»¥ä¸‹æ˜¯æ·±å…¥å­¦ä¹  RustFS çš„æ¨èèµ„æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer">RustFS</a></p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdocs.rustfs.com%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//docs.rustfs.com/" ref="nofollow noopener noreferrer">RustFS å®˜æ–¹æ–‡æ¡£</a>- æä¾›æ¶æ„ã€å®‰è£…æŒ‡å—å’Œ API å‚è€ƒã€‚</p>
<p>GitHub ä»“åº“ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdocs.rustfs.com%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//docs.rustfs.com/" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a> - è·å–æºä»£ç ã€æäº¤é—®é¢˜æˆ–è´¡çŒ®ä»£ç ã€‚</p>
<p>ç¤¾åŒºæ”¯æŒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Forgs%2Frustfs%2Fdiscussions" target="_blank" title="https://link.zhihu.com/?target=https%3A//github.com/orgs/rustfs/discussions" ref="nofollow noopener noreferrer">GitHub Discussions</a>- ä¸å¼€å‘è€…äº¤æµç»éªŒå’Œè§£å†³æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <!----></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ç¼–ç¨‹å®æˆ˜ï¼šå³æ—¶èŠå¤©åº”ç”¨ â€”â€” æ¶ˆæ¯å­˜å‚¨ä¸æ¨é€]]></title>    <link>https://juejin.cn/post/7595974133097725986</link>    <guid>https://juejin.cn/post/7595974133097725986</guid>    <pubDate>2026-01-18T05:21:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595974133097725986" data-draft-id="7596153767872233506" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js ç¼–ç¨‹å®æˆ˜ï¼šå³æ—¶èŠå¤©åº”ç”¨ â€”â€” æ¶ˆæ¯å­˜å‚¨ä¸æ¨é€"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2026-01-18T05:21:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js ç¼–ç¨‹å®æˆ˜ï¼šå³æ—¶èŠå¤©åº”ç”¨ â€”â€” æ¶ˆæ¯å­˜å‚¨ä¸æ¨é€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T05:21:57.000Z" title="Sun Jan 18 2026 05:21:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨å‰é¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»åŸºäº WebSocket å®ç°äº†å³æ—¶èŠå¤©åº”ç”¨çš„å®æ—¶é€šä¿¡èƒ½åŠ›ï¼Œå¹¶å®Œæˆäº†ç¾¤èŠå’Œç§èŠåŠŸèƒ½ã€‚ä½†åœ¨çœŸå®çš„èŠå¤©ç³»ç»Ÿä¸­ï¼Œä»…æœ‰å®æ—¶è½¬å‘æ˜¯ä¸å¤Ÿçš„ï¼Œ<strong>æ¶ˆæ¯å­˜å‚¨ä¸æ¶ˆæ¯æ¨é€</strong>æ˜¯ä¸¤ä¸ªå¿…ä¸å¯å°‘çš„èƒ½åŠ›ã€‚</p>
</blockquote>
<p>æ¶ˆæ¯å­˜å‚¨ç”¨äºæ”¯æŒèŠå¤©è®°å½•æŸ¥è¯¢å’Œç¦»çº¿æ¶ˆæ¯ï¼Œè€Œæ¶ˆæ¯æ¨é€åˆ™ä¿è¯ç”¨æˆ·å³ä½¿æš‚æ—¶ä¸åœ¨çº¿ï¼Œä¹Ÿä¸ä¼šé”™è¿‡é‡è¦ä¿¡æ¯ã€‚æœ¬æ–‡å°†å›´ç»•è¿™ä¸¤ä¸ªå…³é”®èƒ½åŠ›ï¼Œä»‹ç»åœ¨ Node.js ä¸­çš„å¸¸è§å®ç°æ€è·¯ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦æ¶ˆæ¯å­˜å‚¨</h2>
<p>åœ¨æœ€ç®€å•çš„èŠå¤©ç¤ºä¾‹ä¸­ï¼Œæ¶ˆæ¯åªå­˜åœ¨äºå†…å­˜ä¸­ï¼Œä¸€æ—¦ç”¨æˆ·æ–­çº¿æˆ–æœåŠ¡é‡å¯ï¼Œæ¶ˆæ¯å°±ä¼šä¸¢å¤±ã€‚è¿™åœ¨çœŸå®åœºæ™¯ä¸­æ˜¯ä¸å¯æ¥å—çš„ã€‚</p>
<p>æ¶ˆæ¯å­˜å‚¨ä¸»è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>ç”¨æˆ·å¯ä»¥æŸ¥çœ‹å†å²èŠå¤©è®°å½•</li>
<li>æ”¯æŒç”¨æˆ·ç¦»çº¿åé‡æ–°ä¸Šçº¿æŸ¥çœ‹æ¶ˆæ¯</li>
<li>æ”¯æŒå¤šç«¯ç™»å½•æ—¶çš„æ•°æ®åŒæ­¥</li>
<li>ä¸ºåç»­æœç´¢å’Œç»Ÿè®¡æä¾›åŸºç¡€</li>
</ul>
<p>å› æ­¤ï¼ŒèŠå¤©ç³»ç»Ÿå¿…é¡»å°†æ¶ˆæ¯æŒä¹…åŒ–å­˜å‚¨ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æ¶ˆæ¯æ•°æ®æ¨¡å‹è®¾è®¡</h2>
<p>åœ¨å¼€å§‹ç¼–ç ä¹‹å‰ï¼Œéœ€è¦å…ˆè®¾è®¡æ¶ˆæ¯çš„åŸºæœ¬ç»“æ„ã€‚</p>
<h3 data-id="heading-2">1. æ¶ˆæ¯æ ¸å¿ƒå­—æ®µ</h3>
<p>ä¸€æ¡èŠå¤©æ¶ˆæ¯é€šå¸¸åŒ…å«ï¼š</p>
<ul>
<li>æ¶ˆæ¯ ID</li>
<li>å‘é€è€… ID</li>
<li>æ¥æ”¶è€… ID æˆ–ç¾¤ ID</li>
<li>æ¶ˆæ¯ç±»å‹ï¼ˆç§èŠ / ç¾¤èŠï¼‰</li>
<li>æ¶ˆæ¯å†…å®¹</li>
<li>å‘é€æ—¶é—´</li>
<li>æ¶ˆæ¯çŠ¶æ€ï¼ˆå·²è¯» / æœªè¯»ï¼‰</li>
</ul>
<p>è¿™äº›å­—æ®µå¯ä»¥æ»¡è¶³ç»å¤§å¤šæ•°èŠå¤©åœºæ™¯ã€‚</p>
<hr/>
<h3 data-id="heading-3">2. æ•°æ®åº“å­˜å‚¨æ–¹æ¡ˆé€‰æ‹©</h3>
<p>å¸¸è§çš„å­˜å‚¨æ–¹å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li>å…³ç³»å‹æ•°æ®åº“ï¼ˆMySQL / PostgreSQLï¼‰</li>
<li>æ–‡æ¡£æ•°æ®åº“ï¼ˆMongoDBï¼‰</li>
<li>ç¼“å­˜æ•°æ®åº“ï¼ˆRedisï¼Œç”¨äºæœªè¯»æ¶ˆæ¯ï¼‰</li>
</ul>
<p>åœ¨ Node.js é¡¹ç›®ä¸­ï¼Œå¸¸è§ç»„åˆæ˜¯ï¼š</p>
<ul>
<li>æ•°æ®åº“è´Ÿè´£é•¿æœŸå­˜å‚¨</li>
<li>Redis è´Ÿè´£ä¸´æ—¶ç¼“å­˜å’Œæ¨é€è¾…åŠ©</li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€æ¶ˆæ¯å…¥åº“æµç¨‹è®¾è®¡</h2>
<p>å½“æœåŠ¡å™¨æ”¶åˆ°ä¸€æ¡èŠå¤©æ¶ˆæ¯æ—¶ï¼Œé€šå¸¸æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š</p>
<ol>
<li>æ ¡éªŒæ¶ˆæ¯åˆæ³•æ€§</li>
<li>å†™å…¥æ•°æ®åº“</li>
<li>åˆ¤æ–­æ¥æ”¶æ–¹æ˜¯å¦åœ¨çº¿</li>
<li>åœ¨çº¿åˆ™å®æ—¶æ¨é€</li>
<li>ä¸åœ¨çº¿åˆ™æ ‡è®°ä¸ºæœªè¯»</li>
</ol>
<p>è¿™ç§è®¾è®¡å¯ä»¥ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚</p>
<hr/>
<h2 data-id="heading-5">å››ã€æ¶ˆæ¯å­˜å‚¨å®ç°æ€è·¯</h2>
<h3 data-id="heading-6">1. ç§èŠæ¶ˆæ¯å­˜å‚¨</h3>
<p>ç§èŠæ¶ˆæ¯é€šå¸¸å­˜å‚¨ä¸ºä¸€æ¡ç‹¬ç«‹è®°å½•ï¼ŒåŒ…å«å‘é€è€…å’Œæ¥æ”¶è€…ä¿¡æ¯ã€‚</p>
<p>ç¤ºä¾‹é€»è¾‘ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">savePrivateMessage</span>(<span class="hljs-params">message</span>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Message</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">from</span>: message.<span class="hljs-property">from</span>,
    <span class="hljs-attr">to</span>: message.<span class="hljs-property">to</span>,
    <span class="hljs-attr">content</span>: message.<span class="hljs-property">content</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'private'</span>,
    <span class="hljs-attr">created_at</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
  });
}
</code></pre>
<p>æ•°æ®åº“ä¸­å¯é€šè¿‡ from / to å­—æ®µå¿«é€ŸæŸ¥è¯¢å†å²æ¶ˆæ¯ã€‚</p>
<hr/>
<h3 data-id="heading-7">2. ç¾¤èŠæ¶ˆæ¯å­˜å‚¨</h3>
<p>ç¾¤èŠæ¶ˆæ¯é€šå¸¸åªå­˜ä¸€æ¡è®°å½•ï¼Œä½†å…³è”ç¾¤ IDã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveGroupMessage</span>(<span class="hljs-params">message</span>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Message</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">from</span>: message.<span class="hljs-property">from</span>,
    <span class="hljs-attr">room_id</span>: message.<span class="hljs-property">roomId</span>,
    <span class="hljs-attr">content</span>: message.<span class="hljs-property">content</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'group'</span>,
    <span class="hljs-attr">created_at</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
  });
}
</code></pre>
<p>æŸ¥è¯¢ç¾¤èŠè®°å½•æ—¶ï¼Œæ ¹æ® room_id è¿‡æ»¤å³å¯ã€‚</p>
<hr/>
<h2 data-id="heading-8">äº”ã€å†å²æ¶ˆæ¯æŸ¥è¯¢</h2>
<p>ä¸ºäº†æ”¯æŒèŠå¤©è®°å½•å±•ç¤ºï¼Œé€šå¸¸éœ€è¦æä¾› HTTP API æŸ¥è¯¢å†å²æ¶ˆæ¯ã€‚</p>
<p>å¸¸è§è®¾è®¡æ–¹å¼ï¼š</p>
<ul>
<li>ç§èŠï¼šæ ¹æ®ä¸¤ä¸ªç”¨æˆ· ID æŸ¥è¯¢</li>
<li>ç¾¤èŠï¼šæ ¹æ®ç¾¤ ID æŸ¥è¯¢</li>
<li>æ”¯æŒåˆ†é¡µï¼Œé¿å…ä¸€æ¬¡è¿”å›å¤§é‡æ•°æ®</li>
</ul>
<p>è¿™ç§æ¥å£é€šå¸¸ç”± HTTP æœåŠ¡æä¾›ï¼Œè€Œä¸æ˜¯ WebSocketã€‚</p>
<hr/>
<h2 data-id="heading-9">å…­ã€ç¦»çº¿æ¶ˆæ¯å¤„ç†</h2>
<h3 data-id="heading-10">1. ç¦»çº¿æ¶ˆæ¯çš„åˆ¤å®š</h3>
<p>æœåŠ¡å™¨å¯ä»¥é€šè¿‡åœ¨çº¿ç”¨æˆ·æ˜ å°„åˆ¤æ–­ï¼š</p>
<ul>
<li>æ¥æ”¶æ–¹åœ¨çº¿ â†’ ç›´æ¥æ¨é€</li>
<li>æ¥æ”¶æ–¹ç¦»çº¿ â†’ å­˜å‚¨ä¸ºæœªè¯»æ¶ˆæ¯</li>
</ul>
<p>æœªè¯»çŠ¶æ€é€šå¸¸éœ€è¦åœ¨æ•°æ®åº“æˆ– Redis ä¸­æ ‡è®°ã€‚</p>
<hr/>
<h3 data-id="heading-11">2. ç¦»çº¿æ¶ˆæ¯æ¨é€æ—¶æœº</h3>
<p>å½“ç”¨æˆ·é‡æ–°ä¸Šçº¿æ—¶ï¼š</p>
<ol>
<li>æŸ¥è¯¢æœªè¯»æ¶ˆæ¯</li>
<li>æŒ‰æ—¶é—´é¡ºåºæ¨é€ç»™å®¢æˆ·ç«¯</li>
<li>æ›´æ–°æ¶ˆæ¯çŠ¶æ€ä¸ºå·²è¯»</li>
</ol>
<p>è¿™ç§æ–¹å¼ä¿è¯æ¶ˆæ¯ä¸ä¼šä¸¢å¤±ã€‚</p>
<hr/>
<h2 data-id="heading-12">ä¸ƒã€æ¶ˆæ¯æ¨é€æœºåˆ¶è®¾è®¡</h2>
<h3 data-id="heading-13">1. WebSocket å®æ—¶æ¨é€</h3>
<p>å¯¹äºåœ¨çº¿ç”¨æˆ·ï¼Œæ¶ˆæ¯é€šè¿‡ WebSocket å³æ—¶æ¨é€ï¼š</p>
<ul>
<li>å»¶è¿Ÿä½</li>
<li>ä½“éªŒå¥½</li>
<li>é€‚åˆèŠå¤©åœºæ™¯</li>
</ul>
<p>è¿™æ˜¯èŠå¤©ç³»ç»Ÿçš„ä¸»è¦æ¨é€æ–¹å¼ã€‚</p>
<hr/>
<h3 data-id="heading-14">2. ä¸ HTTP æ¥å£é…åˆ</h3>
<p>WebSocket è´Ÿè´£å®æ—¶æ¶ˆæ¯ï¼Œè€Œ HTTP æ¥å£è´Ÿè´£ï¼š</p>
<ul>
<li>å†å²æ¶ˆæ¯æŸ¥è¯¢</li>
<li>æœªè¯»æ¶ˆæ¯ç»Ÿè®¡</li>
<li>æ¶ˆæ¯çŠ¶æ€æ›´æ–°</li>
</ul>
<p>äºŒè€…é…åˆï¼Œå¯ä»¥è®©ç³»ç»Ÿç»“æ„æ›´åŠ æ¸…æ™°ã€‚</p>
<hr/>
<h2 data-id="heading-15">å…«ã€æ€§èƒ½ä¸æ‰©å±•æ€§è€ƒè™‘</h2>
<p>å½“ç”¨æˆ·è§„æ¨¡å¢å¤§åï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>æ¶ˆæ¯è¡¨æ•°æ®é‡å¿«é€Ÿå¢é•¿</li>
<li>æŸ¥è¯¢æ€§èƒ½ä¸‹é™</li>
<li>å•èŠ‚ç‚¹ WebSocket æœåŠ¡å‹åŠ›å¢å¤§</li>
</ul>
<p>å¸¸è§ä¼˜åŒ–æ–¹å‘åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ¶ˆæ¯è¡¨æŒ‰æ—¶é—´æˆ–ç”¨æˆ·åˆ†è¡¨</li>
<li>ä½¿ç”¨ Redis ç¼“å­˜æœ€è¿‘æ¶ˆæ¯</li>
<li>WebSocket æœåŠ¡é›†ç¾¤åŒ–</li>
<li>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œè·¨èŠ‚ç‚¹å¹¿æ’­</li>
</ul>
<p>è¿™äº›é—®é¢˜åœ¨ç³»ç»Ÿæ—©æœŸè®¾è®¡é˜¶æ®µå°±åº”æœ‰æ‰€é¢„æœŸã€‚</p>
<hr/>
<h2 data-id="heading-16">ä¹ã€æ€»ç»“</h2>
<p>æ¶ˆæ¯å­˜å‚¨ä¸æ¨é€æ˜¯å³æ—¶èŠå¤©ç³»ç»Ÿä¸­ä¸å¯æˆ–ç¼ºçš„æ ¸å¿ƒèƒ½åŠ›ã€‚é€šè¿‡åˆç†çš„æ•°æ®æ¨¡å‹è®¾è®¡ã€æ¸…æ™°çš„æ¶ˆæ¯æµç¨‹å’Œ WebSocket + HTTP çš„åä½œæ–¹å¼ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªç¨³å®šã€å¯æ‰©å±•çš„èŠå¤©ç³»ç»Ÿã€‚</p>
<p>åœ¨ã€ŠNode.js ç¼–ç¨‹å®æˆ˜ã€‹ç³»åˆ—ä¸­ï¼Œå³æ—¶èŠå¤©é¡¹ç›®ä¸ä»…å±•ç¤ºäº† WebSocket çš„ä½¿ç”¨æ–¹å¼ï¼Œä¹Ÿæ¶µç›–äº†çœŸå®ç³»ç»Ÿä¸­å¸¸è§çš„æ¶ˆæ¯æŒä¹…åŒ–å’Œæ¨é€åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡æ„äº†20ä¸ªSpringBooté¡¹ç›®åï¼Œæ€»ç»“å‡ºè¿™å¥—ç¨³å®šé«˜æ•ˆçš„æ¶æ„è®¾è®¡]]></title>    <link>https://juejin.cn/post/7595893785907658786</link>    <guid>https://juejin.cn/post/7595893785907658786</guid>    <pubDate>2026-01-18T05:34:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595893785907658786" data-draft-id="7587284708947329039" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‡æ„äº†20ä¸ªSpringBooté¡¹ç›®åï¼Œæ€»ç»“å‡ºè¿™å¥—ç¨³å®šé«˜æ•ˆçš„æ¶æ„è®¾è®¡"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-18T05:34:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‡æ„äº†20ä¸ªSpringBooté¡¹ç›®åï¼Œæ€»ç»“å‡ºè¿™å¥—ç¨³å®šé«˜æ•ˆçš„æ¶æ„è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T05:34:49.000Z" title="Sun Jan 18 2026 05:34:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬åˆšå¼€å§‹çš„ <code>SpringBoot</code> é¡¹ç›®æ¸…çˆ½ç®€æ´ï¼Œä½†éšç€ä¸šåŠ¡å¢é•¿ï¼Œä»£ç å´å˜å¾—è¶Šæ¥è¶Šè‡ƒè‚¿ã€éš¾ä»¥ç»´æŠ¤ï¼Ÿ</p>
<p>å…¶å®<strong>é¡¹ç›®æ¶æ„çš„åˆç†æ€§</strong>å¾€å¾€å†³å®šäº†åæœŸçš„å¼€å‘æ•ˆç‡ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å¸¸è¸©çš„å‘</h2>
<p>ä¸¾2ä¸ªå…¸å‹åœºæ™¯ï¼š</p>
<p><strong>1.ä¸‡èƒ½çš„Service</strong>ï¼šå°æè¦ä¿®æ”¹ä¸€ä¸ªè®¢å•çŠ¶æ€çš„åŠŸèƒ½ï¼Œç»“æœå‘ç°<code>OrderService.java</code>å·²ç»3800å¤šè¡Œäº†ï¼é‡Œé¢æ—¢æœ‰è®¢å•å¤„ç†ï¼Œåˆæœ‰ç”¨æˆ·ç§¯åˆ†è®¡ç®—ï¼Œè¿˜å¤¹æ‚ç€å„ç§æŠ¥è¡¨å¯¼å‡ºé€»è¾‘ã€‚æƒ³æ”¹ä¸€è¡Œä»£ç ï¼Œå¾—å…ˆèŠ±åŠå¤©æ—¶é—´ç†è§£ã€‚</p>
<p><strong>2.å¼‚å¸¸å¤„ç†</strong>ï¼šçº¿ä¸Šå‡ºäº†ä¸ªé—®é¢˜ï¼Œç”¨æˆ·æ”¯ä»˜æˆåŠŸäº†ä½†è®¢å•çŠ¶æ€æ²¡æ›´æ–°ã€‚æ’æŸ¥å‘ç°ï¼šæ”¯ä»˜æ¨¡å—ç”¨try-catchè¿”å›é”™è¯¯ç ï¼Œè®¢å•æ¨¡å—ç›´æ¥æŠ›å¼‚å¸¸ï¼Œè€Œä¸­é—´çš„åè°ƒå±‚æ—¢æ²¡å¤„ç†å¼‚å¸¸ä¹Ÿæ²¡è®°å½•æ—¥å¿—ï¼Œå‡ºäº†é—®é¢˜éƒ½ä¸çŸ¥é“è¯¥æ‰¾è°ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä¸€ä¸ªæ¸…æ™°çš„æ¶æ„åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­</h2>
<h3 data-id="heading-2">1. åˆç†çš„é¡¹ç›®ç»“æ„</h3>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è‰¯å¥½çš„é¡¹ç›®ç»“æ„åº”è¯¥æ˜¯ä»€ä¹ˆæ ·çš„ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">src/main/java
â””â”€â”€ com
    â””â”€â”€ example
        â””â”€â”€ project
            â”œâ”€â”€ common           <span class="hljs-comment">// é€šç”¨ç»„ä»¶</span>
            â”‚   â”œâ”€â”€ annotation   <span class="hljs-comment">// è‡ªå®šä¹‰æ³¨è§£</span>
            â”‚   â”œâ”€â”€ config       <span class="hljs-comment">// å…¨å±€é…ç½®</span>
            â”‚   â”œâ”€â”€ constant     <span class="hljs-comment">// å¸¸é‡</span>
            â”‚   â”œâ”€â”€ exception    <span class="hljs-comment">// ç»Ÿä¸€å¼‚å¸¸å¤„ç†</span>
            â”‚   â”œâ”€â”€ utils        <span class="hljs-comment">// å·¥å…·ç±»</span>
            â”‚   â””â”€â”€ vo           <span class="hljs-comment">// é€šç”¨VO</span>
            â”œâ”€â”€ module1          <span class="hljs-comment">// ä¸šåŠ¡æ¨¡å—1</span>
            â”‚   â”œâ”€â”€ controller   <span class="hljs-comment">// æ§åˆ¶å™¨</span>
            â”‚   â”œâ”€â”€ service      <span class="hljs-comment">// æœåŠ¡å±‚</span>
            â”‚   â”œâ”€â”€ dao          <span class="hljs-comment">// æ•°æ®è®¿é—®å±‚</span>
            â”‚   â”œâ”€â”€ entity       <span class="hljs-comment">// å®ä½“ç±»</span>
            â”‚   â”œâ”€â”€ dto          <span class="hljs-comment">// æ•°æ®ä¼ è¾“å¯¹è±¡</span>
            â”‚   â””â”€â”€ vo           <span class="hljs-comment">// è§†å›¾å¯¹è±¡</span>
            â”œâ”€â”€ module2          <span class="hljs-comment">// ä¸šåŠ¡æ¨¡å—2</span>
            â”‚   â””â”€â”€ ...          <span class="hljs-comment">// ç»“æ„åŒä¸Š</span>
            â””â”€â”€ ProjectApplication.java  <span class="hljs-comment">// å¯åŠ¨ç±»</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<ul>
<li><strong>æŒ‰åŠŸèƒ½æ¨¡å—åˆ’åˆ†</strong>ï¼šè€Œä¸æ˜¯æŒ‰æŠ€æœ¯å±‚æ¬¡åˆ’åˆ†ã€‚è¿™æ ·æ¯ä¸ªæ¨¡å—éƒ½æ˜¯è‡ªåŒ…å«çš„ï¼ŒèŒè´£å•ä¸€ï¼Œä¿®æ”¹ä¸€ä¸ªæ¨¡å—ä¸ä¼šå½±å“åˆ°å…¶ä»–æ¨¡å—ã€‚</li>
<li><strong>åˆ†å±‚æ¸…æ™°</strong>ï¼šcontrollerè´Ÿè´£æ¥æ”¶è¯·æ±‚ï¼Œserviceå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œdaoè´Ÿè´£æ•°æ®æ“ä½œã€‚</li>
<li><strong>é€šç”¨ç»„ä»¶æŠ½å–</strong>ï¼šé¿å…ä»£ç é‡å¤ï¼Œä¸€å¤„ä¿®æ”¹å¤„å¤„ç”Ÿæ•ˆã€‚</li>
</ul>
<h3 data-id="heading-3">2. ç»Ÿä¸€çš„APIå“åº”æ ¼å¼</h3>
<p>æ¥å£è¿”å›æ ¼å¼äº”èŠ±å…«é—¨ï¼Œå‰ç«¯åŒäº‹æ˜¯ä¸æ˜¯ç»å¸¸æ‰¾ä½ åæ§½ï¼Ÿæ¥çœ‹çœ‹ç»Ÿä¸€å“åº”æ ¼å¼çš„è®¾è®¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç»Ÿä¸€APIå“åº”æ ¼å¼
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;T&gt; {
    <span class="hljs-keyword">private</span> Integer code;    <span class="hljs-comment">// çŠ¶æ€ç </span>
    <span class="hljs-keyword">private</span> String message;  <span class="hljs-comment">// æ¶ˆæ¯</span>
    <span class="hljs-keyword">private</span> T data;          <span class="hljs-comment">// æ•°æ®</span>
    
    <span class="hljs-comment">// æˆåŠŸå“åº”</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">success</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-number">200</span>, <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span>, <span class="hljs-literal">null</span>);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">success</span><span class="hljs-params">(T data)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-number">200</span>, <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span>, data);
    }
    
    <span class="hljs-comment">// å¤±è´¥å“åº”</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">error</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-number">500</span>, message, <span class="hljs-literal">null</span>);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">error</span><span class="hljs-params">(Integer code, String message)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(code, message, <span class="hljs-literal">null</span>);
    }
}
</code></pre>
<p>è¿™æ ·ï¼Œæ‰€æœ‰æ¥å£è¿”å›éƒ½éµå¾ªç»Ÿä¸€æ ¼å¼ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç¤ºä¾‹æ•°æ®"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼šå‰ç«¯å¯ä»¥ç»Ÿä¸€å°è£…è¯·æ±‚æ‹¦æˆªå™¨ï¼Œæ— éœ€ä¸ºæ¯ä¸ªæ¥å£å•ç‹¬å¤„ç†å“åº”æ ¼å¼ã€‚</p>
<h3 data-id="heading-4">3. å…¨å±€å¼‚å¸¸å¤„ç†</h3>
<p>åˆ«å†åœ¨æ¯ä¸ªæ–¹æ³•é‡Œå†™try-catchäº†ï¼ä½¿ç”¨ <code>@ControllerAdvice</code> å®ç°å…¨å±€å¼‚å¸¸å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestControllerAdvice</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> {
    
    <span class="hljs-comment">// å¤„ç†è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸</span>
    <span class="hljs-meta">@ExceptionHandler(BusinessException.class)</span>
    <span class="hljs-keyword">public</span> Result&lt;?&gt; handleBusinessException(BusinessException e) {
        log.warn(<span class="hljs-string">"ä¸šåŠ¡å¼‚å¸¸: {}"</span>, e.getMessage());
        <span class="hljs-keyword">return</span> Result.error(e.getCode(), e.getMessage());
    }
    
    <span class="hljs-comment">// å¤„ç†å‚æ•°æ ¡éªŒå¼‚å¸¸</span>
    <span class="hljs-meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span>
    <span class="hljs-keyword">public</span> Result&lt;?&gt; handleValidException(MethodArgumentNotValidException e) {
        <span class="hljs-type">String</span> <span class="hljs-variable">error</span> <span class="hljs-operator">=</span> e.getBindingResult().getFieldError().getDefaultMessage();
        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-number">400</span>, error);
    }
    
    <span class="hljs-comment">// å¤„ç†æ‰€æœ‰å…¶ä»–å¼‚å¸¸</span>
    <span class="hljs-meta">@ExceptionHandler(Exception.class)</span>
    <span class="hljs-keyword">public</span> Result&lt;?&gt; handleException(Exception e) {
        log.error(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸: {}"</span>, e.getMessage(), e);
        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-number">500</span>, <span class="hljs-string">"ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åå†è¯•"</span>);
    }
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·åš</strong>ï¼š</p>
<ul>
<li>ä¸šåŠ¡ä»£ç æ›´æ¸…çˆ½ï¼Œåªéœ€å…³æ³¨æ­£å¸¸é€»è¾‘</li>
<li>å¼‚å¸¸å¤„ç†é›†ä¸­ï¼Œä¿®æ”¹æ–¹ä¾¿</li>
<li>å¯ä»¥ç»Ÿä¸€è®°å½•å¼‚å¸¸æ—¥å¿—ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜</li>
</ul>
<h3 data-id="heading-5">4. é…ç½®ç®¡ç†æœ€ä½³å®è·µ</h3>
<p>é…ç½®æ–‡ä»¶ç®¡ç†æ··ä¹±æ˜¯å¾ˆå¤šé¡¹ç›®çš„ç—›ç‚¹ã€‚æ¨èè¿™æ ·ç»„ç»‡ï¼š</p>
<ul>
<li><strong>åˆ†ç¯å¢ƒé…ç½®</strong>ï¼šapplication.ymlï¼ˆå…¬å…±é…ç½®ï¼‰+ application-{env}.ymlï¼ˆç¯å¢ƒç‰¹å®šé…ç½®ï¼‰</li>
<li><strong>æ•æ„Ÿä¿¡æ¯å¤–éƒ¨åŒ–</strong>ï¼šæ•°æ®åº“å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ä¸è¦æ”¾åœ¨ä»£ç ä»“åº“ï¼Œä½¿ç”¨é…ç½®ä¸­å¿ƒæˆ–ç¯å¢ƒå˜é‡</li>
<li><strong>é…ç½®ç±»å°è£…</strong>ï¼šä½¿ç”¨@ConfigurationPropertieså°†é…ç½®é¡¹æ˜ å°„ä¸ºJavaå¯¹è±¡</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@ConfigurationProperties(prefix = "app.jwt")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtProperties</span> {
    <span class="hljs-keyword">private</span> String secret;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> expiration;
    <span class="hljs-keyword">private</span> String header;
}
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼š</p>
<ul>
<li>é…ç½®ä¸ä»£ç è§£è€¦</li>
<li>ä¿®æ”¹é…ç½®æ— éœ€é‡æ–°ç¼–è¯‘</li>
<li>ç±»å‹å®‰å…¨ï¼ŒIDEèƒ½æä¾›è‡ªåŠ¨è¡¥å…¨å’ŒéªŒè¯</li>
</ul>
<h3 data-id="heading-6">5. äº‹åŠ¡ç®¡ç†è§„èŒƒ</h3>
<p>äº‹åŠ¡ç®¡ç†ä¸å½“ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚å»ºè®®ï¼š</p>
<ol>
<li><strong>é¿å…åœ¨Controllerå±‚å¼€å¯äº‹åŠ¡</strong>ï¼šäº‹åŠ¡åº”ç”±Serviceå±‚ç®¡ç†</li>
<li><strong>åˆç†è®¾ç½®äº‹åŠ¡ä¼ æ’­è¡Œä¸º</strong>ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„ä¼ æ’­è¡Œä¸º</li>
<li><strong>é¿å…å¤§äº‹åŠ¡</strong>ï¼šé•¿æ—¶é—´è¿è¡Œçš„äº‹åŠ¡ä¼šé”ä½æ•°æ®åº“èµ„æº</li>
<li><strong>ç»Ÿä¸€å¼‚å¸¸å›æ»šç­–ç•¥</strong>ï¼šé»˜è®¤RuntimeExceptionä¼šè§¦å‘å›æ»šï¼Œæ£€æŸ¥å‹å¼‚å¸¸ä¸ä¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OrderRepository orderRepository;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> InventoryService inventoryService;
    
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderRequest request)</span> {
        <span class="hljs-comment">// 1. åˆ›å»ºè®¢å•</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderRepository.save(convertToOrder(request));
        
        <span class="hljs-comment">// 2. æ‰£å‡åº“å­˜ï¼ˆè¿œç¨‹è°ƒç”¨ï¼‰</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> inventoryService.decrease(request.getItems());
        
        <span class="hljs-keyword">if</span> (!success) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"åº“å­˜ä¸è¶³"</span>);
        }
        
        <span class="hljs-keyword">return</span> order;
    }
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šä¸Šé¢çš„ä¾‹å­æœ‰ç‘•ç–µï¼è¿œç¨‹è°ƒç”¨ä¸åº”æ”¾åœ¨äº‹åŠ¡ä¸­ï¼Œä¼šå¯¼è‡´äº‹åŠ¡è¿‡é•¿ã€‚æ›´åˆç†çš„åšæ³•æ˜¯ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è§£è€¦ã€‚</p>
<h4 data-id="heading-7">æ­£ç¡®çš„åšæ³•ï¼šä½¿ç”¨å¯é äº‹ä»¶æ¨¡å¼ + æ¶ˆæ¯é˜Ÿåˆ—</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OrderRepository orderRepository;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ApplicationEventPublisher eventPublisher;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TransactionTemplate transactionTemplate; <span class="hljs-comment">// ç”¨äºç¼–ç¨‹å¼äº‹åŠ¡</span>
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderRequest request)</span> {
        <span class="hljs-comment">// 1. åˆ›å»ºè®¢å•ï¼ˆåœ¨äº‹åŠ¡å†…ï¼‰</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();
        order.setStatus(OrderStatus.CREATED);
        order.setItems(request.getItems());
        order.setTotalAmount(calculateTotal(request.getItems()));
        order.setCreateTime(LocalDateTime.now());
        <span class="hljs-type">Order</span> <span class="hljs-variable">savedOrder</span> <span class="hljs-operator">=</span> orderRepository.save(order);
        
        <span class="hljs-comment">// 2. äº‹åŠ¡æäº¤åå†å‘é€äº‹ä»¶</span>
        <span class="hljs-comment">// ä½¿ç”¨TransactionSynchronizationç¡®ä¿äº‹åŠ¡æäº¤åæ‰æ‰§è¡Œ</span>
        transactionTemplate.execute(status -&gt; {
            TransactionSynchronizationManager.registerSynchronization(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionSynchronization</span>() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCommit</span><span class="hljs-params">()</span> {
                    <span class="hljs-comment">// äº‹åŠ¡æˆåŠŸæäº¤åï¼Œå‘å¸ƒæ‰£å‡åº“å­˜äº‹ä»¶</span>
                    eventPublisher.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderCreatedEvent</span>(savedOrder.getId(), request.getItems()));
                }
            });
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        });
        
        <span class="hljs-keyword">return</span> savedOrder;
    }
}

<span class="hljs-comment">// äº‹ä»¶ç›‘å¬å™¨ï¼ˆå¼‚æ­¥å¤„ç†ï¼‰</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InventoryEventListener</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> InventoryService inventoryService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OrderRepository orderRepository;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RocketMQTemplate rocketMQTemplate; <span class="hljs-comment">// æˆ–å…¶ä»–MQå®¢æˆ·ç«¯</span>
    
    <span class="hljs-meta">@Async</span>
    <span class="hljs-meta">@TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderCreated</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. å…ˆè®°å½•äº‹ä»¶å·²å¤„ç†ï¼ˆé˜²é‡å¤ï¼‰</span>
            <span class="hljs-keyword">if</span> (eventLogService.isEventProcessed(event.getOrderId())) {
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-comment">// 2. æ‰£å‡åº“å­˜ï¼ˆè¿œç¨‹è°ƒç”¨ï¼‰</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> inventoryService.decrease(event.getItems());
            
            <span class="hljs-keyword">if</span> (!success) {
                <span class="hljs-comment">// 3. åº“å­˜ä¸è¶³ï¼Œæ›´æ–°è®¢å•çŠ¶æ€</span>
                orderRepository.updateStatus(event.getOrderId(), OrderStatus.CANCELLED);
                
                <span class="hljs-comment">// 4. é€šçŸ¥ç”¨æˆ·</span>
                notificationService.sendStockShortageNotice(event.getOrderId());
            }
            
            <span class="hljs-comment">// 5. è®°å½•äº‹ä»¶å¤„ç†ç»“æœ</span>
            eventLogService.markEventAsProcessed(event.getOrderId());
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å¤„ç†è®¢å•[{}]åº“å­˜æ‰£å‡å¤±è´¥"</span>, event.getOrderId(), e);
            <span class="hljs-comment">// 5. é‡è¯•æœºåˆ¶ï¼šå‘é€åˆ°MQé‡è¯•é˜Ÿåˆ—</span>
            rocketMQTemplate.convertAndSend(<span class="hljs-string">"ORDER_INVENTORY_RETRY"</span>, event);
        }
    }
}

<span class="hljs-comment">// é‡è¯•å¤„ç†å™¨ï¼ˆè¡¥å¿æœºåˆ¶ï¼‰</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InventoryRetryHandler</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> InventoryService inventoryService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OrderRepository orderRepository;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EventLogService eventLogService;
    
    <span class="hljs-meta">@RocketMQMessageListener(topic = "ORDER_INVENTORY_RETRY", consumerGroup = "inventory-retry-group")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleRetry</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        <span class="hljs-comment">// 1. æ£€æŸ¥é‡è¯•æ¬¡æ•°</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">retryCount</span> <span class="hljs-operator">=</span> retryLogService.getRetryCount(event.getOrderId());
        <span class="hljs-keyword">if</span> (retryCount &gt; <span class="hljs-number">3</span>) {
            <span class="hljs-comment">// è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œäººå·¥ä»‹å…¥</span>
            alarmService.sendAlert(<span class="hljs-string">"åº“å­˜æ‰£å‡æŒç»­å¤±è´¥ï¼Œè®¢å•ID: "</span> + event.getOrderId());
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. å†æ¬¡å°è¯•æ‰£å‡åº“å­˜</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> inventoryService.decrease(event.getItems());
            
            <span class="hljs-keyword">if</span> (success) {
                <span class="hljs-comment">// æ›´æ–°è®¢å•çŠ¶æ€ä¸ºå·²ç¡®è®¤</span>
                orderRepository.updateStatus(event.getOrderId(), OrderStatus.CONFIRMED);
                <span class="hljs-comment">// æ ‡è®°äº‹ä»¶å·²å¤„ç†</span>
                eventLogService.markEventAsProcessed(event.getOrderId());
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (retryCount &gt;= <span class="hljs-number">2</span>) {
                <span class="hljs-comment">// æœ€åä¸€æ¬¡é‡è¯•ä»å¤±è´¥ï¼Œå–æ¶ˆè®¢å•</span>
                orderRepository.updateStatus(event.getOrderId(), OrderStatus.CANCELLED);
                notificationService.sendStockShortageNotice(event.getOrderId());
            }
            
            <span class="hljs-comment">// 3. è®°å½•é‡è¯•</span>
            retryLogService.recordRetry(event.getOrderId());
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"é‡è¯•å¤„ç†è®¢å•[{}]åº“å­˜æ‰£å‡å¤±è´¥"</span>, event.getOrderId(), e);
            retryLogService.recordRetry(event.getOrderId());
            <span class="hljs-comment">// å¯ä»¥è€ƒè™‘æŒ‡æ•°é€€é¿ç®—æ³•å»¶è¿Ÿä¸‹æ¬¡é‡è¯•</span>
        }
    }
}
</code></pre>
<p>äº‹åŠ¡è®¾è®¡ä¸æ˜¯ç®€å•çš„åŠ ä¸ª<code>@Transactional</code>æ³¨è§£ï¼Œè€Œæ˜¯è¦è€ƒè™‘ï¼š</p>
<ol>
<li>äº‹åŠ¡èŒƒå›´è¦å°½é‡å°</li>
<li>äº‹åŠ¡å†…ä¸è¦æœ‰è¿œç¨‹è°ƒç”¨ã€IOæ“ä½œ</li>
<li>è·¨æœåŠ¡è°ƒç”¨éœ€è¦æœ‰è¡¥å¿æœºåˆ¶</li>
<li>æœ€ç»ˆä¸€è‡´æ€§å¾€å¾€æ˜¯æ›´å¥½çš„é€‰æ‹©</li>
</ol>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€æ¡ˆä¾‹ï¼šé‡æ„å‰åçš„å¯¹æ¯”</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·æ¨¡å—ï¼Œé‡æ„å‰æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é‡æ„å‰ï¼šæ··ä¹±çš„UserService</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserRepository userRepository;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> EmailService emailService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SmsService smsService;
    
    <span class="hljs-comment">// åŒ…å«æ³¨å†Œã€ç™»å½•ã€ä¿®æ”¹èµ„æ–™ã€å¯†ç é‡ç½®ç­‰å¤šç§åŠŸèƒ½</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">register</span><span class="hljs-params">(UserRegisterDTO dto)</span> {
        <span class="hljs-comment">// 1. å‚æ•°æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (userRepository.existsByUsername(dto.getUsername())) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·åå·²å­˜åœ¨"</span>);
        }
        
        <span class="hljs-comment">// 2. ä¿å­˜ç”¨æˆ·</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setUsername(dto.getUsername());
        user.setPassword(encryptPassword(dto.getPassword()));
        user.setEmail(dto.getEmail());
        user.setPhone(dto.getPhone());
        user.setCreateTime(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
        
        <span class="hljs-type">User</span> <span class="hljs-variable">savedUser</span> <span class="hljs-operator">=</span> userRepository.save(user);
        
        <span class="hljs-comment">// 3. å‘é€æ¬¢è¿é‚®ä»¶</span>
        <span class="hljs-keyword">try</span> {
            emailService.sendWelcomeEmail(user.getEmail());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å‘é€æ¬¢è¿é‚®ä»¶å¤±è´¥"</span>, e);
        }
        
        <span class="hljs-keyword">return</span> savedUser;
    }
    
    <span class="hljs-comment">// è¿˜æœ‰2000è¡Œå…¶ä»–æ–¹æ³•...</span>
}
</code></pre>
<p>é‡æ„åï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é‡æ„åï¼šèŒè´£æ¸…æ™°çš„åˆ†å±‚æ¶æ„</span>
<span class="hljs-comment">// controller/UserController.java</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/users")</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserService userService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRegisterService userRegisterService;
    
    <span class="hljs-meta">@PostMapping("/register")</span>
    <span class="hljs-keyword">public</span> Result&lt;UserVO&gt; <span class="hljs-title function_">register</span><span class="hljs-params">(<span class="hljs-meta">@Valid</span> <span class="hljs-meta">@RequestBody</span> UserRegisterDTO dto)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRegisterService.register(dto);
        <span class="hljs-keyword">return</span> Result.success(convertToVO(user));
    }
    
    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> Result&lt;UserDetailVO&gt; <span class="hljs-title function_">getById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-type">UserDetail</span> <span class="hljs-variable">detail</span> <span class="hljs-operator">=</span> userService.getUserDetail(id);
        <span class="hljs-keyword">return</span> Result.success(convertToDetailVO(detail));
    }
}

<span class="hljs-comment">// service/UserRegisterService.java</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRegisterService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserValidator userValidator;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PasswordEncoder passwordEncoder;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserEventPublisher eventPublisher;
    
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">register</span><span class="hljs-params">(UserRegisterDTO dto)</span> {
        <span class="hljs-comment">// 1. æ ¡éªŒ</span>
        userValidator.validateRegistration(dto);
        
        <span class="hljs-comment">// 2. åˆ›å»ºç”¨æˆ·</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> createUserFromDto(dto);
        
        <span class="hljs-comment">// 3. ä¿å­˜</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">savedUser</span> <span class="hljs-operator">=</span> userRepository.save(user);
        
        <span class="hljs-comment">// 4. å‘å¸ƒäº‹ä»¶ï¼ˆè§£è€¦é€šçŸ¥é€»è¾‘ï¼‰</span>
        eventPublisher.publishUserRegisteredEvent(savedUser);
        
        <span class="hljs-keyword">return</span> savedUser;
    }
    
    <span class="hljs-keyword">private</span> User <span class="hljs-title function_">createUserFromDto</span><span class="hljs-params">(UserRegisterDTO dto)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setUsername(dto.getUsername());
        user.setPassword(passwordEncoder.encode(dto.getPassword()));
        user.setEmail(dto.getEmail());
        user.setPhone(dto.getPhone());
        user.setCreateTime(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
        <span class="hljs-keyword">return</span> user;
    }
}

<span class="hljs-comment">// service/UserService.java</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserFactory userFactory;
    
    <span class="hljs-meta">@Transactional(readOnly = true)</span>
    <span class="hljs-keyword">public</span> UserDetail <span class="hljs-title function_">getUserDetail</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRepository.findById(userId)
                .orElseThrow(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨"</span>));
        
        <span class="hljs-comment">// ç»„è£…è¯¦ç»†ä¿¡æ¯ï¼ˆå¯èƒ½æ¶‰åŠå¤šè¡¨æŸ¥è¯¢ï¼‰</span>
        <span class="hljs-keyword">return</span> userFactory.createUserDetail(user);
    }
}

<span class="hljs-comment">// event/UserEventPublisher.java</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserEventPublisher</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ApplicationEventPublisher eventPublisher;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publishUserRegisteredEvent</span><span class="hljs-params">(User user)</span> {
        eventPublisher.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserRegisteredEvent</span>(<span class="hljs-built_in">this</span>, user));
    }
}

<span class="hljs-comment">// listener/UserRegistrationListener.java</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRegistrationListener</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EmailService emailService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SmsService smsService;
    
    <span class="hljs-meta">@Async</span> <span class="hljs-comment">// å¼‚æ­¥å¤„ç†</span>
    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleUserRegistered</span><span class="hljs-params">(UserRegisteredEvent event)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> event.getUser();
        <span class="hljs-keyword">try</span> {
            emailService.sendWelcomeEmail(user.getEmail());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å‘é€æ¬¢è¿é‚®ä»¶å¤±è´¥ï¼Œç”¨æˆ·ID: {}"</span>, user.getId(), e);
        }
        
        <span class="hljs-keyword">try</span> {
            smsService.sendWelcomeSms(user.getPhone());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å‘é€æ¬¢è¿çŸ­ä¿¡å¤±è´¥ï¼Œç”¨æˆ·ID: {}"</span>, user.getId(), e);
        }
    }
}
</code></pre>
<p><strong>é‡æ„å¸¦æ¥çš„å¥½å¤„</strong>ï¼š</p>
<ol>
<li><strong>èŒè´£åˆ†æ˜</strong>ï¼šæ³¨å†ŒæœåŠ¡åªè´Ÿè´£æ³¨å†Œï¼ŒæŸ¥è¯¢æœåŠ¡åªè´Ÿè´£æŸ¥è¯¢</li>
<li><strong>äº‹åŠ¡è¾¹ç•Œæ¸…æ™°</strong>ï¼šåªæœ‰éœ€è¦äº‹åŠ¡çš„æ–¹æ³•æ‰æ·»åŠ @Transactional</li>
<li><strong>è§£è€¦é€šçŸ¥é€»è¾‘</strong>ï¼šä½¿ç”¨äº‹ä»¶æœºåˆ¶å°†æ ¸å¿ƒä¸šåŠ¡ä¸è¾…åŠ©åŠŸèƒ½è§£è€¦</li>
<li><strong>å¯æµ‹è¯•æ€§å¼º</strong>ï¼šæ¯ä¸ªç»„ä»¶èŒè´£å•ä¸€ï¼Œæ›´å®¹æ˜“ç¼–å†™å•å…ƒæµ‹è¯•</li>
<li><strong>å¼‚å¸¸å¤„ç†ç»Ÿä¸€</strong>ï¼šä¾èµ–å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œæ— éœ€åœ¨ä¸šåŠ¡ä»£ç ä¸­å¤„ç†å¼‚å¸¸</li>
</ol>
<h2 data-id="heading-9">å››ã€æ¶æ„è®¾è®¡çš„å‡ ä¸ªå…³é”®åŸåˆ™</h2>
<p>åˆ†äº«å‡ ä¸ªæˆ‘è®¤ä¸ºç‰¹åˆ«é‡è¦çš„åŸåˆ™ï¼Œè¿™äº›åŸåˆ™æŒ‡å¯¼ç€æˆ‘çš„æ¶æ„è®¾è®¡ï¼š</p>
<h3 data-id="heading-10">1. é«˜å†…èšä½è€¦åˆ</h3>
<ul>
<li><strong>é«˜å†…èš</strong>ï¼šä¸€ä¸ªæ¨¡å—å†…éƒ¨çš„ç»„ä»¶é«˜åº¦ç›¸å…³ï¼Œå…±åŒå®Œæˆå•ä¸€èŒè´£</li>
<li><strong>ä½è€¦åˆ</strong>ï¼šæ¨¡å—ä¹‹é—´ä¾èµ–å…³ç³»ç®€å•ï¼Œä¿®æ”¹ä¸€ä¸ªæ¨¡å—ä¸ä¼šå½±å“å¤ªå¤šå…¶ä»–æ¨¡å—</li>
</ul>
<h3 data-id="heading-11">2. å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSoCï¼‰</h3>
<p>å°†ä¸åŒå…³æ³¨ç‚¹ï¼ˆå¦‚ä¸šåŠ¡é€»è¾‘ã€æ•°æ®è®¿é—®ã€å®‰å…¨æ§åˆ¶ï¼‰åˆ†ç¦»åˆ°ä¸åŒç»„ä»¶ä¸­ï¼Œæ¯ä¸ªç»„ä»¶åªå…³æ³¨è‡ªå·±çš„èŒè´£ã€‚</p>
<h3 data-id="heading-12">3. ä¾èµ–å€’ç½®åŸåˆ™</h3>
<p>é«˜å±‚æ¨¡å—ä¸åº”ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚æŠ½è±¡ä¸åº”ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„è®¾è®¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    <span class="hljs-keyword">private</span> MysqlOrderRepository repository; <span class="hljs-comment">// ä¾èµ–å…·ä½“å®ç°</span>
}

<span class="hljs-comment">// å¥½çš„è®¾è®¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    <span class="hljs-keyword">private</span> OrderRepository repository; <span class="hljs-comment">// ä¾èµ–æŠ½è±¡æ¥å£</span>
}
</code></pre>
<h3 data-id="heading-13">4. é€‚æ—¶é‡æ„</h3>
<p>ä¸è¦ç­‰åˆ°ä»£ç çƒ‚åˆ°æ— æ³•ç»´æŠ¤æ‰é‡æ„ã€‚å»ºè®®ï¼š</p>
<ul>
<li>æ¯æ¬¡ä¿®æ”¹ä»£ç æ—¶ï¼Œé¡ºæ‰‹æ”¹è¿›ç›¸å…³çš„ç»“æ„</li>
<li>å®šæœŸè¿›è¡Œä»£ç è¯„å®¡ï¼Œå‘ç°æ¶æ„é—®é¢˜åŠæ—¶è°ƒæ•´</li>
<li>ä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•ä¿éšœé‡æ„å®‰å…¨</li>
</ul>
<h2 data-id="heading-14">äº”ã€æ€»ç»“</h2>
<ol>
<li><strong>æ¨¡å—åŒ–ç»„ç»‡</strong>ï¼šæŒ‰ä¸šåŠ¡åŠŸèƒ½è€ŒéæŠ€æœ¯å±‚æ¬¡åˆ’åˆ†æ¨¡å—</li>
<li><strong>ç»Ÿä¸€è§„èŒƒ</strong>ï¼šAPIå“åº”ã€å¼‚å¸¸å¤„ç†ã€æ—¥å¿—è®°å½•ç­‰ç»Ÿä¸€è§„èŒƒ</li>
<li><strong>åˆ†å±‚æ˜ç¡®</strong>ï¼šControllerã€Serviceã€DAOå„å¸å…¶èŒ</li>
<li><strong>è§£è€¦è®¾è®¡</strong>ï¼šä½¿ç”¨äº‹ä»¶é©±åŠ¨ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰æ–¹å¼è§£è€¦æ ¸å¿ƒä¸šåŠ¡</li>
<li><strong>é…ç½®ç®¡ç†</strong>ï¼šåˆç†ç»„ç»‡é…ç½®ï¼Œæ•æ„Ÿä¿¡æ¯åˆ†ç¦»</li>
</ol>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>